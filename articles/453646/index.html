<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè® üò† ü•£ Normalizaci√≥n de datos en una base de datos distribuida, microservicios y ERP üíÆ üöí üò§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! 

 Esta peque√±a nota naci√≥ durante la discusi√≥n del art√≠culo "Monolitos distribuidos ..." , y dado que el tema requiere m√°s reflexi√≥n, deci...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Normalizaci√≥n de datos en una base de datos distribuida, microservicios y ERP</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453646/">  Hola Habr! <br><br>  Esta peque√±a nota naci√≥ durante la discusi√≥n del art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Monolitos distribuidos ..."</a> , y dado que el tema requiere m√°s reflexi√≥n, decid√≠ publicarlo en mi blog.  El autor del art√≠culo en realidad describe una base de datos distribuida, lo que demuestra que el registro de eventos es la √∫nica estructura de almacenamiento correcta.  Los argumentos son aproximadamente los siguientes: <br><br><ul><li>  Dado que el evento siempre se localiza en el espacio / tiempo, puede almacenar todos los datos en s√≠ mismo (a veces en forma de enlaces a eventos anteriores), lo que hace que el evento sea serializable, aumenta la localidad, reduce la conectividad, etc. </li><li>  Una vez que ocurre un evento, ya no cambia (cualquier refinamiento est√° documentado por otros eventos), lo que reduce el tr√°fico de replicaci√≥n. </li><li>  El formato de almacenamiento de eventos puede estar m√°s o menos unificado y desligado de un √°rea tem√°tica espec√≠fica. </li><li>  Los registros de eventos se pueden dividir / fusionar con relativa facilidad, puede almacenar diferentes tipos de eventos en diferentes nodos, es decir, en esencia, estamos hablando de una base de datos distribuida. </li><li> Los eventos est√°n ordenados por tiempo, y esta secuencia tambi√©n refleja una relaci√≥n causal (no se puede hacer referencia al evento actual m√°s adelante). </li><li>  Al registrar un evento, no es necesario actualizar transaccionalmente otros datos (de hecho, es obligatorio, pero en un n√∫mero limitado de casos, por ejemplo, el saldo del suscriptor en el sistema de facturaci√≥n debe ser instant√°neamente relevante, es necesario actualizar los contadores de enlaces, etc.). </li><li>  Los informes se pueden generar directamente desde el registro de eventos, sin la necesidad de convertir los datos en un formulario normalizado. </li></ul><a name="habracut"></a><br>  Con respecto al √∫ltimo punto, numerosas pruebas de rendimiento (incluso en mi blog) muestran que en el hardware moderno, procesar mil millones de eventos (hechos) con un algoritmo de un solo paso con memoria a corto plazo lleva minutos, lo cual es bastante aceptable para la presentaci√≥n de informes.  Y dado que el procesamiento de eventos de varios tipos que no est√°n conectados por enlaces es f√°cil de paralelizar, el tiempo de informe se puede reducir a decenas de segundos, sin tener que sobrecargar la normalizaci√≥n de datos / indexaci√≥n / recopilaci√≥n de estad√≠sticas / depuraci√≥n y sugerencias de sugerencias, como es el caso en los RDBMS regulares.  Por lo tanto, crear informes basados ‚Äã‚Äãen dichos datos no me asusta.  Sin embargo, considere el problema de manera m√°s amplia. <br><br>  Una aplicaci√≥n comercial t√≠pica se puede representar como una cadena de transformaci√≥n de datos: <br>  "Entrada =&gt; modelo =&gt; salida".  Cualquier esquema de almacenamiento es un compromiso entre tres extremos: <br><br><ul><li>  Almacenamos los datos en el formato de salida.  As√≠ es como funcionan una variedad de escaparates y OLAP, donde el tiempo de respuesta es importante.  Se conocen los inconvenientes: demanda de memoria excesiva y baja tasa de actualizaci√≥n (generalmente por lotes). </li><li>  Almacenamos datos en el formato del modelo de dominio, simplificando as√≠ los algoritmos de c√°lculo.  Hay muchos inconvenientes: se requiere una doble transformaci√≥n de datos (de entrada a modelo y de modelo a salida), los costos de transacci√≥n aumentan, es dif√≠cil proporcionar almacenamiento distribuido, cambiar el esquema es costoso, etc.  Sin embargo, esta es la opci√≥n m√°s popular. </li><li>  Almacenamos los datos en el formato de entrada (de hecho, lo que ofrece el autor del art√≠culo es un registro de eventos).  En este caso, los costos de transacci√≥n son m√≠nimos, los datos se dividen y fusionan f√°cilmente, un esquema de almacenamiento simple, claro y estable.  Beneficio!  Es cierto que tienes que aprender a programar de nuevo. </li></ul><br>  En relaci√≥n con mi √°rea de inter√©s (sistemas de informaci√≥n corporativos), un evento es un documento primario y el libro de referencia puede considerarse como un evento anterior.  Ya describ√≠ la estructura de la tabla de un ERP occidental t√≠pico en el art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"NoERP o una nueva apariencia ..."</a> , donde propuse abolir la normalizaci√≥n excesiva de datos (con la excepci√≥n de los registros de saldos instant√°neos) y reescribir la mayor√≠a de los c√°lculos / informes en ciclos de un solo paso, en los cuales los primarios se procesar√°n directamente documentos  No repetir√© los argumentos, todo est√° indicado en el art√≠culo, pero el esquema que propuse coincidi√≥ pr√°cticamente con la tesis del autor del primer art√≠culo, a saber, que el registro de eventos son los datos.  Es agradable cuando alguien m√°s piensa en esta direcci√≥n. <br><br>  Est√° claro que este enfoque parece ser un paso atr√°s en comparaci√≥n con los DBMS inteligentes modernos, pero en el mundo highloid a veces hay que abandonar las herramientas populares / abstractas / universales, a favor de una programaci√≥n imperativa brutal y efectiva, que, adem√°s, no requiere licencias costosas para los nodos / kernels / users. <br><br>  Me gustar√≠a decir por separado sobre el m√©todo de organizar las relaciones dentro del registro de eventos: debe ser bidireccional, es decir, cada evento debe almacenar un contador de referencia para s√≠ mismo.  Esto es necesario para la implementaci√≥n de algoritmos de un solo paso: pasamos de eventos antiguos a nuevos, al mismo tiempo almacenamos en cach√© cada evento con un n√∫mero distinto de cero de enlaces entrantes en la memoria, y lo eliminamos de la memoria cach√© solo despu√©s de procesar todos los referentes.  La presencia del contador de referencia reduce de manera desagradable el rendimiento de las transacciones; por ejemplo, si el directorio de la contraparte se usa en cada documento, el contador de referencia en la contraparte debe actualizarse cada vez que se agrega un documento, a veces en otro nodo.  Sin embargo, este lugar puede optimizarse universalmente, evitando transacciones distribuidas en todos los dem√°s casos. <br><br>  En realidad, a nivel de idea, esto es todo por ahora, todav√≠a espero un proyecto espec√≠fico (por ejemplo, sobre la base de recibos de efectivo o facturas) y, si se presenta esta oportunidad, informar√© sobre los resultados. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/453646/">https://habr.com/ru/post/453646/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../453626/index.html">Aventuras en una corriente separada. Informe Yandex</a></li>
<li><a href="../453628/index.html">¬øQu√© pagar√° en 20 a√±os?</a></li>
<li><a href="../453634/index.html">Alfa Bank School of System Analysis</a></li>
<li><a href="../453642/index.html">Analizador inteligente para un n√∫mero escrito en palabras</a></li>
<li><a href="../453644/index.html">Entrevista: 10 preguntas sobre Swift. Parte 3</a></li>
<li><a href="../453650/index.html">N√∫cleo de software de la infraestructura cibern√©tica a bordo del caza de combate unificado F-35</a></li>
<li><a href="../453652/index.html">LogRock: Prueba a trav√©s del registro</a></li>
<li><a href="../453656/index.html">Web est√°tica: ¬øvolver a lo b√°sico?</a></li>
<li><a href="../453660/index.html">Intel mostr√≥ el nuevo procesador i9-9900KS con frecuencia Turbo de 5 GHz por n√∫cleo</a></li>
<li><a href="../453662/index.html">Marte: incluso m√°s hielo en el Polo Norte, pero profundo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>