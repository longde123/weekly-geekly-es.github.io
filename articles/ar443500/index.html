<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧜🏽 🍆 🕔 مكونات وظيفية مع رد فعل السنانير. لماذا هو أفضل؟ 💕 👨🏾‍🏭 🤚🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="عندما تم إصدار React.js 16.8 ، سنحت لنا الفرصة لاستخدام React Hooks. الخطافات تجعلنا قادرين على كتابة مكونات تعمل بكامل طاقتها باستخدام الوظائف. يمكنن...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>مكونات وظيفية مع رد فعل السنانير. لماذا هو أفضل؟</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443500/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  عندما تم إصدار React.js 16.8 ، سنحت لنا الفرصة لاستخدام React Hooks.  الخطافات تجعلنا قادرين على كتابة مكونات تعمل بكامل طاقتها باستخدام الوظائف.  يمكننا استخدام جميع ميزات React.js والقيام بطريقة أكثر ملاءمة. </p><br><p style=";text-align:right;direction:rtl">  كثير من الناس لا يتفقون مع مفهوم السنانير.  في هذه المقالة أود أن أخبر عن بعض المزايا الهامة التي تقدمها لك React Hooks ولماذا نحتاج إلى الكتابة باستخدام Hooks. </p><br><p style=";text-align:right;direction:rtl">  لن أتحدث عن كيفية استخدام السنانير.  ليس من المهم جدا بالنسبة للأمثلة.  إذا كنت ترغب في قراءة شيء ما حول هذا الموضوع ، يمكنك استخدام <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">الوثائق الرسمية</a> .  أيضا ، إذا كان هذا الموضوع سيكون مثيرا للاهتمام بالنسبة لك ، سأكتب المزيد عن هوكس. </p><a name="habracut"></a><br><h2 id="hooks-allow-us-to-reuse-our-code-easily" style=";text-align:right;direction:rtl">  السنانير تسمح لنا لإعادة استخدام رمز لدينا بسهولة </h2><br><p style=";text-align:right;direction:rtl">  دعونا نتخيل مكونًا يقدم نموذجًا بسيطًا.  يمكن أن يكون شيئًا يوضح لنا بعض المدخلات ويسمح لنا بتغيير قيمها. </p><br><p style=";text-align:right;direction:rtl">  مع تدوين الفصل ، سيكون هناك شيء مثل هذا: </p><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">class Form extends React.Component { state = { // Fields values fields: {}, }; render() { return ( &lt;form&gt; {/* Inputs render */} &lt;/form&gt; ); }; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  دعنا الآن نتخيل أننا نريد حفظ قيم حقولنا تلقائيًا في الواجهة الخلفية كلما تغيرت.  أقترح تخطي تعريف الوظائف الخارجية مثل <code>shallowEqual</code> و <code>debounce</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">class Form extends React.Component { constructor(props) { super(props); this.saveToDraft = debounce(500, this.saveToDraft); }; state = { // Fields values fields: {}, // Draft saving meta draft: { isSaving: false, lastSaved: null, }, }; saveToDraft = (data) =&gt; { if (this.state.isSaving) { return; } this.setState({ isSaving: true, }); makeSomeAPICall().then(() =&gt; { this.setState({ isSaving: false, lastSaved: new Date(), }) }); } componentDidUpdate(prevProps, prevState) { if (!shallowEqual(prevState.fields, this.state.fields)) { this.saveToDraft(this.state.fields); } } render() { return ( &lt;form&gt; {/* Draft saving meta render */} {/* Inputs render */} &lt;/form&gt; ); }; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  نفس العنصر مع السنانير: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">const Form = () =&gt; { // Our state const [fields, setFields] = useState({}); const [draftIsSaving, setDraftIsSaving] = useState(false); const [draftLastSaved, setDraftLastSaved] = useState(false); useEffect(() =&gt; { const id = setTimeout(() =&gt; { if (draftIsSaving) { return; } setDraftIsSaving(true); makeSomeAPICall().then(() =&gt; { setDraftIsSaving(false); setDraftLastSaved(new Date()); }); }, 500); return () =&gt; clearTimeout(id); }, [fields]); return ( &lt;form&gt; {/* Draft saving meta render */} {/* Inputs render */} &lt;/form&gt; ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  كما نرى ، ليس هناك فرق كبير هنا.  <code>this.state</code> مع هوك <code>useState</code> وحفظ المسودة في <code>useEffect</code> hook الآن. </p><br><p style=";text-align:right;direction:rtl">  الفرق الذي أريد إظهاره هنا هو (هناك اختلافات أخرى أيضًا ، لكنني سأركز على هذا الاختلاف): يمكننا بسهولة استخراج هذا الرمز من مكوننا واستخدامه في مكان آخر: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">// useDraft hook can be used in any other component const useDraft = (fields) =&gt; { const [draftIsSaving, setDraftIsSaving] = useState(false); const [draftLastSaved, setDraftLastSaved] = useState(false); useEffect(() =&gt; { const id = setTimeout(() =&gt; { if (draftIsSaving) { return; } setDraftIsSaving(true); makeSomeAPICall().then(() =&gt; { setDraftIsSaving(false); setDraftLastSaved(new Date()); }); }, 500); return () =&gt; clearTimeout(id); }, [fields]); return [draftIsSaving, draftLastSaved]; } const Form = () =&gt; { // Our state const [fields, setFields] = useState({}); const [draftIsSaving, draftLastSaved] = useDraft(fields); return ( &lt;form&gt; {/* Draft saving meta render */} {/* Inputs render */} &lt;/form&gt; ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ويمكننا استخدام هوك استخدام في مكونات أخرى!  إنه ، بالطبع ، مثال بسيط للغاية ، ولكن إعادة استخدام الكود مهمة جدًا ويوضح المثال مدى سهولة استخدام Hooks. </p><br><h2 id="hooks-allow-us-to-write-component-in-more-intuitive-way" style=";text-align:right;direction:rtl">  السنانير تسمح لنا لكتابة عنصر بطريقة أكثر سهولة </h2><br><p style=";text-align:right;direction:rtl">  دعنا نتخيل عرض مكون الفصل ، على سبيل المثال ، شاشة الدردشة وقائمة المحادثات ونموذج الرسالة.  مثل هذا: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">class ChatApp extends React.Component { state = { currentChat: null, }; handleSubmit = (messageData) =&gt; { makeSomeAPICall(SEND_URL, messageData) .then(() =&gt; { alert(`Message is sent to chat ${this.state.currentChat}`); }); }; render() { return ( &lt;Fragment&gt; &lt;ChatsList changeChat={currentChat =&gt; { this.setState({ currentChat }); }} /&gt; &lt;CurrentChat id={currentChat} /&gt; &lt;MessageForm onSubmit={this.handleSubmit} /&gt; &lt;/Fragment&gt; ); }; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ثم تخيل مستخدمنا باستخدام مكون الدردشة هذا: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  يفتحون الدردشة 1 </li><li style=";text-align:right;direction:rtl">  يرسلون رسالة (دعنا نتخيل بعض الشبكات البطيئة) </li><li style=";text-align:right;direction:rtl">  يفتحون الدردشة 2 </li><li style=";text-align:right;direction:rtl">  يرون تنبيهًا بشأن رسالةهم: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  "يتم إرسال الرسالة إلى الدردشة 2" </li></ul></li></ul><br><p style=";text-align:right;direction:rtl">  لكنهم أرسلوا رسالة إلى الدردشة الثانية ، كيف حدث ذلك؟  كان سبب ذلك هو أن طريقة الفصل تعمل وفقًا للقيمة الحالية ، وليس القيمة التي كانت لدينا عندما بدأنا طلب رسالة.  إنها ليست مشكلة كبيرة بمكونات بسيطة مثل هذا ، ولكنها يمكن أن تكون مصدرًا للأخطاء في الأنظمة الأكثر تعقيدًا. </p><br><p style=";text-align:right;direction:rtl">  في المقابل ، تعمل المكونات الوظيفية بطريقة أخرى: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">const ChatApp = () =&gt; { const [currentChat, setCurrentChat] = useState(null); const handleSubmit = useCallback( (messageData) =&gt; { makeSomeAPICall(SEND_URL, messageData) .then(() =&gt; { alert(`Message is sent to chat ${currentChat}`); }); }, [currentChat] ); render() { return ( &lt;Fragment&gt; &lt;ChatsList changeChat={setCurrentChat} /&gt; &lt;CurrentChat id={currentChat} /&gt; &lt;MessageForm onSubmit={handleSubmit} /&gt; &lt;/Fragment&gt; ); }; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  دعونا نتخيل مستخدمنا: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  يفتحون الدردشة 1 </li><li style=";text-align:right;direction:rtl">  يرسلون رسالة (دعنا نتخيل بعض الشبكات البطيئة) </li><li style=";text-align:right;direction:rtl">  يفتحون الدردشة 2 </li><li style=";text-align:right;direction:rtl">  يرون تنبيهًا بشأن رسالةهم: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  "يتم إرسال الرسالة إلى الدردشة 1" </li></ul></li></ul><br><p style=";text-align:right;direction:rtl">  حسنا ، ما الذي تغير؟  الآن نحن نعمل مع القيمة ، التي تم التقاطها في لحظة تقديم.  نحن بصدد إنشاء <code>handleSubmit</code> كل مرة يتم فيها تغيير <code>handleSubmit</code> .  إنها تتيح لنا نسيان التغييرات المستقبلية والتفكير <strong>الآن</strong> . </p><br><p style=";text-align:right;direction:rtl">  <em>يعرض كل مكون التقاط كل شيء يستخدمه</em> . </p><br><h2 id="hooks-make-components-lifecycle-gone" style=";text-align:right;direction:rtl">  السنانير تجعل مكونات دورة الحياة ذهبت </h2><br><p style=";text-align:right;direction:rtl">  هذا السبب يتقاطع بشدة مع السابق.  React هي مكتبة واجهة المستخدم التعريفي.  التصريح يجعل إنشاء واجهة المستخدم وطريقة العملية أكثر سهولة.  إنها تتيح لنا أن ننسى تغييرات DOM الضرورية. </p><br><p style=";text-align:right;direction:rtl">  ومع ذلك ، عندما نستخدم الطبقات ، نواجه دورة حياة المكونات.  يبدو مثل هذا: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  تصاعد </li><li style=";text-align:right;direction:rtl">  تحديث (كلما تغيرت <code>state</code> أو <code>props</code> ) </li><li style=";text-align:right;direction:rtl">  إلغاء التثبيت </li></ul><br><p style=";text-align:right;direction:rtl">  يبدو ملائمًا لكني مقتنع أنه فقط بسبب عاداتنا.  انها ليست مثل رد الفعل. </p><br><p style=";text-align:right;direction:rtl">  بدلاً من ذلك ، تتيح لنا المكونات الوظيفية كتابة رمز المكونات ونسيان دورة الحياة.  نحن نفكر فقط في <em>التزامن</em> .  نكتب وظيفة يجعل واجهة المستخدم لدينا من الدعائم المدخلات والحالة الداخلية. </p><br><p style=";text-align:right;direction:rtl">  عند <code>useEffect</code> الأول ، يبدو ربط الخطاف وكأنه بديل لـ <code>componentDidMount</code> و <code>componentDidUpdate</code> وطرق دورة الحياة الأخرى.  لكنها ليست مثل هذا.  عندما نستخدم <code>useEffect</code> قلنا لـ <code>useEffect</code> : "مهلاً ، اصنع ذلك بعد تقديم مكوّن". </p><br><p style=";text-align:right;direction:rtl">  هنا مثال جيد من <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">المقال</a> الكبير <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">حول useEffect</a> : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>الرد:</strong> أعطني واجهة المستخدم عندما تكون الحالة <code>0</code> . </li><li style=";text-align:right;direction:rtl">  <strong>المكون الخاص بك:</strong> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  إليك نتيجة العرض: <code>&lt;p&gt;You clicked 0 times&lt;/p&gt;</code> . </li><li style=";text-align:right;direction:rtl">  تذكر أيضًا تشغيل هذا التأثير بعد انتهائك: <code>() =&gt; { document.title = 'You clicked 0 times' }</code> . </li></ul></li><li style=";text-align:right;direction:rtl">  <strong>الرد:</strong> بالتأكيد.  تحديث واجهة المستخدم.  مرحبًا يا مستعرض ، أقوم بإضافة بعض العناصر إلى DOM. </li><li style=";text-align:right;direction:rtl">  <strong>المتصفح:</strong> بارد ، أنا رسمت على الشاشة. </li><li style=";text-align:right;direction:rtl">  <strong>الرد:</strong> حسنًا ، الآن سأعمل على التأثير الذي أعطيته لي. <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Running <code>() =&gt; { document.title = 'You clicked 0 times' }</code> . </li></ul></li></ul><br><p style=";text-align:right;direction:rtl">  إنها طريقة أكثر إعلانًا ، أليس كذلك؟ </p><br><h2 id="in-closing" style=";text-align:right;direction:rtl">  في الختام </h2><br><p style=";text-align:right;direction:rtl">  React Hooks تسمح لنا بالتخلص من بعض المشكلات وجعل التنمية أسهل.  نحن فقط بحاجة إلى تغيير نموذجنا العقلي.  العنصر الوظيفي في الواقع هو وظيفة واجهة المستخدم من الدعائم.  يصفون كيف يجب أن يكون كل ذلك في أي لحظة ويساعدنا على نسيان التغييرات. </p><br><p style=";text-align:right;direction:rtl">  حسنًا ، نحتاج إلى معرفة <strong>كيفية</strong> استخدامه ، ولكن مهلا ، هل كتبت مكونات الفصل بشكل صحيح في المرة الأولى؟ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar443500/">https://habr.com/ru/post/ar443500/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar443488/index.html">مكونات وظيفية مع رد فعل السنانير. لماذا هم أفضل؟</a></li>
<li><a href="../ar443490/index.html">لماذا أقصر عملي على دبيان؟</a></li>
<li><a href="../ar443492/index.html">لعبة للعشاق والخبراء على لينكس</a></li>
<li><a href="../ar443494/index.html">الدليل: كيفية إطلاق SaaS على AppSumo - النجاحات وبعض الأخطاء</a></li>
<li><a href="../ar443498/index.html">Flightradar24 - كيف يعمل؟ الجزء 2 ، بروتوكول ADS-B</a></li>
<li><a href="../ar443502/index.html">لماذا بالضبط قبل 4 سنوات أطلقت ناسا سماء كيب كانافيرال بصاروخ أطلس الخامس؟</a></li>
<li><a href="../ar443504/index.html">يبلغ عمر شبكة الويب العالمية ثلاثين عامًا - ماذا سيحدث بعد ذلك؟</a></li>
<li><a href="../ar443506/index.html">محلل بسيط ليوتيوب في جداول جوجل</a></li>
<li><a href="../ar443508/index.html">ألعاب الطاولة التعليمية للمبرمجين</a></li>
<li><a href="../ar443510/index.html">دفتر Compaq Armada 7700 - كتطوير لخط Compaq LTE</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>