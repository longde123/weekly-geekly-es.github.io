<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🏭 ♏️ 👩🏾‍🤝‍👨🏽 So erstellen Sie Ihre erste Webanwendung mit Go 👨🏿‍🤝‍👨🏾 🈚️ 🧒🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo habr Ich präsentiere Ihnen die Übersetzung des Artikels "So erstellen Sie Ihre erste Webanwendung mit Go" von Ayooluwa Isaiah. 


 Dies ist der ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So erstellen Sie Ihre erste Webanwendung mit Go</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475390/"><p>  Hallo habr  Ich präsentiere Ihnen die Übersetzung des Artikels <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"So erstellen Sie Ihre erste Webanwendung mit Go"</a> von Ayooluwa Isaiah. </p><br><p> Dies ist der Leitfaden für Ihre erste Go-Webanwendung.  Wir werden eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nachrichtenanwendung erstellen</a> , die die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nachrichten-API verwendet</a> , um Nachrichtenartikel zu einem bestimmten Thema zu empfangen und am Ende auf dem Produktionsserver bereitzustellen. </p><a name="habracut"></a><br><p>  Den vollständigen Code für dieses Tutorial finden Sie in diesem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub-Repository</a> . </p><br><h2 id="trebovaniya">  Anforderungen </h2><br><p> Die einzige Voraussetzung für diese Aufgabe ist, dass Go auf Ihrem Computer installiert ist und Sie mit der Syntax und den Konstruktionen ein wenig vertraut sind.  Die Go-Version, mit der ich die Anwendung erstellt habe, ist zum Zeitpunkt des Schreibens ebenfalls die neueste: <strong>1.12.9</strong> .  Verwenden Sie den Befehl <code>go version</code> , um die installierte Version von Go anzuzeigen. </p><br><p>  Wenn Ihnen diese Aufgabe zu schwer fällt, lesen Sie meine vorherige <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einführende Lektion</a> , die Ihnen den Einstieg erleichtern soll. </p><br><h2 id="itak-nachnem">  Also fangen wir an! </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wir klonen das Startdatei-Repository auf GitHub</a> und <code>cd</code> in das erstellte Verzeichnis.  Wir haben drei Hauptdateien: In der Datei <code>main.go</code> schreiben wir den gesamten Go-Code für diese Aufgabe.  Die Datei <code>index.html</code> ist die Vorlage, die an den Browser gesendet wird, und die <code></code> für die Anwendung befinden sich in <code>assets/styles.css</code> . </p><br><h2 id="sozdadim-bazovyy-veb-server">  Erstellen Sie einen einfachen Webserver </h2><br><p>  Beginnen wir mit der Erstellung eines Core-Servers, der den Text „Hello World!“ An den Browser sendet, wenn eine GET-Anforderung an den Server-Root ausgeführt wird.  Ändern Sie Ihre <code>main.go</code> Datei folgendermaßen: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">indexHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { w.Write([]<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>(<span class="hljs-string"><span class="hljs-string">"&lt;h1&gt;Hello World!&lt;/h1&gt;"</span></span>)) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { port := os.Getenv(<span class="hljs-string"><span class="hljs-string">"PORT"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> port == <span class="hljs-string"><span class="hljs-string">""</span></span> { port = <span class="hljs-string"><span class="hljs-string">"3000"</span></span> } mux := http.NewServeMux() mux.HandleFunc(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, indexHandler) http.ListenAndServe(<span class="hljs-string"><span class="hljs-string">":"</span></span>+port, mux) }</code> </pre> <br><p>  Die erste Zeile des <code>package main</code> - gibt an, dass der Code in der Datei <code>main.go</code> zum <code>main.go</code> .  Danach haben wir das <code>net/http</code> Paket importiert, das HTTP-Client- und Server-Implementierungen zur Verwendung in unserer Anwendung bereitstellt.  Dieses Paket ist Teil der Standardbibliothek und ist in jeder Go-Installation enthalten. </p><br><p>  In der <code>main</code> erstellt <code>http.NewServeMux()</code> einen neuen HTTP-Anforderungsmultiplexer und weist ihn der Variablen <code>mux</code> .  Im Wesentlichen ordnet der Anforderungsmultiplexer die URL der eingehenden Anforderungen der Liste der registrierten Pfade zu und ruft den entsprechenden Handler für den Pfad auf, wenn eine Übereinstimmung gefunden wird. </p><br><p>  Als nächstes registrieren wir unsere erste Handler-Funktion für den Root-Pfad <code>/</code> .  Diese <code>HandleFunc</code> ist das zweite Argument für <code>HandleFunc</code> und hat immer die Signaturfunktion <code>func (w http.ResponseWriter, r * http.Request)</code> . </p><br><p>  Wenn Sie sich die <code>indexHandler</code> Funktion <code>indexHandler</code> , werden Sie <code>indexHandler</code> , dass sie eine solche Signatur hat, was sie zu einem gültigen zweiten Argument für <code>HandleFunc</code> .  Der Parameter <code>w</code> ist die Struktur, mit der wir Antworten auf die HTTP-Anforderung senden.  Es implementiert die <code>Write()</code> -Methode, die einen Byte-Slice benötigt und die kombinierten Daten als Teil der HTTP-Antwort schreibt. </p><br><p>  Andererseits repräsentiert der Parameter <code>r</code> die vom Client empfangene HTTP-Anfrage.  So greifen wir auf die vom Webbrowser auf dem Server gesendeten Daten zu.  Wir benutzen es hier noch nicht, aber wir werden es definitiv später benutzen. </p><br><p>  Schließlich haben wir die <code>http.ListenAndServe()</code> -Methode, mit der der Server an Port 3000 <code>http.ListenAndServe()</code> wird, wenn der Port nicht von der Umgebung festgelegt wurde.  Sie können auch einen anderen Anschluss verwenden, wenn 3000 auf Ihrem Computer verwendet wird. </p><br><p>  Kompilieren Sie dann den Code, den Sie gerade geschrieben haben, und führen Sie ihn aus: </p><br><pre> <code class="bash hljs">go run main.go</code> </pre> <br><p>  Wenn Sie in Ihrem Browser zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http: // localhost: 3000</a> wechseln, sollte der Text „Hello World!“ Angezeigt werden. </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/989/645/927/9896459277d1e7aa363ee0f9c444bc92.png" alt="Tapferer Browser mit Hello World-Text"></a> </p><br><h2 id="shablony-v-go">  Gehe zu Vorlagen </h2><br><p>  Schauen wir uns die Grundlagen des Templatings in Go an.  Wenn Sie mit Vorlagen in anderen Sprachen vertraut sind, sollte dies leicht verständlich sein. </p><br><p>  Vorlagen bieten eine einfache Möglichkeit, die Ausgabe Ihrer Webanwendung abhängig von der Route anzupassen, ohne den gleichen Code an verschiedenen Stellen schreiben zu müssen.  Beispielsweise können wir eine Vorlage für die Navigationsleiste erstellen und auf allen Seiten der Site verwenden, ohne den Code zu duplizieren.  Darüber hinaus haben wir die Möglichkeit, unseren Webseiten einige grundlegende Logik hinzuzufügen. </p><br><p>  Go stellt in seiner Standardbibliothek zwei Vorlagenbibliotheken zur Verfügung: <code>text/template</code> und <code>html/template</code> .  Beide bieten die gleiche Oberfläche, jedoch wird das <code>html/template</code> Paket verwendet, um HTML-Ausgaben zu generieren, die gegen Code-Injection geschützt sind. Deshalb werden wir es hier verwenden. </p><br><p>  Importieren Sie dieses Paket in Ihre <code>main.go</code> Datei und verwenden Sie es wie folgt: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"html/template"</span></span> <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tpl = template.Must(template.ParseFiles(<span class="hljs-string"><span class="hljs-string">"index.html"</span></span>)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">indexHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { tpl.Execute(w, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { port := os.Getenv(<span class="hljs-string"><span class="hljs-string">"PORT"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> port == <span class="hljs-string"><span class="hljs-string">""</span></span> { port = <span class="hljs-string"><span class="hljs-string">"3000"</span></span> } mux := http.NewServeMux() mux.HandleFunc(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, indexHandler) http.ListenAndServe(<span class="hljs-string"><span class="hljs-string">":"</span></span>+port, mux) }</code> </pre> <br><p>  <code>tpl</code> ist eine Variable auf <code>tpl</code> , die die Definition einer Vorlage aus den bereitgestellten Dateien angibt.  Der Aufruf <code>template.ParseFiles</code> analysiert die Datei <code>index.html</code> im Stammverzeichnis unseres Projektverzeichnisses und überprüft ihre Gültigkeit. </p><br><p>  Wir verpacken den Aufruf <code>template.ParseFiles</code> in <code>template.Must</code> , dass der Code beim Auftreten eines Fehlers in Panik gerät.  Der Grund, warum wir hier in Panik geraten, anstatt zu versuchen, den Fehler zu behandeln, ist, dass es keinen Sinn macht, den Code weiter auszuführen, wenn wir eine ungültige Vorlage haben.  Dies ist ein Problem, das behoben werden muss, bevor der Server neu gestartet werden kann. </p><br><p>  In der <code>indexHandler</code> Funktion führen wir die zuvor erstellte Vorlage aus, indem wir zwei Argumente <code>indexHandler</code> : Wo sollen die Ausgabe und die Daten geschrieben werden, die an die Vorlage übergeben werden sollen <code>indexHandler</code> </p><br><p>  Im obigen Fall schreiben wir die Ausgabe in die <code>ResponseWriter</code> Schnittstelle und da wir derzeit keine Daten zur Übergabe an unsere Vorlage haben, wird <code>nil</code> als zweites Argument übergeben. </p><br><p>  <code>go run main.go</code> Sie den laufenden Prozess in Ihrem Terminal mit Strg-C und starten Sie ihn erneut mit <code>go run main.go</code> Aktualisieren Sie dann Ihren Browser.  Auf der folgenden Seite sollte der Text "News App Demo" angezeigt werden: </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/8f8/3d2/10b/8f83d210b810eeacb35c3684adcaa827.png" alt="Brave Browser Zeigt News App Demo Text"></a> </p><br><h2 id="dobavlyaem-panel-navigacii-na-stranicu">  Fügen Sie der Seite eine Navigationsleiste hinzu </h2><br><p>  Ersetzen Sie den Inhalt des <code>&lt;body&gt;</code> in Ihrer index.html -Datei wie folgt: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/"</span></span></span><span class="hljs-tag">&gt;</span></span>News Demo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GET"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-input"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Enter a news topic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"q"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/freshman-tech/news"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button github-button"</span></span></span><span class="hljs-tag">&gt;</span></span>View on Github<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Starten Sie dann den Server neu und aktualisieren Sie Ihren Browser.  Sie sollten etwas Ähnliches sehen: </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/abf/65e/ea8/abf65eea8166c5839ec6e01e19d31eb4.png" alt="Browser mit nicht gestylter Navigationsleiste"></a> </p><br><h2 id="rabota-so-staticheskimi-faylami">  Arbeiten Sie mit statischen Dateien </h2><br><p>  Bitte beachten Sie, dass die oben hinzugefügte Navigationsleiste keine Stile enthält, obwohl wir sie bereits im <code>&lt;head&gt;</code> unseres Dokuments angegeben haben. </p><br><p>  Dies liegt daran, dass der Pfad <code>/</code> tatsächlich mit allen Pfaden übereinstimmt, die an keiner anderen Stelle verarbeitet werden.  Wenn Sie zu <a href="">http: // localhost: 3000 / assets / style.css gehen</a> , erhalten Sie weiterhin die News Demo-Startseite anstelle der CSS-Datei, da die Route <code>/assets/style.css</code> nicht speziell deklariert wurde. </p><br><p>  Die Notwendigkeit, explizite Handler für alle unsere statischen Dateien zu deklarieren, ist jedoch unrealistisch und kann nicht skaliert werden.  Glücklicherweise können wir einen Handler für alle statischen Ressourcen erstellen. </p><br><p>  Als Erstes müssen Sie eine Instanz des Dateiserverobjekts erstellen und das Verzeichnis übergeben, in dem sich alle statischen Dateien befinden: </p><br><pre> <code class="go hljs">fs := http.FileServer(http.Dir(<span class="hljs-string"><span class="hljs-string">"assets"</span></span>))</code> </pre> <br><p>  Als Nächstes müssen wir unseren Router anweisen, dieses Dateiserverobjekt für alle Pfade zu verwenden, die mit dem Präfix <code>/assets/</code> : </p><br><pre> <code class="go hljs">mux.Handle(<span class="hljs-string"><span class="hljs-string">"/assets/"</span></span>, http.StripPrefix(<span class="hljs-string"><span class="hljs-string">"/assets/"</span></span>, fs))</code> </pre> <br><p>  Nun alles zusammen: </p><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// main.go //   func main() { port := os.Getenv("PORT") if port == "" { port = "3000" } mux := http.NewServeMux() //     fs := http.FileServer(http.Dir("assets")) mux.Handle("/assets/", http.StripPrefix("/assets/", fs)) mux.HandleFunc("/", indexHandler) http.ListenAndServe(":"+port, mux) }</span></span></code> </pre> <br><p>  Starten Sie den Server neu und aktualisieren Sie den Browser.  Die Stile sollten sich wie folgt einschalten lassen: </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/933/902/77d/93390277dcb620c2f3a3e0421a4f5e6d.png" alt="Tapferer Browser mit gestalteter Navigationsleiste"></a> </p><br><h2 id="sozdaem-rout-search">  Wir erstellen eine Route / Suche </h2><br><p>  Erstellen wir eine Route, die Suchanfragen nach Nachrichtenartikeln verarbeitet.  Wir werden die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nachrichten-API verwenden</a> , um Anfragen zu bearbeiten. Sie müssen sich daher registrieren, um hier einen kostenlosen API-Schlüssel zu erhalten. </p><br><p>  Diese Route erwartet zwei Abfrageparameter: <code>q</code> stellt die Abfrage des Benutzers dar, und die <code>page</code> zum Blättern durch die Ergebnisse verwendet.  Dieser Seitenparameter ist optional.  Wenn es nicht in der URL enthalten ist, nehmen wir einfach an, dass die Seitenzahl der Ergebnisse auf "1" gesetzt ist. </p><br><p>  Fügen <code>indexHandler</code> Ihrer <code>main.go</code> Datei den folgenden Handler unter <code>indexHandler</code> <code>main.go</code> : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { u, err := url.Parse(r.URL.String()) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { w.WriteHeader(http.StatusInternalServerError) w.Write([]<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>(<span class="hljs-string"><span class="hljs-string">"Internal server error"</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } params := u.Query() searchKey := params.Get(<span class="hljs-string"><span class="hljs-string">"q"</span></span>) page := params.Get(<span class="hljs-string"><span class="hljs-string">"page"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> page == <span class="hljs-string"><span class="hljs-string">""</span></span> { page = <span class="hljs-string"><span class="hljs-string">"1"</span></span> } fmt.Println(<span class="hljs-string"><span class="hljs-string">"Search Query is: "</span></span>, searchKey) fmt.Println(<span class="hljs-string"><span class="hljs-string">"Results page is: "</span></span>, page) }</code> </pre> <br><p>  Der obige Code extrahiert die Parameter <code>q</code> und <code>page</code> aus der Anforderungs-URL und zeigt beide im Terminal an. </p><br><p>  Registrieren Sie dann die <code>searchHandler</code> Funktion wie folgt als <code>/search</code> Pfad-Handler: </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { port := os.Getenv(<span class="hljs-string"><span class="hljs-string">"PORT"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> port == <span class="hljs-string"><span class="hljs-string">""</span></span> { port = <span class="hljs-string"><span class="hljs-string">"3000"</span></span> } mux := http.NewServeMux() fs := http.FileServer(http.Dir(<span class="hljs-string"><span class="hljs-string">"assets"</span></span>)) mux.Handle(<span class="hljs-string"><span class="hljs-string">"/assets/"</span></span>, http.StripPrefix(<span class="hljs-string"><span class="hljs-string">"/assets/"</span></span>, fs)) <span class="hljs-comment"><span class="hljs-comment">// Add the next line mux.HandleFunc("/search", searchHandler) mux.HandleFunc("/", indexHandler) http.ListenAndServe(":"+port, mux) }</span></span></code> </pre> <br><p>  Denken Sie daran, die Pakete <code>fmt</code> und <code>net/url</code> von oben zu importieren: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"html/template"</span></span> <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> <span class="hljs-string"><span class="hljs-string">"net/url"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> )</code> </pre> <br><p>  Starten Sie nun den Server neu, geben Sie die Abfrage in das Suchfeld ein und überprüfen Sie das Terminal.  Sie sollten Ihre Anfrage im Terminal sehen, wie unten gezeigt: </p><br><br><br><h2 id="sozdayom-model-dannyh">  Erstellen Sie ein Datenmodell </h2><br><p>  Wenn wir eine Anfrage an das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>News API/everything</code></a> Endpoint stellen, erwarten wir eine json-Antwort im folgenden Format: </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"ok"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"totalResults"</span></span>: <span class="hljs-number"><span class="hljs-number">4661</span></span>, <span class="hljs-attr"><span class="hljs-attr">"articles"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"source"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Gizmodo.com"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Jennings Brown"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"World's Dumbest Bitcoin Scammer Tries to Scam Bitcoin Educator, Gets Scammed in The Process"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"Ben Perrin is a Canadian cryptocurrency enthusiast and educator who hosts a bitcoin show on YouTube. This is immediately apparent after a quick a look at all his social media. Ten seconds of viewing on of his videos will show that he is knowledgeable about di…"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://gizmodo.com/worlds-dumbest-bitcoin-scammer-tries-to-scam-bitcoin-ed-1837032058"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"urlToImage"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://i.kinja-img.com/gawker-media/image/upload/s--uLIW_Oxp--/c_fill,fl_progressive,g_center,h_900,q_80,w_1600/s4us4gembzxlsjrkmnbi.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"publishedAt"</span></span>: <span class="hljs-string"><span class="hljs-string">"2019-08-07T16:30:00Z"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"content"</span></span>: <span class="hljs-string"><span class="hljs-string">"Ben Perrin is a Canadian cryptocurrency enthusiast and educator who hosts a bitcoin show on YouTube. This is immediately apparent after a quick a look at all his social media. Ten seconds of viewing on of his videos will show that he is knowledgeable about..."</span></span> } ] }</code> </pre> <br><p>  Um mit diesen Daten in Go arbeiten zu können, müssen wir eine Struktur generieren, die die Daten beim Dekodieren des Antwortkörpers widerspiegelt.  Natürlich können Sie es manuell tun, aber ich bevorzuge die Verwendung der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JSON-to-Go-</a> Website, was diesen Vorgang wirklich einfach macht.  Es wird eine Go-Struktur (mit Tags) generiert, die für diesen JSON funktioniert. </p><br><p>  Alles, was Sie tun müssen, ist, das JSON-Objekt zu kopieren und in das mit <strong>JSON</strong> gekennzeichnete Feld <strong>einzufügen</strong> , dann die Ausgabe zu kopieren und in Ihren Code einzufügen.  Folgendes erhalten wir für das obige JSON-Objekt: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> AutoGenerated <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Status <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"status"`</span></span> TotalResults <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-string"><span class="hljs-string">`json:"totalResults"`</span></span> Articles []<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Source <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { ID <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>{} <span class="hljs-string"><span class="hljs-string">`json:"id"`</span></span> Name <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"name"`</span></span> } <span class="hljs-string"><span class="hljs-string">`json:"source"`</span></span> Author <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"author"`</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"title"`</span></span> Description <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"description"`</span></span> URL <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"url"`</span></span> URLToImage <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"urlToImage"`</span></span> PublishedAt time.Time <span class="hljs-string"><span class="hljs-string">`json:"publishedAt"`</span></span> Content <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"content"`</span></span> } <span class="hljs-string"><span class="hljs-string">`json:"articles"`</span></span> }</code> </pre> <br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/ac8/9d9/44f/ac89d944f90e03d2313a02d38364ba0d.png" alt="Tapferer Browser mit JSON to Go-Tool"></a> </p><br><p>  Ich habe einige Änderungen an der <code>AutoGenerated</code> Struktur vorgenommen, indem ich das <code>Articles</code> Fragment in eine eigene Struktur aufgeteilt und den Strukturnamen aktualisiert habe.  <code>tpl</code> die folgende <code>tpl</code> Variablendeklaration in <code>main.go</code> und fügen Sie das <code>main.go</code> Ihrem Import hinzu: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Source <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { ID <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>{} <span class="hljs-string"><span class="hljs-string">`json:"id"`</span></span> Name <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"name"`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Article <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Source Source <span class="hljs-string"><span class="hljs-string">`json:"source"`</span></span> Author <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"author"`</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"title"`</span></span> Description <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"description"`</span></span> URL <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"url"`</span></span> URLToImage <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"urlToImage"`</span></span> PublishedAt time.Time <span class="hljs-string"><span class="hljs-string">`json:"publishedAt"`</span></span> Content <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"content"`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Results <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Status <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"status"`</span></span> TotalResults <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-string"><span class="hljs-string">`json:"totalResults"`</span></span> Articles []Article <span class="hljs-string"><span class="hljs-string">`json:"articles"`</span></span> }</code> </pre> <br><p>  Wie Sie vielleicht wissen, erfordert Go, dass alle exportierten Felder in der Struktur mit einem Großbuchstaben beginnen.  Es ist jedoch üblich, JSON-Felder mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">camelCase</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">snake_case darzustellen</a> , die nicht mit einem Großbuchstaben beginnen. </p><br><p>  Aus diesem Grund verwenden wir Strukturfeld-Tags wie <code>json:"id"</code> , um das Strukturfeld wie oben gezeigt explizit im JSON-Feld anzuzeigen.  Bei Bedarf können Sie auch ganz andere Namen für das Strukturfeld und das entsprechende json-Feld verwenden. </p><br><p>  Zuletzt erstellen wir für jede Suchabfrage einen anderen Strukturtyp.  Fügen Sie dies unter der <code>Results</code> in <code>main.go</code> : </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Search <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { SearchKey <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> NextPage <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TotalPages <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Results Results }</code> </pre> <br><p>  Diese Struktur repräsentiert jede vom Benutzer vorgenommene Suchanfrage.  <code>SearchKey</code> ist die Abfrage selbst. <code>NextPage</code> Feld <code>NextPage</code> können <code>NextPage</code> durch die Ergebnisse <code>TotalPages</code> - die Gesamtzahl der Seiten mit Abfrageergebnissen und <code>Results</code> - die aktuelle Seite mit Abfrageergebnissen. </p><br><h2 id="otpravlyaem-zapros-po-news-api-i-renderim-rezultaty">  Senden Sie eine Anfrage über die News-API und rendern Sie die Ergebnisse </h2><br><p>  Nachdem wir das Datenmodell für unsere Anwendung haben, fahren wir fort und stellen Anforderungen an die News-API. Anschließend werden die Ergebnisse auf der Seite gerendert. </p><br><p>  Da für die News-API ein API-Schlüssel erforderlich ist, müssen wir eine Möglichkeit finden, ihn in unserer Anwendung zu übergeben, ohne den Code hart zu codieren.  Umgebungsvariablen sind ein gängiger Ansatz, aber ich habe mich stattdessen für die Verwendung von Befehlszeilenflags entschieden.  Go bietet ein <code>flag</code> Paket, das die grundlegende Analyse von Befehlszeilen-Flags unterstützt. Dies wird hier verwendet. </p><br><p>  <code>apiKey</code> zuerst eine neue <code>apiKey</code> Variable unter der <code>tpl</code> Variablen: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> apiKey *<span class="hljs-keyword"><span class="hljs-keyword">string</span></span></code> </pre> <br><p>  Dann benutze es in der Hauptfunktion wie folgt: </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { apiKey = flag.String(<span class="hljs-string"><span class="hljs-string">"apikey"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"Newsapi.org access key"</span></span>) flag.Parse() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> *apiKey == <span class="hljs-string"><span class="hljs-string">""</span></span> { log.Fatal(<span class="hljs-string"><span class="hljs-string">"apiKey must be set"</span></span>) } <span class="hljs-comment"><span class="hljs-comment">//    }</span></span></code> </pre> <br><p>  Hier rufen wir die <code>flag.String()</code> -Methode auf, mit der wir ein String-Flag definieren können.  Das erste Argument für diese Methode ist der Flagname, das zweite ist der Standardwert und das dritte ist die Verwendungsbeschreibung. </p><br><p>  Nachdem Sie alle Flags definiert haben, müssen Sie <code>flag.Parse()</code> aufrufen, um sie tatsächlich zu <code>flag.Parse()</code> .  Da <code>apikey</code> eine erforderliche Komponente für diese Anwendung ist, stellen wir schließlich sicher, dass das Programm abstürzt, wenn dieses Flag während der Programmausführung nicht gesetzt wird. </p><br><p>  <code>apikey</code> Sie sicher, dass Sie das <code>flag</code> Paket zu Ihrem Import <code>apikey</code> , starten Sie den Server neu und übergeben Sie das erforderliche <code>apikey</code> Flag (siehe unten): </p><br><pre> <code class="bash hljs">go run main.go -apikey=&lt;your newsapi access key&gt;</code> </pre> <br><p>  Als Nächstes setzen wir den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">searchHandler</a> fort und aktualisieren ihn, sodass die Suchanfrage des Benutzers an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">newsapi.org</a> gesendet und die Ergebnisse in unserer Vorlage angezeigt werden. </p><br><p>  Ersetzen Sie die beiden Aufrufe der Methode <code>fmt.Println()</code> am Ende der Funktion <code>fmt.Println()</code> <code>searchHandler</code> folgenden Code: </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// beginning of the function search := &amp;Search{} search.SearchKey = searchKey next, err := strconv.Atoi(page) if err != nil { http.Error(w, "Unexpected server error", http.StatusInternalServerError) return } search.NextPage = next pageSize := 20 endpoint := fmt.Sprintf("https://newsapi.org/v2/everything?q=%s&amp;pageSize=%d&amp;page=%d&amp;apiKey=%s&amp;sortBy=publishedAt&amp;language=en", url.QueryEscape(search.SearchKey), pageSize, search.NextPage, *apiKey) resp, err := http.Get(endpoint) if err != nil { w.WriteHeader(http.StatusInternalServerError) return } defer resp.Body.Close() if resp.StatusCode != 200 { w.WriteHeader(http.StatusInternalServerError) return } err = json.NewDecoder(resp.Body).Decode(&amp;search.Results) if err != nil { w.WriteHeader(http.StatusInternalServerError) return } search.TotalPages = int(math.Ceil(float64(search.Results.TotalResults / pageSize))) err = tpl.Execute(w, search) if err != nil { w.WriteHeader(http.StatusInternalServerError) } }</span></span></code> </pre> <br><p>  Zunächst erstellen wir eine neue Instanz der <code>SearchKey</code> und setzen den Wert des <code>SearchKey</code> Felds auf den Wert des URL-Parameters <code>q</code> in der HTTP-Anforderung. </p><br><p>  Danach konvertieren wir die <code>NextPage</code> in eine Ganzzahl und weisen das Ergebnis dem <code>NextPage</code> Feld <code>NextPage</code> .  Dann erstellen wir die Variable <code>pageSize</code> und setzen ihren Wert auf 20. Diese Variable <code>pageSize</code> repräsentiert die Anzahl der Ergebnisse, die die Nachrichten-API in ihrer Antwort <code>pageSize</code> .  Dieser Wert kann zwischen 0 und 100 liegen. </p><br><p>  Dann erstellen wir den Endpunkt mit <code>fmt.Sprintf()</code> und stellen eine GET-Anfrage an ihn.  Wenn die Antwort von der News-API nicht <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://freshman.tech/">200 OK ist</a> , wird ein allgemeiner Serverfehler an den Client zurückgegeben.  Andernfalls wird der Antworttext in <code>search.Results</code> analysiert. </p><br><p>  Dann berechnen wir die Gesamtzahl der Seiten, indem <code>TotalResults</code> Feld " <code>pageSize</code> durch " <code>pageSize</code> .  Wenn eine Abfrage beispielsweise 100 Ergebnisse zurückgibt und jeweils nur 20 angezeigt werden, müssen Sie einen Bildlauf durch fünf Seiten durchführen, um alle 100 Ergebnisse für diese Abfrage anzuzeigen. </p><br><p>  Danach rendern wir unsere Vorlage und übergeben die Suchvariable als Datenschnittstelle.  Auf diese Weise können wir auf Daten eines JSON-Objekts in unserer Vorlage zugreifen, wie Sie sehen werden. </p><br><p>  <code>index.html</code> vor dem Wechsel zu <code>index.html</code> sicher, dass Sie Ihre Importe wie <code>index.html</code> aktualisieren: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"encoding/json"</span></span> <span class="hljs-string"><span class="hljs-string">"flag"</span></span> <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"html/template"</span></span> <span class="hljs-string"><span class="hljs-string">"log"</span></span> <span class="hljs-string"><span class="hljs-string">"math"</span></span> <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> <span class="hljs-string"><span class="hljs-string">"net/url"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> <span class="hljs-string"><span class="hljs-string">"strconv"</span></span> <span class="hljs-string"><span class="hljs-string">"time"</span></span> )</code> </pre> <br><p>  Fahren wir fort und zeigen die Ergebnisse auf der Seite an, indem Sie die Datei <code>index.html</code> wie folgt ändern.  Fügen Sie dies unter dem <code>&lt;header&gt;</code> : </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-results"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ range .Results.Articles }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"news-article"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">target</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_blank"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"noreferrer noopener"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{.URL}}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"title"</span></span></span><span class="hljs-tag">&gt;</span></span>{{.Title }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"description"</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .Description }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"metadata"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"source"</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .Source.Name }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">time</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"published-date"</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .PublishedAt }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">time</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"article-image"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ .URLToImage }}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Um auf das Strukturfeld in der Vorlage zuzugreifen, verwenden wir den Punktoperator.  Dieser Operator verweist auf ein Strukturobjekt (in diesem Fall " <code>search</code> ). In der Vorlage geben wir dann einfach den Feldnamen an (als <code>{{.Results}}</code> ). </p><br><p>  Mit dem <code>range</code> Block können wir in Go über ein Slice iterieren und HTML-Code für jedes Element im Slice ausgeben.  Hier iterieren wir über das Segment der <code>Article</code> im Feld <code>Articles</code> und zeigen den HTML-Code bei jeder Iteration an. </p><br><p>  Starten Sie den Server neu, aktualisieren Sie den Browser und suchen Sie nach Nachrichten zu einem beliebten Thema.  Sie sollten eine Liste mit 20 Ergebnissen pro Seite erhalten, wie im folgenden Screenshot gezeigt. </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/e5b/129/9ff/e5b1299ffc3a2c0ba892cdf3a2097e73.png" alt="Browser mit nachrichtenlisten"></a> </p><br><h2 id="sohranyaem-poiskovyy-zapros-v-inputehttpsfreshmantechweb-development-with-gopersist-the-search-query-in-the-input">  Suchabfrage im Ausland speichern </h2><br><p>  Beachten Sie, dass die Suchabfrage aus der Eingabe verschwindet, wenn die Seite mit den Ergebnissen aktualisiert wird.  Im Idealfall sollte die Abfrage so lange aufbewahrt werden, bis der Benutzer eine neue Suche durchführt.  So funktioniert beispielsweise die Google-Suche. </p><br><p>  Wir können dies leicht beheben, indem wir das <code>value</code> Attribut des <code>input</code> Tags in unserer <code>index.html</code> Datei wie folgt aktualisieren: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search-input"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ .SearchKey }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Enter a news topic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"search"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"q"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Starten Sie Ihren Browser neu und führen Sie eine neue Suche durch.  Die Suchanfrage wird wie folgt gespeichert: </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/88c/c3b/44e/88cc3b44e1bdd882aa9dfde1666c32b3.png"></a> </p><br><h2 id="formatiruem-datu-publikaciihttpsfreshmantechweb-development-with-goformat-the-published-date">  Veröffentlichungsdatum formatieren </h2><br><p>  Wenn Sie sich das Datum in jedem Artikel ansehen, werden Sie feststellen, dass es schlecht lesbar ist.  Die aktuelle Ausgabe zeigt, wie die Nachrichten-API das Veröffentlichungsdatum des Artikels zurückgibt.  Sie können dies jedoch problemlos ändern, indem Sie der <code>Article</code> eine Methode hinzufügen und das Datum damit formatieren, anstatt den Standardwert zu verwenden. </p><br><p>  <code>main.go</code> wir den folgenden Code direkt unter der <code>Article</code> in <code>main.go</code> : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a *Article)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormatPublishedDate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { year, month, day := a.PublishedAt.Date() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"%v %d, %d"</span></span>, month, day, year) }</code> </pre> <br><p>  Hier wird eine neue <code>FormatPublishedDate</code> Methode in der <code>Article</code> Struktur erstellt. Diese Methode formatiert das <code>PublishedAt</code> Feld in <code>Article</code> und gibt eine Zeichenfolge im folgenden Format zurück: <code>10  2009</code> . </p><br><p>  Ersetzen Sie <code>.PublishedAt</code> durch <code>.FormatPublishedDate</code> in Ihrer <code>index.html</code> Datei, um diese neue Methode in Ihrer Vorlage zu verwenden.  Starten Sie dann den Server neu und wiederholen Sie die vorherige Suchabfrage.  Dies wird die Ergebnisse mit einer korrekt formatierten Zeit ausgeben, wie unten gezeigt: </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/444/c8a/92f/444c8a92fbd3ee21d89646c2d5868250.png" alt="Tapferer Browser mit korrekt formatiertem Datum"></a> </p><br><h2 id="vyvodim-obschee-kolichestvo-rezultatovhttpsfreshmantechweb-development-with-goshow-the-total-number-of-results">  Zeigt die Gesamtzahl der Ergebnisse an. </h2><br><p>  Lassen Sie uns die Benutzeroberfläche unserer Nachrichtenanwendung verbessern, indem wir oben auf der Seite die Gesamtzahl der Ergebnisse angeben und dann eine Meldung anzeigen, falls für eine bestimmte Abfrage keine Ergebnisse gefunden wurden. </p><br><p>  Alles, was Sie tun müssen, ist, den folgenden Code als <code>.search-results</code> Element des <code>.container</code> direkt über dem <code>.search-results</code> Element in Ihrer <code>index.html</code> Datei <code>.search-results</code> : </p><br><pre> <code class="go hljs">&lt;div class=<span class="hljs-string"><span class="hljs-string">"result-count"</span></span>&gt; {{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gt .Results.TotalResults <span class="hljs-number"><span class="hljs-number">0</span></span>)}} &lt;p&gt;About &lt;strong&gt;{{ .Results.TotalResults }}&lt;/strong&gt; results were found.&lt;/p&gt; {{ <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ne .SearchKey <span class="hljs-string"><span class="hljs-string">""</span></span>) and (eq .Results.TotalResults <span class="hljs-number"><span class="hljs-number">0</span></span>) }} &lt;p&gt;No results found <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> your query: &lt;strong&gt;{{ .SearchKey }}&lt;/strong&gt;.&lt;/p&gt; {{ end }} &lt;/div&gt;</code> </pre> <br><p>  Go    ,     .    <code>gt</code> ,  ,   <code>TotalResults</code>  <code>Results</code>  .   ,         . </p><br><p>   ,  <code>SearchKey</code>     ( <code>(ne .SearchKey "")</code> )  <code>TotalResults</code>   ( <code>(eq .Results.TotalResults 0)</code> ),    «No results found». </p><br><p>         ,        .      «No results found». </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/305/bfc/407/305bfc40758d20abe8e01c1981930d41.png" alt="Browser zeigt keine Ergebnisse gefunden Nachricht"></a> </p><br><p>             .      ,   : </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/bbb/30a/c8c/bbb30ac8c3adc70ff1195ed3382ce928.png" alt="Der Browser, der die Ergebnisse anzeigt, wird oben auf der Seite angezeigt"></a> </p><br><h2 id="paginaciyahttpsfreshmantechweb-development-with-gopagination">  </h2><br><p>      20  ,   ,             . </p><br><p>    <strong>Next</strong>  ,       .  ,      ,        <code>Search</code>  <code>main.go</code> : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s *Search)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsLastPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.NextPage &gt;= s.TotalPages }</code> </pre> <br><p>   ,    <code>NextPage</code> ,   <code>TotalPages</code>   <code>Search</code> .   ,    <code>NextPage</code>  ,     .  So geht's: </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">//   search.TotalPages = int(math.Ceil(float64(search.Results.TotalResults / pageSize))) //   if  if ok := !search.IsLastPage(); ok { search.NextPage++ } //    }</span></span></code> </pre> <br><p> ,   ,        .       <code>.search-results</code>    <code>index.html</code> . </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pagination"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ if (ne .IsLastPage true) }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/search?q={{ .SearchKey }}&amp;page={{ .NextPage }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button next-page"</span></span></span><span class="hljs-tag">&gt;</span></span>Next<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>         ,  <strong>Next</strong>       . </p><br><p>  , <code>href</code>     <code>/search</code>        <code>q</code> ,   <code>NextPage</code>   <code>page</code> . </p><br><p>    <strong>Previous</strong> .        ,     1.   ,      <code>CurrentPage()</code>  <code>Search</code> ,   .     <code>IsLastPage</code> : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s *Search)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CurrentPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> s.NextPage == <span class="hljs-number"><span class="hljs-number">1</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.NextPage } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.NextPage - <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre> <br><p>    <code>NextPage - 1</code> ,   ,  <code>NextPage</code>  1.    ,   1   .     : </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s *Search)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PreviousPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s.CurrentPage() - <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre> <br><p>  ,         <strong>Previous</strong> ,      1.   <code>.pagination</code>    <code>index.html</code>  : </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pagination"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ if (gt .NextPage 2) }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/search?q={{ .SearchKey }}&amp;page={{ .PreviousPage }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button previous-page"</span></span></span><span class="hljs-tag">&gt;</span></span>Previous<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} {{ if (ne .IsLastPage true) }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/search?q={{ .SearchKey }}&amp;page={{ .NextPage }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button next-page"</span></span></span><span class="hljs-tag">&gt;</span></span>Next<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>        .      ,   : </p><br><br><br><h2 id="pokazyvaem-tekuschuyu-stranicuhttpsfreshmantechweb-development-with-goshow-the-current-page">    </h2><br><p>  ,      ,   ,            ,       . </p><br><p>          <code>index.html</code>  : </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"result-count"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ if (gt .Results.TotalResults 0)}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>About <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .Results.TotalResults }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span> results were found. You are on page <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .CurrentPage }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span> of <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span> {{ .TotalPages }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> {{ else if (ne .SearchKey "") and (eq .Results.TotalResults 0) }} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>No results found for your query: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{{ .SearchKey }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> {{ end }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  ,        ,                 . </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/071/3cd/5a8/0713cd5a870236b1e64309fd24575847.png" alt="Browser, der die aktuelle Seite anzeigt"></a> </p><br><h2 id="deploim-na-herokuhttpsfreshmantechweb-development-with-godeploy-to-heroku">   Heroku </h2><br><p> ,    ,       Heroku. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   </a> ,     ,    .     .    <strong>freshman-news</strong> . </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a> ,      Heroku   .    <code>heroku login</code>  ,       Heroku. </p><br><p> ,    git-   .  ,   <code>git init</code>     ,     ,   heroku    git-.  <code>freshman-news</code>   . </p><br><pre> <code class="bash hljs">heroku git:remote -a freshman-news</code> </pre> <br><p>   Procfile      ( <code>touch Procfile</code> )    : </p><br><pre> <code class="bash hljs">web: bin/news-demo -apikey <span class="hljs-variable"><span class="hljs-variable">$NEWS_API_KEY</span></span></code> </pre> <br><p>     GitHub      Go,   ,    <code>go.mod</code> ,   .   ,     ,   . </p><br><pre> <code class="go hljs">module github.com/freshman-tech/news-demo <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> <span class="hljs-number"><span class="hljs-number">1.12</span></span><span class="hljs-number"><span class="hljs-number">.9</span></span></code> </pre> <br><p>       <strong>Settings</strong>    Heroku   <strong>Reveal Config Vars</strong> .      <strong>NEWS_API_KEY</strong> ,           . </p><br><p> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/7e6/ddc/3df/7e6ddc3df666b96b83c892346746f0c3.png" alt="Heroku Konfigurationsvariablen"></a> </p><br><p> ,         Heroku    : </p><br><pre> <code class="bash hljs">git add . git commit -m <span class="hljs-string"><span class="hljs-string">"Initial commit"</span></span> git push heroku master</code> </pre> <br><p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://__.herokuapp.com</a> ,      . </p><br><h2 id="zaklyucheniehttpsfreshmantechweb-development-with-gowrap-up">  Fazit </h2><br><p>        News     Go  -.   ,      Heroku. </p><br><p>  ,       .     -    ,   ,    . </p><br><p>  Danke fürs Lesen! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de475390/">https://habr.com/ru/post/de475390/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de475378/index.html">"Wir können die Rechte für personenbezogene Daten nicht großen Unternehmen überlassen" - ehemaliger Chefredakteur von Wired UK über die Zukunft der Technologie</a></li>
<li><a href="../de475382/index.html">Wie haben wir WebAssembly in Yandex.Maps implementiert und warum haben wir JavaScript verlassen?</a></li>
<li><a href="../de475384/index.html">Was ist neu in Spring Boot 2.2?</a></li>
<li><a href="../de475386/index.html">Achtung, FAS: Wie verstößt man nicht gegen das Werbegesetz? Werbetreibenden-Memo</a></li>
<li><a href="../de475388/index.html">Sicherheitswoche 46: Mikrofone, Laser und Sicherheit geschulter Maschinen</a></li>
<li><a href="../de475392/index.html">Warum sollte man python -m pip verwenden?</a></li>
<li><a href="../de475396/index.html">Was ist mit der Deaktivierung "unnötiger" Prüfungen in CAD von Leiterplatten behaftet</a></li>
<li><a href="../de475398/index.html">Digitale Veranstaltungen in Moskau vom 11. bis 17. November</a></li>
<li><a href="../de475400/index.html">Digitale Veranstaltungen in St. Petersburg vom 11. bis 17. November</a></li>
<li><a href="../de475404/index.html">BLoC-Muster mit einem einfachen Beispiel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>