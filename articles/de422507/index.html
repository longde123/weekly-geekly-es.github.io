<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõÇ üß° üï∫üèø PHP 7.3. Was gibt's Neues üèúÔ∏è üñºÔ∏è ü••</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Syntax 


1. Erweichen Sie die Heredoc- und Nowdoc-Syntaxanforderungen 
2. Unterst√ºtzung f√ºr nachgestellte Kommas in Funktions- und Methodenaufrufen 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PHP 7.3. Was gibt's Neues</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422507/"><p><img src="https://habrastorage.org/webt/qb/0s/qb/qb0sqbtbsney4hzc4erkjjqo0ki.png"></p><br><h1 id="sintaksis">  Syntax </h1><br><ol><li>  Erweichen Sie die Heredoc- und Nowdoc-Syntaxanforderungen </li><li>  Unterst√ºtzung f√ºr nachgestellte Kommas in Funktions- und Methodenaufrufen </li><li> Links in <code>list()</code> </li></ol><br><h1 id="ustarevshie-vozmozhnosti-deprecated">  Veraltete Funktionen (veraltet) </h1><br><ol><li>  <code>image2wbmp()</code> Funktion <code>image2wbmp()</code> ist veraltet </li><li>  Die Flags <code>FILTER_FLAG_SCHEME_REQUIRED</code> und <code>FILTER_FLAG_HOST_REQUIRED</code> bei Verwendung von <code>FILTER_VALIDATE_URL</code> <code>FILTER_FLAG_HOST_REQUIRED</code> </li><li>  Registrieren Sie unabh√§ngige Konstanten, die veraltet sind </li></ol><br><h1 id="novye-vozmozhnosti">  Neue Funktionen </h1><br><ol><li>  Optionales <code>json_encode</code> Ausnahmen f√ºr Fehler in den <code>json_decode</code> <code>json_encode</code> und <code>json_decode</code> </li><li>  Hinzuf√ºgen der Funktion <code>is_countable()</code> </li><li>  Hinzuf√ºgen der Funktionen <code>array_key_first()</code> und <code>array_key_last()</code> <a name="habracut"></a></li></ol><br><h1 id="izmeneniya">  √Ñnderungen </h1><br><ol><li>  Migration von PCRE zu PCRE2 </li></ol><br><h2 id="smyagchenie-trebovaniy-k-sintaksisu-heredoc-i-nowdoc">  Erweichen Sie die Heredoc- und Nowdoc-Syntaxanforderungen </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Heredoc</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nowdoc</a> forderten, die schlie√üende Kennung zuerst in eine neue Zeile zu setzen. </p><br><p>  Ein Beispiel: </p><br><pre> <code class="php hljs">$foo = &lt;&lt;&lt;IDENTIFIER the crazy dog jumps over the lazy fox <span class="hljs-string"><span class="hljs-string">"foo"</span></span> bar; IDENTIFIER</code> </pre> <br><p>  Hier muss der schlie√üende <code>IDENTIFIER</code> das erste Zeichen in der neuen Zeile sein, damit dies funktioniert.  Au√üerdem sollten nach dem schlie√üenden Bezeichner keine weiteren Zeichen stehen (au√üer <code>;</code> was optional ist). </p><br><p>  Der RFC f√ºr PHP 7.3 schl√§gt vor, diese Anforderungen zu entfernen, um die Lesbarkeit des Codes zu verbessern.  Zun√§chst, um Einr√ºckungen hinzuzuf√ºgen, wenn <code>heredoc/nowdoc</code> Bezeichner verwendet werden. </p><br><p>  Vollst√§ndige Liste der √Ñnderungen an der <code>heredoc/nowdoc</code> Syntax: </p><br><ol><li>  Die schlie√üende Kennung muss nicht das erste Zeichen in der Zeichenfolge sein. </li><li>  Die schlie√üende Kennung wird mit Leerzeichen oder Tabulatoren einger√ºckt. </li><li>  Einr√ºckungen (Leerzeichen oder Tabulatoren) sollten nicht gemischt werden.  Wenn Sie dies tun, wird der <code>Parse error: Invalid indentation - tabs and spaces cannot be mixed in .. on line ..</code> </li><li>  Die genaue Anzahl der Leerzeichen / Tabulatoren, die vor dem schlie√üenden Bezeichner verwendet werden, wird aus jeder Zeile des <code>heredoc/nowdoc</code> Ausdrucks entfernt. </li><li>  Wenn die Anzahl der Einr√ºckungszeichen, die vor dem schlie√üenden Bezeichner verwendet werden, gr√∂√üer ist als in einer der Zeilen des Ausdrucks, wird der <code>Parse error: Invalid body indentation level (expecting an indentation level of at least ..) in .. on line ..</code> </li><li>  Mehrere Ausdr√ºcke nach dem schlie√üenden Bezeichner funktionieren fehlerfrei </li></ol><br><p>  Hier ist ein Ausschnitt, der neue Funktionen nutzt, ohne neue Regeln zu brechen: </p><br><pre> <code class="php hljs">$foo = [<span class="hljs-string"><span class="hljs-string">'foo'</span></span>, <span class="hljs-string"><span class="hljs-string">'bar'</span></span>, &lt;&lt;&lt;EOT baz - hello world! -- ahoy EOT, <span class="hljs-string"><span class="hljs-string">'qux'</span></span>, <span class="hljs-string"><span class="hljs-string">'quux'</span></span> ]; var_dump($foo);</code> </pre> <br><p>  Die Ausgabe wird sein: </p><br><pre> <code class="plaintext hljs">array(5) {        [0]=&gt;           string(3) "foo" [1]=&gt;           string(3) "bar" [2]=&gt;           string(29) "baz - hello world! -- ahoy" [3]=&gt; string(3) "qux" [4]=&gt; string(4) "quux" }     `</code> </pre> <br><p>  Beachten Sie, dass der Einzug, der in der Deklaration mit <code>heredoc</code> , in der Ausgabe von <code>var_dump()</code> nicht angezeigt wird, und wir haben die Elemente des Arrays nach dem <code>EOT</code> Bezeichner weiter <code>var_dump()</code> . </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>RFC</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Diskussion auf Externals.io</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Implementierung</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost">  Auswirkungen auf die Abw√§rtskompatibilit√§t </h3><br><p>  Bis Sie einen Satz identischer <code>heredox/nowdoc</code> Zeichenkennungen als Zeilenanfang verwenden, befinden Sie sich auf einem Pferd. </p><br><pre> <code class="php hljs">$foo = &lt;&lt;&lt;HELLO HELLO_WORLD &lt;--         HELLOWORLD &lt;--     HELLO WORLD &lt;--    HELLO;</code> </pre> <br><p>  Wenn Sie eine <code>heredoc/nowdoc</code> Syntax haben, die der oben beschriebenen √§hnlich ist, <code>heredoc/nowdoc</code> ich fest, dass PHP mit PHP 7.3 das erste <code>HELLO</code> Literal akzeptiert und einen Fehler in die n√§chste Zeile wirft.  In fr√ºheren Versionen wurde <code>HELLO WORLD</code> nicht als abschlie√üende Kennung f√ºr Heredoc angesehen.  Vielen Dank an <em>/ u / ImSuperObjective2</em> mit reddit f√ºr den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hinweis</a> </p><br><h2 id="podderzhka-konechnyh-zapyatyh-v-vyzovah-funkciy-i-metodov">  Unterst√ºtzung f√ºr nachgestellte Kommas in Funktions- und Methodenaufrufen </h2><br><p>  Dies ist eine einfache √Ñnderung, die die Verwendung von nachgestellten Kommas in Funktionsaufrufen und Methoden erm√∂glicht.  Die Erkl√§rung bleibt davon unber√ºhrt. </p><br><p>  Beispielsweise wird die folgende Syntax m√∂glich: </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//  foo('bar', 'baz',); //        'baz'</span></span></code> </pre> <br><p>  In Versionen vor PHP-7.3 l√∂st das obige Snippet einen <code>PHP Parse error: syntax error, unexpected ')' in .. on line ..</code> </p><br><p>  Sie k√∂nnen nicht mehr als ein Komma am Ende verwenden oder Kommas verwenden, um Argumente zu √ºberspringen.  Dies ist haupts√§chlich eine √Ñnderung f√ºr eine Funktion mit variablen Parametern.  Auch bei neuen √Ñnderungen sieht die Array-Syntax konsistenter aus. </p><br><p>  Beachten Sie, dass Sie diese Funktion nicht in Funktions- / Methodendeklarationen verwenden k√∂nnen.  das ist nicht richtig: </p><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($bar, $baz, )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// nah, you can't do this. }</span></span></code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>RFC</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Diskussion auf Externals.io</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Implementierung</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-1">  Auswirkungen auf die Abw√§rtskompatibilit√§t </h3><br><p>  Nichts.  Bestehender Code funktioniert weiterhin.  Wenn Sie Funktionsaufrufe haben, die variable Parameter akzeptieren, f√ºgen Sie diesen Stellen zur Vereinfachung nachfolgende Kommas hinzu.  Aber sie √ºberall zu benutzen ist offensichtlich zu viel. </p><br><h2 id="ssylki-v-list">  Links in <code>list()</code> </h2><br><p>  Die Funktion <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>list()</code></a> ist n√ºtzlich, um Variablen aus einem Array schnell Werte zuzuweisen.  Vor PHP 7.3 war es nicht m√∂glich, eine Variable als Referenz anzugeben.  Vor PHP 7.3 f√ºhrte das folgende Snippet zu einem schwerwiegenden Fehler: </p><br><pre> <code class="php hljs">$arr = [<span class="hljs-string"><span class="hljs-string">'apple'</span></span>, <span class="hljs-string"><span class="hljs-string">'orange'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>($a, &amp;$b) = $arr; $b = <span class="hljs-string"><span class="hljs-string">'banana'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $arr[<span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// Fatal error: [] and list() assignments cannot be by reference in .. on line ..</span></span></code> </pre> <br><p>  Es ist unm√∂glich, auf <code>non-referencable</code> Variablen zu verweisen: <code>list($a, &amp;$b) = [12, 14];</code>  gibt einen <code>Fatal error: Cannot assign reference to non referencable value in .. on line ..</code> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>RFC</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Diskussion auf Externals.io</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Implementierung</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-2">  Auswirkungen auf die Abw√§rtskompatibilit√§t </h3><br><p>  Nein.  Anstatt <code>list()</code> zum Auff√ºllen mehrerer Variablen zu verwenden, w√ºrde ich vorschlagen, dass Sie Wertobjekte verwenden, um die Dinge zu vereinfachen.  Sie werden weiterhin als Referenz √ºbergeben, machen Ihren Code jedoch viel sauberer. </p><br><h2 id="funkciya-image2wbmp-obyavlena-ustarevshey">  <code>image2wbmp()</code> Funktion <code>image2wbmp()</code> ist veraltet </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>image2wbmp()</code></a> Funktion <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>image2wbmp()</code></a> aus der GD-Erweiterung wird verwendet, um Bilder im WBMP-Format (Wireless Bitmap) auszugeben.  In PHP 7.3 ist es zugunsten der Funktion <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>imagewbmp()</code></a> veraltet. </p><br><p>  Wenn Sie <code>image2wbmp()</code> , ersetzen Sie einfach den Funktionsnamen durch <code>imagewbmp</code> und alles wird gut!  √úber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>5,500  image2wbmp()</code></a> auf Github gegen√ºber √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>39,300  imagewbmp()</code></a> .  Es sieht so aus, als w√ºrde das PHP-Entwicklungsteam weniger genutzte Funktionen entfernen, um die Auswirkungen zu minimieren. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>RFC</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Diskussion auf Externals.io</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Implementierung</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-3">  Auswirkungen auf die Abw√§rtskompatibilit√§t </h3><br><p>  Wenn Sie die Funktion <code>image2wbmp()</code> verwenden, ersetzen Sie den Aufruf durch <code>imagewbmp</code> .  Nutzen Sie die Automatisierung, die dies f√ºr Sie √§ndern kann. </p><br><h2 id="flagi-filter_flag_scheme_required-i-filter_flag_host_required-pri-ispolzovanii-filter_validate_url-obyavleny-ustarevshimi">  Die Flags <code>FILTER_FLAG_SCHEME_REQUIRED</code> und <code>FILTER_FLAG_HOST_REQUIRED</code> bei Verwendung von <code>FILTER_VALIDATE_URL</code> <code>FILTER_FLAG_HOST_REQUIRED</code> </h2><br><p>  Dies ist eine Vorw√§rtsbewegung.  Wenn Sie <code>filter_var($var, FILTER_VALIDATE_URL)</code> , k√∂nnen zwei zus√§tzliche Flags gesetzt werden, um eine strikte URL-√úberpr√ºfung sicherzustellen: <code>FILTER_FLAG_SCHEME_REQUIRED</code> und <code>FILTER_FLAG_HOST_REQUIRED</code> . <br>  Ab PHP 5.2.1 werden beide Flags implizit angewendet, unabh√§ngig davon, ob sie gesetzt sind oder nicht. </p><br><p>  Wenn Ihr Code diese Flags verwendet, l√∂schen Sie sie einfach und es wird in Ordnung sein.  Derzeit werden √ºber 5.000 Github-Suchergebnisse verwendet. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>RFC</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Diskussion auf Externals.io</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Implementierung</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-4">  Auswirkungen auf die Abw√§rtskompatibilit√§t </h3><br><p>  Da diese beiden Flags veraltet sind, wird eine Benachrichtigung wie folgt angezeigt: </p><br><pre> <code class="plaintext hljs">Deprecated: filter_var(): explicit use of FILTER_FLAG_SCHEME_REQUIRED and FILTER_FLAG_HOST_REQUIRED is deprecated in ...</code> </pre> <br><p>  Alles was Sie tun m√ºssen, ist nur die beiden Flags als zu entfernen  Sie sind <code>FILTER_VALIDATE_URL</code> impliziert, wenn <code>FILTER_VALIDATE_URL</code> . </p><br><h2 id="registro-nezavisimye-konstanty-obyavleny-ustarevshimi">  Registrieren Sie unabh√§ngige Konstanten, die veraltet sind </h2><br><p>  Mit der Funktion <code>define()</code> k√∂nnen Sie eine Konstante im Modus ohne Ber√ºcksichtigung der Gro√ü- und Kleinschreibung deklarieren.  Sie m√ºssen eine Konstante mit Gro√ü- und Kleinschreibung explizit deklarieren, indem Sie den dritten Parameter der Funktion <code>true</code> .  Dies ist nicht das Standardverhalten und entspricht wahrscheinlich nicht der F√§higkeit, Konstanten √ºber das Schl√ºsselwort <code>const</code> deklarieren. </p><br><pre> <code class="php hljs">define(<span class="hljs-string"><span class="hljs-string">'Foo'</span></span>, <span class="hljs-string"><span class="hljs-string">'Bar'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>);</code> </pre> <br><p>  Der obige Code l√∂st eine Veralterungsbenachrichtigung aus: <code>Deprecated: define(): Declaration of case-insensitive constants is deprecated in ...</code> </p><br><p>  Wenn Sie versuchen, auf Konstanten zuzugreifen, die im <code>FOO</code> Modus ( <code>Deprecated: Case-insensitive constants are deprecated. The correct casing for this constant is "Foo"</code> ) deklariert wurden, wird eine n√ºtzliche Warnung <code>Deprecated: Case-insensitive constants are deprecated. The correct casing for this constant is "Foo"</code> Konstanten, bei denen die <code>Deprecated: Case-insensitive constants are deprecated. The correct casing for this constant is "Foo"</code> <code>FOO</code> wird, <code>Deprecated: Case-insensitive constants are deprecated. The correct casing for this constant is "Foo"</code> <code>Deprecated: Case-insensitive constants are deprecated. The correct casing for this constant is "Foo"</code> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>RFC</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Diskussion auf Externals.io</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Implementierung</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-5">  Auswirkungen auf die Abw√§rtskompatibilit√§t </h3><br><p>  Sie m√ºssen zum Basiscode gehen, in dem registerunabh√§ngige Konstanten deklariert und anschlie√üend korrigiert werden.  Es ist √§u√üerst unwahrscheinlich, dass es Probleme damit gibt, da es ziemlich m√ºhsam ist, alle Anwendungsf√§lle zu erfassen, aber dadurch wird der Code klarer. </p><br><p>  Ich habe keine Beispiele f√ºr diese Verwendung auf Github gefunden, aber zumindest Drupal und WordPress (zwei ziemlich alte und ausgereifte PHP-Projekte) haben Konstanten, bei denen die Gro√ü- und Kleinschreibung nicht ber√ºcksichtigt wird. </p><br><h2 id="opcionalnyy-vybros-isklyucheniy-pri-oshibkah-v-funkciyah-json_encode-i-json_decode">  Optionales <code>json_encode</code> Ausnahmen f√ºr Fehler in den <code>json_decode</code> <code>json_encode</code> und <code>json_decode</code> </h2><br><p>  Einer meiner Favoriten.  W√§hrend all dieser Jahre <code>json_encode()</code> und <code>json_decode()</code> √ºber Fehler in PHP-Variablen oder json-Zeichenfolgen, die zu Code f√ºhrten, der mit Tags versehen war.  Dieser Fall war sogar in der ber√ºhmten Kritik an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PHP: Ein Fraktal von schlechtem Design</a> . </p><br><blockquote>  <code>json_decode</code> gibt null f√ºr ung√ºltige Eingaben zur√ºck, w√§hrend null ein absolut wahres Objekt f√ºr dekodiertes JSON ist.  Diese Funktion ist v√∂llig unzuverl√§ssig, es sei denn, Sie rufen <code>json_last_error</code> jeder Verwendung <code>json_last_error</code> . </blockquote><p>  Es dauerte 6 Jahre nach diesem Blog-Beitrag und wir hatten die Gelegenheit, einen Fehler √ºber JSON-Fehler zu erhalten: </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { json_decode(<span class="hljs-string"><span class="hljs-string">"{"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-number"><span class="hljs-number">512</span></span>, JSON_THROW_ON_ERROR); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (\JsonException $exception) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $exception-&gt;getMessage(); <span class="hljs-comment"><span class="hljs-comment">//  "Syntax error" }</span></span></code> </pre> <br><p>  Die neue <code>\JsonException</code> ist ein Nachkomme von <code>\Exception</code> , sowie die Konstante <code>JsonException</code> und <code>JsonException</code> selbst befinden sich im globalen Namespace. </p><br><p>  Ich empfehle Ihnen dringend, diese Funktion zu verwenden.  Es gibt Bibliotheken von Drittanbietern wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">daverandom / exception-json</a> , die √§hnliche Funktionen f√ºr PHP-Versionen 7.2 und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">niedriger</a> implementieren.  Mit dem Erscheinen dieser Funktion im PHP-Kern k√∂nnen Sie dieses Paket und jede <code>json_last_error()</code> h√§sslichen Vorlagencode mit dem Aufruf <code>json_last_error()</code> an jedem Ort entfernen, an dem Sie mit json arbeiten. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>RFC</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Diskussion auf Externals.io</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Implementierung</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-6">  Auswirkungen auf die Abw√§rtskompatibilit√§t </h3><br><p>  Nichts, wenn Sie keine eigene Ausnahme und / oder Konstante mit demselben Namen verwenden. </p><br><h2 id="dobavlenie-funkcii-is_countable">  Hinzuf√ºgen der Funktion <code>is_countable()</code> </h2><br><p>  PHP 7.2 hat viele veraltete und fehlerhafte Funktionen.  Wenn Sie in PHP 7.2 sind.  Rufen Sie <code>count()</code> mit einer nicht <code>countable</code> Variablen auf, dann zeigt PHP eine Warnung dazu an.  Bei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">allgemeinen √Ñnderungen</a> wurde vorgeschlagen, die resultierende Variable auf <code>countable</code> zu √ºberpr√ºfen, bevor sie in <code>count()</code> . </p><br><p>  <code>countable</code> -variable ist ein Array oder Objekt, das die Schnittstelle <code>\Countable</code> implementiert.  Da w√§hrend der √úberpr√ºfung viel Boilerplate-Code verwendet wird, hat PHP 7.3 eine neue Funktion <code>is_countable()</code> , die die Variable auf ... nun ... die M√∂glichkeit der Verwendung von <code>count()</code> √ºberpr√ºft. </p><br><p>  Ich habe eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Polydatei f√ºr is__countable () geschrieben,</a> wenn Sie diese Funktion jetzt verwenden m√∂chten. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>RFC</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Diskussion auf Externals.io</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Implementierung</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-7">  Auswirkungen auf die Abw√§rtskompatibilit√§t </h3><br><p>  Bis die eigene Funktion <code>is_countable()</code> , gibt es keine Probleme. </p><br><h2 id="dobavlenie-funkciy-array_key_first-i-array_key_last">  Hinzuf√ºgen der Funktionen <code>array_key_first()</code> und <code>array_key_last()</code> </h2><br><p>  Es gibt 75 verschiedene Funktionen in PHP f√ºr die Arbeit mit Arrays, aber bisher gab es keine einfache M√∂glichkeit, den ersten und den letzten Schl√ºssel eines Arrays <code>array_keys()</code> ohne den Array-Zeiger zu √§ndern oder alle Schl√ºssel <code>array_keys()</code> √ºber <code>array_keys()</code> ) und dann den ersten / letzten Wert <code>array_keys()</code> . </p><br><p>  Es wurden zwei neue Funktionen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>array_key_first()</code></a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>array_key_first()</code></a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>array_key_last()</code></a> , mit denen Sie dies tun k√∂nnen. </p><br><p>  Der RFC schlug au√üerdem vor, <code>array_value_first()</code> und <code>array_value_last()</code> , aber dieser Teil hat die Abstimmung nicht bestanden. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>RFC</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Diskussion auf Externals.io</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Implementierung</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-8">  Auswirkungen auf die Abw√§rtskompatibilit√§t </h3><br><p>  Wenn Sie Ihre eigenen Funktionen <code>array_key_first()</code> und <code>array_key_last()</code> nicht deklariert haben, ist dies kein Problem. </p><br><h2 id="migraciya-s-pcre-na-pcre2">  Migration von PCRE zu PCRE2 </h2><br><p>  PHP verwendet <em>Perl-kompatible regul√§re Ausdr√ºcke</em> oder kurz <em>PCRE</em> in der Bibliothek, um mit regul√§ren Ausdr√ºcken zu arbeiten.  Seit PHP 7.2 wird die 8.x-Version der PCRE Legacy Library verwendet, und in PHP 7.3 wird PCRE2 bereits verwendet.  Bitte beachten Sie, dass PCRE2 als neue Bibliothek betrachtet wird, obwohl es weitgehend mit PCRE (8.x) kompatibel ist. </p><br><p>  Die neue Bibliothek ist aggressiver bei der Mustervalidierung und kann zu Fehlern im vorhandenen Code f√ºhren.  Das folgende Snippet ist mit PHP 7.3 ung√ºltig: </p><br><pre> <code class="php hljs">preg_match(<span class="hljs-string"><span class="hljs-string">'/[\w-.]+/'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>);</code> </pre> <br><p>  PHP gibt eine Warnung aus. <code>Warning: preg_match(): Compilation failed: invalid range in character class at offset 3</code> . <br>  Das Problem mit dem Muster: Damit dies funktioniert, muss der Bindestrich bis zum Ende verschoben oder maskiert werden. </p><br><pre> <code class="php hljs">preg_match(<span class="hljs-string"><span class="hljs-string">'/[\w\-.]+/'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>);</code> </pre> <br><p>  Der obige Code funktioniert nicht nur mit PHP 7.3, sondern auch mit √§lteren Versionen.  Im neuen Muster wird der Bindestrich in <code>\-</code> .  Dies ist das h√§ufigste Problem, das bei der L√∂sung von Kompatibilit√§tsproblemen auftreten kann. </p><br><p>  Dies ist eine ziemlich kleine √Ñnderung, aber es besteht die M√∂glichkeit, dass alles schief geht.  Die Fehlermeldung gibt die genaue Position des Zeichens im regul√§ren Ausdruck an.  √úberpr√ºfen Sie Ihren Code sorgf√§ltig.  √úberpr√ºfen Sie Ihre regul√§ren Ausdr√ºcke auf Kompatibilit√§t mit der PCRE2-Syntax √ºber <code>Regex Buddy</code> oder eine andere √§hnliche Software.  Weitere Informationen finden Sie in der Beschreibung der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PCRE2-Syntax</a> und der √§lteren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PCRE-Syntax</a> . </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>RFC</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Diskussion auf Externals.io</em></a> <em>,</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><em>Implementierung</em></a> </p><br><h3 id="vliyanie-na-obratnuyu-sovmestimost-9">  Auswirkungen auf die Abw√§rtskompatibilit√§t </h3><br><p>  Da PCRE2 in Bezug auf Vorlagen w√§hlerischer und strenger ist, <code>preg_match()</code> einige Ihrer <code>preg_match()</code> und √§hnlichen Aufrufe m√∂glicherweise nicht.  Das Update reicht von der einfachen Aktualisierung der Vorlage (z. B. das Entkommen von Bindestrichen) bis zum Umschreiben von Vorlagen.  Stellen Sie sicher, dass alle Ihre Tests bestanden sind. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de422507/">https://habr.com/ru/post/de422507/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de422493/index.html">Kubernetes (k8s) + Helm + GitLab CI / CD. Richtig bereitstellen</a></li>
<li><a href="../de422495/index.html">Geschichte der alten Ikonen. Das R√§tsel der 18 Farben. Transparente und inverse Farben</a></li>
<li><a href="../de422497/index.html">ICANN hat eine detaillierte Anleitung ver√∂ffentlicht, was Sie beim Upgrade des KSK in der Root-Zone erwarten k√∂nnen</a></li>
<li><a href="../de422499/index.html">Noch einmal zu Webkomponenten ...</a></li>
<li><a href="../de422501/index.html">Neue technologische Verfahren zur Herstellung von Mikrochips werden zunehmend verschoben - warum?</a></li>
<li><a href="../de422509/index.html">Zusammenfassung des Buches "Never Eat Alone"</a></li>
<li><a href="../de422511/index.html">Laden von Daten in Splunk: Universal Forwarder vs Heavy Forwarder. Was ist der Unterschied?</a></li>
<li><a href="../de422513/index.html">7 Tipps, wie Sie einen Testerkollegen im Urlaub nicht ver√§rgern k√∂nnen</a></li>
<li><a href="../de422515/index.html">Zwei Apache Ignite Mitaps und In-Memory Computing Webinar im September</a></li>
<li><a href="../de422517/index.html">TelegramBot in der Wolfram Cloud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>