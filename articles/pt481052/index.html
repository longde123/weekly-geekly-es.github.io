<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥞 😬 👨‍💻 Criar rede privada Ethereum Geth em contêineres Docker 👂🏻 👩🏽‍💻 🛕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Se você precisar implantar uma rede Ethereum privada baseada em Geth, isso poderá ser feito, por exemplo, criando nós de rede em servidores físicos ou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Criar rede privada Ethereum Geth em contêineres Docker</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481052/"><img src="https://habrastorage.org/webt/bg/f3/as/bgf3asaindlkt8bxyfvzbrkwjl4.jpeg"><br><br>  Se você precisar implantar uma rede Ethereum privada baseada em Geth, isso poderá ser feito, por exemplo, criando nós de rede em servidores físicos ou máquinas virtuais.  No entanto, é muito mais fácil usar contêineres Geth no repositório do hub do Docker.  Nesse caso, você pode instalar uma rede inteira de nós, mesmo em uma máquina virtual ou em um servidor físico. <br><br>  Neste artigo, mostraremos como instalar o Docker em um servidor executando o Debian 9 (virtual ou físico), como criar vários contêineres com o Geth em execução e combiná-los em uma rede privada.  Daremos um exemplo de script para o Node.js que acessa os nós Geth que funcionam em contêineres. <br><a name="habracut"></a><br><h2>  Instalar o Docker </h2><br>  A instalação do Docker é descrita no site oficial.  Para o Debian 9 e 10, você encontrará instruções detalhadas em <a href="https://docs.docker.com/install/linux/docker-ce/debian/" rel="nofollow">https://docs.docker.com/install/linux/docker-ce/debian/</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Instalar o Docker</b> <div class="spoiler_text">  Primeiro de tudo, atualize os pacotes: <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get update</span></span></code> </pre> <br>  Em seguida, instale os pacotes necessários com o seguinte comando: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common</span></span></code> </pre> <br>  Adicione a chave oficial do GPG: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -</span></span></code> </pre> <br>  Certifique-se de obter a chave com a impressão digital 9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-key fingerprint 0EBFCD88 pub 4096R/0EBFCD88 2017-02-22 Key fingerprint = 9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88 uid Docker Release (CE deb) docker@docker.com sub 4096R/F273FCD8 2017-02-22</span></span></code> </pre><br>  Adicione um repositório Docker estável: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/debian $(lsb_release -cs) stable"</span></span></code> </pre><br>  Atualize pacotes e instale o Docker: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get update # apt-get install docker-ce docker-ce-cli containerd.io</span></span></code> </pre> <br>  Agora resta apenas verificar se tudo foi feito corretamente.  Para fazer isso, execute a imagem hello-world (Imagem): <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker run hello-world</span></span></code> </pre> <br>  Este comando fará o download da imagem desejada e a executará para execução.  Como seria de esperar, você verá a mensagem "Olá do Docker!" No console. <br><br>  Como você pode ver, nada complicado!  Agora você pode começar a criar uma rede Geth privada com nós em execução em contêineres. <br></div></div><br><h2>  Crie usuário, diretórios e arquivos </h2><br>  Crie um livro no servidor do usuário e os seguintes subdiretórios em seu diretório pessoal: <br><br><pre> <code class="plaintext hljs">/home/book/dock-test /home/book/dock-test/distr</code> </pre><br>  Em seguida, no diretório / home / book / dock-test, crie um Dockerfile: <br><br><div class="spoiler">  <b class="spoiler_title">Listagem 1. Arquivo / home / livro / dock-test / Dockerfile</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">FROM ubuntu:16.04 LABEL version="1.0" LABEL maintainer="alexandre@frolov.pp.ru" ENV DEBIAN_FRONTEND=noninteractive RUN apt-get update &amp;&amp; apt-get install --yes software-properties-common RUN add-apt-repository ppa:ethereum/ethereum RUN apt-get update &amp;&amp; apt-get install --yes geth RUN adduser --disabled-login --gecos "" eth_book COPY distr /home/eth_book/distr RUN chown -R eth_book:eth_book /home/eth_book/distr USER eth_book WORKDIR /home/eth_book RUN geth --nousb init distr/genesis.json ENTRYPOINT bash</code> </pre><br></div></div><br>  Este arquivo será usado ao criar contêineres do Docker. <br><br>  Você também precisará criar o arquivo /home/book/dock-test/distr/genesis.json, necessário para inicializar os nós da rede Ethereum: <br><br><div class="spoiler">  <b class="spoiler_title">Listagem 2. Arquivo /home/book/dock-test/distr/genesis.json</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">{ "config": { "chainId": 98760, "homesteadBlock": 0, "eip150Block": 0, "eip155Block": 0, "eip158Block": 0 }, "difficulty": "10", "gasLimit": "5100000", "alloc": {} }</code> </pre> <br></div></div><br>  Aqui, definimos o identificador de nossa rede privada como 98760. Para facilitar a mineração, especificamos 10 no parâmetro de dificuldade, o que nos permitirá trabalhar em máquinas virtuais com uma quantidade relativamente pequena de memória (por exemplo, 4 GB). <br><br><h2>  Crie uma rede e contêineres </h2><br>  Para que nossos nós troquem dados entre si, criaremos uma rede entre contêineres: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker network create PRIVATENET</span></span></code> </pre> <br>  Em seguida, você precisa criar o diretório atual / home / book / dock-test, no qual o Dockerfile está localizado.  Em seguida, crie o número necessário de contêineres, por exemplo, três: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker build -t node01 . # docker build -t node02 . # docker build -t node03 .</span></span></code> </pre> <br>  A criação do primeiro contêiner leva um tempo relativamente longo, porque  Você precisa baixar as imagens necessárias.  Mas os seguintes contêineres são criados quase instantaneamente - compare com a velocidade de criação de máquinas virtuais, mesmo através da clonagem. <br><br>  Agora abra as quatro janelas do console.  Em três deles, trabalharemos com contêineres e, no quarto, receberemos os dados necessários sobre contêineres e rede. <br><br>  Na primeira janela do console, emita o seguinte comando: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker run --rm -it -p 8545:8545 --net=PRIVATENET node01</span></span></code> </pre> <br>  Você verá um prompt como: <br><br><pre> <code class="bash hljs">eth_book@304bf4f09063:~$</code> </pre> <br>  Na segunda e terceira janelas do console, digite os seguintes comandos, respectivamente: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker run --rm -it -p 8546:8546 --net=PRIVATENET node02 # docker run --rm -it -p 8547:8547 --net=PRIVATENET node03</span></span></code> </pre><br><h2>  Criando nós e contas de rede privada Ethereum </h2><br>  No momento, temos três contêineres com Geth.  Vamos criar em cada um deles o nó da nossa rede e conta privadas do Ethereum. <br><br>  Digite o comando nas três primeiras janelas do console: <br><br><pre> <code class="bash hljs">$ geth account new</code> </pre> <br>  Você precisará digitar uma senha.  Para simplificar, use a mesma senha em cada nó para testes, mas anote-a em algum lugar.  Se você esquecer a senha, ela não funcionará de forma alguma para se recuperar. <br><br>  Depois de criar as contas no console, endereços de chave pública semelhantes a estes aparecerão: <br><br><pre> <code class="plaintext hljs">Public address of the key: 0xc5Df10a76Bb559332c385F8cA789C0F37dD77A54 Public address of the key: 0x0C976006a5762779bA36AC590D1D8Ebac1Ca2981 Public address of the key: 0xaB627feab4e962222a3333F3b09182dF68bB9422</code> </pre><br>  Salve os endereços (você terá outros), como  precisamos deles para executar os nós. <br><br>  Agora você precisa iniciar a inicialização dos nós.  Isso é feito usando o comando: <br><br><pre> <code class="bash hljs">$ geth --nousb init distr/genesis.json</code> </pre> <br>  Digite este comando em todas as janelas do console de nossos contêineres.  A opção --nousb desativa todas as comunicações com dispositivos USB. <br><br><h2>  Executando Geth Nodes </h2><br>  Agora abra cada uma das janelas do console e execute Geth lá usando os comandos abaixo. <br><br>  Primeira janela: <br><br><pre> <code class="bash hljs">$ geth --identity=<span class="hljs-string"><span class="hljs-string">"Node01"</span></span> --etherbase <span class="hljs-string"><span class="hljs-string">"0xc5Df10a76Bb559332c385F8cA789C0F37dD77A54"</span></span> --mine --minerthreads 1 --verbosity 3 --networkid 98760 --rpc --rpcaddr 127.0.0.1 --nousb --rpcapi=<span class="hljs-string"><span class="hljs-string">"db,eth,net,web3,personal,web3"</span></span> console</code> </pre><br>  Segunda janela: <br><br><pre> <code class="bash hljs">$ geth --identity=<span class="hljs-string"><span class="hljs-string">"Node02"</span></span> --etherbase <span class="hljs-string"><span class="hljs-string">"0x0C976006a5762779bA36AC590D1D8Ebac1Ca2981"</span></span> --mine --minerthreads 1 --verbosity 3 --networkid 98760 --rpc --rpcaddr 127.0.0.1 --rpcport=8546 --nousb --rpcapi=<span class="hljs-string"><span class="hljs-string">"db,eth,net,web3,personal,web3"</span></span> console</code> </pre><br>  Terceira janela: <br><br><pre> <code class="bash hljs">$ geth --identity=<span class="hljs-string"><span class="hljs-string">"Node03"</span></span> --etherbase <span class="hljs-string"><span class="hljs-string">"0xaB627feab4e962222a3333F3b09182dF68bB9422"</span></span> --mine --minerthreads 1 --verbosity 3 --networkid 98760 --rpc --rpcaddr 127.0.0.1 --rpcport=8547 --nousb --rpcapi=<span class="hljs-string"><span class="hljs-string">"db,eth,net,web3,personal,web3"</span></span> console</code> </pre> <br>  Em cada uma das janelas abertas, serão exibidas mensagens sobre a geração do DAG: <br><br><pre> <code class="plaintext hljs">… INFO [12-19|17:57:44.072] Generating DAG in progress epoch=0 percentage=34 elapsed=29.740s INFO [12-19|17:57:44.898] Generating DAG in progress epoch=0 percentage=35 elapsed=30.566s INFO [12-19|17:57:45.671] Generating DAG in progress epoch=0 percentage=36 elapsed=31.339s …</code> </pre><br>  Aguarde até a geração estar concluída.  Depois disso, eth.hashrate e eth.blockNumber serão diferentes de 0: <br><br><pre> <code class="plaintext hljs">&gt; eth.hashrate 4 &gt; eth.blockNumber 2</code> </pre><br>  Você pode verificar o saldo da conta atual da seguinte maneira: <br><br><pre> <code class="plaintext hljs">&gt; web3.fromWei( eth.getBalance(eth.coinbase) )</code> </pre> <br>  Para que você não seja incomodado por mensagens sobre a criação de novos blocos e outras mensagens nas janelas do console, saia do Geth com o comando exit e reinicie novamente com o parâmetro de verbosidade definido como 1. <br><br><h2>  Nós de rede </h2><br>  Para começar, veremos a lista de contêineres em execução.  Emita o seguinte comando na quarta janela do console: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES fa70a5418618 node03 "/bin/sh -c bash" 2 hours ago Up 2 hours 0.0.0.0:8547-&gt;8547/tcp gifted_curran 49a028744b4b node02 "/bin/sh -c bash" 2 hours ago Up 2 hours 0.0.0.0:8546-&gt;8546/tcp reverent_wescoff 5a9ade2947eb node01 "/bin/sh -c bash" 2 hours ago Up 2 hours 0.0.0.0:8545-&gt;8545/tcp clever_ellis</span></span></code> </pre><br>  Aqui, para cada contêiner, seu identificador, nome da imagem, nome do contêiner e outras informações são exibidos. <br><br>  Para associar contêineres a uma rede, você precisará dos endereços IP dos contêineres em nossa rede privada PRIVATENET.  Você pode obter esses endereços pelo ID do contêiner, por exemplo, da seguinte maneira: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker inspect 5a9ade2947eb | grep IPAddress "SecondaryIPAddresses": null, "IPAddress": "", "IPAddress": "172.21.0.2",</span></span></code> </pre> <br>  Você também pode usar o comando PRIVATENET inspecionar rede do docker: <br><br><div class="spoiler">  <b class="spoiler_title">rede docker inspecionar PRIVATENET</b> <div class="spoiler_text"><pre> <code class="xml hljs">[ { "Name": "PRIVATENET", "Id": "576ec7edba5b4c228740deaf7fabb5e2ba003d310086153dd7f15e2c7de0c1b2", "Created": "2019-12-20T11:52:07.90695857+03:00", "Scope": "local", "Driver": "bridge", "EnableIPv6": false, "IPAM": { "Driver": "default", "Options": {}, "Config": [ { "Subnet": "172.21.0.0/16", "Gateway": "172.21.0.1" } ] }, "Internal": false, "Attachable": false, "Ingress": false, "ConfigFrom": { "Network": "" }, "ConfigOnly": false, "Containers": { "49a028744b4b6073f6dbca23e78625bc58fc0cdacadec7cded4bb0e888c7e37b": { "Name": "reverent_wescoff", "EndpointID": "11006b596b5a46df9bf9f95a9456784795d333a3e6901b15bd2db746fd4b5513", "MacAddress": "02:42:ac:15:00:03", "IPv4Address": "172.21.0.3/16", "IPv6Address": "" }, "5a9ade2947ebd8e55594ede9763aac71f5e6529c03e762ef723adb2c592c5ccd": { "Name": "clever_ellis", "EndpointID": "41ef69a0a93b5b1de495836028bac1742c303de92ffe42a0855ed32c93c28953", "MacAddress": "02:42:ac:15:00:02", "IPv4Address": "172.21.0.2/16", "IPv6Address": "" }, "fa70a54186185de01db3647e7333bf6c71250162fafefb78dbe9998e5ac93f34": { "Name": "gifted_curran", "EndpointID": "d368c032bc0886c27ad4895d1856e4f00cf1b25ce040f3b42393dbff778c18e5", "MacAddress": "02:42:ac:15:00:04", "IPv4Address": "172.21.0.4/16", "IPv6Address": "" } }, "Options": {}, "Labels": {} } ]</code> </pre></div></div><br>  Comparando os dados recebidos por esses comandos, faremos uma lista de endereços IP para nossos contêineres: <br><br><pre> <code class="plaintext hljs">node01 - 172.21.0.2 node02 - 172.21.0.3 node03 - 172.21.0.4</code> </pre><br>  Obviamente, você terá uma lista diferente e, quando reiniciar os contêineres, esses endereços poderão mudar. <br><br>  Após receber a lista de endereços, reinicie o geth em todos os contêineres, especificando o endereço do seu contêiner no parâmetro --rpcaddr.  Obviamente, você pode definir o endereço 0.0.0.0, mas isso é ruim do ponto de vista da segurança - qualquer pessoa ou qualquer coisa pode se conectar ao nó.  Por exemplo, podem ser bots que tentam "retirar" todos os fundos desses nós, aguardando o desbloqueio do nó. <br><br>  Para mesclar os nós, você precisará usar o comando admin.addPeer.  Como parâmetro para este comando, você precisa passar a URL no formato enode.  Obtenha esse URL para cada contêiner usando o comando admin.nodeInfo.enode: <br><br><pre> <code class="plaintext hljs">&gt; admin.nodeInfo.enode "enode://0a84e562c9b22e43269b7dca215cf2ed8c20bbf35da67bae8d5ee81b36d8bbb69e3ec704b9b6f7501059fe861843a836b2fbab641f36616cdd77365b1a522d5b@62.152.63.28:30303?discport=1350" "enode://ee49f69e25c068e006fec4a8d74370370b1d2be9715b86eddd99f97a3a5a9c692a265ab7d01fb36410d59c3f6e2b253a22f652ecbf1941eef0b3f1d30b19a535@62.152.63.28:30303?discport=1345" "enode://156d43648b47078439c7481e54f697bbf1c6b6e762029ba2969f1556ceb94e51ad03f8bd2bed35f466073165810600f52925d155f0fceef832ae86fc39a8c135@62.152.63.28:30303?discport=1348"</code> </pre><br>  Os endereços recebidos são salvos. <br><br>  Para conectar um nó ao outro, abra a janela do console do primeiro nó e digite o seguinte comando: <br><br><pre> <code class="plaintext hljs">&gt; admin.addPeer( "enode://0a84e562c9b22e43269b7dca215cf2ed8c20bbf35da67bae8d5ee81b36d8bbb69e3ec704b9b6f7501059fe861843a836b2fbab641f36616cdd77365b1a522d5b@172.21.0.3:30303")</code> </pre><br>  Aqui passamos o endereço da URL, indicando nele o endereço IP do host conectado.  Siga o mesmo procedimento em outros nós da rede. <br><br>  Para verificar se a conexão foi estabelecida, use o comando admin.peers.  Se não houver conexões, o comando retornará um resultado vazio: <br><br><pre> <code class="xml hljs">&gt; admin.peers []</code> </pre><br>  No nosso caso, o comando mostra que o primeiro nó com o endereço 172.21.0.2 está conectado aos nós com os endereços 172.21.0.3 e 172.21.0.4: <br><br><div class="spoiler">  <b class="spoiler_title">Veja o resultado quando houver conexões</b> <div class="spoiler_text"><pre> <code class="xml hljs">&gt; admin.peers [{ caps: ["eth/63", "eth/64"], enode: "enode://156d43648b47078439c7481e54f697bbf1c6b6e762029ba2969f1556ceb94e51ad03f8bd2bed35f466073165810600f52925d155f0fceef832ae86fc39a8c135@172.21.0.4:30303", id: "4dac1d10cb6ae8bfc1fdebd3f5334b24ee62ec38a50bc92c89104cfc3251b5fc", name: "Geth/Node03/v1.9.9-stable-01744997/linux-amd64/go1.13.4", network: { inbound: false, localAddress: "172.21.0.2:40652", remoteAddress: "172.21.0.4:30303", static: true, trusted: false }, protocols: { eth: { difficulty: 98414119, head: "0x6b31a5bb9cde06fab5a8cc1ae9b18bada30de0d1b76cb3286c1081e76dbf5b83", version: 64 } } }, { caps: ["eth/63", "eth/64"], enode: "enode://ee49f69e25c068e006fec4a8d74370370b1d2be9715b86eddd99f97a3a5a9c692a265ab7d01fb36410d59c3f6e2b253a22f652ecbf1941eef0b3f1d30b19a535@172.21.0.3:30303", id: "b74277d278c15317fa7f7fa492daca60492ea22053bfc53281dd0071eba1c16b", name: "Geth/Node02/v1.9.9-stable-01744997/linux-amd64/go1.13.4", network: { inbound: false, localAddress: "172.21.0.2:42576", remoteAddress: "172.21.0.3:30303", static: true, trusted: false }, protocols: { eth: { difficulty: 99041423, head: "0x0ec44735bbb425cb8db96103f52300dfaae1147ba0e03aa4892d041250ce4408", version: 64 } } }]</code> </pre></div></div><br>  Observe que, depois que os nós forem combinados e sincronizados com êxito, o comando eth.blockNumber retornará o mesmo valor quando iniciado em qualquer um de nossos três contêineres. <br><br>  O comando web3.fromWei (eth.getBalance (eth.coinbase)), pelo contrário, mostrará um equilíbrio diferente em nós diferentes, porque  cada nó tem sua própria conta. <br><br><h2>  Trabalhar com hosts usando o Node.js </h2><br>  Na Listagem 3, apresentamos um script simples executando o Node.js que exibe no console uma lista de contas para o nó especificado e o saldo de cada uma delas: <br><br><div class="spoiler">  <b class="spoiler_title">Listagem 3. Arquivo / home / book / list_accounts.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Web3 = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'web3'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> web3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3.providers.HttpProvider(<span class="hljs-string"><span class="hljs-string">"http://172.21.0.2:8545"</span></span>)); web3.eth.getAccounts() .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">accList</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> accList; }) .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">accounts</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> balancePromeses = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; accounts.length; i++) { balancePromeses[i] = web3.eth.getBalance(accounts[i]); } <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.all(balancePromeses).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">values</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; values.length; i++) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Account: '</span></span>, accounts[i], <span class="hljs-string"><span class="hljs-string">'balance: '</span></span>, values[i], <span class="hljs-string"><span class="hljs-string">'wei, '</span></span>, web3.utils.fromWei(values[i], <span class="hljs-string"><span class="hljs-string">'ether'</span></span>), <span class="hljs-string"><span class="hljs-string">'ether'</span></span>); } }); }) .catch(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(error); });</code> </pre> <br></div></div><br>  Você pode executar este script em um separado, por exemplo, na quarta janela do console: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># node list_accounts.js Account: 0x0C976006a5762779bA36AC590D1D8Ebac1Ca2981 balance: 3350000000000000000000 wei, 3350 ether</span></span></code> </pre><br><h2>  O que vem a seguir </h2><br>  O tópico do desenvolvimento de software para criptomoedas em geral e para o Ethereum em particular é bastante fascinante.  Se, depois de ler este artigo, você tiver perguntas e quiser saber mais, leia meu livro <a href="https://habr.com/ru/post/467347/">“Criando contratos inteligentes Solidity para a blockchain Ethereum.</a>  <a href="https://habr.com/ru/post/467347/">Guia Prático ”</a> , publicado pela <a href="https://www.litres.ru/aleksandr-frolov-198/sozdanie-smart-kontraktov-solidity-dlya-blokcheyna-et/" rel="nofollow">Liters</a> Publishing House. <br><br>  Você também pode precisar de uma boa <a href="https://habr.com/ru/company/flant/blog/336654/">folha de dicas do Docker</a> . <br><br>  Ficaria grato por quaisquer comentários e acréscimos ao artigo e ao livro! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt481052/">https://habr.com/ru/post/pt481052/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt481036/index.html">30 Utilitários para ferramentas de desenvolvedor do Firefox</a></li>
<li><a href="../pt481038/index.html">Confissão de um viciado em design. Como fizemos o jogo "IT Alchemy" em um mês</a></li>
<li><a href="../pt481042/index.html">O gosto do Django nos excita e atrai</a></li>
<li><a href="../pt481044/index.html">O que apresentar para 2020: Guia de Ano Novo Madrobots</a></li>
<li><a href="../pt481048/index.html">Reconhecimento de circuitos digitais. Elemento C generalizado</a></li>
<li><a href="../pt481054/index.html">YouTrack 2019.3: lista de tarefas atualizada e muito mais</a></li>
<li><a href="../pt481056/index.html">As principais tecnologias da década, de acordo com Habr</a></li>
<li><a href="../pt481058/index.html">Para a questão do estranho (novamente) e a escolha dos transistores</a></li>
<li><a href="../pt481066/index.html">Usando o olho de peixe no Raspberry Pi 3: lançando modelos de DL pré-treinados para visão computacional</a></li>
<li><a href="../pt481070/index.html">Versão Rust 1.40.0: # [não exaustiva], aprimoramentos de macro e outros aprimoramentos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>