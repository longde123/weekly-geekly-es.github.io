<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üàØÔ∏è ‚úåüèæ üì£ So √ºberleben Sie eine SQL-Datenbank im 21. Jahrhundert: Clouds, Kubernetes und PostgreSQL Multimaster üèÇüèº üíº üöû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habrowsk. Der Unterricht beginnt heute in der ersten Gruppe des PostgreSQL- Kurses. In diesem Zusammenhang m√∂chten wir Ihnen mitteilen, wie das ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So √ºberleben Sie eine SQL-Datenbank im 21. Jahrhundert: Clouds, Kubernetes und PostgreSQL Multimaster</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/481644/">  <i>Hallo Habrowsk.</i>  <i>Der Unterricht beginnt heute in der ersten Gruppe des <a href="https://otus.pw/nwhU/">PostgreSQL-</a> Kurses.</i>  <i>In diesem Zusammenhang m√∂chten wir Ihnen mitteilen, wie das offene Webinar f√ºr diesen Kurs stattgefunden hat.</i> <br><br><img src="https://habrastorage.org/webt/bk/dg/wb/bkdgwboms19lihcydjxhd_do6is.jpeg"><br><hr><br>  In der <a href="https://www.youtube.com/watch%3Fv%3DyiXP8ihL2eA">n√§chsten offenen Lektion</a> sprachen <a href="https://www.youtube.com/watch%3Fv%3DyiXP8ihL2eA">wir</a> dar√ºber, welchen Herausforderungen SQL-Datenbanken im Zeitalter von Clouds und Kubernetes ausgesetzt waren.  Gleichzeitig haben wir untersucht, wie sich SQL-Datenbanken unter dem Einfluss dieser Aufrufe anpassen und ver√§ndern. <br><br>  Das Webinar wurde von <a href="https://otus.pw/IVe0/">Valery Bezrukov</a> , Google Cloud Practice Delivery Manager bei EPAM Systems, moderiert. <a name="habracut"></a><br><br><h3>  Als die B√§ume klein waren ... </h3><br>  Lassen Sie uns zun√§chst daran erinnern, wie die Auswahl eines DBMS Ende des letzten Jahrhunderts begann.  Dies wird jedoch nicht schwierig sein, da die Auswahl eines DBMS in jenen Tagen mit <b>Oracle</b> begann und endete. <br><br><img src="https://habrastorage.org/webt/za/ro/ub/zaroubp-wzhpvdvm8umssbidsde.png"><br><br>  In den sp√§ten 90er Jahren - Anfang der 90er Jahre - gab es tats√§chlich keine besondere Wahl, wenn wir √ºber industriell skalierbare Datenbanken sprechen.  Ja, es gab IBM DB2, Sybase und einige andere Datenbanken, die erschienen und verschwanden, aber im Allgemeinen waren sie f√ºr Oracle nicht so auff√§llig.  Dementsprechend waren die F√§higkeiten der damaligen Ingenieure in gewisser Weise an die einzige Wahl gebunden, die es gab. <br><br>  Oracle DBA sollte in der Lage sein: <br><br><ul><li>  Installieren Sie Oracle Server von der Distribution </li><li>  Oracle Server konfigurieren: </li></ul><br><ul><li>  init.ora; </li><li>  listener.ora; </li></ul><br>  - erstelle: <br><br><ul><li>  Tabellenbereiche </li><li>  Schemata </li><li>  Benutzer </li></ul><br><br>  - sichern und wiederherstellen; <br>  - √úberwachung durchf√ºhren; <br>  - mit suboptimalen Anforderungen umgehen. <br><br>  Gleichzeitig war Oracle DBA nicht besonders erforderlich: <br><br><ul><li>  in der Lage sein, das optimale DBMS oder eine andere Datenspeicherungs- und -verarbeitungstechnologie auszuw√§hlen; </li><li>  Bereitstellung von hoher Verf√ºgbarkeit und horizontaler Skalierbarkeit (dies war nicht immer ein DBA-Problem); </li><li>  Gute Kenntnisse des Fachgebiets, der Infrastruktur, der angewandten Architektur, des Betriebssystems; </li><li>  Laden und Entladen von Daten durchf√ºhren, Datenmigration zwischen verschiedenen DBMS. </li></ul><br><br>  Wenn wir in jenen Tagen √ºber die Wahl sprechen, dann √§hnelt sie im Allgemeinen einer Wahl in einem sowjetischen Gesch√§ft Ende der 80er Jahre: <br><br><img src="https://habrastorage.org/webt/u-/ue/hx/u-uehxpuynbhmzgj78jqebims2o.png"><br><br><h3>  Unsere Zeit </h3><br>  Seitdem sind nat√ºrlich die B√§ume gewachsen, die Welt hat sich ver√§ndert und es ist irgendwie so geworden: <br><br><img src="https://habrastorage.org/webt/l_/-p/0a/l_-p0anmxny8o64hqnymm3jlow4.png"><br><br>  Auch der DBMS-Markt hat sich ver√§ndert. Dies geht aus dem aktuellen Gartner-Bericht deutlich hervor: <br><br><img src="https://habrastorage.org/webt/mr/r9/xv/mrr9xvkcwao2s8uf3oukwzdfiz4.png"><br><br>  Und hier ist anzumerken, dass die Wolken ihre Nische besetzten, deren Popularit√§t w√§chst.  Wenn Sie denselben Gartner-Bericht lesen, sehen wir die folgenden Schlussfolgerungen: <br><br><ol><li>  Viele Kunden sind unterwegs, um Anwendungen in die Cloud zu verlagern. </li><li>  Neue Technologien tauchen zuerst in der Cloud auf und nicht die Tatsache, dass sie jemals auf eine cloudfreie Infrastruktur umsteigen werden. </li><li>  Das Preismodell f√ºr umlagefinanzierte Produkte ist bekannt geworden.  Jeder m√∂chte nur f√ºr das bezahlen, was er nutzt, und dies ist nicht einmal ein Trend, sondern lediglich eine Tatsachenfeststellung. </li></ol><br><h3>  Was jetzt? </h3><br>  Heute sind wir alle in der Cloud.  Und diese Fragen, die wir haben, sind Fragen der Wahl.  Und es ist riesig, auch wenn wir nur √ºber die Auswahl der DBMS-Technologien im lokalen Format sprechen.  Wir haben auch Services und SaaS verwaltet.  Daher wird die Auswahl von Jahr zu Jahr komplizierter. <br><br>  Neben <b>den Wahlfragen</b> gelten auch <b>restriktive Faktoren</b> : <br><br><ul><li>  <b>der Preis</b> .  Viele Technologien kosten immer noch Geld; </li><li>  <b>F√§higkeiten</b> .  Wenn es sich um freie Software handelt, stellt sich die Frage nach den F√§higkeiten, denn freie Software erfordert Menschen, die sie mit ausreichender Kompetenz einsetzen und betreiben. </li><li>  <b>funktionell</b> .  Nicht alle Dienste, die in der Cloud verf√ºgbar sind und beispielsweise auf der Grundlage derselben Postgres erstellt wurden, verf√ºgen √ºber dieselben Funktionen wie Postgres On-Premises.  Dies ist ein wesentlicher Faktor, den Sie kennen und verstehen m√ºssen.  Dar√ºber hinaus wird dieser Faktor wichtiger als die Kenntnis einiger verborgener Merkmale eines einzelnen DBMS. </li></ul><br>  <b>Worauf warten die DA / DE:</b> <br><br><ul><li>  ein gutes Verst√§ndnis des Fachgebiets und der angewandten Architektur; </li><li>  die F√§higkeit, die richtige DBMS-Technologie auszuw√§hlen, unter Ber√ºcksichtigung der Aufgabe; </li><li>  die M√∂glichkeit, die optimale Methode f√ºr die Implementierung der ausgew√§hlten Technologie im Kontext der bestehenden Einschr√§nkungen auszuw√§hlen </li><li>  F√§higkeit zur Datenmigration und -migration; </li><li>  die F√§higkeit, die ausgew√§hlten L√∂sungen zu implementieren und zu betreiben. </li></ul><br>  Das folgende <b>auf GCP basierende</b> Beispiel zeigt, wie die Auswahl einer bestimmten Technologie f√ºr die Arbeit mit Daten in Abh√§ngigkeit von ihrer Struktur angeordnet ist: <br><br><img src="https://habrastorage.org/webt/yx/pp/dh/yxppdhmwfv2mz70myzv_lht2ni4.png"><br><br>  Beachten Sie, dass PostgreSQL im Schema fehlt, und zwar nur, weil es sich unter der Terminologie von <b>Cloud SQL verbirgt</b> .  Und wenn wir in Cloud SQL einsteigen, m√ºssen wir erneut eine Wahl treffen: <br><br><img src="https://habrastorage.org/webt/ck/qr/hx/ckqrhx_1ckivxigooielk8zwwf4.png"><br><br>  Es sollte beachtet werden, dass diese Wahl nicht immer klar ist, daher lassen sich Anwendungsentwickler oft von der Intuition leiten. <br><br>  <b>Gesamt:</b> <br><br><ol><li>  Je weiter entfernt, desto relevanter ist die Frage der Wahl.  Und selbst wenn Sie sich nur GCP, Managed Services und SaaS ansehen, wird RDBMS erst im vierten Schritt erw√§hnt (und es gibt Spanner in der N√§he).  Au√üerdem wird die Auswahl von PostgreSQL im Allgemeinen im f√ºnften Schritt angezeigt, und daneben gibt es auch MySQL und SQL Server, das hei√üt, es gibt <b>eine Menge, aber Sie m√ºssen ausw√§hlen</b> . </li><li>  Wir d√ºrfen die Beschr√§nkungen des Hintergrunds von Versuchungen nicht vergessen.  Meistens will jeder einen Schraubenschl√ºssel, aber es ist teuer.  Infolgedessen sieht eine typische Abfrage folgenderma√üen aus: <i>"Bitte machen Sie Spanner f√ºr uns, aber f√ºr den Preis von Cloud SQL sind Sie Profis!"</i> </li></ol><br><img src="https://habrastorage.org/webt/lr/ea/fn/lreafntu62cx39itddembcwmdak.jpeg"><br><br><h3>  Was zu tun </h3><br>  Sagen wir Folgendes, ohne vorzut√§uschen, die ultimative Wahrheit zu sein: <br><br>  <b>Notwendigkeit, den Lernansatz zu √§ndern:</b> <br><br><ul><li>  zu lernen, wie es vor DBA gelehrt wurde, macht keinen Sinn; </li><li>  Die Kenntnis eines Produkts reicht nicht mehr aus. </li><li>  Aber Dutzende auf der Ebene eines Menschen zu kennen, ist unm√∂glich. </li></ul><br>  Sie m√ºssen nicht nur wissen, wie viel das Produkt kostet, sondern auch: <br><br><ul><li>  Anwendungsfall; </li><li>  verschiedene Bereitstellungsmethoden; </li><li>  Vor- und Nachteile jeder Methode; </li><li>  √§hnliche und alternative Produkte, um fundierte und optimale Entscheidungen zu treffen, und nicht immer zugunsten eines vertrauten Produkts. </li></ul><br>  Sie m√ºssen auch in der Lage sein, Daten zu migrieren und die Grundprinzipien der Integration in ETL zu verstehen. <br><br><h3>  Wirklicher Fall </h3><br>  In der j√ºngeren Vergangenheit mussten Sie ein Backend f√ºr eine mobile Anwendung erstellen.  Zu Beginn der Arbeit war das Backend bereits entwickelt und bereit zur Implementierung, und das Entwicklerteam verbrachte ungef√§hr zwei Jahre mit diesem Projekt.  Folgende Aufgaben wurden gestellt: <br><br><ul><li>  Build CI / CD; </li><li>  Architektur zu √ºberpr√ºfen; </li><li>  alles in betrieb nehmen. </li></ul><br>  Die Anwendung selbst war Microservice, und der Python / Django-Code wurde von Grund auf und sofort in GCP entwickelt.  F√ºr die Zielgruppe wurde angenommen, dass es zwei Regionen geben w√ºrde - USA und EU, und der Verkehr wurde √ºber den Global Load Balancer verteilt.  Alle Workloads und Computer-Workloads wurden in der Google Kubernetes Engine ausgef√ºhrt. <br><br>  Zu den Daten gab es 3 Strukturen: <br><br><ul><li>  Cloud-Speicher </li><li>  Datenspeicher; </li><li>  Cloud SQL (PostgreSQL). </li></ul><br><img src="https://habrastorage.org/webt/9c/n8/xn/9cn8xnhmpxyfxzoqvh86nqle8bo.png"><br><br>  Sie fragen sich vielleicht, warum Cloud SQL ausgew√§hlt wurde?  Um ehrlich zu sein, hat eine solche Frage in den letzten Jahren einige unangenehme Pausen verursacht - es besteht das Gef√ºhl, dass die Leute anfingen, relationale Datenbanken zu scheuen, sie aber weiterhin aktiv nutzen ;-). <br><br>  F√ºr unseren Fall wurde Cloud SQL aus folgenden Gr√ºnden gew√§hlt: <br><br><ol><li>  Wie bereits erw√§hnt, wurde die Anwendung mit Django entwickelt und verf√ºgt √ºber ein Modell f√ºr die Zuordnung persistenter Daten aus einer SQL-Datenbank zu Python-Objekten (Django ORM). </li><li>  Das Framework selbst unterst√ºtzte eine ziemlich begrenzte Liste von DBMSs: </li></ol><br><ul><li>  PostgreSQL </li><li>  MariaDB; </li><li>  MySQL </li><li>  Oracle </li><li>  SQLite </li></ul><br>  Dementsprechend wurde PostgreSQL intuitiv aus dieser Liste ausgew√§hlt (tats√§chlich handelt es sich nicht um Oracle). <br><br>  <b>Was fehlte:</b> <br><br><ul><li>  Die Anwendung wurde nur in zwei Regionen bereitgestellt, und die Pl√§ne wurden an dritter Stelle (Asien) aufgef√ºhrt. </li><li>  Die Datenbank befand sich in der nordamerikanischen Region (Iowa); </li><li>  Seitens des Kunden bestanden Bedenken hinsichtlich m√∂glicher <b>Verz√∂gerungen beim Zugang</b> aus Europa und Asien sowie <b>Betriebsunterbrechungen</b> im Falle einer DBMS-Ausfallzeit. </li></ul><br>  Obwohl Django selbst mit mehreren Datenbanken parallel arbeiten und diese durch Lesen und Schreiben teilen kann, enth√§lt die Anwendung nicht so viele Datens√§tze (mehr als 90% - Lesen).  Und im Allgemeinen und wenn Sie eine <b>Kopie der Hauptbasis in Europa und Asien</b> erstellen k√∂nnten, w√§re dies eine Kompromissl√∂sung.  Nun, was ist so kompliziert? <br><br>  Die Schwierigkeit bestand darin, dass der Kunde die Verwendung von Managed Services und Cloud SQL nicht ablehnen wollte.  Und die M√∂glichkeiten von Cloud SQL sind derzeit begrenzt.  Cloud SQL unterst√ºtzt Hochverf√ºgbarkeit (HA) und Read Replica (RR), dieselbe RR wird jedoch nur in einer Region unterst√ºtzt.  Nachdem eine Datenbank in der amerikanischen Region erstellt wurde, ist es unm√∂glich, in der europ√§ischen Region mithilfe von Cloud SQL eine Lesereplik zu erstellen, obwohl Postgres selbst keine Interferenzen verursacht.  Die Korrespondenz mit Google-Mitarbeitern f√ºhrte zu nichts und endete mit Versprechungen im Stil von "Wir kennen das Problem und arbeiten daran, eines Tages wird das Problem behoben sein." <br><br>  Wenn Sie die Thesis-M√∂glichkeiten von Cloud SQL auflisten, sieht es ungef√§hr so ‚Äã‚Äãaus: <br><br>  <b>1. Hochverf√ºgbarkeit (HA):</b> <br><br><ul><li>  innerhalb einer Region; </li><li>  durch Festplattenreplikation </li><li>  PostgreSQL-Mechanismen werden nicht verwendet. </li><li>  automatische und manuelle Steuerung m√∂glich - Failover / Failback; </li><li>  Beim Umschalten ist das DBMS f√ºr einige Minuten nicht verf√ºgbar. </li></ul><br>  <b>2. Replikat (RR) lesen:</b> <br><br><ul><li>  innerhalb einer Region; </li><li>  hei√üer Standby; </li><li>  PostgreSQL-Streaming-Replikation. </li></ul><br>  Au√üerdem st√∂√üt man bei der Auswahl einer Technologie wie √ºblich auf einige <b>Einschr√§nkungen</b> : <br><br><ul><li>  Der Kunde wollte keine Einheiten produzieren und IaaS verwenden, au√üer √ºber GKE. </li><li>  Der Kunde m√∂chte kein PostgreSQL / MySQL-Self-Service-System bereitstellen. </li><li>  Im Allgemeinen w√§re Google Spanner durchaus geeignet, wenn es nicht f√ºr seinen Preis geeignet w√§re. Django ORM kann jedoch nicht damit arbeiten. Die Sache ist also gut. </li></ul><br>  In Anbetracht der Situation erhielt der Kunde eine Auff√ºllfrage: <i>"K√∂nnen Sie etwas √Ñhnliches tun, um es wie Google Spanner zu machen, aber es funktioniert auch mit Django ORM?"</i> <br><br><h3>  Option Nr. 0 </h3><br>  Das erste, was mir in den Sinn kam: <br><br><ul><li>  Bleiben Sie in CloudSQL </li><li>  Es wird keine integrierte Replikation zwischen Regionen in irgendeiner Form geben. </li><li>  Versuchen Sie, das Replikat mit PostgreSQL in die vorhandene Cloud-SQL zu integrieren. </li><li>  irgendwo und irgendwie die PostgreSQL-Instanz starten, aber zumindest Master nicht ber√ºhren. </li></ul><br>  Leider stellte sich heraus, dass dies nicht m√∂glich ist, da es keinen Zugriff auf den Host gibt (es befindet sich im Allgemeinen in einem anderen Projekt) - pg_hba und so weiter, und es gibt immer noch keinen Zugriff unter Superuser. <br><br><h3>  Option Nr. 1 </h3><br>  Nach weiterer √úberlegung und unter Ber√ºcksichtigung der bisherigen Umst√§nde √§nderte sich der Gedankengang etwas: <br><br><ul><li>  Wir versuchen immer noch, im Rahmen von CloudSQL zu bleiben, aber wir wechseln zu MySQL, da Cloud SQL von MySQL einen externen Master hat, der: </li></ul><br>  - ist ein Proxy f√ºr externes MySQL; <br>  - sieht aus wie eine MySQL-Instanz; <br>  - Erfunden f√ºr die Datenmigration aus anderen Clouds oder vor Ort. <br><br>  Da f√ºr die Einrichtung der MySQL-Replikation kein Zugriff auf den Host erforderlich ist, hat im Grunde alles funktioniert, ist aber sehr instabil und unpraktisch.  Und als wir weitergingen, wurde es v√∂llig be√§ngstigend, weil wir die gesamte Struktur mit Terraform bereitstellten, und pl√∂tzlich stellte sich heraus, dass der externe Master nicht von Terraform unterst√ºtzt wurde.  Ja, Google hat eine CLI, aber aus irgendeinem Grund hat ab und zu alles funktioniert - es wurde erstellt, es wird nicht erstellt.  Vielleicht, weil die CLI f√ºr die Datenmigration au√üerhalb und nicht f√ºr Replikate erfunden wurde. <br><br>  Tats√§chlich hat dies deutlich gemacht, dass Cloud SQL √ºberhaupt nicht zum Wort passt.  Wie sie sagen, wir haben alles getan, was wir konnten. <br><br><h3>  Option 2 </h3><br>  Da es nicht funktionierte, in Cloud SQL zu bleiben, haben wir versucht, Anforderungen f√ºr eine Kompromissl√∂sung zu formulieren.  Die Anforderungen waren wie folgt: <br><br><ul><li>  Arbeit in Kubernetes, maximale Nutzung der Ressourcen und F√§higkeiten von Kubernetes (DCS, ...) und GCP (LB, ...); </li><li>  das Fehlen von Ballast von einem Haufen unn√∂tiger Dinge in der Cloud wie einem HA-Proxy; </li><li>  die F√§higkeit, HA PostgreSQL oder MySQL in der Hauptregion auszuf√ºhren;  in anderen Regionen - HA aus dem RR der Hauptregion plus seiner Kopie (aus Gr√ºnden der Zuverl√§ssigkeit); </li><li>  multi master (wollte ihn nicht kontaktieren, war aber nicht sehr wichtig) </li></ul>  . <br>  Infolge dieser Anforderungen tauchten am Horizont endlich <b>geeignete DBMS-Optionen und -Bindungen auf</b> : <br><br><ul><li>  MySQL Galera; </li><li>  CockroachDB; </li><li>  PostgreSQL-Werkzeuge </li></ul>  : <br>  - pgpool-II; <br>  - Patroni. <br><br><h3>  MySQL Galera </h3><br>  Die MySQL Galera-Technologie wurde von Codership entwickelt und ist ein Plugin f√ºr InnoDB.  Eigenschaften: <br><br><ul><li>  Multi-Master; </li><li>  synchrone Replikation </li><li>  Lesen von einem beliebigen Knoten; </li><li>  auf einen beliebigen Knoten aufnehmen; </li><li>  integrierter HA-Mechanismus; </li><li>  Es gibt eine Helmkarte von Bitnami. </li></ul><br><h3>  K√ºchenschabe </h3><br>  Laut Beschreibung ist das Ding v√∂llig bombastisch und ein Open Source-Projekt, das in Go geschrieben wurde.  Der Hauptteilnehmer ist Cockroach Labs (gegr√ºndet von Einwanderern von Google).  Dieses relationale DBMS wurde urspr√ºnglich zur Verteilung (mit horizontaler Skalierung) und Fehlertoleranz erstellt.  Die Autoren des Unternehmens skizzierten das Ziel, "den Reichtum der SQL-Funktionalit√§t mit der horizontalen Verf√ºgbarkeit zu kombinieren, die NoSQL-L√∂sungen vertraut sind". <br><br>  Der nette Bonus ist die Unterst√ºtzung des Postgres-Verbindungsprotokolls. <br><br><h3>  Pgpool </h3><br>  Dies ist ein Add-On f√ºr PostgreSQL, eine neue Entit√§t, die alle Verbindungen √ºbernimmt und verarbeitet.  Es verf√ºgt √ºber einen eigenen Loader Balancer und Parser, die unter der BSD-Lizenz lizenziert sind.  Es bietet viele M√∂glichkeiten, sieht jedoch etwas be√§ngstigend aus, da die Anwesenheit einer neuen Einheit eine Quelle zus√§tzlicher Abenteuer werden k√∂nnte. <br><br><h3>  Patroni </h3><br>  Dies ist das Letzte, worauf das Auge fiel, und wie sich herausstellte, nicht umsonst.  Patroni ist ein Open Source-Dienstprogramm, bei dem es sich im Wesentlichen um einen Python-Daemon handelt, der PostgreSQL-Cluster mit verschiedenen Replikationsarten und automatischem Rollenwechsel automatisch verwaltet.  Das St√ºck erwies sich als sehr interessant, da es sich gut in die Cuber integriert und keine neuen Entit√§ten tr√§gt. <br><br><h3>  Was w√§hlte letztendlich </h3><br>  Die Wahl war nicht einfach: <br><br><ol><li>  <b>CockroachDB</b> - Feuer, aber dumm; </li><li>  <b>MySQL Galera</b> ist auch nicht schlecht, es wird viel benutzt, aber MySQL; </li><li>  <b>Pgpool</b> - viele zus√§tzliche Entit√§ten, so lala Integration mit der Cloud und K8s; </li><li>  <b>Patroni</b> - Hervorragende Integration mit K8s, keine zus√§tzlichen Einheiten, l√§sst sich gut in die GCP LB integrieren. </li></ol><br>  Somit fiel die Wahl auf Patroni. <br><br><h3>  Schlussfolgerungen </h3><br>  Die Zeit ist gekommen, um zusammenzufassen.  Ja, die Welt der IT-Infrastruktur hat sich erheblich ver√§ndert, und dies ist nur der Anfang.  Und wenn Clouds fr√ºher nur eine andere Art von Infrastruktur waren, ist jetzt alles anders.  Dar√ºber hinaus tauchen st√§ndig Innovationen in den Wolken auf, und sie tauchen m√∂glicherweise nur in den Wolken auf, und erst dann werden sie durch die Kr√§fte von Start-ups auf die lokalen Standorte √ºbertragen. <br><br>  Wie f√ºr SQL wird SQL leben.  Dies bedeutet, dass PostgreSQL und MySQL bekannt sein m√ºssen und Sie in der Lage sein m√ºssen, mit ihnen zu arbeiten, aber vor allem, um sie korrekt anwenden zu k√∂nnen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de481644/">https://habr.com/ru/post/de481644/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de481630/index.html">Die besten n√ºtzlichen Tools und Ressourcen, um ein Startup im Jahr 2019 intelligenter zu machen</a></li>
<li><a href="../de481632/index.html">Cloud-Anbieter: Wer ist der Sch√∂nste auf dem Markt?</a></li>
<li><a href="../de481634/index.html">Food Design Digest, November 2019</a></li>
<li><a href="../de481638/index.html">Warum 3D-Modelle komplexer Produktion n√ºtzlich sind</a></li>
<li><a href="../de481640/index.html">Ver√∂ffentlichung der neuen Version des DevOpsProdigy KubeGraf Plugins</a></li>
<li><a href="../de481648/index.html">Junos PyEZ am Beispiel der Aufgabe, freie ipv4-Subnetze zu finden</a></li>
<li><a href="../de481652/index.html">Backdoor (?) Auf BlackBerry Android-Smartphones</a></li>
<li><a href="../de481654/index.html">Die Geschichte, wie Ihnen QA Engineer mithilfe von Test IT mithilfe des Bot Frameworks das Leben erleichtert hat</a></li>
<li><a href="../de481656/index.html">PagerDuty oder warum die Operationsabteilung nachts m√∂glicherweise nicht schl√§ft</a></li>
<li><a href="../de481662/index.html">Erprobung neuer Tools zum Erstellen und Automatisieren der Bereitstellung in Kubernetes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>