<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõÑ ‚õìÔ∏è ü§æüèø Python comme cas ultime de C ++. Partie 1/2 üóΩ ü§∂üèº ü§õüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Du traducteur 

 Brandon Rhodes est une personne tr√®s modeste qui se pr√©sente sur Twitter comme "un programmeur Python qui rembourse un pr√™t √† la comm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Python comme cas ultime de C ++. Partie 1/2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464385/"><div class="spoiler">  <b class="spoiler_title">Du traducteur</b> <div class="spoiler_text"><p>  Brandon Rhodes est une personne tr√®s modeste qui se pr√©sente sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Twitter</a> comme "un programmeur Python qui rembourse un pr√™t √† la communaut√© sous forme de rapports ou d'essais".  Le nombre de ces ¬´rapports et essais¬ª est impressionnant, tout comme le nombre de projets gratuits auxquels Brandon a contribu√© ou contribue.  Et Brandon a publi√© deux livres et en √©crit un troisi√®me. </p><br><p>  Je trouve tr√®s souvent dans les commentaires sur Habr√© une incompr√©hension ou un rejet fondamental des langages dynamiques, du typage dynamique, de la programmation g√©n√©ralis√©e et d'autres paradigmes.  Je publie cette traduction (transcription) autoris√©e (abr√©g√©e) d'un des rapports de Brandon dans l'espoir qu'elle aidera les programmeurs existant dans les paradigmes des langages statiques √† mieux comprendre les langages dynamiques, en particulier Python. </p><br><p>  Comme d'habitude chez moi, je vous demande de m'informer en PM de mes fautes et fautes de frappe. </p></div></div><br><p> Que signifie l'expression ¬´cas marginal¬ª dans le titre de mon rapport?  Le cas limite se pr√©sente lorsque vous parcourez une s√©quence d'options jusqu'√† atteindre la valeur extr√™me.  Par exemple, un polygone √† n c√¥t√©s.  Si n = 3, alors c'est un triangle, n = 4 est un quadrilat√®re, n = 5 est un pentagone, etc. √Ä mesure que n approche de l'infini, les c√¥t√©s deviennent de plus en plus petits et le contour du polygone devient comme un cercle.  Ainsi, le cercle est le cas limite pour les polygones r√©guliers.  C'est ce qui arrive lorsqu'une certaine id√©e est amen√©e √† sa limite. </p><br><p>  Je veux parler de Python comme un cas extr√™me pour C ++.  Si vous prenez toutes les bonnes id√©es de C ++ et les nettoyez jusqu'√† leur conclusion logique, je suis s√ªr que vous vous retrouverez avec Python aussi naturellement qu'une s√©rie de polygones se mettra en cercle. </p><a name="habracut"></a><br><h1>  Actifs non essentiels </h1><br><p> Je me suis int√©ress√© √† Python dans les ann√©es 90: c'√©tait une p√©riode de ma vie o√π je me suis d√©barrass√© des ¬´actifs non essentiels¬ª, comme je l'appelle.  Beaucoup de choses ont commenc√© √† m'ennuyer.  Les interruptions, par exemple.  Rappelez-vous, une fois sur de nombreuses cartes informatiques, il y avait de tels contacts avec des cavaliers?  Et vous placez ces cavaliers sur les manuels pour que la carte vid√©o re√ßoive une interruption de priorit√© plus √©lev√©e, pour que votre jeu s'ex√©cute plus rapidement?  Donc, j'√©tais fatigu√© d'allouer et de lib√©rer de la m√©moire en utilisant <code>malloc()</code> et <code>free()</code> pr√®s au m√™me moment o√π j'ai arr√™t√© d'ajuster les performances de mon ordinateur avec des cavaliers.  C'√©tait en 1997 environ. </p><br><p>  Je veux dire, lorsque nous √©tudions un processus, nous nous effor√ßons g√©n√©ralement d'en obtenir un contr√¥le complet, d'avoir √† port√©e de main tous les leviers et boutons possibles.  Ensuite, certaines personnes sont toujours fascin√©es par cette possibilit√© de contr√¥le.  Mais mon caract√®re est que, d√®s que je m'habitue √† la gestion et que je comprends ce qui est quoi, je commence imm√©diatement √† chercher l'opportunit√© de renoncer √† certains de mes pouvoirs, de transf√©rer des leviers et des boutons sur une machine afin qu'elle m'assigne des interruptions. </p><br><p>  Par cons√©quent, √† la fin des ann√©es 90, je cherchais un langage de programmation qui me permettrait de me concentrer sur le domaine et la mod√©lisation des t√¢ches, plut√¥t que de me demander dans quelle zone de la m√©moire de l'ordinateur mes donn√©es √©taient stock√©es.  Comment pouvons-nous simplifier le C ++ sans r√©p√©ter les p√©ch√©s des langages de script c√©l√®bres? </p><br><p>  Par exemple, je ne pouvais pas utiliser Perl, et vous savez pourquoi?  Ce signe dollar!  Il a imm√©diatement pr√©cis√© que le cr√©ateur de Perl ne comprenait pas le fonctionnement des langages de programmation.  Vous utilisez le dollar dans Bash pour s√©parer les noms de variables du reste de la cha√Æne, car un programme Bash se compose litt√©ralement de commandes per√ßues et de leurs param√®tres.  Mais apr√®s avoir appris √† conna√Ætre ces langages de programmation, dans lesquels les cha√Ænes sont plac√©es entre des paires de petits caract√®res appel√©s guillemets, et non tout au long du texte du programme, vous commencez √† percevoir <code>$</code> comme une ordure visuelle.  Le signe dollar est inutile, c'est moche, il faut y aller!  Si vous souhaitez concevoir un langage pour une programmation s√©rieuse, vous ne devez pas utiliser de caract√®res sp√©ciaux pour indiquer des variables. </p><br><h1>  Syntaxe </h1><br><p>  Et la syntaxe?  Prenez C comme base!  Cela fonctionne plut√¥t bien.  Que l'affectation soit d√©sign√©e par un signe √©gal.  Cette d√©signation n'est pas accept√©e dans toutes les langues, mais d'une mani√®re ou d'une autre, beaucoup y sont habitu√©s.  Mais ne faisons pas de l'affectation une expression.  Les utilisateurs de notre langue ne seront pas seulement des programmeurs professionnels, mais aussi des √©coliers, des scientifiques ou des scientifiques des donn√©es (si vous ne savez pas laquelle de ces cat√©gories d'utilisateurs √©crit le pire code, alors je ferai allusion que ce ne sont pas des √©coliers).  Nous ne donnerons pas aux utilisateurs la possibilit√© de changer l'√©tat des variables dans des endroits inattendus, et nous ferons de l'affectation un op√©rateur. </p><br><p>  Que faut-il alors utiliser pour d√©noter l'√©galit√© si le signe √©gal a d√©j√† √©t√© utilis√© pour l'affectation?  Bien s√ªr, double affectation, comme cela se fait en C!  Beaucoup y sont d√©j√† habitu√©s.  Nous emprunterons √©galement √† C la notation pour toutes les op√©rations arithm√©tiques et au niveau du bit, car ces notations fonctionnent et beaucoup en sont tr√®s satisfaites. </p><br><p>  Bien s√ªr, nous pouvons am√©liorer quelque chose.  Que pensez-vous lorsque vous voyez le signe de pourcentage dans le texte du programme?  √Ä propos de l'interpolation de cha√Ænes, bien s√ªr!  Bien que <code>%</code> soit principalement un op√©rateur de capture de module, il n'√©tait tout simplement pas d√©fini pour les cha√Ænes.  Et si oui, alors pourquoi ne pas le r√©utiliser? </p><br><p>  Litt√©raux num√©riques et cha√Ænes qui contr√¥lent les s√©quences avec des barres obliques inverses - tout cela ressemblera √† C. </p><br><p>  Contr√¥le du flux d'ex√©cution?  La m√™me chose <code>if</code> , <code>else</code> , <code>while</code> , <code>break</code> et <code>continue</code> .  Bien s√ªr, nous ajouterons un peu de plaisir en cooptant le bon vieux <code>for</code> parcourir les structures de donn√©es et les plages de valeurs.  Cela sera propos√© plus tard en C ++ 11, mais en Python, l'op√©rateur <code>for</code> initialement encapsul√© toutes les op√©rations pour calculer les tailles, parcourir les liens, incr√©menter le compteur, etc., en d'autres termes, faire tout ce qui √©tait n√©cessaire pour fournir √† l'utilisateur un √©l√©ment de la structure de donn√©es.  Quel type de structures?  Cela n'a pas d'importance, il suffit de le transmettre, il le comprendra. </p><br><p>  Nous emprunterons √©galement des exceptions √† C ++, mais nous les rendrons si bon march√© en termes de consommation de ressources qu'elles peuvent √™tre utilis√©es non seulement pour g√©rer les erreurs, mais aussi pour contr√¥ler le flux d'ex√©cution.  Nous rendrons l'indexation plus int√©ressante en ajoutant le d√©coupage - la capacit√© d'indexer non seulement les √©l√©ments individuels des structures de donn√©es s√©quentielles, mais aussi leurs plages. </p><br><p>  Oh oui!  Nous allons corriger le d√©faut de conception d'origine en C - ajoutez une virgule pendante! </p><br><p>  Cette histoire a commenc√© avec Pascal, un langage terrible dans lequel un point-virgule est utilis√© comme <em>d√©limiteur d'</em> expression.  Cela signifie que l'utilisateur doit mettre un point-virgule √† la fin de <em>chaque</em> expression dans le bloc <em>sauf la derni√®re</em> .  Par cons√©quent, chaque fois que vous modifiez l'ordre des expressions dans un programme en Pascal, vous risquez de recevoir une erreur de syntaxe si vous ne vous assurez pas de supprimer le point-virgule de la derni√®re ligne et de l'ajouter √† la fin de la ligne qui √©tait la derni√®re. </p><br><pre> <code class="plaintext hljs">If (n = 0) then begin writeln('N is now zero'); func := 1 end</code> </pre> <br><p>  Kernigan et Ritchie ont fait ce qu'il fallait lorsqu'ils ont d√©fini le point-virgule en C comme le <em>terminateur de l'</em> expression, plut√¥t que le d√©limiteur, cr√©ant cette merveilleuse sym√©trie lorsque chaque ligne du programme, y compris la derni√®re, se termine de la m√™me mani√®re et peut √™tre librement √©chang√©e.  Malheureusement, √† l'avenir, un sentiment d'harmonie a chang√© pour eux, et ils ont fait de la virgule un <em>s√©parateur</em> dans les initialiseurs statiques.  Cela semble bien lorsque l'expression tient sur une seule ligne: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a[] = {<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>};</code> </pre> <br><p>  mais lorsque votre initialiseur s'allonge et que vous l'arrangez verticalement, vous obtenez la m√™me asym√©trie inconfortable qu'en Pascal: </p><br><pre> <code class="plaintext hljs">int a[] = { 4, 5, 6 };</code> </pre> <br><p>  √Ä un stade pr√©coce de son d√©veloppement, Python a rendu la virgule suspendue dans les structures de donn√©es compl√®tement facultative, quelle que soit la disposition des √©l√©ments de cette structure: horizontalement ou verticalement.  Soit dit en passant, cela est tr√®s pratique pour la g√©n√©ration automatique de code: vous n'avez pas besoin de traiter le dernier √©l√©ment comme un cas sp√©cial. </p><br><p>  Plus tard, les normes C99 et C ++ 11 ont √©galement corrig√© le malentendu initial, vous permettant d'ajouter une virgule apr√®s le dernier litt√©ral dans l'initialiseur. </p><br><h1>  Espaces de noms </h1><br><p>  Nous devons √©galement impl√©menter dans notre langage de programmation une chose telle que les espaces de noms ou les espaces de noms.  C'est une partie critique du langage qui devrait nous √©viter des erreurs comme les conflits de noms.  Nous le ferons plus facilement que C ++: au lieu de donner √† l'utilisateur la possibilit√© de nommer arbitrairement un espace de noms, nous allons cr√©er un espace de noms par module (fichier) et les d√©signer avec des noms de fichiers.  Par exemple, si vous cr√©ez le module <code>foo.py</code> , l'espace de noms <code>foo</code> lui sera attribu√©. </p><br><p>  Pour travailler avec un tel mod√®le simplifi√© d'espaces de noms, un utilisateur n'a besoin que d'un seul op√©rateur. </p><br><p>  Cr√©ez le r√©pertoire <code>my_package</code> , placez-y le fichier <code>my_module.py</code> et d√©clarez la classe dans le fichier: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> READ = <span class="hljs-number"><span class="hljs-number">1</span></span> WRITE = <span class="hljs-number"><span class="hljs-number">2</span></span></code> </pre> <br><p>  alors l'acc√®s aux attributs de classe sera le suivant: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> my_package.my_module my_package.my_module.C.READ</code> </pre> <br><p>  Ne vous inqui√©tez pas, nous n'obligerons pas l'utilisateur √† imprimer le nom complet √† chaque fois.  Nous lui donnerons l'opportunit√© d'utiliser plusieurs versions de l'instruction <code>import</code> pour varier le degr√© de ¬´proximit√©¬ª de l'espace de noms: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> my_package.my_module my_package.my_module.C.READ <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> my_package <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> my_module my_module.C.READ <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> my_package.my_module <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> C C.READ</code> </pre> <br><p>  Ainsi, les m√™mes noms donn√©s dans diff√©rents packages ne seront jamais en conflit: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json j = json.load(file) <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pickle p = pickle.load(file)</code> </pre> <br><p>  Le fait que chaque module poss√®de son propre espace de noms signifie √©galement que nous n'avons pas besoin d'un modificateur <code>static</code> .  Cependant, nous rappelons une fonction que <code>static</code> effectu√©e - encapsulant des variables internes.  Pour montrer √† vos coll√®gues qu'un nom donn√© (variable, classe ou module) n'est pas public, nous le commen√ßons par un trait de soulignement, par exemple, <code>_ignore_this</code> .  Cela peut √©galement √™tre un signal pour l'IDE de ne pas utiliser ce nom dans l'auto-compl√©tion. </p><br><h1>  Surcharge de fonction </h1><br><p>  Nous n'impl√©menterons pas de surcharge de fonction dans notre langage.  Le m√©canisme de surcharge est trop compliqu√©.  Au lieu de cela, nous utiliserons des arguments facultatifs avec des valeurs par d√©faut qui peuvent √™tre omises de l'appel, ainsi que des arguments nomm√©s pour ¬´sauter¬ª sur les arguments facultatifs avec des valeurs par d√©faut valides et d√©finir uniquement les valeurs qui diff√®rent des valeurs par d√©faut.  Surtout, le manque de surcharge nous √©vitera de devoir d√©terminer quelle fonction de l'ensemble des fonctions surcharg√©es vient d'√™tre appel√©e, comment le gestionnaire d'appels a fonctionn√©: la fonction est toujours une dans ce module, elle est facile √† trouver par son nom. </p><br><h1>  API syst√®me </h1><br><p>  Nous donnerons √† l'utilisateur un acc√®s complet √† de nombreuses API syst√®me, y compris les sockets.  Je ne comprends pas pourquoi les auteurs de langages de script proposent toujours leurs propres fa√ßons ing√©nieuses d'ouvrir un socket.  Cependant, ils ne r√©alisent jamais l'API Unix Socket compl√®te.  Ils impl√©mentent 5-6 fonctions qu'ils comprennent et jettent tout le reste.  Python, contrairement √† eux, poss√®de des modules standard pour interagir avec le syst√®me d'exploitation qui impl√©mentent chaque appel syst√®me standard.  Cela signifie que vous pouvez ouvrir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le livre de Stevens</a> d√®s maintenant et commencer √† √©crire du code.  Et tous vos sockets, processus et fourches fonctionneront exactement comme indiqu√©.  Oui, il est possible que Guido ou les premiers contributeurs Python aient fait exactement cela, car ils √©taient trop paresseux pour √©crire leur impl√©mentation des biblioth√®ques syst√®me, trop paresseux pour expliquer √† nouveau aux utilisateurs comment fonctionnent les sockets.  Mais en cons√©quence, ils ont obtenu un effet merveilleux: vous pouvez transf√©rer toutes vos connaissances UNIX acquises en C et C ++ vers l'environnement Python. </p><br><p>  Nous avons donc d√©cid√© des fonctionnalit√©s que nous ¬´emprunterons¬ª √† C ++ pour cr√©er notre langage de script simple.  Maintenant, nous devons d√©cider ce que nous voulons corriger. </p><br><h1>  Comportement ind√©fini </h1><br><p>  Comportement inconnu, comportement ind√©fini, comportement d√©fini par l'impl√©mentation ... Ce sont toutes de mauvaises id√©es pour le langage qui seront utilis√©es par les √©coliers, les scientifiques et les data scientists.  Et le gain de performances pour lequel de telles choses sont autoris√©es est souvent n√©gligeable par rapport aux inconv√©nients.  Au lieu de cela, nous annoncerons que tout programme syntaxiquement correct produit le m√™me r√©sultat sur n'importe quelle plate-forme.  Nous d√©crirons le langage standard avec des phrases telles que ¬´Python √©value toutes les expressions de gauche √† droite¬ª au lieu d'essayer de r√©organiser les calculs en fonction du processeur, du syst√®me d'exploitation ou de la phase de lune.  Si l'utilisateur est s√ªr que l'ordre des calculs est important, il a le droit de r√©√©crire correctement le code: au final, l'utilisateur est le principal. </p><br><h1>  Priorit√©s d'exploitation </h1><br><p>  Vous devez avoir rencontr√© des erreurs similaires: expression </p><br><pre> <code class="cpp hljs">oflags &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span> == nflags &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span></code> </pre> <br><p>  renvoie toujours 0, car les comparaisons en C ont priorit√© sur les op√©rations au niveau du bit.  En d'autres termes, cette expression est √©valu√©e √† </p><br><pre> <code class="cpp hljs">oflags &amp; (<span class="hljs-number"><span class="hljs-number">0x80</span></span> == nflags) &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span></code> </pre> <br><p>  Oh, ce C! </p><br><p>  Nous √©liminerons la cause potentielle de ces erreurs dans notre langage de script simple, en pla√ßant la priorit√© des op√©rations de comparaison derri√®re l'arithm√©tique et la manipulation des bits, afin que l'expression de notre exemple soit calcul√©e de mani√®re plus intuitive: </p><br><pre> <code class="cpp hljs">(oflags &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span>) == (nflags &amp; <span class="hljs-number"><span class="hljs-number">0x80</span></span>)</code> </pre> <br><h1>  Autres am√©liorations </h1><br><p>  La lisibilit√© du code est importante pour nous.  Si les op√©rations arithm√©tiques du langage C sont famili√®res √† l'utilisateur, m√™me par l'arithm√©tique de l'√©cole, la confusion entre les op√©rations logiques et au niveau du bit est une source claire d'erreurs.  Nous remplacerons la double esperluette par le mot <code>and</code> , et la double ligne verticale par le mot <code>or</code> , afin que notre langue ressemble plus √† la parole humaine qu'au piquet de caract√®res ¬´informatiques¬ª. </p><br><p>  Nous laisserons la possibilit√© d'un calcul abr√©g√© √† nos op√©rateurs logiques ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://en.wikipedia.org/wiki/Short-circuit_evaluation</a> ), mais aussi leur donner la possibilit√© de retourner la valeur finale de n'importe quel type, pas seulement bool√©en.  Ensuite, des expressions comme </p><br><pre> <code class="python hljs">s = error.message <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-string"><span class="hljs-string">'Error'</span></span></code> </pre> <br><p>  Dans cet exemple, la variable sera d√©finie sur <code>error.message</code> si elle n'est pas vide, sinon la cha√Æne 'Error'. </p><br><p>  Nous √©tendons l'id√©e de C que 0 √©quivaut √† faux √† des objets autres que des entiers.  Par exemple, sur des lignes et des conteneurs vides. </p><br><p>  Nous d√©truirons le d√©bordement d'entier.  Notre langage sera coh√©rent dans la mise en ≈ìuvre et facile √† utiliser, de sorte que nos utilisateurs n'auront pas besoin de se souvenir d'une valeur sp√©ciale √©trangement proche de deux milliards, apr√®s quoi l'ensemble, augment√© d'une unit√©, change soudainement de signe.  Nous impl√©mentons de tels entiers qui se comporteront comme des entiers jusqu'√† √©puisement de toute la m√©moire disponible. </p><br><h1>  Typage strict vs faible </h1><br><p>  Autre probl√®me important dans la conception du langage de script: la rigueur de la frappe.  Beaucoup de spectateurs connaissent JavaScript?  Que se passe-t-il si le nombre 3 est soustrait de la cha√Æne ¬´4¬ª? </p><br><pre> <code class="javascript hljs">js&gt; <span class="hljs-string"><span class="hljs-string">'4'</span></span> - <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><p>  Super!  Et si vous ajoutez le num√©ro 3 √† la cha√Æne ¬´4¬ª? </p><br><pre> <code class="javascript hljs">js&gt; <span class="hljs-string"><span class="hljs-string">'4'</span></span> + <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-string"><span class="hljs-string">"43"</span></span></code> </pre> <br><p>  C'est ce qu'on appelle un typage lax (ou faible).  C'est quelque chose comme un complexe d'inf√©riorit√© lorsqu'un langage de programmation pense qu'un programmeur le condamnera s'il ne peut pas retourner le r√©sultat d'une expression, m√™me manifestement d√©nu√©e de sens, en r√©p√©tant des types de transtypage.  Le probl√®me est que la conversion de type, qu'un langage faiblement typ√© produit automatiquement, conduit tr√®s rarement √† un r√©sultat significatif.  Essayons des conversions un peu plus complexes: </p><br><pre> <code class="javascript hljs">js&gt; [] + [] <span class="hljs-string"><span class="hljs-string">""</span></span> js&gt; [] + {} <span class="hljs-string"><span class="hljs-string">"[object Object]"</span></span></code> </pre> <br><p>  Nous nous attendons √† ce que l'op√©ration d'addition soit commutative, mais que se passe-t-il si nous changeons les termes dans ce dernier cas? </p><br><pre> <code class="javascript hljs">js&gt; {} + [] <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><p>  JavaScript n'est pas seul dans ses probl√®mes.  Perl dans une situation similaire essaie √©galement de renvoyer au moins quelque chose: </p><br><pre> <code class="perl hljs">perl&gt; <span class="hljs-string"><span class="hljs-string">"3"</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span></code> </pre> <br><p>  Et awk fera quelque chose comme √ßa: </p><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> | awk <span class="hljs-string"><span class="hljs-string">'{print "3" + 1}'</span></span> 4</code> </pre> <br><p>  Les cr√©ateurs de langages de script ont traditionnellement cru que la frappe libre √©tait <em>pratique</em> .  Ils se sont tromp√©s: la frappe l√¢che est <em>terrible</em> !  Il viole le principe de localit√©.  S'il y a une erreur dans le code, le langage de programmation doit en informer l'utilisateur, provoquant une exception aussi proche que possible de l'endroit probl√©matique dans le code.  Mais dans tous ces langages, qui transforment sans fin des types, jusqu'√† ce que quelque chose soit r√©gl√©, le contr√¥le arrive g√©n√©ralement √† la fin, et nous obtenons le r√©sultat, en jugeant par lequel, dans notre programme, quelque chose ne va pas quelque part.  Et nous devons d√©boguer tout notre programme, ligne par ligne, pour trouver cette erreur. </p><br><p>  Un typage l√¢che d√©grade √©galement la lisibilit√© du code, car m√™me si nous utilisons correctement la conversion de type implicite dans un programme, cela se produit de mani√®re inattendue pour un autre programmeur. </p><br><p>  En Python, comme en C ++, ces expressions renvoient une erreur. </p><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-string"><span class="hljs-string">'4'</span></span> - <span class="hljs-number"><span class="hljs-number">3</span></span> TypeError &gt;&gt;&gt; <span class="hljs-string"><span class="hljs-string">'4'</span></span> + <span class="hljs-number"><span class="hljs-number">3</span></span> TypeError</code> </pre> <br><p>  Parce que la conversion de type, si vraiment n√©cessaire, est facile √† √©crire explicitement: </p><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>int(<span class="hljs-string"><span class="hljs-string">'4'</span></span>) + <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> &gt;&gt;&gt; <span class="hljs-string"><span class="hljs-string">'4'</span></span> + str(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">'43'</span></span></code> </pre> <br><p>  Ce code est facile √† lire et √† entretenir, il pr√©cise ce qui se passe exactement dans le programme, ce qui conduit √† ce r√©sultat.  En effet, les programmeurs Python pensent qu'explicite vaut mieux qu'implicite, et l'erreur ne doit pas passer inaper√ßue. </p><br><p>  Python est un langage fortement typ√©, et la seule conversion de type implicite qui s'y produit se produit lors d'op√©rations arithm√©tiques sur des entiers, dont le r√©sultat doit √™tre exprim√© sous la forme d'un nombre fractionnaire.  Peut-√™tre que cela ne devrait pas non plus √™tre autoris√© dans le programme, mais dans ce cas, trop d'utilisateurs devraient expliquer imm√©diatement la diff√©rence entre les nombres entiers et les nombres √† virgule flottante, ce qui compliquerait leurs premi√®res √©tapes en Python. </p><br><p>  Suite: ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Python comme cas ultime de C ++.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2/2</a> . " </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr464385/">https://habr.com/ru/post/fr464385/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr464373/index.html">Edge-to-edge sur Android: bien faire les choses</a></li>
<li><a href="../fr464375/index.html">Fonctionnement des moteurs de recherche</a></li>
<li><a href="../fr464377/index.html">Assembleur sale pirate 6502</a></li>
<li><a href="../fr464381/index.html">Voyage en Alaska ou KDD'19 √† travers les yeux d'un t√©moin oculaire</a></li>
<li><a href="../fr464383/index.html">Comment je mets les choses en ordre dans un projet o√π il y a une for√™t de mains directes (param√®tres tslint, plus joli, etc.)</a></li>
<li><a href="../fr464387/index.html">Empreinte russe dans la saga scandinave des jeux vid√©o, fin</a></li>
<li><a href="../fr464391/index.html">10 rapports int√©ressants de conf√©rences de hackers</a></li>
<li><a href="../fr464393/index.html">Comment trouver des cours de programmation et quelles sont les garanties d'emploi</a></li>
<li><a href="../fr464395/index.html">Al√©atoire bas√© sur RSA Blockchain</a></li>
<li><a href="../fr464399/index.html">Web scraping in R, Part 2. Acc√©l√©rer le processus avec le calcul parall√®le et l'utilisation du package Rcrawler</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>