<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üàØÔ∏è üî≥ üë®‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë® Detalhes t√©cnicos de hackers Capital One bank na AWS üìó ‚è∏Ô∏è üëßüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em 19 de julho de 2019, o Capital One Bank recebeu uma mensagem de que toda empresa moderna tem medo - ocorreu um vazamento de dados. Afetou mais de 1...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Detalhes t√©cnicos de hackers Capital One bank na AWS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463317/"><img src="https://habrastorage.org/getpro/habr/post_images/660/704/174/66070417484bc74908f6089c720dc7f4.png"><br><br>  Em 19 de julho de 2019, o Capital One Bank recebeu uma mensagem de que toda empresa moderna tem medo - ocorreu um vazamento de dados.  Afetou mais de 106 milh√µes de pessoas.  140.000 n√∫meros de seguridade social dos EUA, um milh√£o de n√∫meros de seguridade social do Canad√°.  80.000 contas banc√°rias.  Desagrad√°vel, concorda? <br><br>  Infelizmente, o hacking n√£o aconteceu em 19 de julho.  Paige Thompson, tamb√©m conhecido como <i>Erratic</i> , apresentou-o entre 22 e 23 de mar√ßo de 2019.  Isso √© <u>quase quatro meses atr√°s</u> .  De fato, somente com a ajuda de consultores externos a Capital One sabia que algo havia acontecido. <br><a name="habracut"></a><br>  Ex-funcion√°ria da Amazon presa, ela enfrenta uma multa de US $ 250 mil e cinco anos de pris√£o ... mas h√° muita negatividade.  Porque  Porque muitas empresas que foram invadidas por hackers est√£o tentando deixar de lado a responsabilidade de fortalecer sua infraestrutura e aplicativos em meio ao crescente cibercrime. <br><br>  De qualquer forma, voc√™ pode facilmente pesquisar no Google esta hist√≥ria.  N√£o vamos entrar em drama, mas falar sobre o lado <b>t√©cnico</b> das coisas. <br><br><h4>  Primeiro o que aconteceu? </h4><br>  Na Capital One, havia cerca de 700 baldes S3 que Paige Thompson copiou e esvaziou. <br><br><h4>  Em segundo lugar, esse √© outro caso de uma pol√≠tica de bucket S3 configurada incorretamente? </h4><br>  N√£o, desta vez n√£o.  Aqui, ela obteve acesso a um servidor com um firewall configurado incorretamente e, a partir da√≠, conduziu toda a opera√ß√£o. <br><br><h4>  Espere, como isso √© poss√≠vel? </h4><br>  Bem, vamos come√ßar fazendo login no servidor, embora tenhamos poucos detalhes.  S√≥ nos disseram que isso aconteceu atrav√©s de um "firewall configurado incorretamente".  Portanto, algo t√£o simples quanto as configura√ß√µes erradas do grupo de seguran√ßa ou a configura√ß√£o do firewall do aplicativo da web (Imperva) ou do firewall da rede (iptables, ufw, shorewall etc.).  A Capital One apenas se declarou culpada e disse que fechou o buraco. <br><br><blockquote>  Stone disse que o Capital One n√£o notou inicialmente a vulnerabilidade do firewall, mas respondeu rapidamente assim que descobriu.  Obviamente, isso foi ajudado pelo fato de o hacker ter deixado a chave de identifica√ß√£o das informa√ß√µes dispon√≠veis ao p√∫blico, disse Stone. </blockquote><br>  <i>Se voc√™ est√° interessado em saber por que n√£o estamos nos aprofundando nesta parte, entenda que, devido a informa√ß√µes limitadas, podemos apenas especular.</i>  <i>Isso n√£o faz sentido, uma vez que o hack dependia da lacuna deixada pela Capital One.</i>  <i>E se eles n√£o nos disserem mais, apenas listaremos todas as maneiras poss√≠veis que a Capital One deixou seu servidor aberto em combina√ß√£o com todas as maneiras poss√≠veis pelas quais algu√©m poderia usar uma dessas v√°rias op√ß√µes.</i>  <i>Essas lacunas e m√©todos podem variar de descuidos est√∫pidos a padr√µes incrivelmente complexos.</i>  <i>Dada a gama de possibilidades, isso se transformar√° em uma longa saga sem uma conclus√£o real.</i>  <i>Portanto, focaremos na an√°lise da parte em que temos os fatos.</i> <br><br><h4>  Portanto, a primeira conclus√£o: saiba o que seus firewalls permitem </h4><br>  Estabele√ßa uma pol√≠tica ou processo para garantir que APENAS o que est√° aberto esteja aberto.  Se voc√™ usa recursos da AWS, como grupos de seguran√ßa ou ACLs de rede, obviamente a lista de verifica√ß√£o para verifica√ß√£o pode ser longa ... mas, como muitos recursos s√£o criados automaticamente (ou seja, CloudFormation), voc√™ tamb√©m pode automatizar a auditoria deles.  Seja um script improvisado que procure por novos objetos em busca de falhas ou algo como uma auditoria de seguran√ßa em um processo de CI / CD ... existem muitas op√ß√µes f√°ceis para evitar isso. <br><br>  A parte "divertida" da hist√≥ria √© que, se a Capital One tivesse fechado o buraco desde o in√≠cio ... nada teria acontecido.  E, portanto, francamente, √© sempre chocante ver como algo realmente <i><b>simples</b></i> se torna a √∫nica raz√£o para uma empresa de hackers.  Especialmente do tamanho da Capital One. <br><br><h4>  Ent√£o, o hacker l√° dentro - o que aconteceu depois? </h4><br>  Bem, depois de invadir a inst√¢ncia do EC2 ... muita coisa pode dar errado.  Voc√™ caminha quase ao longo da ponta de uma faca se permitir que algu√©m v√° t√£o longe.  Mas como ela entrou no balde S3?  Para entender isso, vamos discutir os pap√©is do IAM (Fun√ß√µes do IAM). <br><br>  Portanto, uma maneira de acessar os servi√ßos da AWS √© ser um usu√°rio.  Ok, isso √© bastante √≥bvio.  Mas e se voc√™ quiser conceder a outros servi√ßos da AWS, por exemplo, seus servidores de aplicativos, acesso aos seus buckets S3?  Para isso, existem fun√ß√µes do IAM.  Eles consistem em dois componentes: <br><br><ol><li>  Pol√≠tica de Confian√ßa - quais servi√ßos ou quais pessoas podem usar essa fun√ß√£o? <br></li><li>  Pol√≠tica de permiss√µes - o que essa fun√ß√£o permite? </li></ol><br>  Por exemplo, voc√™ deseja criar uma fun√ß√£o do IAM que permita que inst√¢ncias do EC2 acessem o bucket S3: em primeiro lugar, ele define uma Pol√≠tica de Confian√ßa para a fun√ß√£o, para que o EC2 (todo o servi√ßo) ou inst√¢ncias espec√≠ficas possam assumir a fun√ß√£o.  Assumir uma fun√ß√£o significa que eles podem usar suas permiss√µes para executar a√ß√µes.  Em segundo lugar, a Pol√≠tica de Permiss√µes permite que o servi√ßo / pessoa / recurso que "assumiu a fun√ß√£o" fa√ßa algo no S3, seja acesso a um intervalo espec√≠fico ... ou a mais de 700, como no caso do Capital One. <br><br>  Quando voc√™ estiver em uma inst√¢ncia do EC2 com a fun√ß√£o IAM, poder√° obter credenciais de v√°rias maneiras: <br><br><ol><li> Voc√™ pode solicitar os metadados da inst√¢ncia em <code>http://169.254.169.254/latest/meta-data</code> <br><br>  Entre outras coisas, neste endere√ßo, voc√™ pode encontrar a fun√ß√£o do IAM com qualquer uma das chaves de acesso.  Obviamente, apenas se voc√™ estiver em uma inst√¢ncia. <br></li><li>  Use o AWS CLI ... <br><br>  Se a interface da linha de comando da AWS estiver instalada, ela ser√° carregada com as credenciais das fun√ß√µes do IAM, se houver.  Resta apenas trabalhar com a inst√¢ncia.  Obviamente, se sua Pol√≠tica de Confian√ßa estivesse aberta, Page poderia faz√™-lo diretamente. </li></ol><br>  Portanto, a ess√™ncia das fun√ß√µes do IAM √© que elas permitem que um recurso atue DE SEU NOME em OUTROS RECURSOS. <br><br><h4>  Agora que voc√™ entende os pap√©is do IAM, podemos falar sobre o que Page Thompson fez: </h4><br><ol><li>  Ela ganhou acesso ao servidor (inst√¢ncia EC2) atrav√©s de um buraco no firewall <br><br>  Sejam grupos de seguran√ßa / ACLs ou firewalls de aplicativos da Web, o buraco foi provavelmente muito f√°cil de fechar, conforme declarado nos registros oficiais. <br></li><li>  Uma vez no servidor, ela foi capaz de agir "como se" fosse o servidor <br></li><li>  Como a fun√ß√£o de servidor IAM permitiu o acesso do S3 a esses mais de 700 baldes, ela p√¥de acess√°-los </li></ol><br>  A partir de agora, ela s√≥ poderia executar o comando <code>List Buckets</code> e o comando <code>Sync</code> na CLI da AWS ... <br><br><hr><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Capital One Bank estima danos de hackers no valor de 100 a 150 milh√µes de d√≥lares</a> .  Prevenir esse dano √© o motivo pelo qual as empresas investem tanto na prote√ß√£o da infraestrutura de nuvem, DevOps e especialistas em seguran√ßa.  E qu√£o valiosa e econ√¥mica √© a transi√ß√£o para a nuvem?  Tanto que, mesmo diante de mais e mais problemas de seguran√ßa cibern√©tica, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mercado geral de nuvens p√∫blicas cresceu 42% no primeiro trimestre de 2019</a> ! <br><br>  A moral desta hist√≥ria: verifique sua seguran√ßa;  realizar auditorias regulares;  respeitar o princ√≠pio do menor privil√©gio para as pol√≠ticas de seguran√ßa. <br><br>  (Voc√™ pode ver o relat√≥rio jur√≠dico completo aqui). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt463317/">https://habr.com/ru/post/pt463317/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt463303/index.html">Finalmente, o Facebook para de segmentar an√∫ncios para n√∫meros de telefone que as pessoas inserem para o 2FA</a></li>
<li><a href="../pt463305/index.html">Ferramentas para analisar e depurar aplicativos .NET</a></li>
<li><a href="../pt463307/index.html">Estudo de caso sobre comunica√ß√£o com um cliente "pesado"</a></li>
<li><a href="../pt463311/index.html">CTT em solu√ß√µes de servidor. A segunda vers√£o + o an√∫ncio da terceira, com a capacidade de tocar</a></li>
<li><a href="../pt463313/index.html">Uma abordagem alternativa para se inscrever em eventos ou o EventObject √© realmente necess√°rio?</a></li>
<li><a href="../pt463321/index.html">Cestas e caixas de usabilidade: an√°lise das 20 principais lojas online de nichos russos</a></li>
<li><a href="../pt463325/index.html">Reflex√£o do Game Designer: personagens de um jogo que n√£o foi lan√ßado</a></li>
<li><a href="../pt463327/index.html">Vue.js: 3 anti-padr√µes</a></li>
<li><a href="../pt463329/index.html">Desenvolvimento de diagramas de √°rvore din√¢micos usando SVG e Vue.js</a></li>
<li><a href="../pt463331/index.html">Cliente Apollo. Agora com ganchos React</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>