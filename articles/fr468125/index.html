<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï¥üèª üë®üèø‚Äçüç≥ üì∞ Animation dans Asymptote üë©‚Äçüè´ ü§° üë©üèº‚Äçüé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Copi√© de mon blog afin de cr√©er une autre source d'information en russe sur ce sujet. 

 Bonjour Lorsque moi, dans le processus de ma√Ætrise du program...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Animation dans Asymptote</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468125/">  Copi√© de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mon blog</a> afin de cr√©er une autre source d'information en russe sur ce sujet. <br><br>  Bonjour  Lorsque moi, dans le processus de ma√Ætrise du programme Asymptote, qui a eu lieu lorsque j'ai appris les nuances des param√®tres de ce programme d√©crits ici dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce hub</a> , j'ai parfaitement ma√Ætris√© le traitement des fichiers .asy qui n'ont pas d'animation, j'ai naturellement rencontr√© l'animation. <br><br><div class="spoiler">  <b class="spoiler_title">En-t√™te de spoiler</b> <div class="spoiler_text">  Donnez de l'animation aux masses! <br></div></div><br>  Heureusement, pour cela, dans le cas du format de sortie .pdf, aucun des programmes suppl√©mentaires d√©crits par moi dans le hub en utilisant le lien ci-dessus, apr√®s l'installation du programme ghostscript, vous n'avez pas besoin d'installer, et m√™me le diable sait combien de temps il a creus√©.  Mais alors je ne savais pas √† ce sujet, ce qui a compliqu√© la question √† plusieurs reprises.  Vous traitez le fichier wheel.asy et quoi?  Eh bien, .pdf est apparu pendant le traitement dans TeXworks (voir le lien ci-dessus) dans le m√™me dossier avec le fichier .asy trait√©, et lorsqu'il est ouvert dans Explorer (voir le m√™me hub), dans le <code>C:\Windows\System32</code> .  Et alors?  Il n'y avait aucune animation et c'est tout, m√™me si vous craquez.  Avant l'animation dans Asymptote, j'ai appris √† faire des animations en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tikz</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pstricks</a> .  Je n'ai donc pas r√©ussi jusqu'√† ce que je supprime le fichier animate.sty du dossier <code>C:\Program Files\MiKTeX 2.9\tex\latex\animate</code> et que je mette le fichier du m√™me nom t√©l√©charg√© plus tard.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Il est l√†</a> .  Ainsi, sachant que cette <a name="habracut"></a>  le package fonctionne avec tikz et pstricks, j'√©tais enclin √† penser que cela ne fonctionne pas pour moi, tr√®s probablement, non pas √† cause de probl√®mes avec TeX, mais pour une autre raison.  J'ai donc fouill√© l'ancien Internet pendant plusieurs ann√©es.  Au d√©but, j'ai cherch√© dans le navigateur IE, eh bien, il n'y a pas de traducteur pratique.  Ensuite, j'ai renifl√© que Google a un traducteur pratique.  √âgalement recherch√©, recherch√©, recherch√©, recherch√©, jusqu'√† ce qu'il tombe sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette</a> page.  Il s'est av√©r√© que, pour une raison quelconque, dans tous les fichiers .asy du dossier <code>C:\Program Files\Asymptote\examples\animations</code> , pour obtenir d'eux .pdf avec animation, il n'y a pas assez de ligne unique <br><br><pre> <code class="plaintext hljs">settings.twice=true;</code> </pre> <br>  J'ai ajout√© cette ligne au fichier wheel.asy du sous-dossier d'animation du dossier d'exemples: <br><br><div class="spoiler">  <b class="spoiler_title">Enfin l'animation !!!!!!!</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">import graph; // Uncomment the following 2 lines to support pdf animations: usepackage("animate"); settings.tex="pdflatex"; settings.twice=true; import animation; size(0,200); defaultpen(3); dotfactor=4; pair wheelpoint(real t) { return (t+cos(t),-sin(t)); } guide wheel(guide g=nullpath, real a, real b, int n) { real width=(ba)/n; for(int i=0; i &lt;= n; ++i) { real t=a+width*i; g=g--wheelpoint(t); } return g; } real t1=0; real t2=t1+2*pi; animation a; draw(circle((0,0),1)); draw(wheel(t1,t2,100),linetype("0 2")); yequals(Label("$y=-1$",1.0),-1,extend=true,linetype("4 4")); xaxis(Label("$x$",align=3SW),0); yaxis("$y$",0,1.2); pair z1=wheelpoint(t1); pair z2=wheelpoint(t2); dot(z1); dot(z2); int n=10; real dt=(t2-t1)/n; for(int i=0; i &lt;= n; ++i) { save(); real t=t1+dt*i; draw(circle((t,0),1),red); dot(wheelpoint(t)); a.add(); // Add currentpicture to animation. restore(); } erase(); // Merge the images into a gif animation. //a.movie(BBox(0.25cm),loops=10,delay=250); // Merge the images into a pdf animation. label(a.pdf(BBox(0.25cm),delay=250,"controls",multipage=false));</code> </pre><br></div></div><br>  Dans le m√™me temps, afin de recevoir .pdf, connaissant 300 mots en anglais, j'ai r√©alis√© que je devais d√©commenter sous la forme du fichier wheel.asy dans lequel l'utilisateur l'obtient des auteurs du programme Asymptote, 2 lignes: <br><br><pre> <code class="plaintext hljs">....................... usepackage("animate"); settings.tex="pdflatex"; .......................</code> </pre><br>  En regardant les commentaires sur ces lignes √† la fin du fichier wheel.asy: <br><br><pre> <code class="plaintext hljs">........................ // Merge the images into a gif animation. a.movie(BBox(0.25cm),loops=10,delay=250); // Merge the images into a pdf animation. // label(a.pdf(BBox(0.25cm),delay=250,"controls",multipage=false));</code> </pre><br>  , J'ai r√©alis√© que pour obtenir .pdf, je dois refaire le code que j'ai obtenu des auteurs du programme et commenter la ligne <br><br><pre> <code class="plaintext hljs">a.movie(BBox(0.25cm),loops=10,delay=250);</code> </pre><br>  et d√©commenter la ligne <br><br><pre> <code class="plaintext hljs">label(a.pdf(BBox(0.25cm),delay=250,"controls",multipage=false));</code> </pre><br>  Et comment ma roue a roul√© apr√®s ces mouvements du corps!  La logique des auteurs du programme Asymptote est √©galement incompr√©hensible: pour obtenir .gif, un programme suppl√©mentaire est plus n√©cessaire que pour obtenir .pdf.  Les fichiers contenant des exemples seront tr√®s probablement regard√©s par des utilisateurs qui ne savent pas du tout comment proc√©der.  Eh bien, faites-le pour que lors de l'ouverture de ces fichiers √† la fois, sans rien y changer, ces utilisateurs puissent recevoir un format qui n√©cessite moins de programmes suppl√©mentaires - .pdf, non, ils ont cr√©√© .gif.  Pourquoi ??  Eh bien oh bien.  Oui, je noterai √©galement que lors de l'ouverture du fichier wheel.asy dans l'Explorateur (voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mon hub</a> ) pour en obtenir un .gif fonctionnel, la pr√©sence du fichier config.asy dans le m√™me dossier que celui-ci (voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mon hub</a> ) est facultative.  Permettez-moi de vous rappeler que .gif dans ce cas (lorsqu'il est ouvert dans l'Explorateur) est form√© dans le <code>C:\Windows\System32</code> .  Lors du traitement de ce fichier .asy dans TeXworks, la pr√©sence de config.asy dans le m√™me dossier que le fichier √† traiter est obligatoire (ou en incluant les lignes que j'ai d√©crites dans le lien pr√©c√©dent directement dans le fichier .asy trait√© lui-m√™me).  Eh bien, le voici.  J'ai eu cette roue roulante droite, j'ai ri de partout, ravie.  C'√©tait la nuit.  Je me suis couch√©.  Je me suis r√©veill√© et comp.  Pendant que l'ordinateur s'allumait, il s'assit, se frottant les mains.  Eh bien, je pense, maintenant je vais math√©matiquement commencer √† utiliser du mazout pour nous.)  Ouais, maintenant.  Les animations du sous-dossier d'exemples ont r√©ussi √† peu pr√®s tout, √† l'exception de embeddedmovie.asy, externalmovie.asy et embeddedu3d.asy.  J'ai attendu les 2 premiers fichiers plus tard, mais cela n'a pas fonctionn√© avec le dernier: l√†, si je comprends bien, certains fichiers dice.u3d doivent √©galement √™tre t√©l√©charg√©s de quelque part, et lequel est un grand secret pour une petite entreprise.  Eh bien, cela: "Oh, le royaume ne suffit pas, il n'y a pas d'endroit o√π errer."  J'ai √©crit, il y avait un tel code: <br><br><pre> <code class="plaintext hljs">settings.twice=true; usepackage("animate"); import solids; settings.tex="pdflatex"; import animation; settings.outformat="pdf"; settings.axes3=true; import graph3; import palette; currentprojection=orthographic(1,1,1); limits((-1.3,-1.3,-1.3),(1.3,1.3,1.3)); unitsize(6cm); animation a; int n=44; for(int i=0; i&lt;=n; ++i){ real g(real x) {return sqrt(1-x^2);} pair G(real x) {return (x,g(x));} triple G3(real x) {return (x,g(x),0);} path q=graph(G,1-i/n,1); path3 q3=path3(q); revolution c=revolution(q3,X,0,360); draw(surface(c),red); real f(real x) {return sqrt(1-x^2);} pair F(real x) {return (x,f(x));} triple F3(real x) {return (x,f(x),0);} path p=graph(F,-1,-1+i/n); path3 p3=path3(p); revolution b=revolution(p3,X,0,360); draw(surface(b),green); axes3("$x$","$y$","$z$",Arrow3); a.add(); restore(); } erase(); label(a.pdf("controls,loop",delay=1000));</code> </pre><br>  J'ai re√ßu l'erreur prometteuse suivante dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TeXworks</a> : <br><br><pre> <code class="plaintext hljs">error: out of memory</code> </pre> <br>  Lors de l'ouverture de ce fichier .asy dans l'Explorateur (voir le lien vers le hub juste au-dessus), l'erreur √©tait la m√™me.  Ouais.  J‚Äôai cuit √† la vapeur, j‚Äôai cuit √† la vapeur, j‚Äôai √©t√© boueux, j‚Äôai d√©couvert que <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>=</mo><mn>3</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.656ex" height="1.937ex" viewBox="0 -728.2 2435.1 834" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/468125/&amp;usg=ALkJrhiLkQxOOHOoop4LZF0uWDNtsPwOcQ#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/468125/&amp;usg=ALkJrhiLkQxOOHOoop4LZF0uWDNtsPwOcQ#MJMAIN-3D" x="878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/468125/&amp;usg=ALkJrhiLkQxOOHOoop4LZF0uWDNtsPwOcQ#MJMAIN-33" x="1934" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>=</mo><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-1"> n = 3 </script>  il s'av√®re .pdf avec animation, mais d√©j√† √† <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mo>=</mo><mn>4</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.656ex" height="2.057ex" viewBox="0 -780.1 2435.1 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/468125/&amp;usg=ALkJrhiLkQxOOHOoop4LZF0uWDNtsPwOcQ#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/468125/&amp;usg=ALkJrhiLkQxOOHOoop4LZF0uWDNtsPwOcQ#MJMAIN-3D" x="878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/468125/&amp;usg=ALkJrhiLkQxOOHOoop4LZF0uWDNtsPwOcQ#MJMAIN-34" x="1934" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>=</mo><mn>4</mn></math></span></span><script type="math/tex" id="MathJax-Element-2"> n = 4 </script>  que cette erreur se produit √©galement.  Permettez-moi de demander au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">forum</a> Asymptote <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lui-m√™me</a> .  Mais les Anglo-Saxons sont des gens respectueux des lois qui n'aiment pas revenir en arri√®re par rapport aux instructions.  Ils n'ont rien trouv√©.  Que faire  Cela valait-il la peine de pelleter la moiti√© d'Internet pour tomber sur de telles ordures?  Eh bien, rien, les Russes n‚Äôabandonnent pas!  Et d'ailleurs, les h√©ros normaux font toujours le tour ... J'ai commenc√© √† observer le processus de traitement du fichier wheel.asy dans TeXworks et qu'est-ce que j'ai vu?  Tout d'abord, les fichiers _wheel + 0.pdf, _wheel + 1.pdf, ..., _wheel + 10.pdf apparaissent, puis √† partir de ces fichiers, un fichier multi-pages _wheel.pdf est form√© et plus loin dans le programme.  Et pour faire tout cela, le module d'animation est import√© dans le fichier .asy √† partir duquel ils vont obtenir l' <i>animation</i> .  Et puis j'ai eu une id√©e.  Mais que faire si dans ce module (fichier <code>C:\Program Files\Asymptote\animation.asy</code> ) vous trouvez un endroit qui g√©n√®re des fichiers comme _wheel + 0.pdf et le d√©sactivez?  Tamponnez-vous ces fichiers avec des fichiers .asy de traitement Asymptote g√©n√©r√©s par bouclage dans un fichier batch?  Ces fichiers .asy peuvent √™tre cr√©√©s avec les noms <i>nom + 0.asy</i> , <i>nom + 1.asy</i> , etc., aussi longtemps que n√©cessaire.  O√π le <i>nom</i> est un ensemble de lettres latines associ√©es √† l'animation en cours de cr√©ation, que vous souhaiterez probablement modifier sur le pdf pr√™t √† l'emploi avec animation.  Mais ce sera plus tard.  En attendant, apr√®s avoir cr√©√© les fichiers, le <i>nom est + 0.asy</i> , le <i>nom est + 1.asy</i> ... selon mon id√©e, le traitement par Asymptote devrait suivre.  Cela cr√©erait le <i>nom des</i> fichiers <i>+ 0.pdf</i> , le <i>nom + 1.pdf</i> ... Et avant le code qui cr√©e le <i>nom des</i> fichiers <i>+ 0.asy</i> , le <i>nom + 1.asy</i> ..., je devais ins√©rer des lignes dans le fichier de commandes pour cr√©er le fichier name.asy ou plut√¥t, juste des lignes pour entrer dans ce fichier.  Et le fichier name.asy serait form√© simplement √† la suite du fichier de commandes.  Dans ce fichier, le nom est .asy, je pr√©voyais d'importer le module d'animation que j'ai converti au lieu du module d' <i>animation</i> lui-m√™me.  J'ai d√©cid√© de rendre le d√©but de ce fichier name.asy le plus simple, dans l'esprit du d√©but du fichier wheel.asy.  Apr√®s la boucle, je viens de copier b√™tement les lignes de ce fichier et de les coller dans le fichier batch comme ceci: <br><br><pre> <code class="plaintext hljs">echo  &gt;&gt; .asy</code> </pre><br>  , <br><br><pre> <code class="plaintext hljs">echo  &gt;&gt; .asy</code> </pre><br>  J'ai √©crit le fichier batch pour que dans le fichier cr√©√© le nom. Facile, le corps de la boucle √©tait vide, et o√π se trouvait, il se passerait comme ceci: <br><br><pre> <code class="plaintext hljs">for(int i=0; i &lt;= n; ++i) {</code> </pre><br>  Dans le fichier de commandes, la ligne au-dessus de la ligne de code entrant cette ligne dans le nom de fichier .asy est une ligne <br><br><pre> <code class="plaintext hljs">echo int n=%n%; &gt;&gt;%name%.asy</code> </pre><br>  et les troisi√®me et quatri√®me lignes de ce fichier de commandes sont les suivantes: <br><pre> <code class="plaintext hljs">set n=24 set name=OdnopGip</code> </pre><br>  , donc au d√©but du traitement de la boucle dans le nom du fichier. Easy Asymptote conna√Æt d√©j√† la valeur de n dans ce cas et tout fonctionne.  Le nom de la variable d'environnement signifie, en traduction dans la langue de cet article, le <i>nom</i> de <i>name.asy</i> .  D√©clarer dans ce cas les valeurs de nom ou n dans le fichier batch via set me semble extr√™mement pratique: changer leurs valeurs en un seul endroit dans le fichier batch implique de changer tous les noms des fichiers .tex, .pdf g√©n√©r√©s lors du traitement d'un certain fichier ou num√©ro .asy images dans le pdf anim√© r√©sultant, modifiant essentiellement les d√©tails de l'animation.  Eh bien, le voici.  J'ai donc pr√©par√© les cadres <i>nom + 0.pdf</i> , <i>nom + 1.pdf</i> ... cependant, car apr√®s la pr√©paration de chaque cadre ouvert, j'ai d√ª inclure une commande dans mon fichier batch pour le fermer.  √âtant donn√© que je ne savais pas comment fermer une fen√™tre avec un titre sp√©cifique √† partir d'un fichier de commandes, j'ai inclus la commande suivante dans mon fichier de commandes dans le corps du cycle de traitement sans cadre .asy: <br><pre> <code class="plaintext hljs">taskkill /IM AcroRd32.exe</code> </pre><br>  , ce qui, comme il s'est av√©r√© plus tard au cours de l'ex√©cution de tout cela, est encore mieux que de fermer chaque image sp√©cifique: parfois l'image n'a toujours pas le temps d'appara√Ætre sur le moniteur, et le traitement du fichier .asy suivant commence d√©j√†, √† la fin duquel l'image suivante appara√Æt sur le moniteur, et la finale avec la commande de cette √©tape suivante du cycle, le cadre de cette √©tape suivante et le cadre de l'√©tape pr√©c√©dente, au-del√† desquels le fichier de commandes en cours d'ex√©cution est pass√©, seront ferm√©s, bien qu'il soit clair qu'apr√®s avoir inclus cette commande dans le fichier de commandes lors de son ex√©cution du livre en .pdf, ce n'est plus  Je suis mauvais, oui.  Plus loin dans la logique, je devais renommer les fichiers nom + 0.asy, nom + 1.asy, ... en _name + 0.asy, _name + 1.asy, ..., car la pr√©sence de fichiers avec exactement ces noms en un Le dossier avec le fichier .asy en cours de traitement, dans lequel il y a une animation, suppose que ce fichier est trait√© √† condition que le module d'animation natif soit import√© avant de commencer la production du nom de fichier.pdf (oui, je pourrais, √† l'int√©rieur de la boucle du fichier batch avec la variable k, ne pas aligner les lignes du code constituant le cadre, pas dans le nom de fichier + k.asy, et le fichier _name + k.asy, mais cela n√©cessiterait plus de saisie du caract√®re "_". Et le traitement ult√©rieur des plaies asymptotes  . Fichier E imya.asy cr√©√© Bref, selon l'id√©e originale √©tait d'avoir un look de fichiers par lots comme celui-ci: <br><br><pre> <code class="plaintext hljs">cd /d %0\.. echo off set n=99 set name=cvetok echo settings.twice=true; &gt; %name%.asy echo usepackage("animate"); &gt;&gt;%name%.asy echo settings.tex="pdflatex"; &gt;&gt;%name%.asy echo import izgraphiki; &gt;&gt;%name%.asy echo animation a; &gt;&gt;%name%.asy echo int n=%n%; &gt;&gt;%name%.asy echo for(int i=0; i ^&lt;= n; ++i) { &gt;&gt;%name%.asy echo a.add(); &gt;&gt;%name%.asy echo restore(); &gt;&gt;%name%.asy echo } &gt;&gt;%name%.asy echo erase(); &gt;&gt;%name%.asy echo label(a.pdf(BBox(0.25cm),delay=250,"controls",multipage=false)); &gt;&gt;%name%.asy for /l %%k in (0,1,%n%) do ( echo import graph; &gt;&gt; %name%+%%k.asy echo settings.tex="pdflatex"; &gt;&gt; %name%+%%k.asy echo limits((-1.2,-1.2^),(1.2,1.2^)^); &gt;&gt; %name%+%%k.asy echo size(0,100^); &gt;&gt; %name%+%%k.asy echo real f(real t^) {return cos(2*t^);} &gt;&gt; %name%+%%k.asy echo path g=polargraph(f,0,2pi*%%k/%n%,operator ..^)--cycle; &gt;&gt; %name%+%%k.asy echo fill(g,green+white^); &gt;&gt; %name%+%%k.asy echo xaxis("$x$",above=true^); &gt;&gt; %name%+%%k.asy echo yaxis("$y$",above=true^); &gt;&gt; %name%+%%k.asy echo draw(g^); &gt;&gt; %name%+%%k.asy ) for /l %%l in (0,1,%n%) do ( asy %name%+%%l.asy taskkill /IM AcroRd32.exe ) for /l %%l in (0,1,%n%) do ( rename %name%+%%l.pdf _%name%+%%l.pdf ) asy %name%.asy</code> </pre><br>  Ici, nous voyons que j'importe le module animation.asy que j'ai modifi√© ci-dessus.  J'ai donn√© le nom simple izgraphiki.asy √† ce module.  Et pour le fichier d'animation .pdf que je re√ßois, je n'ai pas trouv√© un nom meilleur que cvetok.  Apparemment, √† cause de la raret√© de son imagination.  Eh bien, allez, comment c'est.  Je vais vous parler de ¬´mon¬ª module izgraphiki.asy √† la toute fin de cette histoire, afin de ne pas perdre le fil de l'histoire maintenant, mais pour l'instant je noterai que j'essaie de donner √† ce fichier le nom iz-graphiki.asy, puis d'essayer aussi iz + graphiki.asy n'a pas abouti au but recherch√©: le travail de mon fichier batch s'est arr√™t√© en plein essor et n'a repris en aucun cas.  Apparemment, les modules du programme Asymptote ne devraient contenir que des <u>lettres de l'</u> alphabet latin.  Dans tous les cas, le respect de cette condition ne fera certainement pas de mal.  Ainsi, le travail du fichier batch que j'ai cit√© ci-dessus s'est termin√© avec l'apparition du fichier .pdf convoit√© avec une animation arbitrairement grande (dans des limites raisonnables, afin de ne pas attendre 3 heures, cela fonctionne, le .pdf anim√© appara√Æt, tout va bien, mais l'ordinateur a une vitesse d'ex√©cution) les op√©rations ne sont que d√©finitives).  Permettez-moi de faire une construction anim√©e d'objets 3D.  Et puis un autre probl√®me est devenu clair.  J'ai r√©ussi √† tamponner des photos avec ces objets, mais, oh, c'est tout.  Au niveau de ces cadres, ces objets se sont av√©r√©s tourner dans l'espace, tout va bien ici, mais juste √† cause de cette pr√©sence de volume dans les cadres pdf, ils ne peuvent pas √™tre utilis√©s pour construire des cadres en pdf avec animation.  Laissez-moi r√©fl√©chir plus loin.  Regarder le traitement d'un fichier sphere.asy l√©g√®rement modifi√©: <br><br><div class="spoiler">  <b class="spoiler_title">fichier sph√®re.asy l√©g√®rement modifi√©</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">settings.twice=true; usepackage("animate"); import solids; settings.tex="pdflatex"; import animation; settings.outformat="pdf"; currentprojection=orthographic((0,5,2)); currentlight=(0,5,5); int nbpts=200; real step=2*pi/nbpts; int angle=90; unitsize(1cm); triple[] P=new triple[nbpts]; for(int i=0; i &lt; nbpts; ++i) { real t=-pi+i*step; P[i]=(3sin(t)*cos(2t),3sin(t)*sin(2t),3cos(t)); } transform3 t=rotate(angle,(0,0,0),(1,0.25,0.25)); revolution r=sphere(O,3); draw(surface(r),lightgrey); draw(r,backpen=linetype("8 8",8)); animation A; for(int phi=0; phi &lt; 360; phi += angle) { bool[] front=new bool[nbpts]; save(); for(int i=0; i &lt; nbpts; ++i) { P[i]=t*P[i]; front[i]=dot(P[i],currentprojection.camera) &gt; 0; } draw(segment(P,front,operator ..),1mm+blue+extendcap); draw(segment(P,!front,operator ..),grey); A.add(); restore(); } label(A.pdf());</code> </pre><br></div></div><br>  , J'ai remarqu√© qu'au cours de ce traitement, toutes les images de l'animation apparaissent et ne disparaissent pas s√©quentiellement, mais seulement elles, si je peux dire, dans la version 2D: √† mon avis, ce sont des graphiques 3D complets, mais si vous essayez de les visualiser de diff√©rents c√¥t√©s dans la fen√™tre de la visionneuse Abode Reader en se d√©pla√ßant avec le bouton gauche de la souris enfonc√©, comme pr√©vu √† partir des graphiques 3D obtenus √† l'aide d'Asymptote, sauf si la possibilit√© de cette consid√©ration est d√©sactiv√©e avant de commencer la production de .pdf avec animation dans un fichier .asy, cela s'av√®re impossible  e.  Les noms de ces cadres 2D: _sphere + 0.pdf, _sphere + 1.pdf, ... Ayant appris la g√©n√©ration de cadres 2D spatiaux lors du traitement de fichiers .asy qui ont une animation d'objets 3D, il m'est venu √† l'esprit d'obtenir des cadres .pdf √† partir d'un fichier batch pour une utilisation ult√©rieure dans le traitement du fichier .asy, dans lequel il y a un cycle avec un corps vide, que je g√©n√®re au tout d√©but du fichier de commandes, en traitant non seulement les fichiers .asy, mais aussi les fichiers .asy, chacun ayant un cycle.  Ces boucles dans chacun de ces talons de fichier .asy pour en recevoir une image .pdf J'ai constitu√© une seule image: je n'ai pas fait ces talons pour obtenir .pdf avec une animation d'eux, mais pour obtenir une image 2D, d'ailleurs en cours de traitement de chacun des fichiers de raccord .asy.  Afin de recevoir des fichiers vides .asy avec de telles boucles, j'ai fait en sorte que dans les boucles de tous les fichiers vides .asy, les variables de ces boucles au d√©but et √† la fin des boucles prennent la m√™me valeur - 0. Les diff√©rences entre les images .pdf r√©sultant du traitement play Asymptote de fichiers vides .asy sont caus√©s par des diff√©rences dans les corps des fichiers de boucle de blanks.asy, lesquelles (diff√©rences) sont, √† leur tour, dues √† l'introduction de chacune des valeurs s√©quentielles de la variable de boucle de fichier batch dans les fonctions de corps des fichiers de boucle de blanks.asy, cr√©√©es par le fichier batch lorsque sa variable qi  Kla, prenant sa valeur suivante, se fige, en attendant la fin de la cr√©ation du fichier d'approvisionnement.asy, correspondant √† cette valeur de la variable de boucle du fichier batch.  En bref, ces diff√©rences sont cr√©√©es par la variable de boucle de fichier batch.  Les noms de ces cadres 2d sont de la forme: nom + k + 0.pdf, o√π, parce que ces cadres 2d sont le r√©sultat d'un changement dans la variable de boucle du fichier batch, <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>k</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.211ex" height="2.057ex" viewBox="0 -780.1 521.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/468125/&amp;usg=ALkJrhiLkQxOOHOoop4LZF0uWDNtsPwOcQ#MJMATHI-6B" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> k </script>  prend des valeurs de 0 √† la valeur finale de la variable de boucle du fichier de commandes √† l'√©tape 1. Pour obtenir le fichier .pdf anim√© du fichier .asy avec le corps vide de la boucle cr√©√© par le fichier de commandes plus t√¥t, les noms de cadre .pdf doivent avoir la forme suivante: _name + k.pdf.  Par cons√©quent, la prochaine √©quipe du fichier de commandes a renomm√© ces cadres-.pdf.  Je l'ai fait en boucle.  Enfin, l'√©quipe de traitement a ex√©cut√© le fichier Asymptote .asy avec un corps de boucle vide.  Apr√®s ce traitement, un .pdf avec animation appara√Æt.  Dans le fichier batch, apr√®s cette commande, je n'ai pas √©crit de commande pour ouvrir le fichier .pdf avec animation, car cette ouverture est suppos√©e par d√©faut, ce fichier .pdf avec animation s'ouvre quand m√™me √† la fin de ce traitement, tout comme un fichier .pdf s'ouvre g√©n√©r√© par Asymptote traitant un fichier .asy sans animation.  Si le lecteur a observ√© le processus de traitement des fichiers .asy √† partir d'un sous-dossier avec des animations du dossier d'exemples situ√© dans le dossier du programme Asymptote, il comprendra qu'une partie du <i>nom</i> de _name + k.pdf devrait co√Øncider avec le nom du fichier .asy avec un corps vide de la boucle.  Les fichiers _name + k.pdf sont le r√©sultat du renommage d'autres fichiers .pdf (nom de fichiers + k + 0.pdf), qui, √† leur tour, sont un sous-produit du programme traitant certains fichiers .asy, donc, pour simplifier la t√¢che, j'ai fait ces fichiers .asy ont √©t√© cr√©√©s par un fichier batch sous les noms nom + 0.asy, nom + 1.asy, ... Alors, bien, j'ai d√©crit le principe de travail d'un fichier batch que j'avais pr√©vu, il est temps de donner un exemple d'un de ces fichiers batch.  Par exemple, ceci: <br><br><pre> <code class="plaintext hljs">cd /d %0\.. echo off set n=44 echo settings.twice=true; &gt;&gt;sphera.asy echo usepackage("animate"); &gt;&gt;sphera.asy echo settings.tex="pdflatex"; &gt;&gt;sphera.asy echo import izgraphiki; &gt;&gt;sphera.asy echo animation a; &gt;&gt;sphera.asy echo int n=%n%; &gt;&gt;sphera.asy echo for(int i=0; i ^&lt;= n; ++i) { &gt;&gt;sphera.asy echo a.add(); &gt;&gt;sphera.asy echo restore(); &gt;&gt;sphera.asy echo } &gt;&gt;sphera.asy echo erase(); &gt;&gt;sphera.asy echo label(a.pdf(BBox(0.25cm),delay=250,"controls,loop,autoplay",multipage=false)); &gt;&gt;sphera.asy for /l %%k in (0,1,%n%) do ( echo settings.twice=true; &gt;&gt; sphera+%%k.asy echo usepackage("animate"^); &gt;&gt; sphera+%%k.asy echo import solids; &gt;&gt; sphera+%%k.asy echo settings.tex="pdflatex"; &gt;&gt; sphera+%%k.asy echo import animation; &gt;&gt; sphera+%%k.asy echo settings.outformat="pdf"; &gt;&gt; sphera+%%k.asy echo settings.axes3=true; &gt;&gt; sphera+%%k.asy echo import graph3; &gt;&gt; sphera+%%k.asy echo import palette; &gt;&gt; sphera+%%k.asy echo currentprojection=orthographic(1,1,1^); &gt;&gt; sphera+%%k.asy echo limits((-1.3,-1.3,-1.3^),(1.3,1.3,1.3^)^); &gt;&gt; sphera+%%k.asy echo unitsize(6cm^); &gt;&gt; sphera+%%k.asy echo animation a=animation(global=false^); //  (global=false^)   &gt;&gt;sphera+%%k.asy echo //C:\Program Files\Asymptote/plain_shipout.asy: 87.10: runtime: Cannot rename _sphera+2+0_.pdf to &gt;&gt;sphera+%%k.asy echo //_sphera+2+0.pdf &gt;&gt;sphera+%%k.asy echo for(int i=0; i ^&lt;= 0; ++i^) { &gt;&gt;sphera+%%k.asy echo real f(real x^) {return sqrt(1-x^^2^);} &gt;&gt; sphera+%%k.asy echo pair F(real x^) {return (x,f(x^)^);} &gt;&gt; sphera+%%k.asy echo triple F3(real x^) {return (x,f(x^),0^);} &gt;&gt; sphera+%%k.asy echo path p=graph(F,-1+i,-1+i+%%k/%n%^); &gt;&gt; sphera+%%k.asy echo path3 p3=path3(p^); &gt;&gt; sphera+%%k.asy echo revolution b=revolution(p3,X,0,360^); &gt;&gt; sphera+%%k.asy echo draw(surface(b^),green^); &gt;&gt; sphera+%%k.asy echo real g(real x^) {return sqrt(1-x^^2^);} &gt;&gt; sphera+%%k.asy echo pair G(real x^) {return (x,f(x^)^);} &gt;&gt; sphera+%%k.asy echo triple G3(real x^) {return (x,g(x^),0^);} &gt;&gt; sphera+%%k.asy echo path q=graph(G,1-i-%%k/%n%,1-i^); &gt;&gt; sphera+%%k.asy echo path3 q3=path3(q^); &gt;&gt; sphera+%%k.asy echo revolution c=revolution(q3,X,0,360^); &gt;&gt; sphera+%%k.asy echo draw(surface(c^),red^); &gt;&gt; sphera+%%k.asy echo axes3("$x$","$y$","$z$",Arrow3^); &gt;&gt; sphera+%%k.asy echo a.add(^); &gt;&gt;sphera+%%k.asy echo restore(^); &gt;&gt;sphera+%%k.asy echo } &gt;&gt;sphera+%%k.asy echo erase(^); &gt;&gt;sphera+%%k.asy echo label(a.pdf(^)^); &gt;&gt;sphera+%%k.asy ) rem for /f %%l in (0,1,%n%) do asy '_sphera+%%l'.asy for /l %%l in (0,1,%n%) do ( asy sphera+%%l.asy taskkill /F /IM AcroRd32.exe ) for /l %%l in (0,1,%n%) do rename sphera+%%l+0.pdf _sphera+%%l.pdf asy sphera.asy</code> </pre><br>  Veuillez faire attention √† la ligne <br><br><pre> <code class="plaintext hljs">echo for(int i=0; i ^&lt;= n; ++i) { &gt;&gt;sphera.asy</code> </pre><br>  √©tant donn√© que le symbole <code>&lt;</code> a une signification sp√©ciale pour l'interpr√©teur de ligne de commande, afin que cet interpr√®te prenne ce symbole au sens litt√©ral, j'ai √©chapp√© √† ce symbole en pla√ßant le symbole <code>^</code> devant lui.         <code>^</code>    ,        .  ,           ,          ,        <br><br><pre> <code class="plaintext hljs">for /l %%k in (0,1,%n%) do (</code> </pre><br> ,  ,            .  (   ,      ,           sphera.asy      : <br><br><pre> <code class="plaintext hljs">settings.twice=true; usepackage("animate"); settings.tex="pdflatex"; import izgraphiki; animation a; int n=44; for(int i=0; i &lt;= n; ++i) { a.add(); restore(); } erase(); label(a.pdf(BBox(0.25cm),delay=250,"controls,loop,autoplay",multipage=false));</code> </pre><br>     sphera+0.asy, sphera+1.asy,..., sphera+44.asy,       Asymptote      2d- sphera+0.pdf, sphera+1.pdf,..., sphera+44.pdf.  ,   sphera+4.asy  : <br><br><pre> <code class="plaintext hljs">settings.twice=true; usepackage("animate"); import solids; settings.tex="pdflatex"; import animation; settings.outformat="pdf"; settings.axes3=true; import graph3; import palette; currentprojection=orthographic(1,1,1); limits((-1.3,-1.3,-1.3),(1.3,1.3,1.3)); unitsize(6cm); animation a=animation(global=false); //          (global                  //C:\Program Files\Asymptote/plain_shipout.asy: 87.10: runtime: Cannot rename _sphera+2+0_.pdf to //_sphera+2+0.pdf for(int i=0; i &lt;= 0; ++i) { real f(real x) {return sqrt(1-x^2);} pair F(real x) {return (x,f(x));} triple F3(real x) {return (x,f(x),0);} path p=graph(F,-1+i,-1+i+4/44); path3 p3=path3(p); revolution b=revolution(p3,X,0,360); draw(surface(b),green); real g(real x) {return sqrt(1-x^2);} pair G(real x) {return (x,f(x));} triple G3(real x) {return (x,g(x),0);} path q=graph(G,1-i-4/44,1-i); path3 q3=path3(q); revolution c=revolution(q3,X,0,360); draw(surface(c),red); axes3("$x$","$y$","$z$",Arrow3); a.add(); restore(); } erase(); label(a.pdf());</code> </pre><br>    ,   sphera+4.asy  TeXworks',     UTF-8: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6f8/0fe/edb/6f80feedb143f6a0369c71dd298b0ff3.jpg" alt="image"><br><br>     ANSI. ,             - .asy, , ,       Asymptote.        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> 2d-</a> .          2d-,       ,     ,       2d-.   - .asy  ,            .    2d- sphera+0+0.pdf, sphera+1+0.pdf,..., sphera+44+0.pdf  _sphera+0.pdf, _sphera+1.pdf,..., _sphera+44.pdf, , ,   Asymptote      sphera.asy.    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a> .     .gif  ,      .gif   -   .    .gif,   .pdf  ,   ,    ,   , . ., ,  .pdf  ,   .gif .  .gif    ,           : <br><br><pre> <code class="plaintext hljs">cd /d %0\.. echo off set n=44 echo import graph; &gt;sphera.asy echo settings.twice=true; &gt;&gt;sphera.asy echo usepackage("animate"); &gt;&gt;sphera.asy echo settings.tex="pdflatex"; &gt;&gt;sphera.asy echo import izgraphikigif; &gt;&gt;sphera.asy echo animation a; &gt;&gt;sphera.asy echo yequals(Label("$y=-1$",1.0),-1,extend=true,linetype("4 4")); &gt;&gt;sphera.asy echo int n=%n%; &gt;&gt;sphera.asy echo for(int i=0; i ^&lt;= n; ++i) { &gt;&gt;sphera.asy echo a.add(); &gt;&gt;sphera.asy echo restore(); &gt;&gt;sphera.asy echo } &gt;&gt;sphera.asy echo erase(); &gt;&gt;sphera.asy echo a.movie(); &gt;&gt;sphera.asy for /l %%k in (0,1,%n%) do ( echo settings.twice=true; &gt; sphera+%%k.asy echo usepackage("animate"^); &gt;&gt; sphera+%%k.asy echo import solids; &gt;&gt; sphera+%%k.asy echo settings.tex="pdflatex"; &gt;&gt; sphera+%%k.asy echo import animation; &gt;&gt; sphera+%%k.asy echo settings.outformat="pdf"; &gt;&gt; sphera+%%k.asy echo settings.axes3=true; &gt;&gt; sphera+%%k.asy echo import graph3; &gt;&gt; sphera+%%k.asy echo import palette; &gt;&gt; sphera+%%k.asy echo currentprojection=orthographic(1,1,1^); &gt;&gt; sphera+%%k.asy echo limits((-1.3,-1.3,-1.3^),(1.3,1.3,1.3^)^); &gt;&gt; sphera+%%k.asy echo unitsize(6cm^); &gt;&gt; sphera+%%k.asy echo animation a=animation(global=false^); //  (global=false^)   &gt;&gt;sphera+%%k.asy echo //C:\Program Files\Asymptote/plain_shipout.asy: 87.10: runtime: Cannot rename _sphera+2+0_.pdf to &gt;&gt;sphera+%%k.asy echo //_sphera+2+0.pdf &gt;&gt;sphera+%%k.asy echo for(int i=0; i ^&lt;= 0; ++i^) { &gt;&gt;sphera+%%k.asy echo real f(real x^) {return sqrt(1-x^^2^);} &gt;&gt; sphera+%%k.asy echo pair F(real x^) {return (x,f(x^)^);} &gt;&gt; sphera+%%k.asy echo triple F3(real x^) {return (x,f(x^),0^);} &gt;&gt; sphera+%%k.asy echo path p=graph(F,-1+i,-1+i+%%k/%n%^); &gt;&gt; sphera+%%k.asy echo path3 p3=path3(p^); &gt;&gt; sphera+%%k.asy echo revolution b=revolution(p3,X,0,360^); &gt;&gt; sphera+%%k.asy echo draw(surface(b^),green^); &gt;&gt; sphera+%%k.asy echo real g(real x^) {return sqrt(1-x^^2^);} &gt;&gt; sphera+%%k.asy echo pair G(real x^) {return (x,f(x^)^);} &gt;&gt; sphera+%%k.asy echo triple G3(real x^) {return (x,g(x^),0^);} &gt;&gt; sphera+%%k.asy echo path q=graph(G,1-i-%%k/%n%,1-i^); &gt;&gt; sphera+%%k.asy echo path3 q3=path3(q^); &gt;&gt; sphera+%%k.asy echo revolution c=revolution(q3,X,0,360^); &gt;&gt; sphera+%%k.asy echo draw(surface(c^),red^); &gt;&gt; sphera+%%k.asy echo axes3("$x$","$y$","$z$",Arrow3^); &gt;&gt; sphera+%%k.asy echo a.add(^); &gt;&gt;sphera+%%k.asy echo restore(^); &gt;&gt;sphera+%%k.asy echo } &gt;&gt;sphera+%%k.asy echo erase(^); &gt;&gt;sphera+%%k.asy echo label(a.pdf(^)^); &gt;&gt;sphera+%%k.asy ) for /l %%l in (0,1,%n%) do ( asy sphera+%%l.asy taskkill /F /IM AcroRd32.exe ) rem for /l %%l in (0,1,%n%) do rename sphera+%%l+0.pdf _sphera+%%l.pdf asy sphera.asy</code> </pre><br>         ,   ,     .gif    wheel.asy.  ,    <br><br><pre> <code class="plaintext hljs">yequals(Label("$y=-1$",1.0),-1,extend=true,linetype("4 4"));</code> </pre> <br>   sphera.asy   ,    .       ,              /¬´ ¬ª     .asy    .       .gif,   Imagemagick  2d-: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/196/03e/950/19603e950e36d48883c3acf0eb005b26.gif" alt="image"><br><br> ,    . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   <s></s> , </a> .  Hein? <br><br>      <code>magick *.eps sphere.gif</code>   ,   ,    2d-   .eps.        .gif    .  ,  10 )). , ,   .   ,    ,    ,        animation.asy.        ,      ( ) ?            .gif    .   ,     izgraphiki.asy ‚Äì   animation.asy ‚Äì    .pdf     (    (. ) 3d   )       .gif     (    (. ) 3d   ). ,     ¬´¬ª       .  ¬´¬ª    .pdf,          animation.asy,      ( ,     ) -  4 ,     ,    -,    :           : ,    .      ,    ( )       .     animation.asy: <br><br><pre> <code class="plaintext hljs">string format=nativeformat(); plain.shipout(name,f,format=format,view=false); files.push(name+"."+format); shipped=false;</code> </pre><br>  ,        izgraphiki.asy: <br><br><pre> <code class="plaintext hljs">//string format=nativeformat(); //plain.shipout(name,f,format=format,view=false); //files.push(name+"."+format); //shipped=false;</code> </pre><br>      izgraphiki.asy: <br><br><div class="spoiler"> <b class="spoiler_title"> izgraphiki.asy</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">/***** * animation.asy * Andy Hammerlindl and John Bowman 2005/11/06 * * Produce GIF, inline PDF, or other animations. *****/ // animation delay is in milliseconds real animationdelay=50; typedef frame enclosure(frame); frame NoBox(frame f) { return f; } enclosure BBox(real xmargin=0, real ymargin=xmargin, pen p=currentpen, filltype filltype=NoFill) { return new frame(frame f) { box(f,xmargin,ymargin,p,filltype,above=false); return f; }; } struct animation { picture[] pictures; string[] files; int index; string prefix; bool global; // If true, use a global scaling for all frames; this requires // extra memory since the actual shipout is deferred until all frames have // been generated. void operator init(string prefix="", bool global=true) { prefix=replace(stripdirectory(outprefix(prefix))," ","_"); this.prefix=prefix; this.global=global; } string basename(string prefix=stripextension(prefix)) { return "_"+prefix; } string name(string prefix, int index) { return stripextension(prefix)+"+"+string(index); } private string nextname() { string name=basename(name(prefix,index)); ++index; return name; } void shipout(string name=nextname(), frame f) { // string format=nativeformat(); // plain.shipout(name,f,format="png",view=false); //generiruet!!!! //files.push(name+"."+format); // shipped=false; } void add(picture pic=currentpicture, enclosure enclosure=NoBox) { if(global) { ++index; pictures.push(pic.copy()); } else this.shipout(enclosure(pic.fit())); } void purge(bool keep=settings.keep) { if(!keep) { for(int i=0; i &lt; files.length; ++i) delete(files[i]); } } int merge(int loops=0, real delay=animationdelay, string format="gif", string options="", bool keep=settings.keep) { string args="-loop " +(string) loops+" -delay "+(string)(delay/10)+ " -alpha Off -dispose Background "+options; for(int i=0; i &lt; files.length; ++i) args += " " +files[i]; int rc=convert(args,prefix+"."+format,format=format); this.purge(keep); if(rc == 0) animate(file=prefix+"."+format,format=format); else abort("merge failed"); return rc; } void glmovie(string prefix=prefix, projection P=currentprojection) { if(!view() || settings.render == 0) return; fit(prefix,pictures,view=true,P); } // Export all frames with the same scaling. void export(string prefix=prefix, enclosure enclosure=NoBox, bool multipage=false, bool view=false, projection P=currentprojection) { if(pictures.length == 0) return; if(!global) multipage=false; bool inlinetex=settings.inlinetex; if(multipage) settings.inlinetex=false; frame multi; frame[] fits=fit(prefix,pictures,view=false,P); for(int i=0; i &lt; fits.length; ++i) { string s=name(prefix,i); if(multipage) { add(multi,enclosure(fits[i])); newpage(multi); files.push(s+"."+nativeformat()); } else { if(pictures[i].empty3() || settings.render &lt;= 0) this.shipout(s,enclosure(fits[i])); else // 3D frames files.push(s+"."+nativeformat()); } } if(multipage) { plain.shipout(prefix,multi,view=view); settings.inlinetex=inlinetex; } shipped=true; } string load(int frames, real delay=animationdelay, string options="", bool multipage=false) { if(!global) multipage=false; string s="\animategraphics["+options+"]{"+format("%.18f",1000/delay,"C")+ "}{"+basename(); if(!multipage) s += "+"; s += "}{0}{"+string(frames-1)+"}"; return s; } bool pdflatex() { return latex() &amp;&amp; pdf(); } string pdf(enclosure enclosure=NoBox, real delay=animationdelay, string options="", bool keep=settings.keep, bool multipage=true) { if(settings.inlinetex) multipage=true; if(!global) multipage=false; if(!pdflatex()) abort("inline pdf animations require -tex pdflatex or -tex xelatex"); if(settings.outformat != "") settings.outformat="pdf"; string filename=basename(); string pdfname=filename+".pdf"; if(global) export(filename,enclosure,multipage=multipage); shipped=false; if(!keep) { exitfcn currentexitfunction=atexit(); void exitfunction() { if(currentexitfunction != null) currentexitfunction(); if(multipage || !settings.inlinetex) this.purge(); if(multipage &amp;&amp; !settings.inlinetex) delete(pdfname); } atexit(exitfunction); } if(!multipage) delete(pdfname); return load(index,delay,options,multipage); } int movie(enclosure enclosure=NoBox, int loops=0, real delay=animationdelay, string format=settings.outformat == "" ? "gif" : settings.outformat, string options="", bool keep=settings.keep) { if(global) { if(format == "pdf") { export(enclosure,multipage=true,view=true); return 0; } export(enclosure); } return merge(loops,delay,format,options,keep); } } animation operator init() { animation a=animation(); return a; }</code> </pre><br></div></div><br> ,   <br><br><pre> <code class="plaintext hljs">plain.shipout(name,f,format="png",view=false); //generiruet!!!!</code> </pre><br>      -   animation.asy,      ,     :    ,        .      .gif  ,     izgraphiki.asy,         izgraphikigif.asy  animation.asy    ‚Äî <pre> <code class="plaintext hljs">plain.shipout(name,f,format= format,view=false);</code> </pre><br> , . .     izgraphikigif.asy   : <br><br><pre> <code class="plaintext hljs">//plain.shipout(name,f,format= format,view=false);</code> </pre><br> ,      .  ,  animation.asy  <br> izgraphikigif.asy      ,    .   ,    izgraphikigif.asy    .pdf   ,     2     . ,  , -  if,  ,   : , ,         Asymptote. , ,   ,    ,     ,     ,        ‚Äì        : <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="plaintext hljs">cd /d %0\.. echo off set n=2 set name=kriv echo settings.twice=true; &gt;%name%.asy echo settings.prc=false; &gt;&gt; %name%.asy echo // Uncomment the following 2 lines to support pdf animations: &gt;&gt;%name%.asy echo usepackage("animate"^); &gt;&gt;%name%.asy echo settings.tex="pdflatex"; &gt;&gt;%name%.asy echo import sinoid; &gt;&gt;%name%.asy echo animation a; &gt;&gt;%name%.asy echo int n=%n%; &gt;&gt;%name%.asy echo for(int i=0; i ^&lt;= n; ++i^) { &gt;&gt;%name%.asy echo a.add(^); // Add currentpicture to animation. &gt;&gt;%name%.asy echo restore(^); &gt;&gt;%name%.asy echo } &gt;&gt;%name%.asy echo erase(^); &gt;&gt;%name%.asy echo label(a.pdf(BBox(0.25cm^),delay=250,"controls",multipage=false^)^); &gt;&gt;%name%.asy for /l %%k in (0,1,%n%) do ( echo import graph; &gt; %name%+%%k.asy echo settings.twice=true; &gt;&gt; %name%+%%k.asy echo usepackage("animate"^); &gt;&gt; %name%+%%k.asy echo settings.tex="pdflatex"; &gt;&gt; %name%+%%k.asy echo import animation; &gt;&gt; %name%+%%k.asy echo limits((-6.3,-6.3^),(6.3,6.3^)^); &gt;&gt; %name%+%%k.asy echo size(0,100^); &gt;&gt; %name%+%%k.asy echo animation a=animation(global=false^);&gt;&gt;%name%+%%k.asy echo for(int i=0; i ^&lt;= 0; ++i^) { &gt;&gt;%name%+%%k.asy echo real r=0.925; &gt;&gt; %name%+%%k.asy echo real R=3.61; &gt;&gt; %name%+%%k.asy echo real d=1.39; &gt;&gt; %name%+%%k.asy echo real x(real t^) {return (R+r^)*cos(t^)-d*cos((R+r^)*t/r^);} &gt;&gt; %name%+%%k.asy echo real y(real t^) {return (R+r^)*sin(t^)-d*sin((R+r^)*t/r^);} &gt;&gt; %name%+%%k.asy echo draw(graph(x,y,0,2*pi*%%k/%n%^),green^); &gt;&gt; %name%+%%k.asy echo axes("$x$","$y$",Arrow^); &gt;&gt; %name%+%%k.asy echo a.add(^); // Add currentpicture to animation. &gt;&gt;%name%+%%k.asy echo restore(^); &gt;&gt;%name%+%%k.asy echo } &gt;&gt;%name%+%%k.asy echo erase(^); &gt;&gt;%name%+%%k.asy echo // Merge the images into a pdf animation. &gt;&gt;%name%+%%k.asy echo label(a.pdf(^)^); &gt;&gt;%name%+%%k.asy ) rem for /f %%l in (0,1,%n%) do asy '%name%+%%l'.asy rem asy *.asy for /l %%l in (0,1,%n%) do ( asy %name%+%%l.asy taskkill /IM AcroRd32.exe ) for /l %%l in (0,1,%n%) do rename %name%+%%l.pdf _%name%+%%l.pdf asy %name%.asy</code> </pre><br></div></div><br>  .  ,  ,    :  kriv.asy    , 2d-.pdf ,      ,  ,   kriv.asy  Asymptote     ,   kriv.pdf  ,  , ,    .pdf,    .asy  :   ,    ,      . ,   :      play ,     ,  ,      ,   !  ‚Äì   . , ,    ,     :    kriv      epicykloida.        ,           Astroida.           name     krivaja,   ‚Äì  kriv     .pdf    .  ,      Asymptote:    , ,      Astroida.asy,     .      .mpg    (,   )      ,      , ,  , -     . ,  ,       ,      Asymptote :  .asy,     .pdf    .asy,     .gif, -, , . <br><br>     .asy,     .pdf, : <br><br><pre> <code class="plaintext hljs">label(a.pdf());</code> </pre><br>      .asy,     .gif,  : <br><br><pre> <code class="plaintext hljs">a.movie();</code> </pre><br>      .asy,     .mpg,  ,      .asy,     .gif.    .mpg      .asy,          <br><br><pre> <code class="plaintext hljs">settings.twice=true;</code> </pre> <br>  , , . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr468125/">https://habr.com/ru/post/fr468125/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr468107/index.html">Comment cr√©er un mod√®le plus pr√©cis√©ment que transfermarkt et ne pas pr√©dire ou ce qui affecte le co√ªt des transferts par-dessus tout</a></li>
<li><a href="../fr468109/index.html">Ils disent que Samara est une ville de Javists, mais nous y conduisons un mitap PHP</a></li>
<li><a href="../fr468111/index.html">PSD2 - coup de pied pour les banques</a></li>
<li><a href="../fr468117/index.html">Ethernet, FTP, Telnet, HTTP, Bluetooth - les bases de l'analyse du trafic. R√©solution de probl√®mes sur un r√©seau avec r0ot-mi. partie 1</a></li>
<li><a href="../fr468121/index.html">Comment je ne suis pas devenu programmeur √† 35 ans</a></li>
<li><a href="../fr468127/index.html">Evolution CMS 2.0 sur les composants Laravel 6.0 - l'√©volution naturelle de MODX Evolution</a></li>
<li><a href="../fr468135/index.html">Top 10 des rapports JPoint 2019</a></li>
<li><a href="../fr468139/index.html">√âcouteurs de natation Aftershokz Xtrainerz avec son √† conduction osseuse - Cool</a></li>
<li><a href="../fr468141/index.html">T√¢che: extraire des expressions cl√©s du texte en russe. Python NLP</a></li>
<li><a href="../fr468145/index.html">Tests ou types? - Version rouille</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>