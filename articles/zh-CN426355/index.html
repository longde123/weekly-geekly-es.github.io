<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸš¶ğŸ½ â›ªï¸ ğŸ‘¨â€ğŸ³ é€‚ç”¨äºGPUçš„Math.Sinï¼ˆdoubleï¼‰å‡½æ•° ğŸ›ŒğŸ» ğŸ ğŸ–•ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å‰è¨€ 
 æˆ‘éœ€è¦å®æ—¶åœ°åœ¨è§†é¢‘å¡å¤„ç†å™¨ä¸Šè®¡ç®—å‡ºå¼§åº¦ã€‚ 

 ä½œè€…å¹¶æ²¡æœ‰è®¾å®šè¶…è¶Šæ ‡å‡†å‡½æ•°System.Math.Sinï¼ˆï¼‰ï¼ˆCï¼ƒï¼‰çš„ç›®æ ‡ï¼Œå¹¶ä¸”æ²¡æœ‰å®ç°ã€‚ 

 å·¥ä½œçš„ç»“æœå’Œæˆ‘çš„é€‰æ‹©ï¼ˆå¯¹äºé‚£äº›ä¸æƒ³é˜…è¯»çš„äººï¼‰ï¼š 

 Sin_3ï¼ˆradï¼‰ 

using System; class Math_d { con...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>é€‚ç”¨äºGPUçš„Math.Sinï¼ˆdoubleï¼‰å‡½æ•°</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426355/"><h3> å‰è¨€ </h3><br> æˆ‘éœ€è¦å®æ—¶åœ°åœ¨è§†é¢‘å¡å¤„ç†å™¨ä¸Šè®¡ç®—å‡ºå¼§åº¦ã€‚ <br><br> ä½œè€…å¹¶æ²¡æœ‰è®¾å®šè¶…è¶Šæ ‡å‡†å‡½æ•°System.Math.Sinï¼ˆï¼‰ï¼ˆCï¼ƒï¼‰çš„ç›®æ ‡ï¼Œå¹¶ä¸”æ²¡æœ‰å®ç°ã€‚ <br><a name="habracut"></a><br>  <i>å·¥ä½œçš„ç»“æœå’Œæˆ‘çš„é€‰æ‹©ï¼ˆå¯¹äºé‚£äº›ä¸æƒ³é˜…è¯»çš„äººï¼‰ï¼š</i> <br><br><div class="spoiler">  <b class="spoiler_title">Sin_3ï¼ˆradï¼‰</b> <div class="spoiler_text"><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Math_d { const <span class="hljs-type"><span class="hljs-type">double</span></span> PI025 = Math.PI / <span class="hljs-number"><span class="hljs-number">4</span></span>; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>^<span class="hljs-number"><span class="hljs-number">17</span></span> = <span class="hljs-number"><span class="hljs-number">131072</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> ),   <span class="hljs-number"><span class="hljs-number">10000</span></span> ( ),  <span class="hljs-number"><span class="hljs-number">2</span></span>^<span class="hljs-number"><span class="hljs-number">21</span></span> = <span class="hljs-number"><span class="hljs-number">22097152</span></span> (<span class="hljs-number"><span class="hljs-number">16</span></span> )   +<span class="hljs-number"><span class="hljs-number">-1</span></span> ( ) (  ) &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; const <span class="hljs-type"><span class="hljs-type">int</span></span> length_mem = <span class="hljs-number"><span class="hljs-number">22097152</span></span>; const <span class="hljs-type"><span class="hljs-type">int</span></span> length_mem_M1 = length_mem - <span class="hljs-number"><span class="hljs-number">1</span></span>; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;    sin,    . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span>[] mem_sin; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;    cos,    . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span>[] mem_cos; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;  ,   sin,    . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">void</span></span> Initialise() { Ini_Mem_Sin(); Ini_Mem_Cos(); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;       Cos,   . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;&lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Sin_3(<span class="hljs-type"><span class="hljs-type">double</span></span> rad) { <span class="hljs-type"><span class="hljs-type">double</span></span> rad_025; <span class="hljs-type"><span class="hljs-type">int</span></span> i; //    //<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rad &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { rad = -rad + Math.PI; } i = (<span class="hljs-type"><span class="hljs-type">int</span></span>)(rad / PI025); //   rad_025 = rad - PI025 * i; //     ( ) i = i &amp; <span class="hljs-number"><span class="hljs-number">7</span></span>; //      <span class="hljs-number"><span class="hljs-number">8</span></span> //    switch (i) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Sin_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Cos_Lerp(PI025 - rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Cos_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Sin_Lerp(PI025 - rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Sin_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Cos_Lerp(PI025 - rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Cos_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Sin_Lerp(PI025 - rad_025); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;   sin    &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">void</span></span> Ini_Mem_Sin() { <span class="hljs-type"><span class="hljs-type">double</span></span> rad; mem_sin = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[length_mem]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; length_mem; i++) { rad = (i * PI025) / length_mem_M1; mem_sin[i] = Math.Sin(rad); } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;   cos    &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">void</span></span> Ini_Mem_Cos() { <span class="hljs-type"><span class="hljs-type">double</span></span> rad; mem_cos = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[length_mem]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; length_mem; i++) { rad = (i * PI025) / length_mem_M1; mem_cos[i] = Math.Cos(rad); } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;      sin  <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;     <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/param&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span> Sin_Lerp(<span class="hljs-type"><span class="hljs-type">double</span></span> rad) { <span class="hljs-type"><span class="hljs-type">int</span></span> i_0; <span class="hljs-type"><span class="hljs-type">int</span></span> i_1; <span class="hljs-type"><span class="hljs-type">double</span></span> i_0d; <span class="hljs-type"><span class="hljs-type">double</span></span> percent; <span class="hljs-type"><span class="hljs-type">double</span></span> a; <span class="hljs-type"><span class="hljs-type">double</span></span> b; <span class="hljs-type"><span class="hljs-type">double</span></span> s; percent = rad / PI025; i_0d = percent * length_mem_M1; i_0 = (<span class="hljs-type"><span class="hljs-type">int</span></span>)i_0d; i_1 = i_0 + <span class="hljs-number"><span class="hljs-number">1</span></span>; a = mem_sin[i_0]; b = mem_sin[i_1]; s = i_0d - i_0; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Lerp(a, b, s); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;      cos  <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;     <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/param&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span> Cos_Lerp(<span class="hljs-type"><span class="hljs-type">double</span></span> rad) { <span class="hljs-type"><span class="hljs-type">int</span></span> i_0; <span class="hljs-type"><span class="hljs-type">int</span></span> i_1; <span class="hljs-type"><span class="hljs-type">double</span></span> i_0d; <span class="hljs-type"><span class="hljs-type">double</span></span> percent; <span class="hljs-type"><span class="hljs-type">double</span></span> a; <span class="hljs-type"><span class="hljs-type">double</span></span> b; <span class="hljs-type"><span class="hljs-type">double</span></span> s; percent = rad / PI025; i_0d = percent * length_mem_M1; i_0 = (<span class="hljs-type"><span class="hljs-type">int</span></span>)i_0d; i_1 = i_0 + <span class="hljs-number"><span class="hljs-number">1</span></span>; a = mem_cos[i_0]; b = mem_cos[i_1]; s = i_0d - i_0; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Lerp(a, b, s); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;      . (<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + s * (b - a)) &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="a"&gt;  . &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="b"&gt;  . &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="s"&gt;  . <span class="hljs-number"><span class="hljs-number">0</span></span> = a, <span class="hljs-number"><span class="hljs-number">1</span></span> = b, <span class="hljs-number"><span class="hljs-number">0.5</span></span> =   a  b. &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Lerp(<span class="hljs-type"><span class="hljs-type">double</span></span> a, <span class="hljs-type"><span class="hljs-type">double</span></span> b, <span class="hljs-type"><span class="hljs-type">double</span></span> s) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + s * (b - a); } }</code> </pre> <br></div></div><br><h3> å‡ºç‰ˆç†ç”± </h3><br><ul><li>  HLSLè¯­è¨€ä¸­æ²¡æœ‰ç”¨äºåŒç²¾åº¦çš„æ ‡å‡†Sinå‡½æ•°ï¼ˆä½†è¿™å¹¶ä¸å‡†ç¡®ï¼‰ </li><li>  Internetä¸Šå…³äºæ­¤ä¸»é¢˜çš„ä¿¡æ¯å¾ˆå°‘ã€‚ </li></ul><br><h3> è€ƒè™‘çš„æ–¹æ³• </h3><br><ul><li> æ³°å‹’ç³»åˆ—<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼ˆç»´åŸºç™¾ç§‘ï¼‰</a> </li><li> å¤šé¡¹å¼ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å‡½æ•°ä½œè€…ï¼šâ€œ asvpâ€</a> ï¼‰ </li><li>  Math.Sinå’ŒMath.Cosçš„é¢„è®¡ç®—ç»“æœçš„çº¿æ€§æ’å€¼ï¼ˆä½œè€…ï¼šï¼‰ </li></ul><br><h3> åˆ†æå‚æ•° </h3><br><ul><li>  Math.Sinçš„å‡†ç¡®æ€§ </li><li> ç›¸å¯¹äºMath.Sinçš„é€Ÿåº¦ </li></ul><br>  <u>é™¤äº†åˆ†æä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å°†æ”¹å–„å…¶æ€§èƒ½ã€‚</u> <br><br><h4> æ³°å‹’æ’å </h4><br> ä¼˜ç‚¹ï¼š <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">æœ€é«˜ç²¾åº¦</b> <div class="spoiler_text"> è¯¥å‡½æ•°ç”¨äºè®¡ç®—Sinå€¼ï¼Œå¯ç”¨äºè®¡ç®—<u>æ— é™ç²¾ç¡®çš„</u> Sin <u>å€¼</u> ã€‚ å®ƒè¿›è¡Œçš„è¿­ä»£æ¬¡æ•°è¶Šå¤šï¼Œåœ¨è¾“å‡ºï¼ˆå‡è®¾ï¼‰ä¸­è·å¾—çš„å€¼è¶Šå‡†ç¡®ã€‚ åœ¨ç¼–ç¨‹å®è·µä¸­ï¼Œå€¼å¾—è€ƒè™‘çš„æ˜¯æ ¹æ®æ‰€ä½¿ç”¨çš„å‚æ•°ç±»å‹ï¼ˆåŒç²¾åº¦ï¼Œæµ®ç‚¹å‹ï¼Œåè¿›åˆ¶ç­‰ï¼‰çš„èˆå…¥è¯¯å·®ã€‚ </div></div></li><li><div class="spoiler">  <b class="spoiler_title">è®¡ç®—ä»»ä½•è§’åº¦</b> <div class="spoiler_text"> æ‚¨å¯ä»¥è¾“å…¥ä»»ä½•å€¼ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œå› æ­¤æ— éœ€ç›‘è§†è¾“å…¥å‚æ•°ã€‚ <br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">ç‹¬ç«‹æ€§</b> <div class="spoiler_text"> å®ƒä¸éœ€è¦è¿›è¡Œåˆæ­¥è®¡ç®—ï¼ˆå¦‚ä¸‹æ–‡æ‰€è¿°çš„åŠŸèƒ½ï¼‰ï¼Œå¹¶ä¸”é€šå¸¸æ˜¯ç»„è£…æ›´å¿«çš„åŠŸèƒ½çš„åŸºç¡€ã€‚ <br></div></div></li></ul><br> ç¼ºç‚¹ï¼š <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">æä½çš„é€Ÿåº¦ï¼ˆ4-10ï¼…ï¼‰</b> <div class="spoiler_text"> è¦ä½¿ç²¾åº¦æ¥è¿‘Math.Sinçš„ç²¾åº¦ï¼Œéœ€è¦è¿›è¡Œå¤§é‡çš„è¿­ä»£ï¼Œç»“æœå®ƒçš„å·¥ä½œé€Ÿåº¦æ¯”æ ‡å‡†å‡½æ•°æ…¢25å€ã€‚ <br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">è§’åº¦è¶Šå¤§ï¼Œç²¾åº¦è¶Šä½</b> <div class="spoiler_text"> åœ¨å‡½æ•°ä¸­è¾“å…¥çš„è§’åº¦è¶Šå¤§ï¼Œè¦è·å¾—ä¸Math.Sinç›¸åŒçš„ç²¾åº¦ï¼Œéœ€è¦è¿›è¡Œæ›´å¤šçš„è¿­ä»£ã€‚ <br></div></div></li></ul><br>  <i><b>åŸå§‹å¤–è§‚ï¼ˆé€Ÿåº¦ï¼š4ï¼…ï¼‰ï¼š</b></i> <br><br> æ ‡å‡†å‡½æ•°åŒ…æ‹¬è®¡ç®—é˜¶ä¹˜ï¼Œä»¥åŠæ¯æ¬¡è¿­ä»£æé«˜å¹‚ã€‚ <br><br><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/c847dfe24de5ad14ebd936999a7183ba96d81717" alt="å›¾ç‰‡"><br><br>  <i><b>ä¿®æ”¹ï¼ˆé€Ÿåº¦ï¼š10ï¼…ï¼‰ï¼š</b></i> <br><br> å¯ä»¥åœ¨ä¸€ä¸ªå‘¨æœŸå†…å‡å°‘æŸäº›ç¨‹åº¦çš„è®¡ç®—ï¼ˆa * = aa;ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥é¢„å…ˆè®¡ç®—å…¶ä»–é˜¶ä¹˜å¹¶å°†å…¶æ”¾å…¥æ•°ç»„ä¸­ï¼ŒåŒæ—¶ä¸èƒ½å°†ç¬¦å·ï¼ˆ+ï¼Œ-ï¼Œ+ï¼Œ...ï¼‰è½¬æ¢ä¸ºå¹‚ï¼Œä¹Ÿå¯ä»¥å‡å°‘å…¶è®¡ç®—ä½¿ç”¨ä»¥å‰çš„å€¼ã€‚ <br><br> ç»“æœæ˜¯ä»¥ä¸‹ä»£ç ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ç½ªæ¶ï¼ˆradï¼Œæ­¥éª¤ï¼‰</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"> // &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;  ,    Fact &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span>[] fact; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;            . ///   rad,   . ///  ( Math): <span class="hljs-number"><span class="hljs-number">4</span></span>% (fps)  steps = <span class="hljs-number"><span class="hljs-number">17</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;   .      pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="steps"&gt;  :  ,   .  pi/<span class="hljs-number"><span class="hljs-number">4</span></span>   E<span class="hljs-number"><span class="hljs-number">-15</span></span>  <span class="hljs-number"><span class="hljs-number">8.</span></span> &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Sin(<span class="hljs-type"><span class="hljs-type">double</span></span> rad, <span class="hljs-type"><span class="hljs-type">int</span></span> steps) { <span class="hljs-type"><span class="hljs-type">double</span></span> ret; <span class="hljs-type"><span class="hljs-type">double</span></span> a; //,     <span class="hljs-type"><span class="hljs-type">double</span></span> aa; // *  <span class="hljs-type"><span class="hljs-type">int</span></span> i_f; //  <span class="hljs-type"><span class="hljs-type">int</span></span> sign; // (  -  +,     = +) ret = <span class="hljs-number"><span class="hljs-number">0</span></span>; sign = <span class="hljs-number"><span class="hljs-number">-1</span></span>; aa = rad * rad; a = rad; i_f = <span class="hljs-number"><span class="hljs-number">1</span></span>; //      <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> n = <span class="hljs-number"><span class="hljs-number">0</span></span>; n &lt; steps; n++) { sign *= <span class="hljs-number"><span class="hljs-number">-1</span></span>; ret += sign * a / Fact(i_f); a *= aa; i_f += <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;   (n!).  n &gt; fact.Length,  <span class="hljs-number"><span class="hljs-number">-1.</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="n"&gt; ,     . &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Fact(<span class="hljs-type"><span class="hljs-type">int</span></span> n) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; n &lt; fact.Length) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fact[n]; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">Debug</span></span>.Log("    . n = " + n + ",   = " + fact.Length); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;  . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">void</span></span> Init_Fact() { <span class="hljs-type"><span class="hljs-type">int</span></span> steps; steps = <span class="hljs-number"><span class="hljs-number">46</span></span>; fact = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[steps]; fact[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> n = <span class="hljs-number"><span class="hljs-number">1</span></span>; n &lt; steps; n++) { fact[n] = fact[n - <span class="hljs-number"><span class="hljs-number">1</span></span>] * n; } }</code> </pre><br></div></div><br>  <i><b>å…¨æ™¯ï¼ˆé€Ÿåº¦ï¼š19ï¼…ï¼‰ï¼š</b></i> <br><br> æˆ‘ä»¬çŸ¥é“è§’åº¦è¶Šå°ï¼Œéœ€è¦çš„è¿­ä»£è¶Šå°‘ã€‚ æˆ‘ä»¬éœ€è¦çš„æœ€å°è§’åº¦ä¸º0.25 * PIï¼Œå³  45åº¦ã€‚ è€ƒè™‘åˆ°Sinå’ŒCosåœ¨45åº¦çš„èŒƒå›´å†…ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—Sinçš„æ‰€æœ‰å€¼ï¼ˆä»-1åˆ°1ï¼‰ï¼ˆåœ¨2 * PIèŒƒå›´å†…ï¼‰ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åœ†ï¼ˆ2 * PIï¼‰åˆ†ä¸º8ä¸ªéƒ¨åˆ†ï¼Œå¹¶ä¸ºæ¯ä¸ªéƒ¨åˆ†æŒ‡ç¤ºäº†è‡ªå·±çš„æ­£å¼¦è®¡ç®—æ–¹æ³•ã€‚ æ­¤å¤–ï¼Œä¸ºäº†åŠ å¿«è®¡ç®—é€Ÿåº¦ï¼Œæˆ‘ä»¬å°†æ‹’ç»ä½¿ç”¨è·å¾—ä½™æ•°ï¼ˆï¼…ï¼‰çš„åŠŸèƒ½ï¼ˆä»¥è·å–45åº¦åŒºåŸŸå†…è§’åº¦çš„ä½ç½®ï¼‰ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">Sin_2ï¼ˆradï¼‰</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"> // &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;  ,    Fact &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span>[] fact; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;   Sin &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;&lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Sin_2(<span class="hljs-type"><span class="hljs-type">double</span></span> rad) { <span class="hljs-type"><span class="hljs-type">double</span></span> rad_025; <span class="hljs-type"><span class="hljs-type">int</span></span> i; //rad = rad % PI2; //% -   .  , fps   <span class="hljs-number"><span class="hljs-number">90</span></span>  <span class="hljs-number"><span class="hljs-number">150</span></span> (  <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span>   ) //rad_025 = rad % PI025; i = (<span class="hljs-type"><span class="hljs-type">int</span></span>)(rad / PI025); rad_025 = rad - PI025 * i; i = i &amp; <span class="hljs-number"><span class="hljs-number">7</span></span>; //     <span class="hljs-number"><span class="hljs-number">8</span></span>  //    switch (i) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Sin(rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Cos(PI025 - rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Cos(rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Sin(PI025 - rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Sin(rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Cos(PI025 - rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Cos(rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Sin(PI025 - rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;            . ///   rad,   . ///  ( Math): <span class="hljs-number"><span class="hljs-number">10</span></span>% (fps)  steps = <span class="hljs-number"><span class="hljs-number">17</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;   .      pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="steps"&gt;  :  ,   .  pi/<span class="hljs-number"><span class="hljs-number">4</span></span>   E<span class="hljs-number"><span class="hljs-number">-15</span></span>  <span class="hljs-number"><span class="hljs-number">8.</span></span> &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Sin(<span class="hljs-type"><span class="hljs-type">double</span></span> rad, <span class="hljs-type"><span class="hljs-type">int</span></span> steps) { <span class="hljs-type"><span class="hljs-type">double</span></span> ret; <span class="hljs-type"><span class="hljs-type">double</span></span> a; //,     <span class="hljs-type"><span class="hljs-type">double</span></span> aa; // *  <span class="hljs-type"><span class="hljs-type">int</span></span> i_f; //  <span class="hljs-type"><span class="hljs-type">int</span></span> sign; // (  -  +,     = +) ret = <span class="hljs-number"><span class="hljs-number">0</span></span>; sign = <span class="hljs-number"><span class="hljs-number">-1</span></span>; aa = rad * rad; a = rad; i_f = <span class="hljs-number"><span class="hljs-number">1</span></span>; //      <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> n = <span class="hljs-number"><span class="hljs-number">0</span></span>; n &lt; steps; n++) { sign *= <span class="hljs-number"><span class="hljs-number">-1</span></span>; ret += sign * a / Fact(i_f); a *= aa; i_f += <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;            . ///   rad,   . ///  ( Math): <span class="hljs-number"><span class="hljs-number">10</span></span>% (fps), <span class="hljs-number"><span class="hljs-number">26</span></span>% (test)  steps = <span class="hljs-number"><span class="hljs-number">17</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;   .      pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="steps"&gt;  :  ,   .  pi/<span class="hljs-number"><span class="hljs-number">4</span></span>   E<span class="hljs-number"><span class="hljs-number">-15</span></span>  <span class="hljs-number"><span class="hljs-number">8.</span></span> &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Cos(<span class="hljs-type"><span class="hljs-type">double</span></span> rad, <span class="hljs-type"><span class="hljs-type">int</span></span> steps) { <span class="hljs-type"><span class="hljs-type">double</span></span> ret; <span class="hljs-type"><span class="hljs-type">double</span></span> a; <span class="hljs-type"><span class="hljs-type">double</span></span> aa; // *  <span class="hljs-type"><span class="hljs-type">int</span></span> i_f; //  <span class="hljs-type"><span class="hljs-type">int</span></span> sign; // (  -  +,     = +) ret = <span class="hljs-number"><span class="hljs-number">0</span></span>; sign = <span class="hljs-number"><span class="hljs-number">-1</span></span>; aa = rad * rad; a = <span class="hljs-number"><span class="hljs-number">1</span></span>; i_f = <span class="hljs-number"><span class="hljs-number">0</span></span>; //      <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> n = <span class="hljs-number"><span class="hljs-number">0</span></span>; n &lt; steps; n++) { sign *= <span class="hljs-number"><span class="hljs-number">-1</span></span>; ret += sign * a / Fact(i_f); a *= aa; i_f += <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;   (n!).  n &gt; fact.Length,  <span class="hljs-number"><span class="hljs-number">-1.</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="n"&gt; ,     . &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Fact(<span class="hljs-type"><span class="hljs-type">int</span></span> n) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; n &lt; fact.Length) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fact[n]; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">Debug</span></span>.Log("    . n = " + n + ",   = " + fact.Length); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;  . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">void</span></span> Init_Fact() { <span class="hljs-type"><span class="hljs-type">int</span></span> steps; steps = <span class="hljs-number"><span class="hljs-number">46</span></span>; fact = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[steps]; fact[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> n = <span class="hljs-number"><span class="hljs-number">1</span></span>; n &lt; steps; n++) { fact[n] = fact[n - <span class="hljs-number"><span class="hljs-number">1</span></span>] * n; } }</code> </pre> <br></div></div><br><h3> å¤šé¡¹å¼ </h3><br> æˆ‘åœ¨Internetä¸Šé‡åˆ°äº†è¿™ç§æ–¹æ³•ï¼Œä½œè€…éœ€è¦ä¸€ç§å¿«é€Ÿçš„Sinæœç´¢åŠŸèƒ½ï¼Œä»¥å®ç°ä¸¤å€çš„ä½å‡†ç¡®æ€§ï¼ˆé”™è¯¯&lt;0.000 001ï¼‰ï¼Œè€Œæ— éœ€ä½¿ç”¨é¢„å…ˆè®¡ç®—çš„å€¼çš„åº“ã€‚ <br><br> ä¼˜ç‚¹ï¼š <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">é«˜é€Ÿï¼ˆ9-84ï¼…ï¼‰</b> <div class="spoiler_text"> æœ€åˆï¼Œæœªæ›´æ”¹çš„æŠ›å‡ºå¤šé¡¹å¼æ˜¾ç¤ºçš„é€Ÿåº¦æ˜¯åŸå§‹Math.Sinçš„9ï¼…ï¼Œæ…¢äº†10å€ã€‚ ç”±äºè¿›è¡Œäº†å¾®å°çš„æ›´æ”¹ï¼Œé€Ÿåº¦æ€¥å‰§æé«˜åˆ°äº†84ï¼…ï¼Œå¦‚æœæ‚¨é—­ä¸ŠåŒçœ¼ä»¥ä¿æŒå‡†ç¡®æ€§ï¼Œè¿™è¿˜ä¸é”™ã€‚ <br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">æ— éœ€é¢å¤–çš„åˆæ­¥è®¡ç®—å’Œå­˜å‚¨</b> <div class="spoiler_text"> å¦‚æœä¸Šæ–¹å’Œä¸‹æ–¹éƒ½éœ€è¦ç»„æˆå˜é‡æ•°ç»„ä»¥åŠ å¿«è®¡ç®—é€Ÿåº¦ï¼Œåˆ™æ­¤å¤„æ‰€æœ‰å…³é”®ç³»æ•°å‡ç”±äº²åˆ‡è®¡ç®—ï¼Œå¹¶ç”±ä½œè€…æœ¬äººä»¥å¸¸é‡çš„å½¢å¼æ”¾å…¥å…¬å¼ä¸­ã€‚ <br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">ç²¾åº¦é«˜äºMathf.Sinï¼ˆæµ®ç‚¹ï¼‰</b> <div class="spoiler_text"> ä¸ºäº†æ¯”è¾ƒï¼š <br><br>  0.84147 <b>1</b> -Mathf.Sinï¼ˆ1ï¼‰ï¼ˆç»Ÿä¸€å¼•æ“ï¼‰; <br>  0.841470984807897-æ•°å­¦æ­£å¼¦ï¼ˆ1ï¼‰ï¼ˆæ ‡å‡†Cï¼ƒå‡½æ•°ï¼‰; <br>  0.8414709 <b>56802368</b> -sinï¼ˆ1ï¼‰ï¼ˆGPUï¼Œhlslè¯­è¨€ï¼‰; <br>  0.84147 <b>1184637935</b> - <b>Sin_0ï¼ˆ1ï¼‰</b> ã€‚ <br></div></div></li></ul><br> ç¼ºç‚¹ï¼š <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">ä¸æ™®é</b> <div class="spoiler_text"> æ‚¨æ— æ³•æ‰‹åŠ¨è°ƒæ•´ç²¾åº¦ï¼Œå› ä¸ºå°šä¸çŸ¥é“ä½œè€…ä½¿ç”¨ä»€ä¹ˆå·¥å…·æ¥è®¡ç®—æ­¤å¤šé¡¹å¼ã€‚ <br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">æ€ä¹ˆäº†</b> <div class="spoiler_text"> ä¸ºä»€ä¹ˆä½œè€…éœ€è¦ä¸€ä¸ªä¸éœ€è¦ä»»ä½•æ•°ç»„ä¸”ç²¾åº¦å¦‚æ­¤ä¹‹ä½ï¼ˆç›¸å¯¹äºä¸¤å€ï¼‰çš„å‡½æ•°ï¼Ÿ <br></div></div></li></ul><br>  <i><b>åŸå§‹è§†å›¾ï¼š</b></i> <br><br><div class="spoiler">  <b class="spoiler_title">ç½ª_1ï¼ˆxï¼‰</b> <div class="spoiler_text"><pre> <code class="hljs cmake">/// &lt;summary&gt;  ( <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>): <span class="hljs-number"><span class="hljs-number">9</span></span>% (fps)&lt;/summary&gt; /// &lt;param name=<span class="hljs-string"><span class="hljs-string">"x"</span></span>&gt;     -<span class="hljs-number"><span class="hljs-number">2</span></span>*Pi  <span class="hljs-number"><span class="hljs-number">2</span></span>*Pi &lt;/param&gt; public static double Sin_1(double x) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0.9999997192673006</span></span> * x - <span class="hljs-number"><span class="hljs-number">0.1666657564532464</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Pow(x, <span class="hljs-number"><span class="hljs-number">3</span></span>) + <span class="hljs-number"><span class="hljs-number">0.008332803647181511</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Pow(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) - <span class="hljs-number"><span class="hljs-number">0.00019830197237204295</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Pow(x, <span class="hljs-number"><span class="hljs-number">7</span></span>) + <span class="hljs-number"><span class="hljs-number">2.7444305061093514</span></span>e-<span class="hljs-number"><span class="hljs-number">6</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Pow(x, <span class="hljs-number"><span class="hljs-number">9</span></span>) - <span class="hljs-number"><span class="hljs-number">2.442176561869478</span></span>e-<span class="hljs-number"><span class="hljs-number">8</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Pow(x, <span class="hljs-number"><span class="hljs-number">11</span></span>) + <span class="hljs-number"><span class="hljs-number">1.407555708887347</span></span>e-<span class="hljs-number"><span class="hljs-number">10</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Pow(x, <span class="hljs-number"><span class="hljs-number">13</span></span>) - <span class="hljs-number"><span class="hljs-number">4.240664814288337</span></span>e-<span class="hljs-number"><span class="hljs-number">13</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Pow(x, <span class="hljs-number"><span class="hljs-number">15</span></span>); }</code> </pre><br></div></div><br>  <i><b>é«˜çº§è§†å›¾ï¼š</b></i> <br><br><div class="spoiler">  <b class="spoiler_title">Sin_0ï¼ˆå¼§åº¦ï¼‰</b> <div class="spoiler_text"><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">//</span></span> &lt;summary&gt;  ( Math): <span class="hljs-number"><span class="hljs-number">83</span></span>% (fps)&lt;<span class="hljs-regexp"><span class="hljs-regexp">/summary&gt; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> &lt;param name=<span class="hljs-string"><span class="hljs-string">"rad"</span></span>&gt;     -<span class="hljs-number"><span class="hljs-number">2</span></span>*Pi  <span class="hljs-number"><span class="hljs-number">2</span></span>*Pi &lt;<span class="hljs-regexp"><span class="hljs-regexp">/param&gt; public static double Sin_0(double rad) { double x; double xx; double ret; xx = rad * rad; x = rad; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/1 ret = 0.9999997192673006 * x; x *= xx; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/3 ret -= 0.1666657564532464 * x; x *= xx; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/5 ret += 0.008332803647181511 * x; x *= xx; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/7 ret -= 0.00019830197237204295 * x; x *= xx; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/9 ret += 2.7444305061093514e-6 * x; x *= xx; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/11 ret -= 2.442176561869478e-8 * x; x *= xx; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/13 ret += 1.407555708887347e-10 * x; x *= xx; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/15 ret -= 4.240664814288337e-13 * x; return ret; }</span></span></code> </pre><br></div></div><br><h3> çº¿æ€§æ’è¡¥ </h3><br> æ­¤æ–¹æ³•åŸºäºæ•°â€‹â€‹ç»„ä¸­ä¸¤ä¸ªè®°å½•çš„ç»“æœä¹‹é—´çš„çº¿æ€§æ’å€¼ã€‚ <br> è¿™äº›æ¡ç›®åˆ†ä¸ºmem_sinå’Œmem_cosï¼Œå®ƒä»¬åŒ…å«æ ‡å‡†å‡½æ•°Math.Sinå’ŒMath.Cosåœ¨è¾“å…¥å‚æ•°ä»0åˆ°0.25 * PIçš„æ®µä¸Šçš„é¢„å…ˆè®¡ç®—çš„ç»“æœã€‚ <br><br> è§’åº¦åœ¨0åˆ°45åº¦ä¹‹é—´çš„æ“ä½œåŸç†ä¸æ³°å‹’çº§æ•°çš„æ”¹è¿›ç‰ˆæœ¬æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯åŒæ—¶è°ƒç”¨äº†ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æŸ¥æ‰¾-åœ¨ä¸¤ä¸ªè®°å½•ä¹‹é—´å­˜åœ¨ä¸€ä¸ªè§’åº¦-å¹¶åœ¨å®ƒä»¬ä¹‹é—´æ‰¾åˆ°ä¸€ä¸ªå€¼ã€‚ <br><br> ä¼˜ç‚¹ï¼š <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">é«˜é€Ÿï¼ˆ65ï¼…ï¼‰</b> <div class="spoiler_text"> ç”±äºæ’å€¼ç®—æ³•çš„ç®€å•æ€§ï¼Œå…¶é€Ÿåº¦è¾¾åˆ°Math.Siné€Ÿåº¦çš„65ï¼…ã€‚ æˆ‘è®¤ä¸ºé€Ÿåº¦&gt; 33ï¼…æ˜¯ä»¤äººæ»¡æ„çš„ã€‚ <br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">æœ€é«˜ç²¾åº¦</b> <div class="spoiler_text"> ç½•è§çš„æ‹’ç»æ¡ˆä¾‹ï¼š <br>  0.255835595715180-Math.Sin; <br>  0.2558355957151 <b>79</b> - <b>Sin_3</b> ã€‚ <br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">å¿«è„š</b> <div class="spoiler_text"> æˆ‘å–œæ¬¢è¿™ä¸ªåŠŸèƒ½ï¼Œå› ä¸ºå®ƒæ˜¯æˆ‘è‡ªå·±å†™çš„ï¼Œéå¸¸ç—›è‹¦ï¼Œè¶…å‡ºäº†è¦æ±‚ï¼šé€Ÿåº¦&gt; 33ï¼…ï¼Œç²¾åº¦åœ¨1e-14ä»¥ä¸Šã€‚ æˆ‘ä¼šç»™å¥¹èµ·ä¸€ä¸ªéª„å‚²çš„åå­—-VÄ“lÅxPesã€‚ <br></div></div></li></ul><br> ç¼ºç‚¹ï¼š <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">å®ƒéœ€è¦åœ¨å†…å­˜ä¸­çš„ä½ç½®</b> <div class="spoiler_text"> è¦å·¥ä½œï¼Œå¿…é¡»é¦–å…ˆè®¡ç®—ä¸¤ä¸ªæ•°ç»„ï¼šsinå’Œcosï¼› æ¯ä¸ªé˜µåˆ—çš„é‡é‡çº¦ä¸º16mbï¼ˆ16 * 2 = 32mbï¼‰ <br></div></div></li></ul><br>  <i><b>åŸå§‹è§†å›¾ï¼š</b></i> <br><br><div class="spoiler">  <b class="spoiler_title">Sin_3ï¼ˆradï¼‰</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Math_d { const <span class="hljs-type"><span class="hljs-type">double</span></span> PI025 = Math.PI / <span class="hljs-number"><span class="hljs-number">4</span></span>; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>^<span class="hljs-number"><span class="hljs-number">17</span></span> = <span class="hljs-number"><span class="hljs-number">131072</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> ),   <span class="hljs-number"><span class="hljs-number">10000</span></span> ( ),  <span class="hljs-number"><span class="hljs-number">2</span></span>^<span class="hljs-number"><span class="hljs-number">21</span></span> = <span class="hljs-number"><span class="hljs-number">22097152</span></span> (<span class="hljs-number"><span class="hljs-number">16</span></span> )   +<span class="hljs-number"><span class="hljs-number">-1</span></span> ( ) (  ) &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; const <span class="hljs-type"><span class="hljs-type">int</span></span> length_mem = <span class="hljs-number"><span class="hljs-number">22097152</span></span>; const <span class="hljs-type"><span class="hljs-type">int</span></span> length_mem_M1 = length_mem - <span class="hljs-number"><span class="hljs-number">1</span></span>; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;    sin,    . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span>[] mem_sin; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;    cos,    . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span>[] mem_cos; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;  ,   sin,    . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">void</span></span> Initialise() { Ini_Mem_Sin(); Ini_Mem_Cos(); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;       Cos,   . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;&lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Sin_3(<span class="hljs-type"><span class="hljs-type">double</span></span> rad) { <span class="hljs-type"><span class="hljs-type">double</span></span> rad_025; <span class="hljs-type"><span class="hljs-type">int</span></span> i; //    //<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rad &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { rad = -rad + Math.PI; } i = (<span class="hljs-type"><span class="hljs-type">int</span></span>)(rad / PI025); //   rad_025 = rad - PI025 * i; //     ( ) i = i &amp; <span class="hljs-number"><span class="hljs-number">7</span></span>; //      <span class="hljs-number"><span class="hljs-number">8</span></span> //    switch (i) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Sin_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Cos_Lerp(PI025 - rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Cos_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Sin_Lerp(PI025 - rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Sin_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Cos_Lerp(PI025 - rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Cos_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Sin_Lerp(PI025 - rad_025); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;   sin    &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">void</span></span> Ini_Mem_Sin() { <span class="hljs-type"><span class="hljs-type">double</span></span> rad; mem_sin = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[length_mem]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; length_mem; i++) { rad = (i * PI025) / length_mem_M1; mem_sin[i] = Math.Sin(rad); } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;   cos    &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">void</span></span> Ini_Mem_Cos() { <span class="hljs-type"><span class="hljs-type">double</span></span> rad; mem_cos = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[length_mem]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; length_mem; i++) { rad = (i * PI025) / length_mem_M1; mem_cos[i] = Math.Cos(rad); } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;      sin  <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;     <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/param&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span> Sin_Lerp(<span class="hljs-type"><span class="hljs-type">double</span></span> rad) { <span class="hljs-type"><span class="hljs-type">int</span></span> i_0; <span class="hljs-type"><span class="hljs-type">int</span></span> i_1; <span class="hljs-type"><span class="hljs-type">double</span></span> i_0d; <span class="hljs-type"><span class="hljs-type">double</span></span> percent; <span class="hljs-type"><span class="hljs-type">double</span></span> a; <span class="hljs-type"><span class="hljs-type">double</span></span> b; <span class="hljs-type"><span class="hljs-type">double</span></span> s; percent = rad / PI025; i_0d = percent * length_mem_M1; i_0 = (<span class="hljs-type"><span class="hljs-type">int</span></span>)i_0d; i_1 = i_0 + <span class="hljs-number"><span class="hljs-number">1</span></span>; a = mem_sin[i_0]; b = mem_sin[i_1]; s = i_0d - i_0; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Lerp(a, b, s); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;      cos  <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;     <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/param&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span> Cos_Lerp(<span class="hljs-type"><span class="hljs-type">double</span></span> rad) { <span class="hljs-type"><span class="hljs-type">int</span></span> i_0; <span class="hljs-type"><span class="hljs-type">int</span></span> i_1; <span class="hljs-type"><span class="hljs-type">double</span></span> i_0d; <span class="hljs-type"><span class="hljs-type">double</span></span> percent; <span class="hljs-type"><span class="hljs-type">double</span></span> a; <span class="hljs-type"><span class="hljs-type">double</span></span> b; <span class="hljs-type"><span class="hljs-type">double</span></span> s; percent = rad / PI025; i_0d = percent * length_mem_M1; i_0 = (<span class="hljs-type"><span class="hljs-type">int</span></span>)i_0d; i_1 = i_0 + <span class="hljs-number"><span class="hljs-number">1</span></span>; a = mem_cos[i_0]; b = mem_cos[i_1]; s = i_0d - i_0; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Lerp(a, b, s); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;      . (<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + s * (b - a)) &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="a"&gt;  . &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="b"&gt;  . &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="s"&gt;  . <span class="hljs-number"><span class="hljs-number">0</span></span> = a, <span class="hljs-number"><span class="hljs-number">1</span></span> = b, <span class="hljs-number"><span class="hljs-number">0.5</span></span> =   a  b. &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Lerp(<span class="hljs-type"><span class="hljs-type">double</span></span> a, <span class="hljs-type"><span class="hljs-type">double</span></span> b, <span class="hljs-type"><span class="hljs-type">double</span></span> s) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + s * (b - a); } }</code> </pre><br></div></div><br><br>  <u>UPDï¼šä¿®å¤äº†ç¡®å®šSin_Lerpï¼ˆï¼‰ï¼ŒCos_Lerpï¼ˆï¼‰ï¼ŒIni_Mem_Sinï¼ˆï¼‰å’ŒIni_Mem_Cosï¼ˆï¼‰ä¸­çš„ç´¢å¼•æ—¶çš„é”™è¯¯ã€‚</u> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN426355/">https://habr.com/ru/post/zh-CN426355/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN426343/index.html">ITä¸­çš„ç»…å£«è¡Œä¸ºè§„åˆ™ï¼šITILçš„å†å²</a></li>
<li><a href="../zh-CN426345/index.html">æŠ€æœ¯é¢è¯•ä¸­æœ‰è¶£çš„éš¾é¢˜</a></li>
<li><a href="../zh-CN426347/index.html">ITMOå¤§å­¦æ–‡æ‘˜ï¼šæ–°ç ”ç©¶ï¼Œæ ¡å‹ç»å†å’Œå›½é™…é¡¹ç›®</a></li>
<li><a href="../zh-CN426349/index.html">æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€å•ï¼Œç´§å‡‘ä¸”ä¾¿å®œçš„äº’è”ç½‘å¹¿æ’­ç”µå°</a></li>
<li><a href="../zh-CN426351/index.html">Microsoftè®¤è¯å’Œè€ƒè¯•çš„å˜æ›´</a></li>
<li><a href="../zh-CN426357/index.html">Unityï¼†Viveï¼šæ•™å­¦è¯¾ç¨‹</a></li>
<li><a href="../zh-CN426359/index.html">Yandexåç›—ç‰ˆè®¡åˆ’æœªç»ç‰ˆæƒæ‰€æœ‰è€…æ‰¹å‡†</a></li>
<li><a href="../zh-CN426361/index.html">å…³äºèœœèœ‚çš„å¥‡è§‚ï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•æ€æ­»å®ƒ</a></li>
<li><a href="../zh-CN426363/index.html">å…³äºäº‹æ•…â€œè”ç›ŸMS-10â€çš„äº‹å®å’Œå‡è®¾</a></li>
<li><a href="../zh-CN426365/index.html">ä¸è¦ç›¸ä¿¡Facebookä¸ºæ—¶å·²æ™š</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>