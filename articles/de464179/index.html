<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïû ü§±üèΩ ‚òÄÔ∏è Ein Standup in Yandex.Taxi oder Was Sie dem Backend-Entwickler beibringen m√ºssen üèÇüèª üéë üê¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mein Name ist Oleg Ermakov, ich arbeite im Backend-Entwicklungsteam der Yandex.Taxi-Anwendung. Es ist √ºblich, dass wir t√§glich Stand-Ups durchf√ºhren, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ein Standup in Yandex.Taxi oder Was Sie dem Backend-Entwickler beibringen m√ºssen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/464179/">  Mein Name ist Oleg Ermakov, ich arbeite im Backend-Entwicklungsteam der Yandex.Taxi-Anwendung.  Es ist √ºblich, dass wir t√§glich Stand-Ups durchf√ºhren, bei denen jeder von uns √ºber die Aufgaben spricht, die w√§hrend des Tages erledigt werden.  So passiert es ... <br><br>  <i>Die Namen der Mitarbeiter k√∂nnen sich √§ndern, aber die Aufgaben sind sehr real!</i> <br><br>  Um 12:45 Uhr versammelt sich das gesamte Team im Besprechungsraum.  Das erste Wort stammt von Ivan, einem angehenden Entwickler. <br><br><h3>  Ivan: </h3><blockquote>  Ich arbeitete an der Aufgabe, alle m√∂glichen Optionen f√ºr die Betr√§ge anzuzeigen, die der Passagier dem Fahrer zu bekannten Reisekosten geben konnte.  Die Aufgabe ist bekannt - sie hei√üt "Wechsel der M√ºnzen".  Unter Ber√ºcksichtigung der Besonderheiten f√ºgte er dem Algorithmus mehrere Optimierungen hinzu.  Ich habe die Poolanfrage f√ºr die √úberpr√ºfung vorgestern gestellt, aber seitdem habe ich die Kommentare korrigiert. <br><br>  <i>Durch Annas zufriedenes L√§cheln wurde klar, wessen Bemerkungen Ivan korrigiert.</i> <br><br><img src="https://habrastorage.org/webt/ti/f9/zh/tif9zheucthxzkd8q4j8ns9fo1y.png"><br><br><a name="habracut"></a>  Zun√§chst nahm er die minimale Zerlegung des Algorithmus vor und erhielt geschickt Banknoten.  In der ersten Implementierung wurden m√∂gliche Banknoten im Code registriert, daher wurden sie nach L√§ndern in die Konfiguration √ºbernommen. <br><br>  Kommentare f√ºr die Zukunft hinzugef√ºgt, damit jeder Leser den Algorithmus schnell herausfinden kann: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> exception <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.exceptions[banknote]: exc_value = value + exception.delta <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> exc_value - cost &gt;= banknote: <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> exc_value &gt; cost &gt;= exception.banknote: banknote_results.append(exc_value) <span class="hljs-comment"><span class="hljs-comment">#       for exception in self.exceptions[banknote]: #          #    exc_value = value + exception.delta #           # (corner case) if exc_value - cost &gt;= banknote: continue if exc_value &gt; cost &gt;= exception.banknote: banknote_results.append(exc_value)</span></span></code> </pre> <br>  Nat√ºrlich habe ich den Rest der Zeit damit verbracht, den gesamten Code mit Tests abzudecken. <br><br><pre> <code class="python hljs">RUB = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">2000</span></span>, <span class="hljs-number"><span class="hljs-number">5000</span></span>] CUSTOM_BANKNOTES = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>] @pytest.mark.parametrize( <span class="hljs-string"><span class="hljs-string">'cost, banknotes, expected_changes'</span></span>, [ <span class="hljs-comment"><span class="hljs-comment"># no banknotes ( 321, [], [], ), # zero cost ( 0, RUB, [], ), # negative cost ( -13, RUB, [], ), # simple testcase ( 264, RUB, [265, 270, 300, 400, 500, 1000, 2000, 5000], ), # cost bigger than max banknote ( 6120, RUB, [6121, 6150, 6200, 6300, 6500, 7000, 8000, 10000], ), # min cost ( 1, RUB, [2, 5, 10, 50, 100, 200, 500, 1000, 2000, 5000], ), ... ], )</span></span></code> </pre> <br>  Zus√§tzlich zu den √ºblichen Tests, die bei jedem Build des Projekts ausgef√ºhrt werden, hat er einen Test geschrieben, der einen Algorithmus ohne Optimierungen verwendet (betrachten Sie ihn als vollst√§ndigen Fehlschlag).  Das Ergebnis dieses Algorithmus f√ºr jede Rechnung aus den ersten 10 Tausend F√§llen wurde in eine Datei geschrieben und separat auf dem Algorithmus mit Optimierungen ausgef√ºhrt, um sicherzustellen, dass er wirklich richtig funktioniert. <br></blockquote><br>  Nehmen wir uns einen Moment Zeit, um vom Aufstehen abzulenken und die lokalen Ergebnisse von allem, was Ivan sagt, zusammenzufassen.  Beim Schreiben von Code besteht das Hauptziel darin, dessen Leistung sicherzustellen.  Um dieses Ziel zu erreichen, m√ºssen Sie die folgenden Aufgaben ausf√ºhren: <br><br><ul><li>  Zerlegen Sie die Gesch√§ftslogik in atomare Fragmente.  Die Lesbarkeit ist kompliziert, wenn eine Zeichenfl√§che angezeigt wird, die in einer Funktion geschrieben wurde. </li><li>  F√ºgen Sie den "besonders komplexen" Teilen des Codes Kommentare hinzu.  Unser Team verfolgt den folgenden Ansatz: Wenn Sie eine Frage zur Implementierung der Code√ºberpr√ºfung erhalten (um den Algorithmus zu erl√§utern), m√ºssen Sie einen Kommentar hinzuf√ºgen.  Besser noch, denken Sie im Voraus dar√ºber nach und f√ºgen Sie es selbst hinzu. </li><li>  Schreiben Sie Tests, die die Hauptzweige der Algorithmusausf√ºhrung abdecken.  Tests sind nicht nur eine Methode zur √úberpr√ºfung des Codezustands.  Sie dienen weiterhin als Beispiel f√ºr die Verwendung Ihres Moduls. </li></ul><br>  Leider verwenden selbst Spezialisten mit langj√§hriger Erfahrung diese Ans√§tze nicht immer in ihrer Arbeit.  An <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der Backend-Entwicklungsschule</a> , die wir gerade durchf√ºhren, erwerben die Sch√ºler praktische F√§higkeiten beim Schreiben von architektonisch hochwertigem Code.  Unser anderes Ziel ist die Verbreitung von Testabdeckungspraktiken f√ºr das Projekt. <br><br>  Aber zur√ºck zum Aufstehen.  Nach Ivan spricht Anna. <br><br><h3>  Anna: </h3><blockquote>  Ich entwickle einen Microservice f√ºr die R√ºckgabe von Werbebildern.  Wie Sie sich erinnern, gab der Dienst zun√§chst statische Datenstubs aus.  Dann haben die Tester darum gebeten, sie anzupassen, und ich habe sie in die Konfiguration eingef√ºgt. Jetzt mache ich eine ‚Äûehrliche‚Äú Implementierung mit der R√ºckgabe von Daten aus der Datenbank (PostgreSQL 10.9).  Die urspr√ºnglich festgelegte Zerlegung hat mir sehr geholfen, in deren Rahmen sich die Schnittstelle zum Empfangen von Daten in der Gesch√§ftslogik nicht √§ndert und jede neue Quelle (ob es sich um eine Konfiguration, eine Datenbank oder einen externen Mikrodienst handelt) nur ihre eigene Logik implementiert. <br><br><img src="https://habrastorage.org/webt/dj/jx/r1/djjxr1chqi4vlvevwvpe6nhtow0.png"><br><br>  Ich habe das geschriebene System unter Last √ºberpr√ºft. Tests haben gezeigt, dass der Griff stark bremst, wenn wir zur Datenbank gehen.  Laut erkl√§r habe ich gesehen, dass der Index nicht verwendet wird.  Bis ich herausgefunden habe, wie ich das beheben kann. </blockquote>  Vadim: <br><blockquote>  Und welche Art von Anfrage? </blockquote>  Anya: <br><blockquote>  Zwei Bedingungen unter OP: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> table_1 <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> table_2 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> table_1.some_id = table_2.some_id <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> (table_2.attr1 = <span class="hljs-string"><span class="hljs-string">'val'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> table_1.attr2 <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> (<span class="hljs-string"><span class="hljs-string">'val1'</span></span>, <span class="hljs-string"><span class="hljs-string">'val2'</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> table_1.deleted_at <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> table_2.deleted_at <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> table_2.created_at</code> </pre> <br>  Die Abfrage EXPLAIN zeigte, dass keiner der Indizes f√ºr die Attribute attr1 von table_2 und attr2 von table_1 verwendet wird. </blockquote>  Vadim: <br><blockquote>  Angesichts eines √§hnlichen Verhaltens in MySQL liegt das Problem genau in der Bedingung f√ºr OR, aufgrund derer nur ein Index verwendet wird, z. B. attr2.  Und die zweite Bedingung verwendet seq scan - einen vollst√§ndigen Durchlauf durch die Tabelle.  Die Anfrage kann in zwei unabh√§ngige Anfragen unterteilt werden.  Teilen und frieren Sie optional das Abfrageergebnis auf der Backend-Seite ein.  Aber dann m√ºssen Sie dar√ºber nachdenken, diese beiden Anforderungen in eine Transaktion einzubinden oder sie mit UNION zu kombinieren - und zwar auf der Basisseite: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> table_1 <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> table_2 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> table_1.some_id = table_2.some_id <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> (table_2.attr1 = <span class="hljs-string"><span class="hljs-string">'val'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> table_1.deleted_at <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> table_2.deleted_at <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> table_2.created_at <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> table_1 <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> table_2 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> table_1.some_id = table_2.some_id <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> (table_1.attr2 <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> (<span class="hljs-string"><span class="hljs-string">'val1'</span></span> , <span class="hljs-string"><span class="hljs-string">'val2'</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> table_1.deleted_at <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> table_2.deleted_at <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> table_2.created_at</code> </pre> </blockquote>  Anya: <br><blockquote>  Danke, ich werde es versuchen ^ _ ^ </blockquote><br>  Um es noch einmal zusammenzufassen: <br><br><ul><li>  Fast alle Produktentwicklungsaufgaben beziehen sich auf das Abrufen von Aufzeichnungen aus externen Quellen (Diensten oder Datenbanken).  Sie m√ºssen das Problem der Zerlegung von Klassen, die Daten entladen, sorgf√§ltig angehen.  Mit richtig gestalteten Klassen k√∂nnen Sie problemlos Tests schreiben und Datenquellen √§ndern. </li><li>  Um effektiv mit der Datenbank arbeiten zu k√∂nnen, m√ºssen Sie die Funktionen der Abfrageausf√ºhrung kennen, z. B. EXPLAIN verstehen. </li></ul><br>  Das Arbeiten mit Informationen und das Organisieren von Datenfl√ºssen ist ein wesentlicher Bestandteil der Aufgaben eines jeden Backend-Entwicklers.  Die Schule wird die Architektur der Interaktion von Diensten (und Datenquellen) vorstellen.  Die Studierenden lernen, architektonisch und betrieblich mit Datenbanken zu arbeiten - Datenmigration und -tests. <br><br>  Der letzte, der spricht, ist Vadim. <br><br><h3>  Vadim: </h3><blockquote>  Ich war eine Woche im Dienst und habe die Abfolge der Vorf√§lle gekl√§rt.  Ein l√§cherlicher Fehler im Code hat sehr lange gedauert: Es gab keine Protokolle auf Anfrage im Produkt, obwohl ihre Erstellung im Code geschrieben wurde. <br><br>  <i>Durch das traurige Schweigen aller Anwesenden ist klar - jeder war schon irgendwie mit dem Problem konfrontiert</i> . <br><br>  Um alle Protokolle als Teil der Anforderung abzurufen, wird request_id verwendet, die in der folgenden Form in alle Datens√§tze geworfen wird: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   request_id logger.info( 'my log msg', ) #   request_id logger.info( 'my log msg', extra=log_extra, #   request_id ‚Äî     )</span></span></code> </pre> <br>  log_extra ist ein W√∂rterbuch mit Metainformationen der Anforderung, deren Schl√ºssel und Werte in das Protokoll geschrieben werden.  Ohne die √úbergabe von log_extra an die Protokollierungsfunktion wird der Datensatz nicht allen anderen Protokollen zugeordnet, da er keine request_id enth√§lt. <br><br>  Ich musste den Fehler im Service beheben, ihn erneut ausrollen und mich erst dann mit dem Vorfall befassen.  Dies ist nicht das erste Mal, dass dies passiert ist.  Um dies zu verhindern, habe ich versucht, das Problem global zu beheben und log_extra zu entfernen. <br><br>  Zuerst habe ich einen Wrapper √ºber die Standardausf√ºhrung der Anfrage geschrieben: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, request, handler)</span></span></span><span class="hljs-function">:</span></span> log_extra = request[<span class="hljs-string"><span class="hljs-string">'log_extra'</span></span>] log_extra_manager.set_log_extra(log_extra) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> handler(request)</code> </pre> <br>  Es musste entschieden werden, wie log_extra in einer einzelnen Anforderung gespeichert werden soll.  Es gab zwei M√∂glichkeiten.  Die erste besteht darin, task_factory f√ºr eventloop von asyncio zu √§ndern: <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LogExtraManager</span></span></span><span class="hljs-class">:</span></span> __init__(self, context: Any, settings: typing.Optional[Dict[str, dict]], activations_parameters: list) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: loop = asyncio.get_event_loop() task_factory = loop.get_task_factory() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> task_factory <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: task_factory = _default_task_factory @functools.wraps(task_factory) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log_extrad_factory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ev_loop, coro)</span></span></span><span class="hljs-function">:</span></span> child_task = task_factory(ev_loop, coro) parent_task = asyncio.Task.current_task(loop=ev_loop) log_extra = getattr(parent_task, LOG_EXTRA_CONTEXT_KEY, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>) setattr(child_task, LOG_EXTRA_CONTEXT_KEY, log_extra) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> child_task <span class="hljs-comment"><span class="hljs-comment"># updating loop, so any created task will # get the log_extra of its parent loop.set_task_factory(log_extrad_factory) def set_log_extra(log_extra: dict): loop = asyncio.get_event_loop() task = asyncio.Task.current_task(loop=loop) setattr(task, LOG_EXTRA_CONTEXT_KEY, log_extra)</span></span></code> </pre> <br>  Die zweite Option besteht darin, den √úbergang zu Python 3.7 √ºber den Infrastrukturbefehl zu "pushen", um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kontextvars</a> zu verwenden: <br><br><pre> <code class="python hljs">log_extra_var = contextvars.ContextVar(LOG_EXTRA_CONTEXT_KEY) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LogExtraManager</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">set_log_extra</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(log_extra: dict)</span></span></span><span class="hljs-function">:</span></span> log_extra_var.set(log_extra)</code> </pre> <br>  Nun und weiter war es notwendig, im Kontext von log_extra im Logger gespeichert weiterzuleiten. <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LogExtraFactory</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(logging.LogRecord)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># this class allows to create log rows with log_extra in the record def __init__(self, *args, **kwargs): super().__init__(*args, **kwargs) task = asyncio.Task.current_task() log_extra = getattr(task, LOG_EXTRA_CONTEXT_KEY, None) if not log_extra: return for key in log_extra: self.__dict__[key] = log_extra[key] logging.setLogRecordFactory(LogExtraFactory)</span></span></code> </pre> </blockquote><br>  Zusammenfassung: <br><br><ul><li>  In Yandex.Taxi (und √ºberall in Yandex) wird Asyncio aktiv verwendet.  Es ist wichtig, es nicht nur nutzen zu k√∂nnen, sondern auch seine interne Struktur zu verstehen. </li><li>  Entwickeln Sie die Gewohnheit, die √Ñnderungsprotokolle aller neuen Versionen der Sprache zu lesen, und √ºberlegen Sie, wie Sie sich und Ihren Kollegen mithilfe von Innovationen das Leben erleichtern k√∂nnen. </li><li>  Haben Sie bei der Arbeit mit Standardbibliotheken keine Angst, in den Quellcode zu kriechen und das Ger√§t zu verstehen.  Dies ist eine sehr n√ºtzliche F√§higkeit, mit der Sie die Funktionsweise des Moduls besser verstehen und neue M√∂glichkeiten bei der Implementierung von Funktionen er√∂ffnen k√∂nnen. </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die Backend-Schullehrer</a> a√üen mehr als ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pfund</a> Salz und f√ºllten viele Zapfen im asynchronen Betrieb von Diensten.  Sie werden die Sch√ºler √ºber die Funktionen der asynchronen Operation von Python informieren - sowohl auf praktischer Ebene als auch bei der Analyse von Paketinternalen. <br><br><h3>  B√ºcher und Links </h3><br>  Das Erlernen von Python kann Ihnen helfen: <br><br><ul><li>  Drei B√ºcher: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Python Cookbook</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Diving Into Python 3</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Python Tricks</a> . </li><li>  Videovortr√§ge von S√§ulen der IT-Branche wie Raymond Hettinger und David Beasley.  Aus den Videovortr√§gen des ersten kann der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bericht</a> ‚ÄûBeyond PEP 8 - Best Practices f√ºr sch√∂nen verst√§ndlichen Code‚Äú unterschieden werden.  Beasley r√§t Ihnen, sich eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Auff√ºhrung</a> √ºber Asyncio anzusehen. </li></ul><br>  Lesen Sie die B√ºcher, um ein besseres Verst√§ndnis der Architektur zu erlangen: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Hoch geladene Anwendungen</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"</a>  Hier werden die Probleme der Interaktion mit Daten ausf√ºhrlich beschrieben (Datencodierung, Arbeiten mit verteilten Daten, Replikation, Partitionierung, Transaktionen usw.). </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">‚ÄûMicroservices.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entwicklungs- und Refactoring-Muster</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">‚Äú</a>  Das Buch zeigt die grundlegenden Ans√§tze der Microservice-Architektur und beschreibt die M√§ngel und Probleme, mit denen man beim Wechsel von einem Monolithen zu Microservices konfrontiert ist.  Es gibt fast nichts in der Post √ºber sie, aber ich rate Ihnen trotzdem, dieses Buch zu lesen.  Sie werden beginnen, die Trends in Geb√§udearchitekturen zu verstehen und die grundlegenden Praktiken der Code-Zerlegung zu lernen. </li></ul><br>  Eine weitere der wichtigsten F√§higkeiten, die Sie endlos in sich selbst entwickeln k√∂nnen, ist das Lesen des Codes eines anderen.  Wenn Sie pl√∂tzlich feststellen, dass Sie selten den Code eines anderen lesen, empfehle ich Ihnen, die Gewohnheit zu entwickeln, regelm√§√üig neue beliebte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Repositories anzusehen</a> . <br><br>  Das Aufstehen endete, alle gingen zur Arbeit. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de464179/">https://habr.com/ru/post/de464179/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de464165/index.html">Habr Weekly # 14 / √úber die Kommunikationsregeln in Gruppenchats, Monopole und den Schutz von Kindern vor gef√§hrlichen Informationen</a></li>
<li><a href="../de464169/index.html">Um zu argumentieren: Wenn Sie bis zum Ende gelesen haben, werden Sie verstehen, wie und warum genau GC funktioniert</a></li>
<li><a href="../de464171/index.html">Software-Update-Sicherheit</a></li>
<li><a href="../de464173/index.html">"Verdammte Galeere", oder wo die Beine vom jammernden B√ºro wachsen</a></li>
<li><a href="../de464177/index.html">Das Buch "Kotlin. Programmierung f√ºr Profis "</a></li>
<li><a href="../de464181/index.html">Poco - Python-basierte UI-Automatisierung f√ºr mobile Spiele als Teil der AirTest-IDE</a></li>
<li><a href="../de464185/index.html">Kurzzusammenfassung: Saubere Architektur, Robert C. Martin</a></li>
<li><a href="../de464189/index.html">So erstellen Sie ein Open Source-Projekt</a></li>
<li><a href="../de464191/index.html">So l√∂sen Sie Probleme mit der Aggregator-Site mithilfe residenter Proxys</a></li>
<li><a href="../de464193/index.html">Ein offenes Mikrofon von DevOps Deflope, Geschichten √ºber die Infrastruktur von Skyeng und Nvidia und nicht nur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>