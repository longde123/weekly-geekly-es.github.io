<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¶üèΩ üöã ‚öΩÔ∏è Citymobil - um guia para startups para aumentar a estabilidade em meio ao crescimento. Parte 1 üï∏Ô∏è üßò ü•§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Com este artigo, abro um ciclo curto de dois artigos, nos quais descreverei em detalhes como conseguimos aumentar a estabilidade dos servi√ßos Citymobi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Citymobil - um guia para startups para aumentar a estabilidade em meio ao crescimento. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/444818/"><img src="https://habrastorage.org/webt/tg/zt/hu/tgzthuqleqe3rr2u80shu4lxkzo.png"><br><br>  Com este artigo, abro um ciclo curto de dois artigos, nos quais descreverei em detalhes como conseguimos aumentar a estabilidade dos servi√ßos Citymobil v√°rias vezes ao longo de v√°rios meses.  O artigo come√ßa com uma hist√≥ria sobre nossos neg√≥cios, sobre a tarefa, sobre o motivo do surgimento do problema de aumentar a estabilidade e sobre limita√ß√µes.  Citymobil √© um agregador de t√°xis em r√°pido crescimento.  Em 2018, cresceu mais de 15 vezes no n√∫mero de viagens bem-sucedidas.  Em alguns meses, o crescimento excedeu 50% em rela√ß√£o ao m√™s anterior. <br><br>  Os neg√≥cios cresceram aos trancos e barrancos (e ainda est√£o crescendo): a carga nos servidores, o tamanho da equipe e a frequ√™ncia de lan√ßamentos aumentaram.  Junto com isso, novas amea√ßas √† estabilidade do servi√ßo apareceram.  A empresa enfrentou a tarefa mais importante - n√£o interromper o crescimento dos neg√≥cios para aumentar a estabilidade.  Neste artigo, mostrarei como conseguimos realizar essa tarefa em pouco tempo. <br><a name="habracut"></a><br><h2>  1. Declara√ß√£o do problema: o que exatamente queremos melhorar </h2><br>  Antes de melhorar algo, voc√™ precisa aprender como medi-lo para entender claramente se h√° uma melhoria.  Quanto mais pr√≥ximo o valor medido estiver dos termos favor√°veis ‚Äã‚Äãaos neg√≥cios, melhor.  Porque quanto maior a probabilidade de melhorarmos o que os neg√≥cios realmente precisam.  Do ponto de vista de seu sucesso, o par√¢metro mais importante para n√≥s √© o n√∫mero de viagens conclu√≠das com sucesso (daqui em diante brevemente - o n√∫mero de viagens).  √â precisamente por esse par√¢metro que os investidores nos avaliam quando tomam uma decis√£o sobre investimentos.  Quanto mais viagens, mais cara a empresa √©. <br><br>  Algumas viagens d√£o lucro, outras - uma perda.  Mas todas as viagens s√£o igualmente importantes para n√≥s, mesmo que n√£o sejam lucrativas, porque nos permitem aumentar a participa√ß√£o de mercado (de fato, a perda de viagens √© uma taxa pelo aumento da participa√ß√£o de mercado).  Portanto, cada viagem adicional recebida √© boa e cada viagem perdida √© ruim.  Todas as viagens s√£o iguais em termos de sucesso nos neg√≥cios. <br><br>  A partir daqui, obtivemos um crit√©rio compreens√≠vel para medir a estabilidade: o n√∫mero de viagens perdidas s√£o viagens que claramente perdemos devido a problemas t√©cnicos.  Um problema t√©cnico significa, por exemplo, um bug no c√≥digo, um 500¬∫ erro, uma falha na infraestrutura, uma integra√ß√£o interrompida com um servi√ßo de parceiro (por exemplo, mapas do Google). <br><br><h2>  2. Como contar as viagens perdidas? </h2><br>  √Äs vezes, as viagens perdidas s√£o f√°ceis de calcular, outras dif√≠ceis.  Por exemplo, no caso de uma nega√ß√£o de servi√ßo completa, quando nada funciona (pah-pah-pah), √© muito f√°cil calcular as viagens perdidas.  Conhecemos o gr√°fico de tend√™ncias do n√∫mero de viagens antes do outono, vemos a tend√™ncia deste gr√°fico ap√≥s o outono, estamos completando a linha entre o ponto em que ele come√ßou simples e o ponto em que terminou.  A √°rea do gr√°fico do n√∫mero de viagens nesta linha conclu√≠da √© de viagens perdidas. <br><br>  No gr√°fico a seguir, a linha preta mostra viagens em um determinado dia e a linha verde mostra viagens h√° uma semana.  O eixo X √© o tempo.  No eixo Y, o n√∫mero de disparos em um determinado intervalo de tempo em torno do ponto X. Um pico claro √© visto abaixo na forma de um tri√¢ngulo agudo.  A √°rea desse tri√¢ngulo √© o n√∫mero de viagens perdidas.  Claro, esse √© um valor aproximado, porque  o gr√°fico est√° flutuando, mas entendemos que at√© 10 a 20% de precis√£o √© suficiente para estimar a escala do acidente de uma empresa. <br><br><img src="https://habrastorage.org/webt/z_/md/hz/z_mdhzjx1q--f_uvb9t-caeof0a.png"><br><br>  Se simples n√£o estiver completo, mas parcial (tamb√©m, pah-pah-pah), o c√°lculo ser√° um pouco mais complicado.  Por exemplo, se houver um erro devido ao qual 10% dos pedidos nunca s√£o distribu√≠dos de carro, vemos uma falha no cronograma da viagem e, em seguida, uma recupera√ß√£o (ap√≥s a corre√ß√£o do bug).  Em uma situa√ß√£o semelhante, viagens perdidas s√£o a √°rea delimitada acima pela linha de tend√™ncia;  da parte inferior - a programa√ß√£o real do n√∫mero de viagens, para a esquerda - a linha vertical do in√≠cio do tempo de inatividade, para a direita - a linha vertical do final do tempo de inatividade. <br><br>  O gr√°fico abaixo mostra que o pico de queda n√£o √© t√£o √≥bvio, mas a presen√ßa de viagens para a semana anterior sem um pico de queda ajuda a entender que um pico de queda √© uma perda.  Al√©m disso, uma compara√ß√£o de viagens para o dia atual e o mesmo dia da semana com a semana anterior deixa claro que o pico mais baixo √† direita n√£o √© a perda de viagens, mas uma falha usual a essa hora do dia, porque  est√° correlacionado com a semana anterior. <br><br><img src="https://habrastorage.org/webt/wa/rs/ea/warseaaonaeeqltcmavt4ckjc2c.png"><br><br>  Geralmente √© dif√≠cil construir uma linha de tend√™ncia, porque  o gr√°fico dente de serra.  Nesse caso, a compara√ß√£o semana a semana nos ajuda.  Se voc√™ desenhar duas linhas no mesmo gr√°fico - a √∫ltima semana e a atual -, as curvas mais ou menos s√£o semelhantes em forma, mas diferem apenas porque uma est√° acima da outra (a semana atual usual √© maior que a anterior, embora exista exce√ß√µes).  A compara√ß√£o semana a semana √© importante, porque cada dia da semana, devido a circunst√¢ncias diferentes, tem um formul√°rio de agendamento diferente.  Observando o gr√°fico semanal, voc√™ pode entender onde pode estar a linha de tend√™ncia das viagens de hoje. <br><br>  Obviamente, uma viagem perdida em si √© um problema muito maior do que apenas uma viagem perdida.  Um cliente que deseja sair de um jeito ou de outro deixar√°, por exemplo, um servi√ßo competitivo e, posteriormente, poder√° n√£o retornar para n√≥s, ou retornar apenas quando um concorrente o desapontar, o que √© improv√°vel, porque  concorrentes s√£o muito fortes.  Al√©m disso, mesmo que um concorrente desaponte o cliente, n√£o √© fato que ele retornar√°, porque tudo parecer√° em sua mente para que todos tenham um servi√ßo ruim e n√£o h√° sentido em saltar sobre os concorrentes. <br><br>  Ou seja, uma viagem perdida devido a problemas t√©cnicos significa, de fato, algumas viagens perdidas. <br><br>  Para n√£o se confundir em termos, chamamos viagens perdidas diretamente devido a um problema t√©cnico, <i>viagens perdidas prim√°rias</i> e viagens perdidas por deixar o competidor, <i>viagens perdidas secund√°rias</i> . <br><br>  Idealmente, para calcular o dano total a uma empresa a partir de uma viagem perdida prim√°ria, voc√™ precisa entender o quanto isso gerou a viagem perdida secund√°ria.  I.e.  √© necess√°rio multiplicar o n√∫mero de viagens perdidas iniciais por um certo coeficiente <i>K</i> , que pode ser calculado com base na frequ√™ncia m√©dia de uso do servi√ßo e no tempo m√©dio que o usu√°rio retorna ap√≥s deixar o concorrente. <br><br>  Supondo que o coeficiente <i>K</i> n√£o mude muito ao longo do tempo, para entender a tend√™ncia de perda de viagens, basta considerar as viagens perdidas prim√°rias e tentar reduzir seu n√∫mero, uma vez que a propor√ß√£o de viagens perdidas prim√°rias per√≠odo a per√≠odo ser√° a mesma que a propor√ß√£o de viagens perdidas secund√°rias per√≠odo a per√≠odo per√≠odo.  Exemplo: se perdemos 1000 viagens prim√°rias no m√™s passado, as viagens secund√°rias perdemos 1000 * <i>K</i> e, no total, perdemos 1000 * (1+ <i>K</i> ).  Se, al√©m disso, no m√™s atual perdemos 500 viagens prim√°rias, depois viagens secund√°rias perdemos 500 * <i>K</i> e, no total, perdemos 500 * (1+ <i>K</i> ).  Nesse caso, independentemente do valor do coeficiente <i>K,</i> come√ßamos a perder viagens 1000 * (1+ <i>K</i> ) / (500 * (1+ <i>K</i> )) = 2 vezes menos. <br><br>  Mesmo que o coeficiente <i>K</i> mude com o tempo, ou seja,  √© uma fun√ß√£o do tempo K (t), ent√£o ainda estamos interessados ‚Äã‚Äãem reduzir o n√∫mero de viagens perdidas prim√°rias.  Porque se K (t) cresce com o tempo, somos ainda mais obrigados a fazer esfor√ßos para perder menos viagens prim√°rias, porque  o dano de perder cada um √© cada vez mais alto.  Por outro lado, se K (t) diminui com o tempo, isso significa que, por algum motivo, os usu√°rios s√£o cada vez mais leais a n√≥s, apesar do mau servi√ßo, o que significa que simplesmente devemos atender √†s suas expectativas! <br><br>  Total: estamos lutando por uma diminui√ß√£o constante nas viagens perdidas prim√°rias. <br><br><h2>  3. Ok, consideramos as viagens perdidas.  O que vem a seguir? </h2><br>  Munidos de uma ferramenta compreens√≠vel para medir viagens perdidas, passamos √† parte mais interessante - como fazer isso para reduzir as perdas?  E enquanto n√£o abrandar o crescimento atual!  Como subjetivamente nos pareceu que a maior parte dos problemas t√©cnicos que causam a perda de viagens est√° relacionada ao back-end, decidimos antes de tudo prestar aten√ß√£o ao processo de desenvolvimento do back-end.  Olhando para o futuro, direi que acabou assim - o back-end se tornou o principal campo de batalha para viagens perdidas. <br><br><h2>  4. Como o processo funciona </h2><br>  Os problemas geralmente ocorrem devido √† rolagem do c√≥digo e outras a√ß√µes manuais.  Servi√ßos que nunca mudam e nunca tocam, √†s vezes tamb√©m falham, mas essa exce√ß√£o √© apenas uma regra de confirma√ß√£o. <br><br>  A exce√ß√£o mais engra√ßada da minha experi√™ncia foi o seguinte servi√ßo.  Quando eu trabalhei na RBC em 2006 (Deus, quantos anos eu tenho!), Ent√£o em um dos servi√ßos de correio da RBC havia um gateway atrav√©s do qual todo o tr√°fego passava e que verificava os endere√ßos IP para serem inclu√≠dos na lista negra.  O servi√ßo funcionou no FreeBSD e funcionou corretamente.  Mas um dia ele parou de trabalhar.  Adivinha por que?  Um disco desintegrou-se nesta m√°quina (blocos ruins acumulados, acumulados e acumulados).  Desintegrou-se 3 anos antes da nega√ß√£o de servi√ßo no servi√ßo (!).  E tudo vivia com um disco disperso.  E ent√£o o "frach", por qualquer motivo desconhecido para ela pelos motivos de Phryakh, decidiu repentinamente virar um disco em ru√≠nas e, eventualmente, congelar.  Tenho certeza que o Linux n√£o faria isso.  Mas este √© um holivar separado. <br><br>  Para resumir o exposto, os problemas se devem √† interven√ß√£o manual.  Uma vez na minha inf√¢ncia, entre 10 e 12 anos, em uma de minhas viagens √† floresta, ouvi de meu pai uma frase que lembrei por toda a vida: "para que a fogueira n√£o se apague, voc√™ n√£o precisa toc√°-la".  Acho que muitos de n√≥s se lembram dos momentos em que jogamos lenha em um fogo j√° aceso e apagou por algum motivo desconhecido. <br><br>  Conclus√£o: os problemas s√£o criados por a√ß√µes manuais de uma pessoa, por exemplo, jogando lenha em um fogo j√° bem queimado, que corta o oxig√™nio e apaga um inc√™ndio, ou implementando c√≥digos com bugs na produ√ß√£o.  Portanto, para entender a causa dos problemas nos servi√ßos, voc√™ precisa entender exatamente como a implementa√ß√£o ocorre e como o processo de desenvolvimento funciona. <br><br>  O processo foi totalmente focado no desenvolvimento r√°pido e foi organizado da seguinte maneira: <br><br><ul><li>  20 a 30 lan√ßamentos por dia; </li><li>  desenvolvedores se lan√ßam; </li><li>  teste r√°pido em um ambiente de teste pelo desenvolvedor; </li><li>  testes autom√°ticos / de unidade m√≠nimos, revis√µes m√≠nimas. </li></ul><br>  Os desenvolvedores nas condi√ß√µes mais dif√≠ceis, de fato, sem √°reas traseiras cobertas em face do controle de qualidade, com um enorme fluxo de tarefas produtivas e experimentos importantes para os neg√≥cios, trabalharam o mais focado e coordenado poss√≠vel, resolveram problemas complexos de maneiras simples, n√£o permitiram que o c√≥digo ‚Äúcrescesse‚Äù, problemas comerciais bem compreendidos , com muita responsabilidade para as mudan√ßas, reverteu rapidamente o modo inativo.  Citymobil n√£o √© √∫nico aqui.  H√° 8 anos, no Mail.ru Mail, quando cheguei ao trabalho l√°, havia uma situa√ß√£o semelhante.  E tamb√©m iniciamos o Mail.ru Cloud de maneira r√°pida e simples, sem rever√™ncia.  E j√° alterou os processos posteriormente para obter maior estabilidade. <br><br>  Certamente, voc√™ percebeu isso por conta pr√≥pria: quando ningu√©m cobre suas costas, quando apenas voc√™ est√° sozinho com a produ√ß√£o, quando um enorme fardo de responsabilidade √© esmagado - voc√™ faz milagres.  Eu mesmo tive essa experi√™ncia (ainda mais grave).  Era uma vez, no s√©culo passado (acho que a Internet j√° estava no s√©culo passado, fico surpresa quando me lembro), trabalhei como o √∫nico desenvolvedor do servi√ßo de correio newmail.ru, implantei ele mesmo e tamb√©m testei a produ√ß√£o <code>if (!strcmp(username, ‚Äúdanikin‚Äù)) { ‚Ä¶ some new code‚Ä¶ }</code> mesmo atrav√©s de <code>if (!strcmp(username, ‚Äúdanikin‚Äù)) { ‚Ä¶ some new code‚Ä¶ }</code> :-) Portanto, essa situa√ß√£o est√° pr√≥xima de mim. <br><br>  N√£o me surpreenderia se soubesse que, com uma abordagem t√£o simples "no joelho", muitas empresas iniciantes come√ßaram, bem-sucedidas e mal sucedidas, mas impulsionadas pela mesma paix√£o - foco no r√°pido crescimento dos neg√≥cios e na captura de mercado. <br><br>  Por que o processo foi especificamente no Citymobil?  Inicialmente, havia poucos desenvolvedores.  Eles trabalharam na empresa por um longo tempo e tinham um bom entendimento de c√≥digo e neg√≥cios.  Lan√ßamentos foram v√°rias vezes ao dia.  Erros eram extremamente raros.  O processo funcionou perfeitamente para essas condi√ß√µes. <br><br><h2>  5. Por que um bom processo amea√ßou a estabilidade? </h2><br>  Com o aumento do investimento no projeto, tornamos nossos planos de produtos mais agressivos e come√ßamos a contratar muitos desenvolvedores.  O n√∫mero de lan√ßamentos na produ√ß√£o aumentou, mas era esperado que a qualidade ca√≠sse, porque os novos caras mergulharam no sistema e na ess√™ncia dos neg√≥cios em condi√ß√µes de combate.  Com um aumento no n√∫mero de desenvolvedores, a estabilidade come√ßou a cair n√£o linearmente, mas quadraticamente (o n√∫mero de lan√ßamentos cresceu linearmente e a qualidade da distribui√ß√£o m√©dia tamb√©m caiu linearmente; "linearmente" * "linearmente" == "quadraticamente"). <br><br>  Era √≥bvio que era imposs√≠vel deixar o processo dessa forma.  Simplesmente n√£o foi preso sob novas condi√ß√µes.  Mas foi necess√°rio alter√°-lo sem preju√≠zo do tempo de coloca√ß√£o no mercado, ou seja, com a preserva√ß√£o de 20 a 30 lan√ßamentos por dia (e com um aumento no n√∫mero proporcional ao tamanho da equipe).  De fato, foi em um grande n√∫mero de lan√ßamentos que todo o argumento foi feito.  Crescemos rapidamente, montamos muitos experimentos, avaliamos rapidamente seus resultados e montamos novos experimentos.  Testamos rapidamente hip√≥teses de produtos e neg√≥cios, estudamos sobre elas e apresentamos novas hip√≥teses, que testamos rapidamente rapidamente etc. N√£o quer√≠amos reduzir essa taxa em nenhum caso.  Al√©m disso, eles queriam aument√°-lo e aumentar a velocidade de contrata√ß√£o de desenvolvedores.  I.e.  nossas a√ß√µes destinadas ao crescimento dos neg√≥cios criaram uma amea√ßa √† estabilidade, mas n√£o quer√≠amos corrigi-las de nenhuma maneira. <br><br><h2>  6. Ok, a tarefa √© clara, o processo √© claro.  O que vem a seguir? </h2><br>  Com experi√™ncia no Mail.ru Mail e Mail.ru Cloud, onde a estabilidade em algum momento foi colocada em primeiro plano, onde lan√ßamentos uma vez por semana, funcionalidade detalhada e casos de teste descritos em detalhes, tudo √© coberto com testes autom√°ticos e unit√°rios, o c√≥digo √© revisado pelo menos uma vez e, √†s vezes, tr√™s vezes, me deparei com uma situa√ß√£o completamente nova. <br><br>  Parece que tudo √© simples: repita o processo no Citymobil como no Mail ou na Cloud e aumente a estabilidade do servi√ßo.  Mas, como nessa piada obscena, existem nuances: a) lan√ßamentos no Mail / Cloud s√£o realizados uma vez por semana, e n√£o 30 vezes por dia, e no Citymobil n√£o quer√≠amos sacrificar a frequ√™ncia dos lan√ßamentos, b) no Mail / Cloud todo o c√≥digo cobertos por testes autom√°ticos / unit√°rios, e no Citymobil n√£o dispomos de tempo e recursos para isso, todas as for√ßas do desenvolvimento de back-end foram dedicadas ao teste de hip√≥teses e aprimoramentos de produtos.  Ao mesmo tempo, os desenvolvedores de back-end estavam fisicamente ausentes, mesmo em altas velocidades de contrata√ß√£o (agradecimentos especiais ao RH Citymobil - estes s√£o os melhores RH do mundo! Acho que haver√° um artigo separado sobre o nosso processo de RH), ou seja, n√£o havia como participar de perto de testes e an√°lises sem diminuir a velocidade. <br><br><h2>  7. Quando voc√™ n√£o sabe o que fazer, aprenda com os erros </h2><br>  Ent√£o, o que fizemos magicamente no Citymobil?  Decidimos aprender com os erros.  O m√©todo de melhorar o servi√ßo aprendendo com os erros √© t√£o antigo quanto o mundo.  Se o sistema funcionar bem, √© bom.  Se o sistema funcionar com erros, isso tamb√©m ser√° bom, porque voc√™ pode aprender com esses erros.  Isso parece f√°cil.  Fazer ... tamb√©m √© simples.  O principal √© definir uma meta. <br><br>  Como estudamos?  Come√ßamos registrando escrupulosamente informa√ß√µes sobre cada acidente maior e menor.  Francamente, inicialmente eu realmente n√£o queria fazer isso, porque esperava um milagre e pensei que os acidentes parariam sozinhos.  Claro, nada parou.  Novas realidades exigiam implacavelmente mudan√ßas. <br><br>  Come√ßamos a registrar todos os acidentes em uma tabela comum do Google.  Para cada acidente, foram fornecidas as seguintes informa√ß√µes breves: <br><br><ul><li>  data, hora, dura√ß√£o; </li><li>  causa raiz </li><li>  o que eles fizeram para resolver o problema; </li><li>  impacto nos neg√≥cios (n√∫mero de viagens perdidas, outros efeitos); </li><li>  conclus√µes. </li></ul><br>  Para acidentes grandes, criamos arquivos grandes separados com descri√ß√µes detalhadas minuto a minuto, desde o momento em que o acidente come√ßou at√© o momento da conclus√£o: o que fizemos, que decis√µes foram tomadas (geralmente essas descri√ß√µes s√£o chamadas de an√°lise post-mortem).  E na tabela geral, adicionamos links para esse post-mortem. <br><br>  O objetivo deste arquivo era o seguinte: tirar conclus√µes, cuja implementa√ß√£o reduzir√° as perdas de viagens.  Al√©m disso, era muito importante formular com precis√£o o que √© a "causa raiz" e quais s√£o as "conclus√µes".  Essas palavras s√£o compreens√≠veis em si mesmas.  Mas todo mundo entende √† sua maneira. <br><br><h2>  8. Um exemplo de erro no qual eles aprenderam </h2><br>  A causa raiz √© a elimina√ß√£o da qual evitar√° acidentes semelhantes no futuro.  E as conclus√µes s√£o como eliminar a causa raiz (ou reduzir a probabilidade de sua ocorr√™ncia). <br><br>  A causa raiz √© sempre mais profunda do que parece.  As conclus√µes s√£o sempre mais complicadas do que parecem.  Para n√£o se acalmar e refletir sobre o que parece ser, √© preciso sempre estar insatisfeito com a causa raiz supostamente encontrada e sempre estar insatisfeito com as supostas conclus√µes.  Esse descontentamento cria fervor para uma an√°lise mais aprofundada. <br><br>  Deixe-me dar um exemplo: lan√ßou o c√≥digo - tudo caiu, reverteu - tudo funcionou.  Qual √© a causa raiz?  <i>Role para fora</i> , voc√™ diz.  Se ela n√£o estivesse, n√£o haveria acidente.  Ent√£o, qual √© a conclus√£o: n√£o lan√ßar?  M√° conclus√£o (prejudicial aos neg√≥cios, para ser mais preciso).  Ou seja, essa provavelmente n√£o √© a causa raiz, voc√™ precisa ir mais fundo.  <i>Abra com um bug</i> .  A causa raiz?  Vamos dizer.  Como consertar isso?  Por testes, voc√™ diz.  Quais testes?  Por exemplo, uma regress√£o completa de todas as funcionalidades.  Esta √© uma boa conclus√£o, lembre-se.  Mas a estabilidade deve ser melhorada aqui e agora, embora n√£o haja uma regress√£o completa.  Precisa cavar ainda mais fundo.  <i>Lan√ßamento com um bug que ocorreu devido ao fato de termos feito a depura√ß√£o da impress√£o em uma tabela no banco de dados, carregada al√©m da medida e o banco de dados foi interrompido sob carga</i> .  Isso j√° √© mais interessante.  Torna-se imediatamente claro que mesmo um teste de regress√£o completo n√£o o salvar√° desse problema.  Afinal, a base de teste n√£o ter√° a mesma carga que a produ√ß√£o. <br><br>  Qual √© a causa raiz desse problema, se voc√™ se aprofundar ainda mais?  Para descobrir, conversamos com o desenvolvedor.  Aconteceu que ele estava acostumado com o fato de que a base lida com as cargas.  Mas, nas condi√ß√µes de r√°pido crescimento do projeto, a base foi gerenciada ontem, mas hoje n√£o est√° mais l√°.  Poucos de n√≥s j√° trabalhamos em projetos que crescem 50% m√™s a m√™s.  Por exemplo, para mim, este √© o primeiro projeto desse tipo.  Depois de mergulhar nesse projeto, voc√™ come√ßa a tomar consci√™ncia de novas realidades.  At√© a primeira vez que voc√™ encontrar algo, nunca saber√° o que acontece. <br><br>  O desenvolvedor sugeriu imediatamente a solu√ß√£o correta para a causa da queda: fa√ßa a depura√ß√£o da impress√£o em um arquivo, escreva o arquivo offline pelo cron no banco de dados em um fluxo com deslizamentos.  Se houver muita impress√£o de depura√ß√£o, o banco de dados n√£o ficar√° parado, apenas as informa√ß√µes de depura√ß√£o aparecer√£o fora de tempo.  Obviamente, esse desenvolvedor j√° aprendeu com seu erro e n√£o o repetir√° no futuro.  Mas outros desenvolvedores tamb√©m precisam descobrir isso.  Como  Precisa contar a eles.  Como faz√™-lo ouvir?  Conte a eles toda a hist√≥ria do come√ßo ao fim, explique o que levou e sugira imediatamente como faz√™-lo, bem como ou√ßa suas perguntas e responda-as. <br><br><h2>  9. O que mais voc√™ pode aprender com esse erro, ou fa√ßa e n√£o fa√ßa </h2><br>  Ent√£o, continuamos a analisar esse acidente.  A empresa est√° crescendo rapidamente, novos funcion√°rios v√™m.  Como eles aprender√£o com esse erro?  Diga a todos os novos funcion√°rios?  Obviamente, haver√° mais e mais erros - como fazer com que todos aprendam com eles?  A resposta √© quase √≥bvia: fa√ßa um arquivo de fazer e n√£o fazer (leia como "fa√ßa e fa√ßa")!  Em uma tradu√ß√£o gratuita para o russo, o idioma "fa√ßa e n√£o fa√ßa" significa "o que √© bom e o que √© ruim".  Neste arquivo, escrevemos todas as conclus√µes sobre o tema do desenvolvimento.  Mostramos o arquivo para todos os novos funcion√°rios e tamb√©m no bate-papo geral dos desenvolvedores toda vez que o arquivo √© atualizado, e pedimos a todos que o leiam novamente (para atualizar o conhecimento antigo e o novo). <br><br>  Voc√™ dir√° que nem todo mundo ler√° com aten√ß√£o.  Voc√™ dir√° que muitos esquecer√£o imediatamente ap√≥s a leitura.  E voc√™ estar√° certo nas duas vezes.  Mas voc√™ n√£o negar√° que algu√©m tenha algo na cabe√ßa.  E isso j√° √© bom.  De acordo com a experi√™ncia do Citymobil, os desenvolvedores levam esse arquivo muito a s√©rio, e os casos em que algumas li√ß√µes foram esquecidas eram extremamente raros.  A prop√≥sito, o pr√≥prio fato de a li√ß√£o ter sido esquecida pode ser considerado um problema e dela √© poss√≠vel tirar uma conclus√£o, ou seja, entender os detalhes e entender como mudar o processo para o futuro.  Muitas vezes, essa escava√ß√£o leva a uma reda√ß√£o mais precisa e clara do que fazer e n√£o fazer. <br><br>  Conclus√£o do acidente descrito acima: crie um arquivo de fazer e n√£o fazer, escreva o que aprendeu nele, mostre o arquivo para toda a equipe e pe√ßa a todos os novatos que o estudem. <br><br>  A partir do conselho geral que entendemos na an√°lise de acidentes: n√£o use a frase ‚Äúfator humano‚Äù.  Assim que voc√™ diz isso, todos entendem imediatamente, para que nada precise ser feito, n√£o sejam necess√°rias conclus√µes, as pessoas estavam erradas, erradas e estar√£o erradas.  Portanto, em vez de pronunciar esta frase, √© necess√°rio tirar uma <i>conclus√£o espec√≠fica</i> .  Conclus√£o - este √© pelo menos um pequeno, mas pequeno, passo na mudan√ßa do processo, aprimorando o monitoramento, aprimorando as ferramentas autom√°ticas.  A partir de pequenos passos, o tecido do servi√ßo est√°vel √© costurado! <br><br><h2>  10. Em vez de um ep√≠logo </h2><br>  Na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">segunda parte,</a> vou falar sobre os tipos de acidentes de acordo com a experi√™ncia da Citymobil e mergulhar nos detalhes de cada tipo de acidente, al√©m de dizer quais conclus√µes tiramos dos acidentes, como mudamos o processo, que introduziu a automa√ß√£o.  O mais interessante na segunda parte!  Fique atento! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt444818/">https://habr.com/ru/post/pt444818/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt444806/index.html">Moira participa do Google Summer of Code 2019</a></li>
<li><a href="../pt444808/index.html">Implanta√ß√µes autom√°ticas de can√°rios com Flagger e Istio</a></li>
<li><a href="../pt444810/index.html">Processadores e marketing em inform√°tica</a></li>
<li><a href="../pt444814/index.html">Criptografia em Java. Cifra de classe</a></li>
<li><a href="../pt444816/index.html">Carpintaria de bricolage: expectativas e realidade</a></li>
<li><a href="../pt444820/index.html">Mockdown: a maneira mais r√°pida de criar wireframes</a></li>
<li><a href="../pt444822/index.html">JDK 9 / JEP 280: a concatena√ß√£o de cadeias nunca mais ser√° a mesma</a></li>
<li><a href="../pt444824/index.html">O que os rob√¥s Amazon Courier e FedEx parecem primeiro</a></li>
<li><a href="../pt444828/index.html">Uma explica√ß√£o simples dos algoritmos de localiza√ß√£o de caminhos e A *</a></li>
<li><a href="../pt444830/index.html">Nuvem assinatura eletr√¥nica na R√∫ssia e no mundo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>