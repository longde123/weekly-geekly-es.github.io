<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛏️ 👩🏿‍🤝‍👩🏼 🙌 Bagaimana kami mengembangkan aplikasi AR untuk meninjau tempat-tempat bersejarah 📜 ㊙️ 🙏🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Baru-baru ini, kami menggabungkan teknologi lama dengan teknologi modern, yang hasilnya terbaca di bawah ini. 

 Augmented Reality 
 Aplikasi augmente...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana kami mengembangkan aplikasi AR untuk meninjau tempat-tempat bersejarah</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lodoss/blog/421067/"><img src="https://habrastorage.org/webt/iy/gx/ir/iygxirzoaz4v6phrwhfplokazzu.jpeg"><br><br>  Baru-baru ini, kami menggabungkan teknologi lama dengan teknologi modern, yang hasilnya terbaca di bawah ini. <br><a name="habracut"></a><br><h2>  Augmented Reality </h2><br>  Aplikasi augmented reality sebagai panduan kota adalah tema terkenal dan diimplementasikan oleh banyak pengembang.  Arah penggunaan AR ini adalah yang pertama, karena ini memungkinkan Anda untuk menggunakan semua kemungkinan yang nyata dari augmented reality: menunjukkan informasi kepada pengguna tentang bangunan, memberikan informasi tentang pekerjaan institusi dan mengenal pemandangan.  Pada hackathon terakhir, yang diadakan di dalam perusahaan, beberapa proyek menggunakan augmented reality disajikan, dan kami datang dengan ide untuk membuat aplikasi AR yang akan menunjukkan bagaimana tengara atau tempat bersejarah terlihat di masa lalu.  Untuk melakukan ini, gabungkan teknologi augmented reality modern dengan foto-foto lama.  Misalnya, menghadap Katedral St. Isaac, Anda dapat mengarahkan kamera smartphone kepadanya dan melihat bangunan kayu pertamanya, yang dihancurkan pada 1715. <br><br>  Mekanisme kerja adalah sebagai berikut: aplikasi menampilkan tempat-tempat bersejarah yang diberikan dan pemandangan kota pada peta, menampilkan informasi singkat tentang mereka, dengan bantuan pemberitahuan memberi tahu pengguna bahwa ia tidak jauh dari titik yang menarik.  Ketika seseorang mendekati monumen bersejarah pada jarak 40 meter, mode AR menjadi tersedia.  Pada saat yang sama, kamera terbuka, dan informasi singkat tentang objek ditampilkan langsung di ruang di sekitar pengguna.  Yang terakhir memiliki kemampuan untuk berinteraksi dengan objek virtual: dengan menyentuh kartu tempat bersejarah, Anda dapat melanjutkan untuk melihat album dengan gambar. <br><br>  Tampaknya aplikasi ini sangat sederhana, tetapi bahkan di sini ada beberapa jebakan.  Saya tidak akan membuat Anda bosan dengan cerita tentang implementasi hal-hal sepele seperti mengunduh data dari server atau menampilkan poin pada peta, saya akan langsung menuju ke fungsi yang menyebabkan masalah. <br><br><h2>  Masalah 1. Poin Mengambang </h2><br>  Jadi, hal pertama yang harus dilakukan adalah menempatkan titik penanda di ruang sesuai dengan lokasi aktual tempat bersejarah relatif terhadap lokasi saat ini dan arah pandangan pengguna. <br><br>  Untuk memulai, kami memutuskan untuk menggunakan pustaka yang sudah disiapkan untuk iOS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ARKit-CoreLocation</a> .  Proyek ini terletak pada GitHub dalam domain publik, berisi, di samping kode kelas utama, contoh integrasi dan memungkinkan kami untuk menyelesaikan tugas yang kami minati dalam beberapa jam.  Hanya perlu memberi makan perpustakaan koordinat titik dan gambar yang digunakan sebagai penanda. <br><br>  Tidak mengherankan, kemudahan ini harus dibayar.  Titik penanda terus melayang di angkasa: mereka naik ke langit-langit, atau ditarik ke suatu tempat di bawah kaki.  Tidak setiap pengguna akan setuju untuk menangkap objek-AR dalam fokus selama beberapa menit untuk berkenalan dengan informasi yang menarik baginya. <br><br>  Ternyata, banyak yang menghadapi bug perpustakaan ini, tetapi solusi belum ditemukan.  Kode pada GitHub, sayangnya, belum diperbarui selama lebih dari enam bulan, jadi saya harus mem-bypassnya. <br><br>  Kami mencoba menggunakan ketinggian alih-alih ketinggian tetap dalam koordinat, yang dikembalikan LocationManager untuk posisi pengguna saat ini.  Namun, ini tidak sepenuhnya menghilangkan masalah.  Data yang berasal dari Manajer Lokasi mulai melompat dengan penyebaran hingga 60 meter, segera setelah perangkat diputar.  Akibatnya, gambar itu tidak stabil, yang, tentu saja, tidak cocok untuk kita lagi. <br><br>  Akibatnya, diputuskan untuk meninggalkan perpustakaan ARKit-CoreLocation dan menempatkan poin di ruang mereka sendiri.  Artikel ARKit dan CoreLocation, ditulis oleh Christopher Web-Orenstein, banyak membantu dalam hal ini.  Saya harus menghabiskan sedikit lebih banyak waktu dan menyegarkan beberapa aspek matematika dalam ingatan saya, tetapi hasilnya sepadan: objek-AR akhirnya ada di tempat mereka.  Setelah itu, tinggal menyebarkannya di sepanjang sumbu Y sehingga label dan titik lebih mudah dibaca, dan untuk membangun korespondensi antara jarak dari posisi saat ini ke titik dan koordinat Z dari objek AR, sehingga informasi tentang tempat bersejarah terdekat ada di latar depan. <br><br>  Itu perlu untuk menghitung posisi SCNNode baru di ruang angkasa, dengan fokus pada koordinat: <br><br><pre><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> place = PlaceNode() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> locationTransform = MatrixHelper.transformMatrix(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: matrix_identity_float4x4, originLocation: curUserLocation, location: nodeLocation, yPosition: pin.yPos, shouldScaleByDistance: <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> nodeAnchor = ARAnchor(transform: locationTransform) scene.session.<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>(anchor: nodeAnchor) scene.scene.rootNode.addChildNode(place)</code> </pre> <br>  Fungsi-fungsi berikut ditambahkan ke kelas MatrixHelper: <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MatrixHelper</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">transformMatrix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> matrix: simd_float4x4, originLocation: CLLocation, location: CLLocation, yPosition: Float)</span></span></span></span> -&gt; simd_float4x4 { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> distanceToPoint = <span class="hljs-type"><span class="hljs-type">Float</span></span>(location.<span class="hljs-built_in"><span class="hljs-built_in">distance</span></span>(from: originLocation)) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> distanceToNode = (<span class="hljs-number"><span class="hljs-number">10</span></span> + distanceToPoint/<span class="hljs-number"><span class="hljs-number">1000.0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bearing = <span class="hljs-type"><span class="hljs-type">GLKMathDegreesToRadians</span></span>(<span class="hljs-type"><span class="hljs-type">Float</span></span>(originLocation.coordinate.direction(to: location.coordinate))) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> position = vector_float4(<span class="hljs-number"><span class="hljs-number">0.0</span></span>, yPosition, -distanceToNode, <span class="hljs-number"><span class="hljs-number">0.0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> translationMatrix = <span class="hljs-type"><span class="hljs-type">MatrixHelper</span></span>.translationMatrix(with: matrix_identity_float4x4, <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: position) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rotationMatrix = <span class="hljs-type"><span class="hljs-type">MatrixHelper</span></span>.rotateAroundY(with: matrix_identity_float4x4, <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: bearing) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> transformMatrix = simd_mul(rotationMatrix, translationMatrix) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> simd_mul(matrix, transformMatrix) } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">translationMatrix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(with matrix: matrix_float4x4, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> translation : vector_float4)</span></span></span></span> -&gt; matrix_float4x4 { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> matrix = matrix matrix.columns.<span class="hljs-number"><span class="hljs-number">3</span></span> = translation <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> matrix } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rotateAroundY</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(with matrix: matrix_float4x4, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> degrees: Float)</span></span></span></span> -&gt; matrix_float4x4 { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> matrix : matrix_float4x4 = matrix matrix.columns.<span class="hljs-number"><span class="hljs-number">0</span></span>.x = cos(degrees) matrix.columns.<span class="hljs-number"><span class="hljs-number">0</span></span>.z = -sin(degrees) matrix.columns.<span class="hljs-number"><span class="hljs-number">2</span></span>.x = sin(degrees) matrix.columns.<span class="hljs-number"><span class="hljs-number">2</span></span>.z = cos(degrees) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> matrix.inverse } }</code> </pre><br>  Untuk menghitung azimuth ditambahkan ekstensi <b>CLLocationCoordinate2D</b> <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CLLocationCoordinate2D</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateBearing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(to coordinate: CLLocationCoordinate2D)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Double</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a = sin(coordinate.longitude.toRadians() - longitude.toRadians()) * cos(coordinate.latitude.toRadians()) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> b = cos(latitude.toRadians()) * sin(coordinate.latitude.toRadians()) - sin(latitude.toRadians()) * cos(coordinate.latitude.toRadians()) * cos(coordinate.longitude.toRadians() - longitude.toRadians()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> atan2(a, b) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">direction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(to coordinate: CLLocationCoordinate2D)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">CLLocationDirection</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.calculateBearing(to: coordinate).toDegrees() } }</code> </pre><br><h2>  Masalah 2. Kelebihan objek AR </h2><br>  Masalah berikutnya yang kami temui adalah sejumlah besar objek AR.  Ada banyak tempat bersejarah dan pemandangan di kota kami, jadi dadu dengan informasi digabungkan dan merangkak satu ke yang lain.  Akan sangat sulit bagi pengguna untuk membuat bagian dari prasasti, dan ini bisa membuat kesan menjijikkan.  Setelah berunding, kami memutuskan untuk membatasi jumlah objek AR yang ditampilkan secara bersamaan, hanya menyisakan titik dalam radius 500 meter dari lokasi saat ini. <br><br>  Namun, di beberapa daerah, konsentrasi titik masih terlalu tinggi.  Oleh karena itu, untuk meningkatkan visibilitas, mereka memutuskan untuk menggunakan pengelompokan.  Pada layar peta, fitur ini tersedia secara default karena logika yang tertanam dalam MapKit, tetapi dalam mode AR itu perlu untuk mengimplementasikannya secara manual. <br><br>  Clustering didasarkan pada jarak dari posisi saat ini ke target.  Jadi, jika titik jatuh ke zona dengan jari-jari sama dengan setengah jarak antara pengguna dan objek wisata sebelumnya dari daftar, itu hanya bersembunyi dan merupakan bagian dari cluster.  Saat pengguna mendekatinya, jarak menurun, dan jari-jari zona cluster menurun, sehingga pemandangan yang berada di dekatnya tidak bergabung menjadi kelompok.  Untuk membedakan cluster secara visual dari satu titik, kami memutuskan untuk mengubah warna marker dan menampilkan jumlah objek dalam AR alih-alih nama tempat. <br><br><img src="https://habrastorage.org/webt/xp/pd/t2/xppdt23ercvm5gapt8bmsh0df3g.png" alt="gambar"><br><br>  Untuk memastikan interaktivitas objek AR, UITapGestureRecognizer digantung di ARSCNView dan di handler menggunakan metode hitTest yang memeriksa objek SCNNode mana yang diklik pengguna.  Jika ternyata itu adalah foto objek wisata terdekat, aplikasi membuka album yang sesuai dalam mode layar penuh. <br><br><h2>  Masalah 3. Radar </h2><br>  Selama implementasi aplikasi, perlu untuk menunjukkan titik-titik pada radar kecil.  Secara teori, seharusnya tidak ada kesalahpahaman, karena kami sudah menghitung azimuth dan jarak ke titik, bahkan berhasil mengubahnya menjadi koordinat 3D.  Hanya tinggal menempatkan titik-titik dalam ruang dua dimensi di layar. <br><br><img src="https://habrastorage.org/webt/xz/kk/4f/xzkk4fdfzasalo_b8bsb7x-geri.png"><br><br>  Agar tidak menemukan kembali roda, mereka beralih ke perpustakaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Radar</a> , yang kode sumber terbukanya diterbitkan di GitHub.  Pratinjau yang jelas dan pengaturan yang fleksibel dari contoh ini menggembirakan, tetapi dalam kenyataannya poin-poin tersebut bergeser relatif terhadap lokasi sebenarnya di ruang angkasa.  Setelah menghabiskan beberapa waktu mencoba memperbaiki rumus, kami beralih ke opsi yang kurang indah, tetapi lebih andal yang dijelaskan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">iPhone Augmented Reality Toolkit</a> : <br><br><pre> <code class="hljs pgsql">func place(dot: Dot) { var y: CGFloat = <span class="hljs-number"><span class="hljs-number">0.0</span></span> var x: CGFloat = <span class="hljs-number"><span class="hljs-number">0.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> degree &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> { degree += <span class="hljs-number"><span class="hljs-number">360</span></span> } let bearing = dot.bearing.toRadians() let radius: CGFloat = <span class="hljs-number"><span class="hljs-number">60.0</span></span> // radius <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the radar <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bearing &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; bearing &lt; .pi / <span class="hljs-number"><span class="hljs-number">2</span></span>) { //the <span class="hljs-number"><span class="hljs-number">1</span></span> quadrant <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the radar x = radius + CGFloat(cosf(<span class="hljs-type"><span class="hljs-type">Float</span></span>((.pi / <span class="hljs-number"><span class="hljs-number">2</span></span>) - bearing)) * <span class="hljs-type"><span class="hljs-type">Float</span></span>(dot.distance)) y = radius - CGFloat(sinf(<span class="hljs-type"><span class="hljs-type">Float</span></span>((.pi / <span class="hljs-number"><span class="hljs-number">2</span></span>) - bearing)) * <span class="hljs-type"><span class="hljs-type">Float</span></span>(dot.distance)) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bearing &gt; .pi / <span class="hljs-number"><span class="hljs-number">2.0</span></span> &amp;&amp; bearing &lt; .pi) { //the <span class="hljs-number"><span class="hljs-number">2</span></span> quadrant <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the radar x = radius + CGFloat(cosf(<span class="hljs-type"><span class="hljs-type">Float</span></span>(bearing - (.pi / <span class="hljs-number"><span class="hljs-number">2</span></span>))) * <span class="hljs-type"><span class="hljs-type">Float</span></span>(dot.distance)) y = radius + CGFloat(sinf(<span class="hljs-type"><span class="hljs-type">Float</span></span>(bearing - (.pi / <span class="hljs-number"><span class="hljs-number">2</span></span>))) * <span class="hljs-type"><span class="hljs-type">Float</span></span>(dot.distance)) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bearing &gt; .pi &amp;&amp; bearing &lt; (<span class="hljs-number"><span class="hljs-number">3</span></span> * .pi / <span class="hljs-number"><span class="hljs-number">2</span></span>)) { //the <span class="hljs-number"><span class="hljs-number">3</span></span> quadrant <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the radar x = radius - CGFloat(cosf(<span class="hljs-type"><span class="hljs-type">Float</span></span>((<span class="hljs-number"><span class="hljs-number">3</span></span> * .pi / <span class="hljs-number"><span class="hljs-number">2</span></span>) - bearing)) * <span class="hljs-type"><span class="hljs-type">Float</span></span>(dot.distance)) y = radius + CGFloat(sinf(<span class="hljs-type"><span class="hljs-type">Float</span></span>((<span class="hljs-number"><span class="hljs-number">3</span></span> * .pi / <span class="hljs-number"><span class="hljs-number">2</span></span>) - bearing)) * <span class="hljs-type"><span class="hljs-type">Float</span></span>(dot.distance)) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bearing &gt; (<span class="hljs-number"><span class="hljs-number">3</span></span> * .pi / <span class="hljs-number"><span class="hljs-number">2.0</span></span>) &amp;&amp; bearing &lt; (<span class="hljs-number"><span class="hljs-number">2</span></span> * .pi)) { //the <span class="hljs-number"><span class="hljs-number">4</span></span> quadrant <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the radar x = radius - CGFloat(cosf(<span class="hljs-type"><span class="hljs-type">Float</span></span>(bearing - (<span class="hljs-number"><span class="hljs-number">3</span></span> * .pi / <span class="hljs-number"><span class="hljs-number">2</span></span>))) * <span class="hljs-type"><span class="hljs-type">Float</span></span>(dot.distance)) y = radius - CGFloat(sinf(<span class="hljs-type"><span class="hljs-type">Float</span></span>(bearing - (<span class="hljs-number"><span class="hljs-number">3</span></span> * .pi / <span class="hljs-number"><span class="hljs-number">2</span></span>))) * <span class="hljs-type"><span class="hljs-type">Float</span></span>(dot.distance)) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bearing == <span class="hljs-number"><span class="hljs-number">0</span></span>) { x = radius y = radius - CGFloat(dot.distance) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bearing == .pi / <span class="hljs-number"><span class="hljs-number">2</span></span>) { x = radius + CGFloat(dot.distance) y = radius } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bearing == .pi) { x = radius y = radius + CGFloat(dot.distance) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bearing == <span class="hljs-number"><span class="hljs-number">3</span></span> * .pi / <span class="hljs-number"><span class="hljs-number">2</span></span>) { x = radius - CGFloat(dot.distance) y = radius } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { x = radius y = radius - CGFloat(dot.distance) } let newPosition = CGPoint(x: x, y: y) dot.layer.position = newPosition</code> </pre><br><h2>  Backend </h2><br>  Tetap untuk menyelesaikan masalah menyimpan titik dan foto.  Untuk tujuan ini, diputuskan untuk menggunakan Contentful, dan dalam implementasi proyek saat ini ia sangat cocok untuk kami. <br><img src="https://habrastorage.org/webt/dx/zj/pm/dxzjpmfq_zibj3w7sjmu9wjobyi.png"><br><img src="https://habrastorage.org/webt/iz/bm/4f/izbm4f3bxnrouqtwxs-rmkmdyds.png"><br>  Pada saat pengembangan aplikasi mobile, semua bekender terlibat dalam proyek komersial, dan puas diizinkan untuk menyediakan selama beberapa jam: <br><br><ul><li>  pengembang seluler - backend yang nyaman </li><li>  pengelola konten - area admin yang nyaman untuk mengisi data </li></ul><br>  Implementasi yang sama dari backend pada awalnya digunakan oleh tim yang berpartisipasi dalam hackathon (disebutkan di awal artikel), yang sekali lagi membuktikan bahwa hal-hal seperti hackathon memungkinkan Anda untuk melarikan diri dari menyelesaikan masalah mendesak Anda pada proyek, memungkinkan untuk menciptakan kembali dan mencoba sesuatu baru. <br><br><h2>  Kesimpulan </h2><br><br>  Sangat menarik untuk mengembangkan <nobr>aplikasi AR</nobr> , dalam prosesnya kami mencoba beberapa perpustakaan yang sudah jadi, tetapi kami juga harus mengingat matematika dan menulis banyak hal sendiri. <br><br>  Sekilas, proyek ini membutuhkan banyak jam kerja untuk mengimplementasikan dan memperbaiki algoritme, meskipun kami menggunakan SDK standar dari Apple. <br><br>  Kami baru-baru ini memposting aplikasi di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">AppStore</a> .  Begini tampilannya di tempat kerja. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Sjyy8FJUyQI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Sejauh ini, dalam basis data kami hanya ada poin untuk Taganrog, namun, semua orang dapat berpartisipasi dalam perluasan "area cakupan". </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id421067/">https://habr.com/ru/post/id421067/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id421057/index.html">Cara merakit kereta untuk kereta penumpang</a></li>
<li><a href="../id421059/index.html">Mempercepat situs dengan kiat awal</a></li>
<li><a href="../id421061/index.html">PostgreSQL: bagaimana dan mengapa WAL membengkak</a></li>
<li><a href="../id421063/index.html">Buku-Buku Baru tentang Pemrograman Anak-Anak di Awal</a></li>
<li><a href="../id421065/index.html">Bagaimana saya mengajar AI bermain Tetris untuk NES. Bagian 2: AI</a></li>
<li><a href="../id421069/index.html">Bobby Urban Backpack: Inside the Castle</a></li>
<li><a href="../id421071/index.html">Mod dan sisanya tidak sama</a></li>
<li><a href="../id421073/index.html">Episode 1. Biaya Retas</a></li>
<li><a href="../id421075/index.html">Kamus Digital A hingga Z</a></li>
<li><a href="../id421077/index.html">Musim saling menggantikan awal dari tahun ke tahun di Kemerovo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>