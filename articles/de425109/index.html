<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöΩ üë®üèø‚Äçüíº üë©üèæ Das Buch ‚ÄûJava in der Cloud. Fr√ºhlingsstiefel, Fr√ºhlingswolke, Wolkengie√üerei ¬ª üìé üë©üèΩ‚Äçüîß üöÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! Dieses Buch richtet sich haupts√§chlich an Entwickler von Java- und JVM-Maschinen, die nach M√∂glichkeiten suchen, mit Spring Boot, Sp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Das Buch ‚ÄûJava in der Cloud. Fr√ºhlingsstiefel, Fr√ºhlingswolke, Wolkengie√üerei ¬ª</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/425109/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/g5/vp/gz/g5vpgzgoyh2hlalmrajcysuwvwo.jpeg" align="left" alt="Bild"></a>  Hallo allerseits!  Dieses Buch richtet sich haupts√§chlich an Entwickler von Java- und JVM-Maschinen, die nach M√∂glichkeiten suchen, mit Spring Boot, Spring Cloud und Cloud Foundry in kurzer Zeit bessere Software zu erstellen.  Es ist f√ºr diejenigen, die bereits das Rauschen um Microservices geh√∂rt haben.  M√∂glicherweise haben Sie bereits verstanden, welche stratosph√§rische H√∂he Spring Boot erreicht hat, und Sie sind √ºberrascht, dass Unternehmen heute die Cloud Foundry-Plattform verwenden.  Wenn ja, dann ist dieses Buch f√ºr Sie. <br><br><h3>  Auszug.  3. Konfigurationsstil f√ºr Anwendungen mit zw√∂lf Faktoren </h3><br>  In diesem Kapitel wird erl√§utert, wie Sie die Anwendungskonfiguration implementieren. <br><a name="habracut"></a><br>  Definieren Sie eine Reihe von Vokabeln.  Wenn es um die Konfiguration in Spring geht, meine ich oft, verschiedene Implementierungen des Anwendungskontexts <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ApplicationContext</a> in die Spring-Umgebung einzuf√ºhren, damit der Container besser versteht, wie Bean-Komponenten verbunden werden.  Diese Konfiguration kann als XML-Datei dargestellt werden, die in einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ClassPathXmlApplicationContext bereitgestellt werden muss</a> , oder als Java-Klassen, die mit Anmerkungen versehen sind, die f√ºr ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AnnotationConfigApplicationContext-</a> Objekt bereitgestellt werden k√∂nnen.  Und nat√ºrlich werden wir uns beim Studium der letzten Option auf <i>die Java-Konfiguration</i> beziehen <i>.</i> <br><br>  In diesem Kapitel werden wir jedoch die Konfiguration √ºberpr√ºfen, wie sie im Manifest der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">12-Faktor-Anwendung definiert ist</a> .  In diesem Fall handelt es sich um Literalwerte, die sich von einer Umgebung in eine andere √§ndern k√∂nnen: Es handelt sich um Kennw√∂rter, Ports und Hostnamen oder um Eigenschaftsflags.  Die Konfiguration ignoriert die im Code integrierten magischen Konstanten.  Das Manifest enth√§lt ein hervorragendes Kriterium f√ºr die korrekte Konfiguration: Kann die Anwendungscodebasis jederzeit Open Source sein, ohne wichtige Anmeldeinformationen offenzulegen und zu gef√§hrden?  Diese Art der Konfiguration bezieht sich ausschlie√ülich auf die Werte, die von Umgebung zu Umgebung unterschiedlich sind, und gilt beispielsweise nicht f√ºr die Verbindung von Spring Beans oder die Konfiguration von Ruby-Routen. <br><br><h3>  Unterst√ºtzung im Fr√ºhjahrsrahmen </h3> <br>  Im Fr√ºhjahr wurde seit dem Aufkommen der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PropertyPlaceholderConfigurer-</a> Klasse ein 12-Faktor-Konfigurationsstil unterst√ºtzt.  Sobald die Instanz definiert ist, werden die Literale in der XML-Konfiguration durch die aus der Datei extrahierten Werte mit der Erweiterung .properties ersetzt.  In der Spring-Umgebung wird die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PropertyPlaceholderConfigurer-</a> Klasse seit 2003 angeboten.  In Spring 2.5 wurde die Unterst√ºtzung f√ºr den XML-Namespace und gleichzeitig die Unterst√ºtzung f√ºr die Substitution von Eigenschaften in diesem Bereich eingef√ºhrt.  Dies erm√∂glicht das Ersetzen der Definitionen von Bean-Komponenten in der XML-Konfiguration von Literalwerten durch die Werte, die den Schl√ºsseln in der externen Eigenschaftendatei zugewiesen sind (in diesem Fall in der Datei simple.properties, die im Klassenpfad oder au√üerhalb der Anwendung angezeigt werden kann). <br><br>  Die Konfiguration im Stil von 12 Faktoren zielt darauf ab, die Unzuverl√§ssigkeit vorhandener magischer Linien zu beseitigen, dh Werte wie die Adressen von Datenbanken und Konten f√ºr die Verbindung zu diesen, Ports usw., die in einer kompilierten Anwendung fest codiert sind.  Wenn die Konfiguration au√üerhalb der Anwendung verschoben wird, kann sie ersetzt werden, ohne auf eine neue Code-Assembly zur√ºckzugreifen. <br><br><h3>  Klasse PropertyPlaceholderConfigurer </h3><br>  Schauen wir uns ein Beispiel f√ºr die Verwendung der PropertyPlaceholderConfigurer-Klasse, der XML-Definitionen von Spring Bean-Komponenten und einer Datei mit der Erweiterung .properties an, die aus den Anwendungsgrenzen herausgenommen wurde.  Wir m√ºssen nur den in dieser Eigenschaftendatei verf√ºgbaren Wert drucken.  Dies hilft bei der Ausf√ºhrung des in Beispiel 3.1 gezeigten Codes. <br><br>  Beispiel 3.1  Eigenschaftendatei: some.properties <br><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span>.projectName=Spring Framework</code> </pre> <br>  Dies ist die ClassPathXmlApplicationContext-Klasse von Spring. Daher verwenden wir den XML-Namespace aus dem Spring-Kontext und verweisen auf unsere Datei some.properties.  Dann verwenden wir Literale in Form von $ {configuration.projectName} in den Definitionen der Bean-Komponenten, und Spring ersetzt sie w√§hrend der Ausf√ºhrung durch die Werte aus unserer Eigenschaftendatei (Beispiel 3.2). <br><br>  Beispiel 3.2.  Spring-Konfigurations-XML-Datei <br><br><pre> <code class="hljs pgsql">&lt;context:property-placeholder <span class="hljs-keyword"><span class="hljs-keyword">location</span></span>="classpath:some.properties"/&gt; (<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt;bean <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="classic.Application"&gt; &lt;property <span class="hljs-type"><span class="hljs-type">name</span></span>="configurationProjectName" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="${configuration.projectName}"/&gt; &lt;/bean&gt;</code> </pre> <br>  (1) Klassenpfad: Speicherort, der sich auf die Datei im aktuell kompilierten Codeblock bezieht (.jar, .war usw.).  Spring unterst√ºtzt viele Alternativen, einschlie√ülich file: und url:, mit denen die Datei au√üerhalb des Codeblocks existieren kann. <br><br>  Schauen wir uns abschlie√üend an, wie die Java-Klasse aussieht, mit der all dies zusammengef√ºhrt werden kann (Beispiel 3.3). <br><br>  Beispiel 3.3  Die Java-Klasse, die mit dem Eigenschaftswert konfiguriert werden muss <br>  Paket klassisch; <br><br><pre> <code class="hljs actionscript"><span class="hljs-meta"><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">import</span></span></span><span class="hljs-meta"> org.apache.commons.logging.LogFactory;</span></span> <span class="hljs-meta"><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">import</span></span></span><span class="hljs-meta"> org.springframework.context.support.ClassPathXmlApplicationContext;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> main(String[] args) { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClassPathXmlApplicationContext(<span class="hljs-string"><span class="hljs-string">"classic.xml"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> setConfigurationProjectName(String pn) { LogFactory.getLog(getClass()).info(<span class="hljs-string"><span class="hljs-string">"the configuration project name is "</span></span> + pn); } }</code> </pre> <br>  Das erste Beispiel verwendet das XML-Format f√ºr die Spring Bean-Konfiguration.  In Spring 3.0 und 3.1 hat sich die Situation f√ºr Entwickler, die die Java-Konfiguration verwenden, erheblich verbessert.  Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Value-</a> Annotation und die Environment-Abstraktion wurden in diesen Releases eingef√ºhrt. <br><br><h3>  Abstrakte Umgebung und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Wert</a> </h3><br>  Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Umgebungsabstraktion</a> stellt w√§hrend der Ausf√ºhrung des Codes seine indirekte Beziehung zur Umgebung dar, in der er ausgef√ºhrt wird, und erm√∂glicht es der Anwendung, die Frage (‚ÄûWelches Zeilentrennzeichen ist line.separator auf dieser Plattform?‚Äú) Zu den Eigenschaften der Umgebung zu stellen.  Eine Abstraktion dient als Zuordnung von Schl√ºsseln und Werten.  Durch Konfigurieren der PropertySource in der Umgebung k√∂nnen Sie konfigurieren, woher diese Werte gelesen werden.  Standardm√§√üig l√§dt Spring Systemschl√ºssel und Umgebungswerte, z. B. line.separator.  Sie k√∂nnen Spring anweisen, Konfigurationsschl√ºssel aus einer Datei in derselben Reihenfolge zu laden, die in fr√ºheren Versionen der Spring-Eigenschaftssubstitutionsl√∂sung mithilfe der Annotation @PropertySource verwendet werden konnte. <br><br>  Die Wertanmerkung bietet eine M√∂glichkeit, Umgebungswerte in Konstruktoren, Setter, Felder usw. einzubetten. Diese Werte k√∂nnen mithilfe der Spring Expression Language oder der Eigenschaftsersetzungssyntax berechnet werden, sofern <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PropertySourcesPlaceholderConfigurer</a> wie in Beispiel 3.4 registriert ist. <br><br>  Beispiel 3.4.  Registrieren Sie PropertySourcesPlaceholderConfigurer <br>  Paket env; <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.Log; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.LogFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.InitializingBean; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Autowired; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Value; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.AnnotationConfigApplicationContext; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Bean; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Configuration; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.PropertySource; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.support.PropertySourcesPlaceholderConfigurer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.core.env.Environment; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.PostConstruct; (<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-meta"><span class="hljs-meta">@PropertySource(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"some.properties"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Log log = LogFactory.getLog(getClass()); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> static void main(String[] args) throws Throwable { new AnnotationConfigApplicationContext(Application.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>); } (<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> static PropertySourcesPlaceholderConfigurer pspc() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new PropertySourcesPlaceholderConfigurer(); } (<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String fieldValue; (<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> Application(<span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> String pn) { log.info(<span class="hljs-string"><span class="hljs-string">"Application constructor: "</span></span> + pn); } (<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> void setProjectName(String projectName) { log.info(<span class="hljs-string"><span class="hljs-string">"setProjectName: "</span></span> + projectName); } (<span class="hljs-number"><span class="hljs-number">6</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> void setEnvironment(Environment env) { log.info(<span class="hljs-string"><span class="hljs-string">"setEnvironment: "</span></span> + env.getProperty(<span class="hljs-string"><span class="hljs-string">"configuration.projectName"</span></span>)); } (<span class="hljs-number"><span class="hljs-number">7</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> InitializingBean both(Environment env, <span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> String projectName) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> () -&gt; { log.info(<span class="hljs-string"><span class="hljs-string">"@Bean with both dependencies (projectName): "</span></span> + projectName); log.info(<span class="hljs-string"><span class="hljs-string">"@Bean with both dependencies (env): "</span></span> + env.getProperty(<span class="hljs-string"><span class="hljs-string">"configuration.projectName"</span></span>)); }; } <span class="hljs-meta"><span class="hljs-meta">@PostConstruct</span></span> void afterPropertiesSet() throws Throwable { log.info(<span class="hljs-string"><span class="hljs-string">"fieldValue: "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fieldValue); } }</code> </pre> <br>  (1) Annotation @PropertySource ist eine Abk√ºrzung √§hnlich dem Property-Placeholder, mit der eine PropertySource aus einer Datei mit der Erweiterung .properties eingerichtet wird. <br><br>  (2) PropertySourcesPlaceholderConfigurer muss als statische Bean registriert werden, da es sich um eine Implementierung des BeanFactoryPostProcessor handelt und zu einem fr√ºhen Zeitpunkt im Initialisierungslebenszyklus der Spring Bean aufgerufen werden muss.  Bei Verwendung von Bean-Komponenten in der Spring XML-Konfiguration ist diese Nuance nicht sichtbar. <br><br>  (3) Sie k√∂nnen die Felder mit der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Wertanmerkung</a> dekorieren (aber tun Sie dies nicht, sonst besteht der Code den Test nicht!) ... <br><br>  (4) ... oder die Annotation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Value</a> kann die Konstruktorparameter dekorieren ... <br><br>  (5) ... oder Installationsmethoden verwenden ... <br><br>  (6) ... oder binden Sie ein Spring Environment-Objekt ein und f√ºhren Sie die Schl√ºsselaufl√∂sung manuell durch. <br><br>  (7) Parameter mit der Annotation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Value</a> k√∂nnen auch im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Bean-</a> Methodenargumentanbieter in der Spring Java-Konfiguration verwendet werden. <br><br>  In diesem Beispiel werden die Werte aus der Datei simple.properties geladen und haben dann den Wert configuration.projectName, der auf verschiedene Arten bereitgestellt wird. <br><br><h3>  Profile </h3><br>  Unter anderem f√ºhrt die Umgebungsabstraktion <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Profile ein</a> .  Auf diese Weise k√∂nnen Sie Beschriftungen (Profile) zuweisen, um Bean-Komponenten zu gruppieren.  Profile sollten verwendet werden, um Bean-Komponenten und Bean-Diagramme zu beschreiben, die von Umgebung zu Umgebung variieren.  Es k√∂nnen mehrere Profile gleichzeitig aktiviert werden.  Bohnen, denen keine Profile zugewiesen sind, werden immer aktiviert.  Beans mit einem Standardprofil werden nur aktiviert, wenn sie keine anderen aktiven Profile haben.  Das Profilattribut kann in der Definition der Bean-Komponente in XML oder in Tag-Klassen, Konfigurationsklassen, einzelnen Bean-Komponenten oder in den Methoden des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Bean-</a> Anbieters unter Verwendung von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Profile angegeben werden</a> . <br><br>  Mit Profilen k√∂nnen Sie S√§tze von Bean-Komponenten beschreiben, die in einer Umgebung etwas anders als in einer anderen erstellt werden m√ºssen.  In einem lokalen Entwicklungsentwicklungsprofil k√∂nnen Sie beispielsweise die integrierte H2-Datenquelle javax.sql.DataSource verwenden und dann, wenn das Produktprofil aktiv ist, zur Datenquelle javax.sql.DataSource wechseln, die mit der JNDI-Suche oder erhalten wurde durch Lesen von Eigenschaften aus einer Umgebungsvariablen in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cloud Foundry</a> .  In beiden F√§llen funktioniert Ihr Code: Sie erhalten javax.sql.DataSource, aber die Entscheidung, welche bestimmte Instanz verwendet werden soll, wird durch Aktivieren eines oder mehrerer Profile getroffen (Beispiel 3.5). <br><br>  Beispiel 3.5  Demonstration, dass @ Configuration-Klassen verschiedene Konfigurationsdateien laden und basierend auf verschiedene Beans bereitstellen k√∂nnen <br>  aktives Profil <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> profiles; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.Log; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.LogFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.InitializingBean; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Value; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.support.PropertySourcesPlaceholderConfigurer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.core.env.Environment; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.util.StringUtils; <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Log log = LogFactory.getLog(getClass()); <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> static PropertySourcesPlaceholderConfigurer pspc() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new PropertySourcesPlaceholderConfigurer(); } (<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-meta"><span class="hljs-meta">@Profile(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"prod"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-meta"><span class="hljs-meta">@PropertySource(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"some-prod.properties"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> static <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProdConfiguration</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> InitializingBean <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> () -&gt; LogFactory.getLog(getClass()).info(<span class="hljs-string"><span class="hljs-string">"prod InitializingBean"</span></span>); } } <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-meta"><span class="hljs-meta">@Profile({ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"default"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"dev"</span></span></span><span class="hljs-meta"> })</span></span> (<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-meta"><span class="hljs-meta">@PropertySource(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"some.properties"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> static <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DefaultConfiguration</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> InitializingBean <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> () -&gt; LogFactory.getLog(getClass()).info(<span class="hljs-string"><span class="hljs-string">"default InitializingBean"</span></span>); } } (<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> InitializingBean which(Environment e, <span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> String projectName) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> () -&gt; { log.info(<span class="hljs-string"><span class="hljs-string">"activeProfiles: '"</span></span> + StringUtils.arrayToCommaDelimitedString(e.getActiveProfiles()) + <span class="hljs-string"><span class="hljs-string">"'"</span></span>); log.info(<span class="hljs-string"><span class="hljs-string">"configuration.projectName: "</span></span> + projectName); }; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> static void main(String[] args) { AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(); ac.getEnvironment().setActiveProfiles(<span class="hljs-string"><span class="hljs-string">"dev"</span></span>); (<span class="hljs-number"><span class="hljs-number">4</span></span>) ac.register(Application.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>); ac.refresh(); } }</code> </pre> <br>  (1) Diese Konfigurationsklasse und alle darin enthaltenen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Bean-</a> Definitionen werden nur berechnet, wenn das Produktprofil aktiv ist. <br><br>  (2) Diese Konfigurationsklasse und alle darin enthaltenen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Bean-</a> Definitionen werden nur berechnet, wenn das Entwicklungsprofil aktiv ist oder kein Profil aktiv ist, einschlie√ülich Entwickler. <br><br>  (3) Diese InitializingBean-Komponente zeichnet einfach das aktuell aktive Profil auf und gibt den Wert ein, der schlie√ülich in die Eigenschaftendatei eingegeben wurde. <br><br>  (4) Das programmgesteuerte Aktivieren eines Profils (oder von Profilen) ist recht einfach. <br><br>  Spring reagiert auf verschiedene andere Profilaktivierungsmethoden mit dem Token spring_profiles_active oder spring.profiles.active.  Ein Profil kann mithilfe einer Umgebungsvariablen (z. B. SPRING_PROFILES_ACTIVE), einer JVM-Eigenschaft (‚ÄëDspring.profiles.active = ...), eines Servlet-Anwendungsinitialisierungsparameters oder programmgesteuert festgelegt werden. <br><br><h3>  Bootiful Konfiguration </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Spring Boot</a> verbessert die Situation erheblich.  Die Umgebung l√§dt zun√§chst automatisch Eigenschaften aus einer Hierarchie vordefinierter Speicherorte.  Befehlszeilenargumente √ºberschreiben von JNDI abgeleitete Eigenschaftswerte, die von System.getProperties () usw. erhaltene Eigenschaften √ºberschreiben. <br><br>  - Befehlszeilenargumente. <br>  - JNDI-Attribute aus Java: comp / env. <br>  - Eigenschaften von System.getProperties (). <br>  - Umgebungsvariablen des Betriebssystems. <br>  - Externe Eigenschaftendateien im Dateisystem: (config /)? Application. (Yml.properties). <br>  - Interne Eigenschaftendateien im Archiv (config /)? Application. (Yml.properties). <br>  - Annotation @PropertySource in Konfigurationsklassen. <br>  - Quelleneigenschaften von SpringApplication.getDefaultProperties (). <br><br>  Wenn das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Profil aktiv ist, werden</a> Daten aus Konfigurationsdateien basierend auf dem Profilnamen automatisch gelesen, z. B. aus einer Datei wie src / main / resources / application-foo.properties, wobei foo das aktuelle Profil ist. <br><br>  Wenn die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SnakeYAML-</a> Bibliothek in den Klassenpfaden erw√§hnt wird, werden auch YAML-Dateien automatisch geladen, wobei im Wesentlichen dieselbe Konvention <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">angewendet wird</a> . <br><br><blockquote>  Auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">YAML-</a> Spezifikationsseite hei√üt es: ‚ÄûYAML ist ein lesbarer Standard f√ºr die Serialisierung von Daten f√ºr alle Programmiersprachen.‚Äú  YAML ist eine hierarchische Darstellung von Werten.  In regul√§ren Dateien mit der Erweiterung .properties wird die Hierarchie durch einen Punkt (".") Angezeigt. In YAML-Dateien werden eine neue Zeile und eine zus√§tzliche Einr√ºckungsstufe verwendet.  Es w√§re sch√∂n, diese Dateien zu verwenden, um zu vermeiden, dass bei stark verzweigten Konfigurationsb√§umen gemeinsame Wurzeln angegeben werden m√ºssen. </blockquote><br>  Der Inhalt einer Datei mit der Erweiterung .yml ist in Beispiel 3.6 dargestellt. <br><br>  Beispiel 3.6  Eigenschaftendatei Application.yml.  Die Daten werden in hierarchischer Reihenfolge dargestellt. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span>: projectName : Spring Boot management: <span class="hljs-keyword"><span class="hljs-keyword">security</span></span>: enabled: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span></code> </pre> <br>  Dar√ºber hinaus macht es die Spring Boot-Umgebung in allgemeinen F√§llen viel einfacher, das richtige Ergebnis zu erzielen.  Die Argumente -D werden in Prozess- und Java-Umgebungsvariablen umgewandelt, die als Eigenschaften verf√ºgbar sind.  Sie f√ºhrt sogar ihre Normalisierung durch, bei der die Umgebungsvariable $ CONFIGURATION_PROJECTNAME (PROJECT_NAME CONFIGURATION) oder das Argument -D in der Form ‚ÄìDconfiguration.projectName (configuration.project_name) wie zuvor mit dem Schl√ºssel configuration.projectName (configuration.project_name) verf√ºgbar gemacht werden Das Token spring_profiles_active ist verf√ºgbar. <br><br>  Konfigurationswerte sind Zeichenfolgen, und wenn sie ausreichen, k√∂nnen sie unlesbar werden, wenn versucht wird, sicherzustellen, dass solche Schl√ºssel selbst nicht zu magischen Zeichenfolgen im Code werden.  Spring Boot f√ºhrt den Komponententyp @ConfigurationProperties ein.  Wenn Sie ein POJO - Plain Old Java Object - mit @ConfigurationProperties kommentieren und ein Pr√§fix angeben, versucht Spring, alle Eigenschaften, die mit diesem Pr√§fix beginnen, POJO-Eigenschaften zuzuordnen.  Im folgenden Beispiel wird der Wert f√ºr configuration.projectName einer POJO-Instanz zugeordnet, die dann vom gesamten Code injiziert und dereferenziert werden kann, um typsichere Werte zu lesen.  Infolgedessen haben Sie nur an einer Stelle eine Zuordnung vom Schl√ºssel (String) (Beispiel 3.7). <br><br>  Beispiel 3.7.  Automatisches Aufl√∂sen von Eigenschaften aus src / main / resources / application.yml <br>  Paketstart; <br><br><pre> <code class="hljs java"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.Log; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.LogFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.annotation.Autowired; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.SpringApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.autoconfigure.SpringBootApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.context.properties.ConfigurationProperties; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.context.properties.EnableConfigurationProperties; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.stereotype.Component; (<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-meta"><span class="hljs-meta">@EnableConfigurationProperties</span></span> <span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Log log = LogFactory.getLog(getClass()); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ SpringApplication.run(Application.class); } <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Application</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ConfigurationProjectProperties cp)</span></span></span><span class="hljs-function"> </span></span>{ log.info(<span class="hljs-string"><span class="hljs-string">"configurationProjectProperties.projectName = "</span></span> + cp.getProjectName()); } } (<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-meta"><span class="hljs-meta">@ConfigurationProperties</span></span>(<span class="hljs-string"><span class="hljs-string">"configuration"</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConfigurationProjectProperties</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String projectName; (<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getProjectName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> projectName; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setProjectName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String projectName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.projectName = projectName; } }</code> </pre> <br>  (1) Die Annotation @EnableConfigurationProperties weist Spring an, Eigenschaften POJOs zuzuordnen, die mit @ConfigurationProperties annotiert sind. <br><br>  (2) Die Annotation @ConfigurationProperties zeigt Spring, dass diese Bean als Stamm f√ºr alle Eigenschaften verwendet werden sollte, beginnend mit der Konfiguration. Gefolgt von Token, die den Eigenschaften des Objekts zugeordnet sind. <br><br>  (3) Dem Feld projectName wird letztendlich der Wert zugewiesen, der dem Eigenschaftsschl√ºssel configuration.projectName zugewiesen ist. <br><br>  Spring Boot verwendet aktiv den @ ConfigurationProperties-Mechanismus, um Benutzern die M√∂glichkeit zu geben, die elementaren Komponenten des Systems zu √ºberschreiben.  M√∂glicherweise stellen Sie fest, dass Sie mit den Eigenschaftsschl√ºsseln √Ñnderungen vornehmen k√∂nnen, indem Sie beispielsweise der Spring Boot-Webanwendung die Abh√§ngigkeit org.springframework.boot: Spring-Boot-Starter-Actuator hinzuf√ºgen und dann Seite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">127.0.0.1</a> : 8080 / configprops aufrufen. <br><br><blockquote>  Die Aktorendpunkte werden in Kapitel 13 ausf√ºhrlicher erl√§utert. Sie sind gesperrt und erfordern einen Standardbenutzernamen und ein Standardkennwort.  Sicherheitsma√ünahmen k√∂nnen deaktiviert werden (jedoch nur, um diese Punkte zu betrachten), indem management.security.enabled = false in der Datei application.properties (oder in application.yml) angegeben wird. </blockquote><br>  Sie erhalten eine Liste der unterst√ºtzten Konfigurationseigenschaften basierend auf den Typen, die zur Laufzeit in den Klassenpfaden angezeigt werden.  Wenn die Anzahl der Spring Boot-Typen zunimmt, werden zus√§tzliche Eigenschaften angezeigt.  Dieser Endpunkt zeigt auch Eigenschaften an, die von Ihren POJOs mit der Annotation @ConfigurationProperties exportiert wurden. <br><br><h3>  Zentralisierte registrierte Konfiguration mit Spring Cloud Configuration Server </h3><br>  Bisher ist alles in Ordnung, aber die Dinge m√ºssen noch erfolgreicher sein.  Wir haben noch keine Fragen zu h√§ufigen Anwendungsf√§llen beantwortet: <br><br><ul><li>  Nach √Ñnderungen an der Anwendungskonfiguration ist ein Neustart erforderlich. </li><li>  Keine R√ºckverfolgbarkeit: Wie k√∂nnen die in Betrieb genommenen √Ñnderungen ermittelt und gegebenenfalls zur√ºckgesetzt werden? </li><li>  Konfiguration ist dezentral;  Es ist nicht sofort klar, wo √Ñnderungen vorgenommen werden sollten, um den einen oder anderen Aspekt zu √§ndern. </li><li>  Keine Installationsunterst√ºtzung f√ºr das Codieren und Decodieren aus Sicherheitsgr√ºnden. </li></ul><br><h3>  Spring Cloud-Konfigurationsserver </h3><br>  Das Problem der Zentralisierung der Konfiguration kann gel√∂st werden, indem die Konfiguration in einem Verzeichnis gespeichert und alle Anwendungen darauf verwiesen werden.  Sie k√∂nnen die Versionskontrolle dieses Verzeichnisses auch mit Git oder Subversion installieren.  Dann wird die f√ºr die √úberpr√ºfung und Registrierung erforderliche Unterst√ºtzung erhalten.  Die letzten beiden Anforderungen werden jedoch immer noch nicht erf√ºllt, sodass etwas Anspruchsvolleres erforderlich ist.  Wenden Sie sich an den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Spring Cloud-</a> Konfigurationsserver.  Die Spring Cloud-Plattform bietet einen Konfigurationsserver und einen Client f√ºr diesen Server. <br><br>  Der Spring Cloud Config-Server ist eine REST-API, mit der unsere Clients eine Verbindung herstellen, um ihre Konfiguration abzurufen.  Der Server verwaltet auch das Versionskontrollkonfigurations-Repository.  Er ist ein Vermittler zwischen unseren Kunden und dem Konfigurations-Repository und daher in einer g√ºnstigen Position, um Sicherheitstools zum Verbinden von Verbindungen von Clients zum Dienst und Verbindungen vom Dienst zum Konfigurations-Repository mit Versionskontrolle zu implementieren.  Der Spring Cloud Config-Client bietet Clientanwendungen einen neuen Bereich, die Aktualisierung, mit der Sie Spring-Komponenten erneut konfigurieren k√∂nnen, ohne die Anwendung neu starten zu m√ºssen. <br><br><blockquote>  Technologien wie der Spring Cloud Config-Server spielen eine wichtige Rolle, verursachen jedoch zus√§tzlichen Aufwand.  Im Idealfall sollte diese Verantwortung auf die Plattform √ºbertragen und automatisiert werden.  Bei Verwendung von Cloud Foundry finden Sie den Config Server-Dienst im Dienstkatalog, dessen Aktionen auf der Verwendung des Spring Cloud Config-Servers basieren. </blockquote><br>  Betrachten Sie ein einfaches Beispiel.  Konfigurieren Sie zun√§chst den Spring Cloud Config-Server.  Auf einen solchen Dienst k√∂nnen mehrere Spring Boot-Anwendungen gleichzeitig zugreifen.  Sie m√ºssen daf√ºr sorgen, dass es irgendwo und irgendwie funktioniert.  Dann m√ºssen nur noch alle unsere Dienste dar√ºber informiert werden, wo sich der Konfigurationsdienst befindet.  Es fungiert als eine Art Vermittler f√ºr Konfigurationsschl√ºssel und -werte, die vom Git-Speicher √ºber das Netzwerk oder von der Festplatte gelesen werden.  F√ºgen Sie der Assembly Ihrer Spring Boot-Anwendung die Zeichenfolge org.springframework.cloud: spring-cloud-config-server hinzu, um den Spring Cloud Config-Server aufzurufen (Beispiel 3.8). <br><br>  Beispiel 3.8.  Verwenden Sie die Annotation @EnableConfigServer, um einen Konfigurationsserver in die Assembly einzubetten <br><br><pre> <code class="hljs java"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> demo; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.SpringApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.autoconfigure.SpringBootApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.cloud.config.server.EnableConfigServer; (<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-meta"><span class="hljs-meta">@EnableConfigServer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ SpringApplication.run(Application.class, args); } }</code> </pre> <br>  (1) Durch die Verwendung der Annotation @EnableConfigServer wird der Spring Cloud Config-Server installiert. <br><br>  Beispiel 3.9 zeigt die Konfiguration f√ºr den Konfigurationsdienst. <br><br>  Beispiel 3.9.  Konfiguration des Konfigurationsservers Src / main / resources / application.yml <br><br>  server.port = 8888 <br>  spring.cloud.config.server.git.uri = \ <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github.com/cloud-native-java/config-server-configuration-repository</a> (1) <br><br>  (1) Ein Hinweis auf ein funktionierendes Git-Repository, das lokaler Natur ist oder √ºber das Netzwerk zug√§nglich ist (z. B. auf GitHub (https://github.com/)) und vom Spring Cloud Config-Server verwendet wird. <br><br>  Hier wird der Spring Cloud-Konfigurationsdienst angewiesen, im Git-Repository auf GitHub nach Konfigurationsdateien f√ºr einzelne Clients zu suchen.  Wir haben auf dieses Repository verwiesen, aber ein Link zu einem g√ºltigen Git-URI w√ºrde ausreichen.  Nat√ºrlich muss er sich nicht einmal auf das Git-System anwenden, Sie k√∂nnen Subversion oder sogar nicht verwaltete Verzeichnisse verwenden (obwohl wir dringend davon abraten).  In diesem Fall ist der Speicher-URI fest codiert, aber nichts hindert ihn daran, vom Argument -D, vom Argument oder von einer Umgebungsvariablen zu stammen. <br><br>  ¬ªWeitere Informationen zum Buch finden Sie auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der Website des Herausgebers</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Inhalt</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Auszug</a> <br><br>  20% Rabatt auf den Gutschein f√ºr <b>Java</b> Fermenter - <b>Java</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de425109/">https://habr.com/ru/post/de425109/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de425099/index.html">Was ich verstanden habe und auf welche Probleme ich beim Erstellen eines Hacker News-Klons gesto√üen bin</a></li>
<li><a href="../de425101/index.html">Docker + Laravel = ‚ù§</a></li>
<li><a href="../de425103/index.html">Stoppen Sie Google Predators bei der Verfolgung Ihrer Kinder</a></li>
<li><a href="../de425105/index.html">Intel ME Manufacturing Mode - eine versteckte Bedrohung oder was steckt hinter der Sicherheitsanf√§lligkeit CVE-2018-4251 im MacBook?</a></li>
<li><a href="../de425107/index.html">Fintech Digest: Probleme der Biometrie auf Mobilger√§ten, Leasing von Samsung-Handys, Wertpapiere in der Blockchain</a></li>
<li><a href="../de425111/index.html">Werbetricks, die Sie Geld und Ansehen kosten k√∂nnen</a></li>
<li><a href="../de425113/index.html">"Digitale Typografie" oder meine Erfahrung in der mobilen Digitalisierung von B√ºchern</a></li>
<li><a href="../de425115/index.html">Ausgereifte DevOps: Griechische Trag√∂die in drei Akten</a></li>
<li><a href="../de425117/index.html">Zwei Bits pro Transistor: ROM mit hoher Dichte in einem Intel 8087-Gleitkomma-Chip</a></li>
<li><a href="../de425123/index.html">Das mysteri√∂se Herz der Roland TR-808 Drum Machine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>