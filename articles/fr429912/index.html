<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚öôÔ∏è ‚õìÔ∏è ‚õ©Ô∏è D√©veloppement de biblioth√®que: de l'API √† la version publique üöà ‚è±Ô∏è ü¶ë</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Regardons les biblioth√®ques non pas du c√¥t√© qui nous est le plus familier, c'est-√†-dire celui de l'utilisateur, mais du point de vue du d√©veloppeur de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©veloppement de biblioth√®que: de l'API √† la version publique</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/429912/">  Regardons les biblioth√®ques non pas du c√¥t√© qui nous est le plus familier, c'est-√†-dire celui de l'utilisateur, mais du point de vue du d√©veloppeur de la biblioth√®que de d√©veloppement mobile.  Parlons des approches √† suivre lors du d√©veloppement de votre biblioth√®que.  Nous commen√ßons, bien s√ªr, par la conception d'une telle API que vous aimeriez utiliser vous-m√™me, ce qui serait pratique.  Nous r√©fl√©chirons √† ce qui doit √™tre pris en compte afin de cr√©er non seulement du code fonctionnel, mais une tr√®s bonne biblioth√®que, et arriver au point de publier une v√©ritable version publique pour adultes.  <strong>Asya Sviridenko</strong> nous aidera √† cet √©gard, qui partagera son exp√©rience consid√©rable dans le d√©veloppement de la biblioth√®que mobile SpeechKit √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Yandex</a> . <br><br>  Le mat√©riel sera utile non seulement √† ceux impliqu√©s dans le d√©veloppement d'une biblioth√®que ou d'un framework, mais aussi √† ceux qui souhaitent s√©parer une partie de leur application dans un module s√©par√©, puis le r√©utiliser, ou, par exemple, partager leur code avec le reste de la communaut√© des d√©veloppeurs en le publiant dans acc√®s public. <br><br>  Pour tout le monde, l'histoire sera remplie d'histoires authentiques de la vie de l'√©quipe mobile SpeechKit, donc √ßa devrait √™tre amusant. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/uvx060VepYo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><h3>  Table des mati√®res <br></h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SpeechKit minute</a> . <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Concevoir une</a> API pratique et compr√©hensible que vous souhaitez utiliser. <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©veloppement</a> .  Ce qu'il faut ajouter au code pour qu'il fonctionne non seulement et ex√©cute des fonctionnalit√©s, mais qu'il aide √©galement vos utilisateurs. <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lancement</a> - ce que vous ne devez pas oublier lorsque vous lancez la version. <br></li></ul><br><a name="speechkit"></a><br><h2>  SpeechKit minute </h2><br>  Je ne vous demanderai pas si vous avez entendu parler de SpeechKit, car m√™me √† l'int√©rieur de Yandex, tout le monde ne sait pas ce que c'est. <br><br>  <strong>SpeechKit est la porte de toutes les technologies vocales Yandex</strong> .  Gr√¢ce √† cette biblioth√®que, vous pouvez int√©grer des technologies vocales dans votre application: reconnaissance et synth√®se vocale, activation vocale. <br><br>  Vous avez probablement entendu parler de l'assistante vocale Alice - elle travaille uniquement sur la base de SpeechKit.  SpeechKit lui-m√™me n'inclut pas la reconnaissance ou la synth√®se, cela se produit sur le serveur.  Mais c'est gr√¢ce √† notre biblioth√®que que tout peut √™tre int√©gr√© dans l'application. <br><br>  La question suivante est g√©n√©ralement - si tout se passe sur le serveur, que fait la biblioth√®que?  Pourquoi est-il n√©cessaire? <br><br>  La biblioth√®que fait beaucoup: <br><br><ol><li>  <strong>Synchronisation de tous les processus.</strong>  Par exemple, en utilisant un assistant vocal, un utilisateur clique sur un bouton, dit quelque chose, interrompt l'assistant, fait des demandes - tout passe par la biblioth√®que.  Pour l'utilisateur de notre biblioth√®que c'est transparent, il ne faut pas se soucier de tout √ßa. </li><li>  <strong>R√©seautage</strong>  √âtant donn√© que tout se passe sur le serveur, vous devez obtenir des donn√©es √† partir de l√†, les traiter et les donner √† l'utilisateur.  SpeechKit peut d√©sormais acc√©der √† plusieurs serveurs diff√©rents au sein d'une m√™me connexion r√©seau: l'un est engag√© dans la reconnaissance, l'autre dans l'attribution de sens, le troisi√®me dans la reconnaissance musicale, etc.  Tout cela est cach√© dans la biblioth√®que, les utilisateurs n'ont pas √† s'en soucier. </li><li>  <strong>Travaillez avec des sources audio.</strong>  Nous avons affaire √† la parole humaine, et le travail avec l'audio se fait √©galement dans SpeechKit.  De plus, nous pouvons non seulement √©crire √† partir d'un appareil standard, mais √©galement recevoir des donn√©es de n'importe o√π.  Il peut s'agir d'un fichier ou d'un flux - nous pouvons travailler avec tout cela. </li></ol><br>  SpeechKit est utilis√© dans les √©quipes internes.  Maintenant, il a √©t√© int√©gr√© par 16 √©quipes Yandex.  Et nous connaissons m√™me plusieurs √©quipes externes qui l'ont fait aussi. <br><a name="disain"></a><br><h2>  La conception </h2><br>  R√©fl√©chissons √† ce que nous entendons par une application pratique.  Habituellement, il s'agit d'un UX r√©fl√©chi et compr√©hensible, la solution √† nos probl√®mes, un fonctionnement stable, etc. <br><br>  Lorsque nous disons qu'une biblioth√®que est pratique, nous voulons tout d'abord dire qu'elle poss√®de une telle API qu'elle est facile √† utiliser.  Comment y parvenir? <br><br><h3>  Principes de base <br></h3><br>  Ce sont certains des aspects que j'ai appris de mon exp√©rience avec SpeechKit. <br><br><ul><li>  <strong>Tout d'abord, n'oubliez pas que vos utilisateurs sont des d√©veloppeurs</strong> . <br></li></ul><br>  D'une part, c'est bien, car vous ne pouvez pas expliquer aux utilisateurs ordinaires: "Vous voyez, le backend est avec nous, et donc rien ne fonctionne, et nous allons bien!"  Vous pouvez l'expliquer aux d√©veloppeurs - vous pouvez en expliquer beaucoup aux d√©veloppeurs! <br><br>  D'un autre c√¥t√©, vous obtenez de tels utilisateurs qui en profiteront certainement pour trouver un trou et casser quelque chose si vous le laissez.  Nous utilisons tous des biblioth√®ques et essayons d'en tirer le meilleur parti.  Ils pr√©tendent qu'ils ne font que ceci, ceci et cela, et nous pensons: "Non, maintenant nous allons jouer une petite farce ici, nous allons le transmettre et tout sera comme il se doit." <br><br>  De plus, le fait que les utilisateurs soient des d√©veloppeurs signifie que vous aurez toujours une montagne de trucs et astuces sur la fa√ßon de d√©velopper et d'am√©liorer tout. <br><br>  Le deuxi√®me point important est parfaitement coh√©rent avec le premier. <br><br><ul><li>  <strong>Tout ce qui n'est pas autoris√© dans votre biblioth√®que doit √™tre interdit,</strong> <strong><br></strong>  <strong>afin qu'il n'y ait pas d'√©chappatoires ind√©sirables.</strong> <br></li></ul><br>  Si vos utilisateurs commencent √† faire quelque chose avec la biblioth√®que que vous ne vous attendiez pas, c'est un chemin direct vers les bogues et ceux qui sont difficiles √† d√©boguer.  Essayez d'utiliser tout ce que le langage donne et la technologie que vous utilisez: publique / priv√©e, finale, obsol√®te, en lecture seule.  R√©duisez la port√©e, interdisez l'h√©ritage et l'utilisation de certaines m√©thodes, marquez les propri√©t√©s qui ne peuvent pas √™tre modifi√©es - fournissez tout ce qui est possible pour emp√™cher quelque chose que votre biblioth√®que n'est tout simplement pas con√ßue pour faire. <br><br><ul><li>  <strong>Ne laissez pas d'ambigu√Øt√©s dans l'interpr√©tation de l'API de votre biblioth√®que.</strong> <br></li></ul><br>  Si cette classe particuli√®re peut √™tre cr√©√©e d'une mani√®re, refusez toutes les autres.  Si cette propri√©t√© ne peut pas √™tre nulle, sp√©cifiez-la explicitement.  Dans iOS, il y a nullable / nonnull, initialiseur d√©sign√©, la m√™me chose est en Java et Android.  Utilisez tout cela pour que l'utilisateur puisse ouvrir le fichier, ouvrir votre classe, le parcourir et comprendre imm√©diatement ce qui peut √™tre fait et ce qui ne peut pas √™tre fait. <br><br><h3>  API Case SpeechKit <br></h3><br>  En utilisant SpeechKit comme exemple, je vais vous expliquer comment nous avons refactoris√© la version 2 en version 3. Nous avons beaucoup chang√© l'API et essay√© d'utiliser tous ces principes. <br><br>  Le besoin s'est fait sentir car l' <strong>API √©tait complexe et ¬´th√©orique¬ª</strong> .  Il y avait des composants mondiaux qui devaient √™tre appel√©s en premier - pas appel√©s - tout ne fonctionnait pas.  Des param√®tres tr√®s √©tranges ont √©t√© d√©finis.  L'API √©tait assez ¬´th√©orique¬ª, car SpeechKit faisait √† l'origine partie du Navigateur, puis cette pi√®ce a √©t√© transf√©r√©e √† la biblioth√®que.  L'API fonctionnait essentiellement avec les cas utilis√©s dans Navigator. <br><br>  Petit √† petit, le nombre d'utilisateurs a augment√© et nous avons commenc√© √† comprendre ce dont ils avaient vraiment besoin: quelles m√©thodes, rappels, param√®tres.  Ils nous sont venus avec des demandes que l'API ne permettait pas de mettre en ≈ìuvre.  Cela a √©t√© r√©p√©t√© maintes et maintes fois, et il est devenu clair que l'API n'√©tait pas √† la hauteur.  Nous nous sommes donc impliqu√©s dans le refactoring. <br><br>  <strong>Le processus de refactoring a √©t√© long (six mois) et douloureux (tout le monde √©tait m√©content)</strong> .  La principale difficult√© n'√©tait pas de prendre une montagne de code et de la r√©√©crire.  Il √©tait impossible d'opter simplement pour le refactoring, mais il √©tait n√©cessaire de prendre en charge toutes les versions actives qui √©taient en cours d'utilisation.  Nous ne pouvions pas simplement dire √† nos utilisateurs: "Les gars, oui, cela ne fonctionne pas pour vous, oui, vous avez besoin de cette fonctionnalit√© - nous ferons tout dans la version 3, veuillez attendre six mois!" <br><br>  En cons√©quence, le refactoring a pris beaucoup de temps, et le processus a √©t√© douloureux, ainsi que pour les utilisateurs.  Parce qu'au final, nous avons chang√© l'API sans r√©trocompatibilit√©.  Ils sont venus vers eux et ont dit: "Voici un nouveau magnifique SpeechKit, veuillez le prendre!"  - ils ont r√©pondu: "Non, nous ne pr√©voyons pas du tout de passer √† votre version 3.0."  Par exemple, nous avions une √©quipe qui est pass√©e √† cette version en un an.  Par cons√©quent, pendant une ann√©e enti√®re, nous avons pris en charge la version pr√©c√©dente pour eux. <br><br>  Mais le r√©sultat en valait la peine.  Nous avons <strong>obtenu une int√©gration simple et moins de bugs</strong> .  C'est ce que j'ai mentionn√© dans les principes de conception de base de l'API.  Si vous √™tes s√ªr que votre API est utilis√©e correctement, il n'y a certainement aucun probl√®me dans cette partie: toutes les classes sont appel√©es correctement, tous les param√®tres sont corrects.  Trouver des bogues est beaucoup plus facile, moins de cas o√π quelque chose pourrait mal se passer. <br><br>  Vous trouverez ci-dessous un exemple de l'aspect de la classe principale qui traite de la reconnaissance avant la refactorisation. <br><br><pre><code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// SpeechKit v2 @interface YSKRecognizer: NSObject @property (nonatomic, strong, readonly, getter=getModel) NSString* model; @property (nonatomic, assign, getter=isVADEnabled) BOOL VADEnabled; - (instancetype)initWithLanguage:(NSString *)language model:(NSString *)m; - (void)start; - (void)cancel; - (void)cancelSync; @end @interface YSKInitializer: NSObject - (instancetype)init; - (void)dealloc; - (void)start; + (BOOL)isInitializationCompleted; @end extern NSString *const YSKInactiveTimeout; extern NSString *const YSKVADEnabled; @interface YSKSpeechKit: NSObject + (instancetype)sharedInstance; ‚Äì (void)setParameter:(NSString *)name withValue:(NSString *)value; @end</span></span></code> </pre> <br>  Il s'agit d'une classe r√©guli√®re qui h√©rite de NSObject.  Examinons chacun de ses d√©tails s√©par√©ment.  Il est clair que nous pouvons en h√©riter, red√©finir certaines m√©thodes - tout ce qui peut √™tre fait avec NSObject. <br><br>  Ensuite, lors de la cr√©ation, deux lignes (langage et mod√®le) lui sont transmises.  Quelles sont ces lignes?  Si vous passez dans la langue "Hello, world", alors la sortie sera une traduction, ou quoi?  Pas tr√®s clair. <br><br>  De plus, puisque c'est le successeur de NSObject, nous pouvons appeler init, new, etc. dessus.  Que va-t-il se passer?  Cela fonctionnera-t-il ou attendra-t-il certains param√®tres? <br><br>  Bien s√ªr, je connais les r√©ponses √† ces questions, je connais ce code.  Mais les gens qui regardent cela pour la premi√®re fois ne comprennent pas du tout pourquoi c'est tout.  M√™me les m√©thodes avec setter et getter ne ressemblent pas du tout √† ce √† quoi elles pourraient ressembler dans iOS.  Les m√©thodes start, cancel, cancelSync (et celle qui vient d'annuler - est-ce aSync?) - que se passera-t-il si elles sont appel√©es ensemble?  Beaucoup de questions sur ce code. <br><br>  Vient ensuite l'objet dont j'ai parl√© (YSKInitializer), qui doit √™tre d√©marr√© pour que tout fonctionne - c'est g√©n√©ralement une sorte de magie.  On peut voir que ce code a √©t√© √©crit par des d√©veloppeurs qui n'√©crivent pas pour iOS, mais qui sont engag√©s en C ++. <br><br>  En outre, les param√®tres de ce module de reconnaissance ont √©t√© d√©finis via des composants globaux qui ont √©t√© transf√©r√©s vers un autre objet global, et en fait, il √©tait impossible de cr√©er deux modules de reconnaissance diff√©rents avec des ensembles de param√®tres diff√©rents.  Et c'√©tait probablement l'un des cas les plus populaires qui ne prenaient pas en charge l'API. <br><br><h3>  Que v3 est meilleur que v2 <br></h3><br>  Qu'avons-nous obtenu lorsque nous avons refactoris√© et pass√© √† la version 3? <br><br><ul><li>  <strong>API enti√®rement native.</strong> <br></li></ul><br>  Maintenant, notre API iOS ressemblait √† iOS-API, l'API Android ressemblait √† Android. <br><br><blockquote>  Un point important que nous n'avons pas r√©alis√© imm√©diatement est que les consignes relatives √† la plate-forme sont bien plus importantes que l'uniformit√© de l'API de votre biblioth√®que. <br></blockquote><br>  Par exemple, les classes pour Android sont cr√©√©es √† l'aide de constructeurs, car il s'agit d'un mod√®le tr√®s compr√©hensible pour les d√©veloppeurs Android.  Dans iOS, ce n'est pas si populaire, donc une approche diff√©rente est utilis√©e: nous cr√©ons des objets avec une classe sp√©ciale de param√®tres. <br><br>  Je me souviens de la fa√ßon dont nous nous sommes longtemps disput√©s sur ce sujet.  Il nous semblait important que le d√©veloppeur prenne notre code sur iOS ou Android, et la correspondance serait de 99%.  Mais ce n'est pas le cas.  Mieux, le code sera similaire √† la plateforme pour laquelle il est d√©velopp√©. <br><br><ul><li>  <strong>Initialisation simple et intuitive</strong> . <br></li></ul><br>  Cet objet est n√©cessaire - voici ses param√®tres, cr√©ez-les, transf√©rez-les - profitez-en!  Autrement dit, aucun param√®tre global masqu√© ne doit √™tre transf√©r√© quelque part. <br><br><ul><li>  <strong>Manque de composants mondiaux.</strong> <br></li></ul><br>  Nous avons jet√© des composants mondiaux qui ont d√©rout√©, effray√© et caus√© beaucoup de questions, m√™me parmi les d√©veloppeurs de cette biblioth√®que, pas seulement les utilisateurs. <br><br>  Maintenant, la m√™me classe dans la nouvelle version ressemble √† ceci (c'est toujours Objective-C - vous ne pouviez pas passer √† Swift alors). <br><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// SpeechKit v3 NS_ASSUME_NONNULL_BEGIN __attribute__((objc_subclassing_restricted)) @interface YSKOnlineRecognizer: NSObject&lt;YSKRecognizing&gt; @property (nonatomic, copy, readonly) YSKOnlineRecognizerSettings *settings; - (instancetype)initWithSettings:(YSKOnlineRecognizerSettings *)s audioSource:(id&lt;YSKAudioSource&gt;)as NS_DESIGNATED_INITIALIZER; + (instancetype)new __attribute__((unavailable("Use designated initializer."))); - (instancetype)init __attribute__((unavailable("Use designated initializer."))); @end NS_ASSUME_NONNULL_END @protocol YSKRecognizing &lt;NSObject&gt; - (void)prepare; - (void)startRecording; - (void)cancel; @end @interface YSKOnlineRecognizerSettings: NSObject&lt;NSCopying&gt; @property (nonatomic, copy, readonly) YSKLanguage *language; @property (nonatomic, copy, readonly) YSKOnlineModel *model; @property (nonatomic, assign) BOOL enableVAD; - (instancetype)initWithLanguage:(YSKLanguage *)l model:(YSKOnlineModel *)m NS_DESIGNATED_INITIALIZER; @end @interface YSKLanguage: YSKSetting + (instancetype)russian; + (instancetype)english; @end</span></span></code> </pre><br>  C'est le successeur de NSObject, mais maintenant nous parlons clairement du fait que vous ne pouvez pas en h√©riter.  Toutes les m√©thodes caract√©ristiques de cet objet sont transf√©r√©es vers un protocole sp√©cial.  Il est cr√©√© en utilisant les param√®tres et audioSource.  Maintenant, tous les param√®tres sont encapsul√©s dans un seul objet, qui est transf√©r√© sp√©cifiquement ici pour d√©finir les param√®tres d'un identificateur sp√©cifique. <br><br>  De plus, nous avons supprim√© le travail avec l'audio d'ici, c'est-√†-dire que le reconnaiser n'est plus le composant qui √©crit l'audio.  Cette composante traite des probl√®mes de reconnaissance, et n'importe quelle source peut √™tre transf√©r√©e ici. <br><br>  Les autres m√©thodes de cr√©ation via new ou via init sont interdites, car cette classe n√©cessite des param√®tres par d√©faut.  S'il vous pla√Æt, si vous souhaitez l'utiliser, cr√©ez au moins certains param√®tres par d√©faut. <br><br>  L'essentiel est que ces param√®tres qui sont transf√©r√©s ici sont immuables, c'est-√†-dire que vous ne pouvez pas les modifier dans le processus.  Pas besoin d'essayer, quand quelque chose est reconnu, de remplacer le mod√®le ou le langage.  En cons√©quence, nous ne donnons pas aux utilisateurs la possibilit√© de modifier l'objet avec les param√®tres qui ont d√©j√† √©t√© transf√©r√©s. <br><br>  Macros NS_ASSUME_NONNULL_BEGIN / NS_ASSUME_NONNULL_END afin de souligner que ces param√®tres ne peuvent pas √™tre nuls: audioSource ne peut pas √™tre nul - tout doit avoir une valeur sp√©cifique pour fonctionner. <br><br>  Comme je l'ai dit, les m√©thodes de d√©marrage et d'annulation (√† gauche cancelSync) ont √©t√© d√©plac√©es vers un protocole distinct.  Il y a des endroits dans la biblioth√®que o√π vous pouvez utiliser non pas notre reconnaiser, mais tout autre.  Par exemple, nous utilisons le natif d'Apple, qui impl√©mente ce protocole et dans lequel il peut transf√©rer nos composants. <br><br>  Les param√®tres ici sont NSCopying afin que nous puissions les copier, et ils n'ont pas pu √™tre modifi√©s dans le processus.  En init, les param√®tres requis sont la langue, le mod√®le et NS_DESIGNATED_INITIALIZER.  Ce n'est pas un morceau de code identique aux m√©thodes obsol√®tes, mais l'id√©e est claire.  Ce sont les param√®tres requis avec lesquels les param√®tres sont cr√©√©s.  Ils doivent √™tre et doivent √™tre diff√©rents de z√©ro. <br><br>  Le reste de l'ensemble comprend environ 20 param√®tres du module de reconnaissance d√©finis ici.  M√™me les param√®tres d'un langage ou d'un mod√®le sont √©galement des classes distinctes qui ne nous permettent pas de transmettre quelque chose d'abstrait avec lequel nous ne pouvons pas travailler.  Autrement dit, nous disons clairement: ¬´S'il vous pla√Æt, ne nous donnez pas quelque chose avec lequel nous ne savons pas travailler.  Le compilateur ne vous laissera pas faire cela. ¬ª <br><br>  Nous avons donc parl√© de ce que vous pouvez faire avec l'API.  Le d√©veloppement a √©galement ses propres nuances. <br><a name="develop"></a><br><h2>  D√©veloppement </h2><br>  Tout d'abord, la biblioth√®que doit faire ce pour quoi vous l'avez √©crit - pour bien ex√©cuter ses fonctionnalit√©s.  Mais vous pouvez faire de votre code une tr√®s bonne biblioth√®que.  Je propose plusieurs remarques que j'ai collect√©es lors du d√©veloppement de SpeechKit. <br><br><h3>  Le code n'est pas seulement pour vous <br></h3><br>  <strong>Il est</strong> absolument n√©cessaire de <strong>collecter des informations de d√©bogage</strong> , car vous ne voulez pas que les utilisateurs disent que leur service ne fonctionne pas √† cause de votre biblioth√®que. <br><br>  IOS a un niveau d'informations de d√©bogage qui montre quelles informations doivent √™tre collect√©es.  Par d√©faut, il collectera absolument tout ce qu'il peut trouver: tous les appels, toutes les valeurs.  C'est tr√®s bien, mais c'est une tr√®s grande quantit√© de donn√©es.  La d√©finition de -gline-tables-only vous permet de collecter des informations sur les appels de fonction.  C'est plus que suffisant pour trouver un probl√®me et le r√©soudre. <br><br>  Ceci est inclus dans les param√®tres Xcode (Param√®tres de construction) et s'appelle le niveau d'informations de d√©bogage.  Par exemple, en activant ce param√®tre, nous avons r√©duit la taille du fichier binaire SpeechKit de 600 Mo √† 90 Mo.  Ce ne sont pas des informations tr√®s n√©cessaires et nous venons de les jeter. <br><br>  La deuxi√®me chose importante est de <strong>cacher les caract√®res priv√©s</strong> .  Vous savez tous que chaque fois que vous t√©l√©chargez une biblioth√®que sur iTunes, vous courez le risque de recevoir un nouvel avertissement indiquant que vous utilisez quelque chose de mal, et que vous n'ajoutez rien.  Par cons√©quent, si vous utilisez des biblioth√®ques qu'Apple consid√®re comme priv√©es, assurez-vous de les masquer.  Cela ne signifie rien pour vous, vous pouvez √©galement travailler avec eux, mais d√®s que vos utilisateurs essaieront de t√©l√©charger l'application avec votre biblioth√®que sur iTunes, ils recevront une erreur.  Tout le monde ne vous demandera pas de le r√©parer; la plupart refuseront simplement d'utiliser votre solution. <br><br>  <strong>√âvitez les conflits de caract√®res</strong> : ajoutez des pr√©fixes √† tout ce que vous avez, √† vos classes, aux cat√©gories.  Si la biblioth√®que a une cat√©gorie UIColor + HEX, assurez-vous que vos utilisateurs ont exactement la m√™me cat√©gorie et lorsqu'ils int√©greront votre biblioth√®que, ils recevront des conflits de caract√®res.  Et encore une fois, tout le monde ne voudra pas vous le dire et le dire. <br><br>  Une autre question est lorsque vous utilisez vous-m√™me des biblioth√®ques tierces dans votre biblioth√®que.  Il y a quelques nuances qui m√©ritent d'√™tre rappel√©es.  Tout d'abord, si vous utilisez quelque chose qui est apparu dans une version ant√©rieure √† votre biblioth√®que, n'oubliez pas d'utiliser une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">liaison faible</a> (Xcode -&gt; Phases de construction -&gt; Lier le binaire aux biblioth√®ques -&gt; Le statut est activ√©).  Cela vous permet de ne pas tomber si du coup cette biblioth√®que ne l'est pas. <br><br>  La documentation d'Apple explique comment cela fonctionne.  Mais une liaison faible ne signifie pas que la biblioth√®que ne se chargera pas si elle n'est pas utilis√©e.  Autrement dit, si l'heure de d√©but de l'application est importante pour vos utilisateurs et que vous n'avez pas besoin de la partie de votre biblioth√®que qui utilise une biblioth√®que tierce et prend du temps pour d√©marrer, une liaison faible ne vous aidera pas.  Avec elle, la biblioth√®que se charge toujours, qu'elle soit utilis√©e ou non. <br><br>  Si vous souhaitez charger dans le runtime, cela vous aidera √† vous d√©barrasser du probl√®me de lien au d√©marrage, alors vous devez utiliser dlopen et le chargement dynamique.  Cela n√©cessite beaucoup d'agitation, et vous devez d'abord comprendre si cela a du sens.  Facebook a un <a href="">code</a> assez <a href="">int√©ressant pour un</a> exemple de la fa√ßon dont ils se sont li√©s dynamiquement. <br><br>  Dernier - <strong>essayez de ne pas utiliser d'entit√©s globales √† l'int√©rieur</strong> .  Chaque plate-forme a des composants mondiaux.  Il est conseill√© de ne pas les faire glisser dans votre biblioth√®que.  Cela semble √©vident, car il s'agit d'un objet global, et les utilisateurs de votre biblioth√®que peuvent le prendre et le configurer √† leur guise.  Vous l'utilisez dans votre biblioth√®que, vous devez en quelque sorte enregistrer son √©tat, reconfigurer, puis restaurer l'√©tat.  Il y a beaucoup de nuances et il y a lieu de se tromper.  N'oubliez pas cela et essayez d'√©viter. <br><br>  Par exemple, dans SpeechKit, avant la troisi√®me version, nous avons travaill√© avec l'audio √† l'int√©rieur de la biblioth√®que, et nous avons explicitement configur√© et activ√© la session audio.  Une session audio dans iOS est une chose que toutes les applications ont - ne dites pas que vous n'en avez pas.  Il est cr√©√© au d√©but, est responsable de l'interaction de l'application et du d√©mon multim√©dia syst√®me, et indique ce que votre application veut faire avec l'audio.  Il s'agit d'un objet singleton dans le vrai sens du mot.  Nous l'avons calmement pris, configur√© selon nos besoins, mais cela a conduit au fait que les utilisateurs avaient des probl√®mes mineurs comme le changement du volume sonore.  Une autre m√©thode de sessions audio, qui est charg√©e de d√©finir les param√®tres, est assez longue.  Cela prend environ 200 ms, et c'est un ralentissement notable lors de l'activation ou de la d√©sactivation. <br><br>  Dans la troisi√®me version, j'ai joyeusement sorti une session audio de la biblioth√®que.  Apr√®s cela, presque tous les utilisateurs de tous les services qui avaient int√©gr√© SpeechKit se sont dit terriblement m√©contents.  Maintenant, ils devraient savoir qu'il existe une sorte de session audio qui doit √™tre sp√©cialement configur√©e pour notre SpeechKit. <br><br><blockquote>  La conclusion de ceci est la suivante: essayez tout de m√™me de ne pas utiliser des entit√©s globales, mais soyez pr√©par√© au fait que vos utilisateurs ne seront pas toujours satisfaits de vos d√©cisions. <br></blockquote><br><h3>  Nous le rendons pratique pour les utilisateurs <br></h3><br>  Comment pouvez-vous aider vos utilisateurs autrement? <br><br><ul><li>  <strong>Ajouter des journaux: diff√©rents niveaux, inclusion dynamique</strong> . <br></li></ul><br>  Le moyen le plus simple consiste √† joindre un fichier, pour la pr√©sence duquel un mode de d√©bogage m√©ga est lanc√©.  Cela aide vraiment √† d√©boguer dans une situation o√π vos utilisateurs ont des utilisateurs qui ont une erreur, et vous devez comprendre ce qui s'est exactement pass√©. <br><br><ul><li>  <strong>Prend en charge toutes les versions du syst√®me d'exploitation utilisateur.</strong> <br></li></ul><br>  N'oubliez pas que lorsque vous parlez de prise en charge des versions dans une biblioth√®que, ce n'est pas la m√™me chose que la prise en charge des versions dans une application standard.  Dans une application r√©guli√®re, nous examinons des statistiques selon lesquelles, par exemple, seulement 2% de nos utilisateurs utilisent iOS 8, et cela signifie que vous pouvez arr√™ter de prendre en charge iOS 8. Dans la biblioth√®que, ce n'est pas le cas, ici refuser la version du syst√®me d'exploitation signifie abandonner compl√®tement votre utilisateur et tous ses utilisateurs.  Cela peut √™tre la moiti√© de vos utilisateurs en principe. <br><br>  Par cons√©quent, vous devez surveiller les versions utilis√©es par les applications qui utilisent votre biblioth√®que, et sur cette base, vous devez d√©j√† d√©terminer si vous prenez en charge quelque chose ou non.  Nous n'avons pas abandonn√© iOS 7 pendant tr√®s longtemps. Il me semble qu'il y avait d√©j√† des gens qui ont abandonn√© iOS 8 et √©taient pr√™ts √† abandonner iOS 9. Nous supportions toujours iOS 7 parce que nous avions un navigateur qui, jusqu'√† la derni√®re, gardait tous les utilisateurs et nous avons travaill√© en √©troite collaboration avec lui et nous ne pouvions pas le laisser dans une telle situation. <br><br>  Encore une fois, vos utilisateurs ne diront pas: ¬´D√©sactivons cette fonctionnalit√© sur la version qui ne la prend pas en charge¬ª, non, ils vont simplement supprimer votre biblioth√®que et en trouver une qui prend en charge la s√©rie compl√®te de versions. <br><br><ul><li>  <strong>Ajoutez un incr√©ment minimal dans les nouvelles versions.</strong> </li></ul><br>  C'est tr√®s "pas tr√®s" pour les d√©veloppeurs de biblioth√®ques.  Je veux lib√©rer tout ce qui est pr√™t pour la sortie.  Vous avez cr√©√© des fonctionnalit√©s, corrig√© des bugs - maintenant, nous allons mettre tout le paquet et le d√©ployer dans la version.  La lib√©ration est √©galement un processus.  Ce n'est pas le cas pour vos utilisateurs.  Lorsqu'ils sont en train de tester leur produit et de le pr√©parer pour la sortie, ils ne veulent pas recevoir de vous un assemblage avec de nouvelles fonctionnalit√©s qui n√©cessitent des tests suppl√©mentaires. <br><br>  Nous avons vraiment eu des cas o√π nous avons annul√© certaines versions, les avons divis√©es en parties et les avons d√©j√† d√©ploy√©es en morceaux.  Ensuite, les √©quipes pour lesquelles nous avons impl√©ment√© des modifications pourraient prendre exactement la version dans laquelle il y a de petits changements, et pas toutes en m√™me temps. <br><br><blockquote>  Ce n'est vraiment pas tr√®s pratique pour le d√©veloppement, mais l'augmentation minimale des versions rendra vos utilisateurs un peu plus heureux. <br></blockquote><br><h3>  Il n'y a jamais trop de tests <br></h3><br>  Cela est vrai √† la fois pour une application standard et une biblioth√®que.  Mais dans le cas de la biblioth√®que, il y a des fonctionnalit√©s. <br><img src="https://habrastorage.org/webt/jk/1n/gb/jk1ngbzjsq3q-9vrkndir038u2w.jpeg"><br>  <strong>Les autotests</strong> , bien s√ªr, sont n√©cessaires, mais en plus d'eux, c'est g√©nial d'avoir une <strong>application de test</strong> pour votre biblioth√®que.  Cela vous aidera √† int√©grer ce que vous avez √©crit vous-m√™me et √† comprendre quels probl√®mes ou pi√®ges peuvent survenir.  Vous pouvez sentir par vous-m√™me ce que sont vos utilisateurs. <br><br>  Si votre biblioth√®que interagit d'une mani√®re ou d'une autre avec le r√©seau, y compris le chiffrement, il y a au moins quelque chose li√© aux donn√©es et √† la s√©curit√©, donnez-le aux <strong>agents</strong> de <strong>s√©curit√©</strong> pour <strong>v√©rification</strong> .  Vous ne voulez absolument pas √™tre la biblioth√®que dans laquelle ils trouvent la vuln√©rabilit√© - c'est un stigmate pour la vie.  Presque toutes les grandes entreprises ont un service complet qui s'occupe de v√©rifier la s√©curit√© des produits - donnez-leur-leur.  Si vous n'en avez pas, il y a <strong>un audit externe</strong> .  Si vous ne pouvez pas vous permettre l'externe, recherchez les tests sur le r√©seau, ex√©cutez-les, assurez-vous que votre biblioth√®que ne permet pas la fuite de donn√©es utilisateur. <br><br>  La derni√®re chose qui est tr√®s importante dans les tests est d√®s le d√©but d'essayer d'ajouter des <strong>mesures de tout ce qui est possible</strong> : temps, consommation d'√©nergie, tout ce qui est typique de votre biblioth√®que particuli√®re.  Vous devez toujours le faire √† la fin, alors pourquoi ne pas penser aux mesures d√®s le d√©but. <br><br>  Cela ne prot√®ge pas contre les changements et contre la n√©cessit√© d'acc√©l√©rer la biblioth√®que, mais cela aide √† comprendre ce qui n'a pas fonctionn√©.  Si vous avez des graphiques, cela vous aidera √† surveiller en temps r√©el les fonctionnalit√©s qui ont ajout√© des retards ou augment√© la consommation d'√©nergie. <br><br>  Il n'y a presque jamais de temps pour cela, car ce n'est pas la fonctionnalit√© de la biblioth√®que, ce n'est pas pour cela que vous la d√©veloppez.  Mais c'est ce qui vous aide √† le maintenir en bon √©tat et de bonne qualit√©. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ici,</a> vous pouvez lire comment nous, chez Yandex, mesurons la consommation d'√©nergie des appareils mobiles.  La mesure du temps √©tait une histoire amusante.  En tant que d√©veloppeurs de biblioth√®ques, il nous est difficile de mesurer le comportement dans des cas sp√©cifiques, car tous les scripts SpeechKit ne sont pas utilis√©s par toutes les √©quipes.  Pour l'heure, nous avons utilis√© notre application de test.  Des cas particuliers d'utilisation ont √©t√© √©crits, par exemple, un module de reconnaissance ou des composants pour la synth√®se vocale, chaque √©tape a √©t√© enregistr√©e et les journaux ont √©t√© enregistr√©s, et en cons√©quence, des graphiques sympas ont √©t√© cr√©√©s. <br><br>  Tout irait bien, mais nous travaillons avec l'audio, et pour tout v√©rifier, dans certains cas, la piste audio joue vraiment.  De plus, il est n√©cessaire de faire beaucoup de mesures, alors ils ont quitt√© le test pour la nuit: mettez les haut-parleurs, mettez une sorte d'appareil √† c√¥t√© et d√©marrez les fichiers audio.  Le matin, tout s'est √©teint, la nuit suivante, cela s'est r√©p√©t√©, puis √† nouveau.  Il ne s'agissait pas du tout de cr√©atures magiques qui se promenaient dans le bureau - juste les nettoyeurs avaient peur.  Il y avait vraiment un texte tr√®s √©trange qui √©tait lu par intervalles. <br><br>  En cons√©quence, il a √©t√© d√©cid√© de faire un banc d'essai local, que nous avons appel√© le Cabinet.  Il s'agit d'un meuble naturel, uniquement insonoris√©.  Il contient de nombreux appareils, une batterie de serveurs compl√®te avec des appareils, chacun pouvant √™tre lanc√© plusieurs fois pendant la journ√©e de travail, car cela ne nuira √† personne. <br><a name="deploy"></a><br><h2>  Lancement </h2><br>  Enfin, nous arrivons √† la derni√®re partie importante - c'est le lancement.  Le code est √©crit, une bonne API est con√ßue pour le rendre pratique pour les utilisateurs.  Comment maintenant publier tout cela dans la version. <br><br>  Je vais commencer par les versions locales pour les utilisateurs de Yandex.  Le sch√©ma ici est le m√™me que pour le d√©veloppement d'une application r√©guli√®re: versions r√©guli√®res, mensuelles ou hebdomadaires. <br><img src="https://habrastorage.org/webt/by/kz/vj/bykzvjvcxhseq5viva1mcy8gwno.jpeg"><br>  Le processus comprend les √©tapes habituelles, mais lors du d√©veloppement d'une biblioth√®que, chacun de ces points a ses propres caract√©ristiques. <br><br><h3>  Planification <br></h3><br>  Pour moi, c'est la partie la plus douloureuse, car la biblioth√®que a plusieurs √©quipes produits.  Dans une application r√©guli√®re, il y a un chef de produit qui d√©finit les t√¢ches que l'√©quipe priorise et commence √† effectuer une √† la fois. <br><br>  S'il existe plusieurs √©quipes produit, chacune d'entre elles re√ßoit des demandes qui doivent √™tre trait√©es en temps r√©el.  Je vais vous conseiller: s'il y a une personne qui sait faire face √† une multitude de t√¢ches √† venir √† un moment donn√©, essayez de la reprendre dans votre √©quipe.  Parce qu'il doit y avoir quelqu'un entre tous les responsables externes et le d√©veloppement - celui qui assumera la fonctionnalit√© de priorisation des t√¢ches. <br><br>       SpeechKit ,        , , .  ,    ,  -         .       ,       ‚Äî   .    ,      n .        ,      .          ,         ,    -   . <br><br><h3>  <br></h3><br> ,    ,     :   , ,      .     Agile-      . <br><br>  ,     ,  ,    ‚Äî .    ,       .     ! <br><br>     <strong>Scrum</strong> .   ,      ,  ,   .           .   ¬´ ¬ª,          . <br><br> Scrum  ,    ,  ,  ‚Äî      ‚Äî       , .     .      ‚Äî      ,        - . ,     ?  ,      : ¬´,         ,    ,         ¬ª.  ,       ,   - ,      ,  Scrum  .    ! ,       . <br><br>       .    ,     ,      .   ,      .     ,    , ,     ,       .      ,       .     . <br><br><h3>  Le soutien <br></h3><br>  ,      ‚Äî     ,      -   . ,  ,      ,      ,    .  ,       .      : ¬´     4,     3 ‚Äî    ¬ª.     ,     .    -    , ,    ,  <strong>    </strong> ,   . <br><br>     ‚Äî <strong>     </strong> .  Continuous Integration ,              ,   ,   <strong>  </strong> . <br><br><h3>   <br></h3><br>   ,       .    . <br><br> 1. <strong> .</strong> <br><br>    ‚Äî       <strong>  </strong> .     -      -  ,  , ,      .      . <br><br> <strong>   </strong>      .      ,   ‚Äî  , , , ,  .     ,    ,    -  . <br><br> 2. <strong> .</strong> <br><br>       ,  ,   ,   ‚Äî ,      ,  ,    ,    ,    ! <br><br>    .  , <strong>   </strong> .        ,  ,    -,     . <br><br>        ‚Äî <strong>   </strong> .       SpeechKit   .  ,  ,    ‚Äî ,   - .      ‚Äî   ,   -     . <br><br>  , <strong>    </strong> .     ,    4    2, ,        .         ,     -,      ,     . <br><br>  ‚Äî <strong>   </strong> .   ,  ,    ,     . <br><br><h2> . .  <br></h2><br>   ,     -,     .    <strong>  </strong> .      ,    , ,  help  ,    . <br><img src="https://habrastorage.org/webt/a8/ip/yi/a8ipyiozxkbcgk_-fr0fuk8a9hi.jpeg"><br>  <strong> </strong> .     :  -,     GitHub,    , .  ‚Äî ,   ‚Äî  .          ,       ,   . <br><br>    <strong> </strong> ,    ,   -       ,    ,   .. <br><br><h2>   <br></h2><br>  ,     ,    : <br><br><ul><li> <strong>.</strong>    ,        .   -   ,    ,    . <br></li><li> <strong></strong> .      ,      .      ,  OpenSource ,  ,    ,    ,      . </li><li> <strong>.</strong> ,       .        ,   ,     .    .     SpeechKit      . <br></li></ul><br><h1>  R√©sum√© <br></h1><br><ul><li>      ,     API. <br></li><li>  ,     ,       . <br></li><li>        . <br></li><li>   ,      -    :)    - ,     . <br></li></ul><br> Yandex.SpeachKit  GitHub  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">iOS</a> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Android</a> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> Mobile SDK. <br><br><blockquote> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AppsConf</a> ‚Äî       ‚Äî    <b>22  23  2019 </b> ,      ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>  . <br><br>          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>  . , ,     . <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr429912/">https://habr.com/ru/post/fr429912/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr429898/index.html">DMS (Dealership Management System) - Mise en place d'EcoSystems d'information pour la gestion des r√©seaux de concessionnaires</a></li>
<li><a href="../fr429902/index.html">Page Rank dans l'√®re du Web 2.0 - Partie 1</a></li>
<li><a href="../fr429904/index.html">Histoires dr√¥les et tristes sur le d√©veloppement de jeux informatiques</a></li>
<li><a href="../fr429908/index.html">Comment utiliser les coroutines dans les aliments et dormir paisiblement la nuit</a></li>
<li><a href="../fr429910/index.html">AppsConf Rises</a></li>
<li><a href="../fr429914/index.html">OpenSceneGraph: graphique de sc√®ne et pointeurs intelligents</a></li>
<li><a href="../fr429916/index.html">Comment construire et construire</a></li>
<li><a href="../fr429918/index.html">Monde virtuel Intel. Partie 2: SMP</a></li>
<li><a href="../fr429920/index.html">Tragicomedy in NaN Acts: comment nous avons cr√©√© un jeu sur JS et l'avons sorti sur Steam</a></li>
<li><a href="../fr429922/index.html">Comment transformer un projet simple en une construction √† long terme ou supprimer tout ce qui n'est pas n√©cessaire</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>