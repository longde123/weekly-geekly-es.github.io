<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåÇ üçë ü§πüèΩ ROS LKW Wagen. Teil 4. Erstellen einer Robotersimulation mit den Editoren rviz und pavillon üôéüèø üë∏üèΩ üôÖüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beitr√§ge in der Reihe: 
 8. Wir steuern von der Telefon-ROS-Steuerung, GPS-Knoten 
 7. Roboterlokalisierung: Gmapping, AMCL, Referenzpunkte auf der Ra...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ROS LKW Wagen. Teil 4. Erstellen einer Robotersimulation mit den Editoren rviz und pavillon</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467241/"> Beitr√§ge in der Reihe: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">8. Wir steuern von der Telefon-ROS-Steuerung, GPS-Knoten</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">7. Roboterlokalisierung: Gmapping, AMCL, Referenzpunkte auf der Raumkarte</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">6. Kilometerz√§hler mit Radgebern, Raumkarte, Lidar</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">5. Wir arbeiten in Rviz und Pavillon: Xacro, neue Sensoren.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">4. Erstellen Sie eine Robotersimulation mit den Editoren rviz und pavillon.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">3. Beschleunigen, Kamera wechseln, Gang fixieren</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2. Software</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">1. Eisen</a> <br><br>  Fortsetzung einer Reihe von Artikeln √ºber die Erstellung eines kleinen Roboters.  Dieses Mal werden wir √ºber das Erstellen einer Kopie des Roboters in der Simulation sprechen, die von den visuellen ROS-Umgebungen rviz und pavillon (im Folgenden als ‚ÄûEditoren‚Äú bezeichnet) angeboten wird.  Die Arbeit in Editoren wird auf einer virtuellen Maschine ausgef√ºhrt, deren Image zuvor zum Herunterladen des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Images</a> bereitgestellt wurde.  Da es sich um Simulation und Modellbildung handelt, wird der Roboterwagen selbst nicht ben√∂tigt. <br><br><img src="https://habrastorage.org/webt/18/wz/cj/18wzcjsvzmerc9hm5vka7bacteq.gif"><br><a name="habracut"></a><br>  Vorherige Beitr√§ge in der Reihe: <br><br>  1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  2. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> <br>  3. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> <br><br>  Erstellen grundlegender Urdf-Dateien <br><br>  Im Allgemeinen besteht der Prozess der vereinfachten Erstellung eines Roboters in der Regel aus den folgenden Schritten: <br><br>  1. Erstellen eines Robotermodells. <br>  2. Testen des Modells in einer Simulation. <br>  3. Erstellen eines echten Robotermodells. <br>  4. Testen eines realen Modells. <br><br>  Bei der Arbeit mit ROS-Editoren, die sowohl f√ºr Geb√§udemodelle als auch f√ºr ihre Tests in der virtuellen Welt hervorragende M√∂glichkeiten bieten, m√ºssen wir zugeben, dass sich reale Robotermodelle nicht immer wie ihre unk√∂rperlichen Br√ºder verhalten.  Und hier wird die Zeit f√ºr die Arbeit mit Modellen in der virtuellen Welt zu der Zeit hinzugef√ºgt, die f√ºr die Fertigstellung des realen Modells erforderlich ist. <br>  Ein solches Zeitgeschenk kann sich, wie eine ber√ºhmte Person sagte, nicht nur alles leisten. <br><br>  In diesem Zusammenhang wurde in fr√ºheren Beitr√§gen die Abfolge der Robotik gest√∂rt: Zun√§chst wurde ein reales Modell des Roboters erstellt.  Jetzt werden wir sozusagen √ºber die Virtualisierung sprechen. <br><br><h3>  Urdf erstellen </h3><br>  Um die Simulation in Gazebo vollst√§ndig genie√üen und den Roboter testen zu k√∂nnen, m√ºssen Sie zuerst eine URDF-Datei f√ºr den Roboter erstellen. <br><br>  Die URDF-Datei ist eine Art Skelettskelett im Bereich der Visualisierung. <br>  Einfach ausgedr√ºckt ist eine URDF-Datei eine Datei, die einen Roboter beschreibt. <br><br>  Wie bereits erw√§hnt, werden die Arbeiten mit dem VMWARE Workstation-Image ausgef√ºhrt, auf dem ROS (Ubuntu 16.04, ROS-Kinetic) und visuelle Editoren bereits installiert sind.  Daher sind alle Aktionen in diesem System reproduzierbar. <br><br>  Erstellen Sie ein ROS-Paket mit dem Namen rosbots_description. <br><br>  Dazu m√ºssen Sie den Ordner mit catkin_ws / src eingeben und den Befehl ausf√ºhren, um das Paket in ROS zu erstellen: <br><br><pre><code class="plaintext hljs">roscd; cd ..; cd src; catkin_create_pkg rosbots_description rospy</code> </pre> <br>  * Wenn bei der Ausf√ºhrung des Befehls roscd;  cd ..;  cd src;  Wenn Sie nicht in catkin_ws einsteigen, haben Sie m√∂glicherweise mehrere Umgebungen dieses Typs.  Um den erforderlichen zu aktivieren, gehen Sie zum Ordner catkin_ws und f√ºhren Sie den folgenden Befehl aus: source devel / setup.bash.  Um nicht verloren zu gehen, k√∂nnen Sie, wenn Sie mit einem Bild arbeiten, aus dem Stammverzeichnis in diesen Ordner gelangen: cd ~;  cd catkin_ws. <br><br>  Wenn alles gut gegangen ist, wird der Ordner rosbots_description erstellt. <br><br>  Warum ist es so schwierig und nicht einfacher, einen Ordner in catkin_ws / src manuell zu erstellen?  Und was ist das f√ºr ein Rospy? <br><br>  Sie k√∂nnen einen Ordner manuell erstellen, m√ºssen aber auch zwei weitere Dateien manuell schreiben, mit denen ROS zusammenarbeitet: CMakeLists.txt und package.xml. <br><br>  Sie befinden sich nach der Erstellung im Ordner: <br><br><img src="https://habrastorage.org/webt/ri/0_/nx/ri0_nxuublwiaj1eq57khrl5tmc.png"><br><br>  Ihre ROS erstellt von selbst.  Wir werden uns zwar nicht mit ihrem Inhalt befassen. <br>  rospy am Ende des Befehls bedeutet, Abh√§ngigkeiten zu erstellen und Python zu unterst√ºtzen. <br><br>  Weitermachen. <br><br>  Erstellen Sie im neu erstellten Paket rosbots_description den Ordner urdf und darin die Datei rosbots.xacro. <br><br><pre> <code class="plaintext hljs">roscd rosbots_description mkdir urdf; cd urdf; touch rosbots.xacro chmod +x rosbots.xacro</code> </pre><br>  Das Sch√∂ne am ROS-System ist, dass Sie in dem Ordner des Systems, in dem Sie sich nicht befinden w√ºrden, sofort zum Ziel gelangen k√∂nnen, indem Sie einfach seinen Namen mit dem Befehl roscd am Anfang der Zeile eingeben. <br><br>  F√ºgen Sie nun den folgenden Code in die neu erstellte Datei ein: <br><br><div class="spoiler">  <b class="spoiler_title">rosbots.xacro</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">&lt;?xml version="1.0" encoding="utf-8"?&gt; &lt;robot name="rosbots" xmlns:xacro="http://www.ros.org/wiki/xacro"&gt; &lt;link name="base_footprint"/&gt; &lt;joint name="base_joint" type="fixed"&gt; &lt;origin xyz="0 0 0.05" rpy="0 0 0" /&gt; &lt;parent link="base_footprint"/&gt; &lt;child link="base_link" /&gt; &lt;/joint&gt; &lt;link name="base_link"&gt; &lt;visual&gt; &lt;geometry&gt; &lt;mesh filename="package://rosbots_description/meshes/base.dae"/&gt; &lt;/geometry&gt; &lt;origin xyz="-0.52 -0.4 0.43" rpy="0 0 0"/&gt; &lt;/visual&gt; &lt;collision&gt; &lt;geometry&gt; &lt;mesh filename="package://rosbots_description/meshes/base.dae"/&gt; &lt;/geometry&gt; &lt;origin xyz="-0.52 -0.4 0.43" rpy="0 0 0"/&gt; &lt;/collision&gt; &lt;inertial&gt; &lt;origin xyz="0.0 0 0."/&gt; &lt;mass value="0.5"/&gt; &lt;inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.03" /&gt; &lt;/inertial&gt; &lt;/link&gt; &lt;joint name="second_level_joint" type="fixed"&gt; &lt;origin xyz="0 0 0.68" rpy="0 0 0" /&gt; &lt;parent link="base_link"/&gt; &lt;child link="base_second_link" /&gt; &lt;/joint&gt; &lt;link name="base_second_link"&gt; &lt;visual&gt; &lt;geometry&gt; &lt;mesh filename="package://rosbots_description/meshes/base.dae"/&gt; &lt;/geometry&gt; &lt;origin xyz="-0.52 -0.4 0.0" rpy="0 0 0"/&gt; &lt;/visual&gt; &lt;collision&gt; &lt;geometry&gt; &lt;mesh filename="package://rosbots_description/meshes/base.dae"/&gt; &lt;/geometry&gt; &lt;origin xyz="-0.52 -0.4 0.0" rpy="0 0 0"/&gt; &lt;/collision&gt; &lt;!--inertial&gt; &lt;origin xyz="0.01 0 0.7"/&gt; &lt;mass value="1.0"/&gt; &lt;inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.03" /&gt; &lt;/inertial--&gt; &lt;/link&gt; &lt;joint name="mcu_joint" type="fixed"&gt; &lt;origin xyz="0.02 0.12 0.73" rpy="0 0 0" /&gt; &lt;parent link="base_link"/&gt; &lt;child link="mcu_link" /&gt; &lt;/joint&gt; &lt;link name="mcu_link"&gt; &lt;visual&gt; &lt;geometry&gt; &lt;mesh filename="package://rosbots_description/meshes/rasp.dae" scale="0.14 0.14 0.14"/&gt; &lt;/geometry&gt; &lt;origin xyz="0.9 -1.25 0" rpy="0 0 1.57"/&gt; &lt;/visual&gt; &lt;collision&gt; &lt;geometry&gt; &lt;mesh filename="package://rosbots_description/meshes/rasp.dae" scale="0.14 0.14 0.14"/&gt; &lt;/geometry&gt; &lt;origin xyz="0.9 -1.25 0" rpy="0 0 1.57"/&gt; &lt;/collision&gt; &lt;!-- inertial&gt; &lt;origin xyz="0.01 0 0"/&gt; &lt;mass value="1.0"/&gt; &lt;inertia ixx="0.019995" ixy="0.0" ixz="0.0" iyy="0.019995" iyz="0.0" izz="0.03675" /&gt; &lt;/inertial--&gt; &lt;/link&gt; &lt;joint name="mcu_joint_1" type="fixed"&gt; &lt;origin xyz="0.02 0.12 0.83" rpy="0 0 0" /&gt; &lt;parent link="base_link"/&gt; &lt;child link="mcu_link_1" /&gt; &lt;/joint&gt; &lt;link name="mcu_link_1"&gt; &lt;visual&gt; &lt;geometry&gt; &lt;mesh filename="package://rosbots_description/meshes/rasp.dae" scale="0.14 0.14 0.14"/&gt; &lt;/geometry&gt; &lt;origin xyz="0.9 -1.25 0" rpy="0 0 1.57"/&gt; &lt;/visual&gt; &lt;collision&gt; &lt;geometry&gt; &lt;mesh filename="package://rosbots_description/meshes/rasp.dae" scale="0.14 0.14 0.14"/&gt; &lt;/geometry&gt; &lt;origin xyz="0.9 -1.25 0" rpy="0 0 1.57"/&gt; &lt;/collision&gt; &lt;!-- inertial&gt; &lt;origin xyz="0.01 0 0"/&gt; &lt;mass value="1.0"/&gt; &lt;inertia ixx="0.019995" ixy="0.0" ixz="0.0" iyy="0.019995" iyz="0.0" izz="0.03675" /&gt; &lt;/inertial--&gt; &lt;/link&gt; &lt;joint name="stand_mcu1_joint" type="fixed"&gt; &lt;origin xyz="0.02 0.25 0.78" rpy="0 0 1.57" /&gt; &lt;parent link="base_link"/&gt; &lt;child link="stand_mcu1_link" /&gt; &lt;/joint&gt; &lt;link name="stand_mcu1_link"&gt; &lt;visual&gt; &lt;geometry&gt; &lt;cylinder length="0.1" radius="0.01"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/visual&gt; &lt;collision&gt; &lt;geometry&gt; &lt;cylinder length="0.1" radius="0.01"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/collision&gt; &lt;/link&gt; &lt;joint name="stand_mcu2_joint" type="fixed"&gt; &lt;origin xyz="0.02 -0.1125 0.78" rpy="0 0 1.57" /&gt; &lt;parent link="base_link"/&gt; &lt;child link="stand_mcu2_link" /&gt; &lt;/joint&gt; &lt;link name="stand_mcu2_link"&gt; &lt;visual&gt; &lt;geometry&gt; &lt;cylinder length="0.1" radius="0.01"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/visual&gt; &lt;collision&gt; &lt;geometry&gt; &lt;cylinder length="0.1" radius="0.01"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/collision&gt; &lt;/link&gt; &lt;joint name="stand_mcu3_joint" type="fixed"&gt; &lt;origin xyz="0.25 0.25 0.78" rpy="0 0 1.57" /&gt; &lt;parent link="base_link"/&gt; &lt;child link="stand_mcu3_link" /&gt; &lt;/joint&gt; &lt;link name="stand_mcu3_link"&gt; &lt;visual&gt; &lt;geometry&gt; &lt;cylinder length="0.1" radius="0.01"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/visual&gt; &lt;collision&gt; &lt;geometry&gt; &lt;cylinder length="0.1" radius="0.01"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/collision&gt; &lt;/link&gt; &lt;joint name="stand_mcu4_joint" type="fixed"&gt; &lt;origin xyz="0.25 -0.1125 0.78" rpy="0 0 1.57" /&gt; &lt;parent link="base_link"/&gt; &lt;child link="stand_mcu4_link" /&gt; &lt;/joint&gt; &lt;link name="stand_mcu4_link"&gt; &lt;visual&gt; &lt;geometry&gt; &lt;cylinder length="0.1" radius="0.01"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/visual&gt; &lt;collision&gt; &lt;geometry&gt; &lt;cylinder length="0.1" radius="0.01"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/collision&gt; &lt;/link&gt; &lt;joint name="batery_joint" type="fixed"&gt; &lt;origin xyz="1.2 0.2 0.43" rpy="0 0 1.57" /&gt; &lt;parent link="base_link"/&gt; &lt;child link="batery_link" /&gt; &lt;/joint&gt; &lt;link name="batery_link"&gt; &lt;visual&gt; &lt;geometry&gt; &lt;mesh filename="package://rosbots_description/meshes/battery.dae" scale="13.0 6.0 6.0"/&gt; &lt;/geometry&gt; &lt;origin xyz="0 4.5 0.05" rpy="1.57 0 1.57"/&gt; &lt;/visual&gt; &lt;collision&gt; &lt;geometry&gt; &lt;mesh filename="package://rosbots_description/meshes/battery.dae" scale="13.0 6.0 6.0"/&gt; &lt;/geometry&gt; &lt;origin xyz="0 4.5 0.05" rpy="1.57 0 1.57"/&gt; &lt;/collision&gt; &lt;!-- inertial&gt; &lt;origin xyz="0.01 0 0"/&gt; &lt;mass value="1.0"/&gt; &lt;inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.03" /&gt; &lt;/inertial--&gt; &lt;/link&gt; &lt;joint name="stand_1_joint" type="fixed"&gt; &lt;origin xyz="0.5 0.4125 0.58" rpy="0 0 1.57" /&gt; &lt;parent link="base_link"/&gt; &lt;child link="stand_1_link" /&gt; &lt;/joint&gt; &lt;link name="stand_1_link"&gt; &lt;visual&gt; &lt;geometry&gt; &lt;cylinder length="0.20" radius="0.03"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/visual&gt; &lt;collision&gt; &lt;geometry&gt; &lt;cylinder length="0.20" radius="0.03"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/collision&gt; &lt;!--inertial&gt; &lt;origin xyz="0.0 0 0"/&gt; &lt;mass value="1.0"/&gt; &lt;inertia ixx="0.019995" ixy="0.0" ixz="0.0" iyy="0.019995" iyz="0.0" izz="0.03675" /&gt; &lt;/inertial--&gt; &lt;/link&gt; &lt;joint name="stand_2_joint" type="fixed"&gt; &lt;origin xyz="0.5 -0.2625 0.58" rpy="0 0 1.57" /&gt; &lt;parent link="base_link"/&gt; &lt;child link="stand_2_link" /&gt; &lt;/joint&gt; &lt;link name="stand_2_link"&gt; &lt;visual&gt; &lt;geometry&gt; &lt;cylinder length="0.20" radius="0.03"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/visual&gt; &lt;collision&gt; &lt;geometry&gt; &lt;cylinder length="0.20" radius="0.03"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/collision&gt; &lt;!--inertial&gt; &lt;origin xyz="0.0 0 0"/&gt; &lt;mass value="1.0"/&gt; &lt;inertia ixx="0.019995" ixy="0.0" ixz="0.0" iyy="0.019995" iyz="0.0" izz="0.03675" /&gt; &lt;/inertial--&gt; &lt;/link&gt; &lt;joint name="wheel_left_joint" type="continuous"&gt; &lt;parent link="base_link"/&gt; &lt;child link="wheel_left_link"/&gt; &lt;origin xyz="0.15 0.4125 0.30" rpy="-1.57 0 0"/&gt; &lt;axis xyz="0 0 1"/&gt; &lt;/joint&gt; &lt;link name="wheel_left_link"&gt; &lt;collision&gt; &lt;geometry&gt; &lt;cylinder length="0.20" radius="0.23"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0.0 0" xyz="0 0 0.1"/&gt; &lt;/collision&gt; &lt;visual name="visual"&gt; &lt;geometry&gt; &lt;!-- cylinder length="0.0206" radius="0.0550"/--&gt; &lt;!--cylinder length="0.20" radius="0.26"/--&gt; &lt;mesh filename="package://rosbots_description/meshes/wheel.dae" scale="8.0 8.0 8.0"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0"/&gt; &lt;/visual&gt; &lt;inertial&gt; &lt;mass value="0.4" /&gt; &lt;origin xyz="0 0 0" /&gt; &lt;inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001" /&gt; &lt;/inertial&gt; &lt;/link&gt; &lt;joint name="wheel_right_joint" type="continuous"&gt; &lt;parent link="base_link"/&gt; &lt;child link="wheel_right_link"/&gt; &lt;origin xyz="0.15 -0.5625 0.30" rpy="-1.57 0 0"/&gt; &lt;axis xyz="0 0 1"/&gt; &lt;/joint&gt; &lt;link name="wheel_right_link"&gt; &lt;collision&gt; &lt;geometry&gt; &lt;cylinder length="0.20" radius="0.23"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.195"/&gt; &lt;/collision&gt; &lt;visual name="visual"&gt; &lt;geometry&gt; &lt;!--cylinder length="0.20" radius="0.26"/--&gt; &lt;mesh filename="package://rosbots_description/meshes/wheel.dae" scale="8.0 8.0 8.0"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0"/&gt; &lt;/visual&gt; &lt;inertial&gt; &lt;mass value="0.4" /&gt; &lt;origin xyz="0 0.0 0.3" /&gt; &lt;inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001" /&gt; &lt;/inertial&gt; &lt;/link&gt; &lt;joint name="caster_back_joint" type="fixed"&gt; &lt;parent link="base_link"/&gt; &lt;child link="caster_back_link"/&gt; &lt;origin xyz="-0.4 0.1 0.26" rpy="0 0 0"/&gt; &lt;/joint&gt; &lt;link name="caster_back_link"&gt; &lt;collision&gt; &lt;geometry&gt; &lt;!-- cylinder length="0.05" radius="0.19"/--&gt; &lt;sphere radius="0.19"/&gt; &lt;/geometry&gt; &lt;origin rpy="0 0 0" xyz="0 0 0"/&gt; &lt;/collision&gt; &lt;visual&gt; &lt;geometry&gt; &lt;!--cylinder length="0.05" radius="0.19"/--&gt; &lt;sphere radius="0.19"/&gt; &lt;/geometry&gt; &lt;origin rpy="0 0 0" xyz="0 0 0"/&gt; &lt;/visual&gt; &lt;inertial&gt; &lt;mass value="0.1" /&gt; &lt;origin xyz="0 0 0" /&gt; &lt;inertia ixx="0.001023539" ixy="0.0" ixz="0.0" iyy="0.001023539" iyz="0.0" izz="0.001023539" /&gt; &lt;/inertial&gt; &lt;/link&gt; &lt;joint name="stand_3_joint" type="fixed"&gt; &lt;origin xyz="-0.4 0.4125 0.58" rpy="0 0 1.57" /&gt; &lt;parent link="base_link"/&gt; &lt;child link="stand_3_link" /&gt; &lt;/joint&gt; &lt;link name="stand_3_link"&gt; &lt;visual&gt; &lt;geometry&gt; &lt;cylinder length="0.20" radius="0.03"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/visual&gt; &lt;collision&gt; &lt;geometry&gt; &lt;cylinder length="0.20" radius="0.03"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/collision&gt; &lt;/link&gt; &lt;joint name="stand_4_joint" type="fixed"&gt; &lt;origin xyz="-0.4 -0.2625 0.58" rpy="0 0 1.57" /&gt; &lt;parent link="base_link"/&gt; &lt;child link="stand_4_link" /&gt; &lt;/joint&gt; &lt;link name="stand_4_link"&gt; &lt;visual&gt; &lt;geometry&gt; &lt;cylinder length="0.20" radius="0.03"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/visual&gt; &lt;collision&gt; &lt;geometry&gt; &lt;cylinder length="0.20" radius="0.03"/&gt; &lt;/geometry&gt; &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt; &lt;/collision&gt; &lt;/link&gt; &lt;/robot&gt;</code> </pre> <br></div></div><br>  Wenn der Code nicht angezeigt wird, k√∂nnen alle Dateien am Ende des Beitrags heruntergeladen werden. <br><br>  F√ºr den obigen Code ben√∂tigen wir auch Zellen (Mechs), die beim Start des Pakets geladen werden. <br><br>  Meches k√∂nnen hier genommen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">werden</a> <br>  und lege den entpackten meches-Ordner in rosbots_description. <br><br>  Wenn Sie sich den Code im Detail ansehen, k√∂nnen Sie feststellen, dass dies eine Standard-XML-Datei ist, die aus Bl√∂cken besteht: <br>  - visuell <br>  - Kollision <br>  - Tr√§gheit <br><br>  Jeder Block beschreibt seinen Teil: Visuell ist das Aussehen des Roboters, nicht mehr, Kollision und Tr√§gheit ist die Physik des Roboters, wie alles mit der Au√üenwelt interagiert - Kollisionen, Tr√§gheit. <br>  Gelenke - Elemente, die helfen, die Bewegung zwischen Teilen des Roboters zu bestimmen (Verbindungen).  Zum Beispiel wirkt sich die Bewegung des Rades (Rad) auf den gesamten Rahmen aus (Chasis). <br><br>  Ursprung xyz ist die anf√§ngliche Position des Objekts entlang der x-, y- und z-Achse. <br><br>  Eltern-Link und Kind-Link sind die Eltern- bzw. Kind-Links, die aus dem Wachsen entstehen. <br>  Das Vorhandensein von Typen ist ebenfalls bemerkenswert: Typ = "kontinuierlich", Typ = "fest".  Dies ist eine Definition dessen, was sich drehen kann und was nicht.  Die R√§der sind also durchgehend.  Und zum Beispiel ist batery_joint behoben. <br>  Einr√ºckungen im Code sind genauso aussagekr√§ftig wie in Python, wo Sie Tabulatoren und Leerzeichen nicht st√∂ren k√∂nnen, nicht tragen.  Aber f√ºr das Paradies und die Sichtbarkeit eines Perfektionisten ist es besser, sie zu haben. <br><br>  Der obige Code ist im Wesentlichen ein Robotermodell. <br><br><h3>  Arbeit bei rviz </h3><br>  Mal sehen, was passiert ist. <br><br>  Erstellen Sie dazu eine Startdatei, in der das ROS-Paket ausgef√ºhrt wird. <br><br>  Hierzu werden in ROS die sogenannten Launch-Dateien verwendet.  Die Startdatei besteht im Wesentlichen darin, den Start eines Knotens, Befehls oder mehrerer Knoten mit einem kurzen Befehl zu erm√∂glichen, ohne dass alle und andere Argumente angegeben werden m√ºssen. <br><br>  Erstellen Sie einen Startordner in der rosbots_description mit der Datei rviz.launch: <br><br><pre> <code class="plaintext hljs">roscd rosbots_description mkdir launch; cd launch; touch rviz.launch</code> </pre><br>  * In diesem und den folgenden F√§llen muss kein ROS-Paket mehr wie zuvor erstellt werden.  Jetzt "sieht" das System selbst die Dateien im Paket.  Deshalb erstellen wir einfach ein Verzeichnis. <br><br>  F√ºllen Sie die Datei mit Inhalten - <div class="spoiler">  <b class="spoiler_title">rviz.launch</b> <div class="spoiler_text"><pre> <code class="xml hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">launch</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"robot_description"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"cat '$(find rosbots_description)/urdf/rosbots.xacro'"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- send fake joint values --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">node</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"joint_state_publisher"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pkg</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"joint_state_publisher"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"joint_state_publisher"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"use_gui"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"False"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">node</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Combine joint values --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">node</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"robot_state_publisher"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pkg</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"robot_state_publisher"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"state_publisher"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Show in Rviz --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">node</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rviz"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pkg</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rviz"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rviz"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">launch</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br>  Hier k√∂nnen Sie sehen, dass das System beim Start in rosbots.xacro nach einer Beschreibung des Modells sucht. <br><br>  Als N√§chstes werden 3 Knoten gestartet: Joint_State_Publisher aus dem Joint_State_Publisher-Paket, Robot_State_Publisher aus Robot_State_Publisher, Rviz aus Rviz.  Typ ist der Knotentyp, entspricht normalerweise der gleichnamigen Python- oder C-Datei, wird jedoch ohne Erweiterung angegeben. <br><br>  Ausf√ºhren: <br><br>  F√ºhren Sie im 1. Terminal den ROS-Master aus: <br><br><pre> <code class="plaintext hljs">roscore</code> </pre> <br>  Im 2 .: <br><br><pre> <code class="plaintext hljs">roslaunch rosbots_description rviz.launch</code> </pre> <br>  * Wenn ein Fehler aufgetreten ist <blockquote>  ROS_MASTER_URI [http: //192.168.1 ....: 11311] Host ist f√ºr diesen Computer nicht festgelegt </blockquote>  , dann m√ºssen Sie bashrc √ºberpr√ºfen - auf welcher IP-ROS l√§uft: <br><br><pre> <code class="plaintext hljs">nano ~/.bashrc</code> </pre> <br>  Geben Sie die IP-Adresse der virtuellen Maschine in der bashrc-Datei selbst an (z. B. diese): <br><br><pre> <code class="plaintext hljs">export ROS_MASTER_URI=http://192.168.1.114:11311</code> </pre> <br>  Lesen Sie bashrc weiter: <br><br>  <code>source ~/.bashrc</code> oder Neustart. <br>  ** **. <br>  Wenn der Roslaunch immer noch nicht gestartet wird, k√∂nnen Sie versuchen, in den Ordner catkin_ws zu wechseln und Folgendes auszuf√ºhren: source devel / setup.bash <br><br><h3>  Eintauchen in Rviz </h3><br>  Nachdem der Befehl ausgef√ºhrt wurde, wird der Rviz-Editor gestartet und die grafische Shell ge√∂ffnet. <br>  Die visuelle Darstellung kann variieren, aber im Allgemeinen ist die Ansicht ungef√§hr wie folgt: <br><br><img src="https://habrastorage.org/webt/nf/gm/fz/nfgmfzhzqb2prpwfuuqrzzoylwu.png"><br><br>  Links in der Spalte Anzeigen k√∂nnen Sie die Anzeigeoptionen f√ºr verschiedene Elemente beobachten, die mit ROS-Knoten interagieren. In der Mitte - das Bild des Roboters, rechts - eine Spalte mit einer Kameraansicht des Roboters.  Ich muss gleich sagen, dass es besser ist, mit einer 3-Rad-Maus mit rviz zu arbeiten, da hier alle Maustasten beteiligt sind.  Wenn Sie die linke Maustaste gedr√ºckt halten, k√∂nnen Sie den Raum im Fenster drehen, w√§hrend der Roboter angezeigt wird. Halten Sie die rechte Maustaste gedr√ºckt - vergr√∂√üern / verkleinern, beide Tasten gedr√ºckt halten - und verschieben Sie den Raum relativ zum Roboter. <br><br>  Die meisten Arbeiten im Editor werden in den ersten beiden Spalten ausgef√ºhrt: Anzeigen und die visuelle Darstellung des Roboters. <br><br><h3>  Lassen Sie uns mit dem Aussehen eines Roboters arbeiten </h3><br>  W√§hlen wir in der Zeile "Fixed Frame" - "Base Link" aus: <br><br><img src="https://habrastorage.org/webt/sn/in/22/snin22raurfwpybmaainztvnrby.png"><br><br>  Und f√ºgen Sie die Roboterbeschreibung zu den Anzeigen hinzu: <br><br>  Klicken Sie auf "Hinzuf√ºgen" und w√§hlen Sie "RobotModel" in der Liste aus: <br><br><img src="https://habrastorage.org/webt/_s/sg/dv/_ssgdvg5wxuwnduiymjx7r2t1kk.png">  "" <br><br>  Jetzt k√∂nnen Sie im Simulationsfenster den Roboter beobachten, der aus dem Modell rviz.xacro reproduziert wurde: <br><br><img src="https://habrastorage.org/webt/k6/rt/j8/k6rtj8hn6g6lbznbxiqdhhnv__m.png">  "" <br><br>  Gro√üartig.  Mit einer visuellen Darstellung ist alles klar.  Jetzt m√ºssen Sie verstehen, wie die Simulation ausgef√ºhrt wird, da rviz nur eine <u>Visualisierung der</u> Simulation ist, nicht jedoch die Simulation selbst. <br>  Das hei√üt, die Physik funktioniert hier nicht. <br><br>  Die Simulation selbst befindet sich in einem Editor namens Gazebo. <br><br><h3>  Pavillon </h3><br>  Um das erstellte Modell in Gazebo zu platzieren, erstellen Sie eine weitere Startdatei - spawn.launch im Startordner des Projekts.  Jetzt haben wir 2 Startdateien! <br><br><div class="spoiler">  <b class="spoiler_title">spawn.launch</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">launch</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"robot_description"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"cat '$(find rosbots_description)/urdf/rosbots.xacro'"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"x"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">default</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"y"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">default</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"z"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">default</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.5"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">node</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mybot_spawn"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pkg</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"gazebo_ros"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"spawn_model"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">output</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screen"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">args</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-urdf -param robot_description -model rosbots -x $(arg x) -y $(arg y) -z $(arg z)"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">launch</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br>  Hier lesen wir auch das Modell und √ºbergeben dann mit Argumenten seine Position im Raum entlang der x-, y- und z-Achse.  F√ºhren Sie als N√§chstes nur einen Knoten aus - mybot_spawn aus dem Paket pavbo_ros. <br>  * Die oben genannten Pakete m√ºssen nicht neu installiert werden.  Falls gew√ºnscht, k√∂nnen Sie diese Pakete mit demselben Befehl anzeigen: roscd.  Zum Beispiel roscd pavillon_ros. <br><br>  Stoppen Sie nun den Ros-Master in Terminal 1: <br><br><pre> <code class="plaintext hljs">CTRL+C</code> </pre> <br>  F√ºhren Sie den Gazebo-Editor aus: <br><br><pre> <code class="plaintext hljs">roslaunch gazebo_ros empty_world.launch</code> </pre> <br>  F√ºhren Sie in Terminal 2 die neu erstellte Datei aus: <br><br><pre> <code class="plaintext hljs">roslaunch rosbots_description spawn.launch</code> </pre> <br>  Jetzt sehen wir unseren Roboter in der Simulation des Gazebo-Editors: <br><br><img src="https://habrastorage.org/webt/jt/fs/3f/jtfs3f9wsxuo9hgi-k1ziqpfbv0.png"><br><br>  * Wenn Sie einen Fehler haben: <code>Waiting for service /gazebo/spawn_urdf_model</code> <br>  Dies bedeutet, dass Sie das Modell gestartet haben, ohne Gazebo zuerst zu starten, was gegen die Startreihenfolge verst√∂√üt. <br><br><h3>  Gehen wir zur Pavillonsimulation. </h3><br>  F√ºgen Sie nun vor dem schlie√üenden Tag den folgenden Code zu rosbots.xacro hinzu: <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">gazebo</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"differential_drive_controller"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">filename</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"libgazebo_ros_diff_drive.so"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">legacyMode</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">legacyMode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">alwaysOn</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">alwaysOn</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">publishWheelTF</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">publishWheelTF</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">publishTf</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">publishTf</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">publishWheelJointState</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">publishWheelJointState</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">updateRate</span></span></span><span class="hljs-tag">&gt;</span></span>100.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">updateRate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">leftJoint</span></span></span><span class="hljs-tag">&gt;</span></span>wheel_left_joint<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">leftJoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rightJoint</span></span></span><span class="hljs-tag">&gt;</span></span>wheel_right_joint<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rightJoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wheelSeparation</span></span></span><span class="hljs-tag">&gt;</span></span>1.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wheelSeparation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wheelDiameter</span></span></span><span class="hljs-tag">&gt;</span></span>0.52<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wheelDiameter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wheelAcceleration</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wheelAcceleration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">torque</span></span></span><span class="hljs-tag">&gt;</span></span>20<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">torque</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">commandTopic</span></span></span><span class="hljs-tag">&gt;</span></span>/part2_cmr/cmd_vel<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">commandTopic</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">odometryTopic</span></span></span><span class="hljs-tag">&gt;</span></span>odom<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">odometryTopic</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">odometryFrame</span></span></span><span class="hljs-tag">&gt;</span></span>odom<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">odometryFrame</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">robotBaseFrame</span></span></span><span class="hljs-tag">&gt;</span></span>base_link<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">robotBaseFrame</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">gazebo</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br>  Simulator Gazebo kann beim Bearbeiten nicht geschlossen werden. <br><br>  L√∂schen Sie nun das Modell aus dem Gazebo-Editor: <br><br><pre> <code class="plaintext hljs">rosservice call /gazebo/delete_model "model_name: 'rosbots'"</code> </pre> <br>  Oder starten Sie einfach den Editor neu. <br><br>  * Gazebo ist in einer virtuellen Maschine launisch, so dass selbst nach dem Schlie√üen manchmal STRG + C zus√§tzlich im Terminal vergeben wird. <br><br>  Ersetzen Sie das Modell nach der Bearbeitung in Gazebo: <br><br><pre> <code class="plaintext hljs">roslaunch rosbots_description spawn.launch</code> </pre> <br>  Wenn Sie sich jetzt die Liste der ROS-Themen ansehen, k√∂nnen Sie sehen, dass es unter ihnen gibt <br><br><pre> <code class="plaintext hljs">/part2_cmr/cmd_vel</code> </pre> <br><img src="https://habrastorage.org/webt/xv/lg/8n/xvlg8ngckkr7snj_lkmzeeyyxyk.png"><br><br>  Versuchen wir nun, den Roboter in der Simulation zu steuern, indem wir die Steuerung in einem separaten Terminal ausf√ºhren: <br><br><pre> <code class="plaintext hljs">rosrun teleop_twist_keyboard teleop_twist_keyboard.py /cmd_vel:=/part2_cmr/cmd_vel</code> </pre> <br>  Wenn Sie sich bei laufender Steuerung im Fenster befinden und die Tasten ‚Äûi‚Äú, ‚Äûl‚Äú, ‚Äûj‚Äú, ‚Äûk‚Äú, ‚Äû,‚Äú im Terminalfenster dr√ºcken, k√∂nnen Sie die Bewegung des Roboters in der Simulation des Gazebo-Editors beobachten: <br><br><img src="https://habrastorage.org/webt/18/wz/cj/18wzcjsvzmerc9hm5vka7bacteq.gif"><br><br>  Code - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">herunterladen</a> . <br><br>  Fortsetzung folgt. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de467241/">https://habr.com/ru/post/de467241/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de467223/index.html">Willkommen beim JavaScript Meetup SuperJob am 10. Oktober</a></li>
<li><a href="../de467227/index.html">So √∂ffnen Sie ein npm-Paket mit einer normalen Bereitstellung, CI und Demo (ohne Verlust der Lebensfreude)</a></li>
<li><a href="../de467231/index.html">Einf√ºhrung Melden Sie sich mit Apple in Ihrer iOS-App an</a></li>
<li><a href="../de467237/index.html">Erh√∂hen Sie Ihren DNS-over-HTTPS-Server</a></li>
<li><a href="../de467239/index.html">Der Unterschied zwischen Data Scientist und einem Teenager in einem Sportwagen</a></li>
<li><a href="../de467245/index.html">Dmitry Matskevich, Dbrain: √ºber Unternehmertum als geistige Behinderung, KI und emotionale Sicherheit</a></li>
<li><a href="../de467247/index.html">Eine Geschichte √ºber V8, React und einen Leistungsabfall. Teil 1</a></li>
<li><a href="../de467249/index.html">Eine Geschichte √ºber V8, React und einen Leistungsabfall. Teil 2</a></li>
<li><a href="../de467251/index.html">Geiseln COBOL und Math. Teil 1</a></li>
<li><a href="../de467253/index.html">Geiseln COBOL und Math. Teil 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>