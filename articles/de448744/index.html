<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ â™ï¸ ğŸ Wie Ã¼bertrage ich eine Variable vom Fragment zur AktivitÃ¤t in Android? ğŸ‘¨ğŸ¾â€ğŸ”§ ğŸ§‘ğŸ¿â€ğŸ¤â€ğŸ§‘ğŸ¼ ğŸ˜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eine Geschichte darÃ¼ber, wie in Android Informationen von einem Fragment (Fragment) zu einer AktivitÃ¤t (AktivitÃ¤t) Ã¼bertragen werden. Die Informatione...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie Ã¼bertrage ich eine Variable vom Fragment zur AktivitÃ¤t in Android?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448744/">  Eine Geschichte darÃ¼ber, wie in Android Informationen von einem Fragment (Fragment) zu einer AktivitÃ¤t (AktivitÃ¤t) Ã¼bertragen werden.  Die Informationen sind nÃ¼tzlich fÃ¼r AnfÃ¤nger (Junioren), die das Programmieren fÃ¼r Android beherrschen, und es ist unwahrscheinlich, dass sie fÃ¼r Mittelstufe und Senioren interessant sind. <br><br>  Starten Sie die IDE (integrierte Entwicklungsumgebung) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Android Studio</a> .  Erstellen Sie ein neues Projekt: Datei -&gt; Neu -&gt; Neues Projekt.  WÃ¤hlen Sie "Leere AktivitÃ¤t" und klicken Sie auf "Weiter". <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/cg/ke/e2/cgkee2qhgl99tnppykdclbuqm-m.gif"><br><br>  FÃ¼llen Sie die Felder "Name", "Paketname", "Speicherort speichern" aus. <br><br><img src="https://habrastorage.org/webt/lm/fs/bk/lmfsbkgnztagfar9zebozvr0388.gif"><br><br>  Die IDE erstellt automatisch zwei Dateien: "MainActivity.java" im Verzeichnis "java / [Paketname]", "activity_main.xml" im Verzeichnis "res / layout". <br><br><img src="https://habrastorage.org/webt/b3/ku/tg/b3kutgfol159_bc6u5wikjyfvg8.jpeg"><br><br><img src="https://habrastorage.org/webt/nq/a5/iq/nqa5iqsksg74xzkkiyo2yhbchzo.jpeg"><br><br>  Die Java-Datei bestimmt, was die Anwendung <i><b>tut</b></i> , xml - wie sie <i><b>aussieht</b></i> .  Es macht bisher sehr wenig, nur "setContentView (R.layout.activity_main);".  Diese Zeile weist die Anwendung an, beim Start das Layout activity_main.xml zu verwenden.  Und da das Layout nur ein Widget vom Typ "TextView" mit dem Text "Hello World!" EnthÃ¤lt, sieht unsere Anwendung auch sehr bescheiden aus. <br><br><img src="https://habrastorage.org/webt/ne/vk/dp/nevkdph0t9qydcj1jnn8kqsxdzu.gif"><br><br>  Erstellen Sie im Projektordner ein Fragment mit dem Namen "Fragment1". <br><br><img src="https://habrastorage.org/webt/4f/jj/ws/4fjjwsspunm4e3up2bzd-sycpwc.jpeg"><br><br><img src="https://habrastorage.org/webt/bd/xt/to/bdxttophoj-6r7_vu5faxiyrnxo.gif"><br><br>  Die IDE erstellt zwei Dateien: "Fragment1" und "fragment_fragment1.xml". <br><br><img src="https://habrastorage.org/webt/gk/z9/vl/gkz9vluu61zdz7kja9od3dtsomk.jpeg"><br><br><img src="https://habrastorage.org/webt/bc/cy/8l/bccy8ljhhmlponiixf522a5z7lm.jpeg"><br><br>  Ã–ffnen Sie die Fragment-Layout-Datei und lÃ¶schen Sie das nicht benÃ¶tigte Widget "TextView" mit einer BegrÃ¼ÃŸungszeile. <br><br><img src="https://habrastorage.org/webt/y0/-k/kk/y0-kkkfjxdhvccgc2yflvcnl8pi.jpeg"><br><br>  Wechseln Sie in den Entwurfsmodus und ziehen Sie die SchaltflÃ¤che (SchaltflÃ¤che) auf das Layout. <br><br><img src="https://habrastorage.org/webt/gs/8g/yn/gs8gynbw8fylpdugjpqwzzktb4c.jpeg"><br><br>  Die IDE erstellt eine SchaltflÃ¤che mit der Kennung "button1". <br><br><img src="https://habrastorage.org/webt/a_/ng/fb/a_ngfbvqvgv52zful83hsuxpwmo.jpeg"><br><br>  Bearbeiten Sie nun das Layout der HauptaktivitÃ¤t, d. H.  Datei "activity_main.xml" <br><br><img src="https://habrastorage.org/webt/wa/-z/vr/wa-zvrhls1y0cy22xaa4oqcsyls.jpeg"><br><br>  Bewegen Sie das Text-Widget nach oben und fÃ¼gen Sie das von uns erstellte Fragment zum Layout hinzu (ziehen Sie dazu das Element "&lt;&gt;" auf das Layout, wÃ¤hlen Sie "Fragment1" und klicken Sie auf "OK"). <br><br><img src="https://habrastorage.org/webt/pm/fj/wg/pmfjwgcfvfvfbnimdhl78bjh08u.jpeg"><br><br>  Setzen Sie im AktivitÃ¤tslayout in den Fragmenteinstellungen layout_height = "wrap_content" und bearbeiten Sie die Platzierung nach Ihrem Geschmack.  Ã„ndern Sie auÃŸerdem die Kennung des Textfelds in "textReport" und das Fragment in "fragmentWithButton". <br><br><img src="https://habrastorage.org/webt/dk/au/mg/dkaumgt8t_rpixwewkiyd_ozcdc.jpeg"><br><br>  FÃ¼hren Sie den Emulator aus (Umschalt + F10) und sehen Sie, was passiert ist. <br><br><img src="https://habrastorage.org/webt/c2/yc/ax/c2ycaxbgia70bz0xe0tzs1veai4.gif"><br><br>  Die Anwendung zeigt die Aufschrift "Hallo Welt!"  und die Taste.  Die Inschrift wird aus der <i><b>AktivitÃ¤t</b></i> abgeleitet, die SchaltflÃ¤che gehÃ¶rt zu einem <i><b>Fragment</b></i> .  Die Taste wird gedrÃ¼ckt, hat aber bisher keine Wirkung.  Versuchen wir, die Beschriftung so zu programmieren, dass die Anzahl der TastendrÃ¼cke angezeigt wird.  Dazu mÃ¼ssen wir <i><b>eine Nachricht Ã¼ber den Klick auf die SchaltflÃ¤che vom Fragment zur AktivitÃ¤t senden</b></i> . <br><br>  Zuerst bringen wir dem Fragment bei, die Anzahl der Tastenklicks zu zÃ¤hlen.  Ã–ffnen Sie die Datei "Fragment1.java". <br><br><img src="https://habrastorage.org/webt/6f/ti/eo/6ftieohuhycuf_tpcwnu6s1bm0y.jpeg"><br><br>  FÃ¼gen Sie die Variable "counter" hinzu.  Erstellen Sie in der Methode "onCreateView", die unmittelbar nach dem Erstellen des Fragments aufgerufen wird, die SchaltflÃ¤che "Listener".  Die IDE erfordert die Implementierung von View.OnClickListener - zustimmen (Alt + Eingabetaste).  Lassen Sie uns die onClick-Methode erstellen (neu definieren), die den Wert der Variablen "counter" mit jedem Klick auf die SchaltflÃ¤che erhÃ¶ht und eine Popup-Meldung anzeigt. <br><br><img src="https://habrastorage.org/webt/is/lw/bg/islwbg0ijjtbojfcvsis1i2gacq.jpeg"><br><br>  Lassen Sie uns im Emulator (wieder Umschalt + F10) Ã¼berprÃ¼fen, wie es funktioniert.  Durch DrÃ¼cken der Taste wird die Popup-Meldung "Anzahl der Tastenklicks: ..." am unteren Rand des Anwendungsbildschirms angezeigt. <br><br><img src="https://habrastorage.org/webt/vo/j5/ul/voj5uljhsxmwgzg_m1ycafmg5p0.gif"><br><br>  GroÃŸartig, mach weiter.  Unser Hauptziel ist es, Informationen (in diesem Fall die Anzahl der SchaltflÃ¤chenklicks) von der Fragmentinstanz zur AktivitÃ¤tsinstanz zu Ã¼bertragen.  Leider sind die Lebenszyklen von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AktivitÃ¤ten</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fragmenten so</a> organisiert, dass Android (fast) keine direkte Kommunikation zwischen AktivitÃ¤t und Fragment zulÃ¤sst. Daher benÃ¶tigen wir eine Zwischenschnittstelle.  Nennen wir ihn "Postbote".  Die Schnittstelle kann entweder in einer separaten Datei oder in einer Datei mit einem Fragmentcode erstellt werden.  Wir werden die erste Option wÃ¤hlen.  Unsere Postman-OberflÃ¤che enthÃ¤lt eine einzelne abstrakte (ohne "body") Methode von "fragmentMail". <br><br><img src="https://habrastorage.org/webt/m4/7y/ze/m47yzelbzced44wwarahc5incwe.jpeg"><br><br>  Wir werden die Variable "numberOfClicks" als "Umschlag" verwenden, um Nachrichten vom Fragment zur AktivitÃ¤t zu Ã¼bertragen. <br><br>  Ã–ffnen Sie die Datei mit dem AktivitÃ¤tscode "MainActivity.java".  Soweit wir uns erinnern, sieht es so aus: <br><br><img src="https://habrastorage.org/webt/tl/h3/s9/tlh3s9pb3alrn_busz9f2pmq9t0.jpeg"><br><br>  Wir implementieren die Postman-Schnittstelle und fÃ¼gen der AktivitÃ¤t die fragmentMail-Schnittstellenmethode hinzu, wobei wir sie neu definieren ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Override</a> ). <br><br><img src="https://habrastorage.org/webt/fw/1u/vq/fw1uvq544wgtximbhjtslbszmrs.jpeg"><br><br>  Sobald die AktivitÃ¤t einen neuen Wert in der Variablen "numberOfClicks" "sieht", wird eine aktualisierte Nachricht im Textfeld textReport angezeigt. <br><br>  Aber wir mÃ¼ssen immer noch "den Brief in den Umschlag legen", d. H.  Ãœbergeben Sie der Variablen die Anzahl der Klicks auf die SchaltflÃ¤che.  Und das machen wir im Fragmentcode.  Ã–ffnen Sie die Datei "Fragment1.java". <br><br>  DÌ¶oÌ¶bÌ¶aÌ¶vÌ¶lÌ¶yaÌ¶eÌ¶mÌ¶ V Podpis klassa Ì¶iÌ¶mÌ¶pÌ¶lÌ¶eÌ¶mÌ¶eÌ¶nÌ¶tÌ¶aÌ¶tsÌ¶iÌ¶yuÌ¶ Ì¶iÌ¶nÌ¶tÌ¶eÌ¶rÌ¶fÌ¶eÌ¶yÌ¶sÌ¶aÌ¶ Ì¶ Â«PostmanÂ». Ide Ì¶pÌ¶oÌ¶tÌ¶rÌ¶eÌ¶bÌ¶uÌ¶eÌ¶tÌ¶ Ì¶pÌ¶eÌ¶rÌ¶eÌ¶oÌ¶pÌ¶rÌ¶eÌ¶dÌ¶eÌ¶lÌ¶iÌ¶tÌ¶Ì¶ metod Ì¶iÌ¶nÌ¶tÌ¶eÌ¶rÌ¶fÌ¶eÌ¶yÌ¶sÌ¶aÌ¶ Ì¶ Â«Ì¶fÌ¶rÌ¶aÌ¶gÌ¶mÌ¶eÌ¶nÌ¶tÌ¶MÌ¶aÌ¶iÌ¶lÌ¶Â» Ì¶, Ì¶ nÃ¶ delat v soll meine nichego nE budem, Ì¶ Poetomu Ì¶oÌ¶sÌ¶tÌ¶aÌ¶vÌ¶iÌ¶mÌ¶ EGO Telo Ì¶pÌ¶uÌ¶sÌ¶tÌ¶yÌ¶mÌ¶.  <i>[GelÃ¶scht, siehe â€Anmerkung 1 vom 20.04.2019â€œ]</i> <br><br>  Wir benÃ¶tigen einen Link zu einer Instanz von AktivitÃ¤t.  Wir werden es bekommen, wenn ein Fragment an eine AktivitÃ¤t wie diese angehÃ¤ngt ist: <br><img src="https://habrastorage.org/webt/yl/jh/fr/yljhfr9cyl1pzhptlzzi6h0ejhy.jpeg"><br><br>  Bei der Methode â€onClickâ€œ (dieselbe, die aufgerufen wird, wenn auf die SchaltflÃ¤che unseres Fragments geklickt wird) fÃ¼gen wir der Schnittstelle einen Aufruf von einer AktivitÃ¤tsinstanz hinzu. <br><br><img src="https://habrastorage.org/webt/je/o2/k8/jeo2k8ssprrdoyrzi9ab3v3e4kc.jpeg"><br><br>  Der endgÃ¼ltige Code des Fragments nach dem LÃ¶schen von Kommentaren (aus GrÃ¼nden der Kompaktheit) sieht folgendermaÃŸen aus: <br><img src="https://habrastorage.org/webt/wb/7r/3d/wb7r3digdzwfbscmtcpwy7qzqj4.jpeg"><br><br>  Jetzt zÃ¤hlt unser <i>Fragment die Anzahl der SchaltflÃ¤chenklicks</i> , zeigt sie in einer Popup-Nachricht an und <i>Ã¼bertrÃ¤gt</i> dann Ã¼ber die Postman-Schnittstelle <i>den Wert der ZÃ¤hlervariablen an die Variable numberOfClicks</i> , die als Umschlagcontainer zum Senden von Nachrichten vom Fragment an die AktivitÃ¤t dient.  AktivitÃ¤t, die eine neue Nachricht empfÃ¤ngt, zeigt sie sofort in ihrem Widget-Textfeld mit der Kennung "textReport" an.  Das Ziel ist erreicht! <br><img src="https://habrastorage.org/webt/ur/vh/mc/urvhmcy7fbx4rmt7sgkdnb_t2v0.gif"><br><br>  PS: Durch Ã„ndern der Programmiersprache von Java auf Kotlin kann das Codefragment erheblich reduziert werden: <br><br><img src="https://habrastorage.org/webt/3g/zu/dr/3gzudr28v2o8c3xvmbewzpzqusg.jpeg"><br><br>  PPS: Laden Sie hier Projektdateien herunter: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Java</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kotlin</a> . <br><br><h4>  Anmerkung 1 vom 20.04.2019: </h4><br>  Die Implementierung der Postman-Schnittstelle wurde aus dem Fragmentcode entfernt. <br>  Ein Fragment arbeitet mit einer Schnittstelle durch AktivitÃ¤t, in der diese Schnittstelle bereits implementiert ist. <br>  Vielen Dank an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Mikaakim</a> fÃ¼r den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kommentar</a> . <br>  Aktualisierte Dateien kÃ¶nnen von github unter den obigen Links heruntergeladen werden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de448744/">https://habr.com/ru/post/de448744/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de448732/index.html">Zwischenwirbelhernie? Arbeite an ihr</a></li>
<li><a href="../de448734/index.html">Drohnen und Roboter helfen, die Kathedrale Notre Dame in Paris zu retten</a></li>
<li><a href="../de448738/index.html">Wer jagt Startups?</a></li>
<li><a href="../de448740/index.html">Wir hÃ¶ren SID-Musik (Commodore 64) Ã¼ber OPL3 auf modernen PCs</a></li>
<li><a href="../de448742/index.html">BÃ¼chse der Pandora: Wir analysieren die Ausnutzung der WinRAR-SicherheitsanfÃ¤lligkeit am Beispiel des Jobs NeoQUEST-2019</a></li>
<li><a href="../de448746/index.html">Indizes in PostgreSQL - 7 (GIN)</a></li>
<li><a href="../de448748/index.html">Ãœberlegungen zu SchÃ¶nheit und Code</a></li>
<li><a href="../de448750/index.html">Ãœber eine Schwachstelle ist das nicht</a></li>
<li><a href="../de448754/index.html">Wer ist wer in Open Source: Geek-Biografien</a></li>
<li><a href="../de448756/index.html">Hintergrund: Warum Apple und Qualcomm sich stritten und sich dann versÃ¶hnten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>