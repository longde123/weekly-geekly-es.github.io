<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’£ ğŸ¥„ ğŸ PHP 7.4ç®€ä»‹ï¼šæ€§èƒ½ï¼ŒåŠŸèƒ½ï¼Œå¼ƒç”¨ ğŸ§‘ğŸ¾â€ğŸ¤â€ğŸ§‘ğŸ¼ ğŸŸï¸ ğŸ––ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PHP 7.4å¯¹æ‚¨æ„å‘³ç€ä»€ä¹ˆï¼Ÿ 
 PHPä¸æ–­å‘å±•ï¼Œä»–ä»¬åˆšåˆšå‘å¸ƒäº†æœ€æ–°çš„PHP 7.4æ›´æ–°ï¼Œå…¶ä¸­å……æ»¡äº†æ–°åŠŸèƒ½ã€‚ æ­£å¦‚æˆ‘ä»¬åœ¨è¿‡å»çš„PHP 7ç‰ˆæœ¬ä¸­å·²ç»è¯æ˜çš„é‚£æ ·-æ€§èƒ½å’Œé€Ÿåº¦ä¸æ–­æé«˜ã€‚ æœ€ä»¤äººå…´å¥‹çš„æ–°åŠŸèƒ½ä¹‹ä¸€æ˜¯é¢„åŠ è½½ ã€‚ ç”±äºç®€åŒ–äº†å¸¸è§çš„ä»£ç è¡Œï¼Œå› æ­¤å¯ä»¥åŠ å¿«è„šæœ¬æ‰§è¡Œé€Ÿåº¦ï¼Œå¹¶å¼•å…¥äº†æ‹¥æœ‰æ›´å¿«ï¼Œæ›´å¹²å‡€çš„ä»£ç çš„...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PHP 7.4ç®€ä»‹ï¼šæ€§èƒ½ï¼ŒåŠŸèƒ½ï¼Œå¼ƒç”¨</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483128/"><h2>  PHP 7.4å¯¹æ‚¨æ„å‘³ç€ä»€ä¹ˆï¼Ÿ </h2><br>  PHPä¸æ–­å‘å±•ï¼Œä»–ä»¬åˆšåˆšå‘å¸ƒäº†æœ€æ–°çš„PHP 7.4æ›´æ–°ï¼Œå…¶ä¸­å……æ»¡äº†æ–°åŠŸèƒ½ã€‚ æ­£å¦‚æˆ‘ä»¬åœ¨è¿‡å»çš„PHP 7ç‰ˆæœ¬ä¸­å·²ç»è¯æ˜çš„é‚£æ ·-æ€§èƒ½å’Œé€Ÿåº¦ä¸æ–­æé«˜ã€‚ æœ€ä»¤äººå…´å¥‹çš„æ–°åŠŸèƒ½ä¹‹ä¸€æ˜¯<b>é¢„åŠ è½½</b> ã€‚ ç”±äºç®€åŒ–äº†å¸¸è§çš„ä»£ç è¡Œï¼Œå› æ­¤å¯ä»¥åŠ å¿«è„šæœ¬æ‰§è¡Œé€Ÿåº¦ï¼Œå¹¶å¼•å…¥äº†æ‹¥æœ‰æ›´å¿«ï¼Œæ›´å¹²å‡€çš„ä»£ç çš„åŠŸèƒ½ã€‚ <br><br>  PHPè´Ÿè´£äººå……åˆ†è€ƒè™‘äº†å¬ä¼—çš„æ„è§å’Œè¦æ±‚ï¼Œå¹¶å®Œç¾åœ°å›ç­”äº†ä»–ä»¬ã€‚ ä»é‚£ä»¥åï¼Œä»–ä»¬ä¸€ç›´åœ¨ä¸æ–­æ›´æ”¹ä»£ç ï¼Œä»¥ä¾¿åœ¨ç¼–ç¨‹è¯­è¨€ä¹‹é—´åˆ‡æ¢æ—¶æ›´ç›´è§‚ï¼Œæ›´èˆ’é€‚ã€‚ <br><br>  PHPåœ¨æ‰€æœ‰ç½‘ç«™ä¸­çš„78.9ï¼…ä»¥ä¸Šä½¿ç”¨ã€‚ æ®<b><a href="https://w3techs.com/technologies/details/pl-php">W3techsç§°</a></b> ï¼Œä½¿ç”¨PHPçš„æœ€å—æ¬¢è¿çš„ç½‘ç«™æ˜¯Wikipediaï¼ŒPinterestå’ŒFacebookï¼Œä»…ä¸¾å‡ ä¾‹ã€‚ <br><br> å¦‚æœæˆ‘ä»¬æ˜ç¡®åœ°æŸ¥çœ‹è¿è¡ŒPHPçš„WordPressç½‘ç«™ï¼Œå°†PHP 5å’Œ7è¿›è¡Œæ¯”è¾ƒï¼Œå°±ä¼šå‘ç°é€Ÿåº¦æé«˜äº†ä¸€å€ã€‚  WordPressé©±åŠ¨çš„ç½‘ç«™é€šè¿‡ä½¿ç”¨æœ€æ–°çš„PHPç‰ˆæœ¬è·å¾—æœ€å¤§æ”¶ç›Šã€‚ <br><br><img src="https://habrastorage.org/webt/mv/aq/7i/mvaq7ifytdcg65bytr9gmxim9ri.png" alt="å›¾ç‰‡"><br><a name="habracut"></a><br> è¯¥å›¾è¯´æ˜äº†æœ‰å…³ç§¯æä½¿ç”¨PHPçš„ç½‘ç«™çš„çœŸç›¸ã€‚ æ˜¯<b><a href="https://trends.builtwith.com/websitelist/PHP">4000ä¸‡ã€‚</a></b> å®æ—¶ç½‘ç«™è¶³ä»¥å¸å¼•æ‚¨çš„æ³¨æ„åŠ›ï¼Ÿ ç°åœ¨æœ‰å¤šå°‘äººåœ¨ä½¿ç”¨PHPã€‚ æ­¤å¤–ï¼ŒPHP 7.4ä¸PHP 7.3ç›¸æ¯”å·²ç»å…·æœ‰æ›´å¥½çš„æµ‹è¯•ç»“æœï¼Œå¹¶å…·æœ‰æ”¹è¿›çš„æ€§èƒ½å’Œå…¶ä»–ç”Ÿæ´»è´¨é‡å‡çº§ã€‚ <br><br> ä¸‹å›¾æ˜¾ç¤ºäº†æ–°æ—§PHPç‰ˆæœ¬çš„æ€»ä½“<b><a href="https://www.phoronix.com/scan.php%3Fpage%3Darticle%26item%3Dphp-74-benchmarks%26num%3D1">åŸºå‡†æµ‹è¯•</a></b> ã€‚ æµ‹è¯•çš„ä¸€äº›æ ‡å‡†åŒ…æ‹¬æ˜“ç”¨æ€§ï¼Œé€Ÿåº¦å’Œæ€§èƒ½ã€‚ <br><br><img src="https://habrastorage.org/webt/yc/pa/rn/ycparnhmqt8bezuoxtfdi_y_veo.png" alt="å›¾ç‰‡"><br><br><h2>  PHP 7.4çš„æ–°å¢åŠŸèƒ½ï¼Ÿ </h2><br> è‡ª2016å¹´ä»¥æ¥ï¼ŒPHP7ä¸€ç›´åœ¨ä¸é—´æ–­åœ°å‘å¸ƒå¹´åº¦æ›´æ–°ã€‚ æ¯å¹´ï¼Œä»–ä»¬æä¾›æ–°åŠŸèƒ½ï¼Œæ–°å¢åŠŸèƒ½ï¼Œå¹¶ç¼–å†™æ›´ç®€æ´çš„ä»£ç ï¼Œä»è€Œä½¿è¯¥è¯­è¨€å¯¹äºåœ¨å…¶ç½‘ç«™ä¸Šè¿è¡Œçš„ç”¨æˆ·æ¥è¯´æ›´åŠ å¯é å’Œç”¨æˆ·å‹å¥½ã€‚ <br><br> è®©æˆ‘ä»¬æ·±å…¥ç ”ç©¶ä¸€ä¸‹PHP 7.4çš„æ–°å¢åŠŸèƒ½æ‰€åšçš„ä¸€äº›æ›´æ”¹ã€‚ æœ‰å…³å®Œæ•´åˆ—è¡¨ï¼Œè¯·<b><a href="https://www.php.net/manual/en/migration74.php">åœ¨æ­¤å¤„</a></b>æŸ¥çœ‹ä»–ä»¬çš„å˜æ›´æ—¥å¿—ã€‚ <br><br><h3> é¢„è£… </h3><br> è®©æˆ‘ä»¬è°ˆè°ˆä»£ç ã€‚ ä½¿ç”¨æ¡†æ¶æˆ–åº“æ—¶ï¼Œå¿…é¡»åœ¨æ¯æ¬¡è¯·æ±‚æ—¶åŠ è½½å¹¶é“¾æ¥å…¶æ–‡ä»¶ã€‚ é¢„åŠ è½½æ˜¯æŒ‡å¯ä»¥å°†æ¡†æ¶å’Œåº“åŠ è½½åˆ°OPCacheä¸­çš„æ—¶é—´ã€‚ å®ƒå…è®¸æœåŠ¡å™¨åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­åŠ è½½PHPæ–‡ä»¶å¹¶å°†å…¶å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä½¿å®ƒä»¬å¯ç”¨äºå°†æ¥çš„ä»»ä½•è¯·æ±‚ã€‚ è°ˆè®ºè®©äº‹æƒ…è¿›å±•è¿…é€Ÿï¼ <br><br> é¢„åŠ è½½ç”±ç‰¹å®šçš„<b>php.ini</b>æŒ‡ä»¤è¿è¡Œï¼š <b>opcache.preload</b> ã€‚ å®ƒå…·æœ‰PHPè„šæœ¬ç¼–è¯‘å™¨ï¼Œå¹¶åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶æ‰§è¡Œã€‚ å®ƒä¹Ÿå¯ä»¥ç”¨äºé¢„åŠ è½½æ›´å¤šæ–‡ä»¶å¹¶é€‰æ‹©åŒ…å«æˆ–ç¼–è¯‘å®ƒä»¬ã€‚ <br><br> å¤ªæ£’äº† ä½†æ˜¯ï¼Œå¦‚æœæ›¾ç»æ›´æ”¹è¿‡é¢„åŠ è½½æ–‡ä»¶çš„æºï¼Œåˆ™å¿…é¡»é‡æ–°å¯åŠ¨æœåŠ¡å™¨ã€‚ é¢„åŠ è½½çš„æ–‡ä»¶ä¹Ÿæ°¸è¿œä¿ç•™åœ¨OPCacheå†…å­˜ä¸­ã€‚ <br> ä½†æ˜¯ï¼Œå¦‚æœæ‚¨éœ€è¦å†æ¬¡ä½¿ç”¨å®ƒä»¬ï¼Œè¿™äº›é¢„åŠ è½½çš„æ–‡ä»¶å°†ç»§ç»­å¯ç”¨äºå°†æ¥çš„ä»»ä½•è¯·æ±‚ã€‚ <br><br><h3> æ•°ç»„è¡¨è¾¾å¼ä¸­çš„æ‰©æ•£è¿ç®—ç¬¦ </h3><br> æ—©åœ¨å‘å¸ƒPHP 5.6æ—¶ï¼ŒPHPå°±å¼€å§‹æ”¯æŒå‚æ•°è§£åŒ…ï¼ˆæ‰©å±•è¿ç®—ç¬¦ï¼‰ï¼Œä½†æ˜¯ç°åœ¨ï¼Œåœ¨7.4ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ­¤åŠŸèƒ½ä¸æ•°ç»„è¡¨è¾¾å¼ä¸€èµ·ä½¿ç”¨ã€‚ å‚æ•°è§£å‹ç¼©æ˜¯ä¸€ç§å°†æ•°ç»„å’ŒTraversablesè§£å‹ç¼©åˆ°å‚æ•°åˆ—è¡¨ä¸­çš„è¯­æ³•ã€‚ è€Œä¸”ï¼Œè¦è¿™æ ·åšï¼Œåªéœ€è¦åœ¨å‰é¢åŠ ä¸Š...ï¼ˆ3ä¸ªç‚¹ï¼‰å³å¯ã€‚ <br><br> è®©æˆ‘ä»¬æ¥çœ‹è¿™ä¸ªä¾‹å­ï¼š <br><br><pre><code class="php hljs">$animals = [<span class="hljs-string"><span class="hljs-string">'dog'</span></span>, <span class="hljs-string"><span class="hljs-string">'cat'</span></span>]; $animalkingdom = [<span class="hljs-string"><span class="hljs-string">'lion'</span></span>, <span class="hljs-string"><span class="hljs-string">'elephant'</span></span>, ...$animals, <span class="hljs-string"><span class="hljs-string">'giraffe'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// ['lion', 'elephant', 'dog', 'cat', 'giraffe'];</span></span></code> </pre> <br> ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä½¿ç”¨Spread Operatorè¯­æ³•ä»ä»»æ„æ•°ç»„ä¸­çš„ä»»æ„ä½ç½®æ‰©å±•æ•°ç»„ã€‚ <br><br> è¿™æ˜¯ä¸€ä¸ªæ›´é•¿çš„ä¾‹å­ï¼š <br><br><pre> <code class="php hljs">$num1 = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]; $num2 = [...$num1]; <span class="hljs-comment"><span class="hljs-comment">// [1, 2, 3] $num3 = [0, ...$num1]; // [0, 1, 2, 3] $num4 = array(...$num1, ...$num2, 111); // [1, 2, 3, 1, 2, 3, 111] $num5 = [...$num1, ...$num1]; // [1, 2, 3, 1, 2, 3]</span></span></code> </pre> <br> ä¸ä»…å¦‚æ­¤ï¼Œæ‚¨è¿˜å¯ä»¥åœ¨å‡½æ•°ä¸­ä½¿ç”¨å®ƒã€‚ çœ‹çœ‹è¿™ä¸ªä¾‹å­ï¼š <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-string"><span class="hljs-string">'b'</span></span>]; } $num6 = [...getNum(), <span class="hljs-string"><span class="hljs-string">'c'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// ['a', 'b', 'c'] $num7 = [...new NumIterator(['a', 'b', 'c'])]; // ['a', 'b', 'c'] function arrGen() { for($i = 11; $i &lt; 15; $i++) { yield $i; } } $num8 = [...arrGen()]; // [11, 12, 13, 14]</span></span></code> </pre> <br> æ­¤å¤–ï¼Œæ‚¨ç°åœ¨å¯ä»¥å°†å‡½æ•°ç›´æ¥è¿”å›çš„æ•°ç»„å’Œç”Ÿæˆå™¨è§£å‹ç¼©åˆ°æ–°æ•°ç»„ä¸­ã€‚ <br><br> ä¸€ä¸ªä»£ç ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAnimals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-string"><span class="hljs-string">'dog'</span></span>, <span class="hljs-string"><span class="hljs-string">'cat'</span></span>, <span class="hljs-string"><span class="hljs-string">'elephant'</span></span>]; } $num1 = [...getAnimals(), <span class="hljs-string"><span class="hljs-string">'lion'</span></span>, <span class="hljs-string"><span class="hljs-string">'tiger'</span></span>, <span class="hljs-string"><span class="hljs-string">'giraffe'</span></span>];</code> </pre> <br> åœ¨PHP 7.4ä¸­ï¼Œå®ƒå°†æ˜¾ç¤ºï¼š <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-number"><span class="hljs-number">6</span></span>) { [<span class="hljs-number"><span class="hljs-number">0</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">"dog"</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-string"><span class="hljs-string">"cat"</span></span> [<span class="hljs-number"><span class="hljs-number">2</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">8</span></span>) <span class="hljs-string"><span class="hljs-string">"elephant"</span></span> [<span class="hljs-number"><span class="hljs-number">3</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-string"><span class="hljs-string">"lion"</span></span> [<span class="hljs-number"><span class="hljs-number">4</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-string"><span class="hljs-string">"tiger"</span></span> [<span class="hljs-number"><span class="hljs-number">5</span></span>]=&gt; string(<span class="hljs-number"><span class="hljs-number">7</span></span>) <span class="hljs-string"><span class="hljs-string">"giraffe"</span></span> }</code> </pre> <br> ä½¿ç”¨è¿™ä¸ªæ–°çš„æ•°ç»„è¡¨è¾¾å¼ï¼Œæ•£å¸ƒè¿ç®—ç¬¦åº”è¯¥æ¯”7.3 array_mergeå…·æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚ è¿™æ˜¯å› ä¸ºä¼ æ’­è¿ç®—ç¬¦æ˜¯ä¸€ç§è¯­è¨€ç»“æ„ï¼Œè€Œarray_mergeæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ åŒæ ·å› ä¸ºæ•£å¸ƒè¿ç®—ç¬¦æ”¯æŒå®ç°å¯éå†çš„å¯¹è±¡ï¼Œè€Œarray_mergeä»…æ”¯æŒæ•°ç»„ã€‚ <br><br> éœ€è¦æ³¨æ„çš„ä¸€äº›é‡è¦äº‹é¡¹ï¼Œç”±äºä¸æ”¯æŒå­—ç¬¦ä¸²é”®ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨ç´¢å¼•æ•°ç»„ã€‚ å¦‚æœä½¿ç”¨æ­¤é”®ï¼Œä¸€æ—¦æ‰¾åˆ°å­—ç¬¦ä¸²é”®ï¼Œå°±ä¼šåœ¨å±å¹•ä¸Šå¼•å‘å¯æ¢å¤çš„é”™è¯¯ã€‚ <br>  7.4çš„å¦ä¸€é¡¹è£è€€æ˜¯åˆ é™¤äº†array_mergeã€‚ å‘Šåˆ«å¯æ€•çš„ç´¢å¼•ç§»ä½ï¼ <br><br> ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬åœ¨ä¸‹é¢çœ‹è¿™ä¸ªå†—é•¿çš„æ•°ç»„åˆå¹¶ï¼š <br><br><pre> <code class="php hljs">$array = [<span class="hljs-string"><span class="hljs-string">'banana, '</span></span>orange<span class="hljs-string"><span class="hljs-string">']; $array[2] = '</span></span>orange<span class="hljs-string"><span class="hljs-string">'; $array[1] = '</span></span>apple<span class="hljs-string"><span class="hljs-string">'; //shifting var_dump($array); // prints array(3) { [0]=&gt; string(6) "banana" [1]=&gt; string(5) "apple" [2]=&gt; string(6) "orange"</span></span></code> </pre> <br>  7.4çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯ä½¿ç”¨äº†generatorå‡½æ•°ã€‚ ç”Ÿæˆå™¨å‡½æ•°çš„å·¥ä½œæ–¹å¼ä¸æ™®é€šå‡½æ•°ç±»ä¼¼ï¼Œåªæ˜¯<b><a href="https://www.php.net/manual/en/language.generators.syntax.php">ç”Ÿæˆå™¨å‡½æ•°</a></b>ä¸è¿”å›å€¼ï¼Œè€Œæ˜¯<b><a href="https://www.php.net/manual/en/language.generators.syntax.php">ç”Ÿæˆ</a></b>æ‰€éœ€æ•°é‡çš„å€¼ã€‚ <br><br> æŸ¥çœ‹ä»¥ä¸‹ç¤ºä¾‹ä»£ç ï¼š <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ($i = <span class="hljs-number"><span class="hljs-number">3</span></span>; $i &lt;= <span class="hljs-number"><span class="hljs-number">5</span></span>; $i++) { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> $i; } } $num1 = [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, ...generator()];</code> </pre> <br><h3> å‚è€ƒä¸è¶³ </h3><br> ç°åœ¨ï¼ŒPHP 7.4å…·æœ‰WeakReferenceç±»ï¼Œè¯·å‹¿å°†å…¶ä¸ç±»<b>WeakRed</b>æˆ–<b>Weakref</b>æ‰©å±•æ··æ·†ã€‚ <br><br>  <b>WeakReferences</b>ä½¿ç¨‹åºå‘˜å¯ä»¥è°ƒç”¨å¯¹å¯¹è±¡çš„å¼•ç”¨ã€‚ è¿™å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒä¸ä¼šé˜»æ­¢å¯¹è±¡è¢«ç ´åã€‚ å®ƒä»¬å¯¹äºå®ç°ç±»ä¼¼ç¼“å­˜çš„ç»“æ„å¾ˆæœ‰å¸®åŠ©ã€‚ <br><br><pre> <code class="php hljs">WeakReference { <span class="hljs-comment"><span class="hljs-comment">/* Methods */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> __construct ( void ) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> create ( object $referent ) : WeakReference <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> get ( void ) : ?object }</code> </pre> <br><h3> åå˜å‚æ•°å’Œåå˜è¿”å› </h3><br> å½“å‰ï¼ŒPHPä¸»è¦ä½¿ç”¨ä¸å˜çš„å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ã€‚ è¿™æ„å‘³ç€ï¼Œå¦‚æœæ–¹æ³•çš„å‚æ•°æˆ–è¿”å›ç±»å‹ä¸ºXï¼Œåˆ™å­ç±»å‹å‚æ•°æˆ–è¿”å›ç±»å‹ä¹Ÿå¿…é¡»ä¸º<b>Xã€‚</b> <br><br> ç°åœ¨ï¼Œåœ¨PHP 7.4ä¸­ï¼Œå®ƒå»ºè®®åœ¨å‚æ•°å’Œè¿”å›ç±»å‹ä¸Šå…è®¸<b>åå˜</b> ï¼ˆä»ç‰¹å®šåˆ°é€šç”¨çš„é¡ºåºï¼‰å’Œ<b>é€†å˜</b> ï¼ˆé¢ å€’é¡ºåºï¼‰ã€‚ <br><br> è¿™æ˜¯ä¸¤ä¸ªç¤ºä¾‹ï¼š <br><br> åå˜è¿”å›ç±»å‹ç¤ºä¾‹ï¼š <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Factory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">object</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserFactory</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Factory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">User</span></span></span></span>; }</code> </pre> <br> å˜é‡å‚æ•°ç±»å‹ç¤ºä¾‹ï¼š <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Concatable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">concat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Iterator $input)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Collection</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Concatable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// accepts all iterables, not just Iterator function concat(iterable $input) {/* . . . */} }</span></span></code> </pre> <br><h3> é”®å…¥å±æ€§2.0 </h3><br> ä»PHP 5å¼€å§‹ï¼Œç±»å‹æç¤ºå·²æˆä¸ºä¸€é¡¹å¯ç”¨åŠŸèƒ½ï¼Œå…è®¸æ‚¨æŒ‡å®šé¢„æœŸä¼ é€’ç»™å‡½æ•°æˆ–ç±»çš„å˜é‡çš„ç±»å‹ã€‚ åœ¨PHP 7.2è¿ç§»ä¸­ï¼Œå¯¹è±¡æ•°æ®ç±»å‹çš„æ·»åŠ ä½¿äººä»¬å¸Œæœ›å°†æ¥ä¼šæœ‰æ›´å¤šå¯ç”¨ã€‚ æœªæ¥å°±æ˜¯ç°åœ¨ã€‚ <br><br> åœ¨æ–°çš„7.4ä¸­ï¼ŒPHPèƒ½å¤Ÿæ”¯æŒä»¥ä¸‹ç±»å‹åˆ—è¡¨ï¼š <br><br><pre> <code class="php hljs">bool, int, float, string, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>, object, iterable, <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span> any <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">or</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> ?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class"> // </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> "</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">may</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">be</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">any</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">of</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">the</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">above</span></span></span></span></code> </pre> <br> è¯·æ³¨æ„ï¼Œ <b>çˆ¶</b>ç±»å‹å¯ä»¥åœ¨ç±»ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”ä¸å¿…å…·æœ‰ä¸å‚æ•°å’Œè¿”å›ç±»å‹ä¸€è‡´çš„çˆ¶ç±»å‹ã€‚ <br><br> å¦å¤–ï¼Œè¯·æ³¨æ„ï¼Œä¸æ”¯æŒ<b>void</b>å’Œ<b>callable</b> ã€‚  <b>Void</b>è¢«åˆ é™¤ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ç”¨å¹¶ä¸”è¯­ä¹‰ä¸æ˜ç¡®ï¼›  <b>å¯è°ƒç”¨</b> ï¼Œå› ä¸ºå®ƒçš„è¡Œä¸ºä¸ä¸Šä¸‹æ–‡æœ‰å…³ã€‚ <br><br> è®©æˆ‘ä»¬çœ‹çœ‹æ›´å¤šç¤ºä¾‹ã€‚ <br><br> è¿™æ˜¯ä¸ºPHP 7.3ç¼–å†™çš„ç±»ï¼š <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> int $id */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $id; <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string $name */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $name; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(int $id, string $name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name = $name; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(int $id)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(string $name)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name = $name; } }</code> </pre> <br> åœ¨PHP 7.4ä¸­ï¼Œåœ¨ä¸ç‰ºç‰²ä»»ä½•ç±»å‹å®‰å…¨æ€§çš„æƒ…å†µä¸‹ï¼Œç°åœ¨å¯ä»¥ç¼–å†™ä¸€ä¸ªç®€å•çš„ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> int $id; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> string $name; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(int $id, string $name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name = $name; } }</code> </pre><br> ä»¥ä¸‹æ˜¯7.4ç°åœ¨æ”¯æŒçš„æ‰€æœ‰ç±»å‹çš„ä¸€äº›ç¤ºä¾‹ï¼š <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> int $scalarType; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> ClassName $classType; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ?ClassName $nullableClassType; <span class="hljs-comment"><span class="hljs-comment">// Types are also legal on static properties public static iterable $staticProp; // Types can also be used with the "var" notation var bool $flag; // Typed properties may have default values (more below) public string $str = "foo"; public ?string $nullableStr = null; // The type applies to all properties in one declaration public float $x, $y; // equivalent to: public float $x; public float $y; }</span></span></code> </pre> <br><h3> ç®­å¤´åŠŸèƒ½2.0 </h3><br>  PHPä¸­çš„åŒ¿åå‡½æ•°å¾€å¾€å†—é•¿å†—é•¿ï¼Œå³ä½¿å®ƒä»¬ä»…æ‰§è¡Œç®€å•çš„æ“ä½œä¹Ÿæ˜¯å¦‚æ­¤ã€‚ è¿™éƒ¨åˆ†å½’å› äºå¤§é‡çš„è¯­æ³•æ¨¡æ¿ï¼Œéƒ¨åˆ†å½’å› äºéœ€è¦æ‰‹åŠ¨å¯¼å…¥ä½¿ç”¨çš„å˜é‡ã€‚ <br><br> è¿™ä½¿å¾—ä½¿ç”¨ç®€å•é—­åŒ…çš„ä»£ç éš¾ä»¥é˜…è¯»ç”šè‡³éš¾ä»¥ç†è§£ã€‚ <br><br> è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æ‚¨å°†åœ¨PHP 7.3ä¸­ä½¿ç”¨çš„ä¸€äº›ä»£ç ï¼š <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array_values_from_keys</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($arr, $keys)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array_map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($x)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($arr)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $arr[$x]; }, $keys); }</code> </pre> <br> ç°åœ¨ï¼Œè¿™æ˜¯PHP 7.4çš„æ›´ç®€æ´è¯­æ³•ï¼š <br><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array_values_from_keys</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($arr, $keys)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array_map(fn($x) =&gt; $arr[$x], $keys); }</code> </pre> <br> å› æ­¤ï¼Œç®­å¤´å‡½æ•°ç°åœ¨å…·æœ‰ä»¥ä¸‹ç®€å•å½¢å¼ï¼š <br><br><pre> <code class="php hljs">fn(parameter_list) =&gt; expr</code> </pre> <br> åœ¨ä¸‹é¢ï¼Œæ‚¨å¯ä»¥å¹¶æ’çœ‹åˆ°ä¸¤ä¸ªå‡½æ•°$ fn1ï¼ˆ7.3ï¼‰å’Œ$ fn2ï¼ˆ7.4ï¼‰çš„ç¤ºä¾‹ã€‚ å®ƒä»¬å…·æœ‰ç›¸åŒçš„ç»“æœï¼Œä½†å¤–è§‚ä¸åŒï¼š <br><br><pre> <code class="php hljs">$y = <span class="hljs-number"><span class="hljs-number">1</span></span>; $fn1 = fn($x) =&gt; $x + $y; $fn2 = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($x)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($y)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $x + $y; };</code> </pre> <br> å¦‚æœç®­å¤´å‡½æ•°åµŒå¥—ï¼Œè¿™ä¹Ÿå°†èµ·ä½œç”¨ï¼š <br><br><pre> <code class="php hljs">$z = <span class="hljs-number"><span class="hljs-number">1</span></span>; $fn = fn($x) =&gt; fn($y) =&gt; $x * $y + $z;</code> </pre><br> åœ¨æ­¤ï¼Œå¤–éƒ¨å‡½æ•°æ•è·<b>$ z</b> ã€‚ ç„¶åï¼Œå†…éƒ¨å‡½æ•°è¿˜ä»å¤–éƒ¨å‡½æ•°æ•è·$ zã€‚ åœ¨7.4ä¸­ï¼Œå¤–éƒ¨ä½œç”¨åŸŸå¯ä»¥åœ¨å†…éƒ¨å‡½æ•°ä¸­ä½¿ç”¨ã€‚ è¿™æ˜¯7.3æ— æ³•åšåˆ°çš„ã€‚ <br><br> ç®­å¤´å‡½æ•°è¯­æ³•å…è®¸ä½¿ç”¨å„ç§å‡½æ•°ï¼Œä¾‹å¦‚variadicsï¼Œé»˜è®¤å€¼ï¼Œå‚æ•°å’Œè¿”å›ç±»å‹ï¼Œä»¥åŠæŒ‰å¼•ç”¨ä¼ é€’å’Œè¿”å›ã€‚ åŒæ—¶ä¿æŒæ•´æ´ï¼Œå¯è¯»çš„å¤–è§‚ã€‚ ä»¥ä¸‹æ˜¯æ‰€æœ‰å¯ç”¨çš„æœ‰æ•ˆç®­å¤´åŠŸèƒ½ï¼š <br><br><pre> <code class="php hljs">fn(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span> $x) =&gt; $x; fn(): int =&gt; $x; fn($x = <span class="hljs-number"><span class="hljs-number">42</span></span>) =&gt; $x; fn(&amp;$x) =&gt; $x; fn&amp;($x) =&gt; $x; fn($x, ...$rest) =&gt; $rest;</code> </pre> <br> è¦æ³¨æ„çš„ä¸€ä»¶äº‹æ˜¯ç®­å¤´å‡½æ•°çš„ä¼˜å…ˆçº§æœ€ä½ã€‚ å‚è§ç¤ºä¾‹ï¼š <br><br><pre> <code class="php hljs">fn($x) =&gt; $x + $y <span class="hljs-comment"><span class="hljs-comment">// is fn($x) =&gt; ($x + $y) // not (fn($x) =&gt; $x) + $y</span></span></code> </pre> <br><h2> å¼ƒç”¨ </h2><br> ä¸7.4åˆå¹¶æ—¶å‘ç”Ÿäº†è®¸å¤šå¼ƒç”¨æƒ…å†µã€‚ ä»¥ä¸‹åˆ—è¡¨æ˜¯é’ˆå¯¹ä¸æ¨èä½¿ç”¨çš„åŠŸèƒ½çš„ç®€çŸ­æ¦‚è¿°ã€‚ æ‚¨å¯ä»¥<b><a href="https://wiki.php.net/rfc/deprecations_php_7_4">åœ¨è¿™é‡Œ</a></b>æ‰¾åˆ°æ›´è¯¦ç»†çš„è¯´æ˜ï¼š <br><br><ul><li>  <b>å®</b>å‹ </li><li> é­”æœ¯æŠ¥ä»·é—ç•™ </li><li>  <b>array_key_existsï¼ˆï¼‰</b>ä¸å¯¹è±¡ </li><li>  <b>FILTER_SANITIZE_MAGIC_QUOTES</b>è¿‡æ»¤å™¨ </li><li> åå°„<b>exportï¼ˆï¼‰</b>æ–¹æ³• </li><li>  <b>mb_strrposï¼ˆï¼‰</b> ï¼Œç¼–ç ä¸ºç¬¬ä¸‰ä¸ªå‚æ•° </li><li>  <b>implodeï¼ˆï¼‰</b>å‚æ•°é¡ºåºæ··åˆ </li><li> ä»éé™æ€é—­åŒ…ä¸­è§£é™¤<b>æ­¤$çš„</b>ç»‘å®š </li><li>  <b>hebrevcï¼ˆï¼‰</b>å‡½æ•° </li><li>  <b>convert_cyr_stringï¼ˆï¼‰</b>å‡½æ•° </li><li>  <b>money_formatï¼ˆï¼‰</b>å‡½æ•° </li><li>  <b>ezmlm_hashï¼ˆï¼‰</b>å‡½æ•° </li><li>  r <b>estore_include_pathï¼ˆï¼‰</b>å‡½æ•° </li><li>  <b>allow_url_include</b> iniæŒ‡ä»¤ </li></ul><br> ä»¥ä¸‹æ˜¯ä¸¤æ­¥å¼ƒç”¨ï¼Œéœ€è¦æ³¨æ„çš„ä¸€äº›é‡è¦äº‹é¡¹ã€‚ <br><br><h3> æ›´æ”¹ä¸²è”è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ </h3><br> å½“å‰ï¼Œâ€œã€‚â€ï¼Œâ€œ +â€å’Œâ€œ-â€è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§éƒ½ç›¸ç­‰ã€‚ è¿™äº›è¿ç®—ç¬¦çš„ä»»ä½•ç»„åˆéƒ½å°†ç®€å•åœ°ä»å·¦åˆ°å³æ±‚è§£ã€‚ <br><br> è®©æˆ‘ä»¬çœ‹çœ‹PHP 7.3ä¸­çš„ä»¥ä¸‹ä»£ç ï¼š <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"sum: "</span></span> . $a + $b; <span class="hljs-comment"><span class="hljs-comment">// would be evaluated left-to-right echo ("sum: " . $a) + $b; // could also look like this</span></span></code> </pre> <br> åœ¨PHP 7.4ä¸­ï¼Œâ€œ +â€å’Œâ€œ-â€å°†ä¼˜å…ˆäºâ€œã€‚â€ã€‚ å› æ­¤åŠ æ³•å’Œå‡æ³•å°†å§‹ç»ˆåœ¨å­—ç¬¦ä¸²ä¹‹å‰æ‰§è¡Œã€‚ å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"sum: "</span></span> . $a + $b; <span class="hljs-comment"><span class="hljs-comment">// would be executed as if the code were as follows. echo "sum :" . ($a + $b);</span></span></code> </pre> <br> è¿™ä¸ªåˆ†ä¸¤æ­¥çš„ææ¡ˆæ—¨åœ¨å‡å°‘å‡ºé”™çš„å¯èƒ½æ€§ï¼Œæé«˜ç›´è§‰ã€‚ å½“å‰ï¼ŒPHP 7.4å¤„äºç¬¬ä¸€é˜¶æ®µï¼Œå·²å¼ƒç”¨äº†éæ‹¬å·çš„è¡¨è¾¾å¼â€œ +â€ï¼Œâ€œ-â€å’Œâ€œâ€ã€‚ åœ¨ç­‰å¾…æœ€ç»ˆæŠ•ç¥¨/ PHP 8ä¸­å‘ç”Ÿçš„æ›´æ”¹æ—¶ã€‚ <br><br><h3> å·¦è”æƒ³ä¸‰å…ƒè¿ç®—ç¬¦ </h3><br> ä¸å¤§å¤šæ•°å…¶ä»–è¯­è¨€ä¸åŒï¼ŒPHPä¸­çš„ä¸‰å…ƒè¿ç®—ç¬¦æ˜¯å·¦å…³è”çš„ï¼Œè€Œä¸æ˜¯å³å…³è”çš„ã€‚ è¿™ä¸ä»…ä¸å¸¸è§ï¼Œè€Œä¸”åœ¨ä¸åŒè¯­è¨€ä¹‹é—´åˆ‡æ¢çš„ç¨‹åºå‘˜ä¹Ÿæ„Ÿåˆ°å›°æƒ‘ã€‚  PHP 7.4å»ºè®®åˆ é™¤å·¦å…³è”æ€§ï¼Œè€Œè¦æ±‚ä½¿ç”¨æ‹¬å·ã€‚ <br><br> è®©æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä»£ç ï¼š <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $a == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-string"><span class="hljs-string">'one'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">2</span></span> ? <span class="hljs-string"><span class="hljs-string">'two'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">3</span></span> ? <span class="hljs-string"><span class="hljs-string">'three'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">4</span></span> ? <span class="hljs-string"><span class="hljs-string">'four'</span></span> : <span class="hljs-string"><span class="hljs-string">'other'</span></span>;</code> </pre> <br> åœ¨å¤§å¤šæ•°å…¶ä»–è¯­è¨€ä¸­ï¼Œå®ƒå°†è¢«è§£é‡Šä¸ºï¼š <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $a == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-string"><span class="hljs-string">'one'</span></span> : ($a == <span class="hljs-number"><span class="hljs-number">2</span></span> ? <span class="hljs-string"><span class="hljs-string">'two'</span></span> : ($a == <span class="hljs-number"><span class="hljs-number">3</span></span> ? <span class="hljs-string"><span class="hljs-string">'three'</span></span> : ($a == <span class="hljs-number"><span class="hljs-number">4</span></span> ? <span class="hljs-string"><span class="hljs-string">'four'</span></span> : <span class="hljs-string"><span class="hljs-string">'other'</span></span>)))</code> </pre> <br> åœ¨PHPä¸­ï¼Œå®ƒè¢«è§£é‡Šä¸ºï¼š <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ((($a == <span class="hljs-number"><span class="hljs-number">1</span></span> ? <span class="hljs-string"><span class="hljs-string">'one'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">2</span></span>) ? <span class="hljs-string"><span class="hljs-string">'two'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">3</span></span>) ? <span class="hljs-string"><span class="hljs-string">'three'</span></span> : $a == <span class="hljs-number"><span class="hljs-number">4</span></span>) ? <span class="hljs-string"><span class="hljs-string">'four'</span></span> : <span class="hljs-string"><span class="hljs-string">'other'</span></span>;</code> </pre> <br> è¿™å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯ï¼Œå› ä¸ºå®ƒé€šå¸¸ä¸æ˜¯é¢„æœŸçš„ã€‚ <br><br> é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„ä¸¤æ­¥æè®®ï¼ŒPHP 7.4å·²å®ç°æ‹¬å·çš„æ˜¾å¼ä½¿ç”¨ä½œä¸ºå¼ƒç”¨è­¦å‘Šï¼Œå¹¶æœ‰æœ›åœ¨ä»¥åçš„ç‰ˆæœ¬ä¸­å‘ç”Ÿç¼–è¯‘æ—¶é”™è¯¯ã€‚ <br><br><h2> ç»“è®º </h2><br> æ°é€¢å‡æœŸï¼ŒPHP 7.4ä¸ºæ‰€æœ‰PHPå¼€å‘äººå‘˜å¸¦æ¥äº†æ–°åŠŸèƒ½ï¼Œå¹¶æ”¹å–„äº†ç”Ÿæ´»è´¨é‡ã€‚ <br><br>  WordPressç½‘ç«™è‚¯å®šä¼šä»è¿™äº›æ”¹è¿›ä¸­å—ç›Šï¼Œä¸ä»¥å‰çš„ç‰ˆæœ¬ç›¸æ¯”ï¼Œä½¿ç”¨PHP 7.4çš„ç”¨æˆ·å¯ä»¥æœŸæœ›æ›´å¿«çš„æ‰§è¡Œæ—¶é—´å’Œæ›´å°‘çš„å†…å­˜ä½¿ç”¨ã€‚ <br><br> é€šè¿‡æ·»åŠ ä¸€æµçš„å±æ€§ç±»å‹å£°æ˜å’Œç±»å‹æç¤ºï¼Œç®­å¤´åˆå¹¶åŠŸèƒ½ä»¥åŠå¯ç¬‘çš„æ›´é«˜é€Ÿåº¦ï¼Œ7.4å¿…å°†æé«˜å·¥ä½œæµç¨‹çš„é€Ÿåº¦å’Œè´¨é‡ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN483128/">https://habr.com/ru/post/zh-CN483128/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN483116/index.html">åœ¨å®¶åˆ¶ä½œæœ›è¿œé•œç®¡</a></li>
<li><a href="../zh-CN483118/index.html">2020å¹´å°†åœ¨JavaScriptä¸­æ·»åŠ ä»€ä¹ˆ</a></li>
<li><a href="../zh-CN483120/index.html">å¦‚æœæœªæä¾›ï¼Œå¦‚ä½•è¿æ¥æ¤­åœ†æŠ•å½±ä¸­çš„å¡ï¼Ÿ</a></li>
<li><a href="../zh-CN483124/index.html">è¿‘æœŸå†…æœ€å¤§çš„é…ä»¶ï¼ˆä¸æ˜¯æ™ºèƒ½æ‰‹æœºï¼‰</a></li>
<li><a href="../zh-CN483126/index.html">ä½æ¸©æ•ˆåº”å¯ç¡®ä¿å®‰å…¨è¿è¾“å—æŸç”µåŠ¨è½¦ç”µæ± </a></li>
<li><a href="../zh-CN483130/index.html">å¦‚æœå¿˜è®°äº†è¡Œæç®±é”çš„å¯†ç æ€ä¹ˆåŠï¼Ÿ</a></li>
<li><a href="../zh-CN483132/index.html">æœ›è¿œé•œçš„è®¾è®¡ä¸åˆ¶é€ </a></li>
<li><a href="../zh-CN483134/index.html">ä¸¤å› ç´ èº«ä»½éªŒè¯æµ‹è¯•å’Œå¯èƒ½çš„è§£å†³æ–¹æ³•</a></li>
<li><a href="../zh-CN483136/index.html">è´­ä¹°å‰æ£€æŸ¥äºŒæ‰‹MacBook-æ£€æŸ¥åˆ—è¡¨</a></li>
<li><a href="../zh-CN483140/index.html">å¤šè¾¹å½¢å¦ä¸€ä¸ªä¸–ç•Œï¼šAmiga 500</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>