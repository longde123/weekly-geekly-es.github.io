<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ˜™ ğŸš° ğŸ“© JVMå†…éƒ¨å¦‚ä½•å®ç°å¤šæ€ ğŸ‘©ğŸ¿â€ğŸš’ ğŸ—¿ ğŸ’ªğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ¬æ–‡çš„ç¿»è¯‘æ˜¯ä¸“é—¨ä¸ºJava Developerè¯¾ç¨‹çš„å­¦ç”Ÿå‡†å¤‡çš„ã€‚ 




 åœ¨æˆ‘ä¹‹å‰çš„æ–‡ç« ã€Šå…³äºæ–¹æ³•é‡è½½ä¸æ–¹æ³•é‡è½½çš„ä¸€åˆ‡ã€‹ä¸­ ï¼Œæˆ‘ä»¬ç ”ç©¶äº†æ–¹æ³•é‡è½½å’Œé‡è½½çš„è§„åˆ™å’Œå·®å¼‚ã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•åœ¨JVMä¸­å¤„ç†æ–¹æ³•é‡è½½å’Œé‡å†™ã€‚ 

 ä¾‹å¦‚ï¼Œä»¥ä¸Šä¸€ç¯‡æ–‡ç« ä¸­çš„ç±»ä¸ºä¾‹ï¼šçˆ¶çº§Mammal ï¼ˆå“ºä¹³åŠ¨ç‰©ï¼‰å’Œå­çº§H...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>JVMå†…éƒ¨å¦‚ä½•å®ç°å¤šæ€</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/467197/">  <i>æœ¬æ–‡çš„ç¿»è¯‘æ˜¯ä¸“é—¨ä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Java Developer</a>è¯¾ç¨‹çš„å­¦ç”Ÿå‡†å¤‡çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ã€‚</a></i> <br><br><img src="https://habrastorage.org/webt/pv/d6/a7/pvd6a7xzq3zopckoatmhx0ohjn8.png"><br><br><hr><br> åœ¨æˆ‘ä¹‹å‰çš„æ–‡ç« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ã€Šå…³äºæ–¹æ³•é‡è½½ä¸æ–¹æ³•é‡è½½çš„ä¸€åˆ‡ã€‹ä¸­</a> ï¼Œæˆ‘ä»¬ç ”ç©¶äº†æ–¹æ³•é‡è½½å’Œé‡è½½çš„è§„åˆ™å’Œå·®å¼‚ã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•åœ¨JVMä¸­å¤„ç†æ–¹æ³•é‡è½½å’Œé‡å†™ã€‚ <a name="habracut"></a><br><br> ä¾‹å¦‚ï¼Œä»¥ä¸Šä¸€ç¯‡æ–‡ç« ä¸­çš„ç±»ä¸ºä¾‹ï¼šçˆ¶çº§<code>Mammal</code> ï¼ˆå“ºä¹³åŠ¨ç‰©ï¼‰å’Œå­çº§<code>Human</code> ï¼ˆäººç±»ï¼‰ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OverridingInternalExample</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mammal</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">speak</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"ohlllalalalalalaoaoaoa"</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Human</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mammal</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">speak</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); } <span class="hljs-comment"><span class="hljs-comment">//   speak() public void speak(String language) { if (language.equals("Hindi")) System.out.println("Namaste"); else System.out.println("Hello"); } @Override public String toString() { return "Human Class"; } } //           public static void main(String[] args) { Mammal anyMammal = new Mammal(); anyMammal.speak(); // Output - ohlllalalalalalaoaoaoa // 10: invokevirtual #4 // Method org/programming/mitra/exercises/OverridingInternalExample$Mammal.speak:()V Mammal humanMammal = new Human(); humanMammal.speak(); // Output - Hello // 23: invokevirtual #4 // Method org/programming/mitra/exercises/OverridingInternalExample$Mammal.speak:()V Human human = new Human(); human.speak(); // Output - Hello // 36: invokevirtual #7 // Method org/programming/mitra/exercises/OverridingInternalExample$Human.speak:()V human.speak("Hindi"); // Output - Namaste // 42: invokevirtual #9 // Method org/programming/mitra/exercises/OverridingInternalExample$Human.speak:(Ljava/lang/String;)V } }</span></span></code> </pre> <br> æˆ‘ä»¬å¯ä»¥ä»ä¸¤ä¸ªæ–¹é¢çœ‹å¾…å¤šæ€æ€§é—®é¢˜ï¼šä»â€œé€»è¾‘â€å’Œâ€œç‰©ç†â€ä¸¤ä¸ªæ–¹é¢ã€‚ è®©æˆ‘ä»¬é¦–å…ˆçœ‹é—®é¢˜çš„é€»è¾‘æ–¹é¢ã€‚ <br><br><h3> é€»è¾‘è§‚ç‚¹ </h3><br> ä»é€»è¾‘è§’åº¦æ¥çœ‹ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µï¼Œè¢«è°ƒç”¨çš„æ–¹æ³•è¢«è®¤ä¸ºä¸å¼•ç”¨çš„ç±»å‹æœ‰å…³ã€‚ ä½†æ˜¯åœ¨è¿è¡Œæ—¶ï¼Œå°†è°ƒç”¨æ‰€å¼•ç”¨å¯¹è±¡çš„æ–¹æ³•ã€‚ <br><br> ä¾‹å¦‚ï¼Œåœ¨ä¸€è¡Œ<code>humanMammal.speak();</code> ç¼–è¯‘å™¨è®¤ä¸ºå°†è°ƒç”¨<code>Mammal.speak()</code> ï¼Œå› ä¸º<code>humanMammal</code>å£°æ˜ä¸º<code>Mammal</code> ã€‚ ä½†æ˜¯åœ¨è¿è¡Œæ—¶ï¼ŒJVMä¼šçŸ¥é“<code>humanMammal</code>åŒ…å«ä¸€ä¸ª<code>Human</code>å¯¹è±¡ï¼Œå¹¶å°†å®é™…è°ƒç”¨<code>Human.speak()</code>æ–¹æ³•ã€‚ <br><br> åªè¦æˆ‘ä»¬ä¿æŒæ¦‚å¿µä¸Šçš„æ°´å¹³ï¼Œè¿™ä¸€åˆ‡éƒ½éå¸¸ç®€å•ã€‚ ä½†æ˜¯ï¼ŒJVMå¦‚ä½•åœ¨å†…éƒ¨å¤„ç†æ‰€æœ‰è¿™äº›å‘¢ï¼Ÿ  JVMå¦‚ä½•è®¡ç®—åº”è°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Ÿ <br><br> æˆ‘ä»¬è¿˜çŸ¥é“é‡è½½æ–¹æ³•ä¸ç§°ä¸ºå¤šæ€æ–¹æ³•ï¼Œè€Œæ˜¯åœ¨ç¼–è¯‘æ—¶è§£æçš„ã€‚ å°½ç®¡æœ‰æ—¶æ–¹æ³•é‡è½½ç§°ä¸º<b>ç¼–è¯‘æ—¶å¤šæ€æ€§æˆ–æ—©æœŸ/é™æ€ç»‘å®š</b> ã€‚ <br><br> é‡å†™çš„æ–¹æ³•ï¼ˆé‡å†™ï¼‰åœ¨è¿è¡Œæ—¶è§£æï¼Œå› ä¸ºç¼–è¯‘å™¨ä¸çŸ¥é“åˆ†é…ç»™é“¾æ¥çš„å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨é‡å†™çš„æ–¹æ³•ã€‚ <br><br><h3> ç‰©ç†è§’åº¦ </h3><br> åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å°è¯•ä¸ºä¸Šè¿°æ‰€æœ‰é™ˆè¿°å¯»æ‰¾â€œç‰©ç†â€è¯æ®ã€‚ ä¸ºæ­¤ï¼Œè¯·æŸ¥çœ‹é€šè¿‡è¿è¡Œ<code>javap -verbose OverridingInternalExample</code>å¯ä»¥è·å¾—çš„å­—èŠ‚ç ã€‚  <code>-verbose</code>å‚æ•°å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿè·å¾—ä¸æˆ‘ä»¬çš„Javaç¨‹åºç›¸å¯¹åº”çš„æ›´ç›´è§‚çš„å­—èŠ‚ç ã€‚ <br><br> ä¸Šé¢çš„å‘½ä»¤å°†æ˜¾ç¤ºå­—èŠ‚ç çš„ä¸¤ä¸ªéƒ¨åˆ†ã€‚ <br><br>  <b>1.å¸¸é‡æ± </b> ã€‚ å®ƒåŒ…å«äº†è¿è¡Œç¨‹åºæ‰€éœ€çš„å‡ ä¹æ‰€æœ‰å†…å®¹ã€‚ ä¾‹å¦‚ï¼Œæ–¹æ³•å¼•ç”¨ï¼ˆ <code>#Methodref</code> ï¼‰ï¼Œç±»ï¼ˆ <code>#Class</code> ï¼‰ï¼Œå­—ç¬¦ä¸²æ–‡å­—ï¼ˆ <code>#String</code> ï¼‰ã€‚ <br><br><img src="https://habrastorage.org/webt/k7/nf/x7/k7nfx7oupro69w7nazss_icos9o.png"><br><br>  <b>2.ç¨‹åºçš„å­—èŠ‚ç ã€‚</b> å¯æ‰§è¡Œå­—èŠ‚ç æŒ‡ä»¤ã€‚ <br><br><img src="https://habrastorage.org/webt/6c/1y/5g/6c1y5gzslpkiodz_w7b7zh10yzw.png"><br><br><h3> ä¸ºä»€ä¹ˆæ–¹æ³•é‡è½½ç§°ä¸ºé™æ€ç»‘å®š </h3><br> åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œç¼–è¯‘å™¨è®¤ä¸ºå°†ä»<code>Mammal</code>ç±»ä¸­è°ƒç”¨<code>humanMammal.speak()</code>æ–¹æ³•ï¼Œå°½ç®¡åœ¨è¿è¡Œæ—¶å°†ä»<code>humanMammal</code>å¼•ç”¨çš„å¯¹è±¡ä¸­<code>humanMammal</code>å®ƒ-è¿™å°†æ˜¯<code>Human</code>ç±»çš„å¯¹è±¡ã€‚ <br><br> æŸ¥çœ‹æˆ‘ä»¬çš„ä»£ç å’Œ<code>javap</code>çš„ç»“æœï¼Œæˆ‘ä»¬çœ‹åˆ°ä½¿ç”¨äº†ä¸åŒçš„å­—èŠ‚ç æ¥è°ƒç”¨æ–¹æ³•<code>humanMammal.speak()</code> ï¼Œ <code>human.speak()</code>å’Œ<code>human.speak("Hindi")</code> ï¼Œå› ä¸ºç¼–è¯‘å™¨å¯ä»¥æ ¹æ®ç±»å¼•ç”¨æ¥åŒºåˆ†å®ƒä»¬ã€‚ <br><br> å› æ­¤ï¼Œåœ¨æ–¹æ³•è¿‡è½½çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨èƒ½å¤Ÿåœ¨ç¼–è¯‘æ—¶è¯†åˆ«å­—èŠ‚ç æŒ‡ä»¤å’Œæ–¹æ³•åœ°å€ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå°†å…¶ç§°ä¸º<b>é™æ€é“¾æ¥æˆ–ç¼–è¯‘æ—¶å¤šæ€æ€§çš„åŸå› ã€‚</b> <br><br><h3> ä¸ºä»€ä¹ˆæ–¹æ³•é‡å†™ç§°ä¸ºåŠ¨æ€ç»‘å®š </h3><br> è¦è°ƒç”¨<code>anyMammal.speak()</code>å’Œ<code>humanMammal.speak()</code>æ–¹æ³•ï¼Œå­—èŠ‚ç æ˜¯ç›¸åŒçš„ï¼Œå› ä¸ºä»ç¼–è¯‘å™¨çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸¤ç§æ–¹æ³•éƒ½æ˜¯é’ˆå¯¹<code>Mammal</code>ç±»è°ƒç”¨çš„ï¼š <br><br><pre> <code class="plaintext hljs">invokevirtual #4 // Method org/programming/mitra/exercises/OverridingInternalExample$Mammal.speak:()V</code> </pre> <br> æ‰€ä»¥ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœä¸¤ä¸ªè°ƒç”¨éƒ½å…·æœ‰ç›¸åŒçš„å­—èŠ‚ç ï¼Œé‚£ä¹ˆJVMå¦‚ä½•çŸ¥é“è¦è°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Ÿ <br><br> ç­”æ¡ˆéšè—åœ¨å­—èŠ‚ç æœ¬èº«å’Œ<code>invokevirtual</code>æŒ‡ä»¤ä¸­ã€‚ æ ¹æ®JVMè§„èŒƒ<i>ï¼ˆè¯‘è€…æ³¨ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å‚è€ƒJVMè§„èŒƒ2.11.8</a> ï¼‰</i> ï¼š <br><blockquote>  invokevirtualæŒ‡ä»¤é€šè¿‡åˆ†æ´¾å¯¹è±¡çš„ï¼ˆè™šæ‹Ÿï¼‰ç±»å‹æ¥è°ƒç”¨å®ä¾‹æ–¹æ³•ã€‚ è¿™æ˜¯Javaç¼–ç¨‹è¯­è¨€ä¸­æ–¹æ³•çš„å¸¸è§„åˆ†é…ã€‚ </blockquote>  JVMä½¿ç”¨<code>invokevirtual</code>åœ¨Javaæ–¹æ³•ä¸­è°ƒç”¨ç­‰æ•ˆäºC ++è™šæ‹Ÿæ–¹æ³•çš„æ–¹æ³•ã€‚ åœ¨C ++ä¸­ï¼Œè¦è¦†ç›–å¦ä¸€ä¸ªç±»ä¸­çš„æ–¹æ³•ï¼Œå¿…é¡»å°†è¯¥æ–¹æ³•å£°æ˜ä¸ºvirtualã€‚ ä½†æ˜¯åœ¨Javaä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½æ˜¯è™šæ‹Ÿçš„ï¼ˆæœ€ç»ˆå’Œé™æ€æ–¹æ³•é™¤å¤–ï¼‰ï¼Œå› æ­¤åœ¨å­ç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¦†ç›–ä»»ä½•æ–¹æ³•ã€‚ <br><br>  <code>invokevirtual</code>æŒ‡ä»¤é‡‡ç”¨æŒ‡å‘è¦è°ƒç”¨çš„æ–¹æ³•çš„æŒ‡é’ˆï¼ˆï¼ƒ4æ˜¯å¸¸é‡æ± ä¸­çš„ç´¢å¼•ï¼‰ã€‚ <br><br><pre> <code class="java hljs">invokevirtual #<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-comment"><span class="hljs-comment">// Method org/programming/mitra/exercises/OverridingInternalExample$Mammal.speak:()V</span></span></code> </pre> <br> ä½†æ˜¯å‚è€ƒæ–‡çŒ®ï¼ƒ4è¿›ä¸€æ­¥å¼•ç”¨äº†å¦ä¸€ä¸ªæ–¹æ³•å’Œç±»ã€‚ <br><br><pre> <code class="java hljs">#<span class="hljs-number"><span class="hljs-number">4</span></span> = Methodref #<span class="hljs-number"><span class="hljs-number">2</span></span>.#<span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-comment"><span class="hljs-comment">// org/programming/mitra/exercises/OverridingInternalExample$Mammal.speak:()V #2 = Class #25 // org/programming/mitra/exercises/OverridingInternalExample$Mammal #25 = Utf8 org/programming/mitra/exercises/OverridingInternalExample$Mammal #27 = NameAndType #35:#17 // speak:()V #35 = Utf8 speak #17 = Utf8 ()V</span></span></code> </pre> <br> æ‰€æœ‰è¿™äº›é“¾æ¥ä¸€èµ·ä½¿ç”¨ä»¥è·å¾—å¯¹æ–¹æ³•å’Œæ‰€éœ€æ–¹æ³•æ‰€åœ¨çš„ç±»çš„å¼•ç”¨ã€‚  JVMè§„èŒƒä¸­ä¹Ÿæåˆ°äº†è¿™ä¸€ç‚¹ï¼ˆ <i>è¯‘è€…æ³¨ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯¹JVMè§„èŒƒ2.7çš„å¼•ç”¨</a></i> ï¼‰ï¼š <br><blockquote>  Javaè™šæ‹Ÿæœºä¸éœ€è¦ä»»ä½•ç‰¹å®šçš„å¯¹è±¡å†…éƒ¨ç»“æ„ã€‚ </blockquote><blockquote> åœ¨Oracleçš„ä¸€äº›Javaè™šæ‹Ÿæœºå®ç°ä¸­ï¼Œå¯¹ç±»å®ä¾‹çš„å¼•ç”¨æ˜¯å¯¹å¤„ç†ç¨‹åºçš„å¼•ç”¨ï¼Œè¯¥å¤„ç†ç¨‹åºæœ¬èº«ç”±ä¸€å¯¹é“¾æ¥ç»„æˆï¼šä¸€ä¸ªæŒ‡å‘å¯¹è±¡æ–¹æ³•è¡¨ï¼Œä¸€ä¸ªæŒ‡å‘è¡¨ç¤ºå¯¹è±¡ç±»å‹çš„Classå¯¹è±¡çš„æŒ‡é’ˆï¼Œå¦ä¸€ä¸ªæŒ‡å‘åŒºåŸŸåŒ…å«å¯¹è±¡æ•°æ®çš„å †ä¸Šçš„æ•°æ®ã€‚ </blockquote><br> è¿™æ„å‘³ç€æ¯ä¸ªå¼•ç”¨å˜é‡éƒ½åŒ…å«ä¸¤ä¸ªéšè—çš„æŒ‡é’ˆï¼š <br><br><ol><li> æŒ‡å‘åŒ…å«è¯¥å¯¹è±¡çš„æ–¹æ³•çš„è¡¨çš„æŒ‡é’ˆå’Œä¸€ä¸ªæŒ‡å‘<code>Class</code>å¯¹è±¡çš„æŒ‡é’ˆï¼Œä¾‹å¦‚<code>[speak(), speak(String) Class object]</code> </li><li> æŒ‡å‘å †ä¸Šåˆ†é…ç»™å¯¹è±¡æ•°æ®ï¼ˆä¾‹å¦‚å¯¹è±¡å­—æ®µå€¼ï¼‰çš„å†…å­˜çš„æŒ‡é’ˆã€‚ </li></ol><br> ä½†æ˜¯ï¼Œé—®é¢˜å†æ¬¡å‡ºç°ï¼šå¦‚ä½•åœ¨æ­¤æ–¹é¢è¿›è¡Œ<code>invokevirtual</code> ï¼Ÿ ä¸å¹¸çš„æ˜¯ï¼Œæ²¡æœ‰äººå¯ä»¥å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºè¿™å®Œå…¨å–å†³äºJVMçš„å®ç°ï¼Œå¹¶ä¸”å› JVMè€Œå¼‚ã€‚ <br><br> æ ¹æ®ä»¥ä¸Šæ¨ç†ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œå¯¹ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨é—´æ¥åŒ…å«æŒ‡å‘è¯¥è¡¨çš„é“¾æ¥/æŒ‡é’ˆï¼Œè¯¥è¡¨åŒ…å«å¯¹è¯¥å¯¹è±¡æ–¹æ³•çš„æ‰€æœ‰å¼•ç”¨ã€‚  Javaä»C ++å€Ÿç”¨äº†è¿™ä¸ªæ¦‚å¿µã€‚ è¯¥è¡¨ä»¥å„ç§åç§°ä¼—æ‰€å‘¨çŸ¥ï¼Œä¾‹å¦‚<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è™šæ‹Ÿæ–¹æ³•è¡¨ï¼ˆVMTï¼‰ï¼Œè™šæ‹ŸåŠŸèƒ½è¡¨ï¼ˆvftableï¼‰ï¼Œè™šæ‹Ÿè¡¨ï¼ˆvtableï¼‰ï¼Œè°ƒåº¦è¡¨</a> ã€‚ <br><br> æˆ‘ä»¬ä¸ç¡®å®švtableå¦‚ä½•ç”¨Javaå®ç°ï¼Œå› ä¸ºå®ƒå–å†³äºç‰¹å®šçš„JVMã€‚ ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é¢„æœŸè¯¥ç­–ç•¥å°†ä¸C ++ä¸­çš„ç­–ç•¥å¤§è‡´ç›¸åŒï¼Œå…¶ä¸­vtableæ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„ç»“æ„ï¼Œå…¶ä¸­åŒ…å«æ–¹æ³•åç§°åŠå…¶å¼•ç”¨ã€‚ æ¯å½“JVMå°è¯•æ‰§è¡Œè™šæ‹Ÿæ–¹æ³•æ—¶ï¼Œå®ƒéƒ½ä¼šåœ¨vtableä¸­è¯·æ±‚å…¶åœ°å€ã€‚ <br><br> å¯¹äºæ¯ä¸ªç±»ï¼Œåªæœ‰ä¸€ä¸ªvtableï¼Œè¿™æ„å‘³ç€è¯¥è¡¨æ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”å¯¹äºè¯¥ç±»çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ç›¸åŒçš„ï¼Œç±»ä¼¼äºClasså¯¹è±¡ã€‚ ç±»å¯¹è±¡åœ¨æ–‡ç« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸ºä»€ä¹ˆå¤–éƒ¨Javaç±»ä¸èƒ½æ˜¯é™æ€çš„</a>ä»¥åŠ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸ºä»€ä¹ˆJavaæ˜¯çº¯é¢å‘å¯¹è±¡çš„è¯­è¨€æˆ–ä¸ºä»€ä¹ˆä¸æ˜¯è¿™æ ·</a>çš„æ–‡ç« ä¸­æœ‰æ›´è¯¦ç»†çš„è®¨è®ºã€‚ <br><br> å› æ­¤ï¼Œ <code>Object</code>ç±»åªæœ‰ä¸€ä¸ªvtableï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰11ç§æ–¹æ³•ï¼ˆå¦‚æœä¸è€ƒè™‘<code>registerNatives</code>è¯ï¼‰ä»¥åŠä¸å®ƒä»¬çš„å®ç°ç›¸å¯¹åº”çš„é“¾æ¥ã€‚ <br><br><img src="https://habrastorage.org/webt/n1/ky/hy/n1kyhyiy2gta8yqfnkns5z_8swy.png"><br><br> å½“JVMå°†Mammalç±»åŠ è½½åˆ°å†…å­˜ä¸­æ—¶ï¼Œå®ƒå°†ä¸ºå…¶åˆ›å»ºä¸€ä¸ª<code>Class</code>å¯¹è±¡å¹¶åˆ›å»ºä¸€ä¸ªvtableï¼Œè¯¥vtableåŒ…å«<code>Object</code>ç±»çš„vtableä¸­å…·æœ‰ç›¸åŒå¼•ç”¨çš„æ‰€æœ‰æ–¹æ³•ï¼ˆå› ä¸º<code>Mammal</code>ä¸ä¼šè¦†ç›–<code>Object</code>çš„æ–¹æ³•ï¼‰ï¼Œå¹¶ä¸º<code>speak()</code>æ–¹æ³•æ·»åŠ æ–°æ¡ç›®ã€‚ <br><br><img src="https://habrastorage.org/webt/ab/wb/pg/abwbpgthcjjnzyjhzbpvi-kpzsw.png"><br><br> ç„¶åï¼Œè¿›å…¥<code>Human</code>ç±»çš„ç±»ï¼Œå¹¶ä¸”JVMå°†æ‰€æœ‰æ¡ç›®ä»<code>Mammal</code>ç±»çš„vtableå¤åˆ¶åˆ°<code>Human</code>ç±»çš„vtableï¼Œå¹¶ä¸º<code>speak(String)</code>çš„é‡è½½ç‰ˆæœ¬æ·»åŠ æ–°æ¡ç›®ã€‚ <br><br>  JVMçŸ¥é“<code>Human</code>ç±»é‡å†™äº†ä¸¤ä¸ªæ–¹æ³•ï¼š <code>Object</code> <code>toString()</code>å’Œ<code>Mammal</code> <code>speak()</code> ã€‚ ç°åœ¨ï¼Œå¯¹äºè¿™äº›æ–¹æ³•ï¼ŒJVMä¸å†ä½¿ç”¨æ›´æ–°çš„é“¾æ¥æ¥åˆ›å»ºæ–°è®°å½•ï¼Œè€Œæ˜¯å°†é“¾æ¥æ›´æ”¹ä¸ºä»¥å‰å­˜åœ¨å®ƒä»¬çš„ç›¸åŒç´¢å¼•ä¸­ç°æœ‰æ–¹æ³•çš„é“¾æ¥ï¼Œå¹¶ä¿ç•™ç›¸åŒçš„æ–¹æ³•åç§°ã€‚ <br><br><img src="https://habrastorage.org/webt/qv/qj/zy/qvqjzyrkzsg26tvb3kxqfr56ooe.png"><br><br>  <code>invokevirtual</code>æŒ‡ä»¤ä½¿JVMå¤„ç†å¯¹æ–¹æ³•4çš„å¼•ç”¨ä¸­çš„å€¼ï¼Œè€Œä¸æ˜¯ä½œä¸ºåœ°å€ï¼Œè€Œæ˜¯ä½œä¸ºè¦åœ¨vtableä¸­æŸ¥æ‰¾å½“å‰å¯¹è±¡çš„æ–¹æ³•çš„åç§°ã€‚ <br> æˆ‘å¸Œæœ›ç°åœ¨å¯ä»¥æ›´æ¸…æ¥šåœ°äº†è§£JVMå¦‚ä½•ä½¿ç”¨å¸¸é‡æ± å’Œè™šæ‹Ÿæ–¹æ³•è¡¨æ¥ç¡®å®šè¦è°ƒç”¨çš„æ–¹æ³•ã€‚ <br> æ‚¨å¯ä»¥åœ¨<a href="">Github</a>å­˜å‚¨åº“ä¸­æ‰¾åˆ°ç¤ºä¾‹ä»£ç ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN467197/">https://habr.com/ru/post/zh-CN467197/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN467185/index.html">ä¸‹å¡å¡åº¦</a></li>
<li><a href="../zh-CN467187/index.html">åˆ›å»ºæœ€æ–°çš„æŠ€æœ¯åº“</a></li>
<li><a href="../zh-CN467189/index.html">æ¸©åº¦é‡‡æ ·</a></li>
<li><a href="../zh-CN467191/index.html">æˆ‘ä»¬å¦‚ä½•åˆ¶ä½œVivaldi for Android</a></li>
<li><a href="../zh-CN467193/index.html">å¸¦æœ‰â€œå¤©å ‚ä¹‹é—¨â€çš„çŸ¿å·¥ç—…æ¯’</a></li>
<li><a href="../zh-CN467199/index.html">æ±¤å§†Â·äº¨ç‰¹æ—¥è®°ï¼šã€Šå·´æ–¯å…‹ç»´å°”çŒçŠ¬ã€‹</a></li>
<li><a href="../zh-CN467201/index.html">CacheBrowserå®éªŒï¼šä½¿ç”¨å†…å®¹ç¼“å­˜ç»•è¿‡æ²¡æœ‰ä»£ç†çš„ä¸­æ–‡é˜²ç«å¢™</a></li>
<li><a href="../zh-CN467203/index.html">ä»…ä»…è¿›è¡Œé™¤æ³•è¿ç®—ï¼Œæˆ–å¦‚ä½•åˆ›å»ºæ•°å­¦ç†è®ºå¹¶ä»ä¸­è·å¾—40ä¸‡ç¾å…ƒã€‚ ç³»åˆ—äºŒï¼Œå€’æ•°ç¬¬äºŒ</a></li>
<li><a href="../zh-CN467205/index.html">æˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªå°†æ•°æ®å‘é€åˆ°å…¶ä»–åº”ç”¨ç¨‹åºçš„åº”ç”¨ç¨‹åºï¼ˆç”Ÿæ€ç³»ç»Ÿåº”ç”¨ç¨‹åºï¼‰</a></li>
<li><a href="../zh-CN467207/index.html">äº”ç§å‰æ™¯å…‰æ˜çš„ç¼–ç¨‹è¯­è¨€ï¼ˆä¸‰å¹´åï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>