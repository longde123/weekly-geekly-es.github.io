<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•Ñ üë©üèæ‚Äçü§ù‚Äçüë®üèø üßúüèΩ Jira an Ihre Bed√ºrfnisse anpassen. Perfekter Flow und perfektes Ticket üï¥Ô∏è ü•ã ‚úäüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wenn Sie in einem IT-Unternehmen arbeiten, basieren Ihre Prozesse h√∂chstwahrscheinlich auf dem bekannten Atlassian-Produkt Jira. Es gibt viele Task-Tr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Jira an Ihre Bed√ºrfnisse anpassen. Perfekter Flow und perfektes Ticket</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/424655/"><img src="https://habrastorage.org/webt/wm/nq/on/wmnqonj46aq2yavvhzsepa06qjo.jpeg"><br><br>  Wenn Sie in einem IT-Unternehmen arbeiten, basieren Ihre Prozesse h√∂chstwahrscheinlich auf dem bekannten Atlassian-Produkt Jira.  Es gibt viele Task-Tracker auf dem Markt, um dieselben Probleme zu l√∂sen, einschlie√ülich Open-Source-L√∂sungen (Trac, Redmine, Bugzilla), aber vielleicht wird Jira heute am h√§ufigsten verwendet. <br><br>  Mein Name ist Dmitry Semenikhin, ich bin Teamleiter bei Badoo.  In einer kurzen Artikelserie werde ich Ihnen genau erkl√§ren, wie wir Jira verwenden, wie wir es f√ºr unsere Prozesse angepasst haben, welche guten Dinge oben ‚Äûverschraubt‚Äú wurden und wie wir den Issue Tracker zu einem einzigen Kommunikationszentrum f√ºr diese Aufgabe gemacht und unser Leben vereinfacht haben.  In diesem Artikel sehen Sie unseren Ablauf im Inneren, erfahren, wie Sie Ihren Jira ‚Äûdrehen‚Äú k√∂nnen, und lesen zus√§tzliche Funktionen des Tools, die Sie m√∂glicherweise nicht kennen. <br><br>  Der Artikel richtet sich in erster Linie an diejenigen, die Jira bereits verwenden, jedoch m√∂glicherweise Schwierigkeiten haben, seine Standardfunktionen in vorhandene Prozesse im Unternehmen zu integrieren.  Der Artikel kann auch f√ºr Unternehmen n√ºtzlich sein, die andere Task-Tracker verwenden, jedoch auf einige Einschr√§nkungen gesto√üen sind und eine √Ñnderung der Entscheidung in Betracht ziehen.  Der Artikel basiert nicht auf dem Prinzip der ‚ÄûProbleml√∂sung‚Äú. Darin beschreibe ich die vorhandenen Tools und Funktionen, die wir rund um Jira entwickelt haben, sowie die Technologien, mit denen wir sie implementiert haben. <br><a name="habracut"></a><br><h1>  Zus√§tzliche Funktionen von Jira </h1><br>  Um den folgenden Text verst√§ndlicher zu machen, wollen wir herausfinden, welche Tools Jira uns f√ºr die Implementierung nicht standardm√§√üiger Wunschliste zur Verf√ºgung stellt - solche, die √ºber die Standard-Jira-Funktionalit√§t hinausgehen. <br><br><h3>  REST-API </h3><br>  Im Allgemeinen ist ein API-Befehlsaufruf eine HTTP-Anforderung an eine API-URL, die die Methode (GET, PUT, POST und DELETE), den Befehl und den Anforderungshauptteil angibt.  Der Anforderungshauptteil sowie die API-Antwort liegen im JSON-Format vor.  Ein Beispiel f√ºr eine Anforderung, die eine JSON-Darstellung eines Tickets zur√ºckgibt: <br><br><pre><code class="json hljs">GET /rest/api/latest/issue/{ticket_number}</code> </pre> <br>  Mit der API k√∂nnen Sie Skripte in jeder Programmiersprache verwenden: <br><br><ul><li>  Tickets erstellen; <br></li><li>  √Ñndern Sie alle Eigenschaften von Tickets (integriert und benutzerdefiniert). <br></li><li>  Kommentare schreiben; <br></li><li>  Verwenden von JQL (integrierte Abfragesprache) zum Empfangen von Ticketlisten; <br></li><li>  und vieles mehr. <br></li></ul><br>  Eine ausf√ºhrliche API-Dokumentation finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br>  Wir haben unseren eigenen High-Level-Jira-API-Client in PHP geschrieben, der alle erforderlichen Befehle implementiert.  Hier ist ein Beispiel f√ºr Befehle zum Arbeiten mit Kommentaren: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addComment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($issue_key, $comment)</span></span></span><span class="hljs-function"> </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_post(<span class="hljs-string"><span class="hljs-string">"issue/{$issue_key}/comment"</span></span>, [<span class="hljs-string"><span class="hljs-string">'body'</span></span> =&gt; $comment]); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateComment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($issue_key, $comment_id, $new_text)</span></span></span><span class="hljs-function"> </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_put(<span class="hljs-string"><span class="hljs-string">"issue/{$issue_key}/comment/{$comment_id}"</span></span>, [<span class="hljs-string"><span class="hljs-string">'body'</span></span> =&gt; $new_text]); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteComment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($issue_key, $comment_id)</span></span></span><span class="hljs-function"> </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_delete(<span class="hljs-string"><span class="hljs-string">"issue/{$issue_key}/comment/{$comment_id}"</span></span>); }</code> </pre><br><h3>  Webhooks </h3><br>  Mit Webhook k√∂nnen Sie den Aufruf einer externen R√ºckruffunktion auf Ihrem Host f√ºr verschiedene Ereignisse in Jira konfigurieren.  Gleichzeitig k√∂nnen Sie so viele Regeln konfigurieren, wie Sie m√∂chten, sodass verschiedene URLs f√ºr verschiedene Ereignisse und f√ºr Tickets, die dem im Webhook angegebenen Filter entsprechen, ‚Äûzucken‚Äú.  Die Webhooks-Konfigurationsoberfl√§che steht dem Jira-Administrator zur Verf√ºgung. <br><br>  Infolgedessen k√∂nnen Sie Regeln wie folgt erstellen: <br><br>  <b>Name</b> : "SRV - Neues Feature erstellt / aktualisiert" <br>  <b>URL</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">www.myremoteapp.com/webhookreceiver</a> <br>  <b>Geltungsbereich</b> : Projekt = SRV UND Eingabe ('Neues Feature') <br>  <b>Ereignisse</b> : Problem aktualisiert, Problem erstellt <br><br>  In diesem Beispiel wird die angegebene URL zum Erstellen von Tickets und zum √Ñndern von Ereignissen aufgerufen, die dem <i>Bereichsfilter</i> entsprechen.  Gleichzeitig enth√§lt der Hauptteil der Anforderung alle erforderlichen Informationen dar√ºber, was sich genau ge√§ndert hat und welches Ereignis aufgetreten ist. <br><br>  Es ist wichtig zu verstehen, dass Jira nicht garantiert, dass Ihre Veranstaltung geliefert wird.  Wenn die externe URL nicht geantwortet oder mit einem Fehler geantwortet hat, ist diese nirgendwo sichtbar (au√üer vielleicht in den Protokollen).  Daher sollte der Webhook-Ereignishandler so zuverl√§ssig wie m√∂glich sein.  Sie k√∂nnen beispielsweise Ereignisse in die Warteschlange stellen und versuchen, sie zu verarbeiten, bis sie erfolgreich sind.  Dies hilft bei der L√∂sung von Problemen mit vor√ºbergehend nicht verf√ºgbaren Diensten, z. B. einer externen Datenbank, die f√ºr die korrekte Verarbeitung des Ereignisses erforderlich ist. <br><br>  Eine ausf√ºhrliche Dokumentation zu Webhooks finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br><h3>  Scriptrunner </h3><br>  Dies ist ein Plugin f√ºr Jira, ein sehr leistungsf√§higes Tool, mit dem Sie viele Jira anpassen k√∂nnen (einschlie√ülich der M√∂glichkeit, Webhooks zu ersetzen).  Die Verwendung dieses Plugins erfordert Kenntnisse √ºber Groovy.  Der Hauptvorteil des Tools f√ºr uns besteht darin, dass Sie benutzerdefinierte Logik online in den Ablauf einbetten k√∂nnen.  Ihr Skriptcode wird sofort in der Jira-Umgebung als Reaktion auf eine bestimmte Aktion ausgef√ºhrt.  Sie k√∂nnen beispielsweise eine eigene Schaltfl√§che in der Ticketoberfl√§che erstellen. Wenn Sie darauf klicken, werden Tickets erstellt, die der aktuellen Aufgabe zugeordnet sind, oder es werden Komponententests f√ºr diese Aufgabe ausgef√ºhrt.  Und wenn pl√∂tzlich etwas schief geht, werden Sie als Benutzer sofort davon erfahren. <br><br>  Interessenten k√∂nnen die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> lesen. <br><br><h1>  Flow: Was ist unter der Haube versteckt </h1><br>  Und nun dar√ºber, wie wir zus√§tzliche Funktionen von Jira in unseren Projekten anwenden.  Betrachten Sie dies im Zusammenhang mit dem Durchlaufen unseres typischen Flow-Tickets von der Erstellung bis zum Abschluss.  Gleichzeitig erz√§hle ich Ihnen etwas √ºber den Fluss selbst. <br><br><h3>  Open / Backlog </h3><br>  Das Ticket gelangt also zun√§chst in den R√ºckstand neuer Tickets mit dem Status " <b>Offen</b> ".  Dar√ºber hinaus trifft der Komponentenleiter, der ein neues Ticket in seinem Dashboard gesehen hat, eine Entscheidung: <b>Weisen</b> Sie dem Entwickler sofort ein Ticket zu oder senden Sie es an das Backlog bekannter Tickets ( <b>Backlog-</b> Status), damit Sie es sp√§ter zuweisen k√∂nnen, wenn ein kostenloser Entwickler erscheint und Tickets mit h√∂herer Priorit√§t geschlossen werden.  Dies mag seltsam erscheinen, da es logisch erscheint, das Gegenteil zu tun: Tickets im <i>Backlog-</i> Status erstellen und dann in den Open-Status √ºbersetzen.  Aber genau dieses Schema haben wir verwurzelt.  Sie k√∂nnen Filter einfach konfigurieren, um die Entscheidungszeit f√ºr neue Tickets zu verk√ºrzen.  Ein Beispiel f√ºr einen JQL-Filter, der neue Aufgaben f√ºr einen Lead anzeigt: <br><br> <code>Project = SRV AND assignee is EMPTY AND status in (Open)</code> <br> <br><h3>  In Bearbeitung </h3><br><div class="spoiler">  <b class="spoiler_title">Technische Nuancen der Arbeit mit Git</b> <div class="spoiler_text">  Es ist zu beachten, dass wir an jeder Aufgabe in einem separaten Git-Zweig arbeiten.  Wir haben uns darauf geeinigt, dass der Filialname am Anfang die Ticketnummer enthalten soll.  Zum Beispiel <i>SRV-123_new_super_feature</i> .  Au√üerdem sollten Kommentare f√ºr jedes Commit in der Zweigstelle die Ticketnummer im Format [SRV-123] enthalten: {comment}.  Wir brauchen ein solches Format zum Beispiel, um eine ‚Äûschlechte‚Äú Aufgabe korrekt aus einem Build zu entfernen.  Wie dies gemacht wird, wird im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel</a> ausf√ºhrlich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">beschrieben</a> . <br><br>  Diese Anforderungen werden von Git-Hooks gesteuert.  Hier ist beispielsweise der Inhalt von prepare-commit-msg, das einen Kommentar f√ºr das Commit vorbereitet und die Ticketnummer aus dem Namen der aktuellen Zweigstelle abruft: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash b=`git symbolic-ref HEAD| sed -e 's|^refs/heads/||' | sed -e 's|_.*||'` c=`cat $1` if [ -n "$b" ] &amp;&amp; [[ "$c" != "[$b]:"* ]] then echo "[$b]: $c" &gt; $1 fi</span></span></code> </pre><br>  Wenn Sie versuchen, ein Commit mit einem ‚Äûfalschen‚Äú Kommentar zu pushen, wird ein solcher Push abgelehnt.  Ein Versuch, zu Beginn eine Filiale ohne Ticketnummer zu er√∂ffnen, wird ebenfalls abgelehnt. <br></div></div><br>  Wenn ein Ticket den Entwickler trifft, zerlegt er es als erstes.  Das Ergebnis der Zerlegung ist die Idee des Entwicklers, wie das Problem gel√∂st werden kann und wie lange die L√∂sung dauern wird.  Nachdem alle wichtigen Details gekl√§rt wurden, wird das Ticket in den Status " <b>In Bearbeitung" versetzt</b> und der Entwickler beginnt mit dem Schreiben von Code. <br><br>  Es ist √ºblich, dass wir das F√§lligkeitsdatum f√ºr die Aufgabe zu dem Zeitpunkt festlegen, zu dem sie in den Status "In Bearbeitung" versetzt wird.  Wenn der Entwickler dies nicht getan hat, erh√§lt er eine Erinnerung im HipChat Corporate Messenger.  Alle zwei Stunden ein spezielles Skript: <br><br><ul><li>  Bei Verwendung der Jira REST-API werden Tickets im <i>Status "In</i> Bearbeitung" mit einem leeren Feld f√ºr das F√§lligkeitsdatum ausgew√§hlt ( <i>Projekt = SRV UND Status = "In Bearbeitung" UND Duedat ist LEER</i> ). <br></li><li>  w√§hlt unvollst√§ndige Tickets mit einem F√§lligkeitsdatum aus, das √§lter als das aktuelle Datum ist ( <i>Projekt = SRV UND Status = 'In</i> <i>Bearbeitung</i> <i>'</i> <i>UND duedate ist nicht leer UND duedate &lt;now ()</i> ); <br></li><li>  erkennt den Entwickler f√ºr jedes Ticket, indem er das entsprechende Feld im Ticket sowie den Lead des Entwicklers liest; <br></li><li>  gruppiert Tickets von Entwicklern und Leads und sendet mithilfe der API Erinnerungen an HipChat. <br></li></ul><br>  Nachdem der Entwickler alle erforderlichen Festschreibungen vorgenommen hat, schiebt er den Zweig in eine gemeinsame R√ºbe.  In diesem Fall wird der Git-Hook nach dem Empfang ausgel√∂st, was viele interessante Dinge bewirkt: <br><br><ul><li>  Der Name des Git-Zweigs sowie Kommentare zu Commits werden auf √úbereinstimmung mit unseren Regeln √ºberpr√ºft. <br></li><li>  Es wird √ºberpr√ºft, ob das Ticket, dem die Filiale zugeordnet ist, nicht geschlossen ist (Sie k√∂nnen keinen neuen Code in geschlossene Tickets √ºbertragen). <br></li><li>  Die Syntax der ge√§nderten PHP-Dateien wird √ºberpr√ºft (PHP -l <i>Dateiname.php</i> ); <br></li><li>  Formatierung ist aktiviert; <br></li><li>  Befindet sich das Ticket, in das die Filiale verschoben wird, im Status " <i>Offen</i> ", wird es automatisch in den Status " <i>In Bearbeitung</i> " versetzt. <br></li><li>  Das Ticket wird an die Zweigstelle angeh√§ngt. Der entsprechende Eintrag erfolgt √ºber die Jira-API im benutzerdefinierten Feld des <i>Commits-</i> Tickets.  Es sieht so aus: <br></li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sn/yt/-u/snyt-ud30nzzbgr4seaehcccnme.png"></div><br>  ( <i>branchdiff</i> ist ein Link zu diff des Zweigs mit dem Kopf, von dem der aktuelle Zweig in unserem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Codeisok-Code√ºberpr√ºfungstool</a> stammt.) <br><br><ul><li>  Im Ticket wird ein Kommentar mit allen Commits in diesem Push erstellt. <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5p/np/28/5pnp284b9eobeeyafn3hfjgcimu.png"></div><br>  <i>(Aida ist der bedingte Name unseres Automatisierungskomplexes f√ºr die Arbeit mit Jira, Git und nicht nur. Von diesem Namen aus erscheinen automatische Kommentare im Ticket. Wir haben im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel</a> mehr √ºber Aida geschrieben.)</i> <br>  Ein Klick auf den Hash des Commits √∂ffnet diff mit der vorherigen Revision des Zweigs (ich werde unten zeigen, wie es aussieht); <br></li><li>  Es wird gepr√ºft, ob sich in der Verzweigung Dateien befinden, f√ºr die m√∂glicherweise eine √úbersetzung in unterst√ºtzte Sprachen erforderlich ist (z. B. Webseitenvorlagen). Wenn solche vorhanden sind, wird der neue Wert \ Ge√§ndert auf das benutzerdefinierte Feld des Lexems-Tickets gesetzt.  Dies stellt sicher, dass das Ticket ohne eine vollst√§ndige √úbersetzung nicht in Produktion geht. <br></li><li>  Der Name des Mitarbeiters, der den Zweig pusht, wird der Liste der Entwickler hinzugef√ºgt (ein benutzerdefiniertes Feld des <i>Entwicklertickets</i> ). <br></li></ul><br><h3>  Bei √úberpr√ºfung </h3><br>  Nachdem der Code geschrieben und sichergestellt wurde, dass alle Anforderungen f√ºr die Aufgabe erf√ºllt sind und die Tests nicht unterbrochen wurden, weist der Entwickler dem Pr√ºfer ein Ticket zu (Status " <b>Bei √úberpr√ºfung</b> ").  In der Regel entscheidet der Entwickler, wer sein Ticket √ºberpr√ºft.  H√∂chstwahrscheinlich wird es ein anderer Entwickler sein, der sich mit dem richtigen Teil des Codes auskennt.  Die √úberpr√ºfung erfolgt mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Codeisok-</a> Tool, das sofort mit dem gew√ºnschten Diff <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ge√∂ffnet wird</a> , indem Sie auf den <i>Branchdiff-</i> Link im <i>Feld Commits-</i> Ticket oder auf den Kommentar als Commit-Hash in den Kommentaren klicken. <br><br>  Der Rezensent sieht ungef√§hr so: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ty/eg/ti/tyegti15pqhzbdgiebcw1evm8pi.png"></div><br>  Nach Abschluss der √úberpr√ºfung dr√ºckt der <i>Pr√ºfer auf die</i> Schaltfl√§che <i>Fertig stellen. In</i> diesem Moment geschieht unter anderem Folgendes: <br><br><ul><li>  Mithilfe der JIra-API wird im Ticket ein Kommentar mit Kommentaren des √úberpr√ºfers im Kontext des Codes erstellt.  Es sieht ungef√§hr so ‚Äã‚Äãaus: <br></li></ul><br><img src="https://habrastorage.org/webt/0k/n6/ka/0kn6kaydki4umhdxzmjebixy6eu.png"><br><ul><li>  Wenn der Code kommentiert wurde und der Pr√ºfer beschlossen hat, das Ticket erneut zu √∂ffnen, erh√§lt der Entwickler eine Benachrichtigung in HipChat (dies erfolgt mithilfe der Webhook-Regel, die beim erneuten √ñffnen funktioniert). <br></li><li>  Das Feld f√ºr das <i>Reviewers-</i> Ticket wird ausgef√ºllt. <br></li></ul><br><h3>  Gel√∂st </h3><br>  Wenn die √úberpr√ºfung erfolgreich war, wird das Ticket im Status " <b>Gel√∂st"</b> an den R√ºckstand der QS-Ingenieure gesendet.  Gleichzeitig werden mithilfe von Webhook f√ºr das aufgel√∂ste Ereignis automatische Tests des Zweigcodes im Hintergrund gestartet.  Nach einigen Minuten erscheint im Ticket ein neuer Kommentar, der Sie √ºber die Testergebnisse informiert. <br><br><img src="https://habrastorage.org/webt/um/ff/cc/umffccnuyujwg3ypdz3scdcrrou.png"><br><br>  Sie k√∂nnen auch jederzeit manuell einen wiederholten Testlauf starten, indem Sie im Ticketmen√º auf die Schaltfl√§che "Unit Unit Tests testen" klicken.  Nach einem erfolgreichen Lauf wird im Ticket ein neuer Kommentar angezeigt, √§hnlich dem vorherigen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tt/sk/65/ttsk65fr3egs9fbjpa7v6pbdzta.png"></div><br>  Tats√§chlich ist diese Schaltfl√§che einer der zus√§tzlichen Aufgabenstatus im Jira-Workflow, eine √úbersetzung, in die ein Groovy-Skript f√ºr das ScriptRunner-Plugin ausgel√∂st wird.  Das Skript ruft eine externe URL auf, die den Testlauf initiiert. Wenn die URL erfolgreich geantwortet hat, kehrt das Ticket zu seinem vorherigen Status zur√ºck (in unserem Fall " <i>Gel√∂st"</i> ). <br><br><h3>  In Shot / In Shot - OK </h3><br>  Die Aufgabe wird zun√§chst in einer Entwicklungsumgebung getestet.  Wenn alles in <i>Ordnung</i> ist, wird ein Schuss erstellt (z. B. durch Klicken auf den Link <i>Schuss erstellen</i> im Feld <i>Commits</i> ) - das Verzeichnis auf dem dedizierten Server, in das √Ñnderungen aus dem Ticket kopiert werden, die neben dem aktuellen Master liegen.  Der Server arbeitet mit Produktionsdaten: Die Datenbanken und Dienste sind dieselben, die echte Benutzer bedienen.  Auf diese Weise kann der Tester eine Website √∂ffnen oder mithilfe eines mobilen Clients eine Verbindung zum Shot herstellen und die Funktion in der Produktionsumgebung "isolieren".  "Isoliert" bedeutet, dass kein anderer Code / keine andere Funktionalit√§t au√üer dem neuen aus dem Zweig und dem aktuellen Master ausgef√ºhrt wird.  Daher ist diese Testphase m√∂glicherweise die wichtigste, da der QS-Techniker das Problem am zuverl√§ssigsten direkt im Testproblem finden kann. <br><br>  Auf Shot-Ressourcen wird √ºber spezielle URLs zugegriffen, die im Shot-Erstellungsskript generiert und mithilfe der Jira-API im Ticket-Header platziert werden.  Als Ergebnis sehen wir Links zu der Site, dem Admin-Bereich, Protokollen und anderen Tools, die in einer Shot-Umgebung ausgef√ºhrt werden: <br><br><img src="https://habrastorage.org/webt/kf/yk/e_/kfyke_qa3yjtezpyqx0-edwghfw.png"><br><br>  Au√üerdem wird zum Zeitpunkt der Shot-Generierung ein Skript gestartet, das den Inhalt der ge√§nderten Dateien analysiert und Anforderungen f√ºr die √úbersetzung der gefundenen neuen Token erstellt.  Nach Abschluss der √úbersetzung wird der Wert des <i>Lexems-</i> Felds in "Fertig" ge√§ndert und das Ticket kann dem Build hinzugef√ºgt werden. <br><br>  Wenn der Test in Shot erfolgreich war, wird das Ticket in den Status <b>In Shot - OK versetzt.</b> <br><br><h3>  In Build / In Build - OK </h3><br>  Wir laden den Code zweimal t√§glich hoch - morgens und abends.  Zu diesem Zweck wird ein spezieller Build-Zweig erstellt, der schlie√ülich mit dem Master zusammengef√ºhrt und ‚Äûim Kampf‚Äú angelegt wird. <br><br>  Zum Zeitpunkt des Erstellens des Build-Zweigs empf√§ngt ein spezielles Skript, das eine JQL-Abfrage verwendet, eine Liste von Tickets im Status <i>In Shot - OK</i> und versucht, sie im Build-Zweig einzufrieren, wenn alle folgenden Bedingungen erf√ºllt sind: <br><br><ul><li>  Die √úbersetzung f√ºr das Ticket ist abgeschlossen oder es muss nichts √ºbersetzt werden ( <i>Lexems in ('Nein', 'Fertig')</i> ). <br></li><li>  Der Entwickler ist am Arbeitsplatz anwesend (das automatische Fusionssystem pr√ºft auf der internen Basis, ob sich der Entwickler im Urlaub oder im Krankheitsurlaub befindet. In diesem Fall kann das Ticket nur manuell von Release-Ingenieuren oder einem anderen verantwortlichen Entwickler eingefroren werden, was im speziellen Feld <i>Vize-Entwickler angegeben ist</i> ; der Anf√ºhrer des abwesenden Entwicklers erh√§lt in diesem Fall eine Benachrichtigung, dass das Ticket nicht automatisch zum Build hinzugef√ºgt werden kann); <br></li><li>  F√ºr das Ticket ist das Flag " <i>Up in Build"</i> <i>vom Entwickler nicht gesetzt</i> (dies ist ein spezielles benutzerdefiniertes Feld des Tickets, mit dem der Entwickler bestimmen kann, wann das Ticket zum Build gesendet wird). <br></li><li>  Die Ticketfiliale h√§ngt nicht von einer anderen Filiale ab, die den Master oder den aktuellen Build noch nicht erreicht hat.  Wir tun unser Bestes, um eine solche Situation zu vermeiden. Manchmal geschieht dies jedoch, wenn der Entwickler seine eigene Filiale nicht vom Master, sondern von einer Filiale eines anderen Tickets erstellt oder wenn er eine andere Filiale f√ºr sich selbst einfriert.  Dies kann auch zuf√§llig geschehen, daher haben wir beschlossen, dass zus√§tzlicher Schutz nicht schaden w√ºrde. <br></li></ul><br>  Es ist zu beachten, dass aufgrund eines Zusammenf√ºhrungskonflikts m√∂glicherweise keine automatische Zusammenf√ºhrung erfolgt.  In diesem Fall wird das Ticket automatisch in den <b>Wiederer√∂ffnungsstatus versetzt</b> und dem Entwickler zugewiesen, √ºber den er sofort eine Benachrichtigung in HipChat erh√§lt, und dem <b>Ticketkommentar wird</b> eine entsprechende Nachricht hinzugef√ºgt.  Nach der L√∂sung des Konflikts kehrt das Ticket zum Build zur√ºck. <br><br>  Wenn alles in Ordnung ist und der <i>Ticketzweig</i> <b>im Build</b> eingefroren ist, wird das Ticket automatisch in den Status <b>In Build √ºbertragen</b> , und der Name des <i>Builds</i> wird in das benutzerdefinierte Feld des <i>Build_Name-</i> Tickets geschrieben. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/bl/cq/teblcqsgvc0tgn82svazpssgmii.png"></div><br>  Mit diesem Wert ist es au√üerdem einfach, eine Liste der Tickets zu erhalten, die mit jedem Build ver√∂ffentlicht wurden.  Zum Beispiel, um nach jemandem zu suchen, der die Schuld tr√§gt, wenn etwas schief gelaufen ist. <br><br>  In der n√§chsten Phase pr√ºfen die QS-Ingenieure zus√§tzlich, ob der Aufgabencode in Verbindung mit anderen Aufgaben im Build ordnungsgem√§√ü funktioniert.  Wenn alles in <b>Ordnung</b> ist, wird das Ticket manuell auf <b>In Build - OK gesetzt.</b> <br><br><h3>  In Produktion / In Produktion - OK / Geschlossen </h3><br>  W√§hrend des Builds wird unser gesamter Testsatz ausgef√ºhrt (Einheit, Integration, Selen usw.).  Wenn alles in Ordnung ist, wird der Build im Master eingefroren und der Code f√ºr die Produktion ausgelegt.  Das Ticket wird in den Status <b>On Production versetzt.</b> <br><br>  Au√üerdem stellt der Entwickler (oder der Kunde) sicher, dass die Funktion in der Produktion ordnungsgem√§√ü funktioniert, und setzt den Ticketstatus <b>In der Produktion - OK.</b> <br><br>  Nach zwei Wochen werden Tickets im Status <i>On Production - OK</i> automatisch in den Status <b>Closed versetzt</b> , wenn dies zuvor noch nicht manuell durchgef√ºhrt wurde. <br><br>  Erw√§hnenswert sind auch zus√§tzliche Status, in denen sich das Ticket befinden kann: <br><br><ul><li>  <b>Anforderungen</b> - Wenn es nicht m√∂glich ist, vom Kunden schnell die erforderlichen Erl√§uterungen zur Aufgabe zu erhalten, und ohne sie keine weiteren Arbeiten am Ticket m√∂glich sind, wird das Ticket in diesen Status versetzt und demjenigen zugewiesen, der Erkl√§rungen abgeben muss. <br></li><li>  <b>Angehalten</b> - Wenn die Ticketarbeit unterbrochen wird, z. B. wenn der Entwickler durch Aufgaben eines benachbarten Teams blockiert ist oder zu einer dringenderen Aufgabe wechseln musste. <br></li><li>  <b>Wiederer√∂ffnet</b> - Eine Aufgabe kann nach einer √úberpr√ºfung, nach dem Testen und nach einem erfolglosen Versuch, einen Zweig mit dem Master zusammenzuf√ºhren, f√ºr den Entwickler wiederentdeckt werden. <br></li></ul><br>  Infolgedessen sieht ein vereinfachtes Diagramm unseres Workflows folgenderma√üen aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-m/cd/ue/-mcduen0-daw39ykqjhvp4rvdka.png"></div><br><h1>  Ticket - Kommunikationszentrum f√ºr die Aufgabe </h1><br>  Durch das Weiterleiten des Tickets durch den Flow erh√§lt sein Header ungef√§hr die folgende Form: <br><br><img src="https://habrastorage.org/webt/c7/4t/qp/c74tqp2l7smg9unpuxpgzw3fhxo.png"><br><br>  Was ist hier noch interessant, das wir f√ºr uns angepasst haben und das ich noch nicht erw√§hnt habe? <br><br><ul><li>  <i>Komponente</i> - wird verwendet, um ein Ticket innerhalb einer gro√üen Abteilung zu gruppieren.  Verschiedene Untergruppen sind f√ºr verschiedene Komponenten verantwortlich und sehen in ihren Dashboards dementsprechend nur Aufgaben f√ºr ihre Komponenten.  Zum Beispiel kann ich mit dieser Abfrage alle offenen Fehler f√ºr die Komponenten meines Teams auflisten: <br><br><pre> <code class="php hljs">Project = SRV <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> type = Bug <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> status = Open <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> component in componentsLeadByUser(d.semenihin)</code> </pre> <br></li><li>  <i>√úberpr√ºfung</i> - ob eine Code√ºberpr√ºfung erforderlich ist.  Standard ist erforderlich.  Wenn der Feldwert auf <i>Nein gesetzt ist,</i> erh√§lt <i>das</i> Ticket sofort den Status " <i>Gel√∂st</i> " <i>.</i> <i><br></i> <br>  QA - Muss der Tester √ºberpr√ºft werden?  Standard ist erforderlich.  Wenn der Feldwert auf <i>Nein gesetzt ist, wechselt das</i> Ticket sofort in den Status <i>In Shot - OK.</i> <i><br></i> <br>  Sprint - in unserem Fall ist er nur f√ºr Aufgaben mit dem Typ "Neues Feature" relevant, f√ºr die wir eine Woche im Voraus einen Plan erstellen. <br></li><li>  <i>F√§lligkeitsdatum</i> - Der Entwickler bestimmt das Datum, an dem das Ticket produziert wird.  Vor Beginn der Arbeit an der Aufgabe ausgestellt. <br></li><li>  <i>Situation</i> - in der Tat ein kurzes Protokoll mit einer kurzen Beschreibung des aktuellen Status der Aufgabe.  Beispiel: <i>"20/08 Ich warte auf √úbersetzungen"</i> , <i>"21/08 Kl√§rung des Kunden zu Problem X"</i> .  Dies hilft, eine kurze Zusammenfassung der Aufgabe in der Liste der anderen Aufgaben zu sehen. <br></li><li>  <i>Msg4QA</i> - Informationen f√ºr QS-Ingenieure, die der Entwickler zur Vereinfachung des Testprozesses <i>weitergibt</i> <br></li></ul><br>  Wir versuchen, mit dem Task Director in den Kommentaren des Tickets eine Diskussion √ºber kontroverse Themen zu f√ºhren und wichtige Klarstellungen nicht per Post und Instant Messenger zu "verschmieren".  Wenn die Diskussion dennoch "nebenbei" stattgefunden hat, ist es √§u√üerst w√ºnschenswert, das, was Sie vereinbart haben, in das Ticket zu kopieren. <br><br>  Zus√§tzlich zu "menschlichen" Texten, wie ich oben erw√§hnt habe, werden viele Dinge automatisch in einem Kommentar unter Verwendung der API geschrieben: <br><br><ul><li>  begeht <br></li><li>  Ergebnisse √ºberpr√ºfen; <br></li><li>  Testergebnisse. <br></li></ul><br>  Manchmal k√∂nnen automatische Kommentare beispielsweise Produktmanager st√∂ren.  Aus diesem Grund haben wir ein einfaches JS-Skript erstellt, das der Jira-Oberfl√§che eine Schaltfl√§che hinzuf√ºgt und es Ihnen erm√∂glicht, alle automatischen Kommentare zu minimieren, sodass nur menschliche Kommentare √ºbrig bleiben.  Minimierte automatische Kommentare wirken daher kompakt. <br><br><img src="https://habrastorage.org/webt/nx/_-/jh/nx_-jh1r3hxzby1j1ue7itohe0e.png"><br><br><div class="spoiler">  <b class="spoiler_title">JS-Code des Skripts, das wir in die Ticketvorlage eingebettet haben</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'load'</span></span>, () =&gt; {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> $ = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.jQuery;   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> botsAttrMatch = [       <span class="hljs-string"><span class="hljs-string">'aida'</span></span>,       <span class="hljs-string"><span class="hljs-string">'itops.api'</span></span>   ].map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">bot</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">`[rel="</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${bot}</span></span></span><span class="hljs-string">"]`</span></span>).join(<span class="hljs-string"><span class="hljs-string">','</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$) {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;   }   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AIDA_COLLAPSE_KEY = <span class="hljs-string"><span class="hljs-string">'aida-collapsed'</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> COMMENT_SELECTOR = <span class="hljs-string"><span class="hljs-string">'.issue-data-block.activity-comment.twixi-block'</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> JiraImprovements = {       init() {           <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addButtons();           <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleAidaCollapsing();           <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleCommentExpansion();           <span class="hljs-comment"><span class="hljs-comment">// Handle toggle button and aida collapsing and put it on a loop           // to handle unexpected JIRA behaviour           const self = this;           setInterval(function () {               self.addButtons();               self.handleAidaCollapsing();           }, 2000);           addCss(`               #badoo-toggle-bots {                   background: #fff2c9;                   color: #594300;                   border-radius: 0 3px 0 0;                   margin-top: 3px;                   display: inline-block;               }           `);       },       addButtons() {           // Do we already have the button?           if ($('#badoo-toggle-bots').length &gt; 0) {               return;           }           // const headerOps = $('ul#opsbar-opsbar-operations');           const jiraHeader = $('#issue-tabs');           // Only add it in ticket state           if (jiraHeader.length &gt; 0) {               const li = $('&lt;a id="badoo-toggle-bots" class="aui-button aui-button-primary aui-style" href="/"&gt;Collapse Bots&lt;/a&gt;');               li.on('click', this.toggleAidaCollapsing.bind(this));               jiraHeader.append(li);           }       },       toggleAidaCollapsing(e) {           e.preventDefault();           const isCollapsed = localStorage.getItem(AIDA_COLLAPSE_KEY) === 'true';           localStorage.setItem(AIDA_COLLAPSE_KEY, !isCollapsed);           this.handleAidaCollapsing();       },       handleAidaCollapsing() {           const isCollapsed = localStorage.getItem(AIDA_COLLAPSE_KEY) === 'true';           const aidaComments = $(COMMENT_SELECTOR).has(botsAttrMatch).not('.manual-toggle');           if (isCollapsed) {               aidaComments.removeClass('expanded').addClass('collapsed');               $('#badoo-toggle-bots').text('Show Bots');           }           else {               aidaComments.removeClass('collapsed').addClass('expanded');               $('#badoo-toggle-bots').text('Collapse Bots');           }       },       handleCommentExpansion() {           $(document.body).delegate('a.collapsed-comments', 'click', function () {               const self = this; // eslint-disable-line no-invalid-this               let triesLeft = 100;               const interval = setInterval(() =&gt; {                   if (--triesLeft &lt; 0 || self.offsetHeight === 0) {                       clearInterval(interval);                   }                   // Element has been removed from DOM. ie new jira comments have been added                   if (self.offsetHeight === 0) {                       JiraImprovements.handleAidaCollapsing();                   }               }, 100);           });           $(document.body).delegate(COMMENT_SELECTOR, 'click', function () {               $(this).addClass('manual-toggle');// eslint-disable-line no-invalid-this           });       }   };   JiraImprovements.init();   function addCss(cssText) {       const style = document.createElement('style');       style.type = 'text/css';       if (style.styleSheet) {           style.styleSheet.cssText = cssText;       }       else {           style.appendChild(document.createTextNode(cssText));       }       document.head.appendChild(style);   } });</span></span></code> </pre><br></div></div><br><h1>  Was sonst? </h1><br>    API  webhooks Jira    : <br><br><ul><li>    HipChat,      -   (    ); <br></li><li>    HipChat            (    ,    ); <br></li><li>              (  )    (          ;        ); <br></li><li>       ;        ,       ; <br></li><li>         In progress  ; <br></li><li>   ,   ¬´¬ª    (, On Review),      ; <br></li><li>                 ,      Jira     (, ¬´d.semenihin (Day off)¬ª).   . <br></li></ul><br><h1>  Zusammenfassung </h1><br> Jira ‚Äî  ,        ,     . ,  ,      .    Jira         ,          . <br><br>            ‚Äî   .       Jira     ,          Jira. , -      . <br><br>  Vielen Dank f√ºr Ihre Aufmerksamkeit! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de424655/">https://habr.com/ru/post/de424655/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de424645/index.html">Da haben wir die massivste interne Umfrage bei der Bank gemacht</a></li>
<li><a href="../de424647/index.html">Das schlechteste Diagramm der Welt</a></li>
<li><a href="../de424649/index.html">Java gegen GO. Testen durch eine gro√üe Anzahl von Benutzern</a></li>
<li><a href="../de424651/index.html">Was ist ZFS? Und warum sind die Leute verr√ºckt nach ihr?</a></li>
<li><a href="../de424653/index.html">Willkommen beim Voronezh Game Dev Meetup</a></li>
<li><a href="../de424657/index.html">[√úbersetzung] Automatisch installiertes JavaScript reparieren oder t√∂ten?</a></li>
<li><a href="../de424659/index.html">Home-Office-Vorteil - Tageslicht</a></li>
<li><a href="../de424661/index.html">Kleine Satelliten der Erde bieten Potenzial f√ºr erstaunliche wissenschaftliche und kommerzielle M√∂glichkeiten</a></li>
<li><a href="../de424663/index.html">Welche F√§higkeiten ben√∂tigen Entwickler in Zukunft?</a></li>
<li><a href="../de424669/index.html">Schattenbenutzerprofile: Facebook-Werbetreibende finden Sie sogar unter Verwendung einer nicht √∂ffentlichen Telefonnummer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>