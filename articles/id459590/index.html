<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ½â€ğŸ”§ ğŸ™‹ğŸ½ ğŸ––ğŸ¿ Program afiliasi open source terdesentralisasi di blockchain Waves â˜¢ï¸ ğŸ‘§ğŸ» ğŸ–ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Program afiliasi terdesentralisasi pada blockchain Waves, dilaksanakan sebagai bagian dari hibah Waves Labs oleh tim Bettex. 

 Posnya bukan iklan  ! ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Program afiliasi open source terdesentralisasi di blockchain Waves</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459590/">  Program afiliasi terdesentralisasi pada blockchain Waves, dilaksanakan sebagai bagian dari hibah Waves Labs oleh tim Bettex. <br><br><div class="spoiler">  <b class="spoiler_title">Posnya bukan iklan</b> <div class="spoiler_text">  !  Program ini open source, penggunaan dan distribusinya gratis.  Aplikasi program merangsang pengembangan aplikasi dApp dan umumnya mempromosikan desentralisasi, yang bermanfaat bagi setiap pengguna Jaringan. <br></div></div><br><img src="https://habrastorage.org/webt/hn/xm/xk/hnxmxkdtj1phll6cwjyceneyczg.jpeg" alt="gambar"><br><a name="habracut"></a><br>  Diperkenalkan oleh dApp untuk program afiliasi adalah template untuk proyek yang menyertakan afiliasi sebagai bagian dari fungsinya.  Kode dapat digunakan sebagai templat untuk menyalin, sebagai pustaka atau sebagai sekumpulan ide untuk implementasi teknis. <br><br>  Dalam hal fungsi, ini adalah sistem afiliasi reguler yang menerapkan pendaftaran dengan indikasi perujuk, akrual multi-level penghargaan untuk referensi dan motivasi untuk pendaftaran dalam sistem (cashback).  Sistemnya adalah "murni" dApp, yaitu, aplikasi web berinteraksi langsung dengan blockchain tanpa backend, database, dll. <br><br>  Teknik yang digunakan juga dapat berguna dalam banyak proyek lain: <br><br><ul><li>  Memanggil akun pintar secara kredit dengan pembayaran langsung (pada saat panggilan, tidak ada token pada akun untuk membayar panggilan, tetapi mereka muncul di sana sebagai hasil dari panggilan). </li><li>  PoW-captcha - perlindungan terhadap panggilan otomatis frekuensi tinggi dari fungsi akun pintar - analog dari captcha, tetapi melalui bukti penggunaan sumber daya komputasi. </li><li>  Permintaan kunci data berdasarkan templat. </li></ul><br>  Aplikasi terdiri dari: <br><br><ul><li>  kode akun cerdas dalam bahasa ride4dapps (yang, menurut desain, digabungkan ke dalam akun pintar utama, yang Anda perlukan untuk mengimplementasikan fungsi afiliasi); </li><li>  pembungkus js yang menerapkan tingkat abstraksi atas API REST NODE WAVES; </li><li>  kode pada kerangka kerja vuejs, yang merupakan contoh menggunakan perpustakaan dan kode RIDE. </li></ul><br>  Kami menjelaskan semua fitur ini. <br><br>  <b>Panggil akun pintar secara kredit dengan pembayaran segera</b> <br><br>  Panggilan InvokeScript memerlukan biaya dari akun yang memulai transaksi.  Ini bukan masalah jika Anda melakukan proyek untuk Geek blockchain yang memiliki sejumlah token WAV di akun mereka, tetapi jika produk tersebut ditujukan untuk digunakan secara luas, ini menjadi masalah serius.  Lagi pula, pengguna harus berhati-hati dalam membeli token WAVES (atau aset lain yang sesuai dengan yang dapat Anda bayar untuk transaksi), yang meningkatkan ambang yang sudah cukup besar untuk memasuki proyek.  Kami dapat mendistribusikan aset kepada pengguna, yang memungkinkan kami membayar untuk transaksi dan menghadapi risiko penyalahgunaannya ketika sistem otomatis dibuat untuk memompa keluar aset likuid dari sistem kami. <br><br>  Akan sangat nyaman jika memungkinkan untuk membuat panggilan InvokeScript "dengan mengorbankan penerima" (akun pintar tempat skrip dipasang), dan kemungkinan seperti itu, meskipun tidak dengan cara yang jelas, ada. <br><br>  Jika Anda menjalankan ScriptTransfer di dalam InvokeScript ke alamat pemanggil, yang mengkompensasi token yang dihabiskan untuk biaya, maka panggilan seperti itu akan berhasil, bahkan jika tidak ada aset pada akun panggilan pada saat panggilan.  Hal ini dimungkinkan karena fakta bahwa jumlah token yang cukup diperiksa setelah transaksi dipanggil, dan bukan sebelum itu, sehingga dimungkinkan untuk melakukan transaksi dengan kredit yang harus dibayar segera. <br><br>  <i>ScriptTransfer (i.caller, i.fee, unit)</i> <br><br>  Kode di bawah ini mengembalikan biaya yang dikeluarkan dengan mengorbankan akun pintar.  Untuk melindungi dari penyalahgunaan fitur ini, Anda harus menggunakan cek bahwa penelepon menghabiskan biaya dalam aset yang tepat dan dalam batas yang wajar: <br><br><pre><code class="plaintext hljs">func checkFee(i:Invocation) = { if i.fee &gt; maxFee then throw(â€œunreasonable large feeâ€) else if i.feeAssetId != unit then throw(â€œfee must be in WAVESâ€) else true }</code> </pre> <br>  Juga, perlindungan terhadap pemborosan dana berbahaya dan tidak masuk akal membutuhkan perlindungan terhadap panggilan otomatis (PoW-captcha) <br><br>  <b>PoW-captcha</b> <br><br>  Ide captcha pembuktian kerja bukanlah hal baru dan telah diterapkan di berbagai proyek, termasuk yang diimplementasikan berdasarkan WAVES.  Idenya adalah bahwa untuk tindakan yang menyia-nyiakan sumber daya proyek kami, penelepon harus menghabiskan sumber dayanya sendiri, yang membuat serangan terhadap menipisnya sumber daya cukup mahal.  Untuk validasi yang sangat mudah dan murah bahwa pengirim transaksi telah menyelesaikan tugas PoW, ada cek untuk id transaksi: <br><br>  <i>jika take (toBase58String (i.transactionId), 3)! = "123" lalu lempar ("bukti kerja gagal") lain</i> <br><br>  Untuk melakukan transaksi, pemanggil harus memilih parameter tersebut sehingga kode base58-nya (id) dimulai pada 123, yang sesuai dengan rata-rata beberapa detik waktu prosesor dan biasanya masuk akal untuk tugas kami.  Jika PoW sederhana atau lebih kompleks diperlukan, maka tugas itu mudah untuk disempurnakan dengan cara yang jelas. <br><br>  <b>Permintaan kunci data menurut templat</b> <br><br>  Untuk menggunakan blockchain sebagai basis data, penting untuk memiliki alat API untuk menanyakan basis data sebagai templat key-val.  Toolkit semacam itu muncul pada awal Juli 2019 sebagai parameter " <i>Cocok"</i> untuk permintaan <i>/ alamat / data</i> REST API <i>? Kecocokan = regexp</i> .  Sekarang, jika kita perlu mendapatkan tidak satu kunci dan tidak semua kunci dari aplikasi web sekaligus, tetapi hanya beberapa kelompok, maka kita dapat membuat pilihan dengan nama kunci.  Misalnya, dalam proyek ini, transaksi penarikan dikodekan sebagai <br><br><pre> <code class="plaintext hljs">withdraw_${userAddress}_${txid}</code> </pre> <br>  yang memungkinkan Anda untuk mendapatkan daftar transaksi untuk menarik dana untuk setiap alamat yang diberikan sesuai dengan templat: <br><br><pre> <code class="plaintext hljs">?matches=withdraw_${userAddress}_.*</code> </pre> <br>  Sekarang kita akan menganalisis komponen dari solusi turnkey. <br><br>  <b>Kode Vuejs</b> <br><br>  Kode ini adalah demo yang berfungsi dekat dengan proyek nyata.  Ini mengimplementasikan login melalui Waves Keeper dan bekerja dengan perpustakaan affiliate.js, dengan bantuan yang mendaftarkan pengguna dalam sistem, polling data transaksi, dan juga memungkinkan Anda untuk menarik dana yang diperoleh ke akun pengguna. <br><br><img src="https://habrastorage.org/webt/ug/dv/e6/ugdve6bg3kaamx7flsyzkaubxma.jpeg" alt="gambar"><br><br>  <b>Kode NAIK</b> <br><br>  Ini terdiri dari fungsi register, dana dan penarikan. <br><br>  Fungsi register mendaftar dengan sistem pengguna.  Ini memiliki dua parameter: pengarah (alamat pengarah) dan parameter garam, yang tidak digunakan dalam kode fungsi, yang diperlukan untuk memilih id transaksi (tugas PoW-captcha). <br><br>  Fungsi (seperti fungsi lain dari proyek ini) menggunakan teknik peminjaman, hasil dari fungsi tersebut adalah membiayai biaya untuk memanggil fungsi ini.  Berkat keputusan ini, pengguna yang baru saja membuat dompet dapat segera bekerja dengan sistem dan dia tidak perlu bingung dengan masalah pembelian atau penerimaan aset yang memungkinkan Anda membayar biaya transaksi. <br><br>  Hasil dari fungsi pendaftaran adalah dua entri: <br><br><pre> <code class="plaintext hljs">${owner)_referer = referer ${referer}_referral_${owner} = owner</code> </pre> <br>  Ini memungkinkan pencarian langsung dan terbalik (perujuk pengguna ini dan semua referensi pengguna ini). <br><br>  Fungsi dana lebih merupakan templat untuk mengembangkan fungsionalitas nyata.  Dalam bentuk yang disajikan, dibutuhkan semua dana yang ditransfer oleh transaksi dan mendistribusikannya ke akun rujukan 1, 2, 3, ke akun "cashback" dan akun "perubahan" (semua yang tersisa ketika mendistribusikan ke akun sebelumnya ada di sini). <br><br>  Cashback adalah cara merangsang pengguna akhir untuk berpartisipasi dalam sistem rujukan.  Pengguna dapat menarik bagian dari komisi yang dibayarkan oleh sistem dalam bentuk "cashback" dengan cara yang sama seperti hadiah untuk referensi. <br><br>  Saat menggunakan sistem rujukan, fungsi dana harus dimodifikasi, dibangun ke dalam logika utama akun pintar tempat sistem akan bekerja.  Misalnya, jika biaya rujukan dibayar untuk taruhan yang dibuat, maka fungsi dana harus dimasukkan ke dalam logika di mana taruhan dilakukan (atau tindakan bertarget lain dilakukan, untuk mana biaya dibayarkan).  Fungsi ini mengkodekan tiga level penghargaan referensi.  Jika Anda perlu melakukan lebih atau kurang level, maka ini juga diperbaiki dalam kode.  Persentase remunerasi ditetapkan oleh konstanta level1-level3, dalam kode itu dianggap sebagai <i>jumlah * level / 1000</i> , yaitu nilai 1 sesuai dengan 0,1% (ini juga dapat diubah dalam kode). <br><br>  Panggilan fungsi mengubah saldo akun dan juga membuat entri untuk tujuan masuk dalam formulir: <br><br><pre> <code class="1c hljs">fund_address_txid = address:owner:inc:level:timestamp <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  timestamp ( )     func getTimestamp() = { let block = extract(blockInfoByHeight(height)) toString(block.timestamp) }</code> </pre> <br>  Artinya, waktu transaksi adalah waktu blok di mana ia berada.  Ini lebih dapat diandalkan daripada menggunakan cap waktu dari transaksi itu sendiri, terutama karena itu tidak dapat diakses dari callable. <br>  Fungsi penarikan menampilkan semua akumulasi hadiah pada akun pengguna.  Membuat entri untuk tujuan logging: <br><br><pre> <code class="plaintext hljs"># withdraw log: withdraw_user_txid=amount:timestamp</code> </pre> <br>  <b>Aplikasi</b> <br><br>  Bagian utama dari aplikasi adalah perpustakaan affiliate.js, yang merupakan jembatan antara model data afiliasi dan API REST NODE WAVES.  Menerapkan tingkat abstraksi yang independen dari kerangka kerja (apa pun dapat digunakan).  Fungsi aktif (mendaftar, menarik) menganggap bahwa Waves Keeper diinstal di sistem, perpustakaan itu sendiri tidak memeriksa ini. <br><br>  Metode penerapan: <br><br><pre> <code class="plaintext hljs">fetchReferralTransactions fetchWithdrawTransactions fetchMyBalance fetchReferrals fetchReferer withdraw register</code> </pre> <br>  Fungsi metode jelas dari nama, parameter dan data yang dikembalikan dijelaskan dalam kode.  Fungsi register memerlukan komentar tambahan - ia memulai siklus pencocokan id transaksi sehingga dimulai pada 123 - ini adalah PoW-captcha yang dijelaskan di atas, yang melindungi terhadap registrasi massal.  Fungsi menemukan transaksi dengan id yang diinginkan, dan kemudian menandatanganinya melalui Waves Keeper. <br><br>  Program afiliasi DEX tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub.com</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id459590/">https://habr.com/ru/post/id459590/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id459580/index.html">Sistem telepon virtual</a></li>
<li><a href="../id459582/index.html">Ikhtisar: cara membeli saham perusahaan Amerika dari Rusia</a></li>
<li><a href="../id459584/index.html">Saya menemukan seorang programmer hebat bernama Steve Wozniak</a></li>
<li><a href="../id459586/index.html">Taman v0.10.0: Laptop Anda tidak perlu Kubernetes</a></li>
<li><a href="../id459588/index.html">Jangan setuju untuk mengembangkan apa yang tidak Anda mengerti</a></li>
<li><a href="../id459592/index.html">Tiga tips manajemen waktu untuk mereka yang telah mencoba segalanya.</a></li>
<li><a href="../id459594/index.html">Baca di antara catatan: sistem transfer data di dalam musik</a></li>
<li><a href="../id459596/index.html">iOS Digest No. 9 (28 Juni - 11 Juli)</a></li>
<li><a href="../id459598/index.html">SELinux Pertanyaan yang Sering Diajukan (FAQ)</a></li>
<li><a href="../id459602/index.html">Kami menanamkan Lua interpreter dalam proyek untuk mikrokontroler (stm32)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>