<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💬 👰 🤽🏽 Ekstensi web lintas browser untuk skrip khusus Bagian 3 🛵 🌺 🍠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada artikel ini, saya melanjutkan serangkaian publikasi yang ingin saya bicarakan tentang pengalaman saya menulis ekstensi web untuk browser. Saya su...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ekstensi web lintas browser untuk skrip khusus Bagian 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416585/"> Pada artikel ini, saya melanjutkan serangkaian publikasi yang ingin saya bicarakan tentang pengalaman saya menulis ekstensi web untuk browser.  Saya sudah memiliki pengalaman membuat ekstensi web, yang dipasang oleh sekitar 100.000 pengguna Chrome, yang bekerja secara otonom, tetapi dalam seri artikel ini saya memutuskan untuk mempelajari proses pengembangan ekstensi web dengan mengintegrasikannya secara erat dengan sisi server. <br><br><img width="65" src="https://habrastorage.org/getpro/habr/post_images/188/09a/2d6/18809a2d60126c22c85f0dbb38c188dc.png" alt="gambar"><img width="65" src="https://habrastorage.org/getpro/habr/post_images/474/b37/7c9/474b377c9fd5df452ee6b2ae849c2891.png" alt="gambar"><img width="65" src="https://habrastorage.org/getpro/habr/post_images/804/cc0/c91/804cc0c91bd30f83537540bd6aca22df.png" alt="gambar"><img width="65" src="https://habrastorage.org/getpro/habr/post_images/94e/097/462/94e097462cb7f3af3b482312f6fd2ee9.png" alt="gambar"><img width="65" src="https://habrastorage.org/getpro/habr/post_images/4bf/d73/6f6/4bfd736f6830e4396071afedad261bfd.png" alt="gambar"><br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 2</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 4</a> <br><br><h1>  Jebakan dalam mengimplementasikan interaksi ekstensi web dan sisi server </h1><br>  Seperti yang sudah dijelaskan sebelumnya, sisi server menggunakan Meteor.js.  Untuk mengimplementasikan API <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RESTful,</a> paket <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github.com/kahmali/meteor-restivus</a> digunakan.  Itu sudah memiliki beberapa bagian yang diterapkan di dalamnya untuk mencakup mekanisme pengguna yang terkait dengan otorisasi. <br><br>  Misalnya, cukup menentukan <b>authRequired: true</b> , seperti pada contoh di bawah ini, sehingga titik API hanya berfungsi untuk pengguna yang diotorisasi. <br><br><pre><code class="javascript hljs">Api.addRoute(<span class="hljs-string"><span class="hljs-string">'clientScript/:id_script'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">authRequired</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">get</span></span>: { <span class="hljs-attr"><span class="hljs-attr">action</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//method for GET on htts://example.com/api/v1/clientScript/:id_script } });</span></span></code> </pre> <br>  Dengan demikian, tiga poin API ditambahkan untuk pendaftaran, untuk menerima data profil dan memperbaruinya, untuk pengaturan ulang kata sandi. <br><br>  Di ekstensi web itu sendiri, saat memanggil metode yang membutuhkan otorisasi, kode berikut digunakan: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> details = { <span class="hljs-attr"><span class="hljs-attr">url</span></span>: API_URL + <span class="hljs-string"><span class="hljs-string">'/api/v1/clientDataRowDownload/'</span></span> + dataRowId + <span class="hljs-string"><span class="hljs-string">'/download'</span></span>, <span class="hljs-attr"><span class="hljs-attr">method</span></span>: <span class="hljs-string"><span class="hljs-string">'GET'</span></span>, <span class="hljs-attr"><span class="hljs-attr">contentType</span></span>: <span class="hljs-string"><span class="hljs-string">'json'</span></span>, <span class="hljs-attr"><span class="hljs-attr">headers</span></span>: {<span class="hljs-string"><span class="hljs-string">'X-Auth-Token'</span></span>: kango.storage.getItem(<span class="hljs-string"><span class="hljs-string">"authToken"</span></span>), <span class="hljs-string"><span class="hljs-string">'X-User-Id'</span></span>: kango.storage.getItem(<span class="hljs-string"><span class="hljs-string">"userId"</span></span>)} }; kango.xhr.send(details, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//code for response handler })</span></span></code> </pre><br>  Contoh permintaan otorisasi terlihat jelas di sini.  Header termasuk X-Auth-Token dan X-User-Id, yang diperoleh sebagai hasil dari proses registrasi atau otorisasi.  Data ini disimpan di penyimpanan lokal ekstensi web dan selalu tersedia di skrip content.js. <br><br>  Mengunduh file dalam ekstensi web dilakukan dengan membaca file di sisi browser dan mengirim melalui XHR: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">"form#uploadFile"</span></span>).on(<span class="hljs-string"><span class="hljs-string">"submit"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event, template</span></span></span><span class="hljs-function">) </span></span>{ event.preventDefault(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileReader(); reader.onload = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">evt</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> details = { <span class="hljs-attr"><span class="hljs-attr">url</span></span>: API_URL + <span class="hljs-string"><span class="hljs-string">'/api/v1/clientFileAdd/'</span></span> + kango.storage.getItem(<span class="hljs-string"><span class="hljs-string">"userId"</span></span>), <span class="hljs-attr"><span class="hljs-attr">method</span></span>: <span class="hljs-string"><span class="hljs-string">'POST'</span></span>, <span class="hljs-attr"><span class="hljs-attr">contentType</span></span>: <span class="hljs-string"><span class="hljs-string">'json'</span></span>, <span class="hljs-attr"><span class="hljs-attr">params</span></span>: {<span class="hljs-string"><span class="hljs-string">"content"</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">encodeURIComponent</span></span>(evt.target.result.replace(<span class="hljs-regexp"><span class="hljs-regexp">/^data:[^;]*;base64,/</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>)), <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">encodeURIComponent</span></span>(event.currentTarget.fileInput.files[<span class="hljs-number"><span class="hljs-number">0</span></span>].name), <span class="hljs-string"><span class="hljs-string">"size"</span></span>: event.currentTarget.fileInput.files[<span class="hljs-number"><span class="hljs-number">0</span></span>].size, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: event.currentTarget.fileInput.files[<span class="hljs-number"><span class="hljs-number">0</span></span>].type, <span class="hljs-string"><span class="hljs-string">"lastModified"</span></span>: event.currentTarget.fileInput.files[<span class="hljs-number"><span class="hljs-number">0</span></span>].lastModified }, <span class="hljs-attr"><span class="hljs-attr">headers</span></span>: {<span class="hljs-string"><span class="hljs-string">'X-Auth-Token'</span></span>: kango.storage.getItem(<span class="hljs-string"><span class="hljs-string">"authToken"</span></span>), <span class="hljs-string"><span class="hljs-string">'X-User-Id'</span></span>: kango.storage.getItem(<span class="hljs-string"><span class="hljs-string">"userId"</span></span>)} }; kango.xhr.send(details, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data.status == <span class="hljs-number"><span class="hljs-number">200</span></span> &amp;&amp; data.response != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(data.response.status == <span class="hljs-string"><span class="hljs-string">"success"</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//ok } else { //error } } else { if(data.status == 401) { //notAuth } else { //error } } }); }; if (event.currentTarget.fileInput.files.length != 0) { reader.readAsDataURL(event.currentTarget.fileInput.files[0]); } return false; });</span></span></code> </pre><br>  Penting untuk mencatat baris <b>event.target.result.replace (/ ^ data: [^;] *; base64, /, "")</b> .  File di sisi browser dikodekan dalam base64, tetapi untuk kompatibilitas di sisi server ketika menggunakan pengkodean ini dalam garis <b>Buffer.from (String baru (this.bodyParams.content), "base64")</b> kita harus memotong awalan pengkodean dan hanya membaca "tubuh" file .  Penting juga untuk mencatat pembungkus dalam komponen encodeURIC, karena <b>+ yang</b> sama sering ditemukan pada base64 dan nama file. <br><br>  Saat mengedit skrip, Anda perlu mempertimbangkan pengkodean karakter di tubuh skrip saat mentransfer konten.  Dalam beberapa kasus, pengkodean base64 tidak menghasilkan hasil yang benar ketika decoding di sisi server menggunakan komponen encodeURIC.  Oleh karena itu, pengkodean paksa dalam utf8 awalnya digunakan dengan utf8.encode (str);  di mana <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mths.be/utf8js</a> v3.0.0 dari @mathias <br><br>  Unduhan file diimplementasikan menggunakan pustaka FileSaver yang sudah mapan.  Data yang diterima melalui XHR hanya ditransfer ke input konstruktor File, dan kemudian unduhan file diinisialisasi: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> file = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File([data.response.data.join(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>)], <span class="hljs-string"><span class="hljs-string">"data_rows"</span></span> + date.getFullYear() + <span class="hljs-string"><span class="hljs-string">"_"</span></span> + (date.getMonth() + <span class="hljs-number"><span class="hljs-number">1</span></span>) + <span class="hljs-string"><span class="hljs-string">"_"</span></span> + date.getDate() + <span class="hljs-string"><span class="hljs-string">".csv"</span></span>, {<span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">"application/vnd.ms-excel"</span></span>}); saveAs(file);</code> </pre><br><h1>  Pustaka internal untuk skrip khusus </h1><br>  Agar skrip, ekstensi web, dan bagian server untuk berinteraksi, perlu memiliki tautan perantara yang memungkinkan Anda menerima data dengan cepat dari file yang diunduh, menyimpan data setelah skrip dieksekusi, dll. <br><br>  Untuk tujuan ini, perpustakaan internal ditulis, yang diinisialisasi sebelum skrip mulai bekerja dengan menambahkan sendiri ke kode halaman.  Di sini Anda perlu menambahkan informasi tentang kebijakan perlindungan sumber untuk memuat sumber daya, yaitu kebijakan konten-keamanan. <br><br>  Banyak situs menggunakan header CSP untuk melindungi terhadap eksekusi kode javascript sewenang-wenang pada halaman layanan web mereka, sehingga melindungi diri mereka dari XSS di sisi browser web. <br><br>  Karena pengguna memasang ekstensi web sendiri, ia dapat mengubah tajuk dan konten sumber yang diunduh.  Karena ada bug di Mozilla Firefox, ini merupakan masalah untuk beberapa situs.  Yaitu, dalam ekstensi web untuk Firefox tidak akan mungkin untuk memodifikasi header atau menambahkan tag meta untuk membatalkan kebijakan CSP untuk situs tempat mereka digunakan.  Bug ini belum ditutup selama beberapa tahun, meskipun standar dengan jelas menetapkan ketentuan untuk ekstensi web, yang menyatakan bahwa kebijakan mengenai sumber daya yang diunduh dari sisi server aplikasi tidak dapat dominan dalam kaitannya dengan ekstensi web yang dipasang oleh pengguna sendiri. <br><br>  Pembatasan kebijakan CSP dapat diimplementasikan menggunakan kerangka kerja kango dengan cara berikut: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> browserObject; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(kango.browser.getName() == <span class="hljs-string"><span class="hljs-string">'chrome'</span></span>) { browserObject = chrome; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { browserObject = browser; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> filter = { <span class="hljs-attr"><span class="hljs-attr">urls</span></span>: [<span class="hljs-string"><span class="hljs-string">"*://*/*"</span></span>], <span class="hljs-attr"><span class="hljs-attr">types</span></span>: [<span class="hljs-string"><span class="hljs-string">"main_frame"</span></span>, <span class="hljs-string"><span class="hljs-string">"sub_frame"</span></span>] }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onHeadersReceived = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">details</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newHeaders = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; details.responseHeaders.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">'content-security-policy'</span></span> !== details.responseHeaders[i].name.toLowerCase() &amp;&amp; <span class="hljs-string"><span class="hljs-string">'x-xss-protection'</span></span> !== details.responseHeaders[i].name.toLowerCase() ) { newHeaders.push(details.responseHeaders[i]); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">responseHeaders</span></span>: newHeaders }; }; browserObject.webRequest.onHeadersReceived.addListener(onHeadersReceived, filter, [<span class="hljs-string"><span class="hljs-string">"blocking"</span></span>, <span class="hljs-string"><span class="hljs-string">"responseHeaders"</span></span>]);</code> </pre><br>  Dalam hal ini, Anda tidak boleh lupa untuk menambahkan baris dalam manifes ekstensi web yang memungkinkan bekerja dengan objek webRequest dalam mode pemblokiran: <br><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"permissions"</span></span>: { ... <span class="hljs-string"><span class="hljs-string">"webRequest"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"webRequestBlocking"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, ... }</code> </pre><br>  Setelah menyelesaikan masalah dengan pembatasan yang diberlakukan oleh CSP, pengguna dapat menggunakan skrip yang ditulis olehnya di halaman mana pun di Internet. <br><br>  Fungsi panggilan dari perpustakaan internal tersedia melalui objek global Gc. <br>  Fungsi yang diimplementasikan saat ini: <br><br><ul><li>  <b>GC.saveRow (nama, konten, [tulis ulang = 0, async = salah]);</b>  , di mana nama adalah nama baris untuk menulis ke koleksi, konten adalah baris data itu sendiri untuk menulis, menulis ulang adalah bendera untuk menimpa seluruh koleksi, digunakan dalam panggilan ke Gc.saveRow (nama, 'jelas', 1);  yang menghapus semua entri dalam koleksi string, async adalah flag untuk bekerja dalam mode asinkron. </li><li>  <b>GC.getRows (nama, angka, [hitung = 1, async = false]);</b>  di mana nama adalah nama garis dalam koleksi, nomor adalah nomor seri dari garis untuk menerima data, hitungan adalah jumlah data yang diterima dimulai dengan angka, async adalah bendera untuk bekerja dalam mode asinkron. </li><li>  <b>GC.console (string);</b>  , di mana string adalah string untuk output ke konsol GC pada halaman di mana skrip dieksekusi.  Misalnya, untuk menunjukkan kemajuan suatu tugas. </li><li>  <b>GC.clearConsole ();</b>  , fungsi ini menghapus konsol GC pada halaman tempat skrip dieksekusi. </li><li>  <b>GC.stopScript ();</b>  , berfungsi untuk menghentikan eksekusi skrip. </li><li>  <b>GC.loadFile (nama, [parseAs = teks]);</b>  , di mana nama adalah nama file dengan ekstensi yang isinya ingin Anda peroleh, parseAs adalah format preprosesor data, json dan teks saat ini didukung. </li></ul><br>  Pada artikel selanjutnya saya akan berbicara tentang " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tugas terjadwal</a> ". </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id416585/">https://habr.com/ru/post/id416585/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id416575/index.html">Analisis Gangguan Superkonduktivitas dari Magnet Hadir Besar Collider di CERN</a></li>
<li><a href="../id416577/index.html">Digest MBLT DEV - segar untuk pengembang iOS</a></li>
<li><a href="../id416579/index.html">Kami mengontrol LED menggunakan Web Bluetooth API dan Arduino</a></li>
<li><a href="../id416581/index.html">Templat urutan ketiga, atau cara saya porting Jinja2 ke C ++</a></li>
<li><a href="../id416583/index.html">Pemindai 3D mana yang akan dibeli? TOP 5 scanner 3D terbaik 2018 dari 3Dtool</a></li>
<li><a href="../id416587/index.html">Beberapa kata tentang subwoofer dan mengapa mereka cocok untuk hampir semua orang</a></li>
<li><a href="../id416589/index.html">Dead Cells: Menggunakan Pipa 3D untuk Animasi 2D</a></li>
<li><a href="../id416591/index.html">"Mengencangkan mur": mengapa semua orang mulai berbicara tentang pengetatan regulasi sektor TI</a></li>
<li><a href="../id416593/index.html">Partisipasi saya dalam pengembangan Uncharted 4</a></li>
<li><a href="../id416595/index.html">Dagaz: Horde</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>