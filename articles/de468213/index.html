<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ùé üí¶ ü¶â tinc-boot - Full-Mesh-Netzwerk ohne Schmerzen ü¶è üë®üèº‚Äçüç≥ üë¶üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Automatisch, sicher, verteilt, mit transitiven Verbindungen (dh Weiterleiten von Nachrichten, wenn kein direkter Zugriff zwischen Teilnehmern besteht)...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>tinc-boot - Full-Mesh-Netzwerk ohne Schmerzen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468213/"><p><img src="https://habrastorage.org/webt/hi/bi/xp/hibixpblgmg9-ctqwsnijobvxvc.png"></p><br><p>  Automatisch, sicher, verteilt, mit transitiven Verbindungen (dh Weiterleiten von Nachrichten, wenn kein direkter Zugriff zwischen Teilnehmern besteht), ohne einen einzigen Fehlerpunkt, Peer, bew√§hrtes, ressourcenschonendes, vollst√§ndig vermaschtes VPN-Netzwerk mit der F√§higkeit zum "Punch" NAT - ist es m√∂glich? </p><a name="habracut"></a><br><p>  Die richtigen Antworten sind: </p><br><ul><li>  Ja, mit Schmerzen, wenn Sie Zink verwenden. </li><li>  Ja, einfach, wenn Sie Tinc + Tinc-Boot verwenden </li></ul><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einf√ºhrender Link √ºberspringen</a> </p><br><h1 id="opisanie-tinc">  Tinc Beschreibung </h1><br><p>  Leider wurden einige Informationen √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tinc VPN</a> auf Habr√© ver√∂ffentlicht, aber einige relevante Artikel sind noch zu finden: </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unser Rezept f√ºr einen ausfallsicheren VPN-Server basierend auf tinc, OpenVPN, Linux</a> von Flant </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Liste der Full-Mesh-VPN-L√∂sungen</a> von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">ValdikSS</a> </li></ul><br><p>  Von den englischsprachigen Artikeln kann unterschieden werden: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">So installieren Sie Tinc und richten ein Basis-VPN unter Ubuntu 14.04</a> von Digital Ocean ein </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">So richten Sie tinc ein, ein Peer-to-Peer-VPN</a> von Linode </li></ul><br><p>  Die Originalquelle ist besser, um die Originaldokumentation von <a href="">Tinc Man</a> zu ber√ºcksichtigen </p><br><p> Tinc VPN ist ein Dienst ( <code>tincd</code> daemon) (ein kostenloser Nachdruck von der offiziellen Website), der das Funktionieren eines privaten Netzwerks durch Tunneln und Verschl√ºsseln des Datenverkehrs zwischen Knoten sicherstellt.  Der Quellcode ist offen und unter der GPL2-Lizenz verf√ºgbar.  Wie die klassische (OpenVPN) L√∂sung ist das erstellte virtuelle Netzwerk auf IP-Ebene (OSI 3) verf√ºgbar, sodass im Allgemeinen keine √Ñnderungen an den Anwendungen erforderlich sind. </p><br><p>  Hauptmerkmale: </p><br><ul><li>  Verschl√ºsselung, Authentifizierung und Komprimierung des Datenverkehrs; </li><li>  vollautomatische Full-Mesh-L√∂sung, die das Herstellen von Verbindungen zu Netzwerkknoten in einem All-with-All-Modus oder das Weiterleiten von Nachrichten zwischen Zwischenhosts umfasst, falls dies nicht zutrifft; </li><li>  Schlag NAT; </li><li>  die F√§higkeit, isolierte Netzwerke auf Ethernet-Ebene zu verbinden (virtueller Switch); </li><li>  Unterst√ºtzung mehrerer Betriebssysteme: Linux, FreeBSD, OS X, Solaris, Windows usw. </li></ul><br><p>  Es gibt zwei Zweige der Zinkentwicklung: 1.0.x (in fast allen Repositories) und 1.1 (ewiges Beta).  Der Artikel verwendet √ºberall Version 1.0.x. </p><br><blockquote>  Tinc 1.1x bietet mehrere neue Hauptfunktionen: perfekte Vorw√§rtssicherheit, vereinfachte Client-Konnektivit√§t (ersetzt tats√§chlich <code>tinc-boot</code> ) und ein allgemein durchdachteres Design. <br><br>  Derzeit wird jedoch auf der offiziellen Website eine stabile Version - 1.0.x angezeigt und hervorgehoben. Wenn Sie also alle Vorteile des 1.1-Zweigs nutzen, sollten Sie alle Vor- und Nachteile einer nicht endg√ºltigen Version bewerten. </blockquote><p>  Aus meiner Sicht besteht eine der st√§rksten M√∂glichkeiten darin, Nachrichten weiterzuleiten, wenn keine direkte Verbindung m√∂glich ist.  Gleichzeitig werden Routing-Tabellen automatisch erstellt.  Selbst Knoten ohne √∂ffentliche Adresse k√∂nnen Datenverkehr durch sich selbst leiten. </p><br><p><img src="https://habrastorage.org/webt/po/ls/gk/polsgk0pdev-rayy9tkqd74mrss.png"></p><br><p>  Betrachten Sie die Situation mit drei Servern (China, Russland, Singapur) und drei Clients (Russland, China und die Philippinen): </p><br><ul><li>  Server haben eine √∂ffentliche Adresse, Clients hinter NAT; </li><li>  ILV w√§hrend des n√§chsten Verbots wahrscheinlicher Proxies Das Telegramm blockierte alle Hoster mit Ausnahme des "freundlichen" China; </li><li>  Die Netzwerkgrenze von China &lt;-&gt; RF ist instabil und kann fallen (aufgrund von ILV und / oder aufgrund des chinesischen Zensors). </li><li>  Verbindungen nach Singapur sind bedingt stabil (pers√∂nliche Erfahrung); </li><li>  Manila (Philippinen) ist f√ºr niemanden eine Bedrohung und daher f√ºr alle erlaubt (aufgrund der Entfernung von allen und allem). </li></ul><br><p>  Betrachten Sie zum Beispiel den Verkehrsaustausch zwischen Shanghai und Moskau (ungef√§hr) die Szenarien von Tinc: </p><br><ol><li>  Einheimische Situation: Moskau &lt;-&gt; Russland-srv &lt;-&gt; China-srv &lt;-&gt; Shanghai </li><li>  ILV geschlossene Verbindung nach China: Moskau &lt;-&gt; Russland-srv &lt;-&gt; Manila &lt;-&gt; Singapur &lt;-&gt; Shanghai </li><li>  (nach 2) Bei einem Serverausfall in Singapur wird der Datenverkehr auf den Server in China √ºbertragen und umgekehrt. </li></ol><br><p>  Wann immer m√∂glich, versucht Tinc, durch Stanzen eine direkte Verbindung zwischen den beiden Knoten hinter NAT herzustellen. </p><br><h1 id="kratkaya-vvodnaya-v-konfigurirovanie-tinc">  Eine kurze Einf√ºhrung in die Zinkkonfiguration </h1><br><p>  Tinc ist als einfach zu konfigurierender Dienst positioniert.  Es ist jedoch ein Fehler aufgetreten - um einen neuen Knoten zu erstellen, ist dies nur minimal erforderlich: </p><br><ul><li>  Beschreiben der <code>tinc.conf</code> (Typ, Name) ( <code>tinc.conf</code> ); </li><li>  Beschreiben der Konfigurationsdatei (bediente Subnetze, √∂ffentliche Adressen) ( <code>hosts/</code> ); </li><li>  einen Schl√ºssel erstellen; </li><li>  Erstellen Sie ein Skript, das die <code>tinc-up</code> und die zugeh√∂rigen Parameter <code>tinc-up</code> ( <code>tinc-up</code> ). </li><li>  Es ist ratsam, ein Skript zu erstellen, das die erstellten Parameter nach dem Stoppen l√∂scht ( <code>tinc-down</code> ). </li></ul><br><p>  Wenn Sie eine Verbindung zu einem vorhandenen Netzwerk herstellen, m√ºssen Sie au√üerdem die vorhandenen Hostschl√ºssel erhalten und Ihre eigenen bereitstellen. </p><br><p>  Dh f√ºr den zweiten Knoten </p><br><p><img src="https://habrastorage.org/webt/o7/nk/x8/o7nkx80o15rsuzphmncldc2ywek.png"></p><br><p>  Zum dritten </p><br><p><img src="https://habrastorage.org/webt/_p/ag/sf/_pagsfvg-lspeyvn-s0b2unhcha.png"></p><br><p>  Bei Verwendung der bidirektionalen Synchronisation (z. B. <code>unison</code> ) erh√∂ht sich die Anzahl der zus√§tzlichen Operationen auf N Teile, wobei N die Anzahl der √∂ffentlichen Knoten ist. </p><br><blockquote>  Wir m√ºssen den Entwicklern von Tinc Tribut zollen - f√ºr die Aufnahme in das Netzwerk tauschen Sie einfach die Schl√ºssel aus <br>  mit nur einem der Knoten (Bootknoten).  Nach dem Starten des Dienstes und dem Herstellen einer Verbindung zum Teilnehmer erh√§lt tinc die Topologie <br>  Netzwerk und wird in der Lage sein, mit allen Teilnehmern zu arbeiten. <br><br>  Wenn der Boot-Host jedoch nicht mehr verf√ºgbar ist und tinc neu gestartet wurde, gibt es keine M√∂glichkeit <br>  stellt eine Verbindung zum virtuellen Netzwerk her. </blockquote><p>  Dar√ºber hinaus bieten die enormen M√∂glichkeiten von Tinc zusammen mit der akademischen Dokumentation (gut beschrieben, aber nur wenige Beispiele) ein umfangreiches Feld f√ºr Fehler. </p><br><h1 id="prichiny-sozdaniya-tinc-boot">  Gr√ºnde, Tinc-Boot zu erstellen </h1><br><p>  Wenn wir die oben beschriebenen Probleme verallgemeinern und als Aufgaben formulieren, erhalten wir: </p><br><ol><li>  Die F√§higkeit, mit minimalem Aufwand eine neue Site zu erstellen, ist erforderlich. <br><ul><li>  M√∂glicherweise muss es m√∂glich sein, dem durchschnittlichen Spezialisten (enikey) eine kleine Leitung zu geben, um einen neuen Knoten zu erstellen und eine Verbindung zum Netzwerk herzustellen. </li></ul></li><li>  Es ist erforderlich, eine automatische Verteilung der Schl√ºssel zwischen allen aktiven Knoten bereitzustellen. </li><li>  Es ist erforderlich, ein vereinfachtes Schl√ºsselaustauschverfahren zwischen dem Bootnod und dem neuen Client bereitzustellen. </li></ol><br><blockquote>  Bootknoten - ein Knoten mit einer √∂ffentlichen Adresse (siehe oben); </blockquote><p>  Aufgrund der Anforderungen von Anspruch 2 kann argumentiert werden, dass nach dem Schl√ºsselaustausch zwischen dem Bootknoten und dem neuen Knoten und danach <br>  Wenn Sie den Knoten mit dem Netzwerk verbinden, erfolgt die Verteilung des neuen Schl√ºssels automatisch. </p><br><p>  Es sind diese Aufgaben, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">tinc-boot</a> ausf√ºhrt. </p><br><p>  <strong>tinc-boot</strong> ist eine eigenst√§ndige Open-Source-Anwendung, die neben <code>tinc</code> bietet: </p><br><ul><li>  einfache Erstellung eines neuen Knotens; </li><li>  automatische Verbindung zu einem bestehenden Netzwerk; </li><li>  Standardm√§√üig die meisten Parameter einstellen; </li><li>  Schl√ºsselverteilung zu Honigknoten. </li></ul><br><h1 id="arhitektura">  Architektur </h1><br><p>  Die ausf√ºhrbare Datei von <code>tinc-boot</code> besteht aus vier Komponenten: einem Bootknotenserver, einem Schl√ºsselverteilungsverwaltungsserver und RPC-Verwaltungsbefehlen daf√ºr sowie einem Knotengenerierungsmodul. </p><br><h2 id="modul-generacii-uzla">  Knotengenerierungsmodul </h2><br><p>  Das Knotengenerierungsmodul ( <code>tinc-boot gen</code> ) erstellt alle erforderlichen Dateien, damit tinc erfolgreich ausgef√ºhrt werden kann. </p><br><p>  Vereinfacht kann sein Algorithmus wie folgt beschrieben werden: </p><br><ol><li>  Definieren Sie den Hostnamen, das Netzwerk, die IP-Parameter, den Port, die Subnetzmaske usw. </li><li>  Normalisieren Sie sie (tinc hat eine Grenze f√ºr einige Werte) und erstellen Sie die fehlenden </li><li>  √úberpr√ºfen Sie die Parameter </li><li>  Installieren Sie gegebenenfalls tinc-boot auf dem System (deaktivierbar). </li><li>  Erstellen Sie <code>tinc-up</code> , <code>tinc-down</code> , <code>tinc-up</code> und <code>tinc-down</code> <code>subnet-down</code> </li><li>  Erstellen <code>tinc.conf</code> Konfigurationsdatei <code>tinc.conf</code> </li><li>  <code>hosts/</code> erstellen <code>hosts/</code> </li><li>  F√ºhren Sie die Schl√ºsselgenerierung durch </li><li>  F√ºhren Sie einen Schl√ºsselaustausch mit dem Bootknoten durch <br><ol><li>  Verschl√ºsseln und signieren Sie Ihre eigene Hostdatei mit einem √∂ffentlichen Schl√ºssel, einem zuf√§lligen Initialisierungsvektor (Nounce) und einem Hostnamen mit xchacha20poly1305, wobei der Verschl√ºsselungsschl√ºssel das Ergebnis der sha256-Funktion des Tokens ist </li><li>  Senden Sie Daten √ºber das HTTP-Protokoll an den Bootknoten </li><li>  Entschl√ºsseln Sie die empfangene Antwort und den <code>X-Node</code> Header, der den Namen des Bootknotens enth√§lt, unter Verwendung des urspr√ºnglichen Nouncings und des gleichen Algorithmus </li><li>  Wenn dies erfolgreich ist, speichern Sie den empfangenen Schl√ºssel in <code>hosts/</code> und f√ºgen Sie der Konfigurationsdatei einen <code>ConnectTo</code> Eintrag hinzu (d. H. Eine Empfehlung, wo eine Verbindung hergestellt werden soll). </li><li>  Verwenden Sie andernfalls die folgende Adresse in der Liste des Startknotens und wiederholen Sie den Vorgang ab Schritt 2 </li></ol></li><li>  Empfehlungen zum Starten eines Dienstes anzeigen </li></ol><br><blockquote>  Die Konvertierung √ºber SHA-256 wird nur verwendet, um den Schl√ºssel auf 32 Byte zu normalisieren </blockquote><p>  F√ºr den allerersten Knoten (dh wenn nichts als Startadresse anzugeben ist) wird Schritt 9 √ºbersprungen.  Flagge - <code>--standalone</code> . </p><br><p>  <strong>Beispiel 1 - Erstellen der ersten √∂ffentlichen Site</strong> </p><br><p>  Die √∂ffentliche Adresse lautet <code>1.2.3.4</code> </p><br><p> <code>sudo tinc-boot gen --standalone -a 1.2.3.4</code> </p> <br><ul><li>  Mit dem Flag <code>-a</code> k√∂nnen Sie √∂ffentlich verf√ºgbare Adressen angeben </li></ul><br><p>  <strong>Beispiel 1 - Hinzuf√ºgen eines nicht √∂ffentlichen Knotens zum Netzwerk</strong> </p><br><p>  Der Startknoten wird dem obigen Beispiel entnommen.  Auf dem Host muss der Tinc-Boot-Bootknoten ausgef√ºhrt werden (sp√§ter beschrieben). </p><br><p> <code>sudo tinc-boot gen --token "MY TOKEN" http://1.2.3.4:8655</code> </p> <br><ul><li>  <code>--token</code> Flag <code>--token</code> setzt das Autorisierungstoken </li></ul><br><h2 id="modul-nachalnoy-zagruzki">  Bootstrap-Modul </h2><br><p>  Das <code>tinc-boot bootnode</code> l√∂st einen HTTP-Server mit einer API f√ºr den Prim√§rschl√ºsselaustausch mit neuen Clients aus. </p><br><p>  Standardm√§√üig wird Port <code>8655</code> . </p><br><p>  Vereinfacht kann der Algorithmus wie folgt beschrieben werden: </p><br><ol><li>  Akzeptieren Sie eine Anfrage von einem Client </li><li>  Entschl√ºsseln und √ºberpr√ºfen Sie die Anforderung mit xchacha20poly1305, wobei Sie den w√§hrend der Anforderung √ºbergebenen Initialisierungsvektor verwenden und der Verschl√ºsselungsschl√ºssel das Ergebnis der Funktion sha256 aus dem Token ist </li><li>  √úberpr√ºfen Sie den Namen </li><li>  Datei speichern, wenn noch keine Datei mit demselben Namen vorhanden ist </li><li>  Verschl√ºsseln und signieren Sie Ihre eigene Hostdatei und Ihren eigenen Namen mit dem oben beschriebenen Algorithmus </li><li>  Zur√ºck zu Punkt 1 </li></ol><br><p>  Zusammen ist der Prim√§rschl√ºsselaustauschprozess wie folgt: </p><br><p><img src="https://habrastorage.org/webt/ui/_p/sq/ui_psqswkeazp6yjeggbekuz58m.png"></p><br><p>  <strong>Beispiel 1 - Starten des Download-Knotens</strong> </p><br><p>  Es wird davon ausgegangen, dass die <code>tinc-boot gen</code> des Knotens durchgef√ºhrt wurde ( <code>tinc-boot gen</code> ) </p><br><p> <code>tinc-boot bootnode --token "MY TOKEN"</code> </p> <br><ul><li>  <code>--token</code> Flag <code>--token</code> setzt das Autorisierungstoken.  Dies sollte auch f√ºr Clients gelten, die eine Verbindung zum Host herstellen. </li></ul><br><p>  <strong>Beispiel 2 - Starten des Download-Knotens als Dienst</strong> </p><br><p> <code>tinc-boot bootnode --service --token "MY TOKEN"</code> </p> <br><ul><li>  <code>--service</code> Flag <code>--service</code> an, einen systemd-Dienst zu erstellen (standardm√§√üig in diesem Beispiel <code>tinc-boot-dnet.service</code> ). </li><li>  <code>--token</code> Flag <code>--token</code> setzt das Autorisierungstoken.  Dies sollte auch f√ºr Clients gelten, die eine Verbindung zum Host herstellen. </li></ul><br><h2 id="modul-raspredeleniya-klyuchey">  Schl√ºsselverteilungsmodul </h2><br><p>  Das Schl√ºsselverteilungsmodul ( <code>tinc-boot monitor</code> ) l√∂st einen HTTP-Server mit einer API zum Austausch von Schl√ºsseln mit anderen Knoten <strong>im VPN aus</strong> .  Es ist auf die vom Netzwerk ausgegebene Adresse festgelegt (der Standardport ist <code>1655</code> , es treten keine Konflikte mit mehreren Netzwerken auf, da jedes Netzwerk eine eigene Adresse hat / haben muss). </p><br><p>  Das Modul startet und arbeitet vollautomatisch: Sie m√ºssen nicht im manuellen Modus damit arbeiten. </p><br><p>  Dieses Modul startet automatisch, wenn das Netzwerk aktiv ist (im <code>tinc-up</code> Skript) und stoppt automatisch, wenn es stoppt (im <code>tinc-down</code> Skript). </p><br><p>  Unterst√ºtzt Operationen: </p><br><ul><li>  <code>GET /</code> - Geben Sie Ihre Knotendatei an </li><li>  <code>POST /rpc/watch?node=&lt;&gt;&amp;subnet=&lt;&gt;</code> - <code>POST /rpc/watch?node=&lt;&gt;&amp;subnet=&lt;&gt;</code> eine Datei von einem anderen Knoten ab, sofern ein √§hnlicher Dienst darauf ausgef√ºhrt wird.  Standardm√§√üig l√§uft das Zeitlimit f√ºr Versuche alle 30 Sekunden auf 10 Sekunden ab, bis Erfolg oder Abbruch eintreten. </li><li>  <code>POST /rpc/forget?node=&lt;&gt;</code> - Versuche (falls vorhanden) hinterlassen, die Datei von einem anderen Knoten <code>POST /rpc/forget?node=&lt;&gt;</code> </li><li>  <code>POST /rpc/kill</code> - <code>POST /rpc/kill</code> den Dienst </li></ul><br><p>  Zus√§tzlich wird jede Minute (standardm√§√üig) und wenn eine neue Konfigurationsdatei empfangen wird, die Indizierung der gespeicherten Knoten f√ºr neue √∂ffentliche Knoten durchgef√ºhrt.  Wenn Knoten mit dem <code>tinc.conf</code> erkannt werden, wird der Konfigurationsdatei <code>tinc.conf</code> ein Eintrag hinzugef√ºgt, um die Verbindung beim Neustart zu empfehlen. </p><br><h2 id="modul-raspredeleniya-klyuchey-upravlenie">  Schl√ºsselverteilungsmodul (Verwaltung) </h2><br><p>  Befehle zum Anfordern ( <code>tinc-boot watch</code> ) und Abbrechen der Anforderung ( <code>tinc-boot forget</code> ) der Konfigurationsdatei von anderen Knoten werden automatisch ausgef√ºhrt, wenn ein neuer Knoten erkannt ( <code>subnet-up</code> Skript) bzw. gestoppt ( <code>subnet-down</code> Skript) wird. </p><br><p>  Beim Beenden des Dienstes wird das <code>tinc-down</code> Skript <code>tinc-down</code> bei dem der <code>tinc-boot kill</code> das Schl√ºsselverteilungsmodul stoppt. </p><br><h1 id="vmesto-itogo">  Anstelle von total </h1><br><p>  Dieses Dienstprogramm wurde unter dem Einfluss kognitiver Dissonanzen zwischen dem Genie der Tinc-Entwickler und der linear wachsenden Komplexit√§t beim Einrichten neuer Knoten erstellt. </p><br><p>  Die Hauptideen im Entwicklungsprozess waren: </p><br><ul><li>  Wenn etwas automatisiert werden kann, muss es automatisiert werden. </li><li>  Standardwerte sollten mindestens 80% der Nutzung abdecken (Pareto-Prinzip); </li><li>  Jeder Wert kann sowohl mit Flags als auch mit Umgebungsvariablen neu definiert werden. </li><li>  Das Dienstprogramm sollte helfen und nicht den Wunsch hervorrufen, dem Sch√∂pfer die ganze Bestrafung des Himmels aufzuerlegen. </li><li>  Die Verwendung eines Autorisierungstokens f√ºr die Erstinitialisierung ist ein offensichtliches Risiko, wurde jedoch nach M√∂glichkeit aufgrund der vollst√§ndigen Kryptografie und Authentifizierung minimiert (selbst der Knotenname im Antwortheader kann nicht ersetzt werden). </li></ul><br><p>  Eine kleine Chronologie: </p><br><ul><li>  Das erste Mal vor mehr als 4 Jahren habe ich Tinc verwendet.  Studierte eine bedeutende Menge an Material.  Richten Sie ein ideales (meiner Meinung nach) Netzwerk ein </li><li>  Nach einem halben Jahr wurde Zink zugunsten von Nullpunkt als bequemeres / flexibleres Werkzeug ersetzt </li><li>  Vor 2 Jahren habe ich ein ansible Playbook erstellt, um tinc bereitzustellen </li><li>  Einen Monat sp√§ter brach mein Skript bei der inkrementellen Bereitstellung zusammen (d. H. Wenn es nicht m√∂glich ist, auf alle Netzwerkknoten zuzugreifen, was bedeutet, dass Schl√ºssel verteilt werden). </li><li>  Vor zwei Wochen habe ich ein Bash-Skript geschrieben, das der Prototyp f√ºr <code>tinc-boot</code> </li><li>  Vor 3 Tagen nach der zweiten Iteration wurde die erste (genauer gesagt 0.0.1) Version des Dienstprogramms geboren </li><li>  Vor einem Tag habe ich die Installation eines neuen Knotens auf eine Zeile reduziert: <code>curl -L https://github.com/reddec/tinc-boot/releases/latest/download/tinc-boot_linux_amd64.tar.gz | sudo tar -xz -C /usr/local/bin/ tinc-boot</code> <code>curl -L https://github.com/reddec/tinc-boot/releases/latest/download/tinc-boot_linux_amd64.tar.gz | sudo tar -xz -C /usr/local/bin/ tinc-boot</code> </li><li>  In K√ºrze wird die M√∂glichkeit einer noch einfacheren Verbindung zum Netzwerk hinzugef√ºgt (ohne die Sicherheit zu beeintr√§chtigen). </li></ul><br><p>  W√§hrend der Entwicklung habe ich aktiv auf realen Servern und Clients getestet (das Bild aus der obigen Beschreibung von tinc stammt aus dem realen Leben).  Jetzt funktioniert das System einwandfrei und alle VPN-Dienste von Drittanbietern sind jetzt deaktiviert. </p><br><p>  Der Anwendungscode ist in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GO geschrieben und</a> unter der MPL 2.0-Lizenz <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ge√∂ffnet</a> .  Eine Lizenz (kostenlose √úbersetzung) erm√∂glicht die kommerzielle Nutzung (falls dies pl√∂tzlich erforderlich ist), ohne das Quellprodukt zu √∂ffnen.  Die einzige Voraussetzung ist, dass die √Ñnderungen in das Projekt √ºbertragen werden. </p><br><p>  Poolanfragen sind willkommen. </p><br><h1 id="poleznye-ssylki">  N√ºtzliche Links </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Repository</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tinc Dokumentation</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de468213/">https://habr.com/ru/post/de468213/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de468197/index.html">Wie wir ein gro√ües Legacy-Netzwerk automatisieren</a></li>
<li><a href="../de468203/index.html">R√§tsel auf der Suche nach der perfekten Chance</a></li>
<li><a href="../de468205/index.html">GIT von innen: Einf√ºhrung (√úbersetzung)</a></li>
<li><a href="../de468207/index.html">Wie wir Zabbix aktualisiert haben</a></li>
<li><a href="../de468211/index.html">"Ich wollte nur einen Witz machen, aber niemand verstand" oder wie ich mich bei der Pr√§sentation des Projekts nicht begraben sollte</a></li>
<li><a href="../de468217/index.html">Dr. Jekyll und Mr. Hyde Unternehmenskultur</a></li>
<li><a href="../de468219/index.html">Erweiterbare Erweiterungsmechanismen in JavaScript</a></li>
<li><a href="../de468223/index.html">Habr Weekly # 19 / BT-T√ºr f√ºr die Katze, warum die KI betr√ºgt, was der zuk√ºnftige Arbeitgeber fragen soll, ein Tag mit iPhone 11 Pro</a></li>
<li><a href="../de468225/index.html">Reduzieren der Bundle-Gr√∂√üe mit Webpack Analyzer und React Lazy / Suspense</a></li>
<li><a href="../de468229/index.html">Ein Hinweis zur Leere in JavaScript und TypeScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>