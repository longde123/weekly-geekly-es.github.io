<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∑üèª üé∂ üéØ Agulare Komponenten im Winkel üôÜüèª üî® üõÄüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wenn Sie an einer Bibliothek wiederverwendbarer Komponenten arbeiten, ist die API-Frage besonders akut. Einerseits m√ºssen Sie eine zuverl√§ssige und ge...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Agulare Komponenten im Winkel</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/473108/"><p>  Wenn Sie an einer Bibliothek wiederverwendbarer Komponenten arbeiten, ist die API-Frage besonders akut.  Einerseits m√ºssen Sie eine zuverl√§ssige und genaue Entscheidung treffen, andererseits m√ºssen Sie viele Sonderf√§lle erf√ºllen.  Dies gilt f√ºr die Arbeit mit Daten und f√ºr die externen Funktionen verschiedener Anwendungsf√§lle.  Dar√ºber hinaus sollte alles einfach aktualisiert und in Projekten eingef√ºhrt werden k√∂nnen. </p><br><p>  Solche Komponenten ben√∂tigen eine beispiellose Flexibilit√§t.  In diesem Fall kann die Einstellung nicht zu kompliziert gemacht werden, da sie sowohl von den Senioren als auch vom Juni verwendet wird.  Das Reduzieren der Codeduplizierung ist eine der Aufgaben der Komponentenbibliothek.  Daher kann die Konfiguration nicht in Kopiercode umgewandelt werden. </p><br><p><img src="https://habrastorage.org/webt/pc/0n/84/pc0n84gqkevxlhxdkfw7xhyay_i.png" alt="Bruce Lee"></p><a name="habracut"></a><br><h2 id="data-agnostic-komponenty">  Datenunabh√§ngige Komponenten </h2><br><p>  Angenommen, wir erstellen eine Schaltfl√§che mit einem Dropdown-Men√º.  Was wird seine API sein?  Nat√ºrlich ben√∂tigt er einige <i>Elemente</i> als Eingabe - eine Reihe von Men√ºelementen.  H√∂chstwahrscheinlich wird die erste Version der Benutzeroberfl√§che folgenderma√üen aussehen: </p><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">MenuItem</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> text: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">readonly</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span></span>; }</code> </pre> <br><p>  Ziemlich schnell <code>disabled: boolean</code> wird dies erg√§nzen.  Dann kommen Designer und zeichnen ein Men√º mit Symbolen.  Und die Jungs vom Nachbarprojekt werden dagegen Icons zeichnen.  Und jetzt w√§chst die Schnittstelle, es ist notwendig, immer mehr Sonderf√§lle abzudecken, und aufgrund der F√ºlle an Flaggen beginnt die Komponente, der UN-Versammlung zu √§hneln. </p><br><p><img src="https://habrastorage.org/webt/_i/yl/6a/_iyl6asyyxmlupg18qiudynytnk.jpeg"></p><br><p>  Generika kommen zur Rettung.  Wenn Sie die Komponente so organisieren, dass sie sich nicht um das Datenmodell k√ºmmert, verschwinden alle diese Probleme.  Anstatt <code>item.onClick</code> auf einen Klick <code>item.onClick</code> , gibt das Men√º einfach das angeklickte Element aus.  Was danach damit zu tun ist, ist eine Aufgabe f√ºr Bibliotheksbenutzer.  Auch wenn sie dasselbe <code>item.onClick</code> . </p><br><p>  Im Fall eines <code>disabled</code> Status wird das Problem beispielsweise mithilfe spezieller Handler behoben.  Die <code>disabledItemHandler: (item: T) =&gt; boolean</code> Methode wird an die Komponente √ºbergeben <code>disabledItemHandler: (item: T) =&gt; boolean</code> , √ºber die jedes Element ausgef√ºhrt wird.  Das Ergebnis gibt an, ob dieses Element gesperrt ist. </p><br><p><img src="https://habrastorage.org/webt/zg/xf/nc/zgxfnc8ssnfx9uw6y355gcymmdc.png"></p><br><p>  Wenn Sie eine <em>ComboBox ausf√ºhren</em> , <em>f√§llt</em> Ihnen m√∂glicherweise eine Schnittstelle ein, die eine Zeichenfolge f√ºr die Anzeige und einen echten beliebigen Wert speichert, der im Code verwendet wird.  Diese Idee ist klar.  Wenn der Benutzer den Text <em>eingibt,</em> sollte die <em>ComboBox</em> die Optionen nach der eingegebenen Zeile filtern. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ComboBoxItem</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> text: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: any; }</code> </pre> <br><p>  Aber auch hier werden die Grenzen eines solchen Ansatzes auftauchen - sobald ein Design erscheint, bei dem die Linie nicht ausreicht.  Dar√ºber hinaus enth√§lt das Formular anstelle des tats√§chlichen Werts einen Wrapper. Die Suche wird nicht immer ausschlie√ülich √ºber die Zeichenfolgendarstellung ausgef√ºhrt (z. B. k√∂nnen wir eine Telefonnummer eingeben, aber der Name der Person sollte angezeigt werden).  Und die Anzahl der Schnittstellen wird mit dem Aufkommen anderer Komponenten zunehmen, selbst wenn das Datenmodell unter ihnen dasselbe ist. </p><br><p>  Auch hier helfen Generika und Handler.  Geben wir <code>(item: T) =&gt; string</code> <code>stringify</code> Komponente die Funktion <code>(item: T) =&gt; string</code> .  Der Standardwert ist <code>item =&gt; String(item)</code> .  Sie k√∂nnen also sogar Klassen als Optionen verwenden, indem Sie die <code>toString()</code> -Methode in ihnen definieren.  Wie oben erw√§hnt, m√ºssen Optionen nicht nur nach Zeichenfolgendarstellung gefiltert werden.  Dies ist auch ein guter Fall f√ºr die Verwendung von Handlern.  Sie k√∂nnen einer Komponente eine Funktion bereitstellen, die eine Suchzeichenfolge und ein Element als Eingabe empf√§ngt.  Es wird <code>boolean</code> - dies zeigt an, ob das Element f√ºr die Anforderung geeignet ist. </p><br><blockquote>  Ein weiteres h√§ufiges Beispiel f√ºr die Verwendung einer Schnittstelle ist eine eindeutige ID, die Kopien von JavaScript-Objekten entspricht.  Wenn wir den Formularwert sofort erhalten haben und die Auswahloptionen in einer separaten Anfrage vom Server eingegangen sind, haben sie nur eine Kopie des aktuellen Elements.  Diese Aufgabe wird von einem Handler ausgef√ºhrt, der zwei Elemente als Eingabe empf√§ngt und deren Gleichheit zur√ºckgibt.  Der Standardvergleich ist normal <code>===</code> . </blockquote><p>  Die Registerkarte-Anzeigekomponente muss in der Tat nicht wissen, in welcher Form die Registerkarte an sie √ºbergeben wurde: zumindest mit Text, zumindest mit einem Objekt mit zus√§tzlichen Feldern, auch mit wie.  Kenntnisse des Formats sind f√ºr die Implementierung nicht erforderlich, aber viele stellen die Verkn√ºpfung zu einem bestimmten Format her.  Das Fehlen von Bindungen bedeutet, dass die Komponenten w√§hrend der Verfeinerung keine √Ñnderungen bewirken, die Benutzer nicht dazu zwingen, ihre Daten f√ºr sie anzupassen, und dass atomare Komponenten wie Legow√ºrfel miteinander kombiniert werden k√∂nnen. </p><br><p>  Die gleiche Auswahl an Elementen eignet sich sowohl f√ºr das Kontextmen√º als auch f√ºr Combobox-, Select-, Multi-Select- und einfache Komponenten, die in komplexeren Designs problemlos enthalten sind.  Sie m√ºssen jedoch in der Lage sein, beliebige Daten anzuzeigen. </p><br><p><img src="https://habrastorage.org/webt/cu/zh/sf/cuzhsfzxk1srcnv-vt5dun9muh8.png"><br>  <em>Listen k√∂nnen Avatare, verschiedene Farben, Symbole, die Anzahl der ungelesenen Nachrichten und vieles mehr enthalten.</em> </p><br><blockquote>  Dazu m√ºssen die Komponenten √§hnlich wie bei Generika mit dem Erscheinungsbild arbeiten. </blockquote><br><h2 id="design-agnostic-komponenty">  Designunabh√§ngige Komponenten </h2><br><p>  Angular bietet leistungsstarke Tools zum Definieren des Erscheinungsbilds. </p><br><p>  <em>Stellen</em> Sie sich zum Beispiel eine <em>ComboBox vor</em> , da diese sehr unterschiedlich aussehen kann.  Nat√ºrlich wird in der Komponente ein gewisses Ma√ü an Einschr√§nkungen festgelegt, da diese dem Gesamtdesign der Anwendung entsprechen muss.  Seine Gr√∂√üe, Standardfarben, Polsterung - all dies sollte von selbst funktionieren.  Wir m√∂chten Benutzer nicht dazu zwingen, √ºber alles in Bezug auf das Erscheinungsbild nachzudenken. </p><br><p><img src="https://habrastorage.org/webt/ah/rj/v7/ahrjv7_hlb0ta2fnsshusxssukw.png"></p><br><p>  Beliebige Daten sind wie Wasser: Sie haben keine Form, sie tragen nichts Spezifisches in sich.  Unsere Aufgabe ist es, ihnen die M√∂glichkeit zu geben, ein ‚ÄûSchiff‚Äú f√ºr sie einzurichten.  In diesem Sinne ist die Entwicklung einer vom Erscheinungsbild abstrahierten Komponente wie folgt: </p><br><p><img src="https://habrastorage.org/webt/1f/ve/hl/1fvehlcg_sv4heypbphk72juuzs.png"></p><br><p>  Die Komponente ist eine Art Regal mit der erforderlichen Gr√∂√üe, und eine benutzerdefinierte Vorlage wird verwendet, um den Inhalt anzuzeigen, der darauf ‚Äûplatziert‚Äú wird.  In der Komponente ist zun√§chst eine Standardmethode festgelegt, z. B. die Ausgabe einer Zeichenfolgendarstellung, und der Benutzer kann komplexere Optionen von au√üen √ºbertragen.  Werfen wir einen Blick auf die M√∂glichkeiten, die Angular daf√ºr hat. </p><br><ol><li><p>  Der einfachste Weg, das Erscheinungsbild zu √§ndern, ist die Linieninterpolation.  Eine unver√§nderliche Zeile eignet sich jedoch nicht zum Anzeigen von Men√ºelementen, da sie nichts √ºber jedes Element wei√ü - und alle gleich aussehen.  <strong>Eine statische Zeichenfolge wird des Kontexts beraubt</strong> .  Es ist jedoch durchaus geeignet, den Text "Nothing Found" festzulegen, wenn die Liste der Optionen leer ist. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>{{content}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></li><li><p>  Wir haben bereits √ºber die Zeichenfolgendarstellung beliebiger Daten gesprochen.  Das Ergebnis ist ebenfalls eine Zeichenfolge, wird jedoch durch den Eingabewert bestimmt.  In dieser Situation ist der Kontext ein Listenelement.  Dies ist eine flexiblere Option, obwohl das Ergebnis nicht gestylt werden kann - die Zeichenfolge wird nicht in HTML interpoliert - und noch mehr, dass keine Anweisungen oder Komponenten verwendet werden d√ºrfen. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>{{content(context)}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></li><li><p>  Angular bietet <code>ng-template</code> und die Strukturanweisung <code>*ngTemplateOutlet</code> , <code>*ngTemplateOutlet</code> .  Mit ihrer Hilfe k√∂nnen wir ein St√ºck HTML definieren, das die Eingabe einiger Daten erwartet, und diese an die Komponente √ºbergeben.  Dort wird er mit einem bestimmten Kontext instanziiert.  Wir werden unser Element weitergeben, ohne uns um das Modell zu k√ºmmern.  Die Erstellung der richtigen Vorlage f√ºr Ihre Objekte ist Aufgabe des Consumer-Entwicklers unserer Komponente. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngTemplateOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content; context: context"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Eine Vorlage ist ein sehr leistungsf√§higes Werkzeug, das jedoch in einer vorhandenen Komponente definiert werden muss.  Dies erschwert die Wiederverwendung erheblich.  Manchmal ist in verschiedenen Teilen der Anwendung und sogar in verschiedenen Anwendungen das gleiche Erscheinungsbild erforderlich.  In meiner Praxis ist dies beispielsweise das Erscheinungsbild der Kontoauswahl mit der Anzeige von Name, W√§hrung und Kontostand. <br><img src="https://habrastorage.org/webt/ub/qx/4q/ubqx4q9n5_igvvckb9p-2yx2zjm.png"></p><br></li><li><p>  Die komplexeste M√∂glichkeit, das Erscheinungsbild anzupassen, mit dem dieses Problem gel√∂st wird, sind dynamische Komponenten.  In Angular gibt es die <code>*ngComponentOutlet</code> Direktive schon lange, um sie deklarativ zu erstellen.  Es erlaubt keine √úbertragung von Kontext, aber dieses Problem wird durch die Implementierung von Abh√§ngigkeiten gel√∂st.  Wir k√∂nnen ein Token f√ºr den Kontext <code>Injector</code> und es dem <code>Injector</code> hinzuf√ºgen, mit dem die Komponente erstellt wird. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngComponentOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content; injector: injector"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Es ist erw√§hnenswert, dass der Kontext nicht nur das Element sein kann, das wir anzeigen m√∂chten, sondern auch die Umst√§nde, unter denen er sich befindet: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">let-item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">let-focused</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"focused"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- ... --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Wenn sich beispielsweise ein Konto abhebt, spiegelt sich der Fokusstatus des Elements im Erscheinungsbild wider - der Hintergrund des Symbols wechselt von grau zu wei√ü.  Im Allgemeinen ist es sinnvoll, die Bedingungen, die sich m√∂glicherweise auf die Anzeige der Vorlage auswirken, in den Kontext zu √ºbertragen.  Dieser Punkt ist m√∂glicherweise die einzige Einschr√§nkungsschnittstelle dieses Ansatzes. </p><br></li></ol><br><p><img src="https://habrastorage.org/webt/0r/_b/ny/0r_bnyldkla9a93ovsesmivwvqg.png"></p><br><h2 id="universalnyy-outlet">  Universal Outlet </h2><br><p>  Die oben beschriebenen Tools sind ab der f√ºnften Version in Angular verf√ºgbar.  Wir m√∂chten jedoch problemlos von einer Option zur anderen wechseln.  Zu diesem Zweck stellen wir eine Komponente zusammen, die Inhalt und Kontext als Eingabe akzeptiert und die entsprechende Methode zum automatischen Einf√ºgen dieses Inhalts implementiert.  Im Allgemeinen reicht es aus, zu lernen, zwischen den Typen <code>string</code> , <code>number</code> , <code>(context: T) =&gt; string | number</code>  <code>(context: T) =&gt; string | number</code> , <code>TemplateRef&lt;T&gt;</code> und <code>Type&lt;any&gt;</code> (aber es gibt hier einige Nuancen, die wir unten diskutieren werden). </p><br><p>  Die Komponentenvorlage sieht folgenderma√üen aus: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngSwitch</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"type"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngSwitchCase</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'primitive'"</span></span></span><span class="hljs-tag">&gt;</span></span>{{content}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngSwitchCase</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'function'"</span></span></span><span class="hljs-tag">&gt;</span></span>{{content(context)}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngSwitchCase</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'template'"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngTemplateOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content; context: context"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngSwitchCase</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'component'"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngComponentOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content; injector: injector"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Der Code erh√§lt einen Typ Getter, um die entsprechende Methode auszuw√§hlen.  Es ist zu beachten, dass wir eine Komponente im Allgemeinen nicht von einer Funktion unterscheiden k√∂nnen.  Bei Verwendung von Lazy-Modulen ben√∂tigen wir einen <code>Injector</code> , der √ºber die Existenz der Komponente Bescheid wei√ü.  Dazu erstellen wir eine Wrapper-Klasse.  Dies erm√∂glicht es auch, es anhand der folgenden <code>instanceof</code> zu bestimmen: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ComponentContent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>( readonly component: Type&lt;T&gt;, private readonly injector: Injector | null = null, ) {} }</code> </pre> <br><p>  F√ºgen Sie eine Methode hinzu, um einen Injektor mit dem √ºbergebenen Kontext zu erstellen: </p><br><pre> <code class="javascript hljs">createInjectorWithContext(injector: Injector, <span class="hljs-attr"><span class="hljs-attr">context</span></span>: C): Injector { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Injector.create({ <span class="hljs-attr"><span class="hljs-attr">parent</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.injector || injector, <span class="hljs-attr"><span class="hljs-attr">providers</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">provide</span></span>: CONTEXT, <span class="hljs-attr"><span class="hljs-attr">useValue</span></span>: context, }, ], }); }</code> </pre> <br><p>  In den meisten F√§llen k√∂nnen Sie mit den Vorlagen so arbeiten, wie sie sind.  Wir m√ºssen jedoch ber√ºcksichtigen, dass die Vorlage √Ñnderungen an der Stelle ihrer Definition √ºberpr√ºft werden muss.  Wenn Sie es vom Definitionsort in die <em>Ansicht √ºbertragen</em> , die parallel oder h√∂her im Baum liegt, werden die √Ñnderungen, die darin ausgel√∂st werden k√∂nnen, nicht in der urspr√ºnglichen <em>Ansicht √ºbernommen</em> . </p><br><p>  Um diese Situation zu korrigieren, verwenden wir nicht nur eine Vorlage, sondern eine Direktive, deren Definitionsort auch <code>ChangeDetectorRef</code> .  Auf diese Weise k√∂nnen wir bei Bedarf nach √Ñnderungen suchen. </p><br><h2 id="polimorfnye-shablony">  Polymorphe Muster </h2><br><p>  In der Praxis kann es hilfreich sein, das Verhalten der Vorlage abh√§ngig von der Art des Inhalts zu steuern, der in die Vorlage eingegangen ist. </p><br><p>  Zum Beispiel m√∂chten wir die M√∂glichkeit geben, eine Vorlage f√ºr etwas Besonderes auf eine Komponente zu √ºbertragen.  Gleichzeitig ben√∂tigen Sie in den meisten F√§llen nur ein Symbol.  In einer solchen Situation k√∂nnen Sie das Standardverhalten konfigurieren und verwenden, wenn ein Grundelement oder eine Funktion in die Eingabe eingegeben wurde.  Manchmal ist sogar die Art des Grundelements wichtig: Wenn Sie beispielsweise eine Ausweiskomponente haben, um die Anzahl der ungelesenen Nachrichten auf einer Registerkarte anzuzeigen, aber Seiten, die Aufmerksamkeit erfordern, mit einem speziellen Symbol hervorheben m√∂chten. </p><br><p><img src="https://habrastorage.org/webt/sr/ag/gk/sraggknu2ikgpz5tezg5o4zgsdc.png"></p><br><p>  Dazu m√ºssen Sie noch etwas hinzuf√ºgen - eine Vorlage √ºbergeben, um Grundelemente anzuzeigen.  F√ºgen <code>@ContentChild</code> der Komponente <code>@ContentChild</code> , die <code>TemplateRef</code> aus dem Inhalt √ºbernimmt.  Wenn eine gefunden wird und eine Funktion, Zeichenfolge oder Zahl an den Inhalt √ºbergeben wird, k√∂nnen wir sie mit dem Grundelement als Kontext instanziieren: </p><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngSwitchCase</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'interpolation'"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"!template; else child"</span></span></span><span class="hljs-tag">&gt;</span></span>{{primitive}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">child</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngTemplateOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"template; context: { $implicit: primitive }"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Jetzt k√∂nnen wir die Interpolation formatieren oder das Ergebnis sogar zur Anzeige an eine Komponente √ºbergeben: </p><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">content-outlet</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">context</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"context"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">let-primitive</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"primitive"</span></span></span><span class="hljs-tag">&gt;</span></span>{{primitive}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">content-outlet</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Es ist Zeit, unseren Code in die Praxis umzusetzen. </p><br><h2 id="ispolzovanie">  Verwenden Sie </h2><br><p>  Zum Beispiel skizzieren wir zwei Komponenten: Registerkarten und <em>ComboBox</em> .  Die Registerkartenvorlage besteht einfach aus einem Inhaltsausgang f√ºr jede Registerkarte, wobei das vom Benutzer √ºbergebene Objekt der Kontext ist: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">content-outlet</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngFor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let tab of tabs"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class.disabled</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"disabledItemHandler(tab)"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">context</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"getContext(tab)"</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">)=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onClick(tab)"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">content-outlet</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Sie m√ºssen Standardstile festlegen: z. B. Schriftgr√∂√üe, Unterstreichung unter der aktuellen Registerkarte, Farbe.  Aber wir werden das konkrete Erscheinungsbild dem Inhalt √ºberlassen.  Der Komponentencode lautet ungef√§hr so: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TabsComponent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ @Input() tabs: ReadonlyArray&lt;T&gt; = []; @Input() content: Content = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{$implicit}</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>($implicit); @Input() disabledItemHandler: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tab: T</span></span></span><span class="hljs-function">) =&gt;</span></span> boolean = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; @Input() activeTab: T | <span class="hljs-literal"><span class="hljs-literal">null</span></span> = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; @Output() activeTabChange = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EventEmitter&lt;T&gt;(); getContext($implicit: T): IContextWithActive&lt;T&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { $implicit, <span class="hljs-attr"><span class="hljs-attr">active</span></span>: $implicit === <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.activeTab, }; } onClick(tab: T) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.activeTab = tab; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.activeTabChange.emit(tab); } }</code> </pre> <br><p>  Wir haben eine Komponente, die mit einem beliebigen Array arbeiten kann und diese als Registerkarten anzeigt.  Sie k√∂nnen dort einfach Zeichenfolgen √ºbergeben und erhalten das grundlegende Aussehen: </p><br><p><img src="https://habrastorage.org/webt/vs/r8/yp/vsr8yp5h-bhqkel8nyjwns_fwyk.png"></p><br><p>  Sie k√∂nnen Objekte und eine Vorlage √ºbertragen, um sie anzuzeigen und das Erscheinungsbild an Ihre Bed√ºrfnisse anzupassen. F√ºgen Sie HTML, Symbole und Indikatoren hinzu: </p><br><p><img src="https://habrastorage.org/webt/px/jm/gg/pxjmggknrn2tlx1kp6lgxhfpoik.png"></p><br><p>  Im Fall von <em>ComboBox werden</em> wir zun√§chst zwei grundlegende Komponenten <em>erstellen,</em> aus denen es besteht: ein Eingabefeld mit einem Symbol und einem Men√º.  Letzteres ist nicht sinnvoll, um im Detail zu malen - es ist Tabs sehr √§hnlich, nur vertikal und hat andere grundlegende Stile.  Das Eingabefeld kann wie folgt implementiert werden: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">input</span></span></span><span class="hljs-tag"> [(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngModel</span></span></span><span class="hljs-tag">)]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"value"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">content-outlet</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mousedown</span></span></span><span class="hljs-tag">)=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onMouseDown($event, input)"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">let-icon</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">innerHTML</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">content-outlet</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Wenn Sie den <em>Eingang</em> absolut positioniert machen, blockiert er den Ausgang und alle Klicks sind darauf.  Dies ist praktisch f√ºr ein einfaches Eingabefeld mit einem dekorativen Symbol, z. B. einem Lupensymbol.  Im obigen Beispiel wird der Ansatz der polymorphen Vorlage angewendet. Die √ºbertragene Zeichenfolge wird als <code>innerHTML</code> zum Einf√ºgen des SVG-Symbols verwendet.  Wenn wir zum Beispiel den Avatar des eingegebenen Benutzers anzeigen m√ºssen, k√∂nnen wir die Vorlage dorthin √ºbertragen. </p><br><p>  <em>ComboBox</em> ben√∂tigt ebenfalls ein Symbol, muss jedoch interaktiv sein.  <code>onMouseDown</code> Sie den <code>onMouseDown</code> Handler zum Ausgang hinzu, um zu verhindern, dass der Fokus <code>onMouseDown</code> : </p><br><pre> <code class="javascript hljs">onMouseDown(event: MouseEvent, <span class="hljs-attr"><span class="hljs-attr">input</span></span>: HTMLInputElement) { event.preventDefault(); input.focus(); }</code> </pre> <br><p>  Wenn Sie die Vorlage als Inhalt √ºbergeben, k√∂nnen Sie sie durch CSS erh√∂hen, indem Sie einfach das Symbol <em>position: relative</em> festlegen.  Dann k√∂nnen Sie Klicks in der <em>ComboBox</em> selbst <em>abonnieren</em> : </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-input</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-input</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">icon</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">viewBox</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0 0 24 24"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class.icon_opened</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"opened"</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">)=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onClick()"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">polyline</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">points</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"7,10 12,15 17,10"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"none"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"currentColor"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke-linecap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"round"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke-linejoin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"round"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke-width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Dank einer solchen Organisation erhalten wir das gew√ºnschte Verhalten: </p><br><p><img src="https://habrastorage.org/webt/ty/i2/d9/tyi2d9hy6ayosztbibp-1ye0cdg.gif"></p><br><p>  Der Komponentencode verzichtet wie bei Registerkarten auf die Kenntnis des Datenmodells.  Es sieht ungef√§hr so ‚Äã‚Äãaus: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ComboBoxComponent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ @Input() items: ReadonlyArray&lt;T&gt; = []; @Input() content: Content = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{$implicit}</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>($implicit); @Input() stringify = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item: T</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(item); @Input() value: T | <span class="hljs-literal"><span class="hljs-literal">null</span></span> = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; @Output() valueChange = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EventEmitter&lt;T | <span class="hljs-literal"><span class="hljs-literal">null</span></span>&gt;(); stringValue = <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-comment"><span class="hljs-comment">//          get filteredItems(): ReadonlyArray&lt;T&gt; { return this.items.filter(item =&gt; this.stringify(item).includes(this.stringValue), ); } }</span></span></code> </pre> <br><p>  Mit diesem einfachen Code k√∂nnen Sie beliebige Objekte in <em>ComboBox verwenden</em> und ihre Anzeige sehr flexibel anpassen.  Nach einigen Verbesserungen, die nicht mit dem beschriebenen Konzept zusammenh√§ngen, ist es einsatzbereit.  Das Aussehen kann f√ºr jeden Geschmack individuell angepasst werden: </p><br><p><img src="https://habrastorage.org/webt/78/-l/xr/78-lxrmsic1iiltn-qx0dekwf2s.gif"></p><br><h2 id="vyvod">  Fazit </h2><br><p>  Durch die Erstellung agnostischer Komponenten muss nicht jeder Einzelfall ber√ºcksichtigt werden.  Gleichzeitig erhalten Benutzer ein einfaches Tool, um die Komponente f√ºr eine bestimmte Situation zu konfigurieren.  Diese L√∂sungen sind einfach wiederzuverwenden.  Die Unabh√§ngigkeit vom Datenmodell macht den Code universell, zuverl√§ssig und erweiterbar.  Gleichzeitig haben wir nicht so viele Zeilen geschrieben und haupts√§chlich die integrierten Angular-Tools verwendet. </p><br><p>  Wenn Sie den beschriebenen Ansatz verwenden, werden Sie schnell feststellen, wie bequem es ist, inhaltlich und nicht in bestimmten Linien oder Mustern zu denken.  Anzeigen von Validierungsfehlermeldungen, QuickInfos und modalen Fenstern - dieser Ansatz eignet sich nicht nur zum Anpassen des Erscheinungsbilds, sondern auch zum √úbertragen von Inhalten als Ganzes.  Das Skizzieren von Layouts und das Testen der Logik ist einfach!  Um beispielsweise das Popup anzuzeigen, muss der Benutzer weder eine Komponente noch eine Vorlage erstellen. Sie k√∂nnen einfach die Stub-Zeichenfolge √ºbergeben und sp√§ter darauf zur√ºckgreifen. </p><br><p>  Wir bei Tinkoff.ru haben den beschriebenen Ansatz lange Zeit erfolgreich angewendet und ihn in eine winzige Open-Source-Bibliothek (1 KB gzip) namens <strong><em>ng-polymorpheus</em></strong> verschoben. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quellcode</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">npm-Paket</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Interaktive Demo und Sandbox</a> </p><br><blockquote>  Haben Sie auch etwas, das Sie in Open Source einbinden wollten, aber haben Sie Angst vor den damit verbundenen Aufgaben?  Probieren Sie den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Angular Open-Source Library Starter aus</a> , den wir f√ºr unsere Projekte erstellt haben.  Es hat bereits CI konfiguriert, pr√ºft Commits, Linters, CHANGELOG-Generierung, Testabdeckung und all das Zeug. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de473108/">https://habr.com/ru/post/de473108/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de473092/index.html">AMA mit Habr, # 13: wichtige Neuigkeiten f√ºr Benutzer und Unternehmen</a></li>
<li><a href="../de473094/index.html">Erstaunliche Entwicklergeschichten, Teil 5: Geheimnisse des Universums</a></li>
<li><a href="../de473096/index.html">Erweiterte Datenstrukturen. Erster Teil: Directional Acyclic Graph</a></li>
<li><a href="../de473098/index.html">Kompilieren von FFmpeg zu WebAssembly (= ffmpeg.js): Teil 1 - Kochen</a></li>
<li><a href="../de473100/index.html">Die asynchrone Kommunikation ist der eigentliche Grund, warum Remote-Arbeit effizienter ist.</a></li>
<li><a href="../de473114/index.html">Laravel: Wir analysieren die Grundkonzepte. Dritter Teil: Das Finale</a></li>
<li><a href="../de473120/index.html">Der Entwickler m√∂chte zum Start gehen. Was tun mit dem Arbeitgeber?</a></li>
<li><a href="../de473124/index.html">Wie wir Markov-Ketten verwenden, um L√∂sungen zu bewerten und Fehler zu finden. Mit Python Script</a></li>
<li><a href="../de473128/index.html">FutureVSReal - bei # X5TechFutureNight</a></li>
<li><a href="../de473130/index.html">Geschichte der Videoprozessoren: 1976 - 1995</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>