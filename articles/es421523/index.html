<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游녻 游눕 久勇 Unidad: conociendo los Objetos Scriptables 游녺 游댪 鮫귎잺</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En este tutorial, aprender치 a crear y usar Objetos de secuencias de comandos en Unity. Los Objetos programables pueden ayudarlo a mejorar su flujo de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Unidad: conociendo los Objetos Scriptables</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421523/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddb/365/357/ddb365357b74dc1e5d86d337d90c8398.gif" alt="imagen"></div><br>  En este tutorial, aprender치 a crear y usar Objetos de secuencias de comandos en Unity.  Los Objetos programables pueden ayudarlo a mejorar su flujo de trabajo, reducir la huella de memoria e incluso permitirle dividir la arquitectura del c칩digo. <br><br>  De acuerdo con la documentaci칩n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Unity</a> , ScriptableObject es un c칩digo de clase que le permite crear Objetos Scriptable en el juego para almacenar grandes cantidades de datos compartidos que son independientes de las instancias de script. <br><br>  Hay muchas razones para usar Objetos de secuencias de comandos en Unity.  Pueden reducir la cantidad de memoria utilizada para cada prefabricado adicional, porque el Objeto Scriptable esencialmente sigue el patr칩n de dise침o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Flyweight</a> . <br><br>  Otra ventaja de Scriptable Objects, que ser치 el tema principal de este tutorial, es su uso para la transferencia de datos conveniente.  Consideraremos esta propiedad como un ejemplo de creaci칩n de una tienda de comercio de espadas, que mostrar치 los par치metros, precios y descripciones de varias espadas. <br><a name="habracut"></a><br><blockquote>  <em>Nota:</em> este tutorial asume que est치 familiarizado con el editor de Unity.  Debe comprender c칩mo editar c칩digo en un editor de c칩digo y tener conocimientos b치sicos de C #.  Si necesita mejorar sus habilidades de Unity, consulte otros <a title="Tutoriales de Unity" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tutoriales de Unity</a> . </blockquote><br><h2>  Llegar al trabajo </h2><br>  Comencemos <a href="">descargando los materiales</a> que necesitamos. <br><br>  Descomprima el archivo descargado en un lugar conveniente para usted y abra el proyecto <em>Tutorial Object Starter-Starter</em> en Unity. <br><br>  Deber칤a ver la siguiente carpeta creada como parte de la adquisici칩n del proyecto: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/046/8c3/b63/0468c3b63c16cb562f7d826a51ff8597.png"></div><br><ul><li>  <em>_Configuraci칩n</em> : para el tutorial esta carpeta no es necesaria. </li><li>  <em>Escenas</em> : contiene una escena de <em>Sword Merchant</em> que cubriremos a lo largo del tutorial.  Abre esta escena. </li><li>  <em>Guiones</em> : hasta ahora solo hay un gui칩n, pero durante el tutorial crearemos nuevos. </li><li>  <em>Iconos de espada</em> : contiene im치genes fijas de espadas individuales. </li><li>  <em>Prefabricados de espada</em> : Contiene los prefabricados de todas las espadas en la escena del comerciante de espadas. </li></ul><br><h2>  Crear un objeto programable </h2><br>  Para comenzar, ve a la escena del <em>comerciante de espadas</em> .  Deber칤a verse as칤: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/372/6ea/e89/3726eae89b9ddb9f57a698ed5cd7626d.png"></div><br><h3>  Preparando Objeto Scriptable </h3><br>  춰Es hora de crear el primer objeto programable! <br><br>  En la carpeta <em>Scripts</em> , cree un nuevo script llamado <em>SwordData</em> .  Esta clase se utilizar치 como contenedor para todos los datos de espada que se muestran en la tienda del comerciante de espadas. <br><br>  Dentro de esta clase, comience por heredar de <code>ScriptableObject</code> lugar de <code>MonoBehaviour</code> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SwordData</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span> { }</code> </pre> <br>  Esta acci칩n le dice a Unity que todav칤a queremos usar las caracter칤sticas y m칠todos de Unity, al igual que MonoBehaviour normal, pero ya no necesitamos adjuntar este script a GameObject.  En cambio, se procesar치 como cualquier activo normal, que se puede crear de la misma manera que se crea una prefabricada, una escena o un material. <br><br>  Rellene el script con campos serializados, que contendr치n todos los datos correspondientes a la informaci칩n que se muestra en la interfaz de usuario de Sword Merchant. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SwordData</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span> { [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> swordName; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> description; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Sprite icon; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> goldCost; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> attackDamage; }</code> </pre> <br><ul><li>  <em>swordName</em> : <code>string</code> , en la que se almacenar치 el nombre de la espada. </li><li>  <em>description</em> : <code>string</code> , en la que se almacenar치 la descripci칩n de la espada. </li><li>  <em>icono</em> : el sprite que contendr치 el icono de la espada. </li><li>  <em>goldCost</em> : <code>int</code> para almacenar el valor de la espada en oro. </li><li>  <em>attackDamage</em> : <code>int</code> para almacenar el da침o al atacar con una espada. </li></ul><br><blockquote>  <em>Nota: SerializeField</em> <br><br>  En Unity, el atributo SerializeField le permite tener variables de script privadas disponibles en el Inspector.  Le permitir치 establecer valores en el editor sin proporcionar acceso a la variable desde otros scripts. </blockquote><br>  Cada espada requerir치 su propia implementaci칩n 칰nica de Scriptable Object <em>SwordData</em> .  Pero antes de que podamos crear estas implementaciones, necesitamos agregar un objeto programable al men칰 de activos. <br><br>  Agregue nuestro Objeto de <em>secuencias de comandos</em> al Men칰 de activos agregando el siguiente atributo a la clase <em>SwordData</em> : <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">CreateAssetMenu(fileName = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"New SwordData"</span></span></span><span class="hljs-meta">, menuName = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Sword Data"</span></span></span><span class="hljs-meta">, order = 51)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SwordData</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span></code> </pre> <br><ul><li>  <em>fileName</em> : nombre predeterminado al crear el activo. </li><li>  <em>menuName</em> : nombre del <em>activo</em> que se muestra en el men칰 de activos. </li><li>  <em>orden</em> : colocaci칩n de activos en el men칰 de activos.  Unity divide los activos en subgrupos con un factor de 50. Es decir, un valor de 51 coloca el nuevo activo en el segundo grupo del men칰 de activos. </li></ul><br>  Si todo se hace correctamente, puede ir a <em>Activos &gt;&gt; Crear</em> y ver el nuevo activo de <em>Datos de espada</em> en el men칰.  Debe ubicarse en el segundo grupo bajo el activo Carpeta: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/027/83d/d78/02783dd7809273371aeaf0fde21cbb07.png"></div><br>  Tambi칠n puede hacer clic con el bot칩n derecho en la ventana Proyecto y tambi칠n ver el nuevo activo de Datos de espada: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ec8/f0c/1cf/ec8f0c1cf7b7b861517c0b6838d9c80c.png"></div><br><h3>  Agregar datos </h3><br>  <em>Organizaremos el</em> proyecto creando una carpeta llamada <em>Objetos programables</em> en la carpeta Scripts, y dentro de esta carpeta otra carpeta llamada <em>Datos de espada</em> . <br><br>  Dentro de la carpeta de datos de espada reci칠n creada, cree nuestro primer activo de datos de espada. <br><br>  El nuevo activo de Sword Data a칰n debe tener el nombre de <em>archivo</em> predeterminado previamente especificado <em>FileName</em> .  Seleccione un activo y dupl칤quelo seis veces ( <i>Ctrl / Cmd + D</i> ) para crear siete activos de datos de espada, uno para cada una de las espadas.  Ahora cambie el nombre de cada activo de acuerdo con los prefabricados: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9e6/953/191/9e69531917c13064e6af81b31b58fdf7.gif"></div><br>  Haga clic en el primer activo de <em>Datos de espada</em> en la carpeta Datos de espada y mire la ventana del <em>Inspector</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/af3/380/b20/af3380b20efd5dc0a7485f4f3c7c971a.png"></div><br>  Aqu칤 vemos un activo en el que se almacenar치 informaci칩n sobre una espada en particular.  Completa la informaci칩n de cada espada.  Intenta darles una descripci칩n 칰nica, valor en oro y da침os durante un ataque.  En el campo Icon Sprite, usa los sprites correspondientes ubicados en la carpeta <em>Sword Icons</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b48/d31/025/b48d3102517ad8e0f0877dd6cc28faff.gif"></div><br>  Felicidades  Cre칩 un objeto programable y configur칩 varios activos con este objeto programable. <br><br><h2>  Usando Objeto Scriptable </h2><br>  Ahora comenzaremos a obtener datos de estos Objetos programables. <br><br>  Primero, necesitamos agregar algunos m칠todos getter p칰blicos para que otros scripts puedan acceder a campos privados dentro del Objeto Scriptable.  Abra <em>SwordData.cs</em> y agregue lo siguiente en los campos agregados anteriormente: <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SwordName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> swordName; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Description { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> description; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Sprite Icon { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> icon; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> GoldCost { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> goldCost; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> AttackDamage { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> attackDamage; } }</code> </pre> <br>  Abra <em>Sword.cs</em> y agregue el siguiente c칩digo: <br><br><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SwordData swordData; <span class="hljs-comment"><span class="hljs-comment">// 1 private void OnMouseDown() // 2 { Debug.Log(swordData.name); // 3 Debug.Log(swordData.Description); // 3 Debug.Log(swordData.Icon.name); // 3 Debug.Log(swordData.GoldCost); // 3 Debug.Log(swordData.AttackDamage); // 3 }</span></span></code> </pre> <br>  Esto es lo que agregamos con este c칩digo: <br><br><ol><li>  El contenedor de datos para los datos de esta espada. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OnMouseDown</a> es una funci칩n incorporada de MonoBehaviour que se llama cuando el usuario presiona el bot칩n izquierdo del mouse. </li><li>  Ejemplos de c칩mo obtener datos de nuestro activo Objeto programable </li></ol><br>  Regrese a Unity y vaya a la ventana <em>Jerarqu칤a</em> .  Seleccione el objeto de juego 1_Longsword en el prefab espada.  Agregue el activo de datos 1_Longsword apropiado a la variable Datos de espada del script Sword.cs en la ventana del Inspector: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/89d/dca/502/89ddca5023e919e838d92da776ca4e20.png"></div><br>  Haga clic en Reproducir ( <i>Ctrl / Cmd + P</i> ) en el editor de Unity y luego haga clic en la espada m치s a la izquierda: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c8f/2e0/336/c8f2e0336b61da17786068f13a5e787b.png"></div><br>  La consola debe mostrar informaci칩n similar a los datos transferidos desde el activo Sword Data. <br><br>  Los objetos programables facilitan la sustituci칩n de estos datos.  Intente insertar diferentes Objetos con gui칩n de datos de espada en el campo Datos de espada de la espada. <br><br><h2>  Objetos de secuencias de comandos Eventable </h2><br>  Entonces, creamos un Objeto Scriptable, y viste c칩mo puedes acceder a sus datos dentro del juego.  춰Pero a칰n necesitamos integrar Sword Data con la interfaz de usuario! <br><br>  Puede usar el patr칩n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Singleton</a> r치pido y sucio para esto.  Sin embargo, ahora tenemos otras posibilidades ... <br><br>  ... a saber, objetos con secuencias de comandos!  Los utilizaremos para crear c칩digo limpio y bien dividido. <br><br>  En esta secci칩n, aprender치 c칩mo crear eventos de juego usando la clase <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">UnityEvent</a> . <br><br><h3>  Eventos de juegos y oyentes </h3><br>  En la carpeta Scripts, cree dos scripts: <em>GameEvent.cs</em> y <em>GameEventListener.cs</em> .  Dependen unos de otros, por lo que para deshacerse de los errores, debe crear ambos. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; [CreateAssetMenu(fileName = <span class="hljs-string"><span class="hljs-string">"New Game Event"</span></span>, menuName = <span class="hljs-string"><span class="hljs-string">"Game Event"</span></span>, order = <span class="hljs-number"><span class="hljs-number">52</span></span>)] <span class="hljs-comment"><span class="hljs-comment">// 1 public class GameEvent : ScriptableObject // 2 { private List&lt;GameEventListener&gt; listeners = new List&lt;GameEventListener&gt;(); // 3 public void Raise() // 4 { for (int i = listeners.Count - 1; i &gt;= 0; i--) // 5 { listeners[i].OnEventRaised(); // 6 } } public void RegisterListener(GameEventListener listener) // 7 { listeners.Add(listener); } public void UnregisterListener(GameEventListener listener) // 8 { listeners.Remove(listener); } }</span></span></code> </pre> <br>  Esto es lo que hace el c칩digo anterior: <br><br><ol><li>  Agrega un GameEvent como un activo al men칰 de activos. </li><li>  GameEvent es un objeto programable, por lo que debe heredar de ScriptableObject. </li><li>  Lista de GameEventListeners que se suscribir치n a GameEvent. </li><li>  M칠todo para llamar a todos los suscriptores de GameEvent. </li><li>  El 칰ltimo GameEventListener firmado ser치 el primero llamado (칰ltimo en llegar, primero en salir). </li><li>  Llama a cada GameEventListeners de UnityEvent. </li><li>  Un m칠todo que permite a GameEventListeners suscribirse a este GameEvent. </li><li>  Un m칠todo que permite a GameEventListeners darse de baja de este GameEvent. </li></ol><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.Events; <span class="hljs-comment"><span class="hljs-comment">// 1 public class GameEventListener : MonoBehaviour { [SerializeField] private GameEvent gameEvent; // 2 [SerializeField] private UnityEvent response; // 3 private void OnEnable() // 4 { gameEvent.RegisterListener(this); } private void OnDisable() // 5 { gameEvent.UnregisterListener(this); } public void OnEventRaised() // 6 { response.Invoke(); } }</span></span></code> </pre> <br>  En el c칩digo que se muestra arriba, el proyecto contin칰a desarroll치ndose: <br><br><ol><li>  Requisito para usar la clase UnityEvent. </li><li>  El GameEvent al que se suscribir치 este GameEventListener. </li><li>  La respuesta de UnityEvent que se generar치 cuando el evento GameEvent lanza este GameEventListener. </li><li>  Enlace de un GameEvent a un GameEventListener cuando este GameObject est치 habilitado. </li><li>  Enlace de un GameEvent desde un GameEventListener cuando este GameObject est치 deshabilitado. </li><li>  Se invoca cuando se genera un GameEvent que hace que GameEventListener llame al evento UnityEvent. </li></ol><br>  쮼s dificil?  춰Nada, lo descubrir치s con el tiempo! <br><br><h3>  Entrenamiento de editor </h3><br>  Regrese al editor de Unity y cree una nueva carpeta de <em>Game Events</em> en Scripts &gt;&gt; ScriptableObjects.  Luego crea siete eventos de juego desde el men칰 de activos, como lo hicimos para cada activo de Sword Data.  Col칩quelos en la nueva carpeta Game Events. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/055/47b/22a/05547b22a285c4be816e03839eeead05.png"></div><br>  Reemplace el c칩digo dentro del script <em>Sword.cs con las</em> siguientes l칤neas: <br><br><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameEvent OnSwordSelected; <span class="hljs-comment"><span class="hljs-comment">// 1 private void OnMouseDown() { OnSwordSelected.Raise(); // 2 }</span></span></code> </pre> <br>  Este c칩digo agrega dos posibilidades a la tienda del comerciante de espadas: <br><br><ol><li>  Generaci칩n de evento de juego al elegir una espada. </li><li>  Generaci칩n de eventos cuando haces clic en la espada. </li></ol><br>  Guarda el gui칩n.  Ahora, en cada Objeto de juego de la Jerarqu칤a de la espada, conecta el evento OnSwordSelected correspondiente. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ac/f02/acd/9acf02acd43968a370dd2208793919fe.gif"></div><br>  Cada espada ahora tiene un enlace al evento que se activa cuando se hace clic en la espada. <br><br><h2>  Integraci칩n UI </h2><br>  Ahora debe hacer que la interfaz de usuario funcione.  Nuestro objetivo es mostrar los datos de espada correspondientes al hacer clic en cada espada. <br><br><h3>  UI Links </h3><br>  Antes de actualizar la IU, debe obtener un enlace a cada elemento de la IU.  Comencemos creando un nuevo script llamado <em>SwordMerchant.cs</em> y agregando el siguiente c칩digo a este nuevo script: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.UI; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SwordMerchant</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Text swordName; <span class="hljs-comment"><span class="hljs-comment">// 1 [SerializeField] private Text description; // 2 [SerializeField] private Image icon; // 3 [SerializeField] private Text goldCost; // 4 [SerializeField] private Text attackDamage; // 5 }</span></span></code> </pre> <br>  Usando este c칩digo, agregamos lo siguiente: <br><br><ol><li>  Una referencia al componente de texto del objeto de juego <em>NameText</em> . </li><li>  Enlace al componente de texto del objeto de juego <em>DescriptionText</em> . </li><li>  Enlace al componente Imagen del objeto de juego <em>Sword_Icon</em> . </li><li>  Enlace al componente de texto del objeto de juego <em>GoldText</em> . </li><li>  Un enlace al componente de texto del objeto de juego <em>AttackText</em> . </li></ol><br>  Los objetos del juego anteriores se encuentran en el <em>SwordMerchantCanvas &gt;&gt; SwordMerchantPanel de</em> la ventana Jerarqu칤a.  Agregue el script a GameObject <em>SwordMerchantCanvas</em> y luego configure todos los enlaces: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f2b/a6f/294/f2ba6f2948bc57b02efa9a1a925453e8.png"></div><br><h3>  Oyentes y respuestas de UI </h3><br>  Todas las espadas tienen un evento al que la UI puede suscribirse usando el script <em>GameEventListener</em> .  Agregue un <em>GameEventListener</em> para cada evento OnSwordSelected a GameObject <em>SwordMerchantCanvas</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/51c/3ea/618/51c3ea618cb29226356febe1ff1aa8c1.gif"></div><br>  Como puede ver, nuestro Game Event Listener tiene dos campos: el evento del evento del juego que escucha y la respuesta que se genera cuando se genera el evento del juego. <br><br>  En nuestro caso, la respuesta ser치 actualizada por la interfaz de usuario.  Agregue el siguiente m칠todo al script <em>SwordMerchant.cs</em> : <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateDisplayUI</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SwordData swordData</span></span></span><span class="hljs-function">)</span></span> { swordName.text = swordData.SwordName; description.text = swordData.Description; icon.sprite = swordData.Icon; goldCost.text = swordData.GoldCost.ToString(); attackDamage.text = swordData.AttackDamage.ToString(); }</code> </pre> <br>  Este m칠todo recibe un activo de Datos de espada y luego actualiza cada campo de la IU con el valor del campo de Datos de espada correspondiente.  Tenga en cuenta que <em>GoldCost</em> y <em>AttackDamage</em> devuelven un <code>int</code> , por lo que debe convertirlo en una cadena de texto. <br><br>  Usando nuestro nuevo m칠todo, podemos agregar una respuesta a cada <em>GameEventListener</em> . <br><br>  Para cada respuesta que agregue, necesita un enlace a nuestro objeto de juego <em>SwordMerchantCanvas</em> como el valor del campo <em>Ninguno (Objeto)</em> .  Despu칠s de eso, seleccione <em>SwordMerchant.UpdateDisplayUI</em> en el men칰 desplegable a la derecha de la lista desplegable <em>Solo tiempo</em> de <em>ejecuci칩n</em> . <br><br>  Tenga cuidado y use el activo correcto de Sword Data para cada evento <em>OnSwordSelected</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d4d/ce8/e05/d4dce8e052a2440f4495a94dec1fc47d.png"></div><br>  Ahora podemos comenzar el juego, hacer clic en la espada y ver que la interfaz de usuario se actualiza en consecuencia. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddb/365/357/ddb365357b74dc1e5d86d337d90c8398.gif"></div><br>  Como usamos Game Events, puedes simplemente <em>SwordMerchantCanvas</em> , y todo seguir치 funcionando, solo sin una interfaz de usuario.  Esto significa que los prefabricados de espada est치n separados de los <em>SwordMerchantCanvas</em> . <br><br><h2>  쮸 d칩nde ir despu칠s? </h2><br>  Si se perdi칩 algo durante la historia, puede <a href="">descargar el proyecto terminado</a> , que se encuentra en los materiales del tutorial. <br><br>  Si quieres seguir adelante, intenta hacer que cada espada reproduzca su propio sonido.  Intente expandir los datos de la espada de objetos programables y escuche los eventos <code>OnSwordSelected</code> . <br><br>  쯈uieres aprender m치s sobre Unity?  Echa un vistazo a nuestra <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">serie de videos de</a> Unity o lee los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tutoriales de Unity</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es421523/">https://habr.com/ru/post/es421523/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es421505/index.html">Mini Life Hacks para trabajar con Yandex. Directo</a></li>
<li><a href="../es421507/index.html">쮺u치les fueron los soldadores para 칩ptica?</a></li>
<li><a href="../es421513/index.html">Introducci칩n de scrum suave por parte de los propios desarrolladores (resolvemos las contradicciones, configuramos el equipo, evitamos conflictos)</a></li>
<li><a href="../es421519/index.html">El libro "Apache Kafka. Procesamiento de flujo y an치lisis de datos "</a></li>
<li><a href="../es421521/index.html">Monstruos despu칠s de las vacaciones: AMD Threadripper 2990WX 32-Core y 2950X 16-Core (parte 3 - pruebas)</a></li>
<li><a href="../es421525/index.html">Un poco sobre las diferencias entre los hosteleros rusos y extranjeros</a></li>
<li><a href="../es421527/index.html">Lanzamiento de difusi칩n del proyecto "Servidor en las nubes"</a></li>
<li><a href="../es421529/index.html">Netflix, Uber, Google y usted en MBLT DEV 2018</a></li>
<li><a href="../es421531/index.html">C칩mo integrar ReactJS en 1C-Bitrix con generaci칩n autom치tica de plantillas en el back-end utilizando el ejemplo de la red Globus</a></li>
<li><a href="../es421533/index.html">Elegir un lenguaje de programaci칩n: 3 consejos de un programador de Apple</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>