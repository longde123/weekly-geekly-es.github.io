<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👉 🕚 🕴🏿 16 Entwicklungstipps für Android in Kotlin. Teil 2 👱🏿 🏑 🧡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits. In Erwartung des Beginns des Grundkurses zur Android-Entwicklung teilen wir weiterhin nützliches Material. 



 Bevor Sie diese Tipp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>16 Entwicklungstipps für Android in Kotlin. Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/480534/">  <i>Hallo allerseits.</i>  <i>In Erwartung des Beginns des <a href="https://otus.pw/XdUr/">Grundkurses zur Android-Entwicklung</a> teilen wir weiterhin nützliches Material.</i> <br><br><img src="https://habrastorage.org/webt/tx/pc/wf/txpcwfnd2fbjr6qqwcbmtajt9ys.png"><br><br><blockquote> Bevor Sie diese Tipps lesen, sollten Sie die Kotlin-Dokumentation lesen und die Sprache selbst unter <code>try.kotlinlang.org</code> lernen.  Da diese Tipps speziell auf die Verwendung von Kotlin im Rahmen der Android-Entwicklung abzielen, sollten Sie auch Erfahrung mit dem Android SDK haben.  Es ist auch ratsam, sich mit dem Kotlin-Plugin und der Verwendung von Kotlin mit Android Studio von JetBrains (Entwicklern von Kotlin) vertraut zu machen. </blockquote><br><hr><br>  <a href="https://habr.com/ru/company/otus/blog/479406/">Lesen Sie den ersten Teil</a> <br><a name="habracut"></a><br><h3>  Beschreibung der Objekte </h3><br>  Beschreibungen von Objekten lassen nur Singleton zu, was nicht für eine Klasse mit der Fähigkeit zum Erstellen von Instanzen gehalten werden kann.  Daher müssen Sie Singuletts nicht als Variablen einer statischen Klasse oder in der Application-Klasse speichern. <br><br>  Wenn ich beispielsweise eine Utility-Klasse mit statischen Methoden für Threads habe und auf die gesamte Anwendung zugreifen möchte, können Sie dies tun: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.myapps.example.util <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Handler <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Looper <span class="hljs-comment"><span class="hljs-comment">// ,   ,    object ThreadUtil { fun onMainThread(runnable: Runnable) { val mainHandler = Handler(Looper.getMainLooper()) mainHandler.post(runnable) } }</span></span></code> </pre> <br>  <i>ThreadUtil</i> kann später wie beim Aufrufen einer statischen Klassenmethode aufgerufen werden: <br><br><pre> <code class="kotlin hljs">ThreadUtil.onMainThread(runnable)</code> </pre> <br>  Dies bedeutet, dass Sie das Verhalten einer statischen Klasse nicht mehr mit einem privaten Konstruktor simulieren müssen und nicht mehr herausfinden müssen, wo die Instanz gespeichert ist.  Objekte sind in der Tat die ursprünglichen Elemente der Sprache.  Nach demselben Prinzip erstellen wir Objekte anstelle innerer Klassen: <br><br><pre> <code class="kotlin hljs">iewPager.addOnPageChangeListener(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : ViewPager.OnPageChangeListener { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageScrollStateChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(state: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> {} <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageScrolled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, positionOffset: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, positionOffsetPixels: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> {} <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPageSelected</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { bindUser(position) } });</code> </pre> <br>  Beide tun im Wesentlichen dasselbe - sie erstellen eine Instanz der Klasse als deklariertes Objekt. <br><br><h3>  Unterstützende Objekte </h3><br>  Auf den ersten Blick hat Kotlin keine statischen Variablen und Methoden.  In dieser Sprache gibt es keine derartigen Konzepte, aber es gibt ein Konzept von Hilfsobjekten.  Sie sind Singleton-Objekte in einer Klasse, die Methoden und Variablen enthalten, auf die Sie statisch zugreifen können.  Ein Companion-Objekt lässt bestimmte Konstanten und Methoden zu, ähnlich wie bei statischen Klassen in Java.  Damit können Sie dem <i>newInstance-</i> Snippet-Muster folgen. <br><br>  Schauen Sie sich das Begleitobjekt in seiner einfachsten Form an: <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> DEFAULT_USER_AGE = <span class="hljs-number"><span class="hljs-number">30</span></span> } } <span class="hljs-comment"><span class="hljs-comment">//      : user.age = User.DEFAULT_USER_AGE</span></span></code> </pre> <br><br>  Unter Android verwenden wir normalerweise statische Methoden und Variablen, um statische Fabriken für Fragmente zu erstellen.  Zum Beispiel: <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewUserActivity</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppCompatActivity</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> KEY_USER = <span class="hljs-string"><span class="hljs-string">"user"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">intent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Context</span></span></span></span><span class="hljs-function"><span class="hljs-params">, user: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">User</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Intent { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> intent = Intent(context, ViewUserActivity::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">intent</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">putExtra</span></span></span></span>(KEY_USER, user) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> intent } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) setContentView(R.layout.activity_cooking) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> user = intent.getParcelableExtra&lt;User&gt;(KEY_USER) <span class="hljs-comment"><span class="hljs-comment">//... } }</span></span></code> </pre> <br>  Das Erstellen einer <i>Absicht</i> ähnelt einer ähnlichen Aktion in Java: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> intent = ViewUserActivity.intent(context, user) startActivity(intent)</code> </pre> <br>  Dieses Muster ist gut, da es die Wahrscheinlichkeit verringert, dass <i>Intent</i> oder <i>Fragment</i> nicht über die Daten verfügt, die zum Anzeigen von benutzerdefinierten oder anderen Inhalten erforderlich sind.  Companion-Objekte sind eine Möglichkeit, das statische Zugriffsformular in Kotlin beizubehalten, und sollten verwendet werden, um das Fehlen von Klassen auszugleichen. <br><br><h3>  Globale Konstanten </h3><br>  Mit Kotlin können Sie Konstanten definieren, die an einer Stelle der Anwendung sichtbar sind (falls zutreffend).  Der Umfang der Konstanten sollte jedoch so weit wie möglich minimiert werden.  Und in Situationen, in denen eine Region global sein soll, bietet Kotlin eine hervorragende Möglichkeit, dies zu tun, ohne eine konstante Klasse verwenden zu müssen.  So etwas wie: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.myapps.example <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.StringDef <span class="hljs-comment"><span class="hljs-comment">//   ,  ! const val PRESENTATION_MODE_PRESENTING = "presenting" const val PRESENTATION_MODE_EDITING = "editing"</span></span></code> </pre> <br>  Dann können sie überall im Projekt als Konstanten verwendet werden: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.savvyapps.example.PRESENTATION_MODE_EDITING <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> currentPresentationMode = PRESENTATION_MODE_EDITING</code> </pre> <br>  Die Konstanten im Projekt sollten so klein wie möglich sein, um die Komplexität zu verringern.  Wenn Sie einen Wert haben, der nur für eine benutzerdefinierte Klasse gilt, ist es am besten, ihn in ein Hilfsobjekt einzufügen. <br><br><h3>  Erweiterungen </h3><br>  Erweiterungen sind nützlich, weil Sie damit Klassenfunktionen hinzufügen können, ohne diese zu erben.  Wie kann man beispielsweise einer <code>hideKeyboard()</code> wie <code>hideKeyboard()</code> eine Methode hinzufügen?  Mit Erweiterungen können Sie dies ganz einfach tun: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> Activity.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hideKeyboard</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> view = currentFocus view?.let { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> inputMethodManager = getSystemService(Context.INPUT_METHOD_SERVICE) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> InputMethodManager <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> inputMethodManager.hideSoftInputFromWindow(view.windowToken, InputMethodManager.HIDE_NOT_ALWAYS) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> <br>  Erweiterungen sind insofern nützlich, als sie: <br><br><ul><li>  Helfen Sie, die Lesbarkeit des Codes zu verbessern </li><li>  Sie müssen keine Dienstprogrammklassen und -methoden erstellen. </li></ul><br>  Sie können noch weiter gehen und die Architektur des Codes verbessern.  Stellen Sie sich vor, Sie haben ein Grundmodell, z. B. <i>Article</i> , das als Datenklasse betrachtet wird, die von der API aus einer Quelle extrahiert wurde: <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Article</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> title: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> numberOfViews: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> topic: String)</code> </pre> <br>  Es ist notwendig, die Relevanz des Artikels für den Benutzer basierend auf einer Formel zu bestimmen.  Solltest du es direkt in die Artikelklasse setzen?  Und wenn das Modell nur Daten aus der API enthalten soll, nichts weiter, können Erweiterungen wieder verwendet werden: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> Article.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isArticleRelevant</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(user: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">User</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> user.favoriteTopics.contains(topic) }</code> </pre> <br>  Dies ist derzeit eine einfache Möglichkeit, um zu überprüfen, ob ein Artikelthema in Ihrer Liste der Lieblingsthemen vorhanden ist. <br><br>  Diese Logik kann variieren, je nachdem, wo Sie diese und andere Attribute des Benutzerverhaltens testen möchten.  Da diese Logik zum Teil unabhängig vom <i>Artikelmodell unterstützt wird</i> , können Sie sie je nach Zweck, Methode und Änderungsfähigkeit ändern. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de480534/">https://habr.com/ru/post/de480534/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de480518/index.html">Programmier-Tutor: Warum sollten Sie einer werden und wie?</a></li>
<li><a href="../de480520/index.html">Funktionale Programmierung aus Sicht von EcmaScript. Rekursion und ihre Typen</a></li>
<li><a href="../de480526/index.html">Intel-Prozessoren spucken einen privaten Schlüssel aus, wenn Sie mit Spannung spielen</a></li>
<li><a href="../de480528/index.html">Warum Facebook es Ihnen ermöglicht, Benutzerdaten an andere Dienste zu übertragen</a></li>
<li><a href="../de480530/index.html">IoT ist kein Spielzeug für Kinder. Wie Hackerangriffe auf das Internet der Dinge nicht nur große Unternehmen, sondern auch gewöhnliche Familien erschrecken</a></li>
<li><a href="../de480538/index.html">Was ist besser für Spiele: Intel Optane oder SSD?</a></li>
<li><a href="../de480540/index.html">Umbraco 8.4 Release: CMS ist noch komfortabler</a></li>
<li><a href="../de480542/index.html">Sicherheitsbewusstsein für Erwachsene: So schließen Sie eine Phishing-Sicherheitsanfälligkeit</a></li>
<li><a href="../de480544/index.html">5 versteckte Geheimnisse in Java</a></li>
<li><a href="../de480550/index.html">Hallo Welt von Bytecode für JVM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>