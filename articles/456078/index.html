<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçü§ù‚Äçüë®üèΩ ü§úüèæ üå§Ô∏è Proyecci√≥n de conflicto corporativo sobre conectividad de red üöê ü§∏ üõ´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Un conflicto corporativo surgi√≥ el 10/06/2019 debido a un aumento en el costo de enviar SMS a los usuarios de la red Vimpelcom por Mail.RU Group. Como...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Proyecci√≥n de conflicto corporativo sobre conectividad de red</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456078/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/cp/8x/ty/cp8xty7ejmoaj8gl7q7uhikmku0.png" alt="imagen"></div><br>  Un conflicto corporativo surgi√≥ el 10/06/2019 debido a un aumento en el costo de enviar SMS a los usuarios de la red Vimpelcom por Mail.RU Group.  Como respuesta, Mail.RU Group dej√≥ de "dar servicio" a los canales IP rusos directos a la red Vimpelcom. <br><br>  A continuaci√≥n se muestra un breve an√°lisis de la situaci√≥n desde la perspectiva de un ingeniero de redes. <br><br>  <b>Actualizaci√≥n</b> : 14/06/2019 18:45 - √©nfasis en las rutas rusas a la red VimpelCom, conclusiones ajustadas, agregada una explicaci√≥n de <b>Sergey Kubasov (CIO Vkontakte)</b> . <br>  <b>Actualizaci√≥n</b> : 14/06/2019 19:48 - se agrega una descripci√≥n del m√©todo para restringir la distribuci√≥n de rutas a lo largo de la ruta rusa "corta" a trav√©s de Rostelecom, MTS, RETN.NET. <br>  <b>Actualizaci√≥n</b> : 15/06/2019 09:39 - Mail.ru bloque√≥ su Looking Glass. <br>  <b>Actualizaci√≥n</b> : 18/06/2019 10:10 - Se termin√≥ el desapilamiento.  VimpelCom y Mail.RU Group plantearon sesiones directas de BGP. <br><br><a name="habracut"></a><br>  Introductorio: <br>  VimpelCom tiene un sistema aut√≥nomo AS3216, todos los dem√°s (8402 - Internet en el hogar, 16345 - Internet m√≥vil) se encuentran en 3216. <br><br>  Mail.RU Group - sistemas aut√≥nomos AS47541, AS47542 y AS47764.  El principal generador de contenido es 47542, el llamado  CDN VKONTAKTE (pel√≠culas, m√∫sica).  Todos los sistemas aut√≥nomos son independientes entre s√≠ (desde la posici√≥n de un sistema aut√≥nomo externo). <br><br>  Primero, veamos la situaci√≥n desde la red Vimpelcom.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Looking Glass Vimpelcom</a> nos ayudar√° en esto. <br><br>  Nos fijamos en el primer sistema aut√≥nomo: AS47541. <br><br><pre><code class="perl hljs"><span class="hljs-number"><span class="hljs-number">2914</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span> <span class="hljs-number"><span class="hljs-number">79.104</span></span>.<span class="hljs-number"><span class="hljs-number">32.251</span></span> (metric <span class="hljs-number"><span class="hljs-number">10500</span></span>) (<span class="hljs-number"><span class="hljs-number">79.104</span></span>.<span class="hljs-number"><span class="hljs-number">32.251</span></span>) Origin IGP, metric <span class="hljs-number"><span class="hljs-number">30</span></span>, localpref <span class="hljs-number"><span class="hljs-number">87</span></span>, valid, internal, best, group-best, import-candidate, import suspect Received Path ID <span class="hljs-number"><span class="hljs-number">0</span></span>, Local Path ID <span class="hljs-number"><span class="hljs-number">1</span></span>, version <span class="hljs-number"><span class="hljs-number">2865394342</span></span> Community: <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">410</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">1214</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">2213</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">3200</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3000</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3103</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">40000</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">50078</span></span></code> </pre> <br>  AS-PATH contiene dos sistemas aut√≥nomos: 2914 (NTT) y 47541 (VKONTAKTE-SPB-AS). <br>  La m√©trica localpref se establece en 87, que, como se describe en RIPE DB para el objeto AS3216, corresponde al emparejamiento internacional. <br><blockquote>  ... <br>  observaciones: las rutas de pares internacionales obtienen preferencia local en el <br>  observaciones: rango de 81-89. <br>  ... </blockquote>  La comunidad 3216: 3000 y 3216: 3103 (fuente - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">RIPE DB para AS3216</a> ) tambi√©n confirma la misma informaci√≥n: <br><blockquote>  ... <br>  observaciones: 3216: 3000 Recibido de un enlace ascendente internacional o un par, espec√≠ficamente: <br>  ... <br>  observaciones: 3216: 3103 AMS-IX <br>  ... </blockquote>  Es decir, Vimpelcom ve la ruta a VKontakte a trav√©s del cruce europeo. <br><br>  Veamos otra autonom√≠a VKontakte - 47542 (VKONTAKTE-MSK-CDN-AS). <br><br><div class="spoiler">  <b class="spoiler_title">Todo es similar</b> <div class="spoiler_text"><pre> <code class="perl hljs"> <span class="hljs-number"><span class="hljs-number">2914</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span> <span class="hljs-number"><span class="hljs-number">79.104</span></span>.<span class="hljs-number"><span class="hljs-number">32.251</span></span> (metric <span class="hljs-number"><span class="hljs-number">10500</span></span>) (<span class="hljs-number"><span class="hljs-number">79.104</span></span>.<span class="hljs-number"><span class="hljs-number">32.251</span></span>) Origin IGP, metric <span class="hljs-number"><span class="hljs-number">30</span></span>, localpref <span class="hljs-number"><span class="hljs-number">87</span></span>, valid, internal, best, group-best, import-candidate, import suspect Received Path ID <span class="hljs-number"><span class="hljs-number">0</span></span>, Local Path ID <span class="hljs-number"><span class="hljs-number">1</span></span>, version <span class="hljs-number"><span class="hljs-number">2865394338</span></span> Community: <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">410</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">1214</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">2213</span></span> <span class="hljs-number"><span class="hljs-number">2914</span></span>:<span class="hljs-number"><span class="hljs-number">3200</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3000</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3103</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">40000</span></span> <span class="hljs-number"><span class="hljs-number">47541</span></span>:<span class="hljs-number"><span class="hljs-number">50078</span></span></code> </pre> <br></div></div><br>  ¬øQu√© pasa con Mail.ru en s√≠?  Echemos un vistazo a AS47764 (mailru-as). <br><br><pre> <code class="perl hljs"> <span class="hljs-number"><span class="hljs-number">3356</span></span> <span class="hljs-number"><span class="hljs-number">47764</span></span> <span class="hljs-number"><span class="hljs-number">194.67</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">215</span></span> (metric <span class="hljs-number"><span class="hljs-number">10501</span></span>) (<span class="hljs-number"><span class="hljs-number">194.67</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">215</span></span>) Origin IGP, metric <span class="hljs-number"><span class="hljs-number">0</span></span>, localpref <span class="hljs-number"><span class="hljs-number">77</span></span>, valid, internal, best, group-best, import-candidate Received Path ID <span class="hljs-number"><span class="hljs-number">0</span></span>, Local Path ID <span class="hljs-number"><span class="hljs-number">1</span></span>, version <span class="hljs-number"><span class="hljs-number">2867605667</span></span> Community: <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3000</span></span> <span class="hljs-number"><span class="hljs-number">3216</span></span>:<span class="hljs-number"><span class="hljs-number">3007</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">123</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">519</span></span> <span class="hljs-number"><span class="hljs-number">3356</span></span>:<span class="hljs-number"><span class="hljs-number">2094</span></span> <span class="hljs-number"><span class="hljs-number">47764</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">47764</span></span>:<span class="hljs-number"><span class="hljs-number">40000</span></span> <span class="hljs-number"><span class="hljs-number">47764</span></span>:<span class="hljs-number"><span class="hljs-number">50077</span></span></code> </pre> <br>  VimpelCom ve Mail.ru a trav√©s de as3356 (enlace ascendente Level3, operador Tier1).  Esta informaci√≥n es confirmada por localpref 77: <br><blockquote>  ... <br>  observaciones: las rutas de enlace ascendente obtienen preferencia local en el rango de 71-79. <br>  observaciones: √öltima actualizaci√≥n: febrero de 2012 ... </blockquote>  y comunidad (3216: 3000 y 3216: 3007): <br><blockquote>  ... <br>  observaciones: 3216: 3000 Recibido de un enlace ascendente internacional o un par, espec√≠ficamente: <br>  ... <br>  observaciones: 3216: 3007 Comunicaciones de nivel 3 <br>  ... </blockquote><br>  A partir de la informaci√≥n recibida, se puede ver que el tr√°fico de la red Vimpelcom en VKontakte y MailRu se distribuye a trav√©s de conexiones europeas de acuerdo con las rutas recibidas a trav√©s del protocolo BGP.  No hay rutas alternativas a trav√©s de las conexiones rusas en Looking Glass.  No se han encontrado medidas para redirigir artificialmente el tr√°fico a trav√©s de rutas deliberadamente peores. <br><br>  ¬øY c√≥mo ve el Grupo Mail.ru la red VimpelCom? <br>  Usaremos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Looking Glass from Mail</a> .  <b>Actualizaci√≥n</b> : a partir de la ma√±ana del 15/06/2019 Looking Glass no funciona, cuando se solicita el error n√∫mero 500: <img src="https://habrastorage.org/getpro/habr/post_images/515/c79/93c/515c7993ccd0f3d6bd9a5a20d3078ee9.png" alt="imagen"><br><br>  Desde enrutadores de AS47764 (mailru-as): <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#6: Received by speaker 0 Advertised to peers (in unique update groups): 188.93.60.188 1299 1299 1273 3216 3216 217.20.147.250 (metric 100) from 217.20.147.250 (217.20.147.253) Origin IGP, metric 500, localpref 200, valid, internal, best, group-best Received Path ID 0, Local Path ID 0, version 1172721494 Community: 1299:20000 47764:701 47764:41100 47764:41108 47764:50077</span></span></code> </pre> <br><br>  AS-PATH contiene AS1299 (Telia, operador Tier1, enlace ascendente Mail.RU) y as1273 (Vodafon, operador Tier1, enlace ascendente Vimpelcom). <br><br>  LocalPreference 200 es el est√°ndar para las interfaces externas de Mail.ru (https://net.mail.ru/bgp.html), y el MED 500 corresponde a todo lo recibido, no desde una interfaz directa, ni desde IX-s, ni desde pares. <br><br>  Pero, ¬øpor qu√© no hay rutas locales a trav√©s de los operadores de telecomunicaciones rusos? <br>  Lo son, pero su prioridad es "no est√°ndar". <br>  Aqu√≠ est√° la ruta a trav√©s de Rostelecom (as12389): <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#1: Received by speaker 0 Not advertised to any peer 12389 3216 46.61.178.149 from 46.61.178.149 (213.59.207.79) Origin IGP, metric 500, localpref 199, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 3216:2001 3216:2999 3216:4100 12389:5 12389:6 12389:1100 12389:1105 12389:1277 47764:701 47764:41100 47764:41104 47764:50077 Origin-AS validity: not-found</span></span></code> </pre> <br>  Aqu√≠ es a trav√©s del meg√°fono (as31133): <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#2: Received by speaker 0 Not advertised to any peer 31133 3216 78.25.77.41 from 78.25.77.41 (10.222.253.97) Origin IGP, metric 500, localpref 199, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 3216:2001 3216:2999 3216:4100 31133:300 31133:46170 47764:701 47764:41100 47764:41105 47764:50077 Origin-AS validity: not-found</span></span></code> </pre> <br>  Aqu√≠ es a trav√©s de RET.NO: <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#3: Received by speaker 0 Not advertised to any peer 9002 9002 3216 87.245.253.24 from 87.245.253.24 (87.245.225.1) Origin IGP, metric 500, localpref 199, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 9002:9002 9002:64667 47764:701 47764:41100 47764:41101 47764:50077 Origin-AS validity: not-found</span></span></code> </pre> <br>  ¬°E incluso a trav√©s de MTS! <pre> <code class="perl hljs"> Path <span class="hljs-comment"><span class="hljs-comment">#5: Received by speaker 0 Not advertised to any peer 8359 3216 212.188.61.105 from 212.188.61.105 (195.34.52.77) Origin IGP, metric 500, localpref 199, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 8359:200 8359:609 8359:5012 47764:701 47764:41100 47764:41103 47764:50077 Origin-AS validity: not-found</span></span></code> </pre> <br>  ¬°La m√©trica de precisi√≥n local para estas rutas rusas se subestima, es decir, las rutas se degradan en comparaci√≥n con las extranjeras! <br><br>  ¬°Adem√°s, <b>Mail.Ru Group tiene prohibiciones de</b> distribuir sus prefijos a VimpelCom a trav√©s de operadores rusos! <br><br>  RET.NO (http://lg.retn.net/): <br>  Los anuncios de Mail.RU Group incluyen la comunidad 3216: 65535. <br><div class="spoiler">  <b class="spoiler_title">Conclusi√≥n de LG RET.NO</b> <div class="spoiler_text">  inet.0: 762737 destinos, 1734826 rutas (762708 activo, 222780 holddown, 277 oculto) <br>  94.100.176.0/20 (1 entrada, 1 anunciado) <br>  * Preferencia BGP: 170 / -201 <br>  ... <br>  ... <br>  Como camino: 47764 I <br>  Ruta AS: Grabada <br>  Comunidades: 3216: 65535 9002: 64667 9002: 65530 <br>  ... <br></div></div><br>  Vimpelcom no acepta rutas marcadas por dicha comunidad en su red.  Extracto de RIPE DB por AS3216: <br><blockquote>  ... <br>  Observaciones: las funciones internas solo se asignan internamente. <br>  observaciones: est√°n en el rango 3216 :font&gt;3216: 4999 y 3216: 6000-3216: 65535 <br>  observaciones: y siempre se eliminan de las actualizaciones entrantes en el borde <br>  Observaciones: enrutadores. <br>  ... </blockquote><br>  Hacia Rostelecom (http://lg.ip.rt.ru) Mail.RU Group ofrece rutas similares con la comunidad 12389: 8350. <br><div class="spoiler">  <b class="spoiler_title">Conclusi√≥n de LG Rostelecom</b> <div class="spoiler_text">  94.100.176.0/20 v√≠a 217.107.65.1 en eth0.9 [sr2 2019-06-13] * (100 /?) [AS47764i] <br>  Tipo: BGP unicast univ <br>  BGP.origin: IGP <br>  BGP.as_path: 47764 <br>  BGP.next_hop: 213.59.207.78 <br>  BGP.med: 0 <br>  BGP.local_pref: 850 <br>  Comunidad BGP: (12389.1) (12389.1100) (12389.1105) (12389.1277) (12389.8350) (12389.8380) (47764.1) (47764,40000) (47764,50077) <br>  BGP.originator_id: 213.59.207.78 <br>  BGP.cluster_list: 95.167.88.79 95.167.88.49 95.167.88.17 <br></div></div><br>  De acuerdo con las entradas en RIPE DB para el objeto as12389, esta comunidad significa "no anunciar en la red as3216": <blockquote>  ... <br>  observaciones: |  12389: 835y Cuando se anuncia a GoldenTelecom (AS3216) | <br>  ... <br>  observaciones: |  ... y = 0 - no anunciar | <br>  ... </blockquote><br>  Del mismo modo, hacia MTS (http://lg.mtu.ru): <div class="spoiler">  <b class="spoiler_title">Conclusi√≥n de LG MTS</b> <div class="spoiler_text">  Entrada de tabla de enrutamiento BGP para 94.100.176.0/20, versi√≥n 161717219 <br>  Rutas: (2 disponibles, mejor # 1, tabla predeterminada) <br>  Ruta m√∫ltiple: eBGP <br>  Anunciado para actualizar grupos: <br>  6 6 <br>  47764, (recibido y usado) <br>  195.34.52.77 (m√©trica 16) desde 195.34.52.181 (195.34.52.181) <br>  Origen IGP, m√©trica 0, localpref 140, v√°lido, interno, mejor <br>  Comunidad: 8359: 2120 8359: 2150 8359: 5500 8359: 55277 <br>  Originador: 195.34.52.77, Lista de grupos: 83.59.83.59 <br>  47764, (recibido y usado) <br>  195.34.52.77 (m√©trica 16) desde 195.34.52.182 (195.34.52.182) <br>  Origen IGP, m√©trica 0, localpref 140, v√°lido, interno <br>  Comunidad: 8359: 2120 8359: 2150 8359: 5500 8359: 55277 <br>  Originador: 195.34.52.77, Lista de grupos: 83.59.2.77 <br></div></div><br>  La comunidad 8359: 2120 significa: <blockquote>  ... <br>  observaciones: 8359: 212x al anunciar a Sovam (Beeline) <br>  ... <br>  observaciones: x = 0 - no anunciar <br>  ... </blockquote><br>  No puede mirar los anuncios de Mail.RU Group hacia Megafon; este √∫ltimo no tiene Looking Glass. <br><br>  Veamos AS47541 (VKONTAKTE-SPB-AS). <br><br><div class="spoiler">  <b class="spoiler_title">La conclusi√≥n es demasiado grande.</b> <div class="spoiler_text"><pre> <code class="perl hljs"> Router: a9922-e-<span class="hljs-number"><span class="hljs-number">5</span></span> Command: show ip bgp <span class="hljs-number"><span class="hljs-number">81.211</span></span>.<span class="hljs-number"><span class="hljs-number">56.202</span></span> Last switch-over Thu Apr <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">04</span></span>:<span class="hljs-number"><span class="hljs-number">25</span></span>:09 <span class="hljs-number"><span class="hljs-number">2018</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> year, <span class="hljs-number"><span class="hljs-number">10</span></span> weeks, <span class="hljs-number"><span class="hljs-number">6</span></span> hours, <span class="hljs-number"><span class="hljs-number">9</span></span> minutes ago Fri Jun <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">34</span></span>:<span class="hljs-number"><span class="hljs-number">20.791</span></span> MSK BGP routing table entry <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">81.211</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">17</span></span> Versions: Process bRIB/RIB SendTblVer Speaker <span class="hljs-number"><span class="hljs-number">913059757</span></span> <span class="hljs-number"><span class="hljs-number">913059757</span></span> Last Modified: May <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">38.536</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>y03w Paths: (<span class="hljs-number"><span class="hljs-number">6</span></span> available, best <span class="hljs-comment"><span class="hljs-comment">#4) Advertised to update-groups (with more than one peer): 0.2 Advertised to peers (in unique update groups): 188.93.60.188 Path #1: Received by speaker 0 Not advertised to any peer 1299 1273 3216 3216 87.240.191.235 (metric 31) from 87.240.191.235 (87.240.191.235) Origin IGP, metric 5000, localpref 150, valid, internal Received Path ID 0, Local Path ID 0, version 0 Community: 1273:12752 1299:431 1299:4000 1299:20000 1299:20002 1299:20200 3216:2001 3216:2999 3216:4100 47541:701 47541:41100 47541:41111 47541:50078 Path #2: Received by speaker 0 Not advertised to any peer 1299 1273 3216 3216 87.240.191.248 (metric 31) from 87.240.191.248 (87.240.191.248) Origin IGP, metric 5000, localpref 150, valid, internal Received Path ID 0, Local Path ID 0, version 0 Community: 1273:12752 1299:431 1299:4000 1299:20000 1299:20002 1299:20200 3216:2001 3216:2999 3216:4100 47541:701 47541:41100 47541:41111 47541:50078 Path #3: Received by speaker 0 Not advertised to any peer 174 6762 3216 3216 87.240.191.249 (metric 31) from 87.240.191.249 (87.240.191.249) Origin IGP, metric 5000, localpref 150, valid, internal Received Path ID 0, Local Path ID 0, version 0 Community: 174:21100 174:22005 47541:701 47541:41100 47541:41108 47541:50078 Path #4: Received by speaker 0 Advertised to update-groups (with more than one peer): 0.2 Advertised to peers (in unique update groups): 188.93.60.188 174 6762 3216 3216 149.6.169.113 from 149.6.169.113 (38.28.1.236) Origin IGP, metric 5000, localpref 150, valid, external, best, group-best Received Path ID 0, Local Path ID 0, version 913059757 Community: 174:21100 174:22005 47541:701 47541:41100 47541:41108 47541:50078 Origin-AS validity: not-found Path #5: Received by speaker 0 Not advertised to any peer 1273 1273 3216 3216 195.89.114.197 from 195.89.114.197 (195.2.1.107) Origin IGP, metric 5005, localpref 150, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 1273:12752 3216:2001 3216:2999 3216:4100 47541:701 47541:41100 47541:41110 47541:50078 Origin-AS validity: not-found Path #6: Received by speaker 0 Not advertised to any peer 3356 3356 3216 3216 3216 213.242.69.69 from 213.242.69.69 (4.69.177.130) Origin IGP, metric 5000, localpref 150, valid, external Received Path ID 0, Local Path ID 0, version 0 Community: 3216:2001 3216:2999 3216:4100 3356:2 3356:22 3356:100 3356:123 3356:503 3356:2067 47541:701 47541:41100 47541:41107 47541:50078 Origin-AS validity: not-found</span></span></code> </pre> </div></div><br>  AS-PATH apunta a AS174 - Cogent (enlace ascendente Mail.RU, Tier1), luego AS6762 - Telecom Italia (enlace ascendente Vimpelcom).  Preferencia local en todas partes 150, pero en todas las articulaciones externas, independientemente de las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pol√≠ticas escritas</a> . <br><br>  Veamos el AS47542 (VKONTAKTE-MSK-CDN-AS). <br><pre> <code class="perl hljs"> Router: mx96<span class="hljs-number"><span class="hljs-number">0</span></span>-m9-<span class="hljs-number"><span class="hljs-number">0</span></span> Command: op lg-sh-bgp prefix <span class="hljs-number"><span class="hljs-number">81.211</span></span>.<span class="hljs-number"><span class="hljs-number">56.202</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> LP:<span class="hljs-number"><span class="hljs-number">151</span></span> MED: NH:<span class="hljs-number"><span class="hljs-number">87.240</span></span>.<span class="hljs-number"><span class="hljs-number">191.222</span></span> AS path: <span class="hljs-number"><span class="hljs-number">47541</span></span> I Communities: Accepted Best <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> LP:<span class="hljs-number"><span class="hljs-number">151</span></span> MED: NH:<span class="hljs-number"><span class="hljs-number">95.142</span></span>.<span class="hljs-number"><span class="hljs-number">204.251</span></span> AS path: <span class="hljs-number"><span class="hljs-number">47541</span></span> I Communities: Accepted Inactive-reason: Interior &gt; Exterior &gt; Exterior via Interior</code> </pre> <br>  Y desde el segundo enrutador: <pre> <code class="perl hljs"> Router: mx96<span class="hljs-number"><span class="hljs-number">0</span></span>-m9-<span class="hljs-number"><span class="hljs-number">1</span></span> Command: op lg-sh-bgp prefix <span class="hljs-number"><span class="hljs-number">81.211</span></span>.<span class="hljs-number"><span class="hljs-number">56.202</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> LP:<span class="hljs-number"><span class="hljs-number">151</span></span> MED: NH:<span class="hljs-number"><span class="hljs-number">87.240</span></span>.<span class="hljs-number"><span class="hljs-number">191.224</span></span> AS path: <span class="hljs-number"><span class="hljs-number">47541</span></span> I Communities: Accepted Best <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> LP:<span class="hljs-number"><span class="hljs-number">151</span></span> MED: NH:<span class="hljs-number"><span class="hljs-number">95.142</span></span>.<span class="hljs-number"><span class="hljs-number">204.250</span></span> AS path: <span class="hljs-number"><span class="hljs-number">47541</span></span> I Communities: Accepted Inactive-reason: Interior &gt; Exterior &gt; Exterior via Interior</code> </pre> <br>  Solo rutas predeterminadas (0.0.0.0/0).  Esta situaci√≥n fue explicada por un empleado de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">codicia</a> de Mail.RU Group, por lo que agradece.  En resumen: el segmento de Mosc√∫ de la red VKontakte est√° almacenando en cach√© (en lugar de generar), cuya tarea es optimizar la velocidad de descarga de contenido popular y demandado.  Cuidar a los usuarios, s√≠. <br><br>  Si no hay una ruta a ninguna red, los servidores de cach√© no sirven esta red.  Por lo tanto, la optimizaci√≥n de la velocidad de descarga no funciona y los usuarios sufren.  Pero aqu√≠ es necesario enfatizar: los usuarios no solo son suyos, sino tambi√©n VimpelCom. <br><br>  <b>Conclusiones:</b> <br><br><ol><li>  Desde Vimpelcom, el tr√°fico hacia Mail.RU Group se distribuye naturalmente.  No se detectaron redireccionamientos artificiales a trav√©s de manipulaciones de preferencias locales </li><li>  <b>Por parte del Grupo Mail.RU, hay manipulaciones con los prefijos de Vimpelcom</b> .  En las rutas existentes hacia la red Vimpelcom a trav√©s de operadores rusos, las prioridades se subestiman en comparaci√≥n con las rutas a trav√©s de operadores extranjeros Tier1. </li><li>  Se han agregado gerentes de la comunidad BGP a las rutas transferidas a los operadores rusos (MTS, Rostelecom, RETN.NET) del grupo Mail.RU para restringir su distribuci√≥n a Vimpelcom </li></ol><br>  ¬øPor qu√© Mail.RU Group prioriza las rutas por Europa?  ¬øPor qu√© Mail.RU Group proh√≠be una conexi√≥n dom√©stica corta con Vimpelcom? <br><br>  ¬øEs m√°s barato para ellos?  ¬øDirigir el tr√°fico a trav√©s de canales extranjeros y pagar moneda a tirvans? <br>  ¬øO hay un deseo de alejar el tr√°fico para que no sea tan conveniente tomarlo, eh? <br>  Esto es desconocido para el ingeniero de redes ... <br><br>  <b>Resultados espirales:</b> <br>  17/06/2019 Se plantearon sesiones BGP entre Vimpelcom y Mail.RU Group: <br>  AS47764 (Mail.RU): <br><img src="https://habrastorage.org/webt/8s/pl/gk/8splgktg26dnwc_4ihehoprx8-k.png" alt="imagen"><br><br>  AS47541 (Vk): <br><img src="https://habrastorage.org/getpro/habr/post_images/867/0b4/829/8670b482948ddb6df8d498e43d9dbd73.png" alt="imagen"><br><br>  AS47542 (Vk CDN): <br><img src="https://habrastorage.org/webt/vm/fc/8z/vmfc8zpjdbimpe1eox2qi7ojndi.png" alt="imagen"><br><br>  Quien inici√≥ el levantamiento de las sesiones es desconocido. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/456078/">https://habr.com/ru/post/456078/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../456060/index.html">Verifique la informaci√≥n sobre la falta de confiabilidad en los extractos del registro. Pegar pdf en python</a></li>
<li><a href="../456064/index.html">Octubre Enfoques revolucionarios de seguridad</a></li>
<li><a href="../456068/index.html">5 errores de principiante</a></li>
<li><a href="../456070/index.html">C√≥mo atraer usuarios al portal de autoservicio</a></li>
<li><a href="../456072/index.html">Dav1d: el decodificador AV1 m√°s r√°pido ahora en Firefox por defecto</a></li>
<li><a href="../456082/index.html">C√≥mo desarrollamos recomendaciones personalizadas de productos</a></li>
<li><a href="../456084/index.html">Kubernetes 1.15: Resumen de lo m√°s destacado</a></li>
<li><a href="../456086/index.html">iOS Storyboards: an√°lisis de los pros y contras, mejores pr√°cticas</a></li>
<li><a href="../456090/index.html">Introducci√≥n a las pruebas unitarias en Unity</a></li>
<li><a href="../456092/index.html">Siete signos preocupantes de que depende del clima, incluso si no lo cree</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>