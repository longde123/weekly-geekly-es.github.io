<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüîß üë©üèø‚Äçü§ù‚Äçüë®üèº ‚ìÇÔ∏è Balanceamento de tr√°fego nas redes IP da operadora üöÜ üìë üôÖüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Avisarei imediatamente que, se voc√™ quiser ler sobre a arquitetura moderna de solu√ß√µes, √© melhor come√ßar do final do artigo. 
 Se voc√™ estiver interes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Balanceamento de tr√°fego nas redes IP da operadora</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427433/">  Avisarei imediatamente que, se voc√™ quiser ler sobre a arquitetura moderna de solu√ß√µes, √© melhor come√ßar do final do artigo. <br>  Se voc√™ estiver interessado em ler sobre as dificuldades encontradas no design de uma parte da rede de uma operadora de telecomunica√ß√µes, seja bem-vindo ao gato. <br><br>  O artigo descreve um m√©todo de equilibrar o tr√°fego no limite da rede nas seguintes condi√ß√µes: <br><br><ul><li>  protocolo de transporte: IPv4; </li><li>  Protocolo de roteamento din√¢mico OSPFv2 [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2</a> ]; </li><li>  o tr√°fego de entrada e sa√≠da de um endere√ßo IP de um usu√°rio passa pelo mesmo gateway de servi√ßo e pelo mesmo roteador NAT [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">3</a> ]; </li><li>  o balanceamento de tr√°fego √© realizado entre 2 gateways de servi√ßo (BNG [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">4</a> ]); </li><li>  o balanceamento de tr√°fego √© realizado entre 2 roteadores NAT que n√£o usam roteamento din√¢mico; </li></ul><br>  O segmento de rede do usu√°rio conectado √© considerado no exemplo de redes sem fio IEEE 802.11 [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">5</a> ] usando controladores. <br><br>  Tarefas a serem resolvidas: <br><br><ul><li>  equilibrar o tr√°fego no ponto de conex√£o dos dispositivos do usu√°rio √† rede; </li><li>  distribui√ß√£o uniforme do tr√°fego do usu√°rio entre BNGs; </li><li>  fornecendo roteamento sim√©trico do tr√°fego de entrada e sa√≠da ao usar o NAT. </li></ul><br><a name="habracut"></a><br>  O n√≠vel de distribui√ß√£o √© um componente de rede de borda que executa as seguintes fun√ß√µes principais: <br><br><ul><li>  conex√£o de controladores de acesso sem fio; </li><li>  Roteamento e gerenciamento de tr√°fego de controladores de acesso sem fio; </li><li>  pareamento com outras redes. </li></ul><br>  O n√≠vel de controladores de acesso sem fio (UCBD) √© um grupo de controladores que executam as seguintes fun√ß√µes b√°sicas: <br><br><ul><li>  ponto de agrega√ß√£o de tr√°fego de pontos de acesso e usu√°rios sem fio; </li><li>  fornecer usu√°rios de roaming sem fio entre controladores; </li><li>  gerenciamento de pontos de acesso. </li></ul><br>  N√≠vel de cobertura do r√°dio - pontos de acesso localizados em objetos. <br><br>  Service Center (CPU) - fornece a conex√£o dos controladores √† rede de dados, gerenciamento e controle fornecido aos usu√°rios, conex√£o √† Internet, convers√£o de endere√ßo IP. <br><br>  Em termos de roteamento, a rede IP √© dividida em v√°rios segmentos de roteamento: segmento de usu√°rio, segmento de ponto de acesso e segmento de gerenciamento.  Este artigo descreve apenas o segmento de roteamento personalizado. <br><br>  A solu√ß√£o proposta usa o protocolo de roteamento din√¢mico OSPFv2 [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1</a> ] e a extens√£o de v√°rias inst√¢ncias [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2</a> ].  Os principais par√¢metros de configura√ß√£o do protocolo OSPF usados ‚Äã‚Äãs√£o mostrados nas Figuras 1-5. <br><br><h3>  N√≠vel de distribui√ß√£o VRF Uso </h3><br>  O uso de v√°rios VRFs permite atribuir diferentes combina√ß√µes de BNG prim√°rio / de backup para o tr√°fego do usu√°rio. <br>  Para esse prop√≥sito, no n√≠vel de distribui√ß√£o, em cada um dos dois switches L3, as interfaces de usu√°rio s√£o definidas em diferentes tabelas de roteamento virtual ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">VRF Lite</a> [9]): <br>  Cada VRF cria um processo OSPF. <br><br><h3>  Balanceamento de tr√°fego do usu√°rio no ponto de conex√£o de rede </h3><br>  O balanceamento √© feito atrav√©s da distribui√ß√£o de dispositivos do usu√°rio entre redes virtuais (VLANs).  Para esse fim, nos controladores de acesso sem fio, os pontos de acesso s√£o divididos em grupos (at√© 10 a 15 pontos de acesso por grupo).  Cada grupo deve alocar um ID de VLAN e uma sub-rede de endere√ßos IP de usu√°rios com capacidade de pelo menos 2-4 redes Classe C (com base em at√© 25 conex√µes ativas por ponto de acesso e capacidade adicional de contabilizar conex√µes de usu√°rio inativas e recursos do uso do protocolo DHCP: ‚Äútempo de concess√£o‚Äù ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">6</a> ) <br>  Nos comutadores L3 do n√≠vel de distribui√ß√£o ao qual os controladores est√£o conectados, as redes IP usadas s√£o divididas em dois grandes grupos.  Isso √© necess√°rio para somar mais as informa√ß√µes de roteamento e equilibrar o tr√°fego entre os BNGs no terceiro n√≠vel do modelo OSI. <br>  Cada grupo √© definido em um dos VRFs da chave de n√≠vel de distribui√ß√£o. <br>  No L3, a redund√¢ncia √© realizada usando o OSPF, conforme mostrado na figura. <br><div class="spoiler">  <b class="spoiler_title">figura 1</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/mm/bp/fs/mmbpfse_xbtqlourl0ck2ysfceq.png"><br></div></div><br><br>  A escolha do tipo de zona NSSA √© determinada pelos seguintes fatores: <br>  - Reduz o n√∫mero de rotas no NSSA, somando as informa√ß√µes de roteamento das redes de usu√°rios sem fio no ASBR. <br>  - Oferece a capacidade de definir o valor de AD (Dist√¢ncia administrativa) para rotas OSPF "externas" no ABR. <br>  - Fornece a capacidade de isolar e resumir facilmente as informa√ß√µes de roteamento de rotas redistribu√≠das para o ABR. <br>  - Oferece a capacidade de definir o ABR como fonte de informa√ß√µes de roteamento ao enviar LSAs para a √°rea 0 [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">suprimir-fa 14</a> ].  Isso permite que voc√™ n√£o envie para a √Årea 0 informa√ß√µes sobre a estrutura do endere√ßamento IP e fontes de rotas externas da zona NSSA. <br>  - Permite dispensar a distribui√ß√£o de duas rotas padr√£o dentro da zona NSSA [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sem resumo 14</a> ].  O equil√≠brio do tr√°fego entre os ABRs √© feito definindo o custo do canal entre ASBR e ABR na zona NSSA. <br>  - Permite selecionar 2 tipos de rotas externas para filtragem e roteamento de controle de roteamento de segmento de usu√°rio no ABR. <br><br>  Este artigo n√£o revelou a possibilidade de conectar segmentos de roteamento de usu√°rio ao BNG por meio da rede MPLS; no entanto, algumas das solu√ß√µes utilizadas s√£o determinadas pelos requisitos para trabalhar nesse modo ([15] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">roteamento de backdoor de link simulado</a> ). <br><br>  A Figura 2 mostra exemplos de uso de VRF no n√≠vel de distribui√ß√£o: <br>  - WUsers1 - para usu√°rios que usam o roteador da CPU SG-01 como gateway de servi√ßo prim√°rio e o roteador da CPU SG-02 como gateway de servi√ßo de backup; <br>  - WUsers2 - para usu√°rios que usam o roteador da CPU SG-02 como o gateway de servi√ßo principal e o roteador da CPU SG-01 como o gateway do servi√ßo de backup. <br><br><div class="spoiler">  <b class="spoiler_title">Figura 2</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/n5/gf/oi/n5gfoivj6hbfdfghxgfu0sgeff8.png"><br></div></div><br>  A escolha de um par de gateways de servi√ßo prim√°rio / de backup nos VRUs WUsers1 e WUsers2 √© implementada por meio de roteamento din√¢mico e atribui√ß√£o de custos diferentes aos canais de comunica√ß√£o virtual. <br><br><h3>  Balanceamento de carga no n√≠vel de distribui√ß√£o </h3><br>  As redes IP atribu√≠das aos canais virtuais (VLANs) dos usu√°rios em cada um dos comutadores L3 do n√≠vel de distribui√ß√£o s√£o determinadas por dois VRFs.  Assim, os usu√°rios sem fio, dependendo do grupo de AP em que foram inclu√≠dos pelos controladores de acesso sem fio, se enquadram em VRFs diferentes e usam pares diferentes de gateways de servi√ßo prim√°rio / de backup, fornecendo balanceamento de carga entre os gateways de servi√ßo. <br><br>  No caso de falha de um dos comutadores de n√≠vel de distribui√ß√£o, todos os usu√°rios ser√£o comutados para o comutador restante, reconectando-se √† rede sem fio e obtendo um endere√ßo IP da nova rede IP.  As redes IP dos usu√°rios sem fio comutados tamb√©m s√£o distribu√≠das por dois VRFs.  Assim, o balanceamento de carga entre os BNGs √© mantido, independentemente do fato de que, em algum momento, apenas um comutador L3 do n√≠vel de distribui√ß√£o esteja funcionando. <br><br>  Uma reserva de uma conex√£o de gateway de servi√ßo pode ser organizada usando canais de comunica√ß√£o virtual duplicados localizados em diferentes sub-redes IP e finalizados em diferentes portas f√≠sicas do gateway de servi√ßo. <br>  O esquema f√≠sico e a topologia de rede, bem como o esquema correspondente para organizar canais de comunica√ß√£o l√≥gica, n√£o s√£o apresentados neste artigo.  As solu√ß√µes usadas nesses n√≠veis tamb√©m fornecem a organiza√ß√£o de canais de comunica√ß√£o f√≠sicos e l√≥gicos redundantes. <br><br>  O esquema de roteamento no n√≠vel de distribui√ß√£o √© mostrado nas Figuras 1 e 2. <br><br><h3>  Roteando o tr√°fego entre o n√≠vel de distribui√ß√£o e a CPU </h3><br>  A organiza√ß√£o da comunica√ß√£o entre comutadores de UR e gateways de servi√ßos da CPU √© poss√≠vel por um dos seguintes m√©todos: <br><br>  No 2¬∫ n√≠vel do modelo OSI, sem o uso de um ‚ÄúL3-hop‚Äù intermedi√°rio. <br>  Usando o intermedi√°rio "L3 hop". <br>  A primeira solu√ß√£o requer mais recursos (VLAN ID, STP). <br>  Ao usar o segundo m√©todo, a pilha de switches nos quais 2 VRFs s√£o criados pode atuar como roteadores intermedi√°rios. <br><br>  Esta solu√ß√£o pode reduzir significativamente o n√∫mero de canais virtuais (VLANs) necess√°rios para estabelecer a comunica√ß√£o entre os gateways dos servi√ßos de CPU e SD. <br><br>  O esquema de comunica√ß√£o entre os roteadores do UR e os gateways dos servi√ßos da CPU √© mostrado na Figura 3. <br><div class="spoiler">  <b class="spoiler_title">Figura 3</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/th/ec/gw/thecgw9ktr3nbfn1waerwzf5clq.png"></div></div><br>  M√©tricas iguais de protocolo OSPF atribu√≠das a canais de comunica√ß√£o virtual paralelos permitem a distribui√ß√£o do tr√°fego de usu√°rios sem fio entre canais de comunica√ß√£o virtual e, como resultado, fornecem balanceamento de tr√°fego entre linhas de comunica√ß√£o f√≠sicas. <br><br><h3>  NAT na CPU </h3><br>  Os roteadores NAT convertem (traduzem) endere√ßos IP privados (Network Address Translation, NAT) em endere√ßos IP p√∫blicos.  Para implementar o mecanismo de convers√£o de endere√ßo IP, √© necess√°rio alocar um pool de endere√ßos IP p√∫blicos exclusivos.  Grupos NAT correspondentes s√£o formados para um par de roteadores, em cada um dos quais um roteador √© selecionado como principal (ativo) e o outro como backup.  Em caso de falha do roteador principal, o backup se torna ativo, continuando a atender as sess√µes do usu√°rio. <br><br><h3>  Roteamento entre gateways de servi√ßo e roteadores NAT </h3><br>  Ao usar roteadores NAT, as seguintes restri√ß√µes s√£o consideradas: <br><br><ul><li>  Os roteadores NAT usam apenas rotas est√°ticas; </li><li>  duas redes virtuais (VLANs) s√£o alocadas para cada grupo NAT: dentro da VLAN e fora da VLAN; </li></ul><br>  A VLAN interna √© usada para se comunicar com os gateways de servi√ßo da CPU.  A VLAN externa √© usada para se comunicar com os roteadores de borda BGP. <br><br>  Para aumentar a toler√¢ncia a falhas, duas interfaces f√≠sicas s√£o usadas para conectar cada BNG.  Devido a v√°rios recursos do equipamento, al√©m da necessidade de vincular rigidamente o conjunto de endere√ßos IP externos a um BNG espec√≠fico, prop√µe-se o uso das seguintes restri√ß√µes: <br>  - N√£o use a tecnologia Etherchannel, mas organize o balanceamento de carga e redund√¢ncia usando o roteamento L3; <br>  - Para cada roteador NAT, use um canal f√≠sico para se comunicar com o BNG. <br><br>  Portanto, √© necess√°rio estabelecer um "n√≥ L3" intermedi√°rio (a seguir denominado CPU ASBR) entre os roteadores BNG e NAT.  O n√≥ intermedi√°rio executar√° as seguintes fun√ß√µes: <br>  - OSPF ASBR para a √°rea 0. <br>  - Distribui√ß√£o de rotas padr√£o para a √°rea 0. <br>  - Pacotes de roteamento provenientes de roteadores NAT em dire√ß√£o ao OSPF ABR. <br>  - Roteamento est√°tico de pacotes provenientes da √°rea 0 do OSPF para roteadores NAT (gateways padr√£o). <br><br>  O papel de um roteador intermedi√°rio pode ser desempenhado por uma pilha de comutadores L3, que fornece conex√£o de roteadores BNG e NAT, nos quais s√£o criados 2 VRFs (VRF Lite [9]) para esse fim: Users1_out e Users2_out. <br><br>  √â importante usar a pilha de switches L3, porque  isso permite que voc√™: <br>  - use as duas conex√µes BNG f√≠sicas para organizar canais de comunica√ß√£o virtual com cada um dos roteadores NAT; <br>  - fornecer balanceamento de carga entre as interfaces f√≠sicas do BNG; <br>  - garantir que a conex√£o BNG ao comutador L3 da pilha seja preservada, no caso de falha de um dos comutadores L3 da pilha ou problemas com a opera√ß√£o de uma das interfaces f√≠sicas do BNG. <br><br>  Outra caracter√≠stica da solu√ß√£o √© o uso de dois VRFs na pilha de switches L3. <br>  Isso √© necess√°rio para "vincular" rigidamente cada BNG a um ASBR espec√≠fico (consulte a Figura 4) e, portanto, vincular o conjunto de endere√ßos IP externos a um BNG espec√≠fico. <br>  Para cada um desses VRFs (Users1_out e Users2_out), processos OSPF independentes s√£o iniciados na pilha de switches L3.  Os canais de comunica√ß√£o virtual entre o BNG e o VRF Users1_out e Users2_out da pilha de comutadores est√£o na 0a zona (principal) do OSPF. <br><br>  Para roteamento entre roteadores ASBR e NAT, o roteamento est√°tico √© usado: <br><ul><li>  no VRF Users1_out - a rota est√°tica padr√£o atrav√©s do endere√ßo IP virtual NAT-group1; </li><li>  no VRF Users2_out, a rota est√°tica padr√£o atrav√©s do endere√ßo IP virtual do NAT-group2; </li><li>  para o primeiro roteador NAT, rotas est√°ticas na rede IP de usu√°rios sem fio atrav√©s do endere√ßo IP VRF Users1_out; </li><li>  para o segundo roteador NAT, rotas est√°ticas na rede IP de usu√°rios sem fio atrav√©s do endere√ßo IP do VRF Users2_out. </li></ul><br><br>  Para distribuir a rota padr√£o nos processos OSPF, o ASBR VRF Users1_out e o ASBR Users2_out habilitam a fun√ß√£o de origem da rota padr√£o. <br><br>  O esquema que usa o intermedi√°rio "n√≥ L3" √© apresentado na Figura 4. <br><div class="spoiler">  <b class="spoiler_title">Figura 4</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ze/qv/pe/zeqvpeaznap7mifyfwufoivotya.png"><br><br></div></div>  M√©tricas iguais de protocolo OSPF atribu√≠das a canais de comunica√ß√£o virtual paralelos permitem a distribui√ß√£o do tr√°fego do usu√°rio sem fio entre os canais de comunica√ß√£o virtual e, como resultado, o balanceamento do tr√°fego entre as linhas de comunica√ß√£o f√≠sica atrav√©s das quais os gateways de servi√ßo da CPU s√£o conectados √† pilha de comutadores. <br><br>  A CPU do ASBR √© um roteador de borda OSPF e √© usada para redistribuir rotas de outros segmentos de roteamento, conjuntos de endere√ßos IP NAT e Internet. <br><br><h3>  Roteamento e balanceamento de tr√°fego entre CPU ASBRs e roteadores NAT </h3><br>  Os canais de comunica√ß√£o virtual s√£o criados entre a CPU do ASBR e os roteadores NAT, como mostra a Figura 5. A toler√¢ncia a falhas padr√£o dos gateways nos roteadores NAT pode ser implementada usando o mecanismo HSRP (Hot Standby Router Protocol [11]). <br><br>  As interfaces dos roteadores NAT usam dois grupos HSRP.  O primeiro grupo HSRP √© respons√°vel pela opera√ß√£o do gateway padr√£o para o NAT-group1, o segundo grupo HSRP √© respons√°vel pela opera√ß√£o do gateway padr√£o para o NAT-group2, como mostra a Figura 5. <br><div class="spoiler">  <b class="spoiler_title">Figura 5</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/og/qg/cv/ogqgcvhq1eainoxgztg4ayjqmxi.png"><br></div></div><br><br><h3>  Roteamento entre roteadores NAT e roteadores de borda de rede </h3><br>  Na solu√ß√£o proposta, o roteamento foi realizado usando o roteamento est√°tico e o protocolo HSRP em roteadores de borda de rede (roteador externo, veja a Figura 6).  Esta decis√£o n√£o √© considerada em detalhes neste artigo. <br><div class="spoiler">  <b class="spoiler_title">Figura 6</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/yu/uy/hv/yuuyhv-vuk94ft-bxujvm9nua8q.png"><br></div></div><br><br>  Entre roteadores NAT e roteadores de borda, links virtuais s√£o criados.  A toler√¢ncia a falhas dos gateways padr√£o nos roteadores de borda pode ser implementada usando o mecanismo HSRP ou similar, dependendo dos recursos do equipamento usado.  Dois grupos HSRP s√£o usados ‚Äã‚Äãpara esse fim. <br>  O esquema de roteamento √© mostrado na Figura 6. <br><br><div class="spoiler">  <b class="spoiler_title">Esquemas e desenhos</b> <div class="spoiler_text">  Figura 1. Usu√°rios sem fio VRF no n√≠vel de distribui√ß√£o, somando rotas nas sub-redes IP dos usu√°rios. <br><img src="https://habrastorage.org/webt/mm/bp/fs/mmbpfse_xbtqlourl0ck2ysfceq.png"><br><br>  Figura 2. Roteamento no n√≠vel de distribui√ß√£o. <br><img src="https://habrastorage.org/webt/n5/gf/oi/n5gfoivj6hbfdfghxgfu0sgeff8.png"><br><br>  Figura 3. Roteamento entre o n√≠vel de distribui√ß√£o e a CPU. <br><img src="https://habrastorage.org/webt/th/ec/gw/thecgw9ktr3nbfn1waerwzf5clq.png"><br><br>  Figura 4. Roteamento entre o BNG e a CPU ASBR. <br><img src="https://habrastorage.org/webt/ze/qv/pe/zeqvpeaznap7mifyfwufoivotya.png"><br><br>  Figura 5. Roteamento entre CPUs ASBR e roteadores NAT. <br><img src="https://habrastorage.org/webt/og/qg/cv/ogqgcvhq1eainoxgztg4ayjqmxi.png"><br><br>  Figura 6. Roteamento no limite da rede. <br><img src="https://habrastorage.org/webt/yu/uy/hv/yuuyhv-vuk94ft-bxujvm9nua8q.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Fontes</b> <div class="spoiler_text">  [1] J. Moy (Ascend Communications), Pedido de Coment√°rios: 2328 ‚ÄúOSPF Version 2‚Äù, abril de 1998. <br>  [2] A. Lindem (Ericsson), A. Roy, S. Mirtorabi (Cisco Systems) Pedido de Coment√°rios: 6549, Extens√µes de v√°rias inst√¢ncias OSPFv2, mar√ßo de 2012 <br>  [3] S. Wadhwa (Alcatel-Lucent), J. Moisand (Juniper Networks), T. Haag (Deutsche Telekom), N. Voigt (Nokia Siemens Networks), T. Taylor, Ed.  (Huawei Technologies) Pedido de coment√°rios: 6320, Protocolo para mecanismo de controle de n√≥s de acesso em redes de banda larga, outubro de 2011 <br>  [4] P. Srisuresh (Jasmine Networks), K. Egevang (Intel Corporation) Pedido de Coment√°rios: 3022, NAT tradicional, janeiro de 2001 <br>  [5] IEEE 802.11, "Especifica√ß√µes de controle de acesso m√©dio √† LAN sem fio (MAC) e camada f√≠sica (PHY)", 1997. <br>  [6] Pedido de Coment√°rios de R. Droms (Universidade de Bucknell) 2131, Dynamic Host Configuration Protocol, mar√ßo de 1997 <br>  [7] Exemplo de configura√ß√£o de VLANs de grupos de APs com controladores de LAN sem fio, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.cisco.com</a> , 2008 <br>  [8] L. Andersson, T. Madsen (Acreo AB) Pedido de Coment√°rios 4026, Terminologia de Rede Privada Virtual Provisionada por Provedor (VPN) <br>  [9] Configurando o VRF-lite, site da Cisco [Online].  Dispon√≠vel: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.cisco.com</a> <br>  [10] Centro de Pesquisa Y. Rekhter TJ Watson, IBM Corp.  T. Li, editores da Cisco Systems, Request for Comments 1518, Uma arquitetura para aloca√ß√£o de endere√ßos IP com o CIDR, setembro de 1993 <br>  [11] T. Li (Juniper Networks), B. Cole (Juniper Networks) P. Morton (Cisco Systems), D. Li (Cisco Systems), solicita√ß√£o de coment√°rios 2281: Protocolo do roteador de espera quente da Cisco (HSRP), mar√ßo de 1998 <br>  [12] Exemplos e refer√™ncias de NAT, site da Cisco [Online].  Dispon√≠vel: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.cisco.com</a> <br>  [14] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Roteamento IP do Cisco IOS: refer√™ncia de comando OSPF</a> <br>  [15] <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Roteamento de backdoor de link falso</a> <br>  [16] ‚ÄúCria√ß√£o de redes p√∫blicas sem fio‚Äù 2008-2010 ‚Äù, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">step.ru/projects/industrys/telecom/projects-to-create-public-wireless-networks-of-ojsc-tattelecom-2009-2010</a> <br></div></div><br><br><br><br>  Uma das dificuldades foi o design da solu√ß√£o, que incluiu um n√∫mero significativo de n√≥s, servi√ßos e sistemas relacionados com os quais era necess√°rio garantir a integra√ß√£o.  Assim como os artistas respons√°veis ‚Äã‚Äãpelo design de v√°rios sistemas e servi√ßos. <br><br>  V√°rias conclus√µes baseadas nas li√ß√µes aprendidas: <br>  - Executar design de servi√ßos de ponta a ponta, incluindo roteamento de tr√°fego; <br>  - Separe componentes funcionais em n√≥s IP separados (BNG, roteadores NAT, roteadores BGP de fronteira); <br>  - Roteadores empilh√°veis ‚Äã‚Äãsimplificam bastante a solu√ß√£o de design. <br>  - ao usar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">canais P2P virtuais, n√£o se esque√ßa</a> de configurar o OSPF corretamente nas interfaces do roteador;) <br>  ATUALIZA√á√ÉO: adicionada uma descri√ß√£o muito detalhada da solu√ß√£o.  Espero que tenha ficado mais claro. <br>  Desenhos corrigidos. <br><br>  Preparado a partir dos materiais de 2008. <br>  Voc√™ pode aprender sobre o uso de BNG moderno nas redes de operadoras de telecomunica√ß√µes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no site do Learning Club</a> ou nos recursos de informa√ß√µes dos fabricantes de equipamentos de telecomunica√ß√µes. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt427433/">https://habr.com/ru/post/pt427433/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt427421/index.html">Como os sites de genealogia facilitam a captura de assassinos</a></li>
<li><a href="../pt427423/index.html">City2Share: carros e- e aut√¥nomos nos centros log√≠sticos de Munique</a></li>
<li><a href="../pt427427/index.html">Como eles chegam √† TI: sobre estagi√°rios e vendedores (o resultado da pesquisa ‚ÄúMy Circle‚Äù)</a></li>
<li><a href="../pt427429/index.html">Estruturas da GUI - por thread</a></li>
<li><a href="../pt427431/index.html">Como o Android funciona, parte 4</a></li>
<li><a href="../pt427435/index.html">STM32H7 - acerto do rel√≥gio sem HAL</a></li>
<li><a href="../pt427437/index.html">Configurando servidores vinculados: ms sql server e teradata</a></li>
<li><a href="../pt427439/index.html">Toda a verdade sobre o RTOS. Artigo 16. Signals</a></li>
<li><a href="../pt427441/index.html">Converg√™ncia com Kubernetes</a></li>
<li><a href="../pt427443/index.html">Vivissec√ß√£o do sucesso</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>