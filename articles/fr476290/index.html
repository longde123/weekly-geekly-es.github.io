<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👈🏿 ▫️ 🐱 Gestion des erreurs dans Express 🐰 🌓 👌🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lorsque j'ai commencé à travailler avec Express et essayé de comprendre comment gérer les erreurs, j'ai eu du mal. Il y avait le sentiment que personn...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gestion des erreurs dans Express</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/476290/">  Lorsque j'ai commencé à travailler avec Express et essayé de comprendre comment gérer les erreurs, j'ai eu du mal.  Il y avait le sentiment que personne n'avait écrit sur ce dont j'avais besoin.  En conséquence, j'ai dû chercher moi-même des réponses à mes questions.  Aujourd'hui, je veux dire tout ce que je sais sur la gestion des erreurs dans les applications Express.  Commençons par les erreurs synchrones. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/pt/dq/0q/ptdq0qx0qz7ob2gd1qf0xptr_me.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Gestion des erreurs synchrones</font> </h2><br>  Si vous devez gérer une erreur synchrone, vous pouvez tout d'abord, à l'aide de l'instruction <code>throw</code> , <code>throw</code> une telle erreur dans le gestionnaire de requêtes Express.  Veuillez noter que les gestionnaires de demandes sont également appelés «contrôleurs», mais je préfère utiliser le terme «gestionnaire de demandes» comme il me semble plus clairement. <br><br>  Voici à quoi ça ressemble: <br><br><pre> <code class="javascript hljs">app.post(<span class="hljs-string"><span class="hljs-string">'/testing'</span></span>, (req, res) =&gt; {  <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Something broke! '</span></span>) })</code> </pre> <br>  Ces erreurs peuvent être détectées à l'aide du gestionnaire d'erreurs Express.  Si vous n'avez pas écrit votre propre gestionnaire d'erreurs (nous en parlerons plus loin ci-dessous), Express traitera l'erreur en utilisant le gestionnaire par défaut. <br><br>  Voici ce que fait le gestionnaire d'erreurs Express standard: <br><br><ol><li>  Définit le code d'état de réponse HTTP sur 500. </li><li>  Envoie une réponse textuelle à l'entité exécutant la demande. </li><li>  Enregistre une réponse textuelle dans la console. </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fc0/177/d75/fc0177d75573acf04474fe8488806e74.png"></div><br>  <i><font color="#999999">Message d'erreur affiché dans la console</font></i> <br><br><h2>  <font color="#3AC1EF">Gestion des erreurs asynchrones</font> </h2><br>  Pour gérer les erreurs asynchrones, vous devez envoyer une erreur au gestionnaire d'erreurs Express via l'argument <code>next</code> : <br><br><pre> <code class="javascript hljs">app.post(<span class="hljs-string"><span class="hljs-string">'/testing'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res, next) =&gt; {  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Something broke again! '</span></span>)) })</code> </pre> <br>  C'est ce qui arrive à la console lors de la journalisation de cette erreur. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b9b/abd/8d8/b9babd8d81180f790746e847e1d3796e.png"></div><br>  <i><font color="#999999">Message d'erreur affiché dans la console</font></i> <br><br>  Si vous utilisez la construction async / wait dans une application Express, vous devrez utiliser une fonction wrapper comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">express-async-handler</a> .  Cela vous permet d'écrire du code asynchrone sans blocs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">try / catch</a> .  En savoir plus sur async / wait dans Express <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> asyncHandler = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'express-async-handler'</span></span>) app.post(<span class="hljs-string"><span class="hljs-string">'/testing'</span></span>, asyncHandler(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res, next) =&gt; {  <span class="hljs-comment"><span class="hljs-comment">//  - }))</span></span></code> </pre> <br>  Une fois que le gestionnaire de requêtes est encapsulé dans <code>express-async-handler</code> , vous pouvez, comme décrit ci-dessus, générer une erreur à l'aide de l'instruction <code>throw</code> .  Cette erreur ira au gestionnaire d'erreurs Express. <br><br><pre> <code class="javascript hljs">app.post(<span class="hljs-string"><span class="hljs-string">'/testing'</span></span>, asyncHandler(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res, next) =&gt; {  <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Something broke yet again! '</span></span>) }))</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/89b/505/6c0/89b5056c0c376e95a6e03cbde3fe7dd9.png"></div><br>  <i><font color="#999999">Message d'erreur affiché dans la console</font></i> <br><br><h2>  <font color="#3AC1EF">Écrire votre propre gestionnaire d'erreurs</font> </h2><br>  Les gestionnaires d'erreur express prennent 4 arguments: <br><br><ol><li>  erreur </li><li>  req </li><li>  res </li><li>  suivant </li></ol><br>  Vous devez les placer après les gestionnaires et les itinéraires intermédiaires. <br><br><pre> <code class="javascript hljs">app.use(<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>) app.get(<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>) app.post(<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>) app.put(<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>) app.delete(<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>) <span class="hljs-comment"><span class="hljs-comment">//           app.use((error, req, res, next) =&gt; { /* ... */ })</span></span></code> </pre> <br>  Si vous créez votre propre gestionnaire d'erreurs, Express cessera d'utiliser le gestionnaire d'erreurs standard.  Pour gérer l'erreur, vous devez générer une réponse pour l'application frontale qui a adressé le point de terminaison auquel l'erreur s'est produite.  Cela signifie que vous devez effectuer les opérations suivantes: <br><br><ol><li>  Générez et envoyez un code d'état de réponse approprié. </li><li>  Formez et envoyez une réponse appropriée. </li></ol><br>  Le code d'état approprié dans chaque cas particulier dépend de ce qui s'est exactement passé.  Voici une liste des erreurs courantes que vous devez être prêt à gérer: <br><br><ol><li>  Erreur <code>400 Bad Request</code> .  Utilisé dans deux situations.  Premièrement, lorsque l'utilisateur n'a pas inclus le champ obligatoire dans la demande (par exemple, le champ avec les informations de carte de crédit n'a pas été rempli dans le formulaire de paiement envoyé).  Deuxièmement, lorsque la demande contient des données incorrectes (par exemple, entrer différents mots de passe dans le champ de mot de passe et dans le champ de confirmation de mot de passe). </li><li>  Erreur <code>401 Unauthorized</code> .  Ce code d'état de réponse est appliqué si l'utilisateur a entré des informations d'identification incorrectes (telles que nom d'utilisateur, adresse e-mail ou mot de passe). </li><li>  Erreur <code>403 Forbidden</code> .  Utilisé lorsque l'utilisateur n'est pas autorisé à accéder au point de terminaison. </li><li>  Erreur <code>404 Not Found</code> .  Il est utilisé dans les cas où le point final ne peut pas être détecté. </li><li>  Erreur <code>500 Internal Server Error</code> Erreur de <code>500 Internal Server Error</code> .  Il est appliqué lorsque la demande envoyée par le serveur frontal est correctement formée, mais une erreur s'est produite sur le serveur principal. </li></ol><br>  Une fois le code d'état de réponse approprié défini, il doit être défini à l'aide de <code>res.status</code> : <br><br><pre> <code class="javascript hljs">app.use(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-comment"><span class="hljs-comment">// ,         res.status(400)  res.json(/* ... */) })</span></span></code> </pre> <br>  Le code d'état de réponse doit correspondre au message d'erreur.  Pour ce faire, envoyez le code d'état avec l'erreur. <br><br>  La façon la plus simple de le faire est d'utiliser le package <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.npmjs.com/package/">http-errors</a> .  Il permet d'envoyer trois informations par erreur: <br><br><ol><li>  Le code d'état de réponse. </li><li>  Le message associé à l'erreur. </li><li>  Toutes les données qui doivent être envoyées (ceci est facultatif). </li></ol><br>  Voici comment installer le package <code>http-errors</code> : <br><br><pre> <code class="javascript hljs">npm install http-errors --save</code> </pre> <br>  Voici comment utiliser ce package: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> createError = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http-errors'</span></span>) <span class="hljs-comment"><span class="hljs-comment">//   throw createError(status, message, properties)</span></span></code> </pre> <br>  Prenons un exemple qui vous permettra de bien comprendre tout cela. <br><br>  Imaginez que nous essayons de trouver un utilisateur à son adresse e-mail.  Mais cet utilisateur est introuvable.  En conséquence, nous décidons d'envoyer une erreur <code>User not found</code> en réponse à la demande correspondante, informant l'appelant que l'utilisateur n'a pas été trouvé. <br><br>  Voici ce que nous devrons faire lors de la création de l'erreur: <br><br><ol><li>  Définissez le code d'état de réponse sur <code>400 Bad Request</code> (après tout, l'utilisateur a entré des données incorrectes).  Ce sera notre premier paramètre. </li><li>  Envoyez un message à l'appelant comme <code>User not found</code> .  Ce sera le deuxième paramètre. </li></ol><br><pre> <code class="javascript hljs">app.put(<span class="hljs-string"><span class="hljs-string">'/testing'</span></span>, asyncHandler(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res) =&gt; {  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { email } = req.body  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> user = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> User.findOne({ email })  <span class="hljs-comment"><span class="hljs-comment">//     -    if (!user) throw createError(400, `User '${email}' not found`) }))</span></span></code> </pre> <br>  Vous pouvez obtenir le code d'état à l'aide de la construction <code>error.status</code> et le message d'erreur à l'aide de <code>error.message</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   app.use((error, req, res, next) =&gt; {  console.log('Error status: ', error.status)  console.log('Message: ', error.message) })</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb6/200/6e5/fb62006e5a36863e7bf82ce460867f05.png"></div><br>  <i><font color="#999999">Le résultat des erreurs de journalisation dans la console</font></i> <br><br>  Ensuite, l'état de réponse est défini à l'aide de <code>res.status</code> et le message est écrit dans <code>res.json</code> : <br><br><pre> <code class="javascript hljs">app.use(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-comment"><span class="hljs-comment">//      res.status(error.status)  //    res.json({ message: error.message }) })</span></span></code> </pre> <br>  Personnellement, je préfère envoyer un code d'état, un message et un résultat de trace de pile dans de telles réponses.  Cela facilite le débogage. <br><br><pre> <code class="javascript hljs">app.use(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-comment"><span class="hljs-comment">//      res.status(error.status)  //    res.json({    status: error.status,    message: error.message,    stack: error.stack  }) })</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">▍ Code d'état de réponse par défaut</font> </h3><br>  Si la source de l'erreur n'est pas <code>createError</code> , elle n'aura pas la propriété <code>status</code> .  Voici un exemple dans lequel une tentative de lecture d'un fichier inexistant a été effectuée à l'aide de <code>fs.readFile</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> util = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'util'</span></span>) <span class="hljs-comment"><span class="hljs-comment">//  readFile  ,  ,  async/await-. //     : https://zellwk.com/blog/callbacks-to-promises const readFilePromise = util.promisify(fs.readFile) app.get('/testing', asyncHandler(async (req, res, next) =&gt; {  const data = await readFilePromise('some-file') })</span></span></code> </pre> <br>  Un tel objet d'erreur n'aura pas la propriété <code>status</code> : <br><br><pre> <code class="javascript hljs">app.use(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Error status: '</span></span>, error.status)  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Message: '</span></span>, error.message) })</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b78/187/6a3/b781876a373eba2a5ad6effe597c2e3e.png"></div><br>  <i><font color="#999999">Le résultat des erreurs de journalisation dans la console</font></i> <br><br>  Dans de tels cas, vous pouvez définir le code d'erreur par défaut.  À savoir, nous parlons de l' <code>500 Internal Server Error</code> : <br><br><pre> <code class="javascript hljs">app.use(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> {  res.status(error.status || <span class="hljs-number"><span class="hljs-number">500</span></span>)  res.json({    <span class="hljs-attr"><span class="hljs-attr">status</span></span>: error.status,    <span class="hljs-attr"><span class="hljs-attr">message</span></span>: error.message,    <span class="hljs-attr"><span class="hljs-attr">stack</span></span>: error.stack  }) })</code> </pre> <br><h3>  <font color="#3AC1EF">▍Modification du code d'état d'erreur</font> </h3><br>  Supposons que nous allons lire un certain fichier en utilisant les données fournies par l'utilisateur.  Si un tel fichier n'existe pas, cela signifie que nous devons donner une erreur <code>400 Bad Request</code> .  Après tout, le serveur est introuvable car le fichier est introuvable. <br><br>  Dans ce cas, vous devez utiliser la construction try / catch pour intercepter l'erreur d'origine.  Ensuite, vous devez recréer l'objet d'erreur à l'aide de <code>createError</code> : <br><br><pre> <code class="javascript hljs">app.get(<span class="hljs-string"><span class="hljs-string">'/testing'</span></span>, asyncHandler(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res, next) =&gt; {  <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { file } = req.body    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> contents = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> readFilePromise(path.join(__dirname, file))  } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (error) {    <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> createError(<span class="hljs-number"><span class="hljs-number">400</span></span>, <span class="hljs-string"><span class="hljs-string">`File </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${file}</span></span></span><span class="hljs-string"> does not exist`</span></span>)  } })</code> </pre> <br><h3>  <font color="#3AC1EF">▍ Gestion des erreurs 404</font> </h3><br>  Si la demande a traversé tous les gestionnaires et itinéraires intermédiaires, mais n'a pas été traitée, cela signifie que le point de terminaison correspondant à une telle demande n'a pas été trouvé. <br><br>  Pour gérer les erreurs <code>404 Not Found</code> , vous devez ajouter, entre les routes et le gestionnaire d'erreurs, un gestionnaire supplémentaire.  Voici à quoi ressemble la création de l'objet d'erreur 404: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ... // ... app.use((req, res, next) =&gt; {  next(createError(404)) }) //  ...</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5c2/462/bc6/5c2462bc6a3767ca349c3c49f12ac033.png"></div><br>  <i><font color="#999999">Détails de l'erreur</font></i> <br><br><h3>  <font color="#3AC1EF">▍ ERR_HTTP_HEADERS_SENT notes d'erreur</font> </h3><br>  Ne paniquez pas si vous voyez le message d'erreur <code>ERR_HTTP_HEADERS_SENT: Cannot set headers after they are sent to the client</code> .  Cela se produit parce que dans le même gestionnaire, la méthode qui définit les en-têtes de réponse est appelée à plusieurs reprises.  Voici les méthodes qui appellent pour définir automatiquement les en-têtes de réponse: <br><br><ol><li>  res.send </li><li>  res.json </li><li>  res.render </li><li>  res.sendFile </li><li>  res.sendStatus </li><li>  res.end </li><li>  res.redirect </li></ol><br>  Ainsi, par exemple, si vous appelez les <code>res.json</code> <code>res.render</code> et <code>res.json</code> dans le même gestionnaire de réponses, vous obtiendrez l'erreur <code>ERR_HTTP_HEADERS_SENT</code> : <br><br><pre> <code class="javascript hljs">app.get(<span class="hljs-string"><span class="hljs-string">'/testing'</span></span>, (req, res) =&gt; {  res.render(<span class="hljs-string"><span class="hljs-string">'new-page'</span></span>)  res.json({ <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">'¯\_(ツ)_/¯'</span></span> }) })</code> </pre> <br>  Par conséquent, si vous rencontrez cette erreur, vérifiez soigneusement le code du gestionnaire de réponses et assurez-vous qu'il n'y a aucune situation dans laquelle plusieurs des méthodes décrites ci-dessus sont appelées. <br><br><h3>  <font color="#3AC1EF">▍ Gestion des erreurs et streaming de données</font> </h3><br>  Si quelque chose ne va pas lors du streaming de la réponse vers le frontend, vous pouvez rencontrer la même erreur <code>ERR_HTTP_HEADERS_SENT</code> . <br><br>  Dans ce cas, la gestion des erreurs doit être transmise aux gestionnaires standard.  Un tel gestionnaire enverra une erreur et fermera automatiquement la connexion. <br><br><pre> <code class="javascript hljs">app.use(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-comment"><span class="hljs-comment">//       ,        if (res.headersSent) {    return next(error)  }  //     })</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Résumé</font> </h2><br>  Aujourd'hui, je vous ai dit tout ce que je sais sur la gestion des erreurs dans Express.  J'espère que cela vous aidera à écrire des applications Express plus fiables. <br><br>  <b>Chers lecteurs!</b>  Comment gérez-vous les erreurs dans vos projets Node.js? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/-o/2e/tu/-o2etuqogwhmdnmysb9_vivc9v4.png"></a> </div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr476290/">https://habr.com/ru/post/fr476290/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr476278/index.html">Conférence BLACK HAT USA. Devenez riche ou mourez: gagnez de l'argent sur Internet en utilisant Black Hat. 3e partie</a></li>
<li><a href="../fr476280/index.html">À travers les épines jusqu'au DOS: quatre disquettes qui ont changé le monde</a></li>
<li><a href="../fr476284/index.html">Nous formulons une stratégie pour travailler avec les erreurs dans React</a></li>
<li><a href="../fr476286/index.html">Top 5 des cadres JS pour le développement frontal en 2020. Partie 1</a></li>
<li><a href="../fr476288/index.html">Top 5 des cadres JS pour le développement frontal en 2020. 2e partie</a></li>
<li><a href="../fr476292/index.html">SVG ou toile?</a></li>
<li><a href="../fr476294/index.html">Réseau de jeu distribué comme alternative à GFN: comment et pourquoi il peut décoller, là où il fonctionne déjà en Fédération de Russie</a></li>
<li><a href="../fr476296/index.html">21 novembre, Meetup d'ingénierie produit: qui est ingénieur produit?</a></li>
<li><a href="../fr476298/index.html">Parcourez les épines des vélos, première partie: découvrez les bases de la personnalisation du débogueur Visual Studio à l'aide de plugins</a></li>
<li><a href="../fr476300/index.html">Le magazine Tram est une star brillamment éclairée et rapidement fanée de l'avant-garde russe pour enfants</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>