<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéæ üò∫ ü•ü Middleware- und Pipeline-Funktionen in Laravel üö© üì¥ üåã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Laravel ist ein wirklich gro√ües und komplexes System, das versucht, die meisten allt√§glichen Aufgaben eines Webentwicklers auf eleganteste Weise zu l√∂...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Middleware- und Pipeline-Funktionen in Laravel</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429214/"><img src="https://habrastorage.org/webt/gq/9y/lj/gq9yljr_yvia5supmq_lo1ify0a.jpeg"><br><br>  <b>Laravel</b> ist ein wirklich gro√ües und komplexes System, das versucht, die meisten allt√§glichen Aufgaben eines Webentwicklers auf eleganteste Weise zu l√∂sen und so viele Tools wie m√∂glich und vor allem mit so vielen Benutzeroberfl√§chen wie m√∂glich zu sammeln. <br><br>  Und heute konzentrieren wir uns auf eines dieser Tools bzw. auf dessen Verwendung und Implementierung durch den Programmierer.  Das Fehlen einer vollst√§ndigen Dokumentation sowie das Fehlen russischsprachiger Artikel und einer sehr geringen Anzahl ausl√§ndischer Artikel veranlasste mich, einen gewissen Schleier der Geheimhaltung √ºber dieses interessante Merkmal des Frameworks zu enth√ºllen und dieses Thema als meinen ersten Artikel √ºber Habr√© zu w√§hlen. <br><a name="habracut"></a><br><h4>  Middleware </h4><br><blockquote>  In diesem Artikel wird davon ausgegangen, dass der Leser bereits mit der grundlegenden Verwendung dieser Funktionalit√§t des Frameworks vertraut ist, sodass ich auf diesen Punkt nicht lange eingehen werde. </blockquote><br>  Laravel bietet uns sofort eine ziemlich leistungsstarke Funktionalit√§t zum Filtern eingehender HTTP-Anforderungen an unsere Anwendung.  Wir sprechen √ºber die geliebte (oder nicht geliebte) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Middleware</a> aller - der Entwickler begegnet diesen Klassen auf dem Weg zur Beherrschung von Laravel ziemlich schnell, w√§hrend er den Abschnitt "Die Grundlagen" der offiziellen Dokumentation liest, und dies ist nicht √ºberraschend - Middleware ist eine der wichtigsten und wichtigsten Ziegel, auf deren Grundlage das gesamte System aufgebaut ist. <br><br>  Beispiele f√ºr Standardbenutzerf√§lle dieser Komponente in Laravel sind: <i>EncryptCookies / RedirectIfAuthenticated / VerifyCsrfToken</i> . Als Beispiel f√ºr eine benutzerdefinierte Implementierung k√∂nnen Sie die Lokalisierung von Middleware-Anwendungen (Festlegen der erforderlichen Lokalisierung basierend auf bestimmten Anforderungsdaten) <i>angeben</i> , bevor Sie die Anforderung weiter √ºbertragen. <br><br><h2>  Tiefer in den Abgrund </h2><br><h4>  Gib die Hoffnung auf, dass alle hier reinkommen </h4><br>  Nun, da die Hauptpunkte vorbei sind, k√∂nnen wir in den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Laravel-Quellen</a> f√ºr viele in einen schrecklichen Ort eintauchen - in Alpha und Omega, Anfang und Ende.  Diejenigen, die den Artikel sofort schlie√üen wollten, nehmen sich Zeit.  Tats√§chlich gibt es im Quellcode dieses Frameworks konzeptionell fast nichts wirklich Kompliziertes - die Entwickler versuchen eindeutig nicht nur, eine klare und bequeme Schnittstelle f√ºr die Arbeit mit ihrer Idee zu schaffen, sondern sie versuchen auch, dies direkt auf der Ebene des Quellcodes zu tun, was nicht m√∂glich ist nicht zu gefallen. <br><br>  Ich werde versuchen, das Konzept der Funktionsweise von <i>Middleware</i> und <i>Pipeline</i> auf der Ebene von Code und Logik so einfach und zug√§nglich wie m√∂glich zu erl√§utern, und ich werde versuchen, nicht darauf einzugehen - wo dies im Rahmen des Artikels nicht erforderlich ist.  Wenn es also in den Kommentaren Leute gibt, die alle Zeilen des Quellcodes auswendig k√∂nnen, bitte ich Sie, meine oberfl√§chliche Erz√§hlung nicht zu kritisieren.  Empfehlungen und Korrekturen von Ungenauigkeiten sind jedoch nur willkommen. <br><br><h4>  Middleware - √ºber die Barrikaden </h4><br>  Ich glaube, dass es immer einfacher ist, etwas zu lernen, wenn gute Beispiele geliefert werden.  Deshalb lade ich Sie und mich ein, dieses mysteri√∂se Tier unter dem Namen <i>Pipeline</i> zu studieren.  Wenn solche tapferen M√§nner wirklich existieren, m√ºssen wir vor dem weiteren Lesen ein leeres Laravel-Projekt Version 5.7 installieren - die Version ist nur darauf zur√ºckzuf√ºhren, dass es zum Zeitpunkt des Schreibens die letzte ist. Alle oben genannten sollten mindestens mit Version 5.4 identisch sein.  Diejenigen, die nur das Wesentliche und die Schlussfolgerungen des Artikels kennen wollen, k√∂nnen diesen Teil sicher √ºberspringen. <br><br>  Was gibt es Sch√∂neres, als das Verhalten einer Komponente zu untersuchen, als das bereits in das System integrierte Verhalten zu untersuchen?  Vielleicht kann etwas, aber wir werden ohne unn√∂tige Komplikationen auskommen und unsere Analyse mit der Standard-Middleware beginnen - n√§mlich mit der einfachsten und verst√§ndlichsten der gesamten Bande - <b>RedirectIfAuthenticated</b> : <br><br><div class="spoiler">  <b class="spoiler_title">RedirectIfAuthenticated.php</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RedirectIfAuthenticated</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/**      * Handle an incoming request. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Illuminate\Http\Request $request * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Closure $next * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string|null $guard * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> mixed */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($request, Closure $next, $guard = null)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Auth::guard($guard)-&gt;check()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> redirect(<span class="hljs-string"><span class="hljs-string">'/'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $next($request); } }</code> </pre> <br></div></div><br>  In jeder klassischen Middleware-Klasse gibt es eine Hauptmethode, die die Anforderung direkt verarbeiten und die Verarbeitung an die n√§chste in der Kette √ºbergeben muss - in unserem Fall ist dies die <i>Handle-</i> Methode.  In dieser bestimmten Klasse ist die Verarbeitung der Anforderung recht einfach: "Wenn der Benutzer autorisiert ist, leiten Sie ihn zur Hauptseite weiter und beenden Sie dadurch die Kette." <br><br>  Wenn wir uns die Registrierung dieser Middleware in <i>app / Http / Kernel.php ansehen</i> , werden wir sehen, dass sie in der 'Route Middleware' registriert ist.  Um herauszufinden, wie das System mit dieser Middleware funktioniert, gehen wir zu der Klasse, von der unsere <i>App / Http / Kernel</i> erbt - und die von der Klasse <i>Illuminate \ Foundation \ Http \ Kernel</i> erbt.  In dieser Phase √∂ffnen wir direkt die Tore zur <s>H√∂lle des</s> Quellcodes unseres Frameworks oder vielmehr zum wichtigsten und wichtigsten Teil davon - zum Kern der Arbeit mit HTTP.  √úbrigens, wen interessiert das schon - Laravel basiert auf vielen Komponenten von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Symfony</a> , speziell in diesem Teil - auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://github.com/symfony/">HttpFoundation</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://github.com/symfony/">HttpKernel</a> . <br><br>  Die Definition und Implementierung unserer Middleware im Kernel-Konstruktor lautet wie folgt: <br><br><div class="spoiler">  <b class="spoiler_title">Illuminate \ Foundation \ Http \ Kernel (Anwendung $ app, Router $ router)</b> <div class="spoiler_text"><pre> <code class="php hljs"> <span class="hljs-comment"><span class="hljs-comment">/**    HTTP Kernel . * Create a new HTTP kernel instance. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Illuminate\Contracts\Foundation\Application $app * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Illuminate\Routing\Router $router * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> void */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Application $app, Router $router)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;app = $app; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;router = $router; $router-&gt;middlewarePriority = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;middlewarePriority; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;middlewareGroups <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $key =&gt; $middleware) { $router-&gt;middlewareGroup($key, $middleware); } <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;routeMiddleware <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $key =&gt; $middleware) { $router-&gt;aliasMiddleware($key, $middleware); } }</code> </pre><br></div></div><br>  Der Code ist recht einfach und unkompliziert - f√ºr jede Middleware im Array registrieren wir ihn mit einem Alias ‚Äã‚Äã/ Index in unserem Router.  Die Methoden aliasMiddleware und middlewareGroups unserer Route-Klasse f√ºgen lediglich Middleware zu einem der Arrays des Router-Objekts hinzu.  Dies ist jedoch nicht im Kontext des Artikels enthalten, daher werden wir diesen Moment √ºberspringen und fortfahren. <br><br>  Was uns wirklich interessiert, ist die <b>sendRequestThroughRoute-</b> Methode, die w√∂rtlich √ºbersetzt, wie <b>eine</b> <b>Anfrage √ºber die Route gesendet</b> wird: <br><br><div class="spoiler">  <b class="spoiler_title">Illuminate \ Foundation \ Http \ Kernel :: sendRequestThroughRouter ($ request)</b> <div class="spoiler_text"><pre> <code class="php hljs"> <span class="hljs-comment"><span class="hljs-comment">/**     middleware / router. * Send the given request through the middleware / router. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \Illuminate\Http\Request $request * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> \Illuminate\Http\Response */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendRequestThroughRouter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($request)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// *    * return (new Pipeline($this-&gt;app)) -&gt;send($request) -&gt;through($this-&gt;app-&gt;shouldSkipMiddleware() ? [] : $this-&gt;middleware) -&gt;then($this-&gt;dispatchToRouter()); }</span></span></code> </pre><br></div></div><br>  Als Parameter empf√§ngt diese Methode eine Anfrage.  An dieser Stelle sollten wir uns noch einmal unseren <b>RedirectIfAuthenticated-</b> Code ansehen.  Wir erhalten auch eine Anfrage in der <i>Handle-</i> Methode unserer Middleware, wir werden diesen Hinweis etwas sp√§ter ben√∂tigen. <br><br>  Der obige Code hat eine sehr klare und lesbare Schnittstelle - <i>"Pipeline", die eine Anfrage √ºber jede der registrierten Middleware sendet und diese dann an den Router "√ºbertr√§gt"</i> .  Charmant und wunderbar.  Ich denke, in diesem Stadium werden wir nicht versuchen, diesen Codeabschnitt weiter zu zerlegen. Ich werde die Rolle dieses Abschnitts im gesamten System nur kurz beschreiben: <br><br>  Bevor eine Anforderung in Ihren Controller eingeht, werden viele Aktionen ausgef√ºhrt, von der einfachen Analyse der URL selbst bis zur Initialisierung der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anforderungsklasse</a> .  Middleware ist ebenfalls an dieser Aktionskette beteiligt.  Die Middleware-Klassen selbst implementieren das (fast) Muster des Entwurfs der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verantwortungskette oder der Verantwortungskette</a> , sodass jede einzelne Midleware-Klasse nur ein Glied in der Kette ist. <br><br>  Oben sind wir nicht nur zu unserer urspr√ºnglich betrachteten <b>RedirectIfAuthenticated-</b> Klasse zur√ºckgekehrt.  Die Anfrage "zirkuliert" entlang der Kette, einschlie√ülich derjenigen, die alles durchl√§uft, was f√ºr die Middleware-Route erforderlich ist.  Dieser Moment wird uns helfen, mit unseren eigenen Gliedern in unserer eigenen Kette zu arbeiten, dazu sp√§ter mehr. <br><br><h3>  Pipeline - Channeling unserer Anwendung </h3><br>  Ein Beispiel f√ºr die Implementierung der <i>Pipeline haben</i> wir oben gesehen.  Der Zweck des Artikels bestand jedoch nicht nur darin, die Funktionsweise dieser Komponente auf der Ebene der Integration mit Laravel zu erl√§utern, sondern auch das Grundprinzip der Arbeit mit dieser Klasse in unserem eigenen Code zu erl√§utern. <br><br>  Die Klasse selbst kann durch ihre vollst√§ndige Definition mit Namespace gefunden werden: <blockquote>  Beleuchten Sie \ Pipeline \ Pipeline </blockquote><br>  Abh√§ngig von der spezifischen Aufgabe, die Sie l√∂sen m√ºssen, kann es f√ºr diese Komponente eine Vielzahl von Anwendungen geben. Eine der offensichtlichsten Motivationen ist jedoch die Anforderung, eine eigene Kette von Anforderungsbearbeitern zu erstellen, die die Prozesse des gesamten Systems nicht beeintr√§chtigt und ausschlie√ülich auf der Ebene Ihrer Gesch√§ftslogik festgelegt wird.  Au√üerdem verf√ºgt die Klassenschnittstelle √ºber einen ausreichenden Abstraktionsgrad und eine ausreichende Funktionalit√§t, um verschiedene Arten von Warteschlangen zu implementieren. <br><br><h4>  Beispielimplementierung in Laravel </h4><br>  Wir implementieren die einfachste und realit√§tsfernste Abfragekette.  Wir werden die Zeichenfolge "HELLO WORLD" als Daten verwenden und mit Hilfe von zwei Handlern die Zeichenfolge "Hello User" daraus bilden.  Der Code wird absichtlich vereinfacht. <br><br>  Vor der sofortigen Implementierung unserer eigenen ‚ÄûPipe‚Äú m√ºssen wir die Elemente dieser Pipe identifizieren.  Elemente werden analog zur Middleware geschrieben: <br><br><div class="spoiler">  <b class="spoiler_title">Handler definieren</b> <div class="spoiler_text">  StrToLowerAction.php: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Closure</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StrToLowerAction</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * Handle an incoming request. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string $content * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> Closure $next * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> mixed */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(string $content, Closure $next)</span></span></span><span class="hljs-function"> </span></span>{ $content = strtolower($content); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $next($content); } }</code> </pre><br>  SetUserAction.php: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Closure</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SetUserAction</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * Handle an incoming request. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string $content * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> Closure $next * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> mixed */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(string $content, Closure $next)</span></span></span><span class="hljs-function"> </span></span>{ $content = ucwords(str_replace(<span class="hljs-string"><span class="hljs-string">'world'</span></span>, <span class="hljs-string"><span class="hljs-string">'user'</span></span>, $content)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $next($content); } }</code> </pre><br></div></div><br>  Dann erstellen wir eine ‚ÄûPipeline‚Äú, bestimmen, welche Art von Daten wir √ºber sie senden m√∂chten, bestimmen, √ºber welche Sammlung von Prozessoren wir diese Daten senden m√∂chten, und definieren auch einen R√ºckruf, der als Argument unsere Daten empf√§ngt, die durch die gesamte Kette geleitet werden.  F√ºr den Fall, dass die Daten in der gesamten Kette unver√§ndert bleiben, kann der Teil mit R√ºckruf weggelassen werden: <br><br><pre> <code class="php hljs">$pipes = [ StrToLowerAction::class, SetUserNameAction::class ]; $data = <span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>; $finalData = app(Pipeline::class) -&gt;send($data) <span class="hljs-comment"><span class="hljs-comment">// ,       -&gt;through($pipes) //   -&gt;then(function ($changedData) { return $changedData; //  ,    }); var_dump($finalData); //      $finalData</span></span></code> </pre><br>  Wenn Sie Ihre eigene Methode in <i>Handlern definieren m√∂chten</i> oder m√ºssen, bietet die Pipeline-Schnittstelle eine spezielle Methode <i>via ('method_name'). Die</i> Kettenverarbeitung kann folgenderma√üen geschrieben werden: <br><br><pre> <code class="php hljs">$finalData = app(Pipeline::class) -&gt;send($data) -&gt;through($pipes) -&gt;via(<span class="hljs-string"><span class="hljs-string">'handle'</span></span>) <span class="hljs-comment"><span class="hljs-comment">//      ,         -&gt;then(function ($changedData) { return $changedData; });</span></span></code> </pre><br>  Direkt k√∂nnen die Daten, die wir durch die Prozessoren weitergeben, absolut alles sein, ebenso wie die Interaktion mit ihnen.  Durch Eingabe von Hinweisen und Festlegen des Typs des zur√ºckgegebenen Objekts in der Kette k√∂nnen Datenintegrit√§tsfehler vermieden werden. <br><br><h2>  Fazit </h2><br>  Laravel bietet eine gro√üe Anzahl integrierter Klassen, und die Flexibilit√§t vieler von ihnen erm√∂glicht es uns, etwas Komplexes mit ausreichender Einfachheit zu entwickeln.  In diesem Artikel wurde die M√∂glichkeit untersucht, einfache Warteschlangen f√ºr Anforderungen basierend auf der in Laravel integrierten Pipeline-Klasse zu erstellen.  Die Implementierungen dieser Klasse im endg√ºltigen Code k√∂nnen v√∂llig unterschiedlich sein. Dank der Flexibilit√§t dieses Tools k√∂nnen Sie beim Erstellen bestimmter Algorithmen viele unn√∂tige Aktionen vermeiden. <br><br>  Wie Sie diese Funktion des Frameworks speziell verwenden, h√§ngt von den Ihnen zugewiesenen Aufgaben ab. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de429214/">https://habr.com/ru/post/de429214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de429198/index.html">Das Kernel-Bridge-Framework: Bridge in Ring0</a></li>
<li><a href="../de429202/index.html">Teure Kurse: lohnt es sich?</a></li>
<li><a href="../de429204/index.html">Die wichtigsten Missverst√§ndnisse √ºber die Spieleentwicklung</a></li>
<li><a href="../de429210/index.html">Harte Realit√§t: Ihre Stakeholder wollen keine Gesch√§ftsanalyse</a></li>
<li><a href="../de429212/index.html">Microsoft hat das Vorhandensein von (Massen-) Problemen bei der Aktivierung von Windows 10 best√§tigt</a></li>
<li><a href="../de429216/index.html">Bei Google Play nach Verk√§ufen suchen - ist es die Sorge wert?</a></li>
<li><a href="../de429218/index.html">Julia und partielle Differentialgleichungen</a></li>
<li><a href="../de429220/index.html">FSIN gegen die Gesetze der Physik oder Bienen gegen Honig</a></li>
<li><a href="../de429222/index.html">Die Staatsduma wird die Rechnung √ºber gro√üe Benutzerdaten zur √úberarbeitung zur√ºcksenden</a></li>
<li><a href="../de429224/index.html">Dunkle Webformularmuster oder das am meisten konvertierte Formular</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>