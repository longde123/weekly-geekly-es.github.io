<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòØ üßõüèΩ üì™ Millionen von Bin√§rdateien sp√§ter. Wie Linux gest√§rkt wurde üèß üë®üèæ‚Äçü§ù‚Äçüë®üèº üíø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TL; DR . In diesem Artikel untersuchen wir H√§rtungsschemata, die bei f√ºnf g√§ngigen Linux-Distributionen sofort funktionieren. F√ºr jede haben wir die S...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Millionen von Bin√§rdateien sp√§ter. Wie Linux gest√§rkt wurde</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444418/"><img src="https://habrastorage.org/getpro/habr/post_images/43f/b35/8ca/43fb358cac8e2bec978126698b7d2ece.png" align="left" width="340">  <b>TL; DR</b> .  In diesem Artikel untersuchen wir H√§rtungsschemata, die bei f√ºnf g√§ngigen Linux-Distributionen sofort funktionieren.  F√ºr jede haben wir die Standard-Kernel-Konfiguration √ºbernommen, alle Pakete heruntergeladen und die Schutzschemata in den angeh√§ngten Bin√§rdateien analysiert.  Wir betrachten die Distributionen von OpenSUSE 12.4, Debian 9, CentOS, RHEL 6.10 und 7 sowie Ubuntu 14.04, 12.04 und 18.04 LTS. <br><br>  Die Ergebnisse best√§tigen, dass selbst grundlegende Schemata wie Stapelkanarien und positionsunabh√§ngiger Code noch nicht von allen verwendet werden.  F√ºr Compiler ist die Situation noch schlimmer, wenn es um den Schutz vor Schwachstellen wie Stack Clash geht, die im Januar nach der Ver√∂ffentlichung von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schwachstelleninformationen in systemd</a> ins Rampenlicht <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ger√ºckt sind</a> .  Aber nicht alles ist so hoffnungslos.  In einem wesentlichen Teil der Bin√§rdateien sind grundlegende Schutzmethoden implementiert, und ihre Anzahl w√§chst von Version zu Version. <br><br>  Die √úberpr√ºfung ergab, dass die meisten Schutzmethoden in Ubuntu 18.04 auf Betriebssystem- und Anwendungsebene implementiert sind, gefolgt von Debian 9. Andererseits sind in OpenSUSE 12.4, CentOS 7 und RHEL 7 auch grundlegende Schutzschemata implementiert, und der Schutz vor Stapelkollisionen wird noch weiter angewendet. mit einer viel dichteren Menge von Paketen standardm√§√üig. <br><a name="habracut"></a><br><h1>  Einf√ºhrung </h1><br>  Es ist schwierig, qualitativ hochwertige Software bereitzustellen.  Trotz der gro√üen Anzahl fortschrittlicher Tools f√ºr die statische und dynamische Analyse von Code zur Laufzeit sowie der erheblichen Fortschritte bei der Entwicklung von Compilern und Programmiersprachen leidet moderne Software immer noch an Schwachstellen, die von Cyberkriminellen st√§ndig ausgenutzt werden.  In √ñkosystemen mit Legacy-Code ist die Situation noch schlimmer.  In solchen F√§llen stehen wir nicht nur vor dem ewigen Problem, m√∂gliche ausgenutzte Fehler zu finden, sondern sind auch durch starre Abw√§rtskompatibilit√§ts-Frameworks eingeschr√§nkt, die h√§ufig die Aufrechterhaltung eines begrenzten und noch schlimmeren anf√§lligen oder fehlerhaften Codes erfordern. <br><br>  Hier kommen H√§rtungsmethoden ins Spiel.  Wir k√∂nnen einige Arten von Fehlern nicht verhindern, aber wir k√∂nnen das Leben eines Angreifers erschweren und das Problem teilweise l√∂sen, indem wir den <i>Betrieb</i> dieser Fehler verhindern oder verhindern.  Ein solcher Schutz wird in allen modernen Betriebssystemen verwendet. Die Methoden unterscheiden sich jedoch stark in Komplexit√§t, Effizienz und Leistung: von Stapelkanarien und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ASLR</a> bis hin zu vollwertigen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CFI-</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ROP-</a> Schutzma√ünahmen.  In diesem Artikel werden wir untersuchen, welche Schutzmethoden in den g√§ngigsten Linux-Distributionen in der Standardkonfiguration verwendet werden, und die Eigenschaften von Bin√§rdateien untersuchen, die √ºber die Paketverwaltungssysteme jeder Distribution verteilt werden. <br><br><h3>  CVE und Sicherheit </h3><br>  Wir haben alle Artikel mit Titeln wie "Die anf√§lligsten Anwendungen des Jahres" oder "Die anf√§lligsten Betriebssysteme" gesehen.  In der Regel liefern sie Statistiken √ºber die Gesamtzahl der Schwachstellendatens√§tze wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CVE (Common Vulnerability and Exposures),</a> die aus der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">National Vulnerability Database (NVD)</a> von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">NIST</a> und anderen Quellen stammen.  Anschlie√üend werden diese Anwendungen oder Betriebssysteme nach der Anzahl der CVEs eingestuft.  Obwohl CVEs sehr n√ºtzlich sind, um Probleme zu verfolgen und Anbieter und Benutzer zu informieren, sagen sie leider wenig √ºber die tats√§chliche Sicherheit von Software aus. <br><br>  Betrachten Sie als Beispiel die Gesamtzahl der CVEs in den letzten vier Jahren f√ºr den Linux-Kernel und die f√ºnf beliebtesten Serverdistributionen Ubuntu, Debian, Red Hat Enterprise Linux und OpenSUSE. <br><br><img src="https://habrastorage.org/webt/3_/pt/md/3_ptmdzx313ayxw3xpi0udnlbdq.png"><br>  <i><font color="gray">Abb.</font></i>  <i><font color="gray">1</font></i> <br><br>  Was sagt uns diese Tabelle?  Bedeutet mehr CVE, dass eine Distribution anf√§lliger ist als eine andere?  Es gibt keine Antwort.  In diesem Artikel werden Sie beispielsweise sehen, dass Debian im Vergleich zu OpenSUSE oder RedHat Linux strengere Sicherheitsmechanismen implementiert und Debian dennoch √ºber mehr CVE verf√ºgt.  Sie bedeuten jedoch nicht unbedingt eine geschw√§chte Sicherheit: Selbst ein CVE sagt nicht aus, ob die Sicherheitsanf√§lligkeit <i>ausnutzbar ist</i> .  Die Schweregrade geben eine Vorstellung davon, wie <i>wahrscheinlich die</i> Ausnutzung der Sicherheitsanf√§lligkeit ist. Letztendlich h√§ngt die Ausnutzbarkeit jedoch weitgehend vom Schutz der betroffenen Systeme sowie von den Ressourcen und F√§higkeiten der Angreifer ab.  Dar√ºber hinaus sagt das Fehlen von CVE-Berichten nichts √ºber andere <i>nicht registrierte oder unbekannte</i> Schwachstellen aus.  Der Unterschied in der CVE kann nicht durch die Qualit√§t der Software erkl√§rt werden, sondern durch andere Faktoren, einschlie√ülich der f√ºr Tests zugewiesenen Ressourcen oder der Gr√∂√üe der Benutzerbasis.  In unserem Beispiel k√∂nnen mehr Debian-CVEs einfach darauf hinweisen, dass Debian mehr Softwarepakete bereitstellt. <br><br>  Nat√ºrlich bietet das CVE-System n√ºtzliche Informationen, mit denen Sie geeignete Schutzma√ünahmen erstellen k√∂nnen.  Je besser wir die Gr√ºnde f√ºr das Scheitern des Programms verstehen, desto einfacher ist es, m√∂gliche Betriebsmethoden zu identifizieren und geeignete <i>Erkennungs- und Reaktionsmechanismen</i> zu entwickeln.  In Abb.  Abbildung 2 zeigt die Schwachstellenkategorien f√ºr alle Distributionen in den letzten vier Jahren ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quelle</a> ).  Es ist sofort ersichtlich, dass die meisten CVEs in die folgenden Kategorien fallen: Denial-of-Service (DoS), Codeausf√ºhrung, √úberlauf, Speicherbesch√§digung, Informationsverlust (Exfiltration) und Eskalation von Berechtigungen.  Obwohl viele CVEs mehrmals in verschiedenen Kategorien behandelt werden, bestehen im Allgemeinen von Jahr zu Jahr dieselben Probleme.  Im n√§chsten Teil des Artikels werden wir die Verwendung verschiedener Schutzschemata bewerten, um die Ausnutzung dieser Sicherheitsanf√§lligkeiten zu verhindern. <br><br><img src="https://habrastorage.org/webt/tr/92/pc/tr92pcngbl1y4qxt3shouu6wdi8.png"><br>  <i><font color="gray">Abb.</font></i>  <i><font color="gray">2</font></i> <br><br><h3>  Die Aufgaben </h3><br>  In diesem Artikel m√∂chten wir die folgenden Fragen beantworten: <br><br><ul><li>  Was ist die Sicherheit verschiedener Linux-Distributionen?  Welche Abwehrmechanismen gibt es in den Kernel- und User Space-Anwendungen? <br></li><li>  Wie hat sich die Einf√ºhrung von Schutzmechanismen f√ºr verschiedene Distributionen im Laufe der Zeit ver√§ndert? <br></li><li>  Was sind die durchschnittlichen Abh√§ngigkeiten von Paketen und Bibliotheken f√ºr jede Distribution? <br></li><li>  Welche Schutzfunktionen sind f√ºr jede Bin√§rdatei implementiert? </li></ul><br><h3>  Verteilungen ausw√§hlen </h3><br>  Es stellt sich heraus, dass es schwierig ist, genaue Statistiken zu Distributionsinstallationen zu finden, da in den meisten F√§llen die Anzahl der Downloads nicht die Anzahl der tats√§chlichen Installationen angibt.  Unix-Varianten machen jedoch die Mehrheit der Serversysteme aus (69,2% auf Webservern, laut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Statistiken von</a> W3techs und anderen Quellen), und ihr Anteil w√§chst st√§ndig.  Daher haben wir uns f√ºr unsere Studie auf Distributionen konzentriert, die sofort auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Google Cloud-</a> Plattform verf√ºgbar sind.  Insbesondere haben wir folgendes Betriebssystem gew√§hlt: <br><br><table><tbody><tr><th>  Distribution / Version </th><th>  Der Kern </th><th>  Bauen </th></tr><tr><td>  OpenSUSE 12.4 </td><td>  4.12.14-95.3-Standard </td><td>  # 1 SMP Mi Dez 5 06:00:48 UTC 2018 (63a8d29) </td></tr><tr><td>  Debian 9 (strecken) </td><td>  4.9.0-8-amd64 </td><td>  # 1 SMP Debian 4.9.130-2 (2018-10-27) </td></tr><tr><td>  CentOS 6.10 </td><td>  2.6.32-754.10.1.el6.x86_64 </td><td>  # 1 SMP Di Jan 15 17:07:28 UTC 2019 </td></tr><tr><td>  CentOS 7 </td><td>  3.10.0-957.5.1.el7.x86_64 </td><td>  # 1 SMP Fr 1. Februar 14:54:57 UTC 2019 </td></tr><tr><td>  Red Hat Enterprise Linux Server 6.10 (Santiago) </td><td>  2.6.32-754.9.1.el6.x86_64 </td><td>  # 1 SMP Mi Nov 21 15:08:21 EST 2018 </td></tr><tr><td>  Red Hat Enterprise Linux Server 7.6 (Maipo) </td><td>  3.10.0-957.1.3.el7.x86_64 </td><td>  # 1 SMP Do 15.11. 17:36:42 UTC 2018 </td></tr><tr><td>  Ubuntu 14.04 (Trusty Tahr) </td><td>  4.4.0‚Äì140-generisch </td><td><br>  # 166 ~ 04/14/1-Ubuntu SMP Sa Nov 17 01:52:43 UTC 20 ... </td></tr><tr><td>  Ubuntu 16.04 (Xenial Xerus) </td><td>  4,15,0-1026-gcp </td><td>  # 27 ~ 16.04.1-Ubuntu SMP Fr 7. Dezember 09:59:47 UTC 2018 </td></tr><tr><td>  Ubuntu 18.04 (Bionic Beaver) </td><td>  4,15,0-1026-gcp </td><td>  # 27-Ubuntu SMP Do 6. Dezember 18:27:01 UTC 2018 </td></tr></tbody></table>  <i><font color="gray">Tabelle 1</font></i> <br><br><h1>  Analyse </h1><br>  Wir werden die Standard-Kernel-Konfiguration sowie die Eigenschaften von Paketen untersuchen, die √ºber den Paketmanager jedes Distributionspakets sofort verf√ºgbar sind.  Daher ber√ºcksichtigen wir nur Pakete aus den Standardspiegeln jeder Distribution und ignorieren Pakete aus instabilen Repositorys (z. B. "Testen" von Spiegeln in Debian) und Pakete von Drittanbietern (z. B. Nvidia-Pakete aus Standardspiegeln).  Dar√ºber hinaus ber√ºcksichtigen wir keine benutzerdefinierten Kernel-Kompilierungen oder erweiterten Sicherheitskonfigurationen. <br><br><h3>  Analyse der Kernelkonfiguration </h3><br>  Wir haben ein Analyseskript verwendet, das auf dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kostenlosen kconfig-Checker</a> basiert.  Wir betrachten die sofort einsatzbereiten Schutzoptionen f√ºr die genannten Distributionen und vergleichen sie mit der Liste aus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dem Kernel Self-Defense Project</a> (KSPP).  In Tabelle 2 wird f√ºr jeden Konfigurationsparameter die gew√ºnschte Einstellung beschrieben: Ein H√§kchen steht f√ºr Verteilungen, die den KSSP-Empfehlungen entsprechen (eine Erl√§uterung der Begriffe finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> ; in zuk√ºnftigen Artikeln erfahren Sie, wie viele dieser Schutzmethoden aufgetreten sind und wie Sie das System in Abwesenheit hacken k√∂nnen). <br><br> <a href=""><img src="https://habrastorage.org/webt/dx/oh/o0/dxoho0z-lifjcybajszqb-aiirq.png"></a> <br><br><img src="https://habrastorage.org/webt/rm/or/h1/rmorh1jx8aswaj98ts0-7jptjmk.png"><br><br>  Im Allgemeinen haben die neueren Kernel sofort strengere Einstellungen.  Beispielsweise verf√ºgen CentOS 6.10 und RHEL 6.10 auf dem 2.6.32-Kernel nicht √ºber die meisten kritischen Funktionen, die in den neuen Kerneln implementiert sind, wie z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SMAP</a> , starke RWX-Berechtigungen, Adress-Randomisierung oder copy2usr-Schutz.  Es ist zu beachten, dass viele der Konfigurationsoptionen in der Tabelle in √§lteren Versionen des Kernels fehlen und in der Realit√§t nicht anwendbar sind. Dies wird in der Tabelle immer noch als Mangel an angemessenem Schutz angegeben.  Wenn der Konfigurationsparameter in dieser Version nicht verf√ºgbar ist und dieser Parameter aus Sicherheitsgr√ºnden deaktiviert werden muss, wird dies als sinnvolle Konfiguration angesehen. <br><br>  Ein weiterer Punkt bei der Interpretation der Ergebnisse: Einige Kernelkonfigurationen, die die Angriffsfl√§che vergr√∂√üern, k√∂nnen aus Sicherheitsgr√ºnden gleichzeitig verwendet werden.  Solche Beispiele umfassen Uprobes und kprobes, Kernelmodule und BPF / eBPF.  Wir empfehlen, die oben genannten Mechanismen zu verwenden, um einen echten Schutz zu bieten, da sie nicht trivial zu verwenden sind und bei ihrer Funktionsweise davon ausgegangen wird, dass b√∂swillige Akteure bereits im System verankert sind.  Wenn diese Optionen aktiviert sind, muss der Systemadministrator den Missbrauch aktiv √ºberwachen. <br><br>  Wenn wir die Eintr√§ge in Tabelle 2 weiter untersuchen, sehen wir, dass moderne Kernel verschiedene Optionen zum Schutz vor der Ausnutzung von Sicherheitsl√ºcken wie Informationslecks und Stapel- / Heap-√úberlauf bieten.  Wir stellen jedoch fest, dass selbst die neuesten popul√§ren Distributionen noch keinen ausgefeilteren Schutz (z. B. mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">grsecurity-</a> Patches) oder einen modernen Schutz vor Angriffen zur Wiederverwendung von Code (z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kombination von Randomisierung mit R ^ X-Schemata f√ºr Code</a> ) implementiert haben.  Schlimmer noch, selbst diese fortgeschritteneren Abwehrmechanismen sch√ºtzen nicht vor einer ganzen Reihe von Angriffen.  Daher ist es f√ºr Systemadministratoren von entscheidender Bedeutung, intelligente Konfigurationen durch L√∂sungen zu erg√§nzen, mit denen Exploits zur Laufzeit erkannt und verhindert werden k√∂nnen. <br><br><h3>  Anwendungsanalyse </h3><br>  Es ist nicht √ºberraschend, dass verschiedene Distributionen unterschiedliche Eigenschaften von Paketen, Kompilierungsoptionen, Bibliotheksabh√§ngigkeiten usw. aufweisen. Unterschiede bestehen auch f√ºr <a href="">verwandte</a> Distributionen und Pakete mit einer geringen Anzahl von Abh√§ngigkeiten (z. B. Coreutils in Ubuntu oder Debian).  Um die Unterschiede zu bewerten, haben wir alle verf√ºgbaren Pakete heruntergeladen, deren Inhalt extrahiert und die Bin√§rdateien und Abh√§ngigkeiten analysiert.  F√ºr jedes Paket haben wir die anderen Pakete verfolgt, von denen es abh√§ngt, und f√ºr jede Bin√§rdatei haben wir ihre Abh√§ngigkeiten verfolgt.  Dieser Abschnitt fasst die Ergebnisse zusammen. <br><br><h4>  Verteilungen </h4><br>  Insgesamt haben wir 361.556 Pakete f√ºr alle Distributionen heruntergeladen und nur Pakete aus den Standardspiegeln extrahiert.  Wir haben Pakete ohne ausf√ºhrbare ELF-Dateien wie Quellcodes, Schriftarten usw. ignoriert. Nach dem Filtern blieben 129 569 Pakete √ºbrig, die insgesamt 584 457 Bin√§rdateien enthielten.  Die Verteilung von Paketen und Dateien auf Verteilungen ist in Abb. 2 dargestellt.  3. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f9d/8fc/bbf/f9d8fcbbf2ac0887f4948e1e49446e9a.png"><br>  <i><font color="gray">Abb.</font></i>  <i><font color="gray">3</font></i> <br><br>  M√∂glicherweise stellen Sie fest, dass je moderner die Distribution, desto mehr Pakete und Bin√§rdateien enthalten sind, was logisch ist.  Gleichzeitig enthalten Ubuntu- und Debian-Pakete viel mehr Bin√§rdateien (sowohl ausf√ºhrbare als auch dynamische Module und Bibliotheken) als CentOS, SUSE und RHEL, was sich m√∂glicherweise auf die Angriffsfl√§che von Ubuntu und Debian auswirkt (es sollte beachtet werden, dass die Zahlen alle Bin√§rdateien aller Versionen widerspiegeln Paket, dh einige Dateien werden mehrmals analysiert).  Dies ist besonders wichtig, wenn Sie die Abh√§ngigkeiten zwischen Paketen ber√ºcksichtigen.  Daher kann eine Sicherheitsanf√§lligkeit in der Bin√§rdatei eines einzelnen Pakets viele Teile des √ñkosystems betreffen, ebenso wie eine anf√§llige Bibliothek alle Bin√§rdateien betreffen kann, die sie importieren.  Betrachten wir als Referenz die Verteilung der Anzahl der Abh√§ngigkeiten zwischen Paketen in verschiedenen Betriebssystemen: <br><br> <a href=""><img src="https://habrastorage.org/webt/ii/e3/e5/iie3e5-ei26ezg5yvcyvtzqzl80.png"></a> <br>  <i><font color="gray">Abb.</font></i>  <i><font color="gray">4</font></i> <br><br>  In fast allen Distributionen weisen 60% der Pakete mindestens 10 Abh√§ngigkeiten auf.  Dar√ºber hinaus weisen einige Pakete mehr Abh√§ngigkeiten auf (√ºber 100).  Gleiches gilt f√ºr inverse Paketabh√§ngigkeiten: Wie erwartet werden mehrere Pakete von vielen anderen Paketen in der Distribution verwendet, sodass Schwachstellen in diesen wenigen Favoriten ein hohes Risiko darstellen.  In der folgenden Tabelle sind beispielsweise 20 Pakete mit der maximalen Anzahl inverser Abh√§ngigkeiten in SLES, Centos 7, Debian 9 und Ubuntu 18.04 aufgef√ºhrt (jedes Feld gibt das Paket und die Anzahl der inversen Abh√§ngigkeiten an). <br><br><img src="https://habrastorage.org/webt/0g/hl/w0/0ghlw0dtmbb3vswp-xgtx1zs-lu.png"><br>  <i><font color="gray">Tabelle 3</font></i> <br><br>  Eine interessante Tatsache.  Obwohl alle analysierten Betriebssysteme f√ºr die x86_64-Architektur erstellt wurden, w√§hrend die meisten Pakete die Architektur als x86_64 und x86 definiert haben, enthalten Pakete h√§ufig Bin√§rdateien f√ºr andere Architekturen, wie in Abb. 1 dargestellt.  5. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c4e/899/601/c4e899601e6fc711b224aba6b204c02a.png"><br>  <i><font color="gray">Abb.</font></i>  <i><font color="gray">5</font></i> <br><br>  Im n√§chsten Abschnitt werden wir uns mit den Eigenschaften der analysierten Bin√§rdateien befassen. <br><br><h4>  Bin√§rschutzstatistik </h4><br>  Als absolutes Minimum m√ºssen Sie die grundlegenden Schutzoptionen f√ºr vorhandene Bin√§rdateien studieren.  Einige Linux-Distributionen enthalten Skripte, die solche √úberpr√ºfungen durchf√ºhren.  Zum Beispiel gibt es in Debian / Ubuntu ein solches Skript.  Hier ist ein Beispiel seiner Arbeit: <br><br><pre><code class="bash hljs">$ hardening-check $(<span class="hljs-built_in"><span class="hljs-built_in">which</span></span> docker) /usr/bin/docker: Position Independent Executable: yes Stack protected: yes Fortify Source <span class="hljs-built_in"><span class="hljs-built_in">functions</span></span>: no, only unprotected <span class="hljs-built_in"><span class="hljs-built_in">functions</span></span> found! Read-only relocations: yes Immediate binding: yes</code> </pre> <br>  Das Skript √ºberpr√ºft f√ºnf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schutzfunktionen</a> : <br><br><ul><li>  Position Independent Executable (PIE): Gibt an, ob der Programmtextabschnitt im Speicher verschoben werden kann, um eine Randomisierung zu erreichen, wenn ASLR im Kernel aktiviert ist. <br></li><li>  Stapelgesch√ºtzt: Gibt an, ob Stapelkanarien zum Schutz vor Stapelkollisionsangriffen enthalten sind. <br></li><li>  Quelle verst√§rken: Gibt an, ob unsichere Funktionen (z. B. strcpy) durch ihre sichereren Gegenst√ºcke ersetzt werden und in der Laufzeit √ºberpr√ºfte Aufrufe durch ihre nicht verifizierten Gegenst√ºcke (z. B. memcpy anstelle von __memcpy_chk) ersetzt werden. <br></li><li>  Schreibgesch√ºtzte Verschiebungen (RELRO): Gibt an, ob die Eintr√§ge in der Bewegungstabelle als schreibgesch√ºtzt markiert sind, wenn sie vor Beginn der Ausf√ºhrung funktioniert haben. <br></li><li>  Sofortige Bindung: Gibt an, ob der Laufzeit-Linker alle Bewegungen vor dem Starten des Programms zul√§sst (dies entspricht einer vollst√§ndigen RELRO). </li></ul><br>  Reichen die oben genannten Mechanismen aus?  Leider gibt es keine.  Es sind M√∂glichkeiten bekannt, alle oben genannten Verteidigungen zu umgehen. Je strenger die Verteidigung, desto h√∂her die Messlatte f√ºr den Angreifer.  Beispielsweise sind <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RELRO-Problemumgehungen</a> schwieriger anzuwenden, wenn PIE und sofortige Bindung wirksam sind.  Ebenso erfordert eine vollst√§ndige ASLR zus√§tzliche Arbeit, um einen funktionierenden Exploit zu erstellen.  Anspruchsvolle Angreifer sind jedoch bereit, solche Abwehrma√ünahmen zu ergreifen: Ihre Abwesenheit beschleunigt das Hacken wesentlich.  Daher ist es unbedingt erforderlich, dass diese Ma√ünahmen als das notwendige <i>Minimum angesehen werden</i> . <br><br>  Wir wollten untersuchen, wie viele Bin√§rdateien in den betreffenden Distributionen durch diese gesch√ºtzt sind, sowie drei weitere Methoden: <br><br><ul><li>  Ein nicht ausf√ºhrbares Bit ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">NX</a> ) verhindert die Ausf√ºhrung in Bereichen, die nicht ausf√ºhrbar sein sollten, z. B. in einem Stapelheap usw. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RPATH / RUNPATH</a> gibt den Ausf√ºhrungspfad an, mit dem der dynamische Loader die entsprechenden Bibliotheken findet.  Das erste ist f√ºr jedes moderne System <i>obligatorisch</i> : Durch seine Abwesenheit k√∂nnen Angreifer die Nutzdaten willk√ºrlich in den Speicher schreiben und so ausf√ºhren, wie sie sind.  Zum anderen helfen falsche Konfigurationen des Ausf√ºhrungspfads bei der Einf√ºhrung von nicht vertrauensw√ºrdigem Code, was zu einer Reihe von Problemen f√ºhren kann (z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Eskalation von Berechtigungen</a> sowie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">andere Probleme</a> ). </li><li>  Der Stapelkollisionsschutz bietet Schutz vor Angriffen, die dazu f√ºhren, dass sich der Stapel mit anderen Speicherbereichen (z. B. einem Heap) √ºberlappt.  Angesichts der j√ºngsten Exploits, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schwachstellen bei Heap-Kollisionen in systemd</a> missbrauchen, fanden wir es angemessen, diesen Mechanismus in unseren Datensatz aufzunehmen. </li></ul><br>  Kommen wir also ohne weiteres zu den Zahlen.  Die Tabellen 4 und 5 enthalten einen √úberblick √ºber die Analyse ausf√ºhrbarer Dateien bzw. Bibliotheken verschiedener Distributionen. <br><br><ul><li>  Wie Sie sehen, ist der NX-Schutz mit seltenen Ausnahmen √ºberall implementiert.  Insbesondere die geringere Verwendung in Ubuntu- und Debian-Distributionen ist im Vergleich zu CentOS, RHEL und OpenSUSE festzustellen. <br></li><li>  Stapelkanarien sind an vielen Orten nicht verf√ºgbar, insbesondere in Distributionen mit alten Kerneln.  Bei den j√ºngsten Distributionen von Centos, RHEL, Debian und Ubuntu wurden einige Fortschritte erzielt. <br></li><li>  Mit Ausnahme von Debian und Ubuntu 18.04 haben die meisten Distributionen eine schlechte PIE-Unterst√ºtzung. <br></li><li>  Der Stapelkollisionsschutz ist in OpenSUSE, Centos 7 und RHEL 7 schlecht implementiert und fehlt im Rest praktisch. <br></li><li>  Alle Distributionen mit modernen Kerneln unterst√ºtzen RELRO, wobei Ubuntu 18.04 die Nase vorn hat und Debian den zweiten Platz einnimmt. </li></ul><br>  Wie bereits erw√§hnt, sind die Metriken in dieser Tabelle √ºber alle Versionen der Bin√§rdatei durchschnittlich.  Wenn Sie sich nur die neuesten Versionen von Dateien ansehen, sind die Zahlen unterschiedlich (siehe beispielsweise den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fortschritt von Debian bei der Implementierung von PIE</a> ).  Dar√ºber hinaus √ºberpr√ºfen die meisten Verteilungen normalerweise bei der Berechnung von Statistiken den Schutz von nur wenigen Funktionen im Bin√§rcode, und in unserer Analyse wird der wahre Prozentsatz der verst√§rkten Funktionen angegeben.  Wenn also 5 von 50 Funktionen in der Bin√§rdatei gesch√ºtzt sind, geben wir ihr eine Bewertung von 0,1, was 10% der verst√§rkten Funktionen entspricht. <br><br><img src="https://habrastorage.org/webt/m-/fn/1l/m-fn1l_i9vp3-gh8sicmbnkintc.png"><br>  <i><font color="gray">Tabelle 4. Schutzmerkmale f√ºr ausf√ºhrbare Dateien gem√§√ü Abb.</font></i>  <i><font color="gray">3 (Implementierung der entsprechenden Funktionen als Prozentsatz der Gesamtzahl der ausf√ºhrbaren Dateien)</font></i> <br><br><img src="https://habrastorage.org/webt/yt/y1/sa/yty1saotef9aqmxkik36r8iijus.png"><br>  <i><font color="gray">Tabelle 5. Schutzeigenschaften f√ºr die in Abb.</font></i>  <i><font color="gray">3 (Implementierung der entsprechenden Funktionen als Prozentsatz der Gesamtzahl der Bibliotheken)</font></i> <br><br>  Gibt es also Fortschritte?  Es gibt definitiv: Es ist aus den Statistiken f√ºr einzelne Distributionen (zum Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Debian</a> ) sowie aus den obigen Tabellen ersichtlich.  Als Beispiel in Abb.  Abbildung 6 zeigt die Implementierung von Abwehrmechanismen in drei aufeinander folgenden Ubuntu LTS 5-Distributionen (wir haben die Statistik zum Schutz vor Stapelkollisionen weggelassen).  Wir stellen fest, dass von Version zu Version immer mehr Dateien gestapelte Kanarienv√∂gel unterst√ºtzen und dass nacheinander immer mehr Bin√§rdateien √ºber einen vollst√§ndigen RELRO-Schutz verf√ºgen. <br><br> <a href=""><img src="https://habrastorage.org/webt/d1/ni/or/d1niordj1hmiklmg2-w5rsk6dla.png"></a> <br>  <i><font color="gray">Abb.</font></i>  <i><font color="gray">6</font></i> <br><br>  Leider haben einige ausf√ºhrbare Dateien in verschiedenen Distributionen immer noch keinen der oben genannten Schutzfunktionen.  Wenn Sie sich beispielsweise Ubuntu 18.04 ansehen, sehen Sie die ngetty-Bin√§rdatei (getty replace) sowie die mksh- und lksh-Shells, den Picolisp-Interpreter, die nvidia-cuda-toolkit-Pakete (ein beliebtes Paket f√ºr GPU-beschleunigte Anwendungen wie Frameworks f√ºr maschinelles Lernen) und klibc -utils.  Ebenso werden die Mandos-Client-Bin√§rdatei (ein Verwaltungstool, mit dem Sie Computer mit verschl√ºsselten Dateisystemen automatisch neu starten k√∂nnen) sowie der rsh-redone-client (Neuimplementierung von rsh und rlogin) ohne NX-Schutz bereitgestellt, obwohl sie √ºber SUID-Rechte verf√ºgen :(. Einige suid-Bin√§rdateien verf√ºgen nicht √ºber einen grundlegenden Schutz, z. B. Stapelkanarien (z. B. die Bin√§rdatei Xorg.wrap aus dem Xorg-Paket). <br><br><h1>  Zusammenfassung und abschlie√üende Bemerkungen </h1><br>  In diesem Artikel haben wir einige Sicherheitsfunktionen moderner Linux-Distributionen hervorgehoben.  Die Analyse ergab, dass die neueste Ubuntu LTS-Distribution (18.04) im Durchschnitt den st√§rksten Schutz auf Betriebssystem- und Anwendungsebene unter Distributionen mit relativ neuen Kerneln wie Ubuntu 14.04, 12.04 und Debian 9 implementiert hat. Die in unserem Kit diskutierten CentOS-, RHEL- und OpenSUSE-Distributionen Standardm√§√üig wird ein dichterer Satz von Paketen ausgegeben, und in neueren Versionen (CentOS und RHEL) haben sie einen h√∂heren Prozentsatz an Stapelkollisionsschutz als Konkurrenten, die auf Debian (Debian und Ubuntu) basieren.  Beim Vergleich der Versionen CentOS und RedHat stellen wir gro√üe Verbesserungen bei der Implementierung von Stack Canaries und RELRO von Version 6 auf 7 fest, aber CentOS bietet im Durchschnitt mehr Funktionen als RHEL.  Im Allgemeinen sollten alle Distributionen dem PIE-Schutz besondere Aufmerksamkeit widmen, der mit Ausnahme von Debian 9 und Ubuntu 18.04 in weniger als 10% der Bin√§rdateien aus unserem Datensatz implementiert ist. <br><br>  Abschlie√üend sei angemerkt: Obwohl wir die Recherche manuell durchgef√ºhrt haben, gibt es viele Sicherheitstools (z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lynis</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tiger</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hubble</a> ), die Analysen durchf√ºhren und dabei helfen, unsichere Konfigurationen zu vermeiden.  Leider garantiert selbst ein starker Schutz in vern√ºnftigen Konfigurationen nicht das Fehlen von Exploits.  Aus diesem Grund sind wir fest davon √ºberzeugt, dass es wichtig ist, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Angriffe in Echtzeit zuverl√§ssig zu √ºberwachen und zu verhindern</a> , sich auf Betriebsmodelle zu konzentrieren und diese zu verhindern. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de444418/">https://habr.com/ru/post/de444418/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de444406/index.html">Digitales Italien. Was und wie es funktioniert</a></li>
<li><a href="../de444408/index.html">Apple hat gestern neue iPads ver√∂ffentlicht und hat Fragen.</a></li>
<li><a href="../de444410/index.html">Netzwerkkarten. Ein kurzer √úberblick √ºber Software zum Erstellen von Netzwerkkarten</a></li>
<li><a href="../de444414/index.html">Snapdragon 8cx: 7-nm-PC-Plattform</a></li>
<li><a href="../de444416/index.html">HyperX Alloy CORE - wenn die Membran Spiele spielen kann</a></li>
<li><a href="../de444420/index.html">Wie man zwei R√§der zur Arbeit f√§hrt</a></li>
<li><a href="../de444422/index.html">Wie schon 2018: Industrieller FDM-Druck auf der Top 3D Expo</a></li>
<li><a href="../de444426/index.html">Lyft und Uber gehen an die B√∂rse. Warum in Lyft investieren?</a></li>
<li><a href="../de444428/index.html">Bergauto: Die klassische Herausforderung mit Verst√§rkungstraining l√∂sen</a></li>
<li><a href="../de444430/index.html">Analyse: Wie man Present Perfect tats√§chlich auf Englisch verwendet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>