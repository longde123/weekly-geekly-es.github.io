<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë´ ü§Ωüèª üñºÔ∏è Componentes de rea√ß√£o final üßôüèø ü§πüèø üëã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O que eu gosto no ecossistema React √© que a IDEA est√° por tr√°s de muitas decis√µes. V√°rios autores escrevem v√°rios artigos em apoio √† ordem existente e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Componentes de rea√ß√£o final</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434830/"><p>  O que eu gosto no ecossistema React √© que a IDEA est√° por tr√°s de muitas decis√µes.  V√°rios autores escrevem v√°rios artigos em apoio √† ordem existente e explicam por que tudo est√° ‚Äúcerto‚Äù, para que todos entendam que a festa est√° no caminho certo. </p><br><p>  Depois de algum tempo, a IDEA muda um pouco e tudo come√ßa do come√ßo. </p><br><p>  E o come√ßo desta hist√≥ria √© a separa√ß√£o de componentes em cont√™ineres e n√£o cont√™ineres (popularmente chamados Dumb Components, desculpe pelo meu franc√™s). </p><br><p><img src="https://habrastorage.org/webt/p3/cl/nl/p3clnlwh5eus18t7l4xkoxgc09a.jpeg"></p><a name="habracut"></a><br><h3 id="problema">  O problema </h3><br><p>  O problema √© muito simples - testes de unidade.  Recentemente, houve algum movimento em dire√ß√£o aos testes de integra√ß√£o - bem, voc√™ sabe <em>"Escrever testes. N√£o muitos. Principalmente integra√ß√£o".</em>  .  Esta n√£o √© uma m√° ideia, e se o tempo for curto (e os testes n√£o forem particularmente necess√°rios) - √© isso que voc√™ precisa fazer.  Vamos chamar de testes de fuma√ßa - para verificar se nada <em>parece</em> explodir. </p><br><p> Se houver muito tempo e forem necess√°rios testes, √© melhor n√£o seguir esse caminho, porque escrever bons testes de integra√ß√£o √© muito, muito longo.  S√≥ porque eles crescer√£o e crescer√£o, e para testar o terceiro bot√£o √† direita, primeiro voc√™ precisar√° clicar em 3 bot√µes no menu e n√£o se esque√ßa de fazer login.  Em geral - aqui est√° uma <u>explos√£o combinat√≥ria</u> em uma bandeja de prata. </p><br><p>  A solu√ß√£o aqui √© uma e simples (por defini√ß√£o) - testes de unidade.  A capacidade de iniciar testes com algum estado pronto de alguma parte do aplicativo.  Mais precisamente, reduzir (restringir) a √°rea de teste do Aplicativo ou do <em>Big Block</em> para algo pequeno - uma unidade, n√£o importa o que seja.  N√£o √© necess√°rio usar enzimas - voc√™ pode executar testes no navegador, se a alma perguntar.  A coisa mais importante aqui √© poder testar algo <em>isoladamente</em> .  E sem muita dificuldade. </p><br><p>  O isolamento √© um dos pontos-chave no teste de unidade, e √© por isso que os testes de unidade n√£o gostam.  Eles n√£o gostam disso por v√°rias raz√µes: </p><br><ul><li>  por exemplo, sua "unidade" √© removida do aplicativo e n√£o funciona em sua composi√ß√£o, mesmo quando seus pr√≥prios testes s√£o verdes. </li><li>  ou, por exemplo, porque o isolamento √© um cavalo t√£o esf√©rico no v√°cuo que ningu√©m viu.  Como alcan√ß√°-lo e como mensur√°-lo? </li></ul><br><p>  Pessoalmente, n√£o vejo problemas aqui.  No primeiro par√°grafo, √© <em>claro,</em> voc√™ pode recomendar testes de integra√ß√£o, eles foram inventados para isso - para verificar como os componentes pr√©-testados s√£o montados corretamente.  Voc√™ confia nos pacotes npm que testam, √© claro, apenas eles pr√≥prios e n√£o eles pr√≥prios como parte do seu aplicativo.  Como seus "componentes" diferem dos pacotes "n√£o seus"? </p><br><p>  Com o segundo par√°grafo, tudo √© um pouco mais complicado.  E este artigo ser√° exatamente sobre esse ponto (e tudo o que era antes - uma introdu√ß√£o) - sobre como tornar uma unidade " <em>unit√°ria</em> " <em>test√°vel</em> . </p><br><h3 id="razdelyay-i-vlastvuy">  Dividir e conquistar </h3><br><p>  A id√©ia de separar os componentes do React em "Container" e "Presentation" n√£o √© nova, bem descrita e j√° conseguiu ficar um pouco desatualizada.  Se tomarmos como base (o que 99% dos desenvolvedores fazem) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um artigo de Dan Abramov</a> , o Componente de Apresenta√ß√£o: </p><br><ul><li>  Preocupam-se com a apar√™ncia das coisas </li><li> Podem conter componentes de apresenta√ß√£o e de cont√™iner <code>**</code> internos e geralmente t√™m sua pr√≥pria marca√ß√£o e estilos DOM) </li><li>  Slots de suporte (muitas vezes permitem a conten√ß√£o por this.props.children) </li><li>  Independente do aplicativo (n√£o possui depend√™ncias no restante do aplicativo, como a√ß√µes ou lojas do Flux) </li><li>  N√£o dependa de dados (n√£o especifique como os dados s√£o carregados ou alterados) </li><li>  A interface √© baseada em adere√ßos (Receba dados e retornos de chamada exclusivamente via adere√ßos) </li><li>  Frequentemente sem estado (raramente t√™m seu pr√≥prio estado (quando o fazem, √© o estado da interface do usu√°rio em vez de dados)) </li><li>  Frequentemente SFC (s√£o escritos como componentes funcionais, a menos que precisem de estado, ganchos de ciclo de vida ou otimiza√ß√µes de desempenho) </li></ul><br><p>  Bem, os cont√™ineres s√£o toda a l√≥gica, todo o acesso aos dados e todo o aplicativo em princ√≠pio. </p><br><blockquote>  Em um mundo ideal, os cont√™ineres s√£o o tronco e os componentes da apresenta√ß√£o s√£o as folhas. </blockquote><p>  Existem dois pontos principais na defini√ß√£o de Dan: <em>"Independente de aplicativo"</em> , que √© quase uma defini√ß√£o acad√™mica de "unidade" e * "Pode conter outros componentes de apresenta√ß√£o e recipientes <code>**</code> " *, onde essas estrelas s√£o especialmente interessantes. </p><br><blockquote>  (tradu√ß√£o gratuita) ** Nas vers√µes anteriores do meu artigo, eu (Dan) disse que os componentes de apresenta√ß√£o deveriam conter apenas outros componentes de apresenta√ß√£o.  Acho que n√£o.  O tipo de componente √© os detalhes e pode mudar com o tempo.  Em geral, n√£o compartilhe e tudo ficar√° bem. </blockquote><p>  Vamos lembrar o que acontece depois disso: </p><br><ul><li>  No livro de hist√≥rias, tudo cai, porque algum tipo de cont√™iner, no terceiro bot√£o √† esquerda, rasteja para o lado do qual n√£o h√° nenhum.  Sauda√ß√µes especiais para graphql, react-router e outros react-intl. </li><li>  A capacidade de usar mount nos testes √© perdida, porque renderiza tudo de A a Z e, novamente, em algum lugar nas profundezas da √°rvore de renderiza√ß√£o, algu√©m faz alguma coisa e os testes caem. </li><li>  A capacidade de controlar o estado do aplicativo √© perdida, pois (figurativamente falando) a capacidade de molhar seletores / resolvedores (especialmente com proxyquire) √© perdida e todo o port√£o precisa estar molhado.  E isso √© legal para testes de unidade. </li></ul><br><blockquote>  Se voc√™ acha que os problemas s√£o um pouco exagerados, tente trabalhar em equipe quando esses cont√™ineres, que ser√£o usados ‚Äã‚Äãnos seus n√£o cont√™ineres, mudarem em outros departamentos e, como resultado, voc√™ e eles analisam os testes e n√£o conseguem entender por que ontem tudo funcionou, e agora novamente. </blockquote><p>  Como resultado, voc√™ deve usar o superficial, que <em>por design</em> elimina todos os efeitos colaterais prejudiciais (e inesperados).  Aqui est√° um exemplo simples do artigo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Por que eu sempre uso superficial"</a> </p><br><p>  Imagine que a dica de ferramenta renderize "?". Quando clicado, o pr√≥prio tipo ser√° mostrado. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Tooltip <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-cool-tooltip'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MyComponent = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { &lt;Tooltip&gt; hint: {veryImportantTextYouHaveToTest} &lt;<span class="hljs-regexp"><span class="hljs-regexp">/Tooltip&gt; }</span></span></code> </pre> <br><p>  Como test√°-lo?  Monte + clique + verifique o que √© vis√≠vel.  Este √© um teste de integra√ß√£o, n√£o uma unidade, e a quest√£o √© como clicar em um componente "externo" para voc√™.  N√£o h√° problema com o superficial, pois n√£o h√° <em>c√©rebro</em> e o pr√≥prio "componente alien√≠gena".  Mas existem c√©rebros aqui, j√° que a dica de ferramenta √© um cont√™iner, enquanto o MyComponent √© <em>praticamente uma</em> apresenta√ß√£o. </p><br><pre> <code class="javascript hljs">jest.mock(<span class="hljs-string"><span class="hljs-string">'react-cool-tooltip'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">default</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{children}</span></span></span><span class="hljs-function">) =&gt;</span></span> childlren});</code> </pre> <br><p>  Mas se voc√™ reagir, dica legal, n√£o haver√° problemas com o teste.  O "componente" tornou-se muito mais est√∫pido, muito mais curto, muito mais <em>finito</em> . </p><br><p>  <strong>Componente final</strong> </p><br><ul><li>  um componente com um tamanho conhecido, que pode incluir outros componentes finais anteriormente conhecidos ou que n√£o os contenham. </li><li>  n√£o cont√©m outros cont√™ineres, pois eles cont√™m um estado n√£o controlado e um tamanho "aumentado", ou seja,  tornar o componente atual <em>infinito</em> . </li><li>  caso contr√°rio, √© um componente de apresenta√ß√£o regular.  De fato, exatamente como descrito na <em>primeira</em> vers√£o do artigo de Dan. </li></ul><br><p>  O componente final √© apenas uma engrenagem retirada de um grande mecanismo. </p><br><p>  A quest√£o toda √© como retir√°-lo. </p><br><h3 id="reshenie-1---di">  Solu√ß√£o 1 - DI </h3><br><p>  Meu favorito √© inje√ß√£o de depend√™ncia.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Dan tamb√©m o ama</a> .  Em geral, isso n√£o √© DI, mas "slots".  Em poucas palavras - n√£o √© necess√°rio usar recipientes dentro da apresenta√ß√£o - eles precisam ser <em>injetados</em> l√°.  E nos testes ser√° poss√≠vel injetar outra coisa. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    mount     const PageChrome = ({children, aside}) =&gt; ( &lt;section&gt; &lt;aside&gt;{aside}&lt;/aside&gt; {children} &lt;/section&gt; ); //     shallow,       //     mount ? , ,   wiring? const PageChromeContainer = () =&gt; ( &lt;PageChrome aside={&lt;ASideContainer /&gt;}&gt; &lt;Page /&gt; &lt;/PageChrome&gt; );</span></span></code> </pre> <br><p>  √â exatamente esse o caso quando <em>"os cont√™ineres s√£o o tronco e os componentes da apresenta√ß√£o s√£o folhas"</em> </p><br><h3 id="reshenie-2---granicy">  Solu√ß√£o 2 - Limites </h3><br><p>  O DI geralmente pode ser legal.  Provavelmente agora% username% pensa em como pode ser aplicado na base de c√≥digo atual e a solu√ß√£o n√£o foi inventada ... </p><br><p>  Nesses casos, o <strong>Borders</strong> salvar√° voc√™. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Boundary = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{children}</span></span></span><span class="hljs-function">) =&gt;</span></span> ( process.env.NODE_ENV === <span class="hljs-string"><span class="hljs-string">'test'</span></span> ? <span class="hljs-literal"><span class="hljs-literal">null</span></span> : children <span class="hljs-comment"><span class="hljs-comment">// //  jest.mock ); const PageChrome = () =&gt; ( &lt;section&gt; &lt;aside&gt;&lt;Boundary&gt;&lt;ASideContainer /&gt;&lt;/Boundary&gt;&lt;/aside&gt; &lt;Boundary&gt;&lt;Page /&gt;&lt;/Boundary&gt; &lt;/section&gt; );</span></span></code> </pre> <br><p>  Aqui, em vez de "slots", todos os "pontos de transi√ß√£o" simplesmente se transformam em Fronteira, que renderiza <em>qualquer coisa</em> durante os testes.  <em>Declarativamente</em> , e exatamente o que voc√™ precisa para "tirar o equipamento". </p><br><h3 id="reshenie-3---tier">  Solu√ß√£o 3 - Camada </h3><br><p>  As bordas podem ser um pouco dif√≠ceis, e pode ser mais f√°cil torn√°-las um pouco mais inteligentes adicionando um pouco de conhecimento sobre a Camada. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> checkTier = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tier</span></span></span><span class="hljs-function"> =&gt;</span></span> tier === currentTier; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> withTier = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tier</span></span></span><span class="hljs-function"> =&gt;</span></span> WrapperComponent =&gt; <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> ( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">process.env.NODE_ENV !== </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'test'</span></span></span></span><span class="hljs-function"><span class="hljs-params"> || checkTier(tier</span></span></span><span class="hljs-function">)) &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">WrapperComponent</span></span></span><span class="hljs-function">{...</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">} /&gt; ); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PageChrome</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ASideContainer</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Page</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ASideContainer = withTier(<span class="hljs-string"><span class="hljs-string">'UI'</span></span>)(...) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Page = withTier(<span class="hljs-string"><span class="hljs-string">'Page'</span></span>)(...) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PageChromeContainer = withTier(<span class="hljs-string"><span class="hljs-string">'UI'</span></span>)(PageChrome);</code> </pre> <br><p>  Sob o nome Camada / Camada, pode haver coisas diferentes - recurso, duck, m√≥dulo ou apenas essa camada / camada.  O ponto n√£o √© importante, o principal √© que voc√™ pode puxar a marcha, talvez n√£o uma, mas o n√∫mero final, de <em>alguma forma</em> tra√ßando uma linha entre o que voc√™ precisa e o que n√£o precisa (para testes diferentes, essa √© uma borda diferente). </p><br><p>  E nada impede de marcar esses limites de alguma maneira diferente. </p><br><h3 id="reshenie-4separate-concerns">  Solu√ß√£o 4 - Preocupa√ß√µes separadas </h3><br><p>  Se a solu√ß√£o (por defini√ß√£o) reside na separa√ß√£o de entidades - o que acontecer√° se as tomarmos e separarmos? </p><br><p>  Os "cont√™ineres", dos quais tanto n√£o gostamos, s√£o geralmente chamados de <em>cont√™ineres</em> .  E se n√£o - nada impede agora de come√ßar a nomear componentes de alguma maneira mais sonora.  Ou eles t√™m um determinado padr√£o em seu nome - Connect (WrappedComonent) ou GraphQL / Query. </p><br><p>  E se, em tempo de execu√ß√£o, tra√ßar uma linha entre entidades com base em um nome? </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PageChrome = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ASideContainer</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Page</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); <span class="hljs-comment"><span class="hljs-comment">// remove all components matching react-redux pattern reactRemock.mock(/Connect\(\w\)/) // all any other container reactRemock.mock(/Container/)</span></span></code> </pre> <br><p>  Al√©m de uma linha nos testes, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reag-remock</a> remover√° todos os recipientes que possam interferir nos testes. </p><br><p>  Em princ√≠pio, essa abordagem pode ser usada para testar os pr√≥prios cont√™ineres - voc√™ s√≥ precisa <em>remover</em> tudo, exceto o primeiro. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {createElement, remock} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-remock'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  "" const ContainerCondition = React.createContext(true); reactRemock.mock(/Connect\(\w\)/, (type, props, children) =&gt; ( &lt;ContainerCondition.Consumer&gt; { opened =&gt; ( opened ? ( // ""     &lt;ContainerCondition.Provider value={false}&gt; {createElement(type, props, ...children)} &lt;ContainerCondition.Provider&gt; ) // "" : null )} &lt;/ContainerCondition.Consumer&gt; )</span></span></code> </pre> <br><p>  Mais uma vez - algumas linhas e equipamentos removidos. </p><br><h2 id="itogo">  Total </h2><br><p>  No ano passado, o teste de componentes do React se tornou mais complicado, especialmente para montagem - voc√™ precisa sobrescrever todos os 10 provedores, contextos e est√° ficando cada vez mais dif√≠cil testar o componente certo no estilo certo - h√° muitas cordas para puxar. <br>  Algu√©m cospe e entra no mundo raso.  Algu√©m acenou com as m√£os em testes de unidade e transferiu tudo para Cypress (ande como ande!). </p><br><p>  Outra pessoa cutuca um dedo com a rea√ß√£o, diz que esses s√£o <em>efeitos alg√©bricos</em> e voc√™ pode fazer o que quiser.  Todos os exemplos acima s√£o essencialmente o uso desses <em>efeitos</em> e zombes <em>alg√©bricos</em> .  Para mim e DI estes s√£o moki. </p><br><blockquote>  PS: Este post foi escrito como uma resposta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aos coment√°rios no React / RFC sobre o fato de que a equipe do React quebrou tudo, e todos os pol√≠meros de l√° tamb√©m</a> <br>  PPS: Este post √© na verdade uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tradu√ß√£o muito gratuita de outro</a> <br>  PPPS: em geral, para isolamento real, observe o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">rewiremock</a> </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt434830/">https://habr.com/ru/post/pt434830/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt434818/index.html">Acidente no CenturyLink Data Center causou 911 falhas no servi√ßo</a></li>
<li><a href="../pt434822/index.html">Programa da RPC "Carros com novas fontes de energia". O que esperar em 2019</a></li>
<li><a href="../pt434824/index.html">Engenharia Polit√©cnica. Modelagem de processos s√≥cio-pol√≠ticos por circuitos el√©tricos</a></li>
<li><a href="../pt434826/index.html">O campo da cama na hora certa, ou 5 sinais de problemas ocultos na equipe</a></li>
<li><a href="../pt434828/index.html">Torne-se um profissional. H√°bitos √∫teis dos designers de UX</a></li>
<li><a href="../pt434836/index.html">Anota√ß√£o da vers√£o maravilhosa na JPA</a></li>
<li><a href="../pt434838/index.html">Criando um bot para participar da Russian AI Cup 2018 CodeBall</a></li>
<li><a href="../pt434840/index.html">Como eu fiz o "Seu Di√°rio" - ou a situa√ß√£o no mercado de di√°rios eletr√¥nicos</a></li>
<li><a href="../pt434842/index.html">As fazendas da cidade podem ser extremamente eficazes, mas n√£o agora</a></li>
<li><a href="../pt434844/index.html">Recupera√ß√£o de habilidades cognitivas de 100 pacientes (tradu√ß√£o de um artigo de Dale Bredesen)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>