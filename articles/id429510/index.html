<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíï üï∫ ‚öõÔ∏è ArduPilot untuk pemula. Instal dan konfigurasikan di BeagleBone Blue ü§º ‚ôäÔ∏è üë∑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kami dengan tim ( yang dapat Anda bergabung ) dari orang-orang yang berpikiran sama dari Habr sedang mengembangkan robot untuk mengumpulkan bola golf ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ArduPilot untuk pemula. Instal dan konfigurasikan di BeagleBone Blue</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/robogazon/blog/429510/"> Kami dengan tim ( <b>yang dapat Anda bergabung</b> ) dari orang-orang yang berpikiran sama dari Habr sedang mengembangkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">robot untuk mengumpulkan bola golf di driving range</a> .  Ini adalah robot layanan yang sangat khusus, oleh karena itu, kami berencana untuk secara bersamaan mengembangkan satu perangkat lunak dan perangkat keras yang kompleks, yang nantinya dapat digunakan sebagai dasar untuk robot layanan lain dan <b>UGV</b> . <br><br><img src="https://habrastorage.org/webt/3x/wy/of/3xwyof39bhwkwbvvqoyjqmxdmay.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pada posting terakhir,</a> kami menjelaskan mengapa kami berhenti menggunakan perangkat lunak ini.  Saat menyiapkan proyek kami, kami menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">informasi dari artikel</a> .  Sebenarnya, di sini kami sajikan terjemahan dari panduan singkat ini, mungkin bagi seseorang itu akan berguna dan membantu Anda membuat robot pertama atau berikutnya. <br><a name="habracut"></a><br>  Sebelum saya mulai, saya ingin menekankan bahwa itu layak menggunakan BeagleBone Blue (masih biru).  Sebagai aturan, kami akan memasang beberapa perangkat periferal yang terkait dengan navigasi, dan mereka tidak akan berfungsi dengan benar tanpa daya yang cukup. <br><br><h2>  Bagian 1. Mempersiapkan BeagleBone </h2><br>  Pergi ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://rcn-ee.net/rootfs/bb.org/testing/</a> dan pilih direktori dengan tanggal terbaru.  Kemudian buka subdirektori <b>stretch-console</b> .  Di sini Anda akan melihat beberapa file.  Unduh file yang disebut Sesuatu seperti <b>'bone-debian-VV-console-armhf-20YY-MM-DD-1gb.img.xz'</b> .  Ini adalah distribusi Debian minimal yang hanya berisi yang penting.  Alternatif adalah gambar IoT (IoT = Internet of Things), yang dilengkapi dengan perangkat lunak tambahan dan dapat membuat pekerjaan lebih nyaman jika Anda baru mengenal Linux.  Ini tersedia dari situs yang sama. <br><br>  Kami menggunakan: <a href="">https://rcn-ee.net/rootfs/bb.org/testing/2018-10-07/stretch-console/bone-debian-9.5-console-armhf-2018-10-07-1gb.img .xz</a> . <br><br>  Selanjutnya, Anda perlu mem-flash gambar pada kartu microSD.  Apakah Anda menggunakan Linux atau Windows, saya sangat merekomendasikan sebuah program bernama Etcher untuk tugas ini ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://etcher.io/</a> ). <br><br>  Sekarang Anda dapat mengunduh BeagleBone Blue dari kartu microSD.  Ini di luar ruang lingkup dokumen ini untuk menjelaskan secara terperinci semua metode interaksi, tetapi seringkali ini dicapai dengan menghubungkan melalui kabel mikro-USB atau melalui SSH (ke 'debian@192.168.7.2', kata sandi 'temppwd') atau melalui port COM ( Pengguna debian ', kata sandi' temppwd) ke dalam program seperti minicom atau Putty.  Koneksi ini ke konsol Linux melalui port COM.  UART1 pada BBB build selalu terikat ke konsol, pertama-boot U, dan kemudian Linux.  Informasi lebih lanjut dapat ditemukan di sini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://beagleboard.org/blue</a> <br><br>  Driver BeagleBone datang dengan Windows 10. Di Linux, BBB sebagai port USB COM universal mungkin tidak diambil.  Jika Anda mengalami masalah, coba: <br><br><pre><code class="bash hljs">sudo -s cat &gt;/etc/udev/rules.d/73-beaglebone.rules &lt;&lt;EOF ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span>, SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"usb"</span></span>, ENV{DEVTYPE}==<span class="hljs-string"><span class="hljs-string">"usb_interface"</span></span>, ATTRS{idVendor}==<span class="hljs-string"><span class="hljs-string">"0403"</span></span>, ATTRS{idProduct}==<span class="hljs-string"><span class="hljs-string">"a6d0"</span></span>, DRIVER==<span class="hljs-string"><span class="hljs-string">""</span></span>, RUN+=<span class="hljs-string"><span class="hljs-string">"/sbin/modprobe -b ftdi_sio"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span>, SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"drivers"</span></span>, ENV{DEVPATH}==<span class="hljs-string"><span class="hljs-string">"/bus/usb-serial/drivers/ftdi_sio"</span></span>, ATTR{new_id}=<span class="hljs-string"><span class="hljs-string">"0403 a6d0"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span>, KERNEL==<span class="hljs-string"><span class="hljs-string">"ttyUSB*"</span></span>, ATTRS{interface}==<span class="hljs-string"><span class="hljs-string">"BeagleBone"</span></span>, ATTRS{bInterfaceNumber}==<span class="hljs-string"><span class="hljs-string">"00"</span></span>, SYMLINK+=<span class="hljs-string"><span class="hljs-string">"beaglebone-jtag"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span>, KERNEL==<span class="hljs-string"><span class="hljs-string">"ttyUSB*"</span></span>, ATTRS{interface}==<span class="hljs-string"><span class="hljs-string">"BeagleBone"</span></span>, ATTRS{bInterfaceNumber}==<span class="hljs-string"><span class="hljs-string">"01"</span></span>, SYMLINK+=<span class="hljs-string"><span class="hljs-string">"beaglebone-serial"</span></span> EOF udevadm control --reload-rules <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span></code> </pre> <br>  Semoga Anda sekarang masuk ke baris perintah.  Kami akan mulai dengan mengizinkan pengguna debian untuk mengeksekusi sudo tanpa harus memasukkan kata sandi setiap waktu (berikutnya): <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"debian ALL=(ALL) NOPASSWD: ALL"</span></span> | sudo tee -a /etc/sudoers.d/debian &gt;/dev/null</code> </pre><br>  Pekerjaan selanjutnya adalah memperbarui dan menginstal perangkat lunak menggunakan koneksi internet yang terjangkau, jadi inilah saatnya untuk mengatur koneksi nirkabel untuk akses Wi-Fi.  Saya melakukan ini karena akan memudahkan pekerjaan di masa depan.  Pertama, tulis SSID dan kata sandi WiFi router Anda.  Kemudian masukkan yang berikut ini: <br><br><pre> <code class="bash hljs"> sudo -s connmanctl services | grep <span class="hljs-string"><span class="hljs-string">'&lt;your SSID&gt;'</span></span> | grep -Po <span class="hljs-string"><span class="hljs-string">'wifi_[^ ]+'</span></span></code> </pre><br>  Jawabannya akan terlihat seperti ini: 'wifi_38d279e099a8_4254487562142d4355434b_managed_psk'.  Jika Anda tidak melihat apa pun, coba lagi - Anda mungkin membuat kesalahan ketik. <br><br>  Sekarang, menggunakan ID jaringan ini, kita akan memasukkan file langsung dari keyboard (stdin) menggunakan cat, satu baris sekaligus: <br><br><pre> <code class="bash hljs"> cat &gt;/var/lib/connman/wifi.config [service_&lt;your <span class="hljs-built_in"><span class="hljs-built_in">hash</span></span>&gt;] Type = wifi Security = wpa2 Name = &lt;your SSID&gt; Passphrase = &lt;your WiFi password&gt;</code> </pre><br>  Penting!  Sebelum Ctrl + C, pastikan untuk menekan Enter, jika tidak seluruh baris saat ini akan hilang. <br>  Tekan Ctrl-C untuk keluar, lalu ketik: keluar <br><br>  LED hijau yang terlihat akan menyala, artinya Wi-Fi menyala.  BBBlue terhubung ke router dan alamat IP-nya di jaringan Wi-Fi Anda dapat ditemukan menggunakan: <br><br><pre> <code class="bash hljs">ip addr show wlan0</code> </pre><br>  Jika karena alasan tertentu Anda tidak dapat meminta BBBlue secara langsung, gunakan utilitas lain seperti nmap (sudo nmap 192.168.0.0/24) atau dengan masuk ke router Anda dan cari cara lain untuk menemukan alamat IP-nya. <br><br>  Sekarang coba sambungkan melalui SSH menggunakan alamat IP Wi-Fi-nya.  Ingat bahwa 192.168.7.2 juga akan berfungsi. <br><br>  Jika Anda tidak bisa mendapatkan WiFi untuk bekerja dengan connman, atau Anda hanya tidak ingin menggunakan connman, Anda dapat menggunakan metode berikut.  Pertama, ketik: sudo systemctl disable connman.  Kemudian, dengan kata sandi SSID dan WiFi Anda, edit / etc / network / interfaces <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># The loopback network interface. auto lo iface lo inet loopback # WiFi w/ onboard device (dynamic IP). auto wlan0 iface wlan0 inet dhcp wpa-ssid "&lt;your SSID&gt;" wpa-psk "&lt;your WiFi password&gt;" dns-nameservers 8.8.8.8 1.1.1.1 # Ethernet/RNDIS gadget (g_ether). # Used by: /opt/scripts/boot/autoconfigure_usb0.sh iface usb0 inet static address 192.168.7.2 netmask 255.255.255.252 network 192.168.7.0 gateway 192.168.7.1</span></span></code> </pre><br>  Sekarang ulang BBBlue dengan: <b>sudo reboot</b> <br><br>  Setelah masuk, ketik: sudo ifup wlan0.  LED hijau akan menyala. <br><br>  Jika Anda ingin BB memiliki IP statis (katakanlah 192.168.0.99), ubah "# WiFi dengan perangkat onboard (IP dinamis)." Bagian / etc / network / interfaces untuk membaca: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># WiFi w/ onboard device (static IP). auto wlan0 iface wlan0 inet static wpa-ssid "&lt;your SSID&gt;" wpa-psk "&lt;your WiFi password&gt;" address 192.168.0.99 # &lt;--- The desired static IP address of the BBBlue. netmask 255.255.255.0 gateway 192.168.0.1 # &lt;--- The address of your router. dns-nameservers 8.8.8.8 1.1.1.1</span></span></code> </pre><br>  Memperbarui dan menginstal semua program dukungan yang diperlukan: <br><br><pre> <code class="bash hljs">sudo apt-get -y update sudo apt-get -y dist-upgrade sudo apt-get install -y cpufrequtils git</code> </pre><br>  Perbarui skrip: cd / opt / skrip &amp; &amp; git pull <br><br>  <b>Kernel real-time saat ini mengandung bug!</b>  <b>Gunakan perbaikan berikut: Tentukan kernel real-time Ti 4_4.</b>  <b>Jangan gunakan 4_14.</b> <br><br><pre> <code class="bash hljs">sudo /opt/scripts/tools/update_kernel.sh --ti-rt-channel --lts-4_4 sudo sed -i <span class="hljs-string"><span class="hljs-string">'s|uboot_overlay_pru=/lib/firmware/AM335X-PRU-RPROC-4-14-TI-00A0.dtbo|#uboot_overlay_pru=/lib/firmware/AM335X-PRU-RPROC-4-14-TI-00A0.dtbo|g'</span></span> /boot/uEnv.txt sudo sed -i <span class="hljs-string"><span class="hljs-string">'s|#uboot_overlay_pru=/lib/firmware/AM335X-PRU-RPROC-4-4-TI-00A0.dtbo|uboot_overlay_pru=/lib/firmware/AM335X-PRU-RPROC-4-4-TI-00A0.dtbo|g'</span></span> /boot/uEnv.txt</code> </pre><br>  Terakhir, salin am335x-bone blue.dtb (dari direktori bin di repositori ini) ke /boot/dtbs/4.4.113-ti-rt-r149 <br><br>  Instal skrip di autorun <br><br><pre> <code class="bash hljs">sudo sed -i <span class="hljs-string"><span class="hljs-string">'s/#dtb=/dtb=am335x-boneblue.dtb/g'</span></span> /boot/uEnv.txt</code> </pre><br>  Tetapkan frekuensi <br><br><pre> <code class="bash hljs">sudo sed -i <span class="hljs-string"><span class="hljs-string">'s/GOVERNOR="ondemand"/GOVERNOR="performance"/g'</span></span> /etc/init.d/cpufrequtils</code> </pre><br>  Konfigurasi bb-wl18xx-wlan0.service <br><br><pre> <code class="bash hljs">sudo sed -i <span class="hljs-string"><span class="hljs-string">'s/RestartSec=5/RestartSec=1/g'</span></span> /lib/systemd/system/bb-wl18xx-wlan0.service</code> </pre><br>  Konfigurasi bb-wl18xx-wlan0.service <br><br><pre> <code class="bash hljs">sudo sed -i <span class="hljs-string"><span class="hljs-string">'s/RestartSec=5/RestartSec=1/g'</span></span> /lib/systemd/system/bb-wl18xx-wlan0.service</code> </pre><br>  Nonaktifkan Bluetooth (opsional) <br><br><pre> <code class="bash hljs">sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">disable</span></span> bb-wl18xx-bluetooth.service</code> </pre><br>  Perluas partisi kartu microSD yang ada (/ dev / mmcblk0p1): <br><br><pre> <code class="bash hljs">sudo /opt/scripts/tools/grow_partition.sh</code> </pre><br>  Mulai ulang sekarang: <br><br><pre> <code class="bash hljs">sudo reboot</code> </pre><br><h2>  Bagian 2. Instal ArduPilot pada BeagleBone </h2><br>  Ketika BeagleBone reboot, kita perlu membuat beberapa file teks.  Pertama, meningkatkan file konfigurasi lingkungan, / etc / default / ardupilot: <br>  <i>(Petunjuk: masukkan sudoedit / etc / default / ardupilot dan masukkan alamat IP target Anda sendiri, mis. 192.168.0.13)</i> <br><br><pre> <code class="bash hljs">TELEM1=<span class="hljs-string"><span class="hljs-string">"-C /dev/ttyO1"</span></span> TELEM2=<span class="hljs-string"><span class="hljs-string">"-A udp:&lt;target IP address&gt;:14550"</span></span> GPS=<span class="hljs-string"><span class="hljs-string">"-B /dev/ttyS2"</span></span></code> </pre><br>  Ini adalah konfigurasi yang cukup tipikal. <br><br>  Ini adalah parameter peluncuran -C memetakan port serial ‚ÄúTelem1‚Äù ArduPilot (SERIAL1, default 57600) untuk UART1 di BBBlue.  Sebagai contoh, saya memiliki radio RFDesign 868x yang terhubung ke UART1.  Ini adalah saluran data dua arah dengan drone saya.  Ini mengirim berbagai data telemetri ke stasiun pangkalan dan menerima perintah RTK dan koreksi diferensial dari stasiun pangkalan. <br><br>  Ini adalah parameter peluncuran -A memetakan port serial ‚ÄúKonsol‚Äù ArduPilot (SERIAL0, default 115200) dengan protokol, alamat IP tujuan, dan nomor port opsional.  Misalnya, ini memungkinkan saya untuk menerima data MAVLink yang datang melalui Wi-Fi untuk tujuan pengujian.  Sangat berguna, terutama karena data dapat langsung masuk ke Mission Planner dan QGroundControl. <br><br><img src="https://habrastorage.org/webt/3d/d7/m1/3dd7m1ilxlbkd3elqxnddq_1rcm.jpeg" alt="gambar"><br><br>  Ini adalah parameter peluncuran -B memetakan port serial ‚ÄúGPS‚Äù ArduPilot (SERIAL3, default 57600) dengan Uart2 BBBlue (UART, samar-samar ditandai 'GPS' di papan itu sendiri).  Sebagai contoh, saya memiliki NEO-M8P U-blox yang terhubung ke UART2. <br><br>  Ada kemungkinan lain - ada opsi peluncuran lainnya, dengan kecepatan port yang telah ditentukan sebelumnya dan porta itu sendiri: <br><br><pre> <code class="bash hljs">Switch -A --&gt; <span class="hljs-string"><span class="hljs-string">"Console"</span></span>, SERIAL0, default 115200 Switch -B --&gt; <span class="hljs-string"><span class="hljs-string">"GPS"</span></span>, SERIAL3, default 57600 Switch -C --&gt; <span class="hljs-string"><span class="hljs-string">"Telem1"</span></span>, SERIAL1, default 57600 Switch -D --&gt; <span class="hljs-string"><span class="hljs-string">"Telem2"</span></span>, SERIAL2, default 38400 Switch -E --&gt; Unnamed, SERIAL4, default 38400 Switch -F --&gt; Unnamed, SERIAL5, default 57600</code> </pre><br>  Lihat dokumentasi ArduPilot resmi untuk informasi lebih lanjut tentang berbagai port serial: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://ardupilot.org/plane/docs/parameters.html?highlight=parameters</a> <br><br>  Selanjutnya, kita akan membuat file layanan ArduPilot systemd, satu untuk ArduCopter, /lib/systemd/system/arducopter.service: <br><br><pre> <code class="bash hljs">[Unit] Description=ArduCopter Service After=networking.service StartLimitIntervalSec=0 Conflicts=arduplane.service ardurover.service antennatracker.service [Service] EnvironmentFile=/etc/default/ardupilot ExecStartPre=/usr/bin/ardupilot/aphw ExecStart=/usr/bin/ardupilot/arducopter <span class="hljs-variable"><span class="hljs-variable">$TELEM1</span></span> <span class="hljs-variable"><span class="hljs-variable">$TELEM2</span></span> <span class="hljs-variable"><span class="hljs-variable">$GPS</span></span> Restart=on-failure RestartSec=1 [Install] WantedBy=multi-user.target</code> </pre><br>  Satu untuk ArduPlane, /lib/systemd/system/arduplane.service: <br><br><pre> <code class="bash hljs">[Unit] Description=ArduPlane Service After=networking.service StartLimitIntervalSec=0 Conflicts=arducopter.service ardurover.service antennatracker.service [Service] EnvironmentFile=/etc/default/ardupilot ExecStartPre=/usr/bin/ardupilot/aphw ExecStart=/usr/bin/ardupilot/arduplane <span class="hljs-variable"><span class="hljs-variable">$TELEM1</span></span> <span class="hljs-variable"><span class="hljs-variable">$TELEM2</span></span> <span class="hljs-variable"><span class="hljs-variable">$GPS</span></span> Restart=on-failure RestartSec=1 [Install] WantedBy=multi-user.target</code> </pre><br>  Satu untuk ArduRover, /lib/systemd/system/ardurover.service: <br><br><pre> <code class="bash hljs">[Unit] Description=ArduRover Service After=networking.service StartLimitIntervalSec=0 Conflicts=arducopter.service arduplane.service antennatracker.service [Service] EnvironmentFile=/etc/default/ardupilot ExecStartPre=/usr/bin/ardupilot/aphw ExecStart=/usr/bin/ardupilot/ardurover <span class="hljs-variable"><span class="hljs-variable">$TELEM1</span></span> <span class="hljs-variable"><span class="hljs-variable">$TELEM2</span></span> <span class="hljs-variable"><span class="hljs-variable">$GPS</span></span> Restart=on-failure RestartSec=1 [Install] WantedBy=multi-user.target</code> </pre><br>  Bagaimana dengan AntennaTracker juga?  Buat /lib/systemd/system/antennatracker.service: <br><br><pre> <code class="bash hljs">[Unit] Description=AntennaTracker Service After=networking.service StartLimitIntervalSec=0 Conflicts=arducopter.service arduplane.service ardurover.service [Service] EnvironmentFile=/etc/default/ardupilot ExecStartPre=/usr/bin/ardupilot/aphw ExecStart=/usr/bin/ardupilot/antennatracker <span class="hljs-variable"><span class="hljs-variable">$TELEM1</span></span> <span class="hljs-variable"><span class="hljs-variable">$TELEM2</span></span> <span class="hljs-variable"><span class="hljs-variable">$GPS</span></span> Restart=on-failure RestartSec=1 [Install] WantedBy=multi-user.target</code> </pre><br>  Ayo buka folder sudo mkdir -p / usr / bin / ardupilot <br><br>  Buat file konfigurasi besi untuk ArduPilot, / usr / bin / ardupilot / aphw yang berjalan sebelum file yang dapat dieksekusi. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash # aphw # ArduPilot hardware configuration. /bin/echo 80 &gt;/sys/class/gpio/export /bin/echo out &gt;/sys/class/gpio/gpio80/direction /bin/echo 1 &gt;/sys/class/gpio/gpio80/value /bin/echo pruecapin_pu &gt;/sys/devices/platform/ocp/ocp:P8_15_pinmux/state</span></span></code> </pre><br>  Baris 5-7 mencakup daya servo BBBlue + 5V, mis. Saat Anda menggunakan servos.  Tidak diperlukan untuk ESC. <br><br>  Jalur 8 termasuk PRU. <br><br>  Gunakan sudo chmod 0755 / usr / bin / ardupilot / aphw untuk mengatur izin untuk file ini. <br><br>  Hampir terjadi!  Sekarang Anda harus mendapatkan file-file executable ArduCopter, ArduPlane, dll. Terbaru yang dibuat khusus untuk arsitektur Arm BBBlue, dan menempatkannya di direktori / usr / bin / ardupilot.  Mirko Denecke mengunggahnya di situs webnya di sini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://bbbmini.org/download/blue/</a> <br><br>  Salin ke repositori ini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/imfatant/test/blob/master/bin/</a> <br><br>  Jangan lupa atur haknya: sudo chmod 0755 / usr / bin / ardupilot / a * <br><br>  Jika Anda perlu mengkompilasi dari sumber, jangan takut - itu tidak terlalu sulit.  Selain itu, ini berarti Anda dapat membuat perangkat lunak ArduPilot Anda sendiri. <br><br>  Mengumpulkan mereka di BBBlue sendiri akan memakan waktu terlalu banyak.  Patrick Poirier menjelaskan proses untuk BBBMINI (berdasarkan BeagleBone hitam) di situs webnya.  Ini adalah prosedur khusus BBBlue, dengan asumsi bahwa Anda telah menyelesaikan semua langkah sejauh ini dan berada di direktori / home / debian: <br><br><pre> <code class="bash hljs">sudo apt-get install g++ make pkg-config python python-dev python-lxml python-pip sudo pip install future git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/ArduPilot/ardupilot <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ardupilot git checkout Copter-3.6 <span class="hljs-comment"><span class="hljs-comment"># &lt;-- For ArduCopter. git submodule update --init --recursive ./waf configure --board=blue # &lt;-- BeagleBone Blue. ./waf sudo cp ./build/blue/bin/a* /usr/bin/ardupilot</span></span></code> </pre><br>  Patrick juga memberikan instruksi untuk mengkompilasi silang mereka pada PC desktop x64 yang relatif kuat di Ubuntu, yang jauh lebih cepat. <br><br>  Tergantung pada opsi perangkat lunak mana yang Anda butuhkan <br>  sudo systemctl mengaktifkan arducopter.service <br>  atau <br>  sudo systemctl mengaktifkan arduplane.service <br>  atau <br>  sudo systemctl mengaktifkan ardurover.service <br>  atau <br>  sudo systemctl mengaktifkan antennatracker.service <br><br>  Setelah reboot, ArduPilot Anda akan mulai secara otomatis.  Anda akan melihat LED merah berkedip! <br><br>  Anda dapat memeriksa systemctl ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.freedesktop.org/software/systemd/man/systemctl.html</a> ).  Beberapa perintah contoh yang berguna: <br><br><pre> <code class="bash hljs">sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">disable</span></span> ... sudo systemctl start ... sudo systemctl stop ...</code> </pre><br><h3>  Bagian 3. Menghubungkan periferal </h3><br><img src="https://habrastorage.org/webt/fx/xo/ae/fxxoaey0otck_4ti6yl0p1dzbgu.jpeg" alt="gambar"><br><br>  Konfigurasi minimum dasar kemungkinan termasuk: <br><br><ul><li>  Penerima R / C. </li><li>  Penerima GPS (dengan atau tanpa kompas terintegrasi). </li><li>  Modem radio untuk saluran data dua arah, terutama jarak jauh. </li><li>  (BBBlue WiFi bawaan sangat bagus untuk debugging dan pengujian dalam jarak dekat jika 2,4 GHz tersedia, tetapi untuk sesuatu yang lebih menarik, direkomendasikan saluran data dua arah khusus. Juga perhatikan jenis dan penempatan antena yang menggunakan semua elemen ini. ) </li></ul><br>  Beberapa kata tentang konektor, kabel, dan alat yang Anda butuhkan.  Saya akan memberikan beberapa rekomendasi, jika tidak, jika Anda seorang pemula, Anda dapat menghabiskan banyak waktu, tenaga dan uang.  Jenis konektor yang paling umum digunakan adalah JST-SH 1.0 mm.  Anda harus membeli beberapa konektor wanita dalam ukuran posisi 4 dan 6 dan kontak crimp.  Kemudian dapatkan beberapa meter kabel dengan warna berbeda. <br><br>  Jadi, kembali ke menghubungkan periferal: <br><br><img src="https://habrastorage.org/webt/h4/mq/7k/h4mq7kn51qxgbc4orkk4ghmluoo.jpeg"><br><br>  Penerima R / C: dapat dimatikan pada kontak + 5V dan GND.  Yang tersisa adalah menghubungkan output SBUS penerima, output DSM, atau output PPM ke salah satu dari dua pin SBUS yang ditandai dalam diagram.  Penerima berikut telah diuji dan berfungsi: <br><br>  FrSky ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.frsky-rc.com/</a> ): R-XSR, XR4SB, X6R, X8R, R9 Slim dan R9 Mini (baik firmware EU LBT 868 MHz dan Universal 915 MHz). <br><br>  Spektrum ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://www.spektrumrc.com/</a> ): AR7700 DSMX dengan PPM / SRXL / Remote Rx. <br><br>  TBS ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://team-blacksheep.com/</a> ): Crossfire 'Penuh' dengan Nano Rx (Rx diatur ke mode SBUS). <br><br>  Ngomong-ngomong, mereka banyak berbicara tentang "SBUS terbalik".  Sebenarnya SBUS hanyalah sebuah protokol transfer data serial yang diciptakan Futaba dan yang disalin FrSky.  Terbalik dibandingkan dengan UART "standar".  Untungnya, Ardupilot Blue mengharapkan sinyal SBUS terbalik ini, sehingga tidak perlu inverter sinyal. <br><br>  Penerima GPS: Kebanyakan orang menggunakan penerima u-blox, terutama NEO-M8N dan NEO-M8P.  NEO-M8N murah dan terjangkau dari perusahaan Cina seperti HobbyKing, biasanya dalam bentuk disk.  Nyaman, mereka mengandung penerima itu sendiri, antena patch keramik yang sangat kecil, dan sering termasuk kompas.  Meskipun BBBlue sudah memiliki kompas bawaan (AKM AK8963), ArduPilot dapat dikonfigurasi untuk menggunakan kompas "eksternal" ini, bukan kompasnya sendiri, untuk menghindari gangguan. <br><br>  Alternatif (yang jauh lebih mahal) dari NEO-M8N adalah NEO-M8P.  Penerima ini mendukung mode operasi yang dikenal sebagai "RTK", atau kinematik secara real time, yang dapat mencapai akurasi posisi beberapa sentimeter secara real time.  Namun, presentasi semacam ini harganya 10 kali lebih mahal daripada NEO-M8N, dan ini tanpa stasiun induk.  Nanti di manual saya akan mencurahkan bagian khusus untuk M8P. <br><br>  File konfigurasi ArduPilot I2C: /var/APM/{ArduCopter.stg,ArduPlane.stg,APMrover2.stg,AntennaTracker.stg} <br><br><pre> <code class="bash hljs">sudo apt-get install i2c-tools sudo i2cdetect -r -y 0 sudo i2cdetect -r -y 1 sudo i2cdetect -r -y 2</code> </pre><br><pre> <code class="bash hljs">$ sudo i2cdetect -r -y 2 0 1 2 3 4 5 6 7 8 9 abcdef 00: -- -- -- -- -- -- -- -- -- 0c -- -- -- 10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 60: -- -- -- -- -- -- -- -- 68 -- -- -- -- -- -- -- 70: -- -- -- -- -- -- 76 --</code> </pre><br>  68 = InvenSense MPU-9250 IMU (onboard), 0c = AKM kompas AK8963 (onboard), 76 = Bosch BMP280 barometer (onboard). <br><br><pre> <code class="bash hljs">$ sudo i2cdetect -r -y 1 0 1 2 3 4 5 6 7 8 9 abcdef 00: -- -- -- -- -- -- -- -- -- -- -- -- -- 10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- 1e -- 20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 70: -- -- -- -- -- -- -- --</code> </pre><br>  1e = Honeywell HMC5843 kompas (eksternal) - sering diintegrasikan ke dalam modul GPS berbasis NEO-M8N u-blox. <br><br><h2>  Memulai dengan Perangkat Lunak Ground Control Station (GCS) </h2><br>  Unduh perencana misi apa pun (http://firmware.ardupilot.org/Tools/MissionPlanner/MissionPlanner-latest.msi) untuk Windows atau QGroundControl (http://qgroundcontrol.com/) untuk Linux dan Windows.  Kedua program ini akan terhubung ke aliran data MAVLink yang masuk melalui jaringan (misalnya, melalui port UDP 14550) atau melalui port COM. <br><br><h2>  Opsional </h2><br>  Melengkapi bbblue berbasis drone dengan speaker Bluetooth bisa menyenangkan, asalkan transmisi RF Bluetooth tidak mengganggu sistem lain.  Ada banyak informasi tentang BlueZ / PulseAudio / ALSA, tetapi, untungnya, itu datang ke sesuatu yang sangat sederhana. <br><br>  a) pertama instal perangkat lunak yang diperlukan (menggunakan konsol atau gambar IoT): <br><br><pre> <code class="bash hljs"> sudo apt-get install -y bluetooth pulseaudio pulseaudio-module-bluetooth alsa-utils</code> </pre><br>  b) Aktifkan Bluetooth (jika dinonaktifkan): sudo systemctl mengaktifkan bb-wl18xx-bluetooth.service <br><br>  c) Edit /etc/pulse/default.pa: <br><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment">### Automatically suspend sinks/sources that become idle for too long # load-module module-suspend-on-idle</span></span></code> </pre><br>  d) Reboot: sudo reboot <br><br>  e) Setelah memuat BBBlue, hidupkan kolom Bluetooth dalam mode koneksi: <br><br><pre> <code class="bash hljs"> bluetoothctl scan on agent on default-agent pair &lt;Bluetooth speaker<span class="hljs-string"><span class="hljs-string">'s MAC address&gt; # &lt;--- eg AB:58:EC:5C:0C:03 connect &lt;Bluetooth speaker'</span></span>s MAC address&gt; <span class="hljs-comment"><span class="hljs-comment"># &lt;--- Sometimes unnecessary. trust &lt;Bluetooth speaker's MAC address&gt; scan off exit</span></span></code> </pre><br>  f) Akhirnya: <br><br><pre> <code class="bash hljs"> pulseaudio --start <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"connect &lt;Bluetooth speaker's MAC address&gt;"</span></span> | bluetoothctl pactl list <span class="hljs-comment"><span class="hljs-comment"># &lt;--- Use this to check that your Bluetooth speaker has been picked up by PulseAudio. pacmd set-card-profile 0 a2dp_sink aplay /usr/share/sounds/alsa/Front_Center.wav</span></span></code> </pre><br>  Itu saja!  Omong-omong, jika Anda akan menggunakan synthesizer ucapan, saya sarankan Festival. <br><br>  Jika Anda ingin membantu - silakan menulis kepada saya di LAN atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">VK</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">FB</a> . <br><br><img src="https://habrastorage.org/webt/mt/lh/91/mtlh91x8jag1t-ibt_np3uayuke.jpeg" alt="gambar">  <a href="">habrastorage.org/webt/mt/lh/91/mtlh91x8jag1t-ibt_np3uayuke.jpeg</a> <br><br>  Terima kasih telah membaca, bertanya dan mengkritik kami sepenuhnya. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id429510/">https://habr.com/ru/post/id429510/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id429500/index.html">"Waktunya berbisnis" akhirnya terbang</a></li>
<li><a href="../id429502/index.html">Apakah layak untuk mengembangkan lintas kompetensi</a></li>
<li><a href="../id429504/index.html">Cara memanggil metode vk audio</a></li>
<li><a href="../id429506/index.html">Kami mencari di bawah kap Gmail baru</a></li>
<li><a href="../id429508/index.html">Ringkasan laporan ‚ÄúBagaimana menjadi spesialis keren dalam basis data‚Äù (HL2018, Data Egret, Ilya Kosmodemyansky)</a></li>
<li><a href="../id429512/index.html">Acara digital di Moskow dari 12 hingga 18 November</a></li>
<li><a href="../id429514/index.html">Microsoft memberi tahu cara mengatasi masalah keamanan data pada SSD dengan enkripsi perangkat keras yang bocor</a></li>
<li><a href="../id429522/index.html">Merancang robot layanan. Pernyataan masalah, arsitektur solusi</a></li>
<li><a href="../id429524/index.html">API JSON atau JSON RPC yang benar</a></li>
<li><a href="../id429528/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 338 (5 - 11 November, 2018)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>