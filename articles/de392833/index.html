<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻 🏂🏼 💒 Arduino oder AVR Wireless Programming Adapter mit ESP8266 Loader 🧖 👨🏾‍⚖️ 💇🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ein kurzer Hinweis zu einem hausgemachten Adapter auf Basis von ESP8266, mit dem Sie Firmware auf einen Mikrocontroller herunterladen können, auf dem ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arduino oder AVR Wireless Programming Adapter mit ESP8266 Loader</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/392833/"><img align="left" src="https://habrastorage.org/files/53f/693/97a/53f69397accb4fb2abd26521d594ca7c.jpg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein kurzer Hinweis zu einem hausgemachten Adapter auf Basis von ESP8266, mit dem Sie Firmware auf einen Mikrocontroller herunterladen können, auf dem ein UART-Bootloader oder Arduino installiert ist. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kürzlich habe ich beim Entwerfen von Geräten auf AVR-Mikrocontrollern zum Programmieren nur einen 6-poligen Anschluss (nicht ISP) für den FTDI-Adapter ausgegeben. Sie können die Firmware herunterladen und UART nach der Firmware debuggen. Genau das hat Arduino getan, die Idee wurde von dort entlehnt. Das ist bequem.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Zwischenzeit musste ich mich mehr als einmal mit einer Situation auseinandersetzen, in der Sie die Firmware auf den Mikrocontroller herunterladen müssen, aber es ist bereits der Fall, dass sie nicht in den Arbeitsplatz passt / im Zwischengeschoss liegt / in einer anderen Stadt / in die Wand eingemauert. </font><font style="vertical-align: inherit;">In solchen Fällen ist der FTDI-Adapter wegen des kurzen USB-Kabels nicht anwendbar und musste mit einem Laptop ausweichen. </font><font style="vertical-align: inherit;">Denken Sie an einen drahtlosen Programmierer. </font><font style="vertical-align: inherit;">Hier passt der ESP8266 am besten, da er über UART und in jeder Version über mindestens einen GPIO verfügt, der zum Neustart des Controllers und zum Aufrufen des Programmiermodus geeignet ist.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das folgende Material wurde im Netzwerk zum Thema gefunden:</font></font><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmieren eines Arduino über WLAN mit dem ESP8266</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ein Modul vom Typ ESP-01 wird über die Verkabelung mit dem Arduino Pro Mini verbunden. Anschließend wird die Firmware über ein Python-Skript heruntergeladen</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programando un Arduino remotamente con el módulo ESP8266</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - hier, so wie ich es verstehe, ohne auf Details </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">einzugehen</font></a><font style="vertical-align: inherit;"> , ist einer der GPIO Arduino mit RESET verbunden. </font><font style="vertical-align: inherit;">Zuerst wird der Mikrocontroller angewiesen, sich selbst neu zu starten, und dann beginnt der Firmware-Download</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP8266-transparent-bridge</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Firmware für ESP8266, die transparentes WLAN aus dem Modul herstellt - UART-Bridge mit Unterstützung für AT-Befehle zur Steuerung von GPIO2. </font><font style="vertical-align: inherit;">Der Autor schlägt vor, die Reset-Taste auf dem Arduino zu drücken und dann avrdude mit den Optionen -c avrisp und -P net: xxxx: 23 auszuführen. Auf diese Weise können Sie jedoch AT automatisieren. </font><font style="vertical-align: inherit;">Es war diese Firmware, die ich als Grundlage genommen habe</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Adapterfunktionen sind wie folgt:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sechspoliger Stecker mit Pinbelegung wie FTDI-Adapter</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versteckter Text</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/getpro/geektimes/post_images/a6b/e2f/4a5/a6be2f4a568938125da6ed813cbb45a9.jpg" alt="image"><br>
</div></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeiten Sie in Schaltkreisen mit einer Mikrocontroller-Versorgungsspannung von 3,3 V oder 5 V, die über Steckbrücken ausgewählt werden können</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stabiler Betrieb bei Geschwindigkeiten bis einschließlich 57600</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neustart des Mikrocontrollers mit AT-Befehlen zum Aufrufen des Programmiermodus</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Leistung wurde auf einem chinesischen Arduino Pro Mini mit einem Standard-Bootloader und auf einem ATmega8 mit installiertem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optiboot</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und Geschwindigkeiten von 9600, 19200 und 57600 getestet. Bei einer Standardgeschwindigkeit (115200) weigerte sich der Controller zu blinken.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Für diejenigen, die nicht löten und eine Gebühr erheben möchten</font></font></h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei Anwendung in 3,3-V-Stromkreisen reicht es aus, das esp-01-Modul einfach an die Arduino-Verkabelung anzuschließen (VCC -&gt; VCC, GND ---&gt; GND, RX ---&gt; TX, TX ---&gt; RX, GPIO2 ---&gt; DTR). </font><font style="vertical-align: inherit;">Die Platine ist für eine einfache Verbindung und die Fähigkeit ausgelegt, in Schaltkreisen mit einer Spannung von 5 V Mikrocontroller zu arbeiten.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schaltplan und Leiterplatte</font></font></h5><img src="https://habrastorage.org/files/b84/275/9fe/b842759fead74aef9184ab4bb19f8dd7.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es werden Module vom Typ esp-02 verwendet, aber das übliche esp-01 ist auch geeignet, nur die Karte muss leicht umgeleitet werden. </font><font style="vertical-align: inherit;">Jumper wählen den Betriebsmodus 3.3 / 5V. </font><font style="vertical-align: inherit;">Der U1 - Stabilisator wandelt bei Bedarf 5 V in 3,3 V um. </font><font style="vertical-align: inherit;">R2 und R3 ist ein Teiler, auch für den 5V-Modus. </font><font style="vertical-align: inherit;">Nach der Montage müssen Sie den RPOG-Jumper installieren und denselben FTDI oder einen anderen UART-Adapter verwenden, um die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP8266-transparente Brücke</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu laden </font><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einseitige Leiterplattenvorlage (SVG-Vektor): </font></font><br>
<img src="http://r3z.no-ip.info/public/esp-ftdi-F_Cu.svg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie ein Negativ benötigen, öffnen Sie es einfach mit einem Texteditor und ersetzen Sie # 000000 durch #FFFFFF und umgekehrt. </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KiCad-Format auf Github</font></font></a><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikrocontroller-Firmware</font></font></h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um die Firmware herunterzuladen, müssen Sie normalerweise den Mikrocontroller neu starten. </font><font style="vertical-align: inherit;">Der FTDI-Adapter macht dies zu einem Impuls am Bein des DTR (dem ersten im Anschluss), er wird über die Kapazität mit dem Fuß des RESET-Mikrocontrollers verbunden. </font><font style="vertical-align: inherit;">In unserem Fall wird GPIO2 anstelle des DTR angezeigt (siehe UPD). </font><font style="vertical-align: inherit;">Um den Mikrocontroller neu zu starten, werden die AT-Befehle "+++ AT GPIO2 1" und dann "+++ AT GPIO2 0" verwendet, die den Pegel auf GPIO2 ESP8266 ändern. </font><font style="vertical-align: inherit;">Ein Tropfen reicht aus, um den Controller neu zu starten. </font><font style="vertical-align: inherit;">Unmittelbar nach dem Neustart arbeitet der Bootloader einige Zeit und wartet über UART auf das Firmware-Image. Es kann mit dem Dienstprogramm avrdude übertragen werden. </font><font style="vertical-align: inherit;">Das folgende Skript blinkt auf dem Controller:</font></font><br>
<pre><code class="bash hljs"><span class="hljs-meta"><span class="hljs-meta">#!/bin/bash
</span></span>
HEXILE=<span class="hljs-string"><span class="hljs-string">"firmware.hex"</span></span><font></font>
ADDRESS=x.x.x.x<font></font>
BAUD=57600<font></font>
<font></font>
<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"+++AT BAUD </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$BAUD</span></span></span><span class="hljs-string">"</span></span> | nc $(ADDRESS) 23
<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"+++AT GPIO2 1"</span></span> | nc $(ADDRESS) 23
<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"+++AT GPIO2 0"</span></span> | nc $(ADDRESS) 23<font></font>
avrdude -P net:$(ADDRESS):23 -F -U flash:w:$(HEXILE):i<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Befehle können in das Makefile aufgenommen werden. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die drahtlose Firmware kann auch in Windows aktiviert werden, indem die Dienstprogramme nc und avrdude installiert werden.</font></font><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Video, das die Arbeit am Beispiel des chinesischen Arduino pro mini zeigt</font></font></h5><br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://www.youtube.com/embed/Yf4UusDG0qY%3Ffeature%3Doembed&amp;usg=ALkJrhhGDms2Rawsv-s4wPQLGletUvDaww" frameborder="0" allowfullscreen=""></iframe><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>

<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sav13</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> schlug vor, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esp-link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> als Firmware für ESP8266 zu verwenden </font><font style="vertical-align: inherit;">. Es ist mit der Stromadapterschaltung kompatibel. </font><font style="vertical-align: inherit;">Diese Firmware hat gegenüber der ESP8266-transparenten Brücke mehrere Vorteile, einschließlich </font><font style="vertical-align: inherit;">WEB-Schnittstelle für die Konfiguration, es ist nicht erforderlich, AT-Befehle zu verwenden, zusätzliche Funktionen, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> detaillierter </font><font style="vertical-align: inherit;">.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de392833/">https://habr.com/ru/post/de392833/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar486158/index.html">تصور الترجمة الآلية العصبية (نماذج seq2seq مع آلية الاهتمام)</a></li>
<li><a href="../ar486164/index.html">فيروس كورونا 2019-nCoV. أسئلة وأجوبة عن حماية الجهاز التنفسي والتطهير</a></li>
<li><a href="../ar486174/index.html">لدي صفر دوران</a></li>
<li><a href="../de392829/index.html">PO2RT: Coworking in Höhen</a></li>
<li><a href="../de392831/index.html">Mobile Wetterstation auf Arduino</a></li>
<li><a href="../de392837/index.html">Position im Servoantrieb beibehalten: untergeordnete Steuerung gegen Schrittmodus</a></li>
<li><a href="../de392839/index.html">Universelles Steuerungsmodul für das Internet der Dinge</a></li>
<li><a href="../de392841/index.html">Проекторы Epson и мобильные презентации — советы по выбору проектора</a></li>
<li><a href="../de392843/index.html">Welche Entfernung muss ein autonomes Auto zurücklegen, um seine Zuverlässigkeit zu beweisen?</a></li>
<li><a href="../de392845/index.html">SpaceX hat Fotos des erfolgreichsten Starts des Raumfahrzeugs Falcon 9 in seiner Geschichte hochgeladen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>