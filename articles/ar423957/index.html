<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ โ๏ธ โ ุชูููุฏ ุญุฑูุฉ ูุฑูุฑ ุงููุถุงุก ุงููุณุชุฎุฏู ๐ฝ ๐พ ๐ท</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชูููุฏ ุญุฑูุฉ ุงููุฑูุฑ ุจุงุณุชุฎุฏุงู MoonGen + DPDK + Lua ูู ุนุฑุถ ุงูููุงู 

 ูุชุทูุจ ุชุญููุฏ ูุฌูุงุช DDoS ูู ุธุฑูู ุญููููุฉ ุงุฎุชุจุงุฑูุง ุฃููููุง ูุงุฎุชุจุงุฑูุง ูุชูููุงุช ูุฎุชููุฉ. ูุฌุจ ุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชูููุฏ ุญุฑูุฉ ูุฑูุฑ ุงููุถุงุก ุงููุณุชุฎุฏู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/qrator/blog/423957/" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/d4/ab/qb/d4abqbslioh-eskinpe4jhet0y4.jpeg"></div><br>  <i>ุชูููุฏ ุญุฑูุฉ ุงููุฑูุฑ ุจุงุณุชุฎุฏุงู MoonGen + DPDK + Lua ูู ุนุฑุถ ุงูููุงู</i> <br><br>  ูุชุทูุจ ุชุญููุฏ ูุฌูุงุช DDoS ูู ุธุฑูู ุญููููุฉ ุงุฎุชุจุงุฑูุง ุฃููููุง ูุงุฎุชุจุงุฑูุง ูุชูููุงุช ูุฎุชููุฉ.  ูุฌุจ ุงุฎุชุจุงุฑ ูุนุฏุงุช ูุจุฑุงูุฌ ุงูุดุจูุฉ ูู ุธุฑูู ุงุตุทูุงุนูุฉ ูุฑูุจุฉ ูู ุงูุธุฑูู ุงูุญููููุฉ - ูุน ุชุฏููุงุช ุญุฑูุฉ ุงููุฑูุฑ ุงูููุซูุฉ ุงูุชู ุชุญุงูู ุงููุฌูุงุช.  ุจุฏูู ูุซู ูุฐู ุงูุชุฌุงุฑุจ ุ ูู ุงูุตุนุจ ููุบุงูุฉ ุงูุญุตูู ุนูู ูุนูููุงุช ููุซููุฉ ุญูู ุงูููุฒุงุช ูุงููููุฏ ุงููุญุฏุฏุฉ ูุฃู ุฃุฏุงุฉ ูุนูุฏุฉ. <br><br>  ูู ูุฐู ุงูููุงูุฉ ุ ุณููุดู ุนู ุจุนุถ ุทุฑู ุชูููุฏ ุญุฑูุฉ ุงููุฑูุฑ ุงููุณุชุฎุฏูุฉ ูู ูุฎุชุจุฑุงุช Qrator. <br><br>  <b>ุชุญุฐูุฑ</b> <br><br>  ููุตู ุจุดุฏุฉ ุฃูุง ูุญุงูู ุงููุงุฑุฆ ุงุณุชุฎุฏุงู ุงูุฃุฏูุงุช ุงููุฐููุฑุฉ ูููุงุฌูุฉ ูุงุฆูุงุช ุงูุจููุฉ ุงูุชุญุชูุฉ ุงูุญููููุฉ.  ููุนุงูุจ ุนูู ุชูุธูู ูุฌูุงุช DoS ุจููุฌุจ ุงููุงููู ููููู ุฃู ูุคุฏู ุฅูู ุนููุจุงุช ุดุฏูุฏุฉ.  ุชุฌุฑู ูุฎุชุจุฑุงุช Qrator ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูู ุจูุฆุฉ ูุนูููุฉ ูุนุฒููุฉ. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุงููุณุชูู ุงูููู ุงูุญุฏูุซ </h2><br>  ุชุชูุซู ุงููููุฉ ุงููููุฉ ูู ููุทูุชูุง ูู ุฅุดุจุงุน ูุงุฌูุฉ ุฅูุซุฑูุช 10G ุจุญุฒู ุตุบูุฑุฉ ุ ููุง ูุนูู ูุนุงูุฌุฉ 14.88 ููุฌุงุจุช ูู ุงูุซุงููุฉ (ููุงููู ุงูุญุฒู ูู ุงูุซุงููุฉ).  ูููุง ููู ุ ูุนุชุจุฑ ุฃุตุบุฑ ุญุฒู ุดุจูุฉ Ethernet - 64 ุจุงูุช - ูุฃู ูุตูุญุชูุง ุงูุฑุฆูุณูุฉ ูู ุฒูุงุฏุฉ ุนุฏุฏ ุงูุญุฒู ุงููุฑุณูุฉ ุฅูู ุฃูุตู ุญุฏ ููู ูุญุฏุฉ ุฒูููุฉ.  ูุธูุฑ ุญุณุงุจ ุจุณูุท ุฃูู ููุณ ูุฏููุง ุณูู ุญูุงูู 67 ูุงูู ุซุงููุฉ ููุนุงูุฌุฉ ุญุฒูุฉ ูุงุญุฏุฉ. <br><br>  ููููุงุฑูุฉ ููุท ุ ูุฐู ุงููุฑุฉ ูุฑูุจุฉ ูู ูุง ูุญุชุงุฌู ุงููุนุงูุฌ ุงูุญุฏูุซ ููุญุตูู ุนูู ุฌุฒุก ูู ุงูุจูุงูุงุช ูู ุงูุฐุงูุฑุฉ ุฅุฐุง ูุงุชุชู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช.  ูุตุจุญ ูู ุดูุก ุฃูุซุฑ ุชุนููุฏูุง ุนูุฏูุง ูุจุฏุฃ ุงูุนูู ูุน ูุงุฌูุงุช 40G ู 100 G Ethernet ููุญุงููุฉ ุชุดุจุนูู ุจุงููุงูู ุญุชู ูุนุฏู ุงูุฎุท (ุฃูุตู ุฃุฏุงุก ูุนูู ูููู ูุฌูุงุฒ ุงูุดุจูุฉ). <br><br>  ูุธุฑูุง ูุฃูู ูู ุงูุญุงูุฉ ุงููุนุชุงุฏุฉ ุ ููุฑ ุชุฏูู ุงูุจูุงูุงุช ูู ุฎูุงู ุงูุชุทุจูู ูู ูุณุงุญุฉ ุงููุณุชุฎุฏู (ูุณุงุญุฉ ุงููุณุชุฎุฏููู) ุ ุซู ูู ุฎูุงู ุงูููุงุฉ ุ ูุฃุฎูุฑูุง ุงูุฏุฎูู ุฅูู ูุญุฏุฉ ุชุญูู ุงูุดุจูุฉ (NIC) ุ ูุฅู ุงูููุฑุฉ ุงูุฃููู ูุงูุฃูุซุฑ ูุจุงุดุฑุฉ ูู ูุญุงููุฉ ุชูููู ุชูููู ุงูุญุฒู ูุจุงุดุฑุฉ ูู ุงูููุงุฉ.  ูุซุงู ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฐุง ุงูุญู</a> ูู ุงููุญุฏุฉ ุงูููููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">pktgen</a> [2].  ุชุณูุญ ูู ูุฐู ุงูุทุฑููุฉ ุจุชุญุณูู ุงูุฃุฏุงุก ุจุดูู ูุจูุฑ ุ ูููููุง ููุณุช ูุฑูุฉ ุจูุง ููู ุงูููุงูุฉ ุ ุญูุซ ุฃู ุฃุฏูู ุชุบููุฑ ูู ุดูุฑุฉ ุงููุตุฏุฑ ูู ุงูููุงุฉ ูุคุฏู ุฅูู ุฏูุฑุฉ ุจูุงุก ุทูููุฉ ุ ูุฅุนุงุฏุฉ ุชุดุบูู ูุญุฏุงุช ุงูููุงุฉ ุฃู ุญุชู ุงููุธุงู ุจุฃูููู ุ ููู ุงููุงูุน ุ ุงูุงุฎุชุจุงุฑ ุ ููุง ูููู ูู ุงูุฅูุชุงุฌูุฉ ุงูุฅุฌูุงููุฉ (ุฃู ุฃูู ูุชุทูุจ ุงููุฒูุฏ ูู ุงูููุช ูู ุงููุจุฑูุฌ ูุงูุฌูุฏ). <br><br>  ููุฌ ุขุฎุฑ ูุญุชูู ูู ุงูุญุตูู ุนูู ูุตูู ูุจุงุดุฑ ูู ูุณุงุญุฉ ุงููุณุชุฎุฏููู ุฅูู ูุฎุงุฒู ุฐุงูุฑุฉ ูุญุฏุฉ ุชุญูู ุงูุดุจูุฉ.  ูุฐุง ุงููุณุงุฑ ุฃูุซุฑ ุชุนููุฏูุง ุ ููููู ูุณุชุญู ุงูุฌูุฏ ูุชุญููู ุฅูุชุงุฌูุฉ ุฃุนูู.  ุชุดูู ุงููุณุงูุฆ ุงูุชุนููุฏ ุงูุนุงูู ูุงููุฑููุฉ ุงูููุฎูุถุฉ.  ุฃูุซูุฉ ุนูู ูุฐุง ุงูุฃุณููุจ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">netmap</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PF_RING</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">DPDK</a> [4]. <br><br>  ุทุฑููุฉ ุฃุฎุฑู ูุนุงูุฉ ุ ูุฅู ูุงูุช ููููุฉ ููุบุงูุฉ ูุชุญููู ุฃุฏุงุก ุนุงูู ุ ูู ุงุณุชุฎุฏุงู ูุนุฏุงุช ุบูุฑ ุนุงูููุฉ ุ ูููู ูุชุฎุตุตุฉ.  ูุซุงู: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ixia</a> . <br><br>  ููุงู ุฃูุถูุง ุญููู ุชุณุชูุฏ ุฅูู DPDK ุจุงุณุชุฎุฏุงู ุงูุจุฑุงูุฌ ุงููุตูุฉ ุ ููุง ูุฒูุฏ ูู ุงููุฑููุฉ ูู ุงูุชุญูู ูู ูุนููุงุช ุงููููุฏ ุ ููุณูุญ ูู ุฃูุถูุง ุจุชุบููุฑ ููุน ุงูุญุฒู ุงูุชู ุชู ุฅูุดุงุคูุง ุฃุซูุงุก ุจุฏุก ุงูุชุดุบูู.  ูููุง ููู ูุตู ูุชุฌุฑุจุชูุง ุงูุฎุงุตุฉ ูุน ูุงุญุฏุฉ ูู ูุฐู ุงูุฃุฏูุงุช - MoonGen. <br><br><h2 style=";text-align:right;direction:rtl">  ููุฏุณุฉ MoonGen </h2><br>  ุงูุณูุงุช ุงููููุฒุฉ ูู MoonGen ูู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅู ูุนุงูุฌุฉ ุจูุงูุงุช DPDK ูู ูุณุงุญุฉ ุงููุณุชุฎุฏููู ูู ุงูุณุจุจ ุงูุฑุฆูุณู ูุฒูุงุฏุฉ ุงูุฃุฏุงุก ุ </li><li style=";text-align:right;direction:rtl">  ููุฏุณ Lua [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">5</a> ] ูุน ูุตูุต ุจุณูุทุฉ ูู ุงููุณุชูู ุงูุฃุนูู ูุฑุจุท ููุชุจุฉ DPDK ุงูููุชูุจุฉ ูู C ุ ูู ุงูุฃุณูู ุ </li><li style=";text-align:right;direction:rtl">  ุจูุถู ุชูููุฉ JIT (ูู ุงูููุช ุงูููุงุณุจ) ุ ุชุนูู ุงููุตูุต ุงูุจุฑูุฌูุฉ ููุง ุจุณุฑุนุฉ ูุงููุฉ ุ ูุงูุชู ุชุชูุงูุถ ุฅูู ุญุฏ ูุง ูุน ุงูุฃููุงุฑ ุงูููุจููุฉ ุนููููุง ุญูู ูุนุงููุฉ ูุบุงุช ุงูุจุฑูุฌุฉ ุงููุตูุฉ. </li></ol><br>  ูููู ุงุนุชุจุงุฑ MoonGen ูุบูุงู ููุง ุญูู ููุชุจุฉ DPDK.  ุชุธูุฑ ุนูููุงุช DPDK ุงูุชุงููุฉ ุนูู ุงูุฃูู ุนูู ูุณุชูู ูุงุฌูุฉ ูุณุชุฎุฏู Lua: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชูููู ูุญุฏุงุช ุชุญูู ุงูุดุจูุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุงูุชุฎุตูุต ูุงููุตูู ุงููุจุงุดุฑ ุฅูู ุงูุชุฌูุนุงุช ูุงููุฎุงุฒู ุงููุคูุชุฉ ููุฐุงูุฑุฉ ุ ูุงูุชู ุ ูุฃุบุฑุงุถ ุงูุชุญุณูู ุ ูุฌุจ ุชุฎุตูุตูุง ูู ููุงุทู ูุญุงุฐุงุฉ ูุณุชูุฑุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุงููุตูู ุงููุจุงุดุฑ ุฅูู ููุงุฆู ุงูุชุธุงุฑ RSS ููุญุฏุงุช ุชุญูู ุงูุดุจูุฉ ุ </li><li style=";text-align:right;direction:rtl">  API ูุฅุฏุงุฑุฉ ุงูุชุฏููุงุช ุงูุญุณุงุจูุฉ ุ ูุน ูุฑุงุนุงุฉ ุนุฏู ุชุฌุงูุณ ุงููุตูู ุฅูู ุงูุฐุงูุฑุฉ (ุชูุงุฑุจ NUMA ู CPU) [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">12</a> ]. </li></ul><br><img src="https://habrastorage.org/webt/qg/vh/ij/qgvhijgvyv0fe5m9vntekmwggxo.png"><br><br>  ุงูุนูุงุฑุฉ MoonGen ุ ูุฎุทุท ูู ุงูููุงุฏ [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1</a> ]. <br><br><h3 style=";text-align:right;direction:rtl">  ูููุบูู </h3><br>  MoonGen ูู ูููุฏ ุญุฒู ุนุงูู ุงูุณุฑุนุฉ ููุชูุจ ุนูู ุฃุณุงุณ ููุชุจุฉ DPDK.  ุชุชุญูู ุงูุจุฑุงูุฌ ุงููุตูุฉ ูู Lua ูู ุงูุนูููุฉ ุจุฃููููุง: ูุงูุจุฑูุงูุฌ ุงููุตู ุงูุฐู ููุดุฆู ุงููุณุชุฎุฏู ูุณุคูู ุนู ุฅูุดุงุก ูุชุนุฏูู ูุฅุฑุณุงู ุงูุญุฒู.  ุจูุถู ููุชุจุฉ ูุนุงูุฌุฉ ุงูุญุฒู LuaJIT ู DPDK ุงูุณุฑูุนุฉ ุฌุฏูุง ุ ุชุชูุญ ูู ูุฐู ุงูุจููุฉ ุชุดุจุน ูุงุฌูุฉ ุฅูุซุฑูุช ุจุณุฑุนุฉ 10 ุฌูุฌุงุจุช ูุน ุญุฒู 64 ุจุงูุช ุจุงุณุชุฎุฏุงู ููุงุฉ ูุงุญุฏุฉ ููุท ูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  ูุณูุญ ูู MoonGen ุจุชุญููู ูุฐู ุงูุณุฑุนุฉ ุญุชู ุนูุฏูุง ูุนุฏู ุจุฑูุงูุฌ Lua ุงููุตู ูู ุญุฒูุฉ.  ูุง ูุณุชุฎุฏู ุงูุญูู ูุซู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ููุณ ุงููุฎุฒู ุงููุคูุช ููุญุฏุฉ ุชุญูู ุงูุดุจูุฉ. <br><br>  ูููู ูู MoonGen ุฃูุถูุง ุชููู ุงูุญุฒู ุ ุฃู ุงูุชุญูู ูู ุงูุญุฒู ุงูุชู ุชู ุฅุณูุงุทูุง ุจูุงุณุทุฉ ุงููุธุงู ููุฏ ุงูุงุฎุชุจุงุฑ.  ูุธุฑูุง ูุฃูู ูุชู ุงูุชุญูู ูู ุงุณุชูุจุงู ุงูุญุฒู ุจุดูู ุญุตุฑู ูู ุฎูุงู ูุต ุจุฑูุฌู ูุฎุตุต ูู Lua ุ ููููู ุงุณุชุฎุฏุงูู ุฃูุถูุง ูุฅูุดุงุก ูุตูุต ุงุฎุชุจุงุฑ ุฃูุซุฑ ุชุนููุฏูุง.  ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุงุณุชุฎุฏุงู ูุซูููู ูู MoonGen ูุฅูุดุงุก ุงุชุตุงู ูุน ุจุนุถูุง ุงูุจุนุถ.  ูููู ุงุณุชุฎุฏุงู ูุฐุง ุงูุชูููู ุ ุนูู ูุฌู ุงูุฎุตูุต ุ ูุงุฎุชุจุงุฑ ูุง ูุณูู ุงูุตูุงุฏูู ุงููุณุทู (ุงููุนุฏุงุช ุจูู ููุทุฉ ุฅุฑุณุงู ูุงุณุชูุจุงู ุญุฑูุฉ ุงููุฑูุฑ) ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงูุฌุฏุฑุงู ุงููุงุฑูุฉ.  ูุฑูุฒ MoonGen ุนูู ุฃุฑุจุนุฉ ูุฌุงูุงุช ุฑุฆูุณูุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃุฏุงุก ุนุงูู ูุชุทูุฑ ูุชุนุฏุฏ ุงูููู: ุฃูุซุฑ ูู 20 ููููู ุญุฒูุฉ ูู ุงูุซุงููุฉ ุนูู ูุญุฏุฉ ูุนุงูุฌุฉ ูุฑูุฒูุฉ ูุงุญุฏุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุงููุฑููุฉ: ูุชู ุฅูุดุงุก ูู ุญุฒูุฉ ูู ุงูููุช ุงููุนูู ุจูุงุกู ุนูู ุจุฑูุงูุฌ Lua ุงููุตู ุงูุฐู ุฃูุดุฃู ุงููุณุชุฎุฏู ุ </li><li style=";text-align:right;direction:rtl">  ุงูุทูุงุจุน ุงูุฒูููุฉ ุงูุฏูููุฉ: ุนูู ุงูุฃุฌูุฒุฉ (ุงูุณูุน) ุงูุนุงุฏูุฉ ุ ูุชู ูุถุน ุนูุงูุฉ ุนูู ุงูููุช ุจุฏูุฉ ูููู ุซุงููุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุงูุชุญูู ุงูุฏููู ูู ุงููุชุฑุงุช ุงููุงุตูุฉ ุจูู ุงูุญุฒู ุงููุฑุณูุฉ: ุฅูุดุงุก ููุซูู ููุฃููุงุท ูุฃููุงุน ุงูุญุฑูุฉ ุงููุทููุจุฉ ุนูู ุงูุฃุฌูุฒุฉ ุงูุนุงุฏูุฉ. </li></ul><br><h3 style=";text-align:right;direction:rtl">  DPDK </h3><br>  DPDK ูู ุงุฎุชุตุงุฑ ูู Data Plane Development Kit ูุชุชููู ูู ุงูููุชุจุงุช ุงูุชู ุชุชูุซู ูุธุงุฆููุง ุงูุฑุฆูุณูุฉ ูู ุฒูุงุฏุฉ ุฃุฏุงุก ุชูููุฏ ุญุฒู ุงูุดุจูุฉ ุนูู ูุฌููุนุฉ ูุงุณุนุฉ ูู ูุนูุงุฑูุงุช ุงููุนุงูุฌ ุงููุฑูุฒู. <br><br>  ูู ุนุงูู ุฃุตุจุญุช ููู ุดุจูุงุช ุงูููุจููุชุฑ ุฃุณุงุณ ุงูุชูุงุตู ุงูุจุดุฑู ุ ุฃุตุจุญ ุงูุฃุฏุงุก ูุนุฑุถ ุงููุทุงู ุงูุชุฑุฏุฏู ูุฒูู ุงูุงูุชูุงู ูุนููุงุช ูููุฉ ุจุดูู ูุชุฒุงูุฏ ูุฃูุธูุฉ ูุซู ุงูุดุจูุงุช ุงููุงุณูููุฉ ูุงูุจููุฉ ุงูุชุญุชูุฉ ูููุงุจูุงุช ุ ุจูุง ูู ุฐูู ุฌููุน ููููุงุชูุง ุงููุฑุฏูุฉ: ุฃุฌูุฒุฉ ุงูุชูุฌูู ูููุงุฒูุงุช ุงูุชุญููู ูุฌุฏุฑุงู ุงูุญูุงูุฉ ุ  ุจุงูุฅุถุงูุฉ ุฅูู ูุฌุงูุงุช ุงูุชุทุจูู: ููู ุงููุณุงุฆุท (ุงูุฏูู) ุ VoIP ุ ุฅูุฎ. <br><br>  DPDK ูู ุทุฑููุฉ ุฎูููุฉ ุงููุฒู ููุฑูุญุฉ ูุจูุงุก ุงูุงุฎุชุจุงุฑุงุช ูุงููุตูุต.  ููู ุงูุจูุงูุงุช ุฏุงุฎู ูุณุงุญุฉ ุงููุณุชุฎุฏููู ูู ุดูุก ูุง ููุงุญุธู ูุซูุฑูุง ุ ููุฑุฌุน ุฐูู ุฃุณุงุณูุง ุฅูู ุฃู ูุนุธู ุงูุชุทุจููุงุช ุชุชูุงุตู ูุน ูุนุฏุงุช ุงูุดุจูุฉ ูู ุฎูุงู ูุธุงู ุงูุชุดุบูู ูููุฏุณ ุงูููุงุฉ ุ ููู ุนูุณ ูููุฐุฌ DPDK. <br><br><h3 style=";text-align:right;direction:rtl">  ููุง </h3><br>  ุงูุบุฑุถ ุงูุฑุฆูุณู ูู ูุฌูุฏ Lua ูู ุชูููุฑ ุฃุฏูุงุช ุชุนุจูุฑูุฉ ุจุณูุทุฉ ููุฑูุฉ ูุงุจูุฉ ููุชูุณูุน ูููุงู ุญุงููุฉ ูุญุฏุฏุฉ ุ ุจุฏูุงู ูู ูุฌููุนุฉ ูู ุงูุจุฏุงุฆูุฉ ุงููุทุจูุฉ ูู ูููุฐุฌ ุจุฑูุฌุฉ ูุงุญุฏ ููุท.  ููุชูุฌุฉ ูุฐูู ุ ูุฅู ุงููุบุฉ ุงูุฃุณุงุณูุฉ ุฎูููุฉ ููุบุงูุฉ - ูุง ูุณุชุบุฑู ุงููุชุฑุฌู ุจุฃูููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">180 ููููุจุงูุช</a> ุฅูุง ูู ุดูู ูุชุฑุฌู ููุชููู ุจุณูููุฉ ูุน ูุฌููุนุฉ ูุงุณุนุฉ ูู ุงูุชุทุจููุงุช ุงูููููุฉ. <br><br>  ููุง ูู ูุบุฉ ุฏููุงููููุฉ.  ุฅูู ูุถุบูุท ููุบุงูุฉ ุจุญูุซ ูููู ูุถุนู ุนูู ุฃู ุฌูุงุฒ ุชูุฑูุจูุง.  ูุฏุนู Lua ูุฌููุนุฉ ุตุบูุฑุฉ ูู ุงูุฃููุงุน: ุงูููู ุงูููุทููุฉ ูุงูุฃุฑูุงู (ุงูููุทุฉ ุงูุนุงุฆูุฉ ุงููุฒุฏูุฌุฉ ุงูุฏูุฉ) ูุงูุณูุงุณู.  ูููู ุชูุซูู ููุงูู ุงูุจูุงูุงุช ุงูุชูููุฏูุฉ ุ ูุซู ุงููุตูููุงุช ูุงููุฌููุนุงุช ูุงูููุงุฆู ุ ูู ุฎูุงู ุจููุฉ ุงูุจูุงูุงุช ุงููุถููุฉ ุงููุญูุฏุฉ ูู Lua - ููู ุฌุฏูู ุ ููู ุนุจุงุฑุฉ ุนู ูุฌููุนุฉ ุชุฑุงุจุทูุฉ ุบูุฑ ูุชุฌุงูุณุฉ. <br><br>  ุชุณุชุฎุฏู Lua ุชุฌููุน JIT (ูู ุงูููุช ุงูููุงุณุจ) ุ ูุจุงูุชุงูู ุ ููููุง ูุบุฉ ุจุฑูุฌุฉ ูุตูุฉ ุ ูุฅููุง ุชุนุฑุถ ุฃุฏุงุกู ูุดุงุจููุง ููุบุงุช ุงููุชุฑุฌูุฉ ูุซู C [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">10</a> ] <br><br><h2 style=";text-align:right;direction:rtl">  ููุงุฐุง ูููุบูู </h2><br>  ูุดุฑูุฉ ูุชุฎุตุตุฉ ูู ุชุญููุฏ ูุฌูุงุช DDoS ุ ุชุญุชุงุฌ ูุฎุชุจุฑุงุช Qrator ุฅูู ุทุฑููุฉ ููุซููุฉ ูุฅูุดุงุก ุญููู ุงูุฃูุงู ุงูุฎุงุตุฉ ุจูุง ูุชุฑููุชูุง ูุงุฎุชุจุงุฑูุง.  ูู ุฃุฌู ุงูุงุฎุชุจุงุฑ ุงูุฃุฎูุฑ ุ ููุงู ุญุงุฌุฉ ุฅูู ุทุฑู ูุฎุชููุฉ ูุชูููุฏ ุญุฑูุฉ ุงููุฑูุฑ ุงูุชู ุชุญุงูู ุงููุฌูุงุช ุงูุญููููุฉ.  ููุน ุฐูู ุ ููุณ ูู ุงูุณูู ูุญุงูุงุฉ ูุฌูู ููุถุงู ุฎุทูุฑ ุ ูููู ูุจุงุดุฑ ุ ุนูุฏ 2-3 ูุณุชููุงุช ูู ูููุฐุฌ OSI ุ ููุฑุฌุน ุฐูู ุฃุณุงุณูุง ุฅูู ุงูุตุนูุจุงุช ูู ุชุญููู ุฃุฏุงุก ุนุงูู ูู ุชูููุฏ ุงูุญุฒู. <br><br>  ุจุนุจุงุฑุฉ ุฃุฎุฑู ุ ุจุงููุณุจุฉ ูุดุฑูุฉ ุชุนูู ุนูู ุงูุชูุงูุฑ ุงููุณุชูุฑ ูุฅุจุทุงู ููุนูู DDoS ุ ูุฅู ูุญุงูุงุฉ ูุฌูุงุช DoS ุงููุฎุชููุฉ ูู ุจูุฆุฉ ูุฎุชุจุฑูุฉ ููุนุฒูุฉ ูู ุทุฑููุฉ ูููู ููููุฉ ุชุตุฑู ุงููุนุฏุงุช ุงููุฎุชููุฉ ุงูุชู ุชุนุฏ ุฌุฒุกูุง ูู ูุฌูุนุงุช ุฃุฌูุฒุฉ ุงูุดุฑูุฉ ูู ุงููุงูุน. <br><br>  ุชุนุฏ MoonGen ุทุฑููุฉ ุฌูุฏุฉ ูุชูููุฏ ููู ุญุฑูุฉ ุงููุฑูุฑ ูุฑูุจุฉ ูู ุงูุญุฏ ุงูุฃูุตู ููุญุฏุฉ ุชุญูู ุงูุดุจูุฉ ุจุญุฏ ุฃุฏูู ูู ููู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  ูุนูู ููู ุงูุจูุงูุงุช ุฏุงุฎู ูุณุงุญุฉ ุงููุณุชุฎุฏููู ุนูู ุชุญุณูู ุฃุฏุงุก ุงูููุฏุณ ุงููุนูู ุจุดูู ููุญูุธ (MoonGen + DPDK) ุ ููุงุฑูุฉ ุจุงูุนุฏูุฏ ูู ุงูุฎูุงุฑุงุช ุงูุฃุฎุฑู ูุชูููุฏ ููู ุนุงููุฉ ูุญุฑูุฉ ุงููุฑูุฑ.  ูุชุทูุจ ุงุณุชุฎุฏุงู DPDK ุงูุฎุงูุต ูุฒูุฏูุง ูู ุงูุฌูุฏ ุ ูุฐูู ูุง ูุฌุจ ุฃู ุชูุงุฌุฃ ุจุฑุบุจุชูุง ูู ุชุญุณูู ุงูุฃุฏุงุก.  ูุฏุนู ุฃูุถูุง ุงุณุชูุณุงุฎูุง [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">7</a> ] ููุณุชูุฏุน MoonGen ุงูุฃุตูู ูู ุฃุฌู ุชูุณูุน ูุธุงุฆู ูุชูููุฐ ุงุฎุชุจุงุฑุงุชูุง ุงูุฎุงุตุฉ. <br><br>  ูู ุฃุฌู ุชุญููู ุฃูุตู ูุฏุฑ ูู ุงููุฑููุฉ ุ ูุชู ุชุนููู ููุทู ุฅูุดุงุก ุงูุญุฒู ูู ูุจู ุงููุณุชุฎุฏู ุจุงุณุชุฎุฏุงู ุจุฑูุงูุฌ Lua ุงููุตู ุ ููู ุฃุญุฏ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ ูู MoonGen.  ูู ุญุงูุฉ ูุนุงูุฌุฉ ุงูุญุฒู ุงูุจุณูุทุฉ ูุณุจููุง ุ ูุนูู ูุฐุง ุงูุญู ุจุณุฑุนุฉ ูุงููุฉ ูุฅุดุจุงุน ูุงุฌูุฉ 10G ุนูู ูุญุฏุฉ ูุนุงูุฌุฉ ูุฑูุฒูุฉ ูุงุญุฏุฉ.  ูู ุงูุทุฑู ุงููุนุชุงุฏุฉ ูุชุนุฏูู ุงูุญุฒู ุงููุงุฑุฏุฉ ูุฅูุดุงุก ุญุฒู ุฌุฏูุฏุฉ ุงูุนูู ูุน ุงูุญุฒู ูู ููุณ ุงูููุน ุ ูุงูุชู ุชุชุบูุฑ ูููุง ุจุนุถ ุงูุญููู ููุท. <br><br>  ููู ุงูุฃูุซูุฉ ุนูู ุฐูู ุงุฎุชุจุงุฑ l3-tcp-syn-ack-ุงูููุถุงูุงุช ุงูููุตูู ุฃุฏูุงู.  ูุงุญุธ ุฃูู ูููู ุฅุฌุฑุงุก ุฃู ุชุนุฏูู ุนูู ุงูุญุฒูุฉ ูู ููุณ ุงููุฎุฒู ุงููุคูุช ุ ุญูุซ ุงุชุถุญ ุฃู ุงูุญุฒูุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุฃู ุงุณุชูุงููุง ูู ุงูุฎุทูุฉ ุงูุณุงุจูุฉ.  ูู ุงููุงูุน ุ ูุชู ุชูููุฐ ุชุญูููุงุช ุงูุญุฒู ูุฐู ุจุณุฑุนุฉ ูุจูุฑุฉ ุ ูุธุฑูุง ูุฃููุง ูุง ุชูุทูู ุนูู ุนูููุงุช ุจุงูุธุฉ ุงูุซูู ุ ูุซู ููุงููุงุช ุงููุธุงู ุ ูุงููุตูู ุฅูู ุฃูุณุงู ุงูุฐุงูุฑุฉ ุบูุฑ ุงููุฎุฒูุฉ ูุคูุชูุง ุ ููุง ุดุงุจู ุฐูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุงุฎุชุจุงุฑุงุช ุนูู ุฃุฌูุฒุฉ ูุฎุชุจุฑุงุช Qrator </h2><br>  ุชุฌุฑู ูุฎุชุจุฑุงุช Qrator ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูู ุงููุฎุชุจุฑ ุนูู ูุนุฏุงุช ูุฎุชููุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุงุณุชุฎุฏููุง ูุญุฏุงุช ุชุญูู ูุงุฌูุฉ ุงูุดุจูุฉ ุงูุชุงููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุชู 82599ES 10G </li><li style=";text-align:right;direction:rtl">  Mellanox ConnectX-4 40G </li><li style=";text-align:right;direction:rtl">  Mellanox ConnectX-5100G </li></ul><br>  ููุงุญุธ ุจุดูู ูููุตู ุฃูู ุนูุฏ ุงูุนูู ูุน ูุญุฏุงุช ุชุญูู ุงูุดุจูุฉ ุงูุชู ุชุนูู ุนูู ูุนุงููุฑ ุฃุนูู ูู 10G ุ ุชุตุจุญ ูุดููุฉ ุงูุฃุฏุงุก ุฃูุซุฑ ุญุฏุฉ.  ุงูููู ููุณ ูู ุงููููู ุชุดุจุน ูุงุฌูุฉ 40G ุจููุงุฉ ูุงุญุฏุฉ ุ ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุงูุนุฏุฏ ูุงูุนู ูุน ุนุฏุฏ ูููู ูู ุงูููู. <br><br>  ูู ุญุงูุฉ ูุญุฏุงุช ุงูุชุญูู ุจุงูุดุจูุฉ ุงููุตูุนุฉ ุจูุงุณุทุฉ Mellanox ุ ูู ุงููููู ุชุบููุฑ ุจุนุถ ุงููุนููุงุช ูุฅุนุฏุงุฏุงุช ุงูุฌูุงุฒ ุจุงุณุชุฎุฏุงู ุฏููู ุงูููุงููุฉ [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">3</a> ] ุงูููุฏู ูู ูุจู ุงูุดุฑูุฉ ุงููุตูุนุฉ.  ูุฐุง ูุณูุญ ูู ุจุฒูุงุฏุฉ ุงูุฃุฏุงุก ุ ููู ุจุนุถ ุงูุญุงูุงุช ุงูุฎุงุตุฉ ุ ูุชุนููู ุณููู NIC.  ูุฏ ูููู ูุฏู ุงูุดุฑูุงุช ุงููุตูุนุฉ ุงูุฃุฎุฑู ูุณุชูุฏุงุช ููุงุซูุฉ ูุฃุฌูุฒุชูุง ุนุงููุฉ ุงูุฃุฏุงุก ุงููุฎุตุตุฉ ููุงุณุชุฎุฏุงู ุงููููู.  ุญุชู ุฅุฐุง ูู ุชุชููู ูู ุงูุนุซูุฑ ุนูู ูุซู ูุฐุง ุงููุณุชูุฏ ูู ุงููุฌุงู ุงูุนุงู ุ ููู ุงูููุทูู ุฏุงุฆููุง ุงูุงุชุตุงู ุจุงูุดุฑูุฉ ุงููุตูุนุฉ ูุจุงุดุฑุฉ.  ูู ุญุงูุชูุง ุ ูุงู ููุซูู Mellanox ุทูุจูู ููุบุงูุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุชูููุฑ ุงููุซุงุฆู ุ ุฃุฌุงุจูุง ุจุณุฑุนุฉ ุนูู ุฃุณุฆูุชูุง ุ ูุงูุชู ุชููููุง ูู ุชุญููู 100 ูช ูู ุงูุดุฑูุท ุ ููู ุฃูุฑ ููู ุฌุฏูุง ุจุงููุณุจุฉ ููุง. <br><br><h3 style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุงูููุถุงู TCP SYN </h3><br>  L3-tcp-syn-ack -ููุถ ูู ูุซุงู ููุญุงูุงุฉ ูุฌูู ูุซู ููุถุงู SYN [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">6</a> ].  ูุฐู ูุณุฎุฉ ููุณุนุฉ ูู Qrator Labs ูุงุฎุชุจุงุฑ l3-tcp-syn-ุงูููุถุงูุงุช ูู ูุณุชูุฏุน MoonGen ุงูุฑุฆูุณู ุ ูุงูุฐู ูุชู ุชุฎุฒููู ูู ุงุณุชูุณุงุฎ ุงููุณุชูุฏุน ุงูุฎุงุต ุจูุง. <br><br>  ูููู ุฃู ูููู ุงุฎุชุจุงุฑูุง ุจุฅุฌุฑุงุก ุซูุงุซุฉ ุฃููุงุน ูู ุงูุนูููุงุช: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุฏูู ุญุฒู TCP SYN ูู ุงูุจุฏุงูุฉ ุ ูุชุบููุฑ ุงูุญููู ุงููุทููุจุฉ ุ ูุซู ุนููุงู IP ุงููุตุฏุฑ ูุฑูู ูููุฐ ุงููุตุฏุฑ ุ ุฅูุฎ. </li><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุงุณุชุฌุงุจุฉ ACK ุตุงูุญุฉ ููู ุญุฒูุฉ SYN ูุณุชููุฉ ููููุง ูู TCP ุ </li><li style=";text-align:right;direction:rtl">  ูู ุจุฅูุดุงุก ุงุณุชุฌุงุจุฉ SYN-ACK ุตุงูุญุฉ ููู ุญุฒูุฉ ACK ูุณุชููุฉ ููููุง ูุจุฑูุชูููู TCP. </li></ol><br>  ุนูู ุณุจูู ุงููุซุงู ุ ุญููุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฏุงุฎููุฉ (ุนูู ุงูุชูุงูู ุ "ุงูุฃูุซุฑ ุณุฎููุฉ") ูุฅูุดุงุก ุงุณุชุฌุงุจุงุช ACK ูู ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"><code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> tx = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> rx = rxQ:recv(rxBufs) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>, rx <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> buf = rxBufs[i] <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> pkt = buf:getTcpPacket(ipv4) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> pkt.ip4:getProtocol() == ip4.PROTO_TCP <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> pkt.tcp:getSyn() <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (pkt.tcp:getAck() <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> synack) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> seq = pkt.tcp:getSeqNumber() <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> ack = pkt.tcp:getAckNumber() pkt.tcp:unsetSyn() pkt.tcp:setAckNumber(seq+<span class="hljs-number"><span class="hljs-number">1</span></span>) pkt.tcp:setSeqNumber(ack) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> tmp = pkt.ip4.src:get() pkt.ip4.src:set(pkt.ip4.dst:get()) pkt.ip4.dst:set(tmp) โฆ <span class="hljs-comment"><span class="hljs-comment">-- some more manipulations with packet fields tx = tx + 1 txBufs[tx] = buf end end if tx &gt; 0 then txBufs:resize(tx) txBufs:offloadTcpChecksums(ipv4) -- offload checksums to NIC txQ:send(txBufs) end</span></span></code> </pre> <br>  ุงูููุฑุฉ ุงูุนุงูุฉ ูุฅูุดุงุก ุญุฒูุฉ ุงุณุชุฌุงุจุฉ ูู ููุง ููู.  ุฃููุงู ุ ุชุญุชุงุฌ ุฅูู ุฅุฒุงูุฉ ุงูุญุฒูุฉ ูู ูุงุฆูุฉ ุงูุชุธุงุฑ RX ุ ุซู ุชุญูู ููุง ุฅุฐุง ูุงู ููุน ุงูุญุฒูุฉ ูุชุทุงุจู ูุน ุงูููุน ุงููุชููุน.  ูู ุญุงูุฉ ุงูุตุฏูุฉ ุ ูู ุจุฅุนุฏุงุฏ ุฅุฌุงุจุฉ ุจุชุนุฏูู ุจุนุถ ูุฌุงูุงุช ุงูุญุฒูุฉ ุงูุฃุตููุฉ.  ุฃุฎูุฑูุง ุ ุถุน ุงูุญุฒูุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ูู ูุงุฆูุฉ ุงูุชุธุงุฑ TX ุจุงุณุชุฎุฏุงู ููุณ ุงููุฎุฒู ุงููุคูุช.  ูุชุญุณูู ุงูุฃุฏุงุก ุ ุจุฏูุงู ูู ุฃุฎุฐ ุงูุญุฒู ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู ูุชุนุฏูููุง ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู ุ ูููู ุจุชุฌููุนูุง ูุงุณุชุฎุฑุงุฌ ุฌููุน ุงูุญุฒู ุงููุชุงุญุฉ ูู ูุงุฆูุฉ ุงูุชุธุงุฑ RX ูุฅูุดุงุก ุงูุฑุฏูุฏ ุงูููุงุจูุฉ ููุถุนูุง ุฌููุนูุง ูู ูุงุฆูุฉ ุงูุชุธุงุฑ TX.  ุนูู ุงูุฑุบู ูู ูุฌูุฏ ุนุฏุฏ ูุจูุฑ ุฅูู ุญุฏ ูุง ูู ุงูุชูุงุนุจ ูู ุญุฒูุฉ ูุงุญุฏุฉ ุ ุฅูุง ุฃู ุงูุฃุฏุงุก ูุง ูุฒุงู ูุฑุชูุนูุง ุ ููุฑุฌุน ุฐูู ุฃุณุงุณูุง ุฅูู ุญูููุฉ ุฃู Lua JIT ุชููู ุจุชุฌููุน ูู ูุฐู ุงูุนูููุงุช ูู ุนุฏุฏ ุตุบูุฑ ูู ุชุนูููุงุช ุงููุนุงูุฌ.  ุชุนูู ุงูุนุฏูุฏ ูู ุงูุงุฎุชุจุงุฑุงุช ุงูุฃุฎุฑู ุ ููุณ ููุท TCP SYN / ACK ุ ุนูู ููุณ ุงููุจุฏุฃ. <br><br>  ููุถุญ ุงูุฌุฏูู ุฃุฏูุงู ูุชุงุฆุฌ ุงุฎุชุจุงุฑ ุงูููุถุงู SYN (ุชูููุฏ SYN ุจุฏูู ูุญุงููุงุช ุงุณุชุฌุงุจุฉ) ุจุงุณุชุฎุฏุงู Mellanox ConnectX-4.  ูุญุชูู NIC ูุฐุง ุนูู ูููุฐูู 40G ุจุณูู ุฃุฏุงุก ูุธุฑู ูุจูุบ 59.52 Mpps ุนูู ูููุฐ ูุงุญุฏ ู 2 * 50 Mpps ููููุฐูู.  ูุญุฏ ุงูุชุทุจูู ุงููุญุฏุฏ ูุฑุจุท NIC ุจู PCIe ุฅูู ุญุฏ ูุง ูู ุนุฑุถ ุงููุทุงู ุงูุชุฑุฏุฏู (ุฅุนุทุงุก 2 * 50 ุจุฏูุงู ูู 2 * 59.52 ุงููุชููุน). <br><table style=";text-align:right;direction:rtl"><tbody><tr><td>  <b>ุงูููู ููู ูููุฐ</b> </td><td>  <b>ูููุฐ ูุงุญุฏ ุ Mpps</b> </td><td>  <b>ูููุฐูู ุ Mpps ููู ูููุฐ</b> </td></tr><tr><td>  1 </td><td>  20 </td><td>  19 </td></tr><tr><td>  2 </td><td>  38 </td><td>  36 </td></tr><tr><td>  3 </td><td>  56.5 </td><td>  47 </td></tr><tr><td>  4 </td><td>  59.5 </td><td>  50 </td></tr></tbody></table><br>  <i>ุงุฎุชุจุงุฑ ุงูููุถุงูุงุช SYN.</i>  <i>NIC: ุนุงุฆูุฉ Mellanox Technologies MT27700 (ConnectX-4) ุ ูููุฐ 40G ูุฒุฏูุฌ ุ</i>  <i>ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ: Intelยฎ Xeonยฎ Silver 4114 CPU @ 2.20GHz</i> <br><br>  ููุถุญ ุงูุฌุฏูู ุงูุชุงูู ูุชุงุฆุฌ ููุณ ุงุฎุชุจุงุฑ ุงูููุถุงู SYN ุงูุฐู ุชู ุฅุฌุฑุงุคู ุนูู Mellanox ConnectX-5 ุจูููุฐ 100G ูุงุญุฏ. <br><table style=";text-align:right;direction:rtl"><tbody><tr><td>  <b>ุงูููู</b> </td><td>  <b>Mpps</b> </td></tr><tr><td>  1 </td><td>  35 </td></tr><tr><td>  2 </td><td>  69 </td></tr><tr><td>  3 </td><td>  104 </td></tr><tr><td>  4 </td><td>  127 </td></tr><tr><td>  5 </td><td>  120 </td></tr><tr><td>  6 </td><td>  131 </td></tr><tr><td>  7 </td><td>  132 </td></tr><tr><td>  8 </td><td>  144 </td></tr></tbody></table><br>  <i>ุงุฎุชุจุงุฑ ุงูููุถุงูุงุช SYN.</i>  <i>NIC: ุนุงุฆูุฉ Mellanox Technologies MT27800 (ConnectX-5) ุ ูููุฐ ูุงุญุฏ 100G ุ</i>  <i>ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ: Intelยฎ Xeonยฎ Silver 4114 CPU @ 2.20GHz</i> <br><br>  ูุงุญุธ ุฃูู ูู ุฌููุน ุงูุญุงูุงุช ูุญูู ุฃูุซุฑ ูู 96ูช ูู ุณูู ุงูุฃุฏุงุก ุงููุธุฑู ุนูู ุนุฏุฏ ุตุบูุฑ ูู ููู ุงููุนุงูุฌ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุชูุงุท ุญุฑูุฉ ุงููุฑูุฑ ุงููุงุฑุฏุฉ ูุญูุธูุง ูู ูููุงุช PCAP </h3><br>  ูุซุงู ุขุฎุฑ ุนูู ุงูุงุฎุชุจุงุฑ ูู rx-to-pcap ุ ุงูุฐู ูุญุงูู ุงูุชูุงุท ุฌููุน ุญุฑูุฉ ุงููุฑูุฑ ุงููุงุฑุฏุฉ ูุญูุธูุง ุนูู ุนุฏุฏ ูุนูู ูู ูููุงุช PCAP [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">8</a> ].  ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุงูุงุฎุชุจุงุฑ ูุง ูุชุนูู ุนูู ูุฌู ุงูุชุญุฏูุฏ ุจุฅูุดุงุก ุงูุญุฒู ุนูู ูุฐุง ุงููุญู ุ ุฅูุง ุฃูู ุจูุซุงุจุฉ ุฏููู ุนูู ุญูููุฉ ุฃู ุฃุถุนู ุฑุงุจุท ูู ุชูุธูู ููู ุงูุจูุงูุงุช ูู ุฎูุงู ูุณุงุญุฉ ุงููุณุชุฎุฏููู ูู ูุธุงู ุงููููุงุช.  ุญุชู ูุธุงู ุงููููุงุช ุงูุธุงูุฑู tmpfs ูุจุทุฆ ุงูุฏูู ุจุดูู ููุญูุธ.  ูู ูุฐู ุงูุญุงูุฉ ุ ููุงู ุญุงุฌุฉ ุฅูู 8 ููู ูู ุงููุนุงูุฌ ุงููุฑูุฒู ูุงุณุชุฎุฏุงู 14.88 ููุฌุงุจุช ูู ุงูุซุงููุฉ ุ ูู ุญูู ุฃู ููุงุฉ ูุงุญุฏุฉ ููุท ุชููู ูุชููู (ูุฅุนุงุฏุฉ ุชุนููู ุฃู ุฅุนุงุฏุฉ ุชูุฌูู) ููุณ ููุฏุงุฑ ุญุฑูุฉ ุงููุฑูุฑ. <br><br>  ููุถุญ ุงูุฌุฏูู ุงูุชุงูู ููุฏุงุฑ ุญุฑูุฉ ุงููุฑูุฑ (ูู Mpps) ุงูุชู ุชู ุงุณุชูุงููุง ูุญูุธูุง ูู ูููุงุช PCAP ุงูููุฌูุฏุฉ ูู ูุธุงู ุงููููุงุช ext2 ุนูู SSD (ุงูุนููุฏ ุงูุซุงูู) ุฃู ุนูู ูุธุงู ูููุงุช tmpfs (ุงูุนููุฏ ุงูุซุงูุซ). <br><table style=";text-align:right;direction:rtl"><tbody><tr><td>  <b>ุงูููู</b> </td><td>  <b>ุนูู SSD ุ Mpps</b> </td><td>  <b>ุนูู tmpfs ุ Mpps</b> </td></tr><tr><td>  1 </td><td>  1.48 </td><td>  1.62 </td></tr><tr><td>  2 </td><td>  4 </td><td>  4.6 </td></tr><tr><td>  3 </td><td>  6.94 </td><td>  8.1 </td></tr><tr><td>  4 </td><td>  9.75 </td><td>  11.65 </td></tr><tr><td>  5 </td><td>  12.1 </td><td>  13.8 </td></tr><tr><td>  6 </td><td>  13.38 </td><td>  14.47 </td></tr><tr><td>  7 </td><td>  14.4 </td><td>  14.86 </td></tr><tr><td>  8 </td><td>  14.88 </td><td>  14.88 </td></tr></tbody></table><br>  <i>ุงุฎุชุจุงุฑ Rx-to-pcap ุ</i>  <i>NIC: Intel 82599ES 10-Gigabit ุ</i>  <i>ุงููุนุงูุฌ: Intelยฎ Xeonยฎ CPU E5-2683 v4 @ 2.10GHz</i> <br><br><h2 style=";text-align:right;direction:rtl">  ุชุนุฏูู MoonGen: tman Task Manager </h2><br>  ููุฏ ุฃูุถูุง ุฃู ููุฏู ูููุงุฑุฆ ุงูุชุฏุงุฏูุง ุงูุฎุงุต ููุธููุฉ MoonGen ุ ูุงูุชู ุชููุฑ ุทุฑููุฉ ุฃุฎุฑู ูุจุฏุก ูุฌููุนุฉ ูู ุงูููุงู ููุงุฎุชุจุงุฑ.  ุงูููุฑุฉ ุงูุฑุฆูุณูุฉ ููุง ูู ูุตู ุงูุชูููู ุงูุนุงู ูุงูุฅุนุฏุงุฏุงุช ุงูุฎุงุตุฉ ุจูู ูููุฉ ุ ููุง ูุณูุญ ูู ุจุชุดุบูู ุนุฏุฏ ุนุดูุงุฆู ูู ุงูููุงู ุงููุฎุชููุฉ (ูุซู ุงูุจุฑุงูุฌ ุงููุตูุฉ ููุง) ูู ููุณ ุงูููุช.  ูู ูุณุฎุชูุง ูู ูุณุชูุฏุน MoonGen ุ ูุชู ุชูุฏูู ุชูููุฐ MoonGen ูุน ูุฏูุฑ ุงูููุงู [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">9</a> ] ุ ูููุง ุณูุฐูุฑ ุจุฅูุฌุงุฒ ูุธุงุฆูู ุงูุฑุฆูุณูุฉ ููุท. <br><br>  ุชุชูุญ ูู ูุงุฌูุฉ ุณุทุฑ ุงูุฃูุงูุฑ ุงูุฌุฏูุฏุฉ ุชุดุบูู ููุงู ูุชุนุฏุฏุฉ ูู ุฃููุงุน ูุฎุชููุฉ ูู ููุณ ุงูููุช.  ุงูุณููุงุฑูู ุงูุฃุณุงุณู ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">./build/tman [tman options...] [-- &lt;task1-file&gt; [task1 options...]] [-- &lt;task2-file&gt; [task2 options...]] [-- ...]</code> </pre> <br>  ุจุงูุฅุถุงูุฉ ุฅูู ./build/tman -h ููุฏู ุงููุณุงุนุฏุฉ ุงูุชูุตูููุฉ. <br><br>  ููุน ุฐูู ุ ููุงู ูููุฏ - ูููุงุช ูููุฉ Lua ุงูุนุงุฏูุฉ ุบูุฑ ูุชูุงููุฉ ูุน ูุงุฌูุฉ <i>tman</i> .  ูุฌุจ ุฃู ูุญุฏุฏ <i>ููู</i> ูููุฉ <i>tman</i> ุจูุถูุญ ุงููุงุฆูุงุช ุงูุชุงููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฏุงูุฉ config (parser) ุงูุชู ุชุตู ูุนููุงุช ุงููููุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุฏุงูุฉ ุงููููุฉ (taskNum ุ txInfo ุ rxInfo ุ args) ุ ุงูุชู ุชุตู ุนูููุฉ ุงููููุฉ ุงููุนููุฉ.  ููุง txInfo ู rxInfo ุตูุงุฆู RX ู TX ููุงุฆู ุงูุงูุชุธุงุฑ ุนูู ุงูุชูุงููุ  ูุญุชูู args ุนูู ูุนููุงุช ูุฏูุฑ ุงูููุงู ูุงููููุฉ ููุณูุง. </li><li style=";text-align:right;direction:rtl">  ูููู ุงูุนุซูุฑ ุนูู ุฃูุซูุฉ ูู ุงูุฃูุซูุฉ / tman. </li></ul><br>  ูููุญู ุงุณุชุฎุฏุงู ูุฏูุฑ ุงูููุงู ูุฑููุฉ ุฃูุจุฑ ูู ุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑุงุช ุบูุฑ ุงููุชุฌุงูุณุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุงุณุชูุชุงุฌุงุช </h3><br>  ุชุจูู ุฃู ุงูุทุฑููุฉ ุงูุชู ุชูุฏููุง MoonGen ุชุชูุงุณุจ ุชูุงููุง ูุน ุฃูุฏุงููุง ูุชุฑุถู ุงูููุธููู ุจุงููุชุงุฆุฌ ุงูุชู ุชู ุงูุญุตูู ุนูููุง.  ููุฏ ุญุตููุง ุนูู ุฃุฏุงุฉ ุฐุงุช ุฃุฏุงุก ุนุงูู ุ ูุน ุงูุญูุงุธ ุนูู ุจูุฆุฉ ุงูุงุฎุชุจุงุฑ ูุงููุบุฉ ุจูู ุจุณุงุทุฉ.  ูุชู ุชุญููู ุงูุฃุฏุงุก ุงูุนุงูู ููุฐุง ุงูุฅุนุฏุงุฏ ุจูุถู ููุฒุชูู ุฑุฆูุณูุชูู: ุงููุตูู ุงููุจุงุดุฑ ุฅูู ูุฎุงุฒู ูุญุฏุฉ ุชุญูู ูุงุฌูุฉ ุงูุดุจูุฉ ูุชูููุฉ ุงูุชุฌููุน Just-In-Time ูู Lua. <br><br>  ููุงุนุฏุฉ ุ ูุนุฏ ุชุญููู ุณูู ูุธุฑู ูุฃุฏุงุก ูุญุฏุฉ ุชุญูู ูุงุฌูุฉ ุงูุดุจูุฉ ูููุฉ ูุฌุฏูุฉ.  ููุง ุฃุธูุฑูุง ุ ูุฏ ูููู ููุงุฉ ูุงุญุฏุฉ ูุงููุฉ ูุฅุดุจุงุน ูููุฐ 10G ุ ุจูููุง ูุน ุนุฏุฏ ุฃูุจุฑ ูู ุงูููู ุ ูุง ููุซู ุงูุญูู ุงููุงูู ููููุฐ 100G ูุดููุฉ. <br><br>  ูุญู ููุชููู ุจุดูู ุฎุงุต ููุฑูู Mellanox ููุณุงุนุฏุชูู ูู ูุนุฏุงุชูู ููุฑูู MoonGen ูุฑุฏ ูุนููู ุนูู ุชุตุญูุญ ุงูุฃุฎุทุงุก. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูููุงุฏ </h2><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">MoonGen: ูููุฏ ุญุฒู ุนุงูู ุงูุณุฑุนุฉ ูุงุจู ููุจุฑูุฌุฉ - Paul Emmerich et al. ุ ูุคุชูุฑ ููุงุณ ุงูุฅูุชุฑูุช 2015 (IMC'15) ุ 2015</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจูุชุฌู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฏููู ุถุจุท Mellanox</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฌููุนุฉ ุชุทููุฑ ุทุงุฆุฑุฉ ุงูุจูุงูุงุช</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุถุงูุงุช ุณูู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุณุชูุณุงุฎ Qrator Labs ููุณุชูุฏุน MoonGen</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูุณูู ููู PCAP</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฏูุฑ ุงูููุงู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุฏุงุก ููุง</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุธุงุฆู ุงูุดุจูุฉ ุงูุงูุชุฑุงุถูุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">NUMA ุ ูุตูู ุฅูู ุฐุงูุฑุฉ ุบูุฑ ููุญุฏุฉ</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar423957/">https://habr.com/ru/post/ar423957/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar423945/index.html">ุญุฏุฏุช ุงููุญููุฉ ุงูุนููุง ุงูุฅุฌุฑุงุก ูููุธุฑ ูู ุงููุถุงูุง ูุน ุฅุนุงุฏุฉ ุงููุดุฑ ููุง ุดุงุจู</a></li>
<li><a href="../ar423947/index.html">ูุง ุชูููู ุจูุงูุงุชูุง ุงูุดุฎุตูุฉ ุฃู ุดูุก</a></li>
<li><a href="../ar423949/index.html">ูุฏ ูุง ูููู ุงูููู ุงููุชูุงูู ูุน ูุนุชูุฏุงุชูุง ุงูุญุงููุฉ ูููููุง.</a></li>
<li><a href="../ar423953/index.html">ูุธููุฉ ุงูุฅูุณุงู ุฃู ุงูุชููู ุนู ุชูุธูู ุงูุชูููููุฌูุง</a></li>
<li><a href="../ar423955/index.html">ููู ุงุจุชูุฑูุง ููุชุฌูุง ุชููููุง ูุณูุทูุง ูู ุงููุงุน</a></li>
<li><a href="../ar423959/index.html">ุญุงูุงุช ุชุญุช ุงููุงุก - ููุฑูุจูุชุงุช</a></li>
<li><a href="../ar423961/index.html">ูุง ุชููุฏ ููุณู: ุทุฑููุฉ ุฌุฏูุฏุฉ ูุชุดุฎูุต ุงูุฎุฑู</a></li>
<li><a href="../ar423963/index.html">ููุฏูุฉ ูููู ุจูููุช</a></li>
<li><a href="../ar423965/index.html">ููุฏ ุงุดุชุฑูุช SIEM ูุชุฃูุฏ ุฃู SOC ูู ุฌูุจู ุ ุฃููุณ ูุฐููุ</a></li>
<li><a href="../ar423967/index.html">ุงูุญูููุฉ ุงููุงููุฉ ุนู RTOS. ุงููุงุฏุฉ ุฑูู 10. ุงููุฌุฏูู: ุงูููุฒุงุช ุงููุชูุฏูุฉ ูุงูุญูุงุธ ุนูู ุงูุณูุงู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>