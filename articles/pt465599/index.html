<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïú üëÉüèº ‚è∏Ô∏è IPFS sem dor (mas isso n√£o √© preciso) üë±üèø ‚è∫Ô∏è ‚öñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Apesar do fato de que em Habr√© j√° n√£o havia um artigo sobre o IPFS . 

 Esclare√ßo imediatamente que n√£o sou especialista neste campo, mas demonstrei i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>IPFS sem dor (mas isso n√£o √© preciso)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465599/"><img src="https://habrastorage.org/webt/wi/od/vh/wiodvhs9bp_gm6uff-4kp8ly0ni.jpeg"><br><br>  Apesar do fato de que em Habr√© j√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o</a> havia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um artigo sobre o IPFS</a> . <br><br>  Esclare√ßo imediatamente que n√£o sou especialista neste campo, mas demonstrei interesse nessa tecnologia mais de uma vez, mas tentar brincar com ela geralmente causava alguma dor.  Hoje fiz novamente os experimentos e obtive alguns resultados que gostaria de compartilhar.  Em resumo, o processo de instala√ß√£o do IPFS e alguns chips ser√° descrito (tudo foi feito no ubuntu, em outras plataformas que eu n√£o tentei). <br><a name="habracut"></a><br>  <i>Se voc√™ perdeu o que √© IPFS, ele est√° escrito com alguns detalhes aqui: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">habr.com/en/post/314768</a></i> <br><br><h2>  Instala√ß√£o </h2><br>  <i>Para a pureza do experimento, proponho a instala√ß√£o imediata em algum servidor externo, pois consideraremos algumas armadilhas ao trabalhar no modo local e remoto.</i>  <i>Ent√£o, se desejado, n√£o ser√° demolido por muito tempo, n√£o h√° muitos.</i> <br><br><h3>  Pronto </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Documenta√ß√£o oficial</a> <br>  Veja a vers√£o atual em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">golang.org/dl</a> <br><br>  <i>Nota: √© melhor instalar o IPFS em nome do usu√°rio, que deve usar os mais frequentes.</i>  <i>O fato √© que abaixo consideraremos a op√ß√£o de montagem via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FUSE</a> e existem sutilezas por l√°.</i> <br><br><pre><code class="plaintext hljs">cd ~ curl -O https://dl.google.com/go/go1.12.9.linux-amd64.tar.gz tar xvf go1.12.9.linux-amd64.tar.gz sudo chown -R root:root ./go sudo mv go /usr/local rm go1.12.9.linux-amd64.tar.gz</code> </pre> <br>  Ent√£o voc√™ precisa atualizar o ambiente (mais detalhes aqui: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">golang.org/doc/code.html#GOPATH</a> ). <br><br><pre> <code class="plaintext hljs">echo 'export GOPATH=$HOME/work' &gt;&gt; ~/.bashrc echo 'export PATH=$PATH:/usr/local/go/bin:$GOPATH/bin' &gt;&gt; ~/.bashrc source ~/.bashrc</code> </pre><br>  Verifique se o go est√° instalado <br><br><pre> <code class="plaintext hljs">go version</code> </pre> <br><h3>  Instalar IPFS </h3><br>  Eu gostei da maneira de instalar via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ipfs-update mais</a> . <br><br>  Instale-o com o comando <br><br><pre> <code class="plaintext hljs">go get -v -u github.com/ipfs/ipfs-update</code> </pre><br>  Depois disso, voc√™ pode executar os seguintes comandos: <br><br>  <b>vers√µes do ipfs-update</b> - para ver todas as vers√µes dispon√≠veis para download. <br>  <b>ipfs-update version</b> - para ver a vers√£o atual instalada (at√© que tenhamos o IPFS instalado, n√£o haver√° nenhum). <br>  <b>ipfs-update install latest</b> - instale a vers√£o mais recente do IPFS.  Em vez da mais recente, respectivamente, voc√™ pode especificar qualquer vers√£o desejada da lista de dispon√≠veis. <br><br>  Instale o ipfs <br><br><pre> <code class="plaintext hljs">ipfs-update install latest</code> </pre><br>  Verifique <br><br><pre> <code class="plaintext hljs">ipfs --version</code> </pre> <br>  Diretamente com a instala√ß√£o em termos gerais, tudo. <br><br><h2>  Lan√ßamento do IPFS </h2><br><h3>  Inicializa√ß√£o </h3><br>  Primeiro voc√™ precisa executar a inicializa√ß√£o. <br><br><pre> <code class="plaintext hljs">ipfs init</code> </pre> <br>  Em resposta, voc√™ obter√° algo como isto: <br><br><pre> <code class="plaintext hljs"> ipfs init initializing IPFS node at /home/USERNAME/.ipfs generating 2048-bit RSA keypair...done peer identity: QmeCWX1DD7HnXXXXXXXXXXXXXXXXXXXXXXXXxxx to get started, enter: ipfs cat /ipfs/QmS4ustL54uo8FzR9455qaxZwuMiUhyvMcX9Ba8nUH4uVv/readme</code> </pre><br>  Voc√™ pode executar o comando proposto <br><br><pre> <code class="plaintext hljs">ipfs cat /ipfs/QmS4ustL54uo8FzR9455qaxZwuMiUhyvMcX9Ba8nUH4uVv/readme</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Resultado</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">Hello and Welcome to IPFS! ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïù ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù If you're seeing this, you have successfully installed IPFS and are now interfacing with the ipfs merkledag! ------------------------------------------------------- | Warning: | | This is alpha software. Use at your own discretion! | | Much is missing or lacking polish. There are bugs. | | Not yet secure. Read the security notes for more. | ------------------------------------------------------- Check out some of the other files in this directory: ./about ./help ./quick-start &lt;-- usage examples ./readme &lt;-- this file ./security-notes</code> </pre><br></div></div><br>  Aqui, na minha opini√£o, o interessante j√° est√° come√ßando.  Na fase de instala√ß√£o, os caras j√° est√£o come√ßando a usar suas pr√≥prias tecnologias.  O hash proposto QmS4ustL54uo8FzR9455qaxZwuMiUhyvMcX9Ba8nUH4uVv - n√£o gerado especificamente para voc√™, mas costurado no release.  Ou seja, antes do lan√ßamento, eles prepararam um texto de boas-vindas, o colocaram no IPFS e adicionaram o endere√ßo ao instalador.  Na minha opini√£o, isso √© muito legal.  E esse arquivo (mais precisamente, a pasta inteira) agora pode ser exibido n√£o apenas localmente, mas tamb√©m no gateway oficial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ipfs.io/ipfs/QmS4ustL54uo8FzR9455qaxZwuMiUhyvMcX9Ba8nUH4uVv</a> .  Ao mesmo tempo, voc√™ pode ter certeza de que o conte√∫do da pasta n√£o mudou de forma alguma, porque, se tivesse sido alterado, o hash tamb√©m teria sido alterado. <br><br>  <i>A prop√≥sito, nesse caso, o IPFS tem algumas semelhan√ßas com o servidor de controle de vers√£o.</i>  <i>Se voc√™ fizer altera√ß√µes nos arquivos de origem da pasta e despejar a pasta novamente no IPFS, ele receber√° um novo endere√ßo.</i>  <i>Ao mesmo tempo, a pasta antiga n√£o ir√° a lugar nenhum e estar√° dispon√≠vel no endere√ßo anterior.</i> <br><br><h3>  Lan√ßamento direto </h3><br><pre> <code class="plaintext hljs">ipfs daemon</code> </pre> <br>  Eles devem receber uma resposta como esta: <br><br><pre> <code class="plaintext hljs">ipfs daemon Initializing daemon... go-ipfs version: 0.4.22- Repo version: 7 System version: amd64/linux Golang version: go1.12.7 Swarm listening on /ip4/xxxx/tcp/4001 Swarm listening on /ip4/127.0.0.1/tcp/4001 Swarm listening on /ip6/::1/tcp/4001 Swarm listening on /p2p-circuit Swarm announcing /ip4/127.0.0.1/tcp/4001 Swarm announcing /ip6/::1/tcp/4001 API server listening on /ip4/127.0.0.1/tcp/5001 WebUI: http://127.0.0.1:5001/webui Gateway (readonly) server listening on /ip4/127.0.0.1/tcp/8080 Daemon is ready</code> </pre><br><h4>  Abrimos a porta para a Internet </h4><br>  Preste aten√ß√£o a estas duas linhas: <br><br><pre> <code class="plaintext hljs">WebUI: http://127.0.0.1:5001/webui Gateway (readonly) server listening on /ip4/127.0.0.1/tcp/8080</code> </pre><br>  Agora, se voc√™ instalou o IPFS localmente, acessar√° as interfaces IPFS nos endere√ßos locais e tudo estar√° dispon√≠vel para voc√™ (por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">localhost</a> : 5001 / webui /).  Por√©m, quando instalados em um servidor externo, por padr√£o, os gateways s√£o fechados para a Internet.  Existem dois gateways: <br><br><ol><li>  Admin webui ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github</a> ) na porta 5001. </li><li>  API externa na porta 8080 (somente leitura). </li></ol><br>  At√© o momento, √© poss√≠vel abrir as duas portas para experimentos (5001 e 8080), mas √© claro que, no servidor de batalha, a porta 5001 deve ser fechada com um firewall.  Existem 4001 portas, √© necess√°rio para que outros pares possam encontr√°-lo.  Deve ser deixado aberto para solicita√ß√µes externas. <br><br>  Abra ~ / .ipfs / config para editar e encontre as seguintes linhas: <br><br><pre> <code class="plaintext hljs">"Addresses": { "Swarm": [ "/ip4/0.0.0.0/tcp/4001", "/ip6/::/tcp/4001" ], "Announce": [], "NoAnnounce": [], "API": "/ip4/127.0.0.1/tcp/5001", "Gateway": "/ip4/127.0.0.1/tcp/8080" }</code> </pre> <br>  Altere 127.0.0.1 para o ip do seu servidor, salve o arquivo e reinicie o ipfs (interrompa o comando Ctrl + C e execute novamente). <br><br>  Deve obter <br><br><pre> <code class="plaintext hljs">... WebUI: http://ip__:5001/webui Gateway (readonly) server listening on /ip4/ip__/tcp/8080</code> </pre><br>  Agora interfaces externas devem estar dispon√≠veis. <br><br>  Confira <br><br><pre> <code class="plaintext hljs">http://__ip_:8080/ipfs/QmS4ustL54uo8FzR9455qaxZwuMiUhyvMcX9Ba8nUH4uVv/readme</code> </pre> <br>  O arquivo leia-me acima deve abrir. <br><br><pre> <code class="plaintext hljs">http://__ip_:5001/webui/</code> </pre> <br>  A interface da web deve abrir. <br><br>  <i>Se o webui funcionar para voc√™, as configura√ß√µes do IPFS poder√£o ser alteradas diretamente, incluindo estat√≠sticas de exibi√ß√£o, mas abaixo considerarei as op√ß√µes de configura√ß√£o diretamente atrav√©s do arquivo de configura√ß√£o, o que geralmente n√£o √© cr√≠tico.</i>  <i>√â melhor lembrar exatamente onde est√° a configura√ß√£o e o que fazer com ela. Se o focinho da web n√£o funcionar, ser√° mais dif√≠cil.</i> <br><br><h3>  Configure uma interface da web para trabalhar com seu servidor </h3><br>  Aqui est√° a primeira armadilha, que foi gasta cerca de tr√™s horas. <br><br>  Se voc√™ instalou o IPFS em um servidor externo, mas n√£o instalou ou iniciou o IPFS localmente, ao acessar / webui na interface da web, voc√™ ver√° um erro de conex√£o: <br><br><img src="https://habrastorage.org/webt/bp/l7/jj/bpl7jjxzunvmtl9ffvvkiwphmue.png"><br><br>  O fato √© que o webui, na minha opini√£o, funciona de maneira muito amb√≠gua.  Primeiro, ele tenta se conectar √† API do servidor em que a interface est√° aberta (√© claro, com base no endere√ßo no navegador).  e se n√£o funcionar l√°, ele tentar√° se conectar ao gateway local.  E se voc√™ tiver o IPFS em execu√ß√£o localmente, seu webui funcionar√° bem, apenas voc√™ trabalhar√° com o IPFS local, n√£o externo, embora tenha aberto o webui em um servidor externo.  Em seguida, fa√ßa o upload dos arquivos, mas, por algum motivo, voc√™ n√£o os ver√° assim em um servidor externo ... <br><br>  E se n√£o estiver sendo executado localmente, obteremos um erro de conex√£o.  No nosso caso, o erro provavelmente ocorre devido ao CORS, que tamb√©m √© indicado pelo webui, propondo adicionar uma configura√ß√£o. <br><br><pre> <code class="plaintext hljs">ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin '["http://ip_ :5001", "http://127.0.0.1:5001", "https://webui.ipfs.io"]' ipfs config --json API.HTTPHeaders.Access-Control-Allow-Methods '["PUT", "GET", "POST"]'</code> </pre> <br>  Acabei de registrar um curinga <br><br><pre> <code class="plaintext hljs">ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin '["*"]'</code> </pre> <br>  Cabe√ßalhos adicionados podem ser encontrados no mesmo ~ / .ipfs / config.  No meu caso √© <br><br><pre> <code class="plaintext hljs"> "API": { "HTTPHeaders": { "Access-Control-Allow-Origin": [ "*" ] } },</code> </pre><br>  Reiniciamos o ipfs e vemos que o webui foi conectado com √™xito (pelo menos deveria se voc√™ abriu os gateways para solicita√ß√µes externas, conforme descrito acima). <br><br>  Agora voc√™ pode fazer upload diretamente de pastas e arquivos atrav√©s da interface da Web, bem como criar suas pr√≥prias pastas. <br><br><h3>  Monte o sistema de arquivos FUSE </h3><br>  Este √© um truque bastante interessante. <br><br>  Podemos adicionar arquivos (e tamb√©m pastas) n√£o apenas atrav√©s da interface da web, mas tamb√©m diretamente no terminal, por exemplo <br><br><pre> <code class="plaintext hljs">ipfs add test -r added QmfYuz2gegRZNkDUDVLNa5DXzKmxxxxxxxxxx test/test.txt added QmbnzgRVAP4fL814h5mQttyqk1aURxxxxxxxxxxxx test</code> </pre><br>  O √∫ltimo hash √© o hash da pasta raiz. <br><br>  Usando esse hash, podemos abrir a pasta em qualquer n√≥ ipfs (que pode encontrar nosso n√≥ e obter o conte√∫do), podemos na interface da web na porta 5001 ou 8080 ou localmente atrav√©s de ipfs. <br><br><pre> <code class="plaintext hljs">ipfs ls QmbnzgRVAP4fL814h5mQttyqk1aUxxxxxxxxxxxxx QmfYuz2gegRZNkDUDVLNa5DXzKmKVxxxxxxxxxxxxxx 10 test.txt</code> </pre><br>  Mas voc√™ ainda pode abri-lo como uma pasta normal. <br><br>  Vamos criar duas pastas na raiz e conceder direitos a nosso usu√°rio. <br><br><pre> <code class="plaintext hljs">sudo mkdir /ipfs /ipns sudo chown USERNAME /ipfs /ipns</code> </pre><br>  e reinicie o ipfs com o sinalizador --mount <br><br><pre> <code class="plaintext hljs">ipfs daemon --mount</code> </pre> <br>  <i>Voc√™ pode criar pastas em outros lugares e especificar o caminho para elas atrav√©s do daemon ipfs --mount --mount-ipfs / ipfs_path --mount-ipns / ipns_path</i> <br><br>  Agora a leitura desta pasta √© um tanto incomum. <br><br><pre> <code class="plaintext hljs">ls -la /ipfs ls: reading directory '/ipfs': Operation not permitted total 0</code> </pre><br>  Ou seja, n√£o h√° acesso direto √† raiz desta pasta.  Mas ent√£o voc√™ pode obter o conte√∫do, conhecendo o hash. <br><br><pre> <code class="plaintext hljs">ls -la /ipfs/QmbnzgRVAP4fL814h5mQttyqxxxxxxxxxxxxxxxxx total 0 -r--r--r-- 1 root root 10 Aug 31 07:03 test.txt</code> </pre><br><pre> <code class="plaintext hljs">cat /ipfs/QmbnzgRVAP4fL814h5mQttyqxxxxxxxxxxxxxxxxx/test.txt test test</code> </pre><br>  Al√©m disso, at√© o preenchimento autom√°tico dentro da pasta funciona ao especificar um caminho. <br><br>  Como eu disse acima, existem sutilezas com essa montagem: por padr√£o, as pastas do FUSE montadas s√£o acess√≠veis apenas ao usu√°rio atual (mesmo o root n√£o pode ler essa pasta, sem mencionar outros usu√°rios no sistema).  Se voc√™ deseja tornar essas pastas acess√≠veis a outros usu√°rios, na configura√ß√£o, voc√™ precisa alterar ‚ÄúFuseAllowOther‚Äù: false para ‚ÄúFuseAllowOther‚Äù: true.  Mas isso n√£o √© tudo.  Se voc√™ executar o IPFS como root, tudo estar√° bem.  E se, em nome de um usu√°rio comum (embora sudo), voc√™ receba um erro <br><br><pre> <code class="plaintext hljs">mount helper error: fusermount: option allow_other only allowed if 'user_allow_other' is set in /etc/fuse.conf</code> </pre> <br>  Nesse caso, voc√™ precisa corrigir o /etc/fuse.conf descomentando a linha #user_allow_other. <br><br>  Depois disso, reiniciaremos o ipfs. <br><br><h4>  Problemas conhecidos do FUSE </h4><br>  Mais de uma vez, o problema foi percebido que ap√≥s reiniciar o ipfs com a montagem (ou talvez em outros casos), os pontos de montagem / ipfs e / ipns ficam indispon√≠veis.  N√£o h√° acesso a eles, mas ls -la / ipfs mostra ????  na lista de direitos. <br><br>  Encontrou uma solu√ß√£o: <br><br><pre> <code class="plaintext hljs">fusermount -z -u /ipfs fusermount -z -u /ipns</code> </pre> <br>  Ent√£o reinicie o ipfs. <br><br><h3>  Adicionar servi√ßo </h3><br>  Obviamente, o lan√ßamento no terminal √© adequado apenas para testes prim√°rios.  No modo de combate, o daemon deve iniciar automaticamente quando o sistema iniciar. <br><br>  Em nome do sudo, crie o arquivo /etc/systemd/system/ipfs.service e escreva para ele: <br><br><pre> <code class="plaintext hljs">[Unit] Description=IPFS Daemon After=syslog.target network.target remote-fs.target nss-lookup.target [Service] Type=simple ExecStart=/home/USERNAME/work/bin/ipfs daemon --mount User=USERNAME Restart=always [Install] WantedBy=multi-user.target</code> </pre><br>  USERNAME, √© claro, deve ser substitu√≠do pelo seu usu√°rio (e talvez o caminho completo para o programa ipfs seja diferente para voc√™ (voc√™ deve especificar o caminho completo)). <br><br>  Ativamos o servi√ßo. <br><br><pre> <code class="plaintext hljs">sudo systemctl enable ipfs.service</code> </pre> <br>  Iniciamos o servi√ßo. <br><br><pre> <code class="plaintext hljs">sudo service ipfs start</code> </pre> <br>  Verifique o status do servi√ßo. <br><br><pre> <code class="plaintext hljs">sudo service ipfs status</code> </pre> <br>  Para a pureza do experimento, ser√° poss√≠vel reiniciar o servidor no futuro para verificar se o ipfs √© iniciado com √™xito automaticamente. <br><br><h3>  Adicione as festas que conhecemos </h3><br>  Considere a situa√ß√£o em que temos n√≥s IPFS instalados em um servidor externo e localmente.  Em um servidor externo, adicionamos algum tipo de arquivo e tentamos obt√™-lo atrav√©s do IPFS localmente pelo CID.  O que vai acontecer?  Obviamente, o servidor local provavelmente n√£o sabe nada sobre o servidor externo e simplesmente tentar√° encontrar o arquivo pelo CID "pedindo" a todos os pares de IPFS dispon√≠veis (com os quais ele j√° conseguiu "conhecer").  Esses, por sua vez, perguntar√£o aos outros.  E assim, at√© que o arquivo seja encontrado.  Na verdade, o mesmo acontece quando tentamos obter o arquivo atrav√©s do gateway oficial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ipfs.io.</a>  Se voc√™ tiver sorte, o arquivo ser√° encontrado em alguns segundos.  E, se n√£o, n√£o ser√° encontrado em alguns minutos, o que afeta muito o conforto do trabalho.  Mas sabemos onde esse arquivo aparecer√° pela primeira vez.  Ent√£o, por que n√£o informamos imediatamente ao servidor local "Olhe l√° primeiro"?  Aparentemente, isso pode ser feito. <br><br>  1. V√° para o servidor remoto e procure por ~ / .ipfs / config na configura√ß√£o <br><br><pre> <code class="plaintext hljs">"Identity": { "PeerID": "QmeCWX1DD7HnPSuMHZSh6tFuxxxxxxxxxxxxxxxx",</code> </pre><br>  2. Executamos o status de ipfs do servi√ßo sudo e procuramos entradas do Swarm, por exemplo: <br><br><pre> <code class="plaintext hljs">Swarm announcing /ip4/ip__/tcp/4001</code> </pre> <br>  3. A partir disso, adicionamos o endere√ßo geral no formato "/ ip4 / ip_seu_servidor / tcp / 4001 / ipfs / $ PeerID". <br><br>  4. Para confiabilidade, atrav√©s do nosso webui local, tentaremos adicionar esse endere√ßo aos pares. <br><br><img src="https://habrastorage.org/webt/g5/y2/oh/g5y2ohfylmp2be51tzh0iohq1y8.png"><br><br>  5. Se estiver tudo bem, abra a configura√ß√£o local ~ / .ipfs / config, encontre "Bootstrap" nela: [... <br>  e adicione o endere√ßo recebido primeiro √† matriz. <br><br>  Reinicie o IPFS. <br><br>  Agora adicione o arquivo ao servidor externo e tente solicit√°-lo no local.  Deve voar r√°pido. <br><br>  Mas essa funcionalidade ainda √© inst√°vel.  Pelo que entendi, mesmo se especificarmos o endere√ßo de ponto no Bootstrap, no decorrer do trabalho, o ipfs altera a lista de conex√µes ativas com os pares.  De qualquer forma, uma discuss√£o sobre isso e seus desejos sobre a possibilidade de indicar pares constantes est√° sendo realizada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> e parece <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">que deve</a> adicionar alguma funcionalidade a ipfs@5.0+ <br><br>  Uma lista dos pares atuais pode ser visualizada no webui e no terminal. <br><br><pre> <code class="plaintext hljs">ipfs swarm peers</code> </pre> <br>  L√° e l√°, voc√™ pode adicionar seu banquete manualmente. <br><br><pre> <code class="plaintext hljs">ipfs swarm connect "/ip4/ip__/tcp/4001/ipfs/$PeerID"</code> </pre> <br>  At√© que voc√™ melhore essa funcionalidade, voc√™ pode escrever uma ferramenta para verificar se h√° uma conex√£o com o par desejado e, se n√£o, adicionar uma conex√£o. <br><br><h2>  Racioc√≠nio </h2><br>  Entre aqueles que j√° conhecem o IPFS, h√° argumentos a favor e contra o IPFS.  Em princ√≠pio, o dia antes da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">discuss√£o</a> de ontem me levou a cavar o IPFS novamente.  E com rela√ß√£o √† discuss√£o mencionada acima: n√£o posso dizer que sou totalmente contra alguns dos argumentos acima expressos (discordo apenas do fato de que um programa e meio programadores usam IPFS).  Em geral, os dois t√™m a sua maneira (especialmente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">coment√°rios sobre cheques</a> fazem voc√™ pensar).  Mas se voc√™ deixar de lado a avalia√ß√£o moral e legal, quem far√° uma avalia√ß√£o t√©cnica dessa tecnologia?  Pessoalmente, tenho algum tipo de sentimento interior de que "isso √© necess√°rio, com certeza, tem certas perspectivas".  Mas por que exatamente, n√£o h√° uma reda√ß√£o clara?  Como se voc√™ olhar para as ferramentas centralizadas existentes, em muitos aspectos elas est√£o muito √† frente (estabilidade, velocidade, capacidade de gerenciamento, etc.).  No entanto, tenho um pensamento que parece fazer sentido e que dificilmente pode ser implementado sem esses sistemas descentralizados.  √â claro que realmente mudo de id√©ia, mas a formularia da seguinte maneira: o princ√≠pio de disseminar informa√ß√µes na Internet precisa ser alterado. <br><br>  Eu vou explicar  Se voc√™ pensa assim, agora nossas informa√ß√µes s√£o disseminadas com o princ√≠pio "Espero que a pessoa para quem eu as transferi as proteja e n√£o sejam perdidas ou recebidas por aqueles a quem n√£o foram destinadas".  Por exemplo, √© f√°cil considerar v√°rios servi√ßos de correio, armazenamento em nuvem etc.  E o que temos no final?  No Habr√© Hub, a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Seguran√ßa da informa√ß√£o est√°</a> na primeira linha e quase todos os dias recebemos not√≠cias sobre outro vazamento global.  Em princ√≠pio, tudo o mais interessante est√° listado no artigo &lt;irony&gt; wonderful &lt;/ irony&gt; O <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ver√£o est√° quase no fim.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Quase nenhum dado vazou</a> .  Ou seja, os principais gigantes da Internet est√£o se tornando maiores, est√£o acumulando cada vez mais informa√ß√µes, e esses vazamentos s√£o uma esp√©cie de explos√µes at√¥micas informacionais.  Isso nunca aconteceu, e aqui novamente.  Ao mesmo tempo, embora muitos entendam que existem riscos, eles continuar√£o a confiar em seus dados com empresas de terceiros.  Em primeiro lugar, n√£o h√° muita alternativa; em segundo lugar, eles prometem corrigir todos os buracos e isso nunca mais acontecer√°. <br><br>  Que op√ß√£o eu vejo?  Parece-me que os dados devem ser inicialmente distribu√≠dos abertamente.  Mas abertura neste caso n√£o significa que tudo deve ser f√°cil de ler.  Estou falando da abertura de armazenamento e distribui√ß√£o, mas n√£o da abertura total na leitura.  Presumo que as informa√ß√µes devem ser distribu√≠das com chaves p√∫blicas.  Afinal, o princ√≠pio das chaves p√∫blicas / privadas j√° √© antigo, quase como a Internet.  Se a informa√ß√£o n√£o √© confidencial e foi projetada para uma ampla variedade, ela √© apresentada imediatamente com a chave p√∫blica (mas ainda na forma criptografada, qualquer pessoa pode descriptograf√°-la com a chave existente).  E, se n√£o, √© apresentada sem uma chave p√∫blica, e a pr√≥pria chave √© transmitida √†quele que deve ter acesso a essas informa√ß√µes.  Ao mesmo tempo, quem precisa l√™-lo deve ter apenas uma chave e, onde obter essas informa√ß√µes, n√£o deve pairar realmente - ele apenas as extrai da rede (esse √© o novo princ√≠pio de distribui√ß√£o para o conte√∫do e n√£o para o endere√ßo). <br><br>  Assim, para um ataque em massa, os invasores precisar√£o obter um grande n√∫mero de chaves privadas, e √© improv√°vel que eles possam fazer isso em um s√≥ lugar.  Essa tarefa, a meu ver, √© mais dif√≠cil do que invadir um servi√ßo espec√≠fico. <br><br>  E aqui outro problema se fecha: confirma√ß√£o de autoria.  Agora, na Internet, voc√™ pode encontrar muitas cita√ß√µes escritas por nossos amigos.  Mas onde est√° a garantia de que eles os escreveram?  Agora, se cada uma dessas grava√ß√µes fosse acompanhada por uma assinatura digital, seria muito mais simples.  E n√£o importa onde estejam essas informa√ß√µes, o principal √© a assinatura, que, obviamente, √© dif√≠cil de falsificar. <br><br>  E aqui est√° o que √© interessante aqui: o IPFS j√° possui ferramentas de criptografia (afinal, ele √© constru√≠do sobre a tecnologia blockchain).  A chave privada √© especificada imediatamente na configura√ß√£o. <br><br><pre> <code class="plaintext hljs"> "Identity": { "PeerID": "QmeCWX1DD7HnPSuMHZSh6tFuMxxxxxxxxxxxxxx", "PrivKey": "CAASqAkwggSkAgEAAoIBAQClZedVmj8JkPvT92sGrNIQmofVF3ne8xSWZIGqkm+t9IHNN+/NDI51jA0MRzpBviM3o/c/Nuz30wo95vWToNyWzJlyAISXnUHxnVhvpeJAbaeggQRcFxO9ujO9DH61aqgN1m+JoEplHjtc4KS5 pUEDqamve+xAJO8BWt/LgeRKA70JN4hlsRSghRqNFFwjeuBkT1kB6tZsG3YmvAXJ0o2uye+y+7LMS7jKpwJNJBiFAa/Kuyu3W6PrdOe7SqrXfjOLHQ0uX1oYfcqFIKQsBNj/Fb+GJMiciJUZaAjgHoaZrrf2b/Eii3z0i+QIVG7OypXT3Z9JUS60 KKLfjtJ0nVLjAgMBAAECggEAZqSR5sbdffNSxN2TtsXDa3hq+WwjPp/908M10QQleH/3mcKv98FmGz65zjfZyHjV5C7GPp24e6elgHr3RhGbM55vT5dQscJu7SGng0of2bnzQCEw8nGD18dZWmYJsE4rUsMT3wXxhUU4s8/Zijgq27oLyxKNr9T7 2gxqPCI06VTfMiCL1wBBUP1wHdFmD/YLJwOjV/sVzbsl9HxqzgzlDtfMn/bJodcURFI1sf1e6WO+MyTc3.................</code> + / NDI51jA0MRzpBviM3o / c / Nuz30wo95vWToNyWzJlyAISXnUHxnVhvpeJAbaeggQRcFxO9ujO9DH61aqgN1m + JoEplHjtc4KS5 <code class="plaintext hljs"> "Identity": { "PeerID": "QmeCWX1DD7HnPSuMHZSh6tFuMxxxxxxxxxxxxxx", "PrivKey": "CAASqAkwggSkAgEAAoIBAQClZedVmj8JkPvT92sGrNIQmofVF3ne8xSWZIGqkm+t9IHNN+/NDI51jA0MRzpBviM3o/c/Nuz30wo95vWToNyWzJlyAISXnUHxnVhvpeJAbaeggQRcFxO9ujO9DH61aqgN1m+JoEplHjtc4KS5 pUEDqamve+xAJO8BWt/LgeRKA70JN4hlsRSghRqNFFwjeuBkT1kB6tZsG3YmvAXJ0o2uye+y+7LMS7jKpwJNJBiFAa/Kuyu3W6PrdOe7SqrXfjOLHQ0uX1oYfcqFIKQsBNj/Fb+GJMiciJUZaAjgHoaZrrf2b/Eii3z0i+QIVG7OypXT3Z9JUS60 KKLfjtJ0nVLjAgMBAAECggEAZqSR5sbdffNSxN2TtsXDa3hq+WwjPp/908M10QQleH/3mcKv98FmGz65zjfZyHjV5C7GPp24e6elgHr3RhGbM55vT5dQscJu7SGng0of2bnzQCEw8nGD18dZWmYJsE4rUsMT3wXxhUU4s8/Zijgq27oLyxKNr9T7 2gxqPCI06VTfMiCL1wBBUP1wHdFmD/YLJwOjV/sVzbsl9HxqzgzlDtfMn/bJodcURFI1sf1e6WO+MyTc3.................</code> 7LMS7jKpwJNJBiFAa / Kuyu3W6PrdOe7SqrXfjOLHQ0uX1oYfcqFIKQsBNj / Fb + GJMiciJUZaAjgHoaZrrf2b / Eii3z0i + QIVG7OypXT3Z9JUS60 <code class="plaintext hljs"> "Identity": { "PeerID": "QmeCWX1DD7HnPSuMHZSh6tFuMxxxxxxxxxxxxxx", "PrivKey": "CAASqAkwggSkAgEAAoIBAQClZedVmj8JkPvT92sGrNIQmofVF3ne8xSWZIGqkm+t9IHNN+/NDI51jA0MRzpBviM3o/c/Nuz30wo95vWToNyWzJlyAISXnUHxnVhvpeJAbaeggQRcFxO9ujO9DH61aqgN1m+JoEplHjtc4KS5 pUEDqamve+xAJO8BWt/LgeRKA70JN4hlsRSghRqNFFwjeuBkT1kB6tZsG3YmvAXJ0o2uye+y+7LMS7jKpwJNJBiFAa/Kuyu3W6PrdOe7SqrXfjOLHQ0uX1oYfcqFIKQsBNj/Fb+GJMiciJUZaAjgHoaZrrf2b/Eii3z0i+QIVG7OypXT3Z9JUS60 KKLfjtJ0nVLjAgMBAAECggEAZqSR5sbdffNSxN2TtsXDa3hq+WwjPp/908M10QQleH/3mcKv98FmGz65zjfZyHjV5C7GPp24e6elgHr3RhGbM55vT5dQscJu7SGng0of2bnzQCEw8nGD18dZWmYJsE4rUsMT3wXxhUU4s8/Zijgq27oLyxKNr9T7 2gxqPCI06VTfMiCL1wBBUP1wHdFmD/YLJwOjV/sVzbsl9HxqzgzlDtfMn/bJodcURFI1sf1e6WO+MyTc3.................</code> Zijgq27oLyxKNr9T7 <code class="plaintext hljs"> "Identity": { "PeerID": "QmeCWX1DD7HnPSuMHZSh6tFuMxxxxxxxxxxxxxx", "PrivKey": "CAASqAkwggSkAgEAAoIBAQClZedVmj8JkPvT92sGrNIQmofVF3ne8xSWZIGqkm+t9IHNN+/NDI51jA0MRzpBviM3o/c/Nuz30wo95vWToNyWzJlyAISXnUHxnVhvpeJAbaeggQRcFxO9ujO9DH61aqgN1m+JoEplHjtc4KS5 pUEDqamve+xAJO8BWt/LgeRKA70JN4hlsRSghRqNFFwjeuBkT1kB6tZsG3YmvAXJ0o2uye+y+7LMS7jKpwJNJBiFAa/Kuyu3W6PrdOe7SqrXfjOLHQ0uX1oYfcqFIKQsBNj/Fb+GJMiciJUZaAjgHoaZrrf2b/Eii3z0i+QIVG7OypXT3Z9JUS60 KKLfjtJ0nVLjAgMBAAECggEAZqSR5sbdffNSxN2TtsXDa3hq+WwjPp/908M10QQleH/3mcKv98FmGz65zjfZyHjV5C7GPp24e6elgHr3RhGbM55vT5dQscJu7SGng0of2bnzQCEw8nGD18dZWmYJsE4rUsMT3wXxhUU4s8/Zijgq27oLyxKNr9T7 2gxqPCI06VTfMiCL1wBBUP1wHdFmD/YLJwOjV/sVzbsl9HxqzgzlDtfMn/bJodcURFI1sf1e6WO+MyTc3.................</code> </pre> <br>  N√£o sou especialista em seguran√ßa e n√£o sei exatamente como us√°-lo corretamente, mas parece-me que essas chaves s√£o usadas no n√≠vel de troca entre n√≥s IPFS.  E tamb√©m <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">js-ipfs</a> e projetos de exemplo como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">orbit-db</a> , nos quais o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">orbit.chat</a> funciona.  Ou seja, teoricamente, cada dispositivo (m√≥vel e n√£o apenas) pode ser facilmente equipado com suas pr√≥prias m√°quinas de criptografia e descriptografia.  Nesse caso, resta apenas a todos cuidar de manter suas chaves privadas e todos ser√£o respons√°veis ‚Äã‚Äãpor sua pr√≥pria seguran√ßa, e n√£o ser√£o ref√©ns de outro fator humano em algum gigante da Internet super popular. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt465599/">https://habr.com/ru/post/pt465599/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt465587/index.html">An√°lise: qual √© o mercado de balc√£o e quais transa√ß√µes s√£o feitas l√°</a></li>
<li><a href="../pt465589/index.html">Guia de Inicia√ß√£o R√°pida ao Piloto e ao PoC</a></li>
<li><a href="../pt465591/index.html">Confer√™ncia do PHP Central Europe cancelada devido ao fato de n√£o haver mulheres entre os oradores</a></li>
<li><a href="../pt465595/index.html">5G chega at√© n√≥s?</a></li>
<li><a href="../pt465597/index.html">Aprendendo STM8S Slow Start. Parte 0</a></li>
<li><a href="../pt465601/index.html">Por que voc√™ precisa do DevOps e que s√£o especialistas em DevOps</a></li>
<li><a href="../pt465603/index.html">Cursos vs est√°gio. Como ensinamos midbells na SimbirSoft</a></li>
<li><a href="../pt465605/index.html">O livro ‚ÄúAprendizado por refor√ßo profundo em Python. Gin√°sio OpenAI e TensorFlow para profissionais ¬ª</a></li>
<li><a href="../pt465607/index.html">Entendendo Lean e Agile no desenvolvimento de software</a></li>
<li><a href="../pt465609/index.html">Por que o 1C-Bitrix de 1 de dezembro de 2019 pode se transformar em uma ab√≥bora</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>