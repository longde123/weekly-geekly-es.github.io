<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∏ ü§• ü¶ñ Qual a diferen√ßa entre os componentes funcionais do React e os componentes baseados em classe? üì∂ üòô üë©üèª‚Äç‚öñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Qual a diferen√ßa entre os componentes funcionais do React e os componentes baseados em classe? J√° h√° algum tempo, a resposta tradicional a essa pergun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Qual a diferen√ßa entre os componentes funcionais do React e os componentes baseados em classe?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/444348/">  Qual a diferen√ßa entre os componentes funcionais do React e os componentes baseados em classe?  J√° h√° algum tempo, a resposta tradicional a essa pergunta √©: "O uso de classes permite que voc√™ use um grande n√∫mero de recursos de componentes, por exemplo, estado".  Agora, com o advento dos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ganchos</a> , essa resposta n√£o reflete mais o verdadeiro estado das coisas. <br><br>  Voc√™ pode ter ouvido falar que um desses tipos de componentes tem melhor desempenho que o outro.  Mas qual?  A maioria dos benchmarks que testam isso tem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">falhas</a> , ent√£o eu tiraria <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conclus√µes com</a> base em seus resultados com muita cautela.  O desempenho depende principalmente do que acontece no c√≥digo, e n√£o se componentes funcionais ou componentes baseados em classe s√£o selecionados para implementar determinados recursos.  Nosso estudo mostrou que a diferen√ßa de desempenho entre os diferentes tipos de componentes √© insignificante.  No entanto, deve-se notar que as estrat√©gias de otimiza√ß√£o usadas para trabalhar com elas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">diferem</a> um pouco. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/x-/vn/je/x-vnjetrulggl4xjpo2jmitqjvg.jpeg"></a> <br><br>  De qualquer forma, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o recomendo</a> reescrever componentes existentes usando novas tecnologias, se n√£o houver boas raz√µes para isso, e se voc√™ n√£o se importar de estar entre aqueles que come√ßaram a usar essas tecnologias antes de todos os outros.  Os ganchos ainda s√£o uma nova tecnologia (a mesma que a biblioteca React foi em 2014), e algumas ‚Äúpr√°ticas recomendadas‚Äù para sua aplica√ß√£o ainda n√£o foram inclu√≠das nos manuais do React. <br><a name="habracut"></a><br>  Para onde finalmente chegamos?  Existem diferen√ßas fundamentais entre os componentes funcionais do React e os componentes baseados em classes?  Claro, existem essas diferen√ßas.  Essas s√£o diferen√ßas no modelo mental do uso de tais componentes.  Neste artigo, considerarei a diferen√ßa mais s√©ria.  Existe desde que, em 2015, os componentes funcionais apareceram, mas geralmente √© ignorado.  Consiste no fato de que os componentes funcionais capturam valores renderizados.  Vamos falar sobre o que isso realmente significa. <br><br>  Note-se que este material n√£o constitui uma tentativa de avaliar componentes de diferentes tipos.  Acabei de descrever a diferen√ßa entre os dois modelos de programa√ß√£o no React.  Se voc√™ quiser saber mais sobre o uso de componentes funcionais √† luz das inova√ß√µes, consulte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">esta</a> lista de perguntas e respostas sobre ganchos. <br><br><h2>  <font color="#3AC1EF">Quais s√£o os recursos do c√≥digo de componentes com base em fun√ß√µes e classes?</font> </h2><br>  Considere este componente: <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProfilePage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> showMessage = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {    alert(<span class="hljs-string"><span class="hljs-string">'Followed '</span></span> + props.user);  };  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> handleClick = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {    setTimeout(showMessage, <span class="hljs-number"><span class="hljs-number">3000</span></span>);  };  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (    <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{handleClick}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Follow</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>  ); }</code> </pre> <br>  Ele exibe um bot√£o que, pressionando a fun√ß√£o <code>setTimeout</code> , simula uma solicita√ß√£o de rede e exibe uma caixa de mensagem confirmando a opera√ß√£o.  Por exemplo, se ' <code>props.user</code> <code>'Dan'</code> estiver armazenado em <code>props.user</code> , na janela de mensagens, ap√≥s tr√™s segundos, <code>'Followed Dan'</code> ser√° exibido. <br><br>  Observe que n√£o importa se fun√ß√µes de seta ou declara√ß√µes de fun√ß√£o s√£o usadas aqui.  Uma constru√ß√£o da <code>function handleClick()</code> formul√°rio <code>function handleClick()</code> funcionar√° exatamente da mesma maneira. <br><br>  Como reescrever esse componente como uma classe?  Se voc√™ apenas refizer o c√≥digo examinado, convertendo-o no c√≥digo de um componente com base em uma classe, obter√° o seguinte: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProfilePage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ showMessage = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   alert(<span class="hljs-string"><span class="hljs-string">'Followed '</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.user); }; handleClick = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   setTimeout(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.showMessage, <span class="hljs-number"><span class="hljs-number">3000</span></span>); }; render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.handleClick}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Follow</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; } }</code> </pre> <br>  √â geralmente aceito que dois desses fragmentos de c√≥digo s√£o equivalentes.  E os desenvolvedores geralmente s√£o completamente livres, no curso da refatora√ß√£o de c√≥digo, se transformam em outro, sem pensar nas poss√≠veis consequ√™ncias. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1d3/c7a/341/1d3c7a341ee3fcadc79df00e7d872e4b.gif"></div><br>  <i><font color="#999999">Esses trechos de c√≥digo parecem equivalentes</font></i> <br><br>  No entanto, h√° uma pequena diferen√ßa entre esses trechos de c√≥digo.  D√™ uma olhada neles.  Veja a diferen√ßa?  Por exemplo, eu n√£o a vi imediatamente. <br><br>  Al√©m disso, consideraremos essa diferen√ßa, portanto, para aqueles que desejam entender a ess√™ncia do que est√° acontecendo, como um exemplo pr√°tico desse c√≥digo. <br><br>  Antes de continuarmos, gostaria de enfatizar que a diferen√ßa em quest√£o n√£o tem nada a ver com os ganchos do React.  Nos exemplos anteriores, a prop√≥sito, ganchos nem sequer s√£o usados.  √â sobre a diferen√ßa entre fun√ß√µes e classes no React.  E se voc√™ planeja usar muitos componentes funcionais em seus aplicativos React, conv√©m entender essa diferen√ßa. <br><br>  De fato, ilustraremos a diferen√ßa entre fun√ß√µes e classes pelo exemplo de um erro frequentemente encontrado nos aplicativos React. <br><br><h2>  <font color="#3AC1EF">O erro comum nos aplicativos React.</font> </h2><br>  Abra <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a p√°gina de exemplo</a> que exibe uma lista que permite selecionar perfis de usu√°rio e dois bot√µes <code>Follow</code> exibidos pelos <code>ProfilePageClass</code> e <code>ProfilePageClass</code> , funcionais e baseados na classe, cujo c√≥digo √© mostrado acima. <br><br>  Tente, para cada um desses bot√µes, executar a seguinte sequ√™ncia de a√ß√µes: <br><br><ol><li>  Clique no bot√£o </li><li>  Altere o perfil selecionado antes de decorridos 3 segundos ap√≥s clicar no bot√£o. </li><li>  Leia o texto exibido na caixa de mensagem. </li></ol><br>  Feito isso, voc√™ notar√° os seguintes recursos: <br><br><ul><li>  Quando voc√™ clica no bot√£o formado pelo componente funcional com o perfil <code>Dan</code> selecionado e depois muda para o perfil <code>Sophie</code> , <code>'Followed Dan'</code> ser√° exibido na caixa de mensagem. </li><li>  Se voc√™ fizer o mesmo com um bot√£o formado por um componente com base em uma classe, <code>'Followed Sophie'</code> ser√° exibida. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/386/a44/911/386a449110202d5140d67336a0ade5a0.gif"></div><br>  <i><font color="#999999">Recursos de componentes baseados em classe</font></i> <br><br>  Neste exemplo, o comportamento do componente funcional est√° correto.  Se eu me inscrevi no perfil de algu√©m e depois mudei para outro perfil, meu componente n√£o deve duvidar de qual perfil eu me inscrevi.  Obviamente, a implementa√ß√£o do mecanismo em quest√£o com base no uso de classes cont√©m um erro (a prop√≥sito, voc√™ definitivamente deve se tornar um assinante do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sofia</a> ). <br><br><h2>  <font color="#3AC1EF">Causas de mau funcionamento de componentes com base em classe</font> </h2><br>  Por que um componente baseado em classe se comporta dessa maneira?  Para entender isso, vamos dar uma olhada no m√©todo <code>showMessage</code> em nossa classe: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProfilePage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ showMessage = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   alert(<span class="hljs-string"><span class="hljs-string">'Followed '</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.user); };</code> </pre> <br>  Este m√©todo l√™ dados deste <code>this.props.user</code> .  As propriedades no React s√£o imut√°veis, portanto n√£o s√£o alteradas.  No entanto, <code>this</code> , como sempre, √© uma entidade mut√°vel. <br><br>  De fato, o objetivo de ter <code>this</code> em uma classe reside na capacidade de mudar isso.  A pr√≥pria biblioteca do React realiza periodicamente <code>this</code> muta√ß√µes, o que permite trabalhar com as vers√µes mais recentes do m√©todo <code>render</code> e dos m√©todos do ciclo de vida dos componentes. <br><br>  Como resultado, se o nosso componente for renderizado novamente durante a execu√ß√£o da solicita√ß√£o, o <code>this.props</code> ser√° alterado.  Depois disso, o m√©todo <code>showMessage</code> ler√° o valor do <code>user</code> da entidade de <code>props</code> "muito nova". <br><br>  Isso permite que voc√™ fa√ßa uma observa√ß√£o interessante sobre as interfaces do usu√°rio.  Se dissermos que a interface do usu√°rio, conceitualmente, √© uma fun√ß√£o do estado atual do aplicativo, os manipuladores de eventos fazem parte dos resultados da renderiza√ß√£o - assim como os resultados vis√≠veis da renderiza√ß√£o.  Nossos manipuladores de eventos "pertencem" a uma opera√ß√£o de renderiza√ß√£o espec√≠fica, juntamente com propriedades e estados espec√≠ficos. <br><br>  No entanto, agendar um tempo limite cujo retorno de chamada <code>this.props</code> l√™ viola essa conex√£o.  O <code>showMessage</code> showMessage n√£o <code>showMessage</code> "vinculado" a nenhuma opera√ß√£o de renderiza√ß√£o espec√≠fica; como resultado, "perde" as propriedades corretas.  A leitura de dados <code>this</code> interrompe esta conex√£o. <br><br><h2>  <font color="#3AC1EF">Como, por meio de componentes baseados em classe, resolver o problema?</font> </h2><br>  Imagine que n√£o h√° componentes funcionais no React.  Como ent√£o resolver este problema? <br><br>  Precisamos de algum mecanismo para "restaurar" a conex√£o entre o m√©todo <code>render</code> com as propriedades corretas e o <code>showMessage</code> showMessage, que l√™ dados das propriedades.  Esse mecanismo deve estar localizado em algum lugar onde a ess√™ncia dos <code>props</code> com os dados corretos √© perdida. <br><br>  Uma maneira de fazer isso √© ler <code>this.props</code> antecipadamente no manipulador de eventos e, em seguida, passar explicitamente o que foi lido para a fun√ß√£o de retorno de chamada usada em <code>setTimeout</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProfilePage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ showMessage = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user</span></span></span><span class="hljs-function">) =&gt;</span></span> {   alert(<span class="hljs-string"><span class="hljs-string">'Followed '</span></span> + user); }; handleClick = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> {user} = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props;   setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.showMessage(user), <span class="hljs-number"><span class="hljs-number">3000</span></span>); }; render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.handleClick}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Follow</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; } }</code> </pre> <br>  Essa abordagem est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">funcionando</a> .  Mas as constru√ß√µes adicionais usadas aqui, com o tempo, levar√£o a um aumento no volume do c√≥digo e ao fato de que a probabilidade de erros nele aumentar√°.  E se precisarmos de mais do que uma √∫nica propriedade?  E se tamb√©m precisarmos trabalhar com o estado?  Se o m√©todo <code>showMessage</code> outro m√©todo e esse m√©todo ler <code>this.props.something</code> ou <code>this.state.something</code> , encontraremos o mesmo problema novamente.  E, para resolv√™-lo, ter√≠amos que passar <code>this.props</code> e <code>this.state</code> como argumentos para todos os m√©todos chamados de <code>showMessage</code> . <br><br>  Se for verdade, isso destruir√° todas as conveni√™ncias que o uso de componentes com base em classes oferece.  √â dif√≠cil lembrar que trabalhar com m√©todos dessa maneira √© dif√≠cil, √© dif√≠cil automatizar, como resultado, os desenvolvedores geralmente, em vez de usar m√©todos semelhantes, concordam que h√° erros em seus projetos. <br><br>  Da mesma forma, a incorpora√ß√£o do c√≥digo de <code>alert</code> no <code>handleClick</code> n√£o resolve um problema mais global.  Precisamos estruturar o c√≥digo para que ele possa ser dividido em v√°rios m√©todos, mas tamb√©m para que possamos ler as propriedades e o estado que correspondem √† opera√ß√£o de renderiza√ß√£o associada a uma chamada espec√≠fica.  A prop√≥sito, esse problema nem se aplica exclusivamente ao React.  Voc√™ pode reproduzi-lo em qualquer biblioteca para desenvolver interfaces de usu√°rio, que coloca dados em objetos mut√°veis ‚Äã‚Äãcomo <code>this</code> . <br><br>  Talvez, para resolver esse problema, voc√™ possa vincular m√©todos a <code>this</code> no construtor? <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProfilePage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(props) {   <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props);   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.showMessage = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.showMessage.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleClick = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleClick.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } showMessage() {   alert(<span class="hljs-string"><span class="hljs-string">'Followed '</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.user); } handleClick() {   setTimeout(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.showMessage, <span class="hljs-number"><span class="hljs-number">3000</span></span>); } render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.handleClick}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Follow</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; } }</code> </pre> <br>  Mas isso n√£o resolve o nosso problema.  Lembre-se de que estamos lendo os dados <code>this.props</code> tarde demais, e n√£o na sintaxe usada!  No entanto, esse problema ser√° resolvido se confiarmos no fechamento do JavaScript. <br><br>  Os desenvolvedores geralmente tentam evitar fechamentos, pois n√£o √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">f√°cil</a> pensar em valores que, com o tempo, n√£o podem sofrer muta√ß√µes.  Mas as propriedades do React s√£o imut√°veis!  (Ou, no m√≠nimo, isso √© altamente recomendado).  Isso permite que voc√™ pare de perceber os fechamentos como algo pelo qual o programador pode, como eles dizem, "dar um tiro no pr√≥prio p√©". <br><br>  Isso significa que, se voc√™ "bloquear" as propriedades ou o estado de uma opera√ß√£o de renderiza√ß√£o espec√≠fica no fechamento, sempre poder√° contar com eles para n√£o serem alterados. <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProfilePage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() {   <span class="hljs-comment"><span class="hljs-comment">//  !   const props = this.props;   //    ,      render.   //   -   .   const showMessage = () =&gt; {     alert('Followed ' + props.user);   };   const handleClick = () =&gt; {     setTimeout(showMessage, 3000);   };   return &lt;button onClick={handleClick}&gt;Follow&lt;/button&gt;; } }</span></span></code> </pre> <br>  Como voc√™ pode ver, aqui "capturamos" as propriedades durante a chamada para o m√©todo <code>render</code> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fa4/83d/d56/fa483dd5699aac1350c57591770a49be.gif"></div><br>  <i><font color="#999999">Propriedades capturadas pela chamada de renderiza√ß√£o</font></i> <br><br>  Com essa abordagem, √© garantido que qualquer c√≥digo que esteja no m√©todo de <code>render</code> (incluindo <code>showMessage</code> ) veja as propriedades capturadas durante uma chamada espec√≠fica para esse m√©todo.  Como resultado, o React n√£o ser√° mais capaz de nos impedir de fazer o que precisamos. <br><br>  No m√©todo de <code>render</code> , voc√™ pode descrever quantas fun√ß√µes auxiliares desejar e todas elas poder√£o usar as propriedades e o estado ‚Äúcapturados‚Äù.  Foi assim que o fechamento resolveu nosso problema. <br><br><h2>  <font color="#3AC1EF">An√°lise da solu√ß√£o do problema usando o fechamento</font> </h2><br>  O que acabamos de chegar nos permite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">resolver o problema</a> , mas esse c√≥digo parece estranho.  Por que uma classe √© necess√°ria, se as fun√ß√µes s√£o declaradas dentro do m√©todo <code>render</code> , e n√£o como m√©todos de classe? <br><br>  De fato, podemos simplificar esse c√≥digo se livrando do "shell" na forma de uma classe que o rodeia: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProfilePage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> showMessage = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   alert(<span class="hljs-string"><span class="hljs-string">'Followed '</span></span> + props.user); }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> handleClick = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   setTimeout(showMessage, <span class="hljs-number"><span class="hljs-number">3000</span></span>); }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{handleClick}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Follow</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }</code> </pre> <br>  Aqui, como no exemplo anterior, as propriedades s√£o capturadas na fun√ß√£o, pois o React as transmite a ela como argumento.  Diferente <code>this</code> , o React nunca <code>props</code> objeto de <code>props</code> . <br><br>  Isso se torna um pouco mais √≥bvio se os <code>props</code> destru√≠dos na declara√ß√£o da fun√ß√£o: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProfilePage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ user }</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> showMessage = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   alert(<span class="hljs-string"><span class="hljs-string">'Followed '</span></span> + user); }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> handleClick = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   setTimeout(showMessage, <span class="hljs-number"><span class="hljs-number">3000</span></span>); }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{handleClick}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Follow</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }</code> </pre> <br>  Quando o componente pai <code>ProfilePage</code> com outras propriedades, o React chama a fun√ß√£o <code>ProfilePage</code> .  Mas o manipulador de eventos que j√° foi chamado pertence √† chamada anterior dessa fun√ß√£o, esta chamada usa seu pr√≥prio valor de <code>user</code> e seu pr√≥prio <code>showMessage</code> showMessage, que l√™ esse valor.  Tudo isso permanece intocado. <br><br>  √â por isso que, na vers√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">original</a> do nosso exemplo, ao trabalhar com um componente funcional, selecionar outro perfil depois de clicar no bot√£o correspondente antes da exibi√ß√£o da mensagem n√£o muda nada.  Se um perfil da <code>Sophie</code> foi selecionado antes de clicar no bot√£o, <code>'Followed Sophie'</code> ser√° exibida na janela de mensagem, aconte√ßa o que acontecer. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/843/96c/4b3/84396c4b3982827bead96912a947904e.gif"></div><br>  <i><font color="#999999">Usando um componente funcional</font></i> <br><br>  Esse comportamento est√° correto ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a prop√≥sito,</a> voc√™ tamb√©m pode se inscrever no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sunil</a> ). <br><br>  Agora descobrimos qual √© a grande diferen√ßa entre fun√ß√µes e classes no React.  Como j√° mencionado, estamos falando do fato de que componentes funcionais capturam valores.  Agora vamos falar sobre ganchos. <br><br><h2>  <font color="#3AC1EF">Hooks</font> </h2><br>  Ao usar ganchos, o princ√≠pio de "capturar valores" se estende ao estado.  Considere o seguinte exemplo: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MessageThread</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [message, setMessage] = useState(<span class="hljs-string"><span class="hljs-string">''</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> showMessage = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   alert(<span class="hljs-string"><span class="hljs-string">'You said: '</span></span> + message); }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> handleSendClick = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   setTimeout(showMessage, <span class="hljs-number"><span class="hljs-number">3000</span></span>); }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> handleMessageChange = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) =&gt;</span></span> {   setMessage(e.target.value); }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;&gt;     &lt;input value={message} onChange={handleMessageChange} /&gt;     &lt;button onClick={handleSendClick}&gt;Send&lt;/button&gt;   &lt;/&gt; ); }</code> </pre> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui</a> voc√™ pode experimentar com ele <br><br>  Embora este n√£o seja um exemplo exemplar de uma interface de aplicativo de mensagens, este projeto ilustra a mesma id√©ia: se um usu√°rio enviou uma mensagem, o componente n√£o deve ficar confuso sobre qual mensagem foi enviada.  A constante de <code>message</code> desse componente funcional captura o estado que "pertence" ao componente que torna o navegador o manipulador de cliques do bot√£o que ele chama.  Como resultado, a <code>message</code> armazena o que estava no campo de entrada no momento do clique no bot√£o <code>Send</code> . <br><br><h2>  <font color="#3AC1EF">O problema de capturar propriedades e estados por componentes funcionais</font> </h2><br>  Sabemos que os componentes funcionais no React, por padr√£o, capturam propriedades e estados.  Mas e se precisarmos ler os dados mais recentes de propriedades ou estados que n√£o pertencem a uma chamada de fun√ß√£o espec√≠fica?  E se quisermos ‚Äú <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">l√™-los do futuro</a> ‚Äù? <br><br>  Nos componentes baseados em classe, isso pode ser feito simplesmente referindo-se a <code>this.props</code> ou <code>this.state</code> , pois √© uma entidade mut√°vel.  Sua mudan√ßa est√° envolvida no React.  Os componentes funcionais tamb√©m podem trabalhar com valores mut√°veis ‚Äã‚Äãque s√£o compartilhados por todos os componentes.  Esses valores s√£o chamados <code>ref</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyComponent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ref = useRef(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     `ref.current`. // ... }</span></span></code> </pre> <br>  No entanto, o programador precisa gerenciar esses valores independentemente. <br><br>  A ess√™ncia de <code>ref</code> desempenha o mesmo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">papel</a> que os campos de uma inst√¢ncia de uma classe.  Esta √© uma "sa√≠da de emerg√™ncia" para um mundo imperativo mut√°vel.  Voc√™ pode estar familiarizado com o conceito de refer√™ncias DOM, mas essa ideia √© muito mais geral.  Pode ser comparado a uma caixa na qual um programador pode colocar alguma coisa. <br><br>  Mesmo externamente, uma constru√ß√£o da forma <code>this.something</code> parece uma imagem espelhada da constru√ß√£o de <code>this.something</code> .  Eles s√£o uma representa√ß√£o do mesmo conceito. <br><br>  Por padr√£o, o React n√£o cria entidades <code>ref</code> nos componentes funcionais para os valores mais recentes de propriedade ou estado.  Em muitos casos, voc√™ n√£o precisar√° deles, e sua cria√ß√£o autom√°tica seria uma perda de tempo.  No entanto, o trabalho com eles, se necess√°rio, pode ser organizado por conta pr√≥pria: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MessageThread</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [message, setMessage] = useState(<span class="hljs-string"><span class="hljs-string">''</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> latestMessage = useRef(<span class="hljs-string"><span class="hljs-string">''</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> showMessage = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   alert(<span class="hljs-string"><span class="hljs-string">'You said: '</span></span> + latestMessage.current); }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> handleSendClick = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   setTimeout(showMessage, <span class="hljs-number"><span class="hljs-number">3000</span></span>); }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> handleMessageChange = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) =&gt;</span></span> {   setMessage(e.target.value);   latestMessage.current = e.target.value; };</code> </pre> <br>  Se lermos a <code>message</code> em <code>showMessage</code> , veremos a mensagem que estava no campo no momento do clique no bot√£o <code>Send</code> .  Mas se voc√™ ler <code>latestMessage.current</code> , poder√° obter o valor mais recente - mesmo se continuarmos inserindo texto no campo depois de clicar no bot√£o <code>Send</code> . <br><br>  Voc√™ pode comparar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">este</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">este</a> exemplo para avaliar independentemente a diferen√ßa.  O valor de <code>ref</code> √© uma maneira de "evitar" a uniformidade da renderiza√ß√£o; em alguns casos, pode ser muito √∫til. <br><br>  Em geral, voc√™ deve evitar ler ou escrever valores <code>ref</code> durante o processo de renderiza√ß√£o, porque esses valores s√£o mut√°veis.  N√≥s nos esfor√ßamos para tornar a renderiza√ß√£o previs√≠vel.  No entanto, se precisarmos obter o valor mais recente de algo armazenado nas propriedades ou no estado, atualizar manualmente o valor <code>ref</code> pode ser uma tarefa tediosa.  Pode ser automatizado usando o efeito: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MessageThread</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [message, setMessage] = useState(<span class="hljs-string"><span class="hljs-string">''</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    . const latestMessage = useRef(''); useEffect(() =&gt; {   latestMessage.current = message; }); const showMessage = () =&gt; {   alert('You said: ' + latestMessage.current); };</span></span></code> </pre> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui est√°</a> um exemplo que usa esse c√≥digo <br><br>  Estamos atribuindo um valor dentro do efeito, como resultado, o valor de <code>ref</code> ser√° alterado somente ap√≥s a atualiza√ß√£o do DOM.  Isso garante que nossa muta√ß√£o n√£o interrompa recursos como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Time Slicing e Suspense</a> , que dependem da continuidade das opera√ß√µes de renderiza√ß√£o. <br><br>  Usar o valor <code>ref</code> dessa maneira geralmente n√£o √© necess√°rio.  A captura de propriedades ou estados geralmente parece ser um padr√£o muito melhor do comportamento padr√£o do sistema.  No entanto, isso pode ser conveniente ao trabalhar com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">APIs imperativas</a> , como aquelas que usam intervalos ou assinaturas.  Lembre-se de que voc√™ pode trabalhar dessa maneira com qualquer valor - com propriedades, com vari√°veis ‚Äã‚Äãarmazenadas em state, com todo o objeto <code>props</code> ou mesmo com uma fun√ß√£o. <br><br>  Al√©m disso, esse padr√£o pode ser √∫til para fins de otimiza√ß√£o.  Por exemplo, quando algo como <code>useCallback</code> muda com muita frequ√™ncia.  √â verdade que a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">solu√ß√£o preferida √©</a> frequentemente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">usar um redutor</a> . <br><br><h2>  <font color="#3AC1EF">Sum√°rio</font> </h2><br>  Neste artigo, analisamos um dos padr√µes errados para o uso de componentes baseados em classe e falamos sobre como resolver esse problema com fechamentos.  No entanto, voc√™ pode perceber que, ao tentar otimizar ganchos especificando uma matriz de depend√™ncias, poder√° encontrar erros relacionados a fechamentos obsoletos.  Isso significa que as falhas em si s√£o um problema.  Eu acho que n√£o. <br><br>  Como mostrado acima, os fechamentos, de fato, nos ajudam a resolver pequenos problemas dif√≠ceis de perceber.  Eles tamb√©m facilitam a grava√ß√£o de c√≥digo que funciona corretamente em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">paralelo</a> .  Isso √© poss√≠vel devido ao fato de que dentro do componente as propriedades e o estado corretos com os quais esse componente foi renderizado est√£o "bloqueados". <br><br>  Em todos os casos que vi at√© agora, o problema de "fechamentos obsoletos" ocorreu devido √† suposi√ß√£o err√¥nea de que "fun√ß√µes n√£o mudam" ou que "propriedades sempre permanecem as mesmas".  Espero que, depois de ler este material, voc√™ esteja convencido de que n√£o √© assim. <br><br>  As fun√ß√µes ‚Äúcapturam‚Äù suas propriedades e estado - e, portanto, a compreens√£o de quais fun√ß√µes est√£o em quest√£o tamb√©m √© importante.  Isso n√£o √© um erro, √© um recurso dos componentes funcionais.  As fun√ß√µes n√£o devem ser exclu√≠das da "matriz de depend√™ncias" para <code>useEffect</code> ou <code>useCalback</code> , por exemplo.  (Uma ferramenta adequada para resolver o problema √© geralmente <code>useReducer</code> ou <code>useRef</code> . Falamos sobre isso acima e em breve prepararemos materiais que ser√£o dedicados √† escolha dessa ou daquela abordagem). <br><br>  Se a maior parte do c√≥digo em nossos aplicativos ser√° baseada em componentes funcionais, isso significa que precisamos saber mais sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">otimiza√ß√£o de c√≥digo</a> e quais valores podem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mudar ao</a> longo do tempo. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>     : ¬´  ,   ,    ,   ,    ,         ¬ª. <br><br>          .  ,        React    ,   .     ,    ¬´ ¬ª,     . ,         React  . <br><br>      ,      ,   . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fc3/bdd/f6d/fc3bddf6d4ca14bc77917ac0cfad3608.gif"></div><br> <i><font color="#999999">  React ‚Äî    </font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt444348/">https://habr.com/ru/post/pt444348/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt444338/index.html">Encapsulamento em Python 3</a></li>
<li><a href="../pt444340/index.html">Recursos do uso do tipo de dados Symbol em JavaScript</a></li>
<li><a href="../pt444342/index.html">Desenvolvendo aplicativos JavaScript simples e modernos usando o Webpack e tecnologias avan√ßadas da Web</a></li>
<li><a href="../pt444344/index.html">10 etapas para um projeto Python bem-sucedido</a></li>
<li><a href="../pt444346/index.html">GraphQL e Golang</a></li>
<li><a href="../pt444350/index.html">Por algum motivo, o MVP (produto m√≠nimo vi√°vel) n√£o inicia</a></li>
<li><a href="../pt444352/index.html">Kontur.Kampus: convidamos voc√™ para um campo de estudantes de desenvolvimento industrial gratuito perto de S√£o Petersburgo</a></li>
<li><a href="../pt444356/index.html">Tutorial Reagir Parte 24: Segunda li√ß√£o sobre formul√°rios</a></li>
<li><a href="../pt444358/index.html">Enumer√°vel: como gerar um valor comercial</a></li>
<li><a href="../pt444360/index.html">Injusti√ßa Google Play como uma boa experi√™ncia de vida</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>