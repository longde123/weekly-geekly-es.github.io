<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ธ ๐ผ๏ธ ๐ ููุชุจ ูุบุฉ ุงูุจุฑูุฌุฉ ูุฏููุง ุ ุงูุฌุฒุก 1: ููุชุจ ูุบุฉ VM ๐ฉ๐ปโโ๏ธ ๐๐ป ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏูุฉ 
 ููู ุฌูุฏ ููุฌููุน habrachitateli! 

 ูุฐูู ุ ุฑุจูุง ูุฌุฏุฑ ุจูุง ุงูููู ุฃู ุงููุฏู ูู ุนููู ุ ุงูุฐู ุณูุชู ุนูู ุฃุณุงุณู ูุชุงุจุฉ ุนุฏุฏ ูู ุงูุชูุงุซูู ุ ูู ุงููุถู ูุฏูุงู ูู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุชุจ ูุบุฉ ุงูุจุฑูุฌุฉ ูุฏููุง ุ ุงูุฌุฒุก 1: ููุชุจ ูุบุฉ VM</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435202/" style=";text-align:right;direction:rtl"><h3 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h3><br>  ููู ุฌูุฏ ููุฌููุน habrachitateli! <br><br>  ูุฐูู ุ ุฑุจูุง ูุฌุฏุฑ ุจูุง ุงูููู ุฃู ุงููุฏู ูู ุนููู ุ ุงูุฐู ุณูุชู ุนูู ุฃุณุงุณู ูุชุงุจุฉ ุนุฏุฏ ูู ุงูุชูุงุซูู ุ ูู ุงููุถู ูุฏูุงู ูู ุฅูุดุงุก YP ุชุนูู ุจูุงูู ุทุงูุชูุง ูู ุงูุตูุฑ ููู ุซู ุชุจุงุฏู ูุนุงุฑูู ูุฃูุถู ุงูููุงุฑุณุงุช ูุงูุฎุจุฑุงุช ูุน ุงูููุชููู. <br><br>  ุณูู ุฃุตู ุฅูุดุงุก ุงููุบุฉ ุงูุชู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุตูุชูุง ุณุงุจููุง ููุง</a> . <br><br>  ููุฏ ุงูุชู ุจุงููุซูุฑูู ูุฃุซุงุฑ ููุงูุดุฉ ุณุงุฎูุฉ ูู ุงูุชุนูููุงุช.  ูุฐูู - ุงูููุถูุน ูุซูุฑ ูููุซูุฑูู. <br><br>  ุฃุนุชูุฏ ุฃู ุงูุฃูุฑ ูุณุชุญู ูุดุฑ ูุนูููุงุช ุญูู ุงููุดุฑูุน ุนูู ุงูููุฑ: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููููุน</a> (ุณูุชู ููุคู ุจุงููุซุงุฆู ูุงุญููุง). <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุณุชูุฏุน</a> <br><br>  ูููุณ ุงููุดุฑูุน ุจููุณู ูุฑุคูุฉ ูู ุดูุก ูู ุงูุนูู ุ ูู ุงูุฃูุถู ุชูุฒูู ุงููุณุชูุฏุน ูุชุดุบูู ูู ุดูุก ูู ูุฌูุฏ bin.  ูู ุงูุฅุตุฏุงุฑ ุ ุฃูุง ูุณุช ูู ุนุฌูุฉ ูู ุฃูุฑู ูุชุญููู ุฃุญุฏุซ ุฅุตุฏุงุฑุงุช ุงููุบุฉ ูููุช ุงูุชุดุบูู ุ ูุฃู  ูู ุจุนุถ ุงูุฃุญูุงู ูููู ุงูุฃูุฑ ูุณูููุง ุฌุฏูุง ุจุงููุณุจุฉ ูู ููููุงู ุจุฐูู. <br><br>  ูููููู ุฑูุฒ ูู C / C ++ ููุงุฆู ุจุงุณูุงู.  ููุฏ ูุชุจุช ุงููุดุฑูุน ุนูู FPC ููุฐ ุฐูู ุงูุญูู  ูู ุฑุฃูู ุ ูุฐู ุงููุบุฉ ุฃุจุณุท ุจูุซูุฑ ูุฃูุซุฑ ููุงุกูุฉ ูููุชุงุจุฉ ูู ูุฐุง ุงููุจูู.  ูุงู ุงูุนุงูู ุงูุญุงุณู ุงูุซุงูู ูู ุฃู FPC ูุฏุนู ุนุฏุฏูุง ูุจูุฑูุง ูู ุงูููุตุงุช ุงููุณุชูุฏูุฉ ุ ูููููู ุฅุนุงุฏุฉ ุฅูุดุงุก ุงููุดุฑูุน ูููุธุงู ุงูุฃุณุงุณู ุงููุฑุบูุจ ููู ุจุฃูู ูุฏุฑ ูู ุงูุชุนุฏููุงุช.  ุฅุฐุง ููุช ูุง ุฃุญุจ ูุงุฆู Pascal ูุณุจุจ ูุง ุ ููุง ุชุณุฑุน ูู ุฅุบูุงู ุงูููุดูุฑ ูุงูุฑูุถ ูุฅููุงุก ุงูุญุฌุงุฑุฉ ุนูู ุงูุชุนููู.  ูุฐู ุงููุบุฉ ุฌูููุฉ ุฌุฏุง ูุจุฏูููุฉ ุ ููููู ูู ุฃูุฏู ุงููุซูุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.  ููุท ูุง ุชุญุชุงุฌู. <br><br>  ูุฐูู ุ ุฑุจูุง ุณุฃุจุฏุฃ ูุตุชู. <br><a name="habracut"></a><br><h3 style=";text-align:right;direction:rtl">  ูุถุนูุง ุงูุฃูุฏุงู </h3><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุญุชุงุฌ ุฃู ูุดุฑูุน ุฅูู ุฃูุฏุงูู ููุนุงุฑูู ุงูุชูููุฏูุฉ ุ ูุงูุชู ูุฌุจ ุชูููุฐูุง ูู ุงููุณุชูุจู.  ูู ุงูุถุฑูุฑู ุฃู ุชูุฑุฑ ููุฏููุง ููุน ุงููุบุฉ ุงูุชู ุณูุชู ุฅูุดุงุคูุง ูู ุฃุฌู ูุชุงุจุฉ VM ุงูุฃุณุงุณู ููุง. <br><br>  ูููุง ููู ุงูููุงุท ุงูุฑุฆูุณูุฉ ุงูุชู ุญุฏุฏุช ุงูุชุทููุฑ ุงูุฅุถุงูู ูู VM ุงูุฎุงุต ุจู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุชุงุจุฉ ุงูุฏููุงููููุฉ ูููุน ุงูุตุจ.  ูุฑุฑุช ุชูุธูู ุฏุนููุง ูู ูุฑุญูุฉ ุชุทููุฑ ุฌูุงุฒ VM. </li><li style=";text-align:right;direction:rtl">  ุฏุนู ุชุนุฏุฏ ุงูุนูููุงุช.  ููุช ุจุชุถููู ูุฐุง ุงูุนูุตุฑ ูู ูุฐู ุงููุงุฆูุฉ ููุฏููุง ูู ุฃุฌู ุชุตููู ุจููุฉ VM ุจุดูู ุตุญูุญ ูุชูุธูู ุฏุนู ุชุนุฏุฏ ุงูุนูููุงุช ูู ุงููุณุชูู ุงูุฃุณุงุณู ูู VM ุ ูููุณ ูุน ุนูุงุฒุงุช ูู ููุช ูุงุญู. </li><li style=";text-align:right;direction:rtl">  ุชุตุฏูุฑ ุงูุทุฑู ุงูุฎุงุฑุฌูุฉ.  ุจุฏูู ูุฐุง ุ ุณุชููู ุงููุบุฉ ุนุฏููุฉ ุงููุงุฆุฏุฉ.  ูุง ูู ูุชู ุชุถูููู ูู ุฃู ูุดุฑูุน. </li><li style=";text-align:right;direction:rtl">  ุชุฌููุน ููุบุฉ (ูู ููู ุชูููุฐู ูููุฑุฏ ูุฌุฑุฏ).  ุฌูุนุช ุฌุฒุฆูุง ุฃู ูุณุฑุชุ  ุงููุซูุฑ ูุนุชูุฏ ุนูู ูุฐุง. </li><li style=";text-align:right;direction:rtl">  ุงูุนูุงุฑุฉ VM ุงูุนุงูุฉ.  ูู ุณูููู ุงูููุฏุณ ุฃู ุงูุชุณุฌูู ูุฏููุง VMุ  ุญุงููุช ุชูููุฐ ูุฐุง ูุฐุงู.  ุงุฎุชุฑุช VM ููุฏุณุฉ ููุญุตูู ุนูู ุงูุฏุนู. </li><li style=";text-align:right;direction:rtl">  ููู ุชุฑู ุงูุนูู ูุน ุงููุชุบูุฑุงุช ูุงููุตูููุงุช ูุงูููุงููุ  ุฃูุง ุดุฎุตูุงู ุ ูู ุชูู ุงููุญุธุฉ ุ ุฃุฑุฏุช ุชูููุฐ ูุบุฉ ูุฑุชุจุท ุจูุง ูู ุดูุก ุชูุฑูุจูุง ุจูุคุดุฑุงุช ุถูููุฉ ุ ูุฃู ูุซู ูุฐุง ุงูููุฌ ูู ุดุฃูู ุฃู ูููุฐ ุงูุฐุงูุฑุฉ ุฅูู ุญุฏ ูุจูุฑ ููุจุณุท ุญูุงุฉ ุงููุทูุฑ.  ุฅุฐุง ุณูุญูุง ุจุชูุฑูุฑ ุดูุก ูุจูุฑ ุฅูู ุงูุฃุณุงููุจ ุ ูุณูุชู ุชููุงุฆููุง ููู ูุคุดุฑ ุฅูู ุฐูู ุงูุญุฌู ุงููุจูุฑ ููุท. </li></ul><br>  ูุฐูู ุ ููุฏ ุงุฎุชุฑุช ุงูุฃููููุงุช ุงููุฐููุฑุฉ ุฃุนูุงู ูุจุฏุฃุช ูู ุชุทุจูู ุงูุขูุฉ ุงูุงูุชุฑุงุถูุฉ ููุบุฉ.  ูุฐุง ุบุฑูุจ ุจุงูุทุจุน ุ ุนุงุฏุฉ ูุง ูุชู ูุชุงุจุฉ ุฃู ูุญูููู / ูุชุฑุฌููู ุฃููุงู ุ ุซู VMs.  ุญุณููุง ุ ููุฏ ุจุฏุฃุช ูู ุชุทููุฑ ุงููุดุฑูุน ุจูุฐุง ุงูุชุฑุชูุจ ูุณุฃูุถุญู ุฃูุซุฑ ุจุชุฑุชูุจ ุชุทููุฑู. <br><br>  ูุฌุจ ุฃู ุฃููู ุนูู ุงูููุฑ ุฃููู ุงุชุตูุช ุจู VM ุจุฃูุตู ุฏุฑุฌุฉ ููููุฉ - SVM (ุงูุฌูุงุฒ ุงูุธุงูุฑู ุงููุงุฆู ุนูู ุงูููุฏุณ). <br><br><h3 style=";text-align:right;direction:rtl">  ููุจุฏุฃ ุจุชุทุจูู ุงููุฆุฉ ุงููุชุบูุฑุฉ </h3><br>  ูู ุงูุจุฏุงูุฉ ุ ุงุณุชุฎุฏูุช ุจุจุณุงุทุฉ ููุนูุง ูุฎุชูููุง ุ ูุฃูู ุฃุจุณุท ูุฃุณุฑุน.  ููุฏ ูุงู ุนูุงุฒูุง ุ ูููู ุฏุนู ุงููุดุฑูุน ูุณูุญ ูู ุจุชูููุฐ ุงูุฅุตุฏุงุฑ ุงูุฃูู ูู VM ูุงููุบุฉ ุจุณุฑุนุฉ.  ุจุนุฏ ุฐูู ุฌูุณุช ูู ุงูููุฏ ููุชุจุช ุชุทุจูู "ุงูุจุฏูู" ุงูุฎุงุต ุจู.  ูู ุงูุฌููุฑ ุ ุชุญุชุงุฌ ุฅูู ูุชุงุจุฉ ูุตู ูุฎุฒู ูุคุดุฑูุง ุฅูู ูููุฉ ูู ุงูุฐุงูุฑุฉ ุ ูู <code>null/cardinal/int64/double/string/array</code> ุชููู <code>null/cardinal/int64/double/string/array</code> .  ูููู ูููุฑุก ุงุณุชุฎุฏุงู ูุชุงุจุฉ ุงูุญุงูุงุช ุ ููููู ุงุนุชูุฏุช ุฃูู ุณูููู ูู ุงูุฃูุถู ุชูููุฐ ุงูุทุฑููุฉ ุงูุชู ููุช ุจุชูููุฐูุง. <br><br>  ูุจู ุงูุจุฏุก ูู ูุชุงุจุฉ ุดูุฑุฉ ุงููุตู ุงูุฏุฑุงุณู ุ ูุฑุฑุช ุฃู ุฃุถุน ุนูู ุงูููุฑ ุงูุชูุฌูู {$ H +} ูู ุฑุฃุณ ุงููุญุฏุฉ ุงูููุทูุฉ ููุญุตูู ุนูู ุฏุนู ุฃูุซุฑ ูุฑููุฉ ููุณูุงุณู ูู ุงููุบุฉ ุงููุณุชูุจููุฉ. <br><blockquote style=";text-align:right;direction:rtl">  ุต.  ุจุงููุณุจุฉ ูุฃููุฆู ุงูุฐูู ูุฏ ูุง ูุฏุฑููู ุงููุฑู ุจูู ุฃูุถุงุน H- ู H + FPC. <br><br>  ุนูุฏ ุชุฌููุน ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ุงููุถุน H ุ ุณูุชู ุนุฑุถ ุงูุณูุงุณู ูุตููู ูู ุงูุฃุญุฑู.  ุนูุฏูุง H + - ููุคุดุฑ ุฅูู ูุทุนุฉ ูู ุงูุฐุงูุฑุฉ.  ูู ุงูุญุงูุฉ ุงูุฃููู ุ ุณูุชู ุชุญุฏูุฏ ุงูุฎุทูุท ูุจุฏุฆููุง ุจุทูููุง ูุชูุชุตุฑ ุงูุชุฑุงุถููุง ุนูู 256 ุญุฑููุง.  ูู ุงูุญุงูุฉ ุงูุซุงููุฉ ุ ุณูุชู ุชูุณูุน ุงูุฃุณุทุฑ ุจุดูู ุฏููุงูููู ููููู ุญุดุฑ ุงููุฒูุฏ ูู ุงูุฃุญุฑู ูููุง.  ุณูู ูุนูููู ุฃุจุทุฃ ููููุงู ุ ูููู ุฃูุซุฑ ูุธูููุฉ.  ุจุงุณุชุฎุฏุงู H + ุ ููููู ุฃูุถูุง ุชุนุฑูู ุงูุณูุงุณู ูุตููู ูู ุงูุฃุญุฑู ุ ุนูู ุณุจูู ุงููุซุงู ุจูุฐู ุงูุทุฑููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s:<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>[<span class="hljs-number"><span class="hljs-number">256</span></span>];</code> </pre></blockquote>  ูุฐูู ุ ุจุงููุณุจุฉ ูููุจุชุฏุฆูู ุ ุณูู ูุนูู ุนู Enum ููุนูุง ุ ูุงูุฐู ุณูุณุชุฎุฏูู ูุนูู ูุญุฏุฏ ูุชุญุฏูุฏ ููุน ุงูุจูุงูุงุช ุญุณุจ ุงููุคุดุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> TSVMType = (svmtNull, svmtWord, svmtInt, svmtReal, svmtStr, svmtArr);</code> </pre><br>  ุจุนุฏ ุฐูู ุ ูุตู ุงููููู ุงูุฃุณุงุณู ูููุนูุง ุงููุชุบูุฑ ูุจุนุถ ุงูุทุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="delphi hljs"> TSVMMem = <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> m_val: pointer; m_type: TSVMType; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constructor</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Create</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">destructor</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Destroy</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Clear</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constructor</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TSVMMem</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Create</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> m_val := <span class="hljs-keyword"><span class="hljs-keyword">nil</span></span>; m_type := svmtNull; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">destructor</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TSVMMem</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Destroy</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> Clear; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TSVMMem</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Clear</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> m_type <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> svmtNull: <span class="hljs-comment"><span class="hljs-comment">{ nop }</span></span>; svmtWord: Dispose(PCardinal(m_val)); svmtInt: Dispose(PInt64(m_val)); svmtReal: Dispose(PDouble(m_val)); svmtStr: Dispose(PString(m_val)); svmtArr: <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> SetLength(PMemArray(m_val)^, <span class="hljs-number"><span class="hljs-number">0</span></span>); Dispose(PMemArray(m_val)); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Error(reVarInvalidOp); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br>  ูุง ูุฑุซ ุงููุตู ูู ุฃู ุดูุก ุ ูุฐูู ูููู ุญุฐู ุงูููุงููุงุช ุงูููุฑูุซุฉ ูู ุงูููุดุฆ ูุงููุฏููุฑ.  ุณุฃูุชุจู ุฅูู ุงูุชูุฌูู ุงููุถูู.  ูู ุงูุฃูุถู ุฅุถุงูุฉ {$ inline on} ุฅูู ุฑุฃุณ ุงูููู ุ ุจุงูุชุฃููุฏ.  ุงุณุชุฎุฏุงูู ุงููุดุท ูู VMs ุฒุงุฏ ุจุดูู ูุจูุฑ ูู ุงูุฅูุชุงุฌูุฉ (ููุบุงุจุงูุช ูู ููุงู ูุง ุจูุณุจุฉ 15-20 ูช!).  ููู ุชุฎุจุฑ ุงููุชุฑุฌู ุฃู ุฃูุถู ุทุฑููุฉ ูุถููุฉ ูู ููุงู ุงูุงุญุชุฌุงุฌ ุจูุง.  ุณูููู ุฑูุฒ ุงูุฅุฎุฑุงุฌ ุฃูุจุฑ ููููุงู ูู ุงูููุงูุฉ ุ ููููู ุณูุนูู ุจุดูู ุฃุณุฑุน.  ูู ูุฐู ุงูุญุงูุฉ ุ ุจุงุณุชุฎุฏุงู ุงููุถููุฉ ูุณุชุญุณู. <br><br>  ุญุณููุง ุ ูู ูุฐู ุงููุฑุญูุฉ ุ ุบุณููุง ุฃุณุงุณ ูุฆุชูุง.  ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ูุตู ุนุฏุฏ ูู ุงููุณุชูุทููู ูุงูุนุจุงุฑุงุช (ูุงุถุนุฉ ู getter) ูู ูุตููุง. <br><br>  ุชุชูุซู ุงููููุฉ ูู ูุชุงุจุฉ ุทุฑููุชูู ุชุณูุญุงู ูู ุจุงูุญุตูู ุนูู ุงูููู ูู ุตููุง ูู ููุช ูุงุญู. <br><br>  ุฃููุงู ุ ุฏุนููุง ูุชุนุฑู ุนูู ุชุนููู ูููุฉ ููุฆุชูุง.  ุฃููุงู ุ ููููู ูุชุงุจุฉ ุฃุฏุงุฉ ุถุจุท ูุนููุฉ ุ ููู ุซู ุ ุจุงููุณุจุฉ ูุฃููุงุน ุงูุจูุงูุงุช ุงููุฑุฏูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TSVMMem</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetV</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value; t:TSVMType)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m_val &lt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (m_type = t) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> svmtWord: PCardinal(m_val)^ := Cardinal(value); svmtInt: PInt64(m_val)^ := Int64(value); svmtReal: PDouble(m_val)^ := Double(value); svmtStr: PString(m_val)^ := <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>(value); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> m_val &lt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">nil</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> FreeMem(m_val); m_type := t; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> svmtWord: <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> New(PCardinal(m_val)); PCardinal(m_val)^ := Cardinal(value); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; svmtInt: <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> New(PInt64(m_val)); PInt64(m_val)^ := Int64(value); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; svmtReal: <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> New(PDouble(m_val)); PDouble(m_val)^ := Double(value); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; svmtStr: <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> New(PString(m_val)); PString(m_val)^ := <span class="hljs-keyword"><span class="hljs-keyword">String</span></span>(value); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Error(reVarTypeCast); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TSVMMem</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetW</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(value:cardinal)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m_val &lt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (m_type = svmtWord) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> PCardinal(m_val)^ := value <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> m_val &lt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">nil</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> FreeMem(m_val); m_type := svmtWord; New(PCardinal(m_val)); PCardinal(m_val)^ := value; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br>  ุงูุขู ููููู ูุชุงุจุฉ ุฑูุฒ ูุจุถุน ุฑุณุงุฆู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TSVMMem</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetW</span></span></span><span class="hljs-function">:</span></span>cardinal; <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> Result := <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> m_type <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> svmtWord: Result := PCardinal(m_val)^; svmtInt: Result := PInt64(m_val)^; svmtReal: Result := Trunc(PDouble(m_val)^); svmtStr: Result := StrToQWord(PString(m_val)^); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Error(reVarTypeCast); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br>  ุญุณููุง ุ ููุฏ ูุถูุช ููุชูุง ุทูููุงู ูู ุงูุชุญุฏูู ูู ุจูุฆุฉ ุชุทููุฑ ูุชูุงููุฉ (IDE) ููุชุงุจุฉ ุฑูุฒ ุจุญูุงุณ ูููุณุชูุทููู ูุงูุฃูุฑุงุฏ ุ ููุงุฌู ูููุฉ ุชูููุฐ ุงูุฏุนู ูููุน ุนูููุงุชูุง ุงูุฑูุงุถูุฉ ูุงูููุทููุฉ.  ููุซุงู ุ ุณุฃูุฏู ุชูููุฐ ุนูููุฉ ุงูุฅุถุงูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TSVMMem</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OpAdd</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(m:TSVMMem)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> m_type <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> svmtWord: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> m.m_type <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> svmtWord: SetW(GetW + m.GetW); svmtInt: SetI(GetW + m.GetI); svmtReal: SetD(GetW + m.GetD); svmtStr: SetD(GetW + StrToFloat(m.GetS)); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Error(reVarInvalidOp); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; svmtInt: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> m.m_type <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> svmtWord: SetI(GetI + m.GetW); svmtInt: SetI(GetI + m.GetI); svmtReal: SetD(GetI + m.GetD); svmtStr: SetD(GetI + StrToFloat(m.GetS)); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Error(reVarInvalidOp); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; svmtReal: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> m.m_type <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> svmtWord: SetD(GetD + m.GetW); svmtInt: SetD(GetD + m.GetI); svmtReal: SetD(GetD + m.GetD); svmtStr: SetD(GetD + StrToFloat(m.GetS)); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Error(reVarInvalidOp); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; svmtStr: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> m.m_type <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> svmtWord: SetS(GetS + IntToStr(m.GetW)); svmtInt: SetS(GetS + IntToStr(m.GetI)); svmtReal: SetS(GetS + FloatToStr(m.GetD)); svmtStr: SetS(GetS + m.GetS); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Error(reVarInvalidOp); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Error(reVarInvalidOp); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br>  ูู ุดูุก ุจุณูุท.  ูููู ูุตู ุนูููุงุช ุฃุฎุฑู ุจุทุฑููุฉ ููุงุซูุฉ ุ ูุงูุขู ุฃุตุจุญ ูุตููุง ุฌุงูุฒูุง. <br>  ุจุงููุณุจุฉ ููุตูุงุฆู ุ ุจุงูุทุจุน ุ ูุง ุชุฒุงู ุชุญุชุงุฌ ุฅูู ุทุฑููุชูู ุ ูุซุงู ุนูู ุงูุญุตูู ุนูู ุนูุตุฑ ุญุณุจ ุงูููุฑุณ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TSVMMem</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ArrGet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">index</span></span></span></span><span class="hljs-function"><span class="hljs-params">: cardinal; grabber:PGrabber)</span></span></span><span class="hljs-function">:</span></span> pointer; <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> Result := <span class="hljs-keyword"><span class="hljs-keyword">nil</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> m_type <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> svmtArr: Result := PMemArray(m_val)^[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>]; svmtStr: <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> Result := TSVMMem.CreateFW(Ord(PString(m_val)^[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>])); grabber^.AddTask(Result); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Error(reInvalidOp); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br>  ุนุธูู  ุงูุขู ูููููุง ุงููุถู ูุฏูุง. <br><br><h3 style=";text-align:right;direction:rtl">  ูุญู ูุฏุฑู ูููุฉ </h3><br>  ุจุนุฏ ูุชุฑุฉ ูู ุงูููุช ุ ุฌุฆุช ุฅูู ูุซู ูุฐู ุงูุฃููุงุฑ.  ูุฌุจ ุฃู ุชููู ุงูููุฏุณ ุซุงุจุชุฉ (ููุณุฑุนุฉ) ูุฏููุงููููุฉ (ูููุฑููุฉ) ูู ููุณ ุงูููุช. <br><br>  ูุฐูู ุ ูุชู ุชูููุฐ ุงูููุฏุณ ูู ูุชู.  ุฃู  ููู ูุฌุจ ุฃู ุชุนูู - ูู ุงูุจุฏุงูุฉ ุ ูููู ููุตูููุฉ ุงูููุฏุณ ุญุฌู ูุนูู (ูุฑุฑุช ุถุจุท ุญุฌู ุงููุชูุฉ ุนูู 256 ุนูุตุฑูุง ุจุญูุซ ุชููู ุฌูููุฉ ูููุณุช ุตุบูุฑุฉ).  ูููุง ูุฐูู ุ ูุชู ุชุถููู ุนุฏุงุฏ ูุน ุงูุตููู ุ ููุง ูุฏู ุนูู ุงูุฌุฒุก ุงูุนููู ุงูุญุงูู ูู ุงูููุฏุณ.  ุชุนุฏ ุฅุนุงุฏุฉ ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุนูููุฉ ุทูููุฉ ุฌุฏูุง ุ ูุงูุชู ูููู ุชูููุฐูุง ุจุดูู ุฃูู ุชูุฑุงุฑูุง.  ุฅุฐุง ุชู ุฏูุน ุงููุฒูุฏ ูู ุงูููู ุฅูู ุงูููุฏุณ ุ ููููู ุฏุงุฆููุง ุชูุณูุน ุญุฌููุง ุฅูู ุญุฌู ูุชูุฉ ุฃุฎุฑู. <br><br>  ุฃุญูู ุชูููุฐ ุงูููุฏุณ ุจุงููุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> TStack = <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> items: <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> pointer; size, i_pos: cardinal; parent_vm: pointer; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vm: pointer)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p: pointer)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">peek</span></span></span><span class="hljs-function">:</span></span> pointer; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pop</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">popv</span></span></span><span class="hljs-function">:</span></span> pointer; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">swp</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drop</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; PStack = ^TStack; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TStack</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vm: pointer)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> SetLength(items, StackBlockSize); i_pos := <span class="hljs-number"><span class="hljs-number">0</span></span>; size := StackBlockSize; parent_vm := vm; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TStack</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p: pointer)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> items[i_pos] := p; inc(i_pos); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> i_pos &gt;= size <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> size := size + StackBlockSize; SetLength(items, size) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TStack</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">peek</span></span></span><span class="hljs-function">:</span></span> pointer; <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> Result := items[i_pos - <span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TStack</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pop</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> dec(i_pos); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> size - i_pos &gt; StackBlockSize <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> size := size - StackBlockSize; SetLength(items, size); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TStack</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">popv</span></span></span><span class="hljs-function">:</span></span> pointer; <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> dec(i_pos); Result := items[i_pos]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> size - i_pos &gt; StackBlockSize <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> size := size - StackBlockSize; SetLength(items, size); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TStack</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">swp</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p: pointer; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> p := items[i_pos - <span class="hljs-number"><span class="hljs-number">2</span></span>]; items[i_pos - <span class="hljs-number"><span class="hljs-number">2</span></span>] := items[i_pos - <span class="hljs-number"><span class="hljs-number">1</span></span>]; items[i_pos - <span class="hljs-number"><span class="hljs-number">1</span></span>] := p; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TStack</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drop</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> SetLength(items, StackBlockSize); size := StackBlockSize; i_pos := <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br>  ูู ุงูุทุฑู ุงูุฎุงุฑุฌูุฉ ุ ุณูููู VM ุจุชูุฑูุฑ ูุคุดุฑ ุฅูู ุงูููุฏุณ ุจุญูุซ ูููููู ุฃุฎุฐ ุงููุณุงุฆุท ุงููุงุฒูุฉ ูู ููุงู.  ุชูุช ุฅุถุงูุฉ ูุคุดุฑ ุฅูู ุฏูู VM ูุงุญููุง ุ ุจุญูุซ ูููู ุชูููุฐ ููุงููุงุช ุฑุฏ ุงูุงุชุตุงู ูู ุงูุทุฑู ุงูุฎุงุฑุฌูุฉ ุ ูุจุตูุฉ ุนุงูุฉ ุ ูููู ุงููุฒูุฏ ูู ุงูุทุงูุฉ ุนุจุฑ ุฃุณุงููุจ VM. <br><br>  ูุฐูู ุ ููู ุชุนุฑูุช ุนูู ููููุฉ ุชุฑุชูุจ ุงูููุฏุณ.  ูุชู ุชุฑุชูุจ ููุฏุณ ุฑุฏ ุงูุงุชุตุงู ุจููุณ ุงูุทุฑููุฉ ุ ูู ุฃุฌู ุจุณุงุทุฉ ูุณูููุฉ ุนูููุงุช ุงูููุงููุฉ ูุงูุนูุฏุฉ ูููุฏุณ ุฌุงูุน ุงูููุงูุฉ.  ุงูุดูุก ุงููุญูุฏ ูู ุงูุฃุญุฌุงู ุงูุฃุฎุฑู ูููุชู. <br><br><h3 style=";text-align:right;direction:rtl">  ูุชุญุฏุซ ุนู ุงูููุงูุฉ </h3><br>  ุนุงุฏุฉ ูุง ูููู ูุซูุฑูุง ุ ูุซูุฑูุง.  ูุชุญุชุงุฌ ุฅูู ุงูููุงู ุจุดูุก ูุง ูุนูุง. <br><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุฃุฑูุฏ ุฃู ุฃุชุญุฏุซ ุนู ููููุฉ ุชุฑุชูุจ ุฌุงูุนู ุงูููุงูุฉ ุจูุบุงุช ุฃุฎุฑู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู Lua ู Ruby ู Java ู Perl ู PHP ุ ุฅูุฎ.  ุฃููุง ุชุนูู ุนูู ูุจุฏุฃ ุนุฏ ุงููุคุดุฑุงุช ุฅูู ุงูุฃุดูุงุก ูู ุงูุฐุงูุฑุฉ. <br><br>  ุฃู  ูุฐูู ูููุง ุจุชุฎุตูุต ุฐุงูุฑุฉ ูุดูุก ูุง ุ ููู ุงูููุทูู - ุชู ูุถุน ุงููุคุดุฑ ุนูู ุงูููุฑ ูู ูุชุบูุฑ / ุตููู / ูู ููุงู ุขุฎุฑ.  ุฌุงูุน ุงูุจูุงูุงุช ุงูููููุฉ ููุช ุงูุชุดุบูู ูุจุงุดุฑุฉ ูุถูู ูุฐุง ุงููุคุดุฑ ุฅูู ููุณู ูุน ูุงุฆูุฉ ูุงุฆูุงุช ุงูุจูุงูุงุช ุงูููููุฉ ุงููุญุชููุฉ.  ูู ุงูุฎูููุฉ ุ ูููู ุฌุงูุน ุงูุจูุงูุงุช ุงูููููุฉ ุจูุฑุงูุจุฉ ุฌููุน ุงููุชุบูุฑุงุช ูุงูุตูุงุฆู ููุง ุฅูู ุฐูู.  ุฅุฐุง ูู ููู ููุงู ูุคุดุฑ ุฅูู ุดูุก ูู ูุงุฆูุฉ ุงูุจูุงูุงุช ุงูููููุฉ ุงููุญุชููุฉ ุ ููุฐุง ูุนูู ุฃูู ูุฌุจ ุฅุฒุงูุฉ ุงูุจูุงูุงุช ุงูููููุฉ ูุงูุฐุงูุฑุฉ ูู ุชุญุชูุง. <br><br>  ูุฑุฑุช ุฃู ุฃุจูุน ุฏุฑุงุฌุชู.  ุฃูุง ูุนุชุงุฏ ุฃูุซุฑ ุนูู ุงูุนูู ูุน ุงูุฐุงูุฑุฉ ุนูู ูุจุฏุฃ ุชุงุฑุงุณ ุจูุจุง.  ููุฏ ููุฏุช ูู - ุณุฃูุชูู ุ ุฃุนูู ุ ุนูุฏูุง ุฃุณูู ุงูุชุงูู ุงููุฌุงูู ูู ุงููุตู ุงูุชุงูู.  ูุฐูู ุ ูุนุฏ ุฌุงูุน ุงูุจูุงูุงุช ุงูููููุฉ ุงูุฎุงุต ุจู VM ุดุจู ุชููุงุฆู.  ุฃู  ูุฌุจ ุฃู ูุชู ุงุณุชุฏุนุงุคู ูู ุงููุถุน ุงููุฏูู ูุงูุนูู ูุนู ููููุง ูุฐูู.  ุจุฏูุฑู ุ ุชุชู ุฅุถุงูุฉ ูุคุดุฑุงุช ุฅูู ุงููุงุฆูุงุช ุงููุคูุชุฉ ุงููุนููุฉ (ูุฐุง ุงูุฏูุฑ ูุนุชูุฏ ุจุดูู ุฃุณุงุณู ุนูู ุงููุชุฑุฌู ูุงููููู ูุน ุงููุทูุฑ).  ูุชุญุฑูุฑ ุงูุฐุงูุฑุฉ ูู ุฃุณูู ูุงุฆูุงุช ุฃุฎุฑู ุ ููููู ุงุณุชุฎุฏุงู ุดูุฑุฉ ุชุดุบูู ูููุตูุฉ. <br><br>  ุฃู  ูุญุชูู ุฃุฏุงุฉ ุชุฌููุน ูุฌูุนู ุงูุจูุงูุงุช ุงูููููุฉ ูู ููุช ุงูููุงููุฉ ุนูู ูุงุฆูุฉ ุฌุงูุฒุฉ ูู ุงููุคุดุฑุงุช ุงูุชู ุชุญุชุงุฌ ุฅูู ุงูุงูุชูุงู ูุชุญุฑูุฑ ุงูุฐุงูุฑุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ูุฐูู ุ ุงูุขู ุณูุชุนุงูู ูุน ุงูุชุญููู ุงูุจุฑูุฌู ุฅูู ููู ูุงุจู ููุชูููุฐ ูุฌุฑุฏุฉ </h3><br>  ูุงูุช ุงูููุฑุฉ ูู ุงูุฃุตู ุฃู ุงูุชุทุจููุงุช ุงูููุชูุจุฉ ุจูุบุชู ูููู ุฃู ุชุนูู ุจุฏูู ูุตุฏุฑ ุ ููุง ูู ุงูุญุงู ูุน ุงูุนุฏูุฏ ูู ุงููุบุงุช ุงูููุงุซูุฉ.  ุฃู  ูููู ุงุณุชุฎุฏุงูู ูุฃุบุฑุงุถ ุชุฌุงุฑูุฉ. <br><br>  ููููุงู ุจุฐูู ุ ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุชูุณูู ุงููููุงุช ุงููุงุจูุฉ ููุชูููุฐ.  ุญุตูุช ุนูู ูุง ููู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฑุฃุณ ุ ุนูู ุณุจูู ุงููุซุงู "SVMEXE_CNS". </li><li style=";text-align:right;direction:rtl">  ูุณู ูุญุชูู ุนูู ูุงุฆูุฉ ุงูููุชุจุงุช ุงูุชู ุณูุชู ุงุณุชูุฑุงุฏ ุงูุฃุณุงููุจ ูููุง. </li><li style=";text-align:right;direction:rtl">  ููุดุงุฑ ุฅูู ูุณู ุงูุงุณุชูุฑุงุฏ ุจุงูุทุฑู ุงููุทููุจุฉ ุ ูุงูููุชุจุงุช ุงูุชู ุชูุณุชูุฑุฏ ูููุง ุงูุฃุณุงููุจ ุจุฑูููุง ูู ุงููุณู ุฃุนูุงู. </li><li style=";text-align:right;direction:rtl">  ูุณู ุงูุซูุงุจุช. </li><li style=";text-align:right;direction:rtl">  ูุณู ุงูููุฏ </li></ol><br>  ูุง ุฃุนุชูุฏ ุฃูู ูู ุงููููุฏ ุชุญุฏูุฏ ุงูุฎุทูุงุช ุงูุชูุตูููุฉ ูุชุทุจูู ููุฒุนู ูุฐู ุงูุฃูุณุงู ุ ูุฃูู ููููู ุฑุคูุฉ ูู ุดูุก ุจููุณู ูู ูุณุชูุฏุน ุงูุชุฎุฒูู ุงูุฎุงุต ุจู. <br><br><h3 style=";text-align:right;direction:rtl">  ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ </h3><br>  ุจุนุฏ ุชุญููู ุงูุฃูุณุงู ุฃุนูุงู ูุชููุฆุฉ VM ุ ูุฏููุง ูุณู ูุงุญุฏ ูุน ุงูููุฏ.  ูู ุฌูุงุฒ VM ุงูุฎุงุต ุจู ุ ูุชู ุชูููุฐ ุฑูุฒ ูุฑุนู ุบูุฑ ูุญุงุฐู ุ ุฃู  ูููู ุฃู ุชููู ุงูุชุนูููุงุช ุฐุงุช ุทูู ุชุนุณูู. <br><br>  ูุฌููุนุฉ ูู ุฃููุงุฏ ุงูุชุดุบูู - ุชุนูููุงุช ูุฌูุงุฒ ุธุงูุฑู ุจุชุนูููุงุช ุตุบูุฑุฉ ุฃูุฏููุง ููุฏููุง ุฃุฏูุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> TComand = ( <span class="hljs-comment"><span class="hljs-comment">{** for stack **}</span></span> bcPH, <span class="hljs-comment"><span class="hljs-comment">// [top] = [var] bcPK, // [var] = [top] bcPP, // pop bcSDP, // stkdrop bcSWP, // [top] &lt;-&gt; [top-1] {** jump's **} bcJP, // jump [top] bcJZ, // [top] == 0 ? jp [top-1] bcJN, // [top] &lt;&gt; 0 ? jp [top-1] bcJC, // jp [top] &amp; push callback point as ip+1 bcJR, // jp to last callback point &amp; rem last callback point {** for untyped's **} bcEQ, // [top] == [top-1] ? [top] = 1 : [top] = 0 bcBG, // [top] &gt; [top-1] ? [top] = 1 : [top] = 0 bcBE, // [top] &gt;= [top-1] ? [top] = 1 : [top] = 0 bcNOT, // [top] = ![top] bcAND, // [top] = [top] and [top-1] bcOR, // [top] = [top] or [top-1] bcXOR, // [top] = [top] xor [top-1] bcSHR, // [top] = [top] shr [top-1] bcSHL, // [top] = [top] shl [top-1] bcNEG, // [top] = -[top] bcINC, // [top]++ bcDEC, // [top]-- bcADD, // [top] = [top] + [top-1] bcSUB, // [top] = [top] - [top-1] bcMUL, // [top] = [top] * [top-1] bcDIV, // [top] = [top] / [top-1] bcMOD, // [top] = [top] % [top-1] bcIDIV, // [top] = [top] \ [top-1] bcMV, // [top]^ = [top-1]^ bcMVBP, // [top]^^ = [top-1]^ bcGVBP, // [top]^ = [top-1]^^ bcMVP, // [top]^ = [top-1] {** memory operation's **} bcMS, // memory map size = [top] bcNW, // [top] = @new bcMC, // copy [top] bcMD, // double [top] bcRM, // rem @[top] bcNA, // [top] = @new array[ [top] ] of pointer bcTF, // [top] = typeof( [top] ) bcSF, // [top] = sizeof( [top] ) {** array's **} bcAL, // length( [top] as array ) bcSL, // setlength( [top] as array, {stack} ) bcPA, // push ([top] as array)[top-1] bcSA, // peek [top-2] -&gt; ([top] as array)[top-1] {** memory grabber **} bcGPM, // add pointer to TMem to grabber task-list bcGC, // run grabber {** constant's **} bcPHC, // push copy of const bcPHCP, // push pointer to original const {** external call's **} bcPHEXMP, // push pointer to external method bcINV, // call external method bcINVBP, // call external method by pointer [top] {** for thread's **} bcPHN, // push null bcCTHR, // [top] = thread(method = [top], arg = [top+1]):id bcSTHR, // suspendthread(id = [top]) bcRTHR, // resumethread(id = [top]) bcTTHR, // terminatethread(id = [top]) {** for try..catch..finally block's **} bcTR, // try @block_catch = [top], @block_end = [top+1] bcTRS, // success exit from try/catch block bcTRR, // raise exception, message = [top] {** for string's **} bcSTRD, // strdel bcCHORD, bcORDCH, {** [!] directly memory operations **} bcALLC, //alloc memory bcRALLC, //realloc memory bcDISP, //dispose memory bcGTB, //get byte bcSTB, //set byte bcCBP, //mem copy bcRWBP, //read word bcWWBP, //write word bcRIBP, //read int bcWIBP, //write int bcRFBP, //read float bcWFBP, //write float bcRSBP, //read string bcWSBP, //write string bcTHREXT,//stop code execution bcDBP //debug method call );</span></span></code> </pre><br>  ูุฐูู ุ ุชุนุฑูุช ุจุทูุงูุฉ ุนูู ุงูุนูููุงุช ุงูุชู ูููู ุฃู ูููู ุจูุง ุฌูุงุฒ VM ุงูุฐู ูุชุจู.  ุงูุขู ุฃุฑูุฏ ุฃู ุฃุชุญุฏุซ ุนู ููููุฉ ุนูู ูู ุดูุก. <br><br>  ูุชู ุชุทุจูู VM ููุงุฆู ุ ุจุญูุซ ููููู ุจุณูููุฉ ุชูููุฐ ุฏุนู multithreading. <br><br>  ุฃูู ูุญุชูู ุนูู ูุคุดุฑ ุฅูู ูุฌููุนุฉ ูุน ุฑููุฒ ุงูุชุดุบูู ุ IP (ูุคุดุฑ ุงูุชุนูููุงุช) - ุฅุฒุงุญุฉ ุงูุชุนูููุงุช ุงููููุฐุฉ ููุคุดุฑุงุช ูููุงูู VM ุงูุฃุฎุฑู. <br><br>  ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ุญุงูุฉ ุชุจุฏูู ูุจูุฑุฉ. <br><br>  ูุฌุฑุฏ ุฅุนุทุงุก ูุตู ูู VM: <br><br><pre style=";text-align:right;direction:rtl"> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> TSVM = <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ip, end_ip: TInstructionPointer; mainclasspath: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; mem: PMemory; stack: TStack; cbstack: TCallBackStack; bytes: PByteArr; grabber: TGrabber; consts: PConstSection; extern_methods: PImportSection; try_blocks: TTRBlocks; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RunThread</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadByteCodeFromFile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fn: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadByteCodeFromArray</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b: TByteArr)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br><h3 style=";text-align:right;direction:rtl">  ููููุง ุนู ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุก </h3><br>  ููููุงู ุจุฐูู ุ ูุญุชูู VM ุนูู ูููุฉ ูู ูุนุงูุฌุงุช ุงูุงุณุชุซูุงุกุงุช ููุชูุฉ try / catch ูุจูุฑุฉ ูุชู ูู ูููุง ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.  ูู ุงูููุฏุณ ุ ููููู ูุถุน ุจููุฉ ุจูุง ุฅุฒุงุญุฉ ููุทุฉ ุฏุฎูู ุนูู ุงูุงูุชูุงุท ููุชูุฉ ูุนุงูุฌุฉ ุงุณุชุซูุงุก ุงูููุงูุฉ / ุงูููุงูุฉ.  ููุง ูุฏูุช ุดูุฑุฉ ุชุดุบูู trs ุ ูุงูุชู ูุชู ูุถุนูุง ูุจู ุงูุงูุชูุงุท ูุฑูู ุงูููุฏ ุฅูู ุงูููุงูุฉ / ุงูููุงูุฉ ุฅุฐุง ูุฌุญุช ุ ูุน ุญุฐู ุงููุชูุฉ ูู ููุณ ุงูููุช ุจูุนูููุงุช ุญูู ูุนุงูุฌุงุช ุงูุงุณุชุซูุงุกุงุช ูู ุฃุนูู ุงูููุฏุณ ุงูููุงุจู.  ูู ูู ุจุณูุทุ  ุจุณูุท  ูู ูู ูุฑูุญุฉุ  ูุฑูุญ. <br><br><h3 style=";text-align:right;direction:rtl">  ุฏุนููุง ูุชุญุฏุซ ุนู ุงูุฃุณุงููุจ ูุงูููุชุจุงุช ุงูุฎุงุฑุฌูุฉ </h3><br>  ุณุจู ุฃู ุฐูุฑุช ููู ูู ูุจู.  ุนูููุงุช ุงูุงุณุชูุฑุงุฏ ุ ุงูููุชุจุงุช ... ุจุฏูููุง ุ ูู ุชุชูุชุน ุงููุบุฉ ุจุงููุฑููุฉ ูุงููุธุงุฆู ุงููุทููุจุฉ. <br><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูู ุชุทุจูู VM ุ ูุนูู ููุน ุงูุฃุณููุจ ุงูุฎุงุฑุฌู ูุจุฑูุชูููู ููุงุชุตุงู ุจู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> TExternalFunction = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PStack: pointer)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">cdecl</span></span>; PExternalFunction = ^TExternalFunction;</code> </pre><br>  ุนูุฏ ุงุณุชูุฑุงุฏ VM ุ ูููู ูุญูู ูุณู ุงูุงุณุชูุฑุงุฏ ุจููุก ูุฌููุนุฉ ูู ุงููุคุดุฑุงุช ููุทุฑู ุงูุฎุงุฑุฌูุฉ.  ูุฐูู ุ ููู ุทุฑููุฉ ุนููุงู ุซุงุจุช ุ ูุชู ุญุณุงุจู ูู ูุฑุญูุฉ ุชุฌููุน ุงูุชุทุจูู ุชุญุช VM ูุงูุชู ูููู ูู ุฎูุงููุง ุงุณุชุฏุนุงุก ุงูุทุฑููุฉ ุงููุทููุจุฉ. <br><br>  ุชุญุฏุซ ุงูููุงููุฉ ูุงุญููุง ุจูุฐู ุงูุทุฑููุฉ ุฃุซูุงุก ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="delphi hljs">TExternalFunction(self.extern_methods^.GetFunc(TSVMMem(self.stack.popv).GetW))(@self.stack);</code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุฏุนูุง ููุชุจ ููุชุจุฉ ุจุณูุทุฉ ูุฏููุง VM </h3><br>  ูุฏุนูุง ุชููุฐ ุฃููุงู ุทุฑููุฉ ุงูููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">library</span></span> bf; <span class="hljs-meta"><span class="hljs-meta">{$mode objfpc}</span></span><span class="hljs-meta"><span class="hljs-meta">{$H+}</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uses</span></span> SysUtils, svm_api <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">'..\svm_api.pas'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DSleep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Stack:PStack)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">cdecl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> sleep(TSVMMem(Stack^.popv).GetW); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">exports</span></span> DSleep <span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-string"><span class="hljs-string">'SLEEP'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>.</code> </pre><br><h3 style=";text-align:right;direction:rtl">  ููุฎุต </h3><br>  ุญูู ูุฐุง ุณูู ุฃููู ุนูู ุงูุฃุฑุฌุญ ุจุฅููุงุก ููุงูู ุงูุฃูู ูู ุฏูุฑุฉ ูุชุตูุฑุฉ. <br><br>  ุงูููู ูุตูุช ุฅูุดุงุก ููุช ุชุดุบูู ุงููุบุฉ ุจุดูุก ูู ุงูุชูุตูู.  ุฃุนุชูุฏ ุฃู ูุฐู ุงูููุงูุฉ ุณุชููู ูููุฏุฉ ุฌุฏูุง ููุฃุดุฎุงุต ุงูุฐูู ููุฑุฑูู ูุญุงููุฉ ูุชุงุจุฉ ูุบุชูู ุงูุฎุงุตุฉ ุฃู ูููู ููููุฉ ุนูู ูุบุงุช ุงูุจุฑูุฌุฉ ุงูููุงุซูุฉ. <br><br>  ูุชููุฑ ุฑูุฒ VM ุงููุงูู ูู ุงููุณุชูุฏุน ุ ูู ูุฑุน / runtime / svm. <br><br>  ุฅุฐุง ุฃุญุจุจุช ูุฐุง ุงูููุงู ุ ููุง ุชูู ูุณูููุง ูู ุฑูู ุนูุงูุฉ ุฒุงุฆุฏ ูู ุงููุฑูุฉ ูุฑูุนูุง ูู ุงูุฃุนูู ุ ููุฏ ุญุงููุช ูุณุฃุญุงูู ูู. <br><br>  ุฅุฐุง ูุงู ููุงู ุดูุก ุบูุฑ ูุงุถุญ ูู ุ ููุฑุญุจุง ุจู ูู ุงูุชุนูููุงุช ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุชุฏู</a> . <br><br>  ุฑุจูุง ุณุชููู ุฃุณุฆูุชู ูุฅุฌุงุจุงุชู ูุซูุฑุฉ ููุงูุชูุงู ููุณ ูู ููุท. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar435202/">https://habr.com/ru/post/ar435202/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar435186/index.html">ุชููู ุดุฑูุฉ Rolls-Royce ุจุชุทููุฑ ุฃุณุฑุน ุทุงุฆุฑุฉ ููุฑุจุงุฆูุฉ ูู ุงูุนุงูู</a></li>
<li><a href="../ar435190/index.html">ุชูููุช Google ูู ุงูุงูุณุญุงุจ ูู ุงูุถุฑุงุฆุจ ุงูุจุงูุบุฉ 22.7 ูููุงุฑ ุฏููุงุฑ ุนุจุฑ ุฃูุฑููุฏุง ูุจุฑููุฏุง</a></li>
<li><a href="../ar435194/index.html">ุชุจุณูุท ูุชุงุจุฉ ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ ูููุทูุฑ</a></li>
<li><a href="../ar435196/index.html">ููุฑุฑ ุงูุจุงุญุซูู ReCAPTCHA ุจุงุณุชุฎุฏุงู ุฎุฏูุงุช Google</a></li>
<li><a href="../ar435198/index.html">ุงุฑุฏููู ู LED ุ ุฃู ููููุฉ ุชุฑููุฉ ูุตูู ุงูุฃุทูุงู</a></li>
<li><a href="../ar435204/index.html">ุงุณุชูุจุงู ูููุทูุฑูู ููุชุบูุจ ุนูู ุงูุชุณููู</a></li>
<li><a href="../ar435206/index.html">ุชูุงูู ุฃูุฑูุจุง ุนูู ุชูุฌูู ุญููู ุงููุดุฑ - ููุงุฐุง ุชุนุงุฑุถ ููุตุงุช ุงูุจุซ</a></li>
<li><a href="../ar435208/index.html">ุฅูุชุฑูุช ุงูุฃุดูุงุก ... ุงูุฐูู ูุจููู ูู ุฃุฌู UI / UX ุฌูุฏุฉ</a></li>
<li><a href="../ar435210/index.html">ุนูู Xamarin ูุน C SDK</a></li>
<li><a href="../ar435212/index.html">ููู ุชูุณู ุจุทุงูุงุช ุงูุนูู ุงููุฑููุฉ ูู ุงูุนุงู ุงูุฌุฏูุฏ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>