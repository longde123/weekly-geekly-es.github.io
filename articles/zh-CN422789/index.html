<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸƒ ğŸ—œï¸ ğŸ–‡ï¸ @Pythonetc 2018å¹´8æœˆ ğŸ›³ï¸ ğŸ¤˜ğŸ¼ ğŸ¤™ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="è¿™æ˜¯æ¥è‡ª@pythonetc feedçš„PythonæŠ€å·§å’Œç¼–ç¨‹çš„ç¬¬ä¸‰ä¸ªé›†åˆã€‚ 

 å…ˆå‰çš„é€‰æ‹©ï¼š 



- 2018å¹´ä¸ƒæœˆ 
- 2018å¹´å…­æœˆ 

 å·¥å‚æ–¹æ³• 
 å¦‚æœåœ¨__init__å†…åˆ›å»ºæ–°å¯¹è±¡ï¼Œåˆ™æœ€å¥½å°†å®ƒä»¬ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒä»¬ï¼Œç„¶åä½¿ç”¨factoryæ–¹æ³•åˆ›å»ºè¯¥å¯¹è±¡ã€‚ è¿™ä¼šå°†ä¸šåŠ¡é€»è¾‘ä¸åˆ›å»ºå¯¹è±¡...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>@Pythonetc 2018å¹´8æœˆ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/422789/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/815/5df/0ab/8155df0ab68e69c1e5863edec2315486.png" width="400"></div><br><br> è¿™æ˜¯æ¥è‡ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">@pythonetc feed</a>çš„PythonæŠ€å·§å’Œç¼–ç¨‹çš„ç¬¬ä¸‰ä¸ªé›†åˆã€‚ <br><br> å…ˆå‰çš„é€‰æ‹©ï¼š <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2018å¹´ä¸ƒæœˆ</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2018å¹´å…­æœˆ</a> <br></li></ul><br><a name="habracut"></a><br><h2> å·¥å‚æ–¹æ³• </h2><br> å¦‚æœåœ¨<code>__init__</code>å†…åˆ›å»ºæ–°å¯¹è±¡ï¼Œåˆ™æœ€å¥½å°†å®ƒä»¬ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒä»¬ï¼Œç„¶åä½¿ç”¨factoryæ–¹æ³•åˆ›å»ºè¯¥å¯¹è±¡ã€‚ è¿™ä¼šå°†ä¸šåŠ¡é€»è¾‘ä¸åˆ›å»ºå¯¹è±¡çš„æŠ€æœ¯å®ç°åˆ†å¼€ã€‚ <br><br> åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ <code>__init__</code>æ¥å—<code>host</code>å’Œ<code>port</code>ä½œä¸ºåˆ›å»ºæ•°æ®åº“è¿æ¥çš„å‚æ•°ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Query</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, host, port)</span></span></span><span class="hljs-function">:</span></span> self._connection = Connection(host, port)</code> </pre> <br> é‡æ„é€‰é¡¹ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Query</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, connection)</span></span></span><span class="hljs-function">:</span></span> self._connection = connection @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls, host, port)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cls(Connection(host, port))</code> </pre> <br> æ­¤æ–¹æ³•è‡³å°‘å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š <br><br><ul><li> éƒ¨ç½²å¾ˆå®¹æ˜“ã€‚ åœ¨æµ‹è¯•ä¸­ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œ<code>Query(FakeConnection())</code> ã€‚ </li><li> ä¸€ä¸ªç±»å¯ä»¥å…·æœ‰ä»»æ„æ•°é‡çš„å·¥å‚æ–¹æ³•ã€‚ æ‚¨ä¸ä»…å¯ä»¥ä½¿ç”¨<code>host</code>å’Œ<code>port</code>åˆ›å»ºè¿æ¥ï¼Œè¿˜å¯ä»¥å…‹éš†å¦ä¸€ä¸ªè¿æ¥ï¼Œè¯»å–é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨é»˜è®¤è¿æ¥ç­‰ã€‚ </li><li> å¯ä»¥å°†ç±»ä¼¼çš„å·¥å‚æ–¹æ³•è½¬æ¢ä¸ºå¼‚æ­¥å‡½æ•°ï¼Œè¿™å¯¹äº<code>__init__</code>ç»å¯¹æ˜¯ä¸å¯èƒ½çš„ã€‚ </li></ul><br><h2> è¶…çº§æˆ–ä¸‹ä¸€ä¸ª </h2><br>  <code>super()</code>å‡½æ•°ä½¿æ‚¨å¯ä»¥å¼•ç”¨åŸºç±»ã€‚ è¿™åœ¨æ´¾ç”Ÿç±»è¦å‘æ–¹æ³•çš„å®ç°ä¸­æ·»åŠ æŸäº›å†…å®¹è€Œä¸æ˜¯å®Œå…¨è¦†ç›–è¯¥æ–¹æ³•çš„æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseTestCase</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(TestCase)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self._db = create_db() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserTestCase</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(BaseTestCase)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> super().setUp() self._user = create_user()</code> </pre> <br>  â€œè¶…çº§â€è¿™ä¸ªåç§°å¹¶ä¸è¡¨ç¤ºâ€œè¶…çº§â€ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒçš„æ„æ€æ˜¯â€œæ›´é«˜å±‚æ¬¡â€ï¼ˆä¾‹å¦‚ï¼Œåœ¨â€œä¸»ç®¡â€ä¸€è¯ä¸­ï¼‰ã€‚ åŒæ—¶ï¼Œ <code>super()</code>å¹¶ä¸æ€»æ˜¯å¼•ç”¨åŸºç±»ï¼›å®ƒå¯ä»¥è½»æ¾åœ°è¿”å›å­ç±»ã€‚ å› æ­¤ï¼Œä½¿ç”¨åç§°<code>next()</code>ä¼šæ›´æ­£ç¡®ï¼Œå› ä¸ºæ ¹æ®MROè¿”å›äº†ä¸‹ä¸€ä¸ªç±»ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Top</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'top'</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Left</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Top)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super().foo() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Right</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Top)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'right'</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bottom</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Left, Right)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-comment"><span class="hljs-comment"># prints 'right' print(Bottom().foo())</span></span></code> </pre> <br> è¯·è®°ä½ï¼Œå–å†³äºæœ€åˆä»ä½•å¤„è°ƒç”¨æ–¹æ³•ï¼Œ <code>super()</code>å¯ä»¥äº§ç”Ÿä¸åŒçš„ç»“æœã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>Bottom().foo() <span class="hljs-string"><span class="hljs-string">'right'</span></span> &gt;&gt;&gt; Left().foo() <span class="hljs-string"><span class="hljs-string">'top'</span></span></code> </pre> <br><br><h2> ç”¨äºåˆ›å»ºç±»çš„è‡ªå®šä¹‰åç§°ç©ºé—´ </h2><br> é€šè¿‡ä¸¤ä¸ªå¤§æ­¥éª¤åˆ›å»ºä¸€ä¸ªç±»ã€‚ é¦–å…ˆï¼Œæ‰§è¡Œç±»çš„ä¸»ä½“ï¼Œå°±åƒå‡½æ•°çš„ä¸»ä½“ä¸€æ ·ã€‚ åœ¨ç¬¬äºŒæ­¥ä¸­ï¼Œå…ƒç±»ä½¿ç”¨é»˜è®¤çš„ç»“æœåç§°ç©ºé—´ï¼ˆç”±<code>locals()</code>è¿”å›<code>locals()</code> ï¼ˆé»˜è®¤ä¸º<code>type</code> ï¼‰åˆ›å»ºç±»å¯¹è±¡ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(type)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__new__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(meta, name, bases, ns)</span></span></span><span class="hljs-function">:</span></span> print(ns) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super().__new__( meta, name, bases, ns ) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(metaclass=Meta)</span></span></span><span class="hljs-class">:</span></span> B = <span class="hljs-number"><span class="hljs-number">2</span></span></code> </pre> <br> æ­¤ä»£ç æ˜¾ç¤º<code>{'__module__': '__main__', '__qualname__':'Foo', 'B': 3}</code> ã€‚ <br><br> æ˜¾ç„¶ï¼Œå¦‚æœæ‚¨å¼•å…¥ç±»ä¼¼<code>B = 2; B = 3</code>  <code>B = 2; B = 3</code> ï¼Œåˆ™å…ƒç±»å°†ä»…çœ‹åˆ°<code>B = 3</code> ï¼Œå› ä¸ºåªæœ‰æ­¤å€¼ä»¥<code>ns</code> ã€‚ æ­¤é™åˆ¶æºäºä»¥ä¸‹äº‹å®ï¼šå…ƒç±»ä»…åœ¨æ‰§è¡Œä¸»ä½“ä¹‹åæ‰å¼€å§‹å·¥ä½œã€‚ <br><br> ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ»‘åŠ¨è‡ªå·±çš„åç§°ç©ºé—´æ¥å¹²é¢„æ‰§è¡Œè¿‡ç¨‹ã€‚ é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨ç®€å•çš„å­—å…¸ï¼Œä½†æ˜¯å¦‚æœæ‚¨ä½¿ç”¨å…ƒç±»ä¸­çš„<code>__prepare__</code>æ–¹æ³•ï¼Œåˆ™å¯ä»¥æä¾›è‡ªå·±çš„å¯¹è±¡ï¼Œç±»ä¼¼äºå­—å…¸ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomNamespace</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(dict)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__setitem__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, key, value)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">f'</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{key}</span></span></span><span class="hljs-string"> -&gt; </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{value}</span></span></span><span class="hljs-string">'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super().__setitem__(key, value) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(type)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__new__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(meta, name, bases, ns)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super().__new__( meta, name, bases, ns ) @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__prepare__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(metacls, cls, bases)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CustomNamespace() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(metaclass=Meta)</span></span></span><span class="hljs-class">:</span></span> B = <span class="hljs-number"><span class="hljs-number">2</span></span> B = <span class="hljs-number"><span class="hljs-number">3</span></span></code> </pre> <br> ä»£ç æ‰§è¡Œç»“æœï¼š <br><br><pre> <code class="python hljs">__module__ -&gt; __main__ __qualname__ -&gt; Foo B -&gt; <span class="hljs-number"><span class="hljs-number">2</span></span> B -&gt; <span class="hljs-number"><span class="hljs-number">3</span></span></code> </pre> <br> è¿™æ ·<code>enum.Enum</code>é˜²æ­¢<code>enum.Enum</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é‡å¤</a> ã€‚ <br><br><h2>  matplotlib </h2><br>  <code>matplotlib</code>æ˜¯ä¸€ä¸ªå¤æ‚è€Œçµæ´»çš„Pythonå›¾å½¢åº“ã€‚ è®¸å¤šäº§å“éƒ½æ”¯æŒå®ƒï¼ŒåŒ…æ‹¬Jupyterå’ŒPycharmã€‚ è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨<code>matplotlib</code>æ¸²æŸ“ç®€å•åˆ†å½¢çš„ç¤ºä¾‹ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https</a> : <code>matplotlib</code> ï¼ˆè¯·å‚è§æœ¬å‡ºç‰ˆç‰©çš„æ ‡é¢˜å›¾åƒï¼‰ã€‚ <br><br><h2> æ—¶åŒºæ”¯æŒ </h2><br>  Pythonæä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„<code>datetime</code>åº“ï¼Œç”¨äºå¤„ç†æ—¥æœŸå’Œæ—¶é—´ã€‚ å¥‡æ€ªçš„æ˜¯ï¼Œ <code>datetime</code>å¯¹è±¡å…·æœ‰æ”¯æŒæ—¶åŒºçš„ç‰¹æ®Šæ¥å£ï¼ˆå³<code>tzinfo</code>å±æ€§ï¼‰ï¼Œä½†æ˜¯æ­¤æ¨¡å—å¯¹ä¸Šè¿°æ¥å£çš„æ”¯æŒæœ‰é™ï¼Œå› æ­¤ï¼Œéƒ¨åˆ†å·¥ä½œåˆ†é…ç»™äº†å…¶ä»–æ¨¡å—ã€‚ <br><br> å…¶ä¸­æœ€å—æ¬¢è¿çš„æ˜¯<code>pytz</code> ã€‚ ä½†æ˜¯äº‹å®æ˜¯<code>pytz</code>å¹¶ä¸å®Œå…¨ç¬¦åˆ<code>tzinfo</code>æ¥å£ã€‚ åœ¨<code>pytz</code>æ–‡æ¡£çš„å¼€å¤´å°±è¯´æ˜äº†è¿™ä¸€ç‚¹ï¼šâ€œæ­¤åº“ä¸åŒäºå·²è®°å½•çš„tzinfoå®ç°çš„Python APIã€‚â€ <br><br> æ‚¨ä¸èƒ½å°†<code>pytz</code>å¯¹è±¡ç”¨ä½œ<code>tzinfo</code> ã€‚ å¦‚æœå°è¯•æ‰§è¡Œæ­¤æ“ä½œï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´å®Œå…¨ç–¯ç‹‚çš„ç»“æœï¼š <br><br><pre> <code class="python hljs">In : paris = pytz.timezone(<span class="hljs-string"><span class="hljs-string">'Europe/Paris'</span></span>) In : str(datetime(<span class="hljs-number"><span class="hljs-number">2017</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, tzinfo=paris)) Out: <span class="hljs-string"><span class="hljs-string">'2017-01-01 00:00:00+00:09'</span></span></code> </pre> <br> æ³¨æ„åç§»é‡+00ï¼š09ã€‚ åƒè¿™æ ·ä½¿ç”¨Pytzï¼š <br><br><pre> <code class="python hljs">In : str(paris.localize(datetime(<span class="hljs-number"><span class="hljs-number">2017</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>))) Out: <span class="hljs-string"><span class="hljs-string">'2017-01-01 00:00:00+01:00'</span></span></code> </pre> <br> æ­¤å¤–ï¼Œåœ¨è¿›è¡Œä»»ä½•ç®—æœ¯è¿ç®—ä¹‹åï¼Œæ‚¨éœ€è¦å¯¹<code>datetime</code>å¯¹è±¡åº”ç”¨<code>normalize</code> ï¼Œä»¥é¿å…æ›´æ”¹åç§»é‡ï¼ˆä¾‹å¦‚ï¼Œåœ¨DSTå‘¨æœŸçš„è¾¹ç•Œï¼‰ã€‚ <br><br><pre> <code class="python hljs">In : new_time = time + timedelta(days=<span class="hljs-number"><span class="hljs-number">2</span></span>) In : str(new_time) Out: <span class="hljs-string"><span class="hljs-string">'2018-03-27 00:00:00+01:00'</span></span> In : str(paris.normalize(new_time)) Out: <span class="hljs-string"><span class="hljs-string">'2018-03-27 01:00:00+02:00'</span></span></code> </pre> <br> å¦‚æœæ‚¨å…·æœ‰Python 3.6ï¼Œåˆ™æ–‡æ¡£å»ºè®®ä½¿ç”¨<code>dateutil.tz</code>è€Œä¸æ˜¯<code>pytz</code> ã€‚ è¯¥åº“ä¸<code>tzinfo</code>å®Œå…¨å…¼å®¹ï¼Œå¯ä»¥å°†å…¶ä½œä¸ºå±æ€§ä¼ é€’ï¼Œè€Œæ— éœ€ä½¿ç”¨<code>normalize</code> ã€‚ æ˜¯çš„ï¼Œå®ƒçš„è¿è¡Œé€Ÿåº¦æ›´æ…¢ã€‚ <br><br> å¦‚æœæ‚¨æƒ³çŸ¥é“<code>pytz</code>ä¸ºä»€ä¹ˆä¸æ”¯æŒ<code>datetime</code> APIæˆ–æƒ³è¦æŸ¥çœ‹æ›´å¤šç¤ºä¾‹ï¼Œè¯·é˜…è¯»æœ¬æ–‡ã€‚ <br><br><h2> é­”æœ¯StopIteration </h2><br> æ¯æ¬¡è°ƒç”¨<code>next(x)</code> ï¼Œå®ƒéƒ½ä¼šä»è¿­ä»£å™¨<code>x</code>è¿”å›ä¸€ä¸ªæ–°å€¼ï¼Œç›´åˆ°å¼•å‘å¼‚å¸¸ä¸ºæ­¢ã€‚ å¦‚æœç»“æœä¸º<code>StopIteration</code> ï¼Œåˆ™è¿­ä»£å™¨å°†è€—å°½ï¼Œæ— æ³•å†æä¾›å€¼ã€‚ å¦‚æœç”Ÿæˆå™¨æ˜¯è¿­ä»£çš„ï¼Œåˆ™åœ¨ä¸»ä½“ç»“å°¾å¤„ï¼Œå®ƒå°†è‡ªåŠ¨å¼•å‘<code>StopIteration</code> ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">one_two</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> ... &gt;&gt;&gt; i = one_two() &gt;&gt;&gt; next(i) <span class="hljs-number"><span class="hljs-number">1</span></span> &gt;&gt;&gt; next(i) <span class="hljs-number"><span class="hljs-number">2</span></span> &gt;&gt;&gt; next(i) Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"&lt;stdin&gt;"</span></span>, line <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; StopIteration</code> </pre> <br>  <code>StopIteration</code>å¯ä»¥ç”±è°ƒç”¨<code>next</code>çš„å·¥å…·è‡ªåŠ¨å¤„ç†ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>list(one_two()) [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]</code> </pre> <br> ä½†æ˜¯é—®é¢˜åœ¨äºï¼Œç”Ÿæˆå™¨ä¸»ä½“ä¸­å‡ºç°çš„ä»»ä½•æ˜æ˜¾ä¸æœŸæœ›çš„StopIterationéƒ½ä¼šè¢«é™é»˜æ¥å—ä¸ºç”Ÿæˆå™¨ç»“æŸçš„æ ‡å¿—ï¼Œè€Œä¸æ˜¯åƒå…¶ä»–ä»»ä½•å¼‚å¸¸ä¸€æ ·çš„é”™è¯¯ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">one_two</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">one_two_repeat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(n)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(n): i = one_two() <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> next(i) <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> next(i) <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> next(i) print(list(one_two_repeat(<span class="hljs-number"><span class="hljs-number">3</span></span>)))</code> </pre> <br> åœ¨è¿™é‡Œï¼Œæœ€åä¸€ä¸ª<code>yield</code>æ˜¯ä¸€ä¸ªé”™è¯¯ï¼šæŠ›å‡º<code>StopIteration</code>å¼‚å¸¸ä¼šåœæ­¢<code>list(...)</code>çš„è¿­ä»£ã€‚ æˆ‘ä»¬å¾—åˆ°ç»“æœ<code>[1, 2]</code> ã€‚ ä½†æ˜¯ï¼Œåœ¨Python 3.7ä¸­ï¼Œæ­¤è¡Œä¸ºå·²æ›´æ”¹ã€‚ å¤–æ˜Ÿäºº<code>StopIteration</code>æ›¿æ¢ä¸º<code>RuntimeError</code> ï¼š <br><br><pre> <code class="python hljs">Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"test.py"</span></span>, line <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> one_two_repeat <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> next(i) StopIteration The above exception was the direct cause of the following exception: Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"test.py"</span></span>, line <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; print(list(one_two_repeat(<span class="hljs-number"><span class="hljs-number">3</span></span>))) RuntimeError: generator raised StopIteration</code> </pre> <br> æ‚¨å¯ä»¥ä½¿ç”¨<code>__future__ import generator_stop</code>å¯ç”¨ä¸Python 3.5ç›¸åŒçš„è¡Œä¸ºã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN422789/">https://habr.com/ru/post/zh-CN422789/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN422777/index.html">ç¥ç»ç½‘ç»œALUçš„ç®€å•ä»‹ç»ï¼šè§£é‡Šï¼Œç‰©ç†å«ä¹‰å’Œå®ç°</a></li>
<li><a href="../zh-CN422781/index.html">é‡‘èç§‘æŠ€æ‘˜è¦ï¼šSWIFTå°†ç»§ç»­åœ¨ä¿„ç½—æ–¯è”é‚¦å¼€å±•å·¥ä½œï¼ŒVISAå…è®¸æ‚¨é€šè¿‡ç”µè¯å·ç ï¼Œæ˜‚è´µçš„ç”Ÿç‰©è¯†åˆ«æŠ€æœ¯è½¬ç§»èµ„é‡‘</a></li>
<li><a href="../zh-CN422783/index.html">æ›´å¥½ï¼Œæ›´å¿«ï¼Œæ›´å¼ºå¤§ï¼šæ ·å¼åŒ–ç»„ä»¶v4</a></li>
<li><a href="../zh-CN422785/index.html">å·¥å‚æ•°å­—åŒ–ï¼šå‰ç»</a></li>
<li><a href="../zh-CN422787/index.html">é¢†å…ˆèŠ¯ç‰‡æ¶æ„çš„é‡å¤§å˜åŒ–</a></li>
<li><a href="../zh-CN422791/index.html">å¦‚ä½•ä¸å­¦è‹±è¯­ï¼šå¸¸è§é”™è¯¯</a></li>
<li><a href="../zh-CN422793/index.html">DEFCONä¼šè®®22. Andrewâ€œ Zozâ€ Brooksã€‚ ä¸è¦æ‹§ç´§å®ƒï¼ ç¬¬äºŒéƒ¨åˆ†</a></li>
<li><a href="../zh-CN422795/index.html">æŠ€æœ¯å’Œå•†ä¸šï¼šä¸Zyxelåœ¨ä¿„ç½—æ–¯åˆä½œçš„æ–°æ¨¡å¼</a></li>
<li><a href="../zh-CN422797/index.html">æˆ‘ä»¬å¦‚ä½•ç”¨å¸¸è§„IPæ‘„åƒæœºåˆ¶ä½œå°å‹äº‘å½•åƒæœº</a></li>
<li><a href="../zh-CN422799/index.html">Microsoftå¦‚ä½•éšè—æ•´ä¸ªæœåŠ¡å™¨ä»¥åŠå¦‚ä½•æ‰¾åˆ°å®ƒ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>