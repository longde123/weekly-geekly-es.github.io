<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òÆÔ∏è üëáüèº üöΩ Storyboards para iOS: an√°lise dos pr√≥s e contras, melhores pr√°ticas ‚ôëÔ∏è üö∑ ‚ôçÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A Apple criou os Storyboards para que os desenvolvedores possam visualizar as telas dos aplicativos iOS e os relacionamentos entre eles. Nem todo mund...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Storyboards para iOS: an√°lise dos pr√≥s e contras, melhores pr√°ticas</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mobileup/blog/456086/"><img src="https://habrastorage.org/webt/xx/gq/7w/xxgq7wvcgxjuew_bku55csqqvlu.png"><br><br>  A Apple criou os Storyboards para que os desenvolvedores possam visualizar as telas dos aplicativos iOS e os relacionamentos entre eles.  Nem todo mundo gostou desta ferramenta, e por boas raz√µes.  Encontrei muitos artigos criticando os Storyboards, mas n√£o encontrei uma an√°lise detalhada e imparcial de todos os pr√≥s e contras, levando em considera√ß√£o as melhores pr√°ticas.  No final, decidi escrever esse artigo pessoalmente. <br><a name="habracut"></a><br>  Vou tentar analisar em detalhes as desvantagens e vantagens do uso de Storyboards.  Depois de ponder√°-los, voc√™ pode tomar uma decis√£o significativa, sejam eles necess√°rios no projeto ou n√£o.  Esta decis√£o n√£o precisa ser radical.  Se, em algumas situa√ß√µes, os Storyboards criam problemas, em outras, seu uso √© justificado: ajuda a resolver tarefas de maneira eficaz e a escrever c√≥digos simples e de f√°cil manuten√ß√£o. <br><br>  Vamos come√ßar com as defici√™ncias e analisar se todas elas ainda s√£o relevantes. <br><br><h2>  Desvantagens </h2><br><h3>  1. Os storyboards t√™m dificuldade em gerenciar conflitos ao mesclar altera√ß√µes </h3><br>  Storyboard √© um arquivo XML.  √â menos leg√≠vel que o c√≥digo, portanto, a resolu√ß√£o de conflitos √© mais dif√≠cil.  Mas essa complexidade tamb√©m depende de como trabalhamos com o Storyboard.  Voc√™ pode simplificar bastante sua tarefa se seguir as regras abaixo: <br><br><ul><li> N√£o coloque a interface do usu√°rio inteira em um √∫nico Storyboard, divida-o em v√°rios menores.  Isso permitir√° distribuir o trabalho no Storyboards entre os desenvolvedores sem o risco de conflitos e, no caso de sua inevitabilidade, simplificar√° a tarefa de resolv√™-los. <br></li><li>  Se voc√™ precisar usar a mesma Visualiza√ß√£o em v√°rios locais, selecione-a em uma subclasse separada com seu pr√≥prio arquivo Xib. <br></li><li>  Fa√ßa confirma√ß√µes com mais frequ√™ncia, pois √© muito mais f√°cil trabalhar com altera√ß√µes que v√™m em peda√ßos pequenos. <br></li></ul><br>  O uso de v√°rios Storyboards em vez de um torna imposs√≠vel ver o mapa inteiro do aplicativo em um arquivo.  Mas muitas vezes isso n√£o √© necess√°rio - apenas a parte espec√≠fica em que estamos trabalhando no momento √© suficiente. <br><br><h3>  2. Os storyboards impedem a reutiliza√ß√£o de c√≥digo </h3><br>  Se estamos falando sobre o uso apenas de Storyboards sem Xibs no projeto, certamente haver√° problemas.  No entanto, Xibs, na minha opini√£o, s√£o elementos necess√°rios ao trabalhar com Storyboards.  Gra√ßas a eles, voc√™ pode criar facilmente Visualiza√ß√µes reutiliz√°veis, que tamb√©m s√£o convenientes para trabalhar no c√≥digo. <br><br>  Primeiro, crie a classe <code>XibView</code> base, respons√°vel por renderizar o <code>UIView</code> criado no Xib no Storyboard: <br><br><pre> <code class="swift hljs"><span class="hljs-meta"><span class="hljs-meta">@IBDesignable</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">XibView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIView</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contentView: <span class="hljs-type"><span class="hljs-type">UIView?</span></span> }</code> </pre> <br>  <code>XibView</code> carregar√° o <code>UIView</code> do Xib no <code>contentView</code> e o adicionar√° como sua subview.  Fazemos isso no m√©todo <code>setup()</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> view = loadViewFromNib() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } view.frame = bounds view.autoresizingMask = [.flexibleWidth, .flexibleHeight] addSubview(view) contentView = view }</code> </pre> <br>  O m√©todo <code>loadViewFromNib()</code> parece com o seguinte: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadViewFromNib</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">UIView?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> nibName = <span class="hljs-type"><span class="hljs-type">String</span></span>(describing: type(of: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> nib = <span class="hljs-type"><span class="hljs-type">UINib</span></span>(nibName: nibName, bundle: <span class="hljs-type"><span class="hljs-type">Bundle</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: <span class="hljs-type"><span class="hljs-type">XibView</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nib.instantiate(withOwner: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, options: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>).first <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">UIView</span></span> }</code> </pre> <br>  O m√©todo <code>setup()</code> deve ser chamado nos inicializadores: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(frame: <span class="hljs-type"><span class="hljs-type">CGRect</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(frame: frame) setup() } <span class="hljs-keyword"><span class="hljs-keyword">required</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>?(coder aDecoder: <span class="hljs-type"><span class="hljs-type">NSCoder</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(coder: aDecoder) setup() }</code> </pre> <br>  A classe <code>XibView</code> pronta.  Exibi√ß√µes reutilizadas, cuja apar√™ncia √© renderizada em um arquivo Xib, ser√£o herdadas do <code>XibView</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RedView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">XibView</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre><br><img src="https://habrastorage.org/webt/j8/ak/ny/j8aknyaa51sdpr6y8kbh7yjfwvs.png"><br>  Se voc√™ agora adicionar um novo <code>UIView</code> ao Storyboard e definir sua classe como <code>RedView</code> , tudo ser√° exibido com sucesso: <br><img src="https://habrastorage.org/webt/0l/a-/wa/0la-waqvswrxya3gc8clxvro2iw.png"><br>  A cria√ß√£o de uma inst√¢ncia do <code>RedView</code> no c√≥digo ocorre da maneira usual: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> redView = <span class="hljs-type"><span class="hljs-type">RedView</span></span>()</code> </pre> <br>  Outro detalhe √∫til que nem todos podem conhecer √© a capacidade de adicionar cores ao diret√≥rio <b>.xcassets</b> .  Isso permite que voc√™ os altere globalmente em todos os Storyboards e Xibs em que s√£o usados. <br><br>  Para adicionar cores, clique em "+" no canto inferior esquerdo e selecione "Novo conjunto de cores": <br><img src="https://habrastorage.org/webt/zm/3u/qi/zm3uqiunozwu020zpfckzd_slbo.png"><br>  Especifique o nome e a cor desejados: <br><img src="https://habrastorage.org/webt/4j/ve/lt/4jveltbjt7fiqalngh6zzg1otr4.png"><br>  A cor criada aparecer√° na se√ß√£o "Cores nomeadas": <br><img src="https://habrastorage.org/webt/km/cl/ak/kmclakpy0pduyyudog1_daxmx8o.png"><br>  Al√©m disso, pode ser obtido no c√≥digo: <br><br><pre> <code class="swift hljs">innerView.backgroundColor = <span class="hljs-type"><span class="hljs-type">UIColor</span></span>(named: <span class="hljs-string"><span class="hljs-string">"BackgroundColor"</span></span>)</code> </pre><br><h3>  3. Voc√™ n√£o pode usar inicializadores personalizados para <code>UIViewControllers</code> criados no Storyboard </h3><br>  No caso do Storyboard, n√£o podemos passar depend√™ncias nos inicializadores dos <code>UIViewControllers</code> .  Geralmente fica assim: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> segue: UIStoryboardSegue, sender: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> segue.identifier == <span class="hljs-string"><span class="hljs-string">"detail"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> detailVC = segue.destination <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">DetailViewController</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> object = <span class="hljs-type"><span class="hljs-type">Object</span></span>() detailVC.object = object }</code> </pre> <br>  Esse c√≥digo pode ser melhor feito usando algum tipo de constante para representar identificadores ou ferramentas como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SwiftGen</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">R.swift</a> , ou talvez at√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Perform</a> .  Mas, dessa maneira, apenas nos livramos de literais de string e adicionamos a√ß√∫car sint√°tico, e n√£o resolvemos os problemas que surgem: <br><br><ul><li>  Como sei como o <code>DetailViewController</code> configurado no exemplo acima?  Se voc√™ √© novo no projeto e n√£o possui esse conhecimento, precisar√° abrir um arquivo com uma descri√ß√£o desse controlador e estud√°-lo. <br></li><li>  As propriedades <code>DetailViewController</code> definidas ap√≥s a inicializa√ß√£o, o que significa que elas devem ser opcionais.  √â necess√°rio lidar com casos em que qualquer propriedade √© <code>nil</code> ; caso contr√°rio, o aplicativo pode falhar no momento mais inoportuno.  √â poss√≠vel marcar propriedades como opcional implicitamente expandido ( <code>var object: Object!</code> ), Mas a ess√™ncia n√£o ser√° alterada. <br></li><li>  As propriedades devem ser marcadas como <code>var</code> , n√£o <code>let</code> .  Portanto, uma situa√ß√£o √© poss√≠vel quando algu√©m de fora quer mud√°-las.  <code>DetailViewController</code> deve lidar com essas situa√ß√µes. <br></li></ul><br>  Uma solu√ß√£o √© descrita <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">neste artigo</a> . <br><br><h3>  4. √Ä medida que o Storyboard cresce, a navega√ß√£o se torna mais dif√≠cil </h3><br>  Como observamos anteriormente, voc√™ n√£o precisa colocar tudo em um Storyboard, √© melhor dividi-lo em v√°rios menores.  Com o advento da <b>Refer√™ncia</b> do <b>Storyboard,</b> tornou-se muito simples. <br>  Adicione a Refer√™ncia do Storyboard da biblioteca de objetos ao Storyboard: <br><img src="https://habrastorage.org/webt/m7/v4/wc/m7v4wcm7xu_chbm7n6j_mmy1ssq.png"><br>  Definimos os valores de campo necess√°rios no <b>Inspetor de atributos</b> - este √© o nome do arquivo Storyboard e, se necess√°rio, o <b>ID referenciado</b> , que corresponde ao <b>ID do Storyboard da</b> tela desejada.  Por padr√£o, o <b>Initial View Controller</b> carregar√°: <br><img src="https://habrastorage.org/webt/0j/2a/ee/0j2aeevobxwbcwd4impkwryj1ye.png"><br>  Se voc√™ especificar um nome inv√°lido no campo Storyboard ou se referir a um ID do Storyboard inexistente, o Xcode o alertar√° sobre isso no est√°gio de compila√ß√£o. <br><br><h3>  5. Xcode fica mais lento ao carregar storyboards </h3><br>  Se o Storyboard contiver um grande n√∫mero de telas com in√∫meras restri√ß√µes, o carregamento levar√° algum tempo.  Mas, novamente, √© melhor dividir o Storyboard grande em outros menores.  Separadamente, eles carregam muito mais r√°pido e torna-se mais conveniente trabalhar com eles. <br><br><h3>  6. Os storyboards s√£o fr√°geis, um bug pode causar uma falha no aplicativo em tempo de execu√ß√£o </h3><br>  Os principais pontos fracos: <br><br><ul><li>  Erros nos <code>UICollectionViewCell</code> <code>UITableViewCell</code> e <code>UICollectionViewCell</code> . <br></li><li>  Erros nos identificadores segues. <br></li><li>  Usando uma subclasse de <code>UIView</code> que n√£o existe mais. <br></li><li>  Sincroniza√ß√£o de <code>IBActions</code> e <code>IBOutlets</code> com c√≥digo. <br></li></ul><br>  Tudo isso e alguns outros problemas podem levar √† falha do aplicativo em tempo de execu√ß√£o, o que significa que √© prov√°vel que esses erros caiam na compila√ß√£o do release.  Por exemplo, quando definimos identificadores de c√©lulas ou segues no Storyboard, eles devem ser copiados para o c√≥digo onde quer que sejam usados.  Ao alterar o identificador em um s√≥ lugar, ele deve ser alterado em todo o resto.  Existe a possibilidade de voc√™ simplesmente esquec√™-lo ou digitar um erro de digita√ß√£o, mas apenas aprender sobre o erro enquanto o aplicativo estiver em execu√ß√£o. <br><br>  Voc√™ pode reduzir a probabilidade de erros se livrando de literais de string no seu c√≥digo.  Para isso, os <code>UICollectionViewCell</code> <code>UITableViewCell</code> e <code>UICollectionViewCell</code> podem ser atribu√≠dos aos nomes das classes de c√©lulas: por exemplo, o identificador <code>ItemTableViewCell</code> ser√° a string "ItemTableViewCell".  No c√≥digo, obtemos a c√©lula assim: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> cell = tableView.dequeueReusableCell(withIdentifier: <span class="hljs-type"><span class="hljs-type">String</span></span>(describing: <span class="hljs-type"><span class="hljs-type">ItemTableViewCell</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>! <span class="hljs-type"><span class="hljs-type">ItemTableViewCell</span></span></code> </pre> <br>  Voc√™ pode adicionar a fun√ß√£o gen√©rica correspondente ao <code>UITableView</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UITableView</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dequeueReusableCell</span></span></span><span class="hljs-function">&lt;T&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">T</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-type"><span class="hljs-type">T</span></span>: <span class="hljs-type"><span class="hljs-type">UITableViewCell</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dequeueReusableCell(withIdentifier: <span class="hljs-type"><span class="hljs-type">String</span></span>(describing: <span class="hljs-type"><span class="hljs-type">T</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>! <span class="hljs-type"><span class="hljs-type">T</span></span> } }</code> </pre> <br>  E ent√£o fica mais f√°cil obter a c√©lula: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> cell: <span class="hljs-type"><span class="hljs-type">ItemTableViewCell</span></span> = tableView.dequeueReusableCell()</code> </pre> <br>  Se voc√™ esquecer subitamente de especificar o valor do identificador de c√©lula no Storyboard, o Xcode exibir√° um aviso, portanto voc√™ n√£o deve ignor√°-los. <br><br>  Quanto aos identificadores segues, voc√™ pode usar enumera√ß√µes para eles.  Vamos criar um protocolo especial: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SegueHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">associatedtype</span></span> <span class="hljs-type"><span class="hljs-type">SegueIdentifier</span></span>: <span class="hljs-type"><span class="hljs-type">RawRepresentable</span></span> }</code> </pre> <br>  <code>UIViewController</code> que suporta esse protocolo precisar√° definir um tipo aninhado com o mesmo nome.  Ele lista todos os identificadores segues que este <code>UIViewController</code> pode processar: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StartViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SegueHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SegueIdentifier</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> signIn, signUp } }</code> </pre> <br>  Al√©m disso, na extens√£o de protocolo <code>SegueHandler</code> , definimos duas fun√ß√µes: uma aceita um <code>UIStoryboardSegue</code> e retorna o valor correspondente de <code>SegueIdentifier</code> , e a outra simplesmente chama <code>performSegue</code> , usando a entrada <code>SegueIdentifier</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SegueHandler</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Self</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SegueIdentifier</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RawValue</span></span></span><span class="hljs-class"> == </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">performSegue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(withIdentifier segueIdentifier: SegueIdentifier, sender: AnyObject?)</span></span></span></span> { performSegue(withIdentifier: segueIdentifier.rawValue, sender: sender) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">segueIdentifier</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> segue: UIStoryboardSegue)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">SegueIdentifier</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> identifier = segue.identifier, <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> identifierCase = <span class="hljs-type"><span class="hljs-type">SegueIdentifier</span></span>(rawValue: identifier) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">fatalError</span></span>(<span class="hljs-string"><span class="hljs-string">"Invalid segue identifier \(String(describing: segue.identifier))."</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> identifierCase } }</code> </pre> <br>  E agora em um <code>UIViewController</code> que suporta o novo protocolo, voc√™ pode trabalhar com <code>prepare(for:sender:)</code> seguinte maneira: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StartViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SegueHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SegueIdentifier</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> signIn, signUp } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> segue: UIStoryboardSegue, sender: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> segueIdentifier(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: segue) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .signIn: <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"signIn"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .signUp: <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"signUp"</span></span>) } } }</code> </pre> <br>  E execute segue assim: <br><br><pre> <code class="swift hljs">performSegue(withIdentifier: .signIn, sender: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>)</code> </pre> <br>  Se voc√™ adicionar um novo identificador ao <code>SegueIdentifier</code> , o Xcode certamente o for√ßar√° a processar no <code>switch/case</code> . <br><br>  Outra op√ß√£o para se livrar de literais de strings, como identificadores segues e outros, √© usar ferramentas de gera√ß√£o de c√≥digo como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">R.swift</a> . <br><br><h3>  7. Os storyboards s√£o menos flex√≠veis que o c√≥digo. </h3><br>  Sim, isso √© verdade.  Se a tarefa √© criar uma tela complexa com anima√ß√µes e efeitos que o Storyboard n√£o pode manipular, voc√™ precisar√° usar o c√≥digo! <br><br><h3>  8. Os storyboards n√£o permitem alterar o tipo de <code>UIViewControllers</code> especiais </h3><br>  Por exemplo, quando voc√™ precisar alterar o tipo de <code>UITableViewController</code> para <code>UICollectionViewController</code> , √© necess√°rio excluir o objeto, adicionar um novo com outro tipo e reconfigur√°-lo.  Embora esse n√£o seja um caso frequente, √© importante notar que essas altera√ß√µes s√£o feitas mais rapidamente no c√≥digo. <br><br><h3>  9. Os storyboards adicionam duas depend√™ncias adicionais ao projeto.  Eles podem conter erros que o desenvolvedor n√£o pode corrigir. </h3><br>  Este √© o Interface Builder e o analisador de Storyboards.  Tais casos s√£o raros e geralmente podem ser contornados por outras solu√ß√µes. <br><br><h3>  10. Revis√£o sofisticada do c√≥digo </h3><br>  Lembre-se de que a revis√£o de c√≥digo n√£o √© realmente uma pesquisa de erros.  Sim, eles s√£o encontrados no processo de visualiza√ß√£o do c√≥digo, mas o objetivo principal √© identificar pontos fracos que podem criar problemas a longo prazo.  Para Storyboards, este √© principalmente o trabalho do <b>Layout Autom√°tico</b> .  N√£o deve haver <b>amb√≠guos</b> e <b>extraviados</b> .  Para encontr√°-los, basta usar a pesquisa no XML do Storyboard para as linhas "amb√≠guas =" YES "" e "extraviado =" YES "" ou basta abrir o Storyboard no Interface Builder e procurar pontos vermelhos e amarelos: <br><img src="https://habrastorage.org/webt/u4/bw/l5/u4bwl5psqejad5ziovb2bjxy1eq.png"><br>  No entanto, isso pode n√£o ser suficiente.  Conflitos entre restri√ß√µes tamb√©m podem ser detectados enquanto o aplicativo est√° em execu√ß√£o.  Se uma situa√ß√£o semelhante ocorrer, as informa√ß√µes sobre isso ser√£o exibidas no console.  Como esses casos n√£o s√£o incomuns, sua pesquisa tamb√©m deve ser levada a s√©rio. <br><br>  Todo o resto - combinando a posi√ß√£o e o tamanho dos elementos com o design, a liga√ß√£o correta do <code>IBOutlets</code> e <code>IBActions</code> - n√£o √© para revis√£o de c√≥digo. <br><br>  Al√©m disso, √© importante fazer confirma√ß√µes com mais frequ√™ncia; ser√° mais f√°cil para o revisor visualizar as altera√ß√µes em peda√ßos pequenos.  Ele ser√° mais capaz de se aprofundar nos detalhes sem perder nada.  Isso, por sua vez, ter√° um efeito positivo na qualidade da revis√£o do c√≥digo. <br><br><h3>  Sum√°rio </h3><br>  Na lista de falhas do Storyboards, deixei 4 itens (em ordem decrescente de seu valor): <br><br><ol><li>  Os storyboards t√™m dificuldade em gerenciar conflitos ao mesclar altera√ß√µes. <br></li><li>  Os storyboards s√£o menos flex√≠veis que o c√≥digo. <br></li><li>  Os storyboards s√£o fr√°geis, um erro pode levar a uma falha no tempo de execu√ß√£o. <br></li><li>  Voc√™ n√£o pode usar inicializadores personalizados para <code>UIViewControllers</code> criados no Storyboard. <br></li></ol><br><h2>  Os benef√≠cios </h2><br><h3>  1. Visualiza√ß√£o da interface do usu√°rio e restri√ß√µes </h3><br>  Mesmo se voc√™ √© iniciante e acabou de iniciar um projeto desconhecido, pode encontrar facilmente o ponto de entrada do aplicativo e como chegar √† tela desejada.  Voc√™ sabe como ser√° cada bot√£o, r√≥tulo ou campo de texto, qual posi√ß√£o eles tomar√£o, como as restri√ß√µes os afetam, como eles interagem com outros elementos.  Com apenas alguns cliques, voc√™ pode criar facilmente um novo <code>UIView</code> , personalizar sua apar√™ncia e comportamento.  O Layout autom√°tico nos permite trabalhar com o <code>UIView</code> naturalmente, como se diss√©ssemos: "Esse bot√£o deve estar √† esquerda desse r√≥tulo e ter a mesma altura".  Essa experi√™ncia na interface do usu√°rio √© intuitiva e eficaz.  Voc√™ pode tentar dar exemplos em que o c√≥digo bem escrito economiza mais tempo ao criar alguns elementos da interface do usu√°rio, mas globalmente isso n√£o muda muito.  Storyboard faz seu trabalho bem. <br><br>  Separadamente, observe o Layout autom√°tico.  Essa √© uma ferramenta muito poderosa e √∫til, sem a qual seria dif√≠cil criar um aplicativo que suporte todos os diferentes tamanhos de tela.  O Interface Builder permite que voc√™ veja o resultado do trabalho com o Layout Autom√°tico sem iniciar o aplicativo e, se algumas restri√ß√µes n√£o se encaixarem no esquema geral, o Xcode o alertar√° imediatamente sobre isso.  Obviamente, h√° casos em que o Interface Builder n√£o √© capaz de fornecer o comportamento necess√°rio de alguma interface muito din√¢mica e complexa; ent√£o, voc√™ precisa confiar no c√≥digo.  Mas mesmo nessas situa√ß√µes, voc√™ pode fazer a maior parte no Interface Builder e complement√°-lo com apenas algumas linhas de c√≥digo. <br><br>  Vejamos alguns exemplos que demonstram os recursos √∫teis do Interface Builder. <br><br><h4>  Tabelas din√¢micas baseadas no <code>UIStackView</code> </h4><br>  Crie um novo <code>UIViewController</code> , adicione um <code>UIScrollView</code> em tela cheia: <br><img src="https://habrastorage.org/webt/oh/-g/c8/oh-gc88tyx_mhu5zm6iehrnpvrk.png"><br>  No <code>UIScrollView</code> adicione um <code>UIStackView</code> vertical, encaixe-o nas bordas e defina a altura e a largura iguais ao <code>UIScrollView</code> .  Nesta altura, atribua <b>prioridade = Baixa (250)</b> : <br><img src="https://habrastorage.org/webt/hp/dv/v-/hpdvv-gg-hkeh_xy5k2vbbcznr0.png"><br>  Em seguida, crie todas as c√©lulas necess√°rias e adicione-as ao <code>UIStackView</code> .  Talvez seja o <code>UIView</code> comum em uma √∫nica c√≥pia, ou talvez o <code>UIView</code> , para o qual criamos nosso pr√≥prio arquivo Xib.  De qualquer forma, toda a interface do usu√°rio dessa tela est√° no Storyboard e, gra√ßas ao Layout autom√°tico configurado corretamente, a rolagem funcionar√° perfeitamente, adaptando-se ao conte√∫do: <br><br><img src="https://habrastorage.org/webt/vg/pr/dl/vgprdl652o0neubp6d87fvcyupk.gif" width="320" height="588"><br><br>  Tamb√©m podemos fazer com que as c√©lulas se adaptem ao tamanho do seu conte√∫do.  Adicione <code>UILabel</code> a cada c√©lula, vincule-os √†s bordas: <br><img src="https://habrastorage.org/webt/ei/u0/if/eiu0ifpkzcudjmimrknducpg5f4.png"><br>  J√° est√° claro como tudo ficar√° no tempo de execu√ß√£o.  Voc√™ pode anexar qualquer a√ß√£o √†s c√©lulas, por exemplo, alternando para outra tela.  E tudo isso sem uma √∫nica linha de c√≥digo. <br>  Al√©m disso, se voc√™ definir <code>hidden = true</code> para um <code>UIView</code> partir de um <code>UIStackView</code> , ele n√£o apenas oculta, mas tamb√©m n√£o ocupa espa√ßo.  <code>UIStackView</code> recalcula automaticamente seus tamanhos: <br><br><img src="https://habrastorage.org/webt/b8/cs/ch/b8cschy8jwotcb1fge4ew2ip43s.gif"><br><br><h4>  C√©lulas de auto-dimensionamento </h4><br>  No <b>inspetor Tamanho da</b> tabela, defina <b>Altura da linha = Autom√°tico</b> e <b>Estimativa</b> - para algum valor m√©dio: <br><img src="https://habrastorage.org/webt/p2/tp/de/p2tpdecyxveakvtukce9maxkrbq.png"><br>  Para que isso funcione, as restri√ß√µes devem ser configuradas corretamente nas pr√≥prias c√©lulas e permitir o c√°lculo preciso da altura da c√©lula com base no conte√∫do em tempo de execu√ß√£o.  Se n√£o estiver claro o que est√° em jogo, h√° uma explica√ß√£o muito boa na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o oficial</a> . <br><br>  Como resultado, ao iniciar o aplicativo, veremos que tudo √© exibido corretamente: <br><img src="https://habrastorage.org/webt/yi/mb/4q/yimb4q-qt5ydm3_3ynqavuvr4ga.png" width="432" height="702"><br><h4>  Mesa de dimensionamento autom√°tico </h4><br>  Voc√™ precisa implementar o comportamento desta tabela: <br><br><img src="https://habrastorage.org/webt/6g/pp/bf/6gppbf-ma4zin0czafyjn3wfj08.gif" width="320" height="588"><br><br>  Como conseguir uma mudan√ßa din√¢mica semelhante na altura?  Ao contr√°rio de <code>UILabel</code> , <code>UIButton</code> e outras subclasses do <code>UIView</code> , √© um pouco mais dif√≠cil fazer uma tabela, pois o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Tamanho do Conte√∫do Intr√≠nseco</a> n√£o depende do tamanho das c√©lulas dentro dela.  Ela n√£o pode calcular sua altura com base no conte√∫do, mas h√° uma oportunidade para ajud√°-la com isso. <br><br>  Observe que em algum momento do v√≠deo a altura da tabela para de mudar, atingindo um determinado valor m√°ximo.  Isso pode ser conseguido configurando a <b>restri√ß√£o de altura</b> da tabela com o valor <b>Rela√ß√£o = Menor que ou igual</b> : <br><img src="https://habrastorage.org/webt/xk/47/rc/xk47rcebixtr42k1ka4wqagftyy.png"><br>  Nesse est√°gio, o Interface Builder ainda n√£o sabe qual ser√° a altura da tabela, ele apenas conhece seu valor m√°ximo igual a 200 (da restri√ß√£o de altura).  Como observado anteriormente, o Tamanho do conte√∫do intr√≠nseco n√£o √© igual ao conte√∫do da tabela.  No entanto, temos a capacidade de definir o espa√ßo reservado no campo <b>Tamanho intr√≠nseco</b> : <br><img src="https://habrastorage.org/webt/tb/i7/eu/tbi7eut1jafonqjknoyabqyev_q.png"><br>  Este valor √© v√°lido apenas ao trabalhar com o Interface Builder.  Obviamente, o Tamanho do Conte√∫do Intr√≠nseco n√£o precisa ser igual a esse valor no tempo de execu√ß√£o.  Acabamos de dizer ao Interface Builder que tudo est√° sob controle. <br><br>  Em seguida, crie uma nova subclasse da tabela <code>CustomTableView</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomTableView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UITableView</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contentSize: <span class="hljs-type"><span class="hljs-type">CGSize</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">didSet</span></span> { invalidateIntrinsicContentSize() } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> intrinsicContentSize: <span class="hljs-type"><span class="hljs-type">CGSize</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> contentSize } }</code> </pre> <br>  Um daqueles casos em que o c√≥digo √© necess√°rio.  Aqui chamamos <code>invalidateIntrinsicContentSize</code> sempre que o <code>contentSize</code> da tabela √© alterado.  Isso permitir√° que o sistema aceite o novo tamanho do conte√∫do intr√≠nseco.  Por sua vez, retorna <code>contentSize</code> , for√ßando a tabela a ajustar dinamicamente sua altura e exibir um certo n√∫mero de c√©lulas sem rolar.  A rolagem aparece no momento em que atingimos o limite de restri√ß√£o de altura. <br><br>  Todos esses tr√™s recursos do Interface Builder podem ser combinados.  Eles adicionam mais flexibilidade √†s op√ß√µes de organiza√ß√£o de conte√∫do sem a necessidade de restri√ß√µes adicionais ou qualquer <code>UIView</code> . <br><br><h3>  2. A capacidade de ver instantaneamente o resultado de suas a√ß√µes </h3><br>  Se voc√™ redimensionou o <code>UIView</code> , o moveu alguns pontos para o lado ou alterou a cor do plano de fundo, voc√™ ver√° imediatamente como ele ficar√° no tempo de execu√ß√£o sem precisar iniciar o aplicativo.  N√£o √© necess√°rio se perguntar por que algum bot√£o n√£o apareceu na tela ou por que o comportamento do <code>UIView</code> n√£o <code>UIView</code> desejado. <br><br>  O uso do <code>@IBInspectable</code> revela esse benef√≠cio ainda mais interessante.  Adicione dois <code>UILabel</code> e duas propriedades ao <code>RedView</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RedView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">XibView</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> titleLabel: <span class="hljs-type"><span class="hljs-type">UILabel!</span></span> <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> subtitleLabel: <span class="hljs-type"><span class="hljs-type">UILabel!</span></span> <span class="hljs-meta"><span class="hljs-meta">@IBInspectable</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title: <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-string"><span class="hljs-string">""</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">didSet</span></span> { titleLabel.text = title } } <span class="hljs-meta"><span class="hljs-meta">@IBInspectable</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> subtitle: <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-string"><span class="hljs-string">""</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">didSet</span></span> { subtitleLabel.text = subtitle } } }</code> </pre> <br>  Dois novos campos aparecer√£o no <b>Inspetor de atributos</b> para <code>RedView</code> - <code>Title</code> e <code>Subtitle</code> , que marcamos como <code>@IBInspectable</code> : <br><img src="https://habrastorage.org/webt/wv/rh/nn/wvrhnnegpjpyo7zrj7857dlujom.png"><br>  Se tentarmos inserir valores nesses campos, veremos imediatamente como tudo ficar√° no tempo de execu√ß√£o: <br><br><img src="https://habrastorage.org/webt/hn/bd/6u/hnbd6urq0ebbpghnuiaueovz38i.gif"><br><br>  Voc√™ pode controlar qualquer coisa: <code>cornerRadius</code> , <code>borderWidth</code> , <code>borderColor</code> .  Por exemplo, estendemos a classe base <code>UIView</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIView</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@IBInspectable</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cornerRadius: <span class="hljs-type"><span class="hljs-type">CGFloat</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.cornerRadius = newValue } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.cornerRadius } } <span class="hljs-meta"><span class="hljs-meta">@IBInspectable</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> borderWidth: <span class="hljs-type"><span class="hljs-type">CGFloat</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.borderWidth = newValue } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.borderWidth } } <span class="hljs-meta"><span class="hljs-meta">@IBInspectable</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> borderColor: <span class="hljs-type"><span class="hljs-type">UIColor?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.borderColor = newValue?.cgColor } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.borderColor != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ? <span class="hljs-type"><span class="hljs-type">UIColor</span></span>(cgColor: layer.borderColor!) : <span class="hljs-literal"><span class="hljs-literal">nil</span></span> } } <span class="hljs-meta"><span class="hljs-meta">@IBInspectable</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rotate: <span class="hljs-type"><span class="hljs-type">CGFloat</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { transform = <span class="hljs-type"><span class="hljs-type">CGAffineTransform</span></span>(rotationAngle: newValue * .pi/<span class="hljs-number"><span class="hljs-number">180</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> } } }</code> </pre> <br>  Vimos que o Inspetor de Atributos do objeto <code>RedView</code> adquiriu mais 4 novos campos, com os quais voc√™ tamb√©m pode jogar: <br><br><img src="https://habrastorage.org/webt/gq/ib/bm/gqibbmd2an0a4zezig2iuifx5tm.gif"><br><br><h3>  3. Visualize todos os tamanhos de tela de uma s√≥ vez </h3><br>  Ent√£o jogamos os elementos necess√°rios na tela, ajustamos sua apar√™ncia e adicionamos as restri√ß√µes necess√°rias.  Como descobrimos se o conte√∫do ser√° exibido corretamente em diferentes tamanhos de tela?  Obviamente, voc√™ pode executar o aplicativo em cada simulador, mas isso levar√° muito tempo.  Existe uma op√ß√£o melhor: o Xcode possui um modo de visualiza√ß√£o, que permite ver v√°rios tamanhos de tela ao mesmo tempo sem iniciar o aplicativo. <br><br>  Chamamos o <b>editor Assistant</b> , nele clicamos no primeiro segmento da barra de transi√ß√£o, selecione <b>Visualizar -&gt; Configura√ß√µes.storyboard</b> (como exemplo): <br><img src="https://habrastorage.org/webt/aw/mg/nr/awmgnrb4ajxr49hrygbe70fz5is.png"><br>  Inicialmente, vemos apenas uma tela, mas podemos adicionar o necess√°rio, clicando em "+" no canto inferior esquerdo e selecionando os dispositivos necess√°rios na lista: <br><img src="https://habrastorage.org/webt/18/3f/eo/183feokkgdpycsxlcr3a1upo8jk.png"><br>  Al√©m disso, se o Storyboard suportar v√°rios idiomas, voc√™ poder√° ver como a tela selecionada ficar√° com cada um deles: <br><img src="https://habrastorage.org/webt/hy/nf/6g/hynf6gc-nzhc30fxq0ir2a2uzcc.png"><br>  O idioma pode ser selecionado para todas as telas de uma vez e para cada uma individualmente. <br><br><h3>  4. Removendo o c√≥digo da UI do modelo </h3><br>  A cria√ß√£o de uma interface com o usu√°rio sem o Interface Builder √© acompanhada por uma grande quantidade de c√≥digo padr√£o ou por superclasses e extens√µes que requerem trabalho de manuten√ß√£o adicional.  Esse c√≥digo pode se infiltrar em outras partes do aplicativo, dificultando a leitura e a pesquisa.  O uso de Storyboards e Xibs pode descarregar o c√≥digo, tornando-o mais focado na l√≥gica. <br><br><h3>  5. Classes de tamanho </h3><br>  Todos os anos, novos dispositivos aparecem, para os quais voc√™ precisa adaptar a interface do usu√°rio.  O conceito de <b>varia√ß√µes</b> de <b>caracter√≠sticas</b> e, em particular, <b>classes de tamanho</b> , que permitem criar interface do usu√°rio para qualquer tamanho e orienta√ß√£o da tela, ajuda nisso. <br><br>  As classes de tamanho classificam a altura (h) e a largura (w) das telas do dispositivo em termos de <b>compactos</b> e <b>regulares</b> ( <b>C</b> e <b>R</b> ).  Por exemplo, o iPhone 8 possui uma classe de tamanho <b>(wC hR)</b> na orienta√ß√£o retrato e <b>(wC hC)</b> na paisagem, e o iPhone 8 Plus possui <b>(wC hR)</b> e <b>(wR hC),</b> respectivamente.  O restante dos dispositivos pode ser encontrado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em um Storyboard ou Xib para cada uma das classes de tamanho, voc√™ pode armazenar seu pr√≥prio conjunto de dados, e o aplicativo usar√° o apropriado, dependendo da orienta√ß√£o do dispositivo e da tela em tempo de execu√ß√£o, identificando a classe de tamanho atual. Se alguns par√¢metros de layout forem os mesmos para todas as classes de tamanho, eles poder√£o ser configurados na categoria " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualquer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", que j√° est√° selecionada por padr√£o. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por exemplo, configure o tamanho da fonte, dependendo da classe de tamanho. Selecionamos o dispositivo iPhone 8 Plus para visualiza√ß√£o de retrato no Storyboard e adicionamos uma nova condi√ß√£o para </font></font><code>font</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: se a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">largura for Regular</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (defina o restante como "Qualquer"), o tamanho da fonte dever√° ser 37:</font></font><br><img src="https://habrastorage.org/webt/bd/bs/-7/bdbs-7i602wtlxemns-hm3jz3ps.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora, se alterarmos a orienta√ß√£o da tela, o tamanho da fonte aumentar√° - uma nova condi√ß√£o funcionar√°, pois o iPhone 8 Plus possui uma classe de tamanho </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(wR hC)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na orienta√ß√£o paisagem </font><font style="vertical-align: inherit;">. No Storyboard, dependendo da classe de tamanho, voc√™ tamb√©m pode ocultar Views, ativar / desativar restri√ß√µes, alterar seu valor </font></font><code>constant</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e muito mais. Leia mais sobre como fazer tudo isso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na captura de tela acima, vale destacar o painel inferior com a op√ß√£o de dispositivo para exibir o layout. Ele permite que voc√™ verifique rapidamente a adaptabilidade da interface do usu√°rio em qualquer dispositivo e com qualquer orienta√ß√£o da tela e tamb√©m mostra a classe de tamanho da configura√ß√£o atual (ao lado do nome do dispositivo). Entre outras coisas, √† direita, existe um bot√£o ¬´ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vary for Traits</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font><font style="vertical-align: inherit;">Seu objetivo √© permitir varia√ß√µes de caracter√≠sticas apenas para uma categoria espec√≠fica de largura, altura ou largura e altura ao mesmo tempo. </font><font style="vertical-align: inherit;">Por exemplo, selecionando um iPad com uma classe de tamanho </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(wR hR)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , clique em "Variar por caracter√≠sticas" e marque a caixa ao lado de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">largura</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">altura</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Agora, todas as altera√ß√µes subsequentes no layout ser√£o aplicadas apenas a dispositivos com </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(wR hR)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> at√© clicar em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclu√≠do Variando</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2>  Conclus√£o </h2><div class="scrollable-table"><table><tbody><tr><th>  # <br></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Desvantagens </font></font><br></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Os benef√≠cios </font></font><br></th></tr><tr><td>  1 <br></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Conflitos dif√≠ceis de governar </font></font><br></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Visualiza√ß√£o e restri√ß√µes da interface do usu√°rio </font></font><br></td></tr><tr><td>  2 <br></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> N√£o √© t√£o flex√≠vel quanto o c√≥digo </font></font><br></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A capacidade de ver instantaneamente o resultado de suas a√ß√µes </font></font><br></td></tr><tr><td>  3 <br></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Um erro pode levar a uma falha no tempo de execu√ß√£o. </font></font><br></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Visualizar todos os tamanhos de tela de uma s√≥ vez </font></font><br></td></tr><tr><td>  4 <br></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Voc√™ n√£o pode usar inicializadores personalizados para </font></font><code>UIViewControllers</code> <br></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Removendo o c√≥digo da interface do usu√°rio do modelo </font></font><br></td></tr><tr><td>  5 <br></td><td></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Classes de tamanho </font></font><br></td></tr></tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vimos que os Storyboards t√™m seus pontos fortes e fracos. </font><font style="vertical-align: inherit;">Minha opini√£o √© que voc√™ n√£o deve se recusar completamente a us√°-los. </font><font style="vertical-align: inherit;">Quando usados ‚Äã‚Äãcorretamente, trazem grandes benef√≠cios e ajudam a resolver tarefas com efic√°cia. </font><font style="vertical-align: inherit;">Voc√™ s√≥ precisa aprender como priorizar e esquecer argumentos como "N√£o gosto de Storyboards" ou "Estou acostumado a fazer isso".</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt456086/">https://habr.com/ru/post/pt456086/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt456072/index.html">Dav1d - o decodificador AV1 mais r√°pido agora no Firefox por padr√£o</a></li>
<li><a href="../pt456076/index.html">Meetup sobre PyDaCon no grupo Mail.ru: 22 de junho</a></li>
<li><a href="../pt456078/index.html">Proje√ß√£o de conflito corporativo na conectividade de rede</a></li>
<li><a href="../pt456082/index.html">Como desenvolvemos recomenda√ß√µes personalizadas de produtos</a></li>
<li><a href="../pt456084/index.html">Kubernetes 1.15: Vis√£o geral dos destaques</a></li>
<li><a href="../pt456088/index.html">Problemas de an√°lise de big data</a></li>
<li><a href="../pt456090/index.html">Introdu√ß√£o ao teste de unidade no Unity</a></li>
<li><a href="../pt456092/index.html">Sete sinais preocupantes de que voc√™ depende do clima, mesmo que voc√™ n√£o pense</a></li>
<li><a href="../pt456094/index.html">Lemos as fichas t√©cnicas 2: SPI no STM32; Temporizadores PWM e interrup√ß√µes no STM8</a></li>
<li><a href="../pt456096/index.html">O que o leitor comum de tempos de nerd faz enquanto paira nas nuvens</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>