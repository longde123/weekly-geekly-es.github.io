<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ๏ธ ๐ #โฃ ุฎุงุฏู ุฏูู ุงูููุฏูู ESP32-CAM ุงูุฐู ูุนุฑุถ I2C ู SPI ๐ฝ โ ๐ถ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุญุฏุฉ CAM ESP-32 ูุน ูุงููุฑุง ูู Diymore 

 ุฎุงุฏู ุจุซ ุงูููุฏูู ESP32-CAM 
 ูุซุงู ููุงุณุชุฎุฏุงู ููุง . 

 ูุฌุจ ุนููู ุฃููุงู ุชุซุจูุช ุงูููุชุจุงุช: Esp32 board ูู Arduino Ide ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฎุงุฏู ุฏูู ุงูููุฏูู ESP32-CAM ุงูุฐู ูุนุฑุถ I2C ู SPI</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463157/" style=";text-align:right;direction:rtl">  ูุญุฏุฉ CAM ESP-32 ูุน ูุงููุฑุง ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Diymore</a> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/fe/it/oc/feitoc3nxkss7zc6ocsw7cmuyho.jpeg" width="500"></div><br><h3 style=";text-align:right;direction:rtl">  ุฎุงุฏู ุจุซ ุงูููุฏูู ESP32-CAM </h3><br>  ูุซุงู ููุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . <br><br>  ูุฌุจ ุนููู ุฃููุงู ุชุซุจูุช ุงูููุชุจุงุช: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Esp32 board ูู Arduino Ide Windows</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Esp32 board ูู Arduino Ide Linux ู Mac</a> <br><br>  ุงูุฅุนุฏุงุฏุงุช ุงูุชูุตูููุฉ ูู ุงูููุงูุฉ. <br><br>  ูู ุญุงูุชู ุ ุงุณุชุฎุฏูุช ูุญุฏุฉ AI-THINKER ุบูุฑ ุงูููุถุจุทุฉ <br>  #define CAMERA_MODEL_AI_THINKER <br><br>  ูุธููุฉ ุงูุชุนุฑู ุนูู ุงููุฌู ูุง ุชุนูู ุจุงููุณุจุฉ ูู.  ูุงู ุงูุชุนููู ูู ุงูููุงู ูููุฏูุง. <br><a name="habracut"></a><br>  ูุจุฏู ุฃู ุงูุชุนุฑู ุนูู ุงููุฌูู ูู ูุนุฏ ูุนูู (ุนูู ุงูุฃูู ูุน ุงูุจุฑูุงูุฌ ุงููุซุงู) ุนูุฏ ุงุณุชุฎุฏุงู ุงูุฃุณุงุณูุฉ 1.02 ESP.  ุงูุชุฑุงุฌุน ุฅูู 1.01 ุงูุฃุณุงุณูุฉ ูุงุณุชุฎุฏุงู ุงูุจุฑูุงูุฌ ุงููุซุงู ููุชูู ุฅูู ูุฐุง ุงูุฃุณุงุณูุฉ ุ "ุฅุตูุงุญ" <br><br>  ุจุนุฏ ุงูุชุฑุงุฌุน ุฅูู ุงูุฅุตุฏุงุฑ ุงูุณุงุจู ูู ุงูููุชุจุฉ 1.01 ูู ุดูุก ูุนูู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/_2/tg/47/_2tg47ntvkqznzh-nr_jhqzitz8.png"></div><br>  ูุฏู ุฒูุฌ ูู ุดุงุดุงุช I2C 128x64 ู TFT SPI 128x128 <br><br>  ุงููุงุฏุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">OV7670 ูุน FIFO</a> ููููุฉ ุชูุตูู ุงููุงููุฑุง ุฅูู ุงูุดุงุดุฉ ุฅุฐุง ูู ููู ูุฏูู ูุญุฏุฉ CAM.  ุฏุนู ูุงููุฑุงุช OV2640 ู OV7670 <br><br>  ูู ููุช ูุชุงุจุฉ ูุฐุง ุงูุชูุฑูุฑ ุ ุนููุช ูุง ููู ุจุงููุณุจุฉ ูู <br><br>  ูุงููุฑุง ESP32 + ุฎุงุฏู Wifi + ุดุงุดุฉ I2C (AdaFruit) <br>  ูุงููุฑุง ESP32 + ุดุงุดุฉ SPI 1.44 ุจูุตุฉ TFT 128 ร 128 v1.1 (AdaFruit) <br>  ูุงููุฑุง ESP32 + ุดุงุดุฉ SPI 1.8 ุจูุตุฉ TFT 128 * 160 (ููุชุจุฉ Espressif) <br><br>  ูุชุนุงุฑุถ ุจุฑูุงูุฌ WiFi ูุน ูุงูู SPI.  ุงูุญู ุงููููู ูุงุณุชุฎุฏุงู ููุชุจุฉ ูุฎุชููุฉ.  ูุดุฃุช ุงููุดููุฉ ูู ููุช ุชููุฆุฉ ูุญุฏุฉ WiFi. <br><br>  ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ูู ุฃู ูุญุฏุฉ ESP32-CAM ูุฏููุง ุนุฏุฏ ูุญุฏูุฏ ูู ุงูุฃุฑุฌู ุงูุญุฑุฉ.  ูุชู ุงุณุชุฎุฏุงู ุฌุฒุก ูู ุงูููุงูุฐ ูููุงููุฑุง ุ ุฌุฒุก ุจุงูุชูุงุฒู ูุน ุจุทุงูุฉ ุงูุฐุงูุฑุฉ ุงูุฑูููุฉ ุงููุคููุฉ.  ููุตู ุจุทุงูุฉ sd ูุซุจุช ุนูู ุงูููุญุฉ.  ุงุณุชูุชุงุฌ ุขุฎุฑ (IO4) ูู ูุตุจุงุญ ูุฏูู LED. <br><br>  ุดุงุดุฉ I2C B / W ููุณุช ุฐุงุช ุฃูููุฉ ุฎุงุตุฉ ููุงุณุชุฎุฏุงู ุงูุญูููู ูุน ุงูุตูุฑุฉ ุงููุงุฑุฏุฉ ูู ุงููุงููุฑุง.  ููู TFT ูุนุงููุฉ ุงูุฏูุฉ.  ุนูู ุฐูู ููููู ุฃู ุชุฑู ุจุงููุนู ุงููุฌู.  ุนูู ูุซู ูุฐุง ุงูุนุฑุถ ุฃู ุฏูุฉ ุฃุนูู ุจูููู ุ ููููู ุนูู Door Door <br><br>  ุณุฃููู ุนูู ุงูููุฑ ุฃู ููุชุจุฉ AdaFruit ููุณุช ุงูุฃุณุฑุน.  ุชูููุช ูู ุนุฑุถ ุจุถุน ุฅุทุงุฑุงุช ูู ุงูุซุงููุฉ.  ูู ุงูุฃูุถู ุงุณุชุฎุฏุงู ุงูููุชุจุงุช ุงูุชู ุชุนูู ุจูุณุชูู ููุฎูุถ.  ููููู ูู ุฃุชููู ูู ุงูุญุตูู ุนูู ESP32_TFT_library ูุน ุดุงุดุชู 1.44 "128 ร 128 SPI V1.1. ุฑุจูุง ILI9163 ุบูุฑ ูุฏุนูู. ุฃุฎุฐุช 1.8" 128 * 160 SPI TFT ูุชูููุช ูู ุงูุถุบุท ุนูู ุญูุงูู 12 FPS!  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุงุฑุชุจุงุท</a> . <br><br>  ููุงู ุนุฏุฉ ููุชุจุงุช ุชุนูู ุจุดูู ุฃุณุฑุน.  ููู ุงูุจุนุถ ูุง ูุชู ูููู ุฅูู esp-32 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">link</a> ): <br><br>  4.98 ุซุงููุฉ Adafruit_ST7735 <br>  1.71 ุซุงููุฉ ST7735X_kbv <br>  1.30 ุซุงููุฉ PDQ_ST7735 <br><br>  ุงูููุฏูู ูุจุฏู ุฑุงุฆุนุง: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/HnhsxP0W0m4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  ุนูุฏ ุงุณุชุฎุฏุงู <s>ูููุฐูู ุ ูููู ุฃู ูุชููู</s> ุฃุญุฏ ููุงูุฐ ุฃุฌูุฒุฉ HSPI ุฃู VSPI ุนูู ูุชุญูู ุงูุดุงุดุฉ ูุนุฑุถู ูุน ุจุฑูุงูุฌ ุงูุชุดุบูู ILI9341 30 ุฅุทุงุฑูุง ูู ุงูุซุงููุฉ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุฑุชุจุงุท</a> ). <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/7a/39/93/7a3993k5m_j9z5f2juglv5s9h9g.png"></div><br><br>  ูููู ููุง ููุช ุณุงุจููุง ูู ูุญุฏุฉ ESP32-CAM ุ ูุฅู SPI ูุงุญุฏ ููุท ูุฌุงูู.  ูุชู ุนุฑุถู ุนูู ุฃุฑูุงู PIN ุงูุชุงููุฉ: <br><br>  IO2 - DC (A0) <br>  IO14 - CLK <br>  IO15 - CS <br>  IO13 - MOSI (SDA) <br>  IO12 - MISO (ุงูุฅุฏุฎุงู. ุบูุฑ ูุณุชุฎุฏู) <br><br>  IO0 - BCKL (ุงูุฎูููุฉ. ุบูุฑ ูุณุชุฎุฏู) <br>  IO16 - RST <br><br><img src="https://habrastorage.org/webt/ob/wr/wy/obwrwyztxqm6ct4dtlxe_fggdim.png"><br><br><img src="https://habrastorage.org/webt/nr/7e/dg/nr7edg2broaykspjtyxncso2zxy.png"><br><br>  ูุงูุช ุงูููุชุจุฉ ุงูุฃููู ุงูุชู ุฌุฑุจุชูุง ูู AdaFruit SSD1306 <br><br><h3 style=";text-align:right;direction:rtl">  I2C 128x64 ุงูุฃุฒุฑู ุดุงุดุฉ OLED </h3><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ec/xl/ji/ecxljimycqq42q16yxswiehsv98.png"></div><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;Wire.h&gt; #include &lt;Adafruit_GFX.h&gt; #include &lt;Adafruit_SSD1306.h&gt; #define SCREEN_WIDTH 128 // OLED display width, in pixels #define SCREEN_HEIGHT 64 // OLED display height, in pixels // Declaration for an SSD1306 display connected to I2C (SDA, SCL pins) #define OLED_RESET -1 // Reset pin # (or -1 if sharing Arduino reset pin) Adafruit_SSD1306 display; void init_display(){ pinMode(14,INPUT_PULLUP); pinMode(15,INPUT_PULLUP); Wire.begin(14,15); display = Adafruit_SSD1306(SCREEN_WIDTH, SCREEN_HEIGHT, &amp;Wire, OLED_RESET); if(!display.begin(SSD1306_SWITCHCAPVCC, 0x3C)) { // Address 0x3D for 128x64 Serial.println(F("SSD1306 allocation failed")); for(;;); // Don't proceed, loop forever } ....</span></span></span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">camera_capture ()</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> BACKCOLOR 0x0000 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// Black #define PIXELCOLOR 0xFFFF // White #define FRAME_WIDTH 320 #define FRAME_HEIGHT 240 uint16_t pixel_color = 0; esp_err_t camera_capture(){ //acquire a frame camera_fb_t * fb = esp_camera_fb_get(); if (!fb) { ESP_LOGE(TAG, "Camera Capture Failed"); return ESP_FAIL; } int i = 0; for(int y = 0; y &lt; SCREEN_HEIGHT; y++){ for(int x = 0; x &lt; SCREEN_WIDTH; x++){ i = y * FRAME_WIDTH + x; // FRAMESIZE_QVGA // 320x240 char ch = (char)fb-&gt;buf[i]; if (ch &gt; 128) pixel_color = WHITE; else pixel_color = BLACK; // Draw a single pixel in white display.drawPixel(x, y, pixel_color); } } display.display(); //return the frame buffer back to the driver for reuse esp_camera_fb_return(fb); Serial.println("Capture frame ok."); return ESP_OK; }</span></span></span></span></code> </pre><br></div></div><br>  ุนูุฏ ุงูุนูู ูู esp32 ุ ูุชู ุงุณุชุฎุฏุงู ูุถุงูุงุฉ ุงูุจุฑุงูุฌ I2C.  ุชุดุงุฑู IO14 ู IO15.  ูููู ุงุณุชุฎุฏุงู ุฃู ููุงูุฐ ูุฌุงููุฉ ุชูุฑูุจูุง ุ ููุง ูุชู ุงุณุชุฎุฏุงู ูุงูู H / W. <br><br>  ููููุฉ ุชูุตูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุดุงุดุฉ ุฃุญุงุฏูุฉ ุงูููู ููุงุณ 0.96 "i2c OLED</a> . ููุฒูู ุงูุงูุชุจุงู ุฅูู ุนููุงู ุงูุนุฑุถ ุงูููุฌูุฏ ุนูู ูุงูู I2C. ูู ูุฐู ุงูุญุงูุฉ ุ 0x3C <br><br><h3 style=";text-align:right;direction:rtl">  ุนุฑุถ SPI 1.8 "TFT 128 * 160 ููุชุจุฉ Espressif </h3><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/e9/ym/zg/e9ymzg6iukpuzpowfbgvlln89dg.jpeg"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/eo/jv/j0/eojvj0nkmzg1dqiubx3jcaoepou.jpeg"></div><br>  ูุฎุทุท ุงูุฃุณูุงู: <br><br>  IO2 - A0 <br>  IO14 - SCK <br>  IO15 - CS <br>  IO13 - SDA <br>  IO16 - ุฅุนุงุฏุฉ ุชุนููู <br><br><img src="https://habrastorage.org/webt/fp/v8/iv/fpv8iv79hdpoefoxwnzsc64ychm.png"><br>  ููุฌุฏ ุฃูุถูุง ูุงุฑุฆ ุจุทุงูุฉ SD ุนูู ุงูุณุจูุฑุฉ <br><br>  ุงูุชูููู IO: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Configuration for other boards, set the correct values for the display used //---------------------------------------------------------------------------- #define DISP_COLOR_BITS_24 0x66 //#define DISP_COLOR_BITS_16 0x55 // Do not use! // ############################################# // ### Set to 1 for some displays, ### // for example the one on ESP-WROWER-KIT ### // ############################################# #define TFT_INVERT_ROTATION 0 #define TFT_INVERT_ROTATION1 0 // ################################################ // ### SET TO 0X00 FOR DISPLAYS WITH RGB MATRIX ### // ### SET TO 0X08 FOR DISPLAYS WITH BGR MATRIX ### // ### For ESP-WROWER-KIT set to 0x00 ### // ################################################ #define TFT_RGB_BGR 0x08 // ############################################################## // ### Define ESP32 SPI pins to which the display is attached ### // ############################################################## // The pins configured here are the native spi pins for HSPI interface // Any other valid pin combination can be used #define PIN_NUM_MISO 12 // SPI MISO #define PIN_NUM_MOSI 13 // SPI MOSI #define PIN_NUM_CLK 14 // SPI CLOCK pin #define PIN_NUM_CS 15 // Display CS pin #define PIN_NUM_DC 2 // Display command/data pin #define PIN_NUM_TCS 0 // Touch screen CS pin (NOT used if USE_TOUCH=0) // -------------------------------------------------------------- // ** Set Reset and Backlight pins to 0 if not used ! // ** If you want to use them, set them to some valid GPIO number #define PIN_NUM_RST 0 // GPIO used for RESET control #define PIN_NUM_BCKL 0 // GPIO used for backlight control #define PIN_BCKL_ON 0 // GPIO value for backlight ON #define PIN_BCKL_OFF 1 // GPIO value for backlight OFF // -------------------------------------------------------------- // ####################################################### // Set this to 1 if you want to use touch screen functions // ####################################################### #define USE_TOUCH TOUCH_TYPE_NONE // ####################################################### // ####################################################################### // Default display width (smaller dimension) and height (larger dimension) // ####################################################################### #define DEFAULT_TFT_DISPLAY_WIDTH 128 #define DEFAULT_TFT_DISPLAY_HEIGHT 160 // ####################################################################### #define DEFAULT_GAMMA_CURVE 0 #define DEFAULT_SPI_CLOCK 32000000 #define DEFAULT_DISP_TYPE DISP_TYPE_ST7735B //---------------------------------------------------------------------------- #define TFT_INVERT_ROTATION 0 #define TFT_INVERT_ROTATION1 1 #define TFT_INVERT_ROTATION2 0</span></span></code> </pre><br>  ูู ุจุชุซุจูุช ุงูุจูุฆุฉ ูุจูุฆุฉ ุงูุชุทููุฑ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Espressif</a> .  ุชุนูููุงุช ููุตูุฉ ุญูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููููุฉ ุงูููุงู ุจุฐูู</a> . <br><br>  ุชุซุจูุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุชุจุฉ</a> .  ููุฒู ุฅุฌุฑุงุก ุชุตููุจูู ูุชุฌููุน ุงูููุชุจุฉ. <br><br>  ูุงูููููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">+ CFLAGS += -Wno-error=tautological-compare \ + -Wno-implicit-fallthrough \ + -Wno-implicit-function-declaration</code> </pre><br>  ููููุงุช / tft / tftspi.c: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">+ <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"driver/gpio.h</span></span></span></span></code> </pre><br>  โ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุตุญูุญ</a> <br><br>  ุซู ุชุซุจูุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุฑูุงูุฌ ุชุดุบูู ุงููุงููุฑุง ESP32</a> . <br><br>  ุชูููู: <br><br>  #.  $ HOME / esp / esp-idf / export.sh <br>  # idf.py menuconfig <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/yc/yl/ml/ycylmlzznbfewlweiaris71dbzo.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/_3/gn/5s/_3gn5s4bmrqunmhwjeabdtxe9yu.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/x8/jc/g6/x8jcg6ia43npfcol7rebn1taz7e.png"></div><br>  ุงูุณูุงุญ ุจุงููุตูู ุฅูู ูููุฐ USB ููุจุฑุงูุฌ ุงูุซุงุจุชุฉ ูุงููุฑุงูุจุฉ: <br><br>  #sudo chmod 777 / dev / ttyUSB0 <br><br>  ูุญู ูุฌูุน ููููุฃ: <br><br>  #make -j4 &amp;&amp; ุฌุนู ููุงุด <br><br>  ูุชู ุชุญููู 12FPS ูู ุฎูุงู ูุชุงุจุฉ ุงูุญุฒูุฉ ุจุงุณุชุฎุฏุงู ุฃุณููุจ send_data.  ุงูุชุณุฌูู ููุณ ุจูุณู ุจุงูุจูุณู ุ ูููู ุณุทุฑ ูุงูู ูุณุงูู ุนุฑุถ ุงูุดุงุดุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">esp_err_t</span></span> camera_capture(){ <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> tstart, t1, t2; tstart = clock(); <span class="hljs-comment"><span class="hljs-comment">//acquire a frame camera_fb_t * fb = esp_camera_fb_get(); if (!fb) { printf("Camera Capture Failed\n"); return ESP_FAIL; } t1 = clock() - tstart; printf("Capture camera time: %u ms\r\n", t1); int i = 0, bufPos = 0; uint8_t hb, lb; color_t color; color_t *color_line = heap_caps_malloc(_width*3, MALLOC_CAP_DMA); tstart = clock(); for(int y = 0; y &lt; _height; y++) { bufPos = 0; for(int x = 0; x &lt; _width; x++) { i = (y * FRAME_WIDTH + x) &lt;&lt; 1; hb = fb-&gt;buf[i] ; lb = fb-&gt;buf[i + 1]; color.r = (lb &amp; 0x1F) &lt;&lt; 3; color.g = (hb &amp; 0x07) &lt;&lt; 5 | (lb &amp; 0xE0) &gt;&gt; 3; color.b = hb &amp; 0xF8; color_line[bufPos] = color; bufPos++; // TFT_drawPixel(0, 0, color, 1); } disp_select(); send_data(0, y, _width-1, y, _width, color_line); wait_trans_finish(1); disp_deselect(); } free(color_line); t1 = clock() - tstart; printf("Send buffer time: %u ms\r\n", t1); esp_camera_fb_return(fb); printf("Capture frame ok.\n"); return ESP_OK; }</span></span></code> </pre><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชูููู ุงููุงููุฑุง</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// #if defined(CAMERA_MODEL_AI_THINKER) #define PWDN_GPIO_NUM 32 #define RESET_GPIO_NUM -1 #define XCLK_GPIO_NUM 0 #define SIOD_GPIO_NUM 26 #define SIOC_GPIO_NUM 27 #define Y9_GPIO_NUM 35 #define Y8_GPIO_NUM 34 #define Y7_GPIO_NUM 39 #define Y6_GPIO_NUM 36 #define Y5_GPIO_NUM 21 #define Y4_GPIO_NUM 19 #define Y3_GPIO_NUM 18 #define Y2_GPIO_NUM 5 #define VSYNC_GPIO_NUM 25 #define HREF_GPIO_NUM 23 #define PCLK_GPIO_NUM 22 void camera_init_(){ camera_config_t config; config.ledc_channel = LEDC_CHANNEL_0; config.ledc_timer = LEDC_TIMER_0; config.pin_d0 = Y2_GPIO_NUM; config.pin_d1 = Y3_GPIO_NUM; config.pin_d2 = Y4_GPIO_NUM; config.pin_d3 = Y5_GPIO_NUM; config.pin_d4 = Y6_GPIO_NUM; config.pin_d5 = Y7_GPIO_NUM; config.pin_d6 = Y8_GPIO_NUM; config.pin_d7 = Y9_GPIO_NUM; config.pin_xclk = XCLK_GPIO_NUM; config.pin_pclk = PCLK_GPIO_NUM; config.pin_vsync = VSYNC_GPIO_NUM; config.pin_href = HREF_GPIO_NUM; config.pin_sscb_sda = SIOD_GPIO_NUM; config.pin_sscb_scl = SIOC_GPIO_NUM; config.pin_pwdn = PWDN_GPIO_NUM; config.pin_reset = RESET_GPIO_NUM; config.xclk_freq_hz = 20000000; config.fb_count = 2; // for display config.frame_size = FRAMESIZE_QVGA; config.pixel_format = PIXFORMAT_RGB565; // camera init esp_err_t err = esp_camera_init(&amp;config); if (err != ESP_OK) { printf("Camera init failed with error 0x%x", err); return; } printf("Camera init OK\n"); }</span></span></code> </pre><br></div></div><br>  โ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌูุณุช</a> <br><br>  <u>FRAME_WIDTH ูู ุนุฑุถ ุงูุฅุทุงุฑ ุงูุจุงูุบ 320 ุจูุณู ูู QVGA</u> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">config.frame_size = FRAMESIZE_QVGA; <span class="hljs-comment"><span class="hljs-comment">// 320x240</span></span></code> </pre><br>  ูู ุงููุงูุน ุ ูุฑู ุนูู ูุงูุฐุฉ ุงูุนุฑุถ 128 * 160 ูู ุงูุฅุทุงุฑ ุงููุงูู <br><br>  <i>ูู ุจุชุณุฌูู ุงูุชูููู ุจุงุณุชุฎุฏุงู ูุฎุฒู ูุคูุช ููุงููุฑุง ููุฏูู ูุงุญุฏุฉ (config.fb_count = 1)</i> <i><br></i>  <i>ุงูุชูุท ููุช ุงููุงููุฑุง: 32 ูููู ุซุงููุฉ</i> <i><br></i>  <i>ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 47 ูููู ุซุงููุฉ</i> <i><br></i>  <i>ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู.</i> <br><br>  <b>ูุคุฏู</b> <b><br></b>  <b>1000 / (32 + 47) = 12.65 ุฅุทุงุฑูุง ูู ุงูุซุงููุฉ</b> <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุณุฌู ููุชูููู ูุน ุงุซููู ูู ุงููุฎุงุฒู ุงููุคูุชุฉ ูุงููุฑุง ุงูููุฏูู (config.fb_count = 2)</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุงูุชูุท ููุช ุงููุงููุฑุง: 39 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 63 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 0 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 59 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 0 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 34 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 40 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 64 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 0 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 59 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 0 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 34 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 40 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 63 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 0 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 60 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 0 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 34 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 39 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 63 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 0 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 60 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 1 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 34 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 40 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 63 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 0 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 60 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 0 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 34 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 40 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 63 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 0 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 59 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. <br>  ุงูุชูุท ููุช ุงููุงููุฑุง: 0 ูููู ุซุงููุฉ <br><br>  ุฅุฑุณุงู ููุช ุงูุนุงุฒูุฉ: 35 ูููู ุซุงููุฉ <br><br>  ุงููุจุถ ุนูู ุงูุฅุทุงุฑ ููุงูู. </div></div><br>  ูุธุฑูุง ูุงุณุชุฎุฏุงู ุงููุฎุฒู ุงููุคูุช ุงูุซุงูู ููุงููุฑุง ุงูููุฏูู ุ ูุชู ุงูุญุตูู ุนูู ุงููุฎุฒู ุงููุคูุช ูู ุจุนุถ ุงูุฏูุฑุงุช ุนูู ุงูููุฑ.  ูู ุงูุจุฏุงูุฉ ุ ูุชู ุงูุญุตูู ุนูู ุงูุฏูุฑุฉ ุงููุงููุฉ ุจุฃูู ูู ุงุณุชุฎุฏุงู ูุฎุฒู ูุคูุช ูุงุญุฏ ุ ูููู ูุฐู ุงููุฑุฉ "ุชุนูู".  ุงููุงุตู ุงูุฒููู ุจูู ุงูุฏูุฑุงุช ุงูุนุงุฆูุฉ. <br><br>  ุนุฏุฉ ูุฑุงุช ูุณูุช ูู ุณุฌูุงุช "ุชู ุชุดุบูู ูุงุดู Brownout" ูุฐุง ุฃุบููุช ุฌูุงุฒ ุงููุดู.  ูุฃูู ูู ุงูุจุฏุงูุฉ ุฃุทุนูุช ุดุงุดุฉ ุงูุฅุถุงุกุฉ ุงูุฎูููุฉ ูู ุฏุจูุณ 3.3V ESP32-CAM <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"soc/rtc_cntl_reg.h"</span></span></span><span class="hljs-meta"> ... WRITE_PERI_REG(RTC_CNTL_BROWN_OUT_REG, 0); </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//disable brownout detector</span></span></span></span></code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h3><br>  ESP32 ูุญุฏุฉ ูุธูููุฉ ููุฎูุถุฉ ุงูุชูููุฉ.  ููุงู ููุต ูุงุฑุซู ูู โโุงูุงุณุชูุชุงุฌุงุช ููููุงูุฐ ุงููููุฐุฉ ูู ุฅุตุฏุงุฑ CAM ูู ุงูููุญุฉ ุ ูุฐุง ุงุฎุชุฑ ุฅุตุฏุงุฑ CAM ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ูุงููุฑุง ุจุงููุนู. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฑูุงุจุท ูููุฏุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">randomnerdtutorials.com/esp32-troubleshooting-guide</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.instructables.com/id/Select-Color-Display-for-ESP32</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github.com/gnulabis/UTFT-ESP</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github.com/Bodmer/TFT_eSPI</a> </div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar463157/">https://habr.com/ru/post/ar463157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar463143/index.html">ุงูุดุฑูุน ูู ุงูุนูู ุจุงุณุชุฎุฏุงู Google Analytics: ุงูุชุทุจูู + ุงูููุจ</a></li>
<li><a href="../ar463147/index.html">ROS Trolley Robot - ุงูุฌุฒุก 3. ุชุณุฑูุน ูุชุบููุฑ ุงููุงููุฑุง ุ ูุฅุตูุงุญ ุงููุดูุฉ</a></li>
<li><a href="../ar463149/index.html">ููุตู ุขูุงู ูุงู ุจูุฑุงุกุฉ ูุชุจ ุงูุจุฑูุฌุฉ ุงููุฏููุฉ ูุงูููุณูุฉ ูููู ุงููููุฉ</a></li>
<li><a href="../ar463151/index.html">ุฏุงุฆุฑุฉ ุงูุฑูุงุจุฉ ุงูุฏุงุฎููุฉ 13 ุชุญุช ุงูุนุฏุณุฉ ุงูููุจุฑุฉ</a></li>
<li><a href="../ar463155/index.html">ุงูุถูุถุงุก ุงูุจูุถุงุก ุชูุฌู ูุฑุจุน ุฃุณูุฏ. ุงูุฌุฒุก 2. ุงูุญู</a></li>
<li><a href="../ar463159/index.html">ุญูู ุงูุฃูู ูุงูุฃุฑูุงู ูุฑุณุงุฆู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุ ูุงููุซูุฑ ูู ุงููุนูููุงุช ุนู ุงูุฅุนูุงู</a></li>
<li><a href="../ar463165/index.html">ุจุฑููุฉ ูุนูุฏ DPI ูุงูุฃููุงู - ููููุฉ TLS</a></li>
<li><a href="../ar463167/index.html">ุงูููุงุฏ ุงููุงุฒูุฉ ูุจุฏุก ุชุทููุฑ ูุดุฑูุน VR ุงูุชุฏุฑูุจ</a></li>
<li><a href="../ar463169/index.html">ุงููุตุฏุฑ ุงูููุชูุญ ุงูุณูุน - ููู ูุนูู</a></li>
<li><a href="../ar463171/index.html">ุงูุดุจูุงุช ุงูุนุตุจูุฉ ูุงูุชุนูู ุงูุนููู: ุชุนูููู ุนุจุฑ ุงูุฅูุชุฑูุช ุ ุงููุตู 6 ุ ุงูุฌุฒุก 1: ุงูุชุนูู ุงูุนููู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>