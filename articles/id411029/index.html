<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍🎓 🍃 🍡 Cara menggunakan antarmuka di Go 🈳 🐩 📉</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Di waktu luangnya dari pekerjaan utama, penulis materi berkonsultasi pada Go dan mengurai kode. Tentu saja, dalam kegiatan seperti itu, ia membaca ban...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara menggunakan antarmuka di Go</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wirex/blog/411029/"><img src="https://habrastorage.org/webt/3r/a6/gf/3ra6gfzzmia3bmlydkdkqbmpl6a.jpeg"><br><br>  <i>Di waktu luangnya dari pekerjaan utama, penulis materi berkonsultasi pada Go dan mengurai kode.</i>  <i>Tentu saja, dalam kegiatan seperti itu, ia membaca banyak kode yang ditulis oleh orang lain.</i>  <i>Baru-baru ini, penulis artikel ini memiliki kesan (ya, kesan, tidak ada statistik) bahwa programmer lebih mungkin untuk bekerja dengan antarmuka dalam "gaya Java".</i> <i><br><br></i>  <i>Posting ini berisi rekomendasi dari penulis tentang penggunaan optimal antarmuka di Go, berdasarkan pengalamannya dalam menulis kode.</i> <br><br>  Pada contoh postingan ini kita akan menggunakan dua paket <code>animal</code> dan <code>circus</code> .  Banyak hal dalam posting ini menggambarkan bekerja dengan kode yang berbatasan dengan penggunaan reguler paket. <br><br><h3>  Bagaimana tidak </h3><br>  Fenomena yang sangat umum yang saya amati: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> animals <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Animal <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { Speaks() <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } <span class="hljs-comment"><span class="hljs-comment">//  Animal type Dog struct{} func (a Dog) Speaks() string { return "woof" }</span></span></code> </pre> <a name="habracut"></a><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> circus <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"animals"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Perform</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a animal.Animal)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a.Speaks() }</code> </pre> <br>  Ini adalah apa yang disebut penggunaan antarmuka gaya Java.  Ini dapat ditandai dengan langkah-langkah berikut: <br><br><ol><li>  Tentukan antarmuka. </li><li>  Tentukan satu jenis yang memenuhi perilaku antarmuka. </li><li>  Tetapkan metode yang memenuhi implementasi antarmuka. </li></ol><br>  Singkatnya, kita berurusan dengan "tipe penulisan yang memenuhi antarmuka."  Kode ini memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bau yang</a> berbeda, menyarankan pemikiran berikut: <br><br><ul><li>  Hanya satu jenis yang memenuhi antarmuka, tanpa ada niat untuk memperluasnya lebih jauh. </li><li>  Fungsi biasanya mengambil tipe konkret alih-alih jenis antarmuka. </li></ul><br><h3>  Bagaimana cara melakukannya </h3><br>  Antarmuka di Go mendorong pendekatan malas, yang bagus.  Alih-alih menulis jenis yang memenuhi antarmuka, Anda harus menulis antarmuka yang memenuhi persyaratan praktis nyata. <br><br>  Yang berarti: alih-alih mendefinisikan <code>Animal</code> dalam paket <code>animals</code> , tentukan pada titik penggunaan, yaitu paket <code>circus</code> <abbr title="Anda bisa, tentu saja, mendefinisikannya dalam tanda tangan fungsi, tetapi ini adalah pendekatan yang terlalu ceroboh">*</abbr> . <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> animals <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Dog <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a Dog)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Speaks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"woof"</span></span> }</code> </pre> <br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> circus <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Speaker <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { Speaks() <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Perform</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a Speaker)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a.Speaks() }</code> </pre> <br>  Cara yang lebih alami untuk melakukan ini adalah seperti ini: <br><br><ol><li>  Tentukan Jenis </li><li>  Tentukan antarmuka pada titik penggunaan. </li></ol><br>  Pendekatan ini mengurangi ketergantungan pada komponen paket <code>animals</code> .  Mengurangi ketergantungan adalah cara yang tepat untuk membangun perangkat lunak yang tahan terhadap kesalahan. <br><br><h3>  Hukum Tempat Tidur </h3><br>  Ada satu prinsip yang baik untuk menulis perangkat lunak yang baik.  Ini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">hukum Postel</a> , yang sering dirumuskan sebagai berikut: <br><blockquote>  “Jadilah konservatif tentang apa yang Anda rujuk dan liberal tentang apa yang Anda terima” </blockquote>  Dalam hal Go, hukumnya adalah: <br><br><blockquote>  “Terima antarmuka, kembalikan struktur” </blockquote><br>  Secara keseluruhan, ini adalah aturan yang sangat baik untuk merancang hal-hal yang toleran dan stabil <abbr title="Tentu saja ada nuansa yang saya hilangkan. Misalnya, dalam kasus dengan kode peka konteks, akan sangat berguna untuk menerima dan memberikan antarmuka)">*</abbr> .  Unit utama kode dalam Go adalah fungsi.  Saat mendesain fungsi dan metode, penting untuk mematuhi pola berikut: <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">funcName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a INTERFACETYPE)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CONCRETETYPE</span></span></span></span></code> </pre> <br>  Di sini kami menerima semua yang mengimplementasikan antarmuka yang bisa apa saja, termasuk yang kosong.  Nilai tipe tertentu disarankan.  Tentu saja, membatasi apa yang bisa masuk akal.  Seperti kata pepatah Go: <br><br><blockquote>  "Antarmuka kosong tidak mengatakan apa-apa," <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Rob Pike</a> </blockquote><br>  Oleh karena itu, sangat disarankan untuk mencegah fungsi menerima <code>interface{}</code> . <br><br><h3>  Contoh Aplikasi: Imitasi </h3><br>  Contoh mencolok tentang manfaat penerapan hukum Postel adalah kasus uji.  Katakanlah Anda memiliki fungsi yang terlihat seperti ini: <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Takes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(db Database)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span></span></code> </pre> <br>  Jika <code>Database</code> adalah antarmuka, maka dalam kode uji Anda dapat dengan mudah memberikan imitasi implementasi <code>Database</code> tanpa harus melewati objek DB nyata. <br><br><h3>  Ketika definisi antarmuka terlebih dahulu dapat diterima </h3><br>  Sejujurnya, pemrograman adalah cara yang cukup gratis untuk mengekspresikan ide.  Tidak ada aturan yang tak tergoyahkan.  Tentu saja, Anda selalu dapat mendefinisikan antarmuka terlebih dahulu, tanpa takut ditangkap oleh polisi kode.  Dalam konteks banyak paket, jika Anda mengetahui fungsi Anda dan berniat untuk menerima antarmuka spesifik dalam paket, maka lakukanlah. <br><br>  Mendefinisikan antarmuka biasanya bernada over-engineering, tetapi ada situasi di mana Anda harus melakukan hal itu.  Secara khusus, contoh-contoh berikut muncul dalam pikiran: <br><br><ul><li>  Antarmuka tertutup </li><li>  Tipe data abstrak </li><li>  Antarmuka Rekursif </li></ul><br>  Selanjutnya, kami secara singkat mempertimbangkan masing-masing dari mereka. <br><br><h3>  Antarmuka tertutup </h3><br>  Antarmuka tertutup hanya dapat didiskusikan dalam konteks beberapa paket.  Antarmuka yang disegel adalah antarmuka dengan metode yang tidak diekspor.  Ini berarti bahwa pengguna di luar paket ini tidak dapat membuat jenis yang memenuhi antarmuka ini.  Ini berguna untuk mengemulasi tipe varian agar dapat mencari tipe yang memuaskan antarmuka secara mendalam. <br><br>  Jika Anda mendefinisikan sesuatu seperti ini: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Fooer <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { Foo() sealed() }</code> </pre> <br>  Hanya paket yang ditentukan oleh <code>Fooer</code> dapat menggunakannya dan membuat sesuatu yang bernilai darinya.  Ini memungkinkan Anda membuat operator switch brute-force untuk tipe. <br><br>  Antarmuka yang disegel juga memungkinkan alat analisis untuk dengan mudah mengambil kecocokan pola non-tabrakan.  Paket sumtypes BurntSushi bertujuan untuk mengatasi masalah ini. <br><br><h3>  Tipe data abstrak </h3><br>  Kasus lain mendefinisikan antarmuka sebelumnya melibatkan pembuatan tipe data abstrak.  Mereka dapat disegel atau tidak disegel. <br><br>  Contoh yang baik dari ini adalah paket <code>sort</code> , yang merupakan bagian dari pustaka standar.  Ini mendefinisikan koleksi yang bisa diurutkan sebagai berikut <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Interface <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Len —    . Len() int // Less      //   i     j. Less(i, j int) bool // Swap     i  j. Swap(i, j int) }</span></span></code> </pre> <br>  Sepotong kode ini mengecewakan banyak orang, karena jika Anda ingin menggunakan paket <code>sort</code> Anda harus menerapkan metode untuk antarmuka.  Banyak yang tidak suka harus menambahkan tiga baris kode tambahan. <br><br>  Namun, saya menemukan ini sebagai bentuk generik yang sangat elegan di Go.  Penggunaannya harus lebih sering didorong. <br><br>  Pilihan desain alternatif dan pada saat yang sama akan membutuhkan jenis pesanan yang lebih tinggi.  Dalam posting ini kami tidak akan mempertimbangkannya. <br><br><h3>  Antarmuka Rekursif </h3><br>  Ini mungkin contoh lain dari kode dengan stok, tetapi ada kalanya tidak mungkin untuk menghindari menggunakannya.  Manipulasi sederhana memungkinkan Anda untuk mendapatkan sesuatu seperti <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Fooer <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { Foo() Fooer }</code> </pre> <br>  Pola antarmuka rekursif jelas akan memerlukan definisi di muka.  Rekomendasi definisi antarmuka titik penggunaan tidak berlaku di sini. <br><br>  Pola ini berguna untuk membuat konteks dengan pekerjaan selanjutnya di dalamnya.  Kode yang dimuat oleh konteks biasanya membungkus dirinya di dalam paket dengan hanya mengekspor konteks (ala paket <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tensor</a> ), oleh karena itu, dalam praktiknya, saya tidak sering menemukan kasus ini.  Saya dapat memberi tahu Anda hal lain tentang pola kontekstual, tetapi tinggalkan untuk posting lain. <br><br><h3>  Kesimpulan </h3><br>  Terlepas dari kenyataan bahwa salah satu judul pos berbunyi "Bagaimana tidak melakukannya," saya sama sekali tidak mencoba untuk melarang apa pun.  Sebaliknya, saya ingin membuat pembaca lebih sering berpikir tentang kondisi perbatasan, karena dalam kasus seperti itulah berbagai situasi darurat muncul. <br><br>  Saya menemukan prinsip deklarasi penggunaan titik sangat berguna.  Sebagai hasil penerapannya dalam praktik, saya tidak menemui masalah yang muncul jika saya mengabaikannya. <br><br>  Namun, saya juga sesekali menulis antarmuka gaya Java.  Biasanya, ini terjadi jika, tak lama sebelumnya, saya menulis banyak kode dalam Java atau Python.  Keinginan untuk terlalu rumit dan "menyajikan segala sesuatu dalam bentuk kelas" kadang-kadang memanifestasikan dirinya dengan sangat kuat, terutama jika Anda menulis Go-code setelah menulis banyak kode berorientasi objek. <br><br>  Dengan demikian, posting ini juga berfungsi sebagai pengingat untuk diri sendiri tentang bagaimana jalan untuk menulis kode yang nantinya tidak akan menyebabkan sakit kepala.  Menunggu komentar Anda! <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/files/4bd/bf6/597/4bdbf659775744b1bdbb4d8a00a0a980.png" alt="gambar"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id411029/">https://habr.com/ru/post/id411029/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id411017/index.html">Kesepian orang yang dilahirkan. Pengembangan melalui penerbangan. Cara yang sulit untuk dirimu sendiri</a></li>
<li><a href="../id411019/index.html">Untuk meninggalkan Rusia dan mencari pekerjaan di luar negeri: kami sedang mempersiapkan sebuah wawancara dalam bahasa Inggris</a></li>
<li><a href="../id411021/index.html">Sunlike - generasi baru lampu LED</a></li>
<li><a href="../id411023/index.html">Antroposen Afrika</a></li>
<li><a href="../id411027/index.html">Olimpiade Sekolah: Jedi Sword, Jetpack dan Teleport hingga 2035</a></li>
<li><a href="../id411031/index.html">Pemindai MEG portabel pertama di dunia</a></li>
<li><a href="../id411033/index.html">"Lakukan," "mengerti," "setuju": sinonim dalam bahasa Inggris</a></li>
<li><a href="../id411035/index.html">Atau mungkin Anda sedang tidur sekarang?</a></li>
<li><a href="../id411037/index.html">Sochi.Camera: bagaimana penyedia regional mengangkat situs siaran video dengan kunjungan 500.000 orang sebulan</a></li>
<li><a href="../id411039/index.html">Kontak kedua, atau bukannya epilog</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>