<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐ฝโโ๏ธ ๐ง๐ป ๐ง๐ฝ ููููุฉ ุฌุนู ุงูุฏูู ุบูุฑ ุงูุตุงูุญุฉ ุฃูุซุฑ ุญุชู ูุง ุชูุตู ๐ฉ๐ผโ๐ โผ๏ธ ๐ฅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฐ ููุช ููุณ ุจุจุนูุฏ ุ ุชูุช ุชุฑุฌูุฉ ููุงูุฉ ูู ูุจุฑ ุญูู ููููุฉ ุงุณุชุฎุฏุงู ุฃููุงุน ุงูุจูุงูุงุช ุงูุฌุจุฑูุฉ ููุชุฃูุฏ ูู ุฃู ุงูุญุงูุงุช ุบูุฑ ุงูุตุญูุญุฉ ูุง ูููู ุงูุชุนุจูุฑ ุนููุง. ููุธุฑ ุงูููู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููููุฉ ุฌุนู ุงูุฏูู ุบูุฑ ุงูุตุงูุญุฉ ุฃูุซุฑ ุญุชู ูุง ุชูุตู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428051/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ููุฐ ููุช ููุณ ุจุจุนูุฏ ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูุช ุชุฑุฌูุฉ ููุงูุฉ</a> ูู ูุจุฑ ุญูู ููููุฉ ุงุณุชุฎุฏุงู ุฃููุงุน ุงูุจูุงูุงุช ุงูุฌุจุฑูุฉ ููุชุฃูุฏ ูู ุฃู ุงูุญุงูุงุช ุบูุฑ ุงูุตุญูุญุฉ ูุง ูููู ุงูุชุนุจูุฑ ุนููุง.  ููุธุฑ ุงูููู ุฅูู ุทุฑููุฉ ุฃูุซุฑ ุนููููุฉ ููุงุจูุฉ ููุชูุณูุน ูุขููุฉ ููุชุนุจูุฑ ุนู ูุง ูุง ูููู ุงูุชุนุจูุฑ ุนูู ุ ูุณูู ูุณุงุนุฏูุง ูุงุณูู ูู ุฐูู. </p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl"> ุจุงุฎุชุตุงุฑ ุ ุชูุงูุด ูุฐู ุงูููุงูุฉ ุจุนุถ ุงูููุงูุงุช ูุน ุนููุงู ุจุฑูุฏู ูุนููุงู ุจุฑูุฏ ุฅููุชุฑููู ุ ููุฐูู ูุน ุงูุดุฑุท ุงูุฅุถุงูู ุงูุฐู ูุฌุจ ุฃู ูููู ููุงู ูุงุญุฏ ุนูู ุงูุฃูู ูู ูุฐู ุงูุนูุงููู.  ููู ููุชุฑุญ ุงูุชุนุจูุฑ ุนู ูุฐุง ุงูุดุฑุท ุนูู ูุณุชูู ุงูููุนุ  ููุชุฑุญ ูุชุงุจุฉ ุงูุนูุงููู ุนูู ุงููุญู ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> ContactInfo = | EmailOnly <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> EmailContactInfo | PostOnly <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> PostalContactInfo | EmailAndPost <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> EmailContactInfo * PostalContactInfo</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ุงููุดุงูู ุงูุชู ูุนุงูู ูููุง ูุฐุง ุงูููุฌุ </p><br><p style=";text-align:right;direction:rtl">  ุฅู ุงูุฃูุฑ ุงูุฃูุซุฑ ูุถูุญูุง (ูุงูุฐู ุชูุช ููุงุญุธุชู ุนุฏุฉ ูุฑุงุช ูู ุงูุชุนูููุงุช ุนูู ุชูู ุงูููุงูุฉ) ูู ุฃู ูุฐุง ุงูููุฌ ุบูุฑ ูุงุจู ููุชุทููุฑ ุนูู ุงูุฅุทูุงู.  ุชุฎูู ุฃูู ููุณ ูุฏููุง ููุนุงู ูู ุงูุนูุงููู ุ ูููู ูุฏููุง ุซูุงุซุฉ ุฃู ุฎูุณุฉ ุ ููุจุฏู ุฃู ุดุฑุท ุงูุตุญุฉ "ูุฌุจ ุฃู ูููู ููุงู ุฅูุง ุนููุงู ุจุฑูุฏู ุ ุฃู ุนููุงู ุจุฑูุฏ ุฅููุชุฑููู ูุนููุงู ููุชุจ ุ ููุฌุจ ุฃูุง ูููู ููุงู ุนุฏุฉ ุนูุงููู ูู ููุณ ุงูููุน".  ูููู ูุฃููุฆู ุงูุฐูู ูุฑุบุจูู ูุชุงุจุฉ ุงูููุน ุงูููุงุณุจ ูุชูุฑูู ููุงุฎุชุจุงุฑ ุงูุฐุงุชู.  ุชุชูุซู ุงููููุฉ ุงูุชู ุชุญูู ุนูุงูุฉ ุงููุฌูุฉ ูู ุฅุนุงุฏุฉ ูุชุงุจุฉ ูุฐุง ุงูููุน ูู ุญุงูุฉ ุงุฎุชูุงุก ุงูุดุฑุท ุงููุชุนูู ุจุบูุงุจ ุงูุชูุฑุงุฑุงุช ูู ุงูุงุฎุชุตุงุตุงุช. </p><br><h3 style=";text-align:right;direction:rtl">  ุดุงุฑู </h3><br><p style=";text-align:right;direction:rtl">  ููู ุชุญู ูุฐู ุงููุดููุฉุ  ุฏุนููุง ูุญุงูู ุงูุชุฎูู.  ุฃููุงู ูููู ุจุชุญููู ููุตู ูุฆุฉ ุงูุนููุงู (ุนูู ุณุจูู ุงููุซุงู ุ ุงูุจุฑูุฏ / ุงูุจุฑูุฏ ุงูุฅููุชุฑููู / ุฑูู ุงูููุชุจ ูู ุงูููุชุจ) ูุงููุญุชููุงุช ุงูููุงุจูุฉ ููุฐู ุงููุฆุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AddrType</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Post</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Email</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Office</span></span></span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูููุฑ ูู ุงููุญุชูู ุญุชู ุงูุขู ุ ูุฃูู ูุง ููุฌุฏ ุดูุก ุนูู ูู ุงูุดุฑูุท ุงููุฑุฌุนูุฉ ูุตูุงุญูุฉ ูุงุฆูุฉ ุงูุนูุงููู. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุชุญูููุง ูู ุงูุญุงูุฉ ุงูููุงุจูุฉ ูู ููุช ุชุดุบูู ุจุนุถ ูููุดุฆ ุจุนุถ ูุบุฉ OOP ุงูุนุงุฏูุฉ ุ ูุณููุชุจ ููุท ูุธููุฉ ูุซู </p><br><pre style=";text-align:right;direction:rtl"> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">valid</span></span> :: [<span class="hljs-type"><span class="hljs-type">AddrType</span></span>] -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span> valid xs = <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> hasNoDups = nub xs == xs <span class="hljs-comment"><span class="hljs-comment">--      hasPost = Post `elem` xs hasEmail = Email `elem` xs hasOffice = Office `elem` xs in hasNoDups &amp;&amp; (hasPost || (hasEmail &amp;&amp; hasOffice))</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุณูู ูููู ุจุจุนุถ ุงูุฅุนุฏุงู ุฅุฐุง ุฃุนุงุฏ <code>False</code> . </p><br><p style=";text-align:right;direction:rtl">  ูู ูููููุง ุจุฏูุงู ูู ุฐูู ุงูุชุญูู ูู ุญุงูุฉ ููุงุซูุฉ ุจูุณุงุนุฏุฉ ุนุฏุงุฏ ููุช ุนูุฏ ุงูุชุฑุฌูุฉุ  ุงุชุถุญ ุฃูู ูุนู ุ ูููููุง ุ ุฅุฐุง ูุงู ูุธุงู ููุน ุงููุบุฉ ูุนุจุฑูุง ุจูุง ููู ุงูููุงูุฉ ุ ูุจููุฉ ุงูููุงูุฉ ุณูุฎุชุงุฑ ูุฐุง ุงูููุฌ. </p><br><p style=";text-align:right;direction:rtl">  ููุง ุ ุณุชุณุงุนุฏูุง ุงูุฃููุงุน ุงูุชุงุจุนุฉ ูุซูุฑูุง ุ ูุจูุง ุฃู ุงูุทุฑููุฉ ุงูุฃูุซุฑ ููุงุกูุฉ ููุชุงุจุฉ ุฑูุฒ ุชู ุงูุชุญูู ููู ูู ูุงุณูู ูู ูุชุงุจุชู ูู Agde ุฃู Idris ุฃููุงู ุ ูุณูุบูุฑ ุฃุญุฐูุชูุง ูููุชุจ ูู Idris.  ุจูุงุก ุฌููุฉ idris ูุฑูุจ ุฌุฏูุง ูู Haskell: ุนูู ุณุจูู ุงููุซุงู ุ ูุน ุงููุธููุฉ ุงููุฐููุฑุฉ ุฃุนูุงู ุ ูุง ุนููู ุณูู ุชุบููุฑ ุงูุชูููุน ููููุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">valid</span></span> : List AddrType -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุฐูุฑ ุงูุขู ุฃูู ุจุงูุฅุถุงูุฉ ุฅูู ูุฆุงุช ุงูุนูุงููู ุ ูุญุชุงุฌ ุฃูุถูุง ุฅูู ูุญุชููุงุชูุง ุ ููุฑูุฒ ุฅูู ุงุนุชูุงุฏ ุงูุญููู ุนูู ูุฆุฉ ุงูุนููุงู ูู GADT: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AddrFields</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AddrType</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type</span></span></span><span class="hljs-class"> where </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">PostFields</span></span></span><span class="hljs-class"> : (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">city</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">String</span></span></span><span class="hljs-class">) -&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">street</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">String</span></span></span><span class="hljs-class">) -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AddrFields</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Post</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">EmailFields</span></span></span><span class="hljs-class"> : (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">email</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">String</span></span></span><span class="hljs-class">) -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AddrFields</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Email</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">OfficeFields</span></span></span><span class="hljs-class"> : (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">floor</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Int</span></span></span><span class="hljs-class">) -&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">desk</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Nat</span></span></span><span class="hljs-class">) -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AddrFields</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Office</span></span></span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจูุนูู ุ ุฅุฐุง ุชู <code>AddrFields t</code> ูููุฉ <code>fields</code> ุงูููุน <code>AddrFields t</code> ุ ูุฅููุง ูุนูู ุฃู <code>t</code> ูู ุจุนุถ <code>AddrType</code> AddrType ูุฃู <code>fields</code> ุชุญุชูู ุนูู ูุฌููุนุฉ ูู ุงูุญููู ุงูููุงุจูุฉ ููุฐู ุงููุฆุฉ ุงููุญุฏุฏุฉ. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุนู ูุฐุง ุงูููุดูุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุฐุง ููุณ ุงูุชุฑููุฒ ุงูุฃูุซุฑ ุฃูุงููุง ูู ุญูุซ ุงูููุน ุ ูุธุฑูุง ูุฃู GADT ูุง ูุฌุจ ุฃู ูููู ูุฏูุฌูุง ุ ูุณูููู ูู ุงูุฃุตุญ ุงูุฅุนูุงู ุนู ุซูุงุซุฉ ุฃููุงุน ุจูุงูุงุช ูููุตูุฉ <code>OfficeFields</code> ู <code>OfficeFields</code> ู <code>OfficeFields</code> ููุชุงุจุฉ ูุธููุฉ </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">addrFields : AddrType -&gt; <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> addrFields Post = PostFields addrFields Email = EmailFields addrFields Office = OfficeFields</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ูุฐู ูุชุงุจุฉ ูุซูุฑุฉ ููุบุงูุฉ ุ ูุงูุชู ูุง ุชุนุทู ูููููุฐุฌ ุงูุฃููู ููุณุจูุง ูุจูุฑูุง ุ ููู Haskell ููุฐุง ูุง ุชุฒุงู ููุงู ุขููุงุช ุฃูุซุฑ ุฅูุฌุงุฒูุง ูููุชุนุฉ. </p></div></div><br><p style=";text-align:right;direction:rtl">  ูุง ุงูุนููุงู ุงููุงูู ูู ูุฐุง ุงููููุฐุฌุ  ูุฐุง ุฒูุฌ ูู ูุฆุฉ ุงูุนููุงู ูุงูุญููู ุงูููุงุจูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">Addr : <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> Addr = (t : AddrType ** AddrFields t)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูููู ูุญุจู ูุธุฑูุฉ ุงูููุน ุฃู ูุฐุง ููุน ุชุงุจุน ูุฌูุฏู: ุฅุฐุง ุชู ุฅุนุทุงุคูุง ุจุนุถ ุงููููุฉ ูู ุงูููุน <code>Addr</code> ุ ููุฐุง ูุนูู ุฃู ููุงู ูููุฉ <code>t</code> ุงูููุน <code>AddrType</code> ููุฌููุนุฉ ููุงุจูุฉ ูู ุญููู <code>AddrFields t</code> .  ุจุทุจูุนุฉ ุงูุญุงู ุ ุชููู ุนูุงููู ูุฆุฉ ูุฎุชููุฉ ูู ููุณ ุงูููุน: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">someEmailAddr</span></span> : Addr someEmailAddr = (Email ** EmailFields <span class="hljs-string"><span class="hljs-string">"that</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">@feel</span></span></span><span class="hljs-string">.bro"</span></span>) someOfficeAddr : Addr someOfficeAddr = (Office ** OfficeFields (-<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">762</span></span>)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุงูุฉ ุนูู ุฐูู ุ ุฅุฐุง ุชู ููุญ <code>EmailFields</code> <code>Email</code> ููุง ุ ูุฅู ูุฆุฉ ุงูุนููุงู ุงููุญูุฏุฉ ุงูููุงุณุจุฉ ูู <code>Email</code> ุ ุญุชู ุชุชููู ูู <code>EmailFields</code> ุ <code>EmailFields</code> ุงููููุช ุจููุณู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">someEmailAddr</span></span> : Addr someEmailAddr = (_ ** EmailFields <span class="hljs-string"><span class="hljs-string">"that</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">@feel</span></span></span><span class="hljs-string">.bro"</span></span>) someOfficeAddr : Addr someOfficeAddr = (_ ** OfficeFields (-<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">762</span></span>)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุชุจ ูุธููุฉ ูุณุงุนุฏุฉ ุชูุฏู ูุงุฆูุฉ ููุงุธุฑุฉ ููุฆุงุช ุงูุนูุงููู ูู ูุงุฆูุฉ ุงูุนูุงููู ุ ููุนูููุง ููุฑูุง ููุนูู ุนูู ููุฑ ุชุนุณูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">types</span></span> : Functor f =&gt; f Addr -&gt; f AddrType <span class="hljs-keyword"><span class="hljs-keyword">types</span></span> = map fst</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุ ูุชุตุฑู ููุน <code>Addr</code> ุงููุฌูุฏู ูุซู ุฒูุฌูู ูุฃููููู: ุนูู ูุฌู ุงูุฎุตูุต ุ ููููู ุฃู ุชุทูุจ ุงููููู ุงูุฃูู <code>AddrType</code> (ูููุฉ ุจุนูุงูุฉ ุงููุฌูุฉ: ููุงุฐุง ูุง ูููููู ุทูุจ ุงููููู ุงูุซุงููุ). </p><br><h4 style=";text-align:right;direction:rtl">  ุงุฑูุน </h4><br><p style=";text-align:right;direction:rtl">  ููุชูู ุงูุขู ุฅูู ุฌุฒุก ุฑุฆูุณู ูู ูุตุชูุง.  ูุฐุง ุ ูุฏููุง <code>List Addr</code> ุจุนูุงููู <code>List Addr</code> ูุจุนุถ ุงููุณูุฏุงุช <code>valid : List AddrType -&gt; Bool</code> ุ ูุงูุชู ูุฑูุฏ ุถูุงู ุชูููุฐูุง ููุฐู ุงููุงุฆูุฉ ุนูู ูุณุชูู ุงูุฃููุงุน.  ููู ูุฌูุนููุ  ุจุงูุทุจุน ุ ููุน ุขุฎุฑ! </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ValidatedAddrList</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Addr</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type</span></span></span><span class="hljs-class"> where </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MkValidatedAddrList</span></span></span><span class="hljs-class"> : (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lst</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Addr</span></span></span><span class="hljs-class">) -&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">prf</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">valid</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">types</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lst</span></span></span><span class="hljs-class">) = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">True</span></span></span><span class="hljs-class">) -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ValidatedAddrList</span></span></span><span class="hljs-class"> lst</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุณูููู ุจุชุญููู ูุง ูุชุจูุงู ููุง. </p><br><p style=";text-align:right;direction:rtl">  <code>data ValidatedAddrList : List Addr -&gt; Type where</code> ูุนูู ุฃู ุงูููุน <code>ValidatedAddrList</code> ูุนููุงุชู ุ ูู ุงููุงูุน ุ ูู ุฎูุงู ูุงุฆูุฉ ุงูุนูุงููู. </p><br><p style=";text-align:right;direction:rtl">  ูููู ูุธุฑุฉ ุนูู ุชูููุน ูููุดุฆ <code>MkValidatedAddrList</code> ุงููุญูุฏ ูู ูุฐุง ุงูููุน: <code>(lst : List Addr) -&gt; (prf : valid (types lst) = True) -&gt; ValidatedAddrList lst</code> .  ุฃู ุฃููุง ุชุฃุฎุฐ ุจุนุถ ูุงุฆูุฉ ุนูุงููู <code>lst</code> <code>prf</code> ุฃุฎุฑู ูู ุงูููุน <code>prf</code> <code>valid (types lst) = True</code> .  ูุงุฐุง ูุนูู ูุฐุง ุงูููุนุ  ูุนูู ุฐูู ุฃู ุงููููุฉ ุงูููุฌูุฏุฉ ุนูู ูุณุงุฑ <code>=</code> ุชุณุงูู ุงููููุฉ ุนูู ูููู <code>=</code> ุ ุฃู ุฃููุง <code>valid (types lst)</code> ุ ูู ุงููุงูุน ุ ูู True. </p><br><p style=";text-align:right;direction:rtl">  ููู ูุนููุ  ุงูุชูููุน <code>=</code> ูุดุจู <code>(x : A) -&gt; (y : B) -&gt; Type</code> .  ูุฐุง ูุนูู ุฃู <code>=</code> ูุฃุฎุฐ ูููุชูู ุนุดูุงุฆูุชูู <code>x</code> ู <code>y</code> (ุฑุจูุง ุญุชู ูู ููุนูู ูุฎุชูููู <code>A</code> ู <code>B</code> ุ ููุง ูุนูู ุฃู ุนุฏู ุงููุณุงูุงุฉ ูู idris ุบูุฑ ูุชุฌุงูุณ ุ ูุฃูู ุบุงูุถ ุฅูู ุญุฏ ูุง ูู ูุฌูุฉ ูุธุฑ ูุธุฑูุฉ ุงูููุน ุ ูููู ูุฐุง ููุถูุน ูููุงูุดุฉ ุฃุฎุฑู).  ุซู ูุง ูุฏู ุนูู ุงููุณุงูุงุฉุ  ูุจุณุจุจ ุญูููุฉ ุฃู ุงูููุดุฆ ุงููุญูุฏ <code>=</code> - <code>Refl</code> ุจุชูููุน <em>ููุงุฏ ูููู</em> <code>(x : A) -&gt; x = x</code> .  ุฃู ุ ุฅุฐุง ูุงูุช ูุฏููุง ูููุฉ ูู ุงูููุน <code>x = y</code> ุ ูุฅููุง ูุนูู ุฃูู ุชู ุจูุงุคู ุจุงุณุชุฎุฏุงู <code>Refl</code> (ูุฃูู ูุง ููุฌุฏ <code>Refl</code> ุขุฎุฑูู) ุ ููุง ูุนูู ุฃู <code>x</code> ุชุณุงูู <code>y</code> ุงููุงูุน. </p><br><p style=";text-align:right;direction:rtl">  ูุงุญุธ ุฃู ูุฐุง ูู ุงูุณุจุจ ูู Haskell ุณูู ูุชุธุงูุฑ ุฏุงุฆููุง ูู ุฃุญุณู ุงูุฃุญูุงู ุจุฃููุง ูุซุจุช ุดูุฆูุง ุ ูุฃู Haskell ูุฏ ุญุฏุฏ ุฃู ูุณูู ุฃู ููุน ุ ูุฐูู ูุง ุชุนูู ุงูุญุฌุฉ ุงููุฐููุฑุฉ ุฃุนูุงู ููุงู: ูุฃู <code>x</code> ุ <code>y</code> ูุตุทูุญ ูู ุงูููุน <code>x = y</code> ูููู ุฅูุดุงุคู ุนุจุฑ <code>undefined</code> (ุฃู ูู ุฎูุงู ุงูุนูุฏูุฉ ุงููุงููุงุฆูุฉ ุ ูู ุฃูู ุจุดูู ุนุงู ูู ููุณู ูู ุญูุซ ูุธุฑูุฉ ุงูููุน). </p><br><p style=";text-align:right;direction:rtl">  ููุงุญุธ ุฃูุถูุง ุฃู ุงููุณุงูุงุฉ ููุง ูุง ุชุนูู ุจูุนูู Haskell's <code>Eq</code> ุฃู ุฃู <code>operator==</code> ูู C ++ ุ ูููููุง ุฃูุซุฑ ุตุฑุงูุฉ ุฅูู ุญุฏ ูุจูุฑ: ุงููููููุฉ ุ ูุงูุชู ุ ุชุจุณูุทูุง ุ ุชุนูู ุฃู ุงููููุชูู ููุง ููุณ <em>ุงูุดูู</em> .  ููุฐุง ูุนูู ุฃู ุฎุฏุงุนู ุจุจุณุงุทุฉ ูุง ูุนูู.  ููู ูุถุงูุง ุงููุณุงูุงุฉ ุชูุฌุฐุจ ุชูููุฏูุง ุฅูู ูุงุฏุฉ ูููุตูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุชุนุฒูุฒ ููููุง ูููุณุงูุงุฉ ุ ููุชุจ ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ ูููุธููุฉ <code>valid</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs powershell">testPostValid : valid [<span class="hljs-type"><span class="hljs-type">Post</span></span>] = True testPostValid = Refl testEmptyInvalid : valid [] = False testEmptyInvalid = Refl testDupsInvalid : valid [<span class="hljs-type"><span class="hljs-type">Post</span></span>, <span class="hljs-type"><span class="hljs-type">Post</span></span>] = False testDupsInvalid = Refl testPostEmailValid : valid [<span class="hljs-type"><span class="hljs-type">Post</span></span>, <span class="hljs-type"><span class="hljs-type">Email</span></span>] = True testPostEmailValid = Refl</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐู ุงูุงุฎุชุจุงุฑุงุช ุฌูุฏุฉ ูู ุญูุซ ุฃูู ูุง ุชุญุชุงุฌ ุญุชู ุฅูู ุชุดุบูููุง ุ ููููู ุฃู ูููู ุงููุดุบู ุจูุญุตูุง.  ูู ุงููุงูุน ุ ููุณุชุจุฏู <code>True</code> ุจู <code>False</code> ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ุฃูููุง ููุฑู ูุง ุณูุญุฏุซ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">testPostValid : <span class="hljs-keyword"><span class="hljs-keyword">valid</span></span> [Post] = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> testPostValid = Refl</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุณู Typsekher </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/l7/to/xm/l7toxmndt6lzzbpmjersntiujfg.png"></p><br><p style=";text-align:right;direction:rtl">  ููุง ูู ูุชููุน.  ุนุธูู </p><br><h4 style=";text-align:right;direction:rtl">  ุชุจุณูุท </h4><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฏุนููุง ุฅุนุงุฏุฉ ุจูุงุก ูุงุฆูุฉ <code>ValidatedAddrList</code> ููููุงู. </p><br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ุฅู ููุท ููุงุฑูุฉ ูููุฉ ูุนููุฉ ูุน <code>True</code> ุดุงุฆุน ุชูุงููุง ุ ูุฐูู ููุงู ููุน ุฎุงุต <code>So</code> ูู ุฅุฏุฑูุณ ููุฐุง: ููููู ุฃู ุชุฃุฎุฐ <code>So x</code> ููุฑุงุฏู ูู <code>x = True</code> .  ููุตูุญ ุชุนุฑูู <code>ValidatedAddrList</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ValidatedAddrList</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Addr</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type</span></span></span><span class="hljs-class"> where </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MkValidatedAddrList</span></span></span><span class="hljs-class"> : (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lst</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Addr</span></span></span><span class="hljs-class">) -&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">prf</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">So</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">valid</span></span></span><span class="hljs-class"> $ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">types</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lst</span></span></span><span class="hljs-class">)) -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ValidatedAddrList</span></span></span><span class="hljs-class"> lst</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ <code>So</code> ูุฏูู ูุธููุฉ ูุณุงุนุฏุฉ ููุงุฆูุฉ <code>choose</code> ุ ูุงูุชู ูู ุฌููุฑูุง ุชุฑูุน ุงูุชุญูู ุฅูู ูุณุชูู ุงูุฃููุงุน: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">&gt; :doc choose Data.So.choose : (b : <span class="hljs-type"><span class="hljs-type">Bool</span></span>) -&gt; Either (So b) (So (<span class="hljs-keyword"><span class="hljs-keyword">not</span></span> b)) <span class="hljs-keyword"><span class="hljs-keyword">Perform</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> analysis <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> a <span class="hljs-type"><span class="hljs-type">Boolean</span></span>, providing clients <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> a So proof</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูููู ูู ุงููููุฏ ููุง ุนูุฏูุง ููุชุจ ูุธุงุฆู ุชุนุฏูู ูุฐุง ุงูููุน. </p><br><p style=";text-align:right;direction:rtl">  ุซุงูููุง ุ ูู ุจุนุถ ุงูุฃุญูุงู (ุฎุงุตุฉ ูู ุงูุชุทููุฑ ุงูุชูุงุนูู) ูููู <code>prf</code> ุงูุนุซูุฑ ุนูู ูููุฉ <code>prf</code> ุงูููุงุณุจุฉ ุจููุฑุฏูุง.  ูู ุฃุฌู ุฃูู ูู ูุซู ูุฐู ุงูุญุงูุงุช ุ ูู ููู ูู ุงูุถุฑูุฑู ุจูุงุฆู ูุฏูููุง ุ ููุงู ุณูุฑ ูุญูู ููุงุธุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ValidatedAddrList</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Addr</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type</span></span></span><span class="hljs-class"> where </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MkValidatedAddrList</span></span></span><span class="hljs-class"> : (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lst</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Addr</span></span></span><span class="hljs-class">) -&gt; {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">prf</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">So</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">valid</span></span></span><span class="hljs-class"> $ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">types</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lst</span></span></span><span class="hljs-class">)} -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ValidatedAddrList</span></span></span><span class="hljs-class"> lst</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุฃููุงุณ ุงููุชุนุฑุฌุฉ ุชุนูู ุฃู ูุฐู ุญุฌุฉ ุถูููุฉ ุจุฃู ุฅุฏุฑูุณ ุณูุญุงูู ุงูุงูุณุญุงุจ ูู ุงูุณูุงู ุ ููุนูู <code>auto</code> ุฃูู ุณูุญุงูู ุฃูุถูุง ุจูุงุกู ุจููุณู. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐู ูุงุฐุง ุชุนุทููุง ูุงุฆูุฉ <code>ValidatedAddrList</code> ุงูุฌุฏูุฏุฉ ูุฐูุ  ููุนุทู ูุซู ูุฐู ุงูุณูุณูุฉ ูู ุงูุงุณุชุฏูุงู: <code>val</code> ูููุฉ ูู ุงูููุน <code>ValidatedAddrList lst</code> .  ูุฐุง ูุนูู ุฃู <code>lst</code> ุนุจุงุฑุฉ ุนู ูุงุฆูุฉ ุนูุงููู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชู ุฅูุดุงุก <code>val</code> ุจุงุณุชุฎุฏุงู ูููุดุฆ <code>MkValidatedAddrList</code> ุ ุงูุฐู ูุฑุฑูุง ุจู ูุฐุง <code>lst</code> ููููุฉ <code>prf</code> ุฃุฎุฑู ูู ุงูููุน <code>So (valid $ types lst)</code> ุ ููู <code>valid (types lst) = True</code> ุชูุฑูุจูุง <code>valid (types lst) = True</code> .  ูุญุชู ูุชููู ูู ุจูุงุก <code>prf</code> ุ ูุญุชุงุฌ ุ ูู ุงููุงูุน ุ ูุฅุซุจุงุช ุฃู ูุฐู ุงููุณุงูุงุฉ <code>prf</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุงูุดูุก ุงูุฃุฌูู ูู ุฃู ูู ูุฐุง ูุชู ูุญุตู ุนู ุทุฑูู ุงูุทุจูุฉ.  ูุนู ุ ูุฌุจ ุฃู ูุชู ุงูุชุญูู ูู ุงูุตูุงุญูุฉ ูู ููุช ุงูุชุดุบูู (ูุฃูู ูููู ูุฑุงุกุฉ ุงูุนูุงููู ูู ููู ุฃู ูู ุงูุดุจูุฉ) ุ ูููู ุงูุนุฏุงุฏ ูุถูู ุฃู ูุชู ูุฐุง ุงูุชุญูู: ุจุฏููู ุ ูู ุงููุณุชุญูู ุฅูุดุงุก <code>ValidatedAddrList</code> .  ุนูู ุงูุฃูู ูู ุงุฏุฑูุณ.  ูู ูุงุณูู ุ ููุฃุณู. </p><br><h4 style=";text-align:right;direction:rtl">  ุฃุฏุฎู </h4><br><p style=";text-align:right;direction:rtl">  ููุชุญูู ูู ุญุชููุฉ ุงูุชุญูู ุ ุณูุญุงูู ูุชุงุจุฉ ูุธููุฉ ูุฅุถุงูุฉ ุนููุงู ุฅูู ุงููุงุฆูุฉ.  ุงููุญุงููุฉ ุงูุฃููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs coffeescript">insert : <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(addr : Addr)</span></span></span><span class="hljs-function"> -&gt;</span></span> ValidatedAddrList lst -&gt; ValidatedAddrList (addr :: lst) insert addr (MkValidatedAddrList lst) = MkValidatedAddrList (addr :: lst)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุ ุงููุฏูู ุงูุฅููุงุฆู ูุนุทู ุงูุฃุตุงุจุน (ุนูู ุงูุฑุบู ูู ุฃูู ุบูุฑ ูุงุจู ูููุฑุงุกุฉ ููุบุงูุฉ ุ ูุฅู ุชูููุฉ <code>valid</code> ูุนูุฏุฉ ููุบุงูุฉ): </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/au/oa/6j/auoa6jeo10ucav7rffetqmvylec.png"></p><br><p style=";text-align:right;direction:rtl">  ููู ูุญุตู ุนูู ูุณุฎุฉ ูู ูุฐุง <code>So</code> ุ  ูุง ุดูุก ุบูุฑ <code>choose</code> ุงููุฐููุฑ ุฃุนูุงู.  ุงููุญุงููุฉ ุงูุซุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> : (addr : Addr) -&gt; ValidatedAddrList lst -&gt; ValidatedAddrList (addr :: lst) <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> addr (MkValidatedAddrList lst) = <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">choose</span></span> (valid $ types (addr :: lst)) <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Left</span></span> l =&gt; MkValidatedAddrList (addr :: lst) <span class="hljs-keyword"><span class="hljs-keyword">Right</span></span> r =&gt; ?rhs</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชูุฑูุจุง typechetsya.  "ุชูุฑูุจูุง" ูุฃูู ูู ุบูุฑ ุงููุงุถุญ ูุง ุงูุฐู ูุฌุจ ุงุณุชุจุฏุงูู <code>rhs</code> .  ุจุฏูุงู ูู ุฐูู ุ ูู ุงููุงุถุญ: ูู ูุฐู ุงูุญุงูุฉ ุ ูุฌุจ ุนูู ุงููุธููุฉ ุงูุฅุจูุงุบ ุนู ุฎุทุฃ ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู.  ูุฐูู ุ ุชุญุชุงุฌ ุฅูู ุชุบููุฑ ุงูุชูููุน ููู ุงููููุฉ ุงููุฑุชุฌุนุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู <code>Maybe</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> : (addr : Addr) -&gt; ValidatedAddrList lst -&gt; Maybe (ValidatedAddrList (addr :: lst)) <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> addr (MkValidatedAddrList lst) = <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">choose</span></span> (valid $ types (addr :: lst)) <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Left</span></span> l =&gt; Just $ MkValidatedAddrList (addr :: lst) <span class="hljs-keyword"><span class="hljs-keyword">Right</span></span> r =&gt; <span class="hljs-keyword"><span class="hljs-keyword">Nothing</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ูุจูุท ููุนูู ููุง ููุจุบู. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุงูุขู ุธูุฑุช ุงููุดููุฉ ุงูุชุงููุฉ ุบูุฑ ุงููุงุถุญุฉ ุ ูุงูุชู ูุงูุช ูู ุงููุงูุน ูู ุงูููุงูุฉ ุงูุฃุตููุฉ.  ูุง ูุชููู ููุน ูุฐู ุงููุธููุฉ ุนู ูุชุงุจุฉ ูุซู ูุฐุง ุงูุชูููุฐ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> : (addr : Addr) -&gt; ValidatedAddrList lst -&gt; Maybe (ValidatedAddrList (addr :: lst)) <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> addr (MkValidatedAddrList lst) = <span class="hljs-keyword"><span class="hljs-keyword">Nothing</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃู ูููู ุฏุงุฆููุง ุฃูู ูุง ูููููุง ุจูุงุก ูุงุฆูุฉ ุนูุงููู ุฌุฏูุฏุฉ.  Typhechaetsyaุ  ูุนู  ูู ูุฐุง ุตุญูุญุ  ุญุณูุง ุ ุจุงููุงุฏ.  ูู ูููู ุชุฌูุจ ุฐููุ </p><br><p style=";text-align:right;direction:rtl">  ุงุชุถุญ ุฃูู ูููู ุ ููุฏููุง ูู ุงูุฃุฏูุงุช ุงููุงุฒูุฉ ูุฐูู.  ูู ุญุงูุฉ ูุฌุงุญ ุฐูู ุ <code>insert</code> <code>ValidatedAddrList</code> ุ ูุงูุชู ุชุญุชูู ุนูู ุฏููู ุนูู ูุฐุง ุงููุฌุงุญ.  ูุฐุง ุฃุถู ุชูุงุธุฑูุง ุฃููููุง ูุงุทูุจ ูู ุงููุธููุฉ ุฃู ุชุฑุฌุน ุฃูุถูุง ุฅูู ุฏููู ุนูู ุงููุดู! </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> : (addr : Addr) -&gt; ValidatedAddrList lst -&gt; Either (So (<span class="hljs-keyword"><span class="hljs-keyword">not</span></span> $ valid $ types (addr :: lst))) (ValidatedAddrList (addr :: lst)) <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> addr (MkValidatedAddrList lst) = <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">choose</span></span> (valid $ types (addr :: lst)) <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Left</span></span> l =&gt; <span class="hljs-keyword"><span class="hljs-keyword">Right</span></span> $ MkValidatedAddrList (addr :: lst) <span class="hljs-keyword"><span class="hljs-keyword">Right</span></span> r =&gt; <span class="hljs-keyword"><span class="hljs-keyword">Left</span></span> r</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ูููููุง ุงูุขู ุฃุฎุฐ <code>Nothing</code> ูุฅุนุงุฏุชู ุฏุงุฆููุง. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุฃู ุชูุนู ุงูุดูุก ููุณู ููุธุงุฆู ุฅุฒุงูุฉ ุงูุนููุงู ููุง ุดุงุจู ุฐูู. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูุฑู ููู ูุจุฏู ูู ุดูุก ุงูุขู ูู ุงูููุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููุญุงูู ุฅูุดุงุก ูุงุฆูุฉ ุนูุงููู ูุงุฑุบุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/9l/pf/a_/9lpfa_ytfrgfsvxbvy4lkk0a8uy.png"></p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุณุชุญูู ุ ูุงุฆูุฉ ูุงุฑุบุฉ ุบูุฑ ุตุงูุญุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุงุฐุง ุนู ูุงุฆูุฉ ูู ุงูุนููุงู ุงูุจุฑูุฏู ููุทุ </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/au/d2/jq/aud2jqe2malfgrjg2txzsncdom4.png"></p><br><p style=";text-align:right;direction:rtl">  ุญุณููุง ุ ุฏุนูุง ูุญุงูู ุฅุฏุฑุงุฌ ุงูุนููุงู ุงูุจุฑูุฏู ูู ุงููุงุฆูุฉ ุงูุชู ุชุญุชูู ุจุงููุนู ุนูู ุงูุนููุงู ุงูุจุฑูุฏู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xl/cx/ri/xlcxrimioc_dutfysgtdmr2srmc.png"></p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูุญุงูู ุฅุฏุฎุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/sn/1n/zw/sn1nzwqz5erm1vjnq59dkel3zzi.png"></p><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุงูุฉ ุ ูุนูู ูู ุดูุก ุชูุงููุง ููุง ูู ูุชููุน. </p><br><p style=";text-align:right;direction:rtl">  Phew.  ุงุนุชูุฏุช ุฃููุง ุณุชููู ุซูุงุซุฉ ุฃุณุทุฑ ุ ูููู ุชุจูู ุฃููุง ุฃุทูู ููููุงู.  ููุณุชูุดู ุฅูู ุฃู ูุฏู ูููู ุฃู ูุฐูุจ ูู Haskell ุ ุณูููู ูู ุงูููุงูุฉ ุงูุชุงููุฉ.  ูู ุบุถูู ุฐูู ุ ููููุง </p><br><h4 style=";text-align:right;direction:rtl">  ุชุฃูู </h4><br><p style=";text-align:right;direction:rtl">  ูุง ูู ูู ุงูููุงูุฉ ุฑุจุญ ูุซู ูุฐุง ุงููุฑุงุฑ ููุงุฑูุฉ ุจุงููุฑุงุฑ ุงููุงุฑุฏ ูู ุงูููุงูุฉ ุ ูุงูุฐู ุฃุดุฑูุง ุฅููู ูู ุงูุจุฏุงูุฉุ </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฑุฉ ุฃุฎุฑู ุ ูู ุฃูุซุฑ ูุงุจููุฉ ููุชุทููุฑ.  ูุธุงุฆู ุงูุชุญูู ุงููุนูุฏุฉ ุฃุณูู ูู ุงููุชุงุจุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅูู ุฃูุซุฑ ุนุฒูุฉ.  ูุง ูุฌุจ ุฃู ูุนุฑู ุฑูุฒ ุงูุนููู ูุง ุจุฏุงุฎู ูุธููุฉ ุงูุชุญูู ูู ุงูุตุญุฉ ุ ูู ุญูู ุฃู ูููุฐุฌ <code>ContactInfo</code> ูู ุงูููุงูุฉ ุงูุฃุตููุฉ ูุชุทูุจ ุฑุจุทู. </li><li style=";text-align:right;direction:rtl">  ุชุชู ูุชุงุจุฉ ููุทู ุงูุชุญูู ูู ุดูู ูุธุงุฆู ุนุงุฏูุฉ ููุฃูููุฉ ุ ุจุญูุซ ูููู ุงูุชุญูู ููู ุนูู ุงูููุฑ ูู ุฎูุงู ุงููุฑุงุกุฉ ุงููุฏุฑูุณุฉ ูุงุฎุชุจุงุฑู ูู ุฎูุงู ุงุฎุชุจุงุฑุงุช ููุช ุงูุชุฑุฌูุฉ ุ ุจุฏูุงู ูู ุงุดุชูุงู ูุนูู ุงูุชุญูู ูู ูููุฐุฌ ููุน ุงูุจูุงูุงุช ุงูุฐู ููุซู ูุชูุฌุฉ ุชู ุงูุชุญูู ูููุง ุจุงููุนู. </li><li style=";text-align:right;direction:rtl">  ูุตุจุญ ูู ุงููููู ุชุญุฏูุฏ ุณููู ุงููุธุงุฆู ุงูุชู ุชุนูู ูุน ููุน ุงูุจูุงูุงุช ุงูุชู ุชูููุง ุจุดูู ุฃูุซุฑ ุฏูุฉ ุ ุฎุงุตุฉ ูู ุญุงูุฉ ุนุฏู ุงุฌุชูุงุฒ ุงูุงุฎุชุจุงุฑ.  ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงููุณุชุญูู ุจุจุณุงุทุฉ ูุชุงุจุฉ <code>insert</code> ุงูููุชูุจ ููุชูุฌุฉ ุบูุฑ <em>ุตุญูุญุฉ</em> .  ูุจุงููุซู ุ ูููู ูููุฑุก ุฃู ููุชุจ <code>insertOrReplace</code> ู <code>insertOrIgnore</code> ููุง ุดุงุจู ุ ูุงูุฐู ุชู ุชุญุฏูุฏ ุณูููู ุจุงููุงูู ูู ุงูููุน. </li></ol><br><p style=";text-align:right;direction:rtl">  ูุง ูู ุงูุฑุจุญ ููุงุฑูุฉ ุจุญู OOP ูุซู ูุฐุงุ </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">class</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ValidatedAddrListClass</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">public</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">ValidatedAddrListClass</span></span>(std::vector&lt;Addr&gt; addrs) { if (!<span class="hljs-built_in"><span class="hljs-built_in">valid</span></span>(addrs)) throw ValidationError {}; } };</code> </pre> <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูููุฏ ุฃูุซุฑ ููุทููุง ูุฃูุงููุง.  ูู ุงูุญุงูุฉ ุงููุฐููุฑุฉ ุฃุนูุงู ุ ูุฅู ุงูุดูู ูู <em>ุฅุฌุฑุงุก</em> ูุชู ูุญุตู ูุฑุฉ ูุงุญุฏุฉ ุ ูุงูุฐู ูุณู ุญููู ูุงุญููุง.  ูู ุดูุก ูุจูู ุนูู ุงูุตุฏู ูููู ุฃูู ุฅุฐุง ูุงู ูุฏูู <code>ValidatedAddrListClass</code> ุ ูุฅู ุชูููุฐู ูุงู ุจุฅุฌุฑุงุก ูุญุต ููุงู.  ูุง ูููู ุงุฎุชูุงุฑ ุญูููุฉ ูุฐุง ุงูุงุฎุชูุงุฑ ูู ุงููุตู ููููุฉ ูุนููุฉ.  ูู ุญุงูุฉ ูุฌูุฏ <em>ูููุฉ ูู</em> ููุน ูุง ุ ูููู ููู ูุฐู ุงููููุฉ ุจูู ุฃุฌุฒุงุก ูุฎุชููุฉ ูู ุงูุจุฑูุงูุฌ ุ ูุชุณุชุฎุฏู ูุจูุงุก ููู ุฃูุซุฑ ุชุนููุฏูุง (ุนูู ุณุจูู ุงููุซุงู ุ ูุฑุฉ ุฃุฎุฑู ุ ุฑูุถ ูุฐุง ุงูุงุฎุชูุงุฑ) ุ ูุงูุชุญููู (ุงูุธุฑ ุงูููุฑุฉ ุงูุชุงููุฉ) ุ ูุนููููุง ุชูุนู ููุณ ุงูุดูุก ุงูุฐู ุงุนุชุฏูุง ุงูููุงู ุจู ูุน ุงูููู. </li><li style=";text-align:right;direction:rtl">  ูููู ุงุณุชุฎุฏุงู ุนูููุงุช ุงูุชุญูู ูุฐู ูู ูุทุงุจูุฉ ุงูููุท (ุงูุชุงุจุน).  ุตุญูุญ ุ ููุณ ูู ุญุงูุฉ ูุฐู ุงููุธููุฉ <code>valid</code> ูููุณ ูู ุญุงูุฉ ุฅุฏุฑูุณ ุ ููู ูุนูุฏุฉ ุจุดูู ูุคูู ุ ูุฅุฏุฑูุณ ูููุฉ ุจุดูู ูุคูู ุจุญูุซ ูููู ุงุณุชุฎุฑุงุฌ ุงููุนูููุงุช ุงููููุฏุฉ ููุฃููุงุท ูู ุงูุจููุฉ <code>valid</code> .  ููุน ุฐูู ุ ูููู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูุตุงูุญ ุจุฃุณููุจ ุฃูุซุฑ ููุงุกูุฉ ููุทุงุจูุฉ ุงูุฃููุงุท ุ ูููู ูุฐุง ูุชุฌุงูุฒ ูุทุงู ูุฐู ุงูููุงูุฉ ูููุณ ุจุดูู ุนุงู ุชุงูููุง ูู ุญุฏ ุฐุงุชู. </li></ol><br><p style=";text-align:right;direction:rtl">  ูุง ูู ุนููุจูุ </p><br><p style=";text-align:right;direction:rtl">  ุฃุฑู ุนูุจูุง ุฃุณุงุณููุง ูุงุญุฏูุง ุฎุทูุฑูุง: ูุงูุตูุงุญ <code>valid</code> ููุธููุฉ ุบุจูุฉ ุฌุฏูุง.  ุชููู ุจุฅุฑุฌุงุน ุฌุฒุก ูุงุญุฏ ููุท ูู ุงููุนูููุงุช - ุณูุงุก ุงุฌุชุงุฒุช ุงูุจูุงูุงุช ุงูุชุญูู ูู ุงูุตุญุฉ ุฃู ูุง.  ูู ุญุงูุฉ ุงูุฃููุงุน ุงูุฃูุซุฑ ุฐูุงุกู ุ ูููููุง ุชุญููู ุดูุก ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู. </p><br><p style=";text-align:right;direction:rtl">  ุนูู ุณุจูู ุงููุซุงู ุ ุชุฎูู ุฃู ุดุฑุท ุชูุฑุฏ ุงูุนูุงููู ูุฏ ุงุฎุชูู ูู ุงููุนุงุฑู ุงูุชูููุฏูุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ูู ุงููุงุถุญ ุฃู ุฅุถุงูุฉ ุนููุงู ุฌุฏูุฏ ุฅูู ูุงุฆูุฉ ุงูุนูุงููู ุงูุญุงููุฉ ูู ูุฌุนู ุงููุงุฆูุฉ ุบูุฑ ุตุงูุญุฉ ุ ูุฐูู ูููููุง <em>ุฅุซุจุงุช ูุฐู ุงููุธุฑูุฉ</em> ุนู ุทุฑูู ูุชุงุจุฉ ุฏุงูุฉ ูู ุงูููุน <code>So (valid $ types lst) -&gt; So (valid $ types $ addr :: lst)</code> ุ ูุงุณุชุฎุฏููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุชุงุจุฉ ุขูู ููููุน ุฏุงุฆููุง </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs coffeescript">insert : <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(addr : Addr)</span></span></span><span class="hljs-function"> -&gt;</span></span> ValidatedAddrList lst -&gt; ValidatedAddrList (addr :: lst)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุ ููุฃุณู ุ ุงููุธุฑูุงุช ูุซู ุงูุนูุฏูุฉ ูุงูุงุณุชูุฑุงุก ุ ููุง ุชุญุชูู ูุดููุชูุง ุนูู ุฃู ูููู ุงุณุชูุฑุงุฆู ุฃููู ุ ูุฐูู ุ ูู ุฑุฃูู ุ ูุฅู ุงูููุฏ ูุน ุงูุจููุท ุงูุจูููู ุงูุตุงูุญ ููุณ ุณูุฆูุง ุฃูุถูุง. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar428051/">https://habr.com/ru/post/ar428051/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar428039/index.html">ูุง ุชุฎุทุท ุงูุญูููุฉ ููุฏูุงุน ุนู ุญูุงุฏูุฉ ุงูุดุจูุฉ</a></li>
<li><a href="../ar428041/index.html">ููุฎุต ุงูููุงุฏ ุงูุทุงุฒุฌุฉ ูู ุนุงูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ููุฃุณุจูุน ุงููุงุถู ุฑูู 336 (22 - 28 ุฃูุชูุจุฑ 2018)</a></li>
<li><a href="../ar428043/index.html">ูู ุงูุชุธุงุฑ ุงููุณุฎุฉ ุงูุณุงุฏุณุฉ ูู ุจุฑูุงูุฌ Winamp 5.8: "ุณุฑ" ุงูููุดุฃ ุ ุฅููุงููุฉ ุงููุณุฎุฉ ุงูุฑุณููุฉ</a></li>
<li><a href="../ar428045/index.html">ููุฎุต PHP ุฑูู 142 (15-29 ุฃูุชูุจุฑ 2018)</a></li>
<li><a href="../ar428047/index.html">ุชุญููู ุฃุฏุงุก ุฎูุงุฏู WSGI: ุฅุนุงุฏุฉ uWSGI ุฅูู ููุงูู</a></li>
<li><a href="../ar428053/index.html">ููููุฉ ุฅูุดุงุก ุงุณุชุฑุงุชูุฌูุฉ ุงุฎุชุจุงุฑ: ูุณุฎุฉ ูู ุงููููุฏุณูู ุงูุญูููููู</a></li>
<li><a href="../ar428055/index.html">ุงุณุชุนุงุฏูุฉ ููุดุฑูุงุช ุงููุงุดุฆุฉ ูู ูุฌุงู ุงูุชูููููุฌูุง. Z3 - ุฃูู ููุจููุชุฑ ุชุชุงุจุน</a></li>
<li><a href="../ar428057/index.html">ูุธุฑุฉ ุฌุฏูุฏุฉ ุนูู ุชูุซูู API ู SDK ูู Yandex. ูุญุงุถุฑุฉ ุญูู Hyperbaton</a></li>
<li><a href="../ar428059/index.html">ูู ุจุชูุตูู Multunath LUN Storage ุจุจุฑูุงูุฌ VMware ESXi ู Debian GNU / Linux</a></li>
<li><a href="../ar428061/index.html">ุฅุฏุงุฑุฉ ุชูุงููู ุงููุดุฑูุน ูุน ุฅุฏุงุฑุฉ ุงููููุฉ ุงูููุชุณุจุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>