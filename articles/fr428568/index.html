<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ñ´Ô∏è üõ§Ô∏è üñïüèæ Guide de d√©veloppement d'applications Web natives React ‚õπüèΩ ü¶å üïî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tu t'es r√©veill√©. Le soleil brille, les oiseaux gazouillent. Dans le monde, personne n'est en guerre contre personne, personne ne meurt de faim et le ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Guide de d√©veloppement d'applications Web natives React</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/428568/">  Tu t'es r√©veill√©.  Le soleil brille, les oiseaux gazouillent.  Dans le monde, personne n'est en guerre contre personne, personne ne meurt de faim et le m√™me code peut √™tre utilis√© dans des projets Web et dans des applications natives.  Comme ce serait bien!  Malheureusement, seul un code universel est visible √† l'horizon, mais le chemin vers celui-ci, encore aujourd'hui, est encore plein de surprises. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/df2/6a3/ed5/df26a3ed5295339d89c7e0b8778a501a.png" alt="image"></a> <br><br>  Le mat√©riel, dont nous publions la traduction aujourd'hui, est un guide petit mais assez d√©taill√© pour le d√©veloppement d'applications universelles utilisant React Native. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Pourquoi tout cela?</font> </h2><br>  L'abr√©viation "PWA" ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Progressive Web Apps</a> , applications web progressives) est aujourd'hui bien connue de tous, cet acronyme √† trois lettres ne semble √™tre qu'une baleine dans une mer de termes techniques.  Mais cette technologie populaire n'est pas encore sans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©fauts</a> .  Il y a beaucoup de difficult√©s technologiques associ√©es √† de telles applications, il y a des situations dans lesquelles un d√©veloppeur est oblig√© de cr√©er simultan√©ment des applications natives et Web.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici un</a> bon article comparant PWA et les applications natives. <br><br>  Peut-√™tre que les entreprises devraient se concentrer uniquement sur les applications natives?  Non, √ßa n'en vaut pas la peine.  C'est une grosse erreur.  En cons√©quence, le d√©veloppement d'une seule application universelle devient une √©tape logique.  Cela vous permet de r√©duire le temps de d√©veloppement, de r√©duire le co√ªt de cr√©ation et de support des projets.  Ce sont ces caract√©ristiques des applications universelles qui m'ont pouss√© √† une petite exp√©rience. <br><br>  Il s'agit d'un exemple d'application universel dans le domaine du commerce √©lectronique pour la commande de produits alimentaires.  Apr√®s l'exp√©rience, j'ai cr√©√© un mod√®le pour de futurs projets et pour de nouvelles recherches. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/165/f3a/8d3/165f3a8d3fe98bc532e66cd849fbb694.png"><br>  <i><font color="#999999">Papu est une application de commande de nourriture con√ßue pour Android, iOS et le Web</font></i> <br><br><h2>  <font color="#3AC1EF">Blocs de construction d'application</font> </h2><br>  Ici, nous utilisons React, nous devons donc s√©parer la logique d'application de l'interface utilisateur.  Il est pr√©f√©rable d'utiliser une sorte de syst√®me pour contr√¥ler l'√©tat d'une application comme Redux ou Mobx.  Une telle d√©marche rend imm√©diatement la logique du fonctionnement de l'application universelle.  Il, sans modifications, peut √™tre utilis√© sur diff√©rentes plateformes. <br><br>  La partie visuelle de l'application est une autre conversation.  Pour construire l'interface d'application, vous devez disposer d'un ensemble universel de primitives, de blocs de construction de base.  Ils doivent fonctionner √† la fois sur le Web et dans l'environnement natif.  Malheureusement, la langue du Web et la langue des plates-formes natives sont deux choses diff√©rentes. <br><br>  Par exemple, un conteneur Web standard vous contactera comme ceci: <br><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> !  -   !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Et natif - comme √ßa: <br><br><pre> <code class="hljs pgsql">&lt;<span class="hljs-keyword"><span class="hljs-keyword">View</span></span>&gt;!  -    React Native&lt;/<span class="hljs-keyword"><span class="hljs-keyword">View</span></span>&gt;</code> </pre> <br>  Certaines personnes intelligentes ont trouv√© un moyen de sortir de cette situation.  Le r√©sultat √©tait des biblioth√®ques d'√©l√©ments sp√©cialis√©s.  L'une de mes pr√©f√©r√©es est la merveilleuse biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Web React Native</a> .  Il prend en charge non seulement les primitives de base de l'application, permettant l'utilisation de composants React Native sur le Web (pas tous les composants!), Mais donne √©galement acc√®s √† diverses API React Native.  Parmi eux, <code>AsyncStorage</code> , <code>Platform</code> , <code>Animated</code> , <code>AsyncStorage</code> et bien d'autres.  Jetez un ≈ìil aux excellents exemples qui se trouvent dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">manuel</a> de cette biblioth√®que. <br><br><h2>  <font color="#3AC1EF">Motif</font> </h2><br>  Nous avons compris les primitifs.  Mais nous devons encore connecter l'environnement pour le d√©veloppement Web et pour le d√©veloppement natif.  Mon projet utilise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">create-react-app</a> (pour une application web) et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un script d'initialisation</a> React Native (pour une application native, sans Expo).  Tout d'abord, j'ai cr√©√© un projet avec cette commande: <code>create-react-app rnw_web</code> .  Il a ensuite cr√©√© un deuxi√®me projet: <code>react-native init raw_native</code> .  Ensuite, en suivant l'exemple de Victor Frankenstein, j'ai pris les fichiers <code>package.json</code> de ces deux projets et les ai fusionn√©s.  Apr√®s cela, dans le dossier du nouveau projet, j'ai aliment√© le nouveau fichier de <code>yarn</code> .  Voici le fichier de <code>package</code> en question: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"rnw_boilerplate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.1.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"private"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"dependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^16.5.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"react-art"</span></span>: <span class="hljs-string"><span class="hljs-string">"^16.5.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"react-dom"</span></span>: <span class="hljs-string"><span class="hljs-string">"^16.5.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"react-native"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.56.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"react-native-web"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.9.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"react-navigation"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.17.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"react-router-dom"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.3.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"react-router-modal"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.4.2"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"devDependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"babel-jest"</span></span>: <span class="hljs-string"><span class="hljs-string">"^23.4.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"babel-preset-react-native"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"jest"</span></span>: <span class="hljs-string"><span class="hljs-string">"^23.4.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"react-scripts"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.5"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"react-test-renderer"</span></span>: <span class="hljs-string"><span class="hljs-string">"^16.3.1"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"scripts"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"node node_modules/react-native/local-cli/cli.js start"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"test"</span></span>: <span class="hljs-string"><span class="hljs-string">"jest"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"start-ios"</span></span>: <span class="hljs-string"><span class="hljs-string">"react-native run-ios"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"start-web"</span></span>: <span class="hljs-string"><span class="hljs-string">"react-scripts start"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"build"</span></span>: <span class="hljs-string"><span class="hljs-string">"react-scripts build"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"test-web"</span></span>: <span class="hljs-string"><span class="hljs-string">"react-scripts test --env=jsdom"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"eject-web"</span></span>: <span class="hljs-string"><span class="hljs-string">"react-scripts eject"</span></span> } }</code> </pre> <br>  Veuillez noter qu'il n'y a aucune fonction de navigation dans cette version du fichier.  Ensuite, vous devez copier tous les fichiers de code source des dossiers de l'application Web et de l'application native dans le dossier du nouveau projet unifi√©. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b5d/f0c/05b/b5df0c05b4739e5d1a4f3aa61f8de1a6.png"><br>  <i><font color="#999999">Dossiers √† copier dans un nouveau projet</font></i> <br><br>  Maintenant, dans le dossier <code>src</code> , qui se trouve dans le r√©pertoire du nouveau projet, cr√©ez deux fichiers: <code>App.js</code> et <code>App.native.js</code> .  Gr√¢ce √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">webpack,</a> nous pouvons utiliser des extensions de nom de fichier pour indiquer au bundler o√π les fichiers √† utiliser.  La s√©paration des fichiers d' <code>App</code> est vitale car nous allons utiliser diff√©rentes approches pour naviguer dans les applications. <br><br>  Voici le fichier <code>App.js</code> pour le Web.  <code>react-router</code> utilis√© pour la navigation. <br><br><pre> <code class="hljs pgsql">// App.js - WEB <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "react"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">View</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "react-native"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> WebRoutesGenerator <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "./NativeWebRouteWrapper/index"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ModalContainer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "react-router-modal"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> HomeScreen <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "./HomeScreen"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TopNav <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "./TopNav"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> SecondScreen <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "./SecondScreen"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> UserScreen <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "./UserScreen"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> DasModalScreen <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "./DasModalScreen"; const routeMap = { Home: {   component: HomeScreen,   <span class="hljs-type"><span class="hljs-type">path</span></span>: "/",   exact: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }, Second: {   component: SecondScreen,   <span class="hljs-type"><span class="hljs-type">path</span></span>: "/second" }, <span class="hljs-keyword"><span class="hljs-keyword">User</span></span>: {   component: UserScreen,   <span class="hljs-type"><span class="hljs-type">path</span></span>: "/user/:name?",   exact: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }, DasModal: {   component: DasModalScreen,   <span class="hljs-type"><span class="hljs-type">path</span></span>: "*/dasmodal",   modal: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> } }; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> App extends Component { render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;<span class="hljs-keyword"><span class="hljs-keyword">View</span></span>&gt;       &lt;TopNav /&gt;       {WebRoutesGenerator({ routeMap })}       &lt;ModalContainer /&gt;     &lt;/<span class="hljs-keyword"><span class="hljs-keyword">View</span></span>&gt;   ); } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> App;</code> </pre> <br>  Voici le <code>App.js</code> pour l'application React Native.  Ici, <code>react-navigation</code> utilis√© <code>react-navigation</code> . <br><br><pre> <code class="hljs pgsql">// App.js - React Native <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "react"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createStackNavigator, createBottomTabNavigator } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "react-navigation"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> HomeScreen <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "./HomeScreen"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> DasModalScreen <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "./DasModalScreen"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> SecondScreen <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "./SecondScreen"; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> UserScreen <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "./UserScreen"; const HomeStack = createStackNavigator({ Home: { screen: HomeScreen, navigationOptions: { title: "Home" } } }); const SecondStack = createStackNavigator({ Second: { screen: SecondScreen, navigationOptions: { title: "Second" } }, <span class="hljs-keyword"><span class="hljs-keyword">User</span></span>: { screen: UserScreen, navigationOptions: { title: "User" } } }); const TabNav = createBottomTabNavigator({ Home: HomeStack, SecondStack: SecondStack }); const RootStack = createStackNavigator( {   Main: TabNav,   DasModal: DasModalScreen }, {   mode: "modal",   headerMode: "none" } ); <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> App extends Component { render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &lt;RootStack /&gt;; } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> App;</code> </pre> <br>  C'est ainsi que j'ai cr√©√© un mod√®le d'application simple et pr√©par√© la plate-forme pour d'autres travaux.  Vous pouvez essayer ce mod√®le en consultant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> r√©f√©rentiel. <br><br>  Maintenant, nous allons compliquer un peu ce mod√®le, ajouter un syst√®me de routage / navigation. <br><br><h2>  <font color="#3AC1EF">Probl√®mes de navigation et leurs solutions</font> </h2><br>  Une application, √† moins qu'elle ne se compose d'un seul √©cran, a besoin d'une sorte de syst√®me de navigation.  Maintenant (nous parlons de septembre 2018), il n'y a qu'un seul syst√®me de travail universel, adapt√© √† la fois aux applications Web et natives.  Il s'agit du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">React Router</a> .  Pour le web, cette solution fonctionne bien, mais dans le cas des projets React Native, tout n'est pas si clair. <br><br>  Dans React Router Native, il n'y a pas de transition entre les √©crans, il n'y a pas de prise en charge du bouton Retour (pour la plate-forme Android), il n'y a pas d'√©crans modaux, de barres de navigation et d'autres fonctionnalit√©s.  D'autres outils de navigation, tels que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">React Navigation</a> , ont ces capacit√©s. <br><br>  J'ai utilis√© cette biblioth√®que particuli√®re, mais vous pouvez choisir autre chose.  Par cons√©quent, dans mon projet, React Router est responsable de la navigation dans l'application Web et React Navigation pour la navigation dans l'application native.  Cependant, cela cr√©e un nouveau probl√®me.  Le fait est que les approches de navigation et de transfert de param√®tres dans ces syst√®mes sont tr√®s diff√©rentes. <br><br>  Afin de pr√©server l'esprit de React Native Web, en utilisant partout une approche similaire √† celle utilis√©e dans les applications natives, j'ai approch√© la solution de ce probl√®me en cr√©ant des routes web et en les enveloppant dans HOC.  Cela m'a donn√© l'opportunit√© de cr√©er une API qui rappelle React Navigation. <br><br>  Cette approche m'a permis de passer d'un √©cran √† l'autre d'une application Web, √©liminant ainsi la n√©cessit√© de cr√©er des composants distincts pour deux types d'applications. <br><br>  La premi√®re √©tape de la mise en ≈ìuvre de ce m√©canisme consiste √† cr√©er un objet avec une description des itin√©raires pour l'application Web: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> WebRoutesGenerator <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> "./NativeWebRouteWrapper"; //   ,    React Router     HOC const routeMap = { Home: {   screen: HomeScreen,   <span class="hljs-type"><span class="hljs-type">path</span></span>: <span class="hljs-string"><span class="hljs-string">'/'</span></span>,   exact: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> }, Menu: {   screen: MenuScreen,   <span class="hljs-type"><span class="hljs-type">path</span></span>: <span class="hljs-string"><span class="hljs-string">'/menu/sectionIndex?'</span></span> } } //  render &lt;<span class="hljs-keyword"><span class="hljs-keyword">View</span></span>&gt; {WebRoutesGenerator({ routeMap })} &lt;/<span class="hljs-keyword"><span class="hljs-keyword">View</span></span>&gt;</code> </pre> <br>  En fait, voici une copie de la fonction de cr√©ation de React Navigation avec l'ajout de capacit√©s sp√©cifiques √† React Router. <br><br>  Ensuite, en utilisant ma fonction d'assistance, je cr√©e <code>react-router</code> routes de <code>react-router</code> et je les enveloppe dans HOC.  Cela vous permet de cloner le composant d' <code>screen</code> et d'ajouter une <code>navigation</code> √† ses propri√©t√©s.  Cette approche imite le comportement de React Navigation et met √† disposition des m√©thodes telles que <code>navigate()</code> , <code>goBack()</code> , <code>getParam()</code> . <br><br><h2>  <font color="#3AC1EF">√âcrans modaux</font> </h2><br>  React Navigation, gr√¢ce √† <code>createStackNavigator</code> , permet √† une certaine page de l'application de sortir par le bas sous la forme d'un √©cran modal.  Pour y parvenir dans une application Web, j'ai d√ª utiliser la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modale React Router</a> .  Pour travailler avec l'√©cran modal, vous devez d'abord ajouter l'option appropri√©e √† l'objet <code>routeMap</code> : <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> routeMap = { Modal: {   screen: ModalScreen,   path: <span class="hljs-string"><span class="hljs-string">'*/modal'</span></span>,   modal: <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-comment"><span class="hljs-comment">//    ModalRoute     } }</span></span></code> </pre> <br>  De plus, le <code>&lt;ModalContainer /&gt;</code> de la biblioth√®que <code>&lt;ModalContainer /&gt;</code> <code>react-router-modal</code> doit √™tre ajout√© √† la pr√©sentation de l'application.  La page correspondante y sera affich√©e. <br><br><h2>  <font color="#3AC1EF">Navigation entre les √©crans</font> </h2><br>  Gr√¢ce au HOC de notre d√©veloppement (temporairement ce composant est appel√© <code>NativeWebRouteWrapper</code> , et c'est d'ailleurs un nom terrible), nous pouvons utiliser presque le m√™me ensemble de fonctions que dans React Navigation pour organiser le mouvement entre les pages dans la version web de l'application: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { product, navigation } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props &lt;Button onPress={navigation.navigate(<span class="hljs-string"><span class="hljs-string">'ProductScreen'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">id</span></span>: product.id})} title={<span class="hljs-string"><span class="hljs-string">`Go to </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${product.name}</span></span></span><span class="hljs-string">`</span></span>} /&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onPress</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{navigation.goBack}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Go Back"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Revenez √† l'√©cran pr√©c√©dent.</font> </h2><br>  Dans React Navigation, vous pouvez revenir aux <code>n</code> √©crans qui se trouvent dans la pile de navigation.  Similaire dans React Router n'est pas disponible, il n'y a pas de pile de navigation.  Afin de r√©soudre ce probl√®me, nous devons importer la fonction <code>pop</code> de notre propre conception dans le code.  En l'appelant, nous lui donnerons plusieurs param√®tres: <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pop from <span class="hljs-string"><span class="hljs-string">'/NativeWebRouteWrapper/pop'</span></span> render() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { navigation } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;Button     onPress={pop({screen: <span class="hljs-string"><span class="hljs-string">'FirstScreen'</span></span>, n: <span class="hljs-number"><span class="hljs-number">2</span></span>, navigation})}     title=<span class="hljs-string"><span class="hljs-string">"Go back two screens"</span></span>   /&gt; ) }</code> </pre> <br>  Nous d√©crivons ces param√®tres: <br><br><ul><li>  <code>screen</code> - le nom de l'√©cran (utilis√© par React Router dans la version Web de l'application). </li><li>  <code>n</code> est le nombre d'√©crans √† retourner en utilisant la pile (en utilisant React Navigation). </li><li>  <code>navigation</code> - un objet qui fournit la navigation. </li></ul><br><h2>  <font color="#3AC1EF">R√©sultats du travail</font> </h2><br>  Si vous voulez exp√©rimenter l'id√©e de d√©velopper des applications universelles pr√©sent√©es ici, j'ai cr√©√© deux mod√®les. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le premier</a> est un environnement propre et universel pour le d√©veloppement d'applications Web et d'applications natives. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le second</a> est, en substance, le premier mod√®le, qui a √©t√© √©tendu en raison de mon syst√®me d'organisation de la navigation dans l'application. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici</a> une application de d√©monstration papu bas√©e sur les consid√©rations ci-dessus.  Il est plein d'erreurs et d'impasses, mais vous pouvez l'assembler vous-m√™me, l'ex√©cuter dans un navigateur et sur un appareil mobile, et en pratique avoir une id√©e de la fa√ßon dont tout cela fonctionne. <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>  La communaut√© des d√©veloppeurs React a bien s√ªr besoin d'une biblioth√®que universelle pour organiser la navigation des applications, car cela simplifiera le d√©veloppement de projets comme celui dont nous avons parl√©.  Ce serait tr√®s bien si la biblioth√®que React Navigation fonctionnait sur le web (en fait, cette fonctionnalit√© est d√©j√† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">disponible</a> , mais travailler avec elle n'est pas sans difficult√©s). <br><br>  <b>Chers lecteurs!</b>  Profitez-vous de React pour cr√©er des applications universelles? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr428568/">https://habr.com/ru/post/fr428568/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr428558/index.html">Comment j'ai cr√©√© un assistant pour WordPress √† partir de ma profonde paresse</a></li>
<li><a href="../fr428560/index.html">Annonce impr√©vue de vendredi</a></li>
<li><a href="../fr428562/index.html">Droidcon Londres. Comment c'√©tait</a></li>
<li><a href="../fr428564/index.html">Recherche MapKit: Trucs et astuces</a></li>
<li><a href="../fr428566/index.html">Fonctions fl√®ches JavaScript: pourquoi elles sont n√©cessaires, comment les g√©rer, quand les utiliser et quand elles ne le sont pas</a></li>
<li><a href="../fr428570/index.html">Fonctions d'ordre sup√©rieur en JavaScript</a></li>
<li><a href="../fr428572/index.html">Composants d'ordre sup√©rieur dans React</a></li>
<li><a href="../fr428574/index.html">Faites passer la communication d'entreprise au niveau sup√©rieur avec Zextras Chat</a></li>
<li><a href="../fr428576/index.html">[signet] Version PDF du tutoriel Node.js et nouveau guide JavaScript</a></li>
<li><a href="../fr428578/index.html">Comment d√©marrer avec Hibernate Search</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>