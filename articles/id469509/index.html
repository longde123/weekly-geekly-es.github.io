<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚕️ 👧🏿 ♋️ Skema sudut, atau bagaimana saya menulis template untuk cli sudut 🤵🏼 👩🏾‍🏭 🥅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, nama saya Maxim. Selama beberapa tahun sekarang saya telah melakukan pengembangan front-end. Saya sering harus berurusan dengan tata letak berba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Skema sudut, atau bagaimana saya menulis template untuk cli sudut</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469509/"><p>  Halo, nama saya Maxim.  Selama beberapa tahun sekarang saya telah melakukan pengembangan front-end.  Saya sering harus berurusan dengan tata letak berbagai templat html.  Dalam pekerjaan sehari-hari saya, saya biasanya menggunakan pembangun webpack dengan mesin templat pug kustom, dan saya juga menggunakan metodologi BEM.  Untuk membuat hidup saya lebih mudah, saya menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">paket yang luar biasa</a> . </p><br><p>  Baru-baru ini, saya perlu membuat proyek kecil tentang Angular, dan karena saya terbiasa bekerja dengan alat favorit saya, saya tidak ingin kembali ke html kosong.  Dalam hubungan ini, muncul masalah bagaimana membuat teman bempug dengan sudut, dan tidak hanya berteman, tetapi juga menghasilkan komponen dari cli dengan struktur yang saya butuhkan. </p><br><p>  Siapa yang peduli bagaimana saya melakukan semuanya, selamat datang di kucing. </p><a name="habracut"></a><br><p>  Untuk memulai, buat proyek uji di mana kami akan menguji templat kami. </p><br><p>  Kami mengeksekusi di baris perintah: </p><br><p> <code>ng g test-project</code> . </p><br><p>  Dalam pengaturan, saya memilih preprocessor scss, karena lebih nyaman bagi saya untuk bekerja dengannya. </p><br><p>  Proyek ini dibuat, tetapi templat komponen default di html kami, sekarang perbaiki.  Pertama-tama, Anda perlu berteman sudut tajam dengan mesin tempel pug, untuk ini saya menggunakan paket ng-cli-pug-loader </p><br><p>  Instal paket, untuk ini, buka folder proyek dan jalankan: </p><br><p>  <code>ng add ng-cli-pug-loader</code> . </p><br><p>  Sekarang Anda dapat menggunakan file templat pug.  Selanjutnya, kami menulis ulang dekorator root komponen AppComponent ke: </p><br><pre> <code class="javascript hljs"> @Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'app-root'</span></span>, <span class="hljs-attr"><span class="hljs-attr">templateUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'./app.component.pug'</span></span>, <span class="hljs-attr"><span class="hljs-attr">styleUrls</span></span>: [<span class="hljs-string"><span class="hljs-string">'./app.component.scss'</span></span>] })</code> </pre> <br><p>  Karenanya, kami mengubah ekstensi file app.component.html menjadi app.component.pug, dan kontennya ditulis dalam sintaks templat.  Dalam file ini, saya menghapus semuanya kecuali router. </p><br><p>  Akhirnya, mari mulai membuat generator komponen kami! </p><br><p>  Untuk menghasilkan template, kita perlu membuat skema kita sendiri.  Saya menggunakan paket schematics-cli dari @ angular-devkit.  Instal paket secara global dengan perintah: </p><br><p>  <code>npm install -g @angular-devkit/schematics-cli</code> . </p><br><p>  Saya membuat skema dalam direktori terpisah di luar proyek dengan perintah: </p><br><p>  <code>schematics blank --name=bempug-component</code> . </p><br><p>  Kita masuk ke skema yang dibuat, kita sekarang tertarik pada file src / collection.json.  Ini terlihat seperti ini: </p><br><pre> <code class="json hljs"> <span class="hljs-string"><span class="hljs-string">"$schema"</span></span>: <span class="hljs-string"><span class="hljs-string">"../node_modules/@angular-devkit/schematics/collection-schema.json"</span></span>, <span class="hljs-string"><span class="hljs-string">"schematics"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"bempug-component"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"A blank schematic."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"factory"</span></span>: <span class="hljs-string"><span class="hljs-string">"./bempug-component/index#bempugComponent"</span></span> } } }</code> </pre> <br><p>  Ini adalah file deskripsi dari skema kami, di mana parameternya adalah "pabrik": "./bempug-component/index#bempugComponent": ini adalah deskripsi fungsi utama "pabrik" generator kami. </p><br><p>  Awalnya, tampilannya seperti ini: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Rule, SchematicContext, Tree } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular-devkit/schematics'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// You don't have to export the function as default. You can also have more than one rule factory // per file. export function bempugComponent(options: any): Rule { return (tree: Tree, _context: SchematicContext) =&gt; { return tree; }; }</span></span></code> </pre> <br><p>  Anda dapat membuat fungsi ekspor secara default, maka parameter "pabrik" dapat ditulis ulang sebagai "./bempug-component/index". </p><br><p>  Selanjutnya, di direktori skema kami, buat file schema.json, itu akan menjelaskan semua parameter skema kami. </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"$schema"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://json-schema.org/schema"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"SchemanticsForMenu"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Bempug Schema"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"properties"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"$default"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"$source"</span></span>: <span class="hljs-string"><span class="hljs-string">"argv"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"index"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"path"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"format"</span></span>: <span class="hljs-string"><span class="hljs-string">"path"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"The path to create the component."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"visible"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"project"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"The name of the project."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"$default"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"$source"</span></span>: <span class="hljs-string"><span class="hljs-string">"projectName"</span></span> } } } }</code> </pre> <br><p>  Parameter ada di properti, yaitu: </p><br><ul><li>  nama nama entitas (dalam kasus kami akan menjadi komponen); </li><li>  Path adalah path yang digunakan generator untuk membuat file komponen; </li><li>  Proyek adalah proyek itu sendiri, di mana komponen akan dihasilkan; </li></ul><br><p>  Tambahkan beberapa parameter lagi ke file yang akan dibutuhkan di masa mendatang. </p><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"module"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"The declaring module."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alias"</span></span>: <span class="hljs-string"><span class="hljs-string">"m"</span></span> }, <span class="hljs-string"><span class="hljs-string">"componentModule"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"boolean"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"default"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"Patern module per Component"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alias"</span></span>: <span class="hljs-string"><span class="hljs-string">"mc"</span></span> }, <span class="hljs-string"><span class="hljs-string">"export"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"boolean"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"default"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"Export component from module?"</span></span> }</code> </pre> <br><ul><li>  modul di sini akan disimpan tautan ke modul di mana komponen akan dimasukkan, atau lebih tepatnya modul komponen; </li><li>  componentModule ada flag apakah akan membuat untuk komponen modulnya sendiri (kemudian saya sampai pada kesimpulan bahwa itu akan selalu dibuat dan set ke true); </li><li>  ekspor: ini adalah tanda apakah akan mengekspor dari modul ke mana kita mengimpor modul komponen kita; </li></ul><br><p>  Selanjutnya, kami membuat antarmuka dengan parameter schema.d.ts file komponen kami. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface BemPugOptions { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: string; project?: string; path?: string; <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>?: string; componentModule?: boolean; <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>?: string; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span>?: boolean; bemPugMixinPath?: string; }</code> </pre> <br><p>  Di dalamnya, properti duplikat properti dari schema.json.  Selanjutnya, siapkan pabrik kami, buka file index.ts.  Di dalamnya, kami membuat dua fungsi filterTemplates, yang akan bertanggung jawab untuk membuat modul untuk komponen tergantung pada nilai componentModule, dan setupOptions, yang mengatur parameter yang diperlukan untuk pabrik. </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">filterTemplates</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options: BemPugOptions</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Rule</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!options.componentModule) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">path</span></span></span><span class="hljs-function"> =&gt;</span></span> !path.match(<span class="hljs-regexp"><span class="hljs-regexp">/\.module\.ts$/</span></span>) &amp;&amp; !path.match(<span class="hljs-regexp"><span class="hljs-regexp">/-item\.ts$/</span></span>) &amp;&amp; !path.match(<span class="hljs-regexp"><span class="hljs-regexp">/\.bak$/</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">path</span></span></span><span class="hljs-function"> =&gt;</span></span> !path.match(<span class="hljs-regexp"><span class="hljs-regexp">/\.bak$/</span></span>)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupOptions</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options: BemPugOptions, host: Tree</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> workspace = getWorkspace(host); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!options.project) { options.project = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.keys(workspace.projects)[<span class="hljs-number"><span class="hljs-number">0</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> project = workspace.projects[options.project]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (options.path === <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> projectDirName = project.projectType === <span class="hljs-string"><span class="hljs-string">'application'</span></span> ? <span class="hljs-string"><span class="hljs-string">'app'</span></span> : <span class="hljs-string"><span class="hljs-string">'lib'</span></span>; options.path = <span class="hljs-string"><span class="hljs-string">`/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${project.root}</span></span></span><span class="hljs-string">/src/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${projectDirName}</span></span></span><span class="hljs-string">`</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> parsedPath = parseName(options.path, options.name); options.name = parsedPath.name; options.path = parsedPath.path; }</code> </pre><br><p>  Selanjutnya, kita menulis di fungsi utama: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bempugComponent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options: BemPugOptions</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Rule</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">host: Tree, context: SchematicContext</span></span></span><span class="hljs-function">) =&gt;</span></span> { setupOptions(options, host); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> templateSource = apply(url(<span class="hljs-string"><span class="hljs-string">'./files'</span></span>), [ filterTemplates(options), template({ ...strings, ...options }), move(options.path || <span class="hljs-string"><span class="hljs-string">''</span></span>) ]); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rule = chain([ branchAndMerge(chain([ mergeWith(templateSource), ])) ]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rule(host, context); } }</code> </pre><br><p>  Pabrik siap dan sudah dapat menghasilkan file komponen dengan memproses template dari folder file, yang belum tersedia.  Tidak masalah, kami membuat folder file komponen bempug dalam folder skema kami dalam kasus saya.  Dalam folder file, buat folder <code>__name@dasherize__</code> , selama pembuatan, pabrik akan mengganti <code>__name@dasherize__</code> dengan nama komponen. </p><br><p>  Selanjutnya, di dalam <code>__name@dasherize__</code> buat file </p><br><ul><li>  <code>__name@dasherize__</code> templat komponen pesek </li><li>  <code>__name@dasherize__</code> file uji unit untuk komponen </li><li>  <code>__name@dasherize__</code> file dari komponen itu sendiri </li><li>  <code>__name@dasherize__</code> -component.module.ts modul komponen </li><li>  <code>__name@dasherize__</code> -component.scss stylesheet komponen </li></ul><br><p>  Sekarang kita akan menambahkan dukungan untuk memperbarui modul ke pabrik kami, untuk ini kami akan membuat file add-to-module-context.ts untuk menyimpan parameter yang diperlukan pabrik untuk bekerja dengan modul. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ts <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'typescript'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddToModuleContext</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// source of the module file source: ts.SourceFile; // the relative path that points from // the module file to the component file relativePath: string; // name of the component class classifiedName: string; }</span></span></code> </pre> <br><p>  Tambahkan dukungan modul ke pabrik. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> stringUtils = { dasherize, classify }; <span class="hljs-comment"><span class="hljs-comment">// You don't have to export the function as default. You can also have more than one rule factory // per file. function filterTemplates(options: BemPugOptions): Rule { if (!options.componentModule) { return filter(path =&gt; !path.match(/\.module\.ts$/) &amp;&amp; !path.match(/-item\.ts$/) &amp;&amp; !path.match(/\.bak$/)); } return filter(path =&gt; !path.match(/\.bak$/)); } function setupOptions(options: BemPugOptions, host: Tree): void { const workspace = getWorkspace(host); if (!options.project) { options.project = Object.keys(workspace.projects)[0]; } const project = workspace.projects[options.project]; if (options.path === undefined) { const projectDirName = project.projectType === 'application' ? 'app' : 'lib'; options.path = `/${project.root}/src/${projectDirName}`; } const parsedPath = parseName(options.path, options.name); options.name = parsedPath.name; options.path = parsedPath.path; options.module = options.module || findModuleFromOptions(host, options) || ''; } export function createAddToModuleContext(host: Tree, options: ModuleOptions, componentPath: string): AddToModuleContext { const result = new AddToModuleContext(); if (!options.module) { throw new SchematicsException(`Module not found.`); } // Reading the module file const text = host.read(options.module); if (text === null) { throw new SchematicsException(`File ${options.module} does not exist.`); } const sourceText = text.toString('utf-8'); result.source = ts.createSourceFile(options.module, sourceText, ts.ScriptTarget.Latest, true); result.relativePath = buildRelativePath(options.module, componentPath); result.classifiedName = stringUtils.classify(`${options.name}ComponentModule`); return result; } function addDeclaration(host: Tree, options: ModuleOptions, componentPath: string) { const context = createAddToModuleContext(host, options, componentPath); const modulePath = options.module || ''; const declarationChanges = addImportToModule( context.source, modulePath, context.classifiedName, context.relativePath); const declarationRecorder = host.beginUpdate(modulePath); for (const change of declarationChanges) { if (change instanceof InsertChange) { declarationRecorder.insertLeft(change.pos, change.toAdd); } } host.commitUpdate(declarationRecorder); }; function addExport(host: Tree, options: ModuleOptions, componentPath: string) { const context = createAddToModuleContext(host, options, componentPath); const modulePath = options.module || ''; const exportChanges = addExportToModule( context.source, modulePath, context.classifiedName, context.relativePath); const exportRecorder = host.beginUpdate(modulePath); for (const change of exportChanges) { if (change instanceof InsertChange) { exportRecorder.insertLeft(change.pos, change.toAdd); } } host.commitUpdate(exportRecorder); }; export function addDeclarationToNgModule(options: ModuleOptions, exports: boolean, componentPath: string): Rule { return (host: Tree) =&gt; { addDeclaration(host, options, componentPath); if (exports) { addExport(host, options, componentPath); } return host; }; } export function bempugComponent(options: BemPugOptions): Rule { return (host: Tree, context: SchematicContext) =&gt; { setupOptions(options, host); deleteCommon(host); const templateSource = apply(url('./files'), [ filterTemplates(options), template({ ...strings, ...options }), move(options.path || '') ]); const rule = chain([ branchAndMerge(chain([ mergeWith(templateSource), addDeclarationToNgModule(options, !!options.export, `${options.path}/${options.name}/${options.name}-component.module` || '') ])) ]); return rule(host, context); } }</span></span></code> </pre><br><p>  Sekarang, ketika menambahkan parameter -m &lt;module reference&gt; ke perintah cli, modul komponen kami akan menambahkan import ke modul yang ditentukan dan menambahkan ekspor darinya ketika menambahkan flag –export.  Selanjutnya kita tambahkan dukungan BEM.  Untuk melakukan ini, saya mengambil sumber paket bempug npm dan membuat kode dalam satu file bempugMixin.pug, yang saya tempatkan di folder umum dan di dalam folder umum lainnya sehingga mixin disalin ke folder umum di proyek pada sudut. </p><br><p>  Tugas kami adalah bahwa mixin ini terhubung di masing-masing file template kami, dan tidak digandakan ketika membuat komponen baru, untuk ini kami akan menambahkan fungsionalitas ini ke pabrik kami. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Rule, SchematicContext, Tree, filter, apply, template, move, chain, branchAndMerge, mergeWith, url, SchematicsException } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular-devkit/schematics'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {BemPugOptions} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./schema"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {getWorkspace} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@schematics/angular/utility/config"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {parseName} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@schematics/angular/utility/parse-name"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {normalize, strings} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@angular-devkit/core"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { AddToModuleContext } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./add-to-module-context'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ts <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'typescript'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {classify, dasherize} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@angular-devkit/core/src/utils/strings"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {buildRelativePath, findModuleFromOptions, ModuleOptions} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@schematics/angular/utility/find-module"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {addExportToModule, addImportToModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@schematics/angular/utility/ast-utils"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {InsertChange} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@schematics/angular/utility/change"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> stringUtils = { dasherize, classify }; <span class="hljs-comment"><span class="hljs-comment">// You don't have to export the function as default. You can also have more than one rule factory // per file. function filterTemplates(options: BemPugOptions): Rule { if (!options.componentModule) { return filter(path =&gt; !path.match(/\.module\.ts$/) &amp;&amp; !path.match(/-item\.ts$/) &amp;&amp; !path.match(/\.bak$/)); } return filter(path =&gt; !path.match(/\.bak$/)); } function setupOptions(options: BemPugOptions, host: Tree): void { const workspace = getWorkspace(host); if (!options.project) { options.project = Object.keys(workspace.projects)[0]; } const project = workspace.projects[options.project]; if (options.path === undefined) { const projectDirName = project.projectType === 'application' ? 'app' : 'lib'; options.path = `/${project.root}/src/${projectDirName}`; } const parsedPath = parseName(options.path, options.name); options.name = parsedPath.name; options.path = parsedPath.path; options.module = options.module || findModuleFromOptions(host, options) || ''; options.bemPugMixinPath = buildRelativePath(`${options.path}/${options.name}/${options.name}.component.ts`, `/src/app/common/bempugMixin.pug`); } export function createAddToModuleContext(host: Tree, options: ModuleOptions, componentPath: string): AddToModuleContext { const result = new AddToModuleContext(); if (!options.module) { throw new SchematicsException(`Module not found.`); } // Reading the module file const text = host.read(options.module); if (text === null) { throw new SchematicsException(`File ${options.module} does not exist.`); } const sourceText = text.toString('utf-8'); result.source = ts.createSourceFile(options.module, sourceText, ts.ScriptTarget.Latest, true); result.relativePath = buildRelativePath(options.module, componentPath); result.classifiedName = stringUtils.classify(`${options.name}ComponentModule`); return result; } function addDeclaration(host: Tree, options: ModuleOptions, componentPath: string) { const context = createAddToModuleContext(host, options, componentPath); const modulePath = options.module || ''; const declarationChanges = addImportToModule( context.source, modulePath, context.classifiedName, context.relativePath); const declarationRecorder = host.beginUpdate(modulePath); for (const change of declarationChanges) { if (change instanceof InsertChange) { declarationRecorder.insertLeft(change.pos, change.toAdd); } } host.commitUpdate(declarationRecorder); }; function addExport(host: Tree, options: ModuleOptions, componentPath: string) { const context = createAddToModuleContext(host, options, componentPath); const modulePath = options.module || ''; const exportChanges = addExportToModule( context.source, modulePath, context.classifiedName, context.relativePath); const exportRecorder = host.beginUpdate(modulePath); for (const change of exportChanges) { if (change instanceof InsertChange) { exportRecorder.insertLeft(change.pos, change.toAdd); } } host.commitUpdate(exportRecorder); }; export function addDeclarationToNgModule(options: ModuleOptions, exports: boolean, componentPath: string): Rule { return (host: Tree) =&gt; { addDeclaration(host, options, componentPath); if (exports) { addExport(host, options, componentPath); } return host; }; } function deleteCommon(host: Tree) { const path = `/src/app/common/bempugMixin.pug`; if(host.exists(path)) { host.delete(`/src/app/common/bempugMixin.pug`); } } export function bempugComponent(options: BemPugOptions): Rule { return (host: Tree, context: SchematicContext) =&gt; { setupOptions(options, host); deleteCommon(host); const templateSource = apply(url('./files'), [ filterTemplates(options), template({ ...strings, ...options }), move(options.path || '') ]); const mixinSource = apply(url('./common'), [ template({ ...strings, ...options }), move('/src/app/' || '') ]); const rule = chain([ branchAndMerge(chain([ mergeWith(templateSource), mergeWith(mixinSource), addDeclarationToNgModule(options, !!options.export, `${options.path}/${options.name}/${options.name}-component.module` || '') ]), 14) ]); return rule(host, context); } }</span></span></code> </pre><br><p>  Saatnya mulai mengisi file templat kami. </p><br><p>  <code>__name@dasherize__.component.pug</code> : </p><br><pre> <code class="javascript hljs">include &lt;%= bemPugMixinPath %&gt; +b(<span class="hljs-string"><span class="hljs-string">'&lt;%= name %&gt;'</span></span>) +e(<span class="hljs-string"><span class="hljs-string">'item'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">m</span></span>:<span class="hljs-string"><span class="hljs-string">'test'</span></span>}) | <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag"> %&gt;</span></span></span><span class="xml"> works</span></span></code> </pre> <br><p>  Apa yang ditentukan dalam &lt;% =%&gt; selama pembuatan akan diganti dengan nama komponen. </p><br><p> <code>__name@dasherize__.component.spec.ts:</code> </p> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">async</span></span>, ComponentFixture, TestBed } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core/testing'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {NO_ERRORS_SCHEMA} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { &lt;%= classify(name) %&gt;ComponentModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./&lt;%= name %&gt;-component.module'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { &lt;%= classify(name) %&gt;Component } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./&lt;%= name %&gt;.component'</span></span>; describe(<span class="hljs-string"><span class="hljs-string">'&lt;%= classify(name) %&gt;Component'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> component: <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">classify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">) %&gt;</span></span></span><span class="xml">Component; let fixture: ComponentFixture</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;&lt;%= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">classify(name)</span></span></span></span><span class="xml"><span class="hljs-tag"> %&gt;</span></span></span><span class="xml">Component&gt;; beforeEach(async(() =&gt; { TestBed.configureTestingModule({ imports: [</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">classify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">) %&gt;</span></span></span><span class="xml">ComponentModule], declarations: [], schemas: [ NO_ERRORS_SCHEMA ] }) .compileComponents(); })); beforeEach(() =&gt; { fixture = TestBed.createComponent(</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">classify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">) %&gt;</span></span></span><span class="xml">Component); component = fixture.componentInstance; fixture.detectChanges(); }); it('should create', () =&gt; { expect(component).toBeTruthy(); }); });</span></span></code> </pre> <br><p>  Dalam hal ini, &lt;% = mengklasifikasikan (nama)%&gt; digunakan untuk melemparkan nama ke CamelCase. </p><br><p> <code>__name@dasherize__.component.ts:</code> </p> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Component, OnInit, ViewEncapsulation} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; @Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'app-&lt;%=dasherize(name)%&gt;-component'</span></span>, <span class="hljs-attr"><span class="hljs-attr">templateUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'&lt;%=dasherize(name)%&gt;.component.pug'</span></span>, <span class="hljs-attr"><span class="hljs-attr">styleUrls</span></span>: [<span class="hljs-string"><span class="hljs-string">'./&lt;%=dasherize(name)%&gt;-component.scss'</span></span>], <span class="hljs-attr"><span class="hljs-attr">encapsulation</span></span>: ViewEncapsulation.None }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> &lt;%</span></span>= classify(name) %&gt;Component implements OnInit { <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() {} ngOnInit(): <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { } }</code> </pre><br><p> <code>__name@dasherize__-component.module.ts:</code> </p> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { NgModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { CommonModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/common'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {&lt;%= classify(name) %&gt;Component} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./&lt;%= name %&gt;.component'</span></span>; @NgModule({ <span class="hljs-attr"><span class="hljs-attr">declarations</span></span>: [ <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">classify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">) %&gt;</span></span></span><span class="xml">Component, ], imports: [ CommonModule ], exports: [ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">classify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">) %&gt;</span></span></span><span class="xml">Component, ] }) export class </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">classify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">) %&gt;</span></span></span><span class="xml">ComponentModule { }</span></span></code> </pre> <br><p> <code>__name@dasherize__-component.scss:</code> </p> <br><pre> <code class="css hljs">.&lt;%= <span class="hljs-selector-tag"><span class="hljs-selector-tag">name</span></span> %&gt;{ }</code> </pre> <br><p>  Kami membuat build skema kami dengan perintah `` npm run build``. </p><br><p>  Semuanya siap untuk menghasilkan komponen dalam proyek! </p><br><p>  Untuk memeriksanya, kembali ke proyek Angular kami dan buat modul. <br> <code>ng gm test-schema</code> <br>  Selanjutnya, kita melakukan `` tautan npm &lt;path absolut ke folder proyek dengan skema kami&gt; '', untuk menambahkan skema kami ke node_modules proyek. </p><br><p>  Dan kami mencoba rangkaian dengan perintah <code>ng g bempug-component:bempug-component test -m /src/app/test-schema/test-schema.module.ts –export</code> . <br>  Skema kami akan membuat komponen dan menambahkannya ke modul yang ditentukan dengan ekspor. <br>  Skema siap, Anda dapat mulai membuat aplikasi pada teknologi yang sudah dikenal. </p><br><p>  Anda dapat melihat versi finalnya di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> , dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">paketnya juga tersedia dalam npm</a> . </p><br><p>  Saat membuat skema saya menggunakan artikel tentang topik ini, saya mengucapkan terima kasih kepada penulis. </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://blog.angular.io/schematics-an-introduction-dc1dfbc2a2b2</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://medium.com/@tomastrajan/total-guide-to-custom-angular-schematics-5c50cf90cdb4</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://developer.okta.com/blog/2019/02/13/angular-schematics</a> ; </li></ul><br><p>  Terima kasih atas perhatian Anda, semua orang yang membaca sampai akhir, Anda adalah yang terbaik! <br>  Dan proyek menarik lainnya menanti saya.  Sampai ketemu lagi! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id469509/">https://habr.com/ru/post/id469509/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id469497/index.html">Buat level 2D isometrik dengan sistem Tilemap</a></li>
<li><a href="../id469499/index.html">Bagaimana Kami di Parallels Ditaklukkan Masuk dengan Apple</a></li>
<li><a href="../id469503/index.html">Keamanan Siber: kami melindungi data pelanggan dari kebocoran pada 2019</a></li>
<li><a href="../id469505/index.html">3 cara praktis untuk membawa bisnis ke pasar luar negeri: pendekatan dan teknik perusahaan nyata</a></li>
<li><a href="../id469507/index.html">Uap Ketiga kerentanan Klien Windows, tetapi tidak 0 hari</a></li>
<li><a href="../id469515/index.html">Mempersiapkan aplikasi untuk Istio</a></li>
<li><a href="../id469521/index.html">Saya membeli sepeda motor untuk naik, bukan untuk jatuh</a></li>
<li><a href="../id469523/index.html">Ketergantungan kinerja kode pada konteks deklarasi variabel dalam JavaScript</a></li>
<li><a href="../id469525/index.html">Sistem kontrol otomatis untuk excavator pertambangan</a></li>
<li><a href="../id469527/index.html">Apakah interkom itu mata-mata?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>