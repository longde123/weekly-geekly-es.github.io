<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘ˆğŸ» â™€ï¸ ğŸ§“ğŸ¾ å¦‚ä½•åœ¨Google Analyticsï¼ˆåˆ†æï¼‰ä¸­ä»Yandex.Metricaå¤åˆ¶ç›®æ ‡ ğŸ¤“ ğŸ‡ ğŸš˜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¦‚æœæ‚¨é€šè¿‡Googleè·Ÿè¸ªä»£ç ç®¡ç†å™¨ï¼ˆGTMï¼‰åœ¨Yandex.Metricaä¸­è®¾ç½®äº†å¤§é‡ç›®æ ‡ï¼Œå¹¶ä¸”è¿«åˆ‡éœ€è¦å°†è¿™äº›ç›®æ ‡ä½œä¸ºäº‹ä»¶è½¬ç§»åˆ°Google Analyticsï¼ˆåˆ†æï¼‰ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ å½“ç„¶ï¼Œæ‚¨å¯ä»¥é‡æ–°é…ç½®æ¯ä¸ªä»£ç ä»¥å°†äº‹ä»¶å¹¶è¡Œå‘é€åˆ°GAå’ŒMetricï¼Œä½†æ˜¯å¦‚æœMetricä¸­æœ‰å¾ˆå¤šç›®æ ‡ï¼Œè¿™å°†éœ€è¦ä¸€äº›æ—¶é—´...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å¦‚ä½•åœ¨Google Analyticsï¼ˆåˆ†æï¼‰ä¸­ä»Yandex.Metricaå¤åˆ¶ç›®æ ‡</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458328/">å¦‚æœæ‚¨é€šè¿‡Googleè·Ÿè¸ªä»£ç ç®¡ç†å™¨ï¼ˆGTMï¼‰åœ¨Yandex.Metricaä¸­è®¾ç½®äº†å¤§é‡ç›®æ ‡ï¼Œå¹¶ä¸”è¿«åˆ‡éœ€è¦å°†è¿™äº›ç›®æ ‡ä½œä¸ºäº‹ä»¶è½¬ç§»åˆ°Google Analyticsï¼ˆåˆ†æï¼‰ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ å½“ç„¶ï¼Œæ‚¨å¯ä»¥é‡æ–°é…ç½®æ¯ä¸ªä»£ç ä»¥å°†äº‹ä»¶å¹¶è¡Œå‘é€åˆ°GAå’ŒMetricï¼Œä½†æ˜¯å¦‚æœMetricä¸­æœ‰å¾ˆå¤šç›®æ ‡ï¼Œè¿™å°†éœ€è¦ä¸€äº›æ—¶é—´ã€‚ <br><br> å¦‚æœç›®æ ‡ä¸æ˜¯ç”±æ‚¨è€Œæ˜¯ç”±ç«™ç‚¹ä»£ç æœ¬èº«ä¸­çš„å¼€å‘äººå‘˜è®¾ç½®çš„ï¼Œåˆ™å¯èƒ½å‡ºç°ç›¸åçš„æƒ…å†µã€‚ è€Œä¸”ï¼Œä½œä¸ºå…¬å¸çš„åˆ†æå¸ˆï¼Œæ‚¨éœ€è¦é…ç½®å°†ç›¸åŒçš„äº‹ä»¶å‘é€åˆ°GAï¼Œè€Œä¸”æ‰‹è¾¹åªæœ‰GTMã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå³ä½¿ç›®æ ‡æ•°é‡å¾ˆå°‘ï¼Œä¹Ÿä¼šå‡ºç°å›°éš¾ã€‚  GTMä¸­çš„äº‹ä»¶è§¦å‘å™¨å°†éœ€è¦å°½å¯èƒ½åœ°è‡ªå®šä¹‰ï¼Œä»¥ä½¿Metricä¸­çš„ç›®æ ‡å’ŒGAä¸­çš„äº‹ä»¶éµå¾ªç›¸åŒçš„é€»è¾‘ï¼Œå¹¶ä¸”åœ¨ä¸åŒçš„åˆ†æç³»ç»Ÿä¸­ä¸ä¼šå­˜åœ¨é‡å¤§å·®å¼‚ã€‚ <br><br> åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œéƒ½éœ€è¦èŠ±è´¹ä¸€ä¸ªå¤šå°æ—¶æ¥æ‰‹åŠ¨è°ƒæ•´æ‰€æœ‰å†…å®¹ã€‚ ä½†æ˜¯æ‚¨å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªæ›´å®ç”¨çš„é€‰æ‹©ã€‚ æœ‰ä¸€ä¸ªåŠŸèƒ½å¯è®©æ‚¨æ‹¦æˆªå°†ç›®æ ‡å‘é€åˆ°Metricï¼ŒåŒæ—¶å°†æ¨é€å‘é€åˆ°dataLayerã€‚ å› æ­¤ï¼Œæ‚¨æ— éœ€å›é¡¾æˆ–äº†è§£å¦‚ä½•å°†ç›®æ ‡å‘é€åˆ°Yandex.Metricaï¼Œè€Œæ˜¯ä»…ä½¿ç”¨æ‰€éœ€çš„åŠŸèƒ½ã€‚ è¯¥åŠŸèƒ½çš„å·¥ä½œç‰ˆæœ¬å°†å–å†³äºæ‚¨å®‰è£…çš„Yandex.Metricaè®¡æ•°å™¨çš„ç‰ˆæœ¬ã€‚ <br><a name="habracut"></a><br><h3> å¦‚ä½•åŒºåˆ†æ–°çš„å…¬åˆ¶è®¡æ•°å™¨å’Œæ—§çš„ </h3><br> è¦ç¡®å®šæŸä¸ªåŠŸèƒ½çš„å·¥ä½œç‰ˆæœ¬ï¼Œæ‚¨éœ€è¦äº†è§£æ‚¨çš„ç«™ç‚¹ä¸Šå®‰è£…äº†å“ªä¸ªç‰ˆæœ¬çš„è®¡æ•°å™¨ã€‚ <br><br> å¦‚æœæ‚¨çš„è®¡æ•°å™¨æ˜¯åœ¨2018å¹´12æœˆ10æ—¥å®‰è£…çš„è¾ƒæ—©çš„ç‰ˆæœ¬ï¼Œä½†ä»¥åæ²¡æœ‰æ›´æ–°ï¼Œåˆ™æ‚¨çš„ç‰ˆæœ¬ä¸ºæ—§ç‰ˆæœ¬ <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="javascript"><span class="javascript"> (</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">d, w, c</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ (w[c] = w[c] || []).push(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">try</span></span></span><span class="javascript"> { w.yaCounterXXXXXXXX = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> Ya.Metrika({ </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">id</span></span></span><span class="javascript">: XXXXXXXX, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">clickmap</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">trackLinks</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">accurateTrackBounce</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">webvisor</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript"> }); } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">catch</span></span></span><span class="javascript"> (e) {} }); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> n = d.getElementsByTagName(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"script"</span></span></span><span class="javascript">)[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">], s = d.createElement(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"script"</span></span></span><span class="javascript">), f = </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ n.parentNode.insertBefore(s, n); }; s.type = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"text/javascript"</span></span></span><span class="javascript">; s.async = </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">; s.src = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"https://mc.yandex.ru/metrika/watch.js"</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (w.opera == </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"[object Opera]"</span></span></span><span class="javascript">) { d.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"DOMContentLoaded"</span></span></span><span class="javascript">, f, </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript">); } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">else</span></span></span><span class="javascript"> { f(); })(</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">, </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"yandex_metrika_callbacks"</span></span></span><span class="javascript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> å…¶ä¸­ï¼š <br><br>  <b>XXXXXXXX</b>æ˜¯æ‚¨çš„æŸœå°å·ç ã€‚ <br><blockquote> ä»£ç ä¸­çš„w.yaCounterXXXXXXXXæ¸…æ¥šè¡¨æ˜è¿™æ˜¯è®¡æ•°å™¨çš„æ—§ç‰ˆæœ¬ã€‚ <br></blockquote> åœ¨æ—§è®¡æ•°å™¨ä¸­å‘é€ç›®æ ‡çš„ç¤ºä¾‹ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> yaCounterXXXXXXXX.reachGoal(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'TARGET_NAME'</span></span></span><span class="actionscript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> å…¶ä¸­ï¼š <br><br>  <b>XXXXXXXX-</b>æ‚¨çš„æŸœå°å·ç ï¼› <br>  <b>TARGET_NAME</b>æ˜¯ç›®æ ‡çš„æ ‡è¯†ç¬¦ã€‚ <br><br> è®¡æ•°å™¨çš„æ–°ç‰ˆæœ¬äº2018å¹´12æœˆ10æ—¥å‡ºç°ã€‚ <br><br> çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="javascript"><span class="javascript"> (</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">m, e, t, r, i, k, a</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ m[i] = m[i] || </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ (m[i].a = m[i].a || []).push(</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">arguments</span></span></span><span class="javascript">) }; m[i].l = </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript"> * </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">Date</span></span></span><span class="javascript">(); k = e.createElement(t), a = e.getElementsByTagName(t)[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">], k.async = </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">, k.src = r, a.parentNode.insertBefore(k, a) })(</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">, </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"script"</span></span></span><span class="javascript">, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"https://mc.yandex.ru/metrika/tag.js"</span></span></span><span class="javascript">, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"ym"</span></span></span><span class="javascript">); ym(XXXXXXXX, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"init"</span></span></span><span class="javascript">, { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">clickmap</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">trackLinks</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">accurateTrackBounce</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">webvisor</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript"> }); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> å…¶ä¸­ï¼š <br><br>  <b>XXXXXXXX</b>æ˜¯æ‚¨çš„æŸœå°å·ç ã€‚ <br><blockquote>  ymï¼ˆä»£ç ä¸­çš„XXXXXXXXæ¸…æ¥šåœ°è¡¨æ˜è¿™æ˜¯è®¡æ•°å™¨çš„æ–°ç‰ˆæœ¬ã€‚ </blockquote> åœ¨æ–°è®¡æ•°å™¨ä¸­å‘é€ç›®æ ‡çš„ç¤ºä¾‹ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> ym(XXXXXX, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'reachGoal'</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'TARGET_NAME'</span></span></span><span class="actionscript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> å…¶ä¸­ï¼š <br><br>  <b>XXXXXXXX-</b>æ‚¨çš„æŸœå°å·ç ï¼› <br>  <b>TARGET_NAME</b>æ˜¯ç›®æ ‡çš„æ ‡è¯†ç¬¦ã€‚ <br><br><h3> æ—§ç‰ˆæœ¬çš„Yandex.Metricaçš„åŠŸèƒ½ </h3><br> å¦‚æœæ‚¨å®‰è£…äº†æ—§ç‰ˆæœ¬çš„Yandex.Metricaè®¡æ•°å™¨ï¼ˆè¯·å‚è§ä¸Šæ–‡ï¼‰ï¼Œé‚£ä¹ˆæ‹¦æˆªå‘é€ç›®æ ‡çš„åŠŸèƒ½å°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">mainTagFunction</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">reachGoal</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ yaCounterXXXXXXXX.reachGoal = </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> param = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">arguments</span></span></span><span class="javascript">[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">]; reachGoal.apply(</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">, </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">arguments</span></span></span><span class="javascript">); </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//     dataLayer.push({ 'event': 'metrika', 'event_param': param }); }; } var yCounter = 0; function ySearch() { if (window.yaCounterXXXXXXXX) mainTagFunction(yaCounterXXXXXXXX.reachGoal); else { if (yCounter &lt; 100) { setTimeout(ySearch, 100); yCounter++; } else console.log(' .  '); } } ySearch(); </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> å…¶ä¸­ï¼š <br><br>  <b>XXXXXXXX-</b>æ‚¨çš„æŸœå°å·ç ï¼› <br><br> æ¯æ¬¡ä½¿ç”¨reachGoalæ–¹æ³•è°ƒç”¨yaCounterXXXXXXXXXå‡½æ•°æ—¶ï¼Œéƒ½ä¼šè§¦å‘è¯¥ä»£ç ã€‚ è¯¥å‡½æ•°åœ¨dataLayerä¸­è¿›è¡Œæ¨é€ï¼Œå½“æ¨é€æ—¶ï¼Œäº‹ä»¶åç§°ï¼ˆmetrikaï¼‰å’Œå‚æ•°è¢«ä¼ è¾“ï¼Œç›®æ ‡çš„æ ‡è¯†ç¬¦åœ¨å‚æ•°ä¸­ä¼ é€’ã€‚ <br><br><h3> æ–°ç‰ˆæœ¬çš„Yandex.Metricaçš„åŠŸèƒ½ </h3><br> å¦‚æœæ‚¨å®‰è£…äº†æ–°ç‰ˆæœ¬çš„Yandex.Metricaè®¡æ•°å™¨ï¼Œåˆ™æ‹¦æˆªå‘é€ç›®æ ‡çš„åŠŸèƒ½å¦‚ä¸‹ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-function"><span class="hljs-title">func</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span></span><span class="actionscript">{ </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">//   var yCounter = 0; //   . function ySearch(){ if (window.ym){ window.zm = window.ym; mainTagFunction(); }else if (yCounter &lt; 100){ setTimeout(ySearch, 100); yCounter++; }else console.log(' .  '); } //  function mainTagFunction(){ window.ym = function(){ window.zm.a.push(arguments); if (arguments[1] === 'reachGoal') dataLayer.push({ 'event': 'metrika', 'event_param': arguments[2] }); }; } //  ySearch(); }; setTimeout(func, 1000); </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br> æ¯æ¬¡è°ƒç”¨ymï¼ˆï¼‰å‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°éƒ½èµ·ä½œç”¨ï¼Œå¦‚æœè°ƒç”¨äº†<b>goinggoal</b>æ–¹æ³•ï¼Œåˆ™å®ƒå°†æ¨é€å‘é€åˆ°dataLayerã€‚ äº‹ä»¶çš„åç§°ï¼ˆmetrikaï¼‰å’Œå‚æ•°ä¼ é€’åˆ°dataLayerï¼Œç›®æ ‡çš„æ ‡è¯†ç¬¦ä¼ é€’åˆ°å‚æ•°event_paramã€‚ <br><br><h3> é…ç½®é€šè¿‡GTMå‘GAå‘é€äº‹ä»¶ </h3><br> ä¸ºäº†é…ç½®GTMä»¥GAä¸­çš„æŒ‡æ ‡ä¸ºç›®æ ‡å‘é€äº‹ä»¶ï¼Œæ‚¨å¿…é¡»ï¼š <br><br>  1.åˆ›å»ºä¸€ä¸ªâ€œ <b>æŸ¥çœ‹é¡µé¢-DOMæ¨¡å‹å°±ç»ª</b> â€è§¦å‘å™¨ï¼Œæ‚¨è¿˜å¯ä»¥æŒ‡å®šè¦åœ¨GAä¸­ä»Metricå¤åˆ¶ç›®æ ‡çš„é¡µé¢ <br><br><img src="https://habrastorage.org/webt/e3/kg/-j/e3kg-jcklhzz5wpnltwhxjxqzdg.png"><br><br>  2.åˆ›å»ºä¸€ä¸ªâ€œ <b>è‡ªå®šä¹‰HTML</b> â€æ ‡ç­¾ï¼Œç„¶åå°†æ‰€éœ€çš„åŠŸèƒ½ä»£ç æ’å…¥å…¶ä¸­ã€‚ å…ˆå‰åˆ›å»ºçš„è§¦å‘å™¨å®‰è£…åœ¨æ­¤æ ‡ç­¾ä¸Šã€‚ <br><br><img src="https://habrastorage.org/webt/hw/e4/rq/hwe4rqvxcd6jhqhl7kdx4vx3ppw.png"><br><br>  3.ä½¿ç”¨äº‹ä»¶åç§°metrikaåˆ›å»ºä¸€ä¸ªâ€œ <b>è‡ªå®šä¹‰äº‹ä»¶</b> â€è§¦å‘å™¨ã€‚ <br><br><img src="https://habrastorage.org/webt/nt/-_/mm/nt-_mmswakvog6y4dhrwgjz13ag.png"><br><br>  4.åˆ›å»ºä¸€ä¸ªåä¸ºâ€œ <b>æ•°æ®çº§åˆ«å˜é‡</b> â€çš„<b>å˜é‡</b> ï¼Œå…¶åç§°å¦‚ç¤ºä¾‹æ‰€ç¤ºï¼š <br><br><img src="https://habrastorage.org/webt/pi/y2/ft/piy2ftold0soogxxppce_tuwxgg.png"><br><br>  5.ä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„è§¦å‘å™¨å’Œå˜é‡åˆ›å»ºæ ‡ç­¾â€œ <b>Google Analytics-Universal Analytics</b> â€ã€‚ <br><br><img src="https://habrastorage.org/webt/33/o7/fa/33o7fayg2zrj4eb8es6m69qbs1m.png"><br><br> å…¶ä¸­ï¼š <br><br>  <b>UA-XXXXXXXX-XX-</b>æ‚¨çš„Google Analyticsï¼ˆåˆ†æï¼‰æŸœå°å·ç  <br><br>  6.å‘å¸ƒGTMå®¹å™¨ã€‚ <br><br><img src="https://habrastorage.org/webt/my/xa/kg/myxakg2xydyr0tleuancksvnoqm.png"><br><br> é€šè¿‡è¿™äº›è®¾ç½®ï¼ŒGoogle Analyticsï¼ˆåˆ†æï¼‰å°†æ¥æ”¶äº‹ä»¶ç±»åˆ«ä¸ºMetrikaçš„äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶çš„æ“ä½œå°†æ˜¯Yandex.Metricaçš„ç›®æ ‡æ ‡è¯†ç¬¦ã€‚ <br><br><img src="https://habrastorage.org/webt/pf/ne/ee/pfneeebnbknnxjuascxwchfvtbc.png"><br><br><h3> éªŒè¯è®¾ç½® </h3><br> è¦æ£€æŸ¥å°†äº‹ä»¶å‘é€åˆ°GAçš„è®¾ç½®çš„æ­£ç¡®æ€§ï¼Œæ‚¨å¿…é¡»åœ¨æµè§ˆå™¨çš„æ§åˆ¶å°ä¸­è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š <br><br>  aï¼‰å¯¹äºæ–°çš„å…¬åˆ¶è®¡æ•°å™¨ <br><br><pre> <code class="javascript hljs">ym(XXXXXX, <span class="hljs-string"><span class="hljs-string">'reachGoal'</span></span>, <span class="hljs-string"><span class="hljs-string">'TARGET_NAME'</span></span>)</code> </pre> <br> å…¶ä¸­ï¼š <br><br>  <b>XXXXXXXX-</b>æ‚¨åœ¨Yandex.Metricaä¸­çš„è®¡æ•°å™¨ç¼–å·ã€‚ <br><br>  bï¼‰å¯¹äºæ—§çš„å…¬åˆ¶è®¡æ•°å™¨ <br><br><pre> <code class="javascript hljs">yaCounterXXXXXXXX.reachGoal(<span class="hljs-string"><span class="hljs-string">'TARGET_NAME'</span></span>);</code> </pre> <br> å…¶ä¸­ï¼š <br><br>  <b>XXXXXXXX-</b>æ‚¨åœ¨Yandex.Metricaä¸­çš„è®¡æ•°å™¨ç¼–å·ã€‚ <br><br> æ¯ä¸ªæµè§ˆå™¨ä¸­çš„æ§åˆ¶å°éƒ½ä»¥è‡ªå·±çš„æ–¹å¼æ‰“å¼€ï¼Œä¾‹å¦‚ï¼Œå¯¹äºChromeï¼Œè¯¥æ§åˆ¶å°ä½¿ç”¨ç»„åˆé”®<b>Ctrl + Shift + j</b>æ‰“å¼€ï¼š <br><br><img src="https://habrastorage.org/webt/d8/-u/b1/d8-ub114bjwr5ca7pccnzkpwl-y.png"><br><br> æŒ‰ä¸‹Enteré”®åï¼Œæ‚¨çš„æ´»åŠ¨ä¸ä»…åº”è½¬åˆ°Metricï¼Œè€Œä¸”è¿˜åº”è½¬åˆ°GAã€‚ <br><br> è¦éªŒè¯è¿™ä¸€ç‚¹ï¼Œè¯·åœ¨â€œ <b>å®æ—¶</b> â€éƒ¨åˆ†ä¸­æ‰“å¼€â€œäº‹ä»¶â€æŠ¥å‘Šï¼š <br><br><img src="https://habrastorage.org/webt/el/tf/7c/eltf7c1lb7geeb4okpr0oxn9r88.png"><br><br> å¦‚æœä¸€åˆ‡é…ç½®æ­£ç¡®ï¼Œé‚£ä¹ˆæ‚¨å°†çœ‹åˆ°ä¸€è¡ŒåŒ…å«Metrikaå’ŒTARGET_NAMEçš„å€¼ã€‚ <br><br> æ­å–œï¼Œæ‚¨å·²å°†ç›®æ ‡ä»Metricè½¬ç§»åˆ°Google Analyticsï¼ˆåˆ†æï¼‰ï¼ <br><br>  <i>ä¸ºé—¨æˆ·Cossaå‡†å¤‡äº†ææ–™ã€‚</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN458328/">https://habr.com/ru/post/zh-CN458328/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN458310/index.html">ä½¿ç”¨Telegrafä».NETåº”ç”¨ç¨‹åºæ”¶é›†æŒ‡æ ‡</a></li>
<li><a href="../zh-CN458312/index.html">è«æ–¯ç§‘çš„Androidå­¦é™¢ï¼šé«˜çº§è¯¾ç¨‹</a></li>
<li><a href="../zh-CN458316/index.html">Yandex Retro Games Battle 2019-ä¸ºZX Spectrumå¼€å‘æ¸¸æˆ</a></li>
<li><a href="../zh-CN458324/index.html">Vue.jså…¥é—¨æ‰€éœ€çš„ä¸€åˆ‡</a></li>
<li><a href="../zh-CN458326/index.html">Yandexä¸ºç ”ç©¶äººå‘˜æ‰“å¼€Tolokaæ•°æ®é›†</a></li>
<li><a href="../zh-CN458330/index.html">å®Œç¾æ— æ­¢å¢ƒï¼šç¥ç»æ¥å£å¦‚ä½•å¸®åŠ©äººç±»</a></li>
<li><a href="../zh-CN458332/index.html">å¼‚æ­¥ç¼–ç¨‹-å¼‚æ­¥æ€§èƒ½ï¼šäº†è§£å¼‚æ­¥å’Œç­‰å¾…çš„æˆæœ¬</a></li>
<li><a href="../zh-CN458334/index.html">ä½¿ç”¨Slonyä»æ—§PostgreSQLè¿ç»­å¤åˆ¶åˆ°æ–°PostgreSQL</a></li>
<li><a href="../zh-CN458336/index.html">ä½¿ç”¨é¡¹ç›®ç¤ºä¾‹çš„ITäº§å“å¼€å‘çš„å…¨å‘¨æœŸï¼šå›¢é˜Ÿè§’è‰²ï¼Œå®¢æˆ·ä»»åŠ¡ï¼Œé˜¶æ®µ</a></li>
<li><a href="../zh-CN458338/index.html">åº”ç”¨ç¨‹åºå®‰å…¨ç®¡ç†å™¨ã€‚ å¼€å‘äººå‘˜è¿˜æ˜¯å®‰å…¨æ€§ï¼Ÿ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>