<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ú°Ô∏è ‚ö´Ô∏è üßëüèø‚Äçü§ù‚ÄçüßëüèΩ Desarrollo de electr√≥nica. Sobre microcontroladores en los dedos ‚õÖÔ∏è üì¢ üíπ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pensando en una startup tecnol√≥gica, no tiene que ser un as en electr√≥nica en absoluto, es mucho m√°s probable que un especialista limitado con conocim...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desarrollo de electr√≥nica. Sobre microcontroladores en los dedos</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445936/"><img src="https://habrastorage.org/webt/ft/gy/ko/ftgykowsgjxoa9maxgetdwgbzyi.jpeg"><br><br>  Pensando en una startup tecnol√≥gica, no tiene que ser un as en electr√≥nica en absoluto, es mucho m√°s probable que un especialista limitado con conocimiento de los conceptos b√°sicos del marketing tenga una buena idea, pero incluso si le ordena a alguien que lo desarrolle, debe navegar por las capacidades de la base de elementos modernos y presentar el precio de la soluci√≥n.  De lo contrario, puede exigir lo imposible u obtener un dispositivo con costos caros en una base de elementos obsoletos. <br>  Bajo el corte, un intento de informar breve y simplemente sobre las capacidades de los microcontroladores modernos a personas que est√°n lejos de ellos.  Para aquellos que tienen la idea de un nuevo dispositivo electr√≥nico, pero no tienen idea de qu√© es un microcontrolador.  Aquellos que quieran dar el primer paso desde entretener experimentos con la plataforma Arduino hasta dise√±ar sus propios dispositivos tambi√©n pueden encontrar consejos simples pero √∫tiles.  Intent√©, sin detenerme en los detalles t√©cnicos, <s>para este prop√≥sito no es suficiente que el libro</s> establezca la esencia y d√© algunos consejos simples pero √∫tiles sobre el dise√±o de circuitos para evitar que los principiantes cometan errores elementales. <br><a name="habracut"></a><br><h3>  Resumen del art√≠culo: </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥mo los microcontroladores conquistaron el mundo</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ARM Architecture - L√≠der actual del mercado de microcontroladores</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Competencia con hermanos menores.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sobre la colocaci√≥n de asfalto, los beneficios del sue√±o y sus variedades</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Poco sobre la tecnolog√≠a de fabricaci√≥n y c√≥mo aparecen las series de microcontroladores</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La periferia del microcontrolador ARM m√°s simple por medio d√≥lar</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La forma m√°s econ√≥mica de obtener funciones adicionales</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬øY qu√© agregar√° la transici√≥n al Cortex-M4, adem√°s del aumento del precio un par de veces?</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cortex-M7: cuando quieres m√°s ...</a> <br><br><br><a name="MCU"></a><h4>  <font color="#66a3be">La protecci√≥n del c√≥digo, la capacidad de actualizaci√≥n y la diversidad han ayudado a los microcontroladores a conquistar el mundo</font> </h4><br>  Cualquier dispositivo inteligente requiere control.  En la mayor√≠a de los casos, los microcontroladores lo hacen hoy: chips que combinan un n√∫cleo de microprocesador, m√≥dulos de memoria y perif√©ricos que son responsables de la comunicaci√≥n con otros componentes del dispositivo y el mundo exterior. <br><br><img src="https://habrastorage.org/webt/4m/8u/r5/4m8ur5ebaj5ss5wk1u06ibyqcoe.jpeg" align="left">  Los microcontroladores son jack de todos los oficios.  Un microcontrolador es capaz de reemplazar docenas de microcircuitos especializados que ser√≠an necesarios para realizar las funciones requeridas si el microprocesador desempe√±ara el papel de la calculadora. <br><br>  Una de las ventajas indiscutibles del microcontrolador es que el programa bajo el cual se ejecuta est√° oculto dentro de su carcasa (en la secci√≥n llamada "memoria del programa") y est√° muy bien protegido contra pirater√≠a, por supuesto, si el desarrollador del microc√≥digo se ocup√≥ de esto activando los mecanismos integrados. protecci√≥n  Por lo tanto, obtendr√° protecci√≥n de la propiedad intelectual tanto como sea posible hoy. <br><br><img src="https://habrastorage.org/webt/rt/gg/bu/rtggbu8vffk3iumjdp_xhzkxp94.jpeg" align="right">  Lo que no se puede hackear se puede copiar.  ¬øPor qu√© intentar leer el c√≥digo incrustado en el microcontrolador del programa utilizando dispositivos caros e ingeniosos, si es m√°s f√°cil y econ√≥mico encontrar un profesional que pueda volver a escribirlo?  Quiz√°s el resultado ser√° a√∫n mejor, y la funcionalidad es m√°s rica que la del prototipo.  S√≠, cuesta dinero, pero el contenido de la memoria FLASH de los microcontroladores actuales est√° tan bien protegido que los intentos de "hackear" groseramente costar√°n a√∫n m√°s.  Adem√°s, el problema de la propiedad intelectual se est√° resolviendo y usted, junto con los c√≥digos fuente del programa, tiene la oportunidad de desarrollar y mejorar su dispositivo. <br><br>  La memoria del programa, en los microcontroladores universales modernos, es regrabable, y el proceso de reescritura se puede repetir m√°s de diez mil veces.  Se ruega el uso de este hecho para actualizar el software con el fin de eliminar los errores encontrados en √©l o para expandir las funciones de un dispositivo que ya funciona.  Esto es bastante simple de implementar: al agregar una secci√≥n especial de c√≥digo llamada "cargador de arranque" al programa, tiene la oportunidad de actualizar el software de su dispositivo de varias maneras: en el punto de servicio (si el dispositivo tiene un conector especial oculto dentro de la carcasa), conect√°ndolo a computadora a trav√©s de USB, a trav√©s de una red o incluso una interfaz inal√°mbrica.  Lo principal es proporcionar al dispositivo los perif√©ricos necesarios para esto.  Al proporcionar la capacidad de actualizar el software, siempre debe pensar en la seguridad, si este proceso no est√° suficientemente protegido, los atacantes no solo pueden robar su c√≥digo, sino que tambi√©n pueden modificarlo y usarlo para sus propios fines <s>, lo cual es insidioso</s> .  Por ejemplo, tome el control de las cosas de su "hogar inteligente" o esp√≠e con la ayuda de la c√°mara WEB instalada por usted en su hogar. <br><br><a name="ARM_MCU"></a><h4>  <font color="#66a3be">ARM Architecture - L√≠der actual del mercado de microcontroladores</font> </h4><br>  Desde la √©poca de King Peas, los microcontroladores generalmente se dividen de acuerdo con la capacidad de los datos en los que realizan operaciones.  En la gran mayor√≠a de los casos, hoy en d√≠a, en nuevos desarrollos, vale la pena elegir microcontroladores de 32 bits con un n√∫cleo ARM.  Hay una gran cantidad de modificaciones y siempre puede elegir la instancia que mejor se adapte a su problema.  Dependiendo del conjunto de funciones y rendimiento, el precio de un chip puede variar de decenas de centavos a decenas de d√≥lares. <br>  Los microcontroladores (MCU), dependiendo de la arquitectura del n√∫cleo inform√°tico, generalmente se dividen en grandes familias.  Hoy, para el desarrollo de dispositivos de peque√±a y mediana complejidad, los microcontroladores m√°s populares con n√∫cleos desde Cortex-M0 hasta Cortex-M7.  Cuanto mayor sea el n√∫mero, mayores ser√°n las capacidades inform√°ticas (y no solo), el precio y el consumo m√°ximo de energ√≠a.  La sucesi√≥n de la arquitectura jug√≥ un papel importante en la popularidad de ARM.  Un desarrollador puede modificar el c√≥digo del programa de sus desarrollos anteriores con costos m√≠nimos, pasando de microcontroladores de un fabricante a chips de otro y migrando entre n√∫cleos con un rendimiento diferente. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/d-/l5/o3/d-l5o3vfjxpjdltq9o6vftmu6wo.jpeg"></div><br><a name="brothers"></a><h4>  <font color="#66a3be">Competencia con hermanos menores.</font> </h4><br>  Sin embargo, los ARM no se dirigieron.  Recuerdo bien los tiempos en que los microcontroladores de 8 bits eran los l√≠deres absolutos del mercado y, desde sus posiciones, los colegas de 16 bits intentaron empujarlos sin √©xito, pero, ir√≥nicamente, solo los hermanos mayores de 32 bits lograron hacer esto.  Dio la casualidad de que en el momento de su aparici√≥n, las tecnolog√≠as de fabricaci√≥n de chips redujeron en gran medida el costo de integrar grandes vol√∫menes de memoria FLASH en ellos.  Aprovechando esta oportunidad, los programadores comenzaron a cambiar de ensamblador a un lenguaje de nivel superior: C, cuya estructura se estableci√≥ perfectamente en la arquitectura de 32 bits.  Como resultado, los microcontroladores de 32 bits realizaron c√°lculos mucho m√°s r√°pido que sus colegas de 8 y 16 bits, pero hubo un problema: ten√≠an un mayor consumo de corriente. <br><br>  Por lo tanto, al principio, se usaron en casos donde se requer√≠a un mayor rendimiento computacional. <br><br>  Se sabe que el consumo de corriente promedio del n√∫cleo inform√°tico del microcontrolador aumenta significativamente con un aumento en su frecuencia de reloj.  Al principio, los modelos de microcontroladores de 8 bits ten√≠an un consumo notablemente menor a una frecuencia similar y, adem√°s, pod√≠an trabajar desde una frecuencia de reloj baja, hasta 32 kHz. <br><br>  El consumo de energ√≠a de los microcontroladores depende en gran medida de la frecuencia de reloj del n√∫cleo y los perif√©ricos, para regularlo, comenzaron a usar la unidad generadora de frecuencia de reloj basada en PLL, ampliamente utilizada en dispositivos de transmisi√≥n de radio.  Esto hizo posible variar ampliamente la frecuencia del reloj sin cambiar el resonador de cuarzo maestro.  Los m√≥dulos perif√©ricos no tienen que tener la misma frecuencia de reloj que el n√∫cleo inform√°tico.  Para reducir su consumo de energ√≠a, la frecuencia comenz√≥ a alimentarse a trav√©s de divisores con una relaci√≥n de divisi√≥n controlada por programa.  Introdujo la capacidad de deshabilitar m√≥dulos no utilizados.  Estas medidas redujeron en gran medida el consumo de energ√≠a, pero a√∫n se mantuvo significativamente m√°s que el de los de 8 bits. <br><br>  Durante un corto tiempo, se desarroll√≥ la paridad: las MCU de 32 bits capturaron el nicho de las aplicaciones de gama alta, y las de 8 bits mantuvieron posiciones con confianza en dispositivos para los que el bajo consumo de energ√≠a era importante.  Persisti√≥ hasta que las MCU de 32 bits dominaron perfectamente el modo de operaci√≥n "pulso". <br><br>  8-biters, para entonces, tambi√©n aprendieron c√≥mo hacer esto, pero, debido al bajo rendimiento, tuvieron que permanecer despiertos mucho m√°s y, como resultado, comenzaron a perder el consumo de energ√≠a, especialmente en tareas que requieren c√°lculos, como lo ilustra la siguiente imagen. <br><br><img src="https://habrastorage.org/webt/ro/z1/ji/roz1jikhroyuoh_0whgbgiwusai.jpeg"><br><br><a name="sleep"></a><h4>  <font color="#66a3be">Sobre la colocaci√≥n de asfalto, los beneficios del sue√±o y sus variedades</font> </h4><br>  Entonces, los microcontroladores aprendieron a creer tan bien que comenzaron a hacer su trabajo muy r√°pidamente y la mayor√≠a de las veces se vieron obligados a "ganar dinero", devorando energ√≠a para realizar ciclos inactivos.  En dispositivos autoalimentados, esto reduce en gran medida la vida √∫til de la bater√≠a o la vida √∫til de la bater√≠a con una sola carga. <br><br>  Mira a los trabajadores de la construcci√≥n colocando el asfalto.  Intensifican bruscamente su trabajo cuando llega un cami√≥n con una nueva porci√≥n de asfalto, y despu√©s de colocarlo se ralentiza.  Por lo tanto, los microcontroladores pueden aumentar y disminuir la frecuencia del reloj central.  Sin embargo, esto no es tan f√°cil para ellos como para los trabajadores: la frecuencia de operaci√≥n de toda la periferia interna tambi√©n cambiar√° al mismo tiempo, por lo tanto, sus partes sensibles deber√°n reconfigurarse. <br>  No ser√≠a m√°s f√°cil, habiendo hecho todo el trabajo r√°pidamente, dormir un poco.  A menudo si.  Adem√°s, los tipos de sue√±o de los microcontroladores difieren a√∫n m√°s dram√°ticamente que en los humanos. <br><br><img src="https://habrastorage.org/webt/_o/s5/4x/_os54x2gaveqetdf6d2erfih87o.jpeg" align="left">  Puedes tomar una siesta.  En este caso, nuestro chip siempre est√° listo y, tan pronto como suena la alarma del temporizador o se interrumpe por una interrupci√≥n externa, se activa casi instant√°neamente.  Como una persona durante una siesta puede aliviar el estr√©s, pero no dormir lo suficiente cuando lo jalan constantemente, por lo que el microcontrolador puede reducir su consumo de energ√≠a en este modo "solo" cada 10 veces, este modo se llama SLEEP. <br><br>  La mejor manera de dormir bien es desvestirse, acostarse, cerrar las cortinas de la ventana y encender la alarma.  Sin embargo, despu√©s de tal sue√±o, no entrar√° inmediatamente en el trabajo.  Al menos deber√° enjuagarse con agua fr√≠a y vestirse.  El microcontrolador tambi√©n tiene este modo, cuando limita el n√∫mero de est√≠mulos externos y apaga el generador de reloj principal.  Este es el modo STOP.  Puede reducir el consumo en 1000 veces, pero tomar√° una cantidad significativa de tiempo salir de √©l. <br><br>  Ahora, imagine que antes de acostarse bebi√≥ una buena dosis de pastillas para dormir, apag√≥ la alarma y el tel√©fono, y cerr√≥ todas las ventanas y puertas.  Este ser√° el modo EN ESPERA.  El microcontrolador se puede quitar de este modo solo con la ayuda de conclusiones especiales, y la mayor parte de la memoria de lo que hizo antes de ese sue√±o se perder√° para siempre, tendr√° que comenzar a trabajar nuevamente.  Pero estando en este modo, el MCU consume otra mitad m√°s. <br><br>  Este √∫ltimo, un modo muy ex√≥tico, ya recuerda a alguien que no puede quedarse sin equipo especial.  <s>Sin embargo,</s> en este caso, solo funciona un generador especial <s>, que es parte del microcontrolador</s> en un reloj de cuarzo separado, que puede operar desde su propia fuente de energ√≠a y tener literalmente unos pocos bytes de RAM, cuyo prop√≥sito es recordarle al microcontrolador en qu√© estado se encontraba.  Si las partes restantes del microcontrolador, al mismo tiempo, est√°n desconectadas de la fuente de alimentaci√≥n, entonces el consumo de energ√≠a ya puede ser una d√©cima parte del modo activo. <br><br>  <b>Al elegir un modo de ahorro de energ√≠a, debe recordar las consecuencias de la aplicaci√≥n</b> : <br><br><ul><li>  cuanto m√°s profundo es el sue√±o, m√°s largo es el despertar </li><li>  cuanto m√°s profundo es el sue√±o, menos formas de sacar el microcontrolador </li><li>  cuanto m√°s profundo es el sue√±o, menos informaci√≥n queda sobre el estado anterior del microcontrolador </li><li>  Para alcanzar los valores m√≠nimos declarados, en muchos modos es necesario tomar medidas adicionales, por ejemplo, desconectar perif√©ricos </li><li>  Para minimizar el consumo de energ√≠a del dispositivo en su conjunto, es necesario dise√±ar correctamente los circuitos de todo el dispositivo. </li><li>  Para minimizar el consumo de energ√≠a del dispositivo en su conjunto, debe asegurarse de que los otros componentes y circuitos tambi√©n tengan microalimentaci√≥n en modo inactivo.  Es est√∫pido hacer enormes esfuerzos para reducir el consumo del microcontrolador por debajo de una microamperia y, al mismo tiempo, usar un estabilizador barato con una corriente de autoconsumo de 100 microamperios en el dispositivo, <s>pero esto es muy com√∫n</s> </li><li>  Para el uso exitoso de los modos de sue√±o profundo, no solo el programa, sino tambi√©n los circuitos, deben pensarse cuidadosamente, de lo contrario, en lugar de guardar, puede tener problemas muy serios, que rara vez suceden, pero el dispositivo "muerto" se congela por una raz√≥n inexplicable o se despierta con demasiada frecuencia y, como Como resultado, el consumo es un orden de magnitud mayor de lo esperado </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ya/4r/vb/ya4rvbmj6zuxbkfdm42vayp9qnm.jpeg"></div><br>  Si su programador con un ingeniero de circuitos se ha culpado mutuamente por primera vez de curvatura y, juntos, el fabricante por publicar n√∫meros poco realistas en hojas de datos en el microcontrolador, y su dispositivo est√° colocando las bater√≠as en un orden de magnitud m√°s r√°pido de lo que esperaba, esta es una raz√≥n para al menos cambiar a independiente Expertos altamente calificados. <br><br><a name="family"></a><h4>  <font color="#66a3be">Poco sobre la tecnolog√≠a de fabricaci√≥n y c√≥mo aparecen las series de microcontroladores</font> </h4><br>  La parte f√≠sicamente activa del microcontrolador, como la gran mayor√≠a de otros microcircuitos, generalmente se forma en una oblea de monosilicio (llam√©mosla, en este contexto, un chip).  Los chips ocupan un √°rea muy peque√±a, pero es tecnol√≥gicamente rentable producir placas de gran di√°metro, por lo tanto, generalmente se coloca una gran cantidad de chips, como panales, en un plato grande y se forman durante un proceso tecnol√≥gico.  Posteriormente, las placas se cortan en pedazos, recibiendo chips individuales, que se colocan en el estuche. <img src="https://habrastorage.org/webt/zb/ci/pl/zbcipl0p0xcz2exeiddm0indj7a.jpeg" align="left">  El desarrollo de la topolog√≠a y la depuraci√≥n de los procesos tecnol√≥gicos de un nuevo chip es muy costoso, y el espacio ocupado por un solo chip en una placa generalmente no es grande.  Es rentable para los fabricantes producir chips en grandes lotes, pero los usuarios necesitan microcontroladores en diferentes casos: para alguien es importante obtener un caso m√°s peque√±o y m√°s barato, por el contrario, necesita m√°s salidas para administrar una pantalla LCD o memoria externa con una interfaz paralela.  Es rentable que los fabricantes cubran todos los nichos para que los clientes no se crucen con los competidores sin encontrar el modelo que sea √≥ptimo para ellos. <br><br>  A menudo es m√°s rentable lanzar un gran lote de un chip universal y colocarlo en diferentes casos que lanzar una docena de diferentes.  Para los chips colocados en cajas con una peque√±a cantidad de pines, algunos puertos (en este contexto, por puertos nos referimos a almohadillas de contacto en la superficie del chip que sirven para comunicarse con el mundo exterior) simplemente no est√°n conectados.  A menudo, los fabricantes van m√°s all√°: para aumentar la demanda y el precio de los microcontroladores con una gran cantidad de patas, cortan artificialmente la funcionalidad de las que tienen menos: deshabilitan algunas funciones, limitan la cantidad de memoria disponible, etc. <br><br>  Entonces, sobre la base de un chip, forman una serie de microcontroladores que difieren significativamente en el tama√±o de la memoria y un conjunto de m√≥dulos perif√©ricos, a veces a veces en precio.  Al mismo tiempo, los chips instalados en ellos se pueden cortar de las mismas placas.  Dado que el √°rea en la que se encuentra un chip es peque√±a, su contribuci√≥n al costo del producto final tambi√©n es peque√±a y puede sacrificarse.  Se vuelve beneficioso deshabilitar memoria adicional y otras funciones, por ejemplo, en la etapa de prueba, ya sea con la ayuda de bits de configuraci√≥n programables, o quemando los puentes con un l√°ser.  Solo para la mayor√≠a de los productos en masa tiene sentido crear una plantilla fotogr√°fica ligeramente modificada para esto.  Adem√°s, no es necesario que haya memoria f√≠sicamente ausente sin usar, de nuevo, simplemente se puede apagar quitando los puentes en la plantilla. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yx/uu/wr/yxuuwr9uhryuqjgsw9faxxl_szo.jpeg"></div><br>  Entonces, a partir de un dise√±o de chip est√°ndar, se forma una serie completa de microcircuitos. <br><br><a name="perif"></a><h4>  <font color="#66a3be">La periferia del microcontrolador ARM m√°s simple por medio d√≥lar</font> </h4><br>  El n√∫cleo del procesador es el cerebro, pero para que no sea como un "caballo esf√©rico en el vac√≠o", se requieren an√°logos de los sentidos y las extremidades. <br><br>  En el microcontrolador, su papel lo juegan las conclusiones sobre el caso, a las cuales los puertos (pads) del chip se pueden conectar dentro del caso.  A su vez, a trav√©s de conmutadores internos, se pueden conectar varios m√≥dulos perif√©ricos al mismo puerto. <br>  Para comenzar, considere la periferia de una de las series m√°s simples de ST basadas en el n√∫cleo Cortex-M0: stm32F03. <br><br><img src="https://habrastorage.org/webt/mr/bx/fv/mrbxfvq_arcn6zy_3aapgjflvho.jpeg"><br><br>  <b>Para esta serie, tenemos el siguiente conjunto de funciones b√°sicas:</b> <br>  <b><font color="#66a3be">Reloj en tiempo real (Reloj en tiempo real o RTC)</font></b> , que puede ser alimentado por una salida separada y operar desde un resonador de baja frecuencia separado.  Este m√≥dulo consume muy poca energ√≠a, en el caso de una falla de energ√≠a, puede funcionar durante horas en un condensador cargado o durante a√±os en una peque√±a bater√≠a integrada en el dispositivo.  Adem√°s, puede servir como un reloj de alarma, eliminando el microcontrolador del estado incluso del sue√±o m√°s profundo en un momento predeterminado. <br><br>  <b><font color="#66a3be">WatchDog</font></b> es un perro guardi√°n que evita que el microcontrolador se duerma para siempre, por ejemplo, caer en un ciclo interminable o ir a una direcci√≥n inexistente.  Su principio de funcionamiento es simple.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El programador configura el temporizador de protecci√≥n anticongelante durante un cierto per√≠odo de tiempo, digamos por un segundo, y lo inicia. Luego organiza, en los lugares del programa elegido por √©l, secciones cortas de c√≥digo que reinician el temporizador desde cero. Si no hay restablecimiento del temporizador en un segundo, WatchDog considera que algo est√° mal con el programa y se adapta al microcontrolador para reiniciar. El programa comienza a funcionar desde el principio, y es posible determinar si el iniciador del reinicio de WatchDog fue y tener en cuenta este hecho al inicio. </font></font><br><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El GPIO de entrada-salida de prop√≥sito general</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es la caracter√≠stica m√°s com√∫n que admite la mayor√≠a de los pines del microcontrolador. Se pueden configurar como entradas o como salidas.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Considere trabajar como entrada. Si el voltaje en la entrada del microcontrolador es inferior a un cierto umbral (generalmente cerca de la mitad de la fuente de alimentaci√≥n), entonces se percibe como un cero l√≥gico, de lo contrario como 1. Las entradas digitales generalmente tienen una impedancia de entrada muy alta, por lo tanto, si se dejan desconectadas, su estado puede saltar de cero a uno y viceversa, bajo la influencia de campos electromagn√©ticos. Para evitar que esto suceda, hay modos especiales cuando la entrada dentro del chip est√° conectada a trav√©s de una resistencia de 20-50 KOhm con la potencia m√°s del microcontrolador (pull-up) o menos (pull-down). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si las salidas est√°n configuradas con salidas digitales, entonces se pueden convertir mediante programaci√≥n a un nivel alto </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">igual al voltaje de la fuente de alimentaci√≥n del microcontrolador</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o bajo </font><font style="vertical-align: inherit;">Hay modos m√°s complicados, pero no entraremos en detalles excesivos.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consejos para desarrolladores novatos</font></font></b> <div class="spoiler_text"> <i>  ‚Äî    ,     ,      .    ,   ,     ,        ,    . ,   ,   ‚Äî      ,     ,    ,           . <br><br><img src="https://habrastorage.org/webt/a4/06/xz/a406xzrlqas-efxv5iidkjlmhmi.jpeg"><br><br>      ,    ( ),      . X4 ‚Äî    .    5-7,     .      , ,   ,       ,     R24-R26,  1 .  VD4-VD6     5 ,   ,    ,     3,3 ,       5 .  R29-R31  100 . <br>         .        ,    .     STM32Fxx    <s>   </s>    5  ,       ,     ,          . <br><br> ,   .  , ,         ,         ‚Äî              (- ).    ,       .    . <br><br>    .          .          ¬´¬ª ,      . <br><br>      ,     .         ,           ‚Äî  .  ,          ,    . <br> ,    ,   ARM       ,   8- .    ,         ,    .     ,     ,    ,     .</i> </div></div><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensor de temperatura</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El microcontrolador tiene su propio sensor de temperatura, aunque no es muy preciso, sin embargo, puede, con ciertos supuestos, usarse para medir la temperatura dentro del dispositivo. </font></font><br><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√∫mero de serie √∫nico</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cada microcontrolador tiene su propio n√∫mero de serie √∫nico asignado en f√°brica. </font><font style="vertical-align: inherit;">Una caracter√≠stica muy conveniente que puede usarse para organizar la producci√≥n en masa de sus productos. </font></font><br><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interfaces para el intercambio de datos</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Varios microcontroladores de esta serie pueden tener varias de las interfaces m√°s comunes, lo que facilita enormemente la comunicaci√≥n con otros chips y el mundo exterior:</font></font><br><br><ul><li> USART ‚Äî   ,       <s>   COM  RS232</s> ,     </li><li> SPI ‚Äî  ,     ,    </li><li> I2C ‚Äî  ,               .      ,           </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todas estas interfaces son f√°ciles de implementar mediante programaci√≥n utilizando GPIO regulares, pero funcionar√°n mucho m√°s lentamente y consumir√°n muchos recursos b√°sicos de computaci√≥n. </font></font><br><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un convertidor anal√≥gico a digital ADC o ADC</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el que tendr√° que detenerse con m√°s detalle. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un m√≥dulo extremadamente √∫til que puede medir el voltaje de las se√±ales anal√≥gicas. Los estima en fracciones del valor de la fuente de se√±al de referencia, en nuestro caso es la tensi√≥n de alimentaci√≥n del m√≥dulo anal√≥gico del microcontrolador, que puede ser igual o ligeramente inferior a la tensi√≥n de alimentaci√≥n principal del chip. La precisi√≥n te√≥rica del ADC depende de su capacidad. En los microcontroladores modernos, el ADC de 12 bits de aproximaci√≥n sucesiva se usa con mayor frecuencia, con menos frecuencia 10 y cu√°n ex√≥tico es 16.</font></font><br><br><img src="https://habrastorage.org/webt/2g/ru/k_/2gruk_gpzqlqu_rxupfdbyrmb4s.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuando funciona con 3 voltios, el ADC de 12 bits del microcontrolador tendr√° una resoluci√≥n de 3/4096 = 0.00073 voltios, mejor que un milivoltio. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pero en la pr√°ctica, lograr este ideal no es f√°cil.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Detalles para principiantes</font></font></b> <div class="spoiler_text"> <i>               .   ,     ,             <br> <b>    </b> <br><br></i> <ul><li>    MCU      </li><li>      MCU     </li></ul><br> <b>    </b> <br><br><ul><li>           ‚Äî      MCU               XR7  100 ,   ,          ‚Äî  . </li></ul><br> <b>    </b> <br><br><ul><li>        ,     .                  NP0     ,     ,       </li><li>     ,     ,             ,  ,    </li><li>             ‚Äú‚Äù,            ‚Äî       </li></ul><br> <b>    </b> ,  ,        ,      ,                 ,        . <br><br><ul><li>     ,          ,      ,   </li><li>          ( ),   .        ,   ,   ,  .     ,         </li></ul><br><img src="https://habrastorage.org/webt/cm/hp/1h/cmhp1hbrgbk70yzu20fl-v5agdu.jpeg"><br><br>                 .            MEMS             ,    .     ,        ,     . <br><br>   VBUT     .      : R5-10 , 10 0.1 ,   L1  L2 BLM18PG471SN1D     . <br><br><img src="https://habrastorage.org/webt/bi/gs/ja/bigsjabd3x3fbkyhfbnch4bsenc.jpeg"><br><br>       .  ,        ASIC,     .      ‚Äî   .         ,   ,     .        ¬´ ¬ª. <br><br>       ,   . ,    ,  ,   ,      .     1,      16.   ?  ,      .       10 ,     ‚Äî       10    .   ,   .    , ,     1 . ,    10       10 ! <br></div></div><br>  <b><font color="#66a3be">Un sistema de acceso directo a la memoria DAP o DMA</font></b> es otra cosa importante.  Este m√≥dulo le permite enviar datos desde la periferia a la memoria o viceversa. <br><br>  Por ejemplo, con su ayuda, puede asignar un trozo de memoria para almacenar datos provenientes del ADC y crear un b√∫fer circular a partir de √©l.  Luego, el ADC comienza en el modo de lectura de datos a intervalos regulares.  Usando mecanismos DMA, los datos le√≠dos, sin la participaci√≥n del n√∫cleo, independientemente, byte a byte, se colocar√°n en un b√∫fer dedicado.  Cuando el b√∫fer est√° completamente lleno, el n√∫cleo recibir√° una se√±al y comenzar√° a procesarlos mediante programaci√≥n, y el sistema DMA comenzar√° el proceso de arranque desde el principio.  Dado que DMA tiene varios canales, nadie se molesta en implementar para nuestro caso la salida autom√°tica a USART de datos desde el b√∫fer.  Como resultado, obtenemos el proceso de transferir la lectura del ADC a USART que funciona sin usar el kernel, y no el simple trabajo del programador en la configuraci√≥n de DMA dar√° buenos resultados. <br><br>  <b><font color="#66a3be">M√≥dulo de modulaci√≥n de ancho de pulso PWM o PWM</font></b> , debido a las limitaciones del art√≠culo, no nos detendremos en detalle, solo noto que esta es una funci√≥n extremadamente √∫til y ampliamente utilizada con la que es posible controlar el brillo de los LED, la velocidad del motor, las m√°quinas de direcci√≥n, el dise√±o inteligente de CC -Conversores DC e incluso sintetizar sonido. <br><br>  ¬øQu√© puedo obtener agregando 30 centavos? <br><br><a name="family_plus"></a><h4>  <font color="#66a3be">Cambiando a Cortex-M0 +.</font>  <font color="#66a3be">La forma m√°s econ√≥mica de obtener funciones adicionales</font> </h4><br>  ¬øY qu√© bollos adicionales ofrece el microcontrolador de la √∫ltima serie con el n√∫cleo un poco m√°s moderno que el Cortex-M0 +, a un costo de 20-50 centavos m√°s caro que los an√°logos de la serie anterior en t√©rminos de cuerpo y n√∫mero de salidas? <br><br>  Tabla de diferencias entre series <br><br><img src="https://habrastorage.org/webt/2y/ep/sx/2yepsxg9tqadr51lrrn23xaksnw.jpeg"><br><br><ul><li>  frecuencia m√°xima de reloj duplicada </li><li>  de 2 a 1.7 voltios la tensi√≥n de alimentaci√≥n m√≠nima cae </li><li>  ADC puede trabajar dos veces y media m√°s r√°pido </li><li>  aparecieron dos canales de un convertidor digital a anal√≥gico de 12 bits.  Esta es una funci√≥n extremadamente √∫til, con la ayuda de la cual es posible formar una se√±al de un voltaje dado en los terminales con una precisi√≥n mejor que 1 mV, por ejemplo, formas de onda arbitrarias en el rango de frecuencia de audio </li><li>  aparecieron comparadores: dispositivos para comparar los valores de dos se√±ales anal√≥gicas, puede ser √∫til decir al determinar el momento de sobrecorriente </li><li>  Interfaz USB agregada a trav√©s de la cual puede conectar dispositivos a una computadora.  De particular inter√©s es la disponibilidad de opciones de administraci√≥n de energ√≠a para implementar una interfaz compatible con USB tipo 3-C.  Habl√© de √©l <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en uno de mis art√≠culos sobre Habr√©.</a> </li><li>  Apareci√≥ el acelerador AES para los procedimientos de cifrado / descifrado de 256 bits </li><li>  UART tuvo la oportunidad de trabajar en modos de suspensi√≥n y soporte de hardware para protocolos LIN (una red simple, ampliamente utilizada en la industria automotriz), IRDA (protocolo de transferencia de datos a trav√©s de LED infrarrojos, recuerde controles remotos de TV), tarjeta SIM ... </li><li>  Temporizadores extendidos y m√≥dulo PWM </li><li>  el l√≠mite superior del rango de temperatura de operaci√≥n aument√≥ a 125 grados </li><li>  Mayor fiabilidad debido a la expansi√≥n de los modos de reinicio en caso de problemas de alimentaci√≥n. </li><li>  Se agreg√≥ un generador de valor aleatorio de hardware "honesto", una caracter√≠stica √∫til en criptograf√≠a </li></ul><br>  Bueno, para muchas aplicaciones, una adici√≥n insignificante en el precio se amortiza por completo, ya que puede negarse a cambiar a microcontroladores m√°s caros de series de modelos superiores. <br><br><a name="Cort4"></a><h4>  <font color="#66a3be">¬øY qu√© agregar√° la transici√≥n al Cortex-M4, adem√°s del aumento del precio un par de veces?</font> </h4><br><img src="https://habrastorage.org/webt/tb/em/zm/tbemzmhj8xymuu7tmimap7hw4og.png"><br><br><ul><li>  La frecuencia m√°xima del reloj se eleva a 80 MHz. </li><li>  Un bloque pareci√≥ acelerar los c√°lculos de coma flotante </li><li>  Por supuesto, la memoria interna m√°xima ha aumentado </li><li>  Los modelos con 100 patas o m√°s admiten trabajar con memoria est√°tica externa. </li><li>  USB aprendido a trabajar en modo HOST </li><li>  El controlador de interfaz CAN apareci√≥.  Esta es una interfaz muy prometedora dise√±ada para aplicaciones altamente confiables.  Comenz√≥ su marcha victoriosa con la industria automotriz y ha estado librando una guerra prolongada con el RS-485 obsoleto en la industria de la automatizaci√≥n industrial extremadamente conservadora durante casi 20 a√±os. </li><li>  Ha aparecido una interfaz para conectar la tarjeta SD.  Una caracter√≠stica muy √∫til: ¬°agregue un soporte para 50 centavos a su dispositivo y obtenga un medio de almacenamiento extra√≠ble de decenas de gigabytes de tama√±o!  La mayor√≠a de las tarjetas logran funcionar con el SPI habitual, pero mucho m√°s lento </li><li>  Agregaron un amplificador operacional incorporado con una amplia variedad de modos de operaci√≥n.  <i>Gracias a esta y a las funciones anteriores, para mi √∫ltimo proyecto de un estetoscopio inal√°mbrico, tuve que detener la elecci√≥n en M4 en lugar de M0 +.</i>  <i>Como resultado, se hizo posible controlar la amplificaci√≥n de la se√±al desde el micr√≥fono MEMS y ahorrar decenas de horas de grabaciones de audio del trabajo del coraz√≥n en la tarjeta SD</i> </li><li>  El m√≥dulo criptogr√°fico aprendi√≥ a leer las funciones HASH en el hardware. </li><li>  El controlador de aplicaciones t√°ctiles se ha mejorado y ahora admite no solo botones, sino tambi√©n elementos de desplazamiento </li></ul><br><a name="Cort7"></a><h4>  <font color="#66a3be">Cortex-M7: cuando quieres m√°s ...</font> </h4><br><img src="https://habrastorage.org/webt/lm/rb/gh/lmrbghjnya9ftsujulp3aygdma0.png"><br><br>  En la gran cantidad de proyectos, las capacidades proporcionadas por los n√∫cleos anteriores son suficientes, pero tambi√©n ocurren excepciones.  Personalmente, esto me sucedi√≥ solo un par de veces, y solo una vez por una muy buena raz√≥n: requer√≠a un alto rendimiento para preparar datos para ASIC, un controlador Ethernet y un bus CAN-FD con una tasa de cambio aumentada. <br><br>  Si en el nivel de microcontroladores universales con n√∫cleos Cortex 4 y menores, en mi opini√≥n subjetiva, ST es ahora el l√≠der en t√©rminos de precio / funcionalidad, entonces, en el √°rea de chips de mayor rendimiento, es inferior al liderazgo de ATMEL, o m√°s bien, MICROCHIP que recientemente lo ha absorbido.  Por lo tanto, opt√© por la serie ATSAMV71, a partir de $ 6. <br><br>  Adem√°s de lo anterior (controlador Ethernet y bus CAN-FD), en general, obtenemos un n√∫cleo con un acelerador de operaciones que aumenta significativamente la productividad, operando a una frecuencia de reloj de hasta 300 MHz, interfaces para conectar una matriz de video y soporte para memoria din√°mica. <br><br>  En conclusi√≥n, le preguntar√© a aquellos que tienen experiencia en la comunicaci√≥n con microcontroladores, le pedir√© que elija la respuesta adecuada a la pregunta. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/445936/">https://habr.com/ru/post/445936/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445922/index.html">¬øPor qu√© ver transmisiones en l√≠nea si puedes leer a Habr?</a></li>
<li><a href="../445924/index.html">TESOROS: cuando los relojes inteligentes se vuelven raros</a></li>
<li><a href="../445926/index.html">El Programa secreto de ovnis de EE. UU. Tambi√©n ha estado investigando agujeros de gusano y dimensiones adicionales.</a></li>
<li><a href="../445928/index.html">C√≥mo aumentamos la productividad de servicio de Tensorflow en un 70%</a></li>
<li><a href="../445932/index.html">Seguridad de la aplicaci√≥n del cliente: consejos pr√°cticos para un desarrollador front-end</a></li>
<li><a href="../445940/index.html">AMA con Habr, v 7.0. Lim√≥n, Donuts y Noticias</a></li>
<li><a href="../445946/index.html">MWC: instrucciones de uso</a></li>
<li><a href="../445948/index.html">Herencia en C ++: principiante, intermedio, avanzado</a></li>
<li><a href="../445952/index.html">Un trill√≥n de solteros</a></li>
<li><a href="../445954/index.html">Acelerador de IA de HSE, MTS y Rostelecom</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>