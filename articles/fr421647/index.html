<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üâë üëå üì† Un moyen pratique de tester les composants React üë¶üèø üòí üîä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="J'ai √©crit un g√©n√©rateur de rapport personnalis√© pour Jest et l'ai publi√© sur GitHub . Mon g√©n√©rateur s'appelle Jest-snapshots-book, il cr√©e un livre ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Un moyen pratique de tester les composants React</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421647/">  J'ai √©crit un g√©n√©rateur de rapport personnalis√© pour Jest et l'ai publi√© sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> .  Mon g√©n√©rateur s'appelle Jest-snapshots-book, il cr√©e un livre HTML de snapshots des composants d'une application React. <br><br><img src="https://habrastorage.org/webt/32/eu/rz/32eurzyx63oqbxjuy5vw8eo3-bu.png"><br><br>  L'article expliquera ce qu'est Jest, le test d'instantan√©, qui n√©cessite g√©n√©ralement un g√©n√©rateur de rapport suppl√©mentaire et comment les √©crire.  Fondamentalement, tout cela s'applique aux tests des composants React, mais th√©oriquement, cela peut √™tre appliqu√© lorsque vous travaillez avec des donn√©es s√©rialisables. <br><a name="habracut"></a><br><h2>  Composant React Paginator </h2><br>  Par exemple, dans l'article, nous allons tester le composant <b>paginateur</b> ( <b>Paginator</b> ).  Cela fait partie de notre projet de cr√©ation d'applications sans serveur dans AWS ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> ).  La t√¢che d'un tel composant est d'afficher des boutons pour naviguer √† travers les pages d'un tableau ou autre chose. <br><br>  Il s'agit d'un simple composant fonctionnel sans composant sans √©tat (composant sans √©tat).  En entr√©e, il re√ßoit des accessoires le nombre total de pages, la page en cours et la fonction gestionnaire de cliquer sur la page.  En sortie, le composant produit un paginateur form√©.  Pour afficher les boutons, un autre composant <b>Button</b> enfant est utilis√©.  S'il y a beaucoup de pages, le paginateur ne les affiche pas toutes, les combinant et les affichant sous forme de points de suspension. <br><br><img src="https://habrastorage.org/webt/9f/5m/ph/9f5mphp5a7hvkj0vmdgfcapz7ve.jpeg"><br><br><div class="spoiler">  <b class="spoiler_title">Code du composant Paginator</b> <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> classes <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Paginator.css'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Button <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../UI/Button/Button'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Paginator = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { tp, cp, pageClickHandler } = props; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> paginator = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tp !== <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> &amp;&amp; tp &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> buttons = []; buttons.push( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag">`</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">pback</span></span></span></span><span class="xml"><span class="hljs-tag">`} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{cp</span></span></span></span><span class="xml"><span class="hljs-tag"> === </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">1}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">clicked</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{(cp</span></span></span></span><span class="xml"><span class="hljs-tag"> === </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">1</span></span></span></span><span class="xml"><span class="hljs-tag"> ? </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">null</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">event</span></span></span></span><span class="xml"><span class="hljs-tag"> =&gt;</span></span></span><span class="xml"> pageClickHandler(event, 'back'))}&gt; ‚Üê </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isDots = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i, tp, cp</span></span></span><span class="hljs-function">) =&gt;</span></span> i &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; i &lt; tp &amp;&amp; (i &gt; cp + <span class="hljs-number"><span class="hljs-number">1</span></span> || i &lt; cp - <span class="hljs-number"><span class="hljs-number">1</span></span>) &amp;&amp; (cp &gt; <span class="hljs-number"><span class="hljs-number">4</span></span> || i &gt; <span class="hljs-number"><span class="hljs-number">5</span></span>) &amp;&amp; (cp &lt; tp - <span class="hljs-number"><span class="hljs-number">3</span></span> || i &lt; tp - <span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> flag; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= tp; i++) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dots = isDots(i, tp, cp) &amp;&amp; (isDots(i - <span class="hljs-number"><span class="hljs-number">1</span></span>, tp, cp) || isDots(i + <span class="hljs-number"><span class="hljs-number">1</span></span>, tp, cp)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (flag &amp;&amp; dots) { flag = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; buttons.push( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag">`</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">p</span></span></span></span><span class="xml"><span class="hljs-tag">${</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">i</span></span></span></span><span class="xml"><span class="hljs-tag">}`} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{classes.Dots}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{true}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ... </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!dots) { flag = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; buttons.push( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag">`</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">p</span></span></span></span><span class="xml"><span class="hljs-tag">${</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">i</span></span></span></span><span class="xml"><span class="hljs-tag">}`} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{i</span></span></span></span><span class="xml"><span class="hljs-tag"> === </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">cp}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">clicked</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{(i</span></span></span></span><span class="xml"><span class="hljs-tag"> === </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">cp</span></span></span></span><span class="xml"><span class="hljs-tag"> ? </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">null</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">event</span></span></span></span><span class="xml"><span class="hljs-tag"> =&gt;</span></span></span><span class="xml"> pageClickHandler(event, i))}&gt; {i} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } } buttons.push( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag">`</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">pforward</span></span></span></span><span class="xml"><span class="hljs-tag">`} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{cp</span></span></span></span><span class="xml"><span class="hljs-tag"> === </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">tp}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">clicked</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{(cp</span></span></span></span><span class="xml"><span class="hljs-tag"> === </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">tp</span></span></span></span><span class="xml"><span class="hljs-tag"> ? </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">null</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">event</span></span></span></span><span class="xml"><span class="hljs-tag"> =&gt;</span></span></span><span class="xml"> pageClickHandler(event, 'forward'))}&gt; ‚Üí </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); paginator = <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{classes.Paginator}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {buttons} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> paginator; } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> Paginator;</code> </pre> </div></div><div class="spoiler">  <b class="spoiler_title">Code du composant du bouton</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> classes <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Button.css'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> button = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{props.disabled}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{classes.Button</span></span></span></span><span class="xml"><span class="hljs-tag"> + (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">props.className</span></span></span></span><span class="xml"><span class="hljs-tag"> ? ' ' + </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">props.className</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> '')} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{props.clicked}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {props.children} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> button;</code> </pre> </div></div><br><h2>  Plaisanterie </h2><br>  Jest est une biblioth√®que open source bien connue pour le test unitaire du code JavaScript.  Il a √©t√© cr√©√© et d√©velopp√© gr√¢ce √† Facebook.  √âcrit dans Node.js. <br><br>  En termes g√©n√©raux, la signification du test se r√©sume au fait que vous devez trouver des param√®tres d'entr√©e pour votre code et d√©crire imm√©diatement la sortie que votre code doit produire.  Lors des tests, Jest ex√©cute votre code avec les param√®tres d'entr√©e et v√©rifie le r√©sultat par rapport √† celui attendu.  S'il correspond, le test r√©ussira et sinon, il ne passera pas. <br><br>  Un petit exemple de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jestjs.io</a> . <br><br>  Supposons que nous ayons un module Node.js, qui est une fonction qui ajoute deux nombres (fichier <b>sum.js</b> ): <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + b; } <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = sum;</code> </pre> <br>  Si notre module est enregistr√© dans un fichier, pour le tester, nous devons cr√©er le fichier <b>sum.test.js</b> dans lequel √©crire un tel code pour le tester: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sum = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./sum'</span></span>); test(<span class="hljs-string"><span class="hljs-string">'adds 1 + 2 to equal 3'</span></span>, () =&gt; { expect(sum(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)).toBe(<span class="hljs-number"><span class="hljs-number">3</span></span>); });</code> </pre> <br>  Dans cet exemple, en utilisant la fonction de <b>test</b> , nous avons cr√©√© un test appel√© <b>¬´ajoute 1 + 2 pour √©galer 3¬ª</b> .  Le deuxi√®me param√®tre de la fonction de <b>test</b> , nous passons une fonction qui effectue r√©ellement le test. <br><br>  Le test consiste dans le fait que nous ex√©cutons notre fonction <b>somme</b> avec les param√®tres d'entr√©e <b>1</b> et <b>2</b> , passons le r√©sultat √† la fonction Jest <b>expect ()</b> .  Ensuite, en utilisant la fonction Jest <b>toBe ()</b> , le r√©sultat transmis est compar√© au r√©sultat attendu ( <b>3</b> ).  La fonction <b>toBe ()</b> appartient √† la cat√©gorie des fonctions de test Jest (matchers). <br><br>  Pour les tests, allez simplement dans le dossier du projet et appelez <b>jest</b> sur la ligne de commande.  Jest trouvera le fichier avec l'extension <b>.test.js</b> et ex√©cutera le test.  Voici le r√©sultat qu'il produira: <br><br><pre> <code class="bash hljs">PASS ./sum.test.js ‚úì adds 1 + 2 to equal 3 (5ms)</code> </pre> <br><h2>  Test enzymatique et instantan√© des composants </h2><br>  Le test d'instantan√© est une fonctionnalit√© relativement nouvelle de Jest.  Le fait est qu'√† l'aide d'une fonction de test sp√©ciale, nous demandons √† Jest d'enregistrer un instantan√© de notre structure de donn√©es sur le disque et, lors des tests ult√©rieurs, de comparer les nouveaux instantan√©s avec ceux pr√©c√©demment enregistr√©s. <br><br>  Dans ce cas, l'instantan√© n'est rien d'autre qu'une repr√©sentation textuelle des donn√©es.  Par exemple, un instantan√© d'un objet ressemblera √† ceci (la cl√© du tableau ici est le nom du test): <br><br><pre> <code class="javascript hljs">exports[<span class="hljs-string"><span class="hljs-string">`some test name`</span></span>] = <span class="hljs-string"><span class="hljs-string">` Object { "Hello": "world" } `</span></span>;</code> </pre> <br>  Voici √† quoi ressemble la fonction de test Jest, qui effectue une comparaison d'images (param√®tres facultatifs): <br><br><pre> <code class="javascript hljs">expect(value).toMatchSnapshot(propertyMatchers, snapshotName)</code> </pre> <br>  La <b>valeur</b> peut √™tre n'importe quelle structure de donn√©es s√©rialisable.  Pour la premi√®re fois, la fonction <b>toMatchSnapshot ()</b> √©crit simplement l'instantan√© sur le disque; dans les temps suivants, elle effectuera d√©j√† la comparaison. <br><br>  Le plus souvent, cette technologie de test est utilis√©e sp√©cifiquement pour tester les composants React, et encore plus pr√©cis√©ment, pour tester le rendu correct des composants React.  Pour ce faire, vous devez passer le composant en tant que <b>valeur</b> apr√®s le rendu. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Enzyme</a> est une biblioth√®que qui simplifie consid√©rablement le test des applications React en fournissant des fonctions de rendu de composants pratiques.  Enzyme est d√©velopp√© chez Airbnb. <br><br>  Enzyme vous permet de rendre les composants dans le code.  Il existe plusieurs fonctions pratiques pour cela qui effectuent diff√©rentes options de rendu: <br><br><ul><li>  rendu complet (comme dans le navigateur, rendu DOM complet); </li><li>  rendu simplifi√© (rendu peu profond); </li><li>  rendu statique </li></ul><br>  Nous ne nous attarderons pas sur les options de rendu, pour les tests d'instantan√©s, le rendu statique est suffisant, ce qui vous permet d'obtenir du code HTML statique du composant et de ses composants enfants: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> wrapper = render(<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Foo</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"unique"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">);</span></span></code> </pre> <br>  Donc, nous rendons notre composant et passons le r√©sultat √† <b>expect ()</b> , puis appelons la fonction <b>.toMatchSnapshot ()</b> .  La fonction informatique n'est qu'une abr√©viation de la fonction de <b>test</b> . <br><br><pre> <code class="javascript hljs">... const wrapper = render(<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Paginator</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">tp</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{tp}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">cp</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{cp}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">); it(`Total = ${tp}, Current = ${cp}`, () =&gt; { expect(wrapper).toMatchSnapshot(); }); ...</span></span></code> </pre> <br>  Chaque fois que le test est <b>ex√©cut√©, toMatchSnapshot ()</b> compare deux instantan√©s: <u>attendu</u> (qui a √©t√© pr√©c√©demment √©crit sur le disque) et <u>actuel</u> (qui a √©t√© obtenu pendant le test actuel). <br><br>  Si les images sont identiques, le test est consid√©r√© comme r√©ussi.  S'il y a une diff√©rence dans les images, le test est consid√©r√© comme non r√©ussi et l'utilisateur voit la diff√©rence entre les deux images sous forme de diff (comme dans les syst√®mes de contr√¥le de version). <br><br>  Voici un exemple de sortie Jest lorsque le test √©choue.  Ici, nous voyons que nous avons un bouton suppl√©mentaire dans l'image actuelle. <br><br><img src="https://habrastorage.org/webt/e2/3j/z1/e23jz1uhhisouenvdsl-64gsz3y.jpeg"><br><br>  Dans cette situation, l'utilisateur doit d√©cider quoi faire.  Si des modifications de l'instantan√© sont pr√©vues en raison de modifications du code du composant, il doit remplacer l'ancien instantan√© par un nouveau.  Et si les modifications sont inattendues, vous devez rechercher un probl√®me dans votre code. <br><br>  Je vais donner un exemple complet pour tester un paginateur (fichier <b>Paginator.test.js</b> ). <br><br>  Pour des tests de paginateur plus pratiques, j'ai cr√©√© une fonction <b>snapshoot (tp, cp)</b> qui prendra deux param√®tres: le nombre total de pages et la page actuelle.  Cette fonction effectuera un test avec les param√®tres donn√©s.  Il ne reste plus qu'√† appeler la fonction <b>snapshoot ()</b> avec diff√©rents param√®tres (m√™me en boucle) et tester, tester ... <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { configure, render } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'enzyme'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Adapter <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'enzyme-adapter-react-16'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Paginator <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Paginator'</span></span>; configure({ <span class="hljs-attr"><span class="hljs-attr">adapter</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Adapter() }); describe(<span class="hljs-string"><span class="hljs-string">'Paginator'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> snapshoot = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tp, cp</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> wrapper = render(<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Paginator</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">tp</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{tp}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">cp</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{cp}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">); it(`Total = ${tp}, Current = ${cp}`, () =&gt; { expect(wrapper).toMatchSnapshot(); }); } snapshoot(0, 0); snapshoot(1, -1); snapshoot(1, 1); snapshoot(2, 2); snapshoot(3, 1); for (let cp = 1; cp </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">10</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">cp</span></span></span></span><span class="xml"><span class="hljs-tag">++) { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">snapshoot</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">10</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">cp</span></span></span></span><span class="xml"><span class="hljs-tag">); } });</span></span></span></span></code> </pre> <br><h2>  Pourquoi aviez-vous besoin d'un g√©n√©rateur de rapport suppl√©mentaire </h2><br>  Lorsque j'ai commenc√© √† travailler avec cette technologie de test, le sentiment d'une approche initiale inachev√©e ne m'a pas quitt√©.  Apr√®s tout, les images ne peuvent √™tre vues que sous forme de texte. <br><br>  Mais que se passe-t-il si un composant produit beaucoup de code HTML lors du rendu?  Voici un composant paginateur √† 3 boutons.  Un instantan√© d'un tel composant ressemblera √† ceci: <br><br><pre> <code class="javascript hljs">exports[<span class="hljs-string"><span class="hljs-string">`Paginator Total = 1, Current = -1 1`</span></span>] = <span class="hljs-string"><span class="hljs-string">` &lt;div class="Paginator" &gt; &lt;button class="Button" &gt; ‚Üê &lt;/button&gt; &lt;button class="Button" &gt; 1 &lt;/button&gt; &lt;button class="Button" &gt; ‚Üí &lt;/button&gt; &lt;/div&gt; `</span></span>;</code> </pre><br>  Vous devez d'abord vous assurer que la version d'origine du composant est rendue correctement.  Il n'est pas tr√®s pratique de le faire simplement en affichant le code HTML sous forme de texte.  Mais ce ne sont que trois boutons.  Et si vous avez besoin de tester, par exemple, une table ou quelque chose d'encore plus volumineux?  De plus, pour un test complet, vous devez voir de nombreuses photos.  Ce sera assez g√™nant et difficile. <br><br>  Ensuite, si le test √©choue, vous devez comprendre en quoi l'apparence des composants diff√®re.  Les diff√©rences de leur code HTML, bien s√ªr, vous permettront de comprendre ce qui a chang√©, mais encore une fois, la possibilit√© de voir personnellement la diff√©rence ne sera pas superflue. <br><br>  En g√©n√©ral, j'ai pens√© que cela serait n√©cessaire pour que les images puissent √™tre visualis√©es dans le navigateur sous la m√™me forme que dans l'application.  Y compris avec les styles qui leur sont appliqu√©s.  J'ai donc eu l'id√©e d'am√©liorer le processus de test des instantan√©s en √©crivant un g√©n√©rateur de rapport suppl√©mentaire pour Jest. <br><br>  Pour l'avenir, c'est ce que j'ai.  Chaque fois que j'ex√©cute les tests, mon g√©n√©rateur met √† jour le livre d'instantan√©s.  Directement dans le navigateur, vous pouvez visualiser les composants tels qu'ils apparaissent dans l'application, ainsi que regarder imm√©diatement le code source des images et des diff√©rences (si le test √©choue). <br><br><img src="https://habrastorage.org/webt/vp/pu/kk/vppukk7dddohnzz29gtrkylhsxi.gif"><br><br><h2>  G√©n√©rateurs de rapports Jest </h2><br>  Les cr√©ateurs de Jest ont fourni la possibilit√© d'√©crire des cr√©ateurs de rapports suppl√©mentaires.  Cela se fait comme suit.  Vous devez √©crire un module sur Node.JS qui doit avoir une ou plusieurs de ces m√©thodes: <b>onRunStart</b> , <b>onTestStart</b> , <b>onTestResult</b> , <b>onRunComplete</b> , qui correspondent √† divers √©v√©nements de la progression du test. <br><br>  Ensuite, vous devez connecter votre module dans la configuration Jest.  Il existe une directive sp√©ciale pour les <b>journalistes</b> √† cet effet.  Si vous souhaitez inclure votre g√©n√©rateur en plus, vous devez l'ajouter √† la fin du tableau des <b>rapporteurs</b> . <br><br>  Apr√®s cela, Jest appellera les m√©thodes de votre module √† certaines √©tapes de l'ex√©cution du test, en transmettant les r√©sultats actuels aux m√©thodes.  En fait, le code de ces m√©thodes devrait cr√©er les rapports suppl√©mentaires dont vous avez besoin.  Donc, en termes g√©n√©raux, la cr√©ation de g√©n√©rateurs de rapports suppl√©mentaires ressemble. <br><br><h2>  Comment fonctionne Jest-snapshots-book </h2><br>  Je n'ins√®re pas sp√©cifiquement le code du module dans l'article, car je vais encore l'am√©liorer.  Il se trouve sur mon GitHub, c'est le <a href="">fichier src / index.js</a> sur la page du projet. <br><br>  Mon g√©n√©rateur de rapports est appel√© √† la fin des tests.  J'ai mis le code dans la <b>m√©thode onRunComplete (contextes, r√©sultats)</b> .  Cela fonctionne comme suit. <br><br>  Dans la propri√©t√© <b>results.testResults</b> , le Jest transmet un tableau de r√©sultats de test √† cette fonction.  Chaque r√©sultat de test comprend un chemin d'acc√®s au fichier de test et un tableau de messages avec les r√©sultats.  Mon g√©n√©rateur de rapports recherche chaque fichier de test avec un fichier d'instantan√© correspondant.  Si un fichier d'instantan√© est d√©tect√©, le g√©n√©rateur de rapports cr√©e une page HTML dans le livre d'instantan√©s et l'√©crit dans le dossier livre d'instantan√©s du dossier racine du projet. <br><br>  Pour g√©n√©rer une page HTML, le g√©n√©rateur de rapports, √† l'aide de la fonction r√©cursive <b>grabCSS (moduleName, css = [], level = 0),</b> collecte tous les styles, en commen√ßant par le composant test√© et en descendant l'arborescence de tous les composants qu'il importe.  Ainsi, la fonction collecte tous les styles n√©cessaires pour que le composant s'affiche correctement.  Les styles collect√©s sont ajout√©s √† la page HTML du livre d'instantan√©s. <br><br>  J'utilise des modules CSS dans mes projets, donc je ne sais pas si cela fonctionnera si les modules CSS ne sont pas utilis√©s. <br><br>  Si le test r√©ussit, le g√©n√©rateur ins√®re une iFrame dans la page HTML avec l'image dans deux options d'affichage: le code source (l'image telle qu'elle est) et le composant apr√®s le rendu.  L'option d'affichage dans iFrame est modifi√©e en cliquant avec la souris. <br><br>  Si le test n'a pas √©t√© r√©ussi, alors tout est plus compliqu√©.  Jest ne fournit dans ce cas que le message qu'il affiche dans la console (voir la capture d'√©cran ci-dessus). <br><br>  Il contient des diff√©rences et des informations suppl√©mentaires sur l'√©chec du test.  En fait, dans ce cas, nous avons essentiellement affaire √† deux images: l' <u>attendu</u> et l' <u>actuel</u> .  Si nous avons celui attendu - il est stock√© sur le disque dans le dossier des instantan√©s, alors l'instantan√© Jest actuel ne le fournit pas. <br><br>  Par cons√©quent, j'ai d√ª √©crire du code qui applique la diff√©rence Jest prise √† partir du message √† l'instantan√© attendu et cr√©e un instantan√© r√©el bas√© sur l'attendu.  Apr√®s cela, le g√©n√©rateur affiche √† c√¥t√© de l'iFrame l'instantan√© iFrame attendu de l'instantan√© actuel, qui peut changer son contenu entre trois options: le code source, le composant apr√®s le rendu, diff. <br><br>  Voici √† quoi ressemble la sortie du g√©n√©rateur de rapports si vous lui d√©finissez l'option verbose = true. <br><br><img src="https://habrastorage.org/webt/qz/pd/4h/qzpd4hduqakenbx8vjhonggjgso.jpeg"><br><br><h2>  Liens utiles </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Jest-snapshots-book</a> </li><li>  <a href="">Code source du module</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Options de rendu enzymatique</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Test d'instantan√©s</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Reporters Jest config directive</a> </li></ul><br><h2>  PS </h2><br>  Le test d'instantan√© ne suffit pas pour tester compl√®tement une application React.  Il ne couvre que le rendu de vos composants.  Il est √©galement n√©cessaire de tester leur fonctionnement (r√©actions aux actions des utilisateurs, par exemple).  Cependant, le test d'instantan√©s est un moyen tr√®s pratique de s'assurer que vos composants s'affichent comme pr√©vu.  Et jest-snapshots-book rend le processus un peu plus facile. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr421647/">https://habr.com/ru/post/fr421647/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr421631/index.html">Courte critique du PC portable Lenovo ThinkPad X1 Carbon (2018): l√©ger, confortable et puissant</a></li>
<li><a href="../fr421633/index.html">Comment faire un standard en 10 jours</a></li>
<li><a href="../fr421637/index.html">Montre pour enfants avec GPS d'ici le 1er septembre: √† quoi vous pouvez pr√™ter attention</a></li>
<li><a href="../fr421639/index.html">Ordinateur portable chinois Jumper EZBook X4 - clavier r√©tro√©clair√© et la nouvelle plate-forme Gemini Lake</a></li>
<li><a href="../fr421643/index.html">Artisanat - √† la biblioth√®que</a></li>
<li><a href="../fr421649/index.html">¬´Top 3D Expo. Digital Education 2018 ¬ª21 septembre au Technopolis Moscou</a></li>
<li><a href="../fr421653/index.html">Aper√ßu et dispositif des compteurs √©lectriques modernes</a></li>
<li><a href="../fr421655/index.html">Ing√©nieurs Jetpack: Alexander Fedorovich Andreev</a></li>
<li><a href="../fr421657/index.html">Croissance continue JSON</a></li>
<li><a href="../fr421659/index.html">Comment Microsoft a oubli√© la moiti√© du monde ou lu des messages d'erreur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>