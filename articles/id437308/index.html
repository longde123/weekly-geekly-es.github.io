<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👫 👫 👩🏿‍🎨 SDL 2.0 Siklus Pelajaran: Pelajaran 4 - Menangani Acara 📒 🧕🏻 ❎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dari penerjemah: 

 Ini adalah kelanjutan dari serangkaian terjemahan tutorial Twinklebear, yang awalnya tersedia di sini . Terjemahan ini sebagian gr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SDL 2.0 Siklus Pelajaran: Pelajaran 4 - Menangani Acara</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437308/"><img src="https://habrastorage.org/getpro/habr/post_images/f5d/0d7/06a/f5d0d706a7ba63af9b903584ea96e187.png" alt="SDL2"><br><br>  <i>Dari penerjemah:</i> <i><br><br></i>  <i>Ini adalah kelanjutan dari serangkaian terjemahan tutorial Twinklebear, yang awalnya tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> .</i>  <i>Terjemahan ini sebagian gratis dan mungkin berisi sedikit perubahan atau tambahan dari penerjemah.</i>  <i>Terjemahan dari dua pelajaran pertama ditulis oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">InvalidPointer</a> .</i>  <i>Gambar-gambar dari artikel asli dilokalkan dengan pelestarian gaya penulis maksimum.</i> <br><a name="habracut"></a><br>  <b>Daftar pelajaran:</b> <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pelajaran 1. Hello World!</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pelajaran 2. Jangan isi semua hal dalam utama</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pelajaran 3. Perpustakaan Ekstensi SDL</a> </li><li>  <b>Pelajaran 4. Penanganan Acara</b> </li><li>  Pelajaran 5-6 - Bersambung </li></ul><br><br><h2>  Penanganan acara </h2><br>  Dalam pelajaran ini, kita akan belajar dasar-dasar untuk mendapatkan input pengguna, dan untuk kesederhanaan, kita akan menganggap setiap tindakan pengguna sebagai upaya untuk <strike>melarikan diri</strike> untuk menghentikan program.  SDL menggunakan struktur SDL_Event dan fungsi ekstraksi peristiwa dari antrian acara, seperti SDL_PollEvent, untuk mengambil informasi tentang peristiwa.  Kode yang ditulis sebagai bagian dari pelajaran ini didasarkan pada hasil dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pelajaran sebelumnya</a> . <br><br>  Tapi pertama-tama, mari kita ubah gambar di tengah layar sehingga pengguna yang pertama kali melihat program Anda memahami apa yang dilakukannya dan apa yang diperlukan. <br><br><img src="https://habrastorage.org/webt/1_/k7/na/1_k7naqu695aypcoqghnlegv3ws.png"><br>  <i><font color="gray">Penulis Man disimpan</font></i> <br><br><h3>  Loop utama paling sederhana </h3><br>  Kami akan menambahkan <b>loop utama</b> ke program, yang akan membuat program bekerja sampai pengguna ingin keluar (dan memberitahukan program tentang hal itu dalam bentuk yang dapat diakses, tentu saja), alih-alih penundaan yang tetap, seperti dalam pelajaran sebelumnya.  Berikut ini perkiraan struktur dari siklus seperti itu: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!quit) <span class="hljs-comment"><span class="hljs-comment">//   ,  : { //       //  -   }</span></span></code> </pre> <br><br><h3>  Antrian Acara SDL </h3><br>  Untuk menggunakan sistem acara SDL dengan benar, kita membutuhkan setidaknya pemahaman minimal tentang fungsinya.  Ketika SDL menerima suatu peristiwa dari sistem operasi, ia menempatkannya di akhir antrian, setelah semua peristiwa lain yang diterima sebelumnya, tetapi belum diekstraksi dari program.  Jika, setelah memulai program, kami akan mengubah ukuran jendela secara bergantian, klik dan klik tombol, antrian acara akan terlihat seperti ini: <br><img src="https://habrastorage.org/webt/af/ry/zd/afryzdfjn3xxwb40fmovvcyhp7m.png"><br><br>  Ketika kami memanggil SDL_PollEvent, kami mendapatkan acara dari awal antrian, yang tertua dari yang tersisa.  Menerima acara dari antrian menggunakan SDL_PollEvent menghapusnya dari sana, untuk menghindari ini, Anda dapat "mengintip" acara menggunakan fungsi SDL_PeepEvents dengan set flag SDL_PEEKEVENT.  Anda dapat membaca lebih lanjut tentang fungsi ini dalam dokumentasi, itu tidak akan diperlukan dalam kerangka artikel ini (dan Anda kemungkinan besar juga akan) dan karena itu tidak akan dipertimbangkan. <br><br><h3>  Penanganan acara </h3><br>  Di loop utama, kami ingin menerima semua acara yang tersedia yang muncul setelah frame sebelumnya dibuat, dan memprosesnya.  Untuk melakukan ini, cukup masukkan SDL_PollEvent dalam kondisi loop sementara, karena mengembalikan 1 jika menerima acara, dan 0 jika tidak ada yang menerima.  Karena semua yang dilakukan oleh program adalah menyelesaikan pekerjaannya di bawah peristiwa tertentu, itu akan cukup untuk menggunakan variabel boolean (bool berhenti), menunjukkan apakah kita ingin mengakhiri program atau tidak dan menetapkan nilainya menjadi true ketika peristiwa ini diterima. <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// e -    SDL_Event,       while (SDL_PollEvent(&amp;e)) { //      if (e.type == SDL_QUIT) { quit = true; } //       if (e.type == SDL_KEYDOWN) { quit = true; } //     if (e.type == SDL_MOUSEBUTTONDOWN) { quit = true; } }</span></span></code> </pre><br><br>  Loop ini harus ditempatkan di dalam loop utama aplikasi. <br>  Kejadian tipe SDL_QUIT terjadi ketika pengguna menutup jendela, SDL_KEYDOWN ketika tombol ditekan pada keyboard (dan muncul berkali-kali saat dipegang, mirip dengan bagaimana huruf diulang sambil memegang kunci saat mencetak teks), dan peristiwa tipe SDL_MOUSEBUTTONDOWN terjadi ketika klik mouse.  Ini hanya beberapa peristiwa yang dapat diterima aplikasi Anda - dan secara total, SDL dapat menerima lebih dari 20 jenis peristiwa, yang tentu saja tidak dapat dibahas oleh artikel ini, oleh karena itu Anda harus membacanya di dokumentasi untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SDL_Event</a> <br><br><h3>  Penyelesaian siklus utama </h3><br>  Kami telah menyelesaikan pemrosesan acara, tetapi dalam loop utama, satu bagian lagi tidak ada - tampilan adegan.  Kami telah mempertimbangkan topik ini dalam pelajaran sebelumnya, tetap hanya menerapkan pengetahuan ini, dan siklus utama akan mengambil bentuk berikut: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   SDL_Event e; //   bool quit = false; while (!quit) { //   while (SDL_PollEvent(&amp;e)) { if (e.type == SDL_QUIT) { quit = true; } if (e.type == SDL_KEYDOWN) { quit = true; } if (e.type == SDL_MOUSEBUTTONDOWN) { quit = true; } } //   SDL_RenderClear(renderer); renderTexture(image, renderer, x, y); SDL_RenderPresent(renderer); }</span></span></code> </pre><br><br>  Program ini akan bekerja selamanya.  Ya, atau setidaknya sampai pengguna dengan <strike>sopan</strike> memintanya untuk berhenti.  Setelah memulai program, menekan tombol dengan tanda silang, menekan tombol apa saja pada keyboard, atau mengklik mouse di dalam jendela harus mengarah pada penyelesaian pekerjaannya.  Dan sampai saat itu, dia hanya akan terus-menerus menggambar ulang isi jendela. <br><br>  <i>Tambahan dari penerjemah: program dalam bentuk yang kemungkinan besar akan mengkonsumsi semua sumber daya prosesor yang tersedia, memuat satu inti sepenuhnya.</i>  <i>Ini akan menjadi rasional untuk menambahkan penundaan kecil (1-5 ms) pada akhir siklus utama menggunakan SDL_Delay, sehingga tanpa adanya acara, program membebaskan prosesor untuk program lain.</i>  <i>Ini tidak berlaku untuk gim berat, yang sudah membutuhkan semua sumber daya yang tersedia, ketika pada 100fps menghabiskan 100 ms setiap detik untuk menunggu adalah kemewahan yang tidak diizinkan.</i> <br><br><h3>  Akhir dari pelajaran keempat </h3><br>  Jadi pelajaran selanjutnya berakhir.  Sampai jumpa di pelajaran 5: Pengambilan sampel dari atlas tekstur <br><br>  <b>Pekerjaan rumah:</b> coba tambahkan gerakan gambar, misalnya, menggunakan panah. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id437308/">https://habr.com/ru/post/id437308/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id437296/index.html">Mengapa orang tidak menggunakan metode formal?</a></li>
<li><a href="../id437298/index.html">Tentang seorang pria</a></li>
<li><a href="../id437300/index.html">10 keterampilan dan pengetahuan yang diperlukan untuk pengembang iOS pemula</a></li>
<li><a href="../id437304/index.html">Cara membeli kentang jika Anda buta warna</a></li>
<li><a href="../id437306/index.html">Keterampilan yang tidak jelas dibutuhkan oleh manajer produk</a></li>
<li><a href="../id437310/index.html">Batas Gradien CSS</a></li>
<li><a href="../id437312/index.html">Mengimplementasikan hot reload kode C ++ di Linux dan macOS: menggali lebih dalam</a></li>
<li><a href="../id437314/index.html">Enigma Italia: mesin kriptografi OMI</a></li>
<li><a href="../id437316/index.html">Institut Pengembangan Internet telah menyebutkan situs-situs yang mungkin terputus di RuNet sejak 1 Februari</a></li>
<li><a href="../id437318/index.html">Migrasi yang mulus (hampir) antara rilis PostgreSQL besar menggunakan replikasi logis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>