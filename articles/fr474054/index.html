<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤸🏼 🌫️ 🕵🏾 Webinaire ouvert "Fondamentaux de MongoDB" 😍 🥜 👧🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Amis, le prochain lancement du cours sur les bases de données aura lieu demain, nous avons donc organisé une leçon traditionnelle ouverte, dont vous p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Webinaire ouvert "Fondamentaux de MongoDB"</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/474054/">  <i>Amis, le prochain lancement du cours sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les bases de données</a> aura lieu demain, nous avons donc organisé une leçon traditionnelle ouverte, dont vous pouvez voir un enregistrement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .</i>  <i>Cette fois, nous avons parlé de la base de données populaire MongoDB: nous avons étudié certaines des subtilités, examiné les bases du travail, les fonctionnalités et l'architecture.</i>  <i>Et aussi touché quelques cas d'utilisateurs.</i> <i><br><br><img src="https://habrastorage.org/webt/sx/2-/gr/sx2-grmgvwy-o08yp2jovyirre4.jpeg"><br><br></i>  <i>Le webinaire a été dirigé par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ivan Remen</a> , responsable du développement des serveurs chez Citimobil.</i> <br><hr><a name="habracut"></a><br><h3>  Caractéristiques de MongoDB </h3><br>  <b>MongoDB</b> est un système de gestion de base de données orienté document open source qui ne nécessite pas de description du schéma de table.  Il est classé comme NoSQL et utilise BSON (JSON binaire).  Mise à l'échelle, écrite en C ++ et prend en charge la syntaxe JavaScript.  Pas de support SQL. <br><br>  MongoDB possède des pilotes pour de nombreux langages de programmation populaires (C, C ++, C #, Go, Java, JavaScript, Perl, PHP, Python, Ruby, etc.).  Il existe également des pilotes non officiels et pris en charge par la communauté pour d'autres langages de programmation. <br><br>  Eh bien, regardons les commandes de base qui peuvent être utiles. <br><br>  <b>Donc, pour déployer MongoDB dans Docker</b> , nous écrivons: <br><br><pre><code class="bash hljs">docker run -it --rm -p 127.0.0.1:27017:27017 --name mongo-exp-project mongo docker <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> -it mongo-exp-project mongo</code> </pre> <br>  Ainsi, le <b>client</b> MongoDB <b>démarre</b> : <br><br><img src="https://habrastorage.org/webt/jz/to/mg/jztomgzelwv3sg-nux-dc423lja.jpeg"><br><br>  Maintenant, écrivons le traditionnel <b>Hello World</b> : <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (“Hello world!”)</code> </pre> <br><img src="https://habrastorage.org/webt/jo/7t/vn/jo7tvnxidl2lfb5bzcn-zu9wqyo.jpeg"><br><br>  Après cela, <b>exécutez la boucle</b> : <br><br><img src="https://habrastorage.org/webt/-7/jw/ea/-7jweaubyu6romt4twjtipbi5wa.jpeg"><br><br>  Comme vous l'avez remarqué, nous avons <b>régulièrement JS</b> devant nous <b>et MongoDB est un interpréteur JavaScript à part entière</b> . <br><br><h3>  Quand utiliser MongoDB? </h3><br>  Il y a une histoire selon laquelle la startup moyenne de la Silicon Valley est l'homme qui a ouvert le livre «HTML for Dummies» il y a une semaine.  Quelle pile choisira-t-il?  Vous devez admettre que cela lui est très pratique lorsqu'il a JavaScript dans son navigateur pour des raisons évidentes, Node.js s'exécute sur le serveur et JavaScript est également dans la base de données.  Ceci est le point numéro 1. <br><br>  Deuxièmement, il y a une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">excellente présentation de</a> Peter Zaitsev, l'un des meilleurs experts en bases de données en Russie.  Dans ce document, Peter parle de MySQL et MongoDB, en se concentrant sur le moment et ce qui est le mieux à utiliser. <br><br>  Troisièmement, je tiens à souligner que MongoDB se caractérise par une bonne <b>évolutivité</b> - et c'est l'une des principales caractéristiques de la base de données.  Si vous ne savez pas à l'avance quelle sera la charge, MongoDB est parfait.  De plus, il prend en charge des modèles <b>prêts</b> à l' <b>emploi</b> comme le <b>partitionnement</b> et la <b>réplication</b> , et tout cela est rendu assez transparent, c'est-à-dire qu'il est très pratique de travailler. <br><br>  Quant à la <b>terminologie</b> dans MongoDB, alors: <br><br><ul><li>  les bases sont des bases (schémas, une totalité de tables); </li><li>  dans MongoDB, il existe une <b>collection</b> - c'est un analogue d'un tableau et d'un ensemble de documents qui, selon la logique des choses, devraient être connectés; </li><li>  les documents sont un analogue d'une ligne. </li></ul><br><h3>  Création de base de données et requêtes simples </h3><br>  Pour créer une base de données, il vous suffit de commencer à l'utiliser: <br><br><pre> <code class="bash hljs">use learn</code> </pre> <br><img src="https://habrastorage.org/webt/td/hy/90/tdhy90yakxehjtfbjegccw27lfc.jpeg"><br><br>  Faites maintenant une petite insertion du document.  Que ce soit, par exemple, une licorne nommée Aurora: <br><br><pre> <code class="bash hljs">db.unicorns.insert({name: <span class="hljs-string"><span class="hljs-string">'Aurora'</span></span>, gender: <span class="hljs-string"><span class="hljs-string">'f'</span></span>, weight: 450})</code> </pre> <br>  <b>db</b> est un objet global d'accès à la base de données, c'est-à-dire en fait la «monga» elle-même.  Pour le sharding, <b>sh est</b> utilisé; pour la réplication, <b>rs est utilisé</b> . <br><br>  Quelles sont les commandes de l'objet <b>db</b> : <br><br><img src="https://habrastorage.org/webt/_9/kh/o_/_9kho_1yywo-7uqvglreimpwd_8.jpeg"><br><br>  Donc, revenons à notre équipe, à la suite de quoi la console signalera qu'une ligne est insérée: <br><br><img src="https://habrastorage.org/webt/ud/ke/qs/udkeqsk3bfngttzs2p_nyw4a6ju.jpeg"><br><br>  Le mot <code>unicorns</code> dans la <code>db.unicorns.insert({name: 'Aurora', gender: 'f', weight: 450})</code> signifie une collection.  Veuillez noter ici que nous n'avons pas décrit ou créé la collection, mais simplement écrit «licornes», fait un insert et nous avons obtenu une collection. <br><br>  Et ainsi nous pouvons <b>obtenir toutes nos collections</b> : <br><br><pre> <code class="bash hljs">db.getCollectionNames()</code> </pre> <br>  Eh bien et ainsi de suite.  Nous pouvons <b>insérer une autre</b> collection: <br><br><img src="https://habrastorage.org/webt/pd/zx/qn/pdzxqnt0hgfowtjxd20iydadd3u.jpeg"><br><br>  Et maintenant, nous allons demander une <b>collection complète</b> (nous rappelons que dans notre cas, la base de données contient déjà des informations sur deux licornes du même nom): <br><br><pre> <code class="bash hljs">db.unicorns.find()</code> </pre> <br>  Veuillez noter, voici notre JSON (il y a un nom, un sexe, un poids, un identifiant unique de l'objet): <br><br><img src="https://habrastorage.org/webt/54/ow/75/54ow75y40hhp-ticbi6l1bcssw8.jpeg"><br><br>  Insérons maintenant quelques licornes supplémentaires du même nom: <br><br><pre> <code class="bash hljs">db.unicorns.insert({name: <span class="hljs-string"><span class="hljs-string">'Leto'</span></span>, gender: <span class="hljs-string"><span class="hljs-string">'m'</span></span>, home: <span class="hljs-string"><span class="hljs-string">'Arrakeen'</span></span>, worm: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}) db.unicorns.insert({name: <span class="hljs-string"><span class="hljs-string">'Leto'</span></span>, gender: <span class="hljs-string"><span class="hljs-string">'m'</span></span>, home: <span class="hljs-string"><span class="hljs-string">'Arrakeen'</span></span>, worm: <span class="hljs-literal"><span class="hljs-literal">false</span></span>})</code> </pre> <br>  Et voyons ce qui s'est passé: <br><br><img src="https://habrastorage.org/webt/zq/ku/vl/zqkuvlfg21n3_pmigl7m6trfud0.jpeg"><br><br>  Comme vous pouvez le voir, nous avons des champs supplémentaires: <b>home</b> et <b>worm</b> , qu'Aurora n'a pas. <br><br>  Ajoutez quelques licornes supplémentaires: <br><br><pre> <code class="bash hljs">db.unicorns.insertMany([{name: <span class="hljs-string"><span class="hljs-string">'Horny'</span></span>, dob: new Date(1992,2,13,7,47), loves: [<span class="hljs-string"><span class="hljs-string">'carrot'</span></span>,<span class="hljs-string"><span class="hljs-string">'papaya'</span></span>], weight: 600, gender: <span class="hljs-string"><span class="hljs-string">'m'</span></span>, vampires: 63}, {name: <span class="hljs-string"><span class="hljs-string">'Aurora'</span></span>, dob: new Date(1991, 0, 24, 13, 0), loves: [<span class="hljs-string"><span class="hljs-string">'carrot'</span></span>, <span class="hljs-string"><span class="hljs-string">'grape'</span></span>], weight: 450, gender: <span class="hljs-string"><span class="hljs-string">'f'</span></span>, vampires: 43}, {name: <span class="hljs-string"><span class="hljs-string">'Unicrom'</span></span>, dob: new Date(1973, 1, 9, 22, 10), loves: [<span class="hljs-string"><span class="hljs-string">'energon'</span></span>, <span class="hljs-string"><span class="hljs-string">'redbull'</span></span>], weight: 984, gender: <span class="hljs-string"><span class="hljs-string">'m'</span></span>, vampires: 182}, {name: <span class="hljs-string"><span class="hljs-string">'Roooooodles'</span></span>, dob: new Date(1979, 7, 18, 18, 44), loves: [<span class="hljs-string"><span class="hljs-string">'apple'</span></span>], weight: 575, gender: <span class="hljs-string"><span class="hljs-string">'m'</span></span>, vampires: 99}])</code> </pre> <br>  Nous avons donc inséré quatre autres objets en utilisant JavaScript: <br><br><img src="https://habrastorage.org/webt/ni/uq/wl/niuqwlicbep2agmmqgkxlsl2obg.jpeg"><br><br>  Dans quelles bases de données pensez-vous qu'il est plus pratique de stocker les données de passeport: dans des bases de données relationnelles ou en mong? <br><br>  La réponse est évidente - en mong, et l'exemple ci-dessus le montre bien.  Ce n'est un secret pour personne que KLADR est une douleur dans la Fédération de Russie.  Et le monga tombe très bien sur les adresses, car vous pouvez tout spécifier comme un tableau, et ce sera beaucoup plus facile à vivre.  Et c'est un bon <b>cas d'utilisation pour MongoDB</b> . <br><br>  Ajoutez plus de licornes: <br><br><pre> <code class="bash hljs">db.unicorns.insert({name: <span class="hljs-string"><span class="hljs-string">'Solnara'</span></span>, dob: new Date(1985, 6, 4, 2, 1), loves:[<span class="hljs-string"><span class="hljs-string">'apple'</span></span>, <span class="hljs-string"><span class="hljs-string">'carrot'</span></span>, <span class="hljs-string"><span class="hljs-string">'chocolate'</span></span>], weight:550, gender:<span class="hljs-string"><span class="hljs-string">'f'</span></span>, vampires:80}); db.unicorns.insert({name:<span class="hljs-string"><span class="hljs-string">'Ayna'</span></span>, dob: new Date(1998, 2, 7, 8, 30), loves: [<span class="hljs-string"><span class="hljs-string">'strawberry'</span></span>, <span class="hljs-string"><span class="hljs-string">'lemon'</span></span>], weight: 733, gender: <span class="hljs-string"><span class="hljs-string">'f'</span></span>, vampires: 40}); db.unicorns.insert({name:<span class="hljs-string"><span class="hljs-string">'Kenny'</span></span>, dob: new Date(1997, 6, 1, 10, 42), loves: [<span class="hljs-string"><span class="hljs-string">'grape'</span></span>, <span class="hljs-string"><span class="hljs-string">'lemon'</span></span>], weight: 690, gender: <span class="hljs-string"><span class="hljs-string">'m'</span></span>, vampires: 39}); db.unicorns.insert({name: <span class="hljs-string"><span class="hljs-string">'Raleigh'</span></span>, dob: new Date(2005, 4, 3, 0, 57), loves: [<span class="hljs-string"><span class="hljs-string">'apple'</span></span>, <span class="hljs-string"><span class="hljs-string">'sugar'</span></span>], weight: 421, gender: <span class="hljs-string"><span class="hljs-string">'m'</span></span>, vampires: 2}); db.unicorns.insert({name: <span class="hljs-string"><span class="hljs-string">'Leia'</span></span>, dob: new Date(2001, 9, 8, 14, 53), loves: [<span class="hljs-string"><span class="hljs-string">'apple'</span></span>, <span class="hljs-string"><span class="hljs-string">'watermelon'</span></span>], weight: 601, gender: <span class="hljs-string"><span class="hljs-string">'f'</span></span>, vampires: 33}); db.unicorns.insert({name: <span class="hljs-string"><span class="hljs-string">'Pilot'</span></span>, dob: new Date(1997, 2, 1, 5, 3), loves: [<span class="hljs-string"><span class="hljs-string">'apple'</span></span>, <span class="hljs-string"><span class="hljs-string">'watermelon'</span></span>], weight: 650, gender: <span class="hljs-string"><span class="hljs-string">'m'</span></span>, vampires: 54}); db.unicorns.insert({name: <span class="hljs-string"><span class="hljs-string">'Nimue'</span></span>, dob: new Date(1999, 11, 20, 16, 15), loves: [<span class="hljs-string"><span class="hljs-string">'grape'</span></span>, <span class="hljs-string"><span class="hljs-string">'carrot'</span></span>], weight: 540, gender: <span class="hljs-string"><span class="hljs-string">'f'</span></span>}); db.unicorns.insert({name: <span class="hljs-string"><span class="hljs-string">'Dunx'</span></span>, dob: new Date(1976, 6, 18, 18, 18), loves: [<span class="hljs-string"><span class="hljs-string">'grape'</span></span>, <span class="hljs-string"><span class="hljs-string">'watermelon'</span></span>], weight: 704, gender: <span class="hljs-string"><span class="hljs-string">'m'</span></span>, vampires: 165});</code> </pre> <br><img src="https://habrastorage.org/webt/xp/ca/_n/xpca_noi3_eewunygplsma3a6qk.jpeg"><br><br>  Faites maintenant attention aux documents.  En tant que <b>dob</b> , nous stockons des objets entiers.  Et il y a aussi des informations que la licorne aime, et tout le monde n'a pas ces données.  Ainsi, l'intérieur est un <b>tableau complet</b> . <br><br>  Par ailleurs, pour une sortie plus belle, vous pouvez appeler la méthode <code>.pretty()</code> à la fin de la commande de recherche: <br><br><img src="https://habrastorage.org/webt/qc/86/rg/qc86rgjozt225q6gwk3nln4kaew.jpeg"><br><br>  Si vous devez obtenir des <b>informations sur la dernière erreur</b> , utilisez la commande suivante: <br><br><pre> <code class="bash hljs">db.getLastError()</code> </pre> <br>  Cela peut être fait après chaque insertion, ou vous pouvez configurer Write Concern.  Il est préférable de lire à ce sujet dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation officielle</a> , qui, soit dit en passant, est très informative en mong.  À propos, il y a aussi un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bon article</a> sur ce sujet. <br><br><h3>  Passer à des requêtes plus complexes </h3><br>  <b>Demande de valeur de champ exacte:</b> <br><br><pre> <code class="bash hljs">db.unicorns.find({gender: <span class="hljs-string"><span class="hljs-string">'m'</span></span>})</code> </pre> <br>  En écrivant une telle demande, nous obtenons dans la sortie sur la console une liste de toutes les licornes mâles. <br><br>  Vous pouvez également exécuter la <b>requête immédiatement dans plusieurs champs</b> : par sexe et par poids: <br><br><img src="https://habrastorage.org/webt/5m/fv/cu/5mfvcuvnge7bfck_iuslb3nchda.jpeg"><br><br>  Ci-dessus, faites attention au <b>sélecteur</b> spécial <b>$ gt</b> , qui vous permet d'afficher toutes les licornes mâles pesant plus de 700. <br><br>  Vous pouvez vérifier <b>si le champ existe</b> : <br><br><pre> <code class="bash hljs">db.unicorns.find({vampires: {<span class="hljs-variable"><span class="hljs-variable">$exists</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}})</code> </pre> <br>  Ou alors: <br><br><pre> <code class="bash hljs">db.unicorns.find({<span class="hljs-string"><span class="hljs-string">'parents.father'</span></span>: {<span class="hljs-variable"><span class="hljs-variable">$exists</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}})</code> </pre> <br>  La commande suivante affiche les licornes dont les <b>noms commencent par les lettres A ou a:</b> <br><br><pre> <code class="bash hljs">db.unicorns.find({name: {<span class="hljs-variable"><span class="hljs-variable">$regex</span></span>: <span class="hljs-string"><span class="hljs-string">"^[Aa]"</span></span>}})</code> </pre> <br>  Voyons maintenant une <b>recherche dans un tableau</b> .  Question numéro 1: quelle sera la sortie de cette commande: <br><br><pre> <code class="bash hljs">db.unicorns.find({loves:<span class="hljs-string"><span class="hljs-string">'apple'</span></span>})</code> </pre> <br>  C'est vrai: tous ceux qui aiment les pommes. <br><br>  La commande suivante renverra uniquement les données de licorne qui <b>ne</b> contiennent <b>que des pommes et des pastèques:</b> <br><br><pre> <code class="bash hljs">db.unicorns.find({loves:[ <span class="hljs-string"><span class="hljs-string">"apple"</span></span>, <span class="hljs-string"><span class="hljs-string">"watermelon"</span></span> ]})</code> </pre> <br>  Et encore une commande: <br><br><pre> <code class="bash hljs">db.unicorns.find({loves:[ <span class="hljs-string"><span class="hljs-string">"watermelon"</span></span>, <span class="hljs-string"><span class="hljs-string">"apple"</span></span> ]})</code> </pre> <br>  Dans notre cas, il ne retournera rien, car lorsque nous passons un tableau, le premier élément est comparé au premier, le second au second, etc. C'est-à-dire que le tableau doit également coïncider <b>dans les positions de</b> ces valeurs. <br><br>  Et voici à quoi ressemble une <b>recherche dans</b> un <b>tableau</b> à l' <b>aide de l'opérateur OR</b> : <br><br><img src="https://habrastorage.org/webt/bq/7w/jj/bq7wjjlkqc6ginsf3h3xful1fp8.jpeg"><br><br>  L'exemple suivant nous montrera une <b>recherche utilisant l'opérateur $ all</b> .  Et ici, la séquence est déjà sans principes: <br><br><img src="https://habrastorage.org/webt/1e/fl/3t/1efl3te8tdjvnmhigrrodnp9ces.jpeg"><br><br>  Nous pouvons également <b>rechercher par la taille du tableau:</b> <br><br><img src="https://habrastorage.org/webt/dh/ia/rj/dhiarjanv17ixwbwrzjdqyjfdgw.jpeg"><br><br>  Mais que se passe-t-il si nous voulons trouver un tableau supérieur à un?  Il y a un opérateur <b>$ where</b> pour cela, avec lequel vous pouvez écrire des choses plus complexes: <br><br><pre> <code class="bash hljs">db.unicorns.find({<span class="hljs-variable"><span class="hljs-variable">$where</span></span>: <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">function</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">return</span></span> this.loves &amp;&amp; (this.loves.length &gt; 1) } })</code> </pre> <br>  Au fait, si vous voulez vous entraîner, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voici un</a> fichier avec des commandes. <br><br><h3>  Caractéristiques du curseur </h3><br>  Écartons-nous un peu et disons quelques mots sur les caractéristiques de monga: <br><br><ul><li>  find () et d'autres opérations ne renvoient pas de données - elles renvoient le soi-disant "curseur"; </li><li>  ce que nous voyons lorsque les données sont imprimées est le travail de l'interprète. </li></ul><br>  En tapant <b>db.unicorns.find</b> sans parenthèses, nous obtenons un indice: <br><br><img src="https://habrastorage.org/webt/0s/ar/iy/0sariyefxtiuz19de2rieo8zt00.jpeg"><br><br><h3>  Nous continuons à répondre aux demandes </h3><br>  <b>Il y a aussi l'opérateur $ in:</b> <br><br><pre> <code class="bash hljs">db.unicorns.find({weight: {<span class="hljs-variable"><span class="hljs-variable">$in</span></span>: [650, 704]}})</code> </pre> <br><img src="https://habrastorage.org/webt/zl/72/zu/zl72zu58hlfixg8bjl4grd-osxq.jpeg"><br><br>  <b>Parlons maintenant de la mise à jour</b> .  Par exemple, changeons le poids des Roooooodles de licorne: <br><br><pre> <code class="bash hljs">db.unicorns.update({name: <span class="hljs-string"><span class="hljs-string">"Roooooodles"</span></span>}, {weight: 2222})</code> </pre> <br>  À la suite de nos actions, le document <b>sera complètement mis à jour</b> et un seul champ spécifié y restera: <br><br><img src="https://habrastorage.org/webt/zk/-i/p7/zk-ip7aduwxpw_nhqme-ladyy8s.jpeg"><br><br>  Autrement dit, la seule chose qui reste avec notre objet est le poids de 2222 et, bien sûr, id. <br><br>  Vous pouvez résoudre ce problème avec <b>$ set</b> : <br><br><pre> <code class="bash hljs">db.unicorns.update({_id: ObjectId(<span class="hljs-string"><span class="hljs-string">"5da6ea4d9703b8be0089e6db"</span></span>)}, {<span class="hljs-variable"><span class="hljs-variable">$set</span></span>: { <span class="hljs-string"><span class="hljs-string">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"Roooooodles"</span></span>, <span class="hljs-string"><span class="hljs-string">"dob"</span></span> : ISODate(<span class="hljs-string"><span class="hljs-string">"1979-08-18T18:44:00Z"</span></span>), <span class="hljs-string"><span class="hljs-string">"loves"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"apple"</span></span> ], <span class="hljs-string"><span class="hljs-string">"gender"</span></span> : <span class="hljs-string"><span class="hljs-string">"m"</span></span>, <span class="hljs-string"><span class="hljs-string">"vampires"</span></span> : 99}})</code> </pre> <br><br><img src="https://habrastorage.org/webt/ad/hq/jc/adhqjczlthw_wu81_2jqb9gxnro.jpeg"><br><br>  Il est également possible d' <b>incrémenter des valeurs</b> : <br><br><img src="https://habrastorage.org/webt/fb/w9/pj/fbw9pjxmzfr_vfls6jshqhhda0i.jpeg"><br><br>  Il existe également <b>upsert</b> - une combinaison de mise à jour et d'insertion: <br><br><img src="https://habrastorage.org/webt/d_/mf/yr/d_mfyrplzfsf9_hs5izjshl2vmw.jpeg"><br><br>  Et voici comment <b>sélectionner des champs</b> : <br><br><img src="https://habrastorage.org/webt/tv/wh/gr/tvwhgr6sd8puyxqur66dloianna.jpeg"><br><br><img src="https://habrastorage.org/webt/zr/st/c5/zrstc599ywafkk1t5p2chunhtao.jpeg"><br><br>  Reste à ajouter quelques mots sur les <b>sauts</b> et <b>limites</b> : <br><br><img src="https://habrastorage.org/webt/n5/ih/iy/n5ihiygbx7gnhmpndif_nxlv3ls.jpeg"><br><br>  Chers collègues, c'est tout, si vous voulez connaître les détails, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">regardez l'intégralité de la vidéo</a> .  Et n'oubliez pas de laisser vos commentaires! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr474054/">https://habr.com/ru/post/fr474054/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr474042/index.html">Compétition! Histoires à la lumière de serveurs vacillants ...</a></li>
<li><a href="../fr474046/index.html">Séminaires sur les services cloud, l'IA, la blockchain, la science des données, les microservices: maintenant à Moscou et à Saint-Pétersbourg</a></li>
<li><a href="../fr474048/index.html">HILDACRYPT: un nouveau ransomware frappe les systèmes de sauvegarde et les solutions antivirus</a></li>
<li><a href="../fr474050/index.html">Vous ne pouvez pas simplement prendre et exécuter votre application si vous êtes la star de l'industrie musicale</a></li>
<li><a href="../fr474052/index.html">Panier de difficulté pour le voyageur</a></li>
<li><a href="../fr474062/index.html">Compter l'argent. Choisir une métrique dans la notation du crédit</a></li>
<li><a href="../fr474068/index.html">VM ou Docker?</a></li>
<li><a href="../fr474070/index.html">Dispositifs de salle de réunion BYOD</a></li>
<li><a href="../fr474076/index.html">Comment devenir le meilleur au monde dans une niche</a></li>
<li><a href="../fr474080/index.html">Bot télégramme montrant les premières pages des 10 périodiques mondiaux les plus populaires</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>