<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüíº üëêüèΩ ü§≠ Plasma Cash Chain comme solution au trilemme d'√©volutivit√© de la blockchain üëáüèΩ üß§ üö±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, chers lecteurs! 

 Cet article concerne la cha√Æne de paiement au plasma et met en lumi√®re les sujets suivants: 



- le trilemme d'√©volutivit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Plasma Cash Chain comme solution au trilemme d'√©volutivit√© de la blockchain</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457518/">  Bonjour, chers lecteurs! <br><br>  Cet article concerne la cha√Æne de paiement au plasma et met en lumi√®re les sujets suivants: <br><br><ul><li>  le trilemme d'√©volutivit√© et les m√©thodes de sa solution; </li><li>  les structures de donn√©es de la cha√Æne enfant et leur affichage dans la cha√Æne racine; </li><li>  mise en ≈ìuvre de l'apport √† la cha√Æne racine; </li><li>  mise en ≈ìuvre du retrait de la cha√Æne racinaire. </li></ul><br>  Opporty a utilis√© le langage de programmation Javascript pour impl√©menter la cha√Æne enfant, ainsi que Solidity pour la cha√Æne racine.  Des exemples de code sont fournis dans ces langues. <br><br><img src="https://habrastorage.org/webt/qd/nd/dv/qdnddvdk76wf5sy2ajwn38jp9w0.jpeg"><br><a name="habracut"></a><br>  La blockchain et la d√©centralisation permettent d'optimiser et d'am√©liorer le travail de presque tous les domaines de la vie o√π Internet et les technologies de l'information sont utilis√©s.  Ils augmentent la fiabilit√©, l'efficacit√© financi√®re et facilitent √©galement la num√©risation des biens et des biens r√©els. <br><br>  Les contrats intelligents apportent une logique m√©tier aux r√©seaux d√©centralis√©s.  Cela vous permet de cr√©er de nouvelles applications DAPP. <br><br>  L'ex√©cution de contrats intelligents et le fonctionnement rapide d'applications avec une base de donn√©es distribu√©e ne peuvent √™tre possibles que si la condition d'√©volutivit√© est remplie. <br><br>  Les blockchains d√©centralis√©es modernes pr√©sentent plusieurs inconv√©nients.  Le principal est l'√©volutivit√©.  Ethereum traite environ 20 tx / s.  Cela ne suffit pas dans les r√©alit√©s financi√®res modernes.  Dans le m√™me temps, Ethereum offre le plus haut degr√© de protection possible contre le piratage et les pannes de r√©seau.  D'autres crypto-monnaies et syst√®mes construits sur la blockchain n'ont pas un degr√© de d√©centralisation aussi √©lev√©, ce qui r√©duit la confiance dans le r√©seau. <br><br><h2>  Le trilemme d'√©volutivit√© </h2><br>  Il existe un trilemme d'√©volutivit√© de la blockchain qui comprend trois composants: <br><br><ul><li>  d√©centralisation; </li><li>  la s√©curit√© </li><li>  √©volutivit√©. </li></ul><br><h3>  La d√©centralisation dans le trilemme </h3><br>  La d√©centralisation, comme son nom l'indique, refl√®te le degr√© de diversification de la propri√©t√© de l'activit√© dans la blockchain, ainsi que le degr√© de diversification de la cr√©ation de blocs et de la g√©n√©ration de nouvelles √©critures. <br><br>  Pour plus de clart√©, il est n√©cessaire de parler des organisations les plus centralis√©es.  Habituellement, une simple base de donn√©es est utilis√©e √† la place de la blockchain.  Une telle organisation est dirig√©e par des administrateurs sp√©ciaux.  Toutes les transactions peuvent √™tre annul√©es par intervention manuelle. <br><br>  Dans les r√©seaux enti√®rement d√©centralis√©s, chaque utilisateur peut participer √† la construction d'un r√©seau. <br><br>  La cons√©quence la plus importante de la d√©centralisation est que la plus grande partie de la valeur va √† la communaut√© impliqu√©e dans la cr√©ation de la blockchain.  Il n'y a pas d'√©quipe interm√©diaire de gestionnaires qui re√ßoivent tous les avantages au lieu de ceux qui g√©n√®rent la structure du r√©seau elle-m√™me.  En fait, la plupart des projets de cryptographie appartiennent enti√®rement √† leurs contributeurs ou utilisateurs, et non aux fondateurs.  C'est √©videmment un mod√®le plus attractif pour ceux qui ne sont pas fondateurs. <br><br><h3>  La s√©curit√© dans le trilemme </h3><br>  Il s'agit de la capacit√© de la blockchain √† r√©sister aux attaques de sources externes et √† garder le syst√®me dans un √©tat inchang√©.  La plupart des cha√Ænes de blocs sont soumises √† de nombreuses menaces de s√©curit√© potentielles.  Il est imp√©ratif de conna√Ætre les vecteurs d'attaque et les options de d√©fense les plus courants. <br><br>  Dans ce cas, d√©centralisation et s√©curit√© vont de pair.  Plus il y a de n≈ìuds, moins le r√©seau d√©pend du c√¥t√© centralis√© et donc du risque d'avoir un point de d√©faillance central.  Cependant, de nombreux autres vecteurs d'attaque constituent une menace pour les r√©seaux d√©centralis√©s, notamment: <br>  &gt; <b>50% d'attaque</b> - un objet qui poss√®de plus de 50% du nombre total de jetons non pay√©s poss√®de r√©ellement le r√©seau; <br>  &gt; <b>Sybil Attack</b> - l'utilisateur peut g√©n√©rer de nombreux identifiants dans le syst√®me pour contr√¥ler efficacement une part importante de la propri√©t√© et / ou de la prise de d√©cision sur le r√©seau; <br>  &gt; <b>DDoS</b> - une attaque par d√©ni de service distribu√© (DDoS) se produit lorsqu'il existe une intention de perturber le trafic sur le r√©seau, remplissant le r√©seau de transactions malveillantes; <br>  &gt; <b>Attaque de collusion</b> - un ou plusieurs objets (ou n≈ìuds) d√©cident de s'unir pour effectuer toute op√©ration malveillante sur le r√©seau. <br><br><h3>  √âvolutivit√© dans le trilemme </h3><br>  Le degr√© d'√©volutivit√© est important car il d√©termine le d√©bit ultime, en d'autres termes, la limite sup√©rieure de la taille du r√©seau.  La question la plus importante √† poser lors de l'√©valuation d'un r√©seau est: ¬´Combien d'utilisateurs ce syst√®me peut-il supporter?¬ª  Bitcoin compte actuellement entre 2,9 et 5,8 millions de d√©tenteurs de portefeuille.  EOS compte plusieurs milliers de membres. <br><br>  L'√©volutivit√© et la d√©centralisation peuvent coexister, mais la s√©curit√© est r√©duite.  Les d√©veloppeurs choisissent les plateformes qui r√©pondent le mieux √† leurs besoins.  Les utilisateurs font de m√™me.  Les opinions des deux c√¥t√©s diff√®rent parfois.  Certains utilisateurs sont pr√™ts √† sacrifier la s√©curit√© pour l'√©volutivit√©, d'autres sont pr√™ts √† sacrifier l'√©volutivit√© pour la s√©curit√©, mais l'√©quilibrage est beaucoup plus difficile. <br><br><h2>  ¬´Holy Graal¬ª dans la technologie de la blockchain </h2><br>  Par d√©finition, une blockchain n'a que deux des trois propri√©t√©s suivantes: <br><br><ul><li>  <b>D√©centralisation</b> (chaque participant n'a acc√®s qu'aux ressources d'O ¬©, c'est-√†-dire √† un ordinateur portable ordinaire ou √† un petit VPS); </li><li>  <b>√âvolutivit√©</b> (capacit√© √† traiter les transactions O (n)&gt; O ¬©); </li><li>  <b>S√©curit√©</b> (protection contre les intrus utilisant des ressources O (n)). </li></ul><br><img src="https://habrastorage.org/webt/ek/zg/zr/ekzgzredr00odj5mwae4f549hzs.png"><br>  Vert: Un √©tat √©quilibr√© de trois conditions. <br>  Rouge: forte s√©curit√© mais d√©centralisation et √©volutivit√© limit√©es. <br>  Bleu: l'efficacit√© est √©lev√©e, mais la s√©curit√© et la d√©centralisation sont limit√©es. <br>  Noir: la d√©centralisation est √©lev√©e, mais il n'y a aucun aspect d'√©volutivit√© et de s√©curit√©. <br>  Gris: d√©centralisation compl√®te, avec des qualit√©s de s√©curit√© et d'√©volutivit√© minimales ou manquantes. <br>  Violet: un √©quilibre √©gal entre s√©curit√© et √©volutivit√©, le rejet de la d√©centralisation. <br><br>  Le ¬´Saint-Graal¬ª dans la technologie de la blockchain signifie combiner les trois aspects. <br>  Dans la plupart des projets actuels utilisant des crypto-monnaies, deux propri√©t√©s de base sont atteintes: la d√©centralisation et la s√©curit√©.  L'√©volutivit√© en souffre. <br><br><h2>  Des solutions prometteuses au trilemme </h2><br><h3>  Preuve de participation (PoS) </h3><br>  Proof of Stake (PoS) offre des am√©liorations d'√©volutivit√© potentielles.  POS remplace l'extraction de crypto-monnaie bas√©e sur le syst√®me Proof of Work (PoW).  Le choix du validateur est tr√®s rapide - de mani√®re d√©terministe.  En m√™me temps, il n'y a pas de co√ªt √©nerg√©tique et il est respectueux de l'environnement. <br><br><h3>  Sidechains </h3><br>  Dans le r√©seau virtuel Ethereum, il est possible de cr√©er un r√©seau secondaire dans lequel le projet peut traiter ses transactions individuelles, puis enregistrer uniquement les r√©sultats initiaux et finaux dans le r√©seau Ethereum.  Cela r√©duit la charge sur l'EVM, mais donne plus de confiance dans la gestion de la cha√Æne lat√©rale.  Ainsi, la confiance en un tiers r√©duit la d√©centralisation. <br><br><h3>  Partage </h3><br>  Le sharding divise les transactions en plus petites donn√©es.  Au lieu que chaque n≈ìud individuel du r√©seau traite des transactions enti√®res, les n≈ìuds sont divis√©s en groupes et ces groupes de n≈ìuds traitent certains √©l√©ments de donn√©es.  Plus tard, lors du traitement, ces donn√©es sont r√©assimil√©es pour un stockage permanent sur la blockchain. <br><br><h3>  Augmentez la taille du bloc </h3><br>  Litecoin et Bitcoin Cash (BCH) sont des ¬´fourchettes¬ª pour la blockchain Bitcoin.  Forker copie essentiellement une blockchain.  Apr√®s le branchement, vous pouvez apporter des modifications.  LTC et BCH ont augment√© la taille de chaque bloc, ce qui a permis de stocker plus de transactions par bloc, augmentant ainsi la vitesse de traitement des transactions. <br><br><h3>  R√©seau Lightning </h3><br>  La toute premi√®re solution de cha√Æne lat√©rale √©tait la foudre.  L'id√©e principale du Lightning Network est que toutes les transactions ne doivent pas √™tre enregistr√©es dans la blockchain, car cela surcharge le r√©seau.  Si les utilisateurs se transf√®rent des fonds plusieurs fois, l'enregistrement de chaque transfert est facultatif.  Il suffit d'ouvrir une sorte de canal de paiement et d'√©crire les donn√©es de son ouverture sur la blockchain.  Ce canal restera ouvert au besoin.  Lorsqu'il sera n√©cessaire de le fermer, le r√©sultat de toutes les transactions effectu√©es dans ce canal est simplement √©crit dans la blockchain.  En suivant cette id√©e, vous pouvez cr√©er tout un r√©seau de canaux de paiement.  Ensuite, les transactions sur la blockchain seront utilis√©es beaucoup moins fr√©quemment. <br><br>  Un canal de paiement n'est qu'une combinaison de plusieurs transactions.  Un canal peut √™tre ferm√© par n'importe lequel de ses membres.  Cette action sera comme ouvrir un coffre-fort, ce qui vous permet de prendre les fonds appartenant aux participants et de noter les donn√©es de leur transfert vers la blockchain. <br>  Cette technologie devient vraiment puissante lorsque plusieurs de ces canaux sont combin√©s en un r√©seau appel√© The Lightning Network.  Ce r√©seau est sp√©cialement con√ßu pour Bitcoin. <br><br><h3>  R√©seau Raiden </h3><br>  Pour Ethereum, l'homologue le plus connu de Lightning est le r√©seau Raiden. <br>  C'est une solution pour √©voluer en dehors de la blockchain principale.  Il est compatible avec le transfert de jetons ERC-20 dans les canaux de paiement bidirectionnels. <br><br>  Son architecture de base est complexe, mais l'interaction avec Raiden n√©cessite que les d√©veloppeurs n'interagissent qu'avec l'API pour cr√©er des applications √©volutives sur Raiden. <br><br>  Raiden est con√ßu pour fournir des paiements instantan√©s et de faibles commissions, augmenter la confidentialit√© des transactions et les micropaiements.  La plupart des canaux de paiement existent en dehors du r√©seau et ne forment qu'occasionnellement des transactions au sein de la cha√Æne racine, ce qui r√©duit consid√©rablement le d√©bit de la cha√Æne enfant. <br><br><h2>  Solution optimale </h2><br>  Les id√©ologues de la foudre ont cr√©√© un nouveau concept de cha√Æne d'enfant qui r√©sout les probl√®mes de vitesse de la cha√Æne de blocs. <br><br>  Opporty met pratiquement en ≈ìuvre le concept de Plasma et Plasma Cash. <br><br>  Le plasma est un ensemble de contrats intelligents qui s'ex√©cutent au sommet de la cha√Æne racine Ethereum et se composent d'un r√©seau de cha√Ænes enfants connect√©es √† la cha√Æne racine dans une structure arborescente hi√©rarchique. <br><br>  En d'autres termes, la s√©curit√© de la cha√Æne racine Ethereum est utilis√©e pour optimiser l'√©volutivit√©. <br><br><h2>  Plasma Cash: Option Opporty </h2><br>  <b>Opporty utilise l'impl√©mentation de Plasma Cash dans la premi√®re version.</b> <br><br>  Ce mod√®le est l'impl√©mentation plasma la plus efficace en termes d'√©volutivit√©. <br>  Plasma Cash est un syst√®me bas√© sur l'utilisation d'identifiants uniques pour chaque jeton de la cha√Æne Plasma.  Autrement dit, le NFT est appliqu√© et les jetons du r√©seau re√ßoivent des num√©ros de s√©rie uniques. <br><br>  Caract√©ristiques de Plasma Cash: <br><br><ul><li>  Validation fragment√©e c√¥t√© client - les clients ont juste besoin de surveiller leur cha√Æne Plasma pour obtenir leurs jetons.  Cela signifie que le d√©bit des transactions peut augmenter sans augmenter la charge des utilisateurs individuels. </li><li>  Simplification des sorties de masse - les sorties de masse deviennent moins une menace pour le r√©seau, car le voleur doit soumettre une transaction de sortie pour chaque jeton qu'il veut voler. </li><li>  Aucune confirmation bidirectionnelle - les transactions ne n√©cessitent plus l'envoi et la confirmation en deux √©tapes.  Au lieu de cela, une transaction peut √™tre d√©pens√©e d√®s qu'elle est incluse dans la cha√Æne principale. </li></ul><br>  Inconv√©nient: <br><br>  Grandes coupures de jetons - √©tant donn√© que chaque jeton doit se voir attribuer un num√©ro de s√©rie, il est impossible de produire des jetons arbitrairement petits.  Cela est d√ª au fait qu'√† un moment donn√©, la valeur de l'achat du jeton sera sup√©rieure √† la valeur du jeton lui-m√™me. <br><br><h3>  Structure des transactions dans Opporty Plasma Cash </h3><br>  Opporty a utilis√© Javascript pour impl√©menter la cha√Æne d'enfant.  Chaque transaction dans Opporty Plasma Cash est une structure similaire: <br><br><pre><code class="plaintext hljs">const transactionFields = [ {name: 'prevHash'}, {name: 'prevBlock', int: true, default: 0}, {name: 'tokenId', isDecimal: true}, {name: 'newOwner'}, {name: 'type'}, {name: 'signature'}, ]</code> </pre> <br>  Les principaux √©l√©ments ici sont un lien vers le bloc pr√©c√©dent prevBlock (il est n√©cessaire de se d√©placer dans la cha√Æne de blocs), l'identificateur de jeton tokenId (il doit √™tre unique), ainsi que newOwner, le dernier propri√©taire du jeton. <br><br>  De plus, afin d'assembler le bloc et d'obtenir le hachage de la cha√Æne racine, un type sp√©cial de l'arbre Patricia Merkle Trie est utilis√©.  Le m√™me arbre est utilis√© dans Ethereum.  Il a un aspect compress√©.  Dans le m√™me temps, vous pouvez toujours recevoir des preuves d'inclusion ou de non-inclusion d'une transaction dans un bloc. <br>  La signature est une signature sur les courbes elliptiques. <br><br>  Une transaction d√©pensant un jeton avec un tokenId donn√© n'est valide que si elle est incluse dans l'arborescence Merkle dans la position tokenId, c'est-√†-dire que pour chaque jeton dans l'arborescence Merkle, il n'y a qu'un seul ¬´endroit¬ª d√©pensant ce jeton o√π les transactions sont autoris√©es.  Ce format permet aux utilisateurs de v√©rifier l'historique complet de la cha√Æne Plasma, ainsi que de prouver et de r√©futer la propri√©t√© de jetons sp√©cifiques. <br><br>  Afin de d√©penser un jeton, vous devez valider la cha√Æne, v√©rifier qu'il n'y a pas de blocs manquants et ensuite re-signer la transaction avec tout l'historique. <br><br>  Le bloc est le suivant: <br><br><pre> <code class="plaintext hljs">const blockFields = [ {name: 'prevHash'}, {name: 'blockNum', isDecimal: true}, {name: 'transactions'}, {name: 'merkleRoot'}, {name: 'time'} ]</code> </pre> <br>  √Ä un niveau de base, une blockchain est simplement une cha√Æne de blocs avec un lien vers le bloc pr√©c√©dent.  Une telle structure permet d'obtenir la propri√©t√© d'immuabilit√©, c'est-√†-dire de ne pas r√©√©crire l'histoire.  merkleRoot permet d'√©crire des points de contr√¥le dans la cha√Æne racine. <br><br>  Dans la cha√Æne racine, au niveau du contrat intelligent, cela ressemble √† ceci (langage Solidity): <br><br><pre> <code class="plaintext hljs">/* * Block structure (represents one block in a chain) */ struct Block { uint block_num; bytes32 merkle_root; uint time; /* * Transaction structure (decoded from RLP form) */ struct Transaction { bytes32 prevhash; uint prev_block; uint token_id; address new_owner; }</code> </pre><br>  L'encodage est effectu√© √† l'aide des fonctions d'encodage / d√©codage - s√©rialisation / d√©s√©rialisation RLP. <br><br><h3>  Fa√ßons d'entrer Plasma Cash </h3><br>  N'importe qui peut d√©poser des fonds dans Plasma Cash simplement en transf√©rant de l'√©ther dans un contrat intelligent.  Par cons√©quent, un jeton OPP sera re√ßu √† une position tokenId sp√©cifique. <br><br>  Voici l'impl√©mentation dans Solidity: <br><br><pre> <code class="plaintext hljs">function deposit() public payable { uint token_id = uint(keccak256(msg.sender, msg.value, deposit_blk)); // token.index = deposit_blk; tokens[token_id] = msg.value; deposit_blk += 1; emit DepositAdded(msg.sender, msg.value, token_id, current_blk); }</code> </pre> <br>  Autrement dit, tokenId est g√©n√©r√© sous la forme d'un nombre al√©atoire (hachage).  Ensuite, un √©v√©nement est g√©n√©r√© qui est analys√© dans la cha√Æne enfant. <br><br><h3>  Fa√ßons de se retirer sur Plasma Cash </h3><br>  Chaque personne peut retirer son jeton en fournissant les deux derni√®res transactions dans l'historique de propri√©t√© du jeton. <br><br>  Mise en ≈ìuvre de la sortie de la cha√Æne racine: <br><br><pre> <code class="plaintext hljs">function startExit(uint block_num, bytes tx1, bytes tx0, bytes proof1, bytes proof0) public returns (uint exit_id) { require(checkPatriciaProof(keccak256(tx1), childChain[block_num].merkle_root, proof1)); bytes32 prev_hash; uint prev_blk; uint token_id; address new_owner; (prev_hash, prev_blk, token_id, new_owner,) = getTransactionFromRLP(tx1); require(msg.sender == new_owner); require(tokens[token_id] &gt; 0); bytes32 hashPrevTx = keccak256(tx0); require(checkPatriciaProof(hashPrevTx, childChain[prev_blk].merkle_root, proof0)); require(prev_hash == hashPrevTx); Exit storage record = exitRecords[token_id]; require(record.block_num == 0); record.block_num = block_num; record.new_owner = msg.sender; record.prev_block = prev_blk; if (childChain[block_num].time &gt; block.timestamp - week) record.priority = childChain[block_num].time; else record.priority = block.timestamp - week; exits.add(record.priority); exit_ids[record.priority].push(token_id); emit ExitAdded(msg.sender, record.priority, token_id); return token_id; }</code> </pre><br>  Tout d'abord, deux transactions sont v√©rifi√©es.  Si l'utilisateur actuel est le propri√©taire de la transaction, nous ajoutons simplement sa sortie √† la structure et laissons deux semaines pour l'opportunit√© de contester la sortie. <br><br>  La conclusion peut √™tre contest√©e de trois mani√®res: <br><br><ul><li>  Confirmation des d√©penses sur les transactions: </li></ul><br><pre> <code class="plaintext hljs">function challengeSpent(uint exit_id, uint blk_num, bytes tx1, bytes proof) public { require(checkPatriciaProof(keccak256(tx1), childChain[blk_num].merkle_root, proof)); Exit memory record = exitRecords[exit_id]; require(record.block_num &gt; 0); uint prev_block; uint token_id; (, prev_block , token_id, ) = getTransactionFromRLP(tx1); require(tokens[token_id] &gt; 0); require(prev_block == record.block_num &amp;&amp; record.block_num &lt; blk_num); require(token_id == exit_id); exit_ids[record.priority].remove(exit_id); delete exitRecords[exit_id]; emit ExitChallengedEvent(exit_id); }</code> </pre><br>  S'il y a une transaction qui d√©pense d√©j√† le jeton affich√©, alors un tel retrait sera annul√©! <br><br><ul><li>  Preuve des d√©penses de la transaction pr√©c√©dente: </li></ul><br><pre> <code class="plaintext hljs">/* * Challenge exit by providing * a proof of a transaction spending P(C) that appears before C */ function challengeDoubleSpend(uint exit_id, uint blk_num, bytes tx1, bytes proof) public { require(checkPatriciaProof(keccak256(tx1), childChain[blk_num].merkle_root, proof)); Exit memory record = exitRecords[exit_id]; require(record.block_num &gt; 0); // bytes32 prev_hash; uint prev_block; uint token_id; (, prev_block , token_id, ) = getTransactionFromRLP(tx1); require(tokens[token_id] &gt; 0); // check if token double spent require(prev_block == record.prev_block &amp;&amp; blk_num &lt; record.block_num); // require(token_id == exit_id); exit_ids[record.priority].remove(exit_id); delete exitRecords[exit_id]; emit ExitChallengedEvent(exit_id); }</code> </pre><br>  Il s'agit du m√™me contr√¥le que si le jeton avait √©t√© d√©pens√© avant le retrait.  Tout d'abord, recherchez une transaction dans le hachage racine.  Ensuite, nous supprimons la sortie si elle a d√©j√† √©t√© d√©pens√©e. <br><br><ul><li>  fournir une transaction dans l'historique des transactions du jeton qui le pr√©c√®de. </li></ul><br>  Cela peut √™tre une mauvaise histoire, vous devez donc la confirmer avec une transaction enfant: <br><br><pre> <code class="plaintext hljs">// */ function challengeInvalidHistory(uint exit_id, uint blk_num, bytes tx0, bytes proof) public { // check if proof is valid require(checkPatriciaProof(keccak256(tx0), childChain[blk_num].merkle_root, proof)); Exit memory record = exitRecords[exit_id]; require(record.block_num &gt; 0); bytes32 prev_hash; uint token_id; (prev_hash, , token_id, ) = getTransactionFromRLP(tx0); //require(exit_id == token_id); require(tokens[token_id] &gt; 0); // transaction should be before exit tx in history require(blk_num &lt; record.block_num - 1); challenged[exit_id] = blk_num; emit ChallengedInvalidHistory(exit_id, token_id); }</code> </pre><br>  L'appel du premier et du deuxi√®me script bloque imm√©diatement la sortie. <br><br>  L'appel au troisi√®me sc√©nario peut √™tre r√©pondu en fournissant un descendant direct.  Elle doit √™tre √©gale ou ant√©rieure √† la transaction parent. <br><br><pre> <code class="plaintext hljs">/* * Respond to invalid history challenge by providing * the direct child of C*, which must be either equal to or before P( C ) */ function respondChallenge(uint exit_id, uint blk_num, bytes childtx, bytes proof) public { require(challenged[exit_id] &gt; 0); Exit memory record = exitRecords[exit_id]; require(record.block_num &gt; 0); require(checkPatriciaProof(keccak256(childtx), childChain[blk_num].merkle_root, proof)); // get transaction from rlpencoded form bytes32 prev_hash; uint prev_block; uint token_id; (prev_hash, prev_block, token_id, ) = getTransactionFromRLP(childtx); // if direct child if (prev_block == challenged[exit_id] ) { if (blk_num &lt;= record.prev_block &amp;&amp; token_id == exit_id ) { delete challenged[exit_id]; emit ExitRespondedEvent(exit_id); } else { exit_ids[record.priority].remove(exit_id); delete exitRecords[exit_id]; emit ExitChallengedEvent(exit_id); } } }</code> </pre><br>  Autrement dit, si la transaction enfant correcte est re√ßue, la sortie est contest√©e et reste dans la file d'attente! <br>  Apr√®s avoir construit une partie du protocole Opporty Plasma Cash, la conclusion suivante a √©t√© tir√©e: <br>  Ce protocole assure la s√©curit√© via la cha√Æne racine Ethereum. <br><br>  En compliquant les proc√©dures d'entr√©e et de sortie de la cha√Æne racine et la compression d'√©tat (blocs de transaction), toutes les m√©thodes de sortie et d'entr√©e dans la cha√Æne racine ont √©t√© prises en compte, et les structures de donn√©es de base: les transactions et les blocs ont √©t√© √©tudi√©s. <br><br>  En utilisant la cha√Æne lat√©rale bas√©e sur le r√©seau Ethereum, vous pouvez acc√©l√©rer consid√©rablement les transactions.  Opporty a re√ßu jusqu'√† <b>300 000</b> transactions par seconde sur un seul op√©rateur.  C'est bien plus que ce que les syst√®mes de paiement actuels peuvent offrir. <br><br>  Malgr√© certains probl√®mes de disponibilit√© des donn√©es, l'op√©rateur offre un haut niveau de stabilit√© de la blockchain et permet d'effectuer des transactions commerciales internationales efficaces. <br><br>  Plasma Cash apporte une √©norme augmentation de l'√©volutivit√©.  Par cons√©quent, Opporty utilise le plasma dans le cadre de son protocole PoE. <br><br><h3>  Liens utiles </h3><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Plasma papier blanc</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Git hub</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cas d'utilisation et description de l'architecture</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Papier r√©seau Lightning</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr457518/">https://habr.com/ru/post/fr457518/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr457504/index.html">Pourquoi √©crire votre grille de donn√©es React en 2019</a></li>
<li><a href="../fr457510/index.html">Utilisez mcrouter pour faire √©voluer horizontalement memcached</a></li>
<li><a href="../fr457512/index.html">R√©plication logique entre les versions de PostgreSQL</a></li>
<li><a href="../fr457514/index.html">Nevanger</a></li>
<li><a href="../fr457516/index.html">√âcrire un mod√®le de menace</a></li>
<li><a href="../fr457522/index.html">Augmentez votre service de liste de diffusion ou utilisez des solutions toutes faites? Ce que j'ai appris pendant 5 ans chez UniSender</a></li>
<li><a href="../fr457524/index.html">Cam√©ras de profondeur - r√©volution silencieuse (quand les robots verront) Partie 1</a></li>
<li><a href="../fr457526/index.html">Les m√©dias techniques comme bazar</a></li>
<li><a href="../fr457532/index.html">Il est grand temps de faire partie d'un projet open source</a></li>
<li><a href="../fr457534/index.html">Versions certifi√©es - le r√¢teau que nous choisissons</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>