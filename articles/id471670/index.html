<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìÄ üë©üèø‚Äçü§ù‚Äçüë®üèæ üîí Mencoba Jetpack Compose dalam pertempuran? ‚õπÔ∏è üëêüèΩ ‚ú°Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Akhirnya, saatnya telah tiba ketika Anda tidak perlu membangun Android Studio sendiri untuk mencoba kerangka UI deklaratif baru untuk Android. Jetpack...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mencoba Jetpack Compose dalam pertempuran?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471670/"><p>  Akhirnya, saatnya telah tiba ketika Anda tidak perlu membangun Android Studio sendiri untuk mencoba kerangka UI deklaratif baru untuk Android.  Jetpack Compose sekarang tersedia sebagai Pratinjau Dev pertama di Maven Repository Google.  Dengan berita ini, hari Senin pagi saya dimulai.  Dan segera ada keinginan untuk melihat seperangkat alat apa yang telah mereka tunggu-tunggu. </p><br><p><img src="https://habrastorage.org/webt/f6/rx/jt/f6rxjtulw6xjtuy4ydf2wo_wvcy.png"></p><a name="habracut"></a><br><p> Saya memutuskan untuk memulai kenalan saya segera dengan upaya untuk memperkenalkannya ke dalam proyek kesayangan yang diterbitkan di Google Play.  Apalagi di dalamnya sudah lama saya ingin membuat halaman "Tentang aplikasi".  Pada artikel ini saya akan berbicara tentang komponen utama dan langkah-langkah koneksi Compose: </p><br><ol><li>  Koneksi Ketergantungan </li><li>  Tema dan gaya.  Integrasi dengan yang ada dalam proyek. </li><li>  Tes aksesibilitas dan UI. </li><li>  Komponen utama dan analog dari pewaris View. </li><li>  Bekerja dengan Negara. </li></ol><br><h2 id="podklyuchenie-zavisimostey">  Koneksi Ketergantungan </h2><br><p>  Untuk memulai, saya memperbarui studio dari 3,5 ke 3.5.1 (sia-sia), menambahkan dependensi dasar.  Daftar lengkap dapat dilihat dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">artikel oleh Cyril</a> . </p><br><pre><code class="plaintext hljs">// build.gradle ext.compose_version= '0.1.0-dev01' //build.gradle  dependencies{ ... implementation "androidx.compose:compose-runtime:$compose_version" kapt "androidx.compose:compose-compiler:$compose_version" implementation "androidx.ui:ui-layout:$compose_version" implementation "androidx.ui:ui-android-text:$compose_version" implementation "androidx.ui:ui-text:$compose_version" implementation "androidx.ui:ui-material:$compose_version" }</code> </pre> <br><p>  Dan kemudian saya mencoba untuk mengumpulkan semua ini karena versi Firebase yang tersebar.  Setelah itu saya bertemu dengan Compose rintangan: </p><br><pre> <code class="plaintext hljs">app/src/main/AndroidManifest.xml Error: uses-sdk:minSdkVersion 16 cannot be smaller than version 21 declared in library [androidx.ui:ui-layout:0.1.0-dev01] .../ui-layout-0.1.0-dev01/AndroidManifest.xml as the library might be using APIs not available in 16 Suggestion: use a compatible library with a minSdk of at most 16, or increase this project's minSdk version to at least 21, or use tools:overrideLibrary="androidx.ui.layout" to force usage (may lead to runtime failures)</code> </pre> <br><p>  Ya, Tulisan hanya tersedia dengan minSdk 21 (Lolipop).  Mungkin ini adalah tindakan sementara, tetapi diharapkan untuk mendukung versi OS sebelumnya. </p><br><p>  Tapi itu belum semuanya.  Tulis karya tentang Refleksi, alih-alih Plugin Komplin Kotlin, seperti yang dinyatakan sebelumnya, misalnya, di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">sini</a> .  Oleh karena itu, agar semuanya dapat dimulai, Anda perlu menambahkan Refleksi Kotlin juga tergantung pada: </p><br><pre> <code class="plaintext hljs">implementation "org.jetbrains.kotlin:kotlin-reflect"</code> </pre> <br><p>  Nah, untuk pencuci mulut.  Tulis dp mengimplementasikan fungsi ekstensi untuk Int, Long, Float, yang ditandai dengan kata kunci sebaris.  Ini dapat menyebabkan kesalahan kompilasi baru: </p><br><pre> <code class="plaintext hljs">Cannot inline bytecode built with JVM target 1.8 into bytecode that is being built with JVM target 1.6. Please specify proper '-jvm-target' option * https://stackoverflow.com/questions/48988778/cannot-inline-bytecode-built-with-jvm-target-1-8-into-bytecode-that-is-being-bui</code> </pre> <br><p>  Untuk menyelesaikannya, Anda perlu mendaftarkan versi JVM untuk Kotlin secara eksplisit: </p><br><pre> <code class="plaintext hljs">android { ‚Ä¶ kotlinOptions { jvmTarget = "1.8" } }</code> </pre> <br><p>  Sepertinya hanya itu saja.  Jauh lebih mudah daripada membangun studio sendiri) </p><br><p>  Mari kita coba menjalankan Hello World (juga dari artikel Cyril, tetapi, tidak seperti dia, tambahkan Compose inside Fragment).  Tata letak untuk fragmen adalah FrameLayout kosong. </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(inflater: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">LayoutInflater</span></span></span></span><span class="hljs-function"><span class="hljs-params">, container: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ViewGroup</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: View? { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> fragmentView = inflater.inflate(R.layout.fragment_about, container, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) (fragmentView <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ViewGroup).setContent { Hello(<span class="hljs-string"><span class="hljs-string">"Jetpack Compose"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fragmentView } <span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Hello</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(name: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = MaterialTheme { FlexColumn { inflexible { <span class="hljs-comment"><span class="hljs-comment">// Item height will be equal content height TopAppBar&lt;MenuItem&gt;( // App Bar with title title = { Text("Jetpack Compose Sample") } ) } expanded(1F) { // occupy whole empty space in the Column Center { // Center content Text("Hello $name!") // Text label } } } }</span></span></code> </pre> <br><p>  Kami mulai, layar berikut ini ternyata: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sg/a2/rz/sga2rzwcg7bxeymvbmllijqxerg.jpeg" alt="gambar" width="300"></div><br><p>  Karena fakta bahwa Composable menggunakan tema Material default, kami mendapat AppBar ungu.  Yah, dan, seperti yang diharapkan, sama sekali tidak konsisten dengan tema aplikasi yang gelap: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kb/mb/2u/kbmb2u-8rl7v3snwlcz6gwwtjjk.jpeg" alt="gambar" width="300"></div><br><p>  Mari kita coba menyelesaikannya. </p><br><h2 id="temy-i-stili-integraciya-s-suschestvuyuschimi-v-proekte">  Tema dan gaya.  Integrasi dengan yang ada dalam proyek. </h2><br><p>  Untuk menggunakan style yang ada di dalam Composable, kami meneruskannya di dalam konstruktor MaterialTheme: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Hello</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(name: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = MaterialTheme(colors = MaterialColors( primary = resolveColor(context, R.attr.colorPrimary, MaterialColors().primary), secondary = resolveColor(context, R.attr.colorSecondary, MaterialColors().secondary), onBackground = resolveColor(context, R.attr.textColor, MaterialColors().onBackground) )){...}</code> </pre> <br><p>  MaterialTheme sendiri terdiri dari dua bagian: MaterialColors dan MaterialTypography. <br>  Untuk mengatasi warna, saya menggunakan pembungkus atas gaya: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resolveColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Context</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, </span></span><span class="hljs-meta"><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta">@AttrRes</span></span></span></span><span class="hljs-function"><span class="hljs-params"> attrRes: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, colorDefault: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Color</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = context?.let { Color(resolveThemeAttr(it, attrRes).<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>.toLong()) } ?: colorDefault <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resolveThemeAttr</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Context</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-meta"><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta">@AttrRes</span></span></span></span><span class="hljs-function"><span class="hljs-params"> attrRes: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: TypedValue { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> theme = context.theme <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> typedValue = TypedValue() theme.resolveAttribute(attrRes, typedValue, <span class="hljs-literal"><span class="hljs-literal">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> typedValue }</code> </pre> <br><p>  Pada tahap ini, AppBar akan berubah menjadi hijau.  Tetapi untuk mengecat teks, Anda perlu melakukan satu tindakan lagi: </p><br><pre> <code class="kotlin hljs">Text(<span class="hljs-string"><span class="hljs-string">"Hello </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$name</span></span></span><span class="hljs-string">!"</span></span>, style = TextStyle(color = +themeColor { onBackground }))</code> </pre> <br><p>  Tema diterapkan ke widget menggunakan operasi plus unary.  Kami masih akan melihatnya ketika bekerja dengan Negara. </p><br><p>  Sekarang layar baru terlihat seragam dengan sisa aplikasi di kedua varian tema: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4q/jy/en/4qjyenwrurz2agzupn9nfvlunmu.jpeg" alt="gambar" width="300"></div><br><p>  Tulis juga menemukan file DarkTheme.kt di sumber, fungsi yang dapat digunakan untuk menentukan berbagai pemicu untuk mengaktifkan tema gelap pada Android P dan 10. </p><br><h2 id="accessibility-i-ui-testy">  Tes aksesibilitas dan UI. </h2><br><p>  Sampai layar mulai tumbuh dengan elemen baru, mari kita lihat tampilannya di Inspektur Tata Letak dan dengan tampilan batas elemen dalam Mode Dev dihidupkan: </p><br><p><img src="https://habrastorage.org/webt/x8/ss/x-/x8ssx-qi79amnzbygwwakvfqno0.jpeg"></p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ik/l2/qv/ikl2qvufik8cwohrlat5oagyspq.jpeg" alt="gambar" width="300"></div><br><p>  Di sini kita akan melihat FrameLayout, di dalamnya hanya AndroidComposeView.  Alat yang ada untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pengujian</a> Accebility dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">UI</a> tidak lagi berlaku?  Mungkin alih-alih sekarang ada perpustakaan baru: <code>androidx.ui:ui-test</code> . </p><br><h2 id="osnovnye-komponenty-i-analogi-naslednikov-view">  Komponen utama dan analog dari pewaris View. </h2><br><p>  Sekarang mari kita coba membuat layar sedikit lebih informatif.  Pertama, ubah teks, tambahkan tombol yang mengarah ke halaman aplikasi di Google Play, dan gambar dengan logo.  Saya akan segera menunjukkan kode dan apa yang terjadi: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AboutScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = MaterialTheme(...) { FlexColumn { inflexible { TopAppBar&lt;MenuItem&gt;(title = { Text(getString(R.string.about)) }) } expanded(<span class="hljs-number"><span class="hljs-number">1F</span></span>) { VerticalScroller { Column { Image() Title() MyButton() } } } } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Center { Padding(<span class="hljs-number"><span class="hljs-number">16</span></span>.dp) { Container( constraints = DpConstraints( minWidth = <span class="hljs-number"><span class="hljs-number">96</span></span>.dp, minHeight = <span class="hljs-number"><span class="hljs-number">96</span></span>.dp ) ) { imageFromResource(resources, R.drawable.ic_launcher) } } } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Title</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Center { Padding(<span class="hljs-number"><span class="hljs-number">16</span></span>.dp) { Text(getString(R.string.app_name) + <span class="hljs-string"><span class="hljs-string">" "</span></span> + BuildConfig.VERSION_NAME, style = TextStyle(color = +themeColor { onBackground })) } } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyButton</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Center { Padding(<span class="hljs-number"><span class="hljs-number">16</span></span>.dp) { Button(getString(R.string.about_button), onClick = { openAppInPlayStore() }) } } }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xx/1o/so/xx1oso944katkc-q5li8ymbylz8.jpeg" alt="gambar" width="300"></div><br><p>  Prinsip dasar komposisi widget tidak berubah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sejak kemunculan pertama sumber Menulis</a> . </p><br><p>  Dari yang menarik: </p><br><ul><li>  Fungsi untuk menampilkan elemen individual tidak harus dianotasi dengan @Composable. </li><li>  Hampir semua properti untuk widget berubah menjadi widget terpisah (Pusat alih-alih android: gravitasi, Padding, bukan android: margin, ...) </li><li>  Saya tidak dapat menampilkan gambar dari drawables. </li><li>  Parameter onClick dari tombol bukan yang terakhir, karena itu tidak mungkin untuk meneruskannya sebagai lambda tanpa nama eksplisit, yang akan tampak lebih logis: <br><pre> <code class="kotlin hljs">Button(‚ÄúText<span class="hljs-string"><span class="hljs-string">"){ openAppInPlayStore() }</span></span></code> </pre> </li></ul><br><p>  Sekarang mari kita melihat ViewGroup utama yang ada dan mencoba mencari analog di Compose. </p><br><p>  Alih-alih FrameLayout, Anda bisa menggunakan Stack.  Semuanya sederhana di sini: widget anak tumpang tindih dan diposisikan tergantung pada fungsi yang digunakan untuk lampiran: selaras, diposisikan atau diperluas. </p><br><p>  LinearLayout segera diganti oleh dua widget: Kolom dan Baris alih-alih menggunakan parameter orientasi android:.  Mereka, pada gilirannya, mengandung FlexColumn dan FlexRow dengan lapisan fungsi tidak fleksibel di atas subtree bersarang.  Nah, FlexColumn dan FlexRow sendiri dibangun di atas Flex dengan <code>orientation = LayoutOrientation.Vertical</code> parameter <code>orientation = LayoutOrientation.Vertical</code> atau <code>Horizontal</code> . </p><br><p>  Hirarki serupa untuk widget FlowColumn, FlowRow, dan Flow.  Perbedaan utama mereka: jika konten tidak muat dalam satu kolom atau baris, yang berikutnya akan ditarik berikutnya, dan widget yang tertanam akan "mengalir" di sana.  Sulit bagi saya untuk membayangkan tujuan sebenarnya dari widget ini. </p><br><p>  Efek ScrollView dicapai dengan menempatkan Kolom atau Baris di dalam VerticalScroller atau HorizontalScroller.  Mereka berdua menulis di dalam Scroller, melewati parameter <code>isVertical = true</code> atau <code>false</code> . </p><br><p>  Dalam mencari analog untuk ConstraintLayout, atau setidaknya RelativeLayout menemukan widget Tabel baru.  Saya mencoba menjalankan kode sampel di aplikasi saya: <a href="" rel="nofollow">DataTableSamples.kt</a> .  Tetapi, karena saya tidak mencoba menyederhanakan contoh, itu tidak berhasil untuk membuatnya bekerja. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wg/2u/md/wg2umdhpscl3xm3ejubkgcqor-i.jpeg" alt="gambar" width="300"></div><br><h2 id="rabota-so-state">  Bekerja dengan Negara </h2><br><p>  Salah satu inovasi kerangka kerja yang paling dinanti adalah kesiapannya untuk digunakan dalam arsitektur searah yang dibangun atas dasar satu negara.  Dan ini seharusnya memperkenalkan anotasi @Model ke tag kelas yang menyediakan Negara untuk rendering UI. <br>  Pertimbangkan sebuah contoh: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">data</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DialogVisibleModel</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> visible: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dismissPushed: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span>) ... <span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SideBySideAlertDialogSample</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> openDialog = +state { DialogVisibleModel(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) } Button(text = <span class="hljs-string"><span class="hljs-string">"Ok"</span></span>, onClick = { openDialog.value = DialogVisibleModel(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) }) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (openDialog.value.visible) { AlertDialog( onCloseRequest = { <span class="hljs-comment"><span class="hljs-comment">// Because we are not setting openDialog.value to false here, // the user can close this dialog only via one of the buttons we provide. }, title = { Text(text = "Title") }, text = { Text("This area typically contains the supportive text" + " which presents the details regarding the Dialog's purpose.") }, confirmButton = { Button("Confirm", onClick = { openDialog.value = DialogVisibleModel(false) }) }, dismissButton = { if (!openDialog.value.dismissPushed) Button("Dismiss", onClick = { openDialog.value = DialogVisibleModel(true, true) }) else { //hidden } }, buttonLayout = AlertDialogButtonLayout.SideBySide ) } }</span></span></code> </pre> <br><p>  Ini menciptakan kelas data untuk model keadaan, dan tidak harus ditandai dengan penjelasan @Model. <br>  Status awal itu sendiri dibuat di dalam fungsi @Composable menggunakan status +. <br>  Visibilitas dialog ditentukan oleh properti terlihat dari model yang diperoleh dengan memanggil properti nilai. <br>  Properti ini juga dapat diatur ke objek abadi yang baru, seperti yang terjadi pada klik pada kedua tombol.  Yang pertama menyembunyikan dirinya sendiri, yang kedua - menutup dialog.  Dialog dapat dibuka kembali dengan mengklik tombol Ok, didefinisikan di dalam fungsi @Composable yang sama. <br>  Saat mencoba membuat status di luar fungsi ini, terjadi kesalahan: <br> <code>java.lang.IllegalStateException: Composition requires an active composition context.</code> <br>  Konteksnya dapat diperoleh dengan menetapkan nilai fungsi setContent {} di onCreateView, tetapi bagaimana menggunakannya, misalnya, di Presenter atau kelas lain selain Fragmen atau Aktivitas, untuk mengubah keadaan masih belum jelas. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/w2/b_/__/w2b___zoyd6ypgp5ji78dpppsqg.jpeg" alt="gambar" width="300"></div><br><p>  Ini menyimpulkan ulasan kami tentang pustaka Tulis Jetpack baru.  Kerangka kerja membenarkan namanya secara arsitektur, menggantikan semua warisan, yang begitu tidak nyaman dalam hierarki Tampilan, dengan komposisi.  Masih terlalu banyak pertanyaan tentang bagaimana analog dari ViewGroup yang lebih kompleks akan diimplementasikan, seperti ConstraintLayout dan RecyclerView;  tidak cukup dokumentasi dan pratinjau. </p><br><p>  Sangat jelas bahwa Compose tidak siap untuk digunakan bahkan dalam aplikasi tempur kecil. </p><br><p>  Tapi ini hanya versi pertama dari Pratinjau Pratinjau.  Akan menarik untuk mengamati perkembangan konsep bekerja dengan Negara dan perpustakaan dari masyarakat berdasarkan Compose. </p><br><p>  Jika Anda menemukan contoh kode yang lebih berhasil, atau dokumentasi untuk kasus yang tidak dapat saya dapatkan, silakan tulis di komentar. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id471670/">https://habr.com/ru/post/id471670/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id471660/index.html">Kuliah Psikologi Pemain</a></li>
<li><a href="../id471662/index.html">Web - otentikasi javascript, kebingungan dan kode asli. Pemecahan masalah dengan r0ot-mi Web - Client. Bagian 1</a></li>
<li><a href="../id471664/index.html">Magang di ABBYY: perusahaan tempat Anda bisa menjadi "Anda"</a></li>
<li><a href="../id471666/index.html">Alami pengalaman Pengembang iOS pindah ke Jerman dengan visa kerja</a></li>
<li><a href="../id471668/index.html">Analisis teknis eksploitasi checkm8</a></li>
<li><a href="../id471676/index.html">Penipu telepon. Tindakan kedua, di mana saya mogok dan lari ke ATM terdekat</a></li>
<li><a href="../id471678/index.html">Beruang layanan sesuai permintaan</a></li>
<li><a href="../id471684/index.html">Mengapa Anda perlu membuat modul untuk nginx</a></li>
<li><a href="../id471686/index.html">Bagaimana AWS mengolah layanannya yang tangguh. Penskalaan server dan basis data</a></li>
<li><a href="../id471688/index.html">Bagaimana AWS mengolah layanannya yang tangguh. Penskalaan jaringan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>