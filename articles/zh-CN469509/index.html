<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ—‘ï¸ ğŸ§‘ğŸ¿â€ğŸ¤â€ğŸ§‘ğŸ¿ ğŸ‘¨â€ğŸš’ è§’åº¦ç¤ºæ„å›¾ï¼Œæˆ–æˆ‘å¦‚ä½•ç¼–å†™è§’åº¦cliæ¨¡æ¿ â˜‘ï¸ ğŸ  ğŸ˜™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ‚¨å¥½ï¼Œæˆ‘å«Maximã€‚ å‡ å¹´æ¥ï¼Œæˆ‘ä¸€ç›´åœ¨è¿›è¡Œå‰ç«¯å¼€å‘ã€‚ æˆ‘ç»å¸¸ä¸å¾—ä¸å¤„ç†å„ç§HTMLæ¨¡æ¿çš„å¸ƒå±€ã€‚ åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œæˆ‘é€šå¸¸ä½¿ç”¨å¸¦æœ‰è‡ªå®šä¹‰pugæ¨¡æ¿å¼•æ“çš„webpackæ„å»ºå™¨ï¼Œå¹¶ä¸”è¿˜ä½¿ç”¨BEMæ–¹æ³•ã€‚ ä¸ºäº†ä½¿æˆ‘çš„ç”Ÿæ´»æ›´è½»æ¾ï¼Œæˆ‘ä½¿ç”¨äº†ä¸€ä¸ªç²¾ç¾çš„åŒ…è£… ã€‚ 


 æœ€è¿‘ï¼Œæˆ‘éœ€è¦åœ¨Angularä¸Šåšä¸€ä¸ªå°é¡¹ç›®ï¼Œå¹¶ä¸”...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>è§’åº¦ç¤ºæ„å›¾ï¼Œæˆ–æˆ‘å¦‚ä½•ç¼–å†™è§’åº¦cliæ¨¡æ¿</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469509/"><p> æ‚¨å¥½ï¼Œæˆ‘å«Maximã€‚ å‡ å¹´æ¥ï¼Œæˆ‘ä¸€ç›´åœ¨è¿›è¡Œå‰ç«¯å¼€å‘ã€‚ æˆ‘ç»å¸¸ä¸å¾—ä¸å¤„ç†å„ç§HTMLæ¨¡æ¿çš„å¸ƒå±€ã€‚ åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œæˆ‘é€šå¸¸ä½¿ç”¨å¸¦æœ‰è‡ªå®šä¹‰pugæ¨¡æ¿å¼•æ“çš„webpackæ„å»ºå™¨ï¼Œå¹¶ä¸”è¿˜ä½¿ç”¨BEMæ–¹æ³•ã€‚ ä¸ºäº†ä½¿æˆ‘çš„ç”Ÿæ´»æ›´è½»æ¾ï¼Œæˆ‘ä½¿ç”¨äº†ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç²¾ç¾çš„åŒ…è£…</a> ã€‚ </p><br><p> æœ€è¿‘ï¼Œæˆ‘éœ€è¦åœ¨Angularä¸Šåšä¸€ä¸ªå°é¡¹ç›®ï¼Œå¹¶ä¸”ç”±äºæˆ‘ä¹ æƒ¯äº†ä½¿ç”¨è‡ªå·±å–œæ¬¢çš„å·¥å…·ï¼Œæ‰€ä»¥æˆ‘ä¸æƒ³å›åˆ°çº¯HTMLä¸Šã€‚ åœ¨è¿™æ–¹é¢ï¼Œå‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå³å¦‚ä½•ç”¨æŸä¸ªè§’åº¦ç»“äº¤bempugæœ‹å‹ï¼Œä¸ä»…è¦ç»“äº¤æœ‹å‹ï¼Œè¿˜éœ€è¦ç”¨cliç”Ÿæˆå…·æœ‰æ‰€éœ€ç»“æ„çš„ç»„ä»¶ã€‚ </p><br><p> è°åœ¨ä¹æˆ‘æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Œæ¬¢è¿æ¥çˆ±çŒ«ã€‚ </p><a name="habracut"></a><br><p> é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæµ‹è¯•é¡¹ç›®ï¼Œåœ¨è¯¥é¡¹ç›®ä¸Šæˆ‘ä»¬å°†æµ‹è¯•æ¨¡æ¿ã€‚ </p><br><p> æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œæ‰§è¡Œï¼š </p><br><p> <code>ng g test-project</code> ã€‚ </p><br><p> åœ¨è®¾ç½®ä¸­ï¼Œæˆ‘é€‰æ‹©äº†scssé¢„å¤„ç†ç¨‹åºï¼Œå› ä¸ºä½¿ç”¨å®ƒæ›´æ–¹ä¾¿ã€‚ </p><br><p> è¯¥é¡¹ç›®å·²åˆ›å»ºï¼Œä½†æ˜¯htmlä¸­çš„é»˜è®¤ç»„ä»¶æ¨¡æ¿ç°å·²ä¿®å¤ã€‚ é¦–å…ˆï¼Œæ‚¨éœ€è¦ä½¿ç”¨pugæ¨¡æ¿å¼•æ“ç»“è¯†cliæœ‹å‹ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä½¿ç”¨äº†ng-cli-pug-loaderè½¯ä»¶åŒ… </p><br><p> å®‰è£…è½¯ä»¶åŒ…ï¼Œä¸ºæ­¤ï¼Œè¯·è½¬åˆ°é¡¹ç›®æ–‡ä»¶å¤¹å¹¶æ‰§è¡Œï¼š </p><br><p>  <code>ng add ng-cli-pug-loader</code> ã€‚ </p><br><p> ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å“ˆå·´ç‹—æ¨¡æ¿æ–‡ä»¶ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†AppComponentç»„ä»¶çš„æ ¹è£…é¥°å™¨é‡å†™ä¸ºï¼š </p><br><pre> <code class="javascript hljs"> @Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'app-root'</span></span>, <span class="hljs-attr"><span class="hljs-attr">templateUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'./app.component.pug'</span></span>, <span class="hljs-attr"><span class="hljs-attr">styleUrls</span></span>: [<span class="hljs-string"><span class="hljs-string">'./app.component.scss'</span></span>] })</code> </pre> <br><p> å› æ­¤ï¼Œæˆ‘ä»¬å°†æ–‡ä»¶æ‰©å±•åapp.component.htmlæ›´æ”¹ä¸ºapp.component.pugï¼Œå¹¶ä¸”å†…å®¹ä»¥æ¨¡æ¿è¯­æ³•ç¼–å†™ã€‚ åœ¨æ­¤æ–‡ä»¶ä¸­ï¼Œæˆ‘åˆ é™¤äº†é™¤è·¯ç”±å™¨ä»¥å¤–çš„æ‰€æœ‰å†…å®¹ã€‚ </p><br><p> æœ€åï¼Œè®©æˆ‘ä»¬å¼€å§‹åˆ›å»ºç»„ä»¶ç”Ÿæˆå™¨ï¼ </p><br><p> è¦ç”Ÿæˆæ¨¡æ¿ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºè‡ªå·±çš„æ–¹æ¡ˆã€‚ æˆ‘æ­£åœ¨ä½¿ç”¨@ angle-devkitä¸­çš„diagrams-cliåŒ…ã€‚ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å…¨å±€å®‰è£…è½¯ä»¶åŒ…ï¼š </p><br><p>  <code>npm install -g @angular-devkit/schematics-cli</code> ã€‚ </p><br><p> æˆ‘ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨é¡¹ç›®å¤–éƒ¨çš„å•ç‹¬ç›®å½•ä¸­åˆ›å»ºäº†æ–¹æ¡ˆï¼š </p><br><p>  <code>schematics blank --name=bempug-component</code> ã€‚ </p><br><p> æˆ‘ä»¬è¿›å…¥åˆ›å»ºçš„æ–¹æ¡ˆï¼Œç°åœ¨å¯¹src / collection.jsonæ–‡ä»¶æ„Ÿå…´è¶£ã€‚ çœ‹èµ·æ¥åƒè¿™æ ·ï¼š </p><br><pre> <code class="json hljs"> <span class="hljs-string"><span class="hljs-string">"$schema"</span></span>: <span class="hljs-string"><span class="hljs-string">"../node_modules/@angular-devkit/schematics/collection-schema.json"</span></span>, <span class="hljs-string"><span class="hljs-string">"schematics"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"bempug-component"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"A blank schematic."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"factory"</span></span>: <span class="hljs-string"><span class="hljs-string">"./bempug-component/index#bempugComponent"</span></span> } } }</code> </pre> <br><p> è¿™æ˜¯æˆ‘ä»¬æ–¹æ¡ˆçš„æè¿°æ–‡ä»¶ï¼Œå…¶ä¸­å‚æ•°ä¸ºâ€œ factoryâ€ï¼šâ€œ ./bempug-component/index#bempugComponentâ€ï¼šè¿™æ˜¯ç”Ÿæˆå™¨â€œ factoryâ€ä¸»è¦åŠŸèƒ½çš„æè¿°ã€‚ </p><br><p> æœ€åˆï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Rule, SchematicContext, Tree } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular-devkit/schematics'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// You don't have to export the function as default. You can also have more than one rule factory // per file. export function bempugComponent(options: any): Rule { return (tree: Tree, _context: SchematicContext) =&gt; { return tree; }; }</span></span></code> </pre> <br><p> æ‚¨å¯ä»¥é»˜è®¤ä½¿å‡½æ•°å¯¼å‡ºï¼Œç„¶åå¯ä»¥å°†â€œ factoryâ€å‚æ•°é‡å†™ä¸ºâ€œ ./bempug-component/indexâ€ã€‚ </p><br><p> æ¥ä¸‹æ¥ï¼Œåœ¨æ–¹æ¡ˆçš„ç›®å½•ä¸­ï¼Œåˆ›å»ºæ–‡ä»¶schema.jsonï¼Œå®ƒå°†æè¿°æ–¹æ¡ˆçš„æ‰€æœ‰å‚æ•°ã€‚ </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"$schema"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://json-schema.org/schema"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"SchemanticsForMenu"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Bempug Schema"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"properties"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"$default"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"$source"</span></span>: <span class="hljs-string"><span class="hljs-string">"argv"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"index"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"path"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"format"</span></span>: <span class="hljs-string"><span class="hljs-string">"path"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"The path to create the component."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"visible"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"project"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"The name of the project."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"$default"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"$source"</span></span>: <span class="hljs-string"><span class="hljs-string">"projectName"</span></span> } } } }</code> </pre> <br><p> å‚æ•°ä½äºå±æ€§ä¸­ï¼Œå³ï¼š </p><br><ul><li> åç§°å®ä½“åç§°ï¼ˆåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­å°†æ˜¯ç»„ä»¶ï¼‰ï¼› </li><li> è·¯å¾„æ˜¯ç”Ÿæˆå™¨ç”¨æ¥åˆ›å»ºç»„ä»¶æ–‡ä»¶çš„è·¯å¾„ï¼› </li><li> é¡¹ç›®æ˜¯é¡¹ç›®æœ¬èº«ï¼Œå°†åœ¨å…¶ä¸­ç”Ÿæˆç»„ä»¶ã€‚ </li></ul><br><p> å°†æ›´å¤šå‚æ•°æ·»åŠ åˆ°å°†æ¥éœ€è¦çš„æ–‡ä»¶ä¸­ã€‚ </p><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"module"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"The declaring module."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alias"</span></span>: <span class="hljs-string"><span class="hljs-string">"m"</span></span> }, <span class="hljs-string"><span class="hljs-string">"componentModule"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"boolean"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"default"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"Patern module per Component"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alias"</span></span>: <span class="hljs-string"><span class="hljs-string">"mc"</span></span> }, <span class="hljs-string"><span class="hljs-string">"export"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"boolean"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"default"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"Export component from module?"</span></span> }</code> </pre> <br><ul><li> è¿™é‡Œçš„æ¨¡å—å°†å­˜å‚¨æŒ‡å‘å…¶ä¸­å°†åŒ…å«ç»„ä»¶çš„æ¨¡å—æˆ–ç»„ä»¶æ¨¡å—çš„é“¾æ¥ï¼› </li><li>  componentModuleæœ‰ä¸€ä¸ªæ ‡å¿—æ˜¯å¦ä¸ºç»„ä»¶åˆ›å»ºè‡ªå·±çš„æ¨¡å—ï¼ˆç„¶åæˆ‘å¾—å‡ºç»“è®ºï¼Œå®ƒå°†å§‹ç»ˆè¢«åˆ›å»ºå¹¶å°†å…¶è®¾ç½®ä¸ºtrueï¼‰ï¼› </li><li> å¯¼å‡ºï¼šè¿™æ˜¯æ˜¯å¦ä»è¦å¯¼å…¥ç»„ä»¶æ¨¡å—çš„æ¨¡å—ä¸­å¯¼å‡ºçš„æ ‡å¿—ï¼› </li></ul><br><p> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ç»„ä»¶çš„å‚æ•°schema.d.tsæ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ¥å£ã€‚ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface BemPugOptions { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: string; project?: string; path?: string; <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>?: string; componentModule?: boolean; <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>?: string; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span>?: boolean; bemPugMixinPath?: string; }</code> </pre> <br><p> åœ¨å…¶ä¸­ï¼Œå±æ€§å¤åˆ¶äº†schema.jsonä¸­çš„å±æ€§ã€‚ æ¥ä¸‹æ¥ï¼Œå‡†å¤‡æˆ‘ä»¬çš„å·¥å‚ï¼Œè½¬åˆ°index.tsæ–‡ä»¶ã€‚ åœ¨å…¶ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªfilterTemplateså‡½æ•°ï¼Œè¿™äº›å‡½æ•°å°†è´Ÿè´£æ ¹æ®componentModuleçš„å€¼ä¸ºç»„ä»¶åˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼Œä»¥åŠsetupOptionsï¼Œè¿™å°†è®¾ç½®å·¥å‚æ‰€éœ€çš„å‚æ•°ã€‚ </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">filterTemplates</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options: BemPugOptions</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Rule</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!options.componentModule) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">path</span></span></span><span class="hljs-function"> =&gt;</span></span> !path.match(<span class="hljs-regexp"><span class="hljs-regexp">/\.module\.ts$/</span></span>) &amp;&amp; !path.match(<span class="hljs-regexp"><span class="hljs-regexp">/-item\.ts$/</span></span>) &amp;&amp; !path.match(<span class="hljs-regexp"><span class="hljs-regexp">/\.bak$/</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">path</span></span></span><span class="hljs-function"> =&gt;</span></span> !path.match(<span class="hljs-regexp"><span class="hljs-regexp">/\.bak$/</span></span>)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupOptions</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options: BemPugOptions, host: Tree</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> workspace = getWorkspace(host); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!options.project) { options.project = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.keys(workspace.projects)[<span class="hljs-number"><span class="hljs-number">0</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> project = workspace.projects[options.project]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (options.path === <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> projectDirName = project.projectType === <span class="hljs-string"><span class="hljs-string">'application'</span></span> ? <span class="hljs-string"><span class="hljs-string">'app'</span></span> : <span class="hljs-string"><span class="hljs-string">'lib'</span></span>; options.path = <span class="hljs-string"><span class="hljs-string">`/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${project.root}</span></span></span><span class="hljs-string">/src/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${projectDirName}</span></span></span><span class="hljs-string">`</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> parsedPath = parseName(options.path, options.name); options.name = parsedPath.name; options.path = parsedPath.path; }</code> </pre><br><p> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç¼–å†™mainå‡½æ•°ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bempugComponent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options: BemPugOptions</span></span></span><span class="hljs-function">): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Rule</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">host: Tree, context: SchematicContext</span></span></span><span class="hljs-function">) =&gt;</span></span> { setupOptions(options, host); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> templateSource = apply(url(<span class="hljs-string"><span class="hljs-string">'./files'</span></span>), [ filterTemplates(options), template({ ...strings, ...options }), move(options.path || <span class="hljs-string"><span class="hljs-string">''</span></span>) ]); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rule = chain([ branchAndMerge(chain([ mergeWith(templateSource), ])) ]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rule(host, context); } }</code> </pre><br><p> å·¥å‚å·²ç»å‡†å¤‡å°±ç»ªï¼Œå®ƒå¯ä»¥é€šè¿‡å¤„ç†filesæ–‡ä»¶å¤¹ä¸­çš„æ¨¡æ¿æ¥ç”Ÿæˆç»„ä»¶æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å¤¹å°šä¸å¯ç”¨ã€‚ æ²¡å…³ç³»ï¼Œå°±æˆ‘è€Œè¨€ï¼Œæˆ‘ä»¬åœ¨æ–¹æ¡ˆæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªbempug-componentæ–‡ä»¶æ–‡ä»¶å¤¹ã€‚ åœ¨æ–‡ä»¶æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºæ–‡ä»¶å¤¹<code>__name@dasherize__</code> ï¼Œåœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œå·¥å‚å°†<code>__name@dasherize__</code>æ›¿æ¢ä¸ºç»„ä»¶åç§°ã€‚ </p><br><p> æ¥ä¸‹æ¥ï¼Œåœ¨<code>__name@dasherize__</code>åˆ›å»ºæ–‡ä»¶ </p><br><ul><li>  <code>__name@dasherize__</code>å¸•æ ¼ç»„ä»¶æ¨¡æ¿ </li><li>  <code>__name@dasherize__</code>ç»„ä»¶çš„å•å…ƒæµ‹è¯•æ–‡ä»¶ </li><li> ç»„ä»¶æœ¬èº«çš„<code>__name@dasherize__</code>æ–‡ä»¶ </li><li>  <code>__name@dasherize__</code>ç»„ä»¶æ¨¡å— </li><li>  <code>__name@dasherize__</code>ç»„ä»¶æ ·å¼è¡¨ </li></ul><br><p> ç°åœ¨ï¼Œæˆ‘ä»¬å°†å‘å·¥å‚æ·»åŠ å¯¹æ›´æ–°æ¨¡å—çš„æ”¯æŒï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºadd-to-module-context.tsæ–‡ä»¶ï¼Œä»¥å­˜å‚¨å·¥å‚ä½¿ç”¨è¯¥æ¨¡å—æ‰€éœ€çš„å‚æ•°ã€‚ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ts <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'typescript'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddToModuleContext</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// source of the module file source: ts.SourceFile; // the relative path that points from // the module file to the component file relativePath: string; // name of the component class classifiedName: string; }</span></span></code> </pre> <br><p> å°†æ¨¡å—æ”¯æŒæ·»åŠ åˆ°å·¥å‚ã€‚ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> stringUtils = { dasherize, classify }; <span class="hljs-comment"><span class="hljs-comment">// You don't have to export the function as default. You can also have more than one rule factory // per file. function filterTemplates(options: BemPugOptions): Rule { if (!options.componentModule) { return filter(path =&gt; !path.match(/\.module\.ts$/) &amp;&amp; !path.match(/-item\.ts$/) &amp;&amp; !path.match(/\.bak$/)); } return filter(path =&gt; !path.match(/\.bak$/)); } function setupOptions(options: BemPugOptions, host: Tree): void { const workspace = getWorkspace(host); if (!options.project) { options.project = Object.keys(workspace.projects)[0]; } const project = workspace.projects[options.project]; if (options.path === undefined) { const projectDirName = project.projectType === 'application' ? 'app' : 'lib'; options.path = `/${project.root}/src/${projectDirName}`; } const parsedPath = parseName(options.path, options.name); options.name = parsedPath.name; options.path = parsedPath.path; options.module = options.module || findModuleFromOptions(host, options) || ''; } export function createAddToModuleContext(host: Tree, options: ModuleOptions, componentPath: string): AddToModuleContext { const result = new AddToModuleContext(); if (!options.module) { throw new SchematicsException(`Module not found.`); } // Reading the module file const text = host.read(options.module); if (text === null) { throw new SchematicsException(`File ${options.module} does not exist.`); } const sourceText = text.toString('utf-8'); result.source = ts.createSourceFile(options.module, sourceText, ts.ScriptTarget.Latest, true); result.relativePath = buildRelativePath(options.module, componentPath); result.classifiedName = stringUtils.classify(`${options.name}ComponentModule`); return result; } function addDeclaration(host: Tree, options: ModuleOptions, componentPath: string) { const context = createAddToModuleContext(host, options, componentPath); const modulePath = options.module || ''; const declarationChanges = addImportToModule( context.source, modulePath, context.classifiedName, context.relativePath); const declarationRecorder = host.beginUpdate(modulePath); for (const change of declarationChanges) { if (change instanceof InsertChange) { declarationRecorder.insertLeft(change.pos, change.toAdd); } } host.commitUpdate(declarationRecorder); }; function addExport(host: Tree, options: ModuleOptions, componentPath: string) { const context = createAddToModuleContext(host, options, componentPath); const modulePath = options.module || ''; const exportChanges = addExportToModule( context.source, modulePath, context.classifiedName, context.relativePath); const exportRecorder = host.beginUpdate(modulePath); for (const change of exportChanges) { if (change instanceof InsertChange) { exportRecorder.insertLeft(change.pos, change.toAdd); } } host.commitUpdate(exportRecorder); }; export function addDeclarationToNgModule(options: ModuleOptions, exports: boolean, componentPath: string): Rule { return (host: Tree) =&gt; { addDeclaration(host, options, componentPath); if (exports) { addExport(host, options, componentPath); } return host; }; } export function bempugComponent(options: BemPugOptions): Rule { return (host: Tree, context: SchematicContext) =&gt; { setupOptions(options, host); deleteCommon(host); const templateSource = apply(url('./files'), [ filterTemplates(options), template({ ...strings, ...options }), move(options.path || '') ]); const rule = chain([ branchAndMerge(chain([ mergeWith(templateSource), addDeclarationToNgModule(options, !!options.export, `${options.path}/${options.name}/${options.name}-component.module` || '') ])) ]); return rule(host, context); } }</span></span></code> </pre><br><p> ç°åœ¨ï¼Œå°†-m &lt;æ¨¡å—å‚è€ƒ&gt;å‚æ•°æ·»åŠ åˆ°cliå‘½ä»¤æ—¶ï¼Œæˆ‘ä»¬çš„ç»„ä»¶æ¨¡å—å°†åœ¨æŒ‡å®šçš„æ¨¡å—ä¸­æ·»åŠ å¯¼å…¥ï¼Œå¹¶åœ¨æ·»åŠ â€“exportæ ‡å¿—æ—¶ä»å…¶æ·»åŠ å¯¼å‡ºã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ·»åŠ BEMæ”¯æŒã€‚ ä¸ºæ­¤ï¼Œæˆ‘è·å–äº†npm bempugåŒ…çš„æºä»£ç ï¼Œå¹¶å°†ä»£ç åˆ¶ä½œåœ¨ä¸€ä¸ªbempugMixin.pugæ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶æ”¾ç½®åœ¨commonæ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶æ”¾ç½®åœ¨å¦ä¸€ä¸ªcommonæ–‡ä»¶å¤¹ä¸­ï¼Œä»¥ä¾¿å°†mixinå¤åˆ¶åˆ°æœ‰è§’åº¦çš„é¡¹ç›®ä¸­çš„commonæ–‡ä»¶å¤¹ä¸­ã€‚ </p><br><p> æˆ‘ä»¬çš„ä»»åŠ¡æ˜¯åœ¨æ¯ä¸ªæ¨¡æ¿æ–‡ä»¶ä¸­éƒ½è¿æ¥è¯¥mixinï¼Œå¹¶ä¸”åœ¨ç”Ÿæˆæ–°ç»„ä»¶æ—¶ä¸è¿›è¡Œé‡å¤ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†æ­¤åŠŸèƒ½æ·»åŠ åˆ°äº†å·¥å‚ä¸­ã€‚ </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Rule, SchematicContext, Tree, filter, apply, template, move, chain, branchAndMerge, mergeWith, url, SchematicsException } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular-devkit/schematics'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {BemPugOptions} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./schema"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {getWorkspace} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@schematics/angular/utility/config"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {parseName} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@schematics/angular/utility/parse-name"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {normalize, strings} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@angular-devkit/core"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { AddToModuleContext } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./add-to-module-context'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ts <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'typescript'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {classify, dasherize} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@angular-devkit/core/src/utils/strings"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {buildRelativePath, findModuleFromOptions, ModuleOptions} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@schematics/angular/utility/find-module"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {addExportToModule, addImportToModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@schematics/angular/utility/ast-utils"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {InsertChange} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@schematics/angular/utility/change"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> stringUtils = { dasherize, classify }; <span class="hljs-comment"><span class="hljs-comment">// You don't have to export the function as default. You can also have more than one rule factory // per file. function filterTemplates(options: BemPugOptions): Rule { if (!options.componentModule) { return filter(path =&gt; !path.match(/\.module\.ts$/) &amp;&amp; !path.match(/-item\.ts$/) &amp;&amp; !path.match(/\.bak$/)); } return filter(path =&gt; !path.match(/\.bak$/)); } function setupOptions(options: BemPugOptions, host: Tree): void { const workspace = getWorkspace(host); if (!options.project) { options.project = Object.keys(workspace.projects)[0]; } const project = workspace.projects[options.project]; if (options.path === undefined) { const projectDirName = project.projectType === 'application' ? 'app' : 'lib'; options.path = `/${project.root}/src/${projectDirName}`; } const parsedPath = parseName(options.path, options.name); options.name = parsedPath.name; options.path = parsedPath.path; options.module = options.module || findModuleFromOptions(host, options) || ''; options.bemPugMixinPath = buildRelativePath(`${options.path}/${options.name}/${options.name}.component.ts`, `/src/app/common/bempugMixin.pug`); } export function createAddToModuleContext(host: Tree, options: ModuleOptions, componentPath: string): AddToModuleContext { const result = new AddToModuleContext(); if (!options.module) { throw new SchematicsException(`Module not found.`); } // Reading the module file const text = host.read(options.module); if (text === null) { throw new SchematicsException(`File ${options.module} does not exist.`); } const sourceText = text.toString('utf-8'); result.source = ts.createSourceFile(options.module, sourceText, ts.ScriptTarget.Latest, true); result.relativePath = buildRelativePath(options.module, componentPath); result.classifiedName = stringUtils.classify(`${options.name}ComponentModule`); return result; } function addDeclaration(host: Tree, options: ModuleOptions, componentPath: string) { const context = createAddToModuleContext(host, options, componentPath); const modulePath = options.module || ''; const declarationChanges = addImportToModule( context.source, modulePath, context.classifiedName, context.relativePath); const declarationRecorder = host.beginUpdate(modulePath); for (const change of declarationChanges) { if (change instanceof InsertChange) { declarationRecorder.insertLeft(change.pos, change.toAdd); } } host.commitUpdate(declarationRecorder); }; function addExport(host: Tree, options: ModuleOptions, componentPath: string) { const context = createAddToModuleContext(host, options, componentPath); const modulePath = options.module || ''; const exportChanges = addExportToModule( context.source, modulePath, context.classifiedName, context.relativePath); const exportRecorder = host.beginUpdate(modulePath); for (const change of exportChanges) { if (change instanceof InsertChange) { exportRecorder.insertLeft(change.pos, change.toAdd); } } host.commitUpdate(exportRecorder); }; export function addDeclarationToNgModule(options: ModuleOptions, exports: boolean, componentPath: string): Rule { return (host: Tree) =&gt; { addDeclaration(host, options, componentPath); if (exports) { addExport(host, options, componentPath); } return host; }; } function deleteCommon(host: Tree) { const path = `/src/app/common/bempugMixin.pug`; if(host.exists(path)) { host.delete(`/src/app/common/bempugMixin.pug`); } } export function bempugComponent(options: BemPugOptions): Rule { return (host: Tree, context: SchematicContext) =&gt; { setupOptions(options, host); deleteCommon(host); const templateSource = apply(url('./files'), [ filterTemplates(options), template({ ...strings, ...options }), move(options.path || '') ]); const mixinSource = apply(url('./common'), [ template({ ...strings, ...options }), move('/src/app/' || '') ]); const rule = chain([ branchAndMerge(chain([ mergeWith(templateSource), mergeWith(mixinSource), addDeclarationToNgModule(options, !!options.export, `${options.path}/${options.name}/${options.name}-component.module` || '') ]), 14) ]); return rule(host, context); } }</span></span></code> </pre><br><p> æ˜¯æ—¶å€™å¼€å§‹å¡«å†™æˆ‘ä»¬çš„æ¨¡æ¿æ–‡ä»¶äº†ã€‚ </p><br><p>  <code>__name@dasherize__.component.pug</code> ï¼š </p><br><pre> <code class="javascript hljs">include &lt;%= bemPugMixinPath %&gt; +b(<span class="hljs-string"><span class="hljs-string">'&lt;%= name %&gt;'</span></span>) +e(<span class="hljs-string"><span class="hljs-string">'item'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">m</span></span>:<span class="hljs-string"><span class="hljs-string">'test'</span></span>}) | <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag"> %&gt;</span></span></span><span class="xml"> works</span></span></code> </pre> <br><p> ç”ŸæˆæœŸé—´åœ¨&lt;ï¼…=ï¼…&gt;ä¸­æŒ‡å®šçš„å†…å®¹å°†æ›¿æ¢ä¸ºç»„ä»¶åç§°ã€‚ </p><br><p> <code>__name@dasherize__.component.spec.ts:</code> </p> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">async</span></span>, ComponentFixture, TestBed } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core/testing'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {NO_ERRORS_SCHEMA} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { &lt;%= classify(name) %&gt;ComponentModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./&lt;%= name %&gt;-component.module'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { &lt;%= classify(name) %&gt;Component } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./&lt;%= name %&gt;.component'</span></span>; describe(<span class="hljs-string"><span class="hljs-string">'&lt;%= classify(name) %&gt;Component'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> component: <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">classify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">) %&gt;</span></span></span><span class="xml">Component; let fixture: ComponentFixture</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;&lt;%= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">classify(name)</span></span></span></span><span class="xml"><span class="hljs-tag"> %&gt;</span></span></span><span class="xml">Component&gt;; beforeEach(async(() =&gt; { TestBed.configureTestingModule({ imports: [</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">classify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">) %&gt;</span></span></span><span class="xml">ComponentModule], declarations: [], schemas: [ NO_ERRORS_SCHEMA ] }) .compileComponents(); })); beforeEach(() =&gt; { fixture = TestBed.createComponent(</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">classify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">) %&gt;</span></span></span><span class="xml">Component); component = fixture.componentInstance; fixture.detectChanges(); }); it('should create', () =&gt; { expect(component).toBeTruthy(); }); });</span></span></code> </pre> <br><p> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ&lt;ï¼…= classifyï¼ˆnameï¼‰ï¼…&gt;ç”¨äºå°†åç§°è½¬æ¢ä¸ºCamelCaseã€‚ </p><br><p> <code>__name@dasherize__.component.ts:</code> </p> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Component, OnInit, ViewEncapsulation} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; @Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'app-&lt;%=dasherize(name)%&gt;-component'</span></span>, <span class="hljs-attr"><span class="hljs-attr">templateUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'&lt;%=dasherize(name)%&gt;.component.pug'</span></span>, <span class="hljs-attr"><span class="hljs-attr">styleUrls</span></span>: [<span class="hljs-string"><span class="hljs-string">'./&lt;%=dasherize(name)%&gt;-component.scss'</span></span>], <span class="hljs-attr"><span class="hljs-attr">encapsulation</span></span>: ViewEncapsulation.None }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> &lt;%</span></span>= classify(name) %&gt;Component implements OnInit { <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() {} ngOnInit(): <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { } }</code> </pre><br><p> <code>__name@dasherize__-component.module.ts:</code> </p> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { NgModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { CommonModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/common'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {&lt;%= classify(name) %&gt;Component} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./&lt;%= name %&gt;.component'</span></span>; @NgModule({ <span class="hljs-attr"><span class="hljs-attr">declarations</span></span>: [ <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">classify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">) %&gt;</span></span></span><span class="xml">Component, ], imports: [ CommonModule ], exports: [ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">classify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">) %&gt;</span></span></span><span class="xml">Component, ] }) export class </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">classify</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">) %&gt;</span></span></span><span class="xml">ComponentModule { }</span></span></code> </pre> <br><p> <code>__name@dasherize__-component.scss:</code> </p> <br><pre> <code class="css hljs">.&lt;%= <span class="hljs-selector-tag"><span class="hljs-selector-tag">name</span></span> %&gt;{ }</code> </pre> <br><p> æˆ‘ä»¬ä½¿ç”¨å‘½ä»¤``npm run build''æ¥æ„å»ºæ–¹æ¡ˆã€‚ </p><br><p> ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­ç”Ÿæˆç»„ä»¶ï¼ </p><br><p> è¦è¿›è¡Œæ£€æŸ¥ï¼Œè¯·è¿”å›æˆ‘ä»¬çš„Angularé¡¹ç›®å¹¶åˆ›å»ºä¸€ä¸ªæ¨¡å—ã€‚ <br> <code>ng gm test-schema</code> <br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ‰§è¡Œ``npm link &lt;ç»å¯¹è·¯å¾„åˆ°å¸¦æœ‰æˆ‘ä»¬schemeçš„é¡¹ç›®æ–‡ä»¶å¤¹&gt;''ï¼Œä»¥ä¾¿å°†æˆ‘ä»¬çš„schemeæ·»åŠ åˆ°é¡¹ç›®çš„node_modulesã€‚ </p><br><p> ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>ng g bempug-component:bempug-component test -m /src/app/test-schema/test-schema.module.ts â€“export</code>å°è¯•ç”µè·¯<code>ng g bempug-component:bempug-component test -m /src/app/test-schema/test-schema.module.ts â€“export</code> ã€‚ <br> æˆ‘ä»¬çš„æ–¹æ¡ˆå°†åˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼Œå¹¶é€šè¿‡exportå°†å…¶æ·»åŠ åˆ°æŒ‡å®šçš„æ¨¡å—ä¸­ã€‚ <br> è¯¥æ–¹æ¡ˆå·²å‡†å¤‡å°±ç»ªï¼Œæ‚¨å¯ä»¥å¼€å§‹ä½¿ç”¨ç†Ÿæ‚‰çš„æŠ€æœ¯åˆ¶ä½œè¯¥åº”ç”¨ç¨‹åºã€‚ </p><br><p> æ‚¨å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>æŸ¥çœ‹æœ€ç»ˆç‰ˆæœ¬ï¼Œè¯¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è½¯ä»¶åŒ…ä¹Ÿå¯åœ¨npmä¸­è·å¾—</a> ã€‚ </p><br><p> åœ¨åˆ›å»ºæ–¹æ¡ˆæ—¶ï¼Œæˆ‘ä½¿ç”¨äº†æœ‰å…³è¯¥ä¸»é¢˜çš„æ–‡ç« ï¼Œå¯¹ä½œè€…è¡¨ç¤ºæ„Ÿè°¢ã€‚ </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://blog.angular.io/schematics-an-introduction-dc1dfbc2a2b2</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://medium.com/@tomastrajan/total-guide-to-custom-angular-schematics-5c50cf90cdb4</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://developer.okta.com/blog/2019/02/13/angular-schematics</a> ; </li></ul><br><p> æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼Œè¯»åˆ°æœ€åçš„æ¯ä¸ªäººï¼Œæ‚¨éƒ½æ˜¯æœ€å¥½çš„ï¼ <br> è€Œå¦ä¸€ä¸ªæ¿€åŠ¨äººå¿ƒçš„é¡¹ç›®æ­£ç­‰ç€æˆ‘ã€‚ å¾…ä¼šè§ï¼ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN469509/">https://habr.com/ru/post/zh-CN469509/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN469497/index.html">ä½¿ç”¨Tilemapç³»ç»Ÿåˆ›å»ºç­‰è·2Dæ°´å¹³</a></li>
<li><a href="../zh-CN469499/index.html">æˆ‘ä»¬åœ¨Parallelså¾æœäº†Appleçš„æ–¹å¼</a></li>
<li><a href="../zh-CN469503/index.html">ç½‘ç»œå®‰å…¨ï¼šæˆ‘ä»¬åœ¨2019å¹´ä¿æŠ¤è®¢æˆ·æ•°æ®å…å—æ³„éœ²</a></li>
<li><a href="../zh-CN469505/index.html">å°†ä¸šåŠ¡æ¨å‘å›½å¤–å¸‚åœºçš„3ç§å®ç”¨æ–¹æ³•ï¼šå®é™…å…¬å¸çš„æ–¹æ³•å’ŒæŠ€å·§</a></li>
<li><a href="../zh-CN469507/index.html">ç¬¬ä¸‰ä¸ªSteam Windows Clientæ¼æ´ï¼Œä½†ä¸æ˜¯0day</a></li>
<li><a href="../zh-CN469515/index.html">ä¸ºIstioå‡†å¤‡åº”ç”¨ç¨‹åº</a></li>
<li><a href="../zh-CN469521/index.html">æˆ‘ä¹°äº†æ‘©æ‰˜è½¦éª‘ï¼Œä¸æ‘”å€’</a></li>
<li><a href="../zh-CN469523/index.html">ä»£ç æ€§èƒ½å¯¹JavaScriptä¸­å˜é‡å£°æ˜ä¸Šä¸‹æ–‡çš„ä¾èµ–</a></li>
<li><a href="../zh-CN469525/index.html">çŸ¿ç”¨æŒ–æ˜æœºçš„è‡ªåŠ¨æ§åˆ¶ç³»ç»Ÿ</a></li>
<li><a href="../zh-CN469527/index.html">å¯¹è®²æœºæ˜¯é—´è°çš„è€³æœµå—ï¼Ÿ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>