<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèûÔ∏è üõí üòî Structuration des applications React üë®üèΩ‚Äçüåæ üë®üèº‚Äçüåæ üëè</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le mat√©riel, dont nous publions la traduction aujourd'hui, r√©v√®le les approches utilis√©es par son auteur lors de la structuration des applications Rea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Structuration des applications React</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/460793/">  Le mat√©riel, dont nous publions la traduction aujourd'hui, r√©v√®le les approches utilis√©es par son auteur lors de la structuration des applications React.  En particulier, nous discuterons ici de la structure de dossiers utilis√©e, de la d√©nomination des entit√©s, des endroits o√π se trouvent les fichiers de test et d'autres choses similaires. <br><br>  L'une des caract√©ristiques les plus agr√©ables de React est que cette biblioth√®que n'oblige pas le d√©veloppeur √† respecter strictement certaines conventions concernant la structure du projet.  Une grande partie de cela reste √† la discr√©tion du programmeur.  Cette approche est diff√©rente de celle, disons, adopt√©e dans les cadres Ember.js ou Angular.  Ils offrent aux d√©veloppeurs plus de fonctionnalit√©s standard.  Ces cadres pr√©voient des conventions concernant la structure des projets et des r√®gles pour nommer les fichiers et les composants. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/k6/9y/ug/k69yugvbt27p3wtccvzeqrf_v4w.jpeg"></a> <br><br>  Personnellement, j'aime l'approche adopt√©e par React.  Le fait est que je pr√©f√®re contr√¥ler quelque chose moi-m√™me, sans compter sur certains ¬´accords¬ª.  Cependant, l'approche de structuration des projets qu'Angular offre de nombreux avantages.  Le choix entre la libert√© et des r√®gles plus ou moins rigides se r√©sume √† ce qui est le plus proche de vous et de votre √©quipe. <br><br>  Au fil des ann√©es de travail avec React, j'ai essay√© de nombreuses fa√ßons de structurer les applications.  Certaines des id√©es que j'ai appliqu√©es se sont av√©r√©es plus efficaces que d'autres.  Par cons√©quent, ici, je vais parler de tout ce qui s'est bien montr√© dans la pratique.  J'esp√®re que vous trouverez ici quelque chose qui vous sera utile. <br><a name="habracut"></a><br>  Je n‚Äôessaie pas de montrer ici une fa√ßon ¬´juste¬ª de structurer les applications.  Vous pouvez reprendre certaines de mes id√©es et les modifier pour r√©pondre √† vos besoins.  Vous pourriez bien √™tre en d√©saccord avec moi en continuant √† travailler comme vous le faisiez auparavant.  Diff√©rentes √©quipes cr√©ent diff√©rentes applications et utilisent diff√©rents moyens pour atteindre leurs objectifs. <br><br>  Il est important de noter que si vous regardez le site Web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Thread</a> , dont je participe au d√©veloppement, et regardez le dispositif de son interface, vous trouverez des endroits o√π ces r√®gles dont je parlerai ne sont pas respect√©es.  Le fait est que toute ¬´r√®gle¬ª de programmation ne doit √™tre consid√©r√©e que comme des recommandations et non comme des normes compl√®tes valables dans toutes les situations.  Et si vous pensez qu'une sorte de "r√®gles" ne vous convient pas - vous, pour am√©liorer la qualit√© de ce sur quoi vous travaillez, devriez trouver la force de s'√©carter de ces "r√®gles". <br><br>  En fait, maintenant, sans plus tarder, je vous propose mon histoire sur la structuration des applications React. <br><br><h2>  <font color="#3AC1EF">Ne vous inqui√©tez pas trop des r√®gles.</font> </h2><br>  Peut-√™tre d√©cidez-vous que la recommandation de ne pas trop vous soucier des r√®gles semble √©trange au d√©but de notre conversation.  Mais c'est exactement ce que je veux dire quand je dis que la principale erreur que les programmeurs ont en termes d'observation des r√®gles est que les programmeurs attachent trop d'importance aux r√®gles.  Cela est particuli√®rement vrai au d√©but des travaux sur un nouveau projet.  Au moment de la cr√©ation du premier <code>index.jsx</code> tout simplement impossible de savoir ce qui est le mieux pour ce projet.  Au fur et √† mesure que le projet se d√©veloppe, vous arriverez naturellement √† une sorte de structure de fichiers et de dossiers, ce qui est probablement tr√®s bon pour ce projet.  Si, au cours de la poursuite des travaux, il s'av√®re que la structure existante est quelque peu infructueuse, elle peut √™tre am√©lior√©e. <br><br>  Si vous lisez ceci et vous surprenez √† penser qu'il n'y a rien dans votre application qui est en cours de discussion, alors ce n'est pas un probl√®me.  Chaque application est unique, il n'y a pas deux √©quipes de d√©veloppement absolument identiques.  Par cons√©quent, chaque √©quipe, travaillant sur un projet, parvient √† des accords concernant sa structure et ses m√©thodes de travail.  Cela aide les membres de l'√©quipe √† travailler de mani√®re productive.  Ne vous efforcez pas de, apr√®s avoir appris comment quelqu'un fait quelque chose, pr√©sentez-vous imm√©diatement cela.  N'essayez pas d'introduire dans votre travail ce que l'on appelle dans certains mat√©riaux, et m√™me dans ce cas, le "moyen le plus efficace" de r√©soudre un probl√®me.  J'ai toujours adh√©r√© et adh√©r√© √† la strat√©gie suivante concernant ces recommandations.  J'ai mon propre ensemble de r√®gles, mais en lisant comment les autres agissent dans certaines situations, je choisis ce qui me semble r√©ussi et qui me convient.  Cela conduit au fait qu'au fil du temps, mes m√©thodes de travail s'am√©liorent.  En m√™me temps, je n'ai pas de chocs et il n'y a aucune envie de tout r√©√©crire √† partir de z√©ro. <br><br><h2>  <font color="#3AC1EF">Les composants importants se trouvent dans des dossiers s√©par√©s</font> </h2><br>  L'approche pour placer des fichiers de composants dans des dossiers auxquels je suis arriv√© est que les composants qui peuvent √™tre consid√©r√©s comme ¬´importants¬ª, ¬´de base¬ª, ¬´de base¬ª dans le contexte de l'application sont plac√©s dans des dossiers s√©par√©s.  Ces dossiers se trouvent √† leur tour dans le dossier des <code>components</code> .  Par exemple, si nous parlons d'une application pour une boutique √©lectronique, le composant <code>&lt;Product&gt;</code> utilis√© pour d√©crire le produit peut √™tre reconnu comme un composant similaire.  Voici ce que je veux dire: <br><br><pre> <code class="plaintext hljs">- src/  - components/    - product/      - product.jsx      - product-price.jsx    - navigation/      - navigation.jsx    - checkout-flow/      - checkout-flow.jsx</code> </pre> <br>  Dans ce cas, les composants "secondaires" qui ne sont utilis√©s que par certains composants "principaux" se trouvent dans le m√™me dossier que ces composants "principaux".  Cette approche a fait ses preuves dans la pratique.  Le fait est qu'en raison de son application, une certaine structure appara√Æt dans le projet, mais le niveau d'imbrication des dossiers n'est pas trop important.  Son application n'entra√Æne pas l'apparition de quelque chose comme <code>../../../</code> dans les commandes d'importation de composants, elle ne rend pas difficile le d√©placement dans le projet.  Cette approche vous permet de cr√©er une hi√©rarchie claire de composants.  Ce composant, dont le nom correspond au nom du dossier, est consid√©r√© comme "de base".  D'autres composants situ√©s dans le m√™me dossier servent √† diviser le composant "de base" en parties, ce qui simplifie le travail avec le code de ce composant et son support. <br><br>  Bien que je soutienne la pr√©sence d'une certaine structure de dossiers dans le projet, je crois que la chose la plus importante est la s√©lection de bons noms de fichiers.  Les dossiers eux-m√™mes sont moins importants. <br><br><h2>  <font color="#3AC1EF">Utilisation de sous-dossiers pour les sous-composants</font> </h2><br>  L'un des inconv√©nients de l'approche ci-dessus est que son utilisation peut conduire √† l'apparition de dossiers de composants ¬´basiques¬ª contenant de nombreux fichiers.  Prenons, par exemple, le composant <code>&lt;Product&gt;</code> .  Des fichiers CSS y seront attach√©s (nous en parlerons plus tard), des fichiers de test, de nombreux sous-composants et, √©ventuellement, d'autres ressources - telles que des images et des ic√¥nes SVG.  Cette liste "d'ajouts" n'est pas limit√©e.  Tout cela se retrouvera dans le m√™me dossier que le composant "base". <br><br>  Je m'en fiche vraiment.  Cela me convient si les fichiers ont des noms bien pens√©s et s'ils peuvent √™tre facilement trouv√©s (en utilisant les outils de recherche de fichiers dans l'√©diteur).  Si tel est le cas, la structure des dossiers s'estompe en arri√®re-plan.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici un</a> tweet sur ce sujet. <br><br>  Cependant, si vous pr√©f√©rez que votre projet ait une structure plus √©tendue, il n'y a rien de difficile √† d√©placer des sous-composants vers leurs propres dossiers: <br><br><pre> <code class="javascript hljs">- src/  - components/    - product/      - product.jsx      - ...      - product-price/        - product-price.jsx</code> </pre> <br><h2>  <font color="#3AC1EF">Les fichiers de test se trouvent au m√™me endroit que les fichiers des composants test√©s.</font> </h2><br>  Nous commen√ßons cette section par une simple recommandation, √† savoir que les fichiers de test doivent √™tre plac√©s au m√™me endroit que les fichiers avec le code qu'ils sont v√©rifi√©s avec leur aide.  Je parlerai √©galement de la fa√ßon dont je pr√©f√®re structurer les composants, en essayant de veiller √† ce qu'ils soient proches les uns des autres.  Mais maintenant, je peux dire que je trouve pratique de placer les fichiers de test dans les m√™mes dossiers que les fichiers de composants.  Dans ce cas, les noms des fichiers avec les tests sont identiques aux noms des fichiers avec le code.  Aux noms de test, avant l'extension du nom de fichier, le suffixe <code>.test</code> ajout√© que: <br><br><ul><li>  Nom du fichier du composant: <code>auth.js</code> </li><li>  Nom du fichier de test: <code>auth.test.js</code> </li></ul><br>  Cette approche a plusieurs atouts: <br><br><ul><li>  Il facilite la recherche de fichiers de test.  En un coup d'≈ìil, vous pouvez comprendre s'il existe un test pour le composant avec lequel je travaille. </li><li>  Toutes les commandes d'importation n√©cessaires sont tr√®s simples.  Dans le test, pour importer le code test√©, vous n'avez pas besoin de cr√©er des structures qui d√©crivent, par exemple, la sortie du dossier <code>__tests__</code> .  Ces √©quipes semblent extr√™mement simples.  Par exemple, comme ceci: <code>import Auth from './auth'</code> . </li></ul><br>  Si nous avons des donn√©es utilis√©es pendant le test, par exemple quelque chose comme des simulations de demande d'API, nous les mettons dans le m√™me dossier o√π se trouvent d√©j√† le composant et son test.  Lorsque tout ce qui peut √™tre n√©cessaire se trouve dans un seul dossier, cela contribue √† la croissance de la productivit√©.  Par exemple, si vous utilisez une structure de dossiers ramifi√©s et que le programmeur est s√ªr qu'un certain fichier existe, mais ne se souvient pas de son nom, le programmeur devra rechercher ce fichier dans de nombreux sous-r√©pertoires.  Avec l'approche propos√©e, il suffit de regarder le contenu d'un dossier et tout deviendra clair. <br><br><h2>  <font color="#3AC1EF">Modules CSS</font> </h2><br>  Je suis un grand fan des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modules CSS</a> .  Nous avons constat√© qu'ils sont parfaits pour cr√©er des r√®gles CSS modulaires pour les composants. <br><br>  De plus, j'aime beaucoup la technologie des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">composants de style</a> .  Cependant, au cours de travaux sur des projets auxquels de nombreux d√©veloppeurs ont particip√©, il s'est av√©r√© que la pr√©sence de vrais fichiers CSS dans le projet augmentait l'utilisabilit√©. <br><br>  Comme vous l'avez probablement d√©j√† devin√©, nos fichiers CSS sont situ√©s, comme les autres fichiers, √† c√¥t√© des fichiers de composants, dans les m√™mes dossiers.  Cela simplifie consid√©rablement le mouvement entre les fichiers lorsque vous avez besoin de comprendre rapidement la signification d'une classe. <br><br>  Une recommandation plus g√©n√©rale, dont l'essence impr√®gne tout ce mat√©riel, est que tout le code li√© √† un certain composant doit √™tre conserv√© dans le m√™me dossier dans lequel se trouve ce composant.  Il est r√©volu le temps o√π des dossiers distincts √©taient utilis√©s pour stocker le code CSS et JS, le code de test et d'autres ressources.  L'utilisation de structures de dossiers complexes complique le mouvement entre les fichiers et n'a aucun avantage √©vident, sauf qu'il aide √† "organiser le code".  Conservez les fichiers interconnect√©s dans le m√™me dossier - cela signifie passer moins de temps √† vous d√©placer entre les dossiers pendant le travail. <br><br>  Nous avons m√™me cr√©√© un chargeur Webpack pour CSS, dont les capacit√©s correspondent aux fonctionnalit√©s de notre travail.  Il v√©rifie les noms de classe d√©clar√©s et renvoie une erreur dans la console si nous nous r√©f√©rons √† une classe qui n'existe pas. <br><br><h2>  <font color="#3AC1EF">Presque toujours, un seul code de composant est plac√© dans un fichier</font> </h2><br>  Mon exp√©rience montre que les programmeurs adh√®rent g√©n√©ralement trop strictement √† la r√®gle selon laquelle le code d'un et d'un seul composant React doit √™tre dans un seul fichier.  En m√™me temps, je soutiens pleinement l'id√©e qu'il ne vaut pas la peine de placer trop de composants dans un seul fichier (imaginez les difficult√©s de nommer de tels fichiers!).  Mais je crois qu'il n'y a rien de mal √† mettre dans le m√™me fichier dans lequel se trouve le code d'un certain "gros" composant, et le code du "petit" composant qui lui est associ√©.  Si un tel mouvement aide √† pr√©server la puret√© du code, si le "petit" composant n'est pas trop grand pour le mettre dans un fichier s√©par√©, cela ne nuira √† personne. <br><br>  Par exemple, si je cr√©e un composant <code>&lt;Product&gt;</code> , et j'ai besoin d'un petit morceau de code pour afficher le prix, alors je peux le faire: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Price = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ price, currency }</span></span></span><span class="hljs-function">) =&gt;</span></span> (  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">    {currency}    {formatPrice(price)}  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Product = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function"> =&gt;</span></span> {  <span class="hljs-comment"><span class="hljs-comment">// ,      !  return (    &lt;div&gt;      &lt;Price price={props.price} currency={props.currency} /&gt;      &lt;div&gt;loads more stuff...&lt;/div&gt;    &lt;/div&gt;  ) }</span></span></code> </pre> <br>  La bonne chose √† propos de cette approche est que je n'ai pas eu √† cr√©er de fichier s√©par√© pour le composant <code>&lt;Price&gt;</code> et que ce composant est disponible exclusivement pour le composant <code>&lt;Product&gt;</code> .  Nous n'exportons pas ce composant, il ne peut donc pas √™tre import√© ailleurs dans l'application.  Cela signifie que lorsqu'on vous demande de mettre <code>&lt;Price&gt;</code> dans un fichier s√©par√©, vous pouvez donner une r√©ponse claire et positive si vous devez l'importer ailleurs.  Sinon, vous pouvez vous passer de mettre le code <code>&lt;Price&gt;</code> dans un fichier s√©par√©. <br><br><h2>  <font color="#3AC1EF">Dossiers s√©par√©s pour les composants universels</font> </h2><br>  Nous utilisons r√©cemment des composants universels.  En fait, ils forment notre syst√®me de conception (que nous pr√©voyons de publier un jour), mais jusqu'√† pr√©sent, nous avons commenc√© petit - avec des composants comme <code>&lt;Button&gt;</code> et <code>&lt;Logo&gt;</code> .  Un composant est consid√©r√© comme ¬´universel¬ª s'il n'est pas li√© √† une partie sp√©cifique du site, mais est l'un des √©l√©ments constitutifs de l'interface utilisateur. <br><br>  Des composants similaires se trouvent dans votre propre dossier ( <code>src/components/generic</code> ).  Cela simplifie consid√©rablement le travail avec tous les composants universels.  Ils sont au m√™me endroit - c'est tr√®s pratique.  Au fil du temps, au fur et √† mesure que le projet se d√©veloppe, nous pr√©voyons de d√©velopper un guide de style (nous sommes de grands fans de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">react-styleguidist</a> ) afin de simplifier davantage le travail avec des composants universels. <br><br><h2>  <font color="#3AC1EF">Utilisation d'alias pour importer des entit√©s</font> </h2><br>  La structure de dossiers relativement plate dans nos projets garantit que les commandes d'importation n'ont pas de structures trop longues comme <code>../../</code> .  Mais c'est difficile de s'en passer.  Par cons√©quent, nous avons utilis√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">babel-plugin-module-resolver</a> pour configurer des alias qui simplifient les commandes d'importation. <br><br>  Vous pouvez faire de m√™me avec Webpack, mais gr√¢ce au plugin Babel, les m√™mes commandes d'importation peuvent fonctionner dans les tests. <br><br>  Nous l'avons configur√© avec une paire d'alias: <br><br><pre> <code class="javascript hljs">{  <span class="hljs-attr"><span class="hljs-attr">components</span></span>: <span class="hljs-string"><span class="hljs-string">'./src/components'</span></span>,  <span class="hljs-string"><span class="hljs-string">'^generic/([\\w_]+)'</span></span>: <span class="hljs-string"><span class="hljs-string">'./src/components/generic/\\1/\\1'</span></span>, }</code> </pre> <br>  Le premier est extr√™mement simple.  Il vous permet d'importer n'importe quel composant, en d√©marrant la commande avec le mot <code>components</code> .  Dans l'approche normale, les commandes d'importation ressemblent √† ceci: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Product <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../components/product/product'</span></span></code> </pre> <br>  Au lieu de cela, nous pouvons les √©crire comme ceci: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Product <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'components/product/product'</span></span></code> </pre> <br>  Les deux commandes importent le m√™me fichier.  C'est tr√®s pratique, car cela vous permet de ne pas penser √† la structure des dossiers. <br><br>  Le deuxi√®me alias est un peu plus compliqu√©: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">'^generic/([\\w_]+)'</span></span>: <span class="hljs-string"><span class="hljs-string">'./src/components/generic/\\1/\\1'</span></span>,</code> </pre> <br>  Nous utilisons ici l'expression r√©guli√®re.  Il trouve les commandes d'importation qui commencent par <code>generic</code> (le signe <code>^</code> au d√©but de l'expression vous permet de s√©lectionner uniquement les commandes qui commencent par <code>generic</code> ) et capture ce qui est apr√®s <code>generic/</code> dans le groupe.  Apr√®s cela, nous utilisons le fragment captur√© ( <code>\\1</code> ) dans la construction <code>./src/components/generic/\\1/\\1</code> . <br><br>  Par cons√©quent, nous pouvons utiliser les commandes d'importation pour les composants universels de ce type: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Button <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'generic/button'</span></span></code> </pre> <br>  Ils sont convertis en commandes suivantes: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Button <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'src/components/generic/button/button'</span></span></code> </pre> <br>  Cette commande, par exemple, sert √† importer un fichier JSX d√©crivant un bouton universel.  Nous avons fait tout cela parce que cette approche simplifie consid√©rablement l'importation de composants universels.  De plus, cela nous sera tr√®s utile si nous d√©cidons de changer la structure des fichiers du projet (cela, comme notre syst√®me de conception se d√©veloppe, est tout √† fait possible). <br><br>  Ici, je voudrais noter que vous devez √™tre prudent lorsque vous travaillez avec des pseudonymes.  Si vous n'en avez que quelques-uns et qu'ils sont con√ßus pour r√©soudre des probl√®mes d'importation standard, tout va bien.  Mais si vous en avez beaucoup, ils peuvent apporter plus de confusion que de bien. <br><br><h2>  <font color="#3AC1EF">Dossier lib universel pour les utilitaires</font> </h2><br>  Je voudrais retrouver tout le temps que j'ai pass√© √† essayer de trouver l'endroit parfait pour du code qui n'est pas du code composant.  J'ai partag√© tout cela selon diff√©rents principes, en mettant en √©vidence le code des utilitaires, des services, des fonctions auxiliaires.  Tout cela a tellement de noms que je ne les mentionnerai pas tous.  Maintenant, je n'essaie pas de comprendre la diff√©rence entre "l'utilitaire" et la "fonction auxiliaire" afin de trouver la bonne place pour un certain fichier.  Maintenant, j'utilise une approche beaucoup plus simple et plus compr√©hensible: tout cela tombe dans un seul dossier <code>lib</code> . <br><br>  √Ä long terme, la taille de ce dossier peut s'av√©rer si grande que vous devez le structurer d'une mani√®re ou d'une autre, mais c'est tout √† fait normal.  Il est toujours plus facile d'√©quiper quelque chose d'une certaine structure que de se d√©barrasser des erreurs de structuration excessive. <br><br>  Dans notre projet Thread, le dossier <code>lib</code> contient environ 100 fichiers.  Ils sont divis√©s √† peu pr√®s √©galement en fichiers contenant l'impl√©mentation de certaines fonctionnalit√©s et en fichiers de test.  Cela n'a pas pos√© de difficult√©s pour trouver les fichiers n√©cessaires.  Gr√¢ce aux <code>lib/name_of_thing</code> recherche intelligents int√©gr√©s √† la plupart des √©diteurs, je dois presque toujours saisir quelque chose comme <code>lib/name_of_thing</code> , et ce dont j'ai besoin se trouve. <br><br>  De plus, nous avons un alias qui simplifie l'importation √† partir du dossier <code>lib</code> , vous permettant d'utiliser des commandes de ce type: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> formatPrice <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lib/format_price'</span></span></code> </pre> <br>  Ne soyez pas alarm√© par les structures de dossiers plats qui peuvent entra√Æner le stockage de plusieurs fichiers dans un dossier.  Habituellement, une telle structure est tout ce qui est n√©cessaire pour un certain projet. <br><br><h2>  <font color="#3AC1EF">Masquage de biblioth√®ques tierces derri√®re des API natives</font> </h2><br>  J'aime vraiment le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">syst√®me de</a> surveillance des bogues <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sentry</a> .  Je l'ai souvent utilis√© lors du d√©veloppement de parties serveur et client d'applications.  Avec son aide, vous pouvez intercepter des exceptions et recevoir des notifications sur leur occurrence.  Il s'agit d'un excellent outil qui nous permet de nous tenir au courant des probl√®mes rencontr√©s sur le site. <br><br>  Chaque fois que j'utilise une biblioth√®que tierce dans mon projet, je r√©fl√©chis √† la mani√®re de la faire pour que, si n√©cessaire, elle puisse √™tre remplac√©e le plus facilement possible par autre chose.  Souvent, comme avec le m√™me syst√®me Sentry que nous aimons vraiment, ce n'est pas n√©cessaire.  Mais, juste au cas o√π, cela ne fait jamais de mal de penser √† un moyen d'√©viter d'utiliser un certain service ou un moyen de le changer pour autre chose. <br><br>  La meilleure solution √† ce probl√®me est de d√©velopper votre propre API qui cache les outils des autres.  Cela ressemble √† la cr√©ation d'un module <code>lib/error-reporting.js</code> qui exporte la fonction <code>reportError()</code> .  Le c≈ìur de ce module utilise Sentry.  Mais Sentry n'est directement import√© que dans ce module et nulle part ailleurs.  Cela signifie que remplacer Sentry par un autre outil sera tr√®s simple.  Pour ce faire, il suffira de changer un fichier en un seul endroit.  Tant que l'API publique de ce fichier reste inchang√©e, le reste du projet ne saura m√™me pas qu'en appelant <code>reportError()</code> , ce n'est pas Sentry qui est utilis√©, mais autre chose. <br><br>  Veuillez noter que l'API publique du module s'appelle les fonctions qu'elle exporte et leurs arguments.  Ils sont √©galement appel√©s l'interface publique du module. <br><br><h2>  <font color="#3AC1EF">Utilisation de PropTypes (ou d'outils tels que TypeScript ou Flow)</font> </h2><br>  Quand je fais de la programmation, je pense √† trois versions de moi-m√™me: <br><br><ul><li>  Jack du pass√© et le code qu'il a √©crit (code parfois douteux). </li><li>  Aujourd'hui, Jack et le code qu'il √©crit maintenant. </li><li>  Jack du futur.  Quand je pense √† cet avenir moi-m√™me, je me pose la question de savoir comment √©crire du code qui me facilitera la vie √† l'avenir. </li></ul><br>  Cela peut sembler bizarre, mais je l'ai trouv√© utile, en r√©fl√©chissant √† la fa√ßon d'√©crire du code, posez la question suivante: "Comment sera-t-il per√ßu dans six mois?". <br><br>  Un moyen simple de vous rendre pr√©sent et de vous rendre plus productif consiste √† sp√©cifier les types de propri√©t√©s ( <code>PropTypes</code> ) utilis√©es par les composants.  Cela vous fera gagner du temps dans la recherche de fautes de frappe possibles.  Cela vous prot√©gera des situations o√π, en utilisant le composant, des propri√©t√©s de mauvais types sont appliqu√©es, ou ils oublient compl√®tement le transfert de propri√©t√©s.  Dans notre cas, la <a href="">r√®gle eslint-react / prop-types</a> est un bon rappel de la n√©cessit√© d'utiliser <code>PropTypes</code> . <br><br>  Si vous allez encore plus loin, il est recommand√© de d√©crire les propri√©t√©s aussi pr√©cis√©ment que possible.  Par exemple, vous pouvez faire ceci: <br><br><pre> <code class="javascript hljs">blogPost: PropTypes.object.isRequired</code> </pre> <br>  Mais ce serait bien mieux de faire √ßa: <br><br><pre> <code class="javascript hljs">blogPost: PropTypes.shape({  <span class="hljs-attr"><span class="hljs-attr">id</span></span>: PropTypes.number.isRequired,  <span class="hljs-attr"><span class="hljs-attr">title</span></span>: PropTypes.string.isRequired,  <span class="hljs-comment"><span class="hljs-comment">//    }).isRequired</span></span></code> </pre> <br>  Dans le premier exemple, la v√©rification minimale n√©cessaire est effectu√©e.  Dans le second, le d√©veloppeur re√ßoit des informations beaucoup plus utiles.  Ils seront tr√®s utiles, par exemple, si quelqu'un oublie un certain champ utilis√© dans l'objet. <br><br><h2>  <font color="#3AC1EF">Les biblioth√®ques tierces ne sont utilis√©es que lorsqu'elles sont vraiment n√©cessaires.</font> </h2><br>  Cette astuce est plus pertinente que jamais avec l'av√®nement des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">hame√ßons React</a> .  Par exemple, j'ai particip√© √† une importante modification d'une des parties du site Thread et j'ai d√©cid√© d'accorder une attention particuli√®re √† l'utilisation de biblioth√®ques tierces.  ,       ,          .   (   ),  .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ,      React-.      ‚Äî  ,    ,   React  API Context,        . <br><br> ,  ,  Redux,    .       ,      (            ,     ). ,           ,   ,           . <br><br><h2> <font color="#3AC1EF">   </font> </h2><br>   ‚Äî   ,       ,   .      . <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     emitter.send('user_add_to_cart') //     emitter.on('user_add_to_cart', () =&gt; {  //  -  })</span></span></code> </pre> <br>      ,            .     ,             .      ,   ¬´   ¬ª.   ,      ,   ,    .         . ¬´¬ª      - ,       .  ,    ,        . <br><br>      Redux.       .     ,  .  ,     ,  <code>user_add_to_cart</code> ,   .       .  , ,       Redux,      .     ,    Redux    ,     . <br><br>  ,       ,   ,  ,     : <br><br><ul><li>  ,   , .         . </li><li>  ,  ,   .       ,    . </li><li>  ,  -  , . ,     ,    . </li></ul><br>    - ,    .    ,        ,   .      ,        ,   ,           ¬´¬ª . <br><br>       ,       ,  API Context  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">-</a> . <br><br><h2> <font color="#3AC1EF">     </font> </h2><br>         ,    (, ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> ).     :    ,      . <br><br> ,    ,          ,     .        : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> wrapper = mount(  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">UserAuth.Provider</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ComponentUnderTest</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">UserAuth.Provider</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> )</span></span></code> </pre> <br>      : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> wrapper = mountWithAuth(ComponentUnderTest, {  <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Jack'</span></span>,  <span class="hljs-attr"><span class="hljs-attr">userId</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, })</code> </pre> <br>       : <br><br><ul><li>     .       ‚Äî     ,     ,   ,      . </li><li>      ‚Äî    <code>mountWithAuth</code>       .    ,          . </li></ul><br>   ,           <code>test-utils.js</code> . ,       ‚Äî   .       . <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>       .     ,     , ,  ,      .         ,  ,              .        ,   :       .               .           -     ,   . <br><br>  <b>Chers lecteurs!</b>     React-? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/rw/6v/yn/rw6vyn2bxx4usoqc39holmj2z8m.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr460793/">https://habr.com/ru/post/fr460793/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr460777/index.html">C'est le tour: pourquoi Apple a chang√© les exigences pour les d√©veloppeurs d'applications</a></li>
<li><a href="../fr460779/index.html">D√©bogage avanc√©</a></li>
<li><a href="../fr460783/index.html">Consensus sur la r√©putation du n≈ìud. Est-ce n√©cessaire?</a></li>
<li><a href="../fr460785/index.html">Applications pour les livres √©lectroniques sur le syst√®me d'exploitation Android. Partie 1. Introduction et applications bureautiques</a></li>
<li><a href="../fr460789/index.html">Enfin, le rajeunissement est une chose</a></li>
<li><a href="../fr460795/index.html">12 conseils pour am√©liorer les performances des applications JavaScript</a></li>
<li><a href="../fr460797/index.html">D√©veloppement JavaScript responsable Partie 2</a></li>
<li><a href="../fr460799/index.html">Demande de paiement API de navigateur standard</a></li>
<li><a href="../fr460801/index.html">27 outils VS Code g√©niaux pour les d√©veloppeurs JavaScript modernes</a></li>
<li><a href="../fr460803/index.html">Lire pour l'√©t√©: des livres pour les techniciens</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>