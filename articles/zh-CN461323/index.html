<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👆🏽 😚 🆚 波动函数崩溃算法的易于理解的解释 👩‍⚕️ 🧒🏻 🍬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wavefunction Collapse Algorithm教导计算机即兴创作。 在输入处，它接收原型数据并创建与原始数据类似的程序生成数据。 


 （ 来源 ） 

 它通常用于创建图像，但它也可以用于建造城市 ， 滑板场和撰写可怕的诗歌 。 


 （ 来源 ） 

 波动函数的崩溃是一个非...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>波动函数崩溃算法的易于理解的解释</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461323/"> Wavefunction Collapse Algorithm教导计算机即兴创作。 在输入处，它接收原型数据并创建与原始数据类似的程序生成数据。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8ba/2ac/867/8ba2ac86732b567e3dc2c20793051e0a.png"></div><br>  <em>（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">来源</a> ）</em> <br><br> 它通常用于创建图像，但它也可以用于建造<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">城市</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">滑板场</a>和撰写<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">可怕的诗歌</a> 。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b18/54d/0a4/b1854d0a45b83b3f99be84e626650285.png"></div><br>  <em>（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">来源</a> ）</em> <br><br> 波动函数的崩溃是一个非常独立的算法，几乎不需要外界的帮助或指示。 您只需要举例说明您想要实现的样式，其余的工作将由他完成。 尽管自给自足，他却出奇的简单。 它不使用任何神经网络，随机森林或任何其他类似于机器学习的东西。 如果您处理好这个主意，它对您将变得非常容易理解和直观。 <br><br>  wave函数崩溃的大多数实现和解释都是该算法的完整，速度优化版本。 当然，它们都是重要且必要的，但是很难从头开始理解它们。 在本文中，我将以我理解的一种简单语言来解释所有内容，重点是Wavefunction的受限版本，我将其称为<em>Even Simpler Tiled Model</em> 。 另外，我<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在Github上</a>发布<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">了ESTM的示例实现</a> 。 其中的代码效率低下且速度慢，但是非常易于阅读和详细注释。 一旦您了解了ESTM的基础技术，您就将更接近了解该算法的更复杂版本。 如果您想了解波动函数折叠算法，那么本文将是一个不错的开始。 <br><a name="habracut"></a><br> 让我们从故事开始。 <br><br><h2> 婚礼 </h2><br> 想象一下，您正在计划婚礼。 除了选择珠宝和音乐外，您还需要为晚餐的客人创建一个座位计划。 您的家人喜欢吵架和调皮，因此可能很困难。 父亲不能比母亲坐在两张桌子旁边。 如果一个堂兄不和另一个堂兄坐着，她就会变得孤独。 而且最好不要将罗伊叔叔种植在伴侣家庭的环保成员旁边。 仍然只有5小时才能到达食物，因此您决定使用wave函数折叠算法来攻击这项顽固的任务。 <br><br> 您从一长串规则和空座位计划开始。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d6b/81f/be8/d6b81fbe8f02d46e2c8605e672daf480.png"></div><br> 您创建计划的原始<em>波动函数</em> 。 她将每把椅子与可以坐在椅子上的人的名单相关联。 任何人都可以坐在任何椅子上。 坐客的波动函数从每种可能方案的完全<em>叠加</em> （该概念是从量子物理学借来的）开始的。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/266/24d/401/26624d401c97db4be9042eac28e4eb44.png"></div><br>  Schrödinger的猫同时死了还活着，直到有人打开箱子检查了一下。 您的计划同时是所有可能的计划，直到您整理好一切。 完全重叠是有用的理论构架，但不会帮助您祖母弄清楚她需要坐在哪里。 您需要将访客位置的波动函数带到一个特定的状态，然后可以将其转换为普通的非量子名片。 <br><br> 我们首先通过对一张椅子执行<em>wave函数</em>的<em>折叠来</em>开始执行此操作。 我们选择一把椅子，查看可以坐在椅子上的人的名单，然后将其随机分配给其中一位。 在这种情况下，大便的波动功能会减弱。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/abc/e44/fd1/abce44fd1d7be4c3b25db2fab11c3898.png"></div><br> 这种选择的结果会扩展到其余椅子的波动功能。 如果罗伊叔叔坐在表2上，表弟弗兰克和米歇尔·奥巴马（伴侣的家人的朋友）肯定不会和他在一起。 如果米歇尔不在表2的位置，那么巴拉克也不会在他后面。 我们正在通过从可能的候选人列表中删除人员来更新位置图的wave函数。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/435/12f/716/43512f7161b3572e88320d38daa53fbe.png"></div><br> 一旦振动消除，我们将重复此过程。 我们选择了另一把椅子，并选择了几种可能的椅子并折叠其波动函数，并随机选择其中一名可接受的椅子。 同样，我们将这种选择所引起的振动扩展到计划的其余部分，如果人们不再能够坐在椅子上，则不再使用椅子的波动功能。 <br><br> 我们重复此过程，直到波动函数崩溃（即其中仅剩下一个就座的人）为止，或者直到达到<em>矛盾</em>为止。 矛盾是没有人可以坐的椅子，因为上次选举都将他们开除。 该矛盾使得不可能整个波函数崩溃。 <br><br> 如果您遇到了矛盾，那么最简单的方法就是重新开始。 舍弃所有先前的工作，找到一个新的空计划，然后再次启动算法，从而完成另一把椅子的波动函数的折叠。 您还可以实施回溯系统，该系统允许您取消特定选择，而不是立即放弃所有内容（“如果Sheila转移到椅子54会怎样？”）。 <br><br> 经过几次错误的开始之后，您最终将陷入完全崩溃的状态，在这种状态下，每把椅子都被精确分配给一个人，并且遵循所有规则。 做完了！ <br><br><h2> 从婚礼到位图 </h2><br> 这不是理论上的例子。 您确实可以实现wave功能崩溃的变体，这将为婚礼的客人创建一个座位计划。 但是，在更传统的Wavefunction Collapse中，我们通常不尝试在婚礼上让人们坐下，而是在输出图像中排列像素。 但是，过程将非常相似。 我们教该算法一组输出应满足的规则。 我们初始化wave函数。 我们执行一个元素的折叠，并将结果扩展到波动函数的其余部分。 而且，我们将继续这样做，直到波动函数完全消失，或者直到出现矛盾为止。 <br><br> 波动函数的传统塌陷与婚礼塌陷的区别在于我们向算法传授必须遵循的规则的方式。 在婚礼版本中，我们必须自己写下规则。 但是在传统版本中，我们只是给该算法提供示例图像，然后基于该图像创建其余图像。 他解析了一个示例，分析了其模式，并找出像素或<em>图块</em>应如何对齐。 <br><br> 让我们通过查看一个简单的特殊情况开始研究波动函数的实际折叠，这种特殊情况被<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>ExUtumno</code></a> （算法的创建者）称为<em>简单平铺模型</em> 。 <br><br><h2> 简单平铺模型 </h2><br> 在简单图块模型中，输入和输出图像是由少量预定义的图块构成的，并且输出图像中的每个正方形都仅限于其四个最近的邻居。 例如，假设我们为具有顶视图的二维游戏生成随机世界。 我们可以拥有用于陆地，海岸和海洋的瓷砖，以及一系列规则，例如“海岸可以靠近海”，“土地可以靠近海岸”和“海可以与另一海相邻”。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fad/636/6e9/fad6366e936dea0271782d2179260b57.png"></div><br>  <em>简单平铺模型</em>考虑了其平铺的对称性和旋转性。 例如，陆地可能位于海岸附近，但方向正确。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0df/31c/70e/0df31c70e056e480c35b1734c951ee40.png"></div><br> 这种对称处理可提供更好的输出图像，但会使代码复杂化。 为了使事情简单，让我们看一个更简单的wave函数崩溃的视图，我称它为<em>Even Simpler Tiled Model</em> 。 <br><br><h2> 更加简单的平铺模型 </h2><br> 甚至更简单的图块模型（“甚至更简单的图块模型”）都类似于简单图块模型，但是其图块不具有对称性。 每个图块都是一个相同颜色的像素，也就是说，我们将无法以任何方式混淆其边缘。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6da/0ae/fcd/6da0aefcd8f0a78b05109d5f9b89cee4.png"></div><br> 甚至更简单的图块模型规则也可以确定哪些图块可以彼此相邻放置以及以哪种方向放置。 每个规则是一个由三个元素组成的元组（3个元组）：两个图块和一个方向。 例如， <code>(SEA, COAST, LEFT)</code>表示<code>SEA</code>图块（海）可以比<code>COAST</code>图块（海岸） <code>COAST</code> 。 该规则必须附带另一条以<code>COAST</code>表示情况的规则- <code>(COAST, SEA, RIGHT)</code> 。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/918/fd1/c25/918fd1c25a24f6eda37f75d5ef39748a.png"></div><br> 如果您希望<code>SEA</code>贴不仅位于<code></code> ，还位于<code>COAST</code>贴的<code></code> 。 那么他们需要其他规则： <code>(SEA, COAST, RIGHT)</code>和<code>(COAST, SEA, LEFT)</code> 。 <br><br> 就像我上面说的，我们不需要自己创建所有这些规则的列表。  wave函数的折叠可以通过解析示例图像并收集其中包含的所有三元组的列表，为甚至更简单的平铺模型创建一组规则。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/944/ea7/8ff/944ea78ff7e49911267b435a8741fde9.png"></div><br> 检查了上面显示的示例图像后，Even Simpler Tiled Model注意到，海图块只能在海岸图块的下方或侧面，或其他海图块附近的任何位置。 她还指出，海岸瓦片可以位于陆地，海洋或其他海岸瓦片旁边，但只能位于海洋瓦片之上和之下。 她没有尝试得出任何更复杂的规则，例如，“海图块应至少靠近一个海图块”或“每个岛必须至少包含一个海图块”。 没有一种瓷砖可以影响以下事实：某些类型的瓷砖可以或不能位于距它们两个或多个正方形的位置。 这类似于婚礼计划模型，其中唯一的规则是：“ X可以坐在Y旁边”。 <br><br> 在分析传入的图像时，我们还需要记录每个图块相遇的频率。 以后，当选择正方形的波动函数时，必须使用这些数字作为权重，必须对其进行折叠，并且在选择折叠后分配给正方形的图块时也可以使用这些数字。 <br><br> 了解了输出图像必须遵守的规则后，我们就可以构建输出图像的波动函数的崩溃了。 <br><br><h2> 倒塌 </h2><br> 就像在婚礼示例中一样，我们使用波函数开始折叠过程，在该函数中，输出图像的每个正方形都与每种类型的图块重叠。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b00/c76/278/b00c76278927df358d545336dd0e73c4.png"></div><br> 我们从选择一个其波函数将崩溃的正方形开始。 在婚礼示例中，这种选择是偶然的。 但是，正如<code>ExUtumno</code>指出的那样，人们通常以不同的方式处理这些任务。 相反，他们寻找<em>熵</em>最低的正方形。 熵是不确定性和无序性的量度。 通常，具有高熵的正方形是在其波函数中保留许多可能的图块的正方形。 尚不清楚他最终倒在哪个瓷砖上。 低熵平方是波动函数中具有尽可能少的图块的平方。 他所塌陷的一组瓷砖已经非常有限。 <br><br> 例如，在“甚至更简单的图块模型”中，没有有关周围正方形的信息的正方形是无限的，并且可以成为任何图块。 因此，它具有很高的熵。 但是一个周围已经折叠了几个正方形的正方形只能选择2个图块。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1cf/3ec/319/1cf3ec3198ebde9f2f3e3b3620efdfff.png"></div><br> 上图中中心正方形的波动函数并未完全崩溃，但我们已经知道它不可能是地砖。 但是，它已经受到限制，这意味着它的<em>熵</em>低于右上角的正方形，后者仍然可以是陆地，海洋或海岸。 <br><br> 人们通常在手动解决此类问题时会注意这种具有低熵的有限磁贴。 即使您不使用wave的折叠功能来创建用于在婚礼上放置客人的计划并自行制定，也要专注于计划中已经存在最大限制的区域。 您不会将Dwayne放在表1上，然后随机跳转以使Katie到达表7（到目前为止是空的）。 首先放置Dwayne，然后确定谁可以坐在他旁边，然后谁可以坐在此人旁边，依此类推。 我还没有看到任何理由，但是我的直觉说，使用这种<em>最小熵的启发法</em>可能会产生比如果您随机选择要折叠的正方形更少的<em>矛盾</em> 。 <br><br>  <em>香农公式</em>被用作波动函数崩溃算法中的熵公式。 它使用在上一步中从传入图像中解析的图块的权重： <br><br><pre> <code class="cpp hljs"># Sums are over the weights of each remaining <span class="hljs-meta"><span class="hljs-meta"># allowed tile type for the square whose # entropy we are calculating. shannon_entropy_for_square = log(sum(weight)) - (sum(weight * log(weight)) / sum(weight))</span></span></code> </pre> <br> 在计算出具有最小熵的波动函数的平方后，我们将其收缩。 为此，我们随机选择一个仍可用于正方形的图块，并按从传入图像中解析出的图块的权重对其进行加权。 使用权重是因为它提供了更逼真的输出图像。 假设正方形的波动函数报告它可以是陆地或海岸。 我们不一定总是选择概率为50％的选项之一。 如果输入图像的地块多于海岸，那么我们应该在输出图像中体现这一优势。 使用简单的全局权重即可实现。 如果在示例图像中有<code>20</code>陆地图块和<code>10</code>海岸图块，则该正方形以<code>2/3</code>的概率塌陷为土地，而在海岸中以<code>1/3</code>的剩余概率崩溃。 <br><br> 然后，我们将选择的结果扩展到输出的其余波函数（“如果该图块被证明是海，则该图块不能是陆地，也就是说，这不能是海岸”）。 当所有这些震颤都消除后，我们使用最小熵试探法重复该过程，以选择下一个崩溃的图块。 我们重复这个崩溃传播循环，直到输出图像的整个波动函数完全崩溃并且可以返回结果为止，或者直到出现矛盾并返回错误为止。 <br><br> 结果，我们创造了一个世界（或错误）。 <br><br><h2> 接下来要去哪里 </h2><br> 处理了甚至更简单的平铺模型之后，您就可以攀登算法的功能和复杂性的阶梯。 从我们在本文开头提到的简单平铺模型开始，然后继续进行完整的重叠模型。 在重叠模型中，图块或像素会相互影响。 如果您了解这种情况，则<code>ExUtumno</code>注意到简单平铺模型类似于1阶马尔可夫链，而更复杂的模型类似于较大阶的链。 <br><br>  Wavefunction Collapse甚至可以考虑其他限制，例如“此图块必须是海”或“此像素必须是红色”或“输出中只能有一个怪物”。 所有这些都在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">主项目</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">自述文件中进行了</a>描述。 您还可以研究对完整实现进行的速度优化。 不必在每次迭代中重新计算每个正方形的熵，并且可以更快地完成通过波动函数的信息传播。 随着输出图像尺寸的增加，这些方面变得越来越重要。 <br><br>  wave函数的崩溃是一个美丽而强大的工具，值得精通。 下次计划婚礼或建立程序世界时，请考虑一下。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN461323/">https://habr.com/ru/post/zh-CN461323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN461309/index.html">除Kotlin之外的所有内容：Andrei Breslav谈IT，情感等方面的性别平衡</a></li>
<li><a href="../zh-CN461313/index.html">Zimbra 8.8.15 LTS发布</a></li>
<li><a href="../zh-CN461317/index.html">创建优质iOS应用程序的9条原则</a></li>
<li><a href="../zh-CN461319/index.html">游戏设计师会做什么？</a></li>
<li><a href="../zh-CN461321/index.html">泛型和元编程模型：Go，Rust，Swift，D等</a></li>
<li><a href="../zh-CN461325/index.html">PHDays 9的胜利。我们分三部分分享生活技巧。 第三部分</a></li>
<li><a href="../zh-CN461327/index.html">前端危机？</a></li>
<li><a href="../zh-CN461329/index.html">自动呼吸器官分割</a></li>
<li><a href="../zh-CN461333/index.html">ITX5 mitap：直播JAVA，Kotlin魔术和番茄火种</a></li>
<li><a href="../zh-CN461339/index.html">如何成为数据驱动。 从一开始</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>