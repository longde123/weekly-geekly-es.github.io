<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍺 🔠 🐄 为什么我们需要在Elbrus上进行低级优化，或者如何将识别系统加速一倍半 🏾 🏎️ 🌭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在2019年举行会议之后，除了为Smart IDReader开发新功能而休息了一点之后，我们还记得我们很长时间没有写任何有关家用处理器的文章了。 因此，我们决定紧急纠正并在Elbrus上显示另一个识别系统。 


作为一种识别系统，绘画对象的识别系统被认为是“在不受控制的条件下，通过一个实例的方法进...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>为什么我们需要在Elbrus上进行低级优化，或者如何将识别系统加速一倍半</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/smartengines/blog/438948/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ly/ld/rm/lyldrmwtslapvbi5e1tzou01qpq.jpeg"></div><br><p> 在2019年举行会议之后，除了为Smart IDReader开发新功能而休息了一点之后，我们还记得我们很长时间没有写任何有关家用处理器的文章了。 因此，我们决定紧急纠正并在Elbrus上显示另一个识别系统。 </p><br><p>作为一种识别系统，绘画对象的识别系统被认为是“在不受控制的条件下，通过一个实例的方法进行训练” [1]。 该系统基于奇异点及其描述符建立图像描述，并在索引的图片数据库中进行搜索。 我们分析了该系统的性能，并确定了算法中最耗时的低级部分，然后使用Elbrus平台的工具对其进行了优化。 </p><a name="habracut"></a><br><h3 id="o-kakoy-raspoznayuschey-sisteme-voobsche-idet-rech"> 我们在谈论什么样的识别系统？ </h3><br><p> 当前，大多数博物馆和美术馆使用各种工具来独立地熟悉展览会。 与经典的音频指南一起，使用图像处理和分析方法的移动应用程序也已广泛普及。 这些应用程序中的一些可以识别展览品的图形代码（条码或QR）[2]，对于其他应用程序[3-4]，输入数据是带有特写拍摄的展览品的照片或视频帧（Smartify，Artbit）。 当然，与手动输入展览品编号或QR识别的解决方案相比，后一类的``移动指南''对用户来说更方便[5]：数量和代码很小，其搜索和输入需要与展览会审核无关的其他操作。 我们将考虑的就是这样一个系统。 </p><br><p> 图像中识别绘画的任务规定如下。 索取图片 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">问</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.838ex" height="2.419ex" viewBox="0 -780.1 791.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-51" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> Q </script> 必须分配给其中一个类别 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="noError" id="MJXp-Span-4" style="display: inline-block;">C&nbsp;=&nbsp;\&nbsp;{C_i&nbsp;\}&nbsp;_&nbsp;{i&nbsp;\&nbsp;in&nbsp;[0，N]}</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">C&nbsp;=&nbsp;\&nbsp;{C_i&nbsp;\}&nbsp;_&nbsp;{i&nbsp;\&nbsp;in&nbsp;[0，N]}</span></span><script type="math/tex" id="MathJax-Element-2"> C = \ {C_i \} _ {i \ in [0，N]} </script> 在哪里 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-5"><span class="MJXp-msubsup" id="MJXp-Span-6"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7" style="margin-right: 0.05em;">C</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-8" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.461ex" height="2.419ex" viewBox="0 -780.1 1059.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-43" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-69" x="1011" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> C_i </script>  -图片类 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-9"><span class="MJXp-mrow" id="MJXp-Span-10"><span class="MJXp-mo" id="MJXp-Span-11" style="margin-left: 0.278em; margin-right: 0.278em;">我</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.928ex" height="2.298ex" viewBox="0 -780.1 830 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">我</text></g></svg></span><script type="math/tex" id="MathJax-Element-4">我</script> 展览在 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-12"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13">i</span><span class="MJXp-mtext" id="MJXp-Span-14">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-16">n</span><span class="MJXp-mo" id="MJXp-Span-17" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-18">1</span><span class="MJXp-mrow" id="MJXp-Span-19"><span class="MJXp-mo" id="MJXp-Span-20" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21">N</span><span class="MJXp-mo" id="MJXp-Span-22" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.028ex" height="2.66ex" viewBox="0 -832 4317.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-69" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-69" x="595" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-6E" x="941" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMAIN-5B" x="1541" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMAIN-31" x="1820" y="0"></use><g transform="translate(2320,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-4E" x="3150" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMAIN-5D" x="4038" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> i \ in [1，N] </script>  ， <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-23"><span class="MJXp-msubsup" id="MJXp-Span-24"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25" style="margin-right: 0.05em;">C</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-26" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.716ex" height="2.419ex" viewBox="0 -780.1 1169.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-43" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMAIN-30" x="1011" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> C_0 </script>  -与“未知图片”值相对应的一类其他图像。 对于每个 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-27"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29" style="margin-right: 0.05em;">C</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.461ex" height="2.419ex" viewBox="0 -780.1 1059.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-43" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-69" x="1011" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> C_i </script> 参考图像集 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-31"><span class="MJXp-msubsup" id="MJXp-Span-32"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-34" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.157ex" height="2.419ex" viewBox="0 -780.1 928.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-69" x="826" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> T_i </script>  。 <br> 此外，我们遵循以下假设： </p><br><ol><li> 索取图片 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-35"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">Q</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.838ex" height="2.419ex" viewBox="0 -780.1 791.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-51" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> Q </script> 因此，在旅途中，未经准备的用户使用移动设备的相机获取的信息是： <br>  a）它可能包含视觉缺陷-强光，散焦的区域，噪音； <br>  b）角度，取景框，照明和色彩平衡未知（图1a）； <br>  c）图片上可能存在异物，例如风景，相框，访客等（图1b）。 </li><li> 参考图片 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-37"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-54" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> T </script> 它是具有图片的正面投影或其数字复制的高分辨率图像。 该标准不包含异物和视觉缺陷。 标准可以是，例如，定性扫描的艺术专辑页面（图2）。 </li><li> 图片（根据要求和标准）可以适用于任何样式-写实， <br> 印象派，抽象派，分形图形等 </li><li> 班数 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-39"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-40">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-11"> N </script> 对应于收藏的大小，并且一个画廊可以达到 <br> 数十万个展品[6]。 </li></ol><br><img src="https://habrastorage.org/webt/_f/ud/yw/_fudywtqtobjv6xx2asfj0e-7em.png"><br><p>  <em>图1-图像请求的示例a）在弱光下从远处拍摄照片，b）访客在框架中。</em> </p><br><img src="https://habrastorage.org/webt/dn/e5/uz/dne5uzig5x0pwsikf-f4ykgedmo.png"><br><p>  <em>图2-绘画的参考图像示例a）克劳德·莫奈（Claude Monet），《韦斯特海姆（De Voorzaan en de Westerhem）》，b）萨尔瓦多·达利（Salvador Dali），《持久性记忆》</em> </p><br><p> 我们解决此问题的主要思想是基于从输入图像中对图片进行特殊描述的构造，然后将其用于在高分辨率绘画参考图像的描述数据库中搜索该图片，该参考图像的描述不受几何变形和其他照片缺陷的影响。 使用YACIPE算法[7]找到的奇异点的坐标及其RFD描述符就是这样的描述。 </p><br><p> 对于每个参考 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-41"><span class="MJXp-msubsup" id="MJXp-Span-42"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-44" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.157ex" height="2.419ex" viewBox="0 -780.1 928.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-69" x="826" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> T_i </script> 建立一个描述，然后对其进行索引-对于描述中的每个点，我们都输入一个表格记录 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-45"><span class="MJXp-mtext" id="MJXp-Span-46">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53">i</span><span class="MJXp-mrow" id="MJXp-Span-54"><span class="MJXp-mo" id="MJXp-Span-55" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-msubsup" id="MJXp-Span-56"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-58" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-59">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65">e</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.607ex" height="2.419ex" viewBox="0 -780.1 8011.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-61" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-6E" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-67" x="1678" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-6C" x="2159" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-65" x="2457" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-69" x="2924" y="0"></use><g transform="translate(3269,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><g transform="translate(4099,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-69" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-72" x="5184" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-61" x="5635" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-6E" x="6165" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-67" x="6765" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-6C" x="7246" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-65" x="7544" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> \ langle i，f_i \ rangle </script> 到随机分层聚类搜索树[8]中，与线性搜索相比，该树可对具有最大速度增益的最近邻居执行近似搜索。 因为我们使用二进制描述符，所以将汉明距离用作度量。 </p><br><p> 识别过程如下： </p><br><ol><li><p> 在要求图片中 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-66"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67">Q</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.838ex" height="2.419ex" viewBox="0 -780.1 791.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-51" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-14"> Q </script> 绘画区 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-68"><span class="MJXp-msubsup" id="MJXp-Span-69"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70" style="margin-right: 0.05em;">Q</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-71" style="vertical-align: -0.4em;">L</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.19ex" height="2.419ex" viewBox="0 -780.1 1373.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-51" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-4C" x="1119" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-15"> Q_L </script> 使用框架矩形的假设进行预定位。 使用快速四边形搜索算法[9]进行区域搜索，消除了长宽比的限制。 这样可以防止出现以下问题： <br>  -画面中由于异物而对图像区域的描述不足，这些异物可能具有评分最高的特殊点； <br>  -用于比较图片外部区域描述符的计算成本； <br>  -数据库中的标准与图片的图片之间在比例尺和角度上的严重不匹配，这导致匹配描述符的结果不正确。 </p><br></li><li><p> 找到区域中的图像投影归一化： </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-72"><span class="MJXp-msubsup" id="MJXp-Span-73"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74" style="margin-right: 0.05em;">Q</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-75" style="vertical-align: 0.5em;">∗</span></span><span class="MJXp-mo" id="MJXp-Span-76" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77">H</span><span class="MJXp-mrow" id="MJXp-Span-78"><span class="MJXp-mo" id="MJXp-Span-79" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-msubsup" id="MJXp-Span-80"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81" style="margin-right: 0.05em;">Q</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-82" style="vertical-align: -0.4em;">L</span></span><span class="MJXp-mrow" id="MJXp-Span-83"><span class="MJXp-mo" id="MJXp-Span-84" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mrow" id="MJXp-Span-85"><span class="MJXp-mo" id="MJXp-Span-86" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.028ex" height="2.539ex" viewBox="0 -832 7331.3 1093.4" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-51" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMAIN-2217" x="1119" y="583"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMAIN-3D" x="1523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-48" x="2579" y="0"></use><g transform="translate(3467,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><g transform="translate(4297,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-51" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/smartengines/blog/438948/&amp;usg=ALkJrhhUYZAFk4HwhnqWKOXpaX23J0Vnbw#MJMATHI-4C" x="1119" y="-213"></use></g><g transform="translate(5671,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><g transform="translate(6501,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-16"> Q ^ * = H（Q_L），</script></p><br><p> 在哪里 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-87"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">H</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-17"> H </script>  -投影变换。 </p><br></li><li><p> 建立一个简短的描述 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-89"><span class="MJXp-msubsup" id="MJXp-Span-90"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91" style="margin-right: 0.05em;">w</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-92" style="vertical-align: 0.5em;">∗</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> w ^ * </script>  ： <br>  a）在保持比例的同时将图像缩小到标准尺寸，以使算法对缩放更具弹性； <br>  b）用高斯滤波器抑制高频噪声； <br>  c）在结果图像上计算出奇异点，其数量被人为限制为 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-93"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">M</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> M </script> 通过YACIPE内部评估获得最佳结果； <br>  d）计算发现的奇异点附近颜色的类似于RFD的描述符，因为在我们的任务中，重要的是保存有关输入图像颜色特征的信息。 例如，图中的图片。  3如果没有它，将很难区分； <br>  d）因此，图像的描述 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-95"><span class="MJXp-mrow" id="MJXp-Span-96"><span class="MJXp-mo" id="MJXp-Span-97" style="margin-left: 0.278em; margin-right: 0.278em;">我</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20">我</script> 可以表示为： <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-98"><span class="noError" id="MJXp-Span-99" style="display: inline-block;">w&nbsp;^&nbsp;*&nbsp;=&nbsp;\&nbsp;{\&nbsp;langle&nbsp;p_i，f_i）\&nbsp;rangle&nbsp;\}&nbsp;_&nbsp;{i&nbsp;\&nbsp;in&nbsp;[1，M]}</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> w ^ * = \ {\ langle p_i，f_i）\ rangle \} _ {i \ in [1，M]} </script> 在哪里 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-100"><span class="MJXp-msubsup" id="MJXp-Span-101"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-103" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-104" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-105">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">e</span><span class="MJXp-msubsup" id="MJXp-Span-112"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-114" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mrow" id="MJXp-Span-115"><span class="MJXp-mo" id="MJXp-Span-116" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-msubsup" id="MJXp-Span-117"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-119" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-120">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-126">e</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> p_i = \ langle x_i，y_i \ rangle </script> 是第i个奇点的坐标，并且 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-127"><span class="MJXp-msubsup" id="MJXp-Span-128"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-130" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> f_i </script> 是第i个奇异点附近的句柄。 </p><br></li><li><p> 对于每个条目 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-131"><span class="MJXp-mtext" id="MJXp-Span-132">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-137">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">p</span><span class="MJXp-mrow" id="MJXp-Span-140"><span class="MJXp-mo" id="MJXp-Span-141" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">f</span><span class="MJXp-mtext" id="MJXp-Span-143">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-149">e</span><span class="MJXp-mtext" id="MJXp-Span-150">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">n</span><span class="MJXp-msubsup" id="MJXp-Span-153"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-154" style="margin-right: 0.05em;">w</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-155" style="vertical-align: 0.5em;">∗</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> \ langle p，f \ rangle \ in w ^ * </script> 索引对描述符的最近邻居执行近似搜索 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-156"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-157">f</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> f </script>  。 投票程序应用于找到的描述符-描述符 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-158"><span class="MJXp-msubsup" id="MJXp-Span-159"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-160" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-161" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-26"> f_i </script> 向标准添加声音 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-162"><span class="MJXp-msubsup" id="MJXp-Span-163"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-165" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> T_i </script>  。 然后，选择具有最高投票数的K个候选候选人。 </p><br></li><li><p> 对于每个 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-166"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">K</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> K </script> 使用RANSAC算法选择选项，执行投影变换搜索 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-168"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-169">H</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> H </script> 在给定的几何误差内进行翻译 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-170"><span class="MJXp-mtext" id="MJXp-Span-171">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-173">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30"> \ delta </script> 查询点 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-177"><span class="MJXp-msubsup" id="MJXp-Span-178"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179" style="margin-right: 0.05em;">Q</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-180" style="vertical-align: 0.5em;">∗</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31"> Q ^ * </script> 参考点 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-181"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32"> T </script>  。 对点 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-183"><span class="MJXp-mtext" id="MJXp-Span-184">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-190">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191">p</span><span class="MJXp-mrow" id="MJXp-Span-192"><span class="MJXp-mo" id="MJXp-Span-193" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-msup" id="MJXp-Span-194"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195" style="margin-right: 0.05em;">p</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-196" style="vertical-align: 0.5em;">′</span></span><span class="MJXp-mtext" id="MJXp-Span-197">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">e</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33"> \ langle p，p'\ rangle </script> 如果满足以下条件，则具有近似描述符的字符被视为有效匹配： </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-204"><span class="MJXp-mtext" id="MJXp-Span-205" style="color: red;">\左</span><span class="MJXp-mrow" id="MJXp-Span-206"><span class="MJXp-mo" id="MJXp-Span-207" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">H</span><span class="MJXp-mrow" id="MJXp-Span-209"><span class="MJXp-mo" id="MJXp-Span-210" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">p</span><span class="MJXp-mrow" id="MJXp-Span-212"><span class="MJXp-mo" id="MJXp-Span-213" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mo" id="MJXp-Span-214" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-msup" id="MJXp-Span-215"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-216" style="margin-right: 0.05em;">p</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-217" style="vertical-align: 0.5em;">′</span></span><span class="MJXp-mtext" id="MJXp-Span-218" style="color: red;">\对</span><span class="MJXp-mrow" id="MJXp-Span-219"><span class="MJXp-mo" id="MJXp-Span-220" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mo" id="MJXp-Span-221" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;</span><span class="MJXp-mtext" id="MJXp-Span-222">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-224">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227">a</span><span class="MJXp-mrow" id="MJXp-Span-228"><span class="MJXp-mo" id="MJXp-Span-229" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">p</span><span class="MJXp-mtext" id="MJXp-Span-231">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233">n</span><span class="MJXp-msubsup" id="MJXp-Span-234"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-235" style="margin-right: 0.05em;">w</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-236" style="vertical-align: 0.5em;">∗</span></span><span class="MJXp-mrow" id="MJXp-Span-237"><span class="MJXp-mo" id="MJXp-Span-238" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-msup" id="MJXp-Span-239"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240" style="margin-right: 0.05em;">p</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-241" style="vertical-align: 0.5em;">′</span></span><span class="MJXp-mtext" id="MJXp-Span-242">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">n</span><span class="MJXp-msubsup" id="MJXp-Span-245"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-247" style="vertical-align: 0.5em;">T</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-34"> \左| H（p）-p'\对| <\ delta，p \ in w ^ *，p'\ in w ^ T </script></p><br></li><li><p> 最终结果是选择了标准 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-248"><span class="MJXp-msubsup" id="MJXp-Span-249"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-251" style="vertical-align: -0.4em;">b</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35"> T_b </script> 正确比较的数量被证明是最大的。 如果小于某个阈值 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-252"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-253">R</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36"> R </script>  ，结果将是答案“未知图片”，以避免误报（例如，在搜索数据库中没有标准描述的图片中）。 </p><br></li></ol><br><p><img src="https://habrastorage.org/webt/5l/lt/fe/5lltfeejo28mzfnbe8zglfujp8q.jpeg"><img src="https://habrastorage.org/webt/sb/2w/pq/sb2wpqtrcflw7vdeael5yajhmje.jpeg"><br>  <em>图3-莫奈（Claude Monet）。</em>  <em>鲁昂大教堂，西立面，阳光（左）和鲁昂大教堂，门户和圣罗曼塔在阳光下（右）。</em> </p><br><p> 系统的主要部分之一是使用汉明距离作为度量标准来搜索接近的描述符。 由于它需要多次计算，因此此阶段需要大量的计算时间，并占用系统时间的65％。 这就是我们对其进行优化的原因。 </p><br><h3 id="sovsem-nebolshoe-opisanie-arhitektury-elbrus"> 对Elbrus架构的很小描述 </h3><br><p>  Elbrus的处理器体系结构使用宽命令字（Very Long Instruction Word，VLIW）的原理。 这意味着处理器按组执行指令，并且在每个组内没有依赖关系，并且这些指令并行执行。 每个这样的组称为广义命令字。 宽泛的命令字由优化的编译器生成，这使得对源代码进行更详细的分析成为可能，从而导致更有效的并行化[10]。 </p><br><p>  Elbrus体系结构的一个特点是使用内存的方法。 除具有优化内存访问时间的缓存外，Elbrus处理器还支持用于预分页数据的硬件-软件方法。 这种方法可以预测内存访问并将数据泵入初步数据缓冲区。 处理器的硬件包括用于访问阵列的特殊设备（阵列访问单元，AAU），但是交换的需要由编译器确定，编译器会生成AAU的特殊指令。 使用交换设备比将数组元素放入缓存更有效，因为数组元素最常按顺序处理，很少使用一次以上[11]。 但是，应该注意的是，仅当使用对齐的数据时，才可能在Elbrus上使用预分页缓冲区。 因此，读取/写入对齐数据的速度比未对齐数据的相应操作快得多。 </p><br><p> 此外，除命令级别的并行性外，Elbrus处理器还支持多种类型的并行性：SIMD并行性，控制流并行性，多机组合系统中任务的并行性。 我们特别感兴趣的是SIMD并发。 </p><br><h3 id="osobennosti-ispolzovaniya-simd-rasshireniya-processora-elbrus"> 使用SIMD扩展处理器Elbrus的功能 </h3><br><p>  SIMD扩展的使用可以通过两种模式进行：自动和直接。 在第一种情况下，操作的并行化完全由编译器执行，而无需开发人员的参与。 此模式是有限制的，因为优化的代码必须完全重复源代码的行为，包括溢出，舍入等时的行为。 在这种情况下，SIMD扩展指令的行为在这些方面可能与处理器指令有所不同。 另外，在编译器中使用的算法是不完善的，并不总是能够执行有效的并行化。 但是，开发人员也可以使用内部函数直接访问SIMD扩展命令。 内部函数是函数，其调用被编译器替换为给定平台的高性能代码，尤其是SIMD扩展命令。  Elbrus-4C和Elbrus-8C处理器支持一组内部函数，其寄存器大小为64位。 它包括数据转换操作，矢量元素初始化，算术运算，按位逻辑运算，矢量元素置换等。 </p><br><p> 在Elbrus平台上使用内在函数时，应特别注意对内存的访问，因为实际任务（例如图像处理任务）通常需要将数据不平衡地读取到64位寄存器中。 这种读取本身效率低下，因为它需要一对读取命令和一个后续命令来形成数据块，但是更重要的是，不能使用数组交换缓冲区来提高数据访问速度。 但是，值得注意的是，对于Elbrus-4C和Elbrus-8C处理器，访问未对齐数据的效率低下的问题是相关的，而对于具有第5版指令系统的较新的Elbrus-8CV，则可以部分解决。 预计带有第六版指令系统的Elbrus处理器将被完全解决。 </p><br><p>但是，在Elbrus-4C和Elbrus-8C处理器上，考虑到对齐方式，可以有效地执行低级数据处理。 例如，对于数字数组，它可以包括几个阶段：处理初始部分（直到其中一个数组的64位对齐边界），使用对齐的内存访问处理主要部分以及处理数组的其余元素。 由于在编译过程中解析指针并非易事，因此可以使用<code>–faligned</code>编译器<code>–faligned</code> ，通过该<code>–faligned</code> ，所有内存访问操作均以对齐方式执行。 </p><br><p> 在Elbrus平台上使用内在函数的下一个功能与其VLIW架构直接相关。 由于存在多个并行运行并在形成宽命令字时加载的算术逻辑设备（ALU），因此可以同时执行多个命令。 总体而言，Elbrus-4C和Elbrus-8C处理器具有六个ALU，可以用作一个广泛的团队的一部分，但是每个ALU支持自己的一组内在函数。 通常，简单的操作（例如在64位寄存器中增加或增加元素）支持两个ALU。 这意味着Elbrus处理器可以在一个时钟周期内执行两条这样的指令。 为此，应在可执行代码中使用运行循环。  Elbrus平台的优化编译器支持pragma <code>#pragma unroll(n)</code> ，它允许部署n个循环迭代。 </p><br><p> 考虑到这些功能的加法功能的实现示例可以在我们以前的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文章中</a>找到。 </p><br><h3 id="eksperimenty"> 实验 </h3><br><p> 好的，文本结束了，最后我们将在Elbrus上发布一些东西！ </p><br><p> 首先，我们分别考虑汉明距离。 事不宜迟，我们比较了随机数据的两个位向量。 二进制值打包成8位整数的数组，为简单起见，我们认为原始向量的长度是8的倍数。通常，该代码是用C ++编写的，由lcc 1.21.24（一种经过优化的Elbrus编译器）编译。 </p><br><p> 我们编写了汉明距离的几种实现，依次考虑了Elbrus处理器的功能。 他们看起来像这样： </p><br><ol><li> 使用8位整数与预先计算的值表之间的按位XOR。 这是一个基本的实现，没有任何固有的技巧。 </li><li> 它使用32位整数与内部函数之间的XOR来计算32位整数-popcnt32中的单位数。 未执行32位边界对齐。 </li><li> 它使用64位整数与内部函数之间的XOR来计算64位整数-popcnt64中的单位数。 未执行64位边界对齐。 </li><li> 它使用64位整数与内部函数之间的XOR来计算64位整数-popcnt64中的单位数。 对内存的访问以对齐方式进行。 由于阵列的起始地址可以具有不同的对齐方式，因此在读取阵列之一时，将读取两个相邻的64位块，并从中形成必要的64位块。 </li><li> 它使用64位整数与内部函数之间的XOR来计算64位整数-popcnt64中的单位数。 对内存的访问以对齐方式进行。 由于阵列的起始地址可以具有不同的对齐方式，因此在读取阵列之一时，将读取两个相邻的64位块，并从中形成必要的64位块。 另外，使用<code>-faligned</code>编译器标志。 </li><li> 它使用64位整数与内部函数之间的XOR来计算64位整数-popcnt64中的单位数。 对内存的访问以对齐方式进行。 由于阵列的起始地址可以具有不同的对齐方式，因此在读取阵列之一时，将读取两个相邻的64位块，并从中形成必要的64位块。 此外，还使用了<code>-faligned</code>编译器<code>-faligned</code>和编译器编译指示<code>#pragma unroll(2)</code> （以使用两个可用的ALU来计算popcnt64）和<code>#pragma loop count(1000)</code> （以启用其他<code>#pragma loop count(1000)</code>优化）。 </li></ol><br><p> 时间测量的结果示于表1。 </p><br><p> 表1.在配备Elbrus-4C处理器的机器上，计算长度为10 ^ 5的两个打包二进制数字数组之间的汉明距离的时间。 平均时间超过10 ^ 5开始。 </p><br><table><thead><tr><th> 不行 </th><th> 实验 </th><th> 时间，毫秒 </th></tr></thead><tbody><tr><td>  1个 </td><td> 计算值表 </td><td>  141.18 </td></tr><tr><td>  2 </td><td>  popcnt32，不对齐 </td><td>  125.54 </td></tr><tr><td>  3 </td><td>  popcnt64，不对齐 </td><td>  58.00 </td></tr><tr><td>  4 </td><td>  popcnt64对齐 </td><td>  17.36 </td></tr><tr><td>  5 </td><td>  popcnt64对齐， <code>-faligned</code> </td><td>  17.15 </td></tr><tr><td>  6 </td><td>  popcnt64，对齐方式， <code>-faligned, pragma unroll</code> </td><td>  12.23 </td></tr></tbody></table><br><p> 可以看出，所有考虑的优化导致运行时间减少了11.5倍。 值得注意的是，对内存的不平衡访问使用内在函数时，加速度仅是1.13倍（对于popcnt32）和2.4倍（对于popcnt64），而考虑到数据对齐导致使用了APB阵列交换缓冲区借助它，可以实现另外3.4倍的加速（58 ms对17.15 ms）。 尽管在上面的示例中使用-faligned标志并未显示出明显的性能提升，但是在更复杂的算法中，可能会出现编译器无法深入分析源代码以生成APB命令的情况。 考虑到专用ALU的实际数量，我们可以将计算速度再提高1.4倍。 </p><br><p> 还不错！ 由于我们比较了多达6个实现选项，因此我们给出了最终最快的伪代码： </p><br><pre> <code class="plaintext hljs">:  8-   A  B,  T,  T[i]      i :   res,     A  B offset ←       A  64- effective_len ←   ,      64- for i from 1 to offset: res ← res + T[xor(A[i] , B[i])] v_a ← 64-  ,   A[offset+1] v_b1 ← 64-  ,   B[offset] v_b2 ← 64-  ,   v_b1 //        64-   for i from offset to effective_len: v_b ← align(v_b1, v_b2) //  64-  ,  v_a res ← res + popcnt64(xor(v_a, v_b)) v_a ←  64-   v_b1 ← v_b2 v_b2 ←  64-   //    </code> </pre> <br><p> 一劳永逸地将汉明距离的计算速度提高11.5倍，那将是一件很棒的事，但是生活中的一切都有些复杂：只有在数组长度足够大的情况下，这种实现方式才有优势。 在图 图4给出了使用预计算值表和我们最终实现的计算时间的比较。 您可以看到，在我们的版本中，它仅在长度超过400字节时才开始取胜，并且在Elbrus上进行优化时也需要考虑这一点。 </p><br><img src="https://habrastorage.org/webt/my/5_/dz/my5_dzx_akm4pis3kuqvdhm3fns.png"><br><p>  <em>图4-根据两个数组在Elbrus-4C处的长度来计算两个数组之间的汉明距离的平均时间（每1个字节）。</em> </p><br><p> 就是这样，现在我们可以测量整个系统的运行时间了。 我们测量了933个请求的平均请求处理时间（不包括图像加载）。 编译图像的紧凑描述时，使用了5328位彩色的类似于RFD的二进制描述符。 它由为输入图像部分的每个通道计算的3个串联的1776位灰度RFD描述符组成。 一方面，如此长的描述符对高速的计算和比较不满意；另一方面，它们提供了足够高的工作质量。 但是，有个好消息-我们可以使用汉明距离的快速实现来进行比较！ 比较数组的长度为666字节，大于Elbrus-4C的阈值400字节。 </p><br><p> 测量结果如表2所示。可以看出，只有一种快速实施汉明距离的方法，查询处理速度才能提高1.5倍。 还值得注意的是，这种优化不会改变计算结果，因此不会改变识别质量。 </p><br><p> 表2.在不受控制的条件下对绘画对象识别系统的请求的平均处理时间。 </p><br><table><thead><tr><th> 实验 </th><th> 请求时间，s </th><th> 海明距离的计算 </th><th> 加速时间 </th></tr></thead><tbody><tr><td> 基本实施 </td><td>  2.81 </td><td>  63％ </td><td>  -- </td></tr><tr><td> 快速实施 </td><td>  1.87 </td><td>  40％ </td><td>  1.5 </td></tr></tbody></table><br><h3 id="zaklyuchenie"> 结论 </h3><br><p> 在本文中，我们讨论了用于在不受控制的条件下绘画对象的识别系统的结构，并再次展示了低级操纵如何显着提高Elbrus平台上的速度。 因此，建议的汉明距离实现比使用具有足够大的输入矢量长度的预先计算值表的实现快一个数量级（！），并且整个系统的速度提高了一半！ 为了获得此结果，使用了SIMD扩展，并考虑了Elbrus-4C和Elbrus-8C处理器的体系结构和内存访问功能。 这些结果表明，Elbrus处理器包含大量资源，用于高效运行，如果没有专门执行的优化，这些资源将无法充分利用。 但是，预计将在较新的Elbrus处理器上改进内存访问方法，这将允许其中一些优化自动执行，并极大地延长了开发人员的生命。 </p><br><h3 id="literatura"> 文学作品 </h3><br><p>  [1] N.S.  A.N. Skoryukina  Milovzorov，D.V. 菲尔德 阿拉扎罗夫。 根据一个示例// ISA RAS的交易通过训练识别在不受控制的条件下绘画对象的方法。  -特刊，2018-p。  5-15。 <br>  [2]Pérez-SanagustínM.等。 使用QR码增加用户在类似博物馆的空间中的参与度//人类行为中的计算机。  -2016.-T. 60.-S. 73-85。  doi：10.1016 / j.chb.2016.02.02.012 <br>  [3] Antoshchuk S. G.，Godovichenko N. A.在“移动虚拟向导”系统中对图像的点特征的分析// Pratsi。  -2013年-没有  1（40）。  -S. 67-72。 <br>  [4] Andreatta C.，Leonardi F.移动博物馆指南的基于外观的绘画识别//国际计算机视觉理论与应用大会，VISAPP。  -2006年。 <br>  [5]伦纳德·温。  2014.博物馆指南应用程序中的视觉识别：参观者想要吗？..在SIGCHI关于计算机系统人为因素会议（CHI '14）的会议记录中。 美国纽约州ACM，电话：635-638。 <br>  doi：10.1145 / 2556288.2557270 <br>  [6]特列季亚科夫画廊， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https：</a> //www.tretyakovgallery.ru/collection/ <br>  [7] Lukoyanov A. S.，Nikolaev D. P.，Konovalenko I. A. YAPE算法的修改，用于具有较大局部对比度的图像//信息技术和纳米技术。  -2018年-S.1193-1204。 <br>  [8] Muja M.，Lowe DG二元特征的快速匹配//计算机和机器人视觉（CRV），2012年第九届会议开始。  -IEEE，2012年。-S. 404-410。 <br>  doi：10.1109 / CRV.2012.60 <br>  [9] Skoryukina，N.，Nikolaev，DP，Sheshkus，A.，Polevoy，D。（2015年2月）。 移动设备上的实时矩形文档检测。 第七届机器视觉国际会议（ICMV 2014）（第9445卷，第94452A页）。 国际光学和光子学会。 <br>  doi：10.1117 / 12.2181377 <br>  [10] Kim A.K.，Bychkov I.N. 以及用于个人计算机，服务器和超级计算机的其他俄罗斯技术“ Elbrus” //现代信息技术和IT教育，M .：互联网媒体发展基金会，IT教育，潜在的“互联网媒体联盟”，2014年，第10页，第10页。  39-50。 <br>  [11] Kim A.K.，Perekatov V.I.，Ermakov S.G. 微处理器和计算系统 <br>  Elbrus一家。  -圣彼得堡：彼得，2013年。-272 S. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN438948/">https://habr.com/ru/post/zh-CN438948/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN438934/index.html">在Windows上创建和配置Jupyter Notebook和Lab的可移植版本。 第一部分</a></li>
<li><a href="../zh-CN438936/index.html">BotMan熟人</a></li>
<li><a href="../zh-CN438940/index.html">开设“手指上的深度学习”课程</a></li>
<li><a href="../zh-CN438942/index.html">有符号距离场上的2D阴影</a></li>
<li><a href="../zh-CN438946/index.html">DateTimeOffset（严格）</a></li>
<li><a href="../zh-CN438950/index.html">中央银行启动了一个机器人，可以在互联网上搜索收入计划</a></li>
<li><a href="../zh-CN438952/index.html">为不同的浏览器开发音频播放器时可以学到什么</a></li>
<li><a href="../zh-CN438954/index.html">组合2D中的有符号距离场</a></li>
<li><a href="../zh-CN438956/index.html">牙齿中的磁炎：壳软体动物的组织转录组测序</a></li>
<li><a href="../zh-CN438958/index.html">ILV确认其“空间站”的存在</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>