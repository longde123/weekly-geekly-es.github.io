<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎵 💛 🖌️ Verständnis des Stellar Consensus Protocol 🔌 👊🏻 🐥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das Stellar-Konsensprotokoll wurde erstmals in einem wissenschaftlichen Artikel von David Mazier aus dem Jahr 2015 beschrieben. Dies ist ein „föderale...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Verständnis des Stellar Consensus Protocol</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444710/"><img src="https://habrastorage.org/getpro/habr/post_images/d61/191/bb6/d61191bb66df2fb90fda24b86afb49b2.gif"><br><br>  Das Stellar-Konsensprotokoll wurde erstmals in einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wissenschaftlichen Artikel von</a> David Mazier aus dem Jahr 2015 beschrieben.  Dies ist ein „föderales System des byzantinischen Abkommens“, das es dezentralen Computernetzwerken ohne Führungskräfte ermöglicht, effektiv einen Konsens über eine Entscheidung zu erzielen.  Das Stellar-Abrechnungsnetzwerk verwendet das Stellar Consensus Protocol (SCP), um einen konsistenten Transaktionsverlauf aufrechtzuerhalten, den alle Mitglieder sehen. <br><br>  Konsensprotokolle gelten als schwer verständlich.  SCP ist einfacher als die meisten von ihnen, teilt aber dennoch diesen Ruf - auch aufgrund der falschen Vorstellung, dass die „Bundesabstimmung“, der die erste Hälfte des wissenschaftlichen Artikels gewidmet ist, SCP ist.  Aber das ist nicht so!  Dies ist nur ein wichtiger Baustein, mit dem in der zweiten Hälfte des Artikels das <i>eigentliche</i> Stellar-Konsensprotokoll erstellt wird. <br><a name="habracut"></a><br>  In diesem Artikel beschreiben wir kurz, was ein "System von Vereinbarungen" ist, was es "byzantinisch" machen kann und warum das byzantinische System "föderalistisch" wird.  Anschließend erläutern wir das im SCP-Artikel beschriebene föderierte Abstimmungsverfahren und schließlich das SCP-Protokoll selbst. <br><br><h1>  Vereinbarung Systeme </h1><br>  Das System der Vereinbarungen ermöglicht es einer Gruppe von Teilnehmern, einen Konsens über ein Thema zu erzielen, beispielsweise darüber, was zum Mittagessen bestellt werden soll. <br><br>  Wir bei Interstellar haben unser eigenes Arrangementsystem implementiert: Wir bestellen, was unser Betriebsleiter John sagt.  Dies ist ein einfaches und effektives Vereinbarungssystem.  Wir alle vertrauen John und glauben, dass er jeden Tag etwas Interessantes und Nährwertiges finden wird. <br><br>  Aber was ist, wenn John unser Vertrauen missbraucht?  Er kann im Alleingang entscheiden, dass wir alle Veganer werden sollen.  In ein oder zwei Wochen werden wir ihn wahrscheinlich stürzen und die Autorität an Elizabeth übergeben.  Aber plötzlich liebt sie Avocados mit Sardellen und meint, dass jeder so werden sollte.  Strom korrumpiert.  Daher ist es besser, eine demokratischere Methode zu finden: eine Möglichkeit, um sicherzustellen, dass unterschiedliche Präferenzen berücksichtigt werden, und gleichzeitig ein zeitnahes und eindeutiges Ergebnis zu gewährleisten, damit niemand das Mittagessen bestellt oder fünf Personen unterschiedliche Bestellungen aufgeben oder die Diskussion bis zum Abend andauert. <br><br>  Es scheint, dass die Lösung einfach ist: abstimmen!  Dies ist jedoch ein irreführender Eindruck.  Wer sammelt die Stimmzettel und meldet die Ergebnisse?  Und warum sollte der Rest glauben, was er sagt?  Vielleicht können wir <i>zuerst</i> für den Führer stimmen, dem wir vertrauen, um die Abstimmung zu leiten - aber wer wird diese <i>erste</i> Abstimmung führen?  Was ist, wenn wir uns nicht auf einen Führer einigen können?  Oder wenn wir uns einig sind und dieser Anführer in einer Besprechung festsitzt oder krankgeschrieben wird? <br><br>  Ähnliche Probleme treten in verteilten Computernetzwerken auf.  Alle Teilnehmer oder Knoten müssen sich beispielsweise auf eine Lösung einigen, deren Aufgabe es ist, die gemeinsam genutzte Datei zu aktualisieren oder die Aufgabe aus der Verarbeitungswarteschlange zu übernehmen.  In einem Kryptowährungsnetzwerk müssen Knoten wiederholt auswählen, wie die gesamte Story aus mehreren möglichen Versionen aussehen soll, die manchmal in Konflikt stehen.  Diese Netzwerkvereinbarung gibt dem Empfänger die Garantie, dass die Münze (a) gültig (nicht gefälscht) und (b) noch nicht anderweitig ausgegeben ist.  Es stellt auch sicher, dass er in Zukunft Münzen ausgeben kann, da der neue Empfänger aus den gleichen Gründen die gleichen Garantien hat. <br><br>  Jedes übereinstimmende System in einem verteilten Computernetzwerk muss fehlertolerant sein: Es muss trotz Fehlern wie langsamen Kommunikationsleitungen, nicht reagierenden Knoten und falscher Nachrichtenreihenfolge konsistente Ergebnisse liefern.  <i>Das byzantinische</i> System von Vereinbarungen ist außerdem resistent gegen „byzantinische“ Fehler: Knoten, die falsche Informationen liefern, sei es aufgrund eines Fehlers oder bei einem absichtlichen Versuch, das System zu untergraben oder einen Vorteil zu erzielen.  Die „byzantinische“ Widerstandsfähigkeit - die Fähigkeit, einer Gruppenentscheidung zu vertrauen, selbst wenn einige Mitglieder der Gruppe lügen oder auf andere Weise die Regeln der Entscheidungsfindung nicht befolgen - wird als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gleichnis der Generäle des Byzantinischen Reiches bezeichnet,</a> die versuchten, den Angriff zu koordinieren.  Anthony Stevens hat eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gute Beschreibung</a> . <br><br>  Betrachten Sie die Besitzerin der Kryptomünze Alice, die sich zwischen dem Kauf eines köstlichen Eises von Bob und der Bezahlung von Carols Schulden entscheiden muss.  Vielleicht möchte Alice beide gleichzeitig bezahlen und betrügerisch dieselbe Münze ausgeben.  Dazu muss sie Bobs Computer davon überzeugen, dass die Münze niemals an Carol gezahlt wurde, und Carols Computer davon überzeugen, dass die Münze niemals an Bob gezahlt wurde.  Das byzantinische Konventionssystem macht dies mit einer Form der Mehrheitsregel, die als <i>Quorum bezeichnet wird,</i> praktisch unmöglich.  Ein Knoten in einem solchen Netzwerk weigert sich, zu einer bestimmten Version des Verlaufs zu wechseln, bis er feststellt, dass eine ausreichende Anzahl von Peer-Knoten - ein Quorum - einem solchen Übergang zustimmt.  Sobald dies geschieht, bilden sie einen ausreichend großen Wahlblock, um die verbleibenden Netzwerkknoten zu zwingen, ihrer Entscheidung zuzustimmen.  Alice kann einige Knoten in ihrem Namen liegen lassen, aber wenn das Netzwerk groß genug ist, wird ihr Versuch durch die Stimmen ehrlicher Knoten unterdrückt. <br><br>  Wie viele Knoten sind für ein Quorum erforderlich?  Zumindest eine Mehrheit oder vielmehr eine qualifizierte Mehrheit, um Fehler und Betrug zu bekämpfen.  Um die Mehrheit zu berechnen, müssen Sie jedoch die Gesamtzahl der Teilnehmer kennen.  In Interstellars Büro oder bei Distriktwahlen sind diese Zahlen leicht zu erkennen.  Wenn Ihre Gruppe jedoch ein schlecht definiertes Netzwerk ist, in das Knoten nach Wunsch ohne Abstimmung mit dem Zentrum ein- und ausgehen können, benötigen Sie ein byzantinisches <i>Bundesvereinbarungssystem</i> , das Quoren nicht aus einer vorgegebenen Liste von Knoten, sondern dynamisch aus einer sich ständig ändernden und unvermeidlich unvollständigen Liste bestimmen kann Momentaufnahme von Knoten zu einem bestimmten Zeitpunkt. <br><br>  Es scheint möglicherweise nicht möglich zu sein, ein Quorum für einen einzelnen Knoten in einem umfangreichen Netzwerk zu erstellen, aber es ist möglich.  Ein solches Quorum kann sogar die Ergebnisse einer dezentralen Abstimmung garantieren.  Das SCP-Whitepaper zeigt, wie dies mithilfe eines Verfahrens namens <i>Verbundabstimmung erfolgt</i> . <br><br><h1>  Für die Ungeduldigen </h1><br>  Der Rest des Artikels beschreibt die Bundesabstimmung und das Stellar-Konsensprotokoll.  Wenn Sie nicht an den Details interessiert sind, finden Sie hier eine allgemeine Übersicht über den Prozess. <br><br><ol><li>  Die Knoten führen Abstimmungsrunden des Bundes über die „Nominierten“ durch.  Eine Runde der Bundesabstimmung bedeutet: <br><ul><li>  Der Knoten stimmt für jede Aussage, zum Beispiel "Ich schlage den Wert von V vor"; <br></li><li>  Der Knoten hört auf die Stimmen der Feste, bis er eine findet, die „empfangen“ kann. <br></li><li>  Der Knoten sucht nach einem „Quorum“ für diese Anweisung.  Das Quorum „bestätigt“ den Kandidaten. </li></ul></li><li>  Sobald ein Knoten einen oder mehrere Kandidaten bestätigen kann, versucht er, einen Stimmzettel durch mehrere Abstimmungsrunden des Bundes vorzubereiten. <br></li><li>  Sobald der Knoten in der Lage ist, die Bereitschaft des Stimmzettels zu überprüfen, versucht er, ihn mit noch mehr Runden der föderierten Abstimmung zu versorgen. <br></li><li>  Sobald eine Site ein Newsletter-Commit bestätigen kann, kann sie den Wert dieses Newsletters „externalisieren“ und ihn als Ergebnis eines Konsenses verwenden. </li></ol><br>  Diese Schritte umfassen mehrere Abstimmungsrunden, die zusammen eine Runde SCP bilden.  Wir werden genauer untersuchen, was bei jedem Schritt passiert. <br><br><h1>  Föderierte Abstimmung </h1><br>  Bei der föderierten Abstimmung wird festgestellt, ob sich ein Netzwerk auf einen Vorschlag einigen kann.  In einer Abstimmungsrunde muss jeder Knoten einen von möglicherweise vielen möglichen Werten auswählen.  Er kann dies erst tun, wenn er sicher ist, dass andere Knoten im Netzwerk kein anderes Ergebnis auswählen.  Um dies sicherzustellen, tauschen die Knoten eine Reihe von Nachrichten hin und her aus, sodass jeder <i>bestätigt,</i> dass das <i>Quorum der</i> Knoten dieselbe <i>Entscheidung trifft</i> .  Der Rest dieses Abschnitts erklärt die Begriffe in diesem Satz und wie das gesamte Verfahren abläuft. <br><br><h1>  Quorums und Quorum Slices </h1><br>  Beginnen wir mit der Definition eines Quorums.  Wie oben erläutert, ist es in einem dezentralen Netzwerk mit dynamischer Mitgliedschaft unmöglich, die Anzahl der Knoten im Voraus zu kennen und daher zu wissen, wie viel für die meisten benötigt wird.  Federated Voting löst dieses Problem, indem eine neue Idee für Quorum Slice eingeführt wird: eine kleine Gruppe von Peer-Knoten, denen der Knoten vertraut, um Abstimmungsstatusinformationen im Rest des Netzwerks zu übertragen.  Jeder Knoten definiert sein eigenes Quorum Slice (von dem er tatsächlich Mitglied wird). <br><br>  Die Quorumbildung beginnt mit einem Quorumschnitt.  Für jeden Knoten werden Knoten seines Slice hinzugefügt.  Dann werden Slicer-Mitglieder <i>dieser Knoten</i> hinzugefügt und so weiter.  Im weiteren Verlauf stoßen Sie auf immer mehr Knoten, die Sie nicht hinzufügen können, da sie bereits im Slice enthalten sind.  Wenn keine neuen Knoten mehr hinzugefügt werden müssen, wird der Prozess gestoppt: Wir haben ein Quorum durch „Transitive Closure“ gebildet, indem wir das Quorum des ursprünglichen Knotens abgeschnitten haben. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/24f/13f/a42/24f13fa423c0f748a8a18a6451a50815.png"><br>  <i><font color="gray">So finden Sie das Quorum von diesem Knoten ...</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/746/820/ead/746820ead5d2d898a333851fef565965.png"><br>  <i><font color="gray">... Mitglieder zu seinem Slice hinzufügen ...</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ad/198/03f/2ad19803ff449504de13bb60f6e14212.png"><br>  <i><font color="gray">... dann fügen Sie diesen Knoten Slicer-Mitglieder hinzu.</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/709/d25/521/709d2552176aa897f933421ca4410661.png"><br>  <i><font color="gray">Fahren Sie fort, bis keine Knoten mehr hinzuzufügen sind.</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4b1/8b0/662/4b18b0662787f3a6d8420c2992113afa.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/138/d6c/11d/138d6c11deb2d32589eee523663d2682.png"><br>  <i><font color="gray">Keine Knoten mehr zum Hinzufügen.</font></i>  <i><font color="gray">Dies ist ein Quorum.</font></i> <br><br>  Tatsächlich kann jeder Knoten in mehr als eine Schicht gehen.  Um ein Quorum zu bilden, wählen Sie nur einen der Slices aus und fügen Sie Mitglieder hinzu.  Wählen Sie dann ein beliebiges Slice für jedes Mitglied aus und fügen Sie <i>diesem</i> Slice Mitglieder hinzu und so weiter.  Dies bedeutet, dass jeder Knoten Mitglied vieler möglicher Quorums ist. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8e7/f3d/e1a/8e7f3de1a529c59cb486ebd67f3bf8ec.png"><br>  <i><font color="gray">Wählen Sie bei jedem Schritt nur eine Quorumscheibe aus.</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e34/14f/370/e3414f370b9ae824bf894069b547bf36.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/e4a/cb6/6e7/e4acb66e79e18c72db3c0839c1e76e25.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/0cb/cca/c69/0cbccac69b859093788ea2a37e6c3aed.png"><br>  <i><font color="gray">Ein mögliches Quorum.</font></i>  <i><font color="gray">Oder eine Alternative ...</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c26/7cc/911/c267cc911e0b6bbb6f1729c5a5003704.png"><br>  <i><font color="gray">... andere Scheiben auswählen ...</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f35/0a5/8fb/f350a58fba9d8b9c640edd7d273d6f15.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/bf4/73c/3fe/bf473c3fedaa8c8d98820485b24f3034.png"><br>  <i><font color="gray">... (wenn möglich) ...</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c0b/b61/fc1/c0bb61fc1ed34f0ad6fb57711820dc83.png"><br>  <i><font color="gray">... schafft ein weiteres Quorum.</font></i> <br><br>  Woher weiß ein Knoten, in welchen Slices sich die anderen Knoten befinden?  Auf die gleiche Weise wie andere Informationen zu anderen Knoten: von den Übertragungen, die jeder Knoten an das Netzwerk sendet, wenn sich sein Abstimmungsstatus ändert.  Jede Sendung enthält Informationen über Slices des sendenden Knotens.  Das technische Dokument von SCP spezifiziert keinen Kommunikationsmechanismus.  Implementierungen verwenden normalerweise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das Klatschprotokoll</a> , um Broadcast-Nachrichten über das Netzwerk zu gewährleisten. <br><br>  Denken Sie daran, dass in einem nicht-föderalen byzantinischen System von Vereinbarungen ein Quorum als die Mehrheit aller Knoten definiert ist.  Das byzantinische Abkommenssystem wurde unter dem Gesichtspunkt der Frage entwickelt: Wie viele unehrliche Knoten kann das System aushalten?  In einem System von N Knoten, die darauf ausgelegt sind, f Fehler (Tricks) zu überleben, sollte der Knoten in der Lage sein, Fortschritte zu erzielen, indem er eine Antwort von N - f Peers erhält, da f von ihnen möglicherweise nicht funktioniert.  Nachdem wir jedoch eine Antwort von N - f Peers erhalten haben, können wir davon ausgehen, dass alle f Peers (von denen der Knoten keine Antwort erhalten hat) tatsächlich ehrlich sind.  Somit sind f von N - f Peers (von denen eine Antwort empfangen wird) böswillig.  Damit die Knoten zu demselben Konsens gelangen, muss die Mehrheit der verbleibenden Knoten ehrlich sein, dh N - f muss größer als 2f oder N&gt; 3f sein.  Normalerweise hat ein System, das für das Überleben von f Fehlern ausgelegt ist, insgesamt N = 3f + 1 Knoten und eine Quorumgröße von 2f + 1.  Sobald der Vorschlag die Quorumschwelle überschreitet, ist der Rest des Netzwerks davon überzeugt, dass konkurrierende Vorschläge scheitern werden.  Das Netzwerk konvergiert also zum Ergebnis. <br><br>  Aber in einem föderalen byzantinischen Abkommenssystem kann es nicht nur keine Mehrheit geben (weil niemand die Gesamtgröße des Netzwerks kennt), sondern das Konzept einer Mehrheit ist im Allgemeinen nutzlos!  Wenn die Mitgliedschaft im System offen ist, kann jemand die Mehrheit erhalten, indem er einfach den sogenannten Sibyl-Angriff durchführt: indem er sich wiederholt über mehrere Knoten dem Netzwerk anschließt.  Warum kann der transitive Abschluss eines Slice als <i>Quorum bezeichnet</i> werden und wie kann er konkurrierende Angebote unterdrücken? <br><br>  Technisch auf keinen Fall!  Stellen Sie sich ein Netzwerk von sechs Knoten vor, in dem zwei Tripel in Schichten des jeweils anderen Quorums isoliert sind.  Die erste Untergruppe kann eine Entscheidung treffen, von der die zweite niemals hören wird, und umgekehrt.  Es gibt keine Möglichkeit für dieses Netzwerk, einen Konsens zu erzielen (außer durch Zufall). <br><br>  Daher erfordert SCP, dass das Netzwerk über eine Eigenschaft namens <i>Quorum Crossing</i> für die Abstimmung im Verbund (und für die Anwendung wichtiger Artikelsätze) verfügt.  In einem Netzwerk mit dieser Eigenschaft überlappen sich zwei beliebige Quorums, die erstellt werden können, immer in mindestens einem Knoten.  Die vorherrschende Stimmung des Netzwerks zu bestimmen ist so gut wie die Mehrheit zu haben.  Intuitiv bedeutet dies, dass, wenn ein Quorum mit Aussage X übereinstimmt, kein anderes Quorum jemals mit etwas anderem übereinstimmen kann, da es notwendigerweise einen Knoten aus dem ersten Quorum enthält, der bereits für X gestimmt hat. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/399/d79/c47/399d79c473bba703f30e370d8dbd3832.png"><br>  <i><font color="gray">Wenn das Netzwerk einen Schnittpunkt von Quoren hat ...</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/56b/04f/e6d/56b04fe6de47463d12959711a1c02de0.png"><br>  <i><font color="gray">... dann können Sie zwei beliebige Quorums erstellen ...</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e65/090/30b/e6509030b1532429b806b521c3009d2b.png"><br>  <i><font color="gray">... wird sich immer überschneiden.</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e25/a00/b4f/e25a00b4fe739f7930dccd184be76302.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/06c/13b/e5e/06c13be5e94fc380e2b49f17de2e33e1.png"><br><br>  (Natürlich können sich überlappende Knoten in anderer Hinsicht als byzantinisch oder schlecht herausstellen. In diesem Fall hilft die Überschneidung von Quoren dem Netzwerk überhaupt nicht, sich zu einigen. Aus diesem Grund basieren viele der Ergebnisse im technischen Dokument von SCP auf expliziten Annahmen, wie z. B. dem, was im Netzwerk verbleibt Schnittpunkt von Quoren <i>auch nach dem Entfernen fehlerhafter Knoten</i> . Der Einfachheit halber lassen wir diese Annahmen im Rest des Artikels <i>implizit</i> . <br><br>  Es mag unangemessen erscheinen zu erwarten, dass in einem Netzwerk unabhängiger Knoten ein zuverlässiger Schnittpunkt von Quoren möglich ist.  Dafür gibt es zwei Gründe. <br><br>  Der erste Grund ist die Existenz des Internets selbst.  Das Internet ist ein ideales Beispiel für ein Netzwerk unabhängiger Knoten mit Schnittpunkten von Quoren.  Die meisten Websites im Internet stellen nur eine Verbindung zu wenigen anderen lokalen Websites her. Diese kleinen Gruppen überlappen sich jedoch so weit, dass jede Website von jeder anderen Website auf einer bestimmten Route aus zugänglich ist. <br><br>  Der zweite Grund ist spezifisch für das Stellar-Zahlungsnetzwerk (die häufigste Verwendung von SCP).  Jedes Asset im Stellar-Netzwerk verfügt über einen Emittenten. Laut Stellar-Empfehlungen muss jeder Emittent einen oder mehrere Knoten im Netzwerk für die Verarbeitung von Rückzahlungsanforderungen festlegen.  Es liegt in Ihrem Interesse, diese Knoten für jedes Asset, an dem Sie interessiert sind, direkt oder indirekt in Quorum Slices aufzunehmen.  Dann überlappen sich die Quoren für alle an diesem Vermögenswert interessierten Knoten zumindest in diesen Rückzahlungsknoten.  Die Knoten, die an mehreren Vermögenswerten interessiert sind, werden alle Rückzahlungsknoten der jeweiligen Emittenten in ihre Quorumscheiben aufnehmen und sich bemühen, alle Vermögenswerte miteinander zu kombinieren.  Darüber hinaus sind alle Vermögenswerte, die nicht auf diese Weise mit anderen im Netzwerk verbunden sind und <i>nicht verbunden werden</i> sollten, so, dass für dieses Netzwerk kein Quorum Crossing besteht (z. B. möchten Banken aus der Dollarzone manchmal mit Banken aus der Eurozone und Banken handeln von der Peso-Zone, also sind sie im selben Netzwerk, aber keiner von ihnen kümmert sich um ein separates Netzwerk von Kindern, die Baseballkarten verkaufen). <br><br>  Das <i>Warten auf die</i> Überschneidung von Quoren ist natürlich keine <i>Garantie</i> .  Andere byzantinische Abkommenssysteme verdanken einen großen Teil ihrer Komplexität der Gewährleistung von Quorums.  Eine wichtige Neuerung von SCP besteht darin, dass die Verantwortung für die Erstellung von Quorums aus dem Konsensalgorithmus selbst entfernt und auf Anwendungsebene gebracht wird.  Obwohl eine föderierte Abstimmung ausreichend allgemein ist, um über irgendwelche Fragen abzustimmen, hängt ihre Zuverlässigkeit in der Tat entscheidend von der breiteren Bedeutung dieser Werte ab.  Einige hypothetische Anwendungen sind möglicherweise nicht so praktisch für den Aufbau gut verbundener Netzwerke wie andere. <br><br><h1>  Abstimmung, Annahme und Bestätigung </h1><br>  In der Runde der Verbundabstimmung beginnt der Knoten optional mit der Abstimmung für einen Wert von V. Dies bedeutet, dass die Nachricht an das Netzwerk gesendet wird: „Ich bin Knoten N, meine Quorumscheiben sind Q und ich stimme für V“.  Wenn ein Knoten auf diese Weise abstimmt, verspricht er, dass er niemals gegen V gestimmt hat und dies niemals tun wird. <br><br>  Bei Sendungen von Peer-to-Peer-Knoten sieht jeder Knoten, wie andere abstimmen.  Sobald der Knoten eine ausreichende Anzahl solcher Nachrichten sammelt, kann er Quorum-Slices verfolgen und versuchen, Quorums zu finden.  Wenn er ein Quorum von Kollegen sieht, die auch für V stimmen, kann er V <i>akzeptieren</i> und diese neue Nachricht an das Netzwerk senden: „Ich bin Knoten N, meine Slices sind Quorum Q und ich akzeptiere V“.  Die Akzeptanz bietet eine stärkere Garantie als eine einfache Abstimmung.  Wenn ein Knoten für V stimmt, kann er niemals für andere Optionen stimmen.  Wenn ein Knoten jedoch V akzeptiert, akzeptiert kein Knoten im Web jemals eine andere Option (Satz 8 im technischen Whitepaper SCP beweist dies). <br><br>  Natürlich ist es sehr wahrscheinlich, dass es nicht sofort ein Quorum von Knoten gibt, die mit V übereinstimmen. Andere Knoten können für andere Werte stimmen.  Für die Website gibt es jedoch noch einen anderen Weg von der einfachen Abstimmung zur Akzeptanz.  N kann einen anderen Wert von W annehmen, selbst wenn es nicht dafür gestimmt hat und selbst wenn es kein Quorum dafür sieht.  Um zu entscheiden, ob Sie Ihre Stimme ändern möchten, reicht es aus, einen <i>blockierenden Satz von</i> Knoten zu sehen, die W akzeptiert haben. Ein blockierender Satz ist ein Knoten in jedem der Slices der Quorums von N. Wie der Name schon sagt, kann er jeden anderen Wert <i>blockieren</i> .  Wenn alle Knoten in einer solchen Menge W annehmen, ist es (nach Satz 8) niemals möglich, ein Quorum zu bilden, das einen anderen Wert annimmt, und daher ist es auch sicher, W zu akzeptieren. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc2/b0f/6db/dc2b0f6db96bc646f9c13eed191934d9.png"><br>  <i><font color="gray">Knoten N mit drei Quorumscheiben.</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b12/544/25a/b1254425aec3dde64f6c0025ea6e7c41.png"><br>  <i><font color="gray">BDF ist ein Blockierungssatz für N: Es enthält einen Knoten von jeder der N Schichten.</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ee2/051/c90/ee2051c903689ee5ad2f0c4239e6c574.png"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BE ist auch eine Blockierungsmenge für N, da E in zwei Schichten von N erscheint.</font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eine Blockierungsmenge ist jedoch kein Quorum. Es wäre zu einfach, den Knoten N dazu zu bringen, den gewünschten Wert zu akzeptieren, wenn es ausreicht, nur einen Knoten in jeder der N Schichten zu knacken. Daher ist die Annahme des Wertes nicht das Ende der Abstimmung. Stattdessen muss N den Wert bestätigen, dh das Quorum der Knoten sehen, die ihn empfangen. Wenn er so weit geht, bestätigt der Rest des Netzwerks, wie das SCP-Whitepaper (in Satz 11) beweist, denselben Wert, sodass N die Abstimmung mit dem Verbund mit einem bestimmten Wert als Ergebnis beendet.</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/6eb/682/405/6eb682405d056f88c1eb2b272875e269.png"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Föderierte Abstimmung.</font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Prozess der Abstimmung, Annahme und Bestätigung ist eine vollständige Runde der föderierten Abstimmung. </font><font style="vertical-align: inherit;">Das Stellar Consensus Protocol vereint viele dieser Runden, um ein vollständiges Konsenssystem zu schaffen.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Stellar Consensus Protocol </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die beiden wichtigsten Merkmale eines Konsenssystems sind </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sicherheit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überlebensfähigkeit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Der Konsensalgorithmus ist „sicher“, wenn er verschiedenen Teilnehmern niemals unterschiedliche Ergebnisse liefern kann (eine Kopie von Bobs Geschichte wird Carol niemals widersprechen). "Vitalität" bedeutet, dass der Algorithmus immer ein Ergebnis liefert, das heißt, er bleibt nicht hängen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das beschriebene Verbundabstimmungsverfahren ist </font><font style="vertical-align: inherit;">in dem Sinne </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sicher,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dass, wenn ein Knoten den Wert von V bestätigt, kein anderer Knoten den anderen Wert bestätigt. Aber "bestätigt keine andere Bedeutung" - dies bedeutet nicht, dass er notwendigerweise etwas bestätigen wird. Die Teilnehmer können für so viele verschiedene Werte stimmen, dass nichts die Akzeptanzschwelle erreicht. Dies bedeutet, dass es keine Bundesabstimmung gibt.</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überlebensfähigkeit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Stellar Consensus Protocol verwendet föderierte Abstimmungen auf eine Weise, die sowohl Sicherheit als auch Überlebensfähigkeit garantiert. (Die Garantien für Sicherheit und Überlebensfähigkeit von SCP haben eine theoretische Grenze. Das Design wählt eine sehr starke Sicherheitsgarantie, die eine leichte Schwächung der Überlebensfähigkeit opfert, aber bei ausreichender Zeit wird wahrscheinlich ein Konsens erzielt.) Kurz gesagt, die Idee ist, mehrere föderierte Abstimmungen über mehrere Werte durchzuführen, bis eine von ihnen alle unten beschriebenen Phasen der SCP-Abstimmung vollständig durchläuft.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Werte, mit denen SCP nach Konsens strebt, können eine Transaktionshistorie oder eine Mittagsbestellung oder etwas anderes sein. Es ist jedoch wichtig zu beachten, dass dies nicht die Werte sind, die akzeptiert oder bestätigt werden. Stattdessen findet eine föderierte Abstimmung über </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansprüche dieser Werte statt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die ersten Abstimmungsrunden des Bundes finden in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nominierungsphase mit einer Reihe von Anträgen „Ich nominiere V“ statt, möglicherweise für viele verschiedene Werte von V. Der Zweck der Nominierung besteht darin, einen oder mehrere Anträge zu finden, die angenommen und bestätigt werden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach der Suche nach bestätigten Kandidaten geht SCP zur Abstimmungsphase über, in der das Ziel darin besteht, einen </font><i><font style="vertical-align: inherit;">Stimmzettel</font></i><font style="vertical-align: inherit;"> zu finden</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(d. h. ein Container für den vorgeschlagenen Wert) und ein Quorum, das ein </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dafür </font><font style="vertical-align: inherit;">deklarieren </font><font style="vertical-align: inherit;">kann (Commit). </font><font style="vertical-align: inherit;">Wenn ein Quorum einen Stimmzettel festlegt, wird sein Wert als Konsens angesehen. </font><font style="vertical-align: inherit;">Bevor der Knoten jedoch für die Stimmabgabe stimmen kann, muss er zunächst die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stornierung</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aller Stimmzettel mit einem niedrigeren Zählerwert bestätigen. </font><font style="vertical-align: inherit;">Diese Schritte - das Abbrechen der Stimmzettel, um einen zu finden, für den Sie das Commit bestätigen können - umfassen mehrere Abstimmungsrunden des Bundes über mehrere Stimmzettelerklärungen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In den folgenden Abschnitten werden die Nominierung und Abstimmung ausführlicher beschrieben.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nominierung </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zu Beginn der Nominierungsphase kann jeder Knoten spontan den Wert V auswählen und für die Aussage „Ich nominiere V“ stimmen. Ziel in dieser Phase ist es, die Nominierung eines bestimmten Wertes durch eine Bundesabstimmung zu bestätigen.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Möglicherweise stimmt eine ausreichende Anzahl von Knoten für ziemlich unterschiedliche Aussagen, und keine Nominierung kann die Schwelle der Annahme erreichen. Daher „reflektieren“ die Knoten nicht nur ihre eigenen Nominierungsstimmen, sondern auch die Nominierungen ihrer Kollegen. Reflexion (Echo) bedeutet, dass wenn der Knoten für die Nominierung von V stimmt, aber eine Nachricht des Nachbarn sieht, der für die Nominierung von W stimmt, er jetzt für die Nominierung von V und W stimmt. (Nicht alle Peer-Stimmen werden während der Nominierung reflektiert, weil Dies kann zu einer Explosion verschiedener Kandidaten führen. SCP enthält einen Mechanismus zur Regulierung dieser Stimmen. Kurz gesagt, es gibt eine Formel zur Bestimmung der "Priorität" des Festes aus Sicht des Knotens, und nur die Stimmen von Knoten mit hoher Priorität werden reflektiert. Je länger die Erweiterung stattfindet, desto niedriger ist der Schwellenwert, daher erweitert sich der Knoten eine Reihe von Festen, deren Stimmen er reflektieren wird.Die Prioritätsformel als eine der Eingabedaten enthält die Steckplatznummer, sodass ein Peer mit hoher Priorität für einen Steckplatz für einen anderen eine niedrige Priorität haben kann und umgekehrt.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konzeptionell handelt es sich bei der parallelen Nominierung von V und W um separate Bundesstimmen, die jeweils separat angenommen oder bestätigt werden können. In der Praxis packen SCP-Protokollnachrichten diese einzelnen Stimmen zusammen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obwohl die Abstimmung für die Nominierung V ein Versprechen ist, niemals gegen die Nominierung V zu stimmen, wird auf Antragsebene - in diesem Fall SCP - definiert, was „gegen“ bedeutet. SCP sieht keine Aussage, die der Abstimmung „Ich nominiere X“ widerspricht, dh es gibt keine Meldung „Ich bin gegen die Nominierung von X“, sodass der Knoten für die Nominierung von Werten stimmen kann. Viele dieser Nominierungen führen zu nichts, aber am Ende kann der Knoten einen oder mehrere Werte akzeptieren oder bestätigen. Sobald der Kandidat bestätigt ist, wird er ein </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kandidat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/65e/c7d/c03/65ec7dc03a79b55877355e653fed6829.png"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nominierung von SCP durch Verbundabstimmung. Es kann viele "B" -Werte geben, die von Peers gepusht und vom Peer "reflektiert" werden.</font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die Nominierung von Kandidaten kann zu mehreren bestätigten Kandidaten führen. Daher erfordert SCP, dass die Anwendungsschicht ein Verfahren zum Kombinieren von Kandidaten zu einem</font><i><font style="vertical-align: inherit;"> Verbund</font></i><font style="vertical-align: inherit;"> bereitstellt</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(zusammengesetzt). Die Vereinigungsmethode kann alles sein. Die Hauptsache ist, dass, wenn diese Methode bestimmt wird, jeder Knoten die gleichen Kandidaten vereint. Im Abstimmungssystem für das Mittagessen kann „Vereinigung“ einfach die Ablehnung eines der beiden Kandidaten bedeuten. (Aber auf deterministische Weise: Jeder Knoten muss denselben Wert zum Zurücksetzen auswählen. Zum Beispiel eine frühere Auswahl in alphabetischer Reihenfolge). Im Stellar-Zahlungsnetzwerk, in dem über die Transaktionshistorie abgestimmt wird, umfasst das Kombinieren der beiden vorgeschlagenen Nominierten das Kombinieren der darin enthaltenen Transaktionen und des letzten ihrer beiden Zeitstempel.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die technische Beschreibung von SCP beweist (Satz 12), dass das Netzwerk am Ende der Erweiterungsphase schließlich zu einem einzigen Verbund konvergiert. </font><font style="vertical-align: inherit;">Es gibt jedoch ein Problem: Verbundabstimmung ist ein asynchrones Protokoll (wie SCP). </font><font style="vertical-align: inherit;">Mit anderen Worten, die Knoten werden nicht zeitlich koordiniert, sondern nur gemäß den von ihnen gesendeten Nachrichten. </font><font style="vertical-align: inherit;">Aus Sicht des Knotens ist unklar, wann </font><font style="vertical-align: inherit;">die Erweiterungsphase </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beendet wurde</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Und obwohl alle Knoten irgendwann zu demselben Verbund kommen, können sie verschiedene Routen entlang dieses Pfades auswählen und dabei verschiedene zusammengesetzte Kandidaten erstellen, und sie können nie sagen, welcher endgültig ist. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das ist aber normal. </font><font style="vertical-align: inherit;">Die Nominierung ist nur eine Vorbereitung. </font><font style="vertical-align: inherit;">Die Hauptsache ist, die Anzahl der Kandidaten zu begrenzen, um einen Konsens zu erzielen, der während des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abstimmungsprozesses stattfindet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Stimmzettel </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Newsletter ist ein Paar von &lt;Zähler, Wert&gt;, wobei Zähler eine Ganzzahl ist, die mit 1 beginnt, und Wert ein Kandidat aus der Nominierungsphase ist. Dies kann der eigene Kandidat eines Knotens oder ein von diesem Knoten angenommener Nachbarkandidat sein. Grob gesagt werden während des Laufs wiederholt Versuche unternommen, das Netzwerk zu zwingen, einen Konsens über einen Kandidaten in einem Wahlgang zu erzielen, indem möglicherweise viele Bundesstimmen über Wahlanträge gehalten werden. Die Zähler in den Stimmzetteln verfolgen die unternommenen Versuche, und die Stimmzettel mit höheren Zählern haben Vorrang vor den Stimmzetteln mit niedrigeren Zählern. Wenn der Stimmzettel &lt;Zähler, Wert&gt; stecken bleibt, beginnt eine neue Abstimmung, jetzt auf dem Stimmzettel &lt;Zähler + 1, Wert&gt;. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist </font><i><font style="vertical-align: inherit;">wichtig</font></i><font style="vertical-align: inherit;"> , zwischen </font><i><font style="vertical-align: inherit;">Werten</font></i><font style="vertical-align: inherit;"> zu unterscheiden</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(zum Beispiel, was sollte die Reihenfolge für das Mittagessen sein: Pizza oder Salate), </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stimmzettel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ein Paar Gegenwert) und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aussagen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> über die Stimmzettel. </font><font style="vertical-align: inherit;">Die SCP-Runde umfasst mehrere Runden der föderierten Abstimmung, insbesondere zu solchen Aussagen:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "Ich bin bereit, Bulletin B zu begehen" und </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "Ich erkläre eine Verpflichtung gegenüber Bulletin B" </font></font></li></ul><br>  Aus Sicht dieses Knotens wird ein Konsens erzielt, wenn er Bulletin B findet, für das es die Aussage „Ich erkläre ein Commit für Bulletin B“ bestätigen kann (dh ein Quorum finden kann, das dies akzeptiert).  Von nun an können Sie sicher auf den in B angegebenen Wert reagieren - geben Sie beispielsweise diese Bestellung für das Mittagessen auf.  Dies wird als <i>Externalisierung des</i> Werts bezeichnet.  Sobald die Annahme des Stimmzettels bestätigt wurde, kann der Knoten sicher sein, dass jeder andere Knoten denselben Wert ausgelagert hat oder ihn definitiv in Zukunft festschreiben wird. <br><br>  Obwohl konzeptionell viele Verbundstimmen auf Anträgen für viele verschiedene Stimmzettel gehalten werden, tauschen sie nicht so viele Nachrichten aus, da jede Nachricht eine Anzahl von Stimmzetteln enthält.  Eine Botschaft fördert somit den Zustand vieler föderierter Stimmen gleichzeitig, zum Beispiel: „Ich akzeptiere Wahlprovisionen im Bereich von &lt;min, V&gt; bis &lt;max, V&gt;“. <br><br>  Was bedeuten die Begriffe "vorbereitet" und "festschreiben"? <br><br>  Ein Knoten stimmt für die Festlegung eines Stimmzettels, wenn er davon überzeugt ist, dass andere Knoten keine Stimmzettel mit anderen Werten festschreiben.  Dies zu überzeugen ist der Zweck der Vorbereitung der Erklärung.  Eine Abstimmung mit der Aufschrift „Ich bin bereit, Bulletin B zu begehen“ ist ein Versprechen, niemals ein Bulletin unter B, dh mit einem niedrigeren Zähler, zu begehen (SCP erfordert, dass die Werte in den Bulletins eine bestimmte Reihenfolge haben. Das Bulletin &lt;N1, V1&gt; ist kleiner als &lt;N2, V2&gt;, wenn N1 &lt;N2 ist, und auch wenn N1 = N2 und V1 &lt;V2).  Diese kleineren Stimmzettel werden während der vorbereitenden Abstimmung „abgebrochen“, während B als „vorbereitet“ gilt. <br><br>  Warum bedeutet "Ich bin bereit, Bulletin B zu begehen" "Ich verspreche, niemals Stimmzettel unter B zu begehen"?  Weil SCP Abbruch als das Gegenteil von Commit definiert.  Die Abstimmung für die Vorbereitung des Wahlgangs beinhaltet auch die Abstimmung, um einige andere Stimmzettel abzusagen, und wie wir zuvor besprochen haben, ist die Abstimmung für eine Sache ein Versprechen, niemals dagegen zu stimmen. <br><br>  Vor dem Senden des Commits muss die Site zuerst das Bulletin finden, das sie als vorbereitet bestätigen kann.  Mit anderen Worten, er hat eine föderierte Abstimmung über „Ich bin bereit, mich für Bulletin B zu verpflichten“, vielleicht für viele verschiedene Stimmzettel, bis er einen findet, der das Quorum akzeptiert. <br><br>  Woher kommen die Stimmzettel für die Abstimmung?  Zunächst sendet der Knoten die Vorbereitungen für die Abstimmung für &lt;1, ​​C&gt;, wobei C der zusammengesetzte Kandidat ist, der in der Nominierungsphase erstellt wurde.  Die Nominierung kann jedoch auch nach Beginn der Vorbereitungen für die Abstimmung dazu führen, dass weitere Kandidaten erscheinen, die zu neuen Stimmzetteln werden.  In der Zwischenzeit können Peers unterschiedliche Kandidaten haben und einen Blockierungssatz bilden, der "Ich bin bereit, ein B2-Bulletin zu schreiben" akzeptiert, wodurch der Knoten überzeugt wird, es ebenfalls zu akzeptieren.  Schließlich gibt es einen Timeout-Mechanismus, der neue Abstimmungsrunden für neue Stimmzettel mit höheren Zählern generiert, wenn die aktuellen Stimmzettel stecken bleiben. <br><br>  Sobald der Knoten Bulletin B findet, das er als vorbereitet bestätigen kann, sendet er eine neue Nachricht, "Bulletin B Commit".  Diese Abstimmung teilt den Peers mit, dass der Knoten B niemals aufgeben wird. Wenn B ein Stimmzettel &lt;N, C&gt; ist, bedeutet „Commit Bulletin &lt;N, C&gt;“ die bedingungslose Zustimmung, für die Bereitschaft jedes Stimmzettels von &lt;N, zu stimmen. C&gt; bis &lt;∞, s&gt;.  Dieser zusätzliche Wert hilft anderen Knoten, ein Commit nachzuholen, wenn sie sich noch in den früheren Phasen des Protokolls befinden. <br><br>  In diesem Stadium ist noch einmal hervorzuheben, dass es sich um asynchrone Protokolle handelt.  Nur weil ein Knoten Stimmen für ein Commit sendet, bedeutet dies nicht, dass seine Kollegen dies auch tun.  Einige von ihnen können noch über Anträge zur Vorbereitung der Abstimmung abstimmen, andere haben die Bedeutung möglicherweise bereits externalisiert.  SCP erklärt, wie ein Knoten jeden Peer-Nachrichtentyp unabhängig von seiner Phase verarbeiten soll. <br><br>  Wenn die Nachricht "Ich erkläre ein Commit &lt;N, C&gt;" nicht akzeptiert oder bestätigt werden kann, dh die Wahrscheinlichkeit der Annahme oder Bestätigung der Nachricht &lt;N + 1, C&gt; oder &lt;N + 2, C&gt; - oder in jedem Fall eines Bulletins mit einem Wert von C und keinem anderen, da der Knoten bereits versprochen hat, &lt;N, C&gt; niemals abzubrechen.  Wenn der Knoten die Stimmen für das Commit sendet, ist es C oder nichts, je nachdem, wie weit der Konsens geht.  Dies reicht jedoch nicht aus, damit der Knoten C auslagert. Einige byzantinische Feste (weniger als ein Quorum, basierend auf unseren Annahmen zur Sicherheit) können den Knoten belügen.  Die Annahme und anschließende Bestätigung eines bestimmten Stimmzettels (oder einer Reihe von Stimmzetteln) gibt dem Knoten das Vertrauen, C endgültig zu externalisieren. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0a6/882/059/0a6882059dac957e22a9059c79d1d710.png"><br>  <i><font color="gray">SCP läuft durch föderierte Abstimmung.</font></i>  <i><font color="gray">Nicht gezeigt: Es kann jederzeit ein Timer funktionieren, der den Zähler im Stimmzettel erhöht (und möglicherweise aus neuen nominierten Kandidaten ein neues Komposit erstellt).</font></i> <br><br>  Und das ist alles!  Sobald das Netzwerk einen Konsens erreicht hat, ist es bereit, dies immer wieder zu tun.  Im Stellar-Abrechnungsnetzwerk geschieht dies ungefähr alle 5 Sekunden: eine Leistung, die sowohl Sicherheit als auch Überlebensfähigkeit erfordert und von SCP garantiert wird. <br><br>  SCP kann dies erreichen, indem es sich auf mehrere Abstimmungsrunden des Bundes stützt.  Die föderierte Abstimmung wurde durch das Konzept der Quorum-Slices ermöglicht: Gruppen von Peer-Knoten, denen jeder Knoten als Teil seines (subjektiven) Quorums vertrauen wollte.  Diese Konfiguration bedeutet, dass Sie auch in einem Netzwerk mit offener Mitgliedschaft und byzantinischer Täuschung einen Konsens erzielen können. <br><br><h1>  Weiterführende Literatur </h1><br><ul><li>  Das technische Originaldokument für SCP finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier finden Sie den</a> Entwurf der Spezifikationen für die Implementierung. <br></li><li>  Der ursprüngliche Autor des SCP-Protokolls, David Mazier, vereinfacht es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> (aber technisch immer noch). <br></li><li>  Sie waren möglicherweise überrascht, die Begriffe „Bergbau“ oder „Arbeitsnachweis“ in diesem Artikel nicht zu finden.  SCP verwendet diese Methoden nicht, einige andere Konsensalgorithmen jedoch.  Zane Witherspoon schrieb eine zugängliche <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Übersicht über Konsensalgorithmen</a> . <br></li><li>  <a href="">Eine schrittweise Beschreibung eines</a> einfachen Netzwerks, das in einer vollständigen Runde SCP einen Konsens erzielt. <br></li><li>  Für Leser, die an SCP-Implementierungen interessiert sind: Informationen zum besseren Verständnis von SCP finden Sie im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">C ++ - Code,</a> der vom Stellar-Zahlungsnetzwerk verwendet wird, oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">im Go-Code, den</a> ich geschrieben habe. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de444710/">https://habr.com/ru/post/de444710/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de444696/index.html">Erhöhen Sie die Containerdichte auf einem Knoten mithilfe der PFCACHE-Technologie</a></li>
<li><a href="../de444700/index.html">Zufällige Datenbanken. Oracle Enterprise Data Quality - Schutzschild und Schwert für Enterprise Storage</a></li>
<li><a href="../de444704/index.html">Chancen nanoCAD SPDS Baustelle bei Bau- und Wiederaufbauprojekten unter beengten Verhältnissen</a></li>
<li><a href="../de444706/index.html">3D Facebook Fotos im Inneren: Parallax Shader</a></li>
<li><a href="../de444708/index.html">PentQL-Anwendung mit GraphQL</a></li>
<li><a href="../de444712/index.html">„Atypische Einstellung zur Finanzierung“ - was ist, wenn die Mitarbeiter das Einkommen selbst verwalten? Gespräch mit Flant</a></li>
<li><a href="../de444714/index.html">Wie wir CAD COMPASS-3D → Teil 1 übertaktet haben</a></li>
<li><a href="../de444716/index.html">Ein Samsung-Handy mit einem faltbaren Bildschirm für 2000 US-Dollar zeigt eine Falte</a></li>
<li><a href="../de444718/index.html">Amateur-Holographie - der Beginn der Reise</a></li>
<li><a href="../de444720/index.html">Was der Autor geraucht hat: Fügen Sie die alte Schule zu dieser verrückten Welt der Spiele hinzu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>