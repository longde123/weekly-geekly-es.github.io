<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòí üõ¢Ô∏è üë®‚Äçüöí Se pr√©parer pour combiner ü¶ë üî∞ üë©üèΩ‚Äçüé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a un an et demi, j'ai chant√© les louanges de RxSwift . Il m'a fallu un certain temps pour le comprendre, mais quand cela s'est produit, il n'y av...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Se pr√©parer pour combiner</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/470117/"><img src="https://habrastorage.org/webt/km/8-/uo/km8-uov-j3m2rfjjsxscoyeh9bc.jpeg"><br><br>  Il y a un an et demi, j'ai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chant√© les louanges de</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RxSwift</a> .  Il m'a fallu un certain temps pour le comprendre, mais quand cela s'est produit, il n'y avait pas de retour en arri√®re.  Maintenant, j'avais le meilleur marteau du monde, et sacr√©ment si tout autour de moi ne ressemblait pas √† un clou. <br><br>  Apple a pr√©sent√© le cadre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Combine</a> lors de la conf√©rence d'√©t√© de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WWDC</a> .  √Ä premi√®re vue, cela ressemble √† une version l√©g√®rement meilleure de RxSwift.  Avant de pouvoir expliquer ce que j'aime √† ce sujet et ce qui ne l'est pas, nous devons comprendre quel probl√®me Combine est con√ßu pour r√©soudre. <br><a name="habracut"></a><br><h2>  Programmation r√©active?  Et alors? </h2><br>  La communaut√© ReactiveX - dont la communaut√© RxSwift fait partie - explique son essence comme suit: <br><br><blockquote>  API pour la programmation asynchrone avec des threads observables. </blockquote><br>  Et aussi: <br><br><blockquote>  ReactiveX est une combinaison des meilleures id√©es des mod√®les de conception Observer et Iterator, ainsi que de la programmation fonctionnelle. </blockquote><br>  Bon ... d'accord. <br><br>  Et qu'est-ce que <i>cela</i> signifie <i>vraiment</i> ? <br><br><h2>  Les bases </h2><br>  Pour vraiment comprendre l'essence de la programmation r√©active, je trouve utile de comprendre comment nous y sommes arriv√©s.  Dans cet article, je vais d√©crire comment vous pouvez regarder les types existants dans n'importe quel langage POO moderne, les tordre, puis arriver √† une programmation r√©active. <br><br>  Dans cet article, nous allons nous plonger rapidement dans la jungle, ce qui n'est pas <i>absolument</i> n√©cessaire pour comprendre la programmation r√©active. <br><br>  Cependant, je consid√®re cela comme un exercice acad√©mique curieux, en particulier en ce qui concerne la fa√ßon dont les langages fortement typ√©s peuvent nous conduire √† de nouvelles d√©couvertes. <br><br>  Alors attendez mes prochains articles si vous √™tes int√©ress√© par de nouveaux d√©tails. <br><br><h2>  Enumerable </h2><br>  La ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">programmation r√©active</a> ¬ª que je connais est issue du langage dans lequel j'ai √©crit - C #.  La pr√©misse elle-m√™me est assez simple: <br><br>  <i>Et si, au lieu d'extraire des valeurs d'√©num√©rables, ils vous enverraient les valeurs elles-m√™mes?</i> <br><br>  Cette id√©e, ¬´pousser au lieu de tirer¬ª, a √©t√© mieux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©crite par</a> Brian Beckman et Eric Meyer.  Les 36 premi√®res minutes ... Je n'ai rien compris, mais <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√† partir de la 36e minute,</a> √ßa devient <i>vraiment</i> int√©ressant. <br><br>  En bref, reformulons l'id√©e d'un groupe lin√©aire d'objets dans Swift, ainsi que d'un objet qui peut parcourir ce groupe lin√©aire.  Vous pouvez le faire en d√©finissant ces faux protocoles Swift: <br><br><pre><code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//   ;     //    Array. protocol Enumerable { associatedtype Enum: Enumerator associatedtype Element where Self.Element == Self.Enum.Element func getEnumerator() -&gt; Self.Enum } // ,       . protocol Enumerator: Disposable { associatedtype Element func moveNext() throws -&gt; Bool var current: Element { get } } //          // Enumerator,         .   . protocol Disposable { func dispose() }</span></span></code> </pre> <br><h2>  Doubles </h2><br>  Tournons le tout et faisons des <i>doubles</i> .  Nous enverrons les donn√©es d'o√π ils viennent.  Et r√©cup√©rez les donn√©es d'o√π ils sont partis.  Cela semble absurde, mais supportez-le un peu. <br><br><h3>  Double √©num√©rable </h3><br>  Commen√ßons par Enumerable: <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//    ,  . protocol Enumerable { associatedtype Element where Self.Element == Self.Enum.Element associatedtype Enum: Enumerator func getEnumerator() -&gt; Self.Enum } protocol DualOfEnumerable { //  Enumerator : // getEnumerator() -&gt; Self.Enum //    : // getEnumerator(Void) -&gt; Enumerator // //  , : // : Void; : Enumerator // getEnumerator(Void) ‚Üí Enumerator // //     Void   Enumerator. //   -      Enumerator,   Void. // :  Enumerator; : Void func subscribe(DualOfEnumerator) }</span></span></code> </pre> <br>  Depuis que <code>getEnumerator()</code> pris <code>Void</code> et a donn√© <code>Enumerator</code> , maintenant nous acceptons [double] <code>Enumerator</code> et donnons <code>Void</code> . <br><br>  Je sais que c'est √©trange.  Ne pars pas. <br><br><h3>  Double √©num√©rateur </h3><br>  Et puis qu'est-ce que <code>DualOfEnumerator</code> ? <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//    ,  . protocol Enumerator: Disposable { associatedtype Element // : Void; : Bool, Error func moveNext() throws -&gt; Bool // : Void; : Element var current: Element { get } } protocol DualOfEnumerator { // : Bool, Error; : Void //   Error    func enumeratorIsDone(Bool) // : Element, : Void var nextElement: Element { set } }</span></span></code> </pre> <br>  Il y a plusieurs probl√®mes ici: <br><br><ul><li>  Il n'y a pas de concept de propri√©t√© en ensemble uniquement dans Swift. <br></li><li>  Que s'est-il pass√© avec les <code>throws</code> dans <code>Enumerator.moveNext()</code> ? <br></li><li>  Qu'arrive-t-il au <code>Disposable</code> ? <br></li></ul><br>  Pour r√©soudre le probl√®me avec la propri√©t√© set-only, nous pouvons la traiter comme ce qu'elle est vraiment - une fonction.  <code>DualOfEnumerator</code> notre <code>DualOfEnumerator</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// : Bool; : Void, Error //   Error    func enumeratorIsDone(Bool) // : Element, : Void func next(Element) }</span></span></code> </pre> <br>  Pour r√©soudre le probl√®me des <code>throws</code> , s√©parons l'erreur qui peut se produire dans <code>moveNext()</code> et travaillons avec elle comme une fonction <code>error()</code> distincte: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// : Bool, Error; : Void func enumeratorIsDone(Bool) func error(Error) // : Element, : Void func next(Element) }</span></span></code> </pre> <br>  On peut faire autre chose: regardez la signature de la fin de l'it√©ration: <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enumeratorIsDone</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bool)</span></span></span></span></code> </pre> <br>  Probablement quelque chose de similaire se produira avec le temps: <br><br><pre> <code class="swift hljs">enumeratorIsDone(<span class="hljs-literal"><span class="hljs-literal">false</span></span>) enumeratorIsDone(<span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-comment"><span class="hljs-comment">//     enumeratorIsDone(true)</span></span></code> </pre> <br>  Maintenant, simplifions les choses et n'appelons <code>enumeratorIsDone</code> que lorsque ... tout est vraiment pr√™t.  Guid√©s par cette id√©e, nous simplifions le code: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enumeratorIsDone</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Error)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Element)</span></span></span></span> }</code> </pre><br><h3>  Prenez soin de nous </h3><br>  Qu'en est-il <code>Disposable</code> ?  Que faire avec √ßa?  √âtant donn√© que <code>Disposable</code> fait partie <i>du type</i> <code>Enumerator</code> , lorsque nous obtenons le <i>double</i> <code>Enumerator</code> , il ne devrait probablement pas √™tre du tout dans <code>Enumerator</code> .  Au lieu de cela, il doit faire partie de <code>DualOfEnumerable</code> .  Mais o√π exactement? <br><br>  <code>DualOfEnumerator</code> ici: <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DualOfEnumerator)</span></span></span></span></code> </pre> <br>  Si nous acceptons <code>DualOfEnumerator</code> , alors le <code>Disposable</code> ne devrait-il pas √™tre <i>retourn√©</i> ? <br><br>  Voici quel genre de double vous vous retrouvez: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DualOfEnumerator)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Disposable</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enumeratorIsDone</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Error)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Element)</span></span></span></span> }</code> </pre><br><h2>  Appelez √ßa une rose, mais pas </h2><br>  Alors, encore une fois, voici ce que nous avons obtenu: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DualOfEnumerator)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Disposable</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enumeratorIsDone</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Error)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Element)</span></span></span></span> }</code> </pre> <br>  Jouons un peu avec les noms maintenant. <br><br>  Commen√ßons par <code>DualOfEnumerator</code> .  Nous trouverons de meilleurs noms pour les fonctions afin de d√©crire plus pr√©cis√©ment ce qui se passe: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DualOfEnumerator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Error)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Element)</span></span></span></span> }</code> </pre> <br>  Tellement mieux et plus compr√©hensible. <br><br>  Et les noms de type?  Ils sont tout simplement horribles.  Changeons-les un peu. <br><br><ul><li>  <code>DualOfEnumerator</code> - quelque chose qui suit ce qui arrive √† un groupe lin√©aire d'objets.  On peut dire qu'il <i>observe</i> un groupe lin√©aire. <br></li><li>  <code>DualOfEnumerable</code> est un sujet d'observation.  Ce que nous regardons.  Par cons√©quent, il peut √™tre appel√© <i>observable</i> . <br></li></ul><br>  Maintenant, apportez les derni√®res modifications et obtenez les √©l√©ments suivants: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Observable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Observer)</span></span></span></span> ‚Üí <span class="hljs-type"><span class="hljs-type">Disposable</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Observer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Error)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Element)</span></span></span></span> }</code> </pre><br><h2>  Wow </h2><br>  Nous venons de cr√©er deux objets fondamentaux dans RxSwift.  Vous pouvez voir leurs versions r√©elles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Notez que dans le cas d'Observer, les trois fonctions <code>on()</code> sont combin√©es en une seule <code>on(Event)</code> , o√π <code>Event</code> est une √©num√©ration qui d√©termine ce qu'est l'√©v√©nement - ach√®vement, valeur suivante ou erreur. <br><br>  Ces deux types sous-tendent RxSwift et la programmation r√©active. <br><br><h2>  √Ä propos des faux protocoles </h2><br>  Les deux ¬´faux¬ª protocoles que j'ai mentionn√©s ci-dessus ne sont en fait pas du tout faux.  Ce sont des analogues des types existants dans Swift: <br><br><ul><li>  √ânum√©rable est une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©quence</a> <br></li><li>  L'√©num√©rateur est une s√©quence d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">it√©rateur</a> <br></li></ul><br><h2>  Et alors? </h2><br>  Alors de quoi s'inqui√©ter? <br><br>  Tant dans le d√©veloppement moderne - en <i>particulier le</i> d√©veloppement d'applications - est associ√© √† l'asynchronie.  L'utilisateur a soudainement cliqu√© sur un bouton.  L'utilisateur a soudainement s√©lectionn√© un onglet dans UISegmentControl.  L'utilisateur a soudainement s√©lectionn√© un onglet dans l'UITabBar.  La prise Web nous a soudain donn√© de nouvelles informations.  Ce t√©l√©chargement s'est soudainement - et finalement - termin√©.  Cette t√¢che d'arri√®re-plan s'est termin√©e brusquement.  Cette liste s'allonge encore et encore. <br><br>  Dans le monde moderne de CocoaTouch, il existe de nombreuses fa√ßons de g√©rer de tels √©v√©nements: <br><br><ul><li>  notifications <br></li><li>  rappels <br></li><li>  Observation cl√©-valeur (KVO), <br></li><li>  m√©canisme cible / action. <br></li></ul><br>  Imaginez si <i>tout cela</i> pouvait se refl√©ter dans une seule interface.  Qui pourrait fonctionner avec <i>tout</i> type de donn√©es ou d'√©v√©nements asynchrones dans l'ensemble de l'application. <br><br>  Imaginez maintenant s'il y aurait tout un ensemble <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de fonctions</a> qui vous permettrait de modifier ces <i>flux</i> , de les convertir d'un type √† un autre, d'extraire des informations d'Elements ou m√™me de les combiner avec d'autres flux. <br><br>  Soudain, entre nos mains est un nouvel ensemble <i>universel</i> d'outils. <br>  Et donc, nous sommes revenus au d√©but: <br><br><blockquote>  API pour la programmation asynchrone avec des threads observables. </blockquote><br>  C'est ce qui fait de RxSwift un outil si puissant.  Comme Combiner. <br><br><h2>  Et ensuite? </h2><br>  Si vous voulez en savoir plus sur RxSwift <i>dans la pratique</i> , alors je recommande <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mes cinq articles √©crits en 2016</a> .  Ils d√©crivent la cr√©ation d'une simple application CocoaTouch, suivie d'une conversion progressive vers RxSwift. <br><br>  Dans l'un des articles suivants, j'expliquerai pourquoi de nombreuses techniques d√©crites dans ma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©rie d'articles pour les d√©butants</a> ne sont pas applicables dans Combine, et je compare √©galement Combine avec RxSwift. <br><br><h1>  Combiner: quel est l'int√©r√™t? </h1><br>  La discussion sur Combine comprend √©galement une discussion sur les principales diff√©rences entre celui-ci et RxSwift.  Pour moi, il y en a trois: <br><br><ul><li>  la possibilit√© d'utiliser des classes non r√©actives, <br></li><li>  gestion des erreurs <br></li><li>  contre-pression. <br></li></ul><br>  Je consacrerai un article s√©par√© √† chaque article.  Je vais commencer par le premier. <br><br><h2>  Caract√©ristiques de RxCocoa </h2><br>  Dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un post pr√©c√©dent,</a> j'ai dit que RxSwift est plus que ... RxSwift.  Il offre de nombreuses possibilit√©s d'utilisation des contr√¥les d'UIKit dans le sous-projet de type mais pas tout √† fait de RxCocoa.  En outre, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RxSwiftCommunity</a> est all√© plus loin et a impl√©ment√© de nombreuses liaisons pour des rues encore plus isol√©es d'UIKit, ainsi que d'autres classes CocoaTouch que RxSwift et RxCocoa ne couvrent pas encore. <br><br>  Par cons√©quent, il est tr√®s facile d'obtenir un flux <code>Observable</code> cliquant, par exemple, sur UIButton.  Je vais redonner cet exemple: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> disposeBag = <span class="hljs-type"><span class="hljs-type">DisposeBag</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> button = <span class="hljs-type"><span class="hljs-type">UIButton</span></span>() button.rx.tap .subscribe(onNext: { <span class="hljs-number"><span class="hljs-number">_</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Tap!"</span></span>) }) .disposed(by: disposeBag)</code> </pre> <br>  Poids l√©ger. <br><br><h2>  Parlons (enfin) encore de Combiner </h2><br>  Combine est tr√®s similaire √† RxSwift.  Comme le dit la documentation: <br><br><blockquote>  Le framework Combine fournit une API Swift d√©clarative pour g√©rer les valeurs dans le temps. </blockquote><br>  Cela semble familier: rappelez-vous la description de ReactiveX (le projet parent de RxSwift): <br><br><blockquote>  API pour la programmation asynchrone avec des threads observables. </blockquote><br>  Dans les deux cas, la m√™me chose est dite.  C'est juste que des termes sp√©cifiques sont utilis√©s dans la description de ReactiveX.  Il peut √™tre reformul√© comme suit: <br><br><blockquote>  Une API pour la programmation asynchrone avec des valeurs dans le temps. </blockquote><br>  Presque la m√™me chose que pour moi. <br><br><h2>  Comme avant </h2><br>  Lorsque j'ai commenc√© √† analyser l'API, il est imm√©diatement devenu √©vident que la plupart des types que je connais de RxSwift ont des options similaires dans Combine: <br><br><ul><li>  Observable ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√âditeur</a> <br></li><li>  Observateur ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Abonn√©</a> <br></li><li>  Jetable ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Annulable</a> .  C'est un triomphe du marketing.  Vous ne pouvez pas imaginer le nombre de regards surpris que j'ai re√ßus de d√©veloppeurs plus impartiaux lorsque j'ai commenc√© √† d√©crire Disposable dans RxSwift. <br></li><li>  SchedulerType ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Scheduler</a> <br></li></ul><br>  Jusqu'ici tout va bien.  Encore une fois, j'aime bien Annulable bien plus que Jetable.  Un excellent remplacement, non seulement en termes de marketing, mais aussi en termes de description pr√©cise de l'essence de l'objet. <br><br>  Plus c'est encore mieux! <br><br><ul><li>  Pilote de RxCocoa -&gt; Ceci est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BindableObject</a> de SwiftUI <br></li></ul><br>  Ce n'est pas imm√©diatement clair, mais spirituellement ils servent un seul but, et aucun d'eux ne peut donner lieu √† des erreurs. <br><br><ul><li>  Single ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Future</a> <br></li><li>  SubjectType ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sujet</a> <br></li><li>  PublishSubject ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PassthroughSubject</a> <br></li></ul><br><h2>  "Pause pour merde" </h2><br>  Tout change d√®s que vous commencez √† plonger dans RxCocoa.  Rappelez-vous l'exemple ci-dessus, dans lequel nous voulions obtenir un flux observable qui repr√©sente les clics sur UIButton?  Le voici: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> disposeBag = <span class="hljs-type"><span class="hljs-type">DisposeBag</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> button = <span class="hljs-type"><span class="hljs-type">UIButton</span></span>() button.rx.tap .subscribe(onNext: { <span class="hljs-number"><span class="hljs-number">_</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Tap!"</span></span>) }) .disposed(by: disposeBag)</code> </pre> <br>  Combiner n√©cessite ... beaucoup plus de travail pour faire de m√™me. <br><br>  <b>Combine ne fournit aucune capacit√© de liaison aux objets UIKit.</b> <br><br>  C'est ... juste une d√©ception irr√©elle. <br><br>  Voici un moyen courant d'obtenir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UIControl.Event √†</a> partir d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UIControl √† l'</a> aide de Combine: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ControlPublisher</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIControl</span></span></span><span class="hljs-class">&gt;: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Publisher</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">ControlEvent</span></span> = (control: <span class="hljs-type"><span class="hljs-type">UIControl</span></span>, event: <span class="hljs-type"><span class="hljs-type">UIControl</span></span>.<span class="hljs-type"><span class="hljs-type">Event</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">Output</span></span> = <span class="hljs-type"><span class="hljs-type">ControlEvent</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">Failure</span></span> = <span class="hljs-type"><span class="hljs-type">Never</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> subject = <span class="hljs-type"><span class="hljs-type">PassthroughSubject</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Output</span></span>, <span class="hljs-type"><span class="hljs-type">Failure</span></span>&gt;() <span class="hljs-keyword"><span class="hljs-keyword">convenience</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(control: <span class="hljs-type"><span class="hljs-type">UIControl</span></span>, event: <span class="hljs-type"><span class="hljs-type">UIControl</span></span>.<span class="hljs-type"><span class="hljs-type">Event</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(control: control, events: [event]) } <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(control: <span class="hljs-type"><span class="hljs-type">UIControl</span></span>, events: [<span class="hljs-type"><span class="hljs-type">UIControl</span></span>.<span class="hljs-type"><span class="hljs-type">Event</span></span>]) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> event <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> events { control.addTarget(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, action: #selector(controlAction), <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: event) } } <span class="hljs-meta"><span class="hljs-meta">@objc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">controlAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sender: UIControl, forEvent event: UIControl.Event)</span></span></span></span> { subject.send(<span class="hljs-type"><span class="hljs-type">ControlEvent</span></span>(control: sender, event: event)) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">receive</span></span></span><span class="hljs-function">&lt;S&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(subscriber: S)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-type"><span class="hljs-type">S</span></span> : <span class="hljs-type"><span class="hljs-type">Subscriber</span></span>, <span class="hljs-type"><span class="hljs-type">ControlPublisher</span></span>.<span class="hljs-type"><span class="hljs-type">Failure</span></span> == <span class="hljs-type"><span class="hljs-type">S</span></span>.<span class="hljs-type"><span class="hljs-type">Failure</span></span>, <span class="hljs-type"><span class="hljs-type">ControlPublisher</span></span>.<span class="hljs-type"><span class="hljs-type">Output</span></span> == <span class="hljs-type"><span class="hljs-type">S</span></span>.<span class="hljs-type"><span class="hljs-type">Input</span></span> { subject.receive(subscriber: subscriber) } }</code> </pre> <br>  Ici ... <i>beaucoup</i> plus de travail.  Au moins, l'appel ressemble √†: <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">ControlPublisher</span></span>(control: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.button, event: .touchUpInside) .sink { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Tap!"</span></span>) }</code> </pre> <br>  A titre de comparaison, RxCocoa fournit un cacao agr√©able et savoureux sous forme de liaisons aux objets UIKit: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.button.rx.tap .subscribe(onNext: { <span class="hljs-number"><span class="hljs-number">_</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Tap!"</span></span>) })</code> </pre> <br>  En eux-m√™mes, ces d√©fis sont finalement tr√®s similaires.  La seule chose frustrante est que j'ai d√ª √©crire <code>ControlPublisher</code> moi-m√™me pour arriver √† ce point.  De plus, RxSwift et RxCocoa sont tr√®s bien test√©s et sont utilis√©s dans des projets bien plus que les miens. <br><br>  √Ä titre de comparaison, mon <code>ControlPublisher</code> est apparu seulement ... maintenant.  Ce n'est qu'en raison du nombre de clients (z√©ro) et du temps d'utilisation dans le monde r√©el (presque z√©ro par rapport √† RxCocoa) que mon code peut √™tre consid√©r√© comme infiniment plus dangereux. <br><br>  Bummer. <br><br><h2>  Aide communautaire? </h2><br>  Honn√™tement, rien n'emp√™che la communaut√© de cr√©er son propre ¬´CombineCocoa¬ª open source, qui comblerait le vide de RxCocoa tout comme le faisait RxSwiftCommunity. <br><br>  Cependant, je consid√®re cela comme un √©norme inconv√©nient de Combine.  Je ne veux pas r√©√©crire l'int√©gralit√© de RxCocoa, seulement pour obtenir des liaisons aux objets UIKit. <br><br>  Si je d√©cide de parier sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SwiftUI</a> , je suppose que cela <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©liminera le</a> probl√®me du manque de fixations.  M√™me <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ma petite application</a> contient un <i>tas de</i> code d'interface utilisateur.  Jeter tout cela juste pour sauter dans le train combin√© serait au moins stupide, voire dangereux. <br><br>  Soit dit en passant, l'article de la documentation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i>R√©ception et gestion d'√©v√©nements avec Combine</i></a> d√©crit bri√®vement comment recevoir et traiter des √©v√©nements dans Combine.  L'introduction est bonne, elle montre comment extraire une valeur d'un champ de texte et l'enregistrer dans un objet de mod√®le personnalis√©.  La documentation montre √©galement l'utilisation d'op√©rateurs pour effectuer des modifications plus avanc√©es sur le flux en question. <br><br><h2>  Exemple </h2><br>  Passons √† la fin de la documentation, o√π l'exemple de code est: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sub = <span class="hljs-type"><span class="hljs-type">NotificationCenter</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span> .publisher(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: <span class="hljs-type"><span class="hljs-type">NSControl</span></span>.textDidChangeNotification, object: filterField) .<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>( { ($<span class="hljs-number"><span class="hljs-number">0</span></span>.object <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>! <span class="hljs-type"><span class="hljs-type">NSTextField</span></span>).stringValue } ) .assign(to: \<span class="hljs-type"><span class="hljs-type">MyViewModel</span></span>.filterString, on: myViewModel)</code> </pre> <br>  J'ai ... beaucoup de probl√®mes avec √ßa. <br><br><h2>  Vous avertir que je n'aime pas √ßa </h2><br>  Les deux premi√®res lignes me posent le plus de questions: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sub = <span class="hljs-type"><span class="hljs-type">NotificationCenter</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span> .publisher(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: <span class="hljs-type"><span class="hljs-type">NSControl</span></span>.textDidChangeNotification, object: filterField)</code> </pre><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NotificationCenter</a> est quelque chose comme un bus d'application (ou m√™me un bus syst√®me) dans lequel beaucoup peuvent jeter des donn√©es ou attraper des informations en passant.  Cette solution est de la cat√©gorie tout-pour-tout, comme le souhaitent les cr√©ateurs.  Et il y a vraiment de nombreuses situations o√π vous devrez peut-√™tre savoir, disons, que le clavier vient d'√™tre affich√© ou cach√©.  NotificationCenter est un excellent moyen de diffuser ce message dans tout le syst√®me. <br><br>  Mais pour moi, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NotificationCenter</a> est un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code avec un √©tranglement</a> .  Il y a des moments (comme recevoir une notification sur le clavier) lorsque NotificationCenter est en fait la <i>meilleure</i> solution <i>possible</i> au probl√®me.  Mais trop souvent pour moi, NotificationCenter est la solution la <i>plus pratique</i> .  Il est vraiment tr√®s pratique de d√©poser quelque chose dans NotificationCenter et de le r√©cup√©rer ailleurs dans l'application. <br><br>  De plus, le NotificationCenter est de type <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"cha√Æne"</a> , c'est-√†-dire que vous pouvez facilement faire l'erreur de la notification que vous essayez de publier ou d'√©couter.  Swift fait tout son possible pour am√©liorer la situation, mais le m√™me NSString se trouve toujours sous le capot. <br><br><h2>  √Ä propos de KVO </h2><br>  Sur la plate-forme Apple, il existe depuis longtemps un moyen populaire de recevoir des notifications de modifications dans diff√©rentes parties du code: l'observation des valeurs-cl√©s (KVO).  Apple le d√©crit comme ceci: <br><br><blockquote>  Il s'agit d'un m√©canisme qui permet aux objets de recevoir des notifications de modifications des propri√©t√©s sp√©cifi√©es d'autres objets. </blockquote><br>  Gr√¢ce √† un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tweet de Gui Rambo,</a> j'ai remarqu√© qu'Apple avait ajout√© des fixations KVO √† Combine.  Cela pourrait signifier que je pourrais me d√©barrasser des nombreuses d√©ceptions concernant le manque d'analogue RxCocoa dans Combine.  Si je peux utiliser KVO, cela √©liminera probablement le besoin de CombineCocoa, pour ainsi dire. <br><br>  J'ai essay√© de trouver un exemple d'utilisation de KVO pour obtenir une valeur √† partir d'un <code>UITextField</code> et la sortir sur la console: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sub = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.textField.publisher(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: \<span class="hljs-type"><span class="hljs-type">UITextField</span></span>.text) .sink(receiveCompletion: { <span class="hljs-number"><span class="hljs-number">_</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Completed"</span></span>) }, receiveValue: { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Text field is currently \"\($0)\""</span></span>) })</code> </pre> <br>  √áa a l'air bien, passez √† autre chose? <br><br>  Pas si vite, mes amis. <br><br>  J'ai oubli√© la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">v√©rit√© inconfortable</a> : <br><br>  UIKit, dans l'ensemble, n'est pas compatible avec KVO. <br><br>  Et sans le support de KVO, mon id√©e ne fonctionnera pas.  Mes v√©rifications l'ont confirm√©: le code ne sort rien sur la console lorsque j'entre du texte dans le champ. <br><br>  Donc, mes espoirs de me d√©barrasser du besoin de fixations UIKit √©taient beaux, mais pas pour longtemps. <br><br><h2>  Le nettoyage </h2><br>  Un autre probl√®me de Combine est qu'il n'est toujours pas clair o√π et comment lib√©rer des ressources dans les objets <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">annulables</a> .  <i>Il semble</i> que nous devrions les stocker dans des variables d'instance.  Mais je ne me souviens pas que dans la documentation officielle, quelque chose ait √©t√© dit au sujet du nettoyage. <br><br>  RxSwift a un DisposeBag terriblement nomm√© mais incroyablement pratique.  Il n'est pas moins facile de cr√©er CancelBag dans Combine, mais je ne suis pas s√ªr que dans ce cas, c'est la meilleure solution. <br><br>  Dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">prochain article,</a> nous parlerons de la gestion des erreurs dans RxSwift et Combine, des avantages et des inconv√©nients des deux approches. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr470117/">https://habr.com/ru/post/fr470117/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr470105/index.html">oktech Data Sense # 3: Syst√®mes de recommandation</a></li>
<li><a href="../fr470107/index.html">Trucs et astuces de ma cha√Æne Telegram @pythonetc, septembre 2019</a></li>
<li><a href="../fr470109/index.html">@Pythonetc septembre 2019</a></li>
<li><a href="../fr470113/index.html">Comment la technologie en m√©moire a chang√© la Business Intelligence</a></li>
<li><a href="../fr470115/index.html">Votre navigateur mobile rend la conduite difficile</a></li>
<li><a href="../fr470121/index.html">√âcoles de programmation d'entreprise ou comment entrer en informatique</a></li>
<li><a href="../fr470123/index.html">Pi√®ge financier Yandex.Money</a></li>
<li><a href="../fr470125/index.html">Ne jugez pas strictement le code de quelqu'un d'autre</a></li>
<li><a href="../fr470127/index.html">Compositeur avec une longue m√©moire √† court terme</a></li>
<li><a href="../fr470129/index.html">Gestion de la m√©moire d√©clarative</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>