<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå† üë©‚Äçüéì ü§¶üèΩ Se o m√≥dulo CRT de Pascal estava em JavaScript üë©‚Äç‚ù§Ô∏è‚Äçüë® ‚ôüÔ∏è ü§ö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Uma tentativa de implementar o conhecido m√≥dulo CRT usado no Pascal em JavaScript. O que saiu e o que n√£o, eu vou te dizer. 

 Entrada 
 Meu conhecime...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Se o m√≥dulo CRT de Pascal estava em JavaScript</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438690/">  Uma tentativa de implementar o conhecido m√≥dulo CRT usado no Pascal em JavaScript.  O que saiu e o que n√£o, eu vou te dizer. <br><a name="habracut"></a><br><h3>  Entrada </h3><br>  Meu conhecimento da programa√ß√£o come√ßou na 8¬™ s√©rie, quando aprendi em uma aula de inform√°tica o que √© Pascal e quais oportunidades ele oferece.  Em seguida, o Turbo Pascal foi instalado nos computadores das escolas, embora o professor de ci√™ncias da computa√ß√£o desejasse colocar o PascalABC.NET l√°.  Claro, tudo come√ßou com as conclus√µes banais da linha no console, minha atividade foi principalmente destinada a uma excelente prepara√ß√£o para o OGE.  Nenhum m√≥dulo foi estudado, porque ningu√©m exigiu isso no exame. <br><br>  Mas mesmo quando eu conseguia "subordinar" a janela do console a mim mesmo, exibir tudo o que queria l√°, fazer c√°lculos, aceitar informa√ß√µes do usu√°rio, fiquei surpreso com o qu√£o legal √©! <br><br>  Mas o tempo est√° passando, a vida est√° mudando: o exame passou, o exame passou, admiss√£o bem-sucedida na universidade.  Todo esse tempo venho estudando novos idiomas com grande interesse, como resultado do qual posso escrever sites com seguran√ßa, seja ele frontal ou traseiro.  Por alguma raz√£o, a programa√ß√£o na web me interessa mais. <br><br><h3>  Como chegou √† CRT </h3><br>  De volta √† escola, estudei um dos m√≥dulos Pascal interessantes chamados CRT.  Na verdade, n√£o h√° nada de complicado nisso, o conjunto de comandos √© pequeno, mas eles permitem que voc√™ fa√ßa coisas novas na janela do console: mova o cursor em uma tela de 80x25 (tamanho da tela do DOS), altere a cor do plano de fundo e do texto, reproduza sons de uma certa frequ√™ncia e dura√ß√£o.  Foi poss√≠vel criar jogos ASCII completos, o que praticamente n√£o ocupava espa√ßo no disco r√≠gido devido ao seu tamanho pequeno. <br><br>  E agora, depois de v√°rios anos, decidi, com base no interesse, escrever um pequeno arquivo js, ‚Äã‚Äãquando conectado com o qual voc√™ pode trabalhar com a janela do navegador e com a janela do console.  Eu direi imediatamente que √© muito dif√≠cil, se poss√≠vel, restaurar todos os comandos do m√≥dulo para sua integridade e seguran√ßa.  Ainda assim, o JavaScript n√£o √© Pascal, por isso, existem alguns recursos aqui. <br><br><h3>  A ideia em si </h3><br>  O projeto possui uma estrutura muito simples de tr√™s arquivos: <br><br><ul><li>  <b>crt.js</b> - arquivo com fun√ß√µes a serem conectadas ao arquivo html </li><li>  <b>index.html</b> - arquivo - a base que deve ser aberta no navegador </li><li>  <b>user.js</b> - um arquivo vazio no qual o programador deve escrever seu c√≥digo </li></ul><br>  Primeiro, vou nomear as equipes atualmente implementadas e depois mostrarei como elas funcionam. <br><br>  Os comandos implementados: <br><br><ul><li>  <b>gotoxy (x, y)</b> - move o cursor para as coordenadas </li><li>  <b>write (str)</b> - exibe uma string na tela </li><li>  <b>clrscr ()</b> - limpa a tela com um fundo pr√©-selecionado e move o cursor para as coordenadas 1,1 </li><li>  <b>textcolor (int)</b> - altera a cor do texto </li><li>  <b>textbackground (int)</b> - altera a cor do plano de fundo </li><li>  <b>som (fr, 1000)</b> - reproduz som com uma frequ√™ncia de fr e uma dura√ß√£o de 1 segundo </li></ul><br>  Vamos mostrar um exemplo do "m√≥dulo": <br><br>  C√≥digo: <br><br><img src="https://habrastorage.org/webt/wy/sq/_b/wysq_bhpgj0xgf4n2poik6sz5as.png" alt="imagem"><br><br>  Resultado: <br><br><img src="https://habrastorage.org/webt/f5/k4/va/f5k4va4q42wu6sopkl1-zo7ihjy.png" alt="imagem"><br><br>  Pode parecer que as letras est√£o separadas uma da outra.  √â sim.  O fato √© que aqui o conte√∫do da p√°gina √© dividido em partes por divs.  Vamos lembrar o tamanho da janela do DOS (80x25).  Ent√£o, quantas divs existem?  Isso mesmo, 2000. Cada um deles √© do mesmo tamanho.  Em geral, quando voc√™ inicia uma p√°gina, a seguinte fun√ß√£o √© executada automaticamente: <br><br><img src="https://habrastorage.org/webt/kl/bg/ne/klbgneghn5wypaqndgk4uzi-kda.png" alt="imagem"><br><br>  Postei esse trabalho especificamente em JS.  Eu queria que o arquivo html estivesse limpo e claro. <br><br><img src="https://habrastorage.org/webt/2_/lg/kp/2_lgkpnwnfahl5iyhjzwrl5qkg4.png" alt="imagem"><br><br>  Sim, devido a esse esquema, h√° um efeito: quando inicio a p√°gina em um PC fraco, acho que apenas o carregamento ocorrer√° por 4-5 segundos, porque o ciclo √© bastante complicado.  Eu n√£o vejo o ponto de comentar em cada linha, as principais a√ß√µes da foto s√£o explicadas.  Cada vez que geramos uma div com certos ID e par√¢metros e a adicionamos ao corpo.  Cada div cont√©m <b>apenas um caractere</b> , como era por analogia no DOS (uma c√©lula - um caractere). <br><br>  O trabalho com coordenadas e cores baseia-se nestas vari√°veis: <br><br><img src="https://habrastorage.org/webt/9p/tt/i1/9ptti1c4sxppjds3nxkog-masie.png" alt="imagem"><br><br>  Os <b>comandos gotoxy (x, y), textcolor (int), textbackground (int)</b> simplesmente alteram o conte√∫do das vari√°veis ‚Äã‚Äãxnow, ynow, color, bgcolor. <br><br>  Com flores, existem pontos interessantes.  No DOS, como sabemos, era poss√≠vel escolher uma cor de um conjunto em que havia apenas 16 cores.  Em Pascal, voc√™ pode acessar a cor usando o n√∫mero (0-15).  Al√©m disso, no DOS, o plano de fundo foi selecionado apenas entre as oito primeiras cores e o texto entre as 16. No Windows, no PascalABC.NET, quando o m√≥dulo est√° conectado, o plano de fundo pode ser alterado de todas as 16 cores.  Talvez nem todos tenham entendido o que eu queria transmitir agora, mas vamos explicar com um exemplo: <br><br><img src="https://habrastorage.org/webt/nu/cw/6v/nucw6vpmuqfohvykokpxgoepthu.png" alt="imagem"><br><br>  Todas as cores usadas no console est√£o listadas aqui.  Se tentarmos alterar o plano de fundo no DOS para verde claro (10), o plano de fundo ficar√° verde (2), enquanto a fonte se tornar√° a cor que solicitamos.  Por alguma raz√£o, a capacidade de alterar o plano de fundo no DOS (Free Pascal) √© limitada a oito cores. <br><br>  E agora sobre o comando clrscr, que limpou a tela com uma cor espec√≠fica.  Em JS, eu implementei assim: <br><br><img src="https://habrastorage.org/webt/ua/tb/fj/uatbfjipqcspm1vl68wgmhxiytc.png" alt="imagem"><br><br>  N√£o h√° nada complicado aqui.  Percorremos todas as divs, onde em cada conte√∫do o deixamos vazio (j√° que os caracteres do DOS s√£o apagados) e alteramos o plano de fundo para a cor selecionada previamente pelo comando textbackground.  E, √© claro, n√£o se esque√ßa de retornar o cursor para a posi√ß√£o 1.1 (no canto superior esquerdo da janela). <br><br>  O mais interessante √© a sa√≠da da string com o comando <b>write</b> .  Sim, lembro que ainda h√° escrita, mas achei que um comando seria suficiente, pois nessa situa√ß√£o n√£o estar√≠amos interessados ‚Äã‚Äãem mover o cursor para uma nova linha. <br><br>  Implementa√ß√£o: <br><br><img src="https://habrastorage.org/webt/xj/c3/wy/xjc3wyi72fuarpj8unmj3fx_3-k.png" alt="imagem"><br><br>  Aqui era necess√°rio proteger o navegador contra erros, caso a linha do usu√°rio fosse al√©m das bordas da janela (e n√£o h√° divs l√°!).  Portanto, foi decidido fazer um loop com quebra de prote√ß√£o. <br><br>  Cada letra deve ocupar a c√©lula totalmente alocada, para que o tamanho da fonte seja governado pelo tamanho da div.  Al√©m disso, n√£o esque√ßa que o plano de fundo atr√°s das letras deve mudar para o que foi definido pelo comando textbackground. <br><br>  E, finalmente, a √∫ltima fun√ß√£o √© o som.  Infelizmente, aqui tive que mudar o esquema de trabalho da equipe, pois √© dif√≠cil implementar a cadeia de som-atraso-som.  A prop√≥sito, ainda n√£o consegui implementar o atraso, n√£o h√° id√©ias, pois setTimeout n√£o √© adequado aqui. <br><br>  Lembramos que, para emitir, por exemplo, som com uma frequ√™ncia de 200 Hz e uma dura√ß√£o de 1 segundo, voc√™ precisa escrever o c√≥digo: <br><br><pre><code class="plaintext hljs">sound(200); delay(1000); nosound;</code> </pre> <br>  Em JS, eu tive que fazer isso: <br><br><img src="https://habrastorage.org/webt/jd/lw/jc/jdlwjc-mogc_ofeoyu4ff1u7gp0.png" alt="imagem"><br><br>  Mas ent√£o funciona!  Implementa√ß√£o: <br><br><img src="https://habrastorage.org/webt/wx/sx/zf/wxsxzfduayyubqpl9oi1uglisha.png" alt="imagem"><br><br>  Eu nunca usei uma fun√ß√£o t√£o espec√≠fica em minha atividade.  Ela teve que espiar na documenta√ß√£o.  Se algu√©m verificar o trabalho, tenha cuidado, pois os ouvidos altos podem doer. <br><br>  √â verdade que, ao usar esta fun√ß√£o, o Chrome, por raz√µes √≥bvias, come√ßa a jurar: <br><br><img src="https://habrastorage.org/webt/ot/ft/y6/otfty6yghgvgsaaucicrukuw99m.png" alt="imagem"><br><br>  Tentei resolver o problema com o setTimeout, no entanto, isso nem sempre funciona. <br><br>  Mas se voc√™ clicar rapidamente na p√°gina durante o carregamento, o som ser√° reproduzido, mas essa √© uma hist√≥ria completamente diferente. <br><br><h3>  Conclus√£o </h3><br>  Mesmo ap√≥s o layout ativo dos sites, quero tentar escrever algo incomum, mesmo que n√£o tenha benef√≠cios pr√°ticos.  O Pascal com seu m√≥dulo CRT realmente teve um efeito sobre mim na √©poca, o que me incentivou a aprender ainda mais as linguagens de programa√ß√£o.  Ou talvez voc√™ devesse escrever algo no estilo ASCII? <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><b>Por precau√ß√£o, postou no GitHub</b></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt438690/">https://habr.com/ru/post/pt438690/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt438674/index.html">"Rostec" come√ßou a vender telefone comercial "Cruise-K" por 85 000 rublos</a></li>
<li><a href="../pt438676/index.html">Plug-in do webinar 3CX para o seu site WordPress</a></li>
<li><a href="../pt438678/index.html">Os aplicativos do Google Play com milh√µes de downloads roubaram fotos de usu√°rios e pornografia anunciada</a></li>
<li><a href="../pt438682/index.html">Jubileu lan√ßa astron√°utica iraniana</a></li>
<li><a href="../pt438688/index.html">Barramento PCIe 5.0 pronto para comissionamento</a></li>
<li><a href="../pt438692/index.html">Disco voador inercial. Empurre tudo</a></li>
<li><a href="../pt438694/index.html">Como o processo de suporte do site mudou nos √∫ltimos vinte anos</a></li>
<li><a href="../pt438696/index.html">Dispositivo compilador r√°pido. Parte 3</a></li>
<li><a href="../pt438698/index.html">Sistema de trag√©diad</a></li>
<li><a href="../pt438700/index.html">Mapa de acidentes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>