<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ๏ธ ๐๏ธ ๐ฐ๐ฟ ุงูุฏุฑุฏุดุฉ ุงูููุฒุนุฉ ุนูู Node.JS ู Redis ๐ ๐ ๐ฃ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุณุคุงู / ุฅุฌุงุจุฉ ุตุบูุฑุฉ: 


 ููู ูุฐุงุ ุงูุฃุดุฎุงุต ุงูุฐูู ูุฏููู ุฎุจุฑุฉ ุถุฆููุฉ ุฃู ูุนุฏููุฉ ูู ุงูุฃูุธูุฉ ุงูููุฒุนุฉ ุ ูุงูุฐูู ููุชููู ุจุฑุคูุฉ ููููุฉ ุจูุงุฆูุง ุ ููุง ูู ุงูุฃููุงุท ูุงูุญู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุฏุฑุฏุดุฉ ุงูููุฒุนุฉ ุนูู Node.JS ู Redis</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440546/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://cs4.pikabu.ru/post_img/2015/10/04/5/1443945163_2102700146.jpg" alt="ูุงููุชูุฌุฉ ูู ุตูุฑุฉ ูุฒุญุฉ ูุบุณู &quot;ุญูุงูุฉ ุงูุจุฑูุฏ&quot;"></p><br><p style=";text-align:right;direction:rtl">  ุณุคุงู / ุฅุฌุงุจุฉ ุตุบูุฑุฉ: </p><br><p style=";text-align:right;direction:rtl"> <em>ููู ูุฐุงุ</em>  ุงูุฃุดุฎุงุต ุงูุฐูู ูุฏููู ุฎุจุฑุฉ ุถุฆููุฉ ุฃู ูุนุฏููุฉ ูู ุงูุฃูุธูุฉ ุงูููุฒุนุฉ ุ ูุงูุฐูู ููุชููู ุจุฑุคูุฉ ููููุฉ ุจูุงุฆูุง ุ ููุง ูู ุงูุฃููุงุท ูุงูุญููู ุงูููุฌูุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  <em>ููุงุฐุง ูุฐุงุ</em>  ุฃุตุจุญ ููุณู ููุชูุง ูุงุฐุง ูููู.  ููุช ุจุฌูุน ุงููุนูููุงุช ูู ูุตุงุฏุฑ ูุฎุชููุฉ ุ ูุฑุฑุช ุฃู ุฃูุดุฑูุง ูู ุตูุฑุฉ ูุฑูุฒุฉ ุ ูุฃููู ูู ููุช ูู ุงูุฃููุงุช ุฃุฑุบุจ ูู ุฑุคูุฉ ุนูู ููุงุซู.  ูู ุงููุงูุน ุ ูุฐุง ูู ุจูุงู ูุตู ูู ุฑูู ุจูุฏู ูุงูุชูููุฑ ุงูุดุฎุตู.  ุฃูุถุง ุ ุณูููู ููุงู ุจุงูุชุฃููุฏ ุงูุนุฏูุฏ ูู ุงูุชุตุญูุญุงุช ูู ุงูุชุนูููุงุช ูู ุงูุฃุดุฎุงุต ุฐูู ุงููุนุฑูุฉ ุ ููุฐุง ุฌุฒุฆููุง ุงูุบุฑุถ ูู ูุชุงุจุฉ ูู ูุฐุง ูู ุดูู ููุงู. </p><br><h2 id="postanovka-zadachi" style=";text-align:right;direction:rtl">  ุจูุงู ุงููุดููุฉ </h2><br><p style=";text-align:right;direction:rtl">  ููููุฉ ุฅุฌุฑุงุก ูุญุงุฏุซุฉุ  ูุฌุจ ุฃู ุชููู ูุฐู ูููุฉ ุชุงููุฉ ุ ูุฑุจูุง ูููู ูู ุจููููุฏุฑ ูุฏ ุฑุฃู ููุณู ุจููุณู ุ ุชูุงููุง ูุซู ูุทูุฑู ุงูุฃูุนุงุจ ูุตูุนูู ูุนุจุฉ ุงูุชุชุฑูุณ / ุงูุซุนุงุจูู ุ ููุง ุฅูู ุฐูู. ููุฏ ุชูููุช ูุฐุง ุงูุฃูุฑ ุ ูููู ูุฌุนูู ุฃูุซุฑ ุชุดููููุง ุ ูุฌุจ ุฃู ูููู ูุณุชุนุฏูุง ููุงุณุชููุงุก ุนูู ุงูุนุงูู ุ ุจุญูุซ ููููู ุชุญูู ูุฆุงุช ุงููููุงุฑุงุช ุงููุณุชุฎุฏููู ุงููุดุทูู ูุจุดูู ุนุงู ูุงู ุจุงุฑุฏุง ุจุดูู ูุง ูุตุฏู.  ุชุฃุชู ุงูุญุงุฌุฉ ุงููุงุถุญุฉ ุฅูู ุจููุฉ ููุฒุนุฉ ูู ูุฐุง ุ ูุฃูู ูู ุบูุฑ ุงููุงูุนู ุฃู ุชุชููุฑ ูุฏูู ุงููุฏุฑุฉ ุงูุญุงููุฉ ูุชูุงุณุจ ุฌููุน ุงูุนููุงุก ุงููุชุฎูููู ุนูู ุฌูุงุฒ ูุงุญุฏ.  ุจุฏูุงู ูู ูุฌุฑุฏ ุงูุฌููุณ ูุงูุงูุชุธุงุฑ ูุธููุฑ ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงููููููุฉ ุ ุจุฏุฃุช ุฃูุง ุจุญุฒู ูู ุฏุฑุงุณุฉ ููุถูุน ุงูุฃูุธูุฉ ุงูููุฒุนุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุงุณุชุฌุงุจุฉ ุณุฑูุนุฉ ูููุฉ ููุบุงูุฉ ุ ูู ุงูููุช ุงูุญูููู ุณูุฆุฉ ุงูุณูุนุฉ ุ ุฅููุง <strong>ุฏุฑุฏุดุฉ</strong> !  ูุง ุชุณููู ุงูุจุฑูุฏ ุญูุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูช <em>ููุชุฉ ุนุดูุงุฆูุฉ ุญูู ุงููุดุงุฑูุฉ ุงูุฑูุณูุฉ</em> ูช </p><br><p style=";text-align:right;direction:rtl">  ุณูู ูุณุชุฎุฏู Node.JS ุ ููู ูุซุงูู ููููุงุฐุฌ ุงูุฃูููุฉ.  ูููุขุฎุฐ ุ ุฎุฐ Socket.IO.  ุงูุชุจ ุนูู TypeScript. </p><br><p style=";text-align:right;direction:rtl">  ููุงุฐุง ูุฑูุฏุ </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุญูุซ ูููู ูููุณุชุฎุฏููู ุฅุฑุณุงู ุฑุณุงุฆู ุฅูู ุจุนุถูู ุงูุจุนุถ </li><li style=";text-align:right;direction:rtl">  ูุนุฑูุฉ ูู ูู ุนูู ุงูุงูุชุฑูุช / ุญุงููุง </li></ol><br><p style=";text-align:right;direction:rtl">  ููู ูุฑูุฏูุง: </p><a name="habracut"></a><br><h2 id="singl-server" style=";text-align:right;direction:rtl">  ุฎุงุฏู ูุงุญุฏ </h2><br><p style=";text-align:right;direction:rtl">  ูุง ููุฌุฏ ุดูุก ููููู ุฎุงุตุฉ ุ ุงูุญู ูู ุงูุฑูุฒ.  ูู ุจุชุนุฑูู ูุงุฌูุฉ ุงูุฑุณุงูุฉ: </p><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">interface Message{ roomId: string,//    message: string,//    }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูู ุงูุฎุงุฏู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">io.on('connection', sock=&gt;{ //    sock.on('join', (roomId:number)=&gt; sock.join(roomId)) //    //         sock.on('message', (data:Message)=&gt; io.to(data.roomId).emit('message', data)) })</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูู ุงูุนููู ุ ุดูุก ูุซู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">sock.on('connect', ()=&gt; { const roomId = 'some room' //      sock.on('message', (data:Message)=&gt; console.log(`Message ${data.message} from ${data.roomId}`)) //   sock.emit('join', roomId) //    sock.emit('message', &lt;Message&gt;{roomId: roomId, message: 'Halo!'}) })</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ุงูุนูู ูุน ุญุงูุฉ ุนุจุฑ ุงูุฅูุชุฑูุช ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">io.on('connection', sock=&gt;{ //         // ,        - //      sock.on('auth', (uid:string)=&gt; sock.join(uid)) //,     , //          //   sock.on('isOnline', (uid:string, resp)=&gt; resp(io.sockets.clients(uid).length &gt; 0)) })</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนูู ุงูุนููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">sock.on('connect', ()=&gt; { const uid = 'im uid, rly' //  sock.emit('auth', uid) //     sock.emit('isOnline', uid, (isOnline:boolean)=&gt; console.log(`User online status is ${isOnline}`)) })</code> </pre> <br><blockquote style=";text-align:right;direction:rtl">  ููุงุญุธุฉ: ูู ูุชู ุชุดุบูู ุงูุฑูุฒ ุ ุฃูุชุจ ูู ุงูุฐุงูุฑุฉ ููุท ุนูู ุณุจูู ุงููุซุงู </blockquote><p style=";text-align:right;direction:rtl">  ุชูุงููุง ูุซู ุงูุญุทุจ ุ ูููู ุจุชุฏููุฑ ุงูุชูููุถ ุงูุญูููู ููุทูุจุฉ ูุฅุฏุงุฑุฉ ุงูุบุฑู (ุณุฌู ุงูุฑุณุงุฆู ุ ุฅุถุงูุฉ / ุฅุฒุงูุฉ ุงููุดุงุฑููู) ูุงูุฑุจุญ. </p><br><p style=";text-align:right;direction:rtl">  ููู!  ููููุง ุณูุชููู ุงูุณูุทุฑุฉ ุนูู ุงูุณูุงู ุงูุนุงููู ุ ููุง ูุนูู ุฃูู ููุณ ููุช ุงูุชููู ุ ูุญู ูุณูุฑ ุจุณุฑุนุฉ: </p><br><h2 id="nodejs-klaster" style=";text-align:right;direction:rtl">  Node.JS ุงููุชูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุฃูุซูุฉ ุนูู ุงุณุชุฎุฏุงู Socket.IO ูู ุงูุนุฏูุฏ ูู ุงูุนูุฏ ููุฌูุฏุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนูู ุงููููุน ุงูุฑุณูู</a> .  ุจูุง ูู ุฐูู ููุงู ุฃูุถูุง ูุฌููุนุฉ Node.JS ุฃุตููุฉ ุ ูุงูุชู ุจุฏุง ูู ุฃููุง ุบูุฑ ูุงุจูุฉ ููุชุทุจูู ููููุชู: ุฅููุง ุชุชูุญ ููุง ุชูุณูุน ูุทุงู ุชุทุจูููุง ุนุจุฑ ุงูุฌูุงุฒ ุ ูููู ููุณ ุฎุงุฑุฌ ูุทุงูู ุ ูุฐูู ูุญู ููุชูุฏู ุจุงูุชุฃููุฏ.  ูุญุชุงุฌ ุฃุฎูุฑูุง ุฅูู ุชุฌุงูุฒ ุญุฏูุฏ ูุทุนุฉ ูุงุญุฏุฉ ูู ุงูุญุฏูุฏ! </p><br><h2 id="raspredelyay-i-velosiped" style=";text-align:right;direction:rtl">  ุชูุฒูุน ูุงูุฏุฑุงุฌุฉ </h2><br><p style=";text-align:right;direction:rtl">  ููู ููุนู ุฐููุ  ูู ุงููุงุถุญ ุฃูู ุชุญุชุงุฌ ุฅูู ุชูุตูู ูุซููุงุชูุง ุจุทุฑููุฉ ูุง ุ ูุงูุชู ุชู ุฅุทูุงููุง ููุณ ููุท ูู ุงูููุฒู ูู ุงูุทุงุจู ุงูุณููู ุ ูููู ุฃูุถูุง ูู ุงูุทุงุจู ุงูุณููู ุงููุฌุงูุฑ.  ูุง ูุชุจุงุฏุฑ ุฅูู ุงูุฐูู ุฃููุงู: ูุญู ูุตูุน ููุนูุง ูู ุงูุงุฑุชุจุงุท ุงููุณูุท ุงูุฐู ุณูููู ุจูุซุงุจุฉ ุญุงููุฉ ุจูู ุฌููุน ููุงุทูุง: </p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1549140775997.png" alt="1549140775997"></p><br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ุชุฑูุฏ ุงูุนูุฏุฉ ุฅุฑุณุงู ุฑุณุงูุฉ ุฅูู ุฃุฎุฑู ุ ูุฅููุง ุชูุฏู ุทูุจูุง ุฅูู Bus ุ ูุจุงููุนู ุ ุชููู ุจุฅุนุงุฏุฉ ุชูุฌูููุง ุฅูู ุญูุซ ุชุฏุนู ุงูุญุงุฌุฉ ุ ููู ุดูุก ุจุณูุท.  ุดุจูุชูุง ุฌุงูุฒุฉ! </p><br><p style=";text-align:right;direction:rtl">  <strong>FIN.</strong> </p><br><p style=";text-align:right;direction:rtl">  ... ููููุง ููุณุช ุจูุฐู ุงูุจุณุงุทุฉุ) </p><br><p style=";text-align:right;direction:rtl">  ูุน ูุฐุง ุงูููุฌ ุ ููุงุฌู ุฃุฏุงุก ูุฐุง ุงูุฑุงุจุท ุงููุณูุท ุ ูููุฏ ูู ุงููุงูุน ุงูุงุชุตุงู ูุจุงุดุฑุฉ ุจุงูุนูุฏ ุงููุงุฒูุฉ ุ ูุฃู ูุง ูููู ุฃู ูููู ุฃุณุฑุน ูู ุงูุงุชุตุงู ุงููุจุงุดุฑุ  ูุฐูู ุฏุนููุง ูุชุญุฑู ูู ูุฐุง ุงูุงุชุฌุงู! </p><br><p style=";text-align:right;direction:rtl">  ูุง ูู ุงููุทููุจ ุฃููุงุ  ูู ุงููุงูุน ุ ุฅุถูุงุก ุงูุดุฑุนูุฉ ุนูู ูุซูู ูุงุญุฏ ุฅูู ุขุฎุฑ.  ููู ููู ูุชุนูู ุงูุฃูู ุนู ูุฌูุฏ ุงูุซุงููุ  ููููุง ูุฑูุฏ ุงูุญุตูู ุนูู ุนุฏุฏ ูุง ุญุตุฑ ูู ูููู ุ ุฑูุน / ุฅุฒุงูุฉ ุชุนุณูู!  ูุญุชุงุฌ ุฅูู ุฎุงุฏู ุฑุฆูุณู ูุนุฑูู ุฃู ุนููุงูู ูุนุฑูู ุ ููุชุตู ุงูุฌููุน ุจู ุ ููุนุฑู ุฃูู ูุนุฑู ุฌููุน ุงูุนูุฏ ุงูููุฌูุฏุฉ ูู ุงูุดุจูุฉ ุ ููุฑุฌู ูุดุงุฑูุฉ ูุฐู ุงููุนูููุงุช ูุน ุงูุฌููุน. </p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1549048945334.png" alt="1549048945334"></p><br><p style=";text-align:right;direction:rtl">  ุชุฑุชูุน ุงูุนูุฏุฉ ุ ูุชุญูู ูููุนูู ุนู ุงุณุชููุงุธูุง ุ ูุชุนุทู ูุงุฆูุฉ ุจุงูุนูุฏ ุงููุดุทุฉ ุงูุฃุฎุฑู ุ ููุชุตู ุจูุง ุ ููุฐุง ูู ุดูุก ุ ุงูุดุจูุฉ ุฌุงูุฒุฉ.  ูุฏ ูููู ุงูุณูุฏ ููุตููุง ุฃู ุดูุกูุง ูู ูุฐุง ุงููุจูู ุ ูููู ุจูุง ุฃููุง ูุฑูุจ ุงูุฏุฑุงุฌุงุช ุ ููุฌุจ ุฃู ูููู ุงููุนูู ุนุตุงูููุง. </p><br><p style=";text-align:right;direction:rtl">  ุนุธูู ุ ุงูุขู ูุฏููุง ุณูุงูููุช ุงูุฎุงุตุฉ ุจูุง!  ููู ุงูุชูููุฐ ุงูุญุงูู ููุฏุฑุฏุดุฉ ููู ูู ูุนุฏ ููุงุณุจูุง.  ุฏุนูุง ุจุงููุนู ูุชูุตู ุฅูู ุงููุชุทูุจุงุช: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุฑุณู ุงููุณุชุฎุฏู ุฑุณุงูุฉ ุ ูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ููุธูุฉ ุงูุตุญุฉ ุงูุนุงูููุฉ ุงูุชู ูุฑุณููุง ุฅูููุง ุ ุฃู ุฃู ูููู ููุง ูุตูู ุฅูู ุงููุดุงุฑููู ูู ุงูุบุฑูุฉ. </li><li style=";text-align:right;direction:rtl">  ุนูุฏูุง ุงุณุชูุจููุง ุงููุดุงุฑููู ุ ูุฌุจ ุฃู ูุฑุณู ููู ุงูุฑุณุงุฆู. </li><li style=";text-align:right;direction:rtl">  ูุญู ุจุญุงุฌุฉ ุฅูู ูุนุฑูุฉ ุฃู ูุณุชุฎุฏู ูุชุตู ุงูุขู. </li><li style=";text-align:right;direction:rtl">  ููุฑุงุญุฉ - ุงููุญ ุงููุณุชุฎุฏููู ุงููุฑุตุฉ ููุงุดุชุฑุงู ูู ุญุงูุฉ ุงููุณุชุฎุฏููู ุงูุขุฎุฑูู ุนุจุฑ ุงูุฅูุชุฑูุช ุ ุญุชู ูุชุนุฑููุง ูู ุงูููุช ุงููุนูู ุนูู ุงูุชุบููุฑ </li></ol><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูุชุนุงูู ูุน ุงููุณุชุฎุฏููู.  ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุฌุนู ุงููุนูู ูุนุฑู ุงูุนูุฏุฉ ุงููุชุตูุฉ ุจุงูุนูุฏุฉ.  ุงููุถุน ูุงูุชุงูู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1549237952673.png" alt="1549237952673"></p><br><p style=";text-align:right;direction:rtl">  ุงุซููู ูู ุงููุณุชุฎุฏููู ูุชุตููู ุจุนูุฏ ูุฎุชููุฉ.  ุงูุณูุฏ ูุนุฑู ูุฐุง ุ ุงูุนูุฏ ุชุนุฑู ูุง ูุนุฑู ุงูุณูุฏ.  ุนูุฏูุง ูููู UserB ุจุชุณุฌูู ุงูุฏุฎูู ุ ูููู Node2 ุจุฅุนูุงู Master ุ ูุงูุฐู "ูุชุฐูุฑ" ุฃู UserB ูุชุตู ุจู Node2.  ุนูุฏูุง ูุฑูุฏ UserA ุฅุฑุณุงู ุฑุณุงูุฉ UserB ุ ุชุญุตู ุนูู ุงูุตูุฑุฉ ุงูุชุงููุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1549140491881.png" alt="1549140491881"></p><br><p style=";text-align:right;direction:rtl">  ูู ุญูุซ ุงููุจุฏุฃ ุ ูู ุดูุก ูุนูู ุ ููููู ุฃุฑุบุจ ูู ุชุฌูุจ ุฌููุฉ ุฅุถุงููุฉ ูู ุดูู ุงุณุชุฌูุงุจ ุงูุณูุฏ ุ ุณูููู ูู ุงูุฃูุถู ุงูุชุตุงุฏููุง ุงูุงุชุตุงู ูุจุงุดุฑุฉ ุจุงูุนูุฏุฉ ุงูุตุญูุญุฉ ูุจุงุดุฑุฉู ุ ูุฃู ูุฐุง ูู ุงูุณุจุจ ูุฑุงุก ุจุฏุก ูู ุดูุก.  ูููู ุงูููุงู ุจุฐูู ุฅุฐุง ูุงููุง ุจุฅุฎุจุงุฑ ุงูุฌููุน ุญูู ุงููุณุชุฎุฏููู ุงููุชุตููู ุจูู ุ ููุตุจุญ ูู ูููู ูุธูุฑูุง ููุชููุงู ุฐุงุชููุง ูู ุงููุนุงูุฌ ุ ููุตุจุญ ุงููุนุงูุฌ ููุณู ุบูุฑ ุถุฑูุฑู ุ ูุฃู ูุงุฆูุฉ ุงููุณุจุฉ "User =&gt; Node" ููุฑุฑุฉ ููุฌููุน.  ูู ุจุฏุงูุฉ ุงูุนูุฏุฉ ุ ูููู ุงูุงุชุตุงู ุจุฃู ูุงุญุฏุฉ ููุฏ ุงูุชุดุบูู ุจุงููุนู ุ ูุณุญุจ ูุงุฆูุชูุง ุฅูู ููุณู ูููููุง ุ ููุง ุฃููุง ุฌุงูุฒุฉ ูููุนุฑูุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1549139768940.png" alt="1549139768940"></p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1549139882747.png" alt="1549139882747"></p><br><p style=";text-align:right;direction:rtl">  ูููู ูุน ุงูููุงูุถุฉ ุ ูุญุตู ุนูู ุงุฒุฏูุงุฌูุฉ ูู ุงููุงุฆูุฉ ุ ูุงูุชู ุนูู ุงูุฑุบู ูู ุฃููุง ุชูุซู ูุณุจุฉ "ูุนุฑู ุงููุณุชุฎุฏู -&gt; [ุงุชุตุงูุงุช ุงููุถูู]" ุ ููู ูุน ูุฌูุฏ ุนุฏุฏ ูุงูู ูู ุงููุณุชุฎุฏููู ุ ุณุชููู ูุจูุฑุฉ ููุบุงูุฉ ูู ุงูุฐุงูุฑุฉ.  ูุจุดูู ุนุงู ุ ูู ุจุชูุทูุนูุง ุจููุณู - ุฅููุง ุชููุญ ุจูุถูุญ ูู ุตูุงุนุฉ ุงูุฏุฑุงุฌุงุช.  ููุฒูุฏ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูุงููุฒูุฏ ูู ุงูุฃุฎุทุงุก ุงููุญุชููุฉ.  ุฑุจูุง ูููู ุจุชุฌููุฏ ูุฐุง ุงูุฎูุงุฑ ููููู ูุธุฑุฉ ุนูู ูุง ูู ุฌุงูุฒ ุจุงููุนู: </p><br><h2 id="brokery-soobscheniy" style=";text-align:right;direction:rtl">  ูุณุทุงุก ุงูุฑุณุงุฆู </h2><br><p style=";text-align:right;direction:rtl">  ุงูููุงู ุงูุฐู ูููุฐ "Bus" ููุณู ุ "ุงูุฑุงุจุท ุงููุณูุท" ุงููุฐููุฑ ุฃุนูุงู.  ูููุชูุง ูู ูุชููู ูุชุณููู ุงูุฑุณุงุฆู.  ูููููุง ุ ููุณุชุฎุฏููู ุ ุงูุงุดุชุฑุงู ูุนูู ูุฅุฑุณุงู ุฑุณุงุฆููุง ุงูุฎุงุตุฉ.  ูู ุดูุก ุจุณูุท. </p><br><p style=";text-align:right;direction:rtl">  ููุงู RabbitMQ ูุซุจุช ูุงููุง: ุฅููู ููุนููู ููุท ูุง ูููููู ุจุชุณููู ุงูุฑุณุงุฆู - ูุฐุง ูู ุบุฑุถูู ุ ููุชุธุฉ ุจูู ุงููุธุงุฆู ุงููุงุฒูุฉ ููุนูู.  ูู ุนุงูููู ุ ูุฌุจ ุชุณููู ุฑุณุงูุฉ ุจุบุถ ุงููุธุฑ ุนู ูุงุฐุง. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุช ููุณู ุ ููุงู Redis ูุญุงูุงุชูุง / sub - ููุณ ุงูุฑุฌุงู ุงููุฐููุฑูู ุฃุนูุงู ุ ูููููู ุฃูุซุฑ ุชุดููุง: ููู ุชุชููู ุฑุณุงูุฉ ุบุจูุฉ ูุชุณูููุง ุฅูู ุงููุดุชุฑู ุ ุฏูู ุฃู ููุงุฆู ุงูุชุธุงุฑ ูุบูุฑูุง ูู ุงููููุงุช ุงูุนุงูุฉ.  ุฅูู ูุง ููุชู ูุทูููุง ุจุงูุฑุณุงุฆู ููุณูุง ุ ุณูู ูุฎุชูู ุ ุฅุฐุง ุชููู ุงููุดุชุฑู - ุณูุทุฑุฏูุง ููุถุฑุจ ูุนุจุฉ ุฌุฏูุฏุฉ ุ ููุง ูู ูุงู ูุฑูู ูุนุจุฉ ุงูุจููุฑ ุงูุณุงุฎูุฉ ูู ูุฏูู ูุชุฑูุฏ ุงูุชุฎูุต ูููุง ุจุดูู ุฃุณุฑุน.  ุฃูุถูุง ุ ุฅุฐุง ุณูุท ูุฌุฃุฉ - ูุณุชุบุฑู ุฌููุน ุงูุฑุณุงุฆู ูุนู ุฃูุถูุง.  ูุจุนุจุงุฑุฉ ุฃุฎุฑู ุ ูุง ููุฌุฏ ุฃู ุดู ูู ุฃู ุถูุงู ุงูุชุณููู. </p><br><p style=";text-align:right;direction:rtl">  ... ููุฐุง ูู ูุง ุชุญุชุงุฌู! </p><br><p style=";text-align:right;direction:rtl">  ุญุณูุง ุ ุญูุง ุ ูุญู ููุท ุงูุฏุฑุฏุดุฉ.  ููุณ ููุงู ููุน ูู ุฎุฏูุฉ ุงููุงู ุงูุญุฑุฌุฉ ุฃู ูุฑูุฒ ูุฑุงูุจุฉ ุงูุฑุญูุงุช ุงููุถุงุฆูุฉ ุ ูููู ... ูุฌุฑุฏ ุฏุฑุฏุดุฉ.  ุฅู ุงููุฎุงุทุฑุฉ ุงููุชูุซูุฉ ูู ุนุฏู ุชููู Pete ุงูุดุฑุทูุฉ ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุณูุฉ ุฑุณุงูุฉ ูุงุญุฏุฉ ูู ุฃุตู ุฃูู - ูููู ุฅููุงููุง ุฅุฐุง ุญุตููุง ูู ุงูููุงุจู ุนูู ููู ูู ุงูุฅูุชุงุฌูุฉ ููู ููุณ ุงูููุงู ุนุฏุฏ ุงููุณุชุฎุฏููู ูู ููุณ ุงูููู ุ ุชู ุงุณุชุจุฏุงููู ุจูู ูุฌุฏ.  ุนูุงูุฉ ุนูู ุฐูู ุ ูู ุงูููุช ููุณู ุ ููููู ุงูุงุญุชูุงุธ ุจุณุฌู ููุฑุณุงุฆู ูู ููุน ูู ูุณุชูุฏุน ุงูุชุฎุฒูู ุงูุฏุงุฆู ุ ููุง ูุนูู ุฃู Petya ุณูุธู ูุฑู ุชูู ุงูุฑุณุงูุฉ ุงูุชู ูู ูุชู ุงูุฑุฏ ุนูููุง ุนู ุทุฑูู ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ / ุงูุชุทุจูู.  ููุฐุง ุงูุณุจุจ ุณูุฑูุฒ ุนูู Redis pub / sub ุ ุฃู ุจุงูุฃุญุฑู: ุงูุธุฑ ุฅูู ุงููุญูู ุงูููุฌูุฏ ูู SocketIO ุ ููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฐููุฑ ูู ุงูููุงูุฉ ูู ุงูููุชุจ.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููููุน</a> . </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐู ูุง ูุฐุงุ </p><br><h2 id="redis-adapter" style=";text-align:right;direction:rtl">  ูุญูู Redis </h2><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://github.com/socketio/socket.io-redis</a> </p><br><p style=";text-align:right;direction:rtl">  ุจูุณุงุนุฏุชูุง ุ ูุชุญูู ุชุทุจูู ุนุงุฏู ุนุจุฑ ุจุถุนุฉ ุฃุณุทุฑ ูุนุฏุฏ ุฃุฏูู ูู ุงูุฅููุงุกุงุช ุฅูู ุฏุฑุฏุดุฉ ููุฒุนุฉ ุญููููุฉ!  ููู ูููุ  <a href="">ุฅุฐุง ูุธุฑุช ูู ุงูุฏุงุฎู</a> - ุงุชุถุญ ุฃู ููุงู ููููุง ูุงุญุฏูุง ููุท ููู ูุตู ูุงุฆุฉ ุณุทุฑ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุญุงูุฉ ุนูุฏูุง ูุตุฏุฑ ุฑุณุงูุฉ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">io.emit("everyone", "hello")</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ุฏูุนู ุฅูู ุงููุฌู ุ ููุชู ูููู ุฅูู ุฌููุน ุงูุญุงูุงุช ุงูุฃุฎุฑู ูู ุงูุฏุฑุฏุดุฉ ุ ูุงูุชู ุจุฏูุฑูุง ุชุตุฏุฑูุง ูุญูููุง ุจุงููุนู ุนูู ูุขุฎุฐ </p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1549232309776.png" alt="1549232309776"></p><br><p style=";text-align:right;direction:rtl">  ุณูุชู ุชูุฒูุน ุงูุฑุณุงูุฉ ุนุจุฑ ุฌููุน ุงูุนูุฏ ุญุชู ูู ุฃุตุฏุฑูุงูุง ููุณุชุฎุฏู ูุนูู.  ุฃู ุฃู ูู ุนูุฏุฉ ุชูุจู ุฌููุน ุงูุฑุณุงุฆู ูุชููู ุจุงููุนู ูุง ุฅุฐุง ูุงูุช ุชุญุชุงุฌูุง. </p><br><p style=";text-align:right;direction:rtl">  ุฃูุถูุง ุ ููุงู ุชุทุจูู RPC ุจุณูุท (ุงุณุชุฏุนุงุก ุงูุฅุฌุฑุงุกุงุช ุนู ุจูุนุฏ) ุ ูุงูุฐู ูุง ูุณูุญ ููุท ุจุฅุฑุณุงู ูููู ุฃูุถูุง ุจุชููู ุงูุฅุฌุงุจุงุช.  ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุงูุชุญูู ูู ุงูููุงุจุณ ุนู ุจูุนุฏ ุ ูุซู "ูู ูู ูู ุงูุบุฑูุฉ ุงููุญุฏุฏุฉ" ุ ุฃู "ุทูุจ ูุฃุฎุฐ ุงูุชูุตูู ููุงูุถูุงู ุฅูู ุงูุบุฑูุฉ" ุ ุฅูุฎ. </p><br><p style=";text-align:right;direction:rtl">  ูุง ุงูุฐู ูููู ุงูููุงู ุจู ูุน ูุฐุงุ  ุนูู ุณุจูู ุงููุซุงู ุ ุงุณุชุฎุฏู ูุนุฑู ุงููุณุชุฎุฏู ูุงุณู ููุบุฑูุฉ (ูุนุฑู ุงููุณุชุฎุฏู == ูุนุฑู ุงูุบุฑูุฉ).  ุนูุฏ ุงูุชูููุถ ุ ูุชูุตูู ุงูููุจุณ ุจู ุ ูุนูุฏูุง ูุฑูุฏ ุฃู ูุฑุณู ุฑุณุงูุฉ ุฅูู ุงููุณุชุฎุฏู - ูุฌุฑุฏ ุฎูุฐุฉ ูู ุฐูู.  ุฃูุถูุง ุ ูููููุง ูุนุฑูุฉ ูุง ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุชุตููุง ุจุงูุฅูุชุฑูุช ุ ูุง ุนููู ุณูู ุงููุธุฑ ูู ูุฌูุฏ ูุขุฎุฐ ูู ุงูุบุฑูุฉ ุงููุญุฏุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุญูุซ ุงููุจุฏุฃ ุ ูููููุง ุงูุชููู ููุง ุ ูููู ููุง ูู ุงูุญุงู ุฏุงุฆููุง ุ ูุง ูููู ูุฐุง ุจุงููุณุจุฉ ููุง: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุนูู ุงูุฒุฌุงุฌุฉ ูู ุญุงูุฉ ูุฌู ูุงุญุฏุฉ </li><li style=";text-align:right;direction:rtl">  ุงูุชูุฑุงุฑ ุ ุฃูุฏ ุฃู ุชุชููู ุงูุนูุฏ ููุท ุงูุฑุณุงุฆู ุงูุชู ูุญุชุงุฌูููุง </li></ol><br><p style=";text-align:right;direction:rtl">  ุนูู ุญุณุงุจ ุงูููุฑุฉ ุงูุฃููู ุ ุงูุธุฑ ุฅูู ุดูุก ูุซู: </p><br><h2 id="redis-cluster" style=";text-align:right;direction:rtl">  ูุฌููุนุฉ Redis </h2><br><p style=";text-align:right;direction:rtl">  ูุฑุจุท ุงูุนุฏูุฏ ูู ุญุงูุงุช ุงููุฌู ุ ูุจุนุฏ ุฐูู ูุนูููู ููู.  ูููู ููู ููุนู ุฐููุ  ูุนู ุ ูุซู ูุฐุง: </p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1549233023980.png" alt="1549233023980"></p><br><p style=";text-align:right;direction:rtl">  ... ููุฑู ุฃู ุงูุฑุณุงูุฉ ููุฑุฑุฉ ูุฌููุน ุฃุนุถุงุก ุงููุฌููุนุฉ.  ููุฐุง ูุนูู ุฃูู ููุณ ุงูููุตูุฏ ููู ุฒูุงุฏุฉ ุงูุฅูุชุงุฌูุฉ ุ ูููู ูุฒูุงุฏุฉ ุงูููุซูููุฉ ุ ููู ุจุงูุชุฃููุฏ ุฌูุฏุฉ ูุถุฑูุฑูุฉ ุ ูููู ุจุงููุณุจุฉ ูุญุงูุชูุง ุ ูุง ูููุฉ ููุง ููุง ุชููุฐ ุงููููู ูู ุนูู ุงูุฒุฌุงุฌุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฃููุง ูุถูุนุฉ ุฃูุซุฑ ููููุงุฑุฏ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1549231953897.png" alt="1549231953897"></p><br><p style=";text-align:right;direction:rtl">  ุฃูุง ูุจุชุฏุฆ ุ ูุง ุฃุนุฑู ุงููุซูุฑ ุ ูุฃุญูุงููุง ูุฌุจ ุฃู ุฃุนูุฏ ุฅูู ุงูููุนุจ ุ ููู ูุง ุณููุนูู.  ูุง ุ ุฏุนูุง ูุชุฑู ุงููุฌู ุญุชู ูุง ููุฒูู ุนูู ุงูุฅุทูุงู ุ ููู ุนููู ุงูุชูููุฑ ูู ุดูุก ุจููุฏุณุฉ ูุนูุงุฑูุฉ ูุฃู ุงููููู ุงูุญุงูู ููุณ ุฌูุฏูุง. </p><br><h2 id="povorot-ne-tuda" style=";text-align:right;direction:rtl">  ุงููุจ ุงูุทุฑูู ุงูุฎุทุฃ </h2><br><p style=";text-align:right;direction:rtl">  ูุงุฐุง ูุญุชุงุฌุ  ุฒูุงุฏุฉ ุงูุฅูุชุงุฌูุฉ ุงูุฅุฌูุงููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุฏุนููุง ูุญุงูู ุฃู ููุฑุฒ ุจุบุจุงุก ูุซูู ุขุฎุฑ.  ุชุฎูู ุฃู socket.io-redis ููููู ุงูุงุชุตุงู ุจุงูุนุฏูุฏ ุ ุนูุฏ ุงูุถุบุท ุนูู ุงูุฑุณุงูุฉ ุ ูุฅูู ูุฎุชุงุฑ ุนุดูุงุฆููุง ุ ููุดุชุฑู ูู ูู ุดูุก.  ุงุชุถุญ ูุซู ูุฐุง: </p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1549239818663.png" alt="1549239818663"></p><br><p style=";text-align:right;direction:rtl">  ููููุง!  ุจุดูู ุนุงู ุ ุชู ุญู ุงููุดููุฉ ุ ููู ุชุนุฏ ุงููุฌู ุนูู ุงูุฒุฌุงุฌุฉ ุ ููููู ุชูุฑุฎ ุฃู ุนุฏุฏ ูู ุงููุณุฎ!  ููููุง ุฃุตุจุญุช ุงูุนูุฏ.  ูุนู ุ ูุนู ุ ูุง ุชุฒุงู ูุซููุงุช ุงูุฏุฑุฏุดุฉ ุชุณุชูุนุจ ุฌููุน ุงูุฑุณุงุฆู ุงูุชู ูู ุชูู ููุฌูุฉ ุฅูููุง. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุงูุนูุณ: ุงูุงุดุชุฑุงู ูู ูุงุญุฏุฉ ุนุดูุงุฆูุฉ ุ ููุง ูููู ูู ุงูุญูู ุนูู ุงูุนูุฏ ุ ูุฏูุน ูู ุดูุก: </p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1549239361416.png" alt="1549239361416"></p><br><p style=";text-align:right;direction:rtl">  ูุฑู ุฃููุง ุฃุตุจุญุช ูู ุงูุงุชุฌุงู ุงููุนุงูุณ: ุงูุนูุฏ ุชุดุนุฑ ุจุฃููุง ุฃูุซุฑ ูุฏูุกูุง ุ ููู ุงูุญูู ุนูู ูุซูู ุงููุฌู ุฒุงุฏ.  ูุฐุง ูู ุฃูุถุง ููุณุช ุฌูุฏุฉ.  ุชุญุชุงุฌ ุฅูู ุงูุฏุฑุงุฌุฉ ููููุง. </p><br><p style=";text-align:right;direction:rtl">  ูู ุฃุฌู ุถุฎ ูุธุงููุง ุ ุณูุชุฑู ุญุฒูุฉ socket.io-redis ุจููุฑุฏูุง ุ ุนูู ุงูุฑุบู ูู ุฃููุง ุจุงุฑุฏุฉ ุ ุฅูุง ุฃููุง ูุญุชุงุฌ ุฅูู ูุฒูุฏ ูู ุงูุญุฑูุฉ.  ูููุฐุง ุ ูููู ุจุชูุตูู ุงููุฌู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">//  : const pub = new RedisClient({host: 'localhost', port: 6379})//  const sub = new RedisClient({host: 'localhost', port: 6379})//   //    interface Message{ roomId: string,//    message: string,//    }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุจุฅุนุฏุงุฏ ูุธุงู ุงููุฑุงุณูุฉ ูุฏููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">//     sub.on('message', (channel:string, dataRaw:string)=&gt; { const data = &lt;Message&gt;JSON.parse(dataRaw) io.to(data.roomId).emit('message', data)) }) //   sub.subscribe("messagesChannel") //    sock.on('join', (roomId:number)=&gt; sock.join(roomId)) //   sock.on('message', (data:Message)=&gt; { //   pub.publish("messagesChannel", JSON.stringify(data)) })</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงูููุช ุงูุญุงูู ุ ูุจุฏู ุงูุฃูุฑ ููุง ูู ุงูุญุงู ูู socket.io-redis: ูุณุชูุน ุฅูู ุฌููุน ุงูุฑุณุงุฆู.  ุงูุขู ุณูู ูุตูุญูุง. </p><br><p style=";text-align:right;direction:rtl">  ููุธู ุงูุงุดุชุฑุงูุงุช ุนูู ุงููุญู ุงูุชุงูู: ุชุฐูุฑ ุงูููููู ูุน "ูุนุฑู ุงููุณุชุฎุฏู == ูุนุฑู ุงูุบุฑูุฉ" ุ ูุนูุฏูุง ูุธูุฑ ุงููุณุชุฎุฏู ุ ูุฅููุง ูุดุงุฑู ูู ุงูููุงุฉ ุงูุชู ุชุญูู ุงูุงุณู ููุณู ูู ุงููุฌู.  ูุจุงูุชุงูู ุ ูุฅู ุงูุนูุฏ ูุฏููุง ุณูู ุชุชููู ููุท ุงูุฑุณุงุฆู ุงูููุฌูุฉ ููู ุ ูููุณ ุงูุงุณุชูุงุน ุฅูู "ุงูุจุซ ุงููุงูู". </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">//     sub.on('message', (channel:string, message:string)=&gt; { io.to(channel).emit('message', message)) }) let UID:string|null = null; sock.on('auth', (uid:string)=&gt; { UID = uid //   -   //  UID  sub.subscribe(UID) //   sock.join(UID) }) sock.on('writeYourself', (message:string)=&gt; { //  ,        UID if (UID) pub.publish(UID, message) })</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฑุงุฆุน ุ ุงูุขู ูุญู ุนูู ูููู ูู ุฃู ุงูุนูุฏ ููุท ุชููู ุงูุฑุณุงุฆู ุงููุฎุตุตุฉ ููู ุ ูุง ุฃูุซุฑ!  ููุน ุฐูู ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุงูุงุดุชุฑุงูุงุช ููุณูุง ุงูุขู ุฃูุจุฑ ุจูุซูุฑ ุ ููุง ูุนูู ุฃููุง ุณุชุฃูู ุฐุงูุฑุฉ yoy yoy ุ + ุงููุฒูุฏ ูู ุนูููุงุช ุงูุงุดุชุฑุงู / ุฅูุบุงุก ุงูุงุดุชุฑุงู ุ ููู ููููุฉ ูุณุจููุง.  ูููู ุนูู ุฃู ุญุงู ุ ูุฐุง ูุนุทููุง ุจุนุถ ุงููุฑููุฉ ุ ุญุชู ุฃูู ููููู ุงูุชููู ูู ูุฐู ุงููุญุธุฉ ูุฅุนุงุฏุฉ ุงููุธุฑ ูู ุฌููุน ุงูุฎูุงุฑุงุช ุงูุณุงุจูุฉ ุ ูุน ุงูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุจุงููุนู ุฎุงุตูุฉ ุงูุนูุฏ ุงูุฌุฏูุฏุฉ ูุฏููุง ูู ุดูู ุฑุณุงุฆู ุฃูุซุฑ ุงูุชูุงุฆูุฉ ูุชููู ุงูุนูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูููู ููุนูุฏ ุงูุงุดุชุฑุงู ูู ูุงุญุฏุฉ ูู ุนุฏุฉ ุญุงูุงุช ูููุฌู ุ ูุนูุฏ ุงูุถุบุท ุ ุฃุฑุณู ุฑุณุงูุฉ ุฅูู ุฌููุน ุงูุญุงูุงุช: </p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1550174595491.png" alt="1550174595491"></p><br><p style=";text-align:right;direction:rtl">  ... ูููู ุ ุจุบุถ ุงููุธุฑ ุนูุง ูุฏ ููููู ุงููุฑุก ุ ูุง ุฒุงููุง ูุง ููุฏูู ูุงุจููุฉ ุชูุฏูุฏ ุบูุฑ ููุชููุฉ ุจุญูููุงุช ูุนูููุฉ ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ูุถุน ุฎูุงุฑุงุช ุฃุฎุฑู.  ูู ูุฑุญูุฉ ูุง ุ ุธูุฑ ุงููุฎุทุท ุงูุชุงูู: ูุงุฐุง ูู ุชู ุชูุณูู ุญุงูุงุช ุงููุฌู ุฅูู ูุฌููุนุงุช ุ ูู A ู B ุ ุญุงูุชุงู ูู ูู ููููุง.  ุนูุฏ ุงูุงุดุชุฑุงู ุ ูุชู ุชูููุน ุงูุนูุฏ ุจูุงุณุทุฉ ูุซูู ูุงุญุฏ ูู ูู ูุฌููุนุฉ ุ ูุนูุฏ ุงูุถุบุท ุ ูุฑุณููู ุฑุณุงูุฉ ุฅูู ุฌููุน ูุซููุงุช ูุฌููุนุฉ ุนุดูุงุฆูุฉ ูุงุญุฏุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1550174092066.png" alt="1550174092066"></p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1550174943313.png" alt="1550174943313"></p><br><p style=";text-align:right;direction:rtl">  ูุจุงูุชุงูู ุ ูุญุตู ุนูู ุจููุฉ ุชุดุบูู ุฐุงุช ุฅููุงููุฉ ุชูุณุน ูุง ููุงุฆูุฉ ูู ุงูููุช ุงููุนูู ุ ูุง ูุนุชูุฏ ุงูุญูู ุนูู ุนูุฏุฉ ูุฑุฏูุฉ ูู ุฃู ููุช ุนูู ุญุฌู ุงููุธุงู ุ ูุฃูู: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฌูุงูู ุงููุทุงู ุงูุชุฑุฏุฏู ููุณู ุจูู ูุฌููุนุงุช ุ ุฃู ุจุฒูุงุฏุฉ ุนุฏุฏ ุงููุณุชุฎุฏููู / ุงููุดุงุท ุ ููุญู ุจุจุณุงุทุฉ ููุงุฑู ุงููุฌููุนุงุช ุงูุฅุถุงููุฉ. </li><li style=";text-align:right;direction:rtl">  ูุชู ุชูุณูู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏู (ุงูุงุดุชุฑุงูุงุช) ุฏุงุฎู ุงููุฌููุนุงุช ููุณูุง ุ ุฃู ุนูุฏ ุฒูุงุฏุฉ ุงููุณุชุฎุฏููู / ุงูุงุดุชุฑุงูุงุช ุ ูุฅููุง ุจุจุณุงุทุฉ ูุฒูุฏ ุนุฏุฏ ุงูุญุงูุงุช ุฏุงุฎู ุงููุฌููุนุงุช. </li></ol><br><p style=";text-align:right;direction:rtl">  ... ูููุง ูู ุงูุญุงู ุฏุงุฆููุง ุ ููุงู "BUT" ูุงุญุฏ: ูููุง ุญุตู ูู ุดูุก ุ ุฒุงุฏุช ุงูููุงุฑุฏ ุงููุงุฒูุฉ ูุชุญููู ุงูููุณุจ ุงูุชุงูู ุ ูุจุฏู ูู ุฃูู ุบุงูุจูุง ูู ููุงุจูุชู. </p><br><p style=";text-align:right;direction:rtl">  ุจุดูู ุนุงู ุ ุฅุฐุง ููุฑุช ูู ุงูุฃูุฑ ุ ูุฅู ุงูููุงุจุณ ุงููุฐููุฑุฉ ุฃุนูุงู ุชุฃุชู ูู ุนุฏู ูุนุฑูุฉ ุฃู ูุณุชุฎุฏู ุนูู ุฃู ุนูุฏุฉ.  ุญุณููุง ุ ูู ุงููุงูุน ุ ุฅุฐุง ูุงูุช ูุฏููุง ูุฐู ุงููุนูููุงุช ุ ููููููุง ุฏูุน ุงูุฑุณุงุฆู ูู ููุงููุง ุงูุตุญูุญ ุ ุฏูู ุชูุฑุงุฑ ูุง ูุฒูู ูู.  ูุงุฐุง ุญุงูููุง ุฃู ููุนู ูู ูุฐุง ุงูููุชุ  ููุฏ ุญุงูููุง ุฌุนู ุงููุธุงู ูุงุจูุงู ููุชุทููุฑ ุจุดูู ุบูุฑ ูุญุฏูุฏ ุ ูุน ุนุฏู ูุฌูุฏ ุขููุฉ ูุนุงูุฌุฉ ูุงุถุญุฉ ุ ูุงูุชู ูุตูุช ุญุชูุงู ุฅูู ุทุฑูู ูุณุฏูุฏ ุฃู ุงูุชูุฑุงุฑ ุบูุฑ ุงููุจุฑุฑ.  ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุงุณุชุฏุนุงุก ุงููุนุงูุฌ ุงูุฐู ูุนูู ู "ุฏูุชุฑ ุนูุงููู": </p><br><p style=";text-align:right;direction:rtl"><img src="https://raw.githubusercontent.com/Alster/distributed-nodejs-chat-with-redis/master/article/images/1550233610561.png" alt="1550233610561"></p><br><blockquote style=";text-align:right;direction:rtl">  ุดูุก ููุงุซู ูุฑูู ูุฐุง ุงูุฑุฌู: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6G22a5Iooqk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></blockquote><p style=";text-align:right;direction:rtl">  ููุญุตูู ุนูู ูููุน ุงููุณุชุฎุฏู ุ ูููู ุจุฑุญูุฉ ุฐูุงุจ ูุฅูุงุจ ุฅุถุงููุฉ ุ ููู ูู ุญูุซ ุงููุจุฏุฃ ููุงูู ุ ูููู ููุณ ูู ุญุงูุชูุง.  ูุจุฏู ุฃููุง ูุญูุฑ ูู ุงูุงุชุฌุงู ุงูุฎุงุทุฆ ุ ูุญุชุงุฌ ุฅูู ุดูุก ุขุฎุฑ ... </p><br><h2 id="sila-hesha" style=";text-align:right;direction:rtl">  ููุฉ ุงูุชุฌุฒุฆุฉ </h2><br><p style=";text-align:right;direction:rtl">  ููุงู ุดูุก ูุซู ุงูุชุฌุฒุฆุฉ.  ูุฏููุง ุจุนุถ ูุฌููุนุฉ ูุญุฏูุฏุฉ ูู ุงูููู.  ููููู ุงูุญุตูู ุนูููุง ูู ุฃู ุจูุงูุงุช.  ููู ูุงุฐุง ูู ูุณูุช ูุฐุง ุงููุทุงู ุจูู ุญุงูุงุช ุงููุฌูุ  ุญุณููุง ุ ูุฃุฎุฐ ูุนุฑู ุงููุณุชุฎุฏู ุ ูููุชุฌ ุนูุงูุฉ ุงูุชุฌุฒุฆุฉ ุ ููุนุชูุฏ ุนูู ุงููุทุงู ุงูุฐู ุงุชุถุญ ููู ุฃูู ูุดุชุฑู / ูุฏูุน ุฅูู ูุซูู ูุงุญุฏ ูุญุฏุฏ.  ุฃู ุฃููุง ูุง ูุนุฑู ููุฏููุง ููุงู ูุฌูุฏ ุงููุณุชุฎุฏู ุ ููู ุจุนุฏ ุงุณุชูุงูู ุ ูููููุง ุฃู ูููู ุจุซูุฉ ุฃูู ูู ุงููุซุงู n ุ inf 100. ูุงูุขู ููุณ ุงูุดูุก ุ ููู ูุน ุงูููุฏ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">function hash(val:string):number{/**/}// -,   const clients:RedisClient[] = []//   const uid = "some uid"//  //,            //      const selectedClient = clients[hash(uid) % clients.length]</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููุง!  ุงูุขู ูุญู ูุง ูุนุชูุฏ ุนูู ุนุฏุฏ ูุซููุงุช ุงููููุฉ ุจุดูู ุนุงู ุ ูููููุง ุงูุชูุณุน ุจูุฏุฑ ูุง ูุฑุบุจ ุฏูู ุงููููุงุช ุงูุนุงูุฉ!  ุญุณููุง ุ ุนูู ูุญูู ุงูุฌุฏ ุ ูุนุฏ ูุฐุง ุฎูุงุฑูุง ุฑุงุฆุนูุง ุ ูุงูุตู ุงููุญูุฏ ูู ุงูุญุงุฌุฉ ุฅูู ุฅุนุงุฏุฉ ุชุดุบูู ุงููุธุงู ุจุงููุงูู ุนูุฏ ุชุญุฏูุซ ุนุฏุฏ ุญุงูุงุช ุงููุฌู.  ููุฌุฏ ุดูุก ูุซู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุญููุฉ ุงูููุงุณูุฉ ูุญููุฉ ุงูุชูุณูู</a> ุงูุชู ุชุชูุญ ูู ุงูุชุบูุจ ุนูู ูุฐุง ุ ูููููุง ูุง ุชูุทุจู ูู ูุธุงู ุงูุฑุณุงุฆู.  ุญุณููุง ุ ููููู ุชุญุฏูุฏ ููุทู ุชุฑุญูู ุงูุงุดุชุฑุงูุงุช ุจูู ุงููุซููุงุช ุ ูููู ูุฐุง ูุง ูุฒุงู ูููู ุฌุฒุกูุง ุฅุถุงูููุง ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุฐุงุช ุงูุญุฌู ุบูุฑ ุงูููููู ุ ูููุง ูุนูู - ูููุง ุฒุงุฏ ุนุฏุฏ ุงูุดูุฑุงุช ูุงููุฒูุฏ ูู ุงูุฃุฎุทุงุก ุ ูุง ูุญุชุงุฌ ุฅูู ุฐูู ุ ุดูุฑูุง.  ููู ุญุงูุชูุง ุ ุงูุชููู ูู ุงูููุงูุถุฉ ููุจููุฉ ุชูุงูุง. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุฃูุถูุง ุงูุงุทูุงุน ุนูู RabbitMQ ูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููููู ุงูุฅุถุงูู</a> ุงูุฎุงุต ุจู ุ ูุงูุฐู ูุณูุญ ููุง ุจุงูููุงู ุจููุณ ุงูุดูุก ููุง ููุนู ุ ู + ูููุฑ ุชุฑุญูู ุงูุงุดุชุฑุงูุงุช (ููุง ููุช ุฃุนูุงู - ูุฑุชุจุท ุจุงููุธููุฉ ูู ุงูุฑุฃุณ ุฅูู ุฃุฎูุต ุงููุฏููู).  ูู ุญูุซ ุงููุจุฏุฃ ุ ููููู ุฃู ุชุฃุฎุฐูุง ูุชูุงู ุจูุฏูุก ุ ูููู ุฅุฐุง ุชุฎุจุท ุดุฎุต ูุง ูู ุชููููู ูู ุฃุฌู ุฅุนุงุฏุฉ ุงููุถุน ุฅูู ุงููุถุน ุงููุนูู ุ ุชุงุฑููุง ููุฒุฉ ูุน ุญููุฉ ุงูุชุฌุฒุฆุฉ ููุท. </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุบูุฑุช ูุณุชูุฏุน ุนูู ุฌูุซุจ.</a> </p><br><p style=";text-align:right;direction:rtl">  ุงููุง ุชููุฐ ุงููุณุฎุฉ ุงูููุงุฆูุฉ ุงูุชู ูุตููุง ุฅูููุง.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ููุงู ููุทู ุฅุถุงูู ููุนูู ูุน ุงูุบุฑู (ูุฑุจุนุงุช ุงูุญูุงุฑ). </p><br><p style=";text-align:right;direction:rtl">  ุจุดูู ุนุงู ุ ุฃูุง ูุฑุชุงุญ ููููู ุชูุฑูุจู. </p><br><h2 id="itogo" style=";text-align:right;direction:rtl">  ุงููุฌููุน </h2><br><p style=";text-align:right;direction:rtl">  ููููู ุฃู ุชูุนู ุฃู ุดูุก ุ ูููู ููุงู ุดูุก ุงุณูู ุงูููุงุฑุฏ ุ ููู ูุญุฏูุฏุฉ ุ ูุฐูู ุนููู ุฃู ุชุชููู. </p><br><p style=";text-align:right;direction:rtl">  ููุฏ ุจุฏุฃูุง ุจุฌูู ุชุงู ุจููููุฉ ุนูู ุงูุฃูุธูุฉ ุงูููุฒุนุฉ ุนูู ุฃููุงุท ููููุณุฉ ุฃูุซุฑ ุฃู ุฃูู ุ ููุฐุง ุฃูุฑ ุฌูุฏ. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar440546/">https://habr.com/ru/post/ar440546/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar440534/index.html">ุชุฑุฌูุฉ ุงูููุฑุฏุงุช ุงูุตุญูุญุฉ ุณูุงุณูุง ูู ุงูุฅูุฌููุฒูุฉ ุฅูู ุงูุฑูุณูุฉ</a></li>
<li><a href="../ar440536/index.html">ููู ูุณุงุนุฏ Facebook Project Infer ูู ุงูุนุซูุฑ ุนูู ุงูุฃุฎุทุงุก ูู ุชุทุจููุงุช ุงูุฌูุงู ูุจู ุงููุดุฑ</a></li>
<li><a href="../ar440540/index.html">ุจูุบุช ุงููููุฉ ุงูุณูููุฉ ูุดุฑูุฉ ุฑุฏูุช 3 ูููุงุฑุงุช ุฏููุงุฑ ุจุนุฏ ุฌุฐุจ 300 ููููู ุฏููุงุฑ ููุงุณุชุซูุงุฑ</a></li>
<li><a href="../ar440542/index.html">Vuex - ุงูุงุณุชุฎุฏุงู ุงูููุฑุท ููุฃูุนุงุจ ูู ุงูุชุทุจูู. ุฎุทุฃ ูู ุงูุชุญููู</a></li>
<li><a href="../ar440544/index.html">Blazor 0.8.0 ุงูุฅุตุฏุงุฑ ุงูุชุฌุฑูุจู ูุชููุฑ ุงูุขู</a></li>
<li><a href="../ar440548/index.html">"ูุง ููููู ููุท ุฃุฎุฐ ูููุงุฒูุฉ ูุตุงุฏุฑ ุงูุฌูุฏ"</a></li>
<li><a href="../ar440550/index.html">ูุง ูุญุชูู ุงููุซูุซ ุงููููู ุนูู ุงุซููู ุ ูููู ููุฌุฏ ุฑูู ูุงุญุฏ</a></li>
<li><a href="../ar440552/index.html">ูุณุฑ ุงูุฅุบูุงู ูุญูู ุญูู ุงูุชุจุนูุฉ ูู ุฌุงูุง ุณูุฑูุจุช</a></li>
<li><a href="../ar440554/index.html">ูุฑูุญุฉ BEM</a></li>
<li><a href="../ar440556/index.html">ุชุนูู ุชุตููู ุงููุฎุทุทุงุช ุนูุงูุฉ ุงูููุงู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>