<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå¶Ô∏è üßôüèø üññüèΩ Implemente el almacenamiento en cach√© SSD en el almacenamiento QSAN XCubeSAN üòÉ üëÆ üõµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Las tecnolog√≠as de mejora del rendimiento basadas en SSD que se utilizan ampliamente en los sistemas de almacenamiento se han inventado durante mucho ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Implemente el almacenamiento en cach√© SSD en el almacenamiento QSAN XCubeSAN</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skilline/blog/432366/"><p>  Las tecnolog√≠as de mejora del rendimiento basadas en SSD que se utilizan ampliamente en los sistemas de almacenamiento se han inventado durante mucho tiempo.  En primer lugar, este es el uso de SSD como espacio de almacenamiento, que es 100% eficiente pero costoso.  Por lo tanto, se utilizan tecnolog√≠as de emparejamiento y almacenamiento en cach√©, donde los SSD se usan solo para los datos m√°s populares ("activos").  El rasgado es bueno para escenarios de uso a largo plazo (d√≠as-semanas) de datos "candentes".  Y el almacenamiento en cach√©, por el contrario, es para uso a corto plazo (minutos-horas).  Ambas opciones se implementan en el almacenamiento <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">QSAN XCubeSAN</a> .  En este art√≠culo, consideraremos la implementaci√≥n del segundo algoritmo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">almacenamiento en cach√© SSD</a> . </p><br><div style="text-align:center;"><img width="250" height="190" src="https://habrastorage.org/webt/f2/5d/si/f25dsiefejvpnm2e4ynez9nksso.png"></div><br><a name="habracut"></a><br><p>  La esencia de la tecnolog√≠a de almacenamiento en cach√© SSD es el uso de SSD como cach√© intermedia entre los discos duros y la memoria del controlador.  El rendimiento de los SSD, por supuesto, es menor que el rendimiento de la memoria cach√© del controlador, pero el volumen es un orden de magnitud mayor.  Por lo tanto, obtenemos un compromiso entre velocidad y volumen. </p><br><p>  <b>Indicaciones para usar el cach√© de lectura SSD:</b> </p><br><ul><li>  El predominio de las operaciones de lectura sobre las operaciones de escritura (a menudo caracter√≠sticas de bases de datos y aplicaciones web); </li><li>  La presencia de un cuello de botella en forma de rendimiento de una variedad de discos duros; </li><li>  La cantidad de datos solicitados es menor que el tama√±o de la cach√© SSD. </li></ul><br><p>  Las indicaciones para usar el cach√© SSD de lectura / escritura son las mismas razones, con la excepci√≥n de la naturaleza de las operaciones: un tipo mixto (por ejemplo, servidor de archivos). </p><br><p>  La mayor√≠a de los proveedores de almacenamiento utilizan cach√© SSD de solo lectura en sus productos.  La diferencia fundamental <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">entre QSAN</a> y ellos es la capacidad de usar el cach√© tambi√©n para escribir.  Para activar la funcionalidad de almacenamiento en cach√© SSD en el almacenamiento QSAN, se requiere una licencia por separado (entregada en forma electr√≥nica). </p><br><p>  La cach√© SSD en XCubeSAN se implementa f√≠sicamente como agrupaciones de cach√© SSD separadas.  Puede haber hasta cuatro en el sistema.  Cada grupo, por supuesto, usa su propio conjunto de SSD.  Y ya en las propiedades de un disco virtual, determinamos si usar√° el grupo de cach√© y cu√°l.  La activaci√≥n y desactivaci√≥n del uso de cach√© para vol√∫menes se puede hacer en l√≠nea sin detener la E / S.  Tambi√©n en el "hot" puede agregar SSD a la agrupaci√≥n y eliminarlos desde all√≠.  Al crear un cach√© de grupo SSD, debe elegir en qu√© modo funcionar√°: solo lectura o lectura + escritura.  Su organizaci√≥n f√≠sica depende de ello.  Dado que el cach√© de los grupos puede ser varios, la funcionalidad puede ser diferente (es decir, el sistema puede tener grupos de cach√© para leer y leer + escribir al mismo tiempo). </p><br><p>  Si usa un cach√© de grupo de solo lectura, puede constar de 1-8 SSD.  Los discos no tienen que ser del mismo volumen y de un solo proveedor, ya que se combinan en una estructura NRAID +.  Todos los SSD en el grupo son compartidos.  El sistema intenta de forma independiente paralelizar las solicitudes entrantes entre todos los SSD para lograr el m√°ximo rendimiento.  En caso de falla de uno de los SSD, no ocurrir√° nada terrible: despu√©s de todo, el cach√© contiene solo una copia de los datos almacenados en una matriz de discos duros.  Es solo que la cantidad de cach√© SSD disponible disminuir√° (o cero si usa el cach√© SSD original de una unidad). </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/jc/io/jr/jciojrvarhuem3cug2ws-paj7ag.png"></div><br><p>  Si el cach√© se usa para operaciones de lectura + escritura, entonces el n√∫mero de SSD en el grupo debe ser un m√∫ltiplo de dos, ya que el contenido se refleja en pares de unidades (usando la estructura NRAID 1+).  La duplicaci√≥n de la memoria cach√© es necesaria debido al hecho de que puede contener datos que a√∫n no se han escrito en los discos duros.  Y en este caso, la falla del SSD del grupo de cach√© conducir√≠a a la p√©rdida de informaci√≥n.  En el caso de NRAID 1+, una falla de SSD simplemente conducir√° a una transici√≥n de cach√© a un estado de solo lectura con el volcado de datos no grabados a una matriz desde discos duros.  Despu√©s de reemplazar el SSD fallido, el cach√© volver√° a su modo de operaci√≥n original.  Por cierto, para una mayor seguridad, se puede asignar un repuesto din√°mico dedicado a un cach√© que funciona para lectura + escritura. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/od/af/ih/odafih8vgcqhofajne-vkusvkcq.png"></div><br><p>  Cuando se utiliza la funci√≥n de almacenamiento en cach√© SSD en XCubeSAN, hay una serie de requisitos para la capacidad de almacenamiento de los controladores de almacenamiento: cuanta m√°s memoria del sistema, mayor ser√° el conjunto de cach√© disponible. </p><br><p></p><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/i2/wz/gl/i2wzglxirrpm42btflq07g4gp8q.png"></div><br><p>  A diferencia de la mayor√≠a de los fabricantes de almacenamiento, que ofrecen solo la opci√≥n de encendido / apagado como la configuraci√≥n de cach√© SSD, QSAN ofrece m√°s opciones.  En particular, puede seleccionar el modo operativo de cach√© dependiendo de la naturaleza de la carga.  Hay tres plantillas predefinidas que son las m√°s cercanas en su trabajo a los servicios correspondientes: base de datos, sistema de archivos, servicio web.  Adem√°s, el administrador puede crear su propio perfil estableciendo los valores de par√°metros necesarios: </p><br><table><tbody><tr><td><p></p><ul><li>  Tama√±o de bloque (tama√±o de bloque de cach√©) - 1/2/4 MB </li><li>  El n√∫mero de solicitudes para leer un bloque para que se copie en la memoria cach√© (umbral de llenado en lectura) es 1..4 </li><li>  El n√∫mero de solicitudes para escribir un bloque para que se copie en la memoria cach√© (umbral de relleno en escritura) es 0..4 </li></ul></td><td><p><img align="right" src="https://habrastorage.org/webt/hv/yk/qu/hvykquyvns-_g5w_jp8isx4ms2s.png"></p></td></tr></tbody></table><br><p>  Los perfiles se pueden cambiar sobre la marcha, pero, por supuesto, con poner a cero el contenido de la memoria cach√© y su nuevo "calentamiento". </p><br><p>  Teniendo en cuenta el principio de funcionamiento del cach√© SSD, podemos distinguir las operaciones principales cuando trabajamos con √©l: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Lectura de datos cuando no est√° en el cach√©;</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Lectura de datos cuando est√° presente en el cach√©;</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Escribir datos cuando se usa el cach√© de lectura;</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Escribir datos cuando se usa el cach√© de lectura + escritura.</a> </li></ul><br><hr><br><a name="1"></a><br><p></p><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/ae/nm/-h/aenm-hgkhwpkxaurphch_-mfsa4.png"></div><br><p>  <i>Leer datos cuando no est√° en el cach√©</i> </p><br><ol><li>  La solicitud del host va al controlador; </li><li>  Como los solicitados no est√°n en el cach√© SSD, se leen desde los discos duros; </li><li>  Los datos le√≠dos se env√≠an al host.  Al mismo tiempo, se est√° realizando una verificaci√≥n para ver si estos bloques est√°n "calientes"; </li><li>  Si es as√≠, se copian a la cach√© SSD para referencia futura. </li></ol><br><hr><br><a name="2"></a><br><p></p><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/2y/hj/ce/2yhjceex34-npby_-w60y-1nm_e.png"></div><br><p>  <i>Leer datos cuando est√° presente en el cach√©</i> </p><br><ol><li>  La solicitud del host va al controlador; </li><li>  Como los datos solicitados est√°n en la cach√© SSD, se leen desde all√≠; </li><li>  Los datos le√≠dos se env√≠an al host. </li></ol><br><hr><br><a name="3"></a><br><p></p><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/ey/vu/yx/eyvuyxvvepb1hdzcrvpxz6lrdcw.png"></div><br><p>  <i>Escribir datos al usar cach√© de lectura</i> </p><br><ol><li>  Una solicitud de escritura del host va al controlador; </li><li>  Los datos se escriben en discos duros; </li><li>  El anfitri√≥n devuelve una respuesta sobre la grabaci√≥n exitosa; </li><li>  Al mismo tiempo, se verifica si el bloque est√° "activo" (se compara el par√°metro Umbral de relleno en escritura).  Si es as√≠, se copia a la cach√© SSD para uso futuro. </li></ol><br><hr><br><a name="4"></a><br><p></p><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/td/-o/9z/td-o9z2jfl6dbbyhmi6kqz61bbe.png"></div><br><p>  <i>Escribir datos cuando se usa lectura / escritura de cach√©</i> </p><br><ol><li>  Una solicitud de escritura del host va al controlador; </li><li>  Los datos se escriben en el cach√© SSD; </li><li>  El anfitri√≥n devuelve una respuesta sobre la grabaci√≥n exitosa; </li><li>  Los datos del cach√© SSD en segundo plano se escriben en los discos duros; </li></ol><br><hr><br><h2>  Verificaci√≥n en negocios </h2><br><div class="spoiler">  <b class="spoiler_title">Banco de pruebas</b> <div class="spoiler_text"><p>  2 servidores (CPU: 2 x Xeon E5-2620v3 2.4Hz / RAM: 32GB) est√°n conectados por dos puertos a trav√©s del Fibre Channel 16G directamente al sistema de almacenamiento XCubeSAN XS5224D (16GB RAM / controlador). </p><br><p>  Us√≥ 16 x Seagate Constellation ES, ST500NM0001, 500GB, SAS 6Gb / s, combinado en RAID5 (15 + 1), para matriz de datos y 8 x HGST Ultrastar SSD800MH.B, HUSMH8010BSS200, 100GB, SAS 12Gb / s como cach√© </p><br><p>  Se crearon 2 vol√∫menes: uno para cada servidor. </p><br></div></div><br><h3>  Prueba 1. Cach√© de solo lectura SSD con 1-8 SSD </h3><br><table><tbody><tr><td><p>  <b>Cach√© SSD</b> </p><br><ul><li>  Tipo de E / S: personalizaci√≥n </li><li>  Tama√±o del bloque de cach√©: 4 MB </li><li>  <b>Umbral de poblaci√≥n en lectura: 1</b> </li><li>  Umbral de llenado en escritura: 0 </li></ul></td><td><p>  <b>Patr√≥n de E / S</b> </p><br><ul><li>  Herramienta: IOmeter V1.1.0 </li><li>  Trabajadores: 1 </li><li>  Excepcional (Profundidad de la cola): 128 </li><li>  <b>Especificaciones de acceso: 4KB, 100% de lectura, 100% aleatorio</b> </li></ul></td></tr></tbody></table><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/i4/lt/f7/i4ltf7jbkc7yul47drqxdnxiep8.jpeg"></div><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/kc/qd/ob/kcqdobnqjuybr3i8p-fszbmhlru.jpeg"></div><br><p>  En teor√≠a, cuantos m√°s SSD haya en el grupo de cach√©, mayor ser√° el rendimiento.  En la pr√°ctica, esto se confirm√≥.  El √∫nico aumento significativo en el n√∫mero de SSD con un peque√±o n√∫mero de vol√∫menes no conduce a un efecto explosivo. </p><br><h3>  Prueba 2. Cach√© SSD en modo lectura + escritura con 2-8 SSD </h3><br><table><tbody><tr><td><p>  <b>Cach√© SSD</b> </p><br><ul><li>  Tipo de E / S: personalizaci√≥n </li><li>  Tama√±o del bloque de cach√©: 4 MB </li><li>  Umbral de poblaci√≥n en lectura: 1 </li><li>  <b>Umbral de poblaci√≥n en escritura: 1</b> </li></ul></td><td><p>  <b>Patr√≥n de E / S</b> </p><br><ul><li>  Herramienta: IOmeter V1.1.0 </li><li>  Trabajadores: 1 </li><li>  Excepcional (Profundidad de la cola): 128 </li><li>  <b>Especificaciones de acceso: 4KB, 100% de escritura, 100% aleatorio</b> </li></ul></td></tr></tbody></table><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/da/hq/am/dahqamc9x-ymghoj9emv5lcglvq.jpeg"></div><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/dl/wc/wv/dlwcwvgexew6awqt6k_xmndjna0.jpeg"></div><br><p>  El mismo resultado: crecimiento y escala explosivos del rendimiento con un aumento en la cantidad de SSD. </p><br><p>  En ambas pruebas, la cantidad de datos operativos fue menor que el tama√±o total de la memoria cach√©.  Por lo tanto, con el tiempo, todos los bloques se copiaron en la memoria cach√©.  Y el trabajo, de hecho, se realiz√≥ con un SSD, pr√°cticamente sin afectar los discos duros.  El prop√≥sito de estas pruebas era demostrar claramente la efectividad de calentar el cach√© y escalar su rendimiento dependiendo de la cantidad de SSD. </p><br><p>  Ahora, regresemos del cielo a la tierra y verifiquemos una situaci√≥n m√°s vital cuando la cantidad de datos es mayor que el tama√±o del cach√©.  Para que la prueba pase en un tiempo razonable (el t√©rmino de "calentamiento" del cach√© aumenta significativamente al aumentar el tama√±o del volumen), nos restringimos al tama√±o de volumen de 120 GB. </p><br><h3>  Prueba 3. Emulaci√≥n de la base de datos. </h3><br><table><tbody><tr><td><p>  <b>Cach√© SSD</b> </p><br><ul><li>  <b>Tipo de E / S: base de datos</b> </li><li>  Tama√±o del bloque de cach√©: 1 MB </li><li>  Umbral de poblaci√≥n en lectura: 2 </li><li>  Umbral de poblaci√≥n en escritura: 1 </li></ul></td><td><p>  <b>Patr√≥n de E / S</b> </p><br><ul><li>  Herramienta: IOmeter V1.1.0 </li><li>  Trabajadores: 1 </li><li>  Excepcional (Profundidad de la cola): 128 </li><li>  <b>Especificaciones de acceso: 8 KB, 67% de lectura, 100% aleatorio</b> </li></ul></td></tr></tbody></table><br><p></p><div style="text-align:center;"><img width="700" src="https://habrastorage.org/webt/bi/ud/d9/biudd9iwyf1dddnevu15o3ipiai.jpeg"></div><br><h2>  El veredicto </h2><br><blockquote>  Como conclusi√≥n obvia, por supuesto, una buena eficiencia del uso de la cach√© SSD sugiere aumentar el rendimiento de cualquier sistema de almacenamiento.  Con respecto a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">QSAN XCubeSAN,</a> esta declaraci√≥n es totalmente aplicable: la funci√≥n de almacenamiento en cach√© SSD se implementa perfectamente.  Esto se aplica al soporte para lectura y lectura + escritura, configuraciones de trabajo flexibles para cualquier caso de uso, as√≠ como el rendimiento final del sistema en su conjunto.  Por lo tanto, por un costo muy razonable (el precio de una licencia es comparable con el costo de 1-2 SSD), puede aumentar significativamente el rendimiento general. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es432366/">https://habr.com/ru/post/es432366/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es432354/index.html">Las filtraciones de datos m√°s significativas en 2018. Primera parte (enero-junio)</a></li>
<li><a href="../es432356/index.html">C√≥mo escribir una excelente fuente de noticias VKontakte en 20 horas</a></li>
<li><a href="../es432360/index.html">El "descendiente" AlphaGo aprendi√≥ independientemente a jugar ajedrez, shogi e ir</a></li>
<li><a href="../es432362/index.html">Chang'e 4 - la misi√≥n al otro lado de la luna comienza hoy</a></li>
<li><a href="../es432364/index.html">Alfabeto fon√©tico: c√≥mo una soluci√≥n para la aviaci√≥n ayudar√° a transferir un inicio de sesi√≥n por tel√©fono</a></li>
<li><a href="../es432368/index.html">Before You - React Modern Web App</a></li>
<li><a href="../es432370/index.html">AlphaZero derrot√≥ a Stockfish en una partida de 1,000 juegos</a></li>
<li><a href="../es432372/index.html">Microsoft ha confirmado oficialmente que Edge cambia al motor Chromium</a></li>
<li><a href="../es432374/index.html">Elasticsearch altamente accesible y escalable en Kubernetes</a></li>
<li><a href="../es432378/index.html">Un estudiante de d√©cimo grado de Siberia quiere convertirse en dise√±ador de procesadores. ¬øPor qu√© no hacer un acelerador neuronal FPGA?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>