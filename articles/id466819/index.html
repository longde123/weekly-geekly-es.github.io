<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸï¸ ğŸ¦ ğŸ‘¶ Implementasi penawaran promosi di iOS. Bagaimana cara menghasilkan lebih dari langganan? ğŸ”½ ã€½ï¸ ğŸš¦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Di iOS 12.2, Apple menambahkan fitur baru yang keren - penawaran promosi. Aplikasi berlangganan yang dapat diperpanjang secara otomatis sekarang dapat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Implementasi penawaran promosi di iOS. Bagaimana cara menghasilkan lebih dari langganan?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/apphud/blog/466819/"><p><img src="https://habrastorage.org/webt/zu/zs/-0/zuzs-0bm9yctpeyv9hwjloa38y8.png"></p><br><p> Di iOS 12.2, Apple menambahkan fitur baru yang keren - penawaran promosi.  Aplikasi berlangganan yang dapat diperpanjang secara otomatis sekarang dapat menawarkan diskon pribadi pelanggan atau pelanggan lama atau periode bebas tambahan.  Penawaran promosi berlaku untuk pembayaran, pembayaran, uji coba, dan pembatalan pengguna uji coba.  Tidak seperti penawaran pendahuluan, penawaran promosi dapat dibeli sebanyak yang diinginkan atas kebijakan pengembang.  Tetapi implementasinya membutuhkan server untuk menghasilkan tanda tangan digital. <a name="habracut"></a></p><br><h2 id="nastroyka-promo-predlozheniy-v-app-store-connect">  Siapkan penawaran promosi di App Store Connect </h2><br><p>  Untuk membuat penawaran promosi baru, buka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">App Store Connect</a> dan buka halaman dengan berlangganan Anda.  Klik <em>"+"</em> di bagian harga langganan dan pilih <em>"Buat Penawaran Promosi"</em> : </p><br><p><img src="https://habrastorage.org/webt/qr/sr/df/qrsrdf5ttcgjusqgvdtzpztf230.png"></p><br><p>  Tunjukkan nama asli promosi dan pengenalnya - <em>Kode Produk</em> : </p><br><p><img src="https://habrastorage.org/webt/bg/q3/a1/bgq3a1hw16mxoa5ladqanjaflrg.png"></p><br><p>  Tunjukkan biaya dan jenis penawaran promosi: </p><br><ul><li>  pembayaran saat digunakan; </li><li>  pembayaran di muka; </li><li>  periode bebas. </li></ul><br><p>  Simpan perubahannya. </p><br><h2 id="klyuch-podpiski">  Kunci berlangganan </h2><br><p>  Untuk menggunakan penawaran promosi, Anda perlu membuat tanda tangan digital menggunakan kunci berlangganan.  Anda harus membuatnya di App Store Connect. </p><br><p>  Buka bagian <em>"Pengguna dan Akses"</em> , lalu ke tab <em>"Tombol"</em> .  Buat Kunci Langganan baru dengan menentukan namanya. </p><br><p><img src="https://habrastorage.org/webt/gy/ij/ua/gyijuam-ok_ukvlwimwreec5g0m.png"></p><br><p>  Setelah membuat kunci, klik <em>"Unduh API Key"</em> dan simpan file di tempat yang aman. </p><br><p><img src="https://habrastorage.org/webt/bj/z3/7r/bjz37rhkzcznkfnqirteb7sr1fy.png"></p><br><blockquote>  Kunci berlangganan yang diunduh dari App Store Connect memiliki format nama berikut: SubscriptionKey_ [KEY_ID] .p8, di mana KEY_ID adalah pengidentifikasi kunci. </blockquote><br><h2 id="generaciya-podpisi">  Generasi tanda tangan </h2><br><p>  Di sini dimulai yang paling sulit dan, menurut saya, tidak perlu.  Apple direasuransikan dengan menambahkan pembuatan tanda tangan sehingga pengguna tidak dapat meretas ke StoreKit dan mengajukan penawaran promosi tanpa sepengetahuan pengembang.  Biarkan saya mengingatkan Anda bahwa diskon ini hanya tersedia untuk pengguna yang membayar.  Apakah pelanggan saat ini akan mencoba meretas sistem dengan diskon? </p><br><p> Dari sudut pandang klien seluler, pembuatan tanda tangan diperlukan sehingga, dengan memiliki kelas <code>SKProductDiscount</code> , membuat kelas <code>SKPaymentDiscount</code> , yang akan ditambahkan ke <code>SKMutablePayment</code> untuk melakukan pembelian.  Mari kita pertimbangkan lebih detail. </p><br><h4 id="skproductdiscount">  SKProductDiscount </h4><br><p>  Objek kelas ini disimpan dalam array <code>discounts</code> dari <code>SKProduct</code> .  Semua penawaran promosi yang dibuat adalah objek dari kelas <code>SKProductDiscount</code> .  Seperti dalam hal penawaran pengantar, Anda bisa mendapatkan durasi, harga, dan jumlah periode promosi.  Ternyata kelas ini diperlukan untuk menampilkan kondisi pembelian di antarmuka aplikasi. </p><br><h4 id="skpaymentdiscount">  SKPaymentDiscount </h4><br><p>  Kelas ini dibuat oleh pengembang menggunakan data yang diterima dari server Anda.  Lihatlah file sumber dan lihat satu-satunya metode inisialisasi: </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(identifier: <span class="hljs-type"><span class="hljs-type">String</span></span>, keyIdentifier: <span class="hljs-type"><span class="hljs-type">String</span></span>, nonce: <span class="hljs-type"><span class="hljs-type">UUID</span></span>, signature: <span class="hljs-type"><span class="hljs-type">String</span></span>, timestamp: <span class="hljs-type"><span class="hljs-type">NSNumber</span></span>)</code> </pre> <br><ul><li>  <code>identifier</code> - pengidentifikasi dari penawaran promosi.  Ini diambil dari <code>SKProductDiscount</code> . </li><li>  <code>keyIdentifier</code> - pengidentifikasi kunci berlangganan. </li><li>  <code>nonce</code> adalah string arbitrer yang dihasilkan di server untuk perlindungan tanda tangan yang lebih besar, atau <em>garam</em> .  Di iOS, Anda harus membuat kelas UUID menggunakan garam ini. </li><li>  <code>signature</code> - <code>signature</code> digital yang diterima dari server Anda sebagai string base64. </li><li>  <code>timestamp</code> - tanggal pembuatan tanda tangan dalam milidetik.  Perlu membandingkan waktu pembuatan tanda tangan dan waktu pembelian itu sendiri, karena tanda tangan hanya berlaku 24 jam. </li></ul><br><p>  Kode itu sendiri untuk menghasilkan tanda tangan di server bukanlah tugas yang mudah, tetapi Apple telah memberikan kode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sampel</a> di Node.js.  Kunci tanda tangan harus diunggah ke server Anda dan Anda harus mengembalikan semua data di atas ke klien seluler. </p><br><p>  Baca lebih lanjut tentang pembuatan tanda tangan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </p><br><h2 id="oformlenie-pokupki">  Checkout </h2><br><p>  Penawaran promosi dibeli dengan cara yang sama seperti pembelian reguler.  Satu-satunya perbedaan adalah penambahan objek kelas <code>SKPaymentDiscount</code> . </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> payment = <span class="hljs-type"><span class="hljs-type">SKMutablePayment</span></span>(product: product) payment.paymentDiscount = discount <span class="hljs-type"><span class="hljs-type">SKPaymentQueue</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>().add(payment)</code> </pre> <br><h2 id="chto-dalshe">  Apa selanjutnya </h2><br><p>  Anda berhasil membuat tanda tangan dan melakukan pembelian pertama di Sandbox.  Ini bagus!  Namun penawaran promosi itu sendiri tidak akan menyelesaikan masalah peningkatan laba dan pengguna yang kembali.  Tugas Anda adalah menunjukkannya kepada pengguna pada waktu yang tepat.  Yang mana  Misalnya, Anda dapat mencoba mengembalikan pengguna yang telah membatalkan langganan dengan mengirimkan pemberitahuan kepada mereka. </p><br><h3 id="vozvrat-otvalivshihsya-klientov">  Pengembalian pelanggan yang gagal </h3><br><p>  Dengan bantuan penawaran promosi, Anda dapat mencoba mengembalikan pelanggan yang telah pergi.  Untuk melakukan ini, Anda perlu menerapkan berbagai fungsi: penawaran promosi, pemberitahuan server tentang status berlangganan, pemberitahuan push, menyimpan cek pengguna di server dan mencari pengguna dengan nomor transaksi.  Ini tidak mudah. </p><br><h3 id="opros-otvalivshihsya-klientov">  Survei pelanggan yang jatuh </h3><br><p>  Menarik pengguna baru jauh lebih mahal daripada mempertahankan pelanggan yang sudah ada.  Karena itu, sangat penting untuk memahami motif yang memaksa pengguna untuk membatalkan percobaan dan langganan. </p><br><p>  Banyak pengguna berhenti berlangganan karena mereka tidak lagi membutuhkan aplikasi, dan diskon Anda mungkin tidak berfungsi.  Dalam hal ini, alih-alih menawarkan diskon, Anda harus mencari tahu apa yang tidak disukainya dan <em>apa yang</em> mungkin memengaruhi keputusannya untuk kembali ke aplikasi. </p><br><h3 id="predlagat-skidki-v-obmen-na-deystvie">  Tawarkan diskon sebagai imbalan atas tindakan </h3><br><p>  Paling sering, ini adalah undangan ke teman dengan imbalan diskon atau penggunaan gratis.  Ini mungkin benar-benar berfungsi, tetapi akan membutuhkan banyak waktu untuk mengimplementasikan sistem rujukan. </p><br><h4 id="kak-eto-realizovano-v-apphud">  Bagaimana ini diterapkan di Apphud </h4><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Apphud</a> melacak berhenti berlangganan, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mem-</a> polling pengguna sebelumnya, dan menawarkan diskon tanpa menulis kode.  Layar diskon dibuat di perancang di akun Anda.  Untuk pengguna, tampilannya seperti ini: </p><br><p><img src="https://habrastorage.org/webt/zf/ma/dj/zfmadj-i5lyljmnw57hvpduhxg4.gif"><br>  <em>Apphud menampilkan layar survei ketika percobaan atau berlangganan dibatalkan dan, jika perlu, segera menawarkan diskon.</em> </p><br><p>  Kami menamai setiap mekanisme individu untuk pengembalian pengguna sebagai suatu <em>aturan</em> .  Baca lebih lanjut tentang cara mengkonfigurasi aturan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </p><br><h2 id="zaklyuchenie">  Kesimpulan </h2><br><p>  Model bisnis berlangganan telah menjadi standar dalam aplikasi seluler non-game.  Retensi pengguna dan pemahaman tentang alasan keberangkatan mereka adalah tugas penting yang harus diatasi pada tahap peluncuran proyek seluler. </p><br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Apphud</a> akan membantu dengan integrasi langganan: <br><ul><li>  Lakukan pembelian hanya menggunakan satu metode; </li><li>  secara otomatis melacak status langganan setiap pengguna; </li><li>  Integrasikan Penawaran Langganan dengan mudah </li><li>  kirim acara berlangganan ke Amplitude, Mixpanel, Slack dan Telegram dengan mempertimbangkan mata uang lokal pengguna; </li><li>  mengurangi tingkat Churn dalam aplikasi dan mengembalikan pengguna yang tidak berlangganan. </li></ul><br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id466819/">https://habr.com/ru/post/id466819/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id466809/index.html">Lingkaran ditutup. Bagaimana mitaps membantu saya menemukan pekerjaan impian</a></li>
<li><a href="../id466811/index.html">Sejarah dan alternatif untuk platform .NET</a></li>
<li><a href="../id466813/index.html">Posit-arithmetic: mengalahkan floating point di bidangnya sendiri. Bagian 2</a></li>
<li><a href="../id466815/index.html">Ikhtisar Teknis NEC HYDRAstor HS8 dan banyak lagi</a></li>
<li><a href="../id466817/index.html">Varonis menemukan virus penambangan crypto: penyelidikan kami</a></li>
<li><a href="../id466821/index.html">Instal 3CX dari Amazon AWS Marketplace</a></li>
<li><a href="../id466823/index.html">Bagaimana kami mengatur migrasi untuk proses bisnis di Bitrix24</a></li>
<li><a href="../id466829/index.html">Beberapa sentuhan untuk bekerja dengan ID bigint di R</a></li>
<li><a href="../id466831/index.html">Mengembangkan OS seperti Unix yang monolitik - Heap (4)</a></li>
<li><a href="../id466833/index.html">Hal Penting untuk Diketahui Tentang Tensorflow 2.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>