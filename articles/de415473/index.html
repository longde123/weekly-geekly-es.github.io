<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📑 👩🏼‍🍳 ✂️ Wer scannt das Internet? Zeit, Eisen zu schmieden 👇🏾 🏠 🕣</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich möchte den Titel nicht aufgeben. Immerhin erfüllt er seine Aufgabe - zieht Aufmerksamkeit auf sich. Ich bitte Sie aufrichtig, nicht böse zu sein, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wer scannt das Internet? Zeit, Eisen zu schmieden</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415473/"> Ich möchte den Titel nicht aufgeben.  Immerhin erfüllt er seine Aufgabe - zieht Aufmerksamkeit auf sich.  Ich bitte Sie aufrichtig, nicht böse zu sein, wenn der Inhalt des Artikels nicht Ihren Erwartungen entspricht.  Jetzt ist die Zeit gekommen.  "Solche Materialien", sagten sie, "müssen Sie in Foren für Amateure veröffentlichen, und auf Habr spricht nur das hochintelligente IT-Publikum über Dinge, die Sie nie verstehen müssen und die Sie nicht verstehen müssen."  Ehre sei Habru!  Er ist ziemlich demokratisch. <br><br>  Beim Thema Netzwerksicherheit hat mich etwas an der Analyse des Netzwerkverkehrs und der Erkennung nicht autorisierter Netzwerkaktivitäten (im Folgenden als NSA bezeichnet) interessiert. <br><a name="habracut"></a><br>  Aspekte der NSA, die mich interessieren: <br><br><ul><li>  unbefugtes Scannen von Ressourcen (Ports, Web-Zielen) des geschützten Netzwerks (im Folgenden - AP) aus einem offenen Netzwerk (im Folgenden - Betriebssystem); </li><li>  - nicht autorisierter Verkehr von / zu AP.  Dies ist eine unabhängige Netzwerkaktivität von Anwendungen. </li><li>  unbefugtes Einfügen unangemessener Inhalte (im Folgenden: NK).  Dies ist Werbung, Inhalt von zweifelhaften Inhalten. </li><li>  Bekannte Arten von Netzwerkangriffen (im Folgenden - CA). </li></ul><br>  Was mich bisher nicht interessiert: alles, was das Netzwerk nicht betrifft.  Dieser Virenschutz schützt direkt Workstations und Server, E-Mail-Spam, das Knacken von Passwörtern usw.  usw. <br><br>  Warum habe ich beschlossen, das Rad neu zu erfinden?  Immerhin gibt es viel Eisen und Software, die die gleichen Funktionen zu erfüllen scheinen und nicht schlecht zu sein scheinen.  Aber hier ist die Frage: Wir geben viel Geld für hyperkonvergente Supermächte der nächsten Generation aus, aber es macht keinen Sinn.  Ein Update kam und scheiterte an allen PCs.  Benutzer haben die Rechte von Administratoren, schalten Anzeigen in Browsern und fangen Ransomware ab.  "Oh, wir sind heute aus technischen Gründen geschlossen", muss der Geschäftsinhaber sagen.  Administratoren geben einen neuen Server im Netzwerk frei, um ihn mit allen offenen Ports zu aktualisieren. Er wird sofort "so aktualisiert, wie er sollte".  Und dann verlangsamt es das Netzwerk, die Domain fällt in Spammer und andere Freuden des IT-Lebens.  Nun, Business versucht, Administratoren für den Umzug zu bezahlen.  Sie bewegen sich, aber nicht lange - sie gewöhnen sich daran.  Jeder weiß, dass IT-Vorfälle für öffentliche Versorgungsunternehmen immer plötzlich wie im Winter auftreten.  Was den öffentlichen Sektor betrifft, dann hier wie üblich - "Narren und Straßen".  Einerseits entstehen enorme Kosten für die „Netzwerkmodernisierung“, den Kauf teurer Geräte, die nur einen begründeten Verdacht auf Budgetkürzungen hervorrufen können.  Auf der anderen Seite niedrige Löhne für IT-Spezialisten, was zu Fluktuation und einem insgesamt niedrigen professionellen Niveau der Administratoren führt.  Infolgedessen haben wir teure Ausrüstung und einen Studenten, der nicht weiß wie, nicht weiß und nicht wissen will, was er damit machen soll.  Das heißt, das Sicherheitsproblem liegt nicht in der Hardware.  Der menschliche Faktor bestimmt die Gesamtsicherheit von Systemen. <br><br>  Warum bin ich  Darüber hinaus ist es für jeden Geschäftsinhaber interessant, einen „Administrator“ zu haben, der seine Aufgaben praktisch rund um die Uhr praktisch „für Lebensmittel“ gleich gut erfüllt. <br><br>  Dies ist genau die Art von "Iron Admin", die ich implementieren möchte. <br><br>  Ich beschloss, mit der Netzwerksicherheit zu beginnen.  Einen externen Einfluss auf den AP zu begrenzen oder auszuschließen, ist bereits zu 50% der Fall. <br><br>  Also das allgemeine Konzept: <br><br>  Die wichtigsten Anfangsbedingungen (ideal?): <br><br><ol><li>  Niedrige Kosten  Das Stück Eisen in der Basisversion sollte für alle Kategorien erschwinglich sein, von einem einzelnen Benutzer mit einem PC und höher. </li><li>  Ein Stück Eisen sollte nicht die ständige Aufmerksamkeit von qualifiziertem Personal erfordern, um seine Aufgaben zu erfüllen.  Setze und vergiss. </li><li>  Das Stück Eisen sollte leicht ausgetauscht werden können, ohne dass eine zusätzliche Konfiguration erforderlich ist. </li><li>  Das Stück Eisen sollte interaktiv sein - informieren Sie einen vorgegebenen Personenkreis über aktuelle oder vermutete Bedrohungen und deren Zustand und treffen Sie Entscheidungen unabhängig auf der Grundlage einer Analyse der Situation.  Das heißt, es ist nicht der Administrator, der ständig in das Protokoll schauen sollte, sondern das Eisen sollte melden, dass etwas schief gelaufen ist und was er getan hat, um es „falsch“ zu beheben. </li><li>  Die Schnittstelle zur Interaktion mit dem Eisen sollte selbst für einen unerfahrenen IT-Spezialisten einfach und verständlich sein.  Keine Konsolen oder regulären Ausdrücke.  Überlasse den Himmel den Vögeln. </li></ol><br>  Dies gilt im Hinblick auf die strategischen Ziele.  Nun zurück zur Erde.  Lassen Sie Zhelezka aus Sammlern bestehen, die Informationen sammeln, und dem Zentrum für Analyse und Entscheidungsfindung (im Folgenden: CACR).  Es gibt einige Analogien zu Smart Home, IoT.  Lass es "Smart Octopus" sein (fu, ekelhaft).  Aber warum nicht?  Es sieht doch so aus - Sammler sind Tentakel und das Gehirn ist DACR <br><br>  Es gibt verschiedene Optionen für DACR: <br><br><ol><li>  Integriert - Sammler und DAC auf demselben Stück Eisen. </li><li>  Lokal - Arbeiten mit einer begrenzten Liste von Geräten.  Sagen wir innerhalb derselben Organisation oder demselben Gebiet. </li><li>  Global - eine Internetressource, die mit Sammlern im Internet zusammenarbeitet. </li><li>  Regional (Option) - um die Last des Globalen zu verteilen. </li></ol><br>  Alle untergeordneten DACAs können mit dem globalen DAC interagieren, in dem die umfassendste Datenbank mit NSA-Funktionen gespeichert ist. <br><br>  Die erste Aktion.  Wir erstellen einen integrierten CARP-Collector zur Überwachung der NSA. <br><br>  Was ist der NSA-Sammler zum gegenwärtigen Zeitpunkt?  Dies ist im Wesentlichen ein Linux-Computer, der in einem 1U-Paket enthalten ist.  Der Kollektor verfügt über 3 Netzwerkschnittstellen.  Zwei ist im gesamten Netzwerk aktiviert.  Eine Verwaltungsschnittstelle.  DAC befindet sich auf derselben Plattform. <br><br>  Hier ist der aktuelle Schaltplan: <br><br><img src="https://habrastorage.org/webt/w4/z-/hl/w4z-hl4rnoivpecchv--cjfsftw.png" alt="Bild"><br><br>  Jede externe Kollektorinteraktion erfolgt nur über die Steuerschnittstelle.  Für den Internetverkehr ist der Collector transparent. <br><br>  Da wir jetzt den grundlegenden Algorithmus für diesen Stand entwickeln, reicht dies aus.  Natürlich wird das fertige Produkt über fortschrittlichere Hardware- und Ausfallsicherheitstools verfügen. <br><br>  Was macht der Sammler?  Sammelt bestimmte Teile des Verkehrs.  Header und ggf. Paketinhalt.  Dies ist durch die Regeln konfigurierbar.  Es macht keinen Sinn, den gesamten Verkehr zu sammeln.  Verkehrsdaten für einen kurzen Zeitraum (abhängig von der Auslastung und dem Volumen der Arbeitsplatte, Woche-Monat) werden auf dem Kollektor gespeichert.  Somit kann der Kollektor als gleichzeitiger Ersatz des Quell-, Kollektor- und Statistikanzeigesystems vom Typ Netflow dienen.  Da der Collector Informationen zu jeder Sitzung enthält, ist es natürlich nicht beabsichtigt, Statistiken über einen längeren Zeitraum zu speichern.  Wenn dies erforderlich ist, können Statistiken in Form von Dateien in den Netzwerkspeicher oder auf ein zugeordnetes Laufwerk kopiert und in Zukunft mithilfe von DAC analysiert und angezeigt werden. <br><br>  Der Sammler ist nicht dumm.  Es analysiert den Verkehr basierend auf den vom DAC definierten Regeln und sendet Informationen an den DAC, falls vom DAC definierte Filterauslöser vorliegen.  Darüber hinaus filtert der Collector den Datenverkehr selbstständig. <br><br>  Irgendwie so. <br><br>  Während Sie am Collector arbeiten, kam die Idee, ihn mit anderen Funktionen zu laden.  Ich werde nicht über alle geplanten Funktionen sprechen.  Es besteht jedoch der Wunsch, den SNMP-Trap-Collector-Server und -Kollektor in den SYSLOG-Collector zu integrieren.  Dies ist auch zur Analyse der Korrelation einiger Ereignisse erforderlich. <br><br>  Als Nebenprodukt, als kommerzielles Produkt, warum nicht eine Hardware, die sofort den Datenverkehr verwalten, Protokolle, Netzwerkstatistiken und Traps erfassen und all dies auf einfache und verständliche Weise mit Benachrichtigung über Ereignisse anzeigen kann? <br><br>  Das Projekt ist offen für die Teilnahme. <br><br>  Wenn jemand seine eigenen interessanten Entwicklungen zum Thema SYSLOG hat, schreiben Sie SNMP an die PM und erstellen Sie ein gemeinsames Produkt. <br><br>  Grundbedingungen: <br><br><ol><li>  Kein "basierend auf ...", nur ihr eigenes, einzigartiges, und wenn es ein Front-End gibt, dann ist es definitiv benutzerfreundlich!  Damit Sie ohne Tastatur arbeiten können.  Keine Java-Bremsen oder Kurven.  Zabbix und Logstash gehen auch nach Kibane.  C, Python, Perl, PHP, HTML, CSS, JS sind willkommen (sauber, ohne Frame-Workoff. Auch ohne jQuery, ja). </li><li>  Orientierung nur an modernen Betriebssystemen und Browsern.  Keine MS-DOS-Kompatibilität unter IBM XT und Internet Explorer 1.0. </li><li>  Nur Linux. </li></ol><br>  Geschäftsideen sind willkommen, aber das ist nicht der Punkt.  In dieser Phase werden technische Ideen, Verstand und Zeit benötigt.  Wenn es sich um ein würdiges Stück Eisen handelt, entscheidet selbst, wie es abgelegt und verkauft wird. <br><br>  Für eine hochintelligente Community schlage ich ein Rätsel des Sammlers vor (er selbst hat sich noch nicht entschieden): <br>  Die Anfangsschaltung ist wie in der obigen Abbildung.  Der Router ist über PPPoE und die Adresse 91.122.49.173 mit dem ISP verbunden.  Die Adresse ist bereits aus früheren Artikeln hervorgehoben.  Aber das ist gut zum Testen - es besteht ständiges Interesse. <br><br>  Folgendes hat der Sammler gezeigt: <br><br><img src="https://habrastorage.org/webt/ei/os/ad/eiosad_uscig1fx4om7ufvyq0sk.png" alt="Bild"><br><br>  Die rote Markierung ist ein Beispiel für eine NSA.  In diesem Fall ist das Zeichen, dass weder die Quelladresse noch die Zieladresse zum AP gehören.  UDP, Zielport 5000. Das Thema Trojaner ist bekannt.  Der AP hat jedoch nur eine externe PAT-Adresse (91.122.49.173).  Das heißt, ich erwarte, dass im ISP-Router-Kanal nur Pakete angezeigt werden, deren Quell- oder Zieladresse die externe Adresse des Routers ist. <br><br>  Sehen wir uns die Geschichte für heute an: <br><br><img src="https://habrastorage.org/webt/35/ma/tn/35matn1noo9jpzhinhkc_utfuzg.png" alt="Bild"><br><br>  Hier sehen wir, dass nach demselben Schema Pakete mit einer Quelladresse, aber mit unterschiedlichen Zieladressen durch unseren Collector fliegen. <br><br>  Wie dieser Verkehr ankommt, habe ich noch nicht herausgefunden.  Wenn jemand Gedanken hat, schreibe bitte in die Kommentare.  Wenn der Collector auf eine solche NSA stößt, stellt er eine Falle für diesen Verkehr, sammelt detailliertere Informationen über sein nächstes Auftreten und verbietet ihn dann.  Dies ist natürlich nur ein Fall.  Nur für mich ist es vorerst unerklärlich; <br><br>  Mit freundlichen Grüßen, <br>  R_voland. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de415473/">https://habr.com/ru/post/de415473/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de415463/index.html">HPE Superdome Flex: Ein neues Maß an Leistung und Skalierung</a></li>
<li><a href="../de415465/index.html">Wie viele Leben haben Elektrolyte, alte Kleidung und Flaschenverschlüsse?</a></li>
<li><a href="../de415467/index.html">Programmierwettbewerb: Handel (Ankündigungen)</a></li>
<li><a href="../de415469/index.html">Adblock für Radio</a></li>
<li><a href="../de415471/index.html">Erweiterung PHP und Kotlin Native. Teil eins, naiv</a></li>
<li><a href="../de415475/index.html">Analyse von Legacy-Code bei Verlust des Quellcodes: zu tun oder nicht zu tun?</a></li>
<li><a href="../de415477/index.html">Überwachung des Betriebs von Vorort-Heimsystemen: Die ersten Schritte zu einem Smart Home</a></li>
<li><a href="../de415481/index.html">Venezuela blockiert direkte Verbindungen nach Tor und verschleiert den Verkehr zu Brücken</a></li>
<li><a href="../de415483/index.html">7 häufige Fehler beim Vergleich Ihrer Server mit der Cloud</a></li>
<li><a href="../de415485/index.html">Fahren Sie Kingston A1000 - ein Krankenwagen für den Laptop?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>