<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’“ ğŸ§’ğŸ¿ ğŸï¸ Apa (tidak) yang perlu Anda ketahui untuk membuat game di Unity ğŸ¤ ğŸ” ğŸ‡ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unity adalah mesin permainan dengan ambang entri jauh dari nol (dibandingkan dengan Game Maker Studio yang sama), dan dalam artikel ini saya akan memb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apa (tidak) yang perlu Anda ketahui untuk membuat game di Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458914/"><img width="100%" src="https://habrastorage.org/webt/tf/uv/8n/tfuv8nnybrkzyxholyzuoaasafo.png"><br><br>  Unity adalah mesin permainan dengan ambang entri jauh dari nol (dibandingkan dengan Game Maker Studio yang sama), dan dalam artikel ini saya akan memberi tahu Anda masalah apa yang saya temui ketika mulai mempelajarinya dan solusi apa yang saya temukan.  Saya akan menggambarkan momen seperti itu dengan contoh permainan puzzle 2d saya untuk Android (yang saya harap akan segera dirilis di Play Market). <a name="habracut"></a><br><br>  Saya tidak berpura-pura benar, dan saya tidak mendesak Anda untuk mengulangi setelah diri Anda sendiri, jika Anda tahu cara terbaik, saya hanya menunjukkan kepada Anda bagaimana melakukannya sendiri, dan mungkin seseorang yang baru mulai mengenal Unity akan menciptakan maha karya indie gamedev-nya dengan sedikit tenaga. <br><br>  Saya seorang insinyur desain pembangkit listrik, tetapi saya selalu tertarik pada coding, dan saya akrab dengan beberapa bahasa pemrograman.  Karena itu, kami setuju untuk membuat game di Unity: <br><ul><li>  Anda perlu tahu sedikit C # atau JavaScript (setidaknya sintaks berbentuk C). <br></li></ul><br>  Semua yang akan ditulis di bawah ini bukan tutorial Unity, yang sudah cukup banyak dibiakkan di jaringan tanpa saya.  Di bawah ini akan dikumpulkan saat-saat sulit yang mungkin terjadi saat membuat proyek pertama Anda di Unity. <br><br>  Penting untuk memperingatkan bahwa skrip yang disediakan menghilangkan sebagian besar logika permainan (mewakili "rahasia dagang"), tetapi kinerjanya sebagai contoh telah diverifikasi. <br><br><h3>  Masalah Satu - Orientasi </h3><br><img align="left" width="40%" src="https://habrastorage.org/webt/-f/za/hw/-fzahwdptbht2vwe1qm4xswgqkm.png"><br>  <b>Kunci Orientasi</b> <br>  Kesulitan pertama yang muncul dalam diri saya adalah bahwa saya tidak memperhatikan mengoptimalkan antarmuka visual untuk orientasi layar.  Solusinya adalah yang paling sederhana - jika Anda tidak perlu mengubah orientasi layar untuk gameplay, lebih baik untuk memblokirnya.  Tidak perlu fleksibilitas yang berlebihan, Anda menulis game indie, bukan proyek di sisi lain dari satu juta dolar.  Mengapa banyak transisi kondisional dan perubahan jangkar jika permainan terlihat lebih baik di Portrait (misalnya).  Anda dapat mengunci orientasi layar di sini: <br>  <b>Edit&gt; Pengaturan Proyek&gt; Player</b> <br clear="all"><br clear="all"><img align="right" width="40%" src="https://habrastorage.org/webt/jb/3u/ot/jb3uotkehyw_t2pa2e__yw0n2ng.png"><br>  <b>Izin yang berbeda</b> <br>  Penting juga untuk menguji antarmuka visual pada resolusi berbeda dalam orientasi yang dipilih, dan saat pengujian, jangan lupa tentang keberadaan perangkat dengan proporsi 4: 3 (well, atau 3: 4), sehingga kita dapat menambahkan 768x1024 (atau 1024x768) dengan aman. <br><br>  <b>Posisi yang lebih baik</b> <br>  Untuk menyesuaikan posisi dan skala objek game, lebih baik menggunakan Rect Transform. <img align="left" width="40%" src="https://habrastorage.org/webt/rm/gk/ao/rmgkao3ttyvdkj3dbs8zmtxrm2o.png"><br><br clear="all"><br clear="all"><h3>  Masalah Dua - KOMUNIKASI </h3><br>  Saya memiliki masalah yang sama karena fakta bahwa saya membuat kenalan pertama dengan game dev melalui Game Maker Studio, di mana skrip adalah bagian penuh dari objek game, dan segera memiliki akses penuh ke semua komponen objek.  Unity memiliki skrip yang sama, dan hanya instance yang ditambahkan ke objek.  Berbicara secara simplistik-kiasan, skrip tidak tahu secara langsung objek mana yang sedang dieksekusi.  Oleh karena itu, ketika menulis skrip, Anda harus memperhitungkan inisialisasi antarmuka untuk bekerja dengan komponen suatu objek atau dengan komponen objek lainnya. <br><br>  <b>Kami melatih kucing</b> <br>  Di gim saya ada objek GameField, di atas panggung hanya ada satu instance, ada juga skrip dengan nama yang sama.  Objek bertanggung jawab untuk menampilkan skor game dan mereproduksi seluruh suara game, jadi menurut saya itu lebih ekonomis untuk memori (secara umum, game hanya memiliki tiga Sumber Audio - satu Background Music, dua Efek Suara lainnya).  Script menyelesaikan masalah menyimpan akun game, memilih AudioClip untuk memainkan suara, dan untuk beberapa logika game. <br><br>  Mari kita membahas bunyi lebih rinci, karena contoh ini dengan mudah menunjukkan interaksi naskah dengan komponen-komponen objek. <br><br><img width="40%" align="left" src="https://habrastorage.org/webt/2y/ll/ab/2yllabokihsyqwabiwnod3tiqyc.png">  Tentu saja, objek harus memiliki skrip GameField.cs itu sendiri dan komponen AudioSource, dalam kasus saya dua keseluruhan (nanti akan menjadi jelas mengapa). <br clear="all"><br clear="all">  Seperti yang disebutkan sebelumnya, skrip adalah "tidak tahu" bahwa objek memiliki komponen AudioSource, oleh karena itu kami mendeklarasikan dan menginisialisasi antarmuka (untuk saat ini, kami menganggap bahwa hanya ada satu AudioSource): <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioSource Sound; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ Sound = GetComponent&lt;AudioSource&gt; (); }</code> </pre> <br>  Metode GetComponent &lt;component_type&gt; () akan mengembalikan komponen pertama dari tipe yang ditentukan dari objek. <br><br>  Selain AudioSource, Anda perlu beberapa AudioClip: <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Header (</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Audio clips"</span></span></span><span class="hljs-meta">)</span></span>] [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioClip OnStart; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioClip OnEfScore; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioClip OnHighScore; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioClip OnMainTimer; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioClip OnBubbMarker; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioClip OnScoreUp;</code> </pre><br>  Selanjutnya, perintah dalam tanda kurung diperlukan untuk Inspektur`a, lebih detail di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br><img width="40%" align="left" src="https://habrastorage.org/webt/wk/t-/k7/wkt-k7spezw5hanfme5xchxexzk.png"><br><br>  Sekarang skrip di Inspektur memiliki bidang baru tempat kami menyeret bunyi yang diperlukan. <br><br clear="all"><br clear="all">  Selanjutnya, buat metode SoundPlay dalam skrip yang menggunakan AudioClip: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlaySound</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AudioClip Clip = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)</span></span>{ Sound.clip = Clip; Sound.Play (); }</code> </pre><br>  Untuk memutar suara dalam permainan, kami memanggil metode ini dengan waktu yang tepat dengan klipnya. <br><br>  Ada satu minus yang signifikan dari pendekatan ini, hanya satu suara yang dapat dimainkan pada satu waktu, tetapi selama permainan mungkin diperlukan untuk memainkan dua atau lebih suara, dengan pengecualian musik latar diputar terus-menerus. <br><br>  Untuk mencegah hiruk-pikuk, saya sarankan menghindari kemungkinan pemutaran simultan lebih dari 4-5 suara (lebih disukai maksimal 2-3), maksud saya suara pendek-urutan pertama permainan (melompat, koin, tembakan pemain ...), untuk kebisingan latar belakang lebih baik untuk membuat sumber Anda sendiri terdengar pada objek yang membuat suara ini (jika Anda membutuhkan suara 2d-3d) atau satu objek yang bertanggung jawab untuk semua kebisingan latar belakang (jika "volume" tidak diperlukan). <br><br>  Dalam gim saya, tidak perlu memainkan lebih dari dua AudioClips secara bersamaan.  Untuk menjamin pemutaran kedua suara hipotetis, saya menambahkan dua AudioSource ke objek GameField.  Untuk menentukan komponen dalam skrip, kami menggunakan metode <br><pre> <code class="cs hljs">GetComponents&lt;_&gt;()</code> </pre><br>  yang mengembalikan array semua komponen dari tipe yang ditentukan dari objek. <br><br>  Kode akan terlihat seperti ini: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AudioSource[] Sound; <span class="hljs-comment"><span class="hljs-comment">//    void Start(){ Sound = GetComponents&lt;AudioSource&gt; (); //  GetComponents }</span></span></code> </pre><br>  Sebagian besar perubahan akan memengaruhi metode PlaySound.  Saya melihat dua versi dari metode ini: "universal" (untuk sejumlah AudioSource dalam suatu objek) dan "canggung" (untuk 2-3 AudioSource, bukan yang paling elegan tetapi kurang intensif sumber daya). <br><br>  Opsi "canggung" untuk dua AudioSource (saya menggunakannya) <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlaySound</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AudioClip Clip = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Sound [<span class="hljs-number"><span class="hljs-number">0</span></span>].isPlaying) { Sound [<span class="hljs-number"><span class="hljs-number">0</span></span>].clip = Clip; Sound [<span class="hljs-number"><span class="hljs-number">0</span></span>].Play (); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Sound [<span class="hljs-number"><span class="hljs-number">1</span></span>].clip = Clip; Sound [<span class="hljs-number"><span class="hljs-number">1</span></span>].Play (); } }</code> </pre><br>  Anda dapat meregangkan menjadi tiga atau lebih AudioSource, tetapi jumlah kondisi akan melahap semua penghematan kinerja. <br><br>  Opsi "Universal" <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlaySound</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AudioClip Clip = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (AudioSource _Sound <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Sound) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!_Sound.isPlaying) { _Sound.clip = Clip; _Sound.Play (); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } }</code> </pre><br><br>  <b>Akses ke komponen asing</b> <br>  Di lapangan bermain ada beberapa contoh prefab Fishka, seperti chip game.  Dibangun seperti ini: <br><ul><li>  Objek induk dengan SpriteRenderer-nya; <ul><li>  Objek anak dengan SpriteRenderer mereka. </li></ul></li></ul><br>  Objek anak bertanggung jawab untuk menggambar tubuh chip, warnanya, elemen-elemen tambahan yang bisa berubah.  Induk menggambar batas penanda di sekitar chip (chip yang aktif harus disorot dalam permainan).  Script hanya pada objek induk.  Jadi, untuk mengelola sprite anak, skrip induk harus menentukan sprite ini.  Saya mengaturnya seperti ini - dalam skrip saya membuat antarmuka untuk mengakses anak-anak SpriteRenderer: <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Header (</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Graphic objects"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> SpriteRenderer Marker; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteRenderer Base; [Space] [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteRenderer Center_Red; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteRenderer Center_Green; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpriteRenderer Center_Blue;</code> </pre><br>  Sekarang skrip di Inspektur memiliki bidang tambahan: <br><img src="https://habrastorage.org/webt/mq/w9/kp/mqw9kpst-fen-bkdtgp_8jycpck.png"><br><br clear="all">  Menyeret dan menjatuhkan anak-anak ke bidang yang sesuai memberi kami akses ke mereka dalam skrip. <br><br clear="all">  Contoh penggunaan: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnMouseDown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//        Marker.enabled = !Marker.enabled; }</span></span></code> </pre><br><br clear="all">  <b>Memanggil skrip orang lain</b> <br>  Selain memanipulasi komponen asing, Anda juga dapat mengakses skrip objek pihak ketiga, bekerja dengan variabel Publik, metode, subkelasnya. <br><br>  Saya akan memberikan contoh pada objek GameField yang sudah terkenal. <br><br>  Skrip GameField memiliki metode publik FishkiMarkerDisabled (), yang diperlukan untuk "menghapus" penanda dari semua chip di lapangan dan digunakan dalam proses pengaturan penanda saat mengklik pada chip, karena hanya ada satu yang aktif. <br><br>  Dalam skrip Fishka.cs, â€‹â€‹SpriteRenderer Marker bersifat publik, artinya dapat diakses dari skrip lain.  Untuk melakukan ini, tambahkan deklarasi dan inisialisasi antarmuka untuk semua instance kelas Fishka dalam skrip GameField.cs (saat membuat skrip, kelas dengan nama yang sama dibuat di dalamnya) mirip dengan yang dilakukan untuk beberapa AudioSource: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Fishka[] Fishki; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ Fishki = GameObject.FindObjectsOfType (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Fishka)) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Fishka[]; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FishkiMarkerDisabled</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (Fishka _Fishka <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Fishki) { _Fishka .Marker.enabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre><br>  Dalam skrip Fishka.cs, â€‹â€‹tambahkan deklarasi dan inisialisasi antarmuka instance kelas GameField, dan ketika kita mengklik objek, kita akan memanggil metode FishkiMarkerDisabled () dari kelas ini: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GameField gf; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ gf = GameObject.FindObjectOfType (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(GameField)) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> GameField; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnMouseDown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ gf.FishkiMarkerDisabled(); Marker.enabled = !Marker.enabled; }</code> </pre><br>  Dengan demikian, Anda dapat berinteraksi antara skrip (atau lebih tepatnya kelas) dari objek yang berbeda. <br><br clear="all"><br clear="all"><h3>  Masalah Tiga - KEEPERS </h3><br>  <b>Penjaga akun</b> <br>  Begitu sesuatu seperti akun muncul di permainan, masalah langsungnya adalah penyimpanannya, baik selama pertandingan dan di luarnya, saya juga ingin menyimpan catatan untuk mendorong pemain untuk mengungguli itu. <br><br>  Saya tidak akan mempertimbangkan opsi ketika seluruh game (menu, game, penarikan akun) dibangun dalam satu adegan, karena, pertama, ini bukan cara terbaik untuk membangun proyek pertama, dan kedua, menurut saya, adegan pemuatan awal harus .  Karena itu, kami sepakat bahwa ada empat adegan dalam proyek: <br><ol><li>  loader - adegan di mana objek musik latar diinisialisasi (akan lebih banyak nanti), dan memuat pengaturan dari save; <br></li><li>  menu - adegan dengan menu; <br></li><li>  game - game scene; <br></li><li>  score - tempat skor, catatan, papan peringkat. <br></li></ol><br><img width="40%" align="right" src="https://habrastorage.org/webt/dy/yl/4t/dyyl4tkmtx6a0ijbnjiy1jgkr9q.png"><br>  <i>Catatan: Urutan pemuatan adegan diatur dalam File&gt; Pengaturan Bangun.</i> <br clear="all"><br clear="all">  Poin yang diakumulasikan selama pertandingan disimpan dalam variabel Skor dari kelas GameField.  Untuk memiliki akses ke data saat pergi ke adegan skor, buat kelas Skor publik statis, di mana kami mendeklarasikan variabel untuk menyimpan nilai dan properti untuk mendapatkan dan mengatur nilai variabel ini (metode ini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dimata</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">matai</a> oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">apocatastas</a> ): <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ScoreHolder</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _Score = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Score { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _Score; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>{ _Score = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } }</code> </pre><br>  Kelas statis publik tidak perlu ditambahkan ke objek apa pun, itu segera tersedia di setiap adegan dari skrip apa pun. <br><br>  Contoh penggunaan di kelas GameField dalam skor metode transisi adegan: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.SceneManagement; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GameField</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Score = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     ,         Scores void GotoScores(){ ScoreHolder.Score = Score; //   ScoreHolder.Score   SceneManager.LoadScene (â€œscoresâ€); } }</span></span></code> </pre><br>  Dengan cara yang sama, Anda dapat menambahkan akun rekaman ke ScoreHolder selama pertandingan, tetapi itu tidak akan disimpan saat keluar. <br><br clear="all">  <b>Penjaga pengaturan</b> <br>  Pertimbangkan contoh menyimpan nilai variabel Boolean SoundEffectsMute, tergantung pada keadaan di mana permainan memiliki efek suara atau tidak. <br><br>  Variabel itu sendiri disimpan di publik Pengaturan statis kelas: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SettingsHolder</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _SoundEffectsMute = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> SoundEffectsMute{ <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _SoundEffectsMute; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>{ _SoundEffectsMute = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } }</code> </pre><br>  Kelas ini mirip dengan ScoreHolder, Anda bahkan bisa menggabungkannya menjadi satu, tetapi menurut saya ini adalah perilaku buruk. <br><br>  Seperti yang dapat Anda lihat dari skrip, secara default _SoundEffectsMute dinyatakan salah, sehingga setiap kali game dimulai, SettingsHolder.SoundEffectsMute akan mengembalikan false terlepas dari apakah pengguna telah mengubahnya sebelum atau tidak (itu diubah menggunakan tombol pada adegan menu). <br><br clear="all">  <b>Menyimpan Variabel</b> <br>  Yang paling optimal untuk aplikasi Android adalah menggunakan metode PlayerPrefs.SetInt untuk menyimpan (untuk lebih jelasnya lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi resmi</a> ).  Ada dua opsi untuk menjaga nilai SettingsHolder.SoundEffectsMute di PlayerPrefs, sebut saja "sederhana" dan "elegan". <br><br clear="all">  Cara "sederhana" (untuk saya seperti itu) adalah pada metode OnMouseDown () dari kelas tombol yang disebutkan di atas.  Nilai yang disimpan dimuat di kelas yang sama tetapi dalam metode Mulai (): <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ButtonSoundMute</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    ,  PlayerPrefs    bool switch (PlayerPrefs.GetInt ("SoundEffectsMute")) { case 0: SettingsHolder.SoundEffectsMute = false; break; case 1: SettingsHolder.SoundEffectsMute = true; break; default: //    default SettingsHolder.SoundEffectsMute = true; break; } } void OnMouseDown(){ SettingsHolder.SoundEffectsMute = !SettingsHolder.SoundEffectsMute; //    ,  PlayerPrefs    bool if (SettingsHolder.SoundEffectsMute) PlayerPrefs.SetInt ("SoundEffectsMute", 1); else PlayerPrefs.SetInt ("SoundEffectsMute", 0); } }</span></span></code> </pre><br><br clear="all">  Metode "elegan", menurut saya, bukan yang paling benar, karena  mempersulit pemeliharaan kode, tetapi ada sesuatu di dalamnya, dan saya tidak dapat membantu tetapi membagikannya.  Fitur dari metode ini adalah bahwa penyetel properti SettingsHolder.SoundEffectsMute dipanggil pada waktu yang tidak memerlukan kinerja tinggi, dan dapat dimuat (oh, horor) menggunakan PlayerPrefs (baca-tulis ke file).  UbahPengaturan kelas statis publik: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SettingsHolder</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _SoundEffectsMute = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> SoundEffectsMute{ <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _SoundEffectsMute; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>{ _SoundEffectsMute = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_SoundEffectsMute) PlayerPrefs.SetInt (<span class="hljs-string"><span class="hljs-string">"SoundEffectsMute"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> PlayerPrefs.SetInt (<span class="hljs-string"><span class="hljs-string">"SoundEffectsMute"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); } } }</code> </pre><br>  Metode OnMouseDown dari kelas ButtonSoundMute akan menyederhanakan untuk: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnMouseDown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ SettingsHolder.SoundEffectsMute = !SettingsHolder.SoundEffectsMute; }</code> </pre><br><br clear="all">  Tidak layak memuat pengambil dengan membaca dari file, karena terlibat dalam proses kritis kinerja - dalam metode PlaySound () dari kelas GameField: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlaySound</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AudioClip Clip = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!SettingsHolder.SoundEffectsMute) { <span class="hljs-comment"><span class="hljs-comment">//      â€œâ€  (. ) if (!Sound [0].isPlaying) { Sound [0].clip = Clip; Sound [0].Play (); } else { Sound [1].clip = Clip; Sound [1].Play (); } } }</span></span></code> </pre><br><br clear="all">  Dengan cara di atas, Anda dapat mengatur penyimpanan variabel apa pun dalam game. <br><br clear="all"><br clear="all"><h3>  Masalah Kelima - SATU UNTUK SEMUA </h3><br>  <b>Musik ini akan abadi</b> <br>  Cepat atau lambat semua orang menghadapi masalah seperti itu, dan saya tidak terkecuali.  Sesuai rencana, musik latar mulai diputar bahkan dalam adegan menu, dan jika tidak dimatikan, ia memainkan menu, permainan, dan skor pada adegan tanpa gangguan.  Tetapi jika objek "memainkan" musik latar diinstal pada adegan menu, ketika Anda pergi ke adegan game, itu hancur dan suara menghilang, dan jika Anda meletakkan objek yang sama pada adegan game, maka setelah transisi musik diputar terlebih dahulu.  Solusinya ternyata adalah penggunaan metode DontDestroyOnLoad (Target objek) yang ditempatkan dalam metode Mulai () dari kelas yang skripnya memiliki objek "musik".  Untuk melakukan ini, buat skrip DontDestroyThis.cs: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">DontDestroyThis</span></span>: <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ DontDestroyOnLoad(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gameObject); } }</code> </pre><br><img width="40%" align="left" src="https://habrastorage.org/webt/ee/cj/hn/eecjhn5uyzoclq7ywnqztl1untu.png">  Agar semuanya berfungsi, objek "musikal" harus root (pada tingkat hierarki yang sama dengan kamera utama). <br clear="all"><br clear="all">  <b>Mengapa musik latar di loader</b> <br>  Tangkapan layar menunjukkan bahwa objek "musikal" terletak bukan pada adegan menu tetapi pada adegan loader.  Ini adalah ukuran yang disebabkan oleh kenyataan bahwa adegan menu dapat dimuat lebih dari sekali (setelah adegan skor, transisi ke adegan menu), dan setiap kali dimuat, objek "musikal" lain akan dibuat, dan yang lama tidak akan dihapus.  Ini dapat dilakukan seperti pada contoh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi resmi</a> , tetapi saya memutuskan untuk mengambil keuntungan dari kenyataan bahwa adegan loader dijamin untuk memuat hanya sekali. <br><br>  Mengenai hal ini, masalah utama yang saya temui ketika mengembangkan game pertama saya di Unity, sebelum mengunggah ke Play Market (saya belum mendaftarkan akun pengembang), berakhir dengan sukses. <br><br>  <b>PS</b> <br>  <i>Jika informasi itu berguna, Anda dapat mendukung penulis, dan dia akhirnya akan mendaftarkan akun pengembang Android.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id458914/">https://habr.com/ru/post/id458914/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id458904/index.html">Visualisasi jumlah kemenangan untuk tim NBA menggunakan grafik batang animasi di R</a></li>
<li><a href="../id458906/index.html">[Yekaterinburg, pengumuman] Flutteron - sebuah lokakarya tentang pengembangan Flutter</a></li>
<li><a href="../id458908/index.html">Memindai dokumen melalui jaringan</a></li>
<li><a href="../id458910/index.html">Benchmarking PostgreSQL dengan halaman Linux yang besar</a></li>
<li><a href="../id458912/index.html">Bermigrasi ke Zimbra dengan imapsync</a></li>
<li><a href="../id458916/index.html">Di bawah kap React. Kami menulis implementasi kami dari awal</a></li>
<li><a href="../id458918/index.html">Apa yang bisa Anda pelajari dari desain gim kasual</a></li>
<li><a href="../id458920/index.html">Konferensi untuk penggemar DevOps</a></li>
<li><a href="../id458922/index.html">Cara pindah dari ESXi ke KVM / LXD dan tidak kehilangan akal</a></li>
<li><a href="../id458924/index.html">Kecelakaan membantu Anda belajar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>