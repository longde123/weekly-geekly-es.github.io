<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎵 🈲 🈳 使用8base功能创建Slack应用程序 👸🏿 🚆 🕳️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Slack是团队之间内部沟通的绝佳应用程序。 我们可以通过创建和集成聊天机器人并削减允许用户与外部服务进行交互的聊天命令来轻松扩展它的功能之一。 GitHub机器人是一个非常流行且有用的优秀Slack机器人，它在通道上发布有关请求请求，提交和ish的更新。 

 在本文中，我们将创建一个Slack机...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>使用8base功能创建Slack应用程序</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466335/"><img src="https://habrastorage.org/getpro/habr/post_images/ee8/574/873/ee8574873908032aed87f5703682d618.png" alt="图片"><br><br>  Slack是团队之间内部沟通的绝佳应用程序。 我们可以通过创建和集成聊天机器人并削减允许用户与外部服务进行交互的聊天命令来轻松扩展它的功能之一。  GitHub机器人是一个非常流行且有用的优秀Slack机器人，它在通道上发布有关请求请求，提交和ish的更新。 <br><br> 在本文中，我们将创建一个Slack机器人，该机器人会在我们管理的发明的电子商务平台上创建订单时发布更新。 <br><br> 电子商务平台是使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">8base</a>创建的无服务器应用程序。 在本文中，我们将使用8base函数来侦听使用触发器的数据模型中的Create事件。 <br><br> 触发器是响应数据突变事件而触发的一种功能： <i>创建</i> ， <i>更新</i>或删除对象。  8base提供了两种类型的触发器，具体取决于开发人员是要在更改数据之前还是之后执行该功能：trigger.before和trigger.after。 <br><br><h4> 您将需要 </h4><br><ul><li> 对<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">React</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Node.js的</a>基本了解<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">。</a> 在开始之前，请确保已<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">安装</a> Node和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">npm</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">yarn</a> 。 </li><li> 我们将在项目中使用一些GraphQL查询，因此熟悉<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GraphQL很有用</a> 。 </li><li> 通过访问他们的<a href="http://">网站</a>创建一个8base帐户（如果尚未创建）。 </li></ul><br><h3> 准备8base环境 </h3><br> 创建一个帐户或登录<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://auth.8base.com/login%3Fstate%3Dg6Fo2SBpTkZiUGl6QXJ5VFVkZS16U09yanNQU3dxNlJlQlV2NqN0aWTZIC04bGxiaENJU05ha0MzVUduT2ZuU19senhlbE5VN1l1o2NpZNkgcUdIWlZ1NUN4WTVrbGl2bTI4T1BMam9wdnNZcDBiYUQ%26client%3DqGHZVu5CxY5klivm28OPLjopvsYp0baD%26protocol%3Doauth2%26response_type%3Dtoken%2520id_token%26redirect_uri%3D">8base</a> 。 对于新帐户，8base提供30天免费访问。 <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/064/449/5e8/0644495e868a6e3b11bf27df93d61080.png" alt="图片"><br>  ‍2。 登录后，转到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">数据</a>页面，然后单击“新建表”以开始配置后端。 <br><img src="https://habrastorage.org/getpro/habr/post_images/011/8e4/ce6/0118e4ce63f1da4bc98b872b1e76a260.png" alt="图片"><br>  ‍3。 加载新表后，您将看到一个图，可以开始定义字段。 接下来，创建一个名为Orders的表，该表包含以下字段： <br>  <b>-user</b> ：字段类型为表格。 在右侧部分中，选择“用户”表，然后在“关系字段名称”字段中指定“订单”。 然后选中“允许每个<b>用户</b>多个<b>订单</b> ”框。 <br><img src="https://habrastorage.org/getpro/habr/post_images/64f/24f/8d0/64f24f8d0f5f626c397708980ef822ea.png" alt="图片"><br>  -items：字段类型为JSON。 该字段包含有关用户购买的产品的信息，例如价格，名称和图像。 <br> 我们的方案很简单，应该涵盖必要的功能。 接下来，让我们设置并安装Slack App。 <br><br><h3> 创建一个松弛的应用程序 </h3><br> 首先登录您的Slack或为本指南创建一个新的Slack。 访问<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Slack API控制台</a>以创建新的Slack应用。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/870/fb8/956/870fb8956f2b3b4dabceadf602df6d0d.png" alt="图片"><br><br> 在我们虚构的电子商务平台<b>Shop Quick</b>之后调用此Slack应用程序。 <br><br> 在车间中创建应用程序之后，我们可以暂时推迟Slack应用程序并创建8base函数，该函数将在<b>Shop Quick</b>平台上侦听创建新订单的事件。 <br><br><h4> 创建一个8base函数 </h4><br>  8base平台提供了有助于创建无服务器应用程序的功能。 对于此Slack应用程序，我们需要仅使用CRUD不能实现的自定义逻辑和集成。 在我们的情况下，我们希望在创建新订单时将消息发送到Slack。 我们可以使用8base函数来实现这一点，侦听Create，Update和Delete事件，我们将使用触发器。 <br><br> 触发器是响应数据突变事件而触发的功能：创建，更新或删除对象时。 触发器有两种类型，具体取决于它们是在数据更改之前还是之后执行：trigger.before和trigger.after。 <br><br> 在本例中，我们将在创建订单后调用函数。 因此，我们必须指定Orders.create。 数据事件的可能值是create，update和delete。 <br><br><h4>  8base CLI </h4><br>  CLI 8base允许您编写自定义JavaScript或TypeScript以有效地添加逻辑，仅关注应用程序的独特之处，同时避免样板代码。 <br><br>  8base命令行界面（CLI）使您可以轻松地从终端向应用程序添加自定义服务器逻辑。 通过在终端中运行以下命令来安装CLI： <br><br><pre><code class="javascript hljs">npm install -g <span class="hljs-number"><span class="hljs-number">8</span></span>base</code> </pre> <br> 在全局安装CLI后，您需要登录以授予CLI对您的8base帐户的访问权限。 运行以下命令登录： <br>  ‍ <br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">8</span></span>base login</code> </pre><br> 运行此命令时，将显示用于CLI授权的浏览器窗口。 登录后，CLI即可访问您的8base帐户。 您可以通过运行help命令找到CLI提供的其他命令： <br><br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">8</span></span>base help</code> </pre><br> 接下来，我们通过在终端中运行以下命令，使用CLI初始化8base项目： <br><br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">8</span></span>base init shop-quick-functions</code> </pre><br> 执行命令后，将创建一个新文件夹。 文件夹结构应如下所示： <br><br><pre> <code class="javascript hljs">├── src/ | ├── function1.ts | └── function2.js ├── <span class="hljs-number"><span class="hljs-number">8</span></span>base.yml └── package.json</code> </pre> <br>  CLI会加载常规的Node项目，该项目可让您使用npm或yarn安装依赖项。 此外，8base CLI附带了预先配置好的Webpack和TypeScript，因此您可以编写JavaScript或TypeScript代码。 <br><br> 我们在8base.yml中设置了自定义功能和权限。 我们根据需要更改8base.yml文件的当前设置。 打开文件并进行以下更改： <br><br><pre> <code class="javascript hljs">functions: notifySlack: handler: code: src/notifySlack.js type: trigger.after operation: Orders.create</code> </pre> <br> 文件结构类似于任何YAML文件。 我们要看的第一个块是功能块。 我们将把我们要创建的所有函数定义都放在此块中。 例如，我们创建的notifySlack函数； 该函数具有以下属性： <br><br><ul><li>  <b>handler</b> ：notifySlack函数处理程序的相对文件路径。 </li><li>  <b>operation</b> ：该参数确定触发器应侦听的数据类型和事件。 </li><li>  <b>type</b> ：它们是在数据更改之前还是之后开始的。 有两种类型：trigger.before和trigger.after。 </li></ul><br> 下一步是创建一个处理程序文件，以在触发之后开始接收事件。 要将更新发送到Slack，我们将使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">chat.postMessage</a>方法。 消息将使用HTTP post方法发送-对chat.postMessage方法的每个请求都将由您的机器人的OAuth访问令牌签名。 访问您的应用程序的详细信息页面，单击侧边栏导航中的OAuth和权限链接。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/180/c54/94d/180c5494dcf0df2c5de56fcefbc65c2a.png" alt="图片"><br><br> 复制标记并转到8base设置页面上的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">环境变量</a>选项卡。 您的函数可以访问所有创建的环境变量。  <b>始终</b>在此处存储您的机密值和凭据，不要将其直接放在源代码数据库中。 创建一个名为SLACK_ACCESS_TOKEN的新变量，粘贴复制的令牌并保存。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/84a/b45/96b/84ab4596bc04520f2ae6da4675274dc4.png" alt="图片"><br><br> 现在，将代码添加到编辑器中。 在src目录中创建一个名为utils.js的文件。 在您喜欢的编辑器中打开文件，然后将以下内容复制到其中： <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* src/utils.js */</span></span><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sendMessage = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">order</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> message = <span class="hljs-string"><span class="hljs-string">`A new order was just created`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> messageBody = dataBuilder(order); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> body = { <span class="hljs-attr"><span class="hljs-attr">channel</span></span>: <span class="hljs-string"><span class="hljs-string">'general'</span></span>, <span class="hljs-attr"><span class="hljs-attr">attachments</span></span>: messageBody, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: message }; ‍ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Message body'</span></span>, { body }); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Sending message request'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> makeRequest(body); };‍</code> </pre> <br> 因此，sendMessage函数接受带有一个参数的订单，这是一个包含我们为Order模型创建的字段的对象。 现在我们需要使用order对象创建一条新消息，因此我们将该对象传递给一个名为dataBuilder的函数。  dataBuilder函数以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Slack附件</a>的格式返回一个对象。 <br><br> 然后，我们创建一个请求主体，其中包含要在其中发布消息的工作空间通道，从dataBuilder返回的附件，最后是文本。 接下来，由makeRequest函数发送发布消息的请求。 <br><br> 让我们创建dataBuilder函数，复制下面的片段并更新utils.js文件： <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* src/utils.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sendMessage = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">order</span></span></span><span class="hljs-function">) =&gt;</span></span> { ...}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dataBuilder = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">order</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { items } = order; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> itemSections = items.map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'section'</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: item.name, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#3AA3E3'</span></span>, <span class="hljs-attr"><span class="hljs-attr">accessory</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'image'</span></span>, <span class="hljs-attr"><span class="hljs-attr">image_url</span></span>: item.image, <span class="hljs-attr"><span class="hljs-attr">alt_text</span></span>: item.name, }, }; }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = [ { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'section'</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'mrkdwn'</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">`*There are </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${items.length}</span></span></span><span class="hljs-string"> items in the order*`</span></span>, }, }, ...itemSections, ]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data; };</code> </pre> <br>  dataBuilder函数接受订单对象，并使用商品的名称和图像为订单中的每个商品创建一个区域。 您可以使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">消息生成器</a>实时预览消息和附件的格式。 <br><br> 接下来，我们添加makeRequest函数，该函数将消息正文发送到Slack Workshop。 <br><br> 将以下代码段复制到utils.js文件中： <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* src/utils.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> fetch <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'node-fetch'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sendMessage = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">order</span></span></span><span class="hljs-function">) =&gt;</span></span> { ... }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dataBuilder = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">order</span></span></span><span class="hljs-function">) =&gt;</span></span> { ... }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> makeRequest = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> url = <span class="hljs-string"><span class="hljs-string">'https://slack.com/api/chat.postMessage'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> headers = { <span class="hljs-attr"><span class="hljs-attr">Authorization</span></span>: <span class="hljs-string"><span class="hljs-string">`Bearer </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${process.env.SLACK_ACCESS_TOKEN}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-string"><span class="hljs-string">'Content-type'</span></span>: <span class="hljs-string"><span class="hljs-string">'application/json'</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fetch(url, { <span class="hljs-attr"><span class="hljs-attr">method</span></span>: <span class="hljs-string"><span class="hljs-string">'post'</span></span>, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(data), headers, }); };</code> </pre> <br> 首先通过运行以下命令安装node-fetch软件包： <br><br><pre> <code class="javascript hljs">npm install node-fetch</code> </pre><br> 我们导入包并在makeRequest函数中使用它。 作为功​​能的一部分，我们将所有必需的标头添加到请求中。 该请求必须使用Bearer Authorization标头签名。 该令牌将从我们之前创建的环境变量中获取。 最后，我们使用fetch API返回POST请求。 <br><br> 现在，我们拥有使用机器人将消息发送到Slack Warspace所需的一切。 让我们创建一个在上面的8base.yml文件中引用的函数处理程序。 <br><br> 在src目录中创建一个名为notifySlack.js的文件，打开文件并将代码复制到其中： <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* src/notifySlack.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { sendMessage } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./utils'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (event) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Sending notification to slack'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> res = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> sendMessage(event.data); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Notification sent successfully'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (error) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(error); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">data</span></span>: event.data, }; };</code> </pre> <br> 在文件中，我们使用创建的sendMessage实用程序函数。  8base函数处理程序传递两个参数：事件和上下文。 事件对象的结构取决于函数的类型，上下文对象包含有用的属性和方法，您可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>阅读。 <br> 在我们的例子中，事件对象将包含创建的Order，该Order由两个user和item字段组成。  Order对象是事件对象数据的属性，我们将此对象传递给sendMessage函数以通知Slack。 <br><br> 函数调用包含在try / catch中，因为我们不希望任何错误导致函数结束。 最后，我们在函数末尾返回事件数据。 <br> 利用这些数据，我们可以指示邮件的主题和正文，然后使用我们创建的传输器发送邮件。 通过运行以下命令，使用8base CLI保存文件并部署功能： <br><br>  ‍ <pre> <code class="javascript hljs"># deploy <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> project root directory <span class="hljs-number"><span class="hljs-number">8</span></span>base deploy</code> </pre> <br> 成功布置功能后，您应该从终端上看到以下输出： <br>  ‍ <br><pre> <code class="javascript hljs">➜ <span class="hljs-number"><span class="hljs-number">8</span></span>base deploy deploy done. Time: <span class="hljs-number"><span class="hljs-number">15</span></span>,<span class="hljs-number"><span class="hljs-number">553</span></span> ms.</code> </pre> <br><h4> 调试功能 </h4><br> 在函数中拥有日志很重要，这样您就可以轻松调试函数并跟踪发生的事情。  8base上有一个页面，用于查看个人资料附带的所有功能。 您可以轻松查看来自每个功能的所有日志。 <br><br> 转到8base <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Dashboard</a> ，然后单击侧面菜单中的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Logic</a> 。 在逻辑页面上，您可以查看所有已布置的功能。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a2/c20/38a/1a2c2038afb3be1b65769a05cda9482b.png" alt="图片"><br> 对于特定功能，请单击<b>查看日志</b>以查看所有日志。 接下来，我们安装Slack应用程序并对其进行测试。 <br><br><h3> 安装和测试Slack应用 </h3><br> 让我们完成最后一步，然后在工作区中安装Slack应用程序。 为此，请返回Slack应用程序控制台，然后单击侧面导航栏上的“ <b>安装应用程序</b> ”。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/76e/212/b74/76e212b74709411272256b422a77f653.png" alt="图片"><br><br> 在页面上，您将看到有关添加功能或权限来安装应用程序的警告。 单击它并添加权限。 <br><br> 成功安装应用程序后，我们可以测试功能和应用程序。 转到8base <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">数据</a>页面，单击侧栏中的“订单”表。 在“订单表”查看器中，单击“ <b>数据”</b>选项卡，在这里我们可以向表中添加新行。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c0/fab/84c/7c0fab84c009f1f3620ab57e41086a55.png" alt="图片"><br><br> 在数据表中，按{+}按钮并创建一个新行。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b1a/015/2bf/b1a0152bf7dad2951b3ef2d1e0a07310.png" alt="图片"><br><br> 您可以使用以下数据填写产品字段： <br><br><pre> <code class="javascript hljs">[{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Food product"</span></span>, <span class="hljs-string"><span class="hljs-string">"image"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://static.pexels.com/photos/368893/pexels-photo-368893.jpeg"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span> }, { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"The real fruit"</span></span>, <span class="hljs-string"><span class="hljs-string">"image"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://static.pexels.com/photos/368893/pexels-photo-368883.jpeg"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span> }]</code> </pre> <br> 单击<b>添加行</b>以创建新订单。 然后转到安装了Slack App的车间，单击#general频道，您将看到来自该机器人的新消息。 <br><br> 它看起来应该像这样： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/739/025/ef1/739025ef157a8879e5a1aa63595036de.png" alt="图片"><br><br> 来自Slack频道上的8base机器人的新通知 <br><br><h3> 最后的话 </h3><br> 创建一个Slack应用程序是一个好主意。 松弛是大多数团队沟通的主要手段，可以让您掌握日常工作所需的所有信息。 <br><br> 对于本文，我们使用8base功能创建了一个简单的Slack应用程序，该应用程序发送有关系统中新订单​​的消息。 发送邮件非常简单。  Slack具有丰富的消息<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">格式</a> ，您可以使其复杂化，以便它们包含更多信息。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在此处</a>阅读有关8base功能的更多信息。 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitHub上</a>查看本文中的代码。 <br><br> 感谢您的阅读。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN466335/">https://habr.com/ru/post/zh-CN466335/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN466317/index.html">来自我的Telegram频道@pythonetc的提示和技巧，2019年8月</a></li>
<li><a href="../zh-CN466319/index.html">交易：VMware收购基于云的初创公司</a></li>
<li><a href="../zh-CN466323/index.html">我们在Cortex M0 +微控制器上创建了一个便携式平台游戏</a></li>
<li><a href="../zh-CN466329/index.html">在俄罗斯的酿酒电子地图。 设计和内容</a></li>
<li><a href="../zh-CN466333/index.html">如何为自己安排工作场所</a></li>
<li><a href="../zh-CN466337/index.html">您的功能是什么颜色？</a></li>
<li><a href="../zh-CN466339/index.html">如何在Microsoft SQL Server中使用R从Google Analytics（分析）获取数据</a></li>
<li><a href="../zh-CN466345/index.html">构造配色方案的波动方法</a></li>
<li><a href="../zh-CN466349/index.html">如何在15,000家线下商店进行A / B测试</a></li>
<li><a href="../zh-CN466355/index.html">鳄鱼会飞，但是低低（大约不带情绪但有离题的ekranoplans）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>