<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÖüèª üö° üßîüèæ RxVMS - Eine praktische Architektur f√ºr Flatteranwendungen üßëüèæ‚Äçü§ù‚Äçüßëüèª ü§∞üèø üßëüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dies ist der erste Beitrag in einer Reihe von Ver√∂ffentlichungen, in denen mein Verst√§ndnis der Anwendungsarchitektur von Flutter erl√§utert wird. Ich ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RxVMS - Eine praktische Architektur f√ºr Flatteranwendungen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448776/"><p>  Dies ist der erste Beitrag in einer Reihe von Ver√∂ffentlichungen, in denen mein Verst√§ndnis der Anwendungsarchitektur von Flutter erl√§utert wird.  Ich warne Sie - es wird <strong>sehr selbstbewusst sein</strong> . </p><br><p>  Bisher geplant: </p><br><ul><li>  <strong>Einf√ºhrung (dieser Beitrag)</strong> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dart Streams Grundlagen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RxDart: magische Transformationen von Fl√ºssen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RxVMS-Grundlagen: RxCommand und GetIt</a> </li><li>  RxVMS: Services und Manager </li><li>  RxVMS: in sich geschlossene Widgets </li><li>  Benutzerauthentifizierung mit RxVMS </li></ul><br><h2 id="predislovie">  Vorwort </h2><br><p> Ich bin seit ungef√§hr 20 Jahren in der Programmierung.  Ich habe vor 4 Jahren mit Xamarin.Forms mit der mobilen Entwicklung begonnen, da plattform√ºbergreifend die einzige Motivation f√ºr mich als Indie-Entwickler war.  Xamarin.Forms fordert Sie buchst√§blich dazu auf, das MVVM-Muster zu verwenden, da die Benutzeroberfl√§che in XAML definiert ist und Sie eine Art Ebene ben√∂tigen, um die Benutzeroberfl√§che mit dem Modell zu verkleben.  W√§hrend der Arbeit mit Xamarin traf ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ReactiveUI</a> und war buchst√§blich fasziniert von den Streams und reaktiven Erweiterungen ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rx</a> ), die meine Anwendungen zuverl√§ssiger machten. </p><br><p>  W√§hrend Xamarin.Forms MVVMs sofort einsatzbereit waren, war ich beim Wechsel zu Flutter √ºberrascht, dass es keine √§hnlichen Designmuster gab.  Ich begann, die verschiedenen vorgeschlagenen Ans√§tze zu untersuchen, aber keiner der verf√ºgbaren stellte mich vollst√§ndig zufrieden: </p><a name="habracut"></a><br><ul><li>  <strong>InheritedWidget</strong> : Ich konnte nicht nur den ge√§nderten Teil des Widget-Baums aktualisieren, daher habe ich ihn nur f√ºr den Zugriff auf die Modellklassen verwendet, in denen Dart-Streams (Dart-Streams) ver√∂ffentlicht wurden. Diese Idee wurde jedoch bald zugunsten der Vorlage <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Service Locator</a> aufgegeben </li><li> <strong>Das Scoped-Modell ist</strong> interessanter als das <code>InheritedWidget</code> , aber es hat mir nicht so viel Flexibilit√§t gegeben, wie ich es von ReactiveUI gewohnt war </li><li>  <strong>Redux</strong> war die Vorlage, die von vielen Entwicklern empfohlen wurde, die mit React Native vertraut sind.  Ich habe einen ganzen Beitrag dar√ºber, warum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ich es nicht mag.</a> </li><li>  <strong>BLoC</strong> : Wenn ich nicht bereits zu einem Zeitpunkt mit der Entwicklung meines eigenen Musters begonnen h√§tte, als BLoC Fortschritte machte, h√§tte ich es h√∂chstwahrscheinlich genommen, da es wirklich flexibel und reaktiv ist.  Was mir nicht gef√§llt, ist, dass es Stream Sinks ver√∂ffentlicht und ich nicht einfach Funktionen oder Befehle an den Ereignishandler des Widgets √ºbergeben kann.  Dar√ºber hinaus sagt Ihnen BLoC weder, wie Sie Ihre Anwendung als Ganzes strukturieren sollen, noch gibt es eine klare Definition, wie gro√ü ein bestimmtes BLoC sein sollte oder welchen Umfang es hat </li><li>  <strong>MVVM</strong> : Da ich mit ihm zusammengearbeitet habe, war dies das erste, was ich in Flutter implementieren wollte.  Aber nein!  Der Zweck von ViewModel besteht darin, die Darstellung Ihres Modells in View durch Bindungen ordnungsgem√§√ü bereitzustellen.  Flutter aktualisiert seine Modelle jedoch nicht mit neuen Daten, sondern erstellt sie immer neu, wie ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bereits beschrieben habe</a> .  Dar√ºber hinaus sollten ViewModels immer mit dem Basismodell synchronisiert werden, was zu unangenehmen Fehlern f√ºhrt. Die Realit√§t zeigt, dass der versprochene Vorteil der Wiederverwendung von ViewModels in Anwendungen fast nie erreicht wird.  Adam Pedley hat einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gro√üartigen Beitrag √ºber diese M√§ngel</a> </li></ul><br><h2 id="zhestokaya-pravda-ob-izbytochnosti-sloev">  Die harte Wahrheit √ºber Schichtredundanz </h2><br><p>  Es ist fast ein Dogma f√ºr die Idee, dass Sie Ihre Anwendung in der Entwicklung immer in mehreren Ebenen erstellen sollten, von denen jede nur Zugriff auf den Basiswert hat, da dies Ihnen Folgendes erm√∂glicht: </p><br><ul><li>  Ebenen in anderen Projekten wiederverwenden </li><li>  Ersetzen Sie transparent eine Schicht durch eine andere </li><li>  Testen vereinfachen </li></ul><br><p>  Allerdings: </p><br><ul><li>  In meiner Praxis gab es keinen Fall, in dem ich eine vollst√§ndige Wiederverwendung von Schichten beobachtete.  Wenn Sie einen universellen Code haben, der wiederverwendet werden kann, ist es sinnvoller, ihn in eine Art universelle Bibliothek zu stellen. </li><li>  Das Ersetzen ganzer Schichten ist ebenfalls nicht √ºblich.  Es ist unwahrscheinlich, dass die meisten Benutzer die Datenbank ersetzen, nachdem die Anwendung einen bestimmten Entwicklungsstand erreicht hat. Warum also eine Abstraktionsschicht hinzuf√ºgen?  Wenn einige unserer aktuellen Entwicklungstools ben√∂tigt werden, ist das Refactoring recht einfach. </li><li>  Was wirklich funktioniert, ist die Vereinfachung des Testens </li></ul><br><p>  Ich bin jedoch nicht gegen die Verwendung von Schichten, sollten wir diese Regel so r√ºcksichtslos wie zuvor befolgen.  Eine √ºberm√§√üige Verwendung f√ºhrt zu einer Zunahme des Codes und kann m√∂glicherweise zu Problemen f√ºhren, w√§hrend eine einzige Quelle f√ºr den Anwendungsstatus beibehalten wird.  Wenden Sie daher Ebenen an, wenn dies wirklich erforderlich ist und nicht auf "Best Practices" basiert. </p><br><h2 id="idealnaya-arhitektura-dlya-flutter">  Ideale Architektur f√ºr Flutter </h2><br><p>  Was erwarte ich von einer perfekten Architektur? </p><br><ul><li>  Einfaches Verst√§ndnis der Anwendung.  F√ºr mich ist dies das wichtigste Ziel.  Neue Entwickler, die an der Arbeit mit vorhandenem Code beteiligt sind, sollten die Entwicklungsstruktur leicht verstehen </li><li>  Teamentwicklung einfach </li><li>  Die Architektur selbst sollte leicht zu verstehen und zu warten sein. </li><li>  Kein Vorlagencode f√ºr Kr√ºcken in der Entwicklung </li><li>  Unterst√ºtzung f√ºr flatterreaktiven Stil </li><li>  Einfaches Debuggen </li><li>  Leistung sollte nicht leiden </li><li>  Einfache Erweiterung </li><li>  Einfache Pr√ºfung </li><li>  M√∂glichkeiten, sich auf die Anwendung zu konzentrieren, anstatt in der Quelle zu wandern </li></ul><br><h2 id="samostoyatelnost-vidzhetov">  Widget-Unabh√§ngigkeit </h2><br><p>  Aufgrund der Art zustandsloser Schnittstellenelemente sollte keine Seite / kein Widget in Flutter von anderen abh√§ngen oder diese beeinflussen.  Dies f√ºhrt zu der Idee, dass jede Seite / jedes Widget unabh√§ngig daf√ºr verantwortlich sein sollte, sich selbst und alle seine Interaktionen mit dem Benutzer anzuzeigen. </p><br><h2 id="rxvms">  Rxvms </h2><br><blockquote>  RxVMS ist eine Weiterentwicklung des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in einem fr√ºheren Beitrag</a> beschriebenen RxVAMS-Musters, bei dessen praktischer Anwendung einige Probleme identifiziert und behoben wurden. </blockquote><p>  Das aktuelle Ergebnis all dieser Gedanken ist das RxVMS- oder Rx-View-Managers-Services-Muster.  Es f√ºhrt alle oben genannten Aufgaben mit der einzigen Anforderung aus, dass Sie Rx-Threads und -Elemente verstehen m√ºssen.  Um Ihnen dabei zu helfen, widme ich den folgenden Beitrag. </p><br><p>  Hier ist ein kurzer √úberblick √ºber meine Bewerbung </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/9cf/f8a/7c1/9cff8a7c191e44a7f4f269c3b0ee97cd.png" alt="Bild"></p><br><h3 id="services-sluzhby">  Dienstleistungen </h3><br><p>  Dies sind Abstraktionen von Schnittstellen zur Au√üenwelt, die als Datenbanken, REST-APIs usw. dienen k√∂nnen.  Sie haben keinen Einfluss auf den Status der Anwendung. </p><br><h3 id="managers-menedzhery">  Manager </h3><br><p>  Manager gruppieren semantisch √§hnliche Funktionen wie Authentifizierung, Bestellverfahren und dergleichen.  Manager manipulieren den Status eines Objekts. </p><br><p>  Jede Status√§nderung (√Ñnderungen der Anwendungsdaten) sollte nur durch Manager vorgenommen werden.  In der Regel speichern Manager selbst keine Daten, au√üer in F√§llen, die f√ºr die Leistung oder Laufzeitkonstanten kritisch sind. </p><br><p>  Manager k√∂nnen als Proxy-Datenquellen dienen, falls ihre bestimmte Transformation nach einer Anforderung von Diensten erforderlich ist.  Ein Beispiel ist das Kombinieren von Daten aus zwei oder mehr Quellen zur Anzeige in einer Ansicht. </p><br><p>  Manager k√∂nnen miteinander interagieren. </p><br><h3 id="views-otobrazhenie-vyuhi">  Ansichten </h3><br><p>  In der Regel ist dies StatefullWidget oder StreamBuilder, die Daten von Managern und Diensten verwenden k√∂nnen.  Es kann eine ganze Seite oder ein Widget sein.  Ansichten speichern keinen Status und k√∂nnen sich direkt an Dienste wenden, w√§hrend diese Regel eingehalten wird. </p><br><h3 id="domain-objects-obekty-predmetnoy-oblasti">  Dom√§nenobjekte </h3><br><p>  Obwohl nicht im Diagramm enthalten, sind dies wichtige Einheiten, die das Gesch√§ftsmodell darstellen.  In anderen Mustern k√∂nnen sie in Verbindung mit der Gesch√§ftslogik zu einer separaten Schicht ( <em>Gesch√§ftsmodell</em> ) geh√∂ren.  Hier in RxVMS enthalten sie keine Logik, die den Status der Anwendung √§ndert.  Fast immer handelt es sich um einfache Datentypen - <em>einfache Datenobjekte</em> (wenn ich sie in das Muster aufgenommen h√§tte, w√ºrde es wie RxVMMS aussehen, was etwas lang ist und zu Verwirrung f√ºhrt - die VM k√∂nnte als ViewModel verwechselt werden).  Logischerweise befinden sich Dom√§nenobjekte in der Managerschicht. </p><br><p>  Die folgenden Beitr√§ge zeigen die Essenz und Interaktion dieser Elemente. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de448776/">https://habr.com/ru/post/de448776/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de448764/index.html">Uhren auf ATtiny13</a></li>
<li><a href="../de448766/index.html">Erstellen Sie ein Monorepository mit Lernbereichen f√ºr Herna und Garn</a></li>
<li><a href="../de448768/index.html">Mehrebenen-Lichtsteuerung: Ausfallsicherheit von L√∂sungen und Produkten</a></li>
<li><a href="../de448770/index.html">Aktualisierte Razor-Unterst√ºtzung in Visual Studio Code. Jetzt mit Blazor</a></li>
<li><a href="../de448774/index.html">SQL zu CSV mit DBMS_SQL</a></li>
<li><a href="../de448778/index.html">Einf√ºhrung in das Zeitreise-Debugging f√ºr Visual Studio Enterprise 2019</a></li>
<li><a href="../de448780/index.html">Was gibt Software f√ºr die Rekrutierung in Geld</a></li>
<li><a href="../de448784/index.html">Neue Funktionen f√ºr Erweiterungsautoren in Visual Studio 2019 Version 16.1</a></li>
<li><a href="../de448786/index.html">Python-Test mit Pytest. KAPITEL 3 Pytest-Vorrichtungen</a></li>
<li><a href="../de448788/index.html">Python-Test mit Pytest. Kapitel 2, Schreiben von Testfunktionen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>