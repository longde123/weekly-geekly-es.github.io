<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå∫ üë©üèº‚Äçü§ù‚Äçüë©üèª üë®‚Äç‚ù§Ô∏è‚Äçüë® La muerte de Koshchei en la lista de recomendaciones (¬øpuedes hacer que YouTube sea c√≥modo y seguro?) üë©üèº‚Äçü§ù‚Äçüë®üèΩ üßô ü§¶üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La introducci√≥n es breve: quiero hablar sobre el reproductor en l√≠nea de YouTube para Android con listas de reproducci√≥n locales, canales y recomendac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La muerte de Koshchei en la lista de recomendaciones (¬øpuedes hacer que YouTube sea c√≥modo y seguro?)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482874/"><p>  La introducci√≥n es breve: quiero hablar sobre el reproductor en l√≠nea de YouTube para Android con listas de reproducci√≥n locales, canales y recomendaciones. </p><br><p><img src="https://habrastorage.org/webt/v6/gi/jr/v6gijredqlwmps9caerjcock7hi.png"></p><br><h4 id="vstuplenie-razvernutoe">  La introducci√≥n es detallada. </h4><br><p>  Hace alg√∫n tiempo, enfrent√© exactamente el mismo problema que el autor de la maravillosa aplicaci√≥n <a href="https://habr.com/ru/post/421451/">Channel Whitelist</a> , y determin√© exactamente la misma actitud hacia ella: quiero poder darle a mi hijo una tableta o tel√©fono inteligente con dibujos animados de vez en cuando, pero no estoy completamente feliz, donde en 2-3 clics el ni√±o obtiene una lista de recomendaciones en aplicaciones est√°ndar: clientes de YouTube. </p><br><p>  Desafortunadamente, despu√©s de instalar la aplicaci√≥n Channel Whitelist, ya descubri√≥ otra falla m√°s prosaica pero a√∫n fatal: <s>NIH</s> (y, lo m√°s importante, su hijo) no encontr√≥ su interfaz muy conveniente, especialmente despu√©s de la costumbre de usar el reproductor YouTube Kids. </p><br><p>  En general, despu√©s de alg√∫n tiempo madur√© para hacer mi implementaci√≥n.  Despu√©s de un tiempo, se hizo posible poner la etiqueta en el primer lanzamiento. </p><br><p>  Caracter√≠sticas clave: </p><br><ul><li>  Agregue sus canales y listas de reproducci√≥n favoritos: se guardar√°n e indexar√°n en la base de datos local </li><li>  Desactiva los videos adicionales dentro de las listas de reproducci√≥n agregadas si no los necesitas </li><li>  La lista de recomendaciones se genera aleatoriamente solo a partir de canales y listas de reproducci√≥n agregadas a la aplicaci√≥n. </li></ul><br><p>  Las fuentes est√°n abiertas, licencia GPLv3: <a href="https://github.com/sadr0b0t/yashlang/">https://github.com/sadr0b0t/yashlang/</a> </p><br><p>  Adem√°s, una descripci√≥n general de las caracter√≠sticas principales con m√°s detalle, adem√°s de algunos detalles t√©cnicos sobre c√≥mo reproducir videos de YouTube en su aplicaci√≥n de Android sin usar API de Google y envoltorios web. </p><a name="habracut"></a><br><h3 id="na-glavnom-ekrane-i-na-ekrane-pleera-sluchaynye-rekomendacii-iz-nesluchaynyh-kanalov">  En la pantalla principal y en la pantalla del reproductor: recomendaciones aleatorias de canales no aleatorios </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/xm/4a/xq/xm4axqnezlqjwvp9wvli8jqwzlg.png" width="600"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ty/zu/p2/tyzup21qm5fqylfdbeusvaksfts.png" width="600"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/o9/ot/xv/o9otxvwiwfps_acte3fjlw-yzao.png" width="600"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/w2/tc/ko/w2tckomrdku1pbpcp0owbwlwnbq.png" width="600"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/q7/xq/nc/q7xqncnblxcnqg2mkvg2s_pfb_o.png" width="600"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/nf/vw/lx/nfvwlx-kkiwjzshn4qimtjiq65c.png" width="600"></a> </p><br><h3 id="mgnovennyy-poisk-po-lokalnoy-baze">  B√∫squeda instant√°nea de base de datos local </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/nv/p8/ga/nvp8gak5tcomv-ybxxnumk3-wfo.png" width="190"></a>  =&gt; <a href=""><img src="https://habrastorage.org/webt/v6/gi/jr/v6gijredqlwmps9caerjcock7hi.png" width="560"></a> </p><br><h3 id="dobavit-novyy-kanal-ili-pleylist">  Agregar nuevo canal o lista de reproducci√≥n </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/qc/1e/p6/qc1ep6rpukdgrbfmiwaivprjx1w.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/3c/y3/qm/3cy3qmvnqncbg-cmxfdll7xtgog.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/u8/ki/xf/u8kixf0ygibuyaahrbjjfl0obcq.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/x8/c0/kx/x8c0kx1f8tbsqov0fgu4lpejzbs.png" width="190"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/mr/er/it/mreritulfhtlbskcxchxzh-4qti.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/vo/ao/jn/voaojnv-b7kfdperixfcm618_tg.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/hu/ad/3t/huad3tbkk36d3udfwpfhgozfhfu.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/fe/2x/1p/fe2x1pyha_ccukl_mvweghasmqy.png" width="190"></a> </p><br><p>  Busque por nombre en l√≠nea o inserte una direcci√≥n conocida.  La lista de clips de canales o listas de reproducci√≥n se guarda en la base de datos local, los iconos no se almacenan en cach√©. </p><br><h3 id="dinamicheskiy-pleylist--igrat-rezultaty-poiska">  Lista de reproducci√≥n din√°mica - reproducir resultados de b√∫squeda </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/mw/bb/su/mwbbsuevmg76hrqojuw_hy25rrk.png" width="200"></a> <a href=""><img src="https://habrastorage.org/webt/zq/wi/bd/zqwibdvjxb-lu8wgkmz96mhjsye.png" width="200"></a>  =&gt; <a href=""><img src="https://habrastorage.org/webt/av/du/mq/avdumqw_ak4pjgiqpjpseqpluky.png" width="200"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/yp/u_/8h/ypu_8hv-3avu1eodjuckeuat-sg.png" width="600"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ka/lq/f7/kalqf78l73h7fraeb8lh3z5vtbe.png" width="600"></a> </p><br><p>  En las recomendaciones debajo del video solo habr√° videos que satisfagan la consulta de b√∫squeda. </p><br><p>  Del mismo modo, si abre un video desde la configuraci√≥n de la lista de reproducci√≥n, solo los clips de la misma lista de reproducci√≥n estar√°n en la lista de recomendaciones. </p><br><h3 id="pleylisty-i-kanaly-mozhno-vremenno-vyklyuchat-i-snova-vklyuchat">  Las listas de reproducci√≥n y los canales se pueden desactivar y activar temporalmente </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/tz/64/9z/tz649zfck92hi9jtpd1lbln4u1k.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/p5/om/38/p5om38mwyx6kil7qufh9jzqjbf0.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/1x/zo/n6/1xzon61-sbzhypdbvfvspnmrgsm.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/af/3d/lw/af3dlwczwlmfjkbvacyombog0fa.png" width="190"></a> </p><br><p>  <em>Tenga en cuenta que los videos de la lista de reproducci√≥n desactivada tambi√©n desaparecer√°n de los resultados de b√∫squeda, el historial de navegaci√≥n y su lista de favoritos.</em>  <em>Pero no se preocupe, aparecer√°n all√≠ nuevamente inmediatamente despu√©s de que se vuelva a activar la lista de reproducci√≥n.</em> </p><br><h3 id="vnesti-rolik-v-chernyy-spisok">  Lista negra </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/de/yg/fa/deygfamvxtgx4vexzp4b7rvclwg.png" width="200"></a> <a href=""><img src="https://habrastorage.org/webt/pc/p9/_0/pcp9_0bp_zsgfaaf9q6wetmh988.png" width="200"></a> <a href=""><img src="https://habrastorage.org/webt/go/k0/26/gok026tul7xfp8y76jtb8_ay9a0.png" width="200"></a> </p><br><p>  Un clip bloqueado no aparecer√° en las recomendaciones, en los resultados de b√∫squeda, desaparecer√° de su lista de favoritos y de su historial de navegaci√≥n.  El video seguir√° siendo visible en la configuraci√≥n de la lista de reproducci√≥n. </p><br><p>  Vea la lista negra y vuelva a habilitar los elementos bloqueados por error: <br>  <em>Configuraci√≥n&gt; men√∫ de encabezado&gt; Lista negra</em> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/6t/ew/-r/6tew-rtkldkr8wb2ps0tf9co3qk.png" width="200"></a> <a href=""><img src="https://habrastorage.org/webt/kn/6v/ke/kn6vke96-92lpkwopb58z0tlmyo.png" width="200"></a> </p><br><h3 id="lyubimye-roliki-i-istoriya-prosmotrov">  Videos favoritos e historial de reproducciones </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/qp/iy/9m/qpiy9mzysnj_q9yxcuohsochhh0.png" width="200"></a> <a href=""><img src="https://habrastorage.org/webt/f-/ka/vz/f-kavza5992wz030cq0ef6rodjk.png" width="200"></a> <a href=""><img src="https://habrastorage.org/webt/r-/wz/za/r-wzza9nzhzez17vzkbubiel528.png" width="200"></a> </p><br><p>  Los videos favoritos en la pantalla del reproductor est√°n marcados con un asterisco en la esquina superior derecha. </p><br><h3 id="kontekstnye-menyu-v-zagolovke-ekrana-i-po-dolgomu-kliku-v-galereyah-i-spiskah">  Men√∫s contextuales en el t√≠tulo de la pantalla y clic largo en galer√≠as y listas </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/3f/pg/4a/3fpg4a-zqgn0h10pft56x6p_-fi.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/ju/zg/-a/juzg-a9o97kykwzriroe_lnukt4.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/ie/fb/-7/iefb-7yqxaym3ristff37huzz4s.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/nl/uf/-w/nluf-w464pfo-fmle_qn0xm9gpk.png" width="190"></a> </p><br><p>  Copie el nombre o la direcci√≥n del video o la lista de reproducci√≥n en la pantalla de visualizaci√≥n o en cualquier lista. </p><br><h2 id="bystryy-start--dobavit-rekomendovannye-kanaly-i-pleylisty">  Inicio r√°pido: agregue canales recomendados y listas de reproducci√≥n </h2><br><p> <a href=""><img src="https://habrastorage.org/webt/bb/82/_y/bb82_ydj_6j9qrkwqhdmakps-hc.png" width="200"></a> <a href=""><img src="https://habrastorage.org/webt/nt/6m/hm/nt6mhmnlggxi3n1z43rhprgidh4.png" width="200"></a>  =&gt; <a href=""><img src="https://habrastorage.org/webt/mg/pz/by/mgpzbyxxq2u2ioeqmr2nlkuf_qg.png" width="200"></a> </p><br><p>  La aplicaci√≥n se ver√° inmediatamente como las capturas de pantalla anteriores. </p><br><p>  Los canales y listas de reproducci√≥n innecesarios se pueden desactivar o eliminar en la configuraci√≥n. </p><br><h2 id="ustanovka">  Instalaci√≥n </h2><br><p>  P√°gina del proyecto: <a href="https://github.com/sadr0b0t/yashlang/">https://github.com/sadr0b0t/yashlang/</a> <br>  en ingl√©s: <a href="">https://github.com/sadr0b0t/yashlang/blob/master/README.en.md</a> <br>  lanzamientos: <a href="https://github.com/sadr0b0t/yashlang/releases">https://github.com/sadr0b0t/yashlang/releases</a> </p><br><ul><li>  No hay Google activado y pronto no lo estar√° (Google proh√≠be las aplicaciones que omiten la API que analiza su sitio, incluida la lista blanca de canales mencionada o el reproductor NewPipe) </li><li>  Recopilar de la fuente: <a href="https://github.com/sadr0b0t/yashlang/">https://github.com/sadr0b0t/yashlang/</a> </li><li>  Descargue apk de la secci√≥n de lanzamientos: <a href="https://github.com/sadr0b0t/yashlang/releases">https://github.com/sadr0b0t/yashlang/releases</a> </li><li>  Espero que despu√©s de un tiempo aparezca en el cat√°logo de <a href="https://f-droid.org/">F-Droid</a> (la <a href="https://gitlab.com/fdroid/rfp/issues/1162">solicitud de adici√≥n parece estar aprobada</a> , pero no se ha estado llevando a cabo durante casi un mes), pero a√∫n no </li></ul><br><p>  Tenga en cuenta que el cambio entre diferentes versiones de diferentes fuentes en el mismo dispositivo no funcionar√° debido a las diferentes firmas del archivo apk, antes de instalar la versi√≥n de una nueva fuente, primero deber√° eliminar la versi√≥n instalada junto con la cach√© de la lista de reproducci√≥n de datos y el historial de navegaci√≥n (o averiguar c√≥mo estos transferir datos). </p><br><h2 id="tehnicheskie-detali">  Detalles t√©cnicos </h2><br><p>  No requiere una cuenta de Google / YouTube, solo se necesita Internet, utiliza bibliotecas: </p><br><ul><li>  <a href="https://github.com/TeamNewPipe/NewPipeExtractor/">NewPipeExtractor</a> para recibir datos del servicio de YouTube y </li><li>  <a href="https://exoplayer.dev/">ExoPlayer</a> para reproducir videos. </li></ul><br><p>  C√≥digo abierto, licencia GPLv3 gratuita. </p><br><p>  <em>Pregunta: ¬øEs legal analizar sitios sin permiso (o con una prohibici√≥n expl√≠cita) de los autores?</em>  <em><a href="https://channelwhitelist.tilda.ws/">Google elimina las aplicaciones de Google</a> que no usan sus API, pero analizan sus sitios, porque</em>  <em>violan su acuerdo de usuario.</em> <br>  <em>respuesta: por supuesto, legalmente, depende de usted qu√© herramienta utilizar para leer la informaci√≥n disponible p√∫blicamente.</em>  <em>Adem√°s: la <a href="https://habr.com/ru/company/globalsign/blog/466911/">Corte de EE. UU. Ha legalizado por completo el desguace de sitios web y ha prohibido que sea t√©cnicamente impedido</a> , pero Gul puede tener una opini√≥n diferente, personalmente no deseo ir a la corte estadounidense para convencerlos.</em> </p><br><h2 id="nemnogo-koda">  Un poco de c√≥digo </h2><br><p>  La biblioteca <a href="https://github.com/TeamNewPipe/NewPipeExtractor/">NewPipeExtractor</a> es un proyecto auxiliar del reproductor <a href="https://github.com/TeamNewPipe/NewPipe">NewPipe</a> que le permite descargar una lista de clips para un canal espec√≠fico o lista de reproducci√≥n, descargar informaci√≥n detallada sobre un video conocido (lo que est√° visible en la p√°gina web del video), recibir la direcci√≥n del √≠cono del video y tambi√©n recibir la direcci√≥n de la transmisi√≥n del video. </p><br><p>  El c√≥digo para descargar la lista de reproducci√≥n es un poco engorroso, por lo que no lo dar√© aqu√≠, a nadie que est√© interesado, mira la fuente, b√°sicamente esta es la clase <a href="">ContentLoader</a> . </p><br><p>  Veamos c√≥mo obtener la direcci√≥n de la transmisi√≥n de video en la direcci√≥n de la p√°gina p√∫blica del video y reproducirla en el reproductor. </p><br><p>  Conectar biblioteca a <br>  <a href="https://github.com/sadr0b0t/yashlang/blob/master/app/build.gradle">app / build.gradle</a> </p><br><pre><code class="json hljs">dependencies { ... // NewPipe: youtube parser // https://github.com/TeamNewPipe/NewPipeExtractor implementation <span class="hljs-string"><span class="hljs-string">"com.github.TeamNewPipe:NewPipeExtractor:v0.17.4"</span></span> ... }</code> </pre> <br><p>  Es curioso que despu√©s de eso todav√≠a no se pueda usar, porque  ejemplos jurar√°n en la clase Downloader que falta.  Se puede copiar al proyecto desde el cat√°logo de pruebas autom√°ticas <a href="">NewPipeExtractor / extractor / src / test / java / org / schabi / newpipe / Downloader.java</a> - funciona para la versi√≥n 0.17.4 (parece que en la versi√≥n m√°s reciente de la biblioteca esta parte se rehizo, pero todav√≠a necesita verificar). </p><br><p>  Obtenga la direcci√≥n de la transmisi√≥n de video en la direcci√≥n de la p√°gina de video en el sitio web de YouTube: </p><br><p>  <a href="">app / src / main / java / su / sadrobot / yashlang / controller / ContentLoader.java</a> </p><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extractYtStreamUrl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String ytVidUrl)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ExtractionException, IOException </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// https://github.com/TeamNewPipe/NewPipeExtractor/blob/dev/extractor/src/test/java/org/schabi/newpipe/extractor/services/youtube/YoutubeStreamExtractorDefaultTest.java NewPipe.init(Downloader.getInstance(), new Localization("GB", "en")); final YoutubeStreamExtractor extractor = (YoutubeStreamExtractor) YouTube .getStreamExtractor(ytVidUrl); extractor.fetchPage(); final String streamUrl = extractor.getVideoStreams().size() &gt; 0 ? extractor.getVideoStreams().get(0).getUrl() : null; // for (final VideoStream stream : extractor.getVideoStreams()) { // stream.getUrl(); // } return streamUrl; }</span></span></code> </pre> <br><p>  La direcci√≥n de video de ytVidUrl puede ser la direcci√≥n p√∫blica de la p√°gina de cualquier video en el sitio web de YouTube, por ejemplo <a href="https://www.youtube.com/watch%3Fv%3Dpd2RlatmNRk">https://www.youtube.com/watch?v=pd2RlatmNRk</a> </p><br><p>  El jugador ser√° <a href="https://exoplayer.dev/">ExoPlayer</a> de Google mismo.  Este no es un contenedor web sobre YouTube, sino un reproductor real integrado para reproducir cualquier video, bastante flexible y personalizable.  Incluyendo la capacidad de reproducir transmisiones de video de YouTube, si especifica la direcci√≥n correcta.  Acabamos de recibir la direcci√≥n de la transmisi√≥n, as√≠ que veremos c√≥mo enviarla al reproductor. </p><br><p>  Conecte la biblioteca al <a href="https://github.com/sadr0b0t/yashlang/blob/master/app/build.gradle">proyecto app / build.gradle</a> : </p><br><pre> <code class="json hljs">dependencies { ... // google Exoplayer // https://github.com/google/ExoPlayer // https://exoplayer.dev/ implementation 'com.google.android.exoplayer:exoplayer:<span class="hljs-number"><span class="hljs-number">2.10</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span>' ... }</code> </pre> <br><p>  No consideraremos todos los matices de colocar el componente del reproductor en la pantalla de la aplicaci√≥n (puede ver los ejemplos en el sitio web del proyecto o en el c√≥digo), solo veremos c√≥mo comenzar a reproducir videos de YouTube en el reproductor en la direcci√≥n anterior: </p><br><p>  <a href="">app / src / main / java / su / sadrobot / yashlang / WatchVideoActivity.java</a> </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">playVideoStream</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String streamUrl, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> seekTo)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (streamUrl == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    ,    videoPlayerView.getPlayer().stop(true); } else { // https://exoplayer.dev/ // https://github.com/google/ExoPlayer final Uri mp4VideoUri = Uri.parse(streamUrl); final MediaSource videoSource = new ProgressiveMediaSource.Factory(videoDataSourceFactory) .createMediaSource(mp4VideoUri); //     ,    if (videoPlayerView.getPlayer().getPlaybackState() != Player.STATE_ENDED) { //       ,      ,  //  ,     STATE_ENDED,     //  . //    getPlayWhenReady()  true,    . // https://github.com/google/ExoPlayer/issues/2272 videoPlayerView.getPlayer().setPlayWhenReady(false); } // Prepare the player with the source. ((SimpleExoPlayer) videoPlayerView.getPlayer()).prepare(videoSource); //        // (  -  -  ,      //  seek  , ,    -   seek   ) // Exoplayer plays new Playlist from the beginning instead of provided position // https://github.com/google/ExoPlayer/issues/4375 // How to load stream in the desired position? #2197 // https://github.com/google/ExoPlayer/issues/2197 //     duration   ,     //if(seekTo &gt; 0 &amp;&amp; seekTo &lt; videoPlayerView.getPlayer().getDuration()) { if (seekTo &gt; 0) { //  5   videoPlayerView.getPlayer().seekTo(seekTo - 5000 &gt; 0 ? seekTo - 5000 : 0); } videoPlayerView.getPlayer().setPlayWhenReady(true); } }</span></span></code> </pre> <br><h2 id="izvestnye-problemy">  Problemas conocidos </h2><br><ul><li>  No reproducir√° videos con restricciones de edad que requieran un inicio de sesi√≥n en su cuenta de Google / YouTube </li></ul><br><p>  por ejemplo: <a href="https://www.youtube.com/watch%3Fv%3DhooaKxdXbfM">Ilya Muromets, Mosfilm Film Concern</a> , <a href="https://www.youtube.com/watch%3Fv%3D2UoO2t536Ko">Ruslan and Lyudmila film series 1 / Ruslan and Lyudmila film 1, Mosfilm Film Concern</a> </p><br><p>  <em>Consejo: agregue dichos videos a la lista negra o solicite al autor del video que elimine la restricci√≥n establecida por error.</em> </p><br><ul><li>  Algunos videos de transmisi√≥n para los cuales el servicio devuelve duraci√≥n cero no se reproducir√°n (para tales videos, la duraci√≥n en las listas y la galer√≠a est√° marcada como "[dur undef]") </li></ul><br><p>  Por ejemplo: ¬° <a href="https://www.youtube.com/watch%3Fv%3DfwzpCVt2ExY">Espera un minuto!</a>  <a href="https://www.youtube.com/watch%3Fv%3DfwzpCVt2ExY">Todos los temas Soyuzmultfilm HD (Dibujos animados para ni√±os), Dibujos animados Soyuzmultfilm Studios</a> , <a href="https://www.youtube.com/watch%3Fv%3DXK1_9fw5CwA">Mejores dibujos animados Soyuzmultfilm, Dibujos animados Studios Soyuzmultfilm</a> </p><br><p>  <em>Consejo: Agregue estos videos a la lista negra.</em> </p><br><ul><li>  Es posible que los videos accesibles solo a trav√©s de enlaces directos no entren en la lista de reproducci√≥n local, incluso si descarga todos los videos del usuario </li></ul><br><p>  por ejemplo: <a href="https://www.youtube.com/watch%3Fv%3DvwBKEKqLOLY">Taming of Fire 1 series, Mosfilm Film Concern</a> </p><br><ul><li><p>  Si ve un video p√∫blico que no requiere inicio de sesi√≥n, se reproduce en el navegador, pero no se reproduce en el reproductor, env√≠e un informe de error (es muy posible que el problema ya se haya solucionado en la nueva versi√≥n de <em>NewPipeExtractor</em> y solo necesita actualizar el ensamblaje con esta versi√≥n, <a href="https://github.com/sadr0b0t/yashlang/issues/1">por ejemplo</a> ). </p><br></li><li><p>  La interfaz puede ralentizarse cuando Internet es lento (pero no est√° apagado) </p><br></li></ul><br><h2 id="v-itoge">  Al final </h2><br><p>  El hijo pas√≥ de una tableta a un televisor inteligente Samsung, que no sabe c√≥mo ejecutar aplicaciones de Android.  Por lo tanto, el mejor control parental sigue siendo personal. </p><br><p>  Pero la aplicaci√≥n result√≥ ser lo suficientemente conveniente para comenzar a usarla yo mismo.  La primera impresi√≥n de las primeras versiones de trabajo fue en otro mundo.  Todo el contenido se descarga de YouTube, pero ya no es YouTube, sino algo m√°s, seguro y controlado, como si le quitara un scolopendra del ojo y lo pusiera en un frasco de vidrio.  Y est√° en las recomendaciones. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/482874/">https://habr.com/ru/post/482874/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../482862/index.html">¬øHay un GameDev en Sakhalin? 1.V</a></li>
<li><a href="../482864/index.html">Videovigilancia en el hogar. Esquema de mantener un archivo de video sin un registrador casero</a></li>
<li><a href="../482866/index.html">¬øVale la pena comprar Bitcoin el pr√≥ximo a√±o y cu√°nto costar√°?</a></li>
<li><a href="../482870/index.html">C√≥mo compr√© una computadora port√°til bloqueada en eBay y trat√© de hacer mi AntiTheft basado en IntelAMT</a></li>
<li><a href="../482872/index.html">Pol√≠gonos otro mundo</a></li>
<li><a href="../482876/index.html">C√°lculo del costo de producci√≥n de electricidad solar para las necesidades propias de un hogar en el centro de Europa</a></li>
<li><a href="../482878/index.html">C√≥mo busqu√© la definici√≥n de "producto"</a></li>
<li><a href="../482882/index.html">Motor como freno electromagn√©tico</a></li>
<li><a href="../482884/index.html">Lecci√≥n para la noche: escribir resaltado de sintaxis</a></li>
<li><a href="../482886/index.html">An√°lisis de habra: ¬øes importante la duraci√≥n de la publicaci√≥n?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>