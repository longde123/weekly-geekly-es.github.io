<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏖️ 🌘 🤙🏼 L'avenir de Kubernetes est avec les machines virtuelles 👲🏿 🤾 🥩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dire la fortune 

 Kubernetes a déjà joué un rôle important dans mon travail, et à l'avenir, il deviendra encore plus important. Mais 2018 touche à sa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>L'avenir de Kubernetes est avec les machines virtuelles</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434756/">  <b>Dire la fortune</b> <br><br>  Kubernetes a déjà joué un rôle important dans mon travail, et à l'avenir, il deviendra encore plus important.  Mais 2018 touche à sa fin, alors oubliez la modestie et faites une prédiction audacieuse: <br><blockquote>  <b>L'avenir de Kubernetes, ce sont les machines virtuelles, pas les conteneurs</b> </blockquote>  Selon l'horoscope chinois, 2018 était l'année du chien, mais dans la technologie, c'était l'année de Kubernetes.  Nombreux sont ceux qui découvrent à présent cette technologie révolutionnaire, et les services informatiques du monde entier tentent de développer une «stratégie Kubernetes» [1].  Certaines organisations ont déjà transféré d'importantes charges de travail à Kubernetes. <br><br>  <i>[1] Si vous essayez de développer une stratégie Kubernetes, vous avez déjà échoué, mais c'est un sujet pour un autre article.</i> <br><a name="habracut"></a><br>  En d'autres termes, il y a beaucoup de gens chez Kubernetes à chaque étape du cycle de sensation Gartner.  Certains sont coincés dans un creux de déception ou noyés dans un gouffre de désespoir. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2d1/1c3/5cc/2d11c35cc85a9c572e535142bf018277.png"><br>  <i><font color="gray">Jeremykemp, <a href="">Wikipedia</a> .</font></i>  <i><font color="gray"><a href="">Creative Commons CC BY-SA 3.0</a></font></i> <br><br>  Je suis un grand fan des conteneurs et je ne dirai pas que les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">conteneurs sont morts</a> .  En 2013, Docker nous a offert un shell pour les conteneurs Linux: une nouvelle façon étonnante de créer, empaqueter, partager et déployer des applications.  Il est apparu au bon moment, car nous avons commencé à prendre au sérieux la livraison continue.  Leur modèle est devenu idéal pour la chaîne de livraison et a contribué à l'émergence de la plateforme PaaS puis CaaS. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/330/55a/94d/33055a94d32a0087206df9a0f9cc06f1.png"><br><br>  Les ingénieurs de Google ont vu que la communauté informatique était enfin prête pour les conteneurs.  Google utilise des conteneurs depuis très longtemps et, dans un sens, ils peuvent être considérés comme les inventeurs de la conteneurisation.  Ils ont commencé à développer Kubernetes.  Comme vous le savez maintenant, il s'agit de la réincarnation gratuite de la propre plateforme Borg de Google. <br><br>  Bientôt, le support de Kubernetes a été fourni par tous les grands clouds (GKE, AKS, EKS).  Les services sur site ont également rapidement augmenté les plateformes basées sur Kubernetes (Pivotal Container Service, Openshift, etc.). <br><br><h1>  Multi-location souple </h1><br>  Il était nécessaire de résoudre un problème ennuyeux, qui peut être considéré comme un manque de conteneurs ... il s'agit de la multi-location. <br><br>  Les conteneurs Linux n'ont pas été créés en tant que sandbox sécurisés (comme les zones Solaris ou les prisons FreeBSD).  Au lieu de cela, ils ont construit sur un modèle de noyau commun qui utilise les fonctions du noyau pour fournir une isolation de processus de base.  Comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dirait Jesse Frazel</a> , «les conteneurs ne sont pas la vraie chose». <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1015407561187655680"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  Cette situation est aggravée par le fait que la plupart des composants de Kubernetes ne connaissent pas les locataires.  Bien sûr, vous avez des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">espaces de noms</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pod</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des politiques de sécurité</a> , mais il n'y a rien de tel dans l'API.  Ainsi que dans les composants internes tels que <code>kubelet</code> ou <code>kube-proxy</code> .  Cela conduit au fait que Kubernetes met en œuvre le modèle du «loyer modéré» (location modérée). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eef/e54/556/eefe545564f03e8b6813e8bc83ed0188.png"><br>  <i><font color="gray">Architecture de Kubernetes</font></i> <br><br>  Les abstractions s'infiltrent davantage.  Une plate-forme au-dessus des conteneurs hérite de nombreux aspects de la location modérée.  Les plates-formes au-dessus des machines virtuelles multi-locataires héritent de ce bail sévère (VMware, Amazon Web Services, OpenStack, etc.). <br><br>  Le modèle de location souple de Kubernetes place les fournisseurs de services et les distributions dans une position étrange.  Le cluster Kubernetes lui-même est en train de devenir une ligne de «location ferme».  Même au sein d'une même organisation, il existe de nombreuses raisons d'exiger un loyer ferme entre les utilisateurs (ou applications).  Étant donné que les clouds publics fournissent Kubernetes entièrement géré en tant que service, les clients peuvent facilement prendre leur propre cluster et utiliser la limite du cluster comme point d'isolement. <br><br>  Certaines distributions Kubernetes, telles que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pivotal Container Service (PKS)</a> , sont bien conscientes de ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">problème de location</a> et utilisent un modèle similaire, fournissant le même Kubernetes qu'un service qui peut être obtenu à partir d'un cloud public, mais dans votre propre centre de données. <br><br>  Cela a conduit à l'émergence du modèle «plusieurs grappes», au lieu de «une grande grappe commune».  Souvent, les clients GKE de Google ont déployé des dizaines de clusters Kubernetes pour plusieurs équipes.  Souvent, chaque développeur obtient son propre cluster.  Ce comportement génère un nombre choquant d'instances (Kubesprawl). <br><br>  Alternativement, les opérateurs élèvent leurs propres clusters Kubernetes dans leurs propres centres de données pour effectuer des travaux supplémentaires pour gérer plusieurs clusters, ou conviennent de louer à bail un ou deux grands clusters. <br><br>  En règle générale, le plus petit cluster est composé de quatre machines (ou machines virtuelles).  Un (ou trois pour HA) pour Kubernetes Master, trois pour Kubernetes Workers.  Beaucoup d'argent est dépensé pour des systèmes qui, pour la plupart, sont inactifs. <br><br>  Par conséquent, vous devez en quelque sorte déplacer Kubernetes vers une multi-location rigide.  La communauté Kubernetes est bien consciente de ce besoin.  Un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">groupe de travail à baux multiples a</a> déjà été formé.  Elle travaille dur sur cette question, et ils ont plusieurs modèles et suggestions sur la façon de travailler avec chaque modèle. <br><br>  Jesse Frazel a écrit un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">blog</a> sur ce sujet, et c'est génial parce qu'elle est beaucoup plus intelligente que moi, donc je peux me référer à elle et me sauver de dix années d'études intenses, en essayant d'atteindre son niveau.  Si vous n'avez pas lu cet article, lisez-le maintenant. <br><br><h1>  Juste de très petites machines virtuelles optimisées pour la vitesse ... </h1><br><blockquote>  Kata Containers est un projet open source et une communauté travaillant à créer une implémentation standard de machines virtuelles légères qui ressemblent et fonctionnent comme des conteneurs mais offrent une isolation de la charge de travail et des avantages de sécurité pour les machines virtuelles. </blockquote>  Jesse suggère d'utiliser la technologie de conteneur VM, comme les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">conteneurs Kata</a> .  Ils offrent une isolation de niveau VM, mais fonctionnent comme des conteneurs.  Cela permet à Kubernetes de donner à chaque "locataire" (nous supposons que le locataire dans l'espace de noms) son propre ensemble de services système Kubernetes s'exécutant dans des conteneurs de VM imbriqués (le conteneur de VM à l'intérieur de la machine virtuelle fournie par l'infrastructure IaaS). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/157/3ce/1b6/1573ce1b64d7607f5cb9ca0d09caef6e.png"><br>  <i><font color="gray">Image de Jesse Frasel: multi-location à Kubernetes</font></i> <br><br>  Il s'agit d'une élégante solution multi-location Kubernetes.  Sa proposition va encore plus loin pour que Kubernetes utilise des conteneurs de VM imbriqués pour les charges de travail (Pods) fonctionnant sur Kubernetes, ce qui permet une augmentation significative de l'utilisation des ressources. <br><br>  Il nous reste au moins une optimisation.  Créez le bon hyperviseur pour le fournisseur d'infrastructure sous-jacent ou le fournisseur de cloud.  Si le conteneur VM est une abstraction de premier niveau fournie par IaaS, nous augmenterons encore l'utilisation des ressources.  Le nombre minimum de VM pour démarrer un cluster Kubernetes est réduit à une machine (ou trois pour HA) pour héberger le système de gestion Kubernetes, qui est disponible pour le "superutilisateur". <br><br><h1>  Hébergement multiclient optimisé en termes de ressources (coût) </h1><br>  Un déploiement Kubernetes avec deux espaces de noms et plusieurs applications en cours d'exécution ressemblera à ceci: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ffc/4e2/d7f/ffc4e2d7ffb239fa1e0822e3d20afcd2.png"><br><blockquote>  Remarque: il existe d'autres charges sur la même infrastructure IaaS.  Étant donné qu'il s'agit de conteneurs de VM, ils ont le même niveau d'isolement que les VM de cloud conventionnelles.  Par conséquent, ils peuvent travailler sur le même hyperviseur avec un risque minimal. </blockquote>  Au départ, aucune infrastructure n'est déployée dans le cloud, donc pour un superutilisateur les coûts sont nuls. <br><br>  Un superutilisateur demande un cluster Kubernetes à partir du cloud.  Le fournisseur de services cloud crée une machine virtuelle avec un conteneur (ou trois pour HA) qui exécute les principales API Kubernetes et les services système.  Le superutilisateur peut déployer des modules dans l'espace de noms du système ou créer de nouveaux espaces pour déléguer l'accès à d'autres utilisateurs. <br><br>  Le superutilisateur crée deux espaces de noms <code>foo</code> et <code>bar</code> .  Kubernetes demande deux conteneurs de VM à partir du cloud pour chaque niveau de gestion des espaces de noms (Kubernetes API et System Services).  Le superutilisateur délègue l'accès à ces espaces de noms à certains utilisateurs, chacun d'eux lance des charges de travail (modules), et les conteneurs VM demandent ces conteneurs pour ces charges de travail. <br><br>  À toutes les étapes, le superutilisateur ne paie que pour les ressources réellement consommées.  Le fournisseur de services cloud contrôle ces ressources et elles sont disponibles pour tout utilisateur de cloud. <br><br><h1>  Je ne dis rien de nouveau ... </h1><br>  Les fournisseurs de services cloud travaillent déjà dans cette direction.  Vous pouvez le vérifier en regardant les événements de la communauté (Amazon a peut-être déjà fait cela tranquillement avec Fargate). <br><br>  Le premier conseil est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Virtual Kubelet</a> , un outil open source conçu pour se déguiser en kubelet.  Il connecte Kubernetes à d'autres API, ce qui permet à Kubernetes de demander des conteneurs de VM à un planificateur standard dans le cloud. <br><br>  D'autres indices sont un grand nombre de nouvelles technologies pour la conteneurisation de VM, comme les conteneurs Kata déjà mentionnés, ainsi que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Firecracker</a> d'Amazon et le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">conseiller</a> de Google. <br><br><h1>  Conclusion </h1><br>  Si vous implémentez correctement des améliorations dans le modèle d'un loyer dur, vous trouverez la virtualisation Holy Graal of Kubernetes.  Isolation complète des charges de travail et sans frais supplémentaires. <br><br>  Si vous n'utilisez pas le cloud public, vous bénéficiez toujours des avantages d'une utilisation plus élevée des ressources, ce qui est payant avec des exigences matérielles plus faibles. <br><br>  Espérons que VMware et OpenStack prêtent attention et libèrent des hyperviseurs basés sur des conteneurs de VM légers et les implémentations correspondantes de Virtual Kubelet. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434756/">https://habr.com/ru/post/fr434756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434742/index.html">Partie 2: Utilisation des contrôleurs UDB PSoC de Cypress pour réduire le nombre d'interruptions dans une imprimante 3D</a></li>
<li><a href="../fr434744/index.html">Samsung SSD 860 QVO 1 TB et 4 TB: le premier consommateur SATA QLC (2 parties)</a></li>
<li><a href="../fr434746/index.html">BLE sous microscope 4</a></li>
<li><a href="../fr434750/index.html">Comment prendre le contrôle de votre infrastructure réseau. Chapitre deux Nettoyage et documentation</a></li>
<li><a href="../fr434752/index.html">Robomoroz: l'avenir du personnage principal de la nouvelle année</a></li>
<li><a href="../fr434758/index.html">Guide du modérateur Facebook: plus de 1 400 pages de diapositives contradictoires</a></li>
<li><a href="../fr434760/index.html">Résumé des nouvelles de PostgreSQL. Numéro du Nouvel An (raccourci) numéro 13</a></li>
<li><a href="../fr434762/index.html">Notes d'un phytochimiste. Banane verte, ou n'oubliez pas de nourrir le microbiote</a></li>
<li><a href="../fr434770/index.html">Énergie renouvelable: les mots et leur signification</a></li>
<li><a href="../fr434774/index.html">5 leçons que nous avons apprises en écrivant plus de 300 000 lignes de code d'infrastructure</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>