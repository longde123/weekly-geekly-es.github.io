<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ–ï¸ ğŸŒ˜ ğŸ¤™ğŸ¼ L'avenir de Kubernetes est avec les machines virtuelles ğŸ‘²ğŸ¿ ğŸ¤¾ ğŸ¥©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dire la fortune 

 Kubernetes a dÃ©jÃ  jouÃ© un rÃ´le important dans mon travail, et Ã  l'avenir, il deviendra encore plus important. Mais 2018 touche Ã  sa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>L'avenir de Kubernetes est avec les machines virtuelles</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434756/">  <b>Dire la fortune</b> <br><br>  Kubernetes a dÃ©jÃ  jouÃ© un rÃ´le important dans mon travail, et Ã  l'avenir, il deviendra encore plus important.  Mais 2018 touche Ã  sa fin, alors oubliez la modestie et faites une prÃ©diction audacieuse: <br><blockquote>  <b>L'avenir de Kubernetes, ce sont les machines virtuelles, pas les conteneurs</b> </blockquote>  Selon l'horoscope chinois, 2018 Ã©tait l'annÃ©e du chien, mais dans la technologie, c'Ã©tait l'annÃ©e de Kubernetes.  Nombreux sont ceux qui dÃ©couvrent Ã  prÃ©sent cette technologie rÃ©volutionnaire, et les services informatiques du monde entier tentent de dÃ©velopper une Â«stratÃ©gie KubernetesÂ» [1].  Certaines organisations ont dÃ©jÃ  transfÃ©rÃ© d'importantes charges de travail Ã  Kubernetes. <br><br>  <i>[1] Si vous essayez de dÃ©velopper une stratÃ©gie Kubernetes, vous avez dÃ©jÃ  Ã©chouÃ©, mais c'est un sujet pour un autre article.</i> <br><a name="habracut"></a><br>  En d'autres termes, il y a beaucoup de gens chez Kubernetes Ã  chaque Ã©tape du cycle de sensation Gartner.  Certains sont coincÃ©s dans un creux de dÃ©ception ou noyÃ©s dans un gouffre de dÃ©sespoir. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2d1/1c3/5cc/2d11c35cc85a9c572e535142bf018277.png"><br>  <i><font color="gray">Jeremykemp, <a href="">Wikipedia</a> .</font></i>  <i><font color="gray"><a href="">Creative Commons CC BY-SA 3.0</a></font></i> <br><br>  Je suis un grand fan des conteneurs et je ne dirai pas que les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">conteneurs sont morts</a> .  En 2013, Docker nous a offert un shell pour les conteneurs Linux: une nouvelle faÃ§on Ã©tonnante de crÃ©er, empaqueter, partager et dÃ©ployer des applications.  Il est apparu au bon moment, car nous avons commencÃ© Ã  prendre au sÃ©rieux la livraison continue.  Leur modÃ¨le est devenu idÃ©al pour la chaÃ®ne de livraison et a contribuÃ© Ã  l'Ã©mergence de la plateforme PaaS puis CaaS. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/330/55a/94d/33055a94d32a0087206df9a0f9cc06f1.png"><br><br>  Les ingÃ©nieurs de Google ont vu que la communautÃ© informatique Ã©tait enfin prÃªte pour les conteneurs.  Google utilise des conteneurs depuis trÃ¨s longtemps et, dans un sens, ils peuvent Ãªtre considÃ©rÃ©s comme les inventeurs de la conteneurisation.  Ils ont commencÃ© Ã  dÃ©velopper Kubernetes.  Comme vous le savez maintenant, il s'agit de la rÃ©incarnation gratuite de la propre plateforme Borg de Google. <br><br>  BientÃ´t, le support de Kubernetes a Ã©tÃ© fourni par tous les grands clouds (GKE, AKS, EKS).  Les services sur site ont Ã©galement rapidement augmentÃ© les plateformes basÃ©es sur Kubernetes (Pivotal Container Service, Openshift, etc.). <br><br><h1>  Multi-location souple </h1><br>  Il Ã©tait nÃ©cessaire de rÃ©soudre un problÃ¨me ennuyeux, qui peut Ãªtre considÃ©rÃ© comme un manque de conteneurs ... il s'agit de la multi-location. <br><br>  Les conteneurs Linux n'ont pas Ã©tÃ© crÃ©Ã©s en tant que sandbox sÃ©curisÃ©s (comme les zones Solaris ou les prisons FreeBSD).  Au lieu de cela, ils ont construit sur un modÃ¨le de noyau commun qui utilise les fonctions du noyau pour fournir une isolation de processus de base.  Comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dirait Jesse Frazel</a> , Â«les conteneurs ne sont pas la vraie choseÂ». <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1015407561187655680"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  Cette situation est aggravÃ©e par le fait que la plupart des composants de Kubernetes ne connaissent pas les locataires.  Bien sÃ»r, vous avez des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">espaces de noms</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pod</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des politiques de sÃ©curitÃ©</a> , mais il n'y a rien de tel dans l'API.  Ainsi que dans les composants internes tels que <code>kubelet</code> ou <code>kube-proxy</code> .  Cela conduit au fait que Kubernetes met en Å“uvre le modÃ¨le du Â«loyer modÃ©rÃ©Â» (location modÃ©rÃ©e). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eef/e54/556/eefe545564f03e8b6813e8bc83ed0188.png"><br>  <i><font color="gray">Architecture de Kubernetes</font></i> <br><br>  Les abstractions s'infiltrent davantage.  Une plate-forme au-dessus des conteneurs hÃ©rite de nombreux aspects de la location modÃ©rÃ©e.  Les plates-formes au-dessus des machines virtuelles multi-locataires hÃ©ritent de ce bail sÃ©vÃ¨re (VMware, Amazon Web Services, OpenStack, etc.). <br><br>  Le modÃ¨le de location souple de Kubernetes place les fournisseurs de services et les distributions dans une position Ã©trange.  Le cluster Kubernetes lui-mÃªme est en train de devenir une ligne de Â«location fermeÂ».  MÃªme au sein d'une mÃªme organisation, il existe de nombreuses raisons d'exiger un loyer ferme entre les utilisateurs (ou applications).  Ã‰tant donnÃ© que les clouds publics fournissent Kubernetes entiÃ¨rement gÃ©rÃ© en tant que service, les clients peuvent facilement prendre leur propre cluster et utiliser la limite du cluster comme point d'isolement. <br><br>  Certaines distributions Kubernetes, telles que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pivotal Container Service (PKS)</a> , sont bien conscientes de ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">problÃ¨me de location</a> et utilisent un modÃ¨le similaire, fournissant le mÃªme Kubernetes qu'un service qui peut Ãªtre obtenu Ã  partir d'un cloud public, mais dans votre propre centre de donnÃ©es. <br><br>  Cela a conduit Ã  l'Ã©mergence du modÃ¨le Â«plusieurs grappesÂ», au lieu de Â«une grande grappe communeÂ».  Souvent, les clients GKE de Google ont dÃ©ployÃ© des dizaines de clusters Kubernetes pour plusieurs Ã©quipes.  Souvent, chaque dÃ©veloppeur obtient son propre cluster.  Ce comportement gÃ©nÃ¨re un nombre choquant d'instances (Kubesprawl). <br><br>  Alternativement, les opÃ©rateurs Ã©lÃ¨vent leurs propres clusters Kubernetes dans leurs propres centres de donnÃ©es pour effectuer des travaux supplÃ©mentaires pour gÃ©rer plusieurs clusters, ou conviennent de louer Ã  bail un ou deux grands clusters. <br><br>  En rÃ¨gle gÃ©nÃ©rale, le plus petit cluster est composÃ© de quatre machines (ou machines virtuelles).  Un (ou trois pour HA) pour Kubernetes Master, trois pour Kubernetes Workers.  Beaucoup d'argent est dÃ©pensÃ© pour des systÃ¨mes qui, pour la plupart, sont inactifs. <br><br>  Par consÃ©quent, vous devez en quelque sorte dÃ©placer Kubernetes vers une multi-location rigide.  La communautÃ© Kubernetes est bien consciente de ce besoin.  Un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">groupe de travail Ã  baux multiples a</a> dÃ©jÃ  Ã©tÃ© formÃ©.  Elle travaille dur sur cette question, et ils ont plusieurs modÃ¨les et suggestions sur la faÃ§on de travailler avec chaque modÃ¨le. <br><br>  Jesse Frazel a Ã©crit un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">blog</a> sur ce sujet, et c'est gÃ©nial parce qu'elle est beaucoup plus intelligente que moi, donc je peux me rÃ©fÃ©rer Ã  elle et me sauver de dix annÃ©es d'Ã©tudes intenses, en essayant d'atteindre son niveau.  Si vous n'avez pas lu cet article, lisez-le maintenant. <br><br><h1>  Juste de trÃ¨s petites machines virtuelles optimisÃ©es pour la vitesse ... </h1><br><blockquote>  Kata Containers est un projet open source et une communautÃ© travaillant Ã  crÃ©er une implÃ©mentation standard de machines virtuelles lÃ©gÃ¨res qui ressemblent et fonctionnent comme des conteneurs mais offrent une isolation de la charge de travail et des avantages de sÃ©curitÃ© pour les machines virtuelles. </blockquote>  Jesse suggÃ¨re d'utiliser la technologie de conteneur VM, comme les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">conteneurs Kata</a> .  Ils offrent une isolation de niveau VM, mais fonctionnent comme des conteneurs.  Cela permet Ã  Kubernetes de donner Ã  chaque "locataire" (nous supposons que le locataire dans l'espace de noms) son propre ensemble de services systÃ¨me Kubernetes s'exÃ©cutant dans des conteneurs de VM imbriquÃ©s (le conteneur de VM Ã  l'intÃ©rieur de la machine virtuelle fournie par l'infrastructure IaaS). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/157/3ce/1b6/1573ce1b64d7607f5cb9ca0d09caef6e.png"><br>  <i><font color="gray">Image de Jesse Frasel: multi-location Ã  Kubernetes</font></i> <br><br>  Il s'agit d'une Ã©lÃ©gante solution multi-location Kubernetes.  Sa proposition va encore plus loin pour que Kubernetes utilise des conteneurs de VM imbriquÃ©s pour les charges de travail (Pods) fonctionnant sur Kubernetes, ce qui permet une augmentation significative de l'utilisation des ressources. <br><br>  Il nous reste au moins une optimisation.  CrÃ©ez le bon hyperviseur pour le fournisseur d'infrastructure sous-jacent ou le fournisseur de cloud.  Si le conteneur VM est une abstraction de premier niveau fournie par IaaS, nous augmenterons encore l'utilisation des ressources.  Le nombre minimum de VM pour dÃ©marrer un cluster Kubernetes est rÃ©duit Ã  une machine (ou trois pour HA) pour hÃ©berger le systÃ¨me de gestion Kubernetes, qui est disponible pour le "superutilisateur". <br><br><h1>  HÃ©bergement multiclient optimisÃ© en termes de ressources (coÃ»t) </h1><br>  Un dÃ©ploiement Kubernetes avec deux espaces de noms et plusieurs applications en cours d'exÃ©cution ressemblera Ã  ceci: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ffc/4e2/d7f/ffc4e2d7ffb239fa1e0822e3d20afcd2.png"><br><blockquote>  Remarque: il existe d'autres charges sur la mÃªme infrastructure IaaS.  Ã‰tant donnÃ© qu'il s'agit de conteneurs de VM, ils ont le mÃªme niveau d'isolement que les VM de cloud conventionnelles.  Par consÃ©quent, ils peuvent travailler sur le mÃªme hyperviseur avec un risque minimal. </blockquote>  Au dÃ©part, aucune infrastructure n'est dÃ©ployÃ©e dans le cloud, donc pour un superutilisateur les coÃ»ts sont nuls. <br><br>  Un superutilisateur demande un cluster Kubernetes Ã  partir du cloud.  Le fournisseur de services cloud crÃ©e une machine virtuelle avec un conteneur (ou trois pour HA) qui exÃ©cute les principales API Kubernetes et les services systÃ¨me.  Le superutilisateur peut dÃ©ployer des modules dans l'espace de noms du systÃ¨me ou crÃ©er de nouveaux espaces pour dÃ©lÃ©guer l'accÃ¨s Ã  d'autres utilisateurs. <br><br>  Le superutilisateur crÃ©e deux espaces de noms <code>foo</code> et <code>bar</code> .  Kubernetes demande deux conteneurs de VM Ã  partir du cloud pour chaque niveau de gestion des espaces de noms (Kubernetes API et System Services).  Le superutilisateur dÃ©lÃ¨gue l'accÃ¨s Ã  ces espaces de noms Ã  certains utilisateurs, chacun d'eux lance des charges de travail (modules), et les conteneurs VM demandent ces conteneurs pour ces charges de travail. <br><br>  Ã€ toutes les Ã©tapes, le superutilisateur ne paie que pour les ressources rÃ©ellement consommÃ©es.  Le fournisseur de services cloud contrÃ´le ces ressources et elles sont disponibles pour tout utilisateur de cloud. <br><br><h1>  Je ne dis rien de nouveau ... </h1><br>  Les fournisseurs de services cloud travaillent dÃ©jÃ  dans cette direction.  Vous pouvez le vÃ©rifier en regardant les Ã©vÃ©nements de la communautÃ© (Amazon a peut-Ãªtre dÃ©jÃ  fait cela tranquillement avec Fargate). <br><br>  Le premier conseil est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Virtual Kubelet</a> , un outil open source conÃ§u pour se dÃ©guiser en kubelet.  Il connecte Kubernetes Ã  d'autres API, ce qui permet Ã  Kubernetes de demander des conteneurs de VM Ã  un planificateur standard dans le cloud. <br><br>  D'autres indices sont un grand nombre de nouvelles technologies pour la conteneurisation de VM, comme les conteneurs Kata dÃ©jÃ  mentionnÃ©s, ainsi que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Firecracker</a> d'Amazon et le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">conseiller</a> de Google. <br><br><h1>  Conclusion </h1><br>  Si vous implÃ©mentez correctement des amÃ©liorations dans le modÃ¨le d'un loyer dur, vous trouverez la virtualisation Holy Graal of Kubernetes.  Isolation complÃ¨te des charges de travail et sans frais supplÃ©mentaires. <br><br>  Si vous n'utilisez pas le cloud public, vous bÃ©nÃ©ficiez toujours des avantages d'une utilisation plus Ã©levÃ©e des ressources, ce qui est payant avec des exigences matÃ©rielles plus faibles. <br><br>  EspÃ©rons que VMware et OpenStack prÃªtent attention et libÃ¨rent des hyperviseurs basÃ©s sur des conteneurs de VM lÃ©gers et les implÃ©mentations correspondantes de Virtual Kubelet. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434756/">https://habr.com/ru/post/fr434756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434742/index.html">Partie 2: Utilisation des contrÃ´leurs UDB PSoC de Cypress pour rÃ©duire le nombre d'interruptions dans une imprimante 3D</a></li>
<li><a href="../fr434744/index.html">Samsung SSD 860 QVO 1 TB et 4 TB: le premier consommateur SATA QLC (2 parties)</a></li>
<li><a href="../fr434746/index.html">BLE sous microscope 4</a></li>
<li><a href="../fr434750/index.html">Comment prendre le contrÃ´le de votre infrastructure rÃ©seau. Chapitre deux Nettoyage et documentation</a></li>
<li><a href="../fr434752/index.html">Robomoroz: l'avenir du personnage principal de la nouvelle annÃ©e</a></li>
<li><a href="../fr434758/index.html">Guide du modÃ©rateur Facebook: plus de 1 400 pages de diapositives contradictoires</a></li>
<li><a href="../fr434760/index.html">RÃ©sumÃ© des nouvelles de PostgreSQL. NumÃ©ro du Nouvel An (raccourci) numÃ©ro 13</a></li>
<li><a href="../fr434762/index.html">Notes d'un phytochimiste. Banane verte, ou n'oubliez pas de nourrir le microbiote</a></li>
<li><a href="../fr434770/index.html">Ã‰nergie renouvelable: les mots et leur signification</a></li>
<li><a href="../fr434774/index.html">5 leÃ§ons que nous avons apprises en Ã©crivant plus de 300 000 lignes de code d'infrastructure</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>