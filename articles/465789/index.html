<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçß ‚ìÇÔ∏è üë®üèø‚Äçüíº Entrenamiento Cisco 200-125 CCNA v3.0. D√≠a 29. PAT y NAT üêÇ üåõ ü§∞üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoy estudiaremos PAT (Port Address Translation), una tecnolog√≠a para traducir direcciones IP utilizando puertos, y NAT (Network Address Translation), ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Entrenamiento Cisco 200-125 CCNA v3.0. D√≠a 29. PAT y NAT</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/465789/"> Hoy estudiaremos PAT (Port Address Translation), una tecnolog√≠a para traducir direcciones IP utilizando puertos, y NAT (Network Address Translation), una tecnolog√≠a para traducir direcciones IP de paquetes de tr√°nsito.  PAT es un caso especial de NAT.  Cubriremos tres temas: <br><br>  - direcciones IP privadas o internas (intranet, locales) y direcciones IP p√∫blicas o externas; <br>  - NAT y PAT; <br>  - configurar NAT / PAT. <br><br>  Comencemos con las direcciones IP privadas.  Sabemos que se dividen en tres clases: A, B y C. <br><br><img src="https://habrastorage.org/webt/ob/rv/le/obrvlewzzejxlfwxxbi_90zkrwe.jpeg"><br><br>  Las direcciones internas de clase A ocupan el rango de decenas de 10.0.0.0 a 10.255.255.255, y las direcciones externas ocupan el rango de 1.0.0.0 a 9. 255.255.255 y de 11.0.0.0 a 126.255.255.255. <br><br>  Las direcciones internas de Clase B var√≠an de 172.16.0.0 a 172.31.255.255, y las direcciones externas var√≠an de 128.0.0.0 a 172.15.255.255 y de 172.32.0.0 a 191.255.255.255. <a name="habracut"></a><br><br>  Las direcciones internas de clase C var√≠an de 192.168.0.0 a 192.168.255.255, y las direcciones externas var√≠an de 192.0.0 a 192.167.255.255 y de 192.169.0.0 a 223.255.255.255. <br><br><img src="https://habrastorage.org/webt/-e/_r/ba/-e_rba3erd3jnyymki4ebjwu9fs.jpeg"><br><br>  Las direcciones de clase A son direcciones / 8, clase B - / 12 y clase C - / 16.  Por lo tanto, las direcciones IP externas e internas de diferentes clases ocupan diferentes rangos. <br><br>  Hemos discutido repetidamente cu√°l es la diferencia entre las direcciones IP privadas y p√∫blicas.  En t√©rminos generales, si tenemos un enrutador y un grupo de direcciones IP internas, cuando intentan acceder a Internet, el enrutador las convierte en direcciones IP externas.  Las direcciones internas se usan exclusivamente en redes locales y no en Internet. <br><br>  Si uso la l√≠nea de comando para ver los par√°metros de red de mi computadora, ver√© mi direcci√≥n IP LAN interna 192.168.1.103 all√≠. <br><br><img src="https://habrastorage.org/webt/hq/tx/wf/hqtxwfez60be9ufwpywe72ldll4.jpeg"><br><br>  Para averiguar su direcci√≥n IP p√∫blica, puede utilizar un servicio de Internet como "¬øCu√°l es mi IP"?  Como puede ver, la direcci√≥n externa de la computadora 78.100.196.163 es diferente de su direcci√≥n interna. <br><br><img src="https://habrastorage.org/webt/wm/1n/w0/wm1nw0n_syo74vtnmskictzyx8e.jpeg"><br><br>  En todos los casos, mi computadora es visible en Internet precisamente por la direcci√≥n IP externa.  Entonces, la direcci√≥n interna de mi computadora es 192.168.1.103, y la externa es 78.100.196.163.  La direcci√≥n interna se usa solo para la comunicaci√≥n local, no puede acceder a Internet con ella, para esto necesita una direcci√≥n IP p√∫blica.  Puede recordar por qu√© la separaci√≥n se hizo en direcciones privadas y p√∫blicas al revisar el video tutorial D√≠a 3. <br><br>  Considere qu√© es NAT.  Hay tres tipos de NAT: est√°tico, din√°mico y NAT sobrecargado, o PAT. <br><br><img src="https://habrastorage.org/webt/sq/os/yh/sqosyhlr7iwvdpydrfys3xigo9m.jpeg"><br><br>  Hay 4 t√©rminos en Cisco que describen NAT.  Como dije, NAT es un mecanismo para convertir direcciones internas en externas.  Si un dispositivo conectado a Internet recibe un paquete de otro dispositivo de la red local, simplemente lo descartar√°, ya que el formato de la direcci√≥n interna no coincide con el formato de las direcciones utilizadas en Internet global.  Por lo tanto, el dispositivo debe recibir una direcci√≥n IP p√∫blica para acceder a Internet. <br>  Entonces, el primer t√©rmino es Inside Local, que significa la direcci√≥n IP del host en la LAN interna.  En pocas palabras, esta es la direcci√≥n de origen principal del tipo 192.168.1.10.  El segundo t√©rmino, Inside Global, es la direcci√≥n IP del host local, bajo el cual es visible en la red externa.  En nuestro caso, esta es la direcci√≥n IP del puerto externo del enrutador 200.124.22.10. <br><br><img src="https://habrastorage.org/webt/b_/ia/sj/b_iasjqtn7zpepgxzpykgutrnxg.jpeg"><br><br>  Puede decir que Inside Local es una direcci√≥n IP privada y Inside Global es una direcci√≥n IP p√∫blica.  Recuerde que el t√©rmino Inside se usa para referirse a la fuente del tr√°fico, y Outside se usa para referirse al prop√≥sito del tr√°fico.  Local externo es la direcci√≥n IP del host en la red externa, bajo la cual es visible para la red interna.  En pocas palabras, esta es la direcci√≥n del destinatario visible desde la red interna.  Un ejemplo de dicha direcci√≥n es la direcci√≥n IP 200.124.22.100 de un dispositivo ubicado en Internet. <br><br><img src="https://habrastorage.org/webt/ey/sm/o-/eysmo-pr4ikwlwag52qkmag4zeu.jpeg"><br><br>  Outside Global es la direcci√≥n IP del host visible en la red externa.  En la mayor√≠a de los casos, las direcciones externa local y externa se ven iguales, porque incluso despu√©s de la conversi√≥n, la direcci√≥n IP de destino es la misma para la fuente que antes de la conversi√≥n. <br><br><img src="https://habrastorage.org/webt/bg/tn/xq/bgtnxq5blz5qdtgtnpqddu8rr08.jpeg"><br><br>  Considere lo que es NAT est√°tico.  La NAT est√°tica significa la conversi√≥n uno a uno de las direcciones IP internas a una conversi√≥n externa o uno a uno.  Cuando los dispositivos env√≠an tr√°fico a Internet, sus direcciones internas internas internas se convierten en direcciones internas internas globales. <br><br><img src="https://habrastorage.org/webt/oo/n6/ql/oon6qlova0vcwlg7bovpduisxho.jpeg"><br><br>  Hay 3 dispositivos en nuestra red local, y cuando van a conectarse, cada uno de ellos obtiene su propia direcci√≥n interna global.  Estas direcciones se asignan est√°ticamente a las fuentes de tr√°fico.  El principio uno a uno significa que si 100 dispositivos se encuentran en la red local, recibir√°n 100 direcciones externas. <br><br>  NAT pareci√≥ salvar Internet, que termin√≥ con direcciones IP p√∫blicas.  Gracias a NAT, muchas compa√±√≠as, muchas redes pueden tener una direcci√≥n IP externa com√∫n, en la cual las direcciones de dispositivos locales se convertir√°n al acceder a Internet.  Puede decir que en este caso de NAT est√°tica no hay ahorro en el n√∫mero de direcciones, ya que a un centenar de computadoras locales se les asignan cien direcciones externas, y tendr√° toda la raz√≥n.  Sin embargo, la NAT est√°tica todav√≠a tiene varias ventajas. <br><br>  Por ejemplo, tenemos un servidor con una direcci√≥n IP interna de 192.168.1.100.  Si alg√∫n dispositivo de Internet quiere contactarlo, no podr√° hacerlo utilizando la direcci√≥n de destino interna, para ello debe usar la direcci√≥n externa del servidor 200.124.22.3.  Si se configura NAT est√°tica en el enrutador, todo el tr√°fico dirigido a 200.124.22.3 se reenv√≠a autom√°ticamente a 192.168.1.100.  Esto proporciona acceso externo a dispositivos en la red local, en este caso, al servidor web de la compa√±√≠a, que puede ser necesario en algunos casos. <br><br>  Considere la NAT din√°mica.  Es muy similar a la est√°tica, pero no asigna direcciones externas permanentes a cada dispositivo local.  Por ejemplo, tenemos 3 dispositivos locales y solo 2 direcciones externas.  Si el segundo dispositivo quiere conectarse, se le asignar√° la primera direcci√≥n IP libre.  Si despu√©s el servidor web quiere conectarse, el enrutador le asignar√° la segunda direcci√≥n externa disponible.  Si despu√©s de eso, el primer dispositivo quiere ir a la red externa, no habr√° una direcci√≥n IP disponible y el enrutador dejar√° caer su paquete. <br><br><img src="https://habrastorage.org/webt/id/uf/lt/iduflt-hi8gyfgpgkotj8sagyxs.jpeg"><br><br>  Podemos tener cientos de dispositivos con direcciones IP internas, y cada uno de estos dispositivos puede conectarse.  Pero como no tenemos una asignaci√≥n est√°tica de direcciones externas, al mismo tiempo, no m√°s de 2 de cada cien dispositivos podr√°n acceder a Internet, porque solo tenemos dos direcciones externas asignadas din√°micamente. <br><br>  Los dispositivos Cisco tienen un tiempo de traducci√≥n de direcci√≥n fija de 24 horas de forma predeterminada.  Se puede cambiar a 1,2,3, 10 minutos, en cualquier momento que desee.  Despu√©s de este tiempo, las direcciones externas se liberan y se devuelven autom√°ticamente al grupo de direcciones.  Si en este momento el primer dispositivo quiere conectarse y hay una direcci√≥n externa disponible, la recibir√°.  El enrutador contiene una tabla NAT que se actualiza din√°micamente, y hasta que haya expirado el tiempo de conversi√≥n, el dispositivo guarda la direcci√≥n asignada.  En pocas palabras, el NAT din√°mico funciona seg√∫n el principio: "quien vino primero, sirvi√≥". <br><br>  Considere lo que constituye un NAT sobrecargado, o PAT.  Este es el tipo m√°s com√∫n de NAT.  Su red dom√©stica puede tener muchos dispositivos: una PC, tel√©fono inteligente, computadora port√°til, tableta y todos est√°n conectados a un enrutador que tiene una direcci√≥n IP externa.  Entonces, PAT permite que muchos dispositivos con direcciones IP internas se conecten simult√°neamente bajo una direcci√≥n IP externa.  Esto es posible porque cada direcci√≥n IP interna privada utiliza un n√∫mero de puerto espec√≠fico durante una sesi√≥n de comunicaci√≥n. <br>  Supongamos que tenemos una direcci√≥n p√∫blica 200.124.22.1 y muchos dispositivos locales.  Entonces, al acceder a Internet, todos estos hosts recibir√°n la misma direcci√≥n 200.124.22.1.  Lo √∫nico que los distinguir√° entre s√≠ es el n√∫mero de puerto. <br>  Si recuerda la discusi√≥n de la capa de transporte, sabe que la capa de transporte contiene n√∫meros de puerto y que el n√∫mero de puerto de origen es un n√∫mero aleatorio. <br><br><img src="https://habrastorage.org/webt/bd/6v/rd/bd6vrdsnsfezgoads3mbzzphcco.jpeg"><br><br>  Supongamos que hay un host en la red externa con una direcci√≥n IP de 200.124.22.10, que est√° conectada a Internet.  Si la computadora 192.168.1.11 desea comunicarse con la computadora 200.124.22.10, crear√° un puerto de origen aleatorio 51772. En este caso, el puerto de destino de la computadora en la red externa ser√° 80. <br><br>  Cuando el enrutador recibe un paquete de computadora local enviado a una red externa, traduce su direcci√≥n local local local a la direcci√≥n global interna 200.124.22.1 y asigna el puerto 23556 al puerto. El paquete llegar√° a la computadora 200.124.22.10 y tendr√° que enviar una respuesta de acuerdo con el procedimiento de protocolo de enlace, el destino ser√° la direcci√≥n 200.124.22.1 y el puerto 23556. <br><br>  El enrutador tiene una tabla de traducci√≥n NAT, por lo tanto, despu√©s de haber recibido un paquete de una computadora externa, determinar√° la direcci√≥n local interna correspondiente a la direcci√≥n global interna como 192.168.1.11: 51772 y le enviar√° el paquete.  Despu√©s de eso, la conexi√≥n entre las dos computadoras puede considerarse establecida. <br>  Al mismo tiempo, puede tener cientos de dispositivos que usan la misma direcci√≥n 200.124.22.1 para la comunicaci√≥n, pero diferentes n√∫meros de puerto, para que todos puedan conectarse en l√≠nea al mismo tiempo.  Es por eso que PAT es un m√©todo de traducci√≥n tan popular. <br><br>  Veamos c√≥mo configurar NAT est√°tica.  Para cualquier red, antes que nada, es necesario determinar las interfaces de entrada y salida.  El diagrama muestra un enrutador a trav√©s del cual el tr√°fico se transfiere desde el puerto G0 / 0 al puerto G0 / 1, es decir, desde una red interna a una red externa.  Por lo tanto, tenemos una interfaz de entrada 192.168.1.1 y una interfaz de salida 200.124.22.1. <br><br><img src="https://habrastorage.org/webt/rj/nc/o6/rjnco6mmewiiildmwtu0gn8ixs4.jpeg"><br><br>  Para configurar NAT, vamos a la interfaz G0 / 0 y establecemos los par√°metros de direcci√≥n IP 192.168.1.1 255.255.255.0 e indicamos que esta interfaz es la entrada que usa el comando ip nat inside. <br><br><img src="https://habrastorage.org/webt/rf/dd/xt/rfddxtoq7k4bti2dprru9jriheq.jpeg"><br><br>  Del mismo modo, configuramos NAT en la interfaz de salida G0 / 1 especificando la direcci√≥n IP 200.124.22.1, la m√°scara de subred 255.255.255.0 y la ip nat fuera.  Recuerde que la traducci√≥n NAT din√°mica siempre se realiza desde la interfaz de entrada a la de salida, desde adentro hacia afuera.  Naturalmente, para NAT din√°mico, la respuesta llega a la interfaz de entrada a trav√©s de la interfaz de salida, pero cuando se inicia el tr√°fico, se activa la direcci√≥n de entrada y salida.  En el caso de NAT est√°tica, la iniciaci√≥n del tr√°fico puede ocurrir en cualquiera de las direcciones: entrada o salida. <br><br>  A continuaci√≥n, necesitamos crear una tabla de NAT est√°tica, donde cada direcci√≥n local corresponde a una direcci√≥n global separada.  En nuestro caso, hay 3 dispositivos, por lo que la tabla constar√° de 3 entradas que indican la direcci√≥n IP local interna de la fuente, que se traduce en la direcci√≥n global interna: ip nat inside static 192.168.1.10 200.124.22.1. <br>  Por lo tanto, en NAT est√°tico, prescribe manualmente una traducci√≥n para cada direcci√≥n de host local.  Ahora ir√© a Packet Tracer y har√© los ajustes descritos anteriormente. <br><br><img src="https://habrastorage.org/webt/mz/td/sh/mztdshpsmzcjt5zsb7xuifiacp8.jpeg"><br><br>  En la parte superior tenemos el servidor 192.168.1.100, debajo est√° la computadora 192.168.1.10 y en la parte inferior est√° la computadora 192.168.1.11.  El puerto G0 / 0 del Router0 tiene una direcci√≥n IP de 192.168.1.1, y el puerto G0 / 1 tiene 200.124.22.1.  En la "nube" que representa Internet, coloqu√© el Router1, al que se le asign√≥ una direcci√≥n IP de 200.124.22.10. <br><br>  Entro en la configuraci√≥n de Router1 y escribo el comando debug ip icmp.  Ahora, tan pronto como el ping llegue a este dispositivo, aparecer√° un mensaje de depuraci√≥n en la ventana de configuraci√≥n que muestra qu√© tipo de paquete es. <br>  Vamos a configurar el enrutador Router0.  Entro en el modo de configuraci√≥n global y llamo a la interfaz G0 / 0.  Luego, ingreso el comando ip nat inside, luego voy a la interfaz g0 / 1 e ingreso el comando ip nat outside.  Por lo tanto, asign√© las interfaces de entrada y salida del enrutador.  Ahora necesito configurar manualmente las direcciones IP, es decir, transferir las l√≠neas de la tabla anterior a la configuraci√≥n: <br><br>  IP nat dentro de la fuente est√°tica 192.168.1.10 200.124.22.1 <br>  IP nat dentro de la fuente est√°tica 192.168.1.11 200.124.22.2 <br>  IP nat dentro de la fuente est√°tica 192.168.1.100 200.124.22.3 <br><br><img src="https://habrastorage.org/webt/tb/px/-f/tbpx-flkjx4vwlsd6ee2rljrky0.jpeg"><br><br>  Ahora har√© ping al Router1 desde cada uno de nuestros dispositivos y ver√© qu√© direcciones IP mostrar√° el ping que recibe.  Para hacer esto, coloco la ventana CLI abierta del enrutador R1 en el lado derecho de la pantalla para ver los mensajes de depuraci√≥n.  Ahora voy al terminal de l√≠nea de comando PC0 y hago ping a la direcci√≥n 200.124.22.10.  Despu√©s de eso, aparece un mensaje en la ventana que indica que el ping se recibi√≥ de la direcci√≥n IP 200.124.22.1.  Esto significa que la direcci√≥n IP de la computadora local 192.168.1.10 se ha convertido a la direcci√≥n global 200.124.22.1. <br><br><img src="https://habrastorage.org/webt/ax/ei/g6/axeig6imwtfp-bxxjjmz0uh6uum.jpeg"><br><br>  Hago lo mismo con la pr√≥xima computadora local y veo que su direcci√≥n se ha convertido a 200.124.22.2.  Luego env√≠o ping desde el servidor y veo la direcci√≥n 200.124.22.3. <br>  Por lo tanto, cuando el tr√°fico del dispositivo LAN llega al enrutador en el que est√° configurado NAT est√°tico, el enrutador, de acuerdo con la tabla, convierte la direcci√≥n IP local a la global y env√≠a el tr√°fico a la red externa.  Para verificar la tabla NAT, ingreso el comando show ip nat translation. <br><br><img src="https://habrastorage.org/webt/5d/-9/rx/5d-9rxvls9gdzoz_aanqpbdxeqe.jpeg"><br><br>  Ahora podemos ver todas las transformaciones que realiza el enrutador.  En la primera columna de Inside Global se encuentra la direcci√≥n del dispositivo antes de la transmisi√≥n, es decir, la direcci√≥n bajo la cual el dispositivo es visible desde la red externa, luego la direcci√≥n local interna, es decir, la direcci√≥n del dispositivo en la red local.  La tercera columna muestra Local externo, y la cuarta muestra la direcci√≥n Global externa, que son las mismas porque no traducimos la direcci√≥n IP de destino.  Como puede ver, despu√©s de unos segundos, la tabla se despej√≥ porque se estableci√≥ un breve tiempo de espera de ping en Packet Tracer. <br><br>  Puedo hacer ping al servidor desde el enrutador R1 en la direcci√≥n 200.124.22.3, y si vuelvo a la configuraci√≥n del enrutador, puede ver que la tabla se vuelve a llenar con cuatro l√≠neas de ping con la direcci√≥n de destino convertida 192.168.1.100. <br><br><img src="https://habrastorage.org/webt/xx/5i/nq/xx5inqtiknpu90hl-mqjrheahti.jpeg"><br><br>  Como dije, incluso si el tiempo de espera de transmisi√≥n ha funcionado, cuando el tr√°fico se inicia desde una fuente externa, el mecanismo NAT se activa autom√°ticamente.  Esto solo ocurre cuando se usa NAT est√°tico. <br><br>  Ahora veamos c√≥mo funciona NAT din√°mico.  En nuestro ejemplo, hay 2 direcciones p√∫blicas para tres dispositivos en la red local, sin embargo, puede haber decenas y cientos de dichos hosts privados.  Al mismo tiempo, solo 2 dispositivos pueden conectarse.  Considere cu√°l, adem√°s, la diferencia entre NAT est√°tica y din√°mica. <br><br>  Como en el caso anterior, primero debe determinar las interfaces de entrada y salida del enrutador.  A continuaci√≥n, creamos una especie de lista de acceso, pero esta no es la ACL de la que hablamos en la lecci√≥n anterior.  Esta lista de acceso se usa para identificar el tr√°fico que queremos convertir.  Aqu√≠ aparece el nuevo t√©rmino "tr√°fico interesante" o "tr√°fico interesante".  Este es el tr√°fico que le interesa por alguna raz√≥n, y cuando este tr√°fico coincide con los t√©rminos de la lista de acceso, cae bajo la acci√≥n de NAT y se convierte.  Este t√©rmino es aplicable al tr√°fico en muchos casos, por ejemplo, en el caso de las VPN, "interesante" se denomina tr√°fico que van a pasar a trav√©s de un t√∫nel VPN. <br><br>  Debemos crear una ACL que identifique el tr√°fico interesante, en nuestro caso es el tr√°fico de toda la red 192.168.1.0, con el que se indica la m√°scara inversa 0.0.0.255. <br><br><img src="https://habrastorage.org/webt/rq/ep/rp/rqeprpll-v1nzyru_dewaflnj9o.jpeg"><br><br>  Luego, necesitamos crear un grupo NAT, para el cual usamos el comando ip nat pool &lt;nombre del grupo&gt; y especificar el grupo de direcciones IP 200.124.22.1 200.124.22.2.  Esto significa que solo proporcionamos dos direcciones IP externas.  Luego, el comando usa la palabra clave netmask e ingresa la m√°scara de subred 255.255.255.252.  El √∫ltimo octeto de la m√°scara es (255: el n√∫mero de direcciones de grupo es 1), por lo que si tiene 254 direcciones en el grupo, la m√°scara de subred ser√° 255.255.255.0.  Este es un par√°metro muy importante, por lo tanto, al configurar NAT din√°mico, aseg√∫rese de ingresar el valor de m√°scara de red correcto. <br><br>  A continuaci√≥n, utilizamos un comando que inicia el mecanismo NAT: ip nat dentro de la lista de recursos 1 grupo NWKING, donde NWKING es el nombre del grupo y la lista 1 significa el n√∫mero de ACL de la lista de acceso1.  Recuerde: para que este comando funcione, primero debe crear un grupo de direcciones din√°micas y una lista de acceso. <br><br>  Entonces, bajo nuestras condiciones, el primer dispositivo que quiere acceder a Internet puede hacer esto, el segundo dispositivo tambi√©n, pero el tercero tendr√° que esperar hasta que se libere una de las direcciones del grupo.  La configuraci√≥n de NAT din√°mica consta de 4 pasos: determinar la interfaz de entrada y salida, determinar el tr√°fico "interesante", crear un grupo NAT y configurarlo. <br>  Ahora iremos a Packet Tracer e intentaremos configurar NAT din√°mico.  Primero, debemos eliminar la configuraci√≥n NAT est√°tica, para lo cual ingresamos los comandos en secuencia: <br><br>  sin IP nat dentro de la fuente est√°tica 192.168.1.10 200.124.22.1 <br>  sin IP nat dentro de la fuente est√°tica 192.168.1.11 200.124.22.2 <br>  sin IP nat dentro de la fuente est√°tica 192.168.1.100 200.124.22.3. <br><br>  A continuaci√≥n, creo la lista de acceso de la Lista 1 para toda la red con el comando 192.168.1.0 0.0.0.255 de permiso de la lista de acceso 1 y configuro el grupo NAT utilizando el comando ip nat pool NWKING 200.124.22.1 200.124.22.2 netmask 255.255.255.252.  En este comando, especifiqu√© el nombre del grupo, las direcciones que lo ingresan y la m√°scara de red. <br><br>  Luego indico si este NAT es interno o externo, y la fuente de donde NAT deber√≠a obtener informaci√≥n, en nuestro caso es list, usando el comando ip nat inside source list 1. Despu√©s de eso, el sistema preguntar√° si se necesita todo el pool o una interfaz espec√≠fica. .  Elijo pool porque tenemos m√°s de 1 direcci√≥n externa.  Si selecciona la interfaz, deber√° especificar un puerto con una direcci√≥n IP espec√≠fica.  En la forma final, el comando se ver√° as√≠: ip nat dentro de la lista de fuentes 1 pool NWKING.  Ahora este grupo consta de dos direcciones 200.124.22.1 200.124.22.2, sin embargo, puede cambiarlas libremente o agregar nuevas direcciones que no est√©n vinculadas a una interfaz espec√≠fica. <br><br>  Debe asegurarse de que su tabla de enrutamiento est√© actualizada para que cualquiera de estas direcciones IP del grupo se dirija a este dispositivo; de lo contrario, no recibir√° tr√°fico de retorno.  Para asegurarnos de que la configuraci√≥n funciona, repetiremos el procedimiento de ping del enrutador en la nube, que se realiz√≥ para NAT est√°tico.  Abrir√© la ventana del enrutador 1 del enrutador para ver los mensajes del modo de depuraci√≥n y hacer ping desde cada uno de los 3 dispositivos. <br><br><img src="https://habrastorage.org/webt/io/yt/lk/ioytlkva1_ucbg0-llm4r5ckiy0.jpeg"><br><br>  Vemos que todas las direcciones de origen de donde provienen los paquetes de ping corresponden a la configuraci√≥n.      PC0  ,        .     Router 1, ,        200.124.22.1  200.124.22.2.    ,   ,      .       PC0,   ,   ,         200.124.22.1. <br><br>     NAT     ?     Router0    clear ip nat translation *  ¬´¬ª   .          show ip nat translation,     . <br><br>    NAT   show ip nat statistics. <br><br><img src="https://habrastorage.org/webt/c8/o0/ne/c8o0neryfwlityjhd2zb_v5mc98.jpeg"><br><br>    ,       ,     NAT/PAT.  ,    0,       .      ,      hits  misses (          ),     . <br><br>         IP- ‚Äì  NAT,  PAT.   PAT     ,      NAT:      ,  ¬´¬ª ,   NAT   PAT.         ,     ,     ,    PAT         .     NAT  PAT      overload,     .      NAT    PAT. <br><br><img src="https://habrastorage.org/webt/rs/ho/mv/rshomvllaqmpjgqhp36eferkb9o.jpeg"><br><br>  ,        NWKING, , 200.124.22.1,               255.255.255.0.   ,    ip nat 1 pool NWKING 200.124.22.1 200.124.22.1 netmask 255.255.255.0  source interface    200.124.22.1  G0/1.               IP-. <br><br>        IP-,      .       ,            .  NAT   ,       ,        ,   NAT IP-   .      ,   IP-       . <br><br>      Packet Tracer.      NAT  no Ip nat inside source list 1 NWKING    NAT    no Ip nat pool NWKING 200.124.22.1 200.124.22.2 netmask 225.255.255.252. <br><br>      PAT  Ip nat pool NWKING 200.124.22.2 200.124.22.2 netmask 225.255.255.255.      IP-,     ,       200.124.22.1,     200.124.22.2.     ,      . <br><br>    PAT  Ip nat inside source list 1 pool NWKING overload.          PAT.    ,     ,    ,     PC0 Router1   200.124.22.10.       ,   ,   ,    ,  IP- 200.124.22.2.      ,   PC1   Server0. <br><br> ,       Router0.  ,    ,      ,       Router1  IP-  200.124.22.2. <br><br><img src="https://habrastorage.org/webt/fh/tf/gp/fhtfgp0x3n7fghja8yjs_qtp7ci.jpeg"><br><br>    show ip nat statistics,    PAT. <br><br><img src="https://habrastorage.org/webt/na/vq/l2/navql2ahsncx0c5utra8t5efxbi.jpeg"><br><br>  ,    ,   ,  12,      . <br><br>    -  ‚Äî   Ip nat inside source list 1 interface gigabit Ethernet g0/1 overload.        PC0, ,      200.124.22.1,     !    :      ,        ,     NAT-   IP-   .             . <br>      ,      .  Packet Tracer,            NAT  PAT.       ICND1 ‚Äî    CCNA,    , ,   . <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/l5wuJFoeVDQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Gracias por quedarte con nosotros.  ¬øTe gustan nuestros art√≠culos?  ¬øQuieres ver m√°s materiales interesantes?  <b>Ap√≥yenos</b> haciendo un pedido o recomend√°ndolo a sus amigos, un <b>descuento del 30% para los usuarios de Habr en un an√°logo √∫nico de servidores de nivel de entrada que inventamos para usted:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">toda la verdad sobre VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps de $ 20 o c√≥mo dividir el servidor?</a>  (las opciones est√°n disponibles con RAID1 y RAID10, hasta 24 n√∫cleos y hasta 40GB DDR4). <br><br>  <b>Dell R730xd 2 veces m√°s barato?</b>  ¬°Solo tenemos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV desde $ 199</a> en los Pa√≠ses Bajos!</b>  <b><b>Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - ¬°desde $ 99!</b></b>  Lea sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥mo construir un edificio de infraestructura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">clase utilizando servidores Dell R730xd E5-2650 v4 que cuestan 9,000 euros por un centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/465789/">https://habr.com/ru/post/465789/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../465775/index.html">Servidor LTSP basado en CentOS7</a></li>
<li><a href="../465779/index.html">Yealink T19 Autoaprovisionamiento + Libreta de direcciones din√°mica</a></li>
<li><a href="../465781/index.html">C√≥mo hice un interruptor Okhttp personalizado a trav√©s de las rutinas de Kotlin</a></li>
<li><a href="../465783/index.html">Desarrollador de juegos ruso, sin sentido y despiadado</a></li>
<li><a href="../465787/index.html">Ama la cabra</a></li>
<li><a href="../465791/index.html">Vulnerabilidades de los minoristas: tres casos en los que se pudo obtener OTP en la solicitud</a></li>
<li><a href="../465793/index.html">Frontend Weekly Digest (26 de agosto - 1 de septiembre de 2019)</a></li>
<li><a href="../465795/index.html">El resumen de materiales frescos del mundo del front-end para la √∫ltima semana No. 378 (26 de agosto - 1 de septiembre de 2019)</a></li>
<li><a href="../465797/index.html">Algoritmos gen√©ticos (o el cliente siempre es el rey, y a menudo un tonto)</a></li>
<li><a href="../465801/index.html">Food Design Digest, agosto de 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>