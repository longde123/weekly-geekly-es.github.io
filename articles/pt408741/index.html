<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüéì üë©‚Äçüë©‚Äçüëß‚Äçüëß üè∏ Pioneira no processador Qualcomm Centriq 2400. Assassino Intel? üßùüèø üíâ üéß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No in√≠cio de novembro de 2017, a Qualcomm Datacenter Technologies (QDT) concluiu o trabalho em sua nova cria√ß√£o - um processador baseado na tecnologia...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pioneira no processador Qualcomm Centriq 2400. Assassino Intel?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/408741/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/g7/5n/3n/g75n3ntbmfmydlytlwfk8w_ddya.jpeg"></div><br>  No in√≠cio de novembro de 2017, a Qualcomm Datacenter Technologies (QDT) concluiu o trabalho em sua nova cria√ß√£o - um processador baseado na tecnologia de 10 nm - Centriq 2400. Que futuro aguarda o setor, de acordo com os criadores dessa inova√ß√£o?  Quais s√£o os benef√≠cios de obter servidores e por que o Centriq 2400 √© t√£o exclusivo?  Leia mais sobre isso e muito mais. <a name="habracut"></a><br><br>  Em 8 de novembro, foi realizada uma confer√™ncia de imprensa da QDT em San Jose (Calif√≥rnia), na qual o in√≠cio das entregas do novo processador foi anunciado oficialmente.  Anand Chandrasekher, vice-presidente s√™nior e diretor executivo, disse: <br><br><blockquote>  A apresenta√ß√£o de hoje √© uma conquista importante e o culminar de mais de 4 anos de design, desenvolvimento e suporte diligentes do sistema ... Criamos o processador de servidor mais avan√ßado do mundo, que oferece alto desempenho combinado com um alto n√≠vel de efici√™ncia energ√©tica, permitindo que nossos clientes reduzam significativamente seus custos. </blockquote><br><br>  Al√©m do orgulho indiscut√≠vel em seus produtos, os representantes da empresa n√£o t√™m vergonha de declarar que o processador Centriq 2400 √© significativamente superior aos produtos concorrentes, por exemplo, Intel Xeon Platinum 8180. De acordo com seus c√°lculos, para cada d√≥lar gasto (e o custo do processador √© de US $ 1995), o usu√°rio obter√° desempenho em 4 vezes.  E quando recalculado para o desempenho em 1 watt - 45% a mais.  Declara√ß√µes ousadas, no entanto, muitos dos representantes de v√°rias empresas interessadas no novo produto est√£o mais do que felizes em ouvi-los. <br><br><h2>  Especifica√ß√µes t√©cnicas do Qualcomm Centriq 2400 </h2><br>  <b>Arquitetura da CPU:</b> <br><br><ul><li>  at√© 48 n√∫cleos de 64 bits com um pico de frequ√™ncia de 2,6 GHz; </li><li>  Compatibilidade com Armv8 </li><li>  Somente AArch64; </li><li>  Armv8 FP / SIMD; </li><li>  Extens√£o de CRC e Armv8 Crypto; </li></ul><br>  <b>Cache da CPU:</b> <br><br><ul><li>  Cache de instru√ß√µes de 64 Kb (instru√ß√µes) L1 e 24 Kb de cache L0 de ciclo √∫nico; </li><li>  Cache de dados L1 de 32 Kb; </li><li>  512 KB de cache L2 total para cada 2 n√∫cleos; </li><li>  Cache L3 compartilhado de 60 MB; </li><li>  filtrar solicita√ß√µes de interprocessador L2; </li><li>  QoS; </li></ul><br>  <i>onde L (L1, L2, L3, L0) √© o n√≠vel, ou seja,</i>  <i>L0 √© o n√≠vel zero.</i> <br><br>  <b>Tecnologia:</b> <br><br><ul><li>  Tecnologia FinFET de 10nm da Samsung; </li></ul><br>  <b>Largura de banda da mem√≥ria:</b> <br><br><ul><li>  6 canais para conectar m√≥dulos de mem√≥ria DDR4; </li><li>  at√© 2667 MT / s por conex√£o; </li><li>  128 GB / s - largura de banda total m√°xima; </li><li>  Compacta√ß√£o de largura de banda incorporada </li></ul><br>  <b>Capacidade de mem√≥ria:</b> <br><br><ul><li>  768 GB = 128 GB x 6 conex√µes; </li></ul><br>  <b>Tipo de mem√≥ria:</b> <br><br><ul><li>  Conex√µes DDR4 de 64 bits com ECC de 8 bits; </li><li>  RDIMM e LRDIMM; </li></ul><br>  <b>Interface suportada:</b> <br><br><ul><li>  GPIO </li><li>  I¬≤C; </li><li>  SPI </li><li>  SATA Gen 3 de 8 bandas; </li><li>  32 PCIe Gen3 com capacidade de conectar at√© 6 controladores PCIe; </li></ul><br>  Al√©m das caracter√≠sticas acima, vale ressaltar que este processador possui 18 bilh√µes de transistores em cada chip.  E todos os seus n√∫cleos s√£o conectados por um barramento em anel bidirecional.  Em carga m√°xima, o Centriq 2400 consome apenas 120 watts. <br><br>  O foco principal do novo processador ainda s√£o as solu√ß√µes em nuvem.  Segundo os representantes da empresa, o Centriq 2400 permitir√° criar sistemas de servidor que ser√£o caracterizados por alto desempenho, efici√™ncia e escalabilidade. <br><br>  Isso n√£o poderia deixar de atrair muitas empresas, tecnologias em nuvem para as quais s√£o quase a base de suas atividades.  A apresenta√ß√£o contou com a presen√ßa de: Alibaba, LinkedIn, Cloudflare, American Megatrends Inc., Arm, Cadence Design Systems, Canonical, Chelsio Communications, Excelero, Hewlett Packard Enterprise, Illumina, MariaDB, Mellanox, Microsoft Azure, MongoDB, Netronome, Packet, Red Hat, ScyllaDB, 6WIND, Samsung, Solarflare, Smartcore, SUSE, Sinopse, Uber, Xilinx.  A lista √© bastante impressionante, o que indica maior aten√ß√£o a este produto. <br><br>  No momento, o processador Qualcomm Centriq 2400 est√° apenas ganhando for√ßa, tanto em preval√™ncia quanto em popularidade.  O que, naturalmente, levar√° ao surgimento de algo novo, semelhante ou at√© mais produtivo, dos concorrentes da QDT. <br><br>  Mas nem todo mundo acredita cegamente na frescura de novos itens.  Se aqueles que acreditam que a realiza√ß√£o de testes e an√°lise comparativa de v√°rios processadores permitir√£o que voc√™ veja resultados muito mais indicativos do que as palavras dos promotores do Centriq 2400. <br><br>  O Cloudflare conduziu uma an√°lise comparativa de tr√™s plataformas: Grantley (Intel), Purley (Intel) e Centriq (Qualcomm). <br><br>  Abaixo ser√£o apresentados gr√°ficos dessa an√°lise e as conclus√µes de seu autor - <b>Vlad Krasnov</b> .  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Original desta an√°lise no blog do Cloudflare</a> ) <br><br><h2>  Criptografia de Chave P√∫blica </h2><br><img src="https://habrastorage.org/webt/_q/42/2j/_q422juc1e9u-oqrqbeoxvsarba.png"><br><br><img src="https://habrastorage.org/webt/bf/up/_y/bfup_ysr_-7byinpj4h03-4ut2q.png"><br><br>  A criptografia de chave p√∫blica √© o desempenho mais puro da ALU (dispositivo l√≥gico aritm√©tico).  √â interessante, mas n√£o surpreendente, que em uma refer√™ncia b√°sica, o n√∫cleo de Broadwell seja mais r√°pido que o Skylake, e ambos sejam mais r√°pidos que o Falkor.  Isso ocorre porque Broadwell opera com uma frequ√™ncia mais alta, embora em termos de arquitetura n√£o seja muito inferior ao Skylake. <br><br>  Falkor √© inferior aos outros neste teste.  Primeiro, o modo turbo foi ativado em um dos benchmarks b√°sicos, o que significa que os processadores Intel operam com uma frequ√™ncia mais alta.  Al√©m disso, a Intel introduziu duas instru√ß√µes especiais na Broadwell para acelerar o processamento de grandes n√∫meros: ADCX e ADOX.  Eles executam duas opera√ß√µes independentes de adi√ß√£o / transporte por ciclo, enquanto o ARM pode fazer apenas uma.  Da mesma forma, o conjunto de instru√ß√µes do ARMv8 n√£o possui um √∫nico comando para executar a multiplica√ß√£o de 64 bits; em vez disso, um par de instru√ß√µes MUL e UMULH √© usado. <br><br>  No entanto, no n√≠vel do SoC, a Falkor vence.  √â um pouco mais lento que o Skylake em termos de RSA2048 e somente porque o RSA2048 n√£o possui uma implementa√ß√£o otimizada para ARM.  O desempenho da ECDSA √© ridiculamente alto.  Um √∫nico chip Centriq pode satisfazer as necessidades de quase qualquer empresa do mundo com a ECDSA. <br><br>  Tamb√©m √© muito interessante ver que a Skylake ultrapassa Broadwell em 30%, apesar de ter perdido no teste para um n√∫cleo e ter apenas 20% mais n√∫cleos que Broadwell.  Isso pode ser explicado por um modo turbo mais eficiente e por um hyperthreading aprimorado. <br><br><h2>  Criptografia sim√©trica </h2><br><img src="https://habrastorage.org/webt/pe/mn/ib/pemnibyrsgxfmkwl1luagfrvxbi.png"><br><br><img src="https://habrastorage.org/webt/ri/1u/1p/ri1u1pturbightaxqt2bmqu90o0.png"><br><br>  O desempenho dos n√∫cleos da Intel na criptografia sim√©trica √© simplesmente excelente. <br><br>  O AES-GCM usa uma combina√ß√£o de instru√ß√µes especiais de hardware para acelerar o AES e o CLMUL.  A Intel apresentou essas instru√ß√µes pela primeira vez em 2010, com seu processador Westmere e, a cada gera√ß√£o, eles aprimoravam seu desempenho.  O ARM introduziu recentemente um conjunto de instru√ß√µes semelhantes com seu conjunto de instru√ß√µes de 64 bits como uma adi√ß√£o opcional.  Felizmente, todos os fornecedores de equipamentos que conhe√ßo os implementaram.  √â altamente prov√°vel que a Qualcomm melhore o desempenho das instru√ß√µes criptogr√°ficas nas gera√ß√µes futuras. <br><br>  O ChaCha20-Poly1305 √© um algoritmo mais geral projetado de forma a fazer melhor uso de amplos m√≥dulos SIMD.  A Qualcomm possui apenas NEON SIMD de 128 bits, a Broadwell possui o AVX2 de 256 bits e a Skylake possui o AVX-512 de 512 bits.  Isso explica por que a Skylake com essa margem deixou a lideran√ßa na avalia√ß√£o do trabalho com um √∫nico n√∫cleo.  No teste de todos os n√∫cleos, ao mesmo tempo, o espa√ßo da Skylake em rela√ß√£o aos demais foi reduzido, pois deveria reduzir a frequ√™ncia do rel√≥gio ao executar cargas de trabalho AVX-512.  Ao executar o AVX-512 em todos os n√∫cleos, a frequ√™ncia base diminui para 1,4 GHz.  Lembre-se disso se voc√™ misturar o AVX-512 e outro c√≥digo. <br><br>  A conclus√£o sobre a criptografia sim√©trica √© que, apesar de a Skylake liderar, Broadwell e Falkor apresentaram resultados muito bons, com desempenho bastante alto para casos reais, dado que, do nosso lado, a RSA consome mais tempo do processador do que todos os outros algoritmos criptogr√°ficos combinados. . <br><br><h2>  Compress√£o (compress√£o) </h2><br>  O pr√≥ximo teste que eu queria fazer era a compacta√ß√£o.  Por duas raz√µes.  Primeiramente, essa √© uma carga de trabalho importante, porque quanto melhor a compacta√ß√£o, menos lacunas na capacidade e isso permitem uma entrega mais r√°pida de conte√∫do ao cliente.  Em segundo lugar, essa √© uma carga de trabalho de previs√£o incorreta de ramifica√ß√£o de alta frequ√™ncia muito exigente. <br><br>  Obviamente, o primeiro teste ser√° a popular biblioteca zlib.  No Cloudflare, usamos uma vers√£o aprimorada da biblioteca otimizada para processadores Intel de 64 bits e, embora seja escrita principalmente em C, ela usa alguns recursos internos espec√≠ficos da Intel.  Seria injusto comparar esta vers√£o otimizada com o zlib original.  Mas n√£o se preocupe, um pouco de esfor√ßo e eu adaptei a biblioteca para que ela funcione na arquitetura ARMv8, usando as propriedades NEON e CRC32.  Al√©m disso, sua velocidade √© 2 vezes maior que a original, para alguns arquivos. <br><br>  O segundo teste √© a nova biblioteca brotli, escrita em C e permitindo o uso de condi√ß√µes iguais para todas as plataformas. <br><br>  Todos os testes foram realizados no HTML blog.cloudflare.com, na mem√≥ria, semelhante √† forma como o NGINX realiza a compacta√ß√£o de streaming.  A menos que a vers√£o espec√≠fica do arquivo HTML tenha 29329 bytes, o que √© um bom indicador, pois corresponde ao tamanho da maioria dos arquivos que compactamos.  O teste de compacta√ß√£o paralela √© a compacta√ß√£o paralela de v√°rios arquivos ao mesmo tempo; a compacta√ß√£o √∫nica √© a compacta√ß√£o de um arquivo em v√°rios fluxos, semelhante √† maneira como o NGINX funciona. <br><br>  <b>gzip</b> <br><br><img src="https://habrastorage.org/webt/jz/ns/mo/jznsmosepbzqy5mykgygmspskhc.png"><br><br><img src="https://habrastorage.org/webt/mq/cw/rm/mqcwrmjprwyfhogfakh9rez8yas.png"><br><br>  Usando o gzip no n√≠vel de n√∫cleo √∫nico, a Skylake, sem d√∫vida, vence.  Com uma frequ√™ncia mais baixa que a Broadwell, a Skylake se beneficia de uma menor exposi√ß√£o a erros de previs√£o das ag√™ncias.  O n√∫cleo Falkor n√£o est√° muito atr√°s.  No n√≠vel do sistema, o Falkor tem um desempenho muito melhor com mais n√∫cleos.  Observe como o gzip se adapta bem a v√°rios n√∫cleos. <br><br>  <b>Brotli</b> <br><br>  Com brotli em um n√∫cleo, a situa√ß√£o √© semelhante √† anterior.  Skylake √© o mais r√°pido, mas Falkor n√£o est√° muito atr√°s.  E no padr√£o 9, o Falkor √© ainda mais r√°pido.  O Brotli padr√£o 4 √© muito semelhante ao n√≠vel 5 do gzip, enquanto a compacta√ß√£o real ainda √© melhor (8010B versus 8187B). <br><br>  Ao compactar em v√°rios n√∫cleos, a situa√ß√£o se torna um pouco confusa.  Para os n√≠veis 4, 5 e 6, o brotli escala muito bem.  Nos n√≠veis 7 e 8, ele come√ßa a cair produtivamente no n√∫cleo, afundando no n√≠vel 9 no n√≠vel 9, onde obtemos 3 vezes menos produtividade de todos os n√∫cleos em compara√ß√£o com um. <br><br>  Na minha opini√£o, isso se deve ao fato de que, a cada n√≠vel, o brotli come√ßa a consumir mais mem√≥ria e trava o cache.  Os indicadores est√£o come√ßando a se recuperar j√° nos n√≠veis 10 e 11. <br><br><img src="https://habrastorage.org/webt/fj/8b/h_/fj8bh_k2ztukrrvk5mrnsewzh1m.png"><br><br><img src="https://habrastorage.org/webt/gc/re/b9/gcreb99cb-d-ve1ofgmz5rkgity.png"><br><br>  Como conclus√£o, Falkor venceu, j√° que a compacta√ß√£o din√¢mica n√£o ultrapassar√° o n√≠vel 7. <br><br><h2>  Golang </h2><br>  Golang √© outra linguagem muito importante para o Cloudflare.  Tamb√©m √© um dos primeiros idiomas para suportar o ARMv8, para que voc√™ possa esperar um bom desempenho.  Eu usei alguns testes internos, mas os modifiquei para v√°rias goroutines. <br><br>  <b>Ir criptografia</b> <br><br>  Eu gostaria de come√ßar com testes de desempenho de criptografia.  Gra√ßas ao OpenSSL, temos excelentes dados de origem e ser√° muito interessante ver o qu√£o boa √© a biblioteca Go. <br><br><img src="https://habrastorage.org/webt/xy/fj/pf/xyfjpfgcv19xdvypw4tu35ejyrm.png"><br><img src="https://habrastorage.org/webt/9v/xg/tr/9vxgtrubcqgpmuemhspyvlzzr9w.png"><br><img src="https://habrastorage.org/webt/tv/gk/11/tvgk11dl9zsya8m1bvz6cmzwwqk.png"><br><img src="https://habrastorage.org/webt/cn/ws/ue/cnwsuep6om3uhmwimyyxx1oj0yk.png"><br><br>  Em rela√ß√£o √† criptografia Go, o ARM e a Intel n√£o est√£o na mesma categoria de peso.  O Go possui um c√≥digo assembler altamente otimizado para ECDSA, AES-GCM e Chacha20-Poly1305 na Intel.  Tamb√©m existem fun√ß√µes matem√°ticas otimizadas usadas nos c√°lculos de RSA.  O ARMv8 n√£o tem tudo isso, o que o coloca em uma posi√ß√£o muito desvantajosa. <br><br>  No entanto, a diferen√ßa pode ser reduzida com relativamente pouco esfor√ßo e sabemos que, com a otimiza√ß√£o adequada, o desempenho pode estar no mesmo n√≠vel do OpenSSL.  Mesmo mudan√ßas muito pequenas, como a implementa√ß√£o da fun√ß√£o addMulVVW na montagem, levam a um aumento de dez vezes no desempenho da RSA, colocando Falkor (com uma pontua√ß√£o de 8009) acima de Broadwell e Skylake. <br><br>  Vale a pena notar outra coisa interessante - no Skylake, o c√≥digo Go Chacha20-Poly1305 que usa o AVX2 funciona da mesma maneira que o c√≥digo OpenSSL AVX512.  Novamente, isso se deve ao fato de o AVX2 operar em frequ√™ncias de clock mais altas. <br><br>  <b>Go gzip</b> <br><br>  Agora, vamos dar uma olhada no desempenho Go do gzip.  Tamb√©m h√° um √≥timo guia para c√≥digo bastante otimizado, e podemos compar√°-lo com o Go.  No caso da biblioteca gzip, n√£o h√° otimiza√ß√µes espec√≠ficas para a Intel. <br><br><img src="https://habrastorage.org/webt/q5/r4/zi/q5r4zife3uy5oyx7xibltas7z0i.png"><br><br><img src="https://habrastorage.org/webt/np/lh/zw/nplhzwlsbteyuqd5rys9n_atkea.png"><br><br>  O desempenho do Gzip √© muito bom.  O desempenho em um √∫nico n√∫cleo Falkor fica significativamente atr√°s dos dois processadores Intel, mas no n√≠vel do sistema, ele conseguiu derrotar Broadwell e localizado abaixo de Skylake.  Como j√° sabemos que o Falkor √© superior aos outros dois processadores quando o C. est√° em execu√ß√£o, isso s√≥ pode significar uma coisa - o back-end do Go para o ARMv8 ainda n√£o foi finalizado em compara√ß√£o com o gcc. <br><br>  <b>Ir regexp</b> <br><br>  O Regexp √© amplamente usado em uma variedade de tarefas, porque seu desempenho tamb√©m √© extremamente importante.  Fiz testes internos em fluxos de 32 kb. <br><br><img src="https://habrastorage.org/webt/eb/lh/hw/eblhhwqsqlkorgzoskrl1ftjqew.png"><br><br><img src="https://habrastorage.org/webt/ck/so/w-/cksow-2fqsy9q71ayf82_girtme.png"><br><br><img src="https://habrastorage.org/webt/iu/gh/ma/iughmavke4vuhnid0wggsclwgc8.png"><br><br><img src="https://habrastorage.org/webt/hl/zu/39/hlzu39oybk_wktuewhnpnfxm7ia.png"><br><br>  No Falkor, o desempenho do Go regexp n√£o √© muito bom.  Ele ocupa o segundo lugar em testes m√©dios e complexos, gra√ßas a um n√∫mero maior de n√∫cleos, mas, no entanto, o Skylake √© muito mais r√°pido. <br><br>  Uma an√°lise mais detalhada do processo mostra que muito tempo √© gasto na fun√ß√£o bytes.IndexByte.  Essa fun√ß√£o possui uma implementa√ß√£o de assembler para amd64 (runtime.indexbytebody), mas a principal implementa√ß√£o √© para Go.  Durante testes leves, o regexp gastou ainda mais tempo com esse recurso, o que explica a diferen√ßa maior. <br><br>  <b>Ir strings</b> <br><br>  Outra biblioteca importante para o servidor da Web s√£o as seq√º√™ncias de caracteres Go.  Testei apenas a classe principal do Replacer. <br><br><img src="https://habrastorage.org/webt/36/tv/ho/36tvhoaz63ev1njmhzck3zw00iu.png"><br><br><img src="https://habrastorage.org/webt/ii/e9/pv/iie9pvryauw1fjclroxrwt4mnn0.png"><br><br>  Neste teste, Falkor est√° novamente atrasado, mesmo atr√°s de Broadwell.  Uma an√°lise mais detalhada revela uma longa perman√™ncia na fun√ß√£o runtime.memmove.  Voc√™ sabe o que?  Ela possui um c√≥digo assembler perfeitamente otimizado para amd64 que usa o AVX2, mas apenas o assembler mais simples que copia 8 bytes de cada vez.  Alterando 3 linhas neste c√≥digo e usando as instru√ß√µes LDP / STP (carregamento de par / armazenamento de par), voc√™ pode copiar 16 bytes por vez, o que aumentou o desempenho do memmove em 30%, o que, por sua vez, acelera o EscapeString e o UnescapeString em 20%.  E esta √© apenas a ponta do iceberg. <br><br>  <b>V√° conclus√£o</b> <br><br>  O suporte a aarch64 √© bastante decepcionante.  Tenho o prazer de anunciar que tudo foi compilado e funcionou perfeitamente, mas no lado do desempenho, poderia ser melhor.  Ficamos com a impress√£o de que a maior parte do esfor√ßo foi gasta no back-end do compilador, e a biblioteca estava quase intocada.  Existem muitas otimiza√ß√µes de baixo n√≠vel, por exemplo, minha corre√ß√£o addMulVVW, que levou 20 minutos.  A Qualcomm e outros fornecedores de ARMv8 pretendem gastar recursos t√©cnicos significativos para corrigir a situa√ß√£o, mas qualquer um pode realmente contribuir para o Go.  Portanto, se voc√™ quiser deixar sua marca na hist√≥ria, agora √© a hora. <br><br><h2>  Luajit </h2><br>  Lua √© a cola que mant√©m o Cloudflare unido. <br><br><img src="https://habrastorage.org/webt/zk/pv/7t/zkpv7t0xtx50qqqyyqnhanp0ydm.png"><br><br><img src="https://habrastorage.org/webt/we/4n/mv/we4nmvud-5vh6l7wds4cnak1fmq.png"><br><br>  Com exce√ß√£o do teste binary_trees, o desempenho do LuaJIT no ARM √© muito competitivo.  Ele vence dois testes e o terceiro fica frente a frente com os concorrentes. <br><br>  Vale ressaltar que o teste binary_trees √© extremamente importante, pois envolve muitos ciclos de aloca√ß√£o de mem√≥ria e coleta de lixo.  Exige uma considera√ß√£o mais meticulosa no futuro. <br><br><h2>  Nginx </h2><br>  Como uma carga de trabalho NGINX, decidi criar uma que se parecesse com o servidor real. <br><br>  Eu configurei um servidor que serve o arquivo HTML usado no teste gzip em https usando o conjunto de criptografia ECDHE-ECDSA-AES128-GCM-SHA256. <br><br>  Ele tamb√©m usa LuaJIT para redirecionar a solicita√ß√£o recebida, remover todas as quebras de linha e espa√ßos extras do arquivo HTML ao adicionar um carimbo de data / hora.  O HTML √© compactado usando o brotli 5. <br><br>  Cada servidor foi configurado para funcionar com tantos usu√°rios quanto processadores virtuais.  40 para Broadwell, 48 para Skylake e 46 para Falkor. <br><br>  Como cliente deste teste, usei o programa hey, executado em 3 servidores Broadwell. <br><br>  Ao mesmo tempo que o teste, fizemos leituras de energia dos blocos BMC correspondentes de cada servidor. <br><br><img src="https://habrastorage.org/webt/ch/9p/mv/ch9pmvqb1ro5yjn-cve_pw70dio.png"><br><br>  Com a carga de trabalho, o NGINX Falkor atendeu quase o mesmo n√∫mero de solicita√ß√µes do servidor Skylake, e ambos estavam significativamente √† frente do Broadwell.  As leituras de energia obtidas no BMC mostram que isso aconteceu quando a energia foi consumida metade do que os outros processadores.  Isso significa que a Falkor conseguiu obter 214 solicita√ß√µes / W, Skylake - 99 solicita√ß√µes / W e Broadwell - 77 solicita√ß√µes / W. <br><br>  Fiquei surpreso que Skylake e Broadwell consomem quase a mesma quantidade de energia, dado que s√£o produzidos da mesma maneira, e Skylake tem mais n√∫cleos. <br><br>  O baixo consumo de energia da Falkor n√£o √© surpreendente, pois os processadores Qualcomm s√£o conhecidos por sua alta efici√™ncia energ√©tica, o que lhes permitiu ocupar uma posi√ß√£o dominante no mercado de processadores para dispositivos m√≥veis. <br><br><h2>  Conclus√£o </h2><br>  A amostra de Falkor realmente me impressionou.  Essa √© uma grande melhoria em rela√ß√£o √†s tentativas anteriores em servidores baseados em ARM.  Obviamente, comparando o n√∫cleo com o n√∫cleo, o Intel Skylake √© muito melhor, mas se observarmos o n√≠vel do sistema, o desempenho se torna muito atraente. <br><br>  A vers√£o de produ√ß√£o do Centriq SoC conter√° 48 n√∫cleos Falkor operando em frequ√™ncias de at√© 2,6 GHz, o que proporciona um aumento potencial de desempenho de 8%. <br><br>  Obviamente, o Skylake que testamos n√£o √© um carro-chefe como a Platinum, com 28 n√∫cleos, mas esses 28 n√∫cleos custam muito e consomem 200W, enquanto tentamos otimizar nossos custos e aumentar o desempenho em 1 watt. <br><br>  No momento, estou mais preocupado com o fraco desempenho do idioma Go, mas isso mudar√° assim que os servidores baseados em ARM ocuparem seu nicho no mercado. <br><br>  O desempenho C e o LuaJIT s√£o muito competitivos e, em muitos casos, superiores ao Skylake.  Em quase todos os testes, Falkor provou ser um substituto digno para Broadwell. <br><br>  A maior vantagem para a Falkor no momento √© o baixo consumo de energia.  Embora o TDP seja de 120W, durante meus testes esse n√∫mero nunca excedeu 89W (para testes de avan√ßo).  , Skylake  Broadwell    160W,    TDP  170W. <br><br>  <b>Como um an√∫ncio.</b>  Estes n√£o s√£o apenas servidores virtuais!  Estes s√£o VPS (KVM) com unidades dedicadas, que n√£o podem ser piores que servidores dedicados e, na maioria dos casos - melhor!  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fabricamos VPS (KVM) com unidades dedicadas na Holanda e nos EUA</a> (configura√ß√µes de VPS (KVM) - E5-2650v4 (6 n√∫cleos) / 10GB DDR4 / 240GB SSD ou 4TB HDD / 1Gbps 10TB dispon√≠veis a um pre√ßo excepcionalmente baixo - de US $ 29 / m√™s , op√ß√µes com RAID1 e RAID10 est√£o dispon√≠veis)</b> , n√£o perca a chance de fazer um pedido para um novo tipo de servidor virtual, onde todos os recursos pertencem a voc√™, como em um dedicado, e o pre√ßo √© muito mais baixo, com um hardware muito mais produtivo! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como construir a infraestrutura do edif√≠cio.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente n√≥s temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt408741/">https://habr.com/ru/post/pt408741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt408731/index.html">Rob√¥s militares e seus desenvolvedores. Parte 2</a></li>
<li><a href="../pt408733/index.html">Um esqueleto √© bom e outro √© melhor: exoesqueletos modernos</a></li>
<li><a href="../pt408735/index.html">O rob√¥ human√≥ide de US $ 800 n√£o era do tamanho de um ser humano. Desculpe ...</a></li>
<li><a href="../pt408737/index.html">Balan√ßas inteligentes QardioBase 2: cada vez melhores</a></li>
<li><a href="../pt408739/index.html">Fotoss√≠ntese supercondutora ou como montar um cavalo de v√°cuo esf√©rico</a></li>
<li><a href="../pt408743/index.html">O menor laptop para jogos GPD WIN - Do que ele √© capaz e quem precisa?</a></li>
<li><a href="../pt408745/index.html">M√£os-livres, mas n√£o um telefone. Casa obediente quando n√£o h√° m√£os suficientes</a></li>
<li><a href="../pt408747/index.html">O aparecimento do novo ve√≠culo espacial, o primeiro voo do Falcon Heavy, duvida da confiabilidade do Dragon e do Starliner</a></li>
<li><a href="../pt408749/index.html">Feliz anivers√°rio, mouse de computador</a></li>
<li><a href="../pt408751/index.html">Amazon apresenta plataforma de desenvolvimento 3D, VR e AR</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>