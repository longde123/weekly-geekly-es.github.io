<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçüé§ ‚ÜôÔ∏è ü•û Verwenden von DBREPLICATION beim Reduzieren von Datenbanken unter Microsoft SQL Server üå®Ô∏è üè© üßëüèæ‚Äçü§ù‚Äçüßëüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unternehmensbuchhaltungssysteme zeichnen sich durch eine allm√§hliche Zunahme des Datenbankvolumens aufgrund der Anh√§ufung historischer Informationen a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Verwenden von DBREPLICATION beim Reduzieren von Datenbanken unter Microsoft SQL Server</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/438902/">  Unternehmensbuchhaltungssysteme zeichnen sich durch eine allm√§hliche Zunahme des Datenbankvolumens aufgrund der Anh√§ufung historischer Informationen aus.  Im Laufe der Zeit kann die Gr√∂√üe der Datenbank eine solche Gr√∂√üe erreichen, dass eine Reihe von Problemen hinsichtlich Leistung, Wartung, verf√ºgbarem Speicherplatz und mehr auftreten.  Heute betrachten wir zwei Ans√§tze zur L√∂sung dieses Problems: Erh√∂hung der Hardwareressourcen und Faltung historischer Daten. <br><br><img src="https://habrastorage.org/webt/be/xv/ok/bexvokyatldfnkxeh_vtgjuz27m.jpeg"><a name="habracut"></a><br><br><h2>  Einf√ºhrung </h2><br><p>  Dieser Artikel beschreibt das Problem des Faltens besonders gro√üer Datenbanken auf der MS SQL Server-Plattform.  Die L√∂sung f√ºr dieses Problem wird mithilfe der Replikationstechnologie DBREPLICATION von Softpoint beschrieben. </p><br><h2>  Problem </h2><br><p>  Jede Art von Buchhaltungssystem kann beginnen, ihre eigenen spezifischen Merkmale zu manifestieren.  In Systemen, die auf einer 1C-Plattform basieren, treten beispielsweise Probleme bei Routineoperationen wie dem Aktualisieren der Konfiguration und dem Aktualisieren der 1C-Plattform auf.  Mit dem Wachstum der Datenbank verschlechtert sich die Situation allm√§hlich, fr√ºher oder sp√§ter m√ºssen Ma√ünahmen ergriffen werden. </p><br><h2>  Ansatz Nr. 1: Hardware </h2><br><p>  Die naheliegendste und technisch transparenteste L√∂sung besteht darin, die Hardwareressourcen zu erh√∂hen.  Dies kann entweder der Kauf produktiverer Server, Festplattenspeicher usw. oder die Vermietung leistungsf√§higerer Ger√§te in einem Rechenzentrum oder einer Cloud eines Drittanbieters sein. </p><br><p>  Wenn Sie diesen Weg gehen, ist es eine gute Option, die Datenbank in der Microsoft Azure-Cloud zu platzieren.  Azure bietet verschiedene Architekturoptionen zum Hosten der Datenbank: MS SQL auf der virtuellen Azure-Maschine und drei Optionen f√ºr die Azure SQL-Datenbank in der Cloud.  Daher ist es m√∂glich, die optimalste Platzierungsoption in Abh√§ngigkeit von den Merkmalen einer bestimmten Datenbank und ihren Betriebsbedingungen auszuw√§hlen. </p><br><p>  Azure bietet gegen√ºber dem Kauf eigener Ger√§te eine Reihe von Vorteilen.  Eine der wichtigsten ist die enorme Hardwarefunktion, die Azure bereitstellen kann.  Sowie ein flexibler Ansatz zur Nutzung dieser Kapazit√§ten in Abh√§ngigkeit von der tats√§chlichen Belastung.  Sie k√∂nnen beispielsweise zus√§tzliche Kapazit√§ten f√ºr den Zeitraum der ‚ÄûHochsaison‚Äú Ihres Unternehmens oder zum Ende des Berichtszeitraums erwerben, sodass Spitzen problemlos vergehen k√∂nnen.  Verwenden Sie f√ºr den Rest der Zeit eine kosteng√ºnstigere Ressourcenkonfiguration.  Einerseits haben Sie zum richtigen Zeitpunkt Zugriff auf das enorme Ressourcenpotenzial von Azure (das √ºbrigens st√§ndig w√§chst), und andererseits k√∂nnen Sie √úberkapazit√§ten nicht √ºberbezahlen, wenn Sie sie nicht ben√∂tigen. </p><br><p>  Trotz seiner relativen Einfachheit ist die Erh√∂hung der Hardwareressourcen keine universelle L√∂sung.  Erstens ist der positive Effekt oft nicht proportional zu Finanzinvestitionen (es gibt viele Investitionen - es gibt nur geringe Auswirkungen).  Zweitens ist der Effekt vor√ºbergehend, da die Basis weiter w√§chst und mehr Ressourcen und mehr Finanzinvestitionen erfordert. </p><br><p>  In jedem Fall hat dieser Ansatz ein Recht auf Leben und ist weit verbreitet.  Wir werden uns jedoch nicht mehr damit befassen, da der Hauptzweck des Artikels nicht ein "Hardware" -Ansatz ist, sondern ein "Software" -Ansatz, der unten beschrieben wird. </p><br><h2>  Ansatz Nr. 2: Faltung der Basis </h2><br><p> Eine radikalere L√∂sung ist die Faltung der Datenbank, dh das Entfernen nicht relevanter historischer Daten aus der Datenbank.  In der reduzierten Datenbank gibt es nur Daten f√ºr einen relativ kleinen Betriebszeitraum, normalerweise sind es nicht mehr als 1-2 Jahre.  Offensichtlich ist der Grad der Reduzierung in jedem Fall unterschiedlich und es ist schwierig, bestimmte Zahlen zu benennen.  F√ºr eine Richtlinie nehmen wir jedoch einen Indikator f√ºr eine Abnahme der Basis um 50‚Äì70%, dh ungef√§hr das 2-3-fache, ungef√§hr die gleiche Menge, und es stellt sich in der Praxis heraus, dass weniger oder umgekehrt mehr - es ist selten. </p><br><p>  Wir werden uns nicht mit den daraus resultierenden Gewinnen befassen.  Wenn die Basis um das 2-3-fache oder mehr reduziert wird, ist der Leistungseffekt nat√ºrlich sehr leistungsf√§hig und langfristig, und zus√§tzliche Investitionen in die Hardwarekomponente k√∂nnen vermieden werden.  Und der einmal entwickelte und eingef√ºhrte Faltungsmechanismus kann in Zukunft wiederverwendet werden.  Im Allgemeinen ist dies eine sehr effektive L√∂sung mit garantierten Ergebnissen. </p><br><h2>  Die Komplexit√§t der Faltungsimplementierung </h2><br><p>  Bei aller Wirksamkeit hat die Faltung ein sehr gro√ües Problem.  Und es geht nicht einmal darum, den Faltungsmechanismus selbst zu entwickeln.  Ja, diese Entwicklung ist auch eine schwierige Aufgabe, aber sie ist irgendwie gel√∂st.  Die Sache ist anders.  Wenn die Datenbank eine Gr√∂√üe von mehreren hundert Gigabyte hat oder die Terabyte-Grenze √ºberschritten hat, stellt sich heraus, dass es einfach physikalisch sehr schwierig ist, den Faltvorgang durchzuf√ºhren.  Unweigerlich entsteht ein ganzer Komplex miteinander verbundener Schwierigkeiten, betrachten wir sie. </p><br><ul><li>  Ressourcenintensit√§t von Faltvorg√§ngen - Ausr√ºstung ist stark belastet. <br><ul><li>  W√§hrend der Faltung wird nicht nur eine gro√üe Anzahl von Daten physisch gel√∂scht, sondern es werden auch viele verwandte ressourcenintensive Vorg√§nge ausgef√ºhrt: verschiedene Auswahlen, √úberpr√ºfungen, Gruppierungen, Indizierungen, Protokollierungen, Verschieben von Daten zwischen Tabellen usw.  Diese Tatsache ist besonders wichtig, da die zusammenklappbare Datenbank in der Regel bereits stark ausgelastet ist und keinen Kapazit√§ts√ºberschuss aufweist. </li></ul></li><li>  Eingriffe in Benutzer. <br><ul><li>  Es ist √§u√üerst schwierig oder unm√∂glich, die Faltung direkt in der Arbeitsdatenbank parallel zur Arbeit des Benutzers durchzuf√ºhren, da durch den Faltungsprozess eine hohe zus√§tzliche Last und Sperren entstehen. </li></ul></li><li>  Es gibt kein technologisches Fenster. <br><ul><li>  Ein technologisches Fenster von ausreichender Dauer, wenn Benutzer nicht arbeiten, steht einfach nicht f√ºr die Faltung zur Verf√ºgung.  Schlie√ülich betr√§gt der Faltvorgang f√ºr Datenbanken dieser Gr√∂√üe in der Regel mehrere zehn Stunden oder mehrere Tage. </li></ul></li><li>  Hohe Risiken beim direkten Zusammenklappen auf die Arbeitsbasis. <br><ul><li>  Der Ansatz, wenn der Faltungsalgorithmus direkt auf die Arbeitsbasis angewendet wird, ist selbst aus einer Reihe von Gr√ºnden sehr riskant.  Eine davon - die M√∂glichkeiten zur endg√ºltigen √úberpr√ºfung der Ergebnisse der Faltung sind sehr begrenzt (keine Zeit). </li></ul></li><li>  Inakzeptable Dauer eines iterativen Ansatzes. <br><ul><li>  Sie k√∂nnen versuchen, einen Engpass zu vermeiden - ein technologisches Fenster - und die Iteration in iterativ kleinen Abschnitten direkt in der Produktionsbasis durchf√ºhren, indem Sie die Gr√∂√üe jedes Teils so ausw√§hlen, dass er in die vorhandenen technologischen Fenster passt.  Dieser Weg ist jedoch meistens auch nicht anwendbar, da sich der Trimmprozess erstens √ºber einen unannehmbar langen Zeitraum (viele Wochen oder Monate) erstreckt und zweitens die Komplexit√§t des Faltmechanismus stark zunimmt und die Gesamtkosten f√ºr die Sicherstellung eines ununterbrochenen Trimmprozesses √ºber einen so langen Zeitraum stark ansteigen Die Risiken des gesamten Projekts nehmen radikal zu. </li></ul></li><li>  Wie komprimiere ich Hohlr√§ume in einer Datendatei? <br><ul><li>  W√§hrend des Entfernens historischer Informationen aus der Datenbank nimmt die Datendatei nicht tats√§chlich ab (und nimmt oft sogar geringf√ºgig zu), sondern es entstehen einfach gro√üe Hohlr√§ume in der Datenbank.  Und Sie m√ºssen sie irgendwie loswerden, damit die Datendatei reduziert wird.  Andernfalls geht die Verst√§rkung in Bezug auf den Speicherplatz verloren.  Eine M√∂glichkeit besteht darin, einen typischen SHRINK auszuf√ºhren.  Und bei solchen B√§nden ist es ein sehr langwieriger Vorgang (viele Stunden oder sogar zehn Stunden). </li></ul></li></ul><br><p>  Daher ist die Faltung eine sehr nicht triviale Aufgabe.  Es reicht nicht aus, einen Faltungsmechanismus zu entwickeln, er muss auch angewendet werden.  Dar√ºber hinaus wird die Anwendung h√§ufig zu einem Engpass. </p><br><blockquote><p>  Hinweis: Als n√§chstes lassen wir die Entwicklung des Faltungsmechanismus selbst (mit anderen Worten des Algorithmus zum L√∂schen historischer Daten) in Klammern, unabh√§ngig davon, was bedeutet, dass er erstellt wird.  Und wir konzentrieren uns nur auf die Anwendung des bereits implementierten Mechanismus im Kampf. </p></blockquote><br><h2>  L√∂sung mit DBREPLICATION </h2><br><p>  Es scheint eine Sackgasse zu sein.  Es gibt aber noch L√∂sungen.  Es gibt eine effektive Technik, mit der Sie das gesamte Gewirr von Schwierigkeiten l√∂sen, Risiken beseitigen und das Ziel garantiert erreichen k√∂nnen.  Es beinhaltet die Verwendung der DBREPLICATION-Datenaustauschtechnologie.  Die L√∂sung eignet sich sowohl f√ºr die herk√∂mmliche Infrastrukturoption als auch f√ºr das Cloud-basierte Microsoft Azure.  Kurz gesagt, das Wesentliche ist wie folgt. </p><br><ul><li>  Ein Klon der Datenbank wird erstellt, der einseitige Datenaustausch zwischen dem Klon und der Hauptdatenbank wird mithilfe von DBREPLICATION konfiguriert.  Es ist zul√§ssig, dass sich die Hauptdatenbank und / oder ihr Klon (beide oder einer von ihnen) in der Microsoft Azure-Cloud befinden. </li><li>  Im Klon arbeiten Benutzer nicht, dort beginnt der Faltungsprozess.  Da der Faltvorgang niemanden st√∂rt, kann er dort den ganzen Tag ohne Unterbrechungen so lange dauern, wie es dauert.  Somit verschwindet der Link zur Dauer des technologischen Fensters! </li><li>  Benutzer ohne St√∂rung arbeiten in der Hauptdatenbank.  Die DBREPLICATION-Technologie √ºbertr√§gt alle √Ñnderungen automatisch mit hoher Geschwindigkeit von der Hauptdatenbank in die zusammenklappbare.  Somit ist der Klon hinsichtlich der Betriebsdaten auf dem neuesten Stand. </li><li>  Nach Abschluss der Faltung erfolgt in der Regel eine detaillierte √úberpr√ºfung des Ergebnisses unter Einbeziehung von Fachleuten und Gesch√§ftsanwendern des Kunden.  Und dieser Prozess kann ziemlich lange dauern (mehrere Stunden oder Tage).  In der betrachteten Methodik gibt es praktisch keine zeitliche Begrenzung, daher kann der √úberpr√ºfung so viel Zeit zugewiesen werden, wie erforderlich ist. </li><li>  Nach Abschluss der Faltung und √úberpr√ºfung wechseln alle Benutzer zum abgeschnittenen Klon und von diesem Moment an wird er zur Hauptbasis.  Und die urspr√ºngliche unbeschnittene Basis dient als Archiv historischer Daten. <br><ul><li>  Ein zus√§tzlicher Vorteil ist die M√∂glichkeit, die Replikation in die entgegengesetzte Richtung zu wechseln, wenn Benutzer zu einer minimierten Datenbank wechseln.  Dies bietet zus√§tzliche Sicherheit, denn wenn ‚Äûetwas schief geht‚Äú, k√∂nnen Sie Benutzer schnell wieder in die unbeschnittene Datenbank wechseln, ohne die eingegebenen Daten zu verlieren. </li></ul></li><li>  Wenn die Archivdatenbank auf dem neuesten Stand gehalten werden muss, k√∂nnen Sie die Replikation in die entgegengesetzte Richtung wechseln und die √Ñnderungen von der minimierten Datenbank in die Archivdatenbank √ºbertragen. </li></ul><br><p>  Abb. 1.  Schematische Darstellung des Datenbank-Trimmens mithilfe der DBREPLICATION-Technologie. </p><br><img src="https://habrastorage.org/webt/iq/sr/w6/iqsrw6aiiprzrf_k1wnlft-s3du.png"><br><br><p>  Abb. 2.  Option zum Hosten zusammenklappbarer Datenbanken in der MS Azure-Cloud. </p><br><img src="https://habrastorage.org/webt/fk/23/j1/fk23j1d1yukqu596txi2dijocoq.png"><br><br><p>  Somit erweitert die beschriebene Faltungstechnik in der Klondatenbank alle Engp√§sse.  Beseitigt die Abh√§ngigkeit vom technologischen Fenster.  Im Klon st√∂rt das Paket niemanden und niemand st√∂rt sie.  Sie k√∂nnen die maximalen Ressourcen des Klons sicher nutzen und auch der endg√ºltigen √úberpr√ºfung gen√ºgend Aufmerksamkeit schenken. </p><br><p>  Es bleibt abzuwarten, welche Austauschtechnologie in diesem Schema verwendet werden kann.  Warum DBReplication? </p><br><h2>  Warum DBReplication? </h2><br><p>  In der beschriebenen Methodik ist das Schl√ºsselelement die Austauschtechnologie, die die Synchronisation der zugeschnittenen Datenbank mit der Hauptdatenbank sicherstellt.  Grunds√§tzlich kann die Austauschtechnologie eine beliebige sein, wenn sie drei wesentliche Schl√ºsselbedingungen erf√ºllt: </p><br><ul><li>  Kompatibilit√§t mit der Gesch√§ftsanwendungsplattform, deren Basis zusammenbricht. </li></ul><br><blockquote><p>  Beispiel: Wenn wir die 1C-Datenbank reduzieren, ist nicht jede Exchange-Technologie mit der 1C-Basisstruktur kompatibel. Insbesondere die klassische MS Transaction Replication ist nicht kompatibel, da √Ñnderungen an der Tabellenstruktur vorgenommen werden. </p></blockquote><br><ul><li>  Leistung.  Die Austauschtechnologie muss garantiert sein, um den Fluss von √Ñnderungen zu bew√§ltigen, der w√§hrend der Faltung in der Arbeitsbasis auftritt. </li></ul><br><blockquote><p>  Erl√§uterung: In diesem Artikel meinen wir haupts√§chlich hoch geladene Datenbanken mit einer hohen Daten√§nderungsrate.  Die Faltung wird Dutzende von Stunden dauern, vielleicht mehrere Tage, vielleicht wird es sogar mehr als eine Iteration der Faltung geben.  W√§hrend dieser Zeit werden die Benutzer gro√üe √Ñnderungen vornehmen.  Viele Sharing-Technologien k√∂nnen damit einfach nicht umgehen.  Und Sie m√ºssen nicht nur fertig werden, es ist ratsam, mit dem Angebot fertig zu werden. </p></blockquote><br><ul><li>  Die haupts√§chliche Anwendbarkeit auf die Bedingungen des Problems. </li></ul><br><blockquote><p>  Erkl√§rung: Vielleicht scheint dieser Punkt selbstverst√§ndlich zu sein, aber wir k√∂nnen ihn trotzdem herausgreifen.  N√§mlich: Vergessen Sie nicht, dass die Daten in der Quellendatenbank und im Klon nicht gleich sind!  Diese Tatsache entfernt automatisch eine ganze Klasse leistungsstarker und produktiver Technologien, die auf der Synchronisierung von Transaktionsprotokollen basieren - immer aktiv, Protokollversand, Spiegelung usw. </p></blockquote><br><p>  Dar√ºber hinaus sollte die Austauschtechnologie in Bezug auf andere Indikatoren wirksam sein: </p><br><ul><li>  Zuverl√§ssigkeit und Autonomie des Funktionierens.  Da es sich um die √úbertragung gro√üer Datenmengen handelt und das Projektteam √ºber einen l√§ngeren Zeitraum einfach nicht in der Lage ist, Austauschprobleme, Kollisionen und Ausf√§lle manuell zu beheben, die Datenqualit√§t zu √ºberpr√ºfen usw.  Daher sollte die Austauschtechnologie hinsichtlich der Qualit√§t der √ºbertragenen Daten so zuverl√§ssig wie m√∂glich, so autonom und automatisiert wie m√∂glich sein. </li><li>  Hochwertige Benutzeroberfl√§chen f√ºr Steuerung und Verwaltung. </li><li>  Einfach bereitzustellen und zu konfigurieren.  Die Austauschtechnologie sollte keine √ºberm√§√üig hohen Anforderungen an die Qualifikation von Fachleuten f√ºr ihre Anpassung stellen. </li></ul><br><p>  Ohne diese Eigenschaften droht die Austauschtechnologie, sich von einem sparenden Schl√ºsselelement der Methodik in ein ‚Äûschwaches Glied‚Äú zu verwandeln, birgt ernsthafte Risiken und bedroht das gesamte Projekt.  Und dann verliert die urspr√ºngliche Idee ihre Bedeutung. </p><br><p>  Die DBReplication-Technologie erf√ºllt jedoch mit Sicherheit alle Anforderungen und sichert den Erfolg des Rollup-Projekts. </p><br><p>  Beachten Sie die Hauptfaktoren, aufgrund derer DBReplication bei dieser Aufgabe erfolgreich ist: </p><br><ul><li>  Sehr hoher Wechselkurs.  Beachten Sie einige Funktionen, die Geschwindigkeit bieten: <br><ul><li>  DBReplication ist eine Transaktionsreplikation. Jede √Ñnderung wird unmittelbar nach dem Festschreiben der Transaktion √ºbertragen. </li><li>  Die interne Architektur des Transportsubsystems verwendet L√∂sungen wie die parallele Verarbeitung von Warteschlangen mit mehreren Threads, einen Pipeline-Ansatz, die Stream-Komprimierung, die Verarbeitung von Batch-Transaktionen, die Verwendung von Bulk Insert und andere. </li></ul></li><li>  Der Transport basiert auf Windows-Diensten und ist mit vielen Funktionen ausgestattet, um einen reibungslosen Betrieb zu gew√§hrleisten.  Dazu geh√∂ren: automatische Wiederherstellung des Austauschs nach Kommunikationsunterbrechungen, Arbeiten an schwachen instabilen Kommunikationskan√§len, automatische Verarbeitung von Versionskonflikten (f√ºr bidirektionalen Austausch), automatische Anpassung bei √Ñnderungen in der Struktur von Tabellen einer Gesch√§ftsanwendung und andere. </li><li>  Garantierter Datenlieferungsmechanismus.  Strikte Einhaltung der Transaktionsintegrit√§t und -konsistenz bei der √úbertragung von √Ñnderungen. </li><li>  √Ñndert nicht die Tabellenstruktur der Gesch√§ftsanwendung.  Daher kann es insbesondere beim Falten von 1C-Datenbanken erfolgreich eingesetzt werden. </li><li>  Entwickelte Benutzeroberfl√§che, mit der Sie das Austauschsystem "aus einem Fenster" zentral verwalten k√∂nnen. Alle Serviceinformationen werden online gesammelt und angezeigt. </li><li>  Einfach bereitzustellen und zu konfigurieren. </li><li>  Angepasst f√ºr 1C-Plattform.  Der Benutzer arbeitet nicht mit Tabellen, sondern mit bekannten 1C-Metadatenobjekten. </li><li>  Jede Version von MS SQL ab 2005 von Standard bis Enterprise, sowohl lokal bereitgestellt als auch in der Cloud von MS Azure installiert.  Aus Azure-Sicht sind sowohl Hostingoptionen f√ºr virtuelle Maschinen als auch Azure SQL DB-Hostingoptionen zul√§ssig, einschlie√ülich einer verwalteten Instanz der Azure SQL-Datenbank ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://nam06.safelinks.protection.outlook.com/%3Furl%3D">verwaltete Instanz</a> ). </li><li>  DBReplication ist eine vorgefertigte, zuverl√§ssige L√∂sung, die von vielen Projekten unter verschiedenen Bedingungen und Aufgaben getestet wurde. </li><li>  Wenn DBREPLICATION im Einweg-Austauschmodus verwendet wird, kann die Austauschrichtung umgeschaltet werden. </li></ul><br><p>  Dar√ºber hinaus stellen wir ein weiteres wichtiges Merkmal fest: </p><br><ul><li>  DBREPLICATION kann in einem bidirektionalen Austauschmodus betrieben werden, wenn es m√∂glich ist, Daten gleichzeitig in alle am Austausch teilnehmenden Datenbanken einzugeben / zu √§ndern.  Die Anzahl der Basen, die in der Austauschschaltung enthalten sein k√∂nnen, ist nicht begrenzt. </li></ul><br><h2>  Praktisches Anwendungsbeispiel </h2><br><p>  Ein gro√ües russisches Unternehmen verf√ºgt √ºber ein Anwendungsabrechnungssystem, das auf der 1C 8 + MS SQL Server-Plattform basiert.  Die Hauptbetriebsbasis hat lange Zeit mehr als 2 Terabyte √ºberschritten und w√§chst weiter.  Gleichzeitig nimmt die Belastung immer mehr zu: sowohl transaktional als auch analytisch.  Am Ende wurden eine Reihe von Gr√ºnden f√ºr die Faltung der Basis gebildet.  Es wurde beschlossen, die historischen Daten f√ºr Anfang 2017 zu k√ºrzen.  Die hier unter Verwendung von DBReplication beschriebene Technik wurde ausgew√§hlt. </p><br><p>  An sich wurde beschlossen, den Faltungsalgorithmus haupts√§chlich von TSQL mit kleinen Einschl√ºssen typischer 1C-Werkzeuge zu implementieren.  Die Aufgabe wurde durch die Tatsache erschwert, dass nicht alle angewendeten Objekte (Tabellen) bis zum geplanten Datum reduziert werden konnten, da aufgrund von Gesch√§ftsmerkmalen in einer Reihe der gr√∂√üten Subsysteme die historischen Daten bis zu einer Tiefe von 5 bis 7 Jahren vollst√§ndig vorhanden sein mussten.  Aus Sicht des Volumens der Datenbank war der Effekt der Faltung daher nicht so gro√ü, wie wir es gerne h√§tten.  Es wurde eine vorl√§ufige Analyse durchgef√ºhrt, die ergab, dass unter Ber√ºcksichtigung objektiver Beschr√§nkungen etwa 33% des urspr√ºnglichen Volumens abgeschnitten werden.  Dies wurde vom Kunden jedoch als gutes Ergebnis bewertet, da der Gewinn nicht nur im Volumen der Datenbank als solcher, sondern auch in der Geschwindigkeit einzelner Tabellen liegt und das Volumen der Tabellen reduzierter Subsysteme um mehr als 33% abnahm - von 46% auf 77% (in 2- 3 mal). </p><br><p>  Schauen wir uns einige Indikatoren und Fakten zur tats√§chlichen Verwendung der Faltung genauer an.  Die Dauer der direkten Datenfaltung betrug etwa 12 Stunden.  Das Synchronisieren der akkumulierten √Ñnderungen mit DBREPLICATION dauerte ca. 1 Stunde.  Einer der wichtigsten Punkte des Projekts war die endg√ºltige √úberpr√ºfung der minimierten Basis durch die Spezialisten des Kunden.  Besonders hervorzuheben ist die Dauer - dieser Vorgang dauerte ca. 1 Woche.  Diese Dauer war auf die Tatsache zur√ºckzuf√ºhren, dass die √úberpr√ºfung sehr tiefgreifend und umfassend war, wobei Spezialisten verschiedener Profile einbezogen wurden, einschlie√ülich der Erstellung eines Datenmodells in einem externen System.  W√§hrend dieser ganzen Zeit wurde die minimierte Basis durch DBREPLICATION automatisch mit der aktuellen Kampfdatenbank synchronisiert.  Die √úberpr√ºfung war erfolgreich.  Und Benutzer wurden zu einer reduzierten Datenbank gewechselt.  Die vorherige Datenbank wurde mit schreibgesch√ºtztem Zugriff in den Archivstatus √ºbertragen.  Die nachfolgende Synchronisierung war nicht erforderlich, sodass die Replikation deaktiviert wurde. </p><br><b></b><p>  <u>Projektzusammenfassung:</u> </p><br><ul><li>  Die angewandte Technik hat sich vollst√§ndig ausgezahlt, da gen√ºgend Zeit vorhanden war, um die Faltung selbst abzuschlie√üen und die Daten umfassend zu √ºberpr√ºfen, wodurch das Risiko des √úberspringens bestimmter Fehler und des Wechsels zu einer reduzierten Datenbank radikal minimiert wurde. </li><li>  Faltung erfolgreich abgeschlossen: <br><ul><li>  Das Gesamtvolumen der operativen Datenbank verringerte sich um 33%.  Aus objektiven Gr√ºnden war es aufgrund von Einschr√§nkungen bei der Faltung einiger gro√üer Subsysteme nicht m√∂glich, eine gr√∂√üere Auswirkung auf das Volumen der Datenbank zu erzielen. </li><li>  Das Volumen der aktiv verwendeten Tabellen kollabierter Subsysteme verringerte sich um 46-77% (2-3-fach). </li></ul><br></li></ul><h2>  Fazit </h2><br><p>  DBReplication ist eine fertige, zuverl√§ssige L√∂sung, die seit vielen Jahren auf dem Markt ist und von vielen Projekten unter verschiedenen Bedingungen getestet wurde.  In der betrachteten Faltungstechnik √ºbernimmt DBReplication eine der wichtigsten Unteraufgaben - die Datenbanksynchronisation.  Bei besonders gro√üen Datenbanken werden sehr hohe Anforderungen an das Austauschsystem gestellt, und DBReplication erf√ºllt diese vollst√§ndig.  Es l√∂st seine Aufgabe zuverl√§ssig und effizient und sichert so den Erfolg des gesamten Projekts. </p><br><h2>  F√ºr welche anderen Aufgaben k√∂nnen Sie DBREPLICATION verwenden </h2><br><p>  Eine Reihe von Funktionen und Wettbewerbsvorteilen erm√∂glicht die Verwendung von DBReplication zur L√∂sung einer Reihe von Problemen.  Als Referenz listen wir sie auf. </p><br><ul><li>  Datenbankredundanz und Fehlertoleranz. </li><li>  Lastausgleich: Verteilen Sie ihn zwischen zwei oder mehr synchronen Datenbankinstanzen. </li><li>  Beim kontrollierten √úbergang zu neuen Softwareversionen (MS SQL, 1C) √§hnelt die Technik der Faltungstechnik. </li><li>  Aufbau eines verteilten Informationssystems mit Hochgeschwindigkeitsaustausch basierend auf DBReplication.  Insbesondere das Ersetzen der vorhandenen Unternehmensaustauschtechnologie durch eine produktivere und effizientere - DBREPLICATION. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de438902/">https://habr.com/ru/post/de438902/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de438892/index.html">Was ist eine Unternehmensblockchain?</a></li>
<li><a href="../de438894/index.html">Warum Webentwicklung auf Go sch√∂ner ist als auf PHP</a></li>
<li><a href="../de438896/index.html">Weinen Sie nicht Gesch√§ft</a></li>
<li><a href="../de438898/index.html">Chrome Reverse und Extension Installation</a></li>
<li><a href="../de438900/index.html">Auf dem Weg zu den physikalischen Prinzipien der biologischen Evolution. Ende + Volltext der √úbersetzung</a></li>
<li><a href="../de438906/index.html">Grundlegendes zum POCSAG-Paging-Protokoll</a></li>
<li><a href="../de438908/index.html">Schulung Cisco 200-125 CCNA v3.0. Cisco Certified Network Specialist (CCNA). Tag 1. Netzwerkgrundlagen</a></li>
<li><a href="../de438910/index.html">Samba als ADDC in Solaris 11.4</a></li>
<li><a href="../de438916/index.html">Notizen eines Phytochemikers. Die Kartoffel. Teil drei. "Bullet Fugu" oder SOLANIN</a></li>
<li><a href="../de438920/index.html">Avalonia: erstes Treffen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>