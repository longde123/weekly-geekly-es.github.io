<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤙🏽 🛶 ✋🏼 Comment nous avons restauré un fichier .wav endommagé 👩🏻‍💻 🙀 🙁</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Une expérience intéressante s'est produite lorsqu'un fichier .wav a été restauré avec un ami. J'ai décidé de décrire notre processus douloureux, tout ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons restauré un fichier .wav endommagé</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433178/"><p>  Une expérience intéressante s'est produite lorsqu'un fichier .wav a été restauré avec un ami.  J'ai décidé de décrire notre processus douloureux, tout à coup, quelqu'un sera utile. </p><br><h3 id="predystoriya">  Contexte </h3><br><p>  Il y a des histoires tristes lorsque l'enregistreur se fige / ou donne une erreur lors de l'enregistrement du fichier.  Par conséquent, lorsque nous essayons d'ouvrir un fichier endommagé, nous obtenons des erreurs telles que: le <u>format n'a pas pu être décodé, le format</u> est <u>incorrect</u> ou le <u>programme n'a pas reconnu le format de fichier</u> . <a name="habracut"></a></p><br><h3 id="pytaemsya-razobratsya">  Essayer de comprendre </h3><br><p>  Comme nous n'avons pas pu ouvrir le fichier, nous avons décidé de google.  Nous voulions comprendre comment envoyer le fichier .wav au lecteur.  Trouvé un tas de conseils: téléchargez-le en Raw (format brut), jouez avec les paramètres, etc.  Toutes ces tentatives ont échoué. </p><br><p>  Nous avons décidé d'étudier ce qu'est le wav en général, avons trouvé les informations sur les en-têtes et leur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">description</a> : </p><br><p><img src="http://soundfile.sapp.org/doc/WaveFormat/wav-sound-format.gif" alt="représentation schématique du format de fichier wav"></p><br><p>  Nous installons l'éditeur hexadécimal (wxHexEditor), ouvrons et essayons de trouver au moins quelque chose de similaire au titre. </p><br><p><img src="https://habrastorage.org/webt/kz/9n/pt/kz9npt8uepfbdiiqmgheyxcyrao.png" alt="fichier corrompu sans en-tête"></p><br><p>  Échec ... il n'y en avait pas. </p><br><p>  Nous avons décidé d'enregistrer un nouveau record avec une sauvegarde réussie.  Nous l'avons ouvert dans l'éditeur et regardons les en-têtes. </p><br><p><img src="https://habrastorage.org/webt/dp/c9/-k/dpc9-k6vxaw25x8tur2d4pqhnmo.png" alt="enregistrement normal, aucun titre sélectionné"></p><br><p>  Copiez les en-têtes et collez-les dans notre fichier battu (ci-après BF)!  Enregistrez et exécutez frénétiquement le fichier dans le lecteur, et rien ne fonctionne!  (Moi, comme un vrai homme, j'ai commencé à sangloter dans le coin de la pièce) </p><br><h3 id="pered-tem-kak-chto-to-postroit-nuzhno-chto-to-slomat">  Avant de construire quelque chose, vous devez casser quelque chose. </h3><br><p>  Nous avons décidé de trouver comment casser un fichier normal et obtenir une image aussi moche qu'un fichier endommagé. </p><br><p>  Figure: BF collé sur le dessus, enregistrement normal ci-dessous. </p><br><p><img src="https://habrastorage.org/webt/bv/4c/qf/bv4cqfqkdlit7vqt6cobebiy8ra.png" alt="ouvrir deux fichiers en audace"></p><br><p>  Il s'est avéré que si vous supprimez 1 octet dans hexRedator dans un fichier normal et enregistrez, l'image devient similaire.  Et si vous retournez un octet, même vide rempli de zéros, alors tout devient normal. </p><br><h3 id="napisanie-bash-skripta">  Écrire un script bash </h3><br><p>  Nous avons décidé de supprimer et enregistrer le fichier par octet afin d'obtenir une image normale, comme dans la figure ci-dessus.  Nous avons créé 2 fichiers, l'un juste les en-têtes et l'autre un fichier endommagé (après l'avoir coupé un peu moins d'un mégaoctet). </p><br><p>  Nous avons écrit un petit script qui supprime un octet du fichier et le colle avec l'en-tête, puis l'enregistre avec un numéro de série. </p><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash for i in {1..1000} do cat header.wav &gt; "./wav/$i.wav" tail -c +$i raw.wav &gt;&gt; "./wav/$i.wav" done</span></span></code> </pre> <br><p>  Nous commençons le script et avec appréhension, sur le bord du tabouret, nous attendons le résultat.  Malheureusement, nous avons dû visualiser ces fichiers manuellement, mais nous ne savions pas comment faire mieux d'une autre manière.  Ils ont jeté 250 fichiers en audace et regardé à travers les pistes: </p><br><p><img src="https://habrastorage.org/webt/pm/ed/bv/pmedbvvnlp8blflugm4hi9qkutc.png" alt="un tas de fichiers cassés"></p><br><p>  Il n'a pas été nécessaire de faire défiler longtemps, car sur le fichier 537 nous avons trouvé ce que nous cherchions: </p><br><p><img src="https://habrastorage.org/webt/6u/n-/fk/6un-fk4gu7neue2xft294sixhys.png" alt="le voici, 537 fichier avec un son normal"></p><br><p>  Cela reste le cas pour les petits.  Nous regardons ce fichier dans le hachage de l'éditeur où il s'est arrêté.  Ouvrez le BF dans l'éditeur et supprimez la longueur d'octet souhaitée après l'en-tête.  C'est tout, un fichier de deux heures joue normalement. </p><br><h2 id="ps">  PS </h2><br><p>  Très probablement, cela pourrait être rendu plus facile.  Qui sait comment faciliter le travail ou l'optimiser d'une manière ou d'une autre, écrivez, je vais ajouter à ce "guide". </p><br><p>  Merci à tous pour votre attention. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr433178/">https://habr.com/ru/post/fr433178/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr433164/index.html">Rapide et furieux: Forza Horizon 4 accélère avec les shaders de fenêtre</a></li>
<li><a href="../fr433166/index.html">Prédire le temps de solution de ticket à l'aide du Machine Learning</a></li>
<li><a href="../fr433168/index.html">Pourquoi un programmeur fait-il un stage en cuisine - une conversation avec Dodo Pizza sur le gemba, .NET et l'ouverture</a></li>
<li><a href="../fr433172/index.html">Nous attachons le multijoueur au jeu mobile "Make words from words" sur iOS et Android, écrit en C ++</a></li>
<li><a href="../fr433174/index.html">Tous les correctifs ne sont pas également utiles.</a></li>
<li><a href="../fr433180/index.html">Résolution des problèmes de type de données dans Ruby ou Fiabilisation des données</a></li>
<li><a href="../fr433182/index.html">Est-il possible de former un agent pour la négociation en bourse avec des renforts? Implémentation du langage R</a></li>
<li><a href="../fr433184/index.html">ASP.NET Core 2.2 est sorti. Quoi de neuf (2 sur 3)</a></li>
<li><a href="../fr433186/index.html">Il ne suffit pas de compter les polygones pour optimiser les modèles 3D</a></li>
<li><a href="../fr433188/index.html">Un projet de loi sur le travail autonome de Runet a été soumis à la Douma d'État</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>