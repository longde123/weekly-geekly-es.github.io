<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¥ª ğŸ™ï¸ ğŸ˜Œ Revisi tingkat akses pengguna menggunakan Power BI menggunakan contoh Bitrix CMS (BUS) ğŸ§—ğŸ¼ â™Šï¸ ğŸ‘©ğŸ»â€ğŸŒ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini menunjukkan contoh penggunaan Power BI untuk menganalisis akses pengguna di situs yang menjalankan 1C-Bitrix. 

 Masalah 
 Seiring waktu, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Revisi tingkat akses pengguna menggunakan Power BI menggunakan contoh Bitrix CMS (BUS)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457626/"><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.21-7683.png" alt="gambar"><br><br>  Artikel ini menunjukkan contoh penggunaan Power BI untuk menganalisis akses pengguna di situs yang menjalankan 1C-Bitrix. <br><a name="habracut"></a><br><h2>  Masalah </h2><br>  Seiring waktu, semakin banyak pengguna yang terhubung ke pengembangan sumber daya Internet dalam satu atau lain cara, dengan hak-hak lanjutan dari rata-rata pengguna situs. <br><br>  Dalam hal ini, menjadi semakin sulit untuk mengontrol akses ke fungsi-fungsi rahasia.  Nah, jika aturan ditulis yang membantu mengendalikan akses pada tingkat yang lebih atau kurang aman.  Tetapi sering terjadi bahwa rekan kerja pindah ke unit lain, pergi dengan dekrit :) atau pergi, dan akses tetap. <br><br>  Secara alami, ini membawa ancaman berbeda: kebocoran basis pelanggan, baik, hingga sabotase, dll. <br>  Usia proyek tempat saya bekerja sudah 10 tahun.  Basis data memiliki ratusan ribu pengguna, termasuk ratusan dengan hak istimewa. <br><br>  Artikel ini menunjukkan contoh bagaimana Anda dapat menyederhanakan audit pengguna ke berbagai objek situs di bawah kendali Bitrix CMS (BUS). <br><br>  Masalahnya adalah bahwa panel admin Bitrix tidak memberikan kesempatan untuk mendapatkan gambar lengkap dengan akses;  Mengklik banyak tautan dan menunggu halaman admin dimuat juga tidak menyenangkan. <br><br>  Power BI akan digunakan sebagai alat utama untuk ini (sedikit dari tujuan utamanya :) <br><br>  Diasumsikan bahwa pembaca sudah terbiasa dengan Power BI pada tingkat dasar, tahu dasar-dasar SQL, dan juga tahu cara menggunakan panel admin Bitrix.  Fitur aksesibilitas standar Bitrix akan dipertimbangkan. <br><br><h2>  Kerugian dari panel admin Bitrix </h2><br>  Tidak mungkin untuk melakukan audit di panel admin standar untuk waktu yang dapat diterima karena kurangnya gambar yang koheren dengan akses - data ringkasan untuk semua modul / bagian / blok info, dll., Di mana akses diberikan. <br><br>  Kinerja Admin: <br><br><ol><li>  Di bagian "Grup pengguna" pada panel admin Bitrix ada fitur yang menghasilkan kueri SQL untuk memilih semua grup dengan jumlah jumlah pengguna.  Semuanya baik ketika alasnya kecil.  Tetapi dengan database ratusan ribu pengguna, dengan ratusan grup pengguna pada server khusus dengan 128 GB RAM, cukup membuka bagian ini membutuhkan waktu 8 detik. </li><li>  Ada juga permintaan dalam kartu grup, yang karena alasan tertentu memilih semua grup pengguna, alih-alih menerima data hanya untuk yang dipilih.  Kerugian ditahan 3 detik. </li></ol><br><h2>  Solusi </h2><br>  Biasanya ada beberapa solusi untuk masalah tersebut. <br><br><ol><li>  Tulis aturan untuk menyediakan akses ke situs dan ikuti dengan jelas. </li><li>  Melakukan audit akses secara berkala. </li><li>  Berharap yang terbaik dan tidak menyia-nyiakan sumber daya perusahaan yang terbatas. </li></ol><br>  Artikel ini hanya akan membahas metode kedua. <br><br><h2>  Tugasnya </h2><br><ol><li>  Pilih alat yang akan memungkinkan Anda memperoleh data dengan cepat pada tingkat akses setiap pengguna dengan hak yang diperluas. </li><li>  Siapkan alat-alat sehingga mereka jelas menunjukkan gambar dengan akses secara keseluruhan dengan detail dan interaktivitas yang diperlukan. </li><li>  Melakukan audit akses. </li></ol><br><h2>  Akses penyimpanan dalam Bitrix </h2><br>  Bitrix memungkinkan Anda untuk mengkonfigurasi hak secara cukup fleksibel melalui grup pengguna. <br>  Pengaturan akses disimpan terutama di tabel MySQL.  Beberapa pengaturan disimpan dalam file.  Misalnya, akses file dan folder disimpan dalam file .access.php. <br><br>  Analisis akses pengguna dan grup pengguna ke: <br><br><ul><li>  blok info </li><li>  formulir web dengan tingkat akses </li><li>  status formulir web dengan tingkat akses </li><li>  bagian dari situs </li><li>  Modul Bitrix dengan tingkat akses </li></ul><br><h2>  Alat-alatnya </h2><br><ol><li>  Power BI Desktop, yang memungkinkan Anda untuk memvisualisasikan data dengan baik, mendapatkan data dari berbagai sumber (hampir) di luar kotak.  Sebenarnya, Power BI dapat diganti dengan Excel 2016 yang biasa dan lebih tinggi - PowerQuery sudah termasuk dalam pengirimannya, di mana Anda dapat memilih semua data untuk dianalisis.  Namun, Power BI memungkinkan Anda untuk menampilkan data secara interaktif berdasarkan hubungan mereka, dan ini memungkinkan Anda untuk dengan cepat menemukan dependensi tersembunyi. </li><li>  Konektor MySQL harus dapat membuat kueri melalui Power BI ke server web MySQL. </li><li>  Kitty atau Putty untuk tunneling ke MySql jika akses ke database terbuka hanya melalui SSH. </li></ol><br>  Skema akses berikut diperoleh: Daya BI â†’ Konektor MySQL â†’ Kitty â†’ MySQL. <br><br><h3>  Kekuatan BI </h3><br>  Power BI Desktop - memungkinkan Anda untuk memvisualisasikan data dengan baik, mendapatkan data dari berbagai sumber (hampir) di luar kotak.  Sebenarnya, Power BI dapat diganti dengan Excel 2016 yang biasa dan lebih tinggi - PowerQuery sudah termasuk dalam pengirimannya, di mana Anda dapat memilih semua data untuk dianalisis.  Namun, Power BI memungkinkan Anda untuk menampilkan data secara interaktif berdasarkan hubungan mereka, dan ini memungkinkan Anda untuk dengan cepat menemukan dependensi tersembunyi, yang kami butuhkan untuk revisi akses. <br><br>  Anda dapat mengunduhnya di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">halaman resmi</a> . <br><br><h3>  Konektor MySQL </h3><br>  Pergi ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">halaman</a> .  Unduh dan pasang.  Terkadang Anda harus me-restart PC Anda setelah instalasi. <br><br><h3>  Kitty / dempul </h3><br>  Untuk mengeksekusi query SQL ke database Bitrix, Anda perlu mengkonfigurasi tunnel. <br><br><ol><li>  Masukkan IP server dan porta <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.21-24929.png" alt="gambar"></li><li>  Kami memalu nama pengguna dan kata sandi di SSH <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.11-29155.png" alt="gambar"></li><li>  Kami melakukan port forwarding: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.11-29289.png" alt="gambar"></li><li>  Kami menyimpan pengaturan yang dibuat untuk digunakan di masa depan di profil: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.21-24400.png" alt="gambar"></li><li>  Kita mulai. </li></ol><br>  Anda juga bisa mengunduh Putty dan menjalankannya dengan perintah: <br><br><pre><code class="bash hljs">putty.exe -ssh <span class="hljs-string"><span class="hljs-string">"USER@HOST"</span></span> -pw <span class="hljs-string"><span class="hljs-string">"PASSWORD"</span></span> -2 -v -P 22 -L 3306:127.0.0.1:3306</code> </pre> <br>  Secara alami, Kitty / Putty harus dijalankan sebelum memperbarui data di Power BI. <br><br><h2>  Pengguna dan grup pengguna </h2><br>  Seperti dalam banyak CMS, Bitrix mengimplementasikan mekanisme untuk membatasi hak akses melalui grup pengguna. <br><br>  Membongkar entitas dari database ke dalam model data Power BI: <br><br><ul><li>  Grup </li><li>  Pengguna </li></ul><br>  ... serta hubungan antara grup dan pengguna. <br><br><h3>  Grup </h3><br>  Kami membatasi diri hanya untuk grup aktif. <br><br>  Daftar grup disimpan di tabel b_group. <br><br><ol><li>  Buat koneksi: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.21-22207.png" alt="gambar"></li><li>  Masukkan: <br><br><ol><li>  di bidang Server: localhost: 3306 </li><li>  di dalam Basis Data: bitrix_db (nama basis data yang digunakan Bitrix) </li><li>  Permintaan SQL: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span>, timestamp_x, active, <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, description, anonymous <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> b_group <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> active = <span class="hljs-string"><span class="hljs-string">'Y'</span></span>;</code> </pre> <br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.11-32597.png" alt="gambar"><br></li></ol><br></li><li>  Masukkan login dan kata sandi ke database dan kirim permintaan: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.11-224.png" alt="gambar"><br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.11-355.png" alt="gambar"><br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.11-812.png" alt="gambar"><br></li><li>  Segera berikan nama yang ramah untuk permintaan: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.21-18432.png" alt="gambar"></li><li>  Kami mencantumkan grup pada lembar terpisah dalam bentuk tabel: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.12-2562.png" alt="gambar"><br></li></ol><br>  Metode penggalian dan penyajian data ini akan serupa untuk pertanyaan lain yang terkait dengan basis data Bitrix. <br><br><h3>  Pengguna </h3><br>  Sekarang bongkar semua pengguna yang memiliki hak lanjut.  Tetapi Anda tidak boleh membongkar pengguna yang hanya termasuk dalam grup yang tidak memberi mereka hak tambahan apa pun, misalnya, "Semua pengguna, termasuk yang tidak terdaftar" (perlu dicatat bahwa koneksi grup ini dengan pengguna disimpan untuk semua pengguna yang terdaftar sebelum versi 12. Di yang lebih baru versi, grup dianggap sistemik dan tidak menyimpan data tentang komunikasi dengan pengguna basis data). <br><br>  Kami membatasi diri hanya untuk pengguna yang diaktifkan. <br><br>  Untuk melakukan ini, Anda perlu: <br><br><ol><li>  Pilih semua ID grup yang memberikan hak yang diperluas.  Ini diperlukan untuk menghemat lalu lintas, karena  jumlah entri dalam b_user_group dapat mencapai jutaan tergantung pada kompleksitas proyek. </li><li>  Buat permintaan dinamis untuk membongkar tautan Pengguna - Grup </li><li>  Bongkar pengguna yang memiliki tautan dari klausa 2. </li></ol><br>  Mari kita mulai: <br><br><ol><li>  Hubungi editor kueri: Beranda â†’ Edit Kueri </li><li>  Mari kita buat tautan ke permintaan awal "Grup": <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.21-18742.png" alt="gambar"></li><li>  Ubah nama permintaan baru menjadi "ID Grup" dan pilih hanya grup yang menarik dari sudut pandang keamanan. <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.12-5782.png" alt="gambar"></li><li>  Sekarang kita mendapatkan garis yang berisi ID grup yang dipisahkan oleh koma: <br><ul><li>  Tambahkan kolom khusus: AddColumn â†’ Umum â†’ Kolom Kustom <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.12-6399.png" alt="gambar"></li><li>  Hapus semua kolom kecuali ID dan Pengelompokan: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.12-6647.png" alt="gambar"></li><li>  Kelompokkan menurut kolom â€œPengelompokanâ€: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.12-6804.png" alt="gambar"><br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.12-6987.png" alt="gambar"></li><li>  Tambahkan kolom lain sebagai berikut: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.12-7947.png" alt="gambar"></li><li>  Mari kita perluas daftar sehingga nilainya dipisahkan dengan koma: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.12-7601.png" alt="gambar"></li><li>  Dan jatuh ke dalam sel yang dihasilkan: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.12-8091.png" alt="gambar"></li><li>  Power BI kemudian mengonversi kueri menjadi variabel yang dapat digunakan dalam kueri SQL dinamis: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.12-8306.png" alt="gambar"></li></ul></li><li>  Mari kita membuat permintaan "Kelompok-pengguna" yang berisi hubungan pengguna dengan grup, mirip dengan bagaimana hal itu dilakukan di bagian "Grup". <br><br>  Permintaan SQL: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> ug.user_id, ug.group_id <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> b_user_group ug <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_group g <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> g.id = ug.group_id <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_user u <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> u.id = ug.user_id <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> g.ACTIVE = <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> u.ACTIVE = <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> ug.group_id <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> ();</code> </pre> <br>  XXX perlu diganti dengan ID grup, dipisahkan dengan koma. <br></li><li>  Kami akan memanggil sumber permintaan untuk mengedit dan menggantinya dengan yang berikut: <br><br><pre> <code class="plaintext hljs">let sql = "SELECT ug.user_id, ug.group_id #(lf)FROM b_user_group ug #(lf)JOIN b_group g ON g.id = ug.group_id #(lf)JOIN b_user u ON u.id = ug.user_id #(lf)WHERE g.ACTIVE = 'Y' #(lf) AND u.ACTIVE = 'Y' #(lf) AND ug.group_id IN ("&amp;#"ID "&amp;");", Source = MySQL.Database("localhost:3306", "bitrix_db", [ReturnSingleDatabase=true, Query=sql, CreateNavigationProperties=false]) in Source</code> </pre> <br></li><li>  Setelah itu, Anda bisa mendapatkan peringatan berikut: <br><br><pre> <code class="plaintext hljs">Formula.Firewall: Query '-' (step 'Source') references other queries or steps, so it may not directly access a data source. Please rebuild this data combination.</code> </pre> <br>  Untuk menghilangkannya, Anda perlu mengubah tingkat privasi: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.12-11330.png" alt="gambar"><br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.21-19190.png" alt="gambar"><br><br>  Setelah itu, perbarui kueri. </li><li>  Kami membuat variabel "ID Pengguna" dengan cara yang sama seperti yang dilakukan untuk "ID Grup" (yaitu, kami membuat tautan dari permintaan Pengguna, dll.).  Dengan menggunakannya, kami akan menghasilkan kueri SQL yang memungkinkan kami memilih hanya pengguna yang kami butuhkan untuk analisis.  Pertama hapus duplikat user_id: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.12-12072.png" alt="gambar"></li><li>  Kami membuat permintaan untuk pemilihan pengguna, mirip dengan bagaimana hal itu dilakukan untuk "Kelompok-pengguna". <br><br><pre> <code class="sql hljs">SQL: <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span>, last_name, <span class="hljs-keyword"><span class="hljs-keyword">NAME</span></span>, email, date_register, last_login <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> b_user <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> active = <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span> ( );</code> </pre> <br>  XXX harus mengganti ID pengguna. <br></li></ol><br><h3>  Menyiapkan hubungan antara permintaan </h3><br>  Agar Power BI menyaring data secara interaktif dalam tampilan yang berbeda, Anda perlu menentukan hubungan antara kueri.  Dalam kasus kami, kami perlu menghubungkan bidang: <br><br><ul><li>  â€œGrup penggunaâ€ [group_id] â†’ â€œGrupâ€ [id] </li><li>  â€œKelompok penggunaâ€ [user_id] â†’ â€œPenggunaâ€ [id] </li></ul><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.12-14028.png" alt="gambar"><br><br>  Demikian pula, kami akan mengikat pertanyaan lain. <br><br><h3>  Laporan Pengguna dan Grup Pengguna </h3><br>  Pada tab Laporan, kami menampilkan daftar pengguna dan grup yang menggunakan Tabel sebagai elemen visualisasi. <br><br>  Dari permintaan â€œPenggunaâ€, pilih bidang: last_name, name, last_login, email. <br>  Dari permintaan â€œKelompok penggunaâ€, pilih bidang group_id. <br>  Karena  Karena kami menetapkan koneksi antar permintaan, Power BI akan dapat menggunakan fungsi agregasi Count dengan benar untuk menghitung jumlah grup yang dimiliki masing-masing pengguna. <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.16-23646.png" alt="gambar"><br><br>  Mari kita tambahkan Tabel lain di sebelahnya dan pilih bidang nama dari permintaan Grup, dan bidang user_id dari permintaan Grup pengguna - setel agregasi "Hitung (Berbeda)" untuknya untuk melihat jumlah pengguna dalam grup. <br><br>  Karena  Permintaan "Grup" dan "Pengguna" terhubung melalui permintaan asosiatif "Grup-pengguna", maka ketika Anda mengklik pengguna dalam tabel dengan daftar grup, hanya grup-grup yang menjadi milik pengguna yang dipilih yang akan ditampilkan.  Begitu juga sebaliknya. <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.16-24194.png" alt="gambar"><br><br>  Dengan cara ini, Anda dapat mengklik salah satu pengguna dan melihat grup yang menjadi anggotanya, atau mengklik grup tersebut dan melihat pengguna mana yang merupakan bagian dari grup.  Nah, kemudian buat keputusan tentang mengubah akses bagi pengguna. <br><br>  Berikut ini menjelaskan cara menempatkan tabel yang tersisa di laporan umum Power BI, karena  ini dilakukan dengan cara yang serupa. <br><br><h2>  .access.php </h2><br>  Dalam Bitrix Anda dapat mengatur akses ke folder dan file dengan menentukan nomor grup dan tingkat akses yang diperlukan dalam file .access.php. <br><br>  Tugas kita adalah untuk mengurangi data dari semua file .access.php yang tersebar di sekitar server proyek menjadi tampilan tabular. <br><br>  Untuk melakukan ini: <br><br><ol><li>  Kami mencari dan mengarsipkan semua file .access.php dari server, menyimpan path ke file-file ini. <br>  Saya menggunakan terminalka untuk mencari, menyalin, dan mengarsipkan file yang ditemukan.  Contoh perintah: <br><br><pre> <code class="bash hljs">find â€œBITRIX_PROJECT_DIRâ€ -name <span class="hljs-string"><span class="hljs-string">'.access.php'</span></span> -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f &gt; â€œOUTPUT_DIR/.access.php.files.txtâ€&amp;&amp;tar cvfpz â€œOUTPUT_DIR/.access.php.files.tarâ€ -T â€œOUTPUT_DIR/.access.php.files.txtâ€&amp;&amp;find â€œOUTPUT_DIRâ€ -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> d -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> chmod 775 {} \; &amp;&amp; find â€œOUTPUT_DIRâ€ -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> chmod 775 {} \;&amp;&amp;find â€œOUTPUT_DIRâ€ -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> d -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> chown bitrix:bitrix {} \; &amp;&amp; find â€œOUTPUT_DIRâ€/ -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -<span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> chown bitrix:bitrix {} \;</code> </pre> <br>  Di sini: <br><br><ul><li>  BITRIX_PROJECT_DIR - folder dengan proyek di Bitrix. </li><li>  OUTPUT_DIR - path ke folder tempat file .access.php.files.txt dengan daftar .access.php yang ditemukan akan ditempatkan, serta arsip .access.php.files.tar yang berisi salinan semua yang ditemukan .access.php. </li></ul><br>  Tentu, jika ada banyak proyek (multisite digunakan), maka kami memilih folder yang berisi semua proyek. </li><li>  Unduh dan unzip arsip .access.php di suatu tempat di sebelah proyek Power BI. <br>  Saya menulis file batch yang melakukan ini secara otomatis: unduhan diimplementasikan melalui wget;  melalui 7zip - membuka ritsleting. <br><br>  Contoh file batch: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.16-27936.png" alt="gambar"><br><br>  File yang berisi pengaturan untuk file batch: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.16-28309.png" alt="gambar"><br></li></ol><br>  Sekarang buat kueri yang akan meringkas isi semua .access.php dalam bentuk tabel. <br><br><ol><li>  Untuk kenyamanan, buat parameter yang akan berisi path ke folder dari mana kita akan mengekstrak konten semua .access.php <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.16-29768.png" alt="gambar"></li><li>  Kami akan memilih permintaan mengetik "Folder" dan memilih parameter kami sebagai jalur: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.16-30043.png" alt="gambar"></li><li>  Luaskan bidang Konten: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.16-3956.png" alt="gambar"><br><br>  XXXXXXX adalah pemisah kolom, Anda perlu satu kolom setelah mengimpor data dari semua file. </li><li>  Setelah itu, Power BI akan menghapus kolom yang kita butuhkan, berisi path ke .access.php.  Oleh karena itu, kita perlu mengedit langkah "Hapus kolom lain1", memilih "Jalur Folder" di dalamnya: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.16-2519.png" alt="gambar"></li><li>  Biarkan kolom: Folder Path dan Column1. </li><li>  Untuk menghapus path absolut ke file lokal dari Folder Path, gunakan penggantian: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.16-32195.png" alt="gambar"></li><li>  File .access.php berisi pengaturan akses dalam format: <br><br><pre> <code class="php hljs">$PERM[<span class="hljs-string"><span class="hljs-string">""</span></span>][<span class="hljs-string"><span class="hljs-string">"ID "</span></span>] = <span class="hljs-string"><span class="hljs-string">"&lt; &gt;"</span></span>;</code> </pre> <br>  Tugas kami adalah untuk menyebarkan kolom: Path, ID Grup, Level Akses.  Ini dilakukan dengan menggunakan filter, pemisahan kolom (Split Column) dan kolom khusus (Custom kolom). </li><li>  Hasilnya harus berupa tabel berikut: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.16-7888.png" alt="gambar"><br><br>  Seperti yang Anda lihat di bidang ID grup ada "*" (akses untuk semua orang).  Agar dapat menentukan koneksi dengan permintaan lain, kita perlu membuat bilangan bulat bidang ini, tanpa kehilangan informasi tentang "*" (yang berarti untuk semua grup).  Mari kita membuat dua permintaan, seperti "tautan" ke permintaan DotAccessPhp asli: <br><br><ul><li>  DotAccessPhpForRels pertama hanya akan berisi ID grup integer (kami menggunakan filter dengan menghapus * di kolom ID grup) - kami akan menghubungkannya dengan sisa permintaan: <br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.16-10824.png" alt="gambar"></li><li>  Yang kedua - DotAccessPhpForAll - saja * (gunakan filter). </li></ul></li></ol><br>  Diagram koneksi: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.16-11242.png" alt="gambar"><br><br>  Untuk hanya menampilkan data terkait saat memilih file dari DotAccessForRels dalam tampilan lain, ubah parameter "Arah filter silang" ke Keduanya: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.16-13400.png" alt="gambar"><br><br>  Untuk permintaan lain yang akan ditambahkan di bawah, ini juga perlu dilakukan. <br><br><h2>  Blok info </h2><br>  Anda perlu membongkar daftar blok info dan daftar tautan blok info dengan grup. <br><br>  Kami hanya akan mengunggah informasi tentang blok info aktif. <br><br><ol><li>  Kami membuat permintaan "Infoblocks".  Permintaan SQL: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> i.id, i.NAME <span class="hljs-string"><span class="hljs-string">''</span></span>, i.TIMESTAMP_X <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">GROUP_CONCAT</span></span>(ist.SITE_ID SEPARATOR <span class="hljs-string"><span class="hljs-string">', '</span></span>) <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> b_iblock i <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_iblock_site ist <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> ist.IBLOCK_ID = i.id <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>;   â€œ-â€: <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> ig.iblock_id, ig.group_id, ig.permission <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> b_iblock_group ig <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_group g <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> g.id = ig.group_id <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_iblock i <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> i.ID = ig.IBLOCK_ID <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> g.ACTIVE = <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> i.ACTIVE = <span class="hljs-string"><span class="hljs-string">'Y'</span></span>;</code> </pre> </li><li>  Kami memperbarui skema komunikasi, tidak lupa mengubah parameter "Arah filter silang" menjadi Keduanya: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.16-31351.png" alt="gambar"></li></ol><br><h2>  Bentuk </h2><br>  Dalam hal formulir, hak untuk grup pengguna diberikan baik untuk formulir itu sendiri maupun status di mana hasil mengisi formulir berada. <br><br><ol><li>  Buat permintaan untuk "Formulir": <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> f.ID, f.name <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">GROUP_CONCAT</span></span>(f2s.SITE_ID SEPARATOR <span class="hljs-string"><span class="hljs-string">', '</span></span>) <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> b_form f <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_form_2_site f2s <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> f2s.FORM_ID = f.ID <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>;</code> </pre> </li><li>  Buat permintaan "Grup formulir": <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DISTINCT</span></span> f2g.group_id, f2g.form_id, f2g.PERMISSION <span class="hljs-string"><span class="hljs-string">' '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> b_form_2_site f2s <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_form_2_group f2g <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> f2g.FORM_ID = f2s.FORM_ID <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_group g <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> g.ID = f2g.group_ID <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> g.ACTIVE = <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>;</code> </pre> </li><li>  Kami membuat permintaan "Formulir Status". <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> fs.ID, fs.TITLE <span class="hljs-string"><span class="hljs-string">''</span></span>, fs.form_id <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> b_form_status fs <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_form f <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> f.ID = fs.FORM_ID <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> fs.ACTIVE = <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> f2s.FORM_ID <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> b_form_2_site f2s <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> f2s.FORM_ID = f.ID <span class="hljs-keyword"><span class="hljs-keyword">LIMIT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>;</code> </pre> </li><li>  Buat permintaan "Formulir status grup" <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> fs2g.status_id, fs2g.group_id, fs2g.PERMISSION <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> b_form_status_2_group fs2g <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_form_status fs <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> fs.ID = fs2g.STATUS_ID <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_group g <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> g.ID = fs2g.group_ID <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_form f <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> f.ID = fs2g.GROUP_ID <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_form_2_site f2s <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> f2s.FORM_ID = f.ID <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> fs.ACTIVE = <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> (g.ACTIVE = <span class="hljs-string"><span class="hljs-string">'Y'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>;</code> </pre> </li><li>  Memperbarui skema koneksi: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.18-25734.png" alt="gambar"></li></ol><br><h2>  Modul </h2><br><ol><li>  Kami membuat permintaan "Grup modul". <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> mg.MODULE_ID <span class="hljs-string"><span class="hljs-string">''</span></span>, mg.group_id, mg.G_ACCESS <span class="hljs-string"><span class="hljs-string">''</span></span>, t.LETTER, t.NAME <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> b_module_group mg <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_group g <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> g.id = mg.GROUP_ID <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> b_task t <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> t.MODULE_ID = mg.MODULE_ID <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> t.BINDING = <span class="hljs-string"><span class="hljs-string">'module'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> g.active = <span class="hljs-string"><span class="hljs-string">'Y'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> mg.G_ACCESS = t.LETTER;</code> </pre> </li><li>  Memperbarui komunikasi: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.20-998.png" alt="gambar"></li></ol><br><h2>  Papan skor </h2><br>  Kami menyesuaikan gaya tabel, menggunakan ruang yang dapat digunakan secara maksimal. <br><br>  Hasilnya harus mirip dengan yang berikut: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.18-28241.png" alt="gambar"><br><br>  Papan skor yang sedikit dimodifikasi (jumlah elemen dalam tabel): <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.20-1923.png" alt="gambar"><br><br>  Ngomong-ngomong, lebih mudah untuk mengkonfigurasi tampilan satu tabel, dan kemudian menerapkannya ke tabel lain menggunakan Home â†’ Format Painter.  Fungsi ini bertindak dengan cara yang sama seperti di Word dan Excel (Format oleh sampel). <br><br><h2>  Tautan Admin </h2><br>  Agar Anda dapat dengan cepat masuk ke situs dan membuat pengaturan di panel admin, Anda dapat menambahkan kolom khusus dalam bahasa DAX dan menjadikannya jenis "URL Web".  Untuk melakukan ini, pilih kolom yang dibuat dan tentukan jenis yang sesuai (Pemodelan â†’ Properti â†’ Kategori Data â†’ URL Web). <br><br>  Contoh untuk permintaan Grup: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.19-196.png" alt="gambar"><br><br>  Tambahkan kolom ke tampilan: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.19-866.png" alt="gambar"><br>  Sekarang Anda cukup mengklik pada sel tabel dan pergi ke kartu grup di panel admin Bitrix. <br><br><h2>  Laporan File </h2><br>  Untuk kenyamanan, Anda dapat membuat laporan terpisah dengan menempatkan tabel di atasnya mengenai akses ke file dan bagian dari sumber daya Internet: <br><br><img src="https://www.uchitel-izd.ru/upload/files/clip2net/ol/2019/06.20-30194.png" alt="gambar"><br><br>  Laporan ini juga menambahkan tautan untuk mengedit semua .access.php secara langsung melalui panel admin Bitrix. <br><br><h2>  Ringkasan </h2><br>  Bitrix adalah juara di antara monster cms dengan pro dan kontra yang jelas, cantik di luar dan mengerikan di dalam.  Itu tidak memiliki alat administrasi akses yang mudah.  Tetapi masalah ini diselesaikan dengan bantuan alat gratis, tanpa menarik waktu programmer yang berharga untuk proses ini. <br><br>  Kelebihan dari pendekatan ini juga mencakup kemampuan untuk dengan cepat melengkapi model di Power BI dengan informasi tambahan dari Bitrix, misalnya, seseorang ingin tahu kapan .access.php dan lainnya dibuat atau diubah. <br><br>  Sekarang, setelah membangun model hak akses dan memvisualisasikannya di Power BI, itu sudah cukup: <br><br><ol><li>  klik secara konsisten pada pengguna, grup, formulir, file, dan secara real time lihat semua koneksi terkait akses; </li><li>  cepat pergi ke halaman admin yang diperlukan untuk mengedit; </li><li>  Perbarui model data dengan data Bitrix terbaru langsung di Power BI. </li></ol><br>  Akibatnya, audit dilakukan dan penyesuaian dilakukan dalam akses pengguna. <br><br>  PS Di pasar ada modul gratis "Access Control Center", tetapi sangat terbatas, dan komentar terakhir adalah lebih dari 5 tahun.  Mungkin seseorang akan menyukai gagasan membangun dasbor seperti itu di Bitrix dan dia akan mengimplementasikannya sebagai modul ... <br><br>  PS2.  Jika ada yang tertarik pada topik menggunakan Power BI untuk memecahkan masalah menemukan dependensi tersembunyi di berbagai sistem akuntansi, kemudian tulis di komentar.  Saya kemudian akan menulis beberapa artikel tentang hal ini. <br><br>  PS3  Terima kasih kepada kolega saya karena membantu saya menyiapkan artikel ini: Alexander Voronkov, Evgeny Shapochkin, Alexei Titov. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id457626/">https://habr.com/ru/post/id457626/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id457614/index.html">Rahasia mencari pekerjaan di luar negeri dari seorang headhunter yang berpraktik</a></li>
<li><a href="../id457616/index.html">"Wow, aku tidak tahu itu!" saat-saat dengan bercanda</a></li>
<li><a href="../id457618/index.html">Menjadi pengembang penuh tumpukan modern</a></li>
<li><a href="../id457622/index.html">Mengukur Kinerja Qt</a></li>
<li><a href="../id457624/index.html">Bagaimana kami memecahkan pondok tua itu dan membangun gedung pencakar langit di tempatnya</a></li>
<li><a href="../id457628/index.html">Program P2M dan manajemen proyek yang efektif</a></li>
<li><a href="../id457630/index.html">Pengalaman mengembangkan persyaratan untuk ilmuwan data kualitas profesional</a></li>
<li><a href="../id457632/index.html">Berapa tes unit?</a></li>
<li><a href="../id457634/index.html">DDS Synthesizer di Verilog</a></li>
<li><a href="../id457638/index.html">Tangkap aku jika kau bisa. Versi Nabi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>