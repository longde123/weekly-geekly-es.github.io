<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìå üî∑ üßñüèª Como escrevo notas de matem√°tica no LaTeX no Vim üè¢ üèáüèæ ‚ùî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="H√° algum tempo, no Quora, respondi √† pergunta: como acompanhar as notas das aulas de matem√°tica no LaTeX . Expliquei meu fluxo de trabalho de anota√ß√µe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como escrevo notas de matem√°tica no LaTeX no Vim</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445066/">  H√° algum tempo, no Quora, respondi √† pergunta: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">como acompanhar as notas das aulas de matem√°tica no LaTeX</a> .  Expliquei meu fluxo de trabalho de anota√ß√µes no LaTeX usando o Vim e o Inkscape (para desenhos).  Mas desde ent√£o, muita coisa mudou, ent√£o quero publicar v√°rias postagens no blog com uma descri√ß√£o do novo processo.  Este √© o primeiro dos artigos. <br><br>  Comecei a usar o LaTeX para fazer anota√ß√µes no segundo semestre de um curso de matem√°tica e, desde ent√£o, escrevi mais de 1700 p√°ginas.  Aqui est√£o alguns exemplos de como o resumo se parece: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/9b2/6a1/c4d/9b26a1c4dcac70227b229935ae06599d.png"></a> <br><a name="habracut"></a><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/9e3/6dc/cef/9e36dccef8c096640212a3755d9ef2ec.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/793/760/039/79376003910994dc579e0ccf3da4f690.png"></a> <br><br>  Essas anota√ß√µes, incluindo desenhos, s√£o feitas diretamente na palestra e n√£o s√£o editadas posteriormente.  Para escrever resumos com efici√™ncia no LaTeX, quatro regras devem ser seguidas: <br><br><ul><li>  Escrever texto e f√≥rmulas no LaTeX deve ser t√£o r√°pido quanto um professor escrever no quadro: o atraso √© inaceit√°vel. <br></li><li>  As ilustra√ß√µes dos desenhos devem ser quase t√£o r√°pidas quanto as do professor. <br></li><li>  Gerenciar notas, ou seja, adicionar notas, organizar todas as notas, as duas √∫ltimas palestras, pesquisar notas etc. deve ser r√°pido e f√°cil. <br></li><li>  Dever√° ser poss√≠vel anotar documentos PDF usando o LaTeX, se eu quiser escrever uma nota com um documento PDF. </li></ul><br>  Este artigo √© sobre o primeiro ponto: anotando o LaTeX. <br><br><h1>  Vim e LaTeX </h1><br>  Para escrever texto e f√≥rmulas matem√°ticas no LaTeX, eu uso o Vim.  Este √© um poderoso editor de texto de uso geral, altamente extens√≠vel.  Eu o uso para escrever c√≥digo, LaTeX, texto Markdown ... em geral, qualquer texto.  Ele tem uma curva de aprendizado bastante √≠ngreme, mas se voc√™ dominou a base, j√° √© dif√≠cil retornar ao editor sem as teclas de atalho habituais.  √â assim que minha tela se parece quando edito um documento do LaTeX: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/eb5/999/261/eb5999261b4ba963fd49f999477731eb.png"></a> <br><br>  √Ä esquerda, o Vim, e √† direita, o visualizador de PDF do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Zathura</a> , que tamb√©m suporta atalhos de teclado no estilo do Vim.  Eu trabalho no Ubuntu com o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gerenciador de</a> janelas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bspwm</a> .  Como um plugin, o LaTeX instalou o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vimtex</a> .  Ele fornece destaque de sintaxe, sum√°rio, synctex, etc. Usando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vim-plug,</a> eu o configurei da seguinte maneira: <br><br> <code>Plug 'lervag/vimtex' <br> let g:tex_flavor='latex' <br> let g:vimtex_view_method='zathura' <br> let g:vimtex_quickfix_mode=0 <br> set conceallevel=1 <br> let g:tex_conceal='abdmg'</code> <br> <br>  As duas √∫ltimas linhas ajustam o disfarce.  Esta √© uma fun√ß√£o na qual o c√≥digo LaTeX √© substitu√≠do ou fica invis√≠vel quando o cursor n√£o est√° nesta linha.  Se voc√™ ocultar <code>\ [</code> , <code>\]</code> , <code>$</code> , eles n√£o ser√£o t√£o vis√≠veis, o que fornece uma melhor vis√£o geral do documento.  Essa fun√ß√£o tamb√©m substitui <code>\bigcap</code> por <code>‚à©</code> , <code>\in</code> por <code>‚àà</code> , etc., conforme mostrado na anima√ß√£o: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d36/2e0/b83/d362e0b837be308b0f8897482a331ec6.gif"><br><br>  Com essa configura√ß√£o, voc√™ pode realizar a tarefa: escreva no LaTeX o mais r√°pido que um professor escreve no quadro.  Snippets entram em jogo aqui. <br><br><h1>  Snippets </h1><br><h3>  O que √© um trecho? </h3><br>  Um snippet √© um pequeno peda√ßo de texto reutiliz√°vel chamado por outro texto.  Por exemplo, ao digitar sinal e pressionar Tab, o sinal da palavra se transforma em uma assinatura: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5ab/28b/1ad/5ab28b1ad6114b68f4ce459d4f89eeae.gif"><br><br>  Os trechos podem ser din√¢micos: quando eu digito <code>today</code> e pressiono <code>Tab</code> , a palavra <code>today</code> √© substitu√≠da pela data atual e a <code>box</code> - <code>Tab</code> se torna um campo que cresce automaticamente em tamanho. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1b6/301/a65/1b6301a6561d104b4bc79654cb75470d.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/8b7/cae/fc4/8b7caefc472eae0941f41365d16e8d2d.gif"><br><br>  Voc√™ pode at√© usar um trecho dentro de outro: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cdd/1fd/ed4/cdd1fded48947d163c2e5e6b974cfec0.gif"><br><br><h3>  Criando snippets com o UltiSnips </h3><br>  Para controlar trechos, eu uso o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plug-</a> in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">UltiSnips</a> .  Aqui est√° sua configura√ß√£o: <br><br><pre> <code class="plaintext hljs">Plug 'sirver/ultisnips' let g:UltiSnipsExpandTrigger = '&lt;tab&gt;' let g:UltiSnipsJumpForwardTrigger = '&lt;tab&gt;' let g:UltiSnipsJumpBackwardTrigger = '&lt;s-tab&gt;'</code> </pre> <br>  C√≥digo para o <code>sign</code> trecho: <br><br><pre> <code class="plaintext hljs">snippet sign "Signature" Yours sincerely, Gilles Castel endsnippet</code> </pre> <br>  Para trechos din√¢micos, voc√™ pode colocar o c√≥digo entre as aspas posteriores, esse c√≥digo ser√° executado quando o trecho se estender.  Aqui eu usei o bash para formatar a data atual: <code>date + %F</code> <br><br><pre> <code class="plaintext hljs">snippet today "Date" `date +%F` endsnippet</code> </pre> <br>  Dentro do bloco <code>`!p ... `</code> , voc√™ pode escrever em Python.  Veja o c√≥digo do trecho da <code>box</code> : <br><br><pre> <code class="python hljs">snippet box <span class="hljs-string"><span class="hljs-string">"Box"</span></span> `!p snip.rv = <span class="hljs-string"><span class="hljs-string">'‚îå'</span></span> + <span class="hljs-string"><span class="hljs-string">'‚îÄ'</span></span> * (len(t[<span class="hljs-number"><span class="hljs-number">1</span></span>]) + <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-string"><span class="hljs-string">'‚îê'</span></span>` ‚îÇ $<span class="hljs-number"><span class="hljs-number">1</span></span> ‚îÇ `!p snip.rv = <span class="hljs-string"><span class="hljs-string">'‚îî'</span></span> + <span class="hljs-string"><span class="hljs-string">'‚îÄ'</span></span> * (len(t[<span class="hljs-number"><span class="hljs-number">1</span></span>]) + <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-string"><span class="hljs-string">'‚îò'</span></span>` $<span class="hljs-number"><span class="hljs-number">0</span></span> endsnippet</code> </pre> <br>  Em vez desse c√≥digo, o valor da vari√°vel <code>snip.rv</code> ser√° inserido no documento.  Dentro dos blocos, voc√™ tem acesso ao estado atual do trecho, por exemplo, <code>t[1]</code> corresponde ao local da primeira guia, <code>fn</code> nome do arquivo atual, etc. <br><br><h1>  Snippets do LaTeX </h1><br>  Os trechos aceleram significativamente o trabalho, especialmente alguns dos trechos mais complexos.  Vamos come√ßar com o mais simples. <br><br><h3>  O meio ambiente </h3><br>  Para inserir um ambiente, basta digitar <code>beg</code> no in√≠cio da linha.  Em seguida, o nome do ambiente, refletido no comando <code>\end{}</code> .  Pressionar <code>Tab</code> coloca o cursor dentro. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d5e/d64/1a9/d5ed641a9cb568d13dd56d98fec6376b.gif"><br><br>  O c√≥digo √© o seguinte: <br><br><pre> <code class="plaintext hljs">snippet beg "begin{} / end{}" bA \begin{$1} $0 \end{$1} endsnippet</code> </pre> <br>  O s√≠mbolo <code>b</code> significa que esse trecho funciona apenas no in√≠cio de uma linha. <code>A</code> significa expans√£o autom√°tica, ou seja, voc√™ n√£o precisa pressionar <code>Tab</code> .  As guias para onde voc√™ pressiona <code>Tab</code> e <code>Shift</code> + <code>Tab</code> s√£o indicadas como <code>$1</code> , <code>$2</code> , ... e a √∫ltima √© indicada como <code>$0</code> . <br><br><h3>  F√≥rmulas em linha e de exibi√ß√£o </h3><br>  Os dois snippets mais usados ‚Äã‚Äãs√£o <code>mk</code> e <code>dm</code> , que acionam o modo matem√°tico.  O primeiro para as f√≥rmulas embutidas, o segundo para as exibidas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/12a/16b/6a9/12a16b6a90c4d85a887c7cde0f18bb8c.gif"><br><br>  Trecho de f√≥rmula inteligente: ele sabe quando inserir um espa√ßo ap√≥s o sinal de cifr√£o.  Quando come√ßo a digitar uma palavra imediatamente ap√≥s o fechamento de $, ele adiciona um espa√ßo.  Mas se eu digitar outro caractere, ele n√£o adicionar√° um espa√ßo, como no caso de '$ p $ -value'. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/117/2a1/f55/1172a1f556fd36b42f7c3642b3952e2c.gif"><br><br>  O c√≥digo para esse snippet √©: <br><br><pre> <code class="plaintext hljs">snippet mk "Math" wA $${1}$`!p if t[2] and t[2][0] not in [',', '.', '?', '-', ' ']: snip.rv = ' ' else: snip.rv = '' `$2 endsnippet</code> </pre> <br>  <code>W</code> no final da primeira linha significa que o trecho se expande apenas nos limites da palavra.  Portanto, por exemplo, <code>hellomk</code> n√£o funcionar√° e o <code>hello mk</code> funcionar√°. <br><br>  O snippet para as f√≥rmulas exibidas √© mais simples, mas tamb√©m bastante conveniente.  Sempre faz as equa√ß√µes terminarem com um ponto. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a68/2e9/736/a682e97365ecfe19fe0c5bc08bacfec6.gif"><br><br><pre> <code class="plaintext hljs">&lt;snippet dm "Math" wA \[ $1 .\] $0 endsnippet</code> </pre> <br><h3>  Caracteres subscritos e sobrescritos </h3><br>  Outro trecho √∫til √© para √≠ndices.  <code>a_12</code> <code>a1</code> para <code>a_1</code> e <code>a_12</code> para <code>a_{12}</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f26/633/cb8/f26633cb822c6b52d346dfbba6e1a1bd.gif"><br><br>  O c√≥digo para esse snippet usa uma express√£o regular como gatilho.  Ele expande o fragmento quando voc√™ digita um caractere seguido por um d√≠gito codificado como <code>[A-Za-z]\d</code> , ou um caractere seguido por <code>_</code> e dois d√≠gitos: <code>[A-Za-z]_\d\d</code> . <br><br><pre> <code class="plaintext hljs">snippet '([A-Za-z])(\d)' "auto subscript" wrA `!p snip.rv = match.group(1)`_`!p snip.rv = match.group(2)` endsnippet snippet '([A-Za-z])_(\d\d)' "auto subscript2" wrA `!p snip.rv = match.group(1)`_{`!p snip.rv = match.group(2)`} endsnippet</code> </pre> <br>  Ao combinar partes de uma express√£o regular em um grupo usando par√™nteses, por exemplo, <code>(\d\d)</code> , voc√™ pode us√°-los na extens√£o de trecho via <code>match.group(i)</code> no Python. <br><br>  Para caracteres sobrescritos, eu uso <code>td</code> , que se transforma em <code>^{}</code> .  Embora para os mais comuns (quadrado, cubo e v√°rios outros), trechos separados sejam destinados, como <code>sr</code> , <code>cb</code> e <code>comp</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/da8/55c/d9e/da855cd9e67c48f508fab5ddc8c877fe.gif"><br><br><pre> <code class="plaintext hljs">snippet sr "^2" iA ^2 endsnippet snippet cb "^3" iA ^3 endsnippet snippet compl "complement" iA ^{c} endsnippet snippet td "superscript" iA ^{$1}$0 endsnippet</code> </pre> <br><h3>  Fra√ß√£o </h3><br>  Um dos trechos mais convenientes funciona com fra√ß√µes.  Ele faz as seguintes substitui√ß√µes: <br><br>  <code>//</code> ‚Üí <code>\frac{}{}</code> <br>  <code>3/</code> ‚Üí <code>\frac{3}{}</code> <br>  <code>4\pi^2/</code> ‚Üí <code>\frac{4\pi^2}{}</code> <br>  <code>(1 + 2 + 3)/</code> ‚Üí <code>\frac{1 + 2 + 3}{}</code> <br>  <code>(1+(2+3)/)</code> ‚Üí <code>(1 + \frac{2+3}{})</code> <br>  <code>(1 + (2+3))/</code> ‚Üí <code>\frac{1 + (2+3)}{}</code> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f8/3f1/bdc/3f83f1bdc3078aa16382e80a276f199f.gif"><br><br>  Para o primeiro, um c√≥digo simples: <br><br><pre> <code class="plaintext hljs">snippet // "Fraction" iA \\frac{$1}{$2}$0 endsnippet</code> </pre> <br>  As segunda e terceira substitui√ß√µes ocorrem com a ajuda de express√µes regulares correspondentes √†s express√µes <code>3/</code> , <code>4ac/</code> , <code>6\pi^2/</code> , <code>a_2/</code> , etc. <br><br><pre> <code class="plaintext hljs">snippet '((\d+)|(\d*)(\\)?([A-Za-z]+)((\^|_)(\{\d+\}|\d))*)/' "Fraction" wrA \\frac{`!p snip.rv = match.group(1)`}{$1}$0 endsnippet</code> </pre> <br>  Como voc√™ pode ver, express√µes regulares podem se tornar bastante longas, mas aqui est√° um diagrama que deve explicar tudo: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/908/df5/ec2/908df5ec254f9cd5b08b99b8a54318d0.svg"><br><br>  No quarto e quinto casos, o trecho tenta encontrar o colchete correspondente.  Como o mecanismo de regex UltiSnips n√£o sabe como fazer isso, tive que usar o Python: <br><br><pre> <code class="python hljs">priority <span class="hljs-number"><span class="hljs-number">1000</span></span> snippet <span class="hljs-string"><span class="hljs-string">'^.*\)/'</span></span> <span class="hljs-string"><span class="hljs-string">"() Fraction"</span></span> wrA `!p stripped = match.string[:<span class="hljs-number"><span class="hljs-number">-1</span></span>] depth = <span class="hljs-number"><span class="hljs-number">0</span></span> i = len(stripped) - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> stripped[i] == <span class="hljs-string"><span class="hljs-string">')'</span></span>: depth += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> stripped[i] == <span class="hljs-string"><span class="hljs-string">'('</span></span>: depth -= <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> depth == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; i -= <span class="hljs-number"><span class="hljs-number">1</span></span> snip.rv = stripped[<span class="hljs-number"><span class="hljs-number">0</span></span>:i] + <span class="hljs-string"><span class="hljs-string">"\\frac{"</span></span> + stripped[i+<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">-1</span></span>] + <span class="hljs-string"><span class="hljs-string">"}"</span></span> `{$<span class="hljs-number"><span class="hljs-number">1</span></span>}$<span class="hljs-number"><span class="hljs-number">0</span></span> endsnippet</code> </pre> <br>  Por fim, quero compartilhar um trecho que transforme a sele√ß√£o atual em uma fra√ß√£o.  Selecione o texto, pressione <code>Tab</code> , digite <code>/</code> e novamente <code>Tab</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0da/01b/956/0da01b9566dc437fabf0c563ed14941f.gif"><br><br>  O c√≥digo usa a vari√°vel <code>${VISUAL}</code> , que reflete sua escolha. <br><br><pre> <code class="plaintext hljs">snippet / "Fraction" iA \\frac{${VISUAL}}{$1}$0 endsnippet</code> </pre> <br><h3>  Sympy e Mathematica </h3><br>  Outro trecho interessante, mas menos usado, executa o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sympy</a> para avaliar express√µes matem√°ticas.  Por exemplo: a <code>Tab</code> <code>sympy</code> expande para <code>sympy | sympy</code>  <code>sympy | sympy</code> e <code>sympy 1 + 1 sympy</code> <code>Tab</code> <code>sympy 1 + 1 sympy</code> transforma em <code>2</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8c8/f14/3fd/8c8f143fdcdc2f3e6de9853cf7ea3def.gif"><br><br><pre> <code class="plaintext hljs">snippet sympy "sympy block " w sympy $1 sympy$0 endsnippet priority 10000 snippet 'sympy(.*)sympy' "evaluate sympy" wr `!p from sympy import * x, y, z, t = symbols('xyz t') k, m, n = symbols('km n', integer=True) f, g, h = symbols('fg h', cls=Function) init_printing() snip.rv = eval('latex(' + match.group(1).replace('\\', '') \ .replace('^', '**') \ .replace('{', '(') \ .replace('}', ')') + ')') ` endsnippet</code> </pre> <br>  Para o Mathematica, algo semelhante tamb√©m √© poss√≠vel: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/82f/7f1/87a/82f7f187a685a52ed7665fded563f936.gif"><br><br><pre> <code class="plaintext hljs">priority 1000 snippet math "mathematica block" w math $1 math$0 endsnippet priority 10000 snippet 'math(.*)math' "evaluate mathematica" wr `!p import subprocess code = 'ToString[' + match.group(1) + ', TeXForm]' snip.rv = subprocess.check_output(['wolframscript', '-code', code]) ` endsnippet</code> </pre> <br><h3>  Snippets do Postfix </h3><br>  Parece-me que vale a pena mencionar tamb√©m trechos de postfix que inserem o texto apropriado ap√≥s a inser√ß√£o de certos caracteres.  Por exemplo, <code>phat</code> ‚Üí <code>\hat{p}</code> e <code>zbar</code> ‚Üí <code>\overline{z}</code> .  Um trecho semelhante insere um vetor, por exemplo, <code>v,.</code>  ‚Üí <code>\vec{v}</code> e <code>v.,</code> ‚Üí <code>\vec{v}</code> .  A ordem do ponto e ponto e v√≠rgula n√£o importa, para que eu possa clicar neles ao mesmo tempo.  Esses trechos realmente economizam tempo, porque voc√™ os insere na mesma velocidade que um professor escreve no quadro. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c2/e62/aae/7c2e62aae292bc4d65eae363c816e206.gif"><br><br>  Observe que os prefixos de <code>bar</code> e <code>hat</code> ainda funcionam, apenas com uma prioridade mais baixa.  O c√≥digo para esses trechos √©: <br><br><pre> <code class="plaintext hljs">priority 10 snippet "bar" "bar" riA \overline{$1}$0 endsnippet priority 100 snippet "([a-zA-Z])bar" "bar" riA \overline{`!p snip.rv=match.group(1)`} endsnippet</code> </pre> <br><pre> <code class="plaintext hljs">priority 10 snippet "hat" "hat" riA \hat{$1}$0 endsnippet priority 100 snippet "([a-zA-Z])hat" "hat" riA \hat{`!p snip.rv=match.group(1)`} endsnippet</code> </pre> <br><pre> <code class="plaintext hljs">snippet "(\\?\w+)(,\.|\.,)" "Vector postfix" riA \vec{`!p snip.rv=match.group(1)`} endsnippet</code> </pre> <br><h3>  Outros trechos </h3><br>  Eu ainda tenho cerca de cem trechos usados ‚Äã‚Äãcom frequ√™ncia.  Todos eles est√£o dispon√≠veis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  A maioria deles √© bem simples.  Por exemplo, <code>!&gt;</code> Transforma-se em <code>\mapsto</code> , <code>-&gt;</code> torna-se <code>\to</code> etc. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ee/36e/f41/4ee36ef41c17f1ded1fffe13ba32b60d.gif"><br><br>  <code>fun</code> transforma em <code>f: \R \to \R :</code> , <code>!&gt;</code> ‚Üí <code>\mapsto</code> , <code>cc</code> ‚Üí <code>\subset</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a45/092/c95/a45092c95d91059b779f74cedda840e1.gif"><br><br>  <code>lim</code> se torna <code>\lim_{n \to \infty}</code> , <code>sum</code> ‚Üí <code>\sum_{n = 1}^{\infty}</code> , <code>ooo</code> ‚Üí <code>\infty</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2be/9c9/9e6/2be9c99e6ab5787fc5196bbf4ce525a7.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/3be/522/f5e/3be522f5e6e5ca7f871138732ba1b14d.gif"><br><br><h3>  Snippets espec√≠ficos do curso </h3><br>  Al√©m dos usados ‚Äã‚Äãcom frequ√™ncia, tamb√©m tenho trechos espec√≠ficos.  Eles s√£o carregados como uma √∫nica linha no <code>.vimrc</code> : <br><br><pre> <code class="plaintext hljs">set rtp+=~/current_course</code> </pre> <br>  Aqui <code>current_course</code> √© um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">link simb√≥lico</a> para o curso atual (mais sobre isso em outro artigo).  Nesta pasta est√° o arquivo <code>~/current_course/UltiSnips/tex.snippets</code> , onde adiciono trechos de curso.  Por exemplo, para a mec√¢nica qu√¢ntica, existem trechos para registrar os estados qu√¢nticos de arandelas e cetos. <br><br> <code>&lt;a|</code>  ‚Üí <code>\bra{a}</code> <br> <code>&lt;q|</code>  ‚Üí <code>\bra{\psi}</code> <br>  <code>|a&gt;</code> ‚Üí <code>\ket{a}</code> <br>  <code>|q&gt;</code> ‚Üí <code>\ket{\psi}</code> <br>  <code>\braket{a}{b}</code> ‚Üí <code>\braket{a}{b}</code> <br><br>  Como a mec√¢nica qu√¢ntica geralmente usa <code>\psi</code> , substitu√≠ automaticamente todos os <code>q</code> no braket por <code>\psi</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/268/d33/1fd/268d331fdb83b6fa3563b6f2b0baac66.gif"><br><br><pre> <code class="plaintext hljs">snippet "\&lt;(.*?)\|" "bra" riA \bra{`!p snip.rv = match.group(1).replace('q', f'\psi').replace('f', f'\phi')`} endsnippet snippet "\|(.*?)\&gt;" "ket" riA \ket{`!p snip.rv = match.group(1).replace('q', f'\psi').replace('f', f'\phi')`} endsnippet snippet "(.*)\\bra{(.*?)}([^\|]*?)\&gt;" "braket" riA `!p snip.rv = match.group(1)`\braket{`!p snip.rv = match.group(2)`}{`!p snip.rv = match.group(3).replace('q', f'\psi').replace('f', f'\phi')`} endsnippet</code> </pre> <br><h3>  Contexto </h3><br>  Ao escrever esses trechos, considere se eles podem ser encontrados em texto sem formata√ß√£o.  Por exemplo, de acordo com o meu dicion√°rio, existem cerca de 72 palavras em ingl√™s e 2.000 palavras em holand√™s com sr.  Portanto, quando digito <code>disregard</code> , <code>sr</code> muda para <code>^2</code> e obtemos <code>di^2egard</code> . <br><br>  A solu√ß√£o para esse problema √© adicionar contexto aos snippets.  O destaque da sintaxe do Vim determina se o UltiSnips deve usar um snippet, dependendo se voc√™ est√° no modo de f√≥rmula ou texto.  Eu vim com esta op√ß√£o: <br><br><pre> <code class="plaintext hljs">global !p texMathZones = ['texMathZone'+x for x in ['A', 'AS', 'B', 'BS', 'C', 'CS', 'D', 'DS', 'E', 'ES', 'F', 'FS', 'G', 'GS', 'H', 'HS', 'I', 'IS', 'J', 'JS', 'K', 'KS', 'L', 'LS', 'DS', 'V', 'W', 'X', 'Y', 'Z']] texIgnoreMathZones = ['texMathText'] texMathZoneIds = vim.eval('map('+str(texMathZones)+", 'hlID(v:val)')") texIgnoreMathZoneIds = vim.eval('map('+str(texIgnoreMathZones)+", 'hlID(v:val)')") ignore = texIgnoreMathZoneIds[0] def math(): synstackids = vim.eval("synstack(line('.'), col('.') - (col('.')&gt;=2 ? 1 : 0))") try: first = next( i for i in reversed(synstackids) if i in texIgnoreMathZoneIds or i in texMathZoneIds ) return first != ignore except StopIteration: return False endglobal</code> </pre> <br>  Agora voc√™ pode adicionar o <code>context "math()"</code> aos trechos que deseja aplicar apenas em um contexto matem√°tico. <br><br><pre> <code class="plaintext hljs">context "math()" snippet sr "^2" iA ^2 endsnippet</code> </pre> <br>  Observe que o contexto matem√°tico √© uma coisa sutil.  √Äs vezes, no modo de f√≥rmula, tamb√©m escrevemos texto usando <code>\text{...}</code> .  Nesse caso, n√£o queremos usar trechos.  No entanto, no seguinte caso: <code>\[ \text{$...$} \]</code> , eles <i>devem</i> ser aplicados.  √â por isso que o c√≥digo para o contexto <code>math</code> n√£o √© t√£o simples.  A anima√ß√£o a seguir ilustra essas sutilezas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e1b/3ca/2dd/e1b3ca2dd4fc1f5fe39679fb6ba38aad.gif"><br><br><h3>  Corre√ß√£o ortogr√°fica em tempo real </h3><br>  Embora as f√≥rmulas sejam uma parte importante do resumo, eu imprimo a maior parte do tempo em ingl√™s.  Cerca de 80 palavras por minuto, minhas habilidades de digita√ß√£o s√£o muito boas, mas eu fa√ßo muitos erros de digita√ß√£o.  Foi por isso que adicionei uma liga√ß√£o ao Vim que corrige erros de ortografia sem interferir no trabalho.  Quando <code>Ctrl+L</code> durante a entrada, o erro ortogr√°fico anterior √© corrigido.  √â assim: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ad/d70/568/0add705683b79cb94498104251a6d5b8.gif"><br><br>  Minhas configura√ß√µes para verifica√ß√£o ortogr√°fica: <br><br><pre> <code class="plaintext hljs">setlocal spell set spelllang=nl,en_gb inoremap &lt;Cl&gt; &lt;cg&gt;u&lt;Esc&gt;[s1z=`]a&lt;cg&gt;u</code> </pre> <br>  Aqui, v√° para o erro ortogr√°fico anterior <code>[s</code> , selecione a primeira op√ß√£o <code>1z=</code> e retorne <code>`]a</code> .  Os comandos <code>&lt;cg&gt;u</code> no meio permitem desfazer rapidamente a corre√ß√£o. <br><br><h3>  Em conclus√£o </h3><br>  Gra√ßas aos trechos do Vim, escrever c√≥digo LaTeX n√£o √© mais irritante, mas sim um prazer.  Em combina√ß√£o com a ortografia instant√¢nea, isso permite que voc√™ delineie de forma conveniente e r√°pida as palestras sobre matem√°tica.  No <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pr√≥ximo artigo,</a> falarei sobre outros t√≥picos, como desenhar ilustra√ß√µes digitalmente e incorpor√°-las em um documento LaTeX. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt445066/">https://habr.com/ru/post/pt445066/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt445056/index.html">Vis√£o Geral dos Cursos de Desenvolvimento Web</a></li>
<li><a href="../pt445058/index.html">O piloto autom√°tico da Tesla aprendeu a determinar as mudan√ßas de pista nos carros vizinhos</a></li>
<li><a href="../pt445060/index.html">Organizando pesquisas de dados usando os reposit√≥rios de dados-chave do Spring Data</a></li>
<li><a href="../pt445062/index.html">Formato de apresenta√ß√£o moderno?</a></li>
<li><a href="../pt445064/index.html">A batalha pela neutralidade da rede - uma chance de voltar</a></li>
<li><a href="../pt445070/index.html">O resumo de materiais interessantes para o desenvolvedor m√≥vel # 291 (18 a 24 de mar√ßo)</a></li>
<li><a href="../pt445072/index.html">Telegraff: DSL Kotlin para telegrama</a></li>
<li><a href="../pt445074/index.html">Programando o LibreOffice Base. Parte 1</a></li>
<li><a href="../pt445076/index.html">Gigante de TI introduziu firewall definido por servi√ßo</a></li>
<li><a href="../pt445078/index.html">A f√≠sica qu√¢ntica provavelmente proteger√° as redes el√©tricas dos EUA contra hackers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>