<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐰 🏂🏿 🛐 新一代分散信使和电话网络 👨‍🌾 🧠 🤾🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="每当出现有关某个新Messenger的文章时，大多数Habr用户都会对评论感兴趣-集中式或分散式IM？ 

 如果不是-那么-“所有人都在分歧。” 

 许多人还以Skype的权力下放为例，这暗示了2011年之前的情况。 

 然后，作为眼线笔和对本文的主要思想的介绍，请考虑在收购Microsoft...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>新一代分散信使和电话网络</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mobile_one/blog/420811/"><img src="https://habrastorage.org/webt/q0/kj/u6/q0kju6hj8o-ujapfibearqcsrhg.gif"><br><br> 每当出现有关某个新Messenger的文章时，大多数Habr用户都会对评论感兴趣-集中式或分散式IM？ <br><br> 如果不是-那么-“所有人都在分歧。” <br><br> 许多人还以Skype的权力下放为例，这暗示了2011年之前的情况。 <br><br> 然后，作为眼线笔和对本文的主要思想的介绍，请考虑在收购Microsoft之前Skype处于黄金时期的情况。 <br><a name="habracut"></a><br> 因此，这是分散的点对点网络Skype的结构： <br><br><img src="https://habrastorage.org/webt/cp/hf/gs/cphfgsjar-muqhcmrpjhlpx9ylu.jpeg"><br><br> 如我们所见，客户主要通过所谓的超级节点进行连接。 <br><br> 什么是超节点？为什么Skype需要它们？ <br>  P2P怎么那么纯净？ <br> 由于是P2P，为什么不能将用户直接彼此连接？ <br><br><img src="https://habrastorage.org/webt/pz/uj/ch/pzujchomcbkonmn9uw5orujs0ns.jpeg"><br><br> 为了回答为什么需要超级节点的问题，您需要记住当时的Skype。 <br><br> 他是用户之间的“拨号者”，首先是语音通话，然后是视频。 <br> 这就出现了一个问题-大多数用户坐在NAT下，有时甚至在双重，三重NAT下，在这种情况下，如果直接连接它们，几乎就不可能建立音频，尤其是视频通信。 <br><br> 粗略地说，这些超级节点扮演着一种TURN服务器的角色，该服务器从事信令和流量传输，“打孔” NAT和连接用户。 <br> 同样，这对于音频和视频通话来说非常重要。 <br><br> 这些节点变成了具有白色IP地址的计算机，这些计算机的功能足够强大，可以在宽广的通道上使用，因为大量的媒体流量通过它们。 <br><br> 而且，它们变成了节点，完全不知道这一点-节点的用户有时只是后来才发现他们的计算机突然开始消耗大量流量。 <br><br> 所有这些都类似于某种病毒，这不足为奇-有人认为Skype是由以前的黑客制作的，这些黑客以前曾制造过海盗交换机，而这完全适合他们解决问题的方法。 <br><br> 但是我们不会深入探讨这个话题。 <br><br> 相反，让我们看看它是如何工作的...常规电话通讯： <br><br><img src="https://habrastorage.org/webt/ay/ms/p0/aymsp0elsjby5pso--ejt92pwlc.gif"><br><br> 上图描述了公用电话网的工作原理-所谓的PSTN或国际术语-PSTN（公共交换电话网）。 <br><br> 尽管此图显示了在PSTN的黄金时期（70年代至80年代-90年代初期）发生的情况，但现在一切都以相同的方式工作。 <br><br> 技术已经改变，巨人走了（阿尔卡特，北电等），但原则本身仍然存在。 <br><br> 查看该图，您可以找到节点-这些是特定用户连接到的城市PBX，具有相应PBX和超节点-长途PBX的前缀。 <br><br> 所有节点（ATS）可以彼此通信，并且订户可以彼此通信-仅通过此类节点。 <br><br> 事实证明，PSTN网络还是分散式P2P网络，其构建方式与Skype大致相同（反之亦然）？ <br><br> 很有可能是这样。 <br><br> 这很容易看到-例如，当一个电话交换机几乎没有访问另一个城市电话交换机的通道时，那么在高峰时间（CNN-繁忙时间），一个电话交换机的用户很难或不可能到达另一电话交换机的用户，但与此同时，同一电话用户PBX可以互相拨号而不会出现问题。 <br><br> 现在没有这样的问题了，因为 电台之间通过宽广的频道相互连接，并且到处都是数字，但是直到那时，这种情况一直在发生。 <br><br> 因此，我们确定现代电话网络（PSTN或PSTN）是分散式P2P网络。 <br><br> 一个自然的问题出现了-如果是P2P，那么我们可以成为该分散网络的成员吗（提高我们的服务器等）？ <br><br> 当然可以！ <br><br> 为此需要什么以及如何完成（假设您有很多钱并且您是一家相对较大的公司）？ <br><br> 主要步骤： <br><br>  -您需要成为本地或区域性或长途通信的运营商。 <br> 为此，您需要从监管机构处获取适当的许可证，尽管在某些国家/地区并不需要这样做。 <br><br> 为简单起见，请考虑一个您想成为本地通信运营商的示例- 提出一个简单的城市节点。 <br><br>  -您需要获取地理位置分配给放置节点的电话号码池（电话交换）。 <br><br> 该池也提供给调节器。 <br><br> 报价： <br><br>  <i>“ ... ITU-T建议E.164定义了公用电话网络和某些其他网络中使用的通用国际电信编号方案。</i>  <i>辅音E.164数字最多可以包含15位数字，并且通常以前缀“ +”书写。</i> <i><br><br></i>  <i>俄文《提供电话服务的规则》 [2]将用户号码定义为“在订立电话服务提供合同时分配给用户的号码，通过该号码，当连接了其他用户设备时，就可以识别连接到电话网络的用户设备。”</i>  <i>在俄罗斯，电话号码领域的监管者是通信部（特别是联邦通信局）……”</i> <br><br>  -收到号码池后，您必须构建并调试PSTN节点。 我们将省略您拥有SORM等所需的所有详细信息。 <br><br> 这些都是组织性问题，我们将不作详细介绍，特别是因为它们在不同国家中也有所不同。 <br><br> 相反，我们简要概述了技术要点。 <br><br> 首先，现在所有大小的运营商都在VOIP设备上建立站点。 <br><br> 即 购买带有VOIP的专用钢铁站或制作软件包-带有5类Broadcom专用软件的服务器，或什至掺杂至5类的星号，等等。 <br><br> 连接订户。 <br><br> 这里的一切也很简单-安装了具有FXS端口的VOIP网关，用户可以在其中连接普通电话或IP电话，面向企业用户或软件客户端（例如，用于呼叫中心）的微型IP PBX等。 <br><br> 一些公司使用虚拟IP PBX连接用户，因为PBX-但原理是相同的。 <br><br> 接下来，您需要向该共享网络的所有参与者注册电话池-为此，该共享网络中另一个站点（节点）的每个所有者都会向监管机构或主要运营商发送正式信函-路由带有此类号码的路由至我们新同事的PBX。 <br><br> 因此，您应该根据某些规则在站点（节点）中注册传出路由。 <br><br> 即使在俄罗斯联邦，也有一条规则，即连接订户时，必须获取护照数据，注册等。 <br><br> 原则上，几乎所有事情都由移动运营商完成。 <br><br> 然后业务部分开始-您通过按月出售这样的号码并收取山脉间或国际电话费用来赚钱，而这些费用又是您从更高节点上购买的，等等。 <br><br>  <b>为什么我们都这么详细地谈论？</b> <br><br> 事实是，我们拥有一个平台<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">（M1 Messenger）</a> ，该平台一方面是分散的Messenger，另一方面可以将其定义为新一代电话网络。 <br><br>  <b>而且最重要的是，要将节点添加到这样的网络中，不需要许可证，也不需要获取E164号码，也不需要任何其他权限，因为无法访问PSTN。</b> <br><br> 即 您可以随时随地将您自己绝对添加到这样的网络中，并成为一个独立的节点-M1 Messenger网络中的一个节点。 <br><br> 您可以轻松地将您的IP站，小型办公室和大型提供商添加到此平台中-所有站都可以相互通信，也可以与Messenger的普通用户通信： <br><br><img src="https://habrastorage.org/webt/yb/oa/go/yboagoggx3vn9i_fdexznw5pzye.png"><br><br> 这种多功能性归因于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">M1 Messenger</a>平台支持SIP协议的事实。 <br><br> 每个用户在注册时都会收到一个登录信息，以及一个SIP URI，即一次接收2个标识符。 <br><br> 多亏了登录，交互才在Messenger用户内部发生，并且向外传到外部，即与连接的IP PBX进行通信，而且由于有了SIP URI，每个用户都可以访问来自任何SIP兼容网络的来话呼叫。 <br><br> 考虑一下这个数字。 <br><br> 此处，字母A，B和C下的IP PBX通过SIP中继线连接到平台，即这些PBX已在平台上注册。 <br><br> 这样的中继中同时进行的对话数以及每个IP PBX本身的中继数不受限制。 <br><br> 因此，诸如字母A下的IP PBX之类的用户可以具有其内部编号，对于字母B和C下的IP PBX的呼叫，请使用其SIP URI。 <br> 可以通过两种不同的方式处理来自其他交换机或Messenger的传入呼叫： <br><br>  -作为唯一的编号（序列号），例如到达标准IVR，然后根据已建立的算法。 <br><br>  -这样的第三方IP PBX中的每个用户都可以分配自己的中继，并由PBX路由。 <br><br> 因此，每个PBX用户都可以从平台用户接收仅针对他的呼叫。 <br><br> 同样，由于所有<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">即时通讯</a>用户都<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">立即</a>接收SIP URI，因此很容易从虚拟号码提供商（DID）获取传入号码。 <br><br> 与登录关联的呼入号码的数量也不受限制。 <br><br>  <b>设备连接。</b> <br><br> 当前，几乎没有使该设备连接到其网络的使者。 <br><br> 最后一个是Skype。 <br><br> 例如，在2012年，宣布了支持Skype的DECT手机： <br><br><img src="https://habrastorage.org/webt/or/nf/lh/ornflhn9elizzvbpbx03pyvwopo.jpeg"><br><br> 在此之前，已售卖支持Skype的台式电话： <br><br><img src="https://habrastorage.org/webt/3n/cu/r5/3ncur5q_9xzklikfr7ioq-f7nqc.jpeg"><br><br> 大约一年前，Skype宣布将不支持此类电话，并且所有早先购买它们的用户都将它们变成了南瓜。 <br><br> 相反，绝对可以将任何IP电话（包括视频电话）或VOIP网关连接到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">M1 Messenger</a>平台： <br><br><img src="https://habrastorage.org/webt/co/m3/kl/com3klkzkdb7xnrzeubliwh27im.jpeg"><br><br><img src="https://habrastorage.org/webt/yf/ym/f6/yfymf6z_qkeb68analedmwp_p-o.jpeg"><br><br><img src="https://habrastorage.org/webt/2i/cd/il/2icdilwhf5a9nz-3lrc504r81wg.jpeg"><br><br> 这不是一个概念；它已经全部起作用。 <br><br> 因此，任何IP PBX以及任何VOIP设备都可以连接到平台。 <br><br> 要进行连接，只需下载Messenger，注册并转到SIP设备选项卡： <br><br><img src="https://habrastorage.org/webt/vn/u0/a1/vnu0a1frdqgmgwbl7iggnipj1zy.jpeg"><br><br> 使用3个参数-登录名，密码和服务器地址： <br><br><img src="https://habrastorage.org/webt/9p/ud/cz/9pudczpigho6qsnfosqjpegi-tk.jpeg"><br><br> 您可以连接IP PBX或任何VOIP硬件。 <br><br> 使用SIP URI，例如<b>digitallogin@sip1.m1online.net，</b>即使该网络未连接到M1平台（例如，虚拟DID号码的提供者等） <b>，</b>任何用户或连接的IP PBX或连接的设备都可以从任何VOIP网络接收VOIP呼叫。 d。） <br><br> 因此，获得的网络不需遵守任何方面的规定，但可以同时连接到现有IP PBX，并且使用的设备无关紧要-小型Atserisk或盒装PBX或大型运营商的大型站点。 <br><br> 最有趣的是，在这样的网络中，呼叫完全不收费，而绕过官方发布的电话号码直接进行。 <br><br> 事实证明，这种通信网络不依赖于任何人，并且对任何用户的连接都是开放的-无论是个人，有用户的公司还是大型运营商。 <br> 没有监管机构，没有SORM，也没有丢失或从您手中夺走的e164电话号码。 <br> 而且没有月租费和每分钟的通话费用。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN420811/">https://habr.com/ru/post/zh-CN420811/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN420797/index.html">学习不能推迟</a></li>
<li><a href="../zh-CN420799/index.html">MPS 2018.2：生成器测试，GitHub插件，VCS Aspect，迁移通知等</a></li>
<li><a href="../zh-CN420803/index.html">3D打印课程。 从3Dtool打印非功能性模型时节省塑料</a></li>
<li><a href="../zh-CN420805/index.html">[翻译]何时使用并行流</a></li>
<li><a href="../zh-CN420809/index.html">安全周31：五十种不安全的Android阴影</a></li>
<li><a href="../zh-CN420813/index.html">Kubernetes的后台网络</a></li>
<li><a href="../zh-CN420815/index.html">“解码数字世界”是如何爆炸的：DotNext 2018 Piter的十大报道</a></li>
<li><a href="../zh-CN420819/index.html">用于机器学习和数据科学的十大Python工具</a></li>
<li><a href="../zh-CN420821/index.html">规则10：编程和写作为1</a></li>
<li><a href="../zh-CN420825/index.html">今天将是OpenAI和Dota 2专业人士之间的首次较量（获胜者）。 我们了解机器人的工作原理</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>