<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçÖ üêµ üàµ Ersetzen Haken in React Redux? ‚úäüèæ ü§∏üèº üçû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Seit Hooks in React erschienen sind, gab es viele Fragen, ob sie Redux ersetzen k√∂nnen. 

 Ich glaube, dass Hooks und Redux wenig gemeinsam haben. Hak...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ersetzen Haken in React Redux?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/464293/">  Seit Hooks in React erschienen sind, gab es viele Fragen, ob sie Redux ersetzen k√∂nnen. <br><br>  Ich glaube, dass Hooks und Redux wenig gemeinsam haben.  Haken geben uns keine neuen erstaunlichen M√∂glichkeiten, mit dem Staat zusammenzuarbeiten.  Stattdessen erweitern sie die APIs, damit sie in React das tun k√∂nnen, was darin bereits m√∂glich war.  Die Hook-API hat die Arbeit mit den Statusverwaltungsfunktionen von React jedoch wesentlich komfortabler gemacht.  Es stellte sich heraus, dass es einfacher ist, die neuen Funktionen f√ºr die Arbeit mit dem Status zu verwenden als die alten, die in den auf Klassen basierenden Komponenten verf√ºgbar waren.  Jetzt benutze ich die Werkzeuge viel h√§ufiger als zuvor, um mit dem Zustand von Komponenten zu arbeiten.  Nat√ºrlich mache ich das nur, wenn es angebracht ist. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/3l/la/tr/3llatro-chokmu9rdtwtga0l1sc.jpeg"></a> <br><br>  Um meine Einstellung zu React Hooks und Redux zu erl√§utern, m√∂chte ich zun√§chst auf die Situationen eingehen, in denen Redux normalerweise verwendet wird. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Was ist Redux?</font> </h2><br>  Redux ist eine Bibliothek, die vorhersagbaren Anwendungsstatus-Speicher implementiert.  Es ist auch eine Architektur, die sich nahtlos in React integriert. <br><br>  Hier sind die Hauptst√§rken von Redux: <br><br><ul><li>  Deterministische Darstellung des Zustands (in Kombination mit reinen Komponenten k√∂nnen deterministische visuelle Elemente gebildet werden). </li><li>  Unterst√ºtzung f√ºr √Ñnderungen des Transaktionsstatus. </li><li>  Isolierung des Zustandsmanagements von E / A-Mechanismen und Nebenwirkungen. </li><li>  Das Vorhandensein einer einzigen Quelle zuverl√§ssiger Daten f√ºr den Staat. </li><li>  Einfache Organisation der Zusammenarbeit mit dem Staat in verschiedenen Komponenten. </li><li>  Transaktionsanalysetools (automatische Protokollierung von Aktionsobjekten). </li><li>  Debugging mit der F√§higkeit, den Programmausf√ºhrungsprozess aufzuzeichnen und abzuspielen (Time Travel Debugging, TTD). </li></ul><br>  Mit anderen Worten, mit Redux k√∂nnen Sie Ihren Code gut organisieren und bequem debuggen.  Redux hilft bei der Entwicklung von Anwendungen, die einfach zu warten sind.  Die Verwendung dieser Bibliothek erleichtert das Auffinden der Problemquellen, die in Programmen auftreten. <br><br><h2>  <font color="#3AC1EF">Was sind React Hooks?</font> </h2><br>  React Hooks erm√∂glichen es, bei der Arbeit mit Funktionskomponenten ein Analogon des Zustands von Komponenten zu verwenden, das auf Klassen und Analoga ihrer Lebenszyklusmethoden basiert.  Hooks erschienen in React 16.8. <br><br>  Zu den Hauptst√§rken von Haken geh√∂ren: <br><br><ul><li>  Die F√§higkeit, Status- und Komponentenlebenszyklusereignisse zu verwenden, ohne klassenbasierte Komponenten zu verwenden. </li><li>  Gemeinsame Speicherung verwandter Logik an derselben Komponentenposition, anstatt √§hnliche Logik auf mehrere Lebenszyklusmethoden aufzuteilen. </li><li>  Freigabemechanismen unabh√§ngig von der Komponentenimplementierung (dies √§hnelt der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Render-Prop-</a> Vorlage). </li></ul><br>  Beachten Sie, dass diese gro√üartigen Funktionen Redux nicht √ºberw√§ltigen.  React-Hooks k√∂nnen und sollten verwendet werden, um deterministische Statusaktualisierungen durchzuf√ºhren. Dies war jedoch schon immer eine der React-Funktionen, und das deterministische Redux-Statusmodell l√§sst sich gut mit dieser Funktion kombinieren.  Auf diese Weise erreicht React Determinismus bei der Ausgabe visueller Elemente, und dies ist ohne √úbertreibung eines der treibenden Motive f√ºr die Erstellung von React. <br><br>  Wenn Sie Tools wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">React</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">-Redux-API mit Hooks</a> oder den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">React UseReducer-Hook verwenden</a> , gibt es keinen Grund zu fragen, was Sie w√§hlen sollen - Hooks oder Redux.  Sie k√∂nnen diese Technologien sowohl kombinieren als auch kombinieren. <br><br><h2>  <font color="#3AC1EF">Was ersetzen Haken?</font> </h2><br>  Nach dem Aufkommen der Hook-APIs habe ich die folgenden Technologien nicht mehr verwendet: <br><br><ul><li>  Klassenbasierte Komponenten. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Render-Prop-</a> Muster. </li></ul><br><h2>  <font color="#3AC1EF">Was ersetzen keine Haken?</font> </h2><br>  Ich benutze immer noch oft die folgenden Technologien: <br><br><ul><li>  Redux - aus all den oben genannten Gr√ºnden. </li><li>  Komponenten h√∂herer Ordnung - zum Zwecke der Komponentenzusammensetzung in F√§llen, in denen ich End-to-End-Funktionen implementieren muss, die von allen oder einigen visuellen Komponenten der Anwendung gemeinsam genutzt werden.  Zu diesen Funktionen geh√∂ren Redux-Anbieter, Seitenlayout-Systeme, Unterst√ºtzungssysteme f√ºr Anwendungseinstellungen, Authentifizierungs- und Autorisierungstools, Tools zur Internationalisierung von Anwendungen usw. </li><li>  Trennung zwischen Containerkomponenten und Komponenten, die eine visuelle Darstellung haben.  Auf diese Weise k√∂nnen Sie die Modularit√§t und Testbarkeit von Anwendungen verbessern. Es ist besser, Effekte und reine Logik zu trennen. </li></ul><br><h2>  <font color="#3AC1EF">Wann werden Haken verwendet?</font> </h2><br>  Es ist nicht erforderlich, Redux in jeder Anwendung und in jeder Komponente zu verwenden.  Wenn Ihr Projekt aus einer visuellen Komponente besteht, wenn es keine Daten speichert und keine Daten von dort l√§dt, wenn keine asynchronen E / A-Vorg√§nge darin ausgef√ºhrt werden, kann ich keinen triftigen Grund finden, dieses Projekt durch die Verwendung von Redux zu komplizieren. <br><br>  Gleiches gilt f√ºr Komponenten mit folgenden Merkmalen: <br><br><ul><li>  Sie verwenden keine Netzwerkressourcen. </li><li>  Sie speichern keine Daten im Status und laden sie nicht von dort. </li><li>  Sie teilen den Status nicht mit anderen Komponenten, die nicht ihre Nachkommen sind. </li><li>  Sie haben keinen eigenen Status, der f√ºr die kurzfristige Datenspeicherung verwendet wird. </li></ul><br>  In bestimmten Situationen haben Sie m√∂glicherweise gute Gr√ºnde, das Standardmodell f√ºr den Komponentenstatus von React zu verwenden.  In solchen Situationen leisten React Hooks gute Arbeit.  In dem unten beschriebenen Formular wird beispielsweise der lokale Status der Komponente mithilfe des <code>useState</code> React <code>useState</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { useState } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'prop-types'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TextField, { Input } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material/react-text-field'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> noop = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Holder = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{  itemPrice = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">175</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  name = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  email = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  id = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">,  removeHolder = noop,  showRemoveButton = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span><span class="hljs-function"><span class="hljs-params">, }</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [nameInput, setName] = useState(name);  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [emailInput, setEmail] = useState(email); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> setter = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">set</span></span></span><span class="hljs-function"> =&gt;</span></span> e =&gt; {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { target } = e;    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { value } = target;    set(value);  }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (    &lt;div className="row"&gt;      &lt;div className="holder"&gt;        &lt;div className="holder-name"&gt;          &lt;TextField label="Name"&gt;            &lt;Input value={nameInput} onChange={setter(setName)} required /&gt;          &lt;/TextField&gt;        &lt;/div&gt;        &lt;div className="holder-email"&gt;          &lt;TextField label="Email"&gt;            &lt;Input              value={emailInput}              onChange={setter(setEmail)}              type="email"              required            /&gt;          &lt;/TextField&gt;        &lt;/div&gt;        {showRemoveButton &amp;&amp; (          &lt;button            className="remove-holder"            aria-label="Remove membership"            onClick={e =&gt; {              e.preventDefault();              removeHolder(id);            }}          &gt;            √ó          &lt;/button&gt;        )}      &lt;/div&gt;      &lt;div className="line-item-price"&gt;${itemPrice}&lt;/div&gt;      &lt;style jsx&gt;{cssHere}&lt;/style&gt;    &lt;/div&gt;  ); }; Holder.propTypes = {  name: t.string,  email: t.string,  itemPrice: t.number,  id: t.string,  removeHolder: t.func,  showRemoveButton: t.bool, }; export default Holder;</code> </pre> <br>  Hier wird <code>useState</code> verwendet, um den kurz verwendeten Status der <code>name</code> und <code>email</code> Eingabefelder zu steuern: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [nameInput, setName] = useState(name); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [emailInput, setEmail] = useState(email);</code> </pre> <br>  M√∂glicherweise stellen Sie fest, dass noch ein Ersteller der Aktion <code>removeHolder</code> in die Eigenschaften von Redux <code>removeHolder</code> .  Wie bereits erw√§hnt, ist die Kombination und Kombination von Technologien v√∂llig normal. <br><br>  Die Verwendung des lokalen Status einer Komponente zur L√∂sung solcher Probleme hat immer gut ausgesehen, aber vor React-Hooks h√§tte ich auf jeden Fall die Komponentendaten im Redux-Speicher speichern und den Status aus den Eigenschaften abrufen wollen. <br><br>  Zuvor umfasste das Arbeiten mit dem Status einer Komponente die Verwendung klassenbasierter Komponenten, das Schreiben der Anfangsdaten in den Status mithilfe der Mechanismen zum Deklarieren von Klasseneigenschaften (oder im Klassenkonstruktor) usw.  Als Ergebnis stellte sich heraus, dass die Komponente zu kompliziert sein musste, um die Verwendung von Redux zu vermeiden.  Redux sprach sich auch f√ºr die Existenz praktischer Tools zur Verwaltung des Formularstatus mithilfe von Redux aus.  Daher h√§tte ich mir vorher keine Sorgen gemacht, dass der tempor√§re Status des Formulars am selben Ort wie die Daten mit einer l√§ngeren Lebensdauer gespeichert wird. <br><br>  Da ich Redux bereits in all meinen mehr oder weniger komplexen Anwendungen verwendet habe, hat mich die Wahl der Technologie zum Speichern des Zustands von Komponenten von Komponenten nicht viel nachgedacht.  Ich habe in fast allen F√§llen nur Redux verwendet. <br><br>  Unter modernen Bedingungen ist es auch einfach, eine Auswahl zu treffen: Die Arbeit mit dem Status der Komponente wird mithilfe von Standardreaktionsmechanismen organisiert und der Status der Anwendung mithilfe von Redux verwaltet. <br><br><h2>  <font color="#3AC1EF">Wann sollte Redux verwendet werden?</font> </h2><br>  Eine weitere h√§ufig gestellte Frage zur Statusverwaltung lautet: ‚ÄûMuss ich absolut alles in das Redux-Repository stellen?  Wenn ich es nicht tue, wird es die F√§higkeit zum Debuggen von Anwendungen mithilfe von TTD-Mechanismen verletzen? " <br><br>  Es ist nicht erforderlich, absolut alles im Redux-Repository zu hosten.  Tatsache ist, dass Anwendungen viele tempor√§re Daten verwenden, die zu verstreut sind, um Informationen zu liefern, die dem Entwickler beim Auffinden von Problemen erheblich helfen k√∂nnen, wenn sie im Protokoll aufgezeichnet oder beim Debuggen verwendet werden.  Wahrscheinlich m√ºssen Sie, es sei denn, Sie schreiben eine Echtzeit-Editoranwendung, nicht jede Mausbewegung oder jeden Tastendruck in den Status schreiben.  Wenn Sie etwas in einen Redux-Status versetzen, f√ºgen Sie der Anwendung eine zus√§tzliche Abstraktionsebene sowie eine damit verbundene zus√§tzliche Komplexit√§tsebene hinzu. <br><br>  Mit anderen Worten, Sie k√∂nnen Redux sicher verwenden, aber es muss einen Grund daf√ºr geben.  Die Verwendung von Redux-Funktionen in Komponenten kann gerechtfertigt sein, wenn sich die Komponenten in den folgenden Funktionen unterscheiden: <br><br><ul><li>  Sie verwenden I / O.  Sie arbeiten beispielsweise mit einem Netzwerk oder mit bestimmten Ger√§ten. </li><li>  Sie speichern Daten darin oder laden Daten daraus. </li><li>  Sie arbeiten mit ihrem Zustand in Verbindung mit Komponenten, die nicht ihre Nachkommen sind. </li><li>  Sie befassen sich mit jeder Gesch√§ftslogik, mit der sich auch andere Teile der Anwendung befassen - sie verarbeiten Daten, die in anderen Teilen der Anwendung verwendet werden. </li></ul><br>  Hier ist ein weiteres Beispiel aus der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TDDDay-</a> Anwendung: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { useDispatch, useSelector } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { compose } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'ramda'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> page <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../hocs/page.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Purchase <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./purchase-component.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { addHolder, removeHolder, getHolders } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./purchase-reducer.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PurchasePage = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {  <span class="hljs-comment"><span class="hljs-comment">//      // mapStateToProps  mapDispatchToProps  const dispatch = useDispatch();  const holders = useSelector(getHolders); const props = {    //           //    dispatch.    addHolder: compose(      dispatch,      addHolder    ),    removeHolder: compose(      dispatch,      removeHolder    ),    holders,  }; return &lt;Purchase {...props} /&gt;; }; // `page` -    ,    //        . export default page(PurchasePage);</span></span></code> </pre> <br>  Dieses Dokument befasst sich nicht mit dem DOM.  Dies ist eine Pr√§sentationskomponente.  Es ist √ºber die React <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">-Redux-API mit Hook-Unterst√ºtzung</a> mit Redux verbunden. <br><br>  Redux wird hier verwendet, da die Daten, die in diesem Formular verarbeitet werden, in anderen Teilen der Benutzeroberfl√§che verwendet werden m√ºssen.  Und nachdem der Kaufvorgang abgeschlossen ist, m√ºssen wir die relevanten Informationen in der Datenbank speichern. <br><br>  Die Statusfragmente, mit denen dieser Code arbeitet, werden von verschiedenen Komponenten verwendet, sie werden nicht nur von einer Komponente verarbeitet.  Dies sind keine Daten, die nur f√ºr kurze Zeit existieren.  Diese Daten k√∂nnen als permanent betrachtet werden. Sie k√∂nnen auf verschiedenen Bildschirmen der Anwendung und in mehreren Sitzungen verwendet werden.  All dies sind Szenarien, in denen die Zust√§nde der Komponente zum Speichern von Daten nicht angewendet werden k√∂nnen.  Dies ist zwar weiterhin m√∂glich, jedoch nur, wenn der Ersteller der Anwendung basierend auf der React-API eine eigene Bibliothek zum Verwalten des Status schreibt.  Dies ist viel schwieriger als nur Redux zu verwenden. <br><br>  Die React <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Suspense-</a> API kann in Zukunft n√ºtzlich sein, wenn Daten in einem bestimmten Zustand gespeichert und daraus geladen werden.  Wir m√ºssen auf die Ver√∂ffentlichung warten und pr√ºfen, ob die Vorlagen zum Speichern und Laden von Redux-Daten ersetzt werden k√∂nnen.  Mit Redux k√∂nnen wir die Nebenwirkungen klar vom Rest der Komponentenlogik trennen, w√§hrend wir nicht auf besondere Weise mit E / A-Diensten arbeiten m√ºssen.  (Der Grund, warum ich die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Redux-Saga-</a> Bibliothek der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Redux-Thunk-Middleware</a> vorziehe, ist die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Effektisolierung</a> ).  Um in diesem Szenario mit Redux konkurrieren zu k√∂nnen, muss die React-API eine Effektisolierung bereitstellen. <br><br><h2>  <font color="#3AC1EF">Redux ist Architektur</font> </h2><br>  Redux ist viel mehr (und oft viel weniger) als eine State-Management-Bibliothek.  Es ist auch eine Teilmenge der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Flux-</a> Architektur, die viel strenger definiert, wie Status√§nderungen implementiert werden.  Lesen Sie hier mehr √ºber die Redux-Architektur. <br><br>  Ich verwende h√§ufig Reduzierungen, die im Redux-Stil erstellt wurden, wenn ich den komplexen Status der Komponente beibehalten muss, aber die Redux-Bibliothek nicht verwenden muss.  Ich verwende auch Aktionen, die im Geiste von Redux erstellt wurden (und sogar Redux-Tools wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Autodux</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Redux-Saga</a> ), um Aktionen an Node.js-Anwendungen zu senden.  Ich importiere jedoch nicht einmal Redux in solche Anwendungen. <br><br>  Das Redux-Projekt war schon immer eher eine Architektur und eine Reihe freiwilliger Vereinbarungen als eine Bibliothek.  Tats√§chlich kann die grundlegende Implementierung von Redux buchst√§blich in ein paar Dutzend Codezeilen dargestellt werden. <br><br>  Dies wird sich als gute Nachricht f√ºr diejenigen herausstellen, die den lokalen Status von Komponenten h√§ufiger mit Hooks verwenden und nicht alles an Redux binden m√∂chten. <br><br>  React unterst√ºtzt den <code>useReducer</code> Hook, der mit Redux-Reduzierern arbeiten kann.  Dies ist gut f√ºr die Implementierung einer nicht trivialen Logik der Arbeit mit dem Staat, f√ºr die Arbeit mit abh√§ngigen Fragmenten des Staates und so weiter.  Wenn Sie auf ein Problem sto√üen, f√ºr das der tempor√§re Status einer einzelnen Komponente geeignet ist, k√∂nnen Sie die Redux-Architektur verwenden, um mit diesem Status zu arbeiten. Anstelle der Redux-Bibliothek k√∂nnen Sie jedoch den <code>useReducer</code> Hook verwenden, um den Status zu verwalten. <br><br>  Wenn Sie sp√§ter eine dauerhafte Speicherung von Daten einrichten m√ºssen, die Sie zuvor nur vor√ºbergehend gespeichert haben, sind Sie zu 90% f√ºr eine solche √Ñnderung bereit.  Sie m√ºssen lediglich die Komponente mit dem Redux-Repository verbinden und dort den entsprechenden Reduzierer hinzuf√ºgen. <br><br><h2>  <font color="#3AC1EF">Fragen und Antworten</font> </h2><br><h3>  <font color="#3AC1EF"> Ist der Determinismus gebrochen, wenn Redux nicht alle Anwendungsdaten verwaltet?</font> </h3><br>  Nein, es ist nicht kaputt.  Tats√§chlich macht die Verwendung von Redux ein Projekt nicht deterministisch.  Aber die Vereinbarungen sind.  Wenn Sie m√∂chten, dass Ihr Redux-Status deterministisch ist, verwenden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">reine Funktionen</a> .  Gleiches gilt f√ºr Situationen, in denen der tempor√§re Zustand lokaler Komponenten bestimmt werden muss. <br><br><h3>  <font color="#3AC1EF">‚ñç Sollte die Redux-Bibliothek die Rolle einer einzigen Quelle zuverl√§ssiger Daten spielen?</font> </h3><br>  Das Prinzip einer einzigen Quelle zuverl√§ssiger Daten bedeutet nicht, dass alle im Anwendungsstatus enthaltenen Daten an einem Ort gespeichert werden m√ºssen.  Die Bedeutung dieses Prinzips ist, dass jedes Fragment des Staates nur eine Quelle zuverl√§ssiger Daten haben sollte.  Infolgedessen k√∂nnen wir viele Zustandsfragmente haben, von denen jedes seine eigene Quelle zuverl√§ssiger Daten hat. <br><br>  Dies bedeutet, dass der Programmierer entscheiden kann, was an Redux und was an den Status der Komponenten √ºbertragen wird.  Zustandsbestimmende Daten k√∂nnen auch aus anderen Quellen entnommen werden.  Zum Beispiel √ºber eine Browser-API, mit der Sie mit Informationen zur Adresse der angezeigten Seite arbeiten k√∂nnen. <br><br>  Redux ist ein gro√üartiges Tool, um eine einzige Quelle zuverl√§ssiger Daten f√ºr den Status einer Anwendung zu unterst√ºtzen.  Befindet sich der Status der Komponente jedoch ausschlie√ülich in dieser Komponente und wird er verwendet, verf√ºgt dieser Status per Definition bereits √ºber eine einzige Quelle zuverl√§ssiger Daten - den Status der React-Komponente. <br><br>  Wenn Sie einige Daten in den Redux-Status versetzen, sollten Sie diese Daten immer aus dem Redux-Status lesen.  F√ºr alles, was sich im Redux-Repository befindet, sollte dieses Repository die einzige Quelle f√ºr zuverl√§ssige Daten sein. <br><br>  Wenn n√∂tig, ist es v√∂llig normal, alles in einen Redux-Zustand zu versetzen.  M√∂glicherweise wirkt sich dies auf die Leistung aus, wenn Sie Statusfragmente verwenden, die h√§ufig aktualisiert werden m√ºssen, oder wenn Sie √ºber das Speichern des Status einer Komponente sprechen, in der abh√§ngige Statusfragmente h√§ufig verwendet werden.  Sie sollten sich keine Sorgen um die Leistung machen, bis es Probleme mit der Leistung gibt.  Wenn Sie jedoch √ºber das Leistungsproblem besorgt sind, versuchen Sie beide Arten der Zusammenarbeit mit dem Staat und bewerten Sie deren Auswirkungen auf die Leistung.  Profilieren Sie Ihr Projekt und merken Sie sich das RAIL-Leistungsmodell. <br><br><h3>  <font color="#3AC1EF">‚ñç Muss ich die Connect-Funktion von React-Redux verwenden oder ist es besser, Hooks zu verwenden?</font> </h3><br>  Es kommt auf viel an.  Die <code>connect</code> erstellt eine Komponente h√∂herer Ordnung, die f√ºr die wiederholte Verwendung geeignet ist, und Hooks sind f√ºr die Integration mit einer einzelnen Komponente optimiert. <br><br>  Muss ich dieselben Eigenschaften mit verschiedenen Komponenten verbinden?  Wenn ja, verwenden Sie <code>connect</code> .  Ansonsten w√ºrde ich lieber Haken pfl√ºcken.  Stellen Sie sich beispielsweise vor, Sie haben eine Komponente, die f√ºr die Autorisierung von Berechtigungen f√ºr Benutzeraktionen verantwortlich ist: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { connect } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> RequiresPermission <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./requires-permission-component'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { userHasPermission } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../features/user-profile/user-profile-reducer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> curry <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash/fp/curry'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> requiresPermission = curry(  <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">NotPermittedComponent, { permission }, PermittedComponent</span></span></span><span class="hljs-function">) =&gt;</span></span> {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> ({      NotPermittedComponent,      PermittedComponent,      <span class="hljs-attr"><span class="hljs-attr">isPermitted</span></span>: userHasPermission(state, permission),    });    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> connect(mapStateToProps)(RequiresPermission);  }, ); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> requiresPermission;</code> </pre> <br>  Wenn ein Administrator intensiv mit der Anwendung arbeitet, f√ºr deren Aktionen alle besondere Berechtigungen erforderlich sind, k√∂nnen Sie eine Komponente h√∂herer Ordnung erstellen, die alle diese Berechtigungen mit allen erforderlichen End-to-End-Funktionen kombiniert: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> NextError <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'next/error'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> compose <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash/fp/compose'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requiresPermission <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../requires-permission'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withFeatures <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-features'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withAuth <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-auth'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withEnv <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-env'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withLoader <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-loader'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> withLayout <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../with-layout'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> compose(  withEnv,  withAuth,  withLoader,  withLayout(),  withFeatures,  requiresPermission(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> &lt;NextError statusCode={<span class="hljs-number"><span class="hljs-number">404</span></span>} /&gt;, {    <span class="hljs-attr"><span class="hljs-attr">permission</span></span>: <span class="hljs-string"><span class="hljs-string">'admin'</span></span>,  }), );</code> </pre> <br>  So verwenden Sie es: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> compose <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash/fp/compose'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> adminPage <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../HOCs/admin-page'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AdminIndex <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../features/admin-index/admin-index-component.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> adminPage(AdminIndex);</code> </pre> <br>  Die Komponenten-API h√∂herer Ordnung ist f√ºr diese Aufgabe geeignet.  Sie k√∂nnen es pr√§gnanter l√∂sen, indem Sie weniger Code als Hooks verwenden.  Um die <code>connect</code> k√∂nnen, m√ºssen Sie jedoch ber√ºcksichtigen, dass <code>mapStateToProps</code> als erstes Argument und <code>mapStateToProps</code> als zweites Argument verwendet werden.  Wir d√ºrfen nicht vergessen, dass diese Funktion Funktionen oder Objektliterale annehmen kann.  Sie m√ºssen wissen, wie sich die verschiedenen Verwendungszwecke von <code>connect</code> unterscheiden und dass dies eine Curry-Funktion ist, deren Currying jedoch nicht automatisch durchgef√ºhrt wird. <br><br>  Mit anderen Worten, ich kann sagen, dass ich glaube, dass w√§hrend der Entwicklung von <code>connect</code> viel Arbeit in Richtung der Pr√§gnanz des Codes geleistet wurde, aber der resultierende Code ist weder besonders lesbar noch besonders praktisch.  Wenn ich nicht mit mehreren Komponenten arbeiten muss, ziehe ich die unbequeme <code>connect</code> API gerne einer viel bequemeren Hook-API vor, auch wenn dies zu einer Erh√∂hung der Codemenge f√ºhrt. <br><br><h3>  <font color="#3AC1EF">‚ñç Wenn ein Singleton als Anti-Pattern und Redux als Singleton betrachtet wird, bedeutet dies, dass Redux ein Anti-Pattern ist?</font> </h3><br>  Nein, das tut es nicht.  Die Verwendung eines Singletons im Code weist auf die zweifelhafte Qualit√§t dieses Codes hin und weist auf das Vorhandensein eines gemeinsamen ver√§nderlichen Zustands hin.  Dies ist ein echtes Anti-Muster.  Redux hingegen verhindert die Mutation des gemeinsam genutzten Status durch Kapselung (Sie sollten den Status der Anwendung nicht direkt au√üerhalb von Reduzierern √§ndern; Redux l√∂st das Problem der Status√§nderung) und durch Senden von Nachrichten (nur das gesendete Ereignisobjekt kann eine Status√§nderung verursachen). <br><br><h2>  <font color="#3AC1EF">Zusammenfassung</font> </h2><br>  Ersetzt Redux React-Haken?  Haken sind gro√üartig, aber sie ersetzen Redux nicht. <br><br>  Wir hoffen, dass dieses Material Ihnen bei der Auswahl eines Zustandsverwaltungsmodells f√ºr Ihre React-Projekte hilft. <br><br>  <b>Liebe Leser!</b>  Haben Sie Situationen erlebt, in denen React-Hooks Redux ersetzen k√∂nnen? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/it/t5/3p/itt53pns2iucwylb3bwn1fmmtnu.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de464293/">https://habr.com/ru/post/de464293/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de464283/index.html">Anwendungen f√ºr E-Books auf dem Android-Betriebssystem. Teil 3. W√∂rterb√ºcher und Notizen</a></li>
<li><a href="../de464285/index.html">Vkontakte-Profilfoto automatisch aktualisieren</a></li>
<li><a href="../de464287/index.html">Der Durchgang der Labormaschine zum Pentest "Hackthebox - Friendzone"</a></li>
<li><a href="../de464289/index.html">Wie schreibe ich Go-Pakete</a></li>
<li><a href="../de464291/index.html">Die 10 einflussreichsten Programmiersprachen der letzten 50 Jahre und ihre Sch√∂pfer</a></li>
<li><a href="../de464295/index.html">Beispiele f√ºr die Verwendung einiger neuer JavaScript-Funktionen</a></li>
<li><a href="../de464299/index.html">0, 0, 1, 0, 2, 0, 2, 2, 1, 6, 0, 5, 0, 2, 6, 5, 4, 0, 5, 3, 0, 3, 2, 9, 0, 4, 9, 3, 6, 14, 0, 6, 3, 5, 15, 0, 5, 3, 5 ...</a></li>
<li><a href="../de464303/index.html">Zeitreihendaten in einem relationalen DBMS. Erweiterungen TimescaleDB und PipelineDB f√ºr PostgreSQL</a></li>
<li><a href="../de464305/index.html">Klein, ja. Unboxing des Firecracker mikrovirtuell</a></li>
<li><a href="../de464307/index.html">Integrationstests von Microservices auf Scala</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>