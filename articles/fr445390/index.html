<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé™ üìµ üî± IDE d'une personne normale ou pourquoi nous avons choisi Monaco üë®‚Äçüëß‚Äçüëß üëû üê™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Note de l'√©diteur 
 Dans le dernier article, nous avons parl√© de la sortie du panneau de contr√¥le Voximplant, sans oublier de mentionner l'IDE mis √† j...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>IDE d'une personne normale ou pourquoi nous avons choisi Monaco</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/Voximplant/blog/445390/"><h2>  Note de l'√©diteur </h2><br>  Dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dernier article,</a> nous avons parl√© de la sortie du panneau de contr√¥le Voximplant, sans oublier de mentionner l'IDE mis √† jour.  Aujourd'hui, nous consacrons un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">long parcours</a> s√©par√© √† cet outil - notre coll√®gue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Geloosa a</a> soigneusement d√©crit √† la fois le processus de choix d'une technologie et la mise en ≈ìuvre avec des onglets, des styles de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">saisie</a> automatique et personnalis√©s.  Asseyez-vous plus commod√©ment, mettez de c√¥t√© le reste de vos affaires et allez au tacle, o√π les tripes de Monaco attendent les curieux - ne glissez pas, il y en a beaucoup :) Bonne lecture. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/t1/vr/8x/t1vr8xlaaladvtlhhi47hm4ihsg.png" width="700"></div><a name="habracut"></a><br><h2>  Quelle biblioth√®que choisir pour l'√©diteur de code? </h2><br>  Npm produit plus de 400 r√©sultats pour l'√©diteur de code.  Pour la plupart, ce sont des enveloppes d'interface utilisateur de plusieurs des biblioth√®ques les plus populaires faites pour un cadre ou un projet particulier, des plug-ins pour les m√™mes biblioth√®ques ou leurs fourches avec des modifications pour eux-m√™mes, ainsi que pour ne pas modifier le code dans le navigateur, ils sont simplement entr√©s dans la sortie par mots-cl√©s.  Donc, heureusement, le choix est beaucoup plus restreint.  Quelques <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">biblioth√®ques</a> suppl√©mentaires - √† la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CodeFlask</a> , l√©g√®res, mais pas tr√®s fonctionnelles, con√ßues pour de petits extraits et des exemples interactifs, mais pas pour un IDE Web √† part enti√®re avec les fonctionnalit√©s auxquelles nous sommes habitu√©s dans les √©diteurs de bureau. <br><br>  Au final, nous avons le choix entre 3 biblioth√®ques: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ace</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CodeMirror</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Monaco Editor</a> .  Le plus ancien d'entre eux, CodeMirror, √©tait une initiative priv√©e de Berliner <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Marijn Haverbeke</a> , qui avait besoin d'un √©diteur de code d'exercice dans son tutoriel en ligne, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Eloquent JavaScript</a> .  La premi√®re version de l'√©diteur a √©t√© publi√©e en 2007.  En 2010, la premi√®re version d'Ace a √©t√© pr√©sent√©e √† JSConf.eu dans le m√™me Berlin, qu'Ajax.org a ensuite d√©velopp√© pour son cloud IDE Cloud9 (en fait, Ace signifie Ajax.org Cloud9 Editor).  En 2016, Cloud9 a √©t√© achet√© par Amazon et fait maintenant partie d'AWS.  Le dernier, Monaco Editor, est un composant de VS Code et a √©t√© publi√© par Microsoft fin 2015. <br><br>  Chaque √©diteur a ses propres forces et faiblesses; chacun est utilis√© dans plus d'un grand projet.  Par exemple, CodeMirror est utilis√© dans les outils de d√©veloppement Chrome et Firefox, un IDE dans Bitbucket, dans RunKit dans npm;  Ace - √† la Codecademy, Khan Academy, MODX;  Monaco - dans l'IDE GitLab et CodeSandbox.  Voici un tableau de comparaison qui peut vous aider √† choisir la biblioth√®que qui convient le mieux √† votre projet. <br><br><table><tbody><tr><td></td><td colspan="3" align="center">  Biblioth√®ques </td></tr><tr><td></td><td>  As </td><td>  CodeMirror </td><td>  Monaco </td></tr><tr><td>  D√©veloppeur </td><td>  IDE Cloud9 (Ajax.org), <br>  fait maintenant partie d'AmazonMozilla </td><td>  Marijn haverbeke </td><td>  Microsoft </td></tr><tr><td>  Prise en charge du navigateur </td><td>  Firefox ^ 3.5 <br>  Chrome <br>  Safari ^ 4.0 <br>  IE ^ 8.0 <br>  Opera ^ 11,5 </td><td>  Firefox ^ 3.0 <br>  Chrome <br>  Safari ^ 5.2 <br>  IE ^ 8.0 <br>  Opera ^ 9.2 </td><td>  Firefox ^ 4.0 <br>  Chrome <br>  Safari (v -?) <br>  IE ^ 11.0 <br>  Opera ^ 15,0 </td></tr><tr><td>  Prise en charge linguistique <br>  (coloration syntaxique) </td><td>  &gt; 120 </td><td>  &gt; 100 </td><td>  &gt; 20 </td></tr><tr><td>  Nombre de caract√®res dans <br>  derni√®res versions sur <br>  cndjs.com </td><td>  366 608 (v1.4.3) </td><td>  394 269 (v5.44.0) </td><td>  2 064 949 (v0.16.2) </td></tr><tr><td>  Le poids des derni√®res versions, <br>  gzip </td><td>  2.147 KB </td><td>  1,411 KB </td><td>  10.898 KB </td></tr><tr><td>  Rendu </td><td>  Dom </td><td>  Dom </td><td>  DOM et partiellement &lt;canvas&gt; <br>  (pour le d√©filement et la minicarte) </td></tr><tr><td>  La documentation </td><td>  7 sur 10: pas de recherche, pas toujours clair <br>  que les m√©thodes reviennent, il y a des doutes <br>  en compl√©tude et pertinence <br>  (tous les liens ne fonctionnent pas dans le dock) </td><td>  6 sur 10: fusionn√© avec le guide d'utilisation, <br>  recherche par Ctrl + F, <br>  il y a des doutes quant √† l'exhaustivit√© </td><td>  9 sur 10: beau, avec recherche et <br>  r√©f√©rence crois√©e <br>  -1 point pour manque d'explication <br>  √† certains drapeaux dont l'application <br>  pas tout √† fait √©vident d'apr√®s le nom </td></tr><tr><td>  D√©monstrations de d√©marrage rapide </td><td>  Comment - documents texte avec des exemples de code, <br>  s√©par√©ment, il y a des d√©mos avec des exemples de code <br>  (c'est vrai, ils sont dispers√©s sur diff√©rentes pages, <br>  tout le monde ne fonctionne pas et ils sont recherch√©s plus facilement via Google), <br>  il y a une d√©mo o√π vous pouvez toucher diff√©rentes fonctionnalit√©s, <br>  mais il est propos√© de les g√©rer via les contr√¥les de l'interface utilisateur, <br>  c'est-√†-dire que nous devons encore rechercher s√©par√©ment les m√©thodes <br>  pour les connecter </td><td>  Comment sont vraiment pauvres <br>  essentiellement tout est dispers√© sur github <br>  et stackoverflow, mais il y a des d√©mos de fonctionnalit√©s avec des exemples <br>  code pour leur mise en ≈ìuvre </td><td>  Combin√© sous la forme d'une aire de jeux: <br>  code avec des commentaires et un certain nombre de d√©mos, vous pouvez <br>  essayez imm√©diatement d'√©valuer <br>  de nombreuses possibilit√©s </td></tr><tr><td>  Activit√© communautaire </td><td>  Moyenne </td><td>  √âlev√© </td><td>  Moyenne </td></tr><tr><td>  Activit√© d√©veloppeur </td><td>  Moyenne </td><td>  Moyenne </td><td>  √âlev√© </td></tr></tbody></table><br>  Cela n'a aucun sens de comparer les biblioth√®ques par taille, car tout d√©pend de quoi et comment se connecter pour un projet particulier: chargez le fichier fini avec l'une des versions (qui varient √©galement) ou ex√©cutez le package npm via une sorte de collecteur.  Et le plus important est la quantit√© d'utilisation de l'√©diteur: si tous les styles et th√®mes sont charg√©s, combien et quels modules compl√©mentaires et plug-ins sont utilis√©s.  Par exemple, dans CodeMirror, la plupart des fonctionnalit√©s qui fonctionnent √† Monaco et Ace pr√™t √† l'emploi ne sont disponibles qu'avec des modules compl√©mentaires.  Le tableau montre le nombre de caract√®res dans les versions r√©centes sur le CDN et le poids de leurs fichiers compress√©s pour une id√©e g√©n√©rale des ordres impliqu√©s. <br><br>  Toutes les biblioth√®ques ont √† peu pr√®s le m√™me ensemble de fonctionnalit√©s de base: mise en forme automatique du code, lignes de pliage, couper / copier / coller, touches de raccourci, possibilit√© d'ajouter de nouvelles syntaxes pour la mise en √©vidence et la commande, v√©rification de la syntaxe (dans CodeMirror uniquement via des modules compl√©mentaires, dans Ace jusqu'√† pr√©sent uniquement pour JavaScript / CoffeeScript / CSS / XQuery), les info-bulles et la saisie semi-automatique (dans CodeMirror - via les modules compl√©mentaires), la recherche avanc√©e par code (dans CodeMirror - via les modules compl√©mentaires), les m√©thodes d'impl√©mentation des onglets et du mode partag√©, le mode diff et un outil de fusion (dans CodeMirror - soit avec des avantages et des inconv√©nients dans une seule fen√™tre, soit avec deux panneaux via un addon,  Ace - Lieb s√©par√©e).  En raison de son √¢ge, de nombreux modules compl√©mentaires ont √©t√© √©crits pour CodeMirror, mais leur nombre affectera √† la fois le poids et la vitesse de l'√©diteur.  Monaco peut faire beaucoup de choses hors de la bo√Æte, et, √† mon avis, mieux et dans un volume plus important que Ace et CodeMirror. <br><br>  Nous avons s√©journ√© √† Monaco pour plusieurs raisons: <br><br><ol><li>  Les outils les plus d√©velopp√©s que nous avons jug√©s critiques pour notre projet: <br><ul><li>  IntelliSense - conseils et saisie semi-automatique; </li><li>  navigation intelligente dans les codes dans le menu contextuel et sur la minicarte; </li><li>  mode diff √† deux panneaux hors de la bo√Æte. </li></ul><br></li><li>  √âcrit en TypeScript.  Notre panneau de contr√¥le est √©crit en Vue + Typescript, donc le support TS √©tait important.  Soit dit en passant, Ace prend √©galement en charge TS r√©cemment, mais il a √©t√© initialement √©crit en JS.  Pour CodeMirror, il existe des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">types</a> dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DefinitelyTyped</a> . </li><li>  Il y est d√©velopp√© le plus activement (peut-√™tre parce qu'il a √©t√© publi√© il n'y a pas si longtemps), les bogues sont corrig√©s plus rapidement et les requ√™tes de pool sont combattues.  √Ä titre de comparaison, avec CodeMirror, nous avons eu une triste exp√©rience, lorsque les bugs n'ont pas √©t√© corrig√©s pendant des ann√©es et que nous avons mis une b√©quille sur une b√©quille et conduit une b√©quille. </li><li>  Documentation pratique g√©n√©r√©e automatiquement (qui donne de l'espoir pour son exhaustivit√©) avec des r√©f√©rences crois√©es entre les interfaces et les m√©thodes. </li><li>  √Ä notre go√ªt, la plus belle interface utilisateur (probablement aussi li√©e √† l'heure de cr√©ation) et une API concise. </li><li>  Apr√®s avoir demand√© aux amis des d√©veloppeurs quels √©diteurs causaient le plus de maux de t√™te, Ace et CodeMirror √©taient les leaders. </li></ol><br>  S√©par√©ment, il faut parler de la vitesse de travail.  L'analyse co√ªteuse a lieu dans un thread de travail parall√®le.  De plus, tous les calculs sont limit√©s par la taille de la fen√™tre d'affichage (tous les types, couleurs et rendus sont calcul√©s uniquement pour les lignes visibles).  Il ne commence √† freiner que si le code contient 100 000 lignes - les invites peuvent √™tre calcul√©es pendant plusieurs secondes.  Ace, qui utilise √©galement des travailleurs pour le calcul intensif, s'est av√©r√© √™tre plus rapide: dans un code de la m√™me longueur, des invites apparaissent presque instantan√©ment et il g√®re rapidement 200 000 lignes (sur le site officiel, il est indiqu√© que m√™me 4 millions de lignes ne devraient pas √™tre un probl√®me, bien que les vis ont √©t√© acc√©l√©r√©es, l'entr√©e a commenc√© √† ralentir et les invites ont disparu apr√®s le 1er million).  CodeMirror, o√π il n'y a pas de calculs parall√®les, peut √† peine tirer de tels volumes: il peut scintiller √† la fois le texte et la coloration syntaxique.  √âtant donn√© que 100 000 lignes dans un fichier sont rares dans le monde r√©el, nous avons ferm√© les yeux sur cela.  M√™me avec 40 √† 50 000 lignes, Monaco fait un excellent travail. <br><br><h2>  Connexion de Monaco et utilisation des fonctionnalit√©s de base (par exemple, int√©gration avec Vue) </h2><br><h3>  Connexion </h3><br>  Ici, je vais donner des exemples de code des composants vue et utiliser la terminologie appropri√©e.  Mais tout cela est facilement port√© sur n'importe quel autre framework ou JS pur. <br><br>  Le code source de Monaco peut √™tre t√©l√©charg√© sur le site officiel et mis dans votre projet, vous pouvez le r√©cup√©rer sur CDN, vous pouvez vous connecter au projet via npm.  Je vais parler de la troisi√®me option et construire en utilisant webpack. <br><br>  Nous mettons monaco-editor et un plug-in pour l'assemblage: <br><br><pre><code class="bash hljs">npm i -S monaco-editor npm i -D monaco-editor-webpack-plugin</code> </pre> <br>  Dans la configuration du webpack, ajoutez: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MonacoWebpackPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'monaco-editor-webpack-plugin'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-comment"><span class="hljs-comment">// ... plugins: [ // ... new MonacoWebpackPlugin() ] };</span></span></code> </pre> <br>  Si vous utilisez Vue et vue-cli-service pour construire, ajoutez √† vue.config.js: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MonacoWebpackPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'monaco-editor-webpack-plugin'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-comment"><span class="hljs-comment">// ... configureWebpack: (config) =&gt; { // ... config.plugins.push(new MonacoWebpackPlugin()); } };</span></span></code> </pre> <br>  Si vous n'avez pas besoin de toutes les langues et fonctionnalit√©s de Monaco, pour r√©duire la taille du bundle, vous pouvez transf√©rer <code>MonacoWebpackPlugin</code> objet avec les param√®tres vers <code>MonacoWebpackPlugin</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MonacoWebpackPlugin({ <span class="hljs-attr"><span class="hljs-attr">output</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-comment"><span class="hljs-comment">// ,     languages: ['markdown'], //     ,     features: ['format', 'contextmenu'] //      })</span></span></code> </pre> <br>  Une liste compl√®te des fonctionnalit√©s et des langues du plugin est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h3>  Cr√©er et personnaliser un √©diteur </h3><br>  Nous importons <code>editor</code> et appelons <code>editor.create(el: HTMLElement, config?: IEditorConstructionOptions)</code> , en passant l'√©l√©ment DOM dans lequel nous voulons cr√©er l'√©diteur comme premier argument. <br><br>  Dans le composant √©diteur: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> {editor} </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'monaco-editor'</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> {Component, Prop, Vue} </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'vue-property-decorator'</span></span></span><span class="javascript">; @Component() </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">Monaco</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">Vue</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span></span><span class="javascript">{ private editor = </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">null</span></span></span><span class="javascript">; mounted() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.editor = editor.create(</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.$refs.editor); } } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.editor</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin</span></span></span><span class="css">: auto; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">width</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">60vw</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">200px</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Le conteneur de l'√©diteur doit obligatoirement r√©gler la hauteur pour qu'elle ne se r√©v√®le pas nulle.  Si vous cr√©ez l'√©diteur dans une div vide (avec une hauteur nulle - votre K.O.), Monaco √©crira la m√™me hauteur dans un style en ligne dans la fen√™tre de l'√©diteur. <br><br>  Le deuxi√®me argument facultatif de <code>editor.create</code> est la configuration de l'√©diteur.  Il y a plus d'une centaine d'options, une description compl√®te de l'interface <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IEditorConstructionOptions</a> est dans la documentation. <br><br>  Pour un exemple, nous allons d√©finir la langue, le th√®me et le texte initial et activer l'habillage de ligne (par d√©faut, ils ne sont pas encapsul√©s): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = { <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-string"><span class="hljs-string">`function hello() { alert('Hello world!'); }`</span></span>, <span class="hljs-attr"><span class="hljs-attr">language</span></span>: <span class="hljs-string"><span class="hljs-string">'javascript'</span></span>, <span class="hljs-attr"><span class="hljs-attr">theme</span></span>: <span class="hljs-string"><span class="hljs-string">'vs-dark'</span></span>, <span class="hljs-attr"><span class="hljs-attr">wordWrap</span></span>: <span class="hljs-string"><span class="hljs-string">'on'</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.editor = editor.create(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$refs.editor, config);</code> </pre> <br>  La fonction <code>editor.create</code> renvoie un objet avec l'interface <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IStandaloneCodeEditor</a> .  Gr√¢ce √† lui, vous pouvez d√©sormais contr√¥ler tout ce qui se passe dans l'√©diteur, y compris la modification des param√®tres initiaux: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//        read-only  this.editor.updateOptions({wordWrap: 'off', readOnly: true});</span></span></code> </pre> <br>  Maintenant, pour la douleur: <code>updateOptions</code> accepte un objet avec l'interface <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IEditorOptions</a> , pas IEditorConstructionOptions.  Ils sont l√©g√®rement diff√©rents: IEditorConstructionOptions est plus large, il inclut les propri√©t√©s de cette instance de l'√©diteur et certaines globales.  <code>updateOptions</code> propri√©t√©s d' <code>updateOptions</code> sont modifi√©es via <code>updateOptions</code> , global - via les m√©thodes de l' <code>editor</code> global.  Et en cons√©quence, ceux qui changent globalement changent pour toutes les instances.  Parmi ces options est le <code>theme</code> .  Cr√©ez 2 instances avec des th√®mes diff√©rents;  y des deux sera celui donn√© dans le dernier (sombre ici).  La <code>editor.setTheme('vs')</code> globale <code>editor.setTheme('vs')</code> changera √©galement le sujet pour les deux.  Cela affectera m√™me les fen√™tres qui se trouvent sur une autre page de votre SPA.  Il y a peu de tels endroits, mais vous devez les suivre. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor1'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor2'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">// ... this.editor1 = editor.create(this.$refs.editor1, {theme: 'vs'}); this.editor2 = editor.create(this.$refs.editor2, {theme: 'vs-dark'}); // ... </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><h3>  Supprimer l'√©diteur </h3><br>  Lorsque vous d√©truisez une fen√™tre Monaco, vous devez appeler la m√©thode <code>dispose</code> , sinon tous les √©couteurs ne seront pas effac√©s et les fen√™tres cr√©√©es apr√®s cela pourraient ne pas fonctionner correctement, r√©agissant plusieurs fois √† certains √©v√©nements: <br><br><pre> <code class="javascript hljs">beforeDestroy() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.editor &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.editor.dispose(); }</code> </pre> <br><h3>  Onglets </h3><br>  Les onglets ouverts dans l'√©diteur de fichiers utilisent la m√™me fen√™tre Monaco.  Pour basculer entre eux, les m√©thodes IStandaloneCodeEditor sont utilis√©es: <code>getModel</code> pour l'enregistrement et <code>setModel</code> pour la mise √† jour du <code>setModel</code> de l'√©diteur.  Le mod√®le stocke le texte, la position du curseur et l'historique des actions √† annuler.  Pour cr√©er un mod√®le d'un nouveau fichier, la <code>editor.createModel(text: string, language: string)</code> est utilis√©e.  Si le fichier est vide, vous ne pouvez pas cr√©er de mod√®le et passer <code>null</code> √† <code>setModel</code> : <br><br><div class="spoiler">  <b class="spoiler_title">Afficher le code</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'tabs'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'tab'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">v-for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tab in tabs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:key</span></span></span><span class="hljs-tag">'</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tab.id</span></span></span><span class="hljs-tag">' @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'() =&gt; switchTab(tab.id)'</span></span></span><span class="hljs-tag">&gt;</span></span> {{tab.name}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> {editor} </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'monaco-editor'</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> {Component, Prop, Vue} </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'vue-property-decorator'</span></span></span><span class="javascript">; @Component() </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">Monaco</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-class"><span class="hljs-title">Vue</span></span></span></span><span class="javascript"><span class="hljs-class"> </span></span></span><span class="javascript">{ private editor = </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">null</span></span></span><span class="javascript">; private tabs: [ {</span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">id</span></span></span><span class="javascript">: </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'tab 1'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">text</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'const tab = 1;'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">model</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">null</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">active</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">}, {</span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">id</span></span></span><span class="javascript">: </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">2</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'tab 2'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">text</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'const tab = 2;'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">model</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">null</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">active</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript">} ]; mounted() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.editor = editor.create(</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.$refs.editor); } private switchTab(id) { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> activeTab = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.tabs.find(</span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">tab</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> tab.id === id); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (!activeTab.active) { </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//    (     )    const model = !activeTab.model &amp;&amp; activeTab.text ? editor.createModel(activeTab.text, 'javascript') : activeTab.model; //          this.tabs = this.tabs.map(tab =&gt; ({ ...tab, model: tab.active ? this.editor.getModel() : tab.model, active: tab.id === id })); //    this.editor.setModel(model); } } </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br><h3>  Mode Diff </h3><br>  Pour le mode diff, vous devez utiliser une autre m√©thode d' <code>editor</code> lors de la cr√©ation de la fen√™tre d'√©diteur - <code>createDiffEditor</code> : <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'diffEditor'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'editor'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> // ... mounted() { this.diffEditor = editor.createDiffEditor(this.$refs.diffEditor, config); } // ...</code> </pre> <br>  Il prend les m√™mes param√®tres que <code>editor.create</code> , mais la config doit avoir une interface <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IDiffEditorConstructionOptions</a> , qui est l√©g√®rement diff√©rente de la config √©diteur classique, en particulier, elle n'a pas de <code>value</code> .  Les textes de comparaison sont d√©finis apr√®s la cr√©ation de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IStandaloneDiffEditor</a> retourn√© via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">setModel</a> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.diffEditor.setModel({ <span class="hljs-attr"><span class="hljs-attr">original</span></span>: editor.createModel(<span class="hljs-string"><span class="hljs-string">'const a = 1;'</span></span>, <span class="hljs-string"><span class="hljs-string">'javascript'</span></span>), <span class="hljs-attr"><span class="hljs-attr">modified</span></span>: editor.createModel(<span class="hljs-string"><span class="hljs-string">'const a = 2;'</span></span>, <span class="hljs-string"><span class="hljs-string">'javascript'</span></span>) });</code> </pre> <br><br><h3>  Menu contextuel, palette de commandes et touches de raccourci </h3><br>  Monaco utilise son menu contextuel sans navigateur, o√π il y a une navigation intelligente, un multi-curseur pour changer toutes les occurrences et une palette de commandes comme dans VS Code (palette de commandes) avec un tas de commandes et de raccourcis utiles qui acc√©l√®rent l'√©criture de code: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ka/ob/fa/kaobfagb3sdmtmikvocuai96die.png"></div><br><pre>  Menu contextuel de Monaco </pre><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eg/2s/_c/eg2s_c1kzyqi0eo4yhxo2o-sde4.png"></div><br><pre>  Palette de commandes Monaco </pre><br><br>  Le menu contextuel est d√©velopp√© via la m√©thode <code>addAction</code> (il est disponible √† la fois dans <code>IStandaloneCodeEditor</code> et <code>IStandaloneDiffEditor</code> ), qui accepte un objet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IActionDescriptor</a> : <br><br><div class="spoiler">  <b class="spoiler_title">Afficher le code</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ... &lt;div ref='diffEditor' :style='{display: isDiffOpened ? "block" : "none"}'&gt;&lt;/div&gt; // ... //  KeyCode  KeyMod     import {editor, KeyCode, KeyMod} from "monaco-editor"; // ... private editor = null; private diffEditor = null; private isDiffOpened = false; private get activeTab() { return this.tabs.find(tab =&gt; tab.active); } mounted() { this.diffEditor = editor.createDiffEditor(this.$refs.diffEditor); this.editor = editor.create(this.$refs.editor); this.editor.addAction({ //  ,     . contextMenuGroupId: '1_modification', //   : 1 - 'navigation', 2 - '1_modification', 3 - '9_cutcopypaste'; //    contextMenuOrder: 3, //       label: 'Show diff', id: 'showDiff', keybindings: [KeyMod.CtrlCmd + KeyMod.Shift + KeyCode.KEY_D], //   // ,     //    run: this.showDiffEditor }); } //      private showDiffEditor() { this.diffEditor.setModel({ original: this.activeTab.initialText, modified: this.activeTab.editedText }); this.isDiffOpened = true; }</span></span></code> </pre> <br></div></div><br>  Afin de ne lier qu'un raccourci √† une action sans l'afficher dans le menu contextuel, la m√™me m√©thode est utilis√©e, seul le <code>contextMenuGroupId</code> l'action n'est pas sp√©cifi√©: <br><br><div class="spoiler">  <b class="spoiler_title">Afficher le code</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ... //   private myActions = [ { contextMenuGroupId: '1_modification', contextMenuOrder: 3, label: &lt;string&gt;this.$t('scenarios.showDiff'), id: 'showDiff', keybindings: [KeyMod.CtrlCmd + KeyMod.Shift + KeyCode.KEY_D], run: this.showDiffEditor }, // ,   Ctrl + C + L      { label: 'Get content length', id: 'getContentLength', keybindings: [KeyMod.CtrlCmd + KeyCode.Key_C + KeyCode.Key_L], run: () =&gt; this.editor &amp;&amp; alert(this.editor.getValue().length) } ]; mounted() { this.editor = editor.create(this.$refs.editor); this.myActions.forEach(this.editor.addAction); //     }</span></span></code> </pre> <br></div></div><br>  La palette de commandes comprendra toutes les actions ajout√©es. <br><br><h3>  Conseils et saisie semi-automatique </h3><br>  √Ä ces fins, Monaco utilise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IntelliSense</a> , ce qui est cool.  Vous pouvez lire et voir sur les captures d'√©cran le lien combien d'informations utiles il peut montrer.  Si votre langue n'a pas encore de saisie semi-automatique, vous pouvez l'ajouter via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">registerCompletionItemProvider</a> .  Et pour JS et TS, il existe d√©j√† une m√©thode <code>addExtraLib</code> qui vous permet de charger des d√©finitions TypeScript pour les info-bulles et la <code>addExtraLib</code> -automatique: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ... import {languages} from "monaco-editor"; // ... // ,          private myAddedLib = null; mounted() { // languages     Monaco this.myAddedLib = languages.typescript.javascriptDefaults.addExtraLib('interface MyType {prop: string}', 'myLib'); } beforeDestroy() { //  ,   this.myAddedLib &amp;&amp; this.myAddedLib.dispose(); }</span></span></code> </pre> <br>  Dans le premier param√®tre, la ligne transmet les d√©finitions, dans le second, facultatif, le nom de la lib. <br><br><h3>  Langues et th√®mes personnalis√©s </h3><br>  Monaco dispose d'un module <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Monarch</a> pour d√©terminer la syntaxe de ses langues.  La syntaxe est d√©crite de fa√ßon assez standard: la correspondance entre les habitu√©s et les jetons caract√©ristiques de cette langue est √©tablie. <br><br><div class="spoiler">  <b class="spoiler_title">Afficher le code</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ... //  ,    : private myLanguage = { defaultToken: 'text', //  , brackets: [{ open: '(', close: ')', token: 'bracket.parenthesis' }], // ,   , keywords: [ 'autumn', 'winter', 'spring', 'summer' ], //     tokenizer: { root: [{ regex: /\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}/, action: { token: 'date' } }, { regex: /(boy|girl|man|woman|person)(\s[A-Za-z]+)/, action: ['text', 'variable'] } ] } }; mounted() { //     languages.register({ id: 'myLanguage' }); //      languages.setMonarchTokensProvider('myLanguage', this.myLanguage); // ... }</span></span></code> </pre> <br></div></div><br>  Vous pouvez √©galement cr√©er un th√®me pour vos jetons - un objet avec l'interface <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IStandaloneThemeData</a> - et l'installer dans l' <code>editor</code> global: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ... private myTheme = { base: 'vs', // ,      inherit: true, //       rules: [ {token: 'date', foreground: '22aacc'}, {token: 'variable', foreground: 'ff6600'}, {token: 'text', foreground: 'd4d4d4'}, {token: 'bracket', foreground: 'd4d4d4'} ] }; mounted() { editor.defineTheme('myTheme', this.myTheme); // ... }</span></span></code> </pre> <br>  Maintenant, le texte dans la langue d√©crite ressemblera √† ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gv/b-/3-/gvb-3-3by31loig9rdgmjoy0kb8.png"></div><br>  Vous pouvez appliquer cette fonctionnalit√© tant que vous avez suffisamment d'imagination.  Par exemple, nous avons cr√©√© une visionneuse du journal des appels dans notre panneau pour les d√©veloppeurs.  Les journaux sont souvent longs et incompr√©hensibles, mais lorsqu'ils sont affich√©s avec une coloration syntaxique, une recherche intelligente, des lignes de pliage / expansion, les commandes n√©cessaires (par exemple, Prettify params), mettant en √©vidence toutes les lignes d'appel par leur identifiant ou traduisant l'heure du journal dans un fuseau horaire diff√©rent, puis creuser cela devient beaucoup plus facile en eux (la capture d'√©cran est cliquable): <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/webt/4i/5v/rk/4i5vrkhe7g__s_mecfpytcf1gra.png"></a> </div><br><h3>  Conclusion </h3><br>  En r√©sum√©, je dirai que Monaco est le feu.  Apr√®s des mois de travail avec lui, j'ai des souvenirs exceptionnellement agr√©ables.  Si vous choisissez un √©diteur pour le code, assurez-vous d'aller sur son <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Playground</a> et de jouer avec le code, voir ce qu'il peut faire d'autre.  C'est peut-√™tre exactement ce que vous recherchez. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445390/">https://habr.com/ru/post/fr445390/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445370/index.html">Analyse TSDB dans Prom√©th√©e 2</a></li>
<li><a href="../fr445372/index.html">Vision industrielle vs intuition humaine: algorithmes pour perturber le fonctionnement des programmes de reconnaissance d'objets</a></li>
<li><a href="../fr445378/index.html">Labyrinthes: classification, g√©n√©ration, recherche de solutions</a></li>
<li><a href="../fr445380/index.html">Le PHP moderne est beau et productif</a></li>
<li><a href="../fr445384/index.html">Mission Chang'e-4 - √©quipement scientifique sur le module d'atterrissage et le satellite r√©p√©teur</a></li>
<li><a href="../fr445392/index.html">Remarketing dynamique MyTarget: recommandations de produits non personnels</a></li>
<li><a href="../fr445394/index.html">Modifications du protocole 3D Secure: rencontrez 3-D Secure 2.0</a></li>
<li><a href="../fr445398/index.html">Gugologie (ce n'est pas une faute de frappe) pour les programmeurs</a></li>
<li><a href="../fr445402/index.html">Tir de nuit, ou pourquoi charger la prod - pas effrayant</a></li>
<li><a href="../fr445406/index.html">Vue d'ensemble du programme C ++ Russia 2019. Quel est le jour √† venir pour nous?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>