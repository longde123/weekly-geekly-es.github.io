<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📣 🕕 👂🏽 Temps de premier octet: qu'est-ce que c'est et pourquoi est-il important 🐵 👇🏾 🏥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Maintenant, je travaille sur un projet pour un client. Il s'agit d'un site de commerce électronique, donc je suis très intéressé par certains aspects ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Temps de premier octet: qu'est-ce que c'est et pourquoi est-il important</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/470868/">  Maintenant, je travaille sur un projet pour un client.  Il s'agit d'un site de commerce électronique, donc je suis très intéressé par certains aspects des performances.  Pour commencer, ce sont divers indicateurs qui caractérisent le temps de chargement d'un site.  Ensuite - c'est l'heure de début du rendu de la page, ce qui est important pour les visiteurs qui, après être entrés sur le site, veulent voir son contenu le plus rapidement possible (naturellement, tous les visiteurs du site entrent dans cette catégorie).  Parmi les indicateurs de performance qui m’intéressent, il y a ceux qui reflètent les spécificités des activités de mon client.  Par exemple: "À quelle vitesse l'image principale du produit se charge-t-elle?"  Une analyse de tous ces indicateurs peut fournir des informations précieuses sur l'état du projet. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/tq/4b/8i/tq4b8ifmpqelzhiw5uzboghocp8.jpeg"></a> <br><br>  Cependant, il existe un indicateur qui, comme il semble, les développeurs frontaux n'accordent souvent pas assez d'attention.  Il est temps de passer au premier octet (Time to First Byte, TTFB).  Vous pouvez comprendre cela, vous pouvez et au moins partiellement pardonner aux développeurs cette attitude envers TTFB, surtout compte tenu du fait qu'ils voient cet indicateur comme quelque chose qui ne dépend que du backend des projets.  Mais si nous essayons d'exprimer littéralement brièvement le problème concernant cet indicateur, nous pouvons dire ce qui suit: "Bien qu'une bonne valeur TTFB ne signifie pas nécessairement que le site Web le démontrant peut être considéré comme rapide, un mauvais indicateur TTFB indique presque certainement des problèmes avec les performances du projet." <br><a name="habracut"></a><br>  Même si nous prenons en compte le fait que le développeur front-end peut être dans une position dans laquelle il n'est pas en mesure d'influencer indépendamment le backend et le TTFB, il est important de prendre en compte le fait que des valeurs TTFB élevées peuvent affecter de manière significative les performances du site.  En conséquence, les efforts d'un développeur front-end cherchant à accélérer la vitesse du site Web ressembleront à un jeu de rattrapage.  Cela s'applique, par exemple, à l'optimisation d'image, à la minimisation du volume de matériaux qui composent les sections les plus importantes du projet et au téléchargement asynchrone des polices Web.  Cela ne veut pas dire que, sachant cela, vous pouvez abandonner et abandonner les optimisations frontales.  Mais si le TTFB est trop élevé, toutes ces optimisations rappellent d'essayer de résoudre un problème dans des conditions où il a déjà fait du mal et quand il est trop tard pour résoudre ce problème.  En fait, c'est pourquoi il est très important pour ceux qui développent le front-end de suivre de près l'indicateur TTFB, et il est très important, lorsque ses valeurs sont trop élevées, de prendre des mesures pour l'améliorer. <br><br><h2>  <font color="#3AC1EF">Qu'est-ce que le TTFB?</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/620/d0b/fe1/620d0bfe1034ff0d0c565f459ad2aa79.png"></div><br>  <i><font color="#999999">TTFB ne semble pas très informatif ( <a href="">image en taille réelle</a> )</font></i> <br><br>  TTFB est un indicateur qui semble, pour le dire légèrement, opaque.  Il est tellement influencé par lui que j'ai le sentiment que nous sommes tout le temps en train de brosser son analyse sérieuse.  Beaucoup pensent que le TTFB n'est que le temps qu'il faut au serveur pour préparer une réponse, mais ce n'est, en fait, qu'une petite partie de ce qui affecte le TTFB. <br><br>  La première chose sur laquelle j'aimerais attirer votre attention, c'est qu'en apprenant ce que les gens sont généralement très surpris.  Nous parlons du fait que TTFB inclut le temps que la demande du client passe sur le réseau vers le serveur, et le temps qu'il prend le chemin de réponse du serveur au client.  C'est ce que l'on appelle le «temps aller-retour» (Round Trip Time, RTT).  TTFB n'est pas seulement un certain temps passé par le serveur à préparer une réponse.  C'est aussi le temps consacré à la manière dont les données vont de client en serveur et de serveur en client (ces données contiennent bien entendu le «premier octet» qui nous intéresse). <br><br>  Maintenant, armé de ces connaissances, nous pouvons facilement comprendre la raison pour laquelle lors de la visualisation de sites à partir d'appareils mobiles, l'indicateur TTFB est souvent simplement indécent.  Il est fort possible que plus tôt dans de telles situations, vous ayez posé la question suivante: «Je suis sûr que le serveur ne sait pas que je consulte le site à partir d'un mobile.  Comment alors augmente-t-il le TTFB?  La raison en est que, en règle générale, les connexions de réseau mobile sont des connexions à latence élevée.  Si l'indicateur RTT, qui reflète le temps nécessaire pour que les données passent du téléphone au serveur et vice-versa, est, par exemple, de 250 ms, le TTFB augmentera de la valeur correspondante. <br><br>  Si je souhaite que les lecteurs de ce document n'en retirent qu'une seule idée majeure, je formulerais cette idée comme suit: «Les retards du réseau affectent le TTFB». <br><br>  Qu'est-ce qui affecte le TTFB?  En fait - beaucoup de tout.  Voici une liste loin d'être complète de ce qui contribue à la formation de cet indicateur.  Les éléments de cette liste sont dans un ordre aléatoire. <br><br><ul><li>  <b>Retards du réseau.</b>  Comme déjà mentionné, TTFB inclut le temps nécessaire pour envoyer une demande au serveur et renvoyer une réponse du serveur.  Prenons, par exemple, le temps requis pour une session d'échange de données entre un appareil situé à Londres et un serveur situé à New York.  Idéalement, lorsque vous utilisez une connexion à fibre optique, c'est 28 ms.  Mais cela est basé sur de nombreuses hypothèses très optimistes.  En réalité, vous devriez vous attendre à quelque chose comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">75 ms</a> .  C'est pourquoi il est si important d'utiliser CDN.  Aujourd'hui encore, à l'ère d'Internet, la proximité géographique d'une certaine entreprise et de ses clients est un atout. </li><li>  <b>Acheminement</b>  Si vous utilisez CDN (et il devrait en être ainsi!), Alors la demande de votre client, par exemple, de Leeds, peut être redirigée vers le centre de données MAN uniquement afin qu'en conséquence, il s'avère que la ressource dont le client a besoin ne se trouve pas dans le cache <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PoP</a> correspondant .  Ensuite, la demande sera redirigée vers le vrai serveur avec vos documents afin de transmettre néanmoins au client ce dont il a besoin.  Si ce serveur est situé, par exemple, en Virginie, tout ce qui précède entraînera une augmentation sérieuse du TTFB sans raison apparente. </li><li>  <b>Travaillez avec des fichiers.</b>  Même si le serveur lit simplement les données statiques de son système de fichiers, telles que des images ou des fichiers de style, cette opération prend un certain temps.  Cette fois fait également partie du TTFB. </li><li>  <b>Priorisation</b>  Le protocole HTTP / 2 dispose de mécanismes pour hiérarchiser le traitement des demandes.  En conséquence, il peut s'avérer que les demandes de faible priorité peuvent être retardées sur le serveur, laissant la place à des demandes de haute priorité.  Même si vous ne tenez pas compte des mécanismes de priorisation HTTP / 2 et supposez que tout fonctionne correctement, ces retards attendus peuvent contribuer au TTFB. </li><li>  <b>Exécution d'applications.</b>  En fait, cela est assez évident, mais je voudrais noter que le temps requis pour exécuter les applications serveur affecte sérieusement TTFB. </li><li>  <b>Requêtes de base de données.</b>  Si vous devez demander quelque chose à la base de données pour former la page, le temps pour terminer une telle opération sera également inclus dans TTFB. </li><li>  <b>Appels API</b>  Si des données de certaines API (internes ou externes) sont nécessaires pour préparer la page, les appels à ces API affecteront TTFB. </li><li>  <b>Rendu du serveur</b>  Il est bien évident que le rendu côté serveur prend du temps, ce temps est facile à évaluer, mais cela n'annule pas la contribution de cette opération au TTFB. </li><li>  <b>Hébergement pas cher.</b>  Si vous utilisez un hébergement bon marché, en essayant d'économiser autant que possible et en sacrifiant les performances, cela signifie généralement qu'un certain nombre d'autres projets utilisent le serveur sur lequel se trouve votre projet.  Peut-être un montant considérable.  Par conséquent, une personne qui utilise un hébergement bon marché peut s'attendre à une baisse des performances du serveur, ce qui peut affecter la capacité du projet à traiter les demandes.  En fait, nous parlons du fait que la puissance du matériel serveur n'est pas suffisante pour satisfaire les besoins de l'application. </li><li>  <b>Attaques DDoS, charge élevée sur le projet.</b>  Nous continuons ici le sujet discuté dans le paragraphe précédent de cette liste.  À savoir, si la charge sur le serveur augmente et que le projet ne prévoit pas une mise à l'échelle flexible des capacités du serveur, cela conduit au fait que l'équipement commence à fonctionner à la limite.  Et, par conséquent, les performances des applications diminuent. </li><li>  <b>WAF, équilibreurs de charge.</b>  Les services, tels que le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WAF</a> ou les équilibreurs de charge situés devant l'application serveur, augmentent le TTFB. </li><li>  <b>Certaines fonctionnalités de CDN.</b>  L'utilisation de CDN est un facteur qui a certainement un effet bénéfique sur le TTFB, mais certaines fonctionnalités des CDN peuvent aggraver la situation.  Par exemple, il s'agit du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pliage de demande</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ESI</a> , etc. </li><li>  <b>Retards au «dernier kilomètre».</b>  Lorsque nous parlons d'un ordinateur londonien qui accède à un serveur situé à New York, nous simplifions généralement la situation, la réduisant presque au fait que l'ordinateur et le serveur sont connectés directement l'un à l'autre.  Mais en réalité, tout est beaucoup plus compliqué.  Le signal entre l'ordinateur et le serveur passe par de nombreux intermédiaires.  Notre routeur l'envoie au fournisseur;  à partir d'un réseau sans fil, il pénètre dans un câble posé au fond de l'océan ... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les retards sur le "dernier kilomètre"</a> incluent toutes les difficultés qui entravent le transfert de données entre les terminaux. </li></ul><br>  Un TTFB de 0 ms est un rêve de pipe.  Par conséquent, il est important de noter qu'il n'y a rien dans la liste qui affecte toujours négativement le TTFB ou aggrave toujours cet indicateur.  Cette liste est mieux comprise comme une description de la structure TTFB d'un projet.  Mon objectif n'est pas de critiquer certaines technologies, mais de montrer comment certaines technologies peuvent influencer le TTFB.  Et, pour être honnête, étant donné combien de choses se produisent avant que le client ne reçoive le premier octet de la réponse du serveur, il est déjà surprenant que les sites se chargent généralement. <br><br><h2>  <font color="#3AC1EF">Découvrir le mystère avec TTFB</font> </h2><br>  Maintenant, espérons-le, TTFB ne semble plus aussi mystérieux.  Et si vous passez un peu de temps sur l'implémentation de l'API <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Server Timing</a> , vous pouvez commencer à mesurer les indicateurs de temps de serveur difficiles et à les envoyer aux systèmes clients.  Cela permettra aux développeurs Web de détecter et d'éliminer les goulots d'étranglement potentiels qui étaient auparavant cachés à leurs yeux. <br><br>  L'API de synchronisation de serveur permet aux développeurs d'étendre les réponses aux requêtes avec l'en <code>Server-Timing</code> tête HTTP de <code>Server-Timing</code> facultatif.  Il contient des informations temporelles mesurées par l'application elle-même. <br><br>  C'est ce mécanisme que nous avons utilisé l'année dernière lorsque nous travaillions sur le BBC iPlayer. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/573/4b1/63e/5734b163e8c49e7bd6729537f37a2866.png"></div><br>  <i><font color="#999999">Un nouvel en-tête de synchronisation du serveur peut être ajouté à n'importe quelle réponse ( <a href="">image en taille réelle</a></font></i> ) <br><br>  Notez que la synchronisation du serveur met également l'accent sur le système.  Au cours de son travail, vous devez mesurer les indicateurs pertinents et remplir l'en <code>Server-Timing</code> tête <code>Server-Timing</code> .  Le navigateur permet uniquement au développeur frontal de visualiser ces données à l'aide des outils appropriés. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/503/a38/b0c/503a38b0cb82096726135107e593fb25.png"></div><br>  <i><font color="#999999">Maintenant, directement dans le navigateur, vous pouvez voir la structure TTFB ( <a href="">image en taille réelle</a> )</font></i> <br><br>  Si vous souhaitez implémenter l'API Server Timing, jetez un œil à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce matériel</a> . <br><br><h2>  <font color="#3AC1EF">Résumé</font> </h2><br>  Il est très important que les développeurs Web comprennent dans quelle mesure le TTFB affecte ce qu'ils appellent les «performances du site».  Le temps du premier octet est une certaine frontière, après le franchissement, dont on peut parler d'optimisation de site Web.  Plus cet indicateur est bas, mieux c'est. <br><br>  <b>Chers lecteurs!</b>  Optimisez-vous vos projets web avec TTFB? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/it/t5/3p/itt53pns2iucwylb3bwn1fmmtnu.png"></a> </div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr470868/">https://habr.com/ru/post/fr470868/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr470844/index.html">Le nouveau projet des frères Durov: Telegram Open Network</a></li>
<li><a href="../fr470852/index.html">Traitement de 40 To de code à partir de 10 millions de projets sur un serveur dédié avec Go pour 100 $</a></li>
<li><a href="../fr470856/index.html">Telegram GRAM Wallet: conditions d'utilisation</a></li>
<li><a href="../fr470858/index.html">Antiquités: référence du 386e processeur et des années 90 fringantes</a></li>
<li><a href="../fr470864/index.html">À propos des plaisirs de passer au panneau et pas seulement</a></li>
<li><a href="../fr470870/index.html">Préchargement des polices</a></li>
<li><a href="../fr470872/index.html">Mesures de performances pour la recherche d'applications Web incroyablement rapides</a></li>
<li><a href="../fr470874/index.html">Optimiser le chargement de JavaScript sur Wikipedia</a></li>
<li><a href="../fr470876/index.html">Créez des constructions de syntaxe JavaScript personnalisées à l'aide de Babel. Partie 1</a></li>
<li><a href="../fr470878/index.html">Créez des constructions de syntaxe JavaScript personnalisées à l'aide de Babel. 2e partie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>