<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦈 🕕 💟 Verantwortliche JavaScript-Entwicklung Teil 2 🐙 ✋🏾 ♊️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im April dieses Jahres haben wir eine Übersetzung des ersten Materials aus einer Reihe veröffentlicht, die sich einem verantwortungsvollen Ansatz bei ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Verantwortliche JavaScript-Entwicklung Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/460797/">  Im April dieses Jahres haben wir eine Übersetzung des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ersten Materials</a> aus einer Reihe veröffentlicht, die sich einem verantwortungsvollen Ansatz bei der JavaScript-Entwicklung widmet.  Dort reflektierte der Autor moderne Webtechnologien und deren rationellen Einsatz.  Jetzt bieten wir Ihnen eine Übersetzung des zweiten Artikels aus dieser Reihe an.  Es widmet sich einigen technischen Details zur Gestaltung von Webprojekten. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/fu/0j/zo/fu0jzokbsmkz97fxen8dedmtg9e.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Habe eine Idee</font> </h2><br>  Sie und Ihr Team haben begeistert die Idee einer vollständigen Überarbeitung der alternden Website des Unternehmens beworben.  Ihre Anfragen erreichten die Führung, kamen sogar in die Sicht derjenigen ganz oben.  Sie erhielten grünes Licht.  Ihr Team machte sich begeistert an die Arbeit und zog Designer, Texter und andere Spezialisten an.  Bald haben Sie einen neuen Code eingeführt. <br><br>  Die Arbeit daran begann unschuldig.  Der Befehl <code>npm install</code> ist hier, der Befehl <code>npm install</code> ist da.  Sobald Sie sich umgesehen haben, wurden bereits Produktionsabhängigkeiten hergestellt, als wäre die Projektentwicklung ein wilder Alkohol, und Sie waren derjenige, dem es überhaupt egal war, was morgen früh sein würde. <br><br>  Dann hast du angefangen. <br><br>  Aber im Gegensatz zu den Folgen der verrücktesten Trinkparty begann das Schreckliche nicht am nächsten Morgen.  Leider nicht am nächsten Morgen.  Die Abrechnung erfolgte in Monaten.  Sie nahm die unangenehme Form von leichter Übelkeit und Kopfschmerzen für Firmeninhaber und mittlere Manager an, die sich fragten, warum nach dem Start der neuen Website die Conversions und Einnahmen zurückgingen.  Dann gewann die Katastrophe an Fahrt.  Dies geschah, als der technische Direktor vom Wochenende zurückkam, das er irgendwo außerhalb der Stadt verbrachte.  Er fragte sich, warum die Website des Unternehmens so langsam (wenn überhaupt) auf sein Handy geladen wurde. <br><br>  Früher war es gut für alle.  Jetzt sind andere dunkle Zeiten gekommen.  Treffen Sie Ihren ersten Kater, nachdem Sie eine große Dosis JavaScript konsumiert haben. <br><br><h2>  <font color="#3AC1EF">Das ist nicht deine Schuld.</font> </h2><br>  Während Sie versuchten, mit einem höllischen Kater fertig zu werden, klangen Worte wie „Ich habe es Ihnen gesagt“ für Sie wie ein wohlverdienter Verweis.  Und wenn Sie zu diesem Zeitpunkt kämpfen könnten, könnten sie als Anlass für einen Kampf dienen. <br><br>  Wenn es um die Folgen des rücksichtslosen Einsatzes von JavaScript geht, können Sie alles und jeden beschuldigen.  Aber die Schuldigen zu suchen ist Zeitverschwendung.  Das moderne Webgerät selbst erfordert, dass Unternehmen Probleme schneller lösen als ihre Konkurrenten.  Ein solcher Druck bedeutet, dass wir, um unsere Produktivität so weit wie möglich zu steigern, wahrscheinlich alles ergreifen werden.  Dies bedeutet, dass wir mit hoher Wahrscheinlichkeit (obwohl dies nicht als unvermeidlich bezeichnet werden kann) Anwendungen erstellen, in denen es viele Exzesse geben wird, und höchstwahrscheinlich Muster verwenden werden, die die Leistung und Verfügbarkeit von Anwendungen beeinträchtigen. <br><br>  Webentwicklung ist keine leichte Aufgabe.  Das ist ein langer Job.  Es wird selten beim ersten Versuch gut ausgeführt.  Das Beste an dieser Arbeit ist jedoch, dass wir nicht gleich zu Beginn alles perfekt machen müssen.  Wir können Projekte nach dem Start verbessern, und tatsächlich ist dieses Material diesem Thema gewidmet, dem zweiten in einer Reihe von Artikeln über einen verantwortungsvollen Ansatz bei der JS-Entwicklung.  Perfektion ist ein sehr weit entferntes Ziel.  In der Zwischenzeit wollen wir uns mit dem JavaScript-Kater befassen, indem wir sozusagen die Skripterstellung verbessern <br>  auf der Website in naher Zukunft. <br><br><h2>  <font color="#3AC1EF">Wir beschäftigen uns mit allgemeinen Problemen</font> </h2><br>  Dies mag wie ein mechanischer Ansatz zur Lösung von Problemen erscheinen, aber gehen Sie zuerst eine Liste typischer Probleme und Möglichkeiten durch, um mit ihnen umzugehen.  In großen Entwicklungsteams werden diese Dinge oft vergessen.  Dies gilt insbesondere für Teams, die mit mehreren Repositorys arbeiten oder für ihre Projekte keine optimierte Vorlage verwenden. <br><br><h3>  <font color="#3AC1EF">▍ Wenden Sie den Baumschüttelalgorithmus an</font> </h3><br>  Überprüfen Sie zunächst, ob Ihre Tools für die Implementierung des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tree-Shaking-</a> Algorithmus konfiguriert sind.  Wenn Sie dieses Konzept noch nicht kennengelernt haben, schauen Sie sich dieses Material von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mir an</a> , das ich letztes Jahr geschrieben habe.  Wenn wir die Funktionsweise dieses Algorithmus auf den Punkt bringen, können wir sagen, dass aufgrund seiner Verwendung in den Produktionsbaugruppen der Anwendung nicht die Pakete enthalten sind, die zwar in das Projekt importiert, aber nicht darin verwendet werden. <br><br>  Die Implementierung des Tree-Shaking-Algorithmus ist eine Standardfunktion moderner Bundler wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Webpack</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rollup</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Parcel</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Grunzen</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schlucken</a> sind Task-Manager.  Sie machen das nicht.  Der Task-Manager erstellt im Gegensatz zum Bundler kein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Abhängigkeitsdiagramm</a> .  Der Task-Manager ist mit den erforderlichen Plug-Ins beschäftigt und führt separate Manipulationen an den darauf übertragenen Dateien durch.  Die Funktionalität von Task-Managern kann mithilfe von Plugins erweitert werden, sodass sie JavaScript mithilfe von Bundlern verarbeiten können.  Wenn die Erweiterung der Funktionen des Task-Managers in diese Richtung ein Problem darstellt, müssen Sie wahrscheinlich die Codebasis manuell überprüfen und nicht verwendeten Code daraus entfernen. <br><br>  Damit der Baumschüttelalgorithmus effizient funktioniert, müssen die folgenden Bedingungen erfüllt sein: <br><br><ol><li>  Anwendungscode und installierte Pakete sollten als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ES6-Module dargestellt werden</a> .  Die Verwendung des Tree-Shaking-Algorithmus für <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CommonJS-</a> Module ist nahezu unmöglich. </li><li>  Ihr Bundler sollte ES6-Module während der Erstellung des Projekts nicht in Module eines anderen Formats umwandeln.  Wenn dies in der Toolchain geschieht, die Babel verwendet, muss <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">@ Babel / present-env</a> die folgenden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Module haben: false</a> .  Dies führt dazu, dass der ES6-Code nicht in Code konvertiert wird, der CommonJS verwendet. </li></ol><br>  Wenn beim Erstellen Ihres Projekts plötzlich der Baumschüttelalgorithmus nicht angewendet wird, kann die Einbeziehung dieses Mechanismus die Situation verbessern.  Natürlich variiert die Wirksamkeit dieses Algorithmus von Projekt zu Projekt.  Darüber hinaus hängt die Möglichkeit seiner Verwendung davon ab, ob die importierten Module <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nebenwirkungen haben</a> .  Dies kann die Fähigkeit des Bündlers beeinträchtigen, die Aufnahme unnötiger importierter Module in die Baugruppe zu vermeiden. <br><br><h3>  <font color="#3AC1EF">▍ Teilen Sie den Code in Teile</font> </h3><br>  Es ist sehr wahrscheinlich, dass Sie bereits eine Form der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Codetrennung verwenden</a> .  Sie sollten jedoch überprüfen, wie dies gemacht wird.  Unabhängig davon, wie Sie den Code trennen, möchte ich Ihnen anbieten, sich die folgenden zwei sehr wertvollen Fragen zu stellen: <br><br><ol><li>  Entfernen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">doppelten Code</a> von den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Eingabepunkten</a> ? </li><li>  Laden Sie träge alles, was auf diese Weise mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dynamischen Importen</a> geladen werden kann? </li></ol><br>  Diese Probleme sind wichtig, da die Reduzierung der Menge an redundantem Code ein entscheidendes Leistungselement ist.  Das verzögerte Laden des Codes verbessert auch die Leistung, indem die Menge an JavaScript-Code reduziert wird, der Teil der Seite ist und beim Laden geladen wird.  Wenn wir über die Analyse des Projekts auf das Vorhandensein von redundantem Code sprechen, können Sie hierfür ein Tool wie den Bundle Buddy verwenden.  Wenn Ihr Projekt ein Problem damit hat, werden Sie über dieses Tool informiert. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37f/e95/0f3/37fe950f3567d6e53c77969632713df8.png"></div><br>  <i><font color="#999999">Das Bundle Buddy-Tool kann Informationen zur Webpack-Kompilierung überprüfen und herausfinden, wie viel des gleichen Codes in Ihren Bundles verwendet wird</font></i> <br><br>  Wenn wir über das verzögerte Laden von Materialien sprechen, kann es schwierig sein, herauszufinden, wo nach Möglichkeiten gesucht werden kann, diese Optimierung anzuwenden.  Wenn ich in einem vorhandenen Projekt nach der Möglichkeit suche, das verzögerte Laden zu verwenden, suche ich in der Codebasis nach Stellen, an denen Benutzerinteraktionen mit dem Code stattfinden.  Dies können beispielsweise Maus- oder Tastaturereignishandler sowie ähnliche Dinge sein.  Jeder Code, für dessen Ausführung eine Benutzeraktion erforderlich ist, ist ein guter Kandidat für die Anwendung des Befehls dynamic <code>import()</code> . <br><br>  Das Laden von Skripten bei Bedarf birgt natürlich das Risiko spürbarer Verzögerungen beim Wechsel des Systems in den interaktiven Modus.  Bevor das Programm interaktiv mit dem Benutzer interagieren kann, müssen Sie das entsprechende Skript herunterladen.  Wenn Sie die übertragene Datenmenge nicht stört, sollten Sie den Ressourcenhinweis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">rel = prefetch verwenden</a> , um solche Skripte mit niedriger Priorität zu laden.  Solche Ressourcen konkurrieren nicht um Bandbreite mit kritischen Ressourcen.  Wenn der Browser des Benutzers <code>rel=prefetch</code> , ist die Verwendung dieses Tooltips nur von Vorteil.  Wenn nicht, passiert nichts Schlimmes, da Browser Markups, die sie nicht verstehen, einfach ignorieren. <br><br><h3>  <font color="#3AC1EF">▍Verwenden Sie die Option "Webpack externals", um Ressourcen auf fremden Servern zu markieren</font> </h3><br>  Idealerweise sollten Sie so viele Abhängigkeiten Ihrer Site wie möglich auf Ihren eigenen Servern hosten.  Wenn Sie aus irgendeinem Grund ohne Optionen Abhängigkeiten von den Servern anderer Personen herunterladen müssen, fügen Sie diese in den Webpack-Einstellungen in den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">externen</a> Block ein.  Wenn dies nicht erfolgt, kann dies bedeuten, dass Besucher Ihrer Website sowohl den von Ihnen gehosteten Code als auch denselben Code von den Servern anderer Personen herunterladen. <br><br>  Sehen Sie sich eine hypothetische Situation an, in der so etwas Ihrer Ressource schaden könnte.  Angenommen, Ihre Site lädt die Lodash-Bibliothek von einer öffentlichen CDN-Ressource herunter.  Sie haben Lodash auch für lokale Entwicklungszwecke im Projekt installiert.  Wenn Sie jedoch in den Webpack-Einstellungen nicht angeben, dass Lodash eine externe Abhängigkeit ist, lädt Ihr Produktionscode die Bibliothek aus dem CDN, wird jedoch gleichzeitig in das auf Ihrem Server gehostete Bundle aufgenommen. <br><br>  Wenn Sie mit Bündlern gut vertraut sind, scheint Ihnen dies alles alltägliche Wahrheiten zu sein.  Aber ich habe gesehen, wie diese Dinge nicht aufpassen.  Nehmen Sie sich daher nicht die Zeit, Ihr Projekt auf die oben genannten Probleme zu überprüfen. <br><br>  Wenn Sie es nicht für erforderlich halten, Ihre von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Drittentwicklern</a> erstellten Abhängigkeiten selbst zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hosten</a> , sollten Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DNS</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">-Prefetch-</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Preconnect-</a> oder vielleicht sogar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Preload-</a> Hinweise verwenden.  Dies kann den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TTI-</a> Wert (Time To Interactive, Site Time to First Interactive) verringern.  Wenn JavaScript-Funktionen erforderlich sind, um den Inhalt der Website anzuzeigen, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wird auch</a> der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Geschwindigkeitsindex</a> der Website benötigt. <br><br><h2>  <font color="#3AC1EF">Kleinere alternative Bibliotheken und reduzierter Overhead auf Benutzersystemen</font> </h2><br>  Was als " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Userland JavaScript</a> " (vom Benutzer entwickelte JS-Bibliotheken) bezeichnet wird, scheint ein obszöner riesiger Süßwarenladen zu sein.  All diese Open-Source-Pracht und Vielfalt inspiriert uns Entwickler mit Ehrfurcht.  Mit Frameworks und Bibliotheken können wir unsere Anwendungen erweitern und sie schnell mit Funktionen ausstatten, die zur Lösung einer Vielzahl von Problemen beitragen.  Wenn wir die gleiche Funktionalität selbst implementieren müssten, würde dies viel Zeit und Energie kosten. <br><br>  Obwohl ich persönlich eine aggressive Minimierung der Verwendung von Client-Frameworks und -Bibliotheken in meinen Projekten befürworte, kann ich deren enormen Wert und Nutzen nur erkennen.  Trotzdem sollten wir bei der Installation neuer Abhängigkeiten im Projekt jede einzelne mit einem gewissen Misstrauen behandeln.  Wenn wir bereits etwas erstellt und gestartet haben, dessen Betrieb von vielen installierten Abhängigkeiten abhängt, bedeutet dies, dass wir die zusätzliche Belastung des Systems in Kauf nehmen, die durch all dies entsteht.  Es ist wahrscheinlich, dass nur Paketentwickler dieses Problem lösen können, indem sie ihre Entwicklung optimieren.  Ist es so? <br><br>  Vielleicht ist das so, aber vielleicht auch nicht.  Dies hängt von den verwendeten Abhängigkeiten ab.  Zum Beispiel ist React eine äußerst beliebte Bibliothek.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Preact</a> ist jedoch eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sehr kleine</a> Alternative zu React, die dem Entwickler fast die gleichen APIs bietet und mit vielen React-Add-Ons kompatibel bleibt.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Luxon</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">date-fns</a> sind Alternativen zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">moment.js</a> , viel kompakter als diese Bibliothek, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">nicht so klein ist</a> . <br><br>  In Bibliotheken wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lodash</a> finden Sie viele nützliche Methoden.  Einige von ihnen lassen sich jedoch leicht durch Standard-ES6-Methoden ersetzen.  Beispielsweise kann die Lodash- <a href="">Kompaktmethode</a> durch die Standardmethode für <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Filterarrays ersetzt</a> werden.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Viele</a> andere Lodash-Methoden können auch sicher durch Standardmethoden ersetzt werden.  Der Vorteil dieses Ersatzes besteht darin, dass wir die gleichen Funktionen wie bei der Verwendung der Bibliothek erhalten, jedoch eine ziemlich große Abhängigkeit beseitigen. <br><br>  Was auch immer Sie verwenden, die allgemeine Idee bleibt dieselbe: Fragen Sie, ob Ihre Wahl kompaktere Alternativen bietet.  Finden Sie heraus, ob Sie dieselben Probleme mit Standard-Sprachwerkzeugen lösen können.  Vielleicht werden Sie angenehm überrascht sein, wie wenig Sie unternehmen müssen, um die Größe der Anwendung und die unnötige Last, die sie auf Benutzersysteme ausübt, ernsthaft zu reduzieren. <br><br><h2>  <font color="#3AC1EF">Verwenden Sie Technologien zum unterschiedlichen Laden von Skripten</font> </h2><br>  Wahrscheinlich befindet sich Babel in Ihrer Toolchain.  Dieses Tool wird verwendet, um ES6-kompatiblen Quellcode in Code umzuwandeln, den ältere Browser ausführen können.  Bedeutet dies, dass wir dazu verdammt sind, selbst Browsern, die sie nicht benötigen, riesige Bündel zu geben, bis alle alten Browser einfach verschwinden?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Natürlich nicht</a> !  Das unterschiedliche Laden von Ressourcen hilft, dieses Problem zu umgehen, indem zwei verschiedene Assemblys basierend auf ES6-Code erstellt werden: <br><br><ul><li>  Die erste Assembly enthält alle Codekonvertierungen und Polyfills, die erforderlich sind, damit Ihre Site in älteren Browsern funktioniert.  Wahrscheinlich geben Sie Ihren Kunden jetzt diese spezielle Baugruppe. </li><li>  Die zweite Assembly enthält entweder ein Minimum an Code- und Polyfill-Konvertierungen oder verzichtet überhaupt darauf.  Es ist für moderne Browser konzipiert.  Dies ist eine Baugruppe, die Sie möglicherweise nicht haben.  Zumindest noch nicht. </li></ul><br>  Um die Technologie der Differenzialbelastung von Baugruppen nutzen zu können, müssen Sie ein wenig arbeiten.  Ich werde hier nicht auf Details eingehen. Ich werde einen besseren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> zu meinem Material geben, in dem eine der Möglichkeiten zur Implementierung dieser Technologie erläutert wird.  Das Wesentliche dabei ist, dass Sie Ihre Build-Konfiguration so ändern können, dass während des Builds des Projekts eine zusätzliche Version des JS-Bundles Ihrer Site erstellt wird.  Dieses zusätzliche Paket ist kleiner als das Hauptpaket.  Es ist nur für moderne Browser gedacht.  Das Beste daran ist, dass Sie mit diesem Ansatz die Größe des Bundles optimieren und gleichzeitig absolut nichts von den Fähigkeiten des Projekts opfern können.  Abhängig vom Anwendungscode kann das Einsparen der Bundle-Größe erheblich sein. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/58a/fa7/803/58afa780391bbe685486a4a55f99b76b.jpg"></div><br>  <i><font color="#999999">Analyse von Bundles für ältere Browser (links) und Bundles für neue Browser (rechts).</font></i>  <i><font color="#999999">Die Bundle-Studie wurde mit dem Webpack-Bundle-Analyzer durchgeführt.</font></i>  <i><font color="#999999"><a href="">Hier ist die</a> Vollversion dieses Bildes.</font></i> <br><br>  Mit dem folgenden Trick ist es am einfachsten, verschiedenen Browsern unterschiedliche Bundles zuzuweisen.  Es funktioniert gut in modernen Browsern: <br><br><pre> <code class="javascript hljs">&lt;!--     : --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/js/app.mjs"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;!--     : --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">defer</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">nomodule</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/js/app.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Leider hat dieser Ansatz Nachteile.  Veraltete Browser wie IE11 und sogar relativ moderne wie die Edge-Versionen 15-18 laden beide Bundles.  Wenn Sie bereit sind, es zu ertragen - dann verwenden Sie diese Technik und machen Sie sich um nichts Sorgen. <br><br>  Auf der anderen Seite müssen Sie sich etwas einfallen lassen, falls Sie sich Sorgen über die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Auswirkungen</a> der Tatsache auf die Leistung Ihrer Anwendung machen, dass ältere Browser beide Bundles herunterladen müssen.  Hier ist eine mögliche Lösung für dieses Problem, bei der die Skriptinjektion verwendet wird (anstelle des oben verwendeten <code>&lt;script&gt;</code> -Tags).  Es vermeidet das doppelte Laden von Bundles durch geeignete Browser.  Hier ist, worüber wir sprechen: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scriptEl = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">"script"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"noModule"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> scriptEl) {  <span class="hljs-comment"><span class="hljs-comment">//     scriptEl.src = "/js/app.mjs";  scriptEl.type = "module"; } else {  //     scriptEl.src = "/js/app.js";  scriptEl.defer = true; // type="module"   ,    . } //  ! document.body.appendChild(scriptEl);</span></span></code> </pre> <br>  Dieses Skript geht davon aus, dass der Browser das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Konstrukt</a> <code>type="module"</code> versteht, wenn er das Attribut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">nomodule</a> im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Skriptelement</a> unterstützt.  Dies stellt sicher, dass ältere Browser nur für sie entworfene Skripte erhalten und moderne Browser für sie entworfene Skripte.  Beachten Sie jedoch, dass dynamisch eingebettete Skripte standardmäßig asynchron geladen werden.  Wenn die Reihenfolge des Ladens von Abhängigkeiten für Sie wichtig ist, setzen Sie das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">asynchrone</a> Attribut daher auf <code>false</code> . <br><br><h2>  <font color="#3AC1EF">Weniger vermitteln</font> </h2><br>  Ich werde Babel hier nicht angreifen.  Dieses Tool ist in der modernen Webentwicklung notwendig, aber es ist eine sehr eigensinnige Einheit.  Babel fügt dem generierten Code eine Menge Dinge hinzu, von denen der Entwickler möglicherweise nichts weiß.  Daher werden Sie es nicht bereuen, wenn Sie in die Eingeweide von Babel schauen und genau herausfinden, was er tut.  Insbesondere die Kenntnis der internen Mechanismen von Babel macht deutlich, dass kleine Änderungen in der Art und Weise, wie jemand Code schreibt, sich positiv auf das auswirken können, was Babel generiert. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ff/159/898/6ff159898be42a49a07d2990071d1b37.png"></div><br>  <i><font color="#999999"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Weniger vermitteln</a></font></i> <br><br>  Das ist es, worüber wir sprechen.  Beispielsweise sind <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Standardoptionen</a> eine sehr praktische Funktion von ES6, die Sie möglicherweise bereits verwenden: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message, level = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"log"</span></span></span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>[level](message); }</code> </pre> <br>  Hier lohnt es sich, auf den Parameter <code>level</code> zu achten, dessen Standardwert das Zeichenfolgenprotokoll ist.  Dies bedeutet, dass wir, wenn wir <code>console.log</code> mit der <code>logger</code> Wrapper-Funktion aufrufen <code>console.log</code> , keine <code>level</code> an diese Funktion übergeben müssen.  Praktisch, richtig?  All dies ist gut - außer dem Code, den Babel bei der Transformation dieser Funktion erhält: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message</span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> level = <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>.length &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>] !== <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> ? <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>] : <span class="hljs-string"><span class="hljs-string">"log"</span></span>;  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>[level](message); }</code> </pre> <br>  Dies ist ein Beispiel dafür, wie trotz der Tatsache, dass wir von guten Absichten geleitet werden, der Komfort, den Babel bietet, zu negativen Konsequenzen führen kann.  Was nur wenige Zeichen im Quellcode waren, wurde in der Produktionsversion des Programms zu einer viel längeren Konstruktion.       - ,      ,     <code>arguments</code>  . <br><br> ,    ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> ?  ,   Babel      : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   function logger(...args) {  const [level, message] = args;  console[level](message); } //   Babel function logger() {  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key &lt; _len; _key++) {    args[_key] = arguments[_key];  }  const level = args[0],        message = args[1];  console[level](message); }</span></span></code> </pre> <br>     ,  Babel         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">@babel/preset-env</a> ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> .  , ,     , ,    ,        !       —    «»   (  <code>true</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">loose</a> ).  —  ,   ,     ,     ,  ,     .   «»       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>   ,     Babel   ,    . <br><br>    ,    «»   ,         ,     Babel   : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Babel      function logger(message, level) {  console[level || "log"](message); }</span></span></code> </pre> <br> ,    —      JavaScript,       ,    .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> spread</a> ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> . <br><br>          —              : <br><br><ol><li>     —    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">@babel/runtime</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">@babel/plugin-transform-runtime</a>  ,      ,  Babel    . </li><li>        ,       .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">@babel/polyfill</a> .   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">babel</a> /preset-env <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">useBuiltins</a>   <code>usage</code> . </li></ol><br>      ,    ,   ,   ,    ,      .    ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JSX</a> ,      ,       ,       .        ,          ,          . ,   ,  .     ,     Babel       —         .       ,  Babel.  ,             . <br><br><h2> <font color="#3AC1EF">:   —   </font> </h2><br>   ,    . ,    JavaScript-,       ,     .      ,      ,       .  -       .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> .  ,           ,   ,  ,    ,   ,  ,    . <br><br>   ,  ,    ,      ,   ,    ,   ,  . - —  . ,    ,  ,            .    .   ,  ,  ,    ,    .      ,      ,   ,          . <br><br>  <b>Liebe Leser!</b>         JS-? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/rw/6v/yn/rw6vyn2bxx4usoqc39holmj2z8m.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de460797/">https://habr.com/ru/post/de460797/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de460783/index.html">Konsens über die Reputation des Knotens. Ist es notwendig</a></li>
<li><a href="../de460785/index.html">Anwendungen für E-Books auf dem Android-Betriebssystem. Teil 1. Einführung und Office-Anwendungen</a></li>
<li><a href="../de460789/index.html">Schließlich ist Verjüngung eine Sache</a></li>
<li><a href="../de460793/index.html">Strukturieren von Reaktionsanwendungen</a></li>
<li><a href="../de460795/index.html">12 Tipps zur Verbesserung der Leistung von JavaScript-Anwendungen</a></li>
<li><a href="../de460799/index.html">Standard Browser API Zahlungsanforderung</a></li>
<li><a href="../de460801/index.html">27 fantastische VS Code-Tools für moderne JavaScript-Entwickler</a></li>
<li><a href="../de460803/index.html">Lesen für den Sommer: Bücher für Technikfreaks</a></li>
<li><a href="../de460805/index.html">So übertragen Sie Daten zwischen Mikrocontrollern mit 100 Mbit / s</a></li>
<li><a href="../de460807/index.html">Messen Sie sieben Mal, sobald Sie das BI-Tool implementiert haben</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>