<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôàÔ∏è üõê ü§¥üèª Cloud priv√© pour l'Internet des objets üîπ üíÜüèΩ ü§∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salutations, Habr! 

 Nous, l'√©quipe d'architectes informatiques d'IBM, qui sommes engag√©s dans la cr√©ation et la commercialisation de solutions indus...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cloud priv√© pour l'Internet des objets</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ibm/blog/426135/"><img src="https://habrastorage.org/webt/eg/uo/mr/eguomrkrciqdlubmnmltrvoy7tg.png"><br><br>  Salutations, Habr! <br><br>  Nous, l'√©quipe d'architectes informatiques d'IBM, qui sommes engag√©s dans la cr√©ation et la commercialisation de solutions industrielles pour diverses industries.  Pendant notre temps libre, nous recherchons de nouvelles technologies, exp√©rimentons et essayons les meilleures pratiques. <br><br>  Ces derni√®res ann√©es, le th√®me de l'Internet des objets a √©t√© tr√®s populaire.  Nos clients demandent des solutions et des plates-formes de box universelles qui peuvent √™tre situ√©es localement dans leur centre de donn√©es.  Plus important encore, on s'attend √† ce que, sur la base de ces "bo√Ætes", tous les nouveaux services et applications soient d√©velopp√©s et lanc√©s tr√®s rapidement, ou plut√¥t instantan√©ment ou "hier". <br><br>  Nous nous sommes demand√©s: ¬´Et si nous montions quelque chose de similaire sur les technologies ouvertes et publiques?¬ª <br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nous</a> avons d√©j√† parl√© et montr√© beaucoup de choses sur l'utilisation des conteneurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Docker</a> et de leurs outils de gestion bas√©s sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kubernetes</a> .  Cependant, jusqu'√† pr√©sent, il n'a pas √©t√© possible de voir comment toutes ces technologies avanc√©es peuvent √™tre utilis√©es √† l'√©chelle industrielle pour des t√¢ches commerciales, en particulier dans le cadre de l'Internet des objets.  Remplissons donc cette lacune.  Le concept de microservices, ainsi que les approches de d√©veloppement √† la mode (DevOps), l'int√©gration et le d√©ploiement d'applications (CI / CD) seront consid√©r√©s comme une t√¢che l√©g√®rement diff√©rente et mis de c√¥t√© pour plus tard. <br><br>  Dans cet article, nous voulons parler de la pr√©paration et de l'installation de l'un des composants cl√©s - IBM Cloud Private (en fait, l'assemblage industriel de Docker / Kubernetes et un peu plus), qui peut agir comme un noyau d'infrastructure conditionnelle lors de la cr√©ation d'une plate-forme Internet des objets locale.  Demandez pourquoi il? <br><br>  Parce que nous avons promis des technologies ouvertes et publiques (version gratuite pour la communaut√© et support de la communaut√©): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">hub.docker.com/r/ibmcom/icp-inception</a> <br><br><h2>  Pr√©sentation d'IBM Cloud Private </h2><br>  IBM Cloud Private (ICP) est une plateforme de cloud priv√© pour le d√©ploiement et les op√©rations sur site.  ICP est un environnement int√©gr√© qui vous permet de concevoir, d√©velopper, d√©ployer et g√©rer des applications locales con√ßues avec une architecture de conteneur √† l'esprit.  La livraison ICP comprend un orchestrateur bas√© sur Kubernetes (K8s), un magasin d'images local, ainsi qu'une console de gestion et des outils de surveillance. <br><br><h3>  Qu'est-ce qu'un cloud priv√© ou priv√©? </h3><br>  Un cloud priv√© est un mod√®le de cloud computing qui s'ex√©cute exclusivement pour une organisation, g√©n√©ralement sur son territoire et ses ressources.  Un tel cloud peut √™tre g√©r√© et entretenu √† la fois par ses propres sp√©cialistes et des employ√©s tiers.  Une plate-forme similaire peut √™tre h√©berg√©e √† la fois derri√®re le pare-feu de l'entreprise et √† l'ext√©rieur.  Un cloud priv√© offre les avantages d'un cloud public, notamment un d√©ploiement et une √©volutivit√© rapides, ainsi qu'une facilit√© d'utilisation, de gestion et de flexibilit√©.  Dans le m√™me temps, la version locale offre un meilleur contr√¥le du syst√®me, une productivit√© accrue, des co√ªts pr√©visibles avec pr√©cision, des exigences de s√©curit√© accrues et des capacit√©s de gestion flexibles en fonction des besoins de l'organisation.  Un cloud priv√© vous permet de le configurer directement pour des t√¢ches m√©tier sp√©cifiques et des exigences de s√©curit√© client. <br><br>  Avant de proc√©der √† l'installation d'ICP, nous d√©finirons la terminologie: <br><br>  <b>Noeud ma√Ætre</b> <br><ul><li>  Surveille et contr√¥le le cluster K8s. </li><li>  kubectl: un outil en ligne de commande pour g√©rer un cluster. </li><li>  API REST: interface pour interagir avec les n≈ìuds de travail. </li><li>  etcd: est un magasin de cl√©s persistant et abordable, utilis√© comme stockage de sauvegarde K8 pour toutes les donn√©es du cluster. </li><li>  kube-scheduler: ce composant surveille les conteneurs (pods) nouvellement cr√©√©s qui n'ont pas de n≈ìud assign√©, et s√©lectionne un n≈ìud pour les ex√©cuter. </li><li>  Habituellement, 3 n≈ìuds principaux ou plus sont n√©cessaires pour un fonctionnement stable et assurer la tol√©rance aux pannes.  Dans notre cas, pour √©conomiser les ressources, nous installerons tous les composants ICP n√©cessaires sur un seul serveur d√©di√© (Single Node). </li></ul><br>  <b>Noeud de travail</b> <br><ul><li>  La machine qui fonctionnait dans les K8 anciennement connue sous le nom de Minion.  Ce n≈ìud peut √™tre l'un des h√¥tes qui re√ßoit des t√¢ches du n≈ìud principal et contr√¥le √©galement le processus de lancement des conteneurs sur celui-ci.  Selon les param√®tres du cluster, le n≈ìud de travail peut √™tre une machine virtuelle ou un serveur physique. </li><li>  Les composants suivants peuvent √™tre ex√©cut√©s sur chaque n≈ìud: </li><li>  kubelet: est le service principal du n≈ìud de travail.  Il surveille les conteneurs qui ont √©t√© affect√©s √† son n≈ìud (soit apirusver pour une connexion s√©curis√©e, soit via un fichier de configuration local). </li><li>  kube-proxy: affiche les services d√©finis dans l'API K8s sur chaque h√¥te, prenant en charge les r√®gles de r√©seau sur l'h√¥te et les connexions de transfert. </li><li>  docker: environnement de lancement et de gestion de conteneurs. </li><li>  supervisord: Il s'agit d'un processus de surveillance l√©ger et d'un syst√®me de contr√¥le que vous pouvez utiliser pour faire fonctionner kubelet et docker. </li><li>  fluentd: il s'agit d'un service qui permet d'assurer la journalisation au niveau du cluster. </li></ul><br>  <b>Conteneurs</b> <br><ul><li>  Une application s'ex√©cutant dans un environnement isol√©. </li><li>  L'ensemble des processus ex√©cutables et l'image lanc√©e du programme. </li></ul><br>  <b>Cocons (gousses)</b> <br><ul><li>  Un pod est un groupe d'un ou plusieurs conteneurs Docker, avec un stockage / r√©seau commun et une sp√©cification sur la fa√ßon d'ex√©cuter des conteneurs sur un n≈ìud de travail. </li><li>  Chaque pod a sa propre IP. </li><li>  Pod partage l'espace de noms PID, le r√©seau et le nom d'h√¥te. </li></ul><br>  <b>Contr√¥leur de r√©plication</b> <br><ul><li>  Fournit l'accessibilit√© et l'√©volutivit√©. </li><li>  Responsable du contr√¥le du nombre de Pods d√©ploy√©s. </li><li>  Utilise un mod√®le qui d√©crit ce que chaque pod doit contenir. </li></ul><br>  <b>Les √©tiquettes</b> <br><ul><li>  M√©tadonn√©es affect√©es aux ressources K8, par exemple: conteneurs, services. </li><li>  Paires de valeurs-cl√©s attach√©es aux objets pour identification. </li><li>  Ces param√®tres sont essentiels car ils sont bas√©s sur une demande de ressources de cluster avec des √©tiquettes sp√©cifiques. </li></ul><br>  <b>Les services</b> <br><ul><li>  Une collection de conteneurs expos√©s comme point de terminaison. </li><li>  Informations sur l'√©tat du cluster K8 et les param√®tres r√©seau, qui s'appliquent √† tous les n≈ìuds de travail. </li><li>  Avec la configuration correcte, les pods cr√©√©s par le contr√¥leur de r√©plication seront automatiquement enregistr√©s en tant que service correspondant. </li></ul><br>  <b>Informations secr√®tes (secrets)</b> <br><ul><li>  Informations confidentielles √† lire ou √† utiliser par les conteneurs. </li><li>  Des volumes sp√©ciaux du lecteur de disque sont mont√©s automatiquement afin que les conteneurs puissent lire le contenu. </li><li>  Chaque entr√©e a son propre chemin. </li></ul><br><h3>  L'architecture </h3><br>  Vous trouverez ci-dessous une architecture ICP de haut niveau qui r√©pertorie les principaux composants par n≈ìuds principaux, de travail et proxy.  Il convient de noter que dans cet article, l'accent est mis principalement sur une combinaison de conteneurs Docker et de l'environnement de gestion Kubernetes.  Ces composants open source sont essentiels et fondamentaux pour la plate-forme ICP.  N√©anmoins, pour travailler pleinement avec ICP, vous aurez √©galement besoin de conna√Ætre Helm, le gestionnaire de gestion des packages logiciels.  K8s est utilis√© pour d√©ployer et h√©berger des instances d'application int√©gr√©es aux sch√©mas Helm, qui √† leur tour font r√©f√©rence aux images Docker.  Les sch√©mas de barre contiennent des informations sur les d√©tails de votre application et les images Docker contiennent tous les packages logiciels n√©cessaires pour ex√©cuter votre application. <br><br> <a href=""><img src="https://habrastorage.org/webt/ch/hd/is/chhdisgv9bo9fu4bfdow2g1ydmu.png"></a> <br><br>  Pour une introduction d√©taill√©e √† l'architecture et aux composants de la plateforme ICP, vous pouvez utiliser le lien de documentation dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IBM Knowledge Center</a> . <br><br><h2>  La pr√©paration </h2><br>  Afin de terminer confortablement l'installation ICP en 20-30 minutes, les ressources mat√©rielles minimales et l'acc√®s Internet suivants sont requis: <br>  ‚Ä¢ Un h√¥te (physique ou virtuel) <br>  ‚Ä¢ CPU = 8 c≈ìurs (ou c≈ìurs virtuels) <br>  ‚Ä¢ RAM = 10 Go (en fait, jusqu'√† 14 Go peuvent √™tre n√©cessaires) <br>  ‚Ä¢ Disque = 40 Go (sur SSD comme toujours plus rapide) <br><blockquote>  <i><b>Remarque:</b> si vous avez un peu plus de temps libre et un peu moins de ressources mat√©rielles, vous pouvez installer ICP quelque part en 40 √† 60 minutes sur 1 c≈ìur virtuel i5 et 10 Go de RAM.</i> </blockquote><br><h2>  L'installation </h2><br><h3>  T√©l√©charger Ubuntu </h3><br>  T√©l√©chargez la <a href="">version de</a> distribution d' <a href="">Ubuntu Server 16.04.05</a> .  Effectuez une installation de syst√®me d'exploitation standard sur une machine virtuelle ou physique avec les caract√©ristiques ci-dessus. <br><br><h3>  Obtenir une adresse IP </h3><br>  Apr√®s avoir termin√© le processus d'installation du syst√®me d'exploitation, dans la ligne de commande, recherchez l'adresse IP de votre machine virtuelle √† l'aide de la commande suivante: <br><br><pre><code class="bash hljs">ifconfig</code> </pre> <br>  Vous devez √©crire / m√©moriser l'adresse IP Ethernet (inet addr), ainsi que Bcast et Mask.  Ces param√®tres seront affich√©s apr√®s l'ex√©cution de la commande correspondante: <br> <a href=""><img src="https://habrastorage.org/webt/ao/tp/gh/aotpghosoq-nglwcwwm-1fmn_pk.png"></a> <br>  <i>Figure 1. Un exemple de la commande ifconfig</i> <br><br><h3>  Connexion SSH </h3><br>  Si vous avez utilis√© la fonction ¬´Installation facile¬ª lors de la configuration de la machine virtuelle, apr√®s l'installation compl√®te d'Ubuntu Server, vous devez installer le serveur OpenSSH.  Vous pouvez le faire avec les commandes suivantes: <br><br><pre> <code class="bash hljs">apt install openssh-server sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> sshd</code> </pre> <br>  Apr√®s avoir ex√©cut√© les commandes appropri√©es, vous pourrez vous connecter √† la machine virtuelle √† l'aide de SSH.  Selon le syst√®me d'exploitation, vous pouvez utiliser diff√©rentes m√©thodes de connexion.  Pour Windows, vous pouvez utiliser l'outil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PuTTY</a> populaire; pour MacOS, vous pouvez utiliser la commande ssh dans le terminal. <br><br> <a href=""><img src="https://habrastorage.org/webt/2w/v8/st/2wv8st2har9fplst87-ouu2xn3a.png"></a> <br>  <i>Figure 2. Exemple de connexion via PuTTY pour Windows</i> <br><br>  L'√©tape suivante consiste √† d√©finir un mot de passe pour le super utilisateur (root): <br><br><pre> <code class="bash hljs">sudo -i passwd</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/tk/p5/l_/tkp5l_dnzxuaf5-bdlf5j2nllis.png"></a> <br>  <i>Figure 3. D√©finition d'un nouveau mot de passe pour l'utilisateur root</i> <br><br><h3>  Mise √† jour de l'interface r√©seau </h3><br>  Apr√®s avoir configur√© la possibilit√© de se connecter via SSH et mis √† jour le mot de passe du super-utilisateur, nous devons configurer l'interface r√©seau pour d√©terminer les param√®tres r√©seau statiques.  Cela se fait avec la commande suivante: <br><br><pre> <code class="bash hljs">nano /etc/network/interfaces</code> </pre> <br>  Nous mettons √† jour les param√®tres de l'interface r√©seau (interface r√©seau principale) en fonction des informations obtenues lors de la commande ifconfig, notre exemple ressemble √† ceci: <br><br><pre> <code class="bash hljs">auto ens33 iface ens33 inet static address 192.168.175.7 netmask 255.255.255.0 network 192.168.175.0 broadcast 192.168.175.255 gateway 192.168.175.2 dns-nameservers 192.168.175.2 8.8.8.8</code> </pre> <br><blockquote>  <i><b>Remarque: Il</b> est important de sp√©cifier correctement le serveur DNS, car l'acc√®s √† Internet est n√©cessaire pour l'installation ult√©rieure des composants ICP.</i> </blockquote><br> <a href=""><img src="https://habrastorage.org/webt/u3/cb/v7/u3cbv77no49a5vnxx5jfvb-rena.png"></a> <br>  <i>Figure 4. Configuration de l'interface r√©seau</i> <br><br>  Enregistrez le fichier mis √† jour en proc√©dant comme suit: Ctrl + X, Oui, Entr√©e. <br><br>  Pour simplifier la connexion √† une machine virtuelle avec des privil√®ges de superutilisateur (root), vous devez apporter des modifications √† la configuration du service SSH.  Pour ce faire, ex√©cutez la commande suivante: <br><br><pre> <code class="bash hljs">nano /etc/ssh/sshd_config</code> </pre> <br>  Ensuite, recherchez la ligne d'autorisation d'acc√®s et modifiez-la en cons√©quence: <br><br><pre> <code class="bash hljs">PermitRootLogin yes</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/4h/mg/9c/4hmg9clbw62w0fb_v7enmmptweo.png"></a> <br>  <i>Figure 5. Mise √† jour de la configuration SSH</i> <br><br>  Enregistrez le fichier comme √† l'√©tape pr√©c√©dente: Ctrl + X, Oui, Entr√©e. <br><br>  Apr√®s avoir effectu√© toutes les modifications, pour appliquer les nouveaux param√®tres, il est logique de red√©marrer compl√®tement la machine virtuelle ou de red√©marrer les services correspondants (r√©seau et ssh), par exemple, avec les commandes suivantes: <br><br><pre> <code class="bash hljs">shutdown -r 0</code> </pre> <br>  ou <br><br><pre> <code class="bash hljs">service &lt;service_name&gt; restart</code> </pre> <br>  Apr√®s avoir red√©marr√© la machine, vous devez vous reconnecter via SSH. <br><br><h3>  Mise √† jour des composants </h3><br>  Mettez √† jour Ubuntu Server avec la commande suivante (la commande doit √™tre ex√©cut√©e en tant que root): <br><br><pre> <code class="bash hljs">apt update</code> </pre> <br>  Remarque: si une erreur survient lors de la mise √† jour: "Le r√©f√©rentiel 'cdrom: // Ubuntu-Server 16.04.5 LTS _Xenial Xerus_ - Release amd64 (20180731) xenial Release' n'a pas de fichier Release.".  Vous devez ex√©cuter la commande suivante: <br><br><pre> <code class="bash hljs">sudo nano /etc/apt/sources.list</code> </pre> <br>  Et commentez la ligne: <br><br><pre> <code class="bash hljs">deb cdrom:[Ubuntu-Server 16.04.5 LTS ‚Ä¶</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/x4/l8/0w/x4l80wwrr4ovzqd0a_wj3jqy8ki.png"></a> <br>  <i>Figure 6. Correction d'une erreur possible</i> <br><br>  Ensuite, enregistrez le fichier, comme pr√©c√©demment: Ctrl + X, Oui, Entr√©e <br><br>  Apr√®s avoir corrig√© une erreur possible, r√©ex√©cutez la commande de mise √† jour et, par cons√©quent, vous devriez voir quelque chose comme ceci: <br><br> <a href=""><img src="https://habrastorage.org/webt/iu/i7/7_/iui77_byceas5t0cujkv-1p9ltu.png"></a> <br>  <i>Figure 7. Mise √† jour d'Ubuntu</i> <br><br><h2>  Installer IBM Cloud Private </h2><br>  Avant d'installer ICP, vous devez modifier le fichier hosts: <br><br><pre> <code class="bash hljs">nano /etc/hosts</code> </pre> <br>  Remplacez la cha√Æne 127.0.1.1 ubuntu par votre adresse IP et tout nom d'h√¥te appropri√©. <br><br>  Assurez-vous que le nom d'h√¥te et l'alias de la ligne sont s√©par√©s par une tabulation ou un espace: <br> <a href=""><img src="https://habrastorage.org/webt/ht/jk/ks/htjkkshqzdczphtd999qhxb_unu.png"></a> <br>  <i>Figure 8. Modification du fichier d'h√¥tes</i> <br><br>  Enregistrez le fichier: Ctrl + X, Oui, Entr√©e <br><br>  Les 2 commandes suivantes vous permettront de mettre √† jour le syst√®me et d'installer des modules suppl√©mentaires. <br><br><pre> <code class="bash hljs">apt update apt-get install apt-transport-https ca-certificates curl software-properties-common python-minimal jq</code> </pre> <br>  V√©rifiez le terminal pour les erreurs: <br><br> <a href=""><img src="https://habrastorage.org/webt/so/ve/fi/sovefisrk9vxuzgcxusddtzir6e.png"></a> <br>  <i>Figure 9. Installation de composants suppl√©mentaires</i> <br><br>  Augmentez la m√©moire virtuelle maximale avec la commande: <br><br><pre> <code class="bash hljs">sysctl -w vm.max_map_count=262144</code> </pre><br>  Les K8 ne d√©marreront pas avec l'√©change activ√©.  Vous pouvez le d√©sactiver avec la commande: <br><br><pre> <code class="bash hljs">swapoff ‚Äìa</code> </pre> <br><blockquote>  <i><b>Remarque: les</b> deux commandes pr√©c√©dentes fonctionneront dans la session en cours.</i>  <i>Lorsque vous red√©marrez, ces param√®tres seront perdus et vous devez les enregistrer √† nouveau.</i> </blockquote><br>  L'application de ces param√®tres lors du chargement de l'OS peut √™tre activ√©e par les commandes suivantes: <br><br><pre> <code class="bash hljs">sed -i <span class="hljs-string"><span class="hljs-string">'/ swap / s/^/#/'</span></span> /etc/fstab <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"vm.max_map_count=262144"</span></span> &gt;&gt; /etc/sysctl.conf</code> </pre> <br><h3>  Ajout d'une cl√© GPG </h3><br>  Nous utilisons la commande suivante: <br><br><pre> <code class="bash hljs">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -</code> </pre> <br><h3>  Ajout d'un r√©f√©rentiel pour l'installation de Docker </h3><br>  Pour terminer l'installation du r√©f√©rentiel, vous devez ex√©cuter les 2 commandes suivantes: <br><br><pre> <code class="bash hljs">add-apt-repository <span class="hljs-string"><span class="hljs-string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(lsb_release -cs)</span></span></span><span class="hljs-string"> stable"</span></span> apt-get update</code> </pre> <br><h3>  Installer Docker </h3><br>  Utilisez la commande suivante pour installer Docker (Docker version 17.12.1 est la version maximale prise en charge pour IBM Cloud Private 2.1.0.3): <br><br><pre> <code class="bash hljs">apt-get install docker-ce=17.12.1~ce-0~ubuntu</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/so/ve/fi/sovefisrk9vxuzgcxusddtzir6e.png"></a> <br>  <i>Figure 10. Processus d'installation de Docker</i> <br><br>  Vous pouvez v√©rifier la fonctionnalit√© de Docker avec la commande suivante: <br><br><pre> <code class="bash hljs">docker version</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/w3/8y/si/w38ysiwd6porpbipaez4_nghy9i.png"></a> <br>  <i>Figure 11. V√©rification de Docker</i> <br><br><h3>  T√©l√©charger IBM Cloud Private </h3><br>  Pour t√©l√©charger l'image ICP-ce (Community Edition) √† partir de la ressource dockerHub, vous devez utiliser la bo√Æte √† outils Docker.  Vous pouvez le faire avec la commande suivante: <br><br><pre> <code class="bash hljs">docker pull ibmcom/icp-inception:2.1.0.3</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/vq/k4/m3/vqk4m3d4o-sclprferxvwcjprte.png"></a> <br>  <i>Figure 12. T√©l√©charger ICP</i> <br><br>  IBM a regroup√© tous les composants essentiels n√©cessaires √† l'installation dans un seul package (notez que vous pouvez changer la version en une version plus r√©cente si n√©cessaire).  La commande pull t√©l√©chargera l'image sur le syst√®me de fichiers local (l'image sera lanc√©e pour installer ICP). <br><br>  Cr√©ez un r√©pertoire et acc√©dez-y: <br><br><pre> <code class="bash hljs">mkdir /opt/icp <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt/icp</code> </pre> <br>  Copiez le package ICP dans ce r√©pertoire: <br><br><pre> <code class="bash hljs">docker run -e LICENSE=accept -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(pwd)</span></span></span><span class="hljs-string">"</span></span>:/data ibmcom/icp-inception:2.1.0.3 cp -r cluster /data</code> </pre> <br><blockquote>  <i><b>Remarque:</b> cette commande Docker toolkit ex√©cute la commande Linux copy (cp) √† partir du r√©pertoire sp√©cifi√© (option -v).</i>  <i>Le r√©pertoire du cluster sera cr√©√© dans / opt / icp avec tous les fichiers n√©cessaires.</i> </blockquote><br><h3>  Configurer les cl√©s SSH </h3><br>  Cr√©ez de nouvelles cl√©s ssh dans le r√©pertoire / opt / icp / cluster: <br><br><pre> <code class="bash hljs">ssh-keygen -b 4096 -f ~/.ssh/id_rsa -N <span class="hljs-string"><span class="hljs-string">""</span></span> cat ~/.ssh/id_rsa.pub | sudo tee -a ~/.ssh/authorized_keys systemctl restart sshd cp ~/.ssh/id_rsa ./cluster/ssh_key</code> </pre> <br>  V√©rifiez que la cl√© est cr√©√©e et situ√©e dans le dossier / opt / icp / cluster: <br><br><pre> <code class="bash hljs">ls /opt/icp/cluster</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/5t/-f/th/5t-fthfoh0nvegetpvqgs5qcqvm.png"></a> <br>  <i>Figure 13. Le contenu du dossier de cluster</i> <br><br><h3>  Configuration ICP </h3><br>  Ajoutez l'adresse IP de chaque n≈ìud du cluster dans le fichier / opt / icp / cluster / hosts (dans notre cas, nous utilisons la m√™me adresse IP pour chaque composant que nous avons sp√©cifi√© dans / etc / hosts).  Nous le faisons avec la commande suivante: <br><br><pre> <code class="bash hljs">nano /opt/icp/cluster/hosts</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/uv/g4/3n/uvg43n_tjis5f-s9x1oakpsfjwi.png"></a> <br>  <i>Figure 14. Le contenu du fichier hosts</i> <br><br>  Enregistrez le fichier: Ctrl + X, Oui, Entr√©e <br><br>  Des informations d√©taill√©es sur les options d'installation peuvent √™tre trouv√©es dans le fichier de configuration: <br><br><pre> <code class="bash hljs">more /opt/icp/cluster/config.yaml</code> </pre> <br>  Nous ne recommandons pas de modifier les param√®tres d'installation par d√©faut. <br><blockquote>  <i><b>Remarque: Les</b> 2 fichiers d'installation les plus importants sont les h√¥tes et config.yaml, qui d√©crivent les options d'installation ICP.</i>  <i>Dans une configuration multi-travailleurs, vous devez sp√©cifier une liste d'adresses IP dans la section des travailleurs.</i>  <i>Lors de l'installation de la version actuelle d'ICP en mode n≈ìud unique, les adresses IP dans le fichier hosts ne changent que.</i> </blockquote><br><h3>  Installation ICP </h3><br>  Acc√©dez au r√©pertoire du cluster et ex√©cutez l'installation: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt/icp/cluster docker run -e LICENSE=accept --net=host -t -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(pwd)</span></span></span><span class="hljs-string">"</span></span>:/installer/cluster ibmcom/icp-inception:2.1.0.3 install</code> </pre> <br>  Selon les ressources disponibles, l'installation peut durer de 20 √† 60 minutes.  Si des erreurs se produisent (messages rouges), apportez les modifications appropri√©es aux fichiers de configuration.  Parfois, l'installation peut ralentir un peu en raison de tentatives de reconnexion √† des composants qui n'ont pas encore d√©marr√© (par exemple, lors du d√©marrage de Cloudant ou d'IAM). <br><br>  L'installation devrait ressembler √† ceci: <br> <a href=""><img src="https://habrastorage.org/webt/ft/9-/8r/ft9-8re-bg2velkh1hlxqdgoecu.png"></a> <br>  <i>Figure 15. R√©sultat de l'installation ICP</i> <br><br>  En cas d'erreur, la d√©sinstallation d'ICP peut √™tre n√©cessaire: <br><br><pre> <code class="bash hljs">docker run -e LICENSE=accept --net=host -t -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(pwd)</span></span></span><span class="hljs-string">"</span></span>:/installer/cluster ibmcom/icp-inception:2.1.0.3 uninstall</code> </pre> <br>  Avant de passer √† l'√©tape suivante, attendez environ 5 minutes pour que tous les composants ICP d√©marrent correctement. <br><br>  Suivez le lien fourni une fois l'installation termin√©e, entrez dans la console ICP (admin / admin): <br><br><pre> <code class="bash hljs">https://&lt;ip_address&gt;:8443</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/t8/en/-t/t8en-t-wktktunis-pn4phoz2dw.png"></a> <br>  <i>Figure 16. La page de connexion du panneau de commande</i> <br><br>  Page d'accueil ICP: <br> <a href=""><img src="https://habrastorage.org/webt/ji/bf/t6/jibft6ehclvq8-npu2slawyoxbo.png"></a> <br>  <i>Figure 17. Interface Web du panneau de commande</i> <br><br>  En haut √† droite, s√©lectionnez le menu Catalogue, une liste des applications disponibles s'affiche: <br> <a href=""><img src="https://habrastorage.org/webt/3i/_w/tt/3i_wttbjrkwapn7nvohf-fo4ziy.png"></a> <br>  <i>Figure 18. Catalogue de composants</i> <br><br>  Ce r√©pertoire contient une liste d'applications et de logiciels dont vous pouvez √©tudier la description √† votre guise, mais ne vous pr√©cipitez pas jusqu'√† pr√©sent pour les d√©ployer. <br>  Nous n'avons pas encore appris √† g√©rer correctement l'ICP nouvellement install√© (non seulement via l'interface Web, mais aussi la console sous la forme de CLI - Interface de ligne de commande), connecter le stockage persistant et effectuer de petits r√©glages. <br><br><h2>  En conclusion </h2><br>  Pour r√©sumer. <br><br>  Nous avons d√©ploy√© avec succ√®s l'√©dition communautaire IBM Cloud Private (version 2.1.0.3) sur un h√¥te dans une machine virtuelle ex√©cutant Ubuntu Server OS 16/04/05.  Pour le moment, nous avons personnellement v√©rifi√© l'installation sur les hyperviseurs VMware et Hyper-V, cela fonctionne d√©finitivement sur XenServer et il ne devrait pas y avoir de difficult√©s pour VirtualBox et KVM. <br><br>  Qui a vraiment h√¢te de se plonger davantage dans l'√©tude de l'ICP, c'est-√†-dire une excellente s√©lection des travaux de laboratoire de notre coll√®gue ici: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/phthom/IBMCloudPrivate</a> <br><br>  Parmi les √©tapes √† venir - apr√®s une nouvelle installation, nous avons juste besoin de configurer un peu ICP et de commencer √† le remplir avec quelque chose d'utile et proche des t√¢ches pratiques. <br><br>  Si la communaut√© Habr soutient positivement cette initiative, alors au fur et √† mesure de nos recherches et exp√©rimentations, nous remplirons le c≈ìur de la plate-forme avec les composants n√©cessaires pour la collecte de t√©l√©m√©trie, le stockage des donn√©es, le traitement, l'analyse, la pr√©vision, la formation d'interfaces de programmes externes et la cr√©ation d'applications utilisateur.  En cons√©quence, d√©velopper une s√©rie de ces articles. <br><br>  En attente de vos commentaires et suggestions! <br><br>  De plus, nos personnes partageant les m√™mes id√©es d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AIXportal.ru ont</a> pr√©par√© un magnifique clip vid√©o sur l'installation d'IBM Cloud Private sur leur cha√Æne Youtube, quelqu'un sera plus √† l'aise comme ceci: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">youtu.be/eQwOOTzjM24</a> <br><br><h2>  Liens et documents utiles </h2><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Page produit en russe</a> <br>  ‚Ä¢ Qui veut pratiquer l'anglais, le livre - ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ICP for Dummies</a> ¬ª 2018.  (40 pages) <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Livres blancs pour ICP 2.1.0.3</a> √† IBM Knowledge Center <br>  ‚Ä¢ Communaut√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ICP</a> ouverte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur IBM developerWorks</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Recettes ICP pour les d√©veloppeurs</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr426135/">https://habr.com/ru/post/fr426135/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr426121/index.html">MC.exe (compilateur de messages), rc.exe, link.exe pour g√©n√©rer .dll pour EventMessageFile</a></li>
<li><a href="../fr426123/index.html">Apprenez OpenGL. Le√ßon 6.1. PBR ou rendu physiquement correct. Th√©orie</a></li>
<li><a href="../fr426125/index.html">St√©ro√Ødes de carri√®re. Ascenseurs</a></li>
<li><a href="../fr426131/index.html">T√©l√©chargez la configuration sur FPGA via USB ou d√©montez FTDI MPSSE</a></li>
<li><a href="../fr426133/index.html">Pr√©sentation de la version alpha des instantan√©s de volume dans Kubernetes</a></li>
<li><a href="../fr426137/index.html">√Çge d'honn√™tet√©</a></li>
<li><a href="../fr426141/index.html">Red Hat remplace Docker par Podman</a></li>
<li><a href="../fr426143/index.html">Animation 3D - vid√©o ou interactive?</a></li>
<li><a href="../fr426145/index.html">Atelier d'acceptation ind√©pendant, 23 octobre, Moscou</a></li>
<li><a href="../fr426149/index.html">Programme d'installation de Python √† faire soi-m√™me pour les versions Android de TeamCity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>