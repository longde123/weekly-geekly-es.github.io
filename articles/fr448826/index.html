<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚍 👩‍👦 👩🏻‍🤝‍👨🏽 Climatiseur IT. Partie I ❄️ 🗽 👸🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Penny, les choses s'améliorent avec le Bluetooth © Sheldon, TBBT 
 Bien que la maison soit « testée », tout le monde a essayé de la faire le plus corr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Climatiseur IT. Partie I</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448826/"><blockquote>  Penny, les choses s'améliorent avec le Bluetooth © Sheldon, TBBT </blockquote><br>  Bien que la maison soit « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">testée</a> », tout le monde a essayé de la faire le plus correctement possible - bonne isolation, fenêtres à double vitrage décentes, etc. <br><br>  En hiver, par temps clair, le soleil réchauffait la maison au point que le chauffage par le chauffage au sol était coupé par un thermostat.  Tout semble aller bien, mais le printemps est arrivé et il est devenu clair que la maison était en surchauffe et devait être refroidie. <br><br>  Nous avons prévu ce scénario et préparé à l'avance l'installation d'un climatiseur: nous avons posé toutes les autoroutes nécessaires au stade de la construction. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Vers la question des fenêtres</b> <div class="spoiler_text">  En général, bien sûr, il serait utile de mettre des fenêtres à double vitrage avec des lunettes MF et I, mais ici, "l'épée à double tranchant" (cependant, comme toujours) - elles ne recevraient pas la chaleur gratuite du soleil en hiver. <br><br>  Idéalement, il faudrait d'abord calculer ce qui est le plus rentable: c'est moins d'utiliser un chauffage au sol électrique pour chauffer pendant la période froide ou moins d'utiliser un climatiseur pour refroidir pour se réchauffer, et sur la base d'une telle analyse, choisir quelles fenêtres <b>à</b> double vitrage installer plus <b>correctement</b> . <br><br>  Mais personne n'a fait une telle analyse, nous avons donc ce que nous avons. <br><br>  Soit dit en passant, ni les constructeurs ni les travailleurs des fenêtres n'ont recommandé les fenêtres à double vitrage qui seraient mieux utilisées dans notre cas.  Vous devez le découvrir par vous-même (y compris le paiement des erreurs). <br></div></div><br>  L'un des critères importants pour choisir un climatiseur pour ma «maison d'essai» est la possibilité de son intégration dans le système de « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">maison intelligente</a> ». <br><br><div class="spoiler">  <b class="spoiler_title">Intégration "bon marché et joyeuse"</b> <div class="spoiler_text">  Bien sûr, l'intégration la plus simple de presque tous les climatiseurs consiste à utiliser les commandes de la télécommande infrarouge.  Mais cette option ne me convient pas pour des raisons idéologiques: il n'y a aucune information sur l'état actuel de l'appareil. <br><br>  Par conséquent, nous rejetons immédiatement cette option et passons à autre chose. <br></div></div><br><h3>  Farine de choix </h3><br>  Naturellement, les paramètres restants sont également très importants (des priorités principales: le fonctionnement le plus silencieux, la classe de consommation d'énergie n'est pas inférieure à «A», le prix). <br><br>  Le choix s'est porté sur l'onduleur Electrolux (série Atrium).  Le fabricant indique explicitement que le climatiseur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">peut être contrôlé via WiFi</a> (il vous suffit d'acheter le module WiFi en option). <br><br>  Le prix est relativement humain (les autres modèles d'onduleurs avec WiFi sont environ 30% plus chers, ce qui est en quelque sorte trop cher pour une maison d'hôtes). <br><br><div class="spoiler">  <b class="spoiler_title">Wake Up Call</b> <div class="spoiler_text">  Le fournisseur pour une raison ou une autre parle avec hésitation du module WiFi et se soustrait de toutes les manières possibles à sa livraison sous divers prétextes.  Je comprends maintenant que c'est une «cloche», mais nous allons de l'avant. <br></div></div><br>  L'aide, les manuels et autres informations de Google - (un peu comme) nécessitent le module Wi-Fi intelligent Electrolux ECH / WF-01.  Et il ne manque pas du tout (ce module est également utilisé pour les chauffe-eau et les convecteurs électriques du même fabricant) et le prix est plus qu'abordable - moins de mille roubles (en général, il aurait dû être légèrement alerté).  L'application de gestion en est une pour tous ces types d'appareils, ce qui semble tout à fait raisonnable: le constructeur souhaite qu'un «écosystème» se forme. <br><br>  Un peu plus de recherche (jetant un œil au code d'application Android habituel) et il s'avère que l'application communique avec le cloud à: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dongle.rusklimat.ru/api</a> - oui, cela devient encore plus intéressant et des réflexions apparaissent immédiatement sur la façon dont il sera nécessaire de fournir l'intégration avec le système de maison intelligente. (UD). <br><br><div class="spoiler">  <b class="spoiler_title">"Bell" numéro deux</b> <div class="spoiler_text">  Un avis d'un client est tombé sur l'un des sites, où il a déclaré que le cloud se «vautrait» souvent et qu'il attendait et torturait le support technique depuis environ deux mois avant que le système ne fonctionne comme annoncé.  La critique est assez ancienne - je pensais que j'avais déjà réglé les problèmes et tout irait bien. <br></div></div><br>  Le système split a été commandé, le jour de l'installation a été fixé - tout est clair: quelques heures et une fraîcheur agréable est assurée. <br><br><img src="https://habrastorage.org/webt/xh/qa/eo/xhqaeou4lqkpkhzasferpb52qpg.jpeg"><br><br>  Il est maintenant temps de commander un module optionnel. <br><br><h3>  Râteau </h3><br>  Le module Smart WiFi est arrivé - il n'a rien de spécial: un «lecteur flash» grossier avec un seul bouton et une LED qui brille faiblement à travers le boîtier (bien sûr, lorsqu'il est connecté à l'alimentation). <br><br><img src="https://habrastorage.org/webt/pd/ky/6z/pdky6zvzhyne4lpuo0ryek9yewq.jpeg"><br><br>  Je l'ai d'abord branché sur l'ordinateur portable (j'ai besoin de voir ce que le module «prétend être)) ... mais pas un seul nouvel appareil n'est apparu dans le système (j'ai été surpris, mais pour une raison quelconque, pas beaucoup). <br><br>  Bon, essayons de l'utiliser de façon régulière: le module a pris le connecteur correspondant dans l'unité intérieure du climatiseur. <br><br><img src="https://habrastorage.org/webt/kg/pn/uc/kgpnuc-pmsqnle2ce9k1xgxfbau.jpeg"><br><br><div class="spoiler">  <b class="spoiler_title">Verso de la carte d'affichage</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/jo/6p/fg/jo6pfg5g7toybpwkbg-wig29kw0.jpeg"><br></div></div><br>  Installer le programme et suivre les instructions: il a appuyé sur le bouton du module pendant cinq secondes - il a commencé à clignoter la LED jaune (mode Smartlink), dans la boîte de dialogue qui est apparue, a indiqué le nom du réseau wifi et son mot de passe ... la lumière sur le module a clignoté et est devenue bleue (selon les instructions - mode normal). <br><br>  Bien que tout ait été fait selon les instructions, l'appareil ne figurait pas dans le programme (diverses craintes ont commencé à se justifier). <br><br>  Eh bien, d'accord, nous allons de l'avant et essayons de comprendre à quoi nous avons affaire - nous examinons l'interface Web du routeur.  Routeur - a montré que le nouveau périphérique wifi est connecté et fonctionne (acclamations, petite victoire et quelque chose fonctionne toujours). <br><br>  Dans le même temps, le routeur a passé ce module comme un récipient en verre: le nom du nouvel hôte est «HF-LPT220». <br><br>  Une recherche rapide a montré qu'il s'agit d'un SoC UART-WiFi (environ 5 $ au détail et 60 à 80 cents pour les achats en gros). <br><br><h3>  Une autopsie a révélé que le patient est décédé d'une autopsie. </h3><br>  Nous déconnectons le module du climatiseur et ouvrons le boîtier de ce sifflet (il s'ouvre et se ferme facilement). <br><br><img src="https://habrastorage.org/webt/ft/gv/v2/ftgvv2jtp8kwwninldqtekvt1iw.jpeg"><br><br>  On peut voir sur la photo ci-dessus que le routeur a dit la vraie vérité: un module à trois sous avec un cerclage minimal (stabilisateur de puissance, LED (deux couleurs), bouton, convertisseur de niveau) - il est déjà devenu clair que même le prix demandé pour ce module était évidemment trop élevé (d'accord , nous supposons qu'ils ont également fixé la rémunération du travail des programmeurs qui étaient censés écrire un firmware qui fournirait les fonctionnalités nécessaires). <br><br>  Faites attention aux contacts signés du connecteur USB (depuis USB - uniquement le boîtier du connecteur et le même emplacement des câbles d'alimentation) - il n'est donc pas du tout surprenant que le module n'ait pas été détecté par l'ordinateur. <br><br><img src="https://habrastorage.org/webt/_m/mk/o_/_mmko_2i4lh5xfeisxtzqekfhwk.jpeg"><br><br>  Ainsi, l'automatisation du contrôle de ce climatiseur - vous pouvez le faire sur n'importe quoi (au moins sur l'Arduino) - vous avez juste besoin de savoir quelles commandes le système s'attend à recevoir. <br><br>  Mais cette information sur les équipes, nous ne le faisons tout simplement pas. <br><br><h3>  Vecteurs de pensée </h3><br>  En fait, puisque tous les composants sont à portée de main et que des informations supplémentaires sont apparues sur ce que nous avons réellement, les options suivantes semblent logiques: <br><br><ol><li>  Analyse des échanges réseau - l'idée était de mettre en place un «serveur proxy», vers lequel transférer l'échange initial entre la climatisation et le «cloud» (au moyen d'un routeur), et à partir de ce «proxy» - pour organiser l'interaction avec le «cloud».  Intégrez ensuite ce serveur dans le système de maison intelligente - en même temps, il serait possible de réaliser un travail à la fois via une application standard pour le climatiseur et un contrôle via UD (scripts automatiques, etc.). </li><li>  Connectez l'ordinateur via le module USB-UART à l'unité interne du système, sélectionnez le taux de change et "écoutez", que dit le climatiseur au module (je veux croire que l'échange se déroule, que le module standard soit connecté ou non).  J'espère qu'après avoir reçu les commandes de la télécommande IR, le climatiseur les exécute et envoie le message correspondant via le module WiFi au «cloud» pour afficher l'état actuel.  Et espérons que les développeurs sont paresseux et que ces messages sont identiques aux commandes reçues du module WiFi. </li><li>  Connectez l'ordinateur via le module USB-UART au module WiFi et essayez d'utiliser l'application standard pour «diriger» le climatiseur et en même temps recevoir des commandes du module WiFi pour le système divisé.  Cette option est très prometteuse pour l'analyse, mais, malheureusement, mon climatiseur n'apparaissait pas dans l'application standard (pour le moment) - par conséquent, l'envoi de commandes depuis le téléphone n'est pas possible. </li></ol><br><h3>  Tentatives </h3><br>  Étant donné que l'application régulière ne commençait pas avec le module WiFi, j'ai commencé avec le plus simple - je suis allé selon l'option 2: j'ai pris USB-UART et connecté à la climatisation. <br><br>  Malheureusement, l'option n'a pas donné de résultat - le système divisé est «silencieux» à toutes les vitesses d'échange et ne réagit en aucune façon aux stimuli externes.  Apparemment, la «protection contre le piratage» est intégrée: probablement, le module WiFi d'origine envoie des données, selon lesquelles l'unité principale reconnaît le «nôtre» et échange. <br><br>  Tout en traitant de son hypothèse, il a écrit plusieurs lettres: à Electrolux et aux développeurs de logiciels mobiles. <br><br><h4>  Electrolux </h4><br>  En fait, tous les équipements climatiques sous la marque Electrolux sont officiellement fournis par Rusklimat (ma première connaissance avec cette société remonte à environ 10 ans et c'était loin d'être agréable, mais c'est une autre histoire).  Par conséquent, je n'ai pas été très surpris lorsque, en réponse à une demande sur le site Electrolux, je suis venu d'un spécialiste technique Rusclimate. <br><br>  Eh bien, la réponse a été avec un tel sens que le module que j'ai acheté ne convient pas aux climatiseurs, mais il n'y en a pas encore de «adapté» et n'est attendu qu'à la mi-juillet 2019. <br><br><h4>  Développeurs de logiciels mobiles </h4><br>  Le développeur du logiciel pour Rusklimat est la société Ipol LLC.  Les développeurs ont répondu que dans la version actuelle, les climatiseurs n'étaient pas pris en charge du tout, et de la demande de «partager le protocole d'échange», bien sûr, ils ont répondu qu'ils n'avaient pas divulgué ces informations. <br><br><h3>  La fin? </h3><br>  Bien sûr que non!  Il ne reste plus qu'à attendre que le constructeur lance un module WiFi «compatible» et répète tous les vecteurs de reverse engineering, mais avec le module «correct». <br><br>  En attendant, je reviendrai à l'option d'automatisation «bon marché et joyeuse» (je devrai contrôler le fonctionnement du climatiseur à l'aide d'une caméra de vidéosurveillance - l'unité intérieure vient juste de rentrer dans le cadre). <br><br>  Si tout à coup quelqu'un trouve la façon de faire quand même la «bonne chose», je serai heureux d'avoir un indice.  Et si quelqu'un a déjà «emprunté cette voie» et partage le protocole d'échange - je serai juste heureux;) <br><br>  Soit dit en passant, dans les entrailles de l'unité intérieure, il y avait une plaque d'information très intéressante qui donne quelques nouveaux «vecteurs»: <br><br><img src="https://habrastorage.org/webt/ik/zc/dg/ikzcdgu-kj8ygctuhrovp3cvqg4.jpeg"><br><br>  PS " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Part II</a> " avec une description détaillée de la solution "cheap and cheerful" sera plus tard (il vous suffit de trouver du temps). <br><br>  PPS «Part III» avec la «bonne» solution, j'espère, apparaîtra après l'acquisition d'un module compatible (il reste à attendre son apparition en vente). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr448826/">https://habr.com/ru/post/fr448826/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr448808/index.html">À propos de choses simples, compliquées. "Acier dormant." Comment graisser les boulons rouillés ou non WD-40 avec un seul ...</a></li>
<li><a href="../fr448810/index.html">Comment ai-je attrapé un pirate</a></li>
<li><a href="../fr448812/index.html">Mission lunaire "Bereshit" - recherche de la première bibliothèque lunaire après le début de l'accident de son porteur</a></li>
<li><a href="../fr448814/index.html">Bosque Language - le nouveau langage de programmation de Microsoft</a></li>
<li><a href="../fr448820/index.html">Rouille + CLion = Amour</a></li>
<li><a href="../fr448828/index.html">Transformateur Tesla avec bobines imprimées, soudé trois composants - et vous avez terminé</a></li>
<li><a href="../fr448830/index.html">Par où commencer le développement de l'architecture?</a></li>
<li><a href="../fr448836/index.html">Stadia est-il une révolution dans l'industrie du jeu?</a></li>
<li><a href="../fr448838/index.html">Qu'est-ce que le marketing de contenu en anglais et pourquoi enregistrer un podcast avec papa?</a></li>
<li><a href="../fr448840/index.html">Événements numériques à Moscou du 22 au 28 avril</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>