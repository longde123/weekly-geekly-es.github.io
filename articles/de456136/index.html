<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙍🏻 👩🏿‍💻 🖕🏼 Warum machen wir Enterprise Service Mesh? 🔜 🉑 👩🏾‍🍳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Service Mesh ist ein bekanntes Architekturmuster für die Integration von Microservices und die Umstellung auf die Cloud-Infrastruktur. In der Cloud-Co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Warum machen wir Enterprise Service Mesh?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/456136/">  Service Mesh ist ein bekanntes Architekturmuster für die Integration von Microservices und die Umstellung auf die Cloud-Infrastruktur.  In der Cloud-Container-Welt ist es heute ziemlich schwierig, darauf zu verzichten.  Auf dem Markt sind bereits mehrere Open-Source-Service-Mesh-Implementierungen verfügbar, deren Funktionalität, Zuverlässigkeit und Sicherheit jedoch bei weitem nicht immer ausreichen, insbesondere wenn es um die Anforderungen großer Finanzunternehmen im ganzen Land geht.  Aus diesem Grund haben wir bei Sbertech beschlossen, Service Mesh anzupassen und darüber zu sprechen, was in Service Mesh cool ist, was nicht sehr ist und was wir damit machen werden. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/610/635/fbf/610635fbfe1b4214c5598679e06bf4aa.png"><br><a name="habracut"></a><br>  Die Popularität der Service Mesh-Vorlage wächst mit der Popularität der Cloud-Technologie.  Es handelt sich um eine dedizierte Infrastrukturschicht, die die Interaktion zwischen verschiedenen Netzwerkdiensten vereinfacht.  Moderne Cloud-Anwendungen bestehen aus Hunderten und sogar Tausenden solcher Dienste, von denen jeder Tausende von Kopien haben kann. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/394/a6f/ca9/394a6fca966e4ef70ad205c6eb79af34.png"><br><br>  Die Interaktion zwischen diesen Diensten und ihrer Verwaltung ist eine Schlüsselaufgabe von Service Mesh.  Tatsächlich ist dies ein Netzwerkmodell vieler Proxys, die zentral verwaltet werden und eine Reihe sehr nützlicher Funktionen ausführen. <br><br>  <i>Auf Proxy-Ebene (Datenebene):</i> <br><br><ul><li>  Zuweisen und Verteilen von Routing- und Verkehrsausgleichsrichtlinien <br></li><li>  Verteilung von Schlüsseln, Zertifikaten, Token <br></li><li>  Telemetriesammlung, Bildung von Überwachungsmetriken <br></li><li>  Integration in die Sicherheits- und Überwachungsinfrastruktur <br></li></ul><br>  <i>Auf der Ebene der Steuerebene:</i> <br><br><ul><li>  Wenden Sie Routing- und Verkehrsausgleichsrichtlinien an <br></li><li>  Management von Wiederholungsversuchen und Zeitüberschreitungen, Definition von "toten" Knoten (Unterbrechung des Stromkreises), Management von Fehlersituationen (Injizieren von Fehlern) und Aufrechterhaltung der Ausfallsicherheit von Diensten durch andere Mechanismen <br></li><li>  Anrufauthentifizierung / -autorisierung <br></li><li>  Verwerfen von Metriken (Beobachtbarkeit) <br></li></ul><br>  Der Anwenderkreis, der an der Entwicklung dieser Technologie interessiert ist, ist sehr groß - von kleinen Startups bis zu großen Internetunternehmen, beispielsweise PayPal. <br><br><h2>  Wofür ist Service Mesh im Unternehmenssektor? </h2><br>  Die Verwendung von Service Mesh bietet viele offensichtliche Vorteile.  Erstens ist es für Entwickler nur praktisch: Es wird <i>eine Technologieplattform</i> zum Schreiben von Code <i>angezeigt</i> , die die Integration in die Cloud-Infrastruktur erheblich vereinfacht, da die Transportschicht vollständig von der Anwendungslogik isoliert ist. <br><br>  Darüber hinaus <i>vereinfacht Service Mesh die Beziehung zwischen Lieferanten und Verbrauchern.</i>  Heutzutage ist es für Anbieter und Verbraucher der API viel einfacher, Schnittstellen und Verträge selbst zu vereinbaren, ohne dafür einen speziellen Integrationsvermittler und Schiedsrichter einzubeziehen - einen Corporate Service Bus.  Dieser Ansatz wirkt sich erheblich auf zwei Indikatoren aus.  Die Geschwindigkeit, mit der neue Funktionen auf den Markt gebracht werden (Time-to-Market), steigt, gleichzeitig steigen jedoch auch die Kosten für die Lösung, da die Integration unabhängig erfolgen muss.  Die Verwendung von Service Mesh durch Geschäftsentwicklungsteams trägt hier zur Aufrechterhaltung des Gleichgewichts bei.  Infolgedessen können sich API-Anbieter ausschließlich auf die Anwendungskomponente ihres Dienstes konzentrieren und diese einfach im Dienstnetz veröffentlichen. Die API wird sofort für alle Kunden verfügbar, und die Integrationsqualität ist produktionsbereit und erfordert keine einzige Zeile zusätzlichen Codes. <br><br>  Ein weiterer Vorteil ist, dass sich der <i>Entwickler, der das Service Mesh verwendet, ausschließlich auf die Geschäftsfunktionalität konzentriert</i> - auf das Produkt und nicht auf die technologische Komponente seines Service.  Sie müssen beispielsweise nicht daran denken, dass in einer Situation, in der der Dienst über das Netzwerk aufgerufen wird, die Verbindung möglicherweise unterbrochen wird.  Darüber hinaus hilft Service Mesh dabei, den Datenverkehr zwischen Kopien desselben Dienstes auszugleichen: Wenn eine der Kopien "gestorben" ist, schaltet das System den gesamten Datenverkehr auf die verbleibenden Live-Kopien um. <br><br>  <i>Service Mesh</i> ist <i>eine gute Grundlage für die Erstellung verteilter Anwendungen</i> , die dem Kunden die Details der internen und externen Bereitstellung von Anrufen für seine Dienste verbirgt.  Alle Anwendungen, die Service Mesh verwenden, sind auf der Transportschicht sowohl vom Netzwerk als auch voneinander isoliert: Es besteht keine Verbindung zwischen ihnen.  In diesem Fall erhält der Entwickler die volle Kontrolle über seine Dienste. <br><br>  Es ist zu beachten, dass das <i>Aktualisieren verteilter Anwendungen in einer Umgebung, in der Service Mesh verwendet wird, immer einfacher wird.</i>  Beispiel: Blau / Grün-Bereitstellung, in der zwei Anwendungsumgebungen für die Installation verfügbar sind, von denen eine nicht aktualisiert wird und sich im Standby-Modus befindet.  Das Rollback auf die vorherige Version im Falle einer nicht erfolgreichen Freigabe wird von einem speziellen Router ausgeführt, dessen Rolle Service Mesh perfekt bewältigt <i>.</i>  Sie können die <i>kanarische Version verwenden</i> , um sie in der neuen Version auszuführen. Schalten Sie nur 10% des Datenverkehrs oder der Anforderungen der Pilot-Client-Gruppe auf die neue Version um.  Der Hauptverkehr geht zur alten Version, nichts bricht. <br><br>  <i>Service Mesh bietet uns auch Echtzeit-SLA-Kontrolle</i> .  Das System der verteilten Proxys erlaubt es nicht, den Dienst zu überfluten, wenn einer der Clients das ihm erteilte Kontingent überschreitet.  Wenn die API-Bandbreite begrenzt ist, kann niemand sie mit einer großen Anzahl von Transaktionen erwürgen: Das Service Mesh befindet sich vor dem Service und lässt keinen zusätzlichen Datenverkehr zu.  Es wird einfach in der Integrationsschicht abgeschaltet, und die Dienste selbst werden weiterhin funktionieren, ohne es zu bemerken. <br><br>  Wenn das Unternehmen die Kosten für die Entwicklung von Integrationslösungen senken möchte, hilft Service Mesh ebenfalls: <i>Sie können von kommerziellen Produkten auf die Open-Source-Version umsteigen</i> .  Unser Enterprise Service Mesh basiert auf der Open-Source-Version von Service Mesh. <br><br>  Ein weiterer Vorteil ist die <i>Verfügbarkeit eines einzigen vollwertigen Satzes von Integrationsdiensten</i> .  Da die gesamte Integration über diese Zwischenschicht erfolgt, können wir den gesamten Integrationsverkehr und die Verbindungen zwischen den Anwendungen verwalten, die den Geschäftskern des Unternehmens bilden.  Es ist sehr bequem. <br><br>  Schließlich <i>treibt Service Mesh das Unternehmen zum Übergang zu einer dynamischen Infrastruktur.</i>  Jetzt streben viele nach Containerisierung.  Wenn man einen Monolithen in Microservices zerlegt, ist es schön, alles zu implementieren - das Thema ist auf dem Vormarsch.  Wenn Sie jedoch versuchen, ein System, das seit vielen Jahren in Produktion ist, auf eine neue Spur zu übertragen, treten sofort eine Reihe von Problemen auf: Es ist nicht einfach, alles in Container zu verschieben und auf der Plattform bereitzustellen.  Die Implementierung, Synchronisation und Interaktion dieser verteilten Komponenten ist ein weiteres schwieriges Thema.  Wie werden sie miteinander kommunizieren?  Wird es kaskadierende Fehler geben?  Mit Service Mesh können Sie einige dieser Probleme lösen und die Migration von der alten auf die neue Architektur erleichtern, da Sie die Logik des Netzwerkaustauschs vergessen können. <br><br><h2>  Warum Service Mesh anpassen? </h2><br>  In unserem Unternehmen existieren Hunderte von Systemen und Modulen gleichzeitig, und die Laufzeit ist sehr voll.  Ein einfaches Muster, wenn ein System ein anderes anruft und eine Antwort erhält, reicht also nicht aus, weil wir in der Produktion mehr wollen.  Was benötigen Sie mehr von einem Corporate Service Mesh? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ca4/0e3/e24/ca40e3e2437875712025691aa5c340e3.png"><br><br><h3>  Ereignisverarbeitungsdienst </h3><br>  Stellen Sie sich vor, wir müssen eine Echtzeit-Ereignisverarbeitung durchführen - ein System, das die Aktionen des Kunden in Echtzeit analysiert und ihm sofort ein relevantes Angebot unterbreiten kann.  Um diese Funktionalität zu implementieren, wird ein <i>Architekturmuster verwendet, das als ereignisgesteuerte Architektur (EDA) bezeichnet wird</i> .  Keines der relevanten Service Mesh unterstützt solche Muster von Haus aus, aber dies ist sehr wichtig, insbesondere für die Bank! <br><br>  Es ist seltsam, dass der Remote Procedure Call (RPC) alle Versionen des Service Mesh unterstützt und sie nicht mit EDA befreundet sind.  Weil Service Mesh ein Anschein moderner verteilter Integration ist und EDA ein sehr relevantes Architekturmuster ist, mit dem Sie einzigartige Dinge in Bezug auf das Kundenerlebnis tun können. <br><br>  Unser Enterprise Service Mesh sollte dieses Problem lösen.  Darüber hinaus möchten wir die Implementierung von garantierter Zustellung, Streaming und integrierter Ereignisverarbeitung unter Verwendung einer Vielzahl von Filtern und Vorlagen sehen. <br><br><h3>  Dateiübertragungsdienst </h3><br>  Neben EDA wäre es schön, Dateien übertragen zu können: Im Enterprise-Maßstab ist sehr oft nur die Dateiintegration möglich.  Insbesondere wird das architektonische ETL-Muster verwendet (Extrahieren, Transformieren, Laden - „Extrahieren, Transformieren, Laden“).  Darin tauscht in der Regel jeder ausschließlich Dateien aus: Sie verwenden Big Data, was unpraktisch ist, um separate Anforderungen einzugeben.  Die Möglichkeit, Dateiübertragungen im Enterprise Service Mesh nativ zu unterstützen, bietet Ihnen die Flexibilität, die Sie für Ihr Unternehmen benötigen. <br><br><h3>  Orchestrierungsservice </h3><br>  In großen Organisationen gibt es fast immer unterschiedliche Teams, die unterschiedliche Produkte herstellen.  In einer Bank arbeiten beispielsweise einige Teams mit Einlagen, während andere mit Kreditprodukten arbeiten, und es gibt viele solcher Fälle.  Dies sind verschiedene Personen, verschiedene Teams, die ihre Produkte herstellen, ihre APIs entwickeln und sie anderen zur Verfügung stellen.  Und sehr oft besteht Bedarf an der Zusammensetzung dieser Dienste sowie an der Implementierung der komplexen Logik des sequentiellen Aufrufs des API-Satzes.  Um dieses Problem zu lösen, wird in der Integrationsschicht eine Lösung benötigt, die die gesamte zusammengesetzte Logik vereinfacht (Aufrufen mehrerer APIs, Beschreiben der Route von Anforderungen usw.).  Dies ist der Orchestrierungsdienst im Enterprise Service Mesh. <br><br><h3>  AI und ML </h3><br>  Wenn Microservices über eine einzige Integrationsschicht kommunizieren, weiß Service Mesh natürlich alles über die Aufrufe der einzelnen Services.  Wir sammeln Telemetrie: Wer hat wen angerufen, wann, wie lange, wie oft und so weiter.  Wenn es Hunderttausende dieser Dienste und Milliarden von Anrufen gibt, sammelt sich all dies an und bildet Big Data.  Diese Daten können mithilfe von KI, maschinellem Lernen usw. analysiert werden und dann basierend auf den Ergebnissen der Analyse einige nützliche Dinge tun.  Es wäre angebracht, die Verwaltung des gesamten in das Service Mesh integrierten Netzwerkverkehrs und der Anwendungsaufrufe zumindest teilweise auf die künstliche Intelligenz zu übertragen. <br><br><h3>  API-Gateway-Dienst </h3><br>  In der Regel verfügt Service Mesh über Proxys und Services, die innerhalb des vertrauenswürdigen Perimeters aufeinander zugreifen.  Es gibt aber auch externe Gegenparteien.  Die API-Anforderungen für diese Verbrauchergruppe sind viel schwerwiegender.  Wir teilen diese Aufgabe in zwei Hauptteile. <br><br><ul><li>  <i>Sicherheit</i>  Probleme im Zusammenhang mit ddos, Verwundbarkeit von Protokollen, Anwendungen, Betriebssystemen usw. <br></li><li>  <i>Die Skala</i> .  Wenn die API-Rechnung, die den Kunden ausgehändigt werden muss, an Tausende oder sogar Hunderttausende geht, sind einige Mittel zum Verwalten dieses Satzes von APIs erforderlich.  Sie müssen die API ständig überwachen: Funktionieren sie oder nicht, in welchem ​​Status, welcher Datenverkehr läuft, welche Statistiken usw.  Das API-Gateway muss diese Aufgabe übernehmen, damit der gesamte Prozess verwaltet und sicher ist.  Dank dieser Komponente lernt das Enterprise Service Mesh, sowohl die internen als auch die externen APIs ohne allzu große Schwierigkeiten zu veröffentlichen. <br></li></ul><br><h3>  Support-Service für bestimmte Protokolle und Datenformate (AS-Gateway) </h3><br>  Derzeit können die meisten Service Mesh-Lösungen nur nativ mit HTTP- und HTTP2-Verkehr oder im abgeschnittenen Modus auf TCP / IP-Ebene arbeiten.  Das Enterprise Service Mesh verfügt über viele andere sehr spezifische Datenübertragungsprotokolle.  Einige Systeme verwenden möglicherweise Nachrichtenbroker, andere sind auf Datenbankebene integriert.  Wenn das Unternehmen über SAP verfügt, kann es auch ein eigenes Integrationssystem verwenden.  Und das alles funktioniert und ist ein wichtiger Teil des Geschäfts. <br><br>  Sie können nicht einfach sagen: "Lassen Sie uns das Erbe aufgeben und neue Systeme erstellen, die das Service Mesh verwenden können."  Um mit allen alten Systemen neue zu finden (in Bezug auf die Microservice-Architektur), benötigen Systeme, die Service Mesh verwenden können, einen Adapter, einen Vermittler und ein Gateway.  Stimmen Sie zu, es wäre schön, wenn es zusammen mit dem Service in einer Box geliefert würde.  Das AS-Gateway kann jede Integrationsoption unterstützen.  Stellen Sie sich vor, Sie installieren einfach das Enterprise Service Mesh und es ist bereit, mit allen benötigten Protokollen zu interagieren.  Für uns ist dieser Ansatz sehr wichtig. <br><br>  <i>So präsentieren wir die Unternehmensversion von Service Mesh (Enterprise Service Mesh).</i>  <i>Die beschriebene Anpassung löst die meisten Probleme, die beim Versuch auftreten, vorgefertigte Open-Source-Versionen der Integrationsplattform zu verwenden.</i>  <i>Die Service Mesh-Architektur, die erst vor ein paar Jahren aufgetaucht ist, entwickelt sich weiter und wir sind froh, dass wir zu ihrer Entwicklung beitragen können.</i>  <i>Wir hoffen, dass unsere Erfahrung für Sie nützlich sein wird.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de456136/">https://habr.com/ru/post/de456136/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de456126/index.html">Zählen Sie eine Menge Geld und erkunden Sie die Mine: Wie Roboter bereits einen Platz unter uns gefunden haben</a></li>
<li><a href="../de456128/index.html">MBLT19 :: return</a></li>
<li><a href="../de456130/index.html">Wie man NP-harte Probleme mit parametrisierten Algorithmen löst</a></li>
<li><a href="../de456132/index.html">Informationen zum Aufzeichnen von Fehlern oder zum Finden einer Katze</a></li>
<li><a href="../de456134/index.html">Vertrauen, aber überprüfen! So testen Sie Ihr Modell mithilfe der IBM Cloud (Watson OpenScale)</a></li>
<li><a href="../de456140/index.html">Treffen Sie Codeception 3.0</a></li>
<li><a href="../de456144/index.html">KubeCon EU 2019: 10 wichtige Ergebnisse</a></li>
<li><a href="../de456146/index.html">DevOps in der Entwicklung: Automatisierung von Webanwendungscode</a></li>
<li><a href="../de456148/index.html">News der Woche: Facebook lehnt Huawei in Anwendungen ab, Aurora OS statt Android, Mining-Strafen</a></li>
<li><a href="../de456150/index.html">Kleine Freude # 4: Radon - Codequalität gemessen in Zahlen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>