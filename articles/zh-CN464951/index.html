<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ»â€ğŸ”§ ğŸ“‹ ğŸ‘§ ä»»åŠ¡è¶Šç®€å•ï¼Œæˆ‘å°±è¶Šå®¹æ˜“è¯¯è§£ ğŸ‘¡ ğŸ¤¹ğŸ¿ ğŸ‘©ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="è¿™é¡¹çç¢çš„ä»»åŠ¡æ˜¯åœ¨æ˜ŸæœŸäº”çš„æŸä¸€å¤©å‘ç”Ÿçš„ï¼Œåº”è¯¥èŠ±è´¹2-3åˆ†é’Ÿã€‚ æ€»çš„æ¥è¯´ï¼Œä¸€å¦‚æ—¢å¾€ã€‚ 

 ä¸€ä½åŒäº‹è¦æ±‚æˆ‘åœ¨ä»–çš„æœåŠ¡å™¨ä¸Šä¿®å¤è„šæœ¬ã€‚ ä»–åšåˆ°äº†ï¼ŒæŠŠå®ƒé€’ç»™äº†ä»–ï¼Œç„¶åä¸ç»æ„åœ°æŠŠå®ƒä¸¢äº†ï¼šâ€œæ—¶é—´å¾ˆç´§ï¼Œåªæœ‰5åˆ†é’Ÿã€‚â€ å³ä½¿ä»–äº†è§£åŒæ­¥ï¼Œä»–çš„æœåŠ¡å™¨ã€‚ åŠä¸ªå°æ—¶è¿‡å»äº†ä¸€ä¸ªå°æ—¶ï¼Œä»–å–˜ç€æ°”ï¼Œé»˜é»˜å‘èª“ã€‚ 

 â€œææ··ï¼ -æˆ‘...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä»»åŠ¡è¶Šç®€å•ï¼Œæˆ‘å°±è¶Šå®¹æ˜“è¯¯è§£</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464951/"><img src="https://habrastorage.org/getpro/habr/post_images/614/756/ce6/614756ce63c0112265823c12415df1c5.png" alt="å›¾ç‰‡"><br><br> è¿™é¡¹çç¢çš„ä»»åŠ¡æ˜¯åœ¨æ˜ŸæœŸäº”çš„æŸä¸€å¤©å‘ç”Ÿçš„ï¼Œåº”è¯¥èŠ±è´¹2-3åˆ†é’Ÿã€‚ æ€»çš„æ¥è¯´ï¼Œä¸€å¦‚æ—¢å¾€ã€‚ <br><br> ä¸€ä½åŒäº‹è¦æ±‚æˆ‘åœ¨ä»–çš„æœåŠ¡å™¨ä¸Šä¿®å¤è„šæœ¬ã€‚ ä»–åšåˆ°äº†ï¼ŒæŠŠå®ƒé€’ç»™äº†ä»–ï¼Œç„¶åä¸ç»æ„åœ°æŠŠå®ƒä¸¢äº†ï¼šâ€œæ—¶é—´å¾ˆç´§ï¼Œåªæœ‰5åˆ†é’Ÿã€‚â€ å³ä½¿ä»–äº†è§£åŒæ­¥ï¼Œä»–çš„æœåŠ¡å™¨ã€‚ åŠä¸ªå°æ—¶è¿‡å»äº†ä¸€ä¸ªå°æ—¶ï¼Œä»–å–˜ç€æ°”ï¼Œé»˜é»˜å‘èª“ã€‚ <br><br>  â€œææ··ï¼  -æˆ‘æƒ³ï¼Œåˆ‡æ¢åˆ°æœåŠ¡å™¨æ§åˆ¶å°-å¥½å§ï¼Œæˆ‘è¿˜è¦å†ç­‰å‡ åˆ†é’Ÿã€‚â€ <br><br> æˆ‘ä»¬å‘ç°ï¼Œæœªå®‰è£…<i>ntpï¼Œrdateï¼Œsdwdate</i> ï¼Œ <i>timesyncdå·²</i>ç¦ç”¨ä¸”æœªè¿è¡Œã€‚ <br><br><pre><code class="plaintext hljs"># timedatectl Local time: Sun 2019-08-25 20:44:39 +03 Universal time: Sun 2019-08-25 17:44:39 UTC RTC time: Sun 2019-08-25 17:39:52 Time zone: Europe/Minsk (+03, +0300) NTP enabled: no NTP synchronized: no RTC in local TZ: no DST active: n/a</code> </pre> <br> æˆ‘åœ¨è¿™é‡Œç«‹å³æŒ‡å‡ºï¼Œç¡¬ä»¶æ—¶é—´æ˜¯æ­£ç¡®çš„ï¼šåœ¨æ­¤åŸºç¡€ä¸Šæ›´å®¹æ˜“å¯¼èˆªã€‚ <br><br> ä»è¿™é‡Œå¼€å§‹å‡ºç°äº†ä¸€ç³»åˆ—é”™è¯¯ã€‚ <br><a name="habracut"></a><br><h2> ç¬¬ä¸€ä¸ªé”™è¯¯ã€‚ è‡ªä¿¡å¿ƒ </h2><br>  Klats-klats ... <br><br><pre> <code class="plaintext hljs"># systemctl enable systemd-timesyncd.service &amp;&amp; systemctl start systemd-timesyncd.service &amp;&amp; ntpdate 0.ru.pool.ntp.org &amp;&amp; timedatectl set-ntp on &amp;&amp; timedatectl 25 Aug 21:00:10 ntpdate[28114]: adjust time server 195.210.189.106 offset -249.015251 sec Local time: Sun 2019-08-25 21:00:10 +03 Universal time: Sun 2019-08-25 18:00:10 UTC RTC time: Sun 2019-08-25 18:00:10 Time zone: Europe/Minsk (+03, +0300) NTP enabled: yes NTP synchronized: yes RTC in local TZ: no DST active: n/a</code> </pre><br> ä¸€åˆ‡éƒ½å¾ˆå¥½ï¼Œæ—¶é—´å·²åŒæ­¥ï¼Œç³»ç»Ÿä¸ç¡¬ä»¶é‡åˆã€‚  â€œæ¥ä¸‹ã€‚â€æˆ‘æ‰ä¸‹æ¥ï¼Œå›åˆ°è‡ªå·±çš„ç”Ÿæ„ä¸Šã€‚ <br><br>  â€œå¸¦èµ°äº†ä»€ä¹ˆï¼Ÿâ€  -åŒäº‹å¾ˆç”Ÿæ°”ã€‚  â€œæ—§æ—¶å…‰ï¼â€ <br><br> æ‚¨è¶Šè§£å†³å…¸å‹é—®é¢˜ï¼Œæ‚¨çš„æ€è€ƒå°±è¶Šå¼€å§‹ï¼Œæ‚¨ä¸ä¼šè®¤ä¸ºç™¾åˆ†ä¹‹ä¸€æˆ–åƒåˆ†ä¹‹ä¸€çš„æƒ…å†µä¼šæœ‰æ‰€ä¸åŒï¼Œä½†è¿™ä¸€æ¬¡æ²¡æœ‰ã€‚ <br><br><pre> <code class="plaintext hljs"># timedatectl Local time: Sun 2019-08-25 21:09:15 +03 Universal time: Sun 2019-08-25 18:09:15 UTC RTC time: Sun 2019-08-25 18:05:04 Time zone: Europe/Minsk (+03, +0300) NTP enabled: yes NTP synchronized: no RTC in local TZ: no DST active: n/a</code> </pre><br> ç³»ç»Ÿæ—¶é—´å†æ¬¡ä¸æ­£ç¡®ã€‚ <br><br> è®©æˆ‘ä»¬å†è¯•ä¸€æ¬¡ï¼š <br><br><pre> <code class="plaintext hljs"># ntpdate 0.ru.pool.ntp.org &amp;&amp; timedatectl &amp;&amp; sleep 1 &amp;&amp; timedatectl 25 Aug 21:07:37 ntpdate[30350]: step time server 89.175.20.7 offset -249.220828 sec Local time: Sun 2019-08-25 21:07:37 +03 Universal time: Sun 2019-08-25 18:07:37 UTC RTC time: Sun 2019-08-25 18:07:37 Time zone: Europe/Minsk (+03, +0300) NTP enabled: yes NTP synchronized: yes RTC in local TZ: no DST active: n/a Local time: Sun 2019-08-25 21:11:46 +03 Universal time: Sun 2019-08-25 18:11:46 UTC RTC time: Sun 2019-08-25 18:07:37 Time zone: Europe/Minsk (+03, +0300) NTP enabled: yes NTP synchronized: no RTC in local TZ: no DST active: n/a</code> </pre><br> è®©æˆ‘ä»¬åšä¸åŒçš„äº‹æƒ…ï¼š <br><br><pre> <code class="plaintext hljs"># date -s "2019-08-25 21:10:30" &amp;&amp; date &amp;&amp; sleep 1 &amp;&amp; timedatectl Sun Aug 25 21:10:30 +03 2019 Sun Aug 25 21:10:30 +03 2019 Local time: Sun 2019-08-25 21:14:36 +03 Universal time: Sun 2019-08-25 18:14:36 UTC RTC time: Sun 2019-08-25 18:10:30 Time zone: Europe/Minsk (+03, +0300) NTP enabled: yes NTP synchronized: no RTC in local TZ: no DST active: n/a</code> </pre><br> ä¾æ­¤ç±»æ¨ï¼š <br><br><pre> <code class="plaintext hljs"># hwclock --hctosys &amp;&amp; timedatectl &amp;&amp; sleep 1 &amp;&amp; timedatectl Local time: Sun 2019-08-25 21:11:31 +03 Universal time: Sun 2019-08-25 18:11:31 UTC RTC time: Sun 2019-08-25 18:11:31 Time zone: Europe/Minsk (+03, +0300) NTP enabled: yes NTP synchronized: yes RTC in local TZ: no DST active: n/a Local time: Sun 2019-08-25 21:15:36 +03 Universal time: Sun 2019-08-25 18:15:36 UTC RTC time: Sun 2019-08-25 18:11:32 Time zone: Europe/Minsk (+03, +0300) NTP enabled: yes NTP synchronized: no RTC in local TZ: no DST active: n/a</code> </pre><br> æ—¶é—´è®¾ç½®ä¸ºä¸€ç§’é’Ÿï¼Œç„¶åå†æ¬¡å¼€å§‹â€œå†²åŠ¨â€ã€‚ <br><br> åŒæ—¶ï¼Œåœ¨æ—¥å¿—ä¸­ï¼Œåœ¨è¿›è¡Œæ­¤ç±»æ‰‹åŠ¨æ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬ä»…çœ‹åˆ°ç³»ç»ŸæŠ¥å‘Šæ—¶é—´å·²åˆ†åˆ«æœæ­£ç¡®/é”™è¯¯æ–¹å‘æ›´æ”¹ï¼Œå¹¶ä¸”å¶å°”ä¼šä»systemd-timesyncdé‡æ–°åŒæ­¥ã€‚ <br><br><pre> <code class="plaintext hljs">Aug 25 21:18:51 wisi systemd[1]: Time has been changed Aug 25 21:18:51 wisi systemd-timesyncd[29258]: System time changed. Resyncing. Aug 25 21:18:51 wisi systemd[1187]: Time has been changed Aug 25 21:18:51 wisi systemd[1]: Time has been changed Aug 25 21:18:51 wisi systemd[1187]: Time has been changed</code> </pre><br> åœ¨è¿™é‡Œ <br><br><pre> <code class="plaintext hljs"># ps afx | grep "[1]187" 1187 ? Ss 0:02 /lib/systemd/systemd --user</code> </pre><br> åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œå·²ç»æœ‰å¿…è¦å¯»æ‰¾åŸå› ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨äº†18å¹´çš„å¤§è„‘ä¸­ï¼Œå·²ç»å‘å±•å‡ºâ€œæ—¶é—´â€é”™è¯¯çš„ç»Ÿè®¡æ•°æ®ï¼Œå¹¶ä¸”å‡ºäºä¹ æƒ¯å†æ¬¡å½’å’äºåŒæ­¥ã€‚ <br> å°†å…¶å®Œå…¨å…³é—­ã€‚ <br><br><pre> <code class="plaintext hljs"># timedatectl set-ntp off &amp;&amp; systemctl stop systemd-timesyncd.service # hwclock --hctosys &amp;&amp; timedatectl &amp;&amp; sleep 1 &amp;&amp; timedatectl Local time: Sun 2019-08-25 21:25:40 +03 Universal time: Sun 2019-08-25 18:25:40 UTC RTC time: Sun 2019-08-25 18:25:40 Time zone: Europe/Minsk (+03, +0300) NTP enabled: no NTP synchronized: no RTC in local TZ: no DST active: n/a Local time: Sun 2019-08-25 21:29:31 +03 Universal time: Sun 2019-08-25 18:29:31 UTC RTC time: Sun 2019-08-25 18:25:41 Time zone: Europe/Minsk (+03, +0300) NTP enabled: no NTP synchronized: no RTC in local TZ: no DST active: n/a</code> </pre><br> å¹¶åœ¨æ—¥å¿—ä¸­ <br><br><pre> <code class="plaintext hljs">Aug 25 21:25:40 wisi systemd[1]: Time has been changed Aug 25 21:25:40 wisi systemd[1187]: Time has been changed Aug 25 21:29:30 wisi systemd[1]: Time has been changed Aug 25 21:29:30 wisi systemd[1187]: Time has been changed</code> </pre><br>  <i>é‡æ–°åŒæ­¥</i>æ¶ˆå¤±äº†ï¼Œå…¶ä½™çš„æ—¥å¿—éƒ½æ˜¯åŸå§‹çš„ã€‚ <br><br> æˆ‘ä»¬åœ¨æ‰€æœ‰æ¥å£çš„123rdç«¯å£ä¸Šæ£€æŸ¥<i>tcpdump</i>è¾“å‡ºã€‚ æ²¡æœ‰ä»»ä½•è¯·æ±‚ï¼Œä½†æ˜¯æ—¶é—´ä¹Ÿè¶Šæ¥è¶Šå°‘ã€‚ <br><br><h2> ç¬¬äºŒä¸ªé”™è¯¯ã€‚ æ€¥é€Ÿ </h2><br> è·ç¦»å·¥ä½œå‘¨ç»“æŸè¿˜æœ‰ä¸€ä¸ªå°æ—¶çš„æ—¶é—´ï¼Œä½†æ˜¯æ‚¨ä¸æƒ³å¸¦ç€è¾›è‹¦çš„å·¥ä½œç¦»å¼€å‘¨æœ«ï¼ˆä¸è¦æ³¨æ„ä»£ç ä¸­çš„æ—¶é—´ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯åœ¨æ¥ä¸‹æ¥çš„å‡ å¤©å†™çš„ï¼‰ã€‚ <br> åœ¨è¿™é‡Œï¼Œæˆ‘æ²¡æœ‰å¯»æ‰¾åŸå› ï¼Œè€Œæ˜¯å¼€å§‹å°è¯•å¯¹ç»“æœè¿›è¡Œè§£é‡Šã€‚ æˆ‘è¯´â€œå‘æ˜â€æ˜¯å› ä¸ºæ— è®ºç»“æœçš„è§£é‡Šå¤šä¹ˆåˆç†ï¼Œè¿™éƒ½æ˜¯è§£å†³é—®é¢˜çš„é”™è¯¯æ–¹æ³•ã€‚ <br><br> è¯¥æœåŠ¡å™¨æ­£åœ¨æµå¼ä¼ è¾“å¹¶å°†DVB-S2æµè½¬æ¢ä¸ºIPã€‚  DVB-Sæµä¸­æœ‰æ—¶é—´æˆ³ï¼Œå› æ­¤æ¥æ”¶å™¨ï¼Œå¤šè·¯å¤ç”¨å™¨ï¼ŒåŠ æ‰°å™¨å’Œç”µè§†ç»å¸¸ä½¿ç”¨å®ƒä»¬æ¥åŒæ­¥ç³»ç»Ÿæ—¶é’Ÿã€‚  DVB-Sæ¿çš„é©±åŠ¨ç¨‹åºå·²ç¼–è¯‘åˆ°å†…æ ¸ä¸­ï¼Œå› æ­¤ï¼Œç¡®ä¿å¹²å‡€çš„DVB-S2æµçš„æœ€å¿«æ–¹æ³•æ˜¯æ–­å¼€æ¥è‡ªâ€œæ¿â€çš„ç”µç¼†ã€‚ å¹¸è¿çš„æ˜¯ï¼ŒæœåŠ¡å™¨å°±åœ¨å¢™åï¼Œå°±è¿™æ ·å§ã€‚ <br><br> å½“ç„¶ï¼Œå¦‚æœæ—¥å¿—ä¸­æœ‰åº”è¯¥åŒ…å«çš„å†…å®¹ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œä½†æ˜¯ï¼Œåœ¨æœ¬æ–‡ç»“å°¾å¤„ï¼Œè¿˜ä¼šæœ‰æ›´å¤šç›¸å…³å†…å®¹ã€‚ <br><br> å¥½å§ï¼Œç”±äºæˆ‘ä»¬å·²ç»åˆ é™¤äº†æ‰€æœ‰å«æ˜Ÿä¿¡å·ï¼Œå› æ­¤æˆ‘ä»¬è¿˜å°†åˆ é™¤åœ°é¢ä¿¡å·-åœ¨æ‹”å‡ºæ‰€æœ‰ç½‘ç»œç”µç¼†çš„è¿‡ç¨‹ä¸­ã€‚ æœåŠ¡å™¨ä¸å¤–ç•Œéš”ç¦»å¼€æ¥ï¼Œå¯ä»¥å®Œå…¨è‡ªä¸»è¿è¡Œï¼Œä½†æ˜¯ç³»ç»Ÿæ—¶é’Ÿä»ç„¶å¾ˆæ€¥ã€‚ <br><br> å·¥ä½œå‘¨å·²ç»ç»“æŸï¼Œæ—¥æœŸ/æ—¶é—´çš„é—®é¢˜å¹¶ä¸é‡è¦ï¼Œå› æ­¤æ‚¨å¯ä»¥å›å®¶ï¼Œä½†æ˜¯åœ¨è¿™é‡Œæˆ‘çŠ¯äº†ä¸€ä¸ªæ–°é”™è¯¯ã€‚ <br><br><h2> ç¬¬ä¸‰ä¸ªé”™è¯¯ã€‚ é¡¾é—® </h2><br> æ°¸ä¸ï¼ å¦‚æœè¦è·å¾—ç­”æ¡ˆï¼Œé™¤äº†ç ”ç©¶Googleç¬¬ä¸€é¡µçš„å‘è¡Œå’Œé˜…è¯»ä¸€é¡µman'aå†…å®¹ä¹‹å¤–ï¼Œåˆ‡å‹¿åœ¨è®ºå›å’Œä¸€èˆ¬ä¸“é—¨çš„ç½‘ç«™ä¸Šï¼ˆåœ¨stackoverflowä¸Šï¼‰æé—®ã€‚ <br><br> æ‚¨å°†è¢«é€å›googleï¼Œé˜…è¯»ç›¸åŒçš„æ–‡ç« ï¼Œå¹¶æµè¡Œåœ°è§£é‡Šè®ºå›/ç«™ç‚¹çš„è§„åˆ™ï¼Œä½†ä¸ä¼šç»™å‡ºç­”æ¡ˆã€‚ <br><br> æœ‰ä¸¤ä¸ªå®¢è§‚å› ç´ ï¼š <br><br><ul><li> é™¤äº†æ‚¨ä¹ŸçŸ¥é“é—®é¢˜ä¹‹å¤–ï¼Œæ²¡æœ‰äººï¼› </li><li> æ²¡æœ‰äººå¯ä»¥åœ¨ä¸æ‚¨ç›¸åŒçš„æ¡ä»¶ä¸‹è¿›è¡Œæµ‹è¯• </li></ul><br> å’Œä¸»è§‚çš„ï¼š <br><ul><li> æ‚¨å¯èƒ½æ²¡æœ‰ç»™å‡ºè§£å†³é—®é¢˜çš„æ‰€æœ‰æ„è§ï¼Œå› ä¸ºæ‚¨å·²ç»æå‡ºäº†â€œæ­£ç¡®â€çš„æ–¹å‘ï¼Œå¹¶é€šè¿‡åšæŒæ¥é˜æ˜é—®é¢˜çš„å®è´¨ï¼› </li><li> å¦‚æœå·¥å¤´æ˜¯é”™çš„ï¼Œå·¥å¤´ï¼ˆä¸»æŒäººï¼Œæ—§è®¡æ—¶å™¨ï¼Œç®¡ç†å‘˜ï¼‰æ€»æ˜¯å¯¹çš„â€¦â€¦å¥½å§ï¼Œä½ çŸ¥é“çš„â€¦â€¦ </li></ul><br> å¦‚æœæ‚¨åœ¨å›åº”è¯„è®ºæ—¶ä»åœç•™åœ¨å®¡æŸ¥è¯æ±‡è¡¨çš„æ¡†æ¶å†…ï¼Œé‚£ä¹ˆæ‚¨ä¼šå¾ˆç´§å¼ ã€‚ <br><br><h2> è§£å†³æ–¹æ¡ˆ </h2><br> æ— éœ€å°†ä»»åŠ¡åˆ’åˆ†ä¸ºç®€å•å’Œå¤æ‚ã€‚ <br><br> æˆ‘ä»¬ä¸å†ä¾é æˆ‘ä»¬çš„ç»éªŒï¼Œç»Ÿè®¡æ•°æ®ï¼Œé¡¾é—®ï¼Œè€Œæ˜¯å¼€å§‹ä¸â€œè§£é‡Šâ€æœ€ç»ˆç»“æœï¼Œè€Œæ˜¯å§‹ç»ˆå¦‚ä¸€åœ°å¯»æ‰¾åŸå› ã€‚ <br><br> ä¸€æ—¦æœ‰äººè®¾ç½®äº†æ—¶é—´ï¼Œå°±åº”è¯¥è¿›è¡Œé€‚å½“çš„ç³»ç»Ÿè°ƒç”¨ã€‚ <br><br> å°±åƒè½¯ä»¶æ–‡æ¡£ä¸­ä¸€æ ·ï¼Œæœ€å¥½çš„æ‰©å±•åæ˜¯æºï¼Œå› æ­¤åœ¨ç³»ç»Ÿç®¡ç†ä¸­ï¼Œæœ€å¥½çš„åŠ©æ‰‹æ˜¯å®¡æ ¸ï¼Œåœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­æ˜¯å®¡æ ¸ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æ€€ç–‘æ—¶åˆ»</b> <div class="spoiler_text"> æˆ‘é‡åˆ°äº†éº»çƒ¦ï¼Œä½†æ˜¯ä¸èƒ½å®Œå…¨ç¡®å®šLinuxçš„æ—¶é’Ÿåªèƒ½ç”±<i>clock_settime</i>å’Œ<i>settimeofday</i>è®¾ç½®ï¼Œå› æ­¤å¯¹äºç¬¬ä¸€ä¸ªæµ‹è¯•ï¼Œæˆ‘é€‰æ‹©äº†æ‰€æœ‰â€œé€‚å½“çš„â€è°ƒç”¨ï¼š <br><br><pre> <code class="plaintext hljs"># man syscalls | col | grep -F '(2)' | grep -vE '(:|;)' | grep -E '(time|date|clock)' | sed "s/(2).*//" | xargs -I SYSCALL echo "-S SYSCALL " | xargs echo -S adjtimex -S clock_adjtime -S clock_getres -S clock_gettime -S clock_nanosleep -S clock_settime -S futimesat -S getitimer -S gettimeofday -S mq_timedreceive -S mq_timedsend -S rt_sigtimedwait -S s390_runtime_instr -S setitimer -S settimeofday -S stime -S time -S timer_create -S timer_delete -S timer_getoverrun -S timer_gettime -S timer_settime -S timerfd_create -S timerfd_gettime -S timerfd_settime -S times -S utime -S utimensat -S utimes</code> </pre><br> å¹¶ä¸¢å¼ƒ<i>auditctl</i>æ— æ³•è¯†åˆ«çš„<i>s390_runtime_instrï¼Œstimeï¼Œtimerfd_create</i> ï¼Œæœ€åˆä»¥ä»¥ä¸‹å½¢å¼å¯åŠ¨å®¡æ ¸ï¼š <br><br><pre> <code class="plaintext hljs">auditctl -a exit,always -S adjtimex -S clock_adjtime -S clock_getres -S clock_nanosleep -S clock_settime -S futimesat -S getitimer -S gettimeofday -S mq_timedreceive -S mq_timedsend -S rt_sigtimedwait -S semtimedop -S setitimer -S settimeofday -S time -S timer_create -S timer_delete -S timer_getoverrun -S timer_gettime -S timer_settime -S timerfd_gettime -S timerfd_settime -S times -S utime -S utimensat -S utimes</code> </pre> <br> ç¡®ä¿åœ¨æˆ‘æ„Ÿå…´è¶£çš„æ—¥å¿—ä½ç½®ä¸­ï¼Œé™¤äº†è¿™ä¸¤ä¸ªä¹‹å¤–æ²¡æœ‰å…¶ä»–<i>ç³»ç»Ÿè°ƒç”¨</i> ï¼Œç„¶åä»…ä½¿ç”¨å®ƒä»¬ã€‚ <br></div></div><br> æˆ‘ä»¬å¼€å§‹å¯¹ç³»ç»Ÿè°ƒç”¨<i>clock_settime</i>å’Œ<i>settimeofday</i>çš„å®¡æ ¸ï¼Œå¹¶å°è¯•æ›´æ”¹æ—¥æœŸï¼š <br><br><pre> <code class="plaintext hljs"># auditctl -a exit,always -S clock_settime -S settimeofday &amp;&amp; date -s "2019-08-22 12:10:00" &amp;&amp; sleep 5 &amp;&amp; auditctl -D</code> </pre><br> æ·»åŠ äº†äº”ç§’é’Ÿçš„å»¶è¿Ÿï¼Œä»¥ç¡®ä¿æˆ‘ä»¬çš„â€œå¯„ç”Ÿè™«â€èƒ½å¤Ÿæ ¡æ­£æ—¶é—´ã€‚ <br><br> æˆ‘ä»¬çœ‹ä¸€ä¸‹æŠ¥å‘Šï¼š <br><br><pre> <code class="plaintext hljs"># aureport -s -i Syscall Report ======================================= # date time syscall pid comm auid event ======================================= Warning - freq is non-zero and incremental flushing not selected. 1. 08/22/2019 12:10:00 settimeofday 3088 chkcache_proces root 479630 2. 08/26/2019 09:37:06 clock_settime 1538 date root 479629</code> </pre><br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°äº†<i>æ—¥æœŸï¼Œ</i>è€Œ<i>chkcache_procesæ˜¯</i>æœªçŸ¥çš„ã€‚ äº‹å®è¯æ˜åœ¨ä¸Šé¢çš„æŠ¥å‘Šä¸­ï¼Œå› ä¸ºaureportåœ¨ä»äºŒè¿›åˆ¶è§†å›¾è½¬æ¢æ—¶æŒ‰æ—¥æœŸå¯¹è¾“å‡ºè¿›è¡Œæ’åºï¼Œå¹¶ä¸”è¯¥äº‹ä»¶å‘ç”Ÿåœ¨æˆ‘ä»¬å°†<i>æ—¥æœŸ</i>è®¾ç½®ä¸º<i>-sâ€œ 2019-08-22 12:10:00â€æ—¶</i> ã€‚ <br> è°ç”Ÿäº†ä»–ï¼Ÿ <br><br><pre> <code class="plaintext hljs"># ausearch -sc settimeofday --comm "chkcache_proces" ---- time-&gt;Thu Aug 22 12:10:00 2019 type=PROCTITLE msg=audit(1566465000.000:479630): proctitle="/usr/local/bin/oscam" type=SYSCALL msg=audit(1566465000.000:479630): arch=c000003e syscall=164 success=yes exit=0 a0=7fde0dfc6e60 a1=0 a2=136cf a3=713ba56 items=0 ppid=3081 pid=3088 auid=0 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=pts20 ses=68149 comm="chkcache_proces" exe="/usr/local/bin/oscam" key=(null)</code> </pre><br>  <i>/ usr / local / bin / oscam-</i>æ‰¾åˆ°äº†æˆ‘ä»¬çš„å¯„ç”Ÿè™«ã€‚ å°½ç®¡å­˜åœ¨â€œæ¶æ„â€è¡Œä¸ºï¼Œä½†æ— æ³•æ”¾å¼ƒæ¡ä»¶è®¿é—®ç³»ç»Ÿï¼Œä½†æ˜¯æˆ‘ä»ç„¶æƒ³çŸ¥é“<i>oscam</i> ï¼ŒWTFå—ï¼Ÿ <br><br> ç­”æ¡ˆå¯ä»¥åœ¨<a href="">æºä»£ç ä¸­</a>å¿«é€Ÿæ‰¾åˆ°ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> defined(CLOCKFIX) </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (tv.tv_sec &gt; lasttime.tv_sec || (tv.tv_sec == lasttime.tv_sec &amp;&amp; tv.tv_usec &gt;= lasttime.tv_usec)) </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// check for time issues! { lasttime = tv; // register this valid time } else { tv = lasttime; settimeofday(&amp;tv, NULL); // set time back to last known valid time //fprintf(stderr, "*** WARNING: BAD TIME AFFECTING WHOLE OSCAM ECM HANDLING, SYSTEMTIME SET TO LAST KNOWN VALID TIME **** \n"); }</span></span></span></span></code> </pre><br>  <b>æ³¨é‡Šæ‰çš„</b> <b>è­¦å‘Š</b>çº¿åœ¨è¿™é‡Œçœ‹èµ·æ¥æœ‰å¤šå¥½... </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN464951/">https://habr.com/ru/post/zh-CN464951/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN464933/index.html">Androidæ“ä½œç³»ç»Ÿä¸Šçš„ç”µå­ä¹¦åº”ç”¨ç¨‹åºã€‚ ç¬¬4éƒ¨åˆ†ã€‚æ¸¸æˆ</a></li>
<li><a href="../zh-CN464935/index.html">èˆ’é€‚çš„DevOpsSecï¼šé€‚ç”¨äºNGINXçš„Nemesida WAF Freeï¼Œå…·æœ‰APIå’Œä¸ªäººå¸æˆ·</a></li>
<li><a href="../zh-CN464937/index.html">ï¼ƒ312ç§»åŠ¨å¼€å‘äººå‘˜çš„æœ‰è¶£ææ–™æ‘˜è¦ï¼ˆ8æœˆ19æ—¥è‡³25æ—¥ï¼‰</a></li>
<li><a href="../zh-CN464939/index.html">æµ‹è¯•@ NonNull / @ Nullableæ‰¹æ³¨</a></li>
<li><a href="../zh-CN464949/index.html">å†ä¸€æ¬¡ä»‹ç»GCDï¼Œæ¬§å‡ é‡Œå¾—ç®—æ³•å’Œä¸€èˆ¬ç®—æ³•çš„å†å²ã€‚ å½“ç„¶æœ‰Swiftçš„ä¾‹å­</a></li>
<li><a href="../zh-CN464955/index.html">é“è¿ˆå…‹Â·æ³°æ£®ï¼ˆIron Mike Tysonï¼‰å’ŒåŒºå—é“¾é¡¹ç›®ã€Šå¥‹æ–—æˆåã€‹</a></li>
<li><a href="../zh-CN464959/index.html">è§£æä¿„è¯­å¥å­</a></li>
<li><a href="../zh-CN464961/index.html">åœ¨Unity UIä¸­åˆ›å»ºå¯è§†ç»„ä»¶ã€‚ ç²’å­ç³»ç»Ÿ</a></li>
<li><a href="../zh-CN464963/index.html">åœ¨Quest Foglightä¸­å¿«é€Ÿå®šä½Microsoft SQL Serveræ€§èƒ½é—®é¢˜</a></li>
<li><a href="../zh-CN464965/index.html">å‰ç«¯æ¯å‘¨æ‘˜è¦ï¼ˆ2019å¹´8æœˆ19æ—¥è‡³25æ—¥ï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>