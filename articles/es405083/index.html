<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåâ ü§ôüèΩ üö£üèΩ Hackear c√°maras CCTV en la pr√°ctica üèáüèª üôÇ üéÖüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Los fan√°ticos de la pel√≠cula Ocean's Eleven Friends deben haber reconocido el marco que elegimos para ilustrar este art√≠culo. El momento en que los ti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hackear c√°maras CCTV en la pr√°ctica</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/devline/blog/405083/">  Los fan√°ticos de la pel√≠cula Ocean's Eleven Friends deben haber reconocido el marco que elegimos para ilustrar este art√≠culo.  El momento en que los tipos duros reemplazaron h√°bilmente la se√±al anal√≥gica de las c√°maras CCTV del casino lleg√≥ a la mente de muchos.  Algunos incluso intentan hacer esto en la vida real. <br><br><img src="https://habrastorage.org/web/121/cd6/5f9/121cd65f9c634829977ee5eb5de23af4.jpg" alt="imagen"><br><br>  Las tecnolog√≠as han cambiado, ahora las c√°maras IP son preferibles a las anal√≥gicas, los m√©todos para romperlas se analizar√°n en detalle m√°s adelante. <br><br><h3>  Si no eres paranoico, esto no significa que no est√©s siendo observado </h3><br>  La mayor√≠a de los hackers hacen esto por diversi√≥n o para obtener un poco de fama en Internet.  Utilizan "agujeros" bien conocidos en los sistemas de soporte de c√°mara y publican, en su opini√≥n, videos divertidos en recursos populares de Internet.  YouTube est√° repleto de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">videos</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">similares</a> . <br><br>  Consideraremos las consecuencias m√°s graves de la vulnerabilidad, especialmente cuando el cracker no se traiciona a s√≠ mismo ni a su penetraci√≥n en el sistema.  Tal ataque generalmente se planifica cuidadosamente por adelantado, una semana o incluso un mes antes del ataque. <br><br>  Como en nuestro ejemplo de Ocean Eleven, hablaremos sobre reemplazar una transmisi√≥n en sistemas de videovigilancia, no solo una se√±al anal√≥gica, sino digital, es decir, una transmisi√≥n RTSP. <br><a name="habracut"></a><br>  Dado que toda la informaci√≥n en este art√≠culo es de naturaleza informativa y est√° dirigida principalmente a eliminar errores de seguridad al construir un sistema de videovigilancia, no recomendamos utilizar la vulnerabilidad, que se analiza m√°s adelante.  Es por eso que el pirateo de la red de videovigilancia se considerar√° solo superficialmente y los m√©todos descritos implican el acceso abierto a la red de la empresa o persona privada.  Recuerde que el acceso no autorizado a los datos puede ser procesado. <br><br>  La experiencia de nuestra empresa muestra que el tema es muy relevante, ya que en la etapa de puesta en servicio de un sistema de videovigilancia, muchas personas conectan c√°maras a su sistema mediante enlaces RTSP.  Ya sea para ahorrar tiempo, ya sea por ignorancia o por estar seguros de que es necesario, muchos ni siquiera piensan en cambiar las contrase√±as o ver qu√© configuraciones de seguridad admite su c√°mara. <br><br>  Por cierto, RTSP (Real Time Streaming Protocol) es un protocolo que le permite controlar la transmisi√≥n de video en tiempo real.  Todo lo que necesitamos saber al respecto es que con la ayuda del enlace RTSP tomaremos la transmisi√≥n de video de la c√°mara. <br><br>  Finalmente, tenemos que <b>practicar</b> , es decir, el plan seg√∫n el cual actuaremos: <br><br>  1. Obtener el enlace RTSP para la c√°mara cuyo flujo queremos reemplazar. <br>  2. Preparaci√≥n del archivo de video para su posterior transmisi√≥n. <br>  3. Transmita el archivo grabado. <br>  4. Protecci√≥n contra el intercambio secundario de flujo. <br><br><h3>  Obteniendo RTSP URI Stream </h3><br>  Para reemplazar la se√±al de la c√°mara, primero debe encontrar la transmisi√≥n de video que necesitamos.  Esto requerir√° un enlace a trav√©s del protocolo RTSP.  La c√°mara generalmente transmite m√∫ltiples im√°genes (alta y baja resoluci√≥n).  El primero se usa para grabar y el segundo, para transmitir en pantallas de video vigilancia.  La resoluci√≥n m√≠nima (m√°s a menudo 320 por 240 p√≠xeles) reduce la carga en el equipo.  Para cada flujo RTSP, el enlace a menudo se distingue por un d√≠gito en la clave. <br><br>  Las diferentes c√°maras pueden tener diferentes enlaces RTSP, pero la vista general es aproximadamente la siguiente: <br>  <b>rtsp: // [inicio de sesi√≥n: contrase√±a @] direcci√≥n IP: puerto RTSP [/ clave]</b> . <br><br>  La decodificaci√≥n es la siguiente: <br><br><ul><li>  inicio de sesi√≥n y contrase√±a: aquellos que se utilizan para acceder a la c√°mara (pueden no serlo); </li><li>  si el enlace contiene el nombre de usuario y la contrase√±a, el s√≠mbolo @ se indica despu√©s de ellos para separar la autorizaci√≥n y la direcci√≥n IP; </li><li>  El puerto RTSP a trav√©s del cual se transmiten los comandos de control de transmisi√≥n de video es 554 por defecto; </li><li>  la clave es una parte √∫nica del enlace RTSP, que puede variar seg√∫n el fabricante y el modelo de la c√°mara, por ejemplo: <br>  /? user = admin &amp; password = admin &amp; channel = channel_number &amp; stream = stream_number.sdp <br>  /play1.sdp: en lugar de "1" se indica el n√∫mero de secuencia; <br>  / live / ch00_0 00 - n√∫mero de canal, 0 - n√∫mero de transmisi√≥n; <br>  / canal1: en lugar de ‚Äú1‚Äù se indica el n√∫mero de transmisi√≥n. </li></ul><br>  <b>¬øC√≥mo encontrar un enlace RTSP sin tener acceso a la c√°mara?</b>  Algunas formas simples: <br><br>  1. Encuentre el enlace en el sitio web del fabricante de la c√°mara. <br>  2. Busque en Internet sitios que proporcionen enlaces para diferentes modelos de c√°maras, un ejemplo de dichos sitios <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br>  3. Descargue el manual del usuario en el sitio web del fabricante y encuentre la informaci√≥n necesaria all√≠. <br><br>  Para los casos en que ninguno de los m√©todos simples ha ayudado, hay un poco m√°s complicado.  Aqu√≠ se necesitar√° al menos acceso a la red donde se encuentra la c√°mara.  Como la mayor√≠a de las c√°maras modernas admiten ONVIF, podemos encontrar el enlace RTSP utilizando este protocolo. <br>  Para hacer esto, env√≠e m√∫ltiples solicitudes sin autorizaci√≥n o con autorizaci√≥n en la c√°mara propuesta de forma predeterminada, por ejemplo, "admin: admin" o "admin: 12345".  Por cierto, en la pr√°ctica hab√≠a c√°maras que ten√≠an un filtro de direcci√≥n IP v√°lido y un nombre de usuario y contrase√±a no est√°ndar, pero debido a errores en el firmware al acceder a trav√©s del protocolo ONVIF, no se verificaron ni la autorizaci√≥n ni el filtro. <br><br>  <b>¬øC√≥mo obtener el enlace deseado a ambas transmisiones desde la c√°mara a trav√©s del protocolo ONVIF?</b> <br><br><div class="spoiler">  <b class="spoiler_title">1. Usando el comando GetProfiles, descubrimos el nombre del perfil cuya uri necesitamos</b> <div class="spoiler_text"><pre> POST / onvif / media_service HTTP / 1.1
 Anfitri√≥n: 192.168.1.77
 Usuario-Agente: gSOAP / 2.8
 Tipo de contenido: aplicaci√≥n / jab√≥n + xml;  juego de caracteres = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetProfiles"
 Longitud del contenido: 2120
 Conexi√≥n: mantener vivo
 SOAPAction: "http://www.onvif.org/ver10/media/wsdl/GetProfiles"<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Sobre xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    Omita la descripci√≥n de todo el espacio de nombres.
                    .
                    xmlns: trt = "http://www.onvif.org/ver10/media/wsdl"&gt;
     &lt;SOAP-ENV: Encabezado&gt; &lt;/ SOAP-ENV: Encabezado&gt;
     &lt;SOAP-ENV: Cuerpo&gt;
         &lt;trt: GetProfiles /&gt;
     &lt;/ SOAP-ENV: Cuerpo&gt;
 &lt;/ SOAP-ENV: Sobre&gt;
</pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">2. En la respuesta larga recibida encontramos una l√≠nea con el nombre del primer y segundo perfil</b> <div class="spoiler_text"><pre> HTTP / 1.1 200 OK
 Servidor: gSOAP / 2.8
 Tipo de contenido: aplicaci√≥n / jab√≥n + xml;  juego de caracteres = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetProfiles"
 Longitud del contenido: 17405
 Conexi√≥n: cerrar<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Sobre xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    Omita la descripci√≥n de todo el espacio de nombres.
                    .
                    xmlns: tns1 = "http://www.onvif.org/ver10/topics"&gt;
     &lt;SOAP-ENV: Encabezado&gt; &lt;/ SOAP-ENV: Encabezado&gt;
     &lt;SOAP-ENV: Cuerpo&gt;
         &lt;trt: GetProfilesResponse&gt;
             &lt;trt: Perfiles fijos = "true" token = "profile_cam1_stream1"&gt;
                 &lt;tt: Nombre&gt; profile_cam1_stream1 &lt;/ tt: Nombre&gt;
                 &lt;tt: VideoSourceConfiguration token = "videosource_config_cam1"&gt;
                     &lt;tt: Nombre&gt; videosource_config_cam1 &lt;/ tt: Nombre&gt;
                     .
                     Omitir descripci√≥n del perfil.
                     .
             &lt;/ trt: Perfiles&gt;
             &lt;trt: Perfiles fijos = "true" token = "profile_cam1_stream2"&gt;
                 &lt;tt: Nombre&gt; profile_cam1_stream2 &lt;/ tt: Nombre&gt;
                 .
                 Nos saltamos la descripci√≥n del segundo perfil.
                 .
             &lt;/ trt: Perfiles&gt;
             .
             No consideramos el tercer perfil.
             .
         &lt;/ trt: GetProfilesResponse&gt;
     &lt;/ SOAP-ENV: Cuerpo&gt;
 &lt;/ SOAP-ENV: Sobre&gt;<font></font>
<font></font>
 - profile_cam1_stream1 es el nombre del primer perfil en la c√°mara.
 - profile_cam1_stream2 es el nombre del segundo perfil en la c√°mara.
</pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">3. Ahora debe solicitar rtsp uri para estos perfiles utilizando el comando GetStreamUri, especificando el perfil deseado en el campo ProfileToken</b> <div class="spoiler_text"><pre> Ejemplo para el primer hilo:<font></font>
<font></font>
 POST / onvif / media_service HTTP / 1.1
 Anfitri√≥n: 192.168.1.77
 Usuario-Agente: gSOAP / 2.8
 Tipo de contenido: aplicaci√≥n / jab√≥n + xml;  juego de caracteres = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetStreamUri"
 Longitud del contenido: 2479
 Conexi√≥n: mantener vivo
 SOAPAction: "http://www.onvif.org/ver10/media/wsdl/GetStreamUri"<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Sobre xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    Omita la descripci√≥n de todo el espacio de nombres.
                    .
                    xmlns: trt = "http://www.onvif.org/ver10/media/wsdl"&gt;
     &lt;SOAP-ENV: Encabezado&gt; &lt;/ SOAP-ENV: Encabezado&gt;
     &lt;SOAP-ENV: Cuerpo&gt;
         &lt;trt: GetStreamUri&gt;
             &lt;trt: StreamSetup xsi: type = "tt: StreamSetup"&gt;
                 &lt;tt: Stream xsi: type = "tt: StreamType"&gt; RTP-Unicast &lt;/ tt: Stream&gt;
                 &lt;tt: Transport xsi: type = "tt: Transport"&gt;
                     &lt;tt: Protocolo xsi: type = "tt: TransportProtocol"&gt; UDP &lt;/ tt: Protocolo&gt;
                 &lt;/ tt: Transporte&gt;
             &lt;/ trt: StreamSetup&gt;
             &lt;trt: ProfileToken xsi: type = "tt: ReferenceToken"&gt; profile_cam1_stream1 &lt;/ trt: ProfileToken&gt;
         &lt;/ trt: GetStreamUri&gt;
     &lt;/ SOAP-ENV: Cuerpo&gt;
 &lt;/ SOAP-ENV: Sobre&gt;<font></font>
<font></font>
 En respuesta, obtenemos el enlace que necesitamos:<font></font>
<font></font>
 HTTP / 1.1 200 OK
 Servidor: gSOAP / 2.8
 Tipo de contenido: aplicaci√≥n / jab√≥n + xml;  juego de caracteres = utf-8;  action = "http://www.onvif.org/ver10/media/wsdl/GetStreamUri"
 Longitud del contenido: 3701
 Conexi√≥n: cerrar<font></font>
<font></font>
 &lt;? xml version = "1.0" encoding = "UTF-8"?&gt;
 &lt;SOAP-ENV: Sobre xmlns: SOAP-ENV = "http://www.w3.org/2003/05/soap-envelope"
                    .
                    Omita la descripci√≥n de todo el espacio de nombres.
                    .
                    xmlns: tns1 = "http://www.onvif.org/ver10/topics"&gt;
     &lt;SOAP-ENV: Encabezado&gt; &lt;/ SOAP-ENV: Encabezado&gt;
     &lt;SOAP-ENV: Cuerpo&gt;
         &lt;trt: GetStreamUriResponse&gt;
             &lt;trt: MediaUri&gt;
                 &lt;tt: Uri&gt; rtsp: //192.168.1.77: 554 / snl / live / 1/1 &lt;/ tt: Uri&gt;
                 &lt;tt: InvalidAfterConnect&gt; false &lt;/ tt: InvalidAfterConnect&gt;
                 &lt;tt: InvalidAfterReboot&gt; false &lt;/ tt: InvalidAfterReboot&gt;
                 &lt;tt: Tiempo de espera&gt; PT0S &lt;/ tt: Tiempo de espera&gt;
             &lt;/ trt: MediaUri&gt;
         &lt;/ trt: GetStreamUriResponse&gt;
     &lt;/ SOAP-ENV: Cuerpo&gt;
 &lt;/ SOAP-ENV: Sobre&gt;<font></font>
<font></font>
 Hacemos lo mismo para la segunda transmisi√≥n y obtenemos el enlace:
 &lt;tt: Uri&gt; rtsp: //192.168.1.77: 554 / snl / live / 1/2 &lt;/ tt: Uri&gt;
</pre><br></div></div><br><h3>  Escribir secuencia RTSP en el archivo </h3><br>  Cuando obtuvimos los enlaces rtsp necesarios, necesitamos grabar un video transmitido por ellos que dure varias horas.  No olvide que el doble subproceso se utiliza en los sistemas modernos, por lo que debe grabar ambas transmisiones al mismo tiempo. <br><br>  Puede grabar una transmisi√≥n de video usando el protocolo RTSP usando varios programas.  Considere los m√°s populares: <b>ffmpeg, gstreamer y vlc</b> . <br><br><div class="spoiler">  <b class="spoiler_title">1. Grabaci√≥n en tiempo real a trav√©s de ffmpeg</b> <div class="spoiler_text"><pre> $ man ffmpeg
 Estamos interesados ‚Äã‚Äãen:
 - vcodec copy - copia video al archivo;
 - copia acodec - copia de audio a un archivo;
 - rtsp_transport tcp - selecci√≥n de un m√©todo para transmitir un flujo;
 - r 25 - ajuste de la velocidad de fotogramas por segundo;
 - copias - copia de marcas de tiempo;
 - start_at_zero - copiar marcas de tiempo a partir de 00: 00: 00: 000<font></font>
<font></font>
 Sustituimos nuestro enlace RTSP y a trav√©s de la copia especificamos la ruta y el nombre del archivo al que ir√° el registro
 % ffmpeg -i rtsp: //192.168.1.77: 554 / snl / live / 1/1 -copyts -start_at_zero -rtsp_transport tcp -r 25 -vcodec copy -acodec copy /home/line/example/1.avi
</pre><br><img src="https://habrastorage.org/web/6a1/d19/f7f/6a1d19f7fe8b4153823d0307adccf174.png" alt="imagen"><br><br>  La escritura en un archivo ha comenzado. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">2. Grabaci√≥n a trav√©s de vlc</b> <div class="spoiler_text"><pre> Puede familiarizarse con el conjunto de comandos que el reproductor multimedia vlc nos ofrece utilizando el comando
 $ vlc ‚Äìh.<font></font>
<font></font>
 Estamos interesados ‚Äã‚Äãen:
 - sout = # file {ruta} - se√±ala el archivo en el que queremos copiar el video;
 - rtsp-tcp - recibe rtsp por tcp;
 - rtsp-frame-buffer-size = 1000 - buffer para que el video no se desmorone durante la reproducci√≥n;
 - h264-fps = 25 - complemento para 25 cuadros.<font></font>
<font></font>
 Sustituir nuestros datos y ejecutar
 $ cvlc rtsp: //192.168.1.77: 554 / snl / live / 1/1 --rtsp-tcp --rtsp-frame-buffer-size = 1000 --h264-fps = 25: sout = # file {dst = /home/line/example/1.avi}.<font></font>
<font></font>
 La ventana vlc se abrir√° y comenzar√° la grabaci√≥n; cuando cierre la ventana, la grabaci√≥n se detendr√°.
</pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">3. Grabaci√≥n a trav√©s de gstreamer</b> <div class="spoiler_text"><pre> Puede encontrar informaci√≥n sobre c√≥mo trabajar con gstreamer &lt;a href="https://gstreamer.freedesktop.org/documentation/plugins.html"&gt; aqu√≠ &lt;/a&gt;.
 - rtspsrc location = "rtsp: //192.168.1.91: 554 / cam / realmonitor? Channel = 1 &amp; subtype = 0 &amp; unicast = true &amp; proto = Onvif" - especifique la secuencia RTSP como fuente de datos.
 - rtph264depay - en el video RTSP va en pedazos peque√±os (paquetes rtp), a trav√©s de rtph264depay recibiremos video de estos paquetes.
 - h264parse: como su nombre lo indica, analice la secuencia H.264.
 - avimux: recopila la transmisi√≥n en avi, tambi√©n puedes usar mp4mux o matroskamux (mkv).
 - ubicaci√≥n del archivo = 1.avi: especifique el archivo en el que se guardar√° el video.<font></font>
<font></font>
 gst-launch-1.0 -v rtspsrc location = "rtsp: //192.168.1.91: 554 / cam / realmonitor? channel = 1 &amp; subtype = 0 &amp; unicast = true &amp; proto = Onvif"!  rtph264depay!  h264parse!  mp4mux!  ubicaci√≥n del disquete de archivos = 1.mp4
</pre><br><img src="https://habrastorage.org/web/032/b02/115/032b021155034149bc35e8068548d5eb.png" alt="imagen"><br></div></div><br><h3>  Transmitir transmisi√≥n RTSP desde un archivo </h3><br>  Es hora de comenzar a transmitir el archivo grabado en formato RTSP.  Para hacer esto, utilizaremos los mismos programas discutidos en la secci√≥n anterior. <br><br>  1. Para transmitir una transmisi√≥n de video desde la c√°mara usando ffmpeg, debe usar ffserver.  Su descripci√≥n se puede encontrar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> .  Para establecer los par√°metros de traducci√≥n, es necesario <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">completar el archivo</a> ffserver.conf. <br><br><div class="spoiler">  <b class="spoiler_title">ffserver</b> <div class="spoiler_text"><pre> Archivo Ffserver.conf
 RTSPPort: establece el n√∫mero del puerto rtsp a trav√©s del cual se transmitir√° la transmisi√≥n.
 &lt;Stream snl / live / 1/1&gt;: despu√©s de Stream configuramos la clave necesaria.
 Formato rtp: formato de transmisi√≥n.
 Archivo "/home/line/example/1.avi" - rtsp_transport tcp - especifique la ruta al archivo que desea transferir y la clave para transferir a trav√©s de tcp.
 No Audio: no transmite sonido.<font></font>
<font></font>
 Archivo Ffserver.conf<font></font>
<font></font>
 RTSPPort 554<font></font>
<font></font>
 &lt;Stream snl / live / 1/1&gt;
 Formato rtp
 Archivo "/home/line/example/1.avi" -rtsp_transport tcp
 NoAudio 
 &lt;/Stream&gt;
 A continuaci√≥n, ejecute% ffserver -f ffserver.conf.
</pre><br><img src="https://habrastorage.org/web/bff/0c4/0bb/bff0c40bb4b5431fb1b564ed19d442c7.png" alt="imagen"><br></div></div><br>  2. Ahora usaremos el reproductor vlc-media.  A pesar de que esta es la forma m√°s f√°cil, desafortunadamente, vlc solo puede transmitir una transmisi√≥n a trav√©s de UDP. <br><br><div class="spoiler">  <b class="spoiler_title">reproductor multimedia vlc</b> <div class="spoiler_text"><pre> Comando para iniciar la transmisi√≥n rtsp:
 - sout = # rtp {sdp = rtsp: //192.168.1.232: 554 / snl / live / 1/1} - establece el enlace por el cual se realizar√° la transmisi√≥n.
 - repetir: si es necesario, configure el video para que se reproduzca repetidamente.
 vlc /home/line/example/1.avi --sout = # rtp {sdp = rtsp: //192.168.1.232: 554 / snl / live / 1/1} ‚Äîrepeat
</pre><br></div></div><br>  3. Finalmente, usando gst-server. <br><br><div class="spoiler">  <b class="spoiler_title">servidor gst</b> <div class="spoiler_text"><pre> Primero necesitas instalarlo.
 $ sudo apt-get install gstreamer1.0
 $ wget https://gstreamer.freedesktop.org/src/gst-rtsp-server/gst-rtsp-server-1.8.3.tar.xz
 /gst-rtsp-server-1.8.3$ sudo apt install gtk-doc-tools
 /gst-rtsp-server-1.8.3$ sudo apt-get install libgstreamer-plugins-base1.0-dev
 /gst-rtsp-server-1.8.3$ make
 Ahora podemos cambiar el archivo /gst-rtsp-server-1.8.3/examples/test-launch.c
 Aqu√≠ puede cambiar el puerto RTSP predeterminado
 #define DEFAULT_RTSP_PORT "8554"
 y la clave est√° en el enlace
 gst_rtsp_mount_points_add_factory (montajes, "/ prueba", f√°brica).
 Despu√©s de sustituir nuestros valores, haremos.
 Ahora ejecute el archivo de inicio de prueba con las teclas.
 - rtspsrc location = "/ home / line / example / 1.avi" - la ruta al archivo que vamos a reproducir.
 - Codificador H264 - codifica en h.264.
 - rtph264pay name = pay0 pt = 96 - divide nuestra secuencia en partes.
 $ ~ / gst-rtsp-server-1.8.3 / examples $ ./test-launch "(rtspsrc location =" / home / line / example / 1.avi "! x264enc! rtph264pay name = pay0 pt = 96)"
</pre><br></div></div><br>  El archivo grabado se transmite en formato RTSP, luego de lo cual resolvemos el problema de falla de la c√°mara.  A continuaci√≥n hay algunas opciones que var√≠an seg√∫n el objeto que queremos atacar.  De hecho, hay muchas m√°s formas, considere solo las m√°s b√°sicas.  Lo primero que necesitamos es ingresar a la red que necesitamos. <br><br>  Si el objeto es grande territorialmente, a menudo existe la oportunidad de acercarse f√≠sicamente a algunas c√°maras e incluso tratar de encontrar el equipo de conmutaci√≥n al que est√° conectada la c√°mara. <br><br>  Si el objeto es peque√±o, puede intentar ingresar a la red a trav√©s de wi-fi y escanearlo usando nmap, por ejemplo. <br><br>  Adem√°s, si hay acceso f√≠sico a la c√°mara, puede piratearla en varias etapas con una computadora de placa √∫nica: <br><br>  1) habilitar la grabaci√≥n de wireshark; <br>  2) desconecte brevemente el cable de la c√°mara y con√©ctelo a una sola placa; <br>  3) devuelva el cable a su lugar; <br>  4) estudiar los registros recibidos. <br><br>  O si tiene acceso a la red, puede usar el m√©todo cl√°sico de sustituci√≥n: <br><br>  - utilizando el soporte arpspoof entre la c√°mara y el servidor; <br>  - use ip_forward para reenviar solicitudes del servidor de vigilancia a la c√°mara IP, y viceversa; <br>  - El uso de iptables redirige todas las solicitudes a trav√©s del puerto RTSP al servidor de vigilancia, no desde la c√°mara, sino desde nuestra m√°quina. <br><br><h3>  Hackear c√°maras de seguridad </h3><br>  Para protegerse de la suplantaci√≥n de hilos de acuerdo con el procedimiento descrito anteriormente, se pueden utilizar varios m√©todos: <br><br>  <b>1. Integraci√≥n de c√°mara</b> <br>  La mayor protecci√≥n la proporciona la integraci√≥n de la c√°mara en un producto de software.  Compruebe si su c√°mara est√° integrada con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el sistema de vigilancia Line</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br>  Si su c√°mara o fabricante no est√° en la lista, puede contactar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">al soporte t√©cnico</a> para solicitar la integraci√≥n de su modelo de c√°mara IP. <br><br>  <b>2. Actualizaci√≥n de firmware</b> <br>  Es necesario mantener constantemente actualizado el firmware de la c√°mara, ya que con la ayuda de actualizaciones, los desarrolladores corrigen varias vulnerabilidades y, por lo tanto, aumentan la estabilidad de las c√°maras. <br><br>  <b>3. Cambio de inicios de sesi√≥n y contrase√±as est√°ndar</b> <br>  Lo primero que hace un atacante es intentar usar el nombre de usuario y la contrase√±a est√°ndar de la c√°mara.  Est√°n indicados en las instrucciones de uso, por lo que encontrarlos no es dif√≠cil.  Por lo tanto, use siempre un nombre de usuario y contrase√±a √∫nicos. <br><br>  <b>4. Habilitaci√≥n de la autorizaci√≥n obligatoria</b> <br>  Esta caracter√≠stica est√° presente en muchas c√°maras modernas, pero, desafortunadamente, no todos los usuarios lo saben.  Si deshabilita esta opci√≥n, la c√°mara no solicitar√° autorizaci√≥n cuando est√© conectada a ella, lo que la har√° vulnerable a la pirater√≠a.  Vale la pena se√±alar que hay c√°maras con doble autorizaci√≥n para acceso http y para acceso a trav√©s del protocolo ONVIF.  Adem√°s, en algunas c√°maras hay una configuraci√≥n separada para la solicitud de autorizaci√≥n cuando se conecta a trav√©s de un enlace RTSP directo. <br><br>  <b>5. Filtro de direcci√≥n IP</b> <br>  Si la c√°mara admite la funci√≥n de la llamada lista blanca, es mejor no descuidarla.  Con su ayuda, se determina la direcci√≥n IP desde la cual puede conectarse a la c√°mara.  Esta deber√≠a ser la direcci√≥n del servidor al que est√° conectada la c√°mara y, si es necesario, la segunda direcci√≥n IP de la estaci√≥n de trabajo desde la que se realiza la configuraci√≥n.  Pero este no es el m√©todo m√°s confiable, ya que un atacante puede usar la misma direcci√≥n IP al reemplazar un dispositivo.  Por lo tanto, es mejor usar esta opci√≥n junto con otras recomendaciones. <br><br>  <b>6. Protecci√≥n de red</b> <br>  Es necesario configurar correctamente el equipo de conmutaci√≥n.  La mayor√≠a de los conmutadores ahora admiten la protecci√≥n contra la falsificaci√≥n de arp; aseg√∫rese de usar esto. <br><br>  <b>7. Compartir redes</b> <br>  Debe prestar especial atenci√≥n a este elemento, ya que juega un papel importante en la seguridad de su sistema.  La separaci√≥n de la red empresarial y la red de vigilancia lo proteger√° de intrusos o incluso de sus propios empleados que tienen acceso a la red compartida y quieren hackearlo. <br><br>  <b>8. Activando el men√∫ OSD</b> <br>  Debe habilitar el men√∫ OSD con la hora y fecha actuales en la c√°mara para que siempre pueda verificar la relevancia de la imagen.  Esta es una buena manera de protegerse contra el cambio del metraje, ya que el OSD se superpone a todo el video que proviene de una c√°mara espec√≠fica.  Incluso cuando un atacante escribe la transmisi√≥n RTSP, la suplantaci√≥n de identidad ser√° notable gracias a los datos que a√∫n permanecer√°n en los cuadros de video. <br><br>  Desafortunadamente, muchos atacantes han aprendido a encontrar y aprovechar r√°pidamente las vulnerabilidades en los sistemas de videovigilancia IP.  Para asegurar la red, es necesario familiarizarse con los m√©todos de protecci√≥n descritos en este art√≠culo.  Permita suficiente tiempo para la puesta en marcha del sistema y, en particular, para configurar correctamente todos sus componentes.  Para que pueda proporcionar a la red la m√°xima seguridad contra la pirater√≠a. <br><br>  <b>En conclusi√≥n, le sugerimos que comparta en los comentarios, ¬øc√≥mo abordar√≠a la protecci√≥n de su red de videovigilancia contra pirater√≠a?</b>  <b>¬øQu√© m√©todos de ataque consideras m√°s peligrosos?</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es405083/">https://habr.com/ru/post/es405083/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es405073/index.html">Centro de datos para la Copa del mundo</a></li>
<li><a href="../es405075/index.html">Enviar y recibir mensajes SMS usando puertas de enlace VoIP OpenVox</a></li>
<li><a href="../es405077/index.html">Monitoreo econ√≥mico de temperatura: Arduino + Zabbix</a></li>
<li><a href="../es405079/index.html">California paga a los estados vecinos para recoger el exceso de electricidad de las plantas de energ√≠a solar</a></li>
<li><a href="../es405081/index.html">[CASO] C√≥mo hicimos una copia de la trabajadora y la granjera colectiva para el Museo del Parlamento Europeo</a></li>
<li><a href="../es405085/index.html">Revisi√≥n de video sobre la c√°mara Clevermic UNO PTZ</a></li>
<li><a href="../es405087/index.html">C√≥mo conectar la videovigilancia utilizando la amplificaci√≥n de se√±al 2G / 3G / 4G</a></li>
<li><a href="../es405089/index.html">¬øC√≥mo funciona el servicio de pasear perros?</a></li>
<li><a href="../es405091/index.html">La NASA golpear√° un asteroide en octubre de 2022 para probar la defensa planetaria</a></li>
<li><a href="../es405093/index.html">¬øPor qu√© es tan importante la part√≠cula de Higgs?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>