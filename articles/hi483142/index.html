<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯМ┤ ЁЯФ╕ ЁЯФЕ рдкреЛрд░реНрдЯрд┐рдВрдЧ рдХреНрд╡реЗрдХ 3 рд╕реЗ рд░рд╕реНрдЯ тЫПя╕П ЁЯСйтАНтЭдя╕ПтАНЁЯТЛтАНЁЯСй ЁЯСРЁЯП┐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╣рдорд╛рд░реА рдЯреАрдо рдЗрдореНрдпреБрдиреЗрдВрдЯ рд░рд╕реНрдЯ рд╕реЗ рдкреНрдпрд╛рд░ рдХрд░рддреА рд╣реИ рдФрд░ рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ C2Rust рдкрд░ рдХрд╛рдо рдХрд░ рд░рд╣реА рд╣реИ, рдПрдХ рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдлреНрд░реЗрдорд╡рд░реНрдХ рдЬреЛ рд░рд╕реНрдЯ рдХреЛ рдкреНрд░рд╡рд╛рд╕ рдХрд░рдиреЗ рдХреА рд╕рдВрдкреВрд░реНрдг рджрд┐рдирдЪрд░реНрдпрд╛ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдкреЛрд░реНрдЯрд┐рдВрдЧ рдХреНрд╡реЗрдХ 3 рд╕реЗ рд░рд╕реНрдЯ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483142/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d2c/61d/a4f/d2c61da4f8dfcdfb39d9fbd7787070a4.png"></div><br>  рд╣рдорд╛рд░реА рдЯреАрдо рдЗрдореНрдпреБрдиреЗрдВрдЯ рд░рд╕реНрдЯ рд╕реЗ рдкреНрдпрд╛рд░ рдХрд░рддреА рд╣реИ рдФрд░ рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ C2Rust рдкрд░ рдХрд╛рдо рдХрд░ рд░рд╣реА рд╣реИ, рдПрдХ рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдлреНрд░реЗрдорд╡рд░реНрдХ рдЬреЛ рд░рд╕реНрдЯ рдХреЛ рдкреНрд░рд╡рд╛рд╕ рдХрд░рдиреЗ рдХреА рд╕рдВрдкреВрд░реНрдг рджрд┐рдирдЪрд░реНрдпрд╛ рдХрд╛ рдЦреНрдпрд╛рд▓ рд░рдЦрддрд╛ рд╣реИред  рд╣рдо рдкрд░рд┐рд╡рд░реНрддрд┐рдд рд░рд╕реНрдЯ рдХреЛрдб рдореЗрдВ рд╕реБрд░рдХреНрд╖рд╛ рд╕реБрдзрд╛рд░реЛрдВ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдлреНрд░реЗрдорд╡рд░реНрдХ рд╡рд┐рдлрд▓ рд╣реЛрдиреЗ рдкрд░ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЛ рдЗрд╕реЗ рд╕реНрд╡рдпрдВ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддреЗ рд╣реИрдВред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдореЗрдВ рдПрдХ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдЕрдиреБрд╡рд╛рджрдХ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЬрдВрдЧ рд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдЫреЛрдЯреЗ рд╕реАрдПрд▓рдЖрдИ рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдкрд░ рдкрд░реАрдХреНрд╖рдг рдзреАрд░реЗ-рдзреАрд░реЗ рдЕрдкреНрд░рдЪрд▓рд┐рдд рд╣реЛ рд░рд╣рд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдордиреЗ рдХреНрд╡реЗрдХ 3 рдХреЛ рд░рд╕реНрдЯ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред рдХреБрдЫ рджрд┐рдиреЛрдВ рдХреЗ рдмрд╛рдж, рд╣рдо рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рд░рд╕реНрдЯ рдкрд░ рдХреНрд╡реЗрдХ 3 рдЦреЗрд▓рдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд░рдЦрддреЗ рдереЗ! <br><br><h2>  рддреИрдпрд╛рд░реА: рдХреНрд╡реЗрдХ 3 рд╕реНрд░реЛрдд </h2><br>  рдореВрд▓ рдХреНрд╡реЗрдХ 3 рдФрд░ рд╡рд┐рднрд┐рдиреНрди рдХрд╛рдВрдЯреЗ рдХреЗ рд╕реНрд░реЛрдд рдХреЛрдб рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо <a href="https://ioquake3.org/">ioquake3</a> рдкрд░ рдЖ рдЧрдПред  рдпрд╣ рдХреНрд╡реЗрдХ 3 рдХрд╛ рдПрдХ рд╕рдореБрджрд╛рдп-рдирд┐рд░реНрдорд┐рдд рдХрд╛рдВрдЯрд╛ рд╣реИ, рдЬреЛ рдЕрднреА рднреА рдЖрдзреБрдирд┐рдХ рдкреНрд▓реЗрдЯрдлрд╛рд░реНрдореЛрдВ рдкрд░ рд╕рдорд░реНрдерд┐рдд рдФрд░ рдирд┐рд░реНрдорд┐рдд рд╣реИред <br><a name="habracut"></a><br>  рдПрдХ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдмрд┐рдВрджреБ рдХреЗ рд░реВрдк рдореЗрдВ, рд╣рдордиреЗ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рдХрд┐ рд╣рдо рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ рдЙрд╕рдХреЗ рдореВрд▓ рд░реВрдк рдореЗрдВ рдЗрдХрдЯреНрдард╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre><code class="bash hljs">$ make release</code> </pre> <br>  Ioquake3 рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░рддреЗ рд╕рдордп, рдХрдИ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдФрд░ рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рдлрд╛рдЗрд▓реЗрдВ рдмрдирд╛рдИ рдЬрд╛рддреА рд╣реИрдВ: <br><br><pre> <code class="bash hljs">$ tree --prune -I missionpack -P <span class="hljs-string"><span class="hljs-string">"*.so|*x86_64"</span></span> . тФФтФАтФА build тФФтФАтФА debug-linux-x86_64 тФЬтФАтФА baseq3 тФВ тФЬтФАтФА cgamex86_64.so <span class="hljs-comment"><span class="hljs-comment"># client тФВ тФЬтФАтФА qagamex86_64.so # game server тФВ тФФтФАтФА uix86_64.so # ui тФЬтФАтФА ioq3ded.x86_64 # dedicated server binary тФЬтФАтФА ioquake3.x86_64 # main binary тФЬтФАтФА renderer_opengl1_x86_64.so # opengl1 renderer тФФтФАтФА renderer_opengl2_x86_64.so # opengl2 renderer</span></span></code> </pre> <br>  рдЗрди рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдореЗрдВ, рдпреВрдЖрдИ, рдХреНрд▓рд╛рдЗрдВрдЯ рдФрд░ рд╕рд░реНрд╡рд░ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЛ рдпрд╛ рддреЛ <a href="https://fabiensanglard.net/quake3/qvm.php">рдХреНрд╡рд┐рдХ рд╡реАрдПрдо</a> рдЕрд╕реЗрдВрдмрд▓реА рдХреЗ рд░реВрдк рдореЗрдВ рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╛ рджреЗрд╢реА X86 рд╕рд╛рдЭрд╛ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗ рд░реВрдк рдореЗрдВред  рд╣рдорд╛рд░реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ, рд╣рдордиреЗ рджреЗрд╢реА рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ред  VM рдХреЛ Rust рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рдХрд░рдирд╛ рдФрд░ QVM рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЕрдзрд┐рдХ рд╕рд░рд▓ рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рд╣рдо C2Rust рдХрд╛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкрд░реАрдХреНрд╖рдг рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рдереЗред <br><br>  рд╣рдорд╛рд░реЗ рд╣рд╕реНрддрд╛рдВрддрд░рдг рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ, рд╣рдордиреЗ UI, рдЧреЗрдо, рдХреНрд▓рд╛рдЗрдВрдЯ, OpenGL1 рд░реЗрдВрдбрд░рд░ рдФрд░ рдореБрдЦреНрдп рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд┐рдпрд╛ред  рд╣рдо OpenGL2 рд░реЗрдВрдбрд░рд░ рдХрд╛ рдЕрдиреБрд╡рд╛рдж рднреА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдордиреЗ рдЗрд╕реЗ рдЫреЛрдбрд╝рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ <code>.glsl</code> shader <code>.glsl</code> рдХреА рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдорд╛рддреНрд░рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдХрд┐ рдмрд┐рд▓реНрдб рд╕рд┐рд╕реНрдЯрдо C рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╢рд╛рдмреНрджрд┐рдХ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдореНрдмреЗрдб рдХрд░рддрд╛ рд╣реИред рд╕рдВрдХрд▓рди рдХреЗ рдмрд╛рдж, рд╣рдо рдПрдореНрдмреЗрдбрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рдЬреЛрдбрд╝ рджреЗрдВрдЧреЗред рдЬрдВрдЧ рдХреЗ рддрд╛рд░реЛрдВ рдореЗрдВ GLSL рдХреЛрдб, рд▓реЗрдХрд┐рди рдЗрди рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЙрддреНрдкрдиреНрди рдЕрд╕реНрдерд╛рдпреА рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрднреА рднреА рдХреЛрдИ рдЕрдЪреНрдЫрд╛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИред  рдЗрд╕рд▓рд┐рдП рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рд╣рдордиреЗ рд╕рд┐рд░реНрдл OpenGL1 рд░реЗрдВрдбрд░ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЕрдиреБрд╡рд╛рдж рдХрд┐рдпрд╛ рдФрд░ рдЧреЗрдо рдХреЛ рдбрд┐рдлреЙрд▓реНрдЯ рд░реЗрдВрдбрд░рд░ рдХреЗ рдмрдЬрд╛рдп рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдХрд┐рдпрд╛ред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдордиреЗ рд╕рдорд░реНрдкрд┐рдд рд╕рд░реНрд╡рд░ рдФрд░ рдкреИрдХреЗрдЬреНрдб рдорд┐рд╢рди рдлрд╛рдЗрд▓реЛрдВ рдХреЛ рдЫреЛрдбрд╝рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛, рдХреНрдпреЛрдВрдХрд┐ рдЙрдиреНрд╣реЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рдирд╣реАрдВ рд╣реЛрдЧрд╛ рдФрд░ рд╡реЗ рдЗрд╕ рдкреНрд░рджрд░реНрд╢рди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИрдВред <br><br><h2>  рд╕рдВрдХреНрд░рдордг рей </h2><br>  рдХреНрд╡реЗрдХ 3 рдореЗрдВ рдкреНрд░рдпреБрдХреНрдд рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рд╕рдВрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдФрд░ рд╕реНрд░реЛрдд рдХреЛрдб рдХреЛ рдирд╣реАрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдореВрд▓ рдЕрд╕реЗрдВрдмрд▓реА рдХреА рддрд░рд╣ рд╣реА рдмрд╛рдЗрдирд░реА рдлрд╛рдЗрд▓реЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереА, рдЕрд░реНрдерд╛рддреН рдЪрд╛рд░ рд╕рд╛рдЭрд╛ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдФрд░ рдПрдХ рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдпред <br><br>  рдЪреВрдВрдХрд┐ C2Rust рдХрд╛рд░реНрдЧреЛ рдЕрд╕реЗрдВрдмрд▓реА рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдмрдирд╛рддрд╛ рд╣реИ, рдкреНрд░рддреНрдпреЗрдХ рдмрд╛рдЗрдирд░реА рдХреЛ рд╕рдВрдмрдВрдзрд┐рдд <code>Cargo.toml</code> рдлрд╝рд╛рдЗрд▓ рдХреЗ рд╕рд╛рде рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдЬрдВрдЧ рдХреНрд░реЗрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред <br><br>  C2Rust рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐ рдЖрдЙрдЯрдкреБрдЯ рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓ рдПрдХ рдХреНрд░реЗрдЯ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЙрд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╡рд╕реНрддреБ рдпрд╛ рд╕реНрд░реЛрдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд╕рд╛рде рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рд╕реВрдЪреА рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА, рд╕рд╛рде рд╣реА рдкреНрд░рддреНрдпреЗрдХ рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рдПрдХ рд▓рд┐рдВрдХрд░ рдХреЙрд▓ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдирд┐рд░реНрднрд░рддрд╛рдПрдВ)ред <br><br>  рд╣рд╛рд▓рд╛рдБрдХрд┐, рд╣рдо рдЬрд▓реНрджреА рд╕реЗ рдПрдХ рд╕реАрдорд╛ рдХреЗ рдХрд╛рд░рдг рдЖрдП рдЬрд┐рд╕ рддрд░рд╣ рд╕реЗ C2Rust рджреЗрд╢реА рдирд┐рд░реНрдорд╛рдг рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ: C2Rust рдЗрдирдкреБрдЯ рдкрд░ рдПрдХ <a href="https://sarcasm.github.io/notes/dev/compilation-database.html">рд╕рдВрдХрд▓рди рдбреЗрдЯрд╛рдмреЗрд╕</a> рдлрд╝рд╛рдЗрд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╕рдВрдХрд▓рди рдХрдорд╛рдВрдб рдХреА рдПрдХ рд╕реВрдЪреА рд╣реЛрддреА рд╣реИ рдЬреЛ рдирд┐рд░реНрдорд╛рдг рдХреЗ рджреМрд░рд╛рди рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрддреА рд╣реИред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЗрд╕ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рд▓рд┐рдВрдХрд░ рдХреЙрд▓ рдХреЗ рдмрд┐рдирд╛ <strong>рдХреЗрд╡рд▓</strong> рд╕рдВрдХрд▓рди рдХрдорд╛рдВрдб рд╣реИрдВред  рдЗрд╕ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдмрдирд╛рдиреЗ рд╡рд╛рд▓реЗ рдЕрдзрд┐рдХрд╛рдВрд╢ рдЯреВрд▓ рдореЗрдВ рдпрд╣ рдЬрд╛рдирдмреВрдЭрдХрд░ рд╕реАрдорд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП <code>CMAKE_EXPORT_COMPILE_COMMANDS</code> , <code>bear</code> рдФрд░ <code>compiledb</code> рд╕рд╛рде <code>CMAKE_EXPORT_COMPILE_COMMANDS</code> ред  рд╣рдорд╛рд░реЗ рдЕрдиреБрднрд╡ рдореЗрдВ, рдПрдХрдорд╛рддреНрд░ рдЙрдкрдХрд░рдг рдЬрд┐рд╕рдореЗрдВ <a href="https://github.com/Ericsson/codechecker/tree/master/analyzer/tools/build-logger"><code>build-logger</code></a> рдХрдорд╛рдВрдб рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, <code>CodeChecker</code> рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрдорд┐рдд <a href="https://github.com/Ericsson/codechecker/tree/master/analyzer/tools/build-logger"><code>build-logger</code></a> , рдЬрд┐рд╕рдХрд╛ рд╣рдордиреЗ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдХреНрдпреЛрдВрдХрд┐ рд╣рдордиреЗ рдХреЗрд╡рд▓ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рд░реИрдкрд░ рд▓рд┐рдЦрдиреЗ рдХреЗ рдмрд╛рдж рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реАрдЦрд╛ (рд╡реЗ рдиреАрдЪреЗ рд╡рд░реНрдгрд┐рдд рд╣реИрдВ)ред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рдерд╛ рдХрд┐ рдХрдИ рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд╕рд╛рде рд╕реА рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЛ рд╕рдВрдХрд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдХрд┐рд╕реА рднреА рд╕рд╛рдорд╛рдиреНрдп рдЯреВрд▓ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдИ рдЧрдИ <code>compile_commands.json</code> рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рдереЗред <br><br>  рдЗрд╕рд▓рд┐рдП, рд╣рдордиреЗ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ <a href="https://github.com/immunant/c2rust/blob/master/scripts/cc-wrappers/cc">рд╕рдВрдХрд▓рдХ</a> рдФрд░ <a href="https://github.com/immunant/c2rust/blob/master/scripts/cc-wrappers/ld">рд▓рд┐рдВрдХрд░</a> рдЖрд╡рд░рдг рд▓рд┐рдкрд┐рдпреЛрдВ рдХреЛ рд▓рд┐рдЦрд╛ рд╣реИ рдЬреЛ <a href="https://github.com/immunant/c2rust/blob/master/scripts/cc-wrappers/cc">рдХрдВрдкрд╛рдЗрд▓рд░</a> рдФрд░ <a href="https://github.com/immunant/c2rust/blob/master/scripts/cc-wrappers/ld">рд▓рд┐рдВрдХрд░ рдХреЗ</a> рд╕рднреА рдХреЙрд▓реЛрдВ рдХреЛ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдбрдВрдк рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рдЗрд╕реЗ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд <code>compile_commands.json</code> рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рддрд╛ рд╣реИред  рд╕рд╛рдорд╛рдиреНрдп рд╕рднрд╛ рдХреЗ рдмрдЬрд╛рдп рдЖрджреЗрд╢ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ: <br><br><pre> <code class="bash hljs">$ make release</code> </pre> <br>  рд╣рдордиреЗ рдЕрд╕реЗрдВрдмрд▓реА рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рд░реИрдкрд░ рдХреЛ рдЬреЛрдбрд╝рд╛: <br><br><pre> <code class="bash hljs">$ make release CC=/path/to/C2Rust/scripts/cc-wrappers/cc</code> </pre> <br>  рд░реИрдкрд░ рдПрдХ JSON рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рдПрдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдмрдирд╛рддреЗ рд╣реИрдВ, рдкреНрд░рддрд┐ рдХреЙрд▓ред  рджреВрд╕рд░реА <a href="https://github.com/immunant/c2rust/blob/master/scripts/convert_build_commands.py">рд╕реНрдХреНрд░рд┐рдкреНрдЯ</a> рдЙрди рд╕рднреА рдХреЛ рдПрдХ рдирдИ <code>compile_commands.json</code> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдПрдХрддреНрд░рд┐рдд рдХрд░рддреА рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╕рдВрдХрд▓рди рдФрд░ рд╕рдВрдХрд▓рди рджреЛрдиреЛрдВ рдХрдорд╛рдВрдб рд╣реИрдВред  рдлрд┐рд░ рд╣рдордиреЗ C2Rust рдХреЛ рдмрдврд╝рд╛рдпрд╛ рддрд╛рдХрд┐ рдпрд╣ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рдмрд┐рд▓реНрдб рдХрдорд╛рдВрдб рдХреЛ рдкрдврд╝реЗ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рд▓рд┐рдВрдХ рдХрд┐рдП рдЧрдП рдмрд╛рдЗрдирд░реА рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рдЯреЛрдХрд░рд╛ рдмрдирд╛рдПред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, C2Rust рдЕрдм рдкреНрд░рддреНрдпреЗрдХ рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓ рдХреЗ рд▓рд┐рдП рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдирд┐рд░реНрднрд░рддрд╛рдПрдВ рднреА рдкрдврд╝рддрд╛ рд╣реИ рдФрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЙрдиреНрд╣реЗрдВ рд╕рдВрдмрдВрдзрд┐рдд <code>build.rs</code> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЬреЛрдбрд╝рддрд╛ рд╣реИред <br><br>  рд╕реБрд╡рд┐рдзрд╛ рдореЗрдВ рд╕реБрдзрд╛рд░ рдХреЗ рд▓рд┐рдП, рд╕рднреА рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ <a href="https://doc.rust-lang.org/book/ch14-03-cargo-workspaces.html">рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ рдХреЗ</a> рдЕрдВрджрд░ рд░рдЦрдХрд░ рдПрдХ рд╕рдордп рдореЗрдВ рдПрдХрддреНрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  C2Rust рд╢реАрд░реНрд╖-рд╕реНрддрд░реАрдп рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ <code>Cargo.toml</code> рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо <code>quake3-rs</code> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдХреЗрд╡рд▓ <code>cargo build</code> рд╕рд╛рде рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">$ tree -L 1 . тФЬтФАтФА Cargo.lock тФЬтФАтФА Cargo.toml тФЬтФАтФА cgamex86_64 тФЬтФАтФА ioquake3 тФЬтФАтФА qagamex86_64 тФЬтФАтФА renderer_opengl1_x86_64 тФЬтФАтФА rust-toolchain тФФтФАтФА uix86_64 $ cargo build --release</code> </pre> <br><h2>  рдЦреБрд░рджрд░рд╛рдкрди рджреВрд░ рдХрд░реЗрдВ </h2><br>  рдЬрдм рд╣рдордиреЗ рдкрд╣рд▓реА рдмрд╛рд░ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХреЛрдб рдХреЛ рд╕рдВрдХрд▓рд┐рдд рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА, рддреЛ рд╣рдо рдХреНрд╡реЗрдХ 3 рд╕реНрд░реЛрддреЛрдВ рдХреЗ рд╕рд╛рде рдХреБрдЫ рд╕рдорд╕реНрдпрд╛рдУрдВ рдореЗрдВ рднрд╛рдЧ рдЧрдП: рдРрд╕реЗ рд╕реАрдорд╛рд╡рд░реНрддреА рдорд╛рдорд▓реЗ рдереЗ рдЬрд┐рдиреНрд╣реЗрдВ C2Rust рд╕рдВрднрд╛рд▓ рдирд╣реАрдВ рд╕рдХрд╛ (рди рддреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ, рди рд╣реА рдХрд┐рд╕реА рднреА рддрд░рд╣)ред <br><br><h3>  рдПрд░рд┐рдпрд░ рдкреЙрдЗрдВрдЯрд░реНрд╕ </h3><br>  рдореВрд▓ рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ рдХрдИ рдЬрдЧрд╣реЛрдВ рдкрд░ рдРрд╕реЗ рднрд╛рд╡ рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рдЕрдВрддрд┐рдо рд╕рд░рдгреА рддрддреНрд╡ рдХреЗ рдмрд╛рдж рдЕрдЧрд▓реЗ рддрддреНрд╡ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рдпрд╣рд╛рдБ рдПрдХ рд╕рд░рд▓ рд╕реА рдХреЛрдб рдЙрджрд╛рд╣рд░рдг рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-built_in"><span class="hljs-built_in">array</span></span>[<span class="hljs-number"><span class="hljs-number">1024</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> *p; <span class="hljs-comment"><span class="hljs-comment">// ... if (p &gt;= &amp;array[1024]) { // error... }</span></span></code> </pre> <br>  рд╕реА рдорд╛рдирдХ (рджреЗрдЦреЗрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <a href="http://www.iso-9899.info/n1570.html">C11, рдзрд╛рд░рд╛ 6.5.6</a> ) рдПрдХ рд╕рд░рдгреА рдХреЗ рдЕрдВрдд рд╕реЗ рдкрд░реЗ рдПрдХ рддрддреНрд╡ рдХреЛ <a href="http://www.iso-9899.info/n1570.html">рдЗрдВрдЧрд┐рдд</a> рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЬрдВрдЧ рдЗрд╕ рдмрд╛рдд рдХреЛ рдордирд╛ рдХрд░рддреА рд╣реИ, рднрд▓реЗ рд╣реА рд╣рдо рдХреЗрд╡рд▓ рддрддреНрд╡ рдХрд╛ рдкрддрд╛ рд▓реЗрдВред  рд╣рдореЗрдВ <a href=""><code>AAS_TraceClientBBox</code></a> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдРрд╕реЗ рдкреИрдЯрд░реНрди рдХреЗ рдЙрджрд╛рд╣рд░рдг рдорд┐рд▓реЗред <br><br>  рд░рд╕реНрдЯ рдХрдВрдкрд╛рдЗрд▓рд░ рдиреЗ рднреА рдЗрд╕реА рддрд░рд╣ рдХрд╛ рд╕рдВрдХреЗрдд рджрд┐рдпрд╛ рдерд╛, рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ <a href=""><code>G_TryPushingEntity</code></a> рдореЗрдВ <a href=""><code>G_TryPushingEntity</code></a> рдЙрджрд╛рд╣рд░рдг рд╣реИ, рдЬрд╣рд╛рдВ рд╕рд╢рд░реНрдд рдЕрдиреБрджреЗрд╢ рдлреЙрд░реНрдо рдХрд╛ рд╣реИ <code>&gt;</code> рдирд╣реАрдВ <code>&gt;=</code> ред  рдПрдХ рд╕реВрдЪрдХ рдЬреЛ рд╕реАрдорд╛ рд╕реЗ рдмрд╛рд╣рд░ рдЪрд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдлрд┐рд░ рд╕рд╢рд░реНрдд рдирд┐рд░реНрдорд╛рдг рдХреЗ рдмрд╛рдж dereferenced рд╣реИ, рдЬреЛ рдПрдХ рдореЗрдореЛрд░реА рд╕реБрд░рдХреНрд╖рд╛ рдмрдЧ рд╣реИред <br><br>  рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдордиреЗ C2Rust рдЯреНрд░рд╛рдВрд╕рдкрд╛рдЗрд▓рд░ рдХреЛ рдареАрдХ рдХрд┐рдпрд╛ рддрд╛рдХрд┐ рдпрд╣ рд╕рд░рдгреА рдЕрдиреБрдХреНрд░рдорд┐рдд рд╕рдВрдЪрд╛рд▓рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп рдХрд┐рд╕реА рд╕рд░рдгреА рддрддреНрд╡ рдХреЗ рдкрддреЗ рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реВрдЪрдХ рдЕрдВрдХрдЧрдгрд┐рддреАрдп рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗред  рдЗрд╕ рдлрд┐рдХреНрд╕ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдХреЛрдб рдЬреЛ рд╕рдорд╛рди рдкреИрдЯрд░реНрди "рд╕рд░рдгреА рдХреЗ рдЕрдВрдд рдореЗрдВ рддрддреНрд╡ рдкрддрд╛" рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЕрдм рдмрд┐рдирд╛ рд╕рдВрд╢реЛрдзрдиреЛрдВ рдХреЗ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдЕрдиреБрд╡рд╛рджрд┐рдд рдФрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br><h3>  рдЪрд░ рд▓рдВрдмрд╛рдИ рд╕рд░рдгреА рддрддреНрд╡ </h3><br>  рд╣рдордиреЗ рд╣рд░ рдЪреАрдЬ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЧреЗрдо рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛, рдФрд░ рддреБрд░рдВрдд рдЬрдВрдЧ рд╕реЗ рдШрдмрд░рд╛ рдЧрдП: <br><br><pre> <code class="cpp hljs">thread <span class="hljs-string"><span class="hljs-string">'main'</span></span> panicked at <span class="hljs-string"><span class="hljs-string">'index out of bounds: the len is 4 but the index is 4'</span></span>, quake3-client/src/cm_polylib.rs:<span class="hljs-number"><span class="hljs-number">973</span></span>:<span class="hljs-number"><span class="hljs-number">17</span></span></code> </pre> <br>  <code>cm_polylib.c</code> рдкрд░ рдПрдХ рдирдЬрд╝рд░ <code>cm_polylib.c</code> , рд╣рдордиреЗ рджреЗрдЦрд╛ рдХрд┐ рдпрд╣ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рдлрд╝реАрд▓реНрдб <code>p</code> рдХреЛ dereferences рдХрд░рддрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numpoints; <span class="hljs-keyword"><span class="hljs-keyword">vec3_t</span></span> p[<span class="hljs-number"><span class="hljs-number">4</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// variable sized } winding_t;</span></span></code> </pre> <br>  рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ <code>p</code> рдлрд╝реАрд▓реНрдб рд▓рдЪреАрд▓реА рд╕рд░рдгреА рд╕рджрд╕реНрдп рдХрд╛ рдПрдХ рд╕рдВрд╕реНрдХрд░рдг рд╣реИ рдЬреЛ C99 рдорд╛рдирдХ рджреНрд╡рд╛рд░рд╛ рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдлрд┐рд░ рднреА <code>gcc</code> рджреНрд╡рд╛рд░рд╛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  C2Rust рд╕рд┐рдВрдЯреИрдХреНрд╕ C99 ( <code>vec3_t p[]</code> ) рдХреЗ рд╕рд╛рде рдЪрд░-рд▓рдВрдмрд╛рдИ рд╕рд░рдгрд┐рдпреЛрдВ рдХреЗ рддрддреНрд╡реЛрдВ рдХреЛ рдкрд╣рдЪрд╛рдирддрд╛ рд╣реИ рдФрд░ C99 рд╕реЗ рдкрд╣рд▓реЗ рдЗрд╕ рдкреИрдЯрд░реНрди рдХреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд░рд▓ <code>vec3_t p[]</code> рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ (рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЗ рдЕрдВрдд рдореЗрдВ 0 рдФрд░ 1 рдХреЗ рдЖрдХрд╛рд░); рд╣рдордиреЗ ioquake3 рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ рднреА рдХрдИ рдРрд╕реЗ рдЙрджрд╛рд╣рд░рдг рдкрд╛рдП рд╣реИрдВред <br><br>  рдЙрдкрд░реЛрдХреНрдд рд╕рдВрд░рдЪрдирд╛ рдХреЛ C99 рд╕рд┐рдВрдЯреИрдХреНрд╕ рдореЗрдВ <a href="https://github.com/immunant/ioq3/commit/ace1fae43e736613544c8d33cc69dee794f5124a">рдмрджрд▓рдиреЗ</a> рд╕реЗ рдШрдмрд░рд╛рд╣рдЯ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numpoints; <span class="hljs-keyword"><span class="hljs-keyword">vec3_t</span></span> p[]; <span class="hljs-comment"><span class="hljs-comment">// variable sized } winding_t;</span></span></code> </pre> <br>  рд╕рд╛рдорд╛рдиреНрдп рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЗрд╕ рдкреИрдЯрд░реНрди рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдареАрдХ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ (0 рдФрд░ 1 рд╕реЗ рднрд┐рдиреНрди рд╕рд░рдгреА рдЖрдХрд╛рд░ рдХреЗ рд╕рд╛рде) рдЕрддреНрдпрдВрдд рдХрдард┐рди рд╣реЛрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ рд╣рдореЗрдВ рд╕рд╛рдорд╛рдиреНрдп рд╕рд░рдгрд┐рдпреЛрдВ рдФрд░ рдордирдорд╛рдиреА рдЖрдХрд╛рд░реЛрдВ рдХреА рдЪрд░ рд▓рдВрдмрд╛рдИ рдХреЗ рд╕рд░рдгрд┐рдпреЛрдВ рдХреЗ рддрддреНрд╡реЛрдВ рдХреЗ рдмреАрдЪ рдЕрдВрддрд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдЗрд╕рд▓рд┐рдП, рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рд╣рдо рдЕрдиреБрд╢рдВрд╕рд╛ рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдк рдореВрд▓ C рдХреЛрдб рдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдареАрдХ рдХрд░реЗрдВ, рдЬреИрд╕рд╛ рдХрд┐ рд╣рдордиреЗ ioquake3 рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдерд╛ред <br><br><h3>  рдЗрдирд▓рд╛рдЗрди рдЕрд╕реЗрдВрдмрд▓рд░ рдХреЛрдб рдореЗрдВ рдмрдВрдзреЗ рдСрдкрд░реЗрдВрдб </h3><br>  рдХреНрд░реИрд╢ рдХрд╛ рдПрдХ рдЕрдиреНрдп рд╕реНрд░реЛрдд <code>/usr/include/bits/select.h</code> рд╕рд┐рд╕реНрдЯрдо рд╣реЗрдбрд░ рд╕реЗ рд╕реА-рдЕрд╕реЗрдВрдмрд▓рд░ рдХреЛрдб рдХреЛрдб рдерд╛: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta"># </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> __FD_ZERO(fdsp) \ do { \ int __d0, __d1; \ __asm__ __volatile__ (</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"cld; rep; "</span></span></span><span class="hljs-meta"> __FD_ZERO_STOS \ : </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"=c"</span></span></span><span class="hljs-meta"> (__d0), </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"=D"</span></span></span><span class="hljs-meta"> (__d1) \ : </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"a"</span></span></span><span class="hljs-meta"> (0), </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"0"</span></span></span><span class="hljs-meta"> (sizeof (fd_set) \ / sizeof (__fd_mask)), \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"1"</span></span></span><span class="hljs-meta"> (&amp;__FDS_BITS (fdsp)[0]) \ : </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"memory"</span></span></span><span class="hljs-meta">); \ } while (0)</span></span></code> </pre> <br>  <code>__FD_ZERO</code> рдореИрдХреНрд░реЛ рдХреЗ рдЖрдВрддрд░рд┐рдХ рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдирд╛ред  рдпрд╣ рдкрд░рд┐рднрд╛рд╖рд╛ <code>gcc</code> рдХрд╛ рдПрдХ рджреБрд░реНрд▓рдн рд╕реАрдорд╛ рд░реЗрдЦрд╛ рдорд╛рдорд▓рд╛ рдЙрдард╛рддреА рд╣реИ: рд╡рд┐рднрд┐рдиреНрди рдЖрдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде <a href="https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html">рдмрдВрдзреЗ рдСрдкрд░реЗрдВрдб I / Oред</a>  рдЖрдЙрдЯрдкреБрдЯ рдСрдкрд░реЗрдЯрд░ <code>"=D" (__d1)</code> рд░рдЬрд┐рд╕реНрдЯрд░ рдХреЛ 32-рдмрд┐рдЯ рдорд╛рди рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд░ <code>__d1</code> рдореЗрдВ <code>__d1</code> , рдФрд░ <code>"1" (&amp;__FDS_BITS (fdsp)[0])</code> рдЙрд╕реА рд░рдЬрд┐рд╕реНрдЯрд░ рдХреЛ рдкрддрд╛ <code>fdsp-&gt;fds_bits</code> рд╕реЗ 64-рдмрд┐рдЯ рдкреЙрдЗрдВрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ <code>fdsp-&gt;fds_bits</code> ред  <code>gcc</code> рдФрд░ <code>clang</code> рдЗрд╕ рдмреЗрдореЗрд▓ рдХреЛ рд╣рд▓ рдХрд░рддреЗ рд╣реИрдВред  64-рдмрд┐рдЯ <code>rdi</code> рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдФрд░ рдорд╛рди <code>__d1</code> рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЗрд╕рдХреЗ рдореВрд▓реНрдп рдХреЛ рдЫреЛрдЯрд╛ <code>__d1</code> , рдФрд░ рдЬрдВрдЧ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ LLVM рд╢рдмреНрджрд╛рд░реНрде рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдРрд╕рд╛ рдорд╛рдорд▓рд╛ рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд░рд╣рддрд╛ рд╣реИред  рдбреАрдмрдЧ рдмрд┐рд▓реНрдб рдореЗрдВ (рд░рд┐рд▓реАрдЬрд╝ рд╡рд╛рд▓реЗ рдореЗрдВ рдирд╣реАрдВ, рдЬреЛ рдЕрдЪреНрдЫрд╛ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд┐рдпрд╛), рд╣рдордиреЗ рджреЗрдЦрд╛ рдХрд┐ рджреЛрдиреЛрдВ рдСрдкрд░реЗрдВрдб рдХреЛ <code>edi</code> рд░рдЬрд┐рд╕реНрдЯрд░ рдореЗрдВ рд╕реМрдВрдкрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕ рд╡рдЬрд╣ рд╕реЗ рдкреЙрдЗрдВрдЯрд░ рдХреЛ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдХреЛрдбрд╛рдВрддрд░рдХ рдХреЛрдб рд╕реЗ рдкрд╣рд▓реЗ 32 рдмрд┐рдЯреНрд╕ рддрдХ рдХрд╛рдЯ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдЪреВрдВрдХрд┐ рд░рд╕реНрдЯ рдмрд╣реБрдд рдХрдо рдмрджрд▓рд╛рд╡ рдХреЗ рд╕рд╛рде рдмрд┐рд▓реНрдЯ-рдЗрди <code>rustc</code> рдЕрд╕реЗрдВрдмрд▓рд░ рдХреЛрдб рдХреЛ <code>rustc</code> рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдордиреЗ C2Rust рдореЗрдВ рдЗрд╕ рд╡рд┐рд╢реЗрд╖ рдорд╛рдорд▓реЗ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред  рд╣рдордиреЗ рдПрдХ рдирдпрд╛ рдЯреЛрдХрд░рд╛ <a href="https://github.com/immunant/c2rust/tree/master/c2rust-asm-casts"><code>c2rust-asm-casts</code></a> рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рд╣реИ рдЬреЛ <a href="https://github.com/immunant/c2rust/tree/master/c2rust-asm-casts"><code>c2rust-asm-casts</code></a> рдФрд░ рд╕рд╣рд╛рдпрдХ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд░рд╕реНрдЯ рдкреНрд░рдХрд╛рд░ рдкреНрд░рдгрд╛рд▓реА рдХреЗ рд▓рд┐рдП рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ <a href="https://github.com/immunant/c2rust/tree/master/c2rust-asm-casts"><code>c2rust-asm-casts</code></a> рдЬреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдПрдХ рдЖрдВрддрд░рд┐рдХ рдЖрдХрд╛рд░ рдореЗрдВ рдмрдВрдзреЗ рд╣реБрдП рдСрдкрд░реЗрдВрдб рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рджреЛрдиреЛрдВ рдЧреНрд░рдВрдерд┐рдпреЛрдВ рдХреЛ рдзрд╛рд░рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдмрдбрд╝реЗ рд╣реЛрддреЗ рд╣реИрдВред  рдЙрдкрд░реЛрдХреНрдд рдХреЛрдб рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рдХрд░рддрд╛ рд╣реИ: <br><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> __d0: c_int = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> __d1: c_int = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Reference to the output value of the first operand let fresh5 = &amp;mut __d0; // The internal storage for the first tied operand let fresh6; // Reference to the output value of the second operand let fresh7 = &amp;mut __d1; // The internal storage for the second tied operand let fresh8; // Input value of the first operand let fresh9 = (::std::mem::size_of::&lt;fd_set&gt;() as c_ulong).wrapping_div(::std::mem::size_of::&lt;__fd_mask&gt;() as c_ulong); // Input value of the second operand let fresh10 = &amp;mut *fdset.__fds_bits.as_mut_ptr().offset(0) as *mut __fd_mask; asm!("cld; rep; stosq" : "={cx}" (fresh6), "={di}" (fresh8) : "{ax}" (0), // Cast the input operands into the internal storage type // with optional zero- or sign-extension "0" (AsmCast::cast_in(fresh5, fresh9)), "1" (AsmCast::cast_in(fresh7, fresh10)) : "memory" : "volatile"); // Cast the operands out (types are inferred) with truncation AsmCast::cast_out(fresh5, fresh9, fresh6); AsmCast::cast_out(fresh7, fresh10, fresh8);</span></span></code> </pre> <br>  рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдЗрд╕ рдХреЛрдб рдХреЛ <code>fresh6</code> рдХреЛрдб рдХреА рдЕрд╕реЗрдВрдмрд▓реА рдореЗрдВ рдЗрдирдкреБрдЯ рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рд╡реИрд▓реНрдпреВ рдХреЗ рд▓рд┐рдП рдХрд┐рд╕реА рднреА рдкреНрд░рдХрд╛рд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдЬрдм рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рдВрдШрд░реНрд╖реЛрдВ рдХреЛ рд╣рд▓ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЙрди рдкрд░ рднрд░реЛрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рд▓рд┐рдП рдЬрдВрдЧ рдкреНрд░рдХрд╛рд░ (рдореБрдЦреНрдп рд░реВрдк рд╕реЗ <code>fresh6</code> рдФрд░ <code>fresh8</code> )ред <br><br><h3>  рдЧреНрд▓реЛрдмрд▓ рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рдХреЛ рд╕рдВрд░реЗрдЦрд┐рдд рдХрд┐рдпрд╛ </h3><br>  рд╡рд┐рдлрд▓рддрд╛ рдХрд╛ рдЕрдВрддрд┐рдо рд╕реНрд░реЛрдд рдПрд╕рдПрд╕рдИ рд╕реНрдерд┐рд░рд╛рдВрдХ рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╡реИрд╢реНрд╡рд┐рдХ рдЪрд░ рдерд╛: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ssemask[<span class="hljs-number"><span class="hljs-number">16</span></span>] __attribute__((aligned(<span class="hljs-number"><span class="hljs-number">16</span></span>))) = { <span class="hljs-string"><span class="hljs-string">"\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\x00\x00\x00\x00"</span></span> };</code> </pre> <br>  рдЬрдВрдЧ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП рд╕рдВрд░реЗрдЦрдг рд╡рд┐рд╢реЗрд╖рддрд╛ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╡реИрд╢реНрд╡рд┐рдХ рдЪрд░ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ, рдЕрд░реНрдерд╛рддреНред  <code>static</code> рддрддреНрд╡ред  рд╣рдордиреЗ рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд┐рдпрд╛, рдпрд╛ рддреЛ рдЬрдВрдЧ рдореЗрдВ рдпрд╛ C2Rust рдореЗрдВ, рд▓реЗрдХрд┐рди рдЕрдм ioquake3 рдореЗрдВ рд╣рдордиреЗ рдЗрд╕реЗ рдПрдХ рдЫреЛрдЯреА <a href="https://github.com/immunant/ioq3/blob/master/asm-snapvector.patch">рдкреИрдЪ</a> рдлрд╝рд╛рдЗрд▓ рдХреЗ рд╕рд╛рде рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдареАрдХ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рд╣реИред  рдпрд╣ рдкреИрдЪ рдлрд╝рд╛рдЗрд▓ Rust <code>ssemask</code> рдирд┐рдореНрди рдХреЗ <code>ssemask</code> рдмрджрд▓ рджреЗрддреА рд╣реИ: <br><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[repr(C, align(16))]</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SseMask</span></span></span></span>([<span class="hljs-built_in"><span class="hljs-built_in">u8</span></span>; <span class="hljs-number"><span class="hljs-number">16</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> ssemask: SseMask = SseMask([ <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, ]);</code> </pre> <br><h2>  рд░рдирд┐рдВрдЧ рдХреНрд╡реЗрдХ3-рдЖрд░рдПрд╕ </h2><br>  рдЬрдм <code>cargo build --release</code> , рддреЛ рдмрд╛рдпрдиреЗрд░рд┐рдЬрд╝ рдХрд╛ <code>cargo build --release</code> , рд▓реЗрдХрд┐рди рд╡реЗ рдПрдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕рдВрд░рдЪрдирд╛ рдХреЗ рд╕рд╛рде <code>target/release</code> рдХреЗ рддрд╣рдд рдмрдирд╛рдП рдЬрд╛рддреЗ рд╣реИрдВ рдЬреЛ рдХрд┐ <code>ioquake3</code> рдмрд╛рдЗрдирд░реА рдкрд╣рдЪрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рд╣рдордиреЗ рдПрдХ рдРрд╕реА <a href="">рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд▓рд┐рдЦреА рд╣реИ</a> рдЬреЛ рд╕рд╣реА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕рдВрд░рдЪрдирд╛ ( <code>.pk3</code> рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ <code>.pk3</code> рдлрд╝рд╛рдЗрд▓реЛрдВ рд╕рд╣рд┐рдд) рдХреЛ рдкреБрдирдГ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд░реНрддрдорд╛рди рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдкреНрд░рддреАрдХрд╛рддреНрдордХ рд▓рд┐рдВрдХ рдмрдирд╛рддреА рд╣реИ: <br><br><pre> <code class="bash hljs">$ /path/to/make_quake3_rs_links.sh /path/to/quake3-rs/target/release /path/to/paks</code> </pre> <br>  рдкрде <code>/path/to/paks</code> <code>.pk3</code> рдХреЛ <code>.pk3</code> рдлрд╝рд╛рдЗрд▓реЛрдВ рд╡рд╛рд▓реА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  рдЕрдм рдЪрд▓рд┐рдП рдЦреЗрд▓ рдХреЛ рдЪрд▓рд╛рддреЗ рд╣реИрдВ!  рд╣рдореЗрдВ <code>+set vm_game 0</code> рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЖрджрд┐, рдЗрд╕рд▓рд┐рдП рд╣рдо рдЗрди рдореЙрдбреНрдпреВрд▓ рдХреЛ рд░реВрд╕реНрдЯ рд╕рд╛рдЭрд╛ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЛрдб рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ <code>cl_renderer</code> рдЕрд╕реЗрдВрдмрд▓реА рдХреЗ рд░реВрдк рдореЗрдВ рдирд╣реАрдВ, рд╕рд╛рде рд╣реА рдУрдкрди_рез рд░реЗрдВрдбрд░рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП cl_rendererред <br><br><pre> <code class="bash hljs">$ ./ioquake3 +<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> sv_pure 0 +<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> vm_game 0 +<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> vm_cgame 0 +<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> vm_ui 0 +<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> cl_renderer <span class="hljs-string"><span class="hljs-string">"opengl1"</span></span></code> </pre> <br>  рдФрд░ ... <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/18e/fb3/94c/18efb394c9f33f6a1cbe78503a25bb4c.png"></div><br>  рд╣рдордиреЗ рд░рд╕реНрдЯ рдкрд░ Quake3 рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d2c/61d/a4f/d2c61da4f8dfcdfb39d9fbd7787070a4.png"></div><br>  рдпрд╣рд╛рдБ рдПрдХ рд╡реАрдбрд┐рдпреЛ рд╣реИ рдХрд┐ рдХреИрд╕реЗ рд╣рдо рдХреНрд╡реЗрдХ 3 рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдЧреЗрдо рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдереЛрдбрд╝рд╛ рд╕рд╛ рдЦреЗрд▓рддреЗ рд╣реИрдВ: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/lQjvSJLDXW4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  рдЖрдк рд╣рдорд╛рд░реА рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреА <code>transpiled</code> рд╢рд╛рдЦрд╛ рдореЗрдВ <a href="https://github.com/immunant/ioq3/tree/transpiled/quake3-rs">рдЯреНрд░рд╛рдВрд╕рдкреНрд▓рдб рд╕реНрд░реЛрддреЛрдВ рдХрд╛</a> рдЕрдзреНрдпрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдПрдХ <code>refactored</code> рд╢рд╛рдЦрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдХрдИ рдкреВрд░реНрд╡-рд▓рд╛рдЧреВ <a href="https://github.com/immunant/ioq3/blob/transpiled/refactor_commands.txt">рд░рд┐рдлреИрдХреНрдЯрд┐рдВрдЧ рдХрдорд╛рдВрдб</a> рдХреЗ рд╕рдорд╛рди <a href="https://github.com/immunant/ioq3/tree/refactored/quake3-rs">рд╕реНрд░реЛрдд рд╣реИрдВ</a> ред <br><br><h2>  рд╕рдВрдХреНрд░рдордг рдХреИрд╕реЗ рдХрд░реЗрдВ </h2><br>  рдпрджрд┐ рдЖрдк рдХреНрд╡реЗрдХ 3 рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдФрд░ рдЗрд╕реЗ рд╕реНрд╡рдпрдВ рдЪрд▓рд╛рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдзреНрдпрд╛рди рд░рдЦреЗрдВ рдХрд┐ рдЖрдкрдХреЛ рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдХреНрд╡реЗрдХ 3 рдЧреЗрдо рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдпрд╛ рдбреЗрдореЛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред  рдЖрдкрдХреЛ C2Rust рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА (рд▓реЗрдЦрди рдХреЗ рд╕рдордп, рд░рд╛рдд рдХрд╛ рдЖрд╡рд╢реНрдпрдХ рд╕рдВрд╕реНрдХрд░рдг <code>nightly-2019-12-05</code> , рд▓реЗрдХрд┐рди рд╣рдо рдЕрдиреБрд╢рдВрд╕рд╛ рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдк рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП C2Rust <a href="https://github.com/immunant/c2rust">рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА</a> рдпрд╛ <a href="https://crates.io/crates/c2rust">crates.io</a> рдкрд░ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ: <br><br><pre> <code class="bash hljs">$ cargo +nightly-2019-12-05 install c2rust</code> </pre> <br>  рдФрд░ рд╣рдорд╛рд░реЗ C2Rust рдФрд░ ioquake3 рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреА рдкреНрд░рддрд┐рдпрд╛рдВ: <br><br><pre> <code class="bash hljs">$ git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> &lt;a href=<span class="hljs-string"><span class="hljs-string">"/cdn-cgi/l/email-protection"</span></span> class=<span class="hljs-string"><span class="hljs-string">"__cf_email__"</span></span> data-cfemail=<span class="hljs-string"><span class="hljs-string">"dcbbb5a89cbbb5a8b4a9bef2bfb3b1"</span></span>&gt;[email protected]&lt;/a&gt;:immunant/c2rust.git $ git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> &lt;a href=<span class="hljs-string"><span class="hljs-string">"/cdn-cgi/l/email-protection"</span></span> class=<span class="hljs-string"><span class="hljs-string">"__cf_email__"</span></span> data-cfemail=<span class="hljs-string"><span class="hljs-string">"dcbbb5a89cbbb5a8b4a9bef2bfb3b1"</span></span>&gt;[email protected]&lt;/a&gt;:immunant/ioq3.git</code> </pre> <br>  рдКрдкрд░ рджрд┐рдП рдЧрдП рдЖрджреЗрд╢ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ <code>c2rust</code> рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд╡рд┐рдХрд▓реНрдк рдХреЗ рд░реВрдк рдореЗрдВ, рдЖрдк <code>cargo build --release</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ C2Rust рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдХрд┐рд╕реА рднреА рдорд╛рдорд▓реЗ рдореЗрдВ, C2Rust рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреА рдЕрднреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдореЗрдВ ioquake3 рдЯреНрд░рд╛рдВрд╕рдкреНрд▓рд┐рдореЗрдВрдЯреЗрд╢рди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдХрдВрдкрд╛рдЗрд▓рд░ рдЖрд╡рд░рдг рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред <br><br>  рд╣рдордиреЗ рдПрдХ <a href="">рд╕реНрдХреНрд░рд┐рдкреНрдЯ</a> рдкреЛрд╕реНрдЯ рдХреА рд╣реИ рдЬреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕реА рдХреЛрдб рдЯреНрд░рд╛рдВрд╕рдкреЛрд░реНрдЯ рдХрд░рддреА рд╣реИ рдФрд░ <code>ssemask</code> рдкреИрдЪ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреА рд╣реИред  рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <code>ioq3</code> рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЗ рд╢реАрд░реНрд╖ рд╕реНрддрд░ рд╕реЗ рдирд┐рдореНрди рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдБ: <br><br><pre> <code class="bash hljs">$ ./transpile.sh &lt;/path/to/C2Rust repository&gt; &lt;/path/to/c2rust binary&gt;</code> </pre> <br>  рдЗрд╕ рдХрдорд╛рдВрдб рдХреЛ Rust рдХреЛрдб рдпреБрдХреНрдд рдПрдХ рдЙрдкрдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ <code>quake3-rs</code> рдмрдирд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рдЖрдк <code>cargo build --release</code> рдФрд░ рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рд╢реЗрд╖ рдЪрд░рдгреЛрдВ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi483142/">https://habr.com/ru/post/hi483142/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi483130/index.html">рдЕрдЧрд░ рд╕реВрдЯрдХреЗрд╕ рдХреЗ рд▓реЙрдХ рдХрд╛ рдХреЛрдб рднреВрд▓ рдЬрд╛рдП рддреЛ рдХреНрдпрд╛ рдХрд░реЗрдВ?</a></li>
<li><a href="../hi483132/index.html">рдЯреЗрд▓реАрд╕реНрдХреЛрдк рдХрд╛ рдбрд┐рдЬрд╛рдЗрди рдФрд░ рдирд┐рд░реНрдорд╛рдг</a></li>
<li><a href="../hi483134/index.html">рджреЛ-рдХрд╛рд░рдХ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдкрд░реАрдХреНрд╖рдг рдФрд░ рд╕рдВрднрд╡ рд╡рд░реНрдХрдЕрд░рд╛рдЙрдВрдб</a></li>
<li><a href="../hi483136/index.html">рдЪреЗрдХрдмреБрдХ рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдореИрдХрдмреБрдХ рдЦрд░реАрджрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдХрд░реЗрдВ - рдЪреЗрдХ рд▓рд┐рд╕реНрдЯ</a></li>
<li><a href="../hi483140/index.html">рдкреЙрд▓реАрдЧрдиреНрд╕ рдЕрджрд░ рд╡рд░реНрд▓реНрдб: рдЕрдорд┐рдЧрд╛ 500</a></li>
<li><a href="../hi483144/index.html">рд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рд╡рд╣ рдЬрд┐рдпрд╛рдирдХреБрдИ рдПрдХ рдирд╛рдпрдХ рд╣реИ, рдЕрдкрд░рд╛рдзреА рдирд╣реАрдВ</a></li>
<li><a href="../hi483146/index.html">DEFCON 27 рд╕рдореНрдореЗрд▓рдиред рдХреНрд░реИрдХрди рд╡рд╛рдпрд░рд▓реЗрд╕ рд╡рд╛рдИрдлрд╛рдИ рд╣реИрдХрд┐рдВрдЧ рдЯреВрд▓</a></li>
<li><a href="../hi483148/index.html">рд╣рдо рдПрдХ рдкрд░рд╛рдорд░реНрд╢ рдХрдВрдкрдиреА рдХреЗ рд╕рдВрд╕реНрдерд╛рдкрдХ рдХреЗ рд╕рд╛рде рдбрд┐рдЬрд┐рдЯрд▓ рдЬреБрдбрд╝рд╡рд╛рдБ рдФрд░ рд╕рд┐рдореБрд▓реЗрд╢рди рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi483154/index.html">рдореИрдВрдиреЗ $ 40 рд╣рдЬрд╛рд░ рдЦрд░реНрдЪ рдХрд┐рдП рдФрд░ рдПрдХ рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдХреЗ рд▓рд┐рдП рдПрдХ рдорд╣рд╛рди рд╡рд┐рдЪрд╛рд░ рдХреЛ рдмрд░реНрдмрд╛рдж рдХрд░ рджрд┐рдпрд╛</a></li>
<li><a href="../hi483156/index.html">рдмрд┐рд▓реНрд▓реА рдХреЛ рдЙрд╕рдХреЗ рдкреИрд░реЛрдВ рдкрд░ рд░рдЦреЛ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>