<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçü§ù‚Äçüë®üèª üåπ ü•Å Comment se faire des amis PLUTO et HDSDR üçµ üçΩÔ∏è ‚ùì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il n'y a pas si longtemps, j'ai achet√© impulsivement un √©metteur-r√©cepteur SDR mignon pour les enfants et les jeunes - ADALM PLUTO. √Ä mon regret, il f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment se faire des amis PLUTO et HDSDR</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/441676/"><img src="https://habrastorage.org/webt/dx/vl/5c/dxvl5cuxvc4qn7duv1lossoiz2c.jpeg"><br><br><p>  Il n'y a pas si longtemps, j'ai achet√© impulsivement un √©metteur-r√©cepteur SDR mignon pour les enfants et les jeunes - ADALM PLUTO.  √Ä mon regret, il fonctionne avec un tas de logiciels pour LINUX, mais mon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HDSDR</a> pr√©f√©r√© ne le prend pas en charge.  Sans y r√©fl√©chir √† deux fois, j'ai commenc√© √† traiter ce probl√®me et voici ce qui en est sorti: <br><a name="habracut"></a><br></p><p>  Analog Devices adresse son PLUTO aux √©tudiants.  Tous les logiciels pour PLUTO sont ouverts et disponibles gratuitement.  Le site Web de la soci√©t√© comporte une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">page</a> o√π vous pouvez trouver presque toutes les informations n√©cessaires sur le fonctionnement de PLUTO.  La plupart des logiciels sont √©crits sous Linux et les √©tudiants sont invit√©s √† utiliser GNU Radio, MATLAB, etc. <br><br></p><p>  J'ai un int√©r√™t radio purement amateur pour PLUTO.  Un SDR avec une plage de 70 MHz √† 6 GHz (apr√®s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">divulgation</a> ) pour seulement 150 dollars am√©ricains est un miracle.  Combien d'exp√©riences peuvent √™tre faites!  Voyez combien tout y est int√©gr√©: <br><br></p><p><img src="https://habrastorage.org/webt/ao/wg/mn/aowgmnuvpv1nj7kzloexjef5-fy.jpeg"><br><br></p><p>  Apparemment, AD estime que les jambons eux-m√™mes devraient √©crire des pilotes pour les programmes populaires, donc jusqu'√† r√©cemment, m√™me SDR # n'√©tait pas pris en charge.  Mais SDR # ne me convient pas, car j'ai besoin d'un bon support CAT dans un programme pour synchroniser la fr√©quence avec un √©metteur-r√©cepteur.  Je voudrais essayer d'utiliser HDSDR comme r√©cepteur panoramique en le connectant √† la premi√®re fr√©quence interm√©diaire de l'√©metteur-r√©cepteur.  Il n'y a donc qu'une seule issue: int√©grer HDSDR et PLUTO vous-m√™me. <br><br></p><p>  En utilisant Google, j'ai rapidement d√©couvert que pour r√©soudre mon probl√®me, je dois cr√©er une biblioth√®que sp√©ciale ExtIO_.dll au format <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Winrad</a> .  Cette biblioth√®que sert de pont logiciel entre le HDSDR et le r√©cepteur SDR souhait√©.  Heureusement, l'interface de la biblioth√®que est bien <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">document√©e</a> .  De plus, il existe un certain nombre d'impl√©mentations de biblioth√®que pr√™tes √† l'emploi pour divers r√©cepteurs sur github: RTL_SDR, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LimeSDR</a> , etc. Il y avait un endroit pour voir comment √©crire du code.  La biblioth√®que elle-m√™me est assez ancienne, pas de nouvelles technologies, du pur C89, comme ils l'√©crivaient il y a 20 ans.  Au moins, vous n'avez pas besoin d'apprendre un nouveau langage de programmation, qui a d√©j√† inspir√© l'espoir de r√©ussir. <br><br></p><p>  Essentiellement, ExtIO_.dll doit √™tre impl√©ment√© avec des dizaines de fonctions qui vous permettent d'initialiser l'√©quipement SDR, de d√©marrer et d'arr√™ter la r√©ception du signal, d'enregistrer et de restaurer les param√®tres sp√©cifi√©s.  Pour moi, le moment le plus incompr√©hensible a √©t√© le format de l'√©change de donn√©es en streaming entre le r√©cepteur et le HDSDR, mais plus √† ce sujet ci-dessous. <br><br></p><p>  Maintenant, la question s'est pos√©e de savoir comment contr√¥ler PLUTO par programmation.  Il existe en fait plusieurs options de contr√¥le.  J'en ai trouv√© au moins deux: soit directement avec la puce via la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">libad9361.dll</a> , soit via la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IIO</a> .  Cette derni√®re option me semblait plus simple et mieux d√©crite, alors je me suis install√©e.  Dans cette biblioth√®que, tous les param√®tres d'√©quipement sont disponibles sous la forme d'une sorte de structure XML, un √©l√©ment individuel est accessible par le nom textuel de la propri√©t√©, ce qui est assez pratique.  Une description plus d√©taill√©e de la biblioth√®que peut √™tre trouv√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  L'√©norme avantage de la biblioth√®que est qu'elle est livr√©e avec des utilitaires de ligne de commande, avec lesquels vous pouvez toujours modifier rapidement les param√®tres de r√©cepteur souhait√©s.  Ainsi, vous n'avez pas besoin d'impl√©menter tous les param√®tres SDR dans l'interface HDSDR, vous pouvez vous en tirer avec le minimum n√©cessaire.  Et le chargement d'un filtre FIR exotique peut √™tre effectu√© √† partir de la ligne de commande, si jamais un tel besoin se pose.  Flux de donn√©es dans IIO: <br><br></p><p><img src="https://habrastorage.org/webt/ce/dz/bh/cedzbhmsy9z56vdehgcoaas5hmk.png"><br><br></p><p>  Par programme, apprendre √† contr√¥ler PLUTO √† partir de HDSDR a √©t√© assez rapide et facile.  Il √©tait un peu plus difficile d'obtenir un r√©sultat satisfaisant en streaming de donn√©es, d'autant plus que je n'avais aucune exp√©rience pr√©alable avec SDR.  Ici, vous devez comprendre que les donn√©es proviennent du r√©cepteur SDR sous la forme d'un flux d'√©chantillons I / Q / I / Q ... I / Q.  Chaque √©chantillon est un entier de 16 bits non sign√©, dont seuls 12 bits de poids faible comptent.  Dans le m√™me temps, HDSDR dispose d'une douzaine d'options pour recevoir des flux de donn√©es.  Laquelle est la plus pratique et la meilleure n'est pas enti√®rement claire pour moi.  En cons√©quence, j'ai opt√© pour l'option, qui dans ExtIO s'appelle exthwUSBdata16, c'est-√†-dire  en fait, un √† un, comment la biblioth√®que IIO fournit des donn√©es. <br>  Le probl√®me suivant √©tait le transfert de donn√©es entre les tampons de r√©ception IIO et HDSDR.  Ce dernier re√ßoit des donn√©es dans des blocs qui sont des multiples de 512 octets, et IIO ne peut pas sortir de donn√©es dans ce format.  J'ai d√ª faire un tampon interm√©diaire et transf√©rer le flux √† travers lui.  Le code de transmission est indiqu√© ci-dessous. <br><br></p><p></p><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">DWORD WINAPI </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GeneratorThreadProc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( __in LPVOID lpParameter )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span> iqbuf[EXT_BLOCKLEN * <span class="hljs-number"><span class="hljs-number">2</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">ssize_t</span></span> nbytes_rx; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *p_dat, *p_end; <span class="hljs-keyword"><span class="hljs-keyword">ptrdiff_t</span></span> p_inc; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> iqcnt = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// pointer to sample in iqbuf while ( !gbExitThread ) { nbytes_rx = iio_buffer_refill(rxbuf); p_inc = iio_buffer_step(rxbuf); p_end = (char *)iio_buffer_end(rxbuf); for (p_dat = (char *)iio_buffer_first(rxbuf, rx0_i); p_dat &lt; p_end; p_dat += p_inc) { iqbuf[iqcnt++] = ((int16_t*)p_dat)[0]; iqbuf[iqcnt++] = ((int16_t*)p_dat)[1]; if (iqcnt == EXT_BLOCKLEN * 2) { // buffer full iqcnt = 0; pfnCallback(EXT_BLOCKLEN, 0, 0.0F, &amp;iqbuf[0]); } } } gbExitThread = false; gbThreadRunning = false; return 0; }</span></span></code> </pre> <br><p>  En utilisant le cycle indiqu√©, il a √©t√© possible d'obtenir un transfert de flux de 4 MS / s, au-dessus de cette valeur, les donn√©es n'ont pas le temps d'√™tre transmises et le signal est re√ßu avec un b√©gaiement, bien que le fer semble pouvoir envoyer 20 MS / s et m√™me plus.  Augmentation de la priorit√© du thread dans lequel la boucle tourne √† THREAD_PRIORITY_TIME_CRITICAL, augmentation de la taille des tampons.  Aucun r√©sultat.  De plus, lorsque la m√©moire tampon a √©t√© augment√©e √† 1 Mo, la r√©ception normale √©tait impossible au d√©bit minimum.  Plus ici ne signifie pas mieux.  Si vous avez des id√©es sur la fa√ßon d'augmenter la vitesse, partagez-les dans les commentaires. <br><br></p><p>  Je dois dire que 4 MS / s est assez suffisant pour mes besoins, le groupe couvre plus que n'importe quel groupe amateur HF.  Oui, et sur les bandes VHF et micro-ondes suffisamment pour la plupart des t√¢ches.  Par cons√©quent, la biblioth√®que est √©crite, la fen√™tre HDSDR avec PLUTO activ√© pour la r√©ception ressemble √† ceci: <br><br></p><p><img src="https://habrastorage.org/webt/bz/sd/hb/bzsdhbg83dfjqv9iokbtcpwltbi.jpeg"><br><br></p><p>  Tout le code de la biblioth√®que est disponible sur github <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  N'h√©sitez pas √† l'utiliser pour vos exp√©riences avec ADALM PLUTO. <br><br></p><p>  73 de R2AJP </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr441676/">https://habr.com/ru/post/fr441676/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr441654/index.html">Comment partir en stage dans une grande entreprise informatique</a></li>
<li><a href="../fr441660/index.html">STM32F103C8T6 en tant que lecteur flash avec syst√®me de fichiers FAT12</a></li>
<li><a href="../fr441664/index.html">Linus Torvalds ne pense pas que les serveurs de l'architecture ARM remplaceront x86. ¬´Vendre un mod√®le 64 bits - idiotie¬ª</a></li>
<li><a href="../fr441668/index.html">STM32. Pratique de perte de poids ou r√©gime pour le contr√¥leur</a></li>
<li><a href="../fr441674/index.html">Disposition de test? Facile</a></li>
<li><a href="../fr441678/index.html">Jeu physique des tornades: comment l'a√©rodynamique est impl√©ment√©e dans Just Cause 4 (trafic)</a></li>
<li><a href="../fr441680/index.html">Programme de la conf√©rence Lua √† Moscou 2019</a></li>
<li><a href="../fr441682/index.html">HyperX Fury 3D - SSD avec un pedigree clair</a></li>
<li><a href="../fr441684/index.html">Pr√©dictions: les nuages ‚Äã‚Äãvont changer 2019</a></li>
<li><a href="../fr441686/index.html">Comment nous avons impl√©ment√© le cache sur la base de donn√©es Tarantool</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>