<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìç üåö üç∫ Erstellen eines Katzenhakens in Unity. Teil 2 üèùÔ∏è üí© üçü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hinweis : Dieses Lernprogramm richtet sich an fortgeschrittene und erfahrene Benutzer und behandelt keine Themen wie das Hinzuf√ºgen von Komponenten, d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen eines Katzenhakens in Unity. Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415217/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/db0/187/d5e/db0187d5e9f5fc2bfa78b078dcb2a178.png" alt="Bild"></div><br><blockquote> <em>Hinweis</em> : Dieses Lernprogramm richtet sich an fortgeschrittene und erfahrene Benutzer und behandelt keine Themen wie das Hinzuf√ºgen von Komponenten, das Erstellen neuer GameObject-Skripts und die C # -Syntax.  Wenn Sie Ihre Unity-Kenntnisse verbessern m√ºssen, lesen Sie unsere Tutorials <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Erste Schritte mit Unity</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einf√ºhrung in Unity Scripting</a> . </blockquote><br>  Im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ersten Teil des</a> Tutorials haben wir gelernt, wie man einen Katzenhaken mit der Mechanik des Wickelns eines Seils um Hindernisse erstellt.  Wir wollen jedoch mehr: Das Seil kann sich um Objekte auf der Ebene wickeln, l√∂st sich jedoch nicht, wenn Sie zur√ºckkehren. <br><a name="habracut"></a><br><h2>  An die Arbeit gehen </h2><br>  √ñffnen Sie das fertige Projekt aus dem ersten Teil von Unity oder laden Sie den <a href="">Entwurf</a> f√ºr diesen Teil des Tutorials herunter und √∂ffnen <em>Sie</em> dann <em>2DGrapplingHook-Part2-Starter</em> .  Wie im ersten Teil werden wir Unity Version 2017.1 oder h√∂her verwenden. <br><br>  √ñffnen Sie die Spielszene im Editor aus dem Projektordner " <em>Szenen</em> ". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/89c/ee3/48c/89cee348caa1656418bcc0ded8e91bab.png"></div><br>  Starten Sie die Spielszene und versuchen Sie, den Katzenhaken an den Steinen √ºber dem Charakter zu befestigen. Schwingen Sie dann, damit sich das Seil um ein Paar Steinkanten wickelt. <br><br>  Wenn Sie zur√ºckkehren, werden Sie feststellen, dass sich die Punkte des Steins, durch die sich das Seil gedreht hat, nicht wieder l√∂sen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4e9/d83/da7/4e9d83da7eda544a3f48cecbf3e64b08.gif"></div><br>  Denken Sie an den Punkt, an dem sich das Seil entfalten soll.  Um die Aufgabe zu vereinfachen, ist es besser, den Fall zu verwenden, wenn sich das Seil um die Kanten wickelt. <br><br>  Wenn die Schnecke, die an einem Stein √ºber ihrem Kopf haftet, nach rechts schwingt, biegt sich das Seil nach der Schwelle, an der es den 180-Grad-Winkelpunkt mit der Rippe kreuzt, an der die Schnecke gerade befestigt ist.  In der folgenden Abbildung wird dies durch einen hervorgehobenen gr√ºnen Punkt angezeigt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3eb/257/132/3eb25713213c01fb76fb97c49e6958cf.png"></div><br>  Wenn die Schnecke in die andere Richtung zur√ºckschwingt, sollte sich das Seil an derselben Stelle wieder aushaken (in der obigen Abbildung rot hervorgehoben): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ef/ad3/e22/2efad3e22fddf83cefcf52fca6175792.png"></div><br><h2>  Die Logik des Aufdrehens </h2><br>  Um den Moment zu berechnen, in dem Sie das Seil an den Stellen, um die es zuvor gewickelt wurde, aufdrehen m√ºssen, ben√∂tigen wir Kenntnisse der Geometrie.  Insbesondere werden wir einen Winkelvergleich verwenden, um zu bestimmen, wann sich das Seil von der Kante l√∂sen soll. <br><br>  Diese Aufgabe mag ein wenig einsch√ºchternd wirken.  Mathematik kann selbst bei den Mutigsten Entsetzen und Verzweiflung hervorrufen. <br><br>  Gl√ºcklicherweise hat Unity einige gro√üartige mathematische Hilfsfunktionen, die unser Leben ein bisschen einfacher machen k√∂nnen. <br><br>  √ñffnen Sie das <em>RopeSystem-</em> Skript in der IDE und erstellen Sie eine neue Methode namens <code>HandleRopeUnwrap()</code> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleRopeUnwrap</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { }</code> </pre> <br>  Gehen Sie zu <code>Update()</code> und f√ºgen Sie ganz am Ende einen Aufruf unserer neuen Methode hinzu. <br><br><pre> <code class="cs hljs">HandleRopeUnwrap();</code> </pre> <br>  W√§hrend <code>HandleRopeUnwrap()</code> nichts tut, k√∂nnen wir jetzt die Logik verarbeiten, die mit dem gesamten Prozess des Abl√∂sens von den Kanten verbunden ist. <br><br>  Wie Sie sich aus dem ersten Teil des Tutorials erinnern, haben wir die <code>ropePositions</code> in einer Sammlung <code>ropePositions</code> , bei der es sich um eine <code>List&lt;Vector2&gt;</code> -Sammlung handelt.  Jedes Mal, wenn sich ein Seil um eine Kante wickelt, behalten wir die Position dieses Wickelpunkts in dieser Sammlung bei. <br><br>  Um den Prozess effizienter zu gestalten, f√ºhren wir in <code>HandleRopeUnwrap()</code> keine Logik aus, wenn die Anzahl der in der Auflistung gespeicherten Positionen gleich oder kleiner als 1 ist. <br><br>  Mit anderen Worten, wenn der Butzen am Startpunkt eingehakt ist und sein Seil noch nicht um die Kanten gewickelt ist, betr√§gt die Anzahl der <code>ropePositions</code> 1, und wir folgen nicht der Aufdrehverarbeitungslogik. <br><br>  F√ºgen Sie diese einfache <code>return</code> oben in <code>HandleRopeUnwrap()</code> , um wertvolle CPU-Zyklen zu speichern, da diese Methode mehrmals pro Sekunde von <code>Update()</code> aufgerufen wird. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ropePositions.Count &lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; }</code> </pre> <br><h3>  Neue Variablen hinzuf√ºgen </h3><br>  In diesem neuen Test werden wir einige Dimensionen und Verweise auf die verschiedenen Winkel hinzuf√ºgen, die zur Implementierung der Basis der Aufdrehlogik erforderlich sind.  F√ºgen Sie <code>HandleRopeUnwrap()</code> den folgenden Code <code>HandleRopeUnwrap()</code> : <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// Hinge =       // Anchor =     Hinge // Hinge Angle =   anchor  hinge // Player Angle =   anchor  player // 1 var anchorIndex = ropePositions.Count - 2; // 2 var hingeIndex = ropePositions.Count - 1; // 3 var anchorPosition = ropePositions[anchorIndex]; // 4 var hingePosition = ropePositions[hingeIndex]; // 5 var hingeDir = hingePosition - anchorPosition; // 6 var hingeAngle = Vector2.Angle(anchorPosition, hingeDir); // 7 var playerDir = playerPosition - anchorPosition; // 8 var playerAngle = Vector2.Angle(anchorPosition, playerDir);</span></span></code> </pre> <br>  Da es hier viele Variablen gibt, werde ich jede erkl√§ren und eine praktische Illustration hinzuf√ºgen, die hilft, ihren Zweck zu verstehen. <br><br><ol><li>  <code>anchorIndex</code> ist der Index in der <code>ropePositions</code> Auflistung an zwei Positionen ab dem Ende der Auflistung.  Wir k√∂nnen es als einen Punkt in zwei Positionen auf dem Seil von der Position der Schnecke aus betrachten.  In der folgenden Abbildung ist dies der erste Befestigungspunkt des Hakens an der Oberfl√§che.  Wenn Sie die Sammlung " <code>ropePositions</code> neuen <code>ropePositions</code> f√ºllen, <code>ropePositions</code> dieser Punkt immer der <code>ropePositions</code> in einem Abstand von zwei Positionen von der Schnecke. </li><li>  <code>hingeIndex</code> ist der Index der Sammlung, in dem der Punkt des aktuellen Scharniers <code>hingeIndex</code> ist.  Mit anderen Worten, die Position, in der sich das Seil gerade um den Punkt wickelt, der dem Ende des Seils von der Schnecke am n√§chsten liegt.  Es befindet sich immer in einem Abstand von einer Position von der Schnecke, weshalb <code>ropePositions.Count - 1</code> verwenden. <code>ropePositions.Count - 1</code> . </li><li>  <code>anchorPosition</code> berechnet, indem auf die <code>anchorIndex</code> Stelle in der <code>ropePositions</code> Auflistung <code>ropePositions</code> , und ist der einfache Vector2-Wert dieser Position. </li><li>  <code>hingePosition</code> berechnet, indem auf die Stelle von <code>hingeIndex</code> in der Sammlungeilsektionen <code>ropePositions</code> , und ist der einfache Vector2-Wert dieser Position. </li><li>  <code>hingeDir</code> ist ein Vektor, der von <code>anchorPosition</code> zu <code>hingePosition</code> .  Es wird in der folgenden Variablen verwendet, um den Winkel zu erhalten. </li><li>  <code>hingeAngle</code> - Die n√ºtzliche <code>Vector2.Angle()</code> wird hier verwendet, um den Winkel zwischen <code>anchorPosition</code> und dem Scharnierpunkt zu berechnen. </li><li>  <code>playerDir</code> ist ein Vektor, der von <code>anchorPosition</code> zur aktuellen Position des Slugs (playerPosition) geleitet wird. </li><li>  Dann wird unter Verwendung des Winkels zwischen dem Ankerpunkt und dem Spieler (Slug) <code>playerAngle</code> berechnet. </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/73f/207/4c4/73f2074c470b3016bcd5ee386ce240e8.png"></div><br>  Alle diese Variablen werden unter Verwendung von Positionen berechnet, die als Vector2-Werte in der <code>ropePositions</code> Sammlung gespeichert sind, und unter Verwendung dieser Positionen mit anderen Positionen oder der aktuellen Position des Spielers (Slug). <br><br>  Die beiden wichtigen Variablen, die zum Vergleich verwendet werden, sind <code>hingeAngle</code> und <code>hingeAngle</code> . <br><br>  Der in <code>hingeAngle</code> gespeicherte <code>hingeAngle</code> muss statisch bleiben, da er immer einen konstanten Winkel zwischen dem Punkt an den beiden ‚ÄûFalten des Seils‚Äú von der Schnecke und der aktuellen ‚ÄûFalte des Seils‚Äú aufweist, die der Schnecke am n√§chsten liegt und sich erst bewegt, wenn das Seil gel√∂st oder nach dem Falten ist Ein neuer Biegepunkt wird hinzugef√ºgt. <br><br>  Wenn die Schnecke <code>playerAngle</code> √§ndert sich <code>playerAngle</code> .  Durch Vergleichen dieses Winkels mit <code>hingeAngle</code> und √úberpr√ºfen, ob sich der Butzen links oder rechts von dieser Ecke befindet, k√∂nnen wir bestimmen, ob der aktuelle <code>hingeAngle</code> , der dem Butzen am n√§chsten liegt, entfernt werden soll. <br><br>  Im ersten Teil dieses Tutorials haben wir die <code>wrapPointsLookup</code> in einem W√∂rterbuch namens <code>wrapPointsLookup</code> .  Jedes Mal, wenn wir den Biegepunkt speichern, haben wir ihn dem W√∂rterbuch mit der Position als Schl√ºssel und mit 0 als Wert hinzugef√ºgt.  Dieser Wert von 0 war jedoch ziemlich mysteri√∂s, oder? <br><br>  Wir werden diesen Wert verwenden, um die Position der Schnecke relativ zu ihrem Winkel zum Scharnierpunkt (dem aktuellen Falzpunkt, der der Schnecke am n√§chsten liegt) zu speichern. <br><br>  Wenn Sie einen Wert von <em>-1</em> zuweisen, ist der Winkel der <code>hingeAngle</code> ( <code>hingeAngle</code> ) kleiner als der Winkel des Scharniers ( <code>hingeAngle</code> ), und bei einem Wert von <em>1 ist der</em> Winkel von <code>hingeAngle</code> gr√∂√üer als der <code>hingeAngle</code> . <br><br>  Aufgrund der Tatsache, dass wir die Werte im W√∂rterbuch <code>hingeAngle</code> , k√∂nnen wir jedes Mal, wenn wir <code>hingeAngle</code> mit <code>hingeAngle</code> vergleichen, nachvollziehen, ob die Schnecke gerade die Grenze √ºberschritten hat, nach der sich das Seil l√∂sen sollte. <br><br>  Es kann anders erkl√§rt werden: Wenn der Winkel der Schnecke gerade √ºberpr√ºft wurde und kleiner als der Scharnierwinkel ist, aber beim letzten Speichern im W√∂rterbuch der Biegepunkte mit einem Wert markiert wurde, der angibt, dass er sich auf der anderen Seite dieser Ecke befindet, sollte der Punkt entfernt werden ! <br><br><h3>  Seil abkuppeln </h3><br>  Schauen Sie sich den Screenshot unten mit Notizen an.  Unsere Schnecke klammerte sich an den Felsen, schwankte nach oben und wickelte auf dem Weg nach oben ein Seil um den Rand des Felsens. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/db0/187/d5e/db0187d5e9f5fc2bfa78b078dcb2a178.png"></div><br>  M√∂glicherweise stellen Sie fest, dass an der obersten Schwenkposition, an der die Schnecke undurchsichtig ist, der aktuell n√§chstgelegene <code>wrapPointsLookup</code> (mit einem wei√üen Punkt markiert) im <code>wrapPointsLookup</code> W√∂rterbuch mit dem Wert <em>1</em> gespeichert wird. <br><br>  Auf dem Weg nach unten wird eine √úberpr√ºfung durchgef√ºhrt, wenn <code>hingeAngle</code> kleiner als <code>hingeAngle</code> (zwei gestrichelte gr√ºne Linien), wie durch den blauen Pfeil angezeigt. Wenn der letzte (aktuelle) Wert des Biegepunkts <em>1 war</em> , sollte der Biegepunkt entfernt werden. <br><br>  Lassen Sie uns diese Logik nun in Code implementieren.  Bevor wir beginnen, erstellen wir ein Leerzeichen der Methode, mit der wir uns abwickeln.  Aus diesem Grund f√ºhrt das Erstellen der Logik nach dem Erstellen nicht zu einem Fehler. <br><br>  F√ºgen Sie eine neue <code>UnwrapRopePosition(anchorIndex, hingeIndex)</code> Methode <code>UnwrapRopePosition(anchorIndex, hingeIndex)</code> indem Sie die folgenden Zeilen einf√ºgen: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UnwrapRopePosition</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> anchorIndex, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> hingeIndex</span></span></span><span class="hljs-function">)</span></span> { }</code> </pre> <br>  Nachdem Sie dies getan haben, <code>HandleRopeUnwrap()</code> zu <code>HandleRopeUnwrap()</code> .  <code>hingeAngle</code> unter den neu hinzugef√ºgten Variablen die folgende Logik hinzu, die zwei F√§lle behandelt: <code>playerAngle</code> weniger als <code>hingeAngle</code> und <code>hingeAngle</code> mehr als <code>hingeAngle</code> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (playerAngle &lt; hingeAngle) { <span class="hljs-comment"><span class="hljs-comment">// 1 if (wrapPointsLookup[hingePosition] == 1) { UnwrapRopePosition(anchorIndex, hingeIndex); return; } // 2 wrapPointsLookup[hingePosition] = -1; } else { // 3 if (wrapPointsLookup[hingePosition] == -1) { UnwrapRopePosition(anchorIndex, hingeIndex); return; } // 4 wrapPointsLookup[hingePosition] = 1; }</span></span></code> </pre> <br>  Dieser Code sollte der Erl√§uterung der oben beschriebenen Logik f√ºr den ersten Fall entsprechen (wenn <code>hingeAngle</code> &lt; <code>hingeAngle</code> ), behandelt aber auch den zweiten Fall (wenn <code>hingeAngle</code> &gt; <code>hingeAngle</code> ). <br><br><ol><li>  Wenn der aktuelle <code>hingeAngle</code> , der dem Slug am n√§chsten liegt, an dem Punkt, an dem <code>hingeAngle</code> &lt; <code>hingeAngle</code> , den Wert <em>1</em> <code>hingeAngle</code> , entfernen wir diesen Punkt und f√ºhren eine R√ºckgabe durch, damit der Rest der Methode nicht ausgef√ºhrt wird. </li><li>  Andernfalls wird <em>-1</em> zugewiesen, wenn der <code>hingeAngle</code> nicht zuletzt mit dem Wert <em>1</em> markiert wurde, <code>playerAngle</code> kleiner als <code>hingeAngle</code> <em>ist</em> . </li><li>  Wenn der aktuelle <code>hingeAngle</code> , der dem Butzen am n√§chsten liegt, <em>-1</em> an dem Punkt ist, an dem <code>hingeAngle</code> &gt; <code>hingeAngle</code> , entfernen Sie den Punkt und kehren Sie zur√ºck. </li><li>  Andernfalls ordnen wir die Eintr√§ge im W√∂rterbuch der Biegepunkte an der Scharnierposition <em>1 zu</em> . </li></ol><br>  Dieser Code stellt sicher, dass das <code>wrapPointsLookup</code> W√∂rterbuch immer aktualisiert wird, und stellt sicher, dass der Wert des aktuellen <code>wrapPointsLookup</code> (der dem Butzen am n√§chsten liegt) mit dem aktuellen Butzenwinkel relativ zum <code>wrapPointsLookup</code> . <br><br>  Vergessen Sie nicht, dass der Wert -1 ist, wenn der Schwenkwinkel kleiner als der Scharnierwinkel (relativ zum Referenzpunkt) ist, und 1, wenn der Schwenkwinkel gr√∂√üer als der Scharnierwinkel ist. <br><br>  Jetzt <code>UnwrapRopePosition()</code> wir <code>UnwrapRopePosition()</code> im <em>RopeSystem-</em> Skript <em>mit einem</em> Code, der sich direkt <em>mit</em> dem <em>Entkoppeln befasst</em> , die Referenzposition verschiebt und dem <em>Seilentfernungswert</em> DistanceJoint2D einen neuen Abstandswert zuweist.  F√ºgen Sie der zuvor erstellten Methoden-CD die folgenden Zeilen hinzu: <br><br><pre> <code class="cs hljs"> <span class="hljs-comment"><span class="hljs-comment">// 1 var newAnchorPosition = ropePositions[anchorIndex]; wrapPointsLookup.Remove(ropePositions[hingeIndex]); ropePositions.RemoveAt(hingeIndex); // 2 ropeHingeAnchorRb.transform.position = newAnchorPosition; distanceSet = false; // Set new rope distance joint distance for anchor position if not yet set. if (distanceSet) { return; } ropeJoint.distance = Vector2.Distance(transform.position, newAnchorPosition); distanceSet = true;</span></span></code> </pre> <br><ol><li>  Der Index des aktuellen Ankerpunkts (die zweite Position des Seils von der Schnecke) wird zur neuen Position des Scharniers, und die alte Position des Scharniers wird entfernt (die Position, die zuvor der Schnecke am n√§chsten war und die wir jetzt ‚Äûaufdrehen‚Äú).  Der Variablen <code>newAnchorPosition</code> in der Liste der <code>newAnchorPosition</code> der Wert <code>anchorIndex</code> zugewiesen.  Es wird dann verwendet, um die aktualisierte Position des Ankerpunkts zu positionieren. </li><li>  Das Seilgelenk RigidBody2D (an dem das DistanceJoint2D-Seil befestigt ist) √§ndert seine Position in die neue Position des Ankerpunkts.  Dies gew√§hrleistet eine reibungslose kontinuierliche Bewegung des Butzens am Seil, wenn es mit DistanceJoint2D verbunden ist, und diese Verbindung sollte es ihm erm√∂glichen, weiter relativ zur neuen Position zu schwingen, die zur Referenz wurde - mit anderen Worten, relativ zum n√§chsten Punkt des Seils von seiner Position aus. </li><li>  Anschlie√üend m√ºssen Sie den Entfernungswert von distanceJoint2D aktualisieren, um eine starke √Ñnderung der Entfernung von der Schnecke zum neuen Referenzpunkt zu ber√ºcksichtigen.  Wenn dies noch nicht geschehen ist, wird eine schnelle √úberpr√ºfung des <code>distanceSet</code> Flags durchgef√ºhrt, und der Distanz wird der Wert der berechneten Distanz zwischen dem Butzen und der neuen Position des Ankerpunkts zugewiesen. </li></ol><br>  Speichern Sie das Skript und kehren Sie zum Editor zur√ºck.  Starten Sie das Spiel erneut und beobachten Sie, wie sich das Seil von den Kanten l√∂st, wenn die Schnecke die Schwellenwerte jedes Biegepunkts √ºberschreitet! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/65b/4af/3a1/65b4af3a13e464947b394595dc052a06.gif"></div><br>  Obwohl die Logik fertig ist, f√ºgen wir <code>HandleRopeUnwrap()</code> einen <code>HandleRopeUnwrap()</code> bevor wir <code>HandleRopeUnwrap()</code> mit <code>hingeAngle</code> ( <code>if (playerAngle &lt; hingeAngle)</code> ). <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!wrapPointsLookup.ContainsKey(hingePosition)) { Debug.LogError(<span class="hljs-string"><span class="hljs-string">"We were not tracking hingePosition ("</span></span> + hingePosition + <span class="hljs-string"><span class="hljs-string">") in the look up dictionary."</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; }</code> </pre> <br>  Dies sollte eigentlich nicht passieren, da wir den Katzenhaken neu definieren und trennen, wenn er zweimal um eine Kante gewickelt wird. In diesem Fall ist es jedoch nicht schwierig, diese Methode mit einer einfachen <code>return</code> und einer Fehlermeldung zu beenden in der Konsole. <br><br>  Dank dessen k√∂nnen wir solche Grenzf√§lle au√üerdem bequemer behandeln.  Dar√ºber hinaus erhalten wir eine eigene Fehlermeldung f√ºr den Fall, dass etwas Unn√∂tiges auftritt. <br><br><h2>  Wohin als n√§chstes? </h2><br>  Hier ist ein <a href="">Link zum fertigen Projekt</a> dieses zweiten und letzten Teils des Tutorials. <br><br>  Herzlichen Gl√ºckwunsch zum Abschluss dieser Tutorial-Reihe!  Wenn es darum ging, Winkel und Positionen zu vergleichen, wurde alles ziemlich kompliziert, aber wir haben dies √ºberlebt und jetzt haben wir ein wunderbares Hakenkatzen- und Seilsystem, das sich auf Objekten im Spiel aufwickeln kann. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b5f/69a/cbe/b5f69acbefc9de390ff25f0fbc4cbe10.png"></div><br>  Wussten Sie, dass unser Unity-Entwicklungsteam ein Buch geschrieben hat?  Wenn nicht, lesen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unity Games By Tutorials</a> .  In diesem Spiel lernen Sie, wie Sie vier vorgefertigte Spiele von Grund auf neu erstellen: <br><br><ul><li>  Zwei-Stock-Sch√ºtze </li><li>  Ego-Shooter </li><li>  Tower Defense-Spiel (mit VR-Unterst√ºtzung!) </li><li>  2D-Plattformer </li></ul><br>  Nachdem Sie dieses Buch gelesen haben, lernen Sie, wie Sie Ihre eigenen Spiele f√ºr Windows, MacOS, iOS und andere Plattformen erstellen! <br><br>  Dieses Buch richtet sich sowohl an Anf√§nger als auch an diejenigen, die ihre Unity-F√§higkeiten auf ein professionelles Niveau bringen m√∂chten.  Um das Buch zu beherrschen, m√ºssen Sie Programmiererfahrung (in jeder Sprache) haben. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de415217/">https://habr.com/ru/post/de415217/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de415207/index.html">Wenn der Himmel die Vollkommenheit verloren hat</a></li>
<li><a href="../de415209/index.html">"Ich musste einen leeren Raum bewachen": die Entstehung bedeutungsloser Jobs</a></li>
<li><a href="../de415211/index.html">Die Milchstra√üe verbirgt Zehntausende von Schwarzen L√∂chern</a></li>
<li><a href="../de415213/index.html">Wahlen funktionieren √ºberhaupt nicht; Mathe muss beschuldigt werden</a></li>
<li><a href="../de415215/index.html">University of Michigan stellt den kleinsten Computer der Welt vor</a></li>
<li><a href="../de415219/index.html">Wie ich ein Angebot von einem bekannten ausl√§ndischen Verlag erhalten habe, Autor eines Online-Kurses zu werden</a></li>
<li><a href="../de415221/index.html">Sicherheitswoche 23: 50 Milliarden IoT-Ger√§te</a></li>
<li><a href="../de415223/index.html">Verkaufstrichter</a></li>
<li><a href="../de415227/index.html">Entwicklungs√∂kosystem 2018: Was Programmierer in Russland und in der Welt leben</a></li>
<li><a href="../de415229/index.html">DevTube - Neuer Open Source Video Aggregator f√ºr Entwickler</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>