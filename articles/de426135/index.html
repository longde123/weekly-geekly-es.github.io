<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçü§ù‚Äçüë®üèº üßùüèº üë®üèæ‚Äç‚öñÔ∏è Private Cloud f√ºr das Internet der Dinge üßëüèº‚Äçü§ù‚Äçüßëüèº üçù üì±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gr√º√üe, Habr! 

 Wir, das Team von IT-Architekten von IBM, das sich mit der Erstellung und Vermarktung von Industriel√∂sungen f√ºr verschiedene Branchen ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Private Cloud f√ºr das Internet der Dinge</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ibm/blog/426135/"><img src="https://habrastorage.org/webt/eg/uo/mr/eguomrkrciqdlubmnmltrvoy7tg.png"><br><br>  Gr√º√üe, Habr! <br><br>  Wir, das Team von IT-Architekten von IBM, das sich mit der Erstellung und Vermarktung von Industriel√∂sungen f√ºr verschiedene Branchen befasst.  In unserer Freizeit erforschen wir neue Technologien, experimentieren und probieren die besten Praktiken aus. <br><br>  In den letzten Jahren war das Thema Internet der Dinge sehr beliebt.  Unsere Kunden fragen nach universellen Box-L√∂sungen und Plattformen, die sich lokal in ihrem Rechenzentrum befinden k√∂nnen.  Vor allem wird erwartet, dass auf der Grundlage solcher "Boxen" alle neuen Dienste und Anwendungen sehr schnell oder eher sofort oder "gestern" entwickelt und gestartet werden sollten. <br><br>  Wir fragten uns: "Was ist, wenn wir etwas √Ñhnliches f√ºr offene und √∂ffentliche Technologien zusammenstellen?" <br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wir</a> haben bereits viel √ºber die Verwendung von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Docker-</a> Containern und deren auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kubernetes</a> basierenden Verwaltungstools gesprochen und gezeigt.  Bisher war jedoch nicht erkennbar, wie all diese fortschrittlichen Technologien im industriellen Ma√üstab f√ºr Gesch√§ftsaufgaben eingesetzt werden k√∂nnen, insbesondere im Internet der Dinge.  F√ºllen wir also diese L√ºcke.  Das Konzept der Microservices sowie modische Ans√§tze f√ºr Entwicklung (DevOps), Integration und Bereitstellung von Anwendungen (CI / CD) werden als etwas andere Aufgabe betrachtet und f√ºr sp√§ter reserviert. <br><br>  In diesem Artikel m√∂chten wir √ºber die Vorbereitung und Installation einer der Schl√ºsselkomponenten sprechen - IBM Cloud Private (in der Tat die industrielle Baugruppe von Docker / Kubernetes und ein wenig mehr), die beim Erstellen einer lokalen Internet of Things-Plattform als bedingter Infrastrukturkern fungieren kann.  Fragen Sie, warum er? <br><br>  Weil wir offene und √∂ffentliche Technologien versprochen haben (kostenlose Version f√ºr die Community und Unterst√ºtzung durch die Community): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hub.docker.com/r/ibmcom/icp-inception</a> <br><br><h2>  √úbersicht √ºber IBM Cloud Private </h2><br>  IBM Cloud Private (ICP) ist eine private Cloud-Plattform f√ºr die lokale Bereitstellung und den Betrieb.  ICP ist eine integrierte Umgebung, mit der Sie lokale Anwendungen entwerfen, entwickeln, bereitstellen und verwalten k√∂nnen, die unter Ber√ºcksichtigung der Containerarchitektur erstellt wurden.  Die ICP-Bereitstellung umfasst einen Kubernetes-basierten Orchestrator (K8s), einen lokalen Image-Speicher sowie eine Verwaltungskonsole und unterst√ºtzende √úberwachungstools. <br><br><h3>  Was ist eine private oder private Cloud? </h3><br>  Eine private Cloud ist ein Cloud-Computing-Modell, das ausschlie√ülich f√ºr eine Organisation ausgef√ºhrt wird, normalerweise auf ihrem Gebiet und ihren Ressourcen.  Eine solche Cloud kann sowohl von eigenen Spezialisten als auch von Mitarbeitern Dritter verwaltet und gewartet werden.  Eine √§hnliche Plattform kann sowohl hinter als auch au√üerhalb der Firewall des Unternehmens gehostet werden.  Eine private Cloud bietet die Vorteile einer √∂ffentlichen Cloud, einschlie√ülich schneller Bereitstellung und Skalierbarkeit sowie Benutzerfreundlichkeit, Verwaltung und Flexibilit√§t.  Gleichzeitig bietet die lokale Version eine bessere Kontrolle √ºber das System, eine h√∂here Produktivit√§t, genau vorhersehbare Kosten, erh√∂hte Sicherheitsanforderungen und flexible Verwaltungsfunktionen, abh√§ngig von den Anforderungen des Unternehmens.  Mit einer privaten Cloud k√∂nnen Sie sie direkt f√ºr bestimmte Gesch√§ftsaufgaben und Kundensicherheitsanforderungen konfigurieren. <br><br>  Bevor Sie mit der Installation von ICP fortfahren, definieren wir die Terminologie: <br><br>  <b>Hauptknoten</b> <br><ul><li>  √úberwacht und steuert den K8s-Cluster. </li><li>  kubectl: Ein Befehlszeilentool zum Verwalten eines Clusters. </li><li>  REST-API: Schnittstelle f√ºr die Interaktion mit Arbeitsknoten. </li><li>  etcd: ist ein dauerhafter und erschwinglicher Keystore, der als K8-Sicherungsspeicher f√ºr alle Clusterdaten verwendet wird. </li><li>  kube-scheduler: Diese Komponente √ºberwacht neu erstellte Container (Pods), denen kein Knoten zugewiesen ist, und w√§hlt einen Knoten aus, auf dem sie ausgef√ºhrt werden sollen. </li><li>  Normalerweise sind 3 oder mehr Hauptknoten erforderlich, um einen stabilen Betrieb zu gew√§hrleisten und Fehlertoleranz zu gew√§hrleisten.  In unserem Fall installieren wir zum Einsparen von Ressourcen alle erforderlichen ICP-Komponenten auf einem einzelnen dedizierten Server (Single Node). </li></ul><br>  <b>Arbeitsknoten</b> <br><ul><li>  Die Arbeitsmaschine in den K8s, fr√ºher als Minion bekannt.  Dieser Knoten kann ein beliebiger Host sein, der Aufgaben vom Hauptknoten empf√§ngt und auch den Prozess des Startens von Containern auf diesem Knoten steuert.  Abh√§ngig von den Clustereinstellungen kann der Arbeitsknoten entweder eine virtuelle Maschine oder ein physischer Server sein. </li><li>  Die folgenden Komponenten k√∂nnen auf jedem Knoten ausgef√ºhrt werden: </li><li>  kubelet: ist der Hauptdienst des Arbeitsknotens.  Es √ºberwacht die Container, die seinem Knoten zugewiesen wurden (entweder Apirusver f√ºr eine sichere Verbindung oder √ºber eine lokale Konfigurationsdatei). </li><li>  kube-proxy: Zeigt die in der K8s-API auf jedem Knoten definierten Dienste an, unterst√ºtzt Netzwerkregeln auf dem Host und leitet Verbindungen weiter. </li><li>  Docker: Container-Start- und Verwaltungsumgebung. </li><li>  Supervisord: Dies ist ein leichtes √úberwachungs- und Kontrollsystem, mit dem Sie Kubelet und Docker am Laufen halten k√∂nnen. </li><li>  flie√üend: Dies ist ein Dienst, der die Protokollierung auf Clusterebene sicherstellt. </li></ul><br>  <b>Container</b> <br><ul><li>  Eine Anwendung, die in einer isolierten Umgebung ausgef√ºhrt wird. </li><li>  Die Menge der ausf√ºhrbaren Prozesse und das gestartete Image des Programms. </li></ul><br>  <b>Kokons (Schoten)</b> <br><ul><li>  Ein Pod ist eine Gruppe von einem oder mehreren Docker-Containern mit einem gemeinsamen Speicher / Netzwerk und einer Spezifikation zum Ausf√ºhren von Containern auf einem Arbeitsknoten. </li><li>  Jeder Pod hat seine eigene IP. </li><li>  Pod teilt den PID-Namespace, das Netzwerk und den Hostnamen. </li></ul><br>  <b>Replikationscontroller</b> <br><ul><li>  Bietet Zug√§nglichkeit und Skalierbarkeit. </li><li>  Verantwortlich f√ºr die Kontrolle der Anzahl der bereitgestellten Pods. </li><li>  Verwendet eine Vorlage, die beschreibt, was jeder Pod enthalten soll. </li></ul><br>  <b>Etiketten</b> <br><ul><li>  Den K8-Ressourcen zugewiesene Metadaten, z. B. Container, Services. </li><li>  Schl√ºssel-Wert-Paare, die zur Identifizierung an Objekte angeh√§ngt sind. </li><li>  Diese Parameter sind kritisch, da sie auf einer Clusteranforderung f√ºr Ressourcen mit bestimmten Bezeichnungen basieren. </li></ul><br>  <b>Dienstleistungen</b> <br><ul><li>  Eine Sammlung von Containern, die als Endpunkt verf√ºgbar gemacht werden. </li><li>  Informationen zum Status der K8-Cluster- und Netzwerkeinstellungen, die f√ºr alle Arbeitsknoten gelten. </li><li>  Bei korrekter Konfiguration werden die vom Replikationscontroller erstellten Pods automatisch als entsprechender Dienst registriert. </li></ul><br>  <b>Geheime Informationen (Geheimnisse)</b> <br><ul><li>  Vertrauliche Informationen, die von Containern gelesen oder verwendet werden sollen. </li><li>  Spezielle Volumes des Festplattenlaufwerks werden automatisch bereitgestellt, damit die Container den Inhalt lesen k√∂nnen. </li><li>  Jeder Eintrag hat einen eigenen Pfad. </li></ul><br><h3>  Architektur </h3><br>  Im Folgenden finden Sie eine allgemeine ICP-Architektur, in der die Hauptkomponenten nach Haupt-, Arbeits- und Proxy-Knoten aufgelistet sind.  Es ist erw√§hnenswert, dass in diesem Artikel der Schwerpunkt auf einer Kombination von Docker-Containern und der Kubernetes-Verwaltungsumgebung liegt.  Diese Open Source-Komponenten sind f√ºr die ICP-Plattform von zentraler Bedeutung.  Um jedoch vollst√§ndig mit ICP arbeiten zu k√∂nnen, ben√∂tigen Sie auch Kenntnisse √ºber Helm, den Manager f√ºr die Verwaltung von Softwarepaketen.  K8s wird zum Bereitstellen und Hosten von Anwendungsinstanzen verwendet, die in Helm-Schemas integriert sind, die sich wiederum auf Docker-Images beziehen.  Helmschemata enthalten Informationen zu den Details Ihrer Anwendung, und Docker-Images enthalten alle Softwarepakete, die zum Ausf√ºhren Ihrer Anwendung erforderlich sind. <br><br> <a href=""><img src="https://habrastorage.org/webt/ch/hd/is/chhdisgv9bo9fu4bfdow2g1ydmu.png"></a> <br><br>  F√ºr eine detaillierte Einf√ºhrung in die Architektur und die Komponenten der ICP-Plattform k√∂nnen Sie den Dokumentationslink im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">IBM Knowledge Center verwenden</a> . <br><br><h2>  Vorbereitung </h2><br>  Um die ICP-Installation in 20 bis 30 Minuten bequem abzuschlie√üen, sind die folgenden Mindesthardwareressourcen und der Internetzugang erforderlich: <br>  ‚Ä¢ Ein Host (physisch oder virtuell) <br>  ‚Ä¢ CPU = 8 Kerne (oder virtuelle Kerne) <br>  ‚Ä¢ RAM = 10 GB (m√∂glicherweise sind bis zu 14 GB erforderlich) <br>  ‚Ä¢ Festplatte = 40 GB (auf SSD wie immer schneller) <br><blockquote>  <i><b>Hinweis:</b> Wenn Sie etwas mehr Freizeit und etwas weniger Hardwareressourcen haben, k√∂nnen Sie ICP in 40-60 Minuten auf 1 virtuellen Core i5 und 10 GB RAM installieren.</i> </blockquote><br><h2>  Installation </h2><br><h3>  Laden Sie Ubuntu herunter </h3><br>  Laden Sie die <a href="">Ubuntu Server-</a> Distributionsversion <a href="">16.04.05 herunter</a> .  F√ºhren Sie eine Standardinstallation des Betriebssystems auf einer virtuellen oder physischen Maschine mit den oben genannten Eigenschaften durch. <br><br><h3>  IP-Adresse abrufen </h3><br>  Nachdem Sie den Installationsvorgang des Betriebssystems abgeschlossen haben, ermitteln Sie in der Befehlszeile die IP-Adresse Ihrer virtuellen Maschine mit dem folgenden Befehl: <br><br><pre><code class="bash hljs">ifconfig</code> </pre> <br>  Sie m√ºssen die Ethernet-IP-Adresse (inet addr) sowie Bcast und Mask schreiben / speichern.  Diese Parameter werden nach Ausf√ºhrung des entsprechenden Befehls angezeigt: <br> <a href=""><img src="https://habrastorage.org/webt/ao/tp/gh/aotpghosoq-nglwcwwm-1fmn_pk.png"></a> <br>  <i>Abbildung 1. Ein Beispiel f√ºr den Befehl ifconfig</i> <br><br><h3>  SSH-Verbindung </h3><br>  Wenn Sie beim Einrichten der virtuellen Maschine die Funktion ‚ÄûEinfache Installation‚Äú verwendet haben, m√ºssen Sie nach der vollst√§ndigen Installation von Ubuntu Server den OpenSSH-Server installieren.  Sie k√∂nnen dies mit den folgenden Befehlen tun: <br><br><pre> <code class="bash hljs">apt install openssh-server sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> sshd</code> </pre> <br>  Nachdem Sie die entsprechenden Befehle ausgef√ºhrt haben, k√∂nnen Sie √ºber SSH eine Verbindung zur virtuellen Maschine herstellen.  Je nach Betriebssystem k√∂nnen Sie verschiedene Verbindungsmethoden verwenden.  Unter Windows k√∂nnen Sie das beliebte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PuTTY-</a> Tool verwenden. Unter MacOS k√∂nnen Sie den Befehl ssh im Terminal verwenden. <br><br> <a href=""><img src="https://habrastorage.org/webt/2w/v8/st/2wv8st2har9fplst87-ouu2xn3a.png"></a> <br>  <i>Abbildung 2. Verbindungsbeispiel √ºber PuTTY f√ºr Windows</i> <br><br>  Der n√§chste Schritt besteht darin, ein Passwort f√ºr den Superuser (root) festzulegen: <br><br><pre> <code class="bash hljs">sudo -i passwd</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/tk/p5/l_/tkp5l_dnzxuaf5-bdlf5j2nllis.png"></a> <br>  <i>Abbildung 3. Festlegen eines neuen Kennworts f√ºr den Root-Benutzer</i> <br><br><h3>  Aktualisierung der Netzwerkschnittstelle </h3><br>  Nachdem wir die M√∂glichkeit zur Verbindung √ºber SSH konfiguriert und das Superuser-Kennwort aktualisiert haben, m√ºssen wir die Netzwerkschnittstelle konfigurieren, um die statischen Netzwerkparameter zu ermitteln.  Dies erfolgt mit folgendem Befehl: <br><br><pre> <code class="bash hljs">nano /etc/network/interfaces</code> </pre> <br>  Wir aktualisieren die Einstellungen der Netzwerkschnittstelle (prim√§re Netzwerkschnittstelle) basierend auf den Informationen, die w√§hrend des Befehls ifconfig erhalten wurden. Unser Beispiel sieht folgenderma√üen aus: <br><br><pre> <code class="bash hljs">auto ens33 iface ens33 inet static address 192.168.175.7 netmask 255.255.255.0 network 192.168.175.0 broadcast 192.168.175.255 gateway 192.168.175.2 dns-nameservers 192.168.175.2 8.8.8.8</code> </pre> <br><blockquote>  <i><b>Hinweis: Es</b> ist wichtig, den DNS-Server korrekt anzugeben, da f√ºr die nachfolgende Installation von ICP-Komponenten ein Internetzugang erforderlich ist.</i> </blockquote><br> <a href=""><img src="https://habrastorage.org/webt/u3/cb/v7/u3cbv77no49a5vnxx5jfvb-rena.png"></a> <br>  <i>Abbildung 4. Konfigurieren der Netzwerkschnittstelle</i> <br><br>  Speichern Sie die aktualisierte Datei mit den folgenden Schritten: Strg + X, Ja, Eingabetaste. <br><br>  Um die Anmeldung bei einer virtuellen Maschine mit Superuser-Berechtigungen (Root) zu vereinfachen, m√ºssen Sie √Ñnderungen an der SSH-Dienstkonfiguration vornehmen.  F√ºhren Sie dazu den folgenden Befehl aus: <br><br><pre> <code class="bash hljs">nano /etc/ssh/sshd_config</code> </pre> <br>  Suchen Sie als N√§chstes die Zugriffsberechtigungszeile und bearbeiten Sie sie entsprechend: <br><br><pre> <code class="bash hljs">PermitRootLogin yes</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/4h/mg/9c/4hmg9clbw62w0fb_v7enmmptweo.png"></a> <br>  <i>Abbildung 5. Aktualisieren der SSH-Konfiguration</i> <br><br>  Speichern Sie die Datei wie im vorherigen Schritt: Strg + X, Ja, Eingabetaste. <br><br>  Nachdem Sie alle √Ñnderungen vorgenommen haben, um die neuen Parameter anzuwenden, ist es sinnvoll, die virtuelle Maschine vollst√§ndig neu zu starten oder die entsprechenden Dienste (Netzwerk und SSH) neu zu starten, z. B. mit den folgenden Befehlen: <br><br><pre> <code class="bash hljs">shutdown -r 0</code> </pre> <br>  oder <br><br><pre> <code class="bash hljs">service &lt;service_name&gt; restart</code> </pre> <br>  Nach dem Neustart des Computers m√ºssen Sie sich erneut √ºber SSH anmelden. <br><br><h3>  Komponentenaktualisierung </h3><br>  Aktualisieren Sie Ubuntu Server mit dem folgenden Befehl (der Befehl muss als root ausgef√ºhrt werden): <br><br><pre> <code class="bash hljs">apt update</code> </pre> <br>  Hinweis: Wenn w√§hrend des Updates ein Fehler auftritt: "Das Repository 'cdrom: // Ubuntu-Server 16.04.5 LTS _Xenial Xerus_ - Release amd64 (20180731) xenial Release' hat keine Release-Datei."  Sie m√ºssen den folgenden Befehl ausf√ºhren: <br><br><pre> <code class="bash hljs">sudo nano /etc/apt/sources.list</code> </pre> <br>  Und kommentieren Sie die Zeile aus: <br><br><pre> <code class="bash hljs">deb cdrom:[Ubuntu-Server 16.04.5 LTS ‚Ä¶</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/x4/l8/0w/x4l80wwrr4ovzqd0a_wj3jqy8ki.png"></a> <br>  <i>Abbildung 6. Korrektur eines m√∂glichen Fehlers</i> <br><br>  Speichern Sie als N√§chstes die Datei wie zuvor: Strg + X, Ja, Eingabetaste <br><br>  Nachdem Sie einen m√∂glichen Fehler behoben haben, f√ºhren Sie den Befehl update erneut aus. Daher sollte Folgendes angezeigt werden: <br><br> <a href=""><img src="https://habrastorage.org/webt/iu/i7/7_/iui77_byceas5t0cujkv-1p9ltu.png"></a> <br>  <i>Abbildung 7. Ubuntu-Update</i> <br><br><h2>  Installieren Sie IBM Cloud Private </h2><br>  Bevor Sie ICP installieren, m√ºssen Sie die Hosts-Datei bearbeiten: <br><br><pre> <code class="bash hljs">nano /etc/hosts</code> </pre> <br>  Ersetzen Sie die Zeichenfolge 127.0.1.1 ubuntu durch Ihre IP-Adresse und einen geeigneten Hostnamen. <br><br>  Stellen Sie sicher, dass der Hostname und der Alias ‚Äã‚Äãin der Zeile durch eine Registerkarte oder ein Leerzeichen getrennt sind: <br> <a href=""><img src="https://habrastorage.org/webt/ht/jk/ks/htjkkshqzdczphtd999qhxb_unu.png"></a> <br>  <i>Abbildung 8. √Ñndern der Hosts-Datei</i> <br><br>  Speichern Sie die Datei: Strg + X, Ja, Eingabetaste <br><br>  Mit den folgenden 2 Befehlen k√∂nnen Sie das System aktualisieren und zus√§tzliche Module installieren. <br><br><pre> <code class="bash hljs">apt update apt-get install apt-transport-https ca-certificates curl software-properties-common python-minimal jq</code> </pre> <br>  √úberpr√ºfen Sie das Terminal auf Fehler: <br><br> <a href=""><img src="https://habrastorage.org/webt/so/ve/fi/sovefisrk9vxuzgcxusddtzir6e.png"></a> <br>  <i>Abbildung 9. Zus√§tzliche Komponenten installieren</i> <br><br>  Erh√∂hen Sie den maximalen virtuellen Speicher mit dem folgenden Befehl: <br><br><pre> <code class="bash hljs">sysctl -w vm.max_map_count=262144</code> </pre><br>  K8s starten nicht mit aktiviertem Swap.  Sie k√∂nnen es mit dem folgenden Befehl deaktivieren: <br><br><pre> <code class="bash hljs">swapoff ‚Äìa</code> </pre> <br><blockquote>  <i><b>Hinweis: Die</b> beiden vorherigen Befehle funktionieren in der aktuellen Sitzung.</i>  <i>Beim Neustart gehen diese Parameter verloren und Sie m√ºssen sie erneut registrieren.</i> </blockquote><br>  Die Anwendung dieser Parameter beim Laden des Betriebssystems kann mit den folgenden Befehlen aktiviert werden: <br><br><pre> <code class="bash hljs">sed -i <span class="hljs-string"><span class="hljs-string">'/ swap / s/^/#/'</span></span> /etc/fstab <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"vm.max_map_count=262144"</span></span> &gt;&gt; /etc/sysctl.conf</code> </pre> <br><h3>  Hinzuf√ºgen eines GPG-Schl√ºssels </h3><br>  Wir verwenden den folgenden Befehl: <br><br><pre> <code class="bash hljs">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -</code> </pre> <br><h3>  Hinzuf√ºgen eines Repositorys zur Installation von Docker </h3><br>  Um die Repository-Installation abzuschlie√üen, m√ºssen Sie die folgenden 2 Befehle ausf√ºhren: <br><br><pre> <code class="bash hljs">add-apt-repository <span class="hljs-string"><span class="hljs-string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(lsb_release -cs)</span></span></span><span class="hljs-string"> stable"</span></span> apt-get update</code> </pre> <br><h3>  Installieren Sie Docker </h3><br>  Verwenden Sie den folgenden Befehl, um Docker zu installieren (Docker Version 17.12.1 ist die maximal unterst√ºtzte Version f√ºr IBM Cloud Private 2.1.0.3): <br><br><pre> <code class="bash hljs">apt-get install docker-ce=17.12.1~ce-0~ubuntu</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/so/ve/fi/sovefisrk9vxuzgcxusddtzir6e.png"></a> <br>  <i>Abbildung 10. Docker-Installationsprozess</i> <br><br>  Sie k√∂nnen die Funktionalit√§t von Docker mit dem folgenden Befehl √ºberpr√ºfen: <br><br><pre> <code class="bash hljs">docker version</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/w3/8y/si/w38ysiwd6porpbipaez4_nghy9i.png"></a> <br>  <i>Abbildung 11. Docker √ºberpr√ºfen</i> <br><br><h3>  Laden Sie IBM Cloud Private herunter </h3><br>  Um das ICP-ce-Image (Community Edition) von der dockerHub-Ressource herunterzuladen, m√ºssen Sie das Docker-Toolkit verwenden.  Sie k√∂nnen dies mit dem folgenden Befehl tun: <br><br><pre> <code class="bash hljs">docker pull ibmcom/icp-inception:2.1.0.3</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/vq/k4/m3/vqk4m3d4o-sclprferxvwcjprte.png"></a> <br>  <i>Abbildung 12. Laden Sie ICP herunter</i> <br><br>  IBM hat alle f√ºr die Installation erforderlichen Komponenten in einem Paket zusammengefasst (beachten Sie, dass Sie die Version bei Bedarf auf eine neuere Version √§ndern k√∂nnen).  Der Pull-Befehl l√§dt das Image in das lokale Dateisystem hoch (das Image wird gestartet, um ICP zu installieren). <br><br>  Erstellen Sie ein Verzeichnis und navigieren Sie dorthin: <br><br><pre> <code class="bash hljs">mkdir /opt/icp <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt/icp</code> </pre> <br>  Kopieren Sie das ICP-Paket in dieses Verzeichnis: <br><br><pre> <code class="bash hljs">docker run -e LICENSE=accept -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(pwd)</span></span></span><span class="hljs-string">"</span></span>:/data ibmcom/icp-inception:2.1.0.3 cp -r cluster /data</code> </pre> <br><blockquote>  <i><b>Hinweis:</b> Dieser Docker-Toolkit-Befehl f√ºhrt den Linux-Befehl copy (cp) aus dem angegebenen Verzeichnis aus (Option -v).</i>  <i>Das Clusterverzeichnis wird in / opt / icp mit allen erforderlichen Dateien erstellt.</i> </blockquote><br><h3>  Konfigurieren Sie SSH-Schl√ºssel </h3><br>  Erstellen Sie neue SSH-Schl√ºssel im Verzeichnis / opt / icp / cluster: <br><br><pre> <code class="bash hljs">ssh-keygen -b 4096 -f ~/.ssh/id_rsa -N <span class="hljs-string"><span class="hljs-string">""</span></span> cat ~/.ssh/id_rsa.pub | sudo tee -a ~/.ssh/authorized_keys systemctl restart sshd cp ~/.ssh/id_rsa ./cluster/ssh_key</code> </pre> <br>  √úberpr√ºfen Sie, ob der Schl√ºssel erstellt und im Ordner / opt / icp / cluster gespeichert ist: <br><br><pre> <code class="bash hljs">ls /opt/icp/cluster</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/5t/-f/th/5t-fthfoh0nvegetpvqgs5qcqvm.png"></a> <br>  <i>Abbildung 13. Der Inhalt des Clusterordners</i> <br><br><h3>  ICP-Setup </h3><br>  F√ºgen Sie die IP-Adresse jedes Knotens im Cluster zur Datei / opt / icp / cluster / hosts hinzu (in unserem Fall verwenden wir f√ºr jede Komponente, die wir in / etc / hosts angegeben haben, dieselbe IP-Adresse).  Wir machen das mit dem folgenden Befehl: <br><br><pre> <code class="bash hljs">nano /opt/icp/cluster/hosts</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/uv/g4/3n/uvg43n_tjis5f-s9x1oakpsfjwi.png"></a> <br>  <i>Abbildung 14. Der Inhalt der Hosts-Datei</i> <br><br>  Speichern Sie die Datei: Strg + X, Ja, Eingabetaste <br><br>  Detaillierte Informationen zu den Installationsoptionen finden Sie in der Konfigurationsdatei: <br><br><pre> <code class="bash hljs">more /opt/icp/cluster/config.yaml</code> </pre> <br>  Es wird nicht empfohlen, die Standardinstallationseinstellungen zu √§ndern. <br><blockquote>  <i><b>Hinweis: Die</b> beiden wichtigsten Installationsdateien sind Hosts und config.yaml, in denen die ICP-Installationsoptionen beschrieben werden.</i>  <i>In einer Multi-Worker-Konfiguration m√ºssen Sie im Worker-Abschnitt eine Liste der IP-Adressen angeben.</i>  <i>Bei der Installation der aktuellen ICP-Version im Einzelknotenmodus √§ndern sich nur die IP-Adressen in der Hosts-Datei.</i> </blockquote><br><h3>  ICP-Installation </h3><br>  Wechseln Sie in das Clusterverzeichnis und f√ºhren Sie die Installation aus: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt/icp/cluster docker run -e LICENSE=accept --net=host -t -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(pwd)</span></span></span><span class="hljs-string">"</span></span>:/installer/cluster ibmcom/icp-inception:2.1.0.3 install</code> </pre> <br>  Abh√§ngig von den verf√ºgbaren Ressourcen kann die Installation 20 bis 60 Minuten dauern.  Wenn Fehler auftreten (rote Meldungen), nehmen Sie die entsprechenden √Ñnderungen an den Konfigurationsdateien vor.  Manchmal verlangsamt sich die Installation etwas, weil versucht wird, die Verbindung zu Komponenten wiederherzustellen, die noch nicht gestartet wurden (z. B. beim Starten von Cloudant oder IAM). <br><br>  Die Installation sollte folgenderma√üen aussehen: <br> <a href=""><img src="https://habrastorage.org/webt/ft/9-/8r/ft9-8re-bg2velkh1hlxqdgoecu.png"></a> <br>  <i>Abbildung 15. ICP-Installationsergebnis</i> <br><br>  Im Fehlerfall kann die Deinstallation von ICP erforderlich sein: <br><br><pre> <code class="bash hljs">docker run -e LICENSE=accept --net=host -t -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(pwd)</span></span></span><span class="hljs-string">"</span></span>:/installer/cluster ibmcom/icp-inception:2.1.0.3 uninstall</code> </pre> <br>  Warten Sie etwa 5 Minuten, bis alle ICP-Komponenten erfolgreich gestartet wurden, bevor Sie mit dem n√§chsten Schritt fortfahren. <br><br>  Folgen Sie dem Link nach Abschluss der Installation und rufen Sie die ICP-Konsole (admin / admin) auf: <br><br><pre> <code class="bash hljs">https://&lt;ip_address&gt;:8443</code> </pre> <br> <a href=""><img src="https://habrastorage.org/webt/t8/en/-t/t8en-t-wktktunis-pn4phoz2dw.png"></a> <br>  <i>Abbildung 16. Die Anmeldeseite des Bedienfelds</i> <br><br>  ICP-Begr√º√üungsseite: <br> <a href=""><img src="https://habrastorage.org/webt/ji/bf/t6/jibft6ehclvq8-npu2slawyoxbo.png"></a> <br>  <i>Abbildung 17. Weboberfl√§che des Bedienfelds</i> <br><br>  W√§hlen Sie oben rechts das Men√º Katalog. Eine Liste der verf√ºgbaren Anwendungen wird angezeigt: <br> <a href=""><img src="https://habrastorage.org/webt/3i/_w/tt/3i_wttbjrkwapn7nvohf-fo4ziy.png"></a> <br>  <i>Abbildung 18. Komponentenkatalog</i> <br><br>  Dieses Verzeichnis enth√§lt eine Liste von Anwendungen und Software, deren Beschreibung Sie nach Belieben studieren k√∂nnen, die Sie jedoch bisher nicht schnell bereitstellen m√ºssen. <br>  Wir m√ºssen noch lernen, wie Sie mit dem neu installierten ICP (nicht nur √ºber die Webschnittstelle, sondern auch √ºber die Konsole in Form der CLI - Befehlszeilenschnittstelle) richtig umgehen, dauerhaften Speicher verbinden und kleine Einstellungen vornehmen. <br><br><h2>  Abschlie√üend </h2><br>  Zusammenfassend. <br><br>  Wir haben die IBM Cloud Private Community Edition (Version 2.1.0.3) erfolgreich auf einem Host in einer virtuellen Maschine unter Ubuntu Server OS 16.04.05 bereitgestellt.  Im Moment haben wir die Installation auf VMware- und Hyper-V-Hypervisoren pers√∂nlich √ºberpr√ºft. Sie funktioniert definitiv auf XenServer und es sollte keine Schwierigkeiten f√ºr VirtualBox und KVM geben. <br><br>  Wer wirklich gerne weiter in das Studium des ICP eintauchen m√∂chte, das hei√üt, eine hervorragende Auswahl der Laborarbeit unseres Kollegen hier: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github.com/phthom/IBMCloudPrivate</a> <br><br>  Von den bevorstehenden Schritten - nach einer Neuinstallation m√ºssen wir ICP nur ein wenig konfigurieren und es mit etwas N√ºtzlichem f√ºllen, das den praktischen Aufgaben nahe kommt. <br><br>  Wenn die Habr-Community diese Initiative positiv unterst√ºtzt, werden wir im Verlauf unserer Forschung und Experimente den Kern der Plattform mit den erforderlichen Komponenten f√ºr die Telemetrieerfassung, Datenspeicherung, -verarbeitung, -analyse, -prognose, die Bildung externer Programmschnittstellen und die Erstellung von Benutzeranwendungen f√ºllen.  Dementsprechend entwickelt sich eine Reihe solcher Artikel. <br><br>  Warten auf Ihr Feedback und Ihre Vorschl√§ge! <br><br>  Au√üerdem haben unsere Gleichgesinnten von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AIXportal.ru</a> einen wunderbaren Videoclip zur Installation von IBM Cloud Private auf ihrem Youtube-Kanal vorbereitet. Jemand wird sich so wohler f√ºhlen: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">youtu.be/eQwOOTzjM24</a> <br><br><h2>  Links und n√ºtzliche Materialien </h2><br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Produktseite in russischer Sprache</a> <br>  ‚Ä¢ Wer Englisch √ºben m√∂chte, das Buch ‚Äû <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ICP for Dummies</a> ‚Äú 2018.  (40 Seiten) <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Whitepaper</a> zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ICP 2.1.0.3</a> im IBM Knowledge Center <br>  ‚Ä¢ √ñffnen Sie die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ICP-</a> Community <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in IBM developerWorks</a> <br>  ‚Ä¢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ICP-Rezepte f√ºr Entwickler</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de426135/">https://habr.com/ru/post/de426135/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de426121/index.html">MC.exe (Nachrichten-Compiler), rc.exe, link.exe zum Generieren einer DLL f√ºr EventMessageFile</a></li>
<li><a href="../de426123/index.html">Lerne OpenGL. Lektion 6.1. PBR oder physikalisch korrektes Rendern. Theorie</a></li>
<li><a href="../de426125/index.html">Karriere Steroide. Aufz√ºge</a></li>
<li><a href="../de426131/index.html">Laden Sie die Konfiguration √ºber USB auf das FPGA herunter oder zerlegen Sie FTDI MPSSE</a></li>
<li><a href="../de426133/index.html">Einf√ºhrung in die Alpha-Version von Volume Snapshots in Kubernetes</a></li>
<li><a href="../de426137/index.html">Zeitalter der Ehrlichkeit</a></li>
<li><a href="../de426141/index.html">Red Hat ersetzt Docker durch Podman</a></li>
<li><a href="../de426143/index.html">3D-Animation - Video oder interaktiv?</a></li>
<li><a href="../de426145/index.html">Unabh√§ngiger Akzeptanzworkshop, 23. Oktober, Moskau</a></li>
<li><a href="../de426149/index.html">Das Python-Installationsprogramm f√ºr Android zum Selbermachen wird von TeamCity erstellt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>