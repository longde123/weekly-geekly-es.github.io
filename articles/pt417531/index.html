<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•É ü§òüèº üì∏ Como vencemos no SmartMailHack 2 üïë ‚ò∏Ô∏è üêç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No fim de semana passado (14 a 15 de julho), outro hackathon SmartMailHack foi realizado no escrit√≥rio do Mail.Ru Group. Nos pediram para "criar um re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como vencemos no SmartMailHack 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/417531/"><p>  No fim de semana passado (14 a 15 de julho), outro hackathon SmartMailHack foi realizado no escrit√≥rio do Mail.Ru Group.  Nos pediram para "criar um recurso que permita acessar dados do Mail e interagir com eles de maneira mais eficaz". </p><a name="habracut"></a><br><h2>  Descri√ß√£o, Id√©ias e Solu√ß√µes de Dados </h2><br><p>  Temos uma caixa de teste com mais de 1500 mensagens, al√©m de acesso completo a ela atrav√©s da API.  Os organizadores forneceram um manual grande e detalhado sobre o seu uso (livro de 547 p√°ginas).  Com a ajuda de um token e solicita√ß√µes JSON simples, poder√≠amos receber todas as informa√ß√µes necess√°rias sobre o correio: cartas, nomes de remetentes, v√°rias caracter√≠sticas. </p><br><p>  Tendo discutido que cada um de n√≥s tem cerca de v√°rios milhares de cartas n√£o lidas nas listas de correspond√™ncia, decidimos lidar com esse problema.  No nosso caso, a relev√¢ncia da carta n√£o √© mais determinada no momento em que ela apareceu na caixa de correio.  E com base no fato de que nem todas as letras ser√£o abertas, √© melhor mostrar ao usu√°rio apenas aquelas que ele provavelmente abrir√°.  E tudo o mais pode ser removido para o inferno.  Ent√£o decidimos fazer uma classifica√ß√£o por correio. </p><br><p> As letras de classifica√ß√£o deveriam ser por categoria e as categorias devem ser colocadas dentro dos blocos (oi, Trello).  A linha superior de blocos combinava o significado das cartas de diferentes remetentes.  Pode haver "Viagens", "Registro", "Correspond√™ncia com Vasya", "Eventos", "Finan√ßas" e assim por diante, no total, cerca de 10 categorias.  A segunda linha foram azulejos com as melhores ofertas das empresas.  Pesquisamos os c√≥digos promocionais mais relevantes, as promo√ß√µes com mais descontos, as ofertas mais valiosas e os mostramos aqui, agrupados por empresa.  Depois vieram todas as outras cartas distribu√≠das pelas empresas emissoras, e esses remetentes, por sua vez, foram espalhados em categorias ("Alimentos", "Cosm√©ticos", "Eletr√¥nicos" e outros).  Al√©m disso, as categorias tamb√©m foram classificadas pela relev√¢ncia das letras, e somente as letras que ultrapassavam um certo limiar de relev√¢ncia foram mostradas no interior.  Tendo refor√ßado a id√©ia com as palavras ‚ÄúEncontre o que √© necess√°rio e elimine o excesso‚Äù, subimos no ML. </p><br><h2>  Aprendizado de m√°quina </h2><br><p>  Decidimos construir tr√™s modelos: </p><br><ul><li>  um classificador de mais de 30 categorias que designamos como b√°sico para todos os usu√°rios; </li><li>  agrupar e destacar novas categorias com base nas prefer√™ncias do usu√°rio; </li><li>  classifica√ß√£o de letras na categoria, da mais relevante √† menos. </li></ul><br><img src="https://habrastorage.org/webt/z1/lp/4c/z1lp4ctrc2qjtboon88dpqpe2iw.png"><br><h2>  Sinais </h2><br><p>  Parece que este item deve ser descrito individualmente para cada tarefa.  No entanto, geramos um conjunto de dados de recursos comuns e treinamos todos os modelos nele.  N√£o houve tempo para uma sele√ß√£o cuidadosa. </p><br><p>  Havia v√°rios sinais bin√°rios que s√£o descarregados usando a API.  No entanto, a maioria deles foi gerada nos textos: </p><br><ul><li>  tf-idf em uma cole√ß√£o de documentos; </li><li>  Casamentos recebidos com o Word2Vec; </li><li>  sintomas comportamentais como: <br>  - o n√∫mero de mensagens lidas na √∫ltima janela (1, 2, 5 semanas atr√°s); <br>  - o n√∫mero de mensagens disso. </li></ul><br><h2>  Tarefa de classifica√ß√£o </h2><br><p>  Marcamos com as m√£os 1000 cartas para treinamento.  Descobriu-se que este n√£o √© um trabalho t√£o lento e tedioso quanto pode parecer √† primeira vista.  Se voc√™ usar endere√ßos e cabe√ßalhos, poder√° acelerar significativamente o trabalho.  Por exemplo, Lamoda quase sempre envia cartas para a categoria "Roupas". </p><br><p>  Em seguida, treinamos o LightGBM em todo o conjunto de sinais e obtemos a qualidade da precis√£o de 0,913 e medidas de 0,892 f1, que determinamos como um resultado muito bom no n√≠vel da linha de base.  Isso mostra que as letras podem ser classificadas muito bem. </p><br><h2>  Tarefa de classifica√ß√£o </h2><br><p>  Como vari√°vel de destino, usamos o sinalizador bin√°rio 0/1 - se a mensagem foi lida pelo usu√°rio.  Eles foram classificados ainda de acordo com a probabilidade prevista pelo modelo, pois √© exatamente isso que reflete a confian√ßa do modelo em saber se a pessoa ler√° a mensagem ou n√£o. </p><br><p>  Aqui tamb√©m treinamos o LightGBM em todo o conjunto de recursos e obtivemos uma qualidade de cerca de 0,816 auc-roc. </p><br><h2>  Agrupando e destacando novas categorias </h2><br><p>  Al√©m das principais categorias, temos a categoria "Outros".  A partir dele, voc√™ pode destacar novos t√≥picos. </p><br><p>  N√≥s treinamos o DBSCAN padr√£o em cartas desse grupo e, em seguida, selecionamos os clusters nos quais havia muitas mensagens (o limite pode ser otimizado, mas foi corrigido por acidente).  Por exemplo, a modelagem tem√°tica pode ser definida em uma cole√ß√£o de documentos de um cluster, obter o t√≥pico mais relevante para um determinado cluster e selecion√°-lo em um grupo separado.  N√£o houve tempo suficiente para validar esse algoritmo. </p><br><p>  Portanto, as cartas recebidas s√£o passadas pelo classificador, se elas se enquadram na categoria "Outros" - elas s√£o agrupadas, novos t√≥picos est√£o tentando se destacar e, em seguida, a classifica√ß√£o ocorre.  Uma solicita√ß√£o de back-end √© enviada, que agrega tudo, e o front-end √© renderizado. </p><br><img src="https://habrastorage.org/webt/hh/im/e2/hhime2drbnnlgca1jorvldzfvou.png"><br><hr><br><p>  <strong>Id√©ias restantes</strong> </p><br><ul><li>  aprimorando modelos de aprendizado de m√°quina; </li><li>  coletar dados de mais usu√°rios para prever melhor o comportamento de cada um deles; </li><li>  valida√ß√£o completa de novas categorias emergentes; </li><li>  o uso de figuras como signos, por exemplo, a aloca√ß√£o de incorpora√ß√µes de redes neurais pr√©-treinadas. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt417531/">https://habr.com/ru/post/pt417531/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt417515/index.html">O que aprendi criando 100 jogos em 5 anos</a></li>
<li><a href="../pt417517/index.html">P√°ginas da hist√≥ria da Intel. Photo Chronicle and Quiz</a></li>
<li><a href="../pt417521/index.html">Revise certificados SSL para revoga√ß√£o</a></li>
<li><a href="../pt417527/index.html">Desenvolvemos camar√£o: controlamos solicita√ß√µes paralelas, registramos atrav√©s do spdlog e muito mais ...</a></li>
<li><a href="../pt417529/index.html">Tr√™s tend√™ncias tecnol√≥gicas que mudam com√©rcio e consumidor</a></li>
<li><a href="../pt417533/index.html">O bloco de notas no Windows recebeu a primeira atualiza√ß√£o significativa em duas d√©cadas</a></li>
<li><a href="../pt417535/index.html">O desenvolvimento do CUBA est√° a um grande passo do Spring?</a></li>
<li><a href="../pt417537/index.html">"Seu jogo √© chato" ou como aumentar a j√° alta reten√ß√£o do primeiro dia</a></li>
<li><a href="../pt417539/index.html">Google multado em US $ 5 bilh√µes por violar leis antitruste na Europa</a></li>
<li><a href="../pt417541/index.html">Registros da miss√£o Apollo conversam com o centro de controle de v√¥o da NASA digitalizado</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>