<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôçüèº üë≤ üõ∑ Erstellen einer Triggerfunktion in pgModeler üö¥üèø üñïüèΩ üßëüèø‚Äçü§ù‚Äçüßëüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In einem bestimmten K√∂nigreich, in einem bestimmten Zustand ... musste ich dem Modell auf pgModeler einen Trigger hinzuf√ºgen . Was zu tun ist, ist ein...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen einer Triggerfunktion in pgModeler</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424121/">  <i>In einem bestimmten K√∂nigreich, in einem bestimmten Zustand ... musste</i> ich dem Modell auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">pgModeler</a> einen Trigger <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hinzuf√ºgen</a> .  Was zu tun ist, ist einfach genug.  Aber um eine Triggerfunktion hinzuzuf√ºgen ... Es ist auch einfach, aber ich musste mich ein wenig mit den Parametern befassen, die zum F√ºllen / Ausw√§hlen in der Benutzeroberfl√§che angeboten werden. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">pgModeler</a> ist ein sehr gutes Datenbank-Design-Tool, das SQL-Skripte f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PostgreSQL</a> generieren kann.  Details zu diesem Tool und seinen Funktionen finden Sie auf der offiziellen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Website</a> . <br><a name="habracut"></a><br>  Betrachten Sie als Beispiel ein vereinfachtes Modell mit einer einzelnen Tabelle. <br><br><img src="https://habrastorage.org/webt/qv/rk/gh/qvrkghh1osp-coovacxaoen9t5y.png"><br><br>  F√ºgen Sie dem Modell eine Funktion hinzu. <br><br><img src="https://habrastorage.org/webt/cj/xq/vj/cjxqvjvjvu0ilrmnidbyl67iyek.png"><br><br>  Danach √∂ffnet sich ein Fenster mit verschiedenen bearbeitbaren Parametern, mit denen die Funktion erstellt wird.  Einige Felder werden jedoch bereits mit Standardwerten gef√ºllt. <br><br><img src="https://habrastorage.org/webt/ti/gg/fs/tiggfs9_2zuay6vog--ewjrvdxa.png"><br><br>  Lassen Sie uns diese Parameter genauer betrachten. <br><br>  Ich denke, dass mit den Parametern <i>Name</i> , <i>Schema</i> , <i>Eigent√ºmer</i> und <i>Kommentar</i> alles klar ist - dies ist der Name der Funktion, das Datenbankschema, der Eigent√ºmer und der Kommentar f√ºr diese Funktion. <br><br>  <i>Sprache</i> ist der Name der Sprache, in der die Funktion implementiert wird.  Um ehrlich zu sein, musste ich nie Funktionen f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PostgreSQL</a> auf etwas anderem als <i>plpgsql schreiben</i> .  Daher habe ich diesen Wert f√ºr den Parameter ausgew√§hlt. <br><br>  <i>R√ºckgabemethode</i> .  Da wir in der Triggerfunktion weder die Tabelle noch den Wertesatz zur√ºckgeben m√ºssen, verlassen wir <i>Simple</i> . <br><br>  Mit den Parametern im <i>Datentypblock</i> ist im Allgemeinen auch alles einfach.  Weil  Wenn die Funktion im Trigger aufgerufen wird, geben wir im Feld <i>Typ den</i> <i>Trigger an</i> (das Feld <i>Format</i> wird automatisch mit dem <i>Triggerwert</i> gef√ºllt).  Das Feld <i>Dimension</i> (das einzige nicht reservierte digitale Feld in diesem Block) wird ben√∂tigt, um die Dimension des Arrays des zur√ºckgegebenen Werts anzugeben.  Da wir jedoch nur einen Wert und kein Array ben√∂tigen, belassen wir in diesem Feld <i>0</i> . <br><br>  Bei den restlichen Parametern ist zumindest f√ºr mich nicht alles so offensichtlich, weil  musste bei der √ºblichen Erstellung von Funktionen in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PostgreSQL</a> nie dar√ºber nachdenken. <br><br>  <i>Der Funktionstyp</i> kann einen von drei Werten <i>annehmen</i> : <i>IMMUTABLE</i> , <i>STABLE</i> und <i>VOLATILE</i> .  Aus der offiziellen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PostgreSQL-</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation geht hervor</a> , dass diese Argumente den Abfrageoptimierer √ºber das Verhalten der Funktion informieren. <br><br><ul><li>  <i>IMMUTABLE</i> bedeutet, dass die Funktion die Datenbank nicht √§ndern kann und f√ºr bestimmte Werte der Argumente immer das gleiche Ergebnis zur√ºckgibt. <br></li><li>  <i>STABLE</i> bedeutet, dass die Funktion die Datenbank nicht √§ndern kann und innerhalb eines einzelnen Tabellenscans f√ºr bestimmte Werte der Argumente immer das gleiche Ergebnis zur√ºckgibt. <br></li><li>  <i>VOLATILE</i> bedeutet, dass sich das Ergebnis einer Funktion auch innerhalb eines einzelnen Tabellenscans √§ndern kann, sodass ihre Aufrufe nicht optimiert werden k√∂nnen. <br></li></ul><br>  Wenn die Triggerfunktion das √Ñndern der Datenbank erfordert, ist <i>IMMUTABLE dementsprechend</i> nicht geeignet.  Eine Funktion mit dem Parameter <i>STABLE</i> ist nicht f√ºr <i>AFTER-</i> Trigger geeignet, die vom aktuellen Befehl ge√§nderte Zeilen lesen m√∂chten.  Es bleibt <i>VOLATILE</i> , das die oben genannten Probleme nicht hat.  Es wird auch standardm√§√üig angegeben, wenn beim Erstellen der Funktion keines der oben genannten Argumente angegeben wird. <br><br>  <i>Sicherheit</i> kann einen von zwei Werten <i>annehmen</i> : <i>SECURITY DEFINER</i> und <i>SECURITY INVOKER</i> und ist f√ºr die Rechte des Benutzers verantwortlich, der aufgerufen wird. <br><br><ul><li>  <i>SECURITY DEFINER</i> bedeutet, dass die Funktion mit den Rechten des Benutzers ausgef√ºhrt wird, dem sie geh√∂rt, d. H.  derjenige, der auf <i>Eigent√ºmer aufgef√ºhrt war</i> . <br></li><li>  <i>SECURITY INVOKER</i> bedeutet, dass die Funktion mit den Rechten des Benutzers ausgef√ºhrt wird, der sie aufgerufen hat. <br></li></ul><br>  Standardm√§√üig wird <i>SECURITY INVOKER verwendet</i> , sodass Sie es verlassen k√∂nnen. <br><br>  <i>Das Verhalten</i> kann einen von drei Werten <i>annehmen</i> : <i>STRICT</i> , <i>RETURNS NULL ON NULL INPUT</i> und <i>CALLED ON NULL INPUT</i> und zeigt, wie sich die Funktion verh√§lt, wenn ihre Argumente NULL-Werte enthalten. <br><br><ul><li>  <i>RETURNS NULL ON NULL INPUT</i> oder <i>STRICT</i> bedeutet, dass die Funktion immer NULL <i>zur√ºckgibt</i> , wenn mindestens eines ihrer Argumente NULL ist. <br></li><li>  <i>CALLED ON NULL INPUT</i> bedeutet, dass die Funktion wie gewohnt aufgerufen wird, auch wenn NULL zu den Argumenten geh√∂rt. <br></li></ul><br>  Der Standardwert ist <i>CALLED ON NULL INPUT</i> .  Daher k√∂nnen Sie es auf die gleiche Weise verlassen. <br><br>  <i>Zur√ºckgegebene Zeilen</i> zeigt die Anzahl der Zeilen an, die der Scheduler erwartet.  Der Wert wird f√ºr Funktionen angegeben, die Mengen zur√ºckgeben.  Weil  Unsere Funktion gibt einen einzelnen Wert zur√ºck. Wir belassen <i>0</i> . <br><br>  <i>Ausf√ºhrungskosten</i> legt die Kosten f√ºr die Ausf√ºhrung dieser Funktion f√ºr den Scheduler fest.  F√ºr <i>plpgsql</i> ist der Standardwert <i>100</i> .  Daher geben wir diesen Wert an. <br><br>  <i>Windown Func.</i>  bedeutet, dass eine Fensterfunktion erstellt wird.  In unserem Fall, weil  Wir ben√∂tigen eine Triggerfunktion, wir m√ºssen diesen Wert nicht angeben (im Allgemeinen schreiben sie in der Dokumentation selbst, dass es sinnvoll ist, diesen Parameter nur f√ºr in C geschriebene Funktionen anzugeben). <br><br>  <i>Auslaufsicher</i> zeigt an, dass die Funktion versiegelt ist, d.h.  dass es keine Informationen √ºber seine Argumente preisgibt (zum Beispiel zeigt es ihre Bedeutung nicht in einer Fehlermeldung an), au√üer dass ein Ergebnis zur√ºckgegeben wird.  Weil  Da die Triggerfunktion keine Argumente akzeptiert, muss dieser Parameter nicht angegeben werden. <br><br>  Damit sind die Parameter der Funktion beendet.  Der Funktionsk√∂rper selbst kann im selben Fenster auf der Registerkarte Definition geschrieben werden.  Wir erstellen den Trigger selbst. <br><br><img src="https://habrastorage.org/webt/-m/d-/gn/-md-gnby6dhi6dy_o6bxawskjjw.png"><br><br>  Danach erscheint das Fenster zur Triggererstellung. <br><br><img src="https://habrastorage.org/webt/ap/6j/uo/ap6juopfdv961t2r92hxrzjjhkk.png"><br><br>  Ber√ºcksichtigen Sie die Parameter, die in diesem Fenster eingestellt werden k√∂nnen. <br><br>  Mit den Parametern <i>Name</i> , <i>Alias</i> und <i>Kommentar ist</i> wieder alles klar - dies ist der Name des Triggers, Alias ‚Äã‚Äãund Kommentar zum Trigger. <br><br>  <i>Die Ausl√∂sung</i> zeigt, wie dieser Trigger ausgef√ºhrt wird, und kann einen der folgenden Werte annehmen: <i>VOR</i> , <i>NACH</i> und <i>STATT VON.</i> Dies bedeutet, dass die Funktion vor, nach oder anstelle des Ereignisses ausgef√ºhrt wird. <br><br>  <i>F√úR JEDE REIHE</i> bestimmt, ob die Triggerprozedur f√ºr jede Zeile einmal ausgel√∂st wird.  Wenn nicht angegeben, wird der Parameter <i>FOR EACH STATEMENT</i> festgelegt, der bestimmt, dass die Triggerprozedur f√ºr die SQL-Anweisung einmal ausgel√∂st wird. <br><br>  <i>Ereignis</i> bestimmt, welche Ereignisse in diesem Trigger verarbeitet werden m√ºssen.  Sie k√∂nnen mehrere Ereignisse angeben.  Es gibt folgende Arten von Ereignissen: <i>INSERT</i> , <i>UPDATE</i> , <i>DELETE</i> und <i>TRUNCATE</i> .  Sie treten auf, wenn der entsprechende Befehl mit derselben SQL-Anweisung aufgerufen wird. <br><br>  <i>Die Einschr√§nkung</i> gibt an, dass ein Einschr√§nkungstrigger erstellt wird.  Constraint-Trigger werden verwendet, um Ausnahmen auszul√∂sen, wenn Constraints verletzt werden.  Sie k√∂nnen mehr dar√ºber in der offiziellen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> lesen. <br><br>  F√ºr einen Einschr√§nkungstrigger k√∂nnen Sie <i>Deferrable</i> angeben, das die Triggerzeit bestimmt.  Dieser Parameter kann einen der folgenden Werte <i>annehmen</i> : <i>INITIALLY IMMEDIATE</i> oder <i>INITIALLY DEFERRED</i> . <br><br><ul><li>  <i>INITIALLY SOFORT</i> bedeutet, dass der Trigger nach jeder Anweisung ausgel√∂st wird. <br></li><li>  <i>INITIALLY DEFERRED</i> bedeutet, dass der Trigger erst am Ende der Transaktion ausgel√∂st wird. <br></li></ul><br>  <i>Siehe.</i>  <i>Tabelle</i> ist der Name der Tabelle, auf die durch die Einschr√§nkung verwiesen wird.  Wird f√ºr Fremdschl√ºsseleinschr√§nkungen verwendet und ist nur f√ºr Einschr√§nkungsausl√∂ser zul√§ssig. <br><br>  <i>Bedingung</i> ist eine Bedingung, die bestimmt, ob die Triggerfunktion ausgef√ºhrt wird.  F√ºr <i>FOR EACH ROW-</i> Trigger in diesem Feld k√∂nnen Sie √ºber <i>OLD</i> bzw. <i>NEW</i> auf alte und neue Werte zugreifen (d. H. Dieselben wie im Hauptteil der Triggerfunktion). <br><br>  <i>Argumente</i> - Eine Liste von Argumenten, die beim Ausl√∂sen des Triggers an die Triggerfunktion √ºbergeben werden.  String-Konstanten werden als Argumente an die Funktion √ºbergeben. <br><br>  <i>Spalten</i> - k√∂nnen nur f√ºr <i>UPDATE-</i> Ereignisse angegeben werden.  Der Trigger funktioniert nur, wenn sich mindestens eine der angegebenen Spalten in der Liste der in <i>UPDATE</i> angegebenen Spalten befindet. <br><br><h3>  Fazit </h3><br>  Das ist im Allgemeinen alles.  Ich hoffe das war interessant und wird jemandem n√ºtzlich sein. <br><br><hr><br>  Beim Schreiben dieses Artikels wurde pgModeler Version 0.9.2-alpha verwendet, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die</a> unter Windows 7 x64 erstellt wurde.  Bei Verwendung √§lterer / neuerer Versionen von pgModeler sind geringf√ºgige Unterschiede in der Benutzeroberfl√§che m√∂glich. <br><br>  Das im Artikel verwendete Modell kann hier heruntergeladen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">werden</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de424121/">https://habr.com/ru/post/de424121/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de424107/index.html">Es ist ein Jahr seit der L√ºcke im My Cloud-Heimnetzwerkspeicher von WD vergangen</a></li>
<li><a href="../de424109/index.html">VSCE # 2: Podcast f√ºr Medienunternehmer</a></li>
<li><a href="../de424111/index.html">Smart Contracts Waves. Erste Erfahrung</a></li>
<li><a href="../de424113/index.html">Designprozess, Forschung und Jobsuche</a></li>
<li><a href="../de424115/index.html">Anwendungsf√§lle oder welche Load Balancer fehlen</a></li>
<li><a href="../de424127/index.html">Wie man Freunde findet Ovirt und Let's Encrypt</a></li>
<li><a href="../de424129/index.html">Android-Entwicklung. Ein bisschen √ºber die schnelle Arbeit mit Listen</a></li>
<li><a href="../de424131/index.html">Manifest f√ºr Entwickler intelligenter Systeme: 15 Prinzipien</a></li>
<li><a href="../de424133/index.html">Virtualisierung von Arbeitspl√§tzen f√ºr das Architekturb√ºro aus geisteswissenschaftlicher Sicht</a></li>
<li><a href="../de424135/index.html">Die Europ√§ische Union genehmigt eine neue Urheberrechtsrichtlinie - wie sie sich auf das Internet auswirken wird</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>