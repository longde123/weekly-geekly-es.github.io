<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌍 🛰️ 🤷🏼 预加载，预取和其他标签 😪 📗 ⌚️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="有很多方法可以提高Web性能 。 其中之一是预加载以后需要的内容。 CSS预取，整页预览呈现或域名解析。 我们会先做所有事情，然后立即显示结果！ 听起来不错。 

 更酷的是它很容易实现。 五个<link rel>标记为浏览器提供了执行初步操作的命令： 



<link rel="prefetch...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>预加载，预取和其他标签</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445264/"> 有<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">很多方法可以提高Web性能</a> 。 其中之一是预加载以后需要的内容。  CSS预取，整页预览呈现或域名解析。 我们会先做所有事情，然后立即显示结果！ 听起来不错。 <br><br> 更酷的是它很容易实现。 五个&lt;link rel&gt;标记为浏览器提供了执行初步操作的命令： <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prefetch"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/style.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"style"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"preload"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/style.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"style"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"preconnect"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://example.com"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dns-prefetch"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://example.com"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prerender"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://example.com/about.html"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <a name="habracut"></a><br> 简要描述它们的作用以及何时使用它们。 <br><br> 跳转到： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">预加载</a> · <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">预取</a> · <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">预连接</a> · <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">dns-预取</a> · <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">预渲染</a> <br><br><a name="preload"></a><h1> 预载 </h1><br>  <code>&lt;link rel= "preload"&gt;</code>告诉浏览器尽快加载和缓存资源（例如，脚本或样式表）。 当页面加载后需要几秒钟的资源，并且您想加快该过程时，这很有用。 <br><br> 加载后浏览器对资源不执行任何操作。 不执行脚本，不应用样式表。 该资源被简单地缓存，并根据请求立即可用。 <br><br><h3> 句法 </h3><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"preload"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/style.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"style"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  <code>href</code>指向您要下载的资源。 <br><br> 可以在浏览器中下载的任何内容： <br><br><ul><li> 样式表的样式， <br></li><li>  <code>script</code>脚本 <br></li><li> 字体， <br></li><li>  <code>fetch</code>使用<code>fetch()</code>或<code>XMLHttpRequest</code>加载的资源， <br></li><li> 请参阅<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MDN上</a>的完整列表。 </li></ul><br> 指定<code>as</code>属性很重要-这有助于浏览器正确地确定优先级并计划下载。 <br><br><h3> 何时使用 </h3><br> 在不久的将来需要资源时，请使用预加载。 例如： <br><br><ul><li> 来自外部文件的自定义字体： <br><br><pre> <code class="xml hljs"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- index.html --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"index.css"</span></span></span><span class="hljs-tag"> /&gt;</span></span> /* index.css */ @font-face { src: url('comic-sans.woff2') format('woff2'); }</code> </pre> <br> 默认情况下， <code>comic-sans.woff2</code>仅在加载和解析<code>index.css</code>之后开始加载。 为了避免等待太久，您可以使用<code>&lt;link rel= "preload"&gt;</code>提前下载字体： <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"preload"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"comic-sans.woff2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"font"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> </li><li> 如果您根据“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">关键CSS”</a>方法将样式分为两个部分，关键（用于立即渲染）和非关键： <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-comment"><span class="css"><span class="hljs-comment">/* Inlined critical styles */</span></span></span><span class="css"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">/* Custom JS that starts downloading non-critical styles */</span></span></span><span class="actionscript"> loadCSS(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'/app/non-critical.css'</span></span></span><span class="actionscript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> 使用这种方法，非关键样式将仅在启动JavaScript时开始加载，这可能会在渲染后几秒钟发生。 不用等待JS，而是使用<code>&lt;link rel= "preload"&gt;</code>提前开始下载： <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-comment"><span class="css"><span class="hljs-comment">/* Inlined critical styles */</span></span></span><span class="css"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"preload"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/app/non-critical.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"style"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">/* Custom JS that starts downloading non-critical styles */</span></span></span><span class="actionscript"> loadCSS(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'/app/non-critical.css'</span></span></span><span class="actionscript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li></ul><br>  <b>不要滥用预紧力</b> 。 如果您连续下载所有内容，则该站点将不会神奇地加快速度，相反，这会阻止浏览器正确地计划工作。 <br><br>  <b>不要与预取混淆</b> 。 除非在加载页面后立即需要资源，否则不要使用<code>&lt;link rel= "preload"&gt;</code> 。 例如，如果以后需要，例如，对于下一页，则使用<code>&lt;link rel= "prefetch"&gt;</code> 。 <br><br><h3> 详细资料 </h3><br>  <b>这是</b>浏览器执行<b>的必需标记</b> （如果支持），与所有其他与预加载相关的&lt;link&gt;标记不同。 浏览器必须下载<code>&lt;link rel="preload"&gt;</code>指定的资源。 在其他情况下，例如在慢速连接上运行时，它可能会忽略预加载。 <br><br>  <b>优先事项</b> 对于不同的资源（样式，脚本，字体等），浏览器通常分配不同的优先级，以便首先加载最重要的资源。 在这种情况下，浏览器会优先考虑as属性。 对于Chrome浏览器，您可以查看<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">完整的优先级表</a> 。 <br><br> <a href=""><img src="https://habrastorage.org/webt/i2/bf/vi/i2bfvijtqhb3wt6cnkcskwc55ew.png"></a> <br><br><a name="prefetch"></a><h1> 预取 </h1><br>  <code>&lt;link rel= "prefetch"&gt;</code>要求浏览器在后台下载并缓存资源（例如，脚本或样式表）。 下载的优先级较低，因此不会干扰更重要的资源。 如果您需要下一页上的资源，并且想要提前对其进行缓存，这将很有用。 <br><br> 在这里，浏览器在加载后也不会对资源执行任何操作。 不执行脚本，不应用样式表。 该资源被简单地缓存，并根据请求立即可用。 <br><br><h3> 句法 </h3><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prefetch"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/style.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"style"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  <code>href</code>指向您要下载的资源。 <br><br> 可以在浏览器中下载的任何内容： <br><br><ul><li> 样式表的样式， <br></li><li>  <code>script</code>脚本 <br></li><li> 字体， <br></li><li>  <code>fetch</code>使用<code>fetch()</code>或<code>XMLHttpRequest</code>加载的资源， <br></li><li> 请参阅<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MDN上</a>的完整列表。 </li></ul><br> 指定<code>as</code>属性很重要-这有助于浏览器正确地确定优先级并计划下载。 <br><br><h3> 何时使用 </h3><br>  <b>要从其他页面下载资源</b> ，如果您需要<b>其他页面</b>的资源，并且想要对其进行预加载，以加快以后渲染此页面的速度。 例如： <br><br><ul><li> 您有一个在线商店，有40％的用户从主页转到产品页面。 加载CSS和JS文件以呈现产品页面时，请使用<code>&lt;link rel= "prefetch"&gt;</code> 。 <br></li><li> 您有一个一页应用程序，并且不同的页面加载了不同的程序包。 用户访问页面时，您可以预加载该页面所引用的所有页面的程序包。 </li></ul><br>  <b>此标签可能可以在任何体积中安全使用</b> 。 浏览器通常以最低优先级计划预取，因此不会打扰任何人。 请记住，它消耗用户流量，这可能会花费金钱。 <br><br>  <b>不紧急要求</b> 。 在几秒钟内需要资源时，请勿使用<code>&lt;link rel= "prefetch"&gt;</code> 。 在这种情况下，请使用<code>&lt;link rel= "preload"&gt;</code> 。 <br><br><h3> 详细资料 </h3><br>  <b>可选标签</b> 。 不需要浏览器遵循此指令，例如在连接缓慢时，它可以忽略它。 <br><br>  <b>在Chrome中优先</b> 。 在Chrome中， <code>&lt;link rel= "prefetch"&gt;</code>通常以最低优先级（请参见<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">完整优先级表</a> ）执行，即在下载所有其他内容之后执行。 <br><br><a name="preconnect"></a><h1> 预连接 </h1><br>  <code>&lt;link rel= "preconnect"&gt;</code>当您希望将来加快连接速度时，要求浏览器预连接到域。 <br><br> 如果浏览器从新的第三方域检索某些资源，则必须建立连接。 例如，如果您从CDN下载Google字体，React字体，或从API服务器请求JSON响应。 <br><br> 建立新的连接通常需要几百毫秒。 它只完成一次，但是仍然需要时间。 如果预先建立了连接，则可以节省时间并更快地从该域下载资源。 <br><br><h3> 句法 </h3><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">= </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"preconnect"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://api.my-app.com"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  <code>href</code>表示您要确定其IP地址的域名。 您可以指定带前缀（ <code>https://domain.com</code> ）或不带前缀（ <code>//domain.com</code> ）。 <br><br><h3> 何时使用 </h3><br>  <b>用于某些域，您很快将需要</b>从那里下载重要的样式，脚本或图像，但是您尚不知道资源URL。 例如： <br><br><ul><li> 您的应用程序托管在<code>my-app.com</code>上， <code>my-app.com</code>发出AJAX请求：您事先不知道特定的请求，因为它们是由JS动态生成的。 在这里，将标签用于与域的初步连接是非常合适的。 <br></li><li> 您的应用程序托管在<code>my-app.com</code>并使用Google字体。 它们的下载分为两个阶段：首先，从域<code>fonts.googleapis.com</code>下载CSS文件，然后该文件从<code>fonts.gstatic.com</code>请求字体。 在下载CSS文件之前，您无法知道来自<code>fonts.gstatic.com</code>特定字体文件，因此我们只能提前建立初步连接。 </li></ul><br>  <b>使用此标签可以加快某些第三方脚本的速度，或者通过</b>预先设置连接来设置<b>样式</b> 。 <br><br>  <b>不要滥用</b> 。 对于客户端和服务器而言，建立和维护连接都是一项昂贵的操作。 最多可将这个标签用于4-6个域。 <br><br><h3> 详细资料 </h3><br>  <b>可选标签</b> 。 例如，如果已经建立了许多连接或在其他情况下，浏览器不需要遵循该指令，并且可以忽略该指令。 <br><br>  <b>其中包括连接过程</b> 。 要连接到每个站点，浏览器必须执行以下步骤： <br><br><ul><li>  <i>DNS解析</i> 。 找到指定域名（ <code>google.com</code> ）的服务器IP地址（ <code>216.58.215.78</code> ）。 </li><li>  <i>握手TCP</i> 。 数据包交换（客户端→服务器→客户端）以启动与服务器的TCP连接。 </li><li>  <i>TLS握手（仅HTTPS站点）</i> 。 两轮数据包交换（客户端→服务器→客户端→服务器→客户端）以启动安全的TLS会话。 </li></ul><br> 注意：HTTP / 3将改善并加快握手机制，但是距离还有很长的路要走。 <br><br><a name="dns-prefetch"></a><h1>  dns预取 </h1><br>  <code>&lt;link rel= "dns-prefetch"&gt;</code>要求浏览器提前为该域预先解析DNS，如果您很快会连接到该域并希望加快初始连接的速度。 <br><br> 如果浏览器将从新的第三方域检索一些资源，则必须确定该域的IP地址。 例如，从CDN下载Google字体，React字体，或从API服务器请求JSON响应。 <br><br> 对于每个新域，DNS解析通常需要大约20-120毫秒。 这仅影响从给定域中加载第一个资源，但仍表示延迟。 如果您提前实施DNS解析，那么我们将节省时间并更快地加载资源。 <br><br><h3> 句法 </h3><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">= </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dns-prefetch"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://api.my-app.com"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  <code>href</code>指示要为其设置IP地址的域名。 您可以指定带前缀（ <code>https://domain.com</code> ）或不带前缀（ <code>//domain.com</code> ）。 <br><br><h3> 何时使用 </h3><br>  <b>用于即将需要</b>从中下载浏览器事先不知道的资源的<b>域</b> 。 例如： <br><br><ul><li> 您的应用程序托管在<code>my-app.com</code>上， <code>my-app.com</code>发出AJAX请求：您事先不知道特定的请求，因为它们是由JS动态生成的。 在这里，将标签用于与域的初步连接是非常合适的。 <br></li><li> 您的应用程序托管在<code>my-app.com</code> ，并使用Google字体。 它们的下载分为两个阶段：首先，从域<code>fonts.googleapis.com</code>下载CSS文件，然后该文件从<code>fonts.gstatic.com</code>请求字体。 在下载CSS文件之前，您无法知道来自<code>fonts.gstatic.com</code>特定字体文件，因此我们只能提前建立初步连接。 </li></ul><br>  <b>使用此标签可以加快某些第三方脚本的速度，或者通过</b>预先设置连接来设置<b>样式</b> 。 <br><br><blockquote> 请注意<code>&lt;link rel= "dns-prefetch"/&gt;</code>和<code>&lt;link rel= "preconnect"&gt;</code>上的类似规范。 将它们一起用于同一域通常是没有意义的： <code>&lt;link rel= "preconnect"&gt;</code>已经包含<code>&lt;link rel= "dns-prefetch"/&gt;</code>等等。 有两种情况可以证明这一点： <br><br><ul><li>  <i>您要支持较旧的浏览器</i> 。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">自IE10和Safari 5以来，一直</a>支持<code>&lt;link rel= "dns-prefetch" /&gt;</code> 。 在Chrome和Firefox中支持<code>&lt;link rel= "preconnect"&gt;</code>已有一段时间，但仅在11.1中将它添加到Safari中<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">，而IE / Edge仍不支持</a> 。 如果需要支持这些浏览器，请使用<code>&lt;link rel= "dns-prefetch" /&gt;</code>作为<code>&lt;link rel= "preconnect"&gt;</code>的<code>&lt;link rel= "preconnect"&gt;</code> 。 </li><li>  <i>您想加快与4-6个以上域的连接</i> 。 不建议将<code>&lt;link rel= "preconnect"&gt;</code>用于超过4-6个域，因为建立和维护连接是一项昂贵的操作。  <code>&lt;link rel= "dns-prefetch" /&gt;</code>消耗较少的资源，因此在必要时使用它。 </li></ul></blockquote><br><h3> 详细资料 </h3><br>  <b>可选标签</b> 。 不需要浏览器遵循此指令，因此，例如，如果页面上有很多此类标签或在其他情况下，浏览器可能不会执行DNS解析。 <br><br>  <b>什么是DNS</b> 。  Internet上的每个服务器都有一个唯一的IP地址，看起来像<code>216.58.215.78</code> 。 通常在浏览器的地址栏中输入网站的名称（例如<code>google.com</code> ），DNS（域名系统）服务器将其映射到服务器IP地址（ <code>216.58.215.78</code> ）。 <br><br> 要确定IP地址，浏览器必须查询DNS服务器。 连接到新的第三方域需要20-120毫秒。 <br><br>  <b>虽然不是很可靠，但DNS已被缓存</b> 。 某些操作系统和浏览器会缓存DNS查询：这样可以节省重复查询的时间，但是您不能依靠缓存。 在Linux上，它通常根本不起作用。  Chrome具有DNS缓存，但仅持续一分钟。  Windows将DNS响应缓存五天。 <br><br><a name="prerender"></a><h1> 呈现 </h1><br>  <code>&lt;link rel= "prerender"&gt;</code>要求浏览器下载URL并将其显示在不可见的选项卡上。 用户单击链接时，应立即显示该页面。 如果您确定用户将访问特定页面并希望加快其显示速度，这将很有用。 <br><br> 尽管此标签具有出色的效果（或由于它的原因），但在2019年，主要浏览器对<code>&lt;link rel= "prerender"&gt;</code>支持<code>&lt;link rel= "prerender"&gt;</code>很差。 有关更多详细信息，请参见<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">下文</a> 。 <br><br><h3> 句法 </h3><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prerender"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://my-app.com/pricing"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  <code>href</code>指向您要在后台运行渲染的URL。 <br><br><h3> 何时使用 </h3><br>  <b>当您真正确定该用户将转到特定页面时</b> 。 如果您有一个“隧道”，A页面的70％的访问者可通过该隧道访问B页面，则A页面上的<code>&lt;link rel= "prerender"&gt;</code>将有助于非常快速地显示B页面。 <br><br>  <b>不要滥用</b> 。 就流量和内存而言，预渲染非常昂贵。 不要使用<code>&lt;link rel= "prerender"&gt;</code>超过一页。 <br><br><a name="1"></a><h3> 详细资料 </h3><br>  <b>可选标签</b> 。 浏览器不需要遵循此指令，并且可以忽略它，例如，在连接速度慢或可用内存不足的情况下。 <br><br> 为了节省内存， <b>Chrome不执行完整渲染</b> ，而<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">仅预加载NoState</a> 。 这意味着Chrome会加载页面及其所有资源，但不会呈现并且不会执行JavaScript。 <br><br>  Firefox和Safari根本不支持此标签。 这不违反规范，因为不需要浏览器遵循此说明； 但是反正很难过。  Firefox中<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的实现错误</a>已经开放了七年。 有报道说Safari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">也不支持该标签</a> 。 <br><br><h1> 总结 </h1><br> 用途： <br><br><ul><li>  <code>&lt;link rel= "preload"&gt;</code> -在几秒钟内需要资源时 <br></li><li>  <code>&lt;link rel= "prefetch"&gt;</code> -当您需要下一页上的资源时 <br></li><li>  <code>&lt;link rel= "preconnect"&gt;</code> -当您知道将很快需要资源但还不知道其完整URL时 <br></li><li>  <code>&lt;link rel= "dns-prefetch"&gt;</code> -类似地，当您知道很快将需要资源但您仍不知道其完整URL（对于旧浏览器）时， <br></li><li>  <code>&lt;link rel= "prerender"&gt;</code> -当您确定用户将转到特定页面并希望加快其显示速度时 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN445264/">https://habr.com/ru/post/zh-CN445264/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN445254/index.html">在Go上测试以太坊智能合约：再见，JavaScript</a></li>
<li><a href="../zh-CN445256/index.html">网络犯罪分子控制了ASUS Live Update五个月</a></li>
<li><a href="../zh-CN445258/index.html">出售前如何从Android智能手机安全删除数据</a></li>
<li><a href="../zh-CN445260/index.html">机器人会真正地认出自己吗？ 科学家正在朝这个方向发展。</a></li>
<li><a href="../zh-CN445262/index.html">GeekUniversity在大数据分析系招聘</a></li>
<li><a href="../zh-CN445266/index.html">GeekBrains与Rostelecom一起进行物联网Hackathon</a></li>
<li><a href="../zh-CN445268/index.html">GraphQL详细信息：什么，如何以及为什么</a></li>
<li><a href="../zh-CN445270/index.html">[书签]初学者重击：21条有用的命令</a></li>
<li><a href="../zh-CN445272/index.html">JavaScript是适合初学者的最佳编程语言。 是不是？</a></li>
<li><a href="../zh-CN445274/index.html">当“Zoë”！==“Zoë”时，或者为什么需要标准化Unicode字符串</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>