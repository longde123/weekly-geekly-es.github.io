<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌙 🐁 👗 从小工具或“夏季准备推车”配置对空调的红外控制 ♈️ 🧓🏽 😬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在现代家庭自动化系统中，要解决的任务清单中最经常使用的气候控制是在使用照明设备之后的第二位。在这种情况下使用的设备范围非常广泛。排在最前面的是用于HVAC（供暖，通风和空调-加热，通风和空调）的专业设备，包括地板采暖，空气再循环系统和冷天花板。在可访问的部分中，我们看到传统的家用空调以及众多的电加热...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>从小工具或“夏季准备推车”配置对空调的红外控制</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/iridiummobile/blog/389049/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在现代家庭自动化系统中，要解决的任务清单中最经常使用的气候控制是在使用照明设备之后的第二位。在这种情况下使用的设备范围非常广泛。排在最前面的是用于HVAC（供暖，通风和空调-加热，通风和空调）的专业设备，包括地板采暖，空气再循环系统和冷天花板。在可访问的部分中，我们看到传统的家用空调以及众多的电加热器和燃气锅炉，并且通常通过“手动”打开窗户的方法来解决通风任务。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
控制空调最方便的方法是通过专用接口连接到空调，该接口不仅提供发送命令，而且还提供状态监视以及通知状态和可能的故障。但是，此选项仅在某些型号中可用，它可能需要购买其他单元，很难称得上负担得起。但是，如今，随着AllJoyn，HomeKit和SmartThings等标准的泛滥，类似的模型</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开始出现</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在更大规模的细分市场中。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
幸运的是，还有另一种控制空调的方法-使用IR通道。</font><font style="vertical-align: inherit;">这种方法的优点包括多功能性（一个红外发射器可以同时为房间中的各种设备提供服务）和低成本。</font><font style="vertical-align: inherit;">缺点是完全缺乏受管设备的反馈。</font><font style="vertical-align: inherit;">另外，该解决方案甚至不能保证命令的交付。</font><font style="vertical-align: inherit;">这种方法适合您决定，但是，我们认为，这种选择的可用性要比完全缺乏控制要好。</font></font><br>
<a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择设备</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们看看有哪些选项可以发送IR命令。</font><font style="vertical-align: inherit;">当今最流行和通用的设备之一可以称为Global Cache制造的设备。</font><font style="vertical-align: inherit;">该产品线包括六种型号，可通过IR，RS-232和干触点提供监视和控制。</font><font style="vertical-align: inherit;">我们建议您将这些可靠的解决方案用于此任务，作为专业安装的一部分，对此您必须承担责任。</font></font><br>
<br>
<img src="https://habrastorage.org/files/a93/ea6/8ea/a93ea68ea44142e7890d4f375676697c.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了与所有变送器一起使用，使用了网络接口（有线或无线）和基于TCP / IP的协议。</font><font style="vertical-align: inherit;">拥有详细的文档可以轻松地将这些解决方案集成到您的自动化系统中。</font><font style="vertical-align: inherit;">请注意，iRidium软件包具有用于Global Cache设备的内置配置数据库，从而进一步简化了使用它们的工作。</font></font><br>
<br>
<img src="https://habrastorage.org/files/7a8/b50/257/7a8b50257c194044b1f6bd25ce85b094.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该制造商的设备的缺点是其相当高的成本。作为更实惠的替代方案，尤其是对于那些喜欢自己动手做的事情，我们可以称之为制造基于微控制器的变送器。著名的Arduino平台非常适合培训和面包板组装。您将需要任何一块板（此项目对输入和输出的要求最低），一个用于提供远程访问的合适的网络接口或模块，一个红外LED以及一些其他详细信息。可以轻松找到网络上此类设备的示例，并根据您的任务进行调整（例如，参见</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SparkFun的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个选项</font><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<img src="https://habrastorage.org/files/71f/96f/1f0/71f96f1f0d484f9e9553cb522e82daa2.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
还建议购买红外接收器模块，这是研究空调协议所必需的。</font><font style="vertical-align: inherit;">请注意，物理IR协议的主要参数之一是调制频率（最常见的值为38和36 kHz）。</font><font style="vertical-align: inherit;">可以“教”一台设备以不同的频率发送数据，但是接收器被调整为固定值，因此可能要花费一些时间。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们研究协议</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下一步是解密空调的控制协议。遥控器通常具有一组基本的按钮-升高和降低温度，选择模式，控制风扇，选择出风口的方向，关闭电源。</font></font><br>
<br>
<img src="https://habrastorage.org/files/998/d12/511/998d125112464cdeb5b5163c8d278461.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与音频视频设备不同，在发送的每个命令中，空调遥控器均使用完整的所有参数集。因此，通常不需要了解协议详细信息的传统选项“按按钮，记录所有命令，回放记录”在这里不适用。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在我们的情况下，首先我们需要记录仅改变一个参数（例如温度）的记录。然后修复它，并尝试通过将数据写入第二组来更改另一个参数。请注意，如果使用Arduino，则很可能需要修复标准库的文件，以增加RAW模式下记录的命令的最大持续时间。</font></font><br>
<br>
<img src="https://habrastorage.org/files/53b/e26/989/53be2698903e4fac8f74161e3c298d67.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在不赘述的情况下，我们展示一些示例。 iLearn专有实用程序中全局缓存的输出可能如下所示：</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sendir，1：1,24,37914,1,1,116,115,116,168,22,62,21,20,22,62,21,20,22,20,21,62,22,20,21,62,21,20， 21.63,21.62,21,21,21,20,21,21,21,62,21,62,21,20,22,20,21,62,22,62,21,20,22， 20,21,62,21,21,21,20,22,20,21,21,21,62,21,21,21,62,21,62,21,21,21,20,21,21， 21,21,21,20,21,63,21,62,21,20,21,21,21,62,21,63,21,20,21,21,21,21,21,21,20,21， 21,21,20,21,21,21,21,21,62,21,21,21,20,21,21,21,20,21,21,21,21,21,21,20,21,21， 21,21,21,20,21,21,21,20,21,21,21,21,21,21,20,21,63,21,62,21,62,21,63,22,20,21， 21,21,3700</font></font></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于</font><font style="vertical-align: inherit;">Arduino中</font><font style="vertical-align: inherit;">的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IRremote</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库</font><font style="vertical-align: inherit;">，输出格式是不同的：</font></font><br>
<br>
<pre>Raw (150): 4316 3050 -3000 3050 -4350 600 -1600 550 -550 550 -1600 600 -500 550 -550 550 -1600 600 -500 600 -1550 550 -550 650 -1500 600 -500 650 -450 550 -550 600 -1550 550 -1600 600 -500 650 -450 650 -450 600 -1550 650 -450 600 -500 600 -500 600 -450 650 -450 600 -500 600 -450 650 -1550 550 -550 600 -1550 550 -550 600 -500 600 -450 650 -450 650 -450 600 -500 600 -500 600 -1550 600 -1550 600 -500 650 -450 600 -500 600 -500 550 -500 600 -500 600 -500 600 -500 600 -450 650 -450 600 -450 650 -450 650 -1550 600 -500 600 -500 600 -450 650 -450 600 -450 650 -450 600 -500 600 -500 600 -500 550 -500 650 -450 650 -450 600 -450 650 -450 600 -1600 600 -500 500 -1650 600 -1550 650 -1550 600 -1550 650 -1550 600</pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过对记录的行的数据进行简单的操作（例如，来自</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">站点的资料</font><font style="vertical-align: inherit;">可以为您提供帮助</font><font style="vertical-align: inherit;">），我们获得了二进制代码，在我们的示例中，该代码为9个字节。</font><font style="vertical-align: inherit;">在研究了所有参数之后，有可能找出我们的空调所使用的编码，这些编码不是由最著名的品牌生产的，其领域是：</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10100101 tttt011p dd100000 00101000 00001100 ff000000 mmm00000 00000000 ssssssss</font></font><font></font>
                                                              <font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tttt：预设温度-16（调节-从16到30度）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
p：0-启用，1-禁用 </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dd：摆动（00-自动，01-向上，10-向下，11-运动）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ff：风扇（00-自动，11-第一速度，10-第二速度，01-第三速度）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
毫米：模式（000-自动，001-冷却，010-排水，011-加热，100-风扇）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ssssssss：校验和（前八个字节的总和为模256）</font></font><font></font>
</pre><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们管理</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
根据这些数据，编写用于为Global Cache和Arduino进行空调控制创建所需的二进制代码的程序已经很容易了。</font><font style="vertical-align: inherit;">在这种情况下，最好使用具有编程支持的控制器或面板，这将允许您“即时”生成必要的命令，并像原始遥控器一样将所有参数记录在其中。</font><font style="vertical-align: inherit;">特别是，在iRidium Mobile中，您可以使用JavaScript编程功能，并通过局域网发送到执行设备，您需要AV＆Custom Systems驱动程序。</font></font><br>
<br>
<img src="https://habrastorage.org/files/44b/72a/eaa/44b72aeaa1c74802882b514099aecf1c.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
请注意，您还可以在此处实现并显示空调的当前模式。但是，必须注意，信息将来自控制面板的内部变量，而不是直接来自空调，因为在这种情况下IR控制是单向的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果在同一房间中使用多个空调，并且为了更可靠地发送IR命令，则可能有必要将IR LED直接安装在每个设备的接收器窗口上。</font></font><br>
<br>
<img src="https://habrastorage.org/files/0a4/849/138/0a48491389b8421d9cc79639dc34cb41.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果房间中只有一台空调，则一个正确安装的红外发射器就足够了，这对于控制其他设备（例如风扇或音乐中心）也很有用。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如有必要，可以在控制系统中补充实际温度传感器，空调消耗传感器（以控制其包含），用于阻止操作的窗户传感器，自动控制模式，并考虑街道温度的动态变化，时间表和其他功能。</font></font><br>
</div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN389049/">https://habr.com/ru/post/zh-CN389049/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN389035/index.html">DIY书籍扫描仪</a></li>
<li><a href="../zh-CN389039/index.html">显卡驱动程序：那是谁的错误？</a></li>
<li><a href="../zh-CN389041/index.html">Everykey：您的小工具的通用密钥</a></li>
<li><a href="../zh-CN389043/index.html">存储介质演进第4部分：固态驱动器</a></li>
<li><a href="../zh-CN389045/index.html">Илон Маск не боится электрокара от Apple: соперничество будет полезно для индустрии</a></li>
<li><a href="../zh-CN389051/index.html">CNET智能家居：小工具测试场</a></li>
<li><a href="../zh-CN389053/index.html">智能家居。脑子</a></li>
<li><a href="../zh-CN389057/index.html">CES 2016：LG和三星宣布推出智能家居</a></li>
<li><a href="../zh-CN389063/index.html">80年代的方形汽车如何由90年代精简</a></li>
<li><a href="../zh-CN389065/index.html">黎明探测器发送了谷神星陨石坑的详细图片</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>