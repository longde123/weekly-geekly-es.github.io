<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßîüèº üë®üèª‚Äçüé§ üö£üèø Doble VPN en un clic. C√≥mo dividir f√°cilmente la direcci√≥n IP de un punto de entrada y salida üê∑ üßü üòì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TL; DR Este art√≠culo describe la forma m√°s f√°cil de configurar un servidor VPN, cuya direcci√≥n IP para conectar clientes VPN es diferente de la direcc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Doble VPN en un clic. C√≥mo dividir f√°cilmente la direcci√≥n IP de un punto de entrada y salida</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vdsina/blog/469879/"><img src="https://habrastorage.org/webt/gu/ux/_r/guux_rw3bw9b6_0h617yyow4xrq.png"><br><br>  <b>TL; DR</b> <i>Este art√≠culo describe la forma m√°s f√°cil de configurar un servidor VPN, cuya direcci√≥n IP para conectar clientes VPN es diferente de la direcci√≥n IP desde la cual los clientes acceden a Internet.</i> <br><br>  ¬øUtiliza una VPN para proteger la privacidad en Internet y alquila su propio servidor para esto?  ¬øEres el √∫nico cliente que se conecta a este servidor en todo el mundo?  ¬øCrees que es tan dif√≠cil encontrar tu direcci√≥n IP real?  Con la entrada en vigor del paquete Spring, se vuelve mucho m√°s f√°cil. <br><br>  <b>La doble VPN</b> es un tema popular en torno al cual hay mucha especulaci√≥n.  A menudo, este t√©rmino se denomina tecnolog√≠a completamente diferente, pero casi siempre significa conexi√≥n a Internet y puntos de salida separados en el nivel de las direcciones IP.  Consideraremos la forma m√°s f√°cil de configurar un servidor VPN en este modo, que no requiere configuraci√≥n adicional en el lado del servidor y le permite obtener la velocidad m√°xima y la latencia m√°s baja. <br><a name="habracut"></a><br><h2>  Modelo de amenaza </h2><br>  Para protegerse de algo, debe comprender claramente el modelo de amenaza.  No discutiremos las nuevas leyes que requieren que los proveedores almacenen todo el tr√°fico de clientes, pero definitivamente podemos decir que los datos de conexi√≥n, los llamados  Netflow, el almacenamiento es bastante simple, y se ha hecho durante mucho tiempo.  Es decir, se registra el hecho de conectar una direcci√≥n IP condicional <b><code>1.1.1.1</code></b> a la direcci√≥n <b><code>2.2.2.2</code></b> en un momento determinado del d√≠a. <br><br>  Tener acceso a dicha informaci√≥n en la escala del proveedor, ciudad o pa√≠s, es suficiente simplemente establecer qui√©n se esconde detr√°s de la VPN. <br><br>  Para aumentar el nivel de privacidad cuando se utiliza una VPN, debe separar el punto de conexi√≥n y el punto de acceso a Internet a nivel de IP.  En la imagen de arriba, nuestro usuario est√° detr√°s de la cerca bajo el escrutinio de Irina Yarovoy.  Irina recuerda estrictamente todas las conexiones que pasan por la cerca.  El usuario, como ciudadano decente, se conecta a la direcci√≥n <b><code>good.citizen.vpn</code></b> , mientras regresa de la direcci√≥n <b><code>super.cool.guy.vpn</code></b> .  Como resultado, para Irina, estas dos conexiones parecen desconectadas. <br><br><h2>  ¬øQu√© son las VPN duales? </h2><br>  Bajo el nombre de VPN "doble", a menudo se entienden diferentes cosas, pero casi siempre significa nodos de conexi√≥n y acceso a Internet separados geogr√°ficamente o en el nivel de la red.  A veces es solo un truco de marketing de los proveedores de VPN, lo que no significa absolutamente nada, tales servicios se pueden llamar VPN "triples" y "cu√°druples". <br><br>  Analizaremos los esquemas m√°s t√≠picos que se utilizan en la pr√°ctica. <br><br><h3>  VPN entre servidores </h3><br>  La forma mas comun.  En este modo, el cliente establece una conexi√≥n VPN solo con el primer servidor.  El t√∫nel hacia el segundo se configura en el primer servidor, y todo el tr√°fico del cliente va al segundo servidor, y as√≠ sucesivamente.  Puede haber varios servidores intermedios.  Adem√°s, el t√∫nel entre los servidores se puede instalar utilizando cualquier otro protocolo que no sea el protocolo a trav√©s del cual est√° conectado el cliente, por ejemplo IPsec, o sin ning√∫n cifrado, como GRE o IPIP.  En este modo, todos los servidores intermedios <b>se pueden ver en el rastreo de ruta</b> .  No hay forma de verificar exactamente c√≥mo est√°n conectados los servidores intermedios en el lado del cliente, por lo que solo puede confiar en el proveedor. <br><br>  A lo largo de la ruta de tr√°fico, la MTU m√≠nima (unidad de transmisi√≥n m√°xima) permanece igual al valor del primer t√∫nel, y cada servidor intermedio <b>tiene acceso al tr√°fico descifrado del cliente</b> . <br><br><img src="https://habrastorage.org/webt/-f/k8/0p/-fk80pf8rdttoxn4tbpu7qcnopi.png"><br><br><h3>  VPN a trav√©s de proxy </h3><br>  Tambi√©n una forma bastante com√∫n.  A menudo se usa para enmascarar el tr√°fico VPN bajo un protocolo diferente, por ejemplo en China.  Este m√©todo es m√°s conveniente que una cadena de servidores proxy, ya que al usar una VPN es f√°cil enrutar todo el tr√°fico del sistema hacia el t√∫nel.  Tambi√©n hay herramientas para interceptar llamadas de sistema de programas y redirigirlos a servidores proxy: ProxyCap, Proxifier, pero son menos estables porque a veces pierden solicitudes y omiten el proxy o funcionan incorrectamente con algunos programas. <br><br>  En este modo, el servidor proxy no es visible en el rastreo de ruta. <br><br><img src="https://habrastorage.org/webt/hd/uf/ar/hdufardfsfqecwuasklqamx_fzw.png"><br><br><h3>  VPN dentro de VPN </h3><br>  La forma m√°s paranoica y lenta: todos los t√∫neles se elevan del lado del cliente, uno dentro del otro.  Este m√©todo requiere una configuraci√≥n astuta de rutas en el lado del cliente y el lanzamiento de todos los clientes VPN en el orden correcto.  Esto es malo para la latencia y el rendimiento, pero los servidores intermedios no tienen acceso al tr√°fico abierto del cliente.  Se resumen todos los gastos generales de encapsulaci√≥n, y el tama√±o m√°ximo de paquete (MTU) que est√° disponible para el cliente disminuye en funci√≥n del n√∫mero de t√∫neles.  Los servidores intermedios no son visibles en el rastreo de ruta. <br><br><img src="https://habrastorage.org/webt/1f/bc/_d/1fbc_dpm24jxomg-gtt-t4xhouu.png"><br><br><h2>  Configurar VDS </h2><br>  La forma m√°s f√°cil de configurar una VPN con puntos de entrada y salida divididos es conectar varias direcciones IP a un √∫nico servidor virtual.  Este m√©todo le permite obtener la velocidad m√°xima y los retrasos m√≠nimos, ya que de hecho el tr√°fico se termina en un solo servidor.  En <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Vdsina.ru,</a> puede hacerlo usted mismo desde el panel de control.  Si bien IPv4 termina en todas partes, emitimos direcciones IP adicionales incluso en servidores por 60 rublos. <br><br>  Analizaremos la configuraci√≥n del servidor paso a paso. <br><br><h3>  Elige un servidor </h3><br>  Ordenamos VDS con una tarifa adecuada, en el centro de datos necesario.  Dada nuestra tarea, elegiremos un centro de datos m√°s lejos, en los Pa√≠ses Bajos;) <br><br><img src="https://habrastorage.org/webt/xf/jv/nt/xfjvntqtokkir7sgkqlzcctlgyq.png"><br><br><h3>  Conecte una direcci√≥n IP adicional </h3><br>  Despu√©s de comprar una direcci√≥n IP adicional, debe configurarla de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">acuerdo con las instrucciones</a> . <br><br><img src="https://habrastorage.org/webt/um/er/ot/umerotsqubrxdreezekpld2jzyi.png"><br><br>  Para mayor claridad, asigne un registro PTR a IP.  Este es el nombre de dominio que ser√° visible cuando la direcci√≥n IP se convierta nuevamente a un dominio.  Esto puede ser cualquier valor, incluido un dominio inexistente. <br><br>  Por ejemplo, utilizaremos los siguientes valores: <br><br><pre> <code class="bash hljs">xxx.xxx.38.220 ‚Äî super.cool.guy.vpn <span class="hljs-comment"><span class="hljs-comment">#   ( ) xxx.xxx.39.154 ‚Äî good.citizen.vpn #   ( )</span></span></code> </pre><br><img width="400" src="https://habrastorage.org/webt/mz/oh/uj/mzohujvwi-8-ahlpeuuaduo1rie.png"><br><br><h2>  Dos verificaciones de IP </h2><br>  Es importante recordar que la direcci√≥n IP que se configur√≥ originalmente en el servidor ser√° el punto de salida, por lo que la nueva direcci√≥n ser√° el punto de entrada.  Con√©ctese a trav√©s de SSH al servidor y verifique qu√© direcci√≥n se usa como externa. <br><br>  Para hacer esto, es m√°s f√°cil usar el servicio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ifconfig.co</a> desde la consola.  Al solicitar mediante curl, devuelve la direcci√≥n IP desde la que se realiz√≥ la solicitud. <br><br><pre> <code class="bash hljs">$ curl ifconfig.co xxx.xxx.38.220</code> </pre><br>  Las √∫ltimas cifras muestran que nuestra direcci√≥n externa realmente coincide con el punto de salida.  Intentemos verificar el correcto funcionamiento de la segunda IP como punto de entrada.  Para hacer esto, simplemente use la funci√≥n proxy SOCKS integrada en SSH. <br><br>  Los comandos se ejecutan en el cliente: <br><br><pre> <code class="bash hljs">ssh -D 9999 root@good.citizen.vpn <span class="hljs-comment"><span class="hljs-comment">#    curl -x socks5h://127.0.0.1:9999 ifconfig.co super.cool.guy.vpn</span></span></code> </pre><br>  El primer comando configura una sesi√≥n SSH con la direcci√≥n good.citizen.vpn y activa simult√°neamente un proxy SOCKS dentro de esta sesi√≥n, que est√° disponible en el puerto local.  El segundo realiza una solicitud HTTP normal a trav√©s de este proxy. <br><blockquote>  Es importante recordar que nuestros ejemplos usan nombres de dominio ficticios para las consultas.  Se mostrar√°n solo con una resoluci√≥n PTR, y no se puede hacer una solicitud completa.  Por lo tanto, en esta etapa, debe acceder al servidor a trav√©s de la direcci√≥n IP. </blockquote><h2>  Configuraci√≥n del servidor IKEv2 </h2><br><div style="text-align:center;"><img width="700" src="https://habrastorage.org/webt/gg/tv/jr/ggtvjr7iq-tknhzeiv-3cdogqw0.png"></div><br><br>  IPsec IKEv2 es un protocolo VPN moderno compatible con casi todos los sistemas operativos listos para usar.  Se utiliza como protocolo predeterminado en Windows, macOS e iOS.  No requiere instalaci√≥n de software de terceros y en la mayor√≠a de los casos es m√°s r√°pido que OpenVPN.  Ya hab√≠a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culos sobre la configuraci√≥n del servidor IKEv2 en el concentrador</a> , pero todos describen el uso de certificados autofirmados y son inconvenientes porque requieren que instale el certificado ra√≠z en el lado del cliente VPN. <br><br>  Analizaremos un ejemplo de configuraci√≥n del servidor utilizando un certificado de confianza de Let's Encrypt.  Esto le permite no instalar certificados ra√≠z extra√±os para el cliente, sino emitir solo un nombre de usuario y contrase√±a. <br><br><h3>  Preparaci√≥n del servidor </h3><br>  Utilizaremos un servidor basado en Ubuntu 18.04, pero la instrucci√≥n tambi√©n es adecuada para la mayor√≠a de las distribuciones modernas. <br><br>  Actualizamos el sistema e instalamos los paquetes necesarios. <br><br><pre> <code class="plaintext hljs">apt update &amp;&amp; apt upgrade apt install certbot strongswan libstrongswan-extra-plugins</code> </pre><br><h3>  Emisi√≥n de certificado </h3><br>  Para emitir un certificado de confianza, debe dirigir el dominio real a la direcci√≥n IP del punto de entrada.  No consideraremos este art√≠culo en detalle, ya que est√° m√°s all√° del alcance del art√≠culo.  Como ejemplo, utilizaremos el dominio ficticio <b>good.citizen.vpn</b> <br><br>  Si ya tiene un servidor web en el servidor, use el m√©todo apropiado para emitir el certificado a trav√©s de certbot u otro cliente para Let's Encrypt.  Este ejemplo supone que el puerto HTTP (80) no est√° ocupado. <br><br><pre> <code class="bash hljs">certbot certonly --standalone --agree-tos -d good.citizen.vpn</code> </pre><br>  ¬øContestando las preguntas del mago?  recibiremos un certificado firmado y una clave <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># find /etc/letsencrypt/live/good.citizen.vpn/ /etc/letsencrypt/live/good.citizen.vpn/ /etc/letsencrypt/live/good.citizen.vpn/fullchain.pem /etc/letsencrypt/live/good.citizen.vpn/README /etc/letsencrypt/live/good.citizen.vpn/cert.pem /etc/letsencrypt/live/good.citizen.vpn/privkey.pem /etc/letsencrypt/live/good.citizen.vpn/chain.pem</span></span></code> </pre><br>  Para la autenticaci√≥n del servidor IKEv2, se utilizan los mismos certificados X.509 que para <br>  Https  Para que Strongswan pueda usar estos certificados, deben copiarse en la carpeta /etc/ipsec.d. <br><br>  As√≠ es como deben ubicarse los certificados: <br><br><pre> <code class="plaintext hljs">cp /etc/letsencrypt/live/good.citizen.vpn/cert.pem /etc/ipsec.d/certs/ cp /etc/letsencrypt/live/good.citizen.vpn/privkey.pem /etc/ipsec.d/private/ cp /etc/letsencrypt/live/good.citizen.vpn/chain.pem /etc/ipsec.d/cacerts/</code> </pre><br>  Dado que los certificados de letsencrypt se vuelven a emitir con frecuencia, hacerlo manualmente es un inconveniente.  Por lo tanto, automatizamos este proceso utilizando el gancho para certbot. <br><br>  La tarea del script es copiar tres archivos en la carpeta deseada cada vez que se actualiza el certificado y luego enviar el comando strongswan para volver a leer los certificados. <br><br>  Cree el archivo <b>/etc/letsencrypt/renewal-hooks/deploy/renew-copy.sh</b> y <b>h√°galo</b> ejecutable. <br><br><pre> <code class="plaintext hljs">#!/bin/sh set -e for domain in $RENEWED_DOMAINS; do case $domain in good.citizen.vpn) daemon_cert_root=/etc/ipsec.d/ # Make sure the certificate and private key files are # never world readable, even just for an instant while # we're copying them into daemon_cert_root. umask 077 cp "$RENEWED_LINEAGE/cert.pem" "$daemon_cert_root/certs/" cp "$RENEWED_LINEAGE/chain.pem" "$daemon_cert_root/cacerts/" cp "$RENEWED_LINEAGE/privkey.pem" "$daemon_cert_root/private/" # Reread certificates /usr/sbin/ipsec reload /usr/sbin/ipsec purgecerts /usr/sbin/ipsec rereadall ;; esac done</code> </pre><br>  Ahora, despu√©s de cada nueva emisi√≥n del certificado, el script copiar√° los nuevos archivos a las carpetas de strongswan y enviar√° un comando al demonio para volver a leer los certificados. <br><br><h3>  Configuraci√≥n de Strongswan </h3><br>  Agregue la configuraci√≥n strongswan /etc/ipsec.conf <br><br><pre> <code class="bash hljs">config setup <span class="hljs-comment"><span class="hljs-comment">#       uniqueids=no # Increase debug level # charondebug = ike 3, cfg 3 conn %default #       ike=aes256-sha256-modp1024,aes256-sha256-modp2048 #  ""  dpdaction=clear dpddelay=35s dpdtimeout=2000s keyexchange=ikev2 auto=add rekey=no reauth=no fragmentation=yes #compress=yes # left - local (server) side leftcert=cert.pem #      /etc/ipsec.d/certs/ leftsendcert=always #    leftsubnet=0.0.0.0/0 # right - remote (client) side eap_identity=%identity #   IP-  VPN- rightsourceip=10.0.1.0/24 rightdns=8.8.8.8,1.1.1.1 # Windows and BlackBerry clients usually goes here conn ikev2-mschapv2 rightauth=eap-mschapv2 # Apple clients usually goes here conn ikev2-mschapv2-apple rightauth=eap-mschapv2 leftid=good.citizen.vpn</span></span></code> </pre><br>  Los inicios de sesi√≥n y las contrase√±as de los clientes VPN se configuran en el archivo <b>/etc/ipsec.secrets</b> <br><br>  En este archivo, tambi√©n debe especificar el nombre de la clave privada que copiamos previamente de la carpeta letsencrypt: <br><br><pre> <code class="plaintext hljs">#       /etc/ipsec.d/private/ : RSA privkey.pem #  VPN #  : EAP "" IrinaYarovaya : EAP "PleaseLoveMe123" Mizooleena : EAP "IwannaLoveToo3332"</code> </pre><br>  En esta etapa, puede reiniciar el servidor strongswan y verificar si la nueva configuraci√≥n se ha activado: <br><br><pre> <code class="plaintext hljs">$ systemctl restart strongswan $ ipsec statusall Virtual IP pools (size/online/offline): 10.0.1.0/24: 254/0/0 Listening IP addresses: xxx.xxx.38.220 Connections: ikev2-mschapv2: %any...%any IKEv2, dpddelay=35s ikev2-mschapv2: local: [CN=good.citizen.vpn] uses public key authentication ikev2-mschapv2: cert: "CN=good.citizen.vpn" ikev2-mschapv2: remote: uses EAP_MSCHAPV2 authentication with EAP identity '%any' ikev2-mschapv2: child: 0.0.0.0/0 === dynamic TUNNEL, dpdaction=clear ikev2-mschapv2-apple: %any...%any IKEv2, dpddelay=35s ikev2-mschapv2-apple: local: [good.citizen.vpn] uses public key authentication ikev2-mschapv2-apple: cert: "CN=good.citizen.vpn" ikev2-mschapv2-apple: remote: uses EAP_MSCHAPV2 authentication with EAP identity '%any' ikev2-mschapv2-apple: child: 0.0.0.0/0 === dynamic TUNNEL, dpdaction=clear</code> </pre><br>  Puede ver que la configuraci√≥n se activ√≥ correctamente y que el certificado est√° conectado.  En esta etapa, ya puede conectarse al servidor VPN, pero no tendr√° acceso a Internet.  Para liberar clientes en Internet, debe habilitar el reenv√≠o y configurar NAT. <br><br><h3>  Configuraci√≥n NAT </h3><br>  Activamos paquetes de reenv√≠o: <br><br><pre> <code class="plaintext hljs">echo "net.ipv4.ip_forward=1" &gt;&gt; /etc/sysctl.conf sysctl -p</code> </pre><br>  Activa NAT.  Es importante tener en cuenta que esto es solo un ejemplo de una configuraci√≥n m√≠nima de iptables.  Personalice el resto de las reglas seg√∫n sus necesidades. <br><br>  <b>ethName0</b> : reempl√°celo con el nombre de su interfaz <br>  <b>10.0.1.0/24</b> : el rango de direcciones IP que se emitir√°n a los clientes VPN.  Lo pedimos en <b>/etc/ipsec.conf</b> <br>  <b>111.111.111.111</b> : la direcci√≥n IP del punto de salida, en nuestro ejemplo, es la direcci√≥n super.cool.guy.vpn <br><br><pre> <code class="plaintext hljs">iptables -t nat -A POSTROUTING -s 10.0.1.0/24 -o ethName0 -j SNAT --to-source 111.111.111.111</code> </pre><br><h3>  Depuraci√≥n </h3><br>  En esta etapa de la configuraci√≥n, deber√≠amos obtener un servidor que funcione completamente, al que los clientes ya puedan conectarse.  Antes de continuar, es mejor verificar esto comprobando la conexi√≥n. <br><br>  En caso de problemas de conexi√≥n, puede ver el registro en tiempo real: <br><br><pre> <code class="plaintext hljs">journalctl -f -u strongswan</code> </pre><br><h3>  Inicio al inicio </h3><br>  Si todo tiene √©xito, puede agregar strongswan al inicio en el inicio: <br><br><pre> <code class="plaintext hljs">systemctl enable strongswan</code> </pre><br><h3>  Guardar reglas de iptables </h3><br>  Para guardar las reglas de iptables despu√©s del reinicio, hay un paquete especial <b>persistente en iptables</b> .  Es importante recordar que guardar√° el conjunto actual de reglas y lo agregar√° al inicio. <br><br><pre> <code class="plaintext hljs">apt install iptables-persistent</code> </pre><br><h2>  Configuraci√≥n del cliente </h2><br>  La configuraci√≥n en el lado del cliente es extremadamente simple: solo d√≠gale al cliente la direcci√≥n, el nombre de usuario y la contrase√±a del servidor.  Para macOS e iOS, puede crear perfiles de configuraci√≥n autom√°tica que ser√°n suficientes para activar con dos clics. <br><br><div class="spoiler">  <b class="spoiler_title">Configuraci√≥n de Windows</b> <div class="spoiler_text">  En las nuevas versiones de Windows, IKEv2 se configura en un asistente simple, al que se puede acceder desde el men√∫ de conexi√≥n WiFi. <br><br><img src="https://habrastorage.org/webt/mu/hq/_r/muhq_rn7iubyixxxsislcmmqvzm.png"><br><br>  Windows no establece una ruta predeterminada para dicha conexi√≥n, por lo que la instalaremos manualmente.  En las propiedades de la conexi√≥n VPN, vaya a las propiedades de TCP / IPv4 -&gt; adicionalmente y marque la casilla "Usar una puerta de enlace en una red remota" <br><br> <a href=""><img src="https://habrastorage.org/webt/ra/c5/_x/rac5_xi76rjiuadeswi3e1m8rug.png"></a> <br>  <sup>clicable</sup> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Configuraci√≥n de MacOS</b> <div class="spoiler_text">  MacOS admite IKEv2 a partir de la versi√≥n 10.11 (El Capitan).  La conexi√≥n se crea a trav√©s del men√∫ de configuraci√≥n de red. <br><br><img src="https://habrastorage.org/webt/f4/ad/hk/f4adhkw9swpneyfo0jn9jgro9s4.png" alt="imagen"><br><br>  Agrega una nueva conexi√≥n.  El nombre de la conexi√≥n es cualquier nombre arbitrario. <br><br><img src="https://habrastorage.org/webt/xc/ng/zq/xcngzqon0ilejqrl7hqla-8vbf4.png" alt="imagen"><br><br>  Para autenticar un certificado, debe especificar un nombre de dominio.  Al mismo tiempo, en el campo "Direcci√≥n del servidor", puede especificar la direcci√≥n IP del servidor y el dominio solo en "ID remota", luego la resoluci√≥n DNS no se realizar√° para la conexi√≥n y suceder√° un poco m√°s r√°pido. <br><br><img src="https://habrastorage.org/webt/x4/c2/eq/x4c2eqk2waefy8woi_pnaa8o5uw.png" alt="imagen"><br><br>  El nombre de usuario y la contrase√±a se especifican en el archivo <b>/etc/ipsec.secrets</b> <br><br><img src="https://habrastorage.org/webt/-p/gu/98/-pgu98eevkywzjzqjd7dfvq94zc.png" alt="imagen"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Configuraci√≥n de iOS</b> <div class="spoiler_text">  La configuraci√≥n de IOS se puede hacer manualmente a trav√©s del asistente, pero es mucho m√°s conveniente usar el perfil de configuraci√≥n autom√°tica de mobileconfig. <br><br>  La sintonizaci√≥n manual es similar en significado al macOS de escritorio: <br><br>  <b>Configuraci√≥n -&gt; VPN -&gt; Agregar configuraci√≥n VPN</b> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Perfil de configuraci√≥n autom√°tica para dispositivos Apple</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/sj/r2/up/sjr2up4rsqjjrxzltdldqrepnmk.png"><br>  Perfiles de configuraci√≥n autom√°tica .mobileconfig es un archivo XML con configuraciones que pueden configurar cualquier cosa, desde certificados SSL hasta conexiones VPN. <br><br>  El usuario solo necesita hacer clic en el archivo, y todas las configuraciones necesarias se instalar√°n autom√°ticamente. <br><br>  Ejemplo de configuraci√≥n para conectarse a nuestro servidor IKEv2. <br>  Para configurar un archivo para su configuraci√≥n, solo edite algunos par√°metros en esta plantilla: <br><br>  <b>AuthName</b> : nombre de usuario del archivo <b>/etc/ipsec.secrets</b> <br>  <b>AuthPassword</b> : contrase√±a de usuario <b>/etc/ipsec.secrets</b> <br>  <b>RemoteAddress</b> : dominio o direcci√≥n IP del servidor <br>  <b>RemoteIdentifier</b> : dominio para el que se emite el certificado <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>PayloadContent<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>IKEv2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Username and password from ipsec.secrets --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>AuthName<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>IrinaYarovaya<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>AuthPassword<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>PleaseLoveMe123<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Hostname or IP address of VPN server. Chosing IP address instead of DNS name can avoid issues with client DNS resolvers and speed up connection process. --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>RemoteAddress<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>123.123.123.123<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- leftid in ipsec.conf --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>RemoteIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>good.citizen.vpn<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>AuthenticationMethod<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>Certificate<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>ChildSecurityAssociationParameters<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- in ipsec.conf this proposal is: ike=aes256-sha256-modp2048 --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>DiffieHellmanGroup<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span>14<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>EncryptionAlgorithm<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>AES-256<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>IntegrityAlgorithm<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>SHA2-256<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LifeTimeInMinutes<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span>1440<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>DeadPeerDetectionRate<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- None (Disable) Low (keepalive sent every 30 minutes) Medium (keepalive sent every 10 minutes) High (keepalive sent every 1 minute) --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>High<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>ExtendedAuthEnabled<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">true</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>IKESecurityAssociationParameters<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>DiffieHellmanGroup<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span>14<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>EncryptionAlgorithm<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>AES-256<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>IntegrityAlgorithm<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>SHA2-256<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LifeTimeInMinutes<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span>1440<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Always On OnDemand Rule Cen be disabled in connection preferences by "On Demand" checkbox http://www.v2ex.com/t/137653 https://developer.apple.com/library/mac/featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html https://github.com/iphoting/ovpnmcgen.rb --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>OnDemandEnabled<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>OnDemandRules<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>Action<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>Connect<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>IPv4<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>OverridePrimary<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>PayloadDescription<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>Configures VPN settings<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>PayloadDisplayName<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>VPN<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>PayloadIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>com.apple.vpn.managed.96C1C38F-D4D6-472E-BA90-9117ED8896B5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>PayloadType<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>com.apple.vpn.managed<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>PayloadUUID<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>96C1C38F-D4D6-472E-BA90-9117ED8896B5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>PayloadVersion<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- VPN connection name in Network Preferences --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>UserDefinedName<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>London VPN<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>VPNType<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>IKEv2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Set the name to whatever you like, it is used in the profile list on the device --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>PayloadDisplayName<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>My Super IKEv2 VPN<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- A reverse-DNS style identifier (com.example.myprofile, for example) that identifies the profile. This string is used to determine whether a new profile should replace an existing one or should be added. --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>PayloadIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>vpn.googd.citizen<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- A globally unique identifier, use uuidgen on Linux/Mac OS X to generate it --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>PayloadUUID<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>F3FAD91C-019C-4A79-87A1-CF334C583339<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>PayloadType<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>Configuration<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>PayloadVersion<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Configuraci√≥n de Android</b> <div class="spoiler_text">  Desafortunadamente, Android es el √∫nico de los sistemas operativos populares que a√∫n no tiene soporte incorporado para IKEv2.  Para conectarse, puede usar el cliente oficial de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Strongswan de PlayMarket</a> <br></div></div><br><h2>  Resumen </h2><br>  Mostramos la opci√≥n de configuraci√≥n del servidor m√°s simple con puntos de entrada y salida espaciados.  Esta configuraci√≥n le permite obtener la velocidad m√°xima de VPN, ya que no utiliza t√∫neles adicionales entre los servidores, a pesar de que las direcciones IP de los puntos de entrada y salida est√°n en subredes diferentes.  Este enfoque le permite experimentar m√°s al conectar m√°s de dos direcciones IP al servidor. <br><br>  El protocolo IKEv2 es perfecto para usarlo en el sistema operativo de escritorio para el trabajo diario, ya que est√° integrado de forma nativa en el sistema y, en igualdad de condiciones, le permite obtener m√°s velocidad que a trav√©s de programas VPN de terceros. <br><br><img src="https://habrastorage.org/webt/hi/b3/xj/hib3xjmkyohwf9yqp_irjum5tls.png"><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/ud/xv/wf/udxvwfcz80j3nug11rxaguqelww.png"><br></a> <br><h3>  Suscr√≠base a nuestro desarrollador de Instagram </h3><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/e5/as/-l/e5as-ltfnotkemk2dsqngygimra.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/469879/">https://habr.com/ru/post/469879/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../469867/index.html">C√≥mo se convierte en un ni√±o de escuela (y qu√© tienen que ver los juegos de mesa con √©l)</a></li>
<li><a href="../469869/index.html">Por qu√© deber√≠as overclockear RAM (¬°es f√°cil!)</a></li>
<li><a href="../469871/index.html">Cuando los teclados eran tablas</a></li>
<li><a href="../469875/index.html">C√≥mo proteger tus contrase√±as en 2019</a></li>
<li><a href="../469877/index.html">Oh este m√©todo de Newton</a></li>
<li><a href="../469881/index.html">Los primeros tres d√≠as de la vida de un post en Habr√©</a></li>
<li><a href="../469885/index.html">Deshabilite la consola local cuando use x11vnc</a></li>
<li><a href="../469889/index.html">SamsPcbGuide, parte 12: Tecnolog√≠a - Cajas tipo BGA, pl√°stico y espacio II</a></li>
<li><a href="../469893/index.html">Casa con elementos de alta tecnolog√≠a para un gato sin hogar.</a></li>
<li><a href="../469901/index.html">Una breve historia de la visualizaci√≥n de datos: desde la antig√ºedad hasta el siglo XVII</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>