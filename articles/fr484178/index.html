<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐅 🛎️ 🤘🏿 Commutateur Ethernet intelligent pour la planète Terre 👞 🧡 🎅🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""Il existe plusieurs façons de créer une solution (pour résoudre un problème), mais pas toujours la manière la plus chère et / ou populaire - la plus ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Commutateur Ethernet intelligent pour la planète Terre</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/484178/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c9d/acf/612/c9dacf612a4f50db5ef05aff865d359d.jpg"></div><br>  <i><font color="#999999">"Il existe plusieurs façons de créer une solution (pour résoudre un problème), mais pas toujours la manière la plus chère et / ou populaire - la plus efficace!"</font></i> <br><br><h2>  <font color="#3AC1EF">Préambule</font> </h2><br>  Il y a environ trois ans, dans le processus de développement d'un modèle de reprise après sinistre à distance, je suis tombé sur un obstacle immédiatement non détecté - un manque d'informations sur les nouvelles solutions originales de virtualisation de réseau dans les sources communautaires. <br><br>  -&gt; <a href="https://habr.com/ru/company/ruvds/blog/485914/">Un guide pratique pour la construction de réseaux virtuels.</a>  <a href="https://habr.com/ru/company/ruvds/blog/485914/">Partie 1</a> <br><a name="habracut"></a><br>  L'algorithme du modèle développé était prévu comme suit: <br><br><ol><li>  Un utilisateur distant qui m'a contacté et dont l'ordinateur a refusé de démarrer avec le message «le disque système n'a pas été détecté / non formaté» le charge à l'aide de l'USB de vie. </li><li>  Pendant le processus de démarrage, le système se connecte automatiquement à un réseau local privé sécurisé, en plus duquel se trouve un poste de travail d'administrateur, dans ce cas un ordinateur portable et un nœud NAS. </li><li>  Ensuite, je me connecte - soit pour réanimer les partitions du disque, soit pour en extraire les données. </li></ol><br>  Dans un premier temps, j'ai implémenté ce modèle en utilisant un serveur VPN sur un routeur local de mon réseau, puis sur un VDS loué.  Mais, comme cela arrive souvent, et selon la première loi de Chisholm, alors la pluie passera - le fournisseur d'accès Internet "fera tomber" le réseau, puis les litiges des entités commerciales - le fournisseur d'énergie disparaîtra du fournisseur de services ... <br><br>  Par conséquent, j'ai décidé de formuler d'abord les exigences de base auxquelles l'outil nécessaire devrait répondre.  Le premier est la décentralisation.  Le second - étant donné que j'ai plusieurs USB de ce type, alors pour chacun d'eux il y a un réseau isolé séparé.  Et le troisième est la connexion rapide de divers appareils au réseau et leur gestion simple, y compris au cas où mon ordinateur portable serait également victime de la loi mentionnée ci-dessus. <br><br>  Sur cette base et après avoir passé deux mois et demi à la recherche pratique de plusieurs options peu adaptées, j'ai, à mes risques et périls, décidé d'essayer un autre outil d'une startup que je ne connaissais pas alors appelée - ZeroTier.  Ce que plus tard n'a jamais regretté. <br><br>  En ces vacances du Nouvel An, essayant de comprendre si la situation avec le contenu a changé depuis ce moment mémorable, j'ai effectué un audit sélectif pour la disponibilité d'articles sur ce sujet, en prenant la source - Habr.  À la demande de "ZeroTier" dans les résultats de recherche dont il n'y a que trois articles avec sa mention, et pas un seul, même avec une brève mais description.  Et cela malgré le fait que parmi eux il y a une traduction d'un article écrit par le fondateur de ZeroTier, Inc.  - <a href="http://adamierymenko.com/">Adam Ierymenko</a> . <br><br>  Les résultats ont déçu et m'ont incité à commencer à parler de ZeroTier plus en détail, épargnant aux «chercheurs» modernes de la nécessité de suivre le même chemin que j'ai suivi. <br><br><h2>  <font color="#3AC1EF">Alors tu es quoi?</font> </h2><br>  Le développeur positionne ZeroTier comme un commutateur Ethernet intelligent pour la planète Terre. <br><br>  «Il s'agit d'un hyperviseur de réseau distribué basé sur un réseau peer-to-peer (P2P) mondial cryptographiquement sécurisé.  Un outil de type SDN d'entreprise conçu pour organiser des réseaux virtuels au-dessus des réseaux physiques, à la fois locaux et mondiaux, avec la possibilité de connecter presque n'importe quelle application ou appareil. » <br><br><h2>  <font color="#3AC1EF">Il s'agit plus d'une description marketing, maintenant sur les fonctionnalités technologiques.</font> </h2><br><h3>  <font color="#3AC1EF">▍ Noyau:</font> </h3><br>  L'hyperviseur de réseau ZeroTier est un moteur de virtualisation de réseau autonome qui émule un réseau Ethernet, similaire à VXLAN, sur un réseau peer-to-peer (P2P) crypté global. <br><br>  Les protocoles utilisés dans ZeroTier sont originaux, bien qu'ils soient similaires en apparence à VXLAN et IPSec et se composent de deux niveaux conceptuellement séparés mais étroitement liés: VL1 et VL2. <br><br>  → <a href="https://www.zerotier.com/manual/">Lien vers la documentation</a> <br><br><h3>  <font color="#3AC1EF">▍VL1 est la couche de transport pair à pair (P2P) de base, à sa manière - un «câble virtuel».</font> </h3><br>  <i><font color="#999999">«Un centre de données mondial nécessite une« armoire mondiale »avec des câbles.»</font></i> <br><br>  Dans les réseaux conventionnels, L1 (couche OSI 1) fait référence aux câbles ou canaux radio sans fil réels par lesquels les données sont transmises et aux puces physiques des dispositifs d'émission-réception qui les modulent et les démodulent.  VL1 est un réseau peer-to-peer (P2P) qui fait de même, en utilisant le chiffrement, l'authentification et d'autres astuces réseau pour organiser les câbles virtuels selon les besoins. <br><br>  De plus, il le fait automatiquement, rapidement et sans impliquer un utilisateur qui lance un nouveau nœud ZeroTier. <br><br>  Pour ce faire, VL1 est organisé de manière similaire au système de noms de domaine.  Le réseau est basé sur un groupe de serveurs racine hautement accessibles, dont le rôle est similaire au rôle des serveurs de noms racine DNS.  À l'heure actuelle, les principaux serveurs racine (planétaires) sont gérés par le développeur - ZeroTier, Inc.  et sont fournis en tant que service gratuit. <br><br>  Cependant, il est possible de créer des serveurs racine personnalisés (lunes) qui permettent: <br><br><ul><li>  réduire la dépendance à l'infrastructure ZeroTier, Inc.;  <a href="https://www.zerotier.com/manual/">Lien vers la documentation</a> </li><li>  augmenter la productivité en minimisant les retards; </li><li>  continuer à fonctionner comme d'habitude en cas de perte de connexion Internet. </li></ul><br>  Initialement, les nœuds démarrent sans connexion directe les uns aux autres. <br><br>  Chaque homologue sur VL1 possède une adresse ZeroTier unique de 40 bits (10 chiffres hexadécimaux), qui, contrairement aux adresses IP, est un identificateur chiffré qui ne contient pas de données d'itinéraire.  Cette adresse est calculée à partir de la partie publique de la paire de clés publique / privée.  L'adresse de nœud, la clé publique et la clé privée forment ensemble son identité. <br><br><pre><code class="plaintext hljs">Member ID: df56c5621c       |       ZeroTier address of node</code> </pre> <br>  Quant au cryptage, c'est l'occasion d'un article séparé. <br><br>  → <a href="https://www.zerotier.com/manual/">Lien vers la documentation</a> <br><br>  Pour établir la communication, les pairs envoient d'abord les paquets «vers le haut» via l'arborescence du serveur racine et, au fur et à mesure que ces paquets voyagent à travers le réseau, ils lancent la création aléatoire de canaux directs le long de ce chemin.  L'arbre essaie constamment de «s'effondrer» afin de s'optimiser pour le schéma d'itinéraire qu'il stocke. <br><br>  Le mécanisme d'installation d'égal à égal est le suivant: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ba3/72c/223/ba372c223cef50da77324417f7ac2c72.gif"></div><br><ol><li>  Le nœud A veut envoyer un paquet au nœud B, mais comme il ne connaît pas le chemin direct, il l'envoie en amont vers le nœud R (lune, serveur racine utilisateur). </li><li>  Si le nœud R a une connexion directe avec le nœud B, il y transfère le paquet.  Sinon, il envoie le paquet en amont jusqu'à ce qu'il atteigne les racines planétaires. Les racines planétaires connaissent tous les nœuds, de sorte que finalement le paquet atteindra le nœud B s'il est en ligne. </li><li>  Le nœud R envoie également un message appelé «rendez-vous» au nœud A contenant des indications sur la façon dont il peut atteindre le nœud B. Pendant ce temps, le serveur racine, qui transfère le paquet au nœud B, envoie un «rendez-vous» l'informant de la façon dont il peut atteindre nœud A. </li><li>  Les nœuds A et B reçoivent leurs messages au rendez-vous et essaient de s'envoyer des messages de test, essayant de percer les «lacunes» du NAT ou des pare-feu contrôlés par l'état rencontrés sur le chemin.  Si cela fonctionne, alors une connexion directe est établie, et les packages ne vont plus "jardins". </li></ol><br>  Si une connexion directe ne peut pas être établie, la connexion continuera via le relais et les tentatives de connexion directe continueront jusqu'à ce qu'un résultat positif soit atteint. <br><br>  VL1 a également d'autres fonctionnalités pour établir une connexion directe, y compris la découverte d'égal à égal des LAN, la prédiction de port pour la traversée NAT IPv4 symétrique et le mappage de port explicite en utilisant uPnP et / ou NAT-PMP, si disponible sur le LAN physique local. <br><br>  → <a href="https://www.zerotier.com/manual/">Lien vers la documentation</a> <br><br><h3>  <font color="#3AC1EF">▍VL2 - Protocole de virtualisation Ethernet de type VXLAN avec fonctions de gestion SDN.</font>  <font color="#3AC1EF">Un environnement de communication familier pour OS et applications ...</font> </h3><br>  Contrairement à VL1, la création de réseaux VL2 (VLAN) et la connexion de nœuds à ceux-ci, ainsi que leur gestion, nécessitent que l'utilisateur participe directement.  Il peut le faire à l'aide d'un contrôleur réseau.  En fait, il s'agit d'un nœud ZeroTier normal, où les fonctions du contrôleur sont contrôlées de deux manières: soit directement, en modifiant les fichiers, soit, comme le recommande fortement le développeur, en utilisant l'API publiée. <br><br>  Cette méthode de gestion des réseaux virtuels ZeroTier n'est pas très pratique pour un simple profane, il existe donc plusieurs interfaces graphiques: <br><br><ul><li>  Un du développeur ZeroTier, disponible en tant que solution de cloud public fournie par le modèle SaaS, avec quatre plans d'abonnement, y compris gratuits, mais limités dans le nombre d'appareils gérés et le niveau de support </li><li>  Le second provient d'un développeur indépendant, quelque peu simplifié dans ses fonctionnalités, mais disponible en tant que solution open source privée, pour une utilisation sur site ou sur des ressources cloud. </li></ul><br>  La couche VL2 est implémentée au-dessus de VL1 et transportée par elle.  En même temps, il hérite du chiffrement et de l'authentification du point de terminaison du niveau VL1, et utilise également ses clés asymétriques pour signer et vérifier les informations d'identification.  La couche VL1 vous permet d'implémenter VL2 sans vous soucier de la topologie existante du réseau physique.  Autrement dit, les problèmes de connectivité et l'efficacité du routage sont des tâches de niveau VL1.  Il est important de comprendre qu'il n'y a pas de connexion entre les réseaux virtuels VL2 et les chemins VL1.  Comme le multiplexage VLAN dans un LAN câblé, deux nœuds qui partagent plusieurs appartenances réseau communes n'auront toujours qu'un seul chemin VL1 (câble virtuel) entre eux. <br><br>  Chaque réseau VL2 (VLAN) est identifié par l'adresse 64 bits (16 chiffres hexadécimaux) du réseau ZeroTier, qui contient l'adresse 40 bits du contrôleur ZeroTier et un numéro 24 bits qui identifie le réseau créé par ce contrôleur. <br><br><pre> <code class="plaintext hljs">Network ID: 8056c2e21c123456      | |      | Network number on controller      |      ZeroTier address of controller</code> </pre> <br>  Lorsqu'un nœud rejoint un réseau ou demande une mise à jour de la configuration réseau, il envoie un message de demande de configuration réseau au contrôleur réseau (via le niveau VL1).  Le contrôleur utilise ensuite l'adresse VL1 du nœud pour la trouver sur le réseau et lui envoyer les certificats, informations d'identification et informations de configuration appropriés.  Du point de vue des réseaux virtuels VL2, les adresses VL1 ZeroTier peuvent être considérées comme des numéros de port sur un énorme commutateur virtuel à l'échelle mondiale. <br><br>  Toutes les informations d'identification délivrées par les contrôleurs de réseau aux nœuds participant à ce réseau sont signées avec la clé secrète du contrôleur afin que tous les participants du réseau puissent les vérifier.  Les informations d'identification ont des horodatages créés par le contrôleur, ce qui permet des comparaisons relatives sans avoir à accéder à l'horloge système locale du nœud. <br><br>  Les informations d'identification sont délivrées uniquement à leurs propriétaires, puis envoyées aux homologues qui souhaitent échanger des données avec d'autres nœuds du réseau.  Cela permet au réseau d'évoluer à une taille énorme sans avoir besoin de mettre en cache une grande quantité d'informations d'identification sur les nœuds ou d'accéder en permanence au contrôleur de réseau. <br><br>  Les réseaux ZeroTier prennent en charge la multidiffusion via un simple système de publication / abonnement. <br><br>  → <a href="https://www.zerotier.com/manual/">Lien vers la documentation</a> <br><br>  Lorsqu'un nœud souhaite recevoir des messages de multidiffusion pour un groupe de distribution spécifique, il annonce l'appartenance à ce groupe aux autres membres du réseau avec lequel il est connecté et au contrôleur de réseau.  Lorsqu'un nœud souhaite envoyer un mailing multicast, il accède simultanément à son cache de publications récentes et demande périodiquement des publications supplémentaires. <br><br>  La diffusion (Ethernet ff: ff: ff: ff: ff: ff) est considérée comme un groupe de multidiffusion auquel tous les membres sont abonnés.  Il peut être désactivé au niveau du réseau pour réduire le trafic s'il n'est pas nécessaire. <br><br>  ZeroTier émule un véritable commutateur Ethernet.  Ce fait permet de <b>combiner les réseaux virtuels créés avec d'autres réseaux Ethernet (LAN câblé, WiFi, fond de panier virtuel, etc.) au niveau de la liaison de données en utilisant un pont Ethernet conventionnel.</b> <br><br>  Pour agir en tant que pont, le contrôleur de réseau doit désigner le nœud de réseau en tant que tel.  Ce schéma est mis en œuvre pour des raisons de sécurité, car les nœuds de réseau ordinaires ne sont pas autorisés à envoyer du trafic à partir d'une source autre que leur adresse MAC.  Les nœuds désignés par des ponts utilisent également un mode spécial de l'algorithme d'adressage multidiffusion, qui interagit avec eux de manière plus agressive et adressée lors des abonnements de groupe et de la réplication de tout le trafic de diffusion et des requêtes ARP. <br><br>  Le commutateur a également la possibilité de créer des réseaux publics et ad-hoc, un mécanisme de QoS et un éditeur de règles de réseau. <br><br><h3>  <font color="#3AC1EF">▍Nœud:</font> </h3><br>  <b>ZeroTier One</b> est un service qui s'exécute sur des ordinateurs portables, des ordinateurs de bureau, des serveurs, des machines virtuelles et des conteneurs, qui fournit des connexions à un réseau virtuel via un port réseau virtuel, comme un client VPN. <br><br>  Après avoir installé et démarré le service, vous pouvez vous connecter à des réseaux virtuels en utilisant leurs adresses à 16 chiffres.  Chaque réseau ressemble à un port réseau virtuel du système, qui se comporte de la même manière qu'un port Ethernet standard. <br><br>  ZeroTier One est actuellement disponible pour les systèmes d'exploitation et systèmes suivants. <br><br>  Systèmes d'exploitation: <br><br><ul><li>  <b>Microsoft Windows</b> - Programme d'installation MSI x86 / x64 </li><li>  <b>MacOS</b> - programme d'installation PKG </li><li>  <b>Apple iOS</b> - App Store </li><li>  <b>Android</b> - Play Store </li><li>  <b>Linux</b> - DEB / RPM </li><li>  <b>FreeBSD</b> - Paquet FreeBSD </li></ul><br>  NAS: <br><br><ul><li>  Synology NAS </li><li>  NAS QNAP </li><li>  NAS WD MyCloud </li></ul><br>  Autres: <br><br><ul><li>  <b>Docker</b> - fichier docker </li><li>  <b>OpenWRT</b> - port communautaire </li><li>  Intégration d' <b>applications</b> - SDK (libzt) </li></ul><br>  Pour résumer tout ce qui précède, je voudrais noter que ZeroTier est un excellent et rapide outil pour combiner vos ressources physiques, virtuelles ou cloud en un réseau local commun, avec la possibilité de le diviser en VLAN et l'absence d'un seul point de défaillance. <br><br>  À ce sujet avec une partie théorique dans un format du premier article sur ZeroTier pour Habr - probablement tous!  Dans le prochain article, je prévois de démontrer en pratique la création d'une infrastructure de réseau virtuel basée sur ZeroTier, où VDS avec un modèle GUI open source privé sera utilisé comme contrôleur de réseau. <br><br>  <b>Chers lecteurs!</b>  Utilisez-vous la technologie ZeroTier dans vos projets?  Sinon, quels outils utilisez-vous pour combiner vos ressources en un réseau commun? <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr484178/">https://habr.com/ru/post/fr484178/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr484168/index.html">Nous écrivons notre stratégie de défilement virtuel depuis Angular CDK</a></li>
<li><a href="../fr484170/index.html">Mettre à jour Check Point de R77.30 à 80.20</a></li>
<li><a href="../fr484172/index.html">Intégration continue dans Unity: comment réduire le temps d'assemblage et économiser des ressources + ligne de paiement en cadeau</a></li>
<li><a href="../fr484174/index.html">Castle buvant dans des conditions "extrêmes" ou comment nous avons participé au spectacle "DOZOR"</a></li>
<li><a href="../fr484176/index.html">Implémentation du modèle de statut dans Unity</a></li>
<li><a href="../fr484180/index.html">PBX virtuel Rostelecom: quoi et comment faire via l'API</a></li>
<li><a href="../fr484182/index.html">Xenobots: des nanorobots vivants issus de cellules de grenouilles</a></li>
<li><a href="../fr484186/index.html">LDAP - "l'authentification" est un contre-modèle</a></li>
<li><a href="../fr484188/index.html">Normes de conception de base de données</a></li>
<li><a href="../fr484192/index.html">Applications faciles et faciles à déployer sur la cartouche Tarantool (partie 2)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>