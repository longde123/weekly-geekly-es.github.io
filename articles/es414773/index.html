<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïü üå≥ üôáüèº ActionViews o c√≥mo no me gusta el repetitivo desde la infancia üìú ü§¨ ü•ö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! En este art√≠culo quiero compartir la experiencia de crear mi propio mecanismo para automatizar la visualizaci√≥n de varios tipos de Vista: C...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ActionViews o c√≥mo no me gusta el repetitivo desde la infancia</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/e-Legion/blog/414773/"><p>  Hola Habr!  En este art√≠culo quiero compartir la experiencia de crear mi propio mecanismo para automatizar la visualizaci√≥n de varios tipos de Vista: ContentView, LoadingView, NoInternetView, EmptyContentView, ErrorView. </p><br><img src="https://habrastorage.org/webt/ir/qr/we/irqrwe-ha4rx0zfqirxm1vhtlem.jpeg"><a name="habracut"></a><br><hr><br><p>  Ha sido un largo camino.  El camino de la prueba y el error, la enumeraci√≥n de m√©todos y opciones, noches de insomnio y una experiencia invaluable que quiero compartir y escuchar cr√≠ticas, que definitivamente tendr√© en cuenta. </p><br><p>  Dir√© de inmediato que considerar√© trabajar en RxJava, ya que para las corutinas no hice tal mecanismo, mis manos no llegaron.  Y para otras herramientas similares (Loaders, AsyncTask, etc.), no tiene sentido usar mi mecanismo, ya que la mayor√≠a de las veces se usa RxJava o corutinas. </p><br><h3 id="actionviews">  Vistas de acci√≥n </h3><br><p>  Un colega m√≠o dijo que era imposible estandarizar el comportamiento de la Vista, pero a√∫n as√≠ intent√© hacerlo.  Y lo hizo </p><br><p>  La pantalla de aplicaci√≥n est√°ndar, cuyos datos se toman del servidor, debe procesar al menos 5 estados: </p><br><ul><li>  Visualizaci√≥n de datos </li><li>  Cargando </li><li>  Error: cualquier error que no se describe a continuaci√≥n </li><li>  La falta de internet es un error global </li><li>  Pantalla en blanco: solicitud aprobada, pero sin datos </li><li><del>  Otro estado es que los datos se cargaron desde la memoria cach√©, pero la solicitud de actualizaci√≥n regres√≥ con un error, es decir, mostrando datos obsoletos (mejor que nada) </del>  - La biblioteca no es compatible con esto. </li></ul><br><p>  En consecuencia, para cada estado de este tipo debe haber su propia Vista. </p><br><p>  Yo llamo a estos View - <strong>ActionViews</strong> , porque responden a alg√∫n tipo de acci√≥n.  De hecho, si puede determinar exactamente en qu√© punto se debe mostrar su Vista y cu√°ndo ocultarla, entonces tambi√©n puede ser una Vista de Acci√≥n. </p><br><p> Hay una (o quiz√°s no una) forma est√°ndar de trabajar con dicha Vista. </p><br><p>  En los m√©todos que contienen trabajo con RxJava, debe agregar argumentos de entrada para todos los tipos de ActionViews y agregar algo de l√≥gica a estas llamadas para mostrar y ocultar ActionViews, como se hace aqu√≠: </p><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSomeData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(LoadingView loadingView, ErrorView errorView, NoInternetView noInternetView, EmptyContentView emptyContentView)</span></span></span><span class="hljs-function"> </span></span>{ mApi.getProjects() .subscribeOn(Schedulers.io()) .observeOn(AndroidSchedulers.mainThread()) .doOnSubscribe(disposable -&gt; { loadingView.show(); noInternetView.hide(); emptyContentView.hide(); }) .doFinally(loadingView::hide) .flatMap(projectResponse -&gt; { <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> }) .subscribe( response -&gt; {<span class="hljs-comment"><span class="hljs-comment">/*   */</span></span>}, throwable -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ApiUtils.NETWORK_EXCEPTIONS .contains(throwable.getClass())) noInternetView.show(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> errorView.show(throwable.getMessage()); } ); }</code> </pre> <br><p>  Pero este m√©todo contiene una <strong>gran</strong> cantidad de repetitivo, y por defecto no nos gusta.  Y as√≠ comenc√© a trabajar para reducir el c√≥digo de rutina. </p><br><h3 id="level-up">  Subir de nivel </h3><br><p>  El primer paso para actualizar la forma est√°ndar de trabajar con ActionViews fue reducir el est√°ndar poniendo la l√≥gica en las clases de utilidad.  El siguiente c√≥digo no fue inventado por m√≠.  Soy plagio y lo espi√© a un colega sensato.  Gracias, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Arutar</a> </p><br><p>  Ahora nuestro c√≥digo se ve as√≠: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSomeData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(LoadingView loadingView, ErrorView errorView, NoInternetView noInternetView, EmptyContentView emptyContentView)</span></span></span><span class="hljs-function"> </span></span>{ mApi.getProjects() .subscribeOn(Schedulers.io()) .observeOn(AndroidSchedulers.mainThread()) .compose(RxUtil::loading(loadingView)) .compose(RxUtil::emptyContent(emptyContentView)) .compose(RxUtil::noInternet(errorView, noInternetView)) .subscribe(response -&gt; { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> }, RxUtil::error(errorView)); }</code> </pre> <br><p>  El c√≥digo que vemos arriba, aunque carece de un c√≥digo repetitivo, todav√≠a no causa un deleite tan encantador.  Ya ha mejorado mucho, pero sigue existiendo el problema de pasar enlaces a ActionViews en todos los m√©todos en los que hay trabajo con Rx.  Y puede haber un n√∫mero infinito de tales m√©todos en un proyecto.  Tambi√©n escriba estos componen constantemente.  Buueee  ¬øQui√©n necesita esto?  Solo gente trabajadora, terca y no perezosa.  No soy asi  Soy un fan√°tico de la pereza y un fan√°tico de escribir c√≥digo hermoso y conveniente, por lo que se tom√≥ una decisi√≥n importante: simplificar el c√≥digo de cualquier manera. </p><br><h3 id="tochka-proryva">  Punto de ruptura </h3><br><p>  Despu√©s de numerosas reescrituras del mecanismo, llegu√© a esta opci√≥n: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSomeData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ execute(() -&gt; mApi.getProjects(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BaseSubscriber&lt;&gt;(response -&gt; { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> })); }</code> </pre> <br><p>  Reescrib√≠ mi mecanismo entre 10 y 15 veces, y cada vez era muy diferente de la versi√≥n anterior.  No te mostrar√© todas las versiones, centr√©monos en las dos √∫ltimas.  El primero que acabas de ver. </p><br><p>  De acuerdo, se ve bonito?  Incluso dir√≠a que muy bonita.  Me esforc√© por esas decisiones.  Y absolutamente todos nuestros ActionViews funcionar√°n correctamente en el momento que lo necesitemos.  Pude lograr esto escribiendo una gran cantidad de no el c√≥digo m√°s hermoso.  Las clases que permiten tal mecanismo contienen mucha l√≥gica compleja, y no me gust√≥.  En una palabra: cari√±o, que es un monstruo bajo el cap√≥. </p><br><img src="https://habrastorage.org/webt/4z/eu/kd/4zeukd8fsc87mpezaq5buigjvvs.jpeg"><br><hr><br><p>  Tal c√≥digo en el futuro ser√° cada vez m√°s dif√≠cil de mantener, y en s√≠ conten√≠a desventajas y problemas bastante serios que fueron cr√≠ticos: </p><br><ul><li>  ¬øQu√© sucede si necesita mostrar m√∫ltiples LoadingViews en la pantalla?  ¬øC√≥mo separarlos?  ¬øC√≥mo entender qu√© LoadingView se debe mostrar cuando? </li><li>  Violaci√≥n del concepto de Rx: todo debe estar en una secuencia (secuencia).  Este no es el caso aqu√≠. </li><li>  La complejidad de la personalizaci√≥n.  El comportamiento y la l√≥gica que se describen son muy dif√≠ciles de cambiar para el usuario final y, en consecuencia, es dif√≠cil agregar nuevos comportamientos. </li><li>  Debe usar Vista personalizada para que el mecanismo funcione.  Esto es necesario para que el mecanismo entienda qu√© ActionView pertenece a qu√© tipo.  Por ejemplo, si desea utilizar ProgressBar, debe contener implementos LoadingView. </li><li>  El id para nuestro ActionView debe coincidir con los especificados en las clases base para deshacerse de la repetitiva.  Esto no es muy conveniente, aunque puede aceptarlo. </li><li>  Reflexion  S√≠, ella estaba aqu√≠, y gracias a ella, el mecanismo claramente requer√≠a optimizaci√≥n. </li></ul><br><p>  Por supuesto, ten√≠a soluciones a estos problemas, pero todas estas soluciones dieron lugar a otros problemas.  Trat√© de deshacerme de lo m√°s cr√≠tico posible y, como resultado, solo quedaron los requisitos necesarios para usar la biblioteca. </p><br><h3 id="do-svidaniya-java">  ¬°Adi√≥s Java! </h3><br><p>  Despu√©s de un tiempo, estaba sentado en casa <del>  incursionado en </del>  Estaba bromeando y de repente me di cuenta de que ten√≠a que probar Kotlin y maximizar las extensiones, valores predeterminados, lambdas y delegados. </p><br><p>  Al principio no se ve√≠a mucho.  Pero ahora est√° privado de casi todas las deficiencias, que, en principio, pueden ser. </p><br><p>  Aqu√≠ est√° nuestro c√≥digo anterior, pero en la versi√≥n final: </p><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSomeData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { api.getProjects() .withActionViews(view) .execute(onComplete = { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> }) }</code> </pre> <br><p>  Gracias a Extensiones, pude hacer todo el trabajo en un hilo sin violar el concepto b√°sico de programaci√≥n reactiva.  Tambi√©n dej√© la oportunidad de personalizar el comportamiento.  Si desea cambiar la acci√≥n al principio o al final del programa, simplemente puede pasar la funci√≥n al m√©todo, y todo funcionar√°: </p><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSomeData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { api.getProjects() .withActionViews( view, doOnLoadStart = { <span class="hljs-comment"><span class="hljs-comment">/* */</span></span> }, doOnLoadEnd = { <span class="hljs-comment"><span class="hljs-comment">/* */</span></span> }) .execute(onComplete = { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> }) }</code> </pre> <br><p>  Los cambios de comportamiento tambi√©n est√°n disponibles para otras ActionViews.  Si desea utilizar un comportamiento est√°ndar, pero no tiene ActionViews predeterminadas, simplemente puede especificar qu√© Vista debe reemplazar nuestra ActionView: </p><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSomeData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(projectLoadingView: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">LoadingView</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { mApi.getPosts(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) .withActionViews( view, loadingView = projectLoadingView ) .execute(onComplete = { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> }) }</code> </pre> <br><p>  Te mostr√© la crema de este mecanismo, pero tambi√©n tiene su propio precio. <br>  Primero, necesitar√° crear CustomViews para que esto funcione: </p><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SwipeRefreshLayout</span></span></span><span class="hljs-class"> : android.support.v4.widget.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SwipeRefreshLayout</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LoadingView</span></span></span><span class="hljs-class"> { constructor(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Context</span></span></span><span class="hljs-class">) : super(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">) constructor(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Context</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attrs</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AttributeSet</span></span></span><span class="hljs-class">) : super(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attrs</span></span></span><span class="hljs-class">) }</span></span></code> </pre> <br><p>  Puede que ni siquiera sea necesario hacerlo.  En este momento, estoy recopilando comentarios y aceptando sugerencias para mejorar este mecanismo.  La raz√≥n principal por la que necesitamos usar CustomViews es heredar de una interfaz que indica a qu√© tipo de ActionView pertenece.  Esto es por seguridad, ya que puede cometer un error accidentalmente al especificar el tipo de Vista en el m√©todo withActionsViews. </p><br><p>  As√≠ es como se ve el m√©todo withActionsViews: </p><br><pre> <code class="hljs kotlin"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">&lt;T&gt;</span></span></span><span class="hljs-function"> Observable</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">&lt;T&gt;</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withActionViews</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( view: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionsView</span></span></span></span><span class="hljs-function"><span class="hljs-params">, contentView: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">View</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = view.contentActionView, loadingView: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">LoadingView</span></span></span></span><span class="hljs-function"><span class="hljs-params">? = view.loadingActionView, noInternetView: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">NoInternetView</span></span></span></span><span class="hljs-function"><span class="hljs-params">? = view.noInternetActionView, emptyContentView: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">EmptyContentView</span></span></span></span><span class="hljs-function"><span class="hljs-params">? = view.emptyContentActionView, errorView: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ErrorView</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = view.errorActionView, doOnLoadStart: ()</span></span></span></span> -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = { doOnLoadSubscribe(contentView, loadingView) }, doOnLoadEnd: () -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = { doOnLoadComplete(contentView, loadingView) }, doOnStartNoInternet: () -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = { doOnNoInternetSubscribe(contentView, noInternetView) }, doOnNoInternet: (Throwable) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = { doOnNoInternet(contentView, errorView, noInternetView) }, doOnStartEmptyContent: () -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = { doOnEmptyContentSubscribe(contentView, emptyContentView) }, doOnEmptyContent: () -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = { doOnEmptyContent(contentView, errorView, emptyContentView) }, doOnError: (Throwable) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = { doOnError(errorView, it) } ) { <span class="hljs-comment"><span class="hljs-comment">/**/</span></span> }</code> </pre> <br><p>  ¬°Parece aterrador, pero conveniente y r√°pido!  Como puede ver, en los par√°metros de entrada acepta loadingView: LoadingView? .. Esto nos asegura contra errores con el tipo ActionView. </p><br><p>  En consecuencia, para que el mecanismo funcione, debe seguir algunos pasos simples: </p><br><ul><li>  Agregue a nuestro dise√±o nuestras ActionViews, que son personalizadas.  Ya hice algunos de ellos, y puedes usarlos. </li><li>  Implemente la interfaz HasActionsView y anule las variables predeterminadas responsables de ActionViews en el c√≥digo: <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contentActionView: View <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { recyclerView } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> loadingActionView: LoadingView? <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { swipeRefreshLayout } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> noInternetActionView: NoInternetView? <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { noInternetView } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> emptyContentActionView: EmptyContentView? <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { emptyContentView } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> errorActionView: ErrorView <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { ToastView(baseActivity) }</code> </pre> </li><li><p>  O herede de una clase en la que nuestras ActionViews ya est√°n anuladas.  En este caso, tendr√° que usar la identificaci√≥n estrictamente especificada en su dise√±o: </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActionsFragment</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Fragment</span></span></span></span>(), HasActionsView { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contentActionView: View <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { findViewById&lt;View&gt;(R.id.contentView) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> loadingActionView: LoadingView? <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { findViewByIdNullable&lt;View&gt;(R.id.loadingView) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> LoadingView? } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> noInternetActionView: NoInternetView? <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { findViewByIdNullable&lt;View&gt;(R.id.noInternetView) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> NoInternetView? } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> emptyContentActionView: EmptyContentView? <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { findViewByIdNullable&lt;View&gt;(R.id.emptyContentView) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> EmptyContentView? } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> errorActionView: ErrorView <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> mutableLazy { ToastView(baseActivity) } }</code> </pre> <br></li><li>  ¬°Disfruta del trabajo sin repeticiones! </li></ul><br><p>  Si va a utilizar las extensiones de Kotlin, no olvide que puede cambiar el nombre de la importaci√≥n a un nombre conveniente para usted: </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">import</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">kotlinx</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.android</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.synthetic</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.main</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.fr_gifts</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.contentView</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">as</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">recyclerView</span></span></code> </pre> <br><h3 id="chto-dalshe">  Que sigue </h3><br><p>  Cuando comenc√© a trabajar en este mecanismo, no pens√© de qu√© vendr√≠a una biblioteca.  Pero sucedi√≥ que quer√≠a compartir mi creaci√≥n, y ahora lo m√°s dulce me est√° esperando: publicar la biblioteca, recopilar problemas, recibir comentarios, agregar / mejorar la funcionalidad y corregir errores. </p><br><h3 id="poka-ya-pisal-statyu">  Mientras escrib√≠a un art√≠culo ... </h3><br><p>  Logr√© organizar todo en forma de bibliotecas: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ActionViews-ViewModel</a> - para MVVM </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ActionViews-MVP</a> - para MVP </li></ul><br><p>  La biblioteca y el mecanismo en s√≠ no pretenden ser imprescindibles en su proyecto.  Solo quer√≠a compartir mi idea, escuchar cr√≠ticas, comentarios y mejorar mi mecanismo para que sea m√°s conveniente, usado y pr√°ctico.  Quiz√°s puedas hacer un mecanismo as√≠ mejor que yo.  Solo me alegrar√©.  Espero sinceramente que mi art√≠culo lo haya inspirado a crear algo propio, tal vez incluso similar y m√°s conciso. </p><br><p>  Si tiene alguna sugerencia y recomendaci√≥n para mejorar la funcionalidad y el funcionamiento del mecanismo en s√≠, me complacer√° escucharla.  Bienvenido a los comentarios y, por si acaso, mi Telegram: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">@tanchuev</a> </p><br><p>  <strong>PD:</strong> Me complaci√≥ mucho el hecho de que cre√© algo √∫til con mis propias manos.  Quiz√°s ActionViews no tendr√° demanda, pero la experiencia y el zumbido de esto no ir√°n a ninguna parte. </p><br><p>  <strong>PPS</strong> Para que ActionViews se convierta en una biblioteca usada completa, debe recopilar comentarios y, posiblemente, refinar la funcionalidad o cambiar fundamentalmente el enfoque en s√≠ mismo si todo sale realmente mal. </p><br><p>  <strong>PPPS</strong> Si est√° interesado en mi trabajo, podemos discutirlo personalmente el 28 de septiembre en Mosc√∫ en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Conferencia</a> Internacional de Desarrolladores M√≥viles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MBLT DEV 2018</a> .  Por cierto, ¬°las entradas anticipadas ya se est√°n agotando! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es414773/">https://habr.com/ru/post/es414773/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es414761/index.html">5 sitios de noticias creativas en ingl√©s</a></li>
<li><a href="../es414763/index.html">Cuatro tipos de errores del gerente de producto que pueden (y deben) evitarse</a></li>
<li><a href="../es414767/index.html">Implementar IdM. ¬øA qui√©n debo acudir para resolver problemas?</a></li>
<li><a href="../es414769/index.html">Inicie el redireccionamiento m√≥vil con Appsflyer: configuraciones, informes y enlaces</a></li>
<li><a href="../es414771/index.html">DevOps en HightLoad ++ Siberia: desacreditando mitos y discutiendo herramientas</a></li>
<li><a href="../es414775/index.html">Anatom√≠a de la plataforma de alojamiento Huawei FusionServer RUVDS</a></li>
<li><a href="../es414777/index.html">Entrar en las mejores listas de reproducci√≥n de Spotify trae a los compositores decenas y cientos de miles de d√≥lares estadounidenses</a></li>
<li><a href="../es414779/index.html">Revisi√≥n de Vertex Impress Nero: metal + pantalla 18: 9 + bater√≠a de 3300 mAh por 6,990 rublos</a></li>
<li><a href="../es414785/index.html">Visualizaci√≥n de datos con Angular y D3</a></li>
<li><a href="../es414787/index.html">El nuevo Android RAT usa el protocolo Telegram</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>