<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç∏ üçΩÔ∏è üëáüèª Ce que vous pouvez et ne pouvez pas extraire des composants Web üò¢ üñêÔ∏è üÜò</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ce n'est pas un tutoriel ou un examen complet - plut√¥t des notes de sang chaud apr√®s avoir compil√© une biblioth√®que de composants. Tout a commenc√© ave...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ce que vous pouvez et ne pouvez pas extraire des composants Web</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467403/">  Ce n'est pas un tutoriel ou un examen complet - plut√¥t des notes de sang chaud apr√®s avoir compil√© une biblioth√®que de composants.  Tout a commenc√© avec l'histoire ordinaire de tous les jours: il y a un code h√©rit√©, vous devez attacher pipmochek et petits b√¢tons √† l'h√©ritage, vous ne pouvez rien r√©√©crire, une fois, et ne touchez rien ici avec vos mains;  ne touchez pas les gros paquets effrayants au cas o√π, et en effet, pourquoi ne prenez-vous pas simplement le meilleur framework <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vanilla JS</a> et commencez √† √©crire dessus, comme vos grands-p√®res l'ont l√©gu√©? <br><a name="habracut"></a><br>  Mais comme le volume de travail √©tait pr√©vu pour √™tre tr√®s perceptible, pour une raison quelconque, personne n'a ressenti d'impulsion cr√©ative √† l'id√©e de tout √©crire en JS nu.  Nous sommes all√©s regarder les outils et en choisir ceux qui ne feraient pas peur aux consommateurs de nos composants √† genoux tremblants. <br><br><h2>  Les outils </h2><br>  Bien que j'ai d√©j√† g√¢ch√© toute cette section, quelque chose doit √™tre dit ici.  Premi√®rement, les composants Web sont imm√©diatement devenus absolument incontest√©s: lorsque le r√©sultat de la cr√©ativit√© est une biblioth√®que de composants, et que vous ne pouvez pas faire glisser un gros monstre √† la Angular, qui se modularise compl√®tement, alors ce qui reste, c'est que vous n'avez pas du tout besoin de faire glisser le code de la biblioth√®que, et fonctionne "comme √ßa" dans les navigateurs modernes.  Les composants Web eux-m√™mes sont toujours le m√™me framework Vanilla JS incroyable, avec seulement quelques probl√®mes de modularit√© r√©solus.  Il reste encore trop √† √©crire de vos propres mains - vous avez besoin d'un wrapper avec standardisation, et il est √©galement souhaitable qu'il y ait un minimum de passe-partout pour chaque composant. <br><br>  Il n'y a pas beaucoup de tels emballages, et m√™me assez m√ªrs pour √™tre utilis√©s dans une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">production</a> s√©rieuse: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">hybrides,</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LitElement,</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Stencil.</a>  Et ils font tous la m√™me chose √† peu pr√®s de la m√™me mani√®re, la diff√©rence r√©side dans les petites choses.  Les hybrides essaient d'√™tre √† la mode et sans classe, Stencil est √† la mode et r√©agit, LitElement ne semble m√™me pas essayer.  Et selon les r√©sultats du choix parmi des bagatelles insignifiantes, la sortie est rest√©e LitElement - OOPshniki a tourn√© le nez aux hybrides et aux non-amateurs de la r√©action - √† Stencil, dans lequel JSX a g√©n√©ralement ressenti une r√©p√©tition des id√©es les plus incontestables de la r√©action. <br><br><h2>  Pour combattre? </h2><br>  Ce n'est pas si int√©ressant de parler de ce que vous pouvez, tout est dans la documentation, donc je vais continuer √† parler principalement de ce que vous ne pouvez pas: ils n'√©crivent g√©n√©ralement pas √† ce sujet dans la documentation. <br><br><h3>  Patterns </h3><br>  En termes de mod√®les, LitElement utilise lit-html, ce qui est parfaitement minimaliste: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> template = html<span class="hljs-string"><span class="hljs-string">` &lt;div attr=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${a}</span></span></span><span class="hljs-string"> .property=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${b}</span></span></span><span class="hljs-string"> ?booleanAttr=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${c}</span></span></span><span class="hljs-string"> @click=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${handleClick}</span></span></span><span class="hljs-string"> &gt;&lt;/div&gt; `</span></span>;</code> </pre> <br>  Ce n'est pas du HTML, mais vous devez vous rappeler exactement trois constructions dans un seul symbole ici - ".", "?", Et "@".  Tout le reste est en html.  En ce qui concerne JSX, avec son className et le reste, il est un peu plus agr√©able et juridiquement distinct du code JS / TS.  Mais, en passant, le premier ¬´impossible¬ª suit d'ici - pour lier quelque chose d'horrible ne fonctionne pas, vous ne pouvez lier que dans les valeurs des attributs et des propri√©t√©s, et dans le contenu du texte.  Bien s√ªr, dans les litt√©raux de mod√®les √©tiquet√©s, il n'y a pas de magie, et au prix d'une certaine quantit√© de perversions, vous pouvez assembler une cha√Æne en cours d'ex√©cution et y attacher des liants lit-html, mais cela p√©n√®tre r√©ellement dans le rendu avec vos mains, et avec le m√™me succ√®s, vous pouvez collecter des lignes et les envoyer dans innerHTML.  Normalement, tout cela se fait par la composition des mod√®les et la d√©composition des composants complexes en composants plus simples.  Le passe-partout est assez petit - la liaison du mod√®le est pratiquement absente, car il ne s'agit que d'une variable, et pour cr√©er un composant, vous avez besoin de cinq lignes "suppl√©mentaires". <br><br><h3>  Composants </h3><br>  Le seul probl√®me (mais significatif) des composants est que, pour ¬´m√©langer¬ª compl√®tement les composants avec le rendu des enfants, quelque part dans le mod√®le du parent, vous avez besoin du Shadow DOM.  Qui, bien s√ªr, est inclus dans LitElement par d√©faut, et en g√©n√©ral, il ne semble pas √™tre mauvais.  Mais le DOM fant√¥me a actuellement un gros probl√®me avec les styles, similaire aux modules CSS: pour isoler les styles, il isole parfaitement, mais en cours de route, cela r√©duit toute la cascade.  Il est tout simplement impossible d'entrer dans des styles isol√©s de l'ext√©rieur.  G√©n√©ralement (presque) rien. <br><br>  Cela interf√®re consid√©rablement, par exemple, avec la possibilit√© de faire d√©filer les composants de diff√©rents sujets.  Tout ce qui peut √™tre fait avec le DOM fant√¥me est soit de regrouper toutes les options de style √† l'int√©rieur du composant, soit d'essayer de rendre le th√®me compl√®tement d√©pendant des variables CSS - c'est le "presque" avec lequel vous pouvez contracter des styles isol√©s.  Mais avec lequel il est n√©cessaire de fournir des variables litt√©ralement pour toute stylisation raisonnable, et, avec une forte probabilit√©, il en ajoute encore plus. <br><br>  Heureusement, le DOM fant√¥me dans LitElement peut simplement √™tre d√©sactiv√© dans le composant.  Malheureusement, cela d√©sactivera √©galement la possibilit√© de cibler les enfants de l'√©l√©ment aux bons endroits du mod√®le via &lt;slot&gt;.  Heureusement, apr√®s avoir un peu perverti, vous pouvez obtenir √† la fois le premier et le second: pour cela, il vous <i>suffit</i> de mettre une racine fant√¥me sur chaque emplacement n√©cessaire, et de ne rien y contenir sauf, en fait, &lt;slot&gt;.  Ainsi, la stylisation du composant sera ouverte et des fentes seront pr√©sentes.  Je voulais donner un bref exemple, mais malheureusement, le code de manipulation des emplacements ne fonctionne pas bri√®vement de toute fa√ßon - les personnes tr√®s int√©ress√©es peuvent lire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce num√©ro ici.</a>  J'ai √©t√© inspir√© par des id√©es de l√†-bas. <br><br>  Eh bien, il convient de mentionner que dans un avenir pr√©visible, le support du navigateur et les polyfills <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">:: part</a> et :: theme vont probablement dispara√Ætre, et avec eux, le DOM fant√¥me deviendra finalement la solution que tout le monde attend depuis de nombreuses ann√©es - de sorte qu'il soit isol√© et extensible / mutable.  Mais jusqu'√† pr√©sent, ce n'est toujours pas l√†. <br><br><h3>  D√©ployer </h3><br>  √Ä ce stade, √©crire sur ¬´ce qui est impossible¬ª ne sort plus, car tout peut aller plus loin - les biblioth√®ques √©clair√©es existent sous la forme de modules ES, et donc sans aucun probl√®me sont r√©cup√©r√©es par n'importe quoi et de n'importe quelle mani√®re (m√™me avec un navigateur nu qui peut g√©rer les modules )  Pour IE et Edge actuel, vous devez connecter un polyfill de composants Web, pour les modules, si vous souhaitez les retirer directement du navigateur, vous avez besoin de quelque chose qui soulage la douleur des importations de navigateur, par exemple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">es-module-shims.</a>  Eh bien, ou un bundler. <br><br>  Les composants Web connect√©s √† l'application sont simples et ringards √† utiliser, vous pouvez commencer √† les utiliser en html et √† extraire leurs m√©thodes et propri√©t√©s dans le code.  Vous pouvez voir √† quel point tout cela peut √™tre attach√© √† une autre biblioth√®que ou un autre cadre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> (la r√©action a excell√©, mais en moyenne tout est tr√®s bon).  Nous nous sommes accroch√©s √† AngularJS, et tout √©tait banal: ng-prop vous permet de transf√©rer quelque chose vers le composant, et ng-on vous permet d'√©couter les √©v√©nements. <br><br><h2>  R√©sum√© </h2><br>  Si vous devez cr√©er une interface utilisateur de composant et l'attacher √† quelque chose que vous ne voulez absolument pas entrer (code h√©rit√©, cadre effrayant d√©mod√© et autres mauvais endroits) - les composants Web aident tr√®s bien.  Les principales biblioth√®ques "matures" qui sont g√©r√©es avec elles sont de petite taille, il n'y a pas de probl√®mes techniques s√©rieux de modularit√© et de mise en page, et vous pouvez simplement les prendre et les faire.  Quel type de biblioth√®que que vous prenez - m√™me pas si important, il y a tr√®s peu de diff√©rences entre eux pour le moment;  Plus pr√©cis√©ment, le LitElement que nous avons pris n'a pas cr√©√© de probl√®me suppl√©mentaire pour nous et a fonctionn√© de la mani√®re attendue dans tous les cas. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr467403/">https://habr.com/ru/post/fr467403/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr467391/index.html">Yandex pr√©sente RPKI</a></li>
<li><a href="../fr467393/index.html">NX Bootcamp d√©marre en octobre</a></li>
<li><a href="../fr467395/index.html">Habr Weekly # 18 / Nouveaux gadgets Apple, un smartphone enti√®rement modulaire, le village des programmeurs en Bi√©lorussie, le ph√©nom√®ne XY</a></li>
<li><a href="../fr467399/index.html">Vous ne pouvez pas interdire d'apporter: comment mettre en ≈ìuvre le concept BYOD et ne pas nuire √† la s√©curit√© des informations</a></li>
<li><a href="../fr467401/index.html">Comparaison de Tesla Model S et Porsche Taycan</a></li>
<li><a href="../fr467405/index.html">Lyft lance un concours de reconnaissance d'objets 3D</a></li>
<li><a href="../fr467407/index.html">Nous travaillons avec le cobot Dobot M1</a></li>
<li><a href="../fr467409/index.html">Pour faire des affaires dans la Silicon Valley, vous devez vous comporter</a></li>
<li><a href="../fr467413/index.html">Framework de microservice PHP - `Hello world` de Swoft</a></li>
<li><a href="../fr467415/index.html">March√© des changes moderne</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>