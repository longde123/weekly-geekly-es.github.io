<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📈 👨🏼‍🎨 💘 Wir ersetzen den Google-Assistenten durch das neuronale Netz Porfirevich und den Troll Alice 👩🏼‍🤝‍👨🏽 👷🏼 💹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hast du schon gesehen, was Porfirievich macht? Sie hängt den Text an eine Ihrer Phrasen an. Und es kommen wirklich lustige Dinge heraus, weil sie in d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir ersetzen den Google-Assistenten durch das neuronale Netz Porfirevich und den Troll Alice</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482416/"><iframe width="560" height="315" src="https://www.youtube.com/embed/4wVgmXiQjZc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Hast du schon gesehen, was <a href="https://habr.com/ru/news/t/482174/">Porfirievich</a> macht?  Sie hängt den Text an eine Ihrer Phrasen an.  Und es kommen wirklich lustige Dinge heraus, weil sie in den Büchern von Dostojewski, Tolstoi, Puschkin, Bulgakow, Gogol und Pelewin geschult wurde. <br><br>  <i>"Das Ganze mit Levitans Stimme auszusprechen, wäre ein hervorragender Ersatz für den Google-Assistenten für das Neujahrsfest ...",</i> dachte ich.  Und ich habe beschlossen, dieses Ereignis nicht auf das <i>neue Jahr zu verschieben</i> (weil Sie es selbst verstehen). <br><br>  Under the cut - der gesamte Prozess der Erstellung eines <a href="https://github.com/morfeusys/porfir">Open-Source-Sprachassistenten Porfirievich</a> auf dem exklusiven <a href="https://github.com/just-ai/aimybox-android-assistant">Open-Source-Framework Aimybox</a> und dessen Start anstelle des regulären Google-Assistenten.  Nun, zur gleichen Zeit <a href="https://youtu.be/4wVgmXiQjZc">kannst du Alice trollen</a> . <br><a name="habracut"></a><br><blockquote>  Wenn Sie dies alles sofort in der Praxis ausprobieren möchten, können Sie die neueste Version <a href="https://github.com/morfeusys/porfir/releases">von hier aus</a> installieren </blockquote><br><h2>  Porfirievich API </h2><br>  Kürzlich wurde im Hub ein <a href="https://habr.com/ru/news/t/482174/">Artikel veröffentlicht,</a> in dem erklärt wird, wie Mikhail Grankin dem <a href="https://habr.com/ru/post/440564/">GPT-2-</a> Neuronalen Netzwerk beigebracht hat, „aussagekräftige“ Texte an beliebige Ausdrücke <a href="https://habr.com/ru/post/440564/">anzuhängen</a> .  Es ist lustig geworden.  Darüber hinaus ist der Zugriff auf das neuronale Netzwerk über die reguläre HTTP-API möglich. <br><br>  Wir gehen zu der <a href="https://text.skynet.center/">Site,</a> über die Sie Anfragen an Porfiryevich stellen können, öffnen den Inspektor und sehen, wohin die Anfragen gehen und in welchem ​​Format. <br><br><img src="https://habrastorage.org/webt/hn/lo/il/hnloilgyx9itoumoj-lcuhrxtiq.png"><br><br><blockquote>  Es gibt keine Einschränkungen für diese API, aber der Entwickler <a href="https://github.com/mgrankin/ru_transformers/issues/8">empfiehlt</a> dennoch <a href="https://github.com/mgrankin/ru_transformers/issues/8">,</a> das Porfiryevich-Modell herunterzuladen und auf seinem Server bereitzustellen. </blockquote><br><br><h2>  Aimybox sdk </h2><br>  Wir haben die Porfirievich API!  Jetzt musste die eigentliche Sprachanwendung für Smartphones zerschnitten werden, mit der Sprache erkannt und synthetisiert werden konnte. <br><br>  Eine hervorragende Lösung dafür ist das <a href="https://github.com/just-ai/aimybox-android-assistant">offene Aimbox-Framework</a> , über das sie <a href="https://habr.com/ru/company/just_ai/blog/470259/">hier</a> und <a href="https://habr.com/ru/company/just_ai/blog/479554/">hier</a> bereits auf Habré geschrieben <a href="https://habr.com/ru/company/just_ai/blog/479554/">haben</a> .  Sie können damit schnell eine Sprachanwendung erstellen oder Sprachfunktionen in ein vorhandenes Projekt einbetten.  Gleichzeitig gibt es bereits eine <a href="https://help.aimybox.com/en/article/android-ui-components-hvh9vw/">schöne GUI</a> , die angepasst werden kann. <br><br>  <i>Sie können eine <a href="https://github.com/just-ai/aimybox-android-assistant/tree/master/app">Beispielanwendung</a> für sich selbst klonen und auf deren Basis ein Projekt erstellen.</i> <br><blockquote>  Übrigens, die erste Version des <a href="https://github.com/just-ai/aimybox-ios-sdk">iOS SDK</a> ist kürzlich erschienen, so dass sie für iOS wiederholt werden kann. </blockquote>  Aimybox kann mit jeder Dialog-Engine, zum Beispiel <a href="https://help.aimybox.com/en/article/dialog-api-components-1hm93q3/">Aimylogic, Rasa oder Dialogflow</a> , zusammenarbeiten und Sie können auch eine Verbindung zu jeder anderen implementieren.  In unserem Fall müssen wir Anfragen direkt an die Porfirevich-API senden und die Antworten analysieren.  Dazu ist nichts erforderlich - um die entsprechenden <a href="">Request-</a> , <a href="">Response-</a> Klassen und die <a href="">Implementierung von DialogAPI selbst</a> zu schreiben, die tatsächlich Requests sendet und Antworten analysiert. <br><br><h3>  Erkennung und Synthese </h3><br>  Auf jedem Android-Gerät funktioniert die kostenlose Spracherkennung und Sprachsynthese von Google, sodass Sie sich darüber keine Gedanken machen müssen.  Das ist natürlich nur die Stimme, die ich gegen etwas eintauschen wollte, das besser zu der literarischen Silbe von Porfirevich passt ... <br><br><h2>  Stimme von Levitan </h2><br>  Zuvor hatte <i>Yandex Speechkit-a</i> (Cloud-basierte Lösung zum Erkennen und Synthetisieren von Sprache) eine wunderbare levitanische Stimme, die perfekt zu unserem Projekt passte.  Jetzt ist alles auf <i>Yandex Cloud</i> umgezogen, alles ist bezahlt (ohne 10.000 Testanforderungen), also musste ich nach Alternativen suchen. <br><br>  Für Alice - <a href="http://station.aimylogic.com/">station.aimylogic.com</a> gibt es so einen tollen Skilltest - Service.  Darauf können Sie die Stimme auswählen, die die Antworten synthetisiert, und Ihre Fähigkeiten direkt im Browser testen.  Wir schauen in seiner API nach und finden den Endpunkt, an den Anforderungen für die Sprachsynthese gehen <br><br><img src="https://habrastorage.org/webt/lw/sa/6j/lwsa6jd0pz69sprpow-zxml8aoo.png"><br><br>  Hier können Sie sehen, dass Sie das gewünschte Ergebnis <i>erzielen</i> , wenn Sie <i>Levitan</i> im <i>Lautsprecherparameter</i> in dieser URL einsetzen.  Das brauchen wir! <br><br>  <i>Tatsächlich ersetzt die <a href="">PorfirResponse-</a> Klasse diese URL nur durch die erforderlichen Parameter, damit der Sprachsynthesizer die generierte MP3-Datei einfach wiedergibt, anstatt den Antworttext von Porfiryevich auszusprechen.</i> <br><br><h2>  Ersetzen Sie Google Assistant durch Porfiryevich </h2><br>  Sie können unsere Stimme Porfiryevich starten, indem Sie einfach die Anwendung öffnen und auf die Mikrofontaste tippen.  Es ist jedoch viel angenehmer, es anstelle des normalen Google-Assistenten auszuführen, da viele Smartphones über eine integrierte Assistentenunterstützung verfügen (auf meinem Oneplus 7 können Sie beispielsweise den Ein- / Ausschalter gedrückt halten, um den Assistenten von einem beliebigen Bildschirm aus zu aktivieren). <br><br>  Dazu müssen Sie nur noch einen Absichtsfilter <i>android.intent.action.ASSIST</i> in <a href="">AndroidManifest registrieren</a> , das <i>Flag android: launchMode = "singleTop" setzen</i> und die Methode <i>onNewIntent</i> in <i>MainActivity</i> implementieren, um die <i>Spracherkennung</i> zu starten, wenn die Anwendung im Assistentenmodus aufgerufen wird. <br><br><pre><code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNewIntent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(intent: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Intent</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onNewIntent(intent) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (intent?.action == Intent.ACTION_ASSIST) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> aimybox = (application <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> PorfirApplication).aimybox <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> channel = aimybox.stateChannel.openSubscription() launch { channel.consume { aimybox.startRecognition() } }.invokeOnCompletion { channel.cancel() } } }</code> </pre> <br><blockquote>  In den Smartphone-Einstellungen müssen Sie Porfirevich als Standardassistenten auswählen.  <b>Einstellungen -&gt; Anwendungen -&gt; Standardanwendungen</b> </blockquote><br><h3>  Färbung </h3><br>  In den <a href="">Dateien</a> <a href="">styles.xml</a> und <a href="">strings.xml</a> <a href="">können</a> Sie die Farben der Standard-Aimybox-Benutzeroberfläche ändern und gleichzeitig die Startphrase angeben, die beim Start unseres Assistenten auf dem Bildschirm angezeigt wird. <br><br><h2>  Wir starten </h2><br>  Eigentlich alles!  Nach dem Start können Sie diese Perlen beobachten <br><br><img src="https://habrastorage.org/webt/js/wj/v9/jswjv91bk7b5kjqdibjg2pkowi0.jpeg" width="152" height="330" align="left"><img src="https://habrastorage.org/webt/bc/w4/2y/bcw42yavbtmdjs095eckhpnvfy0.jpeg" width="152" height="330" align="left"><img src="https://habrastorage.org/webt/oy/t1/g2/oyt1g2jhcwti3yapqlipdu1dc34.jpeg" width="152" height="330" align="left"><img src="https://habrastorage.org/webt/h7/35/jr/h735jrra0rpuep24na8mfi5vjfc.jpeg" width="152" height="330"><br><br>  Wenn Sie mit Yandex Alice neben ein anderes Smartphone stellen und einen Chat darauf führen, können Sie einen "gesunden" Dialog zwischen zwei nicht ganz gesunden Menschen führen <br><br><img src="https://habrastorage.org/webt/fo/gl/7r/fogl7rdx2bsswpratxjaflgyoxa.png"><br><br><h2>  Was weiter? </h2><br>  Dies sind die Ideen, die bisher in den Sinn kommen <br><br><ul><li>  Zeigen Sie auf dem Hauptbildschirm der Anwendung den Verlauf der Antworten von Porfirevich mit der Möglichkeit des Teilens an. </li><li>  Erstellen Sie einen Bildschirm mit Einstellungen - Dialogmodus, Reaktionsdauer, Sprachauswahl usw. </li></ul><br>  Wenn Sie bessere Ideen haben oder einen Fehler gefunden haben, können Sie <a href="https://github.com/morfeusys/porfir/issues">Github verwenden</a> , in dem jetzt der gesamte Projektcode enthalten ist.  Sie können auch spenden (Code schreiben). <br><br><h2>  Nützliche Links </h2><br><ul><li>  <a href="https://github.com/morfeusys/porfir">Repository-Assistent Porfirevich</a> </li><li>  <a href="https://github.com/morfeusys/porfir/releases">Fertige Baugruppen</a> </li><li>  <a href="https://github.com/mgrankin/ru_transformers">Porfirevich Model Repository</a> </li><li>  <a href="https://github.com/just-ai/aimybox-android-assistant">Aimybox Voice Assistant Framework-Repository</a> </li><li>  <a href="https://habr.com/ru/company/just_ai/blog/479554/">Der Artikel über Aimybox auf Habré</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de482416/">https://habr.com/ru/post/de482416/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de482400/index.html">Eine Auswahl unterhaltsamer statistischer Fakten # 2</a></li>
<li><a href="../de482402/index.html">Fabrik muster. Anwendungsbeispiel in Unity</a></li>
<li><a href="../de482404/index.html">Mnemonik: Erforschung von Methoden zur Steigerung des Gehirns</a></li>
<li><a href="../de482406/index.html">Top-DLC-Bücher für moderne Science-Fiction-Serien</a></li>
<li><a href="../de482410/index.html">Betrachtung der großen fraktalen Ähnlichkeit</a></li>
<li><a href="../de482418/index.html">Einführung in die Cypher-Abfragesprache</a></li>
<li><a href="../de482420/index.html">JavaFX - noch nicht tot</a></li>
<li><a href="../de482426/index.html">Väterchen Frost oder sechsstellig für Habr</a></li>
<li><a href="../de482430/index.html">Lernen ist keine Lotterie, Metriken lügen</a></li>
<li><a href="../de482432/index.html">IT im Schulsystem</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>