<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍🚀 👎🏿 🎐 Aprenda o OpenGL. Lição 5.5 - Mapeamento Normal 🤚🏼 👩🏿‍🎤 ☝🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mapeamento normal 
 Todas as cenas que usamos são compostas por polígonos, que por sua vez são constituídos por centenas, milhares de triângulos absol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aprenda o OpenGL. Lição 5.5 - Mapeamento Normal</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415579/"><img align="left" src="https://habrastorage.org/web/c9e/9b2/a3b/c9e9b2a3baf749ab8e2b385c6d93d966.png" alt="OGL3" width="300"><br><h1>  Mapeamento normal </h1><br>  Todas as cenas que usamos são compostas por polígonos, que por sua vez são constituídos por centenas, milhares de triângulos absolutamente planos.  Já conseguimos aumentar um pouco o realismo das cenas devido a detalhes adicionais que fornecem a aplicação de texturas bidimensionais nesses triângulos planos.  A texturização ajuda a esconder o fato de que todos os objetos na cena são apenas uma coleção de muitos pequenos triângulos.  Uma ótima técnica, mas suas possibilidades não são ilimitadas: ao se aproximar de qualquer superfície, fica claro que se trata de superfícies planas.  A maioria dos objetos reais não é completamente plana e mostra muitos detalhes de relevo. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Conteúdo</b> <div class="spoiler_text">  Parte 1. Introdução <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Opengl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Criação de janela</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Olá janela</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Olá triângulo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Shaders</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Texturas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Transformações</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sistemas de coordenadas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Camera</a> </li></ol><br>  Parte 2. Iluminação básica <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Noções básicas de iluminação</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Materiais</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mapas de textura</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fontes de luz</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Várias fontes de iluminação</a> </li></ol><br>  Parte 3. Baixe modelos 3D <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Biblioteca Assimp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Classe de polígono de malha</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Classe do modelo 3D</a> </li></ol><br>  Parte 4. Recursos avançados do OpenGL <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teste de profundidade</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teste de estêncil</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mistura de cores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Faces de recorte</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Buffer de quadros</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cartões cúbicos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Manipulação avançada de dados</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GLSL avançado</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Shader geométrico</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Instanciamento</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Suavização</a> </li></ol><br>  Parte 5. Iluminação Avançada <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Iluminação avançada.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Modelo Blinn-Fong.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Correção gama</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cartões de sombra</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mapas de sombra omnidirecionais</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mapeamento normal</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mapeamento de paralaxe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">HDR</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Bloom</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Renderização adiada</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SSAO</a> </li></ol><br>  Parte 6. PBR <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teoria</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fontes de luz analítica</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Irradiação difusa.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Exposição no espelho.</a> </li></ol><br></div></div><br>  Por exemplo, pegue alvenaria.  Sua superfície é muito rugosa e, obviamente, não é representada por um plano: nela existem recessos com cimento e muitos pequenos detalhes, como buracos e rachaduras.  Se analisarmos uma cena com imitação de alvenaria na presença de iluminação, a ilusão de relevo da superfície é facilmente destruída.  A seguir, é apresentado um exemplo de uma cena contendo um plano com textura de alvenaria e fonte de luz de um ponto: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lo/-g/gf/lo-ggfg3yplmjm4cx-6bq74m_6g.png"></div><br>  Como você pode ver, a iluminação não leva em conta os detalhes de relevo assumidos para essa superfície: todas as pequenas rachaduras e cavidades com cimento também são indistinguíveis do restante da superfície.  Pode-se usar um mapa de brilho especular para limitar a iluminação de certos detalhes que estão nos recessos da superfície.  Mas isso parece mais um hack sujo do que uma solução funcional.  O que precisamos é de uma maneira de fornecer às equações de iluminação dados sobre o microrrelevo da superfície. <br>  No contexto das equações de iluminação conhecidas por nós, considere esta questão: sob quais condições a superfície será iluminada como perfeitamente plana?  A resposta está relacionada ao normal à superfície.  Do ponto de vista do algoritmo de iluminação, as informações sobre a forma da superfície são transmitidas apenas através do vetor normal.  Como o vetor normal é constante em toda parte da superfície apresentada acima, a iluminação também sai uniforme, correspondendo ao plano.  Mas e se passarmos para o algoritmo de iluminação não a única constante normal de todos os fragmentos pertencentes ao objeto, mas a única normal de cada fragmento?  Assim, o vetor normal mudará levemente com base na topografia da superfície, o que criará uma ilusão mais convincente da complexidade da superfície: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ka/y_/68/kay_684wpm4mpkko92gl1nemjh4.png"></div><br>  Através do uso de normais fragmentariamente diferentes, o algoritmo de iluminação considerará a superfície composta por muitos planos microscópicos perpendiculares ao seu vetor normal.  Como resultado, isso adicionará significativamente textura ao objeto.  A técnica de aplicar normais únicas a um fragmento, e não a toda a superfície - esse é o <b>mapeamento normal</b> ou o <b>mapeamento de relevo</b> .  Como aplicado a uma cena já familiar: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0c/pp/vt/0cppvtgpjw48at0r2crvdy3omfg.png"></div><br>  Você pode ver o aumento impressionante na complexidade visual devido ao custo muito modesto do desempenho.  Como todas as mudanças no modelo de iluminação estão apenas no fornecimento de um normal único em cada fragmento, nenhuma fórmula de cálculo é alterada.  Somente na entrada, em vez do normal interpolado, o normal para o fragmento atual vem à superfície.  Todas as mesmas equações de iluminação fazem o resto do trabalho para criar a ilusão de alívio. <br><br><h2>  Mapeamento normal </h2><br>  Portanto, precisamos fornecer ao algoritmo de iluminação normais normais para cada fragmento.  Usaremos o método já familiar em texturas de reflexão difusa e especular e usaremos a textura 2D usual para armazenar dados normais em cada ponto da superfície.  Não se surpreenda, as texturas também são ótimas para armazenar vetores normais.  Depois, basta selecionar a textura, restaurar o vetor normal e realizar cálculos de iluminação. <br><br>  À primeira vista, pode não estar muito claro como salvar dados vetoriais em uma textura regular, que normalmente é usada para armazenar informações de cores.  Mas pense por um segundo: a tríade de cores RGB é essencialmente um vetor tridimensional.  De maneira semelhante, você pode salvar os componentes do vetor normal XYZ nos componentes de cores correspondentes.  Os valores dos componentes do vetor normal estão no intervalo [-1, 1] e, portanto, requerem conversão adicional no intervalo [0, 1]: <br><br><pre><code class="cpp hljs">vec3 rgb_normal = normal * <span class="hljs-number"><span class="hljs-number">0.5</span></span> + <span class="hljs-number"><span class="hljs-number">0.5</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   [-1,1]  [0,1]</span></span></code> </pre> <br>  Essa redução do vetor normal ao espaço dos componentes de cores RGB nos permitirá salvar o vetor normal na textura, obtido com base no relevo real do objeto modelado e exclusivo para cada fragmento.  Um exemplo dessa textura - mapas normais - para a mesma alvenaria: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/si/jp/nb/sijpnb3we6vaxhlr4eeh9jp3mvq.png"></div><br>  É interessante notar o tom azul deste mapa normal (quase todos os mapas normais têm um tom semelhante).  Isso acontece porque todas as normais são orientadas aproximadamente ao longo do eixo oZ, representado pela tripla coordenada (0, 0, 1), ou seja,  sob a forma de uma tríade de cores - azul puro.  Pequenas mudanças de tonalidade são uma consequência do desvio das normais do semi-eixo positivo oZ em algumas áreas, o que corresponde a terrenos irregulares.  Assim, você pode ver que nas bordas superiores de cada tijolo, a textura assume uma tonalidade verde.  E isso é lógico: nas faces superiores do tijolo, as normais devem ser orientadas mais para o eixo oY (0, 1, 0), que corresponde ao verde. <br><br>  Para a cena de teste, pegue um plano orientado para o semi-eixo positivo oZ e use o seguinte <a href="">mapa difuso</a> e <a href="">o mapa normal</a> para ele. <br><blockquote>  Observe que o mapa normal no link e na imagem acima é diferente.  No artigo, o autor mencionou casualmente as razões das diferenças, limitando-se a conselhos sobre a conversão de mapas normais para que o componente verde indique "inativo" em vez de "up" no sistema local para o plano de textura. <br>  Se você olhar com mais detalhes, dois fatores interagem aqui: <br><ul><li>  A diferença é como os texels são abordados na memória do cliente e na memória de textura OpenGL </li><li>  A presença de duas notações para mapas normais.  Convencionalmente, dois campos: estilo DirectX e estilo OpenGL </li></ul><br>  Em relação às notações normais de mapas, historicamente familiares existem dois campos: DirectX e OpenGL. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vt/f_/bo/vtf_botw_8tazlodtepbgp0zyvk.png"></div><br>  Aparentemente, eles não são compatíveis.  E com um pouco de reflexão, você pode entender que o DirectX considera o espaço tangente a ser canhoto e o OpenGL a destro.  Deslizar o mapa X normal do nosso aplicativo sem nenhuma alteração resultará em iluminação incorreta e nem sempre é claro imediatamente se está incorreto.  Mais notavelmente, as protuberâncias no formato OpenGL se tornam recuos para o DirectX e vice-versa. <br>  Quanto ao endereçamento: carregando dados de um arquivo de textura na memória, assumimos que o primeiro texel é o texel superior esquerdo da imagem.  Para representar dados de textura na memória do aplicativo, isso geralmente é verdade.  Mas o OpenGL usa um sistema de coordenadas de textura diferente: para isso, o primeiro texel é o canto inferior esquerdo.  Para texturizar corretamente, as imagens geralmente são invertidas ao longo do eixo Y no código de um ou outro carregador de arquivos de imagem.  Para Stb_image usado nas lições, você precisa adicionar uma caixa de seleção <br><br><pre> <code class="cpp hljs">stbi_set_flip_vertically_on_load(<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><br>  O engraçado é que duas opções são exibidas corretamente em termos de iluminação: um mapa normal na notação OpenGL com a reflexão Y ativada ou um mapa normal na notação DirectX com a reflexão Y desativada. A iluminação nos dois casos funciona corretamente, a diferença permanecerá apenas no inverso da textura ao longo do eixo Y. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ld/tq/1m/ldtq1mzn-lkbnz3tqeuqvs0n6ke.jpeg"></div><br><br>  <b><i>Nota</i></b>  <b><i>trans.</i></b> <br></blockquote><br>  Portanto, carregue as duas texturas, vincule aos blocos de textura e renderize o plano preparado, levando em consideração as seguintes modificações no código do shader de fragmento: <br><br><pre> <code class="cpp hljs">uniform sampler2D normalMap; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//         [0,1] normal = texture(normalMap, fs_in.TexCoords).rgb; //      [-1,1] normal = normalize(normal * 2.0 - 1.0); [...] //  ... }</span></span></code> </pre> <br>  Aqui aplicamos a transformação inversa do espaço de valor RGB em um vetor normal completo e, em seguida, simplesmente a usamos no conhecido modelo de iluminação Blinn-Fong. <br><br>  Agora, se você mudar lentamente a posição da fonte de luz na cena, poderá sentir a ilusão de alívio da superfície fornecida pelo mapa normal: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ii/3v/fm/ii3vfmiowd37o6nqoyp7e3tlaay.png"></div><br>  Mas ainda existe um problema que reduz drasticamente o alcance possível do uso de mapas normais.  Como já observado, o tom azul do mapa normal indicava que todos os vetores na textura são orientados em média ao longo do eixo positivo oZ.  Em nossa cena, isso não criou problemas, porque o normal para a superfície do avião também estava alinhado com oZ.  No entanto, o que acontece se mudarmos a posição do plano na cena para que o normal seja alinhado com o eixo positivo oY? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ni/2h/md/ni2hmdd81cp3updbfbl7z9iilxw.png"></div><br>  A iluminação acabou completamente errada!  E a razão é simples: amostras de normais do mapa ainda retornam vetores orientados ao longo do meio eixo positivo oZ, embora neste caso devam ser orientados na direção do meio eixo positivo oY da superfície normal.  Ao mesmo tempo, o cálculo da iluminação é como se as normais da superfície estivessem localizadas como se o plano ainda estivesse orientado em direção ao semi-eixo positivo oZ, o que dá um resultado incorreto.  A figura abaixo mostra mais claramente a orientação das normais lidas no mapa em relação à superfície: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wt/dn/wl/wtdnwlrqopjfi5vjpiflloybohm.png"></div><br>  Pode-se observar que as normais estão geralmente alinhadas ao longo do semi-eixo positivo oZ, embora devam ter sido alinhadas ao longo do normal com a superfície que é direcionada ao longo do semi-eixo positivo oY. <br>  Uma solução possível seria configurar um mapa normal separado para cada orientação da superfície em consideração.  Para um cubo, seriam necessários seis mapas normais, mas para modelos mais complexos, o número de orientações possíveis pode ser muito alto e não adequado para implementação. <br><br>  Existe outra abordagem matematicamente mais complicada, que oferece o cálculo da iluminação em um sistema de coordenadas diferente: de modo que os vetores normais nela sempre coincidam sempre aproximadamente com o meio eixo positivo oZ.  Outros vetores necessários para os cálculos de iluminação são convertidos para esse sistema de coordenadas.  Este método possibilita o uso de um mapa normal para qualquer orientação do objeto.  E esse sistema de coordenadas específico é chamado de <b>espaço</b> <b>tangente</b> ou <b>espaço tangente</b> . <br><br><h2>  Espaço tangente </h2><br>  Deve-se notar que o vetor normal no mapa normal é expresso diretamente no espaço tangente, isto é,  em tal sistema de coordenadas que o normal é sempre direcionado aproximadamente na direção do semi-eixo positivo oZ.  O espaço tangente é definido como um sistema de coordenadas local ao plano do triângulo e cada vetor normal é definido dentro desse sistema de coordenadas.  Você pode imaginar esse sistema como um sistema de coordenadas local para um mapa normal: todos os vetores nele são dados direcionados para o semi-eixo positivo oZ, independentemente da orientação final da superfície.  Usando matrizes de transformação especialmente preparadas, é possível transformar vetores normais desse sistema de coordenadas tangentes locais em mundo ou visualizar coordenadas, orientando-os de acordo com a posição final das superfícies texturizadas. <br>  Considere o exemplo anterior com o uso incorreto do mapeamento normal, em que o plano foi orientado ao longo do eixo positivo oY.  Como o mapa de normais é definido no espaço tangente, uma das opções de ajuste é calcular a matriz de transição de normais do espaço tangente para que elas se tornem orientadas normais à superfície.  Isso faria com que os normais ficassem alinhados ao longo do eixo positivo oY.  Uma propriedade notável do espaço tangente é o fato de que, ao calcular essa matriz, podemos reorientar os normais para qualquer superfície e sua orientação. <br><br>  Essa matriz é abreviada como <i>TBN</i> , que é uma abreviação para o nome do triplo de vetores <i>Tangente</i> , <i>Bitangente</i> e <i>Normal</i> .  Precisamos encontrar esses três vetores para formar essa matriz de mudança básica.  Essa matriz faz a transição de um vetor do espaço tangente para outro e para a sua formação são necessários três vetores mutuamente perpendiculares, cuja orientação corresponde à orientação do plano normal do mapa.  Este é um vetor de direção para cima, para a direita e para a frente, um conjunto familiar para nós da lição na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">câmera virtual</a> . <br>  Com o vetor superior, tudo fica claro imediatamente - este é o nosso vetor normal.  Os <i>vetores</i> direito e direto são chamados tangente e <i>bitangente,</i> respectivamente.  A figura a seguir fornece uma idéia de sua posição relativa no plano: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/su/id/oz/suidozydrgjf0miyfpocfndaiu0.png"></div><br>  O cálculo da tangente e da bi-tangente não é tão óbvio quanto o cálculo do vetor normal.  Na figura, você pode ver que as direções da tangente e do mapa da tangente do normal estão alinhadas com os eixos que especificam as coordenadas de textura da superfície.  Esse fato é a base para o cálculo desses dois vetores, o que exigirá alguma habilidade em matemática.  Veja a foto: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4a/nq/k0/4anqk0pjl85p8ei96uporxchq6s.png"></div><br>  Alterações nas coordenadas de textura ao longo da borda de um triângulo <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>E</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.769ex" height="2.298ex" viewBox="0 -780.1 1192.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-32" x="1044" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>E</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-1"> E_2 </script>  designado como <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.993ex" height="2.298ex" viewBox="0 -780.1 3871.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-61" x="2205" y="0"></use><g transform="translate(2734,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-32" x="966" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-2"> \ Delta U_2 </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.761ex" height="2.298ex" viewBox="0 -780.1 3771.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-61" x="2205" y="0"></use><g transform="translate(2734,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-32" x="825" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-3"> \ Delta V_2 </script>  expresso nas mesmas direções que os vetores tangentes <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-54" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-4"> T </script>  e tangente <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>B</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-42" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> B </script>  .  Com base nesse fato, você pode expressar as arestas de um triângulo <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>E</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.769ex" height="2.298ex" viewBox="0 -780.1 1192.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-31" x="1044" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>E</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-6"> E_1 </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>E</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.769ex" height="2.298ex" viewBox="0 -780.1 1192.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-32" x="1044" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>E</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-7"> E_2 </script>  sob a forma de uma combinação linear de vetores tangentes e bi-tangentes: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>E</mi><mn>1</mn></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>1</mn></msub><mi>T</mi><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>1</mn></msub><mi>B</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.862ex" height="2.298ex" viewBox="0 -780.1 12857.2 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-31" x="1044" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-3D" x="1470" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-44" x="2776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-65" x="3604" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-6C" x="4071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-74" x="4369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-61" x="4731" y="0"></use><g transform="translate(5260,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-31" x="966" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-54" x="6398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2B" x="7325" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-44" x="8575" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-65" x="9404" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-6C" x="9870" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-74" x="10169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-61" x="10530" y="0"></use><g transform="translate(11060,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-31" x="825" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-42" x="12097" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>E</mi><mn>1</mn></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>1</mn></msub><mi>T</mi><mo>+</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>1</mn></msub><mi>B</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-8"> E_1 = \ Delta U_1T + \ Delta V_1B </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>E</mi><mn>2</mn></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>2</mn></msub><mi>T</mi><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>2</mn></msub><mi>B</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.862ex" height="2.298ex" viewBox="0 -780.1 12857.2 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-32" x="1044" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-3D" x="1470" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-44" x="2776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-65" x="3604" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-6C" x="4071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-74" x="4369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-61" x="4731" y="0"></use><g transform="translate(5260,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-32" x="966" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-54" x="6398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2B" x="7325" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-44" x="8575" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-65" x="9404" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-6C" x="9870" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-74" x="10169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-61" x="10530" y="0"></use><g transform="translate(11060,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-32" x="825" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-42" x="12097" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>E</mi><mn>2</mn></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>2</mn></msub><mi>T</mi><mo>+</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>2</mn></msub><mi>B</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-9"> E_2 = \ Delta U_2T + \ Delta V_2B </script></p><br>  Transformando em um registro bit a bit, obtemos: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>E</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn><mi>x</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn><mi>y</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn><mi>z</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>1</mn></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>T</mi><mi>x</mi></msub><mo>,</mo><msub><mi>T</mi><mi>y</mi></msub><mo>,</mo><msub><mi>T</mi><mi>z</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>1</mn></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>B</mi><mi>x</mi></msub><mo>,</mo><msub><mi>B</mi><mi>y</mi></msub><mo>,</mo><msub><mi>B</mi><mi>z</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="61.971ex" height="2.78ex" viewBox="0 -832 26681.7 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-78" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2C" x="1986" y="0"></use><g transform="translate(2431,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-79" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2C" x="3976" y="0"></use><g transform="translate(4421,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-7A" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-29" x="5944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-3D" x="6612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-44" x="7918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-65" x="8746" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-6C" x="9213" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-74" x="9511" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-61" x="9873" y="0"></use><g transform="translate(10402,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-31" x="966" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-28" x="11540" y="0"></use><g transform="translate(11929,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-78" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2C" x="13019" y="0"></use><g transform="translate(13464,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-79" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2C" x="14500" y="0"></use><g transform="translate(14945,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-7A" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-29" x="15961" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2B" x="16573" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-44" x="17824" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-65" x="18652" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-6C" x="19119" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-74" x="19417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-61" x="19779" y="0"></use><g transform="translate(20308,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-31" x="825" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-28" x="21345" y="0"></use><g transform="translate(21735,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-78" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2C" x="22999" y="0"></use><g transform="translate(23444,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-79" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2C" x="24656" y="0"></use><g transform="translate(25101,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-7A" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-29" x="26292" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mo stretchy="false">(</mo><msub><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn><mi>x</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn><mi>y</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn><mi>z</mi></mrow></msub><mo stretchy="false">)</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>1</mn></msub><mo stretchy="false">(</mo><msub><mi>T</mi><mi>x</mi></msub><mo>,</mo><msub><mi>T</mi><mi>y</mi></msub><mo>,</mo><msub><mi>T</mi><mi>z</mi></msub><mo stretchy="false">)</mo><mo>+</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>1</mn></msub><mo stretchy="false">(</mo><msub><mi>B</mi><mi>x</mi></msub><mo>,</mo><msub><mi>B</mi><mi>y</mi></msub><mo>,</mo><msub><mi>B</mi><mi>z</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-10"> (E_ {1x}, E_ {1y}, E_ {1z}) = \ Delta U_1 (T_x, T_y, T_z) + \ Delta V_1 (B_x, B_y, B_z) </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>E</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mi>x</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mi>y</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mi>z</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>2</mn></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>T</mi><mi>x</mi></msub><mo>,</mo><msub><mi>T</mi><mi>y</mi></msub><mo>,</mo><msub><mi>T</mi><mi>z</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>2</mn></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>B</mi><mi>x</mi></msub><mo>,</mo><msub><mi>B</mi><mi>y</mi></msub><mo>,</mo><msub><mi>B</mi><mi>z</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="61.971ex" height="2.78ex" viewBox="0 -832 26681.7 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-78" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2C" x="1986" y="0"></use><g transform="translate(2431,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-79" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2C" x="3976" y="0"></use><g transform="translate(4421,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-7A" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-29" x="5944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-3D" x="6612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-44" x="7918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-65" x="8746" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-6C" x="9213" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-74" x="9511" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-61" x="9873" y="0"></use><g transform="translate(10402,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-32" x="966" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-28" x="11540" y="0"></use><g transform="translate(11929,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-78" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2C" x="13019" y="0"></use><g transform="translate(13464,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-79" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2C" x="14500" y="0"></use><g transform="translate(14945,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-7A" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-29" x="15961" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2B" x="16573" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-44" x="17824" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-65" x="18652" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-6C" x="19119" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-74" x="19417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-61" x="19779" y="0"></use><g transform="translate(20308,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-56" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-32" x="825" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-28" x="21345" y="0"></use><g transform="translate(21735,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-78" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2C" x="22999" y="0"></use><g transform="translate(23444,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-79" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-2C" x="24656" y="0"></use><g transform="translate(25101,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-7A" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMAIN-29" x="26292" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mo stretchy="false">(</mo><msub><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mi>x</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mi>y</mi></mrow></msub><mo>,</mo><msub><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mi>z</mi></mrow></msub><mo stretchy="false">)</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>U</mi><mn>2</mn></msub><mo stretchy="false">(</mo><msub><mi>T</mi><mi>x</mi></msub><mo>,</mo><msub><mi>T</mi><mi>y</mi></msub><mo>,</mo><msub><mi>T</mi><mi>z</mi></msub><mo stretchy="false">)</mo><mo>+</mo><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><msub><mi>V</mi><mn>2</mn></msub><mo stretchy="false">(</mo><msub><mi>B</mi><mi>x</mi></msub><mo>,</mo><msub><mi>B</mi><mi>y</mi></msub><mo>,</mo><msub><mi>B</mi><mi>z</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> (E_ {2x}, E_ {2y}, E_ {2z}) = \ Delta U_2 (T_x, T_y, T_z) + \ Delta V_2 (B_x, B_y, B_z) </script></p><br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>E</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.776ex" height="2.057ex" viewBox="0 -780.1 764.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-45" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>E</mi></math></span></span><script type="math/tex" id="MathJax-Element-12"> E </script>  é calculado como o vetor da diferença de dois vetores e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>U</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.134ex" height="2.057ex" viewBox="0 -780.1 3502 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-61" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-55" x="2734" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>U</mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> \ Delta U </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.138ex" height="2.057ex" viewBox="0 -780.1 3504 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-61" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-56" x="2734" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-14"> \ Delta V </script>  como a diferença nas coordenadas de textura.  Resta encontrar duas incógnitas em duas equações: a tangente <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-54" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-15"> T </script>  e preconceito <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>B</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-42" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-16"> B </script>  .  Se você se lembra das lições de álgebra, sabe que essas condições tornam possível resolver o sistema para <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-54" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-17"> T </script>  e para <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>B</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-42" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-18"> B </script>  . <br>  A última forma de equações dada nos permite reescrevê-la na forma de multiplicação de matrizes: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><merror><mtext>\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;E_&amp;#xA0;{1x}&amp;#xA0;e&amp;#xA0;E_&amp;#xA0;{1y}&amp;#xA0;e&amp;#xA0;E_&amp;#xA0;{1z}&amp;#xA0;\\&amp;#xA0;E_&amp;#xA0;{2x}&amp;#xA0;e&amp;#xA0;E_&amp;#xA0;{2y}&amp;#xA0;e&amp;#xA0;E_&amp;#xA0;{2z}&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}&amp;#xA0;=&amp;#xA0;\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;U_1&amp;#xA0;&amp;amp;&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_1&amp;#xA0;\\&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;U_2&amp;#xA0;\&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_2&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}&amp;#xA0;\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;T_x&amp;#xA0;&amp;amp;&amp;#xA0;T_y&amp;#xA0;&amp;amp;&amp;#xA0;T_z&amp;#xA0;\\&amp;#xA0;B_x&amp;#xA0;&amp;amp;&amp;#xA0;B_y&amp;#xA0;&amp;amp;&amp;#xA0;B_z&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}</mtext></merror></math>" role="presentation"><span class="noError" style="display: inline-block;" aria-hidden="true">\&nbsp;begin&nbsp;{bmatrix}&nbsp;E_&nbsp;{1x}&nbsp;e&nbsp;E_&nbsp;{1y}&nbsp;e&nbsp;E_&nbsp;{1z}&nbsp;\\&nbsp;E_&nbsp;{2x}&nbsp;e&nbsp;E_&nbsp;{2y}&nbsp;e&nbsp;E_&nbsp;{2z}&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;=&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;\&nbsp;Delta&nbsp;U_1&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;V_1&nbsp;\\&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;\&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;T_x&nbsp;&amp;&nbsp;T_y&nbsp;&amp;&nbsp;T_z&nbsp;\\&nbsp;B_x&nbsp;&amp;&nbsp;B_y&nbsp;&amp;&nbsp;B_z&nbsp;\&nbsp;end&nbsp;{bmatrix}</span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><merror><mtext>\&nbsp;begin&nbsp;{bmatrix}&nbsp;E_&nbsp;{1x}&nbsp;e&nbsp;E_&nbsp;{1y}&nbsp;e&nbsp;E_&nbsp;{1z}&nbsp;\\&nbsp;E_&nbsp;{2x}&nbsp;e&nbsp;E_&nbsp;{2y}&nbsp;e&nbsp;E_&nbsp;{2z}&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;=&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;\&nbsp;Delta&nbsp;U_1&nbsp;&amp;&nbsp;\&nbsp;Delta&nbsp;V_1&nbsp;\\&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;\&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;T_x&nbsp;&amp;&nbsp;T_y&nbsp;&amp;&nbsp;T_z&nbsp;\\&nbsp;B_x&nbsp;&amp;&nbsp;B_y&nbsp;&amp;&nbsp;B_z&nbsp;\&nbsp;end&nbsp;{bmatrix}</mtext></merror></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-19"> \ begin {bmatrix} E_ {1x} e E_ {1y} e E_ {1z} \\ E_ {2x} e E_ {2y} e E_ {2z} \ end {bmatrix} = \ begin {bmatrix} \ Delta U_1 & \ Delta V_1 \\ \ Delta U_2 \ \ Delta V_2 \ end {bmatrix} \ begin {bmatrix} T_x & T_y & T_z \\ B_x & B_y & B_z \ end {bmatrix} </script></p><br>  Tente fazer a multiplicação da matriz em sua mente para garantir que o registro esteja correto.  Escrever um sistema em forma de matriz facilita muito a compreensão da abordagem para encontrar <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-54" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-20"> T </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>B</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-42" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-21"> B </script>  .  Multiplique ambos os lados da equação pelo inverso de <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>U</mi><mtext>&amp;#xA0;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.272ex" height="2.057ex" viewBox="0 -780.1 7006 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-61" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-55" x="2734" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-44" x="3752" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-65" x="4580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-6C" x="5047" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-74" x="5345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-61" x="5707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-56" x="6236" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>U</mi><mtext>&nbsp;</mtext><mi>D</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-22"> \ Delta U \ Delta V </script>  : <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><merror><mtext>\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;U_1&amp;#xA0;e&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_1&amp;#xA0;\\&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;U_2&amp;#xA0;e&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_2&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}&amp;#xA0;^&amp;#xA0;{-&amp;#xA0;1}&amp;#xA0;\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;E_&amp;#xA0;{1x}&amp;#xA0;e&amp;#xA0;E_&amp;#xA0;{1y}&amp;#xA0;&amp;amp;&amp;#xA0;E_&amp;#xA0;{1z&amp;#xA0;}&amp;#xA0;\\&amp;#xA0;E_&amp;#xA0;{2x}&amp;#xA0;e&amp;#xA0;E_&amp;#xA0;{2y}&amp;#xA0;e&amp;#xA0;E_&amp;#xA0;{2z}&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}&amp;#xA0;=&amp;#xA0;\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;T_x&amp;#xA0;&amp;amp;&amp;#xA0;T_y&amp;#xA0;&amp;amp;&amp;#xA0;T_z&amp;#xA0;\\&amp;#xA0;B_x&amp;#xA0;&amp;amp;&amp;#xA0;B_y&amp;#xA0;&amp;amp;&amp;#xA0;B_z&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}</mtext></merror></math>" role="presentation"><span class="noError" style="display: inline-block;" aria-hidden="true">\&nbsp;begin&nbsp;{bmatrix}&nbsp;\&nbsp;Delta&nbsp;U_1&nbsp;e&nbsp;\&nbsp;Delta&nbsp;V_1&nbsp;\\&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;e&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;^&nbsp;{-&nbsp;1}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;E_&nbsp;{1x}&nbsp;e&nbsp;E_&nbsp;{1y}&nbsp;&amp;&nbsp;E_&nbsp;{1z&nbsp;}&nbsp;\\&nbsp;E_&nbsp;{2x}&nbsp;e&nbsp;E_&nbsp;{2y}&nbsp;e&nbsp;E_&nbsp;{2z}&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;=&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;T_x&nbsp;&amp;&nbsp;T_y&nbsp;&amp;&nbsp;T_z&nbsp;\\&nbsp;B_x&nbsp;&amp;&nbsp;B_y&nbsp;&amp;&nbsp;B_z&nbsp;\&nbsp;end&nbsp;{bmatrix}</span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><merror><mtext>\&nbsp;begin&nbsp;{bmatrix}&nbsp;\&nbsp;Delta&nbsp;U_1&nbsp;e&nbsp;\&nbsp;Delta&nbsp;V_1&nbsp;\\&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;e&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;^&nbsp;{-&nbsp;1}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;E_&nbsp;{1x}&nbsp;e&nbsp;E_&nbsp;{1y}&nbsp;&amp;&nbsp;E_&nbsp;{1z&nbsp;}&nbsp;\\&nbsp;E_&nbsp;{2x}&nbsp;e&nbsp;E_&nbsp;{2y}&nbsp;e&nbsp;E_&nbsp;{2z}&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;=&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;T_x&nbsp;&amp;&nbsp;T_y&nbsp;&amp;&nbsp;T_z&nbsp;\\&nbsp;B_x&nbsp;&amp;&nbsp;B_y&nbsp;&amp;&nbsp;B_z&nbsp;\&nbsp;end&nbsp;{bmatrix}</mtext></merror></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-23"> \ begin {bmatrix} \ Delta U_1 e \ Delta V_1 \\ \ Delta U_2 e \ Delta V_2 \ end {bmatrix} ^ {- 1} \ begin {bmatrix} E_ {1x} e E_ {1y} & E_ {1z } \\ E_ {2x} e E_ {2y} e E_ {2z} \ end {bmatrix} = \ begin {bmatrix} T_x & T_y & T_z \\ B_x & B_y & B_z \ end {bmatrix} </script></p><br>  Temos uma decisão sobre <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-54" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-24"> T </script>  e <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>B</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-42" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-25"> B </script>  , que, no entanto, requer o cálculo da matriz inversa de alterações nas coordenadas de textura.  Não entraremos em detalhes do cálculo de matrizes inversas - a expressão para a matriz inversa se parece com o produto do número inverso ao determinante da matriz original e da matriz adjacente: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><merror><mtext>\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;T_x&amp;#xA0;&amp;amp;&amp;#xA0;T_y&amp;#xA0;&amp;amp;&amp;#xA0;T_z&amp;#xA0;\\&amp;#xA0;B_x&amp;#xA0;&amp;amp;&amp;#xA0;B_y&amp;#xA0;&amp;amp;&amp;#xA0;B_z&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}&amp;#xA0;=&amp;#xA0;\&amp;#xA0;frac&amp;#xA0;{1}&amp;#xA0;{\&amp;#xA0;Delta&amp;#xA0;U_1&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_2&amp;#xA0;-&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;U_2&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_1}&amp;#xA0;\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_2&amp;#xA0;e&amp;#xA0;-&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;V_1&amp;#xA0;\\&amp;#xA0;-&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;U_2&amp;#xA0;e&amp;#xA0;\&amp;#xA0;Delta&amp;#xA0;U_1&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}&amp;#xA0;\&amp;#xA0;begin&amp;#xA0;{bmatrix}&amp;#xA0;E_&amp;#xA0;{1x}&amp;#xA0;e&amp;#xA0;E_&amp;#xA0;{1y}&amp;#xA0;e&amp;#xA0;E_&amp;#xA0;{1z}&amp;#xA0;\\&amp;#xA0;E_&amp;#xA0;{2x}&amp;#xA0;e&amp;#xA0;E_&amp;#xA0;{&amp;#xA0;2y}&amp;#xA0;&amp;amp;&amp;#xA0;E_&amp;#xA0;{2z}&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{bmatrix}</mtext></merror></math>" role="presentation"><span class="noError" style="display: inline-block;" aria-hidden="true">\&nbsp;begin&nbsp;{bmatrix}&nbsp;T_x&nbsp;&amp;&nbsp;T_y&nbsp;&amp;&nbsp;T_z&nbsp;\\&nbsp;B_x&nbsp;&amp;&nbsp;B_y&nbsp;&amp;&nbsp;B_z&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;=&nbsp;\&nbsp;frac&nbsp;{1}&nbsp;{\&nbsp;Delta&nbsp;U_1&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;-&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;\&nbsp;Delta&nbsp;V_1}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;e&nbsp;-&nbsp;\&nbsp;Delta&nbsp;V_1&nbsp;\\&nbsp;-&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;e&nbsp;\&nbsp;Delta&nbsp;U_1&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;E_&nbsp;{1x}&nbsp;e&nbsp;E_&nbsp;{1y}&nbsp;e&nbsp;E_&nbsp;{1z}&nbsp;\\&nbsp;E_&nbsp;{2x}&nbsp;e&nbsp;E_&nbsp;{&nbsp;2y}&nbsp;&amp;&nbsp;E_&nbsp;{2z}&nbsp;\&nbsp;end&nbsp;{bmatrix}</span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><merror><mtext>\&nbsp;begin&nbsp;{bmatrix}&nbsp;T_x&nbsp;&amp;&nbsp;T_y&nbsp;&amp;&nbsp;T_z&nbsp;\\&nbsp;B_x&nbsp;&amp;&nbsp;B_y&nbsp;&amp;&nbsp;B_z&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;=&nbsp;\&nbsp;frac&nbsp;{1}&nbsp;{\&nbsp;Delta&nbsp;U_1&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;-&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;\&nbsp;Delta&nbsp;V_1}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;\&nbsp;Delta&nbsp;V_2&nbsp;e&nbsp;-&nbsp;\&nbsp;Delta&nbsp;V_1&nbsp;\\&nbsp;-&nbsp;\&nbsp;Delta&nbsp;U_2&nbsp;e&nbsp;\&nbsp;Delta&nbsp;U_1&nbsp;\&nbsp;end&nbsp;{bmatrix}&nbsp;\&nbsp;begin&nbsp;{bmatrix}&nbsp;E_&nbsp;{1x}&nbsp;e&nbsp;E_&nbsp;{1y}&nbsp;e&nbsp;E_&nbsp;{1z}&nbsp;\\&nbsp;E_&nbsp;{2x}&nbsp;e&nbsp;E_&nbsp;{&nbsp;2y}&nbsp;&amp;&nbsp;E_&nbsp;{2z}&nbsp;\&nbsp;end&nbsp;{bmatrix}</mtext></merror></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-26"> \ begin {bmatrix} T_x & T_y & T_z \\ B_x & B_y & B_z \ end {bmatrix} = \ frac {1} {\ Delta U_1 \ Delta V_2 - \ Delta U_2 \ Delta V_1} \ begin {bmatrix} \ Delta V_2 e - \ Delta V_1 \\ - \ Delta U_2 e \ Delta U_1 \ end {bmatrix} \ begin {bmatrix} E_ {1x} e E_ {1y} e E_ {1z} \\ E_ {2x} e E_ { 2y} & E_ {2z} \ end {bmatrix} </script></p><br>  Esta expressão é a fórmula para calcular o vetor tangente <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>T</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-54" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-27"> T </script>  e tangente <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>B</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/415579/&amp;usg=ALkJrhhdOVDWYDOLp2C9-FdMAXeNjHjx-w#MJMATHI-42" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-28"> B </script>  com base nas coordenadas das faces do triângulo e nas coordenadas correspondentes da textura. <br>  Não se preocupe se a essência dos cálculos matemáticos acima iludir você.  Se você entende que obtemos a tangente e a tangente de viés com base nas coordenadas dos vértices do triângulo e em suas coordenadas de textura (já que as coordenadas da textura também pertencem ao espaço da tangente) - isso já é metade da batalha. <br><br><h4>  Cálculo de tangentes e bitangentes </h4><br>  No exemplo desta lição, pegamos um plano simples olhando em direção ao semi-eixo positivo oZ.  Agora, tentaremos implementar o mapeamento normal usando o espaço tangente para poder orientar o plano no exemplo como quisermos, sem destruir o efeito de mapeamento normal.  Usando o cálculo acima, encontramos manualmente a tangente e a bi-tangente à superfície em consideração. <br>  Supomos que o plano seja composto pelos seguintes vértices com coordenadas de textura (dois triângulos são dados pelos vetores 1, 2, 3 e 1, 3, 4): <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   glm::vec3 pos1(-1.0, 1.0, 0.0); glm::vec3 pos2(-1.0, -1.0, 0.0); glm::vec3 pos3( 1.0, -1.0, 0.0); glm::vec3 pos4( 1.0, 1.0, 0.0); //   glm::vec2 uv1(0.0, 1.0); glm::vec2 uv2(0.0, 0.0); glm::vec2 uv3(1.0, 0.0); glm::vec2 uv4(1.0, 1.0); //   glm::vec3 nm(0.0, 0.0, 1.0);</span></span></code> </pre> <br>  Primeiro, calculamos os vetores que descrevem as faces do triângulo, bem como os deltas das coordenadas da textura: <br><br><pre> <code class="cpp hljs">glm::vec3 edge1 = pos2 - pos1; glm::vec3 edge2 = pos3 - pos1; glm::vec2 deltaUV1 = uv2 - uv1; glm::vec2 deltaUV2 = uv3 - uv1;</code> </pre> <br>  Tendo os dados iniciais necessários em mãos, podemos começar a calcular a tangente e a bi-tangente diretamente pelas fórmulas da seção anterior: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> f = <span class="hljs-number"><span class="hljs-number">1.0f</span></span> / (deltaUV1.x * deltaUV2.y - deltaUV2.x * deltaUV1.y); tangent1.x = f * (deltaUV2.y * edge1.x - deltaUV1.y * edge2.x); tangent1.y = f * (deltaUV2.y * edge1.y - deltaUV1.y * edge2.y); tangent1.z = f * (deltaUV2.y * edge1.z - deltaUV1.y * edge2.z); tangent1 = glm::normalize(tangent1); bitangent1.x = f * (-deltaUV2.x * edge1.x + deltaUV1.x * edge2.x); bitangent1.y = f * (-deltaUV2.x * edge1.y + deltaUV1.x * edge2.y); bitangent1.z = f * (-deltaUV2.x * edge1.z + deltaUV1.x * edge2.z); bitangent1 = glm::normalize(bitangent1); [...] <span class="hljs-comment"><span class="hljs-comment">//        </span></span></code> </pre> <br>  Primeiro, retiramos o componente fracionário da expressão final em uma variável separada <i>f</i> .  Então, para cada componente dos vetores, executamos a parte correspondente da multiplicação da matriz e multiplicamos por <i>f</i> .  Comparando esse código com a fórmula de cálculo final, você pode ver que esse é seu arranjo literal.  Não se esqueça de normalizar no final, para que os vetores encontrados sejam unitários. <br><br>  Como o triângulo é uma figura plana, basta calcular a tangente e a bi-tangente uma vez por triângulo - elas serão iguais para todos os vértices.  Vale ressaltar que a maioria das implementações de trabalho com modelos (como carregadeiras ou geradores de paisagem) usa essa organização de triângulos, onde eles compartilham vértices com outros triângulos.  Nesses casos, os desenvolvedores geralmente recorrem à média de parâmetros em vértices comuns, como vetores normais, tangente e bi-tangente, para obter um resultado mais suave.  Os triângulos que compõem nosso plano também compartilham vários vértices, mas como os dois estão no mesmo plano, a média não é necessária.  No entanto, é útil lembrar a presença dessa abordagem em aplicativos e tarefas reais. <br><br>  Os vetores tangentes e bi-tangentes resultantes devem ter valores (1, 0, 0) e (0, 1, 0), respectivamente.  Que juntamente com o vetor normal (0, 0, 1) formam a matriz ortogonal TBN.  Se você visualizar a base resultante com o plano, obterá a seguinte imagem: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4q/k-/qu/4qk-qubyv3blgflpspploqrmz8i.png"></div><br>  Agora, tendo calculado vetores, você pode prosseguir para a implementação completa do mapeamento normal. <br><br><h4>  Mapeamento normal no espaço tangente </h4><br>  Primeiro, você precisa criar uma matriz TBN nos shaders.  Para esse propósito, transferiremos os vetores tangentes e bi-tangentes pré-preparados para o sombreador de vértices através dos atributos de vértice: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#version 330 core layout (location = 0) in vec3 aPos; layout (location = 1) in vec3 aNormal; layout (location = 2) in vec2 aTexCoords; layout (location = 3) in vec3 aTangent; layout (location = 4) in vec3 aBitangent;</span></span></code> </pre> <br>  No próprio código do vertex shader, formamos a matriz diretamente: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ [...] vec3 T = normalize(vec3(model * vec4(aTangent, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); vec3 B = normalize(vec3(model * vec4(aBitangent, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); vec3 N = normalize(vec3(model * vec4(aNormal, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); mat3 TBN = mat3(T, B, N) }</code> </pre> <br>  No código acima, primeiro convertemos todos os vetores da base do espaço tangente em um sistema de coordenadas no qual nos sentimos confortáveis ​​trabalhando - nesse caso, este é o sistema de coordenadas do mundo e multiplicamos os vetores pelo modelo de matriz de <i>modelo</i> .  Em seguida, criamos a própria matriz TBN simplesmente passando todos os três vetores correspondentes para um construtor do tipo <i>mat3</i> .  Observe que, para que a ordem seja completamente correta, é necessário multiplicar os vetores não pela matriz do modelo, mas pela matriz normal, pois estamos interessados ​​apenas na orientação dos vetores, mas não em seu deslocamento ou escala. <br><blockquote>  A rigor, não é necessário transferir o vetor bi-tangente para o sombreador. <br>  Como o triplo dos vetores TBN é mutuamente perpendicular, a bi-tangente pode ser encontrada no sombreador através da multiplicação do vetor: <br><br><pre> <code class="cpp hljs"> vec3 B = cross(N, T)</code> </pre> </blockquote><br>  Então, a matriz TBN é recebida, como a usamos?  De fato, existem duas abordagens para seu uso no mapeamento normal: <br><br><ol><li>  Use a matriz TBN para transformar todos os vetores necessários da tangente para o espaço do mundo.  Transfira os resultados para o shader de fragmento, onde, também usando a matriz, transforma o vetor do mapa normal para o espaço do mundo.  Como resultado, o vetor normal estará no espaço em que toda a iluminação é calculada. </li><li>  Pegue a matriz inversa em TBN e converta todos os vetores necessários do espaço mundial para tangente.  I.e.  use essa matriz para transformar os vetores envolvidos nos cálculos de iluminação em espaço tangente.  O vetor normal neste caso também permanece no mesmo espaço que os outros participantes no cálculo da iluminação. </li></ol><br>  Vamos olhar para a primeira opção.  O vetor normal da textura correspondente é especificado no espaço tangente, enquanto os outros vetores usados ​​no cálculo da iluminação são definidos no espaço do mundo.  Ao passar a matriz TBN para o shader de fragmento, poderíamos transformar o vetor normal obtido por amostragem da textura da tangente para o espaço do mundo, garantindo a unidade dos sistemas de coordenadas para todos os elementos do cálculo da iluminação.  Nesse caso, todos os cálculos (especialmente multiplicações de vetores escalares) estarão corretos. <br><br>  A transferência da matriz TBN é feita da maneira mais simples: <br><br><pre> <code class="cpp hljs">out VS_OUT { vec3 FragPos; vec2 TexCoords; mat3 TBN; } vs_out; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ [...] vs_out.TBN = mat3(T, B, N); }</code> </pre> <br>  No código do fragment shader, respectivamente, definimos uma variável de entrada do tipo mat3: <br><br><pre> <code class="cpp hljs">in VS_OUT { vec3 FragPos; vec2 TexCoords; mat3 TBN; } fs_in;</code> </pre> <br>  Tendo a matriz em mãos, é possível especificar o código para obter o normal pela expressão da tradução da tangente para o espaço do mundo: <br><br><pre> <code class="cpp hljs">normal = texture(normalMap, fs_in.TexCoords).rgb; normal = normalize(normal * <span class="hljs-number"><span class="hljs-number">2.0</span></span> - <span class="hljs-number"><span class="hljs-number">1.0</span></span>); normal = normalize(fs_in.TBN * normal);</code> </pre> <br>  Como o normal resultante agora está definido no espaço do mundo, não há necessidade de alterar mais nada no código do sombreador.  Os cálculos de iluminação e, portanto, assumem um vetor normal dado nas coordenadas do mundo. <br><br>  Vamos também olhar para a segunda abordagem.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Isso exigirá a obtenção da matriz TBN inversa, bem como a transferência de todos os vetores envolvidos no cálculo da iluminação do sistema de coordenadas do mundo para aquele que corresponda aos vetores normais obtidos da textura - a tangente. </font><font style="vertical-align: inherit;">Nesse caso, a formação da matriz TBN permanece inalterada, mas antes de passar para o shader de fragmento, precisamos obter a matriz inversa:</font></font><br><br><pre> <code class="cpp hljs">vs_out.TBN = transpose(mat3(T, B, N));</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observe que a função </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">transpose ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é usada em </font><font style="vertical-align: inherit;">vez de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inversa ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Essa substituição é verdadeira, já que para matrizes ortogonais (onde todos os eixos são representados por vetores unitários mutuamente perpendiculares), a obtenção da matriz inversa fornece um resultado idêntico à transposição. </font><font style="vertical-align: inherit;">E isso é muito útil, pois, no caso geral, calcular a matriz inversa é uma tarefa muito mais computacionalmente cara em comparação à transposição. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No código do fragment shader, não converteremos o vetor normal; em vez disso, converteremos outros vetores importantes do sistema de coordenadas do mundo para a tangente, nomeadamente </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lightDir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viewDir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Essa solução também traz todos os elementos dos cálculos em um único sistema de coordenadas, desta vez a tangente.</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ vec3 normal = texture(normalMap, fs_in.TexCoords).rgb; normal = normalize(normal * <span class="hljs-number"><span class="hljs-number">2.0</span></span> - <span class="hljs-number"><span class="hljs-number">1.0</span></span>); vec3 lightDir = fs_in.TBN * normalize(lightPos - fs_in.FragPos); vec3 viewDir = fs_in.TBN * normalize(viewPos - fs_in.FragPos); [...] }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A segunda abordagem parece mais demorada e requer mais multiplicações de matrizes no sombreador de fragmentos (o que afeta muito o desempenho). Por que começamos a desmontá-lo? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O fato é que traduzir vetores de coordenadas mundiais para tangentes fornece uma vantagem adicional: na verdade, podemos mover todo o código de transformação de fragmento para sombreador de vértice! Essa abordagem está funcionando porque </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lightPos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viewPos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> não mudam de fragmento para fragmento, e o valor é </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fs_in.FragPos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">também podemos traduzir em espaço tangente no shader de vértice, o valor interpolado na entrada do shader de fragmento será bastante correto. </font><font style="vertical-align: inherit;">Portanto, para a segunda abordagem, não há necessidade de converter todos esses vetores no espaço tangente no código do sombreador de fragmentos, enquanto o primeiro exige isso - porque o normal é único para cada fragmento.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado, nos afastamos da transferência da matriz inversa ao TBN para o shader de fragmento e, em vez disso, passamos o vetor de posição do vértice, fonte de luz e observador no espaço tangente. </font><font style="vertical-align: inherit;">Portanto, nos livraremos das caras multiplicações de matrizes no shader de fragmento, o que será uma otimização significativa, porque o shader de vértice é executado com muito menos frequência. </font><font style="vertical-align: inherit;">É essa vantagem que coloca a segunda abordagem na categoria de uso preferido na maioria dos casos.</font></font><br><br><pre> <code class="cpp hljs">out VS_OUT { vec3 FragPos; vec2 TexCoords; vec3 TangentLightPos; vec3 TangentViewPos; vec3 TangentFragPos; } vs_out; uniform vec3 lightPos; uniform vec3 viewPos; [...] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ [...] mat3 TBN = transpose(mat3(T, B, N)); vs_out.TangentLightPos = TBN * lightPos; vs_out.TangentViewPos = TBN * viewPos; vs_out.TangentFragPos = TBN * vec3(model * vec4(aPos, <span class="hljs-number"><span class="hljs-number">0.0</span></span>));</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No shader de fragmento, passamos a usar novas variáveis ​​de entrada nos cálculos de iluminação no espaço tangente. </font><font style="vertical-align: inherit;">Como as normais são definidas condicionalmente neste espaço, todos os cálculos permanecem corretos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora que todos os cálculos normais de mapeamento são executados no espaço tangente, podemos alterar a orientação da superfície de teste no aplicativo como queremos e a iluminação permanecerá correta:</font></font><br><br><pre> <code class="cpp hljs">glm::<span class="hljs-function"><span class="hljs-function">mat4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">model</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1.0f</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; model = glm::rotate(model, (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)glfwGetTime() * <span class="hljs-number"><span class="hljs-number">-10.0f</span></span>, glm::normalize(glm::vec3(<span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>))); shader.setMat4(<span class="hljs-string"><span class="hljs-string">"model"</span></span>, model); RenderQuad();</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> De fato, exteriormente tudo parece como deveria: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ue/do/ex/uedoexgmihcpjjyf5mmcm09vpps.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As fontes estão </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Objetos complexos </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assim, descobrimos como realizar o mapeamento normal no espaço tangente e como calcular independentemente os vetores tangentes tangentes e tendenciosos para isso. </font><font style="vertical-align: inherit;">Felizmente, esse cálculo manual não costuma ser uma tarefa: na maioria das vezes, esse código é implementado por desenvolvedores em algum lugar nas entranhas do carregador de modelos. </font><font style="vertical-align: inherit;">No nosso caso, isso é verdade para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o carregador Assimp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usado </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Assimp fornece um sinalizador de opção muito útil ao carregar modelos: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aiProcess_CalcTangentSpace</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Quando é passada para a função </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReadFile ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a </font><font style="vertical-align: inherit;">própria biblioteca calcula as linhas tangentes e bi-tangentes suaves de cada um dos vértices carregados - um processo semelhante ao discutido aqui.</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> aiScene *scene = importer.ReadFile( path, aiProcess_Triangulate | aiProcess_FlipUVs | aiProcess_CalcTangentSpace );</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Depois disso, você pode acessar diretamente as tangentes calculadas: </font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>.x = mesh-&gt;mTangents[i].x; <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>.y = mesh-&gt;mTangents[i].y; <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>.z = mesh-&gt;mTangents[i].z; vertex.Tangent = <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você também precisará atualizar o código de download para levar em consideração o recebimento de mapas normais para modelos texturizados. O formato Wavefront Object (.obj) exporta mapas normais de forma que o sinalizador </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assimp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aiTextureType_NORMAL </font><font style="vertical-align: inherit;">não garanta que esses mapas sejam carregados corretamente, enquanto </font><font style="vertical-align: inherit;">tudo funciona corretamente </font><font style="vertical-align: inherit;">com o sinalizador </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aiTextureType_HEIGHT</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Portanto, pessoalmente, normalmente carrego mapas normais da seguinte maneira:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;Texture&gt; normalMaps = loadMaterialTextures(material, aiTextureType_HEIGHT, <span class="hljs-string"><span class="hljs-string">"texture_normal"</span></span>);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obviamente, essa abordagem pode não ser adequada para outros formatos de descrição de modelo e tipos de arquivo. Também observo que a configuração do sinalizador </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aiProcess_CalcTangentSpace</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nem sempre funciona. Sabemos que o cálculo de tangentes é baseado em coordenadas de textura; no entanto, os autores de modelos geralmente aplicam vários truques às coordenadas de textura, o que interrompe o cálculo de tangentes. Portanto, uma imagem espelhada de coordenadas de textura é frequentemente usada para modelos com textura simétrica. Se o fato do espelhamento não for levado em consideração, o cálculo das tangentes estará incorreto. O Assimp não faz essa contabilidade. O modelo nanosuit familiar aqui não é adequado para demonstração, pois também usa espelhamento.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mas com um modelo com textura correta usando mapas normais e especulares, o aplicativo de teste fornece um resultado muito bom: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qs/fc/45/qsfc45x4jkxagyufkoq6mbspf5k.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como você pode ver, o uso do mapeamento normal fornece um aumento tangível em detalhes e é barato em termos de custos de desempenho. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Não esqueça que o uso do mapeamento normal pode ajudar a melhorar o desempenho de uma cena específica. </font><font style="vertical-align: inherit;">Sem seu uso, é possível obter detalhes do modelo apenas através do aumento da densidade da malha poligonal. </font><font style="vertical-align: inherit;">Mas essa técnica permite alcançar visualmente o mesmo nível de detalhe para malhas de baixo poli. </font><font style="vertical-align: inherit;">Abaixo, você pode ver uma comparação dessas duas abordagens:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qm/eq/s2/qmeqs2ocgdhnikxrfmlyjvkqxc8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O nível de detalhe no modelo de alto poli e baixo poli usando o mapeamento normal é praticamente indistinguível. </font><font style="vertical-align: inherit;">Portanto, essa técnica é uma ótima maneira de substituir modelos high-poly na cena por modelos simplificados, praticamente sem perda na qualidade visual.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Último comentário </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Há outro detalhe técnico referente ao mapeamento normal, que melhora um pouco a qualidade com pouco ou nenhum custo adicional. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nos casos em que tangentes são calculadas para malhas grandes e complexas com um número significativo de vértices pertencentes a vários triângulos, os vetores tangentes são geralmente calculados para obter um resultado de mapeamento normal suave e visualmente agradável. No entanto, isso cria um problema: após a média, o triplo dos vetores TBN pode perder a perpendicularidade mútua, o que também significa a perda de ortogonalidade para a matriz TBN. No caso geral, o resultado do mapeamento normal obtido com base em uma matriz não ortogonal é apenas ligeiramente incorreto, mas ainda podemos melhorá-lo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para fazer isso, basta aplicar um método matemático simples:</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Processo de Gram-Schmidt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou re-ortogonalização do nosso triplo de vetores TBN. </font><font style="vertical-align: inherit;">No código do vertex shader:</font></font><br><br><pre> <code class="cpp hljs">vec3 T = normalize(vec3(model * vec4(aTangent, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); vec3 N = normalize(vec3(model * vec4(aNormal, <span class="hljs-number"><span class="hljs-number">0.0</span></span>))); <span class="hljs-comment"><span class="hljs-comment">// - T  N T = normalize(T - dot(T, N) * N); //    B    T  N vec3 B = cross(N, T); mat3 TBN = mat3(T, B, N)</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essa emenda, embora pequena, melhora a qualidade do mapeamento normal em troca de despesas gerais escassas. </font><font style="vertical-align: inherit;">Se você estiver interessado nos detalhes deste procedimento, poderá assistir a última parte do vídeo Normal Mapping Mathematics, cujo link é fornecido abaixo.</font></font><br><br><h2>  Recursos Adicionais </h2><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tutorial 26: Mapeamento Normal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Uma lição sobre mapeamento normal do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ogldev</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como o mapeamento normal funciona</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : um tutorial em vídeo que explica os conceitos básicos do mapeamento normal no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TheBennyBox</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Matemática de mapeamento normal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : um filme relacionado ao anterior que explica a matemática usada no método de mapeamento normal, também de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TheBennyBox</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tutorial 13: Mapeamento Normal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : outra lição do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opengl-tutorial.org</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li></ul><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Temos um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">telegrama conf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para coordenação de transferências. </font><font style="vertical-align: inherit;">Se você tem um desejo sério de ajudar com a tradução, é bem-vindo!</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt415579/">https://habr.com/ru/post/pt415579/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt415569/index.html">Como configurar o ubuntu 18.04 sendmail + DKIM + SPF + DMARC ou como eu consegui entrar no bastião do Gmail</a></li>
<li><a href="../pt415571/index.html">kaggle: Identificação do modelo de câmera do IEEE</a></li>
<li><a href="../pt415573/index.html">Otimização de um modelo para impressão 3D usando o software Blender como exemplo</a></li>
<li><a href="../pt415575/index.html">Funções para documentar bancos de dados PostgreSQL. Parte um</a></li>
<li><a href="../pt415577/index.html">Slides do curso "DBMS Technologies and Development"</a></li>
<li><a href="../pt415581/index.html">International fintech - digest: 12 notícias sobre o mais importante do setor</a></li>
<li><a href="../pt415587/index.html">StereoPi - nossa peça de hardware para estudar visão computacional, drones e robôs</a></li>
<li><a href="../pt415589/index.html">"Um pouco mais sobre PD": empresas de TV dos EUA vão parar de vender dados de clientes</a></li>
<li><a href="../pt415591/index.html">Os engenheiros da Apple interceptam o teclado do MacBook Pro</a></li>
<li><a href="../pt415593/index.html">6 anos depois, uma nova versão do lendário CD de distribuição de falhas Hiren</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>