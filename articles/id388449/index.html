<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🚒 ♍️ 🤾🏿 Menggunakan memori tampilan SPI Flash untuk menyimpan sumber daya grafis atau menampilkan stasiun cuaca rumah 🐼 🍲 💔</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini dimaksudkan untuk berbicara tentang kemungkinan menggunakan tampilan memori Flash on-board untuk kebutuhan proyek. 
 Untuk siapa itu relev...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menggunakan memori tampilan SPI Flash untuk menyimpan sumber daya grafis atau menampilkan stasiun cuaca rumah</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/388449/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel ini dimaksudkan untuk berbicara tentang kemungkinan menggunakan tampilan memori Flash on-board untuk kebutuhan proyek. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk siapa itu relevan atau hanya menarik - selamat datang di bawah kucing.</font></font><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selama setahun saya meletakkan layar 7 "di rak menunggu waktu saya. Kenapa begitu lama? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya, karena ada layar 3,2" yang digunakan, yang secara umum bekerja dengan baik. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, volume informasi yang ditampilkan secara bersamaan di 3,2 "tidak cocok untuk saya sama sekali. Bagian server dari stasiun cuaca menerima ramalan cuaca seminggu dari Internet, tetapi tidak ada cara untuk menampilkannya (perkiraan) secara bersamaan dengan pembacaan sensor. Oleh karena itu, saya bingung dengan membeli layar yang lebih besar. Awalnya, saya melihat 5 ", tetapi setelah berpartisipasi beberapa kali dalam pelelangan, pada akhirnya saya membeli 7" dengan harga 5 ", yang sangat senang. Layar yang dibeli dilengkapi dengan pengontrol SSD1963 dan 64MB Flash RAM.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika tampilan baru masih mengumpulkan debu di rak, saya menarik perhatian pada kehadiran di Internet perpustakaan dengan dokumentasi yang memungkinkan menggunakan memori flash bawaan untuk kebutuhan saya. Sejauh ini saya telah datang dengan menyimpan ikon yang menunjukkan cuaca saat ini di sana. Dalam versi sebelumnya dengan layar 3,2 ", ikon disimpan pada Kartu SD yang dimasukkan dalam pembaca kartu modul display. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya ingin segera mencatat bahwa proses memuat file sumber daya ke dalam memori tampilan tidak sederhana dan nyaman, jadi saya memutuskan untuk menulis artikel instruksi singkat. Jadi, mari kita mulai : </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, unduh arsip di tautan ini: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPIFlash</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTFT_SPIflash</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan perluas arsip di direktori libraries. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mengunduh terdiri dari beberapa langkah:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Persiapkan terlebih dahulu seperangkat ikon atau sumber daya grafis lainnya yang ingin kami gunakan dalam proyek Anda. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Dalam folder SPIflash \ tools \ FlashUploader adalah alat FlashUploader dan dokumentasi yang baik untuk itu. Secara teori, alat ini dirancang untuk memuat sumber daya dalam tampilan flash, tetapi pada kenyataannya, karena masalah dengan komunikasi perangkat lunak dengan controller, ini tidak dapat dilakukan, sehingga proses ini agak diperpanjang. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan FlashUploader, kami menyiapkan file SFD yang berisi sekumpulan gambar yang disiapkan atau sumber daya lainnya.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menyiapkan dan menyimpan file sumber daya, tidak perlu menghubungkan FlashUploader dan tampilan, namun jika Anda masih ingin melakukan ini, Anda perlu memuat sketsa khusus di Arduino, yang terhubung dengan layar, yang terletak di folder SPIflash \ example \ Arduino (AVR) \ SPIflash_FlashUploader . </font><font style="vertical-align: inherit;">Setelah menambahkan semua ikon dan menyimpan file SFD, jangan lupa untuk membuat file dengan deskripsi konten terlampir menggunakan tombol "Hasilkan Daftar Isi". </font><font style="vertical-align: inherit;">Di masa depan, kami menggunakan file dengan deskripsi sebagai referensi untuk mencari nomor ikon yang diinginkan.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tangkapan Layar FlashUploader</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/180/53b/1b7/18053b1b71b4435cac987327a33637fb.png"><br>
</div></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. File SFD yang dihasilkan ditulis ke SD Card, yang kemudian dimasukkan ke pembaca kartu display. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Sambungkan tampilan ke Arduino dan muat sketsa SPIflash_Restore dari folder SPIflash \amples \ Arduino (AVR). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Kami memulai proses mengembalikan konten SD ke memori flash layar.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuplikan layar Serial Monitor setelah unggahan berhasil</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/819/186/a61/819186a6151f42d581a77d593c7d2162.png"><br>
</div></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini menyelesaikan proses booting. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam proyek ini, Anda perlu mengakses sumber daya yang diinginkan (gambar) dengan ID-nya di file SFD.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sketsa uji kecil untuk menampilkan semua ikon (dalam kasus saya, 44 di antaranya) pada tampilan</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SPI.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;UTFT.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SPIflash.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;UTFT_SPIflash.h&gt;</span></span></span></span>
<span class="hljs-comment"><span class="hljs-comment">//////      ////////</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> SmallFont[];
<span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> BigFont[];
<span class="hljs-comment"><span class="hljs-comment">///////////////////////////////////</span></span>
<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
<span class="hljs-function"><span class="hljs-function">UTFT </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myGLCD</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CTE70, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">38</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">39</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">40</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">41</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>;
<span class="hljs-comment"><span class="hljs-comment">// myFlash(&lt;SS&gt;); (if using the hardware SPI pins. See the manual for other configurations.)</span></span>
<span class="hljs-function"><span class="hljs-function">SPIflash      </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myFlash</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">45</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>;
<span class="hljs-function"><span class="hljs-function">UTFT_SPIflash </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myFiles</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&amp;myGLCD, &amp;myFlash)</span></span></span></span>;
<span class="hljs-comment"><span class="hljs-comment">//////////////////////////////////////////////////</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  myGLCD.InitLCD(LANDSCAPE);<font></font>
  myGLCD.setBright(<span class="hljs-number"><span class="hljs-number">7</span></span>);<font></font>
  myGLCD.setFont(BigFont);<font></font>
  myGLCD.setColor(<span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>);<font></font>
  myGLCD.setBackColor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
  myGLCD.clrScr();<font></font>
  myFlash.begin();<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myFlash.ID_device == <span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
  {<font></font>
    myGLCD.print(F(<span class="hljs-string"><span class="hljs-string">"Unknown flash device!"</span></span>), <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) {};<font></font>
  }<font></font>
  TestIcon2Display(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestIcon2Display</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y)</span></span></span><span class="hljs-function">
</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">44</span></span>; i++)<font></font>
  {<font></font>
      Serial.println(i);<font></font>
    myFiles.loadBitmap(i, x, y);<font></font>
    x = x + <span class="hljs-number"><span class="hljs-number">150</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x &gt; <span class="hljs-number"><span class="hljs-number">800</span></span> - <span class="hljs-number"><span class="hljs-number">150</span></span>)<font></font>
    {<font></font>
      x = <span class="hljs-number"><span class="hljs-number">10</span></span>;<font></font>
      y = y + <span class="hljs-number"><span class="hljs-number">110</span></span>;<font></font>
    }<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (y &gt; <span class="hljs-number"><span class="hljs-number">480</span></span> - <span class="hljs-number"><span class="hljs-number">110</span></span>) y = <span class="hljs-number"><span class="hljs-number">10</span></span>;<font></font>
    delay(<span class="hljs-number"><span class="hljs-number">700</span></span>);<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
}<font></font>
</code></pre><br>
</div></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nah, pada akhirnya </font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tampilan stasiun cuaca dalam kondisi kerja</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/4de/d44/31d/4ded4431d09d4cedbff7034320dff972.jpg"><br>
</div></div></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id388449/">https://habr.com/ru/post/id388449/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id388435/index.html">Bagaimana kami membuat analog dari Oculus Rift</a></li>
<li><a href="../id388437/index.html">Karakter dongeng Rusia Kuno, Episode II</a></li>
<li><a href="../id388443/index.html">Pemain Winamp yang ikonik kembali memiliki kesempatan untuk bangkit</a></li>
<li><a href="../id388445/index.html">Mengapa bintang meledak</a></li>
<li><a href="../id388447/index.html">BBC mulai menggunakan terjemahan laporan secara otomatis</a></li>
<li><a href="../id388453/index.html">Prototipe kerja pertama dari prosesor elektron-optik chip tunggal telah dibuat</a></li>
<li><a href="../id388455/index.html">Lusinan film DVD pra-rilis bocor secara online</a></li>
<li><a href="../id388457/index.html">[Posting Tahun Baru] Kingston memberi selamat kepada pembaca GeekTimes</a></li>
<li><a href="../id388461/index.html">Apa yang harus diberikan untuk Tahun Baru? Panduan Singkat Epson</a></li>
<li><a href="../id388463/index.html">Gingwa (bahasa untuk komunikasi antarplanet antara protein humanoids). Bagian 2, lokakarya pelatihan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>