<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üß† üôçüèª üåå Convergencia con Kubernetes üë¢ üë∞üèø ü•¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Estandarizaci√≥n total 


 Prepar√© este material para mi discurso en la conferencia y le pregunt√© a nuestro director t√©cnico cu√°l era la caracter√≠stica...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Convergencia con Kubernetes</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/427441/"><h3 id="totalnaya-standartizaciya">  Estandarizaci√≥n total </h3><br><p>  Prepar√© este material para mi discurso en la conferencia y le pregunt√© a nuestro director t√©cnico cu√°l era la caracter√≠stica principal de Kubernetes para nuestra organizaci√≥n.  El respondi√≥: </p><br><blockquote>  Los propios desarrolladores no entienden cu√°nto trabajo adicional hicieron. </blockquote><p>  Aparentemente, se inspir√≥ en el libro recientemente le√≠do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Factfulness"</a> : es dif√≠cil notar cambios menores y continuos para mejor, y constantemente perdemos de vista nuestro progreso. </p><br><p>  Pero el cambio a Kubernetes definitivamente no es insignificante. </p><br><p><img src="https://habrastorage.org/webt/72/vu/bn/72vubnen7dnspn7tp9wmy2if9cu.png"></p><a name="habracut"></a><br><p> Casi 30 de nuestros equipos ejecutan todas o algunas de las cargas de trabajo en los cl√∫steres.  Alrededor del 70% de nuestro tr√°fico HTTP es generado por aplicaciones en cl√∫steres de Kubernetes.  Esta es probablemente la mayor convergencia de tecnolog√≠as desde que me un√≠ a la compa√±√≠a despu√©s de que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Forward comprara uSwitch</a> en 2010, cuando cambiamos de servidores .NET y f√≠sicos a AWS y de un sistema monol√≠tico a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">microservicios</a> . </p><br><p>  Y todo sucedi√≥ muy r√°pido.  A finales de 2017, todos los equipos utilizaron su infraestructura de AWS.  Configuraron equilibradores de carga, instancias EC2, actualizaciones de cl√∫ster ECS y cosas por el estilo.  Pas√≥ poco m√°s de un a√±o y todo cambi√≥. </p><br><p>  Pasamos un m√≠nimo de tiempo convergiendo y, como resultado, Kubernetes nos ayud√≥ a resolver problemas apremiantes: nuestra nube crec√≠a, la organizaci√≥n se volv√≠a m√°s complicada y est√°bamos luchando por integrar a las nuevas personas en equipos.  No cambiamos la organizaci√≥n para usar Kubernetes.  Por el contrario, utilizamos Kubernetes para cambiar la organizaci√≥n. </p><br><p>  Es posible que los desarrolladores no hayan notado grandes cambios, pero los datos hablan por s√≠ mismos.  M√°s sobre esto m√°s tarde. </p><br><hr><br><p>  Hace muchos a√±os estuve en una conferencia de Clojure y escuch√© una conferencia de Michael Nygard <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sobre arquitectura que no se puede llevar a su estado final</a> .  Me abri√≥ los ojos.  Un sistema ordenado y ordenado se ve caricaturizado cuando compara las tiendas de TV con productos de cocina y la arquitectura de software a gran escala: el sistema existente se ve como un cuchillo tonto y sale alg√∫n tipo de papilla en lugar de incluso rebanadas.  Sin un cuchillo nuevo, no hay nada que pensar en ensalada. </p><br><p>  Se trata de c√≥mo las organizaciones adoran los proyectos de tres a√±os: el primer a√±o es desarrollo y preparaci√≥n, el segundo a√±o es implementaci√≥n, el tercero es retorno.  En una conferencia, dice que tales proyectos generalmente se realizan de forma continua y rara vez llegan al final del segundo a√±o (a menudo debido a la adquisici√≥n por parte de otra empresa y un cambio de direcci√≥n y estrategia), por lo que la arquitectura habitual </p><br><blockquote>  estratificaci√≥n del cambio en cierta apariencia de estabilidad. </blockquote><p>  Y uSwitch es un gran ejemplo. </p><br><p>  Cambiamos a AWS por muchas razones: nuestro sistema no pod√≠a hacer frente a las cargas m√°ximas, y la organizaci√≥n se vio obstaculizada por un sistema demasiado r√≠gido y equipos estrechamente relacionados que se formaron para proyectos espec√≠ficos y se dividieron por especializaci√≥n. </p><br><p>  No √≠bamos a dejar todo, transferir todos los sistemas y comenzar de nuevo.  Creamos nuevos servicios con proxy a trav√©s del equilibrador de carga existente y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gradualmente bloqueamos la</a> aplicaci√≥n anterior.  Quer√≠amos mostrar de inmediato la devoluci√≥n y en la primera semana realizamos pruebas A / B de la primera versi√≥n del nuevo servicio en producci√≥n.  Como resultado, tomamos productos a largo plazo y comenzamos a formar equipos para ellos de desarrolladores, dise√±adores, analistas, etc. E inmediatamente vimos el resultado.  En 2010, esto parec√≠a una verdadera revoluci√≥n. </p><br><p>  A√±o tras a√±o, agregamos nuevos equipos, servicios y aplicaciones y gradualmente "estrangulamos" el sistema monol√≠tico.  Los equipos progresaron r√°pidamente: ahora trabajaban independientemente el uno del otro y estaban formados por especialistas en todos los campos necesarios.  Minimizamos las interacciones de equipo para lanzamientos de productos.  Hemos asignado varios comandos solo para la configuraci√≥n del equilibrador de carga. </p><br><p>  Los propios equipos eligieron m√©todos de desarrollo, herramientas e idiomas.  Les pusimos una tarea, y ellos mismos encontraron una soluci√≥n, porque eran los m√°s versados ‚Äã‚Äãen el asunto.  Con AWS, estos cambios se han vuelto m√°s f√°ciles. </p><br><p>  Intuitivamente, seguimos los principios de la programaci√≥n: los equipos que est√°n conectados entre s√≠ ser√°n menos propensos a comunicarse y no tendremos que gastar recursos preciosos en coordinar su trabajo.  Todo esto est√° muy bien descrito en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">libro</a> recientemente publicado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Accelerate</a> . </p><br><p>  Como resultado, como describi√≥ Michael Nygard, obtuvimos un sistema de muchas capas de cambios: algunos sistemas se automatizaron con Puppet, algunos con Terraform, en alg√∫n lugar donde usamos ECS, en alg√∫n lugar EC2. </p><br><p>  En 2012, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">est√°bamos orgullosos de nuestra arquitectura, que se pod√≠a cambiar f√°cilmente para experimentar</a> , encontrar soluciones exitosas y desarrollarlas. </p><br><p>  Pero en 2017, nos dimos cuenta de que muchas cosas han cambiado. </p><br><hr><br><p>  AWS ahora es mucho m√°s complejo que en 2010. Ofrece un mont√≥n de opciones y caracter√≠sticas, pero no sin consecuencias.  Hoy, cualquier equipo que trabaje con EC2 tiene que elegir una VPC, configuraci√≥n de red y mucho m√°s. </p><br><p>  Experimentamos esto por nuestra cuenta: los equipos comenzaron a quejarse de que dedicaban cada vez m√°s tiempo a mantener la infraestructura, por ejemplo, actualizando instancias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en cl√∫steres ECS de AWS</a> , m√°quinas EC2, cambiando de equilibradores ELB a ALB, etc. </p><br><p>  A mediados de 2017, en un evento corporativo, inst√© a todos a estandarizar su trabajo para mejorar la calidad general de los sistemas.  Utilic√© la met√°fora del iceberg para mostrar c√≥mo creamos y mantenemos el software: </p><br><p><img src="https://habrastorage.org/webt/sn/ci/pt/sncipt6axzuuqa2pcqxrpbcwzh0.png"></p><br><p>  Dije que la mayor√≠a de los equipos de nuestra empresa deber√≠an crear servicios o productos y centrarse en la resoluci√≥n de problemas, el c√≥digo de la aplicaci√≥n, las plataformas y bibliotecas, etc. En ese orden.  Queda mucho trabajo bajo el agua: integraci√≥n de registros, aumento de la observabilidad, gesti√≥n de secretos, etc. </p><br><p>  En ese momento, cada equipo de desarrolladores de aplicaciones se ocup√≥ de casi todo el iceberg y tom√≥ todas las decisiones por s√≠ mismo: eligi√≥ el idioma, el entorno de desarrollo, la biblioteca y la herramienta de m√©tricas, el sistema operativo, el tipo de instancia y el almacenamiento. </p><br><p>  En la base de la pir√°mide, ten√≠amos la infraestructura de Amazon Web Services.  Pero no todos los servicios de AWS son iguales.  Tienen un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Back-end-as-a-Service (BaaS)</a> , por ejemplo, para autenticaci√≥n y almacenamiento de datos.  Y hay otros servicios de nivel relativamente bajo, como EC2.  Quer√≠a estudiar los datos y comprender que los equipos tienen motivos para quejarse y que realmente pasan m√°s tiempo trabajando con servicios de bajo nivel y toman muchas decisiones no importantes. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Divid√≠</a> los servicios en categor√≠as, usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CloudTrail</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">reun√≠</a> todas las estad√≠sticas disponibles, y luego us√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">BigQuery</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Athena</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ggplot2</a> para ver c√≥mo ha cambiado la situaci√≥n para los desarrolladores √∫ltimamente.  Crecimiento para servicios como RDS, Redshift, etc., lo consideramos deseable (y esperado), y crecimiento para EC2, CloudFormation, etc., por el contrario. </p><br><p><img src="https://habrastorage.org/webt/dd/bd/-f/ddbd-fy5t4wzicbekukgyx_lji0.png"></p><br><p>  Cada punto del diagrama muestra los percentiles 90 (rojo), 80 (verde) y 50 (azul) para la cantidad de <strong>servicios</strong> de <strong>bajo nivel</strong> que nuestra gente us√≥ todas las semanas durante un per√≠odo determinado.  Agregu√© l√≠neas de suavizado para mostrar la tendencia. </p><br><p>  Aunque apuntamos a abstracciones de alto nivel al implementar software, por ejemplo, utilizando contenedores y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Amazon ECS</a> , nuestros desarrolladores utilizaron regularmente m√°s y m√°s servicios de AWS y no ignoraron suficientemente las dificultades de administrar sistemas.  En dos a√±os, el n√∫mero de servicios se duplic√≥ para el 50% de los empleados y casi se triplic√≥ para el 20%. </p><br><p>  Esto limit√≥ el crecimiento de nuestra empresa.  Los equipos buscaron autonom√≠a, pero ¬øc√≥mo contratar nuevas personas?  Necesit√°bamos fuertes desarrolladores de aplicaciones y productos y conocimiento del sistema AWS cada vez m√°s sofisticado. </p><br><hr><br><p>  Quer√≠amos expandir nuestros equipos y al mismo tiempo preservar los principios con los que tuvimos √©xito: autonom√≠a, coordinaci√≥n m√≠nima e infraestructura de autoservicio. </p><br><p>  Con Kubernetes, logramos esto con abstracciones centradas en la aplicaci√≥n y la capacidad de mantener y configurar cl√∫steres con una coordinaci√≥n m√≠nima del equipo. </p><br><h3 id="abstrakcii-s-fokusom-na-prilozheniya">  Abstracciones centradas en la aplicaci√≥n </h3><br><p>  Los conceptos de Kubernetes son f√°ciles de combinar con el lenguaje que usa el desarrollador de la aplicaci√≥n.  Suponga que est√° administrando versiones de aplicaciones como una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">implementaci√≥n</a> .  Puede ejecutar m√∫ltiples r√©plicas detr√°s del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">servicio</a> y asignarlas a HTTP a trav√©s de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ingress</a> .  Y a trav√©s de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">los recursos del usuario,</a> puede expandir y especializar este idioma seg√∫n lo que necesite. </p><br><p>  Los equipos trabajan de manera m√°s eficiente con estas abstracciones.  B√°sicamente, este ejemplo tiene todo lo que necesita para implementar y ejecutar una aplicaci√≥n web.  El resto es Kubernetes. </p><br><p>  En la imagen con el iceberg, estos conceptos est√°n al nivel del agua y combinan las tareas del desarrollador desde arriba con la plataforma de abajo.  El equipo de administraci√≥n del cl√∫ster puede tomar decisiones de bajo nivel e insignificantes (sobre la administraci√≥n de m√©tricas, el registro, etc.) y al mismo tiempo hablar el mismo idioma con los desarrolladores por encima del agua. </p><br><p>  En 2010, uSwitch ten√≠a equipos tradicionales para dar servicio a un sistema monol√≠tico, y m√°s recientemente ten√≠amos un departamento de TI que administraba parcialmente nuestra cuenta de AWS.  Me parece que la falta de conceptos comunes obstaculiz√≥ seriamente el trabajo de este equipo. </p><br><p>  Intente decir algo √∫til si solo tiene instancias EC2 en su vocabulario, equilibradores de carga y subredes.  Fue dif√≠cil o incluso imposible describir la esencia de la aplicaci√≥n.  Podr√≠a ser un paquete Debian, implementaci√≥n a trav√©s de Capistrano, etc.  No pudimos describir la aplicaci√≥n en un lenguaje com√∫n para todos. </p><br><p>  A principios de la d√©cada de 2000, trabaj√© en ThoughtWorks en Londres.  En la entrevista, me aconsejaron leer el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dise√±o orientado a problemas de</a> Eric Evans.  Compr√© un libro camino a casa y comenc√© a leer en el tren.  Desde entonces, la recuerdo en casi todos los proyectos y sistemas. </p><br><p>  Uno de los conceptos principales del libro es un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">idioma √∫nico</a> en el que se comunican los diferentes equipos.  Kubernetes solo proporciona un lenguaje unificado para desarrolladores y equipos de mantenimiento de infraestructura, y esta es una de sus principales ventajas.  Adem√°s, se puede ampliar y complementar con otras √°reas tem√°ticas y l√≠neas de negocio. </p><br><p>  La comunicaci√≥n en un lenguaje com√∫n es m√°s productiva, pero a√∫n as√≠ debemos limitar la interacci√≥n entre los equipos tanto como sea posible. </p><br><h3 id="neobhodimyy-minimum-vzaimodeystviya">  M√≠nimo necesario de interacci√≥n </h3><br><p>  Los autores de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Accelerate</a> destacan las caracter√≠sticas de una arquitectura d√©bilmente acoplada con la cual los equipos de TI trabajan de manera m√°s eficiente: </p><br><blockquote>  En 2017, el √©xito de la entrega continua depend√≠a de si el equipo pod√≠a: <br>  Cambie seriamente la estructura de su sistema sin el permiso de la administraci√≥n. <br>  Cambie seriamente la estructura de su sistema, sin esperar a que otros equipos cambien la suya, y sin crear mucho trabajo innecesario para otros equipos. <br>  Realice sus tareas sin comunicar o coordinar su trabajo con otros equipos. <br>  Implemente y publique un producto o servicio a pedido, independientemente de otros servicios asociados con √©l. <br>  Realice la mayor√≠a de las pruebas a pedido, sin un entorno de prueba integrado. </blockquote><p>  Necesit√°bamos software centralizado de cl√∫steres de m√∫ltiples inquilinos para todos los equipos, pero al mismo tiempo quer√≠amos mantener estas caracter√≠sticas.  Todav√≠a no hemos alcanzado el ideal, pero estamos haciendo lo mejor que podemos: </p><br><ul><li>  Tenemos varios grupos de trabajo y los equipos mismos eligen d√≥nde ejecutar la aplicaci√≥n.  Todav√≠a no usamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">federaci√≥n</a> (estamos esperando el soporte de AWS), pero tenemos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Envoy</a> para balanceo de carga en balanceadores de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ingress</a> en diferentes grupos.  Automatizamos la mayor√≠a de estas tareas utilizando la tuber√≠a de entrega continua (tenemos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Drone</a> ) y otros servicios de AWS. </li><li>  Todos los cl√∫steres tienen el mismo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">espacio de nombres</a> .  Aproximadamente uno para cada equipo. </li><li>  Controlamos el acceso a los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">espacios</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nombres a</a> trav√©s de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">RBAC</a> (control de acceso basado en roles).  Para autenticaci√≥n y autorizaci√≥n, utilizamos identidad corporativa en Active Directory. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Los cl√∫steres se escalan autom√°ticamente</a> y hacemos todo lo posible para optimizar el tiempo de inicio del nodo.  Todav√≠a lleva un par de minutos, pero, en general, incluso con grandes cargas de trabajo, lo hacemos sin coordinaci√≥n. </li><li>  Las aplicaciones se escalan autom√°ticamente seg√∫n las m√©tricas de nivel de aplicaci√≥n de Prometheus.  Los equipos de desarrollo controlan la escala autom√°tica de su aplicaci√≥n mediante m√©tricas de consulta por segundo, operaciones por segundo, etc. Gracias a la escala autom√°tica del cl√∫ster, el sistema prepara los nodos cuando la demanda excede las capacidades del cl√∫ster actual. </li><li>  Escribimos Go con una herramienta de l√≠nea de comandos llamada <strong>u</strong> que estandariza la autenticaci√≥n de comandos en Kubernetes, usa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Vault</a> , solicita credenciales temporales de AWS, etc. </li></ul><br><p><img src="https://habrastorage.org/webt/oy/qv/bm/oyqvbm7x1orfe2kpjxubpis6r60.png"></p><br><p>  No estoy seguro de que con Kubernetes tengamos m√°s autonom√≠a, pero definitivamente se mantuvo en un nivel alto, y al mismo tiempo nos deshicimos de algunos problemas. </p><br><hr><br><p>  Cambiar a Kubernetes fue r√°pido.  El diagrama muestra el n√∫mero total <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de espacios de nombres</a> (aproximadamente igual al n√∫mero de comandos) en nuestros grupos de trabajo.  El primero apareci√≥ en febrero de 2017. </p><br><p><img src="https://habrastorage.org/webt/ux/y_/q_/uxy_q_hravmwkjhead1bgzkspz4.png"></p><br><p>  Ten√≠amos razones para apurarnos: quer√≠amos salvar a los peque√±os equipos centrados en su producto de las preocupaciones sobre la infraestructura. </p><br><p>  El primer equipo acord√≥ cambiar a Kubernetes cuando su servidor de aplicaciones se qued√≥ sin espacio debido a la configuraci√≥n incorrecta de la rotaci√≥n de registros.  La transici√≥n tom√≥ solo unos d√≠as, y nuevamente se pusieron manos a la obra. </p><br><p>  Recientemente, los equipos se han cambiado a Kubetnetes para mejorar las herramientas.  Los cl√∫steres de Kubernetes simplifican la integraci√≥n con nuestra <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">B√≥veda de Hashicorp</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Google Cloud Trace</a> y herramientas similares.  <em>Todos</em> nuestros equipos obtienen caracter√≠sticas a√∫n m√°s efectivas. </p><br><hr><br><p>  Ya mostr√© una tabla con percentiles de la cantidad de servicios que nuestros empleados usaron todas las semanas desde finales de 2014 hasta 2017.  Y aqu√≠ hay una continuaci√≥n de este diagrama hasta el d√≠a de hoy. </p><br><p><img src="https://habrastorage.org/webt/o7/fa/mu/o7famum8vaa0uuuw5e2ynah0-ay.png"></p><br><p>  Hemos avanzado en la gesti√≥n del complejo marco de AWS.  Me alegra que ahora la mitad de los empleados est√©n haciendo lo mismo que a principios de 2015.  Tenemos entre 4 y 6 empleados en el equipo de computaci√≥n en la nube, alrededor del 10% del n√∫mero total; no es sorprendente que el percentil 90 casi no se moviera.  Pero espero progreso aqu√≠ tambi√©n. </p><br><p>  Finalmente, hablar√© sobre c√≥mo ha cambiado nuestro ciclo de desarrollo, y nuevamente recordar√© el libro de Aceleraci√≥n recientemente le√≠do. </p><br><p>  El libro menciona dos m√©tricas de desarrollo esbelto: tiempo de entrega y tama√±o del paquete.  El tiempo de entrega se considera desde la solicitud hasta la entrega de la soluci√≥n final.  El tama√±o del paquete es la cantidad de trabajo.  Cuanto m√°s peque√±o es el tama√±o del paquete, m√°s eficiente es el trabajo: </p><br><blockquote>  Cuanto m√°s peque√±o es el paquete, m√°s corto es el ciclo de producci√≥n, menos variabilidad del proceso, menos riesgos, costos y costos, recibimos comentarios m√°s r√°pidamente, trabajamos de manera m√°s eficiente, tenemos m√°s motivaci√≥n, intentamos terminar m√°s r√°pido y posponer la entrega con menos frecuencia. </blockquote><p>  El libro sugiere medir el tama√±o de los paquetes seg√∫n la frecuencia de implementaci√≥n: cuanto m√°s a menudo es la implementaci√≥n, m√°s peque√±os son los paquetes. </p><br><p>  Tenemos datos para <em>algunas</em> implementaciones.  Los datos no son del todo precisos: algunos equipos env√≠an comunicados directamente a la rama principal del repositorio, algunos usan otros mecanismos.  Esto no incluye todas las aplicaciones, pero los datos de 12 meses pueden considerarse indicativos. </p><br><p><img src="https://habrastorage.org/webt/dt/vt/53/dtvt53s-2o7-w9rs-7qx6dhnydc.png"></p><br><p>  El fracaso en la trig√©sima semana es Navidad.  Por lo dem√°s, vemos que la frecuencia de implementaci√≥n aumenta, lo que significa que el tama√±o del paquete disminuye.  De marzo a mayo de 2018, la frecuencia de los lanzamientos casi se duplic√≥, y recientemente a veces hacemos m√°s de cien n√∫meros por d√≠a. </p><br><p>  Cambiar a Kubernetes es solo una parte de nuestra estrategia para estandarizar, automatizar y mejorar las herramientas.  Lo m√°s probable es que todos estos factores influyeron en la frecuencia de las emisiones. </p><br><p>  Accelerate tambi√©n habla sobre la relaci√≥n entre la frecuencia de implementaci√≥n y el n√∫mero de empleados, y qu√© tan r√°pido puede trabajar una compa√±√≠a si se aumenta el personal.  Los autores enfatizan las limitaciones de la arquitectura y los equipos relacionados: </p><br><blockquote>  Tradicionalmente se cree que expandir un equipo aumenta la productividad general, pero disminuye la productividad del desarrollador individual. </blockquote><p>  Si tomamos los mismos datos sobre la frecuencia de las implementaciones y hacemos un diagrama de la dependencia de la cantidad de usuarios, vemos que podemos aumentar la frecuencia de los lanzamientos, incluso si tenemos m√°s personas. </p><br><p><img src="https://habrastorage.org/webt/xc/ti/xf/xctixfjqbqgkbdooamerhtg3d_e.png"></p><br><p>  Al comienzo del art√≠culo, mencion√© el libro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Factfulness</a> (que inspir√≥ nuestro CTO).  La transici√≥n a Kubernetes se ha convertido para nuestros desarrolladores en la convergencia tecnol√≥gica m√°s significativa y r√°pida.  Nos movemos en peque√±os pasos, y es f√°cil no notar cu√°nto ha cambiado todo para mejor.  Es bueno que tengamos datos, y demuestran que hemos logrado lo que queremos: nuestra gente est√° comprometida con su producto y toma decisiones importantes en su campo. </p><br><p>  Sol√≠a ‚Äã‚Äãser bueno para nosotros.  Ten√≠amos microservicios, AWS, equipos bien establecidos para productos, desarrolladores responsables de sus servicios en producci√≥n, equipos y arquitectura d√©bilmente acoplados.  Habl√© sobre esto en el informe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Nuestra era de la iluminaci√≥n"</a> ("Nuestra era de la iluminaci√≥n") en una conferencia en 2012.  Pero no hay l√≠mite para la perfecci√≥n. </p><br><p>  Al final, quiero citar otro libro: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Escala</a> .  Lo comenc√© recientemente, y hay un fragmento interesante sobre el consumo de energ√≠a en sistemas complejos: </p><br><blockquote>  Para mantener el orden y la estructura en un sistema en desarrollo, se necesita un flujo constante de energ√≠a y se crea desorden.  Por lo tanto, para mantener la vida, debemos comer todo el tiempo para vencer la inevitable entrop√≠a. <br>  Luchamos contra la entrop√≠a mediante el suministro de m√°s energ√≠a para el crecimiento, la innovaci√≥n, el mantenimiento y la reparaci√≥n, que se vuelve m√°s dif√≠cil a medida que el sistema envejece, y esta batalla es la base de cualquier discusi√≥n seria sobre el envejecimiento, la mortalidad, la sostenibilidad y la autosuficiencia de cualquier sistema, ya sea un organismo vivo. , empresa o sociedad. </blockquote><p>  Creo que puede agregar sistemas de TI aqu√≠.  Espero que nuestros √∫ltimos esfuerzos mantengan la entrop√≠a incluso por un tiempo. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es427441/">https://habr.com/ru/post/es427441/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es427431/index.html">C√≥mo funciona Android, parte 4</a></li>
<li><a href="../es427433/index.html">Balanceo de tr√°fico en las redes IP del operador</a></li>
<li><a href="../es427435/index.html">STM32H7 - configuraci√≥n del reloj sin HAL</a></li>
<li><a href="../es427437/index.html">Configuraci√≥n de servidores vinculados: servidor ms sql y teradata</a></li>
<li><a href="../es427439/index.html">Toda la verdad sobre RTOS. Art√≠culo # 16. Se√±ales</a></li>
<li><a href="../es427443/index.html">Vivisecci√≥n del √©xito.</a></li>
<li><a href="../es427447/index.html">PVS-Studio incluye soporte para GNU Arm Embedded Toolchain</a></li>
<li><a href="../es427449/index.html">C√≥mo entender Tensorflow y no morir, e incluso ense√±ar algo sobre un autom√≥vil</a></li>
<li><a href="../es427451/index.html">Conecte las tareas de phpStorm a Bitrix24</a></li>
<li><a href="../es427453/index.html">C√≥mo hice la transmisi√≥n de sonido en la Raspberry Pi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>