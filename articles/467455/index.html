<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï∑Ô∏è ‚õπüèº üîô Plantilla QBS para programar microcontroladores en QtCreator usando el ejemplo de los controladores Milander üèÜ ü§§ ‚ÜîÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No hace mucho tiempo, ayud√≥ con el desarrollo de microcontroladores de una compa√±√≠a poco conocida: Milander. El entorno de desarrollo oficial de Keil....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Plantilla QBS para programar microcontroladores en QtCreator usando el ejemplo de los controladores Milander</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467455/">  No hace mucho tiempo, ayud√≥ con el desarrollo de microcontroladores de una compa√±√≠a poco conocida: Milander.  El entorno de desarrollo oficial de Keil.  No me gust√≥, pero el procesador se basa en la arquitectura de otra compa√±√≠a ARM poco conocida, lo que significa que hay un compilador gcc para √©l.  Y donde hay gcc, QtCreator tambi√©n se puede usar como IDE. <br><br><img alt="Las cajas de cer√°mica de metal son hermosas" src="https://habrastorage.org/webt/el/xq/74/elxq743z2r7bl4v7-fcntkey_28.png"><br><a name="habracut"></a><br><h3>  Introduccion </h3><br>  Inicialmente, la tarea era bastante simple.  Encuentra los archivos que necesitas para construir el proyecto.  Tome un proyecto ya realizado bajo stm32f407 y proceselo con un archivo.  Sin embargo, durante la implementaci√≥n de un plan tan simple, hubo un deseo de hacer un proyecto un poco m√°s interesante de lo que se pensaba originalmente. <br><br><h3>  Preparaci√≥n </h3><br>  Primero debe descargar el compilador y el depurador para microcontroladores basados ‚Äã‚Äãen los n√∫cleos de la serie Cortex-M.  La √∫ltima versi√≥n est√° aqu√≠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[1]</a> .  Tambi√©n necesitar√° QtCreator, los no perezosos pueden compilar desde la fuente, los perezosos pueden llegar aqu√≠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[2]</a> .  Tambi√©n necesitamos openocd para flashear y depurar el microcontrolador.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[3]</a> Compilador GCC para Cortex-M en el sitio ARM <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[9]</a> <br><br>  Instale el software especificado, as√≠ como todas las dependencias seg√∫n sea necesario.  Luego procedemos a configurar el entorno. <br><br><div class="spoiler">  <b class="spoiler_title">Configuraci√≥n de QtCreator'a en im√°genes</b> <div class="spoiler_text">  Si no est√° habilitado, habilite el soporte b√°sico en Ayuda -&gt; Acerca de los m√≥dulos <br>  Agregar compiladores <br><br>  g ++ <br><br><img src="https://habrastorage.org/webt/vn/vb/yb/vnvbybvdfgsw14uwvfi5uvbakpk.png"><br><br>  gcc <br><br><img src="https://habrastorage.org/webt/ev/og/y9/evogy9s8q0huptyocb8mw0ma5fc.png"><br><br>  Agregar depurador gdb <br><br><img src="https://habrastorage.org/webt/df/ib/un/dfibunh8vhliggxza0r2ynmfi2g.png"><br><br>  Creamos un perfil de depuraci√≥n abierto, esto <s>no</s> es <s>una</s> gran muleta.  La ruta al archivo de configuraci√≥n debe especificarse como absoluta.  El archivo para cada microcontrolador es diferente, esto presenta ciertos inconvenientes. <br><br><img src="https://habrastorage.org/webt/-k/a-/s7/-ka-s72tf4nxvvwozzs_rikqi14.png"><br><br>  Ajuste de metal desnudo <br><br><img src="https://habrastorage.org/webt/s_/ev/uz/s_evuzqmckfqm0ohyivdz3szecc.png"><br><br>  Y ponlo todo en un conjunto <br><br><img src="https://habrastorage.org/webt/10/vl/1a/10vl1amni2mqskr4uzo-dlj6pgu.png"><br></div></div><br><h3>  Bibliotecas de microcontroladores </h3><br>  Una b√∫squeda r√°pida en el sitio de Milander no produjo un conjunto oficial de bibliotecas para trabajar con perif√©ricos y el n√∫cleo del microcontrolador.  El conjunto admite gcc y est√° ubicado en el github <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[4]</a> .  El ensamblaje fue al proyecto terminado para stm32f407 con bastante facilidad, y despu√©s de arreglarlo en un par de lugares, ya estaba ansioso por flashear el microcontrolador.  Editando el archivo de configuraci√≥n de openocd y ahora todo est√° parpadeando.  Un poco m√°s de cerrajer√≠a y depuraci√≥n ya est√° funcionando.  Y parece que eso es todo: una victoria f√°cil.  Pero las bibliotecas admiten varios microcontroladores.  Y los microcontroladores en diferentes n√∫cleos tambi√©n usan diferentes bibliotecas perif√©ricas.  Inmediatamente surgi√≥ la idea de hacer un proyecto para que pueda seleccionar f√°cilmente el microcontrolador deseado, y el entorno mismo seleccionar√° las bibliotecas y perif√©ricos centrales necesarios.  Esta idea se me ocurri√≥ cuando domin√© stm32f407.  La oportunidad de realizar una idea tan interesante no pod√≠a dejar pasar. <br><br>  Un par de noches recogiendo en bibliotecas y qbs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[5]</a> dio un resultado positivo.  Fue posible configurar la compilaci√≥n para los siguientes microcontroladores: MDR1901VC1T (19011), MDR1986VE1T (1986 BE1T), MDR1986VE3 (1986 BE3), MDR1986BE4 (1986 BE4x), MDR1986VE8T (1986 BE8x), MDR1986VE9x (1986 BE).  Aunque la descripci√≥n de las bibliotecas de origen no era compatible con MDR1986VE8T, hab√≠a una parte de la biblioteca central y los archivos de la biblioteca perif√©rica.  Faltaban algunos de los archivos de encabezado que se encontraron en el repositorio ARM <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[6]</a> . <br><br><h3>  Proyecto final </h3><br>  El resultado fue una plantilla bastante modesta que le permite escribir proyectos para varios microcontroladores.  Plantilla de mentiras en github <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[7]</a> .  La biblioteca de origen ha sufrido una serie de cambios cosm√©ticos.  Aunque quer√≠a mantener la compatibilidad con el proyecto original, tuve que bifurcar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[8]</a> y perder la compatibilidad, pero esto es una tarifa por la versatilidad.  Puede descargar el proyecto de la siguiente manera. <br><br><pre><code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/WicRus/emdr1986x-std-per-lib-qbs.git --recursive</code> </pre> <br>  Tambi√©n puede clonar un proyecto directamente desde QtCreator especificando la direcci√≥n del repositorio y marcando Recursivamente. <br><br><h3>  La cr√≠a </h3><br>  El resultado principal es una plantilla universal con soporte para varios microcontroladores con varias bibliotecas centrales y perif√©ricas.  Sin embargo, hubo una serie de puntos que deben tenerse en cuenta: <br><br><ul><li>  Fue posible verificar el firmware y la depuraci√≥n solo en MDR1986VE1T. </li><li>  Los archivos de configuraci√≥n de openocd de destino se encontraron solo para MDR1986VE1T y MDR1986VE9x.  Para el resto de los controladores, debe tomar o escribir en alg√∫n lugar usted mismo. </li><li>  Las bibliotecas para el MDR1986VE8T se compilaron sin mucha comprensi√≥n del problema.  Es necesario verificar el correcto funcionamiento. </li><li>  Las bibliotecas de origen han cambiado significativamente.  Posibles problemas de fusi√≥n. </li><li>  Al compilar para MDR1901VC1T, MDR1986BE4, MDR1986VE9x, se emite una advertencia sobre las bibliotecas de kernel obsoletas.  Es necesario actualizar las bibliotecas del n√∫cleo por analog√≠a con MDR1986VE8T, y luego verificar el funcionamiento correcto. </li><li>  Caracter√≠stica de crear la configuraci√≥n de openocd.  Para cada tipo individual de microcontrolador, es posible que necesite un kit de construcci√≥n separado en QtCreator. </li></ul><br>  <b>Referencias</b> <br><br>  Precauci√≥n, los enlaces se abren en esta ventana. <br><br><a name="L0"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">0. La base para el sitio de KDPV Milander</a> <br><a name="L1"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">1. https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads</a> <br><a name="L2"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2. https://www.qt.io/download-qt-installer</a> <br><a name="L3"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">3. http://openocd.org</a> <br><a name="L4"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">4. https://github.com/eldarkg/emdr1986x-std-per-lib</a> <br><a name="L5"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">5. https://doc.qt.io/qbs/</a> <br><a name="L6"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">6. https://github.com/ARM-software/CMSIS_5</a> <br><a name="L7"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">7. https://github.com/WicRus/emdr1986x-std-per-lib-qbs</a> <br><a name="L8"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">8. https://github.com/WicRus/emdr1986x-std-per-lib</a> <br><a name="L9"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">9. https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads</a> <br><div class="spoiler">  <b class="spoiler_title">Historia de ediciones.</b> <div class="spoiler_text">  17/09/19 Se agreg√≥ un enlace a GNU Arm Embedded Toolchain. <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/467455/">https://habr.com/ru/post/467455/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../467439/index.html">¬øPor qu√© regres√≥ el vinilo y c√≥mo se relacionan los servicios de transmisi√≥n con esto?</a></li>
<li><a href="../467443/index.html">Centro Multimedia "Kodi" y Proyecto Yocto</a></li>
<li><a href="../467445/index.html">Lista evasiva de actualizaciones de Windows instaladas</a></li>
<li><a href="../467449/index.html">Detecci√≥n de vulnerabilidades y evaluaci√≥n de resistencia a ataques de piratas inform√°ticos de tarjetas inteligentes y procesadores criptogr√°ficos con protecci√≥n incorporada</a></li>
<li><a href="../467453/index.html">Resolviendo el problema del n√∫mero 42 usando una supercomputadora planetaria</a></li>
<li><a href="../467457/index.html">El camino desde la cirug√≠a hasta el desarrollo de juegos o la primera experiencia de desarrollo m√≥vil en Unity</a></li>
<li><a href="../467459/index.html">C√≥mo un microcontrolador puede leer datos a 1.6 Gbps</a></li>
<li><a href="../467461/index.html">RubyRussia 2019. Julian Pokrovsky: c√≥mo optimizar un monolito</a></li>
<li><a href="../467463/index.html">Solo divisi√≥n, o c√≥mo crear una teor√≠a matem√°tica y ganar $ 400K con ella. Serie tres, final</a></li>
<li><a href="../467465/index.html">¬øLa nube salvar√° los tel√©fonos inteligentes con un presupuesto ultrabajo?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>