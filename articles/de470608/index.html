<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙏🏻 ⏪ 🧝🏽 Unity UI-Optimierung 🕙 👨🏻‍💼 🔤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel beschreibt die Optimierung von UI-Elementen von Projekten, die in Unity erstellt wurden. Basierend auf Informationen aus der offizielle...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Unity UI-Optimierung</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/470608/"><p><img src="https://habrastorage.org/webt/zc/iw/5s/zciw5sbh_cn-pp5gmmxwu5rznm0.png" alt="Bild"></p><br><p>  Dieser Artikel beschreibt die Optimierung von UI-Elementen von Projekten, die in Unity erstellt wurden.  Basierend auf Informationen aus der offiziellen Dokumentation und persönlichen Erfahrungen habe ich versucht, die Funktionsprinzipien von UI-Elementen klar zu erklären.  Auch hier finden Sie praktische Tipps, mit denen Sie die Leistung Ihres Projekts in Bezug auf die Benutzeroberfläche verbessern können. </p><a name="habracut"></a><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Terminologie</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einführung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rendering der Unity-Benutzeroberfläche</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Neugestaltung der Benutzeroberfläche</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vernetzung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Allgemeine Tipps zur Optimierung der Benutzeroberfläche</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Arbeiten Sie mit Text und dessen Optimierung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sprite-Atlanten</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fassen Sie die Optimierungsmethoden zusammen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quellen</a> </li></ul><br><h3 id="anchorthermsanchorterminologiya"><a name="therms"></a>  Terminologie </h3><br><p> <strong>UI-Elemente</strong> sind alle Elemente in Unity, die sich auf das Erstellen einer Benutzeroberfläche beziehen.  Dies umfasst zum Beispiel: Schaltfläche, Text, Bild, Dropdown-Menü usw. <br>  <strong>Canvas (Canvas)</strong> - das Grundelement der Benutzeroberfläche, das ein Container für den Rest der Elemente ist. <br>  <strong>Mesh</strong> - eine Reihe von Parametern, die ein 3D-Modell beschreiben. <br>  <strong>Ein Quad</strong> ist ein Netz, das ein Viereck ist. <br>  <strong>Stapeln</strong> - Kombinieren von <strong>Objektnetzen</strong> zu einem großen Netz für ein schnelleres Rendern. <br>  <strong>Draw-Call</strong> - Ein Befehl zum Zeichnen von der Engine zur Grafik-API (z. B. OpenGL oder Direct3D). <br>  <strong>Transparente Warteschlange</strong> - Eine Warteschlange zum Rendern transparenter Objekte. <br>  <strong>Alpha-Blending</strong> (Alpha-Blending) - Ein Algorithmus zum Mischen von Pixeln auf dem Alpha-Kanal, um ein Bild mit Transparenz zu erhalten. <br>  <strong>Atlas</strong> ist eine Art Ressource, die mehrere Texturen zu einer kombiniert. </p><br><h3 id="anchorenteranchorvvodnaya"><a name="enter"></a>  Einführung </h3><br><p>  Bei der UI-Optimierung gibt es keine universellen Regeln, die in jeder Situation funktionieren.  Es kommt darauf an, ein Gleichgewicht zwischen den Chargenkosten und der Anzahl der Draw Calls zu finden.  Es können vier Hauptprobleme unterschieden werden: </p><br><ul><li>  GPU-Last zu hoch (Überlast auf dem Render); </li><li>  zu viel CPU-Last beim Neuerstellen der Zeichenfläche; </li><li>  zu viele sich ändernde Elemente, die zum Wiederaufbau der Leinwand führen; </li><li>  Die CPU-Auslastung ist für die Netzgenerierung zu groß (normalerweise mit Text verbunden). </li></ul><br><h3 id="anchordrawanchorotrisovka-unity-ui"><a name="draw"></a>  Rendering der Unity-Benutzeroberfläche </h3><br><p>  Das Grundelement der Unity-Benutzeroberfläche ist die Zeichenfläche.  Er ist für das Generieren, Sortieren und Rendern von Netzen untergeordneter Schnittstellenelemente verantwortlich.  Alle UI-Elemente müssen untergeordnete Elemente einer beliebigen Leinwand sein, da sie sonst nicht im Spiel angezeigt werden. <br><img src="https://habrastorage.org/webt/_o/tl/ym/_otlymxpp3b04alh9902hx3w9fu.png" alt="Bild"><br>  Das Rendern erfolgt vom entferntesten zum am weitesten von der Kamera entfernten Objekt <strong>(von hinten nach vorne)</strong> in der <strong>transparenten Warteschlange</strong> mit Alpha-Überblendung. </p><br><p>  Unabhängig davon sollte beachtet werden, dass die Transparenz der UI-Elemente die Leistung <strong>NICHT</strong> beeinträchtigt.  Selbst wenn das Element vollständig aus „undurchsichtigen“ Pixeln besteht, wird es dennoch mithilfe der Alpha-Überblendung gerendert. </p><br><p>  Es ist auch wichtig zu verstehen, dass beim Rendern alle Pixel aller aktiven Elemente verarbeitet werden.  Es kommt nicht darauf an, ob sie sichtbar, von anderen Objekten blockiert oder sogar vollständig transparent sind. </p><br><h3 id="anchorrebuildanchorperestroenie-interfeysa-polzovatelya"><a name="rebuild"></a>  Neugestaltung der Benutzeroberfläche </h3><br><p>  Das Neugestalten der Benutzeroberfläche ist ein mehrstufiger Prozess, bei dem die Netze jedes UI-Elements erstellt und versucht werden, diese Netze zu patchen, um die Anzahl der <strong>Draw-Aufrufe</strong> zu minimieren. </p><br><p>  Der Wiederaufbau erfolgt in vier Schritten: </p><br><ol><li>  Strukturen von Elementen werden analysiert. </li><li>  Netze aller aktiven Elemente, einschließlich Elemente ohne Transparenz, werden neu erstellt. </li><li>  Erstellt Materialien zum Vernetzen von Elementnetzen neu. </li><li>  Alle Elemente werden entsprechend ihrer Reihenfolge gezeichnet. </li></ol><br><p>  Die neu erstellte Zeichenfläche wird zwischengespeichert und wiederverwendet, bis eines der Elemente in der Zeichenfläche als geändert markiert wird. <br>  <strong>Schmutzige</strong> Objekte werden markiert, die aktiviert oder deaktiviert wurden.  die Material, Position, Maßstab, Rotation geändert haben;  Der Textwert der Textkomponente hat sich geändert.  Neuzuweisung des Elternteils usw. </p><br><p>  In diesem Fall enthält die erneute Erstellung der Zeichenfläche mindestens ein geändertes Element.  Dies gilt zwar nur für die Zeichenfläche, in der sich das Element befindet.  Das heißt, Änderungen an Elementen in untergeordneten Leinwänden wirken sich nicht auf übergeordnete aus. </p><br><p>  Je mehr Elemente sich auf der Leinwand befinden, desto höher sind die Kosten für das Analysieren und Sortieren von Objekten. </p><br><h3 id="anchorbatchanchorbatching-meshey"><a name="batch"></a>  Vernetzung </h3><br><p>  Durch das Zusammenführen von Meshes oder Batching wird die Belastung der GPU verringert, indem die Anzahl der Draw-Aufrufe verringert wird.  Während des Dosiervorgangs werden die Maschen nach Tiefe sortiert und auf Überlappung überprüft.  Beim Übergang vom entfernten zum nahen Element (oder vom oberen zum unteren Element in der Hierarchie) werden Objekte mit denselben Materialien oder Texturen zu einem Netz innerhalb derselben Leinwand kombiniert.  Zu diesem Zweck sollten sich keine Objekte mit anderen Materialien dazwischen befinden.  Außerdem sollten Objekte mit anderen Materialien die gebackenen Objekte nicht mit ihren Gesamtbehältern überlappen.  Der Stapelvorgang erfolgt über mehrere Threads. Die Leistung hängt stark von der Anzahl der Kerne im Prozessor ab. </p><br><p>  Text kann mit anderem Text flattern, wenn er dieselbe Schriftart hat.  Es spielt keine Rolle, ob die Schriftarteinstellungen und -stile gleich oder unterschiedlich sind.  Wenn die Schriftarten unterschiedlich sind, wird der Text nicht gerollt. </p><br><p>  Es sollte auch berücksichtigt werden, dass Text ein Objekt mit seinem Gesamtcontainer überlappen kann und eine solche Überlappung leicht übersprungen werden kann. <br><img src="https://habrastorage.org/webt/hp/25/q6/hp25q6lnrkta2lfzglksyejea34.png" alt="Bild"></p><br><p>  Betrachten Sie ein Beispiel.  Es gibt drei Objekte A, B und C, die auf diese Weise in einer Hierarchie angeordnet sind: <br><img src="https://habrastorage.org/webt/iq/s-/7e/iqs-7ev081f2-yspnchyfhu7ejy.png" alt="Bild"><br><img src="https://habrastorage.org/webt/-x/xi/4o/-xxi4olr9aexg7rk2sic-4vntrw.png" alt="Bild"><br>  Im Bild links werden die Objekte A und C zusammengeführt, weil  haben das gleiche Material und schneiden sich nicht mit Objekt B. Im Bild rechts werden die Objekte A und C nicht kombiniert, weil  Es gibt einen Schnittpunkt mit Objekt B. </p><br><h3 id="anchorcommonanchorobschie-sovety-po-optimizacii-ui"><a name="common"></a>  Allgemeine Tipps zur Optimierung der Benutzeroberfläche </h3><br><p>  Bevor Sie mit der Optimierung beginnen, wird dringend empfohlen, die Benutzeroberfläche zu profilieren.  Dies hilft bei der Identifizierung von Engpässen, die zu Leistungseinbußen führen (falls vorhanden).  Für die Profilerstellung gibt es viele Tools, die sowohl in Unity (Unity Profiler) als auch in Tools von Drittanbietern integriert sind.  In diesem Artikel werden die Probleme der UI-Profilerstellung jedoch nicht behandelt. </p><br><p>  Hier einige Vorschläge zur Optimierung Ihrer Benutzeroberfläche in Unity: </p><br><ol><li>  Schalten Sie unsichtbare Objekte aus.  Wenn ein Element von einem undurchsichtigen Element überlappt wird, müssen Sie sein GameObject oder das übergeordnete GameObject des überlappenden Elements deaktivieren.  Gleichzeitig werden weiterhin Schnittstellenelemente mit Alpha auf 0 gezeichnet.  Für solche Objekte müssen Sie Cull Transparent Mesh in der Canvas Renderer-Komponente aktivieren oder einfach unsichtbare Objekte deaktivieren. <br><img src="https://habrastorage.org/webt/gq/mf/hb/gqmfhb92x6wbpjgs3imcclryb8m.png" alt="Bild"></li><li>  Deaktivieren Sie Weltobjekte, die von einer undurchsichtigen Oberfläche ausgeblendet werden.  Wenn die Benutzeroberfläche nicht die ganze Welt abdeckt, können Sie sie in der Render-Textur speichern und die Weltkamera ausschalten. </li><li>  Minimieren Sie die Anzahl der zu zeichnenden Pixel.  Kombinieren Sie so viele Bilder wie möglich zu einem.  Zum Beispiel ist es sinnvoll, die Schaltflächen zu einem einzelnen Sprite zu machen, anstatt Ebenen mit Hintergrund, Strich, Schaltflächenkörper usw. zu trennen.  Dies verringert die Flexibilität bei der Arbeit mit solchen Elementen und kann zu einer Verstopfung der Ressourcen führen. Daher muss ein Kompromiss angestrebt werden. <br><img src="https://habrastorage.org/webt/sh/o8/q-/sho8q-hlftycczgnzevncmx1hoa.png" alt="Bild"></li><li>  Vermeiden Sie leere Elemente, die nur zur Organisation der Struktur dienen (verwenden Sie keine Elemente als Namen von „Ordnern“ in der Dokumenthierarchie). </li><li>  Vermeiden Sie es, Gegenstände zu kreuzen, die nicht miteinander backen können.  Wenn möglich, ändern Sie am besten die Position in der Hierarchie, die Größe des Containers oder die Position überlappender und nicht zusammenbackender Elemente. </li><li>  Verwenden Sie für dynamische Elemente eine separate oder verschachtelte Zeichenfläche.  So minimieren Sie die Kosten für das Sortieren und Wiederherstellen der Struktur der Zeichenfläche, die eine große Anzahl von Elementen enthält.  Verschachtelte Leinwände sind bequemer, weil  erben die Einstellungen der übergeordneten Zeichenfläche.  Gleichzeitig werden beim Ändern der übergeordneten Zeichenfläche auch alle verschachtelten Bereiche neu erstellt.  Dies ist ziemlich selten, aber es passiert (zum Beispiel beim Ändern der Bildschirmauflösung).  Beachten Sie, dass Objekte aus verschiedenen Leinwänden oder verschachtelten Leinwänden NICHT für das gemeinsame Rendern gebacken werden.  Es wird empfohlen, die Leinwände nach der Regelmäßigkeit der Aktualisierung der Elemente zu unterteilen.  Statische Elemente müssen auf einer separaten Leinwand platziert werden, dann werden sie nur einmal gezeichnet.  Wenn es Elemente gibt, die sich ständig ändern, ist es besser, sie auf einer anderen Leinwand zu kombinieren, weil  Sie werden sich immer noch gegenseitig wieder aufbauen.  Das Ändern von Objekten kann durch die Aktualisierungsrate auch in mehrere Leinwände unterteilt werden.  Beispielsweise werden Elemente, die in jedem Frame aktualisiert wurden, in eine Zeichenfläche eingefügt, und Elemente, die in einem anderen weniger häufig aktualisiert werden. </li><li>  Durch Deaktivieren von Pixel Perfect wird die Produktivität erheblich gesteigert.  Dies gilt insbesondere für ständig aktualisierte Objekte mit einer großen Anzahl von Elementen (z. B. Bildlaufinventar). <br><img src="https://habrastorage.org/webt/0d/zg/xi/0dzgxi_azqoacbfsdarrgr7nejo.png" alt="Bild"><br>  Die Leinwand <br><img src="https://habrastorage.org/webt/jv/qt/31/jvqt315ookagmhaiftexsaguz0g.png" alt="Bild"><br>  Verschachtelte Leinwand </li><li>  Wenn Sie die <strong>Zeichenfläche</strong> deaktivieren müssen, deaktivieren Sie das Objekt, das sie enthält, nicht (über die Funktion <strong>SetActive</strong> ).  Beim nächsten Einschalten werden die Elemente dieser Zeichenfläche als geändert markiert und alle Elemente werden neu erstellt.  Es ist besser, die Canvas-Komponente selbst auszuschalten, da sich dann die gesamte Struktur und die gebackenen Daten nicht ändern. Wenn Sie die Canvas-Komponente das nächste Mal einschalten, beginnen sie einfach mit dem Zeichnen. <br><img src="https://habrastorage.org/webt/pr/qo/-s/prqo-stitn0evgzxrddr54ncqwk.png"></li><li>  Installieren Sie für Leinwände mit <strong>Bildschirmbereich - Kamera</strong> oder <strong>Weltraum,</strong> die im Parameter <strong>Rendermodus</strong> ausgewählt wurden, immer eine Kamera.  Wenn Sie es nicht installieren, durchsucht das Benutzeroberflächensystem in jedem Frame <strong>Object.FindObjectWithTag</strong> , um <strong>Camera.main</strong> zu finden. <strong>Dies</strong> <strong>wirkt sich</strong> auf die Leistung aus. </li><li>  Um nicht mehrere identische Texturen zu erstellen, können Sie eine in Graustufen erstellen und durch die Bildkomponente „malen“, indem Sie die gewünschte Farbe auswählen. <br><img src="https://habrastorage.org/webt/o7/tj/jr/o7tjjrk1hyt5a1rqbukrw-upsh0.png"></li><li>  Lassen Sie das <strong>Raycast-Ziel-</strong> Flag nur für Elemente, die Eingabeereignisse benötigen, und entfernen Sie den Rest.  Standardmäßig ist das <strong>Raycast-Ziel</strong> für viele Elemente (Bild, Text usw.) aktiviert.  Dies verkompliziert und verlangsamt die Arbeit der <strong>Raycaster-</strong> Komponente, die Eingabeereignisse in der Unity-Benutzeroberfläche verarbeitet.  Beim Klicken oder Tippen wird die gesamte Hierarchie der Elemente durchlaufen und nach allen <strong>Grafikkomponenten mit gesetztem Raycast-Ziel-</strong> Flag <strong>gesucht.</strong> Anschließend werden sie auf die Möglichkeit von Eingabeereignissen überprüft und nach erfolgreichem Bestehen der Prüfungen zur Trefferliste hinzugefügt.  Danach wird die Trefferliste nach Tiefe sortiert, Objekte außerhalb des Bildschirms werden verworfen.  Als Ergebnis gibt es die endgültige Trefferliste. <br>  In der Unity-Benutzeroberfläche haben viele Komponenten (Bild, Text usw.) das <strong>Raycast-</strong> Zielflag. </li></ol><br><p><img src="https://habrastorage.org/webt/vp/k8/ce/vpk8cecf2dr_svrostszl-hkeeo.png" alt="Bild"><br>  <strong>Raycast-Ziel</strong> auf der Bildkomponente. </p><br><p><img src="https://habrastorage.org/webt/lx/z9/3o/lxz93oxpurdfign10vwpuf8mnv0.png" alt="Bild"><br>  <strong>TextMeshPro hat</strong> es auf der Registerkarte <strong>Zusätzliche Einstellungen</strong> ausgeblendet. </p><br><p><img src="https://habrastorage.org/webt/k_/63/09/k_6309bflccv61qqzc9g_rpu3u4.png" alt="Bild"><br>  Für <strong>TextMeshPro können</strong> Sie die Standardeinstellung für das <strong>Raycast-Ziel unter</strong> <strong>Player-Einstellungen -&gt; TextMest Pro -&gt; Einstellungen -&gt; Raycast-Ziel aktivieren festlegen</strong> . </p><br><p>  Elemente werden getestet, wenn: </p><br><ul><li>  Raycast-Ziel aktiviert </li><li>  das Element selbst wird eingeschaltet und aktiviert; </li><li>  Die Einfügemarke befindet sich am Schnittpunkt mit RectTransform. </li></ul><br><p>  Es ist auch sinnvoll, das Raycast-Zielflag von untergeordneten Elementen zu entfernen, wenn das Stammobjekt es bereits hat und die untergeordneten Elemente mit seiner Geometrie vollständig überlappt.  Zum Beispiel die Standardschaltfläche der Unity-Benutzeroberfläche. </p><br><img src="https://habrastorage.org/webt/q7/6i/cz/q76iczyqwjxw6slf9ji6bgu1vqa.png"><br><p>  Das Bild überlappt den Text vollständig mit seiner Form. In diesem Fall können Sie das <strong>Raycast-Ziel</strong> aus der Textkomponente entfernen. </p><br><img src="https://habrastorage.org/webt/vf/oy/la/vfoylaklhkozlwt0dzboxd8r5vy.png"><br><p>  Wenn nicht alle Canvas-Elemente auf Eingabeereignisse warten, können Sie die <strong>Graphic Raycaster-</strong> Komponente aus dem Canvas / verschachtelten Canvas entfernen. </p><br><h3 id="anchortextanchorrabota-s-tekstom-i-ego-optimizaciya"><a name="text"></a>  Arbeiten Sie mit Text und dessen Optimierung </h3><br><p>  Der Text in der Unity-Oberfläche besteht aus Gittern, in denen jedes Symbol ein eigenes Quad erstellt.  Das Netz wird jedes Mal neu erstellt, wenn sich der Wert des Texts ändert.  Die Neuerstellung erfolgt auch, wenn die Textkomponente oder deren übergeordnetes Element aus- und wieder eingeschaltet wurde. </p><br><p>  Standardmäßig werden Schriftarten in Unity als dynamisch hinzugefügt.  Für jede dynamische Schriftart, die in der Textkomponente auf der Bühne verwendet wird, wird ein Atlas erstellt.  In diesem Atlas sind nur verwendete Zeichen enthalten.  Wenn das Textfeld beispielsweise den Text "Neuer Text" enthält, enthält der dafür erstellte Atlas die Zeichen "N", "e", "w", "T", "x" und "t".  Für jedes Zeichen, das sich in Größe oder Stil unterscheidet, wird im Atlas eine Darstellung erstellt. </p><br><img src="https://habrastorage.org/webt/ze/pw/jx/zepwjxjnaa7nk2qxvenmvt3flc4.png"><br><p>  Text auf der Bühne </p><br><img src="https://habrastorage.org/webt/d0/1j/un/d01jun9sehx1lhs6wdrfwhyfn8q.png"><br><p>  Schriftatlas </p><br><p>  Wenn sich während der Ausführung des Programms der Inhalt der Textkomponente ändert und Zeichen angezeigt werden, die nicht im Atlas enthalten sind, wird der gesamte Atlas neu erstellt.  Wenn in der Textur des Atlas freier Speicherplatz vorhanden ist, werden die erforderlichen Symbole einfach dort hinzugefügt.  Gleichzeitig werden Zeichen, die derzeit nicht verwendet werden, nicht gelöscht.  Wenn im Atlas nicht genügend Platz für neue Zeichen vorhanden ist, wird seine Größe verdoppelt und basierend auf den in den aktiven Textkomponenten verwendeten Zeichen erneut gefüllt. </p><br><p>  Wenn für ein Projekt eine genau definierte Anzahl von Zeichen festgelegt ist, z. B. nur das lateinische Alphabet, lohnt es sich, statische Schriftarten zu verwenden, die permanent im Speicher gespeichert sind.  Wenn Ihr Projekt eine große Anzahl von Zeichen zulässt, ist es besser, sich mit dynamischen Schriftarten zu befassen. <br>  Sie können die Leistung auch verbessern, indem Sie die Textkomponente durch ein Sprite ersetzen.  Zum Beispiel können die im Spiel erscheinenden Zahlen (Punktzahl) mithilfe von Sprites aus einem Atlas erstellt werden, der nur einen Satz der erforderlichen Zeichen enthält.  In diesem Fall fallen keine Kosten für die Neuerstellung der Leinwand und des Atlas der Schrift an. </p><br><p>  Die Verwendung von Fallback-Schriftarten, die in den <strong>Schriftarteneinstellungen im</strong> Feld "Schriftnamen" aufgeführt sind, erhöht den verwendeten Speicher.  Dies macht sich insbesondere bei piktografischen Schriftarten bemerkbar. </p><br><p>  Es wird nicht empfohlen, <strong>Best Fit zu verwenden</strong> , da  Diese Option führt zu einem schnellen Überlaufen des Atlas und bewirkt dessen Umstrukturierung. <br>  <strong>Die beste Anpassung</strong> ignoriert die Einstellungen für die Schriftgröße und versucht, den Text in das Umrissrechteck der Textkomponente einzupassen. </p><br><p>  Nun ein <strong>paar</strong> Worte zu <strong>TextMeshPro (TMP)</strong> , einem beliebten Ersatz für die Standard-Unity-Textkomponente.  TextMeshPro erstellt außerdem jedes Mal ein neues Raster, wenn sich der Wert des Texts ändert.  TMP-Text verwendet jedoch keine dynamischen Schriftarten.  Dafür werden im Voraus Schriftatlanten generiert, die alle notwendigen Zeichen enthalten.  Wenn für einen Text in der Szene kein Zeichen in der Schriftart vorhanden ist, die der Komponente zugewiesen ist, beginnt TMP mit der Suche in Sicherungsschriftarten.  Wenn dort nichts vorhanden ist, versucht TMP, dieses Zeichen in allen heruntergeladenen Schriftarten zu finden. </p><br><p>  <strong>Die beste Anpassung in</strong> <strong>TMP verursacht</strong> keine Probleme wie eine normale Textkomponente und kann daher verwendet werden. </p><br><p>  Eine große Anzahl von Schriftarten mit unterschiedlichen Lokalisierungen oder großen Atlanten von Schriftarten kann viel Speicherplatz beanspruchen.  Daher ist es besser, nur die für eine bestimmte Lokalisierung erforderlichen Schriftarten vorzuladen. </p><br><p>  <strong>World Space</strong> empfiehlt die Verwendung von <strong>TextMeshPro</strong> anstelle von <strong>TextMeshProUGUI</strong> . <br>  <strong>TextMeshProUGUI wird</strong> in Leinwänden verwendet. </p><br><h3 id="anchoratlasanchoratlasy-spraytov"><a name="atlas"></a>  Sprite-Atlanten </h3><br><p>  <strong>Sprite-Atlanten</strong> sind eine Art Ressource, die mehrere Texturen zu einer kombiniert.  Mit ihnen können Sie die Anzahl der Draws ( <strong>Draw Calls</strong> ) reduzieren und die Produktivität steigern. </p><br><p>  Atlas Erstellung. <br>  Erstellen Sie einen Atlas: <strong>Asset&gt; Erstellen&gt; Sprite-Atlas</strong> . <br>  Wählen Sie den Atlas aus und fügen Sie das erforderliche Sprite in <strong>Objekte zum Verpacken ein</strong> . <br><img src="https://habrastorage.org/webt/bs/dl/8n/bsdl8nc2krqqx0hj7kwdckcatzc.png" alt="Bild"><br>  Klicken Sie auf <strong>Packvorschau,</strong> um eine Vorschau des Atlas anzuzeigen. <br><img src="https://habrastorage.org/webt/z2/ct/l1/z2ctl1uykvlwq_xelfoc3gezmdc.png" alt="Bild"><br>  Beachten Sie, dass der Atlas auch dann vollständig geladen wird, wenn ein oder mehrere Sprites aus dem Atlas in der Szene verwendet werden.  Daher ist es nicht sinnvoll zu versuchen, alle Bilder in einen riesigen Atlas einzubetten, der auf Geräten mit kleinem RAM seinen greifbaren Teil übernehmen kann.  Es ist besser, in einige kleinere Atlanten zu unterbrechen, beispielsweise den Atlas der Benutzeroberfläche des Spielmenüs und den Atlas der Benutzeroberfläche des Spielmodus. </p><br><p>  Vermeiden Sie große Leerstellen im Atlas, um nicht zu viel Speicherplatz zu belegen.  Dazu können Sie die Größe des Atlas ändern oder zusätzliche Bilder hinzufügen, um den leeren Raum so weit wie möglich zu füllen. <br><img src="https://habrastorage.org/webt/vc/4n/f5/vc4nf5zljiikgjg83qau04b022q.png" alt="Bild"><br><img src="https://habrastorage.org/webt/r7/k2/w0/r7k2w0csvrfxsevgjw2nop0_zb8.png" alt="Bild"><br>  Für Bilder, die nicht im Atlas enthalten sind, müssen Sie die richtigen Einstellungen auswählen. <br>  Für jedes Komprimierungsformat gibt es Anforderungen, unter denen es effizient arbeitet.  Die häufigsten Bildanforderungen: </p><br><ul><li>  Breite und Höhe müssen ein Vielfaches der Zweierpotenz sein; </li><li>  Breite und Höhe müssen ein Vielfaches von 4 sein; </li><li>  beide vorhergehenden Absätze zusammen. <br>  Andernfalls wird die Textur nicht komprimiert und es entstehen zusätzliche Gerätespeicherkosten. </li></ul><br><p>  Bei der Auswahl eines Komprimierungsformats teilt Unity Ihnen mit, ob Anforderungen für das ausgewählte Format nicht erfüllt sind. <br><img src="https://habrastorage.org/webt/_s/tq/0c/_stq0cqnfhbnoczd2yrqm0d1iic.png" alt="Bild"></p><br><p>  Vergessen Sie auch nicht, dass sich die Formate vom Zielgerät unterscheiden.  Weitere Informationen und Empfehlungen zu Formaten finden Sie in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offiziellen Dokumentation</a> : </p><br><h3 id="anchorresumeanchorrezyumiruem-sposoby-optimizacii"><a name="resume"></a>  Fassen Sie die Optimierungsmethoden zusammen </h3><br><ul><li>  Deaktivieren Sie unsichtbare und transparente Objekte </li><li>  Minimieren Sie die Anzahl der Elemente </li><li>  Vermeiden Sie es, Gegenstände zu kreuzen, die nicht miteinander backen können </li><li>  Verteilen Sie Elemente nach Leinwand basierend auf der Aktualisierungsrate </li><li>  Deaktivieren Sie für Leinwände mit häufig aktualisierten Elementen Pixel Perfect </li><li>  Deaktivieren Sie das Raycast-Ziel für nicht anklickbare Elemente </li><li>  Entfernen Sie die Graphic Raycaster-Komponente auf der Leinwand, für die nicht alle Elemente anklickbar sind </li><li>  Verwenden Sie für normale Textkomponenten nicht Best Fit </li><li>  Verwenden Sie für TextMeshPro im Weltraum TextMeshPro anstelle von TextMeshProUGUI.  TextMeshProUGUI wird in Leinwänden verwendet </li><li>  Stellen Sie die Kamera bei Bedarf in den Canvas-Einstellungen ein </li><li>  Deaktivieren Sie die Zeichenfläche, indem Sie die Zeichenflächenkomponente deaktivieren </li><li>  Verwenden Sie Graustufen-Sprites und färben Sie die Einstellungen der Bildkomponenten ein </li><li>  Verwenden Sie Sprite-Atlanten </li><li>  Verwenden Sie die richtige Größe und das richtige Komprimierungsformat für Texturen, die nicht im Atlas enthalten sind </li></ul><br><h3 id="anchorlinksanchoristochniki"><a name="links"></a>  Quellen: </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Umfassende Informationen zur Optimierung der Unity-Benutzeroberfläche</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Eine andere offizielle Quelle zu diesem Thema enthält Informationen in einer präziseren Form.</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Atlas White Papers</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zusätzliche Informationen zu Texturkomprimierungsformaten</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de470608/">https://habr.com/ru/post/de470608/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de470594/index.html">Bericht von der Lichtshow „Circle of Light“ 2019 in Moskau</a></li>
<li><a href="../de470596/index.html">Funktionen von Q und KDB + am Beispiel eines Echtzeitdienstes</a></li>
<li><a href="../de470598/index.html">Das Buch "Modernes Java. Lambda-Ausdrücke, Streams und funktionale Programmierung “</a></li>
<li><a href="../de470600/index.html">Über sichere noVNC-Konsolen, automatische Skalierung in Kubernetes, Haproxy in Ostrovka und die Arbeit von Administratoren mit Programmierern</a></li>
<li><a href="../de470604/index.html">Geschwindigkeit beim Laden von Websites im E-Commerce: Analyse von 48 Top-Online-Shops in Russland</a></li>
<li><a href="../de470610/index.html">Ein Tag im Leben eines Entwicklers</a></li>
<li><a href="../de470612/index.html">Was ein Voltmeter zeigt, oder Mathe-Steckdosen</a></li>
<li><a href="../de470614/index.html">Wie waren die NES-Grafiken angeordnet?</a></li>
<li><a href="../de470616/index.html">Eine neue Lösung für das Fermi-Paradoxon (warum wir allein im Universum sind)</a></li>
<li><a href="../de470618/index.html">Thematische Modellierung von Nachrichten mittels Faktoranalyse</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>