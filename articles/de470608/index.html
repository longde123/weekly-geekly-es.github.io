<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôèüèª ‚è™ üßùüèΩ Unity UI-Optimierung üïô üë®üèª‚Äçüíº üî§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel beschreibt die Optimierung von UI-Elementen von Projekten, die in Unity erstellt wurden. Basierend auf Informationen aus der offizielle...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Unity UI-Optimierung</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/470608/"><p><img src="https://habrastorage.org/webt/zc/iw/5s/zciw5sbh_cn-pp5gmmxwu5rznm0.png" alt="Bild"></p><br><p>  Dieser Artikel beschreibt die Optimierung von UI-Elementen von Projekten, die in Unity erstellt wurden.  Basierend auf Informationen aus der offiziellen Dokumentation und pers√∂nlichen Erfahrungen habe ich versucht, die Funktionsprinzipien von UI-Elementen klar zu erkl√§ren.  Auch hier finden Sie praktische Tipps, mit denen Sie die Leistung Ihres Projekts in Bezug auf die Benutzeroberfl√§che verbessern k√∂nnen. </p><a name="habracut"></a><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Terminologie</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einf√ºhrung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rendering der Unity-Benutzeroberfl√§che</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Neugestaltung der Benutzeroberfl√§che</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vernetzung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Allgemeine Tipps zur Optimierung der Benutzeroberfl√§che</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Arbeiten Sie mit Text und dessen Optimierung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sprite-Atlanten</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fassen Sie die Optimierungsmethoden zusammen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quellen</a> </li></ul><br><h3 id="anchorthermsanchorterminologiya"><a name="therms"></a>  Terminologie </h3><br><p> <strong>UI-Elemente</strong> sind alle Elemente in Unity, die sich auf das Erstellen einer Benutzeroberfl√§che beziehen.  Dies umfasst zum Beispiel: Schaltfl√§che, Text, Bild, Dropdown-Men√º usw. <br>  <strong>Canvas (Canvas)</strong> - das Grundelement der Benutzeroberfl√§che, das ein Container f√ºr den Rest der Elemente ist. <br>  <strong>Mesh</strong> - eine Reihe von Parametern, die ein 3D-Modell beschreiben. <br>  <strong>Ein Quad</strong> ist ein Netz, das ein Viereck ist. <br>  <strong>Stapeln</strong> - Kombinieren von <strong>Objektnetzen</strong> zu einem gro√üen Netz f√ºr ein schnelleres Rendern. <br>  <strong>Draw-Call</strong> - Ein Befehl zum Zeichnen von der Engine zur Grafik-API (z. B. OpenGL oder Direct3D). <br>  <strong>Transparente Warteschlange</strong> - Eine Warteschlange zum Rendern transparenter Objekte. <br>  <strong>Alpha-Blending</strong> (Alpha-Blending) - Ein Algorithmus zum Mischen von Pixeln auf dem Alpha-Kanal, um ein Bild mit Transparenz zu erhalten. <br>  <strong>Atlas</strong> ist eine Art Ressource, die mehrere Texturen zu einer kombiniert. </p><br><h3 id="anchorenteranchorvvodnaya"><a name="enter"></a>  Einf√ºhrung </h3><br><p>  Bei der UI-Optimierung gibt es keine universellen Regeln, die in jeder Situation funktionieren.  Es kommt darauf an, ein Gleichgewicht zwischen den Chargenkosten und der Anzahl der Draw Calls zu finden.  Es k√∂nnen vier Hauptprobleme unterschieden werden: </p><br><ul><li>  GPU-Last zu hoch (√úberlast auf dem Render); </li><li>  zu viel CPU-Last beim Neuerstellen der Zeichenfl√§che; </li><li>  zu viele sich √§ndernde Elemente, die zum Wiederaufbau der Leinwand f√ºhren; </li><li>  Die CPU-Auslastung ist f√ºr die Netzgenerierung zu gro√ü (normalerweise mit Text verbunden). </li></ul><br><h3 id="anchordrawanchorotrisovka-unity-ui"><a name="draw"></a>  Rendering der Unity-Benutzeroberfl√§che </h3><br><p>  Das Grundelement der Unity-Benutzeroberfl√§che ist die Zeichenfl√§che.  Er ist f√ºr das Generieren, Sortieren und Rendern von Netzen untergeordneter Schnittstellenelemente verantwortlich.  Alle UI-Elemente m√ºssen untergeordnete Elemente einer beliebigen Leinwand sein, da sie sonst nicht im Spiel angezeigt werden. <br><img src="https://habrastorage.org/webt/_o/tl/ym/_otlymxpp3b04alh9902hx3w9fu.png" alt="Bild"><br>  Das Rendern erfolgt vom entferntesten zum am weitesten von der Kamera entfernten Objekt <strong>(von hinten nach vorne)</strong> in der <strong>transparenten Warteschlange</strong> mit Alpha-√úberblendung. </p><br><p>  Unabh√§ngig davon sollte beachtet werden, dass die Transparenz der UI-Elemente die Leistung <strong>NICHT</strong> beeintr√§chtigt.  Selbst wenn das Element vollst√§ndig aus ‚Äûundurchsichtigen‚Äú Pixeln besteht, wird es dennoch mithilfe der Alpha-√úberblendung gerendert. </p><br><p>  Es ist auch wichtig zu verstehen, dass beim Rendern alle Pixel aller aktiven Elemente verarbeitet werden.  Es kommt nicht darauf an, ob sie sichtbar, von anderen Objekten blockiert oder sogar vollst√§ndig transparent sind. </p><br><h3 id="anchorrebuildanchorperestroenie-interfeysa-polzovatelya"><a name="rebuild"></a>  Neugestaltung der Benutzeroberfl√§che </h3><br><p>  Das Neugestalten der Benutzeroberfl√§che ist ein mehrstufiger Prozess, bei dem die Netze jedes UI-Elements erstellt und versucht werden, diese Netze zu patchen, um die Anzahl der <strong>Draw-Aufrufe</strong> zu minimieren. </p><br><p>  Der Wiederaufbau erfolgt in vier Schritten: </p><br><ol><li>  Strukturen von Elementen werden analysiert. </li><li>  Netze aller aktiven Elemente, einschlie√ülich Elemente ohne Transparenz, werden neu erstellt. </li><li>  Erstellt Materialien zum Vernetzen von Elementnetzen neu. </li><li>  Alle Elemente werden entsprechend ihrer Reihenfolge gezeichnet. </li></ol><br><p>  Die neu erstellte Zeichenfl√§che wird zwischengespeichert und wiederverwendet, bis eines der Elemente in der Zeichenfl√§che als ge√§ndert markiert wird. <br>  <strong>Schmutzige</strong> Objekte werden markiert, die aktiviert oder deaktiviert wurden.  die Material, Position, Ma√üstab, Rotation ge√§ndert haben;  Der Textwert der Textkomponente hat sich ge√§ndert.  Neuzuweisung des Elternteils usw. </p><br><p>  In diesem Fall enth√§lt die erneute Erstellung der Zeichenfl√§che mindestens ein ge√§ndertes Element.  Dies gilt zwar nur f√ºr die Zeichenfl√§che, in der sich das Element befindet.  Das hei√üt, √Ñnderungen an Elementen in untergeordneten Leinw√§nden wirken sich nicht auf √ºbergeordnete aus. </p><br><p>  Je mehr Elemente sich auf der Leinwand befinden, desto h√∂her sind die Kosten f√ºr das Analysieren und Sortieren von Objekten. </p><br><h3 id="anchorbatchanchorbatching-meshey"><a name="batch"></a>  Vernetzung </h3><br><p>  Durch das Zusammenf√ºhren von Meshes oder Batching wird die Belastung der GPU verringert, indem die Anzahl der Draw-Aufrufe verringert wird.  W√§hrend des Dosiervorgangs werden die Maschen nach Tiefe sortiert und auf √úberlappung √ºberpr√ºft.  Beim √úbergang vom entfernten zum nahen Element (oder vom oberen zum unteren Element in der Hierarchie) werden Objekte mit denselben Materialien oder Texturen zu einem Netz innerhalb derselben Leinwand kombiniert.  Zu diesem Zweck sollten sich keine Objekte mit anderen Materialien dazwischen befinden.  Au√üerdem sollten Objekte mit anderen Materialien die gebackenen Objekte nicht mit ihren Gesamtbeh√§ltern √ºberlappen.  Der Stapelvorgang erfolgt √ºber mehrere Threads. Die Leistung h√§ngt stark von der Anzahl der Kerne im Prozessor ab. </p><br><p>  Text kann mit anderem Text flattern, wenn er dieselbe Schriftart hat.  Es spielt keine Rolle, ob die Schriftarteinstellungen und -stile gleich oder unterschiedlich sind.  Wenn die Schriftarten unterschiedlich sind, wird der Text nicht gerollt. </p><br><p>  Es sollte auch ber√ºcksichtigt werden, dass Text ein Objekt mit seinem Gesamtcontainer √ºberlappen kann und eine solche √úberlappung leicht √ºbersprungen werden kann. <br><img src="https://habrastorage.org/webt/hp/25/q6/hp25q6lnrkta2lfzglksyejea34.png" alt="Bild"></p><br><p>  Betrachten Sie ein Beispiel.  Es gibt drei Objekte A, B und C, die auf diese Weise in einer Hierarchie angeordnet sind: <br><img src="https://habrastorage.org/webt/iq/s-/7e/iqs-7ev081f2-yspnchyfhu7ejy.png" alt="Bild"><br><img src="https://habrastorage.org/webt/-x/xi/4o/-xxi4olr9aexg7rk2sic-4vntrw.png" alt="Bild"><br>  Im Bild links werden die Objekte A und C zusammengef√ºhrt, weil  haben das gleiche Material und schneiden sich nicht mit Objekt B. Im Bild rechts werden die Objekte A und C nicht kombiniert, weil  Es gibt einen Schnittpunkt mit Objekt B. </p><br><h3 id="anchorcommonanchorobschie-sovety-po-optimizacii-ui"><a name="common"></a>  Allgemeine Tipps zur Optimierung der Benutzeroberfl√§che </h3><br><p>  Bevor Sie mit der Optimierung beginnen, wird dringend empfohlen, die Benutzeroberfl√§che zu profilieren.  Dies hilft bei der Identifizierung von Engp√§ssen, die zu Leistungseinbu√üen f√ºhren (falls vorhanden).  F√ºr die Profilerstellung gibt es viele Tools, die sowohl in Unity (Unity Profiler) als auch in Tools von Drittanbietern integriert sind.  In diesem Artikel werden die Probleme der UI-Profilerstellung jedoch nicht behandelt. </p><br><p>  Hier einige Vorschl√§ge zur Optimierung Ihrer Benutzeroberfl√§che in Unity: </p><br><ol><li>  Schalten Sie unsichtbare Objekte aus.  Wenn ein Element von einem undurchsichtigen Element √ºberlappt wird, m√ºssen Sie sein GameObject oder das √ºbergeordnete GameObject des √ºberlappenden Elements deaktivieren.  Gleichzeitig werden weiterhin Schnittstellenelemente mit Alpha auf 0 gezeichnet.  F√ºr solche Objekte m√ºssen Sie Cull Transparent Mesh in der Canvas Renderer-Komponente aktivieren oder einfach unsichtbare Objekte deaktivieren. <br><img src="https://habrastorage.org/webt/gq/mf/hb/gqmfhb92x6wbpjgs3imcclryb8m.png" alt="Bild"></li><li>  Deaktivieren Sie Weltobjekte, die von einer undurchsichtigen Oberfl√§che ausgeblendet werden.  Wenn die Benutzeroberfl√§che nicht die ganze Welt abdeckt, k√∂nnen Sie sie in der Render-Textur speichern und die Weltkamera ausschalten. </li><li>  Minimieren Sie die Anzahl der zu zeichnenden Pixel.  Kombinieren Sie so viele Bilder wie m√∂glich zu einem.  Zum Beispiel ist es sinnvoll, die Schaltfl√§chen zu einem einzelnen Sprite zu machen, anstatt Ebenen mit Hintergrund, Strich, Schaltfl√§chenk√∂rper usw. zu trennen.  Dies verringert die Flexibilit√§t bei der Arbeit mit solchen Elementen und kann zu einer Verstopfung der Ressourcen f√ºhren. Daher muss ein Kompromiss angestrebt werden. <br><img src="https://habrastorage.org/webt/sh/o8/q-/sho8q-hlftycczgnzevncmx1hoa.png" alt="Bild"></li><li>  Vermeiden Sie leere Elemente, die nur zur Organisation der Struktur dienen (verwenden Sie keine Elemente als Namen von ‚ÄûOrdnern‚Äú in der Dokumenthierarchie). </li><li>  Vermeiden Sie es, Gegenst√§nde zu kreuzen, die nicht miteinander backen k√∂nnen.  Wenn m√∂glich, √§ndern Sie am besten die Position in der Hierarchie, die Gr√∂√üe des Containers oder die Position √ºberlappender und nicht zusammenbackender Elemente. </li><li>  Verwenden Sie f√ºr dynamische Elemente eine separate oder verschachtelte Zeichenfl√§che.  So minimieren Sie die Kosten f√ºr das Sortieren und Wiederherstellen der Struktur der Zeichenfl√§che, die eine gro√üe Anzahl von Elementen enth√§lt.  Verschachtelte Leinw√§nde sind bequemer, weil  erben die Einstellungen der √ºbergeordneten Zeichenfl√§che.  Gleichzeitig werden beim √Ñndern der √ºbergeordneten Zeichenfl√§che auch alle verschachtelten Bereiche neu erstellt.  Dies ist ziemlich selten, aber es passiert (zum Beispiel beim √Ñndern der Bildschirmaufl√∂sung).  Beachten Sie, dass Objekte aus verschiedenen Leinw√§nden oder verschachtelten Leinw√§nden NICHT f√ºr das gemeinsame Rendern gebacken werden.  Es wird empfohlen, die Leinw√§nde nach der Regelm√§√üigkeit der Aktualisierung der Elemente zu unterteilen.  Statische Elemente m√ºssen auf einer separaten Leinwand platziert werden, dann werden sie nur einmal gezeichnet.  Wenn es Elemente gibt, die sich st√§ndig √§ndern, ist es besser, sie auf einer anderen Leinwand zu kombinieren, weil  Sie werden sich immer noch gegenseitig wieder aufbauen.  Das √Ñndern von Objekten kann durch die Aktualisierungsrate auch in mehrere Leinw√§nde unterteilt werden.  Beispielsweise werden Elemente, die in jedem Frame aktualisiert wurden, in eine Zeichenfl√§che eingef√ºgt, und Elemente, die in einem anderen weniger h√§ufig aktualisiert werden. </li><li>  Durch Deaktivieren von Pixel Perfect wird die Produktivit√§t erheblich gesteigert.  Dies gilt insbesondere f√ºr st√§ndig aktualisierte Objekte mit einer gro√üen Anzahl von Elementen (z. B. Bildlaufinventar). <br><img src="https://habrastorage.org/webt/0d/zg/xi/0dzgxi_azqoacbfsdarrgr7nejo.png" alt="Bild"><br>  Die Leinwand <br><img src="https://habrastorage.org/webt/jv/qt/31/jvqt315ookagmhaiftexsaguz0g.png" alt="Bild"><br>  Verschachtelte Leinwand </li><li>  Wenn Sie die <strong>Zeichenfl√§che</strong> deaktivieren m√ºssen, deaktivieren Sie das Objekt, das sie enth√§lt, nicht (√ºber die Funktion <strong>SetActive</strong> ).  Beim n√§chsten Einschalten werden die Elemente dieser Zeichenfl√§che als ge√§ndert markiert und alle Elemente werden neu erstellt.  Es ist besser, die Canvas-Komponente selbst auszuschalten, da sich dann die gesamte Struktur und die gebackenen Daten nicht √§ndern. Wenn Sie die Canvas-Komponente das n√§chste Mal einschalten, beginnen sie einfach mit dem Zeichnen. <br><img src="https://habrastorage.org/webt/pr/qo/-s/prqo-stitn0evgzxrddr54ncqwk.png"></li><li>  Installieren Sie f√ºr Leinw√§nde mit <strong>Bildschirmbereich - Kamera</strong> oder <strong>Weltraum,</strong> die im Parameter <strong>Rendermodus</strong> ausgew√§hlt wurden, immer eine Kamera.  Wenn Sie es nicht installieren, durchsucht das Benutzeroberfl√§chensystem in jedem Frame <strong>Object.FindObjectWithTag</strong> , um <strong>Camera.main</strong> zu finden. <strong>Dies</strong> <strong>wirkt sich</strong> auf die Leistung aus. </li><li>  Um nicht mehrere identische Texturen zu erstellen, k√∂nnen Sie eine in Graustufen erstellen und durch die Bildkomponente ‚Äûmalen‚Äú, indem Sie die gew√ºnschte Farbe ausw√§hlen. <br><img src="https://habrastorage.org/webt/o7/tj/jr/o7tjjrk1hyt5a1rqbukrw-upsh0.png"></li><li>  Lassen Sie das <strong>Raycast-Ziel-</strong> Flag nur f√ºr Elemente, die Eingabeereignisse ben√∂tigen, und entfernen Sie den Rest.  Standardm√§√üig ist das <strong>Raycast-Ziel</strong> f√ºr viele Elemente (Bild, Text usw.) aktiviert.  Dies verkompliziert und verlangsamt die Arbeit der <strong>Raycaster-</strong> Komponente, die Eingabeereignisse in der Unity-Benutzeroberfl√§che verarbeitet.  Beim Klicken oder Tippen wird die gesamte Hierarchie der Elemente durchlaufen und nach allen <strong>Grafikkomponenten mit gesetztem Raycast-Ziel-</strong> Flag <strong>gesucht.</strong> Anschlie√üend werden sie auf die M√∂glichkeit von Eingabeereignissen √ºberpr√ºft und nach erfolgreichem Bestehen der Pr√ºfungen zur Trefferliste hinzugef√ºgt.  Danach wird die Trefferliste nach Tiefe sortiert, Objekte au√üerhalb des Bildschirms werden verworfen.  Als Ergebnis gibt es die endg√ºltige Trefferliste. <br>  In der Unity-Benutzeroberfl√§che haben viele Komponenten (Bild, Text usw.) das <strong>Raycast-</strong> Zielflag. </li></ol><br><p><img src="https://habrastorage.org/webt/vp/k8/ce/vpk8cecf2dr_svrostszl-hkeeo.png" alt="Bild"><br>  <strong>Raycast-Ziel</strong> auf der Bildkomponente. </p><br><p><img src="https://habrastorage.org/webt/lx/z9/3o/lxz93oxpurdfign10vwpuf8mnv0.png" alt="Bild"><br>  <strong>TextMeshPro hat</strong> es auf der Registerkarte <strong>Zus√§tzliche Einstellungen</strong> ausgeblendet. </p><br><p><img src="https://habrastorage.org/webt/k_/63/09/k_6309bflccv61qqzc9g_rpu3u4.png" alt="Bild"><br>  F√ºr <strong>TextMeshPro k√∂nnen</strong> Sie die Standardeinstellung f√ºr das <strong>Raycast-Ziel unter</strong> <strong>Player-Einstellungen -&gt; TextMest Pro -&gt; Einstellungen -&gt; Raycast-Ziel aktivieren festlegen</strong> . </p><br><p>  Elemente werden getestet, wenn: </p><br><ul><li>  Raycast-Ziel aktiviert </li><li>  das Element selbst wird eingeschaltet und aktiviert; </li><li>  Die Einf√ºgemarke befindet sich am Schnittpunkt mit RectTransform. </li></ul><br><p>  Es ist auch sinnvoll, das Raycast-Zielflag von untergeordneten Elementen zu entfernen, wenn das Stammobjekt es bereits hat und die untergeordneten Elemente mit seiner Geometrie vollst√§ndig √ºberlappt.  Zum Beispiel die Standardschaltfl√§che der Unity-Benutzeroberfl√§che. </p><br><img src="https://habrastorage.org/webt/q7/6i/cz/q76iczyqwjxw6slf9ji6bgu1vqa.png"><br><p>  Das Bild √ºberlappt den Text vollst√§ndig mit seiner Form. In diesem Fall k√∂nnen Sie das <strong>Raycast-Ziel</strong> aus der Textkomponente entfernen. </p><br><img src="https://habrastorage.org/webt/vf/oy/la/vfoylaklhkozlwt0dzboxd8r5vy.png"><br><p>  Wenn nicht alle Canvas-Elemente auf Eingabeereignisse warten, k√∂nnen Sie die <strong>Graphic Raycaster-</strong> Komponente aus dem Canvas / verschachtelten Canvas entfernen. </p><br><h3 id="anchortextanchorrabota-s-tekstom-i-ego-optimizaciya"><a name="text"></a>  Arbeiten Sie mit Text und dessen Optimierung </h3><br><p>  Der Text in der Unity-Oberfl√§che besteht aus Gittern, in denen jedes Symbol ein eigenes Quad erstellt.  Das Netz wird jedes Mal neu erstellt, wenn sich der Wert des Texts √§ndert.  Die Neuerstellung erfolgt auch, wenn die Textkomponente oder deren √ºbergeordnetes Element aus- und wieder eingeschaltet wurde. </p><br><p>  Standardm√§√üig werden Schriftarten in Unity als dynamisch hinzugef√ºgt.  F√ºr jede dynamische Schriftart, die in der Textkomponente auf der B√ºhne verwendet wird, wird ein Atlas erstellt.  In diesem Atlas sind nur verwendete Zeichen enthalten.  Wenn das Textfeld beispielsweise den Text "Neuer Text" enth√§lt, enth√§lt der daf√ºr erstellte Atlas die Zeichen "N", "e", "w", "T", "x" und "t".  F√ºr jedes Zeichen, das sich in Gr√∂√üe oder Stil unterscheidet, wird im Atlas eine Darstellung erstellt. </p><br><img src="https://habrastorage.org/webt/ze/pw/jx/zepwjxjnaa7nk2qxvenmvt3flc4.png"><br><p>  Text auf der B√ºhne </p><br><img src="https://habrastorage.org/webt/d0/1j/un/d01jun9sehx1lhs6wdrfwhyfn8q.png"><br><p>  Schriftatlas </p><br><p>  Wenn sich w√§hrend der Ausf√ºhrung des Programms der Inhalt der Textkomponente √§ndert und Zeichen angezeigt werden, die nicht im Atlas enthalten sind, wird der gesamte Atlas neu erstellt.  Wenn in der Textur des Atlas freier Speicherplatz vorhanden ist, werden die erforderlichen Symbole einfach dort hinzugef√ºgt.  Gleichzeitig werden Zeichen, die derzeit nicht verwendet werden, nicht gel√∂scht.  Wenn im Atlas nicht gen√ºgend Platz f√ºr neue Zeichen vorhanden ist, wird seine Gr√∂√üe verdoppelt und basierend auf den in den aktiven Textkomponenten verwendeten Zeichen erneut gef√ºllt. </p><br><p>  Wenn f√ºr ein Projekt eine genau definierte Anzahl von Zeichen festgelegt ist, z. B. nur das lateinische Alphabet, lohnt es sich, statische Schriftarten zu verwenden, die permanent im Speicher gespeichert sind.  Wenn Ihr Projekt eine gro√üe Anzahl von Zeichen zul√§sst, ist es besser, sich mit dynamischen Schriftarten zu befassen. <br>  Sie k√∂nnen die Leistung auch verbessern, indem Sie die Textkomponente durch ein Sprite ersetzen.  Zum Beispiel k√∂nnen die im Spiel erscheinenden Zahlen (Punktzahl) mithilfe von Sprites aus einem Atlas erstellt werden, der nur einen Satz der erforderlichen Zeichen enth√§lt.  In diesem Fall fallen keine Kosten f√ºr die Neuerstellung der Leinwand und des Atlas der Schrift an. </p><br><p>  Die Verwendung von Fallback-Schriftarten, die in den <strong>Schriftarteneinstellungen im</strong> Feld "Schriftnamen" aufgef√ºhrt sind, erh√∂ht den verwendeten Speicher.  Dies macht sich insbesondere bei piktografischen Schriftarten bemerkbar. </p><br><p>  Es wird nicht empfohlen, <strong>Best Fit zu verwenden</strong> , da  Diese Option f√ºhrt zu einem schnellen √úberlaufen des Atlas und bewirkt dessen Umstrukturierung. <br>  <strong>Die beste Anpassung</strong> ignoriert die Einstellungen f√ºr die Schriftgr√∂√üe und versucht, den Text in das Umrissrechteck der Textkomponente einzupassen. </p><br><p>  Nun ein <strong>paar</strong> Worte zu <strong>TextMeshPro (TMP)</strong> , einem beliebten Ersatz f√ºr die Standard-Unity-Textkomponente.  TextMeshPro erstellt au√üerdem jedes Mal ein neues Raster, wenn sich der Wert des Texts √§ndert.  TMP-Text verwendet jedoch keine dynamischen Schriftarten.  Daf√ºr werden im Voraus Schriftatlanten generiert, die alle notwendigen Zeichen enthalten.  Wenn f√ºr einen Text in der Szene kein Zeichen in der Schriftart vorhanden ist, die der Komponente zugewiesen ist, beginnt TMP mit der Suche in Sicherungsschriftarten.  Wenn dort nichts vorhanden ist, versucht TMP, dieses Zeichen in allen heruntergeladenen Schriftarten zu finden. </p><br><p>  <strong>Die beste Anpassung in</strong> <strong>TMP verursacht</strong> keine Probleme wie eine normale Textkomponente und kann daher verwendet werden. </p><br><p>  Eine gro√üe Anzahl von Schriftarten mit unterschiedlichen Lokalisierungen oder gro√üen Atlanten von Schriftarten kann viel Speicherplatz beanspruchen.  Daher ist es besser, nur die f√ºr eine bestimmte Lokalisierung erforderlichen Schriftarten vorzuladen. </p><br><p>  <strong>World Space</strong> empfiehlt die Verwendung von <strong>TextMeshPro</strong> anstelle von <strong>TextMeshProUGUI</strong> . <br>  <strong>TextMeshProUGUI wird</strong> in Leinw√§nden verwendet. </p><br><h3 id="anchoratlasanchoratlasy-spraytov"><a name="atlas"></a>  Sprite-Atlanten </h3><br><p>  <strong>Sprite-Atlanten</strong> sind eine Art Ressource, die mehrere Texturen zu einer kombiniert.  Mit ihnen k√∂nnen Sie die Anzahl der Draws ( <strong>Draw Calls</strong> ) reduzieren und die Produktivit√§t steigern. </p><br><p>  Atlas Erstellung. <br>  Erstellen Sie einen Atlas: <strong>Asset&gt; Erstellen&gt; Sprite-Atlas</strong> . <br>  W√§hlen Sie den Atlas aus und f√ºgen Sie das erforderliche Sprite in <strong>Objekte zum Verpacken ein</strong> . <br><img src="https://habrastorage.org/webt/bs/dl/8n/bsdl8nc2krqqx0hj7kwdckcatzc.png" alt="Bild"><br>  Klicken Sie auf <strong>Packvorschau,</strong> um eine Vorschau des Atlas anzuzeigen. <br><img src="https://habrastorage.org/webt/z2/ct/l1/z2ctl1uykvlwq_xelfoc3gezmdc.png" alt="Bild"><br>  Beachten Sie, dass der Atlas auch dann vollst√§ndig geladen wird, wenn ein oder mehrere Sprites aus dem Atlas in der Szene verwendet werden.  Daher ist es nicht sinnvoll zu versuchen, alle Bilder in einen riesigen Atlas einzubetten, der auf Ger√§ten mit kleinem RAM seinen greifbaren Teil √ºbernehmen kann.  Es ist besser, in einige kleinere Atlanten zu unterbrechen, beispielsweise den Atlas der Benutzeroberfl√§che des Spielmen√ºs und den Atlas der Benutzeroberfl√§che des Spielmodus. </p><br><p>  Vermeiden Sie gro√üe Leerstellen im Atlas, um nicht zu viel Speicherplatz zu belegen.  Dazu k√∂nnen Sie die Gr√∂√üe des Atlas √§ndern oder zus√§tzliche Bilder hinzuf√ºgen, um den leeren Raum so weit wie m√∂glich zu f√ºllen. <br><img src="https://habrastorage.org/webt/vc/4n/f5/vc4nf5zljiikgjg83qau04b022q.png" alt="Bild"><br><img src="https://habrastorage.org/webt/r7/k2/w0/r7k2w0csvrfxsevgjw2nop0_zb8.png" alt="Bild"><br>  F√ºr Bilder, die nicht im Atlas enthalten sind, m√ºssen Sie die richtigen Einstellungen ausw√§hlen. <br>  F√ºr jedes Komprimierungsformat gibt es Anforderungen, unter denen es effizient arbeitet.  Die h√§ufigsten Bildanforderungen: </p><br><ul><li>  Breite und H√∂he m√ºssen ein Vielfaches der Zweierpotenz sein; </li><li>  Breite und H√∂he m√ºssen ein Vielfaches von 4 sein; </li><li>  beide vorhergehenden Abs√§tze zusammen. <br>  Andernfalls wird die Textur nicht komprimiert und es entstehen zus√§tzliche Ger√§tespeicherkosten. </li></ul><br><p>  Bei der Auswahl eines Komprimierungsformats teilt Unity Ihnen mit, ob Anforderungen f√ºr das ausgew√§hlte Format nicht erf√ºllt sind. <br><img src="https://habrastorage.org/webt/_s/tq/0c/_stq0cqnfhbnoczd2yrqm0d1iic.png" alt="Bild"></p><br><p>  Vergessen Sie auch nicht, dass sich die Formate vom Zielger√§t unterscheiden.  Weitere Informationen und Empfehlungen zu Formaten finden Sie in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offiziellen Dokumentation</a> : </p><br><h3 id="anchorresumeanchorrezyumiruem-sposoby-optimizacii"><a name="resume"></a>  Fassen Sie die Optimierungsmethoden zusammen </h3><br><ul><li>  Deaktivieren Sie unsichtbare und transparente Objekte </li><li>  Minimieren Sie die Anzahl der Elemente </li><li>  Vermeiden Sie es, Gegenst√§nde zu kreuzen, die nicht miteinander backen k√∂nnen </li><li>  Verteilen Sie Elemente nach Leinwand basierend auf der Aktualisierungsrate </li><li>  Deaktivieren Sie f√ºr Leinw√§nde mit h√§ufig aktualisierten Elementen Pixel Perfect </li><li>  Deaktivieren Sie das Raycast-Ziel f√ºr nicht anklickbare Elemente </li><li>  Entfernen Sie die Graphic Raycaster-Komponente auf der Leinwand, f√ºr die nicht alle Elemente anklickbar sind </li><li>  Verwenden Sie f√ºr normale Textkomponenten nicht Best Fit </li><li>  Verwenden Sie f√ºr TextMeshPro im Weltraum TextMeshPro anstelle von TextMeshProUGUI.  TextMeshProUGUI wird in Leinw√§nden verwendet </li><li>  Stellen Sie die Kamera bei Bedarf in den Canvas-Einstellungen ein </li><li>  Deaktivieren Sie die Zeichenfl√§che, indem Sie die Zeichenfl√§chenkomponente deaktivieren </li><li>  Verwenden Sie Graustufen-Sprites und f√§rben Sie die Einstellungen der Bildkomponenten ein </li><li>  Verwenden Sie Sprite-Atlanten </li><li>  Verwenden Sie die richtige Gr√∂√üe und das richtige Komprimierungsformat f√ºr Texturen, die nicht im Atlas enthalten sind </li></ul><br><h3 id="anchorlinksanchoristochniki"><a name="links"></a>  Quellen: </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Umfassende Informationen zur Optimierung der Unity-Benutzeroberfl√§che</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Eine andere offizielle Quelle zu diesem Thema enth√§lt Informationen in einer pr√§ziseren Form.</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Atlas White Papers</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zus√§tzliche Informationen zu Texturkomprimierungsformaten</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de470608/">https://habr.com/ru/post/de470608/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de470594/index.html">Bericht von der Lichtshow ‚ÄûCircle of Light‚Äú 2019 in Moskau</a></li>
<li><a href="../de470596/index.html">Funktionen von Q und KDB + am Beispiel eines Echtzeitdienstes</a></li>
<li><a href="../de470598/index.html">Das Buch "Modernes Java. Lambda-Ausdr√ºcke, Streams und funktionale Programmierung ‚Äú</a></li>
<li><a href="../de470600/index.html">√úber sichere noVNC-Konsolen, automatische Skalierung in Kubernetes, Haproxy in Ostrovka und die Arbeit von Administratoren mit Programmierern</a></li>
<li><a href="../de470604/index.html">Geschwindigkeit beim Laden von Websites im E-Commerce: Analyse von 48 Top-Online-Shops in Russland</a></li>
<li><a href="../de470610/index.html">Ein Tag im Leben eines Entwicklers</a></li>
<li><a href="../de470612/index.html">Was ein Voltmeter zeigt, oder Mathe-Steckdosen</a></li>
<li><a href="../de470614/index.html">Wie waren die NES-Grafiken angeordnet?</a></li>
<li><a href="../de470616/index.html">Eine neue L√∂sung f√ºr das Fermi-Paradoxon (warum wir allein im Universum sind)</a></li>
<li><a href="../de470618/index.html">Thematische Modellierung von Nachrichten mittels Faktoranalyse</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>