<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßü üèùÔ∏è üåê Toda la verdad sobre RTOS. Art√≠culo # 8. Nucleus SE: dise√±o interno y despliegue üë©üèø üÖæÔ∏è üåÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este art√≠culo contin√∫a la revisi√≥n de Nucleus SE. 

 Servicios 
 Nucleus SE proporciona un conjunto de herramientas que se pueden esperar de cualquier...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Toda la verdad sobre RTOS. Art√≠culo # 8. Nucleus SE: dise√±o interno y despliegue</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422617/"><img src="https://habrastorage.org/webt/b_/hz/jv/b_hzjvxfyiqk1hj4znoykfy4iyi.jpeg"><br><br>  Este art√≠culo contin√∫a la revisi√≥n de Nucleus SE. <br><br><h2>  Servicios </h2><br>  Nucleus SE proporciona un conjunto de herramientas que se pueden esperar de cualquier RTOS. <br>  En primer lugar, Nucleus SE contiene un programador bastante simple, sin embargo, gracias a las cuatro opciones disponibles, proporciona flexibilidad.  El planificador admite los algoritmos Ejecutar hasta la finalizaci√≥n, Round Robin, Carrusel, Time Slice y Priority. <br><a name="habracut"></a><br>  La API de Nucleus SE incluye alrededor de 50 llamadas de servicios p√∫blicos que brindan a los desarrolladores acceso a la administraci√≥n de tareas, secciones de memoria, se√±ales, grupos de indicadores de eventos, sem√°foros, buzones, colas, tuber√≠as, hora del sistema, temporizadores de aplicaciones y diagn√≥sticos. <br><br>  Adem√°s de la simple programaci√≥n de tareas, Nucleus SE (opcional) admite la pausa de tareas.  Esta funci√≥n puede ser "limpia" (por ejemplo, como resultado de una llamada a la API del servicio de suspensi√≥n establecida expl√≠citamente), puede ser una funci√≥n de "suspensi√≥n" (cuando una tarea se suspende por un cierto per√≠odo de tiempo), o puede ser el resultado de otra llamada a la API en la que la tarea est√° bloqueada (la llamada suspensi√≥n "condicional"), esperando el acceso al recurso del n√∫cleo.  A diferencia de Nucleus RTOS, Nucleus SE no admite tiempos de espera al bloquear llamadas API. <br><br>  La variedad de mecanismos presentados le permite elegir entre una jerarqu√≠a de medios de sincronizaci√≥n y comunicaci√≥n entre tareas: desde sem√°foros hasta se√±ales, banderas de eventos, buzones y colas / tuber√≠as. <br><br>  Art√≠culos anteriores de la serie: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo # 7.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">N√∫cleo SE: Introducci√≥n</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo # 6.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Otros servicios RTOS</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo # 5.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Interacci√≥n de tareas y sincronizaci√≥n</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo # 4.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tareas, cambio de contexto e interrupciones</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo # 3.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tareas y planificaci√≥n</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo # 2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">RTOS: estructura y modo en tiempo real</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo # 1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">RTOS: introducci√≥n.</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><br></a> <br><h2>  Verificaci√≥n de par√°metros </h2><br>  Al elegir la configuraci√≥n <b>NUSE_API_PARAMETER_CHECKING</b> , el c√≥digo para verificar los par√°metros se <b>incluye</b> en todas las funciones de la API: comprobaci√≥n de punteros nulos, √≠ndices de objetos, etc. Dado que se trata de un c√≥digo adicional que requiere memoria adicional, ser√≠a aconsejable habilitar esta funci√≥n durante la depuraci√≥n, pero desact√≠vela en el conjunto de liberaci√≥n. <br><br><h2>  Configuracion </h2><br>  Nucleus SE tiene una estructura flexible, que nos da dos puntos positivos.  Por un lado, el n√∫cleo puede tener una configuraci√≥n detallada que satisfaga las tareas de una aplicaci√≥n particular debido a la configuraci√≥n simple de la funcionalidad disponible y la administraci√≥n simple del uso de la memoria.  Por otro lado, el c√≥digo Nucleus SE es f√°cilmente port√°til entre ambas herramientas y entre procesadores. <br><br><h2>  Convenciones de nomenclatura </h2><br>  Dado que la claridad y la facilidad de comprensi√≥n eran importantes al desarrollar Nucleus SE, las convenciones de nomenclatura fueron cuidadosamente pensadas.  Cada car√°cter en el c√≥digo tiene el prefijo <b>NUSE_.</b>  Todo lo que sigue a este prefijo obedece a un conjunto de reglas simples. <br><br><h3>  Llamadas a la API </h3><br>  Cada funci√≥n de llamada API en Nucleus SE comienza con <b>NUSE_,</b> que casi siempre va seguida de un tipo de objeto, seguido de una operaci√≥n de may√∫sculas y min√∫sculas, separadas por guiones bajos.  Un ejemplo es la funci√≥n <b>NUSE_Queue_Send ()</b> , que <b>pone en cola los</b> mensajes. <br><br><h3>  Otras funciones y variables </h3><br>  El resto de las funciones y variables (globales) en el c√≥digo de Nucleus SE tambi√©n usan el prefijo NUSE_, pero el resto del nombre no siempre tiene una "estructura".  Esto no es importante para el usuario promedio del n√∫cleo, ya que tendr√° suficientes funciones API. <br><br><h3>  S√≠mbolos de configuraci√≥n </h3><br>  Dado que Nucleus SE est√° configurado con caracteres #define, tambi√©n obedecen las convenciones de nomenclatura.  Est√°n escritos solo en may√∫sculas.  Los nombres de los activadores de las llamadas a la API son los mismos que los nombres de las funciones y tambi√©n est√°n escritos en may√∫sculas, por ejemplo, <b>NUSE_QUEUE_SEND.</b> <br><br><h3>  Otros #definir personajes </h3><br>  Cualquier otro car√°cter <b>#define</b> (por ejemplo, par√°metros de llamada API y valores de estado de retorno) que pueda usar el c√≥digo de la aplicaci√≥n obedece a las mismas reglas, comienzan con <b>NUSE_</b> y se escriben en may√∫sculas.  Por ejemplo, <b>NUSE_SUCCESS.</b> <br><br><h2>  Estructuras de datos </h2><br>  Todos los RTOS tienen un conjunto de estructuras de datos que describen los objetos del n√∫cleo.  En la mayor√≠a de las implementaciones, son estructuras de datos en C que forman listas vinculadas, a menudo con comunicaci√≥n bidireccional e incluso circular.  Esto es l√≥gico, ya que los datos importantes se encapsulan convenientemente, y los elementos de la lista se pueden agregar o eliminar a medida que se crean y eliminan los objetos. <br><br>  En Nucleus SE, todos los objetos son est√°ticos, por lo que organizar todas las estructuras de datos de estos objetos en una lista simple fue la soluci√≥n obvia.  Esto reduce el volumen y la complejidad de los punteros hacia adelante y hacia atr√°s.  Sin embargo, decid√≠ fortalecer la optimizaci√≥n del sistema y me negu√© a usar estructuras.  En Nucleus SE, todos los datos de los objetos del n√∫cleo est√°n representados por varias matrices simples (tambi√©n llamadas tablas) de varios tipos, uno o m√°s para cada tipo de objeto.  Hay varios argumentos a favor de esta decisi√≥n: <br><br><ul><li>  Nucleus SE fue dise√±ado teniendo en cuenta la compatibilidad con estructuras de 8 bits.  La mayor√≠a de las CPU peque√±as no tienen herramientas √≥ptimas para implementar estructuras de datos en un compilador de C.  Las matrices simples son mucho m√°s eficientes. </li><li>  Como el n√∫mero m√°ximo permitido de objetos de cada tipo es 16, y el acceso a los elementos de cada matriz requiere cuatro bits, a menudo se usa un byte.  Esto es m√°s eficiente que una direcci√≥n, que generalmente toma 16 o 32 bits. </li><li>  Los datos de objetos permanentes deben almacenarse en la ROM y no copiarse a la RAM.  Dado que la estructura no se puede dividir entre ROM y RAM (en C port√°til tradicional), cada tipo de objeto puede tener dos estructuras, lo que es demasiado complejo.  En Nucleus SE, las tablas de descripci√≥n de objetos se pueden encontrar tanto en ROM como en RAM, seg√∫n sea necesario. </li><li>  Debido a la alta capacidad de configuraci√≥n de Nucleus SE ("escalabilidad ultra alta"), algunos datos de descripci√≥n de objetos pueden ser opcionales, dependiendo de las herramientas seleccionadas.  Esto lleva al uso generalizado de la compilaci√≥n condicional.  Una definici√≥n estructural con directivas de compilaci√≥n condicional incorporadas es muy dif√≠cil de entender.  El control de la creaci√≥n de instancias de matrices individuales utilizando este m√©todo es, a su vez, bastante f√°cil de entender. </li></ul><br><br>  Todas las tablas de datos de objetos est√°n sujetas a la convenci√≥n de nomenclatura jer√°rquica mencionada anteriormente.  Por lo tanto, es bastante f√°cil entender qu√© tablas est√°n relacionadas l√≥gicamente. <br><br><h2>  Diferencias clave de Nucleus RTOS </h2><br>  Aunque Nucleus SE fue dise√±ado con un alto grado de compatibilidad con Nucleus RTOS, no se pudieron evitar algunas diferencias peque√±as y grandes.  Se describir√°n en detalle en los art√≠culos relevantes, y a continuaci√≥n se ofrece una breve descripci√≥n. <br><br><h3>  Datos de objeto </h3><br>  En Nucleus RTOS, los objetos se crean y eliminan a pedido.  En Nucleus SE, todos los objetos se crean de forma est√°tica y se determinan durante el ensamblaje. <br><br><h3>  Numero de objetos </h3><br>  Nucleus RTOS admite un n√∫mero indefinido de objetos de cada tipo.  Nucleus SE admite un m√°ximo de diecis√©is objetos de cada tipo. <br><br><h3>  Nombres de objeto </h3><br>  Nucleus RTOS le permite asignar tipos de texto a algunos tipos de objetos que pueden usarse para la depuraci√≥n.  Nucleus SE no tiene esta caracter√≠stica. <br><br><h3>  Mecanismo de bloqueo de tareas </h3><br>  El mecanismo para bloquear tareas con una llamada API en Nucleus SE es bastante simple.  Cuando se libera un recurso, todas las tareas pendientes se reanudan y compiten entre s√≠ (utilizando el programador de tareas) por los recursos.  Las tareas perdedoras son nuevamente suspendidas (bloqueadas).  En Nucleus RTOS, el mecanismo es m√°s complejo, solo contin√∫an tareas importantes, lo que es m√°s efectivo. <br><br><h3>  API Call Timeout </h3><br>  Al llamar a la API de bloqueo, Nucleus RTOS permite al desarrollador especificar un per√≠odo de tiempo de espera despu√©s del cual la llamada se reanudar√° incluso si el recurso no se libera.  Nucleus SE no tiene esta caracter√≠stica. <br><br><h3>  Programaci√≥n de tareas </h3><br>  Nucleus RTOS Scheduler es flexible, eficiente y bien definido.  Nucleus SE ofrece un conjunto de planificadores, cada uno de los cuales es lo suficientemente simple y efectivo para un n√∫mero reducido de tareas compatibles: de 1 a 16. <br><br><h3>  Prioridades de la tarea </h3><br>  Un sistema que usa Nucleus RTOS puede tener un n√∫mero arbitrario de tareas a las que se les puede asignar uno de los 256 niveles de prioridad, mientras que varias tareas pueden tener un nivel de prioridad.  Los niveles de prioridad de la tarea tambi√©n pueden cambiar en tiempo de ejecuci√≥n.  En Nucleus SE, si se selecciona un planificador de prioridad, cada tarea debe tener un nivel de prioridad √∫nico que no se pueda cambiar din√°micamente.  Solo puede haber un nivel de prioridad por tarea. <br><br><h3>  Manejo de interrupci√≥n </h3><br>  Nucleus RTOS admite la arquitectura sofisticada de un controlador de interrupciones de dos niveles que permite la interoperabilidad eficiente de los servicios de kernel y del controlador de interrupciones.  Nucleus SE utiliza un enfoque similar que admite manejadores de interrupciones simples que no son del n√∫cleo (interrupciones no administradas) y manejadores de interrupciones totalmente conscientes del contexto que pueden usar llamadas API (interrupciones administradas). <br><br><h3>  Controladores de dispositivos </h3><br>  Nucleus RTOS tiene una arquitectura de controlador de dispositivo bien dise√±ada.  Nucleus SE no tiene dicha arquitectura, lo que deja al desarrollador la tarea de distribuir el control del dispositivo entre las tareas y el c√≥digo del controlador de interrupciones. <br><br><h2>  Distribuci√≥n de Nucleus SE </h2><br>  Los c√≥digos fuente de Nucleus SE se publicar√°n a medida que se desarrolle esta serie de art√≠culos.  Los archivos disponibles estar√°n disponibles a pedido por correo electr√≥nico.  Hacia el final de la serie de art√≠culos, se crear√° un repositorio para descargar todos los archivos publicados. <br><br><div class="spoiler">  <b class="spoiler_title">Sobre el autor</b> <div class="spoiler_text">  Colin Walls ha trabajado en la industria electr√≥nica durante m√°s de treinta a√±os, dedicando la mayor parte de su tiempo al firmware.  Ahora es ingeniero de firmware en Mentor Embedded (una divisi√≥n de Mentor Graphics).  Colin Walls a menudo habla en conferencias y seminarios, autor de numerosos art√≠culos t√©cnicos y dos libros sobre firmware.  Vive en el Reino Unido.  <a href="">Correo electr√≥nico del</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">blog</a> profesional de Colin </div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es422617/">https://habr.com/ru/post/es422617/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es422605/index.html">Cultivar una caja fuerte desde temprana edad: programa educativo de Rostelecom y MIPT</a></li>
<li><a href="../es422609/index.html">Barrera del lenguaje y PNL. ¬øPor qu√© los chatbots no nos entienden?</a></li>
<li><a href="../es422611/index.html">Controlador de errores est√°ndar en RxJava2 o por qu√© RxJava provoca bloqueos de la aplicaci√≥n incluso si se implementa onError</a></li>
<li><a href="../es422613/index.html">El cibergrupo PowerPool domin√≥ la vulnerabilidad de d√≠a cero en la llamada de procedimiento local avanzado</a></li>
<li><a href="../es422615/index.html">Toda la verdad sobre RTOS. Art√≠culo # 9. Programador: implementaci√≥n</a></li>
<li><a href="../es422623/index.html">C√≥mo asegurar C</a></li>
<li><a href="../es422625/index.html">Hablamos con Troy Miles, el programador de "Neuromancer"</a></li>
<li><a href="../es422627/index.html">MongoDB y la investigaci√≥n de mercado de trabajo de TI</a></li>
<li><a href="../es422629/index.html">¬°Deja de alimentar a los madereros! ¬°Da m√°s modificadores! Campos finales est√°ticos perezosos. Borrador de croquis de funciones</a></li>
<li><a href="../es422631/index.html">Terminales QIWI. C√≥mo aprovechar al m√°ximo las tecnolog√≠as simples</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>