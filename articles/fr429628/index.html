<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚åöÔ∏è üë®‚Äç‚úàÔ∏è üßñüèª Comment cr√©er un bot de chat pour VKontakte en utilisant Python, Django et webhook ‚òÉÔ∏è ‚ò¶Ô∏è üëãüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pourquoi un autre article sur la cr√©ation d'un chat bot? 
 J'ai peut-√™tre mal cherch√©, mais je n'ai pas pu trouver de guide d√©taill√© sur la cr√©ation d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment cr√©er un bot de chat pour VKontakte en utilisant Python, Django et webhook</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429628/"><h3>  Pourquoi un autre article sur la cr√©ation d'un chat bot? </h3><br>  J'ai peut-√™tre mal cherch√©, mais je n'ai pas pu trouver de guide d√©taill√© sur la cr√©ation d'un bot python √† l'aide du framework Django et de l'approche webhook, qui est h√©berg√© par une soci√©t√© russe.  La plupart des documents parlent d'utiliser le framework Flask et d'utiliser l'h√©bergement gratuit de Heroku et PythonAnywhere.  L'exp√©rience de la communaut√© Habr m'aide, alors j'ai d√©cid√©, en signe de gratitude, de passer du temps √† √©crire cet article.  Je d√©crirai l'exp√©rience pratique acquise pour permettre √† tous ceux qui sont int√©ress√©s par cela de gagner du temps et de mieux comprendre comment faire un bot en Python en utilisant le framework Django sur leur h√©bergement en utilisant l'approche webhook. <br><a name="habracut"></a><br><h3>  Pourquoi l'h√©bergement payant? </h3><br>  √Ä mon avis, une version viable du bot est quand elle est ind√©pendante de votre ordinateur local et est disponible 24/7.  Pour ce faire, vous avez besoin d'un h√©bergement sur lequel il y a: un serveur web, un syst√®me de gestion de base de donn√©es (pour d√©velopper les capacit√©s du bot), l'enregistrement d'un nom de domaine, l'obtention d'un certificat SSL pour celui-ci et un support technique pour toute cette √©conomie.  Ces services co√ªtent de l'argent.  Je paie l'h√©bergement 138 roubles par mois pour maintenir l'infrastructure pour que le bot fonctionne: support pour Python + Django, MySQL DBMS 25 Go, support pour SSH. <br>  Dans la plupart des le√ßons, j'ai vu qu'un ordinateur personnel est utilis√© comme serveur ou h√©bergement gratuit avec des restrictions sur les heures de travail, etc. Dans les exemples, le bot interroge p√©riodiquement le serveur de messagerie pour les nouveaux messages des utilisateurs.  Il s'agit d'une charge suppl√©mentaire sur les serveurs de messagerie, de sorte que le bot peut √™tre "banni" pendant un certain temps.  Tout cela, √† mon avis, n'est pas vital pour une utilisation productive.  Mais pour le test et la formation est tout √† fait possible. <br><br><h3>  Qu'est-ce que le webhook et pourquoi? </h3><br>  Pour le produit, je consid√®re la bonne d√©cision d'utiliser un webhook, c'est-√†-dire une approche dans laquelle notre bot attend des messages du serveur de messagerie et ne les "mart√®le" pas avec des requ√™tes p√©riodiques: y a-t-il de nouveaux messages ou non.  Avec un webhook, ce sera comme ceci: l'utilisateur a √©crit un message, le serveur de messagerie l'a envoy√© √† votre bot, il a re√ßu le message, l'a trait√© et a r√©pondu. <br><br><h3>  Pourquoi Django </h3><br>  J'ai d√©cid√© de faire un bot en python, j'ai donc connect√© le support python sur l'h√©bergement.  Mais je n'avais pas le choix d'un framework - l'h√©bergement n'a que Django.  Ils disent que cela fonctionne sur Instagram, Pinterest, Bitbucket et Mozilla.  C'est peut-√™tre pourquoi l'h√©bergement le propose. <br><br><h3>  Pourquoi VKontakte, pas Telegram ou Viber? </h3><br>  Pour passer du simple au complexe, il √©tait important pour moi de trouver le moyen le plus simple et le plus intuitif de mettre en place un webhook.  VKontakte s'est av√©r√© √™tre le plus compr√©hensible pour moi en raison de l'aide claire et de la facilit√© de connexion du webhook dans le panneau de contr√¥le de la communaut√© dans la section "Gestion - Travailler avec l'API".  Une description de la fa√ßon dont j'ai tout configur√© et connect√© sera plus loin.  √Ä l'avenir, je veux rendre mon bot disponible dans Viber.  Mais avec Telegram, ce n'est pas encore en route, car mon h√©bergement est en Russie et Telegram est bloqu√© de Russie.  Pour √©viter les probl√®mes avec Telegram, vous pouvez acheter un h√©bergement √† l'√©tranger. <br><br><h3>  Comment installer le webhook pour le bot VK? </h3><br>  <strong>Nom de domaine https: //</strong> .  Vous devez d'abord enregistrer le nom de domaine du site et obtenir un certificat SSL pour celui-ci. <br><br>  Je ne voulais pas utiliser le domaine racine pour le chatbot, donc apr√®s avoir enregistr√© le domaine, j'ai cr√©√© un sous-domaine et re√ßu un certificat SSL pour celui-ci. <br><br>  J'ai fait toutes ces manipulations sur le site d'h√©bergement dans mon compte personnel. <br>  En cons√©quence, j'ai re√ßu l'adresse du site mybot.mysite.ru et le certificat ssl correspondant. <br><br>  <strong>Nous obtenons la cl√© VK (token) pour le bot.</strong>  J'ai d'abord cr√©√© un groupe ferm√©, puis je suis entr√© dans la "gestion" du groupe, dans la section "Travailler avec l'API".  Dans l'onglet "Cl√©s d'acc√®s" se trouve un jeton, et dans l'onglet "API de rappel" les param√®tres du webhook. <br><br><img src="https://habrastorage.org/webt/in/46/po/in46po1vy4iq3vcdnezwpp5okg8.png"><br><br>  <strong>Installez et configurez Django</strong> .  Peut-√™tre que vous n'avez pas besoin de Django pour ex√©cuter votre script python, mais je ne sais pas comment faire autrement. <br><br>  En utilisant PuTTY, je me suis connect√© au serveur via SSH, configur√© et activ√© l'environnement virtuel. <br><br>  SSH: <br><pre><code class="bash hljs">virtualenv-2.7 virtualenv/myEnv . virtualenv/myEnv/bin/activate</code> </pre> <br>  la commande de la premi√®re ligne cr√©e un environnement virtuel et la commande de la deuxi√®me ligne l'active (notez l'espace apr√®s le point).  La version 2.7 est dict√©e par l'h√©bergement et peut diff√©rer dans votre cas.  Par cons√©quent, lisez l'aide √† l'h√©bergement. <br><br>  Django install√© suivant <br>  SSH: <br><pre> <code class="bash hljs">pip install <span class="hljs-string"><span class="hljs-string">'django&lt;2'</span></span></code> </pre><br>  J'ai install√© la version de Django pas plus t√¥t que la seconde, car python 2.7 est utilis√© sur l'h√©bergement, et seule la version de Django inf√©rieure √† 2 fonctionne avec. <br><br>  Et install√© le module python pour fonctionner avec l'API VKontakte <br>  SSH: <br><pre> <code class="bash hljs">pip install vk</code> </pre><br><br>  FTP: <br>  Cr√©ation d'un dossier pour les projets django dans le r√©pertoire racine de l'h√©bergement.  Il l'a appel√©e django. <br><br>  SSH: <br>  Cr√©√© un nouveau projet. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> django/ django-admin.py startproject mybot</code> </pre><br>  en cons√©quence, un dossier avec le nom du projet sera cr√©√© (dans notre cas, c'est ¬´mybot¬ª) dans le dossier / django.  Il contiendra les fichiers de projet initiaux cr√©√©s automatiquement: <br>  / django <br>  / mybot - dossier de projet <br>  / mybot - module avec les param√®tres de notre projet <br>  __init__.py <br>  settings.py <br>  urls.py <br>  wsgi.py <br>  manage.py <br><br>  Un projet dans Django est un groupe d'applications.  Une application dans Django est un programme qui effectue les actions d√©finies par le d√©veloppeur. <br><br>  SSH: <br>  Cr√©ation d'une application. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> mybot python manage.py startapp vk_bot</code> </pre><br>  Je suis all√© dans le <i>dossier / django / mybot et j'ai</i> cr√©√© une nouvelle application appel√©e "vk_bot". <br>  Un dossier portant le nom de l'application a √©t√© cr√©√© dans le dossier du projet contenant les fichiers d'application cr√©√©s automatiquement: <br><br>  / django <br>  / mybot - dossier de projet <br>  / mybot - module avec les param√®tres de notre projet <br>  __init__.py <br>  settings.py <br>  urls.py <br>  wsgi.py <br>  manage.py <br>  / vk_bot - dossier d'application <br>  __init__.py <br>  admin.py <br>  apps.py <br>  models.py <br>  tests.py <br>  views.py <br><br>  FTP: <br>  J'ai t√©l√©charg√© tous les fichiers du projet sur mon ordinateur portable pour travailler avec du code. <br>  Pour travailler avec les fichiers de projet et la programmation, j'ai utilis√© l'application Atom. <br><br>  Atome: <br>  Modifi√© les param√®tres du projet dans le fichier <i>/django/mybot/mybot/settings.py</i> <br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">... </span></span>DEBUG = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> ... ALLOWED_HOSTS = [ <span class="hljs-string"><span class="hljs-string">u'mybot.mysite.ru'</span></span>, ] ...</code> </pre><br>  Atome: <br>  Param√®tres de routage d'URL <i>modifi√©s</i> dans le fichier <i>/django/mybot/mybot/urls.py</i> <br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">... </span></span>urlpatterns = [ url(<span class="hljs-string"><span class="hljs-string">r'^vk_bot/'</span></span>, include(<span class="hljs-string"><span class="hljs-string">'vk_bot.urls'</span></span>)), ] ...</code> </pre><br>  FTP: <br>  Cr√©ation d'un fichier <i>/django/mybot/vk_bot/urls.py avec le</i> contenu <i>suivant</i> : <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.conf.urls <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> url <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> . <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> views app_name = <span class="hljs-string"><span class="hljs-string">'vk_bot'</span></span> urlpatterns = [ url(<span class="hljs-string"><span class="hljs-string">r'^$'</span></span>, views.index, name=<span class="hljs-string"><span class="hljs-string">'index'</span></span>), ]</code> </pre><br>  Atome: <br>  <i>Modification</i> du fichier <i>/django/mybot/vk_bot/views.py</i> - ajout d'une fonction appel√©e index qui sera ex√©cut√©e lorsque l'adresse sera demand√©e dans le navigateur <br><pre>  https://mybot.mysite.ru/vk_bot/ </pre><br><br>  views.py <br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- from __future__ import unicode_literals from django.views.decorators.csrf import csrf_exempt from django.shortcuts import render from django.http import HttpResponse from bot_config import * # import token, confirmation_token and over constants from bot_config.py import json, vk # vk is library from VK """ Using VK Callback API version 5.5 For more ditalies visit https://vk.com/dev/callback_api """ """ From Django documentation (https://docs.djangoproject.com/en/1.11/ref/request-response/) When a page is requested, Django automatically creates an HttpRequest object that contains metadata about the request. Then Django loads the appropriate view, passing the HttpRequest as the first argument to the view function. This argiment is &lt;request&gt; in def index(request): Decorator &lt;@csrf_exempt&gt; marks a view as being exempt from the protection ensured by the Django middleware. For cross site request protection will be used secret key from VK """ @csrf_exempt #exempt index() function from built-in Django protection def index(request): #url: https://mybot.mysite.ru/vk_bot/ if (request.method == "POST"): data = json.loads(request.body)# take POST request from auto-generated variable &lt;request.body&gt; in json format if (data['secret'] == secret_key):# if json request contain secret key and it's equal my secret key if (data['type'] == 'confirmation'):# if VK server request confirmation """ For confirmation my server (webhook) it must return confirmation token, whitch issuing in administration web-panel your public group in vk.com. Using &lt;content_type="text/plain"&gt; in HttpResponse function allows you response only plain text, without any format symbols. Parametr &lt;status=200&gt; response to VK server as VK want. """ # confirmation_token from bot_config.py return HttpResponse(confirmation_token, content_type="text/plain", status=200) if (data['type'] == 'message_new'):# if VK server send a message session = vk.Session() api = vk.API(session, v=5.5) user_id = data['object']['user_id'] # token from bot_config.py api.messages.send(access_token = token, user_id = str(user_id), message = "Hello, I'm bot!") return HttpResponse('ok', content_type="text/plain", status=200) else: return HttpResponse('see you :)')</span></span></code> </pre><br>  Dans le script <i>views.py</i> , dans la fonction <i>index (request)</i> , j'ai d√ª d√©sactiver la protection int√©gr√©e √† Django CSRF, car  J'obtenais l'erreur "403 Interdit".  CSRF - Cross Site Request Forgery protection - protection contre la contrefa√ßon de demande intersite.  Comment CSRF fonctionne, vous pouvez lire dans cet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> . <br>  Pour d√©sactiver la protection, j'ai utilis√© le d√©corateur <i>@csrf_exempt</i> .  Mais afin de fournir cette protection tout de m√™me, mais de mani√®re plus simple, j'ai utilis√© une cl√© secr√®te, qui est enregistr√©e dans la section de gestion de groupe sur le site Web de VKontakte. <br><br>  Ce morceau de code est responsable du traitement des demandes du serveur qu'il enverra afin de connecter notre webhook pour le traitement des √©v√©nements.  Disons simplement ¬´confirmation¬ª de notre webhook. <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data[<span class="hljs-string"><span class="hljs-string">'type'</span></span>] == <span class="hljs-string"><span class="hljs-string">'confirmation'</span></span>):<span class="hljs-comment"><span class="hljs-comment"># if VK server request confirmation """ For confirmation my server (webhook) it must return confirmation token, whitch issuing in administration web-panel your public group in vk.com. Using &lt;content_type="text/plain"&gt; in HttpResponse function allows you response only plain text, without any format symbols. Parametr &lt;status=200&gt; response to VK server as VK want. """ # confirmation_token from bot_config.py return HttpResponse(confirmation_token, content_type="text/plain", status=200)</span></span></code> </pre><br>  Veuillez noter que je conserve tous les param√®tres de configuration dans un fichier de configuration de bot distinct <i>bot_config.py</i> et que <i>je le</i> connecte donc au d√©but du script: <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> bot_config <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-comment"><span class="hljs-comment"># import token, confirmation_token and over constants from bot_config.py</span></span></code> </pre><br>  bot_config.py <br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- """ Configuration file for VK bot """ # token issued on the VK group web-administration page token = '...' # confirmation token issued on the VK group web-administration page in "Callback API" section confirmation_token = '...' # secret key for cross site request forgery protection. It will be in each VK server request secret_key = '...'</span></span></code> </pre><br>  Et dans ce morceau de code, il traite les messages des utilisateurs: <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data[<span class="hljs-string"><span class="hljs-string">'type'</span></span>] == <span class="hljs-string"><span class="hljs-string">'message_new'</span></span>):<span class="hljs-comment"><span class="hljs-comment"># if VK server send a message session = vk.Session() api = vk.API(session, v=5.5) user_id = data['object']['user_id'] # token from bot_config.py api.messages.send(access_token = token, user_id = str(user_id), message = "Hello, I'm bot!") return HttpResponse('ok', content_type="text/plain", status=200)</span></span></code> </pre><br>  Si quelque chose vous semblait incompr√©hensible, vous pouvez √©galement lire l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article sur la premi√®re configuration de Django</a> . <br><br>  <strong>La magie du serveur Web</strong> .  Pour configurer l'adressage des requ√™tes au serveur web, je suis all√© sur le serveur dans le dossier avec les domaines via le client FTP FileZilla et y <i>ai</i> cr√©√© le dossier " <i>mybot.mysite.ru</i> ", y <i>ai</i> mis trois fichiers dont le contenu a √©t√© repris de l'aide sur l'h√©bergement: <br><br>  .htaccess <br><pre> <code class="python hljs">AddHandler wsgi-script .wsgi RewriteEngine on RewriteCond %{REQUEST_FILENAME} !-f RewriteRule ^(.*)$ /django.wsgi/$<span class="hljs-number"><span class="hljs-number">1</span></span> [QSA,PT,L] RewriteCond %{HTTP:X-Forwarded-Protocol} !=https RewriteRule .* https://%{SERVER_NAME}%{REQUEST_URI} [R=<span class="hljs-number"><span class="hljs-number">301</span></span>,L]</code> </pre><br>  django.wsgi <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os, sys virtual_env = os.path.expanduser(<span class="hljs-string"><span class="hljs-string">'~/virtualenv/myEnv'</span></span>) activate_this = os.path.join(virtual_env, <span class="hljs-string"><span class="hljs-string">'bin/activate_this.py'</span></span>) execfile(activate_this, dict(__file__=activate_this)) sys.path.insert(<span class="hljs-number"><span class="hljs-number">0</span></span>, os.path.join(os.path.expanduser(<span class="hljs-string"><span class="hljs-string">'~'</span></span>), <span class="hljs-string"><span class="hljs-string">'django/mybot'</span></span>)) os.environ[<span class="hljs-string"><span class="hljs-string">'DJANGO_SETTINGS_MODULE'</span></span>] = <span class="hljs-string"><span class="hljs-string">'mybot.settings'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.core.wsgi <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> get_wsgi_application application = get_wsgi_application()</code> </pre><br>  Ici ¬´myEnv¬ª est le nom de l'environnement virtuel que vous avez cr√©√©, ¬´django¬ª est le dossier dans la section racine du syst√®me de fichiers sur l'h√©bergement, ¬´mybot¬ª est le nom du projet que nous avons cr√©√© en utilisant Django. <br><br>  index.html <br><pre> <code class="python hljs">  </code> </pre><br>  <strong>¬´Liez¬ª notre webhook au traitement des messages dans le groupe VKontakte cr√©√©.</strong> <br>  Pour ce faire, nous reviendrons sur la section de gestion de notre groupe sur le site VKontakte (voir la capture d'√©cran ci-dessus).  Nous entrerons notre adresse de webhook dans le champ "Adresse" <pre>  https://mybot.mysite.ru/vk_bot/ </pre>  et cliquez sur le bouton ¬´Confirmer¬ª.  Si notre fonction d' <i>index (demande)</i> , √©crite dans le fichier <i>/django/mybot/vk_bot/views.py,</i> fonctionne correctement, c'est-√†-dire qu'elle ne contient pas de fautes de frappe et d'erreurs, une coche verte appara√Ætra, symbolisant que tout va bien. <br><br>  Pour que notre webhook re√ßoive des messages du serveur VKontakte sur les nouveaux messages des utilisateurs, dans la section de gestion de notre groupe sur le site Web de VKontakte, dans l'onglet "Types d'√©v√©nements", cochez la case "messages entrants". <br><br>  En cons√©quence, notre script recevra ces messages au format <i>json</i> : <br><br><pre> <code class="python hljs">{<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"message_new"</span></span>,<span class="hljs-string"><span class="hljs-string">"object"</span></span>:{<span class="hljs-string"><span class="hljs-string">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">891</span></span>,<span class="hljs-string"><span class="hljs-string">"date"</span></span>:<span class="hljs-number"><span class="hljs-number">1541599508</span></span>,<span class="hljs-string"><span class="hljs-string">"out"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">"user_id"</span></span>:<span class="hljs-number"><span class="hljs-number">1.</span></span>.<span class="hljs-number"><span class="hljs-number">.1</span></span>,<span class="hljs-string"><span class="hljs-string">"read_state"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">"title"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">"body"</span></span>:<span class="hljs-string"><span class="hljs-string">"  "</span></span>},<span class="hljs-string"><span class="hljs-string">"group_id"</span></span>:<span class="hljs-number"><span class="hljs-number">1.</span></span>.<span class="hljs-number"><span class="hljs-number">.4</span></span>,<span class="hljs-string"><span class="hljs-string">"secret"</span></span>:<span class="hljs-string"><span class="hljs-string">"uxSBw"</span></span>}</code> </pre><br>  Veuillez noter qu'il y a un champ "secret" dans le message <i>json</i> .  Il s'agit de la m√™me cl√© secr√®te que j'ai enregistr√©e dans la section de gestion de groupe du site Web de VKontakte, au lieu de la protection int√©gr√©e √† Django CSRF, que j'ai d√ª d√©sactiver. <br><br><h3>  Comment rendre un bot plus intelligent et meilleur? </h3><br>  Vous pouvez cr√©er une base de donn√©es avec des r√©ponses √† l'utilisateur et apprendre au bot √† choisir la r√©ponse qui se rapproche le plus de la question de l'utilisateur.  J'en parlerai dans un article s√©par√©. <br>  Il est possible et n√©cessaire de programmer des sc√©narios d'interaction utilisateur, pour ainsi dire, pour maintenir une conversation. <br><br>  Bonne chance dans votre travail cr√©atif! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr429628/">https://habr.com/ru/post/fr429628/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr429618/index.html">Jeu √©lectronique XO</a></li>
<li><a href="../fr429620/index.html">Comment j'ai cr√©√© des cartes des continents pour mon jeu</a></li>
<li><a href="../fr429622/index.html">Les robots ont remplac√© Amazon avec 20 000 employ√©s</a></li>
<li><a href="../fr429624/index.html">Comment la NASA utilisera des robots pour cr√©er du carburant de fus√©e √† partir du sol martien</a></li>
<li><a href="../fr429626/index.html">Les crackers du g√©nome ont montr√© qu'aucun ADN ne sera plus anonyme</a></li>
<li><a href="../fr429630/index.html">"Monstres dans les jeux ou rendre la peur diversifi√©e"</a></li>
<li><a href="../fr429632/index.html">Raisons du refus des h√©bergeurs lors de l'ajout aux r√©pertoires</a></li>
<li><a href="../fr429634/index.html">Voici comment fonctionne la recherche de pr√™ts dans l'Anti-Plagiat</a></li>
<li><a href="../fr429636/index.html">Installer le PBX 3CX dans Amazon Lightsail Cloud</a></li>
<li><a href="../fr429638/index.html">Chat, extraire: l'architecture des chatbots complexes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>