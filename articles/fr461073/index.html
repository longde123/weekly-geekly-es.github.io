<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐬 📊 👩🏿‍✈️ Nous connectons des cartes en ligne au navigateur sur le smartphone. Partie 3 - OverpassTurbo 🍻 🛁 👩‍👧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous transformons le script précédemment créé en une API pour afficher une carte interactive à partir du site Web OverpassTurbo.eu via l'application d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous connectons des cartes en ligne au navigateur sur le smartphone. Partie 3 - OverpassTurbo</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461073/"><p>  Nous transformons le script précédemment créé en une API pour afficher une carte interactive à partir du site Web OverpassTurbo.eu via l'application de navigation du smartphone. </p><a name="habracut"></a><br><p>  Contenu: </p><br><p>  1 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Introduction.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartes raster standard</a> <br>  2 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Suite.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Écrire un rasterizer simple pour les cartes vectorielles</a> <br>  3 - Un cas particulier.  Nous connectons la carte OverpassTurbo </p><br><h3 id="chto-takoe-overpassturbo">  Qu'est-ce que OverpassTurbo? </h3><br><p> Alors.  Il existe une base de données cartographiques comme OpenStreetMaps.  Il contient tout: les mers, les contours des continents, les montagnes, les forêts, les routes, les bâtiments, les terrains de jeux et même les ralentisseurs.  Chaque objet a un nom, des coordonnées et des propriétés.  Par exemple, par la route - le matériau de revêtement, par le bâtiment - le nombre d'étages, etc. </p><br><p>  Alors voilà.  La plupart des cartes qui sont présentées sur Internet aujourd'hui sont générées sur la base de cette base de données particulière.  Mais que faire si toutes ces cartes toutes faites ne nous conviennent pas?  Vous pouvez créer le vôtre!  Eh bien, ou du moins compléter celui existant, ce qui est beaucoup plus facile. </p><br><p>  C'est ce que fait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">OverpassTurbo.eu</a> .  Il s'agit d'un IDE en ligne.  En l'utilisant, vous pouvez interroger la base de données OSM.  Nous cliquons sur le bouton <strong>Démarrer</strong> , la demande va à la base de données et après un certain temps, les données nous reviennent.  OverpassTurbo visualise ces données sous la forme de marqueurs vectoriels et de lignes situées au-dessus de la couche d'arrière-plan - une carte d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">OpenSteerMap.org</a> . </p><br><p>  Comme exemple de ce que vous pouvez faire avec OverpassTurbo, je veux vous montrer le script que j'aime le plus.  Il a été écrit par un utilisateur sous le surnom d'Erelen.  Donc: ce script dessine sur la carte différentes sources d'eau potable et leur nom.  À mon avis, c'est très utile et très clair.  Pour voir comment ce script fonctionne, suivez simplement le lien et cliquez sur <strong>Démarrer</strong> .  (Si le site donne une erreur, passez par le VPN et réessayez) </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">https://overpass-turbo.eu/s/z95</a> </p><br><p><img src="https://habrastorage.org/webt/64/fa/g4/64fag4skex-vyoy75agsaqvt0_w.png"></p><br><p>  Ou voici un script que j'ai déjà fait pour mes propres besoins.  Avec lui, vous pouvez facilement trouver de bons itinéraires de jogging dans des parcs inconnus.  Pour ce faire, le script met en évidence des chemins de gravier bien entretenus: c'est le plus pratique pour les parcourir, à mon goût.  L'asphalte est marqué en blanc.  Chemins de terre ordinaires en noir.  Mais tous les chemins avec la balise «difficile à atteindre» ou «mauvaise qualité de revêtement» seront marqués d'un trait discontinu discret: afin de trébucher moins souvent, j'essaye de les éviter.  En général, la carte est conçue de sorte que vous pouvez simplement obtenir des directions le long des lignes les plus marquantes.  Et pour qu'au final cette route soit réussie. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">http://overpass-turbo.eu/s/KXU</a> </p><br><p><img src="https://habrastorage.org/webt/gi/8n/pa/gi8npad8i2az-pu8q2x2gb7xziw.png"></p><br><p>  En fait, avec cet outil, vous pouvez compléter la carte avec toutes les données que vous aimez.  Et je constate que c'est très, très excitant.  Mais cet article ne traite pas de cela.  Si vous êtes intéressé par ce sujet, vous pouvez vous familiariser avec les bases d'Overpass <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ici</a> . </p><br><p>  Mais avant de passer au code, examinons d'abord le résultat final que nous devrions obtenir. </p><br><h3 id="instrukciya-dlya-polzovateley-kak-polzovatsya-nashim-api">  Instructions pour les utilisateurs: comment utiliser notre API </h3><br><p>  Alors.  Supposons que vous ayez déjà un script prêt à l'emploi pour OverpassTurbo, dont vous souhaitez voir les résultats sur votre smartphone.  Et pas dans le navigateur, mais dans le navigateur.  Pour ce faire, amenez votre script au format suivant. </p><br><pre><code class="css hljs"><span class="hljs-selector-attr"><span class="hljs-selector-attr">[bbox:{{bbox}}]</span></span>; ( //     <span class="hljs-selector-tag"><span class="hljs-selector-tag">node</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[amenity=waste_basket]</span></span>; ); <span class="hljs-selector-tag"><span class="hljs-selector-tag">out</span></span>;&gt;;<span class="hljs-selector-tag"><span class="hljs-selector-tag">out</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">skel</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">qt</span></span>;</code> </pre> <br><p>  En particulier, nous nous intéressons à la première ligne: notre application la remplacera. </p><br><p>  Après cela, cliquez sur le bouton <strong>Partager</strong> .  Assurez-vous de décocher l' <strong>état Activer de la zone de carte affichée</strong> . </p><br><p><img src="https://habrastorage.org/webt/vi/75/ug/vi75ughpyooqulnwtesjmeftlwk.png"></p><br><p>  Après cela, copiez le lien.  Par exemple, nous supposons que votre lien copié ressemble à ceci: </p><br><p> <code>http://overpass-turbo.eu/s/KEy</code> </p> <br><p>  Regardez maintenant notre API </p><br><p> <code>https://anygis.herokuapp.com/mapshoter/overpass/{x}/{y}/{z}/{crossZoom}?script={script}</code> </p> <br><p>  Avec <strong>{x}, {y}</strong> et <strong>{z},</strong> tout semble clair: ce sont les coordonnées de la tuile souhaitée. </p><br><p>  Au lieu de <strong>{script},</strong> vous devez remplacer l' <strong>ID de</strong> votre script.  Dans notre exemple, <strong>s / Key</strong> . </p><br><p>  Mais qu'est-ce que <strong>{crossZoom}</strong> ?  Supposons que vous en ayez 15. Ensuite, si vous demandez une vignette pour un zoom inférieur à 15, le serveur ne fera pas de demande lente à OverpassTurbo, mais vous redirigera simplement vers la carte avec une couche d'arrière-plan OpenStreetMaps vide (qui se chargera presque instantanément).  Cette approche est nécessaire pour que, si nécessaire, vous puissiez éloigner la carte, faire défiler rapidement vers le lieu d'intérêt, zoomer et attendre.  Attendez que OverpassTurbo génère une carte avec les résultats. </p><br><p>  J'espère que le principe de base est clair.  Regardez maintenant l'URL complétée pour notre demande.  Je pense que maintenant, utiliser notre API ne sera pas difficile pour vous: remplacez simplement <strong>s / KEy</strong> par l' <strong>ID de</strong> votre script. </p><br><p> <code>https://anygis.herokuapp.com/mapshoter/overpass/{x}/{y}/{z}/15?script=s/KEy</code> </p> <br><p>  Et nous, quant à nous, verrons comment implémenter une telle application. </p><br><h3 id="scenariy-3--poisk-s-pomoschyu-url-i-kesha-brauzera">  Scénario 3 - Recherche à l'aide de l'URL et du cache du navigateur </h3><br><p>  Alors.  Commençons par le fichier <strong>router.js</strong> .  Faisons en sorte que notre méthode accepte les paramètres de <strong>crossZoom</strong> et de <strong>script</strong> .  Et puis nous les transmettons au travailleur.  Nous ajoutons également une option qui interrompra le script et redirigera l'utilisateur vers un autre site si le zoom demandé est trop faible. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> express = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'express'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PORT = process.env.PORT || <span class="hljs-number"><span class="hljs-number">5000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = express() app.listen( PORT, () =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( <span class="hljs-string"><span class="hljs-string">'    '</span></span>, PORT ) }) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { StaticPool } = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'node-worker-threads-pool'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> worker = <span class="hljs-string"><span class="hljs-string">"./worker.js"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> workersPool = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StaticPool({ <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">task</span></span>: worker, <span class="hljs-attr"><span class="hljs-attr">workerData</span></span>: <span class="hljs-string"><span class="hljs-string">"no"</span></span> }) <span class="hljs-comment"><span class="hljs-comment">//     app.get( '/:x/:y/:z/:crossZoom', async ( req, res, next ) =&gt; { const x = req.params.x const y = req.params.y const z = req.params.z const crossZoom = req.params.crossZoom const scriptName = req.query.script //     if ( Number( z ) &lt; Number( crossZoom ) ) { res.redirect( `http://tile.openstreetmap.org/${z}/${x}/${y}.png` ) } //      const screenshot = await workersPool.exec( { x, y, z, scriptName } ) const imageBuffer = Buffer.from( screenshot, 'base64' ) res.writeHead( 200, { 'Content-Type': 'image/png', 'Content-Length': imageBuffer.length }) res.end( imageBuffer ) })</span></span></code> </pre><br><p>  Le fichier <strong>worker.js</strong> n'a pas beaucoup changé.  Transférez simplement les nouvelles variables. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { parentPort, workerData } = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'worker_threads'</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> puppeteer = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'puppeteer'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapshoter = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'./mapshoter'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> browser = <span class="hljs-string"><span class="hljs-string">"empty"</span></span> parentPort.on( <span class="hljs-string"><span class="hljs-string">"message"</span></span>, ( params ) =&gt; { doMyAsyncCode( params ) .then( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> result </span></span></span><span class="hljs-function">) =&gt;</span></span> { parentPort.postMessage( result ) }) }) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doMyAsyncCode</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> params </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> prepareEnviroment() <span class="hljs-comment"><span class="hljs-comment">//   const screenshot = await mapshoter.makeTile( params.x, params.y, params.z, params.scriptName, browser ) return screenshot } async function prepareEnviroment( ) { if ( browser === "empty" ) { const herokuDeploymentParams = {'args' : ['--no-sandbox', '--disable-setuid-sandbox']} browser = await puppeteer.launch( herokuDeploymentParams ) } }</span></span></code> </pre> <br><p>  <strong>Jetons</strong> maintenant <strong>un</strong> œil à <strong>mapshoter.js</strong> .  Tout d'abord, regardez le code: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> puppeteer = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'puppeteer'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> geoTools = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'./geoTools'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeTile</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> x, y, z, scriptName, browserLink </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      const runButtonSelector = '#navs &gt; div &gt; div.buttons &gt; div:nth-child(1) &gt; a:nth-child(1)' const codeEditorSelector = '#editor &gt; div.CodeMirror.CodeMirror-wrap &gt; div:nth-child(1) &gt; textarea' //          const coordinates = geoTools.getAllCoordinates( x, y, z ) const bBox = `[bbox:${coordinates.bBox.latMin}, ${coordinates.bBox.lonMin}, ${coordinates.bBox.latMax}, ${coordinates.bBox.lonMax}];` const centerCoordinates = `${coordinates.center.lat};${coordinates.center.lon};${z}` //      const browser = await browserLink const page = await browser.newPage() await page.setViewport( { width: 850, height: 450 } ) //  ,   : //      await page.waitFor( randomInt( 0, 500 ) ) //        URL var pageUrl = `http://overpass-turbo.eu/?C=${centerCoordinates}` await page.goto( pageUrl, { waitUntil: 'networkidle2', timeout: 10000 } ) //       URL pageUrl = 'http://overpass-turbo.eu/' + scriptName await page.goto( pageUrl, { waitUntil: 'networkidle0', timeout: 20000 } ) //      await page.focus( codeEditorSelector ) //        , //     await page.keyboard.type( bBox + ' //' ) // ,  -IDE   await page.waitFor( 100 ) //     - await page.click( runButtonSelector ) // ,      . //     . await page.waitForFunction(() =&gt; !document.querySelector('body &gt; div.modal &gt; div &gt; ul &gt; li:nth-child(1)'), {polling: 'mutation'}); await page.waitFor( 1000 ) //    const cropOptions = { fullPage: false, clip: { x: 489, y: 123, width: 256, height: 256 } } const screenshot = await page.screenshot( cropOptions ) //   await page.close() return screenshot } //       function randomInt( low, high ) { return Math.floor( Math.random() * ( high - low ) + low ) } module.exports.makeTile = makeTile</span></span></code> </pre> <br><p>  Pour commencer, dans ce script, pour des raisons de variété, nous travaillerons avec des sélecteurs d'éléments ordinaires (qui ne sont pas <strong>XPath</strong> ).  Comment les trouver a été décrit dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article précédent</a> . </p><br><p>  Ensuite, nous obtenons les coordonnées.  Seulement cette fois, en plus des coordonnées centrales, les coordonnées des bordures de <strong>carreaux</strong> ( <strong>bBox</strong> ) sont également nécessaires. </p><br><p>  Ensuite, lancez le navigateur.  Tout est typique ici.  Mais avant de passer au chargement de la page, laissez le script attendre un temps aléatoire de 0 à 500 ms.  Pour ne pas recevoir trop de demandes identiques de notre part et nous ne sommes pas bannis. </p><br><p>  Après cela, nous allons sur le site à l'URL à laquelle les coordonnées du centre de la tuile sont ajoutées.  Par conséquent, l'endroit souhaité se trouve au centre de la carte. </p><br><p>  Après cela, accédez à une autre URL.  Cette fois avec l' <strong>ID de</strong> notre script.  En conséquence, notre script apparaîtra dans le texte de l'éditeur de code. </p><br><p>  (Veuillez noter que si dans le menu <strong>Partager</strong> lors de la copie de l'URL de notre script, nous ne décocherions pas la case à cocher <strong>Enregistrer l'état</strong> de la carte, la carte se déplacerait. Et nous n'en avons pas besoin du tout) </p><br><p>  Et maintenant, je vais répondre raisonnablement à la question: pourquoi allons-nous à l'URL deux fois, c'est-à-dire que nous dépensons deux fois pour charger ce site?  Je réponds.  Parce que, tout d'abord, je n'ai pas trouvé comment combiner le chargement du script et la transition vers les coordonnées spécifiées dans une seule demande d'URL.  Deuxièmement, parce que, pour une raison quelconque, Puppeteer imprime le texte extrêmement lentement et fonctionne avec les éléments d'interface de ce site.  Une minute et demie peut imprimer!  Donc, l'idée d'insérer les coordonnées dans le champ de recherche, puis de cliquer sur les boutons de zoom, comme nous l'avons fait dans l'article précédent, il a été décidé de refuser.  En conséquence, double-cliquer sur le lien s'est avéré beaucoup plus rapide que de faire tout cela.  C'est peut-être un bug et il sera corrigé tôt ou tard, mais pour l'instant nous travaillons avec ce qui est. </p><br><p>  Hélas, vous ne pourrez pas quitter complètement la saisie de texte.  Nous devrons remplacer la première ligne de la fenêtre de l'éditeur de code.  À l'heure actuelle, elle signale qu'il est nécessaire de télécharger des informations de la base de données pour l'ensemble du territoire qui est actuellement à l'écran. </p><br><pre> <code class="javascript hljs">[bbox:{{bbox}}];</code> </pre> <br><p>  Nous allons le remplacer par les coordonnées des bordures de la tuile.  Ceci afin de ne pas perdre trop de temps à télécharger depuis la base de données.  Ainsi, le script imprime dans la première ligne quelque chose comme ce texte: </p><br><pre> <code class="javascript hljs">[bbox:<span class="hljs-number"><span class="hljs-number">55.6279</span></span>, <span class="hljs-number"><span class="hljs-number">37.5622</span></span>, <span class="hljs-number"><span class="hljs-number">55.6341</span></span>, <span class="hljs-number"><span class="hljs-number">37.5732</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//</span></span></code> </pre> <br><p>  Et pour ne pas avoir à effacer la ligne d'origine (plusieurs fois en appuyant lentement sur <strong>Supprimer</strong> pour cela), nous la commentons simplement.  Ainsi, nous réduirons autant que possible le temps passé à saisir du texte et le temps de chargement depuis la base de données.  Par conséquent, la première ligne ressemblera à ceci: </p><br><pre> <code class="javascript hljs">[bbox:<span class="hljs-number"><span class="hljs-number">55.6279</span></span>, <span class="hljs-number"><span class="hljs-number">37.5622</span></span>, <span class="hljs-number"><span class="hljs-number">55.6341</span></span>, <span class="hljs-number"><span class="hljs-number">37.5732</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//[bbox:{{bbox}}];</span></span></code> </pre> <br><p>  Après cela, notre script doit cliquer sur le bouton <strong>Démarrer</strong> , attendre un peu, prendre une capture d'écran de la carte et l'envoyer à l'utilisateur.  Et tout: la tâche est terminée! </p><br><p>  Si vous souhaitez consulter un exemple du script résultant, vous pouvez cliquer sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ce lien</a> . </p><br><h3 id="zaklyuchenie">  Conclusion </h3><br><p>  Eh bien, comme il n'est pas difficile de supposer, cette version du script fonctionnera encore plus lentement que les précédentes.  Après tout, le site passe maintenant du temps sur une demande d'une base de données tierce.  Et en soi, ça ne marche pas trop vite.  Cependant, cette méthode rend extrêmement facile (quoique lente) l'obtention d'une carte unique et personnalisée.  Et, en outre, sur la base des dernières données.  Et cela, parfois, peut être très utile.  Il vaut donc la peine d’avoir une telle méthode à l’esprit. </p><br><p>  Et c'est tout.  Au cas où, je vous rappelle que sur mon site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">AnyGIS il y a une</a> archive de préréglages prêts à l'emploi pour les navigateurs Locus, OsmAnd et GuruMaps.  Il existe à la fois des cartes raster et des cartes vectorielles "tramées", pour visualiser l'application utilisée dans ces articles.  Venez utiliser. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr461073/">https://habr.com/ru/post/fr461073/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr461061/index.html">Alliages de magnésium, frontières jumelles et ségrégation</a></li>
<li><a href="../fr461063/index.html">Interaction de R avec des bases de données sur l'exemple de Microsoft SQL Server et d'autres SGBD</a></li>
<li><a href="../fr461067/index.html">Les 65 principales questions SQL des entretiens d'embauche auxquelles vous devriez vous préparer en 2019. Partie I</a></li>
<li><a href="../fr461069/index.html">Caméras IP extérieures Nobelic: tests, technologies et capacités des systèmes de vidéosurveillance Ivideon</a></li>
<li><a href="../fr461071/index.html">Optimisation des requêtes de base de données sur l'exemple de service B2B pour les constructeurs</a></li>
<li><a href="../fr461075/index.html">Intelligence d'affaires. Objets informatiques, composants, outils</a></li>
<li><a href="../fr461077/index.html">Comment les pentesters sont-ils cuits? Test d'entrée pour les stagiaires en sécurité numérique</a></li>
<li><a href="../fr461079/index.html">Ville sans embouteillage</a></li>
<li><a href="../fr461081/index.html">Le jour où Dodo IS s'est arrêté. Script asynchrone</a></li>
<li><a href="../fr461083/index.html">Logiciel d'écriture avec la fonctionnalité des utilitaires client-serveur Windows, partie 02</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>