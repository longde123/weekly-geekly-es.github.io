<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê¨ üìä üë©üèø‚Äç‚úàÔ∏è Nous connectons des cartes en ligne au navigateur sur le smartphone. Partie 3 - OverpassTurbo üçª üõÅ üë©‚Äçüëß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous transformons le script pr√©c√©demment cr√©√© en une API pour afficher une carte interactive √† partir du site Web OverpassTurbo.eu via l'application d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous connectons des cartes en ligne au navigateur sur le smartphone. Partie 3 - OverpassTurbo</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461073/"><p>  Nous transformons le script pr√©c√©demment cr√©√© en une API pour afficher une carte interactive √† partir du site Web OverpassTurbo.eu via l'application de navigation du smartphone. </p><a name="habracut"></a><br><p>  Contenu: </p><br><p>  1 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Introduction.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartes raster standard</a> <br>  2 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Suite.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√âcrire un rasterizer simple pour les cartes vectorielles</a> <br>  3 - Un cas particulier.  Nous connectons la carte OverpassTurbo </p><br><h3 id="chto-takoe-overpassturbo">  Qu'est-ce que OverpassTurbo? </h3><br><p> Alors.  Il existe une base de donn√©es cartographiques comme OpenStreetMaps.  Il contient tout: les mers, les contours des continents, les montagnes, les for√™ts, les routes, les b√¢timents, les terrains de jeux et m√™me les ralentisseurs.  Chaque objet a un nom, des coordonn√©es et des propri√©t√©s.  Par exemple, par la route - le mat√©riau de rev√™tement, par le b√¢timent - le nombre d'√©tages, etc. </p><br><p>  Alors voil√†.  La plupart des cartes qui sont pr√©sent√©es sur Internet aujourd'hui sont g√©n√©r√©es sur la base de cette base de donn√©es particuli√®re.  Mais que faire si toutes ces cartes toutes faites ne nous conviennent pas?  Vous pouvez cr√©er le v√¥tre!  Eh bien, ou du moins compl√©ter celui existant, ce qui est beaucoup plus facile. </p><br><p>  C'est ce que fait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">OverpassTurbo.eu</a> .  Il s'agit d'un IDE en ligne.  En l'utilisant, vous pouvez interroger la base de donn√©es OSM.  Nous cliquons sur le bouton <strong>D√©marrer</strong> , la demande va √† la base de donn√©es et apr√®s un certain temps, les donn√©es nous reviennent.  OverpassTurbo visualise ces donn√©es sous la forme de marqueurs vectoriels et de lignes situ√©es au-dessus de la couche d'arri√®re-plan - une carte d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">OpenSteerMap.org</a> . </p><br><p>  Comme exemple de ce que vous pouvez faire avec OverpassTurbo, je veux vous montrer le script que j'aime le plus.  Il a √©t√© √©crit par un utilisateur sous le surnom d'Erelen.  Donc: ce script dessine sur la carte diff√©rentes sources d'eau potable et leur nom.  √Ä mon avis, c'est tr√®s utile et tr√®s clair.  Pour voir comment ce script fonctionne, suivez simplement le lien et cliquez sur <strong>D√©marrer</strong> .  (Si le site donne une erreur, passez par le VPN et r√©essayez) </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">https://overpass-turbo.eu/s/z95</a> </p><br><p><img src="https://habrastorage.org/webt/64/fa/g4/64fag4skex-vyoy75agsaqvt0_w.png"></p><br><p>  Ou voici un script que j'ai d√©j√† fait pour mes propres besoins.  Avec lui, vous pouvez facilement trouver de bons itin√©raires de jogging dans des parcs inconnus.  Pour ce faire, le script met en √©vidence des chemins de gravier bien entretenus: c'est le plus pratique pour les parcourir, √† mon go√ªt.  L'asphalte est marqu√© en blanc.  Chemins de terre ordinaires en noir.  Mais tous les chemins avec la balise ¬´difficile √† atteindre¬ª ou ¬´mauvaise qualit√© de rev√™tement¬ª seront marqu√©s d'un trait discontinu discret: afin de tr√©bucher moins souvent, j'essaye de les √©viter.  En g√©n√©ral, la carte est con√ßue de sorte que vous pouvez simplement obtenir des directions le long des lignes les plus marquantes.  Et pour qu'au final cette route soit r√©ussie. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">http://overpass-turbo.eu/s/KXU</a> </p><br><p><img src="https://habrastorage.org/webt/gi/8n/pa/gi8npad8i2az-pu8q2x2gb7xziw.png"></p><br><p>  En fait, avec cet outil, vous pouvez compl√©ter la carte avec toutes les donn√©es que vous aimez.  Et je constate que c'est tr√®s, tr√®s excitant.  Mais cet article ne traite pas de cela.  Si vous √™tes int√©ress√© par ce sujet, vous pouvez vous familiariser avec les bases d'Overpass <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ici</a> . </p><br><p>  Mais avant de passer au code, examinons d'abord le r√©sultat final que nous devrions obtenir. </p><br><h3 id="instrukciya-dlya-polzovateley-kak-polzovatsya-nashim-api">  Instructions pour les utilisateurs: comment utiliser notre API </h3><br><p>  Alors.  Supposons que vous ayez d√©j√† un script pr√™t √† l'emploi pour OverpassTurbo, dont vous souhaitez voir les r√©sultats sur votre smartphone.  Et pas dans le navigateur, mais dans le navigateur.  Pour ce faire, amenez votre script au format suivant. </p><br><pre><code class="css hljs"><span class="hljs-selector-attr"><span class="hljs-selector-attr">[bbox:{{bbox}}]</span></span>; ( //     <span class="hljs-selector-tag"><span class="hljs-selector-tag">node</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[amenity=waste_basket]</span></span>; ); <span class="hljs-selector-tag"><span class="hljs-selector-tag">out</span></span>;&gt;;<span class="hljs-selector-tag"><span class="hljs-selector-tag">out</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">skel</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">qt</span></span>;</code> </pre> <br><p>  En particulier, nous nous int√©ressons √† la premi√®re ligne: notre application la remplacera. </p><br><p>  Apr√®s cela, cliquez sur le bouton <strong>Partager</strong> .  Assurez-vous de d√©cocher l' <strong>√©tat Activer de la zone de carte affich√©e</strong> . </p><br><p><img src="https://habrastorage.org/webt/vi/75/ug/vi75ughpyooqulnwtesjmeftlwk.png"></p><br><p>  Apr√®s cela, copiez le lien.  Par exemple, nous supposons que votre lien copi√© ressemble √† ceci: </p><br><p> <code>http://overpass-turbo.eu/s/KEy</code> </p> <br><p>  Regardez maintenant notre API </p><br><p> <code>https://anygis.herokuapp.com/mapshoter/overpass/{x}/{y}/{z}/{crossZoom}?script={script}</code> </p> <br><p>  Avec <strong>{x}, {y}</strong> et <strong>{z},</strong> tout semble clair: ce sont les coordonn√©es de la tuile souhait√©e. </p><br><p>  Au lieu de <strong>{script},</strong> vous devez remplacer l' <strong>ID de</strong> votre script.  Dans notre exemple, <strong>s / Key</strong> . </p><br><p>  Mais qu'est-ce que <strong>{crossZoom}</strong> ?  Supposons que vous en ayez 15. Ensuite, si vous demandez une vignette pour un zoom inf√©rieur √† 15, le serveur ne fera pas de demande lente √† OverpassTurbo, mais vous redirigera simplement vers la carte avec une couche d'arri√®re-plan OpenStreetMaps vide (qui se chargera presque instantan√©ment).  Cette approche est n√©cessaire pour que, si n√©cessaire, vous puissiez √©loigner la carte, faire d√©filer rapidement vers le lieu d'int√©r√™t, zoomer et attendre.  Attendez que OverpassTurbo g√©n√®re une carte avec les r√©sultats. </p><br><p>  J'esp√®re que le principe de base est clair.  Regardez maintenant l'URL compl√©t√©e pour notre demande.  Je pense que maintenant, utiliser notre API ne sera pas difficile pour vous: remplacez simplement <strong>s / KEy</strong> par l' <strong>ID de</strong> votre script. </p><br><p> <code>https://anygis.herokuapp.com/mapshoter/overpass/{x}/{y}/{z}/15?script=s/KEy</code> </p> <br><p>  Et nous, quant √† nous, verrons comment impl√©menter une telle application. </p><br><h3 id="scenariy-3--poisk-s-pomoschyu-url-i-kesha-brauzera">  Sc√©nario 3 - Recherche √† l'aide de l'URL et du cache du navigateur </h3><br><p>  Alors.  Commen√ßons par le fichier <strong>router.js</strong> .  Faisons en sorte que notre m√©thode accepte les param√®tres de <strong>crossZoom</strong> et de <strong>script</strong> .  Et puis nous les transmettons au travailleur.  Nous ajoutons √©galement une option qui interrompra le script et redirigera l'utilisateur vers un autre site si le zoom demand√© est trop faible. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> express = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'express'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PORT = process.env.PORT || <span class="hljs-number"><span class="hljs-number">5000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = express() app.listen( PORT, () =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( <span class="hljs-string"><span class="hljs-string">'    '</span></span>, PORT ) }) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { StaticPool } = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'node-worker-threads-pool'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> worker = <span class="hljs-string"><span class="hljs-string">"./worker.js"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> workersPool = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StaticPool({ <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">task</span></span>: worker, <span class="hljs-attr"><span class="hljs-attr">workerData</span></span>: <span class="hljs-string"><span class="hljs-string">"no"</span></span> }) <span class="hljs-comment"><span class="hljs-comment">//     app.get( '/:x/:y/:z/:crossZoom', async ( req, res, next ) =&gt; { const x = req.params.x const y = req.params.y const z = req.params.z const crossZoom = req.params.crossZoom const scriptName = req.query.script //     if ( Number( z ) &lt; Number( crossZoom ) ) { res.redirect( `http://tile.openstreetmap.org/${z}/${x}/${y}.png` ) } //      const screenshot = await workersPool.exec( { x, y, z, scriptName } ) const imageBuffer = Buffer.from( screenshot, 'base64' ) res.writeHead( 200, { 'Content-Type': 'image/png', 'Content-Length': imageBuffer.length }) res.end( imageBuffer ) })</span></span></code> </pre><br><p>  Le fichier <strong>worker.js</strong> n'a pas beaucoup chang√©.  Transf√©rez simplement les nouvelles variables. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { parentPort, workerData } = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'worker_threads'</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> puppeteer = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'puppeteer'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapshoter = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'./mapshoter'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> browser = <span class="hljs-string"><span class="hljs-string">"empty"</span></span> parentPort.on( <span class="hljs-string"><span class="hljs-string">"message"</span></span>, ( params ) =&gt; { doMyAsyncCode( params ) .then( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> result </span></span></span><span class="hljs-function">) =&gt;</span></span> { parentPort.postMessage( result ) }) }) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doMyAsyncCode</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> params </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> prepareEnviroment() <span class="hljs-comment"><span class="hljs-comment">//   const screenshot = await mapshoter.makeTile( params.x, params.y, params.z, params.scriptName, browser ) return screenshot } async function prepareEnviroment( ) { if ( browser === "empty" ) { const herokuDeploymentParams = {'args' : ['--no-sandbox', '--disable-setuid-sandbox']} browser = await puppeteer.launch( herokuDeploymentParams ) } }</span></span></code> </pre> <br><p>  <strong>Jetons</strong> maintenant <strong>un</strong> ≈ìil √† <strong>mapshoter.js</strong> .  Tout d'abord, regardez le code: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> puppeteer = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'puppeteer'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> geoTools = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'./geoTools'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeTile</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> x, y, z, scriptName, browserLink </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      const runButtonSelector = '#navs &gt; div &gt; div.buttons &gt; div:nth-child(1) &gt; a:nth-child(1)' const codeEditorSelector = '#editor &gt; div.CodeMirror.CodeMirror-wrap &gt; div:nth-child(1) &gt; textarea' //          const coordinates = geoTools.getAllCoordinates( x, y, z ) const bBox = `[bbox:${coordinates.bBox.latMin}, ${coordinates.bBox.lonMin}, ${coordinates.bBox.latMax}, ${coordinates.bBox.lonMax}];` const centerCoordinates = `${coordinates.center.lat};${coordinates.center.lon};${z}` //      const browser = await browserLink const page = await browser.newPage() await page.setViewport( { width: 850, height: 450 } ) //  ,   : //      await page.waitFor( randomInt( 0, 500 ) ) //        URL var pageUrl = `http://overpass-turbo.eu/?C=${centerCoordinates}` await page.goto( pageUrl, { waitUntil: 'networkidle2', timeout: 10000 } ) //       URL pageUrl = 'http://overpass-turbo.eu/' + scriptName await page.goto( pageUrl, { waitUntil: 'networkidle0', timeout: 20000 } ) //      await page.focus( codeEditorSelector ) //        , //     await page.keyboard.type( bBox + ' //' ) // ,  -IDE   await page.waitFor( 100 ) //     - await page.click( runButtonSelector ) // ,      . //     . await page.waitForFunction(() =&gt; !document.querySelector('body &gt; div.modal &gt; div &gt; ul &gt; li:nth-child(1)'), {polling: 'mutation'}); await page.waitFor( 1000 ) //    const cropOptions = { fullPage: false, clip: { x: 489, y: 123, width: 256, height: 256 } } const screenshot = await page.screenshot( cropOptions ) //   await page.close() return screenshot } //       function randomInt( low, high ) { return Math.floor( Math.random() * ( high - low ) + low ) } module.exports.makeTile = makeTile</span></span></code> </pre> <br><p>  Pour commencer, dans ce script, pour des raisons de vari√©t√©, nous travaillerons avec des s√©lecteurs d'√©l√©ments ordinaires (qui ne sont pas <strong>XPath</strong> ).  Comment les trouver a √©t√© d√©crit dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article pr√©c√©dent</a> . </p><br><p>  Ensuite, nous obtenons les coordonn√©es.  Seulement cette fois, en plus des coordonn√©es centrales, les coordonn√©es des bordures de <strong>carreaux</strong> ( <strong>bBox</strong> ) sont √©galement n√©cessaires. </p><br><p>  Ensuite, lancez le navigateur.  Tout est typique ici.  Mais avant de passer au chargement de la page, laissez le script attendre un temps al√©atoire de 0 √† 500 ms.  Pour ne pas recevoir trop de demandes identiques de notre part et nous ne sommes pas bannis. </p><br><p>  Apr√®s cela, nous allons sur le site √† l'URL √† laquelle les coordonn√©es du centre de la tuile sont ajout√©es.  Par cons√©quent, l'endroit souhait√© se trouve au centre de la carte. </p><br><p>  Apr√®s cela, acc√©dez √† une autre URL.  Cette fois avec l' <strong>ID de</strong> notre script.  En cons√©quence, notre script appara√Ætra dans le texte de l'√©diteur de code. </p><br><p>  (Veuillez noter que si dans le menu <strong>Partager</strong> lors de la copie de l'URL de notre script, nous ne d√©cocherions pas la case √† cocher <strong>Enregistrer l'√©tat</strong> de la carte, la carte se d√©placerait. Et nous n'en avons pas besoin du tout) </p><br><p>  Et maintenant, je vais r√©pondre raisonnablement √† la question: pourquoi allons-nous √† l'URL deux fois, c'est-√†-dire que nous d√©pensons deux fois pour charger ce site?  Je r√©ponds.  Parce que, tout d'abord, je n'ai pas trouv√© comment combiner le chargement du script et la transition vers les coordonn√©es sp√©cifi√©es dans une seule demande d'URL.  Deuxi√®mement, parce que, pour une raison quelconque, Puppeteer imprime le texte extr√™mement lentement et fonctionne avec les √©l√©ments d'interface de ce site.  Une minute et demie peut imprimer!  Donc, l'id√©e d'ins√©rer les coordonn√©es dans le champ de recherche, puis de cliquer sur les boutons de zoom, comme nous l'avons fait dans l'article pr√©c√©dent, il a √©t√© d√©cid√© de refuser.  En cons√©quence, double-cliquer sur le lien s'est av√©r√© beaucoup plus rapide que de faire tout cela.  C'est peut-√™tre un bug et il sera corrig√© t√¥t ou tard, mais pour l'instant nous travaillons avec ce qui est. </p><br><p>  H√©las, vous ne pourrez pas quitter compl√®tement la saisie de texte.  Nous devrons remplacer la premi√®re ligne de la fen√™tre de l'√©diteur de code.  √Ä l'heure actuelle, elle signale qu'il est n√©cessaire de t√©l√©charger des informations de la base de donn√©es pour l'ensemble du territoire qui est actuellement √† l'√©cran. </p><br><pre> <code class="javascript hljs">[bbox:{{bbox}}];</code> </pre> <br><p>  Nous allons le remplacer par les coordonn√©es des bordures de la tuile.  Ceci afin de ne pas perdre trop de temps √† t√©l√©charger depuis la base de donn√©es.  Ainsi, le script imprime dans la premi√®re ligne quelque chose comme ce texte: </p><br><pre> <code class="javascript hljs">[bbox:<span class="hljs-number"><span class="hljs-number">55.6279</span></span>, <span class="hljs-number"><span class="hljs-number">37.5622</span></span>, <span class="hljs-number"><span class="hljs-number">55.6341</span></span>, <span class="hljs-number"><span class="hljs-number">37.5732</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//</span></span></code> </pre> <br><p>  Et pour ne pas avoir √† effacer la ligne d'origine (plusieurs fois en appuyant lentement sur <strong>Supprimer</strong> pour cela), nous la commentons simplement.  Ainsi, nous r√©duirons autant que possible le temps pass√© √† saisir du texte et le temps de chargement depuis la base de donn√©es.  Par cons√©quent, la premi√®re ligne ressemblera √† ceci: </p><br><pre> <code class="javascript hljs">[bbox:<span class="hljs-number"><span class="hljs-number">55.6279</span></span>, <span class="hljs-number"><span class="hljs-number">37.5622</span></span>, <span class="hljs-number"><span class="hljs-number">55.6341</span></span>, <span class="hljs-number"><span class="hljs-number">37.5732</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//[bbox:{{bbox}}];</span></span></code> </pre> <br><p>  Apr√®s cela, notre script doit cliquer sur le bouton <strong>D√©marrer</strong> , attendre un peu, prendre une capture d'√©cran de la carte et l'envoyer √† l'utilisateur.  Et tout: la t√¢che est termin√©e! </p><br><p>  Si vous souhaitez consulter un exemple du script r√©sultant, vous pouvez cliquer sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ce lien</a> . </p><br><h3 id="zaklyuchenie">  Conclusion </h3><br><p>  Eh bien, comme il n'est pas difficile de supposer, cette version du script fonctionnera encore plus lentement que les pr√©c√©dentes.  Apr√®s tout, le site passe maintenant du temps sur une demande d'une base de donn√©es tierce.  Et en soi, √ßa ne marche pas trop vite.  Cependant, cette m√©thode rend extr√™mement facile (quoique lente) l'obtention d'une carte unique et personnalis√©e.  Et, en outre, sur la base des derni√®res donn√©es.  Et cela, parfois, peut √™tre tr√®s utile.  Il vaut donc la peine d‚Äôavoir une telle m√©thode √† l‚Äôesprit. </p><br><p>  Et c'est tout.  Au cas o√π, je vous rappelle que sur mon site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">AnyGIS il y a une</a> archive de pr√©r√©glages pr√™ts √† l'emploi pour les navigateurs Locus, OsmAnd et GuruMaps.  Il existe √† la fois des cartes raster et des cartes vectorielles "tram√©es", pour visualiser l'application utilis√©e dans ces articles.  Venez utiliser. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr461073/">https://habr.com/ru/post/fr461073/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr461061/index.html">Alliages de magn√©sium, fronti√®res jumelles et s√©gr√©gation</a></li>
<li><a href="../fr461063/index.html">Interaction de R avec des bases de donn√©es sur l'exemple de Microsoft SQL Server et d'autres SGBD</a></li>
<li><a href="../fr461067/index.html">Les 65 principales questions SQL des entretiens d'embauche auxquelles vous devriez vous pr√©parer en 2019. Partie I</a></li>
<li><a href="../fr461069/index.html">Cam√©ras IP ext√©rieures Nobelic: tests, technologies et capacit√©s des syst√®mes de vid√©osurveillance Ivideon</a></li>
<li><a href="../fr461071/index.html">Optimisation des requ√™tes de base de donn√©es sur l'exemple de service B2B pour les constructeurs</a></li>
<li><a href="../fr461075/index.html">Intelligence d'affaires. Objets informatiques, composants, outils</a></li>
<li><a href="../fr461077/index.html">Comment les pentesters sont-ils cuits? Test d'entr√©e pour les stagiaires en s√©curit√© num√©rique</a></li>
<li><a href="../fr461079/index.html">Ville sans embouteillage</a></li>
<li><a href="../fr461081/index.html">Le jour o√π Dodo IS s'est arr√™t√©. Script asynchrone</a></li>
<li><a href="../fr461083/index.html">Logiciel d'√©criture avec la fonctionnalit√© des utilitaires client-serveur Windows, partie 02</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>