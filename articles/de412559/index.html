<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤦🏼 💯 🏴 Intelligenter Vertrag als Sicherheitsbedrohung für den Blockchain-Start 🈁 💆🏻 👩‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Laut der offiziellen Website werden Smart-Verträge von Ethereum „genau wie programmiert ausgeführt, ohne dass Ausfallzeiten, Zensur, Betrug oder Eingr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Intelligenter Vertrag als Sicherheitsbedrohung für den Blockchain-Start</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/solarsecurity/blog/412559/"><p>  Laut der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offiziellen Website</a> werden Smart-Verträge von Ethereum „genau wie programmiert ausgeführt, ohne dass Ausfallzeiten, Zensur, Betrug oder Eingriffe Dritter möglich sind“.  Heute werde ich versuchen herauszufinden, ob tatsächlich alles so rosig ist, nachdem ich einige der Probleme untersucht habe, mit denen Benutzer intelligenter Verträge in der Praxis konfrontiert sind. </p><br><p>  Am Ende des Artikels fasse ich meine Gedanken mit einer kurzen Anleitung zum Schreiben sicherer intelligenter Verträge zusammen. </p><br><p><img src="https://habrastorage.org/webt/tm/km/3c/tmkm3czjvvcrgcylejipvz9f4oa.png" alt="Bild"></p><a name="habracut"></a><br><h2 id="remarki">  Bemerkungen </h2><br><ol><li>  Dieser Artikel konzentriert sich nur auf intelligente Verträge von Ethereum.  Die Community hat stillschweigend intelligente Verträge mit intelligenten Verträgen von Ethereum identifiziert.  In der Zwischenzeit ist das erste eher ein Konzept, und das zweite ist die Implementierung, und die Frage, wie diese Implementierung dem Konzept entspricht, kann diskutiert werden (ebenso wie im Prinzip das Konzept intelligenter Verträge und anderer möglicher Implementierungen).  Dieses Thema ist komplex, unterschätzt und interessant, aber dies ist nicht das Thema dieses Artikels, daher werde ich diejenigen verweisen, die sich für die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Werke von Nick Szabo</a> interessieren.  Dementsprechend meine ich überall, wo ich „intelligente Verträge“ sage, tatsächlich „intelligente Verträge von Ethereum“. </li><li>  Der Artikel konzentriert sich nur auf die Sprache der intelligenten Verträge. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Solidity ist</a> die beliebteste und für den Ethereum-Benutzer derzeit die einzige. </li></ol><br><h2 id="problemy-bezopasnosti-smart-kontraktov">  Probleme mit der Sicherheit intelligenter Verträge </h2><br><p>  Es geht um die Probleme, mit denen Entwickler intelligenter Verträge am Ende konfrontiert sind, und nicht um die Sicherheit der Plattform selbst (wenn auch ein wenig darüber).  Wir unterteilen diese Probleme herkömmlicherweise in die folgenden Typen: </p><br><ol><li>  Probleme im Smart Contract Code; </li><li>  Probleme im Entwicklungsprozess; </li><li>  Probleme in der Sprache; </li><li>  Probleme im Konzept. </li></ol><br><h3 id="1-problemy-v-kode-smart-kontrakta">  1. Probleme im Smart Contract Code </h3><br><p>  Mit Problemen im Code eines intelligenten Vertrags meine ich hier Probleme, die durch Bearbeiten der .sol-Datei gelöst werden.  Dies ist insbesondere: </p><br><ul><li>  Bekannte anfällige Konstrukte (z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wiedereintritt</a> ). <br>  <u>Lebensbeispiel</u> : Wiedereintritt oder allgemeiner Verstoß gegen das Muster "Checks-Effects-Interactions" - selbst weithin bekannte (und zuvor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ausgenutzte</a> ) Sicherheitslücken finden sich weiterhin in neuen Verträgen. </li><li> Anfällige Konstrukte des Autors (insbesondere Fehler in der Logik des Codes). <br>  <u>Lebensbeispiel</u> : Eine MultiSig-Brieftasche, die eigentlich keine MultiSig ist.  Um eine Transaktion zu unterzeichnen und Geld zu überweisen, benötigen Sie die erforderliche Anzahl von Unterschriften der Brieftaschenbesitzer.  Gleichzeitig reicht nur die Unterschrift eines der Eigentümer aus, um die <code>required</code> Änderungen vorzunehmen (z. B. um eins, um die Transaktionen selbst weiter zu unterzeichnen): </li></ul><br><p><img src="https://habrastorage.org/webt/aq/_l/1o/aq_l1oidjbyqkeo4km8uciij6ag.png" alt="Bild"><br><img src="https://habrastorage.org/webt/v7/lw/bo/v7lwbog3xrhkuzfq-vcgsp6jp88.png" alt="Bild"></p><br><ul><li>  Schlechte Architektur. <br>  <u>Lebensbeispiel</u> : Ein Versuch, ein Token, eine Brieftasche und einen Schlüsselspeicher in einem einzigen Vertrag zu implementieren.  Der Vertrag erweist sich als zu kompliziert, der Code ist schwer zu pflegen, zu prüfen und zu ändern.  Infolgedessen leidet auch die Sicherheit. </li><li>  Code von geringer Qualität. <br>  <u>Lebensbeispiel</u> : Verträge mit unterschiedlichen Einzügen, willkürlichen Zeilenumbrüchen und Leerzeichen.  Der Code ist schwer zu lesen, was bedeutet, dass die Sicherheit erneut leidet.  Trotz der Tatsache, dass es bereits Linters für Solidity gibt ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Solium</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Solhit</a> ). </li></ul><br><p><img src="https://habrastorage.org/webt/px/7t/p_/px7tp_clvkugmymx3sfbiglshcw.png" alt="Bild"><br><img src="https://habrastorage.org/webt/jh/kc/fx/jhkcfxrd23sw_bfiyfvgb4od3h8.png" alt="Bild"></p><br><p>  Probleme im Code führen direkt zu Angriffen und Geldverlust.  Die gute Nachricht ist, dass Codeprobleme während des Prüfprozesses identifiziert und behoben werden können.  Es ist wichtig zu verstehen, woher sie kommen, um sie in Zukunft zu vermeiden.  Daher fahren wir mit dem nächsten Absatz fort. </p><br><h3 id="2-problemy-v-processe-razrabotki">  2. Probleme im Entwicklungsprozess </h3><br><p>  Probleme im Code werden hauptsächlich durch einen falsch erstellten Entwicklungsprozess verursacht.  Es scheint, dass die Softwareentwicklung ein langjähriges Unternehmen mit etablierten Best Practices ist.  Trotzdem führen die Jugendlichen im Bereich der intelligenten Verträge, unverhältnismäßig viel Geld und Hype dazu, dass die Menschen aus dem einen oder anderen Grund die Standardverfahren vernachlässigen, was häufig zu ernsthaften Problemen führt.  Von den typischsten ist es erwähnenswert: </p><br><ul><li>  TK: Die meisten intelligenten Verträge von Ethereum werden ohne technische Aufgabe abgeschlossen.  Zu was dies führen kann, unnötig zu erklären. </li><li>  Timing: Im Durchschnitt wird nur sehr wenig Zeit für die Entwicklung zur Verfügung gestellt, etwa ein Monat.  Ein extremes Beispiel aus meiner Praxis: Der Kunde bat den Entwickler, 3 Tage vor dem ICO einen intelligenten Vertrag zu schreiben. </li><li>  Entwicklerebene: Viele Leute kommen auf das Gebiet, auch ohne Programmierhintergrund. </li><li>  Das Ökosystem verstehen: Auch wenn die Entwickler einen Hintergrund haben, sind sie häufig nicht tief in das Thema vertieft und verstehen die Besonderheiten intelligenter Verträge nicht. </li><li>  Entwicklungskosten: und doch gibt es nur wenige, die intelligente Verträge schreiben.  noch weniger, die sie gut schreiben.  Daher die unangemessen hohen Entwicklungskosten. </li></ul><br><h3 id="3-problemy-v-yazyke">  3. Probleme in der Sprache </h3><br><p>  Fügt der Sprache der Solidität selbst Teer hinzu.  Ursprünglich wurde es eher so konzipiert, dass es von einer großen Anzahl von Personen schnell beherrscht werden kann, als dass es bequem ist, sichere intelligente Verträge darauf zu schreiben.  Hier sind nur einige seiner Funktionen, die die Sicherheit beeinträchtigen: </p><br><ul><li>  Mehrfachvererbung <code>using for</code> , <code>call</code> / <code>delegate call</code> - all dies startet den Code nicht von der aktuellen Quelle, was bedeutet, dass die Lesbarkeit und damit die Codesicherheit verringert werden. </li><li>  Checks-Effects-Interactions-Muster - Wenn Konstruktionen, die gegen CEI verstoßen, unsicher sind, warum sollten Sie sie (und viele andere) nicht einfach auf Sprachebene verbieten? </li><li>  Wenn Sie einen anderen Vertrag anrufen, können Sie plötzlich in seine Fallback-Funktion mit unerwarteten Konsequenzen fallen. </li></ul><br><p>  Es ist klar, dass sich das Ethereum-Projekt entwickelt, und es ist unmöglich, alles im Voraus zu berücksichtigen.  Am Ende sind Entwickler jedoch gezwungen, sich an viele Funktionen zu erinnern und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Krücken</a> zu verwenden, um ihren intelligenten Vertrag sicherer zu machen. </p><br><h3 id="4-problemy-v-koncepcii">  4. Probleme im Konzept </h3><br><p>  Das schwerwiegendste Problem ist jedoch noch tiefer: Viele verstehen nicht gut genug, warum intelligente Verträge benötigt werden, was sie können, was sie nicht können und wie sie funktionieren.  Im schlimmsten Fall führt dies dazu, dass der Smart-Vertrag: </p><br><ol><li><p>  Nicht schlau: </p><br><ul><li>  Schlecht geschrieben - tut, was geschrieben steht, aber nicht, was beabsichtigt ist. </li><li>  Es ist stark an das Backend und / oder Frontend gebunden - und dieser Code ist kein intelligenter Vertrag mehr, er wird auf die übliche Weise ausgeführt und seine Implementierung wird vollständig vom Serveradministrator gesteuert. </li></ul><br></li><li><p>  Kein Vertrag: </p><br><ul><li>  Die Verpflichtungen der Parteien werden nicht erfasst - zum Beispiel verkauft ICO seine Token für die ETH, aber Token sind im Wesentlichen Bonbonverpackungen, weil  Legen Sie demjenigen, der sie freigegeben hat, keine Einschränkungen oder Verpflichtungen auf. </li><li>  Ermöglicht einseitige Änderungen - und es stellt sich heraus, dass eine der Parteien den Vertrag nach seiner Unterzeichnung ändern kann. <br><br>  <u>Lebensbeispiel</u> : Der Vertragseigentümer kann die Kapitalisierung, die Rate und die Dauer des Token-Verkaufs willkürlich ändern: <br><br><img src="https://habrastorage.org/webt/ed/yg/me/edygmenuif3ox1rks29xna0w_ai.png" alt="Bild"></li></ul><br></li><li><p>  Nicht benötigt: </p><br><ul><li>  Der Smart-Vertrag wurde nicht hinzugefügt, weil er technisch notwendig war, sondern um herauszufinden, was mit Smart-Verträgen zu tun ist, und um eine Welle des Hype zu bewältigen. </li><li>  Wir haben versucht herauszufinden, wie intelligente Verträge an ein vorhandenes Produkt gebunden werden können. <br><br><img src="https://habrastorage.org/webt/vz/sp/dk/vzspdktp77hjgk7ntmbbpau5qzm.png" alt="Bild"></li></ul><br></li></ol><br><h2 id="smart-kontrakt-kak-ugroza-bezopasnosti-blokcheyn-startapa">  Intelligenter Vertrag als Sicherheitsbedrohung für den Blockchain-Start </h2><br><p>  Was ist das Ergebnis?  Sie wollten, dass es modisch, sicher und blockchain ist, aber wir bekommen teuren, nicht unterstützten Code, der die Sicherheit gefährdet und überhaupt nicht benötigt wird.  Wir wollten, dass unsere intelligenten Verträge „genau so programmiert werden, wie sie programmiert sind, ohne die Möglichkeit von Ausfallzeiten, Zensur, Betrug oder Eingriffen Dritter“, und am Ende werden sie wirklich so ausgeführt, wie sie geschrieben wurden - sie werden nur mit Verwundbarkeit geschrieben.  Und alles, was uns bleibt, ist, mit unseren Mitteln mit einem Stift zu winken.  Nun, oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">um eine harte Gabel zu machen</a> (wodurch die ursprüngliche Idee selbst tatsächlich diskreditiert wird), wenn die Schöpfer von Ethereum aufgrund der Verwundbarkeit Geld verloren haben. </p><br><p><img src="https://habrastorage.org/webt/sn/x5/zv/snx5zvymhlnhuavsagciubxbrfc.png" alt="Bild"></p><br><h2 id="kak-pisat-bezopasnye-smart-kontrakty">  So schreiben Sie sichere Smart-Verträge </h2><br><p>  In der Tat ist natürlich nicht alles so schlecht.  Ich übertreibe nur, um auf einige meiner Meinung nach wichtige Punkte aufmerksam zu machen.  Im Allgemeinen entwickelt sich das Gebiet, die Menschen lernen, einschließlich der Sicherheit. </p><br><p>  Wenn der Leser beschließt, einen intelligenten Vertrag zu schreiben, würde ich raten: </p><br><ul><li>  verstehen, warum ein intelligenter Vertrag benötigt wird (und ob er benötigt wird); </li><li>  vom Kunden erhalten oder TK schreiben; </li><li>  Zeit berechnen; </li><li>  Verwenden Sie Entwicklungs- und Testtools ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Truffle</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Remix</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SmartCheck</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Solhint</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Solium Linter</a> ). </li><li>  Tests schreiben; </li><li>  Führen Sie mehrere unabhängige Audits und Bug Bounty durch. </li><li>  Überwachen Sie die Sicherheit der verbleibenden Komponenten des Projekts (Website, Twitter usw.). </li></ul><br><p>  Wenn Sie diese einfachen Empfehlungen befolgen, können Sie die meisten der oben beschriebenen Probleme vermeiden (von einer harten Gabel aus wird dies jedoch immer noch nicht gespeichert). </p><br><p>  Der Artikel wurde in Zusammenarbeit mit Eugene Marchenko ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">eMarchenko</a> ) erstellt. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de412559/">https://habr.com/ru/post/de412559/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de412549/index.html">Die gleiche Art von Methoden? Hör auf zu schreiben</a></li>
<li><a href="../de412551/index.html">Kopieren Sie Text aus der Zwischenablage über ADB auf Android-Geräte</a></li>
<li><a href="../de412553/index.html">Die Zusammenfassung der Ereignisse für HR-Experten im Bereich IT für Juni 2018</a></li>
<li><a href="../de412555/index.html">Magnetgetriebe für bürstenlosen Motor</a></li>
<li><a href="../de412557/index.html">So erstellen Sie Ihren eigenen Bot ohne Programmierkenntnisse und verbinden ihn mit Yandex.Alice</a></li>
<li><a href="../de412561/index.html">Reverse Engineering der Gerätefirmware am Beispiel eines blinkenden „Nashorns“. Teil 2</a></li>
<li><a href="../de412565/index.html">Comics über Sysadmins: Alles Leben blitzte vor meinen Augen auf</a></li>
<li><a href="../de412571/index.html">Kubernetes Erfolgsgeschichten in der Produktion. Teil 9: CERN- und 210 K8-Cluster</a></li>
<li><a href="../de412573/index.html">Was mit Geektimes los ist, kehre nach Habr zurück</a></li>
<li><a href="../de412575/index.html">Popmusik wird von Jahr zu Jahr eintöniger, weil die gleichen Leute sie komponieren</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>