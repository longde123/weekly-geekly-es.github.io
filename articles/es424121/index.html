<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçüé§ üëπ ü§úüèΩ Crear una funci√≥n desencadenante en pgModeler üò© ü§∑ üñ•Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En cierto reino, en cierto estado ... necesitaba agregar un disparador al modelo en pgModeler . Qu√© hacer es bastante f√°cil. Pero para agregar una fun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Crear una funci√≥n desencadenante en pgModeler</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424121/">  <i>En cierto reino, en cierto estado ...</i> necesitaba agregar un disparador al modelo en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pgModeler</a> .  Qu√© hacer es bastante f√°cil.  Pero para agregar una funci√≥n de disparo ... Tambi√©n es f√°cil, pero tuve que lidiar un poco con los par√°metros ofrecidos para el llenado / selecci√≥n en la interfaz. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pgModeler</a> es una muy buena herramienta de dise√±o de bases de datos que puede generar scripts sql para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PostgreSQL</a> .  Los detalles sobre esta herramienta y sus capacidades se pueden encontrar en el sitio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">web</a> oficial. <br><a name="habracut"></a><br>  Como ejemplo, considere un modelo simplificado con una sola tabla. <br><br><img src="https://habrastorage.org/webt/qv/rk/gh/qvrkghh1osp-coovacxaoen9t5y.png"><br><br>  Agregar una funci√≥n al modelo. <br><br><img src="https://habrastorage.org/webt/cj/xq/vj/cjxqvjvjvu0ilrmnidbyl67iyek.png"><br><br>  Despu√©s de eso, se abrir√° una ventana con varios par√°metros editables con los que se crear√° la funci√≥n.  Sin embargo, algunos campos ya estar√°n llenos de valores predeterminados. <br><br><img src="https://habrastorage.org/webt/ti/gg/fs/tiggfs9_2zuay6vog--ewjrvdxa.png"><br><br>  Consideremos estos par√°metros con m√°s detalle. <br><br>  Creo que con los par√°metros <i>Nombre</i> , <i>Esquema</i> , <i>Propietario</i> y <i>Comentario</i> todo est√° claro: este es el nombre de la funci√≥n, el esquema de la base de datos, el propietario y el comentario para esta funci√≥n, respectivamente. <br><br>  <i>Idioma</i> es el nombre del idioma en el que se implementar√° la funci√≥n.  Para ser honesto, nunca he tenido que escribir funciones para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PostgreSQL</a> en otra cosa que no sea <i>plpgsql</i> .  Por lo tanto, fue este valor para el par√°metro que eleg√≠. <br><br>  <i>M√©todo de devoluci√≥n</i>  Como en la funci√≥n de activaci√≥n no necesitamos devolver ni la tabla ni el conjunto de valores, dejamos <i>Simple</i> . <br><br>  Con los par√°metros en el bloque <i>Tipo de datos</i> , en general, todo tambi√©n es simple.  Porque  Si se llama a la funci√≥n en el activador, en el campo <i>Tipo</i> especificamos <i>activador</i> (el campo <i>Formato</i> se rellenar√° autom√°ticamente con el valor del <i>activador</i> ).  El campo <i>Dimensi√≥n</i> (el √∫nico campo digital no reservado en este bloque) es necesario para indicar la dimensi√≥n de la matriz del valor devuelto.  Pero como solo necesitamos un valor, no una matriz, dejamos <i>0</i> en este campo. <br><br>  Con los par√°metros restantes, todo no es tan obvio, al menos para m√≠, porque  Nunca tuve que pensar en ellos durante la creaci√≥n habitual de funciones en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PostgreSQL</a> . <br><br>  <i>El tipo de funci√≥n</i> puede tomar uno de tres valores: <i>INMUTABLE</i> , <i>ESTABLE</i> y <i>VOLATILE</i> .  A partir de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n</a> oficial de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PostgreSQL</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">,</a> puede descubrir que estos argumentos informan al optimizador de consultas sobre el comportamiento de la funci√≥n. <br><br><ul><li>  <i>INMUTABLE</i> significa que la funci√≥n no puede modificar la base de datos y siempre devuelve el mismo resultado para ciertos valores de los argumentos. <br></li><li>  <i>ESTABLE</i> significa que la funci√≥n no puede modificar la base de datos y, dentro de un escaneo de una sola tabla, siempre devuelve el mismo resultado para ciertos valores de los argumentos. <br></li><li>  <i>VOL√ÅTIL</i> significa que el resultado de una funci√≥n puede cambiar incluso dentro de un escaneo de una sola tabla, por lo que sus llamadas no se pueden optimizar. <br></li></ul><br>  En consecuencia, si la funci√≥n de activaci√≥n requiere cambiar la base de datos, entonces <i>INMUTABLE</i> no <i>es</i> adecuado.  Una funci√≥n con el par√°metro <i>ESTABLE</i> no es adecuada para disparadores <i>DESPU√âS</i> que desean leer l√≠neas modificadas por el comando actual.  Queda <i>VOL√ÅTIL</i> , que no tiene los problemas anteriores.  Tambi√©n se especificar√° de forma predeterminada si ninguno de los argumentos anteriores se especifica al crear la funci√≥n. <br><br>  <i>La seguridad</i> puede tomar uno de dos valores: <i>DEFINICI√ìN DE SEGURIDAD</i> e <i>INVOCADOR</i> <i>DE SEGURIDAD</i> y es responsable de los derechos de qu√© usuario se llamar√°. <br><br><ul><li>  <i>DEFINER DE SEGURIDAD</i> significa que la funci√≥n se ejecutar√° con los derechos del usuario que la posee, es decir,  el que figuraba en <i>Propietario</i> . <br></li><li>  <i>INVOCADOR DE SEGURIDAD</i> significa que la funci√≥n se ejecutar√° con los derechos del usuario que la llam√≥. <br></li></ul><br>  De manera predeterminada, <i>se utiliza INVOCADOR DE SEGURIDAD</i> , por lo que puede dejarlo. <br><br>  <i>El comportamiento</i> puede tomar uno de tres valores: <i>ESTRICTO</i> , <i>DEVOLUCIONES NULL EN NULL INPUT</i> y <i>CALLED ON NULL INPUT</i> y muestra c√≥mo se comportar√° la funci√≥n si hay valores NULL entre sus argumentos. <br><br><ul><li>  <i>RETURNS NULL ON NULL INPUT</i> o <i>STRICT</i> significa que la funci√≥n siempre devolver√° NULL si al menos uno de sus argumentos es NULL. <br></li><li>  <i>CALLED ON NULL INPUT</i> significa que la funci√≥n se llamar√° como de costumbre, incluso si NULL est√° entre sus argumentos. <br></li></ul><br>  El valor predeterminado es <i>CALLED ON NULL INPUT</i> .  Por lo tanto, de la misma manera, puedes dejarlo. <br><br>  <i>Filas devueltas</i> muestra el n√∫mero de filas que el planificador esperar√°.  El valor se especifica para funciones que devuelven conjuntos.  Porque  nuestra funci√≥n devuelve un solo valor, dejamos <i>0</i> . <br><br>  <i>Costo de ejecuci√≥n</i> establece el costo para ejecutar esta funci√≥n para el planificador.  Para <i>plpgsql</i> , el valor predeterminado es <i>100</i> .  Por lo tanto, indicamos este valor. <br><br>  <i>Windown Func.</i>  significa que se crear√° una funci√≥n de ventana.  En nuestro caso, porque  necesitamos una funci√≥n de activaci√≥n, no necesitamos especificar este valor (bueno, en general, escriben en la documentaci√≥n misma que tiene sentido especificar este par√°metro solo para funciones escritas en C). <br><br>  <i>A prueba de fugas</i> indica que la funci√≥n est√° sellada, es decir  que no divulga informaci√≥n sobre sus argumentos (por ejemplo, no muestra su significado en un mensaje de error), excepto para devolver un resultado.  Porque  Dado que la funci√≥n de activaci√≥n no acepta argumentos, no es necesario especificar este par√°metro. <br><br>  Entonces, los par√°metros de la funci√≥n han terminado.  El cuerpo de la funci√≥n en s√≠ se puede escribir en la misma ventana en la pesta√±a Definici√≥n.  Procedemos a crear el disparador mismo. <br><br><img src="https://habrastorage.org/webt/-m/d-/gn/-md-gnby6dhi6dy_o6bxawskjjw.png"><br><br>  Despu√©s de eso, aparecer√° la ventana de creaci√≥n del disparador. <br><br><img src="https://habrastorage.org/webt/ap/6j/uo/ap6juopfdv961t2r92hxrzjjhkk.png"><br><br>  Considere los par√°metros que se pueden establecer en esta ventana. <br><br>  Con los par√°metros <i>Nombre</i> , <i>Alias</i> y <i>Comentario,</i> nuevamente, todo est√° claro: este es el nombre del activador, el alias y el comentario al activador, respectivamente. <br><br>  <i>La ejecuci√≥n</i> muestra c√≥mo se ejecutar√° este activador y puede tomar uno de los siguientes valores: <i>ANTES</i> , <i>DESPU√âS</i> e <i>INSTEAD OF</i> , lo que significa que la funci√≥n se ejecutar√° antes, despu√©s o en lugar del evento. <br><br>  <i>POR CADA FILA</i> determina si el procedimiento de disparo se disparar√° una vez por cada fila.  Si no se especifica, se establecer√° el par√°metro <i>FOR EACH STATEMENT</i> , que determina que el procedimiento de activaci√≥n se activa una vez para la instrucci√≥n SQL. <br><br>  <i>El evento</i> determina qu√© eventos deben procesarse en este activador.  Puede especificar m√∫ltiples eventos.  Los eventos son de los siguientes tipos: <i>INSERT</i> , <i>UPDATE</i> , <i>DELETE</i> y <i>TRUNCATE</i> .  Se producen cuando se llama al comando correspondiente con la misma instrucci√≥n SQL. <br><br>  <i>La restricci√≥n</i> indica que se crear√° un activador de restricci√≥n.  Los desencadenantes de restricciones se utilizan para generar excepciones cuando se violan las restricciones.  Puede leer m√°s sobre ellos en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n</a> oficial. <br><br>  Para un activador de restricci√≥n, puede especificar <i>Diferible</i> , que determina el tiempo de activaci√≥n.  Este par√°metro puede tomar uno de los siguientes valores: <i>INICIALMENTE INMEDIATO</i> o <i>INICIALMENTE DIFERIDO</i> . <br><br><ul><li>  <i>INICIALMENTE INMEDIATO</i> significa que el disparador se disparar√° despu√©s de cada declaraci√≥n. <br></li><li>  <i>INICIALMENTE DIFERIDO</i> significa que el disparador se disparar√° solo al final de la transacci√≥n. <br></li></ul><br>  <i>Consulte</i>  <i>Tabla</i> es el nombre de la tabla a la que hace referencia la restricci√≥n.  Se usa para restricciones de clave externa y se permite solo para desencadenantes de restricci√≥n. <br><br>  <i>La condici√≥n</i> es una condici√≥n que determina si se ejecutar√° la funci√≥n de disparo.  Para los disparadores <i>FOR EACH ROW</i> en este campo, puede acceder a los valores antiguos y nuevos a trav√©s de <i>OLD</i> y <i>NEW,</i> respectivamente (es decir, lo mismo que en el cuerpo de la funci√≥n de disparo). <br><br>  <i>Argumentos</i> : una lista de argumentos que se pasar√°n a la funci√≥n de activaci√≥n cuando se active la activaci√≥n.  Las constantes de cadena se pasan como argumentos a la funci√≥n. <br><br>  <i>Columnas</i> : solo se pueden especificar para eventos de <i>ACTUALIZACI√ìN</i> .  El activador solo funcionar√° si al menos una de las columnas especificadas est√° en la lista de columnas especificadas en <i>ACTUALIZAR</i> . <br><br><h3>  Conclusi√≥n </h3><br>  Eso, en general, es todo.  Espero que esto haya sido interesante y sea √∫til para alguien. <br><br><hr><br>  Al escribir este art√≠culo, se utiliz√≥ pgModeler versi√≥n 0.9.2-alpha, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">construida</a> bajo Windows 7 x64.  Cuando se usan versiones anteriores / nuevas de pgModeler, son posibles peque√±as diferencias en la interfaz. <br><br>  El modelo utilizado en el art√≠culo se puede descargar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es424121/">https://habr.com/ru/post/es424121/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es424109/index.html">VSCE # 2: Podcast de emprendedores de medios</a></li>
<li><a href="../es424111/index.html">Ondas de contratos inteligentes. Primera experiencia</a></li>
<li><a href="../es424113/index.html">Proceso de dise√±o, investigaci√≥n y b√∫squeda de empleo.</a></li>
<li><a href="../es424115/index.html">Casos de uso o falta de equilibradores de carga</a></li>
<li><a href="../es424119/index.html">¬øHubo un Scrum *?</a></li>
<li><a href="../es424127/index.html">C√≥mo hacer amigos Ovirt y Let's Encrypt</a></li>
<li><a href="../es424129/index.html">Desarrollo de Android. Un poco sobre el trabajo r√°pido con listas</a></li>
<li><a href="../es424131/index.html">Manifiesto para desarrolladores de sistemas inteligentes: 15 principios</a></li>
<li><a href="../es424133/index.html">Virtualizaci√≥n de trabajos para la oficina de arquitectura a trav√©s de los ojos de las humanidades.</a></li>
<li><a href="../es424135/index.html">La Uni√≥n Europea aprueba una nueva directiva de derechos de autor: c√≥mo afectar√° a Internet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>