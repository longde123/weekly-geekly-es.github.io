<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ôüèΩ ü§∂üèø üëõ Cr√©er des globes plan√©taires proc√©duraux üêº ‚úñÔ∏è ‚úäüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Distorsion, bruit transparent et comment travailler avec eux. 


 Nous g√©n√©rons une plan√®te 
 L'une des fa√ßons les plus simples de g√©n√©rer une plan√®te...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cr√©er des globes plan√©taires proc√©duraux</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448324/">  <em>Distorsion, bruit transparent et comment travailler avec eux.</em> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/400/20a/dde/40020adde06482d85b634f28a2d6e74a.png" alt="image"></div><br><h3>  Nous g√©n√©rons une plan√®te </h3><br>  L'une des fa√ßons les plus simples de g√©n√©rer une plan√®te est d'utiliser le bruit.  Si nous d√©cidons de le choisir, nous avons deux options possibles.  Examinons chacun et d√©terminons le meilleur: <br><br><ul><li>  <strong>Perlin Noise</strong> est l'option la plus simple.  Le bruit Perlin a √©t√© d√©velopp√© par Ken Perlin en 1983, il pr√©sente quelques inconv√©nients - des artefacts visuels et plut√¥t faible par rapport √† d'autres options de vitesse lors de la g√©n√©ration de grandes images. </li><li>  <strong>Simplex Noise (Simplex Noise)</strong> - a √©t√© d√©velopp√© par Ken Perlin en 2001 pour tenter d'√©liminer les d√©fauts du bruit Perlin;  c'est une solution tr√®s digne et rapide, mais avec un s√©rieux inconv√©nient: l'utilisation du bruit simplex tridimensionnel est prot√©g√©e par un brevet, ce qui le rend assez cher. </li><li>  <strong>Open Simplex Noise</strong> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">KDotJPG a</a> √©t√© d√©velopp√© avec un seul objectif: cr√©er une version moderne et gratuite du bruit simplex, relativement rapide et sans distorsion. </li></ul><br>  Parmi ces trois, je pr√©f√®re personnellement Open Simplex Noise, que j'utilise dans mes projets personnels.  Il convient de noter que dans l'impl√©mentation actuelle d'OpenSimplexNoise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">,</a> des travaux suppl√©mentaires seront n√©cessaires pour acc√©der facilement √† la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">balance, aux octaves et aux g√©n√©rateurs</a> .  Il y a beaucoup d'informations sur Internet sur ce que fait chacun de ces √©l√©ments, et je vous recommande fortement de l'√©tudier.  Cependant, dans mon article, je n'en parlerai pas. <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fa6/85f/5bb/fa685f5bb817c45cd368af2aa7c206a0.png"></div><br>  <i>Voici √† quoi ressemble Open Simplex Noise avec 16 octaves.</i> <br><br><h3>  Bruit homog√®ne </h3><br>  Le bruit est infini, ce qui signifie que si nous cr√©ons simplement une toile avec un rapport d'aspect 2: 1 pour obtenir une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">projection √©galement espac√©e</a> , elle ne sera pas boucl√©e lorsqu'elle sera <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">superpos√©e √† une sph√®re</a> (j'exprime ma gratitude √† ce site Web √©tonnant), mais √† une couture horizontale et aux p√¥les d'√©normes diff√©rences. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/69b/aa7/cce/69baa7ccea9425dfd0f641b2272905f0.png" alt="image"></div><br>  <i>Bruit cr√©√© sans coutures.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/497/873/4b0/4978734b0a9386c37eecbc9563bf7f96.png" alt="image"></div><br>  <i>Remarquez les √©normes coutures qui sont apparues lorsque le bruit a √©t√© appliqu√© √† la sph√®re.</i> <br><br>  Il existe de nombreuses fa√ßons de r√©soudre ce probl√®me;  Par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans cet excellent article de</a> Red Blob Games, il suffisait simplement de g√©n√©rer une √Æle en utilisant une fonction qui re√ßoit la distance au centre en tant que variable et d√©finit la hauteur 0 sur les bords pour minimiser les coutures. <br><br>  Cependant, ce n'est pas ce dont nous avons besoin.  Nous voulons g√©n√©rer une plan√®te avec la possibilit√© de l'existence des p√¥les nord et sud, et pour cela nous aurons besoin de calculs math√©matiques plus complexes. <br><br><h4>  Superposition sph√©rique </h4><br>  Une m√©thode qui peut g√©n√©rer des plan√®tes sph√©riques consiste √† convertir les coordonn√©es cart√©siennes de notre canevas en coordonn√©es sph√©riques, √† g√©n√©rer du bruit en fonction de ces coordonn√©es, puis √† reconvertir le bruit en coordonn√©es cart√©siennes et √† l'appliquer au canevas. <br><br>  Cependant, cette impl√©mentation a ses limites, dont les causes sont pr√©sent√©es dans un article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©tonnant de Ron Valstar</a> .  Plus important encore, les formes des continents dans ce cas semblent extr√™mement √©tranges et d√©form√©es, et nous n'utiliserons donc pas cette option. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e18/349/329/e18349329ff3a646eba44e82bbde1bb7.png" alt="image"></div><br>  <i>Superposition de bruit sph√©rique.</i>  <i>Des formes √©tranges et des distorsions rendent les continents assez laids.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8df/652/984/8df6529849ed4df493b4243db9ce04a0.png" alt="image"></div><br>  <i>Mais au moins, il n'y a plus de coutures.</i> <br><br><h4>  Superposition cubique </h4><br>  En cons√©quence, j'ai utilis√© la deuxi√®me m√©thode, tir√©e d'un article de Ron Valstar et d'une s√©rie d'articles par acko <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Making Worlds</a> .  Ils d√©crivent la g√©n√©ration d'un globe √† travers la g√©n√©ration d'un cube et son ¬´gonflage¬ª, comme s'il s'agissait d'un ballon, jusqu'√† ce qu'il soit un exemple de la forme d'une sph√®re. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e3/4ce/d5e/0e34ced5eea890cc14d43df596796c08.png"></div><br>  <i>Image prise sur acko.net.</i>  <i>Il explique le concept d'une carte cubique d'une mani√®re simple et visualis√©e.</i> <br><br>  Maintenant, nous avons juste besoin de g√©n√©rer six faces, ce qui est assez simple, il existe de nombreuses fa√ßons de le faire. <br><br>  √Ä la fin, j'ai d√©cid√© de cr√©er un tableau et de le remplir avec des donn√©es.  J'ai converti les coordonn√©es 2D du canevas en coordonn√©es 3D du cube, puis g√©n√©r√© du bruit pour chacune de ces coordonn√©es 3D afin de les enregistrer dans la valeur de coordonn√©es 2D correspondante. <br><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//Z STATIC for(int y = 0; y &lt; cubeFaceSize; y++) { for(int x = 0; x &lt; cubeFaceSize * 2; x++) { //Generates FRONT if(x &lt; cubeFaceSize) { cubeMap[cubeFaceSize+x][cubeFaceSize+y] = noise.noise3D(x, y, 0); } //Generates BACK else { cubeMap[cubeFaceSize*3+(x-cubeFaceSize)][cubeFaceSize+y] = noise.noise3D(cubeFaceSize-(x-cubeFaceSize), y, cubeFaceSize); } } } //X STATIC for(int y = 0; y &lt; cubeFaceSize; y++) { for(int x = 0; x &lt; cubeFaceSize * 2; x++) { //Generates LEFT if(x &lt; cubeFaceSize) { cubeMap[x][cubeFaceSize+y] = noise.noise3D(0, y, cubeFaceSize-x); } //Generates RIGHT else { cubeMap[cubeFaceSize*2+(x-cubeFaceSize)][cubeFaceSize+y] = noise.noise3D(cubeFaceSize, y, x-cubeFaceSize); } } } //Y STATIC for(int y = 0; y &lt; cubeFaceSize * 2; y++) { for(int x = 0; x &lt; cubeFaceSize; x++) { //Generates TOP if(y &lt; cubeFaceSize) { cubeMap[cubeFaceSize+x][y] = noise.noise3D(x, 0, cubeFaceSize-y); } //Generates BOTTOM else { cubeMap[cubeFaceSize+x][cubeFaceSize*2+(y-cubeFaceSize)] = noise.noise3D(x, cubeFaceSize, y-cubeFaceSize); } } }</span></span></code> </pre> <br>  De cette fa√ßon, nous pouvons cr√©er une carte cubique qui peut facilement √™tre convertie en une projection √©galement espac√©e en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">utilisant le merveilleux code √©crit par Bartosz</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/79d/0b4/68a/79d0b468aeb2369d2d1dd7bb36e1b4c9.png" alt="image"></div><br>  <i>Carte cubique g√©n√©r√©e par l'algorithme.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/400/20a/dde/40020adde06482d85b634f28a2d6e74a.png" alt="image"></div><br>  <i>Transformation √©quidistante d'une carte cubique.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c84/c0c/c95/c84c0cc95f5dd011a9db111d1677252b.png" alt="image"></div><br>  <i>Un globe de carte cubique rendu sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">maptoglobe.com</a> .</i> <br><br>  Comme vous pouvez le voir, une carte √©quidistante a des formes beaucoup plus belles, et lorsqu'elle est superpos√©e √† une sph√®re, elle cr√©e des r√©sultats similaires √† la superposition sph√©rique, sans tous ses inconv√©nients.  Soit dit en passant, la projection √©quidistante peut √™tre facilement convertie par diff√©rents programmes, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NASA G.Projector</a> , en presque n'importe quel type de carte. <br><br><h2>  En conclusion </h2><br>  G√©n√©rer une plan√®te enti√®re peut sembler une t√¢che intimidante, et bien que le bruit lorsqu'il est utilis√© correctement soit un outil assez puissant, il a ses propres probl√®mes auxquels les gens sont confront√©s depuis de nombreux si√®cles, tels que la superposition d'un globe sur une toile 2D avec une distorsion minimale. <br><br>  La solution que j'ai propos√©e cr√©e des plan√®tes tr√®s grossi√®rement g√©n√©r√©es qui ne prennent pas en compte les plaques tectoniques, les rivi√®res, les cha√Ænes d'√Æles et m√™me les montagnes, et ne peuvent donc √™tre utilis√©es que comme d√©monstration ou comme base pour des simulations plus complexes. <br><br>  En fait, il ne cr√©e qu'une matrice de valeurs dans une certaine plage de valeurs.  Pour les images en niveaux de gris, c'est 0-255.  Les valeurs sont ensuite converties en un pixel qui cr√©e une image similaire √† la premi√®re image en niveaux de gris, ou en une image dans la plage de -11000 √† 8000 pour simuler la diff√©rence de hauteur r√©elle, apr√®s quoi les pixels sont color√©s en fonction des intervalles de hauteur <em>(par exemple, des valeurs de 0 5 sont color√©s en sable pour simuler la c√¥te)</em> . <br><br><blockquote>  Dans la construction de l'univers, Dieu a utilis√© des math√©matiques de niveau sup√©rieur. <br><br>  <i>- Paul Dirac</i> </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr448324/">https://habr.com/ru/post/fr448324/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr448308/index.html">Data Science Digest (avril 2019)</a></li>
<li><a href="../fr448310/index.html">√âcrire un bot de t√©l√©gramme en python √† l'aide de la biblioth√®que de telebot partie 1</a></li>
<li><a href="../fr448316/index.html">D√©terminer la race d'un chien: un cycle de d√©veloppement complet, d'un r√©seau neuronal en Python √† une application sur Google Play</a></li>
<li><a href="../fr448320/index.html">Pourquoi le silicium et pourquoi CMOS?</a></li>
<li><a href="../fr448322/index.html">C ++ Russia 2019: diffusion gratuite de la premi√®re salle et un peu sur ce qui sera √† la conf√©rence</a></li>
<li><a href="../fr448326/index.html">Voir √† travers. Comment √©tudier des sujets sans les casser?</a></li>
<li><a href="../fr448328/index.html">√Ä Moscou montrera une imprimante qui imprime des organes et des tissus</a></li>
<li><a href="../fr448330/index.html">Nombres al√©atoires et r√©seaux d√©centralis√©s: une application pratique</a></li>
<li><a href="../fr448332/index.html">Initier les adeptes de l'informatique: montrez votre force sur un r√©cif</a></li>
<li><a href="../fr448334/index.html">Quand la productivit√© d'une personne suscite l'int√©r√™t</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>