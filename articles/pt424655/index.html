<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüë¶‚Äçüë¶ üöÑ üë©üèø‚Äç‚öñÔ∏è Personalizando o Jira de acordo com suas necessidades. Fluxo perfeito e bilhete perfeito üê¢ üë®üèº‚Äçüîß üëµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Se voc√™ trabalha em uma empresa de TI, provavelmente seus processos s√£o constru√≠dos em torno do conhecido produto Atlassian - Jira. Existem muitos ras...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Personalizando o Jira de acordo com suas necessidades. Fluxo perfeito e bilhete perfeito</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/424655/"><img src="https://habrastorage.org/webt/wm/nq/on/wmnqonj46aq2yavvhzsepa06qjo.jpeg"><br><br>  Se voc√™ trabalha em uma empresa de TI, provavelmente seus processos s√£o constru√≠dos em torno do conhecido produto Atlassian - Jira.  Existem muitos rastreadores de tarefas no mercado para solucionar os mesmos problemas, incluindo solu√ß√µes de c√≥digo aberto (Trac, Redmine, Bugzilla), mas talvez o Jira seja o mais amplamente usado atualmente. <br><br>  Meu nome √© Dmitry Semenikhin, sou l√≠der de equipe no Badoo.  Em uma curta s√©rie de artigos, mostrarei exatamente como usamos o Jira, como o personalizamos para nossos processos, quais coisas boas foram "estragadas" e como, portanto, transformamos o rastreador de problemas em um √∫nico centro de comunica√ß√£o para a tarefa e simplificamos nossa vida.  Neste artigo, voc√™ ver√° nosso fluxo interno, aprender√° como pode "torcer" seu Jira e ler sobre os recursos adicionais da ferramenta que voc√™ talvez n√£o conhe√ßa. <br><br>  O artigo √© voltado principalmente para aqueles que j√° usam o Jira, mas pode ter dificuldade em integrar seus recursos padr√£o aos processos existentes na empresa.  Al√©m disso, o artigo pode ser √∫til para empresas que usam outros rastreadores de tarefas, mas encontraram algumas limita√ß√µes e est√£o considerando uma mudan√ßa de decis√£o.  O artigo n√£o se baseia no princ√≠pio de ‚Äúproblema - solu√ß√£o‚Äù; descrevo as ferramentas e os recursos existentes que constru√≠mos em torno do Jira, bem como as tecnologias que usamos para implement√°-los. <br><a name="habracut"></a><br><h1>  Recursos adicionais do Jira </h1><br>  Para tornar o texto a seguir mais compreens√≠vel, vamos descobrir quais ferramentas o Jira nos fornece para a implementa√ß√£o da lista de desejos n√£o padr√£o - aquelas que v√£o al√©m da funcionalidade padr√£o do Jira. <br><br><h3>  API REST </h3><br>  Em geral, uma chamada de comando da API √© uma solicita√ß√£o HTTP para uma URL da API, indicando o m√©todo (GET, PUT, POST e DELETE), comando e corpo da solicita√ß√£o.  O corpo da solicita√ß√£o, bem como a resposta da API, est√° no formato JSON.  Um exemplo de solicita√ß√£o que retorna uma representa√ß√£o JSON de um ticket: <br><br><pre><code class="json hljs">GET /rest/api/latest/issue/{ticket_number}</code> </pre> <br>  Usando a API, voc√™ pode, usando scripts em qualquer linguagem de programa√ß√£o: <br><br><ul><li>  criar tickets; <br></li><li>  modificar quaisquer propriedades de tickets (embutidos e personalizados); <br></li><li>  escreva coment√°rios; <br></li><li>  usando JQL (linguagem de consulta interna) para receber qualquer lista de tickets; <br></li><li>  e muito mais <br></li></ul><br>  A documenta√ß√£o detalhada da API est√° dispon√≠vel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Escrevemos nosso pr√≥prio cliente Jira API de alto n√≠vel em PHP, que implementa todos os comandos que precisamos.  Aqui est√° um exemplo de comandos para trabalhar com coment√°rios: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addComment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($issue_key, $comment)</span></span></span><span class="hljs-function"> </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_post(<span class="hljs-string"><span class="hljs-string">"issue/{$issue_key}/comment"</span></span>, [<span class="hljs-string"><span class="hljs-string">'body'</span></span> =&gt; $comment]); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateComment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($issue_key, $comment_id, $new_text)</span></span></span><span class="hljs-function"> </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_put(<span class="hljs-string"><span class="hljs-string">"issue/{$issue_key}/comment/{$comment_id}"</span></span>, [<span class="hljs-string"><span class="hljs-string">'body'</span></span> =&gt; $new_text]); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteComment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($issue_key, $comment_id)</span></span></span><span class="hljs-function"> </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_delete(<span class="hljs-string"><span class="hljs-string">"issue/{$issue_key}/comment/{$comment_id}"</span></span>); }</code> </pre><br><h3>  Webhooks </h3><br>  Usando o webhook, voc√™ pode configurar a chamada de uma fun√ß√£o de retorno de chamada externa em seu host para v√°rios eventos no Jira.  Ao mesmo tempo, voc√™ pode configurar quantas regras desejar, para que URLs diferentes sejam "contorcidos" para eventos diferentes e para tickets que correspondam ao filtro especificado no webhook.  A interface de configura√ß√£o dos webhooks est√° dispon√≠vel para o administrador do Jira. <br><br>  Como resultado, voc√™ pode criar regras como esta: <br><br>  <b>Nome</b> : "SRV - Novo recurso criado / atualizado" <br>  <b>URL</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.myremoteapp.com/webhookreceiver</a> <br>  <b>Escopo</b> : Projeto = SRV E digite ('Novo Recurso') <br>  <b>Eventos</b> : problema atualizado, problema criado <br><br>  Neste exemplo, o URL especificado ser√° chamado para cria√ß√£o de ticket e eventos de altera√ß√£o correspondentes ao filtro <i>Escopo</i> .  Ao mesmo tempo, o corpo da solicita√ß√£o conter√° todas as informa√ß√µes necess√°rias sobre o que exatamente mudou e qual evento ocorreu. <br><br>  √â importante entender que Jira n√£o garante que seu evento ser√° entregue.  Se o URL externo n√£o respondeu ou respondeu com um erro, isso n√£o estar√° vis√≠vel em nenhum lugar (exceto nos registros, talvez).  Portanto, o manipulador de eventos do webhook deve ser o mais confi√°vel poss√≠vel.  Por exemplo, voc√™ pode enfileirar eventos e tentar process√°-los at√© que seja bem-sucedido.  Isso ajudar√° a resolver problemas com servi√ßos temporariamente indispon√≠veis, por exemplo, qualquer banco de dados externo necess√°rio para o processamento correto do evento. <br><br>  A documenta√ß√£o detalhada sobre webhooks est√° dispon√≠vel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br><h3>  Scriptrunner </h3><br>  Este √© um plug-in para o Jira, uma ferramenta muito poderosa que permite personalizar grande parte do Jira (incluindo a capacidade de substituir webhooks).  O uso deste plugin requer conhecimento do Groovy.  A principal vantagem da ferramenta para n√≥s √© que voc√™ pode incorporar l√≥gica personalizada no fluxo online.  Seu c√≥digo de script ser√° executado imediatamente no ambiente Jira em resposta a uma a√ß√£o espec√≠fica.  Por exemplo, voc√™ pode criar seu pr√≥prio bot√£o na interface do ticket, clicando nele para criar tickets associados √† tarefa atual ou executar testes de unidade para esta tarefa.  E se de repente algo der errado, voc√™ como usu√°rio saber√° imediatamente. <br><br>  Os interessados ‚Äã‚Äãpodem ler a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> . <br><br><h1>  Fluxo: o que est√° escondido sob o cap√¥ </h1><br>  E agora, sobre como aplicamos recursos adicionais do Jira em nossos projetos.  Considere isso no contexto de analisar nosso ticket de fluxo t√≠pico, da cria√ß√£o ao fechamento.  Ao mesmo tempo, vou falar sobre o fluxo em si. <br><br><h3>  Abrir / pend√™ncia </h3><br>  Portanto, primeiro o ticket entra no backlog de novos tickets com o status <b>Open</b> .  Al√©m disso, o l√≠der do componente, depois de ver um novo ticket em seu painel, toma uma decis√£o: atribuir um ticket agora ao desenvolvedor ou envi√°-lo para o backlog de tickets conhecidos (status do <b>Backlog</b> ) para atribu√≠-lo mais tarde, quando um desenvolvedor gratuito aparecer e os tickets com prioridade mais alta ser√£o fechados.  Isso pode parecer estranho, pois parece l√≥gico fazer o oposto: crie tickets no status <i>Backlog</i> e depois traduza-os no status Open.  Mas criamos ra√≠zes exatamente nesse esquema.  Permite configurar filtros facilmente para reduzir o tempo de decis√£o para novos tickets.  Um exemplo de um filtro JQL que mostra novas tarefas para um lead: <br><br> <code>Project = SRV AND assignee is EMPTY AND status in (Open)</code> <br> <br><h3>  Em andamento </h3><br><div class="spoiler">  <b class="spoiler_title">Nuances t√©cnicas do trabalho com o Git</b> <div class="spoiler_text">  Note-se que trabalhamos em cada tarefa em um ramo Git separado.  Por isso, temos um acordo de que o nome da ag√™ncia no in√≠cio deve conter o n√∫mero do ticket.  Por exemplo, <i>SRV-123_new_super_feature</i> .  Al√©m disso, os coment√°rios para cada confirma√ß√£o na ramifica√ß√£o devem conter o n√∫mero do ticket no formato [SRV-123]: {comment}.  Precisamos desse formato, por exemplo, para a remo√ß√£o correta de uma tarefa "ruim" de uma compila√ß√£o.  Como isso √© feito √© descrito em detalhes no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> . <br><br>  Esses requisitos s√£o controlados pelos ganchos Git.  Por exemplo, aqui est√° o conte√∫do de prepare-commit-msg, que prepara um coment√°rio para o commit, obtendo o n√∫mero do ticket do nome da ramifica√ß√£o atual: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash b=`git symbolic-ref HEAD| sed -e 's|^refs/heads/||' | sed -e 's|_.*||'` c=`cat $1` if [ -n "$b" ] &amp;&amp; [[ "$c" != "[$b]:"* ]] then echo "[$b]: $c" &gt; $1 fi</span></span></code> </pre><br>  Se voc√™ tentar enviar por push um commit com um coment√°rio "incorreto", esse push ser√° rejeitado.  Uma tentativa de iniciar uma filial sem um n√∫mero de ticket no in√≠cio tamb√©m ser√° rejeitada. <br></div></div><br>  Quando um ticket atinge o desenvolvedor, a primeira coisa que ele decomp√µe.  O resultado da decomposi√ß√£o √© a ideia do desenvolvedor de como resolver o problema e quanto tempo a solu√ß√£o levar√°.  Ap√≥s todos os detalhes principais terem sido esclarecidos, o ticket √© transferido para o status <b>Em andamento</b> e o desenvolvedor come√ßa a escrever o c√≥digo. <br><br>  √â habitual definir a data de vencimento para a tarefa no momento em que ela √© transferida para o status Em andamento.  Se o desenvolvedor n√£o fez isso, ele receber√° um lembrete no messenger corporativo do HipChat.  Um script especial a cada duas horas: <br><br><ul><li>  o uso da API REST do Jira seleciona tickets em status em andamento com um campo de data de vencimento vazio ( <i>projeto = SRV AND status = 'Em andamento' E a</i> data de vencimento <i>√© VAZIA</i> ); <br></li><li>  seleciona tickets incompletos com data de vencimento anterior √† data atual ( <i>projeto = SRV AND status = 'Em andamento'</i> <i>E o d√©bito n√£o √© VAZIO E o d√©bito &lt;now ()</i> ); <br></li><li>  reconhece o desenvolvedor de cada ticket lendo o campo correspondente no ticket, bem como o lead do desenvolvedor; <br></li><li>  agrupa tickets de desenvolvedores e leads e envia lembretes ao HipChat usando sua API. <br></li></ul><br>  Tendo feito todos os commits necess√°rios, o desenvolvedor empurra o ramo para um nabo comum.  Nesse caso, o gancho Git p√≥s-recebimento √© acionado, o que faz muitas coisas interessantes: <br><br><ul><li>  O nome da ramifica√ß√£o Git, bem como os coment√°rios sobre confirma√ß√µes, s√£o verificados quanto √† conformidade com nossas regras; <br></li><li>  verifica-se que o ticket ao qual a filial est√° associada n√£o est√° fechado (voc√™ n√£o pode inserir novo c√≥digo nos tickets fechados); <br></li><li>  A sintaxe dos arquivos PHP modificados √© verificada (PHP -l <i>nome_do_arquivo.php</i> ); <br></li><li>  a formata√ß√£o √© verificada; <br></li><li>  se o ticket no qual a ramifica√ß√£o for enviada for no status <i>Aberto</i> , ele ser√° automaticamente transferido para o status <i>Em andamento</i> ; <br></li><li>  o ticket √© anexado √† ramifica√ß√£o, a entrada correspondente √© feita no campo personalizado do ticket <i>Commits</i> usando a API do Jira.  √â assim: <br></li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sn/yt/-u/snyt-ud30nzzbgr4seaehcccnme.png"></div><br>  ( <i>branchdiff</i> √© um link para o diff da ramifica√ß√£o com a cabe√ßa da qual a ramifica√ß√£o atual se originou em nossa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ferramenta de</a> revis√£o de c√≥digo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Codeisok</a> ); <br><br><ul><li>  um coment√°rio √© criado no ticket com todas as confirma√ß√µes neste envio. <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5p/np/28/5pnp284b9eobeeyafn3hfjgcimu.png"></div><br>  <i>(Aida √© o nome condicional do nosso complexo de automa√ß√£o para trabalhar com Jira, Git e n√£o apenas. √â a partir desse nome que coment√°rios autom√°ticos aparecem no ticket. Escrevemos mais sobre Aida no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> ).</i> <br>  Um clique no hash da confirma√ß√£o √© diferente da revis√£o anterior da ramifica√ß√£o (mostrarei abaixo como ela se parece); <br></li><li>  verifica se h√° arquivos na ramifica√ß√£o que podem exigir tradu√ß√£o para os idiomas suportados (por exemplo, modelos de p√°gina da web) e, se houver, o novo valor \ Changed √© definido como o campo personalizado do ticket Lexems.  Isso garante que o ticket n√£o seja produzido sem uma tradu√ß√£o completa; <br></li><li>  o nome do funcion√°rio que envia a filial √© adicionado √† lista de desenvolvedores (um campo personalizado do ticket <i>Developers</i> ) <br></li></ul><br><h3>  Em revis√£o </h3><br>  Depois de escrever o c√≥digo e garantir que todos os requisitos para a tarefa sejam atendidos e os testes n√£o sejam interrompidos, o desenvolvedor atribui um ticket ao revisor (status <b>On Review</b> ).  Normalmente, o desenvolvedor decide quem analisar√° seu ticket.  Provavelmente, ser√° outro desenvolvedor que √© bem versado na parte certa do c√≥digo.  A revis√£o ocorre usando a ferramenta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Codeisok</a> , que √© aberta imediatamente com o diff desejado, clicando no link <i>branchdiff</i> no <i>campo</i> Ticket de <i>Confirma√ß√µes</i> ou no coment√°rio como um hash de confirma√ß√£o nos coment√°rios. <br><br>  O revisor v√™ algo assim: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ty/eg/ti/tyegti15pqhzbdgiebcw1evm8pi.png"></div><br>  Ap√≥s concluir a revis√£o, o revisor pressiona o bot√£o <i>Concluir</i> e, entre outras coisas, neste momento acontece o seguinte: <br><br><ul><li>  usando a API JIra, um coment√°rio √© criado no ticket com coment√°rios do revisor no contexto do c√≥digo.  Parece algo como isto: <br></li></ul><br><img src="https://habrastorage.org/webt/0k/n6/ka/0kn6kaydki4umhdxzmjebixy6eu.png"><br><ul><li>  se houver algum coment√°rio sobre o c√≥digo e o revisor decidir reabrir o ticket, o desenvolvedor receber√° uma notifica√ß√£o sobre isso no HipChat (isso √© feito usando a regra de webhook, que funciona na reabertura); <br></li><li>  O campo do ticket <i>Revisores</i> √© preenchido. <br></li></ul><br><h3>  Resolvido </h3><br>  Al√©m disso, se a revis√£o foi bem-sucedida, o ticket √© enviado para a lista de pend√™ncias de engenheiros de controle de qualidade no status <b>Resolvido</b> .  Mas, ao mesmo tempo, usando o webhook para o evento resolvido, testes autom√°ticos no c√≥digo da ramifica√ß√£o s√£o iniciados em segundo plano.  Ap√≥s alguns minutos, um novo coment√°rio aparecer√° no ticket, informando os resultados do teste. <br><br><img src="https://habrastorage.org/webt/um/ff/cc/umffccnuyujwg3ypdz3scdcrrou.png"><br><br>  Al√©m disso, a qualquer momento, voc√™ pode iniciar manualmente uma execu√ß√£o de teste repetida clicando no bot√£o especial Executar testes de unidade no menu do ticket.  Ap√≥s uma execu√ß√£o bem-sucedida, um novo coment√°rio aparecer√° no ticket, semelhante ao anterior. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tt/sk/65/ttsk65fr3egs9fbjpa7v6pbdzta.png"></div><br>  De fato, esse bot√£o √© um dos status de tarefas adicionais no fluxo de trabalho do Jira, uma tradu√ß√£o na qual aciona um script Groovy para o plug-in ScriptRunner.  O script chama uma URL externa, que inicia a execu√ß√£o do teste e, se a URL responder com √™xito, o ticket retornar√° ao seu status anterior (no nosso caso, <i>Resolvido</i> ). <br><br><h3>  Em Tiro / Em Tiro - OK </h3><br>  A tarefa √© testada primeiro em um ambiente de desenvolvimento.  Se tudo estiver bem, uma captura ser√° criada (por exemplo, clicando no link <i>Criar captura</i> no campo <i>Commits</i> ) - o diret√≥rio no servidor dedicado para o qual s√£o copiadas as altera√ß√µes do ticket adjacentes ao mestre atual.  O servidor trabalha com dados de produ√ß√£o: os bancos de dados e servi√ßos s√£o os mesmos que atendem usu√°rios reais.  Assim, o testador pode abrir um site ou conectar-se √† foto usando um cliente m√≥vel e "isolar" o recurso no ambiente de produ√ß√£o.  "Isolado" significa que nenhum outro c√≥digo / funcionalidade, exceto o novo da ramifica√ß√£o e o mestre atual, √© executado.  Portanto, esse est√°gio de teste √© talvez o principal, pois permite que o engenheiro de controle de qualidade encontre o problema com mais confiabilidade diretamente no problema de teste. <br><br>  Os recursos de captura s√£o acessados ‚Äã‚Äãusando URLs especiais que s√£o gerados no script de cria√ß√£o de captura e s√£o colocados no cabe√ßalho do ticket usando a API Jira.  Como resultado, vemos links para o site, painel de administra√ß√£o, logs e outras ferramentas executadas em um ambiente de captura: <br><br><img src="https://habrastorage.org/webt/kf/yk/e_/kfyke_qa3yjtezpyqx0-edwghfw.png"><br><br>  Al√©m disso, no momento da gera√ß√£o da captura, √© lan√ßado um script que analisa o conte√∫do dos arquivos alterados e cria solicita√ß√µes para a tradu√ß√£o dos novos tokens encontrados.  Ap√≥s a conclus√£o da tradu√ß√£o, o valor do campo <i>Lexems √©</i> alterado para Conclu√≠do e o ticket pode ser adicionado √† compila√ß√£o. <br><br>  Se o teste no tiro foi bem-sucedido, o ticket √© transferido para o status <b>No Tiro - OK.</b> <br><br><h3>  Na Constru√ß√£o / Na Constru√ß√£o - OK </h3><br>  Carregamos o c√≥digo duas vezes por dia - de manh√£ e √† noite.  Para fazer isso, √© criado um ramo de constru√ß√£o especial, que acabar√° por ser mesclado com o mestre e apresentado "em batalha". <br><br>  No momento da constru√ß√£o da ramifica√ß√£o de constru√ß√£o, um script especial usando uma consulta JQL recebe uma lista de tickets no status <i>In Shot - OK</i> e tenta congel√°-los na ramifica√ß√£o de constru√ß√£o quando todas as seguintes condi√ß√µes forem atendidas: <br><br><ul><li>  a tradu√ß√£o do ticket est√° conclu√≠da ou nada precisa ser traduzido ( <i>Lexems em ('N√£o', 'Conclu√≠do')</i> ); <br></li><li>  o desenvolvedor est√° presente no local de trabalho (o sistema de fus√£o autom√°tica verifica na base interna se o desenvolvedor est√° de f√©rias ou em licen√ßa m√©dica e, nesse caso, o ticket pode ser congelado manualmente apenas por engenheiros de libera√ß√£o ou outro desenvolvedor respons√°vel, indicado no campo especial <i>Vice Developer</i> ; o l√≠der do desenvolvedor ausente, nesse caso, recebe uma notifica√ß√£o de que o ticket n√£o pode ser adicionado automaticamente √† compila√ß√£o); <br></li><li>  o ticket n√£o possui o sinalizador <i>Up in Build</i> configurado como <i>Developer</i> (este √© um campo personalizado especial do ticket que permite ao desenvolvedor determinar quando o ticket ir√° para a build); <br></li><li>  a ramifica√ß√£o do ticket n√£o depende de outra ramifica√ß√£o que ainda n√£o atingiu o mestre ou a compila√ß√£o atual.  Fazemos o poss√≠vel para evitar essa situa√ß√£o, mas √†s vezes isso acontece quando o desenvolvedor cria sua pr√≥pria ramifica√ß√£o, n√£o a partir do mestre, mas de uma ramifica√ß√£o de outro ticket ou quando ele congela outra ramifica√ß√£o para si mesmo.  Isso tamb√©m pode ser feito por acaso, por isso decidimos que a prote√ß√£o adicional n√£o faria mal. <br></li></ul><br>  Vale ressaltar que a mesclagem autom√°tica pode n√£o ocorrer devido a um conflito de mesclagem.  Nesse caso, o ticket √© automaticamente transferido para o status <b>Reabrir</b> e atribu√≠do ao desenvolvedor, sobre o qual ele recebe imediatamente uma notifica√ß√£o no HipChat, e uma mensagem correspondente √© adicionada ao coment√°rio do ticket.  Depois de resolver o conflito, o ticket retorna para a compila√ß√£o. <br><br>  Se tudo estiver bem e a ramifica√ß√£o do ticket estiver congelada na compila√ß√£o, o ticket ser√° automaticamente transferido para o status <b>In Build</b> e o nome da compila√ß√£o ser√° gravado no campo personalizado do ticket <i>Build_Name</i> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/bl/cq/teblcqsgvc0tgn82svazpssgmii.png"></div><br>  Al√©m disso, usando esse valor, √© f√°cil obter uma lista de tickets que foram postados com cada build.  Por exemplo, procurar algu√©m para culpar se algo der errado. <br><br>  No pr√≥ximo est√°gio, os engenheiros de controle de qualidade tamb√©m verificam se o c√≥digo da tarefa funciona corretamente em conjunto com outras tarefas na compila√ß√£o.  Se tudo estiver bem, o ticket ser√° definido manualmente como <b>In Build - OK.</b> <br><br><h3>  Em produ√ß√£o / Em produ√ß√£o - OK / Fechado </h3><br>  Al√©m disso, na compila√ß√£o, todo o nosso conjunto de testes √© executado (unidade, integra√ß√£o, sel√™nio, etc.).  Se tudo estiver bem, a constru√ß√£o √© congelada no mestre e o c√≥digo √© definido para produ√ß√£o.  O ticket √© transferido para o status <b>Em produ√ß√£o.</b> <br><br>  Al√©m disso, o desenvolvedor (ou o cliente) garante que o recurso funcione corretamente na produ√ß√£o e define o status do ticket <b>Na produ√ß√£o - OK.</b> <br><br>  Ap√≥s duas semanas, os tickets no status <i>Em produ√ß√£o - OK</i> s√£o transferidos automaticamente para o status <b>Fechado</b> , se algu√©m n√£o tiver feito isso manualmente antes. <br><br>  Tamb√©m vale mencionar status adicionais em que o ticket pode estar localizado: <br><br><ul><li>  <b>Requisitos</b> - quando n√£o √© poss√≠vel obter rapidamente do cliente os esclarecimentos necess√°rios sobre a tarefa, e sem eles, o trabalho adicional no ticket √© imposs√≠vel, o ticket √© transferido para esse status e atribu√≠do √†quele que precisa dar explica√ß√µes; <br></li><li>  <b>Suspenso</b> - se o trabalho do ticket for suspenso, por exemplo, se o desenvolvedor for bloqueado por tarefas de uma equipe adjacente ou for√ßado a mudar para uma tarefa mais urgente; <br></li><li>  <b>Reaberto</b> - uma tarefa pode ser redescoberta para o desenvolvedor ap√≥s uma revis√£o, ap√≥s o teste, ap√≥s uma tentativa malsucedida de mesclar uma ramifica√ß√£o com o mestre. <br></li></ul><br>  Como resultado, um diagrama simplificado do nosso fluxo de trabalho se parece com o seguinte: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-m/cd/ue/-mcduen0-daw39ykqjhvp4rvdka.png"></div><br><h1>  Ticket - centro de comunica√ß√£o para a tarefa </h1><br>  Como resultado da passagem do ticket pelo fluxo, seu cabe√ßalho adquire aproximadamente o seguinte formato: <br><br><img src="https://habrastorage.org/webt/c7/4t/qp/c74tqp2l7smg9unpuxpgzw3fhxo.png"><br><br>  O que mais √© interessante aqui que personalizamos para n√≥s mesmos e que ainda n√£o mencionei? <br><br><ul><li>  <i>Componente</i> - usado para agrupar um ticket em um departamento grande.  Diferentes subgrupos s√£o respons√°veis ‚Äã‚Äãpor diferentes componentes e, consequentemente, em seus pain√©is, eles veem apenas tarefas para seus componentes.  Por exemplo, posso listar todos os erros abertos para os componentes da minha equipe com esta consulta: <br><br><pre> <code class="php hljs">Project = SRV <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> type = Bug <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> status = Open <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> component in componentsLeadByUser(d.semenihin)</code> </pre> <br></li><li>  <i>Revis√£o</i> - se a revis√£o de c√≥digo √© necess√°ria.  O padr√£o √© necess√°rio.  Se o valor do campo estiver definido como <i>N√£o, o</i> ticket receber√° imediatamente o status <i>Resolvido.</i> <i><br></i> <br>  QA - O testador precisa de verifica√ß√£o.  O padr√£o √© necess√°rio.  Se o valor do campo estiver definido como <i>N√£o, o</i> ticket passar√° imediatamente para o status <i>In Shot - OK.</i> <i><br></i> <br>  Sprint - no nosso caso, √© relevante apenas para tarefas com o tipo de novo recurso, um plano para o qual elaboramos antecipadamente por uma semana. <br></li><li>  <i>Data de vencimento</i> - o desenvolvedor determina a data em que o ticket estar√° em produ√ß√£o.  Exibido antes de iniciar o trabalho na tarefa. <br></li><li>  <i>Situa√ß√£o</i> - de fato, um log curto com uma breve descri√ß√£o do status atual da tarefa.  Por exemplo, <i>"20/08 estou aguardando tradu√ß√µes"</i> , <i>"21/08 √© necess√°rio esclarecer o cliente sobre o problema X"</i> .  Isso ajuda a ver um breve resumo da tarefa na lista de outras tarefas. <br></li><li>  <i>Msg4QA</i> - informa√ß√µes para engenheiros de controle de qualidade, compartilhadas pelo desenvolvedor para simplificar o processo de teste <br></li></ul><br>  Tentamos conduzir uma discuss√£o de quest√µes controversas com o diretor da tarefa nos coment√°rios do ticket, e n√£o "borrar" esclarecimentos importantes por correio e mensagens instant√¢neas.  Se, no entanto, a discuss√£o ocorreu "ao lado", √© altamente desej√°vel copiar o que voc√™ concordou no ticket. <br><br>  Al√©m dos textos "humanos", como mencionei acima, muitas coisas s√£o escritas automaticamente em um coment√°rio usando a API: <br><br><ul><li>  compromete <br></li><li>  revisar resultados; <br></li><li>  resultados da execu√ß√£o de teste. <br></li></ul><br>  √Äs vezes, coment√°rios autom√°ticos podem interferir, por exemplo, nos gerentes de produto.  Portanto, criamos um script JS simples que adiciona um bot√£o √† interface do Jira e permite minimizar todos os coment√°rios autom√°ticos, deixando apenas os humanos.  Como resultado, coment√°rios autom√°ticos minimizados parecem compactos. <br><br><img src="https://habrastorage.org/webt/nx/_-/jh/nx_-jh1r3hxzby1j1ue7itohe0e.png"><br><br><div class="spoiler">  <b class="spoiler_title">C√≥digo JS do script que incorporamos no modelo de ticket</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'load'</span></span>, () =&gt; {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> $ = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.jQuery;   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> botsAttrMatch = [       <span class="hljs-string"><span class="hljs-string">'aida'</span></span>,       <span class="hljs-string"><span class="hljs-string">'itops.api'</span></span>   ].map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">bot</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">`[rel="</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${bot}</span></span></span><span class="hljs-string">"]`</span></span>).join(<span class="hljs-string"><span class="hljs-string">','</span></span>);   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$) {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;   }   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AIDA_COLLAPSE_KEY = <span class="hljs-string"><span class="hljs-string">'aida-collapsed'</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> COMMENT_SELECTOR = <span class="hljs-string"><span class="hljs-string">'.issue-data-block.activity-comment.twixi-block'</span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> JiraImprovements = {       init() {           <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addButtons();           <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleAidaCollapsing();           <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleCommentExpansion();           <span class="hljs-comment"><span class="hljs-comment">// Handle toggle button and aida collapsing and put it on a loop           // to handle unexpected JIRA behaviour           const self = this;           setInterval(function () {               self.addButtons();               self.handleAidaCollapsing();           }, 2000);           addCss(`               #badoo-toggle-bots {                   background: #fff2c9;                   color: #594300;                   border-radius: 0 3px 0 0;                   margin-top: 3px;                   display: inline-block;               }           `);       },       addButtons() {           // Do we already have the button?           if ($('#badoo-toggle-bots').length &gt; 0) {               return;           }           // const headerOps = $('ul#opsbar-opsbar-operations');           const jiraHeader = $('#issue-tabs');           // Only add it in ticket state           if (jiraHeader.length &gt; 0) {               const li = $('&lt;a id="badoo-toggle-bots" class="aui-button aui-button-primary aui-style" href="/"&gt;Collapse Bots&lt;/a&gt;');               li.on('click', this.toggleAidaCollapsing.bind(this));               jiraHeader.append(li);           }       },       toggleAidaCollapsing(e) {           e.preventDefault();           const isCollapsed = localStorage.getItem(AIDA_COLLAPSE_KEY) === 'true';           localStorage.setItem(AIDA_COLLAPSE_KEY, !isCollapsed);           this.handleAidaCollapsing();       },       handleAidaCollapsing() {           const isCollapsed = localStorage.getItem(AIDA_COLLAPSE_KEY) === 'true';           const aidaComments = $(COMMENT_SELECTOR).has(botsAttrMatch).not('.manual-toggle');           if (isCollapsed) {               aidaComments.removeClass('expanded').addClass('collapsed');               $('#badoo-toggle-bots').text('Show Bots');           }           else {               aidaComments.removeClass('collapsed').addClass('expanded');               $('#badoo-toggle-bots').text('Collapse Bots');           }       },       handleCommentExpansion() {           $(document.body).delegate('a.collapsed-comments', 'click', function () {               const self = this; // eslint-disable-line no-invalid-this               let triesLeft = 100;               const interval = setInterval(() =&gt; {                   if (--triesLeft &lt; 0 || self.offsetHeight === 0) {                       clearInterval(interval);                   }                   // Element has been removed from DOM. ie new jira comments have been added                   if (self.offsetHeight === 0) {                       JiraImprovements.handleAidaCollapsing();                   }               }, 100);           });           $(document.body).delegate(COMMENT_SELECTOR, 'click', function () {               $(this).addClass('manual-toggle');// eslint-disable-line no-invalid-this           });       }   };   JiraImprovements.init();   function addCss(cssText) {       const style = document.createElement('style');       style.type = 'text/css';       if (style.styleSheet) {           style.styleSheet.cssText = cssText;       }       else {           style.appendChild(document.createTextNode(cssText));       }       document.head.appendChild(style);   } });</span></span></code> </pre><br></div></div><br><h1>  O que mais? </h1><br>    API  webhooks Jira    : <br><br><ul><li>    HipChat,      -   (    ); <br></li><li>    HipChat            (    ,    ); <br></li><li>              (  )    (          ;        ); <br></li><li>       ;        ,       ; <br></li><li>         In progress  ; <br></li><li>   ,   ¬´¬ª    (, On Review),      ; <br></li><li>                 ,      Jira     (, ¬´d.semenihin (Day off)¬ª).   . <br></li></ul><br><h1>  Sum√°rio </h1><br> Jira ‚Äî  ,        ,     . ,  ,      .    Jira         ,          . <br><br>            ‚Äî   .       Jira     ,          Jira. , -      . <br><br>  Obrigado pela aten√ß√£o! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt424655/">https://habr.com/ru/post/pt424655/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt424645/index.html">Como fizemos a pesquisa interna mais massiva do banco</a></li>
<li><a href="../pt424647/index.html">O pior gr√°fico do mundo</a></li>
<li><a href="../pt424649/index.html">Java vs GO. Teste por um grande n√∫mero de usu√°rios</a></li>
<li><a href="../pt424651/index.html">O que √© o ZFS? E por que as pessoas s√£o loucas por ela?</a></li>
<li><a href="../pt424653/index.html">Bem-vindo ao Voronezh Game Dev Meetup</a></li>
<li><a href="../pt424657/index.html">[Tradu√ß√£o] Corrigir ou matar o JavaScript instalado automaticamente?</a></li>
<li><a href="../pt424659/index.html">Benef√≠cio do escrit√≥rio em casa - luz do dia</a></li>
<li><a href="../pt424661/index.html">Pequenos sat√©lites terrestres cont√™m potencial para incr√≠veis oportunidades cient√≠ficas e comerciais</a></li>
<li><a href="../pt424663/index.html">Quais habilidades os desenvolvedores precisam no futuro?</a></li>
<li><a href="../pt424669/index.html">Perfis de usu√°rio ocultos: os anunciantes do Facebook at√© encontrar√£o voc√™ usando um n√∫mero de telefone n√£o p√∫blico</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>