<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👷 ✊🏽 🥋 Adaptive prozedurale Generierung mit dem WaveFunctionCollapse-Algorithmus und einer A-priori-Wahrscheinlichkeitsverteilung 👙 📚 👃🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Was ist prozedurale Generierung? 
 Die prozedurale Generierung umfasst viele generative Algorithmen, deren Prinzip darin besteht, Daten nicht manuell,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Adaptive prozedurale Generierung mit dem WaveFunctionCollapse-Algorithmus und einer A-priori-Wahrscheinlichkeitsverteilung</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482894/"><h1>  Was ist prozedurale Generierung? </h1><br>  Die prozedurale Generierung umfasst viele generative Algorithmen, deren Prinzip darin besteht, Daten nicht manuell, sondern algorithmisch zu erstellen: Anstatt das, was wir erstellen möchten (Karten, Musik, Gelände ...), manuell herzustellen, wird ein Algorithmus geschrieben, ohne den verschiedene Beispiele erfolgreich erstellt werden können denselben Vorgang mehrmals ausführen.  Dieser Ansatz ist besonders in Videospielen nützlich, bei denen eine ganze Karte oder Ebene zufällig generiert werden kann (z. B. Karten in Minecraft, Terraria oder Factorio oder Ebenenschemata in den meisten Roguelike). <br><br><h1>  Der Kollapsalgorithmus der Wellenfunktion und sein Umfang </h1><br>  In diesem Artikel untersuchen wir <a href="https://github.com/mxgmn/WaveFunctionCollapse" rel="noopener nofollow">den</a> von <a href="https://twitter.com/exutumno%3Flang%3Dca" rel="noopener nofollow">Maxim Gumin</a> vorgeschlagenen <a href="https://github.com/mxgmn/WaveFunctionCollapse" rel="noopener nofollow">Kollapsalgorithmus für Wellenfunktionen (WaveFunctionCollapse, WFC)</a> (auf seinem Twitter gibt es eine Sammlung erstaunlicher Inhalte, die mit diesem Algorithmus von anderen Entwicklern erstellt wurden!) Bild in einem Raster einer bestimmten Größe. <br><br>  Der Algorithmus basiert auf der Idee, schrittweise ein fertiges Bild zu erstellen und zu verfolgen, welche Kacheln einem bereits teilweise erstellten Bild „entsprechen“.  Für eine detaillierte Beschreibung des Algorithmus empfehlen wir, dass Sie sich auf das <a href="https://github.com/mxgmn/WaveFunctionCollapse" rel="noopener nofollow">ursprüngliche WFC-Repository auf Github</a> und den vierten Abschnitt des Artikels " <a href="https://adamsmith.as/papers/wfc_is_constraint_solving_in_the_wild.pdf" rel="noopener nofollow">WaveFunctionCollapse ist Constraint Solving in the Wild</a> " <a href="https://adamsmith.as/papers/wfc_is_constraint_solving_in_the_wild.pdf" rel="noopener nofollow">beziehen</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/887/cab/bc8/887cabbc82864fa16f590d3e6ca859e1.png"></div><br>  <i>Beispiele für prozedural erzeugte Samenbilder</i> <br><a name="habracut"></a><br>  Ein weiteres Anwendungsgebiet des WFC-Algorithmus ist neben der Erzeugung ähnlicher Bilder die Erzeugung von Kachelkarten.  Die Erstellung von Kachelkarten wird das Hauptthema des Artikels sein, da es einfacher ist, unsere Ideen klar zu erklären.  Anstelle eines Beispielbilds können Sie nur Kacheln und Kachelpaare speichern, die über Runden miteinander verbunden werden können.  In diesem Fall kann der Algorithmus verwendet werden, um Bilder ähnlich dem unten gezeigten zu erstellen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e72/7d0/cfc/e727d0cfc2cf088a7fa82d04513dfe1e.png"></div><br>  <i>Beispiele für zufällig generierte Kacheln</i> <br><br><h2>  Die Herausforderung und unsere Lösung </h2><br>  Wir haben es uns zur Aufgabe gemacht, auf Basis des Brettspiels <a href="https://boardgamegeek.com/boardgame/822/carcassonne" rel="noopener nofollow">Carcassonne</a> („Carcassonne“) eine Kachelkarte zu generieren, bei der das Feld von den Spielern „manuell“ (siehe Animation unten) aus Kacheln generiert wird, die miteinander kombiniert werden müssen. <br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 57.501%;"><video loop="" muted="" webkit-playsinline="" autoplay="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Ihr Browser unterstützt kein HTML5-Video. <source src="https://thumbs.gfycat.com/OilyFarAmericanpainthorse-mobile.mp4" type="video/mp4"></video></div></div></div><br>  Erstaunlicherweise ähnelt dies konzeptionell dem WFC-Algorithmus zum Erstellen beliebiger Kachelkarten, indem einer unvollständigen Lösung neue Teile hinzugefügt werden.  Und da WaveFunctionCollapse als Kachelkartengenerator verwendet werden kann, können auch "Carcassonne" -Felder generiert werden! <br><br>  Im Spiel selbst gibt es jedoch zu viele verschiedene Kacheln, und das Kodieren aller ihrer Verhältnisse ist eine übermäßig umfangreiche Aufgabe für einen 24-Stunden-Hackathon.  Aus diesem Grund haben wir beschlossen, eine sehr vereinfachte Version von "Carcassonne" ohne Burgen und Flüsse zu spielen, nur mit Straßen, Gras und Klöstern.  Wir haben also 6 mögliche Kacheln mit ihrer Rotation und Symmetrie.  Aber auch unter solchen Bedingungen sieht das Ergebnis in Carcassonne gut aus und sieht aus wie ein echtes Spiel! <br><br><div class="oembed"><div style="max-width: 100vh;"><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 100%;"><video loop="" muted="" webkit-playsinline="" autoplay="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Ihr Browser unterstützt kein HTML5-Video. <source src="https://thumbs.gfycat.com/DimThornyBunny-mobile.mp4" type="video/mp4"></video></div></div></div><br>  <i>Visualisierung der Füllung im Carcassonne-Feldalgorithmus</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8fe/681/d89/8fe681d89415778bf69d4fab4e735d27.png"></div><br>  <i>Beispiel für in den Algorithmus eingeführte Regeln</i> <br><br>  Das obige Bild enthält ein Beispiel für Eingaberegeln, die dem Algorithmus hinzugefügt wurden.  Wir müssen jedoch noch bestimmte Aspekte des Erscheinungsbilds des Feldes kontrollieren.  Sollte der Algorithmus „Straßen“ aus Straßen erstellen, die mit Klöstern gefüllt sind und einer Stadt ähneln, oder sollte das Feld höchstens aus Gras mit umliegenden Dörfern bestehen?  In dem ursprünglichen Algorithmus gibt es keine Möglichkeit, solche Bedingungen (wie jede andere) zu steuern, aber für die Möglichkeit der Steuerung ist es möglich, eine einfache Verbesserung vorzunehmen. <br><br><h2>  Bayesian a priori Wahrscheinlichkeitsverteilung </h2><br>  Wie oben erwähnt, fügt der Algorithmus dem Feld bei jedem Schritt eine neue Kachel hinzu, damit sie mit bereits platzierten Kacheln übereinstimmt. Wir haben jedoch nicht gesagt, was passieren würde, wenn mehrere verschiedene Kacheln an der ausgewählten Position platziert werden könnten (wir haben auch nicht darüber gesprochen, wie Im Allgemeinen wählen Sie diesen Ort, aber im Artikel werden wir es nicht berücksichtigen!).  In dem ursprünglichen Algorithmus wird jede geeignete Kachel gleichmäßig zufällig ausgewählt.  Bei unserer Entscheidung können wir jedoch bestimmte Fliesen bevorzugen, z. B. Gras, damit es häufiger auf dem Feld vorkommt.  Dies kann erreicht werden, indem eine ungleichmäßige Verteilung der Fliesen „Wahrscheinlichkeit vor“ erzeugt wird, bei der das Gras eine größere Chance hat, als die Straße verwendet zu werden, wenn beide Arten von Fliesen verwendet werden können.  Dies erinnert an Bayesianische Techniken.  Im vereinfachten Fall der Wahl zwischen zwei Optionen, Gras und Straßen, können wir Gras mit einer Wahrscheinlichkeit von p&gt; 0,5 und nicht mit der üblichen Wahrscheinlichkeit von 0,5 hinzufügen, die mit einer einheitlichen Wahrscheinlichkeit erhalten wird.  Diese Aufgabe kann leicht verallgemeinert werden, indem jeder Kachel ein Prioritätswert zugewiesen und mit diesem Wert die Wahrscheinlichkeit als Wert dividiert durch die Summe der Werte aller möglichen Kacheln festgelegt wird.  Die folgende Abbildung zeigt zwei geeignete Lösungen mit sehr unterschiedlichen Koeffizientenwerten, um zu verstehen, wie empfindlich der Algorithmus sein kann. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b6f/4b0/30a/b6f4b030a2b8a2baf17b5e140a5afce8.png"></div><br>  <i>Unterschiedliche Lösungen für unterschiedliche Anfangswahrscheinlichkeitsverteilungen</i> <br><br><h2>  Ein weiteres Beispiel: Bedingte Wahrscheinlichkeiten und Gruppierungen </h2><br>  Sie können diese Idee erweitern, und um dies zu veranschaulichen, werden wir anstelle von Carcassonne-Feldern zweidimensionale Karten von Minecraft-Erz erstellen.  Verschiedene Erzarten in Minecraft sind normalerweise in großen Formationen zu finden. Zusammen mit der Festlegung der Wahrscheinlichkeiten für jedes Erz werden wir die Wahrscheinlichkeiten von den Nachbarn abhängig machen, die bereits auf der Karte platziert sind.  Auch wenn die Anordnung von Eisen in der Nähe von Kohle nichts „Verbotenes“ ist, erhält eine andere Kohle neben bereits platzierter Kohle eine höhere Priorität. <br><br>  Obwohl dies im Bild unten nicht berücksichtigt wird, hängt die Wahrscheinlichkeit im Spiel auch von der Höhe der Kacheln ab, sodass die Position im Bild auch die Verteilungsbedingungen der Kachelwahrscheinlichkeiten beeinflussen kann. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c84/715/69e/c8471569ee2741d7a7f781154e520136.png"></div><br>  <i>Minecraft Ore Tile Map Beispiel Erstellt von WFC</i> <br><br><h1>  Fazit </h1><br>  Die Erstellung von Prozeduren ist ein leistungsstarkes Werkzeug, das es sich lohnt, auf Lager zu sein.  Insbesondere wird WFC aktiv in der Weltgeneration eingesetzt, und es ist zu berücksichtigen, dass die Verteilung neuer Kacheln möglicherweise ungleichmäßig ist und von anderen Faktoren beeinflusst werden kann, z. B. von bereits auf der Karte platzierten Nachbarn, neuen Kacheln und der Position im Bild.  Wir haben eine sehr einfache Anwendung erstellt, aber die Entwicklungsmöglichkeiten sind nahezu unbegrenzt! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de482894/">https://habr.com/ru/post/de482894/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de482882/index.html">Motor als elektromagnetische Bremse</a></li>
<li><a href="../de482884/index.html">Lektion für den Abend: Syntax-Hervorhebung schreiben</a></li>
<li><a href="../de482886/index.html">Habra-Analyse: Ist die Publikationslänge wichtig?</a></li>
<li><a href="../de482888/index.html">Starten eines VPN-Servers hinter dem Provider NAT</a></li>
<li><a href="../de482892/index.html">Let vs const - was ist zu benutzen?</a></li>
<li><a href="../de482896/index.html">OSCP - Meine Erfahrung</a></li>
<li><a href="../de482898/index.html">Moskauer Geschichte des professionellen Burnouts - von 1996 bis 2017. Der Weg vom Top-Manager der staatlichen Körperschaft zu Forschern</a></li>
<li><a href="../de482900/index.html">Automatisches Merchandising für Online oder wie ich ein Fahrrad erfunden habe</a></li>
<li><a href="../de482902/index.html">Nein, künstliche Intelligenz kann uns nicht besiegen</a></li>
<li><a href="../de482904/index.html">Eine kurze Geschichte der Weltraummikroprozessoren, Teil Eins</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>