<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐ป ๐๐ฝ ๐ง nodejs: ูุฏูุฑู ุงูุนูููุงุช ููุญุฏุงุช ES6 ๐ง๐พ ๐จ๐พโ๐ผ ๐ค๐ป</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุนุงูู ุฌุงูุง ุณูุฑูุจุช ูู ุฌุงูุจ ุงูุฎุงุฏู ุ ุฃูุง ูุจุชุฏุฆ ุจุนูู ูุธูู ููุฑุชุจ ุชูุฑูุจูุง. ูุฐูู ุ ุนูุฏูุง ุงูุชุดูุช ูุฌูุฏ ูุฏูุฑู ุงูุนูููุงุช ุ ูุจุงูุชุญุฏูุฏ ุนู pm2 ุ ุญุงููุช ุนูู ุงูููุฑ ุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>nodejs: ูุฏูุฑู ุงูุนูููุงุช ููุญุฏุงุช ES6</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482370/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> ูู ุนุงูู ุฌุงูุง ุณูุฑูุจุช ูู ุฌุงูุจ ุงูุฎุงุฏู ุ ุฃูุง ูุจุชุฏุฆ ุจุนูู ูุธูู ููุฑุชุจ ุชูุฑูุจูุง.  ูุฐูู ุ ุนูุฏูุง ุงูุชุดูุช ูุฌูุฏ ูุฏูุฑู ุงูุนูููุงุช ุ ูุจุงูุชุญุฏูุฏ ุนู <a href="https://habr.com/ru/post/480670/">pm2</a> ุ ุญุงููุช ุนูู ุงูููุฑ ุงุณุชุฎุฏุงููุง ูุชุดุบูู ุฎุฏูุฉ ุฎูููุฉ ุจุณูุทุฉ ุนูู <code>nodejs</code> ูุบุฑุถ ุงูุชุนููู ุงูุฐุงุชู.  ุฃูุง ูุนุฌุจ ุฌุฏูุง ุจุงููุฏุฑุฉ ุนูู ุชูุตูู ุงููุญุฏุงุช ุงูููุทูุฉ ูู ุฑูุฒ JS ุนุจุฑ <code>import</code> ( <a href="https://nodejs.org/docs/latest-v12.x/api/esm.html">ูุญุฏุงุช ES6</a> ) ุ ูุฃู  ูุณูุญ ูู ุจุงุณุชุฎุฏุงู ููุณ ุงูููุฏ ูู ุงููุชุตูุญ ูุนูู ุฌุงูุจ ุงูุฎุงุฏู ุ ููุฏ ูุชุจุช ุฎุฏูุฉ ุจุณูุทุฉ ูุน ูุญุฏุงุช ES6. </p><br><p style=";text-align:right;direction:rtl">  ุจุงุฎุชุตุงุฑ ุ ูู ุชูุฌุญ ูู ุชุดุบูู ุฅุตุฏุงุฑ ES6 ูู ุงูุชุทุจูู ุชุญุช <code>pm2</code> ุ ููู ุงูุฃูุถู ุงุณุชุฎุฏุงู ุฅูุง <code>forever</code> ุฃู <code>systemd</code> ูุชุดุบูู ูุซู ูุฐู ุงูุชุทุจููุงุช.  ุชุญุช ุงููุต - ุชูุฑูุฑ ุนู ุงููุชุงุฆุฌ ุจุงููุณุจุฉ ูุฃููุฆู ุงูุฐูู ูุญุจูู ุงููุตูุต ููุชุฑุฉ ุฃุทูู. </p><a name="habracut"></a><br><h1 id="vvedenie" style=";text-align:right;direction:rtl">  ููุฏูุฉ </h1><br><p style=";text-align:right;direction:rtl">  ูู ุณูุงู ูุฐุง ุงูููุดูุฑ ุ ูุดูุฑ ูุฏูุฑ ุงูุนูููุงุช ุฅูู ุงูุฎุฏูุฉ ุงูุชู ุชุชูุซู ูููุชูุง ุงูุฑุฆูุณูุฉ ูู ูุฑุงูุจุฉ ุชุทุจูู <code>nodejs</code> ููุฏ ุงูุชุดุบูู ูุฅุนุงุฏุฉ ุชุดุบููู ูู ุญุงูุฉ ุญุฏูุซ ุนุทู.  ุฃูุถุง ุ ูููู ููุฏูุฑ ุงูุนูููุฉ (ูููู ููุณ ูู ุงูุถุฑูุฑู) ุฌูุน ูุนูููุงุช ุญูู ุงูููุงุฑุฏ ุงูุชู ูุณุชููููุง ุงูุชุทุจูู (ุงููุนุงูุฌ ุ ุงูุฐุงูุฑุฉ). </p><br><h1 id="testovyy-servis" style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุงูุฎุฏูุฉ </h1><br><p style=";text-align:right;direction:rtl">  ููุฏูุฑู ุนูููุงุช ุงูุงุฎุชุจุงุฑ ุ ุงุณุชุฎุฏูุช ูุฐุง ุงูุฑูุฒ ูู ุฎุฏูุฉ ES6 ( <a href="https://github.com/flancer64/sof_es6_pm/tree/habr_pm">github repo</a> ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># src/app_es6.mjs <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> express <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"express"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> mod <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./mod/es6.mjs"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = express(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> msg = <span class="hljs-string"><span class="hljs-string">"Hello World! "</span></span> + mod.getName(); app.get(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(msg); res.send(msg); }); app.listen(<span class="hljs-number"><span class="hljs-number">3000</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'ES6 app listening on port 3000!'</span></span>); });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ูุญุฏุฉ ES6: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># src/mod/es6.mjs <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">getName</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"ES6 module is here."</span></span>; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุจุฏู ุฎุฏูุฉ ููุงุซูุฉ ุชู ุชูููุฐูุง ุจุงุณุชุฎุฏุงู ูุญุฏุงุช CommonJS ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># src/app_cjs.js <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> express = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"express"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mod = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"./mod/cjs.js"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = express(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> msg = <span class="hljs-string"><span class="hljs-string">"Hello World! "</span></span> + mod.getName(); app.get(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(msg); res.send(msg); }); app.listen(<span class="hljs-number"><span class="hljs-number">3000</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"CommonJS app listening on port 3000!"</span></span>); });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญุฏุฉ CJS: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"># src/mod/cjs.js <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">getName</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"CommonJS module is here."</span></span>; } };</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุฏุก ุชุดุบูู ุงูุฎุฏูุฉ ุฏูู ุงุณุชุฎุฏุงู ูุฏูุฑ ุงูุนูููุงุช ุนูู <code>nodejs</code> v12.14.0: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ node --experimental-modules ./src/app_es6.mjs # ES6-service $ node ./src/app_cjs.js # CJS-service</code> </pre> <br><h1 id="pm2" style=";text-align:right;direction:rtl">  PM2 </h1><br><p style=";text-align:right;direction:rtl">  <code>pm2</code> ูู <code>pm2</code> ุญุงูููุง ุจูู ูุฏูุฑู ุงูุนูููุงุช ูููุธุงุฆู ุงูููุชุฑุญุฉ (ุจุงูุฅุถุงูุฉ ุฅูู ุงูุญูุงุธ ุนูู ุงูุนูููุฉ ูู ุญุงูุฉ ุตุงูุญุฉ ููุนูู ุ ููุงู ุฃูุถูุง <a href="https://pm2.keymetrics.io/docs/usage/cluster-mode/">ูุฌููุนุงุช</a> ุ <a href="https://pm2.keymetrics.io/docs/usage/monitoring/">ููุฑุงูุจุฉ</a> ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ ุ <a href="https://pm2.keymetrics.io/docs/usage/restart-strategies/">ูุงุณุชุฑุงุชูุฌูุงุช</a> ูุชููุนุฉ <a href="https://pm2.keymetrics.io/docs/usage/restart-strategies/">ูุฅุนุงุฏุฉ ุชุดุบูู</a> ุงูุนูููุงุช). </p><br><p style=";text-align:right;direction:rtl">  ุชุจุฏุฃ ุฎุฏูุฉ CJS ุฏูู ูุดุงูู ( <code>pm2</code> v4.2.1): </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ pm2 start ./src/app_cjs.js -i 4</code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/cx/tu/9m/cxtu9mfzw3hkqq-si7h_brbfejy.png"></p><br><p style=";text-align:right;direction:rtl">  ูุชู ุฏุนู ุนุฏุฏ ูุญุฏุฏ ูู ูุซููุงุช ุงูุฎุฏูุฉ ูู ุงููุชูุฉ ุฃูุถูุง ุฏูู ูุดุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">root@omen17:~# ps -Af | grep app_cjs alex 29848 29828 0 15:31 ? 00:00:00 node /.../src/app_cjs.js alex 29855 29828 0 15:31 ? 00:00:00 node /.../src/app_cjs.js alex 29864 29828 0 15:31 ? 00:00:00 node /.../src/app_cjs.js alex 29875 29828 0 15:31 ? 00:00:00 node /.../src/app_cjs.js</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ูุชู ูุซูู ูุงุญุฏ ( <code>PID 29864</code> ) ุ ุงุฎุชุงุฑ ูุฏูุฑ ุงูุนูููุฉ ุนูู ุงูููุฑ ูุณุฎุฉ ุฌุฏูุฏุฉ ( <code>PID 30703</code> ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">root@omen17:~# kill -s SIGKILL 29864 root@omen17:~# ps -Af | grep app_cjs alex 29848 29828 0 15:31 ? 00:00:00 node /.../src/app_cjs.js alex 29855 29828 0 15:31 ? 00:00:00 node /.../src/app_cjs.js alex 29875 29828 0 15:31 ? 00:00:00 node /.../src/app_cjs.js alex 30703 29828 7 15:35 ? 00:00:00 node /.../src/app_cjs.js</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ุฅุตุฏุงุฑ ES6 ูู ุงูุชุทุจูู ูุง ูุนูู ุจุดูู ุตุญูุญ ูู <code>pm2</code> .  ุนูุฏ <a href="https://futurestud.io/tutorials/pm2-how-to-start-your-app-with-node-js-v8-arguments">ุชูุฑูุฑ</a> ุงููุณูุทุฉ "- ูุญุฏุงุช ุชุฌุฑูุจูุฉ" ุฅูู nodejs: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ pm2 start ./src/app_es6.mjs -i 4 --node-args="--experimental-modules"</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงุชุถุญ ูุฐู ุงูุตูุฑุฉ: <br><img src="https://habrastorage.org/webt/ur/y_/a3/ury_a3oh7cfqa-gj1-107tcxwx8.png"></p><br><p style=";text-align:right;direction:rtl">  ูู ุณุฌูุงุช ูุฑู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ pm2 log ... /home/alex/.pm2/logs/app-es6-error-2.log last 15 lines: 2|app_es6 | at /usr/lib/node_modules/pm2/node_modules/async/internal/onlyOnce.js:12:16 2|app_es6 | at WriteStream.&lt;anonymous&gt; (/usr/lib/node_modules/pm2/lib/Utility.js:186:13) 2|app_es6 | at WriteStream.emit (events.js:210:5) 2|app_es6 | at internal/fs/streams.js:299:10 2|app_es6 | Error [ERR_REQUIRE_ESM]: Must use import to load ES Module: /home/alex/work/sof_es6_pm/src/app_es6.mjs 2|app_es6 | at Object.Module._extensions..mjs (internal/modules/cjs/loader.js:1029:9) 2|app_es6 | at Module.load (internal/modules/cjs/loader.js:815:32) 2|app_es6 | at Function.Module._load (internal/modules/cjs/loader.js:727:14) 2|app_es6 | at /usr/lib/node_modules/pm2/lib/ProcessContainer.js:297:23 2|app_es6 | at wrapper (/usr/lib/node_modules/pm2/node_modules/async/internal/once.js:12:16) 2|app_es6 | at next (/usr/lib/node_modules/pm2/node_modules/async/waterfall.js:96:20) 2|app_es6 | at /usr/lib/node_modules/pm2/node_modules/async/internal/onlyOnce.js:12:16 2|app_es6 | at WriteStream.&lt;anonymous&gt; (/usr/lib/node_modules/pm2/lib/Utility.js:186:13) 2|app_es6 | at WriteStream.emit (events.js:210:5) 2|app_es6 | at internal/fs/streams.js:299:10</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ุ ูู ุงููุงูุน ุ <code>pm2</code> ูุง <a href="https://github.com/Unitech/pm2/issues%3Futf8%3D%25E2%259C%2593%26q%3Dis%253Aissue%2Bis%253Aopen%2Bexperimental-modules">ูููู</a> ุชุดุบูู ุงูุจุฑุงูุฌ ุงููุตูุฉ ุงูุชู ุชุณุชุฎุฏู ูุญุฏุงุช ES6 ุฏูู transpilation.  ุชู ุฅูุดุงุก <a href="https://github.com/Unitech/pm2/issues/4540">ุงูุฅุตุฏุงุฑ</a> ุงูุฃุฎูุฑ ูู ูุฐุง ุงูููุถูุน ูู 5 ูุงููู ุงูุฃูู (ุฏูุณูุจุฑ) 2019 (ูุจู ุดูุฑ ุชูุฑูุจูุง). </p><br><h1 id="forever" style=";text-align:right;direction:rtl">  ุฅูู ุงูุฃุจุฏ </h1><br><p style=";text-align:right;direction:rtl">  <code>forever</code> ูู ูุฏูุฑ ุงูุนูููุงุช ุงูุฃูุซุฑ ุดุนุจูุฉ ุจุนุฏ <code>pm2</code> ( <a href="https://www.npmtrends.com/forever-vs-pm2">npmtrends</a> ).  ูุฐุง ูู ูุดุฑูุน ูุฏูู (ุจุฏุฃ ูู ุนุงู 2010 ูู ุนุงู 2013 ููุงุจู <code>pm2</code> ) ุ ูููู ูุฑูุฒ ุจุดูู ุฃุถูู ุนูู ุงููุธููุฉ ููุงุฑูุฉ <code>pm2</code> .  <code>forever</code> "ุดุญุฐ" ููุญูุงุธ ุนูู ุงูุนูููุฉ ุจุงุณุชูุฑุงุฑ ุฏูู ุฃู ุฅุถุงูุงุช <code>pm2</code> ูู ุดูู ููุงุฒูุฉ ุงูุชุญููู ููุฑุงูุจุฉ ุงูููุงุฑุฏ ุงููุณุชุฎุฏูุฉ.  <a href="https://github.com/foreversd/forever/commits/master">ููููุง ูุชูุฑุงุฑ ุงูุงูุชุฒุงูุงุช ุ ูุฅู</a> ุงููุดุฑูุน ูู ุญุงูุฉ ูุณุชูุฑุฉ (ููุฏ ูุฑุช ูุฑุญูุฉ ุงูุชุทููุฑ ุงููุดุท ุจุงููุนู) ููุง ููููู ุชููุน ุฃู ูุธุงุฆู ุฌุฏูุฏุฉ ููู.  ูู ุฃุฌุฏ ุทุฑููุฉ ูุชูุฑูุฑ ุงููุณุงุฆุท ุฅูู <code>nodejs</code> ูู ุณุทุฑ ุงูุฃูุงูุฑ ุนูุฏ ุจุฏุก ุงูุชุดุบูู <code>forever</code> ุ ูููู ููุงู ูุซู ูุฐุง ุงูุงุญุชูุงู ุฅุฐุง ููุช ุชุณุชุฎุฏู ููู ุงูุชูููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">{ "uid": "app_es6", "max": 5, "spinSleepTime": 1000, "minUptime": 1000, "append": true, "watch": false, "script": "src/app_es6.mjs", "command": "node --experimental-modules" }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุดุจู ุชุดุบูู ุงูุชุทุจูู ูู ูุฐุง ุงูุฅุตุฏุงุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ forever start forever.es6.json ... $ forever list info: Forever processes running data: uid command script forever pid id logfile uptime data: [0] app_es6 node --experimental-modules src/app_es6.mjs 3972 3979 /home/ubuntu/.forever/app_es6.log 0:0:0:3.354</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููุง ููู ุงูุนูููุงุช ููุณูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ ps -Af | grep es6 ubuntu 3972 1 0 12:01 ? 00:00:00 /usr/bin/node /usr/lib/node_modules/forever/bin/monitor src/app_es6.mjs ubuntu 3979 3972 0 12:01 ? 00:00:00 node --experimental-modules /home/ubuntu/sof_es6_pm/src/app_es6.mjs</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง "ุชููุชู" ุงูุนูููุฉ ( <code>PID 3979</code> ) ุ ูููู ุงููุฏูุฑ ุจุงูุชุธุงู ุจุฑูุน ูุงุญุฏุฉ ุฌุฏูุฏุฉ ( <code>PID 4013</code> ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ kill -s SIGKILL 3979 ubuntu@vsf:~/sof_es6_pm$ ps -Af | grep es6 ubuntu 3972 1 0 12:01 ? 00:00:00 /usr/bin/node /usr/lib/node_modules/forever/bin/monitor src/app_es6.mjs ubuntu 4013 3972 4 12:10 ? 00:00:00 node --experimental-modules /home/ubuntu/sof_es6_pm/src/app_es6.mjs</code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>forever</code> ูููู ุจุนูู ููุชุงุฒ ูู ุชุดุบูู ุชุทุจูู ูุณุชุฎุฏู ูุญุฏุงุช ES6 ุ ูููู ุงูุณุคุงู ุงูุฐู ูุทุฑุญ ููุณู ุ ููุงุฐุง ูุณุชุฎุฏู ุฃูุธูุฉ linux <code>forever</code> ุฅุฐุง ูุงู ูููู ุชุญููู ูุธุงุฆู ููุงุซูุฉ ูู ุฎูุงู ููุงุฑุฏ ูุธุงู ุงูุชุดุบููุ </p><br><h1 id="systemd" style=";text-align:right;direction:rtl">  ุณูุณุชู ุฏู </h1><br><p style=";text-align:right;direction:rtl">  ูุณูุญ ูู <a href="https://habr.com/ru/company/southbridge/blog/255845/">systemd</a> ุจุฅูุดุงุก ุฎุฏูุงุช ูู ุจูุฆุฉ ูุธุงู ุชุดุบูู Linux ูุงูุชุญูู ูู ุชุดุบูููุง ุ ุจูุง ูู ุฐูู ูู ุญุงูุฉ ุญุฏูุซ ุนุทู ููุงุฌุฆ.  ูููู ุฅูุดุงุก ููู ูุญุฏุฉ ูุน ูุตู ููุฎุฏูุฉ ( <code>./app_es6.service</code> ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">[Unit] Description=Simple web server with ES6 modules. After=network.target [Service] Type=simple Restart=always PIDFile=/run/app_es6.pid WorkingDirectory=/home/ubuntu/sof_es6_pm ExecStart=/usr/bin/nodejs --experimental-modules /home/ubuntu/sof_es6_pm/src/app_es6.mjs [Install] WantedBy=multi-user.target</code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>/etc/systemd/system</code> directory (ูุฌุจ ุฃู ุชููู ุงููุณุงุฑุงุช ูุทููุฉ ูู ููู ุงููุญุฏุฉ).  ุฎูุงุฑ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุฏูุฉ ูู ุญุงูุฉ ุงูุชููู ุงูููุงุฌุฆ ูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Restart=always</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชู ุฅุทูุงู ุงูุฎุฏูุฉ ุนูู ุงููุญู ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"># systemctl start app_es6.service # systemctl status app_es6.service โ app_es6.service - Simple web server with ES6 modules. Loaded: loaded (/home/ubuntu/sof_es6_pm/app_es6.service; linked; vendor preset: enabled) Active: active (running) since Thu 2020-01-02 11:09:42 UTC; 9s ago Main PID: 2184 (nodejs) Tasks: 11 (limit: 4662) CGroup: /system.slice/app_es6.service โโ2184 /usr/bin/nodejs --experimental-modules /home/ubuntu/sof_es6_pm/src/app_es6.mjs Jan 02 11:09:42 vsf systemd[1]: Started Simple web server with ES6 modules.. Jan 02 11:09:42 vsf nodejs[2184]: (node:2184) ExperimentalWarning: The ESM module loader is experimental. Jan 02 11:09:42 vsf nodejs[2184]: ES6 app listening on port 3000!</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง "ุชููุชู" ุงูุนูููุฉ ( <code>PID 2184</code> ) ุ ูุซูุฑ <code>systemd</code> ุจุงูุชุธุงู ูุงุญุฏุฉ ุฌุฏูุฏุฉ ( <code>PID 2233</code> ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"># ps -Af | grep app_es6 root 2184 1 0 11:09 ? 00:00:00 /usr/bin/nodejs --experimental-modules /home/ubuntu/sof_es6_pm/src/app_es6.mjs # kill -s SIGKILL 2184 # ps -Af | grep app_es6 root 2233 1 3 11:10 ? 00:00:00 /usr/bin/nodejs --experimental-modules /home/ubuntu/sof_es6_pm/src/app_es6.mjs</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฐุง ูู ุ <code>systemd</code> ููุนู ููุณ ุงูุดูุก ุฅูู <code>forever</code> ุ ูููู ุนูู ูุณุชูู ุฃูุซุฑ ุฃุณุงุณูุฉ. </p><br><h1 id="strongloop" style=";text-align:right;direction:rtl">  StrongLoop </h1><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ูุฑุงุฌุนุฉ ุฎูุงุฑุงุช ุงูุชูููุฐ ููุฏูุฑู ุงูุนูููุงุช ุ ุบุงูุจูุง ูุง <a href="https://strong-pm.io/">ุชุธูุฑ ุดุงุดุฉ StrongLoop</a> .  ููุน ุฐูู ุ <a href="https://www.npmtrends.com/pm2-vs-strongloop-vs-forever">ูุจุฏู</a> ุฃู ูุฐุง ุงููุดุฑูุน ูุฏ ุชููู ุนู ุงูุชุทููุฑ (ุชู ุฅุตุฏุงุฑ ุฃุญุฏุซ ุฅุตุฏุงุฑ 6.0.3 <a href="https://www.npmjs.com/package/strongloop">ูุจู 3 ุณููุงุช</a> ).  ูู ุฃุชููู ุญุชู ูู ุชุซุจูุชู ุนูู Ubuntu 18.04 ุนุจุฑ <code>npm</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"># npm install -g strongloop npm WARN deprecated swagger-ui@2.2.10: No longer maintained, please upgrade to swagger-ui@3. ... npm ERR! A complete log of this run can be found in: npm ERR! /root/.npm/_logs/2020-01-02T11_25_15_473Z-debug.log</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุฎูุงู <code>yarn</code> ุชู ุชุซุจูุช ุงูุญุฒูุฉ ุ ุนูู ุงูุฑุบู ูู ุงูุนุฏุฏ ุงููุจูุฑ ูู ุงูุฑุณุงุฆู ุญูู ุงูุฅุตุฏุงุฑุงุช ุงูููููุฉ ูู ุงูุชุจุนูุงุช ูุฃุฎุทุงุก ุงูุชุซุจูุช ุ ููุน ุฐูู ุ ููุฏ ุฑูุถุช ุฏุฑุงุณุฉ StronLoop. </p><br><h1 id="instrumenty-razrabotchika" style=";text-align:right;direction:rtl">  ุฃุฏูุงุช ุงููุทูุฑ </h1><br><p style=";text-align:right;direction:rtl">  ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุจุฌุงูุจ <code>pm2</code> ูุฅูู <code>forever</code> <a href="https://www.npmtrends.com/pm2-vs-nodemon-vs-watch-vs-onchange">ููุงู</a> ูุฌููุนุงุช ูุซู <a href="https://www.npmjs.com/package/nodemon">nodemon</a> ุ <a href="https://www.npmjs.com/package/watch">watch</a> ุ <a href="https://www.npmjs.com/package/nodemon">onchange</a> .  ูุฐู ุงูุฃุฏูุงุช ููุณุช ูู ูุฏูุฑู ุงูุนูููุงุช ุ ูููููุง ุชุณูุญ ูู ุจูุฑุงูุจุฉ ุงูุชุบููุฑุงุช ูู ุงููููุงุช ูุชูููุฐ ุงูุฃูุงูุฑ ุงููุฑุชุจุทุฉ ุจูุฐู ุงูุชุบููุฑุงุช (ุจูุง ูู ุฐูู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู). </p><br><h1 id="rezyume" style=";text-align:right;direction:rtl">  ููุฎุต </h1><br><p style=";text-align:right;direction:rtl">  ูุนุฏ ูุฏูุฑ ุงูุนูููุงุช ูุซู <code>pm2</code> ุฎุฏูุฉ ูููุฏุฉ ููุบุงูุฉ ูู ุนุงูู JS ูู ุฌุงูุจ ุงูุฎุงุฏู.  ูููู ูุณูุก ุงูุญุธ ุ <code>pm2</code> ูุณูุญ <code>pm2</code> ููุณู ุจุชุดุบูู ุชุทุจููุงุช <code>nodejs</code> ุงูุญุฏูุซุฉ (ุนูู ูุฌู ุงูุฎุตูุต ุ ูุน ูุญุฏุงุช ES6).  ูุธุฑูุง ูุฃููู ูุง ุฃุญุจ ุงูุชุฑุฌูุฉ ุ ูุฅู ูุฏูุฑ ุงูุนูููุงุช ุงูุฃูุซุฑ ูุจูููุง ูู <code>nodejs</code> ูู <code>nodejs</code> ุจุงููุณุจุฉ ูู ูู ุงููุธุงู ุงูุชูููุฏู (ุฃู <a href="http://supervisord.org/index.html">ุจุฏุงุฆูู</a> ).  ููุน ุฐูู ุ ุณุฃููู ุณุนูุฏูุง ูุงุณุชุฎุฏุงู <code>pm2</code> ุจูุฌุฑุฏ ุฃู ูุฏุนู pm2 ุงูุชุทุจููุงุช ุจูุญุฏุงุช ES6. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar482370/">https://habr.com/ru/post/ar482370/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar482356/index.html">ุงุณุชุฎุฏุงู Windows Server ุฏูู ุงููุณุชูุดู ูู ูุฌูุฉ ูุธุฑ ูุณุชุฎุฏู Windows ุงูุนุงุฏู</a></li>
<li><a href="../ar482360/index.html">ุงููุจุงุญุซ ูุจุฑุง: ูู ุฃุตุฏูุงุก ูุน ุงูุฃุฌุณุงู ุงูุบุฑูุจุฉ</a></li>
<li><a href="../ar482362/index.html">ุดุจู ููุถู: ุชุงุฑูุฎ ููุฌุฒ ูููุฏูููุช ุ ูุดุฑูุน ูุง ููุชู ุจุงูููุฒ ุนูู ุงูุฅูุชุฑูุช</a></li>
<li><a href="../ar482364/index.html">ุงูุฃุดูุงุก ุงูุชู ุฑุจูุง ูู ุชุนุฑููุง ุนู ุฌุงูุง</a></li>
<li><a href="../ar482366/index.html">ูุงุฐุง ุฎุจุฑุงุก ุงูุณูุงุฑุงุช ุงูุฑูุจูุชูุฉ ุชููุฑ ูู ุชุณูุง ุงูุทูุงุฑ ุงูุขูู</a></li>
<li><a href="../ar482372/index.html">ุชูููู ูุถุน ุฌูุณุฉ ุงูุนูู ุงููุญุณูู ููุฒูุงุก Arch Linux ูู Hyper-V</a></li>
<li><a href="../ar482378/index.html">ูุจุฐุฉ ุชุงุฑูุฎูุฉ ุนู Wacom: ููู ุฃุชุช ุชูููุฉ ุงูููุญุงุช ุงูุฑุณูููุฉ ูููุฑุงุก ุงูุฅููุชุฑููููู</a></li>
<li><a href="../ar482382/index.html">ุฃุฑุจุนุฉ ูุจุงุฏุฆ ููุชุฑุฌูุฉ ุ ุฃู ุจุฃู ุทุฑููุฉ ูู ูุณุชุณูู ุงูุดุฎุต ููุชุฑุฌู ุขููุ</a></li>
<li><a href="../ar482384/index.html">ูุดุฑูุนู ุบูุฑ ุงููุญูู ุดุจูุฉ ูู 200 ุฌูุงุฒ ุชูุฌูู MikroTik</a></li>
<li><a href="../ar482386/index.html">Visual Studio for Mac: ุชุญูู ูู IDE ุงูุฎุงุต ุจู ุจุงุณุชุฎุฏุงู Keybindings</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>