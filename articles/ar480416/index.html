<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฆ ๐๐พ โ๐ป ุงูุฑูุงุถูุงุช ุงูุนุงูุฉ ุบูุฑ ุงูุขููุฉ ูู C # ๐๐พ ๐คฝ๐พ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุณูุก ุงูุญุธ ุ ูู ููู ูู ุงูุณูู ุชุฑุฌูุฉ ุงุณู ุงููุจุญ ุงูุฐู ุจุฏุฃุชู ุฅูู ุงููุบุฉ ุงูุฑูุณูุฉ. ููุฏ ููุฌุฆุช ุนูุฏูุง ูุฌุฏุช ุฃู ูุซุงุฆู MSDN ุงูุฑุณููุฉ ุชุณุชุฏุนู "ููุงูุจ" "ุนุงูุฉ" (ุนูู ุบุฑุงุฑ ู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุฑูุงุถูุงุช ุงูุนุงูุฉ ุบูุฑ ุงูุขููุฉ ูู C #</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480416/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/mj/zg/yw/mjzgywquj0lud4_vs9bjh8xdacu.png"></p><br><p style=";text-align:right;direction:rtl"> ูุณูุก ุงูุญุธ ุ ูู ููู ูู ุงูุณูู ุชุฑุฌูุฉ ุงุณู ุงููุจุญ ุงูุฐู ุจุฏุฃุชู ุฅูู ุงููุบุฉ ุงูุฑูุณูุฉ.  ููุฏ ููุฌุฆุช ุนูุฏูุง ูุฌุฏุช ุฃู ูุซุงุฆู <a href="https://docs.microsoft.com/ru-ru/dotnet/csharp/programming-guide/generics/" rel="nofollow">MSDN</a> ุงูุฑุณููุฉ ุชุณุชุฏุนู "ููุงูุจ" "ุนุงูุฉ" (ุนูู ุบุฑุงุฑ ููุงูุจ <code>C++</code> ุ ุฃูุชุฑุถ).  ูู ุงูุทุจุนุฉ ุงูุฑุงุจุนุฉ ูู <a href="https://www.microsoftpressstore.com/store/clr-via-c-sharp-9780735667457" rel="nofollow"><code>"CLR</code> ุนุจุฑ <code>C#</code></a> ุงูุชู ุตุฏูุชูู <a href="https://www.microsoftpressstore.com/store/clr-via-c-sharp-9780735667457" rel="nofollow">ุ</a> <a href="https://twitter.com/jeffrichter" rel="nofollow">Jeffrey Richter</a> ุ ุงูุชู ุชุฑุฌููุง <a href="https://habr.com/en/company/piter/">ุจูุชุฑ</a> ุ ุชุณูู ุงูุฃุฏููุฉ ุงูุฌููุณุฉ "ุงูุชุนูููุงุช" ุ ูุงูุชู ุชุนูุณ ุฌููุฑ ุงูููููู ุจุดูู ุฃูุถู.  ูุฐู ุงููุงุฏุฉ ุณูู ูุชุญุฏุซ ุนู <em>ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ุงููุนููุฉ ุบูุฑ ุขููุฉ ูู <code>C#</code></em> .  ุจุงููุธุฑ ุฅูู ุฃู <code>C#</code> ููุณ ูุฎุตุตูุง ููุญูุณุจุฉ ุนุงููุฉ ุงูุฃุฏุงุก (ุนูู ุงูุฑุบู ูู ุฃูู ูุงุฏุฑ ุจุงูุทุจุน ุนูู ุฐูู ุ ูููู ุบูุฑ ูุงุฏุฑ ุนูู ุงูุชูุงูุณ ูุน ููุณ <code>C/C++</code> ) ุ ูุฅู ุงูุนูููุงุช ุงูุฑูุงุถูุฉ ูู <code>BCL</code> ูุง ุชุญุธู ูุซูุฑูุง ูู ุงูุงูุชูุงู.  ุฏุนููุง ูุญุงูู ุชุจุณูุท ุงูุนูู ุจุงุณุชุฎุฏุงู ุฃููุงุน ุญุณุงุจูุฉ ุฃุณุงุณูุฉ ุจุงุณุชุฎุฏุงู <code>C#</code> ู <code>CLR</code> . </p><a name="habracut"></a><br><h2 id="postanovka-zadachi" style=";text-align:right;direction:rtl">  ุจูุงู ุงููุดููุฉ </h2><br><p style=";text-align:right;direction:rtl">  <strong>ุฅุฎูุงุก ุงููุณุฆูููุฉ</strong> : ุณูู ุชุญุชูู ุงูููุงูุฉ ุนูู ุงูุนุฏูุฏ ูู ุฃุฌุฒุงุก ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูุงูุชู <a href="https://sharplab.io/" rel="nofollow">ุณุฃูุถุญูุง</a> ูุน ุฑูุงุจุท ุฅูู ุงูููุฑุฏ ุงูุฑุงุฆุน <a href="https://sharplab.io/" rel="nofollow">SharpLab</a> ( <a href="https://github.com/ashmind/SharpLab" rel="nofollow">Gi <s>r</s> tHub</a> ) ุจูุงุณุทุฉ <a href="https://twitter.com/ashmind" rel="nofollow">Andrey Shchekin</a> . </p><br><p style=";text-align:right;direction:rtl">  ุชุชูุฎุต ูุนุธู ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ูู ุงูุนูููุงุช ุงูุฃุณุงุณูุฉ.  ุงูุฌูุน ูุงูุทุฑุญ (ุงูุงูููุงุจ ุ ุงูููู) ุ ุงูุถุฑุจ ูุงููุณูุฉ ูููู ุงุณุชููุงููุง ุจุนูููุงุช ุงูููุงุฑูุฉ ูุงูุชุญูู ูู ุงููุณุงูุงุฉ.  ุจุงูุทุจุน ุ ูููู ุชูููุฐ ุฌููุน ูุฐู ุงูุฅุฌุฑุงุกุงุช ุจุณูููุฉ ูุจุจุณุงุทุฉ ุนูู ูุชุบูุฑุงุช ูู ุฃู ุฃููุงุน ุญุณุงุจูุฉ ุฃุณุงุณูุฉ ูู <code>C#</code> .  ุงููุดููุฉ ุงููุญูุฏุฉ ูู ุฃู <code>C#</code> ูุฌุจ ุฃู <em>ุชุนูู</em> ูู ููุช ุงูุชุฑุฌูุฉ ุฃู ุงูุนูููุงุช ูุชู ุชูููุฐูุง ุนูู ุฃููุงุน ูุญุฏุฏุฉ ุ ููุจุฏู ุฃู ูุชุงุจุฉ ุทุฑููุฉ ุชุถูู ุจููุณ ุงููุฏุฑ ูู ุงูููุงุกุฉ (ูุงูุดูุงููุฉ) ุฑูููู ุตุญูุญูู ูุฑูููู ูู ุงููุงุตูุฉ ุงูุนุงุฆูุฉ ุฃูุฑ ูุณุชุญูู. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูุญุฏุฏ ุฑุบุจุงุชูุง ูุทุฑููุฉ ูุนููุฉ ุงูุชุฑุงุถูุฉ ุชููู ุจุจุนุถ ุงูุนูููุงุช ุงูุฑูุงุถูุฉ ุงูุจุณูุทุฉ: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุชุญุชูู ุงูุทุฑููุฉ ุนูู ูููุฏ ููุน ุนุงูุฉ ุชุญูููุง ูู ูุญุงููุฉ ุฅุถุงูุฉ (ุฃู ุถุฑุจ ุ ูุณูุฉ) ููุนูู ุงุนุชุจุงุทููู.  ูุญู ุจุญุงุฌุฉ ุฅูู ุจุนุถ ุงููููุฏ ุงูููุน ุงูุนุงู. </li><li style=";text-align:right;direction:rtl">  ูููุงุก ุงูุชุฌุฑุจุฉ ุ ูุฌุจ ุฃู ุชููู ุงูุฃููุงุน ุงูููุจููุฉ ูุงููุนุงุฏุฉ ูู ููุณูุง.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฌุจ ุฃู ูููู ูุฏู ุงููุดุบู ุงูุซูุงุฆู ุชูููุน ุงููููุฐุฌ <code>(T, T) =&gt; T</code> </li><li style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุชููู ุงูุทุฑููุฉ ูุญุณูุฉ ุฌุฒุฆููุง ุนูู ุงูุฃูู.  ุนูู ุณุจูู ุงููุซุงู ุ ุงูููุงููุฉ ูู ูู ููุงู ุบูุฑ ููุจููุฉ. </li></ol><br><h2 id="a-chto-tam-u-sosedey" style=";text-align:right;direction:rtl">  ููุงุฐุง ุนู ุงูุฌูุฑุงูุ </h2><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ููุธุฑ ุฅูู <code>F#</code> .  ูุณุช ูููุงู ูู <code>F#</code> ุ ููู ูุนุธู ูููุฏ <code>C#</code> ุชููููุง ูููุฏ <code>CLR</code> ุ ููุง ูุนูู ุฃู <code>F#</code> ุชุนุงูู ูู ููุณ ุงููุดููุงุช.  ููููู ูุญุงููุฉ ุงูุฅุนูุงู ุนู ุทุฑููุฉ ุฅุถุงูุฉ ูุนููุฉ ุตุฑูุญุฉ ูุทุฑููุฉ ุงูุฅุถุงูุฉ ุงููุนุชุงุฏุฉ ููุนุฑูุฉ ูุง ููููู ูุธุงู ุงูุงุณุชุฏูุงู ูู ุงูููุน <code>F#</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_gen</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x : </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'a) (y : '</span></span></span></span><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function">)</span></span> = x + y <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> xy = x + y add_gen <span class="hljs-number"><span class="hljs-number">5.0</span></span> <span class="hljs-number"><span class="hljs-number">6.0</span></span> |&gt; ignore <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-number"><span class="hljs-number">5.0</span></span> <span class="hljs-number"><span class="hljs-number">6.0</span></span> |&gt; ignore</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู <a href="https://sharplab.io/" rel="nofollow">ูุฐู ุงูุญุงูุฉ ุ</a> ุณูู ุชุชุญูู ููุชุง ุงูุทุฑููุชูู ุฅูู ุนุฏู ุงูุชุนููู ุ ูุณูู ุชููู ุงูุดูุฑุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ูุชุทุงุจูุฉ.  ูุธุฑูุง ูุตูุงุจุฉ ูุธุงู ุงูููุน <code>F#</code> ุ ุญูุซ ูุง ุชูุฌุฏ ุชุญูููุงุช ุถูููุฉ ูููููุฐุฌ <code>int -&gt; double</code> ุ ุจุนุฏ ุฃูู ุงุณุชุฏุนุงุก ููุฐู ุงูุทุฑู ูุน ูุนููุงุช ุงูููุน <code>double</code> (ูู ูุตุทูุญุงุช <code>C#</code> ) ุ ุทุฑู ุงูุงุชุตุงู ูุน ูุนููุงุช ุฃููุงุน ุฃุฎุฑู (ุญุชู ูุน ุงุญุชูุงู ููุฏ ุงูุฏูุฉ ุจุณุจุจ ุชุญููู ุงููุชุงุจุฉ) ุฃูุซุฑ ุณูู ุชูุดู. </p><br><p style=";text-align:right;direction:rtl">  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃูู ุฅุฐุง ุงุณุชุจุฏูุช ุนุงูู ุงูุชุดุบูู <code>+</code> ุจุนุงูู ุชุดุบูู ุงููุณุงูุงุฉ <code>=</code> ุ <a href="https://sharplab.io/" rel="nofollow">ุณุชุตุจุญ ุงูุตูุฑุฉ ูุฎุชููุฉ ููููุงู</a> : ุชุชุญูู ููุชุง ุงูุทุฑููุชูู ุฅูู ูุนููุฉ (ูู ูุฌูุฉ ูุธุฑ <code>C#</code> ) <code>F#</code> ููุชู ุงุณุชุฏุนุงุก ุฃุณููุจ ูุณุงุนุฏ ุฎุงุต ุ ูุชุงุญ ูู <code>F#</code> ูุฅุฌุฑุงุก ุงูููุงุฑูุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">let</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eq_gen</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x : </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'a) (y : '</span></span></span></span><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function">)</span></span> = x = y <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> eq xy = x = y eq_gen <span class="hljs-number"><span class="hljs-number">5.0</span></span> <span class="hljs-number"><span class="hljs-number">6.0</span></span> |&gt; ignore eq_gen <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> |&gt; ignore eq <span class="hljs-number"><span class="hljs-number">5.0</span></span> <span class="hljs-number"><span class="hljs-number">6.0</span></span> |&gt; ignore eq <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> |&gt; ignore</code> </pre> <br><h3 id="chto-naschet-java" style=";text-align:right;direction:rtl">  ูุงุฐุง ุนู <code>Java</code> ุ </h3><br><p style=";text-align:right;direction:rtl">  ูู ุงูุตุนุจ ุจุงููุณุจุฉ ูู ุงูุชุญุฏุซ ุนู <code>Java</code> ุ ูููู ุ ุจูุฏุฑ ูุง ุฃุณุชุทูุน ุฃู ุฃููู ุ ููุงู ุฃููุงุน ูููุฉ <a href="https://en.wikipedia.org/wiki/Comparison_of_C_Sharp_and_Java" rel="nofollow">ููุณุช</a> ููุฌูุฏุฉ ูู ุงูุดูู ุงููุนุชุงุฏ ุจุงููุณุจุฉ ููุง ุ ูููู ูุง ุชุฒุงู ููุงู ุฃููุงุน <em>ุจุฏุงุฆูุฉ</em> .  ููุนูู ูุน ุงูุจุฏุงุฆููู ูู <code>Java</code> ููุงู <a href="https://en.wikipedia.org/wiki/Comparison_of_C_Sharp_and_Java" rel="nofollow">ุบูุงูุงุช</a> (ุนูู ุณุจูู ุงููุซุงู ุ ูุฑุฌุน <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" rel="nofollow"><code>Long</code></a> ูู ูููุฉ ุจุฏุงุฆูุฉ <code>long</code> ) ุ ูุงูุชู ููุง <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Number.html" rel="nofollow"><code>Number</code></a> ูุฆุฉ ุฃุณุงุณู ูุดุชุฑู.  ูุจุงูุชุงูู ุ ููููู ุชุนููู ุงูุนูููุงุช ุฌุฒุฆููุง ุจุงุณุชุฎุฏุงู <code>Number</code> ุ ูููู ูุฐุง ููุน ูุฑุฌุนู ุ ูู ุบูุฑ ุงููุฑุฌุญ ุฃู ูููู ูู ุชุฃุซูุฑ ุฅูุฌุงุจู ุนูู ุงูุฃุฏุงุก. </p><br><p style=";text-align:right;direction:rtl">  <em>ุชุตุญูุญ ูู ุฅุฐุง ููุช ูุฎุทุฆุง.</em> </p><br><h3 id="c" style=";text-align:right;direction:rtl">  <code>C++</code> ุ </h3><br><p style=";text-align:right;direction:rtl">  <code>C++</code> ูู ูุบุฉ ููุบุดุงุดูู. <br>  ุชููุฏ <code>C++</code> ุงูุทุฑูู ูููุฒุงุช ูุนุชุจุฑูุง ุงูุจุนุถ ... <a href="https://ru.wikiquote.org/wiki/%25D0%2597%25D0%25B2%25D1%2591%25D0%25B7%25D0%25B4%25D0%25BD%25D1%258B%25D0%25B5_%25D0%25B2%25D0%25BE%25D0%25B9%25D0%25BD%25D1%258B._%25D0%25AD%25D0%25BF%25D0%25B8%25D0%25B7%25D0%25BE%25D0%25B4_III:_%25D0%259C%25D0%25B5%25D1%2581%25D1%2582%25D1%258C_%25D1%2581%25D0%25B8%25D1%2582%25D1%2585%25D0%25BE%25D0%25B2" rel="nofollow">ุบูุฑ ุทุจูุนูุฉ</a> . <br>  ุงูููุงูุจ (ุงููููุจ ููุงูุจ) ุ ุนูู ุนูุณ ุงูุชุนูููุงุช (ุงููุฑุงุซุฉ) ุ ูู ุ ุจุงููุนูู ุงูุญุฑูู ุ <em>ููุงูุจ</em> .  ุนูุฏ ุงูุฅุนูุงู ุนู ูุงูุจ ุ ููููู ุชูููุฏ ุงูุฃููุงุน ุงูุชู ูุชููุฑ ููุง ูุฐุง ุงููุงูุจ ุจุดูู ุตุฑูุญ.  ููุฐุง ุงูุณุจุจ ุ ูู <code>C++</code> ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ ุตุงูุญุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; template&lt;typename T, std::enable_if_t&lt;std::is_arithmetic&lt;T&gt;::value&gt;* = nullptr&gt; T Add (T left, T right) { return left + right; } int main() { std::cout &lt;&lt; Add(5, 6) &lt;&lt; std::endl; std::cout &lt;&lt; Add(5.0, 6.0) &lt;&lt; std::endl; // std::cout &lt;&lt; Add("a", "b") &lt;&lt; std::endl; Does not compile }</span></span></span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>is_arithmetic</code> ุ ููุฃุณู ุ ูุณูุญ ููู ูู <code>char</code> ู <code>bool</code> ููุนููุงุช.  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูููู ุฃู ูููู <code>char</code> ููุงูุฆูุง ูู <code>sbyte</code> ูู ูุตุทูุญุงุช <code>C#</code> ุ ุนูู ุงูุฑุบู ูู ุฃู ุงูุฃุญุฌุงู ุงููุนููุฉ ูุฃููุงุน ุงูุฃุนุฏุงุฏ ุงูุตุญูุญุฉ ุชุนุชูุฏ ุนูู ูุฑุญูุฉ ุงููุธุงู ุงูุฃุณุงุณู / ุงููุชุฑุฌู / ุงูููุฑ. </p><br><h3 id="yazyki-s-dinamicheskoy-tipizaciey" style=";text-align:right;direction:rtl">  ูุบุงุช ุงูุทุจุงุนุฉ ุงูุฏููุงููููุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุฃุฎูุฑูุง ุ ููุฑ ูู ุจุถุน ูุบุงุช ููุชูุจุฉ ุฏููุงูููููุง (ููุชุฑุฌูุฉ) ุ ุชู ุดุญุฐูุง ุจูุงุณุทุฉ ุงูุญุณุงุจ.  ูู ูุซู ูุฐู ุงููุบุงุช ุ ูุง ูุคุฏู ุชุนููู ุงูุญุณุงุจ ุนุงุฏุฉู ุฅูู ุญุฏูุซ ูุดููุงุช: ุฅุฐุง ูุงู ููุน ุงููุนููุงุช ููุงุณุจูุง ููุชูููุฐ ุ ูุดุฑูุทูุง ุ ูุณูุชู ุชูููุฐ ุงูุนูููุฉ ุ ูุฅูุง ูุณูู ุชูุดู ูุน ุญุฏูุซ ุฎุทุฃ. </p><br><p style=";text-align:right;direction:rtl">  ูู <code>Python</code> (3.7.3 ร 64): </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y type(add(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>)) <span class="hljs-comment"><span class="hljs-comment"># &lt;class 'int'&gt; type(add(5.0, 6.0)) # &lt;class 'float'&gt; type(add('a', 'b') # &lt;class 'str'&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู <code>R</code> (3.6.1 ร 64) </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">add &lt;- function(x, y) x + y # <span class="hljs-function"><span class="hljs-function">Or </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">typeof</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> vctrs::</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vec_ptype_show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(add(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">6</span></span></span></span><span class="hljs-function"><span class="hljs-params">))</span></span></span><span class="hljs-function"> # Prototype: </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> vctrs::</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vec_ptype_show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(add(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5L</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">6L</span></span></span></span><span class="hljs-function"><span class="hljs-params">))</span></span></span><span class="hljs-function"> # Prototype: integer vctrs::</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vec_ptype_show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(add(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"5"</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"6"</span></span></span></span><span class="hljs-function"><span class="hljs-params">))</span></span></span><span class="hljs-function"> # Error in x + y : non-numeric argument to binary </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">operator</span></span></span></span></code> </pre> <br><h2 id="obratno-v-mir-c-ogranichivaem-obobschennyy-tip-matematicheskoy-funkcii" style=";text-align:right;direction:rtl">  ุนูู ุงูุนูุณ ูู ุฐูู ุ ูู ุนุงูู C #: ูููู ุจุชูููุฏ ุงูููุน ุงูุนุงู ูููุธููุฉ ุงูุฑูุงุถูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ูุณูุก ุงูุญุธ ุ ูุง ูููููุง ุงูููุงู ุจุฐูู.  ูู <code>C#</code> ุชููู ุงูุฃููุงุน ุงูุจุฏุงุฆูุฉ ุฃููุงุนูุง ุญุณุจ ุงููููุฉ ุ ุฃู  ุงูููุงูู ุงูุชู ุ ุนูู ุงูุฑุบู ูู ุฃููุง ููุฑูุซุฉ ูู <code>System.Object</code> (ู <a href="https://docs.microsoft.com/en-us/dotnet/api/system.valuetype%3Fview%3Dnetcore-3.0" rel="nofollow"><code>System.ValueType</code></a> ) ุ ูุง ุชููู ุงููุซูุฑ ูู ุงูููุงุณู ุงููุดุชุฑูุฉ.  ุงูููุฏ ุงูุทุจูุนู ูุงูููุทูู ูู <code>where T : struct</code> .  ุจุฏุกูุง ูู <code>C# 7.3</code> ูุฏููุง <code>where T : unmanaged</code> ููุฏ <code>where T : unmanaged</code> ุ ููุง ูุนูู ุฃู <code>T</code> ูู <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/unmanaged-types" rel="nofollow"><code> ,        null</code></a> .  ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฃููุงุน ุงูุญุณุงุจูุฉ ุงูุจุฏุงุฆูุฉ ุงูุชู ูุญุชุงุฌูุง ุ <code>char</code> ุ <code>bool</code> ุ <code>decimal</code> ุ <em>ุฃู</em> <code>Enum</code> <em>ูุฃู</em> ุจููุฉ ุชุญุชูู ุฌููุน ุญููููุง ุนูู ููุณ ุงูููุน <code>unmanaged</code> ุชูู ุจูุฐู ุงููุชุทูุจุงุช.  ุฃู  <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/unmanaged-types" rel="nofollow">ูุฐุง ุงูููุน</a> ุณูู ูุฌุชุงุฒ ุงูุงุฎุชุจุงุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> Coords&lt;T&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : unmanaged { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> TX; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> TY; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจุงูุชุงูู ุ ูุง ูููููุง ูุชุงุจุฉ ูุธููุฉ ูุนููุฉ ุชูุจู ููุท ุงูุฃููุงุน ุงูุญุณุงุจูุฉ ุงููุทููุจุฉ.  ููู ููุง <code>Unsafe</code> ูู ุนููุงู ุงูููุงู - ุณูุถุทุฑ ุฅูู ุงูุงุนุชูุงุฏ ุนูู ุงููุจุฑูุฌูู ุจุงุณุชุฎุฏุงู ุฑูุฒูุง.  ูุญุงููุฉ ุงุณุชุฏุนุงุก ุงูุฃุณููุจ ุงููุนูู ุงูุงูุชุฑุงุถู <code>T Add&lt;T&gt;(T left, T right) where T : unmanaged</code> ุฅูู ูุชุงุฆุฌ ุบูุฑ ูุชููุนุฉ ุฅุฐุง ูุงู ุงููุจุฑูุฌ ุจุชูุฑูุฑ ูุงุฆูุงุช ูู ููุน ุบูุฑ ูุชูุงูู ููุณุงุฆุท. </p><br><h2 id="eksperiment-pervyy-naivnyy-dynamic" style=";text-align:right;direction:rtl">  ุงูุชุฌุฑุจุฉ ุงูุฃููู ุ ุณุงุฐุฌุฉ: <code>dynamic</code> </h2><br><p style=";text-align:right;direction:rtl">  <code>dynamic</code> ูู ุงูุฃุฏุงุฉ ุงูุฃููู ูุงููุงุถุญุฉ ุงูุชู ูููู ุฃู ุชุณุงุนุฏูุง ูู ุญู ูุดููุชูุง.  ุจุทุจูุนุฉ ุงูุญุงู ุ ูุฅู ุงุณุชุฎุฏุงู <code>dynamic</code> ูุฅุฌุฑุงุก ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ุฃูุฑ ูุง ุทุงุฆู ููู ุนูู ุงูุฅุทูุงู - <code>dynamic</code> ููุงูุฆุฉ <code>object</code> ุ ููุชู ุชุญููู ุงูุฃุณุงููุจ ุงูุชู ูุทูู ุนูููุง ุงููุชุบูุฑ <code>dynamic</code> ุฅูู ุงูุนูุงุณ ูุญุดู ูู ูุจู ุงููุชุฑุฌู.  ูููุงูุฃุฉ - ุชุนุจุฆุฉ / ุชูุฑูุบ ุฃููุงุนูุง ุฐุงุช ุงููููุฉ.  ููุง <a href="https://sharplab.io/" rel="nofollow">ูุซุงู</a> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Class</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Method</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x = Add(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> y = Add(<span class="hljs-number"><span class="hljs-number">5.0</span></span>, <span class="hljs-number"><span class="hljs-number">6.0</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">dynamic</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">dynamic</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">dynamic</span></span></span></span><span class="hljs-function"><span class="hljs-params"> right</span></span></span><span class="hljs-function">)</span></span> =&gt; left + right; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฌุฑุฏ ุฅููุงุก ูุธุฑุฉ ุนูู <code>IL</code> <code>Method</code> ุงูุฃุณููุจ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">.<span class="hljs-function"><span class="hljs-function">method </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> hidebysig </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Method</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) cil managed</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Method begins at RVA 0x2050 // Code size 53 (0x35) .maxstack 8 IL_0000: ldc.i4.5 IL_0001: box [System.Private.CoreLib]System.Int32 IL_0006: ldc.i4.6 IL_0007: box [System.Private.CoreLib]System.Int32 IL_000c: call object Class::Add(object, object) IL_0011: pop IL_0012: ldc.r8 5 IL_001b: box [System.Private.CoreLib]System.Double IL_0020: ldc.r8 6 IL_0029: box [System.Private.CoreLib]System.Double IL_002e: call object Class::Add(object, object) IL_0033: pop IL_0034: ret } // end of method Class::Method</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญููุฉ <code>5</code> ุ <em>ูุนุจุฃุฉ</em> ุ ูุญููุฉ <code>6</code> ุ ูุนุจุฃุฉ ุ ุชุณูู <code>object Add(object, object)</code> . <br>  ุงูุฎูุงุฑ ุงููุงุถุญ ูุง ููุงุณุจูุง. </p><br><h2 id="eksperiment-vtoroy-v-lob" style=";text-align:right;direction:rtl">  ุงูุชุฌุฑุจุฉ ุงูุซุงููุฉ ุ "ูู ุงูุฌุจูุฉ" </h2><br><p style=";text-align:right;direction:rtl">  ุญุณููุง ุ <code>dynamic</code> ููุณุช ููุง ุ ููู ุนุฏุฏ ุฃููุงุนูุง ูุญุฏูุฏ ุ ููู ูุนุฑููุฉ ูุณุจููุง.  ูููุณูุญ ุฃููุณูุง ุจูุฌููุนุฉ ูู ุงููุฑูุน <s>ูููุชุจูุง</s> : ุฅุฐุง ูุงู ููุนูุง <em>ูู</em> ุ ูููุญุณุจ ุดูุฆูุง ุ ูุฅูุง - ููุง ูู ุงูุงุณุชุซูุงุก. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> T Add&lt;T&gt;(T left, T right) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : unmanaged { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(left <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i32Left &amp;&amp; right <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i32Right) { <span class="hljs-comment"><span class="hljs-comment">// ??? } // ... throw new NotSupportedException(); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุซุงูุซูุง ุ ูุง ูุญู ููุงุฌู ูุดููุฉ.  ุฅุฐุง ูููุช ุงูุฃููุงุน ุงูุชู ูุนูู ูุนูุง ุ ููุง ูุฒุงู ุจุฅููุงูู ุชุทุจูู ุงูุนูููุฉ ุนูููุง ุฃูุถูุง ุ ุซู ูุฌุจ ุชุญููู <code>int</code> ุงูุดุฑุทู ุงููุงุชุฌ ุฅูู ููุน <code>T</code> ุบูุฑ ูุนุฑูู ููุฐุง ููุณ ุจุงูุฃูุฑ ุงูุณูู.  ูุง ูุชู ุชุฌููุน <code>return (T)(i32Left + i32Right)</code> ููุณ ููุงู ูุง ูุถูู ุฃู ูููู <code>T</code> <code>int</code> (ุนูู ุงูุฑุบู ูู ุฃููุง ูุนุฑู ุฃูู).  ููููู ูุญุงููุฉ <code>return (T)(object)(i32Left + i32Right)</code> ุงูุชุญููู ุงููุฒุฏูุฌ <code>return (T)(object)(i32Left + i32Right)</code> .  ุฃููุงู ุ ูุชู ุชุนุจุฆุฉ ุงููููุฉ ุ ุซู ูุชู ุชูุฑูุบูุง ูู <code>T</code>  ูู ูุนูู ูุฐุง <strong>ุฅูุง</strong> ุฅุฐุง ูุงูุช ุงูุฃููุงุน <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/types/boxing-and-unboxing" rel="nofollow">ูุทุงุจูุฉ</a> ูุจู ุงูุชุนุจุฆุฉ ูุจุนุฏ ุงูุชุบููู.  ูุง ููููู ุญุฒู <code>int</code> ุ ููู ุชูุฑูุบูุง <code>double</code> ุ ุญุชู ุฅุฐุง ูุงู ููุงู ุชุญููู ุถููู <code>int -&gt; double</code> .  ุงููุดููุฉ ูู <a href="https://sharplab.io/" rel="nofollow">ูุฐุง</a> ุงูููุฏ ูู ุงูุชูุฑุน ุงูุนููุงู ูููุฑุฉ ุญุฒู ุงูุชูุฑูุบ ุ ุญุชู <code>if</code> ุงูุธุฑูู.  ูุฐุง ุงูุฎูุงุฑ ูู ุฃูุถุง ููุณุช ุฌูุฏุฉ. </p><br><h2 id="refleksiya-i-metadannye" style=";text-align:right;direction:rtl">  ุงูุงูุนูุงุณ ูุงูุจูุงูุงุช ุงููุตููุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุญุณูุง ุ ุงูุนุจ ููุฐุง ูููู.  ูุนูู ุงูุฌููุน ุฃู ููุงู ุนูุงูู ุชุดุบูู ูู <code>C#</code> ูููู ุชุฌุงูุฒูุง.  ููุงู ุ <code>+</code> ุ <code>-</code> ุ <code>==</code> ุ <code>==</code> <code>!=</code> ูููู ุฌุฑุง.  ูู ูุง ูุญุชุงุฌ ุฅูู ุงูููุงู ุจู ูู ุณุญุจ ุฃุณููุจ ุซุงุจุช ูู ุงูููุน <code>T</code> ูุชูุงูู ูุน ุงููุดุบู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงูุฅุถุงูุงุช - ูุฐุง ูู ุดูุก.  ุญุณูุง ุ ูุนู ุ ูุฑุฉ ุฃุฎุฑู ุจุถุน ุญุฒู ุ ูููู ูุง ุงููุชูุฑุนุฉ ููุง ูุดุงูู.  ูููู ุชุฎุฒูู ูู ุดูุก ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุญุณุจ ุงูููุน <code>T</code> ูุจุตูุฑุฉ ุนุงูุฉ ุชุณุฑูุน ุงูุนูููุฉ ุจูู ุทุฑููุฉ ุ ููุง ูููู ูู ุนูููุฉ ุฑูุงุถูุฉ ูุงุญุฏุฉ ูุงุณุชุฏุนุงุก ุทุฑููุฉ ุงูุนูุงุณ ูุงุญุฏุฉ.  ุญุณููุง ุ ุดูุก ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> T Add&lt;T&gt;(T left, T right) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : unmanaged { <span class="hljs-comment"><span class="hljs-comment">// Simple example without cache. var method = typeof(T) .GetMethod(@"op_Addition", new [] {typeof(T), typeof(T)}) ?.CreateDelegate(typeof(Func&lt;T, T, T&gt;)) as Func&lt;T, T, T&gt;; return method?.Invoke(left, right) ?? throw new InvalidOperationException(); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุณูุก ุงูุญุธ ูุฐุง <a href="https://jonskeet.uk/csharp/genericoperators.html" rel="nofollow">ูุง ูุนูู</a> .  ูุงูุญูููุฉ ูู ุฃู ุงูุฃููุงุน ุงูุญุณุงุจูุฉ (ูููู ููุณ <code>decimal</code> ) <em>ูุง ุชููู</em> ูุซู ูุฐู ุงูุทุฑููุฉ ุงูุณุงููุฉ.  ูุชู ุชูููุฐ ุฌููุน ุงูุนูููุงุช ูู ุฎูุงู ุนูููุงุช <code>IL</code> ุ ูุซู <a href="" rel="nofollow"><code>add</code></a> .  ุงูุงูุนูุงุณ ุงูุทุจูุนู ูุง ูุญู ูุดููุชูุง. </p><br><h2 id="systemlinqexpressions" style=";text-align:right;direction:rtl">  System.Linq.Expressions </h2><br><p style=";text-align:right;direction:rtl">  ุชู ุชูุถูุญ ุงูุญู ุงููุงุฆู ุนูู <code>Expressions</code> ูู ูุฏููุฉ <a href="https://twitter.com/jonskeet" rel="nofollow">John Skeet</a> <a href="https://jonskeet.uk/csharp/genericoperators.html" rel="nofollow">ููุง</a> (ุจูุงุณุทุฉ Marc Gravell). <br>  ุงูููุฑุฉ ุจุณูุทุฉ ุฌุฏุง.  ุงูุชุฑุถ ุฃู ูุฏููุง ููุน <code>T</code> ูุฏุนู ุงูุนูููุฉ <code>+</code> .  ูููู ุจุฅูุดุงุก ุชุนุจูุฑ ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">(x, y) =&gt; x + y;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุจุนุฏ ุงูุชุฎุฒูู ุงููุคูุช ุ ุณูู ูุณุชุฎุฏููุง.  ุจูุงุก ูุซู ูุฐุง ุงูุชุนุจูุฑ ุณูู ุฌุฏุง.  ูุญู ุจุญุงุฌุฉ ุฅูู ูุนููุชูู ูุนูููุฉ ูุงุญุฏุฉ.  ูุฐูู ุฏุนููุง ููุชุจูุง. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Dictionary&lt;(Type Type, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Op), Delegate&gt; Cache = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;(Type Type, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Op), Delegate&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> T Add&lt;T&gt;(T left, T right) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : unmanaged { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(T); <span class="hljs-comment"><span class="hljs-comment">// If op is cached by type and function name, use cached version if (Cache.TryGetValue((t, nameof(Add)), out var del)) return del is Func&lt;T, T, T&gt; specificFunc ? specificFunc(left, right) : throw new InvalidOperationException(nameof(Add)); var leftPar = Expression.Parameter(t, nameof(left)); var rightPar = Expression.Parameter(t, nameof(right)); var body = Expression.Add(leftPar, rightPar); var func = Expression.Lambda&lt;Func&lt;T, T, T&gt;&gt;(body, leftPar, rightPar).Compile(); Cache[(t, nameof(Add))] = func; return func(left, right); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชู ูุดุฑ ูุนูููุงุช ูููุฏุฉ ุญูู ุฃุดุฌุงุฑ ุงูุชุนุจูุฑ ูุงูููุฏูุจูู ุนูู ุงููุญูุฑ </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงุญูุฉ ุงููููุฉ ุ ุชุณูุญ ููุง ุงูุชุนุจูุฑุงุช ุจุญู ุฌููุน ูุดููุงุชูุง - ุฃู ุนูููุฉ ุฃุณุงุณูุฉ ูููู ุงุฎุชุฒุงููุง ุฅูู ุงุณุชุฏุนุงุก ุทุฑููุฉ ุนุงูุฉ.  ูููู ูุชุงุจุฉ ุฃู ุนูููุฉ ุฃูุซุฑ ุชุนููุฏูุง ุจููุณ ุงูุทุฑููุฉ ุ ุจุงุณุชุฎุฏุงู ุชุนุจูุฑุงุช ุฃูุซุฑ ุชุนููุฏูุง.  ูุฐุง ูููู <em>ุชูุฑูุจุง</em> . </p><br><h2 id="narushaem-vse-pravila" style=";text-align:right;direction:rtl">  ูุญู ูุณุฑ ูู ุงูููุงุนุฏ </h2><br><p style=";text-align:right;direction:rtl">  ูู ูู ุงููููู ุชุญููู ุดูุก ุขุฎุฑ ุจุงุณุชุฎุฏุงู ููุฉ <code>CLR/C#</code> ุ  ููุฑู ูุง ูู <s>ุงูุณูุฉ ุงูุชู</s> ูุชู ูููุง ุฅูุดุงุก ุงูููุฏ ุจูุงุณุทุฉ ุทุฑู ุงูุฅุถุงูุฉ <a href="https://sharplab.io/" rel="nofollow">ูุฃููุงุน ูุฎุชููุฉ</a> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Class</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y</span></span></span><span class="hljs-function">)</span></span> =&gt; x + y; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y</span></span></span><span class="hljs-function">)</span></span> =&gt; x + y; <span class="hljs-comment"><span class="hljs-comment">// Decimal only to show difference public static decimal Add(decimal x, decimal y) =&gt; x + y; }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญุชูู ุฑูุฒ <code>IL</code> ุงููุทุงุจู ุนูู ููุณ ูุฌููุนุฉ ุงูุชุนูููุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">ldarg<span class="hljs-number"><span class="hljs-number">.0</span></span> ldarg<span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> ret</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ุฑูุฒ ุงููุฑุฌุน ุฐุงุชู ุงูุฐู ูุชู ููู ุฌูุน ุฃููุงุน ุจุฏุงุฆูุฉ ุญุณุงุจูุฉ.  <code>decimal</code> ูู ูุฐุง ุงูููุงู ูุณุชุฏุนู <code>static decimal decimal.op_Addition(decimal, decimal)</code> .  ูููู ูุงุฐุง ูู ูุชุจูุง ุทุฑููุฉ ุณูุชู ุชุนููููุง ุ ูููู ุชุญุชูู ุนูู ูุฐุง ุงูุฑูุฒ ุจุงูุถุจุทุ  ุญุณููุง ุ ุฌูู ุณููุช ูุญุฐุฑ ูู ุฃู ูุฐุง <a href="https://jonskeet.uk/csharp/genericoperators.html" rel="nofollow">ูุง ูุณุชุญู ุงูุนูุงุก</a> .  ูู ุญุงูุชู ุ ููู ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฌููุน ุงูุฃููุงุน (ุจูุง ูู ุฐูู <code>decimal</code> ) ุ ููุฐูู <code>nullable</code> ุงููุงุฑุบุฉ.  ุณูุชุทูุจ ุฐูู ุนูููุงุช <code>IL</code> ุบูุฑ ุชุงููุฉ ุชูุงููุง ูุณูุคุฏู ุจุงูุถุฑูุฑุฉ ุฅูู ุญุฏูุซ ุฎุทุฃ.  ูููู ูุง ูุฒุงู ุจุฅููุงููุง ูุญุงููุฉ ุชูููุฐ ุงูุนูููุงุช ุงูุฃุณุงุณูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุฏูุดุชู ุ ูุง ูุญุชูู <code>Visual Studio</code> ุนูู ููุงูุจ ููุดุงุฑูุน <code>IL</code> ููููุงุช <code>IL</code> .  ูุง ููููู ููุท ุฃุฎุฐ ุฌุฒุก ูู ุงูููุฏ ููุตูู ูู <code>IL</code> ูุฅุฏุฑุงุฌู ูู ุงูุชุฌููุน ุงูุฎุงุต ุจู.  ุจุทุจูุนุฉ ุงูุญุงู ุ ุงููุตุฏุฑ ุงูููุชูุญ ูุฃุชู ููุณุงุนุฏุชูุง.  ูุญุชูู ูุดุฑูุน <a href="https://github.com/ins0mniaque/ILSupport" rel="nofollow"><code>ILSupport</code></a> ุนูู ููุงูุจ ููุดุงุฑูุน <code>IL</code> ุ ุจุงูุฅุถุงูุฉ ุฅูู ูุฌููุนุฉ ูู ุงูุฅุฑุดุงุฏุงุช ุงูุชู ูููู ุฅุถุงูุชูุง ุฅูู <code>*.csproj</code> ูุชุถููู <code>IL</code> code ูู ุงููุดุฑูุน.  ุจุงูุทุจุน ุ ูู ุงูุตุนุจ ุฌุฏูุง ูุตู ูู ุดูุก ูู <code>IL</code> ุ ูุฐูู ูุณุชุฎุฏู ูุคูู ุงููุดุฑูุน ุงูุณูุฉ <a href="https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.methodimplattribute%3Fview%3Dnetcore-3.0" rel="nofollow"><code>MethodImpl</code></a> ูุน ุนูุงูุฉ <a href="https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.methodimploptions%3Fredirectedfrom%3DMSDN%26view%3Dnetcore-3.0" rel="nofollow"><code>ForwardRef</code></a> .  ุชุณูุญ ูู ูุฐู ุงูุณูุฉ ุจุชุนุฑูู ุงูุทุฑููุฉ ุนูู ุฃููุง <code>extern</code> ูููุณ ูุตู ูุต ุงูุทุฑููุฉ.  ูุจุฏู ุดูุก ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">MethodImpl(MethodImplOptions.ForwardRef)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> T Add&lt;T&gt;(T left, T right) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : unmanaged;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ูุชุงุจุฉ ุชูููุฐ ุงูุทุฑููุฉ ูู ููู <code>*.il</code> ุจุฑูุฒ <code>IL</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">.method <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> hidebysig !!T Add&lt;valuetype .ctor (<span class="hljs-keyword"><span class="hljs-keyword">class</span></span> [<span class="hljs-title"><span class="hljs-title">mscorlib</span></span>]<span class="hljs-title"><span class="hljs-title">System</span></span>.<span class="hljs-title"><span class="hljs-title">ValueType</span></span> <span class="hljs-title"><span class="hljs-title">modreq</span></span> ([<span class="hljs-title"><span class="hljs-title">mscorlib</span></span>]<span class="hljs-title"><span class="hljs-title">System</span></span>.<span class="hljs-title"><span class="hljs-title">Runtime</span></span>.<span class="hljs-title"><span class="hljs-title">InteropServices</span></span>.<span class="hljs-title"><span class="hljs-title">UnmanagedType</span></span>)) <span class="hljs-title"><span class="hljs-title">T</span></span>&gt;(!!<span class="hljs-title"><span class="hljs-title">T</span></span> <span class="hljs-title"><span class="hljs-title">left</span></span>, !!<span class="hljs-title"><span class="hljs-title">T</span></span> <span class="hljs-title"><span class="hljs-title">right</span></span>) <span class="hljs-title"><span class="hljs-title">cil</span></span> <span class="hljs-title"><span class="hljs-title">managed</span></span> { .param type [<span class="hljs-number"><span class="hljs-number">1</span></span>] .custom instance <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> System.Runtime.CompilerServices.IsUnmanagedAttribute::.ctor() = (<span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> ) ldarg<span class="hljs-number"><span class="hljs-number">.0</span></span> ldarg<span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> ret }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุฃู ููุงู ุชุดูุฑ ุตุฑุงุญุฉ ุฅูู ุงูููุน <code>!!T</code> ุ ููุชุฑุญ <code>CLR</code> ูุฅุถุงูุฉ ูุณูุทูู ูุฅุฑุฌุงุน ุงููุชูุฌุฉ.  ูุง <strong>ุชูุฌุฏ</strong> ุงุฎุชุจุงุฑุงุช ุงูููุน ุ ููู ุดูุก ุนูู ุถููุฑ ุงููุทูุฑ.  ูุงููุซูุฑ ููุฏูุดุฉ ุ ุฃูู ูุนูู ุ ูุจุณุฑุนุฉ <em>ูุณุจูุง</em> . </p><br><h2 id="nemnogo-benchmarka" style=";text-align:right;direction:rtl">  ููููุง ูู ุงููุนูุงุฑ </h2><br><p style=";text-align:right;direction:rtl">  ุฑุจูุง ุ ุณูุชู ุจูุงุก ูุนูุงุฑ ุตุฑูุญ ุนูู ุจุนุถ ุงูุชุนููุฏุงุช ุงููุนูุฏุฉ ุฅูู ุญุฏ ูุง ุ ุญูุซ ูุชู ุญุณุงุจ "ูุฌูุงู ููุฌู" ุจููุงุฑูุฉ ูุฐู ุงูุฃุณุงููุจ ุงูุฎุทูุฑุฉ.  ูุชุจุช ุฎูุงุฑุฒููุฉ ุจุณูุทุฉ ุชูุฎุต ูุฑุจุนุงุช ุงูุฃุฑูุงู ุงูุชู ุชู ุญุณุงุจูุง ูุณุจููุง ูุชุฎุฒูููุง ูู ุตููู <code>double</code> ููุณูุช ุงููุจูุบ ุงูููุงุฆู ุนูู ุนุฏุฏ ุงูุฃุฑูุงู.  ูุชูููุฐ ุงูุนูููุฉ ุ ุงุณุชุฎุฏูุช ุนูุงูู ุชุดุบูู <code>C#</code> <code>+</code> ู <code>*</code> ู <code>/</code> ู ุ ููุง ููุนู ุงูุฃุดุฎุงุต ุงูุฃุตุญุงุก ุ ูุธุงุฆู ุชู ุฅูุดุงุคูุง ุจุงุณุชุฎุฏุงู <code>Expressions</code> ููุธุงุฆู <code>IL</code> . </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงููุชุงุฆุฌ ูู ูุง ููู ุชูุฑูุจุง:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>DirectSum</code> ูู ุงููุฌููุน ุจุงุณุชุฎุฏุงู ุนูุงูู ุงูุชุดุบูู ุงูููุงุณูุฉ <code>+</code> ู <code>*</code> ู <code>/</code> ุ </li><li style=";text-align:right;direction:rtl">  <code>BranchSum</code> ูุณุชุฎุฏู ุงููุชูุฑุนุฉ ุญุณุจ ุงูููุน ููููู ูู ุฎูุงู <code>object</code> . </li><li style=";text-align:right;direction:rtl">  <code>UnsafeBranchSum</code> ูุณุชุฎุฏู ุงููุชูุฑุนุฉ ุญุณุจ ุงูููุน <code>Unsafe.As&lt;,&gt;()</code> ุฎูุงู <code>Unsafe.As&lt;,&gt;()</code> ุ </li><li style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู <code>ExpressionSum</code> ุงููุฎุฒูุฉ ูุคูุชูุง ููู ุนูููุฉ ( <code>Expression</code> ) ุ </li><li style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู <code>UnsafeSum</code> <code>IL</code> ุฑูุฒ ุบูุฑ ุขูู ุงูููุฏูุฉ ูู ุงูููุงูุฉ </li></ul><br><p style=";text-align:right;direction:rtl">  ููุงุณ ุงูุญูููุฉ ุงููุงูุนุฉ - ุฌูุน ูุฑุจุนุงุช ุนูุงุตุฑ ุตููู ุชู ููุคู ูุณุจููุง ุนุดูุงุฆููุง ูู ุงูููุน <code>double</code> ูุงูุญุฌู <code>N</code> ุ ูุชุจูุนูุง ุจุชูุณูู ุงููุจูุบ ุนูู <code>N</code> ูุชุฎุฒููู ุ  ุงูุชุญุณููุงุช ุงููุฏุฑุฌุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">BenchmarkDotNet=v0.12.0, OS=Windows 10.0.18362 Intel Core i7-2700K CPU 3.50GHz (Sandy Bridge), 1 CPU, 8 logical and 4 physical cores .NET Core SDK=3.1.100 [Host] : .NET Core 3.1.0 (CoreCLR 4.700.19.56402, CoreFX 4.700.19.56404), X64 RyuJIT Job-POXTAH : .NET Core 3.1.0 (CoreCLR 4.700.19.56402, CoreFX 4.700.19.56404), X64 RyuJIT Runtime=.NET Core 3.1</code> </pre><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุทุฑููุฉ </th><th>  N </th><th>  ูุชูุณุท </th><th>  ุฎุทุฃ </th><th>  StdDev </th><th>  ูุณุจุฉ </th><th>  RatioSD </th></tr></thead><tbody><tr><td>  <strong>DirectSum</strong> </td><td>  <strong>1000</strong> </td><td>  <strong>2.128 ููุง</strong> </td><td>  <strong>0.0341 ููุง</strong> </td><td>  <strong>0.0303 ููุง</strong> </td><td>  <strong>1.00</strong> </td><td>  <strong>0.00</strong> </td></tr><tr><td>  BranchSum </td><td>  1000 </td><td>  57.468 ููุง </td><td>  0.4478 ููุง </td><td>  0.3496 ููุง </td><td>  26.97 </td><td>  0.46 </td></tr><tr><td>  UnsafeBranchSum </td><td>  1000 </td><td>  72.924 ููุง </td><td>  0.4131 ููุง </td><td>  0.3864 ููุง </td><td>  34.28 </td><td>  0.50 </td></tr><tr><td>  ExpressionSum </td><td>  1000 </td><td>  144.555 ููุง </td><td>  2.5182 ููุง </td><td>  2.2323 ููุง </td><td>  67.94 </td><td>  1.29 </td></tr><tr><td>  UnsafeSum </td><td>  1000 </td><td>  5.054 ููุง </td><td>  0.0324 ููุง </td><td>  0.0303 ููุง </td><td>  2.37 </td><td>  0.03 </td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>  <strong>DirectSum</strong> </td><td>  <strong>10000</strong> </td><td>  <strong>21.174 ููุง</strong> </td><td>  <strong>0.3092 ููุง</strong> </td><td>  <strong>0.2741 ููุง</strong> </td><td>  <strong>1.00</strong> </td><td>  <strong>0.00</strong> </td></tr><tr><td>  BranchSum </td><td>  10000 </td><td>  573.972 ููุง </td><td>  2.9274 ููุง </td><td>  2.5951 ููุง </td><td>  27.11 </td><td>  0.40 </td></tr><tr><td>  UnsafeBranchSum </td><td>  10000 </td><td>  735.031 ููุง </td><td>  9.1016 ููุง </td><td>  8.0683 ููุง </td><td>  34.72 </td><td>  0.53 </td></tr><tr><td>  ExpressionSum </td><td>  10000 </td><td>  1462.593 ููุง </td><td>  9.0932 ููุง </td><td>  8.0609 ููุง </td><td>  69.09 </td><td>  1.02 </td></tr><tr><td>  UnsafeSum </td><td>  10000 </td><td>  50.388 ููุง </td><td>  0.3956 ููุง </td><td>  0.3701 ููุง </td><td>  2.38 </td><td>  0.03 </td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>  <strong>DirectSum</strong> </td><td>  <strong>100000</strong> </td><td>  <strong>210.021 ููุง</strong> </td><td>  <strong>1.9832 ููุง</strong> </td><td>  <strong>1.7581 ููุง</strong> </td><td>  <strong>1.00</strong> </td><td>  <strong>0.00</strong> </td></tr><tr><td>  BranchSum </td><td>  100000 </td><td>  6046.340 ููุง </td><td>  86.9740 ููุง </td><td>  77.1002 ููุง </td><td>  28.79 </td><td>  0.42 </td></tr><tr><td>  UnsafeBranchSum </td><td>  100000 </td><td>  7ุ406.489 ููุง </td><td>  65.7415 ููุง </td><td>  58.2782 ููุง </td><td>  35.27 </td><td>  0.27 </td></tr><tr><td>  ExpressionSum </td><td>  100000 </td><td>  15021.642 ููุง </td><td>  189.2625 ููุง </td><td>  167.7763 ููุง </td><td>  66.77 </td><td>  0.88 </td></tr><tr><td>  UnsafeSum </td><td>  100000 </td><td>  505.551 ููุง </td><td>  2.3662 ููุง </td><td>  2.2133 ููุง </td><td>  2.41 </td><td>  0.03 </td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>  <strong>DirectSum</strong> </td><td>  <strong>1024000</strong> </td><td>  <strong>2ุ306.751 ููุง</strong> </td><td>  <strong>22.4173 ููุง</strong> </td><td>  <strong>20.9692 ููุง</strong> </td><td>  <strong>1.00</strong> </td><td>  <strong>0.00</strong> </td></tr><tr><td>  BranchSum </td><td>  1024000 </td><td>  61643.224 ููุง </td><td>  610.3048 ููุง </td><td>  570.8795 ููุง </td><td>  26.72 </td><td>  0.28 </td></tr><tr><td>  UnsafeBranchSum </td><td>  1024000 </td><td>  75644.639 ููุง </td><td>  494.4096 ููุง </td><td>  462.4711 ููุง </td><td>  32.80 </td><td>  0.39 </td></tr><tr><td>  ExpressionSum </td><td>  1024000 </td><td>  154ุ327.137 ููุง </td><td>  1ุ267.2469 ููุง </td><td>  1ุ185.3835 ููุง </td><td>  66.91 </td><td>  0.55 </td></tr><tr><td>  UnsafeSum </td><td>  1024000 </td><td>  5ุ295.990 ููุง </td><td>  14.9537 ููุง </td><td>  12.4871 ููุง </td><td>  2.29 </td><td>  0.02 </td></tr></tbody></table></div></div></div><br><p style=";text-align:right;direction:rtl">  ุงูููุฏ ุบูุฑ ุงูุขูู ูุฏููุง ูู ุญูุงูู <code>2.5</code> ูุฑุฉ ุฃุจุทุฃ (ูู ุญูุซ ุนูููุฉ ูุงุญุฏุฉ).  ูููู ุฃู ูุนุฒู ุฐูู ุฅูู ุญูููุฉ ุฃูู ูู ุญุงูุฉ ุญุณุงุจ "ุงูุฌุจูู" ุ ูููู ุงููุชุฑุฌู ุจุชุฌููุน <code>a + b</code> ูู ููุฏ <code>add</code> op ุ ููู ุญุงูุฉ ุทุฑููุฉ ุบูุฑ ุขููุฉ ุ ุชุณูู ูุธููุฉ ุซุงุจุชุฉ ุ ูุงูุชู ุชููู ุจุทูุฆุฉ ุจุดูู ุทุจูุนู. </p><br><h2 id="vmesto-zaklyucheniya-kogda-true--true" style=";text-align:right;direction:rtl">  ุจุฏูุงู ูู ุงูุงุณุชูุชุงุฌ: ุนูุฏูุง ูููู <code>true != true</code> </h2><br><p style=";text-align:right;direction:rtl">  ูุจู ุจุถุนุฉ ุฃูุงู ุ ุตุงุฏูุช ูุซู ูุฐู <a href="https://twitter.com/jaredpar/status/1205540750764625920" rel="nofollow">ุงูุชุบุฑูุฏุฉ ูู</a> Jared Parsons: </p><br><blockquote style=";text-align:right;direction:rtl">  ููุงู ุญุงูุงุช ุญูุซ ุชุชู ุทุจุงุนุฉ ูุง ููู "false" <br>  ููุทูู ุจ = ... <br>  ุฅุฐุง (ุจ) Console.WriteLine (b.IsTrue ()) ุ </blockquote><p style=";text-align:right;direction:rtl">  ูุงู ูุฐุง ูู ุงูุฑุฏ ุนูู <a href="https://twitter.com/vreshetnikov/status/1204929378368417792" rel="nofollow">ูุฐุง ุงูุฅุฏุฎุงู</a> ุ ูุงูุฐู ูุนุฑุถ ุฑูุฒ ุงูุชุญูู <code>bool</code> ูู <code>true</code> ุ ูุงูุฐู ูุจุฏู ูุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsTrue</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> !<span class="hljs-literal"><span class="hljs-literal">true</span></span> &amp;&amp; !<span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุดููุงุช ุชุจุฏู ุฒุงุฆุฏุฉ ุนู ุงูุญุงุฌุฉ ุ ุฃููุณ ูุฐููุ  ููุฏู Jared ูุซุงูุงู ูุนุงุฑุถูุง ููุถุญ <a href="https://gist.github.com/jaredpar/a0835afc71139284c09bfda203d8c011" rel="nofollow">ุจุนุถ ููุฒุงุช</a> ุงูุณููู <code>bool</code> .  ุงูููุฑุฉ ูู ุฃู <code>bool</code> <code>byte</code> ( <code>sizeof(bool) == 1</code> ) ุ ูู ุญูู ุฃู ุงูุชุทุงุจูุงุช <code>false</code> <code>0</code> ูุงููุทุงุจูุฉ <code>true</code> <code>1</code> .  ุทุงููุง ุฃูู ูุง ุชุชุฃุฑุฌุญ ุงููุคุดุฑุงุช ุ ูุชุตุฑู <code>bool</code> ุจุดูู ูุง ูุจุณ ููู ููููู ุงูุชูุจุค ุจู.  ููุน ุฐูู ุ ููุง ุฃุธูุฑ Jared ุ ููููู ุฅูุดุงุก <code>bool</code> ุจุงุณุชุฎุฏุงู ุงูุฑูู <code>2</code> ููููุฉ ุฃูููุฉ ุ ูุณููุดู ุฌุฒุก ูู ุนูููุงุช ุงูุชุญูู ุจุดูู ุตุญูุญ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> b = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>* ptr = (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>*)&amp;b; *ptr = <span class="hljs-number"><span class="hljs-number">2</span></span>;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููููุง ุชุญููู ุชุฃุซูุฑ ููุงุซู ุจุงุณุชุฎุฏุงู ุนูููุงุชูุง ุงูุฑูุงุถูุฉ ุบูุฑ ุงูุขููุฉ (ูุฐุง ูุง ูุนูู ูุน <code>Expressions</code> ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fakeTrue = Subtract&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt;(<span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> val = *(<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>*)&amp;fakeTrue; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(fakeTrue) Assert.AreNotEqual(fakeTrue, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Assert.Fail(<span class="hljs-string"><span class="hljs-string">"Clause not entered."</span></span>);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนู ุ ูุนู ุ ูุญู ูุชูุญุต ุฏุงุฎู ุงููุฑุน <code>true</code> ูุง ุฅุฐุง ูุงูุช ุงูุญุงูุฉ <code>true</code> ุ ููุชููุน ุฃู ุชููู <em>ุบูุฑ <code>true</code></em> ูู ุงููุงูุน.  ููุงุฐุง ูุฐุง ููุฐุงุ  ุฅุฐุง ููุช ุจุทุฑุญ ูู <code>0</code> ( <code>=false</code> ) <code>1</code> ( <code>=true</code> ) ุจุฏูู ุดููุงุช ุ ูุฅู <code>byte</code> ูุณุงูู <code>255</code> .  ุจุทุจูุนุฉ ุงูุญุงู ุ <code>255</code> ( <code>fakeTrue</code> ูุฏููุง) ููุณ <code>1</code> ( <code>true</code> ุญูููู) ุ ูุฐูู ูุชู ุชูููุฐ ุงูุชุฃููุฏ.  ุงููุชูุฑุนุฉ ุชุนูู ุจุดูู ูุฎุชูู. </p><br><p style=";text-align:right;direction:rtl">  <code>if</code> ุญุฏูุซ ุงูููุงุจ: ูุชู ุฅุฏุฎุงู ูุฑุน ูุดุฑูุท ุ  ุฅุฐุง ูุงูุช ุงูุญุงูุฉ <em>ุฎุงุทุฆุฉ</em> ุ ูุญุฏุซ ุงูุงูุชูุงู ุฅูู ุงูููุทุฉ ุจุนุฏ ููุงูุฉ ูุชูุฉ <code>if</code> .  ูุชู ุงูุชุญูู ูู ุงูุตุญุฉ ุจูุงุณุทุฉ ุนุจุงุฑุฉ <code>brfalse</code> / <code>brfalse_S</code> .  ููุงุฑู ุงููููุฉ ุงูุฃุฎูุฑุฉ ุนูู ุงูููุฏุณ ูุน <em>ุตูุฑ</em> .  ุฅุฐุง ูุงูุช ุงููููุฉ ุตูุฑูุฉ ุ ูุนูุฏุฆุฐ ุชููู <code>false</code> ุ ูุฅููุง ูุฎุทู ูุชูุฉ <code>if</code> .  ูู ุญุงูุชูุง ุ ูุฅู <code>fakeTrue</code> ูุง ุชุณุงูู ุงูุตูุฑ ุ ูุจุงูุชุงูู ูุฅู ุนูููุฉ ุงููุญุต ุชุณุชูุฑ ูุงูุชูููุฐ ุฏุงุฎู ูุชูุฉ <code>if</code> ุ ุญูุซ ููุงุฑู <code>fakeBool</code> ุจุงููููุฉ ุงูุญููููุฉ ูุงูุญุตูู ุนูู ูุชูุฌุฉ ุณูุจูุฉ. </p><br><p style=";text-align:right;direction:rtl">  UPD01: <br>  ุจุนุฏ ุงูููุงูุดุฉ ูู ุงูุชุนูููุงุช ูุน <a href="https://habr.com/en/users/shai_hulud/" class="user_link">shai_hulud</a> ู <a href="https://habr.com/en/users/blowin/" class="user_link">blowin</a> ุ ุฃุถูุช ุทุฑููุฉ ุฃุฎุฑู ูููุนุงููุฑ ุงูุชู ุชููุฐ ูุฑุนุง ูุซู <code>if(typeof(T) == typeof(int)) return (T)(object)((int)(object)left + (int)(object)right);</code>  .  ุนูู ุงูุฑุบู ูู ุญูููุฉ ุฃูู ูุฌุจ ุนูู <code>JIT</code> ุชุญุณูู ุนูููุงุช ุงููุญุต ุ ุนูู ุงูุฃูู ุนูุฏูุง ุชููู <code>T</code> <code>struct</code> ุ ูุฅู ูุฐู ุงูุฃุณุงููุจ ูุง ุชุฒุงู ุชุนูู ุจุชุฑุชูุจ ุฃุจุทุฃ.  ููุณ ูู ุงููุงุถุญ ูุง ุฅุฐุง ูุงูุช ุงูุชุญูููุงุช <code>T</code> -&gt; <code>int</code> -&gt; <code>T</code> ุฃูุซู ุฃู ูุง ุ ุฃู ูุง ุฅุฐุง ูุงู ูุชู ุงุณุชุฎุฏุงู ุงูููุงููุฉ / unboxing.  <code>MethodImpl</code> ุชุชุฃุซุฑ ูุชุงุฆุฌ ุงููุคุดุฑ ุจุดูู ูุจูุฑ <code>MethodImpl</code> . </p><br><p style=";text-align:right;direction:rtl">  UPD02: <br>  <a href="https://habr.com/en/users/xxxvano/" class="user_link">ูุฃุธูุฑ xXxVano</a> ูู ุงูุชุนูููุงุช ูุซุงููุง ุนูู ุงุณุชุฎุฏุงู ุงููุชูุฑุนุฉ ุญุณุจ ุงูููุน <code>Unsafe.As&lt;TFrom, TTo&gt;()</code> <code>T</code> &lt;--&gt; ููุนูุง ูุญุฏุฏูุง ุจุงุณุชุฎุฏุงู <code>Unsafe.As&lt;TFrom, TTo&gt;()</code> .  ุนู ุทุฑูู ุงูููุงุณ ูุน ุงูุชูุฑุน ุงููุนุชุงุฏ ูุงูุนุฑู ูู ุฎูุงู <code>object</code> ุ ูุชุจุช ุซูุงุซ ุนูููุงุช (ุงูุฌูุน ูุงูุถุฑุจ ูุงููุณูุฉ) ูุน ุงููุชูุฑุนุฉ ูุฌููุน ุฃููุงุน ุงูุญุณุงุจุงุช ุ ูุจุนุฏ ุฐูู ุฃุถูุช ูุนูุงุฑูุง ุขุฎุฑ ( <code>UnsafeBranchSum</code> ).  ุนูู ุงูุฑุบู ูู ุญูููุฉ ุฃู ุฌููุน ุงูุทุฑู (ุจุงุณุชุซูุงุก ุงูุชุนุจูุฑุงุช) ุชููุฏ ุฑูุฒ asm ูุชุทุงุจููุง ุชูุฑูุจูุง (ุจูุฏุฑ ูุง ุชุณูุญ ูู ูุนุฑูุชู ุงููุญุฏูุฏุฉ ุจุงูุชุฌููุน ุจุงูุญูู) ุ ูุณุจุจ ุบูุฑ ูุนุฑูู ุ ูุฅู ููุง ุงูุทุฑููุชูู <code>DirectSum</code> ุจุทูุฆุฉ ุฌุฏูุง ููุงุฑูุฉ ุจูู ูู ุงูุฌูุน ุงููุจุงุดุฑ ( <code>DirectSum</code> ) ู ุจุงุณุชุฎุฏุงู ุงููุฑุงุซุฉ ู <code>IL</code> ุฑูุฒ.  ููุณ ูุฏู ุฃู ุชูุณูุฑ ููุฐุง ุงูุชุฃุซูุฑ ุ ุญูููุฉ ุฃู ุงูููุช ุงูุฐู ุชุณุชุบุฑูู ุงูุฒูุงุฏุงุช ูุชูุงุณุจ ูุน <code>N</code> ูุดูุฑ ุฅูู ูุฌูุฏ ููุน ูู ุงูุญูู ุงูุซุงุจุช <em>ููู</em> ุนูููุฉ ุ ุนูู ุงูุฑุบู ูู ุณุญุฑ <code>JIT</code> .  ูุฐุง ุงูุญูู ููููุฏ ูู ุฅุตุฏุงุฑ <code>IL</code> ุงูุฃุณุงููุจ.   ,   <code>IL</code> -    ,    /    /  ,          100%  (  ,   ). <br>   ,      , -       . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar480416/">https://habr.com/ru/post/ar480416/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar480402/index.html">ููู ุงุณุชุฎุฏู Tะฒ Androidัฬถะนฬถ ุงูุฑูุจูุช ุงูุซุงูู mitap ูู Tinkoff</a></li>
<li><a href="../ar480404/index.html">Mikrotik ู Linux. ุงูุฑูุชูููุฉ ูุงูุฃุชูุชุฉ</a></li>
<li><a href="../ar480408/index.html">52 ูุฌููุนุฉ ุจูุงูุงุช ููุดุงุฑูุน ุงูุชุฏุฑูุจ</a></li>
<li><a href="../ar480412/index.html">ุฃูููุณู ุฑุงุฌูุฒูู ุญูู ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ ูุงููุฏููุฉ ูุจุฑูุงูุฌ Java Flight Recorder ูู OpenJDK 11 ูู ุงุฌุชูุงุน jug.msk.ru</a></li>
<li><a href="../ar480414/index.html">ููุฎุต ุงูููุงุฏ ุงูุทุงุฒุฌุฉ ูู ุนุงูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ููุฃุณุจูุน ุงููุงุถู ุฑูู 393 (9-15 ุฏูุณูุจุฑ 2019)</a></li>
<li><a href="../ar480420/index.html">ููุงุจูุฉ ูุน ูุงุซูู "ุฃููู" ุฃูููููุฑ ุญูู ุชุตูุจ ุงูุดุฑุงููู ูุนูุงุฌู</a></li>
<li><a href="../ar480422/index.html">ุฏููู ุฃููุงุท Google ูู C ++. ุงูุฌุฒุก 1</a></li>
<li><a href="../ar480424/index.html">ุฏููู ุฃููุงุท Google ูู C ++. ุงูุฌุฒุก 9</a></li>
<li><a href="../ar480428/index.html">ุทุฑููุฉ ุฃุจุณุท ุงูุงุฎุชุฒุงู. ุงูุฃุจุฌุฏูุฉ ูุงูุฎุท ููุง.</a></li>
<li><a href="../ar480430/index.html">ููู ูุนูู ุจุฑูุงูุฌ ุชุฑููุฒ ุงูููุฏูู. ุงูุฌุฒุก 2. ูุงุฐุง ุ ููุงุฐุง ุ ููู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>