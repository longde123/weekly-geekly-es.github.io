<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📱 💆🏽 🛀🏼 Agrégation des routes pour les listes ILV et comment elle menace des services respectables 👌🏼 ⌛️ 🖥️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article est de nature purement technique, affectant l'un des aspects du blocage des ressources sur les listes ILV et concerne les services destiné...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Agrégation des routes pour les listes ILV et comment elle menace des services respectables</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485570/"><p>  Cet article est de nature purement technique, affectant l'un des aspects du blocage des ressources sur les listes ILV et concerne les services destinés (y compris) aux résidents de la Fédération de Russie. </p><br><h2 id="kratkiy-obzor-sposobov-blokirovki">  Un bref aperçu des méthodes de verrouillage </h2><br><p>  Les techniques suivantes sont généralement utilisées pour bloquer les listes ILV: </p><br><ol><li>  Blocage en analysant (copiant) le trafic et en envoyant un faux premier paquet TCP, à la suite de quoi la connexion est déconnectée.  Un moyen très populaire parmi les opérateurs pour diverses raisons.  Cet article n'est pas applicable à cette méthode. </li><li>  Blocage en supprimant le trafic (éventuellement avec une redirection / synchronisation / autre) sur un équipement DPI (ou un proxy transparent), qui est configuré pour se rompre, tandis que tout le trafic passe par DPI (enfin, ou seulement tcp + dns ou uniquement les ports tcp nécessaires )  Cette méthode est également utilisée par les opérateurs.  Cet article n'est pas applicable à cette méthode. </li><li>  Blocage par usurpation d'identité DNS et «roulage» du trafic vers DPI / proxy transparent uniquement pour les adresses IP qui se trouvent dans le registre (certaines sont ajoutées en résolvant, mais pas le point).  Cette méthode est également utilisée par les opérateurs, et elle sera discutée à son sujet dans l'article. </li></ol><a name="habracut"></a><br><h2 id="v-reestre-slishkom-mnogo-prefiksov">  Trop de préfixes dans le registre </h2><br><p> En utilisant la méthode n ° 3, l'opérateur doit annoncer un grand nombre de préfixes (routes) vers le réseau, pour le moment il y a environ 2M de préfixes dans le registre (dont la plupart sont / 32) et si cela est fait, alors de nombreux routeurs ne pourront pas gérer un tel nombre d'entrées dans le tableau routage.  Taille typique de la table de routage pour les routeurs hw 1M-2M-4M utilisés aujourd'hui (il y en a plus, mais cela fait déjà partie de la fourchette de prix supérieure).  Si quelqu'un ne le sait pas, les routes 2M sont plus que des routes sur Internet, dans les espaces ipv4 et ipv6 combinés. </p><br><h2 id="chto-delat-s-etimi-prefiksami">  Que faire avec ces préfixes </h2><br><p>  Les opérateurs utilisant l'option n ° 3 ne veulent pas vraiment passer à l'option n ° 1 ou n ° 2 (généralement ils sont plus chers que le n ° 3), donc les fabricants de solutions qui peuvent fonctionner selon le schéma n ° 3 ont utilisé l'astuce suivante: les préfixes peuvent être agrégés à des réseaux plus importants Par exemple, dans l'espace d'adressage ipv4, il y a de nombreux effondrements de / 32 voisins à / 24.  Fonctionnement: tous les préfixes uniques / 32 sont arrondis à / 24 (le masque 0xffffff00 ou 255.255.255.0 est utilisé dans la notation la plus familière) et le nombre de préfixes uniques est compté parmi tous les arrondis à / 24.  Ensuite, une valeur seuil est entrée selon laquelle un / 24 est annoncé au lieu de plusieurs / 32.  Par exemple, à un seuil de 10, vous aurez environ 380K au lieu de 2M, et cela convient déjà même aux modèles de routeurs largement utilisés et même assez anciens.  Si le seuil est réduit, les préfixes seront encore moins. </p><br><h2 id="i-chto-v-etom-plohogo">  Et qu'est-ce qui ne va pas avec ça? </h2><br><p>  En effet, ce qui ne va pas avec ça, eh bien, un peu plus de trafic passera par le proxy DPI / transparent, cela ressemble à un problème d'opérateur, mais en fait ce n'est pas le cas.  Souvent, cela devient un problème pour l'abonné et le service, dont l'adresse IP a "beaucoup" de voisins sur le réseau / 24 (ou un autre réseau, selon la façon dont elle est agrégée).  Souvent, ces glandes sont surchargées d'opérateurs dans le CNN (heures de pointe), introduisent des retards, peuvent bloquer le trafic TLS avec certaines particularités, il arrive qu'elles fonctionnent de manière tordue avec http2, et donc, même si l'adresse IP de votre service n'est pas dans une liste d'ILV (et même aucun domaine n'indique votre adresse IP), cela ne signifie pas que le trafic vers votre service ne passera pas par un filtre spécial (qui peut toujours être installé de l'autre côté du pays si l'opérateur est grand). </p><br><h2 id="kakaya-polza-ot-znaniya-etogo-nyuansa">  Quelle est l'utilité de connaître cette nuance? </h2><br><p>  L'avantage pour les propriétaires de services peut être le suivant: tout à coup, certains de vos utilisateurs (avec des caractéristiques géographiques mal exprimées et un signe commun généralement incompréhensible) ont commencé à se plaindre de la lenteur du travail.  L'une des raisons possibles peut être que parmi vos voisins à l'adresse IP, il y a «trop» (par exemple, plus de 10) adresses IP bloquées dans le registre ILV et donc certains opérateurs ont autorisé le trafic vers votre service DPI.  Et puis décidez par vous-même de l'importance de ces utilisateurs et de leurs plaintes, créez une sorte de miroir sur une autre IP, changez l'IP ou autre chose.  Certains autres opérateurs de la Fédération de Russie fournissent IPv6 aux abonnés, votre service ne sait peut-être pas encore comment IPv6 et cela peut aider à résoudre le problème décrit (enfin, obtenez-en d'autres, comme c'est généralement le cas). </p><br><p>  Averti signifie armé. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr485570/">https://habr.com/ru/post/fr485570/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr485554/index.html">Objectifs et résultats clés (OKR) - Notre expérience de mise en œuvre progressive</a></li>
<li><a href="../fr485556/index.html">Il a fallu 12 ans pour créer une section de la carte du cerveau de la drosophile, les efforts de 250 personnes et 40 millions de dollars</a></li>
<li><a href="../fr485558/index.html">Pas de moustiques! Aperçu des moustiques "phyto-munitions"</a></li>
<li><a href="../fr485562/index.html">Surfer sur Internet avec une manette de jeu (Javascript)</a></li>
<li><a href="../fr485564/index.html">Ingénierie inverse du protocole Ngrok v2</a></li>
<li><a href="../fr485576/index.html">Caractéristiques de l'établissement d'une connexion entre les participants à un jeu en réseau peer-to-peer</a></li>
<li><a href="../fr485578/index.html">Mahjong avec enfants: pour quoi, quand et comment</a></li>
<li><a href="../fr485582/index.html">Paul Graham: «Un investisseur comme un troupeau d'animaux» (2013)</a></li>
<li><a href="../fr485584/index.html">Le condensé de matières fraîches du monde du front-end de la dernière semaine n ° 399 (20-26 janvier 2020)</a></li>
<li><a href="../fr485586/index.html">Paul Graham: Idées pour les startups (Idées pour les startups, 2005)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>