<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßñüèº üë®üèΩ‚Äç‚öñÔ∏è üë∑üèº Comment fonctionnent les tests A / B dans Avito? üë®üèΩ‚ÄçüöÄ ‚ôæ üë®üèø‚Äçüíª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous. Je m'appelle Danila, je travaille dans une √©quipe qui d√©veloppe une infrastructure analytique √† Avito. Les tests A / B sont au c≈ìur de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment fonctionnent les tests A / B dans Avito?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avito/blog/454164/"><p>  Bonjour √† tous.  Je m'appelle Danila, je travaille dans une √©quipe qui d√©veloppe une infrastructure analytique √† Avito.  Les tests A / B sont au c≈ìur de cette infrastructure. </p><br><p>  Les exp√©riences A / B sont un outil d√©cisionnel cl√© dans Avito.  Dans notre cycle de d√©veloppement de produits, un test A / B est indispensable.  Nous testons chaque hypoth√®se et d√©ployons uniquement des changements positifs. </p><br><p>  Nous collectons des centaines de m√©triques et sommes en mesure de les explorer jusqu'aux sections commerciales: verticales, r√©gions, utilisateurs autoris√©s, etc. Nous le faisons automatiquement en utilisant une seule plate-forme pour les exp√©riences.  Dans l'article, je vais vous expliquer en d√©tail comment la plateforme est organis√©e et nous allons plonger dans quelques d√©tails techniques int√©ressants. </p><br><p><img src="https://habrastorage.org/webt/ts/r_/qw/tsr_qwh3l7qfw2kob14z0lsaiya.png"></p><a name="habracut"></a><br><p>  Les principales fonctions de la plateforme A / B sont formul√©es comme suit. </p><br><ol><li>  Vous aide √† ex√©cuter rapidement des exp√©riences </li><li>  Contr√¥le les intersections d'exp√©riences ind√©sirables </li><li>  Compte les m√©triques, stat.  teste, visualise les r√©sultats </li></ol><br><p>  En d'autres termes, la plateforme permet de prendre des d√©cisions sans erreur plus rapidement. </p><br><p>  Si nous omettons le processus de d√©veloppement des fonctionnalit√©s qui sont envoy√©es pour les tests, le cycle complet de l'exp√©rience ressemble √† ceci: </p><br><p><img src="https://habrastorage.org/webt/ve/wd/by/vewdbye97eexzetbj3riubs-i1w.png"></p><br><ul><li>  Le client (analyste ou chef de produit) configure les param√®tres de l'exp√©rience via le panneau d'administration. </li><li>  Le service divis√©, en fonction de ces param√®tres, distribue le groupe A / B n√©cessaire √† l'appareil client. </li><li>  Les actions des utilisateurs sont collect√©es dans des journaux bruts qui passent par l'agr√©gation et se transforment en m√©triques. </li><li>  Les m√©triques sont ex√©cut√©es √† travers des tests statistiques. </li><li>  Les r√©sultats sont visualis√©s sur le portail interne le lendemain du lancement. </li></ul><br><p>  Tout le transport de donn√©es dans un cycle prend une journ√©e.  En r√®gle g√©n√©rale, les exp√©riences durent une semaine, mais le client re√ßoit chaque jour un incr√©ment de r√©sultats. </p><br><p>  Plongeons-nous maintenant dans les d√©tails. </p><br><h1 id="upravlenie-eksperimentom">  Gestion des exp√©riences </h1><br><p>  Le panneau d'administration utilise le format YAML pour configurer les exp√©riences. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/lb/ko/k_/lbkok_pnexw8kzvdlkoq1jteuzy.png"></a> </p><br><p>  C'est une solution pratique pour une petite √©quipe: finaliser les capacit√©s de la configuration se fait sans front.  L'utilisation de configurations de texte simplifie le travail de l'utilisateur: vous devez effectuer moins de clics avec la souris.  Une solution similaire est utilis√©e par le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">framework Airbnb A / B.</a> </p><br><p>  Pour diviser le trafic en groupes, nous utilisons la technique courante de hachage du sel. </p><br><p><img src="https://habrastorage.org/webt/fs/ar/r_/fsarr_kezrgckfiuvf1w1uyuqfs.png"></p><br><p>  Pour √©liminer l'effet de "m√©moire" des utilisateurs, lors du d√©marrage d'une nouvelle exp√©rience, nous effectuons un m√©lange suppl√©mentaire avec le second sel: </p><br><p><img src="https://habrastorage.org/webt/3-/qd/w0/3-qdw0xc2l0swwonorrgkfd_lpg.png"></p><br><p>  Le m√™me principe est d√©crit dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pr√©sentation de Yandex</a> . </p><br><p>  Afin d'√©viter les intersections potentiellement dangereuses d'exp√©riences, nous utilisons une logique <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">similaire aux ¬´couches¬ª dans Google</a> . </p><br><h1 id="sbor-metrik">  Collection de m√©triques </h1><br><p>  Nous pla√ßons les journaux bruts dans Vertica et les agr√©gons dans des tableaux de pr√©paration avec la structure: </p><br><p><img src="https://habrastorage.org/webt/v6/tw/bv/v6twbvgj-togpdbylpqq21gfbz0.png"></p><br><p>  Les observations sont g√©n√©ralement de simples compteurs d'√©v√©nements.  Les observations sont utilis√©es comme composants dans la formule de calcul m√©trique. </p><br><p>  La formule de calcul de toute m√©trique est une fraction, au num√©rateur et au d√©nominateur, qui est la somme des observations: </p><br><p><img src="https://habrastorage.org/webt/me/sb/or/mesbordzixv0yrcl4oo5nho5aa4.png"></p><br><p>  Dans l'un des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rapports</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Yandex, les</a> mesures √©taient divis√©es en deux types: par utilisateurs et par rapport.  Cela a un sens commercial, mais dans l'infrastructure, il est plus pratique de consid√©rer toutes les mesures de la m√™me mani√®re que Ratio.  Cette g√©n√©ralisation est valable, car la m√©trique "posyuzerny" est √©videmment repr√©sentable comme une fraction: </p><br><p><img src="https://habrastorage.org/webt/d_/ih/l5/d_ihl5vdcvdguaohaytz5xkfepy.png"></p><br><p>  Nous r√©sumons les observations au num√©rateur et au d√©nominateur de la m√©trique de deux mani√®res. <br>  Simple: </p><br><p><img src="https://habrastorage.org/webt/q9/fk/vc/q9fkvc6qsmj6dzwqknqnqwpgrts.png"></p><br><p>  C'est le montant habituel de tout ensemble d'observations: le nombre de recherches, les clics sur les publicit√©s, etc. <br>  Et plus compliqu√©: </p><br><p><img src="https://habrastorage.org/webt/iu/_s/ru/iu_srukdm2pyxrvoizc68butlx8.png"></p><br><p>  Un nombre unique de cl√©s, dans le groupe par lequel le total des observations est sup√©rieur √† un seuil donn√©. </p><br><p>  Ces formules sont facilement d√©finies √† l'aide de la configuration YAML: </p><br><p><img src="https://habrastorage.org/webt/ga/i3/qj/gai3qjape-xmwg2pyfg0snj6lao.png"></p><br><p>  Les param√®tres groupby et seuil sont facultatifs.  Ils d√©terminent simplement la deuxi√®me m√©thode de sommation. </p><br><p>  Les normes d√©crites vous permettent de configurer presque toutes les mesures en ligne auxquelles vous pouvez penser.  En m√™me temps, une logique simple est pr√©serv√©e qui n'impose pas une charge excessive √† l'infrastructure. </p><br><h1 id="statisticheskiy-kriteriy">  Crit√®re statistique </h1><br><p>  Nous mesurons l'importance des √©carts par des m√©triques en utilisant les m√©thodes classiques: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">test T</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">test</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">U de Mann-Whitney</a> .  La principale condition n√©cessaire √† l'application de ces crit√®res est que les observations de l'√©chantillon ne doivent pas d√©pendre les unes des autres.  Dans presque toutes nos exp√©riences, nous pensons que les utilisateurs (Uid) remplissent cette condition. </p><br><p><img src="https://habrastorage.org/webt/v-/ya/nz/v-yanzyx8c--fqqgnzkhlkg4j0c.png"></p><br><p>  Maintenant, la question se pose: comment effectuer le test T et le test MW pour les m√©triques Ratio?  Pour le test T, vous devez √™tre en mesure de lire la variance de l'√©chantillon, et pour MW, l'√©chantillon doit √™tre ¬´d√©fini par l'utilisateur¬ª. </p><br><p><img src="https://habrastorage.org/webt/d-/7j/p2/d-7jp2xfsktkjajzki-wrp8sugw.png"></p><br><p>  R√©ponse: vous devez √©tendre le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rapport d'une s√©rie Taylor au premier ordre √† un moment donn√©</a> <math> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>E</mi></mrow><mtext>&amp;#xA0;</mtext><mi>g</mi><mi>a</mi><mi>u</mi><mi>c</mi><mi>h</mi><mi>e</mi><mo stretchy=&quot;false&quot;>[</mo><mi>X</mi><mtext>&amp;#xA0;</mtext><mi>d</mi><mi>r</mi><mi>o</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy=&quot;false&quot;>]</mo><mo>,</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>E</mi></mrow><mtext>&amp;#xA0;</mtext><mi>g</mi><mi>a</mi><mi>u</mi><mi>c</mi><mi>h</mi><mi>e</mi><mo stretchy=&quot;false&quot;>[</mo><mi>Y</mi><mtext>&amp;#xA0;</mtext><mi>d</mi><mi>r</mi><mi>o</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy=&quot;false&quot;>]</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="41.503ex" height="2.66ex" viewBox="0 -832 17869.2 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-45" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-67" x="1404" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-61" x="1884" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-75" x="2414" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-63" x="2986" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-68" x="3420" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-65" x="3996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMAIN-5B" x="4463" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-58" x="4741" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-64" x="5844" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-72" x="6367" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-6F" x="6819" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-69" x="7304" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-74" x="7650" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-65" x="8011" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMAIN-5D" x="8478" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMAIN-2C" x="8756" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-45" x="9201" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-67" x="10216" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-61" x="10696" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-75" x="11226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-63" x="11798" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-68" x="12232" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-65" x="12808" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMAIN-5B" x="13275" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-59" x="13553" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-64" x="14567" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-72" x="15090" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-6F" x="15542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-69" x="16027" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-74" x="16373" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMATHI-65" x="16734" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMAIN-5D" x="17201" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/avito/blog/454164/&amp;usg=ALkJrhi_GL4_hDXPkAHX2AdRRcJkP33B8Q#MJMAIN-29" x="17479" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mrow class="MJX-TeXAtom-ORD"><mi>E</mi></mrow><mtext>&nbsp;</mtext><mi>g</mi><mi>a</mi><mi>u</mi><mi>c</mi><mi>h</mi><mi>e</mi><mo stretchy="false">[</mo><mi>X</mi><mtext>&nbsp;</mtext><mi>d</mi><mi>r</mi><mi>o</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy="false">]</mo><mo>,</mo><mrow class="MJX-TeXAtom-ORD"><mi>E</mi></mrow><mtext>&nbsp;</mtext><mi>g</mi><mi>a</mi><mi>u</mi><mi>c</mi><mi>h</mi><mi>e</mi><mo stretchy="false">[</mo><mi>Y</mi><mtext>&nbsp;</mtext><mi>d</mi><mi>r</mi><mi>o</mi><mi>i</mi><mi>t</mi><mi>e</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> ({E} \ gauche [X \ droite], {E} \ gauche [Y \ droite]) </script>   : </p><br><p><img src="https://habrastorage.org/webt/ky/im/td/kyimtdhnynvygcu_r867uzeoubu.png"></p><br><p>  Cette formule convertit deux √©chantillons (num√©rateur et d√©nominateur) en un seul, en pr√©servant la moyenne et la variance (asymptotiquement), ce qui permet d'utiliser des statistiques classiques.  tests. </p><br><p><img src="https://habrastorage.org/webt/il/h3/ac/ilh3acbdbdjnszyjezba85ee4ku.png"></p><br><p>  Une id√©e similaire est appel√©e par les coll√®gues de Yandex la m√©thode de lin√©arisation Ratio (apparitions <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">uniques</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">doubles</a> ). </p><br><h1 id="proizvoditelnost-pri-masshtabirovanii">  Mise √† l'√©chelle des performances </h1><br><p>  Utilisation rapide pour les statistiques du processeur.  crit√®res permet de r√©aliser des millions d'it√©rations (comparaisons traitement vs contr√¥le) en quelques minutes sur un serveur tout √† fait ordinaire √† 56 c≈ìurs.  Mais dans le cas de gros volumes de donn√©es, les performances reposent tout d'abord sur le stockage et le temps de lecture √† partir du disque. </p><br><p>  Le calcul des m√©triques Uid g√©n√®re quotidiennement des √©chantillons d'une taille totale de centaines de milliards de valeurs (en raison du grand nombre d'exp√©riences simultan√©es, de centaines de m√©triques et d'une accumulation cumul√©e).  Il est trop probl√©matique d'extraire de tels volumes du disque tous les jours (malgr√© le grand cluster de la base de colonne Vertica).  Par cons√©quent, nous sommes oblig√©s de r√©duire la cardinalit√© des donn√©es.  Mais nous le faisons presque sans perte d'informations sur la variance en utilisant une technique appel√©e ¬´Bucket¬ª. </p><br><p>  L'id√©e est simple: on hache les Uid et, selon le reste de la division, on les "disperse" en plusieurs seaux (on note leur nombre par B): </p><br><p><img src="https://habrastorage.org/webt/cd/1h/x-/cd1hx-k8rgilkmwxafotz3-tgok.png"></p><br><p>  Nous passons maintenant √† la nouvelle unit√© exp√©rimentale - le seau.  Nous r√©sumons les observations dans le seau (le num√©rateur et le d√©nominateur sont ind√©pendants): </p><br><p><img src="https://habrastorage.org/webt/yv/jq/bz/yvjqbz34yd8yswtoff50zpgj3g0.png"></p><br><p>  Avec cette transformation, la condition d'ind√©pendance des observations est remplie, la valeur m√©trique ne change pas et il est facile de v√©rifier que la variance de la m√©trique (moyenne sur l'√©chantillon d'observations) est pr√©serv√©e: </p><br><p><img src="https://habrastorage.org/webt/df/ku/6p/dfku6pb74plagc0doxg62blhdly.png"></p><br><p>  Plus il y a de bucket, moins les informations sont perdues et plus l'erreur d'√©galit√© est petite.  Dans Avito, nous prenons B = 200. </p><br><p>  La densit√© de distribution m√©trique apr√®s la conversion du compartiment devient toujours similaire √† la normale. </p><br><p><img src="https://habrastorage.org/webt/fk/sa/rf/fksarfomowkwdzzhwveb10vbtr0.png"></p><br><p>  Autant de grands √©chantillons que vous le souhaitez peuvent √™tre r√©duits √† une taille fixe.  La croissance de la quantit√© de donn√©es stock√©es dans ce cas ne d√©pend que lin√©airement du nombre d'exp√©riences et de m√©triques. </p><br><h1 id="vizualizaciya-rezultatov">  Visualisation des r√©sultats </h1><br><p>  En tant qu'outil de visualisation, nous utilisons Tableau et la vue Web sur Tableau Server.  Chaque employ√© Avito y a acc√®s.  Il convient de noter que Tableau fait bien le travail.  Mettre en ≈ìuvre une solution similaire en utilisant un d√©veloppement arri√®re / frontal complet serait une t√¢che beaucoup plus gourmande en ressources. </p><br><p>  Les r√©sultats de chaque exp√©rience sont une feuille de plusieurs milliers de nombres.  La visualisation doit √™tre de nature √† minimiser les conclusions incorrectes dans le cas de la mise en ≈ìuvre d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">erreurs du premier et du deuxi√®me type</a> , et en m√™me temps √† ne pas ¬´manquer¬ª les changements dans les m√©triques et sections importantes. </p><br><p>  Tout d'abord, nous surveillons les mesures de ¬´sant√©¬ª des exp√©riences.  Autrement dit, nous r√©pondons aux questions: "Est-il vrai que les participants ont √©t√©" d√©vers√©s "dans chacun des groupes?", "Est-ce √©gal aux utilisateurs autoris√©s ou nouveaux?" </p><br><p> <a href=""><img src="https://habrastorage.org/webt/k1/-r/-x/k1-r-xrjn1gyeg8-o6-9eolq-qe.png"></a> </p><br><p>  En cas d'√©carts statistiquement significatifs, les cellules correspondantes sont mises en √©vidence.  Lorsque vous survolez un nombre quelconque, la dynamique cumul√©e de la journ√©e s'affiche. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ju/ke/z0/jukez0yfvsmoyu_gmpy384rsmzc.png" width="600"></a> </p><br><p>  Le tableau de bord principal avec des mesures ressemble √† ceci: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ng/mb/ju/ngmbjufio9wsbf0mnpld0ldqajq.png"></a> </p><br><p>  Chaque ligne est une comparaison de groupes par une m√©trique sp√©cifique dans une section sp√©cifique.  √Ä droite, un panneau avec des filtres pour les exp√©riences et les mesures.  Panneau filtrant de section inf√©rieure. </p><br><p>  Chaque comparaison de m√©triques se compose de plusieurs m√©triques.  Analysons leurs valeurs de gauche √† droite: </p><br><p>  <strong>1. MDE.</strong>  <strong>Effet d√©tectable minimum</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/sy/xw/gk/syxwgkaimg-pgsqtnrriv8ybf5e.png"></a> </p><br><p>  ‚ç∫ et Œ≤ sont des probabilit√©s d'erreur pr√©s√©lectionn√©es du premier et du deuxi√®me type.  MDE est tr√®s important si le changement n'est pas statistiquement significatif.  Lors de la prise de d√©cision, le client doit se rappeler que le manque de stat.  la signification n'est pas sans effet.  De mani√®re assez fiable, nous pouvons seulement dire que l'effet possible n'est rien de plus que MDE. </p><br><p>  <strong>2. MW |</strong>  <strong>R√©sultats des tests U et T de T. Mann-Whitney</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/za/vs/j8/zavsj8pnzmrazz-maz_lucwjrti.png"></a> </p><br><p>  Le panneau affiche la valeur des statistiques z et t (pour MW et T, respectivement).  Dans une info-bulle - dynamique de la valeur p.  Si le changement est significatif, la cellule est surlign√©e en rouge ou vert, selon le signe de la diff√©rence entre les groupes.  Dans ce cas, nous disons que la m√©trique est ¬´color√©e¬ª. </p><br><p>  <strong>3. Soulevez.</strong>  <strong>Diff√©rence en pourcentage entre les groupes</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/cr/db/fk/crdbfkcytwrjdzez3l-v1gu1c8e.png"></a> </p><br><p>  <strong>4. Moyenne |</strong>  <strong>Num |</strong>  <strong>Den</strong>  <strong>Valeur m√©trique, ainsi que num√©rateur et d√©nominateur s√©par√©ment</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/8d/kc/wp/8dkcwpugkmf6f6qqdrmnksp-rda.png"></a> </p><br><p>  Nous appliquons un autre test T au num√©rateur et au d√©nominateur, ce qui aide √† comprendre dont la contribution est d√©cisive. </p><br><p>  <strong>5. Std.</strong>  <strong>√âcart type s√©lectif</strong> <br>  <strong>6. Hist.</strong>  <strong>Test de Shapiro-Wilk pour la normalit√© de la distribution ¬´bucket¬ª.</strong> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/0d/dh/h6/0ddhh68_mdhgjpb6dyufnucnmfc.png"></a> </p><br><p>  Si l'indicateur est rouge, alors l'√©chantillon peut avoir des valeurs aberrantes ou une queue anormalement longue.  Dans ce cas, vous devez prendre le r√©sultat selon cette m√©trique avec soin, ou pas du tout.  Un clic sur l'indicateur ouvre l'histogramme de la m√©trique par groupe.  L'histogramme montre clairement des anomalies - il est plus facile de tirer des conclusions. </p><br><h1 id="zaklyuchenie">  Conclusion </h1><br><p>  L'√©mergence de la plateforme A / B √† Avito est un tournant d√©cisif lorsque notre produit a commenc√© √† cro√Ætre plus rapidement.  Chaque jour, nous faisons des exp√©riences vertes qui font payer l'√©quipe;  et les ¬´rouges¬ª, qui donnent mati√®re √† r√©flexion. </p><br><p>  Nous avons r√©ussi √† construire un syst√®me efficace de tests et de m√©triques A / B.  Souvent, nous avons r√©solu des probl√®mes complexes avec des m√©thodes simples.  En raison de cette simplicit√©, l'infrastructure a une bonne marge de s√©curit√©. </p><br><p>  Je suis s√ªr que ceux qui vont construire la plate-forme A / B dans leur entreprise ont trouv√© des informations int√©ressantes dans l'article.  Je suis heureux de partager notre exp√©rience avec vous. </p><br><p>  √âcrivez vos questions et commentaires - nous essaierons d'y r√©pondre. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr454164/">https://habr.com/ru/post/fr454164/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr454144/index.html">Dans Java 13, ils veulent ajouter des ¬´blocs de texte¬ª</a></li>
<li><a href="../fr454148/index.html">V√©rification des performances SOC</a></li>
<li><a href="../fr454154/index.html">"Branches de l'enfer": contr√¥le des nuages ‚Äã‚Äãdes d√©charges ill√©gales et des d√©charges dangereuses</a></li>
<li><a href="../fr454156/index.html">Pneus et protocoles en automatisation industrielle: comment tout cela fonctionne</a></li>
<li><a href="../fr454160/index.html">Utilisation de PowerShell pour augmenter les privil√®ges des comptes locaux</a></li>
<li><a href="../fr454166/index.html">6 juin - VeeamON Forum √† Moscou</a></li>
<li><a href="../fr454168/index.html">L'ar√®ne principale du pays. Comment Luzhniki a-t-il √©t√© mis √† jour avant la Coupe du monde</a></li>
<li><a href="../fr454170/index.html">Bienvenue au Meetup DroidHeads le 8 juin</a></li>
<li><a href="../fr454172/index.html">Envoi de statistiques d'un DataFrame √† BigQuery en utilisant les statistiques Yandex.Direct comme exemple</a></li>
<li><a href="../fr454176/index.html">Uibook - un outil de test visuel pour les composants React avec des requ√™tes de m√©dias</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>