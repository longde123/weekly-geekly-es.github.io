<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîì üê∂ üíÖüèæ DevOps do Azure para Commodore 64? üë©üèº‚Äç‚úàÔ∏è üëßüèø ‚öîÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sou um grande f√£ do Azure DevOps desde os primeiros dias, quando ainda era chamado Visual Studio Online. Eu o uso para fins profissionais e pessoais, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DevOps do Azure para Commodore 64?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430414/"><img src="https://habrastorage.org/getpro/habr/post_images/c3b/3a9/329/c3b3a9329f065ee07612c955444cfbdd.jpg"><br><br>  Sou um grande f√£ do Azure DevOps desde os primeiros dias, quando ainda era chamado Visual Studio Online.  Eu o uso para fins profissionais e pessoais, <br>  e recomendo aos meus clientes de consultoria. <br><br>  No entanto, n√£o importa o quanto eu elogie esta plataforma, muitas vezes √© dif√≠cil convencer os desenvolvedores de Node ou Java de que o Azure DevOps se sair√° bem com seus projetos, nada pior do que para o .NET.  Independentemente do n√∫mero de demonstra√ß√µes e apresenta√ß√µes que refutam os preconceitos, em qualquer grupo h√° pessoas que acreditam firmemente que o ADO n√£o √© adequado para eles, porque √© uma "ferramenta da Microsoft". <br><br>  Deixando de lado o debate filos√≥fico, posso explicar a maior parte da resist√™ncia pela falta de compreens√£o de como o Azure DevOps evoluiu de seu antecessor Team Foundation Services (TFS) e me tornei a melhor caixa de ferramentas da classe capaz de oferecer suporte a projetos de qualquer tamanho "em qualquer idioma e qualquer outro plataforma ".  A quest√£o √©: como posso provar conclusivamente isso de uma vez por todas? <br><a name="habracut"></a><br>  Eu brinquei com essa id√©ia um pouco, e ent√£o me dei conta.  A prova precisa ser feita sem a cria√ß√£o de outra demonstra√ß√£o de CI / CD para os microsservi√ßos SpringBoot implantados no Kubernetes na AWS - ela precisa ser feita com uma abordagem mais exc√™ntrica. <br><br><h2>  E agora algo completamente diferente </h2><br>  E se pararmos de focar em linguagens e plataformas modernas e avan√ßarmos 30 anos atr√°s para ver se ferramentas modernas e o ADO podem ser usados ‚Äã‚Äãpara desenvolver, criar, dividir em m√≥dulos e implementar um programa criado para uma plataforma de computador de 8 bits? <br><br>  Como no caso de outras demos para o ADO que eu criei no passado, eu queria mostrar um produto completamente acabado - desde a edi√ß√£o do c√≥digo, verifica√ß√£o e assim por diante, at√© o ambiente ao vivo no qual voc√™ pode assistir as altera√ß√µes. <br><br>  Em teoria, tudo isso parecia bom, mas a verdadeira quest√£o era - por onde come√ßar?  Obviamente, essa n√£o era uma situa√ß√£o na qual voc√™ pode executar o StackOverflow em busca de exemplos anteriores.  No entanto, tendo discutido a id√©ia com amigos e colegas (todos decidiram que eu havia me mudado), comecei a redigir minha id√©ia. <br><br>  Decidi que o programa de demonstra√ß√£o deveria ser escrito em c√≥digo de m√°quina de 8 bits para o Commodore 64 usando o editor de c√≥digo VS.  A origem ser√° processada pelo reposit√≥rio Git no ADO e o pipeline de CI / CD ser√° respons√°vel pelas compila√ß√µes, m√≥dulos e implementa√ß√£o no Azure.  Eu j√° comecei a suspeitar que meus amigos estavam certos e meu teto j√° havia sumido, mas ainda assim essa ideia parecia um desafio interessante. <br><br><h2>  Escolha do Editor </h2><br>  Todo mundo sabe o ditado sobre como escolher a ferramenta certa para um trabalho espec√≠fico.  Isso se aplica √†s tarefas dom√©sticas, √† repara√ß√£o de autom√≥veis e √† reda√ß√£o de c√≥digos. <br><br>  Como desenvolvedor .NET, passo a maior parte do tempo no Visual Studio 2017. Se precisar mudar para um projeto Java ou gravar programas Android nativos, inicio o IntelliJ ou o Android Studio, respectivamente.  Qual editor devo usar para o c√≥digo de m√°quina C64? <br><br>  Voc√™ quer - acredite ou n√£o - mas hoje existem v√°rios bons editores adequados para escrever CBM.  Eu brinquei com alguns deles, mas na verdade eu queria usar o Visual Studio Code.  Usei o VS Code para meus outros projetos, e me pareceu muito flex√≠vel, confort√°vel, e a presen√ßa de integra√ß√£o interna com o git foi uma boa adi√ß√£o. <br><br>  A desvantagem dessa solu√ß√£o foi que eu teria que sacrificar o destaque da sintaxe no assembler 6510 e apenas encararia o texto em preto sobre fundo branco.  Esta situa√ß√£o n√£o corresponde √† minha afirma√ß√£o sobre a "ferramenta certa". <br><br>  De repente, decidi ir ao Visual Studio Marketplace e verificar se j√° existe alguma extens√£o para o VS Code adequada para resolver o meu problema.  Fiquei agradavelmente surpreso ao encontrar v√°rias extens√µes projetadas para trabalhar em assembler.  Infelizmente, nenhum deles foi preso pelo ACME Cross Assembler que eu selecionei para o projeto. <br><br>  Isso n√£o me impediu e, n√£o querendo reviver os aspectos monocrom√°ticos do desenvolvimento dos anos 80, me enterrei na documenta√ß√£o sobre a cria√ß√£o de extens√µes para o VS Code.  Alguns dias depois, lancei com prazer a primeira vers√£o da extens√£o para o Visual Studio Marketplace. <br><br>  E esse exerc√≠cio acabou sendo mais √∫til do que parecia inicialmente. <br><br>  Ao mesmo tempo, n√£o me concentrei em escrever programas no assembler.  V√°rias vezes tentei estud√°-lo, mas geralmente me sentia entediado ou irritado e segui para outra coisa.  Depois de criar o plug-in, n√£o apenas aprendi sobre a mec√¢nica de cria√ß√£o de extens√µes para o VS Code, mas tamb√©m adquiri uma boa compreens√£o da sintaxe obscura e dos c√≥digos de opera√ß√£o. <br><br>  Armado com um editor adequado e alguns livros de programa√ß√£o antigos dos anos 80, comecei a escrever c√≥digo.  Muito rapidamente, recebi um programa de trabalho importando um arquivo de m√∫sica no formato SID e reproduzindo uma vers√£o de 8 bits da m√∫sica Beatles When I'm 64 (essa √© uma piada antiga dos usu√°rios do Commodore, mas parece adequada para este projeto). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/898/c09/4a7/898c094a705e1fda2281eaa34a9570a9.png"><br><br>  At√© agora, eu compilei e testei o programa em um laptop.  O c√≥digo-fonte foi confirmado no reposit√≥rio git; portanto, a pr√≥xima etapa foi a necessidade de criar uma compila√ß√£o para a integra√ß√£o cont√≠nua. <br><br>  Uma das habilidades impressionantes da ADO √© a capacidade de lidar com praticamente qualquer situa√ß√£o de IC / CD.  Pronto para uso, o servi√ßo oferece muitas tarefas predefinidas, permitindo criar rapidamente cadeias de CI / CD para os projetos mais modernos em apenas alguns cliques. <br><br>  Se suas necessidades n√£o fazem parte do servi√ßo b√°sico, o Marketplace geralmente fornecer√° muitas ferramentas adequadas diferentes.  Se isso n√£o funcionar, voc√™ pode esbo√ßar um script do PowerShell que fa√ßa o trabalho necess√°rio. <br><br>  O problema √≥bvio do projeto era que, apesar da ampla variedade de recursos de servi√ßo, a montagem cruzada e a imagem de disco para o Commodore 64 simplesmente n√£o existiam.  Obviamente, eu poderia criar uma m√°quina virtual especial no Azure com as ferramentas necess√°rias ou seguir o caminho do PowerShell, mas isso seria interessante? <br><br>  Tamb√©m n√£o gosto de m√°quinas virtuais na nuvem e, para este exerc√≠cio, queria usar agentes hospedados, portanto, tive apenas uma op√ß√£o.  Para provar a que todo o exerc√≠cio se destinava, decidi que seria melhor criar minha pr√≥pria extens√£o para lidar com todas essas tarefas. <br><br><h2>  Extens√£o ACME Cross-Assembler </h2><br>  A primeira extens√£o necess√°ria para minha cadeia de ICs foi compilar meu c√≥digo de assembler no c√≥digo de m√°quina C64.  Para fazer isso, eu precisava instalar o assembler cruzado em um dos agentes de constru√ß√£o hospedados. <br><br>  Assembler √© um programa que converte a linguagem assembler leg√≠vel por humanos em c√≥digo de m√°quina real projetado para um manipulador bin√°rio espec√≠fico.  Normalmente, o c√≥digo da m√°quina √© gerado para o processador usado na m√°quina em que √© executado.  O assembler cruzado d√° o pr√≥ximo passo na convers√£o de c√≥digo, permitindo gerar c√≥digo de m√°quina para outro processador. <br><br>  Como mencionei, no meu projeto, escolhi o ACME Cross-Assembler, porque √© recomendado para o desenvolvimento do Commodore.  Ele tamb√©m suporta uma ampla gama de outros projetos de 8 bits, como o Nintendo Entertainment System ou a fam√≠lia Atari usando processadores 65xx. <br><br>  Levei a maior parte do dia, com base na documenta√ß√£o e nos exemplos fornecidos pela Microsoft e outras fontes, para escrever, verificar e publicar no Marketplace uma vers√£o funcional da extens√£o. <br><br>  Quando iniciada, a tarefa baixa automaticamente a vers√£o mais recente do ACME Cross-Assembler e a lan√ßa com op√ß√µes que permitem criar o arquivo final para a plataforma de destino.  Uma das vantagens associadas √† escolha do ACME √© que a maioria dos par√¢metros para a cria√ß√£o do programa √© incorporada ao c√≥digo-fonte, o que minimiza a quantidade de entrada que precisa ser definida na extens√£o. <br><br><h2>  Algu√©m tem um disquete emprestado? </h2><br>  O pr√≥ximo passo na cadeia √© transferir o programa para um formato de m√≠dia compat√≠vel com o Commodore 64, ou seja, coloc√°-lo em um disquete.  Os desenvolvedores tamb√©m n√£o enfrentam esse problema na vida cotidiana.  Felizmente, existem aplicativos separados para esta tarefa. <br><br>  VICE √© o emulador mais popular para o Commodore.  Ele possui n√£o apenas muitos emuladores para cada um dos v√°rios modelos do Commodore, mas tamb√©m v√°rias ferramentas √∫teis, incluindo o gerenciador de disco virtual c1541.  As imagens de disco criadas com ele podem ser usadas com o emulador, copiadas para m√≠dia f√≠sica (disquete de baixa densidade de 5  ") ou baixadas para o microSD e usadas com o emulador de unidade SD2IEC. <br><br>  Diferentemente da tarefa ACME, que obt√©m todas as configura√ß√µes do cabe√ßalho do arquivo de origem, o utilit√°rio de disco c1541 conta com a CLI e o usu√°rio tem muitas op√ß√µes para gerenciar o disco.  Para a minha extens√£o, decidi me concentrar apenas nas propriedades necess√°rias para a minha tarefa, mas, mesmo assim, enfrentei uma escolha relacionada √† profundidade necess√°ria para realiz√°-la. <br><br>  A Commodore lan√ßou tr√™s modelos de unidades diferentes, diferindo na maneira como lidam com volumes de disco com base na formata√ß√£o e no tipo de m√≠dia.  O modelo b√°sico, familiar √† maioria dos usu√°rios, s√≥ podia funcionar com unidades de um lado com capacidade de 170 KB (sim, kilobytes. Pergunte aos seus pais).  O modelo posterior, 1571, usado no Commodore 128, poderia funcionar com unidades de dupla face, cujo volume aumentou para 340 Kb.  Decidi adicionar flexibilidade √† extens√£o, ent√£o adicionei suporte a v√°rios formatos de disco como uma configura√ß√£o, que pode ser selecionada na interface atrav√©s do menu suspenso. <br><br>  Como eu j√° tinha um exemplo de trabalho, a cria√ß√£o dessa extens√£o foi muito mais r√°pida.  Aprendi algo novo que me permitiu melhorar o c√≥digo da extens√£o ACME tamb√©m. <br><br>  Como no caso do cross-assembler, o software necess√°rio √© baixado do reposit√≥rio de projeto de c√≥digo aberto e instalado no agente de constru√ß√£o.  A tarefa cria uma imagem de disco no formato desejado e, em seguida, o arquivo da tarefa de constru√ß√£o √© copiado para ela.  O arquivo resultante √© movido para o diret√≥rio Build Artifacts, onde voc√™ pode baix√°-lo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cc7/f58/8a4/cc7f588a40e2157b4226a3aece50ff6a.png"><br><br>  O que acontece - tanto trabalho e, como resultado, voc√™ precisa baixar o arquivo?  Este deve ser um material de treinamento de CI / CD.  Se precisarmos provar nossa posi√ß√£o, precisamos implantar o programa na m√°quina para que possa ser usado como demonstra√ß√£o. <br><br><h2>  Floppinet desativado </h2><br>  As vers√µes em execu√ß√£o de um computador Commodore 64 real e uma unidade 1541 s√£o raras, sem mencionar que s√£o grandes e pesadas.  Al√©m disso, eles n√£o conseguem exibir imagens em monitores modernos sem adaptadores especiais, e isso limita bastante a efic√°cia da demonstra√ß√£o. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/483/50c/68d/48350c68d644efcb16b728eb0901a54d.jpg" align="left"><br><br>  O Commodore SX-64 (o primeiro computador colorido "port√°til" a ser fabricado em grandes lotes) tinha um monitor embutido, mas era do tamanho da minha mala de m√£o e pesava cerca de 10 kg.  Imagine como seria dif√≠cil passar pelo servi√ßo de seguran√ßa do aeroporto com um monstro desses? <br><br>  O <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C64 Mini,</a> lan√ßado recentemente, √© pequeno o suficiente para viajar, a capacidade de baixar programas de USB e uma sa√≠da HDMI.  Em alguns casos, essa seria uma op√ß√£o.  Mas ele ainda n√£o alcan√ßa o objetivo desejado. <br><br>  O verdadeiro problema n√£o √© a portabilidade do ferro, mas a falta de automa√ß√£o.  A necessidade de transferir o programa de um laptop para um carro usando uma unidade flash n√£o revela totalmente os recursos do ADO na apresenta√ß√£o. <br><br><h2>  Op√ß√£o sem servidor </h2><br>  Como mencionei, o VICE √© o emulador mais popular do Commodore.  Foi portado para Windows, Linux, Mac OS X, MS-DOS e muitos outros sistemas operacionais.  No entanto, para o desenvolvimento da nuvem, essa op√ß√£o exigiria a configura√ß√£o da VM como host, e eu queria seguir com uma solu√ß√£o que n√£o requer um servidor. <br><br>  Al√©m das vers√µes mencionadas, o VICE tem uma op√ß√£o para JavaScript que funciona bem na maioria dos navegadores.  Embora o desenvolvimento do front-end n√£o seja o meu elemento, consegui criar uma p√°gina responsiva decente. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/47c/061/d08/47c061d082697b0c918fbc3e8b08736f.png"><br><br>  Para organizar a cadeia de libera√ß√£o, carrego um arquivo com uma imagem de disco em um diret√≥rio no mesmo reposit√≥rio.  Associei isso √† chamada do Azure Function App, que retorna uma lista de imagens de disco dispon√≠veis.  A sele√ß√£o de uma delas no menu suspenso √© carregada e iniciada automaticamente em um emulador de JavaScript. <br><br>  O sistema funciona n√£o apenas com o meu programa; eu consegui criar uma cadeia para implantar e executar o programa no Commodore 64 BASIC. <br><br> <code>10 PRINT "HELLO WORLD" <br> 20 GOTO 10</code> <br> <br><h2>  N√≥s terminamos </h2><br>  DevOps para Commodore 64?  √â impens√°vel! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b89/feb/515/b89feb5150206e8804176c9b707f2967.png"><br><br>  O significado deste exerc√≠cio n√£o √© apenas a prova de que, quando eles dizem sobre o Azure DevOps que oferece suporte a "qualquer idioma e qualquer plataforma", eles n√£o significam apenas tudo relacionado √† Microsoft (embora a vers√£o BASIC para Commodore tenha sido comprada sob licen√ßa da Microsoft).  Isso nos distrai da concentra√ß√£o em aspectos tecnol√≥gicos e faz as pessoas irem al√©m da estrutura artificial que eles designaram para si mesmas. <br><br>  Independentemente das desculpas, declara√ß√µes como ‚Äúisso n√£o vai funcionar aqui‚Äù s√£o muitas vezes equivalentes √†s declara√ß√µes ‚Äúsempre fizemos dessa maneira, por que mudar alguma coisa‚Äù.  Ambas as frases demonstram relut√¢ncia em crescer e se desenvolver, se adaptar a um cen√°rio tecnol√≥gico em constante mudan√ßa e superar os desafios impostos por essas mudan√ßas r√°pidas e agressivas. <br><br>  DevOps n√£o s√£o ferramentas.  As ferramentas no final s√£o apenas um meio para atingir um fim, independentemente de quem as publica. <br><br>  Para que o DevOps seja bem-sucedido para a organiza√ß√£o, √© necess√°rio mudar a maneira de pensar e desenvolver nossa cultura corporativa.  Precisamos aceitar muitas id√©ias novas, repensar o que achamos que sabemos e nos afastar de pensamentos como "isso n√£o vai funcionar aqui", porque ainda n√£o tentamos isso antes. <br><br>  Criar uma cadeia de CI / CD para um computador de 30 anos n√£o tem valor para os neg√≥cios, exceto para ilustrar claramente esse ponto de vista. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt430414/">https://habr.com/ru/post/pt430414/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt430404/index.html">Coletamos dados sobre o comportamento do cliente no site</a></li>
<li><a href="../pt430406/index.html">C ++ 20 e M√≥dulos, Redes, Coroutines, Intervalos, Gr√°ficos. Resultados da reuni√£o em San Diego</a></li>
<li><a href="../pt430408/index.html">Verificamos a vulnerabilidade fechada e obtemos quatro novos CVEs</a></li>
<li><a href="../pt430410/index.html">‚ÄúSempre ter√° que se desenvolver‚Äù: uma entrevista com Evgeny Kuvshinov (ManyChat) sobre o desenvolvimento em uma startup</a></li>
<li><a href="../pt430412/index.html">L√≥gica difusa contra PID. Atravessamos o ouri√ßo e a cobra. Motor de aeronave e algoritmos de controle da NPP</a></li>
<li><a href="../pt430418/index.html">Experi√™ncia pessoal usando sensores de proximidade em desenvolvimento</a></li>
<li><a href="../pt430420/index.html">Confer√™ncia "Conte√∫do" - agora com suporte para hyper-threading</a></li>
<li><a href="../pt430422/index.html">Seu c√≥digo √© decisivo</a></li>
<li><a href="../pt430424/index.html">Semana de Seguran√ßa 47: Hacking Squat</a></li>
<li><a href="../pt430426/index.html">Rebranding da Western Digital Products: o que mudou?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>