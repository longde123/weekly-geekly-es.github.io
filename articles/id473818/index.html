<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîô üÖæÔ∏è üñïüèº Aplikasi pada TSD dan komunikasi dengan 1C: Enterprise 8.3 melalui HTTP-Service. Bagian 4 (Pemindai OnKeyUp. SC dengan emulasi keyboard) üë©üèΩ ‚òéÔ∏è ü§∂üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Pilihan metode pertukaran. Deskripsi API. 

 2. Implementasi API di sisi 1C. 

 3. BroadcastReceiver. Kami mendapatkan datanya 

 4. OnKeyUp. Pemin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aplikasi pada TSD dan komunikasi dengan 1C: Enterprise 8.3 melalui HTTP-Service. Bagian 4 (Pemindai OnKeyUp. SC dengan emulasi keyboard)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473818/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">1. Pilihan metode pertukaran.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Deskripsi API.</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">2. Implementasi API di sisi 1C.</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">3. BroadcastReceiver.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kami mendapatkan datanya</a> <br><br><h3>  4. OnKeyUp.  Pemindai barcode dengan emulasi keyboard </h3><br>  Artikel ini seharusnya menjadi yang terpendek.  Tetapi iblis ada dalam rinciannya.  Berikut ini beberapa fakta. <br><br>  <b>Fakta 1.</b> Jika kita memiliki beberapa bidang <code>EditText</code> pada formulir, dan untuk semua kita menimpa <code>OnKeyListener</code> , maka onKeyUp dan onKeyDown diarsir dan tidak lagi dipanggil.  Kode <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppCompatActivity</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> keyListener: View.OnKeyListener = View.OnKeyListener { _, _, _ -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> editBarcode = findViewById(R.id.editBarcode) editBarcode.setOnKeyListener (keyListener) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> editQuantity: EditText = findViewById(R.id.editQuantity) editQuantity.setOnKeyListener(keyListener)</code> </pre><br>  Mengikuti <br>  <b>Fakta 2.</b> <code>onKeyUp</code> dan <code>onKeyDown</code> hanya berfungsi untuk bidang-bidang yang OnKeyListener tidak didefinisikan ulang.  Dan hanya ketika di bidang ini. <br><br>  <b>Fakta 3.</b> ATOL Lite.Droid dalam versi 1.1.1 tidak lulus KeyEvent = KEYCODE_TAB jika diset sebagai awalan.  Baik di awalan1, maupun awalan2.  Saya tidak mencobanya di akhiran.  Dia tidak dibutuhkan di sana. <br><br>  <b>Fakta 4.</b> onKeyUp, onKeyDown, setOnKeyListener - dengarkan hanya untuk klik perangkat keras.  Keyboard, pemindai dengan emulasi keyboard, dan anehnya, tombol kembali pada layar juga merupakan tombol perangkat keras (KEYCODE_BACK).  Dan tombol digital (fisik) pada TSD adalah tombol lunak.  Kenapa begitu, saya tidak mengerti :) Yah, oke. <br><br>  Sekarang sedikit teori. <br><a name="habracut"></a><br>  Ada pemindai barcode bawaan yang tidak dapat mengirim Siaran.  Dan ada pemindai barcode dengan emulasi keyboard.  Saya pikir metode ini juga cocok untuk mereka.  Dalam kedua kasus, saya menyarankan Anda untuk mengatur "awalan" misalnya sama dengan <code>"="(KEYCODE_EQUALS)</code> .  Dan ganti suffix dengan <code>"CR"(KEYCODE_ENTER)</code> .  Hapus semua sufiks dan awalan lainnya.  Kebanyakan pemindai dengan emulasi papan ketik dalam pengaturan standar tidak memiliki awalan, tetapi mereka senang untuk memberikan <code>CRLF</code> (Dua karakter. Carriage kembali, umpan baris).  Sepertinya itu terjadi secara historis. <br><br>  Sekarang implementasinya sendiri.  Di kelas MainActivity, buat dua variabel.  Yang pertama bertanggung jawab untuk penggabungan karakter barcode, yang kedua adalah untuk barcode yang akan dikumpulkan dalam garis antara awalan dan akhiran. <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> barcodeStringBuilder = StringBuilder() <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isReadingBarcode = <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre><br>  Dan di kelas Anda perlu mengganti fungsi <b><code>onKeyUp</code> .</b> <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onKeyUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(keyCode: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, event: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">KeyEvent</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ,  ().   .         . if (event?.keyCode == KeyEvent.KEYCODE_EQUALS ){ barcodeStringBuilder.clear() isReadingBarcode = true return true } //     .  ,      . if (isReadingBarcode) { barcodeStringBuilder.append(event?.getUnicodeChar()?.toChar()) } //    ,      .       . if ((event?.keyCode == KeyEvent.KEYCODE_ENTER) &amp;&amp; isReadingBarcode) { Log.d("BarcodeDebug", "$barcodeStringBuilder") setTextBarcode(barcodeStringBuilder.toString()) //  .    . isReadingBarcode = false return true } //     . return super.onKeyUp(keyCode, event) }</span></span></code> </pre> <br>  Itu saja.  Seperti biasa, komentar dan tambahan dipersilahkan. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id473818/">https://habr.com/ru/post/id473818/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id473804/index.html">Berapa gaji SMP QA?</a></li>
<li><a href="../id473806/index.html">Ini adalah jenis internet yang kita inginkan: bagaimana media sosial berubah menjadi senjata yang mematikan</a></li>
<li><a href="../id473812/index.html">Intisari acara untuk profesional SDM di bidang TI pada November 2019</a></li>
<li><a href="../id473814/index.html">Keterampilan, Aturan, dan Pengetahuan untuk orang dan orang IT</a></li>
<li><a href="../id473816/index.html">Fitur JavaScript modern yang mungkin tidak Anda sadari</a></li>
<li><a href="../id473822/index.html">Tawaran Pekerjaan dalam 1 Hari: bagaimana kami mewawancarai dan memberikan umpan balik pada hari yang sama</a></li>
<li><a href="../id473824/index.html">Bagaimana membangun teknologi bisnis untuk perencanaan penjualan dalam satu sistem</a></li>
<li><a href="../id473826/index.html">Otentikasi OTP di Apache Web Server</a></li>
<li><a href="../id473828/index.html">Visi komputer sebagai alternatif pengganti kantor</a></li>
<li><a href="../id473832/index.html">ShIoTiny: Pembaruan dan Pemberitahuan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>