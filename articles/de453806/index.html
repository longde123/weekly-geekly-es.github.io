<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☘️ 🎋 🍳 Fehlerbehandlung in Go 👩🏿‍🤝‍👨🏼 🔘 ⤴️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habrowsk-Bürger! Der Golang Developer- Kurs beginnt bereits heute bei OTUS und wir betrachten dies als eine großartige Gelegenheit, um einen wei...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fehlerbehandlung in Go</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/453806/">  Hallo Habrowsk-Bürger!  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Der Golang Developer-</a> Kurs beginnt bereits heute bei OTUS und wir betrachten dies als eine großartige Gelegenheit, um einen weiteren nützlichen Beitrag zu diesem Thema zu veröffentlichen.  Lassen Sie uns heute über Go's Herangehensweise an Fehler sprechen.  Fangen wir an! <br><br><img src="https://habrastorage.org/webt/mr/8i/ch/mr8ichd887jvkbuzbf3dh_h5oc0.png"><br><br><h3>  Beherrschen Sie die pragmatische Fehlerbehandlung in Ihrem Go-Code </h3><br><img src="https://habrastorage.org/webt/gp/i3/ff/gpi3ffckknhyvkcqyfyk1dnbltc.png"><br><br>  <i>Dieser Beitrag ist Teil der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Before</a> Getting Started- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Reihe</a> , in der wir die Welt von Golang erkunden und Tipps und Ideen austauschen, die Sie beim Schreiben von Code in Go kennen sollten, damit Sie Ihre eigenen Probleme nicht ausfüllen müssen.</i> <br><br>  Ich gehe davon aus, dass Sie bereits über grundlegende Erfahrungen mit Go verfügen. Wenn Sie jedoch das Gefühl haben, irgendwann auf ein unbekanntes Diskussionsmaterial gestoßen zu sein, zögern Sie nicht, eine Pause einzulegen, das Thema zu erkunden und zurückzukehren. <br><br>  Jetzt, wo wir unseren Weg frei gemacht haben, lass uns gehen! <a name="habracut"></a><br><br>  Der Ansatz von Go zur Fehlerbehandlung ist eine der umstrittensten und am meisten missbrauchten Funktionen.  In diesem Artikel lernen Sie Go's Herangehensweise an Fehler kennen und verstehen, wie sie „unter der Haube“ funktionieren.  Sie lernen einige verschiedene Ansätze kennen, überprüfen den Go-Quellcode und die Standardbibliothek, um herauszufinden, wie Fehler behandelt werden und wie mit ihnen gearbeitet wird.  Sie erfahren, warum Typzusicherungen eine wichtige Rolle bei der Behandlung spielen, und Sie werden bevorstehende Änderungen an der Fehlerbehandlung sehen, die Sie in Go 2 einführen möchten. <br><br><img src="https://habrastorage.org/webt/e3/0t/gk/e30tgk9zbbofawpffxugwstrhow.png"><br><br><h2>  Eintrag </h2><br>  Das Wichtigste zuerst: Fehler in Go sind keine Ausnahme.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dave Cheney</a> hat einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">epischen Blog-Beitrag</a> darüber geschrieben, daher verweise ich Sie darauf und fasse zusammen: In anderen Sprachen können Sie nicht sicher sein, ob eine Funktion eine Ausnahme auslösen kann oder nicht.  Anstatt Ausnahmen auszulösen, unterstützen Go-Funktionen <b>mehrere Rückgabewerte.</b> Konventionell wird diese Funktion normalerweise verwendet, um das Ergebnis einer Funktion zusammen mit einer Fehlervariablen zurückzugeben. <br><br><img src="https://habrastorage.org/webt/p5/nl/dw/p5nldwpihop5qjmlgz4f0h0v_yi.png"><br><br>  Wenn Ihre Funktion aus irgendeinem Grund fehlschlägt, sollten Sie wahrscheinlich den zuvor deklarierten <code>error</code> .  Konventionell signalisiert die Rückgabe eines Fehlers dem Anrufer das Problem, und die Rückgabe von Null wird nicht als Fehler angesehen.  Auf diese Weise wird dem Anrufer klar, dass ein Problem aufgetreten ist, und er muss sich damit befassen: Wer auch immer Ihre Funktion aufruft, weiß, dass er sich nicht auf das Ergebnis verlassen sollte, bevor er nach einem Fehler sucht.  Wenn der Fehler nicht gleich Null ist, muss er ihn überprüfen und verarbeiten (protokollieren, zurückgeben, warten, einen Wiederholungs- / Bereinigungsmechanismus aufrufen usw.). <br><br><img src="https://habrastorage.org/webt/l2/u-/05/l2u-05npjr4ptcwn7woqyb20usg.png"><br>  <i>(3 // Fehlerbehandlung</i> <i><br></i>  <i>5 // Fortsetzung)</i> <br><br>  Diese Snippets sind in Go sehr verbreitet, und einige betrachten sie als Boilerplate-Code.  Der Compiler behandelt nicht verwendete Variablen als Kompilierungsfehler. Wenn Sie also nicht nach Fehlern suchen, müssen Sie sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einem leeren Bezeichner</a> zuweisen.  Egal wie bequem es auch sein mag, Fehler sollten nicht ignoriert werden. <br><br><img src="https://habrastorage.org/webt/fm/pq/rv/fmpqrvcl6_eh4tvwhq0ebxmd4qo.png"><br>  <i>(4 // Das Ignorieren von Fehlern ist unsicher, und Sie sollten sich nicht auf das Ergebnis verlassen, bevor Sie nach Fehlern suchen.)</i> <br>  <i><b>Das Ergebnis kann erst nach Überprüfung auf Fehler als vertrauenswürdig eingestuft werden</b></i> <br><br>  Die Fehlerrückgabe zusammen mit den Ergebnissen zusammen mit dem strengen Go-Typ-System erschwert das Schreiben von markiertem Code erheblich.  Sie sollten immer davon ausgehen, dass der Wert einer Funktion beschädigt ist, es sei denn, Sie haben den zurückgegebenen Fehler überprüft. Wenn Sie den Fehler einem leeren Bezeichner zuweisen, ignorieren Sie ausdrücklich, dass der Wert Ihrer Funktion möglicherweise beschädigt ist. <br><br><img src="https://habrastorage.org/webt/lm/xj/uh/lmxjuhxt8v8sdvillwvsbbuct5o.png"><br>  <b><i>Der leere Ausweis ist dunkel und voller Schrecken.</i></b> <br><br>  Go hat <code>panic</code> und <code>recover</code> , die auch in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einem anderen detaillierten Go-Blog-Beitrag beschrieben werden</a> .  Sie sollen jedoch keine Ausnahmen simulieren.  Laut Dave <i>"Wenn Sie in Go in Panik geraten, geraten Sie wirklich in Panik: Dies ist nicht das Problem eines anderen, dies ist bereits ein Spieler."</i>  Sie sind tödlich und führen zu einem Absturz in Ihrem Programm.  Rob Pike prägte das Sprichwort „Keine Panik“, das für sich selbst spricht: Sie sollten diese Mechanismen wahrscheinlich vermeiden und stattdessen Fehler zurückgeben. <br><br><blockquote>  "Fehler sind die Bedeutungen." <br>  "Suchen Sie nicht nur nach Fehlern, sondern gehen Sie elegant damit um." <br>  "Keine Panik" <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">alle Sprüche von Rob Pike</a> <br></blockquote><br><h2>  Unter der Haube </h2><br>  <b>Fehlerschnittstelle</b> <br><br>  Unter der Haube ist der Fehlertyp eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einfache Schnittstelle mit einer Methode</a> . Wenn Sie nicht damit vertraut sind, empfehle ich dringend, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesen Beitrag</a> im offiziellen Go-Blog anzuzeigen. <br><br><img src="https://habrastorage.org/webt/n_/c3/ip/n_c3iptfnwohofkgwwhhxc-cwda.png"><br>  <b><i>Fehlerschnittstelle von der Quelle</i></b> <br><br>  Es ist nicht schwierig, eigene Fehler zu machen.  Es gibt verschiedene Ansätze für Benutzerstrukturen, die die <code>string</code> Methode <code>Error()</code> implementieren.  Jede Struktur, die diese einzelne Methode implementiert, wird als gültiger Fehlerwert betrachtet und kann als solche zurückgegeben werden. <br><br>  Schauen wir uns einige dieser Ansätze an. <br><br><h3>  Integrierte errorString-Struktur </h3><br>  Die am häufigsten verwendete und am weitesten verbreitete Implementierung der Fehlerschnittstelle ist die integrierte <code>errorString</code> Struktur.  Dies ist die einfachste Implementierung, die Sie sich vorstellen können. <br><br><img src="https://habrastorage.org/webt/uv/hj/by/uvhjbyzjh8cmovqpjdkda0ww5_c.png"><br>  Quelle: <a href="">Go Quellcode</a> <br><br>  Sie können die vereinfachte Implementierung <a href="">hier sehen</a> .  Es enthält lediglich eine <code>string</code> , die von der <code>Error</code> Methode zurückgegeben wird.  Dieser Zeichenfolgenfehler kann von uns anhand einiger Daten formatiert werden, <code>fmt.Sprintf</code> . B. mit <code>fmt.Sprintf</code> .  Abgesehen davon enthält es jedoch keine weiteren Funktionen.  Wenn Sie <a href="">error.New</a> oder <a href="">fmt.Errorf</a> angewendet <a href="">haben</a> , haben Sie es bereits <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">verwendet</a> . <br><br><img src="https://habrastorage.org/webt/br/6h/g5/br6hg5p3lozppuf98ry0g2ptsw4.png"><br>  <i>(13 // Ausgabe :)</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">versuche es</a> <br><br><h3>  github.com/pkg/errors </h3><br>  Ein weiteres einfaches Beispiel ist das Paket <a href="">pkg / Errors</a> .  Nicht zu verwechseln mit dem integrierten <code>errors</code> , das Sie zuvor kennengelernt haben. Dieses Paket bietet zusätzliche wichtige Funktionen wie Fehlerumbruch, Erweiterung, Formatierung und Stapelverfolgungsaufzeichnung.  Sie können das Paket installieren, indem Sie <code>go get github.com/pkg/errors</code> . <br><br><img src="https://habrastorage.org/webt/bo/vs/f7/bovsf7dn4l2gvaesqbepogmjxrw.png"><br><br>  In Fällen, in denen Sie den Stack-Trace oder die erforderlichen Debugging-Informationen an Ihre Fehler anhängen müssen, führt die Verwendung der <code>Errorf</code> <code>New</code> oder <code>Errorf</code> dieses Pakets zu Fehlern, die bereits in Ihren Stack-Trace geschrieben wurden, und Sie können damit auch einfache Metadaten anhängen Formatierungsfunktionen.  <code>Errorf</code> implementiert die Schnittstelle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">fmt.Formatter</a> , d. H. Sie können sie mithilfe der Runen des Pakets <code>fmt</code> ( <code>%s</code> , <code>%v</code> , <code>%+v</code> usw.) formatieren. <br><br><img src="https://habrastorage.org/webt/tz/r6/if/tzr6if2llu8ayda0lrnl1zblkju.png"><br>  <i>(// 6 oder Alternative)</i> <br><br>  Dieses Paket führt auch die <code>errors.Wrapf</code> <code>errors.Wrap</code> und <code>errors.Wrapf</code> .  Diese Funktionen fügen dem Fehler mithilfe einer Nachricht und einer Stapelverfolgung an der Stelle, an der sie aufgerufen wurden, Kontext hinzu.  Anstatt den Fehler einfach zurückzugeben, können Sie ihn daher mit Kontext und wichtigen Debugging-Daten umschließen. <br><br><img src="https://habrastorage.org/webt/pa/pz/3t/papz3tu-dlhtdcb4r8lmldfxazu.png"><br><br>  Fehler-Wrapper durch andere Fehler unterstützen die <code>Cause() error</code> , die ihren internen Fehler zurückgibt.  Darüber hinaus können sie mit <code>errors.Cause(err error) error</code> verwendet werden. <code>errors.Cause(err error) error</code> , die den internen Hauptfehler im <code>errors.Cause(err error) error</code> extrahiert. <br><br><h2>  Fehlerbehandlung </h2><br><h3>  Typgenehmigung </h3><br>  Typzusicherungen spielen beim Umgang mit Fehlern eine wichtige Rolle.  Sie werden sie verwenden, um Informationen aus dem Schnittstellenwert zu extrahieren. Da die Fehlerbehandlung mit Benutzerimplementierungen der <code>error</code> , ist die Implementierung von <code>error</code> ein sehr praktisches Werkzeug. <br><br>  Die Syntax ist für alle Zwecke gleich - <code>x.(T)</code> wenn <code>x</code> einen Schnittstellentyp hat.  <code>x.(T)</code> besagt, dass <code>x</code> nicht <code>nil</code> und dass der in <code>x</code> gespeicherte Wert vom Typ <code>T</code>  In den nächsten Abschnitten werden zwei Möglichkeiten zur Verwendung von Typanweisungen untersucht - mit einem bestimmten Typ <code>T</code> und mit einer Schnittstelle vom Typ <code>T</code> <br><br><img src="https://habrastorage.org/webt/tb/fd/e2/tbfde2ne-8parkmkbsthfamc_ym.png"><br>  <i>(2 // Kurzsyntax überspringt die boolesche Variable ok</i> <i><br></i>  <i>3 // Panik: Schnittstellenkonvertierung: Schnittstelle {} ist Null, keine Zeichenfolge</i> <i><br></i>  <i>6 // erweiterte Syntax mit boolean ok</i> <i><br></i>  <i>8 // gerät nicht in Panik, sondern setzt ok false, wenn die Anweisung false ist</i> <i><br></i>  <i>9 // jetzt können wir s sicher als String verwenden)</i> <br><br>  <b><i>Sandbox: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Panik mit verkürzter Syntax</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sichere erweiterte Syntax</a></i></b> <br><br><blockquote>  <i>Zusätzlicher Syntaxhinweis: Eine Typzusicherung kann entweder mit einer verkürzten Syntax (die in Panik gerät, wenn eine Anweisung fehlschlägt) oder einer erweiterten Syntax (die den logischen Wert OK verwendet, um Erfolg oder Misserfolg anzuzeigen) verwendet werden.</i>  <i>Ich empfehle immer, länglich statt verkürzt einzunehmen, da ich lieber die Variable OK überprüfe und mich nicht mit Panik befasse.</i> </blockquote><br><br><h3>  Typ T-Zulassung </h3><br>  Eine Anweisung vom Typ <code>x.(T)</code> mit einer Schnittstelle vom Typ <code>T</code> bestätigt, dass <code>x</code> die Schnittstelle von <code>T</code> implementiert <code>T</code>  Auf diese Weise können Sie sicherstellen, dass der Schnittstellenwert die Schnittstelle implementiert, und nur dann können Sie ihre Methoden verwenden. <br><br><img src="https://habrastorage.org/webt/jl/ps/k7/jlpsk7f8m1bj-7jhwbgmzigsqea.png"><br>  <i>(5 ... // behaupten, dass x die Resolver-Schnittstelle implementiert</i> <i><br></i>  <i>6 ... // hier können wir diese Methode bereits sicher anwenden)</i> <br><br>  Um zu verstehen, wie dies verwendet werden kann, werfen wir noch einmal einen Blick auf <code>pkg/errors</code> .  Sie kennen dieses <code>errors.Cause(err error) error</code> bereits, also lassen Sie uns die <code>errors.Cause(err error) error</code> . <code>errors.Cause(err error) error</code> . <br><br>  Diese Funktion empfängt einen Fehler und extrahiert den innersten Fehler, den sie erleidet (derjenige, der nicht mehr als Wrapper für einen anderen Fehler dient).  Dies mag primitiv erscheinen, aber es gibt viele großartige Dinge, die Sie aus dieser Implementierung lernen können: <br><br><img src="https://habrastorage.org/webt/kj/uy/rm/kjuyrm3rxxgtqt-8a6_cd1bvsqg.png"><br>  Quelle: <a href="">pkg / Fehler</a> <br><br>  Die Funktion empfängt den Fehlerwert und kann nicht davon ausgehen, dass das empfangene <code>err</code> ein Wrapperfehler ist (unterstützt von der <code>Cause</code> Methode).  Daher müssen Sie vor dem Aufrufen der <code>Cause</code> Methode sicherstellen, dass es sich um einen Fehler handelt, der diese Methode implementiert.  Durch Ausführen einer type-Anweisung in jeder Iteration der for-Schleife können Sie sicherstellen, dass die <code>cause</code> Variable die <code>Cause</code> Methode unterstützt, und weiterhin interne Fehler daraus extrahieren, bis Sie einen Fehler finden, der keine <code>Cause</code> . <br><br>  Indem Sie eine einfache lokale Schnittstelle erstellen, die nur die von Ihnen benötigten Methoden enthält, und eine Bestätigung darauf anwenden, wird Ihr Code von anderen Abhängigkeiten getrennt.  Das Argument, das Sie erhalten haben, muss keine bekannte Struktur sein, es muss nur ein Fehler sein.  Jeder Typ, der die Methoden <code>Error</code> und <code>Cause</code> implementiert, ist <code>Error</code> .  Wenn Sie also die <code>Cause</code> Methode in Ihrem Fehlertyp implementieren, können Sie diese Funktion ohne Verlangsamung verwenden. <br><br>  Es gibt jedoch einen kleinen Nachteil, den Sie beachten sollten: Schnittstellen können sich ändern. Daher sollten Sie den Code sorgfältig pflegen, damit Ihre Anweisungen nicht verletzt werden.  Vergessen Sie nicht, Ihre Schnittstellen dort zu definieren, wo Sie sie verwenden, um sie schlank und ordentlich zu halten, und es wird Ihnen gut gehen. <br><br>  Wenn Sie nur eine Methode benötigen, ist es manchmal bequemer, eine Anweisung auf einer anonymen Schnittstelle abzugeben, die nur die Methode enthält, auf die Sie sich verlassen, d. H. <code>v, ok := x.(interface{ F() (int, error) })</code> .  Die Verwendung anonymer Schnittstellen kann dazu beitragen, Ihren Code von möglichen Abhängigkeiten zu trennen und ihn vor möglichen Änderungen an den Schnittstellen zu schützen. <br><br><h3>  Typ T- und Typschalterzulassung </h3><br><br>  Ich stelle diesen Abschnitt vor, indem ich zwei ähnliche Fehlerbehandlungsmuster vorstelle, die unter mehreren Fehlern und Fallen leiden.  Dies bedeutet nicht, dass sie nicht häufig sind.  Beide können praktische Werkzeuge in kleinen Projekten sein, lassen sich jedoch nicht gut skalieren. <br><br>  Die erste ist die zweite Version der Typzusicherung: Es wird eine Zusicherung vom Typ <code>x.(T)</code> mit einem bestimmten Typ <code>T</code> durchgeführt.  Er behauptet, dass der Wert von <code>x</code> vom Typ <code>T</code> ist oder in Typ <code>T</code> umgewandelt werden kann <code>T</code> <br><br><img src="https://habrastorage.org/webt/mh/c5/qy/mhc5qyqfrrnhpct7wyfzhhpflju.png"><br>  <i>(2 // wir können v als mypkg.SomeErrorType verwenden)</i> <br><br>  Ein anderes ist das Muster des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Typschalters</a> .  Type Switch kombiniert eine switch-Anweisung mit einer type-Anweisung unter Verwendung des reservierten <code>type</code> Schlüsselworts.  Sie treten besonders häufig bei der Fehlerbehandlung auf, bei der die Kenntnis des Grundtyps eines variablen Fehlers sehr nützlich sein kann. <br><br><img src="https://habrastorage.org/webt/on/iz/ji/onizji38uqjzltxqord4icmmvoq.png"><br>  <i>(3 // Verarbeitung ...</i> <i><br></i>  <i>5 // Verarbeitung ...)</i> <br><br>  Der große Nachteil beider Ansätze besteht darin, dass beide mit ihren Abhängigkeiten zu einer Codebindung führen.  Beide Beispiele sollten mit der <code>SomeErrorType</code> Struktur vertraut sein (die offensichtlich exportiert werden sollte) und das <code>mypkg</code> Paket importieren. <br>  In beiden Ansätzen sollten Sie bei der Behandlung Ihrer Fehler mit dem Typ vertraut sein und dessen Paket importieren.  Die Situation verschärft sich, wenn Sie sich mit Fehlern in Wrappern befassen, bei denen die Fehlerursache möglicherweise ein Fehler ist, der sich aus einer internen Abhängigkeit ergibt, die Sie nicht kennen und über die Sie nichts wissen sollten. <br><br><img src="https://habrastorage.org/webt/vz/xz/zq/vzxzzqe6qajcsroflsuy0mjt5jk.png"><br>  <i>(7 // Verarbeitung ...</i> <i><br></i>  <i>9 // Verarbeitung ...)</i> <br><br>  Type Switch unterscheidet zwischen <code>*MyStruct</code> und <code>MyStruct</code> .  Wenn Sie nicht sicher sind, ob es sich um einen Zeiger oder eine tatsächliche Instanz einer Struktur handelt, müssen Sie daher beide Optionen angeben.  Darüber hinaus <code>fallthrough</code> die Fälle in Type Switch wie bei normalen Switches nicht fehl, aber im Gegensatz zu den üblichen Type Switch ist die Verwendung von <code>fallthrough</code> in Type Switch verboten. Sie müssen daher ein Komma verwenden und beide Optionen <code>fallthrough</code> , was leicht zu vergessen ist. <br><br><img src="https://habrastorage.org/webt/pe/1y/g7/pe1yg7one8orth5kvcdguqtpteo.png"><br><br><h2>  Zusammenfassend </h2><br>  Das ist alles!  Sie sind jetzt mit den Fehlern vertraut und sollten bereit sein, alle Fehler zu beheben, die Ihre Go-Anwendung möglicherweise auf Ihren Pfad wirft (oder tatsächlich zurückgibt)! <br>  Beide Fehlerpakete bieten einfache, aber wichtige Ansätze für Fehler in Go. Wenn sie Ihren Anforderungen entsprechen, sind sie eine gute Wahl.  Sie können ganz einfach Ihre eigenen Fehlerstrukturen implementieren und die Go-Fehlerbehandlung nutzen, indem Sie sie mit <code>pkg/errors</code> error kombinieren. <br><br>  Wenn Sie einfache Fehler skalieren, kann die korrekte Verwendung von Typanweisungen ein hervorragendes Werkzeug für die Behandlung verschiedener Fehler sein.  Entweder mit Type Switch oder durch Überprüfen des Fehlerverhaltens und Überprüfen der implementierten Schnittstellen. <br><br><h2>  Was weiter? </h2><br>  Die Fehlerbehandlung in Go ist jetzt sehr relevant.  Jetzt, da Sie die Grundlagen haben, fragen Sie sich vielleicht, was vor uns liegt, um mit Go-Fehlern umzugehen! <br><br>  Die nächste Version von Go 2 widmet dem viel Aufmerksamkeit, und Sie können sich bereits die <a href="">Entwurfsversion</a> ansehen.  Darüber hinaus hatte Marcel van Lojuizen während der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dotGo 2019</a> ein hervorragendes Gespräch zu einem Thema, das ich nur empfehlen kann - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">„GO 2-Fehlerwerte heute“</a> . <br><br>  Natürlich gibt es noch viele weitere Ansätze, Tipps und Tricks, und ich kann sie nicht alle in einem Beitrag zusammenfassen!  Trotzdem hoffe ich, dass es Ihnen gefallen hat und wir sehen uns in der nächsten Folge von <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Before You Go</a></i> ! <br><br>  Und jetzt traditionell auf Ihre Kommentare warten. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de453806/">https://habr.com/ru/post/de453806/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de453790/index.html">"Der Kunde ist weg - ist es für immer?" Wie man die Kundenabwanderung in SaaS zählt und was mit grundlegenden Metriken nicht stimmt</a></li>
<li><a href="../de453792/index.html">Empfehlungssysteme: Ideen, Ansätze, Aufgaben</a></li>
<li><a href="../de453796/index.html">Brauchen die Leute Mathe?</a></li>
<li><a href="../de453800/index.html">Wie man "Minesweeper" löst (und es besser macht)</a></li>
<li><a href="../de453804/index.html">Das Buch "Wettbewerbsfähigkeit und Parallelität auf der .NET-Plattform. Effektive Designmuster “</a></li>
<li><a href="../de453808/index.html">Wir zerlegen das Geschäftsmodell der Wikinger</a></li>
<li><a href="../de453810/index.html">Biometrisches Feedback</a></li>
<li><a href="../de453812/index.html">Themen, Stile und andere</a></li>
<li><a href="../de453816/index.html">Durch Zecken übertragene Enzephalitis: eine vernachlässigte Gefahr</a></li>
<li><a href="../de453818/index.html">GitLab 11.11: Mehrere sind für Zusammenführungsanforderungen und Verbesserungen für Container verantwortlich</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>