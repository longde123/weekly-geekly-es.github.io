<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ง ๐คฝ๐ฟ ๐๏ธ ูุจุงุฏุฆ PIM ๐ ๐ ๐๐พ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุจุฑูุชูููู PIM ูู ูุฌููุนุฉ ูู ุงูุจุฑูุชููููุงุช ูุฅุฑุณุงู ุงูุจุซ ุงููุชุนุฏุฏ ุนูู ุดุจูุฉ ุจูู ุฃุฌูุฒุฉ ุงูุชูุฌูู. ูุชู ุจูุงุก ุนูุงูุงุช ุงูุฌูุงุฑ ุจููุณ ุงูุทุฑููุฉ ููุง ูู ุญุงูุฉ ุจุฑูุชููููุงุช ุงูุชู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุจุงุฏุฆ PIM</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450582/" style=";text-align:right;direction:rtl"> ุจุฑูุชูููู PIM ูู ูุฌููุนุฉ ูู ุงูุจุฑูุชููููุงุช ูุฅุฑุณุงู ุงูุจุซ ุงููุชุนุฏุฏ ุนูู ุดุจูุฉ ุจูู ุฃุฌูุฒุฉ ุงูุชูุฌูู.  ูุชู ุจูุงุก ุนูุงูุงุช ุงูุฌูุงุฑ ุจููุณ ุงูุทุฑููุฉ ููุง ูู ุญุงูุฉ ุจุฑูุชููููุงุช ุงูุชูุฌูู ุงูุฏููุงููููุฉ.  ูุฑุณู PIMv2 ุฑุณุงุฆู Hello ูู 30 ุซุงููุฉ ุฅูู ุนููุงู ุงูุจุซ ุงููุชุนุฏุฏ ุงููุญุฌูุฒ 224.0.0.13 (All-PIM-Routers).  ุชุญุชูู ุงูุฑุณุงูุฉ ุนูู ูุคูุชุงุช ุชุนููู - ุนุงุฏุฉู 3.5 * ูุฑุญุจูุง ูุคูุชูุง ุ ุฃู 105 ุซุงููุฉ ุงูุชุฑุงุถููุง. <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/e67/8a0/1fc/e678a01fc7879ecf22bc6f9a3825f9a6.jpg" alt="ุตูุฑุชู"></a> <br>  ูุณุชุฎุฏู ูุธุงู ุฅุฏุงุฑุฉ ุงููุนูููุงุช ุงูุดุฎุตูุฉ ูุถุนูู ุฑุฆูุณููู ููุนูููุฉ - ุงููุถุน ุงููุซูู ูุงููุชูุงุซุฑ.  ููุจุฏุฃ ูุน ูุถุน ุงููุซุงูุฉ. <a name="habracut"></a><br>  <b>ุฃุดุฌุงุฑ ุงูุชูุฒูุน ุงููุณุชูุฏุฉ ุฅูู ุงููุตุฏุฑ.</b> <br>  ูููุตุญ ุจุงุณุชุฎุฏุงู ูุถุน ุงููุซุงูุฉ ูู ุญุงูุฉ ูุฌูุฏ ุนุฏุฏ ูุจูุฑ ูู ุงูุนููุงุก ูู ูุฎุชูู ูุฌููุนุงุช ุงูุจุซ ุงููุชุนุฏุฏ.  ุนูุฏูุง ูุณุชูุจู ุฌูุงุฒ ุงูุชูุฌูู ุญุฑูุฉ ูุฑูุฑ ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ ุ ูุฅู ุฃูู ุดูุก ููุนูู ูู ุงูุชุญูู ูู ูุฌูุฏู ูู ูุงุนุฏุฉ RPF.  RPF - ูุชู ุงุณุชุฎุฏุงู ูุฐู ุงููุงุนุฏุฉ ููุชุญูู ูู ูุตุฏุฑ ุงูุจุซ ุงููุชุนุฏุฏ ุจุงุณุชุฎุฏุงู ุฌุฏูู ุชูุฌูู ุฃุญุงุฏู ุงูุฅุฑุณุงู.  ูู ุงูุถุฑูุฑู ุฃู ุชุฃุชู ุญุฑูุฉ ุงููุฑูุฑ ุฅูู ุงููุงุฌูุฉ ุงูุชู ูููู ูุฐุง ุงููุถูู ูุฎูููุง ููููุง ูุฅุตุฏุงุฑ ุฌุฏูู ุชูุฌูู ุงูุจุซ ุงูุฃุญุงุฏู.  ูุฐู ุงูุขููุฉ ูุญู ูุดููุฉ ุญุฏูุซ ุญููุฉ ุฃุซูุงุก ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ. <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/6cd/08c/fb6/6cd08cfb6842680447d56860334af52c.png" alt="ุตูุฑุชู"></a> <br>  ุณูุชุนุฑู R3 ูู ุฑุณุงูุฉ ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ ุนูู ูุตุฏุฑ ุงูุจุซ ุงููุชุนุฏุฏ (Source IP) ููุชุญูู ูู ุงูุชุฏููุงุช ูู R1 ู R2 ูู ุฌุฏูู ุงูุจุซ ุงูุฃุญุงุฏู.  ุณูุชู ููู ุงูุชูุงุฑ ูู ุงููุงุฌูุฉ ุงููุดุงุฑ ุฅูููุง ูู ุงูุฌุฏูู (ูู R1 ุฅูู R3) ุ ูุณูุชู ุฅุณูุงุท ุงูุชูุงุฑ ูู R2 ุ ูุฃูู ูู ุฃุฌู ุงููุตูู ุฅูู ูุตุฏุฑ ุงูุจุซ ุงููุชุนุฏุฏ ุ ูู ุงูุถุฑูุฑู ุฅุฑุณุงู ุญุฒู ุนุจุฑ S0 / 1. <br>  ูุงูุณุคุงู ูู ุ ูุงุฐุง ูุญุฏุซ ุฅุฐุง ูุงู ูุฏูู ุทุฑูููู ููุงูุฆูู ูููุง ููุณ ุงูููุงุณุ  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูุฎุชุงุฑ ุงูููุฌู ุงูุฎุทูุฉ ุงูุชุงููุฉ ููุฐู ุงููุณุงุฑุงุช.  ุงูุฐู ูุฏูู ุนููุงู IP ุฃุนูู ุ ูุงุฒ.  ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุชุบููุฑ ูุฐุง ุงูุณููู ุ ููููู ุงุณุชุฎุฏุงู ECMP.  ูุฒูุฏ ูู ุงูุชูุงุตูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . <br>  ุจุนุฏ ุงูุชุญูู ูู ูุงุนุฏุฉ RPF ุ ูุฑุณู ุฌูุงุฒ ุงูุชูุฌูู ุญุฒูุฉ ุฅุฑุณุงู ูุชุนุฏุฏ ุฅูู ุฌููุน ุฃุฌูุฒุฉ PIM ุงููุฌุงูุฑุฉ ูู ุ ุจุงุณุชุซูุงุก ุงูุญุฒูุฉ ุงูุชู ุชู ุงุณุชูุงู ุงูุญุฒูุฉ ูููุง.  ุชููู ุฃุฌูุฒุฉ ุชูุฌูู PIM ุงูุฃุฎุฑู ุจุชูุฑุงุฑ ูุฐู ุงูุนูููุฉ.  ูุดูู ุงููุณุงุฑ ุงูุฐู ูุฑุช ุจู ุญุฒูุฉ ุงูุจุซ ุงููุชุนุฏุฏ ูู ุงููุตุฏุฑ ุฅูู ุงููุณุชูููู ุงูููุงุฆููู ุดุฌุฑุฉ ุชุณูู - ุดุฌุฑุฉ ุงูุชูุฒูุน ุงููุงุฆูุฉ ุนูู ุงููุตุฏุฑ ุ ุดุฌุฑุฉ ุงููุณุงุฑ ุงูุฃูุตุฑ (SPT) ุ ุดุฌุฑุฉ ุงููุตุฏุฑ.  ุซูุงุซุฉ ุฃุณูุงุก ูุฎุชููุฉ ุ ูุงุฎุชูุงุฑ ุฃู. <br>  ููููุฉ ุญู ุงููุดููุฉ ูุน ุญูููุฉ ุฃู ุจุนุถ ุฃุฌูุฒุฉ ุงูุชูุฌูู ูู ุชุชุฎูู ุนู ุจุนุถ ุงูุจุซ ุงููุชุนุฏุฏ ูููุณ ููุงู ุฃุญุฏ ูุฅุฑุณุงูู ุฅูู ุฌูุงุฒ ุงูุชูุฌูู ุนุงูู ุงููุณุชูู ูุฑุณูู.  ููุฐุง ุ ุงุฎุชุฑุนุช ุขููุฉ ุชูููู. <br>  <b>ุฑุณุงูุฉ ุชูููู.</b> <br>  ุนูู ุณุจูู ุงููุซุงู ุ ุณูู ูุณุชูุฑ R2 ูู ุฅุฑุณุงู R3 ูุชุนุฏุฏ ุ ุนูู ุงูุฑุบู ูู ุฃู R3 ุจุญูู RPF ูุณูุทูุง.  ููุงุฐุง ุชุญููู ุงูููุงุฉุ  ูุฑุณู R3 ุฑุณุงูุฉ PIM Prune ู R2 ุ ุนูุฏ ุชููู ูุฐู ุงูุฑุณุงูุฉ ุ ูุฒูู ูุงุฌูุฉ S0 / 1 ูู ูุงุฆูุฉ ุงููุงุฌูุฉ ุงูุตุงุฏุฑุฉ ููุฐุง ุงูุชุฏูู ุ ูุงุฆูุฉ ุงููุงุฌูุงุช ุงูุชู ูุฌุจ ุฅุฑุณุงู ุญุฑูุฉ ุงููุฑูุฑ ูููุง. <br><blockquote style=";text-align:right;direction:rtl">  ูููุง ููู ุชุนุฑูู ุฃูุซุฑ ุฑุณููุฉ ูุฑุณุงูุฉ PIM Prune: <br>  ูุชู ุฅุฑุณุงู ุฑุณุงูุฉ PIM Prune ุจูุงุณุทุฉ ุฌูุงุฒ ุชูุฌูู ูุงุญุฏ ุฅูู ุฌูุงุฒ ุชูุฌูู ุซุงูู ููุชุณุจุจ ูู ููุงู ุฌูุงุฒ ุงูุชูุฌูู ุงูุซุงูู ุจุฅุฒุงูุฉ ุงูุฑุงุจุท ุงูุฐู ุชู ุงุณุชูุงู ุฌูุงุฒ Prune ูู SPT ุฎุงุต ุจู (Sุ G). </blockquote><br>  ุจุนุฏ ุชููู ุฑุณุงูุฉ Prune ุ ูููู R2 ุจุชุนููู ูุคูุช Prune ุฅูู 3 ุฏูุงุฆู.  ุจุนุฏ ุซูุงุซ ุฏูุงุฆู ุ ุณูุจุฏุฃ ุฅุฑุณุงู ุญุฑูุฉ ุงููุฑูุฑ ูุฑุฉ ุฃุฎุฑู ุญุชู ูุชููู ุฑุณุงูุฉ Prune ุงูุชุงููุฉ.  ูุฐุง ูู PIMv1. <br>  ููู PIMv2 ูุถุงู ูุคูุช ุชุญุฏูุซ ุงูููุงูุฉ (ุงูุชุฑุงุถููุง 60 ุซุงููุฉ).  ุจูุฌุฑุฏ ุฅุฑุณุงู ุฑุณุงูุฉ Prune ูู R3 ุ ูุจุฏุฃ ูุฐุง ุงููุคูุช ูู R3.  ุจุนุฏ ุงูุชูุงุก ุตูุงุญูุฉ ูุฐุง ุงููุคูุช ุ ุณุชุฑุณู R3 ุฑุณุงูุฉ "ุชุญุฏูุซ ุงูุญุงูุฉ" ุงูุชู ุณุชุนูุฏ ุชุนููู ูุคูุช Prune 3 ุฏูุงุฆู ุฅูู R2 ููุฐู ุงููุฌููุนุฉ. <br>  ุฃุณุจุงุจ ุฅุฑุณุงู ุฑุณุงูุฉ ุชูููู: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุดูุช ุญุฒูุฉ ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ ูู ุงูุชุญูู ูู RPF. </li><li style=";text-align:right;direction:rtl">  ูู ุญุงูุฉ ุนุฏู ูุฌูุฏ ุนููุงุก ูุชุตููู ูุญูููุง ุทูุจูุง ูุฌููุนุฉ ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ (IGMP Join) ููุง ููุฌุฏ ุฌูุฑุงู PIM ูููู ุฅุฑุณุงู ุญุฑูุฉ ูุฑูุฑ ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ (ูุงุฌูุฉ ุบูุฑ ุชูููู) ุฅูููู. </li></ul><br>  <b>ุฑุณุงูุฉ ุงููุณุจ ุบูุฑ ุงููุดุฑูุน.</b> <br>  ุชุฎูู ุฃู R3 ูุง ูุฑูุฏ ุญุฑูุฉ ุงููุฑูุฑ ูู R2 ุ ุฃุฑุณู Prune ูุงุณุชูุจู ุงูุจุซ ุงููุชุนุฏุฏ ูู R1.  ูููู ูุฌุฃุฉ ุ ุณูุทุช ุงูููุงุฉ ุจูู R1-R3 ูุชุฑูุช R3 ุจุฏูู ุจุซ ูุชุนุฏุฏ.  ููููู ุงูุงูุชุธุงุฑ 3 ุฏูุงุฆู ุญุชู ุชูุชูู ุตูุงุญูุฉ Prune Timer ุนูู R2.  3 ุฏูุงุฆู ููุงูุชุธุงุฑ ููุฏุฉ ุทูููุฉ ุ ุญุชู ูุง ุชูุชุธุฑ ุ ุชุญุชุงุฌ ุฅูู ุฅุฑุณุงู ุฑุณุงูุฉ ุชุนุฑุถ ุนูู ุงูููุฑ ูุฐู ุงููุงุฌูุฉ S0 / 1 ุนูู R2 ูู ุญุงูุฉ ุงูุชูููู.  ูุฐู ุงูุฑุณุงูุฉ ุณุชููู ุฑุณุงูุฉ ุงููุณุจ ุบูุฑ ุงููุดุฑูุน.  ุจุนุฏ ุชููู ุฑุณุงูุฉ Graft ุ ุณูุฑุณู R2 Graft-ACK ุฑุฏูุง ุนูู ุฐูู. <br>  <b>ุชุฌุงูุฒ ุงูุฎูุฎ.</b> <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/bc7/1d0/e9f/bc71d0e9f81b292e75d4a016a9b657ef.png" alt="ุตูุฑุชู"></a> <br>  ุฏุนูุง ููุธุฑ ุฅูู ูุฐุง ุงููุฎุทุท.  ูุจุซ R1 ุงูุจุซ ุงููุชุนุฏุฏ ูู ููุทุน ุจู ุฌูุงุฒู ุชูุฌูู.  ูุณุชูุจู R3 ุญุฑูุฉ ุงููุฑูุฑ ููุจุซูุง ุ ููุณุชูุจููุง R2 ุ ููู ูุง ููุฌุฏ ูุฏูู ุฃู ุดุฎุต ูุจุซ ุญุฑูุฉ ุงููุฑูุฑ.  ูุฑุณู ุฑุณุงูุฉ Prune ุฅูู R1 ูู ูุฐุง ุงูุฌุฒุก.  R1 ูุฌุจ ุฅุฒุงูุฉ Fa0 / 0 ูู ุงููุงุฆูุฉ ูุฅููุงู ุงูุจุซ ูู ูุฐุง ุงูุฌุฒุก ุ ูููู ูุงุฐุง ุณูุญุฏุซ ูู R3ุ  ู R3 ูู ููุณ ุงูุดุฑูุญุฉ ุ ููุง ุชููู ูุฐู ุงูุฑุณุงูุฉ ูู ุจุฑูู ูุฃุฏุฑูุช ูุฃุณุงุฉ ุงููุถุน.  ูุจู ุฃู ูุชููู R1 ุนู ุงูุจุซ ุ ูููู ุจุชุนููู ุงููููุช ุฅูู 3 ุซูุงู ููุชููู ุนู ุงูุจุซ ุจุนุฏ 3 ุซูุงู.  3 ุซูุงู - ุงููุซูุฑ ูู ุงูููุช ู R3 ุ ุญุชู ูุง ุชููุฏ ุงูุจุซ ุงููุชุนุฏุฏ.  ูุฐูู ุ ูููู R3 ุ ูู ุฃูุฑุจ ููุช ูููู ุ ุจุฅุฑุณุงู ุฑุณุงูุฉ Pim Join ููุฐู ุงููุฌููุนุฉ ููู ูุนุฏ ูููุฑ R1 ูู ุฅููุงู ุงูุจุซ.  ุญูู ุงูุงูุถูุงู ุฅูู ุงููุธุงุฆู ุฃุฏูุงู. <br>  <b>ุชุฃููุฏ ุงูุฑุณุงูุฉ.</b> <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/f1d/9d1/d68/f1d9d1d6855fdc188deb28c75bde2d0d.png" alt="ุตูุฑุชู"></a> <br>  ุชุฎูู ูุฐุง ุงููููู: ุจุซ ุฌูุงุฒู ุชูุฌูู ุฅูู ููุณ ุงูุดุจูุฉ ูู ููุช ูุงุญุฏ.  ูุชูููู ููุณ ุงูุฏูู ูู ุงููุตุฏุฑ ุ ููููู ููุงููุง ุจุจุซู ุฅูู ููุณ ุงูุดุจูุฉ ุฎูู ูุงุฌูุฉ e0.  ูุฐูู ุ ูุฌุจ ุนูููู ุชุญุฏูุฏ ูู ุณูููู ุงููุฐูุน ุงููุญูุฏ ููุฐู ุงูุดุจูุฉ.  ุชุฃููุฏ ุงูุฑุณุงุฆู ุชุณุชุฎุฏู ููุฐุง ุงูุบุฑุถ.  ุนูุฏูุง ููุชุดู R2 ู R3 ุงุฒุฏูุงุฌูุฉ ุญุฑูุฉ ูุฑูุฑ ุงูุจุซ ุงููุชุนุฏุฏ ุ ุฃู ุงูุจุซ ุงููุชุนุฏุฏ ุงูุฐู ูุจุซุงูู ุนูู R2 ู R3 ุ ุงููุฐูู ูุจุซุงูู ุจุฃููุณููุง ุ ุชุฏุฑู ุฃุฌูุฒุฉ ุงูุชูุฌูู ุฃู ููุงู ุฎุทุฃ ูุง ููุง.  ูู ูุฐู ุงูุญุงูุฉ ุ ุชุฑุณู ุฃุฌูุฒุฉ ุงูุชูุฌูู ุฑุณุงุฆู ุงูุชุฃููุฏ ุ ูุงูุชู ุชุชุถูู ุงููุณุงูุฉ ุงูุฅุฏุงุฑูุฉ ูููุงุณ ุงููุณุงุฑ ุงูุฐู ูุชู ูู ุฎูุงูู ุงููุตูู ุฅูู ูุตุฏุฑ ุงูุจุซ ุงููุชุนุฏุฏ - 10.1.1.10.  ูุชู ุชุญุฏูุฏ ุงููุงุฆุฒ ุนูู ุงููุญู ุงูุชุงูู: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุงุญุฏ ูุน ุงูุฎูุงุถ ู. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ู ูุณุงูู ุ ููู ูุฏูู ุงูููุงุณ ุงูุฃุฏูู. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงูุช ููุงู ูุณุงูุงุฉ ุ ูุญูููุง ูููู ุงููุณุชุฎุฏู ูุฏูู ุนููุงู IP ุฃุนูู ูู ุงูุดุจูุฉ ุงูุชู ูุจุซูู ุจูุง ูุฐุง ุงูุจุซ ุงููุชุนุฏุฏ. </li></ol><br>  ุจุนุฏ ุงูููุฒ ุจูุฐุง ุงูุชุตููุช ุ ูุตุจุญ ุฌูุงุฒ ุงูุชูุฌูู ูู ุฌูุงุฒ ุงูุชูุฌูู ุงููุนูู.  ูุณุชุฎุฏู Pim Hello ุฃูุถูุง ูุชุญุฏูุฏ DR.  ูู ุจุฏุงูุฉ ุงูููุงู ุ ุชู ุนุฑุถ ุฑุณุงูุฉ PIM Hello ุ ุญูุซ ููููู ููุงุญุธุฉ ุญูู DR.  ุงููุงุฆุฒ ูู ุงูุฐู ูุญูู ุนููุงู IP ุฃุนูู ุนูู ูุฐุง ุงูุฑุงุจุท. <br>  ููุญุฉ ูููุฏุฉ: <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/3de/e1a/c84/3dee1ac8448b1fceaa9f1972eff802b7.png" alt="ุตูุฑุชู"></a> <br>  <b>ุงูุฌุฏูู MROUTE.</b> <br>  ุจุนุฏ ุงููุฑุงุฌุนุฉ ุงูุฃูููุฉ ูุชุดุบูู ุจุฑูุชูููู PIM ุ ูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ููููุฉ ุงูุนูู ูุน ุฌุฏูู ุชูุฌูู ุงูุจุซ ุงููุชุนุฏุฏ.  ูููู ุฌุฏูู mroute ุจุชุฎุฒูู ูุนูููุงุช ุญูู ุงูุชุฏููุงุช ุงูุชู ุทูุจูุง ุงูุนููุงุก ูุฃู ุงูุชุฏููุงุช ุชุชุฏูู ูู ุฎูุงุฏู ุงูุจุซ ุงููุชุนุฏุฏ. <br>  ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ุชููู ุชูุฑูุฑ ุนุถููุฉ IGMP ุฃู ุงูุถูุงู PIM ุนูู ุจุนุถ ุงููุงุฌูุงุช ุ ุชุชู ุฅุถุงูุฉ ุฅุฏุฎุงู ูู ุงูููุน (* ุ G) ุฅูู ุฌุฏูู ุงูุชูุฌูู: <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/afd/3ed/52c/afd3ed52cef0f9f105a0b58dff18edee.jpg" alt="ุตูุฑุชู"></a> <br>  ูุฐุง ุงูุฅุฏุฎุงู ูุนูู ุฃูู ุชู ุงุณุชูุงู ุทูุจ ุญุฑูุฉ ุงููุฑูุฑ ุจุงูุนููุงู 238.38.38.38.  ุชุนูู ุฅุดุงุฑุฉ DC ุฃู ุงูุจุซ ุงููุชุนุฏุฏ ุณูุนูู ูู ูุถุน Dense ููุนูู C ุฃู ุงููุณุชูู ูุชุตู ูุจุงุดุฑุฉ ุจุงูููุฌู ุ ุฃู ุฃู ุงูููุฌู ูุฏ ุชููู ุชูุฑูุฑ ุนุถููุฉ IGMP ู PIM Join. <br>  ุฅุฐุง ูุงู ููุงู ุณุฌู ูุซู (S ุ G) ูุนูู ุฃู ูุฏููุง ุจุซ ูุชุนุฏุฏ ุงูุจุซ: <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/a78/cf2/332/a78cf23325ddc6e0c3d65322340d7ff6.jpg" alt="ุตูุฑุชู"></a> <br>  ูู ุญูู S - 192.168.1.11 ุ ุณุฌููุง ุนููุงู IP ุงูุฎุงุต ุจูุตุฏุฑ ุงูุจุซ ุงููุชุนุฏุฏ ุ ูุณูุชู ูุญุตู ุจูุงุณุทุฉ ูุงุนุฏุฉ RPF.  ูู ุญุงูุฉ ุญุฏูุซ ูุดุงูู ุ ูุฅู ุฃูู ุดูุก ูุนูู ูู ุงูุชุญูู ูู ุฌุฏูู Unicast ููุชุนุฑู ุนูู ุงููุณุงุฑ ุฅูู ุงููุตุฏุฑ.  ูู ุญูู Inbound Interface ุ ูุดูุฑ ุฅูู ุงููุงุฌูุฉ ุงูุชู ูุตู ุฅูููุง ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ.  ูู ุฌุฏูู ุชูุฌูู ุงูุจุซ ุงูุฃุญุงุฏู ุ ูุฌุจ ุฃู ูุดูุฑ ุงููุณุงุฑ ุฅูู ุงููุตุฏุฑ ุฅูู ุงููุงุฌูุฉ ุงููุญุฏุฏุฉ ููุง.  ุชุดูุฑ ุงููุงุฌูุฉ ุงูุตุงุฏุฑุฉ ุฅูู ููุงู ุฅุนุงุฏุฉ ุชูุฌูู ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ.  ุฅุฐุง ูุงูุช ูุงุฑุบุฉ ุ ููู ุชููู ููุงู ุทูุจุงุช ููุฐู ุงูุญุฑูุฉ ุฅูู ุฌูุงุฒ ุงูุชูุฌูู.  ูููู ุงูุงุทูุงุน ุนูู ูุฒูุฏ ูู ุงููุนูููุงุช ุญูู ุฌููุน ุงูุฃุนูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . <br>  <b>PIM ูุชูุฑู ุงููุถุน.</b> <br>  ุงุณุชุฑุงุชูุฌูุฉ ูุถุน ูุชูุฑู ูู ุนูุณ ูุถุน ุงููุซุงูุฉ.  ุนูุฏูุง ูุชููู Sparse-mode ุญุฑูุฉ ูุฑูุฑ ูุชุนุฏุฏุฉ ุ ูุฅูู ูู ูุฑุณู ุญุฑูุฉ ุงููุฑูุฑ ุฅูุง ูู ุฎูุงู ุชูู ุงููุงุฌูุงุช ุงูุชู ุชูุฌุฏ ูููุง ุทูุจุงุช ููุฐุง ุงูุฏูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฑุณุงุฆู Pim Join ุฃู ุชูุฑูุฑ IGMP ุงูุชู ุชุทูุจ ุญุฑูุฉ ุงููุฑูุฑ ูุฐู. <br>  ุนูุงุตุฑ ููุงุซูุฉ SM ู DM: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุชู ุจูุงุก ุนูุงูุงุช ุงูุฌูุงุฑ ุจููุณ ุงูุทุฑููุฉ ุงููุชุจุนุฉ ูู PIM DM. </li><li style=";text-align:right;direction:rtl">  ุชุนูู ุงููุงุนุฏุฉ RPF. </li><li style=";text-align:right;direction:rtl">  ุงุฎุชูุงุฑ DR ูุดุงุจู. </li><li style=";text-align:right;direction:rtl">  ูุญุฑู Prune Overrides ูุฑุณุงุฆู ุงูุชุฃููุฏ ูุชุดุงุจูุงู. </li></ul><br>  ููุชุญูู ูู ูู ูุญุชุงุฌ ุฃูู ูุฃูู ููุง ูู ุญุฑูุฉ ูุฑูุฑ ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ ุงููุทููุจุฉ ุนูู ุงูุดุจูุฉ ุ ููุฒู ูุฌูุฏ ูุฑูุฒ ูุนูููุงุช ูุดุชุฑู.  ูุซู ูุฐุง ุงููุฑูุฒ ุณูููู ูุฏููุง Rendezvous Point (RP).  ุฃู ุดุฎุต ูุฑูุฏ ููุนูุง ูุง ูู ุญุฑูุฉ ูุฑูุฑ ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ ุฃู ุดุฎุต ูุง ุจุฏุฃ ูู ุชููู ุญุฑูุฉ ูุฑูุฑ ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ ูู ุงููุตุฏุฑ ุ ุซู ูุฑุณููุง ุฅูู RP. <br>  ุนูุฏูุง ูุณุชูุจู RP ุญุฑูุฉ ูุฑูุฑ ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ ุ ูุฅูู ุณูุฑุณููุง ุฅูู ุฃุฌูุฒุฉ ุงูุชูุฌูู ุงูุชู ุทูุจุช ูุฐู ุงูุญุฑูุฉ ูู ูุจู. <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/025/d45/651/025d4565117dce5f8da07609c823c63e.jpg" alt="ุตูุฑุชู"></a> <br>  ุชุฎูู ูุซู ูุฐุง ุงููููู ุญูุซ RP ูู R3.  ุจูุฌุฑุฏ ุฃู ูุณุชูุจู R1 ุญุฑูุฉ ุงููุฑูุฑ ูู S1 ุ ูุชู ุชุบููู ูุฐู ุงูุญุฒูุฉ ูู ุงูุจุซ ุงููุชุนุฏุฏ ูู ุฑุณุงูุฉ PIM Record ุฃุญุงุฏูุฉ ุงูุฅุฑุณุงู ูุฅุฑุณุงููุง ุฅูู RP.  ููู ูุนุฑู ูู ูู RPุ  ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุชููููู ุจุดูู ุซุงุจุช ุ ูุณูุชุญุฏุซ ุนู ุถุจุท RP ุงูุฏููุงูููู ูุงุญููุง. <br><blockquote style=";text-align:right;direction:rtl">  ip pim rp-address 3.3.3.3 </blockquote><br>  ุณุชุจุฏู RP - ูู ูุงูุช ููุงู ุฃู ูุนูููุงุช ูู ุดุฎุต ูุฑุบุจ ูู ุชููู ุญุฑูุฉ ุงููุฑูุฑ ูุฐูุ  ูููุชุฑุถ ุฃูู ูู ููู ูุฐูู.  ุจุนุฏ ุฐูู ุ ุณูู ูููู RP ุจุฅุฑุณุงู ุฑุณุงูุฉ ุฅููุงู ุงูุชุณุฌูู PIM ุฅูู R1 ุ ููุง ูุนูู ุฃูู ูุง ูุญุชุงุฌ ุฃุญุฏ ุฅูู ูุฐุง ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ ุ ุญูุซ ูุชู ุฑูุถ ุงูุชุณุฌูู.  ูู ูุฑุณู R1 ุงูุจุซ ุงููุชุนุฏุฏ.  ููู ูุตุฏุฑ ุงูุจุซ ุงููุชุนุฏุฏ ุณูู ูุฑุณูู ุ ูุฐูู R1 ุ ุจุนุฏ ุชููู ุฅููุงู ุงูุชุณุฌูู ุ ุณูุจุฏุฃ ุฌูุงุฒ ุถุจุท ููุช ุงูุชุณุฌูู ุ ููู 60 ุซุงููุฉ.  ูุจู 5 ุซูุงูู ูู ุงูุชูุงุก ุตูุงุญูุฉ ุงููุคูุช ุ ุณูุฑุณู R1 ุฑุณุงูุฉ ุชุณุฌูู ูุงุฑุบุฉ ูุน ุจุช Null-Record (ุฃู ุ ุจุฏูู ุฑุฒูุฉ ูุชุนุฏุฏุฉ ุงูุจุซ ูุบููุฉ) ุฅูู ุฌุงูุจ RP.  ุณูู RP ุจุฏูุฑู ุชุชุตุฑู ูุซู ูุฐุง: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูู ููู ููุงู ุฃู ูุณุชูููู ุฃู ูุง ุ ูุณูุชู ุงูุฑุฏ ุจุฑุณุงูุฉ ุฅููุงู ุงูุชุณุฌูู. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ุธูุฑ ุงููุณุชูููู ุ ููู ูุฌูุจ ุนููู ุจุฃู ุทุฑููุฉ.  R1 ุ ุงูุชู ูู ุชุชูู ุฑูุถูุง ูุชุณุฌูููุง ูู ุบุถูู 5 ุซูุงูู ุ ุณุชุณุนุฏ ูุชุฑุณู ุชุณุฌูู ุฑุณุงูุฉ ูุน ุงูุจุซ ุงููุชุนุฏุฏ ุงููุบูู ุฅูู RP. </li></ul><br>  ูุน ูุตูู ุงูุจุซ ุงููุชุนุฏุฏ ุฅูู RP ุ ูุจุฏู ุฃูู ูุฏ ุชู ุชุณููุชู ุ ูููุญุงูู ุงูุขู ุงูุฅุฌุงุจุฉ ุนูู ุณุคุงู ุญูู ููููุฉ ุฌูุจ RP ูุญุฑูุฉ ุงููุฑูุฑ ุฅูู ุงููุณุชูููู.  ุชุญุชุงุฌ ููุง ุฅูู ุชูุฏูู ููููู ุฌุฏูุฏ - ุดุฌุฑุฉ ูุณุงุฑ ุงูุฌุฐุฑ (RPT).  RPT ูู ุดุฌุฑุฉ ุฐุงุช ุฌุฐุฑ ูู RP ุชููู ูุญู ุงููุณุชูููู ุงููุชูุฑุนุฉ ุนูู ูู ุฌูุงุฒ ุชูุฌูู PIM-SM.  ูููู RP ุจุฅูุดุงุฆู ูู ุฎูุงู ุชููู ุฑุณุงุฆู PIM Join ูุฅุถุงูุฉ ูุฑุน ุฌุฏูุฏ ุฅูู ุงูุดุฌุฑุฉ.  ููุฐูู ููุนู ูู ุฌูุงุฒ ุชูุฌูู ุงููุตุจ.  ุงููุงุนุฏุฉ ุงูุนุงูุฉ ุชุจุฏู ูุงูุชุงูู: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุณุชูุจู ุฌูุงุฒ ุชูุฌูู PIM-SM ุฑุณุงูุฉ PIM Join ุนูู ุฃู ูุงุฌูุฉ ุ ุจุงุณุชุซูุงุก ุงููุงุฌูุฉ ุงูุชู ูููู RP ูุฎูููุง ูุฑุงุกูุง ุ ูุฅูู ูุถูู ูุฑุนูุง ุฌุฏูุฏูุง ุฅูู ุงูุดุฌุฑุฉ. </li><li style=";text-align:right;direction:rtl">  ุชุชู ุฅุถุงูุฉ ูุฑุน ุฃูุถูุง ุนูุฏูุง ูุชููู ุฌูุงุฒ ุงูุชูุฌูู PIM-SM ุชูุฑูุฑ ุนุถููุฉ IGMP ูู ูุถูู ูุชุตู ูุจุงุดุฑุฉ. </li></ul><br>  ุชุฎูู ุฃู ูุฏููุง ุนููู ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ ุนูู ุฌูุงุฒ ุงูุชูุฌูู R5 ูููุฌููุนุฉ 228.8.8.8.  ุจูุฌุฑุฏ ุฃู ูุชููู R5 ุชูุฑูุฑ ุนุถููุฉ IGMP ูู ุงููุถูู ุ ูุฑุณู R5 ุฑุงุจุท PIM ูู ุงุชุฌุงู RP ุ ููุถูู ูู ููุณู ูุงุฌูุฉ ุชุจุญุซ ุนู ุงููุถูู ูู ุงูุดุฌุฑุฉ.  ุจุนุฏ ุฐูู ุ ูุณุชูุจู R4 PIM Join ูู R5 ุ ููุถูู ูุงุฌูุฉ Gi0 / 1 ุฅูู ุงูุดุฌุฑุฉ ุ ููุฑุณู PIM Join ูู ุงุชุฌุงู RP.  ุฃุฎูุฑูุง ุ ูุณุชูุจู RP (R3) ุงูุถูุงู PIM ููุถูู Gi0 / 0 ุฅูู ุงูุดุฌุฑุฉ.  ูุจุงูุชุงูู ุ ูุชู ุงูุญุตูู ุนูู ุชุณุฌูู ุงููุณุชูู ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ.  ูุญู ูุจูู ุดุฌุฑุฉ ูุน ุงูุฌุฐุฑ R3-Gi0 / 0 โ R4-Gi0 / 1 โ R5-Gi0 / 0. <br>  ุจุนุฏ ุฐูู ุ ุณูุชู ุฅุฑุณุงู PIM Join ุฅูู R1 ูุณูุจุฏุฃ R1 ูู ุฅุฑุณุงู ุญุฑูุฉ ูุฑูุฑ ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ.  ูู ุงูููู ููุงุญุธุฉ ุฃูู ุฅุฐุง ุทูุจ ุงููุถูู ุงููุฑูุฑ ูุจู ุจุฏุก ุงูุจุซ ุงููุชุนุฏุฏ ุ ููู ูุฑุณู RP PIM Join ููู ูุฑุณู ุฃู ุดูุก ุฅูู ุงูุฌุงูุจ R1 ุนูู ุงูุฅุทูุงู. <br>  ุฅุฐุง ุญุฏุซ ูุฌุฃุฉ ุฃุซูุงุก ุฅุฑุณุงู ุงูุจุซ ุงููุชุนุฏุฏ ุ ูุฅู ุงููุถูู ูุชููู ุนู ุงูุฑุบุจุฉ ูู ุงุณุชูุงูู ุ ุจูุฌุฑุฏ ุฃู ูุณุชูุจู RP PIM Prune ุนูู ูุงุฌูุฉ Gi0 / 0 ุ ุซู ูุฑุณู ุนูู ุงูููุฑ PIM Register-Stop ูุจุงุดุฑุฉ ุฅูู R1 ุ ุซู ุฑุณุงูุฉ PIM Prune ุนุจุฑ ูุงุฌูุฉ Gi0 / 1.  ูุชู ุฅุฑุณุงู PIM Register-stop ุจูุงุณุทุฉ Unicast ุฅูู ุงูุนููุงู ุงูุฐู ูุตู ููู ุณุฌู PIM. <br>  ููุง ูููุง ูู ูุจู ุ ุจูุฌุฑุฏ ุฃู ูุฑุณู ุฌูุงุฒ ุงูุชูุฌูู PIM Join ุฅูู ุขุฎุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ R5 ุนูู R4 ุ ุซู ุชุชู ุฅุถุงูุฉ ุฅุฏุฎุงู ุฅูู R4: <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/9f7/730/678/9f7730678743efb4e9670d18fcd54525.jpg" alt="ุตูุฑุชู"></a> <br>  ููุจุฏุฃ ุงููููุช ูู ุฅุนุงุฏุฉ ุถุจุท ูุฐุง ุงููููุช ุ ูุฌุจ ุนูู R5 ุจุงุณุชูุฑุงุฑ PIM ุงูุงูุถูุงู ุฅูู ุงูุฑุณุงุฆู ุจุงุณุชูุฑุงุฑ ุ ูุฅูุง ูุณูุชู ุงุณุชุจุนุงุฏ R4 ูู ุงููุงุฆูุฉ ุงูุตุงุฏุฑุฉ.  ุณูู ูุฑุณู R5 ูู 60 ุฑุณุงูุฉ ูู ุฑุณุงุฆู PIM. <br>  <b>ุฃูุตุฑ ูุณุงุฑ ุดุฌุฑุฉ ุงูุชุญูู.</b> <br>  ุณูุถูู ูุงุฌูุฉ ุจูู R1 ู R5 ุ ููุฑู ููู ุณุชุชุฏูู ุญุฑูุฉ ุงููุฑูุฑ ูุน ูุฐุง ุงููููู. <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/afd/113/eb0/afd113eb01e7deda4c389fbb1a02060a.jpg" alt="ุตูุฑุชู"></a> <br>  ุฏุนูุง ูููู ุฃู ุญุฑูุฉ ุงููุฑูุฑ ุชู ุฅุฑุณุงููุง ูุงุณุชูุงููุง ููููุง ูููุฎุทุท ุงููุฏูู R1-R2-R3-R4-R5 ูููุง ูููุง ุจุชูุตูู ูุชูููู ุงููุงุฌูุฉ ุจูู R1 ู R5. <br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุชุนูู ุนูููุง ุฅุนุงุฏุฉ ุฅูุดุงุก ุฌุฏูู ุชูุฌูู ุงูุจุซ ุงูุฃุญุงุฏู ุนูู R5 ูุงูุขู ูุชู ุงููุตูู ุฅูู ุงูุดุจูุฉ 192.168.1.0/24 ูู ุฎูุงู ูุงุฌูุฉ R5 Gi0 / 2.  ุงูุขู ุ ุนูุฏูุง ูุชููู R5 ุจุซูุง ูุชุนุฏุฏูุง ุนูู ูุงุฌูุฉ Gi0 / 1 ุ ูุฏุฑู ุฃู ูุงุนุฏุฉ RPF ุบูุฑ ุฑุงุถูุฉ ูุณูููู ูู ุงูููุทูู ุฃูุซุฑ ุชููู ุจุซ ูุชุนุฏุฏ ุนูู Gi0 / 2.  ูุฌุจ ูุทุน ุงูุงุชุตุงู ูู RPT ูุฅูุดุงุก ุดุฌุฑุฉ ุฃูุตุฑ ุชุณูู ุดุฌุฑุฉ ูุณุงุฑ ุฃูุตุฑ (SPT).  ููููุงู ุจุฐูู ุ ูู ุฎูุงู Gi0 / 2 ุ ูุฑุณู PIM Join ุฅูู R1 ููุจุฏุฃ R1 ูู ุฅุฑุณุงู ุงูุจุซ ุงููุชุนุฏุฏ ูู ุฎูุงู Gi0 / 2 ุฃูุถูุง.  ูุฌุจ ุงูุขู ุฅูุบุงุก ุงุดุชุฑุงู R5 ูู RPT ุ ุญุชู ูุง ุชุญุตู ุนูู ูุณุฎุชูู.  ููููุงู ุจุฐูู ุ ูุฑุณู ุฑุณุงูุฉ Prune ุชุดูุฑ ุฅูู ุนููุงู IP ูููุตุฏุฑ ูุฅุฏุฑุงุฌ ุจุช ุฎุงุต - RPT-bit.  ูุฐุง ูุนูู ุฃููู ูุณุช ุจุญุงุฌุฉ ุฅูู ุฅุฑุณุงู ุญุฑูุฉ ูุฑูุฑ ุ ูุฏู ุดุฌุฑุฉ ุฃูุถู ููุง.  ูุฑุณู RP ุฃูุถูุง ุฑุณุงุฆู ุฅูู ุฌุงูุจ R1 PIM Prune ุ ูููู ูุง ูุฑุณู ุฑุณุงูุฉ ุฅููุงู ุงูุชุณุฌูู.  ููุฒุฉ ุฃุฎุฑู: ุณุชุฑุณู R5 ุงูุขู ุจุงุณุชูุฑุงุฑ PIM Prune ุฅูู RP ุ ุญูุซ ููุงุตู R1 ุฅุฑุณุงู PIM Register ุฅูู RP ูู ุฏูููุฉ.  RP ุญุชู ูููู ููุงู ุฃุดุฎุงุต ุฌุฏุฏ ูุฑุบุจูู ูู ุฑูุถ ูุฐุง ุงููุฑูุฑ.  ุชููู R5 ุจุฅุจูุงุบ RP ุจุฃููุง ุชูุงุตู ุงุณุชูุจุงู ุงูุจุซ ุงููุชุนุฏุฏ ุนุจุฑ SPT. <br>  <b>ุงูุจุญุซ ุงูุฏููุงูููู RP.</b> <b><br></b>  <b>ูุตูุงุนุฉ ุงูุณูุงุฑุงุช ูู RP.</b> <br>  ูุฐู ุงูุชูููุฉ ูููููุฉ ูุดุฑูุฉ ุณูุณูู ููู ููุณุช ุดุงุฆุนุฉ ุจุดูู ุฎุงุต ุ ููููุง ูุง ุชุฒุงู ุญูุฉ.  ูุชููู Auto-RP ูู ุฎุทูุชูู ุฑุฆูุณูุชูู: <br>  1) RP ูุฑุณู ุฑุณุงุฆู RP- ุงูุฅุนูุงู ุฅูู ุงูุนููุงู ุงููุญุฌูุฒ - 224.0.1.39 ุ ูุนูู ููุณู RP ุฅูุง ููุฌููุน ุฃู ููุฌููุนุงุช ูุนููุฉ.  ูุชู ุฅุฑุณุงู ูุฐู ุงูุฑุณุงูุฉ ูู ุฏูููุฉ. <br>  2) ูุทููุจ ุนุงูู ุชุนููู RP ุงูุฐู ุณูุฑุณู ุฑุณุงุฆู RP- ุฏูุณููุฑู ุงูุชู ุชุดูุฑ ุฅูู ุงููุฌููุนุงุช ุงูุชู RP ููุงุณุชูุงุน ุฅูููุง.  ูู ูุฐู ุงูุฑุณุงูุฉ ุณุชุญุฏุฏ ุฃุฌูุฒุฉ ุชูุฌูู PIM ุงูุนุงุฏูุฉ RP ูุฃููุณูู.  ูููู ุฃู ูููู ูููู ุงูุชุนููู ุฅูุง ุฌูุงุฒ ุชูุฌูู RP ููุณู ุฃู ุฃู ุฌูุงุฒ ุชูุฌูู PIM ูููุตู.  ูุชู ุฅุฑุณุงู RP-Discovery ุฅูู ุงูุนููุงู 224.0.1.40 ูุน ูุคูุช ููุฏุฉ ุฏูููุฉ ูุงุญุฏุฉ. <br>  ุฏุนูุง ููุธุฑ ุฅูู ุงูุนูููุฉ ุจูุฒูุฏ ูู ุงูุชูุงุตูู: <br>  ุชุนููู R3 ูู RP: <br><blockquote style=";text-align:right;direction:rtl">  ip pim send-rp-ูุนูู ุงูุงุณุชุฑุฌุงุน 0 ุงููุทุงู 10 </blockquote><br>  R2 ูุนุงูู ุชุนููู: <br><blockquote style=";text-align:right;direction:rtl">  ip pim send-rp-discovery loopback 0 domain 10 </blockquote><br>  ูุนูู ุฌููุน ุงูุขุฎุฑูู ุ ูุชููุน RP ูู ุฎูุงู Auto-RP: <br><blockquote style=";text-align:right;direction:rtl">  ุงูููููุฉ ุงูููุฑูุฉ ุจูู autorp ุงููุณุชูุน </blockquote><br>  ุจูุฌุฑุฏ ุชูููู R3 ุ ุณูุจุฏุฃ ุฅุฑุณุงู RP- ุงูุฅุนูุงู: <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/aae/ae2/565/aaeae25659fbacd4ba49ae4c5486f46f.jpg" alt="ุตูุฑุชู"></a> <br>  ู R2 ุ ุจุนุฏ ุฅุนุฏุงุฏ ูููู ุงูุชุนููู ุ ุณููุชุธุฑ ุฑุณุงูุฉ RP-Advertisement.  ููุท ุนูุฏูุง ูุฌุฏ RP ูุงุญุฏ ุนูู ุงูุฃูู ุณูู ูุจุฏุฃ ูู ุฅุฑุณุงู RP-Discovery: <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/fb8/e44/7c2/fb8e447c26e33ecda18cb82c5f05c938.jpg" alt="ุตูุฑุชู"></a> <br>  ูุจุงูุชุงูู ุ ุญุงููุง ุชุชููู ูุฐู ุงูููุฌูุงุช ุงูุนุงุฏูุฉ (PIM RP ุงููุณุชูุน) ูุฐู ุงูุฑุณุงูุฉ ุ ุณูุนุฑููู ููุงู ุงูุจุญุซ ุนู RP. <br>  ุฅุญุฏู ุงููุดุงูู ุงูุฑุฆูุณูุฉ ูู Auto-RP ูู ุฃูู ูู ุฃุฌู ุชููู ุฑุณุงุฆู RP-Advertis ู RP-Discovery ุ ุชุญุชุงุฌ ุฅูู ุฅุฑุณุงู PIM Join ุฅูู ุงูุนูุงููู 224.0.1.39-40 ุ ูููู ุชุฑุณู ุ ุชุญุชุงุฌ ุฅูู ูุนุฑูุฉ ููุงู ูุฌูุฏ RP.  ุงููุดููุฉ ุงูููุงุณูููุฉ ููุฏุฌุงุฌ ูุงูุจูุถ.  ูุญู ูุฐู ุงููุดููุฉ ุ ุชู ุงุฎุชุฑุงุน PIM Sparse-Dense-Mode.  ุฅุฐุง ูุงู ุฌูุงุฒ ุงูุชูุฌูู ูุง ูุนุฑู RP ุ ูุฅูู ูุนูู ูู ูุถุน ุงููุซุงูุฉ ุ ุฅุฐุง ูุงู ูุนุฑู ุ ุซู ูู ูุถุน ูุชูุฑู.  ุนูุฏูุง ูุชู ุชูููู PIM Sparse-mode ูุฃูุฑ ุฅุตุบุงุก ip pim autorp ุนูู ูุงุฌูุงุช ุฃุฌูุฒุฉ ุงูุชูุฌูู ุงูุนุงุฏูุฉ ุ ุณูุนูู ุฌูุงุฒ ุงูุชูุฌูู ูู ูุถุน ุงููุซุงูุฉ ููุท ูู ุฃุฌู ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ ูุจุงุดุฑุฉู ุจุฑูุชูููู Auto-RP (224.0.1.39-40). <br>  <b>BootStrap Router (BSR).</b> <br>  ุชุนูู ูุฐู ุงููุธููุฉ ุนูู ุบุฑุงุฑ Auto-RP.  ูุฑุณู ูู RP ุฑุณุงูุฉ ุนุงูู ุชุนููู ุ ูุงูุชู ุชุฌูุน ูุนูููุงุช ุงูุชุนููู ุซู ุชุฎุจุฑ ุฌููุน ุฃุฌูุฒุฉ ุงูุชูุฌูู ุงูุฃุฎุฑู.  ูุตููุง ุงูุนูููุฉ ุจุดูู ูุดุงุจู ูู Auto-RP: <br>  1) ุจูุฌุฑุฏ ุชูููู R3 ููุฑุดุญ ููููู RP ุ ูุฅู ุงูุฃูุฑ: <br><blockquote style=";text-align:right;direction:rtl">  IP pim rp - ูุฑุดุญ ุงูุงุณุชุฑุฌุงุน 0 </blockquote><br>  ูู ูููู R3 ุจุนูู ุฃู ุดูุก ุ ูู ุฃุฌู ุงูุจุฏุก ูู ุฅุฑุณุงู ุฑุณุงุฆู ุฎุงุตุฉ ุ ููู ูุญุชุงุฌ ุ ูู ุงูุจุฏุงูุฉ ุ ุฅูู ุงูุนุซูุฑ ุนูู ุนุงูู ุชุนููู.  ูุจุงูุชุงูู ุ ูุฅููุง ููุฑ ุฅูู ุงูุฎุทูุฉ ุงูุซุงููุฉ. <br>  2) ุชูููู R2 ูุนุงูู ุชุนููู: <br><blockquote style=";text-align:right;direction:rtl">  ุงูููููุฉ ุงูููุฑูุฉ ุจูู bsr ูุฑุดุญ ุงุณุชุฑุฌุงุน 0 </blockquote><br>  ูุจุฏุฃ R2 ูู ุฅุฑุณุงู ุฑุณุงุฆู PIM Bootstrap ุ ุญูุซ ูุดูุฑ ุฅูู ููุณู ูุนุงูู ุชุนููู: <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/729/3a4/ad1/7293a4ad164ed8342ff42ceffee9a32b.jpg" alt="ุตูุฑุชู"></a> <br>  ูุชู ุฅุฑุณุงู ูุฐู ุงูุฑุณุงูุฉ ุฅูู ุงูุนููุงู 224.0.013 ุ ูุงูุฐู ูุณุชุฎุฏูู ุจุฑูุชูููู PIM ูุฑุณุงุฆูู ุงูุฃุฎุฑู.  ูุฑุณููู ูู ูู ุงูุงุชุฌุงูุงุช ูุจุงูุชุงูู ูุง ุชูุฌุฏ ูุดููุฉ ูู ุงูุฏุฌุงุฌ ูุงูุจูุถ ุ ููุง ูุงู ุงูุญุงู ูู Auto-RP. <br>  3) ุจูุฌุฑุฏ ุฃู ูุณุชูุจู RP ุฑุณุงูุฉ ูู BSR ุงูุฎุงุตุฉ ุจุงูููุฌู ุ ุณูู ูุฑุณู ููุฑูุง ุฑุณุงูุฉ ุฃุญุงุฏูุฉ ุงูุฅุฑุณุงู ุฅูู ุนููุงู BSR ุงูุฎุงุต ุจุงูููุฌู: <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/5ed/217/8c1/5ed2178c151886f79c1e6197b9b5385b.jpg" alt="ุตูุฑุชู"></a> <br>  ุจุนุฏ ุฐูู ุ ุนูุฏูุง ูุชููู BSR ูุนูููุงุช ุญูู RP ุ ุณูุฑุณููุง ูุน ุฅุฑุณุงู ูุชุนุฏุฏ ุฅูู ุงูุนููุงู 224.0.0.13 ุ ุงูุฐู ุชุณุชูุน ุฅููู ุฌููุน ุฃุฌูุฒุฉ ุชูุฌูู PIM.  ูุฐูู ุ ูุง ููุฌุฏ ุฃู <i>ุชูุงุธุฑ ููุฃูุฑ ip pim autorp listener</i> ูุฃุฌูุฒุฉ ุงูุชูุฌูู ุงูุนุงุฏูุฉ ูู BSR. <br>  <b>Anycast RP ูุน ุจุฑูุชูููู ุงูุชุดุงู ูุตุฏุฑ ุงูุจุซ ุงููุชุนุฏุฏ (MSDP).</b> <br>  ูุณูุญ ููุง Auto-RP ู BSR ุจุชูุฒูุน ุงูุญูู ุนูู RP ููุง ููู: ุชุญุชูู ูู ูุฌููุนุฉ ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ ุนูู RP ูุดุท ูุงุญุฏ ููุท.  ูู ููุฌุญ ุงูุฃูุฑ ูู ุฌุนู ุชูุฒูุน ุงูุชุญููู ููุฌููุนุฉ ูุงุญุฏุฉ ูุชุนุฏุฏุฉ ุงูุจุซ RP.  ูููู MSDP ุจุฐูู ุนู ุทุฑูู ุฅุตุฏุงุฑ ุฃุฌูุฒุฉ ุชูุฌูู RP ุจููุณ ุนููุงู IP ุจููุงุน 255.255.255.255.  ูุชุนุฑู MSDP ุนูู ุงููุนูููุงุช ุจุงุณุชุฎุฏุงู ุฃุญุฏ ุงูุฃุณุงููุจ: ุซุงุจุช ุฃู ุชููุงุฆู RP ุฃู BSR. <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/406/51a/032/40651a032dadaaf6e0c51cbf06c3fbf3.png" alt="ุตูุฑุชู"></a> <br>  ูู ุงูุตูุฑุฉ ูุฏููุง ุชูููู RP ุชููุงุฆู ูุน MSDP.  ูุชู ุชูููู ููุง RPs ูุน ุนููุงู IP 172.16.1.1/32 ุนูู ูุงุฌูุฉ Loopback 1 ููุณุชุฎุฏู ูุฌููุน ุงููุฌููุนุงุช.  ุนูุฏูุง ูููู RP-Advertis ุจุงูุฅุนูุงู ุนู ููุงููุง ุ ูุดูุฑ ุฅูู ูุฐุง ุงูุนููุงู.  ุจุนุฏ ุชููู ุงููุนูููุงุช ุ ูุฑุณู ุนุงูู ุชุนููู Auto-RP RP-Discovery ุนู RP ุจุนููุงู 172.16.1.1/32.  ุญูู ุงูุดุจูุฉ 172.16.1.1/32 ุ ูููู ูุฃุฌูุฒุฉ ุงูุชูุฌูู ุจุงุณุชุฎุฏุงู IGP ู ุ ุนูู ุงูุชูุงูู.  ูุจุงูุชุงูู ุ ุชุทูุจ ุฃุฌูุฒุฉ ุชูุฌูู PIM ุฃู ุชุณุฌู ุชุฏููุงุช ูู RP ุงููุดุงุฑ ุฅูููุง ุนูู ุฃููุง ุงูููุฒุฉ ุงูุชุงููุฉ ุนูู ุงูุทุฑูู ุงููุคุฏู ุฅูู ุงูุดุจูุฉ 172.16.1.1/32.  ุชู ุชุตููู ุจุฑูุชูููู MSDP ููุณู ูู ุฃุฌู RPs ุฃููุณูู ูุชุจุงุฏู ุฑุณุงุฆู ูุนูููุงุช ุงูุจุซ ุงููุชุนุฏุฏ. <br>  ุงููุธุฑ ูู ุงูุทูุจูููุฌูุง ุงูุชุงููุฉ: <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/2ba/f2d/dc4/2baf2ddc4deb54ebb671a6fb52282a41.jpg" alt="ุตูุฑุชู"></a> <br>  Switch6 ุชุจุซ ุญุฑูุฉ ุงููุฑูุฑ ุฅูู ุงูุนููุงู 238.38.38.38 ูุญุชู ุงูุขู ููุท RP-R1 ูุนุฑู ุนู ุฐูู.  ุทูุจ Switch7 ู Switch8 ูุฐู ุงููุฌููุนุฉ.  ุณูู ุชุฑุณู ุฃุฌูุฒุฉ ุงูุชูุฌูู R5 ู R4 PIM Join ุฅูู R1 ู R3 ุ ุนูู ุงูุชูุงูู.  ููุงุฐุงุ  ูุดูุฑ ุงููุณุงุฑ ุญุชู 13.13.13.13 ุนูู R5 ุฅูู R1 ููููุง ูููุงุณ IGP ุ ููุง ูู R4. <br>  ูุนุฑู RP-R1 ุงูุฏูู ููุจุฏุฃ ุจุซู ูุญู R5 ุ ููู R4 ูุง ูุนุฑู ุดูุฆูุง ุนูู ุ ูุฃู R1 ููุท ูู ูุฑุณูู.  ูุฐูู ุ MSDP ูุทููุจ.  ูุญู ุชููููู ุนูู R1 ู R5: <br><blockquote style=";text-align:right;direction:rtl">  ip msdp peer 3.3.3.3 Connect-source Loopback1 on R1 </blockquote><br><blockquote style=";text-align:right;direction:rtl">  ip msdp peer 1.1.1.1 Connect-source Loopback3 ุนูู R3 </blockquote><br>  ุณูููููู ุจุฑูุน ุงูุฌูุณุฉ ุจูู ุจุนุถูู ุงูุจุนุถ ูุนูุฏ ุงุณุชูุงู ุฃู ุชูุงุฑ ุณูู ูุจูุบูู ุจู ุฅูู RP ุงููุฌุงูุฑุฉ ููู. <br>  RP-R1 ุจูุฌุฑุฏ ุฃู ูุณุชูุจู ุงูุฏูู ูู Switch6 ุ ุณูู ูุฑุณู ููุฑูุง ุฑุณุงูุฉ Unicast MSDP Source-Active - ุฑุณุงูุฉ ุชุญุชูู ุนูู ูุนูููุงุช ูุซู (Sุ G) - ูุนูููุงุช ุญูู ูุตุฏุฑ ููุฌูุฉ ุงูุฅุฑุณุงู ุงููุชุนุฏุฏ.  ุงูุขู ุ ุนูุฏูุง ุชุนุฑู RP-R3 ุฃู ูุซู ูุฐุง ุงููุตุฏุฑ ูุซู Switch6 ุ ุณูุฑุณู PIM Join ุจุงุชุฌุงู Switch6 ุนูุฏ ุชููู ุทูุจ ูู R4 ููุฐุง ุงูุชุฏูู ุ ูุชู ุชูุฌููู ุจุฌุฏูู ุงูุชูุฌูู.  ูุฐูู ุ R1 ุจุนุฏ ุชููู ูุซู PIM Join ุ ุณูุจุฏุฃ ูู ุฅุฑุณุงู ุญุฑูุฉ ุงููุฑูุฑ ูุญู RP-R3. <br>  ูุนูู MSDP ุนุจุฑ TCP ุ ูุชูุฑุณู RPs ุฑุณุงุฆู ุฅุฑุดุงุฏูุฉ ูุจุนุถูุง ุงูุจุนุถ ููุชุญูู ูู ุงูุตูุงุญูุฉ.  ุงููููุช ูู 60 ุซุงููุฉ. <br>     MSDP    ,     Keepalive  SA    - .           โ     . <br>  -   ,     . <br><br>     .     ,  : <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> CCIE Routing and Switching v5.0 Official Cert Guide, Volume 2, Fifth Edition, Narbik Kocharians, Terry Vinson. </li><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">   .  . </a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar450582/">https://habr.com/ru/post/ar450582/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar450568/index.html">ูู ุณู ูู ุชุฑูุงู ุฎุงุต ุจู. ููููุฉ ุงูุญูุธ ุฃู ุนูู ุงูุฃูู ูุญุงููุฉ (ุงูุชุญุฏูุซ: ุญูู ุชุฑูุงู ุงูุชุณูู ุงูููุฒูู)</a></li>
<li><a href="../ar450572/index.html">Samba DC ููุญุฏุฉ ุชุญูู ุซุงููุฉ ูู ูุฌุงู ุงูุฅุนูุงูุงุช ูู Windows 2012R2 ููุฌูุฏุงุช ุงูุชุฌูุงู ููุนููุงุก ุนูู Windows ู Linux</a></li>
<li><a href="../ar450574/index.html">ุฅูุดุงุก ูุนุจุฉ ููุจ ูุชุนุฏุฏุฉ .io</a></li>
<li><a href="../ar450576/index.html">ููุงุนุฏ ุฌุฏูุฏุฉ ูุนุฏู ุงููุดู ุนู ูููุชู ุฑุณูู</a></li>
<li><a href="../ar450578/index.html">ูุง ูุณูุน ุนูู ุงูููุงุกุ ูุชููู ููู ุฑููุฒ ุงูุฅุดุงุฑุงุช ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู. ุงูุฌุฒุก 2 ุ VHF</a></li>
<li><a href="../ar450586/index.html">ุงุณุชุฑุฌุงุน ุงูุฃุณูุงู - ููุชุจุฉ ุฌุฏูุฏุฉ ููุฑุฌูุน ุฑูุฑูุฉ</a></li>
<li><a href="../ar450592/index.html">ูู ุฃููุงููุง ุ ูุฏ ุชููู ุชูููุฉ ุงูุณูุฑ ุนูู ุณูุงุฑุฉ ููุฑุจุงุฆูุฉ ุฃุนูู ูู ุชูููุฉ ุณูุงุฑุฉ ุฏูุฒู</a></li>
<li><a href="../ar450594/index.html">ููุจููุงุชุดู ุญุชู ุงูุฃุฑูุงู</a></li>
<li><a href="../ar450596/index.html">11. ุชุญูู ููุทุฉ ุงูุจุฏุก R80.20. ุณูุงุณุฉ ููุน ุงูุชูุฏูุฏุงุช</a></li>
<li><a href="../ar450598/index.html">ุญูู "ุงููุทุฑ ุงูุฃุตูุฑ" ู "ูููู ุงูุจุฑุชูุงู"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>