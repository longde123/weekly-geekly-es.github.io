<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíè üë©üèø‚Äçü§ù‚Äçüë©üèΩ üë®üèº‚Äçüî¨ M√©lange d'OpenJDK et de NodeJS: interactions inter-langages et architecture verticale üç≠ üç∏ üßóüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 

 Pendant longtemps, j'ai eu l'id√©e de discuter de GraalVM avec vous, report√©e jusqu'√† ce que l'on trouve enfin l'article d'aujourd'hu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>M√©lange d'OpenJDK et de NodeJS: interactions inter-langages et architecture verticale</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/481104/">  Bonjour, Habr! <br><br>  Pendant longtemps, j'ai eu l'id√©e de discuter de <a href="https://www.graalvm.org/">GraalVM</a> avec vous, report√©e jusqu'√† ce que l'on trouve enfin l'article d'aujourd'hui, dont le sujet d√©passe s√©rieusement le cadre de l'analyse d'une machine virtuelle sp√©cifique.  L'auteur Mike Hearn d√©crit tout le paradigme de l'interaction interlangue et de la programmation multilingue (programmation polyglotte).  Vient ensuite le fameux exemple de mise √† l'√©chelle verticale et un tr√®s long article sous la coupe. <br><br><img src="https://habrastorage.org/webt/w8/rn/pl/w8rnplm8qono1q-owxp4_dcmlxk.jpeg"><br><a name="habracut"></a><br>  Cet article concerne une fa√ßon innovante d'√©crire des logiciels qui pourraient devenir populaires √† l'avenir, mais probablement pas maintenant.  L'article a un code, honn√™tement! <br><br>  Dans les temps anciens, c'est en 2015, j'ai √©crit <a href="https://blog.plan99.net/why-kotlin-is-my-next-programming-language-c25c001e26e3%3F">pourquoi Kotlin sera mon prochain langage de programmation</a> , et en 2016 j'ai √©crit sur <a href="https://blog.plan99.net/graal-truffle-134d8f28fb69">Graal et Truffle</a> : deux projets de recherche radicaux li√©s aux compilateurs qui acc√©l√®rent non seulement de mani√®re significative le travail de langages tels que Ruby , mais incarnent √©galement en r√©alit√© des interactions interlangues sans faille.  Dans ces projets, le compilateur dynamique (JIT) ou OpenJDK est remplac√© par un nouveau qui a la capacit√© de transformer automatiquement les interpr√®tes annot√©s en compilateurs JIT de pointe ... <br><br>  Revenant sur ces sujets en 2019, je voudrais vous montrer trois choses: <br><br><ol><li>  Comment utiliser la petite biblioth√®que que j'ai √©crite pour utiliser de fa√ßon presque transparente les modules NPM √† partir du code des programmes √©crits en Java ou Kotlin. </li><li>  Expliquez toutes les bonnes raisons pour lesquelles vous pourriez en avoir besoin, m√™me si vous pensez que JavaScript / Java est la pire chose au monde, sans compter l'huile de poisson. </li><li>  Explorez bri√®vement le concept d'architecture verticale qui rivalise avec la conception orient√©e microservices.  Il est situ√© √† l'intersection des derni√®res versions de GraalVM et OpenJDK, et n√©cessite le mat√©riel le plus avanc√©. </li></ol><br><h4>  Utilisation des NPM de Java et Kotlin </h4><br>  Nous prendrons seulement trois √©tapes simples: <br><br><ol><li> Prenez <a href="https://www.graalvm.org/">GraalVM</a> .  Il s'agit d'un ensemble de correctifs, construit au-dessus d'OpenJDK, qui est apparu juste √† temps: il peut ex√©cuter tout le code d'octet JVM dont vous disposez. </li><li>  Nous prenons ma bo√Æte √† outils <a href="https://github.com/mikehearn/nodejvm">NodeJVM</a> de github et l'ajoutons √† notre chemin. </li><li> Remplacez <code>java</code> sur la ligne de commande par <code>nodejvm</code> .  C'est tout! </li></ol><br>  D'accord, d'accord.  J'avoue, ici je dessine un peu et exag√®re, jusqu'√† la fin de l'article vous devrez endurer un tel style.  Bien s√ªr, tout n'est pas si simple du tout: vous devez toujours prendre le module et l'utiliser. <br><br>  Consid√©rez √† quoi il ressemble: <br><br><img src="https://habrastorage.org/webt/f3/ov/xv/f3ovxvzch5mpwwmhy8w7tqyyiaw.png"><br><br>  Exemple de code √† l'aide de NodeJVM <br><br>  Regardez bien cette photo.  Oui, c'est exactement ce √† quoi cela ressemble: Kotlin avec une cha√Æne multi-lignes int√©gr√©e dans laquelle l'auto-compl√©tion JavaScript se produit, apr√®s quoi une analyse JavaScript statique est effectu√©e et la syntaxe est correctement mise en √©vidence.  Les m√™mes op√©rations fonctionnent √† partir de Java ou d'autres langages pour la machine virtuelle Java qu'IntelliJ comprend.  Pour obtenir de telles opportunit√©s, vous devez cliquer sur le commutateur dans les param√®tres IDE (lisez le fichier Lisezmoi de NodeJVM pour savoir comment proc√©der), mais plus tard, cette fonction fonctionnera automatiquement.  Si IntelliJ parvient √† comprendre en analysant le flux de donn√©es que votre cha√Æne devrait finalement √™tre transmise aux m√©thodes <code>run</code> ou <code>eval</code> , elle sera alors trait√©e comme JS int√©gr√©e. <br><br>  Ici, je vais parler de l'API pour Kotlin, car elle est un peu plus jolie et plus pratique que l'API en Java normal, mais tout ce que je d√©cris ci-dessous peut √©galement √™tre fait √† partir de Java. <br><br>  Dans le code ci-dessus, faites attention √† plusieurs des fonctionnalit√©s suivantes: <br><br><ul><li>  Pour acc√©der √† JavaScript, vous devez utiliser le bloc <code>nodejs {}</code> .  Le fait est que JavaScript est monothread et, par cons√©quent, pour ex√©cuter des modules NPM, vous devez ¬´entrer dans le flux de n≈ìuds¬ª.  Le bloc <code>nodejs {}</code> effectue une telle synchronisation pour nous, quel que soit le thread dans lequel nous nous trouvons.  Donc, vous devez vous rappeler constamment: pour ex√©cuter n'importe quel code JS, vous devez en principe √™tre √† l'int√©rieur d'un tel bloc.  Vous pouvez le ressaisir autant de fois que vous le souhaitez, il sera donc s√ªr d'utiliser un tel bloc partout o√π nous en avons besoin.  Tous les rappels JavaScript seront ex√©cut√©s dans le thread Node, et donc, tous les autres threads se verront refuser l'acc√®s au bloc <code>nodejs</code> , donc si vous √™tes pr√©occup√© par les performances ou le rendu de l'interface graphique, √©vitez d'effectuer des op√©rations de longue dur√©e dans les rappels. </li><li>  La syntaxe <code>var x by bind(SomeObject())</code> est disponible uniquement dans le bloc <code>nodejs</code> et vous permet de vous connecter √† la m√™me variable dans la port√©e JavaScript globale.  Lorsque x change de Kotlin, il changera dans JS et vice versa.  Ici, j'attache un objet Java <code>File</code> ordinaire au monde JS. </li><li>  La m√©thode <code>eval</code> renvoie ... ce que nous lui demandons de renvoyer, cependant, √† la mani√®re d'un typage statique.  Il s'agit d'une fonction g√©n√©rique et, en sp√©cifiant simplement le type d'entit√© que nous lui attribuons, nous nous assurerons que eval convertit automatiquement l'objet JavaScript en une classe typ√©e statiquement ou en interface Java / Kotlin / Scala / etc.  Bien que cela n'ait pas √©t√© explicitement indiqu√© ci-dessus, <code>MemoryUsage</code> est un type d'interface simple que j'ai d√©fini, et il a les fonctions <code>rss()</code> et <code>heapTotal()</code> .  Ils sont mapp√©s aux propri√©t√©s JavaScript du m√™me nom, en les appliquant √† ce que vous obtenez √† partir de l'API Node <code>process.memoryUsage()</code> .  La plupart des types JS peuvent ainsi √™tre convertis en types Java ¬´normaux¬ª;  une documentation d√©taill√©e sur son fonctionnement est disponible sur le site Web de GraalVM.  Les objets r√©sultants peuvent √™tre stock√©s n'importe o√π, mais la m√©thode les appelle, bien s√ªr, doit √™tre effectu√©e dans le bloc <code>nodejs</code> . </li><li>  Les objets JavaScript peuvent √©galement √™tre consid√©r√©s comme de simples mappages d'une cha√Æne √† un objet, ce qui correspond √† bien des √©gards √† leur nature.  √Ä leur tour, de tels mappages d'une cha√Æne √† un objet peuvent √™tre ramen√©s √† quelque chose de plus fort, qui peut √™tre clairement vu dans le rappel.  Utilisez la pr√©sentation que vous pr√©f√©rez. </li><li>  Vous pouvez utiliser <code>require</code> et il recherchera les modules dans les r√©pertoires <code>node_modules</code> de la mani√®re habituelle. </li></ul><br>  L'extrait de code ci-dessus utilise le protocole <a href="https://dat.foundation/">DAT</a> , qui vous permet de vous connecter √† un r√©seau homologue √† distance ressemblant √† BitTorrent, puis de rechercher des homologues qui ont le fichier souhait√©.  J'utilise DAT comme exemple, car il est (a) d√©centralis√© et donc uniquement chic et (b) pour le meilleur ou pour le pire, son impl√©mentation de r√©f√©rence est √©crite en JavaScript.  Ce n'est pas un programme que je pourrais √©crire compl√®tement sans utiliser JS dans un d√©lai raisonnable. <br><br>  Cela peut √©galement √™tre fait √† partir de Java: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> net.plan99.nodejs.NodeJS; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Demo</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = NodeJS.runJS(() -&gt; NodeJS.eval(<span class="hljs-string"><span class="hljs-string">"return 2 + 3 + 4"</span></span>).asInt() ); System.out.println(result); } }</code> </pre> <br>  L'API Java ne vous fournit pas une liaison variable et une conversion automatique aussi agr√©ables que l'API Kotlin, mais elle est assez facile √† utiliser.  Ici, nous montrons comment nous convertissons le r√©sultat en un type entier Java ( <code>int</code> ) et <b>le</b> renvoyons ¬´√† partir¬ª du flux Node: dans ce cas, le flux Java principal n'est <b>pas le m√™me que le</b> flux NodeJS, mais nous basculons entre ces flux de mani√®re totalement transparente. <br><br>  NodeJVM est un tr√®s, tr√®s petit wrapper au-dessus de <a href="https://www.graalvm.org/">GraalVM</a> .  Il ajoute une quantit√© insignifiante de code, alors ne vous inqui√©tez pas qu'il puisse cesser d'√™tre pris en charge ou dispara√Ætre: 99,99% de tout le travail acharn√© dans ce cas est effectu√© par l'√©quipe GraalVM. <br><br>  Voici quelques id√©es √©videntes pour sugg√©rer des am√©liorations: <br><br><ul><li>  Autoriser les modules JS √† importer des modules Java par coordonn√©es Maven. </li><li>  Formuler quelques ¬´meilleures pratiques¬ª pour la javisation des modules NPM.  Par exemple, un fichier JAR peut-il contenir un r√©pertoire node_modules (en bref: non, puisque NodeJS organise toujours les E / S de fichiers √† sa mani√®re et ne sait rien des zips, long: oui, si vous essayez dur). </li><li>  Plus de langages: Python et Ruby n'ont pas besoin de la ¬´colle¬ª pour la synchronisation des threads qui est n√©cessaire dans NodeJS, vous pouvez donc simplement utiliser l' <a href="https://www.graalvm.org/docs/reference-manual/polyglot/">API GraalVM Polyglot</a> r√©guli√®re.  Mais les utilisateurs de Kotlin trouveront que les m√©thodes de cast / extension et les API pour les variables de liaison seraient bien d'avoir dans n'importe quel langage. </li><li>  Prise en charge de Windows. </li><li>  Plugin Gradle pour que les programmes puissent avoir des listes de d√©pendances dans un ensemble mixte de langues </li><li>  Int√©gration avec l'outil d' <code>native-image</code> , le soi-disant  SubstrateVM;  donc si vous n'avez pas besoin des performances compl√®tes de HotSpot au moment de l'ex√©cution, vous pouvez fournir de petits binaires li√©s statiquement dans le style de Golang. </li><li>  Peut-√™tre une sorte de convertisseur pour convertir TypeScript en Java, afin que vous puissiez utiliser <a href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped</a> et plonger rapidement dans le monde statique. </li></ul><br>  Les correctifs sont les bienvenus. <br><br><h4>  Pourquoi en auriez-vous besoin? </h4><br>  Peut-√™tre que vous pensez d√©j√†: "Wow, JavaScript, nous, d√©velopp√©s, pouvons maintenant √™tre dans l'amour mutuel, le respect mutuel et l'harmonie!" <br><br><img src="https://habrastorage.org/webt/pg/hg/_d/pghg_dqd6pgbortse6gaqdks-p8.gif"><br><br>  R√©action enthousiaste id√©alis√©e <br><br>  Il est tr√®s possible que vous soyez plus proche de ce point de vue: <br><br><img src="https://habrastorage.org/webt/j9/th/g6/j9thg6dscg5ce13x_vtpajwvjmm.jpeg"><br><br>  JavaScript et Java ne sont pas seulement des langages.  Ce sont des cultures, et rien n'est aussi doux pour les d√©veloppeurs que CULTURAL WARS! <br><br>  C'est pourquoi vous devriez au moins mettre cette page en signet pour r√©f√©rence future, m√™me si vous voulez juste saisir l'arme avec la simple pens√©e que $ OTHER_LANG envahit votre pr√©cieux √©cosyst√®me: <br><br><ul><li>  Si vous √™tes principalement un d√©veloppeur <b>Java</b> , vous avez maintenant acc√®s √† des modules JavaScript uniques qui peuvent ne pas avoir d'√©quivalent dans la JVM (par exemple, le protocole DAT).  Vous pouvez l'adorer ou le d√©tester, mais le fait demeure: beaucoup de gens √©crivent des modules NPM open source, et certains de ces modules sont tr√®s bons.  Vous pouvez √©galement r√©utiliser du code qui s'ex√©cute sur vos interfaces Web sans avoir besoin de transporteurs de langue.  Et si vous travaillez avec une base de code h√©rit√©e dans NodeJS, que vous aimeriez progressivement porter sur Java, alors tout √† coup, ce travail est grandement simplifi√©. </li><li>  Si vous √™tes principalement un d√©veloppeur <b>JavaScript</b> , vous avez maintenant un acc√®s facile √† des biblioth√®ques JVM uniques, qui en JavaScript peuvent ne pas avoir d'√©quivalent direct (par exemple <a href="http://lucene.apache.org/">Lucene</a> , <a href="https://github.com/OpenHFT/Chronicle-Map">Chronicle Map</a> ) ou peuvent proposer uniquement des analogues mal document√©s, immatures ou moins productifs .  Si vous voulez vous passer de HTML dans votre prochain projet, vous pouvez explorer le <a href="https://blog.plan99.net/reacts-tictactoe-tutorial-in-kotlin-javafx-715c75a947d2">cadre GUI pour une personne blanche</a> .  Vous avez √©galement acc√®s √† de <b>nombreux autres langages</b> , par exemple, les objets JVM Ruby et R. peuvent √™tre partag√©s entre les employ√©s de NodeJS, en <a href="https://medium.com/graalvm/multi-threaded-java-javascript-language-interoperability-in-graalvm-2f19c1f9c37b">profitant du multithreading dans la m√©moire partag√©e</a> , si, selon votre profileur, cette opportunit√© peut √™tre utilis√©e.  Et si vous travaillez avec une base h√©rit√©e de code Java que vous aimeriez progressivement porter sur NodeJS, alors tout √† coup, ce travail est grandement simplifi√©. </li><li>  Si vous <b>apprenez toutes les langues en m√™me temps</b> , vous pouvez faire une programmation multilingue.  Les programmeurs polyglottes ne sont pas des haineux, au contraire, ils peuvent se faire des amis avec le meilleur code disponible, quelle que soit leur culture.  Ils sont comme des √©tudiants de la renaissance qui ont imm√©diatement √©tudi√© l'anglais, le latin fran√ßais ... toutes ces langues sont une pour eux.  Ils m√©langent les biblioth√®ques Java, Kotlin, JavaScript, Scala, Python, Ruby, Lisp, R, Rust, Smalltalk, C / C ++ et m√™me FORTRAN, assemblant purement un entier soign√© au-dessus de GraalVM. </li><li>  Enfin, si vous √™tes un utilisateur satisfait de NodeJS et que d'autres langues ne vous d√©rangent pas du tout, vous voudrez peut-√™tre toujours exp√©rimenter GraalVM. </li></ul><br>  NodeJS est bas√© sur V8, une machine virtuelle con√ßue pour utiliser des scripts monothreads de courte dur√©e qui s'ex√©cutent sur des PC et des smartphones.  C'est exactement ce qui est financ√© par Google, mais V8 est √©galement utilis√© sur les serveurs.  OpenJDK est optimis√© depuis des d√©cennies sur les serveurs.  Les derni√®res versions contiennent <a href="https://wiki.openjdk.java.net/display/zgc/Main">ZGC</a> et <a href="https://wiki.openjdk.java.net/display/shenandoah/Main">Shenandoah</a> , deux garbage collector qui permettent une latence minimale, des outils qui vous permettent de consommer des t√©raoctets de m√©moire, avec seulement quelques millisecondes de pauses.  Par cons√©quent, vous pouvez m√™me √™tre en mesure de r√©duire les co√ªts en utilisant l' <a href="https://www.graalvm.org/docs/reference-manual/tools/">excellente infrastructure et les outils GraalVM</a> , sans m√™me abandonner le monolinguisme. <br><br><img src="https://habrastorage.org/webt/tn/4y/68/tn4y68r7cmq6z9tpheeuwafpncy.png"><br><br>  Afficher le tas contenant des objets Ruby <br><br><img src="https://habrastorage.org/webt/ko/vc/jj/kovcjjmwvhnayjpfix25cs-rx48.png"><br><br>  Mesures du processeur disponibles via HTTP <br><br><img src="https://habrastorage.org/webt/sb/fq/qy/sbfqqy9mzuppcp-vnro8tdscc_o.png"><br><br>  Diagnostic expert ultra-profond d√©montrant comment le code a √©t√© optimis√© <br><br><h4>  Architecture verticale </h4><br>  Nous arrivons au dernier sujet que je voudrais aborder dans cet article. <br><br>  Parfois, je dis √† quelqu'un tout ce qui pr√©c√®de, mais ils me r√©pondent: ¬´ <i>C'est g√©nial, mais tous ces microservices ne nous donnent-ils pas tout cela?</i>  <i>Pourquoi tout ce bruit?</i>  Il est difficile de comprendre pourquoi j'aime tant la programmation multilingue, mais le fait est qu'il me semble que les architectures de microservices ont besoin d'une concurrence saine. <br><br>  Tout d'abord, oui, vous devez parfois piloter de nombreux services sur une vari√©t√© de serveurs qui doivent interagir.  J'ai travaill√© pendant plus de 7 ans chez Google, presque quotidiennement avec leur orchestrateur de conteneurs Borg.  J'ai √©crit des ¬´microservices¬ª, m√™me si nous ne les appelions m√™me pas, et je les ai consomm√©s.  Sinon, il n'y avait aucun moyen de faire face, car nos charges de travail n√©cessitaient la participation de milliers de machines! <br><br>  Cependant, pour de telles architectures, vous devez payer un prix √©lev√©: <br><br><ol><li>  <b>S√©rialisation</b>  Il en r√©sulte imm√©diatement une diminution de la productivit√©, mais, plus important encore, vous oblige √† aligner en permanence vos structures de donn√©es au moins partiellement typ√©es et optimis√©es, en les transformant en arbres simples.  Lorsque vous utilisez JSON, vous perdez la possibilit√© de faire des choses simples, par exemple, pour avoir de nombreux petits objets qui pointent vers plusieurs gros objets (pour √©viter la r√©p√©tition, vous devez utiliser vos propres index). </li><li>  <b>Versioning</b>  C'est compliqu√©.  Les universit√©s n'enseignent souvent pas cette discipline difficile mais quotidienne dans le domaine du g√©nie logiciel et m√™me si vous pensez que vous avez bien compris la diff√©rence entre la compatibilit√© directe et la compatibilit√© descendante, m√™me si vous √™tes s√ªr de comprendre ce qu'est le roulement en plusieurs √©tapes, pouvez-vous garantir que tout cela sera compris par la personne qui vous remplacera?  Effectuez-vous correctement les tests d'int√©gration pour diverses combinaisons de versions qui peuvent se d√©velopper lors du d√©ploiement non atomique?  Dans les architectures distribu√©es, j'ai vu plusieurs v√©ritables catastrophes qui se r√©sumaient au fait que les versions se sont √©gar√©es. </li><li>  <b>Coh√©rence</b> .  La r√©alisation d'op√©rations atomiques sur le m√™me serveur est assez simple.  Il est beaucoup plus difficile de garantir que les utilisateurs dans n'importe quelle situation voient une image absolument coh√©rente lorsque de nombreuses machines sont impliqu√©es dans le syst√®me, en particulier si le partage des donn√©es se produit entre elles.  C'est pourquoi, historiquement, les moteurs de bases de donn√©es relationnelles ne peuvent pas se targuer d'une bonne √©volutivit√©.  Permettez-moi de vous dire: les <a href="https://www.piter.com/collection/all/product/site-reliability-engineering-nadezhnost-i-bezotkaznost-kak-v-google">meilleurs ing√©nieurs de Google ont pass√© des d√©cennies √†</a> essayer de simplifier la programmation distribu√©e pour leurs √©quipes, √† essayer de la construire pour qu'elle ressemble davantage √† une programmation traditionnelle. </li><li>  <b>R√©impl√©mentation</b> .  √âtant donn√© que les appels de proc√©dure √† distance sont co√ªteux, vous ne passerez pas beaucoup d'appels de ce type et il n'y a plus rien √† faire pour r√©soudre certains probl√®mes, mais r√©impl√©mentez le code.  Google a cr√©√© des biblioth√®ques pour travailler avec plusieurs langues √† la fois, con√ßues pour appeler des proc√©dures √† distance;  Il existe √©galement des situations dans lesquelles ce code doit √™tre r√©√©crit √† partir de z√©ro. </li></ol><br>  Alors, quelle est l'alternative? <br><br>  Autrement dit, beaucoup de fer.  Cette m√©thode peut sembler absurdement grand-p√®re, mais gardez √† l'esprit que le co√ªt du mat√©riel diminue constamment, de nombreuses charges de travail ne sont pas appel√©es ¬´globales globales¬ª, et votre intuition sur ce que vous devez d√©penser peut vous √©chouer. <br><br>  Voici une <a href="http://www.deltaserverstore.com/dell-r910.html">liste</a> de <a href="http://www.deltaserverstore.com/dell-r910.html">prix</a> relativement r√©cente d'un fabricant canadien: <br><br><img src="https://habrastorage.org/webt/_2/ko/qq/_2koqq_9uanqjed7ebsfcwjzyqy.png"><br><br>  Une machine de quarante-nucl√©aire avec un t√©raoctet de RAM et presque un t√©raoctet sur le disque dur co√ªte aujourd'hui environ 6 000 $.  Imaginez combien de temps pendant toute la dur√©e de vie du projet votre √©quipe devra r√©soudre les probl√®mes avec les syst√®mes distribu√©s, et combien cela vous co√ªtera. <br><br>  Oui, mais toutes les entreprises d'aujourd'hui ne sont-elles pas bas√©es sur le Web? <br><br>  Bref, non. <br><br>  Le monde regorge d'entreprises pour lesquelles ce qui suit est vrai: <br><br><ul><li>  Ils op√®rent sur des march√©s stables. </li><li>  Ils gagnent en vendant des choses. </li><li>  Par cons√©quent, leur client√®le est de plusieurs dizaines de milliers √† plusieurs dizaines de millions de personnes, mais pas par milliards. </li><li>  Leurs ensembles de donn√©es sont g√©n√©ralement associ√©s √† leurs propres clients et produits. </li></ul><br>  Un bon exemple d'une telle entreprise est une banque.  Les banques ne connaissent pas "d'hyper croissance", ne deviennent pas "virales".  Leur mod√®le de croissance est mod√©r√© et pr√©visible, si l'on suppose qu'ils ont une croissance quelconque (les banques sont r√©gionales et op√®rent g√©n√©ralement sur des march√©s satur√©s).  La client√®le de la plus grande banque am√©ricaine est d'environ 50 millions d'utilisateurs et, bien s√ªr, ne double pas tous les six mois.  Dans ce cas, la situation n'est pas du tout la m√™me qu'avec Instagram.  Faut-il donc s'√©tonner que le mainframe soit toujours bas√© sur un syst√®me bancaire typique?  Bien s√ªr, il en va de m√™me pour les entreprises de logistique, les entreprises manufacturi√®res, etc.  C'est le pain et le beurre de notre √©conomie. <br><br>  Dans ces entreprises, il est tout √† fait possible que les besoins de chaque application sp√©cifique qui leur est li√©e puissent toujours √™tre satisfaits avec les ressources d'une seule grande machine.  Oui, m√™me aujourd'hui, certains sites publics tiennent sur une seule machine.  En 2015, Maciej Tseglovsky a donn√© une conf√©rence tr√®s int√©ressante sur ¬´ <a href="https://idlewords.com/talks/website_obesity.htm">La crise de l'ob√©sit√© des sites</a> ¬ª et a not√© que son propre site avec service de bookmarking √©tait rentable, mais son concurrent a post√© le m√™me site sur AWS - et perdu, uniquement en raison de co√ªts diff√©rents √©quipement et diverses hypoth√®ses sur la complexit√©.  Dans une √©tude sur la comparaison de <a href="https://blog.codinghorror.com/scaling-up-vs-scaling-out-hidden-costs/">la mise √† l'√©chelle verticale et horizontale,</a> il a √©t√© constat√© que PlentyOfFish fonctionne sur environ un m√©gaserveur (l'article date de 2009, vous pouvez donc ignorer les prix des √©quipements qui y sont r√©pertori√©s).  L'auteur fait quelques calculs et montre qu'un serveur n'est pas aussi stupide que cela puisse para√Ætre.  Enfin, si vous envisagez Hadoop et le Big Data, consultez cet <a href="https://www.researchgate.net/publication/261862149_Scale-up_vs_scale-out_for_Hadoop_time_to_rethink">article de recherche Microsoft 2013,</a> qui d√©montre que de nombreuses charges de travail Hadoop de Microsoft, Yahoo et Facebook s'ex√©cutent en r√©alit√© beaucoup plus rapidement et plus efficacement sur une seule grande machine, plut√¥t que sur un cluster.  Et c'√©tait ainsi il y a 6 ans!  Il est probable que, depuis lors, l'accent mis sur la mise √† l'√©chelle verticale soit devenu encore plus prononc√©. <br><br>  Cependant, les √©conomies r√©elles ne sont pas du tout li√©es √† l'√©quipement, mais √† l'optimisation du temps de travail extr√™mement co√ªteux des ing√©nieurs, qui est consacr√© √† la cr√©ation d'un tas de microservices minuscules qui doivent √™tre mis √† l'√©chelle horizontalement avec une gestion de la demande √©lastique.  Une telle approche de l'ing√©nierie est risqu√©e et prend du temps, m√™me si vous utilisez les derniers jouets disponibles dans le cloud.  Vous pouvez perdre SQL, les transactions SOLIDES, le profilage unifi√© et vous perdrez certainement des informations telles que le tra√ßage de pile intersyst√®me.  La s√©curit√© de type dispara√Ætra chaque fois que vous irez au-del√† du serveur.  Vous recevrez des appels √† des fonctions qui peuvent expirer, une surcharge excessive associ√©e √† une compilation dynamique, des √©checs de contre-pression inattendus, des moteurs d'orchestration complexes avec des formats de configuration sophistiqu√©s, et ... oh, les souvenirs sont vraiment inond√©s.  C'√©tait int√©ressant de travailler avec tout cela lorsque j'avais l'architecture propri√©taire de Google et un budget d'ing√©nierie √©pais √† ma disposition, mais aujourd'hui j'oserais r√©p√©ter cela uniquement si je n'avais pas d'autre choix. <br><br>  Selon l'exp√©rience, il est impossible de travailler avec de tr√®s grands serveurs qui fonctionnent sur la collecte des ordures - le fait est que la collecte des ordures elle-m√™me √©tait une technologie peu d√©velopp√©e, et donc ce sujet est rest√© longtemps purement acad√©mique.  Dans tous les cas, vous deviez piloter plusieurs serveurs √† la fois. ,   ZGC  Shenandoah,   ,   80          ‚Äì      .    ,     -,       ‚Äì  ,     . <br><br> ,         ?         ‚Äì   ,        ?   ‚Äì    :  ,      ,        ‚Ä¶    . <br><br><h4>  Conclusion </h4><br> NodeJVM ‚Äì  ,    GraalVM.     NPM    Java/Kotlin,   JS  ,    Kotlin   JavaScript,      JS  ,   V8. <br><br>     ,    JS  Java,    Java  JS         . <br><br>        ,           4 ,     ‚Äì      ‚Äì  ,            .             . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr481104/">https://habr.com/ru/post/fr481104/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr481086/index.html">Vivaldi 2.10 - Agent secret</a></li>
<li><a href="../fr481092/index.html">La chose la plus int√©ressante en PHP 8</a></li>
<li><a href="../fr481094/index.html">√Ä propos des √©couteurs sans fil JBL avec √©nergie solaire et leurs d√©fauts</a></li>
<li><a href="../fr481100/index.html">Angular 9, quoi de neuf?</a></li>
<li><a href="../fr481102/index.html">Bo√Æte √† outils multiplateforme .NET UI version AvaloniaUI 0.9</a></li>
<li><a href="../fr481106/index.html">Comment LANIT a tourn√© une sitcom DIY dans son bureau</a></li>
<li><a href="../fr481110/index.html">Playme VEGA Review: Enregistreur combin√© avec √©cran tactile et support miroir</a></li>
<li><a href="../fr481112/index.html">Que dira le ¬´chewing-gum¬ª √¢g√© de 5700 ans de la personne qui l'a m√¢ch√©?</a></li>
<li><a href="../fr481114/index.html">Seccomp at Kubernetes: 7 choses que vous devez savoir depuis le d√©but</a></li>
<li><a href="../fr481116/index.html">Publier automatiquement des messages de la communaut√© VKontakte sur Discord</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>