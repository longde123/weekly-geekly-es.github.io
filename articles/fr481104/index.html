<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💏 👩🏿‍🤝‍👩🏽 👨🏼‍🔬 Mélange d'OpenJDK et de NodeJS: interactions inter-langages et architecture verticale 🍭 🍸 🧗🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 

 Pendant longtemps, j'ai eu l'idée de discuter de GraalVM avec vous, reportée jusqu'à ce que l'on trouve enfin l'article d'aujourd'hu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mélange d'OpenJDK et de NodeJS: interactions inter-langages et architecture verticale</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/481104/">  Bonjour, Habr! <br><br>  Pendant longtemps, j'ai eu l'idée de discuter de <a href="https://www.graalvm.org/">GraalVM</a> avec vous, reportée jusqu'à ce que l'on trouve enfin l'article d'aujourd'hui, dont le sujet dépasse sérieusement le cadre de l'analyse d'une machine virtuelle spécifique.  L'auteur Mike Hearn décrit tout le paradigme de l'interaction interlangue et de la programmation multilingue (programmation polyglotte).  Vient ensuite le fameux exemple de mise à l'échelle verticale et un très long article sous la coupe. <br><br><img src="https://habrastorage.org/webt/w8/rn/pl/w8rnplm8qono1q-owxp4_dcmlxk.jpeg"><br><a name="habracut"></a><br>  Cet article concerne une façon innovante d'écrire des logiciels qui pourraient devenir populaires à l'avenir, mais probablement pas maintenant.  L'article a un code, honnêtement! <br><br>  Dans les temps anciens, c'est en 2015, j'ai écrit <a href="https://blog.plan99.net/why-kotlin-is-my-next-programming-language-c25c001e26e3%3F">pourquoi Kotlin sera mon prochain langage de programmation</a> , et en 2016 j'ai écrit sur <a href="https://blog.plan99.net/graal-truffle-134d8f28fb69">Graal et Truffle</a> : deux projets de recherche radicaux liés aux compilateurs qui accélèrent non seulement de manière significative le travail de langages tels que Ruby , mais incarnent également en réalité des interactions interlangues sans faille.  Dans ces projets, le compilateur dynamique (JIT) ou OpenJDK est remplacé par un nouveau qui a la capacité de transformer automatiquement les interprètes annotés en compilateurs JIT de pointe ... <br><br>  Revenant sur ces sujets en 2019, je voudrais vous montrer trois choses: <br><br><ol><li>  Comment utiliser la petite bibliothèque que j'ai écrite pour utiliser de façon presque transparente les modules NPM à partir du code des programmes écrits en Java ou Kotlin. </li><li>  Expliquez toutes les bonnes raisons pour lesquelles vous pourriez en avoir besoin, même si vous pensez que JavaScript / Java est la pire chose au monde, sans compter l'huile de poisson. </li><li>  Explorez brièvement le concept d'architecture verticale qui rivalise avec la conception orientée microservices.  Il est situé à l'intersection des dernières versions de GraalVM et OpenJDK, et nécessite le matériel le plus avancé. </li></ol><br><h4>  Utilisation des NPM de Java et Kotlin </h4><br>  Nous prendrons seulement trois étapes simples: <br><br><ol><li> Prenez <a href="https://www.graalvm.org/">GraalVM</a> .  Il s'agit d'un ensemble de correctifs, construit au-dessus d'OpenJDK, qui est apparu juste à temps: il peut exécuter tout le code d'octet JVM dont vous disposez. </li><li>  Nous prenons ma boîte à outils <a href="https://github.com/mikehearn/nodejvm">NodeJVM</a> de github et l'ajoutons à notre chemin. </li><li> Remplacez <code>java</code> sur la ligne de commande par <code>nodejvm</code> .  C'est tout! </li></ol><br>  D'accord, d'accord.  J'avoue, ici je dessine un peu et exagère, jusqu'à la fin de l'article vous devrez endurer un tel style.  Bien sûr, tout n'est pas si simple du tout: vous devez toujours prendre le module et l'utiliser. <br><br>  Considérez à quoi il ressemble: <br><br><img src="https://habrastorage.org/webt/f3/ov/xv/f3ovxvzch5mpwwmhy8w7tqyyiaw.png"><br><br>  Exemple de code à l'aide de NodeJVM <br><br>  Regardez bien cette photo.  Oui, c'est exactement ce à quoi cela ressemble: Kotlin avec une chaîne multi-lignes intégrée dans laquelle l'auto-complétion JavaScript se produit, après quoi une analyse JavaScript statique est effectuée et la syntaxe est correctement mise en évidence.  Les mêmes opérations fonctionnent à partir de Java ou d'autres langages pour la machine virtuelle Java qu'IntelliJ comprend.  Pour obtenir de telles opportunités, vous devez cliquer sur le commutateur dans les paramètres IDE (lisez le fichier Lisezmoi de NodeJVM pour savoir comment procéder), mais plus tard, cette fonction fonctionnera automatiquement.  Si IntelliJ parvient à comprendre en analysant le flux de données que votre chaîne devrait finalement être transmise aux méthodes <code>run</code> ou <code>eval</code> , elle sera alors traitée comme JS intégrée. <br><br>  Ici, je vais parler de l'API pour Kotlin, car elle est un peu plus jolie et plus pratique que l'API en Java normal, mais tout ce que je décris ci-dessous peut également être fait à partir de Java. <br><br>  Dans le code ci-dessus, faites attention à plusieurs des fonctionnalités suivantes: <br><br><ul><li>  Pour accéder à JavaScript, vous devez utiliser le bloc <code>nodejs {}</code> .  Le fait est que JavaScript est monothread et, par conséquent, pour exécuter des modules NPM, vous devez «entrer dans le flux de nœuds».  Le bloc <code>nodejs {}</code> effectue une telle synchronisation pour nous, quel que soit le thread dans lequel nous nous trouvons.  Donc, vous devez vous rappeler constamment: pour exécuter n'importe quel code JS, vous devez en principe être à l'intérieur d'un tel bloc.  Vous pouvez le ressaisir autant de fois que vous le souhaitez, il sera donc sûr d'utiliser un tel bloc partout où nous en avons besoin.  Tous les rappels JavaScript seront exécutés dans le thread Node, et donc, tous les autres threads se verront refuser l'accès au bloc <code>nodejs</code> , donc si vous êtes préoccupé par les performances ou le rendu de l'interface graphique, évitez d'effectuer des opérations de longue durée dans les rappels. </li><li>  La syntaxe <code>var x by bind(SomeObject())</code> est disponible uniquement dans le bloc <code>nodejs</code> et vous permet de vous connecter à la même variable dans la portée JavaScript globale.  Lorsque x change de Kotlin, il changera dans JS et vice versa.  Ici, j'attache un objet Java <code>File</code> ordinaire au monde JS. </li><li>  La méthode <code>eval</code> renvoie ... ce que nous lui demandons de renvoyer, cependant, à la manière d'un typage statique.  Il s'agit d'une fonction générique et, en spécifiant simplement le type d'entité que nous lui attribuons, nous nous assurerons que eval convertit automatiquement l'objet JavaScript en une classe typée statiquement ou en interface Java / Kotlin / Scala / etc.  Bien que cela n'ait pas été explicitement indiqué ci-dessus, <code>MemoryUsage</code> est un type d'interface simple que j'ai défini, et il a les fonctions <code>rss()</code> et <code>heapTotal()</code> .  Ils sont mappés aux propriétés JavaScript du même nom, en les appliquant à ce que vous obtenez à partir de l'API Node <code>process.memoryUsage()</code> .  La plupart des types JS peuvent ainsi être convertis en types Java «normaux»;  une documentation détaillée sur son fonctionnement est disponible sur le site Web de GraalVM.  Les objets résultants peuvent être stockés n'importe où, mais la méthode les appelle, bien sûr, doit être effectuée dans le bloc <code>nodejs</code> . </li><li>  Les objets JavaScript peuvent également être considérés comme de simples mappages d'une chaîne à un objet, ce qui correspond à bien des égards à leur nature.  À leur tour, de tels mappages d'une chaîne à un objet peuvent être ramenés à quelque chose de plus fort, qui peut être clairement vu dans le rappel.  Utilisez la présentation que vous préférez. </li><li>  Vous pouvez utiliser <code>require</code> et il recherchera les modules dans les répertoires <code>node_modules</code> de la manière habituelle. </li></ul><br>  L'extrait de code ci-dessus utilise le protocole <a href="https://dat.foundation/">DAT</a> , qui vous permet de vous connecter à un réseau homologue à distance ressemblant à BitTorrent, puis de rechercher des homologues qui ont le fichier souhaité.  J'utilise DAT comme exemple, car il est (a) décentralisé et donc uniquement chic et (b) pour le meilleur ou pour le pire, son implémentation de référence est écrite en JavaScript.  Ce n'est pas un programme que je pourrais écrire complètement sans utiliser JS dans un délai raisonnable. <br><br>  Cela peut également être fait à partir de Java: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> net.plan99.nodejs.NodeJS; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Demo</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = NodeJS.runJS(() -&gt; NodeJS.eval(<span class="hljs-string"><span class="hljs-string">"return 2 + 3 + 4"</span></span>).asInt() ); System.out.println(result); } }</code> </pre> <br>  L'API Java ne vous fournit pas une liaison variable et une conversion automatique aussi agréables que l'API Kotlin, mais elle est assez facile à utiliser.  Ici, nous montrons comment nous convertissons le résultat en un type entier Java ( <code>int</code> ) et <b>le</b> renvoyons «à partir» du flux Node: dans ce cas, le flux Java principal n'est <b>pas le même que le</b> flux NodeJS, mais nous basculons entre ces flux de manière totalement transparente. <br><br>  NodeJVM est un très, très petit wrapper au-dessus de <a href="https://www.graalvm.org/">GraalVM</a> .  Il ajoute une quantité insignifiante de code, alors ne vous inquiétez pas qu'il puisse cesser d'être pris en charge ou disparaître: 99,99% de tout le travail acharné dans ce cas est effectué par l'équipe GraalVM. <br><br>  Voici quelques idées évidentes pour suggérer des améliorations: <br><br><ul><li>  Autoriser les modules JS à importer des modules Java par coordonnées Maven. </li><li>  Formuler quelques «meilleures pratiques» pour la javisation des modules NPM.  Par exemple, un fichier JAR peut-il contenir un répertoire node_modules (en bref: non, puisque NodeJS organise toujours les E / S de fichiers à sa manière et ne sait rien des zips, long: oui, si vous essayez dur). </li><li>  Plus de langages: Python et Ruby n'ont pas besoin de la «colle» pour la synchronisation des threads qui est nécessaire dans NodeJS, vous pouvez donc simplement utiliser l' <a href="https://www.graalvm.org/docs/reference-manual/polyglot/">API GraalVM Polyglot</a> régulière.  Mais les utilisateurs de Kotlin trouveront que les méthodes de cast / extension et les API pour les variables de liaison seraient bien d'avoir dans n'importe quel langage. </li><li>  Prise en charge de Windows. </li><li>  Plugin Gradle pour que les programmes puissent avoir des listes de dépendances dans un ensemble mixte de langues </li><li>  Intégration avec l'outil d' <code>native-image</code> , le soi-disant  SubstrateVM;  donc si vous n'avez pas besoin des performances complètes de HotSpot au moment de l'exécution, vous pouvez fournir de petits binaires liés statiquement dans le style de Golang. </li><li>  Peut-être une sorte de convertisseur pour convertir TypeScript en Java, afin que vous puissiez utiliser <a href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped</a> et plonger rapidement dans le monde statique. </li></ul><br>  Les correctifs sont les bienvenus. <br><br><h4>  Pourquoi en auriez-vous besoin? </h4><br>  Peut-être que vous pensez déjà: "Wow, JavaScript, nous, développés, pouvons maintenant être dans l'amour mutuel, le respect mutuel et l'harmonie!" <br><br><img src="https://habrastorage.org/webt/pg/hg/_d/pghg_dqd6pgbortse6gaqdks-p8.gif"><br><br>  Réaction enthousiaste idéalisée <br><br>  Il est très possible que vous soyez plus proche de ce point de vue: <br><br><img src="https://habrastorage.org/webt/j9/th/g6/j9thg6dscg5ce13x_vtpajwvjmm.jpeg"><br><br>  JavaScript et Java ne sont pas seulement des langages.  Ce sont des cultures, et rien n'est aussi doux pour les développeurs que CULTURAL WARS! <br><br>  C'est pourquoi vous devriez au moins mettre cette page en signet pour référence future, même si vous voulez juste saisir l'arme avec la simple pensée que $ OTHER_LANG envahit votre précieux écosystème: <br><br><ul><li>  Si vous êtes principalement un développeur <b>Java</b> , vous avez maintenant accès à des modules JavaScript uniques qui peuvent ne pas avoir d'équivalent dans la JVM (par exemple, le protocole DAT).  Vous pouvez l'adorer ou le détester, mais le fait demeure: beaucoup de gens écrivent des modules NPM open source, et certains de ces modules sont très bons.  Vous pouvez également réutiliser du code qui s'exécute sur vos interfaces Web sans avoir besoin de transporteurs de langue.  Et si vous travaillez avec une base de code héritée dans NodeJS, que vous aimeriez progressivement porter sur Java, alors tout à coup, ce travail est grandement simplifié. </li><li>  Si vous êtes principalement un développeur <b>JavaScript</b> , vous avez maintenant un accès facile à des bibliothèques JVM uniques, qui en JavaScript peuvent ne pas avoir d'équivalent direct (par exemple <a href="http://lucene.apache.org/">Lucene</a> , <a href="https://github.com/OpenHFT/Chronicle-Map">Chronicle Map</a> ) ou peuvent proposer uniquement des analogues mal documentés, immatures ou moins productifs .  Si vous voulez vous passer de HTML dans votre prochain projet, vous pouvez explorer le <a href="https://blog.plan99.net/reacts-tictactoe-tutorial-in-kotlin-javafx-715c75a947d2">cadre GUI pour une personne blanche</a> .  Vous avez également accès à de <b>nombreux autres langages</b> , par exemple, les objets JVM Ruby et R. peuvent être partagés entre les employés de NodeJS, en <a href="https://medium.com/graalvm/multi-threaded-java-javascript-language-interoperability-in-graalvm-2f19c1f9c37b">profitant du multithreading dans la mémoire partagée</a> , si, selon votre profileur, cette opportunité peut être utilisée.  Et si vous travaillez avec une base héritée de code Java que vous aimeriez progressivement porter sur NodeJS, alors tout à coup, ce travail est grandement simplifié. </li><li>  Si vous <b>apprenez toutes les langues en même temps</b> , vous pouvez faire une programmation multilingue.  Les programmeurs polyglottes ne sont pas des haineux, au contraire, ils peuvent se faire des amis avec le meilleur code disponible, quelle que soit leur culture.  Ils sont comme des étudiants de la renaissance qui ont immédiatement étudié l'anglais, le latin français ... toutes ces langues sont une pour eux.  Ils mélangent les bibliothèques Java, Kotlin, JavaScript, Scala, Python, Ruby, Lisp, R, Rust, Smalltalk, C / C ++ et même FORTRAN, assemblant purement un entier soigné au-dessus de GraalVM. </li><li>  Enfin, si vous êtes un utilisateur satisfait de NodeJS et que d'autres langues ne vous dérangent pas du tout, vous voudrez peut-être toujours expérimenter GraalVM. </li></ul><br>  NodeJS est basé sur V8, une machine virtuelle conçue pour utiliser des scripts monothreads de courte durée qui s'exécutent sur des PC et des smartphones.  C'est exactement ce qui est financé par Google, mais V8 est également utilisé sur les serveurs.  OpenJDK est optimisé depuis des décennies sur les serveurs.  Les dernières versions contiennent <a href="https://wiki.openjdk.java.net/display/zgc/Main">ZGC</a> et <a href="https://wiki.openjdk.java.net/display/shenandoah/Main">Shenandoah</a> , deux garbage collector qui permettent une latence minimale, des outils qui vous permettent de consommer des téraoctets de mémoire, avec seulement quelques millisecondes de pauses.  Par conséquent, vous pouvez même être en mesure de réduire les coûts en utilisant l' <a href="https://www.graalvm.org/docs/reference-manual/tools/">excellente infrastructure et les outils GraalVM</a> , sans même abandonner le monolinguisme. <br><br><img src="https://habrastorage.org/webt/tn/4y/68/tn4y68r7cmq6z9tpheeuwafpncy.png"><br><br>  Afficher le tas contenant des objets Ruby <br><br><img src="https://habrastorage.org/webt/ko/vc/jj/kovcjjmwvhnayjpfix25cs-rx48.png"><br><br>  Mesures du processeur disponibles via HTTP <br><br><img src="https://habrastorage.org/webt/sb/fq/qy/sbfqqy9mzuppcp-vnro8tdscc_o.png"><br><br>  Diagnostic expert ultra-profond démontrant comment le code a été optimisé <br><br><h4>  Architecture verticale </h4><br>  Nous arrivons au dernier sujet que je voudrais aborder dans cet article. <br><br>  Parfois, je dis à quelqu'un tout ce qui précède, mais ils me répondent: « <i>C'est génial, mais tous ces microservices ne nous donnent-ils pas tout cela?</i>  <i>Pourquoi tout ce bruit?</i>  Il est difficile de comprendre pourquoi j'aime tant la programmation multilingue, mais le fait est qu'il me semble que les architectures de microservices ont besoin d'une concurrence saine. <br><br>  Tout d'abord, oui, vous devez parfois piloter de nombreux services sur une variété de serveurs qui doivent interagir.  J'ai travaillé pendant plus de 7 ans chez Google, presque quotidiennement avec leur orchestrateur de conteneurs Borg.  J'ai écrit des «microservices», même si nous ne les appelions même pas, et je les ai consommés.  Sinon, il n'y avait aucun moyen de faire face, car nos charges de travail nécessitaient la participation de milliers de machines! <br><br>  Cependant, pour de telles architectures, vous devez payer un prix élevé: <br><br><ol><li>  <b>Sérialisation</b>  Il en résulte immédiatement une diminution de la productivité, mais, plus important encore, vous oblige à aligner en permanence vos structures de données au moins partiellement typées et optimisées, en les transformant en arbres simples.  Lorsque vous utilisez JSON, vous perdez la possibilité de faire des choses simples, par exemple, pour avoir de nombreux petits objets qui pointent vers plusieurs gros objets (pour éviter la répétition, vous devez utiliser vos propres index). </li><li>  <b>Versioning</b>  C'est compliqué.  Les universités n'enseignent souvent pas cette discipline difficile mais quotidienne dans le domaine du génie logiciel et même si vous pensez que vous avez bien compris la différence entre la compatibilité directe et la compatibilité descendante, même si vous êtes sûr de comprendre ce qu'est le roulement en plusieurs étapes, pouvez-vous garantir que tout cela sera compris par la personne qui vous remplacera?  Effectuez-vous correctement les tests d'intégration pour diverses combinaisons de versions qui peuvent se développer lors du déploiement non atomique?  Dans les architectures distribuées, j'ai vu plusieurs véritables catastrophes qui se résumaient au fait que les versions se sont égarées. </li><li>  <b>Cohérence</b> .  La réalisation d'opérations atomiques sur le même serveur est assez simple.  Il est beaucoup plus difficile de garantir que les utilisateurs dans n'importe quelle situation voient une image absolument cohérente lorsque de nombreuses machines sont impliquées dans le système, en particulier si le partage des données se produit entre elles.  C'est pourquoi, historiquement, les moteurs de bases de données relationnelles ne peuvent pas se targuer d'une bonne évolutivité.  Permettez-moi de vous dire: les <a href="https://www.piter.com/collection/all/product/site-reliability-engineering-nadezhnost-i-bezotkaznost-kak-v-google">meilleurs ingénieurs de Google ont passé des décennies à</a> essayer de simplifier la programmation distribuée pour leurs équipes, à essayer de la construire pour qu'elle ressemble davantage à une programmation traditionnelle. </li><li>  <b>Réimplémentation</b> .  Étant donné que les appels de procédure à distance sont coûteux, vous ne passerez pas beaucoup d'appels de ce type et il n'y a plus rien à faire pour résoudre certains problèmes, mais réimplémentez le code.  Google a créé des bibliothèques pour travailler avec plusieurs langues à la fois, conçues pour appeler des procédures à distance;  Il existe également des situations dans lesquelles ce code doit être réécrit à partir de zéro. </li></ol><br>  Alors, quelle est l'alternative? <br><br>  Autrement dit, beaucoup de fer.  Cette méthode peut sembler absurdement grand-père, mais gardez à l'esprit que le coût du matériel diminue constamment, de nombreuses charges de travail ne sont pas appelées «globales globales», et votre intuition sur ce que vous devez dépenser peut vous échouer. <br><br>  Voici une <a href="http://www.deltaserverstore.com/dell-r910.html">liste</a> de <a href="http://www.deltaserverstore.com/dell-r910.html">prix</a> relativement récente d'un fabricant canadien: <br><br><img src="https://habrastorage.org/webt/_2/ko/qq/_2koqq_9uanqjed7ebsfcwjzyqy.png"><br><br>  Une machine de quarante-nucléaire avec un téraoctet de RAM et presque un téraoctet sur le disque dur coûte aujourd'hui environ 6 000 $.  Imaginez combien de temps pendant toute la durée de vie du projet votre équipe devra résoudre les problèmes avec les systèmes distribués, et combien cela vous coûtera. <br><br>  Oui, mais toutes les entreprises d'aujourd'hui ne sont-elles pas basées sur le Web? <br><br>  Bref, non. <br><br>  Le monde regorge d'entreprises pour lesquelles ce qui suit est vrai: <br><br><ul><li>  Ils opèrent sur des marchés stables. </li><li>  Ils gagnent en vendant des choses. </li><li>  Par conséquent, leur clientèle est de plusieurs dizaines de milliers à plusieurs dizaines de millions de personnes, mais pas par milliards. </li><li>  Leurs ensembles de données sont généralement associés à leurs propres clients et produits. </li></ul><br>  Un bon exemple d'une telle entreprise est une banque.  Les banques ne connaissent pas "d'hyper croissance", ne deviennent pas "virales".  Leur modèle de croissance est modéré et prévisible, si l'on suppose qu'ils ont une croissance quelconque (les banques sont régionales et opèrent généralement sur des marchés saturés).  La clientèle de la plus grande banque américaine est d'environ 50 millions d'utilisateurs et, bien sûr, ne double pas tous les six mois.  Dans ce cas, la situation n'est pas du tout la même qu'avec Instagram.  Faut-il donc s'étonner que le mainframe soit toujours basé sur un système bancaire typique?  Bien sûr, il en va de même pour les entreprises de logistique, les entreprises manufacturières, etc.  C'est le pain et le beurre de notre économie. <br><br>  Dans ces entreprises, il est tout à fait possible que les besoins de chaque application spécifique qui leur est liée puissent toujours être satisfaits avec les ressources d'une seule grande machine.  Oui, même aujourd'hui, certains sites publics tiennent sur une seule machine.  En 2015, Maciej Tseglovsky a donné une conférence très intéressante sur « <a href="https://idlewords.com/talks/website_obesity.htm">La crise de l'obésité des sites</a> » et a noté que son propre site avec service de bookmarking était rentable, mais son concurrent a posté le même site sur AWS - et perdu, uniquement en raison de coûts différents équipement et diverses hypothèses sur la complexité.  Dans une étude sur la comparaison de <a href="https://blog.codinghorror.com/scaling-up-vs-scaling-out-hidden-costs/">la mise à l'échelle verticale et horizontale,</a> il a été constaté que PlentyOfFish fonctionne sur environ un mégaserveur (l'article date de 2009, vous pouvez donc ignorer les prix des équipements qui y sont répertoriés).  L'auteur fait quelques calculs et montre qu'un serveur n'est pas aussi stupide que cela puisse paraître.  Enfin, si vous envisagez Hadoop et le Big Data, consultez cet <a href="https://www.researchgate.net/publication/261862149_Scale-up_vs_scale-out_for_Hadoop_time_to_rethink">article de recherche Microsoft 2013,</a> qui démontre que de nombreuses charges de travail Hadoop de Microsoft, Yahoo et Facebook s'exécutent en réalité beaucoup plus rapidement et plus efficacement sur une seule grande machine, plutôt que sur un cluster.  Et c'était ainsi il y a 6 ans!  Il est probable que, depuis lors, l'accent mis sur la mise à l'échelle verticale soit devenu encore plus prononcé. <br><br>  Cependant, les économies réelles ne sont pas du tout liées à l'équipement, mais à l'optimisation du temps de travail extrêmement coûteux des ingénieurs, qui est consacré à la création d'un tas de microservices minuscules qui doivent être mis à l'échelle horizontalement avec une gestion de la demande élastique.  Une telle approche de l'ingénierie est risquée et prend du temps, même si vous utilisez les derniers jouets disponibles dans le cloud.  Vous pouvez perdre SQL, les transactions SOLIDES, le profilage unifié et vous perdrez certainement des informations telles que le traçage de pile intersystème.  La sécurité de type disparaîtra chaque fois que vous irez au-delà du serveur.  Vous recevrez des appels à des fonctions qui peuvent expirer, une surcharge excessive associée à une compilation dynamique, des échecs de contre-pression inattendus, des moteurs d'orchestration complexes avec des formats de configuration sophistiqués, et ... oh, les souvenirs sont vraiment inondés.  C'était intéressant de travailler avec tout cela lorsque j'avais l'architecture propriétaire de Google et un budget d'ingénierie épais à ma disposition, mais aujourd'hui j'oserais répéter cela uniquement si je n'avais pas d'autre choix. <br><br>  Selon l'expérience, il est impossible de travailler avec de très grands serveurs qui fonctionnent sur la collecte des ordures - le fait est que la collecte des ordures elle-même était une technologie peu développée, et donc ce sujet est resté longtemps purement académique.  Dans tous les cas, vous deviez piloter plusieurs serveurs à la fois. ,   ZGC  Shenandoah,   ,   80          –      .    ,     -,       –  ,     . <br><br> ,         ?         –   ,        ?   –    :  ,      ,        …    . <br><br><h4>  Conclusion </h4><br> NodeJVM –  ,    GraalVM.     NPM    Java/Kotlin,   JS  ,    Kotlin   JavaScript,      JS  ,   V8. <br><br>     ,    JS  Java,    Java  JS         . <br><br>        ,           4 ,     –      –  ,            .             . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr481104/">https://habr.com/ru/post/fr481104/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr481086/index.html">Vivaldi 2.10 - Agent secret</a></li>
<li><a href="../fr481092/index.html">La chose la plus intéressante en PHP 8</a></li>
<li><a href="../fr481094/index.html">À propos des écouteurs sans fil JBL avec énergie solaire et leurs défauts</a></li>
<li><a href="../fr481100/index.html">Angular 9, quoi de neuf?</a></li>
<li><a href="../fr481102/index.html">Boîte à outils multiplateforme .NET UI version AvaloniaUI 0.9</a></li>
<li><a href="../fr481106/index.html">Comment LANIT a tourné une sitcom DIY dans son bureau</a></li>
<li><a href="../fr481110/index.html">Playme VEGA Review: Enregistreur combiné avec écran tactile et support miroir</a></li>
<li><a href="../fr481112/index.html">Que dira le «chewing-gum» âgé de 5700 ans de la personne qui l'a mâché?</a></li>
<li><a href="../fr481114/index.html">Seccomp at Kubernetes: 7 choses que vous devez savoir depuis le début</a></li>
<li><a href="../fr481116/index.html">Publier automatiquement des messages de la communauté VKontakte sur Discord</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>