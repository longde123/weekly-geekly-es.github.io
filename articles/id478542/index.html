<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💕 🔼 🤹 FigmaGen: Otomasi Gaya di Aplikasi iOS 👱 👏🏻 🚶🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sekarang banyak tim mensistematisasikan desain aplikasi mereka. Kami memutuskan untuk melangkah lebih jauh dan mengotomatiskan sinkronisasi kode denga...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>FigmaGen: Otomasi Gaya di Aplikasi iOS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hh/blog/478542/"><p><img src="https://habrastorage.org/webt/q3/39/vr/q339vrmcwuw1jf24mujq60enevy.png"></p><br><p>  Sekarang banyak tim mensistematisasikan desain aplikasi mereka.  Kami memutuskan untuk melangkah lebih jauh dan mengotomatiskan sinkronisasi kode dengan pustaka komponen kami. </p><br><p>  Faktanya adalah bahwa hh menggunakan layanan <a href="https://www.figma.com/">Figma</a> terkenal untuk merancang UI, yang, di antara kelebihan lainnya, memiliki API terbuka.  Dan ini, pada gilirannya, membuka peluang besar bagi pengembang, yang kami putuskan untuk digunakan. </p><br><p>  Jadi ide proyek <a href="https://github.com/hhru/FigmaGen">FigmaGen lahir</a> - alat yang menyinkronkan kode dengan pustaka komponen dalam Figma.  Pada awalnya itu tampak seperti percobaan khusus untuk produk kami, tetapi solusi yang lebih universal ternyata, dan dalam artikel ini kami akan membagikan buah pertama dari pengembangan kami. </p><a name="habracut"></a><br><h2 id="kak-etorabotaet">  Bagaimana cara kerjanya </h2><br><p>  Figma memungkinkan Anda membangun perpustakaan komponen dan gaya yang dapat digunakan kembali secara global.  Idealnya, jika komponen ini dikelompokkan dan berada dalam file terpisah, maka akan lebih mudah bagi desainer untuk bekerja dengannya, dan pengembang akan menerima satu sumber pengetahuan untuk mengimplementasikan entitas ini dalam kode. </p><br><p>  Kami telah menyiapkan file demo kecil dalam Figma untuk gaya, yang tersedia dengan <a href="https://www.figma.com/file/ZvsRf99Ik11qS4PjS6MAFc/FigmaGen-Demo">referensi</a> dan terlihat seperti ini: </p><br><p><img src="https://habrastorage.org/webt/ik/bw/3u/ikbw3uhz1nxaebuj3gxc8stbw10.png"></p><br><p>  FigmaGen menerima file Figma tersebut menggunakan <a href="https://www.figma.com/developers/api">API</a> -nya, lalu mengekstrak semua data yang diperlukan dan menjadikannya menggunakan templat <a href="http://stencil.fuller.li/">stensil</a> dalam kode sumber.  Semua langkah ini dapat dikonfigurasi dalam file konfigurasi, dan kemudian untuk memulai pembuatan, Anda hanya perlu menjalankan perintah: </p><br><pre><code class="plaintext hljs">figmagen generate</code> </pre> <br><p>  Saat ini, FigmaGen mendukung generasi warna dan gaya teks, yang sebagai hasilnya dapat digunakan sebagai berikut: </p><br><pre> <code class="swift hljs">titleLabel.attributedText = <span class="hljs-string"><span class="hljs-string">"Hello world"</span></span>.styled( .title2, textColor: <span class="hljs-type"><span class="hljs-type">Colors</span></span>.imperial ) view.backgroundColor = <span class="hljs-type"><span class="hljs-type">Colors</span></span>.whiteSmoke</code> </pre> <br><p>  Semua kode yang dihasilkan dapat dengan mudah disesuaikan menggunakan template Stensilnya sendiri.  Oleh karena itu, tidak ada batasan pada platform, hanya perlu menerapkan template untuk bahasa yang sesuai dan menunjukkan jalur ke sana dalam konfigurasi.  Bonus tambahan adalah penggunaan kerangka kerja <a href="https://github.com/SwiftGen/StencilSwiftKit">StencilSwiftKit</a> di <a href="https://github.com/SwiftGen/StencilSwiftKit">FigmaGen</a> , yang menambahkan filter dan tag yang berguna ke template. </p><br><h2 id="ustanovka">  Instalasi </h2><br><p>  Instalasi FigmaGen adalah standar untuk alat tersebut, dan ada beberapa cara dasar: </p><br><ul><li>  <a href="https://cocoapods.org/">CocoaPods</a> : tambahkan baris <code>pod 'FigmaGen'</code> ke <code>Podfile</code> dan jalankan perintah <code>pod install --repo-update</code> . </li><li>  <a href="https://brew.sh/index_ru">Homebrew</a> : jalankan <code>brew install hhru/tap/FigmaGen</code> . </li><li>  Unduh secara manual dan unzip arsip zip dari rilis terbaru dari <a href="https://github.com/hhru/FigmaGen/releases">repositori</a> . </li></ul><br><p>  Dalam kasus instalasi menggunakan CocoaPods, perintah pembuatan harus menyertakan path ke <code>Pods/FigmaGen</code> : </p><br><pre> <code class="plaintext hljs">Pods/FigmaGen/figmagen generate</code> </pre> <br><blockquote>  Menginstal menggunakan CocoaPods adalah metode yang disarankan, karena memungkinkan Anda untuk memperbaiki versi FigmaGen di semua mesin dalam tim. </blockquote><br><h2 id="konfiguraciya">  Konfigurasi </h2><br><p>  Untuk mengkonfigurasi FigmaGen, Anda harus membuat file <code>.figmagen.yml</code> di folder root proyek.  Jika perlu, Anda dapat menentukan lintasan yang berbeda di parameter <code>--config</code> dari perintah generasi, misalnya: </p><br><pre> <code class="plaintext hljs">figmagen generate --config 'MyFolder/figmagen.yml'</code> </pre> <br><p>  File konfigurasi itu sendiri dalam format <a href="https://yaml.org/">YAML</a> dan dibagi menjadi beberapa bagian: </p><br><ul><li>  <code>base</code> : parameter dasar yang relevan dengan semua bagian lainnya.  Parameter apa pun dari bagian ini dapat diganti untuk mengonfigurasi subkomando pembuatan itu sendiri. </li><li>  <code>colors</code> : opsi untuk sub-perintah pembuatan warna. </li><li>  <code>textStyles</code> : opsi untuk sub-perintah pembuatan gaya teks. </li></ul><br><p>  Namun, jika ada bagian dari sub-perintah generasi yang hilang dari konfigurasi, maka sub-perintah ini akan dilewati. </p><br><h3 id="bazovye-parametry">  Parameter dasar </h3><br><p>  Agar tidak menduplikasi beberapa bidang dalam konfigurasi, kami memilihnya di bagian <code>base</code> terpisah, yang berisi parameter yang relevan untuk setiap sub-perintah generasi: </p><br><ul><li>  <code>accessToken</code> : string dengan token akses Figma. </li><li>  <code>fileKey</code> : baris dengan Figma pengidentifikasi file. </li></ul><br><p>  Parameter-parameter ini digunakan oleh sub-perintah generasi yang tidak didefinisikan, misalnya: </p><br><pre> <code class="plaintext hljs">base: accessToken: 27482-71b3313c-0e88-481b-8c93-0e465ab8a868 colors: fileKey: ZvsRf99Ik11qS4PjS6MAFc textStyles: fileKey: D1rfFI220qwaG8fD8iBqWa</code> </pre> <br><p>  Dalam hal ini, warna dan gaya teks akan dihasilkan dari file Figma yang berbeda, tetapi menggunakan token akses yang sama. </p><br><h3 id="token-dostupa">  Token akses </h3><br><p>  Untuk menerima file Figma, diperlukan otorisasi, yang dilakukan dengan mentransfer token akses pribadi.  Token semacam itu dapat dibuat dalam beberapa langkah sederhana: </p><br><ul><li>  Buka <a href="https://www.figma.com/settings">pengaturan akun</a> dalam Figma. </li><li>  Klik tombol "Buat token akses pribadi baru" di bagian "Token Akses Pribadi". </li><li>  Masukkan deskripsi untuk token yang sedang dibuat (misalnya, "FigmaGen"). </li><li>  Salin token yang dibuat ke clipboard. </li></ul><br><p><img src="https://habrastorage.org/webt/jw/qm/o0/jwqmo0s75iotwuc67g64gac8h18.png"></p><br><p>  Selanjutnya, Anda perlu memasukkan token yang diterima ke bidang <code>accessToken</code> dari konfigurasi.  Jika token ini memungkinkan akses ke semua file Figma yang muncul dalam konfigurasi, maka cukup untuk mendefinisikannya hanya di bagian <code>base</code> . </p><br><blockquote>  Untuk alasan keamanan, disarankan untuk menggunakan token pengguna yang dibuat khusus yang memiliki hak baca-saja untuk file Figma. </blockquote><br><h3 id="fayly-figma">  File Figma </h3><br><p>  FigmaGen meminta file Figma dengan pengenal standarnya, yang dapat diperoleh dari URL di bilah alamat browser. </p><br><p><img src="https://habrastorage.org/webt/ni/a8/bn/nia8bnracxfynfnoypssf4brwmw.png"></p><br><p>  Secara umum, URL ini memiliki format berikut: </p><br><pre> <code class="plaintext hljs">https://www.figma.com/file/&lt;&gt;/&lt;&gt;?node-id=&lt;  &gt;</code> </pre> <br><p>  Setelah menerima pengidentifikasi file, itu harus ditentukan dalam bidang <code>fileKey</code> dari konfigurasi.  Mirip dengan token akses, jika untuk semua sub-perintah generasi digunakan satu file, maka Anda dapat menentukan pengenal hanya di bagian <code>base</code> . </p><br><h3 id="nastroyki-generacii">  Pengaturan Generasi </h3><br><p>  Selain parameter dasar, untuk setiap sub-perintah generasi perlu untuk menentukan pengaturan berikut: </p><br><ul><li>  <code>destinationPath</code> : path untuk menyimpan file yang dihasilkan. </li><li>  <code>templatePath</code> : path ke file template Stencil.  Jika parameter dihilangkan, maka templat standar akan digunakan. </li><li>  <code>includingNodes</code> : pengidentifikasi bingkai yang harus digunakan saat membuat kode.  Jika parameter ini dihilangkan, maka semua node file akan digunakan. </li><li>  <code>excludingNodes</code> : pengidentifikasi bingkai yang harus diabaikan saat membuat kode.  Jika parameter ini dihilangkan, maka semua frame file yang ditentukan dalam bidang includeNodes akan digunakan. </li></ul><br><p>  Misalnya, pengaturan untuk menghasilkan gaya teks dapat sebagai berikut: </p><br><pre> <code class="plaintext hljs">textStyles: destinationPath: Sources/Generated/TextStyle.swift templatePath: Templates/TextStyles.stencil includingNodes: - 7:24 - 3:19 ...</code> </pre> <br><p>  Dengan konfigurasi ini, hanya gaya teks yang akan dihasilkan yang berada dalam bingkai dengan pengidentifikasi "7:24" dan "3:19". </p><br><h3 id="filtraciya-uzlov">  Penyaringan Node </h3><br><p>  Pustaka proyek kami berisi komponen khusus untuk platform tertentu.  Misalnya, fontnya berbeda dalam gaya teks: di iOS itu <a href="https://developer.apple.com/fonts/">San Francisco</a> , dan di Android itu <a href="https://fonts.google.com/specimen/Roboto">Roboto</a> .  Agar tidak menghasilkan kode tambahan, pemfilteran gaya seperti itu diperlukan, tetapi, sayangnya, alat Figma standar tidak cukup di sini, dan kami mempertimbangkan beberapa opsi untuk penerapannya: </p><br><ul><li>  Sistematisasi nama gaya dan komponen: dalam hal ini, nama setiap elemen akan berisi beberapa informasi meta, yang diproses sesuai dalam FigmaGen. </li><li>  Pemfilteran menurut pengidentifikasi bingkai: semua gaya dikelompokkan ke dalam frame yang berbeda berdasarkan jenis dan platform, dan pengidentifikasi dari frame ini diperbaiki dalam konfigurasi FigmaGen. </li></ul><br><p>  Pada tahap ini, kami memilih metode kedua, karena kami tidak ingin mengubah proses tim desain untuk otomatisasi di sisi pengembangan.  Jadi dalam parameter <code>includingNodes</code> Node dan <code>excludingNodes</code> <code>includingNodes</code> <code>excludingNodes</code> Anda dapat membuat daftar pengenal bingkai, yang masing-masing harus dimasukkan atau dikecualikan, untuk sub-perintah pembuatan. </p><br><p>  Anda juga dapat menggunakan bilah alamat browser untuk mendapatkan pengidentifikasi sendiri.  Untuk melakukan ini, pilih bingkai yang diinginkan dalam Figma, dan URL akan memiliki pengenalnya dalam nilai parameter <code>node-id</code> .  Identifier terlindung dan tidak terlindung dapat dimasukkan ke dalam konfigurasi. </p><br><p><img src="https://habrastorage.org/webt/yk/m9/lm/ykm9lm4khbqzud_67jvibahfcn8.png"></p><br><p>  Mungkin, untuk implementasi fungsionalitas baru, memfilter frame oleh pengidentifikasi mereka masih tidak cukup untuk kita.  Dalam hal ini, kami pasti akan memperluas kemampuan FigmaGen jika saat ini solusi standar dari Figma tidak muncul, misalnya, dalam bentuk tag untuk komponen. </p><br><h2 id="generaciya">  Generasi </h2><br><p>  Di repositori terpisah ada <a href="https://github.com/hhru/FigmaGenDemo">proyek demo yang</a> siap untuk pertempuran, Anda dapat mengunduhnya dan merasa bebas untuk bereksperimen.  Di dalamnya, FigmaGen diinstal menggunakan CocoaPods, jadi Anda harus terlebih dahulu menjalankan perintah <code>pod install</code> .  Untuk kenyamanan, panggilan ke perintah pembuatan telah ditambahkan ke fase build, dan setiap kali dijalankan akan memperbarui semua file yang dihasilkan. </p><br><p>  Setelah bermain dengan kode untuk gaya dari <a href="https://www.figma.com/file/ZvsRf99Ik11qS4PjS6MAFc/FigmaGen-Demo">pustaka demo</a> , Anda dapat menyalin file-nya ke akun Figma Anda dengan mengklik tombol "Duplikat ke Konsep Anda". </p><br><p><img src="https://habrastorage.org/webt/7g/yk/fl/7gykfl2s6zolz6cattdfw3d89fi.png"></p><br><p>  Ini akan memungkinkan Anda untuk memodifikasi gaya dan lebih memahami bagaimana kode mereka dihasilkan.  Anda hanya perlu mengkonfigurasi ulang FigmaGen dengan menentukan data untuk file baru. </p><br><p>  Juga, proyek demo sangat cocok sebagai taman bermain untuk menyesuaikan template Stensil yang terletak di folder Template.  Anda dapat mengeditnya secara langsung dalam Xcode dan memeriksa kebenaran templat itu sendiri dan kode yang mereka hasilkan dengan satu kali menjalankan pembangunan proyek. </p><br><h2 id="integraciya-vproekt">  Integrasi Proyek </h2><br><p>  Anda disarankan untuk menjalankan berbagai alat penghasil kode ( <a href="https://github.com/SwiftGen/SwiftGen">SwiftGen</a> , <a href="https://github.com/mac-cain13/R.swift">R.Swift</a> ) dalam fase pembangunan proyek, karena mereka menggunakan sumber daya lokal yang dapat berubah selama pengembangan.  Dalam hal ini, integrasi tersebut memastikan bahwa kode terbaru selalu masuk ke dalam perakitan. </p><br><p>  FigmaGen tidak menggunakan sumber daya lokal, semua data untuk generasi ada di Figma, oleh karena itu, tidak masuk akal untuk menyebutnya untuk setiap majelis.  Jauh lebih baik untuk menghasilkan kode sekali dan secara berkala memperbarui ketika versi baru dari pustaka komponen muncul, atau ketika memperbarui versi FigmaGen itu sendiri. </p><br><p>  Sekarang dalam proyek kami, pengembang yang sedang bertugas terlibat dalam memperbarui kode yang dihasilkan.  Dalam versi FigmaGen berikutnya, direncanakan untuk menambahkan dukungan untuk mengversi file Figma, maka dimungkinkan untuk mengotomatisasi prosedur ini, tetapi ini adalah cerita yang sama sekali berbeda. </p><br><p><img src="https://habrastorage.org/webt/rz/ii/up/rziiuprdumkdaaoqbagw_gjfmg8.png"></p><br><h2 id="podvodya-itogi">  Untuk meringkas </h2><br><p>  Ini hanyalah langkah pertama kami menuju pembuatan alat yang ampuh yang akan memungkinkan pengembang mengotomatisasi sebanyak mungkin seluruh rutin yang terkait dengan sistem desain. </p><br><p>  Bagian tersulit dari proyek telah selesai: arsitekturnya ditentukan, simpul utama yang digunakan kembali dibentuk dan infrastrukturnya dikonfigurasi.  Ini memungkinkan kami untuk dengan cepat meningkatkan fungsionalitas FigmaGen baru, dan kami masih memiliki banyak rencana menarik: </p><br><ul><li>  memvariasikan file Figma </li><li>  otomatisasi gambar </li><li>  dukungan untuk tema terang dan gelap </li><li>  pembuatan kode untuk gradien, bayangan, goresan, dll. </li></ul><br><p>  Dan yang pasti, versi baru dengan fitur-fitur ini akan segera muncul, tunggu saja di <a href="https://github.com/hhru/FigmaGen">repositori</a> FigmaGen. </p><br><p>  Itu saja.  Kami menyambut umpan balik dalam komentar.  Sampai jumpa! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id478542/">https://habr.com/ru/post/id478542/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id478532/index.html">Bagaimana Apple Earnes: 5 Area Bisnis Paling Menguntungkan di Perusahaan</a></li>
<li><a href="../id478534/index.html">DevFest Siberia 2019: melihat tren dari pedalaman</a></li>
<li><a href="../id478536/index.html">WebRTC melalui Kurento: Pengalaman Pengujian dan Implementasi</a></li>
<li><a href="../id478538/index.html">Cara memeriksa validitas paspor Anda</a></li>
<li><a href="../id478540/index.html">Persiapan untuk forum kesepuluh "Positive Hack Days 10: Memulai"</a></li>
<li><a href="../id478544/index.html">Vue Storefront: Impor Direktori dari Magento 2</a></li>
<li><a href="../id478546/index.html">Soket web Beberapa pengalaman dalam pengembangan dan operasi. Kami memodifikasi klien</a></li>
<li><a href="../id478550/index.html">Bagaimana cara mengatur jam tangan? Analisis trek front-end kejuaraan pemrograman kedua</a></li>
<li><a href="../id478552/index.html">Applet kedua, menutupnya dan tombol transparan dalam Memproses 3</a></li>
<li><a href="../id478554/index.html">Webinar "SRE - sensasi atau masa depan?" 12 Desember pukul 11:00</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>