<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚯 📖 👩🏾‍🔬 MVP no Unity ou como simplificar a vida 🍋 📌 📋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="(Fixo) 
 Primeiro, vamos ver o que é o MVP (Model View Presenter). 


 Por que é necessário? A resposta mais simples é construir uma arquitetura conve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MVP no Unity ou como simplificar a vida</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481618/"><p>  (Fixo) </p><br><h4 id="dlya-nachala-razberemsya-chto-takoe-mvp-model-view-presenter">  Primeiro, vamos ver o que é o MVP (Model View Presenter). </h4><br><p>  Por que é necessário?  A resposta mais simples é construir uma arquitetura conveniente e extensível. </p><br><p>  Vale a pena descobrir por que você precisa dividir a interação em três classes diferentes.  Primeiro, a separação de tarefas, seguindo os princípios do SOLID.  Em segundo lugar, para facilitar a interação com os servidores para sincronização de dados. </p><a name="habracut"></a><br><h4 id="razberemsya-popodrobnee-ob-obyazannostyah-na-primere">  Vamos dar uma olhada nas responsabilidades do exemplo </h4><br><p>  <em>PlayerView.cs</em> - representa em particular a classe MonoBehaviour </p><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PlayerView</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { }</code> </pre> <br><p>  <em>PlayerModel.cs</em> - representa uma classe de dados </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PlayerModel</span></span> { }</code> </pre> <br><p>  <em>Presenter.cs</em> - representa uma classe de conectividade entre modelo e exibição </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PlayerPresenter</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PlayerView _playerView; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PlayerModel _<span class="hljs-function"><span class="hljs-function">playerModel </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlayerController</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PlayerView view, PlayerModel model</span></span></span><span class="hljs-function">)</span></span> { _playerView = view; _playerModel = model; } }</code> </pre> <br><p>  Esse é o padrão inteiro. </p><br><h4 id="a-teper-razberemsya-zachem-vse-eto-nuzhno">  Agora vamos ver por que tudo isso é necessário. </h4><br><p>  Adicionamos <em>PlayerView.cs</em> como um componente ao nosso player <em>Prefab</em> . </p><br><p>  As demais classes são criadas em alguma classe de controle.  Por exemplo, crie uma classe de controle. </p><br><p>  Crie um objeto vazio no palco e desligue o componente GameManager </p><br><p>  <em>GameManager.cs</em> </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GameManager</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject _playerPrefab; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PlayerPresenter _playerController; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PlayerModel _playerModel; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ _playerModel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PlayerModel(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> playerObject = Instantiate(_playerPrefab, Vector3.zero,Quaternion.identity); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> playerView = playerObject.GetComponent&lt;Playerview&gt;(); _playerPresenter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PlayerPresenter(playerView, _playermodel) } }</code> </pre> <br><p>  Bem, agora no início do jogo, criaremos um jogador.  Mas o que vem depois? </p><br><p>  De fato, este é um mecânico de fantasia.  Bem, por exemplo, vamos expandir o modelo do Player adicionando integridade. </p><br><p>  <em>PlayerModel.cs</em> </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PlayerModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> Action Death; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> Action&lt;<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>&gt; ChangedHealth; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _maxHp = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _currentHp; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlayerModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ _currentHp = maxHp; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetNewHealth</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> damage</span></span></span><span class="hljs-function">)</span></span> { _currentHp -= damage; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_currentHp &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) ChangedHealth?.Invoke(_currentHp); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Death?.Invoke(); } }</code> </pre> <br><p>  Agora, nosso jogador tem Vida e dois eventos para mudar saúde e morte.  Ou seja, Modelo - representa a concentração de todos os dados do jogador e decide o que fazer quando qualquer dado for alterado. </p><br><p>  Agora expanda o Playercontroller para que possamos interagir com os dados </p><br><p>  <em>PlayerPresenter.cs</em> </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PlayerPresenter</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PlayerView _playerView; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PlayerModel _<span class="hljs-function"><span class="hljs-function">playerModel </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlayerPresenter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PlayerView view, PlayerModel model</span></span></span><span class="hljs-function">)</span></span> { _playerView = view; _playerModel = model; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Enable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _playerModel.Death += Death; _playerModel.ChangedHealth += ChangeHealth; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ChangeHealth</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> health</span></span></span><span class="hljs-function">)</span></span>{ _playerView.Changehealth(health); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Death</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ _playerView.Death(); Disable(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Disable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _playerModel.Death -= Death; _playerModel.ChangedHealth -= ChangeHealth; } }</code> </pre> <br><p>  Portanto, vamos expandir e o PlayerView </p><br><p>  <em>PlayerView.cs</em> </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PlayerView</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Changehealth</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> health</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//      //    slideBar   Text } public void Death() { //     } }</span></span></code> </pre> <br><p>  Portanto, temos uma arquitetura extremamente conveniente para criar uma unidade (ou qualquer outro objeto), que pode ser expandida por qualquer mecânica.  Precisa de mana?  Ou movimento?  Adicione mana flutuante, posição Vector3 ao modelo. </p><br><p>  Qual deve ser a conclusão?  Não interfira nos dados da exibição (MonoBehaviour) com erros de cálculo simples. <br>  O apresentador, no nosso caso, está localizado acima do nível do PlayerView e PlayerModel e monitora se algo está mudando lá e responde a alterações.  Ao mesmo tempo, o PlayerController também pode monitorar eventos de exibição, como colisões ou gatilhos. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt481618/">https://habr.com/ru/post/pt481618/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt481604/index.html">Quão severos desenvolvedores de Chelyabinsk criam jogos para o Google Play e as redes sociais</a></li>
<li><a href="../pt481606/index.html">Assinatura estática usando o modelo Observer usando C ++ e o microcontrolador Cortex M4</a></li>
<li><a href="../pt481610/index.html">Antipadrões do PostgreSQL: atualizando uma tabela grande sob carga</a></li>
<li><a href="../pt481612/index.html">Nossa pequena contribuição para a luta da Avalonia UI por menos plataformas</a></li>
<li><a href="../pt481616/index.html">Domo geodésico. Sobre o dispositivo e minha experiência em cálculos</a></li>
<li><a href="../pt481620/index.html">Juniper SRX e Cisco ASA: próxima série</a></li>
<li><a href="../pt481624/index.html">Escrevendo um aplicativo no Flutter em conjunto com o Redux</a></li>
<li><a href="../pt481626/index.html">Coleções de exibição complexas no iOS: problemas e soluções no exemplo do feed VKontakte</a></li>
<li><a href="../pt481628/index.html">Regras para escrever etapas preliminares em casos de teste</a></li>
<li><a href="../pt481630/index.html">Melhores ferramentas e recursos úteis para tornar uma startup mais inteligente em 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>