<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòΩ üëù üíÉ Como o Typecript me decepcionou e vale a pena? üëåüèø üö∫ üòÑ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Antes de come√ßar, quero mencionar que sou um f√£ do TypeScript. Esta √© minha principal linguagem de programa√ß√£o para projetos front-end no React e para...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como o Typecript me decepcionou e vale a pena?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vdsina/blog/485206/"><img src="https://habrastorage.org/webt/3w/bb/rv/3wbbrvcbnytxte0qcz54gsibk10.png"><br><br>  Antes de come√ßar, quero mencionar que sou um f√£ do TypeScript.  Esta √© minha principal linguagem de programa√ß√£o para projetos front-end no React e para qualquer trabalho de back-end que eu fa√ßo no Node.  Sou totalmente a favor do Typecript, mas h√° momentos que me incomodam e sobre os quais eu gostaria de contar este artigo. <br><a name="habracut"></a><br>  Eu escrevi exclusivamente no TypeScript nos √∫ltimos tr√™s anos para muitas empresas diferentes; portanto, na minha opini√£o, o TypeScript faz pelo menos algo certo ou fecha certas necessidades. <br><br>  Apesar de suas imperfei√ß√µes, o TypeScript entrou no front-end de desenvolvimento e ocupa a s√©tima posi√ß√£o na lista das linguagens de programa√ß√£o mais populares, de acordo com o <a href="https://research.hackerrank.com/developer-skills/2019">relat√≥rio de habilidades do desenvolvedor</a> do <a href="https://research.hackerrank.com/developer-skills/2019">HackerRank</a> . <br><br>  Qualquer equipe de desenvolvimento, independente de grande ou pequena, escreve ou n√£o em TypeScript, sempre vale a pena por seguran√ßa: <br><br><ul><li>  Verifique se os testes de unidade bem escritos abrangem o m√°ximo de c√≥digo poss√≠vel na produ√ß√£o. </li><li>  Use a programa√ß√£o em pares: um par extra de olhos ajudar√° a capturar coisas mais s√©rias do que apenas erros de sintaxe </li><li>  Crie qualitativamente um processo de revis√£o de c√≥digo e identifique erros que a m√°quina n√£o consegue encontrar </li><li>  Use o linter - como eslint </li></ul><br>  Embora o TypeScript adicione um n√≠vel adicional de seguran√ßa al√©m de tudo isso, mas, na minha opini√£o, ele est√° muito atr√°s de outras linguagens nesse sentido.  Eu vou explicar o porqu√™. <br><br><h2>  O TypeScript n√£o √© um sistema de tipos confi√°vel </h2><br>  Acho que esse pode ser o principal problema do TypeScript, mas primeiro deixe-me determinar o que <i>s√£o sistemas de tipos</i> <i>confi√°veis</i> e <i>n√£o confi√°veis</i> . <br><br><h3>  Sistema robusto </h3><br>  <i>Um</i> sistema de tipo <i>confi√°vel</i> garante que seu programa n√£o termine em estados inv√°lidos.  Por exemplo, se o tipo est√°tico de uma express√£o for <i>string</i> , quando for avaliado em tempo de execu√ß√£o, voc√™ ter√° a garantia de obter apenas a <i>string</i> . <br><br>  Em um sistema de tipos confi√°vel, voc√™ nunca estar√° em uma situa√ß√£o em que a express√£o n√£o corresponda ao tipo esperado, no tempo de compila√ß√£o ou no tempo de execu√ß√£o. <br><br>  Obviamente, existem v√°rios graus de confiabilidade, bem como v√°rias interpreta√ß√µes de confiabilidade.  O TypeScript √© um pouco confi√°vel e captura erros de tipo: <br><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Type 'string' is not assignable to type 'number' const increment = (i: number): number =&gt; { return i + "1"; } // Argument of type '"98765432"' is not assignable to parameter of type 'number'. const countdown: number = increment("98765432");</span></span></code> </pre> <br><h3>  Sistema de tipo inseguro </h3><br>  O texto datilografado relata abertamente que 100% de confiabilidade n√£o √© seu objetivo.  At√© o n√∫mero "n√£o alvo" 3 na <a href="https://github.com/Microsoft/TypeScript/wiki/TypeScript-Design-Goals">lista</a> "n√£o alvo" do <a href="https://github.com/Microsoft/TypeScript/wiki/TypeScript-Design-Goals">TypeScript</a> afirma claramente: <br><blockquote>  Ter um sistema do tipo confi√°vel ou "comprovadamente correto" n√£o √© nosso objetivo.  Em vez disso, buscamos um equil√≠brio entre precis√£o e desempenho. </blockquote><br>  Isso significa que n√£o h√° garantia de que a vari√°vel seja de um tipo espec√≠fico em tempo de execu√ß√£o.  Eu posso ilustrar isso com o seguinte exemplo um tanto artificial: <br><br><pre> <code class="javascript hljs">interface A { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: number; } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a: A = {<span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> b: {<span class="hljs-attr"><span class="hljs-attr">x</span></span>: number | string} = a; bx = <span class="hljs-string"><span class="hljs-string">"unsound"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> x: number = ax; <span class="hljs-comment"><span class="hljs-comment">// unsound axtoFixed(0); // WTF is it?</span></span></code> </pre> <br>  O c√≥digo acima n√£o funciona, pois sabe-se que <i>ax</i> √© um n√∫mero da interface <i>A.</i>  Infelizmente, depois de algumas simula√ß√µes de reatribui√ß√£o, ele se transforma em uma string e esse c√≥digo √© compilado, mas com erros no tempo de execu√ß√£o. <br><br>  Infelizmente, esta express√£o compila sem erros: <br><br><pre> <code class="javascript hljs">axtoFixed(<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br>  Que a confiabilidade n√£o √© o objetivo da linguagem √© provavelmente um dos maiores problemas do TypeScript.  Continuo recebendo muitos erros de erro de tempo de execu√ß√£o que o compilador <i>tsc</i> n√£o captura, mas que o compilador teria notado se existisse um sistema de tipo confi√°vel no TypeScript.  O TypeScript agora √© um p√© no campo das linguagens "confi√°veis" e o outro no "n√£o confi√°vel".  Essa abordagem de meia medida √© baseada em <i>qualquer</i> tipo, que discutirei mais adiante. <br><br>  Estou frustrado pelo fato de o n√∫mero de testes que eu escrever n√£o ter diminu√≠do com a transi√ß√£o para o TypeScript.  Quando comecei, decidi erroneamente que poderia reduzir a rotina onerosa de escrever um grande n√∫mero de testes de unidade. <br><br>  O TypeScript desafia o estado atual das coisas, argumentando que a redu√ß√£o dos custos cognitivos ao usar tipos √© mais importante que a confiabilidade. <br><br>  Entendo por que o TypesScript escolheu esse caminho e h√° uma opini√£o de que o TypeScript n√£o seria t√£o popular se a confiabilidade do sistema de tipos fosse 100% garantida.  Essa opini√£o n√£o resistiu ao teste - <a href="https://dart.dev/">a linguagem Dart est√°</a> rapidamente ganhando popularidade, juntamente com o uso generalizado do Flutter.  E <a href="https://dart.dev/guides/language/sound-dart">argumenta-se</a> que a confiabilidade do tipo √© o objetivo do Dart. <br><br>  A inseguran√ßa e as v√°rias maneiras pelas quais o TypeScript fornece uma "sa√≠da de emerg√™ncia" devido √† digita√ß√£o forte o tornam menos eficiente e, infelizmente, o tornam <b>"melhor que nada"</b> no momento.  Eu ficaria feliz se, √† medida que o TypeScript crescesse em popularidade, mais op√ß√µes de compiladores se tornassem dispon√≠veis, permitindo que usu√°rios experientes lutassem por 100% de confiabilidade. <br><br><h2>  O TypeScript n√£o garante nenhuma verifica√ß√£o de tipo em tempo de execu√ß√£o </h2><br>  A verifica√ß√£o de tipo em tempo de execu√ß√£o n√£o √© o objetivo do TypeScript, portanto, meu desejo provavelmente nunca se tornar√° realidade.  A verifica√ß√£o do tipo em tempo de execu√ß√£o √© √∫til, por exemplo, ao trabalhar com dados JSON retornados de chamadas de API.  Seria poss√≠vel se livrar de toda uma categoria de erros e muitos testes de unidade, se pud√©ssemos controlar esses processos no n√≠vel do sistema de tipos. <br><br>  Como n√£o podemos garantir nada em tempo de execu√ß√£o, isso pode acontecer facilmente: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getFullName = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (): <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">string</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> person: AxiosResponse = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> api(); <span class="hljs-comment"><span class="hljs-comment">//response.name.fullName may result in undefined at runtime return response.name.fullName }</span></span></code> </pre><br>  Existem algumas bibliotecas auxiliares como <a href="https://github.com/gcanti/io-ts">io-ts</a> , o que √© √≥timo, mas isso pode significar que voc√™ precisa duplicar seus modelos. <br><br><h2>  Tipo assustador qualquer e op√ß√£o estrita </h2><br>  O tipo any significa "any", e o compilador permite qualquer opera√ß√£o ou atribui√ß√£o de uma vari√°vel desse tipo. <br><br>  O TypeScript funciona bem para pequenas coisas, mas as pessoas tendem a colocar qualquer tipo em qualquer coisa que leve mais de um minuto.  Recentemente, trabalhei em um projeto Angular e vi muitos c√≥digos como este: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span><span class="hljs-class"> </span></span>{ public _id: any; public name: any; public icon: any;</code> </pre> <br>  O TypeScript permite que voc√™ esque√ßa o sistema de tipos. <br><br>  Voc√™ pode quebrar o tipo de qualquer coisa com <i>qualquer</i> : <br><br><pre> <code class="javascript hljs">(<span class="hljs-string"><span class="hljs-string">"oh my goodness"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> any).ToFixed(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-comment"><span class="hljs-comment">// remember what I said about soundness?</span></span></code> </pre> <br>  A op√ß√£o <i>estrita</i> inclui as seguintes op√ß√µes do compilador, que tornam tudo mais confi√°vel: <br><br><ul><li>  --strictNullChecks </li><li>  --noImplicitAny </li><li>  --noImplicitThis </li><li>  --alwaysStrict </li></ul><br>  H√° tamb√©m uma regra eslint <a href="">@ typescript-eslint / no-expl√≠cita-qualquer</a> . <br><br>  Distribuir <i>qualquer um</i> pode arruinar a confiabilidade do seu c√≥digo. <br><br><h2>  Conclus√£o </h2><br>  Preciso repetir que sou um f√£ do TypeScript e utiliz√°-lo no meu trabalho di√°rio, mas sinto que √© imperfeito e o hype ao seu redor n√£o √© inteiramente justificado.  O Airbnb <a href="https://www.reddit.com/r/typescript/comments/aofcik/38_of_bugs_at_airbnb_could_have_been_prevented_by/">afirma que o TypeScript ajudou a evitar 38% dos erros</a> .  Sou muito c√©tico em rela√ß√£o √† porcentagem declarada com tanta precis√£o.  O TypeScript n√£o aprimora nem combina todas as pr√°ticas existentes de bom c√≥digo.  Eu ainda tenho que escrever uma tonelada de testes.  Voc√™ poderia argumentar que eu escrevo mais c√≥digo, ent√£o tenho que escrever muitos testes.  Continuo recebendo muitos erros de execu√ß√£o inesperados. <br><br>  O TypeScript oferece apenas verifica√ß√£o b√°sica de tipo, e o fato de a confiabilidade e a verifica√ß√£o de tipo em tempo de execu√ß√£o n√£o serem o seu objetivo deixa o TypeScript no mundo das meias medidas, a meio caminho entre o melhor mundo e o que codificamos agora. <br><br>  O TypeScript √© excelente gra√ßas ao bom suporte de IDEs, como vscode, onde obtemos feedback visual durante o processo de impress√£o. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3y/r3/j7/3yr3j7emqikwnbmhj97et9c2wpk.png"></div><br>  <i>Erro TypeScript no vscode</i> <br><br>  O TypeScript tamb√©m aprimora as altera√ß√µes de refatora√ß√£o e quebra de c√≥digo (como altera√ß√µes nas assinaturas de m√©todos) que s√£o identificadas instantaneamente quando o compilador TypeScript √© iniciado. <br>  O TypeScript fornece uma boa verifica√ß√£o de tipo e √© definitivamente melhor do que nenhuma verifica√ß√£o de tipo ou remo√ß√£o simples, mas acho que o TypeScript pode ser muito melhor e as op√ß√µes necess√°rias do compilador podem agradar aqueles que desejam mais da linguagem. <br><br> <a href="https://vdsina.ru/%3Fpartner%3D7d159c89hz"><img src="https://habrastorage.org/webt/ud/xv/wf/udxvwfcz80j3nug11rxaguqelww.png"><br></a> <br><h3>  Inscreva-se no nosso desenvolvedor do Instagram </h3><br> <a href="http://bit.ly/34w4T9B"><img src="https://habrastorage.org/webt/e5/as/-l/e5as-ltfnotkemk2dsqngygimra.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt485206/">https://habr.com/ru/post/pt485206/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt485196/index.html">AvitoTech On Tour: V√° e participe de reuni√µes em Kazan</a></li>
<li><a href="../pt485198/index.html">Outra maneira de medir o desempenho dos m√©todos de aplicativo .NET</a></li>
<li><a href="../pt485200/index.html">Confus√£o no in√≠cio: post-mortem na velocidade de lan√ßamento de um aplicativo iOS</a></li>
<li><a href="../pt485202/index.html">Sistema de Supress√£o</a></li>
<li><a href="../pt485204/index.html">Retornar ao topo: por que a capitaliza√ß√£o da Amazon em breve exceder√° US $ 1 trilh√£o</a></li>
<li><a href="../pt485208/index.html">Cria√ß√£o de infraestrutura de TI tolerante a falhas. Parte 2. Instalando e configurando o cluster oVirt 4.3</a></li>
<li><a href="../pt485210/index.html">Atirador de zumbis simples no Unity</a></li>
<li><a href="../pt485214/index.html">CLRium # 7: Pr√°tico. Semin√°rio, trabalhos de casa com verifica√ß√£o, orienta√ß√£o</a></li>
<li><a href="../pt485218/index.html">Reservando constantes e ganchos Git em C #</a></li>
<li><a href="../pt485220/index.html">A evolu√ß√£o do Web Application Firewall: dos firewalls aos sistemas de seguran√ßa baseados em nuvem de aprendizado de m√°quina</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>