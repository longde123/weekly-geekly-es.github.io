<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌱 🧚🏿 🍛 Bagaimana cara menyimpan memori pada tab browser, tetapi tidak kehilangan isinya. Pengalaman tim Yandex.Browser 💙 🙏 🌅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saat browser kehabisan memori, mereka membongkar tab tertua darinya. Ini menjengkelkan karena mengklik tab semacam itu memaksa memuat ulang halaman. H...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana cara menyimpan memori pada tab browser, tetapi tidak kehilangan isinya. Pengalaman tim Yandex.Browser</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/423507/"> Saat browser kehabisan memori, mereka membongkar tab tertua darinya.  Ini menjengkelkan karena mengklik tab semacam itu memaksa memuat ulang halaman.  Hari ini kami akan memberi tahu para pembaca Habr bagaimana tim Yandex.Browser memecahkan masalah ini menggunakan teknologi Hibernate. <br><br>  Peramban berbasis kromium membuat proses untuk setiap tab.  Pendekatan ini memiliki banyak keunggulan.  Ini adalah keamanan (isolasi situs dari satu sama lain), stabilitas (crash satu proses tidak menyeret seluruh browser), dan akselerasi pekerjaan pada prosesor modern dengan sejumlah besar core.  Tetapi ada juga minus - konsumsi memori yang lebih tinggi daripada saat menggunakan satu proses untuk semuanya.  Jika browser tidak melakukan apa pun dengan ini, maka pengguna mereka akan terus melihat sesuatu seperti ini: <br><br><img src="https://habrastorage.org/webt/s6/b-/yc/s6b-yc753-ksq2bjrj2n4_xm_z8.png"><br><br>  Dalam proyek Chromium, mereka berjuang dengan konsumsi memori tab latar belakang dengan menghapus berbagai cache.  Ini bukan tentang cache di mana gambar dari halaman yang dimuat disimpan.  Tidak ada masalah dengan dia - dia hidup di hard drive.  Di peramban modern, ada banyak informasi cache lainnya yang disimpan dalam RAM. <br><br>  Selain itu, Chromium telah bekerja cukup lama untuk menghentikan timer JS di tab latar belakang.  Kalau tidak, membersihkan cache tidak masuk akal, karena  kegiatan di tab latar belakang mengembalikannya.  Dipercayai bahwa jika situs ingin bekerja di latar belakang, maka Anda perlu menggunakan pekerja layanan, bukan timer. <br><br><a name="habracut"></a>  Jika langkah-langkah ini tidak membantu, maka hanya ada satu hal yang tersisa - untuk membongkar seluruh proses rendering tab dari memori.  Situs terbuka tidak lagi ada.  Jika Anda beralih ke tab, itu mulai mengunduh dari jaringan.  Jika ada video jeda di tab, itu akan mulai diputar dari awal.  Jika formulir diisi pada halaman, maka informasi yang dimasukkan dapat hilang.  Jika aplikasi JS berat bekerja di tab, Anda harus memulainya lagi. <br><br>  Masalah membongkar tab sangat tidak menyenangkan ketika tidak ada akses ke jaringan.  Sudahkah Anda menunda tab dengan Habr untuk membaca di pesawat terbang?  Bersiaplah bahwa artikel yang bermanfaat akan berubah menjadi labu. <br><br>  Pengembang browser memahami bahwa tindakan ekstrem ini menjengkelkan bagi pengguna (cukup <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">buka pencarian</a> untuk memperkirakan luasnya), sehingga mereka menerapkannya pada saat terakhir.  Pada titik ini, komputer sudah mulai melambat karena kurangnya memori, pengguna memerhatikan hal ini dan mencari cara alternatif untuk menyelesaikan masalah, oleh karena itu, misalnya, ekstensi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">The Great Suspender</a> memiliki lebih dari 1,4 juta pengguna. <br><br>  Orang-orang ingin browser dan memori disimpan, dan mereka tidak mulai melambat.  Untuk melakukan ini, tab tidak boleh diturunkan pada saat terakhir, tetapi sedikit lebih awal.  Dan untuk ini, Anda harus berhenti kehilangan konten tab, mis.  membuat proses penyimpanan tidak terlihat.  Tapi lalu apa yang harus dihemat?  Lingkaran ditutup.  Tapi solusinya ditemukan. <br><br><h2>  Hibernasi di Yandex Browser </h2><br>  Banyak pembaca Habr sudah bisa menebak apa yang harus menghapus memori, tetapi untuk menyimpan keadaan tab sangat mungkin jika Anda pertama kali membongkar keadaan pada hard drive.  Jika Anda mengklik tab untuk memulihkan tab dari hard drive, pengguna tidak akan melihat apa pun. <br><br>  Tim kami terlibat dalam pengembangan proyek Chromium, di mana ia mengirimkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pengeditan yang</a> signifikan dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">fitur</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">fitur</a> baru.  Kembali pada tahun 2015, kami <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">berdiskusi</a> dengan rekan-rekan dari proyek mengenai gagasan mempertahankan status tab pada hard drive dan bahkan berhasil membuat sejumlah perbaikan, tetapi mereka memutuskan untuk membekukan area ini dalam Chromium.  Kami memutuskan secara berbeda dan melanjutkan pengembangan di Yandex.Browser.  Butuh lebih banyak waktu daripada yang direncanakan, tetapi itu sepadan.  Di bawah ini kita akan berbicara tentang isian teknis teknologi Hibernate, tetapi untuk sekarang, mari kita mulai dengan logika umum. <br><br>  Beberapa kali dalam satu menit, Yandex.Browser memeriksa jumlah memori yang tersedia, dan jika kurang dari nilai ambang batas 600 megabita, maka Hibernate ikut berperan.  Semuanya dimulai dengan fakta bahwa Browser menemukan tab latar belakang tertua (untuk digunakan).  Omong-omong, rata-rata pengguna membuka 7 tab, tetapi 5% memiliki lebih dari 30. <br><br>  Anda tidak dapat melepas tab lama dari memori - Anda dapat merusak sesuatu yang sangat penting.  Misalnya, memainkan musik atau mengobrol di messenger web.  Ada 28 pengecualian seperti itu sekarang.Jika tab tidak cocok dengan setidaknya satu di antaranya, maka Browser melanjutkan untuk memeriksa yang berikutnya. <br><br>  Jika tab ditemukan yang memenuhi persyaratan, maka proses menyimpannya dimulai. <br><br><h2>  Menyimpan dan mengembalikan tab di Hibernate </h2><br>  Setiap halaman dapat dibagi menjadi dua bagian besar, yang terkait dengan mesin V8 (JS) dan Blink (HTML / DOM).  Pertimbangkan sebuah contoh kecil: <br><br><pre><code class="javascript hljs">&lt;html&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function"> </span></span></span><span class="hljs-title"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-title">onLoad</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">(</span></span></span><span class="hljs-params"></span><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span></span><span class="xml"><span class="javascript">{ </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> div = </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">document</span></span></span></span><span class="xml"><span class="javascript">.createElement(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"div"</span></span></span></span><span class="xml"><span class="javascript">); div.textContent = </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">"Look ma, I can set div text"</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">document</span></span></span></span><span class="xml"><span class="javascript">.body.appendChild(div); } </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;body onload=<span class="hljs-string"><span class="hljs-string">"onLoad()"</span></span>&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/html&gt;</span></span></code> </pre> <br><br>  Kami memiliki beberapa pohon DOM dan skrip kecil yang hanya menambahkan div ke tubuh.  Dari sudut pandang Blink, halaman ini terlihat seperti ini: <br><br><img src="https://habrastorage.org/webt/rt/tk/am/rttkamwsawvme_06mcommdyiqky.png"><br><br>  Mari kita lihat hubungan antara Blink dan V8 menggunakan contoh HTMLBodyElement: <br><br><img src="https://habrastorage.org/webt/yb/rr/-b/ybrr-bppoiru848txkj63eplpne.png"><br><br>  Anda mungkin memperhatikan bahwa Blink dan V8 memiliki representasi berbeda dari entitas yang sama dan terkait erat satu sama lain.  Jadi kami sampai pada ide asli - untuk menyimpan keadaan penuh V8, dan untuk Blink hanya menyimpan atribut HTML dalam bentuk teks.  Tapi ini kesalahan, karena kami kehilangan status objek DOM yang tidak disimpan dalam atribut.  Kami juga kehilangan status yang tidak disimpan di DOM.  Solusi untuk masalah ini adalah menyelamatkan Blink sepenuhnya.  Tapi tidak sesederhana itu. <br><br>  Pertama, Anda perlu mengumpulkan informasi tentang objek Blink.  Oleh karena itu, pada saat menyimpan V8, kami tidak hanya menghentikan JS dan melemparkannya, tetapi juga mengumpulkan referensi ke objek DOM dan objek tambahan lainnya yang tersedia untuk JS dalam memori.  Kami juga menelusuri semua objek yang dapat dijangkau dari objek Dokumen - elemen root dari setiap bingkai halaman.  Jadi kami mengumpulkan informasi tentang segala hal yang penting untuk dilestarikan.  Bagian tersulit adalah belajar menabung. <br><br>  Jika kami menghitung semua kelas Blink yang mewakili pohon DOM, serta API HTML5 yang berbeda (misalnya, kanvas, media, geolokasi), kami mendapatkan ribuan kelas.  Hampir tidak mungkin untuk menulis logika menyelamatkan semua kelas dengan tangan Anda.  Tetapi bagian terburuknya adalah bahwa bahkan jika Anda melakukan ini, itu tidak mungkin dipertahankan, karena kami secara teratur memperbarui versi baru Chromium yang membuat perubahan tak terduga ke kelas mana pun. <br><br>  Browser kami untuk semua platform dibangun menggunakan dentang.  Untuk mengatasi masalah melestarikan kelas Blink, kami membuat plugin untuk dentang, yang membangun AST (pohon sintaksis abstrak) untuk kelas.  Misalnya, kode ini: <br><br><div class="spoiler">  <b class="spoiler_title">Kode kelas</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bar</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> foo_namespace::Foo { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BarInternal</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> int_field_; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> float_field_; } bar_internal_field_; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> string_field_; };</code> </pre> <br></div></div><br>  Itu berubah menjadi XML seperti itu: <br><br><div class="spoiler">  <b class="spoiler_title">Hasil plugin dalam XML</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>bar_namespace::Bar::BarInternal<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_union</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_union</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_abstract</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_abstract</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">decl_source_file</span></span></span><span class="hljs-tag">&gt;</span></span>src/bar.h<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">decl_source_file</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">base_class_names</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">base_class_names</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fields</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>int_field_<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">builtin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>int<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">builtin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>float_field_<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">builtin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>float<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">builtin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>bar_namespace::Bar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_union</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_union</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_abstract</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_abstract</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">decl_source_file</span></span></span><span class="hljs-tag">&gt;</span></span>src/bar.h<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">decl_source_file</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">base_class_names</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class_name</span></span></span><span class="hljs-tag">&gt;</span></span>foo_namespace::Foo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class_name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">base_class_names</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fields</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>bar_internal_field_<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>bar_namespace::Bar::BarInternal<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>string_field_<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">is_const</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>std::string<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">field</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fields</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br>  Selanjutnya, skrip lain yang ditulis oleh kami menghasilkan kode C ++ dari informasi ini untuk menyimpan dan memulihkan kelas, yang termasuk dalam perakitan Yandex.Browser. <br><br><div class="spoiler">  <b class="spoiler_title">C ++ menyimpan kode yang diperoleh dengan skrip dari XML</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">serialize_bar_namespace_Bar_BarInternal</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( WriteVisitor* writer, Bar::BarInternal* instance)</span></span></span><span class="hljs-function"> </span></span>{ writer-&gt;WriteBuiltin&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>&gt;(instance-&gt;int_vector_field_.size()); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; item : instance-&gt;int_vector_field_) { writer-&gt;WriteBuiltin&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(item); } writer-&gt;WriteBuiltin&lt;<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>&gt;(instance-&gt;float_field_); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">serialize_bar_namespace_Bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(WriteVisitor* writer, Bar* instance)</span></span></span><span class="hljs-function"> </span></span>{ serialize_foo_namespace_Foo(writer, instance); serialize_bar_namespace_Bar_BarInternal( writer, &amp;instance-&gt;bar_internal_field_); writer-&gt;WriteString(instance-&gt;string_field_); }</code> </pre> <br></div></div><br>  Secara total, kami menghasilkan kode untuk sekitar 1000 kelas Blink.  Sebagai contoh, kami belajar untuk menyelamatkan kelas yang kompleks seperti Canvas.  Anda bisa menggambar darinya dalam kode JS, mengatur banyak properti, mengatur parameter kuas untuk menggambar, dan sebagainya.  Kami menyimpan semua properti, parameter, dan gambar itu sendiri. <br><br>  Setelah berhasil mengenkripsi dan menyimpan semua data ke hard disk, proses tab diturunkan dari memori hingga pengguna kembali ke tab ini.  Di antarmuka, seperti sebelumnya, itu tidak menonjol. <br><br>  Pemulihan tab tidak instan, tetapi jauh lebih cepat daripada saat mengunduh dari jaringan.  Namun demikian, kami melakukan langkah yang rumit agar tidak mengganggu pengguna dengan kilasan layar putih.  Kami menampilkan tangkapan layar dari halaman yang dibuat selama fase simpan.  Ini membantu kelancaran transisi.  Kalau tidak, proses pemulihan mirip dengan navigasi normal dengan satu-satunya perbedaan adalah bahwa browser tidak membuat permintaan jaringan.  Ini menciptakan struktur bingkai dan pohon DOM di dalamnya, dan kemudian menggantikan keadaan V8. <br><br>  Kami merekam video dengan demonstrasi yang jelas tentang bagaimana Hibernate membongkar dan mengembalikan tab klik sambil menjaga kemajuan dalam permainan JS yang dimasukkan dalam posisi teks dan video: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/T6Gtc1TVAdM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Ringkasan </h2><br>  Dalam waktu dekat, teknologi Hibernate akan tersedia untuk semua pengguna Yandex.Browser untuk Windows.  Kami juga berencana untuk mulai bereksperimen dengan itu dalam versi alpha untuk Android.  Dengan itu, Browser menghemat memori lebih efisien dari sebelumnya.  Misalnya, untuk pengguna dengan sejumlah besar tab terbuka, Hibernate menyimpan rata-rata lebih dari 330 megabita memori dan tidak kehilangan informasi di tab, yang tetap dapat diakses dalam satu klik di bawah kondisi jaringan apa pun.  Kami memahami bahwa akan bermanfaat bagi webmaster untuk mempertimbangkan membongkar tab latar belakang, jadi kami berencana untuk mendukung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">API Siklus Hidup Halaman</a> . <br><br>  Hibernate bukan satu-satunya solusi kami yang bertujuan menghemat sumber daya.  Ini bukan tahun pertama kami bekerja untuk memastikan bahwa Browser beradaptasi dengan sumber daya yang tersedia di sistem.  Misalnya, pada perangkat yang lemah, Browser memasuki mode yang disederhanakan, dan ketika laptop terputus dari sumber daya, itu mengurangi konsumsi daya.  Menyimpan sumber daya adalah cerita besar dan rumit, yang mana kita pasti akan kembali ke Habré. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id423507/">https://habr.com/ru/post/id423507/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id423497/index.html">Mari kita coba berbicara tentang mesin status hierarkis secara umum dan dukungannya pada SObjectizer-5 pada khususnya</a></li>
<li><a href="../id423499/index.html">DevBoy - bagaimana saya membuat proyek perangkat sumber terbuka dan meluncurkan proyek di Kickstarter</a></li>
<li><a href="../id423501/index.html">Cari dan kreasi gaya visual untuk proyek desain</a></li>
<li><a href="../id423503/index.html">Pengalaman saya bergerak, hidup dan belajar di Jerman</a></li>
<li><a href="../id423505/index.html">Zuckerberg menjual saham Facebook seharga $ 13 miliar sehingga "anak-anak kita tidak perlu sakit"</a></li>
<li><a href="../id423511/index.html">Mencegah instalasi Firefox dan Chrome di Windows 10</a></li>
<li><a href="../id423513/index.html">Kami menghemat pengontrol RAID, atau cara memberi makan Varia dengan Iops</a></li>
<li><a href="../id423515/index.html">Apakah KERING baik atau dapat merusak O dari SOLID</a></li>
<li><a href="../id423519/index.html">Wandering Monster: cara menyingkirkan masalah di peta</a></li>
<li><a href="../id423521/index.html">Tujuh aturan praktis untuk bereksperimen dengan situs web</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>