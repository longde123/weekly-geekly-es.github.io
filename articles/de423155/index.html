<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍱 ⛺️ ✍🏾 MIT-Kurs "Computer Systems Security". Vorlesung 8: Netzwerksicherheitsmodell, Teil 2 🐋 🌿 🗻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Massachusetts Institute of Technology. Vorlesung # 6.858. "Sicherheit von Computersystemen." Nikolai Zeldovich, James Mickens. 2014 Jahr 
 Computer Sy...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MIT-Kurs "Computer Systems Security". Vorlesung 8: Netzwerksicherheitsmodell, Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/423155/"><h3>  Massachusetts Institute of Technology.  Vorlesung # 6.858.  "Sicherheit von Computersystemen."  Nikolai Zeldovich, James Mickens.  2014 Jahr </h3><br>  Computer Systems Security ist ein Kurs zur Entwicklung und Implementierung sicherer Computersysteme.  Die Vorträge behandeln Bedrohungsmodelle, Angriffe, die die Sicherheit gefährden, und Sicherheitstechniken, die auf jüngsten wissenschaftlichen Arbeiten basieren.  Zu den Themen gehören Betriebssystemsicherheit, Funktionen, Informationsflussmanagement, Sprachsicherheit, Netzwerkprotokolle, Hardwaresicherheit und Sicherheit von Webanwendungen. <br><br>  Vorlesung 1: „Einführung: Bedrohungsmodelle“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 2: „Kontrolle von Hackerangriffen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 3: „Pufferüberläufe: Exploits und Schutz“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 4: „Trennung von Privilegien“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 5: „Woher kommen Sicherheitssysteme?“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> <br>  Vorlesung 6: „Chancen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 7: „Native Client Sandbox“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 8: „Netzwerksicherheitsmodell“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <a name="habracut"></a><br><br>  Was passiert also, wenn der Browser das Objekt nicht korrekt verarbeitet und seinen Typ nicht identifizieren kann?  In diesem Fall können Sicherheitsprobleme auftreten.  Einer von ihnen wird als MIME-Angriff bezeichnet. <br><br>  Sie sind wahrscheinlich mit MIME vertraut - dies ist eine Art unverschlüsselter Header wie text / html, image.jpeg und so weiter.  Ältere Versionen des IE-Browsers verwendeten dies, weil sie dachten, es würde dem Benutzer helfen.  Manchmal kommt es jedoch vor, dass die Webserver der Objektdatei die falsche Erweiterung zuweisen. <br><br>  Ein falsch konfigurierter Webserver kann das Suffix .html an die tatsächliche Erweiterung .jpeg anhängen oder umgekehrt beispielsweise foo.jpg anstelle von foo.html erstellen. <br><br><img src="https://habrastorage.org/webt/e_/ki/nn/e_kinnj8a4wb3_xvaxxyi6pnrtk.jpeg"><br><br>  In den alten Tagen hat IE versucht, Ihnen zu helfen.  Das heißt, er ging, um eine Art Ressource zu nehmen, während er dachte: "OK, diese Ressource behauptet, gemäß ihrer Dateinamenerweiterung von diesem Typ zu sein."  Dann betrachtet er jedoch nur die ersten 256 Bytes, die in diesem Objekt verfügbar sind.  Und wenn er dort bestimmte magische Bedeutungen fand, die darauf hinwiesen, dass es für dieses Objekt eine andere Art von Erweiterung gab, würde er einfach sagen: „Hey, ich habe hier etwas Cooles gefunden!  "Ich denke, der Webserver hat dieses Objekt fälschlicherweise definiert. Lassen Sie mich dieses Objekt einfach als den Typ behandeln, den ich in diesen ersten 256 Bytes gefunden habe." <br>  Und dann wird jeder zum Gewinner, denn ein Browser wie hat dem Entwickler des Webservers geholfen, da nun seine Seite richtig angezeigt wird.  Und der Benutzer wird es mögen, weil er diesen Inhalt freischalten kann, der früher nur Müll war. <br><br>  Dies ist jedoch eine eindeutige Sicherheitslücke!  Angenommen, die Seite enthält passiven Inhalt, z. B. ein Bild aus einer von einem Angreifer kontrollierten Domäne.  Auf der Seite des Opfers heißt es jedoch: "Auch wenn es sich um den Inhalt einer böswilligen Hacker-Website handelt, handelt es sich nur um passiven Inhalt."  Er kann mir nichts antun! “  Im Extremfall wird ein nicht erfolgreiches Bild angezeigt, es kann jedoch kein Code geöffnet werden, da passiver Inhalt keine Berechtigungen hat. <br><br><img src="https://habrastorage.org/webt/s4/62/z0/s462z0mmu0slljkim8tc2jwkdhm.jpeg"><br><br>  Tatsache ist jedoch, dass der IE dieses Bild, seine ersten 256 Bytes, zuerst "schnüffeln" kann.  Und ein Angreifer kann dort absichtlich HTML- und JavaScript-Code einfügen.  Dann stellt sich heraus, dass die Website des Opfers ein Bild enthält, das es für ein Bild hält, und der IE im Kontext der eingebetteten Seite schädlichen Code ausführt. <br><br>  Dies ist eine Art Beispiel dafür, wie komplex Browser sind und wie das Hinzufügen selbst sehr guter Absichten zu sehr subtilen Sicherheitsfehlern führen kann.  Schauen wir uns also genauer an, wie der Browser verschiedene Ressourcen schützt. <br><br>  Schauen wir uns die Frames und Fensterobjekte an (Objekte, die ein Fenster sind, das ein DOM-Dokument enthält).  Frames repräsentieren diese unabhängigen JavaScript-Universen, über die wir hier gesprochen haben.  Ich meine, JavaScript ist eine Instanz des DOM-Knotens, wie im Bild des DOM-Baums gezeigt. <br><br>  Auf diese Weise existiert der Frame als DOM-Knotenobjekt irgendwo in dieser Hierarchie, die für JavaScript sichtbar ist. <br><br>  In JavaScript ist das Fensterobjekt tatsächlich ein Alias ​​für den globalen Namespace.  Es klingt nach einer dummen Idee.  Das heißt, wenn Sie den Namen der globalen Variablen x finden würden, könnten Sie auch über den Namen window.x darauf zugreifen. <br><br>  Daher sind Frames und Fensterobjekte sehr leistungsfähige Referenzen, um Ihnen den Zugriff zu erleichtern.  Und sie enthalten Zeiger aufeinander.  Ein Frame kann einen Zeiger auf ein verknüpftes Fensterobjekt enthalten und umgekehrt.  In der Tat sind diese beiden Dinge gleichwertig. <br>  Sowohl Frames als auch Fensterobjekte erhalten den Ursprungsursprungsursprung vom URL-Frame. Da sie sich immer in einem sicheren Teil des Netzwerks befinden, können sie das Suffix des ursprünglichen Domainnamens, dh seines ursprünglichen Ursprungs, erhalten. <br><br>  Ein Frame kann beispielsweise folgendermaßen beginnen: .xyzcom. Hier können Sie das Schema und das Protokoll für eine Sekunde ignorieren. <br><br>  In diesem Fall können wir davon ausgehen, dass die Ursprungsquelle für (document.domain) das Suffix yzcom ist.  Ebenso ist die Ursprungsquelle für dieses Dokument der Ausdruck z.com.  Dies ist möglich, da z.com ein Suffix von yzcom ist. <br><br><img src="https://habrastorage.org/webt/5r/pb/fb/5rpbfbklmhp9nszl2vmgm2pedfw.jpeg"><br><br>  Das einzige, was nicht als solche Quelle dienen kann, ist der Ausdruck .ayzcom, da er das falsche Suffix für die Herkunftsquelle ist.  Außerdem kann das korrekte Quellensuffix der Ursprungsquelle nicht einfach als .com betrachtet werden, da die Website in diesem Fall Cookies oder ähnliches auf Websites wie .com irgendwie beeinflussen kann, was ziemlich verheerende Folgen haben kann. <br><br>  Die Motivation dafür, warum diese Art von Dingen akzeptabel ist, besteht darin, dass sie mit einer bestehenden Vertrauensbeziehung zusammenhängen.  Es scheint also, dass mit den drei wichtigsten Parametern alles in Ordnung ist und die Störung nur in .com vorliegt. <br><br>  <b>Teilnehmerin: Es</b> stellt sich heraus, dass es möglich ist, solche Aufteilungen an jedem Punkt oder am Endpunkt vorzunehmen.  Kann Ihr xyzcom beispielsweise in Ihr z.com geändert werden? <br><br>  <b>Professor:</b> Nein, das gilt nur für jeden Punkt. <br><br><img src="https://habrastorage.org/webt/cl/hw/kb/clhwkbpkjrgytglv9vr0ul-3zdc.jpeg"><br><br>  <b>Zielgruppe: Gibt</b> es einen Grund, warum dies nicht getan wurde, um eine Super- oder Subdomain anzugeben, aber gleichzeitig sollten sie sich irgendwie darauf einigen, woher die Informationen kommen?  Nehmen wir an, ich möchte nur das akzeptieren, was denselben Ursprung hat wie ich, damit mich jede dieser Ressourcen angreifen kann.  Außerdem würden wir diese Interaktion symmetrisch machen, damit ich sie auch beeinflussen kann.  Schließlich bedeutet das Quellensuffix .com, dass alles, was dasselbe .com-Suffix hat, mich beeinflussen kann. <br><br>  <b>Professor:</b> Ja, das ist schwierig, daher gibt es mehrere Antworten auf diese Frage.  Erstens waren die Leute sehr besorgt über die Möglichkeit eines Angriffs mit .com.  Daher wollten sie die Sprache der Domänenmanipulation leicht verständlich machen.  Daher erlaubten sie nicht, die Einstellungen zu verderben. <br><br>  In einer Sekunde werde ich über eine Sache sprechen, mit der Sie das tun können, worüber Sie sprechen, aber nur über Domain-Suffixe.  Im Moment möchte ich darauf hinweisen, dass die Post-Message-Oberfläche es Domänen ermöglicht, miteinander zu kommunizieren, wenn sie dem zustimmen.  In der Praxis verwenden Benutzer Post Message, um eine domänenübergreifende Kommunikation zu implementieren, wenn sie mit den oben beschriebenen Tricks nicht dieselbe Herkunftsquelle ermitteln können.  Auf diese Weise können Browser Domänen gemäß diesen Suffixen der Quelldomäne einschränken.  Und hier gibt es auch eine kleine interessante Nuance - Browser verstehen, wann (document.domain) geschrieben werden kann und wann nicht. <br><br>  Dafür gibt es einen Grund, den wir gleich betrachten werden.  Somit können zwei Frames aufeinander zugreifen, wenn mindestens eine der folgenden beiden Bedingungen erfüllt ist: <br><br><ul><li>  beide Framesätze setzen (document.domain) den gleichen Wert; </li><li>  Keiner dieser Frames kann sich ändern (document.domain), obwohl der Wert dieses Dokuments in beiden Frames gleich ist. </li></ul><br><img src="https://habrastorage.org/webt/7g/sw/lr/7gswlr-7f7br4psxicyzxe5ulyy.jpeg"><br><br>  Die Hauptidee dieser Regeln ist, dass sie die Domain vor Angriffen schützen, die durch ihre eigenen Fehler oder die Schädlichkeit einer der Subdomains verursacht werden. <br><br>  Stellen Sie sich vor, Sie haben eine xyzcom-Domain, die versucht, die yzcom-Domain anzugreifen, weil die erste Domain einen Fehler enthält oder böswillig ist.  Er wird versuchen, die yzcom-Domain auf ein .com-Aussehen zu verkürzen, und dann beginnen, mit dem Status von JavaScript, Cookies oder anderen Dingen zu „chemisieren“. <br><br><img src="https://habrastorage.org/webt/ws/9g/7n/ws9g7n_geybc_ajfui0amho8ir4.jpeg"><br><br>  Diese beiden Regeln bedeuten also, dass wenn yzcom niemandem erlauben möchte, mit ihm zu interagieren, der Wert (document.domain) niemals geändert wird.  Wenn der xyzcom-Frame ihn kürzen möchte, sagt der Browser: "Ja, Sie möchten ihn kürzen, aber Sie haben kein Recht dazu!"  Es gibt ein Zusammentreffen von Werten, aber die yzcom-Domain hat nicht angegeben, dass sie daran teilnehmen möchte.  Das ist klar?  In diesem Fall ist ersichtlich, dass die meisten Frames mit derselben Ursprungsrichtlinie arbeiten. <br><br>  Jetzt können wir sehen, wie unser DOM-Knoten verarbeitet wird.  Es ist ziemlich einfach.  In der Regel erhalten DOM-Knoten ihren Ursprung im umgebenden Frame.  Bei Cookies ist dies etwas komplizierter.  Cookies haben eine Domain und sie haben ihren eigenen Weg.  Sie können sich beispielsweise vorstellen, dass ein Cookie mit den folgenden Informationen verknüpft ist, z. B. * .mit.edu / 6.858.  In diesem Fall hat das Cookie eine * .mit.edu / domain und einen Pfad 6.858. <br><br><img src="https://habrastorage.org/webt/4-/s3/yx/4-s3yxjeuwvhrmnftskqrmbvk30.jpeg"><br><br>  Bitte beachten Sie, dass diese Domain möglicherweise das vollständige Suffix der Seiten in der aktuellen Domain ist.  Sie können also mit ihm dieselben Tricks ausführen wie mit denen, über die wir zuvor gesprochen haben.  Beachten Sie, dass dieser Pfad 6.858 auch als Schrägstrich gefolgt von nichts dargestellt werden kann, was darauf hinweist, dass alle Domänenpfade Zugriff auf das hier befindliche Cookie haben müssen. <br><br>  In diesem Fall haben wir jedoch eine bestimmte Pfadadresse.  Wer diese Cookies setzt, kann sehen, wie die Domain und der Pfad aussehen.  Diese Werte können sowohl auf der Serverseite als auch auf der Clientseite festgelegt werden.  Auf der Clientseite haben Sie ein JavaScript-Objekt namens document.cookie.  In diesem Format werden alle Pfade zu ähnlichen Objekten angegeben. <br><br>  Es gibt ein Sicherheitsflag mit sicherem Flag, das Sie für ein Cookie setzen können, um anzuzeigen, dass es sich um eine HTTPS-Datei handelt.  In diesem Fall sollte der HTTP-Inhalt keinen Zugriff auf dieses Cookie haben.  Dies ist die Hauptidee von Cookies. <br><br>  Bitte beachten Sie, dass ein Browser, wenn er eine Anfrage an einen bestimmten Webserver generiert, alle relevanten Cookies in diese Anfrage einbezieht.  Es gibt eine Art Korrespondenz und Algorithmen, die es ermöglichen, herauszufinden, dass dies die richtigen Cookies sind, die als Antwort auf eine Anfrage gesendet werden sollten, da sie möglicherweise seltsame Dinge mit Domain-Suffixen usw. enthalten. <br><br>  <b>Zielgruppe:</b> Können Frames auf die Cookies des anderen zugreifen, wenn sie diesen Regeln entsprechen? <br><br>  <b>Professor:</b> Ja, Frames können das.  Dies hängt jedoch davon ab, wie document.domain, die Cookie-Domäne und der Pfad festgelegt sind.  Frames können also auf die Cookies des anderen zugreifen, daher stellt sich die Frage: Kann es ein Problem geben, wenn wir zulassen, dass beliebige Frames beliebige Cookies an Personen schreiben?  Es genügt zu sagen, dass es schlecht sein wird.  Der Grund, warum dies schlecht ist, liegt darin, dass diese Cookies es der Client-Seite der Anwendung ermöglichen, Benutzerdaten zu speichern. <br><br>  Sie können sich also vorstellen, dass ein Angreifer, wenn er Benutzer-Cookies steuern oder überschreiben kann, beispielsweise das Cookie für Google Mail so ändern kann, dass sich der Benutzer über das Google Mail-Konto dieses Angreifers anmeldet.  In diesem Fall könnte jeder Benutzerbrief von einem Angreifer gelesen werden.  Sie können sich vorstellen, dass jemand Cookies von Amazon.com erhalten kann, um alle Arten von lächerlichen Einkäufen und dergleichen in Ihren Warenkorb zu legen. <br><br>  Cookies sind daher eine sehr wichtige Ressource für den Schutz.  Und viele Netzwerksicherheitsangriffe sind darauf ausgelegt, sie zu stehlen und ihnen Schaden zuzufügen. <br>  Es gibt noch eine weitere interessante Frage zu Cookies.  Angenommen, Sie haben eine Website foo.co.uk.  Was ist, wenn eine Site mit diesem Hostnamen Cookies für co.uk setzen kann? <br><br><img src="https://habrastorage.org/webt/5d/96/kj/5d96kjqqlanivfvv7zm8cqud3vk.jpeg"><br><br>  Es gibt hier eine Subtilität in Bezug auf die Regeln, die wir zuvor besprochen haben, da die erste Site in der Lage sein sollte, ihre Domain zu verkürzen und Cookies für die zweite zu setzen. Hier scheint alles legal zu sein.  Aber aus menschlicher Sicht betrachten wir es mit Argwohn, weil wir verstehen, dass co.uk eine einzelne atomare Domäne ist.  Dies entspricht jedoch .com.  Wir können sagen, dass die Briten es vermasselt haben, dass sie hier einen Punkt haben sollten.  Aber das ist nicht ihre Schuld.  Aus moralischer Sicht ist dies eine einzelne Domäne, die nicht gebrochen werden kann.  Daher müssen wir über eine spezielle Infrastruktur verfügen, damit Cookies ordnungsgemäß funktionieren. <br><br>  Mozilla hat eine Website namens publicsuffix.org, die Listen mit Regeln enthält, wie Cookies, Herkunft und Domains gekürzt werden sollten, wobei zu berücksichtigen ist, dass in einigen Dingen möglicherweise Punkte vorhanden sind, während sie tatsächlich als ein einzelnes Atom betrachtet werden sollten das ganze. <br><br>  Wenn Ihr Browser herausfindet, wie er verschiedene Cookies manipulieren soll, muss er diese Seite des Problems überprüfen.  Oder stellen Sie irgendwie sicher, dass foo.co.uk die Domain nicht auf co.uk verkürzen kann.  Hier gibt es also ein sehr heikles Thema. <br><br>  Es gibt viele weitere interessante Probleme mit der Websicherheit, die wir dabei entdecken, da ein Großteil der ursprünglichen Infrastruktur speziell für die englische Sprache entwickelt wurde.  Zum Beispiel ASCII-Text oder ähnliches.  Es war ursprünglich nicht für die internationale Gemeinschaft gedacht. <br><br>  Aber als das Internet immer beliebter wurde, sagten die Leute: „Hey, am Anfang haben wir ein ziemlich umfangreiches Lösungsdesign erstellt, und jetzt müssen wir es für Menschen geeignet machen, die gezwungen sind, unser enges Verständnis der Bedeutung von Sprache zu nutzen.“  Deshalb stehen wir jetzt vor all diesen verrückten Problemen. <br><br>  Überlegen Sie, wie HTTP-XML-Antworten von derselben Ursprungsquellenrichtlinie behandelt werden.  Standardmäßig kann JavaScript nur eines davon generieren, wenn es auf seinem Ursprungsserver erstellt wird.  Es gibt jedoch eine neue Schnittstelle namens Cross Origin Request (CORS). <br><br>  Dies ist also derselbe Ursprung, es sei denn, der Server hat dieses CORS-Gizmo aktiviert.  Grundsätzlich wird ein neuer HTTP-Antwortheader mit dem Namen Access-Control-Allow-Origin hinzugefügt. <br><br><img src="https://habrastorage.org/webt/4s/io/ow/4sioowzgalikh7xv3q9qui9vmo8.jpeg"><br><br>  Angenommen, JavaScript von foo.com möchte eine XML-HTTP-Anfrage an bar.com senden.  Wie in den Regeln beschrieben, findet hier ein Cross-Origin statt.  Und wenn der bar.com-Server dies zulassen möchte, gibt er seine HTTP-Antwort mit der Überschrift zurück: "Ja, ich lasse mich von foo.com diese originenübergreifenden XML-XML-Anforderungen senden." <br><br>  Tatsächlich kann der bar.com-Server mit "Nein" antworten, dh er kann die Anfrage ablehnen.  In diesem Fall kann der Browser die HTTP-XML-Anforderung nicht ausführen.  Das ist also eine Art neue Sache, die hauptsächlich aufgrund gemischter Anwendungen auftrat.  Es wird für Anwendungen von verschiedenen Entwicklern und verschiedenen Domänen benötigt, damit sie die Möglichkeit haben, Daten miteinander auszutauschen. <br><br><img src="https://habrastorage.org/webt/n9/kd/w5/n9kdw5p-sfayoij0_sxnef7ct9i.jpeg"><br><br>  Anstelle von foo.com können hier Sternchen stehen, wenn jemand Ursprungsdaten abrufen möchte, und so weiter.  Ich finde das ziemlich einfach.  Es gibt eine Reihe anderer Ressourcen, die wir uns ansehen könnten, z. B. Bilder.  Dank Access-Control-Allow-Origin kann ein Frame Bilder von jeder gewünschten Quelle laden.  Er kann jedoch die Teile dieses Bildes nicht überprüfen, da angenommen wird, dass es bei unterschiedlichen Richtlinien für Herkunftsquellen nicht gut ist, den Inhalt der Dateien des jeweils anderen zu überprüfen. <br><br>  Obwohl der Rahmen die Bits nicht überprüfen kann, kann er dennoch auf die Größe der Bilder schließen, da er sieht, wie sie auf der Seite platziert werden.  Dies ist also ein weiterer dieser seltsamen Fälle, in denen dieselbe Herkunftsquelle angeblich versucht, alle Informationslecks zu verhindern.  Tatsächlich kann dies jedoch nicht verhindert werden, da durch das Einbetten der Vererbung tatsächlich einige Arten von Informationen angezeigt werden. <br><br>  CSS ähnelt Bildern, sodass ein Frame CSS aus jeder Quelle einbetten kann.  Der Text in der CSS-Datei kann jedoch nicht direkt überprüft werden, wenn er aus einer anderen Quelle stammt.  Aber er kann erkennen, was dieses CSS tut, weil er einfach eine Reihe von Knoten erstellt und dann beobachtet, wie sich ihr Stil ändert.  Und es sieht ein bisschen seltsam aus. <br><br>  JavaScript ist mein Lieblingsbeispiel dafür, wie dieselbe Ursprungsrichtlinie versucht, jede Art von intelligenter Sequenz zu unterstützen.  Die Idee hier ist, dass dies zulässig ist, wenn Sie JavaScript über Kreuz abrufen.  Sie können die Ausführung von externem JavaScript im Kontext Ihrer eigenen Seite aktivieren, den Quellcode jedoch nicht anzeigen. <br><br><img src="https://habrastorage.org/webt/rn/7k/fo/rn7kfohopdovwvtszam718nrnge.jpeg"><br><br>  Wenn Sie also eine Skript-Tag-Quelle haben, die etwas außerhalb Ihrer Domäne entspricht, können Sie bei Ausführung dieser Quelle Funktionen darin initiieren.  Sie können den darin enthaltenen JavaScript-Quellcode jedoch nicht anzeigen. <br><br>  Das alles sieht sehr gut aus, hat aber ein paar "Löcher".  Beispielsweise ist JavaScript eine dynamische Skriptsprache.  Und Funktionen sind erstklassige Objekte.  Somit können Sie für jede Funktion f einfach die Funktion f.tostring () verwenden, und dies gibt Ihnen den Quellcode für die Funktion f.  Und die Leute machen das die ganze Zeit, sie machen dynamisches Umschreiben und dergleichen. <br><br><img src="https://habrastorage.org/webt/yl/0s/cc/yl0scc_w8oeuvq5syu4dajkaer8.jpeg"><br><br>  Obwohl Sie mit den Ursprungsrichtlinien den Inhalt des Skript-Tags nicht direkt anzeigen können, können Sie einfach den angegebenen Vorgang ausführen und den Quellcode abrufen. <br><br>  Ebenso können Sie Ihren Heimserver von Ihrer Domain abrufen, um den Quellcode darauf abzurufen und ihn dann an Sie zurückzusenden.  Das heißt, Sie haben gerade Ihren Heimserver gebeten, das Wget-Programm auszuführen, um den Quellcode auf diese Weise abzurufen.  Es sieht also auch ein bisschen albern aus, das heißt, die Ursprungspolitik hier ist etwas seltsam. <br><br>  <b>Zielgruppe:</b> Angenommen, der Grund dafür ist, dass der Benutzer keinen JavaScript-Empfang erhält, da dann auch Cookies gesendet werden können.  Das heißt, der Benutzer kann das resultierende JavaScript an seine Bedürfnisse anpassen. <br><br>  <b>Professor:</b> Ja, das ist es. <br><br>  <b>Zielgruppe:</b> Wenn Sie Ihren Server dazu veranlassen, kann er Ihnen keine benutzerdefinierten Cookies bereitstellen. <br><br>  <b>Professor:</b> Dies ist wahr, obwohl in der Praxis der "rohe" Quellcode nicht dazu gedacht ist, vom Benutzer überarbeitet zu werden.  Aber Sie haben Recht, dass dies einige Angriffe verhindern wird. <br><br> ,    ,         JavaScript,         . ,   -  ,   -,       ,       .          ,        ,   ,      .   ,  ,     . <br><br>       ,          .       -  - ,     -    HTML  JavaScript. ,    ,        .           . <br><br> ,     JavaScript,   ,   .    Java,         . <br><br><img src="https://habrastorage.org/webt/zj/qj/e1/zjqje1nf_k3svnoo1xfel-l33p0.jpeg"><br><br>       ,    HTML5     , ,      ,     ,     Java.    ,      . <br><br> ,      HTTP,        cookie.    ,     URL,    ? <br><br><img src="https://habrastorage.org/webt/vh/xg/qq/vhxgqqg7q7zf7qpw1dzh8dk8ir0.jpeg"><br><br> ,       URL- bank.com.     ,          - .  ,    URL,   ,    ,      $500     .      ,      . <br><br>    —           ,       origin,  bank.com -   ,   ,       cookie    .       : «, , ,    $500      attacker! ,   ». <br>     .    , ,  ,     ,     .     .  ,         , ,    ,   -          .  ,     ,  CSRF. <br><br>      ,       URL.   ,    c  . <br><br>  ,   -    .  –  ,        ,    : <br><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">“/transfer.cdi”…</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  In diesem Formular befinden sich die Eingabedaten, die normalerweise zur Eingabe von Text, Tastenanschlägen, Mausklicks und dergleichen verwendet werden.  Tatsächlich können wir diese Eingabe ausblenden, damit sie nicht auf der Benutzerseite angezeigt wird: Eingabetyp = "ausgeblendet", geben Sie den Attributnamen = "csrf" und den Zufallswert = "a72f ..." an.  Dieses Formular wird auf dem Server generiert. <br><br><img src="https://habrastorage.org/webt/70/za/85/70za85q7xzz7ts5bfyhs7pjd-8m.jpeg"><br><br>  Wenn der Benutzer diese Seite auf der Serverseite aufruft, generiert der Server diesen Zufallswert = "a72f ..." und bettet ihn in den HTML-Code ein, den der Benutzer erhält.  Wenn der Benutzer dieses Formular ausfüllt, lautet diese URL des Formulars: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bank.com/xfer?amount=500&amp;to=attacker</a> <br><br>  Es wird mit einem zufälligen Token ergänzt: <br><br><pre> <code class="hljs objectivec">http:<span class="hljs-comment"><span class="hljs-comment">//bank.com/xfer?amount=500&amp;to=attacker/&amp;csrf=a72f...</span></span></code> </pre> <br>  Dies bedeutet, dass der Angreifer nun in der Lage sein sollte, das spezifische Token zu erraten, das der Server für den Benutzer jedes Mal generiert, wenn er zur Bankseite wechselt.  Wenn wir also einen ausreichend zufälligen Wert haben, kann der Hacker nichts vortäuschen, denn wenn er das falsche Token angibt, lehnen die Serverregeln seine Anfrage ab. <br><br>  58:00 min <br><br>  Fortsetzung: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MIT-Kurs "Computer Systems Security".</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vorlesung 8: Netzwerksicherheitsmodell, Teil 3</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_1C62Twf0vs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Die Vollversion des Kurses finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br>  Vielen Dank für Ihren Aufenthalt bei uns.  Gefällt dir unser Artikel?  Möchten Sie weitere interessante Materialien sehen?  Unterstützen Sie uns, indem Sie eine Bestellung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aufgeben</a> oder Ihren Freunden empfehlen, einen <b>Rabatt von 30% für Habr-Benutzer auf ein einzigartiges Analogon von Einstiegsservern, das wir für Sie erfunden haben:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die ganze Wahrheit über VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s von $ 20 oder wie teilt man den Server?</a>  (Optionen sind mit RAID1 und RAID10, bis zu 24 Kernen und bis zu 40 GB DDR4 verfügbar). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s bis Dezember kostenlos,</b> wenn Sie für einen Zeitraum von sechs Monaten bezahlen, können Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> bestellen. <br><br>  <b>Dell R730xd 2 mal günstiger?</b>  Nur wir haben <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 GB DDR4 6 x 480 GB SSD 1 Gbit / s 100 TV von 249 US-Dollar</a> in den Niederlanden und den USA!</b>  Lesen Sie mehr über <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Aufbau eines Infrastrukturgebäudes.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Klasse mit Dell R730xd E5-2650 v4 Servern für 9.000 Euro für einen Cent?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de423155/">https://habr.com/ru/post/de423155/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de423143/index.html">Oktober Slerm: Intensiv auf Kubernetes</a></li>
<li><a href="../de423147/index.html">Über die Speicherstrategie und das Speicherformat in der Hadoop-Ära</a></li>
<li><a href="../de423149/index.html">Direkter Vergleich der Methoden zur Korrektur von Laser-Myopie oder Ihrer Bezahlung bei der Auswahl von ReLEx SMILE</a></li>
<li><a href="../de423151/index.html">Globale Objekte in PHP</a></li>
<li><a href="../de423153/index.html">Node.js-Handbuch, Teil 2: JavaScript, V8, einige Entwicklungstricks</a></li>
<li><a href="../de423157/index.html">Verwendung der Funktion connect () von react-redux</a></li>
<li><a href="../de423159/index.html">Glücklicher Programmiertag! Liebe deine Entwickler</a></li>
<li><a href="../de423161/index.html">Unternehmen wollen personenbezogene Daten</a></li>
<li><a href="../de423163/index.html">CryptoPro mit Mono verbinden</a></li>
<li><a href="../de423165/index.html">Dynamische Netzzeichnung in Unreal Engine 4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>