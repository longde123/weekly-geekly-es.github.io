<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõÅ üë¢ üíß D√©plac√© de Terraform vers CloudFormation - et regrett√© üÜñ ü•´ ‚úãüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La pr√©sentation de l'infrastructure sous forme de code au format texte reproductible est une pratique exemplaire simple pour les syst√®mes avec lesquel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©plac√© de Terraform vers CloudFormation - et regrett√©</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/474546/"><p>  La pr√©sentation de l'infrastructure sous forme de code au format texte reproductible est une pratique exemplaire simple pour les syst√®mes avec lesquels vous n'avez pas besoin de vous d√©placer.  Cette pratique a un nom - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Infrastructure as Code</a> , et jusqu'√† pr√©sent, il existe deux outils populaires pour sa mise en ≈ìuvre, en particulier dans AWS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Terraform</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CloudFormation</a> . </p><br><p><img src="https://habrastorage.org/webt/ff/f_/rw/fff_rw-n0dk_n_l6qxrxkp_-h9i.png"><br>  <em>Comparez l'exp√©rience avec Terraform et CloudFormation</em> </p><br><p>  Avant de rejoindre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Twitch</a> (alias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Amazon Jr.</a> ), j'ai travaill√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans une startup</a> et utilis√© Terraform pendant trois ans.  Dans un nouvel endroit, j'ai √©galement utilis√© Terraform avec force et main, puis la soci√©t√© a pouss√© la transition vers tout ce qui se passe sur Amazon, y compris CloudFormation.  J'ai travaill√© dur pour d√©velopper les meilleures pratiques pour les deux, et j'ai utilis√© les deux outils dans des workflows tr√®s complexes √† travers l'organisation.  Plus tard, apr√®s avoir soigneusement examin√© les cons√©quences du passage de Terraform √† CloudFormation, je suis devenu convaincu que Terraform √©tait probablement le meilleur choix pour l'organisation. </p><a name="habracut"></a><br><h2 id="terraform-uzhasnyy">  Terraform Horrible </h2><br><h3 id="beta-versiya-po">  Logiciel b√™ta </h3><br><p> Terraform n'a m√™me pas sorti la version 1.0, et c'est une bonne raison de ne pas l'utiliser.  Depuis que je l'ai test√© moi-m√™me, il a beaucoup chang√©, mais l' <code>terraform apply</code> s'est souvent cass√©e apr√®s plusieurs mises √† jour ou juste apr√®s quelques ann√©es de fonctionnement.  Je dirais que "maintenant tout est diff√©rent", mais ... alors tout le monde semble dire non?  Il y a des changements qui sont incompatibles avec les versions pr√©c√©dentes, bien qu'ils soient appropri√©s, et m√™me le sentiment est que la syntaxe et les abstractions des stockages de ressources sont maintenant ce dont vous avez besoin.  L'outil semblait √™tre meilleur, mais ...: -0 </p><br><p>  AWS, d'autre part, a fait du bon travail pour maintenir la compatibilit√© avec les versions pr√©c√©dentes.  Tout cela, probablement, parce que leurs services sont souvent bien test√©s au sein de l'organisation et seulement alors, renomm√©s, publi√©s.  Donc, "essay√© dur" est encore faiblement dit.  Il est extr√™mement difficile de maintenir la compatibilit√© avec les versions pr√©c√©dentes de l'API pour un syst√®me aussi multivari√© et complexe comme AWS.  Quiconque a d√ª prendre en charge des API accessibles au public qui sont utilis√©es aussi largement devrait comprendre √† quel point cela a √©t√© difficile pendant tant d'ann√©es.  Mais le comportement de CloudFormation dans ma m√©moire n'a jamais chang√© au fil des ans. </p><br><h3 id="znakomsya-noga-eto-pulya">  Rencontrez la jambe ... c'est une balle </h3><br><p>  Pour autant que je sache, il n'est pas possible de supprimer une ressource de pile CloudFormation tierce de ma pile CF.  La situation est similaire avec Terraform.  Il vous permet d'importer des ressources existantes dans votre pile.  On pourrait dire que la fonction est impressionnante, mais avec une grande puissance vient une grande responsabilit√©.  Il suffit de placer la ressource sur la pile, et pendant que vous travaillez avec votre pile, vous ne pouvez pas supprimer ou modifier cette ressource.  Une fois arriv√©.  D'une mani√®re ou d'une autre, sur un site Twitch, quelqu'un, sans rien tracer de mal, a accidentellement import√© un groupe de s√©curit√© AWS dans sa propre pile Terraform.  J'ai entr√© plusieurs commandes et ... le groupe de s√©curit√© (ainsi que le trafic entrant) a disparu. </p><br><h2 id="terraform-velikiy">  Terraform Great </h2><br><h3 id="vosstanovlenie-iz-nepolnyh-sostoyaniy">  R√©cup√©ration partielle </h3><br><p>  Parfois, CloudFormation ne peut pas passer compl√®tement d'un √©tat √† un autre.  En m√™me temps, il tentera de revenir √† la pr√©c√©dente.  D√©sol√©, ce n'est pas toujours possible.  Ensuite, le d√©bogage de ce qui s'est pass√© est effrayant - vous ne savez jamais si CloudFormation sera ravi qu'il soit fissur√© - m√™me pour la r√©paration.  Mais r√©ussira-t-il ou ne reviendra-t-il pas √† l'√©tat pr√©c√©dent, il ne sait vraiment pas comment le d√©terminer, et par d√©faut il se bloque pendant des heures en attendant un miracle. </p><br><p>  Terraform, au contraire, est enclin √† se remettre des transitions infructueuses beaucoup plus √©l√©gamment et propose des outils de d√©bogage avanc√©s. </p><br><h3 id="bolee-yasnye-izmeneniya-v-sostoyaniya-dokumenta">  Changements plus clairs dans l'√©tat du document </h3><br><blockquote>  "D'accord, l'√©quilibreur de charge, vous changez. Mais comment?" <br><br>  ‚ÄîUn ing√©nieur inquiet pr√™t √† appuyer sur le bouton d'acceptation. </blockquote><p>  Parfois, j'ai besoin de faire quelques manipulations avec l'√©quilibreur de charge dans la pile CloudFormation - par exemple, ajouter un num√©ro de port ou changer un groupe de s√©curit√©.  Les modifications de CloudFormation s'affichent faiblement.  Comme pour les aiguilles, je rev√©rifie le fichier yaml dix fois pour m'assurer que je n'ai pas effac√© tout ce dont j'avais besoin et que je n'en ai pas ajout√© trop. </p><br><p>  Terraform est beaucoup plus transparent √† cet √©gard.  Parfois, il est m√™me trop transparent (lire: l'obtient).  Heureusement, la derni√®re version comprenait un affichage am√©lior√© des modifications - vous pouvez maintenant voir clairement ce qui change. </p><br><h3 id="gibkost">  Flexibilit√© </h3><br><blockquote>  √âcrivez le logiciel de l'oppos√©. </blockquote><p>  Pour le dire franchement, la caract√©ristique distinctive la plus importante d'un logiciel √† longue dur√©e de vie est sa capacit√© √† s'adapter au changement.  √âcrivez n'importe quel logiciel du contraire.  J'ai souvent perc√© que j'avais pris un service "simple", puis j'ai commenc√© √† tout pousser dans une seule pile CloudFormation ou Terraform.  Et bien s√ªr, des mois plus tard, il a √©t√© r√©v√©l√© que j'avais tout mal compris, et le service n'est en fait pas simple!  Et donc je dois en quelque sorte casser une grande pile en petits composants.  Lorsque vous travaillez avec CloudFormation, il est possible de le faire uniquement en recr√©ant d'abord la pile existante, mais je ne le fais pas avec mes bases de donn√©es.  Terraform, d'autre part, a permis de diss√©quer la pile et de la diviser en plus petites parties plus compr√©hensibles. </p><br><h3 id="moduli-v-git">  Modules en git </h3><br><p>  Le partage de code Terraform sur plusieurs piles est beaucoup plus facile que le partage de code CloudFormation.  Avec Terraform, vous pouvez mettre du code dans un r√©f√©rentiel git et y acc√©der en utilisant le contr√¥le de version s√©mantique.  Toute personne ayant acc√®s √† ce r√©f√©rentiel peut r√©utiliser le code partag√©.  L'√©quivalent de CloudFormation est S3, mais il n'a pas les m√™mes avantages, et il n'y a pas une seule raison pour laquelle nous devrions abandonner compl√®tement git en faveur de S3. </p><br><p>  L'organisation s'est d√©velopp√©e et la capacit√© de partager des piles partag√©es a atteint un niveau critique.  Avec Terraform, tout cela est facile et naturel, tandis que CloudFormation vous fera sauter √† travers les anneaux avant d'obtenir quelque chose de similaire. </p><br><h3 id="operations-as-code">  Op√©rations comme code </h3><br><blockquote>  "Let's script et d'accord." <br><br>  ‚ÄîUn ing√©nieur 3 ans avant d'inventer le v√©lo Terraform. </blockquote><p>  En mati√®re de d√©veloppement logiciel, Go ou un programme Java n'est pas seulement du code. </p><br><p><img src="https://habrastorage.org/webt/qr/pf/ec/qrpfecwuy-rwjaj48w68nzl0asq.png"><br>  <em>Code comme code</em> </p><br><p>  Apr√®s tout, il reste l'infrastructure sur laquelle il fonctionne. </p><br><p><img src="https://habrastorage.org/webt/nm/m8/9e/nmm89e9lu99otghnv73ta7bdqh8.png"><br>  <em>L'infrastructure comme code</em> </p><br><p>  Mais d'o√π vient-elle?  Comment le surveiller?  O√π r√©side votre code?  Les d√©veloppeurs ont-ils besoin d'une autorisation d'acc√®s? </p><br><p><img src="https://habrastorage.org/webt/hz/es/qs/hzesqsiuved-xhcccghgjoraxsi.png"><br>  <em>Op√©rations comme code</em> </p><br><blockquote>  √ätre d√©veloppeur de logiciels ne consiste pas seulement √† √©crire du code. </blockquote><p>  Pas AWS One: vous devez utiliser d'autres fournisseurs.  SignalFx, PagerDuty ou Github.  Peut-√™tre avez-vous un serveur Jenkins interne pour CI / CD ou un panneau de contr√¥le Grafana interne pour la surveillance.  Infra as Code est choisi pour diverses raisons, et tout est √©galement important pour tout ce qui concerne les logiciels. </p><br><p>  Lorsque je travaillais chez Twitch, nous avons acc√©l√©r√© les services au sein des syst√®mes embarqu√©s mixtes d'Amazon et des syst√®mes AWS.  Nous avons tamponn√© et pris en charge de nombreux microservices, augmentant ainsi les co√ªts d'exploitation.  Les discussions ont eu lieu dans la veine suivante: </p><br><ul><li>  <strong>Moi</strong> : Merde, beaucoup de gestes pour disperser un microservice.  Je vais devoir utiliser ces ordures pour cr√©er un compte AWS (nous sommes all√©s √† 2 comptes pour le <strong>microservice</strong> ), puis celui-ci pour configurer les notifications, celui-ci pour le r√©f√©rentiel de code, et celui-ci pour la liste des adresses e-mail, et celui-ci .. . </li><li>  <strong>Lead</strong> : Let's script et d'accord. </li><li>  <strong>Moi</strong> : Frets, mais le script lui-m√™me va changer.  Vous aurez besoin d'un moyen de v√©rifier que tous ces gadgets amazon int√©gr√©s sont √† jour. </li><li>  <strong>Plomb</strong> : √áa sonne bien.  Et pour cela, nous allons √©crire un script. </li><li>  <strong>Moi</strong> : G√©nial!  Et le script devra probablement encore d√©finir les param√®tres.  Va-t-il les accepter? </li><li>  <strong>Lead</strong> : Oui, il le fera, o√π ira-t-il! </li><li>  <strong>Moi</strong> : Le processus peut changer, la r√©trocompatibilit√© sera perdue.  Il faudra un certain contr√¥le de version s√©mantique. </li><li>  <strong>Lead</strong> : Excellente id√©e! </li><li>  <strong>Moi</strong> : Les outils peuvent √™tre modifi√©s manuellement, √† l'int√©rieur de l'interface utilisateur.  Nous avons besoin d'un moyen de v√©rifier et de corriger cela. </li></ul><br><p>  <em>... 3 ans plus tard:</em> </p><br><ul><li>  <strong>Lead</strong> : Et nous avons eu la terraform. </li></ul><br><p>  La morale de la fable est la suivante: m√™me si vous <strong>√™tes dans tous les √©tats d'Amazon</strong> , vous utilisez toujours quelque chose qui n'est pas d'AWS, et ces services ont un √©tat que le langage utilise pour la configuration afin de synchroniser cet √©tat. </p><br><h3 id="cloudformation-lambda-vs-git-moduli-terraform">  CloudFormation lambda vs git modules terraform </h3><br><p>  lambda est la solution de CloudFormation pour les probl√®mes de logique personnalis√©e.  Avec lambda, vous pouvez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cr√©er des macros</a> ou une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ressource personnalis√©e</a> .  Cette approche pr√©sente des difficult√©s suppl√©mentaires que Terraform n'a pas dans le contr√¥le de version s√©mantique des modules git.  Pour moi, le probl√®me le plus urgent √©tait la gestion des autorisations pour tous ces lambda personnalis√©s (qui sont des dizaines de comptes AWS).  Un autre en importance √©tait un probl√®me comme ¬´qu'est-il arriv√© avant - un poulet ou un ≈ìuf?¬ª: Il √©tait associ√© au code lambda.  Cette fonction elle-m√™me est une infrastructure et du code, et elle-m√™me n√©cessite une surveillance et des mises √† jour.  Le dernier point fort du cercueil a √©t√© la difficult√© de mettre √† jour s√©mantiquement les modifications du code lambda;  il fallait √©galement s'assurer que les actions de la pile sans commande directe ne changent pas entre les d√©marrages. </p><br><p>  Je me souviens en quelque sorte que je voulais cr√©er un d√©ploiement canari pour l'environnement Elastic Beanstalk avec un √©quilibreur de charge classique.  Le moyen le plus simple serait de faire un deuxi√®me d√©ploiement pour EB √† c√¥t√© de l'environnement de production, en franchissant une autre √©tape: en combinant le groupe de d√©ploiement canary automatiquement √©volutif avec le LB de d√©ploiement dans l'environnement de production.  Et comme Terraform utilise le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">beantalk ASG en sortie</a> , il faudra 4 lignes de code suppl√©mentaires dans Terraform.  Quand j'ai demand√© s'il y avait une solution comparable dans CloudFormation, ils m'ont indiqu√© un r√©f√©rentiel entier dans git avec un pipeline de d√©ploiement et plus encore: tout cela pour ce que les malheureuses 4 lignes de code Terraform pouvaient faire. </p><br><h3 id="on-luchshe-obnaruzhivaet-dreyf">  Il d√©tecte mieux la d√©rive </h3><br><blockquote>  Assurez-vous que la r√©alit√© r√©pond aux attentes. </blockquote><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La d√©tection de d√©rive</a> est une op√©ration tr√®s puissante en tant que code, car elle permet de s'assurer que la r√©alit√© r√©pond aux attentes.  Il est disponible avec CloudFormation et Terraform.  Mais √† mesure que la pile de travail augmentait, la recherche de d√©rive de CloudFormation retournait de plus en plus de faux positifs. </p><br><p>  Avec Terraform, vous disposez de crochets de cycle de vie beaucoup plus avanc√©s pour la d√©tection de d√©rive.  Par exemple, vous entrez la commande <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ignore_changes</a> directement dans la d√©finition d'une t√¢che ECS si vous souhaitez ignorer les modifications de la d√©finition d'une t√¢che sp√©cifique sans ignorer les modifications dans l'ensemble du d√©ploiement ECS. </p><br><h2 id="cdk-i-buduschee-cloudformation">  CDK et l'avenir de CloudFormation </h2><br><p>  CloudFormation est difficile √† g√©rer √† grande √©chelle et multi-infrastructures.  Beaucoup de ces difficult√©s sont reconnues, et l'outil a besoin de choses comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">aws-cdk</a> , un cadre pour d√©finir une infrastructure cloud dans le code et la faire passer par AWS CloudFormation.  Il sera curieux de voir ce que aws-cdk aura √† l'avenir, mais il lui sera difficile de rivaliser avec les autres avantages de Terraform;  pour resserrer CloudFormation, des changements globaux seront n√©cessaires. </p><br><h3 id="chtoby-terraform-ne-razocharoval">  Terraform ne d√©√ßoit donc pas </h3><br><blockquote>  Il s'agit de ¬´l'infrastructure en tant que CODE¬ª, et non ¬´en tant que texte¬ª. </blockquote><p>  Ma premi√®re impression de Terraform √©tait plut√¥t mauvaise.  Je pense que je n'ai tout simplement pas compris l'approche.  Presque tous les ing√©nieurs le per√ßoivent d'abord involontairement comme un format de texte qui doit √™tre converti en l'infrastructure souhait√©e.  NE LE FAITES PAS. </p><br><h3 id="propisnye-istiny-horoshey-razrabotki-po-otnosyatsya-i-k-terraform">  Les v√©rit√©s courantes d'un bon d√©veloppement logiciel s'appliquent √† Terraform </h3><br><p>  J'ai vu combien de pratiques adopt√©es pour cr√©er un bon code sont ignor√©es dans Terraform.  Vous avez √©tudi√© pendant des ann√©es pour devenir un bon programmeur.  N'abandonnez pas cette exp√©rience simplement parce que vous travaillez avec Terraform.  Les v√©rit√©s courantes d'un bon d√©veloppement logiciel s'appliquent √©galement √† Terraform. </p><br><h3 id="kak-uzh-kod-i-ne-zadokumentirovat">  Comment le code ne peut-il pas √™tre document√©? </h3><br><p>  Je suis tomb√© sur d'√©normes piles Terraform sans aucune documentation.  Comment puis-je √©crire du code dans les pages - compl√®tement sans documentation?  Ajoutez une documentation qui explique votre <strong>code</strong> Terraform (l'accent est mis ici sur le mot "code"), pourquoi cette section est si importante et ce que vous faites. </p><br><h3 id="kak-mozhno-razvorachivat-servisy-kotorye-nekogda-byli-odnoy-bolshoy-funkciey-main">  Comment pouvez-vous d√©ployer des services qui √©taient autrefois une grande fonction principale ()? </h3><br><p>  J'ai rencontr√© des piles Terraform tr√®s complexes, pr√©sent√©es comme un module unique.  Pourquoi ne d√©ployons-nous pas un logiciel comme celui-ci?  Pourquoi diviser les grandes fonctions en plus petites?  Les m√™mes r√©ponses s'appliquent √† Terraform.  Si votre module est trop grand, vous devez le diviser en modules plus petits. </p><br><h3 id="razve-vasha-kompaniya-ne-polzuetsya-bibliotekami">  Votre entreprise n'utilise-t-elle pas les biblioth√®ques? </h3><br><p>  J'ai vu comment des ing√©nieurs, faisant tourner un nouveau projet en utilisant Terraform, copiaient b√™tement d'√©normes morceaux d'autres projets dans les leurs, puis les s√©lectionnaient jusqu'√† ce qu'il commence √† fonctionner.  Travailleriez-vous donc dans votre entreprise avec le code ¬´combat¬ª?  Nous n'utilisons pas seulement des biblioth√®ques.  Oui, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tout ne devrait pas √™tre une biblioth√®que,</a> mais o√π en sommes-nous sans biblioth√®ques partag√©es en principe?! </p><br><h3 id="razve-vy-ne-polzuetes-pep8-ili-gofmt">  N'utilisez-vous pas PEP8 ou gofmt? </h3><br><p>  La plupart des langues ont un sch√©ma de formatage standard accept√©.  En Python, c'est PEP8.  √Ä Go - gofmt.  Terraform a la sienne: <code>terraform fmt</code> .  Utilisez pour la sant√©! </p><br><h3 id="vy-stanete-polzovatsya-react-ne-znaya-javascript">  Allez-vous utiliser React sans conna√Ætre JavaScript? </h3><br><p>  Les modules Terraform peuvent simplifier une partie de l'infrastructure complexe que vous cr√©ez, mais cela ne signifie pas que vous pouvez l'ignorer du tout.  Vous voulez utiliser Terraform correctement sans comprendre les ressources?  Vous √™tes condamn√©: le temps passera, mais vous ne ma√Ætriserez pas Terraform. </p><br><h3 id="vy-kodite-singltonami-ili-vnedryaya-zavisimosti">  Codez-vous des singletones ou introduisez-vous des d√©pendances? </h3><br><p>  L'injection de d√©pendance est la meilleure pratique reconnue pour le d√©veloppement de logiciels, qui est pr√©f√©r√©e par les singletones.  Comment est-ce utile dans Terraform?  J'ai rencontr√© des modules Terraform en fonction d'un √©tat distant.  Au lieu d'√©crire des modules qui extraient d'un √©tat distant, √©crivez un module qui accepte des param√®tres.  Et passez ensuite ces param√®tres au module. </p><br><h3 id="vashi-biblioteki-delayut-desyat-veschey-horosho-ili-odnu---otlichno">  Vos biblioth√®ques font-elles bien dix choses, ou une bonne chose? </h3><br><p>  Les biblioth√®ques qui se concentrent sur une seule t√¢che et qui fonctionnent parfaitement bien.  Au lieu d'√©crire de grands modules Terraform qui essaient de tout faire en m√™me temps, faites-en des parties qui font bien une chose.  Et puis combinez-les comme vous le souhaitez. </p><br><h3 id="kak-vy-proizvodite-izmeneniya-v-bibliotekah-bez-obratnoy-sovmestimosti">  Comment apportez-vous des modifications aux biblioth√®ques sans compatibilit√© descendante? </h3><br><p>  Le module g√©n√©ral Terraform, comme une biblioth√®que ordinaire, doit en quelque sorte informer les utilisateurs des changements sans compatibilit√© ascendante.  Lorsque de tels changements se produisent dans les biblioth√®ques, c'est ennuyeux et tout aussi ennuyeux lorsque des changements sans compatibilit√© ascendante sont effectu√©s dans les modules Terraform.  Il est recommand√© d'utiliser les balises git et semver lors de l'utilisation des modules Terraform. </p><br><h3 id="proizvodstvennyy-servis-zapuschen-u-vas-na-noutbuke-ili-v-datacentre">  Le service de production est-il lanc√© sur votre ordinateur portable ou dans un centre de donn√©es? </h3><br><p>  Hashicorp dispose d'outils comme le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">terraform cloud</a> pour lancer votre terraform.  Ces services centralis√©s facilitent la gestion, l'audit et l'approbation des modifications de terraform. </p><br><h3 id="razve-vy-ne-pishete-testy">  Tu ne fais pas de tests? </h3><br><p>  Les ing√©nieurs admettent que le code doit √™tre test√©, mais ils mart√®lent souvent eux-m√™mes les v√©rifications lorsqu'ils travaillent avec Terraform.  Pour les infrastructures, cela est sem√© de moments insidieux.  Je vous conseille de "tester" ou "cr√©er des exemples" de piles en utilisant des modules qui peuvent √™tre correctement d√©ploy√©s pour v√©rification lors de CI / CD. </p><br><h3 id="terraform-i-mikroservisy">  Terraform et microservices </h3><br><blockquote>  La dur√©e de vie et la mort des soci√©t√©s de microservices d√©pendent de la vitesse, de la mise √† jour et de la destruction des nouvelles piles de travaux de microservices. </blockquote><p>  Le point n√©gatif le plus courant li√© aux architectures de microservices et qui ne peut en aucun cas √™tre √©limin√© est li√© au travail et non au code.  Si vous prenez Terraform, uniquement pour automatiser uniquement le c√¥t√© infrastructure de l'architecture de microservices, vous vous privez des v√©ritables avantages de ce syst√®me.  Maintenant, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tout est comme du code</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr474546/">https://habr.com/ru/post/fr474546/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr474532/index.html">Laboratoire radio de Nizhny Novgorod et radios avec d√©tecteurs √† cristal</a></li>
<li><a href="../fr474534/index.html">Livre d'Alan Turing et note myst√©rieuse - D√©tective scientifique</a></li>
<li><a href="../fr474536/index.html">L'histoire d'un petit projet de douze ans (sur BIRMA.NET pour la premi√®re fois et honn√™tement de premi√®re main)</a></li>
<li><a href="../fr474540/index.html">Comment cr√©er des boss sympas. Exp√©rience d√©veloppeur de Shadow Fight 3</a></li>
<li><a href="../fr474544/index.html">Examen de GeForce NOW en Russie: avantages, inconv√©nients et perspectives</a></li>
<li><a href="../fr474548/index.html">Google BERT est un nouvel algorithme de recherche. Comment le classement changera-t-il et que faire maintenant?</a></li>
<li><a href="../fr474550/index.html">Comment renvoyer l'indicateur TLS vert dans le nouveau Firefox 70?</a></li>
<li><a href="../fr474554/index.html">Intel Tremont - Nouvelle microarchitecture pour l'efficacit√© √©nerg√©tique</a></li>
<li><a href="../fr474556/index.html">Comment rendre le support PCRE2 pour Apache 2.4</a></li>
<li><a href="../fr474558/index.html">Programmation orient√©e protocole, partie 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>