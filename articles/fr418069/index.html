<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍴 👩🏽‍🎤 👨🏻‍🍳 Résolution de mots croisés de couleurs japonaises à la vitesse de la lumière 📷 🖼️ 🏈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les mots croisés japonais (également les nonogrammes) sont des puzzles logiques dans lesquels une image pixel est cryptée. Vous devez résoudre les mot...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Résolution de mots croisés de couleurs japonaises à la vitesse de la lumière</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418069/"><p>  Les mots croisés japonais (également les nonogrammes) sont des puzzles logiques dans lesquels une image pixel est cryptée.  Vous devez résoudre les mots croisés en utilisant des nombres situés à gauche des lignes et au-dessus des colonnes. </p><br><p>  La taille des mots croisés peut atteindre jusqu'à 150x150.  Le joueur utilise une logique spéciale pour calculer la couleur de chaque cellule.  La solution peut prendre quelques minutes sur des puzzles de mots croisés pour les débutants et des dizaines d'heures sur des puzzles complexes. </p><br><p>  Un bon algorithme peut résoudre le problème beaucoup plus rapidement.  Le texte décrit comment écrire une solution qui fonctionne presque instantanément en utilisant les algorithmes les plus appropriés (qui conduisent généralement à une solution), ainsi que leurs optimisations et l'utilisation des fonctionnalités C ++ (qui réduisent le temps d'exécution de plusieurs dizaines de fois). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/w1/tw/-c/w1tw-caq1d9vswcrqfapdufcbfk.gif"></div><a name="habracut"></a><br><p>  <em>Dans la version mobile de Habr, les formules dans le texte peuvent ne pas être affichées (pas dans tous les navigateurs mobiles) - utilisez la version complète ou un autre navigateur mobile si vous remarquez des problèmes avec les formules</em> </p><br><h2 id="pravila-igry">  Règles du jeu </h2><br><p>  Initialement, la toile de mots croisés est blanche.  Pour les mots croisés noir et blanc vanille, vous devez restaurer l'emplacement des cellules noires. </p><br><p>  Dans les mots croisés en noir et blanc, le nombre de nombres pour chaque ligne (à gauche du canevas) ou pour chaque colonne (en haut du canevas) indique le nombre de groupes de cellules noires dans la ligne ou la colonne correspondante, et les nombres eux-mêmes indiquent le nombre de cellules fusionnées que contient chacun de ces groupes.  Ensemble de nombres <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mo" id="MJXp-Span-2" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-3">3</span><span class="MJXp-mo" id="MJXp-Span-4" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-5">2</span><span class="MJXp-mo" id="MJXp-Span-6" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-7">5</span><span class="MJXp-mo" id="MJXp-Span-8" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.849ex" height="2.66ex" viewBox="0 -832 2948.8 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-5B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-33" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-2C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-32" x="1224" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-2C" x="1724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-35" x="2169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-5D" x="2670" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> [3, 2, 5] </script>  signifie que dans une certaine ligne, il y a trois groupes consécutifs de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-9"><span class="MJXp-mn" id="MJXp-Span-10">3</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-33" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> 3 </script>  , <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-11"><span class="MJXp-mn" id="MJXp-Span-12">2</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-32" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> 2 </script>  et <math></math><img src="https://habrastorage.org/getpro/habr/formulas/480/820/0cb/4808200cb3668866f25a2e4437a6b74e.svg" alt="5 $" data-tex="inline">  cellules noires dans une rangée.  Les groupes peuvent être disposés de manière aléatoire, sans violer l'ordre relatif (les nombres spécifient leur longueur, et la position doit être devinée), mais ils doivent être séparés par au moins une cellule blanche. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bl/w9/zt/blw9ztswh2gvpy0lfqr76ei_xcq.png"></div><br><p>  <em>Exemple correct</em> </p><br><p>  Dans les mots croisés de couleur, chaque groupe a toujours sa propre couleur - tout, sauf le blanc, est une couleur d'arrière-plan.  Des groupes voisins de couleurs <em>différentes</em> peuvent se tenir côte à côte, mais pour les groupes voisins de <em>mêmes</em> couleurs, la séparation par au moins une cellule blanche est toujours nécessaire. </p><br><h2 id="chto-ne-yavlyaetsya-yaponskim-krossvordom">  Ce qui n'est pas un mot croisé japonais </h2><br><p>  Chaque image pixel peut être cryptée comme un jeu de mots croisés.  Mais il peut ne pas être possible de le restaurer - le casse-tête résultant peut avoir plus d'une solution, ou avoir une solution, mais ne peut pas être résolu logiquement.  Ensuite, les cellules restantes du jeu doivent être devinées à l'aide de la technologie chamanique à l'aide d' <s>ordinateurs quantiques</s> . </p><br><p>  De tels mots croisés ne sont pas des mots croisés, mais de la graphomanie.  On pense que les mots croisés corrects sont tels que, de manière logique, vous pouvez arriver à une solution unique. </p><br><p>  Le "chemin logique" est la possibilité de restaurer chaque cellule une par une, en considérant la ligne / colonne séparément ou leur intersection.  Si cela n'est pas possible, le nombre d'options de réponse envisagées peut être beaucoup plus que ce qu'une personne peut calculer par elle-même. </p><br><img src="https://habrastorage.org/webt/qs/nu/2m/qsnu2mmr0lutke0xzprtow8jv-i.png"><br><p>  <em>Le mauvais nonogramme est la seule solution, mais il est impossible de le résoudre normalement.</em>  <em>Cellules "insolubles" marquées en orange.</em>  <em>Tiré de Wikipedia.</em> </p><br><p>  Cette restriction est expliquée comme suit - dans le cas le plus général, le casse-tête japonais est un problème NP-complet.  Cependant, deviner ne devient pas une tâche NP-terminée, s'il existe un algorithme qui, à chaque instant, indique sans ambiguïté les cellules à ouvrir davantage.  Tous les mots croisés utilisés par les humains (à l'exception de la méthode <del>  Monte Carlo </del>  essais et erreurs) sont basés sur cela. </p><br><p>  Dans la plupart des mots croisés orthodoxes, la largeur et la hauteur sont divisées par 5, il n'y a pas de lignes qui peuvent être comptées instantanément (celles où les cellules colorées obstruent tous les endroits, ou elles sont complètement absentes), et le nombre de couleurs complémentaires est limité.  Ces exigences ne sont pas obligatoires. </p><br><p>  Le faux mot croisé le plus simple: </p><br><pre><code class="bash hljs">|1 1| --+---+ 1| | 1| | --+---+</code> </pre> <br><p>  Souvent, le pixel art codé, qui utilise un motif en «damier» pour simuler un dégradé, n'est pas résolu à l'envers.  Il est préférable de comprendre si vous tapez "dégradé pixelart" dans la recherche.  Le dégradé est exactement comme ce mot croisé 2x2 fayl. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/oz/mm/sj/ozmmsj7dzmqdn0dwgmspwymmohy.gif"></div><br><h2 id="vozmozhnye-varianty-resheniy">  Solutions possibles </h2><br><p>  Nous avons la taille du puzzle de mots croisés, une description des couleurs et de toutes les lignes et colonnes.  Comment puis-je assembler une image à partir de ceci: </p><br><h4 id="polnyy-perebor">  Recherche complète </h4><br><p>  Pour chaque cellule, nous trions tous les états possibles et vérifions qu'ils sont satisfaisants.  La complexité d'une telle solution pour un mot croisé en noir et blanc <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-13"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14">O</span><span class="MJXp-mo" id="MJXp-Span-15" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-16">N</span><span class="MJXp-mo" id="MJXp-Span-17" style="margin-left: 0.267em; margin-right: 0.267em;">∗</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18">M</span><span class="MJXp-mo" id="MJXp-Span-19" style="margin-left: 0.267em; margin-right: 0.267em;">∗</span><span class="MJXp-msubsup" id="MJXp-Span-20"><span class="MJXp-mrow" id="MJXp-Span-21" style="margin-right: 0.05em;"><span class="MJXp-mn" id="MJXp-Span-22">2</span></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-23" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24">N</span><span class="MJXp-mo" id="MJXp-Span-25">∗</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-26">M</span></span></span><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.881ex" height="2.901ex" viewBox="0 -935.7 7698.6 1249" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4F" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-28" x="763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4E" x="1153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-2217" x="2263" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4D" x="2986" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-2217" x="4260" y="0"></use><g transform="translate(4982,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-2217" x="888" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4D" x="1389" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-29" x="7309" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> O (N * M * {2} ^ {N * M}) </script>  , pour la couleur <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-28"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29">O</span><span class="MJXp-mo" id="MJXp-Span-30" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31">N</span><span class="MJXp-mo" id="MJXp-Span-32" style="margin-left: 0.267em; margin-right: 0.267em;">∗</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33">M</span><span class="MJXp-mo" id="MJXp-Span-34" style="margin-left: 0.267em; margin-right: 0.267em;">∗</span><span class="MJXp-msubsup" id="MJXp-Span-35"><span class="MJXp-mrow" id="MJXp-Span-36" style="margin-right: 0.05em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-40">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-41">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">s</span></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-45" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46">N</span><span class="MJXp-mo" id="MJXp-Span-47">∗</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48">M</span></span></span><span class="MJXp-mo" id="MJXp-Span-49" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="25.428ex" height="3.021ex" viewBox="0 -987.6 10948.1 1300.8" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4F" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-28" x="763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4E" x="1153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-2217" x="2263" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4D" x="2986" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-2217" x="4260" y="0"></use><g transform="translate(4982,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-63" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-6F" x="433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-75" x="919" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-6C" x="1491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-65" x="1790" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-75" x="2256" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-72" x="2829" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-73" x="3280" y="0"></use><g transform="translate(3750,422)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-2217" x="888" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4D" x="1389" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-29" x="10558" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> O (N * M * {couleurs} ^ {N * M}) </script>  .  Par analogie avec le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tri des clowns,</a> cette solution peut également être appelée clown.  Il convient à la taille 5x5. </p><br><h4 id="backtracking">  Retour en arrière </h4><br><p>  Toutes les méthodes possibles d'organisation des groupes horizontaux de cellules sont triées.  Nous mettons un groupe de cellules dans une rangée, vérifions qu'il ne casse pas la description des groupes de colonnes.  S'il se casse, on met encore 1 cellule, on vérifie encore.  Set - passez au groupe suivant.  Si vous ne pouvez pas mettre un groupe en aucune façon, nous annulons deux groupes, réorganisons le groupe précédent, et ainsi de suite, jusqu'à ce que nous ayons réussi à mettre le dernier groupe. </p><br><h4 id="otdelno-dlya-kazhdogo-ryada">  Séparément pour chaque ligne </h4><br><p>  Cette décision est bien meilleure et elle est vraiment vraie.  Nous pouvons analyser chaque ligne et chaque colonne individuellement.  Chaque ligne tentera de révéler le maximum d'informations. </p><br><p>  L'algorithme pour chaque cellule de la ligne apprend plus d'informations - il peut s'avérer qu'il est impossible de colorer la cellule d'une certaine couleur, les groupes ne convergeront pas.  Vous ne pouvez pas développer complètement la ligne immédiatement, mais les informations reçues "aideront" à mieux s'ouvrir sur plusieurs colonnes, et lorsque nous commencerons à les analyser, elles "aideront" à nouveau les lignes, et ainsi de suite pendant plusieurs itérations, jusqu'à ce que toutes les cellules aient une couleur possible. </p><br><h2 id="istinno-vernoe-reshenie">  Décision vraiment vraie </h2><br><h4 id="odna-stroka-dva-cveta">  Une ligne, deux couleurs </h4><br><p>  Il est très difficile de deviner efficacement la «ligne unique» en noir et blanc, pour laquelle certaines cellules ont déjà deviné.  Elle s'est rencontrée dans des endroits tels que: </p><br><ul><li>  <em>Quart de finale d'ACM ICPC 2006</em> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vous pouvez essayer de résoudre le problème vous-même</a> .  La limite de temps est de 1 seconde, la limite du nombre de groupes est de 400 et la longueur de la série est également de 400. Elle présente un niveau de complexité très élevé par rapport à d'autres tâches. </li><li>  <em>Olympiade internationale d'informatique 2016</em> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">condition</a> pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">réussir la tâche</a> .  La limite de temps est de 2 secondes, la limite du nombre de groupes est de 100, la longueur de la ligne est de 200'000.  De telles limitations sont exagérées, mais la résolution d'un problème avec les restrictions ACM gagne 80/100 points dans ce problème.  Ici aussi, le niveau n'a pas déçu, des écoliers du monde entier avec un niveau de QI cruel s'entraînent depuis plusieurs années pour résoudre différents trucs, puis ils se rendent à cette Olympiade (seulement 4 personnes du pays doivent passer), décident de 2 tours de 5 heures <del>  et dans le cas d'une victoire épique (bronze dans les différentes années pour 138-240 points sur 600), l'admission à Oxford, puis offre des sociétés claires au service de recherche, une longue et heureuse vie embrassée avec dakimakura. </del></li></ul><br><p>  Les lignes monochromes peuvent également être résolues de différentes manières, et pour <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-50"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">O</span><span class="MJXp-mo" id="MJXp-Span-52" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53">N</span><span class="MJXp-mo" id="MJXp-Span-54" style="margin-left: 0.267em; margin-right: 0.267em;">∗</span><span class="MJXp-msubsup" id="MJXp-Span-55"><span class="MJXp-mn" id="MJXp-Span-56" style="margin-right: 0.05em;">2</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-57" style="vertical-align: 0.5em;">N</span></span><span class="MJXp-mo" id="MJXp-Span-58" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.695ex" height="2.901ex" viewBox="0 -935.7 4604.7 1249" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4F" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-28" x="763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4E" x="1153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-2217" x="2263" y="0"></use><g transform="translate(2986,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4E" x="707" y="557"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-29" x="4215" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> O (N * 2 ^ N) </script>  (énumérer toutes les options, vérifier l'exactitude, sélectionner les cellules qui ont la même couleur dans toutes les options), et en quelque sorte moins stupide. </p><br><p>  L'idée principale est d'utiliser un analogue de backtracking, mais sans calculs inutiles.  Si nous avons en quelque sorte mis en place plusieurs groupes et que nous sommes maintenant dans une sorte de cellule, alors nous devons savoir s'il est possible de mettre les groupes restants, à partir de la cellule actuelle. </p><br><div class="spoiler">  <b class="spoiler_title">Pseudo code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EpicWin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(group, cell)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cell &gt;= last_cell: <span class="hljs-comment"><span class="hljs-comment">#   return group == group_size win = False #        if group &lt; group_size #    and CanInsertBlack(cell, len[group]) #    and CanInsertWhite(cell + len[group], 1) #    and EpicWin(group + 1, cell + len[group] + 1): #    win = True can_place_black[cell .. (cell + len[group] - 1)] = True can_place_white[cell + len[group]] = True; #         if CanInsertWhite(cell, 1) and EpicWin(group, cell + 1): win = True can_place_white[cell] = True return win EpicWin(0, 0)</span></span></code> </pre> </div></div><br><p>  Cette approche est appelée <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">programmation dynamique</a> .  Le pseudo-code est simplifié, et même les valeurs calculées n'y sont pas stockées. </p><br><p>  Les fonctions <code>CanInsertBlack/CanInsertWhite</code> sont nécessaires pour vérifier s'il est théoriquement possible de placer un groupe de la bonne taille au bon endroit.  Il leur suffit de vérifier qu'il n'y a pas de cellule «100% blanc» (pour la première fonction) ou «100% noir» (pour la seconde) dans la plage de cellules indiquée.  Pour qu'ils puissent travailler pour <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-59"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">O</span><span class="MJXp-mo" id="MJXp-Span-61" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-62">1</span><span class="MJXp-mo" id="MJXp-Span-63" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.745ex" height="2.66ex" viewBox="0 -832 2043 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4F" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-28" x="763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-31" x="1153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-29" x="1653" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> O (1) </script>  , cela peut être fait en utilisant des montants partiels: </p><br><div class="spoiler">  <b class="spoiler_title">CanInsertBlack</b> <div class="spoiler_text"><pre> <code class="python hljs">white_counter = [ <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, ..., <span class="hljs-number"><span class="hljs-number">0</span></span> ] <span class="hljs-comment"><span class="hljs-comment">#   n def PrecalcWhite(): for i in range(0, (n-1)): if is_anyway_white[i]: # 1,  i-  100%  white_counter[i]++ if i &gt; 0: white_counter[i] += white_counter[i - 1] def CanInsertBlack(cell, len): #     [cell, cell + len - 1] ans = white_counter[cell + len - 1] if cell &gt; 0: ans -= white_counter[cell - 1] #  ans -     cell  (cell + len - 1) return ans == 0</span></span></code> </pre> </div></div><br><p>  La même sorcellerie avec des sommes partielles attend les lignes du formulaire </p><br><pre> <code class="python hljs">can_place_black[cell .. (cell + len[group] - <span class="hljs-number"><span class="hljs-number">1</span></span>)] = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span></code> </pre> <br><p>  Ici, nous pouvons au lieu de <code>= True</code> augmenter le nombre de 1. Et si nous devons faire beaucoup d'ajouts sur un segment dans un certain tableau <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-64"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-68">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.712ex" height="1.817ex" viewBox="0 -520.7 2459.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-72" x="529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-72" x="981" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-61" x="1432" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-79" x="1962" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> array </script>  , et d'ailleurs nous n'utilisons pas ce tableau avant différents ajouts (ils disent à ce sujet que cette tâche est "résolue hors ligne"), puis au lieu d'une boucle: </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#     for i in range(L, R + 1): array[i]++</span></span></code> </pre> <br><p>  Vous pouvez le faire: </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#     array[L]++ array[R + 1]-- #    for i in range(1, n): array[i] += array[i - 1]</span></span></code> </pre> <br><p>  Ainsi, l'ensemble de l'algorithme fonctionne dans <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-70"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">O</span><span class="MJXp-mo" id="MJXp-Span-72" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73">k</span><span class="MJXp-mo" id="MJXp-Span-74" style="margin-left: 0.267em; margin-right: 0.267em;">∗</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-75">n</span><span class="MJXp-mo" id="MJXp-Span-76" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.383ex" height="2.66ex" viewBox="0 -832 3609.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-4F" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-28" x="763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-6B" x="1153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-2217" x="1896" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-6E" x="2619" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMAIN-29" x="3219" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> O (k * n) </script>  où <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-77"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.211ex" height="2.057ex" viewBox="0 -780.1 521.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-6B" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> k </script>  - le nombre de groupes de cellules noires, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-79"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/418069/&amp;usg=ALkJrhhNIL3cbV70YD_mI-KC1gGCONajbg#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-11"> n </script>  Correspond à la longueur de la chaîne.  Et nous allons à la demi-finale de l'ACM ICPC ou obtenons le bronze de l'interneur.  <a href="">Solution ACM (Java)</a> .  <a href="">Solution IOI (C ++)</a> . </p><br><h4 id="odna-stroka-mnogo-cvetov">  Une ligne, plusieurs couleurs </h4><br><p>  Lorsque nous passons aux nonogrammes multicolores, qui ne savent toujours pas comment les résoudre, nous apprenons une terrible vérité - il s'avère que chaque colonne est affectée par magie par toutes les colonnes!  Ceci est plus clair à travers un exemple: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6m/ve/_d/6mve_d8spu5wyqai1osmtppdgr8.png"></div><br><p>  <em>Source - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Méthodes de résolution des mots croisés japonais</a></em> </p><br><p>  Alors que les nonogrammes bicolores s'en passaient normalement, ils n'avaient pas besoin de regarder en arrière leurs amis orthogonaux. <br>  L'image montre que dans l'exemple de gauche, les trois cellules d'extrême droite sont vides, car la configuration se casse si vous coloriez ces cellules dans <del>  ces couleurs pour te peindre </del>  couleur non blanche. </p><br><p>  Mais cette plaisanterie est mathématiquement décidable - chaque cellule doit recevoir un numéro, où <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-81"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-12"> i </script>  le ième bit signifiera si cette cellule peut être donnée <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-83"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-13"> i </script>  e couleur.  Initialement, toutes les cellules ont une valeur <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-85"><span class="MJXp-msubsup" id="MJXp-Span-86"><span class="MJXp-mn" id="MJXp-Span-87" style="margin-right: 0.05em;">2</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-88" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-92">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">s</span></span></span><span class="MJXp-mo" id="MJXp-Span-97" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-98">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-14"> 2 ^ {couleurs} - 1 </script>  .  La décision de la dynamique ne changera pas beaucoup. </p><br><p>  Vous pouvez observer l'effet suivant: dans le même exemple de gauche, selon la version des lignes, la cellule à l'extrême droite peut avoir une couleur bleue ou blanche. <br>  Selon la version des colonnes, cette cellule a une couleur verte ou blanche. <br>  Selon la version de bon sens, cette cellule n'aura qu'une couleur blanche.  Et puis nous continuons à calculer la réponse. </p><br><p>  Si nous considérons le bit zéro «blanc», le premier «bleu», le second «vert», la ligne a calculé l'état de la dernière cellule <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-99"><span class="MJXp-mn" id="MJXp-Span-100">011</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-15"> 011 </script>  et la colonne <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-101"><span class="MJXp-mn" id="MJXp-Span-102">101</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-16"> 101 </script>  .  Cela signifie que l'état de cette cellule est réel <math></math><img src="https://habrastorage.org/getpro/habr/formulas/1c9/c1b/8e1/1c9c1b8e1304890be6e9b166d8dcc390.svg" alt="011 $ \ &amp; 101 = 001 $" data-tex="inline"></p><br><div class="spoiler">  <b class="spoiler_title">Pseudo code</b> <div class="spoiler_text"><pre> <code class="python hljs">source = [...] <span class="hljs-comment"><span class="hljs-comment">#   result = [0, 0, ..., 0] #   len = [...] #    clrs = [...] #    def CanInsertColor(color, cell, len): for i in range(cell, cell + len): if (source[i] &amp; (1 &lt;&lt; color)) == 0: #     color    return False; return True def PlaceColor(color, cell, len): for i in range(cell, cell + len): result[i] |= (1 &lt;&lt; color) #   color  OR def EpicWinExtended(group, cell): if cell &gt;= last_cell: #   return group == group_size win = False #        if group &lt; group_size #    and CanInsertColor(clrs[group], cell, len[group]) #    and SequenceCheck() #       ,  #         and EpicWin(group + 1, cell + len[group]): #    win = True PlaceColor(clrs[group], cell, len[group]) PlaceColor(0, cell + len[group], 1) #   -    #         #   -  0 if CanInsertWhite(0, cell, 1) and EpicWinExtended(group, cell + 1): win = True PlaceColor(0, cell, 1) return win</span></span></code> </pre> </div></div><br><h4 id="mnogo-strok-mnogo-cvetov">  Beaucoup de lignes, beaucoup de couleurs </h4><br><p>  Faire constamment la mise à jour des états de toutes les lignes et colonnes, décrite dans le dernier paragraphe, jusqu'à ce qu'il n'y ait pas une seule cellule avec plus d'un bit.  À chaque itération, après la mise à jour de toutes les lignes et colonnes, nous mettons à jour l'état de toutes les cellules qu'elles contiennent via AND mutuel. </p><br><h2 id="pervye-rezultaty">  Premiers résultats </h2><br><p>  Supposons que nous n'écrivions pas le code comme des pics, c'est-à-dire que nous ne copions pas d'objets par erreur au lieu de passer par référence, nous n'inventons pas de vélos n'importe où, nous n'inventons pas de vélos, pour les opérations de bits, nous utilisons <code>__builtin_popcount</code> et <code>__builtin_ctz</code> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fonctionnalités gcc</a> ), tout est net et propre. </p><br><p>  Regardons le temps du programme, qui lit le puzzle du fichier et le résout complètement.  Il vaut la peine d'évaluer les avantages de la machine sur laquelle tout cela a été écrit et testé: </p><br><div class="spoiler">  <b class="spoiler_title">Spécifications du moteur pour ma moto classique Harley Davidson modèle B 1932</b> <div class="spoiler_text"><pre> <code class="bash hljs">RAM - 4GB  - AMD E1-2500,  1400MHz  L1 - 128KiB, 1GHz  L2 - 1MiB, 1GHz  - 2,  - 2   « SoC   »   2013    28 </code> </pre> </div></div><br><p>  Il est clair qu'un tel supercalculateur a été choisi parce que ses optimisations ont un effet plus important que sur une machine shaitane volante. </p><br><p>  Ainsi, après avoir exécuté notre algorithme sur les mots croisés les plus compliqués (selon nonograms.ru), nous obtenons un résultat pas très bon - de <strong>47</strong> à <strong>60</strong> secondes (cela comprend la lecture d'un fichier et d'une solution).  Il convient de noter que la "complexité" sur le site a été bien calculée - le même puzzle de mots croisés dans toutes les versions du programme était également le plus difficile, d'autres mots croisés les plus complexes, selon les archives, ont été conservés dans les meilleurs délais. </p><br><div class="spoiler">  <b class="spoiler_title">Mots croisés de couleur numéro 9596, la plus grande difficulté</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ar/7n/rx/ar7nrxtbzch1wk8bsihz0puldt8.png"></div></div></div><br><p>  Pour des tests rapides, la fonctionnalité de la référence a été créée.  Pour obtenir des données pour lui, j'ai sparsil <strong>4683</strong> mots croisés de couleur (à partir de <strong>10906</strong> ) et <strong>1406</strong> noir et blanc (à partir de <strong>8293</strong> ) de nonograms.ru (c'est l'une des plus grandes archives de nonogrammes sur Internet) en utilisant un script spécial et les <strong>ai</strong> enregistrés dans un format que le programme comprend.  Nous pouvons supposer que ces mots croisés sont un échantillon aléatoire, de sorte que la référence montrerait des valeurs moyennes adéquates.  En outre, les nombres de quelques dizaines de mots croisés les plus "complexes" (également les plus grands en taille et en nombre de couleurs) ont été enregistrés dans un script pour le chargement avec des stylos. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ox/xt/nd/oxxtnd1jdlth72q0zqnj3ic1kew.png"></div><br><h2 id="optimizaciya">  Optimisation </h2><br><p>  Ici, vous pouvez voir les techniques d'optimisation possibles qui ont été faites (1) pendant l'écriture de l'algorithme entier, (2) pour raccourcir le temps de travail d'une demi-minute à une fraction de seconde, (3) les optimisations qui peuvent être utiles davantage. </p><br><h4 id="vo-vremya-napisaniya-algoritma">  Au moment de la rédaction de l'algorithme </h4><br><ul><li>  Fonctions spéciales pour les opérations sur les bits, dans notre cas <code>__builtin_popcount</code> pour compter les unités dans une notation binaire d'un nombre, et <code>__builtin_ctz</code> pour le nombre de zéros avant la première plus petite unité.  Ces fonctions peuvent ne pas apparaître dans certains compilateurs.  Pour Windows, ces analogues conviennent: </li></ul><br><div class="spoiler">  <b class="spoiler_title">Windows popcount</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> _MSC_VER # </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;intrin.h&gt; # define __builtin_popcount __popcnt #endif</span></span></span></span></code> </pre> </div></div><br><ul><li>  Organisation de la baie - une taille plus petite vient en premier.  Par exemple, il vaut mieux utiliser le tableau [2] [3] [500] [1024] que [1024] [500] [3] [2]. </li><li>  La chose la plus importante est l'adéquation générale du code et l'évitement des soucis inutiles pour les calculs. </li></ul><br><h4 id="chto-umenshaet-vremya-raboty">  Ce qui réduit le temps de travail </h4><br><ul><li>  L'indicateur -O2 lors de la compilation. </li><li>  Afin de ne pas jeter à nouveau la ligne / colonne complètement résolue dans l'algorithme, vous pouvez définir les indicateurs pour chaque ligne dans un std :: vector / array séparé, les marquer avec une solution complète et ne pas lâcher s'il n'y a plus rien à résoudre. </li><li>  Les spécificités d'une solution multi-répétition d'un problème dynamique suggèrent qu'un tableau spécial qui contient des drapeaux marquant des morceaux déjà "calculés" du problème devrait être réinitialisé chaque fois qu'une nouvelle solution est faite.  Dans notre cas, il s'agit d'un tableau / vecteur bidimensionnel, où la première dimension est le nombre de groupes, la seconde est la cellule actuelle (voir le pseudocode EpicWin ci-dessus, où ce tableau ne l'est pas, mais l'idée est claire).  Au lieu de mettre à zéro, vous pouvez le faire - laissez-nous une variable "timer", et le tableau se compose de chiffres montrant la dernière "heure" lorsque cette pièce a été recomptée pour la dernière fois.  Lors du démarrage d'une nouvelle tâche, le "temporisateur" augmente de 1. Au lieu de vérifier l'indicateur booléen, vous devez vérifier l'égalité de l'élément de tableau et du "temporisateur".  Ceci est efficace en particulier dans les cas où loin de tous les états possibles sont couverts par l'algorithme (ce qui signifie que la mise à zéro du tableau «avons-nous déjà considéré cela» prend un gros morceau de temps). </li><li>  Remplacement d'opérations simples du même type (boucles avec affectation, etc.) par des analogues en STL ou des choses plus adéquates.  Parfois, cela fonctionne plus vite qu'un vélo. </li><li>  <code>std::vector&lt;bool&gt;</code> en C ++ compresse toutes les valeurs booléennes en bits individuels en nombres, ce qui fonctionne sur l'accès un peu plus lentement que s'il s'agissait d'une valeur régulière à l'adresse.  Si un programme utilise très, très souvent de telles valeurs, le remplacement de bool par un type entier peut avoir un bon effet sur les performances. </li><li>  D'autres faiblesses peuvent être recherchées via les profileurs et les modifier.  J'utilise moi-même Valgrind, son analyse des performances est pratique pour parcourir kCachegrind.  Les profileurs sont intégrés dans de nombreux IDE. </li></ul><br><p>  Ces modifications se sont avérées suffisantes pour obtenir de telles données sur l'indice de référence: </p><br><div class="spoiler">  <b class="spoiler_title">Nonogrammes colorés</b> <div class="spoiler_text"><pre> <code class="bash hljs">izaron@izaron:~/nonograms/build$ ./nonograms_solver -x ../../nonogram/source2/ -e [2018-08-04 22:57:40.432] [Nonograms] [info] Starting a benchmark... [2018-08-04 22:58:03.820] [Nonograms] [info] Average time: 0.00497556, Median time: 0.00302781, Max time: 0.215925 [2018-08-04 22:58:03.820] [Nonograms] [info] Top 10 heaviest nonograms: [2018-08-04 22:58:03.820] [Nonograms] [info] 0.215925 seconds, file 9596 [2018-08-04 22:58:03.820] [Nonograms] [info] 0.164579 seconds, file 4462 [2018-08-04 22:58:03.820] [Nonograms] [info] 0.105828 seconds, file 15831 [2018-08-04 22:58:03.820] [Nonograms] [info] 0.08827 seconds, file 18353 [2018-08-04 22:58:03.820] [Nonograms] [info] 0.0874717 seconds, file 10590 [2018-08-04 22:58:03.820] [Nonograms] [info] 0.0831248 seconds, file 4649 [2018-08-04 22:58:03.820] [Nonograms] [info] 0.0782811 seconds, file 11922 [2018-08-04 22:58:03.820] [Nonograms] [info] 0.0734325 seconds, file 4655 [2018-08-04 22:58:03.820] [Nonograms] [info] 0.071352 seconds, file 10828 [2018-08-04 22:58:03.820] [Nonograms] [info] 0.0708263 seconds, file 11824</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Nonogrammes noir et blanc</b> <div class="spoiler_text"><pre> <code class="bash hljs">izaron@izaron:~/nonograms/build$ ./nonograms_solver -x ../../nonogram/<span class="hljs-built_in"><span class="hljs-built_in">source</span></span>/ -e -b [2018-08-04 22:59:56.308] [Nonograms] [info] Starting a benchmark... [2018-08-04 23:00:09.781] [Nonograms] [info] Average time: 0.0095679, Median time: 0.00239274, Max time: 0.607341 [2018-08-04 23:00:09.781] [Nonograms] [info] Top 10 heaviest nonograms: [2018-08-04 23:00:09.781] [Nonograms] [info] 0.607341 seconds, file 5126 [2018-08-04 23:00:09.781] [Nonograms] [info] 0.458932 seconds, file 19510 [2018-08-04 23:00:09.781] [Nonograms] [info] 0.452245 seconds, file 5114 [2018-08-04 23:00:09.781] [Nonograms] [info] 0.19975 seconds, file 18627 [2018-08-04 23:00:09.781] [Nonograms] [info] 0.163028 seconds, file 5876 [2018-08-04 23:00:09.781] [Nonograms] [info] 0.161675 seconds, file 17403 [2018-08-04 23:00:09.781] [Nonograms] [info] 0.153693 seconds, file 12771 [2018-08-04 23:00:09.781] [Nonograms] [info] 0.146731 seconds, file 5178 [2018-08-04 23:00:09.781] [Nonograms] [info] 0.142732 seconds, file 18244 [2018-08-04 23:00:09.781] [Nonograms] [info] 0.136131 seconds, file 19385</code> </pre> </div></div><br><p>  Vous remarquerez peut-être qu'en moyenne, les mots croisés en noir et blanc sont «plus difficiles» que ceux en couleur.  Cela confirme les observations des amateurs de jeux, qui pensent également que la «couleur» se résout en moyenne plus facilement. </p><br><p>  Ainsi, sans changements radicaux (comme la réécriture de tout le code en C ou les insertions d'assembleur avec fastcall et l'abaissement du pointeur de trame), vous pouvez obtenir des performances élevées sur un ordinateur très modeste.  Le principe de Pareto peut être applicable aux optimisations - il s'avère que l'optimisation mineure influence fortement, car ce morceau de code est critique et est appelé très souvent. </p><br><h4 id="dalneyshaya-optimizaciya">  Optimisation supplémentaire </h4><br><p>  Les méthodes suivantes peuvent améliorer considérablement les performances du programme.  Certains d'entre eux ne fonctionnent pas dans tous les cas, mais sous certaines conditions. </p><br><ul><li>  Réécriture de code en style C et autres 1972.  Nous remplaçons ifstream par l'homologue analogique, les vecteurs avec des tableaux, apprenons toutes les options du compilateur et nous battons pour chaque cycle d'horloge du processeur. </li><li>  Parallélisation.  Par exemple, dans le code, il y a un morceau où les lignes sont mises à jour séquentiellement, puis les colonnes: </li></ul><br><div class="spoiler">  <b class="spoiler_title">bool Puzzle :: UpdateState (...)</b> <div class="spoiler_text"><pre> <code class="cpp hljs"> ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!UpdateGroupsState(solver, dead_rows, row_groups, row_masks)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!UpdateGroupsState(solver, dead_cols, col_groups, col_masks)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>;</code> </pre> </div></div><br><p>  Ces fonctions sont indépendantes les unes des autres et elles n'ont pas de mémoire partagée, à l'exception du solveur variable (type OneLineSolver), vous pouvez donc créer deux objets solveur (ici, évidemment, un seul est solveur) et démarrer deux threads dans la même fonction.  L'effet est le suivant: dans les mots croisés de couleur, le «plus dur» est résolu deux fois plus vite, en noir et blanc, le même est un tiers plus rapide, et le temps moyen a augmenté, en raison du coût relativement élevé de la création de fils. </p><br><p>  Mais en général, je ne recommanderais pas de le faire correctement dans le programme actuel et de l'utiliser calmement - premièrement, la création de threads est une opération coûteuse, vous ne devriez pas constamment créer des threads pour des tâches en microsecondes, et deuxièmement, avec une combinaison d'arguments du programme, les threads peuvent se référer à quels la mémoire externe, par exemple, lors de la création d'images d'une solution - cela doit être pris en compte et sécurisé. </p><br><p>  Si la tâche était sérieuse et que j'aurais beaucoup de données et de machines multicœurs, j'irais encore plus loin - vous pouvez créer plusieurs threads constants, chacun aura son propre objet OneLineSolver et une autre structure thread-safe qui contrôle la distribution du travail et à la demande donne une référence à la ligne / colonne suivante pour la solution.  Les threads après avoir résolu un autre problème se tournent à nouveau vers la structure pour résoudre autre chose.  En principe, un problème de non-programmation peut être démarré sans terminer le précédent, par exemple, lorsque cette structure est engagée dans le ET mutuel de toutes les cellules, puis que certains flux sont libres et ne font rien.  Plus de parallélisation peut être effectuée sur le GPU via CUDA - il existe de nombreuses options. </p><br><ul><li>  Utilisation de structures de données classiques.  Veuillez noter - lorsque j'ai montré le pseudo-code de la solution pour les nonogrammes de couleur, les fonctions CanInsertColor et PlaceColor ne fonctionnent pas du tout <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-103"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">O</span><span class="MJXp-mo" id="MJXp-Span-105" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-106">1</span><span class="MJXp-mo" id="MJXp-Span-107" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-17"> O (1) </script>  , contrairement aux nonogrammes noir et blanc.  Cela ressemble à ceci dans un programme: </li></ul><br><div class="spoiler">  <b class="spoiler_title">CanPlaceColor et SetPlaceColor</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> OneLineSolver::CanPlaceColor(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;&amp; cells, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> color, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lbound, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> rbound) { <span class="hljs-comment"><span class="hljs-comment">// Went out of the border if (rbound &gt;= cells.size()) { return false; } // We can paint a block of cells with a certain color if and only if it is // possible for all cells to have this color (that means, if every cell // from the block has color-th bit set to 1) int mask = 1 &lt;&lt; color; for (int i = lbound; i &lt;= rbound; ++i) { if (!(cells[i] &amp; mask)) { return false; } } return true; } void OneLineSolver::SetPlaceColor(int color, int lbound, int rbound) { // Every cell from the block now can have this color for (int i = lbound; i &lt;= rbound; ++i) { result_cells_[i] |= (1 &lt;&lt; color); } }</span></span></code> </pre> </div></div><br><p>  Autrement dit, cela fonctionne pour la ligne, pour <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-108"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">O</span><span class="MJXp-mo" id="MJXp-Span-110" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">N</span><span class="MJXp-mo" id="MJXp-Span-112" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> O (N) </script>  (Plus tard, il y aura une explication de la signification d'un tel code). </p><br><p>  Voyons comment vous pouvez obtenir la meilleure complexité.  Prenez <code>CanPlaceColor</code> .  Cette fonction vérifie que parmi tous les nombres du vecteur dans le segment <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-113"><span class="MJXp-mo" id="MJXp-Span-114" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">d</span><span class="MJXp-mo" id="MJXp-Span-121" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-126">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">d</span><span class="MJXp-mo" id="MJXp-Span-128" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> [lbound, rbound] </script>  nombre de bits <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-129"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136">r</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20"> couleur </script>  mis à 1. Équivalent à cela, vous pouvez prendre <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-137"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> ET </script>  <strong>tous les</strong> numéros de ce segment et vérifier le numéro de bit <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-140"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">r</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> couleur </script>  .  En utilisant le fait que l'opération <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-148"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-149">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> ET </script>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">commutative</a> , ainsi que somme, minimum / maximum, produit ou opération <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-151"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">X</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-154">r</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> Xor </script>  , pour un comptage rapide <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-155"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-156">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-157">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> ET </script>        ,      . : </p><br><ol><li> SQRT-.  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-158"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-159">O</span><span class="MJXp-mo" id="MJXp-Span-160" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msqrt" id="MJXp-Span-161"><span class="MJXp-surd"><span style="font-size: 134%; margin-top: 0.104em;">√</span></span><span class="MJXp-root"><span class="MJXp-rule" style="border-top: 0.08em solid;"></span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">N</span></span></span></span><span class="MJXp-mo" id="MJXp-Span-163" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-26">O(\sqrt{N})</script> ,  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-164"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">O</span><span class="MJXp-mo" id="MJXp-Span-166" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msqrt" id="MJXp-Span-167"><span class="MJXp-surd"><span style="font-size: 134%; margin-top: 0.104em;">√</span></span><span class="MJXp-root"><span class="MJXp-rule" style="border-top: 0.08em solid;"></span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168">N</span></span></span></span><span class="MJXp-mo" id="MJXp-Span-169" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27">O(\sqrt{N})</script>  . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a> . </li><li>  .  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-170"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-171">O</span><span class="MJXp-mo" id="MJXp-Span-172" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-173">N</span><span class="MJXp-mi" id="MJXp-Span-174">log</span><span class="MJXp-mo" id="MJXp-Span-175" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mrow" id="MJXp-Span-176"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">N</span></span><span class="MJXp-mo" id="MJXp-Span-178" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28">O(N\log{N})</script> ,  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-179"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180">O</span><span class="MJXp-mo" id="MJXp-Span-181" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi" id="MJXp-Span-182">log</span><span class="MJXp-mo" id="MJXp-Span-183" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mrow" id="MJXp-Span-184"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">N</span></span><span class="MJXp-mo" id="MJXp-Span-186" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29">O(\log{N})</script>  .    . </li><li>   (Sparse Table).  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-187"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">O</span><span class="MJXp-mo" id="MJXp-Span-189" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-190">N</span><span class="MJXp-mi" id="MJXp-Span-191">log</span><span class="MJXp-mo" id="MJXp-Span-192" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mrow" id="MJXp-Span-193"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-194">N</span></span><span class="MJXp-mo" id="MJXp-Span-195" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30">O(N\log{N})</script> ,  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-196"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-197">O</span><span class="MJXp-mo" id="MJXp-Span-198" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-199">1</span><span class="MJXp-mo" id="MJXp-Span-200" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31">O(1)</script>  . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . </li></ol><br><p>  ,      -   ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-201"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202">O</span><span class="MJXp-mo" id="MJXp-Span-203" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">N</span><span class="MJXp-mo" id="MJXp-Span-205" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32">O(N)</script> ,  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-206"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207">O</span><span class="MJXp-mo" id="MJXp-Span-208" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-209">1</span><span class="MJXp-mo" id="MJXp-Span-210" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33">O(1)</script> )  ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ,  ,       <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-211"><span class="MJXp-mtext" id="MJXp-Span-212">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-213">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-216">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-34"> \ varphi </script> ,  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-219"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">φ</span><span class="MJXp-mo" id="MJXp-Span-221" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">α</span><span class="MJXp-mo" id="MJXp-Span-223" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-224">β</span><span class="MJXp-mo" id="MJXp-Span-225" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-226" style="margin-left: 0.333em; margin-right: 0.333em;">∈</span><span class="MJXp-mo" id="MJXp-Span-227" style="margin-left: 0em; margin-right: 0em;">{</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">α</span><span class="MJXp-mo" id="MJXp-Span-229" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">β</span><span class="MJXp-mo" id="MJXp-Span-231" style="margin-left: 0em; margin-right: 0em;">}</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35">\varphi(\alpha, \beta) \in \{\alpha, \beta\}</script> ,      —    (,   ...) </p><br><p>   <code>SetPlaceColor</code> .       .      SQRT-       (  " ").         - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">    </a>      . </p><br><p>       -  —     . </p><br><p> ,   — <em></em>        ,    ?     : </p><br><ol><li>        .   <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-232"><span class="MJXp-mi" id="MJXp-Span-233">log</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36">\log</script>    ,  ,    —         (   magic number  ,     ). ,   <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-234"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-235">N</span><span class="MJXp-mo" id="MJXp-Span-236" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-237"><span class="MJXp-mn" id="MJXp-Span-238" style="margin-right: 0.05em;">10</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-239" style="vertical-align: 0.5em;"><span class="MJXp-mn" id="MJXp-Span-240">5</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37">N=10^{5}</script> ,     <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-241"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242">O</span><span class="MJXp-mo" id="MJXp-Span-243" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-244"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-245" style="margin-right: 0.05em;">N</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-246" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-247" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-38">O(N^2)</script>    10 ,    <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-248"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-249">O</span><span class="MJXp-mo" id="MJXp-Span-250" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251">N</span><span class="MJXp-mi" id="MJXp-Span-252">log</span><span class="MJXp-mo" id="MJXp-Span-253" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mrow" id="MJXp-Span-254"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-255">N</span></span><span class="MJXp-mo" id="MJXp-Span-256" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-39">O(N\log{N})</script>   0.150 ,        <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-257"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40"> N </script> ,     .  ,            ( ): <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-259"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">O</span><span class="MJXp-mo" id="MJXp-Span-261" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262">N</span><span class="MJXp-msqrt" id="MJXp-Span-263"><span class="MJXp-surd"><span style="font-size: 134%; margin-top: 0.104em;">√</span></span><span class="MJXp-root"><span class="MJXp-rule" style="border-top: 0.08em solid;"></span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264">N</span></span></span></span><span class="MJXp-mo" id="MJXp-Span-265" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-41">O(N\sqrt{N})</script> versus <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-266"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267">O</span><span class="MJXp-mo" id="MJXp-Span-268" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269">N</span><span class="MJXp-msubsup" id="MJXp-Span-270"><span class="MJXp-mi" id="MJXp-Span-271" style="margin-right: 0.05em;">log</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-272" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-273" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mrow" id="MJXp-Span-274"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-275">N</span></span><span class="MJXp-mo" id="MJXp-Span-276" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-42">O(N\log^2{N})</script>  .    <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-277"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-278">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-43"> N </script> ( )   —    15-30. </li><li>     ,         . </li></ol><br><p>     —                  ,      -   —   <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-279"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-280">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-44"> N </script>      ,    .     ,        ~25%  ~11%  ,          .     -      ,  ,        ,          . </p><br><p>        —      ,        .     . </p><br><ul><li>  .   ,            ,   - .       :   ,        ,        ""  ? ,      ,    !       .      ,       . </li><li>    (,     1337    1000x1000)   .        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">std::bitset</a> ,   —    ,   . </li></ul><br><p>  ,    . ""          .      ,         C++ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rope</a> ,       ), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> hashtable</a> ,   3-6    /   4-10   /,  unordered_map.         ,   boost. </p><br><h2 id="rofl-omitting-format-language"> ROFL Omitting Format Language </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rc/vp/jm/rcvpjmbinhow4aakwya-xgt3rm4.png"></div><br><p>         ,           ,       ,       -. </p><br><p> ROFL —  ,   "GNU's Not Unix". ,    ,       ,  ,   ,    .    Omitting   —          (, ,     :          —   ). </p><br><p> ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Matroska</a> —    4  [52][4F][46][4C],         ,   ,  ,   3 ,      — ,    . </p><br><p>  ,  MIT,    —   ,  . </p><br><h2 id="ishodniki">  </h2><br><p>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> .      ,    ,     (,         ).    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Magick++</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">args</a> . </p><br><p>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ,    (    ).    nonograms.ru      ,    ,             . </p><br><p>      nonograms.ru  .. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">KyberPrizrak</a> ,   ,          ,       !         nonograms.ru,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/es/zg/il/eszgil8btd-jjgaszlinfz2oodm.png"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr418069/">https://habr.com/ru/post/fr418069/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr418057/index.html">«Apprendre, étudier et étudier à nouveau»: les meilleures conférences de cet automne pour les développeurs mobiles</a></li>
<li><a href="../fr418059/index.html">OpenSource APM Pinpoint</a></li>
<li><a href="../fr418063/index.html">Intel Core i7-8086K (partie 4)</a></li>
<li><a href="../fr418065/index.html">Nouvelles de la conférence MBLT DEV 2018: Android Track</a></li>
<li><a href="../fr418067/index.html">Comment prototyper rapidement des applications avec une grille CSS et des variables CSS</a></li>
<li><a href="../fr418071/index.html">L'industrie informatique pour le peuple: TechTrain Festival à Saint-Pétersbourg</a></li>
<li><a href="../fr418075/index.html">TOP 5 des choses qui peuvent être imprimées sur une imprimante 3D [vidéo]</a></li>
<li><a href="../fr418077/index.html">Accidents de «ne pas regarder»: une justification statistique du mode de fonctionnement du support technique 24/7</a></li>
<li><a href="../fr418079/index.html">Les langages de programmation les plus populaires - 2018</a></li>
<li><a href="../fr418081/index.html">Organisation de tests sûrs en production. Partie 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>