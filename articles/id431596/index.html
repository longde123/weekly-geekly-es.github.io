<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’ â—½ï¸ ğŸ¤µğŸ¾ Pengujian Beban Cadangan & Replikasi Veeam ğŸ¤¹ğŸ¿ ğŸ§‘ğŸ¼ ğŸ‘¨â€ğŸš€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada musim semi tahun 2018, Selectel meluncurkan layanan cadangan berbasis VMware Cloud melalui VeeamÂ® Backup & Replication â„¢ (selanjutnya disebut VBR...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pengujian Beban Cadangan & Replikasi Veeam</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/431596/"><img src="https://habrastorage.org/webt/b4/zh/jj/b4zhjj50y8pexmomkjgovcahmvk.png"><br><br>  Pada musim semi tahun 2018, Selectel meluncurkan layanan cadangan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">berbasis VMware Cloud</a> melalui VeeamÂ® Backup &amp; Replication â„¢ (selanjutnya disebut VBR).  Kami mendekati proyek secara menyeluruh, merencanakan dan melakukan daftar pekerjaan berikut: <br><br><ul><li>  Menjelajahi Dokumentasi Produk Veeam dan Praktik Terbaik </li><li>  Merancang Arsitektur VBR Penyedia Layanan </li><li>  Menyebarkan Infrastruktur VBR </li><li>  Menguji solusi, menentukan pengaturan optimal dan mode operasi </li><li>  Meluncurkan solusi dalam operasi industri (komersial) </li></ul><br>  Ternyata - tidak sia-sia.  Layanannya stabil, pelanggan dapat membuat cadangan mesin virtual mereka, dan kami memiliki keahlian tertentu yang ingin kami bagikan. <br><br>  Pada artikel ini kami ingin berbicara tentang hasil pengujian beban VBR untuk dua mode operasi proxy cadangan yang paling populer, dengan mempertimbangkan variasi dalam jumlah tugas paralel. <br><a name="habracut"></a><br>  Di sini Anda dapat melihat: <br><br><ul><li>  Deskripsi infrastruktur produksi Selectel yang digunakan untuk pengujian </li><li>  Fitur proxy cadangan (proxy cadangan) dalam berbagai mode transportasi </li><li>  Deskripsi program pengujian dan pengaturan komponen VBR untuk implementasinya </li><li>  Indikator kuantitatif, perbandingan dan kesimpulannya </li></ul><br><h2>  Uji Konfigurasi Infrastruktur </h2><br><h3>  Sumber Infrastruktur </h3><br>  Sebagai platform untuk menguji kinerja VBR, dibuatlah salah satu kluster produksi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cloud</a> publik <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">berdasarkan VMware</a> . <br><br><ul><li>  Konfigurasi perangkat keras dari host di kluster ini: </li><li>  IntelÂ® XeonÂ® Gold Processors 6140 </li><li>  IntelÂ® DC NVMe P4600 dan P3520 </li><li>  4 port 10GbE per host </li></ul><br>  Cluster ini didasarkan pada solusi berikut: <br><br><ul><li>  Jaringan fisik - Pabrik Ethernet pada sakelar Brocade VDX, arsitektur Leaf-Spine (port 10GbE - penghubung penghuni, uplink 40GbE ke Spine) </li><li>  Lingkungan Virtualisasi - VMware vSphereÂ® 6.5 </li><li>  Penyimpanan VM - VMware vSAN â„¢ 6.6 (All-Flash vSAN Cluster) </li><li>  Virtualisasi Jaringan - VMware NSXÂ® 6.4 </li></ul><br>  Kinerja platform pengujian lebih dari cukup dan tidak diragukan.  Tentu saja, untuk kinerja kecepatan tinggi, semua ini harus dikonfigurasi dengan benar, tetapi karena ini adalah produksi, dengan pelanggan yang bersemangat dan puas, Anda dapat yakin bahwa semuanya baik-baik saja dalam hal ini. <br><br>  Bersama dengan Cloud berbasis VMware, Selectel meluncurkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">layanan</a> untuk cadangannya pada platform VBR.  Pelanggan menerima portal web swalayan di mana mereka dapat membuat cadangan dan memulihkan vApp dan VM dari VDC (pusat data virtual) mereka. <br><br>  Klien memiliki akses ke portal ini (VeeamÂ® Enterprise Manager Self-service portal) dengan hak yang sama dengan vCloud DirectorÂ® (vCD).  Ini dimungkinkan karena integrasi VeeamÂ® Backup Enterprise Manager (EM) dan vCD, sementara setiap klien, ketika terhubung ke EM, dibatasi oleh sumber daya VDC-nya, tidak akan melihat VM lain. <br><br>  Klien tidak perlu menggunakan VBR sendiri dan infrastruktur cadangan terkait, yang melibatkan biaya komputasi dan sumber daya jaringan, penyimpanan, lisensi Veeam dan MS, dan administrasi.  Itu panjang, mahal dan rumit.  Selectel menyediakan kemampuan dasar VBR sebagai layanan BaaS (Backup-as-a-Service): langsung, sederhana, mudah, ekonomis. <br><br>  Untuk menyediakan layanan ini, Selectel mengerahkan infrastruktur penyedia VBR yang mencakup semua kluster vSphere dan VDC klien VMware cloud, termasuk kluster tempat pengujian ini dilakukan.  Dengan demikian, hasil pengujian akan memungkinkan kami untuk menilai kecepatan maksimum yang dengannya pelanggan dapat membuat cadangan VM mereka. <br><br><h3>  Uji VMs </h3><br>  Untuk menguji kinerja cadangan, 6 VM identik dikerahkan di kluster vSphere dalam konfigurasi berikut: <br><br><ul><li>  OS Windows Server 2016, 2 vCPU, 4GB RAM </li><li>  200GB vDisk </li></ul><br>  Disk hampir penuh - 193GB.  Selain file OS, folder dengan distribusi berbagai OS dan DBMS dengan kapasitas 60GB dibuat di dalamnya (data unik).  Pada drive yang sama, 3 salinan folder ini dibuat - total 180GB data non-sistem. <br><br>  Tidak ada aplikasi yang diinstal pada VM ini, hanya OS "bersih" dan data "dingin".  Tanpa beban, komputasi atau jaringan, dimulai.  Untuk tes ini, ini tidak diperlukan. <br><br>  DRS diaktifkan di kluster vSphere, jadi VM uji secara otomatis didistribusikan secara optimal di host VMware ESXi â„¢ untuk penyeimbangan beban. <br><br><h3>  Proxy cadangan </h3><br>  VM dengan proksi cadangan dikerahkan secara langsung di kluster vSphere yang dijelaskan di atas (infrastruktur sumber, selanjutnya disebut kluster vSphere), ini adalah kondisi yang diperlukan untuk pengujian dalam mode Peralatan Virtual. <br><br>  Konfigurasi VM: <br><br><ul><li>  8 vCPU </li><li>  RAM 8GB </li><li>  40 GB vDisk </li><li>  10GbE vNIC vmxnet3 </li><li>  OS Windows Server 2016 </li></ul><br>  Parameter "Max concurrent task" untuk proxy cadangan di tingkat VBR diatur ke 6. Ini berarti bahwa proxy cadangan dapat secara bersamaan (secara paralel) memproses hingga 6 tugas cadangan.  Satu tugas adalah cadangan dari satu disk VM virtual. <br><br><h3>  Repositori cadangan </h3><br>  Server fisik bertindak sebagai repositori cadangan VBR bertindak sebagai antarmuka penyimpanan cadangan.  Konfigurasi Server: <br><br><ul><li>  CPU E5-1650v3 </li><li>  RAM 32GB </li><li>  2 port 10GbE </li></ul><br>  Backend penyimpanan - CephFS cluster dengan cache NVMe. <br><br>  Repositori cadangan dan node Ceph berkomunikasi melalui jaringan 10GbE, masing-masing terhubung ke switch dengan dua port. <br><br>  Penjelasan rinci tentang konfigurasi cluster Ceph berada di luar cakupan artikel ini.  Perhatikan bahwa untuk keandalan dan toleransi kesalahan, data di dalamnya disimpan dalam tiga salinan.  Kinerja cluster tidak memuaskan dan diletakkan dengan margin, hasil tes menunjukkan bahwa tidak satupun dari mereka penyimpanan cadangan adalah hambatan. <br><br>  Parameter "Batasi tugas serentak maksimum" untuk repositori cadangan di level VBR diatur ke 6. Ini berarti repositori cadangan akan dapat secara bersamaan memproses (hingga 6) tugas cadangan. <br><br><h3>  Jaringan cadangan </h3><br>  Jaringan fisik infrastruktur yang dijelaskan di atas dibatasi oleh bandwidth 10 Gbit / detik, sakelar dan port 10GbE digunakan di mana-mana.  Ini berlaku tidak hanya untuk vSAN, tetapi juga untuk antarmuka manajemen host ESXi. <br><br>  Untuk meng-host proxy cadangan di tingkat VMware NSX, subnet khusus telah dibuat dengan sakelar logisnya sendiri.  Untuk konektivitasnya dengan fisika dan perutean, NSX-edge, ukuran X-besar, telah digunakan. <br><br>  Ke depan, menurut hasil pengujian, jelas bahwa jaringan dapat menahan beban hingga 8 Gb / s.  Ini adalah bandwidth yang sangat solid, yang cukup pada tahap ini, jika perlu, dapat ditingkatkan. <br><br><h3>  Diagram interaksi komponen </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cu/jh/cj/cujhcj5n4pch_msn8z03xdxvfdc.jpeg"></div><br>  Proxy cadangan dan VM uji disebarkan dalam kluster VMware vSAN yang sama.  Setelah memulai pekerjaan cadangan (pekerjaan cadangan), tergantung pada mode transportasi yang dipilih, fitur-fitur yang dibahas di bawah ini, proxy cadangan: <br><br><ul><li>  Mengambil data dari VM cadangan melalui vSAN (HotAdd) atau jaringan kontrol (NBD) </li><li>  Transfer memproses data ke repositori cadangan pada subnet yang dialokasikan untuk tujuan ini </li></ul><br><h2>  Mode Transport Proxy Cadangan </h2><br>  Proxy cadangan adalah komponen infrastruktur VBR yang secara langsung melakukan pemrosesan pekerjaan cadangan.  Ini mengekstrak data dari VM, memprosesnya (kompres, deduplicate, mengenkripsi) dan mengirimkannya ke repositori, di mana ia disimpan ke file cadangan. <br><br>  Proxy cadangan memungkinkan Anda bekerja dalam tiga mode transportasi: <br><br><ul><li>  Akses penyimpanan langsung </li><li>  Alat virtual </li><li>  Jaringan </li></ul><br>  Cloud berbasis VMware Selectel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menggunakan vSAN</a> sebagai penyimpanan, dalam konfigurasi ini akses penyimpanan langsung tidak didukung, oleh karena itu mode ini tidak dipertimbangkan dan belum diuji.  Dua mode yang tersisa bekerja sangat baik pada masing-masing kluster vSphere kami. Mari kita bahas lebih rinci. <br><br><h3>  Mode alat virtual (HotAdd) </h3><br>  Alat virtual adalah mode yang disarankan saat menggunakan proxy cadangan sebagai VM.  Host ESXi tempat proxy cadangan digunakan harus memiliki akses ke semua Datastore cluster vSphere yang menyimpan VM cadangan.  Inti dari mode ini adalah bahwa proxy me-mount disk VM cadangan (VMware SCSI HotAdd) dan mengambil data dari mereka seolah-olah itu miliknya sendiri.  Ekstraksi data terjadi dengan Datastore melalui jaringan penyimpanan. <br><br>  Dalam kasus kami, VM proksi cadangan harus terletak di salah satu host ESXi dari kluster vSAN, yang kami cadangkan.  Ekstraksi data terjadi melalui vSAN.  Dengan demikian, untuk bekerja dalam mode alat Virtual, setidaknya satu proksi cadangan harus digunakan di setiap kluster vSAN.  Perluas sepasang proksi cadangan (misalnya, dalam kluster manajemen) dan mencadangkan semua kluster vSAN dengan mereka akan gagal. <br><table><tbody><tr><td align="center">  <strong>Pro</strong> </td><td align="center">  <strong>Cons</strong> </td></tr><tr><td>  Cepat, sebagai aturan, jauh lebih cepat daripada NBD, terutama dalam kasus cadangan penuh atau peningkatan besar.  Hanya akses penyimpanan langsung yang lebih rendah kecepatannya. </td><td>  Operasi pemasangan disk (HotAdd) ke proxy dapat memakan waktu hingga 2 menit per disk.  Dengan cadangan tambahan potongan kecil data, NBD bisa lebih cepat. </td></tr><tr><td>  Membuang jaringan penyimpanan.  Tidak memuat antarmuka manajemen dan hypervisor. </td><td>  Proxy VM mengkonsumsi sebagian dari sumber daya host.  Terkadang mungkin ada masalah dengan menghapus foto. </td></tr></tbody></table><h3>  Mode Jaringan (NBD) </h3><br>  Ini adalah mode paling sederhana dan paling universal, cocok untuk proksi cadangan fisik dan virtual.  Ekstraksi data, tidak seperti dua mode sebelumnya, tidak terjadi melalui jaringan penyimpanan.  Proxy cadangan mengambil data VM dengan menyambungkan ke antarmuka manajemen host ESXi di mana mereka berjalan. <br><br>  Pendekatan ini memiliki kelemahan sebagai berikut: <br><br><ul><li>  Seringkali antarmuka manajemen ESXi tidak bergantung pada uplink tercepat, sebagai aturan, ini adalah 1GbE </li><li>  Bahkan jika antarmuka manajemen akan memiliki port 10GbE, ESXi tidak akan menyerahkan seluruh proxy band proxy - itu secara artifisial membatasi dan mengalokasikan hanya beberapa bagian dari bandwidth antarmuka untuk cadangan </li></ul><table><tbody><tr><td align="center">  <strong>Pro</strong> </td><td align="center">  <strong>Cons</strong> </td></tr><tr><td>  Sederhana dan serbaguna.  Proxy dapat berupa fisik dan virtual. </td><td>  Sebagai aturan, ini jauh lebih lambat daripada HotAdd, terutama pada volume cadangan yang besar dan sejumlah kecil tugas paralel. </td></tr><tr><td>  Mulai cepat, tidak ada penundaan pada pemasangan drive.  Tidak ada masalah dengan snapshot. </td><td>  Membuat beban (kecil) pada antarmuka manajemen dan hypervisor. </td></tr></tbody></table>  Pada saat yang sama, banyak sumber mengklaim bahwa NBD sangat lambat pada 1GbE, tetapi pada 10GbE bisa sangat cepat.  Kami pasti akan memeriksa ini. <br><br><h2>  Program pengujian </h2><br>  Pada infrastruktur yang dijelaskan di atas, perlu untuk membuat cadangan VM uji dan mencatat indikator berikut: <br><br><ul><li>  Beban CPU,% </li><li>  Konsumsi RAM, GB </li><li>  Beban Jaringan, Gbps </li><li>  Kinerja cadangan, MB / s </li><li>  Waktu cadangan, mm: dd </li></ul><br>  Indikator harus diperbaiki untuk cadangan satu VM uji dan untuk cadangan paralel dua, empat dan enam VM uji. <br><br>  Indikator harus direkam untuk mode operasi Virtual appliance dan cadangan jaringan.  Setiap kali pencadangan penuh harus dilakukan, tidak ada peningkatan. <br><br>  Dengan demikian, perlu untuk membuat 4 pekerjaan cadangan: <br><br><ul><li>  Untuk satu uji VM </li><li>  Untuk dua VM uji </li><li>  Selama empat VM uji </li><li>  Selama enam VM uji </li></ul><br>  Sebagai bagian dari pengujian, perlu: <br><br><ol><li>  Menjalankan semua tugas secara berurutan dalam satu mode </li><li>  Hapus cadangan yang dibuat sehingga tidak ada peningkatan </li><li>  Ulangi berjalan dalam mode kedua, setiap kali memperbaiki indikator </li></ol><br>  Dalam pengaturan setiap tugas, Anda harus secara manual memilih proxy cadangan yang disiapkan untuk pengujian, karena itu bukan satu-satunya di infrastruktur VBR umum, dan secara default proxy tersebut dipilih secara otomatis. <br><br>  Mode proxy cadangan default juga dipilih secara otomatis.  Oleh karena itu, dalam pengaturan proxy cadangan, sebelum setiap kali dijalankan, secara manual mengatur mode transportasi yang diinginkan. <br><br>  Indikator yang paling menarik adalah kecepatan rata-rata atau kinerja cadangan.  Itu bisa dilihat pada hasil pekerjaan di konsol VBR.  Ini juga akan menampilkan runtime cadangan. <br><br>  Selain itu, Anda perlu mengevaluasi beban pada proksi cadangan di setiap tes.  Kemacetan CPU, memori, dan jaringan dapat dipantau menggunakan alat OS tamu (Windows 2016) dan di tingkat VMware. <br><br>  Pada proksi cadangan dan repositori cadangan, parameter untuk jumlah maksimum tugas simultan diatur ke 6. Ini berarti bahwa selama pengujian, semua VM di setiap tugas akan diproses secara paralel, tidak ada dari mereka akan menunggu dalam antrian, kinerja akan maksimal. <br><br>  VeeamÂ® merekomendasikan bahwa jumlah tugas paralel tidak boleh melebihi jumlah inti prosesor pada proksi dan repositori.  Jumlah RAM yang disarankan pada repositori adalah 2 GB per inti, total 12 GB.  Konfigurasi infrastruktur menunjukkan bahwa semua rekomendasi diikuti. <br><br><h2>  Kecepatan dan memuat cadangan dalam mode Peralatan Virtual (Hot Add) </h2><br><h3>  Cadangkan 1 VM </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xp/ez/bd/xpezbdpsxcufmtsdpprpvv_nm9w.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Backup Proxy Load</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Beban CPU,% </td><td align="center">  55-95 </td></tr><tr><td>  Konsumsi RAM, GB </td><td align="center">  2-2,2 </td></tr><tr><td>  Beban Jaringan, Gbps </td><td align="center">  4.7-6.4 </td></tr></tbody></table><br></div></div><div class="spoiler">  <b class="spoiler_title">Kecepatan cadangan</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Kinerja cadangan, MB / s </td><td align="center">  709 </td></tr><tr><td>  Waktu cadangan, mm: dd </td><td align="center">  06:35 </td></tr></tbody></table><br></div></div><br><h3>  Cadangkan 2 VM </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qw/pj/qw/qwpjqwyr9vleuslvegj4wdzzudg.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Backup Proxy Load</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Beban CPU,% </td><td align="center">  70-100 (rak 100% dengan tetes pendek tajam hingga 70%) </td></tr><tr><td>  Konsumsi RAM, GB </td><td align="center">  2.3-2.5 </td></tr><tr><td>  Beban Jaringan, Gbps </td><td align="center">  5-7.7 </td></tr></tbody></table><br></div></div><div class="spoiler">  <b class="spoiler_title">Kecepatan cadangan</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Kinerja cadangan, MB / s </td><td align="center">  816 </td></tr><tr><td>  Waktu cadangan, mm: dd </td><td align="center">  10:03 </td></tr></tbody></table><br></div></div><br><h3>  Cadangkan 4 VM </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7n/om/ii/7nomiiyognj8gswhpcwx2yoi5cs.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Backup Proxy Load</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Beban CPU,% </td><td align="center">  100 (rak 100% dengan tetes kecil yang langka) </td></tr><tr><td>  Konsumsi RAM, GB </td><td align="center">  3-3.5 </td></tr><tr><td>  Beban Jaringan, Gbps </td><td align="center">  5-8,2 </td></tr></tbody></table><br></div></div><div class="spoiler">  <b class="spoiler_title">Kecepatan cadangan</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Kinerja cadangan, MB / s </td><td align="center">  885 </td></tr><tr><td>  Waktu cadangan, mm: dd </td><td align="center">  17:10 </td></tr></tbody></table><br></div></div><br><h3>  Cadangkan 6 VM </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qt/wx/ey/qtwxeyomib4z4zywrck_j_mmqbg.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Backup Proxy Load</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Beban CPU,% </td><td align="center">  100 (rak 100% dengan tetes kecil yang langka) </td></tr><tr><td>  Konsumsi RAM, GB </td><td align="center">  4-4,2 </td></tr><tr><td>  Beban Jaringan, Gbps </td><td align="center">  5-8,2 </td></tr></tbody></table><br></div></div><div class="spoiler">  <b class="spoiler_title">Kecepatan cadangan</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Kinerja cadangan, MB / s </td><td align="center">  888 </td></tr><tr><td>  Waktu cadangan, mm: dd </td><td align="center">  24:42 </td></tr></tbody></table><br></div></div><br><h2>  Kecepatan Cadangan dan Mode Jaringan Muat (NBD) </h2><br><h3>  Cadangkan 1 VM </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vf/1j/jk/vf1jjkuom98hsgw9v2mnfqs6wjg.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Backup Proxy Load</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Beban CPU,% </td><td align="center">  18-24 </td></tr><tr><td>  Konsumsi RAM, GB </td><td align="center">  1.9-2.1 </td></tr><tr><td>  Beban Jaringan, Gbps </td><td align="center">  1.2-1.8 </td></tr></tbody></table><br></div></div><div class="spoiler">  <b class="spoiler_title">Kecepatan cadangan</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Kinerja cadangan, MB / s </td><td align="center">  192 </td></tr><tr><td>  Waktu cadangan, mm: dd </td><td align="center">  18:30 </td></tr></tbody></table><br></div></div><br><h3>  Cadangkan 2 VM </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/v4/7n/ho/v47nhooellqc7pkgkjayv0e2d64.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Backup Proxy Load</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Beban CPU,% </td><td align="center">  25-33 </td></tr><tr><td>  Konsumsi RAM, GB </td><td align="center">  2.2-2.4 </td></tr><tr><td>  Beban Jaringan, Gbps </td><td align="center">  1.5-2.5 </td></tr></tbody></table><br></div></div><div class="spoiler">  <b class="spoiler_title">Kecepatan cadangan</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Kinerja cadangan, MB / s </td><td align="center">  269 </td></tr><tr><td>  Waktu cadangan, mm: dd </td><td align="center">  25:50 </td></tr></tbody></table><br></div></div><br><h3>  Cadangkan 4 VM </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ah/nf/ng/ahnfngh4urqwfdwkubfzaatesa8.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Backup Proxy Load</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Beban CPU,% </td><td align="center">  45-55 </td></tr><tr><td>  Konsumsi RAM, GB </td><td align="center">  2.8-3.5 </td></tr><tr><td>  Beban Jaringan, Gbps </td><td align="center">  2.8-4.5 </td></tr></tbody></table><br></div></div><div class="spoiler">  <b class="spoiler_title">Kecepatan cadangan</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Kinerja cadangan, MB / s </td><td align="center">  446 </td></tr><tr><td>  Waktu cadangan, mm: dd </td><td align="center">  31:14 </td></tr></tbody></table><br></div></div><br><h3>  Cadangkan 6 VM </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/f8/ah/90/f8ah90h6s77rwwywul_likwvln4.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Backup Proxy Load</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Beban CPU,% </td><td align="center">  50-70 </td></tr><tr><td>  Konsumsi RAM, GB </td><td align="center">  3,5-4 </td></tr><tr><td>  Beban Jaringan, Gbps </td><td align="center">  3,5-5 </td></tr></tbody></table><br></div></div><div class="spoiler">  <b class="spoiler_title">Kecepatan cadangan</b> <div class="spoiler_text"><table><tbody><tr><td>  <strong>Indikator</strong> </td><td align="center">  <strong>Nilai</strong> </td></tr><tr><td>  Kinerja cadangan, MB / s </td><td align="center">  517 </td></tr><tr><td>  Waktu cadangan, mm: dd </td><td align="center">  40:02 </td></tr></tbody></table><br></div></div><br><h2>  Perbandingan kinerja dan beban dalam Virtual Appliance (HotAdd) dan Mode Jaringan (NBD) </h2><table><tbody><tr><td align="center">  <strong>Jumlah VM</strong> </td><td align="center">  <strong>Kecepatan - HotAdd, MB / s</strong> </td><td align="center">  <strong>Kecepatan - NBD, MB / s</strong> </td><td align="center">  <strong>HotAdd / NBD</strong> </td></tr><tr><td align="center">  1 </td><td align="center">  709 </td><td align="center">  192 </td><td align="center">  3.69 </td></tr><tr><td align="center">  2 </td><td align="center">  816 </td><td align="center">  269 </td><td align="center">  3.03 </td></tr><tr><td align="center">  4 </td><td align="center">  885 </td><td align="center">  446 </td><td align="center">  1.98 </td></tr><tr><td align="center">  6 </td><td align="center">  888 </td><td align="center">  517 </td><td align="center">  1.72 </td></tr></tbody></table><table><tbody><tr><td align="center">  <strong>Jumlah VM</strong> </td><td align="center">  <strong>Beban CPU - HotAdd,%</strong> </td><td align="center">  <strong>Beban CPU - NBD,%</strong> </td><td align="center">  <strong>HotAdd / NBD</strong> </td></tr><tr><td align="center">  1 </td><td align="center">  55-95 </td><td align="center">  18-24 </td><td align="center">  3.06-3.96 </td></tr><tr><td align="center">  2 </td><td align="center">  70-100 </td><td align="center">  25-33 </td><td align="center">  2.8-3.03 </td></tr><tr><td align="center">  4 </td><td align="center">  100 </td><td align="center">  45-55 </td><td align="center">  1.82-2.22 </td></tr><tr><td align="center">  6 </td><td align="center">  100 </td><td align="center">  50-70 </td><td align="center">  1.43-2 </td></tr></tbody></table><table><tbody><tr><td align="center">  <strong>Jumlah VM</strong> </td><td align="center">  <strong>Unduh RAM - HotAdd, GB</strong> </td><td align="center">  <strong>Pemuatan RAM - NBD, GB</strong> </td><td align="center">  <strong>HotAdd / NBD</strong> </td></tr><tr><td align="center">  1 </td><td align="center">  2-2,2 </td><td align="center">  1.9-2.1 </td><td align="center">  1,05 </td></tr><tr><td align="center">  2 </td><td align="center">  2.3-2.5 </td><td align="center">  2.2-2.4 </td><td align="center">  1,04-1,05 </td></tr><tr><td align="center">  4 </td><td align="center">  3-3.5 </td><td align="center">  2.8-3.5 </td><td align="center">  1-1.07 </td></tr><tr><td align="center">  6 </td><td align="center">  4-4,2 </td><td align="center">  3,5-4 </td><td align="center">  1.14-1.05 </td></tr></tbody></table><table><tbody><tr><td align="center">  <strong>Jumlah VM</strong> </td><td align="center">  <strong>Unduhan Jaringan - HotAdd, Gb / s</strong> </td><td align="center">  <strong>Unduh Jaringan - NBD, Gb / s</strong> </td><td align="center">  <strong>HotAdd / NBD</strong> </td></tr><tr><td align="center">  1 </td><td align="center">  4.7-6.4 </td><td align="center">  1.2-1.8 </td><td align="center">  3.56-3.92 </td></tr><tr><td align="center">  2 </td><td align="center">  5-7.7 </td><td align="center">  1.5-2.5 </td><td align="center">  3.08-3.33 </td></tr><tr><td align="center">  4 </td><td align="center">  5-8,2 </td><td align="center">  2.8-4.5 </td><td align="center">  1.79-1.82 </td></tr><tr><td align="center">  6 </td><td align="center">  5-8,2 </td><td align="center">  3,5-5 </td><td align="center">  1.43-1.64 </td></tr></tbody></table><h2>  Hasil Tes </h2><br>  Indikator kinerja cadangan yang diperoleh sebagai hasil pengujian dengan tegas mengonfirmasi fakta bahwa mode peralatan Virtual jauh lebih unggul dalam kecepatan dibandingkan dengan mode Jaringan, terutama dalam sejumlah kecil tugas paralel. <br><br>  Biarkan saya mengingatkan Anda bahwa tes untuk kedua mode dijalankan dalam kondisi yang benar-benar identik pada platform yang sama.  Bandwidth jaringan juga sama - antarmuka kontrol di mana proxy mengumpulkan data dalam mode NBD memberikan 10 Gbit / s, seperti jaringan vSAN untuk mode HotAdd, kami tidak menetapkan batas bandwidth. <br><br>  Jelas, ESXi benar-benar memperlambat VeeamÂ® dan memberikannya hanya bagian dari band dalam mode Jaringan, karenanya perbedaan dalam kecepatan cadangan.  Namun, dengan peningkatan jumlah utas - tugas cadangan simultan - mode Jaringan secara signifikan mengurangi jaminan simpanan. <br><br>  Kita melihat bahwa dalam mode Virtual appliance, sudah pada 4 VM, proxy cadangan bersandar pada prosesor, itu tidak dapat bekerja lebih cepat, untuk 6 VM kecepatan cadangan tidak banyak berubah.  Pada saat yang sama, kecepatan cadangan 1-2 VMs dalam mode ini sedikit tertinggal, kemampuan proxy cadangan dan platform digunakan secara maksimal bahkan pada sejumlah kecil utas. <br><br>  Dalam mode Jaringan, sebaliknya, ada peningkatan produktivitas yang signifikan dengan peningkatan jumlah tugas simultan.  Pada saat yang sama, beban pada prosesor proksi cadangan secara signifikan lebih rendah daripada dalam mode HotAdd, bahkan pada 6 utas tidak melebihi 70%. <br><br>  Konsumsi memori proksi cadangan kecil dan kira-kira sama di kedua mode. <br><br>  Beban pada jaringan proxy cadangan berkorelasi dengan kecepatan cadangan, melebihi ~ 10-17%.  Rupanya proxy mengambil data dari sumber VM sedikit lebih cepat daripada mengunggah ke repositori, karena mereka perlu diproses. <br><br>  Sangat menarik untuk mengamati garis Muat dalam gambar dengan hasil pelaksanaan pekerjaan.  Ini menunjukkan tingkat beban pada berbagai elemen infrastruktur cadangan: sumber, proksi, jaringan, repositori. <br><br>  Dalam mode Virtual appliance, kita melihat bahwa kinerja cadangan terletak pada proxy dan jaringan, mereka selalu kira-kira sama bebannya.  Sumber dan repositori bukanlah hambatan. <br><br>  Dalam mode Jaringan, bottleneck selalu menjadi sumber, bahkan untuk aliran tunggal.  Dapat dilihat bahwa infrastruktur lainnya dapat memberi lebih, tetapi ESXi tidak memberikannya. <br><br><h2>  Ringkasan </h2><br>  Pengujian mengkonfirmasi bahwa proksi cadangan dalam mode transportasi yang dipelajari dalam praktik berperilaku tepat seperti yang disarankan teori. <br><br>  Perangkat lunak VeeamÂ® telah terbukti sangat layak: <br><br><ul><li>  Dalam mode HotAdd, semua kemampuan infrastruktur digunakan secara efektif dan sepenuhnya. </li><li>  Dalam mode NBD, kinerja diharapkan lebih sederhana, tetapi ini bukan masalah VeeamÂ®, tetapi fitur tumpukan jaringan ESXi </li></ul><br>  Kami mendapat indikator kinerja dan beban nyata, yang sangat berguna untuk memilih mode operasi optimal dan penskalaan sistem selanjutnya. <br><br>  Saat ini, kami cukup senang dengan kinerja cadangan yang ada, kami memahami cara meningkatkannya dengan benar ketika kebutuhan seperti itu muncul. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id431596/">https://habr.com/ru/post/id431596/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id431582/index.html">Sejarah perlindungan data pribadi: bagaimana GDPR terjadi?</a></li>
<li><a href="../id431584/index.html">Ruang dan pengujian: campur, tapi jangan goyang</a></li>
<li><a href="../id431586/index.html">Cara menangani kesalahan pada JVM lebih cepat</a></li>
<li><a href="../id431588/index.html">UU Wiraswasta. Informasi untuk dipertimbangkan</a></li>
<li><a href="../id431590/index.html">Modernisasi peternakan angin Inggris yang usang akan meningkatkan pembangkit energi sebesar 171%</a></li>
<li><a href="../id431598/index.html">Kami membawa ke mesin virtual QEMU publik ke internet tanpa kartu jaringan dan mencoba menambang</a></li>
<li><a href="../id431600/index.html">Naikkan IDS / NMS: Mikrotik dan Suricata dengan antarmuka web</a></li>
<li><a href="../id431602/index.html">Pengembang Rusia menghadirkan sistem rehabilitasi virtual di London</a></li>
<li><a href="../id431604/index.html">Pelokalan di Go dengan paket dasar</a></li>
<li><a href="../id431608/index.html">Perusahaan AS DriveSavers adalah yang pertama di dunia yang meluncurkan layanan peretasan iPhone untuk individu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>