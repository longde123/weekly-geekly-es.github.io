<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📧 ❗️ 🧑🏾‍🤝‍🧑🏻 Bandingkan PHP FPM, PHP PPM, Nginx Unit, React PHP dan RoadRunner 💶 📣 👸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pengujian dilakukan menggunakan Yandex Tank. 
 Symfony 4 dan PHP 7.2 digunakan sebagai aplikasi. 
 Tujuannya adalah untuk membandingkan karakteristik ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bandingkan PHP FPM, PHP PPM, Nginx Unit, React PHP dan RoadRunner</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431818/"><img src="https://habrastorage.org/webt/fk/hu/2y/fkhu2yx-ka6-lgomyrmgvgsqzvm.png"><br><br>  Pengujian dilakukan menggunakan Yandex Tank. <br>  Symfony 4 dan PHP 7.2 digunakan sebagai aplikasi. <br>  Tujuannya adalah untuk membandingkan karakteristik layanan pada beban yang berbeda dan menemukan opsi terbaik. <br>  Untuk kenyamanan, semuanya dikumpulkan dalam wadah buruh pelabuhan dan diangkat menggunakan komposisi buruh pelabuhan. <br>  Di bawah kucing ada banyak tabel dan grafik. <a name="habracut"></a><br><p>  Kode sumber ada di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br>  Semua contoh perintah yang dijelaskan dalam artikel harus dijalankan dari direktori proyek. </p><br><h2 id="prilozhenie">  Aplikasi </h2><br><p>  Aplikasi ini berjalan pada Symfony 4 dan PHP 7.2. </p><br><p>  Jawaban hanya satu rute dan kembali: </p><br><ul><li>  nomor acak; </li><li>  lingkungan </li><li>  pid dari proses; </li><li>  nama layanan yang digunakannya; </li><li>  variabel php.ini. </li></ul><br><p>  Contoh jawaban: </p><br><pre><code class="bash hljs">curl <span class="hljs-string"><span class="hljs-string">'http://127.0.0.1:8000/'</span></span> | python -m json.tool { <span class="hljs-string"><span class="hljs-string">"env"</span></span>: <span class="hljs-string"><span class="hljs-string">"prod"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"php-fpm"</span></span>, <span class="hljs-string"><span class="hljs-string">"pid"</span></span>: 8, <span class="hljs-string"><span class="hljs-string">"random_num"</span></span>: 37264, <span class="hljs-string"><span class="hljs-string">"php"</span></span>: { <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"7.2.12"</span></span>, <span class="hljs-string"><span class="hljs-string">"date.timezone"</span></span>: <span class="hljs-string"><span class="hljs-string">"Europe/Paris"</span></span>, <span class="hljs-string"><span class="hljs-string">"display_errors"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"error_log"</span></span>: <span class="hljs-string"><span class="hljs-string">"/proc/self/fd/2"</span></span>, <span class="hljs-string"><span class="hljs-string">"error_reporting"</span></span>: <span class="hljs-string"><span class="hljs-string">"32767"</span></span>, <span class="hljs-string"><span class="hljs-string">"log_errors"</span></span>: <span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-string"><span class="hljs-string">"memory_limit"</span></span>: <span class="hljs-string"><span class="hljs-string">"256M"</span></span>, <span class="hljs-string"><span class="hljs-string">"opcache.enable"</span></span>: <span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-string"><span class="hljs-string">"opcache.max_accelerated_files"</span></span>: <span class="hljs-string"><span class="hljs-string">"20000"</span></span>, <span class="hljs-string"><span class="hljs-string">"opcache.memory_consumption"</span></span>: <span class="hljs-string"><span class="hljs-string">"256"</span></span>, <span class="hljs-string"><span class="hljs-string">"opcache.validate_timestamps"</span></span>: <span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"realpath_cache_size"</span></span>: <span class="hljs-string"><span class="hljs-string">"4096K"</span></span>, <span class="hljs-string"><span class="hljs-string">"realpath_cache_ttl"</span></span>: <span class="hljs-string"><span class="hljs-string">"600"</span></span>, <span class="hljs-string"><span class="hljs-string">"short_open_tag"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } }</code> </pre> <br><p>  PHP dikonfigurasi di setiap wadah: </p><br><ul><li>  OPcache diaktifkan; </li><li>  cache bootstrap yang dikonfigurasi menggunakan komposer; </li><li>  Pengaturan php.ini sejalan dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">praktik terbaik Symfony</a> . </li></ul><br><p>  Log ditulis dalam stderr: <br>  /config/packages/prod/monolog.yaml </p><br><pre> <code class="plaintext hljs">monolog: handlers: main: type: stream path: "php://stderr" level: error console: type: console</code> </pre> <br><p>  Tembolok ditulis dalam / dev / shm: <br>  /src/Kernel.php </p><br><pre> <code class="php hljs">... <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Kernel</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseKernel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCacheDir</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;environment === <span class="hljs-string"><span class="hljs-string">'prod'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'/dev/shm/symfony-app/cache/'</span></span> . <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;environment; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getProjectDir() . <span class="hljs-string"><span class="hljs-string">'/var/cache/'</span></span> . <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;environment; } } } ...</code> </pre> <br><p>  Setiap komposisi buruh pelabuhan meluncurkan tiga kontainer utama: </p><br><ul><li>  Nginx - membalikkan server proxy; </li><li>  Kode aplikasi aplikasi yang disiapkan dengan semua dependensi; </li><li>  PHP FPM \ Nginx Unit \ Road Runner \ React PHP - server aplikasi. </li></ul><br><p>  Pemrosesan permintaan terbatas pada dua instance aplikasi (berdasarkan jumlah inti prosesor). </p><br><h2 id="servisy">  Layanan </h2><br><h3 id="php-fpmhttpphpnetmanualruinstallfpmphp">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PHP FPM</a> </h3><br><p>  Manajer proses PHP.  Ditulis dalam C. </p><br><p>  Pro: </p><br><ul><li>  tidak perlu melacak memori; </li><li>  tidak perlu mengubah apa pun dalam aplikasi. </li></ul><br><p>  Cons: </p><br><ul><li>  PHP harus menginisialisasi variabel untuk setiap permintaan. </li></ul><br><p>  Perintah untuk meluncurkan aplikasi dengan komposisi buruh pelabuhan: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> docker/php-fpm &amp;&amp; docker-compose up -d</code> </pre> <br><h3 id="php-ppmhttpsgithubcomphp-pmphp-pm">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PHP PPM</a> </h3><br><p>  Manajer proses PHP.  Itu ditulis dalam PHP. </p><br><p>  Pro: </p><br><ul><li>  menginisialisasi variabel sekali dan kemudian menggunakannya; </li><li>  tidak perlu mengubah apa pun dalam aplikasi (ada modul yang siap pakai untuk Symfony / Laravel, Zend, CakePHP). </li></ul><br><p>  Cons: </p><br><ul><li>  harus mengikuti memori. </li></ul><br><p>  Perintah untuk meluncurkan aplikasi dengan komposisi buruh pelabuhan: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> docker/php-ppm &amp;&amp; docker-compose up -d</code> </pre> <br><h3 id="nginx-unithttpsunitnginxorg">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Unit nginx</a> </h3><br><p>  Server Aplikasi dari Tim Nginx.  Ditulis dalam C. </p><br><p>  Pro: </p><br><ul><li>  Anda dapat mengubah konfigurasi menggunakan API HTTP; </li><li>  Anda dapat menjalankan banyak instance dari satu aplikasi secara bersamaan dengan berbagai konfigurasi dan versi bahasa; </li><li>  tidak perlu melacak memori; </li><li>  tidak perlu mengubah apa pun dalam aplikasi. </li></ul><br><p>  Cons: </p><br><ul><li>  PHP harus menginisialisasi variabel untuk setiap permintaan. </li></ul><br><p>  Untuk meneruskan variabel lingkungan dari file konfigurasi unit nginx, Anda perlu memperbaiki php.ini: </p><br><pre> <code class="plaintext hljs">; Nginx Unit variables_order=E</code> </pre> <br><p>  Perintah untuk meluncurkan aplikasi dengan komposisi buruh pelabuhan: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> docker/nginx-unit &amp;&amp; docker-compose up -d</code> </pre> <br><h3 id="react-phphttpsreactphporg">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bereaksi PHP</a> </h3><br><p>  Perpustakaan untuk pemrograman acara.  Itu ditulis dalam PHP. </p><br><p>  Pro: </p><br><ul><li>  menggunakan perpustakaan, Anda dapat menulis server yang akan menginisialisasi variabel hanya sekali dan terus bekerja dengan mereka. </li></ul><br><p>  Cons: </p><br><ul><li>  Anda harus menulis kode untuk server; </li><li>  perlu melacak memori. </li></ul><br><p>  Jika Anda menggunakan <strong>flag --reboot-kernel-after-request</strong> untuk pekerja, maka Symfony Kernel akan diinisialisasi ulang untuk setiap permintaan.  Dengan pendekatan ini, Anda tidak perlu memonitor memori. </p><br><div class="spoiler">  <b class="spoiler_title">Kode Pekerja</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env php &lt;?php use App\Kernel; use Symfony\Component\Debug\Debug; use Symfony\Component\HttpFoundation\Request; require __DIR__ . '/../config/bootstrap.php'; $env = $_SERVER['APP_ENV'] ?? $_ENV['APP_ENV'] ?? 'dev'; $debug = (bool)($_SERVER['APP_DEBUG'] ?? $_ENV['APP_DEBUG'] ?? ('prod' !== $env)); if ($debug) { umask(0000); Debug::enable(); } if ($trustedProxies = $_SERVER['TRUSTED_PROXIES'] ?? $_ENV['TRUSTED_PROXIES'] ?? false) { Request::setTrustedProxies(explode(',', $trustedProxies), Request::HEADER_X_FORWARDED_ALL ^ Request::HEADER_X_FORWARDED_HOST); } if ($trustedHosts = $_SERVER['TRUSTED_HOSTS'] ?? $_ENV['TRUSTED_HOSTS'] ?? false) { Request::setTrustedHosts(explode(',', $trustedHosts)); } $loop = React\EventLoop\Factory::create(); $kernel = new Kernel($env, $debug); $kernel-&gt;boot(); $rebootKernelAfterRequest = in_array('--reboot-kernel-after-request', $argv); /** @var \Psr\Log\LoggerInterface $logger */ $logger = $kernel-&gt;getContainer()-&gt;get('logger'); $server = new React\Http\Server(function (Psr\Http\Message\ServerRequestInterface $request) use ($kernel, $logger, $rebootKernelAfterRequest) { $method = $request-&gt;getMethod(); $headers = $request-&gt;getHeaders(); $content = $request-&gt;getBody(); $post = []; if (in_array(strtoupper($method), ['POST', 'PUT', 'DELETE', 'PATCH']) &amp;&amp; isset($headers['Content-Type']) &amp;&amp; (0 === strpos($headers['Content-Type'], 'application/x-www-form-urlencoded')) ) { parse_str($content, $post); } $sfRequest = new Symfony\Component\HttpFoundation\Request( $request-&gt;getQueryParams(), $post, [], $request-&gt;getCookieParams(), $request-&gt;getUploadedFiles(), [], $content ); $sfRequest-&gt;setMethod($method); $sfRequest-&gt;headers-&gt;replace($headers); $sfRequest-&gt;server-&gt;set('REQUEST_URI', $request-&gt;getUri()); if (isset($headers['Host'])) { $sfRequest-&gt;server-&gt;set('SERVER_NAME', current($headers['Host'])); } try { $sfResponse = $kernel-&gt;handle($sfRequest); } catch (\Exception $e) { $logger-&gt;error('Internal server error', ['error' =&gt; $e-&gt;getMessage(), 'trace' =&gt; $e-&gt;getTraceAsString()]); $sfResponse = new \Symfony\Component\HttpFoundation\Response('Internal server error', 500); } catch (\Throwable $e) { $logger-&gt;error('Internal server error', ['error' =&gt; $e-&gt;getMessage(), 'trace' =&gt; $e-&gt;getTraceAsString()]); $sfResponse = new \Symfony\Component\HttpFoundation\Response('Internal server error', 500); } $kernel-&gt;terminate($sfRequest, $sfResponse); if ($rebootKernelAfterRequest) { $kernel-&gt;reboot(null); } return new React\Http\Response( $sfResponse-&gt;getStatusCode(), $sfResponse-&gt;headers-&gt;all(), $sfResponse-&gt;getContent() ); }); $server-&gt;on('error', function (\Exception $e) use ($logger) { $logger-&gt;error('Internal server error', ['error' =&gt; $e-&gt;getMessage(), 'trace' =&gt; $e-&gt;getTraceAsString()]); }); $socket = new React\Socket\Server('tcp://0.0.0.0:9000', $loop); $server-&gt;listen($socket); $logger-&gt;info('Server running', ['addr' =&gt; 'tcp://0.0.0.0:9000']); $loop-&gt;run();</span></span></code> </pre> </div></div><br><p>  Perintah untuk meluncurkan aplikasi dengan komposisi buruh pelabuhan: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> docker/react-php &amp;&amp; docker-compose up -d --scale php=2</code> </pre> <br><h3 id="road-runnerhttpsgithubcomspiralroadrunnerwikiabout-roadrunner">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pelari jalan</a> </h3><br><p>  Server web dan pengelola proses PHP.  Ditulis dalam Golang. </p><br><p>  Pro: </p><br><ul><li>  Anda dapat menulis pekerja yang akan menginisialisasi variabel hanya sekali dan terus bekerja dengan mereka. </li></ul><br><p>  Cons: </p><br><ul><li>  Anda harus menulis kode untuk pekerja; </li><li>  perlu melacak memori. </li></ul><br><p>  Jika Anda menggunakan <strong>flag --reboot-kernel-after-request</strong> untuk pekerja, maka Symfony Kernel akan diinisialisasi ulang untuk setiap permintaan.  Dengan pendekatan ini, Anda tidak perlu memonitor memori. </p><br><div class="spoiler">  <b class="spoiler_title">Kode Pekerja</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env php &lt;?php use App\Kernel; use Spiral\Goridge\SocketRelay; use Spiral\RoadRunner\PSR7Client; use Spiral\RoadRunner\Worker; use Symfony\Bridge\PsrHttpMessage\Factory\DiactorosFactory; use Symfony\Bridge\PsrHttpMessage\Factory\HttpFoundationFactory; use Symfony\Component\Debug\Debug; use Symfony\Component\HttpFoundation\Request; require __DIR__ . '/../config/bootstrap.php'; $env = $_SERVER['APP_ENV'] ?? $_ENV['APP_ENV'] ?? 'dev'; $debug = (bool)($_SERVER['APP_DEBUG'] ?? $_ENV['APP_DEBUG'] ?? ('prod' !== $env)); if ($debug) { umask(0000); Debug::enable(); } if ($trustedProxies = $_SERVER['TRUSTED_PROXIES'] ?? $_ENV['TRUSTED_PROXIES'] ?? false) { Request::setTrustedProxies(explode(',', $trustedProxies), Request::HEADER_X_FORWARDED_ALL ^ Request::HEADER_X_FORWARDED_HOST); } if ($trustedHosts = $_SERVER['TRUSTED_HOSTS'] ?? $_ENV['TRUSTED_HOSTS'] ?? false) { Request::setTrustedHosts(explode(',', $trustedHosts)); } $kernel = new Kernel($env, $debug); $kernel-&gt;boot(); $rebootKernelAfterRequest = in_array('--reboot-kernel-after-request', $argv); $relay = new SocketRelay('/tmp/road-runner.sock', null, SocketRelay::SOCK_UNIX); $psr7 = new PSR7Client(new Worker($relay)); $httpFoundationFactory = new HttpFoundationFactory(); $diactorosFactory = new DiactorosFactory(); while ($req = $psr7-&gt;acceptRequest()) { try { $request = $httpFoundationFactory-&gt;createRequest($req); $response = $kernel-&gt;handle($request); $psr7-&gt;respond($diactorosFactory-&gt;createResponse($response)); $kernel-&gt;terminate($request, $response); if($rebootKernelAfterRequest) { $kernel-&gt;reboot(null); } } catch (\Throwable $e) { $psr7-&gt;getWorker()-&gt;error((string)$e); } }</span></span></code> </pre> </div></div><br><p>  Perintah untuk meluncurkan aplikasi dengan komposisi buruh pelabuhan: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> docker/road-runner &amp;&amp; docker-compose up -d</code> </pre> <br><h2 id="testirovanie">  Pengujian </h2><br><p>  Pengujian dilakukan menggunakan Yandex Tank. <br>  Aplikasi dan Yandex Tank berada di server virtual yang berbeda. </p><br><p>  Fitur server virtual dengan aplikasi: <br>  <strong>Virtualisasi</strong> : KVM <br>  <strong>CPU</strong> : 2 core <br>  <strong>RAM</strong> : 4096 MB <br>  <strong>SSD</strong> : 50 GB <br>  <strong>Koneksi</strong> : 100MBit <br>  <strong>OS</strong> : CentOS 7 (64x) </p><br><p>  Layanan yang Diuji: </p><br><ul><li>  php-fpm </li><li>  php-ppm </li><li>  nginx-unit </li><li>  pelari jalan </li><li>  road-runner-reboot (dengan flag <strong>--reboot-kernel-after-request</strong> ) </li><li>  reaksi-php </li><li>  react-php-reboot (dengan flag <strong>--reboot-kernel-after-request</strong> ) </li></ul><br><p>  Untuk pengujian 1000/10000 rps ditambahkan layanan php-fpm-80 <br>  Konfigurasi php-fpm digunakan untuk itu: </p><br><pre> <code class="plaintext hljs">pm = dynamic pm.max_children = 80</code> </pre> <br><p>  Yandex Tank menentukan terlebih dahulu berapa kali perlu menembak target, dan tidak berhenti sampai kartrid habis.  Tergantung pada kecepatan respons layanan, waktu pengujian mungkin lebih lama daripada yang ditentukan dalam konfigurasi pengujian.  Karena itu, gambar dari berbagai layanan mungkin memiliki panjang yang berbeda.  Semakin lambat layanan merespons, semakin lama jadwalnya. </p><br><p>  Untuk setiap layanan dan konfigurasi Yandex Tank, hanya satu tes yang dilakukan.  Karena itu, angka mungkin tidak akurat.  Penting untuk mengevaluasi karakteristik layanan relatif satu sama lain. </p><br><h2 id="100-rps">  100 rps </h2><br><h3 id="konfiguraciya-phantom-yandex-tank">  Konfigurasi Tank Phantom Yandex </h3><br><pre> <code class="plaintext hljs">phantom: load_profile: load_type: rps schedule: line(1, 100, 60s) const(100, 540s)</code> </pre> <br><h3 id="ssylki-s-detalnym-otchetom">  Tautan Laporan Detail </h3><br><ul><li>  php-fpm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150666</a> </li><li>  php-ppm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150670</a> </li><li>  nginx-unit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150675</a> </li><li>  road-runner <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150681</a> </li><li>  road-runner-reboot <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/151961</a> </li><li>  react-php <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150697</a> </li><li>  react-php-reboot <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/152063</a> </li></ul><br><h3 id="percentili-vremeni-otveta">  Persentil waktu respons </h3><br><div class="scrollable-table"><table><thead><tr><th></th><th>  95% (ms) </th><th>  90% (ms) </th><th>  80% (ms) </th><th>  50% (ms) </th><th>  HTTP OK (%) </th><th>  HTTP OK (jumlah) </th></tr></thead><tbody><tr><td>  php-fpm </td><td>  9.9 </td><td>  6.3 </td><td>  4.35 </td><td>  3.59 </td><td>  100 </td><td>  57030 </td></tr><tr><td>  php-ppm </td><td>  9.4 </td><td>  6 </td><td>  3.88 </td><td>  3.16 </td><td>  100 </td><td>  57030 </td></tr><tr><td>  nginx-unit </td><td>  11 </td><td>  6.6 </td><td>  4.43 </td><td>  3.69 </td><td>  100 </td><td>  57030 </td></tr><tr><td>  pelari jalan </td><td>  8.1 </td><td>  5.1 </td><td>  3.53 </td><td>  2.92 </td><td>  100 </td><td>  57030 </td></tr><tr><td>  road-runner-reboot </td><td>  12 </td><td>  8.6 </td><td>  5.3 </td><td>  3.85 </td><td>  100 </td><td>  57030 </td></tr><tr><td>  reaksi-php </td><td>  8.5 </td><td>  4.91 </td><td>  3.29 </td><td>  2.74 </td><td>  100 </td><td>  57030 </td></tr><tr><td>  bereaksi-php-reboot </td><td>  13 </td><td>  8.5 </td><td>  5.5 </td><td>  3,95 </td><td>  100 </td><td>  57030 </td></tr></tbody></table></div><br><h3 id="monitoring">  Pemantauan </h3><br><div class="scrollable-table"><table><thead><tr><th></th><th>  median cpu (%) </th><th>  cpu max (%) </th><th>  memory median (MB) </th><th>  memory max (MB) </th></tr></thead><tbody><tr><td>  php-fpm </td><td>  9.15 </td><td>  12.58 </td><td>  880.32 </td><td>  907,97 </td></tr><tr><td>  php-ppm </td><td>  7.08 </td><td>  13.68 </td><td>  901.72 </td><td>  913.80 </td></tr><tr><td>  nginx-unit </td><td>  9.56 </td><td>  12.54 </td><td>  923.02 </td><td>  943.90 </td></tr><tr><td>  pelari jalan </td><td>  5.57 </td><td>  8.61 </td><td>  992,71 </td><td>  1,001.46 </td></tr><tr><td>  road-runner-reboot </td><td>  9.18 </td><td>  12.67 </td><td>  848.43 </td><td>  870.26 </td></tr><tr><td>  reaksi-php </td><td>  4.53 </td><td>  6.58 </td><td>  1,004.68 </td><td>  1,009.91 </td></tr><tr><td>  bereaksi-php-reboot </td><td>  9.61 </td><td>  12.67 </td><td>  885.92 </td><td>  892.52 </td></tr></tbody></table></div><br><h3 id="grafiki">  Grafik </h3><br><img src="https://habrastorage.org/webt/ok/9u/py/ok9upykku7x_gy7gal5dq1yfa2m.png"><br><p>  Bagan 1.1 Rata-rata waktu respons per detik </p><br><img src="https://habrastorage.org/webt/an/_b/z8/an_bz8p8tg8dmac-k9brr6lergc.png"><br><p>  Bagan 1.2 Rata-rata beban prosesor per detik </p><br><img src="https://habrastorage.org/webt/lx/61/xa/lx61xaarcbvpauk4gzkhfxjk9gm.png"><br><p>  Bagan 1.3 Konsumsi memori rata-rata per detik </p><br><h2 id="500-rps">  500 rps </h2><br><h3 id="konfiguraciya-phantom-yandex-tank-1">  Konfigurasi Tank Phantom Yandex </h3><br><pre> <code class="plaintext hljs">phantom: load_profile: load_type: rps schedule: line(1, 500, 60s) const(500, 540s)</code> </pre> <br><h3 id="ssylki-s-detalnym-otchetom-1">  Tautan Laporan Detail </h3><br><ul><li>  php-fpm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150705</a> </li><li>  php-ppm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150710</a> </li><li>  nginx-unit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150711</a> </li><li>  road-runner <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150715</a> </li><li>  road-runner-reboot <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/152011</a> </li><li>  react-php <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150717</a> </li><li>  react-php-reboot <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/152064</a> </li></ul><br><h3 id="percentili-vremeni-otveta-1">  Persentil waktu respons </h3><br><div class="scrollable-table"><table><thead><tr><th></th><th>  95% (ms) </th><th>  90% (ms) </th><th>  80% (ms) </th><th>  50% (ms) </th><th>  HTTP OK (%) </th><th>  HTTP OK (jumlah) </th></tr></thead><tbody><tr><td>  php-fpm </td><td>  13 </td><td>  8.4 </td><td>  5.3 </td><td>  3.69 </td><td>  100 </td><td>  285030 </td></tr><tr><td>  php-ppm </td><td>  15 </td><td>  9 </td><td>  4.72 </td><td>  3.24 </td><td>  100 </td><td>  285030 </td></tr><tr><td>  nginx-unit </td><td>  12 </td><td>  8 </td><td>  5.5 </td><td>  3.93 </td><td>  100 </td><td>  285030 </td></tr><tr><td>  pelari jalan </td><td>  9.6 </td><td>  6 </td><td>  3.71 </td><td>  2.83 </td><td>  100 </td><td>  285030 </td></tr><tr><td>  road-runner-reboot </td><td>  14 </td><td>  11 </td><td>  7.1 </td><td>  4.45 </td><td>  100 </td><td>  285030 </td></tr><tr><td>  reaksi-php </td><td>  9.3 </td><td>  5.8 </td><td>  3.57 </td><td>  2.68 </td><td>  100 </td><td>  285030 </td></tr><tr><td>  bereaksi-php-reboot </td><td>  15 </td><td>  12 </td><td>  7.2 </td><td>  4.21 </td><td>  100 </td><td>  285030 </td></tr></tbody></table></div><br><h3 id="monitoring-1">  Pemantauan </h3><br><div class="scrollable-table"><table><thead><tr><th></th><th>  median cpu (%) </th><th>  cpu max (%) </th><th>  memory median (MB) </th><th>  memory max (MB) </th></tr></thead><tbody><tr><td>  php-fpm </td><td>  41.68 </td><td>  48.33 </td><td>  1,006,06 </td><td>  1.015,09 </td></tr><tr><td>  php-ppm </td><td>  33,90 </td><td>  48.90 </td><td>  1,046.32 </td><td>  1,055.00 </td></tr><tr><td>  nginx-unit </td><td>  42.13 </td><td>  47.92 </td><td>  1,006.67 </td><td>  1,015.73 </td></tr><tr><td>  pelari jalan </td><td>  08/24 </td><td>  06/28 </td><td>  1,035.86 </td><td>  1,044.58 </td></tr><tr><td>  road-runner-reboot </td><td>  46.23 </td><td>  52.04 </td><td>  939.63 </td><td>  948.08 </td></tr><tr><td>  reaksi-php </td><td>  19.57 </td><td>  23.42 </td><td>  1,049.83 </td><td>  1,060.26 </td></tr><tr><td>  bereaksi-php-reboot </td><td>  41.30 </td><td>  47.89 </td><td>  957.01 </td><td>  958.56 </td></tr></tbody></table></div><br><h3 id="grafiki-1">  Grafik </h3><br><img src="https://habrastorage.org/webt/c-/_1/4t/c-_14taximv1ifxdlpalgybfyyq.png"><br><p>  Bagan 2.1 Rata-rata waktu respons per detik </p><br><img src="https://habrastorage.org/webt/g4/ql/9s/g4ql9sqqt3sf9tvtivr0pc1g0ne.png"><br><p>  Bagan 2.2 Rata-rata beban prosesor per detik </p><br><img src="https://habrastorage.org/webt/rd/b1/30/rdb1300ij_nmcntsalodw-j5pca.png"><br><p>  Bagan 2.3 Konsumsi memori rata-rata per detik </p><br><h2 id="1000-rps">  1000 rps </h2><br><h3 id="konfiguraciya-phantom-yandex-tank-2">  Konfigurasi Tank Phantom Yandex </h3><br><pre> <code class="plaintext hljs">phantom: load_profile: load_type: rps schedule: line(1, 1000, 60s) const(1000, 60s)</code> </pre> <br><h3 id="ssylki-s-detalnym-otchetom-2">  Tautan Laporan Detail </h3><br><ul><li>  php-fpm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150841</a> </li><li>  php-fpm-80 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/153612</a> </li><li>  php-ppm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150842</a> </li><li>  nginx-unit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150843</a> </li><li>  road-runner <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150844</a> </li><li>  road-runner-reboot <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/152068</a> </li><li>  react-php <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150846</a> </li><li>  react-php-reboot <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/152065</a> </li></ul><br><h3 id="percentili-vremeni-otveta-2">  Persentil waktu respons </h3><br><div class="scrollable-table"><table><thead><tr><th></th><th>  95% (ms) </th><th>  90% (ms) </th><th>  80% (ms) </th><th>  50% (ms) </th><th>  HTTP OK (%) </th><th>  HTTP OK (jumlah) </th></tr></thead><tbody><tr><td>  php-fpm </td><td>  11050 </td><td>  11050 </td><td>  9040 </td><td>  195 </td><td>  80.67 </td><td>  72627 </td></tr><tr><td>  php-fpm-80 </td><td>  3150 </td><td>  1375 </td><td>  1165 </td><td>  152 </td><td>  99.85 </td><td>  89895 </td></tr><tr><td>  php-ppm </td><td>  2785 </td><td>  2740 </td><td>  2685 </td><td>  2545 </td><td>  100 </td><td>  90030 </td></tr><tr><td>  nginx-unit </td><td>  98 </td><td>  80 </td><td>  60 </td><td>  21 </td><td>  100 </td><td>  90030 </td></tr><tr><td>  pelari jalan </td><td>  27 </td><td>  15 </td><td>  7.1 </td><td>  3.21 </td><td>  100 </td><td>  90030 </td></tr><tr><td>  road-runner-reboot </td><td>  1110 </td><td>  1100 </td><td>  1085 </td><td>  1060 </td><td>  100 </td><td>  90030 </td></tr><tr><td>  reaksi-php </td><td>  23 </td><td>  13 </td><td>  5.6 </td><td>  2.86 </td><td>  100 </td><td>  90030 </td></tr><tr><td>  bereaksi-php-reboot </td><td>  28 </td><td>  24 </td><td>  19 </td><td>  11 </td><td>  100 </td><td>  90030 </td></tr></tbody></table></div><br><h3 id="monitoring-2">  Pemantauan </h3><br><div class="scrollable-table"><table><thead><tr><th></th><th>  median cpu (%) </th><th>  cpu max (%) </th><th>  memory median (MB) </th><th>  memory max (MB) </th></tr></thead><tbody><tr><td>  php-fpm </td><td>  12.66 </td><td>  78.25 </td><td>  990.16 </td><td>  1,006.56 </td></tr><tr><td>  php-fpm-80 </td><td>  83,78 </td><td>  91.28 </td><td>  746,01 </td><td>  937.24 </td></tr><tr><td>  php-ppm </td><td>  66.16 </td><td>  91.20 </td><td>  1,088.74 </td><td>  1,102.92 </td></tr><tr><td>  nginx-unit </td><td>  78.11 </td><td>  88.77 </td><td>  1,010.15 </td><td>  1,062,01 </td></tr><tr><td>  pelari jalan </td><td>  42,93 </td><td>  54.23 </td><td>  1,010.89 </td><td>  1,068.48 </td></tr><tr><td>  road-runner-reboot </td><td>  77.64 </td><td>  85.66 </td><td>  976.44 </td><td>  1,044,05 </td></tr><tr><td>  reaksi-php </td><td>  36.39 </td><td>  46.31 </td><td>  1,018.03 </td><td>  1,088.23 </td></tr><tr><td>  bereaksi-php-reboot </td><td>  72.11 </td><td>  81.81 </td><td>  911.28 </td><td>  961.62 </td></tr></tbody></table></div><br><h3 id="grafiki-2">  Grafik </h3><br><img src="https://habrastorage.org/webt/dg/jj/aa/dgjjaai8hatos_bdzj7eb0adnqm.png"><br><p>  Bagan 3.1 Rata-rata waktu respons per detik </p><br><img src="https://habrastorage.org/webt/7x/2v/g4/7x2vg4kue4ufutvkuujkdqzn73y.png"><br><p>  Bagan 3.2 Rata-rata waktu respons per detik (tanpa php-fpm, php-ppm, road-runner-reboot) </p><br><img src="https://habrastorage.org/webt/nb/xv/ob/nbxvobvhcq07zhrcpbg_y6z_boc.png"><br><p>  Bagan 3.3 Rata-rata beban prosesor per detik </p><br><img src="https://habrastorage.org/webt/to/hm/bn/tohmbnpfhofpgl8wfqvyrw6pcog.png"><br><p>  Grafik 3.4 Konsumsi memori rata-rata per detik </p><br><h2 id="10000-rps">  10.000 rps </h2><br><h3 id="konfiguraciya-phantom-yandex-tank-3">  Konfigurasi Tank Phantom Yandex </h3><br><pre> <code class="plaintext hljs">phantom: load_profile: load_type: rps schedule: line(1, 10000, 30s) const(10000, 30s)</code> </pre> <br><h3 id="ssylki-s-detalnym-otchetom-3">  Tautan Laporan Detail </h3><br><ul><li>  php-fpm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150849</a> </li><li>  php-fpm-80 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/153615</a> </li><li>  php-ppm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150874</a> </li><li>  nginx-unit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150876</a> </li><li>  road-runner <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150881</a> </li><li>  road-runner-reboot <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/152069</a> </li><li>  react-php <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/150885</a> </li><li>  react-php-reboot <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://overload.yandex.net/152066</a> </li></ul><br><h3 id="percentili-vremeni-otveta-3">  Persentil waktu respons </h3><br><div class="scrollable-table"><table><thead><tr><th></th><th>  95% (ms) </th><th>  90% (ms) </th><th>  80% (ms) </th><th>  50% (ms) </th><th>  HTTP OK (%) </th><th>  HTTP OK (jumlah) </th></tr></thead><tbody><tr><td>  php-fpm </td><td>  11050 </td><td>  11050 </td><td>  11050 </td><td>  1880 </td><td>  70.466 </td><td>  317107 </td></tr><tr><td>  php-fpm-80 </td><td>  3260 </td><td>  3140 </td><td>  1360 </td><td>  1145 </td><td>  99.619 </td><td>  448301 </td></tr><tr><td>  php-ppm </td><td>  2755 </td><td>  2730 </td><td>  2695 </td><td>  2605 </td><td>  100 </td><td>  450015 </td></tr><tr><td>  nginx-unit </td><td>  1020 </td><td>  1010 </td><td>  1000 </td><td>  980 </td><td>  100 </td><td>  450015 </td></tr><tr><td>  pelari jalan </td><td>  640 </td><td>  630 </td><td>  615 </td><td>  580 </td><td>  100 </td><td>  450015 </td></tr><tr><td>  road-runner-reboot </td><td>  1130 </td><td>  1120 </td><td>  1110 </td><td>  1085 </td><td>  100 </td><td>  450015 </td></tr><tr><td>  reaksi-php </td><td>  1890 </td><td>  1090 </td><td>  1045 </td><td>  58 </td><td>  99,996 </td><td>  4.49996 </td></tr><tr><td>  bereaksi-php-reboot </td><td>  3480 </td><td>  3070 </td><td>  1255 </td><td>  91 </td><td>  99,72 </td><td>  448753 </td></tr></tbody></table></div><br><h3 id="monitoring-3">  Pemantauan </h3><br><div class="scrollable-table"><table><thead><tr><th></th><th>  median cpu (%) </th><th>  cpu max (%) </th><th>  memory median (MB) </th><th>  memory max (MB) </th></tr></thead><tbody><tr><td>  php-fpm </td><td>  5.57 </td><td>  79.35 </td><td>  984.47 </td><td>  998,78 </td></tr><tr><td>  php-fpm-80 </td><td>  85.05 </td><td>  92.19 </td><td>  936.64 </td><td>  943.93 </td></tr><tr><td>  php-ppm </td><td>  66.86 </td><td>  82.41 </td><td>  1,089.31 </td><td>  1,097.41 </td></tr><tr><td>  nginx-unit </td><td>  86.14 </td><td>  93.94 </td><td>  1,067.71 </td><td>  1,069.52 </td></tr><tr><td>  pelari jalan </td><td>  73.41 </td><td>  82,72 </td><td>  1,129.48 </td><td>  1,134.00 </td></tr><tr><td>  road-runner-reboot </td><td>  80.32 </td><td>  86.29 </td><td>  982.69 </td><td>  984.80 </td></tr><tr><td>  reaksi-php </td><td>  73.76 </td><td>  82.18 </td><td>  1,101.71 </td><td>  1,105,06 </td></tr><tr><td>  bereaksi-php-reboot </td><td>  85.77 </td><td>  91.92 </td><td>  975.85 </td><td>  978.42 </td></tr></tbody></table></div><br><img src="https://habrastorage.org/webt/xy/rs/s2/xyrss2tfxufvlvkf7gnw0_tcukw.png"><br><p>  Bagan 4.1 Rata-rata Waktu Respons per Detik </p><br><img src="https://habrastorage.org/webt/hk/je/sw/hkjeswjegk41myz-9e-jhh3y0_y.png"><br><p>  Bagan 4.2 Rata-rata waktu respons per detik (tanpa php-fpm, php-ppm) </p><br><img src="https://habrastorage.org/webt/cb/df/rx/cbdfrxtbgwtpkokjwbbgd2sjsxy.png"><br><p>  Bagan 4.3 Rata-rata beban prosesor per detik </p><br><img src="https://habrastorage.org/webt/qf/qj/as/qfqjasvxfvy97bykrwckqguzwx0.png"><br><p>  Bagan 4.4 Konsumsi memori rata-rata per detik </p><br><h2 id="itogi">  Ringkasan </h2><br><p>  Berikut adalah grafik yang menunjukkan perubahan dalam karakteristik layanan tergantung pada beban.  Saat melihat grafik, perlu dipertimbangkan bahwa tidak semua layanan menjawab 100% dari permintaan. </p><br><img src="https://habrastorage.org/webt/uh/pc/vd/uhpcvdx0nczsku53ojpjvrikccu.png"><br><p>  Bagan 5.1 95% persentil dari waktu respons </p><br><img src="https://habrastorage.org/webt/va/oc/_u/vaoc_uj-wlybxghwhu_snmr7jkq.png"><br><p>  Bagan 5.2 persen persentil dari waktu respons (tanpa php-fpm) </p><br><img src="https://habrastorage.org/webt/bw/gu/xc/bwguxcwuo3w4j4_blvrr1-qlcdk.png"><br><p>  Grafik 5.3 Beban CPU Maksimum </p><br><img src="https://habrastorage.org/webt/xh/r8/mx/xhr8mxqo3en9o-qv4zrbzayu1vs.png"><br><p>  Bagan 5.4 Konsumsi memori maksimum </p><br><p>  Solusi optimal (tanpa mengubah kode), menurut saya, adalah manajer proses Unit Nginx.  Ini menunjukkan hasil yang baik dalam kecepatan respons dan mendapat dukungan dari perusahaan. </p><br><p>  Dalam kasus apa pun, pendekatan pengembangan dan alat-alat perlu dipilih secara terpisah, tergantung pada beban kerja Anda, sumber daya server dan kemampuan pengembang. </p><br><p>  <strong>UPD</strong> <br>  Untuk pengujian 1000/10000 rps ditambahkan layanan php-fpm-80 <br>  Konfigurasi php-fpm digunakan untuk itu: </p><br><pre> <code class="plaintext hljs">pm = dynamic pm.max_children = 80</code> </pre> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id431818/">https://habr.com/ru/post/id431818/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id431804/index.html">Cara bekerja dengan pengecualian di DDD</a></li>
<li><a href="../id431806/index.html">Palm Phone diuji: vonis - pengembang gagal total</a></li>
<li><a href="../id431810/index.html">Jalankan tes menggunakan accelerometer triaksial</a></li>
<li><a href="../id431814/index.html">Menggunakan pengenalan karakter optik di DeviceLock DLP untuk mencegah kebocoran dokumen</a></li>
<li><a href="../id431816/index.html">3 Desember SpaceX akan mencoba meluncurkan tahap pertama kendaraan peluncuran untuk ketiga kalinya</a></li>
<li><a href="../id431820/index.html">Mulai ke ISS dan pengereman di asteroid</a></li>
<li><a href="../id431822/index.html">Sumber tertutup de facto: argumen untuk perangkat lunak yang jelas</a></li>
<li><a href="../id431824/index.html">Informasi tentang smartphone dari Yandex secara tidak sengaja dibuka di situs web M.Video beberapa hari sebelum presentasi</a></li>
<li><a href="../id431826/index.html">Mulai dengan Bereaksi dan Bootstrap dalam 2 hari. Hari nomor 1</a></li>
<li><a href="../id431828/index.html">Acara digital di Moskow dari 3 hingga 9 Desember</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>