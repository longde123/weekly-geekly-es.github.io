<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüé® üò∑ üëµüèª Notas do provedor de IoT. Tecnologia e economia LoRaWAN em ilumina√ß√£o urbana üç≠ üìô üêÑ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Na √∫ltima s√©rie ... 

 H√° cerca de um ano, escrevi sobre o gerenciamento da ilumina√ß√£o urbana em uma de nossas cidades. Tudo era muito simples l√°: de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Notas do provedor de IoT. Tecnologia e economia LoRaWAN em ilumina√ß√£o urbana</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483790/">  <b>Na √∫ltima s√©rie ...</b> <br><br>  H√° cerca de um ano, <a href="https://habr.com/ru/post/434266/">escrevi</a> sobre o gerenciamento da ilumina√ß√£o urbana em uma de nossas cidades.  Tudo era muito simples l√°: de acordo com o cronograma, a energia das l√¢mpadas era ligada e desligada atrav√©s do SHUNO (gabinete de controle para ilumina√ß√£o externa).  Havia um revezamento no SHUNO, ao comando do qual uma cadeia de luzes estava ligada.  Do interessante, talvez, apenas que foi feito atrav√©s do LoRaWAN. <br><br>  Como voc√™ se lembra, inicialmente fomos criados nos m√≥dulos SI-12 (Fig. 1) da Vega.  Mesmo no est√°gio piloto, tivemos problemas imediatamente. <br><br><img src="https://habrastorage.org/webt/di/d7/so/did7soqe2e7vu1w2rge21geog34.png"><br>  <i>Figura 1. - M√≥dulo SI-12</i> <br><a name="habracut"></a><br><ol><li>  Depend√≠amos da rede LoRaWAN.  Interfer√™ncia s√©ria no travamento do ar ou do servidor e temos problemas com a ilumina√ß√£o da cidade.  Improv√°vel, mas poss√≠vel. </li><li>  O SI-12 possui apenas uma entrada de pulso.  Voc√™ pode conectar um medidor el√©trico a ele e ler as leituras atuais dele.  Por√©m, por um curto per√≠odo de tempo (5 a 10 minutos), √© imposs√≠vel rastrear o salto no consumo que ocorre ap√≥s acender as luzes.  Abaixo vou explicar por que isso √© importante. </li><li>  O problema √© mais s√©rio.  M√≥dulos SI-12 pendurados de forma est√°vel.  Cerca de uma vez a cada 20 execu√ß√µes.  Em conjunto com a Vega, tentamos eliminar a causa.  Durante o piloto, dois novos m√≥dulos de firmware e uma nova vers√£o do servidor foram lan√ßados, onde eles corrigiram v√°rios problemas s√©rios.  No final, os m√≥dulos pararam de pendurar.  E ainda assim nos afastamos deles. </li></ol><br>  E agora ... <br><br>  No momento, constru√≠mos um projeto muito mais avan√ßado. <br><br>  √â baseado nos m√≥dulos IS-Industry (Fig. 2).  O ferro foi desenvolvido pelo nosso fornecedor, eles mesmos escreveram o firmware.  Este √© um m√≥dulo muito inteligente.  Dependendo do firmware carregado, ele pode controlar a ilumina√ß√£o ou interrogar os dispositivos de medi√ß√£o com um grande conjunto de par√¢metros.  Por exemplo, medidores de calor ou medidores de eletricidade trif√°sicos. <br>  Algumas palavras sobre o que √© implementado. <br><br><img src="https://habrastorage.org/webt/_u/x8/cg/_ux8cggabg-ymfw8fcvjyogj2om.png"><br>  <i>Figura 2. - M√≥dulo IS-Industry</i> <br><br>  1. A partir de agora, o IS-Industry tem sua pr√≥pria mem√≥ria.  Com o firmware for light, as chamadas estrat√©gias s√£o carregadas remotamente nessa mem√≥ria.  De fato, esse √© um cronograma para ativar / desativar o SHUNO por um determinado per√≠odo.  N√£o dependemos mais do canal de r√°dio ao lig√°-lo e deslig√°-lo.  Dentro do m√≥dulo, h√° um cronograma segundo o qual ele funciona, independentemente de qualquer coisa.  Cada pr√°tica √© necessariamente acompanhada de um comando para o servidor.  O servidor deve saber que nosso estado mudou. <br><br>  2. O mesmo m√≥dulo pode interrogar o medidor el√©trico no SHUNO.  A cada hora, pacotes v√™m dele com consumo e um monte de par√¢metros que o medidor pode produzir. <br>  Mas esse n√£o √© o ponto.  Dois minutos ap√≥s a mudan√ßa de estado, um comando extraordin√°rio √© enviado com leituras instant√¢neas do contador.  A partir deles, podemos julgar que a luz realmente se acende ou se apaga.  Ou algo deu errado.  Existem dois indicadores na interface.  O comutador mostra o status atual do m√≥dulo.  A l√¢mpada est√° ligada √† aus√™ncia ou presen√ßa de consumo.  Se esses estados se contradizem (o m√≥dulo est√° desligado, mas o consumo est√° ativado e vice-versa), a linha com o SHUNO √© destacada em vermelho e um alarme √© gerado (Fig. 3).  No outono, esse sistema nos ajudou a encontrar um rel√© de partida emperrado.  De fato, o problema n√£o √© nosso, nosso m√≥dulo funcionou corretamente.  Mas trabalhamos no interesse do cliente.  Portanto, eles devem mostrar a ele quaisquer acidentes devido aos quais possa haver problemas com a ilumina√ß√£o. <br><br><img src="https://habrastorage.org/webt/wr/6m/et/wr6met37vmkagjtz85ttaakgf7w.png"><br>  <i>Figura 3. - O consumo contradiz o estado do rel√©.</i>  <i>Portanto, a linha √© destacada em vermelho</i> <br><br>  De acordo com as leituras hor√°rias, os gr√°ficos s√£o constru√≠dos. <br><br>  A l√≥gica √© a mesma da √∫ltima vez.  Monitoramos o fato de incluir um aumento no consumo de eletricidade.  Acompanhe o consumo m√©dio.  O consumo abaixo da mediana - parte das l√¢mpadas queimadas acima - roubam eletricidade de um pilar. <br><br>  3. Pacotes regulares com informa√ß√µes sobre consumo e que o m√≥dulo est√° em ordem.  Eles v√™m em momentos diferentes e n√£o criam uma queda pelo ar. <br><br>  4. Como antes, podemos ativar ou desativar o SHUNO a qualquer momento.  √â necess√°rio, por exemplo, procurar uma lanterna queimada em uma corrente por uma brigada de emerg√™ncia. <br><br>  Essas melhorias √†s vezes aumentam a toler√¢ncia a falhas. <br>  Este modelo de gest√£o √© agora talvez o mais exigido na R√∫ssia. <br><br>  E tamb√©m ... <br><br>  Fomos mais longe. <br><br>  O fato √© que geralmente voc√™ pode se afastar do ShUNO no sentido cl√°ssico e controlar cada l√¢mpada individualmente. <br><br>  Para fazer isso, √© necess√°rio que a lanterna suporte o protocolo de escurecimento (0-10, DALI ou algum outro) e tenha um soquete Nemo. <br><br>  O soquete Nemo √© um conector padr√£o de 7 pinos (na Figura 4), que √© frequentemente usado em ilumina√ß√£o p√∫blica.  A partir da lanterna, os contatos de energia e de interface s√£o enviados para este conector. <br><br><img src="https://habrastorage.org/webt/lf/yk/rx/lfykrxgs2s31avpkqrd3p1adxgq.jpeg"><br>  <i>Figura 4. - Nemo-soquete</i> <br><br>  0-10 √© um protocolo de controle de ilumina√ß√£o bem conhecido.  J√° n√£o √© jovem, mas est√° bem estabelecido.  Gra√ßas aos comandos deste protocolo, podemos n√£o apenas ligar ou desligar a l√¢mpada, mas tamb√©m coloc√°-la no modo de escurecimento.  Simplificando, diminua a luz sem deslig√°-la completamente.  Podemos silenciar um determinado valor em porcentagem.  30 ou 70 ou 43. <br><br>  Funciona assim.  No topo do soquete Nemo, nosso m√≥dulo de controle est√° instalado.  Este m√≥dulo suporta o protocolo 0-10.  As equipes passam pelo LoRaWAN atrav√©s do canal de r√°dio (Fig. 5). <br><br><img src="https://habrastorage.org/webt/ys/il/vp/ysilvp3v7oo3agaazzg4uvkw_q8.jpeg"><br>  <i>Figura 5. - Lanterna com um m√≥dulo de controle</i> <br><br>  O que esse m√≥dulo pode fazer? <br><br>  Ele sabe como ligar e desligar a l√¢mpada, diminuindo-a em uma certa quantidade.  E ele sabe acompanhar o consumo da l√¢mpada.  No caso de escurecimento, √© observada uma queda no consumo atual. <br><br>  Agora estamos rastreando n√£o apenas uma cadeia de lanternas, gerenciamos e rastreamos TODAS as lanternas.  E, √© claro, para cada uma das l√¢mpadas, podemos obter um certo erro. <br><br>  Al√©m disso, voc√™ pode complicar significativamente a l√≥gica das estrat√©gias. <br><br>  Por exemplo.  Informamos √† l√¢mpada n√∫mero 5 que ela deve acender √†s 18-00, √†s 3-00 diminu√≠da de 50% a 4-50, depois ligar novamente cem% e desligar √†s 9-20.  Tudo isso √© facilmente configurado em nossa interface e √© formado em uma estrat√©gia de trabalho compreens√≠vel para a l√¢mpada.  Essa estrat√©gia √© derramada na l√¢mpada e funciona at√© que outras equipes cheguem. <br><br>  Como no caso do m√≥dulo para SHUNO, n√£o temos problemas com a perda de comunica√ß√µes por r√°dio.  Mesmo que algo cr√≠tico aconte√ßa com ela, a ilumina√ß√£o continuar√° funcionando.  Al√©m disso, n√£o h√° queda no ar no momento em que voc√™ precisa acender, digamos, cem l√¢mpadas.  Podemos contorn√°-los com seguran√ßa, revezando-se, fazendo leituras e ajustando estrat√©gias.  Al√©m disso, com uma certa periodicidade, s√£o configurados pacotes de sinal para que o dispositivo esteja ativo e pronto para se comunicar. <br>  O manuseio n√£o programado ocorrer√° apenas em caso de acidente.  Felizmente, neste caso, temos tanto luxo como comida constante e podemos pagar a classe C. <br><br>  Uma quest√£o importante que levantarei novamente.  Toda vez que apresentamos nosso sistema, eles me perguntam - que tal um retransmissor de foto?  A fotoc√©lula pode ser parafusada l√°? <br><br>  Puramente tecnicamente - n√£o h√° problemas.  Mas todos os clientes com quem conversamos agora se recusam categoricamente a receber informa√ß√µes dos fotossensores.  Pe√ßa para operar apenas com o cronograma e as f√≥rmulas astron√¥micas.  Ainda assim, a ilumina√ß√£o da cidade √© cr√≠tica e importante. <br><br>  E agora a coisa mais importante.  A economia <br><br>  Trabalhar com SHUNO atrav√©s de um m√≥dulo de r√°dio tem vantagens claras, custo relativamente baixo.  Aumenta o controle sobre as lumin√°rias e simplifica a manuten√ß√£o.  Tudo est√° claro aqui e os benef√≠cios econ√¥micos s√£o √≥bvios. <br><br>  Mas com o controle de cada l√¢mpada, tudo fica mais complicado. <br><br>  Existem v√°rios projetos implementados semelhantes na R√∫ssia.  Seus integradores relatam orgulhosamente que, devido ao escurecimento, eles conseguiram economizar energia e, assim, recuperar o projeto. <br><br>  Nossa experi√™ncia mostra que nem tudo √© t√£o simples. <br><br>  A seguir, mostro uma tabela com o c√°lculo do retorno do escurecimento em rublos por ano e em meses para uma l√¢mpada (Fig. 6). <br><br><img src="https://habrastorage.org/webt/-9/y_/qi/-9y_qibht62iebiwwgt9ibdiwei.png"><br>  <i>Figura 6. - C√°lculo de economia com escurecimento</i> <br><br>  Ele mostra quantas horas por dia a ilumina√ß√£o est√° acesa, com m√©dia de meses.  Acreditamos que cerca de 30% desse tempo, a l√¢mpada brilha em 50% da energia e outros 30% em 30% da energia.  O resto est√° na pot√™ncia m√°xima.  Arredondado para d√©cimos. <br>  Por simplicidade, acredito que no modo de 50% de energia, a l√¢mpada consome metade do que consome 100%.  Isso tamb√©m est√° um pouco errado, porque h√° um consumo do driver, que √© constante.  I.e.  as economias reais sair√£o menos do que na tabela.  Mas, para simplificar a percep√ß√£o, que seja assim. <br><br>  Tomaremos o pre√ßo por quilowatt de eletricidade em 5 rublos, o pre√ßo m√©dio para pessoas jur√≠dicas. <br><br>  Total, por um ano em uma l√¢mpada, √© realmente poss√≠vel economizar de 313 rublos a 1409 rublos.  Como voc√™ pode ver, em dispositivos de baixa pot√™ncia, o benef√≠cio √© muito pequeno, com iluminadores poderosos mais interessantes. <br><br>  E os custos? <br><br>  O aumento no pre√ßo de cada l√¢mpada, ao adicionar o m√≥dulo LoRaWAN, √© de cerca de 5500 rublos.  L√°, o m√≥dulo em si √© de cerca de 3.000, mais o custo do Nemo-Socket na l√¢mpada, outros 1.500 rublos, al√©m de trabalhos de instala√ß√£o e configura√ß√£o.  Ainda n√£o levo em conta que, para essas l√¢mpadas, √© necess√°rio pagar uma taxa mensal ao propriet√°rio da rede. <br><br>  Acontece que o retorno do sistema √© na melhor das hip√≥teses (com a l√¢mpada mais poderosa) um pouco menos de quatro anos.  Retorno.  Muito tempo. <br><br>  Mas, mesmo neste caso, tudo ser√° anulado pela taxa mensal.  E sem ele, o custo ainda ter√° que manter a rede LoRaWAN, que tamb√©m n√£o √© barata. <br><br>  Ainda h√° uma pequena economia no trabalho das equipes de emerg√™ncia, que agora planejam trabalhar de maneira muito mais otimizada.  Mas ela n√£o vai salvar. <br><br>  Acontece, tudo em v√£o? <br><br>  N√£o.  De fato, a resposta correta aqui √© essa. <br><br>  Gerenciar cada lanterna faz parte de uma cidade inteligente.  A parte que n√£o √© salva diretamente e pela qual voc√™ precisa pagar um pouco mais.  Mas, em troca, temos uma coisa importante.  Nesta arquitetura, temos um alimento garantido constante em cada pilar o tempo todo.  N√£o apenas √† noite. <br><br>  Quase todos os fornecedores enfrentaram um problema.  Precisamos fazer wi-fi na pra√ßa principal.  Ou videovigil√¢ncia no parque.  A administra√ß√£o d√° o aval e fornece suporte.  Mas o problema √© - os postes de ilumina√ß√£o e a eletricidade s√≥ existem √† noite.  Temos que ser s√°bios, puxar energia extra ao longo dos suportes, colocar baterias e outras coisas estranhas. <br><br>  No caso de controlar cada l√¢mpada, podemos pendurar calmamente outra coisa em um poste com uma l√¢mpada e torn√°-la "inteligente". <br><br>  E aqui novamente a quest√£o da economia e aplicabilidade.  Em algum lugar nos arredores da cidade, SHUNO √© suficiente para os olhos.  No centro, faz sentido criar algo mais complexo e gerenci√°vel. <br><br>  O principal √© que nesses c√°lculos n√∫meros reais devem ser indicados, e n√£o sonhos com a Internet das Coisas. <br><br>  <b>PS</b> Neste ano, consegui conversar com muitos engenheiros envolvidos no campo da ilumina√ß√£o.  E alguns argumentaram para mim que ainda h√° uma economia no gerenciamento de cada l√¢mpada.  Estou aberto √† discuss√£o, meus c√°lculos s√£o dados.  Se voc√™ puder provar o contr√°rio, escreverei sobre isso. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt483790/">https://habr.com/ru/post/pt483790/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt483778/index.html">Semana 03 de seguran√ßa: princ√≠pios respons√°veis ‚Äã‚Äãde relat√≥rios de erros</a></li>
<li><a href="../pt483780/index.html">O que √© o Slack e como ele funciona?</a></li>
<li><a href="../pt483784/index.html">Como criar um aplicativo multilocat√°rio de um aplicativo n√£o-inquilino</a></li>
<li><a href="../pt483786/index.html">Classifica√ß√£o h√≠brida</a></li>
<li><a href="../pt483788/index.html">Pequena na√ß√£o insular ganha gra√ßas ao Twitch</a></li>
<li><a href="../pt483794/index.html">Partindo: por que voc√™ n√£o deve tomar kontroffer</a></li>
<li><a href="../pt483796/index.html">Par√¢metros opcionais nos reposit√≥rios de dados do Spring</a></li>
<li><a href="../pt483798/index.html">Como automatizar a composi√ß√£o de an√∫ncios no Google Ads</a></li>
<li><a href="../pt483800/index.html">N√£o durma! Como aprendemos a liberar 12.000 ofertas de ingressos por noite</a></li>
<li><a href="../pt483802/index.html">Como lan√ßar um produto sozinho, se voc√™ √© um desenvolvedor: Dicas do criador do Laravel, Taylor Otvel. Parte 1: P√∫blico</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>