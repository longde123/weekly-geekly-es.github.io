<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§õ üç∑ ü§≥üèæ Coroutines :: experiencia pr√°ctica ‚ùÑÔ∏è ü§î üôÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En este art√≠culo hablar√© sobre c√≥mo funcionan las corutinas y c√≥mo crearlas. Considere la aplicaci√≥n en ejecuci√≥n secuencial y paralela. Hablemos sobr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Coroutines :: experiencia pr√°ctica</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/e-Legion/blog/442920/"> En este art√≠culo hablar√© sobre c√≥mo funcionan las corutinas y c√≥mo crearlas.  Considere la aplicaci√≥n en ejecuci√≥n secuencial y paralela.  Hablemos sobre el manejo de errores, la depuraci√≥n y las formas de probar la rutina.  Al final, resumir√© y hablar√© sobre las impresiones que quedaron despu√©s de aplicar este enfoque. <br><br>  El art√≠culo fue preparado en base a los materiales de mi informe sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MBLT DEV 2018</a> , al final de la publicaci√≥n, un enlace al video. <br><br><h2>  Estilo consistente </h2><br><img src="https://habrastorage.org/webt/ke/8z/tu/ke8ztulkufchujj6k5pxutqtigw.png"><a name="habracut"></a><br>  <i>Fig.</i>  <i>2.1</i> <br><br>  ¬øCu√°l fue el prop√≥sito de los desarrolladores de Corutin?  Quer√≠an que la programaci√≥n asincr√≥nica fuera lo m√°s simple posible.  No hay nada m√°s f√°cil que ejecutar el c√≥digo "l√≠nea por l√≠nea" utilizando las construcciones sint√°cticas del lenguaje: try-catch-finally, bucles, sentencias condicionales, etc. <br><br>  Consideremos dos funciones.  Cada uno se ejecuta en su propio hilo (Fig. 2.1).  El primero se ejecuta en el subproceso <b>B</b> y devuelve algunos datos de resultados <b>B</b> , luego debemos pasar este resultado a la segunda funci√≥n, que toma los datos <b>B</b> como argumento y ya se est√° ejecutando en el subproceso <b>A.</b>  Con la rutina, podemos escribir nuestro c√≥digo como se muestra en la fig.  2.1.  Considere c√≥mo lograr esto. <br><br>  Funciones <b>longOpOnB, longOpOnA</b> : las llamadas funciones de <i>suspensi√≥n</i> , antes de las cuales se libera el subproceso y, una vez completado su trabajo, vuelve a estar ocupado. <br><br>  Para que estas dos funciones se realicen en un subproceso diferente en relaci√≥n con el llamado, manteniendo un estilo de c√≥digo de escritura "coherente", debemos sumergirlas en el contexto de la rutina. <br><br>  Esto se hace mediante la creaci√≥n de corutinas utilizando el llamado Coroutine Builder.  En la figura, este es el <i>lanzamiento</i> , pero hay otros, por ejemplo, <i>async</i> , <i>runBlocking</i> .  Hablar√© de ellos m√°s tarde. <br><br>  El √∫ltimo argumento es un bloque de c√≥digo ejecutado en el contexto de la rutina: llamar a las funciones de suspensi√≥n, lo que significa que todo el comportamiento anterior solo es posible en el contexto de la rutina o en otra funci√≥n de suspensi√≥n. <br><br>  Hay otros par√°metros en el m√©todo Coroutine Builder, por ejemplo, el tipo de lanzamiento, el hilo en el que se ejecutar√° el bloque y otros. <br><br><h2>  Gesti√≥n del ciclo de vida </h2><br>  Coroutine Builder nos da el valor de retorno como un valor de retorno, una subclase de la clase <i>Job</i> (Fig.2.2).  Con √©l, podemos gestionar el ciclo de vida de la corutina. <br><br>  Comience con el m√©todo <i>start ()</i> , cancele con el m√©todo <i>cancel ()</i> , espere a que se complete el trabajo utilizando el m√©todo <i>join (</i> ), suscr√≠base al evento de finalizaci√≥n del trabajo y m√°s. <br><br><img src="https://habrastorage.org/webt/os/bf/9j/osbf9jvwmvqtlidv_ugwrfbk-yc.png"><br>  <i>Fig.</i>  <i>2.2 2.2</i> <br><br><h2>  Cambio de flujo </h2><br>  Puede cambiar el flujo de ejecuci√≥n de la rutina cambiando el elemento de contexto de la rutina que es responsable de la programaci√≥n.  (Fig. 2.3) <br><br>  Por ejemplo, corutin 1 se ejecutar√° en un subproceso de <i>interfaz de usuario</i> , mientras que corutin 2 en un subproceso tomado del grupo <i>Dispatchers.IO</i> . <br><br><img src="https://habrastorage.org/webt/oe/9e/o1/oe9eo1ynqwdskvi-laxuunj-xkk.png"><br>  <i>Fig.2.3</i> <br><br>  La biblioteca de corutina tambi√©n proporciona una funci√≥n de suspensi√≥n <i>conContext (CoroutineContext)</i> , con la que puede cambiar entre hilos en el contexto de una corutina.  Por lo tanto, saltar entre hilos puede ser bastante simple: <br><br><img src="https://habrastorage.org/webt/ga/ca/im/gacaimxsxh_bjcxjweywrc8kstw.png"><br>  <i>Fig.</i>  <i>2.4.</i> <br><br>  Comenzamos nuestra rutina en el hilo 1 de la IU ‚Üí muestra el indicador de carga ‚Üí cambiamos al hilo 2 de trabajo, liberando el hilo principal ‚Üí realizamos una operaci√≥n larga all√≠ que no se puede realizar en el hilo UI ‚Üí regresamos el resultado al hilo 3 de la IU ‚Üí y ya trabajamos all√≠ con √©l, renderizando los datos recibidos y ocultando el indicador de carga. <br><br>  Parece bastante c√≥modo hasta ahora, sigue adelante. <br><br><h2>  Funci√≥n de suspensi√≥n </h2><br>  Considere el trabajo de corutina en el ejemplo del caso m√°s com√∫n: trabajar con solicitudes de red utilizando la biblioteca Retrofit 2. <br><br>  Lo primero que debemos hacer es convertir la <b>llamada de devoluci√≥n de</b> llamada en una funci√≥n de <i>suspensi√≥n</i> para aprovechar la funci√≥n de rutina: <br><br><img src="https://habrastorage.org/webt/hs/kk/ue/hskkuekq2frbocs_hd-oxsz8k7o.png"><br>  <i>Fig.</i>  <i>2.5</i> <br><br>  Para controlar el estado de la rutina, la biblioteca proporciona funciones de la forma <i>suspendXXXXCoroutine</i> , que proporciona un argumento que implementa la interfaz <i>Continuaci√≥n</i> , utilizando los m√©todos <i>resumeWithException</i> y <i>resume</i> de los cuales podemos reanudar la rutina en caso de error y √©xito, respectivamente. <br><br>  A continuaci√≥n, descubriremos qu√© sucede cuando se llama al m√©todo resumeWithException y, primero, nos aseguramos de que de alguna manera debemos cancelar la llamada de solicitud de red. <br><br><h2>  Funci√≥n de suspensi√≥n.  Cancelaci√≥n de la llamada </h2><br>  Para cancelar la llamada y otras acciones relacionadas con la liberaci√≥n de recursos no utilizados, al implementar la funci√≥n de suspensi√≥n, puede usar el m√©todo <i>suspendCancellableCoroutine</i> que <i>sale</i> de la caja (Fig. 2.6).  Aqu√≠, el argumento de bloque ya implementa la interfaz <i>CancellableContinuation</i> , uno de los m√©todos adicionales de los cuales, <i>invokeOnCancellation</i> , le permite registrarse para un error o un evento de cancelaci√≥n de rutina exitoso.  Por lo tanto, aqu√≠ tambi√©n es necesario cancelar la llamada al m√©todo. <br><br><img src="https://habrastorage.org/webt/59/ut/hw/59uthwhyrpuk2-hzm6c2rax0vzk.png"><br>  <i>Fig.</i>  <i>2.6</i> <br><br><h3>  Mostrar cambios en la interfaz de usuario </h3><br>  Ahora que la funci√≥n de suspensi√≥n se ha preparado para las solicitudes de red, puede utilizar su llamada en la secuencia Coroutine UI como secuencial, mientras que durante la ejecuci√≥n de la solicitud la secuencia estar√° libre, y la secuencia de modificaci√≥n se utilizar√° para la solicitud. <br><br>  Por lo tanto, implementamos el comportamiento as√≠ncrono con respecto a la secuencia de interfaz de usuario, pero lo escribimos en un estilo consistente (Fig. 2.6). <br><br>  Si despu√©s de recibir la respuesta necesita hacer el trabajo duro, por ejemplo, escribir los datos recibidos en la base de datos, esta funci√≥n, como ya se ha mostrado, se puede realizar f√°cilmente usando <i>withContext</i> en el conjunto de flujos de flujo de retorno y continuar la ejecuci√≥n en la interfaz de usuario sin una sola l√≠nea de c√≥digo. <br><br><img src="https://habrastorage.org/webt/ks/qk/g4/ksqkg48x7gjja00x6hii4cpc1uo.png"><br>  <i>Fig.</i>  <i>2.7</i> <br><br>  Desafortunadamente, esto no es todo lo que necesitamos para el desarrollo de aplicaciones.  Considere el manejo de errores. <br><br><h3>  Manejo de errores: try-catch-finally.  Cancelar la rutina: cancelaci√≥nExcepci√≥n </h3><br>  Una excepci√≥n que no se detect√≥ dentro de la rutina se considera no controlada y puede provocar el bloqueo de la aplicaci√≥n.  Adem√°s de las situaciones normales, se genera una excepci√≥n al reanudar la rutina utilizando el m√©todo <i>resumeWithException</i> en la l√≠nea correspondiente de la llamada a la funci√≥n de suspensi√≥n.  En este caso, la excepci√≥n aprobada como argumento se arroja sin cambios.  (Fig. 2.8) <br><br><img src="https://habrastorage.org/webt/hm/sv/f0/hmsvf0yzwobbhf3mlv_ce8xy2l8.png"><br>  <i>Fig.</i>  <i>2.8</i> <br><br>  Para el manejo de excepciones, est√° disponible la construcci√≥n est√°ndar del lenguaje try catch finally.  Ahora el c√≥digo que puede mostrar el error en la interfaz de usuario toma la siguiente forma: <br><br><img src="https://habrastorage.org/webt/ce/53/hp/ce53hpazfknfd3962fn0wvfv8x8.png"><br>  <i>Fig.</i>  <i>2.9</i> <br><br>  En el caso de cancelar la rutina, que se puede lograr llamando al m√©todo de cancelaci√≥n de Job #, <i>se</i> lanza una excepci√≥n de <i>cancelaci√≥n</i> .  Esta excepci√≥n se maneja de manera predeterminada y no genera fallas u otras consecuencias negativas. <br><br>  Sin embargo, cuando se utiliza la construcci√≥n <b>try / catch</b> , quedar√° atrapada en el <b>bloque catch</b> , y debe tenerlo en cuenta en los casos si desea manejar solo situaciones realmente "err√≥neas".  Por ejemplo, el manejo de errores en la interfaz de usuario cuando es posible "cancelar" las solicitudes o el registro de errores se proporciona.  En el primer caso, el error se mostrar√° al usuario, aunque en realidad no existe, y en el segundo, se registrar√° una excepci√≥n in√∫til y desordenar√° los informes. <br><br>  Para ignorar la situaci√≥n de cancelar corutinas, debe modificar ligeramente el c√≥digo: <br><br><img src="https://habrastorage.org/webt/cw/9p/yf/cw9pyfzj3sbzqrpz49b0ochntjq.png"><br>  <i>Fig.</i>  <i>2.10</i> <br><br><h2>  Error de registro </h2><br>  Considere la excepci√≥n excepci√≥n rastro de pila. <br><br>  Si lanza una excepci√≥n directamente en el bloque de c√≥digo de rutina (Fig. 2.11), el seguimiento de la pila se ve ordenado, con solo unas pocas llamadas de la rutina, indica correctamente la l√≠nea y la informaci√≥n sobre la excepci√≥n.  En este caso, puede comprender f√°cilmente desde el seguimiento de la pila d√≥nde exactamente, en qu√© clase y en qu√© funci√≥n se produjo la excepci√≥n. <br><br><img src="https://habrastorage.org/webt/70/1q/h7/701qh72uei7qbt8jpf9kegbnavy.png"><br>  <i>Fig.</i>  <i>2.11</i> <br><br>  Sin embargo, las excepciones que se pasan al m√©todo <i>resumeWithException de las</i> funciones de <i>suspensi√≥n</i> , por regla general, no contienen informaci√≥n sobre la rutina en la que se produjo.  Por ejemplo (Fig. 2.12), si reanuda la rutina de la funci√≥n de suspensi√≥n implementada previamente con la misma excepci√≥n que en el ejemplo anterior, el seguimiento de la pila no dar√° informaci√≥n sobre d√≥nde buscar espec√≠ficamente el error. <br><br><img src="https://habrastorage.org/webt/wd/41/xr/wd41xr4kb6f-luf61_cvcmxetr4.png"><br>  <i>Fig.</i>  <i>2.12</i> <br><br>  Para comprender qu√© corutina se reanud√≥ con una excepci√≥n, puede usar el <i>elemento de</i> contexto <i>CoroutineName</i> .  (Fig. 2.13) <br><br>  El elemento <i>CoroutineName se</i> usa para depurar, pasando el nombre de la corutina, puede extraerlo en las funciones de suspensi√≥n y, por ejemplo, complementar el mensaje de excepci√≥n.  Es decir, al menos estar√° claro d√≥nde buscar un error. <br><br>  Este enfoque solo funcionar√° si la funci√≥n de suspensi√≥n se excluye de esto: <br><br><img src="https://habrastorage.org/webt/5u/xs/st/5uxsstlugngflzdlcrarrfws1d4.png"><br>  <i>Fig.</i>  <i>2,13</i> <br><br><h3>  Error al iniciar sesi√≥n.  ExceptionHandler </h3><br>  Para cambiar el registro de excepciones para una determinada rutina, puede configurar su propio ExceptionHandler, que es uno de los elementos del contexto de la rutina.  (Fig. 2.14) <br><br>  El controlador debe implementar la interfaz <i>CoroutineExceptionHandler</i> .  Usando el operador anulado + para el contexto de rutina, puede reemplazar el controlador de excepci√≥n est√°ndar por el suyo.  La excepci√≥n no controlada caer√° en el m√©todo <i>handleException</i> , donde puede hacer lo que necesite con √©l.  Por ejemplo, ignorar por completo.  Esto suceder√° si deja el controlador vac√≠o o agrega su propia informaci√≥n: <br><br><img src="https://habrastorage.org/webt/c_/1w/3y/c_1w3ya8lagmhplbeeq9ajvtbws.png"><br>  <i>Fig.</i>  <i>2,14</i> <br><br>  Veamos c√≥mo se ver√≠a el registro de nuestra excepci√≥n: <br><br><ol><li>  Debe recordar sobre la <i>excepci√≥n de cancelaci√≥n</i> , que queremos ignorar. </li><li>  Agregue sus propios registros. </li><li>  Recuerde sobre el comportamiento predeterminado, que incluye iniciar sesi√≥n y finalizar la aplicaci√≥n, de lo contrario, la excepci√≥n simplemente "desaparecer√°" y no quedar√° claro qu√© sucedi√≥. </li></ol><br>  Ahora, para el caso de lanzar una excepci√≥n, se enviar√° una lista de seguimiento de la pila al logcat con la informaci√≥n agregada: <br><br><img src="https://habrastorage.org/webt/mr/jl/sc/mrjlscj8bilbyancdfmygexqlki.png"><br>  <i>Fig.</i>  <i>2,15</i> <br><br><h2>  Ejecuci√≥n paralela.  as√≠ncrono </h2><br>  Considere la operaci√≥n paralela de las funciones de suspensi√≥n. <br><br>  <i>Async</i> es el m√°s adecuado para organizar resultados paralelos de m√∫ltiples funciones.  As√≠ncrono, como el <i>lanzamiento</i> : Coroutine Builder.  Su conveniencia es que, utilizando el m√©todo <i>await ()</i> , devuelve datos si tiene √©xito o arroja una excepci√≥n que ha ocurrido durante la ejecuci√≥n de la rutina.  El m√©todo de espera esperar√° a que se complete la rutina, si a√∫n no se ha completado, de lo contrario devolver√° inmediatamente el resultado del trabajo.  Tenga en cuenta que esperar es una funci√≥n de suspensi√≥n y, por lo tanto, no se puede ejecutar fuera del contexto de una funci√≥n de suspensi√≥n u otra rutina. <br><br>  Usando as√≠ncrono, obtener datos de dos funciones en paralelo se ver√° m√°s o menos as√≠: <br><br><img src="https://habrastorage.org/webt/w1/-t/hv/w1-thvudknznjyexdz7_c5rb0w8.png"><br>  <i>Fig.</i>  <i>2,16</i> <br><br>  Imagine que nos enfrentamos a la tarea de obtener datos de dos funciones en paralelo.  Luego, debes combinarlos y mostrarlos.  En caso de error, es necesario dibujar la IU, cancelando todas las solicitudes actuales.  Tal caso a menudo se encuentra en la pr√°ctica. <br><br>  En este caso, el error debe manejarse de la siguiente manera: <br><br><ol><li>  Traiga el manejo de errores dentro de cada async-corutin. </li><li>  En caso de error, cancele todas las corutinas.  Afortunadamente, para esto es posible especificar un trabajo principal, tras la cancelaci√≥n de la cual se cancelan todos sus hijos. </li><li>  Se nos ocurri√≥ una implementaci√≥n adicional para comprender si todos los datos se han cargado correctamente.  Por ejemplo, suponemos que si la espera devuelve nulo, se produjo un error al recibir datos. </li></ol><br>  Con todo esto en mente, la implementaci√≥n de la rutina de los padres se est√° volviendo un poco m√°s complicada.  La implementaci√≥n de async-corutin tambi√©n es complicada: <br><br><img src="https://habrastorage.org/webt/wy/xe/ny/wyxenyk2quyek7zmhz4ze1dq5sw.png"><br>  <i>Fig.</i>  <i>2,17</i> <br><br>  Este enfoque no es el √∫nico posible.  Por ejemplo, puede implementar la ejecuci√≥n paralela con manejo de errores usando <i>ExceptionHandler</i> o <i>SupervisorJob</i> . <br><br><h2>  Corutinas Anidadas </h2><br>  Veamos el trabajo de la corutina anidada. <br><br>  Por defecto, la rutina anidada se crea utilizando un √°mbito externo y hereda su contexto.  Como resultado, la rutina anidada se convierte en una hija y el padre externo. <br><br>  Si cancelamos la rutina externa, las corridas anidadas creadas de esta manera, que se usaron en el ejemplo anterior, tambi√©n se cancelar√°n.  Tambi√©n ser√° √∫til al salir de la pantalla cuando necesite cancelar las solicitudes actuales.  Adem√°s, el padre corutin siempre esperar√° la finalizaci√≥n de la hija. <br><br>  Puede crear una rutina que sea independiente de la externa utilizando un √°mbito global.  En este caso, cuando se cancela la rutina externa, la anidada continuar√° funcionando como si nada hubiera sucedido: <br><br><img src="https://habrastorage.org/webt/fj/pu/_y/fjpu_yzyp3z0ttuypjypxu2oav4.png"><br>  <i>Fig.</i>  <i>2,18</i> <i><br></i> <br>  Puede crear un elemento secundario de la rutina global anidada reemplazando el elemento de contexto con la clave <i>Trabajo</i> con el trabajo principal, o puede utilizar completamente el contexto de la rutina principal.  Pero en este caso, vale la pena recordar que se toman todos los elementos de la rutina principal: el grupo de subprocesos, el controlador de excepciones, etc. <br><br><img src="https://habrastorage.org/webt/hh/wd/jx/hhwdjxobjkl0arojj0sh6ufii7m.png"><br>  <i>Fig.</i>  <i>2,19</i> <br><br>  Ahora est√° claro que si usa la rutina desde el exterior, debe proporcionarles la capacidad de instalar una instancia del trabajo o el contexto del padre.  Y los desarrolladores de bibliotecas deben considerar la posibilidad de instalarlo de ni√±o, lo que causa inconvenientes. <br><br><h2>  Puntos de corte </h2><br>  Las rutinas afectan la visualizaci√≥n de los valores de los objetos en modo de depuraci√≥n.  Si coloca un punto de interrupci√≥n dentro de la siguiente rutina en la funci√≥n <b>logData</b> , cuando se dispara, vemos que todo est√° bien aqu√≠ y los valores se muestran correctamente: <br><br><img src="https://habrastorage.org/webt/hp/t-/oc/hpt-ockcfqvrlzej2ncx0v2cboy.png"><br>  <i>Fig.</i>  <i>2,20</i> <br><br>  Ahora obtenga los <b>datos A</b> usando la rutina anidada, dejando un punto de interrupci√≥n en <b>logData</b> : <br><br><img src="https://habrastorage.org/webt/bq/0j/cb/bq0jcbefwitj0ss-bhahf8_cjy8.png"><br>  <i>Fig.</i>  <i>2,21</i> <br><br>  Intentar expandir este bloque para intentar encontrar los valores deseados falla.  Por lo tanto, la depuraci√≥n en presencia de funciones suspendidas se vuelve dif√≠cil. <br><br><h2>  Prueba unitaria </h2><br>  Las pruebas unitarias son bastante sencillas.  Puede usar el RunBlocking de Coroutine Builder <i>para esto</i> .  <i>runBlocking</i> bloquea un subproceso hasta que terminen todas sus rutinas anidadas, que es exactamente lo que necesita para probar. <br><br>  Por ejemplo, si se sabe que en alg√∫n lugar dentro del m√©todo se usa la rutina para implementarlo, entonces para probar el m√©todo solo necesita envolverlo en <i>runBlocking</i> . <br><br>  <i>runBlocking</i> se puede usar para probar una funci√≥n de suspensi√≥n: <br><br><img src="https://habrastorage.org/webt/ok/vi/4t/okvi4t5bogczdolbbiimwmqyz5g.png"><br>  <i>Fig.</i>  <i>2,22</i> <br><br><h2>  Ejemplos </h2><br>  Finalmente, me gustar√≠a mostrar algunos ejemplos del uso de la corutina. <br><br>  Imagine que necesitamos ejecutar tres consultas A, B y C en paralelo, mostrar su finalizaci√≥n y reflejar el momento de finalizaci√≥n de las solicitudes A y B. <br><br>  Para hacer esto, simplemente puede envolver las consultas de las rutinas A y B en una com√∫n y trabajar con ella como un todo: <br><br><img src="https://habrastorage.org/webt/xy/ut/fo/xyutfowgblzyjx5l-fb0tcazbx4.png"><br>  <i>Fig.</i>  <i>2,23</i> <br><br>  El siguiente ejemplo muestra c√≥mo usar el ciclo regular for para ejecutar consultas peri√≥dicas con un intervalo de 5 segundos: <br><br><img src="https://habrastorage.org/webt/an/bk/zb/anbkzbm6ozetsl3vtwopsmtm2f0.png"><br>  <i>Fig.</i>  <i>2,24</i> <br><br><h2>  Conclusiones </h2><br>  De los inconvenientes, observo que las corutinas son una herramienta relativamente joven, por lo que si desea usarlas en la producci√≥n, debe hacerlo con precauci√≥n.  Hay dificultades de depuraci√≥n, un peque√±o punto de referencia en la implementaci√≥n de cosas obvias. <br><br>  En general, las corutinas son bastante f√°ciles de usar, especialmente para implementar tareas asincr√≥nicas no complicadas.  En particular, debido al hecho de que se pueden utilizar construcciones de lenguaje est√°ndar.  Las corutinas son f√°cilmente susceptibles de pruebas unitarias y todo esto viene de la caja de la misma compa√±√≠a que desarrolla el lenguaje. <br><br><h2>  Informar video </h2><br>  Result√≥ muchas cartas.  Para aquellos a quienes les gusta escuchar m√°s: video de mi informe sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MBLT DEV 2018</a> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/wsYou5lx6zA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3>  Materiales √∫tiles sobre el tema: </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Introducci√≥n a las rutinas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sum√©rgete en las rutinas</a> </li><li>  <a href="">Gu√≠a de kotlinx.coroutines por ejemplo</a> </li><li>  <a href="">Gu√≠a de programaci√≥n de IU con corutinas.</a> </li><li>  <a href="">Documento de dise√±o de Coroutines (KEEP)</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/442920/">https://habr.com/ru/post/442920/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../442910/index.html">¬øPor qu√© necesitamos an√°lisis avanzados en SIBUR?</a></li>
<li><a href="../442912/index.html">Rally contra el aislamiento de Runet</a></li>
<li><a href="../442914/index.html">Battle royale: secretos de dise√±o del g√©nero de juegos m√°s popular</a></li>
<li><a href="../442916/index.html">¬øSon relevantes las estaciones de radio FM pirateadas hoy?</a></li>
<li><a href="../442918/index.html">Gu√≠a para implementar modelos de aprendizaje autom√°tico en un entorno de producci√≥n como API utilizando Flask</a></li>
<li><a href="../442922/index.html">Misi√≥n lunar "Bereshit" - caracter√≠sticas del dispositivo, una serie de maniobras y el camino m√°s largo hacia la luna</a></li>
<li><a href="../442924/index.html">Salpicadura de textura de terreno avanzada</a></li>
<li><a href="../442926/index.html">"Alboroto del rat√≥n" en luz infrarroja: la introducci√≥n de nanopart√≠culas en la regi√≥n subretiniana del ojo del rat√≥n</a></li>
<li><a href="../442928/index.html">Escribir un c√≥digo flexible usando SOLID</a></li>
<li><a href="../442934/index.html">C√≥mo contratar personas en una gran empresa con una pila impopular. Conversaci√≥n con Wrike</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>