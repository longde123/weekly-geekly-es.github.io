<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¶üèø üõåüèª üÖ∞Ô∏è Stellen Sie die Ausgabe von etwas anderem als Speicherverlust ein üàÅ üêÆ üë®üèª‚Äçüíª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bislang wurden viele Artikel verfasst, die Sie zum Abbestellen von Observable RxJS-Abonnements ben√∂tigen. Andernfalls tritt ein Speicherverlust auf. F...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Stellen Sie die Ausgabe von etwas anderem als Speicherverlust ein</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479732/"><p> Bislang wurden <a href="https://medium.com/alexonozor/angular-rxjs-please-always-unsubscribe-86ca55ba7f12" rel="nofollow">viele</a> <a href="https://habr.com/ru/post/351338/">Artikel</a> verfasst, die <a href="https://medium.com/ngx/why-do-you-need-unsubscribe-ee0c62b5d21f" rel="nofollow">Sie zum Abbestellen</a> von Observable RxJS-Abonnements <a href="https://medium.com/ngx/why-do-you-need-unsubscribe-ee0c62b5d21f" rel="nofollow">ben√∂tigen.</a> Andernfalls tritt <strong>ein Speicherverlust</strong> auf.  F√ºr die meisten Leser solcher Artikel war die feste Regel ‚ÄûUnterzeichnet? - Abmelden!‚Äú In meinem Kopf verankert.  Leider sind die Informationen in solchen Artikeln oft verzerrt oder es wird etwas nicht ausgehandelt, und noch schlimmer, wenn Konzepte ersetzt werden.  Wir werden dar√ºber reden. </p><br><p><img src="https://habrastorage.org/webt/oa/f5/pf/oaf5pfujlesdzjavtjopl6z4_gi.jpeg"></p><a name="habracut"></a><br><p>  Nehmen Sie zum Beispiel diesen Artikel: <a href="https://medium.com/ngx/why-do-you-need-unsubscribe-ee0c62b5d21f" rel="nofollow">https://medium.com/ngx/why-do-you-need-unsubscribe-ee0c62b5d21f</a> </p><br><p><img src="https://habrastorage.org/webt/n2/av/hm/n2avhmxwuemrtc0tvv7noyhl2za.png"></p><br><p>  Wenn sie mir sagen, dass sich die Produktivit√§t <strong>m√∂glicherweise</strong> verringern k√∂nnte, denke ich sofort an eine <a href="http://optimization.guide/" rel="nofollow">vorzeitige Optimierung</a> . </p><br><p><img src="https://habrastorage.org/webt/on/__/rg/on__rgsm7admmp7p1u9t2gok4mu.png"></p><br><p><img src="https://habrastorage.org/webt/hw/rz/rw/hwrzrwkwlzlxmdhi3d2uusuj7sa.png"></p><br><p>  Wir lesen den Artikel des Mannes unter dem Spitznamen <strong>Reactive Fox weiter</strong> : <br><img src="https://habrastorage.org/webt/fn/6j/qn/fn6jqnrypjv7e1zo_v9kg43jkv4.png"></p><br><p><img src="https://habrastorage.org/webt/ue/w2/mg/uew2mga3qjig9rint74jn7i0q0q.png"></p><br><p>  Weiterhin gibt es n√ºtzliche Informationen und Tipps.  Ich bin damit einverstanden, dass Sie sich immer von <strong>endlosen Streams in RxJS</strong> abmelden sollten.  Ich konzentriere mich aber nur auf sch√§dliche Informationen (meiner Meinung nach). <br><img src="https://habrastorage.org/webt/e1/ep/rz/e1eprzkk7depkecysfapwnlmhkc.png"></p><br><p>  Wow ... hat den Schrecken eingeholt.  Solche unbegr√ºndete Einsch√ºchterung (keine Metriken, Zahlen ...) hat zur Zeit dazu gef√ºhrt, dass f√ºr eine sehr gro√üe Anzahl von Front-Endors das Fehlen einer Abmeldung wie ein roter Lappen f√ºr einen Bullen ist.  Wenn sie darauf sto√üen, sehen sie nichts mehr als diesen Lappen. <br><img src="https://habrastorage.org/webt/1i/-o/c_/1i-oc_a48-jwxjp7xyfgofkajpe.jpeg"></p><br><p>  Der Autor des Artikels machte sogar eine Demo-Anwendung, in der er versuchte, seine Gedanken zu beweisen: <br>  <a href="https://stackblitz.com/edit/why-you-have-to-unsubscribe-from-observable-material" rel="nofollow">https://stackblitz.com/edit/why-you-have-to-unsubscribe-from-observable-material</a> </p><br><p>  In der Tat k√∂nnen Sie auf seinem Stand sehen, wie der Prozessor unn√∂tig arbeitet (wenn ich nichts anklicke) und wie sich der Speicherverbrauch erh√∂ht (kleine √Ñnderung): </p><br><p> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/lm/4r/p_/lm4rp_3sl0zqb11rf5dsufwdole.png"></a> </p><br><p>  Als Best√§tigung f√ºr die Tatsache, dass Sie sich <strong>immer</strong> von Abonnements f√ºr Observable <strong>HttpClient-</strong> Anfragen abmelden m√ºssen, f√ºgte er einen Request Interceptor hinzu, der in der Konsole "noch am Leben ... noch am Leben ... noch am Leben ..." anzeigt: <br><img src="https://habrastorage.org/webt/cs/m-/tz/csm-tzst2fx6prkarqwx_dfc_k4.png"><br>  Das hei√üt  Die Person hat den endg√ºltigen Stream abgefangen und ihn <strong>unendlich gemacht</strong> (im Falle eines Fehlers wird die Anforderung wiederholt, der Fehler tritt jedoch immer auf) und gibt dies als Beweis daf√ºr an, dass Sie den endg√ºltigen Stream abbestellen m√ºssen. </p><br><p>  <strong>StackBlitz eignet sich</strong> nicht besonders zur Messung der Anwendungsleistung  W√§hrend des Upgrades findet eine automatische Synchronisierung statt, die Ressourcen beansprucht.  Also habe ich meinen Testantrag gestellt: <a href="https://github.com/andchir/test-angular-app" rel="nofollow">https://github.com/andchir/test-angular-app</a> </p><br><p>  Dort gibt es zwei Fenster.  Bei jedem √ñffnen wird eine Anfrage an <strong>action.php</strong> gesendet, in der eine Verz√∂gerung von 3 Sekunden <strong>auftritt</strong> , um einen sehr ressourcenintensiven Vorgang <strong>nachzuahmen</strong> .  <strong>Action.php</strong> protokolliert auch alle Anfragen in der <strong>log.txt-</strong> Datei. </p><br><div class="spoiler">  <b class="spoiler_title">Action.php Code</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> header(<span class="hljs-string"><span class="hljs-string">'Content-Type: application/json'</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logging</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($str, $fileName = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'log.txt'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_array($str)) { $str = json_encode($str); } $rootPath = <span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span>; $logFilePath = $rootPath . DIRECTORY_SEPARATOR . $fileName; $options = [ <span class="hljs-string"><span class="hljs-string">'max_log_size'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">200</span></span> * <span class="hljs-number"><span class="hljs-number">1024</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!is_dir(dirname($logFilePath))) { mkdir(dirname($logFilePath)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (file_exists($logFilePath) &amp;&amp; filesize($logFilePath) &gt;= $options[<span class="hljs-string"><span class="hljs-string">'max_log_size'</span></span>]) { unlink($logFilePath); } $fp = fopen( $logFilePath, <span class="hljs-string"><span class="hljs-string">'a'</span></span> ); $dateFormat = <span class="hljs-string"><span class="hljs-string">'d/m/YH:i:s'</span></span>; $str = PHP_EOL . PHP_EOL . date($dateFormat) . PHP_EOL . $str; fwrite( $fp, $str ); fclose( $fp ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } $actionName = <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($_GET[<span class="hljs-string"><span class="hljs-string">'a'</span></span>]) &amp;&amp; !is_array($_GET[<span class="hljs-string"><span class="hljs-string">'a'</span></span>]) ? $_GET[<span class="hljs-string"><span class="hljs-string">'a'</span></span>] : <span class="hljs-string"><span class="hljs-string">'1'</span></span>; logging(<span class="hljs-string"><span class="hljs-string">"STARTED-{$actionName}"</span></span>); sleep(<span class="hljs-number"><span class="hljs-number">3</span></span>);<span class="hljs-comment"><span class="hljs-comment">// Very resource-intensive operation that takes 3 seconds logging("COMPLETED-{$actionName}"); echo json_encode([ 'success' =&gt; true, 'data' =&gt; ['name' =&gt; 'test', 'title' =&gt; 'This is a test'] ]);</span></span></code> </pre> </div></div><br><p>  Aber zuerst ein kleiner Exkurs.  In der Abbildung unten (anklickbar) sehen Sie ein einfaches Beispiel f√ºr die Funktionsweise des JavaScript-Garbage Collectors im Chrome-Browser.  PUSH ist aufgetreten, aber setTimeout hat den Garbage Collector nicht daran gehindert, den Speicher zu l√∂schen. <br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/ly/r0/1w/lyr01wmysa9pphmphoj8aa39aaq.png"></a> </p><br><p>  Vergessen Sie nicht, den Garbage Collector auf Knopfdruck anzurufen, wenn Sie experimentieren. <br><img src="https://habrastorage.org/webt/ir/k4/j4/irk4j4izd09-npb06n2zysccpum.png"></p><br><p>  Kehren wir zu meiner Testanwendung zur√ºck.  Hier ist der Code f√ºr beide Fenster: </p><br><div class="spoiler">  <b class="spoiler_title">BadModalComponent Code</b> <div class="spoiler_text"><pre> <code class="javascript hljs">@Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'app-bad-modal'</span></span>, <span class="hljs-attr"><span class="hljs-attr">templateUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'./bad-modal.component.html'</span></span>, <span class="hljs-attr"><span class="hljs-attr">styleUrls</span></span>: [<span class="hljs-string"><span class="hljs-string">'./bad-modal.component.css'</span></span>], <span class="hljs-attr"><span class="hljs-attr">providers</span></span>: [HttpClient] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BadModalComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnDestroy</span></span></span><span class="hljs-class"> </span></span>{ loading = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; largeData: number[] = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">new</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Array</span></span></span></span><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1000000</span></span></span></span></span><span class="hljs-function">)).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fill</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">destroyed$</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">new</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Subject</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">void</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DataInterface</span></span></span><span class="hljs-function">; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">constructor</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> private http: HttpClient, private bsModalRef: BsModalRef </span></span></span><span class="hljs-function">) { } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ngOnInit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loadData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loadData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">void</span></span></span><span class="hljs-function"> { // </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">For</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">example</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">only</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">not</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">for</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">production</span></span></span><span class="hljs-function">. </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loading</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">true</span></span></span><span class="hljs-function">; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">subscription</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">http</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">get</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DataInterface</span></span></span><span class="hljs-function">&gt;(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'/action.php?a=2'</span></span></span></span></span><span class="hljs-function">).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pipe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> takeUntil(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.destroyed$</span></span></span><span class="hljs-function">), </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">catchError</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(err</span></span></span><span class="hljs-function">) =&gt;</span></span> throwError(err.message)), finalize(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'FINALIZE'</span></span>)) ) .subscribe({ <span class="hljs-attr"><span class="hljs-attr">next</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function">) =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(subscription.closed ? <span class="hljs-string"><span class="hljs-string">'SUBSCRIPTION IS CLOSED'</span></span> : <span class="hljs-string"><span class="hljs-string">'SUBSCRIPTION IS NOT CLOSED!'</span></span>); }, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'LOADED'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data = res; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.loading = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(subscription.closed ? <span class="hljs-string"><span class="hljs-string">'ERROR - SUBSCRIPTION IS CLOSED'</span></span> : <span class="hljs-string"><span class="hljs-string">'ERROR - SUBSCRIPTION IS NOT CLOSED!'</span></span>); }, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'ERROR'</span></span>, error); }, <span class="hljs-attr"><span class="hljs-attr">complete</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(subscription.closed ? <span class="hljs-string"><span class="hljs-string">'COMPLETED - SUBSCRIPTION IS CLOSED'</span></span> : <span class="hljs-string"><span class="hljs-string">'COMPLETED - SUBSCRIPTION IS NOT CLOSED!'</span></span>); }, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'COMPLETED'</span></span>); } }); } close(event?: MouseEvent): <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event) { event.preventDefault(); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.bsModalRef.hide(); } ngOnDestroy() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'DESTROY'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.destroyed$.next(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.destroyed$.complete(); } }</code> </pre> </div></div><br><p>  Wie Sie sehen, gibt es eine Abmeldung (takeUntil).  Alles, was der "Lehrer" uns geraten hat.  Es gibt auch eine gro√üe Auswahl. </p><br><div class="spoiler">  <b class="spoiler_title">GoodModalComponent-Code</b> <div class="spoiler_text"><pre> <code class="javascript hljs">@Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'app-good-modal'</span></span>, <span class="hljs-attr"><span class="hljs-attr">templateUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'./good-modal.component.html'</span></span>, <span class="hljs-attr"><span class="hljs-attr">styleUrls</span></span>: [<span class="hljs-string"><span class="hljs-string">'./good-modal.component.css'</span></span>] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoodModalComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnDestroy</span></span></span><span class="hljs-class"> </span></span>{ loading = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; largeData: number[] = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">new</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Array</span></span></span></span><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1000000</span></span></span></span></span><span class="hljs-function">)).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fill</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DataInterface</span></span></span><span class="hljs-function">; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">constructor</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> private http: HttpClient, private bsModalRef: BsModalRef </span></span></span><span class="hljs-function">) { } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ngOnInit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loadData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loadData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">void</span></span></span><span class="hljs-function"> { // </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">For</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">example</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">only</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">not</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">for</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">production</span></span></span><span class="hljs-function">. </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loading</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">true</span></span></span><span class="hljs-function">; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">subscription</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">http</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">get</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DataInterface</span></span></span><span class="hljs-function">&gt;(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'/action.php?a=1'</span></span></span></span></span><span class="hljs-function">).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pipe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> catchError((err</span></span></span><span class="hljs-function">) =&gt;</span></span> throwError(err.message)), finalize(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'FINALIZE'</span></span>)) ) .subscribe({ <span class="hljs-attr"><span class="hljs-attr">next</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function">) =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(subscription.closed ? <span class="hljs-string"><span class="hljs-string">'SUBSCRIPTION IS CLOSED'</span></span> : <span class="hljs-string"><span class="hljs-string">'SUBSCRIPTION IS NOT CLOSED!'</span></span>); }, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'LOADED'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data = res; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.loading = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(subscription.closed ? <span class="hljs-string"><span class="hljs-string">'ERROR - SUBSCRIPTION IS CLOSED'</span></span> : <span class="hljs-string"><span class="hljs-string">'ERROR - SUBSCRIPTION IS NOT CLOSED!'</span></span>); }, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'ERROR'</span></span>, error); }, <span class="hljs-attr"><span class="hljs-attr">complete</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(subscription.closed ? <span class="hljs-string"><span class="hljs-string">'COMPLETED - SUBSCRIPTION IS CLOSED'</span></span> : <span class="hljs-string"><span class="hljs-string">'COMPLETED - SUBSCRIPTION IS NOT CLOSED!'</span></span>); }, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'COMPLETED'</span></span>); } }); } close(event?: MouseEvent): <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event) { event.preventDefault(); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.bsModalRef.hide(); } ngOnDestroy() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'DESTROY'</span></span>); } }</code> </pre> </div></div><br><p>  Es gibt genau die gleiche Eigenschaft mit einem gro√üen Array, aber es gibt keine Abmeldung.  Und das hindert mich nicht daran, dieses Fenster als gut zu bezeichnen.  Warum - sp√§ter. </p><br><p>  Sehen Sie sich das Video an: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/jQ5qLosbnOY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Wie Sie in beiden F√§llen sehen k√∂nnen, hat der Garbage Collector nach dem Wechsel zur zweiten Komponente den Speicher erfolgreich auf normale Werte zur√ºckgesetzt.  Ja, man k√∂nnte es m√∂glich machen, den Speicher auch nach dem Schlie√üen der Fenster zu l√∂schen, aber in unserem Experiment ist dies nicht wichtig.  Es stellte sich heraus, dass der "Lehrer" sich geirrt hatte, als er sagte: </p><br><blockquote>  Sie haben beispielsweise eine Anforderung gestellt. Wenn die Antwort jedoch noch nicht vom Backend eingegangen ist, wird die Komponente als unn√∂tig zerst√∂rt. In <strong>Ihrem Abonnement wird die Verkn√ºpfung zur Komponente</strong> beibehalten, wodurch ein potenzieller Speicherverlust verursacht wird. </blockquote><p>  Ja, er spricht von einem <strong>‚Äûpotenziellen‚Äú</strong> Leck.  Wenn der Stream jedoch endlich ist, tritt kein Speicherverlust auf. </p><br><p>  Ich sehe die emp√∂rten Ausrufe solcher "Lehrer" voraus.  Sie werden uns auf jeden Fall etwas sagen wie: <em>"OK, es gibt keinen Speicherverlust, aber durch das <strong>Abbestellen brechen</strong> wir auch <strong>die Anfrage ab</strong> , was bedeutet, dass wir sicher sind, dass kein Code mehr ausgef√ºhrt wird, nachdem wir eine Antwort vom Server erhalten haben</em> . <em>"</em>  Erstens sage ich nicht, dass das Abbestellen <strong>immer</strong> schlecht ist. Ich sage nur, dass Sie <strong>Konzepte ersetzen</strong> .  Ja, die Tatsache, dass nach Eingang der Antwort eine andere unbrauchbare Operation ausgef√ºhrt wird, ist schlecht, aber <strong>Sie k√∂nnen sich nur durch Abbestellen</strong> (in diesem Fall) <strong>vor einem echten Speicherverlust</strong> und <strong>auf</strong> <strong>andere Weise</strong> vor <strong>anderen unerw√ºnschten Effekten</strong> sch√ºtzen.  Sie m√ºssen die Leser nicht einsch√ºchtern und ihnen ihren eigenen Stil beim Schreiben von Code aufzwingen. </p><br><p>  M√ºssen wir die Anfrage immer stornieren, wenn der Benutzer seine Meinung √§ndert?  Nicht immer!  Vergessen Sie nicht, dass Sie die Anforderung <strong>abbrechen, den Vorgang auf dem Server jedoch nicht abbrechen</strong> .  Stellen Sie sich vor, ein Benutzer hat eine Komponente ge√∂ffnet, etwas wurde schon lange geladen und er wechselt zu einer anderen Komponente.  M√∂glicherweise ist der <strong>Server geladen und verarbeitet nicht</strong> alle Anforderungen und Vorg√§nge.  In diesem Fall kann der Benutzer alle Links in der Navigation hektisch ansto√üen und <strong>den Server</strong> noch <strong>st√§rker belasten</strong> , da <strong>die Anforderung auf der Serverseite nicht gestoppt wird</strong> (in den meisten F√§llen). </p><br><p>  Sehen Sie sich das folgende Video an: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/uAEka7a5_eA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Ich habe den Benutzer auf eine Antwort warten lassen.  In den meisten F√§llen erfolgt die Antwort schnell und der Benutzer hat keine Unannehmlichkeiten.  <strong>Auf diese Weise wird der Server jedoch vor wiederholten schweren Vorg√§ngen bewahrt.</strong> </p><br><p>  Zusammenfassung: </p><br><ul><li>  Ich sage nicht, dass <strong>Sie</strong> sich nicht von RxJS-Abonnements f√ºr HttpClient-Anfragen abmelden m√ºssen.  Ich sage nur, dass es Zeiten gibt, in denen dies nicht notwendig ist.  Konzepte m√ºssen nicht ersetzt werden.  Wenn Sie von einem Speicherverlust sprechen, zeigen Sie diesen Fehler an.  Nicht dein endloses <strong>console.log</strong> , n√§mlich ein Leck.  Worin wird das Ged√§chtnis gemessen?  In welcher Zeit wird die Operation gemessen?  Das muss gezeigt werden. </li><li>  Ich bezeichne meine L√∂sung, die ich in der Testanwendung angewendet habe, nicht als "Wunderwaffe".  <strong>Im Gegenteil, ich fordere den Fronttender nachdr√ºcklich auf, mehr Freiheit zu erhalten.</strong>  Lassen Sie ihn entscheiden, wie er seinen Code schreibt.  Keine Notwendigkeit, ihn einzusch√ºchtern und seinen eigenen Entwicklungsstil durchzusetzen. </li><li>  Ich bin gegen Fanatismus und vorzeitige Optimierung.  Ich habe in letzter Zeit zu viel davon gesehen. </li><li>  Der Browser verf√ºgt √ºber erweiterte Methoden zum Auffinden von Speicherlecks als die von mir gezeigte.  Ich denke in meinem Fall ist die Anwendung dieser einfachen Methode ausreichend.  Ich empfehle Ihnen jedoch, sich mit dem Thema n√§her vertraut zu machen, z. B. in diesem Artikel: <a href="https://habr.com/ru/post/309318/">https://habr.com/de/post/309318/</a> . </li></ul><br><p>  <strong>UPD # 1</strong> <br>  Im Moment sackte die Post fast einen Tag lang ab.  Zuerst ging er zu den Vor- und Nachteilen √ºber, dann stoppte die Bewertung bei Null.  Dies bedeutet, dass das Publikum genau in zwei Lager aufgeteilt wurde.  Ich wei√ü nicht, ob das gut oder schlecht ist. </p><br><p>  <strong>UPD # 2</strong> <br>  In den Kommentaren erschien Jet Fox (der Autor des zu analysierenden Artikels).  Anfangs bedankte er sich bei mir, er war sehr h√∂flich.  Aber als er die Passivit√§t des Publikums sah, begann er Druck auszu√ºben.  Es kam zu dem Punkt, dass er <a href="https://habr.com/ru/post/479732/">schrieb,</a> dass ich mich entschuldigen sollte.  Das hei√üt  er hat gelogen (liegt mit einem gelben Rahmen oben umrandet), und ich sollte mich entschuldigen. <br>  Zuerst dachte ich, dass das Abfangen von Streams mit endlosen Wiederholungen (also 2-3 Wiederholungen), das er in seiner Demo-Anwendung geschrieben hat, nur zu Testzwecken und zur Information dient.  Aber es stellte sich heraus, dass er ihn als Beispiel aus dem Leben ansah.  Das hei√üt  den Knopf eines Fensters zu blockieren - <a href="https://habr.com/ru/post/479732/">es</a> ist <a href="https://habr.com/ru/post/479732/">unm√∂glich</a> .  Und um solche Abfangj√§ger zu erstellen, die gegen die Prinzipien von SOLID versto√üen, die Modularit√§t der Anwendung verletzen (Module und Komponenten m√ºssen voneinander unabh√§ngig sein), k√∂nnen Sie die Komponententests Ihrer Einheiten (Komponenten, Dienste) durch die Gesamtstruktur f√ºhren.  Stellen Sie sich die Situation vor: Sie haben eine Komponente geschrieben, Unit-Tests daf√ºr geschrieben.  Und dann erscheint ein solcher Fox, f√ºgt Ihrer Anwendung einen √§hnlichen Interceptor hinzu, und Ihre Tests werden unbrauchbar.  Dann sagt er immer noch zu dir: "Warum hast du nicht vorhergesagt, dass ich einen solchen Abfangj√§ger hinzuf√ºgen m√∂chte? Nun, korrigiere deinen Code."  Vielleicht ist dies eine Realit√§t in seinem Team, aber ich denke nicht, dass dies gef√∂rdert oder ein Auge zugedr√ºckt werden sollte. </p><br><p>  <strong>UPD # 3</strong> <br>  In den Kommentaren geht es haupts√§chlich um Abonnements und Abbestellungen.  Ist ein Beitrag namens "Evil abbestellen"?  Nein.  Ich fordere Sie nicht auf, sich nicht abzumelden.  Machen Sie es wie zuvor.  Aber Sie m√ºssen verstehen, warum Sie das tun.  Das Abbestellen ist keine vorzeitige Optimierung.  Wenn Sie jedoch den Weg des Schutzes vor potenziellen Bedrohungen beschreiten (wie uns der Autor des zu analysierenden Artikels nennt), k√∂nnen Sie die Grenze √ºberschreiten.  Dann kann Ihr Code √ºberlastet und schwer zu warten sein. <br>  In diesem Artikel geht es um Fanatismus, der zur Verbreitung nicht √ºberpr√ºfter Informationen f√ºhrt.  In einigen F√§llen ist es notwendig, sich ruhiger auf das Fehlen einer Abmeldung zu beziehen (Sie m√ºssen klar verstehen, ob in einem bestimmten Fall ein Problem vorliegt). </p><br><p>  <strong>UPD # 4</strong> </p><br><blockquote>  Im Gegenteil, ich fordere den Fronttender nachdr√ºcklich auf, mehr Freiheit zu erhalten.  Lassen Sie ihn entscheiden, wie er seinen Code schreibt. </blockquote><p>  Hier muss gekl√§rt werden.  Ich bin f√ºr Standards.  Der Standard kann jedoch vom Autor der Bibliothek oder seinem Team festgelegt werden, w√§hrend dies nicht der Fall ist (in der Dokumentation und offiziell).  Die Symfony-Framework-Dokumentation enth√§lt beispielsweise einen Abschnitt mit bew√§hrten <a href="https://symfony.com/doc/current/best_practices.html" rel="nofollow">Methoden</a> .  Wenn es in der RxJS-Dokumentation dasselbe w√§re und "signiert-abbestellen" sagen w√ºrde, h√§tte ich nicht den Wunsch, mit ihm zu streiten. </p><br><p>  <strong>UPD # 5</strong> <br>  Wichtiger Kommentar mit Antworten von seri√∂sen Personen: <br>  <a href="https://habr.com/ru/post/479732/">https://habr.com/de/post/479732/#comment_21012620</a> <br>  Die Empfehlung, den vom RxJS-Entwickler <strong>unterzeichneten</strong> Vertrag zum <strong>Abbestellen</strong> zu erf√ºllen, <strong>besteht</strong> , jedoch inoffiziell. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de479732/">https://habr.com/ru/post/de479732/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de479716/index.html">Eine weitere "Weltneuheit" SuperApp</a></li>
<li><a href="../de479718/index.html">Erstellen einer Arduino-Umgebungsanwendung mit CI Github</a></li>
<li><a href="../de479724/index.html">Tru Hacker sind vorbei</a></li>
<li><a href="../de479726/index.html">Vladimir aka wowik: "OpenStreetMap braucht Ideen, die in anderen Systemen nicht umsetzbar sind"</a></li>
<li><a href="../de479728/index.html">Wie organisiere ich einen erfolgreichen Start?</a></li>
<li><a href="../de479736/index.html">Kameras oder Laser</a></li>
<li><a href="../de479738/index.html">Wie Youtube und Instagram: Internationalisierung und Lokalisierung einer Python-Anwendung</a></li>
<li><a href="../de479742/index.html">Backyards - ein automatisiertes Service-Mesh auf einer Multi-Cloud- und Hybrid-Infrastruktur</a></li>
<li><a href="../de479744/index.html">Python Memory Management: Ein wenig √ºber Speicherfragmentierung</a></li>
<li><a href="../de479746/index.html">Unternehmenssoftware macht Ihre Mitarbeiter k√ºhler. Brauchst du es</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>