<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•â üî¶ üíå Switch √≥ptico TP-Link T2600G-28SQ para provedores de servi√ßos: uma revis√£o detalhada üë¥üèª ‚ñ∂Ô∏è „Ä∞Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A expans√£o das grandes cidades e a forma√ß√£o de aglomera√ß√µes √© hoje uma das tend√™ncias importantes no desenvolvimento social. Somente em 2019, Moscou d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Switch √≥ptico TP-Link T2600G-28SQ para provedores de servi√ßos: uma revis√£o detalhada</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tp_link_russia/blog/460421/">  A expans√£o das grandes cidades e a forma√ß√£o de aglomera√ß√µes √© hoje uma das tend√™ncias importantes no desenvolvimento social.  Somente em 2019, Moscou deve expandir em 4 milh√µes de metros quadrados de habita√ß√µes (e isso n√£o inclui os 15 assentamentos que ingressar√£o em 2020).  Em todo esse vasto territ√≥rio, as operadoras de telecomunica√ß√µes ter√£o que fornecer aos usu√°rios acesso √† Internet.  Pode ser tanto microdistritos urbanos com densos pr√©dios de v√°rios andares quanto mais vilas "descarregadas".  Para esses casos, os requisitos de hardware s√£o um pouco diferentes.  Analisamos cada um desses cen√°rios e criamos um modelo universal do comutador √≥ptico - T2600G-28SQ.  Neste post, analisaremos detalhadamente as capacidades do dispositivo que ser√£o interessantes para as operadoras de telecomunica√ß√µes em toda a R√∫ssia. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fe2/fa3/5b7/fe2fa35b77d35846dc029f4e8f7fd6a9.png"><br><a name="habracut"></a><br><h2>  Local da rede </h2><br>  O comutador T2600G-28SQ foi projetado para opera√ß√£o no n√≠vel de acesso √† rede e para agregar links de outros comutadores de n√≠vel de acesso.  Este √© um comutador de segundo n√≠vel que executa comuta√ß√£o e roteamento est√°tico.  Se a agrega√ß√£o e o acesso forem alterados pelo operador (o roteamento √© apenas no n√∫cleo da rede), o T2600G-28SQ se ajustar√° a qualquer um dos n√≠veis.  No caso de agrega√ß√£o roteada dinamicamente, voc√™ ainda precisa considerar algumas restri√ß√µes nos cen√°rios de uso. <br><br>  O T2600G-28SQ √© um switch Ethernet ativo completo sem restri√ß√µes adicionais que aparecem ao usar xPON ou similar.  Por exemplo, sem a amea√ßa de uma queda acentuada da velocidade com um aumento no n√∫mero de usu√°rios ou uma baixa compatibilidade entre o equipamento de v√°rios fornecedores e o firmware.  Os usu√°rios finais e os comutadores de acesso subjacentes com uplinks √≥pticos, por exemplo, o modelo T2600G-28TS, podem se conectar √†s interfaces do dispositivo.  O diagrama abaixo mostra os exemplos mais comuns de tais conex√µes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/95a/d0d/864/95ad0d864a5103c56af14a8ea1c01168.png"><br><br>  A fibra √≥ptica ou par tran√ßado pode ser usado para acessar a rede do usu√°rio final.  No lado do assinante, a fibra √≥ptica pode ser terminada usando um conversor de m√≠dia (conversor de m√≠dia), por exemplo, TP-Link MC220L;  e usando a interface √≥ptica no roteador SOHO. <br><br>  Para conectar um cliente pr√≥ximo, voc√™ pode usar quatro portas RJ-45 operando a velocidades de 10/100/1000 Mbit / s.  Se, por algum motivo, isso n√£o for suficiente, o operador poder√° "converter" as interfaces √≥pticas do comutador em cobre.  Isso pode ser feito usando SFPs "de cobre" especializados com um conector RJ-45.  Mas essa solu√ß√£o n√£o pode ser chamada de t√≠pica. <br><br><h2>  Alguns estudos de caso </h2><br>  Para concluir a imagem, veja alguns exemplos de uso dos comutadores de modelo T2600G-28SQ. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O</a> provedor da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DIVO</a> Moscow <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Region</a> , que, al√©m da Internet, fornece servi√ßos de telefonia e TV a cabo, usa o T2600G-28SQ no n√≠vel de acesso ao construir redes no setor privado (casas de campo e moradias).  Do lado do cliente, a conex√£o √© feita com roteadores com uma porta SFP e tamb√©m com conversores de m√≠dia.  No momento, os roteadores SOHO com uma porta SFP n√£o est√£o dispon√≠veis comercialmente, mas √© claro que pensamos nisso. <br><br>  O operador de telecomunica√ß√µes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ISS</a> do distrito de Pavlovo-Posadsky usa os comutadores T2600G-28SQ como uma ‚Äúpequena agrega√ß√£o‚Äù usando os comutadores T2600G-28TS e T2500G-10TS no acesso. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O</a> Grupo de Empresas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Garantia</a> fornece sistemas de acesso √† Internet, TV, telefonia e videovigil√¢ncia no sudeste da regi√£o de Moscou (Kolomna, Lukhovitsy, Zaraysk, Serebryanye Prudy, Ozyory).  A topologia aproximada aqui √© igual √† ISS: T2600G-28SQ no n√≠vel de agrega√ß√£o e T2600G-28TS e T2500G-10TS no n√≠vel de acesso. <br><br>  O provedor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SKTV</a> de Krasnoznamensk fornece acesso √† Internet por meio de uma rede com penetra√ß√£o profunda da √≥ptica.  Tamb√©m √© baseado no T2600G-28SQ. <br><br>  Nas se√ß√µes a seguir, descrevemos brevemente alguns dos recursos do T2600G-28SQ.  Para n√£o inflar o material, deixamos v√°rias op√ß√µes ao ar livre: QinQ (VLAN VPN), roteamento, QoS, etc. Acreditamos que ser√° poss√≠vel retornar a eles em um dos seguintes posts. <br><br><h2>  Recursos do switch </h2><br><h3>  Reserva - STP </h3><br>  STP - Spanning Tree Protocol.  O protocolo da √°rvore de abrang√™ncia √© conhecido h√° muito tempo, gra√ßas a isso ao distinto Radie Perlman.  Nas redes modernas, os administradores tentam evitar o uso desse protocolo de todas as formas.  Sim, STP n√£o est√° isento de falhas.  E √© muito bom se houver uma alternativa.  No entanto, como muitas vezes acontece, uma alternativa a esse protocolo ser√° altamente dependente do fornecedor.  Portanto, at√© agora, o Spanning Tree Protocol permanece quase a √∫nica solu√ß√£o suportada por quase todos os fabricantes e tamb√©m √© conhecido por todos os administradores de rede. <br><br>  O comutador TP-Link T2600G-28SQ suporta tr√™s vers√µes do STP: Classic STP (IEEE 802.1D), RSTP (802.1W) e MSTP (802.1S). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/41c/ad2/c56/41cad2c5602493ba2d2394bec61b100f.png"><br><br>  Dessas op√ß√µes, para a maioria dos pequenos provedores de Internet da R√∫ssia, o RSTP usual √© bastante adequado, o que tem uma vantagem ineg√°vel sobre a vers√£o cl√°ssica - tempo de converg√™ncia significativamente menor. <br><br>  O mais flex√≠vel atualmente √© o protocolo MSTP, que suporta redes virtuais (VLANs) e permite v√°rias √°rvores diferentes, o que permite usar todos os caminhos de backup dispon√≠veis.  O administrador cria v√°rias inst√¢ncias de √°rvore diferentes (at√© oito), cada uma das quais atende a um conjunto espec√≠fico de redes virtuais. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bc7/27d/ad1/bc727dad104177f184a481010711223b.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/13d/095/cbd/13d095cbd0ce7c1298bf8b639cd64bb7.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/64b/a2a/3b7/64ba2a3b7988b24fb171207db4f6a605.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/7c8/69e/456/7c869e45605b77ea5fc0bca80b39f633.png"><br><br><div class="spoiler">  <b class="spoiler_title">Sutilezas do MSTP</b> <div class="spoiler_text">  Os administradores iniciantes precisam ter muito cuidado ao usar o MSTP.  Isso se deve ao fato de que o comportamento do protocolo na regi√£o e entre regi√µes √© diferente.  Portanto, ao configurar os comutadores, verifique se voc√™ fica na mesma regi√£o. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fc9/1cb/6a3/fc91cb6a3559693a13e5c1e4a9cfa4f0.png"><br><br>  O que √© essa regi√£o not√≥ria?  Uma regi√£o em termos de MSTP √© um conjunto de comutadores conectados entre si que possuem as seguintes caracter√≠sticas: nome da regi√£o, n√∫mero de revis√£o e distribui√ß√£o de redes virtuais (VLANs) entre inst√¢ncias de protocolo. <br></div></div><br>  Obviamente, o protocolo Spanning Tree (de qualquer vers√£o) permite n√£o apenas lidar com loops que ocorrem ao conectar canais redundantes, mas tamb√©m proteger contra erros de comuta√ß√£o de cabos quando um engenheiro conecta intencionalmente ou n√£o intencionalmente as portas erradas, criando um loop com suas a√ß√µes. <br><br>  Os administradores de rede mais experientes preferem usar uma variedade de op√ß√µes adicionais para proteger o protocolo STP contra ataques ou emerg√™ncias complexas.  O T2600G-28SQ oferece v√°rios recursos: Prote√ß√£o de loop e prote√ß√£o de raiz, TC Guard, BPDU Protect e Filtro de BPDU. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/63e/678/a51/63e678a511e5550c4c5655da933b507f.png"><br><br>  O uso correto das op√ß√µes acima, juntamente com outros mecanismos de prote√ß√£o suportados, estabilizar√° a rede local e a tornar√° mais previs√≠vel. <br><br><h3>  Reserva - GAL </h3><br>  LAG - Grupo de agrega√ß√£o de links.  Esta √© uma tecnologia que permite combinar v√°rios canais f√≠sicos em um canal l√≥gico.  Todos os outros protocolos deixam de usar os canais f√≠sicos inclu√≠dos no LAG separadamente e come√ßam a "ver" uma interface l√≥gica.  Um exemplo desse protocolo √© o STP. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ee9/764/dc3/ee9764dc329e535c864b2991b696e251.png"><br><br>  O balanceamento de tr√°fego do usu√°rio entre canais f√≠sicos no canal l√≥gico √© baseado na quantidade de hash.  Para seu c√°lculo, os endere√ßos MAC do remetente, destinat√°rio ou alguns deles podem ser usados;  bem como os endere√ßos IP do remetente, destinat√°rio ou alguns deles.  As informa√ß√µes do protocolo da camada 4 (portas TCP / UDP) n√£o s√£o levadas em considera√ß√£o. <br><br>  O comutador T2600G-28SQ suporta LAGs est√°ticos e din√¢micos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b8f/b76/6c9/b8fb766c9ff66549204df206fd4076dc.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/8de/cbc/6c9/8decbc6c95f428d8a5423e80fb582288.png"><br><br>  Para coordenar os par√¢metros do grupo din√¢mico, o protocolo LACP √© usado. <br><br><h3>  Seguran√ßa - Listas de acesso (ACLs) </h3><br>  Nosso comutador T2600G-28SQ permite filtrar o tr√°fego do usu√°rio usando ACLs (Access Control Lists). <br><br>  As listas de acesso suportadas podem ser de v√°rios tipos diferentes: MAC e IP (IPv4 / IPv6), combinados, bem como para executar a filtragem de conte√∫do.  O n√∫mero de listas de acesso suportadas de cada tipo depende do modelo do SDM atualmente usado, que descrevemos em outra se√ß√£o. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2d5/124/762/2d5124762fa5f8b5826c715ec5173754.png"><br><br>  O operador pode usar esta op√ß√£o para bloquear v√°rios tr√°fegos indesejados na rede.  Um exemplo desse tr√°fego pode ser pacotes IPv6 (usando o campo EtherType) se o servi√ßo correspondente n√£o for fornecido;  ou bloqueie o SMB na porta 445. Em uma rede com endere√ßamento est√°tico DHCP / BOOTP, o tr√°fego n√£o √© necess√°rio; portanto, usando uma ACL, um administrador pode filtrar datagramas UDP nas portas 67 e 68. Voc√™ tamb√©m pode desativar o tr√°fego IPoE local usando uma ACL.  Esse bloqueio pode estar em demanda nas redes de operadoras que usam PPPoE. <br><br>  O processo de usar listas de acesso √© extremamente simples.  Depois de criar a lista em si, voc√™ precisa adicionar o n√∫mero necess√°rio de registros, cujo tipo depende diretamente da planilha personalizada. <br><br><div class="spoiler">  <b class="spoiler_title">Configurar listas de acesso</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/b90/5b7/451/b905b7451faa375f95a6fbdfbd781e35.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/32e/c63/815/32ec6381581bac85c1c01aad57252750.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/a6a/6a6/c99/a6a6a6c990012603ddfdff5862dd229a.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/7e6/623/d2a/7e6623d2ae39ccf20906cc5c0f21fef2.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/097/83f/ca0/09783fca0c052cf8bbac7a8582bd4365.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/5c0/3ca/879/5c03ca879ff385da5d7c0cd34399132d.png"><br></div></div><br>  Vale ressaltar que as listas de acesso podem executar n√£o apenas as opera√ß√µes usuais para permitir ou proibir a passagem de tr√°fego, mas tamb√©m se engajar em seu redirecionamento, espelhamento, bem como executar sua remarca√ß√£o ou limite de velocidade. <br>  Ap√≥s a cria√ß√£o de todas as ACLs necess√°rias, o administrador pode executar sua instala√ß√£o.  Voc√™ pode anexar uma lista de acesso √† porta f√≠sica direta e a uma rede virtual espec√≠fica. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c7a/6eb/5b7/c7a6eb5b77f82b1c4dbe7130b6e37b76.png"><br><br><h3>  Seguran√ßa - N√∫mero de endere√ßos MAC </h3><br>  √Äs vezes, os operadores precisam limitar o n√∫mero de endere√ßos MAC que o switch aprende em uma porta espec√≠fica.  As listas de acesso permitem alcan√ßar esse efeito, mas exigem indica√ß√£o expl√≠cita dos pr√≥prios endere√ßos MAC.  Se for necess√°rio limitar o n√∫mero de endere√ßos de canal, mas n√£o especific√°-los explicitamente, a seguran√ßa da porta ser√° √∫til. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e17/551/de2/e17551de2a7713ddb1cc597645e4c5db.png"><br><br>  Essa restri√ß√£o pode ser necess√°ria, por exemplo, para proteger contra a conex√£o de uma rede local inteira a uma interface de switch de provedor.  Vale mencionar aqui que se trata de uma conex√£o dial-up, porque ao conectar usando um roteador no lado do cliente, o T2600G-28SQ aprender√° apenas um endere√ßo - este √© o MAC pertencente √† porta WAN do roteador cliente. <br><br>  H√° toda uma classe de ataques direcionados contra a tabela de comuta√ß√£o.  Pode haver excesso de tabela e falsifica√ß√£o de MAC.  A op√ß√£o de seguran√ßa da porta permitir√° que voc√™ se proteja de estouros de tabela de ponte e de ataques cujo objetivo √© treinar intencionalmente o comutador, envenenando sua tabela de ponte. <br><br>  N√£o se pode deixar de mencionar simplesmente a falha do equipamento do cliente.  N√£o √© incomum que uma placa de rede com defeito de um computador ou roteador crie um fluxo de quadros com endere√ßos de remetente e destinat√°rio completamente arbitr√°rios.  Esse fluxo pode esgotar facilmente o CAM. <br><br>  Outra maneira de limitar o n√∫mero de entradas usadas na tabela de bridge √© a ferramenta MAC VLAN Security, com a qual o administrador pode especificar o n√∫mero m√°ximo de entradas para uma rede virtual espec√≠fica. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6d7/30b/239/6d730b23964ac766cf0a4e79cdf06afc.png"><br><br>  Al√©m de gerenciar entradas din√¢micas na tabela de comuta√ß√£o, o administrador tamb√©m pode criar entradas est√°ticas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bd7/814/9d1/bd78149d1851cc88356694ba6906a2c0.png"><br><br>  A tabela de ponte m√°xima do modelo T2600G-28SQ permite acomodar at√© 16 mil entradas. <br>  Outra op√ß√£o projetada para filtrar a transmiss√£o do tr√°fego do usu√°rio √© a fun√ß√£o Isolamento de porta, que permite especificar explicitamente em qual dire√ß√£o o encaminhamento √© permitido. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/799/763/658/7997636587fb0f2ce0809d5a96057bca.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/047/19c/14a/04719c14a1c988ef40b3f934508d0e28.png"><br><h3>  Seguran√ßa - IMPB </h3><br>  Na vastid√£o de nossa vasta p√°tria, a abordagem das operadoras de telecomunica√ß√µes para garantir a seguran√ßa na rede varia de desconsidera√ß√£o total ao uso m√°ximo poss√≠vel de todas as op√ß√µes suportadas pelo equipamento. <br><br>  As fun√ß√µes IPv4 IMPB (IP-MAC-Port Binding) e IPv6 IMPB permitem que voc√™ se proteja de toda uma gama de ataques relacionados √† substitui√ß√£o de endere√ßos IP e MAC por assinantes, vinculando endere√ßos IP e MAC do equipamento cliente √† interface do switch do provedor.  Essa liga√ß√£o pode ser feita manualmente ou usando as fun√ß√µes ARP Scanning e DHCP Snooping. <br><br><div class="spoiler">  <b class="spoiler_title">Configura√ß√µes b√°sicas do IMPB</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/9a8/329/478/9a83294787cc7dbdb2bc3bf2a69edad4.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/50d/b73/7fc/50db737fc49b9712b7a2917a70f00d54.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f42/231/bca/f42231bca1a4eed40d25f1fb56b7df88.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f5f/b84/d11/f5fb84d11af8fed2617a9d0640ee6a7e.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/5cf/9d9/b79/5cf9d9b79407530dd8eaabad60387f89.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/6e8/053/6b7/6e80536b78bd0ad608b3e72b8468d54e.png"><br></div></div><br><br>  Para ser justo, deve-se dizer que uma fun√ß√£o especial pode ser usada para proteger o protocolo DHCP - Filtro DHCP. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/641/dba/94c/641dba94c8ec05a41321e5d789408a05.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/089/389/ad6/089389ad6a882663d2ad42839197f5c4.png"><br><br>  Usando esta fun√ß√£o, o administrador da rede pode especificar manualmente as interfaces √†s quais esses servidores DHCP est√£o conectados.  Portanto, servidores DHCP falsos n√£o podem se envolver no processo de negocia√ß√£o de par√¢metros IP. <br><br><h3>  Seguran√ßa - DoS Defend </h3><br>  Esse modelo permite proteger os usu√°rios de v√°rios dos ataques de DoS mais famosos e comuns. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a1/40d/2c7/1a140d2c7f8b15784589a5ea17329a5b.png"><br><br>  A maioria desses ataques n√£o √© nada assustadora para dispositivos com sistemas operacionais modernos, mas at√© agora podem existir aqueles em nossas redes para as quais a atualiza√ß√£o de software mais recente foi feita h√° muitos anos. <br><br><h3>  Suporte DHCP </h3><br>  O comutador TP-Link T2600G-28SQ pode atuar como um servidor ou retransmiss√£o DHCP e executar uma variedade de filtragem de mensagens DHCP se outro dispositivo atuar como servidor. <br><br>  A maneira mais f√°cil de fornecer aos usu√°rios os par√¢metros IP necess√°rios para o trabalho √© usar o servidor DHCP incorporado ao comutador.  Os par√¢metros b√°sicos com sua ajuda j√° podem ser fornecidos aos assinantes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5bc/f4a/0e3/5bcf4a0e39a212cef4b688bff62c826d.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/59a/9ca/6f6/59a9ca6f6fab4cf78d335a6693f41f4a.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c54/b92/75e/c54b9275ee0a39034e3c5bc6bd42c07b.png"><br><br>  Conectamos nosso roteador Archer C6 SOHO a uma das interfaces do switch e garantimos que o dispositivo cliente recebesse o endere√ßo com sucesso. <br><br><div class="spoiler">  <b class="spoiler_title">Parece que isso</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/467/a9f/aa2/467a9faa2b3d3c0baf27625d0daa1c0d.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ff/013/ff5/9ff013ff59ac0a28e004e82488d31e72.png"><br></div></div><br>  O servidor DHCP embutido no switch talvez n√£o seja a solu√ß√£o mais escal√°vel e flex√≠vel: n√£o h√° suporte para op√ß√µes fora do padr√£o, n√£o h√° conex√£o com o IPAM.  Se o operador precisar de mais controle sobre o processo de aloca√ß√£o de endere√ßos IP, ser√° utilizado um servidor DHCP dedicado. <br><br>  O T2600G-28SQ permite que cada sub-rede do usu√°rio especifique um servidor DHCP dedicado separado para o qual as mensagens do protocolo em discuss√£o ser√£o redirecionadas.  A sub-rede √© selecionada especificando a interface L3 apropriada: VLAN (SVI), porta roteada ou canal de porta. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/042/88c/38f/04288c38fe23c1d2b4b83aa538bc0508.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/1e5/3d3/8f7/1e53d38f7be6793fdc35b716e4bfc4b8.png"><br><br>  Para verificar o funcionamento do rel√©, configuramos um roteador separado de outro fornecedor para funcionar como um servidor DHCP, cujas configura√ß√µes s√£o apresentadas abaixo. <br><br><pre><code class="plaintext hljs">R1#sho run | s pool ip dhcp pool test  network 192.168.0.0 255.255.255.0  default-router 192.168.0.1  dns-server 8.8.8.8</code> </pre> <br>  O roteador cliente novamente recebeu com √™xito o endere√ßo IP. <br><br><pre> <code class="plaintext hljs">R1#sho ip dhcp binding Bindings from all pools not associated with VRF: IP address     Client-ID/   Lease expiration Type                    Hardware address/                    User name 192.168.0.2     010c.8063.f0c2.6a   May 24 2019 05:07 PM Automatic</code> </pre> <br>  Sob o spoiler - o conte√∫do do pacote interceptado entre o switch e o servidor DHCP dedicado. <br><br><div class="spoiler">  <b class="spoiler_title">Conte√∫do da embalagem</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/819/0c5/995/8190c599520d6db8843a43b2258c78ea.png"></div></div><br>  Deve-se notar a disponibilidade do suporte da op√ß√£o 82 do comutador.  Quando ativado, o switch adicionar√° informa√ß√µes sobre a interface do usu√°rio da qual a mensagem DHCP Discover foi recebida.  Al√©m disso, o modelo T2600G-28SQ permite configurar uma pol√≠tica para o processamento de informa√ß√µes adicionais ao inserir a op√ß√£o n¬∫ 82.  A presen√ßa de suporte para esta op√ß√£o pode ser √∫til em uma situa√ß√£o em que o assinante precisa emitir o mesmo endere√ßo IP, independentemente de qual identificador o cliente (ID do cliente) relata sobre si mesmo. <br>  A figura abaixo mostra a mensagem DHCP Discover (retransmitida) com a op√ß√£o 82 adicionada. <br><br><div class="spoiler">  <b class="spoiler_title">Mensagem com a op√ß√£o n¬∫ 82</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/fbc/b2e/926/fbcb2e926cf427de05d6cb3fe82add7f.png"></div></div><br>  Obviamente, a op√ß√£o 82 pode ser controlada sem a configura√ß√£o de um rel√© DHCP completo; as configura√ß√µes correspondentes s√£o apresentadas no subitem "Rel√© DHCP L2". <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f38/4f8/788/f384f8788b409c52e91e052058b2ba94.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/38f/c33/5fa/38fc335fa397f7cbf11835f8b1224a2b.png"><br><br>  E agora vamos alterar as configura√ß√µes do servidor DHCP para demonstrar a opera√ß√£o da op√ß√£o n¬∫ 82. <br><br><pre> <code class="plaintext hljs">R1#sho run | s dhcp ip dhcp pool test network 192.168.0.0 255.255.255.0 default-router 192.168.0.1 dns-server 8.8.8.8 class option82_test  address range 192.168.0.222 192.168.0.222 ip dhcp class option82_test relay agent information      relay-information hex 010e010c74702d6c696e6b5f746573740208000668ff7b66f675 R1#sho ip dhcp binding Bindings from all pools not associated with VRF: IP address     Client-ID/   Lease expiration Type                    Hardware address/                    User name 192.168.0.222    010c.8063.f0c2.6a   May 24 2019 05:33 PM Automatic</code> </pre> <br><br><div class="spoiler">  <b class="spoiler_title">Assim</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/532/650/697/532650697e80b46565cc5b596b056031.png"></div></div><br>  A fun√ß√£o de retransmiss√£o da interface DHCP ser√° √∫til em uma situa√ß√£o em que o switch n√£o apenas tenha uma interface L3 conectada a uma rede espec√≠fica, mas tamb√©m essa interface tenha um endere√ßo IP.  Se n√£o houver endere√ßo nessa interface, a fun√ß√£o de retransmiss√£o de VLAN DHCP ser√° resgatada.  As informa√ß√µes sobre a sub-rede, neste caso, s√£o obtidas da interface padr√£o, ou seja, os espa√ßos de endere√ßo em v√°rias redes virtuais ser√£o os mesmos (sobreposi√ß√£o). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/86f/d4a/54a/86fd4a54adcbbd79896ff5031f0bd253.png"><br><br>  Freq√ºentemente, as operadoras tamb√©m precisam proteger os assinantes da inclus√£o err√¥nea ou mal-intencionada de um servidor DHCP no equipamento do cliente.  Decidimos discutir essa funcionalidade em uma das se√ß√µes dedicadas a problemas de seguran√ßa. <br><br><h3>  IEEE 802.1X </h3><br>  Uma maneira de autenticar usu√°rios na rede √© usar o protocolo IEEE 802.1X.  A popularidade desse protocolo nas redes de operadoras de telecomunica√ß√µes na R√∫ssia j√° est√° em decl√≠nio; ainda √© usado principalmente nas redes locais de grandes empresas para autenticar usu√°rios internos de uma organiza√ß√£o.  O comutador T2600G-28SQ tem suporte para 802.1X; portanto, se necess√°rio, o provedor pode us√°-lo facilmente. <br><br>  Para que o protocolo IEEE 802.1X funcione, s√£o necess√°rios tr√™s participantes: equipamento cliente (suplicante), comutador de acesso ao provedor (autenticador) e servidor de autentica√ß√£o (geralmente um servidor RADIUS). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e7f/e71/f55/e7fe71f55de55dd783ceafd8fb3e9a72.png"><br><br>  A configura√ß√£o b√°sica do lado do operador √© extremamente simples.  Voc√™ s√≥ precisa especificar o endere√ßo IP do servidor RADIUS usado, no qual o banco de dados do usu√°rio ser√° armazenado, bem como selecionar as interfaces para as quais a autentica√ß√£o √© necess√°ria. <br><br><div class="spoiler">  <b class="spoiler_title">Configura√ß√£o b√°sica do 802.1X</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/af3/c21/9ad/af3c219ad24f3e165b21fd1cee325040.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/5d8/b50/6bb/5d8b506bb7838fe18bb47b60da27741c.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/359/a60/c14/359a60c14643bd58c9f72a9b799ec23f.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/6c3/37c/029/6c337c029602f0a049f2bc39165e7317.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/3d9/38e/b8e/3d938eb8ea09417511a09df25da1b6ee.png"><br></div></div><br>  O lado do cliente tamb√©m requer um pequeno ajuste.  Todos os sistemas operacionais modernos j√° cont√™m o software necess√°rio.  Mas, se necess√°rio, voc√™ pode instalar e usar o TP-Link 802.1x Client - um aplicativo que permite a autentica√ß√£o do cliente na rede. <br><br>  Ao conectar um PC de usu√°rio diretamente √† rede do provedor, as configura√ß√µes de autentica√ß√£o devem ser ativadas para a placa de rede usada para conex√£o. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/33d/79b/8b6/33d79b8b69f30fc185bf0df809aca139.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/834/6a8/f68/8346a8f68aebf5071a450f9537132252.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/cae/c05/edd/caec05eddc5fdc71a1393dbbc9f824a3.png"><br><br>  No entanto, atualmente, a rede da operadora geralmente est√° conectada n√£o diretamente ao computador do usu√°rio, mas a algum roteador SOHO, o que garante o funcionamento da rede local do assinante (segmentos com e sem fio).  Nesse caso, todas as configura√ß√µes do protocolo 802.1X devem ser realizadas diretamente no roteador. <br><br><img src="https://habrastorage.org/webt/pn/tx/ni/pntxni9r8upees2yny2auonha6s.jpeg"><br><br>  Parece-nos que nas redes de operadoras esse m√©todo de autentica√ß√£o √© esquecido sem reservas.  Sim, a liga√ß√£o estrita do assinante √† porta do switch pode ser uma solu√ß√£o mais simples em termos de configura√ß√µes do equipamento do usu√°rio.  Mas se o uso de login e senha for necess√°rio, o 802.1X n√£o ser√° um protocolo t√£o pesado comparado √†s conex√µes usadas baseadas nos t√∫neis PPTP / L2TP / PPPoE. <br><br><h3>  Inser√ß√£o de ID PPPoE </h3><br>  Muitos usu√°rios, n√£o apenas em nosso pa√≠s, mas em todo o mundo, ainda preferem usar senhas extremamente simples.  E casos de roubo de identidade, infelizmente, n√£o s√£o incomuns.  Se o operador usar o protocolo PPPoE para autentica√ß√£o do usu√°rio em sua rede, o comutador TP-Link T2600G-28SQ ajudar√° a resolver o problema associado ao vazamento de credenciais.  Isso √© poss√≠vel adicionando um r√≥tulo especial √† mensagem do PPPoE Active Discovery.  Assim, o provedor pode autenticar o assinante n√£o apenas por login e senha, mas tamb√©m por dados adicionais.  Esses dados adicionais incluem o endere√ßo MAC do dispositivo cliente, bem como a interface do comutador ao qual est√° conectado. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ff8/8d5/d43/ff88d5d4337ef69fe658a26a128307c5.png"><br><br>  Algumas operadoras, em princ√≠pio, desejam proibir o assinante (um par de nome de usu√°rio e senha) da capacidade de navegar na rede.  A fun√ß√£o de inser√ß√£o de ID PPPoE tamb√©m ajudar√° neste caso. <br><br><h3>  IGMP </h3><br>  O IGMP (Internet Group Management Protocol) existe h√° d√©cadas.  Sua popularidade √© compreens√≠vel e f√°cil de explicar.  Mas dois aspectos est√£o envolvidos na intera√ß√£o IGMP: o PC do usu√°rio (ou qualquer outro dispositivo, por exemplo, STB) e o roteador IP que atende a um segmento de rede espec√≠fico.  Os switches n√£o participam dessa troca de forma alguma.  √â verdade que a √∫ltima afirma√ß√£o n√£o √© totalmente verdadeira.  Ou nas redes modernas n√£o √© de todo verdade.  O suporte ao switch IGMP √© necess√°rio para otimizar o encaminhamento do tr√°fego multicast.  Escutando o tr√°fego do usu√°rio, o switch detecta mensagens de Relat√≥rio IGMP nele, com a ajuda da qual determina as portas para o envio de tr√°fego multicast.  A op√ß√£o descrita √© chamada IGMP Snooping. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c62/eb6/6e5/c62eb66e52cbaedefb02958bb6fbd4f3.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/a68/24e/abc/a6824eabce3b3d10dc377f87b153dc02.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/a58/898/969/a588989694c57f1ce7563e50c40ca73a.png"><br><br>  O suporte ao IGMP pode ser usado n√£o apenas para otimizar o tr√°fego em si, mas tamb√©m para determinar os assinantes aos quais um determinado servi√ßo pode ser fornecido, por exemplo, IPTV.  Voc√™ pode atingir a meta desejada ajustando manualmente os par√¢metros de filtragem ou usando a autentica√ß√£o. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c3/9e9/425/7c39e9425ac44bfffd8b00c81dbd0cc4.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/df0/a8d/627/df0a8d6279702ddd686282b9b2c30ebd.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/de3/d7c/062/de3d7c0628fb0bdfc4962dbb630e57b4.png"><br><br>  O suporte ao tr√°fego de grupo nos comutadores TP-Link √© implementado com bastante flexibilidade.  Assim, por exemplo, todos os par√¢metros podem ser definidos para cada rede virtual individualmente. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/de6/715/24b/de671524b34153cf9392ee7fa43c152d.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c4a/60d/7c9/c4a60d7c95daf645cc567648cccb6c23.png"><br><br>  Se v√°rias sub-redes com destinat√°rios de tr√°fego de grupo estiverem conectadas a uma interface do roteador, esse roteador ser√° for√ßado a enviar v√°rias c√≥pias de pacotes por essa interface (uma para cada rede virtual). <br>  Nesse caso, √© poss√≠vel otimizar o procedimento para enviar tr√°fego de grupo usando a tecnologia MVR - Registro de VLAN Multicast. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/489/f37/43d/489f3743d00def0b27b1a68e5407d865.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/413/e20/ad9/413e20ad93a7ab228ea94930ea450711.png"><br><br>  A ess√™ncia da solu√ß√£o √© que uma rede virtual √© criada, unindo todos os destinat√°rios.  No entanto, essa rede virtual √© usada apenas para tr√°fego de grupo.  Essa abordagem permite que o roteador envie apenas uma c√≥pia do tr√°fego multicast atrav√©s da interface. <br><br><h3>  DDM, OAM e DLDP </h3><br>  DDM - Monitoramento Digital de Diagn√≥stico.  Durante a opera√ß√£o dos m√≥dulos √≥pticos, muitas vezes √© necess√°rio monitorar o status do pr√≥prio m√≥dulo, bem como o canal √≥ptico ao qual est√° conectado.  A fun√ß√£o DDM ajudar√° a lidar com esta tarefa.  Com sua ajuda, os engenheiros do operador poder√£o monitorar a temperatura de cada m√≥dulo que suporta essa funcionalidade, a tens√£o e a corrente nele, bem como a pot√™ncia dos sinais √≥pticos enviados e recebidos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/785/8c2/3c4/7858c23c475c97a5fa92a16481c3358e.png"><br><br>  A defini√ß√£o de n√≠veis de limite para os par√¢metros descritos acima permitir√° que um evento seja gerado se eles ultrapassarem o intervalo permitido. <br><br><div class="spoiler">  <b class="spoiler_title">Definindo limites do DDM</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/271/ce1/79b/271ce179b47a5741bc258825e6284e30.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/35d/6b4/24f/35d6b424f0e39f286b6f28da419534c4.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/fa6/042/bde/fa6042bde45eb28b230346f0dcd32c15.png"><br></div></div><br>  Naturalmente, o administrador pode visualizar os valores atuais dos par√¢metros especificados. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7b9/c67/8be/7b9c678bee6032fb6a82c52409738dda.png"><br><br>  O comutador TP-Link T2600G-28SQ possui um sistema de refrigera√ß√£o de ar ativo.  Al√©m disso, nunca encontramos superaquecimento de m√≥dulos SFP em nossos comutadores relacionados √† densidade da porta.  No entanto, se for puramente te√≥rico permitir essa possibilidade (por exemplo, devido a algum problema no m√≥dulo SFP), com a ajuda do DDM, o administrador ser√° imediatamente notificado de uma situa√ß√£o potencialmente perigosa.  O perigo aqui, obviamente, n√£o √© para o comutador em si, mas para o diodo / laser dentro do SFP, pois com o aumento da temperatura, a pot√™ncia do sinal √≥ptico emitido pode se degradar, o que levar√° a uma diminui√ß√£o no or√ßamento √≥ptico. <br><br>  Vale a pena notar aqui que os switches TP-Link n√£o possuem uma "fun√ß√£o" de bloqueio de fornecedor, ou seja, qualquer m√≥dulo SFP compat√≠vel √© suportado, o que, √© claro, ser√° muito conveniente para os administradores de rede. <br><br>  OAM - Opera√ß√£o, Administra√ß√£o e Manuten√ß√£o (IEEE 802.3ah).  OAM √© o protocolo de segunda camada do modelo OSI para monitorar e solucionar problemas de redes Ethernet.  Usando esse protocolo, o switch pode monitorar o desempenho de uma conex√£o espec√≠fica e erros, gerar alertas para que o administrador da rede possa gerenciar com mais efici√™ncia a rede. <br><br><div class="spoiler">  <b class="spoiler_title">OAM b√°sico</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/8c6/e65/87b/8c6e6587bacdda435f21d3ad6c89efe2.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/e37/212/2de/e372122dedd5321b2a55cba8425da9bb.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/b8e/61a/73b/b8e61a73bc8b73d53d1c37dc9e9dd377.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/601/34d/ab0/60134dab0bb0f37ca4246877cee540e8.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Detalhes da opera√ß√£o do OAM</b> <div class="spoiler_text">  Dois dispositivos vizinhos habilitados para OAM trocam mensagens periodicamente enviando OAMPDUs, que s√£o de tr√™s tipos: Informativo, Notifica√ß√£o de Eventos e Controle de Loopback.  Usando OAMPDUs informativos, os switches vizinhos enviam informa√ß√µes estat√≠sticas entre si, bem como dados definidos pelo administrador.  Esse tipo de mensagem tamb√©m √© usado para manter a conex√£o do OAM.  As mensagens de notifica√ß√£o de eventos s√£o usadas pela fun√ß√£o de monitoramento de conex√£o para notificar a outra parte das falhas que ocorreram.  As mensagens de controle de loopback s√£o usadas para definir um loop na linha. <br><br>  Abaixo, decidimos listar os principais recursos fornecidos pelo protocolo OAM: <br><br><ul><li>  monitoramento ambiental (detec√ß√£o e contagem de quadros mortos), <br></li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/c16/195/671/c16195671d6d0c2f67fb16f4919c870f.png"><br><ul><li>  RFI - Indica√ß√£o de falha remota (envio de notifica√ß√£o de falha do canal), <br></li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/06f/8b7/6b3/06f8b76b3ff83128a0bdb48cfe4766dd.png"><br><ul><li>  Loopback Remoto (teste de canal para medir atraso, varia√ß√£o de atraso (tremula√ß√£o), n√∫mero de quadros perdidos). <br></li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/d03/ee8/884/d03ee8884d3d90b863561e13d8166916.png"><br></div></div><br>  Outra op√ß√£o que √© procurada nos comutadores √≥pticos √© a capacidade de detectar problemas no canal de comunica√ß√£o, tornando o canal simplex, ou seja, os dados podem ser enviados apenas em uma dire√ß√£o.  Nossos comutadores usam DLDP - Device Link Detection Protocol para a detec√ß√£o de links unidirecionais.  Para ser honesto, vale a pena notar que o protocolo DLDP √© suportado nas interfaces √≥ptica e de cobre, no entanto, em nossa opini√£o, ser√° o mais popular ao usar linhas de fibra √≥ptica. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3aa/d4b/55b/3aad4b55bd377a6a9e7748fe14f44106.png"><br><br>  Se um canal unidirecional for detectado, o switch poder√° desligar automaticamente a interface problem√°tica, o que levar√° √† reconstru√ß√£o da √°rvore STP e ao uso de canais de comunica√ß√£o redundantes. <br><br>  Em nosso arsenal, existem m√≥dulos SFP que recebem e transmitem um sinal atrav√©s de uma √∫nica fibra.  Eles trabalham exclusivamente em pares e usam um sinal √≥ptico em diferentes comprimentos de onda para transmiss√£o dentro do par.  Um exemplo √© um par de TL-SM321A e TL-SM321B.  Ao usar esses tipos de m√≥dulos, os danos a uma fibra levar√£o √† completa inoperabilidade de todo o canal √≥ptico.  No entanto, o protocolo DLDP tamb√©m estar√° em demanda nesses canais, pois, embora isso ocorra muito raramente, o canal pode ter diferentes caracter√≠sticas de transpar√™ncia para diferentes comprimentos de onda.  Um problema mais prov√°vel √© a transpar√™ncia diferente do canal, dependendo da dire√ß√£o da propaga√ß√£o da luz.  Um rastreamento pode ajudar a detectar esses problemas, mas essa √© uma hist√≥ria completamente diferente. <br><br><h3>  LLDP </h3><br>  Nas grandes redes corporativas ou de operadores, periodicamente h√° problemas com obsolesc√™ncia da documenta√ß√£o da rede ou imprecis√µes em sua prepara√ß√£o.  O administrador da rede pode encontrar uma situa√ß√£o em que √© necess√°rio descobrir qual equipamento do operador est√° conectado a uma interface de switch espec√≠fica.  O LLDP - IEEE 802.1AB (Protocolo de descoberta de camada de link) ser√° resgatado. <br><br><div class="spoiler">  <b class="spoiler_title">Par√¢metros de desempenho do LLDP</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/0e4/ce3/19b/0e4ce319b670d5d8e812ad0e50b5903c.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/575/745/4a4/5757454a492a1935350414650436edd9.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/ee5/cf2/347/ee5cf2347eb7ff6de5828f71aaaf59d1.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/74c/ad9/060/74cad9060abb53d19fbc42d3c4e94eb9.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/b30/bb4/70a/b30bb470a4a363115a607b45a963c820.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/10e/988/5df/10e9885df902877ffb28874b4bdc543d.png"><br></div></div><br>  Nossos switches suportam o protocolo LLDP, n√£o apenas para descobrir switches vizinhos ou outros dispositivos de rede, mas tamb√©m para determinar seus recursos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b18/49a/23f/b1849a23f7bbbce9ebd312011ea52055.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d24/527/3dc/d245273dc43283f8fa8060f2a5af9b21.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/fad/e39/649/fade396498f7c9da3b81a635151eddb6.png"><br><br>  Os irm√£os de cobre do nosso switch podem usar o LLDP-MED para simplificar o processo de conex√£o de telefones IP.  Al√©m disso, com esta op√ß√£o, o comutador PoE pode coordenar as configura√ß√µes de energia com o dispositivo energizado.  J√° falamos sobre isso em detalhes em um de nossos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">materiais anteriores</a> . <br><br><h3>  SDM e excesso de assinatura </h3><br>  Quase todos os switches modernos lidam com quadros e pacotes passantes sem usar um processador central.  O processamento (c√°lculo da soma de verifica√ß√£o, aplica√ß√£o de listas de acesso e outras verifica√ß√µes de seguran√ßa, bem como a decis√£o sobre comuta√ß√£o / roteamento) √© realizado usando microcircuitos especializados, que permitem atingir altas velocidades de transmiss√£o do tr√°fego do usu√°rio.  A op√ß√£o em discuss√£o permite processar o tr√°fego a uma velocidade m√©dia.  Isso significa que o desempenho do dispositivo √© suficiente para enviar dados nas velocidades mais altas poss√≠veis de todas as portas simultaneamente.  O modelo T2600G-28SQ possui 24 portas de downlink (para usu√°rios) operando em velocidades de 1 Gbit / s, al√©m de 4 portas de uplink (em dire√ß√£o ao n√∫cleo da rede) de 10 Gbit / s.  Ao mesmo tempo, o desempenho de barramento cruzado do switch √© de 128 Gb / s, o suficiente para lidar com a quantidade m√°xima de tr√°fego de entrada. <br><br>  Para ser justo, deve-se notar que o desempenho da matriz de comuta√ß√£o √© de 95,2 milh√µes de pacotes por segundo.  Ou seja, ao usar os quadros m√≠nimos poss√≠veis com um comprimento de apenas 64 bytes, o desempenho total do dispositivo ser√° de 97,5 Gbit / s.  No entanto, esse perfil de tr√°fego √© quase inacredit√°vel para redes de operadoras de telecomunica√ß√µes. <br><br><div class="spoiler">  <b class="spoiler_title">O que √© excesso de assinatura?</b> <div class="spoiler_text">  Outra quest√£o importante √© a propor√ß√£o das velocidades dos canais ascendentes e descendentes (assinatura excessiva).  Aqui, obviamente, tudo depende da topologia.  Se o administrador usar todas as quatro interfaces 10 GE para conectar-se ao n√∫cleo da rede e combin√°-las usando a tecnologia LAG (Link Aggregation Group) ou Port-Channel, a velocidade estatisticamente obtida em dire√ß√£o ao n√∫cleo ser√° de 40 Gb / s, o que ser√° mais que suficiente para satisfazer as necessidades de todos os assinantes conectados.  Al√©m disso, n√£o √© necess√°rio que todos os quatro links upstream estejam conectados ao mesmo dispositivo f√≠sico.  A conex√£o pode ser feita com a pilha de comutadores ou com dois dispositivos combinados em um cluster (usando a tecnologia vPC ou algo semelhante).  N√£o h√° reinscri√ß√£o neste caso. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/47b/213/84d/47b21384de6198a7a933977839d26f59.png"><br>  √â poss√≠vel usar todos os quatro canais upstream ao mesmo tempo, n√£o apenas combinando-os usando o LAG.  Um efeito semelhante pode ser alcan√ßado atrav√©s da configura√ß√£o adequada do MSTP, no entanto, essa √© uma hist√≥ria completamente diferente. <br><br>  O segundo m√©todo de conex√£o L2 comum √© usar dois LAGs independentes (um para cada comutador de agrega√ß√£o).  Nesse caso, provavelmente, um dos links virtuais ser√° bloqueado pelo protocolo STP (ao usar STP ou RSTP).  A reinscri√ß√£o ser√° 5: 6. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/660/246/dc2/660246dc20bfeb5562cc5263ee09acde.png"><br><br>  Uma situa√ß√£o mais rara, mas ainda bastante prov√°vel: o T2600G-28SQ √© conectado por canais independentes a um ou mais switches de n√≠vel superior.  STP / RSTP deixar√° apenas um desses links em um estado desbloqueado.  A reinscri√ß√£o ser√° 5:12. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/16c/cb2/cf6/16ccb2cf6515e91deff79bd7df72a39d.png"><br><br>  Tarefa com um asterisco: calcule a assinatura em excesso para as situa√ß√µes descritas na se√ß√£o STP, onde examinamos um exemplo de topologia quando dois comutadores de acesso s√£o conectados ao mesmo dispositivo de agrega√ß√£o e interconectados. <br></div></div><br>  Microcircuitos program√°veis, com a ajuda de uma velocidade de transfer√™ncia t√£o alta, s√£o um recurso bastante caro, portanto, tentamos otimizar seu uso devido √† correta distribui√ß√£o de recursos entre v√°rias fun√ß√µes.  A distribui√ß√£o √© respons√°vel pelo SDM - Switch Database Management. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/284/399/e98/284399e986a7e96bd1d1213e2e9af2cf.png"><br><br>  A distribui√ß√£o √© feita usando o perfil SDM.  Os tr√™s perfis listados abaixo est√£o atualmente dispon√≠veis para uso. <br><br><ul><li>  O padr√£o oferece uma solu√ß√£o equilibrada para o uso de listas de acesso MAC e IP, bem como registros de detec√ß√£o de ARP. <br></li><li>  O EnterpriseV4 maximiza os recursos dispon√≠veis para uso pelas listas de acesso MAC e IP. <br></li><li>  O EnterpriseV6 aloca parte dos recursos para uso pelas listas de acesso IPv6. <br></li></ul><br>  Para aplicar o novo perfil, √© necess√°ria uma reinicializa√ß√£o do comutador. <br><br><h2>  Conclus√£o </h2><br>  De acordo com o posicionamento inicial, esse switch √© mais adequado para as operadoras de telecomunica√ß√µes que enfrentam a tarefa de fornecer acesso √† rede a longas dist√¢ncias.  O dispositivo pode ser usado tanto no n√≠vel de acesso, por exemplo, em vilas de chal√©s e casas da cidade, quanto na agrega√ß√£o de canais provenientes de comutadores de acesso localizados em pr√©dios de apartamentos;  ou seja, sempre que forem necess√°rias conex√µes remotas a objetos.  Ao usar canais de comunica√ß√£o √≥ptica, o assinante conectado pode estar localizado a uma dist√¢ncia de v√°rios quil√¥metros. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a20/399/84a/a2039984ab7377c33aaa14189f7c739c.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/4fa/e78/08f/4fae7808fe98d542c36ae18d413377ca.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/80e/aea/8b3/80eaea8b3a9ed5421e447330f9eff022.png"><br><br>  No lado do cliente, os links √≥pticos podem ser terminados em pequenos comutadores com interfaces √≥pticas ou em conversores de m√≠dia. <br><br>  Um grande n√∫mero de protocolos e op√ß√µes suportados permitir√° o uso do T2600G-28SQ na rede Ethernet do operador com qualquer topologia e qualquer conjunto de tecnologias e servi√ßos fornecidos.      -   .        ,   T2600G-28SQ  : RJ-45  micro-USB.             . ,    -         . <br><br>       ,     ,    10 GE,           . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt460421/">https://habr.com/ru/post/pt460421/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt460409/index.html">Arduino e teclados (guia completo)</a></li>
<li><a href="../pt460411/index.html">Mad Converter GIF'ok para stickers animados para Telegram</a></li>
<li><a href="../pt460413/index.html">7 sites e aplicativos √∫teis para aprender ingl√™s</a></li>
<li><a href="../pt460415/index.html">Apple Watch 4 (44 mm, 2019) vs Pebble Steel Classic (2014)</a></li>
<li><a href="../pt460419/index.html">Recupera√ß√£o de calor de gases de combust√£o: ambientalmente amig√°vel</a></li>
<li><a href="../pt460423/index.html">WAL no PostgreSQL: 3. Ponto de Verifica√ß√£o</a></li>
<li><a href="../pt460425/index.html">Frio infernal, levita√ß√£o e plasma: passado, presente e futuro da supercondutividade</a></li>
<li><a href="../pt460431/index.html">Criando um pipeline de teste automatizado no Azure DevOps</a></li>
<li><a href="../pt460433/index.html">Riscos e amea√ßas na Internet das coisas</a></li>
<li><a href="../pt460435/index.html">Petty little joy # 8: prazeres mesquinhos por trabalhar com o banco de dados</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>