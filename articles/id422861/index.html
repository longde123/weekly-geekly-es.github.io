<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç§ ‚ûø ü§±üèø Tentang membangun JDK 8 di Ubuntu, kualitas kode Hotspot, dan mengapa semuanya gagal di C ++ üíè üî° üîÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya ingin tidur hari ini, tetapi sekali lagi gagal. Sebuah pesan muncul di Telegram bahwa seseorang tidak akan ke Jawa ... dan kami bangun hanya sete...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tentang membangun JDK 8 di Ubuntu, kualitas kode Hotspot, dan mengapa semuanya gagal di C ++</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/422861/"><p>  Saya ingin tidur hari ini, tetapi sekali lagi gagal.  Sebuah pesan muncul di Telegram bahwa seseorang tidak akan ke Jawa ... dan kami bangun hanya setelah beberapa jam, lelah dan bahagia. </p><br><img src="https://habrastorage.org/webt/ti/ov/lf/tiovlf2wctfucdlsql2-avqmkwe.png"><br><br>  Siapa yang dapat menggunakan pos ini?  Ya, mungkin bagi siapa pun kecuali mereka yang juga mengumpulkan JDK8 atau hanya suka membaca kengerian mimpi buruk.  Secara umum, saya memperingatkan Anda, tutup artikel ini dengan segera. <br><p>  Tiga masalah: </p><br><ul><li>  Tidak mau ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">level satu</a> ) <br>  Bagian yang sangat membosankan untuk dilewati.  Hanya diperlukan bagi mereka yang ingin sepenuhnya memulihkan sejarah peristiwa; </li><li>  Tidak mau ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">level dua</a> ) <br>  Ini lebih menarik karena ada beberapa kesalahan khas, necromancy, necrophilia, yang BSD lebih baik daripada GNU / Linux dan mengapa perlu beralih ke versi baru JDK. </li><li>  Bahkan jika itu terjadi, ia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jatuh ke kerak bumi</a> <br>  Lebih menarik.  Yahuuu, JVM jatuh ke kerak, ayo tendang! </li></ul><br><p>  Di bawah kucing menunjukkan solusi terperinci untuk masalah, dengan pemikiran sisi berbeda tentang kehidupan. </p><br><p>  Akan ada banyak C ++, tidak akan ada kode Java sama sekali.  Setiap javist pada akhirnya mulai menulis hanya dalam C ++ ... </p><a name="habracut"></a><br><h1 id="ne-sobiraetsya">  Tidak akan </h1><br><p>  Siapa pun yang membangun Java setidaknya sekali tahu bahwa itu terlihat seperti ini: </p><br><pre><code class="bash hljs">hg <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> http://hg.openjdk.java.net/jdk8u/jdk8u <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> jdk8u sh ./get_source.sh sh ./configure \ --with-debug-level=fastdebug \ --with-target-bits=64 \ --with-native-debug-symbols=internal \ --with-boot-jdk=/home/me/opt/jdk1.8.0_161 make images</code> </pre> <br><p>  (Semua pengguna saya hanya disebut "saya", sehingga Anda dapat memberikan mesin virtual kepada siapa saja kapan saja dan tidak membuat penolakan dari menggunakan nama pengguna Anda sendiri) </p><br><p>  Masalahnya, tentu saja, ini tidak berhasil.  Dan dengan cara yang agak sinis. </p><br><a name="one"></a><br><h2 id="pervyy-uroven-pogruzheniya">  Tingkat penyelaman pertama </h2><br><p>  Mari kita coba jalankan: </p><br><pre> <code class="bash hljs">/home/me/git/jdk8u/hotspot/src/os/linux/vm/os_linux.inline.hpp:127:18: warning: <span class="hljs-string"><span class="hljs-string">'int readdir_r(DIR*, dirent*, dirent**)'</span></span> is deprecated [-Wdeprecated-declarations] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((status = ::readdir_r(dirp, dbuf, &amp;p)) != 0) { ^~~~~~~~~</code> </pre> <br><p>  Pertama, agar Anda mengerti, saya telah menginstal ini: </p><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> g++ -<span class="hljs-literal"><span class="hljs-literal">-version</span></span> g++ (Ubuntu <span class="hljs-number"><span class="hljs-number">7.3</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-literal"><span class="hljs-literal">-16ubuntu3</span></span>) <span class="hljs-number"><span class="hljs-number">7.3</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> Copyright (C) <span class="hljs-number"><span class="hljs-number">2017</span></span> Free Software Foundation, Inc.</code> </pre> <br><p>  Kompiler bukan kesegaran pertama, bukan 8.2, tetapi yang ini juga harus berfungsi. </p><br><p>  Pengembang C ++ suka menguji perangkat lunak hanya pada versi kompiler yang telah mereka instal.  Biasanya keinginan untuk menguji pada platform yang berbeda berakhir di suatu tempat di wilayah perbedaan antara gcc dan dentang dalam arti umum.  Oleh karena itu, pada awalnya cukup normal untuk mengirimkan <code>-Werror</code> ("memperlakukan peringatan sebagai kesalahan") dan kemudian menulis kode yang di semua versi lain akan dianggap sebagai vorings. </p><br><p>  Ini adalah masalah yang diketahui, dan jelas bagaimana menyelesaikannya.  Anda perlu mengatur variabel lingkungan Anda CXX_FLAGS, untuk mengatur tingkat kesalahan yang benar. </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> CXX_FLAGS=-Wno-error=deprecated-declarations -Wno-error-deprecated-declarations</code> </pre> <br><p>  Dan kemudian kita melihat yang indah: </p><br><pre> <code class="hljs powershell">Ignoring CXXFLAGS found <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> environment. Use -<span class="hljs-literal"><span class="hljs-literal">-with</span></span><span class="hljs-literal"><span class="hljs-literal">-extra</span></span><span class="hljs-literal"><span class="hljs-literal">-cxxflags</span></span></code> </pre> <br><p>  Oke, bangun sistem, apa pun yang Anda mau!  Kami ganti configure dengan yang ini: </p><br><pre> <code class="bash hljs">hg <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> http://hg.openjdk.java.net/jdk8u/jdk8u <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> jdk8u sh ./configure \ --with-extra-cflags=<span class="hljs-string"><span class="hljs-string">'-Wno-cpp -Wno-error=deprecated-declarations'</span></span> \ --with-extra-cxxflags=<span class="hljs-string"><span class="hljs-string">'-Wno-cpp -Wno-error=deprecated-declarations'</span></span> \ --with-debug-level=fastdebug \ --with-target-bits=64 \ --with-native-debug-symbols=internal \ --with-boot-jdk=/home/me/opt/jdk1.8.0_161 make images</code> </pre> <br><p>  Dan kesalahannya tetap sama! <br>  Kami beralih ke artileri berat: kode sumber. </p><br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">grep</span></span> -rl <span class="hljs-string"><span class="hljs-string">"Werror"</span></span> .</code> </pre> <br><p>  Sejumlah besar topi yang dibuat secara otomatis jatuh, di antaranya ada sekilas file yang bermakna: </p><br><pre> <code class="hljs go">./common/autoconf/flags.m4 ./hotspot/<span class="hljs-built_in"><span class="hljs-built_in">make</span></span>/bsd/makefiles/gcc.<span class="hljs-built_in"><span class="hljs-built_in">make</span></span> ./hotspot/<span class="hljs-built_in"><span class="hljs-built_in">make</span></span>/solaris/makefiles/gcc.<span class="hljs-built_in"><span class="hljs-built_in">make</span></span> ./hotspot/<span class="hljs-built_in"><span class="hljs-built_in">make</span></span>/aix/makefiles/xlc.<span class="hljs-built_in"><span class="hljs-built_in">make</span></span></code> </pre> <br><p>  Di <code>flags.m4</code> kita dengan mudah menemukan pesan sebelumnya tentang "Mengabaikan CXXFLAGS" dan flag yang lebih matang dengan kode keras <code>CCXX_FLGS</code> (ya, dua huruf C), yang langsung bertindak sebagai ganti <code>CFLAGS</code> dan bukannya <code>XX_FLAGS</code> .  Dengan nyaman!  Dua fakta menarik: </p><br><ul><li>  Bendera ini tidak melewati parameter konfigurasi; </li><li>  Dalam nilai default bermakna dan mencurigakan mirip dengan parameter ini: </li></ul><br><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment"># Setup compiler/platform specific flags to CFLAGS_JDK, # CXXFLAGS_JDK and CCXXFLAGS_JDK (common to C and CXX?) if test "x$TOOLCHAIN_TYPE" = xgcc; then # these options are used for both C and C++ compiles CCXXFLAGS_JDK="$CCXXFLAGS $CCXXFLAGS_JDK -Wall -Wno-parentheses -Wextra -Wno-unused -Wno-unused-parameter -Wformat=2 \ -pipe -D_GNU_SOURCE -D_REENTRANT -D_LARGEFILE64_SOURCE"</span></span></code> </pre> <br><p>  Pertanyaan ini terlihat sangat bagus di komentar - tetapi apa, apakah benderanya umum?  Benar? </p><br><p>  Kami tidak akan memainkan demokrasi dan mengesahkannya secara otoriter di sana <code>-w</code> ("jangan tampilkan kesalahan"): </p><br><pre> <code class="bash hljs"> CCXXFLAGS_JDK=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$CCXXFLAGS</span></span></span><span class="hljs-string"> </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$CCXXFLAGS_JDK</span></span></span><span class="hljs-string"> -w -ffreestanding -fno-builtin -Wno-parentheses -Wno-unused -Wno-unused-parameter -Wformat=2 \</span></span></code> </pre> <br><p>  Dan - bersorak!  - kesalahan pertama yang kami alami.  Dia tidak lagi melaporkan, dan secara umum semuanya baik-baik saja.  Tampaknya. </p><br><a name="two"></a><br><h2 id="vtoroy-uroven-pogruzheniya">  Tingkat penyelaman kedua </h2><br><p>  Tapi sekarang jatuh di tumpukan tempat baru lainnya! </p><br><p>  Ternyata <code>-w</code> kami berfungsi, tetapi tidak diteruskan ke semua bagian perakitan.  Kami dengan cermat membaca makefile dan tidak mengerti bagaimana tepatnya parameter ini dapat diteruskan sama sekali.  Benar-benar lupa tentang dia? </p><br><p>  Mengetahui pertanyaan Google yang benar ("mengapa cxx tidak sampai ke build?!"), Kami dengan cepat sampai ke halaman bug dengan pepatah <strong>"mengkonfigurasi - dengan ekstra-cxxflag tidak memengaruhi hotspot"</strong> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">JDK-8156967</a> ). </p><br><p>  Yang janji akan diperbaiki di JDK 12. Mungkin.  Hebat - parameter build terpenting tidak digunakan dalam perakitan! </p><br><p>  Ide pertama adalah, yah, mari kita menyingsingkan lengan baju kita dan memperbaiki kesalahan! </p><br><h2 id="oshibka-1-xn12">  Kesalahan 1.xn [12] </h2><br><pre> <code class="hljs powershell">dependencies.cpp: <span class="hljs-keyword"><span class="hljs-keyword">In</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">static</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dependencies</span></span></span><span class="hljs-function">::</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write_dependency_to</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(xmlStream*, Dependencies::DepType, GrowableArray&lt;Dependencies::DepArgument&gt;*, Klass*)</span></span></span><span class="hljs-function">': </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dependencies</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cpp</span></span></span><span class="hljs-function">:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">498</span></span></span><span class="hljs-function">:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">6</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-function">: '%</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d</span></span></span><span class="hljs-function">' </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">directive</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writing</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">between</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">1</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">and</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">10</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bytes</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">into</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">region</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">of</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">9</span></span></span><span class="hljs-function"> [-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Werror</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">format-overflow</span></span></span><span class="hljs-function">=] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dependencies</span></span></span><span class="hljs-function">::</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write_dependency_to</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(xmlStream* xtty, ^~~~~~~~~~~~ dependencies.cpp:498:6: note: directive argument in the range [0, 2147483647]</span></span></span></span></code> </pre> <br><p>  Yah, kita mungkin perlu memperbesar wilayah.  Seratus pound, seseorang menghitung buffer dengan mengklik tombol "I'm Lucky!"  di google. </p><br><p>  Tetapi bagaimana Anda memahami berapa banyak yang Anda butuhkan?  Ada jenis penyempurnaan lain di bawah ini: </p><br><pre> <code class="hljs pgsql">stdio2.h:<span class="hljs-number"><span class="hljs-number">34</span></span>:<span class="hljs-number"><span class="hljs-number">43</span></span>: note: <span class="hljs-string"><span class="hljs-string">'__builtin___sprintf_chk'</span></span> output <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> bytes <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> a destination <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> size <span class="hljs-number"><span class="hljs-number">10</span></span> __bos (__s), __fmt, __va_arg_pack ());</code> </pre> <br><p>  Posisi 12 terlihat seperti sesuatu yang berharga, yang sekarang Anda dapat membobol sumber dengan kaki kotor. </p><br><p>  Kami naik ke <code>dependencies.cpp</code> dan mengamati gambar berikut: </p><br><pre> <code class="cpp hljs">DepArgument arg = args-&gt;at(j); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (j == <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arg.is_oop()) { xtty-&gt;object(<span class="hljs-string"><span class="hljs-string">"x"</span></span>, arg.oop_value()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { xtty-&gt;object(<span class="hljs-string"><span class="hljs-string">"x"</span></span>, arg.metadata_value()); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> xn[<span class="hljs-number"><span class="hljs-number">10</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">sprintf</span></span>(xn, <span class="hljs-string"><span class="hljs-string">"x%d"</span></span>, j); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arg.is_oop()) { xtty-&gt;object(xn, arg.oop_value()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { xtty-&gt;object(xn, arg.metadata_value()); } }</code> </pre> <br><p>  Perhatikan garis yang bermasalah: </p><br><pre> <code class="hljs perl">char xn[<span class="hljs-number"><span class="hljs-number">10</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">sprintf</span></span>(xn, <span class="hljs-string"><span class="hljs-string">"x%d"</span></span>, j);</code> </pre> <br><p>  Kami mengubah 10 menjadi 12, memasang kembali dan ... perakitan telah hilang! </p><br><p>  Tetapi apakah saya satu-satunya yang begitu pintar dan memperbaiki bug sepanjang masa?  Tidak diragukan, kami kembali mengarahkan megapatch kami ke Google: <code>char xn[12];</code> </p><br><p>  Dan kita lihat ... ya, itu benar.  Bug <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">JDK-8184309</a> , dilarang oleh Vladimir Ivanov, berisi perbaikan yang persis sama. </p><br><p>  Tetapi intinya adalah bahwa ini hanya diperbaiki di JDK 10 dan nifiga tidak di-backport ke jdk8u.  Ini adalah pertanyaan mengapa versi baru Java diperlukan. </p><br><h2 id="oshibka-2-strcmp">  Kesalahan 2. strcmp </h2><br><pre> <code class="hljs powershell">fprofiler.cpp: <span class="hljs-keyword"><span class="hljs-keyword">In</span></span> member <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ThreadProfiler</span></span></span><span class="hljs-function">::</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vm_update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TickPosition)</span></span></span><span class="hljs-function">': /</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">home</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">me</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">git</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">jdk8ut</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hotspot</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">src</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">share</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vm</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runtime</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fprofiler</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cpp</span></span></span><span class="hljs-function">:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">638</span></span></span><span class="hljs-function">:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">56</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">argument</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">1</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">null</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">where</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">non-null</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">expected</span></span></span><span class="hljs-function"> [-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Werror</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nonnull</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vm_match</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(const char* name)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">const</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> strcmp(name, _name) == <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>  Diajarkan oleh pengalaman pahit sebelumnya, kami segera pergi untuk melihat apa yang ada di tempat ini di JDK 11. Dan ... file ini tidak ada di sana.  Struktur direktori juga telah mengalami beberapa refactoring. </p><br><p>  Tapi Anda tidak bisa pergi begitu saja dari kami! </p><br><p>  Setiap javist adalah ahli nujum kecil dalam jiwanya, dan mungkin bahkan seorang necrophile.  Karenanya, sekarang akan ada KEBUTUHAN BERAKSI! </p><br><p>  Pertama, Anda perlu memohon jiwa orang mati dan mencari tahu kapan dia meninggal: </p><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> hg log -<span class="hljs-literal"><span class="hljs-literal">-template</span></span> <span class="hljs-string"><span class="hljs-string">"File(s) deleted in rev {rev}: {file_dels % '\n {file}'}\n\n"</span></span> <span class="hljs-literal"><span class="hljs-literal">-r</span></span> <span class="hljs-string"><span class="hljs-string">'removes("**/fprofiler.cpp")'</span></span> File(s) deleted <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> rev <span class="hljs-number"><span class="hljs-number">47106</span></span>: hotspot/src/share/vm/runtime/fprofiler.cpp hotspot/src/share/vm/runtime/fprofiler.hpp hotspot/test/runtime/MinimalVM/Xprof.java</code> </pre> <br><p>  Sekarang Anda perlu mencari tahu penyebab kematiannya: </p><br><pre> <code class="hljs pgsql">hg <span class="hljs-keyword"><span class="hljs-keyword">log</span></span> -r <span class="hljs-number"><span class="hljs-number">47106</span></span> changeset: <span class="hljs-number"><span class="hljs-number">47106</span></span>:bed18a111b90 parent: <span class="hljs-number"><span class="hljs-number">47104</span></span>:<span class="hljs-number"><span class="hljs-number">6</span></span>bdc0c9c44af <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>: gziemski <span class="hljs-type"><span class="hljs-type">date</span></span>: Thu Aug <span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">26</span></span>:<span class="hljs-number"><span class="hljs-number">53</span></span> <span class="hljs-number"><span class="hljs-number">2017</span></span> <span class="hljs-number"><span class="hljs-number">-0500</span></span> <span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>: <span class="hljs-number"><span class="hljs-number">8173715</span></span>: Remove FlatProfiler</code> </pre><br><p>  Jadi, kita punya pembunuh: <strong>gziemski</strong> .  Mari kita cari tahu mengapa dia memakukan file malang ini. </p><br><p>  Untuk melakukan ini, lihat lemak di tiket yang ditentukan dalam ringkasan komit.  Ini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">JDK-8173715</a> : </p><br><p>  Hapus FlatProfiler: <br>  Kami berasumsi bahwa teknologi ini tidak lagi digunakan dan merupakan sumber pemindaian root untuk GC. </p><br><p>  Untuk shih bis.  Faktanya, sekarang kita diundang untuk memperbaiki jenazah agar bangunannya berjalan.  Yang telah membusuk begitu banyak sehingga bahkan rekan ahli nujum kami dari OpenJDK meninggalkannya. </p><br><p>  Mari membangkitkan orang mati dan mencoba bertanya padanya apa yang dia ingat terakhir.  Dia sudah mati dalam revisi 47106, yang berarti ada satu kurang dalam revisi - ini adalah "sedetik sebelum": </p><br><pre> <code class="bash hljs">hg cat <span class="hljs-string"><span class="hljs-string">"~/git/jdk11/hotspot/src/share/vm/runtime/fprofiler.cpp"</span></span> -r 47105 &gt; ~/tmp/fprofiler_new.cpp cp ~/git/jdk8u/hotspot/src/share/vm/runtime/fprofiler.cpp ~/tmp/fprofiler_old.cpp <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/tmp diff fprofiler_old.cpp fprofiler_new.cpp</code> </pre> <br><p>  Sayangnya, tidak ada sama sekali tentang <code>return strcmp(name, _name) == 0;</code>  dalam diff no.  Pasien meninggal karena pukulan dengan benda tajam tumpul (utilitas rm), tetapi pada saat kematian dia sudah sakit parah. </p><br><p>  Mari menggali esensi dari kesalahan. </p><br><p>  Inilah yang ingin disampaikan oleh pembuat kode: </p><br><pre> <code class="cpp hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _name; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is_compiled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vm_match</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* name)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span>(name, _name) == <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>  Sekarang sedikit filosofi. </p><br><p>  Standar C11 dalam klausa 7.1.4, "Penggunaan fungsi perpustakaan", secara eksplisit mengatakan: </p><br><blockquote>  Setiap pernyataan berikut ini berlaku kecuali secara eksplisit dinyatakan lain dalam uraian terperinci yang mengikuti: Jika argumen ke suatu fungsi memiliki nilai yang tidak valid (seperti [...] penunjuk nol [...]) [...] perilaku tidak terdefinisi. </blockquote><p>  Yaitu, sekarang seluruh pertanyaannya adalah apakah ada beberapa <em>"secara eksplisit dinyatakan sebaliknya"</em> .  Tidak ada yang tertulis dalam deskripsi <code>strcmp</code> di bagian 7.24.4, dan saya tidak punya bagian lain untuk Anda. </p><br><p>  Artinya, kita memiliki perilaku yang tidak jelas di sini. </p><br><p>  Tentu saja, Anda dapat mengambil dan menulis ulang bagian kode ini, mengelilinginya dengan verifikasi.  Tetapi saya benar-benar tidak yakin bahwa saya memahami dengan benar logika orang yang menggunakan UB di tempat yang seharusnya.  Sebagai contoh, beberapa sistem menghasilkan SIGSERV untuk zero dereferencing, dan pencinta retas dapat memanfaatkannya, tetapi perilaku ini tidak wajib dan dapat dimulai pada platform lain. </p><br><p>  Ya, tentu saja, seseorang akan mengatakan bahwa Anda bodoh untuk diri sendiri, bahwa Anda menggunakan GCC 7.3, tetapi dalam GCC 4 semuanya akan terkumpul.  Tapi perilaku tidak terdefinisi! = Tidak ditentukan! = Implementasi didefinisikan.  Ini untuk dua yang terakhir dapat diletakkan untuk bekerja di kompiler lama.  Dan UB dalam versi keenam adalah UB. </p><br><p>  Singkatnya, saya benar-benar sedih dengan pertanyaan filosofis yang rumit ini (haruskah saya masuk ke kode dengan asumsi saya) ketika saya tiba-tiba menyadari bahwa itu bisa berbeda. </p><br><h1 id="est-drugoy-put">  Ada cara lain </h1><br><p>  Seperti yang Anda tahu, pahlawan yang baik selalu berkeliling. </p><br><p>  Bahkan jika kita mengabaikan filosofi kita tentang UB, ada banyak masalah di sana.  Bukan fakta bahwa mereka dapat diperbaiki sampai pagi hari.  Bukan fakta bahwa saya tidak bisa melakukannya dengan tangan saya yang bengkok.  Apalagi fakta bahwa ini akan diterima di hulu: tambalan terakhir di jdk8u adalah 6 minggu yang lalu, dan ini adalah gabungan global dari tag baru. </p><br><p>  Bayangkan saja kode di atas sebenarnya ditulis dengan benar.  Semua yang berdiri di antara kami dan pelaksanaannya adalah peringatan, yang dianggap sebagai kesalahan karena bug dalam sistem build.  Tetapi kita dapat membangun sistem pembangunan. </p><br><p>  The Witcher Geralt of Rivia pernah berkata: </p><br><blockquote>  "Kejahatan itu jahat, Stregobor," kata si tukang sihir dengan muram, bangkit.  - Lebih kecil, lebih besar, rata-rata - semuanya sama, proporsi sewenang-wenang, dan batas-batasnya kabur.  Saya bukan seorang pertapa suci, tidak hanya melakukan satu kebaikan dalam hidup saya.  Tetapi jika Anda harus memilih antara satu kejahatan dan yang lainnya, saya memilih untuk tidak memilih sama sekali. <br><br>  - Z≈Ço ke z≈Ço, Stregoborze - rzek≈Ç powa≈ºnie wied≈∫min wstajƒÖc.  - Mniejsze, wiƒôksze, ≈õrednie, wszystko jedno, proporcje so umowne a granice zatarte.  Dengan kata lain, pustelnikiem, maka Anda tidak perlu czyni≈Çem dengan ≈ºyciu.  Ale je≈ºeli mam wybieraƒá pomiƒôdzy jednym z≈Çem a drugim, untuk wolƒô nie wybieraƒá wcale. </blockquote><p>  Ini adalah kutipan dari The Last Wish, sebuah cerita berjudul Lesser Evil.  Kita semua tahu bahwa Geralt hampir tidak pernah bisa memainkan peran karakter yang benar-benar netral, dan bahkan mati karena perilaku klasik yang kacau. </p><br><p>  Jadi mari kita tunjukkan kejahatan yang lebih ringan dengan cepat.  Mari kita lanjutkan tentang sistem build. </p><br><p>  Pada awalnya, kita sudah melihat knalpot ini: </p><br><pre> <code class="hljs go">grep -rl <span class="hljs-string"><span class="hljs-string">"Werror"</span></span> . ./common/autoconf/flags.m4 ./hotspot/<span class="hljs-built_in"><span class="hljs-built_in">make</span></span>/linux/makefiles/gcc.<span class="hljs-built_in"><span class="hljs-built_in">make</span></span> ./hotspot/<span class="hljs-built_in"><span class="hljs-built_in">make</span></span>/bsd/makefiles/gcc.<span class="hljs-built_in"><span class="hljs-built_in">make</span></span> ./hotspot/<span class="hljs-built_in"><span class="hljs-built_in">make</span></span>/solaris/makefiles/gcc.<span class="hljs-built_in"><span class="hljs-built_in">make</span></span> ./hotspot/<span class="hljs-built_in"><span class="hljs-built_in">make</span></span>/aix/makefiles/xlc.<span class="hljs-built_in"><span class="hljs-built_in">make</span></span></code> </pre> <br><p>  Membandingkan dua file ini, saya mematahkan seluruh wajah dengan facepalm dan menyadari perbedaan dalam budaya kedua platform: </p><br><p>  BSD adalah kisah tentang kebebasan dan pilihan: </p><br><pre> <code class="hljs lisp"># Compiler warnings are treated as errors ifneq ($(<span class="hljs-name"><span class="hljs-name">COMPILER_WARNINGS_FATAL</span></span>),false) WARNINGS_ARE_ERRORS = -Werror endif</code> </pre> <br><p>  GNU / Linux adalah rezim puritan otoriter: </p><br><pre> <code class="hljs sql"><span class="hljs-comment"><span class="hljs-comment"># Compiler warnings are treated as errors WARNINGS_ARE_ERRORS = -Werror</span></span></code> </pre> <br><p>  Yah, itu akan diteruskan ke linux melalui <code>XX_FLAGS</code> , variabel ini tidak diperhitungkan saat menghitung <code>WARNINGS_ARE_ERRORS</code> !  Dalam build untuk GNU / Linux, kita tidak punya pilihan selain mengikuti default yang telah diluncurkan dari atas. </p><br><p>  Ya, atau Anda dapat membuatnya lebih mudah dan mengubah nilai <code>WARNINGS_ARE_ERRORS</code> menjadi singkat, tetapi tidak kalah kuat <code>-w</code> .  Bagaimana Anda suka itu, Elon Musk? </p><br><p>  Seperti yang mungkin sudah Anda duga, ini sepenuhnya memecahkan masalah build ini. </p><br><p>  Ketika kode dirakit, Anda melihat banyak masalah aneh, tampak sangat terbang melewati.  Kadang-kadang itu terjadi begitu menakutkan sehingga saya benar-benar ingin menekan ctrl + C dan mencoba mencari tahu.  Tapi tidak, kamu tidak bisa, kamu tidak bisa ... </p><br><p>  Tampaknya semuanya berkumpul dan tidak membawa masalah tambahan.  Meskipun, tentu saja, saya tidak berani memulai pengujian.  Tetap saja, malam, mataku mulai bersatu, dan entah bagaimana aku tidak ingin pergi ke jalan terakhir - empat kaleng energi dari lemari es. </p><br><a name="three"></a><br><h1 id="padaet-v-korku">  Jatuh ke kerak bumi </h1><br><p>  Majelis telah berlalu, executable telah dihasilkan, kami hebat. </p><br><p>  Jadi kami sampai di garis finish.  Atau tidak datang? </p><br><p>  Majelis kami terletak dengan cara berikut: </p><br><pre> <code class="hljs powershell">export JAVA_HOME=~/git/jdk8u/build/linux<span class="hljs-literal"><span class="hljs-literal">-x86_64</span></span><span class="hljs-literal"><span class="hljs-literal">-normal</span></span><span class="hljs-literal"><span class="hljs-literal">-server</span></span><span class="hljs-literal"><span class="hljs-literal">-fastdebug</span></span>/jdk export PATH=<span class="hljs-variable"><span class="hljs-variable">$JAVA_HOME</span></span>/bin:<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span></code> </pre> <br><p>  Ketika Anda mencoba menjalankan executable <code>java</code> , itu langsung macet.  Bagi mereka yang tidak terbiasa - terlihat seperti ini: </p><br><p><img src="https://habrastorage.org/webt/n2/3p/ep/n23pepls-unfomopiqb1zgkx5eq.png"><br></p><br><p>  Pada saat yang sama, Alex memiliki Debian 9.5, dan saya memiliki Ubuntu.  Dua versi GCC yang berbeda, dua kerak yang terlihat berbeda.  Saya memiliki pranks bersalah dengan patch manual strcmp dan beberapa tempat lagi, Alex tidak.  Apa masalahnya? </p><br><p>  Kisah ini layak untuk kisah yang terpisah, tetapi di sini mari kita langsung ke kesimpulan kering, kalau tidak saya tidak akan pernah menambahkan posting ini. </p><br><p>  Masalahnya adalah pogromis C ++ favorit kami sekali lagi menggunakan perilaku yang tidak terdefinisi. </p><br><p>  (Terlebih lagi, di mana dalam beberapa cara yang tidak diketahui tergantung pada implementasi kompiler. Namun, kita harus ingat bahwa UB selalu UB, bahkan pada versi kompiler yang diketahui tidak mungkin untuk diletakkan di atasnya) </p><br><p>  Di satu tempat kita beralih ke bidang kelas yang tidak dirancang di sana, dan semuanya pecah.  Jangan tanya bagaimana itu terjadi, semuanya rumit. </p><br><p>  Sangat sulit bagi javista untuk membayangkan bagaimana seseorang dapat beralih ke kelas yang belum dibangun, kecuali dengan mengeluarkan tautan langsung dari konstruktor.  Untungnya, bahasa C ++ yang luar biasa dapat melakukan semua atau hampir semua hal.  Saya akan menulis contoh dengan pseudocode tertentu: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> {</span></span> A() { _b.Show(); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> B _b; }; A a; BA::_b; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ }</code> </pre> <br><p>  Selamat debug! </p><br><p>  Jika Anda melihat C ++ 98 [class.cdtor]: </p><br><blockquote>  Untuk objek dengan tipe kelas non-POD ... sebelum konstruktor memulai eksekusi ... mengacu pada anggota non-statis atau kelas dasar dari objek yang menghasilkan perilaku tidak terdefinisi </blockquote><p>  Dimulai dengan GCC dari beberapa versi (dan saya memiliki 7,3), sebuah optimasi dari "eliminasi toko mati seumur hidup" muncul, yang percaya bahwa kita merujuk ke objek hanya selama waktu hidupnya, dan semuanya batuk di luar waktu hidup. </p><br><p>  Solusinya adalah menonaktifkan optimisasi baru dan kembali seperti semula di GCC lama: </p><br><pre> <code class="hljs powershell">CFLAGS += <span class="hljs-literal"><span class="hljs-literal">-fno</span></span><span class="hljs-literal"><span class="hljs-literal">-strict</span></span><span class="hljs-literal"><span class="hljs-literal">-aliasing</span></span> <span class="hljs-literal"><span class="hljs-literal">-fno</span></span><span class="hljs-literal"><span class="hljs-literal">-lifetime</span></span><span class="hljs-literal"><span class="hljs-literal">-dse</span></span> <span class="hljs-literal"><span class="hljs-literal">-fno</span></span><span class="hljs-literal"><span class="hljs-literal">-delete</span></span><span class="hljs-literal"><span class="hljs-literal">-null</span></span><span class="hljs-literal"><span class="hljs-literal">-pointer</span></span><span class="hljs-literal"><span class="hljs-literal">-checks</span></span></code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ada</a> diskusi tentang ini di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br>  Untuk beberapa alasan, peserta diskusi memutuskan bahwa ini tidak akan dimasukkan dalam hulu.  Tetapi Anda masih harus mencoba mengirimkannya. </p><br><p>  Tambahkan opsi-opsi ini ke <code>./hotspot/make/linux/makefiles/gcc.make</code> kami, <code>./hotspot/make/linux/makefiles/gcc.make</code> kembali semuanya dan lihat baris yang dihargai: </p><br><pre> <code class="hljs powershell">t<span class="hljs-variable"><span class="hljs-variable">$</span></span> ~/git/jdk8u/build/linux<span class="hljs-literal"><span class="hljs-literal">-x86_64</span></span><span class="hljs-literal"><span class="hljs-literal">-normal</span></span><span class="hljs-literal"><span class="hljs-literal">-server</span></span><span class="hljs-literal"><span class="hljs-literal">-fastdebug</span></span>/jdk/bin/java <span class="hljs-literal"><span class="hljs-literal">-version</span></span> openjdk version <span class="hljs-string"><span class="hljs-string">"1.8.0-internal-fastdebug"</span></span> OpenJDK Runtime Environment (build <span class="hljs-number"><span class="hljs-number">1.8</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-literal"><span class="hljs-literal">-internal</span></span><span class="hljs-literal"><span class="hljs-literal">-fastdebug</span></span><span class="hljs-literal"><span class="hljs-literal">-me_2018_09_10_08_14</span></span><span class="hljs-literal"><span class="hljs-literal">-b00</span></span>) OpenJDK <span class="hljs-number"><span class="hljs-number">64</span></span><span class="hljs-literal"><span class="hljs-literal">-Bit</span></span> Server VM (build <span class="hljs-number"><span class="hljs-number">25.71</span></span><span class="hljs-literal"><span class="hljs-literal">-b00</span></span><span class="hljs-literal"><span class="hljs-literal">-fastdebug</span></span>, mixed mode)</code> </pre> <br><h1 id="zaklyuchenie">  Kesimpulan </h1><br><p>  Anda mungkin berpikir bahwa kesimpulannya adalah: "Java adalah semacam neraka, ada sampah dalam kode, tidak ada dukungan, semuanya buruk." </p><br><p>  Ini tidak benar!  Sebaliknya, contoh di atas menunjukkan betapa jahatnya teman-teman kita, ahli nujum dari OpenJDK, yang menjauhkan kita. </p><br><p>  Dan terlepas dari kenyataan bahwa mereka harus hidup dan menggunakan C ++, gemetar dengan masing-masing UB dan mengubah versi kompiler dan mempelajari seluk-beluk platform, kode pengguna akhir di Jawa sangat stabil, dan dibangun di situs web resmi perusahaan seperti Azul, Red Hat dan Oracle sulit menemukan kerak dalam kasus sederhana. </p><br><p>  Satu-satunya hal yang menyedihkan adalah, kemungkinan besar, kesalahan yang ditemukan tidak mungkin diterima di jdk8u.  Kami menggunakan JDK 8 hanya karena lebih mudah bagi kami untuk menambalnya di sini dan sekarang, dan kami harus berurusan dengan JDK 11.  Namun demikian, untuk menggunakan JDK 8 pada 2018 adalah IMHO, ini adalah praktik yang sangat buruk, dan kami tidak melakukannya dari kehidupan yang baik.  Mungkin hidup kita akan membaik di masa depan, dan Anda akan membaca banyak lagi kisah luar biasa dari dunia JDK 11 dan JDK 12. </p><br><p>  Terima kasih atas perhatiannya pada teks yang membosankan tanpa gambar :-) </p><br><blockquote>  Menit periklanan.  Konferensi Joker 2018 akan diadakan segera, di mana akan ada banyak spesialis terkemuka di Jawa dan JVM.  Lihat daftar lengkap pembicara dan laporan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di situs web resmi</a> .  Saya akan berada di sana juga, akan memungkinkan untuk bertemu dan mengerjakan sesuatu seumur hidup dan OpenJDK. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id422861/">https://habr.com/ru/post/id422861/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id422843/index.html">Pengantar Dunia Keripik Palsu: Teknik Deteksi Palsu</a></li>
<li><a href="../id422845/index.html">Bagaimana membuat televisi benar-benar pintar?</a></li>
<li><a href="../id422851/index.html">Mengapa masa depan penyimpanan data masih pita magnetik</a></li>
<li><a href="../id422857/index.html">Menerapkan wadah IoC Anda</a></li>
<li><a href="../id422859/index.html">Kementerian Komunikasi mengusulkan untuk beralih ke kartu SIM dengan enkripsi dari FSB</a></li>
<li><a href="../id422863/index.html">Suku, guild, kereta api, dan tanpa TDD: cara kerja pengembangan seluler di Uber, Spotify, Odnoklassniki, dan Avito</a></li>
<li><a href="../id422865/index.html">Java Enterprise Open Lesson "CDI beraksi"</a></li>
<li><a href="../id422867/index.html">Penentuan jumlah lantai rumah dari fotonya tanpa pembelajaran mesin</a></li>
<li><a href="../id422869/index.html">Kami menguasai bahasa pemrograman baru, mengandalkan yang sudah dipelajari</a></li>
<li><a href="../id422871/index.html">Identifikasi profil yang bermakna dalam VK</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>