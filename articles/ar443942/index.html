<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ต ๐ ๐ต ุชูููู 802.1X ุนูู ูุญููุงุช ุณูุณูู ุจุงุณุชุฎุฏุงู Failover NPS (Windows RADIUS ูุน AD) ๐๏ธ ๐คฑ๐ฝ ๐ฉโโค๏ธโ๐โ๐จ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฏุนููุง ูููุฑ ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ูู ุงุณุชุฎุฏุงู Windows Active Directory + NPS (ุฎุงุฏููุงู ููุชุณุงูุญ ูุน ุงูุฃุฎุทุงุก) + 802.1x ููุงุณู ููุชุญูู ูู ุงููุตูู ููุตุงุฏูุฉ ุงููุณุชุฎุฏู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชูููู 802.1X ุนูู ูุญููุงุช ุณูุณูู ุจุงุณุชุฎุฏุงู Failover NPS (Windows RADIUS ูุน AD)</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443942/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/fab/761/19d/fab76119df15e93b40fdfdeb0b91156e.png" alt="ุตูุฑุฉ"><br>  ุฏุนููุง ูููุฑ ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ูู ุงุณุชุฎุฏุงู Windows Active Directory + NPS (ุฎุงุฏููุงู ููุชุณุงูุญ ูุน ุงูุฃุฎุทุงุก) + 802.1x ููุงุณู ููุชุญูู ูู ุงููุตูู ููุตุงุฏูุฉ ุงููุณุชุฎุฏููู - ุฃุฌูุฒุฉ ููุจููุชุฑ ุงููุฌุงู - ุงูุฃุฌูุฒุฉ.  ููููู ุงูุชุนุฑู ุนูู ูุธุฑูุฉ ุงููุนูุงุฑ ูู ููููุจูุฏูุง ุ ุนูู ุงูุฑุงุจุท: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">IEEE 802.1X</a> <br><br>  ูุธุฑูุง ูุฃู "ุงููุฎุชุจุฑ" ุงูุฎุงุต ุจู ูุญุฏูุฏ ูู ุงูููุงุฑุฏ ุ ูุฅู ุฃุฏูุงุฑ NPS ููุญุฏุฉ ุงูุชุญูู ุจุงููุฌุงู ูุชูุงููุฉ ุ ููููู ุฃูุตู ุจูุดุงุฑูุฉ ูุฐู ุงูุฎุฏูุงุช ุงููุงูุฉ. <br><br>  ูุง ุฃุนุฑู ุงูุทุฑู ุงูููุงุณูุฉ ููุฒุงููุฉ ุชููููุงุช (ุณูุงุณุงุช) Windows NPS ุ ูุฐูู ุณูุณุชุฎุฏู ุจุฑุงูุฌ PowerShell ุงููุตูุฉ ุงูุชู ุฃุทูููุง ุจุฑูุงูุฌ ุฌุฏููุฉ ุงูููุงู (ุงููุคูู ูู ุฒูููู ุงูุณุงุจู).  ููุตุงุฏูุฉ ุฃุฌูุฒุฉ ููุจููุชุฑ ุงููุฌุงู ูููุฃุฌูุฒุฉ ุงูุชู ูุง ุชุนุฑู ููููุฉ ุงุณุชุฎุฏุงู <b>802.1x</b> (ุงูููุงุชู ูุงูุทุงุจุนุงุช ููุง ุฅูู ุฐูู) ุ ุณูุชู ุชูููู "ููุฌ ุงููุฌููุนุฉ" ูุฅูุดุงุก ูุฌููุนุงุช ุงูุฃูุงู. <br><br>  ูู ููุงูุฉ ุงูููุงู ุ ุณุฃุชุญุฏุซ ุนู ุจุนุถ ุชุนููุฏุงุช ุงูุนูู ูุน 802.1x - ููู ููููู ุงุณุชุฎุฏุงู ุงููุญููุงุช ุบูุฑ ุงููุฏุงุฑุฉ ุ ACL ุงูุฏููุงููููุฉ ุ ููุง ุฅูู ุฐูู. ุณุฃุดุงุฑู ุงููุนูููุงุช ุญูู ููุงุทู ุงูุฎูู ุงูุชู ุชู ุงูุชุดุงููุง ... <br><a name="habracut"></a><br>  ููุจุฏุฃ ูู ุฎูุงู ุชุซุจูุช ูุชูููู ูุดู NPS ุนูู Windows Server 2012R2 (ูู ุดูุก ูู ููุณู ูุนุงู 2016): ูู ุฎูุงู Server Manager -&gt; ูุนุงูุฌ ุฅุถุงูุฉ ุงูุฃุฏูุงุฑ ูุงูููุฒุงุช ุ ุญุฏุฏ ุฎุงุฏู ููุฌ ุงูุดุจูุฉ ููุท. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c55/b51/17f/c55b5117f0ebab8d5b10c808617418c5.png" alt="ุตูุฑุฉ"><br><br>  ุฃู ุจุงุณุชุฎุฏุงู PowerShell: <br><br><pre style=";text-align:right;direction:rtl"><code class="actionscript hljs">Install-WindowsFeature NPAS -IncludeManagementTools</code> </pre> <br><blockquote style=";text-align:right;direction:rtl">  ุชูุถูุญ ุจุณูุท - ูุธุฑูุง ูุฃู <b>EAP ุงููุญูู (PEAP)</b> ุณุชุญุชุงุฌ ุจุงูุชุฃููุฏ ุฅูู ุดูุงุฏุฉ ุชุคูุฏ ุตุญุฉ ุงูุฎุงุฏู (ูุน ุญููู ุงูุงุณุชุฎุฏุงู ุงูููุงุณุจุฉ) ุ ูุงูุชู ุณูุชู ุงููุซูู ุจูุง ุนูู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงูุนูููุฉ ุ ููู ุซู ุณุชุญุชุงุฌ ุฅูู ุชุซุจูุช ุฏูุฑ <b>ุงููุฑุฌุน ุงููุตุฏู</b> ุฃูุถูุง.  ูููู ูููุชุฑุถ ุฃู ูุฏูู ุจุงููุนู ุชุซุจูุช <b>CA</b> ... </blockquote>  ุณููุนู ููุณ ุงูุดูุก ุนูู ุงูุฎุงุฏู ุงูุซุงูู.  ุฅูุดุงุก ูุฌูุฏ ููุจุฑูุงูุฌ ุงููุตู C: \ Scripts ุนูู ููุง ุงูุฎุงุฏููู ููุฌูุฏ ุดุจูุฉ ุนูู ุงูุฎุงุฏู ุงูุซุงูู <b>\\ SRV2 \ NPS-config $</b> <br><br>  ุนูู ุงูุฎุงุฏู ุงูุฃูู ุ ูู ุจุฅูุดุงุก ุจุฑูุงูุฌ PowerShell ุงููุตู <i>C: \ Scripts \ Export-NPS-config.ps1</i> ุจุงููุญุชููุงุช ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="actionscript hljs">Export-NpsConfiguration -Path <span class="hljs-string"><span class="hljs-string">"\\SRV2\NPS-config$\NPS.xml"</span></span></code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูู ุจุชูููู ุงููููุฉ ูู Sheduler ุงูููุงู: " <i>Export-NpsConfiguration</i> " <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">powershell -executionpolicy unrestricted -f <span class="hljs-string"><span class="hljs-string">"C:\Scripts\Export-NPS-config.ps1"</span></span></code> </pre> <br>  <i>ุฃุฏุงุก ูุฌููุน ุงููุณุชุฎุฏููู - ุชุดุบูู ุจุฃุนูู ุงูุฃุฐููุงุช</i> <i><br></i>  <i>ูููููุง - ูุฑุฑ ุงููููุฉ ูู 10 ุฏูุงุฆู.</i>  <i>ูู ุบุถูู 8 ุณุงุนุงุช</i> <br><br>  ูู ูุถุน ุงูุงุณุชุนุฏุงุฏ NPS ุ ูู ุจุชูููู ุงุณุชูุฑุงุฏ ุงูุชูููู (ุงูุณูุงุณุงุช): <br>  ุฅูุดุงุก ุจุฑูุงูุฌ ูุตู PowerShell: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Import-NpsConfiguration -Path <span class="hljs-string"><span class="hljs-string">"c:\NPS-config\NPS.xml"</span></span> &gt;&gt; C:\Scripts\Import-NPS-config.ps1</code> </pre> <br>  ููููุฉ ุชูููุฐู ูู 10 ุฏูุงุฆู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">powershell -executionpolicy unrestricted -f <span class="hljs-string"><span class="hljs-string">"C:\Scripts\Import-NPS-config.ps1"</span></span></code> </pre> <br>  <i>ุฃุฏุงุก ูุฌููุน ุงููุณุชุฎุฏููู - ุชุดุบูู ุจุฃุนูู ุงูุฃุฐููุงุช</i> <i><br></i>  <i>ูููููุง - ูุฑุฑ ุงููููุฉ ูู 10 ุฏูุงุฆู.</i>  <i>ูู ุบุถูู 8 ุณุงุนุงุช</i> <br><br>  ุงูุขู ุ ููุชุญูู ูู ุฐูู ุ ุฃุถู ุงุซููู ูู ุงููุญููุงุช ุฅูู ุนููุงุก RADIUS (IP ูุงูุณุฑูุฉ ุงููุดุชุฑูุฉ) ูู NPS ุนูู ุฃุญุฏ ุงูุฎูุงุฏู (!) ุ ูุณูุงุณุชูู ูุทูุจ ุงูุงุชุตุงู: <b>WIRED-Connect</b> (ุงูุดุฑุท: "ููุน ูููุฐ NAS - Ethernet") ู <b>WiFi -ุงููุดููุฉ</b> (ุงูุดุฑุท: "ููุน ูููุฐ NAS ูู IEEE 802.11") ุ ููุฐูู ุณูุงุณุฉ <b><i>ุดุจูุฉ ุงููุตูู ุฅูู ุดุจูุฉ ุฃุฌูุฒุฉ</i></b> ุงูุดุจูุฉ (ุฅุฏุงุฑุฉ ุงูุดุจูุฉ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs">:  Windows - domain\sg-network-admins :    -    (PAP, SPAP) :  RADIUS:  - Service-Type - Login    - Cisco-AV-Pair - Cisco - shell:priv-lvl=15</code> </pre> <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูู ุฌุงูุจ ุงูุชุจุฏูู ุ ุงูุฅุนุฏุงุฏุงุช ุงูุชุงููุฉ:</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">aaa new-model aaa local authentication attempts max-fail 5 ! ! aaa group server radius NPS server-private 192.168.38.151 auth-port 1812 acct-port 1813 key %shared_secret% server-private 192.168.10.151 auth-port 1812 acct-port 1813 key %shared_secret% ! aaa authentication login default group NPS local aaa authentication dot1x default group NPS aaa authorization console aaa authorization exec default group NPS local if-authenticated aaa authorization network default group NPS ! aaa session-id common ! identity profile default ! dot1x system-auth-control ! ! line vty 0 4 exec-timeout 5 0 transport input ssh escape-character 99 line vty 5 15 exec-timeout 5 0 logging synchronous transport input ssh escape-character 99</code> </pre> <br></div></div><br>  ุจุนุฏ ุงูุชููุฆุฉ ุ ุจุนุฏ 10 ุฏูุงุฆู ุ ูุฌุจ ุฃู ุชุธูุฑ ุฌููุน ุงูุนููุงุก \ ุงูุณูุงุณุงุช \ ุงูุฅุนุฏุงุฏุงุช ุนูู NPS ุงูุงุญุชูุงุทู ุ ูุณูู ูุชููู ูู ุชุณุฌูู ุงูุฏุฎูู ุฅูู ุงููุญููุงุช ุจุงุณุชุฎุฏุงู ุญุณุงุจ ActiveDirectory ุ ููู ุนุถู ูู ูุฌููุนุฉ domain \ sg-network-admins (ุงูุชู ุฃูุดุฃูุงูุง ููุฏููุง). <br><br>  ุฏุนูุง ููุชูู ุฅูู ุฅุนุฏุงุฏ Active Directory - ุฅูุดุงุก ุณูุงุณุฉ ูุฌููุนุฉ ููููุฉ ูุฑูุฑ ุ ุฅูุดุงุก ุงููุฌููุนุงุช ุงูุถุฑูุฑูุฉ. <br><br>  <i><b>ุฃุฌูุฒุฉ</b></i> ููุฌ ุงููุฌููุนุฉ <i><b>- ุฅุนุฏุงุฏุงุช 8021x</b></i> : <br><br><pre style=";text-align:right;direction:rtl"> <b><code class="plaintext hljs">Computer Configuration (Enabled) Policies Windows Settings Security Settings System Services Wired AutoConfig (Startup Mode: Automatic) Wired Network (802.3) Policies</code></b> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">NPS-802-1x</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Name NPS-802-1x Description 802.1x Global Settings SETTING VALUE Use Windows wired LAN network services for clients Enabled Shared user credentials for network authentication Enabled Network Profile Security Settings Enable use of IEEE 802.1X authentication for network access Enabled Enforce use of IEEE 802.1X authentication for network access Disabled IEEE 802.1X Settings Computer Authentication Computer only Maximum Authentication Failures 10 Maximum EAPOL-Start Messages Sent Held Period (seconds) Start Period (seconds) Authentication Period (seconds) Network Authentication Method Properties Authentication method Protected EAP (PEAP) Validate server certificate Enabled Connect to these servers Do not prompt user to authorize new servers or trusted certification authorities Disabled Enable fast reconnect Enabled Disconnect if server does not present cryptobinding TLV Disabled Enforce network access protection Disabled Authentication Method Configuration Authentication method Secured password (EAP-MSCHAP v2) Automatically use my Windows logon name and password(and domain if any) Enabled</code> </pre> <br></div></div><br><img src="https://habrastorage.org/getpro/habr/post_images/88f/cd4/c48/88fcd4c486e62979b592d5a633270e59.png" alt="NPS-802-1x_AD- ุงูุณูุงุณุฉ"><br><br>  ูู ุจุฅูุดุงุก ูุฌููุนุฉ ุฃูุงู <b><i>sg-computers-8021x-vl100</i></b> ุ ุญูุซ ุณูุถูู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงูุชู ูุฑูุฏ ุชูุฒูุนูุง ุนูู <b><i>ุดุจูุฉ ูุญููุฉ ุธุงูุฑูุฉ</i></b> 100 ูุชูููู ุงูุชุตููุฉ ูุณูุงุณุฉ ุงููุฌููุนุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ูุณุจููุง ููุฐู ุงููุฌููุนุฉ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/79b/5d5/11c/79b5d511c9c2551781cfa4b8b4113552.png" alt="ูุตุงุฏูุฉ 802.1x-GPO-Filtering"><br><br>  ููููู ุงูุชุญูู ูู ุฃู ุงูุณูุงุณุฉ ูุฏ ุชู ุชูููุฐูุง ุจูุฌุงุญ ูู ุฎูุงู ูุชุญ "ูุฑูุฒ ุงูุดุจูุฉ ูุงููุดุงุฑูุฉ (ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ ูุงูุฅูุชุฑูุช) - ุชุบููุฑ ุฅุนุฏุงุฏุงุช ุงููุญูู (ุชูููู ุฅุนุฏุงุฏุงุช ุงููุญูู) - ุฎุตุงุฆุต ุงููุญูู" ุ ุญูุซ ูููููุง ุฑุคูุฉ ุนูุงูุฉ ุงูุชุจููุจ "ุงููุตุงุฏูุฉ": <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d6f/2c9/6bf/d6f2c96bff36ee31b6549391c63f398a.png" alt="ูุตุงุฏูุฉ ุงููุตูู ุฅูู ุงูุดุจูุฉ ููุญูู Ethernet"><br><br>  ุนูุฏูุง ุชููู ููุชูุนูุง ุจุฃูู ุชู ุชุทุจูู ุงูุณูุงุณุฉ ุจูุฌุงุญ ุ ููููู ุงููุชุงุจุนุฉ ูุชูููู ุณูุงุณุฉ ุงูุดุจูุฉ ุนูู NPS ูููุงูุฐ ุชุจุฏูู ุงููุตูู. <br><br>  ุฅูุดุงุก ููุฌ ุดุจูุฉ <b><i>neag-computers-8021x-vl100</i></b> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs">Conditions: Windows Groups - sg-computers-8021x-vl100 NAS Port Type - Ethernet Constraints: Authentication Methods - Microsoft: Protected EAP (PEAP) - Unencrypted authentication (PAP, SPAP) NAS Port Type - Ethernet Settings: Standard: Framed-MTU 1344 TunnelMediumType 802 (includes all 802 media plus Ethernet canonical format) TunnelPrivateGroupId 100 TunnelType Virtual LANs (VLAN)</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/1f9/8b9/4e3/1f98b94e3a813be72c498a4c92b71454.png" alt="802.1x ุณูุงุณุฉ ุดุจูุฉ ุงููุตุงุฏูุฉ"><br><br>  ุงูุฅุนุฏุงุฏุงุช ุงููููุฐุฌูุฉ ููููุฐ ุงูุชุจุฏูู (ุฃูุฏ ุงูุงูุชุจุงู ุฅูู ุญูููุฉ ุฃู ููุน ุงููุตุงุฏูุฉ ูู "ูุชุนุฏุฏ ุงููุฌุงูุงุช" - ุงูุจูุงูุงุช ูุงูุตูุช ุ ููู ุงููููู ุฃูุถูุง ุงููุตุงุฏูุฉ ุนูู ุนููุงู mac. ุจุงููุณุจุฉ ูู "ูุชุฑุฉ ุงูุงูุชูุงู" ุ ูู ุงูููุทูู ุงุณุชุฎุฏุงู ุงููุนููุงุช ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="actionscript hljs">authentication event fail action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication event no-response action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span></code> </pre><br>  ูู ูุชู ุฅุฏุฎุงู ุงููุนุฑู ูู "ุงูุนุฒู" ุ ูููู ูู ููุณ ุงููุนุฑู ุงูุฐู ูุฌุจ ุฃู ูุญุตู ุนููู ุงูููุจููุชุฑ ุงููุณุชุฎุฏู ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ - ุญุชู ูุชุฃูุฏ ูู ุฃู ูู ุดูุก ูุนูู ููุง ููุจุบู.  ูููู ุงุณุชุฎุฏุงู ููุณ ุงููุนููุงุช ูู ุณููุงุฑูููุงุช ุฃุฎุฑู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ุฅุฏุฎุงู ุฑูุฒ ุชุจุฏูู ุบูุฑ ูุฏุงุฑ ูู ูุฐุง ุงููููุฐ ูุชุฑูุฏ ุฃู ุชูุฏุฑุฌ ุฌููุน ุงูุฃุฌูุฒุฉ ุงููุชุตูุฉ ุจู ูุบูุฑ ูุตุงุฏูุฉ ูู ุดุจูุฉ ูุญููุฉ ุธุงูุฑูุฉ ูุนููุฉ ("ุงูุนุฒู"). <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชุจุฏูู ุฅุนุฏุงุฏุงุช ุงููููุฐ ูู 802.1x ูุถุน ูุถูู ูุชุนุฏุฏ ุงููุฌุงูุงุช</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">default</span></span> int range Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span><span class="hljs-number"><span class="hljs-number">-41</span></span> int range Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span><span class="hljs-number"><span class="hljs-number">-41</span></span> shu des PC-IPhone_802<span class="hljs-number"><span class="hljs-number">.1</span></span>x switchport mode access switchport nonegotiate switchport voice vlan <span class="hljs-number"><span class="hljs-number">55</span></span> switchport port-security maximum <span class="hljs-number"><span class="hljs-number">2</span></span> authentication event fail action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication event no-response action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication host-mode multi-domain authentication port-control auto authentication violation restrict mab dot1x pae authenticator dot1x timeout quiet-period <span class="hljs-number"><span class="hljs-number">15</span></span> dot1x timeout tx-period <span class="hljs-number"><span class="hljs-number">3</span></span> storm-control broadcast level pps <span class="hljs-number"><span class="hljs-number">100</span></span> storm-control multicast level pps <span class="hljs-number"><span class="hljs-number">110</span></span> no vtp lldp receive lldp transmit spanning-tree portfast no shu exit</code> </pre> <br></div></div><br>  ููููู ุงูุชุญูู ูู ูุตุงุฏูุฉ ุงูููุจููุชุฑ / ุงููุงุชู ุจูุฌุงุญ ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="actionscript hljs">sh authentication sessions int Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span> det</code> </pre> <br>  ูู ุงูุขู ุจุฅูุดุงุก ูุฌููุนุฉ (ุนูู ุณุจูู ุงููุซุงู ุ <i>sg-fgpp-mab</i> ) ูู Active Directory ููููุงุชู ูุฅุถุงูุฉ ุฌูุงุฒ ุงุฎุชุจุงุฑ ูุงุญุฏ ุฅูููุง (ูู ุญุงูุชู ุ ูุฐุง ูู <b><i>Grandstream GXP2160</i></b> ูุน ุงูุนููุงู ุงูุดุงูู <b>000b.82ba.a7b1</b> ููุฌุงู ุงูุญุณุงุจ ุงูููุงุจู <b>\ 000b82baa7b1</b> ) . <br><br>  ุจุงููุณุจุฉ ูููุฌููุนุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุ ุณูููู ุจุชุฎููุถ ูุชุทูุจุงุช ุณูุงุณุฉ ูููุฉ ุงููุฑูุฑ (ุจุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณูุงุณุงุช ูููุฉ ุงููุฑูุฑ ุงููุญุจุจุฉ ูู</a> ุฎูุงู ูุฑูุฒ ุฅุฏุงุฑุฉ Active Directory -&gt; ุงููุฌุงู -&gt; ุงููุธุงู -&gt; ุญุงููุฉ ุฅุนุฏุงุฏุงุช ูููุฉ ุงููุฑูุฑ) ูุน ุงููุนููุงุช ุงูุชุงููุฉ <b><i>Password-Settings-for-MAB</i></b> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0cf/998/705/0cf998705b059c03465acd6057356d91.jpg" alt="ุณูุงุณุงุช ูููุฉ ุงููุฑูุฑ ุงูุฏูููุฉ (FGPP) ูุฃุฌูุฒุฉ MAB"><br><br>  ููุง ูุณูุญ ููุง ุจุงุณุชุฎุฏุงู ุนููุงู ูุงุณ ููุฃุฌูุฒุฉ ููููุงุช ูุฑูุฑ.  ุจุนุฏ ุฐูู ุ ูููููุง ุฅูุดุงุก ุณูุงุณุฉ ุดุจูุฉ ููุตุงุฏูุฉ mab ูุฃุณููุจ 802.1x ุ ุฏุนูุง ูุณูููุง neag-devices-8021x-voice.  ุงููุนููุงุช ูู ููุง ููู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุน ูููุฐ NAS - Ethernet </li><li style=";text-align:right;direction:rtl">  ูุฌููุนุงุช Windows - sg-fgpp-mab </li><li style=";text-align:right;direction:rtl">  ุฃููุงุน EAP: ูุตุงุฏูุฉ ุบูุฑ ูุดูุฑุฉ (PAP ุ SPAP) </li><li style=";text-align:right;direction:rtl">  ุณูุงุช RADIUS - ุฎุงุตุฉ ุจุงูููุฑุฏ: Cisco - Cisco-AV-Pair - ูููุฉ ุงูุณูุฉ: device-traffic-class = voice </li></ul><br>  ุจุนุฏ ุงููุตุงุฏูุฉ ุงููุงุฌุญุฉ (ูุง ุชูุณ ุชูููู ูููุฐ ุงูุชุจุฏูู) ุ ุฑุงุฌุน ุงููุนูููุงุช ูู ุงููููุฐ: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">sh ุงููุตุงุฏูุฉ se int Gi1 / 0/34</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">---------------------------------------- Interface: GigabitEthernet1/0/34 MAC Address: 000b.82ba.a7b1 IP Address: 172.29.31.89 User-Name: 000b82baa7b1 Status: Authz Success Domain: VOICE Oper host mode: multi-domain Oper control dir: both Authorized By: Authentication Server Session timeout: N/A Idle timeout: N/A Common Session ID: 0000000000000EB2000B8C5E Acct Session ID: 0x00000134 Handle: 0xCE000EB3 Runnable methods list: Method State dot1x Failed over mab Authc Success</code> </pre> <br></div></div><br>  ุงูุขู ุ ููุง ูุนุฏุช ุ ููุฑ ูู ุจุนุถ ุงูููุงูู ุบูุฑ ุงููุงุถุญุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุญุชุงุฌ ุฅูู ุชูุตูู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ / ุฃุฌูุฒุฉ ุงููุณุชุฎุฏููู ูู ุฎูุงู ููุชุงุญ ุงูุชุจุฏูู ุบูุฑ ุงูููุฏุงุฑ (ุฑูุฒ ุงูุชุจุฏูู).  ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชุจุฏู ุฅุนุฏุงุฏุงุช ุงููููุฐ ูุฐูู ููุง ููู: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชุจุฏูู ุฅุนุฏุงุฏุงุช ุงููููุฐ ูู ูุถุน ูุตุงุฏูุฉ 802.1x ูู ูุถุน ุงููุถูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="actionscript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GigabitEthernet1</span></span></span><span class="hljs-class">/0/1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">description</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SW</span></span></span><span class="hljs-class"> โ 802.1</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class"> โ 8 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mac</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shu</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mode</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">access</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonegotiate</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">voice</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 55 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">port</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">security</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">maximum</span></span></span><span class="hljs-class"> 8 !  -  - </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">event</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fail</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">action</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authorize</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">event</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">response</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">action</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authorize</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">host</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mode</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">multi</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auth</span></span></span><span class="hljs-class"> ! โ   </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">port</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">violation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">restrict</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mab</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pae</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authenticator</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">timeout</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">quiet</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">period</span></span></span><span class="hljs-class"> 15 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">timeout</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tx</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">period</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">storm</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">broadcast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">level</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pps</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">storm</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">multicast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">level</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pps</span></span></span><span class="hljs-class"> 110 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vtp</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">spanning</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tree</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">portfast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shu</span></span></span></span></code> </pre> <br></div></div><br>  ููุงุญุธุฉ: ุชู ููุงุญุธุฉ ุฎูู ุบุฑูุจ ุฌุฏูุง - ุฅุฐุง ูุงู ุงูุฌูุงุฒ ูุชุตูุงู ูู ุฎูุงู ูุฐุง ุงูููุชุงุญ ุ ุซู ุชู ุชุนูููู ูู ููุชุงุญ ููุฏุงุฑ ุ ููู ูุนูู ุญุชู ูุชู ุฅุนุงุฏุฉ ุชุดุบูู ุงูููุชุงุญ (!) ุญุชู ุฃุฌุฏ ุทุฑููุง ุฃุฎุฑู ูุญู ูุฐู ุงููุดููุฉ. <br><br>  ููุงู ููุทุฉ ุฃุฎุฑู ูุฑุชุจุทุฉ ุจู DHCP (ุฅุฐุง ุชู ุงุณุชุฎุฏุงู ip dhcp snooping) - ุฏูู ูุซู ูุฐู ุงูุฎูุงุฑุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="actionscript hljs">ip dhcp snooping vlan <span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-100</span></span> no ip dhcp snooping information option</code> </pre> <br>  ูุณุจุจ ูุง ุ ูุง ูููู ุงุณุชูุงู ุนููุงู IP ุจุดูู ุตุญูุญ ... ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ูุฏ ูููู ููุฒุฉ ูุฎุงุฏู DHCP ุงูุฎุงุต ุจูุง <br><br>  ููุญุงูู ูุธุงู ุงูุชุดุบูู Mac OS ู Linux (ุญูุซ ูููู ุฏุนู 802.1x ูุญูููุง) ุงููุตุงุฏูุฉ ูุน ุงููุณุชุฎุฏู ุ ุญุชู ุฅุฐุง ุชู ุชูููู ุงููุตุงุฏูุฉ ุญุณุจ ุงูุนููุงู ุงูุดุงูู. <br><br>  ูู ุงูุฌุฒุก ุงูุชุงูู ูู ุงูููุงูุฉ ุ ุณููุธุฑ ูู ุงุณุชุฎุฏุงู 802.1x ููุดุจูุงุช ุงููุงุณูููุฉ (ุงุนุชูุงุฏูุง ุนูู ุงููุฌููุนุฉ ุงูููุฌูุฏุฉ ูู ุญุณุงุจ ุงููุณุชุฎุฏู ุ ุณูููู "ุจุฅุณูุงุทูุง" ูู ุงูุดุจูุฉ ุงูููุงุจูุฉ (ุดุจูุฉ ูุญููุฉ ุธุงูุฑูุฉ) ุ ุนูู ุงูุฑุบู ูู ุฃููุง ุณุชุชุตู ุจููุณ SSID). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar443942/">https://habr.com/ru/post/ar443942/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar443926/index.html">ุณูุงุฑุงุช "ุทูุงู"</a></li>
<li><a href="../ar443928/index.html">ููููุฉ ุฑููุจ ุณูุงุฑุฉ ุฃุฌุฑุฉ ุนูู ุญุณุงุจ ุดุฎุต ุขุฎุฑ - ููุงุท ุงูุถุนู ูู ูุซุงู ุฎุฏูุฉ ูุงุญุฏุฉ</a></li>
<li><a href="../ar443934/index.html">CJDNS ููุช ุ ูุนูุด Yggdrasil</a></li>
<li><a href="../ar443938/index.html">NetXMS ููุธุงู ููุฑุงูุจุฉ ูุณูู ... ูููุงุฑูุฉ ุตุบูุฑุฉ ูุน Zabbix</a></li>
<li><a href="../ar443940/index.html">ููู ูุง ุชุชุฑุฌู ุนูุงููู ุงูุฃููุงู</a></li>
<li><a href="../ar443946/index.html">ุงููุถุน: ูุญุฏุงุช ูุนุงูุฌุฉ ุงูุฑุณููุงุช ุงูุงูุชุฑุงุถูุฉ ููุณุช ุฃูู ุดุฃูุง ูู ุฃุฏุงุก ุญููู ุงูุญุฏูุฏ</a></li>
<li><a href="../ar443948/index.html">ูุณุงุจูุฉ "ุฃูุง ุฎุจูุฑ ูู Intel Studio" ูุน ุฌูุงุฆุฒ ูุงุฆูุฉ ูููุทูุฑูู</a></li>
<li><a href="../ar443950/index.html">ุงูุซูุฉ ุ ุชูุฏูู ุงููุดูุฑุฉ ุ ุชูุญู - ูุทุงุฑุฏุฉ ููุฑุงุฌุนุงุช ุงูุจุฑุงูุฌ ุงูุญููููุฉ</a></li>
<li><a href="../ar443952/index.html">ุงูุฅูุชุฑูุช ุงูุณูุงุฏูุฉ - ูู ุฃุฌู ุฃููุงููุง</a></li>
<li><a href="../ar443954/index.html">ุงูุชูุฑุฏ ุงูุชูููููุฌู: ุงูุฃุณุทูุฑุฉ ุงูุญุฏูุซุฉ ูููุงูุฉ ุงูุนุงูู ุชุญุช ุณุชุงุฑ ูุฑุถูุฉ ุงูุชูุฏู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>