<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõÖ ü§ó üö£üèº Comment nous modifions le produit pour un client sp√©cifique üíÉüèΩ üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø üåÇ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous avons donc vendu au client un logiciel B2B. 

 Lors de la pr√©sentation, il a tout aim√©, mais lors de la mise en ≈ìuvre, il s'est av√©r√© que quelque...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous modifions le produit pour un client sp√©cifique</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lsfusion/blog/461983/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/f8/ep/ee/f8epee4petxvrq60bqvyzpy8exu.jpeg" alt="image"></div><br>  Nous avons donc vendu au client un logiciel B2B. <br><br>  Lors de la pr√©sentation, il a tout aim√©, mais lors de la mise en ≈ìuvre, il s'est av√©r√© que quelque chose ne convenait toujours pas.  Vous pouvez bien s√ªr dire que vous devez suivre les ¬´meilleures pratiques¬ª et vous transformer en produit, et non l'inverse.  Cela peut fonctionner si vous avez une marque forte (par exemple, trois grandes lettres et que vous pouvez envoyer les trois petites lettres).  Sinon, ils vous expliqueront rapidement que le client a tout accompli gr√¢ce √† ses processus commerciaux uniques, et am√©liorons mieux votre produit ou cela ne fonctionnera pas.  Il y a une option pour refuser et se r√©f√©rer au fait que des licences ont d√©j√† √©t√© achet√©es, et il n'y a nulle part o√π aller depuis le sous-marin.  Mais sur des march√©s relativement √©troits, une telle strat√©gie ne fonctionnera pas longtemps. <br><br>  Nous devons modifier. <br><a name="habracut"></a><br><h2>  Les approches </h2><br>  Il existe plusieurs approches de base pour l'adaptation des produits. <br><br><h4>  Monolith </h4><br>  Toutes les modifications sont apport√©es directement au code source du produit, mais sont incluses dans certaines options.  En r√®gle g√©n√©rale, dans ces produits, il existe des formulaires monstrueux avec des param√®tres qui, pour ne pas se tromper, se voient attribuer leurs num√©ros ou codes.  L'inconv√©nient de cette approche est que le code source se transforme en gros spaghetti, dans lesquels il existe tellement de cas d'utilisation diff√©rents qu'il devient tr√®s long et co√ªteux √† maintenir.  Chaque option suivante n√©cessite de plus en plus de ressources.  Les performances d'un tel produit laissent √©galement beaucoup √† d√©sirer.  Et si la langue dans laquelle le produit est √©crit ne prend pas en charge les pratiques modernes comme l'h√©ritage et le polymorphisme, alors tout devient tr√®s triste. <br><br><h4>  Copier </h4><br>  Le client re√ßoit l'int√©gralit√© du code source du produit avec une licence pour le modifier.  Souvent, ces fournisseurs disent au client qu'ils n'adapteront pas le produit eux-m√™mes, car il sera trop cher (il est beaucoup plus rentable pour un fournisseur de vendre des licences que de contacter des services).  Mais ils ont des sous-traitants familiers qui embauchent des employ√©s relativement bon march√© et de haute qualit√© quelque part dans des pays tiers qui sont pr√™ts √† les aider.  Il existe √©galement des situations o√π des am√©liorations seront effectu√©es directement par les sp√©cialistes du client (s‚Äôils disposent d‚Äôunit√©s de dotation).  Dans de tels cas, le code source est pris comme point de d√©part et le code modifi√© n'aura aucun lien avec ce qui √©tait √† l'origine et vivra sa propre vie.  Dans ce cas, vous pouvez retirer en toute s√©curit√© au moins la moiti√© du produit d'origine et le remplacer par votre propre logique. <br><br><h4>  Fusion </h4><br>  Il s'agit d'un m√©lange des deux premi√®res approches.  Mais l√†-dedans, le d√©veloppeur qui corrige le code doit toujours se rappeler: ¬´la fusion arrive¬ª.  Lorsqu'une nouvelle version du produit source est publi√©e, elle devra dans la plupart des cas fusionner manuellement les modifications dans le code source et le code modifi√©.  Le probl√®me est que dans tout conflit, il sera n√©cessaire de se rappeler pourquoi certains changements ont √©t√© apport√©s, et cela pourrait √™tre il y a tr√®s longtemps.  Et si le refactoring de code a √©t√© effectu√© dans le produit d'origine (par exemple, les blocs de code ont √©t√© simplement r√©arrang√©s), la fusion sera tr√®s laborieuse. <br><br><h4>  Modularit√© </h4><br>  Logiquement l'approche la plus correcte.  Dans ce cas, le code source du produit ne subit aucune modification et des modules suppl√©mentaires sont ajout√©s pour √©tendre la fonctionnalit√©.  Cependant, pour mettre en ≈ìuvre un tel sch√©ma, le produit doit avoir une architecture qui lui permette d'√™tre √©tendu de cette mani√®re. <br><br><h2>  La description </h2><br>  Plus loin, avec des exemples, je montrerai comment nous √©largissons les produits d√©velopp√©s sur la base de la plate-forme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lsFusion</a> ouverte et gratuite. <br><br>  Un √©l√©ment cl√© du syst√®me est le module.  Un module est un fichier texte avec l'extension <i>lsf</i> , qui contient le <b>code lsFusion</b> .  Dans chaque module, la logique du domaine (fonctions, classes, actions) et la logique de pr√©sentation (formulaires, navigateur) sont d√©clar√©es.  Les modules sont g√©n√©ralement situ√©s dans des r√©pertoires, divis√©s par un principe logique.  Un produit est une collection de modules qui impl√©mentent ses fonctionnalit√©s et stock√©s dans un r√©f√©rentiel s√©par√©. <br><br>  Les modules sont interd√©pendants.  Un module d√©pend d'un autre s'il utilise sa logique (par exemple, fait r√©f√©rence √† des propri√©t√©s ou √† des formulaires). <br><br>  Lorsqu'un nouveau client appara√Æt, un r√©f√©rentiel s√©par√© (Git ou Subversion) est lanc√© pour lui, dans lequel des modules avec les modifications n√©cessaires seront cr√©√©s.  Ce r√©f√©rentiel d√©finit le module dit sup√©rieur.  Au d√©marrage du serveur, seuls les modules seront connect√©s, dont il d√©pend directement ou transitivement √† travers d'autres modules.  Cela permet au client d'utiliser non pas toutes les fonctionnalit√©s du produit, mais uniquement la pi√®ce dont il a besoin. <br>  Jenkins cr√©e une t√¢che qui combine les modules produit et client dans un seul fichier jar, qui est ensuite install√© sur un serveur de production ou de test. <br><br>  Consid√©rez plusieurs cas principaux d'am√©liorations qui surviennent dans la pratique: <br><br>  Supposons que nous ayons un module de <i>commande</i> dans le produit, qui d√©crit la logique de commande standard: <br><br><div class="spoiler">  <b class="spoiler_title">Module de commande</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td><code><font color="#a626a4">MODULE</font> Order; <br> <br> <font color="#a626a4">CLASS</font> Book <font color="#50a14f">''</font> ; <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">100</font> ] (Book) <font color="#a626a4">IN</font> id; <br> <br> <font color="#a626a4">CLASS</font> Order <font color="#50a14f">''</font> ; <br> date <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATE</font> (Order) <font color="#a626a4">IN</font> id; <br> number <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">STRING</font> [ <font color="#986801">10</font> ] (Order) <font color="#a626a4">IN</font> id; <br> <br> <font color="#a626a4">CLASS</font> OrderDetail <font color="#50a14f">' '</font> ; <br> order <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> Order (OrderDetail) <font color="#a626a4">NONULL</font> <font color="#a626a4">DELETE</font> ; <br> <br> book <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> Book (OrderDetail) <font color="#a626a4">NONULL</font> ; <br> nameBook <font color="#50a14f">''</font> (OrderDetail d) = name(book(d)); <br> <br> quantity <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">INTEGER</font> (OrderDetail); <br> price <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">14</font> , <font color="#986801">2</font> ] (OrderDetail); <br> sum <font color="#50a14f">''</font> (OrderDetail d) = quantity(d) * price(d); <br> <br> <font color="#a626a4">FORM</font> order <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> o = Order <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (o) date, number <br> <br> <font color="#a626a4">OBJECTS</font> d = OrderDetail <br> <font color="#a626a4">PROPERTIES</font> (d) nameBook, quantity, price, <font color="#a626a4">NEW</font> , <font color="#a626a4">DELETE</font> <br> <font color="#a626a4">FILTERS</font> order(d) = o <br> <br> <font color="#a626a4">EDIT</font> Order <font color="#a626a4">OBJECT</font> o <br> ; <br> <br> <font color="#a626a4">FORM</font> orders <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> o = Order <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">READONLY</font> date, number <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> orders; <br> } <br></code> </td></tr></tbody></table></div></div></div><br>  Le client <i>X</i> souhaite ajouter un pourcentage de remise et un prix de remise pour la ligne de commande. <br>  Tout d'abord, un nouveau module <i>OrderX</i> est cr√©√© dans le r√©f√©rentiel client.  Dans son en-t√™te, une d√©pendance est plac√©e sur le module <i>Order d'</i> origine: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">REQUIRE</font> Order;</code> </td> </tr></tbody></table></div><br>  Dans ce module, nous d√©clarons de nouvelles propri√©t√©s sous lesquelles des champs suppl√©mentaires seront cr√©√©s dans les tables et les ajouterons au formulaire: <br><div class="scrollable-table"><table><tbody><tr><td> <code>discount <font color="#50a14f">', %'</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">5</font> , <font color="#986801">2</font> ] (OrderDetail); <br> discountPrice <font color="#50a14f">'  '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">14</font> , <font color="#986801">2</font> ] (OrderDetail); <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> order <br> <font color="#a626a4">PROPERTIES</font> (d) <font color="#a626a4">AFTER</font> price(d) discount, discountPrice <font color="#a626a4">READONLY</font> <br> ; <br></code> </td></tr></tbody></table></div><br>  Nous rendons le prix r√©duit indisponible pour l'enregistrement.  Il sera calcul√© comme un √©v√©nement distinct lorsque le prix initial ou le pourcentage de remise change: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">WHEN</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">CHANGED</font> (price(OrderDetail d)) <font color="#a626a4">OR</font> <font color="#a626a4">CHANGED</font> (discount(d)) <font color="#a626a4">DO</font> <br> discountPrice(d) &lt;- price(d) * ( <font color="#986801">100</font> (-) discount(d)) / <font color="#986801">100</font> ; <br></code> </td></tr></tbody></table></div><br>  Maintenant, vous devez modifier le calcul du montant sur la ligne de commande (il doit prendre en compte notre nouveau prix discount).  Pour ce faire, nous cr√©ons g√©n√©ralement certains ¬´points d'entr√©e¬ª o√π d'autres modules peuvent ins√©rer leur comportement.  Au lieu de la d√©claration initiale de la propri√©t√© sum dans le module Order, nous utilisons ce qui suit: <br><div class="scrollable-table"><table><tbody><tr><td> <code>sum <font color="#50a14f">''</font> = <font color="#a626a4">ABSTRACT</font> <font color="#a626a4">CASE</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">16</font> , <font color="#986801">2</font> ] (OrderDetail); <br> sum (OrderDetail d) += <font color="#a626a4">WHEN</font> price(d) <font color="#a626a4">THEN</font> quantity(d) * price(d); <br></code> </td></tr></tbody></table></div><br>  Dans ce cas, la valeur de la propri√©t√© <i>sum</i> sera collect√©e dans un CAS, o√π WHEN peut √™tre dispers√© sur diff√©rents modules.  Il est garanti que si le module A d√©pend du module B, alors tout QUAND du module B fonctionnera plus tard que QUAND du module A. Pour calculer correctement le <i>montant</i> actualis√©, la d√©claration suivante est ajout√©e au module <i>OrderX</i> : <br><div class="scrollable-table"><table><tbody><tr><td> <code>sum(OrderDetail d) += <font color="#a626a4">WHEN</font> discount(d) <font color="#a626a4">THEN</font> quantity(d) * discountPrice(d); <br></code> </td></tr></tbody></table></div><br>  En cons√©quence, si une remise est fix√©e, le montant en sera soumis, sinon l'expression originale. <br><br>  Supposons qu'un client souhaite ajouter une restriction selon laquelle le montant de la commande ne doit pas d√©passer un certain montant sp√©cifi√©.  Dans le m√™me module <i>OrderX</i> , <i>nous</i> d√©clarons une propri√©t√© dans laquelle la valeur limite sera stock√©e et l'ajoutons au formulaire d' <i>options</i> standard (vous pouvez cr√©er un formulaire s√©par√© avec des param√®tres si vous le souhaitez): <br><div class="scrollable-table"><table><tbody><tr><td> <code>orderLimit <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">16</font> , <font color="#986801">2</font> ] (); <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> options <br> <font color="#a626a4">PROPERTIES</font> () orderLimit <br> ; <br></code> </td></tr></tbody></table></div><br>  Ensuite, dans le m√™me module, nous d√©clarons le montant de la commande, le montrons sur le formulaire et ajoutons une limite √† son exc√©dent: <br><div class="scrollable-table"><table><tbody><tr><td> <code>sum <font color="#50a14f">''</font> (Order o) = <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> sum(OrderDetail d) <font color="#a626a4">IF</font> order(d) = o; <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> order <br> <font color="#a626a4">PROPERTIES</font> (o) sum <br> ; <br> <font color="#a626a4">CONSTRAINT</font> sum(Order o) &gt; orderLimit() <font color="#a626a4">MESSAGE</font> <font color="#50a14f">'  '</font> ; <br></code> </td></tr></tbody></table></div><br>  Et enfin, le client a demand√© de modifier l√©g√®rement la conception du formulaire d'√©dition de commande: pour faire l'en-t√™te de commande √† gauche des lignes avec un s√©parateur, ainsi que pour toujours afficher les prix avec une pr√©cision de deux caract√®res.  Pour ce faire, le code suivant est ajout√© √† son module, ce qui modifie la conception g√©n√©r√©e standard du bon de commande: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">DESIGN</font> order { <br> <font color="#a626a4">OBJECTS</font> { <br> <font color="#a626a4">NEW</font> pane { <br> fill = <font color="#986801">1</font> ; <br> type = <font color="#a626a4">SPLITH</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (o); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (d) { <br> <font color="#a626a4">PROPERTY</font> (price(d)) { pattern = <font color="#50a14f">'#,##0.00'</font> ; } <br> <font color="#a626a4">PROPERTY</font> (discountPrice(d)) { pattern = <font color="#50a14f">'#,##0.00'</font> ; } <br> } <br> } <br> } <br> } <br></code> </td></tr></tbody></table></div>  En cons√©quence, nous obtenons deux modules <i>Order</i> (dans le produit), dans lesquels la logique de base de la commande est impl√©ment√©e, et <i>OrderX</i> (chez le client), dans lequel la logique de remise n√©cessaire est impl√©ment√©e: <br><br><div class="spoiler">  <b class="spoiler_title">Commander</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">MODULE</font> Order; <br> <br> <font color="#a626a4">CLASS</font> Book <font color="#50a14f">''</font> ; <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">100</font> ] (Book) <font color="#a626a4">IN</font> id; <br> <br> <font color="#a626a4">CLASS</font> Order <font color="#50a14f">''</font> ; <br> date <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATE</font> (Order) <font color="#a626a4">IN</font> id; <br> number <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">STRING</font> [ <font color="#986801">10</font> ] (Order) <font color="#a626a4">IN</font> id; <br> <br> <font color="#a626a4">CLASS</font> OrderDetail <font color="#50a14f">' '</font> ; <br> order <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> Order (OrderDetail) <font color="#a626a4">NONULL</font> <font color="#a626a4">DELETE</font> ; <br> <br> book <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> Book (OrderDetail) <font color="#a626a4">NONULL</font> ; <br> nameBook <font color="#50a14f">''</font> (OrderDetail d) = name(book(d)); <br> <br> quantity <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">INTEGER</font> (OrderDetail); <br> price <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">14</font> , <font color="#986801">2</font> ] (OrderDetail); <br> sum <font color="#50a14f">''</font> = <font color="#a626a4">ABSTRACT</font> <font color="#a626a4">CASE</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">16</font> , <font color="#986801">2</font> ] (OrderDetail); <br> sum (OrderDetail d) += <font color="#a626a4">WHEN</font> price(d) <font color="#a626a4">THEN</font> quantity(d) * price(d); <br> <br> <font color="#a626a4">FORM</font> order <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> o = Order <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (o) date, number <br> <br> <font color="#a626a4">OBJECTS</font> d = OrderDetail <br> <font color="#a626a4">PROPERTIES</font> (d) nameBook, quantity, price, <font color="#a626a4">NEW</font> , <font color="#a626a4">DELETE</font> <br> <font color="#a626a4">FILTERS</font> order(d) = o <br> <br> <font color="#a626a4">EDIT</font> Order <font color="#a626a4">OBJECT</font> o <br> ; <br> <br> <font color="#a626a4">FORM</font> orders <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> o = Order <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">READONLY</font> date, number <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> orders; <br> } <br></code> </td></tr></tbody></table></div></div></div><br><div class="spoiler">  <b class="spoiler_title">Orderx</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">MODULE</font> OrderX; <br> <br> <font color="#a626a4">REQUIRE</font> Order; <br> <br> discount <font color="#50a14f">', %'</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">5</font> , <font color="#986801">2</font> ] (OrderDetail); <br> discountPrice <font color="#50a14f">'  '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">14</font> , <font color="#986801">2</font> ] (OrderDetail); <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> order <br> <font color="#a626a4">PROPERTIES</font> (d) <font color="#a626a4">AFTER</font> price(d) discount, discountPrice <font color="#a626a4">READONLY</font> <br> ; <br> <br> <font color="#a626a4">WHEN</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">CHANGED</font> (price(OrderDetail d)) <font color="#a626a4">OR</font> <font color="#a626a4">CHANGED</font> (discount(d)) <font color="#a626a4">DO</font> <br> discountPrice(d) &lt;- price(d) * ( <font color="#986801">100</font> (-) discount(d)) / <font color="#986801">100</font> ; <br> <br> sum(OrderDetail d) += <font color="#a626a4">WHEN</font> discount(d) <font color="#a626a4">THEN</font> quantity(d) * discountPrice(d); <br> <br> orderLimit <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">16</font> , <font color="#986801">2</font> ] (); <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> options <br> <font color="#a626a4">PROPERTIES</font> () orderLimit <br> ; <br> <br> sum <font color="#50a14f">''</font> (Order o) = <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> sum(OrderDetail d) <font color="#a626a4">IF</font> order(d) = o; <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> order <br> <font color="#a626a4">PROPERTIES</font> (o) sum <br> ; <br> <font color="#a626a4">CONSTRAINT</font> sum(Order o) &gt; orderLimit() <font color="#a626a4">MESSAGE</font> <font color="#50a14f">'  '</font> ; <br> <br> <font color="#a626a4">DESIGN</font> order { <br> <font color="#a626a4">OBJECTS</font> { <br> <font color="#a626a4">NEW</font> pane { <br> fill = <font color="#986801">1</font> ; <br> type = <font color="#a626a4">SPLITH</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (o); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (d) { <br> <font color="#a626a4">PROPERTY</font> (price(d)) { pattern = <font color="#50a14f">'#,##0.00'</font> ; } <br> <font color="#a626a4">PROPERTY</font> (discountPrice(d)) { pattern = <font color="#50a14f">'#,##0.00'</font> ; } <br> } <br> } <br> } <br> } <br></code> </td></tr></tbody></table></div></div></div><br>  Il convient de noter que le module <i>OrderX</i> peut √™tre appel√© <i>OrderDiscount</i> et transf√©r√© directement au produit.  Ensuite, si n√©cessaire, il sera possible pour chaque client de connecter facilement la fonctionnalit√© avec des remises. <br><br>  C'est loin de toutes les possibilit√©s qu'offre la plateforme pour √©tendre les fonctionnalit√©s des modules individuels.  Par exemple, en utilisant l'h√©ritage, vous pouvez impl√©menter de mani√®re modulaire la logique de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">registre</a> . <br><br>  S'il y a des changements dans le code source du produit qui contredisent le code dans le module d√©pendant, une erreur sera g√©n√©r√©e au d√©marrage du serveur.  Par exemple, si le bon de <i>commande</i> est <i>supprim√©</i> dans le module <i>Commande</i> , au d√©marrage, il y aura une erreur indiquant que le bon de <i>commande</i> est introuvable dans le module <i>OrderX</i> .  De plus, l'erreur sera mise en √©vidence dans l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">EDI</a> .  De plus, l'EDI a une fonction pour rechercher toutes les erreurs dans le projet, ce qui vous permet d'identifier tous les probl√®mes survenus en raison de la mise √† jour de la version du produit. <br><br>  En pratique, nous avons tous les r√©f√©rentiels (du produit et de tous les clients) connect√©s au m√™me projet, nous refactorisons donc calmement le produit, tout en changeant la logique dans les modules clients o√π il est utilis√©. <br><br><h2>  Conclusion </h2><br>  Une telle architecture micromodulaire offre les avantages suivants: <br><br><ul><li>  <b>Chaque client est connect√© uniquement √† la fonctionnalit√© dont il a besoin</b> .  La structure de sa base de donn√©es ne contient que les champs qu'il utilise.  L'interface de la solution finale ne contient pas d'√©l√©ments inutiles.  Le serveur et le client n'effectuent pas d'√©v√©nements et de v√©rifications inutiles. </li><li>  <b>Flexibilit√© dans les modifications apport√©es aux fonctionnalit√©s de base</b> .  Directement dans le projet du client, vous pouvez apporter des modifications √† absolument n'importe quelle forme du produit, ajouter des √©v√©nements, de nouveaux objets et propri√©t√©s, des actions, changer la conception et bien plus encore. </li><li>  <b>La livraison des nouvelles am√©liorations requises par le client est consid√©rablement acc√©l√©r√©e</b> .  Avec chaque demande de modification, vous n'avez pas besoin de r√©fl√©chir √† la mani√®re dont cela affectera les autres clients.  Pour cette raison, de nombreuses am√©liorations peuvent √™tre apport√©es et mises en service d√®s que possible (souvent en quelques heures). </li><li>  <b>Un sch√©ma plus pratique pour √©tendre les fonctionnalit√©s du produit</b> .  Tout d'abord, toute fonctionnalit√© peut √™tre incluse pour un client sp√©cifique qui est pr√™t √† l'essayer, puis, en cas de mise en ≈ìuvre r√©ussie, les modules sont enti√®rement transf√©r√©s vers le r√©f√©rentiel de produits. </li><li>  <b>Ind√©pendance de la base de code</b> .  √âtant donn√© que de nombreuses am√©liorations sont fournies dans le cadre de contrats de service client, formellement, l'int√©gralit√© du code d√©velopp√© dans le cadre de ces contrats appartient au client.  Avec ce sch√©ma, une s√©paration compl√®te du code produit appartenant au vendeur du code appartenant au client est assur√©e.  Sur demande, nous transf√©rons le r√©f√©rentiel sur le serveur du client, o√π il peut modifier les fonctionnalit√©s dont il a besoin avec ses propres d√©veloppeurs.  De plus, si le fournisseur conc√®de des licences pour des modules de produits individuels, le client ne dispose pas du code source des modules pour lesquels il n'y a pas de licence.  Ainsi, il n'a pas la capacit√© technique de les connecter ind√©pendamment en violation des conditions de licence. <br></li></ul><br>  Le sch√©ma de modularit√© d√©crit ci-dessus √† l'aide d'extensions dans la programmation est le plus souvent appel√© <i>mix in</i> .  Par exemple, Microsoft Dynamics a r√©cemment introduit le concept d'extension, qui vous permet √©galement d'√©tendre les modules de base.  Cependant, une programmation de niveau beaucoup plus bas est requise l√†-bas, ce qui n√©cessite √† son tour des qualifications plus √©lev√©es des d√©veloppeurs.  De plus, contrairement √† lsFusion, l'expansion des √©v√©nements et des restrictions n√©cessite les ¬´points d'entr√©e¬ª initiaux du produit pour en tirer parti. <br><br>  √Ä l'heure actuelle, selon le sch√©ma d√©crit ci-dessus, nous soutenons et mettons en ≈ìuvre un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">syst√®me ERP</a> pour la vente au d√©tail avec plus de 30 clients relativement importants, qui se compose de plus de 1000 modules.  Parmi les clients, il y a les r√©seaux FMCG, ainsi que les pharmacies, les magasins de v√™tements, les cha√Ænes de magasins de drogerie, les grossistes et autres.  Dans le produit, respectivement, il existe des cat√©gories distinctes de modules qui sont connect√©s en fonction de l'industrie et des processus m√©tier utilis√©s. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr461983/">https://habr.com/ru/post/fr461983/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr461965/index.html">Application Web MVC sans frameworks ni servlets</a></li>
<li><a href="../fr461967/index.html">Antiquit√©s: magn√©tophone fonctionnel</a></li>
<li><a href="../fr461971/index.html">La puissance d'Oracle SQL</a></li>
<li><a href="../fr461973/index.html">Essai routier Audi e-tron</a></li>
<li><a href="../fr461975/index.html">Notre service est √† la fois dangereux et difficile, ou Zyxel ATP500</a></li>
<li><a href="../fr461985/index.html">Technologies postales - comment nous num√©risons la poste russe</a></li>
<li><a href="../fr461989/index.html">D√©veloppement d'une interface de jeu pour diff√©rentes proportions d'√©crans</a></li>
<li><a href="../fr461993/index.html">Comment devenir une √©picerie d'un ¬´designer r√©gulier¬ª</a></li>
<li><a href="../fr461995/index.html">Comment utiliser les proxys r√©sidents pour le marketing et la promotion de sites Web</a></li>
<li><a href="../fr461997/index.html">Optimisation des performances des requ√™tes dans PostgreSQL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>