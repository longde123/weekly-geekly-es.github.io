<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∑ ü•† üñïüèΩ O que acontece quando voc√™ envia SMS ‚õπüèº üë®üèΩ‚Äçüè≠ ü§¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este √© o terceiro artigo no loop dev da pilha completa sobre a vida secreta dos dados. Ele √© dedicado √† rota longa e dif√≠cil do SMS: discagem, salvame...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O que acontece quando voc√™ envia SMS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437510/">  Este √© o terceiro artigo no loop <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dev da pilha completa</a> sobre a vida secreta dos dados.  Ele √© dedicado √† rota longa e dif√≠cil do SMS: discagem, salvamento, envio, recebimento e exibi√ß√£o.  Vou adicionar um pouco de hist√≥rico e contexto para diluir a lista de protocolos.  Embora o texto seja bastante t√©cnico, √© muito f√°cil de entender. <br><br>  As duas primeiras partes do ciclo: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cetus</a> , sobre a dissemina√ß√£o de erros nos ancestrais das planilhas do s√©culo XVII </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Down the Rabbit Hole"</a> , sobre a busca insanamente complexa pela fonte de um conjunto de dados </li></ul><br>  Ent√£o, vamos come√ßar ... <br><a name="habracut"></a><br>  Minha perna involuntariamente se contraiu com a vibra√ß√£o: √© um telefone ou apenas parecia?  - e um olhar superficial encontrou uma luz azul piscando.  "Eu te amo" da minha esposa.  Desci imediatamente as escadas para lhe desejar boa noite, porque sei a diferen√ßa entre uma mensagem e uma <i>mensagem</i> .  √â um pouco como criptografia ou esteganografia: qualquer um v√™ o texto, mas somente eu posso decodificar os dados ocultos. <br><br>  Minha tradu√ß√£o √© apenas um link em uma surpreendentemente longa cadeia de eventos que √© necess√°ria para enviar e descriptografar uma mensagem ("des√ßa e diga boa noite") em menos de cinco segundos a uma dist√¢ncia de cerca de 10 metros. <br><br>  Aparentemente, a mensagem se originou em algum lugar no c√©rebro da minha esposa e se transformou em movimentos dos dedos, mas essa transmiss√£o de sinal √© o t√≥pico de outro artigo.  Nossa conversa come√ßa no momento em que o polegar dela tocou a tela transl√∫cida e termina quando a luz caiu na minha retina. <br><br><h1>  Atrav√©s do espelho </h1><br>  A cada toque da tela, uma pequena carga el√©trica flui para a m√£o.  Como a corrente flui facilmente pelo corpo humano, os sensores do telefone registram a mudan√ßa de voltagem no local em que o dedo tocou a tela.  Nesse caso, flutua√ß√µes aleat√≥rias de tens√£o ocorrem no restante da tela; portanto, o algoritmo determina as flutua√ß√µes m√°ximas de tens√£o e assume que foi nesse local que a pessoa quis pressionar com o dedo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6b6/e78/a47/6b6e78a47c281c7bd6ab664b26f14644.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">0. Sensor de toque capacitivo</font></i> <br><br>  Ent√£o, ela clica na tela, digitando uma letra de cada vez. <br><br> <code>I--love--you.</code> <br> <br>  Ela n√£o usa furto (mas, por algum motivo, ainda imprime mais r√°pido que eu).  O telefone registra de forma confi√°vel as coordenadas (x, y) de cada pressionamento e verifica as coordenadas de cada tecla na tela.  √â mais dif√≠cil do que voc√™ pensa;  √†s vezes o dedo desliza para longe, mas de alguma forma o telefone entende que isso n√£o √© um gesto, mas apenas um clique emba√ßado. <br><br>  Profundamente nas entranhas de metal do dispositivo, o algoritmo verifica se, cada vez que uma mudan√ßa de tens√£o cobre mais de um determinado n√∫mero de pixels, chamado de <i>slop de toque</i> .  Se a √°rea for pequena, o telefone registra um pressionamento de tecla, n√£o um furto. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ef3/fdf/3b4/ef3fdf3b4e547d827bef38d59a443fcc.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">1. C√≥digo Android para detectar slop de toque.</font></i>  <i><font color="gray">Observe que os desenvolvedores sabiam o sexo da minha esposa</font></i> <br><br>  Ela termina a mensagem, pat√©ticos 10 caracteres em 160 permitidos. <br><br>  160 caracteres √© um n√∫mero cuidadosamente verificado.  Segundo a lenda, em 1984, um engenheiro de telefone alem√£o Friedhelm Hillebrand sentou-se em uma m√°quina de escrever e escreveu tantas frases aleat√≥rias quanto lhe ocorreu.  Em seguida, sua equipe examinou os cart√µes postais e as mensagens de teletipo - e descobriu que a maioria deles n√£o excedia 160 caracteres.  "Eureka!"  - Aparentemente, eles gritaram em alem√£o antes de fixar o limite de caracteres nas mensagens de texto pelas pr√≥ximas tr√™s d√©cadas. <br><br><h1>  Restri√ß√µes e legendas de s√≠mbolos </h1><br>  As lendas raramente contam a hist√≥ria toda, e o SMS n√£o √© exce√ß√£o.  Hillebrand e sua equipe esperavam transmitir mensagens atrav√©s de um canal adicional que os telefones j√° haviam usado para trocar informa√ß√µes com a esta√ß√£o base. <br><br>  O sistema de sinaliza√ß√£o SS7 √© um conjunto de protocolos usados ‚Äã‚Äãpelos telefones celulares para manter contato constante com uma esta√ß√£o base;  eles precisam de uma conex√£o constante para receber uma chamada e transferir sua localiza√ß√£o, verificar o correio de voz etc. Ao desenvolver o protocolo em 1980, eles introduziram um limite r√≠gido de 279 bytes de informa√ß√µes.  Se Hillebrand quisesse receber mensagens de texto usando o protocolo SS7, ele deveria se encaixar nessa restri√ß√£o. <br><br>  Normalmente, 279 bytes s√£o iguais a 279 caracteres.  Existem 8 bits em um byte e, em geral, codifica√ß√µes, um caractere corresponde a um byte. <br><br>  Um <br><br> <code>0100 0001</code> <br> <br>  B <br><br> <code>0100 0010</code> <br> <br>  Com <br><br> <code>0100 0011</code> <br> <br>  e assim por diante. <br><br>  Infelizmente, para transmitir uma mensagem usando o protocolo SS7, voc√™ n√£o pode simplesmente enviar 2232 zeros e unidades (279 bytes de 8 bits) com um sinal de r√°dio de um telefone para outro.  Esta mensagem deve incluir os n√∫meros do remetente e do destinat√°rio, bem como a mensagem de servi√ßo da esta√ß√£o base "Ei, esta mensagem, n√£o uma chamada, n√£o envia um sinal de chamada!" <br><br>  Quando Hillebrand e colegas conseguiram inserir todos os bits de contexto necess√°rios em um sinal de 279 bytes, eles s√≥ tinham 140 bytes ou 1120 bits restantes. <br><br>  Mas e se voc√™ codificar um caractere em apenas 7 bits?  Em seguida, voc√™ pode espremer 160 (1120/7 = 160) caracteres em cada mensagem, mas essa redu√ß√£o requer sacrif√≠cio: menos caracteres poss√≠veis. <br><br>  A codifica√ß√£o de oito bits permite 256 caracteres poss√≠veis: um lugar √© min√∫sculo 'a', outro √© mai√∫sculo 'A', seu lugar no espa√ßo e o s√≠mbolo '@', quebra de linha e assim por diante, at√© 256. Para restringir o alfabeto a sete bits, voc√™ deve excluir alguns s√≠mbolos: s√≠mbolo 1/2 (¬Ω), s√≠mbolo de grau (¬∞), s√≠mbolo de pi (œÄ) e assim por diante.  Mas, supondo que as pessoas nunca usem esses caracteres no texto (uma suposi√ß√£o ruim, √© claro), Gillebrand e seus colegas conseguiram colocar 160 caracteres em 140 bytes.  Por sua vez, esse volume se encaixa exatamente em 279 bytes do sinal SS7: exatamente o n√∫mero de caracteres que foram definidos anteriormente como o tamanho ideal da mensagem. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/347/d87/15b/347d8715b23e4e60c82d0570b4baffbb.png"><img src="https://habrastorage.org/getpro/habr/post_images/553/47d/5e4/55347d5e47cd1add4f05f01a3e08dba8.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">2. Conjunto de caracteres GSM-7</font></i> <br><br>  E ent√£o a esposa digita "eu te amo" e o telefone converte as letras em um esquema de codifica√ß√£o de 7 bits chamado GSM-7. <br><br>  "I" (a interse√ß√£o da quarta coluna e a nona linha da tabela): <br><br> <code>49</code> <br> <br>  Espa√ßo (a interse√ß√£o da segunda coluna e a linha zero): <br><br> <code>20</code> <br> <br>  "L" = <br><br> <code>6C</code> <br> <br>  "O" = <br><br> <code>6F</code> <br> <br>  e assim por diante. <br><br>  Em geral, sua mensagem se transforma na seguinte sequ√™ncia: <br><br> <code>49 20 6C 6F 76 65 20 79 6F 75</code> <br> <br>  (Total de 10 bytes).  Cada c√≥digo de dois caracteres, chamado c√≥digo hexadecimal (hex), representa um fragmento de oito bits e, juntos, soa como "eu te amo". <br><br>  Mas, de fato, a mensagem n√£o √© t√£o armazenada no telefone.  Ele deve converter texto de 8 bits em c√≥digo de 7 bits.  Como resultado da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=http://web.archive.org/web/20081017024616/">convers√£o, a</a> mensagem come√ßa a mudar para isso: <br><br> <code>49 10 FB 6D 2F 83 F2 EF 3A</code> <br> <br>  (9 bytes) no telefone dela. <br><br>  Quando a esposa finalmente termina sua mensagem (leva apenas alguns segundos), ela clica em "Enviar" - e muitos anjinhos recebem a mensagem codificada, agitam suas asas invis√≠veis 10 metros para o meu escrit√≥rio e transferem-na cuidadosamente para o meu telefone.  O processo n√£o √© muito f√°cil, e √© por isso que meu telefone vibra um pouco na entrega. <br><br>  Os chamados "engenheiros de comunica√ß√µes" contar√£o uma hist√≥ria diferente e, por uma quest√£o de integridade, vou recont√°-la, mas se eu fosse voc√™, n√£o confiaria muito nessas pessoas. <br><br><h1>  SIM para enviar </h1><br>  O engenheiro dir√° que quando o telefone detecta uma altera√ß√£o de voltagem nas coordenadas na tela que coincide com as coordenadas do elemento gr√°fico com o bot√£o "Enviar", envia uma mensagem codificada para o cart√£o SIM e, durante o processo de transfer√™ncia, adiciona v√°rios dados contextuais.  Quando a mensagem chega ao cart√£o SIM da minha esposa, j√° n√£o existem 140, mas 176 bytes (texto + contexto). <br><br>  Outros 36 bytes s√£o usados ‚Äã‚Äãpara codificar outras informa√ß√µes, como mostrado abaixo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8ba/64d/ced/8ba64dced4f26bd4db2bd01cb10daac9.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">3. Aqui, os bytes s√£o chamados octetos (8 bits).</font></i>  <i><font color="gray">A contagem de todos d√° 174 octetos (10 + 1 + 1 + 12 + 1 + 1 + 7 + 1 + 140).</font></i>  <i><font color="gray">Os dois bytes restantes s√£o reservados para cart√µes SIM de contabilidade</font></i> <br><br>  Os dez primeiros bytes s√£o reservados para o n√∫mero de telefone (SCA) da central de SMS (SMSC), respons√°vel por receber, armazenar, encaminhar e entregar mensagens de texto.  De fato, √© um interruptor: o telefone da esposa envia um sinal para a torre de celular local, que envia uma mensagem de texto para o SMSC.  O centro de SMS, que no nosso caso √© controlado pela AT&amp;T, envia o texto para a esta√ß√£o base mais pr√≥xima do meu telefone.  Enquanto me sento em tr√™s quartos da minha esposa, a mensagem √© retornada para a mesma esta√ß√£o base e depois para o meu telefone. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5f3/2f4/74e/5f32f474eae14a1b1d10f8f1a9baf4e0.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">4. Rede de SMS celular</font></i> <br><br>  O pr√≥ximo byte (tipo PDU) codifica informa√ß√µes b√°sicas sobre como o telefone deve interpretar a mensagem: se foi enviada com √™xito, se √© necess√°ria uma mensagem de entrega e (importante) se √© um texto √∫nico ou parte de uma cadeia de mensagens relacionadas. <br><br>  O byte ap√≥s o tipo de PDU √© uma refer√™ncia de mensagem (MR).  Na verdade, esse n√∫mero de 1 a 255 √© usado como um ID de curto prazo para que o telefone e a operadora reconhe√ßam a mensagem.  A mensagem da esposa √© definida como o n√∫mero 0, porque o telefone dela tem seu pr√≥prio sistema de identifica√ß√£o de mensagens, independente desse arquivo espec√≠fico. <br><br>  Os pr√≥ximos doze bytes s√£o reservados para o n√∫mero de telefone do destinat√°rio, chamado de endere√ßo de destino (DA).  Com exce√ß√£o da codifica√ß√£o de texto de 7 bits, que ajuda a compactar 160 letras em 140 caracteres, a codifica√ß√£o de n√∫mero de telefone √© a coisa mais est√∫pida e confusa deste SMS.  √â chamado de nota√ß√£o de mordidinha reversa e converte cada d√≠gito em mordidela, ou seja, mordidela e os troca (voc√™ entende tudo? Um meio byte √© mordidela, hahahahaha, mas ningu√©m ri, s√£o engenheiros). <br><br>  Meu n√∫mero 1-352-537-8376 no telefone da minha esposa est√° registrado como: <br><br>  3125358773f6 <br><br>  1-3 vira <br><br> <code>31</code> <br> <br>  52 se transforma em <br><br> <code>25</code> <br> <br>  53 se transforma em <br><br> <code>35</code> <br> <br>  7-8 se transforma em <br><br> <code>87</code> <br> <br>  37 se transforma em <br><br> <code>73</code> <br> <br>  E os √∫ltimos 6 se transformam em ... <br><br> <code>f6</code> <br> <br>  Que diabos esses seis levaram?  Bem, isso significa o fim do n√∫mero, mas por algum motivo terr√≠vel (novamente, nota√ß√£o reversa), √© um caractere antes do √∫ltimo d√≠gito. <br><br>  Isso √© como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"latim porquinho",</a> apenas para n√∫meros. <br><br> <code>   ,   .    ,   .</code> <br> <br>  Mas eu n√£o estou brincando. <br><br>  [UPD: Sean Gies <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">apontou</a> que a mordidela de escrever de volta √© um artefato inevit√°vel de representar n√∫meros de 4 bits, dos menores aos mais antigos (little-endian) fragmentos de 8 bits.  Isso n√£o nega a descri√ß√£o acima, mas adiciona algum contexto para quem entende e toma a decis√£o mais razo√°vel]. <br><br>  O byte do identificador de protocolo (PID) √© agora, em geral, desperdi√ßado.  Leva cerca de 40 valores poss√≠veis e informa ao provedor como enviar uma mensagem.  Valor <br><br> <code>22</code> <br> <br>  significa que a esposa envia "eu te amo" para o fax e o valor <br><br> <code>24</code> <br> <br>  significa que ela de alguma forma envia para a linha de voz.  Como esta mensagem est√° na forma de SMS para o telefone, o PID est√° definido como <br><br> <code>0</code> <br> <br>  (Como qualquer outro texto enviado no mundo moderno). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ac7/b49/579/ac7b495795883450f653cf12cc5c2bcb.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">5. Valores poss√≠veis de PID</font></i> <br><br>  O pr√≥ximo byte √© um esquema de codifica√ß√£o de dados (DCS, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">consulte a documenta√ß√£o</a> ), que informa ao operador e ao telefone do destinat√°rio qual esquema de codifica√ß√£o de caracteres foi usado.  Minha esposa enviou o texto para o GSM-7, mas √© f√°cil imaginar que o texto possa ser digitado em cir√≠lico, hier√≥glifos ou equa√ß√µes matem√°ticas complexas (bem, talvez n√£o seja f√°cil de imaginar, mas todo mundo tem o direito de sonhar, certo?). <br><br>  No texto da esposa, o byte DCS est√° definido como <br><br> <code>0</code> <br> <br>  que corresponde a um alfabeto de 7 bits, mas o valor pode ser alterado para um alfabeto de 8 ou 16 bits, embora isso deixe muito menos espa√ßo para caracteres.  A prop√≥sito, √© por isso que seus emojis reduzem o n√∫mero de caracteres dispon√≠veis. <br><br>  Ainda h√° uma pequena bandeira no byte do DCS que informa ao telefone se a mensagem deve ser autodestru√≠da ap√≥s o envio, como no filme Miss√£o Imposs√≠vel, ent√£o isso √© muito legal. <br><br>  O per√≠odo de validade (VP) leva at√© sete bytes e nos d√° a oportunidade de nos familiarizar com outro aspecto de como o sistema de encaminhamento de SMS realmente funciona.  D√™ uma outra olhada na Figura 4 na parte superior.  Est√° tudo bem, eu vou esperar. <br><br>  Ent√£o, quando a esposa finalmente clica no bot√£o "Enviar", o texto √© enviado para o centro SMS (SMSC), que ent√£o envia uma mensagem para mim.  Estou sentado no segundo andar e meu telefone est√° ligado, ent√£o recebo uma mensagem em alguns segundos, mas e se o telefone estiver desligado?  Obviamente, ele n√£o pode aceitar a mensagem, ent√£o o SMSC deve fazer algo com o texto. <br><br>  Se o SMSC n√£o conseguir encontrar meu telefone, a mensagem da minha esposa simplesmente entrar√° no sistema at√© que meu telefone se conecte - e o centro de SMS enviar√° imediatamente o texto.  Eu gosto de imaginar como o SMSC verifica constantemente todos os telefones da rede para verificar se √© o meu telefone ou n√£o: como um filhote de cachorro esperando pelo propriet√°rio na porta cheira cada transeunte: √© o cheiro da minha pessoa?  N√£o.  Talvez <i>este seja o</i> cheiro do meu homem?  N√£o.  √â o cheiro do meu homem?  DADAPRIGUATURE !!! <br><br>  Os bytes do per√≠odo de validade (VP) informam ao sistema quanto tempo o filhote ir√° esperar antes de se cansar e encontrar um novo lar.  Este √© um carimbo de data / hora ou uma lacuna, e diz essencialmente: "Se voc√™ n√£o encontrou o telefone do destinat√°rio nos pr√≥ximos dias, n√£o se preocupe em enviar uma mensagem".  Por padr√£o, o per√≠odo de validade do SMS √© 10.080 minutos; portanto, se o telefone n√£o se conectar √† rede dentro de sete dias, ele nunca receber√° esse SMS. <br><br>  Como o SMS geralmente possui muito espa√ßo vazio, alguns bits s√£o dedicados a garantir que o telefone e a operadora saibam exatamente quais bytes n√£o s√£o usados.  O cart√£o SIM da esposa est√° aguardando um SMS de 176 bytes, mas ela escreveu uma mensagem muito curta; portanto, se o cart√£o SIM receber apenas 45 bytes, ele poder√° ficar confuso e sugerir algum tipo de falha.  O User Data Length Byte (UDL) resolve esse problema: indica com precis√£o quantos bytes est√£o na mensagem de texto. <br><br>  No caso de "eu te amo", a UDL indicar√° que a mensagem cont√©m 9 bytes.  Voc√™ pode esperar que o valor seja 10 bytes, um byte para cada um dos dez caracteres: <br><br> <code>I-spacebar-love-spacebar-you</code> <br> <br>  mas como cada caractere consiste em sete bits, e n√£o oito (byte completo), voc√™ pode redefinir o byte extra ao traduzir: 7 bits * 10 caracteres = 70 bits, divida por 8 (o n√∫mero de bits em um byte) = 8,75 bytes, arredondado at√© 9 bytes. <br><br>  Chegamos √† √∫ltima parte do SMS: esta √© a pr√≥pria mensagem ou UD (dados do usu√°rio).  Uma mensagem pode levar at√© 140 bytes, embora, como acabei de mencionar, "eu te amo" leve um n√∫mero miser√°vel 9. √â incr√≠vel o quanto est√° empacotado nesses 9 bytes: n√£o apenas uma mensagem (o suposto amor de minha esposa por mim, que j√° √© bastante dif√≠cil de compactar com zeros e unidades), mas tamb√©m o pr√≥prio significado (voc√™ precisa descer e desejar-lhe boa noite).  Esses bytes s√£o: <br><br> <code>49 10 FB 6D 2F 83 F2 EF 3A</code> <br> <br>  Em geral, esta mensagem √© salva no cart√£o SIM da minha esposa: <br><br>  SCA [1-10] -PDU [1] -MR [1] -DA [1-12] -DCS [1] -VP [0, 1 ou 7] -UDL [1] -UD [0-140] <br><br> <code>00 - 11 - 00 - 07 31 25 35 87 73 F6 - ?? 00 ?? - ?? - 09 - 49 10 FB 6D 2F 83 F2 EF 3A</code> <br> <br>  (Nota: para receber a mensagem completa, voc√™ precisa cavar um pouco mais. Infelizmente, apenas uma <i>parte da</i> mensagem √© vis√≠vel aqui devido a caracteres n√£o exibidos, pontos de interroga√ß√£o) <br><br><h1>  Ondas no ar </h1><br>  Agora, o SMS deve come√ßar de alguma maneira sua dif√≠cil jornada do cart√£o SIM para a esta√ß√£o base mais pr√≥xima.  Para fazer isso, o telefone da esposa deve converter a sequ√™ncia de 176 a 279 bytes para o protocolo de sinaliza√ß√£o SS7, converter esses bytes digitais em um sinal de r√°dio anal√≥gico e, em seguida, enviar os sinais ao ar com uma frequ√™ncia em algum lugar entre 800 e 2000 MHz.  Isso significa que entre os picos das ondas a dist√¢ncia √© de 15 a 37 cm. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b16/5d2/dcd/b165d2dcd67927e07e7a08279e62e1dc.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">6. O comprimento de onda</font></i> <br><br>  Para transmiss√£o e recep√ß√£o eficientes de sinais, a antena deve ter pelo menos metade do comprimento de onda.  Se as ondas de comunica√ß√£o celular s√£o de 15 a 37 cm, as antenas devem ter um tamanho de 7 a 19 cm. Agora pare e pense na altura m√©dia do telefone m√≥vel e por que nunca diminui. <br><br>  Por meio de uma certa gin√°stica digital, cuja explica√ß√£o levar√° muito tempo, o telefone da minha esposa dispara repentinamente em um pacote de informa√ß√µes de 279 bytes com o texto "eu te amo" na velocidade da luz em todas as dire√ß√µes, o que acaba desaparecendo e se dissolvendo no ru√≠do do r√°dio ap√≥s cerca de 50 quil√¥metros. <br><br>  Muito antes disso, o sinal atinge a esta√ß√£o base AT&amp;T HSPA ID199694204 LAC21767.  Esta esta√ß√£o base de transceptores (BTS) fica a cerca de cinco quarteir√µes da minha padaria La Gourmandine favorita em Hazelwood e, embora eu tenha encontrado suas coordenadas usando o aplicativo OpenSignal para Android, a antena est√° bem escondida dos olhares indiscretos. <br><br>  A coisa mais surpreendente aqui √© que o BTS geralmente recebe esse sinal, considerando todo o resto.  Minha esposa n√£o apenas envia "Love You" na mil√©sima parte da faixa do espectro eletromagn√©tico, mas dezenas de milhares de outras pessoas em um raio de 50 quil√¥metros no momento est√£o falando ao telefone ou escrevendo mensagens.  Al√©m disso, muitos sinais de r√°dio e televis√£o est√£o argumentando por nossa aten√ß√£o no ar, junto com a luz vis√≠vel que √© refletida em diferentes dire√ß√µes, essa √© apenas uma pequena parte das ondas eletromagn√©ticas que parecem interferir no BTS. <br><br>  Como Richard Feynman colocou eloquentemente em 1983, uma torre de celular √© como um pequeno besouro cego deitado na √°gua na beira da piscina: somente pela altura e dire√ß√£o das ondas √© que determina quem e onde est√° nadando. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/1qQQXTMih1A" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><font color="gray">Feynman discute as ondas</font></i> <br><br>  Em parte devido √† interfer√™ncia complexa dos sinais, cada esta√ß√£o base do transceptor geralmente n√£o pode processar mais de 200 usu√°rios ativos (voz ou dados) ao mesmo tempo.  Ent√£o, ‚ÄúLove You‚Äù faz ping na esta√ß√£o base local a cerca de 800 metros daqui, e depois grita no vazio em todas as dire√ß√µes at√© que desapare√ßa no barulho geral. <br><br><h1>  Comuta√ß√£o </h1><br>  Dadas todas as circunst√¢ncias, tive muita sorte.  Se minha esposa e eu estiv√©ssemos servidos por diferentes operadoras de telefonia m√≥vel ou estiv√©ssemos em cidades diferentes, a rota de sua comunica√ß√£o se tornaria muito mais longa. <br><br>  Uma mensagem SS7 de 277 bytes chega ao BTS local ao lado da padaria.  A partir da√≠, entra no controlador da esta√ß√£o base (BSC), que √© o c√©rebro n√£o apenas do nosso, mas tamb√©m de v√°rias outras antenas locais.  O BSC transfere o texto para o MSC (Pittsburgh AT&amp;T Mobile Switching Center), que se baseia em uma mensagem de texto SCA (lembre-se do endere√ßo do centro de servi√ßo incorporado em cada SMS? √â aqui que voc√™ precisa) para receber a mensagem no centro SMS correspondente (SMSC). <br><br>  Esse jarg√£o √© mais f√°cil de entender usando o diagrama da Figura 7;  Acabei de descrever as etapas 1 e 3. Se a esposa estivesse com outra operadora, seguir√≠amos para as etapas 4-7, porque √© a√≠ que as operadoras de telefonia m√≥vel se comunicam.  O SMS deve vir do SMSC para o comutador global e, potencialmente, saltar pelo mundo antes de encontrar um caminho para o meu telefone. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8c9/13d/e41/8c913de41b9e230bbcddc4f6ddfb1435.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">7. roteamento GSM</font></i> <br><br>  Mas ela tamb√©m trabalha na AT&amp;T, e nossos telefones est√£o conectados √† mesma c√©lula. Portanto, ap√≥s a terceira etapa, o pacote amoroso de 279 bytes √© simplesmente implantado e retornado pelo mesmo centro de SMS, pela mesma esta√ß√£o base, mas agora no meu telefone. ela.  Viajando v√°rias dezenas de quil√¥metros em pouco tempo. <br><br><h1>  Enviado para o sim </h1><br>  Bzzzzz.  O bolso vibrou.  A notifica√ß√£o deixa claro que o SMS chegou no cart√£o nano-SIM, um chip min√∫sculo do tamanho de um dedo mindinho.  Como Bilbo Bolseiro ou qualquer bom aventureiro, isso mudou um pouco no caminho para l√° e para tr√°s. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/687/031/783/6870317839d63f2eec68a64e76574097.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">8. A mensagem recebida difere da mensagem enviada (Fig. 3)</font></i> <br><br>  A Figura 8 mostra a estrutura da mensagem recebida "Eu te amo".  Comparando as Figuras 3 e 8, vemos v√°rias diferen√ßas.  SCA (n√∫mero do centro de SMS), PDU (alguns ajustes mec√¢nicos), PID (‚Äúde telefone para telefone‚Äù, n√£o ‚Äútelefone para fax‚Äù), DCS (esquema de codifica√ß√£o), UDL (comprimento da mensagem) e UD (em si mensagem) permaneceu inalterada, mas VP (per√≠odo de validade), MR (n√∫mero de identifica√ß√£o da mensagem) e DA (meu n√∫mero de telefone) est√£o ausentes. <br><br>  Em vez disso, dois novos blocos de informa√ß√µes apareceram no telefone: OA (n√∫mero de telefone original da esposa) e SCTS (registro de data e hora do centro de SMS. Ou seja, quando a esposa enviou a mensagem). <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O n√∫mero de telefone da minha esposa √© armazenado na mesma nota√ß√£o reversa e irritante (como dislexia, apenas em computadores), na qual meu n√∫mero foi armazenado no telefone dela e o carimbo de data e hora est√° no mesmo formato da data de validade armazenada no telefone. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essas duas substitui√ß√µes s√£o completamente l√≥gicas. </font><font style="vertical-align: inherit;">O telefone dela deveria entrar em contato comigo em um determinado momento, em um endere√ßo espec√≠fico, e agora preciso saber quem enviou a mensagem e quando. </font><font style="vertical-align: inherit;">Sem um endere√ßo de retorno, eu n√£o entenderia exatamente quem enviou esta mensagem, para que sua interpreta√ß√£o pudesse mudar bastante.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Luz brilhante da tela </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como qualquer computador converte um fluxo de bytes em uma s√©rie de coordenadas (x, y) para pixels de determinadas cores, o telefone recebe um comando para exibir, </font></font><br><br> <code>49 10 FB 6D 2F 83 F2 EF 3A</code> <br> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para que eu veja o texto "Eu te amo" na tela em pontos brilhantes em preto e branco. Este √© um processo interessante, mas n√£o √© particularmente exclusivo para smartphones, ent√£o voc√™ precisa procurar em outro lugar. Focamos em como essas instru√ß√µes se transformam em pontos de luz. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os profissionais de marketing amig√°veis ‚Äã‚Äãda Samsung chamam minha tela de Super AMOLED (diodo emissor de luz org√¢nico da matriz ativa) - uma matriz ativa em LEDs org√¢nicos, que √© de alguma forma redundante e n√£o particularmente informativa, ent√£o ignore a descriptografia da abrevia√ß√£o como outra distra√ß√£o e mergulhe diretamente na tecnologia.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em cada um dos 83 cent√≠metros quadrados da tela, cerca de 50.000 pixels pequenos cabem no meu telefone. Para que essa quantidade caiba, cada pixel deve ter cerca de 45 m√≠crons de largura (micr√¥metros): mais fino que o cabelo humano. Quatro milh√µes de elementos leves em uma √°rea do tamanho de uma palma. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas voc√™ j√° sabe como as telas funcionam. Voc√™ sabe que todos os pontos do mundo, como o Deus crist√£o ou os mosqueteiros (menos d'Artagnan), s√£o sempre "tr√™s em um". Vermelho, verde e azul formam a luz branca de um pixel. Se voc√™ alterar o brilho de cada canal, poder√° obter qualquer cor RGB. E como 4 √ó 3 = 12, essas s√£o 12 milh√µes de pequenas fontes de luz, inocentemente cochilando atr√°s do meu espelho preto, esperando que eu pressione o bot√£o liga / desliga para ler uma mensagem da minha esposa.</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f0b/9ad/9da/f0b9ad9dabfa0c5ee715be484684ac13.png"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 9. Matriz de subpixel da tela OLED da Samsung</font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como segue da abrevia√ß√£o, cada pixel √© um LED org√¢nico. Este √© um jarg√£o t√©cnico incompreens√≠vel para um simples sandu√≠che el√©trico:</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/22d/87c/aeb/22d87caebf3da5cd94ef88482c453b6a.png"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fig. 10. Sandu√≠che el√©trico N√£o</font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© necess√°rio estudar a finalidade de cada camada, √© importante apenas saber que o c√°todo (placa com carga negativa) est√° localizado sob uma camada de mol√©culas org√¢nicas (apenas algumas mol√©culas com carbono) e √© coberto por um √¢nodo (placa com carga positiva) na parte superior.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quando o telefone deseja ligar a tela, envia el√©trons do c√°todo para o √¢nodo. As mol√©culas no meio recebem uma carga e come√ßam a emitir luz vis√≠vel - f√≥tons, atrav√©s do √¢nodo transparente, a tela nos meus olhos abertos.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como cada pixel tem tr√™s pontos de luz (vermelho, verde e azul), na verdade existem tr√™s sandu√≠ches por pixel. S√£o todos essencialmente iguais, com exce√ß√£o da mol√©cula org√¢nica: poli-para-fenileno para luz azul, politiofeno para vermelho e poli-para-fenileno-vinileno para verde. Como cada um deles √© um pouco diferente, eles brilham em cores diferentes ao passar a corrente. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Fato interessante: os subpixels azuis queimam muito mais r√°pido devido a um processo chamado aniquila√ß√£o do exciton polaron, que soa realmente emocionante, n√£o √©?)</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todos os quatro milh√µes de pixels est√£o localizados na matriz de √≠ndice. Um √≠ndice funciona em um computador da mesma maneira que um √≠ndice de um livro: quando um telefone deseja que um pixel espec√≠fico emita uma cor espec√≠fica, ele pesquisa esse pixel no √≠ndice e envia um sinal para o endere√ßo encontrado. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que haja luz, e a luz se torne.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Outro fato engra√ßado: agora voc√™ sabe o que ‚Äúmatriz ativa em LEDs org√¢nicos‚Äù significa AMOLED, embora voc√™ n√£o tenha perguntado). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O sistema operacional do telefone interpreta uma mensagem de texto de sua esposa, determina o formato de cada letra e compara esses n√∫meros com uma matriz de √≠ndice. Ela envia os impulsos el√©tricos certos para a tela Super AMOLED para exibir essas tr√™s pequenas palavras que viajaram at√© agora e derrotaram todos os inimigos em seu caminho.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui √© muito estranho que meus olhos nunca vejam letras √† luz brilhante dos LEDs: o texto aparece em preto e branco. O telefone cria a ilus√£o de texto atrav√©s do espa√ßo negativo, preenchendo a tela com branco, configurando todos os pixels vermelhos, verdes e azuis para o brilho m√°ximo e, em seguida, desativando aqueles onde as letras devem estar. Sua complexidade √© abusivamente mundana. </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/fc8/3ca/577/fc83ca577a50c7267235834232f6cb51.png"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 11. Espa√ßo negativo</font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Iluminando tudo, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exceto</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a mensagem de texto de minha esposa e permitindo que eu lesse entre a luz, o telefone apresenta brevemente as mentiras subjacentes √† era da informa√ß√£o moderna: que a comunica√ß√£o √© </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f√°cil</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Velocidade e aparente simplicidade escondem muitos intermedi√°rios.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E estes n√£o s√£o apenas intermedi√°rios t√©cnicos. Uma mensagem de minha esposa n√£o chegaria at√© mim se eu n√£o tivesse pago minha conta de telefone a tempo, se n√£o fosse o pequeno ex√©rcito de trabalhadores que servem sistemas financeiros nos bastidores. T√©cnicos mant√™m as torres de celular em opera√ß√£o, atrav√©s de uma rede de estradas parcialmente subsidiadas por impostos federais coletados de centenas de milh√µes de americanos em 50 estados. Como muitas transa√ß√µes ainda ocorrem por correio, se o sistema de correio falhar amanh√£, o servi√ßo telef√¥nico tamb√©m ser√° prejudicado. Os detalhes de ambos os nossos telefones foram coletados por trabalhadores exaustos em f√°bricas na Am√©rica do Sul e na √Åsia, e os programadores exaustos que alugam quartos caros no Vale do Sil√≠cio escreveram um c√≥digo que garante comunica√ß√£o constante para nossos telefones.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tudo isso est√° escondido em 10 letras. </font><font style="vertical-align: inherit;">O texto, que, para ser honesto, significa muito mais do que o que est√° escrito nele. </font><font style="vertical-align: inherit;">Meu c√©rebro analisa inconscientemente os anos de comunica√ß√£o com minha esposa para decifrar a mensagem no telefone, mas entre ela e eu ainda existem muitos bosques de media√ß√£o sociot√©cnica - um caldo de pessoas, eventos e detalhes que nunca podem ser desvendados.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> As consequ√™ncias </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E aqui estou eu, no meu escrit√≥rio, numa tarde de domingo. </font><font style="vertical-align: inherit;">"Eu te amo", escreveu a esposa no quarto abaixo, e depois de alguns segundos uma mensagem chegou ao meu telefone a dez metros de dist√¢ncia. </font><font style="vertical-align: inherit;">Entendo o que isso significa: √© hora de desejar-lhe boa noite e possivelmente concluir este artigo. </font><font style="vertical-align: inherit;">Escrevo as √∫ltimas palavras, agora um pouco mais conscientes das complexas camadas de quil√¥metros, sinais, d√©cadas de hist√≥ria e suor humano, que foram necess√°rios para que minha esposa n√£o gritasse comigo por maldi√ß√£o que era hora de descansar.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt437510/">https://habr.com/ru/post/pt437510/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt437496/index.html">Sobre vari√°veis ‚Äã‚Äãna programa√ß√£o</a></li>
<li><a href="../pt437500/index.html">Sobre coisas "invis√≠veis" importantes - confian√ßa, cultura e valores</a></li>
<li><a href="../pt437502/index.html">Vou parar de jogar o bem no lixo</a></li>
<li><a href="../pt437504/index.html">Pequenos componentes: o que poderia dar errado? Usamos o princ√≠pio da responsabilidade exclusiva</a></li>
<li><a href="../pt437508/index.html">CVE-2019-6111 e outras vulnerabilidades do scp</a></li>
<li><a href="../pt437512/index.html">O que s√£o fun√ß√µes puras em JavaScript?</a></li>
<li><a href="../pt437514/index.html">Procurando por erros no c√≥digo-fonte do Amazon Web Services SDK para .NET</a></li>
<li><a href="../pt437516/index.html">Procurando bugs no c√≥digo-fonte do Amazon Web Services SDK para .NET</a></li>
<li><a href="../pt437518/index.html">Ataque de besouros</a></li>
<li><a href="../pt437520/index.html">‚ÄúMinha luz √© um espelho! - diga, mostre-me minha dupla ... ": crie um bom quadro e receba o segundo como presente</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>