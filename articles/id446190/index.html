<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚡 👨🏿‍⚖️ 🍑 Sistem otomasi rumah saya. Membuat gambar sistem operasi 📌 👬 🖐🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pendahuluan 

 Menginstal sistem pada Raspberry Pi 2.3 

 Saya akan menjelaskan cara termudah, menurut saya, untuk pemula. 

 Semua tindakan akan terj...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sistem otomasi rumah saya. Membuat gambar sistem operasi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446190/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pendahuluan</a> <br><br>  Menginstal sistem pada Raspberry Pi 2.3 <br><br>  Saya akan menjelaskan cara termudah, menurut saya, untuk pemula. <br><br>  Semua tindakan akan terjadi di Ubuntu 18.04. <br><br>  Untuk bantuan tentang perintah, gunakan perintah "man" + perintah yang diinginkan. <br><br><pre><code class="bash hljs">man ls</code> </pre> <br>  Atau perintah yang diperlukan dengan kunci --help <br><br><pre> <code class="bash hljs">ls --<span class="hljs-built_in"><span class="hljs-built_in">help</span></span></code> </pre> <br><a name="habracut"></a><br>  1. Memasang sistem operasi Raspbian Stretch Lite pada kartu microSD. <br><br>  Kartu MicroSD harus kelas 10 dan dengan kapasitas 8 gigabytes. <br>  Masukkan kartu SD ke komputer dan masukkan perintah: <br><br><pre> <code class="bash hljs">lsblk</code> </pre> <br><img src="https://habrastorage.org/webt/li/ti/y4/litiy47g_6lk1faubuj78odw3vi.png"><br><br>  Pada contoh, peta didefinisikan sebagai mmcblk0, maka saya akan menggunakan nama ini. <br><br>  Kemudian, untuk menghapus kartu dari informasi yang direkam sebelumnya (maka kami akan membuat gambar disk), Anda perlu menghapusnya dengan perintah: <br><br><pre> <code class="bash hljs">dd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>=/dev/zero of=/dev/mmcblk0</code> </pre> <br>  Perintah ini memerlukan hak pengguna super, untuk ini Anda perlu menambahkan kata kunci <i>"sudo"</i> di awal.  Selanjutnya, saya memberi perintah tanpa <i>sudo</i> .  Saat memasukkan perintah, gunakan pelengkapan otomatis (tombol Tab) ini diperlukan untuk mengontrol input perintah dan jalur file yang benar.  Ketika perintah sedang berjalan, Anda dapat mengunduh distribusi baru dari sistem operasi. <br><br>  Unduh dari sini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">raspberrypi.org</a> <br>  Kami membutuhkan Raspbian Stretch Lite.  Buka paket zip yang diunduh, kita perlu file dengan ekstensi img - ini adalah gambar disk yang akan kita salin ke kartu.  Jadi, jika kita memiliki disk image dan perintah dd selesai, maka lanjutkan. <br><br>  Salin gambar ke kartu: <br><br><pre> <code class="bash hljs">dd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>=/path/to/raspbian.img of=/dev/mmcblk0 bs=4M status=progress</code> </pre> <br>  setelah selesai, masukkan perintah: <br><br><pre> <code class="bash hljs">sync</code> </pre> <br>  Kami mengambil kartu dan memasukkannya kembali. <br><br>  Buat file kosong di disk boot peta kami: <br><br><pre> <code class="bash hljs">touch /media/<span class="hljs-variable"><span class="hljs-variable">$USER</span></span>/boot/ssh</code> </pre> <br>  Ini diperlukan agar server ssh diluncurkan pada Raspberry. <br><br>  Kartu harus dilepas dengan aman, dimasukkan ke dalam Raspberry, terhubung ke jaringan kabel dan diberi energi.  Jika tidak ada catu daya 2 apmera, maka Anda dapat menyalakannya dari komputer dengan USB3.  Pada boot pertama, sistem akan meningkatkan ukuran disk ke ukuran kartu, itu akan memakan waktu. <br><br>  Untuk mengetahui alamat IP RPi kami, Anda dapat menggunakan utilitas arp-scan.  Jika tidak diinstal, atur: <br><br><pre> <code class="bash hljs">apt install arp-scan</code> </pre> <br>  Kami mengetahui nama kartu jaringan kami: <br><br><pre> <code class="bash hljs">ip a</code> </pre> <br>  atau <br><br><pre> <code class="bash hljs">netstat -i</code> </pre> <br><img src="https://habrastorage.org/webt/sg/kr/6w/sgkr6wb793k2l4dmscvleeo_4pa.png"><br><br>  Saya memiliki kartu wifi bernama wlp1s0. <br><br>  Jalankan arp-scan: <br><br><pre> <code class="bash hljs">arp-scan -I wlp1s0 -l</code> </pre> <br><img src="https://habrastorage.org/webt/vk/fz/oh/vkfzohdrqybskrape13_qijsf8e.png"><br><br>  Saya perlu RPi dengan IP 192.168.0.114, alamatnya ditetapkan oleh DHCP dan bisa apa saja. <br><br>  Kami pergi ke RPi oleh ssh: <br><br><pre> <code class="bash hljs">ssh pi@192.168.0.114</code> </pre> <br>  Anda harus memasukkan <i>ya</i> pada otentikasi pertama, lalu masukkan kata sandi untuk pi - <i>raspberry</i> . <br><br>  Jika kami berhasil masuk ke Raspberry, masukkan perintah: <br><br><pre> <code class="bash hljs">init 0</code> </pre> <br>  Perintah ini mematikan RPi. <br><br>  Anda perlu memasukkan kartu ke komputer lagi.  Sekarang kita membutuhkan program "gparted", jika belum diinstal, atur: <br><br><pre> <code class="bash hljs">apt install gparted</code> </pre> <br>  Kami mulai gparted, Anda perlu mengubah ukuran disk mmcblk0p2, meninggalkan pada akhirnya area yang tidak terisi sebesar 300-500 megabyte atau 2-3% dari ukuran kartu, ini diperlukan agar gambar kami dapat masuk pada kartu dari pabrikan yang berbeda, dan mereka dapat bervariasi dalam ukuran.  Hasilnya harus seperti ini: <br><br><img src="https://habrastorage.org/webt/pi/gq/y1/pigqy1qfzik2laujmitutxwzn8g.png"><br><br>  Setelah menyelesaikan pekerjaan dengan gparted, Anda dapat membuat salinan cadangan kartu, sehingga jika terjadi masalah dalam percobaan lebih lanjut, Anda memiliki gambar yang sudah jadi. <br><br><pre> <code class="bash hljs">dd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>=/dev/mmcblk0 | bzip2 &gt; raspbian.bz2</code> </pre> <br>  sekarang kita selalu dapat mengembalikan disk kita dengan perintah: <br><br><pre> <code class="bash hljs">bzcat raspbian.bz2 | dd bs=4M of=/dev/mmcblk0</code> </pre> <br>  Sebagai hasilnya, kami memiliki kartu microSD dengan sistem operasi yang siap digunakan dan salinan cadangannya. <br><br>  2. Mengkonfigurasi Raspbian Stretch Lite. <br><br>  Kami pergi ke RPi oleh ssh.  Untuk mengkonfigurasi alamat statis jaringan kabel dan wifi, tambahkan pengaturan berikut ke akhir file /etc/dhcpcd.conf: <br><br>  <i>antarmuka eth0</i> <i><br></i>  <i>ip_address statis = 192.168.0.10 / 24</i> <i><br></i>  <i>router statis = 192.168.0.1</i> <i><br></i>  <i>domain_name_servers statis = 8.8.8.8, 8.8.4.4</i> <i><br></i>  <i>antarmuka wlan0</i> <i><br></i>  <i>ip_address statis = 192.168.0.10 / 24</i> <i><br></i>  <i>router statis = 192.168.0.1</i> <i><br></i>  <i>domain_name_servers statis = 8.8.8.8, 8.8.4.4</i> <br><br>  Dengan pengaturan ini, RPi akan memiliki IP yang sama pada jaringan kabel atau wifi. <br><br>  File untuk mengonfigurasi wifi - /etc/wpa_supplicant/wpa_supplicant.conf <br>  tambahkan pengaturan berikut untuk itu: <br><br>  <i>jaringan = {</i> <i><br></i>  <i>ssid = "NAME"</i> <i><br></i>  <i>psk = "LULUS"</i> <i><br></i>  <i>}</i> <br>  tempat NAME dan PASS nama pengguna dan kata sandi dari jaringan wifi.  Jika tidak diketahui sebelumnya di mana harus menggunakan RPi kami, maka nama dan kata sandi dapat dimasukkan kemudian. <br><br>  Tambahkan tugas ke program cron <br><br><pre> <code class="bash hljs">crontab -e</code> </pre> <br>  Pada awal pertama, Anda harus memilih editor teks, nano - akan menjadi yang paling akrab. <br><br><img src="https://habrastorage.org/webt/ki/dr/an/kidranxamlfdaux2i76x5c0vjf4.png"><br><br>  Agar jadwal bekerja, tambahkan pengaturan berikut: <br><br>  <i>PATH = / usr / sbin: / usr / bin: / sbin: / bin</i> <i><br></i>  <i>SHELL = / bin / bash</i> <br><br>  Dan tugas itu sendiri, kami akan mencatat waktu setiap unduhan dan durasi operasi yang berkelanjutan, ini akan menjadi informasi yang berguna di masa depan. <br><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">reboot</a> sleep 60 &amp;&amp; date &gt;&gt; my-reboot.txt</i> <i><br></i>  <i>@ setiap minggu uptime &gt;&gt; my-uptime.txt</i> <br><br>  Untuk keluar, kombinasi tombol Ctrl + x, Y, Enter <br><br>  Pengaturan zona waktu dilakukan oleh perintah: <br><br><pre> <code class="bash hljs">dpkg-reconfigure tzdata</code> </pre> <br>  Untuk menambah sumber daya kartu SD, Anda dapat berhenti masuk dan menghapus file swap: <br><br>  (Saya pikir ini harus mengurangi kemungkinan kegagalan kartu SD atau korupsi data selama shutdown RPi tiba-tiba selama operasi): <br><br><pre> <code class="bash hljs">apt update apt purge dphys-swapfile apt autoremove --purge apt install busybox-syslogd dpkg --purge rsyslog</code> </pre> <br>  Instalasi program: <br><br><pre> <code class="bash hljs">apt install mosquitto mosquitto-clients sqlite3 libsqlite3-dev mc htop arp-scan vim supervisor python-pip python3-pip python-virtualenv python-dev</code> </pre> <br><pre> <code class="bash hljs">pip install psutil paho-mqtt pip3 install psutil paho-mqtt</code> </pre> <br>  Untuk homekit2mqtt Anda perlu menginstal nodejs: <br><br><pre> <code class="bash hljs">curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash - apt-get install -y nodejs</code> </pre> <br>  Memeriksa versi yang diinstal <br><br><pre> <code class="bash hljs">node -v nodejs -v</code> </pre> <br>  Instal simpul-merah: <br><br><pre> <code class="bash hljs">npm install -g --unsafe-perm node-red</code> </pre> <br>  Kami meluncurkan: <br><br><pre> <code class="bash hljs">node-red</code> </pre> <br><img src="https://habrastorage.org/webt/m7/es/jj/m7esjjrer1ip2vflmp_bgqagxle.png"><br><br>  Di bilah alamat browser, ketikkan alamat IP RPi 192.168.0.10:1880 <br><br><img src="https://habrastorage.org/webt/ki/u_/qk/kiu_qkhawjr3-za-urpaetmamj4.png"><br><br>  Selesai simpul-merah, tekan Ctrl + c, pergi ke direktori .node-red <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> .node-red</code> </pre> <br>  Dan menginstal paket untuk simpul-merah, mereka mungkin diperlukan untuk pengujian, konfigurasi dan komunikasi berbagai perangkat. <br><br><pre> <code class="bash hljs">npm i node-red-dashboard node-red-contrib-sonos node-red-contrib-knx node-red-node-serialport node-red-contrib-globalcache node-red-contrib-counter</code> </pre> <br>  Kami kembali ke direktori home <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span></code> </pre> <br>  Instal homekit2mqtt: <br><br><pre> <code class="bash hljs">apt install libavahi-compat-libdnssd-dev npm install -g homekit2mqtt --unsafe-perm</code> </pre> <br>  Anda dapat mencoba menjalankan homekit dengan perintah <br><br><pre> <code class="bash hljs">homekit2mqtt</code> </pre> <br><img src="https://habrastorage.org/webt/o_/nr/wb/o_nrwbgde08t8wxz1f40goswfhc.png"><br><br>  Ini akan mulai dengan pengaturan default dan Anda dapat menambahkan perangkat baru di program Beranda di iPhone atau iPad Anda <br><br>  Kata sandi <i>pi</i> akan meninggalkan yang sekarang. <br><br>  Sekarang semuanya sudah diinstal dan diverifikasi, Anda perlu membuat cadangan kartu SD kami dengan cara yang sama seperti sebelumnya.  Sekarang semuanya siap untuk menginstal sistem otomasi. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id446190/">https://habr.com/ru/post/id446190/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id446176/index.html">Pengenalan tangki dalam aliran video menggunakan metode pembelajaran mesin (+2 video di platform Elbrus dan Baikal)</a></li>
<li><a href="../id446180/index.html">Apakah MongoDB pilihan yang tepat?</a></li>
<li><a href="../id446184/index.html">Aplikasi TDD pada Spring Boot: menyelaraskan tes dan bekerja dengan konteksnya</a></li>
<li><a href="../id446186/index.html">Bagaimana Elon Musk mencoba menghancurkan informan di jajaran Tesla, dan apa yang terjadi</a></li>
<li><a href="../id446188/index.html">Apakah sudah waktunya untuk URL emoji?</a></li>
<li><a href="../id446192/index.html">Cadangan riwayat: tujuh penemu yang mungkin belum pernah Anda dengar</a></li>
<li><a href="../id446194/index.html">Galatea baru atau menghidupkan gadis android untuk novel fiksi ilmiah</a></li>
<li><a href="../id446196/index.html">Memperkenalkan 3CX V16 dengan Widget Komunikasi Situs Web</a></li>
<li><a href="../id446198/index.html">Penghancuran data hard drive</a></li>
<li><a href="../id446200/index.html">Frontend Weekly Digest (25 - 31 Mar 2019)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>