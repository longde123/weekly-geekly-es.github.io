<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕹️ 🤺 👩🏼‍🚒 Kubernetes 1.14：关键创新概述 👧🏾 🧜🏻 🚃</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kubernetes- 1.14 将于今晚发布。 根据我们博客的发展传统，我们正在谈论此出色的开源产品新版本中的关键更改。 

 用于准备此材料的信息来自Kubernetes增强跟踪表 CHANGELOG-1.14和相关问题，请求，Kubernetes增强提案（KEP）。 更新 （3月26日）： 官...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kubernetes 1.14：关键创新概述</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/445196/"><img src="https://habrastorage.org/webt/dx/2g/0e/dx2g0etf3mgkoidtla2dfbgmud4.png"><br><br>  Kubernetes- <a href="">1.14</a> <a href="">将于</a>今晚发布。 根据我们博客的发展传统，我们正在谈论此出色的开源产品新版本中的关键更改。 <br><br> 用于准备此材料的信息来自<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kubernetes增强跟踪表</a> <a href="">CHANGELOG-1.14</a>和相关问题，请求，Kubernetes增强提案（KEP）。  <b>更新</b> （3月26日）： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">官方发布公告</a>也出现在K8s博客上。 <a name="habracut"></a><br><br> 让我们从SIG集群生命周期的重要介绍开始：现在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">可以</a>使用常用的（在单节点集群的情况下） <code>kubeadm</code> （ <code>init</code>和<code>join</code> ）命令<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">创建</a> Kubernetes <b>动态故障转移集群</b> （更确切地说是自托管HA部署）。 简而言之，为此： <br><br><ul><li> 集群使用的证书被转换为秘密； </li><li> 为了在K8s集群内部使用etcd集群（即摆脱迄今为止存在的外部依赖关系）的可能性，使用了etcd <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">运算符</a> ; </li><li> 记录了提供容错配置的外部负载均衡器的建议设置（将来，计划了这种依赖关系导致失败的可能性，但目前尚未计划）。 </li></ul><br><img src="https://habrastorage.org/webt/s0/0l/v4/s00lv4q1fpdozudahtus5ummwq4.png"><br>  <i>使用kubeadm构建的Kubernetes HA集群架构</i> <br><br> 实施细节可在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">设计方案中</a>找到。 这个功能确实期待已久：Alpha版本早在K8s 1.9中就已出现，但现在才出现。 <br><br><h2>  API </h2><br>  <code>apply</code>命令和通常的<b>声明式对象管理</b>已从<code>kubectl</code>移至apiserver。 开发人员自己通过说<code>kubectl apply</code>是在Kubernetes中使用配置的基础部分来简要解释他们的决定，但是，它“充满了错误且难以修复”，因此该功能需要恢复正常并转移到控制平面。 当今问题的简单说明性示例： <br><br><img src="https://habrastorage.org/webt/5b/sl/cw/5bslcwl-e_5kxq67oqrsgizwsk0.png"><br><br> 具体实施方式请参见<a href="">KEP</a> 。 当前的可用性是Alpha版本（计划在下一版Kubernetes中推广到beta）。 <br><br> 在Alpha版本中，已经<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">可以</a>使用OpenAPI v3方案<b>在CustomResources</b> （CR） <b>上创建和发布OpenAPI文档，该文档</b>用于验证（服务器端）用户定义的K8s资源（CustomResourceDefinition，CRD）。 发布用于CRD的OpenAPI允许客户端（例如<code>kubectl</code> ）在其端执行验证（作为<code>kubectl create</code>和<code>kubectl apply</code> ），并根据方案发布文档（ <code>kubectl explain</code> ）。 详细信息在<a href="">KEP中</a> 。 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">现在</a> ，将使用<code>O_APPEND</code>标志（而不是<code>O_TRUNC</code> ） <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">打开</a>预先存在的日志，以避免在某些情况下丢失日志，并方便使用外部<code>O_TRUNC</code>实用程序截断日志。 <br><br> 同样在Kubernetes API的上下文中，应该指出的是，在<code>PodSandbox</code>和<code>PodSandboxStatus</code>中<code>runtime_handler</code> <code>PodSandboxStatus</code>字段，以考虑到pod中有关<code>RuntimeClass</code>信息（在有关<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kubernetes 1.12版本</a>的文本（该类以Alpha版本形式出现）中以及在准入Webhooks <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">实现了</a>确定他们支持哪些版本的<code>AdmissionReview</code>功能。 最后，在Admission Webhooks规则中， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">您</a>现在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">可以</a>将其应用程序<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的</a>范围<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">限制</a>为名称空间和群集范围。 <br><br><h2> 仓储设施 </h2><br> 自<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">K8s 1.10</a>发行以来具有beta状态的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PersistentLocalVolume</a>被<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">声明为</a>稳定（GA）：此功能门将不再被禁用，并将在Kubernetes 1.17中被删除。 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">已经开发了</a>使用所谓的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Downward API</a>的环境变量（例如，吊舱名称）作为挂载为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>subPath</code></a>目录名称的功能-以新的<code>subPathExpr</code>字段的形式，现在可以使用该字段确定所需的目录名称。 最初，该功能出现在Kubernetes 1.11中，但在1.14版本中，它仍处于Alpha版本状态。 <br><br> 与先前的Kubernetes版本一样，为快速发展的CSI（容器存储接口）引入了许多重大更改： <br><br><h3>  CSI </h3><br>  <b>现已</b>提供<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">对</a> <b>调整大小的CSI卷</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">支持</a> （作为Alpha版本的一部分）。 要使用它，您将需要启用称为<code>ExpandCSIVolumes</code>的功能门，并在特定的CSI驱动程序中支持此操作。 <br><br>  alpha版本中CSI的另一个功能是可以直接（即不使用PV / PVC）引用CSI卷作为Pod规范的一部分。 这<b>消除了将CSI用作专门的远程数据仓库的限制</b> ，从而为它们打开了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">本地临时卷</a>的大门。 要使用（ <a href="">来自文档的示例</a> ），必须启用<code>CSIInlineVolume</code>功能门。 <br><br>  Kubernetes的“内部”与CSI相关，这在最终用户（系统管理员）中并不那么明显。...目前，开发人员被迫支持每个存储插件的两个版本：一个在K8s代码库中（以旧方式）（在-tree）和第二个-作为新CSI的一部分<i>（例如，在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>了解更多信息）</i> 。 这会导致可理解的不便，随着CSI的稳定，需要解决该不便。 由于有<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">相应的Kubernetes策略，</a>因此不可能简单地弃用树中插件的弃用API。 <br><br> 所有这些导致了这样一个事实，即Alpha版本达到了将以树<b>内形式实现的插件内部代码<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">迁移</a></b>到CSI插件的过程，因此，开发人员的担忧将减少到支持其插件的一个版本，并且将保留与旧API的兼容性，并且可以像往常一样声明过时。 预计到下一个Kubernetes版本（1.15），将迁移所有云提供程序插件，该实现将获得beta状态，并将在默认的K8s安装中激活。 有关详细信息，请参见<a href="">设计建议</a> 。 这种迁移还导致<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">拒绝</a>了特定云提供商（AWS，Azure，GCE，Cinder）定义的卷的限制。 <br><br> 此外，对CSI块设备（ <code>CSIBlockVolume</code> ）的支持已<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">转换</a>为beta。 <br><br><h2> 节点/ Kubelet </h2><br> 在Kubelet中引入了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">新端点</a>的alpha版本，该<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">端点</a>旨在<b>返回主要资源的指标</b> 。 一般来说，如果Kubelet曾经从cAdvisor获取有关容器使用情况的统计信息，那么现在这些数据是通过CRI（容器运行时接口）来自容器运行时的，但是保留了与旧版本Docker的兼容性。 以前，在Kubelet中收集的统计信息是通过REST API提供的，但是现在，它使用位于<code>/metrics/resource/v1alpha1</code> 。 开发人员的长期策略<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">是</a>最小化Kubelet提供的一组指标。  <i>顺便说一句，这些指标本身<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">现在</a>不<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">称为</a> “核心指标”，而是“资源指标”，并被描述为“一流的资源，例如cpu和内存”。</i> <br><br> 一个非常有趣的细微差别：尽管与使用Prometheus格式的不同情况相比，gRPC端点性能具有明显的优势<i>（基准测试的一种结果见下文）</i> ，但由于该监视系统在社区中的领导地位很明显，因此作者更喜欢Prometheus文本格式。 <br><br><blockquote>  <i>“ GRPC与主要的监视管道不兼容。</i>  <i>端点仅可用于将度量标准传送到Metrics Server或监视直接与其集成的组件。</i>  <i>在Metrics Server中使用缓存时，鉴于Prometheus在社区中的广泛使用，Prometheus文本格式<b>的性能足以</b>让我们更喜欢Prometheus而不是gRPC。</i>  <i>当OpenMetrics格式变得更加稳定时，我们可以使用基于原型的格式来接近gRPC性能。”</i> </blockquote><br><img src="https://habrastorage.org/webt/v5/st/uo/v5stuoyssgedyqibabti_oz6bbi.png"><br>  <i>在新的Kubelet端点中使用gRPC和Prometheus格式的比较性能测试之一，用于度量。</i>  <i>可以在<a href="">KEP中</a>找到更多图表和其他详细信息。</i> <br><br> 除其他更改外： <br><br><ul><li>  Kubelet现在在<code>--system-reserved</code>和<code>--kube-reserved</code>选项中<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">接受</a> <code>pid=&lt;number&gt;</code>参数，从而确保为整个系统或Kubernetes系统守护程序分别保留指定的PID。 启用功能门（称为<code>SupportNodePidsLimit</code> ，将激活该功能。 </li><li>  Kubelet现在（一次） <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">尝试</a>在重新启动和删除操作之前<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">停止</a>处于未知状态的容器。 </li><li> 使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>PodPresets</code></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">，</a>现在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>PodPresets</code></a>相同信息作为常规容器<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">添加到</a> init容器中。 </li><li>  Kubelet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">开始使用</a> CRI统计提供者提供的<code>usageNanoCores</code> ，并为Windows上的节点和容器<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">添加</a>了网络统计信息。 </li><li> 现在，有关操作系统和体系结构的信息记录在Node对象的<code>kubernetes.io/os</code>和<code>kubernetes.io/arch</code>中（从beta转移到GA）。 </li><li> 为容器中的容器（ <code>RunAsGroup</code> ，出现在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">K8s 1.11中</a> ）指定特定的系统用户组的功能已<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">升级</a>到beta版（默认情况下启用）。 </li><li>  cAdvisor中使用的du和find被Go实现<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">取代</a> 。 </li></ul><br><h2> 命令行界面 </h2><br>  -k标志已<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">添加到</a> cli-runtime和kubectl中，以便与<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b>kustomize</b></a>集成（顺便说一下，它现在正在单独的存储库中开发），即 用于处理来自特殊kustomization目录的其他YAML文件（有关其使用的详细信息，请参见<a href="">KEP</a> ）： <br><br><img src="https://habrastorage.org/webt/nv/sf/uy/nvsfuyar7x570ia_zrcp_v4lohi.jpeg"><br>  <i>简单使用<a href="">kustomization</a>文件的<a href="">示例</a> （ <a href="">也可以</a>在<a href="">叠加图中</a>更复杂地使用kustomize）</i> <br><br> 另外： <br><br><ul><li>  kubectl徽标及其文档已<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">更新</a> -请参阅<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">kubectl.docs.kubernetes.io</a> 。 <br><br><img src="https://habrastorage.org/webt/n4/-1/kw/n4-1kwnebvlrzwahpkhdpjhlbsi.png"></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">添加了一个</a>新的<code>kubectl create cronjob</code>命令，其名称说明<code>kubectl create cronjob</code> 。 </li><li> 在<code>kubectl logs</code>您现在可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">将</a>标志<code>-f</code> （对于流日志使用<code>--follow</code> ）和<code>-l</code> （对于标签查询使用<code>--selector</code> ）进行组合。 </li><li>  kubectl <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">教</a>复制用通配符选择的文件。 </li><li>  <code>--all</code>标志已<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">添加到</a> <code>kubectl wait</code>命令中，以选择指定资源类型的名称空间中的所有资源。 </li><li> 声明<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">了kubectl的</a>稳定<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">插件</a>机制。 </li></ul><br><h2> 其他 </h2><br> 稳定（GA）状态具有以下功能： <br><br><ul><li> 支持Windows节点（包括Windows Server 2019），这意味着可以在Kubernetes中计划Windows Server容器（另请参见<a href="">KEP</a> ）; </li><li> 在Pod规范中使用的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>ReadinessGate</code></a>确定在Pod的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>ReadinessGate</code></a>状态中考虑的其他条件； </li><li> 支持大页面（功能门称为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>HugePages</code></a> ）； </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CustomPodDNS</a> ; </li><li>  PriorityClass API， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pod优先级和抢占</a> 。 </li></ul><br>  Kubernetes 1.14中引入的其他更改： <br><br><ul><li> 默认的RBAC策略不再提供对<code>discovery</code> API的<code>access-review</code>对未认证<i>用户的</i> <code>access-review</code> 。 </li><li> 仅对Linux <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">提供</a>对CoreDNS的官方支持，因此在集群中将kubeadm（CoreDNS）部署使用kubeadm时，节点只能在Linux中工作（nodeSelectors用于此限制）。 </li><li> 现在，默认的CoreDNS配置<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使用</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">转发插件</a>而不是代理。 此外，readinessProbe已<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">添加到</a> CoreDNS中，以防止在相应的（未准备就绪）吊舱上进行负载平衡。 </li><li> 在kubeadm中，在<code>init</code>或<code>upload-certs</code> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">可以</a>将将新的控制面板连接到kubeadm-certs秘密<code>--experimental-upload-certs</code>所需的证书（使用了<code>--experimental-upload-certs</code>标志）。 </li><li> 对于Windows安装，已经出现了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">对</a> gMSA（组托管服务帐户）（Active Directory中的特殊帐户，可以供容器使用）的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">支持</a>的Alpha版本。 </li><li> 对于GCE <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">，</a>在etcd和kube-apiserver之间<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">激活了</a> mTLS加密。 </li><li> 使用过的/相关软件的更新：Go 1.12.1，CSI 1.1，CoreDNS 1.3.1，在kubeadm中支持Docker 18.09，并且最低支持的Docker API版本为1.26。 </li></ul><br><h2> 聚苯乙烯 </h2><br> 另请参阅我们的博客： <br><br><ul><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kubernetes 1.13：关键创新概述</a> ”； </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kubernetes 1.12：关键创新概述</a> ”； </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kubernetes 1.11：关键创新概述</a> ”； </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kubernetes 1.10：关键创新概述</a> 。” </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN445196/">https://habr.com/ru/post/zh-CN445196/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN445186/index.html">在RPG中创建战斗系统</a></li>
<li><a href="../zh-CN445188/index.html">什么是游戏神经接口？</a></li>
<li><a href="../zh-CN445190/index.html">兑现/不兑现：我们在鸭嘴兽的机器学习飞行员</a></li>
<li><a href="../zh-CN445192/index.html">4K：发展还是营销？</a></li>
<li><a href="../zh-CN445194/index.html">2019年设计师的10个概念</a></li>
<li><a href="../zh-CN445198/index.html">适用于Linux的Cmus控制台播放器</a></li>
<li><a href="../zh-CN445200/index.html">互联网提供商要求交通部在没有合同的情况下让他们进入家中</a></li>
<li><a href="../zh-CN445202/index.html">快乐波特与CSS秩序</a></li>
<li><a href="../zh-CN445204/index.html">将Firebird 2.5数据库流转换为ODS12格式（Firebird 3.0）</a></li>
<li><a href="../zh-CN445206/index.html">升级Zimbra时减少停机时间</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>