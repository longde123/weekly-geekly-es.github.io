<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📴 ⚕️ 👨🏻‍⚕️ Restreindre l'accès aux attributs de dimension dans le modèle tabulaire SSAS 🤳🏻 🧕🏾 👐🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a des moments où vous devez restreindre l'accès des utilisateurs à certaines données du cube. Il semblerait qu'il n'y ait rien de compliqué: inst...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Restreindre l'accès aux attributs de dimension dans le modèle tabulaire SSAS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484890/">  Il y a des moments où vous devez restreindre l'accès des utilisateurs à certaines données du cube.  Il semblerait qu'il n'y ait rien de compliqué: installez les filtres de ligne dans les rôles et vous avez terminé, mais il y a un problème - le filtre coupe les données dans le tableau et il s'avère que vous ne pouvez voir la vitesse que par les lignes disponibles, et nous avons besoin de toute la vitesse, mais les détails ne doivent être disponibles que pour certains d'entre eux. <br><br>  Par exemple, l'utilisateur doit voir le chiffre d'affaires de tous les produits, avec la possibilité de tous les détails, mais en même temps, les clients ne doivent pas afficher tous, mais seulement certains ou tous les clients, mais avec des données partiellement masquées dans certains attributs (champs). <br><br>  Afin d'empêcher l'utilisateur de voir le chiffre d'affaires des clients, vous pouvez le battre dans les formules en mesures et afficher une valeur vide si l'utilisateur essaie de voir le chiffre d'affaires d'un client spécifique, l'une de ces options est décrite <a href="https://www.sqlbi.com/articles/implement-non-visual-totals-with-power-bi-security-roles/" rel="nofollow">ici</a> .  Mais ce n'est pas le cas.  Lorsque quelques dizaines de mesures, écrivez une formule dans chacune d'elles ... et si vous oubliez?  Mais vous l’oublierez sûrement un jour ... Et si l’utilisateur a besoin des données d’une carte client spécifique, rien ne l’empêchera de le voir sans choisir une mesure de filtrage.  Que faire? <br><br>  Nous avions besoin de réaliser cet affichage: <br><br><img src="https://habrastorage.org/webt/4u/id/xl/4uidxloiihdv0ucfozvnt7vypbu.png"><br><a name="habracut"></a><br>  Tout le principe qui vous permet d'obtenir un résultat similaire repose sur une petite astuce, et il consiste à ajouter des lignes synthétiques à la table (clients, dans ce cas) afin que l'enregistrement sur la même entité soit dupliqué au moins une fois - le premier contiendra des informations complètes, et la deuxième de la plupart des colonnes est remplie par une fiche de type <i># N / A</i> , mais les identificateurs sont les mêmes pour les deux enregistrements.  De plus, en utilisant le filtre dans les rôles et une colonne spéciale par laquelle le filtrage est effectué, nous laissons certaines lignes à la disposition de l'utilisateur - soit une ligne avec des champs complètement remplis ou avec des talons.  Et depuis  Étant donné que le cube a la caractéristique de "réduire" les données répétitives et que l'utilisateur ne peut accéder à aucun autre attribut qui donne des valeurs uniques, alors dans la table résultante, tous les clients avec le code <i># N / A</i> se transformeront en une seule ligne.  Je pense qu'à ce stade tout est déjà très clair, vous ne pouvez plus lire.  Le résultat est dans le titre de l'article. <br><br>  Mais si quelqu'un a besoin de détails - je les ai. <br><br>  Les modèles tabulaires jusqu'à la version 1400 (SQL 2017 inclus) ne permettent pas de créer des relations plusieurs-à-plusieurs, mais dans le cas de doublons, nous avons besoin d'une telle relation, nous allons donc la créer via une table intermédiaire contenant une seule colonne avec des identifiants client uniques.  Le tableau est initialement incompressible car  il ne contient que des valeurs uniques, vous pouvez donc le calculer, car dans ce cas, nous ne gagnerons rien si nous le remplissons via t-sql (rappelez-vous le principe de traitement et l'ordre de compression de la table?).  Tout simplement en raison de la capacité du moteur à compresser les données en double, la quantité de données dans le cube augmentera légèrement, et en raison du filtrage à travers le rôle, la session utilisateur a un jeu d'enregistrements réduit, c'est-à-dire  le nombre final d'enregistrements après filtrage de l'ensemble restera tel qu'il était sans doublons.  Par conséquent, ne vous inquiétez pas, même si la table est initialement suffisamment grande, l'ajout de doublons n'affectera pas les performances et le volume de manière significative (bien sûr, les cas sont différents, mais dans la plupart d'entre eux, tout sera juste cela). <br><br>  La figure suivante montre le modèle de cube et le contenu de la table: <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/f0/vd/94/f0vd94vkawcfyy2lpp2vreeide8.png"></a> <br><br>  Par exemple, ajoutez un filtre simple: <br><br><img src="https://habrastorage.org/webt/fq/kc/bn/fqkcbnageypsvdvv4mzd9yzeru0.png"><br><br>  C’est tout. <br><br>  Je voudrais mettre en garde contre une caractéristique de l'utilisation de cette approche.  Les utilisateurs qui sont administrateurs sur le serveur SSAS, par défaut, vont dans le cube en contournant toutes sortes de rôles, même si leurs noms sont spécifiés dans ces rôles.  Cela conduit au fait que les filtres de rôle ne fonctionnent pas et que, sous l'administrateur, tous les doublons sont visibles.  Mais ne désespérez pas, il suffit dans la chaîne de connexion d'indiquer explicitement quel rôle utiliser et tout se met en place, de plus, lors des tests, vous devrez basculer entre les rôles plus d'une fois. <br><br>  Comme vous le comprenez, vous pouvez faire plusieurs combinaisons du même enregistrement avec différents degrés de remplissage des colonnes avec des données réelles.  Vous pouvez également créer une table masquée distincte dans le cube, qui sera remplie de comptes via ADSI, et répartir les utilisateurs entre les différents groupes de domaines, et remplir ce tableau en fonction des combinaisons d'appartenance des utilisateurs dans certains groupes.  Nous écrivons les liens dans les filtres de rôle ligne par ligne dans ce tableau, ce qui nous permettra de contrôler les mesures et nous pouvons également y faire référence dans les mesures, de sorte que, si nécessaire, certaines mesures montrent le vide.  Avec une telle organisation, un réglage fin des droits d'accès aux données est obtenu et tout est stocké en un seul endroit.  Mais il y a une nuance avec les mesures: si un utilisateur avancé écrit lui-même des requêtes dans le cube, alors rien ne l'empêche d'utiliser sa mesure, sans signets, à condition qu'il connaisse les noms des colonnes de base et la formule ... Bien que, si vous le souhaitez, vous pouvez le faire ici restriction, mais c'est un autre sujet. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr484890/">https://habr.com/ru/post/fr484890/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr484876/index.html">Réparer, pirater, creuser. Résoudre la quête en ligne Droid Mission</a></li>
<li><a href="../fr484878/index.html">Bases de la conception de niveaux: effet de flux ou comment ne pas laisser le joueur s'ennuyer</a></li>
<li><a href="../fr484882/index.html">Windows Terminal Preview v0.8 publié</a></li>
<li><a href="../fr484884/index.html">HIPEC. Des années de vie au lieu de mois avec des tumeurs malignes de la cavité abdominale</a></li>
<li><a href="../fr484886/index.html">RTL Styling 101 - Un guide détaillé du style CSS RTL</a></li>
<li><a href="../fr484892/index.html">Entretien clé en main: comment fonctionne l'hébergement SAP</a></li>
<li><a href="../fr484896/index.html">Aide-mémoire de l'administrateur système SELinux: 42 réponses à des questions importantes</a></li>
<li><a href="../fr484898/index.html">Une bonne raison de tester vos dépendances: édition AGPL</a></li>
<li><a href="../fr484900/index.html">Rendu de site Web 101</a></li>
<li><a href="../fr484902/index.html">Sur les équations de degrés supérieurs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>