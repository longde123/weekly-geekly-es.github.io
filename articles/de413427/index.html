<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôèüèº üë®‚Äçüë¶ üëú Programmierung f√ºr Netzwerktechniker: Arbeiten mit der Konfiguration ‚öîÔ∏è üé¨ ü•ú</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Selbst in einem guten Netzwerk ist es aus gestalterischer Sicht von Zeit zu Zeit erforderlich, die Konfigurationen bestimmter Entit√§ten zu aktualisier...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Programmierung f√ºr Netzwerktechniker: Arbeiten mit der Konfiguration</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413427/">  Selbst in einem guten Netzwerk ist es aus gestalterischer Sicht von Zeit zu Zeit erforderlich, die Konfigurationen bestimmter Entit√§ten zu aktualisieren.  Zu den zwingendsten und am meisten erwarteten Gr√ºnden f√ºr solche Aktivit√§ten geh√∂rt die Migration zur Koordinierung der physischen und logischen Ebenen, der Entwicklung des Netzwerks als Teil des technologischen Evolutionsprozesses, der Harmonisierung der Architektur der verbundenen Segmente und der L√∂sung von Wachstumsproblemen.  Tats√§chlich besteht der Lebenszyklus eines Netzwerks fast immer aus √Ñnderungen mit dem einen oder anderen Risikograd und einer umfassenden Auswirkung auf einen Dienst, bei deren Bewertung der Faktor Mensch nicht ignoriert werden kann.  Obwohl es durchaus angebracht ist, diese Beschreibung auf die meisten Bereiche menschlicher Aktivit√§ten zu verallgemeinern, weist die Funktionsweise von Kommunikationsnetzwerken einige Merkmale auf, die Verst√§ndnis oder zumindest Aufmerksamkeit verdienen - die Elemente von Kommunikationsnetzwerken stehen in enger Kommunikation, interagieren eng und machen nicht nur direkt, sondern auch indirekt Auswirkungen aufeinander.  Eine kompetente Strategie der laufenden Arbeit wird daher nur dann produktiver, wenn sie durch Mechanismen unterst√ºtzt wird, die die Wahrscheinlichkeit menschlicher Fehler so weit wie m√∂glich verringern.  Im n√§chsten Artikel der Reihe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">‚ÄûWarum sollten Netzwerktechniker programmieren</a> ? <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">‚Äú Werde</a> ich auf Optionen f√ºr die Verwendung der Automatisierung in einer solchen Aufgabe eingehen. <br><a name="habracut"></a><br>  In vielen ‚ÄûPrimern‚Äú der Netzwerkarchitektur werden die Begriffe ‚Äûgro√üe Netzwerke‚Äú und ‚Äûhierarchische Netzwerke‚Äú in Bezug auf das Design einer IGP-Dom√§ne fast synonym verwendet. Es wird ein einfaches und auf den ersten Blick verst√§ndliches Design angegeben - die Aufteilung einer Dom√§ne in Dom√§nen.  Gleichzeitig ist die S√§ttigungsschwelle eine rein individuelle Sache. In einigen F√§llen k√∂nnen tausend moderne Router normalerweise in einem IGP-Bereich koexistieren, andernfalls reichen dreihundert aus, um die Betriebseigenschaften erheblich zu verringern.  Zum gr√∂√üten Teil wird diese Schwelle durch die dem IGP auferlegten Protokolle bestimmt. Unter den Bedingungen einer gewissen Variabilit√§t und Unsicherheit der Grenzen und Skalen des zuk√ºnftigen Netzwerks findet der ‚ÄûBison‚Äú der Industrie einen flexibleren Weg, um eine flache Dom√§ne mit der anschlie√üenden Migration seiner Formteile in separate Gebiete aufzubauen.  Mit anderen Worten, wenn Sie nicht ‚Äûmorgen morgen schauen‚Äú k√∂nnen, bauen Sie ein flaches Netzwerk auf und teilen Sie es auf, sobald die ersten Anzeichen einer Verschlechterung der Konvergenzzeit oder einer √ºberm√§√üigen Komplexit√§t der Ausnutzung auftreten, da das Fehlen einer Hierarchie immer noch besser ist als das falsche, das unter Unsicherheit ausgew√§hlt wurde Struktur [1, 2, 3]. <br><br>  Ganz allgemeine Beschreibungen und abstrakte Beispiele nehmen an, dass es sich um eine √ºberwachsene Region der OSPFv2-Dom√§ne handelt, deren Topologie der physikalischen Fasern / Kan√§le es bereits erm√∂glicht, die Grenzen zuk√ºnftiger Regionen in der amorphen Struktur zu erkennen.  Ich bin kein Bef√ºrworter einer √Ñnderung nach dem Prinzip ‚ÄûAlles oder Nichts‚Äú. Es kann vorkommen, dass der Raum der Chancen aufgrund unvorhergesehener Umst√§nde zu eng und die erwarteten Risiken zu gro√ü werden.  Das √Ñndern der OSPFv2-Region ist eine destruktive Operation. Daher ist das einfachste Schema des Migrationsprozesses, das darin besteht, Router nacheinander von der zuk√ºnftigen Grenze nach unten in eine neue Region zu √ºbertragen, in allen Topologien praktisch.  Gl√ºcklicherweise wurde vor einiger Zeit in Empfehlungen f√ºr die Entwicklung von OSPF die M√∂glichkeit des Aufbaus von Konnektivit√§t in mehreren Bereichen umrissen [4].  Bei dieser Gelegenheit k√∂nnen wir die Migration in drei Phasen unterteilen: <br><br><ol><li>  Aufbau zus√§tzlicher (sekund√§rer) Konnektivit√§t in einem neuen Bereich </li><li>  √úbertragung eines neuen Bereichs in den Hauptmodus und des alten in einen zus√§tzlichen Bereich </li><li>  Entfernen der Konnektivit√§t innerhalb des alten Bereichs </li></ol><br>  In der ersten Phase wird die Topologie der neuen Region allm√§hlich erweitert, in der zweiten Phase wird die Topologie der alten Region enger.  Vorbehaltlich der Kongruenz der Topologien der alten und neuen Bereiche erhalten wir ein konsistentes Routing zwischen den √ºbersetzten und nicht √ºbersetzten Knoten, was wiederum die Unterteilung der Stufen in unabh√§ngige Unterstufen erm√∂glicht, bei denen jeweils mit einem Teil der Knoten gearbeitet werden kann.  Es ist ratsam, die Auswahl der Knoten f√ºr die Arbeit im Rahmen der Teilstufe unter dem Gesichtspunkt der tats√§chlichen Nutzung der Kan√§le in einem bestimmten Netzwerk zu betrachten, um ein erneutes Laden an der Grenze zwischen dem alten und dem neuen Gebiet zu verhindern.  Trotz der Tatsache, dass der Artikel der Programmierung gewidmet ist, halte ich es nicht f√ºr √ºberfl√ºssig, ein paar Worte √ºber das Verhalten von Protokollen zu sagen, die IGP im Zusammenhang mit sich √§ndernden Dom√§nen auferlegt werden.  LDP verh√§lt sich ziemlich vorhersehbar. Eine reibungslose √úbersetzung wird durch die Bereitstellung von IP-Konnektivit√§t zwischen gezielten Transportadressen und Schnittstellensitzungen erreicht.  Aufgrund der Tatsache, dass BGP ein sehr flexibles Protokoll ist, sollten Sie diesem Flugzeug besondere Aufmerksamkeit schenken.  Es ist gut, wenn BGP den √ºbersetzten Knoten keine besonderen Freiheiten in Form von √Ñnderungen in den lokalen Einstellungen oder anderen Kriterien einf√ºhrt, die die lokale Routing-Entscheidung bestimmen, die zwischen den Knoten inkonsistent ist.  Mit anderen Worten, das Verhalten von BGP ist auch vorhersehbar, wenn die Routenauswahl innerhalb der Region nicht der folgenden IGP-Pfadregel widersprach.  Es gibt einen subtilen Punkt, der mit der Arbeit von RSVP w√§hrend des Zeitraums der Koexistenz zweier Bereiche verbunden ist.  Die Tatsache, dass die TED-Tabelle aus zwei Quellen mit unterschiedlicher Sichtbarkeit gef√ºllt wird, gibt Anlass zum Nachdenken. Sie k√∂nnen beispielsweise die FRR-Mechanismen verlieren, bis die Arbeit abgeschlossen ist.  Dies kann passieren, wenn Router mit h√∂herer Sichtbarkeit, die sich in zwei Bereichen befinden, die ERO √ºber einen Router mit geringerer Sichtbarkeit berechnen, d. H.  durch ein √ºbersetztes Netzwerksegment ohne topologische Informationen √ºber einen anderen Bereich.  Dies kann nicht als Katastrophe bezeichnet werden, da der Pfad irgendwann festgelegt wird, aber Sie sollten ihn nicht vergessen.  Besondere Kunst erfordert die Kombination der Arbeit der Einf√ºhrung von IGP-Hierarchien mit der gleichen Art von Arbeit in der BGP-Ebene, beispielsweise durch Migration von Vollmaschen in Routenreflektoren.  Die Einf√ºhrung von Hierarchien in verschiedenen Ebenen ist besser nacheinander durchzuf√ºhren. Dies gilt meiner Meinung nach f√ºr alle Dinge, die Routing-Informationen verbergen. Eine Zusammenfassung l√§sst sich leichter auf einer stabilen Grundlage hierarchischer IGP aufbauen, als diese Stufen zu kombinieren. <br><br>  Wir haben also einen allgemeinen Plan, und wenn Sie Ihre Meinung noch nicht ge√§ndert haben, lassen Sie uns √ºber eine Software-Implementierung auf Pyez nachdenken, so etwas wie diese auf dem Bild. <br><br><img src="https://habrastorage.org/webt/xm/0v/4s/xm0v4shfndzjxnvn1rirhmajgdq.png" alt="Bild"><br><br>  Jedes sch√∂ne Oval kann eine separate Softwareeinheit sein, d.h.  eine Sache, die die Arbeit erledigt und die Daten f√ºr den n√§chsten Schritt vorbereitet.  Anfangsdaten sind Informationen aus dem Netzwerk. Um beispielsweise die Konfiguration eines neuen OSPF-Bereichs vorzubereiten, m√ºssen Sie die Namen der aktiven Schnittstellen, die zum alten Bereich geh√∂ren, und deren Gewicht abrufen. Dies bedeutet, dass wir Kenntnisse in der Arbeit mit Operationstabellen und -ansichten ben√∂tigen.  Diese Konzepte finden Sie in einem fr√ºheren Artikel in der Reihe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">‚ÄûProgrammierung f√ºr Netzwerktechniker: Der erste Fall‚Äú</a> .  In der ersten Phase speichert der Generator in den Dateien die Befehle, die zum Aktivieren des neuen Bereichs erforderlich sind, in der zweiten - um den alten zu l√∂schen und den neuen in den Hauptmodus zu √ºbertragen, in der dritten - den Befehl zum L√∂schen des alten Bereichs.  Mit Blick auf die Zukunft werde ich sagen, dass ich f√ºr diesen Artikel absichtlich keine Vorlagenvisualisierer wie Jinja2 verwende.  Um nicht vom Zielthema abgelenkt zu werden, wird der Code so einfach wie m√∂glich geschrieben.  Wenn sich jemand f√ºr die Dokumentation unter dem Link <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Jinja2-Dokumentation"</a> interessiert. <br><br><div class="spoiler">  <b class="spoiler_title">Schritt Konfigurationsgenerierungscode</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> yaml <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos.factory.factory_loader <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FactoryLoader <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Device <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getConnection</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_host, p_user)</span></span></span><span class="hljs-function">:</span></span> acc = {<span class="hljs-string"><span class="hljs-string">'lab'</span></span>: <span class="hljs-string"><span class="hljs-string">'lab123'</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- getting ssh connection to '</span></span> + p_host l_dev = Device(host=p_host, user=p_user, password=acc[p_user], auto_probe=<span class="hljs-number"><span class="hljs-number">2</span></span>, gather_facts=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, port=<span class="hljs-number"><span class="hljs-number">22</span></span>) l_dev.open() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (l_dev.connected): l_dev.timeout = <span class="hljs-number"><span class="hljs-number">900</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ssh cionnection to host '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' established'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- connection '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' named '</span></span> + l_dev.facts[<span class="hljs-string"><span class="hljs-string">'hostname'</span></span>] + <span class="hljs-string"><span class="hljs-string">' established '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> l_dev <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> Exception(<span class="hljs-string"><span class="hljs-string">' DEBUG --- ssh connection to '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' was not established'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- getConnection : connection to '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' was not established. ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close_dev</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(d)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: d.close() <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- close_dev : connection to cant be closed. ex:'</span></span> + str(ex) yml = <span class="hljs-string"><span class="hljs-string">''' --- OSPFInterface: rpc: get-ospf-interface-information args: area: '0.0.0.200' detail: True item: ospf-interface view: OSPFInterfaceView OSPFInterfaceView: fields: name: interface-name type: interface-type cost: interface-cost '''</span></span> globals().update(FactoryLoader().load(yaml.load(yml))) node_list = [<span class="hljs-string"><span class="hljs-string">'10.83.20.68'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.69'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.70'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.71'</span></span>] abr_list = [<span class="hljs-string"><span class="hljs-string">'10.83.20.66'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.67'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> node <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> node_list + abr_list: ddev = getConnection(node, <span class="hljs-string"><span class="hljs-string">'lab'</span></span>) ospf_interfaces = OSPFInterface(ddev).get() <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(<span class="hljs-string"><span class="hljs-string">'st1-'</span></span> + node + <span class="hljs-string"><span class="hljs-string">'.txt'</span></span>, <span class="hljs-string"><span class="hljs-string">"w"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f_st1: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ospf_interface <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ospf_interfaces: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( <span class="hljs-string"><span class="hljs-string">'ge'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ospf_interface.name ): f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.250 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' secondary'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.250 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' interface-type p2p'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.250 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' metric '</span></span> + ospf_interface.cost + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(<span class="hljs-string"><span class="hljs-string">'st2-'</span></span> + node + <span class="hljs-string"><span class="hljs-string">'.txt'</span></span>, <span class="hljs-string"><span class="hljs-string">"w"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f_st1: f_st1.write(<span class="hljs-string"><span class="hljs-string">'delete protocols ospf area 0.0.0.200'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) f_st1.write(<span class="hljs-string"><span class="hljs-string">'delete protocols ospf area 0.0.0.250'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ospf_interface <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ospf_interfaces: f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.250 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' interface-type p2p'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.200 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' secondary'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.200 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' interface-type p2p'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ospf_interface.cost != <span class="hljs-string"><span class="hljs-string">'0'</span></span>): f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.250 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' metric '</span></span> + ospf_interface.cost + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) f_st1.write(<span class="hljs-string"><span class="hljs-string">'set protocols ospf area 0.0.0.200 interface '</span></span> + ospf_interface.name + <span class="hljs-string"><span class="hljs-string">' metric '</span></span> + ospf_interface.cost + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(<span class="hljs-string"><span class="hljs-string">'st3-'</span></span> + node + <span class="hljs-string"><span class="hljs-string">'.txt'</span></span>, <span class="hljs-string"><span class="hljs-string">"w"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f_st1: f_st1.write(<span class="hljs-string"><span class="hljs-string">'delete protocols ospf area 0.0.0.200'</span></span> + <span class="hljs-string"><span class="hljs-string">'\n'</span></span>)</code> </pre> <br></div></div><br>  Aus Gr√ºnden der √úbersichtlichkeit habe ich in einem solchen Netzwerk auf vMX zusammengestellt. <br><br><img src="https://habrastorage.org/webt/mk/hr/6i/mkhr6ig4wjo3n4hxkswba2xej4q.png" alt="Bild"><br><br>  vMX ist ein voll ausgestatteter Software-Router von Juniper Networks, der das Verhalten seines √§lteren, eisernen Bruders MX weitgehend wiederholt.  Nicht dass es ein Produkt war, das eingef√ºhrt werden muss, es ist nur n√ºtzlich, diese Dinge f√ºr Programmier√ºbungen oder Labortests griffbereit zu halten.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die Testversion</a> kann hier heruntergeladen werden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"vMX Trial Download"</a> und die Installationsanweisungen unter diesem Link <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Vorbereiten des Systems f√ºr</a> die Installation von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vMX"</a> . <br><br>  Die Router bb, abr1 und abr2 bilden den Nullbereich, die Router r1, r2, r3 und r4 - sollten vom 200. Bereich in den 250. Bereich verschoben werden. <br><br><div class="spoiler">  <b class="spoiler_title">lab @ bb&gt; Konfigurationsprotokolle anzeigen</b> <div class="spoiler_text"><pre> <code class="1c hljs">bgp { group int { type internal; local-address <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.65</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.66</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.67</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.68</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.69</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.70</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.71</span></span>; } } ospf { area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span> { interface lo0.<span class="hljs-number"><span class="hljs-number">0</span></span> { passive; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">3.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">2.0</span></span> { interface-type p2p; } } }</code> </pre><br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">lab @ abr1&gt; Konfigurationsprotokolle anzeigen</b> <div class="spoiler_text"><pre> <code class="1c hljs">bgp { group int { type internal; local-address <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.66</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.65</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.67</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.68</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.69</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.70</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.71</span></span>; } } ospf { area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span> { interface lo0.<span class="hljs-number"><span class="hljs-number">0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">3.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0.0</span></span> { interface-type p2p; } } area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.200</span></span> { interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1.0</span></span> { interface-type p2p; } } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">lab @ abr2&gt; Konfigurationsprotokolle anzeigen</b> <div class="spoiler_text"><pre> <code class="1c hljs">bgp { group int { type internal; local-address <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.67</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.65</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.66</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.68</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.69</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.70</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.71</span></span>; } } ospf { area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span> { interface lo0.<span class="hljs-number"><span class="hljs-number">0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">2.0</span></span> { interface-type p2p; } } area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.200</span></span> { interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1.0</span></span> { interface-type p2p; } } }</code> </pre><br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">lab @ r1&gt; Konfigurationsprotokolle anzeigen</b> <div class="spoiler_text"><pre> <code class="1c hljs">bgp { group int { type internal; local-address <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.68</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.65</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.66</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.67</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.69</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.70</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.71</span></span>; } } ospf { area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.200</span></span> { interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">2.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">3.0</span></span> { interface-type p2p; } interface lo0.<span class="hljs-number"><span class="hljs-number">0</span></span> { interface-type p2p; } } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">lab @ r2&gt; Konfigurationsprotokolle anzeigen</b> <div class="spoiler_text"><pre> <code class="1c hljs">bgp { group int { type internal; local-address <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.69</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.65</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.66</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.67</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.68</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.70</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.71</span></span>; } } ospf { area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.200</span></span> { interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">3.0</span></span> { interface-type p2p; } interface lo0.<span class="hljs-number"><span class="hljs-number">0</span></span> { interface-type p2p; } } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">lab @ r3&gt; Konfigurationsprotokolle anzeigen</b> <div class="spoiler_text"><pre> <code class="1c hljs">bgp { group int { type internal; local-address <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.70</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.65</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.66</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.67</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.68</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.69</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.71</span></span>; } } ospf { area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.200</span></span> { interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">3.0</span></span> { interface-type p2p; } interface lo0.<span class="hljs-number"><span class="hljs-number">0</span></span> { interface-type p2p; } } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">lab @ r4&gt; Konfigurationsprotokolle anzeigen</b> <div class="spoiler_text"><pre> <code class="1c hljs">bgp { group int { type internal; local-address <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.71</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.65</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.66</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.67</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.68</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.69</span></span>; neighbor <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.70</span></span>; } } ospf { area <span class="hljs-number"><span class="hljs-number">0.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.200</span></span> { interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">2.0</span></span> { interface-type p2p; } interface ge-<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">3.0</span></span> { interface-type p2p; } interface lo0.<span class="hljs-number"><span class="hljs-number">0</span></span> { interface-type p2p; } } }</code> </pre> <br></div></div><br>  F√ºr den r2-Router werden die folgenden Befehle generiert. <br><br><div class="spoiler">  <b class="spoiler_title">F√ºr die erste Stufe</b> <div class="spoiler_text">  <i>setze protokolle ospf bereich 0.0.0.250 schnittstelle ge-0/0 / 1.0 sekund√§r</i> <i><br></i>  <i>Protokolle einstellen ospf area 0.0.0.250 Schnittstelle ge-0/0 / 1.0 Schnittstellentyp p2p</i> <i><br></i>  <i>setze Protokolle ospf Bereich 0.0.0.250 Schnittstelle ge-0/0 / 1.0 Metrik 1</i> <i><br></i>  <i>Protokolle einstellen ospf area 0.0.0.250 Schnittstelle ge-0/0 / 2.0 sekund√§r</i> <i><br></i>  <i>Protokolle einstellen ospf area 0.0.0.250 interface ge-0/0 / 2.0 schnittstellentyp p2p</i> <i><br></i>  <i>setze Protokolle ospf Bereich 0.0.0.250 Schnittstelle ge-0/0 / 2.0 Metrik 1</i> <i><br></i>  <i>Protokolle einstellen ospf area 0.0.0.250 Schnittstelle ge-0/0 / 3.0 sekund√§r</i> <i><br></i>  <i>Protokolle einstellen ospf area 0.0.0.250 Schnittstelle ge-0/0 / 3.0 Schnittstellentyp p2p</i> <i><br></i>  <i>setze Protokolle ospf Bereich 0.0.0.250 Schnittstelle ge-0/0 / 3.0 Metrik 1</i> <i><br></i> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">F√ºr die zweite Stufe</b> <div class="spoiler_text">  <i>Protokolle l√∂schen ospf area 0.0.0.200</i> <i><br></i>  <i>Protokolle l√∂schen ospf area 0.0.0.250</i> <i><br></i>  <i>Protokolle einstellen ospf area 0.0.0.250 Schnittstelle ge-0/0 / 1.0 Schnittstellentyp p2p</i> <i><br></i>  <i>Protokolle einstellen ospf area 0.0.0.200 Schnittstelle ge-0/0 / 1.0 sekund√§r</i> <i><br></i>  <i>setze Protokolle ospf Bereich 0.0.0.200 Schnittstelle ge-0/0 / 1.0 Schnittstellentyp p2p</i> <i><br></i>  <i>setze Protokolle ospf Bereich 0.0.0.250 Schnittstelle ge-0/0 / 1.0 Metrik 1</i> <i><br></i>  <i>Protokolle einstellen ospf area 0.0.0.200 Schnittstelle ge-0/0 / 1.0 Metrik 1</i> <i><br></i>  <i>Protokolle einstellen ospf area 0.0.0.250 interface ge-0/0 / 2.0 schnittstellentyp p2p</i> <i><br></i>  <i>Protokolle einstellen ospf area 0.0.0.200 Schnittstelle ge-0/0 / 2.0 sekund√§r</i> <i><br></i>  <i>setze Protokolle ospf Bereich 0.0.0.200 Schnittstelle ge-0/0 / 2.0 Schnittstellentyp p2p</i> <i><br></i>  <i>setze Protokolle ospf Bereich 0.0.0.250 Schnittstelle ge-0/0 / 2.0 Metrik 1</i> <i><br></i>  <i>Protokolle einstellen ospf area 0.0.0.200 Schnittstelle ge-0/0 / 2.0 Metrik 1</i> <i><br></i>  <i>Protokolle einstellen ospf area 0.0.0.250 Schnittstelle ge-0/0 / 3.0 Schnittstellentyp p2p</i> <i><br></i>  <i>setze protokolle ospf bereich 0.0.0.200 schnittstelle ge-0/0 / 3.0 sekund√§r</i> <i><br></i>  <i>Protokolle einstellen ospf area 0.0.0.200 Schnittstelle ge-0/0 / 3.0 Schnittstellentyp p2p</i> <i><br></i>  <i>setze Protokolle ospf Bereich 0.0.0.250 Schnittstelle ge-0/0 / 3.0 Metrik 1</i> <i><br></i>  <i>Protokolle einstellen ospf area 0.0.0.200 Schnittstelle ge-0/0 / 3.0 Metrik 1</i> <i><br></i>  <i>setze Protokolle ospf Bereich 0.0.0.250 Schnittstelle lo0.0 Schnittstellentyp p2p</i> <i><br></i>  <i>setze Protokolle ospf Bereich 0.0.0.200 Schnittstelle lo0.0 sekund√§r</i> <i><br></i>  <i>setze Protokolle ospf Bereich 0.0.0.200 Schnittstelle lo0.0 Schnittstellentyp p2p</i> <i><br></i> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">F√ºr die dritte Stufe</b> <div class="spoiler_text">  <i>Protokolle l√∂schen ospf area 0.0.0.200</i> <i><br></i> <br></div></div><br>  Wie ich bereits geschrieben habe, haben die Elemente des Netzwerks einen internen Zustand, um und in ihnen passiert st√§ndig etwas, unabh√§ngig davon, ob wir es wollen oder nicht.  Das Auftreten von Ereignissen wie Transceiverausfall, Stromausfall an einem Knoten oder Unterbrechung eines optischen Kanals muss bei der Arbeit als selbstverst√§ndlich angesehen und ber√ºcksichtigt werden.  Ich schlage vor, diese Tatsache im Zusammenhang mit der Wahl der √úberpr√ºfung des Erfolgs der Migrationsphasen zu ber√ºcksichtigen.  Egal wie paradox dies klingen mag, in diesem Fall m√ºssen wir nicht pr√ºfen, ob die OSPF-Nachbarschaft auf dieser oder jener Schnittstelle aufgetreten ist, da die Gr√ºnde f√ºr ihre Abwesenheit in einer v√∂llig anderen Ebene liegen k√∂nnen.  Dar√ºber hinaus kann ein Fehler oder eine Ungenauigkeit immer in die Quelldaten gelangen, beispielsweise in Form einer vergessenen Schnittstelle, die gel√∂scht werden muss, aber derzeit die "Leere" untersucht.  Bei der Erstellung von √úberpr√ºfungen ist es hilfreich, eine Ebene nach oben zu gehen, um das Netzwerk unter dem Gesichtspunkt der bereitgestellten Dienste und der auferlegten Protokolle zu betrachten, da letztendlich nur der Status dieser Dinge es Ihnen erm√∂glicht, eine fundierte Entscheidung √ºber den Erfolg einer bestimmten Phase zu treffen.  Nur wenige Kunden stimmen √∂ffentlichen Artikeln zu, die auf den Ergebnissen ihrer Arbeit basieren. Deshalb habe ich eine virtuelle Umgebung zur Demonstration zusammengestellt.  In dieser Umgebung beschr√§nke ich mich darauf, den Status von BGP-Sitzungen zu √ºberpr√ºfen, die eins zu eins zwischen Routern erstellt werden. Dies sind unsere auferlegten Dienste und Dienste.  Wenn nach der Arbeit die Voraussetzungen f√ºr ihre Leistung in Form einer IP-Konnektivit√§t erf√ºllt sind, besteht Grund zu der Annahme, dass die Arbeit erfolgreich ausgef√ºhrt wurde.  In realen Projekten beschr√§nken sich √úberpr√ºfungen normalerweise auf das Volumen der auferlegten Dienste und Protokolle, das in einem bestimmten Netzwerk als gesch√§ftskritisch eingestuft wird.  Dies gilt nicht f√ºr die Programmierung, ich kann mich jedoch nur auf dieses Thema konzentrieren, da die Wahl des Erfolgskriteriums der Schl√ºssel zu einem guten Schlaf nach getaner Arbeit ist. <br><br><div class="spoiler">  <b class="spoiler_title">BGP-Sitzungs√ºberpr√ºfungscode</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> yaml <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos.factory.factory_loader <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FactoryLoader <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Device <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getConnection</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_host, p_user)</span></span></span><span class="hljs-function">:</span></span> acc = {<span class="hljs-string"><span class="hljs-string">'lab'</span></span>: <span class="hljs-string"><span class="hljs-string">'lab123'</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- getting ssh connection to '</span></span> + p_host l_dev = Device(host=p_host, user=p_user, password=acc[p_user], auto_probe=<span class="hljs-number"><span class="hljs-number">2</span></span>, gather_facts=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, port=<span class="hljs-number"><span class="hljs-number">22</span></span>) l_dev.open() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (l_dev.connected): l_dev.timeout = <span class="hljs-number"><span class="hljs-number">900</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ssh cionnection to host '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' established'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- connection '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' named '</span></span> + l_dev.facts[<span class="hljs-string"><span class="hljs-string">'hostname'</span></span>] + <span class="hljs-string"><span class="hljs-string">' established '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> l_dev <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> Exception(<span class="hljs-string"><span class="hljs-string">' DEBUG --- ssh connection to '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' was not established'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- getConnection : connection to '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' was not established. ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close_dev</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(d)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: d.close() <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- close_dev : connection to cant be closed. ex:'</span></span> + str(ex) ip_f_name = <span class="hljs-string"><span class="hljs-string">'ip-list-1.txt'</span></span> yml = <span class="hljs-string"><span class="hljs-string">''' --- BGPGroup: rpc: get-bgp-group-information args: group-name: 'int' item: bgp-group view: BGPGroupView BGPGroupView: fields: count: peer-count established: established-count '''</span></span> globals().update(FactoryLoader().load(yaml.load(yml))) node_list = [<span class="hljs-string"><span class="hljs-string">'10.83.20.68'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.69'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.70'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.71'</span></span>] abr_list = [<span class="hljs-string"><span class="hljs-string">'10.83.20.66'</span></span>, <span class="hljs-string"><span class="hljs-string">'10.83.20.67'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> node <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> node_list + abr_list: ddev = getConnection(node, <span class="hljs-string"><span class="hljs-string">'lab'</span></span>) bgp_group = BGPGroup(ddev).get() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> group <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> bgp_group: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (group.count != group.established): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'bgp connection lost'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'dont panic!'</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Ergebnisse seiner Arbeit</b> <div class="spoiler_text">  DEBUG - SSH-Verbindung zu 10.83.20.68 erhalten <br>  DEBUG - SSH-Verbindung zum Host 10.83.20.68 hergestellt <br>  DEBUG - Verbindung 10.83.20.68 mit dem Namen r1 hergestellt <br>  Keine Panik! <br>  DEBUG - SSH-Verbindung zu 10.83.20.69 erhalten <br>  DEBUG - SSH-Verbindung zum Host 10.83.20.69 hergestellt <br>  DEBUG - Verbindung 10.83.20.69 mit dem Namen r2 hergestellt <br>  Keine Panik! <br>  DEBUG - SSH-Verbindung zu 10.83.20.70 erhalten <br>  DEBUG - SSH-Verbindung zum Host 10.83.20.70 hergestellt <br>  DEBUG - Verbindung 10.83.20.70 mit dem Namen r3 hergestellt <br>  Keine Panik! <br>  DEBUG - SSH-Verbindung zu 10.83.20.71 erhalten <br>  DEBUG - SSH-Verbindung zum Host 10.83.20.71 hergestellt <br>  DEBUG - Verbindung 10.83.20.71 mit dem Namen r4 hergestellt <br>  Keine Panik! <br>  DEBUG - SSH-Verbindung zu 10.83.20.66 erhalten <br>  DEBUG - SSH-Verbindung zum Host 10.83.20.66 hergestellt <br>  DEBUG - Verbindung 10.83.20.66 mit dem Namen abr1 hergestellt <br>  Keine Panik! <br>  DEBUG - SSH-Verbindung zu 10.83.20.67 erhalten <br>  DEBUG - SSH-Verbindung zum Host 10.83.20.67 hergestellt <br>  DEBUG - Verbindung 10.83.20.67 mit dem Namen abr2 hergestellt <br>  Keine Panik! <br></div></div><br>  Bisher haben wir haupts√§chlich √ºber Netzwerk-Dinge gesprochen, aber ich habe noch kein Wort √ºber den Programmcode erw√§hnt, der in einem Artikel mit diesem Namen im Mittelpunkt der Aufmerksamkeit zu stehen scheint.  Erstens scheint es mir, dass Gedanken viel wichtiger sind als Code. Wenn formalisierte Entit√§ten im Kopf sind, kann ein Ingenieur sie in ein Werkzeug verwandeln und sie in Form von Code angeben.  Zweitens m√∂chte ich mich nicht wiederholen. Alles, was in diesen Beispielen nicht offensichtlich erscheint, sowie das erforderliche Mindestwissen, um mit Python und Pyez zu arbeiten, sind im vorherigen Artikel der Serie enthalten.  Drittens f√ºhrt der Konfigurationsvorbereitungscode seine Arbeit aus, die als offline bezeichnet wird und keine unmittelbaren Auswirkungen auf das Netzwerk hat, sodass es unwahrscheinlich ist, dass Interesse entsteht.  Mit dem Implementierungscode der Implementierungsphase sieht es etwas anders aus. Die Entwicklung dieser Verfahren wirft die folgenden Fragen auf: <br><br><ul><li>  Wie kann √ºberpr√ºft werden, ob das gesamte Befehlsvolumen vom Dolmetscher angemessen wahrgenommen wird? </li><li>  Wie kann ich √ºberpr√ºfen, ob √Ñnderungen an der Konfiguration √ºbernommen wurden? </li><li>  Wie implementiere ich ein Transaktionskonfigurationsschema? </li><li>  Wie kann die Konfiguration bei Kontrollverlust zur√ºckgesetzt werden? </li><li>  Wie bereinige ich, wenn der Interpreter w√§hrend der √úbertragung von Befehlen einen Fehler meldet? </li></ul><br>  Je mehr Aufmerksamkeit diesen Themen gewidmet wird, desto seltener werden √úberraschungen in der Ausf√ºhrungsphase serviert.  Stellen Sie sich den √Ñrger eines Syntaxfehlers vor, der eine Routing-Richtlinie beschreibt, wenn Klassifizierer dieser Richtlinie vom Interpreter nur teilweise genehmigt werden.  Wenn Sie den Vorgang des Zusammenf√ºhrens dieser Richtlinie mit der aktuellen Konfiguration nicht zeilenweise steuern, k√∂nnen Sie den Ger√§testapel mit einem Klick auf eine Schaltfl√§che in einen unzureichenden Zustand versetzen.  Daher halte ich mich ungef√§hr an einen solchen Block des Ausf√ºhrungsstufendiagramms. <br><br><img src="https://habrastorage.org/webt/ou/kz/8q/oukz8qzqdaq9oqp6weqsg9-xpu4.png" alt="Bild"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ausger√ºstet</a> mit der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pyez-</a> Dokumentation wurde der folgende universelle Konfigurationsladecode kompiliert, den Sie in Ihrer t√§glichen Arbeit genauso verwenden k√∂nnen, wie ich ihn in meiner verwende. <br><br><div class="spoiler">  <b class="spoiler_title">conf_change.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> yaml <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos.factory.factory_loader <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FactoryLoader <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Device <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos.utils.config <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Config <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> copy <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> re <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> traceback <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnpr.junos.exception <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os.path yml = <span class="hljs-string"><span class="hljs-string">''' --- VersionInfo: rpc: get-software-information item: software-information view: VersionInfoView VersionInfoView: fields: name: host-name '''</span></span> Device.auto_probe = <span class="hljs-number"><span class="hljs-number">3</span></span> ip_f_name = <span class="hljs-string"><span class="hljs-string">'ip-list-1.txt'</span></span> cur_stage=<span class="hljs-string"><span class="hljs-string">'2'</span></span> globals().update(FactoryLoader().load(yaml.load(yml))) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doTestOSPF</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_dev, p_node, f_do)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doTestOSPF : at '</span></span> + p_node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( p_dev == <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doTestOSPF : connection to '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' is None'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: d_conf = p_dev.cli(<span class="hljs-string"><span class="hljs-string">"show configuration | display set"</span></span>).split(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>) ret_val = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> set_found = <span class="hljs-number"><span class="hljs-number">0</span></span> c_path = <span class="hljs-string"><span class="hljs-string">'st'</span></span> + cur_stage + <span class="hljs-string"><span class="hljs-string">'-'</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">'.txt'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(c_path, <span class="hljs-string"><span class="hljs-string">"r"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> line <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> f: c_line = line.replace(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>).replace(<span class="hljs-string"><span class="hljs-string">'\r\n'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">'delete '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> c_line): set_found = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (c_line <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> d_conf) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (c_line != <span class="hljs-string"><span class="hljs-string">''</span></span>)): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doTestOSPF found missing line '</span></span> + c_line ret_val = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> f.close() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (set_found == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (f_do == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) ): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret_val <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doTestOSPF : connection to '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' was not established. ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_dev, p_node, f_do)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> doTestOSPF(p_dev, p_node, f_do) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close_dev</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(d)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: d.close() <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- close_dev : connection to cant be closed. ex:'</span></span> + str(ex) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getConnection</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_host, p_user)</span></span></span><span class="hljs-function">:</span></span> acc = {<span class="hljs-string"><span class="hljs-string">'lab'</span></span>: <span class="hljs-string"><span class="hljs-string">'lab123'</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- getting ssh connection to '</span></span> + p_host l_dev = Device(host=p_host, user=p_user, password=acc[p_user], auto_probe=<span class="hljs-number"><span class="hljs-number">2</span></span>, gather_facts=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, port=<span class="hljs-number"><span class="hljs-number">22</span></span>) l_dev.open() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (l_dev.connected): l_dev.timeout = <span class="hljs-number"><span class="hljs-number">900</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ssh cionnection to host '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' established'</span></span> v = VersionInfo(l_dev).get() <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- connection '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' named '</span></span> + l_dev.facts[<span class="hljs-string"><span class="hljs-string">'hostname'</span></span>] + <span class="hljs-string"><span class="hljs-string">' established '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> l_dev <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> Exception(<span class="hljs-string"><span class="hljs-string">' DEBUG --- ssh connection to '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' was not established'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- getConnection : connection to '</span></span> + p_host + <span class="hljs-string"><span class="hljs-string">' was not established. ex:'</span></span> + str(ex) traceback.print_exc() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doCompare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_conf, p_node)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doCompare at '</span></span> + p_node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( p_conf.diff() == <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doCompare : conf.diff at '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doLoad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_conf, p_node)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doLoad at '</span></span> + p_node c_path = <span class="hljs-string"><span class="hljs-string">'st'</span></span> + cur_stage + <span class="hljs-string"><span class="hljs-string">'-'</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">'.txt'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (os.path.isfile(c_path)): p_conf.load(path=c_path, format=<span class="hljs-string"><span class="hljs-string">'set'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doLoad : cant load config to '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doRollback</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_conf, p_node, p_r)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doRollback at '</span></span> + p_node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( p_conf.rollback(rb_id=p_r) == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doRollback : cant rollback config to '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doCommitCheck</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_conf, p_node)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doCommitCheck at '</span></span> + p_node p_conf.commit_check() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doCommitCheck : cant config commit check config to '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doCommit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_conf, p_node, p_confirm_m=None)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doCommit at '</span></span> + p_node commit_res = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (p_confirm_m == <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>): commit_res = p_conf.commit(timeout=<span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: commit_res = p_conf.commit(confirm=p_confirm_m, timeout=<span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (commit_res == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> CommitError <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> c_ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doCommit : cant config commit at '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' ex:'</span></span> + str(c_ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> RpcTimeoutError <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> t_ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doCommit : config was commited at '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' with the following ex:'</span></span> + str(t_ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doJob</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p_dev, p_node)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doJob at '</span></span> + p_node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( p_dev == <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doJob : connection to '</span></span> + p_node + <span class="hljs-string"><span class="hljs-string">' is None'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> Config(p_dev) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> conf: is_compare = doCompare(conf, node) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( is_compare == <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doJob : at config compare '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( is_compare == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doJob : configuration locked at '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- starting to do config changes at '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( doLoad(conf, node) != <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doJob : conf.load '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( doCompare(conf, node) != <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doJob : doing rollback after load at '</span></span> + node + <span class="hljs-string"><span class="hljs-string">' deleting :'</span></span> + str(conf.diff()) doRollback(conf, node, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- commit check at '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (doCommitCheck(conf, node) != <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doJob : conf.doCommitCheck failed at '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( doCompare(conf, node) != <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doJob : doing rollback after load at '</span></span> + node + <span class="hljs-string"><span class="hljs-string">' deleting :'</span></span> + str(conf.diff()) doRollback(conf, node, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> commit_m = <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- commiting changes at '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (doCommit(conf, node, commit_m) != <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doJob : conf.commit '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( doCompare(conf, node) != <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- doJob : doing rollback after commit at '</span></span> + node + <span class="hljs-string"><span class="hljs-string">' deleting :'</span></span> + str(conf.diff()) doRollback(conf, node, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ex: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' DEBUG --- ERROR --- doJob : cant do job '</span></span> + node + <span class="hljs-string"><span class="hljs-string">' ex:'</span></span> + str(ex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node_list = [] result_list = {} <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(ip_f_name, <span class="hljs-string"><span class="hljs-string">"r"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f_ip: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> line <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> f_ip: c_ip_line = line.replace(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>).replace(<span class="hljs-string"><span class="hljs-string">'\r\n'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c_ip_line != <span class="hljs-string"><span class="hljs-string">''</span></span>): node_list.append(c_ip_line) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> node <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> node_list: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- ************************************ '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- checking '</span></span> + node result_list.setdefault(node, {}) cur_dev = getConnection(node, <span class="hljs-string"><span class="hljs-string">'lab'</span></span>) is_test = doTest(cur_dev, node, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( is_test == <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- error'</span></span> result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'error'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( is_test == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- conf exist'</span></span> result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'nn'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( is_test == <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- conf not exist, doing change'</span></span> is_job = doJob(cur_dev, node) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( is_job == <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- cant do job at '</span></span> + node result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'error'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( is_job == <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- cant do job at '</span></span> + node result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'not_done'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( is_job == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- done job at '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- going sleep at '</span></span> + node time.sleep(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- checking job status '</span></span> + node cur_dev_confirm = getConnection(node, <span class="hljs-string"><span class="hljs-string">'lab'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( cur_dev_confirm != <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> ): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (doTest(cur_dev, node, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- commiting the configuration at '</span></span> + node <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (doCommit(Config(cur_dev_confirm), node) != <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- ERROR cant commit the configuration at '</span></span> + node result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'not_done'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- configuration commited at '</span></span> + node result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'done'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- ERROR cant find conf after job '</span></span> + node result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'not_done'</span></span>) close_dev(cur_dev_confirm) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'FLOW -- ERROR cant access '</span></span> + node + <span class="hljs-string"><span class="hljs-string">' for commiting'</span></span> result_list.setdefault(node, {}).setdefault(<span class="hljs-string"><span class="hljs-string">'status'</span></span>, <span class="hljs-string"><span class="hljs-string">'not_done'</span></span>) close_dev(cur_dev) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> result_list</code> </pre><br></div></div><br>  Und die Ergebnisse seiner Arbeit in drei Schritten <br><br><div class="spoiler">  <b class="spoiler_title">Versteckter Text</b> <div class="spoiler_text"> <code>Python 2.7.14 (v2.7.14:84471935ed, Sep 16 2017, 20:19:30) [MSC v.1500 32 bit (Intel)] on win32 <br> Type "copyright", "credits" or "license()" for more information. <br> &gt;&gt;&gt; <br> ==== RESTART: C:\Users\and_andreev\Desktop\tools\lab-case2\conf_change.py ==== <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.66 <br> DEBUG --- getting ssh connection to 10.83.20.66 <br> DEBUG --- ssh cionnection to host 10.83.20.66 established <br> DEBUG --- connection 10.83.20.66 named abr1 established <br> DEBUG --- doTestOSPF : at 10.83.20.66 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.66 <br> DEBUG --- doCompare at 10.83.20.66 <br> DEBUG --- starting to do config changes at 10.83.20.66 <br> DEBUG --- doLoad at 10.83.20.66 <br> DEBUG --- commit check at 10.83.20.66 <br> DEBUG --- doCommitCheck at 10.83.20.66 <br> DEBUG --- commiting changes at 10.83.20.66 <br> DEBUG --- doCommit at 10.83.20.66 <br> FLOW -- done job at 10.83.20.66 <br> FLOW -- going sleep at 10.83.20.66 <br> FLOW -- checking job status 10.83.20.66 <br> DEBUG --- getting ssh connection to 10.83.20.66 <br> DEBUG --- ssh cionnection to host 10.83.20.66 established <br> DEBUG --- connection 10.83.20.66 named abr1 established <br> DEBUG --- doTestOSPF : at 10.83.20.66 <br> FLOW -- commiting the configuration at 10.83.20.66 <br> DEBUG --- doCommit at 10.83.20.66 <br> FLOW -- configuration commited at 10.83.20.66 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.67 <br> DEBUG --- getting ssh connection to 10.83.20.67 <br> DEBUG --- ssh cionnection to host 10.83.20.67 established <br> DEBUG --- connection 10.83.20.67 named abr2 established <br> DEBUG --- doTestOSPF : at 10.83.20.67 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.67 <br> DEBUG --- doCompare at 10.83.20.67 <br> DEBUG --- starting to do config changes at 10.83.20.67 <br> DEBUG --- doLoad at 10.83.20.67 <br> DEBUG --- commit check at 10.83.20.67 <br> DEBUG --- doCommitCheck at 10.83.20.67 <br> DEBUG --- commiting changes at 10.83.20.67 <br> DEBUG --- doCommit at 10.83.20.67 <br> FLOW -- done job at 10.83.20.67 <br> FLOW -- going sleep at 10.83.20.67 <br> FLOW -- checking job status 10.83.20.67 <br> DEBUG --- getting ssh connection to 10.83.20.67 <br> DEBUG --- ssh cionnection to host 10.83.20.67 established <br> DEBUG --- connection 10.83.20.67 named abr2 established <br> DEBUG --- doTestOSPF : at 10.83.20.67 <br> FLOW -- commiting the configuration at 10.83.20.67 <br> DEBUG --- doCommit at 10.83.20.67 <br> FLOW -- configuration commited at 10.83.20.67 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.68 <br> DEBUG --- getting ssh connection to 10.83.20.68 <br> DEBUG --- ssh cionnection to host 10.83.20.68 established <br> DEBUG --- connection 10.83.20.68 named r1 established <br> DEBUG --- doTestOSPF : at 10.83.20.68 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/2.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/2.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/2.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.68 <br> DEBUG --- doCompare at 10.83.20.68 <br> DEBUG --- starting to do config changes at 10.83.20.68 <br> DEBUG --- doLoad at 10.83.20.68 <br> DEBUG --- commit check at 10.83.20.68 <br> DEBUG --- doCommitCheck at 10.83.20.68 <br> DEBUG --- commiting changes at 10.83.20.68 <br> DEBUG --- doCommit at 10.83.20.68 <br> FLOW -- done job at 10.83.20.68 <br> FLOW -- going sleep at 10.83.20.68 <br> FLOW -- checking job status 10.83.20.68 <br> DEBUG --- getting ssh connection to 10.83.20.68 <br> DEBUG --- ssh cionnection to host 10.83.20.68 established <br> DEBUG --- connection 10.83.20.68 named r1 established <br> DEBUG --- doTestOSPF : at 10.83.20.68 <br> FLOW -- commiting the configuration at 10.83.20.68 <br> DEBUG --- doCommit at 10.83.20.68 <br> FLOW -- configuration commited at 10.83.20.68 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.69 <br> DEBUG --- getting ssh connection to 10.83.20.69 <br> DEBUG --- ssh cionnection to host 10.83.20.69 established <br> DEBUG --- connection 10.83.20.69 named r2 established <br> DEBUG --- doTestOSPF : at 10.83.20.69 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/0.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/0.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/0.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.69 <br> DEBUG --- doCompare at 10.83.20.69 <br> DEBUG --- starting to do config changes at 10.83.20.69 <br> DEBUG --- doLoad at 10.83.20.69 <br> DEBUG --- commit check at 10.83.20.69 <br> DEBUG --- doCommitCheck at 10.83.20.69 <br> DEBUG --- commiting changes at 10.83.20.69 <br> DEBUG --- doCommit at 10.83.20.69 <br> FLOW -- done job at 10.83.20.69 <br> FLOW -- going sleep at 10.83.20.69 <br> FLOW -- checking job status 10.83.20.69 <br> DEBUG --- getting ssh connection to 10.83.20.69 <br> DEBUG --- ssh cionnection to host 10.83.20.69 established <br> DEBUG --- connection 10.83.20.69 named r2 established <br> DEBUG --- doTestOSPF : at 10.83.20.69 <br> FLOW -- commiting the configuration at 10.83.20.69 <br> DEBUG --- doCommit at 10.83.20.69 <br> FLOW -- configuration commited at 10.83.20.69 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.70 <br> DEBUG --- getting ssh connection to 10.83.20.70 <br> DEBUG --- ssh cionnection to host 10.83.20.70 established <br> DEBUG --- connection 10.83.20.70 named r3 established <br> DEBUG --- doTestOSPF : at 10.83.20.70 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/0.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/0.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/0.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.70 <br> DEBUG --- doCompare at 10.83.20.70 <br> DEBUG --- starting to do config changes at 10.83.20.70 <br> DEBUG --- doLoad at 10.83.20.70 <br> DEBUG --- commit check at 10.83.20.70 <br> DEBUG --- doCommitCheck at 10.83.20.70 <br> DEBUG --- commiting changes at 10.83.20.70 <br> DEBUG --- doCommit at 10.83.20.70 <br> FLOW -- done job at 10.83.20.70 <br> FLOW -- going sleep at 10.83.20.70 <br> FLOW -- checking job status 10.83.20.70 <br> DEBUG --- getting ssh connection to 10.83.20.70 <br> DEBUG --- ssh cionnection to host 10.83.20.70 established <br> DEBUG --- connection 10.83.20.70 named r3 established <br> DEBUG --- doTestOSPF : at 10.83.20.70 <br> FLOW -- commiting the configuration at 10.83.20.70 <br> DEBUG --- doCommit at 10.83.20.70 <br> FLOW -- configuration commited at 10.83.20.70 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.71 <br> DEBUG --- getting ssh connection to 10.83.20.71 <br> DEBUG --- ssh cionnection to host 10.83.20.71 established <br> DEBUG --- connection 10.83.20.71 named r4 established <br> DEBUG --- doTestOSPF : at 10.83.20.71 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/1.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/2.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/2.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/2.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface ge-0/0/3.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.71 <br> DEBUG --- doCompare at 10.83.20.71 <br> DEBUG --- starting to do config changes at 10.83.20.71 <br> DEBUG --- doLoad at 10.83.20.71 <br> DEBUG --- commit check at 10.83.20.71 <br> DEBUG --- doCommitCheck at 10.83.20.71 <br> DEBUG --- commiting changes at 10.83.20.71 <br> DEBUG --- doCommit at 10.83.20.71 <br> FLOW -- done job at 10.83.20.71 <br> FLOW -- going sleep at 10.83.20.71 <br> FLOW -- checking job status 10.83.20.71 <br> DEBUG --- getting ssh connection to 10.83.20.71 <br> DEBUG --- ssh cionnection to host 10.83.20.71 established <br> DEBUG --- connection 10.83.20.71 named r4 established <br> DEBUG --- doTestOSPF : at 10.83.20.71 <br> FLOW -- commiting the configuration at 10.83.20.71 <br> DEBUG --- doCommit at 10.83.20.71 <br> FLOW -- configuration commited at 10.83.20.71 <br> {'10.83.20.70': {'status': 'done'}, '10.83.20.71': {'status': 'done'}, '10.83.20.67': {'status': 'done'}, '10.83.20.66': {'status': 'done'}, '10.83.20.69': {'status': 'done'}, '10.83.20.68': {'status': 'done'}} <br> &gt;&gt;&gt; <br> &gt;&gt;&gt; <br> &gt;&gt;&gt; <br> ==== RESTART: C:\Users\and_andreev\Desktop\tools\lab-case2\conf_change.py ==== <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.66 <br> DEBUG --- getting ssh connection to 10.83.20.66 <br> DEBUG --- ssh cionnection to host 10.83.20.66 established <br> DEBUG --- connection 10.83.20.66 named abr1 established <br> DEBUG --- doTestOSPF : at 10.83.20.66 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.66 <br> DEBUG --- doCompare at 10.83.20.66 <br> DEBUG --- starting to do config changes at 10.83.20.66 <br> DEBUG --- doLoad at 10.83.20.66 <br> DEBUG --- commit check at 10.83.20.66 <br> DEBUG --- doCommitCheck at 10.83.20.66 <br> DEBUG --- commiting changes at 10.83.20.66 <br> DEBUG --- doCommit at 10.83.20.66 <br> FLOW -- done job at 10.83.20.66 <br> FLOW -- going sleep at 10.83.20.66 <br> FLOW -- checking job status 10.83.20.66 <br> DEBUG --- getting ssh connection to 10.83.20.66 <br> DEBUG --- ssh cionnection to host 10.83.20.66 established <br> DEBUG --- connection 10.83.20.66 named abr1 established <br> DEBUG --- doTestOSPF : at 10.83.20.66 <br> FLOW -- commiting the configuration at 10.83.20.66 <br> DEBUG --- doCommit at 10.83.20.66 <br> FLOW -- configuration commited at 10.83.20.66 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.67 <br> DEBUG --- getting ssh connection to 10.83.20.67 <br> DEBUG --- ssh cionnection to host 10.83.20.67 established <br> DEBUG --- connection 10.83.20.67 named abr2 established <br> DEBUG --- doTestOSPF : at 10.83.20.67 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 metric 1 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.67 <br> DEBUG --- doCompare at 10.83.20.67 <br> DEBUG --- starting to do config changes at 10.83.20.67 <br> DEBUG --- doLoad at 10.83.20.67 <br> DEBUG --- commit check at 10.83.20.67 <br> DEBUG --- doCommitCheck at 10.83.20.67 <br> DEBUG --- commiting changes at 10.83.20.67 <br> DEBUG --- doCommit at 10.83.20.67 <br> FLOW -- done job at 10.83.20.67 <br> FLOW -- going sleep at 10.83.20.67 <br> FLOW -- checking job status 10.83.20.67 <br> DEBUG --- getting ssh connection to 10.83.20.67 <br> DEBUG --- ssh cionnection to host 10.83.20.67 established <br> DEBUG --- connection 10.83.20.67 named abr2 established <br> DEBUG --- doTestOSPF : at 10.83.20.67 <br> FLOW -- commiting the configuration at 10.83.20.67 <br> DEBUG --- doCommit at 10.83.20.67 <br> FLOW -- configuration commited at 10.83.20.67 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.68 <br> DEBUG --- getting ssh connection to 10.83.20.68 <br> DEBUG --- ssh cionnection to host 10.83.20.68 established <br> DEBUG --- connection 10.83.20.68 named r1 established <br> DEBUG --- doTestOSPF : at 10.83.20.68 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/2.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/2.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface lo0.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface lo0.0 secondary <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.68 <br> DEBUG --- doCompare at 10.83.20.68 <br> DEBUG --- starting to do config changes at 10.83.20.68 <br> DEBUG --- doLoad at 10.83.20.68 <br> DEBUG --- commit check at 10.83.20.68 <br> DEBUG --- doCommitCheck at 10.83.20.68 <br> DEBUG --- commiting changes at 10.83.20.68 <br> DEBUG --- doCommit at 10.83.20.68 <br> FLOW -- done job at 10.83.20.68 <br> FLOW -- going sleep at 10.83.20.68 <br> FLOW -- checking job status 10.83.20.68 <br> DEBUG --- getting ssh connection to 10.83.20.68 <br> DEBUG --- ssh cionnection to host 10.83.20.68 established <br> DEBUG --- connection 10.83.20.68 named r1 established <br> DEBUG --- doTestOSPF : at 10.83.20.68 <br> FLOW -- commiting the configuration at 10.83.20.68 <br> DEBUG --- doCommit at 10.83.20.68 <br> FLOW -- configuration commited at 10.83.20.68 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.69 <br> DEBUG --- getting ssh connection to 10.83.20.69 <br> DEBUG --- ssh cionnection to host 10.83.20.69 established <br> DEBUG --- connection 10.83.20.69 named r2 established <br> DEBUG --- doTestOSPF : at 10.83.20.69 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/0.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/0.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface lo0.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface lo0.0 secondary <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.69 <br> DEBUG --- doCompare at 10.83.20.69 <br> DEBUG --- starting to do config changes at 10.83.20.69 <br> DEBUG --- doLoad at 10.83.20.69 <br> DEBUG --- commit check at 10.83.20.69 <br> DEBUG --- doCommitCheck at 10.83.20.69 <br> DEBUG --- commiting changes at 10.83.20.69 <br> DEBUG --- doCommit at 10.83.20.69 <br> FLOW -- done job at 10.83.20.69 <br> FLOW -- going sleep at 10.83.20.69 <br> FLOW -- checking job status 10.83.20.69 <br> DEBUG --- getting ssh connection to 10.83.20.69 <br> DEBUG --- ssh cionnection to host 10.83.20.69 established <br> DEBUG --- connection 10.83.20.69 named r2 established <br> DEBUG --- doTestOSPF : at 10.83.20.69 <br> FLOW -- commiting the configuration at 10.83.20.69 <br> DEBUG --- doCommit at 10.83.20.69 <br> FLOW -- configuration commited at 10.83.20.69 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.70 <br> DEBUG --- getting ssh connection to 10.83.20.70 <br> DEBUG --- ssh cionnection to host 10.83.20.70 established <br> DEBUG --- connection 10.83.20.70 named r3 established <br> DEBUG --- doTestOSPF : at 10.83.20.70 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/0.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/0.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface lo0.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface lo0.0 secondary <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.70 <br> DEBUG --- doCompare at 10.83.20.70 <br> DEBUG --- starting to do config changes at 10.83.20.70 <br> DEBUG --- doLoad at 10.83.20.70 <br> DEBUG --- commit check at 10.83.20.70 <br> DEBUG --- doCommitCheck at 10.83.20.70 <br> DEBUG --- commiting changes at 10.83.20.70 <br> DEBUG --- doCommit at 10.83.20.70 <br> FLOW -- done job at 10.83.20.70 <br> FLOW -- going sleep at 10.83.20.70 <br> FLOW -- checking job status 10.83.20.70 <br> DEBUG --- getting ssh connection to 10.83.20.70 <br> DEBUG --- ssh cionnection to host 10.83.20.70 established <br> DEBUG --- connection 10.83.20.70 named r3 established <br> DEBUG --- doTestOSPF : at 10.83.20.70 <br> FLOW -- commiting the configuration at 10.83.20.70 <br> DEBUG --- doCommit at 10.83.20.70 <br> FLOW -- configuration commited at 10.83.20.70 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.71 <br> DEBUG --- getting ssh connection to 10.83.20.71 <br> DEBUG --- ssh cionnection to host 10.83.20.71 established <br> DEBUG --- connection 10.83.20.71 named r4 established <br> DEBUG --- doTestOSPF : at 10.83.20.71 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/1.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/2.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/2.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 secondary <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface ge-0/0/3.0 metric 1 <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.250 interface lo0.0 interface-type p2p <br> DEBUG --- doTestOSPF found missing line set protocols ospf area 0.0.0.200 interface lo0.0 secondary <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.71 <br> DEBUG --- doCompare at 10.83.20.71 <br> DEBUG --- starting to do config changes at 10.83.20.71 <br> DEBUG --- doLoad at 10.83.20.71 <br> DEBUG --- commit check at 10.83.20.71 <br> DEBUG --- doCommitCheck at 10.83.20.71 <br> DEBUG --- commiting changes at 10.83.20.71 <br> DEBUG --- doCommit at 10.83.20.71 <br> FLOW -- done job at 10.83.20.71 <br> FLOW -- going sleep at 10.83.20.71 <br> FLOW -- checking job status 10.83.20.71 <br> DEBUG --- getting ssh connection to 10.83.20.71 <br> DEBUG --- ssh cionnection to host 10.83.20.71 established <br> DEBUG --- connection 10.83.20.71 named r4 established <br> DEBUG --- doTestOSPF : at 10.83.20.71 <br> FLOW -- commiting the configuration at 10.83.20.71 <br> DEBUG --- doCommit at 10.83.20.71 <br> FLOW -- configuration commited at 10.83.20.71 <br> {'10.83.20.70': {'status': 'done'}, '10.83.20.71': {'status': 'done'}, '10.83.20.67': {'status': 'done'}, '10.83.20.66': {'status': 'done'}, '10.83.20.69': {'status': 'done'}, '10.83.20.68': {'status': 'done'}} <br> &gt;&gt;&gt; <br> ==== RESTART: C:\Users\and_andreev\Desktop\tools\lab-case2\conf_change.py ==== <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.66 <br> DEBUG --- getting ssh connection to 10.83.20.66 <br> DEBUG --- ssh cionnection to host 10.83.20.66 established <br> DEBUG --- connection 10.83.20.66 named abr1 established <br> DEBUG --- doTestOSPF : at 10.83.20.66 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.66 <br> DEBUG --- doCompare at 10.83.20.66 <br> DEBUG --- starting to do config changes at 10.83.20.66 <br> DEBUG --- doLoad at 10.83.20.66 <br> DEBUG --- commit check at 10.83.20.66 <br> DEBUG --- doCommitCheck at 10.83.20.66 <br> DEBUG --- commiting changes at 10.83.20.66 <br> DEBUG --- doCommit at 10.83.20.66 <br> FLOW -- done job at 10.83.20.66 <br> FLOW -- going sleep at 10.83.20.66 <br> FLOW -- checking job status 10.83.20.66 <br> DEBUG --- getting ssh connection to 10.83.20.66 <br> DEBUG --- ssh cionnection to host 10.83.20.66 established <br> DEBUG --- connection 10.83.20.66 named abr1 established <br> DEBUG --- doTestOSPF : at 10.83.20.66 <br> FLOW -- commiting the configuration at 10.83.20.66 <br> DEBUG --- doCommit at 10.83.20.66 <br> FLOW -- configuration commited at 10.83.20.66 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.67 <br> DEBUG --- getting ssh connection to 10.83.20.67 <br> DEBUG --- ssh cionnection to host 10.83.20.67 established <br> DEBUG --- connection 10.83.20.67 named abr2 established <br> DEBUG --- doTestOSPF : at 10.83.20.67 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.67 <br> DEBUG --- doCompare at 10.83.20.67 <br> DEBUG --- starting to do config changes at 10.83.20.67 <br> DEBUG --- doLoad at 10.83.20.67 <br> DEBUG --- commit check at 10.83.20.67 <br> DEBUG --- doCommitCheck at 10.83.20.67 <br> DEBUG --- commiting changes at 10.83.20.67 <br> DEBUG --- doCommit at 10.83.20.67 <br> FLOW -- done job at 10.83.20.67 <br> FLOW -- going sleep at 10.83.20.67 <br> FLOW -- checking job status 10.83.20.67 <br> DEBUG --- getting ssh connection to 10.83.20.67 <br> DEBUG --- ssh cionnection to host 10.83.20.67 established <br> DEBUG --- connection 10.83.20.67 named abr2 established <br> DEBUG --- doTestOSPF : at 10.83.20.67 <br> FLOW -- commiting the configuration at 10.83.20.67 <br> DEBUG --- doCommit at 10.83.20.67 <br> FLOW -- configuration commited at 10.83.20.67 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.68 <br> DEBUG --- getting ssh connection to 10.83.20.68 <br> DEBUG --- ssh cionnection to host 10.83.20.68 established <br> DEBUG --- connection 10.83.20.68 named r1 established <br> DEBUG --- doTestOSPF : at 10.83.20.68 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.68 <br> DEBUG --- doCompare at 10.83.20.68 <br> DEBUG --- starting to do config changes at 10.83.20.68 <br> DEBUG --- doLoad at 10.83.20.68 <br> DEBUG --- commit check at 10.83.20.68 <br> DEBUG --- doCommitCheck at 10.83.20.68 <br> DEBUG --- commiting changes at 10.83.20.68 <br> DEBUG --- doCommit at 10.83.20.68 <br> FLOW -- done job at 10.83.20.68 <br> FLOW -- going sleep at 10.83.20.68 <br> FLOW -- checking job status 10.83.20.68 <br> DEBUG --- getting ssh connection to 10.83.20.68 <br> DEBUG --- ssh cionnection to host 10.83.20.68 established <br> DEBUG --- connection 10.83.20.68 named r1 established <br> DEBUG --- doTestOSPF : at 10.83.20.68 <br> FLOW -- commiting the configuration at 10.83.20.68 <br> DEBUG --- doCommit at 10.83.20.68 <br> FLOW -- configuration commited at 10.83.20.68 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.69 <br> DEBUG --- getting ssh connection to 10.83.20.69 <br> DEBUG --- ssh cionnection to host 10.83.20.69 established <br> DEBUG --- connection 10.83.20.69 named r2 established <br> DEBUG --- doTestOSPF : at 10.83.20.69 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.69 <br> DEBUG --- doCompare at 10.83.20.69 <br> DEBUG --- starting to do config changes at 10.83.20.69 <br> DEBUG --- doLoad at 10.83.20.69 <br> DEBUG --- commit check at 10.83.20.69 <br> DEBUG --- doCommitCheck at 10.83.20.69 <br> DEBUG --- commiting changes at 10.83.20.69 <br> DEBUG --- doCommit at 10.83.20.69 <br> FLOW -- done job at 10.83.20.69 <br> FLOW -- going sleep at 10.83.20.69 <br> FLOW -- checking job status 10.83.20.69 <br> DEBUG --- getting ssh connection to 10.83.20.69 <br> DEBUG --- ssh cionnection to host 10.83.20.69 established <br> DEBUG --- connection 10.83.20.69 named r2 established <br> DEBUG --- doTestOSPF : at 10.83.20.69 <br> FLOW -- commiting the configuration at 10.83.20.69 <br> DEBUG --- doCommit at 10.83.20.69 <br> FLOW -- configuration commited at 10.83.20.69 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.70 <br> DEBUG --- getting ssh connection to 10.83.20.70 <br> DEBUG --- ssh cionnection to host 10.83.20.70 established <br> DEBUG --- connection 10.83.20.70 named r3 established <br> DEBUG --- doTestOSPF : at 10.83.20.70 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.70 <br> DEBUG --- doCompare at 10.83.20.70 <br> DEBUG --- starting to do config changes at 10.83.20.70 <br> DEBUG --- doLoad at 10.83.20.70 <br> DEBUG --- commit check at 10.83.20.70 <br> DEBUG --- doCommitCheck at 10.83.20.70 <br> DEBUG --- commiting changes at 10.83.20.70 <br> DEBUG --- doCommit at 10.83.20.70 <br> FLOW -- done job at 10.83.20.70 <br> FLOW -- going sleep at 10.83.20.70 <br> FLOW -- checking job status 10.83.20.70 <br> DEBUG --- getting ssh connection to 10.83.20.70 <br> DEBUG --- ssh cionnection to host 10.83.20.70 established <br> DEBUG --- connection 10.83.20.70 named r3 established <br> DEBUG --- doTestOSPF : at 10.83.20.70 <br> FLOW -- commiting the configuration at 10.83.20.70 <br> DEBUG --- doCommit at 10.83.20.70 <br> FLOW -- configuration commited at 10.83.20.70 <br> FLOW -- ************************************ <br> FLOW -- checking 10.83.20.71 <br> DEBUG --- getting ssh connection to 10.83.20.71 <br> DEBUG --- ssh cionnection to host 10.83.20.71 established <br> DEBUG --- connection 10.83.20.71 named r4 established <br> DEBUG --- doTestOSPF : at 10.83.20.71 <br> FLOW -- conf not exist, doing change <br> DEBUG --- doJob at 10.83.20.71 <br> DEBUG --- doCompare at 10.83.20.71 <br> DEBUG --- starting to do config changes at 10.83.20.71 <br> DEBUG --- doLoad at 10.83.20.71 <br> DEBUG --- commit check at 10.83.20.71 <br> DEBUG --- doCommitCheck at 10.83.20.71 <br> DEBUG --- commiting changes at 10.83.20.71 <br> DEBUG --- doCommit at 10.83.20.71 <br> FLOW -- done job at 10.83.20.71 <br> FLOW -- going sleep at 10.83.20.71 <br> FLOW -- checking job status 10.83.20.71 <br> DEBUG --- getting ssh connection to 10.83.20.71 <br> DEBUG --- ssh cionnection to host 10.83.20.71 established <br> DEBUG --- connection 10.83.20.71 named r4 established <br> DEBUG --- doTestOSPF : at 10.83.20.71 <br> FLOW -- commiting the configuration at 10.83.20.71 <br> DEBUG --- doCommit at 10.83.20.71 <br> FLOW -- configuration commited at 10.83.20.71 <br> {'10.83.20.70': {'status': 'done'}, '10.83.20.71': {'status': 'done'}, '10.83.20.67': {'status': 'done'}, '10.83.20.66': {'status': 'done'}, '10.83.20.69': {'status': 'done'}, '10.83.20.68': {'status': 'done'}} <br> &gt;&gt;&gt; <br></code> <br></div></div><br><ol><li>  Das vollst√§ndige IS-IS-Routing-Protokoll - Hannes Gredler, Walter Goralski </li><li>  OSPF  Anatomie eines Internet-Routing-Protokolls - John T. Moy </li><li>  Netzwerkfusionen und -migrationen: Junos Design und Implementierung - Gonzalo Gomez Herrero, Jan Anton Bernal Van Der Ven </li><li>  OSPF Multi-Area <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Adjacency</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">tools.ietf.org/html/rfc5185</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de413427/">https://habr.com/ru/post/de413427/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de413415/index.html">Adaptive Parallelit√§tslimits in Netflix</a></li>
<li><a href="../de413417/index.html">Energieeffizienz: Die Ans√§tze, die wir in Russland testen</a></li>
<li><a href="../de413419/index.html">PostgreSQL News Digest. Ausgabe Nr. 7</a></li>
<li><a href="../de413421/index.html">M√∂gliche Unsicherheiten in der Karriere eines Programmierers</a></li>
<li><a href="../de413423/index.html">RAS-L√∂sungen in Mars IS</a></li>
<li><a href="../de413429/index.html">Wir schreiben ein Plugin, um Wildcard-Zertifikate von Let's Encrypt zu erhalten</a></li>
<li><a href="../de413431/index.html">Workshops zur Entwicklung intelligenter Vertr√§ge √ºber Solidit√§t</a></li>
<li><a href="../de413433/index.html">65% der russischen IT-Experten m√∂chten im Ausland arbeiten</a></li>
<li><a href="../de413435/index.html">Vererbung jenseits der Genetik</a></li>
<li><a href="../de413437/index.html">Der Bote von allem</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>