<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘©ğŸ½ ğŸ¸ ğŸ© Also trotzdem, warum brauchst du make? ğŸ‘ğŸ¼ ğŸš´ğŸ½ ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Alles begann, wie es scheint, mit einer einfachen Frage, die mich zuerst zu einem RÃ¤tsel fÃ¼hrte: "Warum muss ich etwas machen? Warum kann ich mich mit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Also trotzdem, warum brauchst du make?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477656/"><img src="https://habrastorage.org/webt/ml/2x/si/ml2xsix5hfsiaiotrin5s4hqzsc.jpeg" width="300"><br><br><p>  Alles begann, wie es scheint, mit einer einfachen Frage, die mich zuerst zu einem RÃ¤tsel fÃ¼hrte: "Warum muss ich etwas machen? Warum kann ich mich <strong>mit Bash-</strong> Skripten nicht <strong>vertragen</strong> ?".  Und ich dachte - Wirklich, warum muss ich machen?  (und am wichtigsten) Welche Probleme lÃ¶st er? </p><a name="habracut"></a><br><p>  Dann habe ich beschlossen, ein bisschen darÃ¼ber nachzudenken - wie wÃ¼rden wir unsere Projekte sammeln, wenn wir nicht gemacht hÃ¤tten.  Nehmen wir an, wir haben ein Projekt mit Quellcodes.  Von ihnen mÃ¼ssen Sie eine ausfÃ¼hrbare Datei (oder Bibliothek) erhalten.  Auf den ersten Blick scheint die Aufgabe einfach zu sein, aber wir sind noch weiter gegangen.  Angenommen, das Projekt besteht zu Beginn aus einer Datei. </p><br><img src="https://habrastorage.org/webt/ce/il/9s/ceil9slduyk9vtb9mntac4miw88.png" width="300"><br><p>  Um es zu kompilieren, fÃ¼hren Sie einfach einen Befehl aus: </p><br><pre><code class="bash hljs">$ gcc main.c -o main</code> </pre> <br><p>  Es war ziemlich einfach.  Aber einige Zeit vergeht, das Projekt entwickelt sich, einige Module erscheinen darin und die Quelldateien werden grÃ¶ÃŸer. </p><br><img src="https://habrastorage.org/webt/ic/-b/ru/ic-brup7f8f0mzkxi5eqipwpgqm.png" width="500"><br><p>  Zum Kompilieren mÃ¼ssen Sie die folgende Anzahl von Befehlen bedingt ausfÃ¼hren: </p><br><pre> <code class="bash hljs">$ gcc -c src0.c $ gcc -c src1.c $ gcc -c main.c $ gcc -o main main.o src0.o src1.o</code> </pre> <br><p>  Stimmen Sie zu, dies ist ein ziemlich langwieriger und sorgfÃ¤ltiger Prozess.  Um dies manuell zu tun, wÃ¼rde ich nicht.  Ich denke, dass dieser Prozess automatisiert werden kann, indem einfach ein <strong>build.sh-</strong> Skript erstellt wird, das diese Befehle enthÃ¤lt.  Okay, das ist viel einfacher: </p><br><pre> <code class="bash hljs">$ ./build.sh</code> </pre> <br><p>  Wir fuhren weiter!  Das Projekt wÃ¤chst, die Anzahl der Quelldateien nimmt zu und es gibt auch mehr Zeilen darin.  Wir stellen fest, dass sich die Kompilierungszeit deutlich erhÃ¶ht hat.  Hier sehen wir einen signifikanten Fehler in unserem Skript - es kompiliert alle unsere 50 Dateien mit den Quellen, obwohl wir nur eine modifiziert haben. </p><br><img src="https://habrastorage.org/webt/vz/aj/ro/vzajrow8unlecgc_d2znoo7fsmc.png" width="500"><br><p>  Es wird nicht funktionieren!  Entwicklerzeit ist eine zu wertvolle Ressource.  Nun, wir kÃ¶nnen versuchen, das Build-Skript so zu Ã¤ndern, dass wir vor dem Kompilieren den Zeitpunkt der Ã„nderung der Quell- und Objektdateien Ã¼berprÃ¼fen.  Und kompilieren Sie nur die Quellen, die geÃ¤ndert wurden.  Und bedingt kann es so aussehen: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash function modification_time { date -r "$1" '+%s' } function check_time { local name=$1 [ ! -e "$name.o" ] &amp;&amp; return $? [ "$(modification_time "$name.c")" -gt "$(modification_time "$name.o")" ] &amp;&amp; return $? } check_time src0 &amp;&amp; gcc -c src0.c check_time src1 &amp;&amp; gcc -c src1.c check_time main &amp;&amp; gcc -c main.c gcc -o main main.o src0.o src1.o</span></span></code> </pre> <br><p>  Und jetzt werden nur die Quellen kompiliert, die geÃ¤ndert wurden. </p><br><img src="https://habrastorage.org/webt/6x/97/rn/6x97rnebedbgcdvcdxojlfumiea.png" width="500"><br><p>  Aber was passiert, wenn das Projekt so aussieht: </p><br><p><img src="https://habrastorage.org/webt/pa/kd/vy/pakdvyijwodcuysn7w_8qigtyua.png"></p><br><p>  FrÃ¼her oder spÃ¤ter wird es schwierig sein, das Projekt zu verstehen, und die UnterstÃ¼tzung solcher Skripte selbst wird zu einem mÃ¼hsamen Prozess.  Und es ist keine Tatsache, dass dieses Skript alle AbhÃ¤ngigkeiten angemessen Ã¼berprÃ¼ft.  DarÃ¼ber hinaus kÃ¶nnen wir mehrere Projekte haben und jedes wird ein eigenes Skript fÃ¼r die Montage haben. </p><br><p>  NatÃ¼rlich sehen wir, dass eine <strong>allgemeine LÃ¶sung fÃ¼r</strong> dieses Problem entsteht.  Ein Tool, das einen Mechanismus zum ÃœberprÃ¼fen von AbhÃ¤ngigkeiten bereitstellt.  Und hier kommen wir langsam zur Erfindung von <em>make</em> .  Und jetzt, da ich weiÃŸ, mit welchen Problemen wir beim Aufbau des Projekts konfrontiert sein werden, wÃ¼rde ich am Ende die folgenden Anforderungen formulieren: </p><br><ul><li>  Analyse der Zeitstempel von AbhÃ¤ngigkeiten und Zielen </li><li>  <strong>Minimaler</strong> Arbeitsaufwand, um die Relevanz abgeleiteter Dateien zu gewÃ¤hrleisten </li><li>  (naja, + parallele AusfÃ¼hrung von Befehlen) </li></ul><br><h3 id="makefile">  Makefile </h3><br><p>  Makefiles werden verwendet, um Projektassemblierungsregeln zu beschreiben.  Beim Erstellen eines Makefiles beschreiben wir <a href="https://ru.wikipedia.org/wiki/%25D0%2594%25D0%25B5%25D0%25BA%25D0%25BB%25D0%25B0%25D1%2580%25D0%25B0%25D1%2582%25D0%25B8%25D0%25B2%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">deklarativ</a> einen bestimmten Status der Beziehungen zwischen Dateien.  Die deklarative Natur der Zustandsbestimmung liegt darin, dass wir sagen, dass wir eine Liste von Dateien haben und eine neue Datei von ihnen durch AusfÃ¼hren einer Liste von Befehlen erhalten mÃ¼ssen.  Im Fall der Verwendung einer imperativen Sprache (z. B. Shell) mÃ¼ssten wir eine groÃŸe Anzahl verschiedener ÃœberprÃ¼fungen durchfÃ¼hren, um komplexen und verwirrenden Code in der Ausgabe zu erhalten, wÃ¤hrend make dies fÃ¼r uns erledigt.  Die Hauptsache ist, den richtigen AbhÃ¤ngigkeitsbaum zu erstellen. </p><br><pre> <code class="plaintext hljs">&lt;  &gt; : &lt;  ... &gt; &lt;  &gt; ... ...</code> </pre> <br><p>  Ich werde nicht darÃ¼ber reden, wie man Makefiles schreibt.  Im Internet gibt es viele <a href="https://www.gnu.org/software/make/manual/make.html">HandbÃ¼cher</a> zu diesem Thema, und wenn Sie mÃ¶chten, kÃ¶nnen Sie auf sie verweisen.  AuÃŸerdem schreiben nur wenige Leute Makefiles manuell.  Und sehr komplexe Makefiles kÃ¶nnen zu Komplikationen fÃ¼hren, anstatt den Erstellungsprozess zu vereinfachen. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de477656/">https://habr.com/ru/post/de477656/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de477644/index.html">Wiederherstellen von UNIX v0 auf PDP-7: Backroom-Details</a></li>
<li><a href="../de477646/index.html">Mathematiker schneiden Formen auf der Suche nach Teilen von Gleichungen</a></li>
<li><a href="../de477648/index.html">MVCC in PostgreSQL-3. Zeilenversionen</a></li>
<li><a href="../de477650/index.html">VerschlÃ¼sselung des TLS-Verkehrs nach GOST-2012-Algorithmen mit Stunnel</a></li>
<li><a href="../de477654/index.html">Probieren Sie den verbesserten instanceof-Operator in Java 14 aus</a></li>
<li><a href="../de477658/index.html">Active Restore: Kann Disaster Recovery schneller sein? Viel schneller</a></li>
<li><a href="../de477662/index.html">Zugriff auf Redd Tyres auf FTDI-BrÃ¼cken</a></li>
<li><a href="../de477668/index.html">29. November, 18 Uhr - devleads-mitap</a></li>
<li><a href="../de477670/index.html">Was gibt Testautomatisierung</a></li>
<li><a href="../de477672/index.html">Rechte und Pflichten der Teammitglieder: rechtliche und kulturelle Aspekte</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>