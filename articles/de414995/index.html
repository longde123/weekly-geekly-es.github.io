<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö° ‚úåüèº üëàüèª Amateurnotizen oder Die Geschichte, wie der Scala FPGA-Entwickler konfiguriert hat üòë üëéüèº üëàüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich habe lange davon getr√§umt, den Umgang mit FPGA zu lernen, und habe genau hingeschaut. Dann kaufte er ein Debug-Board, schrieb ein paar Hallo-Welte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Amateurnotizen oder Die Geschichte, wie der Scala FPGA-Entwickler konfiguriert hat</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414995/"><p><img src="https://habrastorage.org/webt/iv/-q/hz/iv-qhzuto0ce_yrg6l226fghqf8.png" width="60%" align="left">  Ich habe lange davon getr√§umt, den Umgang mit FPGA zu lernen, und habe genau hingeschaut.  Dann kaufte er ein Debug-Board, schrieb ein paar Hallo-Welten und steckte das Board in eine Schachtel, weil nicht klar war, was er damit anfangen sollte.  Dann kam die Idee: Schreiben wir einen Composite-Video-Generator f√ºr einen alten CRT-Fernseher.  Die Idee ist nat√ºrlich lustig, aber ich kenne Verilog nicht wirklich und muss mich noch daran erinnern, und ich brauche diesen Generator nicht wirklich ... Und k√ºrzlich wollte ich mich mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RISC-V-</a> Softwareprozessoren befassen.  Sie m√ºssen irgendwo anfangen, und der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rocket-Chip-</a> Code (dies ist eine der Implementierungen) ist in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Chisel geschrieben</a> - dies ist eine solche DSL f√ºr Scala.  Dann erinnerte ich mich pl√∂tzlich daran, dass ich mich zwei Jahre lang professionell an der Scala entwickelt hatte und erkannte: Die Zeit war gekommen ... </p><br><p>  Wenn Sie also eine Geschichte aus dem Leben von Drahtschneidern, einem Digitalmultimeter und einem Oszilloskop lesen m√∂chten, das sich selbst verwirklicht hat, dann sind Sie bei cat willkommen. </p><a name="habracut"></a><br><p>  Was wird in diesem Artikel stehen?  Darin werde ich meine Versuche beschreiben, ein zusammengesetztes PAL-Videosignal (warum PAL? - Ich habe gerade ein gutes Tutorial speziell zur PAL-Generierung gefunden) auf dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mars Rover 2-</a> Board von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">nckma zu generieren</a> .  √úber RISC-V in diesem Artikel werde ich √ºberhaupt nichts sagen.  :) :) </p><br><p>  Zun√§chst ein wenig zu Scala und Chisel: Scala ist eine Sprache, die auf der Java Virtual Machine ausgef√ºhrt wird und vorhandene Java-Bibliotheken transparent verwendet (obwohl es auch Scala.js und Scala Native gibt).  Als ich anfing, es zu studieren, hatte ich das Gef√ºhl, dass es eine sehr brauchbare Mischung aus ‚ÄûPluspunkten‚Äú und Haskell ist <em>(Kollegen teilen diese Meinung jedoch nicht)</em> - es ist ein schmerzlich fortschrittliches Typensystem und eine pr√§gnante Sprache, aber wegen der Notwendigkeit, den Funktionalismus zu kreuzen OOP eine F√ºlle von Sprachkonstrukten an einigen Stellen weckte Erinnerungen an C ++.  Haben Sie jedoch keine Angst vor Scala - es ist eine sehr pr√§gnante und sichere Sprache mit einem leistungsstarken Typsystem, in dem Sie zun√§chst einfach als verbessertes Java schreiben k√∂nnen.  Soweit ich wei√ü, wurde Scala urspr√ºnglich als Sprache f√ºr die bequeme Erstellung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dom√§nenspezifischer Sprachen entwickelt. In</a> diesem Fall beschreiben Sie beispielsweise digitale Ger√§te oder Notizen in einer formalen Sprache, und diese Sprache sieht aus Sicht des Themenbereichs recht logisch aus.  Und dann stellt man pl√∂tzlich fest, dass es der richtige Code in Scala (na ja, oder Haskell) war - nur freundliche Leute haben eine Bibliothek mit einer praktischen Oberfl√§che geschrieben.  Chisel ist eine solche Bibliothek f√ºr Scala, mit der wir die digitale Logik in einem praktischen DSL beschreiben und dann den resultierenden Scala-Code ausf√ºhren und Code auf Verilog (oder etwas anderem) generieren k√∂nnen, der in das Quartus-Projekt kopiert werden kann.  F√ºhren Sie sofort die Standard-Unit-Tests im Scala-Stil aus, die selbst Testbenches simulieren und einen Bericht √ºber die Ergebnisse erstellen. </p><br><p>  Um mich mit digitalen Schaltkreisen vertraut zu machen, empfehle ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dieses Buch</a> (es ist bereits in der gedruckten russischen Version).  Tats√§chlich endet meine systematische Bekanntschaft mit der FPGA-Welt fast mit diesem Buch, so dass konstruktive Kritik in den Kommentaren willkommen ist (ich wiederhole jedoch, das Buch ist wunderbar: Es erz√§hlt von den Grundlagen bis zur Schaffung eines einfachen √ºbermittelten Prozessors. Und es gibt dort Bilder;)).  Nun, laut Chisel gibt es ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gutes offizielles Tutorial</a> . </p><br><p>  <strong>Haftungsausschluss: Der</strong> Autor ist nicht f√ºr die verbrannten Ger√§te verantwortlich. Wenn Sie das Experiment wiederholen m√∂chten, ist es besser, die Signalpegel mit einem Oszilloskop zu √ºberpr√ºfen, den analogen Teil neu zu erstellen usw.  Und im Allgemeinen - Sicherheitsvorkehrungen beachten.  <em>(Als ich zum Beispiel den Artikel schrieb, stellte ich fest, dass die Beine auch Gliedma√üen sind und es nichts gibt, was sie in die Zentralheizungsbatterie stecken und am Ausgang der Platine festhalten k√∂nnte ...)</em> √úbrigens verursachte diese Infektion auch St√∂rungen im Fernseher im Nebenzimmer im Zuge des Debuggens ... </p><br><h2 id="nastroyka-proekta">  Projekteinrichtung </h2><br><p> Wir werden den Code in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">IntelliJ Idea Community Edition</a> schreiben, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sbt</a> wird das Build-System sein, also erstellen Sie ein Verzeichnis, setzen Sie <code>.gitignore</code> , <code>project/build.properties</code> , <code>project/plugins.sbt</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">von hier</a> und </p><br><div class="spoiler">  <b class="spoiler_title">etwas vereinfacht build.sbt</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scalacOptionsVersion</span></span></span></span>(scalaVersion: <span class="hljs-type"><span class="hljs-type">String</span></span>): <span class="hljs-type"><span class="hljs-type">Seq</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>] = { <span class="hljs-type"><span class="hljs-type">Seq</span></span>() ++ { <span class="hljs-comment"><span class="hljs-comment">// If we're building with Scala &gt; 2.11, enable the compile option // switch to support our anonymous Bundle definitions: // https://github.com/scala/bug/issues/10047 CrossVersion.partialVersion(scalaVersion) match { case Some((2, scalaMajor: Long)) if scalaMajor &lt; 12 =&gt; Seq() case _ =&gt; Seq("-Xsource:2.11") } } } name := "chisel-example" version := "1.0.0" scalaVersion := "2.11.12" resolvers ++= Seq( Resolver.sonatypeRepo("snapshots"), Resolver.sonatypeRepo("releases") ) // Provide a managed dependency on X if -DXVersion="" is supplied on the command line. val defaultVersions = Map( "chisel3" -&gt; "3.1.+", "chisel-iotesters" -&gt; "1.2.+" ) libraryDependencies ++= (Seq("chisel3","chisel-iotesters").map { dep: String =&gt; "edu.berkeley.cs" %% dep % sys.props.getOrElse(dep + "Version", defaultVersions(dep)) }) scalacOptions ++= scalacOptionsVersion(scalaVersion.value)</span></span></code> </pre> </div></div><br><p>  √ñffnen Sie es nun in der Idee und fordern Sie den Import des sbt-Projekts an - w√§hrend sbt die erforderlichen Abh√§ngigkeiten herunterl√§dt. </p><br><h2 id="pervye-moduli">  Erste Module </h2><br><h3 id="shim">  PWM </h3><br><p>  Versuchen wir zun√§chst, eine einfache <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PWM</a> zu schreiben.  Meine Logik war ungef√§hr die folgende: Um ein Tastverh√§ltnis-Signal n / m zu erzeugen, setzen wir zun√§chst 0 in das Register und f√ºgen es bei jedem Schritt n hinzu.  Wenn der Wert des Registers m √ºberschreitet, subtrahieren Sie m und geben Sie f√ºr einen Taktzyklus einen hohen Pegel aus.  Eigentlich wird es fehlerhaft sein, wenn n&gt; m ist, aber wir werden dies als unbestimmtes Verhalten betrachten, das erforderlich ist, um die tats√§chlich verwendeten F√§lle zu optimieren. </p><br><p>  Ich werde nicht den gesamten Anf√§ngerleitfaden nacherz√§hlen - er liest in einer halben Stunde, ich werde nur sagen, dass wir zur Beschreibung des Moduls <code>chisel3._</code> importieren und von der abstrakten Klasse <code>Module</code> erben m√ºssen.  Es ist abstrakt, weil wir das <code>Bundle</code> unter dem Namen <code>io</code> - es wird die gesamte Schnittstelle des Moduls haben.  Gleichzeitig werden die <code>clock</code> und <code>reset</code> Eing√§nge implizit angezeigt - Sie m√ºssen sie nicht separat beschreiben.  Folgendes ist passiert: </p><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> chisel3._ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PWM</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">width: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> io = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Bundle</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> numerator = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(width.<span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> denominator = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(width.<span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> pulse = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) }) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> counter = <span class="hljs-type"><span class="hljs-type">RegInit</span></span>(<span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt(width.<span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> nextValue = counter + io.numerator io.pulse := nextValue &gt; io.denominator counter := <span class="hljs-type"><span class="hljs-type">Mux</span></span>(io.pulse, nextValue - io.denominator, nextValue) }</code> </pre><br><p>  Beachten Sie, dass wir die <code>.W</code> Methode <code>.W</code> einem regul√§ren int aufrufen, um die <code>.W</code> zu erhalten, und die <code>.asUInt(width.W)</code> -Methode, die wir im Allgemeinen auf einem Integer-Literal aufrufen!  Wie ist das m√∂glich?  - Nun, in Smalltalk w√ºrden wir nur eine neue Methode f√ºr die Integer-Klasse definieren (oder wie auch immer sie dort hei√üt), aber in der JVM haben wir immer noch nicht das gesamte Objekt - es gibt auch primitive Typen, und Scala versteht dies (und zus√§tzlich) Es gibt Klassen von Drittanbietern, die wir nicht √§ndern k√∂nnen.  Daher gibt es eine Vielzahl von impliziten s: In diesem Fall findet Scala wahrscheinlich so etwas </p><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BetterInt</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">n: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">W</span></span></span></span>: <span class="hljs-type"><span class="hljs-type">Width</span></span> = ... }</code> </pre> <br><p>  im gegenw√§rtigen Umfang haben also gew√∂hnliche Ints Superkr√§fte.  Hier ist eine der Funktionen, die Scala √ºbersichtlicher und einfacher macht, DSL zu erstellen. </p><br><div class="spoiler">  <b class="spoiler_title">F√ºgen Sie eine Prise Tests hinzu.</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> chisel3.iotesters._ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.scalatest.{<span class="hljs-type"><span class="hljs-type">FlatSpec</span></span>, <span class="hljs-type"><span class="hljs-type">Matchers</span></span>} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PWMSpec</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PWMTesterConstant</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">pwm: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">PWM</span></span></span></span><span class="hljs-class"><span class="hljs-params">, denum: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">, const: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PeekPokeTester</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">pwm</span></span></span><span class="hljs-class">) </span></span>{ poke(pwm.io.numerator, <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (const) denum <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>) poke(pwm.io.denominator, denum) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i &lt;- <span class="hljs-number"><span class="hljs-number">1</span></span> to <span class="hljs-number"><span class="hljs-number">2</span></span> * denum) { step(<span class="hljs-number"><span class="hljs-number">1</span></span>) expect(pwm.io.pulse, const) } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PWMTesterExact</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">pwm: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">PWM</span></span></span></span><span class="hljs-class"><span class="hljs-params">, num: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">, ratio: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PeekPokeTester</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">pwm</span></span></span><span class="hljs-class">) </span></span>{ poke(pwm.io.numerator, num) poke(pwm.io.denominator, num * ratio) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> delay = (<span class="hljs-number"><span class="hljs-number">1</span></span> to ratio + <span class="hljs-number"><span class="hljs-number">2</span></span>).takeWhile { _ =&gt; step(<span class="hljs-number"><span class="hljs-number">1</span></span>) peek(pwm.io.pulse) == <span class="hljs-type"><span class="hljs-type">BigInt</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) } println(<span class="hljs-string"><span class="hljs-string">s"delay = </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">$delay</span></span></span><span class="hljs-string">"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i &lt;- <span class="hljs-number"><span class="hljs-number">1</span></span> to <span class="hljs-number"><span class="hljs-number">10</span></span>) { expect(pwm.io.pulse, <span class="hljs-literal"><span class="hljs-literal">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (j &lt;- <span class="hljs-number"><span class="hljs-number">1</span></span> to ratio - <span class="hljs-number"><span class="hljs-number">1</span></span>) { step(<span class="hljs-number"><span class="hljs-number">1</span></span>) expect(pwm.io.pulse, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) } step(<span class="hljs-number"><span class="hljs-number">1</span></span>) } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PWMTesterApproximate</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">pwm: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">PWM</span></span></span></span><span class="hljs-class"><span class="hljs-params">, num: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">, denom: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PeekPokeTester</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">pwm</span></span></span><span class="hljs-class">)</span></span>{ poke(pwm.io.numerator, num) poke(pwm.io.denominator, denom) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> count = (<span class="hljs-number"><span class="hljs-number">1</span></span> to <span class="hljs-number"><span class="hljs-number">100</span></span> * denom).map { _ =&gt; step(<span class="hljs-number"><span class="hljs-number">1</span></span>) peek(pwm.io.pulse).toInt }.sum <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> diff = count - <span class="hljs-number"><span class="hljs-number">100</span></span> * num println(<span class="hljs-string"><span class="hljs-string">s"Difference = </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">$diff</span></span></span><span class="hljs-string">"</span></span>) expect(<span class="hljs-type"><span class="hljs-type">Math</span></span>.abs(diff) &lt; <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">"Difference should be almost 0"</span></span>) } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PWMSpec</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FlatSpec</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">with</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Matchers</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">PWMSpec</span></span>._ behavior of <span class="hljs-string"><span class="hljs-string">"PWMSpec"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testWith</span></span></span></span>(testerConstructor: <span class="hljs-type"><span class="hljs-type">PWM</span></span> =&gt; <span class="hljs-type"><span class="hljs-type">PeekPokeTester</span></span>[<span class="hljs-type"><span class="hljs-type">PWM</span></span>]): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = { chisel3.iotesters.<span class="hljs-type"><span class="hljs-type">Driver</span></span>(() =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">PWM</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>))(testerConstructor) shouldBe <span class="hljs-literal"><span class="hljs-literal">true</span></span> } it should <span class="hljs-string"><span class="hljs-string">"return True constant for 1/1"</span></span> in { testWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">PWMTesterConstant</span></span>(_, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>)) } it should <span class="hljs-string"><span class="hljs-string">"return True constant for 10/10"</span></span> in { testWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">PWMTesterConstant</span></span>(_, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>)) } it should <span class="hljs-string"><span class="hljs-string">"return False constant for 1/1"</span></span> in { testWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">PWMTesterConstant</span></span>(_, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>)) } it should <span class="hljs-string"><span class="hljs-string">"return False constant for 10/10"</span></span> in { testWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">PWMTesterConstant</span></span>(_, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>)) } it should <span class="hljs-string"><span class="hljs-string">"return True exactly once in 3 steps for 1/3"</span></span> in { testWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">PWMTesterExact</span></span>(_, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>)) } it should <span class="hljs-string"><span class="hljs-string">"return good approximation for 3/10"</span></span> in { testWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">PWMTesterApproximate</span></span>(_, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)) } }</code> </pre> </div></div><br><p>  <code>PeekPokeTester</code> ist einer von drei Standardtestern in Chisel.  Hier k√∂nnen Sie die Werte an den Eing√§ngen des Pr√ºflings (Pr√ºfling) einstellen und die Werte an den Ausg√§ngen √ºberpr√ºfen.  Wie wir sehen k√∂nnen, wird der √ºbliche ScalaTest f√ºr Tests verwendet und die Tests belegen das F√ºnffache der Implementierung selbst, was im Prinzip f√ºr Software normal ist.  Ich vermute jedoch, dass erfahrene Entwickler von Ger√§ten, die "in Silizium gegossen" sind, nur mit einer solchen mikroskopischen Anzahl von Tests l√§cheln werden.  Launch und oops ... </p><br><pre> <code class="hljs powershell">Circuit state created [<span class="hljs-type"><span class="hljs-type">info</span></span>] [<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">000</span></span>] SEED <span class="hljs-number"><span class="hljs-number">1529827417539</span></span> [<span class="hljs-type"><span class="hljs-type">info</span></span>] [<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">000</span></span>] EXPECT AT <span class="hljs-number"><span class="hljs-number">1</span></span> io_pulse got <span class="hljs-number"><span class="hljs-number">0</span></span> expected <span class="hljs-number"><span class="hljs-number">1</span></span> FAIL ... [<span class="hljs-type"><span class="hljs-type">info</span></span>] PWMSpec: [<span class="hljs-type"><span class="hljs-type">info</span></span>] PWMSpec [<span class="hljs-type"><span class="hljs-type">info</span></span>] - should <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> True constant <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> [<span class="hljs-type"><span class="hljs-type">info</span></span>] - should <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> True constant <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span> *** FAILED *** [<span class="hljs-type"><span class="hljs-type">info</span></span>] false was not equal to true (PWMSpec.scala:<span class="hljs-number"><span class="hljs-number">56</span></span>) [<span class="hljs-type"><span class="hljs-type">info</span></span>] - should <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> False constant <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> [<span class="hljs-type"><span class="hljs-type">info</span></span>] - should <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> False constant <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span> [<span class="hljs-type"><span class="hljs-type">info</span></span>] - should <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> True exactly once <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> steps <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">3</span></span> [<span class="hljs-type"><span class="hljs-type">info</span></span>] - should <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> good approximation <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br><p>  Ja, beheben Sie es in PWM in der Zeile <code>io.pulse := nextValue &gt; io.denominator</code> anmelden <code>&gt;=</code> , starten Sie die Tests neu - alles funktioniert!  Ich bef√ºrchte, dass erfahrene Entwickler digitaler Ger√§te mich wegen einer so leichtfertigen Einstellung zum Design umbringen wollen (und einige Softwareentwickler werden sich ihnen gerne anschlie√üen) ... </p><br><h3 id="generator-impulsov">  Impulsgeber </h3><br><p>  Wir werden auch einen Generator ben√∂tigen, der Synchronisationsimpulse f√ºr "Halbbilder" ausgibt.  Warum halb?  weil zuerst die ungeraden Linien √ºbertragen werden, dann die geraden (na ja oder umgekehrt, aber jetzt ist uns Fett egal). </p><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> chisel3._ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> chisel3.util._ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OneShotPulseGenerator</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">val lengths: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Seq</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">], val initial: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Add sentinel value here, so no output flip required after the last state private val delayVecValues = lengths.map(_ - 1) :+ 0 val io = IO(new Bundle { val signal = Output(Bool()) }) private val nextIndex = RegInit(1.asUInt( log2Ceil(delayVecValues.length + 1).W )) private val countdown = RegInit(delayVecValues.head.asUInt( log2Ceil(lengths.max + 1).W )) private val output = RegInit(initial.asBool) private val delaysVec = VecInit(delayVecValues.map(_.asUInt)) private val moveNext = countdown === 0.asUInt private val finished = nextIndex === delayVecValues.length.asUInt when (!finished) { when (moveNext) { countdown := delaysVec(nextIndex) nextIndex := nextIndex + 1.asUInt output := !output }.otherwise { countdown := countdown - 1.asUInt } } io.signal := output }</span></span></code> </pre> <br><p>  Wenn das <code>reset</code> entfernt wird, schie√üt es mit Rechteckimpulsen mit den L√§ngen der Intervalle zwischen den Schaltvorg√§ngen, die durch den <code>lengths</code> angegeben werden. <code>lengths</code> bleibt es f√ºr immer im letzten Zustand.  Dieses Beispiel zeigt die Verwendung von Wertetabellen mit <code>VecInit</code> sowie eine M√∂glichkeit, die erforderliche Registerbreite <code>chisel3.util.log2Ceil(maxVal + 1).W</code> : <code>chisel3.util.log2Ceil(maxVal + 1).W</code> .  Ich kann mich ehrlich gesagt nicht erinnern, wie es in Verilog gemacht wurde, aber in Chisel reicht es aus, den Konstruktor der Klasse mit dem erforderlichen Parameter aufzurufen, um ein solches Modul zu erstellen, das durch einen Wertevektor parametrisiert wird. </p><br><p>  Sie fragen wahrscheinlich: "Wenn die <code>clock</code> und <code>reset</code> Eing√§nge implizit generiert werden, wie werden wir dann den Impulsgenerator f√ºr jeden Frame" aufladen "?"  Mei√üelentwickler haben f√ºr alles gesorgt: </p><br><pre> <code class="scala hljs"> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> module = <span class="hljs-type"><span class="hljs-type">Module</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">MyModule</span></span>() ) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> moduleWithCustomReset = withReset(customReset) { <span class="hljs-type"><span class="hljs-type">Module</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">MyModule</span></span>() ) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> otherClockDomain = withClock(otherClock) { <span class="hljs-type"><span class="hljs-type">Module</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">MyModule</span></span>() ) }</code> </pre> <br><h2 id="naivnaya-realizaciya-generatora-signala">  Naive Implementierung eines Signalgenerators </h2><br><p>  Damit der Fernseher uns zumindest irgendwie versteht, m√ºssen Sie das ‚ÄûProtokoll‚Äú des durchschnittlichen Trickpegels unterst√ºtzen: Es gibt drei wichtige Signalpegel: </p><br><ul><li>  1,0 V - wei√üe Farbe </li><li>  0,3 V - schwarze Farbe </li><li>  0V - Sonderpegel </li></ul><br><p>  Warum habe ich 0V Special angerufen?  Denn mit einem reibungslosen √úbergang von 0,3 V auf 1,0 V wechseln wir reibungslos von Schwarz nach Wei√ü und zwischen 0 V und 0,3 V, soweit ich verstehen kann, gibt es keine Zwischenpegel und 0 V wird nur f√ºr die Synchronisation verwendet.  <em>(Tats√§chlich √§ndert es sich nicht einmal im Bereich von 0 V - 1 V, sondern von -0,3 V - 0,7 V, aber hoffentlich befindet sich noch ein Kondensator am Eingang.)</em> </p><br><p>  Wie dieser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wunderbare Artikel</a> lehrt, besteht ein zusammengesetztes PAL-Signal aus einem endlosen Strom sich wiederholender 625 Zeilen: Die meisten davon sind Zeilen, tats√§chlich Bilder (getrennt gerade und getrennt ungerade), einige werden f√ºr Synchronisationszwecke verwendet (wir haben den Generator f√ºr sie erstellt Signale), einige sind auf dem Bildschirm nicht sichtbar.  Sie sehen so aus (ich werde keine Piraterie betreiben und Links zum Original geben): </p><br><ul><li>  <a href="">Eine normale Bildzeile</a> </li><li>  <a href="">Strings synchronisieren</a> </li></ul><br><p>  Versuchen wir, die Schnittstellen der Module zu beschreiben: </p><br><p>  <code>BWGenerator</code> verwaltet die Timings usw. und muss wissen, mit welcher H√§ufigkeit es funktioniert: </p><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BWGenerator</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">clocksPerUs: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> io = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Bundle</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> <span class="hljs-type"><span class="hljs-type">L</span></span> = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">8.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> x = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">10.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> y = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">10.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> inScanLine = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> millivolts = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">12.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) }) <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p>  <code>PalColorCalculator</code> berechnet den Pegel des Luminanzsignals sowie ein zus√§tzliches Farbsignal: </p><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PalColorCalculator</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> io = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Bundle</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> red = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">8.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> green = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">8.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> blue = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">8.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> scanLine = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> <span class="hljs-type"><span class="hljs-type">L</span></span> = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">8.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> millivolts = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">12.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) }) <span class="hljs-comment"><span class="hljs-comment">//  --  / io.L := (0.asUInt(10.W) + io.red + io.green + io.blue) / 4.asUInt io.millivolts := 0.asUInt }</span></span></code> </pre> <br><p>  Im <code>PalGenerator</code> Modul verbinden <code>PalGenerator</code> einfach <code>PalGenerator</code> beiden angegebenen Module erneut: </p><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PalGenerator</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">clocksPerUs: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> io = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Bundle</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> red = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">8.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> green = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">8.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> blue = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">8.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> x = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">10.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> y = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">10.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> millivolts = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">12.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) }) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> bw = <span class="hljs-type"><span class="hljs-type">Module</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">BWGenerator</span></span>(clocksPerUs)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> color = <span class="hljs-type"><span class="hljs-type">Module</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">PalColorCalculator</span></span>) io.red &lt;&gt; color.io.red io.green &lt;&gt; color.io.green io.blue &lt;&gt; color.io.blue bw.io.<span class="hljs-type"><span class="hljs-type">L</span></span> &lt;&gt; color.io.<span class="hljs-type"><span class="hljs-type">L</span></span> bw.io.inScanLine &lt;&gt; color.io.scanLine bw.io.x &lt;&gt; io.x bw.io.y &lt;&gt; io.y io.millivolts := bw.io.millivolts + color.io.millivolts }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Und jetzt zeichnen wir leider die erste Eule ...</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> io.github.atrosinenko.fpga.tv <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> chisel3._ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> chisel3.core.withReset <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.github.atrosinenko.fpga.common.<span class="hljs-type"><span class="hljs-type">OneShotPulseGenerator</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BWGenerator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> <span class="hljs-type"><span class="hljs-type">ScanLineHSyncStartUs</span></span> = <span class="hljs-number"><span class="hljs-number">4.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> <span class="hljs-type"><span class="hljs-type">ScanLineHSyncEndUs</span></span> = <span class="hljs-number"><span class="hljs-number">12.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> <span class="hljs-type"><span class="hljs-type">TotalScanLineLengthUs</span></span> = <span class="hljs-number"><span class="hljs-number">64.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> <span class="hljs-type"><span class="hljs-type">VSyncStart</span></span> = <span class="hljs-type"><span class="hljs-type">Seq</span></span>( <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-comment"><span class="hljs-comment">// 623 / 311 2, 30, 2, 30 // 624 / 312 ) val VSyncEnd = Seq( 30, 2, 30, 2, // 2 / 314 30, 2, 30, 2, // 3 / 315 2, 30, 2, 30, // 4 / 316 2, 30, 2, 30 // 5 / 317 ) val VSync1: Seq[Int] = VSyncStart ++ Seq( 2, 30, 2, 30, // 625 30, 2, 30, 2 // 1 ) ++ VSyncEnd ++ (6 to 23).flatMap(_ =&gt; Seq(4, 60)) val VSync2: Seq[Int] = VSyncStart ++ Seq( 2, 30, 30, 2 // 313 ) ++ VSyncEnd ++ (318 to 335).flatMap(_ =&gt; Seq(4, 60)) val BlackMv = 300.asUInt(12.W) val WhiteMv = 1000.asUInt(12.W) val FirstHalf = (24, 311) val SecondHalf = (336, 623) val TotalScanLineCount = 625 } class BWGenerator(clocksPerUs: Int) extends Module { import BWGenerator._ val io = IO(new Bundle { val L = Input(UInt(8.W)) val x = Output(UInt(10.W)) val y = Output(UInt(10.W)) val inScanLine = Output(Bool()) val millivolts = Output(UInt(12.W)) }) private val scanLineNr = RegInit(0.asUInt(10.W)) private val inScanLineCounter = RegInit(0.asUInt(16.W)) when (inScanLineCounter === (TotalScanLineLengthUs * clocksPerUs - 1).toInt.asUInt) { inScanLineCounter := 0.asUInt when(scanLineNr === (TotalScanLineCount - 1).asUInt) { scanLineNr := 0.asUInt } otherwise { scanLineNr := scanLineNr + 1.asUInt } } otherwise { inScanLineCounter := inScanLineCounter + 1.asUInt } private val fieldIActive = SecondHalf._2.asUInt &lt;= scanLineNr || scanLineNr &lt; FirstHalf._1.asUInt private val fieldIGenerator = withReset(!fieldIActive) { Module(new OneShotPulseGenerator(VSync1.map(_ * clocksPerUs), initial = false)) } private val fieldIIActive = FirstHalf._2.asUInt &lt;= scanLineNr &amp;&amp; scanLineNr &lt; SecondHalf._1.asUInt private val fieldIIGenerator = withReset(!fieldIIActive) { Module(new OneShotPulseGenerator(VSync2.map(_ * clocksPerUs), initial = false)) } private val inFirstHalf = FirstHalf ._1.asUInt &lt;= scanLineNr &amp;&amp; scanLineNr &lt; FirstHalf ._2.asUInt private val inSecondHalf = SecondHalf._1.asUInt &lt;= scanLineNr &amp;&amp; scanLineNr &lt; SecondHalf._2.asUInt io.inScanLine := (inFirstHalf || inSecondHalf) &amp;&amp; ((ScanLineHSyncEndUs * clocksPerUs).toInt.asUInt &lt;= inScanLineCounter) io.x := Mux( io.inScanLine, inScanLineCounter - (ScanLineHSyncEndUs * clocksPerUs).toInt.asUInt, 0.asUInt ) / 4.asUInt io.y := Mux( io.inScanLine, Mux( inFirstHalf, ((scanLineNr - FirstHalf ._1.asUInt) &lt;&lt; 1).asUInt, ((scanLineNr - SecondHalf._1.asUInt) &lt;&lt; 1).asUInt + 1.asUInt ), 0.asUInt ) when (fieldIActive) { io.millivolts := Mux(fieldIGenerator .io.signal, BlackMv, 0.asUInt) }.elsewhen (fieldIIActive) { io.millivolts := Mux(fieldIIGenerator.io.signal, BlackMv, 0.asUInt) }.otherwise { when (inScanLineCounter &lt; (ScanLineHSyncStartUs * clocksPerUs).toInt.asUInt) { io.millivolts := 0.asUInt }.elsewhen (inScanLineCounter &lt; (ScanLineHSyncEndUs * clocksPerUs).toInt.asUInt) { io.millivolts := BlackMv }.otherwise { io.millivolts := (BlackMv + (io.L &lt;&lt; 1).asUInt).asUInt } } }</span></span></code> </pre> </div></div><br><h3 id="generaciya-sinteziruemogo-koda">  Generierung von synthetisiertem Code </h3><br><p>  Das ist alles gut, aber wir wollen das resultierende Design in eine Tafel n√§hen.  Dazu m√ºssen Sie Verilog synthetisieren.  Dies geschieht auf sehr einfache Weise: </p><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> chisel3._ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.github.atrosinenko.fpga.common.<span class="hljs-type"><span class="hljs-type">PWM</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Codegen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestModule</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">mhz: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> io = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Bundle</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> millivolts = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">12.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) }) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> imageGenerator = <span class="hljs-type"><span class="hljs-type">Module</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">TestColorImageGenerator</span></span>(<span class="hljs-number"><span class="hljs-number">540</span></span>, <span class="hljs-number"><span class="hljs-number">400</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> encoder = <span class="hljs-type"><span class="hljs-type">Module</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">PalGenerator</span></span>(clocksPerUs = mhz)) imageGenerator.io.x &lt;&gt; encoder.io.x imageGenerator.io.y &lt;&gt; encoder.io.y imageGenerator.io.red &lt;&gt; encoder.io.red imageGenerator.io.green &lt;&gt; encoder.io.green imageGenerator.io.blue &lt;&gt; encoder.io.blue io.millivolts := encoder.io.millivolts <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">desiredName</span></span></span></span>: <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-string"><span class="hljs-string">"CompositeSignalGenerator"</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>(args: <span class="hljs-type"><span class="hljs-type">Array</span></span>[<span class="hljs-type"><span class="hljs-type">String</span></span>]): <span class="hljs-type"><span class="hljs-type">Unit</span></span> = { <span class="hljs-type"><span class="hljs-type">Driver</span></span>.execute(args, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">PWM</span></span>(<span class="hljs-number"><span class="hljs-number">12</span></span>)) <span class="hljs-type"><span class="hljs-type">Driver</span></span>.execute(args, () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">TestModule</span></span>(mhz = <span class="hljs-number"><span class="hljs-number">32</span></span>)) } }</code> </pre><br><p>  Tats√§chlich machen wir es in der zweizeiligen Methode <code>main()</code> zweimal, der Rest des Codes ist ein weiteres Modul, das als n√§chstes bleibt </p><br><div class="spoiler">  <b class="spoiler_title">Absolut langweiliger Testbildgenerator</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestColorImageGenerator</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">width: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">, height: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> io = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Bundle</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> red = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">8.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> green = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">8.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> blue = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">8.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> x = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">10.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> y = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">10.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) }) io.red := <span class="hljs-type"><span class="hljs-type">Mux</span></span>((io.x / <span class="hljs-number"><span class="hljs-number">32.</span></span>asUInt + io.y / <span class="hljs-number"><span class="hljs-number">32.</span></span>asUInt)(<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-number"><span class="hljs-number">200.</span></span>asUInt, <span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt) io.green := <span class="hljs-type"><span class="hljs-type">Mux</span></span>((io.x / <span class="hljs-number"><span class="hljs-number">32.</span></span>asUInt + io.y / <span class="hljs-number"><span class="hljs-number">32.</span></span>asUInt)(<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-number"><span class="hljs-number">200.</span></span>asUInt, <span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt) io.blue := <span class="hljs-type"><span class="hljs-type">Mux</span></span>((io.x / <span class="hljs-number"><span class="hljs-number">32.</span></span>asUInt + io.y / <span class="hljs-number"><span class="hljs-number">32.</span></span>asUInt)(<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt, <span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt) }</code> </pre> </div></div><br><p>  Jetzt m√ºssen Sie es in das Quartus-Projekt verschieben.  F√ºr Mars Rover 2 ben√∂tigen wir die kostenlose Version von Quartus 13.1.  Wie man es installiert, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">steht</a> auf der Seite der Marsrover.  Von dort habe ich das "Erste Projekt" f√ºr das Mars Rover 2-Board heruntergeladen, es in das Repository gestellt und ein wenig korrigiert.  Da ich kein Elektronikingenieur bin (und FPGA interessiere ich mich eigentlich mehr f√ºr Beschleuniger als f√ºr Schnittstellenkarten) </p><br><div class="spoiler">  <b class="spoiler_title">wie in diesem Witz ...</b> <div class="spoiler_text"><p>  Der Programmierer sitzt tief im Debuggen. <br>  Fit Sohn: <br>  "Papa, warum geht die Sonne jeden Tag im Osten auf und sitzt im Westen?" <br>  "Hast du das √ºberpr√ºft?" <br>  - Gepr√ºft. <br>  - Gut gepr√ºft? <br>  - Gut. <br>  - Funktioniert es? <br>  - Es funktioniert. <br>  - Funktioniert es jeden Tag? <br>  - Ja, jeden Tag. <br>  - Um Gottes willen, mein Sohn, ber√ºhre nichts, √§ndere nichts. </p></div></div><br><p>  ... Ich habe gerade den VGA-Signalgenerator gel√∂scht und mein Modul hinzugef√ºgt. </p><br><p><img src="https://habrastorage.org/webt/uq/tu/fx/uqtufxsowkzdbhnd652ezepquva.png" alt="Quatus einschalten"></p><br><p>  Danach habe ich den analogen TV-Tuner an einen anderen Computer (Laptop) angeschlossen, so dass zwischen der Stromversorgung des Signalgenerators und des Verbrauchers zumindest eine gewisse galvanische Trennung bestand, und nur ein Signal von den Pins IO7 (+) und GND (-) der Karte an den Composite-Eingang (Minus) gesendet zum externen Kontakt sowie zur Mitte).  Nun, das hei√üt, als "einfach" ... Es w√§re einfach, wenn die H√§nde von dort wachsen w√ºrden, wo sie sollten, na ja, oder wenn ich weiblich-m√§nnliche Verbindungsdr√§hte h√§tte.  Aber ich habe nur ein paar m√§nnlich-m√§nnliche Dr√§hte.  Aber ich habe Hartn√§ckigkeit und Zangen!  Im Allgemeinen gibt es einen Draht der Verstopfung, ich habe mir zwei beinahe Arbeiter gemacht - mit Schwierigkeiten, aber am Brett festhaltend.  Und hier ist was ich gesehen habe: </p><br><p><img src="https://habrastorage.org/webt/7a/pi/d-/7apid-1jqyjglndca2aefk2wi2u.png" alt="Erstes Schwarzwei√übild"></p><br><p>  Tats√§chlich habe ich dich nat√ºrlich ein wenig get√§uscht.  Den oben gezeigten Code habe ich nach ungef√§hr drei Stunden Debuggen "auf Hardware" erhalten, aber verdammt, ich habe ihn geschrieben und er funktioniert !!!  Und da ich mit seri√∂ser Elektronik fr√ºher fast nicht vertraut war, denke ich, dass die Aufgabe nicht schrecklich war, was f√ºr eine schwierige Aufgabe. </p><br><h2 id="generaciya-cvetnogo-videosignala">  Erzeugung von Farbvideos </h2><br><p>  Nun, dann bleibt die Sache f√ºr kleine - einen Farbvideosignalgenerator hinzuzuf√ºgen.  Ich nahm das Tutorial und begann zu versuchen, einen Farbburst (der f√ºr kurze Zeit w√§hrend der HSync-Erzeugung zum Schwarzpegel der Sinuswelle bei der Tr√§gerfrequenz des Farbsignals addiert wird) und tats√§chlich das Farbsignal gem√§√ü der Formel zu bilden.  Aber es kommt nicht heraus, selbst wenn Sie knacken ... Irgendwann wurde mir klar, dass der Fernseher trotz der Tatsache, dass mir die Frequenz bei einem kurzen Blick auf das Dokument nicht auffiel, kaum auf eine willk√ºrliche Einstellung eingestellt war.  Nach der Suche stellte ich fest, dass der PAL eine Tr√§gerfrequenz von 4,43 MHz verwendet.  Das Ding ist der Hut, dachte ich.  "Fick dich", antwortete der Tuner.  Nach einem ganzen Tag des Debuggens und nur einmalem Erkennen von Farben auf dem Bild (au√üerdem, als ich dem Tuner sagte, dass es im Allgemeinen NTSC war) </p><br><div class="spoiler">  <b class="spoiler_title">... Mir wurde klar, wie Hoffnungslosigkeit wirklich aussieht</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/7a/pi/d-/7apid-1jqyjglndca2aefk2wi2u.png" alt="Hoffnungslosigkeit.zhpg"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ich erinnere mich ...</a> </p></div></div><br><p>  Dann wurde mir klar, dass ich ohne ein Oszilloskop nicht auskommen kann.  Und wie ich bereits sagte, bin ich mit Elektronik nicht vertraut, und nat√ºrlich habe ich zu Hause kein solches Wunder der Technologie.  Zu kaufen?  Ein bisschen teuer f√ºr ein Experiment ... Und woraus kann es auf dem Knie aufgebaut werden?  Ein Signal an den Line-Eingang der Soundkarte anschlie√üen?  Ja, viereinhalb Megahertz - es ist unwahrscheinlich, dass er startet (zumindest ohne √Ñnderung).  Hmm, der Mars Rover hat einen ADC bei 20 MHz, aber es reicht nicht aus, einen Rohstrom der Geschwindigkeit der seriellen Schnittstelle auf den Computer zu √ºbertragen.  Nun, irgendwo m√ºssen Sie das Signal f√ºr die Anzeige noch verarbeiten, und tats√§chlich wird es eine akzeptable Menge an Informationsbits geben, aber es geht auch darum, mit der seriellen Schnittstelle herumzuspielen, Programme f√ºr den Computer zu schreiben ... Dann dachte ich, dass der Ingenieur entwickeln sollte Es gibt eine gesunde Hartn√§ckigkeit an sich: Es gibt einen Farb-Imager im Leerlauf, einen ADC ... Aber das Schwarzwei√übild wird stabil ausgegeben ... Nun, lassen Sie den Signalgenerator sich selbst debuggen! </p><br><p>  <em>Lyrischer Exkurs (wie sie sagen: ‚ÄûDie Meinung des Sch√ºlers muss nicht mit der Meinung des Lehrers, des gesunden Menschenverstandes und der Axiomatik von Peano √ºbereinstimmen‚Äú):</em> Als ich die Farbgenerierung mit allen Arten von Multiplikationen und anderen komplizierten Dingen hinzuf√ºgte, sackte Fmax f√ºr den Signalaufbereiter stark zusammen.  Was ist Fmax?  Soweit ich aus dem Harris &amp; Harris-Lehrbuch verstanden habe, bevorzugt CAD f√ºr FPGA, wenn Verilog nicht wie im Standard geschrieben wird, sondern "nach Konzepten": Das Ergebnis sollte beispielsweise eine Synchronschaltung sein - eine Art direktionales azyklisches Netz aus <em>kombinatorischer Logik</em> (Addition, Multiplikation) , Division, logische Operationen, ...), die mit ihren Ein- und Ausg√§ngen an den Ausg√§ngen bzw. Eing√§ngen von Triggern h√§ngen bleiben.  Ein Trigger an der Flanke des Taktsignals speichert den Wert seines Eingangs f√ºr den gesamten n√§chsten Taktzyklus, dessen Pegel einige Zeit vor der Front und einige Zeit danach stabil sein muss (dies sind zwei Zeitkonstanten).  Die Signale von den Ausg√§ngen der Trigger laufen wiederum nach dem Beginn des Taktsignals zu den Ausg√§ngen der Kombinationslogik (und damit zu den Eing√§ngen anderer Trigger. Nun, und den Ausg√§ngen der Mikroschaltung), die ebenfalls durch zwei Intervalle gekennzeichnet sind: die Zeit, in der noch kein Ausgang vorhanden ist Sie haben Zeit, sich zu √§ndern, und die Zeit, nach der sich die √Ñnderungen beruhigen (vorausgesetzt, die Eingabe hat sich einmal ge√§ndert).  Hier ist die maximale Frequenz, mit der die Kombinationslogik sicherstellt, dass die Anforderungen der Trigger erf√ºllt werden - und dies ist Fmax.  Wenn die Schaltung zwischen zwei Takten Zeit haben sollte, mehr zu z√§hlen, nimmt Fmax ab.  Nat√ºrlich m√∂chte ich, dass die Frequenz gr√∂√üer ist, aber wenn sie pl√∂tzlich zehnmal sprang (oder sogar die Anzahl der Frequenzbereiche im CAD-Bericht abnahm) - √ºberpr√ºfen Sie, ob Sie irgendwo etwas durcheinander gebracht haben, und als Ergebnis fand CAD einen konstanten Ausdruck und gerne zur Optimierung genutzt. </p><br><h3 id="raskrutka-oscillografa">  Oszilloskop-F√∂rderung </h3><br><p>  Nein, nicht der, nach dem das Oszilloskop und eine Handvoll zus√§tzlicher Teile gedreht werden, aber das Oszilloskop-Bootstrapping ist wie das Compiler-Bootstrapping, nur f√ºr das Oszilloskop. </p><br><p>  Wir werden auf Befehl ein Oszilloskop herstellen, das einige Abtastwerte des Eingangssignals aufzeichnet und danach nur das aufgezeichnete anzeigt.  Da er irgendwie einen Befehl zum Aufzeichnen geben muss und danach - durch ihn navigieren, werden wir einige Tastencontroller ben√∂tigen - schrieb ich nicht sehr praktisch, aber ziemlich primitiv, hier ist es: </p><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SimpleButtonController</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params"> clickThreshold: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">, pressThreshold: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">, period: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">, pressedIsHigh: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-class"><span class="hljs-params"> </span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> io = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Bundle</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> buttonInput = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> click = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> longPress = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) })</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">SCHOCK!</b>  <b class="spoiler_title">SENSATION!</b>  <b class="spoiler_title">Damit es funktioniert, m√ºssen Sie nur ...</b> <div class="spoiler_text"><pre> <code class="scala hljs"> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> cycleCounter = <span class="hljs-type"><span class="hljs-type">RegInit</span></span>(<span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt(<span class="hljs-number"><span class="hljs-number">32.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> pressedCounter = <span class="hljs-type"><span class="hljs-type">RegInit</span></span>(<span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt(<span class="hljs-number"><span class="hljs-number">32.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) io.click := <span class="hljs-literal"><span class="hljs-literal">false</span></span>.<span class="hljs-type"><span class="hljs-type">B</span></span> io.longPress := <span class="hljs-literal"><span class="hljs-literal">false</span></span>.<span class="hljs-type"><span class="hljs-type">B</span></span> when (cycleCounter === <span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt) { when (pressedCounter &gt;= pressThreshold.asUInt) { io.longPress := <span class="hljs-literal"><span class="hljs-literal">true</span></span>.<span class="hljs-type"><span class="hljs-type">B</span></span> }.elsewhen (pressedCounter &gt;= clickThreshold.asUInt) { io.click := <span class="hljs-literal"><span class="hljs-literal">true</span></span>.<span class="hljs-type"><span class="hljs-type">B</span></span> } cycleCounter := period.asUInt pressedCounter := <span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt } otherwise { cycleCounter := cycleCounter - <span class="hljs-number"><span class="hljs-number">1.</span></span>asUInt when (io.buttonInput === pressedIsHigh.<span class="hljs-type"><span class="hljs-type">B</span></span>) { pressedCounter := pressedCounter + <span class="hljs-number"><span class="hljs-number">1.</span></span>asUInt } } }</code> </pre> </div></div><br><p>     : </p><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Oscilloscope</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params"> clocksPerUs: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">, inputWidth: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">, windowPixelWidth: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">, windowPixelHeight: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params"> </span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> io = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Bundle</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> signal = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(inputWidth.<span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> visualOffset = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">16.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> start = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> x = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">10.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> y = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">10.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> output = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) }) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mem = <span class="hljs-type"><span class="hljs-type">SyncReadMem</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-type"><span class="hljs-type">UInt</span></span>(inputWidth.<span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> physicalPixel = <span class="hljs-type"><span class="hljs-type">RegInit</span></span>(<span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt(<span class="hljs-number"><span class="hljs-number">32.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) when (io.start) { physicalPixel := <span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt } when (physicalPixel &lt; mem.length.asUInt) { mem.write(physicalPixel, io.signal) physicalPixel := physicalPixel + <span class="hljs-number"><span class="hljs-number">1.</span></span>asUInt } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> shiftedX = io.x + io.visualOffset <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> currentValue = <span class="hljs-type"><span class="hljs-type">RegInit</span></span>(<span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt(inputWidth.<span class="hljs-type"><span class="hljs-type">W</span></span>)) currentValue := ((<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; inputWidth) - <span class="hljs-number"><span class="hljs-number">1</span></span>).asUInt - mem.read( <span class="hljs-type"><span class="hljs-type">Mux</span></span>(shiftedX &lt; mem.length.asUInt, shiftedX, (mem.length - <span class="hljs-number"><span class="hljs-number">1</span></span>).asUInt) ) when (io.x &gt; windowPixelWidth.asUInt || io.y &gt; windowPixelHeight.asUInt) { <span class="hljs-comment"><span class="hljs-comment">//  1 -  io.output := !( io.y &gt; (windowPixelHeight + 10).asUInt &amp;&amp; io.y &lt; (windowPixelHeight + 20).asUInt &amp;&amp; (io.x / clocksPerUs.asUInt)(0) ) } otherwise { // , ,  // signal / 2^inputWidth ~ y / windowPixelHeight // signal * windowPixelHeight ~ y * 2^inputWidth io.output := (currentValue * windowPixelHeight.asUInt &gt;= ((io.y - 5.asUInt) &lt;&lt; inputWidth).asUInt) &amp;&amp; (currentValue * windowPixelHeight.asUInt &lt;= ((io.y + 5.asUInt) &lt;&lt; inputWidth).asUInt) } }</span></span></code> </pre> <br><p>   ‚Äî ,   : </p><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OscilloscopeController</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params"> visibleWidth: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-class"><span class="hljs-params">, createButtonController: (</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">=&gt;</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SimpleButtonController</span></span></span><span class="hljs-class"> ) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> io = <span class="hljs-type"><span class="hljs-type">IO</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Bundle</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> button1 = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> button2 = <span class="hljs-type"><span class="hljs-type">Input</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> visibleOffset = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">16.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> start = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">Bool</span></span>()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> leds = <span class="hljs-type"><span class="hljs-type">Output</span></span>(<span class="hljs-type"><span class="hljs-type">UInt</span></span>(<span class="hljs-number"><span class="hljs-number">4.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) }) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> controller1 = <span class="hljs-type"><span class="hljs-type">Module</span></span>(createButtonController()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> controller2 = <span class="hljs-type"><span class="hljs-type">Module</span></span>(createButtonController()) controller1.io.buttonInput &lt;&gt; io.button1 controller2.io.buttonInput &lt;&gt; io.button2 <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> offset = <span class="hljs-type"><span class="hljs-type">RegInit</span></span>(<span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt(<span class="hljs-number"><span class="hljs-number">16.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> leds = <span class="hljs-type"><span class="hljs-type">RegInit</span></span>(<span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt(<span class="hljs-number"><span class="hljs-number">4.</span></span><span class="hljs-type"><span class="hljs-type">W</span></span>)) io.start := <span class="hljs-literal"><span class="hljs-literal">false</span></span>.<span class="hljs-type"><span class="hljs-type">B</span></span> when (controller1.io.longPress &amp;&amp; controller2.io.longPress) { offset := <span class="hljs-number"><span class="hljs-number">0.</span></span>asUInt io.start := <span class="hljs-literal"><span class="hljs-literal">true</span></span>.<span class="hljs-type"><span class="hljs-type">B</span></span> leds := leds + <span class="hljs-number"><span class="hljs-number">1.</span></span>asUInt }.elsewhen (controller1.io.click) { offset := offset + (visibleWidth / <span class="hljs-number"><span class="hljs-number">10</span></span>).asUInt }.elsewhen (controller2.io.click) { offset := offset - (visibleWidth / <span class="hljs-number"><span class="hljs-number">10</span></span>).asUInt }.elsewhen (controller1.io.longPress) { offset := offset + visibleWidth.asUInt }.elsewhen (controller2.io.longPress) { offset := offset - visibleWidth.asUInt } io.visibleOffset := offset io.leds := leds }</code> </pre> <br><p>            (,   ),      - :           ‚Äî ,    ‚Äî  ,       (   ‚Äî  ).    ‚Äî       ! ,  Verilog  ?.. </p><br><p>     - ,    FPGA: </p><br><p><img src="https://habrastorage.org/webt/fz/bf/ig/fzbfigfaqcfjsuhwmrooccvryze.png" alt="Vom Signaltreiber --- sofort zur Karte"></p><br><p>   ‚Äî  (      IO7,   VGA_GREEN  R-2R )        : </p><br><p><img src="https://habrastorage.org/webt/71/uy/x-/71uyx-fz7rf4c9kp2yw2pwxbed4.png" alt="Analog dann in &quot;der Figur&quot; und dann --- in der Grafik"></p><br><p>    ,  ‚Äî   ,  ,     .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   PAL</a> ‚Äî "Picture At Last (-, !)" </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  GitHub</a> . </p><br><h2 id="vyvody">  Schlussfolgerungen </h2><br><p> Scala + Chisel       ‚Äî    ,        Higher-kinded types.     Scala- ,   Chisel  ,       .             .   ‚Äî ! </p><br><p>   : "   -?" ‚Äî   ! <em>  ...</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de414995/">https://habr.com/ru/post/de414995/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de414981/index.html">Ungeschriebene Bibliothek</a></li>
<li><a href="../de414983/index.html">Alan Kay: Was hat Xerox PARC so besonders gemacht und wer sieht heute noch so aus?</a></li>
<li><a href="../de414989/index.html">Weltraumm√ºllsatellit von ISS gestartet</a></li>
<li><a href="../de414991/index.html">Erkennung und Erkennung von Objekten von der Kamera in ROS mithilfe des Pakets find_object_2d</a></li>
<li><a href="../de414993/index.html">Identifizierung und Klassifizierung toxischer Kommentare. Vortrag in Yandex</a></li>
<li><a href="../de414997/index.html">ML-Blitz: Analyse der Aufgaben der ersten Qualifikationsrunde</a></li>
<li><a href="../de414999/index.html">3D Watchman und Thermistor Tester</a></li>
<li><a href="../de415001/index.html">Der Fahrer des Uber-Roboterautos, der einen Radfahrer abgeschossen hatte, sah sich zum Zeitpunkt der Kollision die Voice-Show an</a></li>
<li><a href="../de415003/index.html">Uneingeschr√§nkter Datei-Upload bei Apple.com</a></li>
<li><a href="../de415005/index.html">Sonnenkollektoren, Sprachbefehle und Offroad-Rennen: Gegenwart und Zukunft von Elektrofahrr√§dern</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>