<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôåüèø üåÅ üìò Fundamentos do Dart Streams ü§ñ üìí üõ§Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Esta √© a segunda parte da minha s√©rie sobre Flutter Architecture: 


- 1. Introdu√ß√£o 
- Dart Streams Basics (esta publica√ß√£o) 
- RxDart: transforma√ß√µe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fundamentos do Dart Streams</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450950/"><p>  Esta √© a segunda parte da minha s√©rie sobre Flutter Architecture: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1. Introdu√ß√£o</a> </li><li>  <strong>Dart Streams Basics (esta publica√ß√£o)</strong> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RxDart: transforma√ß√µes m√°gicas de fluxos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">No√ß√µes b√°sicas do RxVMS: RxCommand e GetIt</a> </li><li>  RxVMS: Servi√ßos e Gerentes </li><li>  RxVMS: widgets independentes </li><li>  Autentica√ß√£o de usu√°rio com RxVMS </li></ul><br><p>  Os fluxos s√£o o principal <strong>componente</strong> do <strong>RxVMS</strong> ; seu entendimento √© absolutamente necess√°rio para trabalhar com esta biblioteca; portanto, falaremos sobre eles com mais detalhes neste post. </p><br><p>  Descobriu-se que incluir Rx neste post seria muito longo, ent√£o eu o dividi em duas partes. </p><br><h2 id="pust-techet">  Deixe fluir </h2><br><p>  Eu li muitos coment√°rios que eles dizem que fluxos, e especialmente Rx, s√£o muito complicados para entender e, como resultado, usar. </p><br><p> Gostaria que voc√™ soubesse que n√£o me considero um guru de Rx.  Aproveitar todo o seu poder n√£o √© f√°cil, e admito que continuo estudando.  Mas deixe-me corrigir um erro desde o in√≠cio: <strong>voc√™ n√£o precisa ser um assistente de Rx para come√ßar a obter muitos benef√≠cios com o uso de threads e desta tecnologia</strong> .  Farei todos os esfor√ßos para explicar os fluxos para voc√™ da maneira mais acess√≠vel. </p><a name="habracut"></a><br><h2 id="chto-takoe-potoki">  O que s√£o t√≥picos? </h2><br><p>  Na minha opini√£o, a melhor analogia com as roscas √© a correia transportadora.  Voc√™ pode colocar algo em uma extremidade e esse "algo" ser√° automaticamente transferido para a outra.  Diferentemente do pipeline f√≠sico, os threads manipulam objetos de dados, transferindo-os automaticamente desde o in√≠cio - mas onde?  Como no pipeline real, se n√£o houver nada para capturar os dados do outro lado, eles simplesmente "cair√£o" e desaparecer√£o (isso, √© claro, n√£o √© verdade no Dart Streams, mas √© melhor lidar com fluxos como se fosse esse o caso) . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/266/3a1/04f/2663a104fc0e4c1ad735881ef36fe32c.gif"></p><br><p>  Para evitar a perda de dados, voc√™ pode definir uma "intercepta√ß√£o" na sa√≠da do fluxo.  Dessa forma, voc√™ pode capturar dados e executar as manipula√ß√µes necess√°rias sempre que os objetos de dados chegarem ao final do fluxo. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/dd3/331/b2f/dd3331b2fa9036bee28628d563f3ceb7.gif"></p><br><p>  <strong>Lembre-se:</strong> </p><br><ul><li>  Se a armadilha n√£o estiver definida, os dados simplesmente desaparecer√£o para sempre e n√£o haver√° como recuper√°-la (novamente, n√£o exatamente com o Dart Streams, mas √© melhor voc√™ fingir que est√°) </li><li>  Depois de enviar dados para o fluxo, voc√™ n√£o precisa pausar o programa e esperar at√© ele chegar ao fim, tudo isso acontece em segundo plano. </li><li>  A armadilha pode receber dados a qualquer momento, n√£o √© necess√°rio imediatamente ap√≥s o envio (mas n√£o se preocupe, os fluxos s√£o realmente muito r√°pidos).  Imagine que voc√™ n√£o sabe com que rapidez ou por quanto tempo a correia transportadora se move.  Isso significa que colocar algo no fluxo √© completamente separado da rea√ß√£o ao elemento na outra extremidade.  Sua armadilha funcionar√° e pegar√° o item quando ele chegar l√°.  (Alguns de voc√™s j√° devem perceber que isso se encaixa bem na maneira reativa que o Flutter atualiza seus widgets) </li><li>  Voc√™ pode definir uma armadilha muito antes do in√≠cio do trabalho e o primeiro item aparecer </li><li>  O fluxo funciona de acordo com o princ√≠pio FIFO.  Os dados sempre v√™m na ordem em que s√£o colocados no fluxo. </li></ul><br><h2 id="a-chto-takoe-rx">  O que √© Rx? </h2><br><p>  Rx, abrevia√ß√£o de Extens√µes Reativas, s√£o fluxos de ester√≥ides.  Esse √© um conceito muito semelhante ao Streams, que foi inventado para a estrutura .Net pela equipe da Microsoft.  Como o .Net j√° possu√≠a o tipo Stream, que √© usado para E / S de arquivos, eles chamavam os fluxos Rx de <strong>Observables</strong> e criaram muitas fun√ß√µes para manipular os dados que passavam por eles.  O Dart possui Streams embutidos em sua especifica√ß√£o de idioma que j√° oferecem a maioria dessas funcionalidades, mas n√£o todas.  √â por isso que o pacote RxDart foi desenvolvido;  √â baseado no Dart Streams, mas estende sua funcionalidade.  Vou cobrir Rx e RxDart na pr√≥xima parte desta s√©rie. </p><br><h2 id="nemnogo-terminov">  Alguns termos </h2><br><p>  Dart Streams e Rx usam alguma terminologia que pode parecer assustadora, ent√£o aqui est√° a tradu√ß√£o.  Primeiro vem o termo Dart, depois Rx. </p><br><ul><li>  <strong>Stream / Observ√°vel</strong> .  Este √© o "pipeline" descrito anteriormente.  O fluxo pode ser convertido em Observ√°vel e, sempre que for esperado, voc√™ pode atribuir um Observ√°vel.  Portanto, n√£o se confunda se eu misturar esses termos no processo de explicar </li><li>  <strong>listen / subscrever</strong> - defina a intercepta√ß√£o do <strong>ouvinte</strong> </li><li>  <strong>Controlador de Stream / Assunto</strong> .  O lado "esquerdo" da correia transportadora onde voc√™ coloca os dados no fluxo.  Eles diferem ligeiramente em suas propriedades e caracter√≠sticas, mas servem ao mesmo prop√≥sito. </li><li>  <strong>Emitindo um item / dados</strong> .  O momento em que os dados aparecem na sa√≠da do "pipeline" </li></ul><br><h2 id="sozdanie-potoka">  Cria√ß√£o de stream </h2><br><p>  Se voc√™ pretende continuar estudando o t√≥pico, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">clone este projeto</a> com exemplos.  Vou usar o sistema de teste Dart / Flutter. </p><br><p>  Para criar um fluxo, voc√™ cria um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">StreamController</a> </p><br><pre><code class="cpp hljs">var controller = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StreamController&lt;String&gt;(); controller.add(<span class="hljs-string"><span class="hljs-string">"Item1"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     </span></span></code> </pre> <br><p>  O tipo de modelo (neste caso, String) passado ao criar o StreamController determina o tipo de objetos que podemos enviar para o fluxo.  Pode ser qualquer tipo!  Voc√™ pode criar um <code>StreamController&lt;List&lt;MyObject&gt;&gt;()</code> se desejar e o fluxo transferir√° a planilha inteira em vez de um √∫nico objeto. </p><br><h2 id="ustanovka-lovushki">  Configura√ß√£o de intercepta√ß√£o </h2><br><p>  Se voc√™ executou o teste especificado, n√£o conseguiu ver nada, porque nada pegou nossa linha na sa√≠da do fluxo.  Agora defina a armadilha: </p><br><pre> <code class="cpp hljs">var controller = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StreamController&lt;String&gt;(); controller.stream.listen((item) =&gt; print(item)); <span class="hljs-comment"><span class="hljs-comment">//  controller.add("Item1"); controller.add("Item2"); controller.add("Item3");</span></span></code> </pre> <br><p>  Agora a armadilha √© configurada usando o m√©todo <code>.listen()</code> .  O registro se parece com <code>controller.stream.listen</code> , mas se voc√™ rolar para tr√°s, como algum tipo de √°lbum dos anos 60, o verdadeiro significado do que est√° escrito aparecer√°: "ou√ßa o fluxo desse controlador" </p><br><p>  Voc√™ precisa passar uma certa fun√ß√£o para o m√©todo <code>.listen()</code> para manipular de alguma forma os dados recebidos.  A fun√ß√£o deve aceitar um par√¢metro do tipo especificado ao criar o StreamController, neste caso, String. </p><br><p>  Se voc√™ executar o c√≥digo acima, ver√° </p><br><pre> <code class="cpp hljs">Item1 Item2 Item3</code> </pre> <br><p>  Na minha opini√£o, o maior problema para os novatos no Streams √© que voc√™ pode determinar a rea√ß√£o do elemento emitido muito antes do primeiro elemento ser colocado no fluxo, acionando uma chamada para essa rea√ß√£o. </p><br><h2 id="zavershenie-proslushivaniya">  Terminar a escuta </h2><br><p>  O c√≥digo acima perdeu a parte pequena, mas importante.  <code>listen()</code> retorna um <code>StreamSubscription</code> - um objeto de assinatura de fluxo.  Uma chamada para o m√©todo <code>.cancel()</code> encerra a assinatura, liberando recursos e impedindo que a fun√ß√£o de escuta seja chamada depois que se torna desnecess√°ria. </p><br><pre> <code class="cpp hljs">var controller = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StreamController&lt;String&gt;(); StreamSubscription subscription = controller.stream.listen((item) =&gt; print(item)); <span class="hljs-comment"><span class="hljs-comment">// This is the Trap controller.add("Item1"); controller.add("Item2"); controller.add("Item3"); //    ,        //  ,     Stream   await Future.delayed(Duration(milliseconds: 500)); subscription.cancel;</span></span></code> </pre> <br><h2 id="podrobnosti-o-slushatelyah">  Detalhes do ouvinte </h2><br><p>  A fun√ß√£o <code>listen()</code> pode ser uma fun√ß√£o lambda ou simples. </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myPrint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String message)</span></span></span><span class="hljs-function"> </span></span>{ print(message); } StreamSubscription subscription = controller.stream.listen((item) =&gt; print(item)); <span class="hljs-comment"><span class="hljs-comment">//  - StreamSubscription subscription2 = controller.stream.listen(myPrint); //    StreamSubscription subscription3 = controller.stream.listen((item) { print(item); print(item.toUpperCase); }); // -</span></span></code> </pre> <br><p>  <strong>Nota importante: a maioria dos fluxos Dart permite apenas uma assinatura √∫nica, ou seja, eles n√£o podem ser reinscritos ap√≥s a conclus√£o da assinatura - isso gerar√° uma exce√ß√£o.</strong>  <strong>Essa √© a diferen√ßa de outras implementa√ß√µes de Rx.</strong> </p><br><p>  A assinatura completa de <code>listen()</code> √© assim: </p><br><pre> <code class="cpp hljs"> <span class="hljs-comment"><span class="hljs-comment">/* excerpt from the API doc * The [onError] callback must be of type `void onError(error)` or * `void onError(error, StackTrace stackTrace)`. If [onError] accepts * two arguments it is called with the error object and the stack trace * (which could be `null` if the stream itself received an error without * stack trace). * Otherwise it is called with just the error object. * If [onError] is omitted, any errors on the stream are considered unhandled, * and will be passed to the current [Zone]'s error handler. * By default unhandled async errors are treated * as if they were uncaught top-level errors. * * If this stream closes and sends a done event, the [onDone] handler is * called. If [onDone] is `null`, nothing happens. * * If [cancelOnError] is true, the subscription is automatically canceled * when the first error event is delivered. The default is `false`. */</span></span> StreamSubscription&lt;T&gt; listen(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> onData(T event), {Function onError, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> onDone(), <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> cancelOnError});</code> </pre> <br><p>  Isso significa que voc√™ pode fazer mais do que apenas passar um manipulador para os dados enviados.  Voc√™ tamb√©m pode ter um manipulador para erros e outro para fechar o fluxo no lado do controlador ( <code>onDone</code> ).  As exce√ß√µes <code>onError()</code> de dentro do Stream <code>onError()</code> se voc√™ fornecer, <strong>caso contr√°rio</strong> , <strong>elas ser√£o simplesmente engolidas e voc√™ nunca saber√° que algo deu errado.</strong> </p><br><h2 id="primer-flutter-potokov">  Exemplo de segmento de vibra√ß√£o </h2><br><p>  <em>Para facilitar o entendimento dos cap√≠tulos seguintes, criei um ramo de reposit√≥rio separado.</em> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Por favor, clone-a</a> </p><br><p>  Como primeiro exemplo, peguei o conhecido aplicativo de contador que voc√™ obt√©m ao criar um novo projeto Flutter e o reorganizei um pouco.  Eu adicionei uma classe de modelo para armazenar o estado do aplicativo, que √© basicamente um valor de contador: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _counter = <span class="hljs-number"><span class="hljs-number">0</span></span>; StreamController _streamController = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StreamController&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); Stream&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; get counterUpdates =&gt; _streamController.stream; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">incrementCounter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ _counter++; _streamController.add(_counter); } }</code> </pre> <br><p>  aqui voc√™ pode ver um modelo muito t√≠pico: em vez de publicar todo o StreamController, simplesmente publicamos sua propriedade Stream. </p><br><p>  Para disponibilizar o modelo para a interface do usu√°rio, eu o tornei um campo est√°tico no objeto App, porque n√£o queria inserir InheritedWidget ou ServiceLocator.  Para um exemplo simples, isso vai acabar com ele, mas eu n√£o faria isso nesta aplica√ß√£o! </p><br><p>  Adicione ao <code>main.dart</code> : </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> _</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyHomePageState</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">State</span></span></span><span class="hljs-class">&lt;MyHomePage&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _counter = <span class="hljs-number"><span class="hljs-number">0</span></span>; StreamSubscription streamSubscription; @<span class="hljs-function"><span class="hljs-function">override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ streamSubscription = MyApp.model.counterUpdates.listen((newVal) =&gt; setState(() { _counter = newVal; })); super.initState(); } <span class="hljs-comment"><span class="hljs-comment">//   State   ,   , //       @override void dispose() { streamSubscription?.cancel(); super.dispose(); }</span></span></code> </pre> <br><p>  <code>initState()</code> bom lugar para definir o ouvinte e, como bons cidad√£os de Darts, sempre liberamos a assinatura em <code>dispose()</code> , certo? </p><br><p>  Na √°rvore de widgets, precisamos apenas adaptar o manipulador onPressed do bot√£o FAB (bot√£o com uma a√ß√£o flutuante). </p><br><pre> <code class="cpp hljs">floatingActionButton: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FloatingActionButton( onPressed: MyApp.model.incrementCounter, tooltip: <span class="hljs-string"><span class="hljs-string">'Increment'</span></span>, child: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Icon(Icons.add), ),</code> </pre> <br><p>  Dessa maneira, criamos uma separa√ß√£o limpa entre View e Model usando o Stream. </p><br><h2 id="primenyaem-streambuilder">  Aplicar StreamBuilder </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fonte</a> </p><br><p>  Em vez de usar <code>initState()</code> e <code>setState()</code> para nossas necessidades, o Flutter vem com um conveniente widget <code>StreamBuilder</code> .  Como voc√™ deve ter adivinhado, s√£o necess√°rias uma fun√ß√£o Stream e um m√©todo construtor chamado sempre que o Stream retorna um novo valor.  E agora n√£o precisamos de inicializa√ß√£o e libera√ß√£o expl√≠citas: </p><br><pre> <code class="cpp hljs">body: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Center( child: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Text( <span class="hljs-string"><span class="hljs-string">'You have pushed the button this many times:'</span></span>, ), StreamBuilder&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;( initialData: <span class="hljs-number"><span class="hljs-number">0</span></span>, stream: MyApp.model.counterUpdates, builder: (context, snappShot) { String valueAsString = <span class="hljs-string"><span class="hljs-string">'NoData'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (snappShot != null &amp;&amp; snappShot.hasData) { valueAsString = snappShot.data.toString(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Text( valueAsString, style: Theme.of(context).textTheme.display1, ); }), ], ), ),</code> </pre> <br><p>  Estamos quase terminando, prometo.  Aqui est√£o tr√™s coisas que voc√™ deve saber: </p><br><ul><li>  A grande vantagem de usar o StreamBuilder sobre a primeira solu√ß√£o √© que chamar <code>setState()</code> em <code>listen()</code> sempre reorganiza a p√°gina inteira, enquanto o StreamBuilder chama apenas seu <code>builder</code> </li><li>  A vari√°vel <code>snapShot</code> cont√©m os dados mais recentes recebidos do Stream.  Sempre verifique se ele cont√©m dados v√°lidos antes de us√°-lo. </li><li><p>  Com base nos princ√≠pios de inicializa√ß√£o durante, o StreamBuilder n√£o pode obter um valor durante o primeiro quadro.  Para contornar isso, passamos o valor para <code>initialData</code> , que √© usado para o primeiro assembly, ou seja, para o primeiro quadro da tela.  Se n√£o passarmos dados <code>initialData</code> , nosso construtor ser√° chamado pela primeira vez com dados inv√°lidos.  Uma alternativa ao uso <code>initialData</code> √© retornar um widget de espa√ßo reservado se <code>snapShot</code> inv√°lido, que √© exibido at√© obtermos dados v√°lidos, por exemplo: </p><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// ,           StreamBuilder&lt;int&gt;( stream: MyApp.model.databaseUpdates, builder: (context, snappShot) { if (snappShot != null &amp;&amp; snappShot.hasData) { return Text( snappShot.data.toString(), style: Theme.of(context).textTheme.display1, ); } //      ,   Spinner return CircularProgressIndicator (); })</span></span></code> </pre> <br></li></ul><br><p>  No pr√≥ximo post, veremos como converter dados em nossos fluxos e faz√™-lo em tempo real.  Muito obrigado a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Scott Stoll</a> por ler as provas e coment√°rios importantes. </p><br><hr></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt450950/">https://habr.com/ru/post/pt450950/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt450938/index.html">Linux Install Fest 05.19 em Nizhny Novgorod 18 de maio de 2019</a></li>
<li><a href="../pt450940/index.html">Vivaldi 2.5 - Macrocosmo atraente</a></li>
<li><a href="../pt450942/index.html">Sidecar para uma divis√£o de c√≥digo</a></li>
<li><a href="../pt450946/index.html">Telefone celular em disco LPC810</a></li>
<li><a href="../pt450948/index.html">MU-MIMO: um dos algoritmos de implementa√ß√£o</a></li>
<li><a href="../pt450952/index.html">√çndice M√©dio e Antibanco</a></li>
<li><a href="../pt450954/index.html">Como aprendemos a explorar Java no Docker</a></li>
<li><a href="../pt450956/index.html">Compara√ß√£o de COB industrial: ISIM vs. Kics</a></li>
<li><a href="../pt450958/index.html">AnyStub, biblioteca de stub de conex√£o Java</a></li>
<li><a href="../pt450962/index.html">Bombas de insulina, microchips inviol√°veis ‚Äã‚Äãe r√°dio definido por software</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>