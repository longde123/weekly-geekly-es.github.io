<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÇüèº ‚úãüèæ üîñ A arte de analisar 2 ou translitera√ß√£o de sua pr√≥pria marca√ß√£o üîë üôåüèø üëñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="+ B√îNUS: inclus√£o m√∫tua de classes em C ++ 
 Ol√° Habr! Este artigo √© uma continua√ß√£o direta do artigo The Art of Parsing ou DOM com nossas pr√≥prias m√£...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>A arte de analisar 2 ou translitera√ß√£o de sua pr√≥pria marca√ß√£o</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444876/"><h4>  + B√îNUS: inclus√£o m√∫tua de classes em C ++ </h4><br>  Ol√° Habr!  Este artigo √© uma continua√ß√£o direta do artigo The <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Art of Parsing ou DOM com nossas pr√≥prias m√£os</a> , onde analisamos um documento HTML e constru√≠mos com base em uma √°rvore de sintaxe abstrata (AST) com acesso a qualquer elemento por meio de indexa√ß√£o usando apenas a biblioteca C ++ padr√£o, ou seja, aprendemos a <i>analisar por</i> conta pr√≥pria Coisas semelhantes a XML.  Deixe-me lembr√°-lo de que o processo de an√°lise, ou <i>an√°lise / an√°lise,</i> consiste em duas etapas: <i>an√°lise lexical</i> (an√°lise do texto em tokens) e constru√ß√£o do AST.  Se examinarmos o primeiro em detalhes, com exemplos e c√≥digos-fonte, a descri√ß√£o do segundo parecer√° uma boneca de borboleta vazia, que possui apenas uma concha, e o autor extraiu um excelente conte√∫do antes da publica√ß√£o.  Havia uma raz√£o para o HTML construir uma √°rvore ser realmente simples, voc√™ precisa de apenas 4 classes: uma tag vazia, bloco, n√≥ de texto e a raiz do documento herdada do bloco.  Hoje vamos deixar essa simplicidade para tr√°s e construir uma √°rvore em que as propriedades dos elementos, vazios e em blocos, n√£o estar√£o contidas nos atributos das tags, mas diretamente nas classes, e para isso voc√™ precisar√° criar muitas classes.  Realmente muito.  N√≥s criaremos n√£o a partir de simples linguagens de marca√ß√£o conhecidas, mas criaremos as nossas, com as regras mostradas na imagem abaixo do corte.  Al√©m disso, no final, traduziremos, ou, mais corretamente, <i>traduziremos o</i> documento com o artigo anterior, marcado em nossa linguagem, em HTML, e como b√¥nus, responderei aos programadores iniciantes em C ++ uma pergunta trivial, mas dif√≠cil de encontrar: como incorporar classes entre si? <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/gp/bv/er/gpbverq2xlourlzxmmmhghayhem.png"><br><br><h2>  Notas gramaticais </h2><br>  Antes de irmos diretamente para a constru√ß√£o de uma √°rvore, vamos refrescar nossa mem√≥ria e esclarecer alguns dos detalhes do trabalho preliminar.  Voc√™ ainda se lembra que toda a sintaxe da linguagem precisa ser escrita na forma de uma das gram√°ticas formais sem contexto, por exemplo, BNF?  Mas √© dif√≠cil para programadores iniciantes domin√°-los imediatamente e, al√©m disso, nem todas as regras poss√≠veis com essas gram√°ticas podem ser descritas.  Nesses casos, se voc√™ estiver parado e n√£o puder formular uma certa regra na forma correta, poder√° anot√°-la como coment√°rios na linguagem humana natural, por exemplo, assim: <br><br><pre><code class="html hljs xml">... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ordered_list_item</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">number_marker</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">number_marker</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">number</span></span></span><span class="hljs-tag">&gt;</span></span> "." {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">number</span></span></span><span class="hljs-tag">&gt;</span></span> "."} " " <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">number</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span>} !! link ending "&gt;" and image/span ending "]" can't follow "\n" or document start</code> </pre> <br>  Tradu√ß√£o: o <i>final do link "&gt;" e o elemento de imagem / linha "]" n√£o podem seguir imediatamente o in√≠cio de uma linha ou documento</i> . <br><br>  Ou seja, se no in√≠cio da linha o lexer encontrar "]" ou "&gt;", devemos instru√≠-lo a ignorar o significado especial desses caracteres e trabalhar com eles como no texto simples.  Essa maneira de adicionar coment√°rios √† gram√°tica n√£o √© a √∫nica; voc√™ pode fazer do seu jeito.  No final, o arquivo com a descri√ß√£o da sintaxe n√£o √© um documento final, ningu√©m obriga a seguir todas as regras e √© importante que voc√™ se sinta √† vontade para trabalhar com ele.  O principal √© n√£o esquecer os coment√°rios feitos e refleti-los nas se√ß√µes corretas do c√≥digo. <br><br>  Vejamos uma descri√ß√£o completa desse idioma: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">article</span></span></span><span class="hljs-tag">&gt;</span></span> = {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">article_item</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">article_item</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">underline</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> (* ARTICLE ITEMS *) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">underline</span></span></span><span class="hljs-tag">&gt;</span></span> = "___" {"_"} "\n" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">paragraphs</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">quote</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">cite</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unordered_list</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ordered_list</span></span></span><span class="hljs-tag">&gt;</span></span> (* SECTION ITEMS *) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">paragraphs</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">paragraph</span></span></span><span class="hljs-tag">&gt;</span></span> {"\n" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">paragraph</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">paragraph</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>} ("\n" | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">END</span></span></span><span class="hljs-tag">&gt;</span></span>) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bold</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">italic</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">underlined</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">overlined</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">throwlined</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">subscript</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">superscript</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">marked</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">monospace</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">image</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">notification</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">number</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">signs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">left_angle_bracket</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">right_angle_bracket</span></span></span><span class="hljs-tag">&gt;</span></span> ("\n" | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">END</span></span></span><span class="hljs-tag">&gt;</span></span>) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">number</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">signs</span></span></span><span class="hljs-tag">&gt;</span></span> "######" | "#####" | "####" | "###" | "##" | "#" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">quote</span></span></span><span class="hljs-tag">&gt;</span></span> = "&gt; " {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>} ("\n" | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">END</span></span></span><span class="hljs-tag">&gt;</span></span>) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">cite</span></span></span><span class="hljs-tag">&gt;</span></span> = "&gt;&gt;" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">number</span></span></span><span class="hljs-tag">&gt;</span></span> ("\n" | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">END</span></span></span><span class="hljs-tag">&gt;</span></span>) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">number</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span>} (* PARAGRAPH ITEMS *) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bold</span></span></span><span class="hljs-tag">&gt;</span></span> = "*[" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>} "]" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">italic</span></span></span><span class="hljs-tag">&gt;</span></span> = "%[" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>} "]" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">underlined</span></span></span><span class="hljs-tag">&gt;</span></span> = "_[" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>} "]" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">overlined</span></span></span><span class="hljs-tag">&gt;</span></span> = "^[" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>} "]" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">throwlined</span></span></span><span class="hljs-tag">&gt;</span></span> = "~[" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>} "]" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">subscript</span></span></span><span class="hljs-tag">&gt;</span></span> = "&amp;[" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>} "]" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">superscript</span></span></span><span class="hljs-tag">&gt;</span></span> = "+[" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>} "]" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">marked</span></span></span><span class="hljs-tag">&gt;</span></span> = "=[" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>} "]" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">monospace</span></span></span><span class="hljs-tag">&gt;</span></span> = "`[" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>} "]" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textline</span></span></span><span class="hljs-tag">&gt;</span></span> "\n" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textline</span></span></span><span class="hljs-tag">&gt;</span></span> "\n"} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textline</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">symbol</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">symbol</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">symbol</span></span></span><span class="hljs-tag">&gt;</span></span> = /^[\n]/ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag">&gt;</span></span> = "<span class="hljs-tag"><span class="hljs-tag">&lt;&lt;" &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">&gt;</span></span> "&gt;" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>} "&gt;" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">image</span></span></span><span class="hljs-tag">&gt;</span></span> = "[<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">&gt;</span></span> "&gt;" [<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag">&gt;</span></span>] "]" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">notification</span></span></span><span class="hljs-tag">&gt;</span></span> = (" " | "\n") "@" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">word</span></span></span><span class="hljs-tag">&gt;</span></span> (" " | "\n" | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">END</span></span></span><span class="hljs-tag">&gt;</span></span>) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">word</span></span></span><span class="hljs-tag">&gt;</span></span> = (<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">letter</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span>) {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">letter</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">letter</span></span></span><span class="hljs-tag">&gt;</span></span> = "a" | "b" | "c" | "d" | ... | "_" | "-" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span> = "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9" (* LISTS *) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unordered_list</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unordered_list_item</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unordered_list_item</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ordered_list</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ordered_list_item</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ordered_list_item</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unordered_list_item</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">marker</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">marker</span></span></span><span class="hljs-tag">&gt;</span></span> = ("*" {"*"}) | ("+" {"+"}) " " <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ordered_list_item</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">number_marker</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">number_marker</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">number</span></span></span><span class="hljs-tag">&gt;</span></span> "." {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">number</span></span></span><span class="hljs-tag">&gt;</span></span> "."} " " <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">number</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span>} !! link ending "&gt;" and image/span ending "]" can't follow "\n" or document start</code> </pre><br>  Na √∫ltima vez, foi necess√°rio escrever os terminais e verificar cada caractere recebido quanto √† conformidade com um deles.  Mas ent√£o os terminais eram de um caractere!  Agora, al√©m de destacar os terminais, √© necess√°rio dividi-los em <i>chaves</i> - ou seja, caracteres.  Por que as "chaves"?  Eles s√£o a chave para o lexer.  Como resultado de todas as a√ß√µes, as seguintes linhas aparecer√£o no arquivo de gram√°tica: <br><br><pre> <code class="html hljs xml">(* TERMINALS *) "___...", "\n", "\n\n", "&gt; ", "&gt;&gt;...", "###...[", "*[", "%[", "_[", "^[", "~[", "&amp;[", "+[", "=[", "`[", "]", "<span class="hljs-tag"><span class="hljs-tag">&lt;&lt;", "[&lt;", "&gt;</span></span>", " @... ", "\n@...\n", " @...\n", "\n@... ", "***... ", "+++... ", "123.56. " (* KEYS *) "_", "\n" "&gt;", "#", "*", "%", "^", "~", "&amp;", "+", "=", "`", "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">",</span></span></span><span class="hljs-tag"> "[", "]", " ", "@", "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">1..9</span></span></span><span class="hljs-tag">", "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">.</span></span></span><span class="hljs-tag">", &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">END</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><h2>  Pilha de tipos esperados de tokens </h2><br>  Da √∫ltima vez, novamente, tudo era mais simples, t√≠nhamos apenas 10 tipos de tokens, sem contar o final, e havia menos chance de ficarmos confusos nesse zool√≥gico de tokens.  Agora, obviamente, existem mais tipos.  Deixe-me lembr√°-lo de que a tarefa do lexer √© deixar o analisador com o m√≠nimo de trabalho poss√≠vel, idealmente, apenas construindo uma √°rvore.  Portanto, o conjunto de tipos de tokens deve refletir sua ess√™ncia com a maior precis√£o poss√≠vel.  No primeiro artigo, dei um exemplo de um bom conjunto, neste, darei um "anti-exemplo".  Veja os terminais que iniciam os elementos de texto embutido (negrito - negrito, it√°lico - it√°lico etc.)?  Poder√≠amos analis√°-los em um par de fichas: o mestre ("*", "%" etc.) e o escravo ("[") e pass√°-lo na forma para o analisador.  √â f√°cil adivinhar que √© melhor fazer uma defini√ß√£o exata de um elemento de texto no n√≠vel lexer, ou seja,  defina "* [" como "bold_start", "% [" como "italic_start" etc.)  Quanto mais tipos e com mais precis√£o eles se refletem - melhor.  Al√©m disso, o segundo √© mais importante que o primeiro.  Por exemplo, poder√≠amos analisar a notifica√ß√£o para o s√≠mbolo "@" e o nome de usu√°rio, mas obviamente √© melhor deix√°-los combinados em um token. <br>  Bem, decidimos os tipos.  Por onde come√ßar o procedimento para analisar texto em tokens?  Como ent√£o, comece do come√ßo.  O que pode seguir imediatamente o in√≠cio do documento analisado?  N√£o se apresse para dobrar os dedos.  Ao contr√°rio do HTML, todos os 22 tipos aqui podem come√ßar.  Est√° tudo bem, armado com a unifica√ß√£o de bits, escrevemos assim: <br><br><pre> <code class="cpp hljs">curr_token_type = TEXT | UNDERLINE | TITLE_START | QUOTE_START | CITE | BOLD_START | ...</code> </pre> <br>  e na fun√ß√£o de processamento de s√≠mbolos: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">case</span></span> TEXT | UNDERLINE | TITLE_START | QUOTE_START | CITE | ...</code> </pre> <br>  Se voc√™ n√£o entender o que est√° em jogo, leia o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">primeiro artigo</a> . <br><br>  N√£o tenha medo do tipo gen√©rico longo de token esperado.  O primeiro caractere da string reduz imediatamente seu comprimento para 2-4 tipos.  Como nossos terminais s√£o de v√°rios caracteres, a defini√ß√£o √© baseada nas chaves. <br><br>  √â simples, veja voc√™ mesmo: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c == <span class="hljs-string"><span class="hljs-string">'_'</span></span>) { buffer.push_back(<span class="hljs-string"><span class="hljs-string">'_'</span></span>); curr_token_type = TEXT | UNDERLINE | UNDERLINED_START;</code> </pre><br>  O sublinhado determinou imediatamente o token em constru√ß√£o para um dos tr√™s tipos: texto sem formata√ß√£o, linha horizontal ou o in√≠cio do texto sublinhado ("_ ["). <br><br>  Voltando ao problema, como acompanhar todos os tipos gen√©ricos e lembre-se de process√°-los todos?  Pegue uma pilha ... em um notebook!  √â isso mesmo, anote todos os tipos gen√©ricos que aparecem ap√≥s "curr_token_type = ..." na lista e, depois de processar um, retire o outro da lista do final.  Voc√™ pode organizar o trabalho com a lista e, como na fila, isso n√£o importa muito.  O principal √© que voc√™ n√£o esquece quais tipos j√° foram processados ‚Äã‚Äãe quais ainda precisam ser processados. <br><br><h2>  √Årvore de classes </h2><br>  Finalmente, chegamos √† an√°lise.  Aqui voc√™ precisa determinar as classes de n√≥s (n√≥s) da futura √°rvore da mesma maneira que determinamos com os tipos de tokens.  Para fazer isso, abra o notebook novamente e escreva o seguinte: <br><br><pre> <code class="cpp hljs">Node { Node * parent, Node_type type } #- Root { Root_item[] children, ulong children_count }</code> </pre><br>  Ent√£o, definimos a classe base futura de todos os n√≥s e sua derivada - a raiz da √°rvore, ou seja, o pr√≥prio documento.  Um documento (consulte o BPF acima) consiste em dois tipos de n√≥s: uma se√ß√£o e uma linha horizontal (sublinhado).  Definimos a classe base Root_item para eles e descrevemos cada um da mesma maneira que descrevemos a raiz.  Al√©m disso, aqui, no bloco de notas, indicamos imediatamente todos os outros campos das classes, se houver.  Para a raiz, esse √© o n√∫mero de "filhos" - isto √©,  se√ß√µes internas e linhas horizontais.  A se√ß√£o consiste em elementos para os quais definiremos a classe base Div e assim por diante, movendo-se recursivamente pela gram√°tica, determinaremos todas as classes necess√°rias.  Antes de escrever o c√≥digo, definimos aqui toda a inclus√£o de cabe√ßalhos.  √â simples: todos os descendentes diretos de classes generalizadas b√°sicas devem ser inclu√≠dos nas classes que os cont√™m. <br><br>  Denotamos essas depend√™ncias na forma de listas ap√≥s a rede e obtemos o seguinte documento: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">Node</span></span> { Node * parent, Node_type type } <span class="hljs-selector-id"><span class="hljs-selector-id">#-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Root</span></span> { Root_item[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Underline</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Section</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Root_item</span></span> {} <span class="hljs-selector-id"><span class="hljs-selector-id">#-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Underline</span></span> {} <span class="hljs-selector-tag"><span class="hljs-selector-tag">Section</span></span> { Div[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Paragraph</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Title</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Quote</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Cite</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Unordered_list</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Ordered_list</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Div</span></span> {} <span class="hljs-selector-id"><span class="hljs-selector-id">#-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Paragraph</span></span> { Span[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Bold</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Italic</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Underlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Overlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Throwlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Subscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Superscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Marked</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Monospace</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Text</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Image</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Link</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Notification</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Title</span></span> { char level, Span[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Bold</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Italic</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Underlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Overlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Throwlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Subscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Superscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Marked</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Monospace</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Text</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Image</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Link</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Notification</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Quote</span></span> { Span[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Bold</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Italic</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Underlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Overlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Throwlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Subscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Superscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Marked</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Monospace</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Text</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Image</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Link</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Notification</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Cite</span></span> { ulong number } <span class="hljs-selector-id"><span class="hljs-selector-id">#-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Unordered_list</span></span> { Div } <span class="hljs-selector-id"><span class="hljs-selector-id">#Paragraph</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Title</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Quote</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Cite</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Ordered_list</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Ordered_list</span></span> { Div } <span class="hljs-selector-id"><span class="hljs-selector-id">#Paragraph</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Title</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Quote</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Cite</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Unordered</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">list</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Span</span></span> {} <span class="hljs-selector-id"><span class="hljs-selector-id">#-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Bold</span></span> { Span[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Italic</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Underlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Overlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Throwlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Subscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Superscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Marked</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Monospace</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Text</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Image</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Link</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Notification</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Italic</span></span> { Span[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Bold</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Underlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Overlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Throwlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Subscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Superscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Marked</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Monospace</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Text</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Image</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Link</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Notification</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Underlined</span></span> { Span[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Bold</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Italic</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Overlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Throwlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Subscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Superscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Marked</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Monospace</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Text</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Image</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Link</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Notification</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Overlined</span></span> { Span[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Bold</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Italic</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Underlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Throwlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Subscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Superscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Marked</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Monospace</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Text</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Image</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Link</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Notification</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Throwlined</span></span> { Span[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Bold</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Italic</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Underlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Overlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Subscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Superscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Marked</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Monospace</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Text</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Image</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Link</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Notification</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Subscript</span></span> { Span[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Bold</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Italic</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Underlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Overlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Throwlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Superscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Marked</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Monospace</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Text</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Image</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Link</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Notification</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Superscript</span></span> { Span[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Bold</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Italic</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Underlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Overlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Throwlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Subscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Marked</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Monospace</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Text</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Image</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Link</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Notification</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Marked</span></span> { Span[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Bold</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Italic</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Underlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Overlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Throwlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Subscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Superscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Monospace</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Text</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Image</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Link</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Notification</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Monospace</span></span> { Span[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Bold</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Italic</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Underlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Overlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Throwlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Subscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Superscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Marked</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Text</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Image</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Link</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Notification</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Text</span></span> { string text } <span class="hljs-selector-id"><span class="hljs-selector-id">#-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Image</span></span> { string src, string alt } <span class="hljs-selector-id"><span class="hljs-selector-id">#-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Link</span></span> { string URL, Span[] children, ulong children_count } <span class="hljs-selector-id"><span class="hljs-selector-id">#Bold</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Italic</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Underlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Overlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Throwlined</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Subscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Superscript</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Marked</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Monospace</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Text</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Image</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#Notification</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Notification</span></span> { string user } <span class="hljs-selector-id"><span class="hljs-selector-id">#-</span></span></code> </pre><br>  Aqui marquei "# -" a aus√™ncia de depend√™ncias e removi a inclus√£o de classes em si mesmas. <br>  Percebemos que todas as classes de formata√ß√£o internas (negrito, it√°lico, ...) dependem uma da outra e, al√©m disso, da classe Link, que tamb√©m depende delas!  Em uma posi√ß√£o semelhante est√£o Unordered_list e Ordered_list.  Incluir cabe√ßalhos um no outro n√£o apenas levar√° a ignorar um deles, como esperado, mas tamb√©m n√£o passar√° na valida√ß√£o pelo pr√©-processador, e a inclus√£o unidirecional n√£o nos permitir√° declarar dentro da classe inclu√≠da a fun√ß√£o de abrir o elemento de classe e retornar o link para ele.  Como ser  Existem duas maneiras. <br><br><h2>  Inclus√£o de aulas uma na outra </h2><br>  Primeiro, observe as classes Negrito, It√°lico e assim por diante no Monospace.  Eles s√£o parecidos.  Tanto que eles podem ser combinados em uma classe "Inline".  Talvez essa decis√£o levante d√∫vidas.  Isso tamb√©m me causou, mas na pr√°tica, a diferen√ßa entre eles afetou apenas a forma de apresenta√ß√£o na forma de uma √°rvore no terminal e as tags em HTML.  Se voc√™ perceber que algumas classes cont√™m os mesmos campos, t√™m as mesmas depend√™ncias e geralmente t√™m uma descri√ß√£o semelhante na gram√°tica formal, fique √† vontade para combin√°-las.  Ent√£o voc√™ facilita as coisas para voc√™ e o processador. <br><br>  Mas esse truque n√£o funcionar√° com a classe Link, porque cont√©m um campo adicional - a string da URL.  Vamos usar o segundo m√©todo. <br><br>  Todo mundo sabe que separar classes em declara√ß√µes e defini√ß√µes √© uma boa forma de programa√ß√£o em C ++?  No cabe√ßalho com a extens√£o .h ou .hpp - declara√ß√£o, na fonte com a extens√£o .cpp - defini√ß√£o, certo?  E agora recorro aos novatos em programa√ß√£o: sente-se e aperte o cinto, porque ser√° desagrad√°vel.  Afinal, o que prescrevemos em um arquivo com a extens√£o .h nada mais √© do que <b>uma defini√ß√£o de</b> classe.  E no arquivo .cpp, j√° existe uma <b>implementa√ß√£o dos m√©todos</b> dessa classe.  N√£o entende?  N√≥s fomos enganados na escola.  Uma classe √© declarada como uma fun√ß√£o, em uma √∫nica linha, se n√£o contiver modelos. <br><br>  √â ainda mais simples que uma fun√ß√£o, porque n√£o possui argumentos.  Aqui est√° uma <i>declara√ß√£o de</i> classe t√≠pica: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyClass</span></span></span><span class="hljs-class">;</span></span></code> </pre> <br>  E √© isso a√≠!  E declara√ß√µes de campos e m√©todos j√° s√£o sua <i>defini√ß√£o</i> . <br><br>  Vamos tirar proveito disso.  Inclu√≠mos o t√≠tulo da classe Inline no t√≠tulo da classe Link e nela declaramos a pr√≥pria classe Link antes de <i>definir</i> a classe Inline.  O arquivo inline.h deve ficar assim: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> INLINE_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> INLINE_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"AST/span.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"AST/text.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"AST/image.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"AST/notification.h"</span></span></span><span class="hljs-meta"> class Link; class Inline : public Span { public: static const unsigned long MAX_CHILDREN_COUNT = 0xFFFFFF; private: Span ** children; unsigned long children_count; unsigned long extended; void extend(); public: Inline(const Node * parent, const Node_type &amp;type); Inline(const Span * span); ~Inline(); Inline * add_text(const string &amp;text); Inline * add_image(const string &amp;src, const string &amp;alt); Inline * add_notification(const string &amp;user); Link * open_link(const string &amp;URL); ...</span></span></code> </pre><br>  A classe Inline ainda n√£o sabe nada sobre a classe Link, seus campos e m√©todos, mas sabe com certeza sobre sua exist√™ncia.  Portanto, podemos declarar m√©todos que retornam um <u>ponteiro</u> para um objeto da classe Link ou aceit√°-lo como argumento.  A palavra <i>ponteiro</i> n√£o <i>foi</i> selecionada aleatoriamente, a classe Inline ainda n√£o sabe como criar objetos do tipo Link, pois n√£o tem acesso ao seu construtor, mas pode trabalhar com todos os ponteiros, porque  todos eles t√™m a mesma interface.  Mas n√£o precisamos de objetos aqui.  Mas na implementa√ß√£o do m√©todo open_link, um objeto do tipo Link √© criado e um ponteiro para ele √© retornado, o que significa que, no momento em que o pr√©-processador entra nesse m√©todo, o construtor e outros m√©todos de Link que o m√©todo open_link possa precisar devem ser declarados.  Aqui aproveitamos a divis√£o do c√≥digo fonte em arquivos separados com cabe√ßalhos e implementa√ß√£o.  O arquivo inline.h est√° inclu√≠do no arquivo inline.cpp (‚Äúundercloud‚Äù), mas o arquivo link.h n√£o est√° inclu√≠do no inline.h.  Portanto, inclu√≠-lo no inline.cpp ser√° a primeira inclus√£o do pr√©-processador.  Em seguida, o arquivo inline.cpp come√ßar√° assim: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"inline.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"link.h"</span></span></span><span class="hljs-meta"> ...</span></span></code> </pre><br>  Repito todas as op√ß√µes acima.  O cabe√ßalho da classe Ah √© inclu√≠do no cabe√ßalho da classe Bh, como de costume, e a classe B √© declarada antes da classe A e inclu√≠mos seu cabe√ßalho na fonte A.cpp.  Este m√©todo n√£o √© o √∫nico, mas o mais simples, na minha opini√£o. <br><br>  Observo que essa inclus√£o m√∫tua de classes n√£o impede que a classe B seja herdada da classe A, se escrevermos sua <i>declara√ß√£o</i> antes da <i>defini√ß√£o da</i> classe A. Foi exatamente isso que eu fiz, herdando Ordered_list de Unordered_list. <br><br><h2>  Construindo uma √°rvore </h2><br>  Ent√£o, chegamos √† constru√ß√£o de uma √°rvore de sintaxe abstrata.  No √∫ltimo artigo, a fun√ß√£o coube em 50 linhas.  Spoiler: desta vez, chegou a quase 1400. O princ√≠pio de opera√ß√£o √© o mesmo: verificamos o tipo de cada token e, dependendo dele, executamos uma certa se√ß√£o de c√≥digo, armazenando um n√≥ de √°rvore aberto na mem√≥ria.  Mas se para analisar HTML quase todas as se√ß√µes continham um e apenas um dos tr√™s comandos: adicione um n√≥ vazio ao aberto, abra um novo n√≥ no aberto e feche o n√≥ aberto, retornando seu pai, a a√ß√£o desejada aqui tamb√©m depende do tipo de n√≥ aberto.  Por exemplo, se o token ‚Äúlinha horizontal‚Äù entrou em processamento e o n√≥ aberto √© a raiz do documento, tudo o que √© necess√°rio √© adicionar uma linha a esse n√≥ aberto usando a convers√£o e a fun√ß√£o com o nome condicional add_line (), algo como isto: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (type == Node::ROOT) static_case&lt;Root*&gt;(open_node)-&gt;add_line();</code> </pre><br>  Mas se o n√≥ aberto for um par√°grafo (Par√°grafo), primeiro voc√™ precisar√° fech√°-lo e todos os ancestrais poss√≠veis (listas com marcadores e numeradas) at√© que o n√≥ aberto se torne do tipo "se√ß√£o" e, em seguida, feche-o tamb√©m: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (type == Node::PARAGRAPH) { open_node = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;Paragraph*&gt;(open_node)-&gt;close(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (open_node-&gt;get_type() != Node::SECTION) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (open_node-&gt;get_type() == Node::UNORDERED_LIST) open_node = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;Unordered_list*&gt;(open_node)-&gt;close(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (open_node-&gt;get_type() == Node::UNORDERED_LIST) open_node = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;Unordered_list*&gt;(open_node)-&gt;close(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (open_node-&gt;get_type() == Node::PARAGRAPH) open_node = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;Paragraph*&gt;(open_node)-&gt;close(); } open_node = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;Section*&gt;(open_node)-&gt;close(); open_node = tree-&gt;add_line(); }</code> </pre><br>  Se o n√≥ aberto for uma legenda para a imagem, a linha horizontal interromper√° totalmente a gram√°tica, e uma exce√ß√£o dever√° ser lan√ßada. Se o n√≥ aberto n√£o for um link e o token de entrada "&gt;" tiver o tipo "LINK_FINISH", n√£o dever√° ser processado como o final do link, mas como texto etc. <br><br>  Portanto, a √°rvore do comutador / caso, que verifica o tipo do token recebido, deve conter outra √°rvore do comutador / caso, que verifica o tipo do n√≥ aberto.  A princ√≠pio, √© dif√≠cil lidar com essa constru√ß√£o, mas n√£o √© necess√°rio come√ßar do in√≠cio, desde a primeira condi√ß√£o.  Voc√™ pode criar um documento padr√£o marcado pelo seu idioma / contendo um script no seu idioma e implementar condi√ß√µes ao longo do documento, verificando o resultado enviando uma √°rvore pseudogr√°fica para o terminal.  Peguei o artigo anterior como um documento desse tipo, o primeiro token recebido √© o in√≠cio do t√≠tulo.  Portanto, processamos o token com o tipo TITLE_START.  A seguir, o texto do cabe√ßalho e o colchete de fechamento, processamos tokens dos tipos TEXT e SPAN_OR_IMAGE_FINISH. <br><br>  Depois disso, j√° teremos uma mini-√°rvore: <br><br><pre> <code class="plaintext hljs">&lt;article&gt; | +-&lt;section&gt; | +-&lt;h1&gt; | +-"   DOM  "</code> </pre><br>  Ao longo do caminho, voc√™ notar√° que algumas classes incluem os mesmos m√©todos com os mesmos algoritmos.  Por exemplo, as classes de par√°grafos de par√°grafos e as aspas entre aspas abrem os links da mesma maneira e adicionam texto a elas.  Nesses casos, a melhor solu√ß√£o ao refatorar √© criar uma classe com esses m√©todos e herdar os n√≥s necess√°rios.  Tentei implementar isso, mas minhas habilidades n√£o eram suficientes e fiquei confuso com a ambiguidade ao lan√ßar, por isso, apenas dou os resultados do lexer e do analisador: <br><br><div class="spoiler">  <b class="spoiler_title">O artigo em si</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">@2che &gt;&gt;442964 #[   DOM  ] , !          markdown,       ,   ‚Äî           ¬´ ¬ª,     .   ,    ,    , ,  LibreOffice Writer,  %[ ],   ‚Äî %[].     ,        ¬´parser example¬ª, ¬´html to DOM¬ª, ¬´how to parse html¬ª  .   ,              ,    ,   flex, bison, llvm  yacc. ,      ,    (gumbo, jsoup, rapidjson,  Qt  .)  ,              C++     ,              .  ,        AST (  ),    ,      ,       .  , ‚Äî    ‚Äî       ,       .           .           ,      .    ,    ,     .    HTML,      .  , ,  %[ ] ‚Äî         .      : 1. *[ ]    ‚Äî    ,    . 2. *[ ] ‚Äî        %[  ] (AST ‚Äî abstract syntax tree),  %[  ] (DOM ‚Äî document object model).    .  ,     IDE   ,     .   -    ‚Äî %[ - ()]  %[  -].    ,     .        : &gt; `[&lt;&gt; = &lt;_1&gt; &lt;_&gt; &lt;_2&gt;]       ,    . ,   ,     ¬´¬ª   ..   ?            : %[]  %[]. *[] ‚Äî ,  : &gt; `[&lt;_1&gt; = &lt;&gt; (&lt;_&gt; | &lt;_&gt;) &lt;&gt;] *[] ,    .      : &gt; `[&lt;&gt; = &lt;_1&gt; "+" &lt;_2&gt; &lt;_1&gt; = &lt;&gt; ("*" | "/") &lt;&gt;]  "+", "*", "/" ‚Äî .      ,          , ‚Äî   .       &lt;&lt;https://ru.wikipedia.org/wiki/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0_%D0%91%D1%8D%D0%BA%D1%83%D1%81%D0%B0_%E2%80%94_%D0%9D%D0%B0%D1%83%D1%80%D0%B0&gt;&gt;  &lt;&lt;https://ru.wikipedia.org/wiki/%D0%A0%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F_%D1%84%D0%BE%D1%80%D0%BC%D0%B0_%D0%91%D1%8D%D0%BA%D1%83%D1%81%D0%B0_%E2%80%94_%D0%9D%D0%B0%D1%83%D1%80%D0%B0&gt;&gt;.    ‚Äî    ,   .          ,     . ,     , ,        .     ,             ,        ,   . ,    .     HTML5   : &gt; `[stub]   ,      (   , ..  ,      ).     :  ,                , ? ,       ,  .  .  ,  disassemble(ifsteam &amp;file)   ,             process(const char &amp;c),    . ,   process   switch,              .     :    switch    ,     .  ,       ,   . ,      : , ,  ,      HTML    ( PHP,   "&lt;?‚Ä¶ ?&gt;".        case.   ?    .       (  ‚Äî  ,      ‚Äî      ).         (1, 2, 4, 8  .).        : 0001, 0010, 0100  ..,           .      ,  .   : &gt; `[enum Token_type { END = 1, TEXT = 2, OPENING_BLOCK_TAG_NAME = 4, CLOSING_BLOCK_TAG_NAME = 8, EMPTY_TAG_NAME = 16, COMMENT = 32, MACRO_TAG = 64, ATTRIBUTE_NAME = 128, UNQUOTED_ATTRIBUTE_VALUE = 256, SINGLE_QUOTED_ATTRIBUTE_VALUE = 512, DOUBLE_QUOTED_ATTRIBUTE_VALUE = 1024 };]   process: &gt; `[stub]    switch    ( ),    case       .    ,    :     ,      ,      (),   .               .       ()    ,      ¬´¬ª  ..         gedit: [&lt;https://hsto.org/webt/72/fw/tw/72fwtwt_waeie4ulzftkxua356w.png&gt;]     ,           .     disassemble: &gt; `[stub]        TEXT,       END    ( ,  ).         HTML-  ,    - PHP,         "[ "&lt;_&gt;": &lt;_&gt; ]".   : &gt; =[ `[stub]] =[ `[stub]]        ‚Äî   .     ,             -.         DOM,    .        HTML-?   ‚Äî      ,         ,     ‚Äî   ¬´Node¬ª,     ¬´Block¬ª (,     )       ¬´Root¬ª.      ,    , ,  &lt;p&gt;, &lt;li&gt;, &lt;strong&gt;  ,      .    .      ,    ‚Äî            :     ,     ,    .   ,   ,    Node,   ,    .    %[  ].  : &gt; `[stub]   !     ,      : `[| +--&lt;ROOT&gt; | +--&lt;!DOCTYPE&gt; | +--&lt;html&gt; | +--&lt;head&gt; | | | +--&lt;meta&gt; | | | +--&lt;meta&gt; | | | +--&lt;meta&gt; | | | +--&lt;meta&gt; | | | +--&lt;meta&gt; | | | +--&lt;meta&gt; | | | +--&lt;meta&gt; | | | +--&lt;meta&gt; | | | +--&lt;meta&gt; | | | +--&lt;title&gt; | | | +--&lt;link&gt; | | | +--&lt;link&gt; | | | +--&lt;COMMENT&gt; | +--&lt;body&gt; | +--&lt;header&gt; | | | +--&lt;div&gt; | +--&lt;nav&gt; | | | +--&lt;ul&gt; | | | +--&lt;li&gt; | | | | | +--&lt;a&gt; | | | +--&lt;li&gt; | | | | | +--&lt;a&gt; | | | +--&lt;li&gt; | | | +--&lt;a&gt; | +--&lt;main&gt; | | | +--&lt;MACRO&gt; | +--&lt;footer&gt; | +--&lt;hr&gt; | +--&lt;small&gt;] ,       DOM,   jQuery, Jsoup, beautifulsoup  Gumbo   ,   ,       ,     &lt;style&gt;  &lt;script&gt;,      .   ,     . . PS     &lt;&lt;https://gitlab.com/2che/nyHTML&gt;&gt;. , ,      .</code> </pre></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tokens do lexer</font></font></b> <div class="spoiler_text"><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0: ["2che": NOTIFICA√á√ÉO]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1: ["</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
": NEWLINE]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2: ["442964": CITE]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3: ["# [": TITLE_START]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4: [‚ÄúA arte de analisar ou o DOM fa√ßa voc√™ mesmo‚Äù: TEXTO]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5: ["]": SPAN_OR_IMAGE_FINISH]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6: ["</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
": DOUBLE_NEWLINE]</font></font><font></font>
7: [ ", !          markdown,       ,   ‚Äî           ¬´ ¬ª,     .   ,    ,    , ,  LibreOffice Writer,  " : TEXT ]<font></font>
8: [ "%[" : ITALIC_START ]<font></font>
9: [ " " : TEXT ]<font></font>
10: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
11: [ ",   ‚Äî " : TEXT ]<font></font>
12: [ "%[" : ITALIC_START ]<font></font>
13: [ "" : TEXT ]<font></font>
14: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
15: [ ".     ,        ¬´parser example¬ª, ¬´html to DOM¬ª, ¬´how to parse html¬ª  .   ,              ,    ,   flex, bison, llvm  yacc. ,      ,    (gumbo, jsoup, rapidjson,  Qt  .)  ,              C++     ,              .  ,        AST (  ),    ,      ,       ." : TEXT ]<font></font>
16: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
17: [ " , ‚Äî    ‚Äî       ,       .           .           ,      .    ,    ,     .    HTML,      ." : TEXT ]<font></font>
18: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
19: [ " , ,  " : TEXT ]<font></font>
20: [ "%[" : ITALIC_START ]<font></font>
21: [ " " : TEXT ]<font></font>
22: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
23: [ " ‚Äî         .      :" : TEXT ]<font></font>
24: [ "<font></font>
" : NEWLINE ]<font></font>
25: [ "1. " : ORDERED_LIST_ITEM_MARKER ]<font></font>
26: [ "*[" : BOLD_START ]<font></font>
27: [ " " : TEXT ]<font></font>
28: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
29: [ "    ‚Äî    ,    ." : TEXT ]<font></font>
30: [ "<font></font>
" : NEWLINE ]<font></font>
31: [ "2. " : ORDERED_LIST_ITEM_MARKER ]<font></font>
32: [ "*[" : BOLD_START ]<font></font>
33: [ " " : TEXT ]<font></font>
34: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
35: [ " ‚Äî        " : TEXT ]<font></font>
36: [ "%[" : ITALIC_START ]<font></font>
37: [ "  " : TEXT ]<font></font>
38: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
39: [ " (AST ‚Äî abstract syntax tree),  " : TEXT ]<font></font>
40: [ "%[" : ITALIC_START ]<font></font>
41: [ "  " : TEXT ]<font></font>
42: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
43: [ " (DOM ‚Äî document object model)." : TEXT ]<font></font>
44: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
45: [ "   .  ,     IDE   ,     .   -    ‚Äî " : TEXT ]<font></font>
46: [ "%[" : ITALIC_START ]<font></font>
47: [ " - ()" : TEXT ]<font></font>
48: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
49: [ "  " : TEXT ]<font></font>
50: [ "%[" : ITALIC_START ]<font></font>
51: [ "  -" : TEXT ]<font></font>
52: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
53: [ ".    ,     .        :" : TEXT ]<font></font>
54: [ "<font></font>
" : NEWLINE ]<font></font>
55: [ "&gt; " : QUOTE_START ]<font></font>
56: [ "`[" : MONOSPACE_START ]<font></font>
57: [ "&lt;" : TEXT ]<font></font>
58: [ "&gt;" : LINK_FINISH ]<font></font>
59: [ " = &lt;_1" : TEXT ]<font></font>
60: [ "&gt;" : LINK_FINISH ]<font></font>
61: [ " &lt;_" : TEXT ]<font></font>
62: [ "&gt;" : LINK_FINISH ]<font></font>
63: [ " &lt;_2" : TEXT ]<font></font>
64: [ "&gt;" : LINK_FINISH ]<font></font>
65: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
66: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
67: [ "      ,    . ,   ,     ¬´¬ª   .." : TEXT ]<font></font>
68: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
69: [ "  ?" : TEXT ]<font></font>
70: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
71: [ "           : " : TEXT ]<font></font>
72: [ "%[" : ITALIC_START ]<font></font>
73: [ "" : TEXT ]<font></font>
74: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
75: [ "  " : TEXT ]<font></font>
76: [ "%[" : ITALIC_START ]<font></font>
77: [ "" : TEXT ]<font></font>
78: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
79: [ ". " : TEXT ]<font></font>
80: [ "*[" : BOLD_START ]<font></font>
81: [ "" : TEXT ]<font></font>
82: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
83: [ " ‚Äî ,  :" : TEXT ]<font></font>
84: [ "<font></font>
" : NEWLINE ]<font></font>
85: [ "&gt; " : QUOTE_START ]<font></font>
86: [ "`[" : MONOSPACE_START ]<font></font>
87: [ "&lt;_1" : TEXT ]<font></font>
88: [ "&gt;" : LINK_FINISH ]<font></font>
89: [ " = &lt;" : TEXT ]<font></font>
90: [ "&gt;" : LINK_FINISH ]<font></font>
91: [ " (&lt;_" : TEXT ]<font></font>
92: [ "&gt;" : LINK_FINISH ]<font></font>
93: [ " | &lt;_" : TEXT ]<font></font>
94: [ "&gt;" : LINK_FINISH ]<font></font>
95: [ ") &lt;" : TEXT ]<font></font>
96: [ "&gt;" : LINK_FINISH ]<font></font>
97: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
98: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
99: [ "*[" : BOLD_START ]<font></font>
100: [ "" : TEXT ]<font></font>
101: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
102: [ " ,    .      :" : TEXT ]<font></font>
103: [ "<font></font>
" : NEWLINE ]<font></font>
104: [ "&gt; " : QUOTE_START ]<font></font>
105: [ "`[" : MONOSPACE_START ]<font></font>
106: [ "&lt;" : TEXT ]<font></font>
107: [ "&gt;" : LINK_FINISH ]<font></font>
108: [ " = &lt;_1" : TEXT ]<font></font>
109: [ "&gt;" : LINK_FINISH ]<font></font>
110: [ " "+" &lt;_2" : TEXT ]<font></font>
111: [ "&gt;" : LINK_FINISH ]<font></font>
112: [ "<font></font>
" : NEWLINE ]<font></font>
113: [ "&lt;_1" : TEXT ]<font></font>
114: [ "&gt;" : LINK_FINISH ]<font></font>
115: [ " = &lt;" : TEXT ]<font></font>
116: [ "&gt;" : LINK_FINISH ]<font></font>
117: [ " ("*" | "/") &lt;" : TEXT ]<font></font>
118: [ "&gt;" : LINK_FINISH ]<font></font>
119: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
120: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
121: [ " "+", "*", "/" ‚Äî ." : TEXT ]<font></font>
122: [ "<font></font>
" : NEWLINE ]<font></font>
123: [ "     ,          , ‚Äî   ." : TEXT ]<font></font>
124: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
125: [ "      " : TEXT ]<font></font>
126: [ "&lt;&lt;" : LINK_START ]<font></font>
127: [ "https://ru.wikipedia.org/wiki/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0_%D0%91%D1%8D%D0%BA%D1%83%D1%81%D0%B0_%E2%80%94_%D0%9D%D0%B0%D1%83%D1%80%D0%B0" : TEXT ]<font></font>
128: [ "&gt;" : LINK_FINISH ]<font></font>
129: [ "" : TEXT ]<font></font>
130: [ "&gt;" : LINK_FINISH ]<font></font>
131: [ "  " : TEXT ]<font></font>
132: [ "&lt;&lt;" : LINK_START ]<font></font>
133: [ "https://ru.wikipedia.org/wiki/%D0%A0%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F_%D1%84%D0%BE%D1%80%D0%BC%D0%B0_%D0%91%D1%8D%D0%BA%D1%83%D1%81%D0%B0_%E2%80%94_%D0%9D%D0%B0%D1%83%D1%80%D0%B0" : TEXT ]<font></font>
134: [ "&gt;" : LINK_FINISH ]<font></font>
135: [ "" : TEXT ]<font></font>
136: [ "&gt;" : LINK_FINISH ]<font></font>
137: [ ".    ‚Äî    ,   .          ,     . ,     , ,        .     ,             ,        ,   . ,    .     HTML5   :" : TEXT ]<font></font>
138: [ "<font></font>
" : NEWLINE ]<font></font>
139: [ "&gt; " : QUOTE_START ]<font></font>
140: [ "`[" : MONOSPACE_START ]<font></font>
141: [ "stub" : TEXT ]<font></font>
142: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
143: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
144: [ "  ,      (   , ..  ,      ).     :  ,                , ? ,       ,  .  .  ,  disassemble(ifsteam &amp;file)   ,             process(const char &amp;c),    . ,   process   switch,              .     :    switch    ,     .  ,       ,   . ,      : , ,  ,      HTML    ( PHP,   "&lt;?‚Ä¶ ?" : TEXT ]<font></font>
145: [ "&gt;" : LINK_FINISH ]<font></font>
146: [ "".        case.   ?    .       (  ‚Äî  ,      ‚Äî      ).         (1, 2, 4, 8  .).        : 0001, 0010, 0100  ..,           .      ,  .   :" : TEXT ]<font></font>
147: [ "<font></font>
" : NEWLINE ]<font></font>
148: [ "&gt; " : QUOTE_START ]<font></font>
149: [ "`[" : MONOSPACE_START ]<font></font>
150: [ "enum Token_type {" : TEXT ]<font></font>
151: [ "<font></font>
" : NEWLINE ]<font></font>
152: [ " END = 1, TEXT = 2," : TEXT ]<font></font>
153: [ "<font></font>
" : NEWLINE ]<font></font>
154: [ " OPENING_BLOCK_TAG_NAME = 4, CLOSING_BLOCK_TAG_NAME = 8, EMPTY_TAG_NAME = 16, COMMENT = 32, MACRO_TAG = 64," : TEXT ]<font></font>
155: [ "<font></font>
" : NEWLINE ]<font></font>
156: [ " ATTRIBUTE_NAME = 128, UNQUOTED_ATTRIBUTE_VALUE = 256, SINGLE_QUOTED_ATTRIBUTE_VALUE = 512, DOUBLE_QUOTED_ATTRIBUTE_VALUE = 1024" : TEXT ]<font></font>
157: [ "<font></font>
" : NEWLINE ]<font></font>
158: [ "};" : TEXT ]<font></font>
159: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
160: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
161: [ "  process:" : TEXT ]<font></font>
162: [ "<font></font>
" : NEWLINE ]<font></font>
163: [ "&gt; " : QUOTE_START ]<font></font>
164: [ "`[" : MONOSPACE_START ]<font></font>
165: [ "stub" : TEXT ]<font></font>
166: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
167: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
168: [ "   switch    ( ),    case       .    ,    :     ,      ,      (),   .               .       ()    ,      ¬´¬ª  ..         gedit:" : TEXT ]<font></font>
169: [ "<font></font>
" : NEWLINE ]<font></font>
170: [ "[&lt;" : IMAGE_START ]<font></font>
171: [ "https://hsto.org/webt/72/fw/tw/72fwtwt_waeie4ulzftkxua356w.png" : TEXT ]<font></font>
172: [ "&gt;" : LINK_FINISH ]<font></font>
173: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
174: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
175: [ "    ,           .     disassemble:" : TEXT ]<font></font>
176: [ "<font></font>
" : NEWLINE ]<font></font>
177: [ "&gt; " : QUOTE_START ]<font></font>
178: [ "`[" : MONOSPACE_START ]<font></font>
179: [ "stub" : TEXT ]<font></font>
180: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
181: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
182: [ "       TEXT,       END    ( ,  )." : TEXT ]<font></font>
183: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
184: [ "        HTML-  ,    - PHP,         "[ "&lt;_" : TEXT ]<font></font>
185: [ "&gt;" : LINK_FINISH ]<font></font>
186: [ "": &lt;_" : TEXT ]<font></font>
187: [ "&gt;" : LINK_FINISH ]<font></font>
188: [ " " : TEXT ]<font></font>
189: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
190: [ "".   :" : TEXT ]<font></font>
191: [ "<font></font>
" : NEWLINE ]<font></font>
192: [ "&gt; " : QUOTE_START ]<font></font>
193: [ "=[" : MARKED_START ]<font></font>
194: [ " " : TEXT ]<font></font>
195: [ "`[" : MONOSPACE_START ]<font></font>
196: [ "stub" : TEXT ]<font></font>
197: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
198: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
199: [ "<font></font>
" : NEWLINE ]<font></font>
200: [ "=[" : MARKED_START ]<font></font>
201: [ " " : TEXT ]<font></font>
202: [ "`[" : MONOSPACE_START ]<font></font>
203: [ "stub" : TEXT ]<font></font>
204: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
205: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
206: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
207: [ "       ‚Äî   .     ,             -.         DOM,    ." : TEXT ]<font></font>
208: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
209: [ "       HTML-?" : TEXT ]<font></font>
210: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
211: [ "  ‚Äî      ,         ,     ‚Äî   ¬´Node¬ª,     ¬´Block¬ª (,     )       ¬´Root¬ª.      ,    , ,  &lt;p" : TEXT ]<font></font>
212: [ "&gt;" : LINK_FINISH ]<font></font>
213: [ ", &lt;li" : TEXT ]<font></font>
214: [ "&gt;" : LINK_FINISH ]<font></font>
215: [ ", &lt;strong" : TEXT ]<font></font>
216: [ "&gt;" : LINK_FINISH ]<font></font>
217: [ "  ,      .    .      ,    ‚Äî            :     ,     ,    .   ,   ,    Node,   ,    .    " : TEXT ]<font></font>
218: [ "%[" : ITALIC_START ]<font></font>
219: [ "  " : TEXT ]<font></font>
220: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
221: [ "." : TEXT ]<font></font>
222: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
223: [ " :" : TEXT ]https://gitlab.com/2che/markedit<font></font>
224: [ "<font></font>
" : NEWLINE ]<font></font>
225: [ "&gt; " : QUOTE_START ]<font></font>
226: [ "`[" : MONOSPACE_START ]<font></font>
227: [ "stub" : TEXT ]<font></font>
228: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
229: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
230: [ "  !     ,      :" : TEXT ]<font></font>
231: [ "<font></font>
" : NEWLINE ]<font></font>
232: [ "`[" : MONOSPACE_START ]<font></font>
233: [ "| " : TEXT ]<font></font>
234: [ "<font></font>
" : NEWLINE ]<font></font>
235: [ "+--&lt;ROOT" : TEXT ]<font></font>
236: [ "&gt;" : LINK_FINISH ]<font></font>
237: [ "<font></font>
" : NEWLINE ]<font></font>
238: [ " | " : TEXT ]<font></font>
239: [ "<font></font>
" : NEWLINE ]<font></font>
240: [ " +--&lt;!DOCTYPE" : TEXT ]<font></font>
241: [ "&gt;" : LINK_FINISH ]<font></font>
242: [ "<font></font>
" : NEWLINE ]<font></font>
243: [ " | " : TEXT ]<font></font>
244: [ "<font></font>
" : NEWLINE ]<font></font>
245: [ " +--&lt;html" : TEXT ]<font></font>
246: [ "&gt;" : LINK_FINISH ]<font></font>
247: [ "<font></font>
" : NEWLINE ]<font></font>
248: [ " | " : TEXT ]<font></font>
249: [ "<font></font>
" : NEWLINE ]<font></font>
250: [ " +--&lt;head" : TEXT ]<font></font>
251: [ "&gt;" : LINK_FINISH ]<font></font>
252: [ "<font></font>
" : NEWLINE ]<font></font>
253: [ " | | " : TEXT ]<font></font>
254: [ "<font></font>
" : NEWLINE ]<font></font>
255: [ " | +--&lt;meta" : TEXT ]<font></font>
256: [ "&gt;" : LINK_FINISH ]<font></font>
257: [ "<font></font>
" : NEWLINE ]<font></font>
258: [ " | | " : TEXT ]<font></font>
259: [ "<font></font>
" : NEWLINE ]<font></font>
260: [ " | +--&lt;meta" : TEXT ]<font></font>
261: [ "&gt;" : LINK_FINISH ]<font></font>
262: [ "<font></font>
" : NEWLINE ]<font></font>
263: [ " | | " : TEXT ]<font></font>
264: [ "<font></font>
" : NEWLINE ]<font></font>
265: [ " | +--&lt;meta" : TEXT ]<font></font>
266: [ "&gt;" : LINK_FINISH ]<font></font>
267: [ "<font></font>
" : NEWLINE ]<font></font>
268: [ " | | " : TEXT ]<font></font>
269: [ "<font></font>
" : NEWLINE ]<font></font>
270: [ " | +--&lt;meta" : TEXT ]<font></font>
271: [ "&gt;" : LINK_FINISH ]<font></font>
272: [ "<font></font>
" : NEWLINE ]<font></font>
273: [ " | | " : TEXT ]<font></font>
274: [ "<font></font>
" : NEWLINE ]<font></font>
275: [ " | +--&lt;meta" : TEXT ]<font></font>
276: [ "&gt;" : LINK_FINISH ]<font></font>
277: [ "<font></font>
" : NEWLINE ]<font></font>
278: [ " | | " : TEXT ]<font></font>
279: [ "<font></font>
" : NEWLINE ]<font></font>
280: [ " | +--&lt;meta" : TEXT ]<font></font>
281: [ "&gt;" : LINK_FINISH ]<font></font>
282: [ "<font></font>
" : NEWLINE ]<font></font>
283: [ " | | " : TEXT ]<font></font>
284: [ "<font></font>
" : NEWLINE ]<font></font>
285: [ " | +--&lt;meta" : TEXT ]<font></font>
286: [ "&gt;" : LINK_FINISH ]<font></font>
287: [ "<font></font>
" : NEWLINE ]<font></font>
288: [ " | | " : TEXT ]<font></font>
289: [ "<font></font>
" : NEWLINE ]<font></font>
290: [ " | +--&lt;meta" : TEXT ]<font></font>
291: [ "&gt;" : LINK_FINISH ]<font></font>
292: [ "<font></font>
" : NEWLINE ]<font></font>
293: [ " | | " : TEXT ]<font></font>
294: [ "<font></font>
" : NEWLINE ]<font></font>
295: [ " | +--&lt;meta" : TEXT ]<font></font>
296: [ "&gt;" : LINK_FINISH ]<font></font>
297: [ "<font></font>
" : NEWLINE ]<font></font>
298: [ " | | " : TEXT ]<font></font>
299: [ "<font></font>
" : NEWLINE ]<font></font>
300: [ " | +--&lt;title" : TEXT ]<font></font>
301: [ "&gt;" : LINK_FINISH ]<font></font>
302: [ "<font></font>
" : NEWLINE ]<font></font>
303: [ " | | " : TEXT ]<font></font>
304: [ "<font></font>
" : NEWLINE ]<font></font>
305: [ " | +--&lt;link" : TEXT ]<font></font>
306: [ "&gt;" : LINK_FINISH ]<font></font>
307: [ "<font></font>
" : NEWLINE ]<font></font>
308: [ " | | " : TEXT ]<font></font>
309: [ "<font></font>
" : NEWLINE ]<font></font>
310: [ " | +--&lt;link" : TEXT ]<font></font>
311: [ "&gt;" : LINK_FINISH ]<font></font>
312: [ "<font></font>
" : NEWLINE ]<font></font>
313: [ " | | " : TEXT ]<font></font>
314: [ "<font></font>
" : NEWLINE ]<font></font>
315: [ " | +--&lt;COMMENT" : TEXT ]<font></font>
316: [ "&gt;" : LINK_FINISH ]<font></font>
317: [ "<font></font>
" : NEWLINE ]<font></font>
318: [ " | " : TEXT ]<font></font>
319: [ "<font></font>
" : NEWLINE ]<font></font>
320: [ " +--&lt;body" : TEXT ]<font></font>
321: [ "&gt;" : LINK_FINISH ]<font></font>
322: [ "<font></font>
" : NEWLINE ]<font></font>
323: [ " | " : TEXT ]<font></font>
324: [ "<font></font>
" : NEWLINE ]<font></font>
325: [ " +--&lt;header" : TEXT ]<font></font>
326: [ "&gt;" : LINK_FINISH ]<font></font>
327: [ "<font></font>
" : NEWLINE ]<font></font>
328: [ " | | " : TEXT ]<font></font>
329: [ "<font></font>
" : NEWLINE ]<font></font>
330: [ " | +--&lt;div" : TEXT ]<font></font>
331: [ "&gt;" : LINK_FINISH ]<font></font>
332: [ "<font></font>
" : NEWLINE ]<font></font>
333: [ " | " : TEXT ]<font></font>
334: [ "<font></font>
" : NEWLINE ]<font></font>
335: [ " +--&lt;nav" : TEXT ]<font></font>
336: [ "&gt;" : LINK_FINISH ]<font></font>
337: [ "<font></font>
" : NEWLINE ]<font></font>
338: [ " | | " : TEXT ]<font></font>
339: [ "<font></font>
" : NEWLINE ]<font></font>
340: [ " | +--&lt;ul" : TEXT ]<font></font>
341: [ "&gt;" : LINK_FINISH ]<font></font>
342: [ "<font></font>
" : NEWLINE ]<font></font>
343: [ " | | " : TEXT ]<font></font>
344: [ "<font></font>
" : NEWLINE ]<font></font>
345: [ " | +--&lt;li" : TEXT ]<font></font>
346: [ "&gt;" : LINK_FINISH ]<font></font>
347: [ "<font></font>
" : NEWLINE ]<font></font>
348: [ " | | | " : TEXT ]<font></font>
349: [ "<font></font>
" : NEWLINE ]<font></font>
350: [ " | | +--&lt;a" : TEXT ]<font></font>
351: [ "&gt;" : LINK_FINISH ]<font></font>
352: [ "<font></font>
" : NEWLINE ]<font></font>
353: [ " | | " : TEXT ]<font></font>
354: [ "<font></font>
" : NEWLINE ]<font></font>
355: [ " | +--&lt;li" : TEXT ]<font></font>
356: [ "&gt;" : LINK_FINISH ]<font></font>
357: [ "<font></font>
" : NEWLINE ]<font></font>
358: [ " | | | " : TEXT ]<font></font>
359: [ "<font></font>
" : NEWLINE ]<font></font>
360: [ " | | +--&lt;a" : TEXT ]<font></font>
361: [ "&gt;" : LINK_FINISH ]<font></font>
362: [ "<font></font>
" : NEWLINE ]<font></font>
363: [ " | | " : TEXT ]<font></font>
364: [ "<font></font>
" : NEWLINE ]<font></font>
365: [ " | +--&lt;li" : TEXT ]<font></font>
366: [ "&gt;" : LINK_FINISH ]<font></font>
367: [ "<font></font>
" : NEWLINE ]<font></font>
368: [ " | | " : TEXT ]<font></font>
369: [ "<font></font>
" : NEWLINE ]<font></font>
370: [ " | +--&lt;a" : TEXT ]<font></font>
371: [ "&gt;" : LINK_FINISH ]<font></font>
372: [ "<font></font>
" : NEWLINE ]<font></font>
373: [ " | " : TEXT ]<font></font>
374: [ "<font></font>
" : NEWLINE ]<font></font>
375: [ " +--&lt;main" : TEXT ]<font></font>
376: [ "&gt;" : LINK_FINISH ]<font></font>
377: [ "<font></font>
" : NEWLINE ]<font></font>
378: [ " | | " : TEXT ]<font></font>
379: [ "<font></font>
" : NEWLINE ]<font></font>
380: [ " | +--&lt;MACRO" : TEXT ]<font></font>
381: [ "&gt;" : LINK_FINISH ]<font></font>
382: [ "<font></font>
" : NEWLINE ]<font></font>
383: [ " | " : TEXT ]<font></font>
384: [ "<font></font>
" : NEWLINE ]<font></font>
385: [ " +--&lt;footer" : TEXT ]<font></font>
386: [ "&gt;" : LINK_FINISH ]<font></font>
387: [ "<font></font>
" : NEWLINE ]<font></font>
388: [ " | " : TEXT ]<font></font>
389: [ "<font></font>
" : NEWLINE ]<font></font>
390: [ " +--&lt;hr" : TEXT ]<font></font>
391: [ "&gt;" : LINK_FINISH ]<font></font>
392: [ "<font></font>
" : NEWLINE ]<font></font>
393: [ " | " : TEXT ]<font></font>
394: [ "<font></font>
" : NEWLINE ]<font></font>
395: [ " +--&lt;small" : TEXT ]<font></font>
396: [ "&gt;" : LINK_FINISH ]<font></font>
397: [ "]" : SPAN_OR_IMAGE_FINISH ]<font></font>
398: [ "<font></font>
" : NEWLINE ]<font></font>
399: [ " " : TEXT ]<font></font>
400: [ "<font></font>
" : NEWLINE ]<font></font>
401: [ ",       DOM,   jQuery, Jsoup, beautifulsoup  Gumbo   ,   ,       ,     &lt;style" : TEXT ]<font></font>
402: [ "&gt;" : LINK_FINISH ]<font></font>
403: [ "  &lt;script" : TEXT ]<font></font>
404: [ "&gt;" : LINK_FINISH ]<font></font>
405: [ ",      .   ,     . ." : TEXT ]<font></font>
406: [ "<font></font>
<font></font>
" : DOUBLE_NEWLINE ]<font></font>
407: [ "PS     " : TEXT ]<font></font>
408: [ "&lt;&lt;" : LINK_START ]<font></font>
409: [ "https://gitlab.com/2che/nyHTML" : TEXT ]<font></font>
410: [ "&gt;" : LINK_FINISH ]<font></font>
411: [ "" : TEXT ]<font></font>
412: [ "&gt;" : LINK_FINISH ]<font></font>
413: [ ". , ,      ." : TEXT ]<font></font>
414: [ "<font></font>
" : NEWLINE ]<font></font>
415: [ "" : END ]<font></font>
</pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Årvore de sintaxe</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">&lt;pre&gt;&lt;article&gt; | +-&lt;section&gt; | +-&lt;p&gt; | | | +-@2che | | | +-"\n" | +-&gt;&gt;442964 | +-&lt;h1&gt; | | | +-"   DOM  " | +-&lt;p&gt; | | | +-", !       ..." | | | +-&lt;i&gt; | | | | | +-" " | | | +-",   ‚Äî " | | | +-&lt;i&gt; | | | | | +-"" | | | +-".     ,   ..." | +-&lt;p&gt; | | | +-" , ‚Äî    ‚Äî   ..." | +-&lt;p&gt; | | | +-" , ,  " | | | +-&lt;i&gt; | | | | | +-" " | | | +-" ‚Äî        ..." | | | +-"\n" | | | +-&lt;b&gt; | | | | | +-" " | | | +-"    ‚Äî    ,  ..." | | | +-"\n" | | | +-&lt;b&gt; | | | | | +-" " | | | +-" ‚Äî        " | | | +-&lt;i&gt; | | | | | +-"  " | | | +-" (AST ‚Äî abstract syntax tree),  " | | | +-&lt;i&gt; | | | | | +-"  " | | | +-" (DOM ‚Äî document object model)." | +-&lt;p&gt; | | | +-"   .  ,     ..." | | | +-&lt;i&gt; | | | | | +-" - ()" | | | +-"  " | | | +-&lt;i&gt; | | | | | +-"  -" | | | +-".    ,     .  ..." | | | +-"\n" | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"&lt;" | | | +-"&gt;" | | | +-" = &lt;_1" | | | +-"&gt;" | | | +-" &lt;_" | | | +-"&gt;" | | | +-" &lt;_2" | | | +-"&gt;" | +-&lt;p&gt; | | | +-"      , ..." | +-&lt;p&gt; | | | +-"  ?" | +-&lt;p&gt; | | | +-"      ..." | | | +-&lt;i&gt; | | | | | +-"" | | | +-"  " | | | +-&lt;i&gt; | | | | | +-"" | | | +-". " | | | +-&lt;b&gt; | | | | | +-"" | | | +-" ‚Äî ,  :" | | | +-"\n" | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"&lt;_1" | | | +-"&gt;" | | | +-" = &lt;" | | | +-"&gt;" | | | +-" (&lt;_" | | | +-"&gt;" | | | +-" | &lt;_" | | | +-"&gt;" | | | +-") &lt;" | | | +-"&gt;" | +-&lt;p&gt; | | | +-&lt;b&gt; | | | | | +-"" | | | +-" ,    .   ..." | | | +-"\n" | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"&lt;" | | | +-"&gt;" | | | +-" = &lt;_1" | | | +-"&gt;" | | | +-" "+" &lt;_2" | | | +-"&gt;" | | | +-"\n" | | | +-"&lt;_1" | | | +-"&gt;" | | | +-" = &lt;" | | | +-"&gt;" | | | +-" ("*" | "/") &lt;" | | | +-"&gt;" | +-&lt;p&gt; | | | +-" "+", "*", "/" ‚Äî ." | | | +-"\n" | | | +-"     ,  ..." | +-&lt;p&gt; | | | +-"      " | | | +-&lt;a&gt; | | | | | +-"" | | | +-"  " | | | +-&lt;a&gt; | | | | | +-"" | | | +-".    ‚Äî    ..." | | | +-"\n" | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"stub" | +-&lt;p&gt; | | | +-"  ,     ..." | | | +-"&gt;" | | | +-"".        case.   ..." | | | +-"\n" | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"enum Token_type {" | | | +-"\n" | | | +-" END = 1, TEXT = 2," | | | +-"\n" | | | +-" OPENING_BLOCK_TAG_NAME = 4, CLOSING_BLOCK_TAG_NAME = 8, EMPTY_TAG_NAME = 16, COMMENT = 32, MACRO..." | | | +-"\n" | | | +-" ATTRIBUTE_NAME = 128, UNQUOTED_ATTRIBUTE_VALUE = 256, SINGLE_QUOTED_ATTRIBUTE_VALUE = 512, DOUBL..." | | | +-"\n" | | | +-"};" | +-&lt;p&gt; | | | +-"  process:" | | | +-"\n" | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"stub" | +-&lt;p&gt; | | | +-"   switch    (  ..." | | | +-"\n" | +-&lt;p&gt; | | | +-&lt;img /&gt; | +-&lt;p&gt; | | | +-"    ,   ..." | | | +-"\n" | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"stub" | +-&lt;p&gt; | | | +-"      ..." | +-&lt;p&gt; | | | +-"        HTML- ..." | | | +-"&gt;" | | | +-"": &lt;_" | | | +-"&gt;" | | | +-" " | | | +-"]" | | | +-"".   :" | | | +-"\n" | +-&lt;blockquote&gt; | | | +-&lt;mark&gt; | | | | | +-" " | | | | | +-&lt;pre&gt; | | | | | +-"stub" | | | +-"\n" | | | +-&lt;mark&gt; | | | +-" " | | | +-&lt;pre&gt; | | | +-"stub" | +-&lt;p&gt; | | | +-"       ‚Äî  ..." | +-&lt;p&gt; | | | +-"       HTML-..." | +-&lt;p&gt; | | | +-"  ‚Äî      ,  ..." | | | +-"&gt;" | | | +-", &lt;li" | | | +-"&gt;" | | | +-", &lt;strong" | | | +-"&gt;" | | | +-"  ,      .  ..." | | | +-&lt;i&gt; | | | | | +-"  " | | | +-"." | +-&lt;p&gt; | | | +-" :" | | | +-"\n" | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"stub" | +-&lt;p&gt; | | | +-"  !     ,   ..." | | | +-"\n" | | | +-&lt;pre&gt; | | | | | +-"| " | | | | | +-"\n" | | | | | +-"+--&lt;ROOT" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | " | | | | | +-"\n" | | | | | +-" +--&lt;!DOCTYPE" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | " | | | | | +-"\n" | | | | | +-" +--&lt;html" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | " | | | | | +-"\n" | | | | | +-" +--&lt;head" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;meta" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;meta" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;meta" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;meta" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;meta" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;meta" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;meta" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;meta" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;meta" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;title" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;link" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;link" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;COMMENT" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | " | | | | | +-"\n" | | | | | +-" +--&lt;body" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | " | | | | | +-"\n" | | | | | +-" +--&lt;header" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;div" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | " | | | | | +-"\n" | | | | | +-" +--&lt;nav" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;ul" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;li" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | | " | | | | | +-"\n" | | | | | +-" | | +--&lt;a" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;li" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | | " | | | | | +-"\n" | | | | | +-" | | +--&lt;a" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;li" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;a" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | " | | | | | +-"\n" | | | | | +-" +--&lt;main" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | | " | | | | | +-"\n" | | | | | +-" | +--&lt;MACRO" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | " | | | | | +-"\n" | | | | | +-" +--&lt;footer" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | " | | | | | +-"\n" | | | | | +-" +--&lt;hr" | | | | | +-"&gt;" | | | | | +-"\n" | | | | | +-" | " | | | | | +-"\n" | | | | | +-" +--&lt;small" | | | | | +-"&gt;" | | | +-"\n" | | | +-" " | | | +-"\n" | | | +-",       ..." | | | +-"&gt;" | | | +-"  &lt;script" | | | +-"&gt;" | | | +-",      .    ..." | +-&lt;p&gt; | +-"PS     " | +-&lt;a&gt; | | | +-"" | +-". , ,     ..." | +-"\n" &lt;/pre&gt;</code> </pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tudo est√° √≥timo, mas h√° muitos n√≥s de texto entrando em cadeia um ap√≥s o outro. </font><font style="vertical-align: inherit;">Al√©m disso, gostaria que as aspas seguidas fossem combinadas em uma. </font><font style="vertical-align: inherit;">Para fazer isso, precisamos percorrer a √°rvore novamente e executar </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">concatena√ß√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , isto √©, a ades√£o de elementos homog√™neos entre si. </font><font style="vertical-align: inherit;">N√£o vou explicar os detalhes desse processo, anexarei a fonte, mas, por enquanto, veja como nossos</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Årvore ap√≥s concatena√ß√£o:</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">&lt;pre&gt;&lt;article&gt; | +-&lt;section&gt; | +-&lt;p&gt; | | | +-@2che | | | +-"\n" | +-&gt;&gt;442964 | +-&lt;h1&gt; | | | +-"   DOM  " | +-&lt;p&gt; | | | +-", !       ..." | | | +-&lt;i&gt; | | | | | +-" " | | | +-",   ‚Äî " | | | +-&lt;i&gt; | | | | | +-"" | | | +-".     ,   ..." | +-&lt;p&gt; | | | +-" , ‚Äî    ‚Äî   ..." | +-&lt;p&gt; | | | +-" , ,  " | | | +-&lt;i&gt; | | | | | +-" " | | | +-" ‚Äî        ..." | | | +-&lt;b&gt; | | | | | +-" " | | | +-"    ‚Äî    ,  ..." | | | +-&lt;b&gt; | | | | | +-" " | | | +-" ‚Äî        " | | | +-&lt;i&gt; | | | | | +-"  " | | | +-" (AST ‚Äî abstract syntax tree),  " | | | +-&lt;i&gt; | | | | | +-"  " | | | +-" (DOM ‚Äî document object model)." | +-&lt;p&gt; | | | +-"   .  ,     ..." | | | +-&lt;i&gt; | | | | | +-" - ()" | | | +-"  " | | | +-&lt;i&gt; | | | | | +-"  -" | | | +-".    ,     .  ..." | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"&lt;&gt; = &lt;_1&gt; &lt;_&gt; &lt;_2&gt;" | +-&lt;p&gt; | | | +-"      , ..." | +-&lt;p&gt; | | | +-"  ?" | +-&lt;p&gt; | | | +-"      ..." | | | +-&lt;i&gt; | | | | | +-"" | | | +-"  " | | | +-&lt;i&gt; | | | | | +-"" | | | +-". " | | | +-&lt;b&gt; | | | | | +-"" | | | +-" ‚Äî ,  :\n" | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"&lt;_1&gt; = &lt;&gt; (&lt;_&gt; | &lt;_&gt;) &lt; ..." | +-&lt;p&gt; | | | +-&lt;b&gt; | | | | | +-"" | | | +-" ,    .   ..." | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"&lt;&gt; = &lt;_1&gt; "+" &lt;_2&gt;\n&lt;_1&gt; = &lt;..." | +-&lt;p&gt; | | | +-" "+", "*", "/" ‚Äî .\n    ..." | +-&lt;p&gt; | | | +-"      " | | | +-&lt;a&gt; | | | | | +-"" | | | +-"  " | | | +-&lt;a&gt; | | | | | +-"" | | | +-".    ‚Äî    ..." | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"stub" | +-&lt;p&gt; | | | +-"  ,     ..." | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"enum Token_type {\n END = 1, TEXT = 2,\n OPENING_BLOCK_TAG_NAME = 4, CLOSING_BLOCK_TAG_NAME = ..." | +-&lt;p&gt; | | | +-"  process:\n" | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"stub" | +-&lt;p&gt; | | | +-"   switch    (  ..." | +-&lt;p&gt; | | | +-&lt;img /&gt; | +-&lt;p&gt; | | | +-"    ,   ..." | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"stub" | +-&lt;p&gt; | | | +-"      ..." | +-&lt;p&gt; | | | +-"        HTML- ..." | +-&lt;blockquote&gt; | | | +-&lt;mark&gt; | | | | | +-" " | | | | | +-&lt;pre&gt; | | | | | +-"stub" | | | +-"\n" | | | +-&lt;mark&gt; | | | +-" " | | | +-&lt;pre&gt; | | | +-"stub" | +-&lt;p&gt; | | | +-"       ‚Äî  ..." | +-&lt;p&gt; | | | +-"       HTML-..." | +-&lt;p&gt; | | | +-"  ‚Äî      ,  ..." | | | +-&lt;i&gt; | | | | | +-"  " | | | +-"." | +-&lt;p&gt; | | | +-" :\n" | +-&lt;blockquote&gt; | | | +-&lt;pre&gt; | | | +-"stub" | +-&lt;p&gt; | | | +-"  !     ,   ..." | | | +-&lt;pre&gt; | | | | | +-"| \n+--&lt;ROOT&gt;\n | \n +--&lt;!DOCTYPE&gt;\n | \n +--&lt;html&gt;\n | \n +--&lt;head&gt;\n | | \n | +--&lt;..." | | | +-"\n \n,     ..." | +-&lt;p&gt; | +-"PS     " | +-&lt;a&gt; | | | +-"" | +-". , ,     ..." &lt;/pre&gt;</code> </pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O √∫ltimo passo que resta √© representar essa √°rvore em um formul√°rio HTML. Tudo √© simples aqui: criamos uma linha no m√©todo raiz com o in√≠cio da marca√ß√£o principal (abrindo elementos html e body, um bloco de cabe√ßalho) e come√ßamos a anexar as linhas retornadas de elementos filhos semelhantes. Aqui estamos lidando com uma descida recursiva novamente: cada classe, quando o m√©todo virtual to_HTML () √© chamado, cria uma linha, coloca sua marca√ß√£o principal nela, depois chama o mesmo m√©todo em cada um de seus descendentes, concatena as linhas, completa a marca√ß√£o prim√°ria e a retorna ao pai que chama. Aqui, por exemplo, se parece com este m√©todo para a classe Inline (combinando elementos inline formatados):</font></font><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">string</span></span> Inline::to_HTML (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> &amp;level) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> HTML; <span class="hljs-comment"><span class="hljs-comment">// ******    -   ****** switch (type) { case BOLD: { HTML.append("&lt;b&gt;"); break; } case ITALIC: { HTML.append("&lt;i&gt;"); break; } case UNDERLINED: { HTML.append("&lt;ins&gt;"); break; } case OVERLINED: { HTML.append("&lt;span class=\"overlined\"&gt;"); break; } case THROWLINED: { HTML.append("&lt;del&gt;"); break; } case SUBSCRIPT: { HTML.append("&lt;sub&gt;"); break; } case SUPERSCRIPT: { HTML.append("&lt;sup&gt;"); break; } case MARKED: { HTML.append("&lt;mark&gt;"); break; } case MONOSPACE: { HTML.append("&lt;pre&gt;"); break; } default: throw string("invalid inline type: " + type_str() + "!"); } // *** *** *** *** // ******   -    ****** for (unsigned long i(0); i &lt; children_count; i++) HTML.append(children[i]-&gt;to_HTML(level+1)); // *** *** *** *** // ******    -   ****** switch (type) { case BOLD: { HTML.append("&lt;/b&gt;"); break; } case ITALIC: { HTML.append("&lt;/i&gt;"); break; } case UNDERLINED: { HTML.append("&lt;/ins&gt;"); break; } case OVERLINED: { HTML.append("&lt;/span&gt;"); break; } case THROWLINED: { HTML.append("&lt;/del&gt;"); break; } case SUBSCRIPT: { HTML.append("&lt;/sub&gt;"); break; } case SUPERSCRIPT: { HTML.append("&lt;/sup&gt;"); break; } case MARKED: { HTML.append("&lt;/mark&gt;"); break; } case MONOSPACE: { HTML.append("&lt;/pre&gt;"); break; } default: throw string("invalid inline type: " + type_str() + "!"); } // *** *** *** *** return HTML; }</span></span></code> </pre><br>  Isso √© tudo.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espero que agora, depois de ler os dois artigos, voc√™ possa implementar facilmente um tradutor para sua marca√ß√£o ou linguagem de programa√ß√£o. </font><font style="vertical-align: inherit;">Se voc√™ tiver alguma d√∫vida, pergunte nos coment√°rios. </font><font style="vertical-align: inherit;">E aqui est√£o as </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fontes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sucessos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS Eu esqueci de mencionar </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blindagem</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ele √© implementado simplesmente: se o pr√≥ximo caractere no procedimento de an√°lise lexical for a barra invertida ("\"), ele ser√° ignorado e o pr√≥ximo caractere ser√° processado, mas, al√©m disso, o valor booleano true ser√° enviado √† fun√ß√£o de processamento de caracteres, dando o comando para escapar. </font><font style="vertical-align: inherit;">Ent√£o, se esse s√≠mbolo, por exemplo, for "[", seu significado especial ser√° ignorado e simplesmente unir√° o token em constru√ß√£o como texto. </font><font style="vertical-align: inherit;">Caso contr√°rio, a fun√ß√£o retornar√° false e o caractere ser√° processado como de costume.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt444876/">https://habr.com/ru/post/pt444876/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt444866/index.html">Meu caminho do Python para o Go - compartilhando dicas e recursos</a></li>
<li><a href="../pt444868/index.html">Como criar uma paleta confort√°vel para todos</a></li>
<li><a href="../pt444870/index.html">Estrutura de neg√≥cios corporativos 2019</a></li>
<li><a href="../pt444872/index.html">Como foi a abertura do Zabbix na R√∫ssia?</a></li>
<li><a href="../pt444874/index.html">Tecido Hyperledger para manequins</a></li>
<li><a href="../pt444878/index.html">A SpaceX anunciou um redesenho dos sat√©lites Starlink para que eles queimem completamente na atmosfera quando ca√≠rem</a></li>
<li><a href="../pt444880/index.html">Uma interpreta√ß√£o multi-mundo da mec√¢nica qu√¢ntica</a></li>
<li><a href="../pt444882/index.html">Os bancos come√ßaram a bloquear contas freelancers</a></li>
<li><a href="../pt444884/index.html">Groovy deixou C√©dric Champeau</a></li>
<li><a href="../pt444886/index.html">Aplica√ß√µes de engenharia reversa ap√≥s ofusca√ß√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>