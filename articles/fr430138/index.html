<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸš¶ğŸ½ ğŸ§™ğŸ¿ ğŸ¤´ Optimiser un robot de trading: un algorithme gÃ©nÃ©tique ğŸ˜¡ ğŸ‘‡ğŸ» ğŸ‘¨ğŸ¾â€ğŸ¤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans un article prÃ©cÃ©dent, j'ai commencÃ© Ã  comparer les mÃ©thodes d'optimisation paramÃ©trique, c'est-Ã -dire la sÃ©lection des paramÃ¨tres, l'Ã©valuation d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Optimiser un robot de trading: un algorithme gÃ©nÃ©tique</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430138/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/bz/_0/v9/bz_0v9pphiv-9bi1gtg5b65riy8.png"></a> <br><br>  Dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article prÃ©cÃ©dent,</a> j'ai commencÃ© Ã  comparer les mÃ©thodes d'optimisation paramÃ©trique, c'est-Ã -dire la sÃ©lection des paramÃ¨tres, l'Ã©valuation de la rentabilitÃ© du trading d'un robot lors du <abbr title="test de robot de trading sur des donnÃ©es historiques">backtest suivant</abbr> .  Il s'est avÃ©rÃ© que la mÃ©thode banale de Monte Carlo - la gÃ©nÃ©ration de combinaisons alÃ©atoires non corrÃ©lÃ©es de paramÃ¨tres de robot - fonctionne assez bien.  Maintenant, je veux tester un algorithme populaire, dont un dans la communautÃ© des traders de programmation: l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">algorithme d'optimisation gÃ©nÃ©tique</a> . <br><a name="habracut"></a><br><h1>  Algorithme gÃ©nÃ©tique pour optimiser une stratÃ©gie de trading </h1><br>  Nous considÃ©rerons cet algorithme comme un exemple d'optimisation de 2 paramÃ¨tres.  Les paramÃ¨tres optimisÃ©s de notre robot sont la pÃ©riode de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">moyenne mobile</a> et <abbr title="objectif de profit d'une seule transaction de robot">TakeProfit</abbr> .  Pour une plus grande immersion dans la Â«gÃ©nÃ©tiqueÂ», convenons d'appeler la pÃ©riode de la moyenne mobile le gÃ¨ne responsable de la Â«croissanceÂ», et TakeProfit - le gÃ¨ne de la Â«couleur des yeuxÂ». <br><br>  Dans l'espace des valeurs de paramÃ¨tres admissibles, chaque point, chaque paire de coordonnÃ©es - Â«hauteur / couleur des yeuxÂ» dÃ©crit thÃ©oriquement un Â«individuÂ».  Supposons que nous avons crÃ©Ã© au hasard 10 individus.  Ce fut la <b>premiÃ¨re Ã©tape de l'</b> algorithme d'optimisation gÃ©nÃ©tique - pour crÃ©er la premiÃ¨re gÃ©nÃ©ration: <br><br><img src="https://habrastorage.org/webt/wo/mx/1s/womx1s6e3gde2yk04asr9rzaqzs.png"><br><br>  Dans l'espace de coordonnÃ©es M - T, les points sont sÃ©lectionnÃ©s au hasard.  Par exemple, deux points marquÃ©s d'un cadre rouge sont des Â«individusÂ» avec des noms non sexistes (c'est un point important!) Zhenya et Sasha.  La Â«croissanceÂ» de Sasha (dans la formulation initiale du problÃ¨me est la pÃ©riode moyenne mobile) est de 11 unitÃ©s, la Â«couleur des yeuxÂ» est de 0,6 (yeux vert-bleu).  Zhenya est lÃ©gÃ¨rement diffÃ©rent dans les paramÃ¨tres.  Les mÃªmes caractÃ©ristiques dÃ©crivent les 8 individus restants. <br><br><h2>  <font color="3030cc">La deuxiÃ¨me Ã©tape est la reproduction</font> </h2><br>  De toute la premiÃ¨re gÃ©nÃ©ration, nous dÃ©terminons un certain nombre des individus les plus Â«rÃ©ussisÂ».  Le critÃ¨re, Ã©videmment, est la valeur de <abbr title="fonction objective (profit)">CF.</abbr>  Ces individus se reproduiront, formant des paires au hasard (pour cette raison, ils ont reÃ§u des noms non sexistes).  En gÃ©nÃ©ral, un certain nombre de rÃ¨gles peuvent Ãªtre dÃ©finies pour les paires correspondantes.  Par exemple, pour sÃ©lectionner des individus dont les caractÃ©ristiques sont proches (c'est-Ã -dire, littÃ©ralement, les plus proches dans l'espace des coordonnÃ©es) des individus - la consanguinitÃ©.  Vous pouvez au contraire rechercher des contraires (consanguinitÃ©).  Je n'ai pas pu trouver d'arguments en faveur de l'une de ces options - dans ma mise en Å“uvre, les paires sont formÃ©es strictement par accident ... Par exemple, Zhenya et Sasha ont rÃ©ussi la qualification et ont dÃ©cidÃ© de donner naissance Ã  un descendant.  Qu'est-ce que cela signifie dans notre contexte: <br><br><img src="https://habrastorage.org/webt/mv/ad/i9/mvadi9zl8mv_gfhtnhsadcyul20.png"><br><br>  De deux individus Â«parentauxÂ» on obtient le troisiÃ¨me individu, qui hÃ©rite en partie des caractÃ©ristiques d'un parent, en partie de l'autre.  Par exemple, Zhenya et Sasha ont donnÃ© naissance Ã  un Nikita individuel (Nikita, Nikita?): <br><br><ul><li>  Nikita a hÃ©ritÃ© du signe Â«couleur des yeuxÂ» (paramÃ¨tre TakeProfit du robot) de l'un de ses parents - Â«ZhenyaÂ», </li><li>  Â«CroissanceÂ» (la pÃ©riode du robot Ã  moyenne mobile) Nikita a hÃ©ritÃ© de Â«SashaÂ» ... mais s'est lÃ©gÃ¨rement ajustÃ© en direction d'un autre parent, Zhenya. </li></ul><br>  Le fait est que plus la dimension de l'espace d'optimisation est petite (dans notre cas elle est Ã©gale Ã  2), plus la progÃ©niture sera Â«procheÂ».  L'algorithme d'optimisation gÃ©nÃ©tique ne dÃ©termine pas strictement les rÃ¨gles de Â«l'hÃ©rÃ©ditÃ©Â» des gÃ¨nes pour un individu fille.  Par consÃ©quent, au hasard, Nikita a empruntÃ© la couleur de ses yeux sans aucun changement, mais il s'est avÃ©rÃ© Ãªtre au milieu entre les deux parents, plus prÃ¨s de l'un d'eux.  Dans mon implÃ©mentation, avec le mÃªme succÃ¨s, Nikita a pu emprunter les paramÃ¨tres d'origine aux deux parents. <br><br><h2>  <font color="3030cc">La troisiÃ¨me Ã©tape se reproduit</font> </h2><br>  Moteur du processus Ã©volutif, sÃ©lection naturelle.  4 des 10 meilleurs individus ont donnÃ© 10 descendants supplÃ©mentaires.  Nous avons maintenant 20 personnes.  L'algorithme d'optimisation gÃ©nÃ©tique implique de maintenir une taille de population constante.  10 personnes doivent Â«mourirÂ».  Dans cette mise en Å“uvre, la plupart des individus de la premiÃ¨re gÃ©nÃ©ration Â«meurentÂ», de 80% Ã  100%. <br>  En consÃ©quence, dans notre exemple, la nouvelle gÃ©nÃ©ration sera composÃ©e de 0 ... 2 parents et 8 - 10 de leur progÃ©niture.  En d'autres termes, si vous omettez les paroles, les nouveaux vecteurs des paramÃ¨tres du robot de trading seront calculÃ©s Ã  partir des vecteurs obtenus Ã  l'Ã©tape prÃ©cÃ©dente, Â«propagationÂ» (combinaison) des 4 meilleurs meilleurs tests.  La plupart des Â«personnes Ã¢gÃ©esÂ» n'accepteront pas de participer Ã  la nouvelle itÃ©ration de sÃ©lection (d'autres options pour la mise en Å“uvre de la sÃ©lection sont possibles). <br><br><h2>  <font color="3030cc">AchÃ¨vement de l'algorithme</font> </h2><br>  La reproduction et la sÃ©lection sont rÃ©pÃ©tÃ©es N fois.  Plus prÃ©cisÃ©ment, dans notre exemple, pour la comparaison avec trois algorithmes prÃ©cÃ©demment testÃ©s, 4 gÃ©nÃ©rations de 10 individus sont testÃ©s, soit un total de 40 tests. <br>  Mais il peut arriver qu'une autre population s'effondre.  En d'autres termes, tous les tests se feront Ã  proximitÃ© de plusieurs points.  Pour Ã©viter cette situation, plusieurs mÃ©canismes sont utilisÃ©s, notamment: <br><br><ul><li>  perfusion de Â«sang fraisÂ» dans la population.  Aux descendants de la population actuelle s'ajoutent plusieurs nouveaux individus obtenus par hasard, de la mÃªme maniÃ¨re que la population initiale s'est formÃ©e, </li><li>  mÃ©canisme de mutation: une progÃ©niture peut avoir certaines des caractÃ©ristiques (coordonnÃ©es) lÃ©gÃ¨rement diffÃ©rentes des caractÃ©ristiques de ses parents: </li></ul><br><img src="https://habrastorage.org/webt/zq/me/o7/zqmeo7nqe2qijovrbmhzf7idh14.png"><br><br>  dans cet exemple <br><br><ul><li>  les caractÃ©ristiques de la descendante Jane et Joss - Â«croissanceÂ» et Â«couleur des yeuxÂ» sont empruntÃ©es Ã  chacun des parents, </li><li>  les caractÃ©ristiques de la progÃ©niture de Sam et Siri sont quelque peu diffÃ©rentes des caractÃ©ristiques correspondantes des deux parents. </li></ul><br>  Dans ma mise en Å“uvre, malgrÃ© les mutations et les Â«individus fraisÂ», la population devait Ãªtre mise Ã  jour pÃ©riodiquement dans son ensemble pour Ã©viter une convergence prÃ©maturÃ©e, une localisation de l'ensemble de la population dans un espace limitÃ©. <br><br>  Si nous revenons aux donnÃ©es originales sur lesquelles nous avons testÃ© les algorithmes de Monte Carlo, la descente de gradient et l'algorithme avec le nom de travail Â«bataille navaleÂ», le processus d'optimisation peut Ãªtre illustrÃ© par l'animation suivante: <br><br><img src="https://habrastorage.org/webt/2a/bn/y_/2abny__yrjhqoscv1jzbircputc.gif"><br><br>  Comme vous pouvez le voir dans l'animation, la disposition des points est d'abord chaotique, mais, avec les gÃ©nÃ©rations suivantes, elle tend vers des zones avec des valeurs plus Ã©levÃ©es de DF. <br><br>  Comparez maintenant les algorithmes sur la mÃªme surface: <abbr title="profit">P</abbr> = f ( <abbr title="pÃ©riode moyenne mobile">M</abbr> , <abbr title="TakeProfit, objectif de profit sur l'accord">T</abbr> ): <br><br><img src="https://habrastorage.org/webt/hc/pm/v8/hcpmv86zitukibrq2urge2errz4.png"><br><br><table><tbody><tr><th>  Monte Carlo </th><th>  descente de gradient </th><th>  Â«Bataille maritimeÂ» </th><th>  <font color="3030cc">algorithme gÃ©nÃ©tique</font> </th></tr><tr><td>  95,7% </td><td>  92,1% </td><td>  97,0% </td><td>  <font color="3030cc">96,8%</font> </td></tr></tbody></table><br>  La valeur moyenne de l'extremum trouvÃ© des FC en pourcentage de la valeur globale. <br><br>  Bien sÃ»r, il est trop tÃ´t pour juger par un ensemble de donnÃ©es d'entrÃ©e, mais jusqu'Ã  prÃ©sent, l'AG, par rapport Ã  notre robot de trading, est infÃ©rieur Ã  l'algorithme de Â«bataille navaleÂ»: <br><br><ul><li>  de maniÃ¨re assez insignifiante - par la moyenne de la valeur quasi-optimale trouvÃ©e des FC, </li><li>  donne la pire estimation de la stabilitÃ© paramÃ©trique de l'algorithme de trading, car il Â«n'examine pasÂ» l'environnement des tuples de paramÃ¨tres quasi optimaux trouvÃ©s trop peu de dÃ©tails. </li></ul><br><h1>  Test final de 4 algorithmes d'optimisation </h1><br>  Le test final a Ã©tÃ© effectuÃ© sur 4 ensembles de donnÃ©es d'entrÃ©e - les rÃ©sultats du backtest de la stratÃ©gie de trading sur 4 segments diffÃ©rents de l'historique des prix ( <abbr title="Euro en Dollars amÃ©ricain">EURUSD</abbr> : 2016, EURUSD: 2017, <abbr title="once troy d'or par dollar amÃ©ricain">XAUUSD</abbr> : 2016, XAUUSD: 2017). <br><br><img src="https://habrastorage.org/webt/ko/in/wg/koinwgtirx7wsytk8ilu5ferro0.gif"><br><br>  (exemples de filtres numÃ©riques en fonction de <b>deux</b> paramÃ¨tres pour 4 sÃ©ries chronologiques de prix) <br><br>  Cette fois, l'optimisation a Ã©tÃ© rÃ©alisÃ©e selon 3 paramÃ¨tres: <br><br><ol><li>  pÃ©riode de moyenne mobile Â«rapideÂ» </li><li>  pÃ©riode de moyenne mobile Â«lenteÂ» </li><li>  TakeProfit (bÃ©nÃ©fice sur la transaction, en pourcentage, une fois la transaction terminÃ©e). </li></ol><br>  Chacun des paramÃ¨tres a pris 20 valeurs diffÃ©rentes.  Total pour construire la table <br>  P = F (Mf, Ms, T) <br>  oÃ¹ P est le profit, Mf est la pÃ©riode de la moyenne mobile "rapide", Ms est la pÃ©riode de la moyenne mobile "lente", T est TakeProfit, <br>  20 * 20 * 20 = 8 000 itÃ©rations de test ont Ã©tÃ© effectuÃ©es. <br><br>  L'optimisation a Ã©tÃ© effectuÃ©e avec une restriction de 160, 400 et 800 tests (calculs DF dans les coordonnÃ©es sÃ©lectionnÃ©es).  Ã€ chaque fois, les rÃ©sultats ont Ã©tÃ© moyennÃ©s pour 1 000 itÃ©rations d'optimisation.  La valeur DF moyenne pour le vecteur de paramÃ¨tres quasi optimal trouvÃ© Ã©tait: <br><table><tbody><tr><th>  Monte Carlo </th><th>  descente de gradient </th><th>  Â«Bataille maritimeÂ» </th><th>  algorithme gÃ©nÃ©tique </th></tr><tr><td>  84,1% </td><td>  83,9% </td><td>  77,0% </td><td>  92,6% </td></tr></tbody></table><br>  SÃ©parÃ©ment, il convient de noter que GA affiche un bon rÃ©sultat mÃªme avec un petit pourcentage de tests du nombre total possible d'options: <br><table><tbody><tr><th>  tests </th><th>  Monte Carlo </th><th>  descente de gradient </th><th>  Â«Bataille maritimeÂ» </th><th>  algorithme gÃ©nÃ©tique </th></tr><tr><td>  160 sur 8 000 </td><td>  79,1% </td><td>  76,7% </td><td>  73,1% </td><td>  87,7% </td></tr><tr><td>  400 sur 8 000 </td><td>  84,7% </td><td>  85,0% </td><td>  77,4% </td><td>  93,7% </td></tr><tr><td>  800 sur 8 000 </td><td>  88,6% </td><td>  90,1% </td><td>  80,4% </td><td>  96,3% </td></tr></tbody></table><br><h1>  Au lieu d'une conclusion </h1><br>  J'ai Ã©tÃ© quelque peu surpris par le rÃ©sultat, qui montrait un algorithme d'optimisation gÃ©nÃ©tique.  Je ne pense pas que spÃ©cifiquement le Â«paradigme gÃ©nÃ©tiqueÂ» de la mÃ©thode lui ait fourni la premiÃ¨re place dans la liste.  En un sens, selon la logique du choix des coordonnÃ©es, cela ressemblait aux mÃ©thodes de dichotomie / nombre d'or.  Il vaut probablement la peine d'essayer l'un de ces algorithmes et de comparer le GA avec lui. <br><br>  Revenant au robot de trading, il convient de noter comment le Â«reliefÂ» de la surface formÃ© par le CF (profit) change d'annÃ©e en annÃ©e.  Autrement dit, ayant "optimisÃ©" le robot sur l'histoire de 2017, <b>cela n'a aucun sens d'appliquer ces paramÃ¨tres en 2018</b> (premier trimestre, mois, semaine ... 2018). <br><br>  Les stratÃ©gies de trading artificielles, dogmatiques et impuissantes comme la nÃ´tre (acheter Ã  l'intersection de la moyenne mobile) ne seront probablement pas dÃ©modÃ©es bientÃ´t.  Malheureusement, je nâ€™avais pas dâ€™autres stratÃ©gies.  En consÃ©quence, j'attribue le profit ou la perte des robots commerciaux Ã  la chance plutÃ´t qu'aux avantages / inconvÃ©nients de l'algorithme.  Par consÃ©quent, la tÃ¢che d'optimisation paramÃ©trique d'un robot de trading est pour moi personnellement exclusivement d'intÃ©rÃªt acadÃ©mique. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430138/">https://habr.com/ru/post/fr430138/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430126/index.html">Une autre liste de projets Ã  pratiquer</a></li>
<li><a href="../fr430128/index.html">DÃ©veloppement par le test: amÃ©liorer les compÃ©tences</a></li>
<li><a href="../fr430132/index.html">Ce que nous avons appris sur la sÃ©curitÃ© Intel ME ces derniÃ¨res annÃ©es: 7 faits sur le mystÃ©rieux sous-systÃ¨me</a></li>
<li><a href="../fr430134/index.html">Algorithmes pour optimiser un robot de trading: un moyen efficace de trader un million rÃ©troactivement</a></li>
<li><a href="../fr430136/index.html">Comment ils vont lancer Starlink - Internet par satellite Ã  partir de Ilona Mask</a></li>
<li><a href="../fr430140/index.html">Cinq raisons de l'Ã©chec du rÃ©fÃ©rencement. Analyse de l'expÃ©rience de promotion infructueuse avec des exemples</a></li>
<li><a href="../fr430142/index.html">Votre Windows est-il si vieux?</a></li>
<li><a href="../fr430144/index.html">Nous simulons une riviÃ¨re rÃ©aliste dans Houdini et Unreal Engine 4</a></li>
<li><a href="../fr430146/index.html">Les mathÃ©matiques dans Gamedev sont simples. Vecteurs et intÃ©grales</a></li>
<li><a href="../fr430148/index.html">Fuite de donnÃ©es personnelles des MFC de Moscou</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>