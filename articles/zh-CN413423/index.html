<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👧🏿 🆚 👨‍✈️ 火星IS中的远程访问解决方案 🤰🏾 💀 😲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="美好的一天，％用户名％！ 

 在任何大型公司中（不仅是大型公司），人们都希望随时随地尽可能简单地访问公司信息（工作邮件，日历，内部资源）。 已经创建了称为“移动设备管理”的单独解决方案来提供和管理这些访问。 

 从历史上看，我们在公司中使用不同的解决方案来管理移动设备。 最初，这是为特定制造商量...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>火星IS中的远程访问解决方案</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/marsis/blog/413423/"> 美好的一天，％用户名％！ <br><br> 在任何大型公司中（不仅是大型公司），人们都希望随时随地尽可能简单地访问公司信息（工作邮件，日历，内部资源）。 已经创建了称为“移动设备管理”的单独解决方案来提供和管理这些访问。 <br><br> 从历史上看，我们在公司中使用不同的解决方案来管理移动设备。 最初，这是为特定制造商量身定制的解决方案，然后我们切换到另一种产品，该产品使我们能够支持iOS和Android设备。 随后，决定从Microsoft切换到解决方案。 <br><a name="habracut"></a><br><h2>  <b>微软风采</b> </h2><br> 在分析解决方案功能时，云版本提供了相当小的功能列表，因此决定使用Intune Hybrid。 <br><br>  <b>什么是Intune Hybrid？</b> <br><br><img src="https://habrastorage.org/webt/r0/j0/cc/r0j0cczgjro0aytasnalp_48oqe.png"><br><br> 这是与Microsoft Intune集成的旧系统中心配置管理器。 该解决方案具有自己的特点： <br><br><ul><li> 所有移动设备管理都通过SCCM进行。 </li><li> 所有安全策略和配置都是通过SCCM创建和管理的。 </li></ul><br> 总的来说，移动设备的管理与工作站的管理没有什么不同。 云部分仅用于设备和SCCM之间的通信。 <br><br> 决定切换到MS Intune的同时，必须将所有用户转移到新平台上。 不幸的是，我们只有5个月的迁移时间，全球已有28,000名用户。 <br><br> 首先，使用了破坏性最小的迁移方法，建议用户重新配置设备以使用新服务。 <br><br> 这种方法在某一时刻停止工作，并且用户开始被迫与以前的服务断开连接，同时阻止了对设备进行配置的能力。 这给桌面服务带来了一定的困难和额外的负担。 有关移动设备服务的未解决事件的图表清楚地显示了最活跃的迁移时间。 <br><br> 幸运的是，过渡是成功的-按时完成，没有出现意外问题。 <br><br><img src="https://habrastorage.org/webt/mr/7y/zo/mr7yzogekruczdl0c3w5awc0pmo.png"><br><br><h2>  <b>Microsoft Intune在火星上的生活如何？</b> </h2><br> 在迁移期间，所有支持团队都很难适应，因为管理移动设备的功能比SCCM中的功能更广泛，更方便。 但是牺牲了一些功能后，我们的服务稳定性大大提高，总的来说事件也更少。 相比之下，与以前的28,000个用户的解决方案相比，我们每月大约有700个事件，但现在的水平保持在±350个事件。 <br><br> 随着新版SCCM的发布，Microsoft将添加新功能，我希望他们继续投资于混合解决方案。 <br><br>  <b>有什么新东西？</b> <br><br> 迁移到新产品还提供了新的访问控制功能，因为Intune只是Enterprise Mobility + Security服务的一部分。 对我们来说，最重要和最有趣的功能是<b>条件访问</b>和<b>移动应用程序管理</b> 。 <br><br> 条件访问是一种服务访问控制策略。 假设有一个用户想要从个人电话连接到Exchange Online。 访问策略要求您的设备必须运行Microsoft Intune才能访问EXO。 如果此用户尝试通过iOS上的标准Mail应用程序配置邮箱，则他只会看到一条消息：“管理员要求通过Microsoft Intune控制设备。”同样，您可以控制对在Azure AD中注册的任何应用程序的访问。 <br><br> 移动应用程序管理是对应用程序内公司数据的管理。 此设置确定是否可以将工作文档保存在手机的内存中，或将其复制到第三方应用程序等。 <br><br> 这两个功能都允许用户灵活，轻松地配置安全设置。 <br><br><h2>  <b>迁移到Intune Standalone</b> </h2><br> 对Microsoft的新解决方案（特别是共同管理和自动驾驶）产生了兴趣之后，我们意识到有必要切换到完全基于云的解决方案（所谓的Intune Standalone）。 <br><br> 在做出决定时，Microsoft已经发布了有关将用户从SCCM迁移到Intune Standalone的分步说明： <br><br><ul><li> 从SCCM导出配置并将其导入Intune。 </li><li> 迁移测试用户。 </li><li> 迁移所有用户。 </li><li> 将MDM授权从SCCM切换到Intune。 </li></ul><br> 在导出/导入阶段，使用了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Microsoft本身</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">解决方案</a> 。 不幸的是，导入进展不顺利，不仅从SCCM迁移了特定的应用程序，而且还迁移了所有部署类型，从而在Intune中创建了单独的应用程序。 <br><br> 它看起来像这样： <br><br><img src="https://habrastorage.org/webt/8y/b3/fl/8yb3flsgley6xygi-wvt4bb68ji.jpeg"><br><br> 此外，由于某种原因，应用程序版本也未正确导入，因此，必须手动发布所有应用程序。 使用此配置和策略，迁移没有任何问题。 <br><br>  <b>测试组迁移</b> <br><br> 最初，测试小组由我和我的同事组成。 我们担心用户可能会注意到他们正在迁移。 这可能会激起对桌面服务的呼叫。 但是测试表明，在配置和已发布的应用程序没有差异的情况下，用户什么都不会注意到。 <br><br> 迁移机制是什么？ 所需的用户已从SCCM集合中删除，该集合已在Intune订阅设置中使用。 这是通过专有集合完成的，该专有集合又与Active Directory中的组绑定。 因此，为了迁移用户，您只需要将其添加到必要的AD组中即可。 <br><br> 但是出乎意料的是，提供服务台访问权限以管理迁移的设备存在问题。 我创建了一个特殊角色，该角色仅具有执行其任务所需的权限。 该角色已分配给必要的组，但没有出现某些人的访问权限。 分析员许可证及其帐户均经过检查，但均无济于事。 通过Graph API检查有效角色表明存在角色，但是该人仍然没有访问权限。 经过长时间的调查，再加上Microsoft的支持，发现分析人员需要许可证（EMS E3或EMS E5中的Intune）。 而且，分析人员又需要迁移到Intune Standalone。 需求没有记录在案，花了几周时间才解决。 <br><br> 同时，我吸引了来自一个欧洲国家的一群销售代表来迁移，他们在日常工作中积极使用VPN服务，并在迁移本身和为Intune Standalone <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NDES</a>单独配置的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">服务器中</a>运行。 正是在这一步，迁移几乎被取消，所有用户都返回了。 <br><br> 为了使用户能够使用VPN服务，系统会为他提供一个配置文件，该配置文件使用指定的SCEP证书（指的是根CA）来配置VPN客户端。 因此，必须提供一对证书才能进行操作。 <br> 我们只有一个证书（根CA）。 <br><br> 最简单的事情是假设问题出在NDES服务器中。 但是它运行良好，甚至没有收到证书请求。 在检查来自设备本身的日志时，我发现该设备甚至没有收到请求SCEP证书的必要设置。  Microsoft将这个问题升级为Intune开发人员，他们发现不仅拥有所有证书的重要性，而且还需要将所有证书和设置传递给相同的用户组和设备。 在我们的案例中，根CA已交付给所有设备，SCEP仅交付给某些设备。 <br><br> 因此，我们开始了一次迁移，从1000个用户增加到4000个用户。 该过程耗时4周。 我们为任何事情做好了准备（我们都知道很少有事情按计划进行）。 但是，一切进展顺利，而桌面服务的呼叫却没有激增。 <br><br><h2>  <b>过时的设备</b> </h2><br> 根据我们的标准，我们努力争取移动操作系统的最低版本： <br><br>  ·T-1（适用于iOS）。 <br>  ·T-2 for Android。 <br><br>  * T是目前的最新版本。 <br><br> 在较小程度上，这适用于iOS，因为 苹果长期以来一直支持其设备。 对于Android设备更是如此。 例如，人们仍然在超过4年的设备上使用Android 4.4.2。 <br><br> 在这种情况下，我们需要与当地的IT团队进行对话，以确定更换设备的时间，因为有必要在安全性和更新设备上花费的资金之间找到平衡。 <br><br><h2>  <b>接下来是什么？</b> </h2><br> 决定的改变导致了内部的改变。 例如，有一些脚本用于从用PowerShell编写的过时设备中清除SCCM，现在无法使用。 在所有新解决方案中，Microsoft都在推广必须掌握的Graph API。 <br><br> 直到最近，报告都是基于SSRS构建的，现在我们将使用Power BI + oData Feed和Intune数据仓库中的数据。 <br><br> 之前我提到了条件访问和移动应用程序管理。 第一个解决方案已经实施；现在我们正在研究第二个解决方案。 我们还在测试Azure应用程序代理，以替代移动设备上的VPN。 如果有趣，我会很高兴在新文章中讲述。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN413423/">https://habr.com/ru/post/zh-CN413423/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN413413/index.html">Symfony组件概述：配置</a></li>
<li><a href="../zh-CN413415/index.html">Netflix中的自适应并发限制</a></li>
<li><a href="../zh-CN413417/index.html">能源效率：我们在俄罗斯测试的方法</a></li>
<li><a href="../zh-CN413419/index.html">PostgreSQL新闻摘要。 第七期</a></li>
<li><a href="../zh-CN413421/index.html">程序员生涯中可能存在的不确定性</a></li>
<li><a href="../zh-CN413427/index.html">网络工程师编程：使用配置</a></li>
<li><a href="../zh-CN413429/index.html">我们正在编写一个插件来接收“让我们加密”通配符证书</a></li>
<li><a href="../zh-CN413431/index.html">关于开发Solidity智能合约的研讨会</a></li>
<li><a href="../zh-CN413433/index.html">65％的俄罗斯IT专业人员想在国外工作</a></li>
<li><a href="../zh-CN413435/index.html">遗传学之外的遗传</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>