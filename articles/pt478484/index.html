<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÖ∞Ô∏è üíÜüèæ üèñÔ∏è SCADA em Framboesa: mito ou realidade? üï† üëºüèª üëó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O inverno est√° chegando. Controladores l√≥gicos program√°veis ‚Äã‚Äã(PLCs) est√£o sendo substitu√≠dos por computadores pessoais incorporados. Isso se deve ao ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SCADA em Framboesa: mito ou realidade?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478484/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/9i/my/07/9imy07ssdaka0ywqvndluj9qbig.jpeg" alt="imagem"></div><br>  O inverno est√° chegando.  Controladores l√≥gicos program√°veis ‚Äã‚Äã(PLCs) est√£o sendo substitu√≠dos por computadores pessoais incorporados.  Isso se deve ao fato de o poder dos computadores permitir que um dispositivo incorpore a funcionalidade de um controlador program√°vel, servidor e (se o dispositivo tiver uma sa√≠da HDMI) tamb√©m uma esta√ß√£o de trabalho do operador.  Total: servidor Web, parte OPC, banco de dados e esta√ß√£o de trabalho em um √∫nico pacote, e tudo isso ao custo de um PLC. <br><br>  No artigo, consideramos a possibilidade de usar esses computadores incorporados na ind√∫stria.  Tomamos como base um dispositivo baseado no Raspberry Pi, descrevemos passo a passo o processo de instala√ß√£o de um sistema SCADA de c√≥digo aberto russo aberto e gratuito - Rapid SCADA nele, e tamb√©m desenvolvemos um projeto abstrato de esta√ß√£o de compressor, cujas tarefas incluem controle remoto do compressor e tr√™s v√°lvulas, bem como a visualiza√ß√£o do processo de produ√ß√£o de ar comprimido. <br><a name="habracut"></a><br>  Fa√ßa imediatamente uma reserva para que o problema possa ser resolvido de duas maneiras.  Fundamentalmente, eles n√£o diferem um do outro de forma alguma, a quest√£o est√° apenas no componente est√©tico e pr√°tico.  Ent√£o, precisamos: <br><br>  1.1 A primeira op√ß√£o implica a presen√ßa do pr√≥prio Raspberry Pi 2/3/4, bem como a presen√ßa de um conversor USB no RS485 (o chamado "apito", que pode ser adquirido no Alliexpress). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cb1/bbf/7f7/cb1bbf7f750d25e977f07cd0beff2aed.jpg" alt="imagem"></div><br>  <i><font color="#9e9e9e">Figura 1 - Raspberry Pi 2 e conversor USB no RS485</font></i> <br><br>  1.2 A segunda op√ß√£o inclui qualquer solu√ß√£o pronta baseada em Raspberry, recomendada para instala√ß√µes em ambientes industriais com portas RS485 integradas.  Por exemplo, como na Figura 2, com base no m√≥dulo Raspberry CM3 +. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c88/e84/e15/c88e84e15af6c70d68471a86ab4fffc9.jpg" alt="imagem"></div><br>  <i><font color="#9e9e9e">Figura 2 - dispositivo AntexGate</font></i> <br><br>  2. Um dispositivo com Modbus para v√°rios registros de controle; <br><br>  3. PC com Windows para configurar o projeto. <br><br><br>  <b>Etapas do desenvolvimento:</b> <br><br><ol><li>  <a href="https://habr.com/ru/post/478484/">Parte I. Instalando o Rapid SCADA no Raspberry;</a> </li><li>  <a href="https://habr.com/ru/post/478484/">Parte II</a>  <a href="https://habr.com/ru/post/478484/">Instale o Rapid SCADA no Windows;</a> </li><li>  <a href="https://habr.com/ru/post/478484/">Parte III</a>  <a href="https://habr.com/ru/post/478484/">Desenvolvimento do projeto e seu download no dispositivo;</a> </li><li>  <a href="https://habr.com/ru/post/478484/">Conclus√µes</a> </li></ol><br><a name="I"></a><br><h2>  Parte I. Instalando o Rapid SCADA no Raspberry </h2><br><br>  1. Preencha o <a href="https://rapidscada.ru/download-all-files/user-profile/">formul√°rio</a> no site do Rapid Scada para receber o pacote de distribui√ß√£o e baixar a vers√£o mais recente do Linux. <br><br>  2. Descompacte os arquivos baixados e copie a pasta ‚Äúscada‚Äù para o diret√≥rio <i>/ opt</i> do dispositivo. <br><br>  3. Colocamos tr√™s scripts da pasta daemons no diret√≥rio <i>/etc/init.d</i> <br><br>  4. Damos acesso total a tr√™s pastas de aplicativos: <br><br><pre><code class="java hljs">sudo chmod -R ugo+rwx /opt/scada/ScadaWeb/config sudo chmod -R ugo+rwx /opt/scada/ScadaWeb/log sudo chmod -R ugo+rwx /opt/scada/ScadaWeb/storage</code> </pre> <br>  ‚†Ä5.  Tornamos os scripts execut√°veis: <br><br><pre> <code class="java hljs">sudo chmod +x /opt/scada/make_executable.sh sudo /opt/scada/make_executable.sh</code> </pre> <br>  ‚†Ä6.  Adicionar reposit√≥rio: <br><br><pre> <code class="java hljs">sudo apt install apt-transport-https dirmngr gnupg ca-certificates sudo apt-key adv --keyserver hkp:<span class="hljs-comment"><span class="hljs-comment">//keyserver.ubuntu.com:80 --recv-keys 3FA7E0328081BFF6A14DA29AA6A19B38D3D831EF echo "deb https://download.mono-project.com/repo/debian stable-stretch main" | sudo tee /etc/apt/sources.list.d/mono-official-stable.list sudo apt update</span></span></code> </pre> <br>  ‚†Ä 7.  Instale o Mono .NET Framework: <br><br><pre> <code class="java hljs">sudo apt-get install mono-complete</code> </pre> <br>  ‚†Ä8.  Instale o servidor HTTP Apache: <br><br><pre> <code class="java hljs">sudo apt-get install apache2</code> </pre> <br>  ‚†Ä 9.  Instale m√≥dulos adicionais: <br><br><pre> <code class="java hljs">sudo apt-get install libapache2-mod-mono mono-apache-server4</code> </pre> <br>  ‚†Ä 10.  Crie um link para o aplicativo Web: <br><br><pre> <code class="java hljs">sudo ln -s /opt/scada/ScadaWeb /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/www/html/scada</code> </pre> <br>  ‚†Ä11.  No arquivo baixado da pasta ‚Äúapache‚Äù, copie o arquivo <i>scada.conf</i> para o diret√≥rio <i>/ etc / apache2 / sites-available</i> <br><br><pre> <code class="java hljs">sudo a2ensite scada.conf</code> </pre> <br>  ‚†Ä 12.  Seguimos esse caminho <i>sudo nano /etc/apache2/apache2.conf</i> e adicionamos o seguinte ao final do arquivo: <br><br><pre> <code class="java hljs">&lt;Directory /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/www/html/scada/&gt; &lt;FilesMatch <span class="hljs-string"><span class="hljs-string">"\.(xml|log|bak)$"</span></span>&gt; Require all denied &lt;/FilesMatch&gt; &lt;/Directory&gt;</code> </pre> <br>  ‚†Ä 13.  Executamos o script: <br><br><pre> <code class="java hljs">sudo /opt/scada/svc_install.sh</code> </pre> <br>  ‚†Ä14.  Reinicie a framboesa: <br><br><pre> <code class="java hljs">sudo reboot</code> </pre> <br>  ‚†Ä15.  Abra o site: <br><br><pre> <code class="java hljs">http:<span class="hljs-comment"><span class="hljs-comment">//IP- /scada</span></span></code> </pre> <br>  ‚†Ä 16.  Na janela que se abre, digite o login <i>"admin"</i> e a senha <i>"12345"</i> . <br><br><a name="II"></a><br><h2>  Parte II  Instale o Rapid SCADA no Windows </h2><br>  √â necess√°rio instalar o Rapid SCADA no Windows para configurar o Raspberry e o projeto.  Em teoria, voc√™ pode fazer isso no pr√≥prio framboesa, mas no suporte t√©cnico fomos aconselhados a usar o ambiente de desenvolvimento no Windows, pois aqui ele funciona mais corretamente do que no Linux. <br><br>  Ent√£o, vamos come√ßar: <br><br><ol><li>  Atualizamos o Microsoft .NET Framework para a vers√£o mais recente; </li><li>  Fa√ßa <a href="https://rapidscada.ru/download-all-files/download-rapid-scada/">o</a> download <a href="https://rapidscada.ru/download-all-files/download-rapid-scada/">do kit de distribui√ß√£o do</a> Rapid SCADA para Windows e instale-o offline; </li><li>  Inicie o aplicativo Administrator.  Nele, desenvolveremos o pr√≥prio projeto. </li></ol><br>  Ao desenvolver, voc√™ precisa prestar aten√ß√£o a alguns pontos: <br><br>  1. A numera√ß√£o de registros neste sistema SCADA come√ßa em 1 endere√ßo, portanto tivemos que aumentar a numera√ß√£o de nossos registros em um.  No nosso caso, √©: 512 + 1 e assim por diante: <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/webt/bd/7c/hj/bd7chjywwlxieiq78axu3zkq3gs.jpeg" alt="imagem"></a> </div><br>  <i><font color="#9e9e9e">Figura 3 - Numera√ß√£o de registros no Rapid SCADA (a imagem √© clic√°vel)</font></i> <br><br>  2. Para reconfigurar diret√≥rios e implantar corretamente o projeto no sistema operacional Linux, v√° em "Servidor" -&gt; "Configura√ß√µes gerais" nas configura√ß√µes e clique no bot√£o "Para Linux": <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/webt/cb/wt/m0/cbwtm0putjdhyvpdvkdzfgeopzw.jpeg" alt="imagem"></a> </div><br>  <i><font color="#9e9e9e">Figura 4 - Migrando diret√≥rios no Rapid SCADA (a imagem √© clic√°vel)</font></i> <br><br>  3. Definimos a porta de polling para o Modbus RTU da maneira que √© definida no sistema Linux do dispositivo.  No nosso caso, este √© <i>/ dev / ttyUSB0</i> <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/webt/db/dn/ls/dbdnls7x1c5rkoe5nfod76qhnho.jpeg" alt="imagem"></a> </div><br>  <i><font color="#9e9e9e">Figura 5 - Migrando diret√≥rios no Rapid SCADA (a imagem √© clic√°vel)</font></i> <br><br>  Se voc√™ tiver alguma d√∫vida, todas as instru√ß√µes de instala√ß√£o adicionais podem ser obtidas no <a href="http://doc.rapidscada.net/content/latest/ru/installation-and-run/">site da empresa</a> ou no <a href="https://www.youtube.com/channel/UCQ4rtAMoExwkBZ-K6PKn5iQ/videos">canal do youtube</a> . <br><br><a name="III"></a><br><h2>  Parte III  Desenvolvimento do projeto e seu download no dispositivo </h2><br>  O desenvolvimento e a visualiza√ß√£o do projeto s√£o criados diretamente no pr√≥prio navegador.  Isso n√£o √© familiar ap√≥s os sistemas SCADA de desktop, mas √© o local ideal. <br><br>  Separadamente, gostaria de observar um conjunto limitado de elementos de visualiza√ß√£o (Figura 6).  Dos componentes internos, h√° um LED, um bot√£o, uma chave seletora, um link e um ponteiro.  No entanto, uma grande vantagem √© que este sistema SCADA suporta imagens e textos din√¢micos.  Com um conhecimento m√≠nimo dos editores gr√°ficos (Corel, Adobe Photoshop etc.), voc√™ pode criar suas pr√≥prias bibliotecas de imagens, elementos e texturas, e o suporte a elementos GIF permitir√° adicionar anima√ß√£o √† visualiza√ß√£o do processo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/or/x0/xw/orx0xw3t74rneji42tgmokgvgmg.jpeg" alt="imagem"></div><br>  <i><font color="#9e9e9e">Figura 6 - Ferramentas esquem√°ticas do editor no Rapid SCADA</font></i> <br><br>  No √¢mbito deste artigo, n√£o havia nenhum objetivo de descrever passo a passo o processo de cria√ß√£o gr√°fica de um projeto no Rapid SCADA.  Portanto, n√£o vamos nos aprofundar neste ponto em detalhes.  No ambiente do desenvolvedor, nosso projeto simples "Sistema de suprimento de ar comprimido" de uma esta√ß√£o de compressor √© o seguinte (Figura 7): <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/webt/wu/ds/z1/wudsz16bpa5qpdhfwdzgjvofcmi.jpeg" alt="imagem"></a> </div><br>  <i><font color="#9e9e9e">Figura 7 - Editor de esquema no Rapid SCADA (a imagem √© clic√°vel)</font></i> <br><br>  Em seguida, preencha nosso projeto no dispositivo.  Para fazer isso, especifique o endere√ßo IP do dispositivo para transferir o projeto n√£o para o host local, mas para o nosso computador incorporado: <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/webt/7n/zk/d_/7nzkd_ckwrjromwlz3hfhnfpuqw.jpeg" alt="imagem"></a> </div><br>  <i><font color="#9e9e9e">Figura 8 - Download do projeto para o dispositivo no Rapid SCADA (a imagem √© clic√°vel)</font></i> <br><br>  Como resultado, obtivemos algo semelhante (Figura 9).  No lado esquerdo da tela, existem LEDs refletindo o status de todo o sistema (compressor), bem como o status das v√°lvulas (abertas ou fechadas) e na parte central da tela - visualiza√ß√£o do processo com a capacidade de controlar dispositivos atrav√©s de chaves de altern√¢ncia.  Quando voc√™ abre uma ou outra v√°lvula, a cor muda de cinza para verde, tanto a pr√≥pria v√°lvula quanto a rodovia correspondente. <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/webt/qh/ua/hl/qhuahl-gkd3m3hil8pqcdgshnve.gif" alt="imagem"></a> </div><br>  <i><font color="#9e9e9e">Figura 9 - O design da esta√ß√£o do compressor (a anima√ß√£o GIF √© clic√°vel)</font></i> <br><br>  <a href="https://antexcloud.ru/docs/antexgate/rapid-scada/">Aqui</a> voc√™ pode baixar o arquivo deste projeto para revis√£o. <br><br>  A Figura 10 mostra como √©, no geral, o que temos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yt/xi/k0/ytxik0qfwlquux_2lf5top9upac.jpeg" alt="imagem"></div><br>  <i><font color="#9e9e9e">Figura 10 - Sistema SCADA no Raspberry</font></i> <br><a name="conclusions"></a><br><h2>  Conclus√µes </h2><br>  O surgimento de poderosos computadores industriais embarcados permite expandir e complementar a funcionalidade dos controladores l√≥gicos program√°veis.  Instalar sistemas SCADA semelhantes neles pode cobrir as tarefas de uma pequena produ√ß√£o ou de um processo tecnol√≥gico.  Para tarefas maiores com um grande n√∫mero de usu√°rios ou um requisito de seguran√ßa aumentado, voc√™ provavelmente precisar√° instalar servidores completos, gabinetes de automa√ß√£o e CLPs familiares.  No entanto, para pontos de automa√ß√£o m√©dia e pequena, como pequenos edif√≠cios industriais, caldeiras, casas de bombas ou resid√™ncias inteligentes - essa solu√ß√£o parece apropriada.  De acordo com nossos c√°lculos, esses dispositivos s√£o adequados para tarefas de at√© 500 pontos de entrada e sa√≠da de dados. <br><br>  Se voc√™ tem experi√™ncia em desenho em v√°rios editores gr√°ficos e n√£o est√° confuso com o fato de precisar criar elementos de telas gr√°ficas, a op√ß√£o com o Rapid SCADA para Raspberry √© √≥tima.  Sua funcionalidade como uma solu√ß√£o pronta √© um pouco limitada, pois √© de c√≥digo aberto, no entanto, tamb√©m permite cobrir as tarefas de um pequeno edif√≠cio industrial.  Portanto, se voc√™ preparar modelos de visualiza√ß√£o para si mesmo, √© bem poss√≠vel usar esta solu√ß√£o para integrar, se n√£o todos, parte de seus projetos. <br><br>  Assim, para entender o qu√£o √∫til essa solu√ß√£o no Raspberry pode ser para voc√™ e quanto seus projetos s√£o substitu√≠dos pelos sistemas SCADA de c√≥digo aberto no Linux, surge uma pergunta razo√°vel: quais sistemas SCADA voc√™ usa com mais frequ√™ncia? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt478484/">https://habr.com/ru/post/pt478484/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt477976/index.html">Visualiza√ß√£o e an√°lise da estrutura da comunidade usando gr√°ficos</a></li>
<li><a href="../pt478472/index.html">Biblioteca de kernel do Linux: kernel do Linux em fator de forma dll ou dll</a></li>
<li><a href="../pt478474/index.html">O irm√£o Pablo Escobar tamb√©m lan√ßou um smartphone flex√≠vel</a></li>
<li><a href="../pt478480/index.html">Intelig√™ncia artificial, ITSM e, em geral, onde LEAN?</a></li>
<li><a href="../pt478482/index.html">O desenvolvedor abriu um bar para desenvolvedores e organiza reuni√µes sobre Angular, layout, PHP</a></li>
<li><a href="../pt478486/index.html">A era dos chips de 10 nm - quem desenvolve esses processadores e o que espera a ind√∫stria no futuro</a></li>
<li><a href="../pt478490/index.html">Dist√¢ncia Levenshtein e busca por controladores</a></li>
<li><a href="../pt478492/index.html">Escherichia coli em uma dieta de CO2: uma nova ferramenta na luta contra o aquecimento global?</a></li>
<li><a href="../pt478496/index.html">50 anos atr√°s, no quarto n√∫mero 3420, a Internet nasceu</a></li>
<li><a href="../pt478498/index.html">1. Introdu√ß√£o ao Fortinet v 6.0. 1. Introdu√ß√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>