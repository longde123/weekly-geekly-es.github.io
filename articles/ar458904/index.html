<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฌ ๐ถ๐ป ๐๐ผ ุชุตูุฑ ูุนุฏุฏ ูู ุงูุงูุชุตุงุฑุงุช ููุฑู ุงูุฏูุฑู ุงูุงููุฑูู ูููุญุชุฑููู ุจุงุณุชุฎุฏุงู ุงูุฑุณูู ุงูุจูุงููุฉ ุดุฑูุท ุงูุฑุณูู ุงููุชุญุฑูุฉ ูู R ๐ช๏ธ ๐คธ๐พ ๐จ๐ผโ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฃููุง ุ ุจุนุถ ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ. ุงุณูู ููุงุฏูุณูุงู ูุญุฏุซุช ูุนุฑูุชู ุจู R ูู ุฃุบุณุทุณ ูู ุงูุนุงู ุงููุงุถู. ูุฑุฑุช ุฃู ุฃุชุนูู ูุบุฉ ุงูุจุฑูุฌุฉ ุจุณุจุจ ุงูุทุจูุนุฉ ุงูุชุทุจูููุฉ. ููุฐ ุงูุทููู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชุตูุฑ ูุนุฏุฏ ูู ุงูุงูุชุตุงุฑุงุช ููุฑู ุงูุฏูุฑู ุงูุงููุฑูู ูููุญุชุฑููู ุจุงุณุชุฎุฏุงู ุงูุฑุณูู ุงูุจูุงููุฉ ุดุฑูุท ุงูุฑุณูู ุงููุชุญุฑูุฉ ูู R</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458904/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุฃููุง ุ ุจุนุถ ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ.  ุงุณูู ููุงุฏูุณูุงู ูุญุฏุซุช ูุนุฑูุชู ุจู R ูู ุฃุบุณุทุณ ูู ุงูุนุงู ุงููุงุถู.  ูุฑุฑุช ุฃู ุฃุชุนูู ูุบุฉ ุงูุจุฑูุฌุฉ ุจุณุจุจ ุงูุทุจูุนุฉ ุงูุชุทุจูููุฉ.  ููุฐ ุงูุทูููุฉ ุ ุฃุญุจุจุช ุงูุงุญุชูุงุธ ุจุงูุฅุญุตุงุกุงุช ุงูุฑูุงุถูุฉ.  ูุน ุชูุฏู ุงูุนูุฑ ุ ุชุญููุช ูุฐู ุงูููุงูุฉ ุฅูู ุฑุบุจุฉ ูู ุชุญููู ูุฐู ุงูุฃุฑูุงู ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุ ูุจูุงุกู ุนูู ุชุญููู ุงูุจูุงูุงุช ุ ูู ุจุฅุนุทุงุก ุฃููุงุฑ ุฐููุฉ ุฅู ุฃููู.  ุงููุดููุฉ ูู ุฃูู ูู ุงูุณููุงุช ุงูุฃุฎูุฑุฉ ุ ุงุฌุชุงุญุช ุงูุฑูุงุถุฉ ููุฌุฉ ูู ุงูุจูุงูุงุช ุ ุญูุซ ุชุชูุงูุณ ุนุดุฑุงุช ุงูุดุฑูุงุช ูููุง ุจูููุง ุ ูู ูุญุงููุฉ ูุญุณุงุจ ููุตู ุฃู ูุงุนุจ ูุฑุฉ ูุฏู ุฃู ูุงุนุจ ูุฑุฉ ุณูุฉ ุฃู ูุงุนุจ ูุฑุฉ ูุฏู ุฏุงุฎู ุงูููุนุจ.  ู Excel ููุณุช ููุงุณุจุฉ ุจุดูู ูุงุทุน ููุชุญููู.  ูุฐูู ูุฑุฑุช ุฏุฑุงุณุฉ R ุจุญูุซ ูุง ูุณุชุบุฑู ุชุญููู ุฃุจุณุท ูุตู ููู.  ุจุงููุนู ูู ุฃุซูุงุก ุงูุฏุฑุงุณุฉ ุ ุชูุช ุฅุถุงูุฉ ุงูุชูุงู ุจุงูุจุฑูุฌุฉ ุนูู ูุฐุง ุงููุญู ุ ูููู ูุฐู ูู ุงููููุงุช ุจุงููุนู. </p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ุฃุฑูุฏ ุฃู ุฃูุงุญุธ ุนูู ุงูููุฑ ุฃู ุงููุซูุฑ ููุง ุณุฃูุชุจู ูู ุงููุณุชูุจู <del>  ุจุงููุนู ูู ุนุงุฆูุฉ ุณูุจุณูู </del>  ูุงู ุนูู ูุจุฑ ูู ุงูููุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููู ุจุฅูุดุงุก ุฑุณูู ุจูุงููุฉ ูุชุญุฑูุฉ ุจุงุณุชุฎุฏุงู R.</a> ูุฐู ุงูููุงูุฉ ุ ุจุฏูุฑูุง ุ ูู ุชุฑุฌูุฉ ููููุงูุฉ " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅูุดุงุก ุฑุณูู ุจูุงููุฉ ูุชุญุฑูุฉ ูุชุญุฑูุฉ ุจุงุณุชุฎุฏุงู R</a> ูู ูุชูุณุท".  ูุฐูู ุ ูู ุฃุฌู ุงูุงุฎุชูุงู ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุนู ุงูููุงูุงุช ุงููุฐููุฑุฉ ุฃุนูุงู ุ ุณุฃุญุงูู ุฃู ุฃุตู ุจุดูู ูุงูู ูุง ุฃูุนูู ุ ููุฐูู ุชูู ุงููุญุธุงุช ุงูุชู ููุณุช ูู ุงูููุงูุฉ ุงูุฃุตููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูููุก ุงูุฃุนูุฏุฉ ุ ุงุณุชุฎุฏูุช ุฃููุงู ุฃูุงูุฑ NBA ุ ูููุณ ููุญุฉ <code>ggplot2</code> ุงูููุงุณูุฉ ุ ูููู ุญุฒูุฉ <code>data.table</code> ุ ูููุณ <code>dplyr</code> ุ ูู ูุนุงูุฌุฉ ุงูุจูุงูุงุช.  ููุฏ ููุช ุจูู ูุฐุง ุงูุนูู ูุฏุงูุฉ ุ ูุฐุง ูููู ุงูุขู ูุชุงุจุฉ ุงุณู ุงููุฑูู ูุงูุณููุงุช ุงูุชู ุชุญุชุงุฌ ุฅูู ุญุณุงุจ ุนุฏุฏ ุงูุงูุชุตุงุฑุงุช ูููุง. </p><br><h2 id="dannye" style=";text-align:right;direction:rtl">  ูุนุทูุงุช </h2><br><p style=";text-align:right;direction:rtl">  ูุจูุงุก ุงูุฌุฏูู ุงูุฒููู ุ ุงุณุชุฎุฏูุช ุจูุงูุงุช ุนู ุนุฏุฏ ุงูุงูุชุตุงุฑุงุช ููู ูุฑูู ูู ูุฑู ุงูุฏูุฑู ุงูุงููุฑูู ูููุญุชุฑููู ุงูู 30 ูู ุงูููุงุณู ุงูุฎูุณุฉ ุนุดุฑ ุงููุงุถูุฉ.  ุชู ุฌูุนูุง ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">stats.nba.com</a> ุจุงุณุชุฎุฏุงู ููุญู <strong>NBA Data Retriever</strong> ุ ูุงูุฐู ุ ูู ุฎูุงู ุงุณุชุฎุฏุงู NBA API ุ ููุชุฌ ูููุงุช CSV ุจุงูุฅุญุตุงุฆูุงุช ุงููุงุฒูุฉ.  ููุง ุงูุชูุงุตูู ุงููุงููุฉ ูู ูุดุฑูุนู <a href="">ุนูู ุฌูุซุจ</a> . </p><br><h2 id="ispolzuemye-biblioteki" style=";text-align:right;direction:rtl">  ุงูููุชุจุงุช ุงููุณุชุฎุฏูุฉ </h2><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">library(data.table) library(tidyverse) library(gganimate)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุนุงูุฌุฉ ุงูุจูุงูุงุช ุ ุฃุณุชุฎุฏู <code>data.table</code> (ุจุจุณุงุทุฉ ูุฃููู ูุงุจูุช ูุฐู ุงูุญุฒูุฉ ูู ูุจู).  ูููููู ุฃูุถูุง ุชูุฒูู ูุฌููุนุฉ ูู ุงูุญุฒู <code>tidyverse</code> ุ ูููุณ <code>ggplot2</code> ูููุตูุฉ ุญุชู ูุง ุชููู ุ ุฅุฐุง ุธูุฑุช ุฃุซูุงุก ุงูุชุญููู ููุฑุฉ ุชุชุทูุจ <code>ggplot2</code> ุฅุถุงูููุง ูุญุฒูุฉ ูู ูุฐู ุงููุฌููุนุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุจุงูุฐุงุช ุ ูููู ุงูุงุณุชุบูุงุก ุนู <code>ggplot2</code> ุ ูุง ูุชู <code>ggplot2</code> ุญุฒู ูุฌููุนุฉ ุฃุฎุฑู.  ุญุณูุง ุ <code>gganimate</code> ูุญุฏุฏ ุงูุฑุณููุงุช ูู ุงูุญุฑูุฉ. </p><br><h2 id="rabota-s-dannymi" style=";text-align:right;direction:rtl">  ุงูุนูู ูุน ุงูุจูุงูุงุช </h2><br><p style=";text-align:right;direction:rtl">  ุชุญุชุงุฌ ุฃููุงู ุฅูู ุชุฑุชูุจ ุงูุจูุงูุงุช.  ุจุดูู ุฃุณุงุณู ุ ูุฅูุดุงุก ุงูุฑุณูู ุงูุจูุงููุฉ ุ ูุญุชุงุฌ ุฅูู ุนููุฏูู ูู ุฃุตู 79 ุนููุฏูุง ูู ุฌุฏูู ุจููุง ุจูุงูุงุช ุฃูููุฉ.  ููููู ุชุญุฏูุฏ ุงูุฃุนูุฏุฉ ุงููุงุฒูุฉ ุฃููุงู ุ ููููู ุงุณุชุจุฏุงู ุจุนุถ ุงูููู ุฃููุงู.  ุฐูุจุช ุงูุทุฑููุฉ ุงูุซุงููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุญุชูู ุงูุฌุฏูู ุงูููุฌูุฏ ูู <code>data.table</code> ุนูู ุงููููุฐุฌ <code>dt[i, j, by]</code> ุ ุญูุซ ูููู "ุงููุณุคูู" ุนู ุชุฌููุน ุงูุนูุงุตุฑ.  ุณุฃููู ุจุงูุชุฌููุน ุญุณุจ ุนููุฏ TeamName.  ูููุงู ุนูุจุฉ.  ูุนุฑุถ ูุฐุง ุงูุนููุฏ ุฃุณูุงุก ุงููุฑู: ูููุฑุฒ ุ ุณููุชููุณ ุ ููุช ุ ุฅูุฎ.  ููู ุฎูุงู ุงููุชุฑุฉ ููุฏ ุงูุงุณุชุนุฑุงุถ (ูู ููุณู 2004/2005) ุบูุฑุช ุนุฏุฉ ูุฑู ุฃุณูุงุกูุง: ุฃุตุจุญุช ููู ุฃูุฑููุงูุฒ ููุฑูุชุณ ููู ุฃูุฑููุงูุฒ ุจููููุงู ุ ูุนุงุฏุช ุดุงุฑููุช ุจูุจูุงุชุณ ุงูุงุณู ุงูุชุงุฑูุฎู ุดุงุฑููุช ููุฑูุชุณ ุ ูุณูุงุชู ุณูุงุชู ุณูุจุฑุณููููุณ ุฃุตุจุญ ุฃูููุงูููุง ุณูุชู ุซุงูุฏุฑ.  ูุฐุง ูููู ุฃู ูุณุจุจ ุงูุงุฑุชุจุงู.  ุงูุชุญูููุงุช ุงูุชุงููุฉ ุชุณุงุนุฏ ุนูู ุชุฌูุจ ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">table1 &lt;- table[TeamCity == "New Orleans" &amp; TeamName == "Hornets", TeamName := "Pelicans"][ TeamCity == "New Orleans/Oklahoma City" &amp; TeamName == "Hornets", TeamName := "Pelicans"][ TeamName == "Bobcats", TeamName := "Hornets"][ TeamName == "SuperSonics", TeamName := "Thunder"]</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงููุชุฑุฉ ุงูุฒูููุฉ ุ ุชููู ุงูุชุบููุฑุงุช ูู ุญุฏูุง ุงูุฃุฏูู ุ ูููู ุฅุฐุง ููุช ุจุชูุณูุนูุง ุ ูุณูุตุจุญ ูู ุงูุตุนุจ ููุบุงูุฉ ุชุฌููุนูุง ุจูุงุณุทุฉ TeamName ูุณุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุนููุฏ ุฃูุซุฑ ููุซูููุฉ.  ูู ูุฐู ุงูุจูุงูุงุช ุ ูุฐุง ูู TeamID. </p><br><p style=";text-align:right;direction:rtl">  ููุจุฏุก ุ ูุชุฎูุต ูู ุงููุนูููุงุช "ุงูุฅุถุงููุฉ" ุ ุชุงุฑููุง ููุท ุชูู ุงูุฃุนูุฏุฉ ุงูุชู ูุญุชุงุฌูุง ููุนูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">table1 &lt;- table1[ , .(TeamName, WINS)]</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู <code>data.table</code> ูุณุชุจุฏู (.) ุฅูุดุงุก ุฏุงูุฉ <code>list</code> .  ุฎูุงุฑ "ููุงุณููู" ุฃูุซุฑ ูุชุญุฏูุฏ ุงูุฃุนูุฏุฉ ูู <code>table1 &lt;- table1[, c("TeamName", "WINS")]</code> .  ุจุนุฏ ุฐูู ุ ูุฃุฎุฐ ุงูุฌุฏูู ุงููููุฐุฌ ุงูุชุงูู: </p><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  TeamName </th><th>  WINS </th></tr></thead><tbody><tr><td>  ุดููุณ </td><td>  62 </td></tr><tr><td>  ุญุฑุงุฑุฉ </td><td>  59 </td></tr><tr><td>  ูุฎุฒ ุงูุฎูู </td><td>  59 </td></tr><tr><td>  ุจูุณุชููุฒ </td><td>  54 </td></tr></tbody></table></div><br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ููุฑุณูู ุงููุชุญุฑูุฉ ููู ููุณู ุนูู ุญุฏุฉ ุ ูุฐุง ูููู ุ ูููู ูุญุณุงุจ ุฅุฌูุงูู ุนุฏุฏ ุงูุงูุชุตุงุฑุงุช ููุชุฑุฉ ูุญุฏุฏุฉ ุ ุชุญุชุงุฌ ุฅูู ุญุณุงุจ ุฅุฌูุงูู ุงูุชุฑุงููุงุช ูู ุงูุงูุชุตุงุฑุงุช. </p><br><p style=";text-align:right;direction:rtl"> <code>table1 &lt;- table1[, CumWins := cumsum(WINS), by = "TeamName"]</code> </p> <br><p style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ูุธููุฉ <code>cumsum</code> ูุญุตู ุนูู ุงูุฃุฑูุงู ุงูุชู ูุญุชุงุฌูุง.  ุจุงุณุชุฎุฏุงู: = ุจุฏูุงู ูู = ูุณูุญ ูู ุจุฅุถุงูุฉ ุนููุฏ ุฌุฏูุฏ ุฅูู ุงูุฌุฏูู ุ ูุง ุฃููู ุจุงููุชุงุจุฉ ููู ููุณ ุนููุฏ CumWins.  <code>by = "TeamName"</code> ุจุชุฌููุน ุงูุจูุงูุงุช ุญุณุจ ุงุณู ุงููุฑูู ููุชู <code>by = "TeamName"</code> ุงููุจูุบ ุงูุชุฑุงููู ููู ูุฑูู ูู ุงููุฑู ุงูุซูุงุซูู ุจุดูู ูููุตู. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุฃุถู ุนููุฏูุง ูู ุงูุณูุฉ ุงูุชู ุจุฏุฃ ูููุง ูู ููุณู.  ููุชุฏ ููุณู ุงูุฏูุฑู ุงูุงููุฑูู ูููุญุชุฑููู ูู ุงููุชุฑุฉ ูู ุฃูุชูุจุฑ ุฅูู ูุงูู ุ ูุฐูู ููุน ูู ุนุงููู ุชููููููู.  ูู ุชุณููุฉ ุงูููุณู ุ ุณูุฉ ุจุฏุงูุชู ุ ุฃู  ุงูููุณู: 2018 ุนูู ุงูุฑุณู ุงูุจูุงูู ูู ููุณู 2018/19 ูู ุงููุงูุน. </p><br><p style=";text-align:right;direction:rtl">  ูุญุชูู ุงูุฌุฏูู ุงูุฃุตูู ุนูู ูุฐู ุงูุจูุงูุงุช.  ููุธูุฑ ุนููุฏ SeasonID ุดูููุง ูู ุดูู 2 (ุงูุณูุฉ ุงูุชู ุจุฏุฃ ูููุง ุงูููุณู) ุ ุนูู ุณุจูู ุงููุซุงู ุ 22004. ููููู ุฅุฒุงูุฉ ุงูุฃูููู ุจุงุณุชุฎุฏุงู ุญุฒูุฉ <code>stringr</code> ุฃู ูุธุงุฆู R ุงูุฃุณุงุณูุฉ ุ ููููู ุฐูุจุช ุจุทุฑููุฉ ูุฎุชููุฉ ููููุงู.  ุงุชุถุญ ุฃููู ุฃููุงู ุงุณุชุฎุฏู ูุฐุง ุงูุนููุฏ ููุฅุดุงุฑุฉ ุฅูู ุงููุตูู ุงููุทููุจุฉ ุ ุซู ุงุญุฐู ูุฅูุดุงุก ุนููุฏ ูุน ุงูุชูุงุฑูุฎ ูุฑุฉ ุฃุฎุฑู.  ุฅุฌุฑุงุกุงุช ุฅุถุงููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููุฏ ูุนูุช ุฐูู ุนูู ุงููุญู ุงูุชุงูู: </p><br><p style=";text-align:right;direction:rtl"> <code>table1 &lt;- table1[,year := rep(seq(2004, 2018), each = length(unique(table1$TeamName)))]</code> </p> <br><p style=";text-align:right;direction:rtl">  ููุช ูุญุธูุธูุง ูุฃูู ุฎูุงู ุงููุชุฑุฉ ุงูุฒูููุฉ ุงููุญุฏุฏุฉ ุ ูู ูุชุบูุฑ ุนุฏุฏ ุงููุฑู ูู ุงูุฏูุฑู ุงูุงููุฑูู ูููุญุชุฑููู ุ ูุฐูู ูุฑุฑุช ุงูุฃุฑูุงู ูู 2004 ุฅูู 2018 30 ูุฑุฉ.  ูุฑุฉ ุฃุฎุฑู ุ ุฅุฐุง ุญุฏุซ ูู ุงูุชุงุฑูุฎ ุ ูุณุชููู ูุฐู ุงูุทุฑููุฉ ุบูุฑ ูุฑูุญุฉ ูุธุฑูุง ูุฃู ุนุฏุฏ ุงููุฑู ูู ูู ููุณู ุณูููู ูุฎุชูููุง ุ ูุฐูู ูู ุงูุฃูุถู ุงุณุชุฎุฏุงู ุงูุฎูุงุฑ ูุน ูุญู ุนููุฏ SeasonID. </p><br><p style=";text-align:right;direction:rtl">  ุซู ุฃุถู ุนููุฏ cumrank. </p><br><p style=";text-align:right;direction:rtl"> <code>table1 &lt;- table1[, cumrank := frank(-CumWins, ties.method = "random"), by = "year"]</code> </p> <br><p style=";text-align:right;direction:rtl">  ููุซู ุชุฑุชูุจ ุงููุฑู ูู ูู ููุณู ุจุนุฏุฏ ุงูุงูุชุตุงุฑุงุช ูุณูุชู ุงุณุชุฎุฏุงูู ูููู ูููุญูุฑ X. <code>frank</code> ุชูุงุธุฑูุฉ <code>data.table</code> ุฃุณุฑุน ูู <code>rank</code> ุงูุฃุณุงุณู ุ ูุงูุต ูุนูู ุงูุชุฑุชูุจ ุจุงูุชุฑุชูุจ ุงูุชูุงุฒูู (ูููู ุงูููุงู ุจุฐูู ุฃูุถูุง ุจุงุณุชุฎุฏุงู ูุณูุทุฉ <code>decreasing = TRUE</code> . ูุง ุชุฑุชูุจ ุงููุฑู ุงูุชู <code>ties.method = "random"</code> ููุณ ุงูุนุฏุฏ ูู ุงูุงูุชุตุงุฑุงุช ุ ูุจุงูุชุงูู ุ <code>ties.method = "random"</code> ูู ูู ูุฐู <code>ties.method = "random"</code> . ุญุณููุง ุ ุชู ุชุฌููุน ูู ูุฐุง ูู ุนุงู ูุงุญุฏ. </p><br><p style=";text-align:right;direction:rtl">  ููุถูู ุชุญููู ุงูุฌุฏูู ุงูุฃุฎูุฑ ุนููุฏ <code>value_rel</code> . </p><br><p style=";text-align:right;direction:rtl"> <code>table1 &lt;- table1[, value_rel := CumWins/CumWins[cumrank==1], by = "year"]</code> </p> <br><p style=";text-align:right;direction:rtl">  ูุชูุงูู ูุฐุง ุงูุนููุฏ ูุณุจุฉ ุนุฏุฏ ุงูุชุตุงุฑุงุช ูู ูุฑูู ุฅูู ุฃุนูู ูุคุดุฑ ููุนุงู.  ุจุงููุณุจุฉ ูุฃูุถู ูุฑูู ุ ูููู ูุฐุง ุงููุคุดุฑ ูู 1 ุ ุฃูุง ุจุงููุณุจุฉ ููุจุงูู ููู ุฃูู ุ ููุฐุง ูุชููู ุนูู ูุฌุงุญ ุงูููุณู. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ูู ุงูุฅุถุงูุงุช ุ ูุญุชูู ุงูุฌุฏูู ุนูู ุงููููุฐุฌ ุงูุชุงูู: </p><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  TeamName </th><th>  WINS </th><th>  CumWins </th><th>  ุนุงู </th><th>  cumrank </th><th>  value_rel </th></tr></thead><tbody><tr><td>  ูุฎุฒ ุงูุฎูู </td><td>  59 </td><td>  59 </td><td>  2004 </td><td>  3 </td><td>  0.9516129 </td></tr><tr><td>  ูุฎุฒ ุงูุฎูู </td><td>  63 </td><td>  122 </td><td>  2005 </td><td>  1 </td><td>  1.0000000 </td></tr><tr><td>  ูุฎุฒ ุงูุฎูู </td><td>  58 </td><td>  180 </td><td>  2006 </td><td>  2 </td><td>  0.9729730 </td></tr><tr><td>  ูุฎุฒ ุงูุฎูู </td><td>  56 </td><td>  236 </td><td>  2007 </td><td>  1 </td><td>  1.0000000 </td></tr></tbody></table></div><br><p style=";text-align:right;direction:rtl">  ูุชู ุนุฑุถ ูุฑูู ูุงุญุฏ ููุท ูู ุงูุฌุฏูู ูุชูุถูุญ ุงูุชุฑุงูููุฉ.  ุชุชู ูู ูุฐู ุงูุฅุฌุฑุงุกุงุช ุ ููุง ูู ุชุบููุฑ ุงูุงุณู ุ ูุน ุณูุณูุฉ ูู ุงูุฃููุงุณ ุงููุฑุจุนุฉ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">table1 &lt;- table1[ ,.(TeamName, WINS)][ , CumWins := cumsum(WINS), by = "TeamName"][ ,year := rep(seq(2004, 2018), each = length(unique(table1$TeamName)))][ , cumrank := frank(-CumWins, ties.method = "random"), by = "year"][ , value_rel := CumWins/CumWins[cumrank==1], by = "year"]</code> </pre> <br><h2 id="izmenenie-zalivki-stolbcov-so-standartnoy-na-cveta-komand" style=";text-align:right;direction:rtl">  ุชุบููุฑ ููุก ุงูุฃุนูุฏุฉ ูู ุงููุนูุงุฑ ุฅูู ุฃููุงู ุงููุฑู. </h2><br><p style=";text-align:right;direction:rtl">  ููููู ูุชุงุจุนุฉ ุฅูุดุงุก ุงูุฑุณูู ุงูุจูุงููุฉ ุนูู ุงูููุฑ ุ ูููู ููุงู ุ ููุง ูุจุฏู ูู ุ ููุทุฉ ูููุฉ: ููู ุงูุฃุนูุฏุฉ ูู ุงูุฑุณู ุงูุจูุงูู.  ููููู ุชุฑู ููุญุฉ <code>ggplot2</code> ุงูููุงุณูุฉ ุ ูููู ูุฐุง ุฎูุงุฑ ุณูุก.  ุฃููุงู ุ ูุจุฏู ูู ุฃููุง ูุจูุญุฉ.  ูุซุงููุง ุ ูุฌุนู ูู ุงูุตุนุจ ุงูุนุซูุฑ ุนูู ูุฑูู ุนูู ุงูุฑุณู ุงูุจูุงูู.  ุจุงููุณุจุฉ ูุนุดุงู ุงูุฏูุฑู ุงูุงููุฑูู ูููุญุชุฑููู ุ ูุฑุชุจุท ูู ูุฑูู ุจููู ูุนูู: ุจูุณุทู ุฎุถุฑุงุก ุ ุดููุงุบู ุญูุฑุงุก ุ ุณุงูุฑุงููุชู ุฃุฑุฌูุงููุฉ ุ ุฅูุฎ.  ูุฐูู ุ ูุณุงุนุฏ ุงุณุชุฎุฏุงู ููู ุงูุฃูุฑ ูู ุฃุนูุฏุฉ ุงูุชุนุจุฆุฉ ูู ุงูุชุนุฑู ุนููู ุจุดูู ุฃุณุฑุน ุ ุนูู ุงูุฑุบู ูู ููุฑุฉ ุงูููู ุงูุฃุฒุฑู ูุงูุฃุญูุฑ. </p><br><p style=";text-align:right;direction:rtl">  ููููุงู ุจุฐูู ุ ูู ุจุฅูุดุงุก table <code>table_color</code> ุจุงุณู ุงูุฃูุฑ ููููู ุงูุฑุฆูุณู.  ุงูุฃููุงู ูุฃุฎูุฐุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">teamcolorcodes.com</a> . </p><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><thead><tr><th>  TeamName </th><th>  TEAM_color </th></tr></thead><tbody><tr><td>  ุงูุตููุฑ </td><td>  # E03A3E </td></tr><tr><td>  ุณูุชูุณ </td><td>  # 007A33 </td></tr><tr><td>  ุดุจูุงุช </td><td>  # 000000 </td></tr></tbody></table></div><br><p style=";text-align:right;direction:rtl">  ูุน ุฌุฏูู ุงูุฃููุงู ุ ุชุญุชุงุฌ ุฅูู ุงูููุงู ุจูุนุงูุฌุฉ ุฃุฎุฑู.  ูุฃู  ุนูุฏ ุงุณุชุฎุฏุงู ุนูุงูู ุงูุชุขูุฑ ุ ูุชุบูุฑ ุชุฑุชูุจ ุงููุฑู.  ุงูุฃูู ูู ุงููุงุฆูุฉ ูู ูููุงุฏูููุง 76 ุ ุจุตูุชู ุงููุงูู ุงููุญูุฏ ููุงุณู "ุงูุฑููู" ุ ุซู ููููุง ููุฃุจุฌุฏูุฉ.  ูุฐูู ูุญู ุจุญุงุฌุฉ ุฅูู ุชุฑุชูุจ ุงูุฃููุงู ุจููุณ ุงูุชุฑุชูุจ ุ ุซู ุงุณุชุฎุฑุงุฌ ุงููุชุฌู ุงูุฐู ูุญุชูู ุนูููุง ูู ุงูุฌุฏูู.  ููุฏ ูุนูุช ุฐูู ุนูู ุงููุญู ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> table_color &lt;- table_color[order(TeamName)] cols &lt;- table_color[, "TEAM_color"]</code> </pre> <br><h2 id="postroenie-grafika" style=";text-align:right;direction:rtl">  ุงูุชุขูุฑ </h2><br><p style=";text-align:right;direction:rtl">  ูุญู ูุจูู ุญููุง ูุฎุทุทูุง ูุงุญุฏูุง ููุท ุ ูุงูุฐู ูุญุชูู ุนูู ุฌููุน ูุคุดุฑุงุช ุงูุงูุชุตุงุฑุงุช ุงูุจุงูุบ ุนุฏุฏูุง 450 (15 ูุตูููุง * 30 ูุฑูููุง) ุ ุซู "ููุณููุง" ุนูู ุงููุชุบูุฑ ุงูุถุฑูุฑู (ูู ุญุงูุชูุง ุ ุจุงูุณููุงุช) ุจุงุณุชุฎุฏุงู ุงููุธุงุฆู ูู ุงูุญุฒูุฉ <code>gganimate</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">gg &lt;- ggplot(table1, aes(cumrank, group = TeamName, fill = as.factor(TeamName), color = as.factor(TeamName))) + geom_tile(aes(y = CumWins/2, height = CumWins, width = 0.7), color = NA, alpha = 0.8)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ูููู ุจุฅูุดุงุก ุฑุณู ุจุงุณุชุฎุฏุงู ูุธููุฉ <code>ggplot</code> .  ูู ุงููุณูุทุฉ <code>aes</code> ุ ุญุฏุฏ ููููุฉ ุนุฑุถ ุงููุชุบูุฑุงุช ูู ุงูุฌุฏูู ุนูู ุงููุฎุทุท.  ูููู ุจุชุฌููุนูุง ุญุณุจ TeamName ุ ูุณุชููู <code>fill</code> <code>color</code> ูุณุคููุฉ ุนู ููู ุงูุฃุนูุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุฃุนูุฏุฉ ุงูุญููููุฉ ูุณูููุง ููุณุช ุตุญูุญุฉ ุชูุงูุง.  ุจุงุณุชุฎุฏุงู <code>geom_tile</code> ูููู "ุจุชูุณูู" ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ุนูู ุงูุฑุณู ุงูุจูุงูู ุฅูู ูุณุชุทููุงุช.  ูููุง ููู ูุซุงู ููุฎุทุท ูู ูุฐุง ุงูููุน: <br><img src="https://habrastorage.org/getpro/habr/post_images/210/405/916/2104059165b8000275951025c2020b5b.jpg"><br>  ูููู ููุงุญุธุฉ ููู ูุชู "ุชูุณูู" ุงูุฑุณู ุงูุจูุงูู ุฅูู ูุฑุจุนุงุช (ูุชู ุงูุญุตูู ุนูููุง ูู ุงููุณุชุทููุงุช ุจุงุณุชุฎุฏุงู ุงูุทุจูุฉ <code>coord_equal()</code> ) ุ ุซูุงุซุฉ ูู ูู ุนููุฏ.  ูููู ุจูุถู <code>width</code> ุงููุณูุทุฉ ุฃูู ูู ูุงุญุฏ ุ ูุฅู ุงูุจูุงุท ุงูุฎุงุต ุจูุง ูุฃุฎุฐ ุดูู ุงูุฃุนูุฏุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> geom_text(aes(y = 0, label = paste(TeamName, " ")), vjust = 0.2, hjust = 1, size = 6) + geom_text(aes(y = CumWins, label = paste0(" ",round(CumWins))), hjust = 0, size = 7) + coord_flip(clip = "off", expand = FALSE) + scale_fill_manual(values = cols) + scale_color_manual(values = cols) + scale_y_continuous(labels = scales::comma) + scale_x_reverse() + guides(color = FALSE, fill = FALSE) +</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุฃุถูู ุชูููุนูู ุจุงุณุชุฎุฏุงู <code>geom_text</code> : ุงุณู ุงููุฑูู ูุนุฏุฏ ูุฑุงุช ุงูููุฒ.  <code>coord_flip</code> ุงููุญุงูุฑ ุ ู <code>scale_fill_manual</code> ู <code>scale_color_manual</code> ูุบูุฑ ููู ุงูุฃุนูุฏุฉ ุ ู <code>scale_x_reverse</code> "ููุณุน" ูุญูุฑ X. ูุงุญุธ ุฃููุง ูุฃุฎุฐ ุงูุฃููุงู ูู ูุชุฌู <code>cols</code> ุชู ุฅูุดุงุคู ูุณุจููุง. </p><br><p style=";text-align:right;direction:rtl">  ุชุญุฏุฏ ุทุจูุฉ <code>theme</code> ุฎูุงุฑุงุช ูุถุจุท ุนุฑุถ ุงูุฑุณู ุงูุจูุงูู.  ูุดุงุฑ ููุง ุฅูู ููููุฉ ุนุฑุถ ุฑุคูุณ ูุชุณููุงุช ุงููุญุงูุฑ (ุจุฃู ุญุงู ูู ุงูุฃุญูุงู ุ ูุง ูุฎุจุฑูุง <code>element_blank</code> ุนูู ุงูุฌุงูุจ ุงูุฃููู ูู ุงููุณุงูุงุฉ).  ูููู ุจุฅุฒุงูุฉ ุฎุทูุท ุงูุดุจูุฉ ุ ุงูุฎูููุฉ ุ ุงูุฅุทุงุฑ ุ ุงูุดุจูุฉ ุนูู ุงููุญูุฑ Y. <code>plot.title</code> ุงููุณูุทุงุช <code>plot.title</code> ุ <code>plot.subtitle</code> ุ <code>plot.caption</code> ุ ูููุง ุจุชุนููู ุฎูุงุฑุงุช ุงูุนุฑุถ ุงูุฎุงุตุฉ ุจุงูุนููุงู ูุงูุนููุงู ุงููุฑุนู ูุชูููุน ุงููุฎุทุท.  ููุฒูุฏ ูู ุงูุชูุงุตูู ุญูู ูุนูู ุฌููุน ุงููุนููุงุช ุ ุฑุงุฌุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">gglot2</a> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">theme(axis.line=element_blank(), axis.text.x=element_blank(), axis.text.y=element_blank(), axis.ticks=element_blank(), axis.title.x=element_blank(), axis.title.y=element_blank(), legend.position="none", panel.background=element_blank(), panel.border=element_blank(), panel.grid.major=element_blank(), panel.grid.minor=element_blank(), panel.grid.major.x = element_line( size=.1, color="grey" ), panel.grid.minor.x = element_line( size=.1, color="grey" ), plot.title=element_text(size=25, hjust=0.5, face="bold", colour="black", vjust=-1), plot.subtitle = element_text(size = 15), plot.caption =element_text(size=15, hjust=0.5, color="black"), plot.background=element_blank(), plot.margin = margin(2,2, 2, 4, "cm"))</code> </pre> <br><h2 id="sozdanie-animacii" style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุงูุฑุณูู ุงููุชุญุฑูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ูู ุฃุชุทุฑู ุฅูู ุงุณุชุฎุฏุงู ูุธููุฉ <code>transition_states</code> ุ ููุฐุง ุงูุฌุฒุก ููุงุซู ูููุดูุฑ ุณุงุจู ูู ุญูู ุญุจุฑู.  ุฃูุง ุจุงููุณุจุฉ ุฅูู <code>labs</code> ูุฅููุง ุชุฎูู ุนููุงู ุงููุฎุทุท ูุนููุงูู ุงููุฑุนู ูุชูููุนู.  ูุชูุญ ูู ุงุณุชุฎุฏุงู <code>{closest_state}</code> ุนุฑุถ ูู ุณูุฉ ูุญุฏุฏุฉ ุนูู ุงูุฑุณู ุงูุจูุงูู ุ ุงูุฐู ูุฑุงู ุญุงูููุง. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> anim &lt;- gg + transition_states(year, transition_length = 4, state_length = 1) + view_follow(fixed_x = TRUE) + labs(title = "Cumulative Wins by teams in seasons", subtitle = "Season: {closest_state}", caption = "Telegram: @NBAatlantic, Twitter: @vshufiskiy\n Data sourse: stats.nba.com")</code> </pre> <br><h2 id="funkciya-nba_cumulative_wins-dlya-sozdaniya-grafikov" style=";text-align:right;direction:rtl">  ุชุนูู <code>nba_cumulative_wins</code> ูุฅูุดุงุก ุงููุฎุทุทุงุช. </h2><br><p style=";text-align:right;direction:rtl">  ุชุนูู ูุธุงุฆู ุงููุชุงุจุฉ ุนูู ุชุจุณูุท ูุชุณุฑูุน ุนูููุฉ ุงูุญุตูู ุนูู ุงููุชูุฌุฉ ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุงุณุชุฎุฏุงู ุงูุฑูุฒ ุฃูุซุฑ ูู ูุฑุฉ.  ุนุงุฏุฉู ูุง ูููู ููุฏุงูุฉ ูู R ุงูุดูู ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">_ &lt;- function( ) { _ }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญุชุงุฌ ุฃููุงู ุฅูู ููู ุงููุนููุงุช ุงูุชู ุชุฑูุฏ ุชุบููุฑูุง ุจุงุณุชุฎุฏุงู ุงููุธููุฉ ุ ูุณูู ุชุนุชูุฏ ุงููุณุงุฆุท ุงูุฎุงุตุฉ ุจูุง ุนูู ูุฐุง.  ุงููุณูุทุฉ ุงูุฃููู ูู ุงุณู ุฌุฏูู ุงูุจูุงูุงุช ุงูุฐู ูุชู ุฅุฏุฎุงูู.  ูุชูุญ ูู ูุฐุง ุฅุนุงุฏุฉ ุชุณููุชู ุฅุฐุง ุธูุฑุช ูุซู ูุฐู ุงูุฑุบุจุฉ ุ ูุน ุนุฏู ุชุบููุฑ ุฃู ุดูุก ูู ุงููุธููุฉ ููุณูุง.  ุฃุฑูุฏ ุฃูุถูุง ุฃู ูุชู ุนุฑุถ ุฃู ุนุฏุฏ ูู ุงูุฃูุงูุฑ ุนูู ุงูุฑุณู ุงูุจูุงูู: ูู ุฃูุฑ ูุงุญุฏ (ูุง ูุนูู ูู) ุฅูู 30 (ูู ูุนุฏ ููุงู ุฃู ุฃูุฑ).  ุฃุฑูุฏ ุฃูุถูุง ุฃู ุฃููู ูุงุฏุฑูุง ุนูู ุงูุชูููุฑ ูู ุฃู ูุชุฑุงุช ุฒูููุฉ ุฎูุงู ุงูู 15 ุนุงููุง ุงูุชู ูุฏูู ุจูุงูุงุช ุนููุง.  ูู ูุฐุง ูุชู ุชูููุฐู ูู ูุฐุง ุงูุดูู ูู ุงููุธุงุฆู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">nba_cumulative_wins &lt;- function(table, elements, first_season, last_season){ ... }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุญูุซ <code>table</code> ูู ุงุณู ุงูุฌุฏูู ูุน ุฅุฏุฎุงู ุงูุจูุงูุงุช ุ <br>  <code>elements</code> - ุฃุณูุงุก ุชูู ุงููุฑู ุงูุชู ูุฌุจ ุนุฑุถูุง ุนูู ุงููุฎุทุท <br>  <code>first_season</code> - ุฃูู ููุณู ูุชู ุนุฑุถู ุนูู ุงูุฑุณู ุงูุจูุงูู <br>  <code>last_season</code> - ุงูููุณู ุงูุฃุฎูุฑ ุงูุฐู ุณูุชู ุนุฑุถู ุนูู ุงูุฑุณู ุงูุจูุงูู. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุชู ุงุณุชุฎุฏุงู ุงููุณูุทุฉ ุบุงูุจูุง ุจูููุฉ ูุญุฏุฏุฉ ุ ูููููู ุชุนููููุง ุงูุชุฑุงุถููุง.  ุจุนุฏ ุฐูู ุ ุฅุฐุง ุชู ุญุฐููุง ุจูู ูุณูุทุงุช ุงูุฏุงูุฉ ุ ูุณูุชู ุงุณุชุจุฏุงู ูุฐู ุงููููุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ููุช ุจุงูุชุณุฌูู </p><br><p style=";text-align:right;direction:rtl"> <code>nba_cumulative_wins &lt;- function(table, elements, first_season, last_season = 2018)</code> </p> <br><p style=";text-align:right;direction:rtl">  ุณูุชู ุจูุงุก ุงูุฌุฏุงูู ุญุชู ููุณู 2018/19 ุ ูุง ูู ูุฑุฏ ุฎูุงู ุฐูู. </p><br><h2 id="rabota-s-argumentami-elements-first_season-last_season" style=";text-align:right;direction:rtl">  ุงูุนูู ูุน <code>elements</code> ุงููุณุงุฆุท ุ <code>first_season</code> ุ <code>last_season</code> </h2><br><p style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ูุณูุทุฉ <code>elements</code> ุ ูููููุง ุชุญุฏูุฏ ุงุณู ุงููุฑู ุงูุชู ูุฑูุฏ ุฑุคูุชูุง ุนูู ุงููุฎุทุท.  ูุนุฏ ูุฐุง ููุงุณุจูุง ุฌุฏูุง ุนูุฏูุง ูููู ููุงู ูุฑููุงู ุฃู 3 ูุฑู ูู ูุฐุง ุงููุจูู ุ ูููู ุฅุฐุง ุฃุฑุฏูุง ุนุฑุถ ุงูุฏูุฑู ุจุฃูููู ุ ูุณูู ูุชุนูู ุนูููุง ูุชุงุจุฉ <code>elements = c()</code> ูุงุณู ุฌููุน ุงููุฑู ุงูุซูุงุซูู ุงูููุฌูุฏุฉ ุจูู ููุณูู. </p><br><p style=";text-align:right;direction:rtl">  ูุฐูู ูุฑุฑุช "ุชูุณูู" ููู ุงูุฅุฏุฎุงู ุงูุฎุงุตุฉ ุจูุณูุทุฉ <code>elements</code> ุฅูู ุนุฏุฉ ูุฌููุนุงุช. <br>  ูููู ุฃู ุชููู ุงูุฏุงูุฉ <code>nba_cumulative_wins</code> ุจุฅูุดุงุก ุฑุณูู ุจูุงููุฉ ูููุฑู ุงููุฑุฏูุฉ ุฃู ุงูุฃูุณุงู ุฃู ุงููุคุชูุฑุงุช ุฃู ุงูุฏูุฑู ุงูุงููุฑูู ูููุญุชุฑููู ููู.  ููุฐุง ุ ุงุณุชุฎุฏูุช ุงูุจูุงุก ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> select_teams &lt;- unique(table1$TeamName) select_div &lt;- unique(table1$Division) select_conf &lt;- unique(table1$Conference) select_nba &lt;- "NBA" table1 &lt;- if(elements %in% select_teams){ table1[TeamName %in% elements] } else if (elements %in% select_div){ table1[Division %in% elements] } else if(elements %in% select_conf){ table1[Conference %in% elements] } else if(elements == "NBA"){ table1 } else { NULL }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญุชูู <code>select_</code> ุงูุฑููุฒ ุงูุฑูุฒูุฉ) ุนูู ุฃุณูุงุก ุฌููุน ุงููุฑู ุงูุซูุงุซูู ุ 6 ุฃูุณุงู ุ ูุคุชูุฑูู ู NBA ุ ูุชุชุฑู ุงููุธููุฉ ุงููุฑูุฏุฉ ุงุณููุง ูุฑูุฏูุง ูุงุญุฏูุง ููุท ุ ุจุฏูุงู ูู 15 (ุญุณุจ ุนุฏุฏ ุณููุงุช ุงูุจูุงูุงุช). </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุจุงุณุชุฎุฏุงู <code>if...else</code> ุ ูุชู ุงูุชุญูู ูู ูุณูุทุฉ <code>elements</code> ุงููุฏุฎูุฉ ุนูู ุฃููุง ุชูุชูู ุฅูู ุฅุญุฏู ุงููุฆุงุช ( <code>%in%</code> ุงุณุชุฎุฏุงู <code>%in%</code> ูุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุงูุนูุตุฑ ููุชูู ุฅูู ุงููุชุฌู) ุ ููุชู ุชุนุฏูู ุฌุฏูู ุงูุจูุงูุงุช ููููุง ูุฐูู.  ุงูุขู ุ ุฅุฐุง ุฃุฑุฏุช ุฃู ุฃุฑู ูุชุงุฆุฌ ุงููุฑู ุงูุชู ุชูุนุจ ูู ุฏูุฑู ุงูุฌููุจ ุงูุบุฑุจู ุจุฏูุงู ูู ุฐูู </p><br><p style=";text-align:right;direction:rtl"> <code>elements = c("Mavericks", "Spurs", "Rockets", "Grillies", "Pelicans")</code> </p> <br><p style=";text-align:right;direction:rtl">  ููุท ุฃุฏุฎู </p><br><p style=";text-align:right;direction:rtl">  <code>elements = "Southwest"</code> ุ ูุงูุชู ูู ุฃุณุฑุน ุจูุซูุฑ ูุฃูุซุฑ ููุงุกูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุณุจุจ ุฅููุงููุฉ ุงุฎุชูุงุฑ ุงูููุงุณู ุ ูุชุบูุฑ ุงูุนูู ูุน ุงูุชูุงุฑูุฎ ุฃูุถูุง.  ูู ุงูุจุฏุงูุฉ ุ ูุถุงู ุงูุณุทุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">table1 &lt;- table1[SeasonID &gt;= as.numeric(paste(2, first_season, sep = "")) &amp; SeasonID &lt;= as.numeric(paste(2, last_season, sep = ""))]</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐูู ุฃุชุฑู ูู ุงูุฌุฏูู ููุท ุชูู ุงูุตููู ุงูุชู ุชูุน ูู ุงููุชุฑุฉ ุงูุฒูููุฉ ุงููุฎุชุงุฑุฉ ูุฏููุง.  ูุชุบูุฑ ุฑูุฒ ุฅูุดุงุก ุนููุฏ <code>year</code> ุฃูุถูุง.  ุงูุขู ูุจุฏู ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">table1 &lt;- table1[ ,year := rep(seq(first_season, last_season), each = length(unique(table1$TeamName)))]</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููุง ูุชุนูู ุจุชุฌููุน ุงูุนูุงุตุฑ ุ ูุฅู ุฅุฌุฑุงุก ุงูุญุตูู ุนูู ุงูุฃููุงู ุงููุทููุจุฉ ูุนูุฏ.  ุงูุญูููุฉ ูู ุฃูู ูู ุงูุฌุฏูู <code>table_color</code> ููุท ุฃุณูุงุก ุงูุฃูุงูุฑ.  ูุฐูู ุ ูุญู ุจุญุงุฌุฉ ุฅูู "ุฅุนุงุฏุฉ" ุชููุตุงุชูุง ูุฑุฉ ุฃุฎุฑู.  ููููุงู ุจุฐูู ุ ุงุณุชุฎุฏู <code>if...else</code> ุจูุงุก ูุฑุฉ ุฃุฎุฑู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> elements1 &lt;- if (elements == "NBA"){ c("Hawks", "Celtics", "Nets", "Hornets", "Bulls", "Cavaliers", "Mavericks", "Nuggets", "Pistons", "Warriors", "Rockets", "Pacers", "Clippers", "Lakers", "Grizzlies", "Heat", "Bucks", "Timberwolves", "Pelicans", "Knicks", "Thunder", "Magic", "76ers", "Suns", "Trail Blazers","Kings", "Spurs", "Raptors", "Jazz", "Wizards") } else if (elements == "West") { c("Mavericks","Nuggets", "Warriors", "Rockets", "Clippers", "Lakers", "Grizzlies","Timberwolves", "Pelicans", "Thunder", "Suns", "Trail Blazers","Kings", "Spurs", "Jazz") } else if (elements == "East") { c("Hawks", "Celtics", "Nets", "Hornets", "Bulls", "Cavaliers","Pistons", "Pacers", "Heat", "Bucks", "Knicks", "Magic", "76ers", "Raptors", "Wizards") } else if (elements == "Pacific") { c("Warriors", "Clippers", "Lakers", "Suns", "Kings") } else if (elements == "Southeast") { c("Magic", "Hornets", "Heat", "Hawks", "Wizards") } else if (elements == "Southwest") { c("Mavericks", "Grizzlies", "Pelicans", "Rockets", "Spurs") } else if (elements == "Central") { c("Bucks", "Pacers", "Pistons", "Bulls", "Cavaliers") } else if (elements == "Atlantic") { c("Knicks", "Nets", "Celtics", "Raptors", "76ers") } else if (elements == "Northwest") { c("Nuggets", "Trail Blazers", "Jazz", "Thunder", "Suns") } else { elements }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ูู ุจุฅูุดุงุก ุฌุฏูู ุจุฃุณูุงุก ุงูุฃูุงูุฑ ุงูุชู ูุญุชุงุฌูุง ุ <code>table_color</code> ุจุชูุตูู ูุฐุง ุงูุฌุฏูู ุจู <code>table_color</code> ุจุงุณุชุฎุฏุงู ุฏุงูุฉ <code>inner_join</code> ูู ุญุฒูุฉ <code>dplyr</code> .  ูุชุถูู <code>inner_join</code> ููุท ุงูุญุงูุงุช ุงูุชู ุชุชุทุงุจู ูู ููุง ุงูุฌุฏูููู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> table_elements1 &lt;- data.table(TeamName = elements1) table_color &lt;- table_color[order(TeamName)] inner_table_color &lt;- inner_join(table_color, table_elements1) cols &lt;- inner_table_color[, "TEAM_color"]</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุบูุฑ ุงููุธููุฉ ูุฌุงุก ุงูุนููุงู ูุงูุนููุงู ุงููุฑุนู.  ูุฃุฎุฐูู ูุฐู ุงููุธุฑุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">anim &lt;- gg + transition_states(year, transition_length = 4, state_length = 1) + view_follow(fixed_x = TRUE) + labs(title = paste("Cumulative Wins by teams in seasons", first_season, "-", last_season, sep = " "), subtitle = paste(if (elements %in% select_div ){ paste(elements, "Division", sep = " ") } else if (elements %in% select_conf ){ paste("Conference", elements, sep = " ") }, "Season: {closest_state}", sep = " "), caption = "Telegram: @NBAatlantic, Twitter: @vshufiskiy\nData sourse: stats.nba.com")</code> </pre> <br><h2 id="rendering" style=";text-align:right;direction:rtl">  ุฃุฏุงุก </h2><br><p style=";text-align:right;direction:rtl">  ุนูุงูุฉ ุนูู ุฐูู ุ ูู ูุฐุง ูุฑุฆู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">animate(anim, nframes = (last_season - first_season + 1) * (length(unique(table1$TeamName)) + 20), fps = 20, width = 1200, height = 1000, renderer = gifski_renderer(paste(elements[1], "cumwins.gif", sep = "_")))</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฏ ุงุฎุชุฑุช ุงูุฑูู ูู <code>nframes</code> ุชุฌุฑูุจู ุ ุจุญูุซ ุชุจุนูุง ูุนุฏุฏ ุงูุฃูุงูุฑ ุงููุญุฏุฏุฉ ุ ุชุฒูุฏ / ุชููุต ุงูุณุฑุนุฉ. </p><br><h2 id="grafik" style=";text-align:right;direction:rtl">  ุฌุฏูู ุงูููุงุนูุฏ </h2><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e15/803/11d/e1580311d19d5f814b201c32237a3ed5.gif"></p><br><p style=";text-align:right;direction:rtl">  ุขูู ุฃู ูููู ููุตุจู ูุซูุฑูุง ููุงูุชูุงู.  ููุฏ ูุดุฑูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌูุซุจ</a> . </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ููุชููุง ุจุงููููู ุงูุฑูุงุถู ููุฐู ุงูุชุตูุฑุงุช ุ ููููู ุฒูุงุฑุฉ ูุฏููุชู ุนูู sports.ru "ุนูู ุฌุงูุจู ุงููุญูุท ุงูุฃุทูุณู" </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar458904/">https://habr.com/ru/post/ar458904/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar458892/index.html">ุงูุชุฑุงุญุงุช ุจุดุฃู ููุงุทู ุงูุถุนู ูุญูุงูุฉ ููุงุฐุฌ ุงูุชุนูู ุงูุขูู</a></li>
<li><a href="../ar458894/index.html">ุงูุฃุดุฎุงุต ุงูุนุงุฏููู ูุงูุดุจูุงุช ุงูุชู ูุนูุดูู ูููุง</a></li>
<li><a href="../ar458896/index.html">ุฌุงูุง ุณูุฑูุจุช ุงููุธูููุฉ: ูุง ูู ุงููุธุงุฆู ุงูุนููุง ูููุงุฐุง ุชููู ููุงู ุญุงุฌุฉ ุฅูููุงุ</a></li>
<li><a href="../ar458900/index.html">ุฎุฑุงุทูุด ูุญุฏุฉ ุงูุชุญูู ูููุฏู</a></li>
<li><a href="../ar458902/index.html">5 ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ ูููุจุชุฏุฆูู ุจูุซูู</a></li>
<li><a href="../ar458906/index.html">[ููุงุชุฑููุจุฑุฌ ุ ุฅุนูุงู] Flutteron - ูุฑุดุฉ ุนูู ุญูู ุชุทููุฑ Flutter</a></li>
<li><a href="../ar458908/index.html">ูุณุญ ุงููุณุชูุฏุงุช ุนุจุฑ ุงูุดุจูุฉ</a></li>
<li><a href="../ar458910/index.html">ููุงุฑูุฉ PostgreSQL ูุน ุตูุญุงุช ููููุณ ุงููุจูุฑุฉ</a></li>
<li><a href="../ar458912/index.html">ุงููุฌุฑุฉ ุฅูู ุฒููุจุฑุง ูุน imapsync</a></li>
<li><a href="../ar458914/index.html">ูุง (ูุง) ุชุญุชุงุฌ ุฅูู ูุนุฑูุชู ูุฅูุดุงุก ุฃูุนุงุจ ุนูู ุงููุญุฏุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>