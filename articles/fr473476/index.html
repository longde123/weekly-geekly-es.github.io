<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèòÔ∏è üèá üë≤üèª V√©rification de l'encapsuleur OpenCvSharp sur OpenCV avec PVS-Studio üéÖüèº ü§∏üèΩ üßöüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="OpenCV est une biblioth√®que d'algorithmes de vision par ordinateur, de traitement d'image et d'algorithmes num√©riques √† usage g√©n√©ral avec open source...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>V√©rification de l'encapsuleur OpenCvSharp sur OpenCV avec PVS-Studio</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/473476/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mr/0s/oi/mr0soiovipbs1ma0roktme3nj1i.png" alt="Figure 2"></div><br>  OpenCV est une biblioth√®que d'algorithmes de vision par ordinateur, de traitement d'image et d'algorithmes num√©riques √† usage g√©n√©ral avec open source, famili√®re √† de nombreux d√©veloppeurs C ++.  En plus de C ++, OpenCV est √©galement en cours de d√©veloppement pour Python, Java, Ruby, Matlab, Lua et d'autres langages.  Puisque parmi ces langages il n'y a pas mon principal, C #, j'ai d√©cid√© de faire attention √† la biblioth√®que OpenCvSharp - wrapper sous C # et de v√©rifier ce projet.  Ce qui est arriv√© de cela peut √™tre trouv√© dans cet article. <br><a name="habracut"></a><br><h2>  Pr√©sentation </h2><br>  Auparavant, avant de rejoindre PVS-Studio, j'√©tais engag√© dans la robotique lors d'expositions.  Mes t√¢ches comprenaient le correctif le plus √©l√©mentaire (en cas de panne majeure, le robot √©tait confi√© √† une autre personne), ainsi que le d√©veloppement d'une grande vari√©t√© de logiciels et d'utilitaires. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/s9/sk/p-/s9skp-nztgw-u2nt8j0dfuvae3m.png" alt="Figure 1"></div><br>  <i>Fatigu√© et r√©cemment arriv√© dans une nouvelle ville, j'ai accompagn√© un robot KIKI fra√Æchement d√©ball√©.</i> <br><br>  En parlant de d√©veloppement.  C'√©tait assez dr√¥le.  Chaque fois qu'une id√©e est venue √† quelqu'un de l'√©quipe, quoi d'autre surprendrait les invit√©s des expositions, nous avons soulev√© cette question pour une discussion g√©n√©rale et, si l'id√©e √©tait bonne, nous l'avons prise pour la mise en ≈ìuvre.  Une fois, l'id√©e nous est venue de cr√©er une cr√©ature qui r√©pond √† un visage humain avec un discours de bienvenue. <br><br>  Apr√®s avoir cherch√© sur Internet une biblioth√®que pour mes besoins, je suis tomb√© sur le site OpenCV, des biblioth√®ques d'algorithmes de vision par ordinateur.  J'ai √©t√© bient√¥t d√©√ßu - OpenCV a √©t√© impl√©ment√© en C ++.  Ma connaissance des avantages que j'ai retir√©s de l'universit√© n'√©tait clairement pas suffisante.  Par cons√©quent, en parcourant bri√®vement Google, je suis tomb√© sur OpenCvSharp - wrapper de cette biblioth√®que sous C #, mon langage principal.  Six mois se sont √©coul√©s depuis lors, le programme a d√©j√† √©t√© √©crit et utilis√© depuis longtemps, et j'ai d√©cid√© de me mettre √† l'abri d'OpenCvSharp et de v√©rifier son code source √† l'aide de l'analyseur statique PVS-Studio. <br><br><h2>  Projet audit√© </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OpenCvSharp</a> est un wrapper sur OpenCV pour utiliser la biblioth√®que dans des projets C #.  La biblioth√®que OpenCV, d'ailleurs, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nous avons √©galement v√©rifi√©</a> .  Les avantages d'OpenCvSharp incluent une grande collection d'√©chantillons de code, multiplateforme (peut fonctionner sur n'importe quelle plate-forme prise en charge par Mono) et facilit√© d'installation. <br><br>  L'encapsuleur est un petit projet et contient environ 112 200 lignes de code C #.  Parmi ceux-ci, 1,2% sont des commentaires, qui, soit dit en passant, sont en quelque sorte √©trangement petits.  Mais pour un si petit projet, il y a beaucoup d'erreurs.  Dans l'article, j'ai √©crit plus de 20 erreurs, mais il y en avait d'autres qui n'√©taient pas si int√©ressantes ou √©videntes. <br><br><h2>  Analyseur de code PVS-Studio </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PVS-Studio</a> est un outil pour d√©tecter les erreurs et les vuln√©rabilit√©s potentielles dans le code source des programmes √©crits en C, C ++, C # et Java.  Fonctionne sur Windows, Linux et macOS.  Outre le code, les erreurs et les fautes de frappe inaccessibles, PVS-Studio peut d√©tecter les vuln√©rabilit√©s potentielles, comme indiqu√© ci-dessus.  Par cons√©quent, il peut √™tre consid√©r√© comme un outil pour les tests de s√©curit√© des applications statiques (Static Application Security Testing, SAST). <br><br><h2>  Morceaux de code qui ont retenu l'attention lors de l'examen d'un rapport d'analyseur </h2><br>  La m√©thode <i>WriteableBitmapConverter</i> attire imm√©diatement l'attention avec quatre avertissements PVS-Studio du m√™me type: <br><br><ul><li>  V3005 La variable 'optimumChannels [PixelFormats.Indexed1]' est assign√©e √† elle-m√™me.  WriteableBitmapConverter.cs 22 </li><li>  V3005 La variable 'optimumChannels [PixelFormats.Indexed8]' est assign√©e √† elle-m√™me.  WriteableBitmapConverter.cs 23 </li><li>  V3005 La variable 'optimumTypes [PixelFormats.Indexed1]' est assign√©e √† elle-m√™me.  WriteableBitmapConverter.cs 50 </li><li>  V3005 La variable 'optimumTypes [PixelFormats.Indexed8]' est assign√©e √† elle-m√™me.  WriteableBitmapConverter.cs 51 </li></ul><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WriteableBitmapConverter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { optimumChannels = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary &lt;PixelFormat, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); optimumChannels[PixelFormats.Indexed1] = <span class="hljs-comment"><span class="hljs-comment">// &lt;= optimumChannels[PixelFormats.Indexed8] = // &lt;= optimumChannels[PixelFormats.Gray2] = optimumChannels[PixelFormats.Gray4] = optimumChannels[PixelFormats.Gray8] = optimumChannels[PixelFormats.Gray16] = optimumChannels[PixelFormats.Gray32Float] = optimumChannels[PixelFormats.Indexed1] = // &lt;= optimumChannels[PixelFormats.Indexed2] = optimumChannels[PixelFormats.Indexed4] = optimumChannels[PixelFormats.Indexed8] = // &lt;= .... optimumTypes = new Dictionary &lt;PixelFormat, MatType&gt;(); optimumTypes[PixelFormats.Indexed1] = // &lt;= optimumTypes[PixelFormats.Indexed8] = // &lt;= optimumTypes[PixelFormats.Gray2] = optimumTypes[PixelFormats.Gray4] = optimumTypes[PixelFormats.Gray8] = optimumTypes[PixelFormats.Indexed1] = // &lt;= optimumTypes[PixelFormats.Indexed2] = optimumTypes[PixelFormats.Indexed4] = optimumTypes[PixelFormats.Indexed8] = // &lt;= optimumTypes[PixelFormats.BlackWhite] = .... } .... public static class PixelFormats { .... public static PixelFormat Indexed8 { get; } .... public static PixelFormat Indexed1 { get; } .... }</span></span></code> </pre> <br>  La classe <i>PixelFormats est</i> d√©finie dans l' <i>espace de noms System.Windows.Media</i> et est une collection de diff√©rents formats de pixels.  L'analyseur attire l'attention sur le fait que la m√©thode <i>WriteableBitmapConverter</i> r√©affecte les valeurs aux √©l√©ments <i>optimumChannels [PixelFormats.Indexed1]</i> et <i>optimumChannels [PixelFormats.Indexed8]</i> , ce qui n'a aucun sens pratique.  Il n'est pas clair s'il s'agit d'une simple faute de frappe ou d'autre chose.  Soit dit en passant, cette section de code montre clairement les avantages des analyseurs statiques.  Lorsque vous voyez un tas de lignes du m√™me type devant vos yeux, vos yeux commencent √† "flouter" et votre attention se dissipe - il n'est pas surprenant que m√™me apr√®s la r√©vision du code, une faute de frappe se glisse dans le programme.  Et l'analyseur statique n'a pas de probl√®mes d'attention et n'a pas besoin de se reposer, il est donc plus facile pour lui de trouver de telles erreurs. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/1g/ok/vg/1gokvgep_oiqjqsqy9btoh3nncg.png" alt="Figure 5"></div><br>  <i>Ressentez la puissance et la puissance de l'analyse statique.</i> <br><br>  <b>PVS-Studio Warning</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3021</a> Il existe deux instructions 'if' avec des expressions conditionnelles identiques.  La premi√®re instruction ¬´if¬ª contient la m√©thode return.  Cela signifie que la deuxi√®me instruction ¬´if¬ª est insens√©e InputArray.cs 394 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> MatType </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EstimateType</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Type t</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Vec2b)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MatType.CV_8UC2; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Vec3b)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MatType.CV_8UC3; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Vec4b)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MatType.CV_8UC4; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Vec6b)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MatType.CV_8UC(<span class="hljs-number"><span class="hljs-number">6</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Vec2s)) <span class="hljs-comment"><span class="hljs-comment">// &lt;= return MatType.CV_16SC2; .... if (t == typeof(Vec2s)) // &lt;= return MatType.CV_32SC2; .... }</span></span></code> </pre> <br>  Cette erreur est un peu comme la pr√©c√©dente.  Le programmeur a fait une situation o√π la m√™me condition est v√©rifi√©e deux fois.  Dans ce cas, cela n'a pas de sens - alors la branche de l' <i>instruction if</i> "dupliqu√©e" ne sera pas ex√©cut√©e, car: <br><br><ul><li>  si la premi√®re expression conditionnelle est vraie, la m√©thode se termine; </li><li>  si la premi√®re condition est fausse, la seconde sera √©galement fausse, puisque la variable test√©e - <i>t</i> - ne change pas entre les expressions conditionnelles. </li></ul><br>  Le d√©veloppeur doit rev√©rifier ce morceau de code.  Il est probable qu'√† la place de la deuxi√®me variable <i>Vec2s</i> devrait en √™tre une autre. <br><br>  <b>PVS-Studio Warning</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3010</a> La valeur de retour de la fonction 'ToString' doit √™tre utilis√©e.  ImgProcTest.cs 80 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> RectanglesIntersectTypes </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RotatedRectangleIntersection</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">RotatedRect rect1, RotatedRect rect2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Point2f[] intersectingRegion</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> intersectingRegionVec = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VectorOfPoint2f()) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ret = NativeMethods .imgproc_rotatedRectangleIntersection_vector( rect1, rect2, intersectingRegionVec.CvPtr); intersectingRegion = intersectingRegionVec.ToArray(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (RectanglesIntersectTypes) ret; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RotatedRectangleIntersectionVector</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rr1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RotatedRect(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point2f(<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Size2f(<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>), <span class="hljs-number"><span class="hljs-number">45</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rr2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RotatedRect(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point2f(<span class="hljs-number"><span class="hljs-number">130</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Size2f(<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>); Cv2.RotatedRectangleIntersection(rr1, rr2, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> intersectingRegion); .... intersectingRegion.ToString(); }</code> </pre> <br>  La m√©thode <i>RotatedRectangleIntersection</i> renvoie un tableau d'√©l√©ments <i>Point2f</i> via le param√®tre <i>intersectingRegion</i> .  Une fois que le programme a rempli l' <i>intersectingRegion avec des</i> valeurs, la m√©thode <i>ToString ()</i> est appel√©e sur ce tableau <i>.</i>  Avec les √©l√©ments du tableau, aucun changement ne se produit et aucun travail utile n'est effectu√© dans la derni√®re ligne, il y a donc des raisons de soup√ßonner le d√©veloppeur qu'il a simplement oubli√© de le supprimer. <br><br>  <b>Avertissements de PVS-Studio</b> : <br><br><ul><li>  V3021 Il existe deux instructions 'if' avec des expressions conditionnelles identiques.  La premi√®re instruction ¬´if¬ª contient la m√©thode return.  Cela signifie que la deuxi√®me instruction ¬´if¬ª est insens√©e Cv2_calib3d.cs 1370 </li><li>  V3022 L'expression 'objectPoints == null' est toujours fausse.  Cv2_calib3d.cs 1372 </li></ul><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CalibrateCamera</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (objectPoints == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(objectPoints)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (objectPoints == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(objectPoints)); .... }</code> </pre> <br>  Dans ce cas, un fragment de code a √©t√© dupliqu√©, raison pour laquelle deux avertissements sont apparus.  Le premier avertissement indique que les deux <i>instructions if</i> ont la m√™me expression conditionnelle.  Si cette expression est vraie, la m√©thode quittera la branche <i>then-</i> de la premi√®re <i>instruction if</i> .  Pour cette raison, la deuxi√®me condition sera toujours fausse, comme indiqu√© par l'avertissement suivant.  Apparemment, le texte a √©t√© copi√©, mais a oubli√© de corriger. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/cy/db/s1/cydbs1dussvael3m4ihcmwdfw4y.png" alt="Figure 6"></div><br>  <i>Copier-coller mignon.</i> <br><br>  Autres avertissements similaires de l'analyseur: <br><br><ul><li>  V3021 Il existe deux instructions 'if' avec des expressions conditionnelles identiques.  La premi√®re instruction ¬´if¬ª contient la m√©thode return.  Cela signifie que la deuxi√®me instruction ¬´si¬ª est insens√©e Cv2_calib3d.cs 1444 </li><li>  V3022 L'expression 'objectPoints == null' est toujours fausse.  Cv2_calib3d.cs 1446 </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Avertissement</a> <b>PVS-Studio</b> : l'expression <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3022</a> 'label == MarkerValue' est toujours fausse.  Labeller.cs 135 <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Labeller</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> MarkerValue = <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Perform</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Mat img, CvBlobs blobs</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> label = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lastLabel = <span class="hljs-number"><span class="hljs-number">0</span></span>; CvBlob lastBlob = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; h; y++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; w; x++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (imgIn[x + y * step] == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> labeled = labels[y, x] != <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { labeled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Label contour. label++; if (label == MarkerValue) // &lt;= throw new Exception(); .... } .... } .... } } }</span></span></code> </pre> <br>  Dans cette section de code, une variable d' <i>√©tiquette</i> de z√©ro est cr√©√©e.  Lorsqu'une certaine condition est remplie, une peut √™tre ajout√©e √† cette variable.  Dans ce cas, dans le code, la valeur de l' <i>√©tiquette de</i> variable ne change pas vers le bas.  Dans la ligne marqu√©e d'une fl√®che, cette variable est compar√©e √† une constante √©gale √† -1, ce qui n'a aucun sens pratique. <br><br>  <b>PVS-Studio Warning</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3038</a> L'argument a √©t√© pass√© plusieurs fois √† la m√©thode.  Il est possible que d'autres arguments soient pass√©s √† la place.  Cv2_photo.cs 124 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FastNlMeansDenoisingMulti</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... NativeMethods.photo_fastNlMeansDenoisingMulti( srcImgPtrs, srcImgPtrs.Length, dst.CvPtr, imgToDenoiseIndex, templateWindowSize, h, templateWindowSize, searchWindowSize); .... }</code> </pre> <br>  Pour comprendre ce que signifie l'analyseur, regardons les param√®tres de la m√©thode <i>photo_fastNlMeansDenoisingMulti</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">photo_fastNlMeansDenoisingMulti</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> IntPtr[] srcImgs, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> srcImgsLength, IntPtr dst, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> imgToDenoiseIndex, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> temporalWindowSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> h, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> templateWindowSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> searchWindowSize</span></span></span><span class="hljs-function">)</span></span></code> </pre> <br>  Simplifiez encore plus pour le rendre tr√®s √©vident.  Comparez ces lignes: <br><br><pre> <code class="cs hljs">NativeMethods.photo_fastNlMeansDenoisingMulti( .... templateWindowSize, .... templateWindowSize, ....); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">photo_fastNlMeansDenoisingMulti</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> .... </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> temporalWindowSize, .... </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> templateWindowSize, ....</span></span></span><span class="hljs-function">)</span></span></code> </pre> <br>  L'analyseur attire l'attention sur le fait que le d√©veloppeur a utilis√© la variable <i>templateWindowSize</i> deux fois, bien que, tr√®s probablement, <i>temporalWindowSize</i> devrait √™tre √† la place de la premi√®re mention de cette variable.  Il est √©galement suspect que la valeur de <i>temporalWindowSize</i> dans la m√©thode <i>photo_fastNlMeansDenoisingMulti</i> ne <i>soit</i> pas utilis√©e du tout.  Peut-√™tre que cela a √©t√© fait d√©lib√©r√©ment, mais √† la place des d√©veloppeurs, il vaut la peine d'examiner de plus pr√®s ce code, y a-t-il une erreur s'y glissant? <br><br>  Avertissements similaires de l'analyseur: <br><br><ul><li>  V3038 L'argument a √©t√© pass√© plusieurs fois √† la m√©thode.  Il est possible que d'autres arguments soient pass√©s √† la place.  Cv2_photo.cs 149 </li><li>  V3038 L'argument a √©t√© pass√© plusieurs fois √† la m√©thode.  Il est possible que d'autres arguments soient pass√©s √† la place.  Cv2_photo.cs 180 </li><li>  V3038 L'argument a √©t√© pass√© plusieurs fois √† la m√©thode.  Il est possible que d'autres arguments soient pass√©s √† la place.  Cv2_photo.cs 205 </li></ul><br>  L'erreur suivante sera un peu similaire √† la pr√©c√©dente. <br><br>  <b>Avertissement PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3066</a> Ordre incorrect possible des arguments pass√©s √† la m√©thode 'calib3d_Rodrigues_MatToVec': 'matrixM.CvPtr' et 'vectorM.CvPtr'.  Cv2_calib3d.cs 86 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Rodrigues</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">[,] matrix, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] vector, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params">[,] jacobian</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> jacobianM = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mat&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt;()) { NativeMethods.calib3d_Rodrigues_MatToVec (matrixM.CvPtr, vectorM.CvPtr, jacobianM.CvPtr); .... } }</code> </pre> <br>  Regardons les param√®tres <i>calib3d_Rodrigues_MatToVec</i> <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">extern</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calib3d_Rodrigues_MatToVec</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> IntPtr vector, IntPtr matrix, IntPtr jacobian</span></span></span><span class="hljs-function">)</span></span></code> </pre> <br>  Peut-√™tre, lors de l'appel de la m√©thode <i>calib3d_Rodrigues_MatToVec</i> , les arguments <i>matrixM.CvPtr</i> et <i>vectorM.CvPtr</i> ont √©t√© m√©lang√©s.  Les d√©veloppeurs devraient examiner de plus pr√®s ce code.  Il est possible qu'une erreur s'y soit gliss√©e qui interf√®re avec les calculs corrects. <br><br>  <b>PVS-Studio Warning</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3063</a> Une partie de l'expression conditionnelle est toujours fausse si elle est √©valu√©e: data == null.  Mat.cs 3539 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CheckArgumentsForConvert</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(data)); MatType t = Type(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || (data.Length * dataDimension) <span class="hljs-comment"><span class="hljs-comment">// &lt;= (data.Length * dataDimension) % t.Channels != 0) .... }</span></span></code> </pre> <br>  L'analyseur indique que la deuxi√®me <i>donn√©e de</i> contr√¥le <i>== null</i> ne sera jamais <i>vraie</i> , car  si dans la premi√®re condition les <i>donn√©es</i> sont <i>nulles</i> , une exception sera lev√©e et l'ex√©cution du programme n'atteindra pas le deuxi√®me contr√¥le. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/c1/b1/xf/c1b1xfih5imz4n4cifsucaqzrrw.png" alt="Figure 7"></div><br>  <i>Je comprends que vous √™tes d√©j√† fatigu√©, mais il reste tr√®s peu.</i> <br><br>  <b>Avertissement PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3127</a> Deux fragments de code similaires ont √©t√© trouv√©s.  Il s'agit peut-√™tre d'une faute de frappe et la variable 'window' devrait √™tre utilis√©e √† la place de 'src2' Cv2_imgproc.cs 1547 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Point2d </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PhaseCorrelateRes</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (src1 == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(src1)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (src2 == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(src2)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (window == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(src2)); <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... }</span></span></code> </pre> <br>  Et puis l'analyseur a trouv√© une faute de frappe.  Dans cette section du code, la valeur des variables est v√©rifi√©e pour <i>null</i> , et si cette condition est remplie, une exception est lev√©e pour chacune des variables.  Cependant, la variable de <i>fen√™tre</i> n'est pas si simple.  Si cette variable est <i>nulle</i> , une exception est √©galement g√©n√©r√©e pour elle, mais le texte de cette exception est mal orthographi√©.  La <i>fen√™tre</i> variable elle-m√™me n'appara√Æt pas dans le texte de cette exception; √† la place, <i>src2 y</i> est indiqu√©.  Apparemment, la derni√®re condition devrait √™tre la suivante: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (window == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(window));</code> </pre> <br>  <b>Avertissement PVS-Studio</b> : V3142 Code inaccessible d√©tect√©.  Il est possible qu'une erreur soit pr√©sente.  MatOfT.cs 873 <br><br>  Maintenant, pour un changement, regardons le cas o√π l'analyseur a en fait tout √† fait raison lorsqu'il signale un code inaccessible, mais il n'y a pas d'erreur.  C'est le cas quand on peut dire que l'analyseur g√©n√®re un avertissement √† la fois correct et faux en m√™me temps. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> new Mat&lt;TElem&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SubMat</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">params</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Range[] ranges</span></span></span><span class="hljs-function">)</span></span> { Mat result = <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.SubMat(ranges); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Wrap(result); }</code> </pre> <br>  L'analyseur pr√©tend que l' <i>instruction de retour est</i> inaccessible ici.  Pour v√©rifier cela, regardez le corps de la m√©thode <i>SubMat</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Mat </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SubMat</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">params</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Range[] ranges</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NotImplementedException(); <span class="hljs-comment"><span class="hljs-comment">/* if (ranges == null) throw new ArgumentNullException(); ThrowIfDisposed(); CvSlice[] slices = new CvSlice[ranges.Length]; for (int i = 0; i &lt; ranges.Length; i++) { slices[i] = ranges[i]; } IntPtr retPtr = NativeMethods.core_Mat_subMat1(ptr, ranges.Length, ranges); Mat retVal = new Mat(retPtr); return retVal;*/</span></span> }</code> </pre> <br>  Comme vous pouvez le voir, la fonction n'a pas encore √©t√© ajout√©e et l√®ve toujours une exception.  Et l'analyseur a raison lorsqu'il signale un code inaccessible.  Mais cela ne peut pas √™tre qualifi√© de v√©ritable erreur. <br><br>  Les trois erreurs suivantes trouv√©es par l'analyseur sont du m√™me type, mais elles sont tellement cool que je n'ai pas pu m'emp√™cher de toutes les √©crire. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Avertissement</a> <b>PVS-Studio</b> : l'expression <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3022</a> 'String.IsNullOrEmpty ("winName")' est toujours fausse.  Cv2_highgui.cs 46 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DestroyWindow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> winName</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (String.IsNullOrEmpty(<span class="hljs-string"><span class="hljs-string">"winName"</span></span>)) .... }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Avertissement</a> <b>PVS-Studio</b> : l'expression <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3022</a> 'string.IsNullOrEmpty ("fileName")' est toujours fausse.  FrameSource.cs 37 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> FrameSource </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateFrameSource_Video</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fileName</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(<span class="hljs-string"><span class="hljs-string">"fileName"</span></span>)) .... }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Avertissement</a> <b>PVS-Studio</b> : l'expression <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3022</a> 'string.IsNullOrEmpty ("fileName")' est toujours fausse.  FrameSource.cs 53 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> FrameSource </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateFrameSource_Video_CUDA</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fileName</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(<span class="hljs-string"><span class="hljs-string">"fileName"</span></span>)) .... }</code> </pre> <br>  Parfois, derri√®re l'avertissement de l'analyseur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V3022</a> (l'expression est toujours vraie / fausse), il y a des choses vraiment √©tranges ou dr√¥les.  Dans les trois cas, la m√™me situation est observ√©e.  Le code de m√©thode a un param√®tre de type <i>cha√Æne</i> dont la valeur doit √™tre v√©rifi√©e.  Cependant, ce n'est pas la valeur de la variable qui est v√©rifi√©e, mais le litt√©ral de cha√Æne avec son nom, c'est-√†-dire  le nom est en vain cit√©. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mk/rr/fm/mkrrfmqeimdl5l_osrff2p-ime4.png" alt="Figure 18"></div><br>  Apparemment, le d√©veloppeur a scell√© une fois et, en utilisant le copier-coller, a propag√© cette erreur par code. <br><br><h2>  Conclusion </h2><br>  Les d√©veloppeurs d'OpenCvSharp ont fait un travail important et formidable.  Et moi, en tant qu'utilisateur de cette biblioth√®que, je leur en suis tr√®s reconnaissant.  Je vous remercie <br><br>  Cependant, √©tant dans l'√©quipe PVS-Studio et regardant le code, je dois admettre que le probl√®me de sa qualit√© n'a pas √©t√© suffisamment r√©solu.  Tr√®s probablement, les analyseurs de code statiques ne sont pas utilis√©s r√©guli√®rement dans ce projet.  Et de nombreuses erreurs sont corrig√©es par des m√©thodes plus co√ªteuses (tests, selon les avis des utilisateurs, par exemple).  Et certains restent g√©n√©ralement √† vivre longtemps dans le code, et on ne fait que les retrouver.  Cette id√©e est pr√©sent√©e plus en d√©tail dans une br√®ve <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">note</a> sur le th√®me de la philosophie de l'utilisation de la m√©thodologie de l'analyse statique. <br><br>  Le projet √©tant ouvert et situ√© sur GitHub, ses d√©veloppeurs ont la possibilit√© de profiter de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">option de licence gratuite</a> PVS-Studio et de commencer √† appliquer l'analyse de mani√®re r√©guli√®re. <br><br>  Merci de votre attention.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">T√©l√©chargez</a> et testez vos projets en utilisant la version d'essai de PVS-Studio. <br><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/898/3b6/5a7/8983b65a74adb29a2113eba12fbec3f1.png" align="left"></a> </p><br><br>  Si vous souhaitez partager cet article avec un public anglophone, veuillez utiliser le lien vers la traduction: Ekaterina Nikiforova.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">V√©rification de OpenCvSharp Wrapper pour OpenCV avec PVS-Studio</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr473476/">https://habr.com/ru/post/fr473476/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr473456/index.html">La derni√®re fronti√®re de l'AQ en mati√®re de d√©fense: la d√©tection automatique des erreurs</a></li>
<li><a href="../fr473460/index.html">A la question des math√©matiques</a></li>
<li><a href="../fr473462/index.html">Semaine de la s√©curit√© 44: NordVPN, TorGuard et Half Hack</a></li>
<li><a href="../fr473468/index.html">Comprendre le th√©or√®me de Bayes</a></li>
<li><a href="../fr473470/index.html">GitLab 12.4 avec une am√©lioration de la demande de fusion et des d√©pendances de l'API d'audit</a></li>
<li><a href="../fr473478/index.html">V√©rification de l'encapsuleur OpenCvSharp pour OpenCV avec PVS-Studio</a></li>
<li><a href="../fr473482/index.html">Les succ√®s de la campagne saoudienne, Halloween-PR et un peu sur les campagnes publicitaires de Japan Airlines</a></li>
<li><a href="../fr473484/index.html">Cours C ++ au centre CS, deuxi√®me partie</a></li>
<li><a href="../fr473488/index.html">Navigation multiplateforme: pourquoi NavController a vaincu angular / router dans Ionic 4</a></li>
<li><a href="../fr473490/index.html">Pourquoi les meilleurs physiciens adorent la th√©orie des cordes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>