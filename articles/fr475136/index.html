<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎩 👨🏾‍🌾 👦 Apprentissage automatique pour votre chasse à plat. Partie 3: La poussée finale 🏇🏼 ♦️ 🏰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Photo de Dugan Arnett sur Boston Globe 


 Êtes-vous toujours à la recherche d'un nouvel appartement? Prêt à faire la dernière tentative? Si oui, suiv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apprentissage automatique pour votre chasse à plat. Partie 3: La poussée finale</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475136/"><p><img src="https://habrastorage.org/webt/yj/dy/xa/yjdyxaijfwrdh4wzjpx1fyphbuw.jpeg" alt="Photo de Dugan Arnett sur Boston GlobeAre"><br>  <em>Photo de Dugan Arnett sur Boston Globe</em> </p><br><p>  Êtes-vous toujours à la recherche d'un nouvel appartement?  Prêt à faire la dernière tentative?  Si oui, suivez-moi et je vous montrerai comment atteindre la ligne d'arrivée. </p><a name="habracut"></a><br><h1 id="short-introduction-and-references">  Brève introduction et références </h1><br><p>  Il s'agit de la troisième partie du cycle visant à expliquer comment trouver l'appartement optimal sur le marché immobilier.  En quelques mots, l'idée principale - trouver la meilleure offre parmi les appartements à Iekaterinbourg, où j'habitais auparavant.  Mais je pense que la même idée peut être envisagée dans le contexte d'une autre ville. </p><br><p> Si vous n'avez pas lu les parties précédentes, ce serait une bonne idée de les lire les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">parties 1</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2</a> . </p><br><p>  Vous pouvez également trouver des blocs-notes Ipython là- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bas</a> . <br>  Cette partie devait être beaucoup plus courte que les précédentes, mais le diable est dans les détails. </p><br><h1 id="consequences">  Conséquences </h1><br><p>  À la suite de toutes les actions, nous avons obtenu un modèle ML (Random Forest) qui fonctionne assez bien.  Pas aussi bon que prévu (le score est supérieur à 87%), mais pour des données réelles, c'est assez bon.  Et ... permettez-moi d'être honnête, cette réflexion sur le résultat a eu un effet étrange sur moi.  Je voulais plus de score, l'écart entre le résultat attendu et la vraie prédiction était inférieur à 3%.  L'optimisme mélangé à la cupidité est monté dans ma tête </p><br><p><img src="https://habrastorage.org/webt/9l/m9/lk/9lm9lkw5g9pcbkeeolew26yakkw.jpeg" alt="MOAR!"><br>  <em>Je veux plus</em> <del>  <em>or</em> </del>  <em>précision</em> </p><br><p>  C'est bien connu, si vous voulez améliorer quelque chose, il y aura probablement des approches opposées.  Habituellement, cela ressemble à un choix entre: </p><br><ul><li>  Evolution vs révolution </li><li>  Quantité vs qualité </li><li>  Extensif vs intensif </li></ul><br><p>  Et en raison d'un manque de volonté de changer de cheval en cours de route, j'ai décidé d'utiliser RF (Random Forest) avec l'ajout de quelques nouvelles fonctionnalités. </p><br><p>  Cela semblait être une idée, "nous avons juste besoin de plus de fonctionnalités" pour améliorer le score.  C'est du moins ce que je pensais. </p><br><h1 id="per-aspera-ad-astra-through-hardships-to-the-stars">  Per aspera ad astra (à travers les difficultés des étoiles) </h1><br><p>  Essayons de réfléchir aux fonctionnalités connexes, qui pourraient influencer le prix d'un appartement.  Il y a des caractéristiques d'appartement comme un balcon ou l'âge de la maison et des caractéristiques géo-liées comme la distance à la station de métro / bus la plus proche.  Quelle pourrait être la prochaine approche pour la même approche avec RF? </p><br><h2 id="idea-1-distance-to-centre">  Idée n ° 1.  Distance au centre </h2><br><p>  Nous pourrions réutiliser la longitude et la latitude (coordonnées plates).  Sur la base de ces informations, nous avons pu compter la distance au centre de la ville.  La même idée a été utilisée pour les quartiers, plus nous nous situons loin du centre, moins cher cela devrait être.  Et devinez quoi ... ça marche!  Pas une si grosse croissance ( <strong>+ 1%</strong> de score), mais c'est mieux que rien. </p><br><p>  Un seul problème est là, la même idée n'a pas de sens pour les quartiers qui sont très loin.  Si vous habitez en dehors d'une ville, vous pouvez savoir qu'il existe d'autres règles de prix. </p><br><p>  Il ne sera pas facile d'interpréter si nous extrapolons cette approche. </p><br><h2 id="idea-2-near-metro">  Idée n ° 2.  Près du métro </h2><br><p>  Le métro a une influence significative sur les prix.  Surtout quand il est placé dans une zone de distance de marche.  Mais la signification de "une distance de marche" n'est pas claire.  Chaque personne peut interpréter ce paramètre de différentes manières.  Je pourrais définir la limite manuellement, mais une augmentation du score ne dépasserait pas <strong>0,2%</strong> </p><br><p>  En même temps, cela ne fonctionne pas avec le plat de l'idée précédente.  Il n'y a pas de métro à proximité. </p><br><h2 id="idea-3-rationality-and-equilibrium-of-the-market">  Idée n ° 3.  Rationalité et équilibre du marché </h2><br><p>  L'équilibre du marché est une combinaison de demande et d'offre.  Adam Smith en a parlé.  Bien sûr, le marché peut être exagéré.  Mais en général, cette idée fonctionne bien.  Au moins pour les maisons en cours de construction. </p><br><p>  En d'autres termes - plus vous avez de concurrents, moins vous avez de chances d'acheter votre appartement (toutes choses étant égales par ailleurs).  Et cela produit une supposition - "si autour de moi sont placés d'autres appartements, je dois diminuer le prix pour obtenir plus d'acheteurs". </p><br><p>  Et cela ressemble à une conclusion tout à fait logique, n'est-ce pas? </p><br><p>  J'ai donc compté des appartements SIMILAIRES près de chacun d'eux, dans la même maison et dans un rayon de 200 mètres.  Les mesures ont été prises pour la date de vente.  Quel résultat espérez-vous obtenir?  Seulement <strong>0,1%</strong> sur la validation croisée.  Triste mais vrai. </p><br><hr><br><h1 id="rethinking">  Repenser </h1><br><blockquote>  Quitter, c'est ... parfois faire un pas en arrière pour faire deux pas en avant. <br><br>  - un sage inconnu </blockquote><p>  D'accord, une attaque frontale ne fonctionne pas.  Considérons cette situation sous un autre angle. </p><br><p>  Supposons que vous soyez une personne qui veut acheter un appartement près d'une rivière loin de la ville bruyante.  Vous avez trois variantes de publicité qui se ressemblent et ont le même prix (plus ou moins).  Les métriques formelles qui décrivent flat ne vous donnent rien sur l'environnement, ce ne sont que des métriques sur un écran.  Mais il y a quelque chose d'important. </p><br><p><img src="https://habrastorage.org/webt/zg/9j/jm/zg9jjmx04quhqfqcwqiko-q_hna.png" alt="La description d'un appartement est une formidable opportunité"><br>  <em>La description d'un appartement est une formidable opportunité.</em> </p><br><p>  Une description plate pourrait fournir tout ce dont vous avez besoin.  Cela pourrait vous raconter une histoire d'appartement, de voisins et d'incroyables opportunités liées à ce lieu de vie spécifique.  Et parfois, une description pourrait avoir plus de sens que des chiffres ennuyeux. <br>  Mais dans la vraie vie, c'est légèrement différent de nos attentes.  Permettez-moi de vous montrer ce qui fonctionnera / ne fonctionnera pas et pourquoi. </p><br><h2 id="what-will-not-work-and-why">  Qu'est-ce qui ne fonctionnera pas et pourquoi? </h2><br><p>  <strong>Attentes</strong> - "Whoa! Je peux essayer de classer le texte et trouver les" bons "et les" mauvais "appartements. J'utiliserai la même méthode que celle utilisée habituellement pour l'analyse des sentiments." </p><br><p>  <strong>Réalité</strong> - "Non, vous ne le ferez pas. Les gens n'écrivent rien de mal contre leur appartement. Il peut y avoir une dissimulation sur une situation réelle ou un mensonge" </p><br><p>  <strong>Attentes</strong> - "D'accord. Ensuite, je peux essayer de trouver des modèles et de trouver le public cible d'un appartement. Par exemple, il pourrait s'agir de personnes âgées ou d'étudiants". </p><br><p>  <strong>Réalité</strong> - "Non, vous ne le ferez pas. Parfois, une annonce mentionne différents âges et groupes sociaux, c'est juste du marketing" </p><br><h2 id="what-probably-would-work-and-why">  Qu'est-ce qui fonctionnerait probablement et pourquoi </h2><br><p>  <strong>Quelques mots</strong> - <strong>clés</strong> - Il y a des mots qui indiquent des choses ou des moments spécifiques liés à l'appartement.  Par exemple, quand c'est un studio, le prix serait plus bas.  En général, les verbes sont inutiles, mais les noms et adverbes peuvent donner plus de contexte. </p><br><p>  <strong>La source alternative d'information</strong> - Utiliser la description pour remplir des valeurs vides ou NaN plus correctes.  Parfois, la description contient plus d'informations que les caractéristiques formelles de la publicité. </p><br><p>  Je le soupçonne basé sur la paresse humaine de remplir des champs non obligatoires comme "balcon".  Tout mettre dans la description semble être une idée plus préférable </p><br><h1 id="getting-information">  Obtenir des informations </h1><br><p>  Je saute la description du processus typique de tokenisation / lemmatisation / stemming.  De plus, je crois qu'il y a des auteurs capables de le décrire mieux que moi. </p><br><p>  Bien que je pense qu'il devrait y avoir une mention de l'ensemble d'outils utilisé pour extraire les fonctionnalités.  En bref, cela ressemble. </p><br><p><img src="https://habrastorage.org/webt/lr/e8/53/lre853kpee2cyuwnu6wqo8y6sio.png" alt="séparation-> correspondance par partie du discours"><br>  <em>séparation-&gt; correspondance par partie du discours</em> </p><br><p>  Après le prétraitement du texte publicitaire, j'ai reçu un ensemble de mots russes comme ceux-ci. </p><br><p><img src="https://habrastorage.org/webt/sb/0q/lx/sb0qlxyhx4n_50go7u4ryofkg_m.png" alt="Le texte original est placé https://pastebin.com/Pxh8zVe3"><br>  <em>Le texte original est placé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://pastebin.com/Pxh8zVe3</a></em> </p><br><p>  J'ai essayé d'utiliser l'approche de Word2Vec, mais il n'y avait pas de dictionnaire spécial pour les appartements et les publicités, donc l'image générale semblait bizarre </p><br><p><img src="https://habrastorage.org/webt/uh/we/ls/uhwelsmg_mgtfamtjdtuncts9lo.png"><br>  <em>la distance entre les mots ne correspond pas aux attentes</em> </p><br><p>  Par conséquent, je l'ai gardé aussi simple que possible et j'ai décidé de créer plusieurs nouvelles colonnes pour l'ensemble de données </p><br><hr><br><h1 id="a-little-less-conversation-a-little-more-action">  Un peu moins de conversation, un peu plus d'action </h1><br><p>  Il est temps de se salir les mains et de faire des choses pratiques.  Découvrez de nouvelles fonctionnalités.  Plusieurs facteurs importants ont été séparés par une influence sur les prix. </p><br><h2 id="positive-impact">  impact positif </h2><br><ul><li>  <strong>meubles</strong> - parfois, les gens pouvaient laisser un lit, une machine à laver, etc. </li><li>  <strong>luxe</strong> - appartements avec des choses luxueuses comme un jacuzzi ou un intérieur exclusif </li><li>  <strong>contrôle vidéo</strong> - il permet aux gens de se sentir en sécurité, souvent il le considère comme un avantage </li></ul><br><h2 id="negative-impact">  impact négatif </h2><br><ul><li>  <strong>dortoir</strong> - oui, parfois c'est un appartement dans un dortoir.  Pas si populaire, mais nettement moins cher qu'un appartement moyen </li><li>  <strong>rush</strong> - lorsque les gens se précipitent pour vendre leur appartement, ils sont généralement prêts à baisser les prix. </li><li>  <strong>studio</strong> - comme je l'ai déjà dit - ils sont moins chers que leurs appartements-analogues. </li></ul><br><p>  Collectons-les dans quelque chose d'universel </p><br><pre><code class="python hljs">df3 = pd.read_csv(<span class="hljs-string"><span class="hljs-string">'flats3.csv'</span></span>) positive_impact = [<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'luxury'</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>] negative_impact = [<span class="hljs-string"><span class="hljs-string">'studio'</span></span>, <span class="hljs-string"><span class="hljs-string">'rush'</span></span>,<span class="hljs-string"><span class="hljs-string">'dorm'</span></span>] geo_features = [<span class="hljs-string"><span class="hljs-string">'metro'</span></span>,<span class="hljs-string"><span class="hljs-string">'num_of_stops_1km'</span></span>,<span class="hljs-string"><span class="hljs-string">'num_of_shops_1km'</span></span>,<span class="hljs-string"><span class="hljs-string">'num_of_kindergarden_1km'</span></span>, <span class="hljs-string"><span class="hljs-string">'num_of_medical_1km'</span></span>,<span class="hljs-string"><span class="hljs-string">'center_distance'</span></span>] flat_features=[<span class="hljs-string"><span class="hljs-string">'total_area'</span></span>, <span class="hljs-string"><span class="hljs-string">'repair'</span></span>,<span class="hljs-string"><span class="hljs-string">'balcony_y'</span></span>, <span class="hljs-string"><span class="hljs-string">'walls_y'</span></span>,<span class="hljs-string"><span class="hljs-string">'district_y'</span></span>, <span class="hljs-string"><span class="hljs-string">'age_y'</span></span>] competitors_features = [<span class="hljs-string"><span class="hljs-string">'distance_200m'</span></span>, <span class="hljs-string"><span class="hljs-string">'same_house'</span></span>] cols = [<span class="hljs-string"><span class="hljs-string">'cost'</span></span>] cols+=flat_features cols+=geo_features cols+=competitors_features cols+=positive_impact cols+=negative_impact df3 = df3[cols]</code> </pre> <br><h2 id="general-impact">  impact général </h2><br><p>  c'est juste une combinaison de caractéristiques négatives et positives.  Initialement, pour chaque appartement, il est égal à 0. Par exemple, un studio avec contrôle vidéo aura toujours un impact général égal à 0 ( <em>1 [positif] –1 [négatif] = 0</em> ) </p><br><pre> <code class="python hljs">df3[<span class="hljs-string"><span class="hljs-string">'impact'</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, row <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> df3.iterrows(): impact = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> positive <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> positive_impact: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> row[positive]: impact+=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> negative <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> negative_impact: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> row[negative]: impact-=<span class="hljs-number"><span class="hljs-number">1</span></span> df3.at[i, <span class="hljs-string"><span class="hljs-string">'impact'</span></span>] = impact</code> </pre> <br><p>  D'accord, nous avons des données, de nouvelles fonctionnalités et un ancien objectif avec 10% d'erreur moyenne pour la prédiction.  Faites une opération typique comme nous l'avons fait auparavant </p><br><pre> <code class="python hljs">y = df3.cost X = df3.drop(columns=[<span class="hljs-string"><span class="hljs-string">'cost'</span></span>]) X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="hljs-number"><span class="hljs-number">0.2</span></span>, random_state=<span class="hljs-number"><span class="hljs-number">42</span></span>)</code> </pre> <br><h1 id="old-approachextensive-growth-of-features">  Ancienne approche (croissance extensive des fonctionnalités) </h1><br><p>  Nous allons faire un nouveau modèle basé sur de vieilles idées </p><br><pre> <code class="python hljs">data = [] max_features = int(X.shape[<span class="hljs-number"><span class="hljs-number">1</span></span>]/<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>): regressor = RandomForestRegressor(verbose=<span class="hljs-number"><span class="hljs-number">0</span></span>, n_estimators=<span class="hljs-number"><span class="hljs-number">128</span></span>, max_features=max_features, max_depth=x, random_state=<span class="hljs-number"><span class="hljs-number">42</span></span>) model = regressor.fit(X_train, y_train) score = do_cross_validation(X, y, model) data.append({<span class="hljs-string"><span class="hljs-string">'max_depth'</span></span>:x,<span class="hljs-string"><span class="hljs-string">'score'</span></span>:score}) data = pd.DataFrame(data) f, ax = plot.subplots(figsize=(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)) sns.lineplot(x=<span class="hljs-string"><span class="hljs-string">"max_depth"</span></span>, y=<span class="hljs-string"><span class="hljs-string">"score"</span></span>, data=data) max_result = data.loc[data[<span class="hljs-string"><span class="hljs-string">'score'</span></span>].idxmax()] ax.set_title(<span class="hljs-string"><span class="hljs-string">f'Max score - </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{max_result.score}</span></span></span><span class="hljs-string">\nDepth </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{max_result.max_depth}</span></span></span><span class="hljs-string"> '</span></span>)</code> </pre> <br><p>  Et le résultat était légèrement ... inattendu. <br><img src="https://habrastorage.org/webt/us/et/xv/usetxvj9vr4pjrsfnx-7jzcruqm.png" alt="92% est un résultat impressionnant"></p><br><p>  92% est un résultat accablant.  Je veux dire, dire que j'ai été choqué serait un euphémisme. </p><br><p>  Mais pourquoi ça a si bien fonctionné?  Jetons un œil aux nouvelles fonctionnalités. </p><br><pre> <code class="python hljs">regressor = RandomForestRegressor(random_state=<span class="hljs-number"><span class="hljs-number">42</span></span>, max_depth=max_result.max_depth, n_estimators=<span class="hljs-number"><span class="hljs-number">128</span></span>, max_features=max_features) rf3 = regressor.fit(X_train, y_train) feat_importances = pd.Series(rf3.feature_importances_, index=X.columns) feat_importances.nlargest(X.shape[<span class="hljs-number"><span class="hljs-number">1</span></span>]).plot(kind=<span class="hljs-string"><span class="hljs-string">'barh'</span></span>)</code> </pre> <br><p><img src="https://habrastorage.org/webt/lj/27/a8/lj27a8esi5qhxqdycqwgduvq1ki.png" alt="Importance de toutes les fonctionnalités de notre modèle"><br>  <strong>Importance de toutes les fonctionnalités de notre modèle</strong> </p><br><p>  L'importance ne donne pas d'informations sur la contribution des fonctionnalités (c'est une autre histoire), elle montre seulement comment le modèle actif utilise l'une ou l'autre fonctionnalité.  Mais pour la situation actuelle, cela semble instructif.  Certaines des nouvelles fonctionnalités sont plus importantes que les précédentes, d'autres presque inutiles. </p><br><h1 id="new-approachintensive-work-with-data">  Nouvelle approche (travail intensif avec les données) </h1><br><p>  Et bien ... la ligne d'arrivée est franchie, le résultat est atteint.  Cela pourrait-il être mieux? <br>  Réponse courte - <em>"Oui, c'est possible"</em> </p><br><ul><li>  Tout d'abord, nous pourrions réduire la profondeur d'un arbre.  Cela réduira également le temps de formation et de prévision. </li><li>  Deuxièmement, nous pourrions augmenter un peu le score de prédiction. </li></ul><br><p>  Pour les deux moments, nous utiliserons <strong>XGBoost</strong> .  Parfois, les gens préfèrent utiliser d'autres boosters comme <strong>LightGBM</strong> ou <strong>CatBoost</strong> , mais mon humble avis - le premier est assez bon lorsque vous avez beaucoup de données, un second est meilleur si vous travaillez avec des variables catégorielles.  Et en bonus - XGBoost semble juste plus rapide </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> xgboost <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> XGBRegressor,plot_importance data = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>): regressor = XGBRegressor(verbose=<span class="hljs-number"><span class="hljs-number">0</span></span>, reg_lambda=<span class="hljs-number"><span class="hljs-number">10</span></span>, n_estimators=<span class="hljs-number"><span class="hljs-number">1000</span></span>, objective=<span class="hljs-string"><span class="hljs-string">'reg:squarederror'</span></span>, max_depth=x, random_state=<span class="hljs-number"><span class="hljs-number">42</span></span>) model = regressor.fit(X_train, y_train) score = do_cross_validation(X, y, model) data.append({<span class="hljs-string"><span class="hljs-string">'max_depth'</span></span>:x,<span class="hljs-string"><span class="hljs-string">'score'</span></span>:score}) data = pd.DataFrame(data) f, ax = plot.subplots(figsize=(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)) sns.lineplot(x=<span class="hljs-string"><span class="hljs-string">"max_depth"</span></span>, y=<span class="hljs-string"><span class="hljs-string">"score"</span></span>, data=data) max_result = data.loc[data[<span class="hljs-string"><span class="hljs-string">'score'</span></span>].idxmax()] ax.set_title(<span class="hljs-string"><span class="hljs-string">f'Max score-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{max_result.score}</span></span></span><span class="hljs-string">\nDepth </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{max_result.max_depth}</span></span></span><span class="hljs-string"> '</span></span>)</code> </pre> <br><p><img src="https://habrastorage.org/webt/zb/23/4j/zb234jravshc6z1zepkcc90gd0a.png" alt="Le résultat est meilleur que le précédent."></p><br><p>  <em>Le résultat est meilleur que le précédent.</em> </p><br><p>  Bien sûr, c'est la petite différence entre Random Forest et XGBoost.  Et chacun d'eux pourrait être utilisé comme un bon outil pour résoudre notre problème de prédiction.  Cela dépend de vous. </p><br><h1 id="conclusion">  Conclusion </h1><br><p>  Le résultat est-il atteint?  Certainement oui. </p><br><p>  La solution est disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur place</a> et peut être utilisée gratuitement par n'importe qui.  Si vous êtes intéressé par l'évaluation d'un appartement en utilisant cette approche, n'hésitez pas et contactez-moi. </p><br><p>  Comme prototype, il <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">y est</a> placé </p><br><p>  <strong>Merci d'avoir lu!</strong>  . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr475136/">https://habr.com/ru/post/fr475136/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr475126/index.html">Moscou Node.js Meetup 10: Architecture des applications Node.js, Hot Reload dans Node.js et un rapport secret</a></li>
<li><a href="../fr475128/index.html">Modélisation NURBS dans Rhino 3D et T-Spline</a></li>
<li><a href="../fr475130/index.html">Big interview sur le Big Data: pourquoi nous suivent-ils sur les réseaux sociaux et qui vend nos données?</a></li>
<li><a href="../fr475132/index.html">Hélice non verrouillable sur une machine CNC</a></li>
<li><a href="../fr475134/index.html">Une autre façon de lutter contre la fraude de haute technologie</a></li>
<li><a href="../fr475138/index.html">5 façons d'utiliser efficacement le Raspberry Pi Deuxième partie</a></li>
<li><a href="../fr475142/index.html">Sommeil, relaxation et musique: comment les athlètes professionnels surmontent la fatigue et que pouvons-nous y faire</a></li>
<li><a href="../fr475144/index.html">Divisez Laravel en composants</a></li>
<li><a href="../fr475152/index.html">Hypocrisie google. PageSpeed ​​Insights</a></li>
<li><a href="../fr475154/index.html">Accéléré en interne avec le service de surveillance en nuage IPEYE</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>