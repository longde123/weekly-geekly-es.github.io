<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé© üë®üèæ‚Äçüåæ üë¶ Apprentissage automatique pour votre chasse √† plat. Partie 3: La pouss√©e finale üèáüèº ‚ô¶Ô∏è üè∞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Photo de Dugan Arnett sur Boston Globe 


 √ätes-vous toujours √† la recherche d'un nouvel appartement? Pr√™t √† faire la derni√®re tentative? Si oui, suiv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apprentissage automatique pour votre chasse √† plat. Partie 3: La pouss√©e finale</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475136/"><p><img src="https://habrastorage.org/webt/yj/dy/xa/yjdyxaijfwrdh4wzjpx1fyphbuw.jpeg" alt="Photo de Dugan Arnett sur Boston GlobeAre"><br>  <em>Photo de Dugan Arnett sur Boston Globe</em> </p><br><p>  √ätes-vous toujours √† la recherche d'un nouvel appartement?  Pr√™t √† faire la derni√®re tentative?  Si oui, suivez-moi et je vous montrerai comment atteindre la ligne d'arriv√©e. </p><a name="habracut"></a><br><h1 id="short-introduction-and-references">  Br√®ve introduction et r√©f√©rences </h1><br><p>  Il s'agit de la troisi√®me partie du cycle visant √† expliquer comment trouver l'appartement optimal sur le march√© immobilier.  En quelques mots, l'id√©e principale - trouver la meilleure offre parmi les appartements √† Iekaterinbourg, o√π j'habitais auparavant.  Mais je pense que la m√™me id√©e peut √™tre envisag√©e dans le contexte d'une autre ville. </p><br><p> Si vous n'avez pas lu les parties pr√©c√©dentes, ce serait une bonne id√©e de les lire les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">parties 1</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2</a> . </p><br><p>  Vous pouvez √©galement trouver des blocs-notes Ipython l√†- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bas</a> . <br>  Cette partie devait √™tre beaucoup plus courte que les pr√©c√©dentes, mais le diable est dans les d√©tails. </p><br><h1 id="consequences">  Cons√©quences </h1><br><p>  √Ä la suite de toutes les actions, nous avons obtenu un mod√®le ML (Random Forest) qui fonctionne assez bien.  Pas aussi bon que pr√©vu (le score est sup√©rieur √† 87%), mais pour des donn√©es r√©elles, c'est assez bon.  Et ... permettez-moi d'√™tre honn√™te, cette r√©flexion sur le r√©sultat a eu un effet √©trange sur moi.  Je voulais plus de score, l'√©cart entre le r√©sultat attendu et la vraie pr√©diction √©tait inf√©rieur √† 3%.  L'optimisme m√©lang√© √† la cupidit√© est mont√© dans ma t√™te </p><br><p><img src="https://habrastorage.org/webt/9l/m9/lk/9lm9lkw5g9pcbkeeolew26yakkw.jpeg" alt="MOAR!"><br>  <em>Je veux plus</em> <del>  <em>or</em> </del>  <em>pr√©cision</em> </p><br><p>  C'est bien connu, si vous voulez am√©liorer quelque chose, il y aura probablement des approches oppos√©es.  Habituellement, cela ressemble √† un choix entre: </p><br><ul><li>  Evolution vs r√©volution </li><li>  Quantit√© vs qualit√© </li><li>  Extensif vs intensif </li></ul><br><p>  Et en raison d'un manque de volont√© de changer de cheval en cours de route, j'ai d√©cid√© d'utiliser RF (Random Forest) avec l'ajout de quelques nouvelles fonctionnalit√©s. </p><br><p>  Cela semblait √™tre une id√©e, "nous avons juste besoin de plus de fonctionnalit√©s" pour am√©liorer le score.  C'est du moins ce que je pensais. </p><br><h1 id="per-aspera-ad-astra-through-hardships-to-the-stars">  Per aspera ad astra (√† travers les difficult√©s des √©toiles) </h1><br><p>  Essayons de r√©fl√©chir aux fonctionnalit√©s connexes, qui pourraient influencer le prix d'un appartement.  Il y a des caract√©ristiques d'appartement comme un balcon ou l'√¢ge de la maison et des caract√©ristiques g√©o-li√©es comme la distance √† la station de m√©tro / bus la plus proche.  Quelle pourrait √™tre la prochaine approche pour la m√™me approche avec RF? </p><br><h2 id="idea-1-distance-to-centre">  Id√©e n ¬∞ 1.  Distance au centre </h2><br><p>  Nous pourrions r√©utiliser la longitude et la latitude (coordonn√©es plates).  Sur la base de ces informations, nous avons pu compter la distance au centre de la ville.  La m√™me id√©e a √©t√© utilis√©e pour les quartiers, plus nous nous situons loin du centre, moins cher cela devrait √™tre.  Et devinez quoi ... √ßa marche!  Pas une si grosse croissance ( <strong>+ 1%</strong> de score), mais c'est mieux que rien. </p><br><p>  Un seul probl√®me est l√†, la m√™me id√©e n'a pas de sens pour les quartiers qui sont tr√®s loin.  Si vous habitez en dehors d'une ville, vous pouvez savoir qu'il existe d'autres r√®gles de prix. </p><br><p>  Il ne sera pas facile d'interpr√©ter si nous extrapolons cette approche. </p><br><h2 id="idea-2-near-metro">  Id√©e n ¬∞ 2.  Pr√®s du m√©tro </h2><br><p>  Le m√©tro a une influence significative sur les prix.  Surtout quand il est plac√© dans une zone de distance de marche.  Mais la signification de "une distance de marche" n'est pas claire.  Chaque personne peut interpr√©ter ce param√®tre de diff√©rentes mani√®res.  Je pourrais d√©finir la limite manuellement, mais une augmentation du score ne d√©passerait pas <strong>0,2%</strong> </p><br><p>  En m√™me temps, cela ne fonctionne pas avec le plat de l'id√©e pr√©c√©dente.  Il n'y a pas de m√©tro √† proximit√©. </p><br><h2 id="idea-3-rationality-and-equilibrium-of-the-market">  Id√©e n ¬∞ 3.  Rationalit√© et √©quilibre du march√© </h2><br><p>  L'√©quilibre du march√© est une combinaison de demande et d'offre.  Adam Smith en a parl√©.  Bien s√ªr, le march√© peut √™tre exag√©r√©.  Mais en g√©n√©ral, cette id√©e fonctionne bien.  Au moins pour les maisons en cours de construction. </p><br><p>  En d'autres termes - plus vous avez de concurrents, moins vous avez de chances d'acheter votre appartement (toutes choses √©tant √©gales par ailleurs).  Et cela produit une supposition - "si autour de moi sont plac√©s d'autres appartements, je dois diminuer le prix pour obtenir plus d'acheteurs". </p><br><p>  Et cela ressemble √† une conclusion tout √† fait logique, n'est-ce pas? </p><br><p>  J'ai donc compt√© des appartements SIMILAIRES pr√®s de chacun d'eux, dans la m√™me maison et dans un rayon de 200 m√®tres.  Les mesures ont √©t√© prises pour la date de vente.  Quel r√©sultat esp√©rez-vous obtenir?  Seulement <strong>0,1%</strong> sur la validation crois√©e.  Triste mais vrai. </p><br><hr><br><h1 id="rethinking">  Repenser </h1><br><blockquote>  Quitter, c'est ... parfois faire un pas en arri√®re pour faire deux pas en avant. <br><br>  - un sage inconnu </blockquote><p>  D'accord, une attaque frontale ne fonctionne pas.  Consid√©rons cette situation sous un autre angle. </p><br><p>  Supposons que vous soyez une personne qui veut acheter un appartement pr√®s d'une rivi√®re loin de la ville bruyante.  Vous avez trois variantes de publicit√© qui se ressemblent et ont le m√™me prix (plus ou moins).  Les m√©triques formelles qui d√©crivent flat ne vous donnent rien sur l'environnement, ce ne sont que des m√©triques sur un √©cran.  Mais il y a quelque chose d'important. </p><br><p><img src="https://habrastorage.org/webt/zg/9j/jm/zg9jjmx04quhqfqcwqiko-q_hna.png" alt="La description d'un appartement est une formidable opportunit√©"><br>  <em>La description d'un appartement est une formidable opportunit√©.</em> </p><br><p>  Une description plate pourrait fournir tout ce dont vous avez besoin.  Cela pourrait vous raconter une histoire d'appartement, de voisins et d'incroyables opportunit√©s li√©es √† ce lieu de vie sp√©cifique.  Et parfois, une description pourrait avoir plus de sens que des chiffres ennuyeux. <br>  Mais dans la vraie vie, c'est l√©g√®rement diff√©rent de nos attentes.  Permettez-moi de vous montrer ce qui fonctionnera / ne fonctionnera pas et pourquoi. </p><br><h2 id="what-will-not-work-and-why">  Qu'est-ce qui ne fonctionnera pas et pourquoi? </h2><br><p>  <strong>Attentes</strong> - "Whoa! Je peux essayer de classer le texte et trouver les" bons "et les" mauvais "appartements. J'utiliserai la m√™me m√©thode que celle utilis√©e habituellement pour l'analyse des sentiments." </p><br><p>  <strong>R√©alit√©</strong> - "Non, vous ne le ferez pas. Les gens n'√©crivent rien de mal contre leur appartement. Il peut y avoir une dissimulation sur une situation r√©elle ou un mensonge" </p><br><p>  <strong>Attentes</strong> - "D'accord. Ensuite, je peux essayer de trouver des mod√®les et de trouver le public cible d'un appartement. Par exemple, il pourrait s'agir de personnes √¢g√©es ou d'√©tudiants". </p><br><p>  <strong>R√©alit√©</strong> - "Non, vous ne le ferez pas. Parfois, une annonce mentionne diff√©rents √¢ges et groupes sociaux, c'est juste du marketing" </p><br><h2 id="what-probably-would-work-and-why">  Qu'est-ce qui fonctionnerait probablement et pourquoi </h2><br><p>  <strong>Quelques mots</strong> - <strong>cl√©s</strong> - Il y a des mots qui indiquent des choses ou des moments sp√©cifiques li√©s √† l'appartement.  Par exemple, quand c'est un studio, le prix serait plus bas.  En g√©n√©ral, les verbes sont inutiles, mais les noms et adverbes peuvent donner plus de contexte. </p><br><p>  <strong>La source alternative d'information</strong> - Utiliser la description pour remplir des valeurs vides ou NaN plus correctes.  Parfois, la description contient plus d'informations que les caract√©ristiques formelles de la publicit√©. </p><br><p>  Je le soup√ßonne bas√© sur la paresse humaine de remplir des champs non obligatoires comme "balcon".  Tout mettre dans la description semble √™tre une id√©e plus pr√©f√©rable </p><br><h1 id="getting-information">  Obtenir des informations </h1><br><p>  Je saute la description du processus typique de tokenisation / lemmatisation / stemming.  De plus, je crois qu'il y a des auteurs capables de le d√©crire mieux que moi. </p><br><p>  Bien que je pense qu'il devrait y avoir une mention de l'ensemble d'outils utilis√© pour extraire les fonctionnalit√©s.  En bref, cela ressemble. </p><br><p><img src="https://habrastorage.org/webt/lr/e8/53/lre853kpee2cyuwnu6wqo8y6sio.png" alt="s√©paration-> correspondance par partie du discours"><br>  <em>s√©paration-&gt; correspondance par partie du discours</em> </p><br><p>  Apr√®s le pr√©traitement du texte publicitaire, j'ai re√ßu un ensemble de mots russes comme ceux-ci. </p><br><p><img src="https://habrastorage.org/webt/sb/0q/lx/sb0qlxyhx4n_50go7u4ryofkg_m.png" alt="Le texte original est plac√© https://pastebin.com/Pxh8zVe3"><br>  <em>Le texte original est plac√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://pastebin.com/Pxh8zVe3</a></em> </p><br><p>  J'ai essay√© d'utiliser l'approche de Word2Vec, mais il n'y avait pas de dictionnaire sp√©cial pour les appartements et les publicit√©s, donc l'image g√©n√©rale semblait bizarre </p><br><p><img src="https://habrastorage.org/webt/uh/we/ls/uhwelsmg_mgtfamtjdtuncts9lo.png"><br>  <em>la distance entre les mots ne correspond pas aux attentes</em> </p><br><p>  Par cons√©quent, je l'ai gard√© aussi simple que possible et j'ai d√©cid√© de cr√©er plusieurs nouvelles colonnes pour l'ensemble de donn√©es </p><br><hr><br><h1 id="a-little-less-conversation-a-little-more-action">  Un peu moins de conversation, un peu plus d'action </h1><br><p>  Il est temps de se salir les mains et de faire des choses pratiques.  D√©couvrez de nouvelles fonctionnalit√©s.  Plusieurs facteurs importants ont √©t√© s√©par√©s par une influence sur les prix. </p><br><h2 id="positive-impact">  impact positif </h2><br><ul><li>  <strong>meubles</strong> - parfois, les gens pouvaient laisser un lit, une machine √† laver, etc. </li><li>  <strong>luxe</strong> - appartements avec des choses luxueuses comme un jacuzzi ou un int√©rieur exclusif </li><li>  <strong>contr√¥le vid√©o</strong> - il permet aux gens de se sentir en s√©curit√©, souvent il le consid√®re comme un avantage </li></ul><br><h2 id="negative-impact">  impact n√©gatif </h2><br><ul><li>  <strong>dortoir</strong> - oui, parfois c'est un appartement dans un dortoir.  Pas si populaire, mais nettement moins cher qu'un appartement moyen </li><li>  <strong>rush</strong> - lorsque les gens se pr√©cipitent pour vendre leur appartement, ils sont g√©n√©ralement pr√™ts √† baisser les prix. </li><li>  <strong>studio</strong> - comme je l'ai d√©j√† dit - ils sont moins chers que leurs appartements-analogues. </li></ul><br><p>  Collectons-les dans quelque chose d'universel </p><br><pre><code class="python hljs">df3 = pd.read_csv(<span class="hljs-string"><span class="hljs-string">'flats3.csv'</span></span>) positive_impact = [<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'luxury'</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>] negative_impact = [<span class="hljs-string"><span class="hljs-string">'studio'</span></span>, <span class="hljs-string"><span class="hljs-string">'rush'</span></span>,<span class="hljs-string"><span class="hljs-string">'dorm'</span></span>] geo_features = [<span class="hljs-string"><span class="hljs-string">'metro'</span></span>,<span class="hljs-string"><span class="hljs-string">'num_of_stops_1km'</span></span>,<span class="hljs-string"><span class="hljs-string">'num_of_shops_1km'</span></span>,<span class="hljs-string"><span class="hljs-string">'num_of_kindergarden_1km'</span></span>, <span class="hljs-string"><span class="hljs-string">'num_of_medical_1km'</span></span>,<span class="hljs-string"><span class="hljs-string">'center_distance'</span></span>] flat_features=[<span class="hljs-string"><span class="hljs-string">'total_area'</span></span>, <span class="hljs-string"><span class="hljs-string">'repair'</span></span>,<span class="hljs-string"><span class="hljs-string">'balcony_y'</span></span>, <span class="hljs-string"><span class="hljs-string">'walls_y'</span></span>,<span class="hljs-string"><span class="hljs-string">'district_y'</span></span>, <span class="hljs-string"><span class="hljs-string">'age_y'</span></span>] competitors_features = [<span class="hljs-string"><span class="hljs-string">'distance_200m'</span></span>, <span class="hljs-string"><span class="hljs-string">'same_house'</span></span>] cols = [<span class="hljs-string"><span class="hljs-string">'cost'</span></span>] cols+=flat_features cols+=geo_features cols+=competitors_features cols+=positive_impact cols+=negative_impact df3 = df3[cols]</code> </pre> <br><h2 id="general-impact">  impact g√©n√©ral </h2><br><p>  c'est juste une combinaison de caract√©ristiques n√©gatives et positives.  Initialement, pour chaque appartement, il est √©gal √† 0. Par exemple, un studio avec contr√¥le vid√©o aura toujours un impact g√©n√©ral √©gal √† 0 ( <em>1 [positif] ‚Äì1 [n√©gatif] = 0</em> ) </p><br><pre> <code class="python hljs">df3[<span class="hljs-string"><span class="hljs-string">'impact'</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, row <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> df3.iterrows(): impact = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> positive <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> positive_impact: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> row[positive]: impact+=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> negative <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> negative_impact: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> row[negative]: impact-=<span class="hljs-number"><span class="hljs-number">1</span></span> df3.at[i, <span class="hljs-string"><span class="hljs-string">'impact'</span></span>] = impact</code> </pre> <br><p>  D'accord, nous avons des donn√©es, de nouvelles fonctionnalit√©s et un ancien objectif avec 10% d'erreur moyenne pour la pr√©diction.  Faites une op√©ration typique comme nous l'avons fait auparavant </p><br><pre> <code class="python hljs">y = df3.cost X = df3.drop(columns=[<span class="hljs-string"><span class="hljs-string">'cost'</span></span>]) X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="hljs-number"><span class="hljs-number">0.2</span></span>, random_state=<span class="hljs-number"><span class="hljs-number">42</span></span>)</code> </pre> <br><h1 id="old-approachextensive-growth-of-features">  Ancienne approche (croissance extensive des fonctionnalit√©s) </h1><br><p>  Nous allons faire un nouveau mod√®le bas√© sur de vieilles id√©es </p><br><pre> <code class="python hljs">data = [] max_features = int(X.shape[<span class="hljs-number"><span class="hljs-number">1</span></span>]/<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>): regressor = RandomForestRegressor(verbose=<span class="hljs-number"><span class="hljs-number">0</span></span>, n_estimators=<span class="hljs-number"><span class="hljs-number">128</span></span>, max_features=max_features, max_depth=x, random_state=<span class="hljs-number"><span class="hljs-number">42</span></span>) model = regressor.fit(X_train, y_train) score = do_cross_validation(X, y, model) data.append({<span class="hljs-string"><span class="hljs-string">'max_depth'</span></span>:x,<span class="hljs-string"><span class="hljs-string">'score'</span></span>:score}) data = pd.DataFrame(data) f, ax = plot.subplots(figsize=(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)) sns.lineplot(x=<span class="hljs-string"><span class="hljs-string">"max_depth"</span></span>, y=<span class="hljs-string"><span class="hljs-string">"score"</span></span>, data=data) max_result = data.loc[data[<span class="hljs-string"><span class="hljs-string">'score'</span></span>].idxmax()] ax.set_title(<span class="hljs-string"><span class="hljs-string">f'Max score - </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{max_result.score}</span></span></span><span class="hljs-string">\nDepth </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{max_result.max_depth}</span></span></span><span class="hljs-string"> '</span></span>)</code> </pre> <br><p>  Et le r√©sultat √©tait l√©g√®rement ... inattendu. <br><img src="https://habrastorage.org/webt/us/et/xv/usetxvj9vr4pjrsfnx-7jzcruqm.png" alt="92% est un r√©sultat impressionnant"></p><br><p>  92% est un r√©sultat accablant.  Je veux dire, dire que j'ai √©t√© choqu√© serait un euph√©misme. </p><br><p>  Mais pourquoi √ßa a si bien fonctionn√©?  Jetons un ≈ìil aux nouvelles fonctionnalit√©s. </p><br><pre> <code class="python hljs">regressor = RandomForestRegressor(random_state=<span class="hljs-number"><span class="hljs-number">42</span></span>, max_depth=max_result.max_depth, n_estimators=<span class="hljs-number"><span class="hljs-number">128</span></span>, max_features=max_features) rf3 = regressor.fit(X_train, y_train) feat_importances = pd.Series(rf3.feature_importances_, index=X.columns) feat_importances.nlargest(X.shape[<span class="hljs-number"><span class="hljs-number">1</span></span>]).plot(kind=<span class="hljs-string"><span class="hljs-string">'barh'</span></span>)</code> </pre> <br><p><img src="https://habrastorage.org/webt/lj/27/a8/lj27a8esi5qhxqdycqwgduvq1ki.png" alt="Importance de toutes les fonctionnalit√©s de notre mod√®le"><br>  <strong>Importance de toutes les fonctionnalit√©s de notre mod√®le</strong> </p><br><p>  L'importance ne donne pas d'informations sur la contribution des fonctionnalit√©s (c'est une autre histoire), elle montre seulement comment le mod√®le actif utilise l'une ou l'autre fonctionnalit√©.  Mais pour la situation actuelle, cela semble instructif.  Certaines des nouvelles fonctionnalit√©s sont plus importantes que les pr√©c√©dentes, d'autres presque inutiles. </p><br><h1 id="new-approachintensive-work-with-data">  Nouvelle approche (travail intensif avec les donn√©es) </h1><br><p>  Et bien ... la ligne d'arriv√©e est franchie, le r√©sultat est atteint.  Cela pourrait-il √™tre mieux? <br>  R√©ponse courte - <em>"Oui, c'est possible"</em> </p><br><ul><li>  Tout d'abord, nous pourrions r√©duire la profondeur d'un arbre.  Cela r√©duira √©galement le temps de formation et de pr√©vision. </li><li>  Deuxi√®mement, nous pourrions augmenter un peu le score de pr√©diction. </li></ul><br><p>  Pour les deux moments, nous utiliserons <strong>XGBoost</strong> .  Parfois, les gens pr√©f√®rent utiliser d'autres boosters comme <strong>LightGBM</strong> ou <strong>CatBoost</strong> , mais mon humble avis - le premier est assez bon lorsque vous avez beaucoup de donn√©es, un second est meilleur si vous travaillez avec des variables cat√©gorielles.  Et en bonus - XGBoost semble juste plus rapide </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> xgboost <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> XGBRegressor,plot_importance data = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>): regressor = XGBRegressor(verbose=<span class="hljs-number"><span class="hljs-number">0</span></span>, reg_lambda=<span class="hljs-number"><span class="hljs-number">10</span></span>, n_estimators=<span class="hljs-number"><span class="hljs-number">1000</span></span>, objective=<span class="hljs-string"><span class="hljs-string">'reg:squarederror'</span></span>, max_depth=x, random_state=<span class="hljs-number"><span class="hljs-number">42</span></span>) model = regressor.fit(X_train, y_train) score = do_cross_validation(X, y, model) data.append({<span class="hljs-string"><span class="hljs-string">'max_depth'</span></span>:x,<span class="hljs-string"><span class="hljs-string">'score'</span></span>:score}) data = pd.DataFrame(data) f, ax = plot.subplots(figsize=(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)) sns.lineplot(x=<span class="hljs-string"><span class="hljs-string">"max_depth"</span></span>, y=<span class="hljs-string"><span class="hljs-string">"score"</span></span>, data=data) max_result = data.loc[data[<span class="hljs-string"><span class="hljs-string">'score'</span></span>].idxmax()] ax.set_title(<span class="hljs-string"><span class="hljs-string">f'Max score-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{max_result.score}</span></span></span><span class="hljs-string">\nDepth </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{max_result.max_depth}</span></span></span><span class="hljs-string"> '</span></span>)</code> </pre> <br><p><img src="https://habrastorage.org/webt/zb/23/4j/zb234jravshc6z1zepkcc90gd0a.png" alt="Le r√©sultat est meilleur que le pr√©c√©dent."></p><br><p>  <em>Le r√©sultat est meilleur que le pr√©c√©dent.</em> </p><br><p>  Bien s√ªr, c'est la petite diff√©rence entre Random Forest et XGBoost.  Et chacun d'eux pourrait √™tre utilis√© comme un bon outil pour r√©soudre notre probl√®me de pr√©diction.  Cela d√©pend de vous. </p><br><h1 id="conclusion">  Conclusion </h1><br><p>  Le r√©sultat est-il atteint?  Certainement oui. </p><br><p>  La solution est disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur place</a> et peut √™tre utilis√©e gratuitement par n'importe qui.  Si vous √™tes int√©ress√© par l'√©valuation d'un appartement en utilisant cette approche, n'h√©sitez pas et contactez-moi. </p><br><p>  Comme prototype, il <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">y est</a> plac√© </p><br><p>  <strong>Merci d'avoir lu!</strong>  . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr475136/">https://habr.com/ru/post/fr475136/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr475126/index.html">Moscou Node.js Meetup 10: Architecture des applications Node.js, Hot Reload dans Node.js et un rapport secret</a></li>
<li><a href="../fr475128/index.html">Mod√©lisation NURBS dans Rhino 3D et T-Spline</a></li>
<li><a href="../fr475130/index.html">Big interview sur le Big Data: pourquoi nous suivent-ils sur les r√©seaux sociaux et qui vend nos donn√©es?</a></li>
<li><a href="../fr475132/index.html">H√©lice non verrouillable sur une machine CNC</a></li>
<li><a href="../fr475134/index.html">Une autre fa√ßon de lutter contre la fraude de haute technologie</a></li>
<li><a href="../fr475138/index.html">5 fa√ßons d'utiliser efficacement le Raspberry Pi Deuxi√®me partie</a></li>
<li><a href="../fr475142/index.html">Sommeil, relaxation et musique: comment les athl√®tes professionnels surmontent la fatigue et que pouvons-nous y faire</a></li>
<li><a href="../fr475144/index.html">Divisez Laravel en composants</a></li>
<li><a href="../fr475152/index.html">Hypocrisie google. PageSpeed ‚Äã‚ÄãInsights</a></li>
<li><a href="../fr475154/index.html">Acc√©l√©r√© en interne avec le service de surveillance en nuage IPEYE</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>