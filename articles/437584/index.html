<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº ü§ú üöì Los fundamentos matem√°ticos del dise√±o autom√°tico üî≤ üïµüèº ü•ä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Muchos desarrolladores creen que el dise√±o autom√°tico es un freno y un problema, y ‚Äã‚Äães extremadamente dif√≠cil depurarlo. Y es bueno si esta conclusi√≥...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Los fundamentos matem√°ticos del dise√±o autom√°tico</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/437584/">  Muchos desarrolladores creen que el dise√±o autom√°tico es un freno y un problema, y ‚Äã‚Äães extremadamente dif√≠cil depurarlo.  Y es bueno si esta conclusi√≥n se hace sobre la base de mi propia experiencia, y a veces es solo "escuch√©, ni siquiera intentar√© hacerme amigo de √©l". <br><br>  Pero quiz√°s la raz√≥n no est√° afuera, sino adentro.  Por ejemplo, las aves m√°s peligrosas del mundo del casuario no atacar√°n a las personas sin ning√∫n motivo, solo por defensa propia.  Por lo tanto, intente asumir por un segundo que esto no es malo en el dise√±o autom√°tico, y que no lo entiende lo suficiente y no sabe c√≥mo cocinar.  Esto es lo que hizo Anton Sergeyev y profundiz√≥ en la teor√≠a para comprender todo exactamente.  Se nos ofrece un resumen sobre los fundamentos matem√°ticos del dise√±o autom√°tico. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xm/53/dw/xm53dwqnl0lczpswansphdrgbpi.png" width="360"></div><br><br><a name="habracut"></a><br>  Auto Layout es un <strong>sistema de dise√±o</strong> .  Antes de profundizar en ello, hablemos de la composici√≥n tipogr√°fica moderna en general.  Luego, tratemos con <strong>el dise√±o autom√°tico</strong> : descubriremos <strong>qu√© tarea resuelve</strong> y c√≥mo lo hace.  Consideremos las <strong>caracter√≠sticas en la implementaci√≥n del dise√±o autom√°tico en iOS</strong> e intentemos desarrollar <strong>consejos pr√°cticos</strong> que puedan ayudarlo a trabajar con √©l. <br><br>  Esta historia estar√° muy cerca de un art√≠culo matem√°tico, por lo que primero estamos de acuerdo en la notaci√≥n para hablar el mismo idioma. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/-eGciYD9i3I" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <strong>Sobre el orador:</strong> Anton Sergeev ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">antonsergeev88</a> ) trabaja en el equipo Yandex.Mart, se ocupa del cliente m√≥vil para Maps en iOS.  Antes del desarrollo m√≥vil, se ocup√≥ de los sistemas de control de plantas de energ√≠a, donde el costo de los errores en el c√≥digo es demasiado alto para ser tolerado. <br><br><h2>  Designaciones <br></h2><br>  Los sistemas de ecuaciones lineales nos son familiares desde la escuela: est√°n indicados por un par√©ntesis y su soluci√≥n ya no existe.  Adem√°s, los sistemas de ecuaciones lineales tienen entidades que operan con dise√±o autom√°tico: restricciones.  Est√°n indicados por una l√≠nea recta. <br><br><img src="https://habrastorage.org/webt/ql/qb/sa/qlqbsasmt7hb37gbgal6han6-4c.png"><br><br>  El p√°jaro extra√±o y, como ya sabemos, peligroso, no se pinta accidentalmente en la esquina superior del tobog√°n.  En honor al casuario (lat. Cassowary), que, por supuesto, vive en Australia, se nombra un algoritmo en todos nuestros iPhones. <br><br>  El dise√±o autom√°tico tiene sus propias limitaciones, las designaremos con colores en orden de prioridad: rojo: obligatorio;  amarillo - alto;  azul - bajo. <br><br><h2>  Dise√±o <br></h2><br>  Cuando estaba preparando la presentaci√≥n, coloqu√© varios elementos en la pantalla, por ejemplo, un casuario.  Para hacer esto, determin√© que el casuario es una imagen rectangular.  Debe organizarlo en una hoja que tenga ejes y su propio sistema de coordenadas, y para esto determin√© las coordenadas de la esquina superior izquierda, el ancho y la altura. <br><br><img src="https://habrastorage.org/webt/5s/rq/ci/5srqci-zsre1tg_nbnn3grczdno.png"><br><br>  Conocer estos cuatro valores es suficiente para representar cualquier Vista. <br><br><h3>  Algoritmo No. 1 <br></h3><br>  Al colocar el casuario en la hoja, describimos discretamente el primer algoritmo de dise√±o: <br><br><ul><li>  determinar las coordenadas y tama√±os; </li><li>  aplicarlos a UIView. </li></ul><br>  El algoritmo funciona, pero es bastante dif√≠cil de usar, por lo que lo simplificaremos a√∫n m√°s. <br><br>  Supongamos que a continuaci√≥n hay una soluci√≥n para alg√∫n sistema de ecuaciones lineales. <br><br><img src="https://habrastorage.org/webt/ca/6i/ab/ca6iabqohj0bqr1rmujisor9fv4.png"><br><br>  El sistema de ecuaciones lineales es especial porque muchas operaciones se definen sobre √©l: doblar l√≠neas, multiplicarlas por constantes, etc.  Estas operaciones se llaman transformaciones lineales y, con su ayuda, el sistema se reduce a una forma arbitraria. <br><br>  La belleza de las transformaciones lineales es que son reversibles.  Esto nos lleva a una idea interesante y bastante sutil con la que comienza todo el dise√±o moderno. <br><br>  Que haya una Vista: un rect√°ngulo con sus coordenadas y tama√±o.  Queremos organizarlo para que el centro coincida con el punto dado.  Modelamos el centro usando transformaciones lineales: la <strong>coordenada de la esquina superior izquierda + la mitad del ancho</strong> . <br><br><img src="https://habrastorage.org/webt/yg/el/ic/ygelic6e5xa6orhvnaz7g5p_cki.png"><br><br>  Modelamos el centro por transformaci√≥n lineal, no fue as√≠: solo exist√≠an las coordenadas del punto superior izquierdo, ancho y alto. <br><br>  Del mismo modo, puede simular cualquier otra sangr√≠a, por ejemplo, 20 puntos desde la esquina derecha. <br><br><blockquote>  Es la idea de las transformaciones lineales lo que nos permite crear varios sistemas de composici√≥n tipogr√°fica. <br></blockquote><br>  Considere un ejemplo elemental.  Escribimos un sistema con el que establecemos las coordenadas del lado medio y derecho, el ancho y la relaci√≥n entre ancho y alto.  Resolvemos el sistema y obtenemos la respuesta. <br><br><img src="https://habrastorage.org/webt/hc/xc/hu/hcxchuyy2qvuvati_laj8afryig.png"><br><br>  Entonces llegamos al segundo algoritmo. <br><br><h3>  Algoritmo No. 2 <br></h3><br>  La segunda iteraci√≥n del algoritmo consta de los siguientes elementos: <br><br><ul><li>  conforman un sistema de ecuaciones lineales; </li><li>  nosotros lo resolvemos; </li><li>  aplicar la soluci√≥n a UIView. </li></ul><br>  Imagine que estuvi√©ramos en el siglo XX, en un momento en que los equipos inform√°ticos reci√©n estaban en pa√±ales, y fuimos los primeros en crear nuestro propio sistema de dise√±o.  Inventado, empaquetado, entregado al usuario, y √©l comienza a usarlo: completa los par√°metros iniciales y lo transfiere a nuestro sistema. <br><br><img src="https://habrastorage.org/webt/8b/np/wk/8bnpwkt2ufktqh1wa7dtumctozs.png"><br><br>  Hay un problema: este sistema no tiene una soluci√≥n √∫nica.  El problema no es excepcional, absolutamente todos los sistemas de dise√±o se topan con √©l, y se llama la <strong>falta de una soluci√≥n</strong> . <br><br>  No hay muchas maneras de salir de esta situaci√≥n: <br><br><ul><li>  Puede <strong>caerse</strong> : este es un m√©todo muy com√∫n.  Quienes trabajan con MacOS saben que NSLayoutConstraintManager hace exactamente eso. </li><li>  <strong>Devuelve el valor predeterminado</strong> .  En el contexto del dise√±o, siempre podemos devolver todos los ceros. </li><li>  Una forma m√°s conocida y delicada es <strong>evitar la entrada incorrecta</strong> .  Este m√©todo es utilizado por sistemas de dise√±o populares, por ejemplo, <strong>Yoga</strong> , conocido como <strong>Dise√±o Flex</strong> .  Dichos sistemas intentan crear una interfaz que no permita entradas incorrectas. </li><li>  Hay otra forma de resolver absolutamente todos los problemas: <strong>repensar todo desde el principio</strong> e inicialmente <strong>para evitar la aparici√≥n de este problema</strong> .  El dise√±o autom√°tico fue de esa manera. </li></ul><br><h2>  Dise√±o autom√°tico  Declaraci√≥n y soluci√≥n del problema. <br></h2><br>  Tenemos una imagen rectangular y para identificarla de manera √∫nica, necesitamos 4 par√°metros: <br><br><ul><li>  coordenadas de la esquina superior izquierda; </li><li>  ancho y alto. </li></ul><br><img src="https://habrastorage.org/webt/9k/m4/mn/9km4mnazc-bszyeglny7jgury1k.png"><br><br>  El dise√±o autom√°tico es muy detallado.  En comparaci√≥n con un sistema de ecuaciones lineales, es mucho m√°s dif√≠cil colocar todo en la pantalla con √©l.  Por lo tanto, consideraremos, sin p√©rdida de generalidad, el caso unidimensional. <br><br><img src="https://habrastorage.org/webt/yy/g-/bz/yyg-bzfkdyhagrqn28bj7ruydg8.png"><br><br>  Todo es muy simple: el espacio es una l√≠nea recta, y todos los objetos que se pueden colocar en √©l son puntos en una l√≠nea recta.  Un valor: <strong>X = X <sub>P es</sub></strong> suficiente para determinar la posici√≥n del punto. <br><br>  Considere el enfoque de dise√±o autom√°tico.  Hay un espacio en el que se establecen restricciones.  La soluci√≥n que queremos obtener es <strong>X = X <sub>0</sub></strong> , y ninguna otra. <br><br>  Hay un problema: no hemos definido operaciones con restricciones.  No podemos concluir directamente del registro que <strong>X = X <sub>0</sub></strong> , no podemos multiplicar nada ni agregar nada a nada.  Para hacer esto, necesitamos transformar la restricci√≥n en lo que podemos trabajar, en un sistema de ecuaciones y desigualdades. <br><br><img src="https://habrastorage.org/webt/dc/ru/gr/dcrugrl3rwq6esfcnrlz89ora8o.png"><br><br>  El dise√±o autom√°tico transforma un sistema de ecuaciones y desigualdades de la siguiente manera. <br><br><ul><li>  Primero introduce 2 variables adicionales que <strong>no</strong> son <strong>negativas</strong> y <strong>dependen unas de otras</strong> .  Al menos uno de ellos es igual a cero. </li><li>  La restricci√≥n en s√≠ se convierte a la notaci√≥n <strong>X = X <sub>0</sub> + a <sup>+</sup> - a <sup>-</sup></strong> . </li></ul><br>  Punto <strong>X <sub>0</sub></strong> <sub>&nbsp;</sub>  - soluci√≥n del sistema: si <strong>a <sup>+</sup></strong> y <strong>a <sup>-</sup></strong> son iguales a cero, entonces esto ser√° cierto.  Pero <strong>cualquier otro punto</strong> en esta l√≠nea ser√° una soluci√≥n. <br><br>  Por lo tanto, es necesario encontrar la mejor entre todas las soluciones.  Para hacer esto, presentamos una funci√≥n funcional, una funci√≥n ordinaria que devuelve un n√∫mero, y podemos comparar n√∫meros.  Dibujamos un gr√°fico y observamos que la soluci√≥n que originalmente quer√≠amos obtener es m√≠nima. <br><br>  Tengo <strong>un problema de programaci√≥n lineal</strong> .  Esto es exactamente lo que hace el dise√±o autom√°tico con restricciones, que no son solo en forma de igualdades, sino tambi√©n de desigualdades. <br><br><h3>  Restricciones de desigualdad <br></h3><br>  En el caso de las restricciones de desigualdad, la transformaci√≥n se produce de la misma manera que con las igualdades: se introducen dos variables adicionales y todo esto se recopila en el sistema.  Solo lo funcional es diferente, y es igual a <strong>a <sup>-</sup></strong> . <br><br><img src="https://habrastorage.org/webt/su/lp/db/sulpdbiqpzdvnd2s23qwo3zg3p0.png"><br><br>  El gr√°fico anterior muestra por qu√© esto es as√≠: cualquier valor de <strong>a <sup>+</sup></strong> con <strong>a <sup>-</sup> = 0</strong> (de <strong>X <sub>0</sub></strong> a <strong>+ ‚àû</strong> ) ser√° la soluci√≥n √≥ptima para el problema. <br><br>  Intentemos combinar estas dos restricciones de ecuaciones y desigualdades en una sola, ya que las restricciones no viven de forma aislada, se aplican juntas a todo el sistema. <br><br><img src="https://habrastorage.org/webt/kv/p4/ed/kvp4ed32qay13--nhn6neefffd0.png"><br><br>  Para cada restricci√≥n, se introduce un par adicional de variables y se compila el funcional.  Dado que queremos que todas estas restricciones se cumplan simult√°neamente, el <strong>funcional ser√° igual a la suma de todos los funcionales de cada restricci√≥n</strong> . <br><br>  Recopilamos la funci√≥n f y vemos que la soluci√≥n es <strong>X <sub>1</sub></strong> .  Como esper√°bamos, haciendo restricciones.  Entonces llegamos al tercer algoritmo. <br><br><h3>  Algoritmo No. 3 <br></h3><br>  Para hacer algo, necesitas: <br><br><ul><li>  crear un sistema de restricciones lineales; </li><li>  transformarlo en un problema de programaci√≥n lineal; </li><li>  resuelva el problema de cualquier manera conocida, por ejemplo, el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">m√©todo simplex</a> que se usa en Auto Layout; </li><li>  aplicar la soluci√≥n a UIView. </li></ul><br>  Este algoritmo parece ser suficiente, pero considere el siguiente caso: cambiamos el conjunto inicial de restricciones para que la segunda restricci√≥n sea ahora <strong>X ‚â• X</strong> <strong><sub>2</sub></strong> . <br><br><img src="https://habrastorage.org/webt/li/dd/at/liddathmoov5umsnhvnoevax6jy.png"><br><br>  ¬øQu√© soluci√≥n esperamos ver? <br><br><ul><li>  <strong>X <sub>1</sub></strong> ?  De hecho, en la primera restricci√≥n est√° escrito as√≠: <strong>X = X <sub>1</sub></strong> , y esta soluci√≥n entra en conflicto con la segunda restricci√≥n. </li><li>  <strong>X <sub>2</sub></strong> ?  Ya habr√° un conflicto con la primera restricci√≥n. </li></ul><br>  Para salir de la situaci√≥n, realizaremos transformaciones que ya sabemos c√≥mo hacer. <br><br>  El gr√°fico de la nueva funcionalidad se ve diferente: cualquier punto del intervalo de <strong>X <sub>1</sub></strong> a <strong>X <sub>2</sub></strong> ser√° la soluci√≥n v√°lida correcta del sistema.  Esto se llama <strong>incertidumbre</strong> . <br><br><h3>  Incertidumbre <br></h3><br>  El dise√±o autom√°tico tiene un mecanismo para resolver tales problemas: <strong>prioridades</strong> .  Les recuerdo que el amarillo indicar√° alta prioridad y el azul, bajo. <br><br><img src="https://habrastorage.org/webt/7e/go/is/7egoisncevkoitvo8fdxkvcdg7g.png"><br><br>  Convertir restricciones.  Tenga en cuenta que el sistema resultante es solo negro.  Sabemos c√≥mo trabajar con √©l, y no hay informaci√≥n sobre restricciones en √©l.  Est√° en las funcionalidades, de las cuales habr√° dos.  El dise√±o autom√°tico minimizar√° primero el primero y luego el segundo. <br><br>  En problemas de programaci√≥n lineal, no buscamos la soluci√≥n en s√≠, sino la gama de soluciones factibles.  Por supuesto, queremos que esta √°rea sea solo un punto, y el dise√±o autom√°tico act√∫a de la misma manera.  Primero, minimiza la funcionalidad de mayor prioridad en ( <strong>-</strong> <strong>‚àû,</strong> <strong>+ ‚àû)</strong> y, en la salida, recibe un dominio de soluciones factibles.  El dise√±o autom√°tico resuelve el segundo problema de programaci√≥n lineal que ya se encuentra en el rango de valores permitidos obtenido.  Tal mecanismo se denomina <strong>jerarqu√≠a de restricciones</strong> , y en este problema da el punto <strong>X <sub>2</sub></strong> . <br><br><h3>  Algoritmo No. 4 <br></h3><br><ul><li>  Crear una jerarqu√≠a de restricciones lineales; </li><li>  transformarlo en una tarea de programaci√≥n lineal; </li><li>  resuelva secuencialmente el problema de programaci√≥n lineal, desde la prioridad m√°s alta hasta la prioridad m√°s baja. </li><li>  aplicar la soluci√≥n a UlView. </li></ul><br>  Miremos la tarea anterior nuevamente.  No somos matem√°ticos, sino ingenieros, y cualquier ingeniero deber√≠a confundirse aqu√≠. <br><br>  Aqu√≠ hay un problema grave: el <strong>infinito</strong> , y no s√© qu√© es. <br><br>  El algoritmo Cassowary bajo el cap√≥ del dise√±o autom√°tico no era un mecanismo existente que cayera convenientemente en la tarea de dise√±o autom√°tico, sino que se pens√≥ como una herramienta de dise√±o, y proporcion√≥ mecanismos especiales para escapar del infinito desde el principio.  Para esto, se inventaron varios tipos de restricciones: <br><br><ul><li>  <strong>Los par√°metros</strong> son las restricciones con las que hemos estado trabajando.  Se llaman <strong>preferencias</strong> en el original <strong>, a</strong> veces en la documentaci√≥n de Apple, <strong>restricciones opcionales</strong> . </li><li>  <strong>Requisitos</strong> o requisitos: se requieren restricciones con prioridad. </li></ul><br>  Veamos c√≥mo se transforman los requisitos con tales prioridades desde el punto de vista de las matem√°ticas. <br><br><img src="https://habrastorage.org/webt/hm/mn/my/hmmnmycwgdfq9vuip1xeylz4caq.png"><br><br>  Nuevamente tenemos una l√≠nea recta con dos puntos, y la primera restricci√≥n es <strong>X = X <sub>1</sub></strong> .  En la diapositiva, es rojo, es decir, esta restricci√≥n con la prioridad requerida: la llamaremos un requisito. <br><br>  El dise√±o autom√°tico lo convierte en un sistema de ecuaciones lineales que contiene una ecuaci√≥n <strong>X = X <sub>1</sub></strong> .  Nada m√°s: sin tareas de programaci√≥n lineal, sin optimizaciones. <br><br>  La situaci√≥n es similar con las desigualdades, pero un poco m√°s complicada: aparecer√° <strong>una variable adicional</strong> que puede tomar cualquier valor mayor que 0. Para cualquier valor mayor que 0, esta restricci√≥n se cumplir√°.  Tenga en cuenta que aqu√≠ no hay tareas de programaci√≥n lineal y optimizaciones. <br><br>  Intentemos combinar todo esto, juntar dos requisitos y convertirlos en un solo sistema.  Un lector atento, se√±al√≥ que llegamos al mismo problema con el que comenzamos: los <strong>requisitos deben ser consistentes</strong> . <br><br><img src="https://habrastorage.org/webt/lj/fu/wx/ljfuwxbedffz_agc5ydwoxiv0os.png"><br><br>  Las restricciones de tipo <strong>requeridas</strong> o requisitos son una <strong>herramienta muy poderosa,</strong> pero no la principal, sino la auxiliar.  Se introdujo especialmente en Auto Layout para resolver el problema de los intervalos infinitos, debe usarse con cuidado. <br><br>  Intentemos combinar todos los tipos de restricciones que encontramos en un sistema.  Supongamos que queremos resolver el problema no en toda la l√≠nea, sino solo entre <strong>X <sub>0</sub></strong> y <strong>X <sub>3</sub> .</strong>  Transformando todo esto en un sistema de ecuaciones lineales y desigualdades, obtenemos lo siguiente. <br><br><img src="https://habrastorage.org/webt/nl/3k/lw/nl3klwil0nepuuqyjq-nmxxo0rs.png"><br><br>  En relaci√≥n con el sistema anterior, se agregaron dos variables adicionales: <strong>cyd</strong> , pero no entrar√°n en los funcionales, ya que las restricciones del tipo requerido no afectan al funcional en su forma original. <br><br>  Parece que la tarea no ha cambiado mucho: minimizamos lo mismo que antes, pero el rango inicial de valores aceptables est√° cambiando, ahora es de <strong>X <sub>0</sub></strong> a <strong>X <sub>3</sub></strong> . <br><br><blockquote>  Desde un punto de vista matem√°tico, los requisitos (restricciones del tipo requerido) son la capacidad de introducir ecuaciones adicionales en el sistema sin modificar sus funciones. <br></blockquote><br>  Debe tener mucho cuidado con esto, porque el abuso excesivo de las restricciones requeridas conducir√° a un <strong>problema sin soluciones</strong> , y el dise√±o autom√°tico <strong>no lo resolver√°</strong> . <br><br>  Llegamos al √∫ltimo quinto algoritmo. <br><br><h3>  Algoritmo No. 5 <br></h3><br><ul><li>  Definir las restricciones necesarias: requisitos de dise√±o; </li><li>  crear una jerarqu√≠a de restricciones lineales; </li><li>  convertir todas las restricciones en un problema de programaci√≥n lineal; </li><li>  resolver el problema de la programaci√≥n lineal; </li><li>  aplicar la soluci√≥n a UlView. </li></ul><br>  Examinamos Cassowary, un algoritmo que est√° dentro del dise√±o autom√°tico, pero cuando se implementa, surgen varias caracter√≠sticas. <br><br><h3>  Caracter√≠sticas del IOS <br></h3><br>  <strong>No hay c√°lculos en layoutSubviews ()</strong> . <br><br>  ¬øCu√°ndo se producen?  Respuesta: siempre, en cualquier momento, se cuenta el dise√±o autom√°tico.  El c√°lculo ocurre exactamente cuando agregamos restricciones a nuestra vista, o las activamos usando m√©todos API modernos para trabajar con restricciones. <br><br><img src="https://habrastorage.org/webt/rf/rf/ca/rfrfca8zmtb5ukabvarjdfygbii.png"><br><br>  Nuestras vistas son rect√°ngulos, pero el problema es que esta informaci√≥n no est√° contenida dentro del Cassowary, sino que tambi√©n debe incrustarse all√≠.  Tenemos un mecanismo para introducir restricciones adicionales.  Si introducimos para cada vista un conjunto de restricciones con ancho y alto positivos, entonces siempre obtendremos rect√°ngulos en la salida.  Es por eso que no podemos hacer las paces con la vista Dise√±o autom√°tico con dimensiones negativas. <br><br>  La segunda caracter√≠stica es <strong>intrinsicContentSize</strong> : el tama√±o intr√≠nseco que se puede establecer para cada vista. <br><br><img src="https://habrastorage.org/webt/of/dx/dr/ofdxdrma4ob54homy7amohpvove.png"><br><br>  Esta es una interfaz simple para crear 4 restricciones de desigualdad adicionales que se colocar√°n en el sistema.  Este mecanismo es muy conveniente, le permite reducir el n√∫mero de restricciones expl√≠citas, lo que simplifica el uso del dise√±o autom√°tico.  El √∫ltimo y m√°s delgado punto que a menudo se olvida es <strong>TranslateAutoresizingMaskIntoConstraints.</strong> <br><br><img src="https://habrastorage.org/webt/xz/pz/su/xzpzsulxwqohzm-ehd5rz2kg148.png"><br><br>  Esta es una <strong>muleta que</strong> se introdujo en los d√≠as de iOS 5, para que el c√≥digo anterior no se rompa despu√©s de la aparici√≥n de Auto Layout. <br><br>  Imagine una situaci√≥n: imponemos una visi√≥n sobre las restricciones.  Dentro de la vista, usamos la vista, que no sabe nada acerca de las restricciones, todo se compone en marcos, pero dentro de ella escribe la vista, que durante mucho tiempo se ha traducido en restricciones. <br><br><blockquote>  Les recuerdo que no hay marcos en la tarea de dise√±o autom√°tico de Cassowary, solo limitaciones. <br></blockquote><br>  El tama√±o y la posici√≥n de la vista que se contrajo en los marcos no est√°n completamente determinados por restricciones.  Al calcular el tama√±o y la posici√≥n de todas las dem√°s vistas, se tendr√°n en cuenta los tama√±os incorrectos, aunque despu√©s del dise√±o autom√°tico aplicaremos los marcos correctos all√≠. <br><br>  Para evitar esta situaci√≥n, si el valor de la variable TranslateAutoresizingMaskIntoConstraints es verdadero, se aplica una restricci√≥n adicional a cada vista que se presenta en el marco.  Este conjunto de restricciones puede variar de una ejecuci√≥n a otra.  Solo se sabe una cosa sobre este conjunto: su trama ser√° la que se transmiti√≥. <br><br>  La compatibilidad entre el c√≥digo antiguo escrito sin restricciones y el nuevo c√≥digo escrito con restricciones a menudo puede verse afectado por el mal uso de esta propiedad.  Estas restricciones necesariamente tienen la prioridad de los requisitos, por lo que si de repente imponemos una restricci√≥n a dicha vista, que tiene una prioridad muy alta, por ejemplo, un requisito, podemos crear accidentalmente un sistema no consistente que no tendr√° soluciones. <br><br>  <strong>Es importante saber:</strong> <br><br><ul><li>  Si creamos una vista desde <strong>Interface Builder</strong> , el valor predeterminado para esta propiedad ser√° <strong>falso</strong> . </li><li>  Si creamos una vista directamente desde el c√≥digo, entonces ser√° <strong>cierto</strong> . </li></ul><br>  La idea es muy simple: el antiguo c√≥digo en el que se cre√≥ la vista no sab√≠a nada sobre el dise√±o autom√°tico, y era necesario hacerlo para que, si la vista se usara en alg√∫n lugar de un lugar nuevo, funcionara. <br><br><h2>  Consejos pr√°cticos <br></h2><br>  Habr√° tres consejos en total y comenzar√° con el m√°s importante. <br><br><h3>  Optimizaci√≥n <br></h3><br><blockquote>  Es importante localizar el problema. <br></blockquote><br>  ¬øAlguna vez ha enfrentado el problema de optimizar la pantalla, que se presenta en Dise√±o autom√°tico?  Lo m√°s probable es que no, con mayor frecuencia se ha enfrentado al problema de optimizar el dise√±o de las celdas dentro de una tabla o una <strong>Vista de colecci√≥n</strong> . <br><br>  El dise√±o autom√°tico est√° lo suficientemente optimizado para crear cualquier pantalla y cualquier interfaz, pero crear 50 o 100 a la vez es un problema.  Para localizarlo y optimizarlo, veamos el experimento.  Las cifras est√°n tomadas de un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo</a> donde se describi√≥ por primera vez Cassowary. <br><img src="https://habrastorage.org/webt/jl/cb/qo/jlcbqo-0y685wxkbkniflmjlwli.png"><br><br>  La tarea es esta: creamos una cadena de vista una por una, y conectamos cada una de ellas con la anterior.  Por lo tanto, se construy√≥ una secuencia de 1000 elementos.  Despu√©s de medir varias operaciones, el tiempo se indica en milisegundos.  Los valores son bastante grandes, porque el dise√±o autom√°tico se invent√≥ en la uni√≥n de los a√±os 80 y 90. <br><br>  Al recopilar dicha cadena, puede actuar de la siguiente manera: <br><br><ul><li>  <strong>Agregue restricci√≥n de una en una</strong> y decida cada vez.  Esto llevar√° 38 segundos. </li><li>  Puede <strong>agregar todas las restricciones a la vez</strong> , y solo luego resolver el sistema.  Esta soluci√≥n es m√°s eficiente.  Seg√∫n datos antiguos, la eficiencia aumenta en un 70%, pero en la implementaci√≥n actual en dispositivos modernos solo habr√° un 20%.  Pero una adici√≥n cualitativa cualitativa de restricciones siempre ser√° m√°s efectiva. </li><li>  Cuando se ensambla toda la cadena, puede <strong>agregar una restricci√≥n m√°s</strong> .  Como se puede ver en la tabla, esta operaci√≥n es bastante barata. </li><li>  Lo m√°s interesante: <strong>si no agregamos ninguna restricci√≥n nueva, pero cambiamos alguna constante en una de las existentes</strong> , este es un orden de magnitud m√°s efectivo que eliminar o crear una nueva restricci√≥n. </li></ul><br>  Los primeros dos puntos pueden describirse como el c√°lculo primario de las interfaces, los dos √∫ltimos, como el siguiente. <br><br><h4>  C√°lculo de interfaz primaria <br></h4><br>  Aqu√≠ puede utilizar los m√©todos de agregar restricciones de forma masiva para la optimizaci√≥n: <br><br><ul><li>  <strong>NSLayoutConstraints.activate (_ :)</strong> : al crear una vista, recopile todas las restricciones secuencialmente en una matriz, cach√© y solo luego agr√©guela a la vez. </li><li>  O cree celdas en <strong>Interface Builder.</strong>  Har√° todo por nosotros y llevar√° a cabo una optimizaci√≥n adicional, que a menudo es conveniente. </li></ul><br><h4>  C√°lculos posteriores de la interfaz <br></h4><br>  Agregar o modificar restricciones es una operaci√≥n compleja, por lo que es mejor <strong>no cambiar el conjunto de restricciones, sino solo cambiar las constantes</strong> en las restricciones existentes.     : <br><br><ul><li> <strong> UIView</strong> ‚Äî     .   view   ,     Auto Layout.     ,    ,      view,     . </li><li> <strong>   </strong> <strong>‚Äî IntrinsicContentSize.</strong>  ,      ,     . </li><li> <strong>   </strong> .         , ,   . </li></ul><br>     ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">WWDC 2018S220 High Performance Auto Layout</a> .   ‚Äî Apple         ,     . <br><br><h2>   <br></h2><br>      ,       constraints. <br><br><h3>    <br></h3><br>   required ,  ‚Äî   ,       ,     .    . <br><br><blockquote>      ,    . <br></blockquote><br>     : <br><br><ul><li> <strong>  ,   </strong> .      (  loader) ‚Äî     . </li><li> <strong>  ,   </strong> .     ,     . </li></ul><br><br><h3>   <br></h3><br>   ,          ,   . <br><br>   <strong>constraint   required,     </strong> .    , ,    ,       .    ,      . <br><br>   ‚Äî <strong>  ,    </strong> .     ,        ‚Äî     .   -    ,        ,      . Auto Layout      ,      . <br><br> <strong>     </strong> ,       .      .  ,       ,    ,   .        layout,  ,    ,      .        . <br><br><h3>   <br></h3><br> <strong> ‚Äî   </strong> ,    Auto Layout,          ,     . <br><br>  ,  required,  ,    <strong>   </strong> .   : <br><br><ul><li>   ,     . </li><li>  ,   ,     . </li></ul><br>  ,       ,  <strong> ,     </strong> . <br><br>            ,      . ,     ,          ,    .  , <strong> ‚Äî   </strong> .      . <br><br> <strong>   ‚Äî    .</strong>      ,       ,     ,   ‚Äî     ,     ‚Äî   required      -. <br><br> <b> :</b> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Solving Linear Arithmetic Constraints for User Interface Applications</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">The Cassowary Linear Constraint Solving Algorithm</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Constraints as s Design Pattern</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Auto Layout Guide by Apple</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">WWDC 2018 Session 220 High Performance Auto Layout</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> UILabel   API Auto Layout ‚Äî  </a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> .  Medium</a> <br><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por cierto, ya hemos aceptado </font><font style="vertical-align: inherit;">el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">informe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Anton en el programa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AppsConf 2019</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Perm√≠tanme recordarles que cambiamos AppsConf de oto√±o a primavera, y la pr√≥xima conferencia m√°s √∫til para desarrolladores m√≥viles se llevar√° a cabo los d√≠as 22 y 23 de abril. </font><font style="vertical-align: inherit;">Es hora de pensar en el tema para la presentaci√≥n y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">presentar un informe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o discutir con el l√≠der la importancia de ir a la conferencia y reservar un boleto.</font></font><br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/437584/">https://habr.com/ru/post/437584/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../437574/index.html">El backend de WhatsApp, Facebook Messenger, Instagram se unir√°n y agregar√°n cifrado de extremo a extremo</a></li>
<li><a href="../437576/index.html">Conferencia DEFCON 17. Mis fracasos. Parte 1</a></li>
<li><a href="../437578/index.html">Conferencia DEFCON 17. Mis fracasos. Parte 2</a></li>
<li><a href="../437580/index.html">C√≥mo recordar un libro de texto de JavaScript en 5 d√≠as, o el "Palacio de la Memoria" en la vida cotidiana de un programador</a></li>
<li><a href="../437582/index.html">Descripci√≥n general de Vue.js 2.6</a></li>
<li><a href="../437586/index.html">Creamos una aplicaci√≥n de voz usando el ejemplo del Asistente de Google</a></li>
<li><a href="../437588/index.html">¬øEs m√°s divertido desarrollar para tel√©fonos m√≥viles que para la web?</a></li>
<li><a href="../437590/index.html">N√∫meros de latencia en iPhone</a></li>
<li><a href="../437592/index.html">Arquitectura asincr√≥nica de la capa de ejecuci√≥n de tareas</a></li>
<li><a href="../437594/index.html">C√≥mo erradicaba la causa de la tartamudez y el salto de cuadro en todos los juegos, y tambi√©n bajaba accidentalmente la temperatura en 15 grados</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>