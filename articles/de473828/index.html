<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìº üë©üèº‚Äçü§ù‚Äçüë®üèø üç∑ Computer Vision als Alternative zu B√ºroausweisen ‚òÄÔ∏è üëÜüèø üßúüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Heute werde ich Ihnen erz√§hlen, wie wir im B√ºro ein Zugangskontrollsystem basierend auf dem Vision- Gesichtserkennungsdienst hergestellt haben. Zun√§ch...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Computer Vision als Alternative zu B√ºroausweisen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/473828/"><img src="https://habrastorage.org/webt/un/xu/h1/unxuh13fdsjq-aryuwovmchvjxw.jpeg"><br><br>  Heute werde ich Ihnen erz√§hlen, wie wir im B√ºro ein Zugangskontrollsystem basierend auf dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vision-</a> Gesichtserkennungsdienst hergestellt haben.  Zun√§chst ein kleiner Hintergrund.  Wie bei jedem E-Mail-Dienst haben wir ein Anti-Spam-System erstellt.  Solche Systeme werden jetzt auf der Grundlage von maschinellem Lernen hergestellt. Wir haben ein starkes Team, das daf√ºr verantwortlich ist.  Und wo maschinelles Lernen stattfindet, gibt es Computer Vision.  Daher entstand der Vision-Service ganz nat√ºrlich und nat√ºrlich. <br><br>  Parallel dazu haben wir vor einigen Jahren die Cloud eingef√ºhrt, einen zuverl√§ssigen Dateispeicher mit Geoverteilung an Rechenzentren, der sowohl von Einzelpersonen als auch von Unternehmen verwendet werden kann.  Im Laufe der Zeit haben wir eine "Cloud for Business" erhalten, in der nicht nur Dateien gespeichert werden, sondern auch virtuelle Maschinen bestellt werden k√∂nnen.  Allm√§hlich wurde daraus MCS - Mail.ru Cloud Solutions, bei denen Vision organisch in einen der Services passt. <br><a name="habracut"></a><br><h1>  Wolke </h1><br>  Unsere neuronalen Netze k√∂nnen nicht nur Gesichter erkennen, sondern auch verschiedene <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Objekte, Objekte und Szenen</a> , einschlie√ülich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sehensw√ºrdigkeiten</a> .  Jetzt k√∂nnen sie ungef√§hr 10.000 Kategorien erkennen, und Bildverarbeitung funktioniert manchmal besser als Menschen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/399/b8d/be4/399b8dbe4c0ba7bb25dcc7701b9efc34.jpg"><br><br>  Dies ist meine Tochter in 2012, in 2015 und 2018.  Wenn ich sie nicht pers√∂nlich kannte, verstand ich wahrscheinlich nicht sofort, dass dies ein und dieselbe Person ist.  Und das neuronale Netzwerk konnte √ºbereinstimmen und verstehen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/543/a67/56d/543a6756d6caa113dd04657c45f8b550.jpg"><br><br>  Hier wandte sich das M√§dchen ab und blinzelte, und der Junge im Allgemeinen in einer M√ºtze mit einem Schatten auf der H√§lfte seines Gesichts.  Gleichzeitig erkannte das neuronale Netzwerk sie trotz dieser schwierigen Bedingungen genau.  Nat√ºrlich konnte die Technologie, die sich innerhalb des Unternehmens entwickelt, nicht anders, als Unterst√ºtzung bei internen Diensten zu finden. <br><br><h1>  Unser Intranet </h1><br>  Unser Intranet hei√üt sys.  Dies ist eine Art soziales Netzwerk (wir haben nur wenige davon).  Darin laden Mitarbeiter Fotos von verschiedenen Veranstaltungen hoch. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e2c/f0b/a5b/e2cf0ba5b544efc7d8d52f1c2c7ef640.jpg"><br><br>  Wenn mehrere hundert Fotos von der Veranstaltung ausgelegt sind, ist es ziemlich schwierig, sich dort zu finden.  Daher haben wir mit diesen Alben eine Bildverarbeitung verbunden, die direkt im Intranet an einem einzigen Ort die Fotos zeigt, auf denen ich abgebildet bin.  Hier hat mich das System auf einer der Sommer-Firmenfeiern gesehen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b47/69c/5b9/b4769c5b9c349f443e9968574d5417d3.jpg"><br><br>  Das neuronale Netzwerk hat mich sogar in der D√§mmerung im Profil erkannt, und auf dem Foto sind viel mehr Personen zu sehen. <br><br><h1>  Konferenzregale </h1><br>  Sp√§ter machten wir Konferenzregale.  Ich habe Software f√ºr das iPad geschrieben, die im Rack installiert ist, aber im Allgemeinen bin ich ein iOS-Entwickler und habe nichts mit Computer Vision zu tun. Ich helfe nur auf freundliche Weise. <br><br><img src="https://habrastorage.org/webt/p5/01/ul/p501uly37m546fdxxrwwtuegigo.png"><br><br>  Was ist die Essenz dieses Racks?  W√§hrend der gesamten Veranstaltung - einem Meeting, einer Konferenz, einer Firmenfeier oder zumindest einem Geburtstag - werden Sie von einem Fotografen fotografiert.  Von Zeit zu Zeit werden akkumulierte Bilder in die Cloud verschoben.  Sie k√∂nnen jederzeit zum Schalter gehen, ein Bild aufnehmen und auf die Schaltfl√§che ‚ÄûFind Me‚Äú klicken.  Das Rack zeigt entweder sofort alle Fotos an, auf denen Sie aufgenommen wurden, oder sagt, dass bisher nichts gefunden wurde, wenn das System die Bilder noch nicht indiziert hat, und fordert Sie auf, eine E-Mail einzugeben.  Und nach der Veranstaltung erhalten Sie per E-Mail einen Link zu dem Ordner in der Cloud mit allen Fotos, auf denen Sie sich befinden.  Dies ist eine der Anwendungen des Vision-Dienstes. <br><br><h1>  Zugangssystem </h1><br>  Nat√ºrlich wollte ich solche Gesichtserkennungsfunktionen nutzen, um nicht nur nach meiner Physiognomie in Unternehmensbildern zu suchen, sondern auch nach etwas Praktischerem.  Zum Beispiel f√ºr ein automatisches Durchsatzsystem.  Das Anbringen eines Passes an jedem Eingang Ihrer Etage ist nicht sehr praktisch: Sie vergessen oft den Pass, und f√ºr M√§dchen in leichter Kleidung im Sommer gibt es keinen Platz, um den Pass zu reparieren. <br><br>  Deshalb haben wir uns entschlossen zu experimentieren.  Wir haben alle Voraussetzungen daf√ºr: Wir m√ºssen niemanden um Erlaubnis bitten, eine sehr reaktionsschnelle Verwaltungsabteilung, die seufzend sagt: ‚ÄûOkay.  Bringen Sie Ihre Kameras an.  Nur nicht an der T√ºr.  T√ºren beziehen sich auf den Brandschutz. ‚Äú  Wir sind: ‚ÄûNa dann.  Wir werden an der Seite befestigen. "  Wir haben auch geduldige Kollegen, die unter uns gelitten haben. <br><br><h1>  Architektur </h1><br>  Auf den ersten Blick scheint die Architektur des Zugangssystems sehr einfach zu sein: Die Kamera nimmt Bilder auf, sendet sie an Vision und Vision √∂ffnet die T√ºr.  Aber als wir anfingen, mit Kollegen zu malen, wie das eigentlich geht, bekamen wir ein solches Schema: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7be/683/61c/7be68361c530fdb7f8da32500b7a5c4c.jpg"><br><br>  Den Block rechts nennen wir die ‚ÄûKamera‚Äú - dies ist das Modul, das an der T√ºr h√§ngt.  Es besteht aus drei Teilen.  Der Raspberry Pi empf√§ngt Videos von einer USB-Kamera, codiert mit FFmpeg und sendet.  Wir haben mehrere IP-Kameras einer angemessenen Preisklasse getestet, und jeder hatte eine merkliche Verz√∂gerung von etwa 0,5 s.  Und da es in anderen Phasen zu Verz√∂gerungen kommt, wenn eine Person auftaucht, in die Kamera schaut und f√ºr einige Sekunden nichts passiert, m√∂chte sie bereits einen Pass machen.  Daher haben wir Verz√∂gerungen nach M√∂glichkeit reduziert, und der Raspberry Pi mit einer USB-Kamera erwies sich als schneller als viele kommerzielle IP-Kameras.  Mit der Himbeere ist auch ein kleiner Arduino mit einer mehrfarbigen LED und einem Quietscher verbunden.  Die Standard-LED leuchtet rot.  Wenn eine Person auftaucht und erkannt wird, leuchtet das Gr√ºn auf. <br><br>  Der Raspberry Pi √ºbertr√§gt also den Videostream, der √ºber kabelgebundenes Ethernet in den Server gelangt.  Wir haben auf jeder Etage einen Serverraum, in dem sich Schalter, Verbindungskabel zu den Schreibtischen der Mitarbeiter befinden, und ein Vollzeit-Zugangskontrollsystem - ein Zugangskontroll- und -verwaltungssystem. <br><br>  Wir haben einen weiteren Raspberry Pi in den Serverraum gestellt, der den Videostream in Echtzeit empf√§ngt und √ºber OpenCV ausf√ºhrt.  Warum brauchen wir OpenCV?  Wir m√ºssen feststellen, ob das Bild ein Gesicht enth√§lt.  Ein neuronales Netzwerk, das eine Person auf einem Foto definiert, funktioniert etwas l√§nger und es ist zu teuer, ihm st√§ndig einen Videostream zuzuf√ºhren.  Daher bestimmen wir √ºber OpenCV das Vorhandensein eines Gesichts. Wenn es angezeigt wird, senden wir es an Vision.  Der Service antwortet entweder, dass er diesen Mitarbeiter nicht gefunden hat, oder sendet die Mitarbeiterkennung in der HR-Datenbank.  Mit dieser Mitarbeiter-ID rufen wir das Intranet auf, das dem ACS zugeordnet ist, und es gibt uns die Pass-ID zur√ºck.  Weiter werfen wir diese Pass-ID in Arduino, die sie an das ACS weitergibt.  F√ºr ein Zugangskontrollsystem entspricht dies einer Person, die einen Pass beantragt.  Das hei√üt, wir √§ndern das ACS in keiner Weise, es protokolliert weiterhin den Ein- und Ausstieg von Mitarbeitern. <br><br>  Wie haben wir unser System in ACS integriert?  In unserem B√ºro werden Bolid C2000-2-Ger√§te verwendet. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/351/01a/0de/35101a0de56c7879ac661be35a5060b8.jpg"><br><br>  Dies ist ein inl√§ndisches Zugangskontrollsystem.  H√∂chstwahrscheinlich k√∂nnen Sie √ºber die 485. Schnittstelle eine Verbindung zu diesen Ger√§ten herstellen, aber wir haben eine Verbindung √ºber das Wiegand-Protokoll hergestellt. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e5d/36e/70b/e5d36e70b78094589c3c63df5f6ee934.jpg"><br><br>  Wir haben den Arduino, der als Proxy fungiert, mit dem Passleser verbunden, der in der N√§he der T√ºr installiert ist. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9bc/26d/700/9bc26d7009e2dae347db5223fd50dfa8.jpg"><br><br>  Das Foto zeigt den Stromanschluss und zwei Datenleitungen vom Passleser.  Das Pad wird f√ºr eine bequemere Verbindung verwendet. <br><br>  Arduino empf√§ngt die Passnummer entweder vom Leseger√§t oder vom Raspberry Pi √ºber USB und gibt sie an das ACS weiter.  Das ACS wei√ü nicht einmal, woher die Passnummer stammt. <br><br><h1>  Wiegand </h1><br>  Dies ist ein Standardprotokoll f√ºr Zugangskontrollsysteme, das von den meisten Lesern unterst√ºtzt wird.  Das Protokoll ist sehr einfach: zwei Datenleitungen, eine Zeile mit Nullen und eine Zeile mit Einheiten.  Sobald Sie die Nulllinie mit Masse verbinden, versteht der Leser, dass Null √ºbertragen wird, genau wie bei Einheiten.  Das hei√üt, das Protokoll hat keine standardisierten Zeitabl√§ufe, und die Sprungnummer ist leicht durch einen Interrupt auf dem Arduino zu lesen, es ist einfach, sie als Datensequenz darzustellen.  Und da die Aufnahme eine Art Timing erfordert, habe ich mich auf folgende Werte konzentriert: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6aa/d03/ee3/6aad03ee3eb8aa49fab36710af32b342.jpg"><br><br>  Es gibt bereits eine fertige Bibliothek f√ºr Arduino.  Sie kann verschiedene Wiegand-Formate lesen, aber ihre F√§higkeiten sind darauf beschr√§nkt.  Und ich musste noch senden.  Deshalb habe ich meine Bibliothek geschrieben, die nur mit dem Wiegand-26-Format funktioniert.  26 ist die Anzahl der Bits: 3 Bytes der Sprungnummer und 2 Parit√§tsbits.  Dar√ºber hinaus steht in allen Dokumentationen und Artikeln, dass Ihr moderner Controller h√∂chstwahrscheinlich die Parit√§tsbits ignoriert, sodass ich faul bin und sie nicht z√§hle, sondern immer Null sende.  ACS nimmt dies normal wahr. <br><br>  Wir hatten ein anderes Problem: Wenn jemand zuerst vor der Kamera erschien und dann, ohne auf die Operation zu warten, einen Pass anwandte, entstand eine Rennsituation: Gleichzeitig kam die Passnummer vom Leser und von der Erkennung.  ACS konnte damit nicht umgehen und lie√ü keine Leute herein.  Daher musste ich der Bibliothek einen Ringpuffer mit 4 Codes hinzuf√ºgen.  Unabh√§ngig davon, woher die Codes kommen, werden sie in den Puffer gestellt und dann mit einer Zeit√ºberschreitung von 0,5 s an das ACS √ºbertragen.  Seitdem haben sich Kollegen nicht mehr dar√ºber beschwert, dass sie nicht erlaubt sind. <br><br><h1>  Pr√ºfstand </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/158/b78/43f/158b7843fe5152a47f530123a3342908.jpg"><br><br>  Der erste Prototyp wurde aus etwas Schrecklichem zusammengebaut.  Raspberry Pi hing in einer Schachtel an einem l√§cherlichen Gestell, und eine Kamera wurde auf ein doppelseitiges Klebeband geklebt.  Arduino h√§ngt an den Seitenestrich.  Im Allgemeinen ist alles, was wir lieben, sehr DIY. <br><br>  Nat√ºrlich war es in dieser Form unm√∂glich zu gehen, es war notwendig, sch√∂n zu arrangieren.  Wir haben mit mehreren Auftragnehmern gesprochen, sie haben uns versprochen, Muster in China zu bestellen, aber dann sind alle vereinbarten Fristen abgelaufen, und niemand hat uns etwas angeboten. <br><br>  Kundenspezifische Produkte haben ein Problem: Alle L√∂sungen sind hochspezialisiert und werden speziell f√ºr uns hergestellt.  Erstens werden wir vom Lieferanten abh√§ngig.  Zweitens ergibt sich ein einzigartiges Schaltungsdesign mit einer geringen Auflage, was bedeutet, dass die Kosten f√ºr ein St√ºck hoch sind.  Drittens ist die Produktionszeit lang genug. Wenn eine Kopie fehlschl√§gt, k√∂nnen wir keinen Ersatz schnell im Gesch√§ft kaufen. Wir m√ºssen auf die n√§chste Auflage warten. Wenn wir dies sofort tun, werden die verbleibenden Kopien im Lager abgestaubt. <br><br>  Nachdem uns alle potenziellen Partner im Stich gelassen hatten, ging ich zu einem Kollegen von Vision und sagte: ‚ÄûVolodya, lassen Sie mich einen Fall auf Ihrem 3D-Drucker drucken, damit er sch√∂n aussieht.‚Äú  Er seufzte und sagte: ‚ÄûKomm schon.  Was zu tun ist?" <br><br><h1>  Kamera V 1 </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/6f1/4f0/c61/6f14f0c6132add7dcd3eb753d95e822e.jpg"><br><br>  In Fusion habe ich so ein Frankenstein-Monster gezeichnet.  In der Ecke sollte sich ein Raspberry Pi mit einem Eingang f√ºr ein Ethernet-Kabel befinden.  Seiteneingang f√ºr Strom.  Der "zweite Stock" war eine Kamera.  Das Ergebnis war eine gro√üe Struktur, und ich habe sie sogar mit einer d√ºnnen Schicht bedruckt, um nicht viel Plastik auszugeben.  Es sah schrecklich aus und das Aufh√§ngen war noch peinlicher. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d5b/8ba/682/d5b8ba6826307a63d09473ef779d646c.jpg"><br><br>  Au√üerdem hat mir ein Kollege eine solche Referenz geschickt, sagen sie, das w√ºrde uns gefallen.  Ich antwortete, dass ich dies nicht tun k√∂nne, beschloss aber, ein anderes Geb√§ude zu entwerfen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9f6/668/e5e/9f6668e5e503946ad94e4a75319d4816.jpg"><br><br>  Das neue Geh√§use hatte einen Durchmesser von 11 cm und war kleiner als die CD.  Die Platzierung der F√ºllung erfolgt ebenfalls zweischichtig.  Nachdem ich die erste Version gedruckt hatte, wurde mir klar, dass es keinen Sinn macht, die USB-Kamera vollst√§ndig in ihre native H√ºlle zu stecken.  Ich habe es vorsichtig zerlegt und es stellte sich heraus, dass es 4 Landel√∂cher auf der Frontplatte hat.  Ich habe dieses Panel mit einer Kamera zu einer gemeinsamen Baugruppe mit Hocht√∂ner und LED kombiniert. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/031/180/4a4/0311804a49018e3b8f7f84b86caffc22.jpg"><br><br>  Zuerst haben wir versucht, √ºber gpio ein Quietschen auf dem Raspberry Pi zu erzeugen.  Es stellte sich als √§u√üerst schlecht heraus.  Aus diesem Grund haben wir uns entschlossen, diese Funktion getrennt vom Raspberry Pi zu √ºbernehmen, indem wir ein kleines Arduino (eigentlich Iskra mini), an das der Quietscher und die LED gel√∂tet wurden, √ºber TTL direkt an den Block angeschlossen haben. <br><br>  So sah es im Kampf aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93b/9fe/6ec/93b9fe6ecea2fff3b39c6c60a83240a9.jpg"></div><br>  Wir haben das Ger√§t auf den Boden geh√§ngt.  In dieser Form lebte es lange genug.  Quietschend, wundersch√∂n leuchtend, die T√ºr √∂ffnend jedoch nicht jedes Mal.  Die Kollegen beschwerten sich jedoch, dass die LED zu hell sei.  Ich musste es 4 mal schw√§chen. <br><br><h1>  Kamera V 2 </h1><br>  Dann machten sie diese Option: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b73/9b4/caf/b739b4caf65d413e545e9f1f1a3bd784.jpg"><br><br>  Es wurde vom Design des Xiaomi-Hubs mit einem leuchtenden Ring um den Umfang inspiriert.  Es sieht sehr sch√∂n aus.  Das Vision-Logo besteht aus einzelnen Teilen, die aus verschiedenfarbigen Kunststoffen gedruckt sind.  Hier ist das Modell: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ea/e91/536/1eae91536fc7fb62bf7b9dc8c4ee24d5.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d70/1ab/64d/d701ab64dc264959923d6c67ce011bd8.jpg"><br><br>  Diesmal habe ich den Quietscher an die R√ºckwand gestellt, die LED in einem transparenten Ring um den Umfang montiert und aus einem transparenten PLA gedruckt.  Das Dekor brach innen fast sofort zusammen, weil es urspr√ºnglich einfach durch Reibung eingesetzt wurde und ich es auf Kleber auftragen musste. <br><br><h1>  Kameraprobleme </h1><br>  Wir hatten die Idee, diese Entscheidung im gesamten Geb√§ude zu wiederholen.  Aber es gibt ein Problem: Fast alle Stockwerke haben zwei T√ºren, und jede sollte zwei Kameras haben, nur 96 Kameras f√ºr nur einen unserer T√ºrme, und jetzt wird die zweite aktiv entwickelt.  Es ist m√∂glich, so viele F√§lle zu drucken, aber es scheint bereits kompliziert zu sein.  Dar√ºber hinaus haben wir einige Komponenten im Ger√§t, was viele Fehlerquellen bedeutet.  Wenn wir die L√∂sung auf das gesamte Geb√§ude skalieren, werden wir diese Kameras st√§ndig warten.  Wieder die Komplexit√§t des schnellen Austauschs, da jede Kamera ein Einzelger√§t ist.  Und Sie m√ºssen entweder viele davon mit einem Rand drucken oder, falls etwas passiert ist, sofort einen neuen ausf√ºhren, drucken und sammeln.  Wir haben festgestellt, dass DIY-L√∂sungen cool sind, aber Sie ben√∂tigen etwas Bequemeres f√ºr die Replikation.  Und die Idee kam, alles auf das iPad zu √ºbertragen. <br><br><h3>  IPad </h3><br>  IPad hat mehrere Vorteile.  Der erste ist der Bildschirm.  Die Kollegen haben sich √ºber das fehlende Feedback beschwert, sie sind geeignet und verstehen nicht, ob die Anerkennung begonnen hat oder nicht, um auf sie zu warten oder nicht. <br><br>  Zweitens verf√ºgt iOS √ºber eine integrierte Gesichtserkennungsfunktion.  Die von OpenCV ausgef√ºhrte Funktion wurde an das iPad √ºbergeben.  Auf dem Bildschirm wird ein Rahmen angezeigt, und die Person sollte so weit kommen, dass das Gesicht in diesen Rahmen passt.  Danach erkennt das System es automatisch, Sie m√ºssen nichts mehr dr√ºcken. <br><br>  Drittens ist das iPad ein Massenprodukt.  Wenn es fehlschl√§gt, setzen wir einen anderen.  Obwohl das Tablet selbst etwa 20.000 Rubel kostet, ist es immer noch billiger als die von Partnern angebotenen kundenspezifischen Kameras.  Dar√ºber hinaus schneller und zuverl√§ssiger. <br><br><h1>  Neue Architektur </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/35e/90f/685/35e90f685bd150fcc133f73a24b07cee.jpg"><br><br>  Das iPad √ºbernahm die meisten Funktionen.  Auf dem Raspberry Pi, der sich im Serverraum befindet, gibt es tats√§chlich nur einen HTTP-Host, der eine GET-Anforderung mit einer Pass-ID akzeptiert.  Er gibt den Code sofort in Arduino und sie in ACS. <br><br>  In der ersten Version war Raspberry Pi sehr geladen, da OpenCV st√§ndig daran arbeitete.  Es war nicht mehr m√∂glich, eine zweite Kamera daran anzuschlie√üen, da nicht gen√ºgend Rechenleistung vorhanden war.  Wir haben bereits dar√ºber nachgedacht, dort einen ehrlichen Computer zu installieren, der 4 Threads von zwei T√ºren aus analysiert.  Aber dazu kam es nicht.  Jetzt wird die Gesichtssuche im Bild unabh√§ngig auf jedem iPad durchgef√ºhrt.  Im Kreuz gibt es zwei Arduino, einen f√ºr jede T√ºr.  Beide Boards arbeiten mit Ein- und Ausstiegsp√§ssen.  Warum ist es wichtig, mit Ein- und Ausreisekarten zu arbeiten?  Erstens, wenn das Gesicht erkannt wird und sich die T√ºr √∂ffnet, leuchtet das gr√ºne Licht am Kartenleser auf und die Kollegen verstehen, dass Sie ausgehen k√∂nnen.  Zweitens protokolliert ACS Ein- und Ausg√§nge.  Wenn wir die Ein- und Ausgabe getrennt emulieren, wird das ACS-Operationsschema nicht unterbrochen. <br><br>  Nat√ºrlich haben sich Designer zusammengerissen, die uns eine sch√∂ne Oberfl√§che gezeichnet haben.  So sieht es jetzt auf einer der Etagen unseres B√ºros aus: <br><br><img src="https://habrastorage.org/webt/t_/mv/27/t_mv273f9oor1vamysoa-hwybxe.jpeg"><br><br><h1>  Arbeiten Sie mit Vision </h1><br>  Trotz der Tatsache, dass MCS ein Gesch√§ftsprodukt ist, k√∂nnen Amateure es auch verwenden.  Der Service bietet jedem 5.000 kostenlose Transaktionen pro Monat, das sind 166 pro Tag.  Daher k√∂nnen Sie sich f√ºr Ihre h√§uslichen Bed√ºrfnisse bewerben, wenn Sie nat√ºrlich in das Limit passen.  Wie kann das gemacht werden? <br><br><pre><code class="python hljs">python examples/python/smarty.py \ -u <span class="hljs-string"><span class="hljs-string">"https://smarty.mail.ru/api/v1/persons/recognize ?oauth_provider=mcs&amp;oauth_token=e50b000614a371ce 99c01a80a4558d8ed93b313737363830"</span></span> \ -p friends1.jpg \ --meta <span class="hljs-string"><span class="hljs-string">'{"space":"1", "create_new":true}'</span></span> \ -v</code> </pre> <br>  Machen Sie ein Foto und senden Sie es zusammen mit unserem Zugriffstoken an Vision.  Wir geben an, dass wir mit dem ersten Leerzeichen arbeiten und setzen <code>create_new</code> - dann erstellt das System f√ºr jede unbekannte Person eine neue Kennung.  Folgendes erhalten wir als Antwort: <br><br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-string"><span class="hljs-string">"body"</span></span>:{ <span class="hljs-string"><span class="hljs-string">"objects"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"status"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"file_0"</span></span>, <span class="hljs-string"><span class="hljs-string">"persons"</span></span>:[ {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person1"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">102</span></span>,<span class="hljs-number"><span class="hljs-number">30</span></span>,<span class="hljs-number"><span class="hljs-number">184</span></span>,<span class="hljs-number"><span class="hljs-number">134</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99999</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.5025</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person2"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">393</span></span>,<span class="hljs-number"><span class="hljs-number">74</span></span>,<span class="hljs-number"><span class="hljs-number">461</span></span>,<span class="hljs-number"><span class="hljs-number">166</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99987</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.548</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person3"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">458</span></span>,<span class="hljs-number"><span class="hljs-number">48</span></span>,<span class="hljs-number"><span class="hljs-number">535</span></span>,<span class="hljs-number"><span class="hljs-number">149</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99976</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.4766</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person4"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">273</span></span>,<span class="hljs-number"><span class="hljs-number">45</span></span>,<span class="hljs-number"><span class="hljs-number">352</span></span>,<span class="hljs-number"><span class="hljs-number">147</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99963</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.504</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person5"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">525</span></span>,<span class="hljs-number"><span class="hljs-number">81</span></span>,<span class="hljs-number"><span class="hljs-number">600</span></span>,<span class="hljs-number"><span class="hljs-number">184</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.99954</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.4849</span></span>}, {<span class="hljs-string"><span class="hljs-string">"tag"</span></span>:<span class="hljs-string"><span class="hljs-string">"person6"</span></span>,<span class="hljs-string"><span class="hljs-string">"coord"</span></span>:[<span class="hljs-number"><span class="hljs-number">194</span></span>,<span class="hljs-number"><span class="hljs-number">76</span></span>,<span class="hljs-number"><span class="hljs-number">258</span></span>,<span class="hljs-number"><span class="hljs-number">167</span></span>],<span class="hljs-string"><span class="hljs-string">"confidence"</span></span>:<span class="hljs-number"><span class="hljs-number">0.9984</span></span>,<span class="hljs-string"><span class="hljs-string">"awesomeness"</span></span>:<span class="hljs-number"><span class="hljs-number">0.5725</span></span>} ] } ], <span class="hljs-string"><span class="hljs-string">"aliases_changed"</span></span>:false }, <span class="hljs-string"><span class="hljs-string">"htmlencoded"</span></span>:false, <span class="hljs-string"><span class="hljs-string">"last_modified"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> }</code> </pre> <br>  Ich habe JSON ein bisschen formatiert.  Die Antwort enth√§lt die Kennung der Person, die Koordinaten des Gesichts auf dem Foto und zwei Parameter: Wie gut das Gesicht erkannt wird und inwieweit diese Person dem Standard entspricht.  Sie k√∂nnen eine POST-Anfrage mit einem Bild in Ihrer Programmiersprache senden, JSON abrufen und die Antwort analysieren. <br><br>  Wenn Sie ein gro√ües Kreuz haben und nur ein Dutzend Personen bestimmen m√ºssen, k√∂nnen Sie diese manuell festlegen.  Dann gibt das System Kennungen f√ºr vertraute Personen und undefinierte f√ºr unbekannte Personen aus.  Personen k√∂nnen auch selektiv entfernt werden, beispielsweise wenn ein Mitarbeiter gek√ºndigt hat. <br><br><h1>  Ideen </h1><br>  In welchen Projekten k√∂nnen Sie die Gesichtserkennung verwenden?  Wenn Sie ein Bandbreitensystem implementieren m√∂chten, m√ºssen Sie sich um Anti-Spoofing k√ºmmern.  F√ºgen Sie beispielsweise eine Infrarotkamera hinzu, um festzustellen, ob es sich um ein Foto oder eine lebende Person handelt.  Oder setzen Sie zwei Kameras ein, um die Tiefe des Objekts zu bestimmen. Dies kann mit OpenCV erfolgen. <br><br>  Sie k√∂nnen die Erkennung von Personen im Eingang organisieren.  Wenn dies Ihre Nachbarn sind, ist alles in Ordnung, und wenn jemand ein Au√üenseiter ist, k√∂nnen Sie sich selbst eine Warnung senden.  Wir haben so ein Problem in unserem Haus, dass Fremde regelm√§√üig kommen und viel M√ºll auf der Landung hinter sich lassen. <br><br>  Wenn Sie einen ‚Äûintelligenten Spiegel‚Äú herstellen, k√∂nnen Sie ihn mit der Anerkennung von Familienmitgliedern ausstatten, damit jeder zeigen kann, was f√ºr ihn interessant ist.  Sagen wir, der Spiegel zeigt mir den Zeitplan f√ºr die heutigen Treffen, und mit meiner Tochter wird sie mich fr√∂hlich begr√º√üen und mir anbieten, meine Z√§hne zu putzen, und zwar nicht schnell, wie √ºblich, sondern zwei Minuten. <br><br>  Eine andere Idee ist die Erkennung eines Nummernschilds durch ein automatisches Tor im Land.  Um nicht auszugehen oder den Schl√ºsselanh√§nger zu dr√ºcken, k√∂nnen Sie eine Kamera aufstellen, die Ihre Nummer entfernt, und das Tor √∂ffnet sich automatisch. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de473828/">https://habr.com/ru/post/de473828/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de473816/index.html">Funktionen von modernem JavaScript, die Sie m√∂glicherweise nicht kennen</a></li>
<li><a href="../de473818/index.html">Anwendung auf TSD und Kommunikation mit 1C: Enterprise 8.3 √ºber HTTP-Service. Teil 4 (OnKeyUp. SC-Scanner mit Tastaturemulation)</a></li>
<li><a href="../de473822/index.html">Stellenangebot an einem Tag: Wie wir am selben Tag interviewt und Feedback gegeben haben</a></li>
<li><a href="../de473824/index.html">So erstellen Sie eine Gesch√§ftstechnologie f√ºr die Vertriebsplanung in einem einzigen System</a></li>
<li><a href="../de473826/index.html">OTP-Authentifizierung auf dem Apache-Webserver</a></li>
<li><a href="../de473832/index.html">ShIoTiny: Updates und Benachrichtigungen</a></li>
<li><a href="../de473834/index.html">Blackbox-√úberwachung in Clos-Netzwerken. Yandex-Bericht</a></li>
<li><a href="../de473838/index.html">DJI Mavic Mini: der leichteste zusammenklappbare Quadrocopter</a></li>
<li><a href="../de473840/index.html">Streamen Sie Videos vom Android-Ger√§t √ºber UDP zur JAVA-Anwendung</a></li>
<li><a href="../de473842/index.html">Oktober Maschinelles Lernen und k√ºnstliche Intelligenz News Digest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>