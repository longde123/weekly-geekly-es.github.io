<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💙 👩‍👧‍👧 🆑 Plus simple que MQTT? MQTT / UDP 🌇 🧑🏿‍🤝‍🧑🏿 🙏🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je voulais écrire un article détaillé sur ce sujet, mais, évidemment, mes mains n'atteignent pas. Par conséquent, un court message. J'ai développé et ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Plus simple que MQTT? MQTT / UDP</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429714/"> Je voulais écrire un article détaillé sur ce sujet, mais, évidemment, mes mains n'atteignent pas.  Par conséquent, un court message.  J'ai développé et implémenté en plusieurs langues comme code prototype une version du protocole MQTT sous le nom de travail MQTT / UDP.  Pour les impatients et ceux qui comprennent déjà tout et évidemment, le code <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur Github</a> <br><br>  <b>Pourquoi</b> <br><br>  Je vis dans un appartement qui est presque entièrement contrôlé par mon propre système de maison intelligente depuis plusieurs années.  Lumière, climatisation, capteurs, automatisation facile, c'est tout. <br><br>  Pendant ce temps, j'ai découvert (oui, d'ailleurs, je l'ai déjà compris) que la propriété principale des systèmes UD est la fiabilité. <br><br>  Tous les systèmes avec un nœud central sont, par définition, peu fiables.  D'où le désir d'obtenir l'interconnexion des composants du système (et ils sont nombreux dans une vraie maison intelligente) sans utiliser de hub central. <br><a name="habracut"></a><br>  Dans le même temps, nous partons du fait que, en général, le trafic des systèmes UD est petit - les capteurs doivent rarement être mis à jour plus d'une fois par minute, le reste des données est basé sur les événements (allumé) et le trafic est complètement insignifiant.  Même chaque seconde mise à jour de toutes les données du système n'est pas seulement une catastrophe, mais même un problème important. <br><br>  La conclusion logique est que la diffusion UDP est un outil idéal. <br><br>  (Oui, je suppose que le réseau interne de l'appartement est fermé par un pare-feu.) <br><br>  <b>Quels sont les avantages:</b> <br><br>  Implémentation incroyablement simple.  Un microcontrôleur minimal avec une petite mémoire peut envoyer un paquet UDP.  Pour le capteur, même la réception UDP n'est pas nécessaire. <br><br>  Latence extrêmement faible.  Il n'y a pas de renvoi dans le concentrateur central, le délai de livraison des paquets UDP est pratiquement le créneau horaire minimum dans un système moderne. <br><br>  Il n'y a pas de point de défaillance central dans le concentrateur / courtier.  Prenons un schéma simple: deux capteurs de température, un contrôleur de plancher chauffant, un contrôleur de batterie de chauffage.  Avec l'utilisation de MQTT / UDP, la défaillance d'une partie quelconque d'un tel système n'entraîne pas une défaillance du système dans son ensemble. <br><br>  Faible trafic réseau.  En dessous de nulle part.  TCP et les remerciements ajoutent uniquement du trafic, mais n'ajoutent pas de fiabilité.  Un capteur défectueux ne fonctionnera pas lors de la réception d'un TCP ACK.  Et nous identifions l'échec par l'absence de mises à jour. <br><br>  La fiabilité du protocole UDP lui-même est insignifiante - les capteurs mettent toujours à jour les données régulièrement, et la disparition du comptage est complètement invisible, et la disparition d'une commande, par exemple, d'un commutateur est visuellement confirmée par la défaillance du système cible.  Que fait une personne?  Clique à nouveau.  Cependant, il s'agit d'une limitation majeure de l'applicabilité du protocole.  Idéal pour les sondages récurrents. <br><br>  Aucune configuration système requise.  Personne n'a besoin d'enregistrer l'adresse d'un courtier, d'un hub, etc.  Cependant, la configuration du capteur est toujours nécessaire - vous devez enregistrer l'ID du capteur.  Mais lors du transfert d'autres parties du système vers d'autres serveurs, la reconfiguration des composants de réponse n'est pas requise. <br><br>  Il est particulièrement intéressant que ce modèle d'échange de données s'intègre bien sur des supports diffusés naturellement comme une chaîne radio ou RS / 485.  Je n'ai pas expérimenté cela, et le protocole dans de tels environnements doit être contrôlé.  Soit dit en passant, il est logique d'appliquer CRC16 à partir de Modbus. <br><br>  Les inconvénients sont également évidents: la fiabilité de la livraison n'est déterminée que par le matériel et le trafic sur le réseau, eh bien, si l'ennemi pénètre dans le réseau, le protocole est immédiatement vaincu.  Certes, nous serons francs, le piratage d'autres protocoles de maison intelligente typiques est une question de secondes, il s'agit donc d'un inconvénient controversé de MQTT / UDP.  Un autre inconvénient non évident est un maximum d'un récepteur par adresse IP. <br><br>  <b>Ce qui a été fait et réside dans le référentiel de code source:</b> <br><br><ul><li>  Implémentations client / serveur en plusieurs langues.  Il existe C, Python et Java.  Je ne maîtrisais pas Lua (ne pouvais pas mettre tout ce dont vous avez besoin, comment vivez-vous dans cela?) Et Codesys (ne pouvais pas compiler le paquet, qui a inventé cette langue?). </li><li>  Portail minimal vers MQTT traditionnel en Python </li><li>  Un outil primitif pour afficher le trafic MQTT / UDP sur un réseau </li></ul><br>  <b>Que ferais-je si j'avais plus de temps:</b> <br><br><ul><li>  J'écrirais un module pour openHUB. </li><li>  Ferait une variante de protocole sur JSON sur un autre port et un convertisseur au format principal et au port.  Ou une porte dans les deux sens. </li><li>  Je ferais des blancs d'implémentation pour les principales plates-formes.  Pour Arduino, j'ai fait une approche du poids et j'ai vraiment testé le code, mais je n'ai pas tout conçu correctement.  Pour Raspberry, les cas de test en Python conviennent. </li><li>  Signerait et chiffrerait numériquement, mais il n'est pas clair comment. </li><li>  Multidiffusion. </li></ul><br>  Merci à ce sujet, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bienvenue dans le référentiel</a> <br><br>  PS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Une approche similaire, mais avec une multidiffusion, est décrite dans cet article.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr429714/">https://habr.com/ru/post/fr429714/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr429704/index.html">Connectez le stockage LUN à chemins d'accès multiples à Windows Server 2008 et Windows Server 2012</a></li>
<li><a href="../fr429706/index.html">A1: 2017 - Injections (partie 3 et dernières)</a></li>
<li><a href="../fr429708/index.html">Dans le cadre du programme HolyJS 2018 Moscou</a></li>
<li><a href="../fr429710/index.html">Le dioxyde de carbone sur l'ISS</a></li>
<li><a href="../fr429712/index.html">Introduction aux crochets React</a></li>
<li><a href="../fr429716/index.html">5 meilleurs jeux PC pour apprendre l'anglais</a></li>
<li><a href="../fr429718/index.html">Je veux tout à la fois! Nous étudions la RAM HyperX Predator DDR4 RGB, avec une fréquence de 4000 MHz</a></li>
<li><a href="../fr429720/index.html">Comment un développeur novice pour survivre dans une interview et ne pas devenir fou au travail</a></li>
<li><a href="../fr429722/index.html">Comment nous avons effectué le paiement via Google Pay dans Yandex.Cash [mis à jour]</a></li>
<li><a href="../fr429724/index.html">Revue utile. 28 livres qui ont influencé ma pensée, inspiré ou amélioré</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>