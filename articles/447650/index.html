<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçüíº üç∫ üôÖüèª C√≥mo separar el frontend y el backend mientras se mantiene el entendimiento mutuo üïî üìá üõÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øC√≥mo cambiar la arquitectura de un producto monol√≠tico para acelerar su desarrollo y c√≥mo dividir un equipo en varios, manteniendo la consistencia de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo separar el frontend y el backend mientras se mantiene el entendimiento mutuo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ispsystem/blog/447650/"><p><img src="https://habrastorage.org/webt/qc/ps/g_/qcpsg_tgsrxk_lsfanwwhm3tedm.jpeg" alt="imagen"></p><br><p>  ¬øC√≥mo cambiar la arquitectura de un producto monol√≠tico para acelerar su desarrollo y c√≥mo dividir un equipo en varios, manteniendo la consistencia del trabajo?  Para nosotros, la respuesta a estas preguntas fue la creaci√≥n de una nueva API.  Debajo del corte, encontrar√° una historia detallada sobre el camino hacia dicha soluci√≥n y una descripci√≥n general de las tecnolog√≠as seleccionadas, pero para empezar, una peque√±a digresi√≥n. </p><br><p>  Hace unos a√±os, le√≠ en un art√≠culo cient√≠fico que se necesita m√°s y m√°s tiempo para una capacitaci√≥n completa, y en el futuro cercano tomar√° ochenta a√±os obtener conocimiento.  Aparentemente, en TI este futuro ya ha llegado. </p><br><p>  Tuve la suerte de comenzar a programar en aquellos a√±os en que no hab√≠a separaci√≥n entre los programadores backend y front-end, cuando las palabras "prototipo", "ingeniero de producto", "UX" y "QA" no sonaban.  El mundo era m√°s simple, los √°rboles eran m√°s altos y verdes, el aire era m√°s limpio y los ni√±os jugaban en los patios, en lugar de estacionar autos.  No importa c√≥mo quiera volver en ese momento, debo admitir que todo esto no es la intenci√≥n del supervillano, sino el desarrollo evolutivo de la sociedad.  S√≠, la sociedad podr√≠a desarrollarse de manera diferente, pero, como saben, la historia no tolera el modo subjuntivo. </p><a name="habracut"></a><br><h2 id="predystoriya">  Antecedentes </h2><br><p>  BILLmanager apareci√≥ justo en un momento en que no hab√≠a una separaci√≥n r√≠gida de direcciones.  Ten√≠a una arquitectura coherente, pod√≠a controlar el comportamiento del usuario e incluso pod√≠a ampliarse con complementos.  Pas√≥ el tiempo, el equipo desarroll√≥ el producto y todo parec√≠a estar bien, pero comenzaron a observarse fen√≥menos extra√±os.  Por ejemplo, cuando un programador se dedicaba a la l√≥gica de negocios, comenz√≥ a hacer mal los formularios, haci√©ndolos inconvenientes y dif√≠ciles de entender.  O la adici√≥n de una funcionalidad aparentemente simple tom√≥ varias semanas: arquitect√≥nicamente, los m√≥dulos estaban estrechamente acoplados, por lo que al cambiar uno, el otro tuvo que ser ajustado. </p><br><p>  La conveniencia, la ergonom√≠a y el desarrollo global de productos en general podr√≠an olvidarse cuando la aplicaci√≥n falla con un error desconocido.  Si antes un programador lograba trabajar en diferentes direcciones, entonces con el crecimiento del producto y los requisitos para √©l, esto se hizo imposible.  El desarrollador vio la imagen completa y entendi√≥ que si la funci√≥n no funciona de manera correcta y estable, los formularios, botones, pruebas y promociones no ayudar√°n.  Por lo tanto, pospuso todo y se sent√≥ para corregir el error desafortunado.  Hizo su peque√±a haza√±a, que no fue apreciada por nadie (simplemente no hab√≠a m√°s fuerza para la entrega correcta al cliente), pero la funci√≥n comenz√≥ a funcionar.  En realidad, para que estas peque√±as haza√±as lleguen a los clientes, el equipo incluir√° personas responsables de diferentes √°reas: frontend y backend, pruebas, dise√±o, soporte, promoci√≥n. </p><br><p>  Pero ese fue solo el primer paso.  El equipo ha cambiado y la arquitectura del producto se ha mantenido t√©cnicamente estrechamente unida.  Debido a esto, no fue posible desarrollar la aplicaci√≥n al ritmo requerido; al cambiar la interfaz, la l√≥gica del back-end tuvo que ser cambiada, aunque la estructura de los datos en s√≠ a menudo permaneci√≥ sin cambios.  Algo ten√≠a que hacerse con todo esto. </p><br><h2 id="frontend-i-bekend">  Frontend y backend </h2><br><p>  Convertirse en un profesional en todo es largo y costoso, por lo tanto, el mundo moderno de los programadores aplicados se divide, en su mayor parte, en un front-end y un back-end. </p><br><p> Aqu√≠ parece que todo est√° claro: estamos reclutando programadores front-end, ser√°n responsables de la interfaz de usuario y el backend finalmente podr√° enfocarse en la l√≥gica de negocios, modelos de datos y otros cap√≥ del motor.  Al mismo tiempo, el backend, el frontend, los probadores y los dise√±adores permanecer√°n en un solo equipo (porque hacen un producto com√∫n, solo se enfocan en diferentes partes del mismo).  Estar en un equipo significa tener un espacio informativo y, preferiblemente, territorial;  discutir nuevas caracter√≠sticas juntas y desarmar las terminadas;  coordinar el trabajo en una gran tarea. </p><br><p>  Para alg√∫n nuevo proyecto abstracto, esto ser√° suficiente, pero ya ten√≠amos la solicitud escrita, y los vol√∫menes del trabajo planificado y el momento de su implementaci√≥n indicaban claramente que un equipo no pod√≠a hacerlo.  Hay cinco personas en el equipo de baloncesto, 11 en el equipo de f√∫tbol y ten√≠amos unos 30. Esto no encajaba en el equipo scrum perfecto de cinco a nueve personas.  Era necesario dividir, pero ¬øc√≥mo mantener la coherencia?  Para moverse, era necesario resolver los problemas arquitect√≥nicos y organizativos. </p><br><p><img src="https://habrastorage.org/webt/wu/b3/ns/wub3ns2t5t0bw2p_iqusjtb5fg0.png" alt="imagen"><br>  <em>"Haremos todo en un proyecto, ser√° m√°s conveniente", dijeron ...</em> </p><br><h3 id="arhitektura">  Arquitectura </h3><br><p>  Cuando un producto est√° desactualizado, parece l√≥gico abandonarlo y escribir uno nuevo.  Esta es una buena decisi√≥n si puede predecir el tiempo y se adaptar√° a todos.  Pero en nuestro caso, incluso en condiciones ideales, el desarrollo de un nuevo producto llevar√≠a a√±os.  Adem√°s, los detalles espec√≠ficos de la aplicaci√≥n son tales que ser√≠a extremadamente dif√≠cil cambiar de lo antiguo a lo nuevo con toda su diferencia.  La compatibilidad con versiones anteriores es muy importante para nuestros clientes y, si no existe, se negar√°n a actualizar a la nueva versi√≥n.  La viabilidad de desarrollar desde cero en este caso es dudosa.  Por lo tanto, decidimos actualizar la arquitectura del producto existente manteniendo la m√°xima compatibilidad con versiones anteriores. </p><br><p>  Nuestra aplicaci√≥n es un monolito, cuya interfaz se cre√≥ en el lado del servidor.  La interfaz solo implement√≥ las instrucciones recibidas de ella.  En otras palabras, el backend no era responsable de la interfaz de usuario <strong>.</strong>  Arquitect√≥nicamente, el front-end y el back-end funcionaron como uno, por lo tanto, al cambiar uno, nos vimos obligados a cambiar el otro.  Y esto no es lo peor, lo que es mucho peor: era imposible desarrollar una interfaz de usuario sin un conocimiento profundo de lo que est√° sucediendo en el servidor. </p><br><p>  Era necesario separar el front-end y el back-end, para hacer aplicaciones de software separadas: la √∫nica forma de comenzar a desarrollarlas era al ritmo y al volumen requeridos.  Pero, ¬øc√≥mo hacer dos proyectos en paralelo, cambiar su estructura si dependen mucho el uno del otro? </p><br><p>  La soluci√≥n fue un sistema adicional: una <strong>capa</strong> .  La idea de la capa intermedia es extremadamente simple: debe coordinar el trabajo del backend y la interfaz y asumir todos los costos adicionales.  Por ejemplo, de modo que cuando la funci√≥n de pago se descompone en el lado del backend, la capa combina datos y, en el lado del front-end, no es necesario cambiar nada;  o para que para la conclusi√≥n en el tablero de todos los servicios ordenados por el usuario, no realicemos una funci√≥n adicional en el backend, sino que agreguemos los datos en la capa. </p><br><p>  Adem√°s de esto, la capa deb√≠a agregar certeza a lo que se puede llamar desde el servidor y que eventualmente regresar√°.  Quer√≠a que la solicitud de operaciones fuera posible sin conocer la estructura interna de las funciones que las realizan. </p><br><p><img src="https://habrastorage.org/webt/yl/uu/wo/yluuwozidmjlsnwb6e5fam9r3ak.png" alt="imagen"><br>  <em>Mayor estabilidad al dividir las √°reas de responsabilidad.</em> </p><br><h3 id="kommunikacii">  Comunicaciones </h3><br><p>  Debido a la fuerte dependencia entre el frontend y el backend, fue imposible hacer el trabajo en paralelo, lo que ralentiz√≥ a ambas partes del equipo.  Al dividir program√°ticamente un gran proyecto en varios, obtuvimos libertad de acci√≥n en cada uno, pero al mismo tiempo necesit√°bamos mantener la consistencia en el trabajo. </p><br><p>  Alguien dir√° que la consistencia se logra al mejorar las habilidades blandas.  S√≠, necesitan ser desarrollados, pero esto no es una panacea.  Observe el tr√°fico, tambi√©n es importante que los conductores sean educados, sepan c√≥mo evitar obst√°culos aleatorios y se ayuden mutuamente en situaciones dif√≠ciles.  Pero!  Sin las normas de tr√°nsito, incluso con las mejores comunicaciones, tendr√≠amos accidentes en cada intersecci√≥n y el riesgo de no llegar al lugar a tiempo. </p><br><p>  Necesit√°bamos reglas que ser√≠an dif√≠ciles de romper.  Como dicen, para que sea m√°s f√°cil cumplir que violar.  Pero la implementaci√≥n de cualquier ley conlleva no solo ventajas, sino tambi√©n gastos generales, y realmente no quer√≠amos retrasar el trabajo principal, atrayendo a todos al proceso.  Por lo tanto, creamos un grupo de coordinaci√≥n y luego un equipo cuyo objetivo era crear las condiciones para el desarrollo exitoso de diferentes partes del producto.  Ella configur√≥ las interfaces que permitieron que diferentes proyectos funcionen como un todo, las mismas reglas que son m√°s f√°ciles de seguir que romper. </p><br><p>  Llamamos a este comando "API", aunque la implementaci√≥n t√©cnica de la nueva API es solo una peque√±a parte de sus tareas.  Como las secciones comunes de c√≥digo se colocan en una funci√≥n separada, el equipo API analiza los problemas generales de los equipos de productos.  Aqu√≠ es donde tiene lugar la conexi√≥n de nuestro frontend y backend, por lo que los miembros de este equipo deben comprender los detalles de cada direcci√≥n. </p><br><p>  Quiz√°s la "API" no sea el nombre m√°s adecuado para el equipo, algo sobre arquitectura o visi√≥n a gran escala ser√≠a m√°s adecuado, pero, creo, este problema no cambia la esencia. </p><br><h2 id="api">  API </h2><br><p>  La interfaz de acceso a funciones en el servidor exist√≠a en nuestra aplicaci√≥n inicial, pero parec√≠a ca√≥tica para el consumidor.  Separar el frontend y el backend necesitaba m√°s seguridad. </p><br><p>  Los objetivos para la nueva API han surgido de las dificultades diarias en la implementaci√≥n de nuevas ideas de productos y dise√±o.  Necesit√°bamos: </p><br><ol><li>  D√©bil conectividad de los componentes del sistema para que el backend y la interfaz puedan desarrollarse en paralelo. </li><li>  Alta escalabilidad para que la nueva API no interfiera con la funcionalidad del edificio. </li><li>  Estabilidad y consistencia. </li></ol><br><p>  La b√∫squeda de una soluci√≥n para la API no comenz√≥ con el backend, como generalmente se acepta, sino que, por el contrario, pens√≥ lo que los usuarios necesitaban. </p><br><p>  Los m√°s comunes son todo tipo de API REST.  En los √∫ltimos a√±os, se les han agregado modelos descriptivos a trav√©s de herramientas como swagger, pero debe comprender que este es el mismo REST.  Y, de hecho, su principal m√°s y menos al mismo tiempo son las reglas, que son exclusivamente descriptivas.  Es decir, nadie proh√≠be que el creador de dicha API se desv√≠e de los postulados REST al implementar partes individuales. </p><br><p>  Otra soluci√≥n com√∫n es GraphQL.  Tampoco es perfecto, pero a diferencia de REST, la API GraphQL no es solo un modelo descriptivo, sino reglas reales. </p><br><p>  Anteriormente, habl√© sobre el sistema, que se supon√≠a que deb√≠a coordinar el trabajo del frontend y el backend.  La capa intermedia es exactamente ese nivel intermedio.  Habiendo considerado las posibles opciones para trabajar con el servidor, nos decidimos por <strong>GraphQL como una API para la interfaz</strong> .  Pero, dado que el backend est√° escrito en C ++, la implementaci√≥n del servidor GraphQL result√≥ ser una tarea no trivial.  No describir√© todas las dificultades y trucos a los que fuimos para superarlos, no produjo un resultado real.  Analizamos el problema desde el otro lado y decidimos que la simplicidad es la clave del √©xito.  Por lo tanto, nos decidimos por soluciones probadas: un servidor Node.js separado con Express.js y Apollo Server. </p><br><p>  Luego, ten√≠a que decidir c√≥mo acceder a la API de back-end.  Al principio miramos en la direcci√≥n de elevar la API REST, luego intentamos usar complementos en C ++ para Node.js.  Como resultado, nos dimos cuenta de que todo esto no nos conven√≠a, y despu√©s de un an√°lisis detallado <strong>del backend, elegimos una API basada en los servicios de gRPC</strong> . </p><br><p>  Tras reunir la experiencia adquirida en el uso de C ++, TypeScript, GraphQL y gRPC, obtuvimos una arquitectura de aplicaci√≥n que permite un desarrollo flexible del backend y la interfaz, mientras continuamos creando un √∫nico producto de software. </p><br><p>  El resultado es un esquema en el que el front-end se comunica con un servidor intermedio mediante consultas GraphQL (sabe qu√© preguntar y qu√© obtendr√° a cambio).  El servidor graphQL en resolvers llama a las funciones API del servidor gRPC, y para esto usan esquemas Protobuf para la comunicaci√≥n.  El servidor API basado en gRPC sabe de qu√© microservicio tomar datos o a qui√©n enviar la solicitud.  Los microservicios en s√≠ tambi√©n se basan en gRPC, lo que garantiza la velocidad del procesamiento de consultas, la tipificaci√≥n de datos y la capacidad de utilizar varios lenguajes de programaci√≥n para su desarrollo. </p><br><p><img src="https://habrastorage.org/webt/0v/ky/72/0vky72sh6-itvml0loum3uqhalk.png" alt="imagen"><br>  <em>Esquema general de trabajo despu√©s de un cambio en la arquitectura.</em> </p><br><p>  Este enfoque tiene una serie de desventajas, la principal de las cuales es el trabajo adicional de establecer y coordinar circuitos, as√≠ como escribir funciones auxiliares.  Pero estos costos pagar√°n cuando haya m√°s usuarios de API. </p><br><h2 id="rezultat">  Resultado </h2><br><p>  Hemos recorrido el camino evolutivo del desarrollo de un producto y equipo.  El √©xito alcanzado o la empresa convertida en un fracaso, probablemente sea temprano para juzgar, pero los resultados intermedios pueden resumirse.  Lo que tenemos ahora: </p><br><ol><li>  El frontend es responsable de la pantalla y el backend es responsable de los datos. </li><li>  En el frente, la flexibilidad se mantuvo en t√©rminos de consultas y recepci√≥n de datos.  La interfaz sabe qu√© puede preguntarle al servidor y qu√© respuestas deber√≠a ser. </li><li>  El backend tiene la oportunidad de cambiar el c√≥digo con la confianza de que la interfaz de usuario continuar√° funcionando.  Se hizo posible cambiar a la arquitectura de microservicios sin la necesidad de rehacer toda la interfaz. </li><li>  Ahora puede usar datos simulados para el frontend cuando el backend a√∫n no est√° listo. </li><li>  La creaci√≥n de esquemas de colaboraci√≥n elimin√≥ los problemas de interacci√≥n cuando los equipos entendieron la misma tarea de manera diferente.  El n√∫mero de iteraciones para alterar los formatos de datos se ha reducido: actuamos seg√∫n el principio de "medir siete veces, cortar una vez". </li><li>  Ahora puedes planificar el trabajo de sprint en paralelo. </li><li>  Para implementar microservicios individuales, ahora puede reclutar desarrolladores que no est√©n familiarizados con C ++. </li></ol><br><p>  De todo esto, llamar√≠a la oportunidad de desarrollar conscientemente el equipo y el proyecto como el logro principal.  Creo que pudimos crear condiciones en las que cada participante puede mejorar sus competencias con mayor determinaci√≥n, centrarse en las tareas y no dispersar la atenci√≥n.  Todos est√°n obligados a trabajar solo en su propio sitio, y ahora es posible con una alta participaci√≥n y sin cambios constantes.  <strong>Es imposible convertirse en un profesional en todo, pero ahora no es necesario para nosotros</strong> . </p><br><p>  El art√≠culo result√≥ ser de revisi√≥n y muy general.  Su objetivo era mostrar el camino y los resultados de una investigaci√≥n compleja sobre el tema de c√≥mo cambiar la arquitectura desde un punto de vista t√©cnico para continuar el desarrollo del producto, as√≠ como demostrar las dificultades organizativas de dividir un equipo en partes acordadas. </p><br><p>  Aqu√≠ me refer√≠ superficialmente a los problemas del equipo y el trabajo en equipo en un producto, la elecci√≥n de la tecnolog√≠a API (REST vs GraphQL), la conexi√≥n de aplicaciones Node.js con C ++, etc. Cada uno de estos temas dibuja un art√≠culo separado, y si est√° interesado, entonces los escribiremos </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/447650/">https://habr.com/ru/post/447650/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../447632/index.html">Infraestructura de bicicletas en los Pa√≠ses Bajos: ¬øc√≥mo funciona?</a></li>
<li><a href="../447634/index.html">La estimulaci√≥n con electricidad conduce a una mejora significativa en la memoria de los ancianos.</a></li>
<li><a href="../447636/index.html">C√≥mo ser un dise√±ador de tu vida: consejos de Bill Burnett, gerente del programa de dise√±o de Stanford y veterano de Apple</a></li>
<li><a href="../447638/index.html">Tel√©fono inteligente audi√≥filo: criterios de selecci√≥n y algunos representantes de clase t√≠picos</a></li>
<li><a href="../447640/index.html">Cloud Firestore + Android es solo</a></li>
<li><a href="../447652/index.html">Dise√±o de fin de semana: adaptador MIDI simple</a></li>
<li><a href="../447654/index.html">Raspberry-pi-tank y navegaci√≥n GPS</a></li>
<li><a href="../447656/index.html">Variabilidad de la evoluci√≥n: nacimiento vivo y puesta de huevos simult√°neamente en lagartos de la especie Saiphos equalis</a></li>
<li><a href="../447658/index.html">Juegos de programaci√≥n de acci√≥n: entretenimiento o una forma de presentar a los ni√±os algoritmos y rob√≥tica</a></li>
<li><a href="../447660/index.html">Qu√© esperar del nuevo Xeon E. Compare con E3 y saque conclusiones</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>