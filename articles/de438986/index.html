<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍✈️ ☯️ 🚜 React Tutorial Teil 14: Workshop zu klassenbasierten Komponenten, Komponentenstatus 🙌🏼 🤽🏿 👾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Teil der Übersetzung des React-Schulungskurses empfehlen wir Ihnen, die praktische Aufgabe der Arbeit mit klassenbasierten Komponenten abzus...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>React Tutorial Teil 14: Workshop zu klassenbasierten Komponenten, Komponentenstatus</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/438986/">  In diesem Teil der Übersetzung des React-Schulungskurses empfehlen wir Ihnen, die praktische Aufgabe der Arbeit mit klassenbasierten Komponenten abzuschließen.  Danach werden wir beginnen, ein so wichtiges Konzept von React wie den Zustand von Komponenten zu beherrschen. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/kv/3m/yg/kv3mygzwigixivdzbagb80fvlvi.png" alt="Bild"></a> <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1: Kursübersicht, Gründe für die Beliebtheit von React, ReactDOM und JSX</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2: Funktionskomponenten</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3: Komponentendateien, Projektstruktur</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 4: übergeordnete und untergeordnete Komponenten</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 5: Beginn der Arbeit an einer TODO-Anwendung, Grundlagen des Stylings</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 6: Über einige Funktionen des Kurses, JSX und JavaScript</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 7: Inline-Stile</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 8: Fortsetzung der Arbeit an der TODO-Anwendung, Vertrautheit mit den Eigenschaften von Komponenten</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 9: Komponenteneigenschaften</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 10: Workshop zum Arbeiten mit Komponenteneigenschaften und Styling</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 11: Dynamische Markup-Generierung und Map-Arrays-Methode</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 12: Workshop, dritte Phase der Arbeit an einer TODO-Anwendung</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 13: Klassenbasierte Komponenten</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 14: Workshop zu klassenbasierten Komponenten, Komponentenstatus</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 15: Komponentengesundheitsworkshops</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 16: Die vierte Phase der Arbeit an einer TODO-Anwendung, die Ereignisbehandlung</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 17: Fünfte Phase der Arbeit an einer TODO-Anwendung, Änderung des Status von Komponenten</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 18: Die sechste Phase der Arbeit an einer TODO-Anwendung</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 19: Methoden des Komponentenlebenszyklus</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 20: Die erste Lektion in bedingtem Rendern</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 21: Zweite Lektion und Workshop zum bedingten Rendern</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 22: Die siebte Phase der Arbeit an einer TODO-Anwendung, bei der Daten aus externen Quellen heruntergeladen werden</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 23: Erste Lektion zum Arbeiten mit Formularen</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 24: Lektion der zweiten Form</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 25: Workshop zum Arbeiten mit Formularen</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 26: Anwendungsarchitektur, Container- / Komponentenmuster</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 27: Kursprojekt</a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Lektion 25. Workshop.</font>  <font color="#3AC1EF">Klassenbasierte Komponenten</font> </h2><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Original</a> <br><br><h3>  <font color="#3AC1EF">»Job</font> </h3><br>  Unten finden Sie den Code, der in die Datei <code>index.js</code> einer Standardanwendung von React <code>index.js</code> werden muss, die von <code>create-react-app</code> .  Konvertieren Sie die in diesem Code enthaltenen Funktionskomponenten in klassenbasierte Komponenten und suchen und beheben Sie außerdem einen kleinen Fehler. <br><br>  Der Code für die Datei <code>index.js</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-dom"</span></span> <span class="hljs-comment"><span class="hljs-comment">// #1 function App() {   return (       &lt;div&gt;           &lt;Header /&gt;           &lt;Greeting /&gt;       &lt;/div&gt;   ) } // #2 function Header(props) {   return (       &lt;header&gt;           &lt;p&gt;Welcome, {props.username}!&lt;/p&gt;       &lt;/header&gt;   ) } // #3 function Greeting() {   const date = new Date()   const hours = date.getHours()   let timeOfDay     if (hours &lt; 12) {       timeOfDay = "morning"   } else if (hours &gt;= 12 &amp;&amp; hours &lt; 17) {       timeOfDay = "afternoon"   } else {       timeOfDay = "night"   }   return (       &lt;h1&gt;Good {timeOfDay} to you, sir or madam!&lt;/h1&gt;   ) } ReactDOM.render(&lt;App /&gt;, document.getElementById("root"))</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">▍Lösung</font> </h3><br>  Schauen wir uns zunächst an, was die Anwendung in ihrer ursprünglichen Form ausgibt, indem Sie sie in einem Browser öffnen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b0b/697/887/b0b697887f62737ccb67ed84139f6acf.png"></div><br>  <i><font color="#999999">Browser-Quellseite</font></i> <br><br>  Sie können sehen, dass die oberste Zeile auf der Seite nicht richtig aussieht.  Nach dem Komma nach Welcome sollte es offensichtlich so etwas wie einen Benutzernamen geben. <br><br>  Wenn wir den Anwendungscode analysieren, stellt sich heraus, dass die <code>Header</code> Komponente diese Zeile anzeigt und erwartet, dass die beim Erstellen ihrer Instanz festgelegte Eigenschaft <code>username</code> wird.  Eine Instanz dieser Komponente wird in der <code>App</code> Komponente erstellt.  Nachdem wir dies herausgefunden haben, können wir genau den Fehler korrigieren, der in der Aufgabe erwähnt wurde. <br><br>  Es ist zu beachten, dass Komponenten normalerweise in verschiedenen Dateien abgelegt werden. In diesem Fall haben wir sie jedoch alle in einer Datei beschrieben. <br><br>  Wir wandeln die Funktionskomponente der <code>App</code> in eine Komponente um, die auf der Klasse basiert.  Dazu reicht es aus, den Code in dieses Formular zu bringen: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   render() {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (           <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">               </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Header</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">username</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"vschool"</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml">               </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Greeting</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">           </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">       )   } }</span></span></code> </pre> <br>  Jetzt steht das Schlüsselwort <code>class</code> vor dem Komponentennamen, gefolgt vom <code>extends React.Component</code> , nach dem der Hauptteil der Klasse in geschweiften Klammern beschrieben wird.  Es sollte eine <code>render()</code> -Methode geben, die das zurückgibt, was wir von der Funktionskomponente zurückgegeben haben.  Andere Komponenten werden auf die gleiche Weise verarbeitet.  <code>&lt;Header username="vschool"/&gt;</code> auf die Konstruktion von <code>&lt;Header username="vschool"/&gt;</code> .  Hier übergeben wir die Eigenschaft <code>username</code> mit dem Wert <code>vschool</code> <code>Header</code> Komponente, wodurch der Fehler in der ursprünglichen Anwendung <code>vschool</code> wird. <br><br>  Wie Sie bereits wissen, erwartet die <code>Header</code> Komponente, dass die Eigenschaft <code>username</code> abgerufen wird, und in der Funktionskomponente wird auf diese Eigenschaft mit dem Konstrukt <code>props.username</code> (in diesem Fall ist <code>props</code> ein Argument für die Funktion, die die Komponente beschreibt).  In klassenbasierten Komponenten sieht dasselbe wie <code>this.props.username</code> .  Hier ist der neu gestaltete <code>Header</code> Komponentencode: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Header</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   render() {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (           <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">header</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">               </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Welcome, {this.props.username}!</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">           </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">header</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>       )   } }</code> </pre> <br>  Die dritte Komponente, <code>Greeting</code> , unterscheidet sich geringfügig von den anderen.  Tatsache ist, dass darin vor dem <code>return</code> einige Berechnungen durchgeführt werden.  Bei der Konvertierung in eine Komponente basierend auf einer Klasse müssen diese Berechnungen vor dem Befehl return in die Methode <code>render()</code> eingefügt werden.  Hier ist der Code für die neu gestaltete <code>Greeting</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Greeting</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   render() {       <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> date = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>()       <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> hours = date.getHours()       <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> timeOfDay             <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hours &lt; <span class="hljs-number"><span class="hljs-number">12</span></span>) {           timeOfDay = <span class="hljs-string"><span class="hljs-string">"morning"</span></span>       } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hours &gt;= <span class="hljs-number"><span class="hljs-number">12</span></span> &amp;&amp; hours &lt; <span class="hljs-number"><span class="hljs-number">17</span></span>) {           timeOfDay = <span class="hljs-string"><span class="hljs-string">"afternoon"</span></span>       } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {           timeOfDay = <span class="hljs-string"><span class="hljs-string">"night"</span></span>       }       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (           <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Good {timeOfDay} to you, sir or madam!</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>       )   } }</code> </pre> <br>  Beachten Sie, dass diese Komponente in der Deklaration dieser Komponente verwendet wurde: <code>class Greeting extends Component</code> .  Dies geschieht häufig der Kürze halber, aber damit dies funktioniert, müssen wir den Importbefehl <code>react</code> verfeinern und ihn in die folgende Form bringen: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, {Component} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span></code> </pre> <br>  So sieht die Seite der recycelten Anwendung in einem Browser aus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/723/85a/c56/72385ac56c477dae16e17385e996e831.png"></div><br>  <i><font color="#999999">Überarbeitete Anwendungsseite im Browser</font></i> <br><br>  Tatsächlich sieht es genauso aus wie die Seite der ursprünglichen Anwendung, und der einzige merkliche Unterschied zwischen diesen Seiten besteht darin, dass der an die <code>Header</code> Komponente übergebene Benutzername jetzt in der ersten Zeile angezeigt wird. <br><br>  Hier ist der vollständige Code für die verarbeitete Datei <code>index.js</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, {Component} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-dom"</span></span> <span class="hljs-comment"><span class="hljs-comment">// #1 class App extends React.Component {   render() {       return (           &lt;div&gt;               &lt;Header username="vschool"/&gt;               &lt;Greeting /&gt;           &lt;/div&gt;       )   } } // #2 class Header extends React.Component {   render() {       return (           &lt;header&gt;               &lt;p&gt;Welcome, {this.props.username}!&lt;/p&gt;           &lt;/header&gt;       )   } } // #3 class Greeting extends Component {   render() {       const date = new Date()       const hours = date.getHours()       let timeOfDay             if (hours &lt; 12) {           timeOfDay = "morning"       } else if (hours &gt;= 12 &amp;&amp; hours &lt; 17) {           timeOfDay = "afternoon"       } else {           timeOfDay = "night"       }       return (           &lt;h1&gt;Good {timeOfDay} to you, sir or madam!&lt;/h1&gt;       )   } } ReactDOM.render(&lt;App /&gt;, document.getElementById("root"))</span></span></code> </pre> <br>  Wenn die Umsetzung dieser praktischen Aufgabe Ihnen keine Schwierigkeiten bereitet hat - großartig.  Wenn Sie mit Komponenten, die auf Klassen basieren, immer noch nicht ganz vertraut sind, nehmen Sie sich Zeit, um mit ihnen zu experimentieren.  Beispielsweise können Sie klassenbasierte Komponenten wieder in funktionale Komponenten umwandeln und dann die inverse Transformation durchführen. <br><br><h2>  <font color="#3AC1EF">Lektion 26. Komponentenstatus</font> </h2><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Original</a> <br><br>  Zustand ist ein unglaublich wichtiges Reaktionskonzept.  Wenn die Komponente eigene Daten speichern und diese Daten verwalten muss (im Gegensatz zu der Situation, in der die übergeordnete Komponente Daten mithilfe des Eigenschaftsmechanismus an sie überträgt), verwenden Sie den Status der Komponente.  Heute betrachten wir die grundlegenden Konzepte bezüglich des Zustands von Komponenten. <br><br>  Ein Status sind nur die Daten, die die Komponente steuert.  Dies bedeutet insbesondere, dass die Komponente diese Daten ändern kann.  Gleichzeitig können die uns bereits bekannten Eigenschaften, die die Komponente von der übergeordneten Komponente erhält, von der empfangenden Komponente nicht geändert werden.  Sie sind laut React- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> unveränderlich (unveränderlich).  Wenn wir beispielsweise in einer auf einer Klasse basierenden Komponente versuchen, ein Konstrukt wie <code>this.props.name = "NoName"</code> , wird eine Fehlermeldung <code>this.props.name = "NoName"</code> . <br><br>  Es sollte beachtet werden, dass, wenn eine Komponente mit state arbeiten muss, es sich um eine Komponente handeln sollte, die auf der Klasse basiert.  Lassen Sie uns darüber sprechen, wie Sie die Komponente mit state ausstatten, indem Sie mit dem folgenden Codefragment beginnen, das den Inhalt der Datei <code>App.js</code> eines Standardprojekts enthält, das von <code>create-react-app</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   render() {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (           <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">               </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Is state important to know?</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">           </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>       )   } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> App</code> </pre> <br>  So sieht die Anwendungsseite in einem Browser aus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/064/581/ef8/064581ef82c735537bef748db3922a41.png"></div><br>  <i><font color="#999999">Anwendungsseite im Browser</font></i> <br><br>  Um eine Komponente mit state auszustatten, müssen Sie zunächst einen Klassenkonstruktor erstellen.  Es sieht aus wie eine <code>constructor()</code> -Klassenmethode.  Danach sieht der Komponentencode folgendermaßen aus: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() {         }     render() {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (           <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">               </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Is state important to know?</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">           </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>       )   } } Constructor()</code> </pre> <br>  Dies ist eine spezielle in JavaScript integrierte Methode, mit der Objekte basierend auf Klassen erstellt und initialisiert werden können.  Wenn Sie beim Erstellen eines Objekts etwas initialisieren müssen, werden die entsprechenden Operationen genau in der Methode <code>constructor()</code> . <br><br>  Das erste, was Sie im Konstruktorcode tun müssen, ist, den Konstruktor der übergeordneten Klasse aufzurufen.  Dies erfolgt mit der Funktion <code>super()</code> .  Im Konstruktor der übergeordneten Klasse können bestimmte Initialisierungsoperationen ausgeführt werden, deren Ergebnisse für unser Objekt nützlich sind.  So sieht unser Klassenkonstruktor jetzt aus: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() {   <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>() }</code> </pre> <br>  Um die Komponente mit state auszustatten, müssen wir im Konstruktor die class -Eigenschaft zur Klasseninstanz hinzufügen.  Diese Eigenschaft ist ein Objekt: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() {   <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>()   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = {} }</code> </pre> <br>  Hier haben wir es mit einem leeren Objekt initialisiert.  Mit dem Konstrukt <code>this.state</code> können Sie mit dem Status im Komponentencode <code>this.state</code> .  Fügen Sie dem Status eine neue Eigenschaft hinzu: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() {   <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>()   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = {       <span class="hljs-attr"><span class="hljs-attr">answer</span></span>: <span class="hljs-string"><span class="hljs-string">"Yes"</span></span>   } }</code> </pre> <br>  Lassen Sie uns nun darüber nachdenken, wie Sie das verwenden, was im Code im Status gespeichert ist.  Denken Sie daran, dass die Komponente die Frage anzeigt. <code>Is state important to know?</code>  .  Der Staat speichert die Antwort auf diese Frage.  Um diese Antwort nach der Frage hinzuzufügen, müssen Sie dasselbe tun, wie wir es normalerweise tun, indem Sie dem JSX-Code JavaScript-Konstrukte hinzufügen.  <code>{this.state.answer}</code> nämlich das Konstrukt <code>{this.state.answer}</code> am Ende der Zeile hinzu.  Infolgedessen sieht der vollständige Komponentencode folgendermaßen aus: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() {       <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>()       <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = {           <span class="hljs-attr"><span class="hljs-attr">answer</span></span>: <span class="hljs-string"><span class="hljs-string">"Yes"</span></span>       }   }     render() {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (           <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">               </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Is state important to know? {this.state.answer}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">           </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>       )   } }</code> </pre> <br>  Und so sieht die Anwendungsseite im Browser aus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a6e/e09/c3a/a6ee09c3a13e4300e3e2eb7568f42aa3.png"></div><br>  <i><font color="#999999">Anwendungsseite im Browser</font></i> <br><br>  An dieser Stelle möchte ich darauf hinweisen, dass der Status, den die Komponente während der Initialisierung erhält, während des Betriebs der Komponente geändert werden kann.  Darüber hinaus können Komponenten mithilfe des Mechanismus zum Arbeiten mit bereits bekannten Eigenschaften den Status an untergeordnete Komponenten übergeben.  Wenn wir in unserem Fall beispielsweise davon ausgehen, dass es eine bestimmte Komponente von <code>ChildComponent</code> , können Daten aus dem Status folgendermaßen an sie übertragen werden: <br><br><pre> <code class="javascript hljs">&lt;ChildComponent answer={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.answer}/&gt;</code> </pre> <br>  Wir werden zwar nicht im Detail darüber sprechen, wie die im Status der Komponente gespeicherten Daten geändert werden können.  Wir stellen nur fest, dass beim Aufrufen der <code>setState()</code> -Methode, mit der dieses Problem gelöst wird, nicht nur der Status der Komponente geändert wird, sondern auch die <code>setState()</code> , die über den Eigenschaftsmechanismus an die untergeordneten Komponenten übertragen werden, aktualisiert werden.  Wenn Sie den Status ändern, ändern sich außerdem die Daten aus dem auf der Anwendungsseite angezeigten Status automatisch. <br><br><h2>  <font color="#3AC1EF">Zusammenfassung</font> </h2><br>  Heute hatten Sie die Möglichkeit, mit klassenbasierten Komponenten zu arbeiten.  Darüber hinaus begann hier Ihre Einführung in das Konzept des Komponentenstatus.  Das nächste Mal finden Sie praktische Aufgaben für die Arbeit mit dem Staat. <br><br>  <b>Liebe Leser!</b>  Wenn Sie React in der Praxis verwenden, teilen Sie uns bitte mit, wie Sie den Status von Komponenten verwalten.  Verwenden Sie Standard-React-Tools oder etwas anderes? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de438986/">https://habr.com/ru/post/de438986/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de438976/index.html">Das Buch "Frühling. Alle Designmuster »</a></li>
<li><a href="../de438978/index.html">Immer und überall lernen! Podcasts für Entwickler in englischer Sprache</a></li>
<li><a href="../de438980/index.html">Spring Boot 2: Was ist neu?</a></li>
<li><a href="../de438982/index.html">Kubernetes-Handbuch, Teil 1: Anwendungen, Microservices und Container</a></li>
<li><a href="../de438984/index.html">Kubernetes-Handbuch, Teil 2: Erstellen und Arbeiten mit einem Cluster</a></li>
<li><a href="../de438988/index.html">React Tutorial Teil 15: Komponentenstatus-Workshops</a></li>
<li><a href="../de438992/index.html">Entwicklertagebuch oder schlechte Entscheidungen</a></li>
<li><a href="../de438994/index.html">Intel Xeon W-3175X, ein heißer Schlagzeuger. Testen</a></li>
<li><a href="../de438996/index.html">Firmennetzwerk und MitM. Teil 1</a></li>
<li><a href="../de438998/index.html">CGDevs Moscow Meetup # 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>