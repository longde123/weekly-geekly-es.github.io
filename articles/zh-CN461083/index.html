<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§˜ğŸ¼ ğŸ§”ğŸ¼ ğŸ¨ ç¼–å†™å…·æœ‰å®¢æˆ·ç«¯æœåŠ¡å™¨å®ç”¨ç¨‹åºWindowsåŠŸèƒ½çš„è½¯ä»¶ï¼Œç¬¬02éƒ¨åˆ† â˜¸ï¸ ğŸ† ğŸ </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ç»§ç»­å…³äºWindowsä¸­æ§åˆ¶å°å®ç”¨ç¨‹åºçš„è‡ªå®šä¹‰å®ç°çš„ç³»åˆ—æ–‡ç« ï¼ŒTFTPï¼ˆä¸´æ—¶æ–‡ä»¶ä¼ è¾“åè®®ï¼‰æ˜¯ä¸€ç§ç®€å•çš„æ–‡ä»¶ä¼ è¾“åè®®ã€‚ 

 ä¸ä¸Šæ¬¡ä¸€æ ·ï¼Œæˆ‘ä»¬ç®€è¦ä»‹ç»ä¸€ä¸‹è¯¥ç†è®ºï¼ŒæŸ¥çœ‹å®ç°ä¸æ‰€éœ€åŠŸèƒ½ç›¸ä¼¼çš„åŠŸèƒ½çš„ä»£ç ï¼Œç„¶åè¿›è¡Œåˆ†æã€‚ é˜…è¯»æ›´å¤š-å‰Šå‡ 

 æˆ‘ä¸ä¼šå¤åˆ¶ç²˜è´´å‚è€ƒä¿¡æ¯ï¼Œé€šå¸¸ä¼šåœ¨æ–‡ç« æœ«å°¾æ‰¾åˆ°è¿™äº›å‚è€ƒä¿¡æ¯çš„é“¾æ¥ï¼Œæˆ‘...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ç¼–å†™å…·æœ‰å®¢æˆ·ç«¯æœåŠ¡å™¨å®ç”¨ç¨‹åºWindowsåŠŸèƒ½çš„è½¯ä»¶ï¼Œç¬¬02éƒ¨åˆ†</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461083/"> ç»§ç»­å…³äºWindowsä¸­æ§åˆ¶å°å®ç”¨ç¨‹åºçš„è‡ªå®šä¹‰å®ç°çš„ç³»åˆ—æ–‡ç« ï¼ŒTFTPï¼ˆä¸´æ—¶æ–‡ä»¶ä¼ è¾“åè®®ï¼‰æ˜¯ä¸€ç§ç®€å•çš„æ–‡ä»¶ä¼ è¾“åè®®ã€‚ <br><br> ä¸ä¸Šæ¬¡ä¸€æ ·ï¼Œæˆ‘ä»¬ç®€è¦ä»‹ç»ä¸€ä¸‹è¯¥ç†è®ºï¼ŒæŸ¥çœ‹å®ç°ä¸æ‰€éœ€åŠŸèƒ½ç›¸ä¼¼çš„åŠŸèƒ½çš„ä»£ç ï¼Œç„¶åè¿›è¡Œåˆ†æã€‚ é˜…è¯»æ›´å¤š-å‰Šå‡ <a name="habracut"></a><br><br> æˆ‘ä¸ä¼šå¤åˆ¶ç²˜è´´å‚è€ƒä¿¡æ¯ï¼Œé€šå¸¸ä¼šåœ¨æ–‡ç« æœ«å°¾æ‰¾åˆ°è¿™äº›å‚è€ƒä¿¡æ¯çš„é“¾æ¥ï¼Œæˆ‘åªæ˜¯è¯´TFTPæœ¬è´¨ä¸Šæ˜¯FTPåè®®çš„ç®€åŒ–ç‰ˆæœ¬ï¼Œå…¶ä¸­åˆ é™¤äº†è®¿é—®æ§åˆ¶è®¾ç½®ï¼Œå®é™…ä¸Šé™¤äº†æ¥æ”¶å’Œä¼ è¾“æ–‡ä»¶çš„å‘½ä»¤å¤–ï¼Œè¿™é‡Œæ²¡æœ‰ä»»ä½•å…¶ä»–å†…å®¹ã€‚ ä½†æ˜¯ï¼Œä¸ºäº†ä½¿æˆ‘ä»¬çš„å®ç°æ›´åŠ ä¼˜é›…å¹¶é€‚åº”å½“å‰ç¼–å†™ä»£ç çš„åŸåˆ™ï¼Œè¯­æ³•ç•¥æœ‰æ›´æ”¹-ä¸ä¼šæ›´æ”¹å·¥ä½œåŸç†ï¼Œä½†æ˜¯IMHOæ¥å£å˜å¾—æ›´å…·é€»è¾‘æ€§å¹¶ç»“åˆäº†FTPå’ŒTFTPçš„ç§¯ææ–¹é¢ã€‚ <br><br> ç‰¹åˆ«æ˜¯ï¼Œåœ¨å¯åŠ¨æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè¯¢é—®æœåŠ¡å™¨çš„ipåœ°å€å’Œæ‰“å¼€è‡ªå®šä¹‰TFTPçš„ç«¯å£ï¼ˆç”±äºä¸æ ‡å‡†åè®®ä¸å…¼å®¹ï¼Œæˆ‘è®¤ä¸ºåº”è¯¥ä¿ç•™å°†ç«¯å£é€‰æ‹©ç»™ç”¨æˆ·çš„é€‰é¡¹ï¼‰ï¼Œç„¶åå»ºç«‹è¿æ¥ï¼Œå› æ­¤å®¢æˆ·ç«¯å¯ä»¥å‘é€ä»¥ä¸‹å‘½ä»¤ä¹‹ä¸€-è·å–æˆ–æ”¾ç½®ï¼Œä»¥æ¥æ”¶æˆ–å‘é€æ–‡ä»¶åˆ°æœåŠ¡å™¨ã€‚ æ‰€æœ‰æ–‡ä»¶éƒ½ä»¥äºŒè¿›åˆ¶æ¨¡å¼å‘é€-ä¸ºäº†ç®€åŒ–é€»è¾‘ã€‚ <br><br> ä¸ºäº†å®ç°åè®®ï¼Œæˆ‘ä¼ ç»Ÿä¸Šä½¿ç”¨äº†4ä¸ªç±»ï¼š <br><br><ul><li>  TFTPå®¢æˆ·ç«¯ </li><li>  TFTPæœåŠ¡å™¨ </li><li>  TFTPClientTester </li><li>  TFTPServerTester </li></ul><br> ç”±äºæµ‹è¯•ç±»ä»…ç”¨äºè°ƒè¯•ä¸»è¦ç±»ï¼Œå› æ­¤æˆ‘å°†ä¸å¯¹å…¶è¿›è¡Œåˆ†æï¼Œä½†æ˜¯ä»£ç å°†åœ¨å­˜å‚¨åº“ä¸­ï¼Œå¯ä»¥åœ¨æœ¬æ–‡ç»“å°¾å¤„æ‰¾åˆ°æŒ‡å‘è¯¥ç±»çš„é“¾æ¥ã€‚ ç°åœ¨ï¼Œæˆ‘å°†äº†è§£ä¸»è¦è¯¾ç¨‹ã€‚ <br><br><h4>  TFTPå®¢æˆ·ç«¯ </h4><br> æ­¤ç±»çš„ä»»åŠ¡æ˜¯é€šè¿‡å…¶ipå’Œç«¯å£å·è¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œä»è¾“å…¥æµï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºé”®ç›˜ï¼‰ä¸­è¯»å–å‘½ä»¤ï¼Œå¯¹å…¶è¿›è¡Œè§£æï¼Œç„¶åå°†å…¶ä¼ è¾“åˆ°æœåŠ¡å™¨ï¼Œå¹¶å–å†³äºæ‚¨æ˜¯å¦è¦ä¼ è¾“æˆ–æ¥æ”¶æ–‡ä»¶ï¼Œä¼ è¾“è¿˜æ˜¯ä¼ è¾“æ–‡ä»¶ã€‚æ¥æ”¶ã€‚ <br><br> ç”¨äºè¿æ¥åˆ°æœåŠ¡å™¨å¹¶ç­‰å¾…æ¥è‡ªè¾“å…¥æµçš„å‘½ä»¤çš„å®¢æˆ·ç«¯å¯åŠ¨ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚ åœ¨æœ¬æ–‡å¤–éƒ¨ï¼Œç¨‹åºå…¨æ–‡ä¸­ä»‹ç»äº†æ­¤å¤„ä½¿ç”¨çš„è®¸å¤šå…¨å±€å˜é‡ã€‚ ç”±äºå®ƒä»¬çš„çç¢æ€§ï¼Œæˆ‘ä¸ºäº†ä¸ä½¿æ–‡ç« è¿‡è½½è€Œä¸å†å¼•ç”¨ã€‚ <br><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String ip, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> port)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ip = ip; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.port = port; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { inicialization(); Scanner keyboard = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Scanner(System.in); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (isRunning) { getAndParseInput(keyboard); sendCommand(); selector(); } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { System.out.println(e.getMessage()); } }</code> </pre> <br> è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹è¿™æ®µä»£ç ä¸­è°ƒç”¨çš„æ–¹æ³•ï¼š <br><br> åœ¨è¿™é‡Œå‘é€æ–‡ä»¶-ä½¿ç”¨æ‰«æå™¨ï¼Œæˆ‘ä»¬å°†æ–‡ä»¶çš„å†…å®¹æ˜¾ç¤ºä¸ºå­—èŠ‚æ•°ç»„ï¼Œç„¶åå°†å…¶å†…å®¹é€ä¸ªå†™å…¥å¥—æ¥å­—ï¼Œç„¶åå°†å…¶å…³é—­å¹¶é‡æ–°æ‰“å¼€ï¼ˆè¿™ä¸æ˜¯æœ€æ˜æ˜¾çš„è§£å†³æ–¹æ¡ˆï¼Œä½†å®ƒä¿è¯äº†èµ„æºçš„é‡Šæ”¾ï¼‰ï¼Œä¹‹åæˆ‘ä»¬æ˜¾ç¤ºæœ‰å…³æˆåŠŸçš„æ¶ˆæ¯ä¼ è¾“ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">put</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String sourcePath, String destPath)</span></span></span><span class="hljs-function"> </span></span>{ File src = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(sourcePath); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { InputStream scanner = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileInputStream(src); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] bytes = scanner.readAllBytes(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> b : bytes) sout.write(b); sout.close(); inicialization(); System.out.println(<span class="hljs-string"><span class="hljs-string">"\nDone\n"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { System.out.println(e.getMessage()); } }</code> </pre> <br> æ­¤ä»£ç æ®µæè¿°äº†ä»æœåŠ¡å™¨æ¥æ”¶æ•°æ®ã€‚ ä¸€åˆ‡å†æ¬¡å˜å¾—å¾®ä¸è¶³é“ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªä»£ç å—æ‰æœ‰æ„ä¹‰ã€‚ ä¸ºäº†ç¡®åˆ‡åœ°äº†è§£æ‚¨éœ€è¦ä»å¥—æ¥å­—è¯»å–å¤šå°‘å­—èŠ‚ï¼Œæ‚¨éœ€è¦çŸ¥é“ä¼ è¾“çš„æ–‡ä»¶çš„é‡é‡ã€‚ æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶å¤§å°ä¼¼ä¹æ˜¯ä¸€ä¸ªé•¿æ•´æ•°ï¼Œå› æ­¤æ­¤å¤„æ¥å—4ä¸ªå­—èŠ‚ï¼Œéšåå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæ•°å­—ã€‚ è¿™ä¸æ˜¯ä¸€ç§éå¸¸Javaçš„æ–¹æ³•ï¼Œå®ƒä¸SIç›¸å½“ï¼Œä½†æ˜¯å¯ä»¥è§£å†³å…¶é—®é¢˜ã€‚ <br><br> ç„¶åä¸€åˆ‡éƒ½æ˜¯å¾®ä¸è¶³é“çš„-æˆ‘ä»¬ä»å¥—æ¥å­—è·å–äº†å·²çŸ¥æ•°é‡çš„å­—èŠ‚å¹¶å°†å…¶å†™å…¥æ–‡ä»¶ï¼Œç„¶åæ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯ã€‚ <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String sourcePath, String destPath)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> sizeOfFile = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] sizeBytes = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[Long.SIZE]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i =<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt; Long.SIZE/Byte.SIZE; i++) { sizeBytes[i] = (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)sin.read(); sizeOfFile*=<span class="hljs-number"><span class="hljs-number">256</span></span>; sizeOfFile+=sizeBytes[i]; } FileOutputStream writer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileOutputStream(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(destPath)); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i =<span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; sizeOfFile; i++) { writer.write(sin.read()); } writer.close(); System.out.println(<span class="hljs-string"><span class="hljs-string">"\nDONE\n"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e){ System.out.println(e.getMessage()); } }</code> </pre> <br> å¦‚æœåœ¨å®¢æˆ·ç«¯çª—å£ä¸­è¾“å…¥äº†é™¤getæˆ–putä»¥å¤–çš„å‘½ä»¤ï¼Œåˆ™ä¼šè°ƒç”¨showErrorMessageå‡½æ•°ï¼Œæ˜¾ç¤ºè¾“å…¥çš„ä¸æ­£ç¡®æ€§ã€‚ ç”±äºçäº‹-æˆ‘ä¸å¼•ç”¨ã€‚ æ›´æœ‰è¶£çš„æ˜¯è·å–å’Œåˆ†å‰²è¾“å…¥å­—ç¬¦ä¸²çš„åŠŸèƒ½ã€‚ æˆ‘ä»¬å°†æ‰«æå™¨ä¼ é€’ç»™å®ƒï¼Œæˆ‘ä»¬æœŸæœ›ä»ä¸­æ¥æ”¶åˆ°ä¸€æ¡ç”±ä¸¤ä¸ªç©ºæ ¼åˆ†éš”çš„è¡Œï¼Œå…¶ä¸­åŒ…å«å‘½ä»¤ï¼Œæºåœ°å€å’Œç›®æ ‡åœ°å€ã€‚ <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAndParseInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Scanner scanner)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { input = scanner.nextLine().split(<span class="hljs-string"><span class="hljs-string">" "</span></span>); typeOfCommand = input[<span class="hljs-number"><span class="hljs-number">0</span></span>]; sourcePath = input[<span class="hljs-number"><span class="hljs-number">1</span></span>]; destPath = input[<span class="hljs-number"><span class="hljs-number">2</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { System.out.println(<span class="hljs-string"><span class="hljs-string">"Bad input"</span></span>); } }</code> </pre> <br> å‘½ä»¤å‘é€-å°†ä»æ‰«æä»ªè¾“å…¥çš„å‘½ä»¤å‘é€åˆ°å¥—æ¥å­—å¹¶å¼ºåˆ¶å‘é€ <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendCommand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String str : input) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ch : str.toCharArray()) { sout.write(ch); } sout.write(<span class="hljs-string"><span class="hljs-string">' '</span></span>); } sout.write(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { System.out.print(e.getMessage()); } }</code> </pre> <br> é€‰æ‹©å™¨æ˜¯æ ¹æ®è¾“å…¥å­—ç¬¦ä¸²ç¡®å®šç¨‹åºåŠ¨ä½œçš„å‡½æ•°ã€‚ è¿™é‡Œçš„ä¸€åˆ‡éƒ½ä¸æ˜¯å¾ˆæ¼‚äº®ï¼Œå¹¶ä¸”ä½¿ç”¨äº†è¿«ä½¿ä»£ç å—ä½¿ç”¨çš„ä¸å¤ªå¥½çš„æŠ€å·§ï¼Œä½†è¿™ä¸»è¦æ˜¯å› ä¸ºJavaä¸­ç¼ºå°‘æŸäº›ä¸œè¥¿ï¼Œä¾‹å¦‚Cï¼ƒä¸­çš„å§”æ‰˜ï¼ŒC ++ä¸­çš„å‡½æ•°æŒ‡é’ˆï¼Œæˆ–è€…è‡³å°‘æ˜¯å¯æ€•è€Œå¯æ€•çš„gotoï¼Œè®©æ‚¨å®ç°ç¾ä¸½ã€‚ å¦‚æœæ‚¨çŸ¥é“å¦‚ä½•ä½¿ä»£ç æ›´åŠ ä¼˜é›…ï¼Œæˆ‘æ­£åœ¨ç­‰å¾…è¯„è®ºä¸­çš„æ‰¹è¯„ã€‚ åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™é‡Œéœ€è¦ä¸€ä¸ªString-delegateå­—å…¸ï¼Œä½†æ˜¯æ²¡æœ‰å§”æ‰˜... <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">selector</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (typeOfCommand.equals(<span class="hljs-string"><span class="hljs-string">"get"</span></span>)){ get(sourcePath, destPath); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (typeOfCommand.equals(<span class="hljs-string"><span class="hljs-string">"put"</span></span>)){ put(sourcePath, destPath); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } showErrorMessage(); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); } }</code> </pre> <br><h4>  TFTPæœåŠ¡å™¨ </h4><br> æœåŠ¡å™¨çš„åŠŸèƒ½ä¸å®¢æˆ·ç«¯çš„åŠŸèƒ½å¤§ä¸ç›¸åŒï¼Œä»…åœ¨äºæœåŠ¡å™¨çš„å‘½ä»¤ä¸æ˜¯æ¥è‡ªé”®ç›˜ï¼Œè€Œæ˜¯æ¥è‡ªå¥—æ¥å­—ã€‚ æœ‰äº›æ–¹æ³•æ˜¯é‡åˆçš„ï¼Œæ‰€ä»¥æˆ‘ä¸äºˆèµ˜è¿°ï¼›æˆ‘åªä¼šæåŠä¸åŒä¹‹å¤„ã€‚ <br><br> é¦–å…ˆï¼Œä½¿ç”¨runæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªç”¨äºè¾“å…¥çš„ç«¯å£ï¼Œå¹¶åœ¨ä¸€ä¸ªæ°¸æ’çš„å‘¨æœŸä¸­å¤„ç†æ¥è‡ªå¥—æ¥å­—çš„è¾“å…¥æ•°æ®ã€‚ <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> port)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.port = port; incialization(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { getAndParseInput(); selector(); } }</code> </pre> <br>  putæ–¹æ³•æ˜¯writeToFileFromSocketæ–¹æ³•çš„åŒ…è£…ï¼Œè¯¥æ–¹æ³•æ‰“å¼€å†™å…¥æ–‡ä»¶çš„æµï¼Œå¹¶åœ¨è®°å½•å®Œæˆåä»å¥—æ¥å­—å†™å…¥æ‰€æœ‰è¾“å…¥å­—èŠ‚ï¼Œå¹¶æ˜¾ç¤ºæœ‰å…³ä¼ è¾“æˆåŠŸå®Œæˆçš„æ¶ˆæ¯ã€‚ <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">put</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String source, String dest)</span></span></span></span>{ writeToFileFromSocket(); System.out.print(<span class="hljs-string"><span class="hljs-string">"\nDone\n"</span></span>); }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeToFileFromSocket</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { FileOutputStream writer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileOutputStream(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(destPath)); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] bytes = sin.readAllBytes(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> b : bytes) { writer.write(b); } writer.close(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e){ System.out.println(e.getMessage()); } }</code> </pre> <br>  getæ–¹æ³•æä¾›ä¸€ä¸ªæœåŠ¡å™¨æ–‡ä»¶ã€‚ å¦‚ç¨‹åºå®¢æˆ·ç«¯éƒ¨åˆ†æ‰€è¿°ï¼Œè¦æˆåŠŸä¼ è¾“æ–‡ä»¶ï¼Œæ‚¨éœ€è¦çŸ¥é“æ–‡ä»¶çš„å¤§å°ï¼ˆå­˜å‚¨åœ¨ä¸€ä¸ªé•¿æ•´æ•°ä¸­ï¼‰ï¼Œå› æ­¤æˆ‘å°†å…¶æ‹†åˆ†ä¸º4ä¸ªå­—èŠ‚çš„æ•°ç»„ï¼Œå°†å…¶ä¼ è¾“åˆ°å¥—æ¥å­—å­—èŠ‚ï¼Œç„¶ååœ¨å®¢æˆ·ç«¯ä¸Šæ¥æ”¶å¹¶æ”¶é›†å®ƒä»¬ä¹‹åå›åˆ°æ•°å­—ï¼Œæˆ‘å°†ä¼ è¾“æ–‡ä»¶ä¸­çš„æ‰€æœ‰å­—èŠ‚ï¼Œå¹¶ä»æ–‡ä»¶çš„è¾“å…¥æµä¸­è¯»å–ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String source, String dest)</span></span></span></span>{ File sending = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(source); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { FileInputStream readFromFile = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileInputStream(sending); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] arr = readFromFile.readAllBytes(); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] bytes = ByteBuffer.allocate(Long.SIZE / Byte.SIZE).putLong(sending.length()).array(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;Long.SIZE / Byte.SIZE; i++) sout.write(bytes[i]); sout.flush(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> b : arr) sout.write(b); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e){ System.out.println(e.getMessage()); } };</code> </pre> <br>  getAndParseInputæ–¹æ³•ä¸å®¢æˆ·ç«¯ä¸­çš„æ–¹æ³•ç›¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯å®ƒä»å¥—æ¥å­—è€Œä¸æ˜¯ä»é”®ç›˜è¯»å–æ•°æ®ã€‚ å­˜å‚¨åº“ä¸­çš„ä»£ç ï¼Œå¦‚é€‰æ‹©å™¨ã€‚ <br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåˆå§‹åŒ–æ˜¯åœ¨å•ç‹¬çš„ä»£ç å—ä¸­è¿›è¡Œçš„ï¼Œå› ä¸º åœ¨æ­¤å®ç°çš„æ¡†æ¶ä¸­ï¼Œåœ¨ä¼ è¾“å®Œæˆä¹‹åï¼Œèµ„æºå°†è¢«é‡Šæ”¾å¹¶å†æ¬¡è¢«é‡æ–°å ç”¨ï¼Œä»¥å†æ¬¡æä¾›é˜²æ­¢å†…å­˜æ³„æ¼çš„ç›®çš„ã€‚ <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">incialization</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { serverSocket = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ServerSocket(port); socket = serverSocket.accept(); sin = socket.getInputStream(); sout = socket.getOutputStream(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { System.out.print(e.getMessage()); } }</code> </pre> <br> æ€»ç»“ï¼š <br><br> æˆ‘ä»¬åªæ˜¯åœ¨ä¸€ä¸ªç®€å•çš„æ•°æ®ä¼ è¾“åè®®ä¸Šå†™äº†æˆ‘ä»¬çš„å˜ä½“ï¼Œå¹¶å¼„æ¸…æ¥šäº†å®ƒåº”è¯¥å¦‚ä½•å·¥ä½œã€‚ åŸåˆ™ä¸Šï¼Œæˆ‘æ²¡æœ‰å‘ç°ç¾å›½ï¼Œä¹Ÿæ²¡æœ‰å†™å¤ªå¤šæ–°ä¹¦ï¼Œä½†æ˜¯-å…³äºHabrÃ©ï¼Œæ²¡æœ‰ç±»ä¼¼çš„æ–‡ç« ï¼Œå¹¶ä¸”ä½œä¸ºæ’°å†™æœ‰å…³cmdå®ç”¨å·¥å…·çš„ä¸€ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ï¼Œä¸å¯èƒ½ä¸æŠšæ‘¸ä»–ã€‚ <br><br> å‚è€ƒæ–‡çŒ®ï¼š <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æºä»£ç åº“</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç®€è¦ä»‹ç»TFTP</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åŒæ ·çš„äº‹æƒ…ï¼Œä½†ä¿„è¯­</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN461083/">https://habr.com/ru/post/zh-CN461083/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN461073/index.html">æˆ‘ä»¬å°†åœ¨çº¿åœ°å›¾è¿æ¥åˆ°æ™ºèƒ½æ‰‹æœºä¸Šçš„å¯¼èˆªå™¨ã€‚ ç¬¬3éƒ¨åˆ†-å¤©æ¡¥æ¶¡è½®å¢å‹</a></li>
<li><a href="../zh-CN461075/index.html">å•†ä¸šæ™ºèƒ½ã€‚ ITå¯¹è±¡ï¼Œç»„ä»¶ï¼Œå·¥å…·</a></li>
<li><a href="../zh-CN461077/index.html">æ¸—é€æµ‹è¯•è€…å¦‚ä½•çƒ¹é¥ªï¼Ÿ æ•°å­—å®‰å…¨å®ä¹ ç”Ÿçš„å…¥å­¦æµ‹è¯•</a></li>
<li><a href="../zh-CN461079/index.html">æ²¡æœ‰äº¤é€šæ‹¥å µçš„åŸå¸‚</a></li>
<li><a href="../zh-CN461081/index.html">æ¸¡æ¸¡é¸Ÿåœæ³Šçš„é‚£ä¸€å¤©ã€‚ å¼‚æ­¥è„šæœ¬</a></li>
<li><a href="../zh-CN461085/index.html">åœ¨Androidåº”ç”¨ä¸­åˆ‡æ¢è¯­è¨€</a></li>
<li><a href="../zh-CN461087/index.html">ä¸ºæˆ‘çš„æ¸¸æˆç”Ÿæˆåœ°ç‰¢å’Œæ´ç©´</a></li>
<li><a href="../zh-CN461091/index.html">LEDå¤©èŠ±ç¯</a></li>
<li><a href="../zh-CN461093/index.html">OpenStreetMapç¬¬469å·ä¸–ç•Œæ–°é—»ï¼ˆ07/09/2019-07/07/2019ï¼‰</a></li>
<li><a href="../zh-CN461095/index.html">ApolloæŒ‡å¯¼è®¡ç®—æœº-ä½“ç³»ç»“æ„å’Œç³»ç»Ÿè½¯ä»¶ã€‚ ç¬¬ä¸€éƒ¨åˆ†</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>