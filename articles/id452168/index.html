<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌒 👇🏻 🖥️ Membuat game ritme di Unity 👨🏻‍🎓 📵 👌🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pendahuluan 
 Jadi, Anda ingin atau mencoba membuat permainan ritme, tetapi elemen-elemen permainan dan musik dengan cepat tidak sinkron, dan sekarang...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membuat game ritme di Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452168/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/98c/c5f/e21/98cc5fe21847a5826eb9fb9e396e3379.jpg" alt="gambar"></div><br><h1>  Pendahuluan </h1><br>  Jadi, Anda ingin atau mencoba membuat permainan ritme, tetapi elemen-elemen permainan dan musik dengan cepat tidak sinkron, dan sekarang Anda tidak tahu apa yang harus dilakukan.  Artikel ini akan membantu Anda dengan ini.  Saya memainkan permainan ritme dari sekolah menengah dan sering nongkrong di DDR di ruang arcade lokal.  Hari ini saya selalu mencari permainan baru dari genre ini, dan proyek-proyek seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Crypt of the Necrodancer</a> atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bit.Trip.Runner</a> menunjukkan bahwa lebih banyak yang dapat dilakukan dalam genre ini.  Saya bekerja sedikit pada prototipe permainan ritme di Unity, dan sebagai hasilnya saya menghabiskan waktu satu bulan untuk membuat permainan ritme pendek / puzzle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Atomic Beats</a> .  Pada artikel ini, saya akan berbicara tentang teknik pembuatan kode paling berguna yang saya pelajari dalam membuat game ini.  Saya tidak dapat menemukan informasi tentang mereka di tempat lain, atau disajikan dengan kurang detail. <br><br>  Pertama, saya harus mengucapkan terima kasih yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mendalam</a> kepada Yu Chao untuk posisi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Music Syncing di Rhythm Games</a> [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">terjemahan ke Habré</a> ].  Yu meninjau dasar-dasar sinkronisasi waktu audio dengan mesin game di Unity dan mengunggah kode sumber untuk game Boots-Cut-nya, yang banyak membantu saya dalam menciptakan proyek saya.  Anda dapat mempelajari posisinya jika Anda ingin mempelajari pengantar singkat tentang sinkronisasi musik Unity, tetapi saya akan membahas topik ini secara lebih rinci dan lebih luas.  Kode saya secara aktif menggunakan informasi dari artikel dan kode Boots-Cut. <br><a name="habracut"></a><br>  Inti dari setiap permainan ritme adalah pengaturan waktu.  Orang-orang sangat sensitif terhadap distorsi dalam pengaturan ritme, jadi sangat penting bahwa semua aksi, gerakan, dan input dalam permainan ritme disinkronkan secara langsung dengan musik.  Sayangnya, metode pelacakan waktu Unity tradisional seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Time.timeSinceLevelLoad</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Time.time</a> dengan cepat kehilangan sinkronisasi dengan suara yang sedang diputar.  Oleh karena itu, kita akan mengakses sistem audio secara langsung menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">AudioSettings.dspTime</a> , yang menggunakan jumlah sebenarnya sampel audio yang diproses oleh sistem audio.  Berkat ini, ia selalu menjaga sinkronisasi dengan musik yang diputar ulang (mungkin ini tidak terjadi dengan file audio yang sangat panjang, ketika efek sampling ikut bermain, tetapi dalam kasus lagu-lagu dengan panjang normal, sistem harus bekerja dengan sempurna).  Fungsi ini akan menjadi inti dari pelacakan waktu komposisi kami, dan berdasarkan itu kami akan membuat kelas utama. <br><br><h1>  Konduktor kelas </h1><br>  Kelas Konduktor adalah kelas manajemen komposisi utama yang akan digunakan untuk membangun sisa permainan ritme.  Dengan itu, kami akan melacak posisi komposisi dan mengelola semua tindakan yang disinkronkan lainnya.  Untuk melacak komposisi kita perlu beberapa variabel <br><br><pre><code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//Song beats per minute //This is determined by the song you're trying to sync up to public float songBpm; //The number of seconds for each song beat public float secPerBeat; //Current song position, in seconds public float songPosition; //Current song position, in beats public float songPositionInBeats; //How many seconds have passed since the song started public float dspSongTime; //an AudioSource attached to this GameObject that will play the music. public AudioSource musicSource;</span></span></code> </pre> <br>  Saat memulai adegan, kita perlu melakukan perhitungan untuk menentukan variabel, dan juga merekam untuk referensi waktu mulai komposisi. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//Load the AudioSource attached to the Conductor GameObject musicSource = GetComponent&lt;AudioSource&gt;(); //Calculate the number of seconds in each beat secPerBeat = 60f / songBpm; //Record the time when the music starts dspSongTime = (float)AudioSettings.dspTime; //Start the music musicSource.Play(); }</span></span></code> </pre> <br>  Jika Anda membuat GameObject kosong dengan skrip seperti itu, dan kemudian menambahkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sumber Audio</a> dengan komposisi dan menjalankan program, Anda akan melihat bahwa skrip akan mencatat waktu mulai komposisi, tetapi tidak ada hal lain yang akan terjadi.  Kita juga perlu memasukkan BPM musik secara manual yang kita tambahkan ke Sumber Audio. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7fc/3ac/550/7fc3ac5504438ff8bd050c50283250c6.png"></div><br>  Berkat semua nilai ini, kami dapat melacak posisi dalam komposisi secara real time saat memperbarui game.  Kami akan menentukan waktu komposisi, pertama dalam detik, kemudian dalam fraksi.  Pecahan adalah cara yang jauh lebih mudah untuk melacak komposisi, karena mereka memungkinkan kita untuk menambahkan tindakan dan waktu tepat waktu bersamaan dengan komposisi, katakanlah, dalam pecahan 1, 3 dan 5,5, tanpa perlu menghitung detik antara pecahan.  Tambahkan perhitungan berikut ke fungsi Pembaruan () dari kelas konduktor: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//determine how many seconds since the song started songPosition = (float)(AudioSettings.dspTime - dspSongTime); //determine how many beats since the song started songPositionInBeats = songPosition / secPerBeat; }</span></span></code> </pre> <br>  Jadi kita mendapatkan perbedaan antara waktu saat ini sesuai dengan sistem audio dan waktu mulai komposisi, yang memberikan total jumlah detik komposisi dimainkan.  Kami akan menyimpannya dalam variabel SongPosition. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/84e/f20/a32/84ef20a3208c566d97332c89549c5a7a.png"></div><br>  Perhatikan bahwa skor dalam musik biasanya dimulai dengan unit dengan fraksi 1-2-3-4 dan seterusnya, dan songPositionInBeats dimulai pada 0 dan meningkat dari nilai ini, sehingga bagian ketiga dari komposisi akan sesuai dengan songPositionInBeats, yaitu 2.0, bukan 3.0. <br><br>  Pada titik ini, jika Anda ingin membuat gim bergaya Dance Dance Revolution tradisional, maka Anda perlu membuat catatan sesuai dengan fraksi yang Anda perlukan untuk menekannya, menginterpolasi posisi mereka relatif terhadap garis klik, dan kemudian merekam songPositionInBeats ketika kunci ditekan, dan Bandingkan nilainya dengan proporsi catatan yang diinginkan.  Yu Chao membahas contoh skema semacam itu dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikelnya</a> .  Agar tidak mengulang sendiri, saya akan mempertimbangkan teknik lain yang berpotensi bermanfaat yang dapat dibangun di atas kelas Konduktor.  Saya menggunakannya saat membuat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Beats Atom</a> . <br><br><h1>  Kami beradaptasi dengan bagian awal </h1><br>  Jika Anda membuat musik sendiri untuk permainan ritme, mudah untuk membuat ketukan pertama persis dengan permulaan musik, yang, jika ditentukan dengan benar, akan secara andil mengikat lagu kelas ConductorPosisiInBeats dengan komposisi. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/56a/acd/dfd/56aacddfd077d0d5890fdea4acb9d667.png"></div><br>  Namun, jika Anda menggunakan musik yang sudah jadi, maka ada kemungkinan besar bahwa ada sedikit jeda sebelum awal komposisi.  Jika ini tidak diperhitungkan, maka lagu kelas ConductorPosisiInBeats akan berpikir bahwa ketukan pertama dimulai ketika lagu mulai diputar, dan bukan ketukan sekarang.  Segala sesuatu yang akan lebih terikat dengan nilai-nilai saham tidak disinkronkan dengan musik. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/981/9cc/e24/9819cce244fe54f954e0205345ec86fb.png"></div><br>  Untuk memperbaikinya, Anda dapat menambahkan variabel yang mempertimbangkan offset ini ke akun.  Tambahkan berikut ini ke kelas Konduktor: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//The offset to the first beat of the song in seconds public float firstBeatOffset;</span></span></code> </pre> <br>  Dalam Pembaruan (), variabel SongPosition: <br><br><pre> <code class="cs hljs">songPosition = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(AudioSettings.dspTime - dspSongTime);</code> </pre> <br>  diganti oleh: <br><br><pre> <code class="cs hljs">songPosition = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(AudioSettings.dspTime - dspSongTime - firstBeatOffset);</code> </pre> <br>  Sekarang songPosition akan menghitung posisi dalam lagu dengan benar, dengan mempertimbangkan beat pertama yang sebenarnya.  Namun, Anda harus memasukkan offset secara manual ke beat pertama, jadi untuk setiap file itu akan unik.  Selain itu, selama perubahan ini akan ada jendela pendek di mana songPosition akan berubah menjadi negatif.  Ini mungkin tidak memengaruhi gim, tetapi beberapa kode, tergantung pada nilai songPosition atau songPositionInBeats, mungkin tidak dapat memproses angka negatif saat ini. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/125/bfd/ab7/125bfdab794789a5920f1ef07bea8a26.png"><br><br><h1>  Pengulangan </h1><br>  Jika Anda bekerja dengan komposisi yang diputar dari awal hingga akhir, maka kelas Konduktor yang ditunjukkan di atas akan cukup untuk melacak posisi.  Tetapi jika Anda memiliki trek pendek yang dilingkarkan dan Anda ingin bekerja dengan loop ini, Anda perlu membangun dukungan Repeater di Konduktor. <br><br>  Jika Anda memiliki fragmen loop sempurna (misalnya, jika tempo lagu 120bpm, dan fragmen loop memiliki panjang 4 ketukan, maka itu harus tepat 8,0 detik pada 2,0 detik per saham) dimuat ke kelas Audio Source dari kelas Conductor, lalu centang kotak loop.  Konduktor akan bekerja dengan cara yang sama seperti sebelumnya, dan mentransfer total waktu ke SongPosition setelah awal <em>pertama</em> klip.  Untuk menentukan posisi loop, kita perlu memberi tahu konduktor berapa banyak share dalam satu loop dan berapa banyak loop yang sudah dimainkan.  Tambahkan variabel berikut ke kelas Konduktor: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//the number of beats in each loop public float beatsPerLoop; //the total number of loops completed since the looping clip first started public int completedLoops = 0; //The current position of the song within the loop in beats. public float loopPositionInBeats;</span></span></code> </pre> <br>  Sekarang dengan setiap pembaruan ke SongPositionInBeats, kami juga dapat memperbarui posisi Pembaruan () dari loop. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//calculate the loop position if (songPositionInBeats &gt;= (completedLoops + 1) * beatsPerLoop) completedLoops++; loopPositionInBeats = songPositionInBeats - completedLoops * beatsPerLoop;</span></span></code> </pre> <br>  Ini memberi kami penanda yang memberi tahu loopPositionInBeats berapa banyak saham yang kami lewati, yang berguna untuk banyak item yang disinkronkan lainnya.  Ingatlah untuk memasukkan jumlah saham loop di GameObject Conductor. <br><br>  Kami juga harus hati-hati mempertimbangkan perhitungan saham.  Musik selalu dimulai pada 1, sehingga pengukuran 4-bagian mengambil bentuk 1-2-3-4-, dan di loop kelas kamiPosisiInBeats dimulai pada 0,0 dan loop lebih dari 4,0.  Oleh karena itu, tepat tengah loop, yang ketika menghitung proporsi musik akan menjadi 3, di loopPositionInBeats akan memiliki nilai 2,0.  Anda dapat memodifikasi loopPositionInBeats untuk memperhitungkan ini, tetapi ini akan memengaruhi semua perhitungan lainnya, jadi berhati-hatilah saat memasukkan catatan. <br><br>  Juga untuk alat yang tersisa, akan berguna untuk menambahkan dua aspek lagi ke kelas Konduktor.  Pertama, versi analog dari LoopPositionInBeats disebut LoopPositionInAnalog, yang mengukur posisi dalam loop dalam rentang dari 0 hingga 1.0.  Yang kedua adalah turunan dari kelas Konduktor untuk panggilan yang nyaman dari kelas lain.  Tambahkan variabel berikut ke kelas Konduktor: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//The current relative position of the song within the loop measured between 0 and 1. public float loopPositionInAnalog; //Conductor instance public static Conductor instance;</span></span></code> </pre> <br>  Dalam fungsi Awake (), tambahkan: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { instance = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }</code> </pre> <br>  dan tambahkan ke fungsi Pembaruan (): <br><br><pre> <code class="cs hljs">loopPositionInAnalog = loopPositionInBeats / beatsPerLoop;</code> </pre> <br><h1>  Putar Sinkronisasi </h1><br>  Akan sangat berguna untuk menyinkronkan gerakan atau rotasi dengan lobus sehingga elemen-elemen berada di tempat yang tepat.  Dalam permainan Atomic Beats saya, saya menggunakan ini untuk secara dinamis memutar catatan di sekitar poros tengah.  Awalnya, mereka ditempatkan di sekitar lingkar sesuai dengan bagian mereka di dalam lingkaran, dan kemudian seluruh area bermain diputar sehingga catatan disesuaikan dengan garis depresi di bagian mereka. <br><br>  Untuk mencapai ini, buat skrip baru bernama SyncedRotation, dan lampirkan ke GameObject yang ingin Anda putar.  Tambahkan ke fungsi Pembaruan () dari skrip SyncedRotation: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gameObject.transform.rotation = Quaternion.Euler(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, Mathf.Lerp(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">360</span></span>, Conductor.instance.loopPositionInAnalog)); }</code> </pre> <br>  Kode ini akan menginterpolasi rotasi GameObject yang mengikat game ini dalam interval dari 0 hingga 360 derajat, memutarnya sehingga menyelesaikan satu revolusi penuh pada akhir setiap loop.  Ini berguna sebagai contoh, tetapi untuk animasi looping atau frame-by-frame, akan lebih berguna untuk menyinkronkan animasi loop sehingga cocok dengan tempo. <br><br><h1>  Sinkronisasi Animasi </h1><br>  Unity <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Animator</a> sangat kuat, tetapi tidak selalu akurat.  Untuk penyelarasan animasi dan musik yang andal, saya harus bersaing dengan kelas Animator dan kecenderungannya untuk secara bertahap menyinkronkan dengan langkahnya.  Selain itu, sulit untuk menyesuaikan animasi yang sama dengan tempo yang berbeda, sehingga ketika beralih di antara komposisi, Anda tidak perlu mendefinisikan ulang bingkai kunci animasi ke tempo saat ini.  Sebagai gantinya, kita dapat langsung menuju loop animasi, dan mengatur posisi dalam loop ini sesuai dengan posisi kita dalam loop dari kelas Konduktor. <br><br>  Pertama, buat kelas baru bernama SyncedAnimation, dan tambahkan variabel berikut ke dalamnya: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//The animator controller attached to this GameObject public Animator animator; //Records the animation state or animation that the Animator is currently in public AnimatorStateInfo animatorStateInfo; //Used to address the current state within the Animator using the Play() function public int currentState;</span></span></code> </pre> <br>  Lampirkan ke GameObject baru atau yang sudah ada yang ingin Anda menghidupkan.  Dalam contoh ini, kita hanya akan memindahkan objek bolak-balik melintasi layar, tetapi prinsip yang sama dapat diterapkan pada animasi apa pun, baik itu sebelum mengatur properti, atau animasi frame-by-frame.  Tambahkan elemen Animator ke GameObject dan buat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengendali Animator</a> baru bernama SyncedAnimController, serta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Klip Animasi yang</a> disebut BackAndForth.  Kami memuat pengontrol ke dalam kelas Animator yang melekat pada GameObject, dan menambahkan Animasi ke pohon animasi sebagai animasi default. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5f/582/0e3/d5f5820e383580dbc69b18dd037a67a1.png"></div><br>  Sebagai contoh, saya mengatur animasi sehingga pertama-tama memindahkan objek ke kanan sebanyak 6 unit, lalu ke kiri sebesar -6, dan kemudian kembali ke 0. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dbc/d3a/0b9/dbcd3a0b909bb95cc0a91aaf2eaf65e0.png"></div><br>  Sekarang, untuk menyinkronkan animasi, tambahkan kode berikut ke fungsi Mulai () dari kelas SyncedAnimation, yang menginisialisasi informasi tentang Animator: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//Load the animator attached to this object animator = GetComponent&lt;Animator&gt;(); //Get the info about the current animator state animatorStateInfo = animator.GetCurrentAnimatorStateInfo(0); //Convert the current state name to an integer hash for identification currentState = animatorStateInfo.fullPathHash; }</span></span></code> </pre> <br>  Kemudian tambahkan kode berikut ke Pembaruan () untuk mengatur animasi: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//Start playing the current animation from wherever the current conductor loop is animator.Play(currentState, -1, (Conductor.instance.loopPositionInAnalog)); //Set the speed to 0 so it will only change frames when you next update it animator.speed = 0; }</span></span></code> </pre> <br>  Jadi kami memposisikan animasi dalam bingkai yang tepat dari animasi relatif terhadap satu loop penuh.  Misalnya, jika Anda menggunakan animasi di atas, ketika Anda berada di tengah-tengah loop, posisi GameObject hanya akan menyeberang 0. Ini dapat diterapkan untuk setiap animasi yang Anda buat yang ingin Anda sinkronkan dengan tempo Konduktor. <br><br>  Perlu juga dicatat bahwa untuk membuat loop animasi yang mulus, Anda perlu mengonfigurasi garis singgung dari masing-masing <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kerangka kunci animasi</a> pada kurva animasi.  Pengaturan Linear akan membuat garis lurus dari satu frame kunci ke yang berikutnya, dan Constant akan menjaga animasi dalam satu nilai sampai frame kunci berikutnya, yang akan memberikan gerakan tersentak-sentak dan tajam. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f4c/68e/db4/f4c68edb4ab3e874379d8f6874b74fea.png"></div><br>  Meskipun metode ini berguna, ini mempengaruhi semua transisi animasi, karena menyebabkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">animasiState</a> tetap dalam keadaan di mana itu ketika skrip awalnya dijalankan.  Metode ini berguna untuk objek yang hanya perlu menggunakan satu animasi yang disinkronkan, tetapi untuk membuat objek yang lebih kompleks dengan animasi tersinkronisasi yang berbeda, Anda perlu menambahkan kode yang memproses transisi ini dan mengatur variabel CurrentState sesuai dengan keadaan animasi yang diinginkan. <br><br><h1>  Kesimpulan </h1><br>  Ini hanya beberapa aspek yang telah membantu saya dalam menciptakan Beats Atom.  Beberapa dari mereka dikumpulkan dari sumber lain atau dibuat karena kebutuhan, tetapi kebanyakan dari mereka tidak dapat saya temukan dalam bentuk yang sudah jadi, jadi saya harap ini berguna!  Mungkin bagian dari sistem saya tidak lagi berguna dalam proyek-proyek besar karena keterbatasan CPU atau sistem audio, tetapi itu akan menjadi dasar yang baik untuk memainkan permainan macet atau proyek hobi. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ae/2a4/f7b/9ae2a4f7be098cc23e5b7283d5b1b9ba.png" alt="gambar"></div><br>  Membuat gim ritme, atau elemen gim yang disinkronkan dengan musik, bisa jadi sulit.  Untuk menjaga semuanya pada kecepatan yang konsisten, Anda mungkin memerlukan kode yang rumit, hasil yang memungkinkan Anda bermain dengan kecepatan konstan bisa sangat menarik bagi pemain.  Jauh lebih banyak yang dapat dilakukan dalam genre ini daripada permainan dalam gaya Dance Dance Revolution tradisional, dan saya harap artikel ini membantu Anda mewujudkan proyek-proyek tersebut.  Saya juga merekomendasikan, jika mungkin, mengevaluasi permainan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Atomic Beats</a> saya.  Saya membuatnya dalam satu bulan di musim semi tahun ini, ia memiliki 8 trek pendek dan gratis! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id452168/">https://habr.com/ru/post/id452168/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id452152/index.html">Solusi apa yang dimiliki Rostelecom untuk IIoT</a></li>
<li><a href="../id452154/index.html">Virtual Cube - Alih-alih OLAP</a></li>
<li><a href="../id452158/index.html">TOPchik - plugin WordPress terbuka untuk verifikasi posisi situs gratis untuk permintaan pencarian, melalui API Yandex.XML</a></li>
<li><a href="../id452162/index.html">Bot untuk VK di Python dengan MySQL dalam satu jam, bagian 1</a></li>
<li><a href="../id452164/index.html">ModLook - pemindai register ModBus. Merayakan ulang tahun ke 20 dari program ini</a></li>
<li><a href="../id452172/index.html">Sistem yang kompleks. Mencapai level kritis</a></li>
<li><a href="../id452174/index.html">Dia tidak membutuhkanmu</a></li>
<li><a href="../id452178/index.html">Parsing: 23 kesalahan populer dalam bahasa Inggris tertulis dan cara menghindarinya</a></li>
<li><a href="../id452180/index.html">Kami meningkatkan kinerja SSD dari lutut, di mana untuk mengklik dan mengapa</a></li>
<li><a href="../id452182/index.html">Survei karyawan. Kesalahan utama</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>