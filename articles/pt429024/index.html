<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∂üèø üï¢ üíª Crie GIFs com o OpenCV ‚úçüèæ üïã üòª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este tutorial mostra como criar GIFs animados usando OpenCV, Python e ImageMagick. Em seguida, combine esses m√©todos para criar um gerador de memes co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Crie GIFs com o OpenCV</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429024/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/g1/sx/hd/g1sxhdlqfra2bohbg5d7yjliv6g.gif"></div><br><br>  Este tutorial mostra como criar GIFs animados usando OpenCV, Python e ImageMagick.  Em seguida, combine esses m√©todos para criar um gerador de memes com o OpenCV! <br><br>  Todos n√≥s precisamos rir de vez em quando.  E talvez a melhor maneira de encontrar lulza seja com memes.  Alguns dos meus favoritos: <br><br><ul><li>  Caco, o sapo: ‚ÄúMas n√£o √© da minha conta‚Äù </li><li>  Gato mal-humorado </li><li>  Falha √©pica </li><li>  Good guy greg </li></ul><br>  <b>Mas, para mim, pessoalmente, nenhum desses memes pode ser comparado ao meme "Lidar com ele" ("Lide com ele" ou "Entenda voc√™ mesmo"), um exemplo disso √© dado no in√≠cio do artigo.</b> <br><a name="habracut"></a><br>  Geralmente √© usado nos seguintes casos: <br><br><ol><li>  Como resposta ou obje√ß√£o a algu√©m que n√£o aprova algo que voc√™ fez / disse ("Lide com isso") </li><li>  Colocar os √≥culos como se estivesse saindo e deixando a pessoa sozinha com o problema (‚ÄúEntenda voc√™ mesmo‚Äù) </li></ol><br>  H√° alguns anos, li um artigo divertido no blog do autor, que n√£o me lembrava de como gerar esses memes usando a vis√£o computacional.  Na semana passada, n√£o consegui encontrar este guia em nenhum lugar; portanto, como blogueiro, especialista em vis√£o computacional e especialista em memes, decidi escrever um tutorial!  (A prop√≥sito, se voc√™ acidentalmente conhece a fonte original, informe-me para que eu possa agradecer ao autor. <b>UPD:</b> Acabei de encontrar o artigo original do blog de Kirk Kaiser, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MakeArtWithPython</a> ). <br><br>  O desenvolvimento de um gerador de memes no OpenCV nos ensinar√° v√°rias valiosas habilidades pr√°ticas, incluindo: <br><br><ol><li>  Detec√ß√£o de Rosto Usando T√©cnicas de Aprendizado Profundo </li><li>  Usando a biblioteca dlib para detectar marcos faciais e extrair √°reas dos olhos </li><li>  Como calcular o √¢ngulo de rota√ß√£o entre os olhos com base nas informa√ß√µes recebidas </li><li>  E, finalmente, como gerar GIFs animados usando o OpenCV (com uma pequena ajuda do ImageMagick) </li></ol><br>  Este guia deve ser divertido e divertido - e ao mesmo tempo ensinar habilidades valiosas de programa√ß√£o de vis√£o por computador que s√£o √∫teis no mundo real. <br><br><h1>  Criando GIFs com o OpenCV </h1><br>  Na primeira parte do guia, discutiremos as condi√ß√µes e depend√™ncias necess√°rias para este projeto, incluindo a configura√ß√£o adequada do ambiente de desenvolvimento. <br><br>  Em seguida, considere a estrutura do projeto / cat√°logo do nosso gerador de GIF OpenCV. <br><br>  Assim que entendermos a estrutura do projeto, consideraremos: 1) nosso arquivo de configura√ß√£o;  2) o script Python respons√°vel pela cria√ß√£o de GIFs com o OpenCV. <br><br>  Por fim, avaliaremos os resultados do programa no meme popular ‚ÄúDeal With It‚Äù. <br><br><h4>  Pr√©-requisitos e Depend√™ncias </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/ad6/c3e/193/ad6c3e193373bc04c877e60070d73071.png"><br>  <b>Fig.</b>  <b>1. Usaremos OpenCV, dlib e ImageMagick para criar GIFs</b> <br><br><h3>  Opencv e dlib </h3><br>  O OpenCV √© necess√°rio para determinar as faces no quadro e o processamento b√°sico da imagem.  Siga um dos meus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">guias de instala√ß√£o do OpenCV se o OpenCV</a> n√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estiver</a> instalado no sistema. <br><br>  Usamos o Dlib para detectar pontos de refer√™ncia faciais, o que nos permite encontrar dois olhos no rosto e colocar √≥culos de sol.  Voc√™ pode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">instalar o dlib usando esta instru√ß√£o</a> . <br><br><h4>  Imagemagick </h4><br>  Se voc√™ n√£o estiver familiarizado com o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ImageMagick</a> , em v√£o.  √â uma ferramenta de linha de comando de plataforma cruzada com muitos recursos de processamento de imagem. <br><br>  Deseja converter PNG / JPG para PDF com um comando?  N√£o tem problema <br><br>  Existem v√°rias imagens das quais voc√™ precisa criar um PDF de v√°rias p√°ginas?  Facilmente. <br><br>  Precisa desenhar pol√≠gonos, linhas e outras formas?  E √© poss√≠vel. <br><br>  Que tal classificar cores em lotes ou redimensionar todas as imagens com um comando?  Para fazer isso, voc√™ n√£o precisa escrever algumas linhas no Python para OpenCV. <br><br>  O ImageMagick tamb√©m gera GIFs a partir de qualquer imagem. <br><br>  Para instalar o ImageMagick no Ubuntu (ou Raspbian), basta usar o apt: <br><br>  Criando GIFs com o OpenCVShell <br><br><pre><code class="bash hljs">$ sudo apt-get install imagemagick</code> </pre> <br>  No macOS, voc√™ pode usar o HomeBrew: <br><br><pre> <code class="bash hljs">$ brew install imagemagick</code> </pre> <br><h4>  imutils </h4><br>  Na maioria dos artigos, cursos e livros, uso meu conveniente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pacote de</a> processamento de imagens <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">imutils</a> .  Ele √© instalado em um sistema ou ambiente virtual usando pip: <br><br><pre> <code class="bash hljs">$ pip install imutils</code> </pre> <br><h2>  Estrutura do projeto </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/e42/281/af0/e42281af07fb94c9ae60a526098f662d.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">2. A estrutura do projeto inclui dois diret√≥rios, um arquivo de configura√ß√£o e um script Python</font></i> <br><br>  Existem dois cat√°logos em nosso projeto: <br><br><ul><li>  <code>images/</code> : exemplos de imagens de entrada para as quais queremos criar um GIF animado.  Encontrei algumas imagens comigo, mas fique √† vontade para adicionar as suas. </li><li>  <code>assets/</code> : esta pasta cont√©m nosso detector de rosto, detector de marco de rosto e todas as imagens + m√°scaras relacionadas.  Com esses recursos, colocaremos pontos e texto nas imagens originais da primeira pasta. </li></ul><br>  Devido ao grande n√∫mero de par√¢metros configur√°veis, decidi criar um arquivo de configura√ß√£o JSON, que: 1) facilitar√° a edi√ß√£o dos par√¢metros;  2) exigir√° menos argumentos de linha de comando.  Todos os par√¢metros de configura√ß√£o necess√°rios para este projeto est√£o contidos em <code>config.json</code> . <br><br>  Considere o conte√∫do de <code>config.json</code> e <code>create_gif.py</code> . <br><br><a name="1"></a>  <font color="gray">Nota</font>  <font color="gray">Por.: O c√≥digo do projeto e o manual de 17 p√°ginas sobre vis√£o computacional, aprendizado de m√°quina e OpenCV s√£o emitidos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ap√≥s o registro</a> (espelho: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">c√≥digo fonte</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">manual</a> ).</font> <br><br><h2>  Gera√ß√£o GIF com OpenCV </h2><br>  Ent√£o, vamos continuar e come√ßar a criar nosso gerador de GIF OpenCV! <br><br><h4>  Conte√∫do do arquivo de configura√ß√£o JSON </h4><br>  Vamos come√ßar com o arquivo de configura√ß√£o JSON e depois passar para o script Python. <br><br>  Abra um novo arquivo <code>config.json</code> e insira os seguintes pares de chave / valor: <br><br>  Criando GIFs com o OpenCVPython <br><br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"face_detector_prototxt"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/deploy.prototxt"</span></span>, <span class="hljs-string"><span class="hljs-string">"face_detector_weights"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/res10_300x300_ssd_iter_140000.caffemodel"</span></span>, <span class="hljs-string"><span class="hljs-string">"landmark_predictor"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/shape_predictor_68_face_landmarks.dat"</span></span>,</code> </pre> <br>  Esses s√£o os arquivos de modelo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">detector de rosto OpenCV no aprendizado profundo</a> . <br><br>  A √∫ltima linha √© o caminho para o preditor de face dlib. <br><br>  E agora temos alguns caminhos para os arquivos de imagem: <br><br><pre> <code class="python hljs"><span class="hljs-string"><span class="hljs-string">"sunglasses"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/sunglasses.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"sunglasses_mask"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/sunglasses_mask.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"deal_with_it"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/deal_with_it.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"deal_with_it_mask"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/deal_with_it_mask.png"</span></span>,</code> </pre> <br>  Esses s√£o os caminhos para nossos √≥culos de sol, texto e m√°scaras correspondentes, mostrados abaixo. <br><br>  Em primeiro lugar, √≥culos escuros e uma m√°scara: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c18/c4c/647/c18c4c6471e203aedea66a80c9080192.png"></div><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">3. Voc√™ n√£o gosta de √≥culos com pixels?</font></i>  <i><font color="gray">Apenas aguente</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/58b/91a/d9c/58b91ad9c2e66238b3f3ac22fe1ee439.png"></div><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">4. Voc√™ n√£o entende por que precisa de uma m√°scara para √≥culos de sol?</font></i>  <i><font color="gray">Apenas aceite isso - ou leia o restante do artigo para obter a resposta.</font></i> <br><br>  E agora nosso texto √© "LIDAR COM ELE" e a m√°scara: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ec3/4e4/923/ec34e4923e2d05a5b33c065de8f5af66.png"></div><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">5. Voc√™ odeia Helvetica Neue Condensed?</font></i>  <i><font color="gray">Lide com isso</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6c/f70/819/c6cf708198bda68d849029b3ded02265.png"></div><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">6: Esta m√°scara permite desenhar uma borda ao redor do texto.</font></i>  <i><font color="gray">Ah, talvez voc√™ n√£o queira, quer uma fronteira?</font></i>  <i><font color="gray">Bem, aguente isso</font></i> <br><br>  S√£o necess√°rias m√°scaras para sobrepor a imagem correspondente na foto: trataremos disso mais tarde. <br><br>  Agora defina alguns par√¢metros para o gerador de memes: <br><br><pre> <code class="python hljs"> <span class="hljs-string"><span class="hljs-string">"min_confidence"</span></span>: <span class="hljs-number"><span class="hljs-number">0.5</span></span>, <span class="hljs-string"><span class="hljs-string">"steps"</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-string"><span class="hljs-string">"delay"</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">"final_delay"</span></span>: <span class="hljs-number"><span class="hljs-number">250</span></span>, <span class="hljs-string"><span class="hljs-string">"loop"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"temp_dir"</span></span>: <span class="hljs-string"><span class="hljs-string">"temp"</span></span> }</code> </pre> <br>  Aqui est√£o as defini√ß√µes para cada um dos par√¢metros: <br><br><ul><li>  <code>min_confidence</code> : probabilidade m√≠nima de detec√ß√£o de faces necess√°ria. </li><li>  <code>steps</code> : n√∫mero de quadros na anima√ß√£o final.  Cada "passo" move os √≥culos de sol da borda superior para o alvo (ou seja, para os olhos). </li><li>  <code>delay</code> : atraso entre quadros em cent√©simos de segundo. </li><li>  <code>final_delay</code> : atraso do √∫ltimo quadro em cent√©simos de segundo (√∫til neste contexto, pois queremos que o texto seja exibido por mais tempo que o restante dos quadros). </li><li>  <code>loop</code> : um valor zero indica que o GIF se repete para sempre; caso contr√°rio, especifique um n√∫mero inteiro positivo para o n√∫mero de repeti√ß√µes da anima√ß√£o. </li><li>  <code>temp_dir</code> : o diret√≥rio tempor√°rio no qual cada um dos quadros ser√° armazenado antes de criar o GIF final. </li></ul><br><h4>  Memes, GIFs e OpenCV </h4><br>  Criamos o arquivo de configura√ß√£o JSON, agora vamos para o c√≥digo real. <br><br>  Abra um novo arquivo, nomeie como <code>create_gif.py</code> e cole o seguinte c√≥digo: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    from imutils import face_utils from imutils import paths import numpy as np import argparse import imutils import shutil import json import dlib import cv2 import sys import os</span></span></code> </pre> <br>  Aqui importamos os pacotes necess√°rios.  Em particular, usaremos imutils, dlib e OpenCV.  Para instalar essas depend√™ncias, consulte a se√ß√£o Pr√©-requisitos e Depend√™ncias acima. <br><br>  Agora o script possui os pacotes necess√°rios, ent√£o <code>overlay_image</code> definir a fun√ß√£o <code>overlay_image</code> : <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">overlay_image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(bg, fg, fgMask, coords)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#     (, )  #    (sH, sW) = fg.shape[:2] (x, y) = coords #          #  ,   , **  # ,    overlay = np.zeros(bg.shape, dtype="uint8") overlay[y:y + sH, x:x + sW] = fg # - , **  ** # ,    ,    # ,       alpha = np.zeros(bg.shape[:2], dtype="uint8") alpha[y:y + sH, x:x + sW] = fgMask alpha = np.dstack([alpha] * 3) #  -   , #   - output = alpha_blend(overlay, bg, alpha) #   return output</span></span></code> </pre> <br>  A fun√ß√£o <code>overlay_image</code> imp√µe um primeiro plano ( <code>fg</code> ) na parte superior da imagem de plano de fundo ( <code>bg</code> ) nas coordenadas das <code>coords</code> <i>(</i> coordenadas <i>(x, y)</i> ), <code>fgMask</code> transpar√™ncia alfa sobre a m√°scara de primeiro plano <code>fgMask</code> . <br><br>  Para se familiarizar com os conceitos b√°sicos do OpenCV, como trabalhar com m√°scaras, leia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">este guia</a> . <br><br>  Para concluir o processo de mistura, execute a mistura alfa: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">alpha_blend</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fg, bg, alpha)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#  ,    - #        [0, 1] fg = fg.astype("float") bg = bg.astype("float") alpha = alpha.astype("float") / 255 #  - fg = cv2.multiply(alpha, fg) bg = cv2.multiply(1 - alpha, bg) #     ,    output = cv2.add(fg, bg) #   return output.astype("uint8")</span></span></code> </pre> <br>  Essa implementa√ß√£o de mistura alfa tamb√©m est√° dispon√≠vel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no blog LearnOpenCV</a> . <br><br>  Em ess√™ncia, converteremos o primeiro plano, o plano de fundo e o canal alfa em n√∫meros de ponto flutuante no intervalo <i>[0, 1]</i> .  Em seguida, executamos a mistura alfa, adicionamos o primeiro plano e o plano de fundo para obter o resultado que retornamos √† fun√ß√£o de chamada. <br><br>  Tamb√©m criaremos uma fun√ß√£o auxiliar que permite gerar GIFs a partir de um conjunto de caminhos de imagem usando o ImageMagick e o comando <code>convert</code> : <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_gif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(inputPath, outputPath, delay, finalDelay, loop)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#        imagePaths = sorted(list(paths.list_images(inputPath))) #      lastPath = imagePaths[-1] imagePaths = imagePaths[:-1] #   imagemagick 'convert'  #  GIF      #   ( ) cmd = "convert -delay {} {} -delay {} {} -loop {} {}".format( delay, " ".join(imagePaths), finalDelay, lastPath, loop, outputPath) os.system(cmd)</span></span></code> </pre> <br>  A fun√ß√£o <code>create_gif</code> pega um conjunto de imagens e as coleta em anima√ß√µes GIF com um atraso especificado entre quadros e loops.  O ImageMagick processa tudo isso - simplesmente envolvemos o comando <code>convert</code> em uma fun√ß√£o que processa dinamicamente v√°rios par√¢metros. <br><br>  Para ver os argumentos de <code>convert</code> dispon√≠veis, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">consulte a documenta√ß√£o</a> .  L√° voc√™ ver√° quantas fun√ß√µes essa equipe possui! <br><br>  Especificamente nesta fun√ß√£o, n√≥s: <br><br><ul><li>  Tome <code>imagePaths</code> . </li><li>  Escolha o caminho da √∫ltima imagem, que ter√° um atraso separado. </li><li>  Reatribua <code>imagePaths</code> para excluir o √∫ltimo caminho. </li><li>  Montamos um comando com argumentos de linha de comando e instru√≠mos o sistema operacional a <code>convert</code> para criar anima√ß√µes GIF. </li></ul><br>  Atribua ao script seus pr√≥prios argumentos de linha de comando: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#      ap = argparse.ArgumentParser() ap.add_argument("-c", "--config", required=True, help="path to configuration file") ap.add_argument("-i", "--image", required=True, help="path to input image") ap.add_argument("-o", "--output", required=True, help="path to output GIF") args = vars(ap.parse_args())</span></span></code> </pre> <br>  Temos tr√™s argumentos de linha de comando que s√£o processados ‚Äã‚Äãem tempo de execu√ß√£o: <br><br><ul><li>  <code>--config</code> : caminho para o arquivo de configura√ß√£o JSON.  Revimos o arquivo de configura√ß√£o na se√ß√£o anterior. </li><li>  <code>--image</code> : caminho para a imagem de entrada na qual a anima√ß√£o √© criada (ou seja, detectar um rosto, adicionar √≥culos de sol e depois texto). </li><li>  <code>--output</code> : caminho para o GIF resultante. </li></ul><br>  Cada um desses argumentos √© necess√°rio ao executar o script na linha de comando / terminal. <br><br>  Baixe o arquivo de configura√ß√£o, os √≥culos e a m√°scara correspondente: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    JSON, #     config = json.loads(open(args["config"]).read()) sg = cv2.imread(config["sunglasses"]) sgMask = cv2.imread(config["sunglasses_mask"]) #    (  ),   #  ,  ,     #   GIF- shutil.rmtree(config["temp_dir"], ignore_errors=True) os.makedirs(config["temp_dir"])</span></span></code> </pre> <br>  Aqui, carregamos o arquivo de configura√ß√£o (que pode estar dispon√≠vel no futuro como um dicion√°rio Python).  Em seguida, coloque os √≥culos escuros e a m√°scara. <br><br>  Se algo restar do script anterior, exclua o diret√≥rio tempor√°rio e recrie o diret√≥rio tempor√°rio vazio.  A pasta tempor√°ria conter√° cada quadro individual da anima√ß√£o GIF. <br><br>  Agora carregue o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">detector de rosto de aprendizado profundo OpenCV</a> na mem√≥ria: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># load our OpenCV face detector and dlib facial landmark predictor print("[INFO] loading models...") detector = cv2.dnn.readNetFromCaffe(config["face_detector_prototxt"], config["face_detector_weights"]) predictor = dlib.shape_predictor(config["landmark_predictor"])</span></span></code> </pre> <br>  Para fazer isso, chame <code>cv2.dnn.readNetFromCaffe</code> .  O m√≥dulo <code>dnn</code> est√° dispon√≠vel apenas no OpenCV 3.3 ou posterior.  Um detector de rosto detectar√° a presen√ßa de rostos na imagem: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a91/d3a/0cd/a91d3a0cde3dcb3cac9799c823e47c8c.jpg"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">7. Opera√ß√£o do Detector de Rosto Usando o OpenCV DNN</font></i> <br><br>  Em seguida, carregue o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">preditor de ponto de refer√™ncia dlib face</a> .  Permite localizar estruturas individuais: olhos, sobrancelhas, nariz, boca e linha do queixo: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/056/816/890/0568168909b7f01d2f70f6e58faa9ed9.jpg"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">8. Os pontos de refer√™ncia descobertos por dlib est√£o sobrepostos no meu rosto</font></i> <br><br>  Mais adiante neste script, extra√≠mos apenas a √°rea dos olhos. <br><br>  Seguindo em frente, vamos encontrar o rosto: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#       image = cv2.imread(args["image"]) (H, W) = image.shape[:2] blob = cv2.dnn.blobFromImage(cv2.resize(image, (300, 300)), 1.0, (300, 300), (104.0, 177.0, 123.0)) #        print("[INFO] computing object detections...") detector.setInput(blob) detections = detector.forward() #       ,  #  ,      i = np.argmax(detections[0, 0, :, 2]) confidence = detections[0, 0, i, 2] #    if confidence &lt; config["min_confidence"]: print("[INFO] no reliable faces found") sys.exit(0)</span></span></code> </pre> <br>  Neste bloco, fazemos o seguinte: <br><br><ul><li>  Fa√ßa o download da <code>image</code> original. </li><li>  Constru√≠mos um <code>blob</code> para enviar ao detector de faces de uma rede neural.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Este artigo</a> descreve como o <code>blobFromImage</code> do OpenCV funciona. </li><li>  Execute o procedimento de detec√ß√£o de rosto. </li><li>  Encontramos a pessoa com o maior valor de probabilidade e o comparamos com o limite m√≠nimo de probabilidade aceit√°vel.  Se os crit√©rios n√£o forem atendidos, basta sair do script.  Caso contr√°rio, continue. </li></ul><br>  Agora vamos extrair o rosto e calcular os pontos de refer√™ncia: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   (x, y)  #    box = detections[0, 0, i, 3:7] * np.array([W, H, W, H]) (startX, startY, endX, endY) = box.astype("int") #    dlib    #       rect = dlib.rectangle(int(startX), int(startY), int(endX), int(endY)) shape = predictor(image, rect) shape = face_utils.shape_to_np(shape) #        ,  #     (lStart, lEnd) = face_utils.FACIAL_LANDMARKS_IDXS["left_eye"] (rStart, rEnd) = face_utils.FACIAL_LANDMARKS_IDXS["right_eye"] leftEyePts = shape[lStart:lEnd] rightEyePts = shape[rStart:rEnd]</span></span></code> </pre> <br>  Para extrair o rosto e encontrar pontos de refer√™ncia faciais, fazemos o seguinte: <br><br><ul><li>  Extra√≠mos as coordenadas da caixa delimitadora ao redor da face. </li><li>  Crie um objeto <code>rectangle</code> no dlib e aplique a localiza√ß√£o da face. </li><li>  Recuperamos as coordenadas <i>(x, y)</i> de <code>leftEyePts</code> e <code>rightEyePts</code> , respectivamente. </li></ul><br>  Dadas as coordenadas dos olhos, voc√™ pode calcular onde e como colocar os √≥culos de sol: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#       leftEyeCenter = leftEyePts.mean(axis=0).astype("int") rightEyeCenter = rightEyePts.mean(axis=0).astype("int") #      dY = rightEyeCenter[1] - leftEyeCenter[1] dX = rightEyeCenter[0] - leftEyeCenter[0] angle = np.degrees(np.arctan2(dY, dX)) - 180 #      ,  #      sg = imutils.rotate_bound(sg, angle) #     **  ,    #   ‚Äî       # 90%       sgW = int((endX - startX) * 0.9) sg = imutils.resize(sg, width=sgW) #      ( ,   #  ),      #     - ‚Äî   #       , #     sgMask = cv2.cvtColor(sgMask, cv2.COLOR_BGR2GRAY) sgMask = cv2.threshold(sgMask, 0, 255, cv2.THRESH_BINARY)[1] sgMask = imutils.rotate_bound(sgMask, angle) sgMask = imutils.resize(sgMask, width=sgW, inter=cv2.INTER_NEAREST)</span></span></code> </pre> <br>  Primeiro, calculamos o centro de cada olho, depois o √¢ngulo entre os centr√≥ides.  A mesma opera√ß√£o √© realizada com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">alinhamento</a> horizontal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">da face no quadro</a> . <br><br>  Agora voc√™ pode girar e redimensionar os √≥culos.  Observe que usamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a fun√ß√£o rotate_bound</a> , n√£o apenas <code>rotate</code> , para que o OpenCV n√£o apare partes que n√£o s√£o vis√≠veis ap√≥s a convers√£o afim. <br><br>  As mesmas opera√ß√µes que foram aplicadas aos √≥culos se aplicam √† m√°scara.  Mas primeiro voc√™ precisa convert√™-lo em tons de cinza e binarizar, porque as m√°scaras s√£o sempre bin√°rias.  Em seguida, giramos e redimensionamos a m√°scara da mesma maneira que fizemos com os √≥culos. <br><br>  <i><b>Nota:</b> observe que, ao redimensionar a m√°scara, usamos interpola√ß√£o para os pontos vizinhos mais pr√≥ximos, porque a m√°scara deve ter apenas dois valores (0 e 255).</i>  <i>Outros m√©todos de interpola√ß√£o s√£o mais est√©ticos, mas n√£o s√£o adequados para m√°scaras.</i>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui</a> voc√™ pode obter informa√ß√µes adicionais sobre interpola√ß√£o nos pontos vizinhos mais pr√≥ximos.</i> <br><br>  Os tr√™s blocos restantes de c√≥digo criam quadros para a anima√ß√£o GIF: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    ,   #  N       #    steps = np.linspace(0, rightEyeCenter[1], config["steps"], dtype="int") # start looping over the steps for (i, y) in enumerate(steps): #      #  ,    **    #  ,       #   shiftX = int(sg.shape[1] * 0.25) shiftY = int(sg.shape[0] * 0.35) y = max(0, y - shiftY) # add the sunglasses to the image output = overlay_image(image, sg, sgMask, (rightEyeCenter[0] - shiftX, y))</span></span></code> </pre> <br>  Os √≥culos caem da parte superior da imagem.  Em cada quadro, eles s√£o exibidos mais perto do rosto at√© cobrir os olhos.  Usando a vari√°vel <code>"steps"</code> no arquivo de configura√ß√£o JSON, geramos coordenadas y para cada quadro.  Para fazer isso, sem muito esfor√ßo, usamos a fun√ß√£o <code>linspace</code> do NumPy. <br><br>  As linhas com um pequeno deslocamento para a esquerda e para cima podem parecer um pouco estranhas, mas s√£o necess√°rias para garantir que os √≥culos cubram os olhos como um todo, e n√£o apenas se movam para o ponto em que o centro do olho est√°.  Eu determinei empiricamente porcentagens para calcular o deslocamento ao longo de cada eixo.  A pr√≥xima linha n√£o garante valores negativos. <br><br>  Usando a fun√ß√£o <code>overlay_image</code> , geramos o quadro de <code>output</code> final. <br><br>  Agora aplique o texto ‚ÄúLIGUE COM ELE‚Äù usando outra m√°scara: <br><br><pre> <code class="python hljs"> <span class="hljs-comment"><span class="hljs-comment">#    ,    #  "DEAL WITH IT"   if i == len(steps) - 1: #   "DEAL WITH IT"  , #   dwi = cv2.imread(config["deal_with_it"]) dwiMask = cv2.imread(config["deal_with_it_mask"]) dwiMask = cv2.cvtColor(dwiMask, cv2.COLOR_BGR2GRAY) dwiMask = cv2.threshold(dwiMask, 0, 255, cv2.THRESH_BINARY)[1] #       80%   #  oW = int(W * 0.8) dwi = imutils.resize(dwi, width=oW) dwiMask = imutils.resize(dwiMask, width=oW, inter=cv2.INTER_NEAREST) #  ,   ,  #   oX = int(W * 0.1) oY = int(H * 0.8) output = overlay_image(output, dwi, dwiMask, (oX, oY))</span></span></code> </pre> <br>  No √∫ltimo passo, impomos o texto, que na realidade √© outra imagem. <br><br>  Decidi usar uma imagem porque os recursos de renderiza√ß√£o das fontes OpenCV s√£o bastante limitados.  Al√©m disso, eu queria adicionar uma sombra e uma borda ao redor do texto, que novamente o OpenCV n√£o sabe. <br><br>  No restante deste c√≥digo, carregamos a imagem e a m√°scara e, em seguida, executamos a mistura alfa para gerar o resultado final. <br><br>  Resta apenas salvar cada quadro em disco com a cria√ß√£o subsequente da anima√ß√£o GIF: <br><br><pre> <code class="python hljs"> <span class="hljs-comment"><span class="hljs-comment">#      p = os.path.sep.join([config["temp_dir"], "{}.jpg".format( str(i).zfill(8))]) cv2.imwrite(p, output) #      ,     #   GIF- print("[INFO] creating GIF...") create_gif(config["temp_dir"], args["output"], config["delay"], config["final_delay"], config["loop"]) #  --    print("[INFO] cleaning up...") shutil.rmtree(config["temp_dir"], ignore_errors=True)</span></span></code> </pre> <br>  Escrevemos o resultado no disco.  Ap√≥s gerar todos os quadros, chamamos a fun√ß√£o <code>create_gif</code> para criar o arquivo de anima√ß√£o GIF.  Lembre-se de que este √© um shell que transmite par√¢metros para a ferramenta de linha de comando <code>convert</code> ImageMagick. <br><br>  Por fim, exclua o diret√≥rio de sa√≠da tempor√°rio e os arquivos de imagem individuais. <br><br><h2>  Resultados </h2><br>  Agora a parte divertida: vamos ver o que nosso gerador de memes criou! <br><br>  Certifique-se de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">baixar o</a> c√≥digo-fonte, imagens de exemplo e modelos de aprendizado profundo.  Em seguida, abra um terminal e execute o seguinte comando: <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/adrian.jpg \ --output adrian_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/dca/b24/46e/dcab2446ec5dc96065e37a473375eea6.gif"><br>  <i><font color="gray">Figura 9. Anima√ß√£o GIF gerada com OpenCV e ImageMagick com este script Python</font></i> <br><br>  Aqui voc√™ pode ver o GIF criado usando o OpenCV e o ImageMagick.  As seguintes a√ß√µes s√£o executadas nele: <br><br><ol><li>  Detec√ß√£o correta do meu rosto. </li><li>  Localiza√ß√£o dos olhos e c√°lculo de seus centros. </li><li>  Os √≥culos caem corretamente no rosto. </li></ol><br>  Os leitores do meu blog sabem que sou um grande nerd no Jurassic Park e frequentemente o menciono em meus livros, cursos e guias de estudo. <br><br>  N√£o gosta de <i>Jurassic Park</i> ? <br><br>  Ok, aqui est√° a minha resposta: <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/adrian_jp.jpg \ --output adrian_jp_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/da9/0d7/740/da90d7740e8ac813b9f99a727b9e04bc.gif"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">10. Anima√ß√£o em GIF OpenCV baseada em uma fotografia da recente exibi√ß√£o de Jurassic World 2</font></i> <br><br>  Aqui estou no show "Jurassic World: 2" em uma camiseta tem√°tica, com um copo de luz e um livro de cole√ß√£o. <br><br>  Hist√≥ria divertida: <br><br>  Cinco ou seis anos atr√°s, eu e minha esposa visitamos o parque tem√°tico do Epcot Center na Disney World, na Fl√≥rida. <br><br>  Decidimos fazer uma viagem para fugir dos invernos rigorosos de Connecticut e precis√°vamos desesperadamente da luz do sol. <br><br>  Infelizmente, na Fl√≥rida, choveu o tempo todo e a temperatura mal ultrapassou 10 ¬∞ C. <br><br>  Perto dos jardins canadenses, Trisha tirou uma foto minha: ela diz que eu pare√ßo um vampiro de pele clara, roupas escuras e capuz, contra o fundo dos jardins luxuriantes atr√°s: <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/vampire.jpg \ --output vampire_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/ad1/1ce/ca2/ad11ceca2ed48792a5aa28c0c8dc7f40.gif"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">11. Usando OpenCV e Python, voc√™ pode criar esse meme ou outro GIF animado</font></i> <br><br>  Naquela mesma noite, Trisha publicou uma foto nas redes sociais - eu tive que aturar isso. <br><br>  Aqueles de voc√™s que participaram do PyImageConf 2018 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">leia a resenha</a> ) sabem que estou sempre aberto a brincadeiras.  Aqui est√° um exemplo: <br><br>  <i>Pergunta: Por que o galo atravessa a estrada?</i> <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/rooster.jpg \ --output rooster_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/5dd/e92/ef0/5dde92ef04cb35436e87b0b70cc5926d.gif"><br>  <i><font color="gray">Fig.</font></i> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12. O rosto √© reconhecido mesmo com baixo contraste, e o OpenCV processa corretamente a foto e abaixa os √≥culos de sol.</font></font></font></i> <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Resposta: N√£o direi a resposta - aguente isso. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finalmente, conclu√≠mos o guia de hoje com um bom meme. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cerca de seis anos atr√°s, meu pai e eu adotamos um pequeno beagle, Gemma. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui voc√™ pode ver Gemma no meu ombro:</font></font><br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/pupper.jpg \ --output pupper_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/08a/b5a/728/08ab5a728e8bd48ac2550a2962e76165.gif"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">13. Gemma √© deliciosa. </font><font style="vertical-align: inherit;">Voc√™ n√£o acha? </font><font style="vertical-align: inherit;">Ent√£o "aceite isso!" </font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o concorda que ela √© fofa? </font><font style="vertical-align: inherit;">Lide com isso.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Possui um erro no AttributeError? </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o se preocupe! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ viu este erro:</font></font><br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/adrian.jpg \ --output adrian_out.gif ... Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"create_gif.py"</span></span>, line 142, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; (lStart, lEnd) = face_utils.FACIAL_LANDMARKS_IDXS[<span class="hljs-string"><span class="hljs-string">"left_eye"</span></span>] AttributeError: module <span class="hljs-string"><span class="hljs-string">'imutils.face_utils'</span></span> has no attribute <span class="hljs-string"><span class="hljs-string">'FACIAL_LANDMARKS_IDXS'</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... ent√£o voc√™ s√≥ precisa atualizar o pacote imutils: </font></font><br><br><pre> <code class="bash hljs">$ pip install --upgrade imutils Collecting imutils ... Successfully installed imutils-0.5.1</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Porque </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por padr√£o, ele </font></font><code>imutils.face_utils</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usa um detector de ponto de refer√™ncia de 68 pontos embutido no dlib (como neste artigo). </font><font style="vertical-align: inherit;">Existe </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um detector de 5 pontos mais r√°pido</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que agora tamb√©m funciona com imutils. </font><font style="vertical-align: inherit;">Atualizei recentemente o imutils para suportar os dois detectores (para que voc√™ possa ver um erro).</font></font><br><br><h1>  Sum√°rio </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No tutorial de hoje, voc√™ aprendeu como criar GIFs usando o OpenCV. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para tornar a li√ß√£o divertida, usamos o OpenCV para gerar a anima√ß√£o GIF ‚ÄúDeal With It‚Äù, um meme popular (e o meu favorito) encontrado de uma forma ou de outra em quase todos os sites de redes sociais. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No processo, usamos vis√£o computacional e aprendizado profundo para resolver v√°rios problemas pr√°ticos:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Identifica√ß√£o de pessoas </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Previs√£o de pontos de refer√™ncia na face </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Identifica√ß√£o de √°reas da face (neste caso, o olho) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C√°lculo do √¢ngulo entre os olhos para alinhar o rosto </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Crie misturas transparentes com a mistura alfa </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finalmente, pegamos um conjunto de imagens geradas e criamos um GIF animado usando o OpenCV e o ImageMagick. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espero que tenham gostado do tutorial de hoje! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ gostou, deixe um coment√°rio e me avise. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bem, se voc√™ n√£o gostou, n√£o importa, apenas supere.</font></font> ;) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt429024/">https://habr.com/ru/post/pt429024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt429014/index.html">Sub√°rvore Git em detalhes</a></li>
<li><a href="../pt429016/index.html">Volvo e Baidu desenvolver√£o ve√≠culos n√£o tripulados juntos</a></li>
<li><a href="../pt429018/index.html">Por que o novo design do Gmail √© t√£o lento?</a></li>
<li><a href="../pt429020/index.html">O que √© um setter fluente</a></li>
<li><a href="../pt429022/index.html">GridGain on Highload: onde falar sobre DBMSs distribu√≠dos, In-Memory e c√≥digo aberto</a></li>
<li><a href="../pt429028/index.html">Korolev. Medicina para a web</a></li>
<li><a href="../pt429030/index.html">Logomachine cria logotipos gratuitos por coment√°rio</a></li>
<li><a href="../pt429032/index.html">Splunk Essentials para o aplicativo do setor de servi√ßos financeiros ou como o Splunk entra no mercado de an√°lise financeira</a></li>
<li><a href="../pt429034/index.html">Algumas hist√≥rias sobre programadores underground</a></li>
<li><a href="../pt429036/index.html">Confie em mim, eu sei o que estou fazendo: auto-adapta√ß√£o de um rob√¥ modular ao ambiente de execu√ß√£o de tarefas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>