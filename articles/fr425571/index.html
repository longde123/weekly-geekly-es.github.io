<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌐 🍐 👨‍👩‍👧 Sécuriser un serveur Web sous Linux 🗨️ ↗️ ➰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 

 Nous n'avons pas publié de nouveaux livres sur Linux pour les débutants depuis longtemps - et maintenant nous entreprenons la traduc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sécuriser un serveur Web sous Linux</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/425571/">  Bonjour, Habr! <br><br>  Nous n'avons pas publié de nouveaux livres sur Linux pour les débutants depuis longtemps - et maintenant nous entreprenons la traduction de nouveaux produits d'un tel plan.  Le livre de Clinton, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Linux in Action</a> , publié par Manning, raconte non seulement la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">structure interne de Linux</a> , mais aussi les problèmes les plus courants et comment les résoudre. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pw/vq/ow/pwvqowqz-ymlimiywgpbhj8rzqq.jpeg" width="450"></div><br>  L'auteur a publié un extrait du 9ème chapitre sur le site Hackernoon, que nous vous suggérons d'évaluer. <br><a name="habracut"></a><br>  Assembler un serveur LAMP, comment le configurer, assurer un traitement fiable des données, configurer le domaine et prendre soin d'un certificat TLS n'est que la moitié du chemin vers la victoire.  Vous devez également vous assurer que votre infrastructure est protégée contre les nombreuses menaces redoutables d'Internet. <br><br>  Dans cet article, nous examinons la sécurité d'un site Web en apprenant à travailler correctement avec les groupes de systèmes, à garantir l'isolation des processus et à auditer régulièrement les ressources système.  Bien sûr, cette histoire n'est pas complète (le livre Linux en action a également couvert d'autres sujets, par exemple, installer des certificats TLS et travailler avec SELinux), mais cela suffira pour commencer. <br><br><h3>  Groupes de systèmes et principe des privilèges minimaux </h3><br>  Les développeurs que vous soutenez (enfin) commencent à se rendre compte qu'il est nécessaire de limiter l'accès général aux données et aux fichiers de configuration situés sur le serveur d'applications, mais en même temps, de laisser cet accès ouvert à divers programmeurs et autres équipes informatiques. <br><br>  La première partie de la solution concerne les <i>groupes</i> .  Un groupe est un objet du système (un peu comme un utilisateur) avec la mise en garde qu'aucun utilisateur ne se connectera jamais au système en tant que groupe.  La force des groupes réside dans le fait qu’ils, comme les utilisateurs, peuvent être «assignés» à des fichiers ou des répertoires, permettant à chaque membre du groupe d’utiliser les privilèges qui lui sont accordés.  Ceci est illustré ci-dessous. <br><br>  Les développeurs du groupe Développeurs peuvent accéder à un répertoire spécifique, et pour les utilisateurs qui ne sont pas membres de ce groupe, le répertoire sera fermé <br>  Essayez-le vous-même: créez un nouveau fichier dans un éditeur de texte.  Écrivez-y du texte brut, par exemple, «Bonjour tout le monde», afin que vous puissiez voir immédiatement quand le fichier a été correctement accédé.  Modifiez ensuite les autorisations à l'aide de <code>chmod 770</code> afin que le propriétaire du fichier et les membres du groupe auquel il appartient aient tous les droits pour travailler avec le fichier, tandis que d'autres ne peuvent pas le lire. <br><br><pre> <code class="hljs ruby">$ nano datafile.txt $ chmod <span class="hljs-number"><span class="hljs-number">770</span></span> datafile.txt</code> </pre> <br>  Si votre système n'a pas encore d'autres comptes utilisateur que le vôtre, créez un tel compte soit en utilisant <code>adduser</code> - cela se fait dans Debian / Ubuntu - soit en utilisant <code>useradd</code> , comme c'est la coutume dans CentOS.  La commande <code>useradd</code> fonctionnera également sur Ubuntu. <br><br>  <code>useradd</code> à l' <code>adduser</code> Debian, la commande <code>useradd</code> requiert que le mot de passe utilisateur soit généré séparément: <br><br><pre> <code class="hljs pgsql"># useradd otheruser # passwd otheruser Enter <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> UNIX <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: Retype <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> UNIX <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>: passwd: <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> updated successfully</code> </pre> <br>  En utilisant la commande <code>su</code> , nous basculons vers le nouvel utilisateur.  Après avoir entré son mot de passe, toutes les commandes suivantes seront exécutées au nom de cet utilisateur.  Vous travaillerez au nom de cet utilisateur particulier;  ni plus ni moins.  Si vous essayez de lire le fichier de <code>datafile.txt</code> (en utilisant <code>cat</code> ), alors rien ne fonctionnera plus pour vous;  comme vous vous en souvenez, seuls les membres du groupe ont des droits de lecture.  Une fois terminé, tapez <code>exit</code> pour quitter le nouveau shell utilisateur et revenir à votre shell d'origine. <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> su otheruser Password: <span class="hljs-variable"><span class="hljs-variable">$</span></span> cat /home/ubuntu/datafile.txt cat: /home/ubuntu/datafile.txt: Permission denied <span class="hljs-variable"><span class="hljs-variable">$</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span></code> </pre> <br>  Tout cela est attendu et tout à fait compréhensible.  Comme vous pouvez le voir, lorsque vous ne pouvez pas lire un fichier appartenant à un autre utilisateur, c'est parfois un problème.  Voyons ce que vous pouvez faire en associant le fichier au groupe, puis en configurant correctement les autorisations de fichier. <br><br>  Nous allons créer un nouveau groupe avec lequel nous pouvons gérer les données de notre application, puis éditer les propriétés de notre fichier de données à l'aide de la <code>chown</code> .  L'argument ubuntu: app-data-group laisse la propriété du fichier à l'utilisateur Ubuntu, mais son groupe change pour un nouveau: app-data-group. <br><br><pre> <code class="hljs pgsql"># groupadd app-data-<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> # chown ubuntu:app-data-<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> datafile.txt</code> </pre> <br>  Exécutez ls pour obtenir la sortie «étendue» de ce fichier et afficher ses nouvelles autorisations et son statut.  Veuillez noter: comme prévu, le fichier appartient à l'utilisateur <code>ubuntu</code> appartenant au groupe <code>app-data-group</code> . <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> ls <span class="hljs-literal"><span class="hljs-literal">-l</span></span> | grep datafile.txt <span class="hljs-literal"><span class="hljs-literal">-rwxrwx</span></span> — — <span class="hljs-number"><span class="hljs-number">1</span></span> ubuntu app<span class="hljs-literal"><span class="hljs-literal">-data</span></span><span class="hljs-literal"><span class="hljs-literal">-group</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> Aug <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">43</span></span> datafile.txt</code> </pre> <br>  Vous pouvez utiliser <code>usermod</code> pour ajouter votre utilisateur au <code>app-data-group</code> d' <code>app-data-group</code> , puis utiliser la commande <code>su</code> pour basculer vers le shell dans lequel le compte d'un autre utilisateur est déployé.  Maintenant, même si les droits d'accès au fichier le bloquent de tous les «autres» - et vous êtes certainement un utilisateur «différent» pour le moment - vous devez lire ce fichier librement, car vous appartenez au groupe nécessaire. <br><br><pre> <code class="hljs smalltalk"># usermod -aG app-data-group otheruser <span class="hljs-string"><span class="hljs-string">$ </span></span>su otheruser <span class="hljs-string"><span class="hljs-string">$ </span></span>cat datafile.txt <span class="hljs-type"><span class="hljs-type">Hello</span></span> <span class="hljs-type"><span class="hljs-type">World</span></span></code> </pre> <br>  En utilisant la commande <code>su</code> , nous basculons entre les comptes d'utilisateurs.  Ils sont enregistrés dans mon <code>datafile.txt</code> .  Une telle organisation est le moyen juste et efficace d'éliminer une variété de problèmes complexes avec les droits d'accès qui peuvent survenir dans un système multi-utilisateur. <br><br>  En fait, il est utilisé non seulement pour fournir les droits d'accès nécessaires aux utilisateurs individuels - de nombreux processus système ne seraient pas non plus en mesure de mener à bien leurs tâches s'ils n'étaient pas prescrits d'appartenir aux groupes nécessaires.  Vous pouvez afficher le fichier / etc / group en diagonale - notez combien de processus système appartiennent à vos propres groupes ... <br><br>  Liste abrégée du contenu du fichier / etc / group: <br><br><pre> <code class="hljs ruby">$ cat /etc/group <span class="hljs-symbol"><span class="hljs-symbol">root:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">daemon:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">bin:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">sys:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">adm:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">4</span></span><span class="hljs-symbol"><span class="hljs-symbol">:syslog</span></span> <span class="hljs-symbol"><span class="hljs-symbol">tty:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">disk:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">lp:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">mail:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">8</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">news:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">9</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">uucp:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">10</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">man:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">12</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">proxy:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">13</span></span>: […]</code> </pre> <br><h3>  Isolement du processus de conteneur </h3><br>  Vous craignez peut-être que de nombreux services exécutés sur votre même serveur soient menacés si au moins l'un de ces services est compromis?  Une option pour atténuer les dommages que des utilisateurs imprudents ou malveillants peuvent causer consiste à isoler les ressources et les processus du système.  Ainsi, même si quelqu'un souhaite étendre son autorité au-delà des limites établies, il n'aura pas accès physiquement aux données. <br><br>  Auparavant, il était décidé de résoudre ce problème comme suit: chaque service se voyait allouer sa propre machine physique.  Cependant, la virtualisation rend la construction d'une architecture "maillée" beaucoup plus simple et moins coûteuse.  Aujourd'hui, cette architecture est souvent appelée <i>microservice</i> et vous permet d'exécuter de nombreux conteneurs à la fois, dans l'un, par exemple, une base de données peut fonctionner, dans l'autre - Apache, et dans le troisième - des fichiers multimédias qui peuvent être incorporés dans vos pages Web.  L'architecture de microservice permet non seulement d'augmenter considérablement la productivité et l'efficacité, mais également de réduire considérablement le risque de piratage de chaque composant individuel. <br><br>  Les «conteneurs» dont je parle n'ont pas à convaincre avec LXC.  D'autres technologies de conteneurs telles que Docker deviennent de plus en plus populaires aujourd'hui. <br><br><h3>  Vérification des valeurs d'ID utilisateur dangereuses </h3><br>  Bien sûr, tout utilisateur disposant de droits d'administrateur peut temporairement fournir un accès root avec la <code>sudo</code> , mais seul l'administrateur est le véritable administrateur.  Comme vous le savez déjà, il n'est pas sûr d'exécuter des fonctions régulières sous un accès root.  Cependant, cela peut arriver - purement par accident ou en raison d'une fraude de données malveillantes - qu'un utilisateur ordinaire aura des droits administratifs sans interruption. <br><br>  Dans ce cas, il est bon qu'il ne soit pas difficile d'identifier de tels imposteurs: leur identifiant d'utilisateur et / ou de groupe, comme celui de l'administrateur, sera «0».  Jetez un œil au fichier passwd dans le répertoire / etc /.  Ce fichier contient un enregistrement pour chaque compte d'utilisateur normal et système qui existe déjà dans le système.  Le premier champ contient le nom du compte (dans ce cas, root et ubuntu), et le second champ contient x au lieu du mot de passe (si le mot de passe existe, il sera crypté dans le fichier / etc / shadow).  Mais les deux champs suivants contiennent l'ID utilisateur et groupe.  Dans le cas d' <code>ubuntu</code> dans cet exemple, les deux ID sont 1000. Et l'administrateur, comme vous pouvez le voir, a des zéros ici. <br><br><pre> <code class="hljs ruby">$ cat /etc/passwd <span class="hljs-symbol"><span class="hljs-symbol">root:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-symbol"><span class="hljs-symbol">:root</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/root</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/bin/bash</span></span> […] <span class="hljs-symbol"><span class="hljs-symbol">ubuntu:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">1000</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">1000</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/home/ubuntu</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/bin/bash</span></span></code> </pre> <br>  Si vous rencontrez un utilisateur régulier avec un ID utilisateur ou groupe = 0, vous pouvez être assuré que le problème n'est pas net et que la situation doit être corrigée.  Un moyen rapide et facile d'identifier un tel problème est de vérifier le <code>passwd</code> avec la commande <code>awk</code> , qui affichera toutes les lignes dans le troisième champ dont il n'y a que 0. Dans mon cas (vous pouvez expirer), il n'y avait qu'une seule ligne de ce type - la racine.  Vous pouvez l'exécuter à nouveau en remplaçant $ 4 par $ 3 - cela vérifiera le champ ID de groupe. <br><br><pre> <code class="hljs ruby">$ awk -<span class="hljs-symbol"><span class="hljs-symbol">F:</span></span> <span class="hljs-string"><span class="hljs-string">'($3 == “0”) {print}'</span></span> /etc/passwd <span class="hljs-symbol"><span class="hljs-symbol">root:</span></span><span class="hljs-symbol"><span class="hljs-symbol">x:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-symbol"><span class="hljs-symbol">:root</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/root</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/bin/bash</span></span></code> </pre> <br><h3>  Audit des ressources système </h3><br>  Plus il y a de choses dans votre système, plus il y a de chances que quelque chose se casse.  Par conséquent, il est sage de suivre ce qui fonctionne et comment.  Dans ce cas, nous parlons de ports réseau (si le port est «ouvert», alors par définition il devrait être une entrée), de services (si le service est actif, alors il devrait être possible de l'utiliser) et de programmes installés (si le programme est installé, il devrait être la capacité de l'exécuter). <br><br>  Pour qu'un audit soit bénéfique, il doit être plus ou moins régulier.  Comme nous sommes tous oublieux, il est préférable d'écrire des outils d'audit dans un script spécial qui sera non seulement exécuté régulièrement, mais idéalement analyser les résultats pour les rendre plus lisibles. <br><br>  Ici, cependant, je vous présente trois outils d'audit clés qui vous aideront à afficher les ports ouverts, les services actifs et les packages logiciels inutiles.  Votre tâche consiste à automatiser tout cela. <br><br><h3>  Balayage de port </h3><br>  Un port est considéré comme «ouvert» si un hôte exécute un processus qui écoute les demandes sur ce port.  En gardant un œil sur vos ports ouverts, vous comprendrez mieux ce qui se passe exactement sur votre serveur. <br><br>  Vous savez déjà que les ports HTTP (80) et SSH (22) devraient probablement être ouverts sur un serveur Web normal, ils ne vous surprendront donc pas.  Mais il est beaucoup plus important de prêter attention aux autres résultats inattendus.  La commande netstat affiche tous les ports ouverts, ainsi qu'une tonne d'informations sur leur utilisation. <br><br>  Dans cet exemple, nous testons un serveur polyvalent très typique, et la commande <code>-n</code> indique à <code>netstat</code> d'activer tous les ports et adresses numériques.  <code>-l</code> inclut uniquement les sockets d'écoute et <code>-p</code> ajoute l'ID de processus du programme d'écoute.  Naturellement, si vous voyez quelque chose - agissez. <br><br><pre> <code class="hljs pgsql"># netstat -npl Active Internet connections (<span class="hljs-keyword"><span class="hljs-keyword">only</span></span> servers) Proto <span class="hljs-keyword"><span class="hljs-keyword">Local</span></span> Address <span class="hljs-keyword"><span class="hljs-keyword">Foreign</span></span> Address State PID/Program <span class="hljs-type"><span class="hljs-type">name</span></span> tcp <span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>:<span class="hljs-number"><span class="hljs-number">3306</span></span> <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>:* <span class="hljs-keyword"><span class="hljs-keyword">LISTEN</span></span> <span class="hljs-number"><span class="hljs-number">403</span></span>/mysqld tcp <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>:<span class="hljs-number"><span class="hljs-number">139</span></span> <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>:* <span class="hljs-keyword"><span class="hljs-keyword">LISTEN</span></span> <span class="hljs-number"><span class="hljs-number">270</span></span>/smbd tcp <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>:<span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>:* <span class="hljs-keyword"><span class="hljs-keyword">LISTEN</span></span> <span class="hljs-number"><span class="hljs-number">333</span></span>/sshd tcp <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>:<span class="hljs-number"><span class="hljs-number">445</span></span> <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>:* <span class="hljs-keyword"><span class="hljs-keyword">LISTEN</span></span> <span class="hljs-number"><span class="hljs-number">270</span></span>/smbd tcp6 :::<span class="hljs-number"><span class="hljs-number">80</span></span> :::* <span class="hljs-keyword"><span class="hljs-keyword">LISTEN</span></span> <span class="hljs-number"><span class="hljs-number">417</span></span>/apache2 […]</code> </pre><br>  Ces dernières années, <code>ss</code> plus en plus utilisé au lieu de <code>netstat</code> .  Juste au cas où: si un soir vous vous trouvez dans une entreprise et que quelqu'un vous pose des questions sur SS, cet exemple (qui répertorie toutes les connexions SSH installées) devrait être suffisamment informatif pour que vous ne puissiez pas faire face à la saleté: <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> ss <span class="hljs-literal"><span class="hljs-literal">-o</span></span> state established <span class="hljs-string"><span class="hljs-string">'( dport = :ssh or sport = :ssh )'</span></span> Netid Recv<span class="hljs-literal"><span class="hljs-literal">-Q</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Send-Q</span></span> Local Address:Port Peer Address:Port tcp <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">3.1</span></span>:<span class="hljs-number"><span class="hljs-number">39874</span></span> <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">3.96</span></span>:ssh timer:(keepalive,<span class="hljs-number"><span class="hljs-number">18</span></span>min,<span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre> <br><h3>  Vérification des services actifs </h3><br>  Si vous prenez un instantané des services gérés par le <code>system</code> et actuellement actifs sur votre ordinateur, la machine vous aidera à identifier toute activité indésirable.  La commande <code>systemctl</code> peut répertorier tous les services existants, puis leur liste peut être réduite à ceux dont la description contient <code>enabled</code> .  Ainsi, seuls les services actifs seront retournés. <br><br><pre> <code class="hljs mel"># systemctl list-<span class="hljs-keyword"><span class="hljs-keyword">unit</span></span>-files — type=service — state=enabled autovt@.service enabled bind9.service enabled cron.service enabled dbus-org.freedesktop.thermald.service enabled docker.service enabled getty@.service enabled haveged.service enabled mysql.service enabled networking.service enabled resolvconf.service enabled rsyslog.service enabled ssh.service enabled sshd.service enabled syslog.service enabled systemd-timesyncd.service enabled thermald.service enabled unattended-upgrades.service enabled ureadahead.service enabled</code> </pre> <br>  Si vous trouvez quelque chose qui ne rentre évidemment pas <code>systemctl</code> , vous pouvez utiliser la commande <code>systemctl</code> pour arrêter le service et vous assurer qu'il ne redémarre pas au prochain démarrage. <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># systemctl stop haveged # systemctl disable haveged</span></span></code> </pre> <br>  En fait, il n'y a rien de sombre et sombre dans le service <code>haveged</code> que j'arrête dans cet exemple: c'est un tel outil que je lance souvent pour créer une activité de système d'arrière-plan aléatoire lorsque je crée des clés de chiffrement. <br>  Rechercher les programmes installés <br><br>  Quelqu'un pourrait-il installer des programmes dans le système à votre insu?  Eh bien, pour le découvrir, vous devez regarder.  La commande <code>yum list installed</code> ou, dans le cas de Debian / Ubuntu, <code>dpkg — list</code> vous donnera un résumé détaillé, et la commande remove devrait supprimer tous les paquets dont nous n'avons pas besoin. <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># yum list installed # yum remove packageName</span></span></code> </pre> <br>  Voici comment la même chose se fait dans Ubuntu: <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># dpkg --list # apt-get remove packageName</span></span></code> </pre> <br>  Il est également utile de garder une trace des modifications apportées à vos fichiers de configuration système - nous en parlerons au chapitre 11. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425571/">https://habr.com/ru/post/fr425571/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425559/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 10: Exécution symbolique, partie 3</a></li>
<li><a href="../fr425561/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 10: Exécution symbolique, partie 2</a></li>
<li><a href="../fr425563/index.html">La Californie interdit la vente d'appareils IoT avec ou sans mots de passe simples</a></li>
<li><a href="../fr425565/index.html">Mathématiques à virgule fixe rapides pour les applications financières en Java</a></li>
<li><a href="../fr425569/index.html">Test fonctionnel PCB</a></li>
<li><a href="../fr425575/index.html">Neuroinflammation</a></li>
<li><a href="../fr425581/index.html">Jetpack 11 octobre 1961: le président ouvre la bouche ...</a></li>
<li><a href="../fr425583/index.html">Tout ce qui déroute encore les robots, à commencer par les mouettes</a></li>
<li><a href="../fr425587/index.html">Prévision du premier essai sur les souris d'expression allotopique</a></li>
<li><a href="../fr425589/index.html">Actualités anti-âge</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>