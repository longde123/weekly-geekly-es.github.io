<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòÇ üëÜüèº ü•ê Solution presque optimale pour le tic-tac-toe tridimensionnel 4x4x4 ü§Ωüèº üèÆ üÜë</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tout le monde conna√Æt le jeu tic-tac-toe 3x3. Avec le jeu correct, le premier coup de croix entra√Æne un nul. Vous pouvez cr√©er manuellement un arbre d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Solution presque optimale pour le tic-tac-toe tridimensionnel 4x4x4</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/407707/"> Tout le monde conna√Æt le jeu tic-tac-toe 3x3.  Avec le jeu correct, le premier coup de croix entra√Æne un nul.  Vous pouvez cr√©er manuellement un arbre de mouvements, o√π pour tout mouvement de z√©ros, il y a un mouvement de croix, ce qui conduit au meilleur r√©sultat (pour les croix), c'est-√†-dire √† un match nul ou √† une victoire.  Cet arbre de mouvements √©puise toutes les options, alors ils disent que le jeu est ¬´r√©solu¬ª.  Il existe une vari√©t√© tridimensionnelle de tic-tac-toe 4x4x4 pour laquelle la r√©ponse √† la question de savoir qui va gagner le premier coup des tic tacs n'est pas √©vidente.  De plus, la question se pose de savoir s'il est possible de construire un tel arbre minimal qui r√©soudra ce probl√®me. <br><br>  La r√©ponse √† cette question est sous la coupe. <br><a name="habracut"></a><br>  Permettez-moi de vous rappeler ce qu'est le jeu tic-tac-toe 4x4x4 (il est aussi appel√© Qubic). <br>  Il s'agit d'un cube compos√© de 64 champs dans lesquels pour gagner, vous devez mettre 4 croix ou z√©ros cons√©cutifs, et ils peuvent suivre n'importe quelle ligne, y compris les diagonales principales.  Au total, il existe 76 lignes de ce type - 48 contours et verticales, 24 diagonales et 4 diagonales principales.  Compte tenu de cela, on peut noter que tous les champs ne sont pas identiques: il y a 8 champs angulaires et 8 champs centraux qui contr√¥lent 7 lignes et 48 autres champs qui contr√¥lent 4 lignes.  Par cons√©quent, il est logique d'essayer de prendre des positions qui contr√¥lent plus de lignes. <br><br><div style="text-align:center;"><img src="https://ic.pics.livejournal.com/andyplekhanov/66030250/59228/59228_900.gif" alt="image"></div><br>  Quelle est la difficult√© de construire un arbre de d√©cision pour ce jeu?  On peut en gros estimer 2 √† 64 options, ce qui est beaucoup.  Bien s√ªr, toutes ces options ne sont pas impl√©ment√©es dans le jeu et de nombreuses branches de l'arbre sont coup√©es assez rapidement, mais m√™me dans ce cas, la construction d'un tel arbre par simple √©num√©ration n'est pas possible.  Comment pouvons-nous r√©duire la recherche afin de r√©soudre ce probl√®me?  Vous pouvez remarquer qu'apr√®s plusieurs mouvements de croix et de z√©ros, une situation peut survenir dans laquelle il est possible de cr√©er une menace pour l'ennemi en mettant trois croix ou z√©ros sur une m√™me ligne.  Avec une telle menace, l'ennemi est oblig√© de faire son prochain mouvement vers l'espace vide restant dans cette ligne, sinon il perdra au prochain mouvement.  De tels mouvements avec une menace peuvent √™tre effectu√©s plusieurs fois de suite, s'il y a un nombre suffisant de lignes sur lesquelles il n'y a que deux croix ou, respectivement, un z√©ro.  Si une telle cha√Æne de mouvements conduit √† une situation dans laquelle il y a deux lignes avec trois croix ou z√©ros, alors le joueur correspondant perd.  C'est ce qu'on appelle une victoire forc√©e. <br><br>  Nous num√©rotons tous les champs avec des nombres de 0 √† 63 en commen√ßant par la face sup√©rieure et en allant avec des lignes horizontales de gauche √† droite. <br><br><img src="https://ic.pics.livejournal.com/andyplekhanov/66030250/59679/59679_900.png" alt="image"><br><br>  Nous illustrons cela avec un exemple d'un jeu: <br><br>  0-3-60-21-15-51-12-63 4x8x5x10x20x40x28x44x24x16x36x52x48 <br><br>  Ici, les croix font le premier pas vers le coin le plus √† gauche sur la face sup√©rieure (0), puis les z√©ros r√©pondent au coin le plus √† droite sur la m√™me face (3).  Les croix vont dans le coin proche gauche sur le bord inf√©rieur (60), les z√©ros correspondent dans le champ au deuxi√®me √† partir du bord sup√©rieur, etc.  Apr√®s le mouvement des orteils en 63, les croix commencent une s√©quence de mouvements forc√©s: 4 - check.  Le tac-toe est oblig√© de r√©pondre √† 8, la croix est √† 5 check, le tac-toe est r√©pondu √† 10, etc.  jusqu'√† ce que deux lignes avec trois croix se forment aux croix.  Tac toe perdu. <br><br>  Pour r√©soudre ce jeu, vous devez trouver de telles s√©quences pour tous les mouvements possibles du tac toe.  Pour une solution optimale, ces s√©quences doivent √™tre minimales. <br><br><h2>  Excursion historique </h2><br>  Patashnik a √©t√© le premier √† r√©soudre ce jeu au d√©but des ann√©es 80.  Il a s√©lectionn√© manuellement les combinaisons initiales, puis a recherch√© un coup gagnant √† l'aide d'un ordinateur.  Il a montr√© que si les croix vont dans le coin, elles gagnent toujours avec le bon jeu.  La prochaine √©tape a √©t√© prise par Victor Allis.  Dans sa th√®se du milieu des ann√©es 90, il a montr√© qu'une solution peut √™tre obtenue enti√®rement sur ordinateur.  Cependant, il n'a pas v√©rifi√© toutes les options que les croix peuvent gagner, mais seulement les dix premi√®res, les plus prometteuses.  Par cons√©quent, sa solution n'√©tait pas optimale et il a laiss√© cette t√¢che √† d'autres chercheurs. <br><br>  J'ai d√©cid√© de r√©soudre ce probl√®me de mani√®re optimale, c'est-√†-dire de trouver un arbre minimal.  √âvidemment, pour cela, il est n√©cessaire d'utiliser la recherche en largeur d'abord, par opposition √† la recherche en profondeur Allis.  Tout d'abord, la recherche de gains forc√©s pour une situation arbitraire a √©t√© mise en ≈ìuvre.  Cependant, il s'est av√©r√© que cela s'est av√©r√© plut√¥t lent, car la recherche approfondie du gain forc√© pour les longues combinaisons est assez co√ªteuse.  La solution a √©t√© trouv√©e en ajoutant un r√©f√©rentiel d'options d√©j√† calcul√©es dans std :: unordered_set.  Il vaut la peine de dire que le terrain de jeu a √©t√© encod√© sous la forme de deux variables de 64 bits, une pour les croix, une pour les z√©ros, o√π 1 signifie la pr√©sence d'une croix ou d'un z√©ro dans le champ correspondant.  Cette mise en cache a fourni une acc√©l√©ration significative.  Cependant, le principal probl√®me √©tait une recherche en premier lieu de mouvements non forc√©s.  Dans une recherche normale sans optimisation, le calcul ne s'est pas termin√© dans un d√©lai raisonnable. <br><br>  J'ai d√ª me tourner √† nouveau vers la mise en cache.  Un autre octet a √©t√© ajout√© au champ de jeu calcul√© avec le r√©sultat du calcul du sous-arbre pour cette option d'arrangement de tic tac toe.  Dans le m√™me temps, le codage du terrain de jeu a commenc√© √† occuper 17 octets.  Ainsi, lors de la recherche en largeur et en augmentant progressivement la profondeur d'un arbre, des sous-arbres d√©j√† calcul√©s pourraient √™tre supprim√©s.  Avec cela, j'ai pu calculer les arbres minimum <br>  pour le premier mouvement de la croix vers le coin (cellule 0) et les r√©ponses des z√©ros √† tous les champs qui contr√¥lent en quatre lignes. <br><br>  Des difficult√©s ont surgi si le tac toe a pris le terrain qui contr√¥lait sept lignes lors du premier mouvement de repr√©sailles.  Dans ce cas, le cache occup√© par le cache d√©passait 32 gigaoctets de RAM et mon Linux est pass√© √† un √©change.  Il fallait chercher une autre solution. <br><br>  Ensuite, je suis pass√© au fait que le terrain de jeu a de nombreux automorphismes, c'est-√†-dire que si vous trouvez une solution pour une combinaison de croix et de z√©ros, alors les combinaisons correspondant √† diff√©rentes rotations et r√©flexions auront √©galement une solution.  Il est √† noter que gr√¢ce √† ces automorphismes, le premier mouvement des croix n'a que deux options - une dans le champ 0 (contr√¥lant 7 lignes) et une dans le champ 1 (contr√¥lant 4 lignes).  Par cons√©quent, dans mon cas, le premier mouvement que les croix font toujours dans le champ 0. Mais cela n'est vrai que pour un champ vide. <br><br>  Nous revenons cependant aux automorphismes pour un terrain de jeu arbitraire.  Comment les trouver tous? <br>  J'ai utilis√© la m√©thode suivante: comme le cube a trois dimensions, vous pouvez r√©organiser les coordonn√©es (il y aura 6 permutations) et faire des r√©flexions (il y en aura 8).  Par cons√©quent, il y aura au total 48 automorphismes spatiaux, mais le cube poss√®de deux autres automorphismes internes.  On permute les coordonn√©es des champs dans les premi√®re et deuxi√®me paires de chaque ligne, <br>  et le second laisse le premier et le dernier champ en place et r√©organise uniquement les coordonn√©es des deuxi√®me et troisi√®me champs.  Ces deux automorphismes peuvent √©galement √™tre appliqu√©s simultan√©ment.  Ainsi, pour chacun des 48 automorphismes spatiaux, il y a quatre <br>  (y compris les automorphismes internes triviaux).  Sinon, pour tout le cube, il y a 192 automorphismes.  Cela laisse esp√©rer une r√©duction significative du nombre de champs d√©j√† calcul√©s. <br><br>  Cependant, un autre probl√®me se pose ici: si vous v√©rifiez les 192 automorphismes, vous devez transformer rapidement le terrain de jeu en √©changeant des bits.  Si cette transformation n'est pas effectu√©e rapidement, elle y ira tout le temps, il n'y aura pas de gain de productivit√© et toute l'entreprise d'automorphismes s'envolera dans le tuyau.  J'ai donc commenc√© √† chercher sur Internet un moyen rapide d'√©changer des bits.  Pour √™tre honn√™te, je n'ai rien trouv√© de convenable.  Le seul moyen rapide et acceptable de r√©organiser les bits consiste √† pr√©compiler la table et √† y s√©lectionner une solution toute pr√™te ayant le terrain de jeu actuel comme index.  Pour moi, cette m√©thode ne convenait pas, car il fallait avoir un tableau de 2 √† la puissance de 64 mots de soixante bits. <br><br>  Je voulais d√©j√† vraiment laisser cette id√©e, cependant, l'id√©e m'est venue √† l'esprit qu'il n'est pas n√©cessaire d'avoir une grande table, mais vous pouvez en avoir plusieurs petites.  En principe, il √©tait possible de choisir un nombre diff√©rent de telles tables, mais je me suis install√© sur 8 tables de 256 mots (pour chaque automorphisme).  Ainsi, pour √©changer des bits, je prends un octet dans un champ de 64 bits et, dans un tableau pr√©-calcul√©, je s√©lectionne un mod√®le o√π les bits sont d√©j√† en place (√† moins, bien s√ªr, qu'ils soient nuls dans le champ source).  Ensuite, je prends l'octet suivant du champ 64 bits et dans le prochain tableau pr√©-calcul√©, je s√©lectionne un autre mod√®le et fais un ¬´ou¬ª logique avec le premier.  Et donc 8 fois.  √âtant donn√© que ces op√©rations ne contiennent pas de sauts conditionnels, elles doivent √™tre effectu√©es assez rapidement sans violer le pipeline dans le processeur. <br><br>  Tout cela semble assez bien, cependant, pour coder tous ces automorphismes et permutations rapides de bits manuellement et sans erreurs est assez probl√©matique.  Par cons√©quent, un programme suppl√©mentaire a √©t√© cr√©√© qui g√©n√®re du code C, qui, √† son tour, <br>  inclus dans le programme principal. <br><br><h2>  Conclusion et √©volution ult√©rieure </h2><br>  Apr√®s avoir cr√©√© le programme ci-dessus, il est devenu possible en quelques jours de trouver un arbre presque optimal pour jouer au tic-tac-toe 4x4x4.  Pourquoi est-ce "presque optimal"?  Parce que la longueur totale des mouvements forc√©s n'est pas prise en compte et il peut arriver qu'il y ait un arbre pour les mouvements non forc√©s de la m√™me profondeur, mais avec une profondeur totale plus petite des mouvements forc√©s.  Mais je pense que ce n'est pas un tr√®s gros inconv√©nient. <br><br>  Ainsi, le jeu de tic-tac-toe 4x4x4 est compl√®tement calcul√©, les croix gagnent toujours et vous pouvez clore ce sujet?  Pas vraiment.  Le fait est que puisque les croix passent en premier, elles ont un avantage.  Et si vous essayez de compenser cet avantage d'une mani√®re ou d'une autre?  Je propose l'id√©e suivante - interdire aux croix de mettre la croix dans le champ qui contr√¥le 7 lignes au premier coup, en les restreignant aux champs ne contr√¥lant que 4 lignes.  Malgr√© le fait que cela semble √™tre un petit changement, en fait, le r√©sultat du jeu peut changer consid√©rablement et les z√©ros pourront r√©duire le jeu √† un match nul, ou peut-√™tre gagner.  Donc, il y a quelque chose √† explorer. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr407707/">https://habr.com/ru/post/fr407707/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr407697/index.html">Bulle, pyramide ou nouveau dollar: comment le Bitcoin peut-il encore cro√Ætre</a></li>
<li><a href="../fr407699/index.html">Sondage: comment cr√©er des vacances d'entreprise pour les professionnels de l'informatique?</a></li>
<li><a href="../fr407701/index.html">Alphabet investira 1 milliard de dollars dans le futur quartier de Toronto</a></li>
<li><a href="../fr407703/index.html">Comment cr√©er des batteries</a></li>
<li><a href="../fr407705/index.html">Extensions Google Chrome pour l'apprentissage des langues √©trang√®res</a></li>
<li><a href="../fr407709/index.html">Lampe LED Philips 7W de Dixie</a></li>
<li><a href="../fr407711/index.html">De quoi la cam√©ra Motion Eye est-elle capable dans le smartphone Sony Xperia XZ1</a></li>
<li><a href="../fr407713/index.html">Demandez √† Ethan: les effets de l'√©nergie sombre conduisent-ils √† une perte d'informations sur l'univers?</a></li>
<li><a href="../fr407715/index.html">Du mousquet √† la mitrailleuse - un si√®cle fou (partie 1)</a></li>
<li><a href="../fr407717/index.html">Comment choisir judicieusement</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>