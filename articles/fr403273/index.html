<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§õüèº üë¥ ü§∞üèª Automatisation avec Pebble pratique, Noolite stable et esp8266 abordable üí© üë©üèΩ‚Äçüöí ‚òòÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Depuis le dernier article (le lien a dur√© presque un an. Et au cours de cette ann√©e, j'ai repens√© certaines choses, Internet et il s'est av√©r√© quelque...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Automatisation avec Pebble pratique, Noolite stable et esp8266 abordable</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/403273/"> Depuis le dernier article (le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien a</a> dur√© presque un an. Et au cours de cette ann√©e, j'ai repens√© certaines choses, Internet et il s'est av√©r√© quelque chose comme l'IoT :) ‚Üí l'Internet des objets). <br><br>  J'essaierai de r√©sumer une nouvelle partie des connaissances accumul√©es, de d√©crire o√π je m'efforce et ce que je veux atteindre ‚Üí je vous demande de lire. <br><a name="habracut"></a><br><h2>  Noolite F v2.0 </h2><br>  <b>Dans le titre, j'ai eu les mots: galets et noolite.</b>  <b>Passons √† eux!</b> <br>  Je g√®re toujours avec des galets ma lumi√®re noolite, mon garage et mon portail.  Beaucoup d'informations utiles ont d√©j√† √©t√© √©crites sur noolite, la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">recherche</a> montre de nouveaux articles. <br><br>  En plus des unit√©s de premi√®re g√©n√©ration du syst√®me noolite, j'en ai de nouvelles: une unit√© de puissance SLF-1-200 (nooLite-F) avec r√©troaction ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">et cryptage de nouvelle g√©n√©ration</a> ). <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/312/be1/be5/312be1be5d922ebcc46d307015f01eb0.png" alt="image"><br><br>  bloc d'alimentation SB-1-150 <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/0a1/575/b81/0a1575b813bdd72fa22800bf8b33374d.png" alt="image"><br><br>  et adaptateur USB MTRF-64 USB mis √† jour. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/61e/842/1de/61e8421deaa8155d33aba9f064002a3b.png" alt="image"><br><br>  Toute la lumi√®re dans ma maison sur le syst√®me noolite. <br><br>  Jusqu'√† r√©cemment, j'avais un adaptateur USB de premi√®re g√©n√©ration avec 16 appareils et maintenant 64 canaux (MTRF-64 USB) dans le ¬´syst√®me home cramp¬ª, ainsi que pour les appareils de nouvelle g√©n√©ration avec r√©troaction (noolite F).  Mais la technologie √©volue dans la bonne direction, cr√©ant de nouveaux appareils modernes. <br><br>  <b>Il existe 2 options les plus importantes pour les nouveaux appareils: le feedback et le principe d'identification des appareils par adresses: ID.</b>  D√©sormais, il n'est plus n√©cessaire d'√©crire des p√©riph√©riques sur le canal 1 et de contr√¥ler le canal.  Vous pouvez maintenant acc√©der √† un p√©riph√©rique sp√©cifique dans un canal par son ID et lui envoyer une commande d'ex√©cution. <br><br>  La documentation des blocs de nouvelle g√©n√©ration <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">est disponible</a> sur le site Web du fabricant. <br><br><div class="spoiler">  <b class="spoiler_title">Tout fonctionne via le port s√©rie en utilisant du code python.</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- #!/usr/bin/env python import serial import time class NooLiteCommand: def __init__(self, ch, cmd, mode=0, ctr=0, res=0, fmt=0, d0=0, d1=0, d2=0, d3=0, id0=0, id1=0, id2=0, id3=0): self.st = 171 self.mode = mode self.ctr = ctr self.res = res self.ch = ch self.cmd = cmd self.fmt = fmt self.d0 = d0 self.d1 = d1 self.d2 = d2 self.d3 = d3 self.id0 = id0 self.id1 = id1 self.id2 = id2 self.id3 = id3 self.sp = 172 @property def crc(self): crc = sum([ self.st, self.mode, self.ctr, self.res, self.ch, self.cmd, self.fmt, self.d0, self.d1, self.d2, self.d3, self.id0, self.id1, self.id2, self.id3, ]) return crc if crc &lt; 256 else divmod(crc, 256)[1] def to_bytes(self): return bytearray([ self.st, self.mode, self.ctr, self.res, self.ch, self.cmd, self.fmt, self.d0, self.d1, self.d2, self.d3, self.id0, self.id1, self.id2, self.id3, self.crc, self.sp ]) class NooliteSerial: def __init__(self, tty_name): self.tty = self._get_tty(tty_name) def on(self, ch): self.send_command(ch, 2, 2, 0) pass def off(self, ch): self.send_command(ch, 0, 2, 0) pass def status(self, ch): m = self.send_command(ch, 128, 2, 0) pass def send_command(self, ch, cmd, mode=0, ctr=0, res=0, fmt=0, d0=0, d1=0, d2=0, d3=0, id0=0, id1=0, id2=0, id3=0): command = NooLiteCommand(ch, cmd, mode, ctr, res, fmt, d0, d1, d2, d3, id0, id1, id2, id3) self.tty.write(command.to_bytes()) while True: bytes_response = list(self.tty.read(117)) if bytes_response: all_responses.append(bytes_response) if bytes_response[3] == 0: break else: break return all_responses @staticmethod def _get_tty(tty_name): serial_port = serial.Serial(tty_name, timeout=0.1) if not serial_port.is_open: serial_port.open() serial_port.flushInput() serial_port.flushOutput() return serial_port noo_serial = NooliteSerial('/dev/ttyUSB0') #ch, cmd, mode, ctr #noo_serial.send_command(1, 15, 2, 0) #    1 #noo_serial.send_command(0, 4, 2, 0) #switch #noo_serial.send_command(0, 2, 2, 0) #turn on #noo_serial.send_command(0, 3, 2, 0) #   #noo_serial.send_command(0, 0, 2, 0) #turn off #noo_serial.send_command(0, 15, 2, 0) #  #noo_serial.send_command(0, 128, 2, 0,0,1) #CMD_Read_State + fmt = 1 #noo_serial.on(0) #noo_serial.status(0) #noo_serial.off(0) #noo_serial.off(0) #noo_serial.status(0) #noo_serial.send_command(ch=0,ctr=8, cmd=4, id0=0,id1=0,id2=48,id3=114) #switch noolite ID 0.0.48.114</span></span></code> </pre> <br></div></div><br>  En utilisant les fonctions n√©cessaires au bon moment, nous pouvons contr√¥ler les blocs noolite et recevoir le statut des nouveaux.  Comme j'ai 99% de ces anciens blocs, il me reste √† utiliser l'ancien sch√©ma d'√©criture de 1 bloc sur 1 canal, en tenant compte du fait que l'adaptateur USB prend en charge les anciens et les nouveaux blocs (merci aux d√©veloppeurs pour la compatibilit√© sans danse du tambourin).  √Ä la vol√©e, vous pouvez g√©rer et recevoir l'√©tat des nouveaux blocs et g√©rer les anciens. <br><br>  Jusqu'√† r√©cemment, il n'y avait pas un seul interrupteur √† bouton-poussoir dans la maison.  J'ai d√ª ajouter de la lumi√®re au garage (je suis juste arriv√© pour mettre les choses en ordre: D), et aussi un interrupteur est apparu dans le r√©tro-√©clairage du miroir de maquillage.  Sachant qu'il existe <b>une unit√© d'alimentation SB-1-150</b> , j'ai r√©gl√© l'interrupteur normal et connect√© l'unit√©.  Le r√©tro-√©clairage du miroir √©tait constitu√© d'une plaque blanche, ampoules 3w 4000 K, lumi√®re blanche.  Le SB-1-150 est unique en ce qu'il peut √™tre plac√© dans la bo√Æte de l'interrupteur mural (interrupteur) dans le contexte du circuit existant et en connectant un interrupteur √† bouton-poussoir √† l'unit√© elle-m√™me. <br><br><div class="spoiler">  <b class="spoiler_title">Exactement ce dont mes filles ont besoin pour le maquillage :)</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/geektimes/post_images/63d/97d/4ff/63d97d4ff9ed73ee3fe00abba6a94fed.png" alt="image"><br></div></div><br><h2>  Caillou </h2><br>  Lorsque j'ai commenc√© √† m'impliquer dans l'automatisation, l'un des principaux facteurs √©tait: une gestion comp√©tente et pratique. <br><br>  Il semble commode de contr√¥ler √† partir d'un smartphone, mais ... et ce n'est pas pratique de charger l'application √† chaque fois, o√π il y a de petits boutons inconfortables, de la publicit√© pour gauchers, ou jusqu'√† ce que vous arriviez √† appuyer sur le bouton ... tout d√©sir dispara√Æt.  La commande vocale dispara√Æt, car elle est √©galement g√™nante et √©trange :) - laissez-la rester dans les intrigues des films de science-fiction. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/5ea/226/ba7/5ea226ba78a2e6fb2e61a63458aa88af.png" alt="image"><br><br>  Et j'ai r√©solu le probl√®me d'une autre mani√®re - gr√¢ce √† une montre-bracelet, qui, CONSTAMMENT avec moi, ne prend pas de place et combine toutes les commodit√©s, la mobilit√© et la vitesse de contr√¥le.  G√©n√©ralement - Pebble est vivant!  Mais le plus important est que, pour l'horloge, vous pouvez toujours √©crire des applications - vos propres applications, pour g√©rer vos syst√®mes d'automatisation.  C‚Äôest en fait une bombe. <br><br><div class="spoiler">  <b class="spoiler_title">Pebble est vivant!</b> <div class="spoiler_text">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Vid√©o de contr√¥le de porte</a> <br></div></div><br>  La trag√©die de la fermeture de la soci√©t√© pebble.com (Fitbit a achet√© tous les pebble.com pour des brevets) n'a pas affect√© leurs performances et leurs performances.  R√©cemment, il y a eu une mise √† jour d'ios, android - la montre a √©t√© d√©tach√©e des services cloud de galets (en cas de cessation du support) et de l'autorisation. <br><br>  Visuellement - rien n'a chang√©, mais le service <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">reste</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cloudpebble.net</a> - WTF?  C'est une chose tr√®s utile.  Si vous pouvez √©crire du code en JS (et que vous ne souhaitez pas passer beaucoup de temps sur C ++) - veuillez vous f√©liciter √† bord :) - Cloud Pebble vous permet de "lancer" rapidement l'application.  C'est comme √ßa que je l'ai fait.  Bien s√ªr, les performances de JS ne doivent pas √™tre compar√©es √† C ++ (c'est sacr√©), √™tre enlis√©es.  oui! <br><br><div class="spoiler">  <b class="spoiler_title">Code JS Pebble Cloud pour travailler avec l'API</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> UI = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ajax = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'ajax'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> noolite = [ [<span class="hljs-string"><span class="hljs-string">''</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/mqtt/gate/slidegate'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/gate.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">''</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/mqtt/gate/garage'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/door.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">'!'</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/103'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/100'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/system2.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">'1  '</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">'2  '</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 1'</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/101'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 2'</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/102'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">''</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">''</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/system/1'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/system1.png'</span></span>], ]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> water = [ [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/poliv/1'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/poliv/2'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 1 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/20'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 2 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/21'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 3 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/22'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 4 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/23'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 5 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/poliv/switch/5'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 6 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/poliv/switch/6'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 7 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/poliv/switch/7'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 8 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/poliv/switch/8'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 9 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/admin/poliv/switch/9'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/water.png'</span></span>], ]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> light1 = [ [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/6'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/0'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">'  '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/1'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">'  '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/7'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">'  '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/8'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 1 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/2'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 1 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/3'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 1 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/4'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/5'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/9'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], ]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> light2 = [ [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/15'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/16'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 2 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/10'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 2 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/11'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' 2 '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/12'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">' '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/13'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], [<span class="hljs-string"><span class="hljs-string">'  '</span></span>,<span class="hljs-string"><span class="hljs-string">'http://your-home-server-ip-address:1183/noolite/switch/14'</span></span>, <span class="hljs-string"><span class="hljs-string">'images/light.png'</span></span>], ]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> menu = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UI.Menu({ <span class="hljs-attr"><span class="hljs-attr">sections</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">items</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> }] }] }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> menu1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UI.Menu({ <span class="hljs-attr"><span class="hljs-attr">sections</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">items</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> }] }] }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> menu2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UI.Menu({ <span class="hljs-attr"><span class="hljs-attr">sections</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">items</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> }] }] }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> menu3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UI.Menu({ <span class="hljs-attr"><span class="hljs-attr">sections</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">items</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> }] }] }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> items = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;noolite.length; i++) { items[i] = { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: noolite[i][<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: noolite[i][<span class="hljs-number"><span class="hljs-number">2</span></span>] }; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> items1 = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;light1.length; i++) { items1[i] = { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: light1[i][<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: light1[i][<span class="hljs-number"><span class="hljs-number">2</span></span>] }; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> items2 = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;light2.length; i++) { items2[i] = { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: light2[i][<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: light2[i][<span class="hljs-number"><span class="hljs-number">2</span></span>] }; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> items3 = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;water.length; i++) { items3[i] = { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: water[i][<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-attr"><span class="hljs-attr">subtitle</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: water[i][<span class="hljs-number"><span class="hljs-number">2</span></span>] }; } menu.items(<span class="hljs-number"><span class="hljs-number">0</span></span>, items); menu1.items(<span class="hljs-number"><span class="hljs-number">0</span></span>, items1); menu2.items(<span class="hljs-number"><span class="hljs-number">0</span></span>, items2); menu3.items(<span class="hljs-number"><span class="hljs-number">0</span></span>, items3); menu.show(); menu.on(<span class="hljs-string"><span class="hljs-string">'select'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.itemIndex == <span class="hljs-number"><span class="hljs-number">4</span></span>) { menu1.show(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.itemIndex == <span class="hljs-number"><span class="hljs-number">5</span></span>) { menu2.show(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.itemIndex ==<span class="hljs-number"><span class="hljs-number">8</span></span>) { menu3.show(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> url = noolite[e.itemIndex][<span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(url); ajax({ <span class="hljs-attr"><span class="hljs-attr">url</span></span>: url, <span class="hljs-attr"><span class="hljs-attr">method</span></span>: <span class="hljs-string"><span class="hljs-string">'get'</span></span> }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'switched OK'</span></span>); }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Failure! console.log('error'); } ); } }); menu1.on('select', function(e) { var url = light1[e.itemIndex][1]; console.log(url); ajax({ url: url, method: 'get' }, function(data) { console.log('switched OK'); }, function(error) { // Failure! console.log('error'); } ); }); menu2.on('select', function(e) { var url = light2[e.itemIndex][1]; console.log(url); ajax({ url: url, method: 'get' }, function(data) { console.log('switched OK'); }, function(error) { // Failure! console.log('error'); } ); }); menu3.on('select', function(e) { var url = water[e.itemIndex][1]; ajax({ url: url, method: 'get' }, function(data) { console.log('switched OK'); }, function(error) { // Failure! console.log('error'); } ); });</span></span></code> </pre><br></div></div><br>  Le code est √©crit, compil√© directement sur le site Web Pebble du cloud et, via le t√©l√©phone, t√©l√©chargeant l'application compil√©e, peut √™tre install√© sur l'horloge - en quelques secondes.  Tout est si simple que tout jeune ing√©nieur en automatisation peut le g√©rer;) <br><br>  C'est dommage ... c'est dommage que Pebble ait cess√© d'exister et pour le moment je ne vois pas d'alternative.  Pebble Time sera toujours dans nos c≈ìurs! <br><br><h2>  MQTT </h2><br>  L'ann√©e derni√®re, j'ai rencontr√© un protocole aussi merveilleux que MQTT (Historique: La premi√®re version du protocole a √©t√© d√©velopp√©e par le Dr Andy Stanford-Clark (IBM) et Arlene Nipper (Arcom) en 1999 et publi√©e sous une licence libre de droits. La sp√©cification MQTT 3.1.1 √©tait normalis√© par le consortium OASIS en 2014. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien</a> ). <br><br>  Il y a beaucoup d'informations sur le fonctionnement du protocole et ce que sont les clients ... et j'ai √©t√© tr√®s d√©√ßu qu'il n'y ait pas de vrais clients pour les applications mobiles, uniquement sur Android. <br><br>  Comprendre que le manque d'une bonne application mobile est un tr√®s gros probl√®me (trou) dans le domaine de l'IoT (beaucoup de gens disent, mais ils font tr√®s peu ....) - Moi et mon √©quipe, au travail, avons d√©cid√© de cr√©er un client pour android, ios, wp pour qu'il r√©ponde √† tous les crit√®res et soit confortable.  J'√©crirai un peu plus tard sur le client, ainsi que sur la fa√ßon dont nous nous sommes fait des amis ESP8266 + MTRF64 (Noolite) et avons pr√©par√© le firmware Nodemcu.  Ce sera g√©nial, pratique, bon march√© et beau!  Suivez l'actualit√© de l'application <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/96c/60d/e63/96c60de63c38253cccee7ddb9aad0b4b.png" alt="image"><br><br>  <s>Vous pouvez maintenant contr√¥ler l'√©clairage Noolite sans aucun serveur domestique ni adaptateur USB pour 50 √† 100 $!</s> <br><br><h2>  Sch√©ma g√©n√©ral de la domotique </h2><br>  Le sch√©ma suivant existe toujours: <br><br><blockquote>  Vid√©osurveillance: vid√©osurveillance xeoma [cam√©ra ip] <br>  Serveur sur l'unit√© centrale: nginx + gunicorn + python + mqtt broker <br>  Gestion: montre Pebble + client MQTT <br>  Modules de commande (n≈ìuds syst√®me): ESP8266 + optocoupleurs \ ds18b20, capteurs dht11 [22] </blockquote><br>  En raison du fait que j'ai vu de nombreuses commodit√©s dans le protocole MQTT, √† partir de l'architecture d'abonnement et de la communication instantan√©e avec les appareils IoT finaux, se terminant par le fait que les messages MQTT peuvent traverser le routeur sans ¬´transf√©rer¬ª aucun port l√†-bas et danser avec un tambourin.  Id√©alement!  Amuse toi bien!  Avec ferveur :) <br><br>  Tout cela m'a amen√© √† d√©centraliser le syst√®me, c'est-√†-dire √† √©viter un ¬´home korchvagen¬ª et √† passer √† de nombreux soi-disant n≈ìuds et √† utiliser un courtier MQTT cloud (il existe des courtiers MQTT gratuits, par exemple: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mqtt.ximxim.com</a> (sur le site, connectez-vous et passez pour y acc√©der). )) - puisque esp8266 r√©sout tous les probl√®mes, et cela, √† son tour, fonctionne via wifi en utilisant le protocole MQTT. <br><br>  √âtant donn√© que MQTT Buddy fournira un service de script, je ne penserai pas √† √©crire des scripts √† la maison, je vais juste les cr√©er dans une solution cloud et ce sera un v√©ritable IoT et cela fonctionnera!  Des paroles aux actes! <br><br><h2>  ESP8266 </h2><br>  Lorsque j'ai fait connaissance avec cette carte de d√©veloppement, j'ai √©t√© imm√©diatement impressionn√© par le fait que la carte est petite, il existe un support pour le langage de programmation LUA sur le firmware Nodemcu.  Ce dont vous avez besoin + module MQTT est.  Dans l'automatisation, des solutions simples et fiables sont le fondement.  Le co√ªt de 2 $ √† 5 $ pour une taxe (pour le 5√®me mod√®le imm√©diatement avec un adaptateur USB √† bord) vous permet de d√©ployer rapidement des sous-syst√®mes. <br><br>  La connexion WiFi est rapide, de nombreuses possibilit√©s.  Par exemple: portail / garage \ arrosage \ contr√¥le d'√©clairage.  J'ai 30% d'irrigation de pelouse aliment√© par le syst√®me Noolite (blocs de contact sec), les 70% restants de la carte de d√©veloppement esp8266 contr√¥l√©s via le langage LUA en utilisant le protocole MQTT. <br><br><div class="spoiler">  <b class="spoiler_title">Exemple de code LUA pour esp8266, obtention de l'ip et appel du fichier de travail avec MQTT</b> <div class="spoiler_text"><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--load credentials dofile("credentials.lua") function init(name, pass) wifi.setmode(wifi.STATION) wifi.sta.config(name, pass) wifi.sta.connect() tmr.alarm(0, 1000, 1, function() if wifi.sta.getip()== nil then print("IP unavaiable, Waiting...") else tmr.stop(0) print("Config done, IP is "..wifi.sta.getip()) print("mac : "..wifi.sta.getmac()) dofile("mqtt.lua") end end) end print("START!") init(SSID,PASSWORD)</span></span></code> </pre><br><br>  - fichier mqtt.lua <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> door = <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-comment"><span class="hljs-comment">-- gpio13 local window = 6 -- gpio12 local cooler = 5 --gpio14 local led = 4 --GPIO2 board led! LOW == turn ON local light1 = 8 --gpio 15 local light2 = 1 --gpio 5 local light3 = 2 -- gpio 4 function register_myself() m:subscribe("mqtt_buddy/#",0,function(conn) print ("subscribed to Xim mqtt.ximxim.com server") end) end m = mqtt.Client("MQTT_BUDDY_SHOW_ROOM", 120, MQTT_USER, MQTT_PASS) m:on("connect", function(client) print ("connected to Xim mqtt.ximxim.com server") end) m:on("offline", function(client) reconnect_mqtt() end) m:on("message", function(client, topic, data) --print(topic.." data:"..data) if topic == "mqtt_buddy/window" and data == "1" then print "open-close window..." gpio.write(window, gpio.HIGH) gpio.write(led, gpio.LOW) tmr.alarm(1, 1000, tmr.ALARM_SINGLE, function() gpio.write(window, gpio.LOW) gpio.write(led, gpio.HIGH) print "command to close\open window is sent!" end) elseif topic == "mqtt_buddy/door" and data == "1" then print "open-close door..." gpio.write(door, gpio.HIGH) gpio.write(led, gpio.LOW) tmr.alarm(2, 1000, tmr.ALARM_SINGLE, function() gpio.write(door, gpio.LOW) gpio.write(led, gpio.HIGH) print "command to close\open door is sent!" end) elseif topic == "mqtt_buddy/cooler" then if data == "1" then print "switch on fan..." gpio.write(cooler, gpio.HIGH) gpio.write(led, gpio.LOW) else print "switch off fan..." gpio.write(cooler, gpio.LOW) gpio.write(led, gpio.HIGH) end elseif topic == "mqtt_buddy/light1" then if data == "1" then print "switch light1 ON..." gpio.write(light1, gpio.HIGH) gpio.write(led, gpio.LOW) else print "switch light1 off..." gpio.write(light1, gpio.LOW) gpio.write(led, gpio.HIGH) end elseif topic == "mqtt_buddy/light2" then if data == "1" then print "switch light2 ON..." gpio.write(light2, gpio.HIGH) gpio.write(led, gpio.LOW) else print "switch light2 off..." gpio.write(light2, gpio.LOW) gpio.write(led, gpio.HIGH) end elseif topic == "mqtt_buddy/light3" then if data == "1" then print "switch light3 ON..." gpio.write(light3, gpio.HIGH) gpio.write(led, gpio.LOW) else print "switch light3 off..." gpio.write(light3, gpio.LOW) gpio.write(led, gpio.HIGH) end end end) m:connect(MQTT_SERVER, MQTT_SERVER_PORT, 0, function(conn) register_myself() end)</span></span></code> </pre><br></div></div><br><h3>  Le probl√®me </h3><br>  S'agissant d'une vaste communaut√© de <b>personnes qui r√©fl√©chissent</b> , je voulais aborder un sujet extr√™mement important, ou plut√¥t le probl√®me que je veux r√©soudre, mais il n'y a pas assez de temps pour des recherches / connaissances plus approfondies. <br><br>  L'essentiel: avec la d√©centralisation, la vid√©osurveillance demeure, ce qui n√©cessite d'une mani√®re ou d'une autre une machine h√¥te pour transf√©rer (minimum) les images source vers un serveur de surveillance vid√©o (par exemple ivideon) ou m√™me pour traiter la vid√©o sur une machine domestique, comme xeoma (bien qu'ils aient √©galement un cloud) - d'une mani√®re ou d'une autre - vous devez ¬´AVANCE¬ª les flux vid√©o, les images pour la puissance de calcul finale (solutions cloud) - ou vice versa - pour simplifier la diffusion en continu. <br><br>  On pense √† recevoir des images sources de la cam√©ra (il y a aussi un probl√®me ici, toutes les cam√©ras n'ont pas d'URL pour recevoir une image de la cam√©ra et il est g√©n√©ralement difficile de savoir comment les autres reconna√Ætront cette URL ....) et √† transmettre au canal MQTT o√π les donn√©es binaires sont prises en charge (que il y a une image qui peut √™tre facilement transmise via le protocole mqtt sous forme binaire). <br><br>  Peut-√™tre que quelqu'un a d√©j√† essay√© de mettre en ≈ìuvre de telles choses = ESP8266 + webcam Web IP? <br>  R√©pondez s'il vous pla√Æt (bogdanovich.alex [@] gmail.com).  Je vous en serai tr√®s reconnaissant! <br><br>  Lors de la mise en ≈ìuvre de probros, la question du serveur domestique dispara√Ætra.  Pourquoi?  Parce qu'il mange de l'√©lectricit√© et chauffe ma fournaise :) <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/148/bfb/eab/148bfbeab6e37921aa198344af6564de.png" alt="image"><br><br>  Bonne journ√©e et bonne humeur! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr403273/">https://habr.com/ru/post/fr403273/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr403255/index.html">Le premier bloqueur de publicit√©s ¬´perceptuel¬ª est cr√©√©, qui ne d√©pend pas de la mise en page</a></li>
<li><a href="../fr403263/index.html">Comment le travail est organis√© dans le centre de service "NAG"</a></li>
<li><a href="../fr403265/index.html">L'industrie h√¥teli√®re d√©clare la guerre √† Airbnb</a></li>
<li><a href="../fr403267/index.html">Aux syst√®mes sur puce via FPGA: semaine de micro√©lectronique num√©rique √† Kiev - 24-29 avril 2017</a></li>
<li><a href="../fr403271/index.html">Copter Shot</a></li>
<li><a href="../fr403275/index.html">La recherche de l'antimati√®re manquante dans l'univers reste dans un √©tat d'incertitude ennuyeux</a></li>
<li><a href="../fr403277/index.html">Ces femmes scientifiques indiennes ont envoy√© une fus√©e sur Mars pour un montant inf√©rieur au budget du film "Martien"</a></li>
<li><a href="../fr403279/index.html">Nouvelles RFID: les ventes de manteaux de fourrure √©br√©ch√©s ont franchi ... les plafonds</a></li>
<li><a href="../fr403281/index.html">Windows 10 supprimera les applications d'arri√®re-plan</a></li>
<li><a href="../fr403283/index.html">Imprimante 3D Funtastique EVO v1.0: premi√®re introduction</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>