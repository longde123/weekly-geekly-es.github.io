<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòú üï∫üèø ü§Æ An√°lisis del tr√°fico de red de una aplicaci√≥n m√≥vil en iOS. Parte 1 - proxies üë®‚Äç‚úàÔ∏è üéÅ üó£Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hay situaciones en las que, al desarrollar o probar una aplicaci√≥n m√≥vil, se hace necesario ver el tr√°fico de red de la aplicaci√≥n. ¬øSigue viendo el t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>An√°lisis del tr√°fico de red de una aplicaci√≥n m√≥vil en iOS. Parte 1 - proxies</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421493/"><p><img src="https://habrastorage.org/webt/o6/nl/fw/o6nlfwhw_nzwxjhjdcbp6htqkf8.jpeg"></p><br><p>  Hay situaciones en las que, al desarrollar o probar una aplicaci√≥n m√≥vil, se hace necesario ver el tr√°fico de red de la aplicaci√≥n.  ¬øSigue viendo el tr√°fico de aplicaciones m√≥viles mostr√°ndolo en la consola de su IDE?  Hay herramientas m√°s efectivas para esta tarea, por ejemplo, proxies.  En este art√≠culo, analizaremos los proxies HTTP (S) m√°s populares, aprenderemos c√≥mo usarlos en el desarrollo de iOS y los compararemos de acuerdo con varios criterios. </p><br><p>  Adem√°s, hablaremos sobre el uso de proxies en el desarrollo de iOS, pero muchas cosas tambi√©n son aplicables en el desarrollo de Android. </p><br><p>  Precauci√≥n, debajo del corte muchas fotos. </p><a name="habracut"></a><br><p>  Las herramientas para analizar el tr√°fico de red de una aplicaci√≥n m√≥vil se pueden dividir en: </p><br><ol><li>  No requiere integraci√≥n en el c√≥digo fuente de la aplicaci√≥n bajo prueba - proxy: <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mitmproxi</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Carlos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Suite de eructos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Owasp zap</a> </li></ul></li><li>  Requerir integraci√≥n en el c√≥digo fuente de la aplicaci√≥n bajo prueba.  Estos incluyen principalmente marcos de depuraci√≥n: <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wormholy</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Netfox</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dotzu</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Flex</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Depurador de pony</a> </li></ul></li></ol><br><p>  Esta es la primera parte del art√≠culo en el que consideraremos el uso de proxies y los compararemos de acuerdo con varios criterios.  En la segunda parte del art√≠culo, revisaremos a fondo los marcos para la depuraci√≥n. </p><br><h2 id="mitmproxy">  Mitmproxi </h2><br><p><img src="https://habrastorage.org/webt/6s/x4/yx/6sx4yxmpa89qi5k_dizxgwkwda8.png"></p><br><p>  Mitmproxy es un proxy HTTP (S) gratuito y de c√≥digo abierto (~ 12,000 estrellas en github), que consiste en Mitmproxy, una utilidad de consola para el proxy de tr√°fico, mitmdump, una utilidad de consola adicional que presenta una funcionalidad similar a tcpdump, pero para HTTP (S) tr√°fico, as√≠ como mitmweb, la interfaz web para Mitmproxy. </p><br><p>  Puede instalar Mitmproxy usando Homebrew: </p><br><p><code>brew install mitmproxy</code> </p> <br><p>  O descargue la versi√≥n deseada de la p√°gina de lanzamiento del sitio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">web</a> oficial. </p><br><p>  Despu√©s de una instalaci√≥n exitosa, para analizar el tr√°fico HTTP desde un simulador o dispositivo, debe especificar un proxy en la configuraci√≥n de la red. </p><br><p>  Para el simulador, debe activar los proxies HTTP y HTTPS en la configuraci√≥n de red de Mac OS (Preferencias del sistema -&gt; Red -&gt; Avanzado -&gt; Proxies): </p><br><p><img src="https://habrastorage.org/webt/z5/1r/qb/z51rqb8cffwbfj6md_rq_0dvzbo.png"></p><br><p>  Una peque√±a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">secuencia</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">comandos bash</a> para la activaci√≥n / desactivaci√≥n r√°pida de un proxy en la configuraci√≥n de red para Wi-Fi en una Mac.  (Una vez que registramos la IP y el puerto proxy en la configuraci√≥n y luego usamos el comando <code>proxy off</code> o <code>proxy off</code> desde la consola). </p><br><p>  Para interceptar el tr√°fico de un dispositivo real, debe especificar el proxy en la configuraci√≥n de la red iOS, mientras que la direcci√≥n IP de la computadora que ejecuta Mitmproxy se establece como la direcci√≥n IP del proxy y el puerto 8080. (La direcci√≥n IP de la computadora se puede ver en Configuraci√≥n&gt; Red) </p><br><p><img src="https://habrastorage.org/webt/hp/pq/7m/hppq7mqcuffu47f67lqkqmhl04w.png"></p><br><p>  En esta etapa, ya podemos interceptar el tr√°fico HTTP, pero para interceptar el tr√°fico HTTPS, debe instalar certificados Mitmproxy en el simulador / dispositivo. <br>  Para hacer esto, en el simulador, haga lo siguiente (para un dispositivo real, los pasos son similares): </p><br><ul><li>  Aseg√∫rese de que Mitmproxy se est√© ejecutando y que el proxy est√© activado y registrado en la configuraci√≥n de red (para el simulador - configuraci√≥n de macOS, para el dispositivo - configuraci√≥n de iOS), como se describi√≥ anteriormente.  Ahora vaya al navegador en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mitm.it</a> y haga clic en el icono de Apple para descargar el certificado Mitmproxy.  Aparecer√° una alerta con un mensaje de que este sitio web est√° intentando abrir la configuraci√≥n de iOS: haga clic en Permitir. </li></ul><br><p><img src="https://habrastorage.org/webt/np/uc/xq/npucxqnvc-k-wporeihhr7gvwvu.png"></p><br><ul><li>  Luego instale el certificado Mitmproxy. </li></ul><br><p><img src="https://habrastorage.org/webt/ll/m5/x9/llm5x9dipaezxkmadswh-d-fz1m.png"></p><br><ul><li>  Y el √∫ltimo toque: para iOS versi√≥n 10.3 y superior, debe habilitar el acceso completo al certificado ra√≠z de Mitmproxy.  Para hacer esto, vaya a Configuraci√≥n&gt; General&gt; Acerca de&gt; Configuraci√≥n de confianza de certificado y active el acceso completo para el certificado Mitmproxy. </li></ul><br><p><img src="https://habrastorage.org/webt/t4/bx/pw/t4bxpwt1b4uqhplj8nlaygmv4hi.png"></p><br><p>  Ahora podemos analizar el tr√°fico HTTPS desde el simulador.  Queda por agregar una peque√±a aclaraci√≥n: el certificado se instala para un simulador espec√≠fico, es decir, si lo hicimos solo para el simulador de iPhone X, entonces en el simulador de iPhone 8 debemos hacer lo mismo para que el proxy intercepte el tr√°fico HTTPS.  Para interceptar el tr√°fico HTTPS desde un dispositivo real, todos los pasos son similares, lo principal es que est√° conectado a la misma red local que una computadora con Mitmproxy. </p><br><p>  Despu√©s de eso, puede ejecutar mitmproxy desde la consola <del>  y sentirse como un hacker </del>  o cliente web mitmweb. </p><br><p>  El cliente de la consola nos encuentra con una interfaz de tubo (para los amantes de la GUI, incluso hay soporte para el mouse), donde se muestran todas las solicitudes interceptadas. </p><br><p><img src="https://habrastorage.org/webt/ev/9w/al/ev9walbksj5rs9-xyfgro7c-irw.png"></p><br><p>  Puede ver informaci√≥n detallada para cada solicitud (par√°metros de solicitud, encabezados, respuesta, etc.) </p><br><p><img src="https://habrastorage.org/webt/4g/xe/nd/4gxendtfo1pmlrbyesmjwkkck5a.png"></p><br><p>  Mitmproxy tiene un poderoso sistema de filtrado de consultas con soporte para expresiones regulares.  Puede filtrar solicitudes por c√≥digo, cuerpo de solicitud / respuesta, encabezados, dominio, etc.  Llame a ayuda sobre accesos directos disponibles y expresiones de filtro haciendo clic <code>?</code>  .  Por ejemplo, para borrar la lista de consultas para la sesi√≥n actual, simplemente puede presionar <code>z</code> , y para filtrar la lista de consultas por URL en la que est√° la palabra "manzana", debe presionar <code>f</code> y escribir una expresi√≥n de filtro por URL <code>~u apple</code> , que toma una expresi√≥n regular. </p><br><p><img src="https://habrastorage.org/webt/rx/ta/xl/rxtaxlzj7_0g8ulpleurl9jdgma.png"></p><br><p>  Los fan√°ticos de Vim tambi√©n estar√°n encantados con el soporte de hjkl.  Casi nos olvidamos de un atajo muy importante <code>q</code> : funciona como un bot√≥n "atr√°s" cuando se mueve entre pantallas, y en la pantalla principal con una lista de consultas cuando hace clic en este atajo, Mitmproxy le ofrecer√° salir del programa. <br>  A pesar de la interfaz de la consola, usar Mitmproxy es un placer gracias a atajos convenientes y controles intuitivos simples.  A continuaci√≥n se muestra una peque√±a tabla con los principales atajos. </p><br><table><thead><tr><th>  Atajo </th><th>  Descripci√≥n </th></tr></thead><tbody><tr><td>  ? </td><td>  Ayuda </td></tr><tr><td>  z </td><td>  Borrar la lista de la sesi√≥n actual </td></tr><tr><td>  f </td><td>  Filtrado de sesi√≥n </td></tr><tr><td>  q </td><td>  Atr√°s (salir en la pantalla principal) </td></tr><tr><td>  d </td><td>  Eliminar solicitud de la lista de sesiones </td></tr><tr><td>  r </td><td>  Repetir solicitud </td></tr><tr><td>  e </td><td>  Guardar solicitud para archivar </td></tr><tr><td>  g </td><td>  Lista de sesiones principales </td></tr><tr><td>  G </td><td>  Al final de la lista de sesiones. </td></tr></tbody></table><br><p>  Si todav√≠a eres un ardiente oponente de la consola y reconoces solo las aplicaciones GUI, mitmweb tiene prisa por ayudarnos, por el momento lo lanzaremos tambi√©n desde la consola, luego podremos hacer un acceso directo al escritorio. </p><br><p><img src="https://habrastorage.org/webt/ez/wd/s1/ezwds15jyp-by5b3ic_d-hbo_3g.png"></p><br><p>  El cliente web todav√≠a est√° en pruebas beta y contiene solo la funcionalidad mitmproxy b√°sica (suficiente para el 95% de las tareas), que se complementa gradualmente con nuevas caracter√≠sticas con cada nueva versi√≥n, pero a pesar de esto, ahora se puede usar y es muy conveniente.  Algunos accesos directos de la versi√≥n de consola tambi√©n funcionan aqu√≠, por ejemplo, para borrar la lista de solicitudes para la sesi√≥n actual, simplemente presione <code>z</code> .  Tambi√©n puede filtrar las solicitudes interceptadas a trav√©s del campo "Buscar", como lo hicimos en la aplicaci√≥n de consola cuando aplicamos el filtro de <code>~u apple</code> . </p><br><p><img src="https://habrastorage.org/webt/sr/4z/nt/sr4zntpy7kccnhr_-thxh4-t_uy.png"></p><br><p>  Mitmproxy afirma que admite el est√°ndar Websocket, pero desafortunadamente la visualizaci√≥n de los marcos Websocket en la interfaz de usuario a√∫n no se ha implementado y, seg√∫n los desarrolladores, la funcionalidad de Websocket solo est√° disponible para la utilidad mitmdump. </p><br><h2 id="charles">  Carlos </h2><br><p><img src="https://habrastorage.org/webt/w0/hu/hq/w0huhqhik2xqsosv682wnqzdski.png"></p><br><p>  Charles es quiz√°s el proxy HTTP (S) m√°s popular para MacOS, su √∫nico inconveniente es que se paga, al momento de escribir, la licencia cuesta $ 50.  Sin embargo, hay una versi√≥n de prueba: funciona durante 30 minutos, luego la aplicaci√≥n debe reiniciarse y se pierde todo el historial de consultas.  Tambi√©n hay retrasos de inicio de cinco segundos. </p><br><p>  Despu√©s de la instalaci√≥n y el primer inicio, Charles le pedir√° que otorgue acceso para configurar autom√°ticamente el proxy del sistema, seleccione "Conceder privilegios" o cambie la configuraci√≥n del proxy del sistema cada vez de forma manual.  Por lo tanto, el propio Charles cambiar√° y activar√° la configuraci√≥n del proxy del sistema cuando se est√© ejecutando; esto es conveniente al depurar en el simulador, pero en un dispositivo real tendr√° que establecer manualmente la configuraci√≥n del servidor proxy para la red, ya que el servidor proxy especifica la direcci√≥n IP de la computadora en ejecuci√≥n Charles, como puerto - 8888. </p><br><p>  En esta etapa, solo podemos ver el tr√°fico HTTP, para analizar el tr√°fico HTTPS desde un simulador o un dispositivo real, necesitamos instalar un certificado Charles en √©l, el procedimiento es similar a la instalaci√≥n de un certificado Mitmproxy.  Aseg√∫rese de que el proxy est√© ejecut√°ndose y activado en la configuraci√≥n de red de iOS (para un dispositivo real) o en la configuraci√≥n de red de macOS (para un simulador).  Luego iremos al simulador / dispositivo en el navegador en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">chls.pro/ssl</a> , aparecer√° una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">alerta</a> con un mensaje de que este sitio web est√° intentando abrir la configuraci√≥n de iOS: seleccione Permitir.  Luego, seleccione Instalar para instalar el certificado.  Despu√©s de instalar el certificado para iOS versi√≥n 10.3 y superior, debe habilitar el acceso completo al certificado ra√≠z de Charles.  Para hacer esto, vaya a Configuraci√≥n&gt; General&gt; Acerca de&gt; Configuraci√≥n de confianza de certificado y active el acceso completo para el certificado de Charles. </p><br><p><img src="https://habrastorage.org/webt/ue/vs/kw/uevskwgkqccit0f8xylhu5c9di8.png"></p><br><p>  Por √∫ltimo, debe configurar el proxy SSL en Charles, por defecto no descifra el tr√°fico HTTPS, incluso si ha instalado todos los certificados necesarios.  Para activar el proxy SSL, vaya a Proxy&gt; Ajustes de proxy SSL y active el proxy SSL, si est√° deshabilitado, entonces tenemos dos opciones: habilitar el proxy SSL para todos los dominios o solo para dominios espec√≠ficos.  Para habilitar el proxy SSL para todos los dominios, debe agregar una ubicaci√≥n comod√≠n: haga clic en el bot√≥n Agregar y especifique <code>*</code> en todos los campos, para que la configuraci√≥n de SSL se vea as√≠. </p><br><p><img src="https://habrastorage.org/webt/oz/pm/0-/ozpm0-3wqfnzy7pdrntt0_zud7g.png"></p><br><p>  Para habilitar el proxy SSl solo para dominios espec√≠ficos, debe agregarlos a la lista y asegurarse de que la ubicaci√≥n de comodines est√© deshabilitada.  En este caso, Charles seguir√° interceptando todo el tr√°fico, pero las solicitudes HTTPS para dominios que no est√©n en la lista no se descifrar√°n. </p><br><p>  Al usar Charles, es conveniente usar filtros de intercepci√≥n de tr√°fico, que se pueden configurar en el men√∫ Proxy&gt; Configuraci√≥n de grabaci√≥n: puede especificar el protocolo, URL, puerto. </p><br><p><img src="https://habrastorage.org/webt/tn/0g/u1/tn0gu1oxzekxkhhiu1dvjryfsb0.png"></p><br><p>  Ahora tenemos la capacidad de ver el tr√°fico HTTPS. </p><br><p><img src="https://habrastorage.org/webt/id/4e/7m/id4e7mvkrp3jhioecejc4fpeb0w.png"></p><br><p>  Charles tambi√©n admite el protocolo Websocket y muestra mensajes al estilo de iMessage, parece conveniente. </p><br><p><img src="https://habrastorage.org/webt/na/zj/2d/nazj2depjv-5syvqdksal4o-w70.png"></p><br><p>  El primer proxy de su tipo, Charles para iOS, merece una menci√≥n especial: la versi√≥n m√≥vil de Charles, el precio en la tienda de aplicaciones en el momento de la escritura es de $ 9.  La aplicaci√≥n contiene la funcionalidad b√°sica de la versi√≥n de escritorio: proxy del tr√°fico HTTP (S), visualizaci√≥n del contenido de solicitudes / respuestas y configuraci√≥n autom√°tica conveniente de la configuraci√≥n de proxy para una red Wi-Fi. </p><br><p><img src="https://habrastorage.org/webt/f5/fj/pf/f5fjpfgfyd7egnkrxaft3q1bfbg.png"></p><br><h2 id="burp-suite-community-edition">  Burp Suite (Edici√≥n comunitaria) </h2><br><p><img src="https://habrastorage.org/webt/oc/5v/ee/oc5veeejxf4avf8cqxx76rduzxc.jpeg"></p><br><p>  Burp Suite es un cuchillo suizo de pentesters y hackers, que contiene una cantidad indecente de herramientas y funcionalidades.  Uno de los m√≥dulos en Burp Suite es un proxy, que usaremos para analizar el tr√°fico HTTP (S).  Hay dos versiones de la aplicaci√≥n: Professional y Community Edition.  La versi√≥n comunitaria es gratuita, no tiene un esc√°ner de vulnerabilidades y hay un l√≠mite en el n√∫mero de solicitudes por unidad de tiempo, pero a pesar de esto, la versi√≥n gratuita de la aplicaci√≥n es una herramienta de prueba completa. </p><br><p>  Despu√©s de iniciar la aplicaci√≥n, debe agregar y activar el proxy yendo a Proxy&gt; Opciones. </p><br><p><img src="https://habrastorage.org/webt/4b/du/pa/4bdupa1_viddbv4whpishs0tbdy.png"></p><br><p>  Luego debe asegurarse de que el interceptor de solicitud de intercepci√≥n est√© apagado, de lo contrario, interceptar√° las solicitudes y las retendr√° hasta que le diga qu√© hacer con esta solicitud: cancelarla o reenviarla al servidor.  Por lo tanto, ap√°guelo, ahora no lo necesitamos. </p><br><p><img src="https://habrastorage.org/webt/p9/5w/i5/p95wi5sujsos-mmqxniwkliohsq.png"></p><br><p>  A continuaci√≥n, debe instalar el certificado Burp Suite en el simulador / dispositivo, este procedimiento ya deber√≠a ser muy familiar para nosotros despu√©s de instalar los certificados Mitmproxy y Charles.  Lanzamos Burp Suite, y no olvidemos activar el proxy en la configuraci√≥n de red de MacOS para el simulador o en iOS para el dispositivo real (consulte la secci√≥n Mitmproxy para saber c√≥mo hacerlo), especifique la direcci√≥n IP de la computadora que ejecuta Burp Suite como servidor proxy, como el puerto - 8080. Luego vamos al navegador en el simulador e ingresamos la direcci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http: // burp</a> .  Luego, haga clic en el bot√≥n en el sitio "Certificado CA" y descargue el certificado. </p><br><p><img src="https://habrastorage.org/webt/ks/28/fc/ks28fcpuxf8iig_uaqfzg0ojboe.png"></p><br><p>  Luego instale el certificado.  Despu√©s de instalar el certificado para iOS versi√≥n 10.3 y superior, debe habilitar el acceso completo al certificado ra√≠z de Burp Suite.  Para hacer esto, vaya a Configuraci√≥n&gt; General&gt; Acerca de&gt; Configuraci√≥n de confianza de certificado y active el acceso completo para el certificado de Burp Suite. </p><br><p><img src="https://habrastorage.org/webt/v6/on/pc/v6onpcizqsfe13g508btt_dofhm.png"></p><br><p>  Al ir a la pesta√±a Proxy -&gt; Historial de HTTP, puede ver el tr√°fico HTTP (S) desde una aplicaci√≥n m√≥vil.  Vale la pena se√±alar que la desventaja aqu√≠ es la falta de formato JSON en el cuerpo de la solicitud / respuesta. </p><br><p><img src="https://habrastorage.org/webt/-s/dw/qa/-sdwqaag2hg3vl18quhyj5t_rks.png"></p><br><p>  El problema con el formato JSON se puede resolver instalando el complemento <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">JSON Beautifier</a> .  Para instalar, vaya a la pesta√±a Extender&gt; BApp Store, busque el JSON Beautifier en la lista de complementos y haga clic en instalar. </p><br><p><img src="https://habrastorage.org/webt/yy/qy/j9/yyqyj9k2xw5lw_iicucpmkl5mkq.png"></p><br><p>  Ahora hay una pesta√±a adicional de JSON Beautifier con un hermoso JSON. </p><br><p><img src="https://habrastorage.org/webt/ov/ef/-d/ovef-dcb03s1alol8ftnuxk8gio.png"></p><br><p>  Burp Suite es compatible con el protocolo Websocket.  Los mensajes de Websocket se pueden encontrar en la pesta√±a especial Proxy&gt; Historial de WebSockets. </p><br><p><img src="https://habrastorage.org/webt/f3/dd/f6/f3ddf6qoeyyrvhl4africgba3dq.png"></p><br><h2 id="owasp-zap">  OWASP ZAP </h2><br><p><img src="https://habrastorage.org/webt/qk/er/of/qkerofsyh6pdb3tvzo7i5kvnz0m.jpeg"></p><br><p>  Owasp ZAP es una creaci√≥n de la comunidad de ciberseguridad mundialmente famosa Owasp, adem√°s, el proxy es de c√≥digo abierto.  Owasp ZAP a menudo se compara con Burp Suite, pero este √∫ltimo es inferior en popularidad.  Owasp ZAP es completamente gratuito, no hay versiones PRO en comparaci√≥n con Burp Suite. </p><br><p>  Despu√©s de iniciar la aplicaci√≥n, debe verificar la configuraci√≥n del proxy Preferencias&gt; Proxies locales, la configuraci√≥n predeterminada deber√≠a tener este aspecto. </p><br><p><img src="https://habrastorage.org/webt/zf/fw/2m/zffw2mzk8ut9ewbx97lowp4rzky.png"></p><br><p>  Luego vaya a Preferencias&gt; Certificados SSL din√°micos para exportar el certificado SSL.  Haga clic en el bot√≥n Guardar y guarde el certificado, por ejemplo, en el escritorio. </p><br><p><img src="https://habrastorage.org/webt/fu/jx/xj/fujxxj5oamjqkvitcmsykkxy8oy.png"></p><br><p>  A continuaci√≥n, simplemente arrastre el archivo del certificado al simulador y se abrir√° una ventana que ofrece instalar el certificado, estamos de acuerdo y lo instalamos.  Despu√©s de instalar el certificado para iOS versi√≥n 10.3 y superior, debe habilitar el acceso completo al certificado ra√≠z OWASP ZAP.  Para hacer esto, vaya a Configuraci√≥n&gt; General&gt; Acerca de&gt; Configuraci√≥n de confianza de certificado y active el acceso completo para el certificado ZAP de OWASP. </p><br><p><img src="https://habrastorage.org/webt/4v/zv/eh/4vzveheku3uhmvagodbkewduifg.png"></p><br><p>  Ahora tenemos la capacidad de ver el tr√°fico HTTPS.  JSON, desafortunadamente, no tiene un formato hermoso aqu√≠ y hasta ahora no hemos podido solucionar esta situaci√≥n, en casos extremos, puede usar un formateador JSON de terceros, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este</a> . </p><br><p><img src="https://habrastorage.org/webt/4g/ux/jd/4guxjdtpkb3xuo-tibk7u6hr5-8.png"></p><br><p>  OWASP ZAP es compatible con el protocolo Websocket.  Los mensajes de Websocket se pueden encontrar en una pesta√±a especial WebSockets, tambi√©n es conveniente seleccionar el "canal" para filtrar por dominio. </p><br><p><img src="https://habrastorage.org/webt/tu/uq/9n/tuuq9ntpdwaoykwrktzfjelij08.png"></p><br><h2 id="ssl-pinning">  Fijaci√≥n SSL </h2><br><p>  Si se implementa el anclaje SSL en su aplicaci√≥n, no ver√° el tr√°fico de la aplicaci√≥n proxy, ya que el proxy utiliza su propio certificado para SSL, en este caso hay 4 opciones: </p><br><ol><li>  Deshabilite temporalmente el anclaje SSL mientras depura las solicitudes de red utilizando un proxy. </li><li>  Agregue un certificado proxy / clave p√∫blica a los certificados / claves depurados para las compilaciones de depuraci√≥n. </li><li>  Use su certificado de servidor para el proxy en lugar de su propio certificado generado por √©l. </li><li>  En lugar de usar un proxy externo, use un marco de depuraci√≥n (la lista de marcos se indica al comienzo del art√≠culo), que interceptar√° y mostrar√° solicitudes y respuestas directamente en la aplicaci√≥n, pero esto requiere integraci√≥n en el c√≥digo fuente de la aplicaci√≥n existente, m√°s sobre estas herramientas en el siguiente art√≠culo. </li></ol><br><h2 id="itogi">  Resumen </h2><br><p>  Comencemos con Charles.  Quiz√°s el mejor proxy para aquellos que quieren que todo funcione de la caja y sea lo m√°s f√°cil de usar posible, aunque Charles puede sorprender al usuario en algunos puntos, la funcionalidad del proxy es muy extensa, tambi√©n tiene la interfaz m√°s hermosa y nativa para macOS de todo lo descrito en el art√≠culo proxy.  Si no le importa gastar $ 50 para tal instrumento, entonces esta es su elecci√≥n. </p><br><p>  Pasemos a Burp Suite.  La herramienta m√°s poderosa, de acuerdo con una cierta funcionalidad e incluso la facilidad de uso, en algunos casos le da a Charles posibilidades, adem√°s, hay un sistema para expandir la funcionalidad en forma de complementos.  Burp Suite se ha establecido durante mucho tiempo como una herramienta muy confiable y precisa en las manos adecuadas.  Si carece de la funcionalidad de su proxy actual, le aconsejo que preste atenci√≥n a esta instancia. </p><br><p>  Ahora es el turno de Mitmproxy, un proxy joven y prometedor, que est√° ganando popularidad activamente, y que est√° siendo desarrollado por la comunidad Open Source.  El m√°s controvertido de los proxies que vimos, pero al mismo tiempo no menos interesante.  Mitmproxy se destaca de sus competidores por su interfaz de usuario de consola incre√≠blemente conveniente, simple y funcional.  Tambi√©n es posible usar la interfaz web de Mitmweb, pero ahora est√° en pruebas beta debido a que es posible que sea raro, pero aparecen errores, no hay parte de la funcionalidad avanzada de Mitmproxy (que se est√° completando gradualmente), y tambi√©n es ligeramente inferior en conveniencia para m√°s competidores nativos.  El soporte para el protocolo Websocket tambi√©n fue decepcionante, por as√≠ decirlo, pero no hay pantalla en la interfaz de usuario o simplemente no aprendimos c√≥mo prepararlo, porque no pudimos hacer que Mitmproxy mostrara mensajes de Websocket, aunque no tuvimos tales problemas con otros servidores proxy. </p><br><p>  Y el √∫ltimo en la lista, pero no menos interesante fue Owasp ZAP.  De las ventajas, hay un sistema de complemento expandible (subjetivamente, su n√∫mero es menor que para Burp Suite), pero desafortunadamente no pudimos configurar una hermosa pantalla JSON en el cuerpo de solicitud / respuesta, que es un criterio bastante cr√≠tico al elegir un proxy para el desarrollo m√≥vil.  Sin embargo, Owasp ZAP tiene un sistema avanzado para probar el tr√°fico Websocket, as√≠ como el gran nombre de los desarrolladores de la comunidad Owasp detr√°s de m√≠, por lo que no lo descartar√≠a y lo ten√≠a en mente para casos raros y complejos. </p><br><p>  A continuaci√≥n se muestra una tabla de resumen subjetivo de los proxies que analizamos. </p><br><table><thead><tr><th>  criterio / poder </th><th>  Mitmproxi </th><th>  Carlos </th><th>  Burpsuite (CE) </th><th>  Owasp zap </th></tr></thead><tbody><tr><td>  Formato JSON </td><td>  + </td><td>  + </td><td>  + </td><td>  - </td></tr><tr><td>  Edici√≥n y repetici√≥n de consultas </td><td>  + </td><td>  + </td><td>  + </td><td>  + </td></tr><tr><td>  Soporte websocket </td><td>  - </td><td>  + </td><td>  + </td><td>  + </td></tr><tr><td>  Software libre </td><td>  + </td><td>  - </td><td>  + </td><td>  + </td></tr></tbody></table><br><p>  Terminaremos aqu√≠, esperamos que el art√≠culo sea √∫til, tambi√©n estaremos encantados de comentar y si comparte su experiencia en el campo de las pruebas y el monitoreo del tr√°fico de aplicaciones m√≥viles. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es421493/">https://habr.com/ru/post/es421493/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es421481/index.html">Micr√≥fonos, capturas de pantalla y video local: c√≥mo el SDK Voximplant Web controla los medios en un navegador</a></li>
<li><a href="../es421485/index.html">Aviso importante para los usuarios de Gitlab Pages</a></li>
<li><a href="../es421487/index.html">C√≥mo fortalecer el soporte t√©cnico - 6 formas secretas</a></li>
<li><a href="../es421489/index.html">Gru√±ir pero dar</a></li>
<li><a href="../es421491/index.html">C√≥mo escribir un juego para una computadora en la que no hay dispositivos de entrada y salida</a></li>
<li><a href="../es421495/index.html">Bienvenido a la era del nihilismo privado</a></li>
<li><a href="../es421497/index.html">Cuando no necesita usar algoritmos de STL</a></li>
<li><a href="../es421499/index.html">Estudio de la probabilidad estad√≠stica de un valor de bit en un bitcoins nonco</a></li>
<li><a href="../es421501/index.html">Hacker ha encontrado una manera de rastrear a los visitantes a los sitios de la competencia.</a></li>
<li><a href="../es421503/index.html">C√≥mo escribir instrucciones para ser entendido</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>