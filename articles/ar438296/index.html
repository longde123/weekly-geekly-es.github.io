<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ค ๐ฐ OpenSceneGraph: ูุธุงู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ๐๐ฟ ๐ฉ๐ฝโ๐คโ๐จ๐พ ๐ฉ๐พโ๐พ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏูุฉ 
 ูู ููุงู ูุง ูู ุงูุฏุฑูุณ ุงูุณุงุจูุฉ ุ ููู ุจุงููุนู ุฃู OSG ูุฏุนู ุชุญููู ุฃููุงุน ูุฎุชููุฉ ูู ุงูููุงุฑุฏ ูุซู ุงูุตูุฑ ุงูููุทูุฉ ุ ูุงูููุงุฐุฌ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ุฐุงุช ุงูุชูุณููุงุช ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>OpenSceneGraph: ูุธุงู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438296/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/py/ks/3w/pyks3wlvjf_zfef-sqocutbnimk.jpeg" alt="ุงูุตูุฑุฉ"><br><h1 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h1><br>  ูู ููุงู ูุง ูู ุงูุฏุฑูุณ ุงูุณุงุจูุฉ ุ ููู ุจุงููุนู ุฃู OSG ูุฏุนู ุชุญููู ุฃููุงุน ูุฎุชููุฉ ูู ุงูููุงุฑุฏ ูุซู ุงูุตูุฑ ุงูููุทูุฉ ุ ูุงูููุงุฐุฌ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ุฐุงุช ุงูุชูุณููุงุช ุงููุฎุชููุฉ ุ ุฃู ุนูู ุณุจูู ุงููุซุงู ุงูุฎุทูุท ูู ุฎูุงู ูุธุงู ุงูููููุงุช ุงูุฎุงุต ุจูุง.  ุงููููู ุงูุฅุถุงูู OSG ูู ูููู ูููุตู ูุนูู ุนูู ุชูุณูุน ูุธุงุฆู ุงููุญุฑู ููู ูุงุฌูุฉ ููุญุฏุฉ ุฏุงุฎู OSG.  ูุชู ุชุทุจูู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูููุชุจุฉ ูุดุชุฑูุฉ ุฏููุงููููุฉ (dll ุนูู Windows ุ ูููุฐุง ุนูู Linux ุ ุฅูุฎ).  ุชุชูุงูู ุฃุณูุงุก ููุชุจุงุช ุงูููููุงุช ุงูุฅุถุงููุฉ ูุน ุงุชูุงููุฉ ูุญุฏุฏุฉ <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">osgdb_&lt; &gt;.dll</code> </pre> <br>  ุฃู ุฃู ุงุณู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุญุชูู ุฏุงุฆููุง ุนูู ุจุงุฏุฆุฉ osgdb_.  ูุฎุจุฑ ููุญู ุงูููู ุงููุญุฑู ุงูุฐู ูุฌุจ ุงุณุชุฎุฏุงู ุงููููู ุงูุฅุถุงูู ูุชูุฒูู ููู ุจูุฐุง ุงูููุญู.  ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ููุชุจ ูุธููุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">osg::ref_ptr&lt;osg::Node&gt; model = osgDB::readNodeFile(<span class="hljs-string"><span class="hljs-string">"cessna.osg"</span></span>);</code> </pre><br>  ูุฑู ุงููุญุฑู ุงูุชุฏุงุฏ osg ููููู ุจุชุญููู ูููู ุฅุถุงูู ุจุงุณู osgdb_osg.dll (ุฃู osgdb_osg.so ูู ุญุงูุฉ Linux).  ูุนูู ุฑูุฒ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูู ูู ุงูุฃุนูุงู ุงููุฐุฑุฉ ูู ุฎูุงู ุฅุฑุฌุงุน ูุคุดุฑ ุฅูู ุนูุฏุฉ ุชุตู ูููุฐุฌ ุณูุณูุง.  ุจุงููุซู ุ ูุญุงููุฉ ุชุญููู ุตูุฑุฉ PNG <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">osg::ref_ptr&lt;osg:Image&gt; image = osgDB::readImageFile(<span class="hljs-string"><span class="hljs-string">"picture.png"</span></span>);</code> </pre><br>  ุณูุคุฏู ุฅูู ุชุญููู ุงููููู ุงูุฅุถุงูู osgdb_png.dll ุ ูุงูุฐู ูููู ุจุชูููุฐ ุฎูุงุฑุฒููุฉ ููุฑุงุกุฉ ุงูุจูุงูุงุช ูู ุตูุฑุฉ PNG ููุถุน ูุฐู ุงูุจูุงูุงุช ูู ูุงุฆู ูู ุงูููุน osg :: Image. <br><a name="habracut"></a><br>  ูุชู ุชูููุฐ ุฌููุน ุนูููุงุช ุงูุนูู ุจุงุณุชุฎุฏุงู ุงูููุงุฑุฏ ุงูุฎุงุฑุฌูุฉ ูู ุฎูุงู ูุธุงุฆู ููุชุจุฉ osgDB ุ ุงูุชู ูุฑุจุท ุจูุง ุงูุจุฑุงูุฌ ุฏุงุฆููุง ูู ูุซุงู ุฅูู ูุซุงู.  ุชุนุชูุฏ ูุฐู ุงูููุชุจุฉ ุนูู ูุธุงู ุงูููููุงุช OSG.  ุญุชู ุงูุขู ุ ุชุชุถูู ุญุฒูุฉ OSG ุงูุนุฏูุฏ ูู ุงูููููุงุช ุงูุฅุถุงููุฉ ุงูุชู ุชุนูู ูุน ูุนุธู ุชูุณููุงุช ุงูุตูุฑ ูุงูููุงุฐุฌ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ูุงูุฎุทูุท ุงููุณุชุฎุฏูุฉ ูู ุงูููุงุฑุณุฉ.  ุชููุฑ ุงูุฅุถุงูุงุช ููุงู ูู ุจูุงูุงุช ุงููุฑุงุกุฉ (ุงูุงุณุชูุฑุงุฏ) ุจุชูุณูู ูุนูู ุ ููู ูุนุธู ุงูุญุงูุงุช ุ ูุชุงุจุฉ ุงูุจูุงูุงุช ุฅูู ููู ุจุงูุชูุณูู ุงููุทููุจ (ุชุตุฏูุฑ).  ุชุชูุญ ูู ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ osgconv ุ ุนูู ูุฌู ุงูุฎุตูุต ุ ุชุญููู ุงูุจูุงูุงุช ูู ุชูุณูู ุฅูู ุขุฎุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุธุงู ุงูููููุงุช ุงูุฅุถุงููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ osgconv cessna.osg cessna.3ds</code> </pre><br>  ุฅูู ูุญูู ุจุณูููุฉ ูุจุดูู ุทุจูุนู ูููุฐุฌ cessna osg ุฅูู ุชูุณูู 3DS ุ ูุงูุฐู ูููู ุงุณุชูุฑุงุฏู ุจุนุฏ ุฐูู ุฅูู ูุญุฑุฑ ุซูุงุซู ุงูุฃุจุนุงุฏ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅูู Blender (ุจุงูููุงุณุจุฉ ุ ููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุฏุงุฏ ููุนูู ูุน osg ูุจุงุดุฑุฉ</a> ูู Blender) <br><br><img src="https://habrastorage.org/webt/vy/dm/qm/vydmqm2a3evtdqxu2vtf_kknmrw.png"><br><br>  ููุงู ูุงุฆูุฉ ุฑุณููุฉ ุจููููุงุช OSG ุงูููุงุณูุฉ ุชุญุชูู ุนูู ูุตู ููุบุฑุถ ูููุง ุ ููููุง ุทูููุฉ ูุฃูุง ูุณูู ุฌุฏูุง ูุฃุญุถุฑูุง ููุง.  ูู ุงูุฃุณูู ุฅููุงุก ูุธุฑุฉ ุนูู ูุณุงุฑ ุชุซุจูุช ุงูููุชุจุฉ ูู ูุฌูุฏ bin / ospPlugins-xyz ุ ุญูุซ x ุ y ุ z ูู ุฑูู ุฅุตุฏุงุฑ OSG.  ูู ุงุณู ููู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ุ ูู ุงูุณูู ููู ุงูุชูุณูู ุงูุฐู ูุนุงูุฌู. <br><br>  ุฅุฐุง ุชู ุชุฌููุน OSG ุจูุงุณุทุฉ ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู MinGW ุ ุชุชู ุฅุถุงูุฉ ุจุงุฏุฆุฉ ุฅุถุงููุฉ mingw_ ุฅูู ุงูุงุณู ุงูููุงุณู ูููููู ุงูุฅุถุงูู ุ ุฃู ุณูุจุฏู ุงูุงุณู ููุง ููู <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">mingw_osgdb_&lt; &gt;.dll</code> </pre><br>  ุชู ุชุฌููุฒ ุฅุตุฏุงุฑ ุงููููู ุงูุฅุถุงูู ุงูุฐู ุชู ุชุฌููุนู ูู ุชูููู DEBUG ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุจุงููุงุญูุฉ d ูู ููุงูุฉ ุงูุงุณู ุ ุฃู ุฃู ุงูุชูุณูู ุณูููู <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">osgdb_&lt; &gt;d.dll</code> </pre><br>  ุงู <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">mingw_osgdb_&lt; &gt;d.dll</code> </pre><br>  ุนูุฏ ุชุฌููุน MinGW. <br><br><h1 style=";text-align:right;direction:rtl">  1. ุงูุฅุถุงูุงุช ุงูุฒุงุญู ููุงุฏุฑ </h1><br>  ุชุคุฏู ุจุนุถ ุฅุถุงูุงุช OSG ูุธุงุฆู ูุง ูุณูู ุจุงููุงุฏุฑ ุงูุฒุงุฆูุฉ - ููุฐุง ูุนูู ุฃููุง ุบูุฑ ูุฑุชุจุทุฉ ุจููุญู ููู ูุญุฏุฏ ุ ูููู ุจุฅุถุงูุฉ ูุงุญูุฉ ุฅูู ููุงูุฉ ุงุณู ุงูููู ุ ููููู ุชุญุฏูุฏ ุงููููู ุงูุฅุถุงูู ุงูุฐู ูุฌุจ ุงุณุชุฎุฏุงูู ูุชูุฒูู ูุฐุง ุงูููู ุ ุนูู ุณุจูู ุงููุซุงู <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ osgviewer worldmap.shp.ogr</code> </pre><br>  ูู ูุฐู ุงูุญุงูุฉ ุ ูููู ุงูุงุณู ุงูุญูููู ููููู ุงูููุฌูุฏ ุนูู ุงููุฑุต ูู worldmap.shp - ูุฎุฒู ูุฐุง ุงูููู ุฎุฑูุทุฉ ุงูุนุงูู ุจุชูุณูู ESRI shapefile.  ูุฎุจุฑ ุงููุงุญูุฉ .ogr ููุชุจุฉ osgDB ุจุงุณุชุฎุฏุงู ุงููููู ุงูุฅุถุงูู osgdb_ogr ูุชุญููู ูุฐุง ุงูููู ุ  ุฎูุงู ุฐูู ุ ุณูุชู ุงุณุชุฎุฏุงู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ osgdb_shp. <br><br>  ูุซุงู ุฌูุฏ ุขุฎุฑ ูู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ osgdb_ffmpeg.  ุชุฏุนู ููุชุจุฉ FFmpeg ุฃูุซุฑ ูู 100 ุจุฑูุงูุฌ ุชุฑููุฒ ูุฎุชูู.  ููุฑุงุกุฉ ุฃู ูููุง ุ ูููููุง ุจุจุณุงุทุฉ ุฅุถุงูุฉ ุงููุงุญูุฉ .ffmpeg ุจุนุฏ ุงุณู ููู ุงููุณุงุฆุท. <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชุณูุญ ููุง ุจุนุถ ุงูููุงุฏุฑ ุงููุฒููุฉ ุจุงููุฑูุฑ ุนุจุฑ ูุงุญูุฉ ุนุฏุฏ ูู ุงููุนููุงุช ุงูุชู ุชุคุซุฑ ุนูู ุญุงูุฉ ุงููุงุฆู ุงูุฐู ุชู ุชุญูููู ุ ููุฏ ุตุงุฏููุง ูุฐุง ุจุงููุนู ูู ูุซุงู ูุน ุงูุฑุณูู ุงููุชุญุฑูุฉ <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">node = osgDB::readNodeFile(<span class="hljs-string"><span class="hljs-string">"cessna.osg.0,0,90.rot"</span></span>);</code> </pre><br>  ูุดูุฑ ุงูุณุทุฑ 0.90 ุฅูู ุงููููู ุงูุฅุถุงูู osgdb_osg ุฅูู ูุนููุงุช ุงูุงุชุฌุงู ุงูุฃููู ูููููุฐุฌ ุงูุฐู ุชู ุชุญูููู.  ุชุชุทูุจ ุจุนุถ ุงูููุงุฏุฑ ุงูุฒุงุฆูุฉ ูุนููุงุช ูุญุฏุฏุฉ ุชูุงููุง ููุนูู. <br><br><h1 style=";text-align:right;direction:rtl">  2. API ูุชุทููุฑ ุงูุฅุถุงูุงุช ุงูุฎุงุฑุฌูุฉ </h1><br>  ูู ุงูููุทูู ุชูุงููุง ุฅุฐุง ูุงู ูุฏูู ุ ุจุนุฏ ูู ุงููุฑุงุกุฉ ุ ููุฑุฉ ุฃูู ูุฏ ูุง ูููู ูู ุงูุตุนุจ ูุชุงุจุฉ ุงูููููู ุงูุฅุถุงูู ุงูุฎุงุต ุจู ูู OSG ุ ููุง ูุณูุญ ูู ุจุงุณุชูุฑุงุฏ ุชูุณูู ุบูุฑ ููุงุณู ููููุงุฐุฌ ุฃู ุงูุตูุฑ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ.  ููุฐุง ูู ุงูููุฑ ุงูุญูููู!  ุชู ุชุตููู ุขููุฉ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุชูุณูุน ูุธุงุฆู ุงููุญุฑู ุฏูู ุชุบููุฑ OSG ููุณู.  ูููู ุงููุจุงุฏุฆ ุงูุฃุณุงุณูุฉ ููุชุงุจุฉ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ุ ุฏุนููุง ูุญุงูู ุชูููุฐ ูุซุงู ุจุณูุท. <br><br>  ุชุทููุฑ ุงูููููู ุงูุฅุถุงูู ูู ุชูุณูุน ูุงุฌูุฉ ุงููุฑุงุกุฉ / ุงููุชุงุจุฉ ุงูุงูุชุฑุงุถูุฉ ุงูุชู ุชููุฑูุง OSG.  ูุชู ุชูููุฑ ูุฐู ุงููุธููุฉ ุจูุงุณุทุฉ ุงููุฆุฉ ุงูุธุงูุฑู osgDB :: ReaderWriter.  ุชููุฑ ูุฐู ุงููุฆุฉ ุนุฏุฏูุง ูู ุงูุทุฑู ุงูุงูุชุฑุงุถูุฉ ุงูุชู ุชู ุฅุนุงุฏุฉ ุชุนุฑูููุง ุจูุงุณุทุฉ ูุทูุฑ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ. <br><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุงูุทุฑููุฉ </th><th>  ุงููุตู </th></tr></thead><tbody><tr><td>  ูุฏุนูุงูุชูุณุนุงุช () </td><td>  ููุจู ูุนููุชูู ูู ุงูุณูุณูุฉ: ุงูุชุฏุงุฏ ุงูููู ูุงููุตู.  ูุชู ุงุณุชุฏุนุงุก ุงูุทุฑููุฉ ุฏุงุฆููุง ูู ูููุดุฆ ุงููุฆุฉ ุงููุฑุนูุฉ. </td></tr><tr><td>  ููุจู extension () </td><td>  ูุนูุฏ ุตุญูุญูุง ุฅุฐุง ุชู ุฏุนู ุงูููุญู ุงูุฐู ุชู ุชูุฑูุฑู ููุณูุทุฉ ุจูุงุณุทุฉ ุงููููู ุงูุฅุถุงูู </td></tr><tr><td>  fileExists () </td><td>  ูุชูุญ ูู ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ููุงู ููู ูุนูู ููุฌูุฏ (ูุชู ุชูุฑูุฑ ุงููุณุงุฑ ููุนููุฉ) ุนูู ุงููุฑุต (ูุชู ุฅุฑุฌุงุน true ุฅุฐุง ูุฌุญ) </td></tr><tr><td>  readNode () </td><td>  ููุจู ุงุณู ุงูููู ูุฎูุงุฑุงุชู ููุงุฆู osgDB :: Option.  ูุชู ุชูููุฐ ูุธุงุฆู ูุฑุงุกุฉ ุงูุจูุงูุงุช ูู ููู ูู ูุจู ุงููุทูุฑ </td></tr><tr><td>  writeNode () </td><td>  ููุจู ุงุณู ุงูุนูุฏุฉ ูุงุณู ุงูููู ุงููุทููุจ ูุงูุฎูุงุฑุงุช.  ูุชู ุชูููุฐ ูุธุงุฆู ูุชุงุจุฉ ุงูุจูุงูุงุช ุนูู ุงููุฑุต ุจูุงุณุทุฉ ุงููุทูุฑ </td></tr><tr><td>  readImage () </td><td>  ูุฑุงุกุฉ ุจูุงูุงุช ุงูุตูุฑุฉ ุงูููุทูุฉ </td></tr><tr><td>  writeImage () </td><td>  ูุชุงุจุฉ ุตูุฑุฉ ููุทูุฉ ุนูู ุงููุฑุต </td></tr></tbody></table><br>  ูููู ูุตู ุชุทุจูู ุทุฑููุฉ readNode () ุจุงูุดูุฑุฉ ุงูุชุงููุฉ <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">osgDB::ReaderWriter::<span class="hljs-function"><span class="hljs-function">ReadResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readNode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp;file, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> osgDB::Options *options)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//         bool recognizableExtension = ...; bool fileExists = ...; if (!recognizableExtension) return ReadResult::FILE_NOT_HANDLED; if (!fileExists) return ReadResult::FILE_NOT_FOUND; //          osg::Node *root = ...; //       -     . //    -      bool errorInParsing = ...; if (errorInParsing) return ReadResult::ERROR_IN_READING_FILE; return root; }</span></span></code> </pre><br>  ูู ุงููุณุชุบุฑุจ ููููุงู ุฃูู ุจุฏูุงู ูู ูุคุดุฑ ุฅูู ุนูุฏุฉ ุงูุฑุณู ุงูุจูุงูู ูููุดูุฏ ุ ุชููู ุงูุทุฑููุฉ ุจุฅุฑุฌุงุน ุงูููุน osgDB :: ReaderWriter :: ReadResult.  ูุฐุง ุงูููุน ูู ูุงุฆู ูุชูุฌุฉ ูููุฑุงุกุฉ ุ ููููู ุงุณุชุฎุฏุงูู ูุญุงููุฉ ููุนูุฏุฉ ุ ุฃู ุตูุฑุฉ ุ ุฃู ุนุฏุงุฏ ูุญุงูุฉ (ุนูู ุณุจูู ุงููุซุงู ุ FILE_NOT_FOUND) ุ ุฃู ูุงุฆู ุฎุงุต ุขุฎุฑ ุ ุฃู ุญุชู ูุณูุณูุฉ ุฑุณุงุฆู ุฎุทุฃ.  ูุฏููุง ุงูุนุฏูุฏ ูู ุงูููุดุฆุงุช ุงูุถูููุฉ ูุชูููุฐ ุงููุธุงุฆู ุงูููุตููุฉ. <br><br>  ูุฆุฉ ูููุฏุฉ ุฃุฎุฑู ูู osgDB :: Options.  ูููู ุฃู ูุณูุญ ูู ุจุชุนููู ุฃู ุงูุญุตูู ุนูู ุณูุณูุฉ ูู ุฎูุงุฑุงุช ุงูุชุญููู ุจุงุณุชุฎุฏุงู ุฃุณุงููุจ setOptionString () ู getOptionString ().  ููุณูุญ ุฃูุถูุง ุจุชูุฑูุฑ ูุฐู ุงูุณูุณูุฉ ุฅูู ูููุดุฆ ูุฐู ุงููุฆุฉ ููุณูุทุฉ. <br><br>  ูููู ูููุทูุฑ ุงูุชุญูู ูู ุณููู ุงููููู ุงูุฅุถุงูู ุนู ุทุฑูู ุชุนููู ุงูุฅุนุฏุงุฏุงุช ูู ุณูุณูุฉ ุงููุนููุฉ ุงูุชู ุชู ุชูุฑูุฑูุง ุนูุฏ ุชุญููู ุงููุงุฆู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุจูุฐู ุงูุทุฑููุฉ <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    osg::Node* node1 = osgDB::readNodeFile("cow.osg"); //     string osg::Node* node2 = osgDB::readNodeFile("cow.osg", new osgDB::Options(string));</span></span></code> </pre><br><h1 style=";text-align:right;direction:rtl">  3. ูุนุงูุฌุฉ ุชุฏูู ุงูุจูุงูุงุช ูู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ OSG </h1><br>  ุชุชุถูู ุงููุฆุฉ ุงูุฃุณุงุณูุฉ osgDB :: ReaderWriter ูุฌููุนุฉ ูู ุงูุทุฑู ุงูุชู ุชุนุงูุฌ ุจูุงูุงุช ุชุฏููุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุงูุชู ุชููุฑูุง ููุชุจุฉ C ++ ุงูููุงุณูุฉ.  ุงูุงุฎุชูุงู ุงููุญูุฏ ุจูู ุฃุณุงููุจ ุงููุฑุงุกุฉ / ุงููุชุงุจุฉ ูุทุฑู ุงูููุงูุดุฉ ุฃุนูุงู ูู ุฃูู ุจุฏูุงู ูู ุงุณู ุงูููู ุ ููุจููู std :: istream &amp; ุชุฏููุงุช ุงูุฅุฏุฎุงู ุฃู std :: ostream &amp; output.  ููุถู ุงุณุชุฎุฏุงู ุฏูู ุฅุฏุฎุงู / ุฅุฎุฑุงุฌ ุงูููู ุฏุงุฆููุง ุงุณุชุฎุฏุงู ุงุณู ุงูููู.  ูุชูููุฐ ุนูููุงุช ูุฑุงุกุฉ ุงููููุงุช ุ ูููููุง ุงุณุชุฎุฏุงู ุชุตููู ุงููุงุฌูุฉ ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">osgDB::ReaderWriter::<span class="hljs-function"><span class="hljs-function">ReadResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readNode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp;file, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> osgDB::Options *options)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ ... osgDB::<span class="hljs-function"><span class="hljs-function">ifstream </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stream</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(file.c_str(), </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::ios::binary)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!stream) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ReadResult::ERROR_IN_READING_FILE; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> readNode(stream, options); } ... osgDB::ReaderWriter::<span class="hljs-function"><span class="hljs-function">ReadResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readNode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::istream &amp;stream, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> osgDB::Options *options)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//         osg::Node *root = ...; return root; }</span></span></code> </pre><br>  ุจุนุฏ ุชุทุจูู ุงูููููู ุงูุฅุถุงูู ุ ูููููุง ุงุณุชุฎุฏุงู ุงูุฏุงูุชูู ุงูููุงุณูุชูู osgDB :: readNodeFile () ู osgDB :: readImageFile () ูุชุญููู ุงูููุงุฐุฌ ูุงูุตูุฑ ุ ุจุจุณุงุทุฉ ุนู ุทุฑูู ุชุญุฏูุฏ ูุณุงุฑ ุงูููู.  ุณูู ุชุฌุฏ OSG ูุชูุฒูู ุงููููู ุงูุฅุถุงูู ุงูุฐู ูุชุจูุงู. <br><br><h1 style=";text-align:right;direction:rtl">  4. ููุชุจ ุงููุณุงุนุฏ ุงูุฎุงุต ุจูุง </h1><br><br>  ูุฐูู ุ ูุง ุฃุญุฏ ูุฒุนุฌูุง ุฃู ูุฃุชู ุจุชูุณูู ุฎุงุต ุจูุง ูุชุฎุฒูู ุงูุจูุงูุงุช ุนูู ููุฏุณุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ุ ูุณูู ูุฃุชู ุจูุง <br><br>  <strong>piramide.pmd</strong> <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">vertex: 1.0 1.0 0.0 vertex: 1.0 -1.0 0.0 vertex: -1.0 -1.0 0.0 vertex: -1.0 1.0 0.0 vertex: 0.0 0.0 2.0 face: 0 1 2 3 face: 0 3 4 face: 1 0 4 face: 2 1 4 face: 3 2 4</code> </pre><br>  ููุง ูู ุจุฏุงูุฉ ุงูููู ูุงุฆูุฉ ูู ุงูููู ูุน ุฅุญุฏุงุซูุงุชูุง.  ุชุฑุชูุจ ูุคุดุฑุงุช Vertex ุจุงูุชุฑุชูุจ ุ ุจุฏุกูุง ูู ุงูุตูุฑ.  ุจุนุฏ ูุงุฆูุฉ ุงูููู ุชุฃุชู ูุงุฆูุฉ ุงููุฌูู.  ูุชู ุชุนุฑูู ูู ูุฌู ูู ุฎูุงู ูุงุฆูุฉ ูุคุดุฑุงุช ููุฉ ุงูุฑุฃุณ ุงูุชู ูุชู ุชุดููููุง ูููุง.  ุนูู ูุง ูุจุฏู ูุง ุดูุก ูุนูุฏ.  ุชุชูุซู ุงููููุฉ ูู ูุฑุงุกุฉ ูุฐุง ุงูููู ูู ุงููุฑุต ูุชุดููู ููุฏุณุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ุนูู ุฃุณุงุณู. <br><br><h1 style=";text-align:right;direction:rtl">  5. ุฅุนุฏุงุฏ ูุดุฑูุน ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ: ุจูุงุก ููุฒุงุช ุงูุจุฑูุงูุฌ ุงููุตู </h1><br>  ุฅุฐุง ูุงู ุนูููุง ูุจู ุฅูุดุงุก ุงูุชุทุจููุงุช ุ ูุนูููุง ุงูุขู ุฃู ููุชุจ ููุชุจุฉ ุฏููุงููููุฉ ุ ูููุณ ููุชุจุฉ ูุญุณุจ ุ ุจู ูููู ุฅุถุงูู OSG ููุจู ูุชุทูุจุงุช ูุนููุฉ.  ุณูุจุฏุฃ ูู ุชูุจูุฉ ูุฐู ุงููุชุทูุจุงุช ูู ุฎูุงู ุจุฑูุงูุฌ ูุตู ูุจูุงุก ุงููุดุฑูุน ุณูุจุฏู ููุฐุง <br><br>  <strong>plugin.pro</strong> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs">TEMPLATE = lib CONFIG += plugin CONFIG += no_plugin_name_prefix <span class="hljs-keyword"><span class="hljs-keyword">TARGET</span></span> = osgdb_pmd win32-g++: <span class="hljs-keyword"><span class="hljs-keyword">TARGET</span></span> = $$join(<span class="hljs-keyword"><span class="hljs-keyword">TARGET</span></span>,,mingw_,) win32 { OSG_LIB_DIRECTORY = $$(OSG_BIN_PATH) OSG_INCLUDE_DIRECTORY = $$(OSG_INCLUDE_PATH) DESTDIR = $$(OSG_PLUGINS_PATH) CONFIG(debug, debug|release) { <span class="hljs-keyword"><span class="hljs-keyword">TARGET</span></span> = $$join(<span class="hljs-keyword"><span class="hljs-keyword">TARGET</span></span>,,,d) LIBS += -L$$OSG_LIB_DIRECTORY -losgd LIBS += -L$$OSG_LIB_DIRECTORY -losgViewerd LIBS += -L$$OSG_LIB_DIRECTORY -losgDBd LIBS += -L$$OSG_LIB_DIRECTORY -lOpenThreadsd LIBS += -L$$OSG_LIB_DIRECTORY -losgUtild } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { LIBS += -L$$OSG_LIB_DIRECTORY -losg LIBS += -L$$OSG_LIB_DIRECTORY -losgViewer LIBS += -L$$OSG_LIB_DIRECTORY -losgDB LIBS += -L$$OSG_LIB_DIRECTORY -lOpenThreads LIBS += -L$$OSG_LIB_DIRECTORY -losgUtil } INCLUDEPATH += $$OSG_INCLUDE_DIRECTORY } unix { DESTDIR = /usr/lib/osgPlugins-<span class="hljs-number"><span class="hljs-number">3.7</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> CONFIG(debug, debug|release) { <span class="hljs-keyword"><span class="hljs-keyword">TARGET</span></span> = $$join(<span class="hljs-keyword"><span class="hljs-keyword">TARGET</span></span>,,,d) LIBS += -losgd LIBS += -losgViewerd LIBS += -losgDBd LIBS += -lOpenThreadsd LIBS += -losgUtild } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { LIBS += -losg LIBS += -losgViewer LIBS += -losgDB LIBS += -lOpenThreads LIBS += -losgUtil } } INCLUDEPATH += ./<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> HEADERS += $$files(./<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>/*.h) SOURCES += $$files(./src/*.cpp)</code> </pre><br>  ุณูููู ุจุชุญููู ุงููุฑูู ุงูุฏูููุฉ ุจูุฒูุฏ ูู ุงูุชูุตูู <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs">TEMPLATE = lib</code> </pre><br>  ูุนูู ุฃููุง ุณูุจูู ุงูููุชุจุฉ.  ูููุน ุฅูุดุงุก ุฑูุงุจุท ุฑูุฒูุฉ ุจูุณุงุนุฏุฉ ุญู ูุดููุงุช ุชุนุงุฑุถ ุฅุตุฏุงุฑ ุงูููุชุจุฉ ูู ุฃูุธูุฉ * nix ุ ูุฅููุง ููุถุญ ููุธุงู ุงูุฅูุดุงุก ุฃู ูุฐู ุงูููุชุจุฉ ุณุชููู ูููููุง ุฅุถุงูููุง ุ ุฃู ุ ุณูุชู ุชุญููููุง ูู ุงูุฐุงูุฑุฉ "ุฃุซูุงุก ุงูุชููู" <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs">CONFIG += plugin</code> </pre><br>  ุจุนุฏ ุฐูู ุ ูุณุชุจุนุฏ ุฅูุดุงุก ุจุงุฏุฆุฉ lib ุ ุงูุชู ุชุชู ุฅุถุงูุชูุง ุนูุฏ ุงุณุชุฎุฏุงู ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู ููุนุงุฆูุฉ gcc ูุชุคุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุจูุงุณุทุฉ ุจูุฆุฉ ููุช ุงูุชุดุบูู ุนูุฏ ุชุญููู ุงูููุชุจุฉ <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs">CONFIG += no_plugin_name_prefix</code> </pre><br>  ุงุถุจุท ุงุณู ููู ุงูููุชุจุฉ <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs"><span class="hljs-keyword"><span class="hljs-keyword">TARGET</span></span> = osgdb_pmd</code> </pre><br>  ุญูุซ pmd ูู ุงูุชุฏุงุฏ ููู ุชูุณูู ุงููููุฐุฌ ุงูุซูุงุซู ุงูุฃุจุนุงุฏ ุงูุฐู ุงุฎุชุฑุนูุงู.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฌุจ ุฃู ูุดูุฑ ุฅูู ุฃูู ูู ุญุงูุฉ ุชุฌููุน MinGW ุ ุชุชู ุฅุถุงูุฉ ุงูุจุงุฏุฆุฉ mingw_ ุจุงูุถุฑูุฑุฉ ุฅูู ุงูุงุณู <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs">win32-g++: <span class="hljs-keyword"><span class="hljs-keyword">TARGET</span></span> = $$join(<span class="hljs-keyword"><span class="hljs-keyword">TARGET</span></span>,,mingw_,)</code> </pre><br>  ุญุฏุฏ ูุณุงุฑ ุจูุงุก ุงูููุชุจุฉ: ููุธุงู Windows <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs">DESTDIR = $$(OSG_PLUGINS_PATH)</code> </pre><br>  ููููุณ <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs">DESTDIR = /usr/lib/osgPlugins-<span class="hljs-number"><span class="hljs-number">3.7</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br>  ููุธุงู ุงูุชุดุบูู Linux ุ ูุน ูุซู ูุฐุง ุงููุคุดุฑ ุนูู ุงููุณุงุฑ (ูุงูุฐู ูุง ุดู ููู ุนูุงุฒุงู ุ ููููู ูู ุฃุฌุฏ ุญูุงู ุขุฎุฑ ุจุนุฏ) ุ ูุฅููุง ูุนุทู ุงูุญู ูู ุงููุชุงุจุฉ ุฅูู ุงููุฌูุฏ ุงููุญุฏุฏ ุจุงุณุชุฎุฏุงู ุฅุถุงูุงุช OSG ูู ูุณุชุฎุฏู ุนุงุฏู <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"># chmod 666 /usr/lib/osgPlugins-3.7.0</code> </pre><br>  ุชุชุดุงุจู ูุงูุฉ ุฅุนุฏุงุฏุงุช ุงูุฅูุดุงุก ุงูุฃุฎุฑู ูุน ุชูู ุงููุณุชุฎุฏูุฉ ูู ุชุฌููุน ุชุทุจููุงุช ุงูููุงุฐุฌ ูุณุจููุง. <br><br><h1 style=";text-align:right;direction:rtl">  6. ุฅุนุฏุงุฏ ูุดุฑูุน ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ: ููุฒุงุช ูุถุน ุงูุชุตุญูุญ </h1><br>  ูุธุฑูุง ูุฃู ูุฐุง ุงููุดุฑูุน ููุชุจุฉ ุฏููุงููููุฉ ุ ูุฌุจ ุฃู ูููู ููุงู ุจุฑูุงูุฌ ูููู ุจุชุญููู ูุฐู ุงูููุชุจุฉ ูู ุนูููุฉ ุชูููุฐูุง.  ูููู ุฃู ูููู ุฃู ุชุทุจูู ูุณุชุฎุฏู OSG ูุงูุฐู ุณูุชู ุงุณุชุฏุนุงุก ุงููุธููุฉ ููู <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">node = osdDB::readNodeFile(<span class="hljs-string"><span class="hljs-string">"piramide.pmd"</span></span>);</code> </pre><br>  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูุชู ุชุญููู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุฏููุง.  ูู ุฃุฌู ุนุฏู ูุชุงุจุฉ ูุซู ูุฐุง ุงูุจุฑูุงูุฌ ุจููุณู ุ ุณูู ูุณุชุฎุฏู ุญูุงู ุฌุงูุฒูุง - ุนุงุฑุถ osgviewer ุงูููุงุณู ุ ูุงูุฐู ูุชู ุชุถูููู ูู ุญุฒูุฉ ุชุณููู ุงููุญุฑู.  ุฅุฐุง ูู ูุญุฏุฉ ุงูุชุญูู ุชูููุฐ <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ osgviewer piramide.pmd</code> </pre><br>  ุจุนุฏ ุฐูู ุณูู ูุคุฏู ุฃูุถุง ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ.  ูู ุฅุนุฏุงุฏุงุช ุชุดุบูู ุงููุดุฑูุน ุ ุญุฏุฏ ุงููุณุงุฑ ุฅูู osgviewerd ุ ูุฏููู ุงูุนูู ุ ูุญุฏุฏ ุงูุฏููู ุงูุฐู ููุฌุฏ ุจู ููู piramide.pmd ุ ูุญุฏุฏ ููุณ ุงูููู ูู ุฎูุงุฑุงุช ุณุทุฑ ุฃูุงูุฑ osgviewer <br><br><img src="https://habrastorage.org/webt/v8/9y/xa/v89yxafvygysowtw7aeihf9mgcs.png"><br><br>  ุงูุขู ูููููุง ุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุชุตุญูุญู ูุจุงุดุฑุฉ ูู QtCreator IDE. <br><br><h1 style=";text-align:right;direction:rtl">  6. ูููุฐ ุฅุทุงุฑ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ </h1><br>  ูุนูู ูุฐุง ุงููุซุงู ุฅูู ุญุฏ ูุง ุงููุนุฑูุฉ ุงูุชู ุชููููุงูุง ุจุงููุนู ุญูู OSG ูู ุงูุฏุฑูุณ ุงูุณุงุจูุฉ.  ุนูุฏ ูุชุงุจุฉ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ุ ุนูููุง ุฃู <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุญุฏุฏ ุจููุฉ ุจูุงูุงุช ูุชุฎุฒูู ูุนูููุงุช ููุฏุณุฉ ุงูููุงุฐุฌ ุงูุชู ูุชู ูุฑุงุกุชูุง ูู ููู ุทุฑุงุฒ <br></li><li style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ูุชุญููู (ุชุญููู) ููู ุงูุจูุงูุงุช ุงููููุฐุฌู <br></li><li style=";text-align:right;direction:rtl">  ูู ุจุชูููู ุงููุงุฆู ุงูููุฏุณู osg :: Drawable ุจุดูู ุตุญูุญ ุงุณุชูุงุฏูุง ุฅูู ุงูุจูุงูุงุช ุงูููุฑูุกุฉ ูู ุงูููู <br></li><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุฎุทุท ูุฑุนู ูููุดูุฏ ูุทุฑุงุฒ ุชู ุชุญูููู <br></li></ol><br>  ูุฐูู ุ ุญุณุจ ุงูุชูุงููุฏ ุ ุณุฃูุฏู ุดูุฑุฉ ุงููุตุฏุฑ ุงููุงููุฉ ูููููู ุงูุฅุถุงูู <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ Osgdb_pmd</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  <strong>ุงูุฑุฆูุณูุฉ</strong> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAIN_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;osg/Geometry&gt; #include &lt;osg/Geode&gt; #include &lt;osgDB/FileNameUtils&gt; #include &lt;osgDB/FileUtils&gt; #include &lt;osgDB/Registry&gt; #include &lt;osgUtil/SmoothingVisitor&gt; //------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ struct face_t { std::vector&lt;unsigned int&gt; indices; }; //------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ struct pmd_mesh_t { osg::ref_ptr&lt;osg::Vec3Array&gt; vertices; osg::ref_ptr&lt;osg::Vec3Array&gt; normals; std::vector&lt;face_t&gt; faces; pmd_mesh_t() : vertices(new osg::Vec3Array) , normals(new osg::Vec3Array) { } osg::Vec3 calcFaceNormal(const face_t &amp;face) const { osg::Vec3 v0 = (*vertices)[face.indices[0]]; osg::Vec3 v1 = (*vertices)[face.indices[1]]; osg::Vec3 v2 = (*vertices)[face.indices[2]]; osg::Vec3 n = (v1 - v0) ^ (v2 - v0); return n * (1 / n.length()); } }; //------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ class ReaderWriterPMD : public osgDB::ReaderWriter { public: ReaderWriterPMD(); virtual ReadResult readNode(const std::string &amp;filename, const osgDB::Options *options) const; virtual ReadResult readNode(std::istream &amp;stream, const osgDB::Options *options) const; private: pmd_mesh_t parsePMD(std::istream &amp;stream) const; std::vector&lt;std::string&gt; parseLine(const std::string &amp;line) const; }; #endif</span></span></span></span></code> </pre><br>  <strong>main.cpp</strong> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"main.h"</span></span></span><span class="hljs-meta"> </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ ReaderWriterPMD::ReaderWriterPMD() { supportsExtension("pmd", "PMD model file"); } //------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ osgDB::ReaderWriter::ReadResult ReaderWriterPMD::readNode( const std::string &amp;filename, const osgDB::Options *options) const { std::string ext = osgDB::getLowerCaseFileExtension(filename); if (!acceptsExtension(ext)) return ReadResult::FILE_NOT_HANDLED; std::string fileName = osgDB::findDataFile(filename, options); if (fileName.empty()) return ReadResult::FILE_NOT_FOUND; std::ifstream stream(fileName.c_str(), std::ios::in); if (!stream) return ReadResult::ERROR_IN_READING_FILE; return readNode(stream, options); } //------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ osgDB::ReaderWriter::ReadResult ReaderWriterPMD::readNode( std::istream &amp;stream, const osgDB::Options *options) const { (void) options; pmd_mesh_t mesh = parsePMD(stream); osg::ref_ptr&lt;osg::Geometry&gt; geom = new osg::Geometry; geom-&gt;setVertexArray(mesh.vertices.get()); for (size_t i = 0; i &lt; mesh.faces.size(); ++i) { osg::ref_ptr&lt;osg::DrawElementsUInt&gt; polygon = new osg::DrawElementsUInt(osg::PrimitiveSet::POLYGON, 0); for (size_t j = 0; j &lt; mesh.faces[i].indices.size(); ++j) polygon-&gt;push_back(mesh.faces[i].indices[j]); geom-&gt;addPrimitiveSet(polygon.get()); } geom-&gt;setNormalArray(mesh.normals.get()); geom-&gt;setNormalBinding(osg::Geometry::BIND_PER_PRIMITIVE_SET); osg::ref_ptr&lt;osg::Geode&gt; geode = new osg::Geode; geode-&gt;addDrawable(geom.get()); return geode.release(); } //------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ pmd_mesh_t ReaderWriterPMD::parsePMD(std::istream &amp;stream) const { pmd_mesh_t mesh; while (!stream.eof()) { std::string line; std::getline(stream, line); std::vector&lt;std::string&gt; tokens = parseLine(line); if (tokens[0] == "vertex") { osg::Vec3 point; std::istringstream iss(tokens[1]); iss &gt;&gt; point.x() &gt;&gt; point.y() &gt;&gt; point.z(); mesh.vertices-&gt;push_back(point); } if (tokens[0] == "face") { unsigned int idx = 0; std::istringstream iss(tokens[1]); face_t face; while (!iss.eof()) { iss &gt;&gt; idx; face.indices.push_back(idx); } mesh.faces.push_back(face); mesh.normals-&gt;push_back(mesh.calcFaceNormal(face)); } } return mesh; } //------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ std::string delete_symbol(const std::string &amp;str, char symbol) { std::string tmp = str; tmp.erase(std::remove(tmp.begin(), tmp.end(), symbol), tmp.end()); return tmp; } //------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ std::vector&lt;std::string&gt; ReaderWriterPMD::parseLine(const std::string &amp;line) const { std::vector&lt;std::string&gt; tokens; std::string tmp = delete_symbol(line, '\r'); size_t pos = 0; std::string token; while ( (pos = tmp.find(':')) != std::string::npos ) { token = tmp.substr(0, pos); tmp.erase(0, pos + 1); if (!token.empty()) tokens.push_back(token); } tokens.push_back(tmp); return tokens; } REGISTER_OSGPLUGIN( pmd, ReaderWriterPMD )</span></span></span></span></code> </pre><br></div></div><br>  ุฃููุงู ุ ุฏุนููุง ูุนุชูู ุจุงูููุงูู ุงูุฎุงุตุฉ ุจุชุฎุฒูู ุงูุจูุงูุงุช ุงูููุฏุณูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">face_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; indices; };</code> </pre><br>  - ูุตู ุงููุฌู ุงููุญุฏุฏ ุจูุงุณุทุฉ ูุงุฆูุฉ ูุคุดุฑุงุช ุงูุฑุคูุณ ุงูุชู ุชูุชูู ุฅูู ูุฐุง ุงููุฌู.  ุณูุชู ูุตู ุงููููุฐุฌ ููู ุจูุงุณุทุฉ ูุซู ูุฐุง ุงููููู <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pmd_mesh_t</span></span></span><span class="hljs-class"> {</span></span> osg::ref_ptr&lt;osg::Vec3Array&gt; vertices; osg::ref_ptr&lt;osg::Vec3Array&gt; normals; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">face_t</span></span>&gt; faces; <span class="hljs-keyword"><span class="hljs-keyword">pmd_mesh_t</span></span>() : vertices(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::Vec3Array) , normals(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::Vec3Array) { } osg::<span class="hljs-function"><span class="hljs-function">Vec3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calcFaceNormal</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">face_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp;face)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ osg::Vec3 v0 = (*vertices)[face.indices[<span class="hljs-number"><span class="hljs-number">0</span></span>]]; osg::Vec3 v1 = (*vertices)[face.indices[<span class="hljs-number"><span class="hljs-number">1</span></span>]]; osg::Vec3 v2 = (*vertices)[face.indices[<span class="hljs-number"><span class="hljs-number">2</span></span>]]; osg::Vec3 n = (v1 - v0) ^ (v2 - v0); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n * (<span class="hljs-number"><span class="hljs-number">1</span></span> / n.length()); } };</code> </pre><br>  ูุชููู ุงููููู ูู ูุชุบูุฑุงุช ุงูุฃุนุถุงุก ูุชุฎุฒูู ุงูุจูุงูุงุช: ุงูููู - ูุชุฎุฒูู ูุฌููุนุฉ ูู ุงูููู ููุงุฆู ููุฏุณู ุ  normals - ูุฌููุนุฉ ูู ุงูุญุงูุงุช ุงูุทุจูุนูุฉ ุฅูู ูุฌูู ุงููุงุฆู ุ  ุงููุฌูู - ูุงุฆูุฉ ูุฌูู ูุฌูู.  ูููู ูููุดุฆ ุงููููู ุจุชููุฆุฉ ุงููุคุดุฑุงุช ุงูุฐููุฉ ุนูู ุงูููุฑ <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">pmd_mesh_t</span></span>() : vertices(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::Vec3Array) , normals(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> osg::Vec3Array) { }</code> </pre><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชุญุชูู ุงูุจููุฉ ุนูู ุทุฑููุฉ ุชุณูุญ ูู ุจุญุณุงุจ ุงููุชุฌู ุงูุนุงุฏู ูููุฌู calcFaceNormal () ููุนููุฉ ุชุฃุฎุฐ ุจููุฉ ุชุตู ุงููุฌู.  ูู ูุฏุฎู ูู ุชูุงุตูู ุชูููุฐ ูุฐู ุงูุทุฑููุฉ ุจุนุฏ ุ ูุณูุญูููุง ูุงุญููุง. <br><br>  ูุจุงูุชุงูู ุ ูุฑุฑูุง ุงูููุงูู ุงูุชู ุณูููู ุจุชุฎุฒูู ุจูุงูุงุช ุงูููุฏุณุฉ ูููุง.  ุงูุขู ุฏุนูุง ููุชุจ ุฅุทุงุฑ ุงููููู ุงูุฅุถุงูู ุงูุฎุงุต ุจูุง ุ ุฃู ุฃููุง ูุทุจู ูุฆุฉ ุงููุฑุงุซุฉ osgDB :: ReaderWriter <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReaderWriterPMD</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> osgDB::ReaderWriter { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: ReaderWriterPMD(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> ReadResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readNode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp;filename, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> osgDB::Options *options)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> ReadResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readNode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::istream &amp;stream, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> osgDB::Options *options)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">pmd_mesh_t</span></span> parsePMD(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::istream &amp;stream) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; parseLine(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> &amp;line) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span>; };</code> </pre><br>  ุนูู ุงููุญู ุงูููุตู ุจู ูู ูุตู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ูุชุทููุฑ ุงูููููุงุช ุงูุฅุถุงููุฉ ุ ูู ูุฐุง ุงููุตู ุ ูุนูุฏ ุชุนุฑูู ุทุฑู ูุฑุงุกุฉ ุงูุจูุงูุงุช ูู ููู ูุชุญููููุง ุฅูู ุฑุณู ุชุฎุทูุทู ูููุดูุฏ.  ุชููู ุทุฑููุฉ readNode () ุจุฅุฌุฑุงุก ุญูููู ุฒุงุฆุฏูู - ุฃุญุฏููุง ููุจู ุงุณู ุงูููู ููุฏุฎู ุ ูุงูุขุฎุฑ ูุชููู ุฏูู ุฅุฏุฎุงู ููุงุณู.  ูุญุฏุฏ ูููุดุฆ ุงููุตู ุงูุชุฏุงุฏุงุช ุงููููุงุช ุงูุชู ูุฏุนููุง ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">ReaderWriterPMD::ReaderWriterPMD() { supportsExtension(<span class="hljs-string"><span class="hljs-string">"pmd"</span></span>, <span class="hljs-string"><span class="hljs-string">"PMD model file"</span></span>); }</code> </pre><br>  ูุญูู ุงูุชุญููู ุงูุฒุงุฆุฏ ุงูุฃูู ูู ุฃุณููุจ readNode () ุตุญุฉ ุงุณู ุงูููู ูุงููุณุงุฑ ุฅููู ุ ููุฑุจุท ุฏูู ุฅุฏุฎุงู ููุงุณู ุจุงูููู ุ ููุณุชุฏุนู ุงูุชุญููู ุงูุฒุงุฆุฏ ุงูุซุงูู ุ ุงูุฐู ูููู ุจุงูุนูู ุงูุฑุฆูุณู <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">osgDB::ReaderWriter::ReadResult ReaderWriterPMD::readNode( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> &amp;filename, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> osgDB::Options *options) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-comment"><span class="hljs-comment">//       std::string ext = osgDB::getLowerCaseFileExtension(filename); // ,      if (!acceptsExtension(ext)) return ReadResult::FILE_NOT_HANDLED; // ,       std::string fileName = osgDB::findDataFile(filename, options); if (fileName.empty()) return ReadResult::FILE_NOT_FOUND; //      std::ifstream stream(fileName.c_str(), std::ios::in); if (!stream) return ReadResult::ERROR_IN_READING_FILE; //      readNode() return readNode(stream, options); }</span></span></code> </pre><br>  ูู ุงูุชุญููู ุงูุฒุงุฆุฏ ุงูุซุงูู ุ ูููู ุจุชูููุฐ ุฎูุงุฑุฒููุฉ ุฅูุดุงุก ุงููุงุฆู ูู OSG <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">osgDB::ReaderWriter::ReadResult ReaderWriterPMD::readNode( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::istream &amp;stream, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> osgDB::Options *options) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) options; <span class="hljs-comment"><span class="hljs-comment">//   *.pmd       pmd_mesh_t mesh = parsePMD(stream); //    osg::ref_ptr&lt;osg::Geometry&gt; geom = new osg::Geometry; //    geom-&gt;setVertexArray(mesh.vertices.get()); //    for (size_t i = 0; i &lt; mesh.faces.size(); ++i) { //    GL_POLYGON      (  - 0) osg::ref_ptr&lt;osg::DrawElementsUInt&gt; polygon = new osg::DrawElementsUInt(osg::PrimitiveSet::POLYGON, 0); //       for (size_t j = 0; j &lt; mesh.faces[i].indices.size(); ++j) polygon-&gt;push_back(mesh.faces[i].indices[j]); //     geom-&gt;addPrimitiveSet(polygon.get()); } //    geom-&gt;setNormalArray(mesh.normals.get()); //  OpenGL,       geom-&gt;setNormalBinding(osg::Geometry::BIND_PER_PRIMITIVE_SET); //             osg::ref_ptr&lt;osg::Geode&gt; geode = new osg::Geode; geode-&gt;addDrawable(geom.get()); //     return geode.release(); }</span></span></code> </pre><br>  ูู ููุงูุฉ ุงูููู main.cpp ุ ุงุณุชุฏุนุงุก ุงููุงูุฑู REGISTER_OSGPLUGIN (). <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">REGISTER_OSGPLUGIN( pmd, ReaderWriterPMD )</code> </pre><br>  ููุดุฆ ูุฐุง ุงููุงูุฑู ุฑูุฒูุง ุฅุถุงูููุง ูุณูุญ ูู OSG ุ ูู ุดูู ููุชุจุฉ osgDB ุ ุจุจูุงุก ูุงุฆู ูู ุงูููุน ReaderWriterPMD ูุงุณุชุฏุนุงุก ุทุฑูู ูุชุญููู ูููุงุช ูู ุงูููุน pmd.  ูุจุงูุชุงูู ุ ูุฅู ุฅุทุงุฑ ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ุฌุงูุฒ ุ ููุจูู ุงูุฃูุฑ ุตุบูุฑูุง - ูุชูููุฐ ุงูุชุญููู ูุงูุชุญููู ูู ููู pmd. <br><br><h1 style=";text-align:right;direction:rtl">  7. Parsim 3D ููู ุงููููุฐุฌ </h1><br>  ุงูุขู ุชุนุชูุฏ ุฌููุน ูุธุงุฆู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ุนูู ุชูููุฐ ุทุฑููุฉ parsePMD () <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">pmd_mesh_t</span></span> ReaderWriterPMD::parsePMD(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::istream &amp;stream) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">pmd_mesh_t</span></span> mesh; <span class="hljs-comment"><span class="hljs-comment">//    while (!stream.eof()) { //      std::string line; std::getline(stream, line); //     -     std::vector&lt;std::string&gt; tokens = parseLine(line); //    -  if (tokens[0] == "vertex") { //       osg::Vec3 point; std::istringstream iss(tokens[1]); iss &gt;&gt; point.x() &gt;&gt; point.y() &gt;&gt; point.z(); //      mesh.vertices-&gt;push_back(point); } //    -  if (tokens[0] == "face") { //         unsigned int idx = 0; std::istringstream iss(tokens[1]); face_t face; while (!iss.eof()) { iss &gt;&gt; idx; face.indices.push_back(idx); } //      mesh.faces.push_back(face); //     mesh.normals-&gt;push_back(mesh.calcFaceNormal(face)); } } return mesh; }</span></span></code> </pre><br>  parseLine()    pmd- <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; ReaderWriterPMD::parseLine(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> &amp;line) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; tokens; <span class="hljs-comment"><span class="hljs-comment">//   ,        ( Windows) std::string tmp = delete_symbol(line, '\r'); size_t pos = 0; std::string token; //      ,     : //      while ( (pos = tmp.find(':')) != std::string::npos ) { //     (vertex  face   ) token = tmp.substr(0, pos); //         tmp.erase(0, pos + 1); if (!token.empty()) tokens.push_back(token); } //        tokens.push_back(tmp); return tokens; }</span></span></code> </pre><br>     "vertex: 1.0 -1.0 0.0"     "vertex"  " 1.0 -1.0 0.0".        โ   ,       .         delete_symbol(),             <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delete_symbol</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp;str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> symbol)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> tmp = str; tmp.erase(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::remove(tmp.begin(), tmp.end(), symbol), tmp.end()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tmp; }</code> </pre><br>             . <br><br><h1 style=";text-align:right;direction:rtl"> 8.   </h1><br>      (F5).       osgviewerd,      piramide.pmd,        readNode().     ,      <br><br><img src="https://habrastorage.org/webt/s3/5g/-y/s35g-ykmmlet5z8jisj7efkz7je.png"><br><br>           3D-   . <br><br>     ?             <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">osgUtil::SmoothingVisitor::smooth(*geom);</code> </pre><br>      ,     <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//geom-&gt;setNormalArray(mesh.normals.get()); //geom-&gt;setNormalBinding(osg::Geometry::BIND_PER_PRIMITIVE_SET); osgUtil::SmoothingVisitor::smooth(*geom);</span></span></code> </pre><br>      <br><br><img src="https://habrastorage.org/webt/eb/gd/kt/ebgdktxsplxyqatprxunnwd8r2o.png"><br><br>      ,                .           . ,          . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar438296/">https://habr.com/ru/post/ar438296/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar438286/index.html">ุงูุนูู ูุน ุงูููุงุทู ุงูุฒูููุฉ ูู JavaScript</a></li>
<li><a href="../ar438288/index.html">ุญูุงูุฉ ุจูุง ุฎูู. ุฃูู ุงูุฐุงูุฑุฉ ูู ุงูุตุฏุฃ</a></li>
<li><a href="../ar438290/index.html">ุจุนุฏ ุงูููุงุฉ ูุน GGJ-2019: ููููุฉ ุงูุญุตูู ุนูู ุงููุทุจุงุช ุ ูููู ูุง ุชุฒุงู ุชุฌุนู ุงููุนุจุฉ</a></li>
<li><a href="../ar438292/index.html">ุฃุชูุชุฉ ุงูุดูู ูุน HomePod ู Raspberry Pi ู Node.js</a></li>
<li><a href="../ar438294/index.html">ุงูุนุซูุฑ ุนูู ูุดู ุงููููู ูู ูุจุงุฑุงุฉ PUBG</a></li>
<li><a href="../ar438298/index.html">ููุงุฐุง ุงูุชุฏุฑูุณ ุฅุฐุง ุงููุงููุฉ ุฃูุซุฑ ุฑุจุญูุฉ. ูุญุงุฏุซุฉ ูุน GeekBrains</a></li>
<li><a href="../ar438302/index.html">ุงูุฅุจุฏุงุน ุงููุฐูู ููุชุทูุฑ ุงูุฑููู</a></li>
<li><a href="../ar438304/index.html">ุงูุชุนุงูุฏ ูู ุงูุจุงุทูุ ุจุงุฑุฏ ุฃูุช ุถุฑุจ</a></li>
<li><a href="../ar438306/index.html">ุงูุฅุดุนุงุน: ูุฎุชุจุฑ ุฃูุงู ุงูููููุงุก ุงูุฅุดุนุงุนูุฉ</a></li>
<li><a href="../ar438310/index.html">ูุณุชุฎุฏู Instagram ุงูุชุนูู ุงูุขูู ูุฅุฒุงูุฉ ุงููุชุงุจุนูู ุงููุฒูููู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>