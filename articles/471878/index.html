<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äç‚úàÔ∏è üó∫Ô∏è üë®üèΩ‚Äçüéì ¬øC√≥mo escribir un contrato inteligente para WebAssembly en una red Ontology? Parte 1: √≥xido üõÖ üîâ üçº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La tecnolog√≠a Ontology Wasm reduce el costo de transferir contratos inteligentes de dApp con una l√≥gica empresarial compleja a la cadena de bloques, l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øC√≥mo escribir un contrato inteligente para WebAssembly en una red Ontology? Parte 1: √≥xido</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471878/"><img src="https://habrastorage.org/getpro/habr/post_images/3e1/ec5/4dd/3e1ec54ddc0f1d35cad05f7f2b6e600e.png" alt="imagen"><br><br>  La tecnolog√≠a Ontology Wasm reduce el costo de transferir contratos inteligentes de dApp con una l√≥gica empresarial compleja a la cadena de bloques, lo que enriquece enormemente el ecosistema de dApp. <br><br>  Actualmente, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ontology Wasm</a> soporta simult√°neamente el desarrollo de Rust y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C ++</a> .  Rust admite Wasm mejor, y el bytecode generado es m√°s simple, lo que puede reducir a√∫n m√°s el costo de las llamadas de contrato.  Entonces, <b>¬øc√≥mo usar Rust para desarrollar un contrato en la red de Ontolog√≠a?</b> <br><a name="habracut"></a><br><h2>  Desarrollo del contrato WASM con Rust </h2><br><h3>  Creaci√≥n de contrato </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cargo</a> es una buena herramienta para crear proyectos y administrar paquetes al desarrollar programas en Rust, lo que ayuda a los desarrolladores a organizar mejor la interacci√≥n del c√≥digo y las bibliotecas de terceros.  Para crear un nuevo contrato de Ontology Wasm, simplemente ejecute el siguiente comando: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ab2/30f/1a0/ab230f1a0f2c39f8ba0829ff7416c1b3.png" alt="imagen"><br><br>  La estructura del proyecto que genera: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e72/8ca/909/e728ca9098009f22039d43cd7785ccaa.png" alt="imagen"><br><br>  El archivo Cargo.toml se usa para configurar la informaci√≥n b√°sica del proyecto y la informaci√≥n de la biblioteca dependiente.  La secci√≥n [lib] en el archivo debe establecerse en crate-type = ["cdylib"].  El archivo lib.rs se usa para escribir c√≥digo l√≥gico de contrato.  Adem√°s, debe agregar par√°metros de dependencia a la secci√≥n [dependencias] del archivo de configuraci√≥n Cargo.toml: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b06/c9d/b21/b06c9db2102d48e696b547c032223721.png" alt="imagen"><br><br>  Con esta dependencia, los desarrolladores pueden invocar interfaces que interact√∫an con la cadena de bloques de Ontology y herramientas como el par√°metro de serializaci√≥n. <br><br><h2>  Funci√≥n de entrada de contrato </h2><br>  Cada programa tiene una funci√≥n de entrada, como una funci√≥n principal, que generalmente vemos, pero el contrato no tiene una funci√≥n principal.  Cuando se desarrolla un contrato Wasm usando Rust, la invocaci√≥n se usa por defecto como una funci√≥n de entrada para usar el contrato.  El nombre de una funci√≥n en Rust no estar√° claro al compilar el c√≥digo fuente de Rust en bytecode que una m√°quina virtual puede ejecutar.  Para advertir al compilador contra la generaci√≥n de c√≥digo redundante y reducir el tama√±o del contrato, la funci√≥n de invocaci√≥n agrega la anotaci√≥n # [no_mangle]. <br><br><h3>  ¬øC√≥mo invoca obtener par√°metros para ejecutar una transacci√≥n? </h3><br>  La biblioteca ontio_std proporciona la funci√≥n runtime :: input () para obtener los par√°metros para la transacci√≥n.  Los desarrolladores pueden usar ZeroCopySource para deserializar la matriz de bytes resultante.  En el que la primera lectura de la matriz de bytes es el nombre del m√©todo invoke, seguido de los par√°metros del m√©todo. <br><br><h3>  ¬øC√≥mo se devuelve el resultado del contrato? </h3><br>  La funci√≥n runtime :: ret, proporcionada por la biblioteca ontio_std, devuelve el resultado del m√©todo. <br><br>  La funci√≥n de invocaci√≥n finalizada es la siguiente: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d76/bc2/456/d76bc2456bd288211e88c2801a7c1f18.png" alt="imagen"><br><br><h2>  Serializaci√≥n y deserializaci√≥n de los datos del contrato. </h2><br>  En el proceso de desarrollar contratos, los desarrolladores siempre encuentran problemas de serializaci√≥n y deserializaci√≥n, y espec√≠ficamente c√≥mo guardar el tipo de estructura de los datos en la base de datos y c√≥mo bytear los bytes de lectura de la matriz de la base de datos para deserializarlos para obtener el tipo de estructura de los datos. <br><br>  La biblioteca ontio_std proporciona interfaces de decodificador y codificador para serializar y deserializar datos.  Los campos de la estructura de estructura tambi√©n implementan las interfaces del decodificador y el codificador, de modo que la estructura puede ser serializada y deserializada.  Se requieren instancias de sumidero cuando se serializan varios tipos de datos.  Una instancia de la clase Sink tiene un buf de campo de tipo conjunto, que almacena los datos de tipo byte, y todos los datos serializados se almacenan en buf. <br><blockquote>  Para datos con una longitud fija (por ejemplo: byte, u16, u32, u64, etc.), los datos se convierten directamente a una matriz de bytes y luego se almacenan en buf;  para datos de longitud no fija, primero debe serializar la longitud y luego D \ data (por ejemplo, enteros sin signo de tama√±o desconocido, incluidos u16, u32 o u64, etc.). <br></blockquote><br>  La deserializaci√≥n es exactamente lo contrario.  Para cada m√©todo de serializaci√≥n, hay un m√©todo de deserializaci√≥n correspondiente.  La deserializaci√≥n requiere el uso de instancias de la clase Source.  Esta instancia de clase tiene dos campos buf y pos.  Buf se usa para almacenar datos para ser deserializados, y pos se usa para almacenar la posici√≥n de lectura actual.  Cuando se lee un tipo de datos en particular, si conoce su longitud, puede leerlo directamente, para datos de longitud desconocida: primero lea la longitud y luego lea el contenido. <br><br><h2>  Acceda y actualice datos en la cadena </h2><br>  <b>Ontology-wasm-cdt-rust</b> : encapsul√≥ un m√©todo operativo para trabajar con datos en una cadena, que es conveniente para que los desarrolladores implementen operaciones como agregar, eliminar, cambiar y consultar datos en una cadena de la siguiente manera: <br><br><ul><li>  <b>database :: get (key)</b> : se utiliza para solicitar datos de la cadena y key solicita la implementaci√≥n de la interfaz AsRef; </li><li>  <b>database :: put (clave, valor)</b> : se usa para almacenar datos en la red.  Key solicita la ejecuci√≥n de la interfaz AsRef, y value solicita la implementaci√≥n de la interfaz Encoder; </li><li>  <b>database :: delete (key)</b> : se utiliza para eliminar datos de la cadena y Key solicita la implementaci√≥n de la interfaz AsRef. </li></ul><br><h2>  Prueba de contrato </h2><br>  Cuando se implementan los m√©todos del contrato, necesitamos acceso a los datos en el circuito y necesitamos la m√°quina virtual adecuada para ejecutar el c√≥digo de bytes del contrato, por lo que, por regla general, es necesario implementar el contrato en la cadena para la prueba.  Pero tal m√©todo de prueba es problem√°tico.  Para facilitar la prueba de los contratos para los desarrolladores, la biblioteca ontio_std proporciona un m√≥dulo simulado para la prueba.  Este m√≥dulo proporciona simulaci√≥n de datos en un circuito, lo que facilita a los desarrolladores unir los m√©todos de prueba en un contrato.  Ejemplos espec√≠ficos se pueden encontrar <a href="">aqu√≠</a> . <br><br><h2>  Depuraci√≥n de contratos </h2><br>  console :: debug (msg) imprime informaci√≥n de depuraci√≥n mientras depura un contrato.  La informaci√≥n del mensaje se ingresar√° en el archivo de registro del nodo.  Un requisito previo es establecer el nivel del archivo de registro en modo de depuraci√≥n cuando se ejecuta el nodo de prueba de Ontology local. <br><br>  runtime :: notify (msg) muestra la informaci√≥n de depuraci√≥n adecuada al depurar el contrato.  Este m√©todo guardar√° la informaci√≥n ingresada en el circuito y puede solicitarse desde el circuito utilizando el m√©todo getSmartCodeEvent. <br><br><hr><br><blockquote>  El art√≠culo fue traducido por Hashrate &amp; Shares espec√≠ficamente para OntologyRussia.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">haga clic</a> </blockquote><br>  ¬øEres desarrollador?  √önete a nuestra comunidad tecnol√≥gica en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Discord</a> .  Adem√°s, eche un vistazo al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Centro de desarrolladores</a> en nuestro sitio web, donde puede encontrar herramientas para desarrolladores, documentaci√≥n y mucho m√°s. <br><br><h4>  Ontolog√≠a </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sitio web de ontolog√≠a</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Github</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">discordia</a> </li><li>  Telegram <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ingl√©s</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ruso</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Twitter</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Reddit</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/471878/">https://habr.com/ru/post/471878/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../471866/index.html">Visualizaci√≥n del analizador PEG</a></li>
<li><a href="../471868/index.html">Gen√©tica del amor: conflicto entre g√©neros como base para la cooperaci√≥n en parejas de p√°jaros mon√≥gamos</a></li>
<li><a href="../471870/index.html">Uso efectivo de libdispatch</a></li>
<li><a href="../471874/index.html">C√≥mo pasamos por alto las pautas de revisi√≥n y lanzamos un servidor en el tel√©fono</a></li>
<li><a href="../471876/index.html">PDU y All-All-All: distribuci√≥n de energ√≠a en rack</a></li>
<li><a href="../471880/index.html">Idea para Geek Halloween, o tiempo para elegir GeekMask</a></li>
<li><a href="../471884/index.html">10 utilidades gratuitas de ApexSQL para administrar bases de datos de Microsoft SQL Server</a></li>
<li><a href="../471886/index.html">VMmanager 6: presentaci√≥n de la caja y comparaci√≥n con la generaci√≥n anterior</a></li>
<li><a href="../471890/index.html">Inferencia variacional: ¬øqu√© es y qu√© come?</a></li>
<li><a href="../471892/index.html">6 historias pr√°cticas de nuestros d√≠as de semana SRE</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>