<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï∫üèΩ üë∫ üê± Etherblade.net - projeto de c√≥digo-fonte aberto para criar um encapsulador de tr√°fego Ethernet no FPGA (parte um) ‚ÜîÔ∏è üßíüèø ‚õÑÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quero fazer uma reserva imediata de que este artigo n√£o apenas implica leitura passiva, mas tamb√©m convida todos a participar do desenvolvimento. Prog...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Etherblade.net - projeto de c√≥digo-fonte aberto para criar um encapsulador de tr√°fego Ethernet no FPGA (parte um)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439540/"><img src="https://habrastorage.org/webt/ny/dp/nj/nydpnjy4-t3sceksgb2crf_odse.jpeg" alt="imagem"><br><br>  Quero fazer uma reserva imediata de que este artigo n√£o apenas implica leitura passiva, mas tamb√©m convida todos a participar do desenvolvimento.  Programadores de sistemas, desenvolvedores de hardware, engenheiros de rede e DevOps s√£o bem-vindos. <br><br>  Como o projeto est√° no cruzamento da tecnologia de rede e do design de hardware, vamos dividir nossa conversa em tr√™s partes - ser√° mais f√°cil adaptar as informa√ß√µes a um p√∫blico espec√≠fico de leitores. <br><br>  Defina a primeira parte como introdut√≥ria.  Aqui, falaremos sobre o encapsulador de tr√°fego Ethernet de hardware criado no FPGA, discutiremos suas principais fun√ß√µes, recursos arquitet√¥nicos e vantagens em compara√ß√£o com as solu√ß√µes de software. <br><br>  A segunda parte, vamos cham√°-la de "rede", ser√° mais interessante para os desenvolvedores de hardware que desejam conhecer melhor as tecnologias de rede.  Ser√° dedicado ao papel que ‚ÄúEtherblade.net‚Äù pode assumir nas redes de operadoras de telecomunica√ß√µes.  Tamb√©m falaremos sobre o conceito de SDN <i>(rede definida por software)</i> e como o hardware de rede aberta pode complementar e at√© competir com solu√ß√µes de grandes fornecedores, como Cisco e Juniper. <br><br>  E a terceira parte √© o "hardware", que tem mais probabilidade de interessar aos engenheiros de rede que desejam participar do design de hardware e come√ßar a desenvolver dispositivos de rede por conta pr√≥pria.  Nele, examinaremos mais de perto o fluxo de trabalho do FPGA, a ‚Äúuni√£o de software e hardware‚Äù, placas do FPGA, ambientes de desenvolvimento e outros problemas que mostram como conectar-se para participar do projeto EtherBlade.net. <br>  Ent√£o vamos l√°! <br><a name="habracut"></a><br><h4>  Encapsulamento Ethernet </h4><br>  O objetivo do projeto Etherblade.net √© projetar e construir um dispositivo que possa, no n√≠vel do hardware, emular um canal Ethernet L2 sobre um ambiente L3.  Um caso de uso simples √© conectar servidores e esta√ß√µes de trabalho diferentes entre si da mesma maneira como se houvesse um cabo Ethernet f√≠sico comum entre eles. <br><br>  Na Internet, voc√™ pode encontrar termos diferentes para esta tecnologia.  Os mais comuns s√£o <i>pseudowire, evpn, L2VPN, e-line / e-tree / e-lan</i> , etc.  Bem, um grande n√∫mero de termos derivativos √© diferente para diferentes tipos de redes de transporte atrav√©s das quais um canal Ethernet virtual √© instalado. <br><br>  Assim, por exemplo, a emula√ß√£o Ethernet atrav√©s de uma rede IP √© fornecida pelas seguintes tecnologias - <i>EoIP, VxLAN, OTV</i> ; <br>  emula√ß√£o Ethernet na rede MPLS - <i>tecnologias VPLS e EoMPLS</i> ; <br>  A emula√ß√£o Ethernet sobre Ethernet √© uma tarefa das tecnologias <i>MetroEthernet</i> , <i>PBB-802.1ah</i> , etc. <br><br>  O trabalho dos profissionais de marketing √© apresentar termos, mas se os projetistas de ferro inventassem um dispositivo separado para cada termo ou abrevia√ß√£o, eles ficariam loucos.  Portanto, o objetivo dos desenvolvedores de hardware e nosso objetivo √© desenvolver um dispositivo universal - um encapsulador que pode encapsular quadros ethernet em qualquer protocolo da rede de transporte, seja <i>IP / IPv6, MPLS, Ethernet</i> , etc. <br><br>  E esse encapsulador j√° foi implementado e est√° sendo desenvolvido em um projeto chamado "Etherblade-Version1 - encapsulator core". <br><br>  Para uma melhor compreens√£o, proponho considerar uma figura explicando esse princ√≠pio de encapsulamento: <br><img src="https://habrastorage.org/webt/8h/ha/3u/8hha3ulnruaxaokrf-ravtcejuq.jpeg" alt="imagem"><br><br>  Vemos que os encapsuladores est√£o localizados em torno do per√≠metro da rede de transporte da transportadora.  Cada encapsulador possui duas interfaces <i>(L2 - porta de tronco, "olhando" em dire√ß√£o aos clientes, e L3-interface, que "olha" em dire√ß√£o √† rede de transporte)</i> . <br><br>  Vamos dar uma olhada no encapsulador mais √† direita.  Os clientes est√£o conectados a ele, onde o tr√°fego de cada cliente "vai" em uma vlan-e separada.  O dispositivo deve ser capaz de criar canais virtuais para clientes individuais ou, em termos cient√≠ficos, ser capaz de encapsular o tr√°fego Ethernet para diferentes vlan s com diferentes cabe√ßalhos L3.  A figura mostra como um encapsulador emula quatro canais virtuais para quatro clientes: <br><br><ul><li>  vlan-11 (verde) - <i>Ethernet sobre IP (IPv4 + GRE)</i> ; </li><li>  vlan-12 (roxo) - <i>Ethernet sobre IP (IPv4 + UDP)</i> ; </li><li>  vlan-13 (azul) - <i>Ethernet sobre MPLS</i> ; </li><li>  vlan-14 (vermelho) - <i>Ethernet sobre IP (IPv6 + UDP)</i> ; </li></ul><br>  Ent√£o, com a funcionalidade resolvida, agora vamos falar sobre as op√ß√µes para implementar o encapsulador. <br><br><h4>  Porqu√™ FPGA? </h4><br>  O FPGA √©, de fato, um chip que substitui um ferro de solda e uma caixa de chips <i>(elementos l√≥gicos, chips de mem√≥ria etc.)</i> .  Ou seja, com o FPGA, somos capazes de criar hardware para nossas necessidades e tarefas. <br><img src="https://habrastorage.org/webt/za/9u/56/za9u56d7cawurfoqoorc3m5vzp4.jpeg" alt="imagem"><br><br>  Mas, al√©m do ‚Äúconjunto de elementos e ferro de soldar‚Äù, tamb√©m √© necess√°rio ter diagramas de circuitos.  Portanto, o reposit√≥rio de tais esquemas dos quais voc√™ pode "soldar" o encapsulador dentro do FPGA e obter um dispositivo de trabalho √© o projeto "Etherblade.net".  Outra vantagem importante do FPGA pode ser chamada de fato de que seus elementos podem ser "soldados novamente" a novos circuitos, mas os pr√≥prios circuitos, gra√ßas ao reposit√≥rio, n√£o precisam ser criados e verificados "do zero" para implementar novas funcionalidades. <br><br>  E, no entanto, por que FPGA, e n√£o uma solu√ß√£o de software? <br><br>  Obviamente, se a pergunta fosse feita sobre o desenvolvimento do sistema do zero, pegar um computador pronto e escrever um programa seria mais f√°cil e r√°pido do que o desenvolvimento de um dispositivo de hardware especializado. <br><br>  Para simplicidade e velocidade de desenvolvimento, no entanto, √© necess√°rio pagar um desempenho pior, e essa √© a principal desvantagem da solu√ß√£o de software.  O fato √© que o software √© um programa de computador que possui um tempo de execu√ß√£o vari√°vel devido a ramifica√ß√µes e loops.  Adicionamos aqui interrup√ß√µes constantes do microprocessador pelo sistema operacional e recircula√ß√£o de tr√°fego no subsistema DMA. <br><br>  Em uma implementa√ß√£o de hardware, nosso encapsulador √©, de fato, um buffer de "armazenamento e encaminhamento" de fluxo direto equipado com mem√≥ria adicional na qual os cabe√ßalhos s√£o armazenados.  Devido √† sua simplicidade e linearidade, a solu√ß√£o de hardware processa o tr√°fego a uma velocidade igual √† largura de banda do canal Ethernet com atrasos m√≠nimos e instabilidade est√°vel.  Como b√¥nus, adicionamos aqui solu√ß√µes de FPGA com menor consumo de energia e menor custo em compara√ß√£o com os sistemas de microprocessador. <br><br>  Antes de passar para o pr√≥ximo t√≥pico, deixe-me compartilhar com voc√™ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">este link</a> para um v√≠deo que demonstra um encapsulador em a√ß√£o.  <i>O v√≠deo √© acompanhado por legendas em ingl√™s e, se necess√°rio, o ‚ÄúYoutube‚Äù tem a op√ß√£o de ativar a tradu√ß√£o autom√°tica para o russo.</i> <br><br>  Na parte final do artigo, gostaria de falar sobre alguns blocos que tamb√©m est√£o sendo desenvolvidos como parte do projeto Etherblade.net. <br><br><h4>  Desenvolvimento do receptor ‚ÄúEtherblade-Version2 - decapsulator core‚Äù </h4><br>  Voc√™ deve ter notado que no diagrama de rede anterior <i>(que mostra os encapsuladores conectados √† rede do provedor),</i> h√° uma pequena observa√ß√£o indicando que o MTU na rede deve ser superior a 1560. Para grandes operadoras de telecomunica√ß√µes, isso n√£o √© um problema, pois elas trabalhe em canais de fibra √≥ptica "escuros" com jumbo-frames no hardware ativado.  Nesse caso, os pacotes Ethernet encapsulados com um tamanho m√°ximo de 1.500 bytes e um cabe√ßalho L3 adicional podem "caminhar" livremente por essas redes. <br><br>  Mas e se gostar√≠amos de usar a Internet comum com encapsuladores conectados, por exemplo, a modems DSL ou 4G dom√©sticos como uma rede de transporte?  Nesse caso, a parte receptora dos encapsuladores deve poder coletar quadros Ethernet fragmentados. <br><br>  No momento, nem a Cisco nem a Juniper oferecem essa funcionalidade em seus dispositivos, e isso √© compreens√≠vel, porque seus equipamentos est√£o focados em grandes operadoras de telecomunica√ß√µes.  O projeto EtherBlade.net foi inicialmente direcionado a clientes de v√°rios calibres e j√° possui em seu arsenal um m√©todo desenvolvido de montagem de fragmentos "hardware", que permite emular canais de qualquer lugar Ethernet com qualidade de servi√ßo de n√≠vel de telecomunica√ß√µes.  Para documenta√ß√£o detalhada e c√≥digos-fonte, bem-vindo ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://etherblade.net</a> . <br><br><h4>  10 gigabits </h4><br>  Atualmente, o trabalho ativo tamb√©m est√° em andamento em uma vers√£o de dez gigabytes do encapsulador e portando-o em hardware, em particular, para o conselho da equipe de P&amp;D geral de S√£o Petersburgo, mostrado no in√≠cio do artigo Intel Cyclone 10GX. <br><br>  Al√©m da funcionalidade descrita neste artigo, os encapsuladores de dez gigabits podem ser usados ‚Äã‚Äãnas redes das operadoras de telecomunica√ß√µes para redirecionar o tr√°fego "interessante" para os centros de compensa√ß√£o de DDoS, o servidor Yarovoy etc.  Leia mais sobre isso no pr√≥ximo artigo sobre o conceito de SDN <i>(rede definida por software)</i> e o uso do Etherblade.net em grandes redes - fique atento. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt439540/">https://habr.com/ru/post/pt439540/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt439526/index.html">Operadoras de telecomunica√ß√µes conduzir√£o "testes de campo" da lei de sustentabilidade do Runet</a></li>
<li><a href="../pt439528/index.html">Sem rastreamento de chamadas de custo</a></li>
<li><a href="../pt439532/index.html">O que h√° de novo no JavaScript ES2019</a></li>
<li><a href="../pt439534/index.html">Programa√ß√£o de produ√ß√£o e uso de drones na produ√ß√£o de petr√≥leo - 10 palestras da confer√™ncia GIS Tech Russia</a></li>
<li><a href="../pt439538/index.html">Programa√ß√£o da sociedade</a></li>
<li><a href="../pt439542/index.html">Nintendo deixa claro que apenas a pirataria pode salvar a hist√≥ria dos videogames</a></li>
<li><a href="../pt439544/index.html">Col√¥nia. Cap√≠tulo 24: Partida</a></li>
<li><a href="../pt439546/index.html">Os andr√≥ides sonham com punk el√©trico? Como eu ensinei uma rede neural a escrever m√∫sica</a></li>
<li><a href="../pt439550/index.html">Hackquest 2018. Resultados e revis√µes. Dia 1-3</a></li>
<li><a href="../pt439552/index.html">Extens√µes maliciosas do Chrome</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>