<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕵️ 👩🏻‍🚒 🗃️ VM还是Docker？ 🌲 💘 🎚️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="如何理解您需要Docker，而不是VM？ 让我们尝试了解虚拟机（VM）和Docker容器的隔离之间的主要区别，即它们是否可以互换以及如何使用它们。 


 那么Doc​​ker容器和VM之间有什么区别？ 
 虚拟机（VM）是具有所有虚拟设备和虚拟硬盘的虚拟计算机，在其上安装了新的独立OS（来宾OS）...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>VM还是Docker？</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474068/"><p>如何理解您需要Docker，而不是VM？ 让我们尝试了解虚拟机（VM）和Docker容器的隔离之间的主要区别，即它们是否可以互换以及如何使用它们。 </p><a name="habracut"></a><br><p>  <strong>那么Doc​​ker容器和VM之间有什么区别？</strong> <br>  <strong><em>虚拟机（VM）</em></strong>是具有所有虚拟设备和虚拟硬盘的虚拟计算机，在其上安装了新的独立OS（来宾OS）以及虚拟设备驱动程序，内存管理和其他组件。 也就是说，我们获得了物理设备的抽象，该抽象使您可以在一台计算机上运行许多虚拟计算机。 虚拟设备显示在系统属性中，并且已安装的应用程序与其交互，就好像它是真实的一样。 同时，虚拟机本身可以与真实计算机完全隔离，尽管它可以访问其磁盘和外围设备。 <br>  <strong><em>已安装的VM可以通过不同方式占用计算机磁盘上的空间：</em></strong> </p><br><ul><li> 固定的硬盘空间，可以更快地访问虚拟硬盘并避免文件碎片； </li><li> 动态内存分配。 当安装其他应用程序时，将为它们动态分配内存，直到达到分配给它的最大数量。 </li></ul><br><p> 使用VM时，模拟虚拟设备和启动来宾OS，支持和管理必要的环境以使应用程序正常工作会产生额外费用。 另外，当您在服务器上部署大量虚拟机时，它们在硬盘驱动器上占据的空间只会增加，因为 每个VM至少需要用于访客OS和虚拟设备驱动程序的空间。 </p><br><p>  <strong><em>Docker</em></strong>是用于创建基于容器的应用程序的软件。 容器和虚拟机解决了一个问题，但解决方法不同。 容器占用的空间更少，因为 重用比VM更多的主机系统共享资源 与VM不同，它在OS级别而不是硬件上提供虚拟化。 这种方法提供了更少的硬盘空间，更快的部署和更容易的扩展。 </p><br><p>  docker容器提供了更有效的应用程序封装机制，提供了必要的主机系统接口。 此功能允许容器拆分系统的核心，每个容器都作为主OS的单独进程工作，该主OS具有自己的虚拟地址空间，因此不能更改属于不同存储区的数据。 </p><br><p>  Docker是在应用程序中使用容器的最常见技术。 它已成为该领域的标准，建立在Linux内核提供的cgroup和名称空间的基础上。  Docker的本机操作系统是Linux，因此Windows上Docker容器的启动将在Linux虚拟机内进行。 </p><br><p>  <strong>容器是用什么制成的？</strong> </p><br><p>  <strong><em>图像</em></strong>是创建容器的主要元素。 该映像是从添加到项目中的Dockerfile创建的，是一组彼此分层并以只读方式分组在一起的文件系统（层）。 最大层数为127。 </p><br><p> 每个映像的核心是一个基本映像，该映像由FROM命令指示-Dockerfile映像形成的入口点。 每一层都是只读层，由一个命令表示，该命令修改写入Dockerfile的文件系统。 这种方法允许来自不同文件层的不同文件和目录透明地重叠，从而创建级联集成的文件系统。 图层包含元数据，使您可以在运行时保存和构建每个图层的相关信息。 每一层都包含到下一层的链接，如果该层没有链接，则这是图像中的最顶层。 <br> 从Docker EE版本06.17.02-ee5和Docker引擎-社区开始，使用Overlay2或Overlay，并且较早的版本使用AuFS（高级多层Union文件系统）。 </p><br><p>  <strong>容器-如何运作？</strong> </p><br><p>  <strong><em>容器</em></strong>是组合代码和依赖关系的应用程序级抽象。 容器总是从图像创建的，添加可写的顶层并初始化各种参数。 由于容器具有其自己的记录层，并且所有更改都保存在该层中，因此多个容器可以共享对同一图像的访问。 可以通过docker-compose.yml项目中的文件配置每个容器，并设置各种参数，例如容器名称，端口，标识符，其他容器之间的依赖关系。 如果您未在设置中指定容器名称，则Docker每次都会创建一个新容器，并为其随机分配一个名称。 </p><br><p> 当容器从映像启动时，Docker会在下面的任何层之上安装文件系统以进行读写。 在这里将执行所有过程。 首次启动容器时，初始读写层为空。 发生更改时，它们将应用于此层。 例如，如果您要修改文件，则该文件将从底层只读层复制到读写层。 该文件的只读版本将仍然存在，但现在已隐藏在副本下。 </p><br><p>  <strong>级联联合文件系统如何工作？</strong> </p><br><p> 级联集成文件系统（FS）实现了写时复制（COW）复制机制。 工作单元是一个层，应将每个层视为一个独立的完整文件系统，并具有从根目录开始的目录层次结构。 这种方法使用文件系统的统一安装，对用户透明地允许将各种文件系统（称为分支）的文件和目录组合到单个连接的文件系统中。 具有相同路径的目录的内容将一起显示在结果文件系统的一个组合目录中（在单个名称空间中）。 </p><br><p>  <strong><em>根据以下原则合并图层：</em></strong> </p><br><ul><li> 其中一层成为上层，第二层及后续层成为下层。 </li><li> 用户可以“从上到下”访问图层对象，即 如果所请求的对象在“上层”中，则返回该对象，而不管在“下层”中是否存在具有该名称的对象； 否则，返回“下层”的对象； 如果所请求的对象不在那里或那里，则返回错误“没有这样的文件或目录”； </li><li> 工作层是“上层”，也就是说，所有更改数据的用户操作仅反映在上层，而不会影响下层的内容。 </li></ul><br><p>  <strong>结论</strong> </p><br><p> 如果需要使用保证的专用资源和虚拟硬件来虚拟化系统，则应选择一个VM。 什么使VM得以使用： </p><br><ul><li> 在一台计算机上安装几种不同操作系统的能力； </li><li> 在虚拟机之间分配系统资源； </li><li> 无需重启即可在操作系统之间进行切换； </li><li> 能够对系统的当前状态和磁盘内容进行“快照”，以使系统返回其原始状态； </li><li> 在硬件级别隔离故障和违反安全系统； </li><li> 在一台计算机上模拟计算机网络的能力。 </li></ul><br><p> 如果您想将正在运行的应用程序隔离为单独的进程，那么Doc​​ker适合您。 为何使用Docker： </p><br><ul><li> 在操作系统级别提供虚拟化； </li><li> 容器共享系统的核心，作为主要OS的独立进程工作； </li><li> 使用cgroup的每个容器可以分别限制系统资源的消耗，例如内存消耗和CPU负载； </li><li> 容器的FS使用COW机制创建的，从而可以加速应用程序部署，减少内存消耗并节省磁盘空间。 </li><li> 一个容器的已更改文件系统可以用作形成其他容器的新基本映像的基础。 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN474068/">https://habr.com/ru/post/zh-CN474068/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN474048/index.html">HILDACRYPT：新的勒索软件袭击了备份系统和防病毒解决方案</a></li>
<li><a href="../zh-CN474050/index.html">如果您是音乐界的明星，那么就不能随便运行应用程序</a></li>
<li><a href="../zh-CN474052/index.html">旅行者的困难篮</a></li>
<li><a href="../zh-CN474054/index.html">公开网络研讨会“ MongoDB基础知识”</a></li>
<li><a href="../zh-CN474062/index.html">数钱。 选择信用评分的指标</a></li>
<li><a href="../zh-CN474070/index.html">BYOD会议室设备</a></li>
<li><a href="../zh-CN474076/index.html">如何在利基市场上成为世界上最好的</a></li>
<li><a href="../zh-CN474080/index.html">电报bot显示了10种最受欢迎​​的世界期刊的头版</a></li>
<li><a href="../zh-CN474082/index.html">Phonocut-家用黑胶唱片机：关于起飞可能性的思考</a></li>
<li><a href="../zh-CN474084/index.html">朱莉娅和神经网络：助焊剂</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>