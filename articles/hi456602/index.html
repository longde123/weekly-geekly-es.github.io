<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСа ЁЯЩИ тЬНЁЯП╝ IOS рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдСрдЯреЛ-рд░рд┐рдиреНрдпреВрдПрдмрд▓ рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЧрд╛рдЗрдб тЖЦя╕П ЁЯРЫ ЁЯОе</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╕рднреА рдХреЛ рдирдорд╕реНрдХрд╛рд░! рдореЗрд░рд╛ рдирд╛рдо рдбреЗрдирд┐рд╕ рд╣реИ, рдореИрдВ Apphud рдХреЛ рд╡рд┐рдХрд╕рд┐рдд рдХрд░ рд░рд╣рд╛ рд╣реВрдВ , рдЬреЛ рдХрд┐ iOS рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдСрдЯреЛ-рд░рд┐рдиреНрдпреВрдПрдмрд▓ рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдХреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реЗрд╡рд╛ рд╣реИред...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>IOS рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдСрдЯреЛ-рд░рд┐рдиреНрдпреВрдПрдмрд▓ рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЧрд╛рдЗрдб</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/apphud/blog/456602/"><p><img src="https://habrastorage.org/webt/qy/ut/ez/qyutezbsfdccsr1yrml6revzsbm.png" alt="рдЫрд╡рд┐"></p><br><p>  рд╕рднреА рдХреЛ рдирдорд╕реНрдХрд╛рд░!  рдореЗрд░рд╛ рдирд╛рдо рдбреЗрдирд┐рд╕ рд╣реИ, рдореИрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Apphud рдХреЛ</a> рд╡рд┐рдХрд╕рд┐рдд рдХрд░ рд░рд╣рд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реВрдВ</a> , рдЬреЛ рдХрд┐ iOS рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдСрдЯреЛ-рд░рд┐рдиреНрдпреВрдПрдмрд▓ рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдХреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реЗрд╡рд╛ рд╣реИред </p><br><p>  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рдореИрдВ рдЖрдкрдХреЛ iOS 12 рдФрд░ iOS 13. рдореЗрдВ рдСрдЯреЛ-рд░рд┐рдиреНрдпреВрдПрдмрд▓ рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ, рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд░рдиреЗ рдФрд░ рдорд╛рдиреНрдп рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдмрддрд╛рдКрдВрдЧрд╛, рдПрдХ рдмреЛрдирд╕ рдХреЗ рд░реВрдк рдореЗрдВ, рдореИрдВ рдЖрдкрдХреЛ рдЙрди рд╕реВрдХреНрд╖реНрдо рдмрд┐рдВрджреБрдУрдВ рдФрд░ рдиреБрдХрд╕рд╛рдиреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдКрдВрдЧрд╛ рдЬреЛ рд╕рднреА рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рдирд╣реАрдВ рд╣реИрдВред <a name="habracut"></a></p><br><h2 id="nastroyka-podpisok-v-app-store-connect">  рдРрдк рд╕реНрдЯреЛрд░ рдХрдиреЗрдХреНрдЯ рдкрд░ рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рд╕реЗрдЯ рдХрд░реЗрдВ </h2><br><p>  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рдмрдВрдбрд▓ рдЖрдИрдбреА рдФрд░ рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ рдЖрдк рдЗрди рдЪрд░рдгреЛрдВ рдХреЛ рдЫреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред  рдпрджрд┐ рдЖрдк рдкрд╣рд▓реА рдмрд╛рд░ рдХреЛрдИ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдирд┐рдореНрди рдХрд╛рд░реНрдп рдХрд░реЗрдВ: </p><br><p>  рдЖрдкрдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Apple рдбреЗрд╡рд▓рдкрд░ рдкреЛрд░реНрдЯрд▓</a> рдкрд░ <em>рдПрдХ рд╕реНрдкрд╖реНрдЯ рдмрдВрдбрд▓ рдЖрдИрдбреА (рдРрдк рдЖрдИрдбреА)</em> рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ред  <em>рдкреНрд░рдорд╛рдг рдкрддреНрд░, рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдФрд░ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓</em> рдирд╛рдо рдХреЗ рдПрдХ рдкреГрд╖реНрда рдХреЗ рд╕рд╛рде, <em>рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛</em> рдЯреИрдм рдкрд░ рдЬрд╛рдПрдВред  рдЬреВрди 2019 рдореЗрдВ, Apple рдиреЗ рдЖрдЦрд┐рд░рдХрд╛рд░ ASC (рдРрдк рд╕реНрдЯреЛрд░ рдХрдиреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП рдЫреЛрдЯрд╛) рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдкреЛрд░реНрдЯрд▓ рдХреЗ рд▓реЗрдЖрдЙрдЯ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/fad/ba4/609/fadba4609e2e25bf48f1f9149cf81332.png" alt="2019 рдореЗрдВ Apple рдбреЗрд╡рд▓рдкрд░ рдкреЛрд░реНрдЯрд▓ рдХреЗ рд▓рд┐рдП рдирдпрд╛ рдбрд┐рдЬрд╝рд╛рдЗрди"><br>  <em>2019 рдореЗрдВ Apple рдбреЗрд╡рд▓рдкрд░ рдкреЛрд░реНрдЯрд▓ рдХреЗ рд▓рд┐рдП рдирдпрд╛ рдбрд┐рдЬрд╝рд╛рдЗрди</em> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/cbb/84c/1ea/cbb84c1eac492c0c10e18aa373272c49.png"></p><br><p> рд╕реНрдкрд╖реНрдЯ рдмрдВрдбрд▓ рдЖрдИрдбреА рдЖрдорддреМрд░ рдкрд░ рдбреЛрдореЗрди рд╢реИрд▓реА ( <code>com.apphud.subscriptionstest</code> ) рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╣реЛрддреА рд╣реИред  <em>рдХреНрд╖рдорддрд╛рдУрдВ</em> рдЕрдиреБрднрд╛рдЧ рдореЗрдВ, рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ <em>рдЗрди-рдРрдк рдЦрд░реАрджрд╛рд░реА рдХреЗ</em> рдЖрдЧреЗ рд╡рд╛рд▓рд╛ рдЪреЗрдХрдорд╛рд░реНрдХ рдкрд╣рд▓реЗ <em>рд╕реЗ</em> рд╣реА рдЪреЗрдХ рдХрд┐рдпрд╛ рд╣реБрдЖ рд╣реИред  <em>рдмрдВрдбрд▓ рдЖрдИрдбреА</em> ( <em>рдРрдк рдЖрдИрдбреА</em> ) рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рдж, рдРрдк рд╕реНрдЯреЛрд░ рдХрдиреЗрдХреНрдЯ рдкрд░ рдЬрд╛рдПрдВред </p><br><h3 id="testovye-polzovateli-sandbox-users">  рдкрд░реАрдХреНрд╖рдг рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ (рд╕реИрдВрдбрдмреЙрдХреНрд╕ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛) </h3><br><p>  рднрд╡рд┐рд╖реНрдп рдХреА рдЦрд░реАрдж рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдПрдХ рдкрд░реАрдХреНрд╖рдг рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <em>рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рдПрдХреНрд╕реЗрд╕</em> рдЯреИрдм рдореЗрдВ рдПрдПрд╕рд╕реА рдкрд░ рдЬрд╛рдПрдВ, рдлрд┐рд░ <em>рд╕реИрдВрдбрдмреЙрдХреНрд╕ рдЯреЗрд╕реНрдЯрд░реНрд╕ рдХреЗ рдкрд╛рд╕ред</em> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/6b9/15b/25d/6b915b25d4b0ee1374756d84c04d64a4.png" alt="рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реИрдВрдбрдмреЙрдХреНрд╕ рдирд┐рд░реНрдорд╛рдг рдкреНрд░рдкрддреНрд░"><br>  <em>рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реИрдВрдбрдмреЙрдХреНрд╕ рдирд┐рд░реНрдорд╛рдг рдкреНрд░рдкрддреНрд░</em> </p><br><blockquote>  рдкрд░реАрдХреНрд╖рдХ рдмрдирд╛рддреЗ рд╕рдордп, рдЖрдк рдХрд┐рд╕реА рднреА рдЧреИрд░-рдореМрдЬреВрдж рдбреЗрдЯрд╛ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд, рдлрд┐рд░ рдИрдореЗрд▓ рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХреЛ рди рднреВрд▓реЗрдВ! </blockquote><p>  рдореИрдВ рд▓реЗрдЦ рдХреЗ рдЕрдВрдд рдореЗрдВ рдкрд░реАрдХреНрд╖рдг рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЗ рд╕рд╛рде рдЦрд░реАрджрд╛рд░реА рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛ред </p><br><p>  рдПрдХ рдЕрдиреНрдп рдорд╣рддреНрд╡рдкреВрд░реНрдг рдХрджрдо " <em>рд╕рдордЭреМрддреЗ, рдХрд░реЛрдВ рдФрд░ рдмреИрдВрдХрд┐рдВрдЧ рдХрд╛рд░реНрдпреЛрдВ</em> " рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдЕрдиреБрдмрдВрдз рдФрд░ рдмреИрдВрдХ рдбреЗрдЯрд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ рд╣реИред  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рднреБрдЧрддрд╛рди рдХрд┐рдП рдЧрдП рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдЕрдиреБрдмрдВрдз рдирд╣реАрдВ рд╣реИ, рддреЛ рдЖрдк рдСрдЯреЛ-рдЕрдХреНрд╖рдп рд╕рджрд╕реНрдпрддрд╛ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдВрдЧреЗ! </p><br><p>  рдЙрд╕рдХреЗ рдмрд╛рдж, рдЖрдк рдРрдк рд╕реНрдЯреЛрд░ рдХрдиреЗрдХреНрдЯ рдореЗрдВ рдПрдХ рдирдпрд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдирд╛рдо рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ рдФрд░ рдкреИрдХреЗрдЬ <em>рдЖрдИрдбреА рдХреЗ</em> рд░реВрдк рдореЗрдВ рдЕрдкрдиреА <em>рдмрдВрдбрд▓ рдЖрдИрдбреА</em> рдЪреБрдиреЗрдВред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2b9/15d/251/2b915d25116265c73951ebe326ca672f.png" alt="рдкреИрдХреЗрдЬ рдЖрдИрдбреА рдЖрдкрдХреА рдмрдВрдбрд▓ рдЖрдИрдбреА рд╣реИ"><br>  <em>рдкреИрдХреЗрдЬ рдЖрдИрдбреА рдЖрдкрдХреА рдмрдВрдбрд▓ рдЖрдИрдбреА рд╣реИ</em> </p><br><p>  рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдиреЗ рдХреЗ рддреБрд░рдВрдд рдмрд╛рдж, <em>рд╕реБрд╡рд┐рдзрд╛рдПрдБ</em> рдЯреИрдм рдкрд░ рдЬрд╛рдПрдВ <em>ред</em> </p><br><blockquote>  рдпрджрд┐ рдЖрдкрдиреЗ рдкрд╣рд▓реЗ рд╣реА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛ рд▓рд┐рдпрд╛ рд╣реИ, рддреЛ рдЖрдк рдпрд╣рд╛рдВ рд╕реЗ рдкрдврд╝рдирд╛ рдЬрд╛рд░реА рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВред </blockquote><p>  рд╕реНрд╡рддрдГ-рдирд╡реАрдХрд░рдгреАрдп рд╕рджрд╕реНрдпрддрд╛ рдмрдирд╛рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдХрдИ рдЪрд░рдг рд╣реЛрддреЗ рд╣реИрдВ: </p><br><p>  <strong>1. рдПрдХ рд╕рджрд╕реНрдпрддрд╛ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдмрдирд╛рдПрдБ рдФрд░ рдПрдХ <em>рд╕рджрд╕реНрдпрддрд╛ рд╕рдореВрд╣</em> рдмрдирд╛рдПрдБред</strong>  рдПрдХ рд╕рджрд╕реНрдпрддрд╛ рд╕рдореВрд╣ рд╡рд┐рднрд┐рдиреНрди рдЕрд╡рдзрд┐рдпреЛрдВ рдФрд░ рдХреАрдорддреЛрдВ рдХреЗ рд╕рд╛рде рд╕рджрд╕реНрдпрддрд╛ рдХрд╛ рдПрдХ рд╕рдВрдЧреНрд░рд╣ рд╣реИ, рд▓реЗрдХрд┐рди рдЬреЛ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдореЗрдВ рд╕рдорд╛рди рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдЦреЛрд▓рддреЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕рджрд╕реНрдпрддрд╛ рд╕рдореВрд╣ рдореЗрдВ, рдЖрдк рдХреЗрд╡рд▓ рдПрдХ рдмрд╛рд░ рдирд┐: рд╢реБрд▓реНрдХ рдкрд░реАрдХреНрд╖рдг рдЕрд╡рдзрд┐ рдХреЛ рд╕рдХреНрд░рд┐рдп рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдХреЗрд╡рд▓ рдПрдХ рд╕рджрд╕реНрдпрддрд╛ рд╣реА рд╕рдХреНрд░рд┐рдп рд╣реЛ рд╕рдХрддреА рд╣реИред  рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреЗ рдЖрд╡реЗрджрди рдореЗрдВ рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рджреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рджрд╕реНрдпрддрд╛рдПрдБ рд╣реЛрдВ, рддреЛ рдЖрдкрдХреЛ рд╕рджрд╕реНрдпрддрд╛ рдХреЗ рджреЛ рд╕рдореВрд╣ рдмрдирд╛рдиреЗ рд╣реЛрдВрдЧреЗред </p><br><p>  <strong>2. рд╕рджрд╕реНрдпрддрд╛ рдбреЗрдЯрд╛ рдореЗрдВ рднрд░рдирд╛: рдЕрд╡рдзрд┐, рдРрдк рд╕реНрдЯреЛрд░ рдореЗрдВ рдирд╛рдо рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдВ (рдХреЗрд╡рд▓ рдирд╛рдо рдХреЗ рд╕рд╛рде рднреНрд░рдорд┐рдд рди рд╣реЛрдВ) рдФрд░ рд╡рд┐рд╡рд░рдгред</strong>  рдпрджрд┐ рдЖрдк рд╕рдореВрд╣ рдореЗрдВ рдкрд╣рд▓реА рд╕рджрд╕реНрдпрддрд╛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рд╕рджрд╕реНрдпрддрд╛ рд╕рдореВрд╣ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдирд╛рдо рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдЕрдкрдиреЗ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рдЕрдзрд┐рдХ рдмрд╛рд░ рд╕рд╣реЗрдЬрдирд╛ рдпрд╛рдж рд░рдЦреЗрдВ, ASC рдХрд┐рд╕реА рднреА рдХреНрд╖рдг рдлреНрд░реАрдЬ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджреЗрдирд╛ рдмрдВрдж рдХрд░ рд╕рдХрддрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/62b/639/230/62b6392305ee8cd98000ba60aa408eb8.png" alt="рд╕рджрд╕реНрдпрддрд╛ рдкреГрд╖реНрда"><br>  <em>рд╕рджрд╕реНрдпрддрд╛ рд╕реНрдХреНрд░реАрди</em> </p><br><p>  <strong>3. рд╕рджрд╕реНрдпрддрд╛ рдореВрд▓реНрдп рднрд░рдирд╛ред</strong>  рджреЛ рдЪрд░рдг рд╣реИрдВ: рдореВрд▓реНрдп рдФрд░ рд╡рд┐рд╢реЗрд╖ рдкреНрд░рд╕реНрддрд╛рд╡ рдмрдирд╛рдирд╛ред  рдХрд┐рд╕реА рднреА рдореБрджреНрд░рд╛ рдореЗрдВ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдореВрд▓реНрдп рдХрд╛ рд╕рдВрдХреЗрдд рджреЗрдВ, рдпрд╣ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЕрдиреНрдп рд╕рднреА рджреЗрд╢реЛрдВ рдХреЗ рд▓рд┐рдП рдкреБрдирд░реНрдЧрдгрдирд╛ рд╣реИред  рдкрд░рд┐рдЪрдпрд╛рддреНрдордХ рдСрдлрд╝рд░: рдпрд╣рд╛рдВ рдЖрдк рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдирд┐рдГрд╢реБрд▓реНрдХ рдкрд░реАрдХреНрд╖рдг рдЕрд╡рдзрд┐ рдпрд╛ рдкреНрд░реАрдкреЗрдб рдЫреВрдЯ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  2019 рдореЗрдВ рдЕрднреА рд╣рд╛рд▓ рд╣реА рдореЗрдВ рдРрдк рд╕реНрдЯреЛрд░ рдкрд░ рдкреНрд░рдЪрд╛рд░ рджрд┐рдЦрд╛рдИ рджрд┐рдпрд╛: рд╡реЗ рдЖрдкрдХреЛ рдЙрди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд╡рд┐рд╢реЗрд╖ рдЫреВрдЯ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ, рдЬрд┐рдирдХреА рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЪреБрдХреА рд╣реИ рдФрд░ рдЖрдк рд╡рд╛рдкрд╕ рд▓реМрдЯрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред </p><br><h3 id="generaciya-sekretnogo-obschego-klyucha-shared-secret-key">  рд╕рд╛рдЭрд╛ рдХреБрдВрдЬреА рд╕рд╛рдЭрд╛рдХрд░рдг </h3><br><p>  рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдИ рдЧрдИ рд╕рднреА рд╕рджрд╕реНрдпрддрд╛ рдХреА рд╕реВрдЪреА рд╡рд╛рд▓реЗ рдкреГрд╖реНрда рдкрд░, рдЖрдкрдХреЛ <em>рдПрдкреНрд▓рд┐рдХреЗрд╢рди</em> рдмрдЯрди рдХреЗ <em>рд▓рд┐рдП рд╕рд╛рдЭрд╛ рдХреА рдЧрдИ рдХреБрдВрдЬреА</em> рджрд┐рдЦрд╛рдИ рджреЗрдЧреАред  рдпрд╣ рдПрдХ рд╡рд┐рд╢реЗрд╖ рд▓рд╛рдЗрди рд╣реИ рдЬреЛ рдПрдХ iOS рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдПрдХ рдЪреЗрдХ рдХреЛ рдорд╛рдиреНрдп рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рд╣рдореЗрдВ рд╕рджрд╕реНрдпрддрд╛ рдХреА рд╕реНрдерд┐рддрд┐ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЪреЗрдХ рдХреЛ рдорд╛рдиреНрдп рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </p><br><p>  рд╕рд╛рдЭрд╛ рдХреБрдВрдЬреА рджреЛ рдкреНрд░рдХрд╛рд░ рдХреА рд╣реЛ рд╕рдХрддреА рд╣реИ: рдЖрдкрдХреЗ рдЖрд╡реЗрджрди рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рдХреБрдВрдЬреА рдпрд╛ рдЖрдкрдХреЗ рдЦрд╛рддреЗ рдХреА рдПрдХрд▓ рдХреБрдВрдЬреАред  рдорд╣рддреНрд╡рдкреВрд░реНрдг: рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдРрдк рд╕реНрдЯреЛрд░ рдореЗрдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╣реИ, рддреЛ рдХреБрдВрдЬреА рдХреЛ рдлрд┐рд░ рд╕реЗ рди рдмрдирд╛рдПрдВ, рдЕрдиреНрдпрдерд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЪреЗрдХ рдХреЛ рдорд╛рдиреНрдп рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдВрдЧреЗ рдФрд░ рдЖрдкрдХрд╛ рдЖрд╡реЗрджрди рдЙрдореНрдореАрдж рдХреЗ рдореБрддрд╛рдмрд┐рдХ рдХрд╛рдо рдХрд░рдирд╛ рдмрдВрдж рдХрд░ рджреЗрдЧрд╛ред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/644/ce1/5d1/644ce15d1961d54f5f6cc1cf15b7dda0.png" alt="рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рддреАрди рд╕рджрд╕реНрдпрддрд╛ рд╕рдореВрд╣ рдФрд░ 3 рд╡рд╛рд░реНрд╖рд┐рдХ рд╕рджрд╕реНрдпрддрд╛рдПрдБ рдмрдирд╛рдИ рдЬрд╛рддреА рд╣реИрдВред"><br>  <em>рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рддреАрди рд╕рджрд╕реНрдпрддрд╛ рд╕рдореВрд╣ рдФрд░ 3 рд╡рд╛рд░реНрд╖рд┐рдХ рд╕рджрд╕реНрдпрддрд╛рдПрдБ рдмрдирд╛рдИ рдЬрд╛рддреА рд╣реИрдВред</em> </p><br><p>  рдЕрдкрдиреЗ рд╕рднреА рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдФрд░ рд╢реЗрдпрд░ рдХреА рдЧрдИ рдХреБрдВрдЬреА рдХреА рдЖрдИрдбреА рдХреЙрдкреА рдХрд░реЗрдВ, рдпрд╣ рдмрд╛рдж рдореЗрдВ рдХреЛрдб рдореЗрдВ рдХрд╛рдо рдЖрдПрдЧрд╛ред </p><br><h2 id="programmnaya-chast">  рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИ </h2><br><p>  рдЪрд▓реЛ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рднрд╛рдЧ рдХреЗ рд▓рд┐рдП рдиреАрдЪреЗ рдЙрддрд░реЛред  рдкреВрд░реНрдг рдЦрд░реАрджрд╛рд░реА рдкреНрд░рдмрдВрдзрдХ рдмрдирд╛рдиреЗ рдореЗрдВ рдХреНрдпрд╛ рд▓рдЧрддрд╛ рд╣реИ?  рдХрдо рд╕реЗ рдХрдо, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП: </p><br><ol><li><p>  рдЦрд░реАрджрд╛рд░реА рдХрд░рддреЗ рд╕рдордп </p><br></li><li><p>  рд╕рджрд╕реНрдпрддрд╛ рд╕реНрдерд┐рддрд┐ рдЬрд╛рдВрдЪреЗрдВ </p><br></li><li><p>  рдЕрджреНрдпрддрди рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ </p><br></li><li><p>  рд▓реЗрди-рджреЗрди рдХреА рд╡рд╕реВрд▓реА (рдЪреЗрдХ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдореЗрдВ рднреНрд░рдорд┐рдд рд╣реЛрдиреЗ рдХреА рдирд╣реАрдВ!) </p><br></li></ol><br><h3 id="oformlenie-pokupok">  рдЦрд░реАрджрд╛рд░реА рдХрд░рддреЗ рд╕рдордп </h3><br><p>  рд╕рдВрдкреВрд░реНрдг рдЦрд░реАрдж рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ 2 рдЪрд░рдгреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: рдЙрддреНрдкрд╛рджреЛрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ ( <code>SKProduct</code> рд╡рд░реНрдЧ) рдФрд░ рдЦрд░реАрдж рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдирд╛ ( <code>SKPayment</code> class)ред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдореЗрдВ <code>SKPaymentTransactionObserver</code> рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреЗ рдкреНрд░рддрд┐рдирд┐рдзрд┐ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </p><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">// Starts products loading and sets transaction observer delegate @objc func startWith(arrayOfIds : Set&lt;String&gt;!, sharedSecret : String){ SKPaymentQueue.default().add(self) self.sharedSecret = sharedSecret self.productIds = arrayOfIds loadProducts() } private func loadProducts(){ let request = SKProductsRequest.init(productIdentifiers: productIds) request.delegate = self request.start() } public func productsRequest(_ request: SKProductsRequest, didReceive response: SKProductsResponse) { products = response.products DispatchQueue.main.async { NotificationCenter.default.post(name: IAP_PRODUCTS_DID_LOAD_NOTIFICATION, object: nil) } } func request(_ request: SKRequest, didFailWithError error: Error){ print("error: \(error.localizedDescription)") }</span></span></code> </pre> <br><p>  <code>IAP_PRODUCTS_DID_LOAD_NOTIFICATION</code> рд╕реВрдЪрдирд╛ <code>IAP_PRODUCTS_DID_LOAD_NOTIFICATION</code> рдЙрдкрдпреЛрдЧ рдХрд┐рд╕реА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ UI рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдЕрдЧрд▓рд╛, рд╣рдо рдЦрд░реАрдж рдХреЛ рдЖрд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рдзрд┐ рд▓рд┐рдЦрддреЗ рд╣реИрдВ: </p><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">purchaseProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(product : SKProduct, success: @escaping SuccessBlock, failure: @escaping FailureBlock)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-type"><span class="hljs-type">SKPaymentQueue</span></span>.canMakePayments() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-type"><span class="hljs-type">SKPaymentQueue</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>().transactions.last?.transactionState != .purchasing <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.successBlock = success <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.failureBlock = failure <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> payment = <span class="hljs-type"><span class="hljs-type">SKPayment</span></span>(product: product) <span class="hljs-type"><span class="hljs-type">SKPaymentQueue</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>().add(payment) }</code> </pre> <br><p>  <code>SKPaymentTransactionObserver</code> рдкреНрд░рддрд┐рдирд┐рдзрд┐ рдРрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IAPManager</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SKPaymentTransactionObserver</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">paymentQueue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> queue: SKPaymentQueue, updatedTransactions transactions: [SKPaymentTransaction])</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> transaction <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> transactions { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (transaction.transactionState) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .purchased: <span class="hljs-type"><span class="hljs-type">SKPaymentQueue</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>().finishTransaction(transaction) notifyIsPurchased(transaction: transaction) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .failed: <span class="hljs-type"><span class="hljs-type">SKPaymentQueue</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>().finishTransaction(transaction) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"purchase error : \(transaction.error?.localizedDescription ?? "</span></span><span class="hljs-string"><span class="hljs-string">")"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.failureBlock?(transaction.error) cleanUp() <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .restored: <span class="hljs-type"><span class="hljs-type">SKPaymentQueue</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>().finishTransaction(transaction) notifyIsPurchased(transaction: transaction) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .deferred, .purchasing: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> } } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyIsPurchased</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(transaction: SKPaymentTransaction)</span></span></span></span> { refreshSubscriptionsStatus(callback: { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.successBlock?() <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.cleanUp() }) { (error) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-comment"><span class="hljs-comment">// couldn't verify receipt self.failureBlock?(error) self.cleanUp() } } func cleanUp(){ self.successBlock = nil self.failureBlock = nil } }</span></span></code> </pre> <br><p>  рд╕рдлрд▓ рд╕рджрд╕реНрдпрддрд╛ рдкрд░, рдкреНрд░рддрд┐рдирд┐рдзрд┐ рдкрджреНрдзрддрд┐ рдХреЛ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд▓реЗрдирджреЗрди рдХреА рд╕реНрдерд┐рддрд┐ <code>purchased</code> ред </p><br><p>  рд▓реЗрдХрд┐рди рд╕рджрд╕реНрдпрддрд╛ рдХреА рд╕рдорд╛рдкреНрддрд┐ рддрд┐рдерд┐ рдХреИрд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ?  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, Apple рдХреЛ рдПрдХ рдЕрд▓рдЧ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдВред </p><br><h3 id="proverka-statusa-podpiski">  рд╕рджрд╕реНрдпрддрд╛ рд╕реНрдерд┐рддрд┐ рдЬрд╛рдВрдЪреЗрдВ </h3><br><p>  рдЪреЗрдХ Apple рдХреЛ <code>verifyReceipt</code> POST рдЕрдиреБрд░реЛрдз рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд╣рдо рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯреЗрдб рдЪреЗрдХ рдХреЛ рдПрдХ рдЖрдзрд╛рд░ 64-рдПрдиреНрдХреЛрдбреЗрдб рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд░реВрдк рдореЗрдВ рднреЗрдЬрддреЗ рд╣реИрдВ, рдФрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд╣рдореЗрдВ JSON рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдПрдХ рд╣реА рдЪреЗрдХ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИред  рд╕рд░рдгреА рдореЗрдВ, рдореБрдЦреНрдп <code>latest_receipt_info</code> рдЯреНрд░рд╛рдпрд▓ рдЕрд╡рдзрд┐ рд╕рд╣рд┐рдд рдкреНрд░рддреНрдпреЗрдХ рд╕рджрд╕реНрдпрддрд╛ рдХреА рдкреНрд░рддреНрдпреЗрдХ рдЕрд╡рдзрд┐ рд╕реЗ рд╕рднреА рд▓реЗрдирджреЗрди рдХреЛ рд╕реВрдЪреАрдмрджреНрдз рдХрд░реЗрдЧрд╛ред  рд╣рдо рдХреЗрд╡рд▓ рдЙрддреНрддрд░ рджреЗ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдЙрддреНрдкрд╛рдж рдХреЗ рд▓рд┐рдП рд╡рд░реНрддрдорд╛рди рд╕рдорд╛рдкреНрддрд┐ рддрд┐рдерд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><blockquote>  WWDC 2017 рдореЗрдВ, рдЙрдиреНрд╣реЛрдВрдиреЗ <code>verifyReceipt</code> рдЕрдиреБрд░реЛрдз рдореЗрдВ <code>exclude-old-transactions</code> рдХреБрдВрдЬреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рд╕рджрд╕реНрдпрддрд╛ рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ рд╡рд░реНрддрдорд╛рди рдЪреЗрдХ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдХреЛ рдЬреЛрдбрд╝рд╛ред </blockquote><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">refreshSubscriptionsStatus</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(callback : @escaping SuccessBlock, failure : @escaping FailureBlock)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">// save blocks for further use self.refreshSubscriptionSuccessBlock = callback self.refreshSubscriptionFailureBlock = failure guard let receiptUrl = Bundle.main.appStoreReceiptURL else { refreshReceipt() // do not call block yet return } #if DEBUG let urlString = "https://sandbox.itunes.apple.com/verifyReceipt" #else let urlString = "https://buy.itunes.apple.com/verifyReceipt" #endif let receiptData = try? Data(contentsOf: receiptUrl).base64EncodedString() let requestData = ["receipt-data" : receiptData ?? "", "password" : self.sharedSecret, "exclude-old-transactions" : true] as [String : Any] var request = URLRequest(url: URL(string: urlString)!) request.httpMethod = "POST" request.setValue("Application/json", forHTTPHeaderField: "Content-Type") let httpBody = try? JSONSerialization.data(withJSONObject: requestData, options: []) request.httpBody = httpBody URLSession.shared.dataTask(with: request) { (data, response, error) in DispatchQueue.main.async { if data != nil { if let json = try? JSONSerialization.jsonObject(with: data!, options: .allowFragments){ self.parseReceipt(json as! Dictionary&lt;String, Any&gt;) return } } else { print("error validating receipt: \(error?.localizedDescription ?? "")") } self.refreshSubscriptionFailureBlock?(error) self.cleanUpRefeshReceiptBlocks() } }.resume() }</span></span></code> </pre> <br><p>  рд╡рд┐рдзрд┐ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ, рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдЪреЗрдХ рдХреА рдПрдХ рд╕реНрдерд╛рдиреАрдп рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдХреЗ рдЕрд╕реНрддрд┐рддреНрд╡ рдХреЗ рд▓рд┐рдП рдПрдХ рдЪреЗрдХ рд╣реИред  рдПрдХ рд╕реНрдерд╛рдиреАрдп рдЪреЗрдХ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдЖрд╡реЗрджрди рдЖрдИрдЯреНрдпреВрдиреНрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдЕрдЧрд░ рдХреЛрдИ рдЬрд╛рдБрдЪ рдирд╣реАрдВ рд╣реИ, рддреЛ рд╣рдо <code>verifyReceipt</code> рдЕрдиреБрд░реЛрдз рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред  рд╣рдореЗрдВ рдкрд╣рд▓реЗ рд╡рд░реНрддрдорд╛рди рд╕реНрдерд╛рдиреАрдп рдЪреЗрдХ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рдЗрд╕реЗ рдлрд┐рд░ рд╕реЗ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред  <code>SKReceiptRefreshRequest</code> рд╡рд░реНрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЪреЗрдХ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">refreshReceipt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> request = <span class="hljs-type"><span class="hljs-type">SKReceiptRefreshRequest</span></span>(receiptProperties: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) request.delegate = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> request.start() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">requestDidFinish</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> request: SKRequest)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// call refresh subscriptions method again with same blocks if request is SKReceiptRefreshRequest { refreshSubscriptionsStatus(callback: self.successBlock ?? {}, failure: self.failureBlock ?? {_ in}) } } func request(_ request: SKRequest, didFailWithError error: Error){ if request is SKReceiptRefreshRequest { self.refreshSubscriptionFailureBlock?(error) self.cleanUpRefeshReceiptBlocks() } print("error: \(error.localizedDescription)") }</span></span></code> </pre> <br><p>  <code>refreshReceipt()</code> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ <strong>рдЪреЗрдХ рдЕрдкрдбреЗрдЯ</strong> рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдпрджрд┐ рдЪреЗрдХ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ рдкреНрд░рддрд┐рдирд┐рдзрд┐ рд╡рд┐рдзрд┐ <code>requestDidFinish(_ request : SKRequest)</code> рдХрд╣рд▓рд╛рддреА рд╣реИ, рдЬреЛ <code>refreshSubscriptionsStatus</code> рд╡рд┐рдзрд┐ рдХреЛ <code>refreshSubscriptionsStatus</code> рдХреЙрд▓ рдХрд░рддреА рд╣реИред </p><br><p>  рдЦрд░реАрдж рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рдХреИрд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?  рд╣рдореЗрдВ рдПрдХ JSON рдСрдмреНрдЬреЗрдХреНрдЯ рд▓реМрдЯрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд▓реЗрдирджреЗрди рдХрд╛ рдПрдХ рдиреЗрд╕реНрдЯреЗрдб рд╕рд░рдгреА рд╣реЛрддрд╛ рд╣реИ ( <code>latest_receipt_info</code> рдХреБрдВрдЬреА рджреНрд╡рд╛рд░рд╛)ред  рд╣рдо рдПрд░реЗ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рддреЗ рд╣реИрдВ, <code>expires_date</code> рдХреБрдВрдЬреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рдорд╛рдкреНрддрд┐ рддрд┐рдерд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рд╕рд╣реЗрдЬрддреЗ рд╣реИрдВ рдпрджрд┐ рдпрд╣ рддрд╛рд░реАрдЦ рдЕрднреА рддрдХ рдирд╣реАрдВ рдЖрдИ рд╣реИред </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseReceipt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> json : Dictionary&lt;String, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// It's the most simple way to get latest expiration date. Consider this code as for learning purposes. Do not use current code in production apps. guard let receipts_array = json["latest_receipt_info"] as? [Dictionary&lt;String, Any&gt;] else { self.refreshSubscriptionFailureBlock?(nil) self.cleanUpRefeshReceiptBlocks() return } for receipt in receipts_array { let productID = receipt["product_id"] as! String let formatter = DateFormatter() formatter.dateFormat = "yyyy-MM-dd HH:mm:ss VV" if let date = formatter.date(from: receipt["expires_date"] as! String) { if date &gt; Date() { // do not save expired date to user defaults to avoid overwriting with expired date UserDefaults.standard.set(date, forKey: productID) } } } self.refreshSubscriptionSuccessBlock?() self.cleanUpRefeshReceiptBlocks() }</span></span></code> </pre> <br><p>  рдореИрдВрдиреЗ рдПрдХ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг рджрд┐рдпрд╛ рдХрд┐ рд╕рджрд╕реНрдпрддрд╛ рдХреА рд╡рд░реНрддрдорд╛рди рд╕рдорд╛рдкреНрддрд┐ рддрд┐рдерд┐ рдХреИрд╕реЗ рдирд┐рдХрд╛рд▓реА рдЬрд╛рдПред  рдХреЛрдИ рддреНрд░реБрдЯрд┐ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдФрд░ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЦрд░реАрдж рдХреА рд╡рд╛рдкрд╕реА рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдЬрд╛рдВрдЪ рдирд╣реАрдВ рд╣реИ ( <em>рд░рджреНрдж рдХрд░рдиреЗ рдХреА рддрд╛рд░реАрдЦ</em> рдЬреЛрдбрд╝реА рдЧрдИ рд╣реИ)ред </p><br><p>  рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдХреЛрдИ рд╕рджрд╕реНрдпрддрд╛ рд╕рдХреНрд░рд┐рдп рд╣реИ рдпрд╛ рдирд╣реАрдВ, рдмрд╕ рдЙрддреНрдкрд╛рдж рдХреБрдВрдЬреА рджреНрд╡рд╛рд░рд╛ <em>рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдХрдореА</em> рд╕реЗ рд╡рд░реНрддрдорд╛рди рджрд┐рдирд╛рдВрдХ рдХреА рддреБрд▓рдирд╛ рдХрд░реЗрдВред  рдпрджрд┐ рдпрд╣ рдЕрдиреБрдкрд╕реНрдерд┐рдд рд╣реИ рдпрд╛ рд╡рд░реНрддрдорд╛рди рддрд┐рдерд┐ рд╕реЗ рдХрдо рд╣реИ, рддреЛ рд╕рджрд╕реНрдпрддрд╛ рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">expirationDateFor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> identifier : String)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Date?</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">UserDefaults</span></span>.standard.object(forKey: identifier) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">Date</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> subscriptionDate = <span class="hljs-type"><span class="hljs-type">IAPManager</span></span>.shared.expirationDateFor(<span class="hljs-string"><span class="hljs-string">"YOUR_PRODUCT_ID"</span></span>) ?? <span class="hljs-type"><span class="hljs-type">Date</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> isActive = subscriptionDate &gt; <span class="hljs-type"><span class="hljs-type">Date</span></span>()</code> </pre> <br><p>  рд▓реЗрди-рджреЗрди рдХреА рд╡рд╕реВрд▓реА рдПрдХрд▓ рдкрдВрдХреНрддрд┐ <code>SKPaymentQueue.default().restoreCompletedTransactions()</code> ред  рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдкреНрд░рддрд┐рдирд┐рдзрд┐ рдкрджреНрдзрддрд┐ <code>func paymentQueue(**_** queue: SKPaymentQueue, updatedTransactions transactions: [SKPaymentTransaction])</code> рд╕реЗ рдХреЙрд▓ рдХрд░рдХреЗ рд╕рднреА рдкреВрд░реНрдг рдХрд┐рдП рдЧрдП рд▓реЗрдирджреЗрди рдХреЛ рдкреБрдирд░реНрд╕реНрдерд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИ <code>func paymentQueue(**_** queue: SKPaymentQueue, updatedTransactions transactions: [SKPaymentTransaction])</code> ред </p><br><h3 id="chem-otlichaetsya-obnovlenie-cheka-ot-vosstanovleniya-tranzakciy">  рдЯреНрд░рд╛рдВрдЬреЗрдХреНрд╢рди рд░рд┐рдХрд╡рд░реА рд╕реЗ рдЪреЗрдХ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдореЗрдВ рдХреНрдпрд╛ рдЕрдВрддрд░ рд╣реИ? </h3><br><p>  рджреЛрдиреЛрдВ рд╡рд┐рдзрд┐рдпрд╛рдВ рдЖрдкрдХреЗ рдЦрд░реАрдж рдбреЗрдЯрд╛ рдХреЛ рдкреБрдирд░реНрд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддреА рд╣реИрдВред  рд▓реЗрдХрд┐рди рдЙрдирдХреЗ рдЕрдВрддрд░ рдХреНрдпрд╛ рд╣реИрдВ?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Wwdc рд╡реАрдбрд┐рдпреЛ рдХреЗ</a> рд╕рд╛рде рдПрдХ рдЕрджреНрднреБрдд рддрд╛рд▓рд┐рдХрд╛ рд╣реИ: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/c21/520/f53/c21520f531f3df7a185296f33bfa8f2b.png" alt="WWDC рд╕реЗ рдЦрд░реАрдж рдХреЛ рдмрд╣рд╛рд▓ рдХрд░рдиреЗ рдХреЗ рджреЛ рддрд░реАрдХреЛрдВ рдХреА рдЕрдВрддрд░ рддрд╛рд▓рд┐рдХрд╛"><br>  <em>WWDC рд╕реЗ рдЦрд░реАрдж рдХреЛ рдмрд╣рд╛рд▓ рдХрд░рдиреЗ рдХреЗ рджреЛ рддрд░реАрдХреЛрдВ рдХреА рдЕрдВрддрд░ рддрд╛рд▓рд┐рдХрд╛</em> </p><br><p>  рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдЖрдкрдХреЛ рдмрд╕ <code>SKReceiptRefreshRequest()</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдХреЗрд╡рд▓ рд╕рдорд╛рдкреНрддрд┐ рддрд┐рдерд┐ рдХреА рдЧрдгрдирд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдЪреЗрдХ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВред </p><br><p>  рд╕реНрд╡рддрдГ-рдирд╡реАрдХрд░рдгреАрдп рд╕рджрд╕реНрдпрддрд╛ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд▓реЗрди-рджреЗрди рд╕реНрд╡рдпрдВ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдХреЛрдИ рджрд┐рд▓рдЪрд╕реНрдкреА рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдХреЗрд╡рд▓ рдЪреЗрдХ рдЕрдкрдбреЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдРрд╕реЗ рдорд╛рдорд▓реЗ рд╣реИрдВ рдЬрдм рдЖрдкрдХреЛ рд▓реЗрдирджреЗрди рд╡рд╕реВрд▓реА рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ: рдпрджрд┐ рдЖрдкрдХрд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЦрд░реАрдж рдкрд░ рд╕рд╛рдордЧреНрд░реА рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рддрд╛ рд╣реИ (Apple рд╣реЛрд╕реНрдЯ рдХреА рдЧрдИ рд╕рд╛рдордЧреНрд░реА) рдпрд╛ рдпрджрд┐ рдЖрдк рдЕрднреА рднреА iOS 7 рд╕реЗ рдиреАрдЪреЗ рдХреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреЗ рд╣реИрдВред </p><br><h3 id="testirovanie-pokupok-sandbox-testing">  рдЦрд░реАрджрд╛рд░реА рдкрд░реАрдХреНрд╖рдг (рд╕реИрдВрдбрдмреЙрдХреНрд╕ рдкрд░реАрдХреНрд╖рдг) </h3><br><p>  рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ, рдЦрд░реАрдж рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдЕрдкрдиреЗ iPhone рдХреА рд╕реЗрдЯрд┐рдВрдЧ рдореЗрдВ рдРрдк рд╕реНрдЯреЛрд░ рд╕реЗ рд▓реЙрдЧ рдЗрди рдХрд░рдирд╛ рдкрдбрд╝рддрд╛ рдерд╛ред  рдпрд╣ рдмрд╣реБрдд рдЕрд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдерд╛ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╕рдВрдкреВрд░реНрдг рдРрдкреНрдкрд▓ рдореНрдпреВрдЬрд┐рдХ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЛ рдорд┐рдЯрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛)ред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЕрдм рдпрд╣ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ: рд╕реИрдВрдбрдмреЙрдХреНрд╕ рдЦрд╛рддрд╛ рдЕрдм рдореБрдЦреНрдп рдЦрд╛рддреЗ рд╕реЗ рдЕрд▓рдЧ рд╕реЗ рдореМрдЬреВрдж рд╣реИред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/846/b0d/1d5/846b0d1d5a265e9a3f38ebeaa1bd61ef.jpg"></p><br><p>  рдРрдк рд╕реНрдЯреЛрд░ рдореЗрдВ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЦрд░реАрдж рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЦрд░реАрдж рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕рдорд╛рди рд╣реИ, рд▓реЗрдХрд┐рди рдХреБрдЫ рдмрд┐рдВрджреБ рд╣реИрдВ: </p><br><ul><li><p>  рдЖрдкрдХреЛ рд╕рд┐рд╕реНрдЯрдо рд╡рд┐рдВрдбреЛ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╣рдореЗрд╢рд╛ рд▓реЙрдЧрд┐рди рдкрд╛рд╕рд╡рд░реНрдб рджрд░реНрдЬ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдЯрдЪ рдЖрдИрдбреА / рдлреЗрд╕ рдЖрдИрдбреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реА рдЦрд░реАрдж рдЕрднреА рднреА рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИред </p><br></li><li><p>  рдпрджрд┐, рд▓реЙрдЧрд┐рди рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рд╕рд╣реА рдврдВрдЧ рд╕реЗ рджрд░реНрдЬ рдХрд░рдиреЗ рдкрд░, рд╕рд┐рд╕реНрдЯрдо рдмрд╛рд░-рдмрд╛рд░ рд▓реЙрдЧрд┐рди рдкрд╛рд╕рд╡рд░реНрдб рдкреВрдЫрддрд╛ рд╣реИ, рддреЛ <em>"рд░рджреНрдж рдХрд░реЗрдВ" рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ</em> , рдЖрд╡реЗрджрди рдХреЛ рдХрдо рд╕реЗ рдХрдо рдХрд░реЗрдВ, рдлрд┐рд░ рд╕реЗ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред  рдпрд╣ рдмрдХрд╡рд╛рд╕ рд▓рдЧрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдХрдИ рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдХрднреА-рдХрднреА рджреВрд╕рд░реЗ рдкрд╛рд╕рд╡рд░реНрдб рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдХреЗ рдмрд╛рдж рднреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЬрд╛рд░реА рд░рд╣рддреА рд╣реИред </p><br></li><li><p>  рдЖрдк рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдВрдЧреЗред </p><br></li><li><p>  рд╕рджрд╕реНрдпрддрд╛ рдЕрд╡рдзрд┐ рдХреА рдЕрд╡рдзрд┐ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдмрд╣реБрдд рдХрдо рд╣реИред  рдФрд░ рдЙрдиреНрд╣реЗрдВ рджрд┐рди рдореЗрдВ 6 рдмрд╛рд░ рд╕реЗ рдЕрдзрд┐рдХ рдЕрдкрдбреЗрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br></li></ul><br><div class="scrollable-table"><table><thead><tr><th>  рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЕрд╡рдзрд┐ </th><th>  рдкрд░реАрдХреНрд╖рдг рдХреА рдЕрд╡рдзрд┐ </th></tr></thead><tbody><tr><td>  1 рд╕рдкреНрддрд╛рд╣ </td><td>  3 рдорд┐рдирдЯ </td></tr><tr><td>  1 рдорд╣реАрдирд╛ </td><td>  5 рдорд┐рдирдЯ </td></tr><tr><td>  2 рдорд╣реАрдиреЗ </td><td>  10 рдорд┐рдирдЯ </td></tr><tr><td>  3 рдорд╣реАрдиреЗ </td><td>  15 рдорд┐рдирдЯ </td></tr><tr><td>  6 рдорд╣реАрдиреЗ </td><td>  30 рдорд┐рдирдЯ </td></tr><tr><td>  1 рд╕рд╛рд▓ </td><td>  1 рдШрдВрдЯрд╛ </td></tr></tbody></table></div><br><h3 id="chto-novogo-v-storekit-v-ios-13">  IOS 13 рдореЗрдВ StoreKit рдореЗрдВ рдирдпрд╛ рдХреНрдпрд╛ рд╣реИ? </h3><br><p>  рдирдП рдореЗрдВ рд╕реЗ - рдХреЗрд╡рд▓ <code>SKStorefront</code> рд╡рд░реНрдЧ, рдЬреЛ рдЬрд╛рдирдХрд╛рд░реА рджреЗрддрд╛ рд╣реИ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд┐рд╕ рджреЗрд╢ рдореЗрдВ рдРрдк рд╕реНрдЯреЛрд░ рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рд╣реИред  рдпрд╣ рдЙрди рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди рджреЗрд╢реЛрдВ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рджрд╕реНрдпрддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рдкрд╣рд▓реЗ, рд╣рд░ рдХреЛрдИ рдЬрд┐рдпреЛрд▓реЛрдХреЗрд╢рди рдпрд╛ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рдХреНрд╖реЗрддреНрд░ рджреНрд╡рд╛рд░рд╛ рдЬрд╛рдБрдЪ рдХрд░рддрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдЯреАрдХ рдкрд░рд┐рдгрд╛рдо рдирд╣реАрдВ рджреЗрддрд╛ рдерд╛ред  рдЕрдм рдРрдк рд╕реНрдЯреЛрд░ рдореЗрдВ рджреЗрд╢ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдирд╛ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реИ: <code>SKPaymentQueue.default().storefront?.countryCode</code>  рдЕрдЧрд░ рдЦрд░реАрдж рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рджреМрд░рд╛рди рдРрдк рд╕реНрдЯреЛрд░ рдореЗрдВ рджреЗрд╢ рдмрджрд▓ рдЧрдпрд╛ рддреЛ рдПрдХ рд╡рд┐рдзрд┐ рдкреНрд░рддрд┐рдирд┐рдзрд┐ рднреА рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЖрдк рдЦрд░реАрдж рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЬрд╛рд░реА рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рд░рджреНрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><h2 id="podvodnye-kamni-pri-rabote-s-podpiskami">  рд╕рджрд╕реНрдпрддрд╛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдкрд░ рдиреБрдХрд╕рд╛рди </h2><br><ul><li>  рдРрдкреНрдкрд▓ рджреНрд╡рд╛рд░рд╛ рдХрд┐рд╕реА рдбрд┐рд╡рд╛рдЗрд╕ рд╕реЗ рд╕реАрдзреЗ рдЪреЗрдХ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдирд╣реАрдВ рдХреА рдЬрд╛рддреА рд╣реИред  рдЙрдиреНрд╣реЛрдВрдиреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">WWDC</a> (5:50 рд╕реЗ) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореЗрдВ</a> рдХрдИ рдмрд╛рд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЗрд╕</a> рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХреА рдФрд░ рдпрд╣ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рд▓реЗрдЦрди</a> рдореЗрдВ рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> ред  рдпрд╣ рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдПрдХ рдордзреНрдп-рдордзреНрдп рд╣рдорд▓реЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбреЗрдЯрд╛ рдХреЛ рдмрд╛рдзрд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдЪреЗрдХ рдЬрд╛рдВрдЪрдиреЗ рдХрд╛ рд╕рд╣реА рддрд░реАрдХрд╛ рд╕реНрдерд╛рдиреАрдп рдорд╛рдиреНрдпрддрд╛ рд╣реИ рдпрд╛ рддреЛ рдЖрдкрдХреЗ рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ред </li><li>  рд╕рдорд╛рдкреНрддрд┐ рддрд┐рдерд┐ рдХреА рдЬрд╛рдБрдЪ рдХрд░рдиреЗ рдореЗрдВ рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рд╣реИред  рдпрджрд┐ рдЖрдк рдЕрдкрдиреЗ рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рд╕рдордп рдПрдХ рдкреБрд░рд╛рдиреЗ рд╕реЗ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рд╣рдорд╛рд░рд╛ рдХреЛрдб рдЧрд▓рдд рдкрд░рд┐рдгрд╛рдо рджреЗрдЧрд╛ - рд╕рджрд╕реНрдпрддрд╛ рдХреЛ рд╕рдХреНрд░рд┐рдп рдорд╛рдирд╛ рдЬрд╛рдПрдЧрд╛ред  рдпрджрд┐ рдпрд╣ рдЖрдкрдХреЛ рд╕реВрдЯ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЖрдк рдХрд┐рд╕реА рднреА рд╕реЗрд╡рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╕рдЯреАрдХ рд╡рд┐рд╢реНрд╡ рд╕рдордп рдЬрд╛рд░реА рдХрд░рддрд╛ рд╣реИред </li><li>  рд╕рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХрд╛ рдирд┐: рд╢реБрд▓реНрдХ рдкрд░реАрдХреНрд╖рдг рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреБрдЫ рд╕рдордп рдмрд╛рдж рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдлрд┐рд░ рд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдпрд╣ рджрд┐рдЦрд╛рдПрдЧрд╛ рдХрд┐ рдкрд░реАрдХреНрд╖рдг рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣ рдЙрдкрд▓рдмреНрдз рд╣реИред  рдЪреЗрдХ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛, рдЙрд╕реЗ рдорд╛рдиреНрдп рдХрд░рдирд╛ рдФрд░ JSON рдореЗрдВ рдЗрд╕ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдкрд░реАрдХреНрд╖рдг рдХреА рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреЛ рдареАрдХ рдХрд░рдирд╛ рд╕рд╣реА рд╣реЛрдЧрд╛ред  рдХрдИ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред </li><li>  рдпрджрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдиреЗ рдзрдирд╡рд╛рдкрд╕реА рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд┐рдпрд╛ рд╣реИ, рддреЛ рд╕рджрд╕реНрдпрддрд╛ JSON рдХреЛ <code>cancellation_date</code> рдХрд░ <code>cancellation_date</code> рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди <code>expires_date</code> рдЕрдкрд░рд┐рд╡рд░реНрддрд┐рдд рд░рд╣реЗрдЧрд╛ред  рдЗрд╕рд▓рд┐рдП, <code>cancellation_date</code> <code>expires_date</code> рдлрд╝реАрд▓реНрдб рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдХреЗ рд▓рд┐рдП рд╣рдореЗрд╢рд╛ рдЬрд╛рдБрдЪ рдХрд░рдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ, рдЬреЛ рдХрд┐ <code>expires_date</code> рд╕реЗ рдЕрдзрд┐рдХ рдкрд╕рдВрдж рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  рд╣рд░ рдмрд╛рд░ рдЬрдм рдЖрдк рдЖрд╡реЗрджрди рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ рддреЛ рдпрд╣ рдЪреЗрдХ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐, рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рд╡реНрдпрд░реНрде рд╣реИ, рдФрд░ рджреВрд╕рд░реА рдмрд╛рдд, рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдРрдкреНрдкрд▓ рдЖрдИрдбреА рдкрд╛рд╕рд╡рд░реНрдб рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рд╡рд┐рдВрдбреЛ рдХреЗ рд╕рд╛рде рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЪреЗрдХ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ, рдЬрдм рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реНрд╡рдпрдВ рдкреБрдирд░реНрд╕реНрдерд╛рдкрдирд╛ рдЦрд░реАрджрд╛рд░реА рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рддрд╛ рд╣реИред </li><li>  рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХреИрд╕реЗ рдХрд░реЗрдВ рдХрд┐ рд╕рджрд╕реНрдпрддрд╛ рдХреА рд╡рд░реНрддрдорд╛рди рд╕рдорд╛рдкреНрддрд┐ рддрд┐рдерд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЪреЗрдХ рдХреЛ рдорд╛рдиреНрдп рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреМрди рд╕реЗ рдмрд┐рдВрджреБ рд╣реИрдВ?  рдЖрдк рдкреНрд░рддреНрдпреЗрдХ рд╢реБрд░реБрдЖрдд рдореЗрдВ рдпрд╛ рдХреЗрд╡рд▓ рд╕рджрд╕реНрдпрддрд╛ рдХреЗ рдЕрдВрдд рдореЗрдВ рдЪреЗрдХ рдХреЛ рдорд╛рдиреНрдп рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрджрд┐ рдЖрдк рдХреЗрд╡рд▓ рд╕рджрд╕реНрдпрддрд╛ рдХреЗ рдЕрдВрдд рдореЗрдВ рдЪреЗрдХ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЬрд┐рд╕ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдиреЗ рдзрдирд╡рд╛рдкрд╕реА рдЬрд╛рд░реА рдХреА рд╣реИ, рд╡рд╣ рдЕрд╡рдзрд┐ рдХреЗ рдЕрдВрдд рддрдХ рдореБрдлреНрдд рдореЗрдВ рдЖрдкрдХреЗ рдЖрд╡реЗрджрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдЧрд╛ред </li></ul><br><h2 id="zaklyuchenie">  рдирд┐рд╖реНрдХрд░реНрд╖ </h2><br><p>  рдореБрдЭреЗ рдЙрдореНрдореАрдж рд╣реИ рдХрд┐ рдпрд╣ рд▓реЗрдЦ рдЖрдкрдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛрдЧрд╛ред  рдореИрдВрдиреЗ рди рдХреЗрд╡рд▓ рдХреЛрдб рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА, рдмрд▓реНрдХрд┐ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рд╕реВрдХреНрд╖реНрдо рдмрд┐рдВрджреБрдУрдВ рдХреЛ рднреА рд╕рдордЭрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреАред  рдкреВрд░реА рдХреНрд▓рд╛рд╕ рдХрд╛ рдХреЛрдб <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> ред  рдпрд╣ рд╡рд░реНрдЧ рдиреМрд╕рд┐рдЦрд┐рдП рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рдкрд░рд┐рдЪрд┐рддреЛрдВ рдФрд░ рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЙрдкрдпреЛрдЧреА рд╣реЛрдЧрд╛ рдЬреЛ рд╕рдм рдХреБрдЫ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рд▓рд╛рдЗрд╡ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП, рдЕрдзрд┐рдХ рдЧрдВрднреАрд░ рд╕рдорд╛рдзрд╛рдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">SwiftyStoreKit</a> ред </p><br><blockquote>  10 рдорд┐рдирдЯ рдореЗрдВ рдЕрдкрдиреЗ iOS рдРрдк рдореЗрдВ рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Apphud</a> рдФрд░ рдПрдХреАрдХреГрдд рдХрд░реЗрдВ: <br><ul><li>  рдХреЗрд╡рд▓ рдПрдХ рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЦрд░реАрджрд╛рд░реА рдХрд░реЗрдВ; </li><li>  рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рд╕рджрд╕реНрдпрддрд╛ рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдЯреНрд░реИрдХ рдХрд░рддрд╛ рд╣реИ; </li><li>  рдЖрд╕рд╛рдиреА рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рдкреНрд░рд╕реНрддрд╛рд╡реЛрдВ рдХреЛ рдПрдХреАрдХреГрдд рдХрд░реЗрдВ </li><li>  рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рд╕реНрдерд╛рдиреАрдп рдореБрджреНрд░рд╛ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП рдПрдореНрдкреНрд▓рд┐рдЯреНрдпреВрдб, рдорд┐рдХреНрд╕рдкреИрдирд▓, рд╕реНрд▓реИрдХ рдФрд░ рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рдХреЛ рд╕рджрд╕реНрдпрддрд╛ рдХрд╛рд░реНрдпрдХреНрд░рдо рднреЗрдЬреЗрдВ; </li><li>  рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдореЗрдВ рдордВрдерди рджрд░ рдШрдЯрд╛рдПрдВ рдФрд░ рдмрд┐рдирд╛ рд╕рджрд╕реНрдпрддрд╛ рд╡рд╛рд▓реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд▓реМрдЯрд╛рдПрдВред </li></ul><br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi456602/">https://habr.com/ru/post/hi456602/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi456584/index.html"># ITX5 JAVA рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреА рдПрдХ рдкрд╛рд░реНрдЯреА рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░реЗрдЧрд╛</a></li>
<li><a href="../hi456592/index.html">рдЕрдВрдЧреНрд░реЗрдЬреА рднрд╛рд╖рд╛ рдХреЗ "рд╕рдордп" рдХреЗ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рд╕рдВрдЬреНрдЮрд╛рдирд╛рддреНрдордХ рд╡рд┐рдХреГрддрд┐рдпрд╛рдВ, рдпрд╛ рдЬреЛ рд╣рдорд╛рд░реЗ рд╕рд╛рде рд╣рд╕реНрддрдХреНрд╖реЗрдк рдХрд░рддреА рд╣реИрдВ, рд╡рд╣ рд╣рдорд╛рд░реА рдорджрдж рдХрд░реЗрдЧреА</a></li>
<li><a href="../hi456594/index.html">рд╡реЗрдмрдкреИрдХ рдЯреНрд░реА-рд╢реЗрдХрд┐рдВрдЧ рдФрд░ рдлрд┐рд░ рд╕реЗ рдирд┐рд░реНрдпрд╛рдд рдХреЗ рд╕рд╛рде 2 рдорд┐рдирдЯ</a></li>
<li><a href="../hi456596/index.html">рдорд╛рдЗрдХреНрд░реЛрдмрд╛рдпреЛрдЯрд╛ред рдкрд░реАрдХреНрд╖рдг рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ?</a></li>
<li><a href="../hi456600/index.html">Nginx рд╡реНрдпрдВрдЬрдиреЛрдВ: рдХреИрдкреНрдЪрд╛ рдХреЗ рд╕рд╛рде LDAP рдкреНрд░рд╛рдзрд┐рдХрд░рдг</a></li>
<li><a href="../hi456604/index.html">рд╣рдордиреЗ рдПрдХ рдмрдбрд╝реЗ рдСрдирд▓рд╛рдЗрди рд╕реНрдЯреЛрд░ рдХреЛ рдХреИрд╕реЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд┐рдпрд╛ рдФрд░ рдЙрддреНрдкрд╛рджреЛрдВ рд╕реЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдорд┐рд▓рд╛рди рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛</a></li>
<li><a href="../hi456606/index.html">OpenStreetMap рд╕рдВред 464 рдХреА рджреБрдирд┐рдпрд╛ рд╕реЗ рд╕рдорд╛рдЪрд╛рд░ (04/04/2019 - 06/10/2019)</a></li>
<li><a href="../hi456608/index.html">рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдореЗрдВ рдЪреЗрд▓реНрдпрд╛рдмрд┐рдВрд╕реНрдХ рдФрд░ рдмрд┐рдЯреНрд░рд┐рдХреНрд╕ рдореЗрдВ рд╕рд╛рдЙрдердмреНрд░рд┐рдЬ</a></li>
<li><a href="../hi456610/index.html">рдкреНрд░реЗрд╕ рди рдХрд░реЗрдВ рдФрд░ рдЕрдиреБрдореЛрджрди рди рдХрд░реЗрдВ</a></li>
<li><a href="../hi456612/index.html">рдПрдХ рд╕рд░реНрд╡рд░ рдкрд░ рдХрдИ рдЙрддреНрдкрд╛рджрди рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреЛ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд╕реИрдХрдбрд╝реЛрдВ рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>