<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🏭 🤵🏾 🌞 Menanamkan Git dalam Sistem Pengembangan Perusahaan 👨‍🔬 💚 📷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pengembang yang tahu dan tahu cara bekerja dengan git telah tumbuh dengan urutan besar belakangan ini. Anda terbiasa dengan kecepatan eksekusi perinta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menanamkan Git dalam Sistem Pengembangan Perusahaan</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412787/"><p><img src="https://habrastorage.org/webt/vt/fp/ou/vtfpoukjlruesmucbjvwrgshncc.jpeg"></p><br><p>  Pengembang yang tahu dan tahu cara bekerja dengan git telah tumbuh dengan urutan besar belakangan ini.  Anda terbiasa dengan kecepatan eksekusi perintah.  Anda terbiasa dengan kenyamanan cabang dan rollback mudah perubahan.  Resolusi konflik adalah hal yang biasa sehingga programmer terbiasa menyelesaikan konflik secara heroik di tempat yang seharusnya tidak terjadi. </p><br><p>  Tim kami di Directum sedang mengembangkan alat pengembangan untuk solusi platform.  Jika Anda melihat 1C, maka Anda dapat membayangkan lingkungan kerja "pelanggan" kami - pengembang aplikasi.  Menggunakan alat pengembangan ini, pengembang aplikasi menciptakan solusi aplikasi untuk pelanggan. </p><br><p> Tim kami menghadapi tugas menyederhanakan kehidupan pelamar kami.  Kami dimanjakan dengan chip modern dari Visual Studio, ReSharper dan IDEA.  Para pelamar menuntut agar kami mengintegrasikan git dari kotak ke dalam alat. </p><a name="habracut"></a><br><p>  Inilah kesulitannya.  Dalam alat untuk setiap jenis entitas (kontrak, laporan, direktori, modul), kunci dapat hadir.  Salah satu pengembang mulai mengedit jenis entitas dan memblokirnya sampai menyelesaikan perubahan dan mengirimkannya ke server.  Pengembang lain saat ini melihat jenis entitas yang sama dengan hanya baca.  Pengembangan agak mengingatkan bekerja di SVN atau mengirim dokumen Word melalui surat antara beberapa pengguna.  Saya ingin semuanya sekaligus, tetapi mungkin hanya satu. </p><br><p>  Setiap jenis entitas dapat memiliki banyak penangan (membuka dokumen, validasi sebelum menyimpan, menulis ke database), di mana Anda ingin menulis kode yang berfungsi dengan instance spesifik entitas.  Misalnya, mengunci tombol, menampilkan pesan kepada pengguna, atau membuat tugas baru untuk para pelaku.  Semua kode dalam kerangka API yang disediakan oleh platform.  Penangan adalah kelas di mana banyak metode terletak.  Ketika dua orang perlu memperbaiki file yang sama dengan kode, itu tidak mungkin dilakukan, karena platform memblokir seluruh jenis entitas bersama dengan kode dependen. </p><br><p>  Praktisi kami melakukan semuanya.  Mereka diam-diam mengambil salinan "ilegal" dari lingkungan pengembangan kami, mengomentari bagian yang menghalangi, dan menggabungkan komitmen kami untuk diri mereka sendiri.  Kode aplikasi disimpan di bawah git, dilakukan melalui alat pihak ketiga (git bash, SourceTree, dan lainnya).  Kami membuat kesimpulan: </p><br><ol><li>  Tim kami meremehkan kesediaan pengembang aplikasi untuk masuk ke dalam platform.  Hormat dan hormat! </li><li>  Solusi yang mereka usulkan tidak cocok untuk produksi.  Dengan git, tangan seseorang tidak terikat dan dia dapat membuat apa saja.  Untuk mendukung semua keberagaman akan menjadi hal yang bodoh, jangan dibajak.  Selain itu, perlu untuk mendidik pelanggan platform.  Mendokumentasikan semua perintah git untuk platform akan membuat tim dokumentasi gila. </li></ol><br><p><img src="https://habrastorage.org/webt/2o/o9/ik/2oo9ikx4h9ctyrdh86yktmh-waa.jpeg"></p><br><h1 id="chego-hochetsya-ot-git">  Apa yang Anda inginkan dari Git </h1><br><p>  Jadi memberi untuk produksi dengan keluar tidak baik.  Kami memutuskan untuk merangkum logika operasi utama dan membatasi jumlahnya.  Setidaknya untuk rilis pertama.  Daftar tim dikurangi sebanyak yang mereka bisa dan tetap: </p><br><ul><li>  status </li><li>  berkomitmen </li><li>  tarik </li><li>  mendorong </li><li>  atur ulang --buat ke HEAD </li><li>  setel ulang ke komit "server" terakhir </li></ul><br><p>  Untuk rilis pertama, mereka memutuskan untuk menolak bekerja dengan cabang.  Bukan berarti itu sangat sulit, hanya saja tim tidak memenuhi sumber daya waktu. </p><br><p>  Secara berkala, mitra kami mengirimkan pengembangan aplikasi mereka dan bertanya: "Sesuatu tidak bekerja untuk kami. Apa yang kami lakukan salah?".  Dalam hal ini, aplikasi memuat dirinya sendiri dengan pengembangan orang lain dan melihat ke dalam kode.  Ini digunakan untuk bekerja seperti ini: </p><br><ol><li>  Pengembang mengambil arsip dengan pengembangan; </li><li>  Mengubah database lokal di konfigurasi; </li><li>  Menuangkan pengembangan orang lain ke markasnya; </li><li>  Terjebak, ditemukan kesalahan; </li><li>  Rekomendasi yang dikeluarkan; </li><li>  Dia mengembalikan perkembangannya kembali. </li></ol><br><p>  Metodologi baru tidak cocok dengan pendekatan lama.  Aku harus menghancurkan kepalaku.  Tim mengusulkan dua pendekatan untuk menyelesaikan masalah ini: </p><br><ol><li>  Simpan semua pengembangan dalam satu repositori git.  Jika perlu, bekerja dengan keputusan orang lain untuk membuat cabang sementara. </li><li>  Simpan pengembangan tim yang berbeda di repositori yang berbeda.  Pindahkan pengaturan folder yang dimuat ke lingkungan ke dalam file konfigurasi. </li></ol><br><p>  Kami memutuskan untuk mengikuti jalan kedua.  Yang pertama tampaknya lebih sulit untuk diimplementasikan dan, terlebih lagi, lebih mudah untuk menembak diri sendiri dengan mengganti cabang. </p><br><p>  Namun yang kedua juga tidak manis.  Perintah yang dijelaskan di atas harus berfungsi tidak hanya dalam repositori yang sama, tetapi dengan beberapa sekaligus.  Apakah ada perubahan tipe entitas dari repositori yang berbeda?  Kami tunjukkan di satu jendela.  Ini lebih nyaman dan transparan untuk pengembang aplikasi.  Dengan menekan tombol komit, alat melakukan perubahan pada masing-masing repositori.  Dengan demikian, perintah pull / push / reset "under hood" bekerja dengan repositori yang berbeda secara fisik. </p><br><p><img src="https://habrastorage.org/webt/cj/jx/hc/cjjxhctyhbggbu0zuy2-tfw1zhs.jpeg"></p><br><h1 id="libgit2sharp">  Libgit2sharp </h1><br><p>  Untuk bekerja dengan git, kami memilih dari dua opsi: </p><br><ol><li>  Bekerja dengan git yang terinstal di sistem, menariknya melalui Process.Start dan parsing output. </li><li>  Gunakan libgit2sharp, yang melalui pinvoke menarik libgit2 library. </li></ol><br><p>  Tampaknya bagi kami bahwa menggunakan perpustakaan yang sudah jadi adalah solusi yang masuk akal.  Sia-sia.  Saya akan memberi tahu Anda sedikit kemudian mengapa.  Pada awalnya, perpustakaan memberi kami kesempatan untuk segera meluncurkan prototipe yang berfungsi. </p><br><h1 id="pervaya-iteraciya-razrabotki">  Iterasi pengembangan pertama </h1><br><p> Itu mungkin untuk diterapkan dalam waktu sekitar satu bulan.  Sebenarnya mengacaukan git itu cepat, dan sebagian besar waktu kami mencoba menyembuhkan luka yang telah dibuka karena kami telah memotong mekanisme lama untuk menyimpan file sumber.  Segala sesuatu yang <code>git status</code> dikembalikan dikembalikan ke antarmuka.  Mengklik pada setiap file menampilkan diff.  Itu tampak seperti antarmuka git gui. </p><br><h1 id="vtoraya-iteraciya-razrabotki">  Iterasi pengembangan kedua </h1><br><p>  Opsi pertama terlalu informatif.  Dengan setiap jenis entitas, banyak file dikaitkan sekaligus.  File-file ini menciptakan kebisingan, dan menjadi tidak jelas jenis entitas apa yang berubah dan apa tepatnya. </p><br><p>  File yang dikelompokkan berdasarkan jenis entitas.  Setiap file diberi nama yang dapat dibaca manusia, sama seperti di GUI.  Metadata jenis entitas dijelaskan dalam JSON.  Mereka juga perlu disajikan dalam format yang bisa dibaca manusia.  Analisis perubahan dalam versi json "sebelum" dan "setelah" mulai menggunakan pustaka jsondiffpatch, dan kemudian mereka menulis implementasi JSON perbandingan mereka sendiri (selanjutnya saya akan memanggil jsondiff).  Kami menjalankan hasil perbandingan melalui analisis yang menghasilkan catatan yang dapat dibaca manusia.  Banyak file disembunyikan dari tampilan, meninggalkan entri sederhana di pohon perubahan. </p><br><p>  Hasil akhirnya adalah sebagai berikut: </p><br><p><img src="https://habrastorage.org/webt/g7/pl/3k/g7pl3ku4bqatgba2u9t6_msyxlc.png"></p><br><h1 id="voznikshie-slozhnosti-s-libgit2">  Mengalami masalah dengan libgit2 </h1><br><p>  Libgit2 menghasilkan banyak kejutan tak terduga.  Berurusan dengan beberapa berada di luar kekuatan waktu yang masuk akal.  Saya akan memberi tahu Anda apa yang saya ingat. </p><br><p>  Tidak terduga dan sulit untuk mereproduksi jatuh pada beberapa operasi standar.  "Tidak ada kesalahan yang disediakan oleh perpustakaan asli" memberi tahu kami bungkusnya.  Bagus  Anda mengutuk, Anda sedang membangun kembali perpustakaan asli di debug, Anda mengulangi kasus yang sebelumnya dijatuhkan, tetapi tidak macet dalam mode debug.  Bangun kembali dalam rilis dan jatuh lagi. </p><br><p>  Jika alat pihak ketiga, katakan SourceTree, berjalan paralel dengan libgit2sharp, maka komit mungkin tidak melakukan beberapa file.  Atau macet ketika menampilkan perbedaan pada beberapa file.  Segera setelah Anda mencoba men-debug, Anda tidak dapat mereproduksi. </p><br><p>  Di salah satu aplikasi kami, implementasi analog <code>git status</code> membutuhkan waktu 40 detik.  Empat puluh Carl!  Pada saat yang sama, git yang diluncurkan dari konsol bekerja sebagaimana mestinya untuk sesaat.  Saya menghabiskan beberapa hari untuk menyelesaikannya.  Saat mencari perubahan, Libgit2 melihat atribut file folder dan membandingkannya dengan entri dalam indeks.  Jika waktu modifikasi berbeda, maka ada sesuatu yang berubah di dalam folder dan Anda perlu melihat ke dalam dan / atau mencari di dalam file.  Dan jika tidak ada yang berubah, maka Anda tidak harus naik ke dalam.  Optimasi ini ternyata juga ada di konsol git.  Saya tidak tahu untuk alasan apa, tetapi hanya untuk satu orang di indeks git, waktu dapat berubah.  Karena itu, git memeriksa konten SEMUA file di repositori setiap kali ada perubahan. </p><br><p>  Lebih dekat untuk dirilis, tim kami menyerah pada keinginan tim aplikasi dan mengganti <code>git pull</code> dengan <code>fetch + rebase + autostash</code> .  Dan kemudian sekelompok bug datang kepada kami, termasuk dengan "Tidak ada kesalahan yang disediakan oleh perpustakaan asli". </p><br><p>  status, tarik dan rebase bekerja lebih lama daripada memanggil perintah konsol. </p><br><h1 id="avtomaticheskiy-merzh">  Penggabungan otomatis </h1><br><p>  File dalam pengembangan dibagi menjadi dua jenis: </p><br><ol><li>  File yang dilihat aplikasi di alat pengembangan.  Misalnya, kode, gambar, sumber daya.  File-file seperti itu perlu digabungkan seperti halnya git. </li><li>  File JSON yang dibuat oleh lingkungan pengembangan, tetapi pengembang aplikasi melihatnya hanya dalam bentuk GUI.  Mereka perlu menyelesaikan konflik secara otomatis. </li><li>  File yang dibuat secara otomatis dibuat ulang saat bekerja dengan alat pengembangan.  File-file ini tidak masuk ke repositori, alat segera menaruh .gitignore dengan hati-hati. </li></ol><br><p>  Dengan cara baru, dua aplikator yang berbeda dapat mengubah jenis entitas yang sama. </p><br><p>  Sebagai contoh, Sasha akan mengubah informasi tentang cara menyimpan tipe entitas dalam database dan menulis handler untuk acara save, dan Sergey akan mendesain representasi entitas.  Dari sudut pandang git, ini tidak akan menjadi konflik dan kedua perubahan akan bergabung tanpa kerumitan. </p><br><p>  Dan kemudian Sasha mengubah properti Property1 dan mengatur handler untuk itu.  Sergey menciptakan properti Property2 dan mengatur pawang.  Jika Anda melihat situasi dari atas, perubahannya tidak bertentangan, meskipun dari sudut pandang git file yang sama terpengaruh. <br>  Saya ingin instrumen dapat menyelesaikan situasi ini sendiri. </p><br><p>  Contoh algoritma untuk menggabungkan dua JSON jika terjadi konflik: </p><br><ol><li><p>  Unduh dari git dasar JSON. </p><br></li><li><p>  Unduh dari gita JSON kami. </p><br></li><li><p>  Mengunduh JSON mereka dari git. </p><br></li><li><p>  Menggunakan jsondiff, kami membentuk tambalan perangkat lunak basis-&gt; dan berlaku untuk tambalan mereka.  JSON yang dihasilkan disebut P1. </p><br></li><li><p>  Menggunakan jsondiff, kami membentuk tambalan perangkat lunak base-&gt; dan berlaku untuk tambalan kami.  JSON yang dihasilkan disebut P2. </p><br></li><li><p>  Idealnya, setelah menerapkan tambalan P1 === P2.  Jika demikian, maka tulis P1 ke disk. </p><br></li><li>  Dalam kasus yang tidak sempurna (ketika konflik benar-benar ada), kami menyarankan pengguna untuk memilih antara P1 dan P2 dengan kemampuan untuk menyelesaikan dengan tangannya.  Kami menulis pilihan ke disk. </li></ol><br><p>  Setelah penggabungan, kami memeriksa apakah status tanpa kesalahan validasi telah tercapai.  Jika Anda belum tiba, batalkan penggabungan dan minta pengguna untuk mengulanginya.  Ini bukan solusi terbaik, tetapi setidaknya menjamin bahwa dari upaya kedua atau ketiga, merger akan terjadi tanpa konsekuensi yang tidak menyenangkan. </p><br><h1 id="itogi">  Ringkasan </h1><br><ol><li>  Tukang daging senang bahwa mereka dapat menggunakan secara legal. </li><li>  Pengenalan git mempercepat pengembangan. </li><li>  Penggabungan otomatis umumnya terlihat seperti sulap. </li><li>  Kami meletakkan penolakan masa depan libgit2 demi memohon proses git. </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id412787/">https://habr.com/ru/post/id412787/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi486164/index.html">कोरोनावायरस 2019-nCoV। श्वसन संरक्षण और कीटाणुशोधन पर अक्सर पूछे जाने वाले प्रश्न</a></li>
<li><a href="../hi486174/index.html">मेरा जीरो टर्नओवर है</a></li>
<li><a href="../id412781/index.html">Penggemar NES telah memungkinkan untuk meluncurkan game SNES di konsol</a></li>
<li><a href="../id412783/index.html">Menginstal proksi MTProto Telegram dari sumber pada Centos 7</a></li>
<li><a href="../id412785/index.html">Magister Manajemen dan Freelancer. Kisahnya dalam tiga bagian</a></li>
<li><a href="../id412789/index.html">"Bantuan dalam pekerjaan": cara membuat bot obrolan lebih pintar</a></li>
<li><a href="../id412791/index.html">Meningkatkan kinerja sistem pengawasan video dan mencegah crash</a></li>
<li><a href="../id412793/index.html">MassTransit, Saga, dan RabbitMQ untuk menerapkan manajer proses</a></li>
<li><a href="../id412795/index.html">Dan mari kita menarik kesimpulan dari diskusi artikel "Apa yang salah dengan kembalinya Geektimes ke Habr"</a></li>
<li><a href="../id412797/index.html">Tentang bahaya CDN, layanan, dan font dari Google</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>