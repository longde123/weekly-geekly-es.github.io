<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÉüèæ ü§ûüèΩ üîö RHEL 8 Beta Workshop: Erstellen von Live-Webanwendungen ‚úãüèæ ‚ò¶Ô∏è üë´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="RHEL 8 Beta bietet Entwicklern viele neue Funktionen, deren Auflistung m√∂glicherweise Seiten umfasst. Es ist jedoch immer besser, neue Dinge in der Pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RHEL 8 Beta Workshop: Erstellen von Live-Webanwendungen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/447540/">  RHEL 8 Beta bietet Entwicklern viele neue Funktionen, deren Auflistung m√∂glicherweise Seiten umfasst. Es ist jedoch immer besser, neue Dinge in der Praxis zu lernen. Daher empfehlen wir, einen Workshop zu absolvieren, um eine Anwendungsinfrastruktur auf der Basis von Red Hat Enterprise Linux 8 Beta zu erstellen. <br><br><img src="https://habrastorage.org/webt/h9/gm/gv/h9gmgvu8uau6n5dgvseh-yop_-4.jpeg" width="100%"><br><br>  Nehmen wir Python, eine Kombination aus Django und PostgreSQL, einem ziemlich verbreiteten Bundle zum Erstellen von Anwendungen, und konfigurieren Sie RHEL 8 Beta f√ºr die Arbeit mit ihnen.  F√ºgen Sie dann ein paar weitere (nicht klassifizierte) Zutaten hinzu. <br><a name="habracut"></a><br>  Die Testumgebung wird sich √§ndern, da es interessant ist, Automatisierungsfunktionen zu untersuchen, mit Containern zu arbeiten und Umgebungen mit mehreren Servern auszuprobieren.  Um mit einem neuen Projekt zu arbeiten, k√∂nnen Sie zun√§chst manuell einen kleinen einfachen Prototyp erstellen. Auf diese Weise k√∂nnen Sie sehen, was genau geschehen muss und wie die Interaktion ausgef√ºhrt wird. Anschlie√üend k√∂nnen Sie mit der Automatisierung fortfahren und komplexere Konfigurationen erstellen.  Heute ist die Geschichte der Schaffung eines solchen Prototyps. <br><br>  Beginnen wir mit der Bereitstellung des Images der virtuellen Maschine RHEL 8 Beta VM.  Sie k√∂nnen die virtuelle Maschine von Grund auf neu installieren oder das KVM-Gastimage verwenden, das mit einem Beta-Abonnement erh√§ltlich ist.  Wenn Sie ein Gastimage verwenden, m√ºssen Sie eine virtuelle CD konfigurieren, die Metadaten und Benutzerdaten f√ºr die Cloud-Initialisierung (Cloud-Init) enth√§lt.  Sie m√ºssen nichts Besonderes mit der Festplattenstruktur oder den verf√ºgbaren Paketen tun, jede Konfiguration reicht aus. <br><br>  Schauen wir uns den gesamten Prozess genauer an. <br><br><h3>  Installieren Sie Django </h3><br>  Mit der neuesten Version von Django ben√∂tigen Sie eine virtuelle Umgebung (virtualenv) mit Python 3.5 oder h√∂her.  In den Hinweisen zur Beta sehen Sie, dass Python 3.6 verf√ºgbar ist. √úberpr√ºfen Sie, ob dies zutrifft: <br><br><pre><code class="plaintext hljs">[cloud-user@8beta1 ~]$ python -bash: python: command not found [cloud-user@8beta1 ~]$ python3 -bash: python3: command not found</code> </pre> <br>  Red Hat verwendet Python aktiv als System-Toolkit in RHEL. Warum erhalten Sie dieses Ergebnis? <br><br>  Tatsache ist, dass viele Entwickler, die Python verwenden, immer noch dar√ºber nachdenken, von Python 2 auf Python 3 umzusteigen, w√§hrend Python 3 selbst aktiv entwickelt wird und immer mehr neue Versionen erscheinen.  Um den Bedarf an stabilen Systemtools zu decken und den Benutzern gleichzeitig Zugriff auf verschiedene neue Versionen von Python zu bieten, wurde System Python in ein neues Paket √ºbertragen und bot die M√∂glichkeit, sowohl Python 2.7 als auch 3.6 zu installieren.  Weitere Informationen zu den √Ñnderungen und warum dies getan wurde, finden Sie im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Langdon White-Blogbeitrag</a> . <br><br>  Um Python zum Laufen zu bringen, m√ºssen Sie nur zwei Pakete installieren, w√§hrend python3-pip als Abh√§ngigkeit aufgerufen wird. <br><br><pre> <code class="plaintext hljs">sudo yum install python36 python3-virtualenv</code> </pre><br>  Warum nicht direkte Modulaufrufe verwenden, wie Langdon vorschl√§gt, und pip3 nicht installieren?  Unter Ber√ºcksichtigung der bevorstehenden Automatisierung ist bekannt, dass Ansible installierte Pip ben√∂tigt, da das Pip-Modul keine virtuellen Umgebungen (virtualenvs) mit einer benutzerdefinierten ausf√ºhrbaren Pip-Datei unterst√ºtzt. <br><br>  Mit einem funktionierenden Python3-Interpreter k√∂nnen Sie den Django-Installationsprozess fortsetzen und ein funktionierendes System zusammen mit unseren anderen Komponenten erhalten.  Das Netzwerk bietet viele Optionen f√ºr die Implementierung.  Hier wird eine Version vorgestellt, aber Benutzer k√∂nnen ihre eigenen Prozesse verwenden. <br><br>  Die in RHEL 8 verf√ºgbaren Versionen von PostgreSQL und Nginx werden standardm√§√üig mit Yum installiert. <br><br><pre> <code class="plaintext hljs">sudo yum install nginx postgresql-server</code> </pre><br>  PostgreSQL ben√∂tigt psycopg2, muss jedoch nur in der virtualenv-Umgebung verf√ºgbar sein, daher werden wir es mit pip3 zusammen mit Django und Gunicorn installieren.  Aber zuerst m√ºssen wir virtualenv konfigurieren. <br><br>  Es gibt immer viele Diskussionen √ºber die Auswahl des richtigen Ortes f√ºr die Installation von Django-Projekten, aber im Zweifelsfall k√∂nnen Sie sich immer auf den Linux Filesystem Hierarchy Standard beziehen.  Laut FHS wird / srv insbesondere verwendet, um: ‚Äûhostspezifische Daten zu speichern - Daten, die das System bereitstellt, z. B. Daten und Skripte von Webservern, auf FTP-Servern gespeicherte Daten sowie Repositorys von Steuerungssystemen Versionen (2004 in FHS-2.3 eingef√ºhrt). ‚Äú <br><br>  Dies ist nur unser Fall, also legen wir alles, was wir brauchen, in / srv ab, das unserem Anwendungsbenutzer (Cloud-Benutzer) geh√∂rt. <br><br><pre> <code class="plaintext hljs">sudo mkdir /srv/djangoapp sudo chown cloud-user:cloud-user /srv/djangoapp cd /srv/djangoapp virtualenv django source django/bin/activate pip3 install django gunicorn psycopg2 ./django-admin startproject djangoapp /srv/djangoapp</code> </pre><br>  Das Einrichten von PostgreSQL und Django ist unkompliziert: Erstellen Sie eine Datenbank, erstellen Sie einen Benutzer, konfigurieren Sie Berechtigungen.  Bei der erstmaligen Installation von PostgreSQL ist ein Punkt zu beachten: das Postgresql-Setup-Skript, das mit dem Postgresql-Server-Paket installiert wird.  Mit diesem Skript k√∂nnen Sie grundlegende Aufgaben im Zusammenhang mit der Verwaltung eines Datenbankclusters ausf√ºhren, z. B. das Initialisieren eines Clusters oder das Aktualisieren von Prozessen.  Um eine neue Instanz von PostgreSQL auf dem RHEL-System zu konfigurieren, m√ºssen Sie den folgenden Befehl ausf√ºhren: <br><br><pre> <code class="plaintext hljs">sudo /usr/bin/postgresql-setup -initdb</code> </pre><br>  Danach k√∂nnen Sie PostgreSQL mit systemd starten, eine Datenbank erstellen und das Projekt in Django konfigurieren.  Denken Sie daran, PostgreSQL neu zu starten, nachdem Sie √Ñnderungen an der Konfigurationsdatei f√ºr die Clientauthentifizierung (normalerweise pg_hba.conf) vorgenommen haben, um den Kennwortspeicher f√ºr den Anwendungsbenutzer zu konfigurieren.  Wenn Sie auf andere Schwierigkeiten sto√üen, m√ºssen Sie die IPv4- und IPv6-Einstellungen in der Datei pg_hba.conf √§ndern. <br><br><pre> <code class="plaintext hljs">systemctl enable -now postgresql sudo -u postgres psql postgres=# create database djangoapp; postgres=# create user djangouser with password 'qwer4321'; postgres=# alter role djangouser set client_encoding to 'utf8'; postgres=# alter role djangouser set default_transaction_isolation to 'read committed'; postgres=# alter role djangouser set timezone to 'utc'; postgres=# grant all on DATABASE djangoapp to djangouser; postgres=# \q</code> </pre><br>  In der Datei /var/lib/pgsql/data/pg_hba.conf: <br><br><pre> <code class="plaintext hljs"># IPv4 local connections: host all all 0.0.0.0/0 md5 # IPv6 local connections: host all all ::1/128 md5</code> </pre><br>  In der Datei /srv/djangoapp/settings.py: <br><br><pre> <code class="plaintext hljs"># Database DATABASES = { 'default': { 'ENGINE': 'django.db.backends.postgresql_psycopg2', 'NAME': '{{ db_name }}', 'USER': '{{ db_user }}', 'PASSWORD': '{{ db_password }}', 'HOST': '{{ db_host }}', } }</code> </pre><br>  Nachdem Sie die Datei settings.py im Projekt konfiguriert und die Datenbankkonfiguration konfiguriert haben, k√∂nnen Sie den Entwicklungsserver starten, um sicherzustellen, dass alles funktioniert.  Nach dem Starten des Entwicklungsservers ist es hilfreich, einen Administrator zu erstellen, um die Verbindung zur Datenbank zu testen. <br><br><pre> <code class="plaintext hljs">./manage.py runserver 0.0.0.0:8000 ./manage.py createsuperuser</code> </pre><br><h3>  WSGI?  Wai </h3><br>  Der Entwicklungsserver ist zum Testen n√ºtzlich. Um die Anwendung auszuf√ºhren, m√ºssen Sie jedoch den entsprechenden Server und Proxy f√ºr das Web Server Gateway Interface (WSGI) konfigurieren.  Es gibt mehrere g√§ngige Bundles, z. B. Apache HTTPD mit uWSGI oder Nginx mit Gunicorn. <br><br>  Das Ziel der Webserver-Gateway-Schnittstelle besteht darin, Anforderungen vom Webserver an das Python-Webframework umzuleiten.  WSGI ist eine Art Erbe der schrecklichen Vergangenheit, als CGI-Mechanismen verwendet wurden, und heute ist WSGI tats√§chlich der Standard, unabh√§ngig vom verwendeten Webserver oder Python-Framework.  Trotz seiner breiten Verbreitung gibt es bei der Arbeit mit diesen Frameworks immer noch viele Nuancen und viele M√∂glichkeiten.  In diesem Fall werden wir versuchen, eine Interaktion zwischen Gunicorn und Nginx √ºber den Socket herzustellen. <br><br>  Da diese beiden Komponenten auf demselben Server installiert sind, werden wir versuchen, einen UNIX-Socket anstelle eines Netzwerk-Sockets zu verwenden.  Da f√ºr die Kommunikation ohnehin ein Socket erforderlich ist, versuchen wir noch einen Schritt und konfigurieren die Socket-Aktivierung f√ºr Gunicorn √ºber systemd. <br><br>  Das Erstellen von Socket-aktivierten Diensten ist einfach genug.  Zuerst wird eine Einheitendatei erstellt, die die ListenStream-Direktive enth√§lt und auf den Punkt verweist, an dem der UNIX-Socket erstellt wird, dann eine Einheitendatei f√ºr den Dienst, wobei die Requires-Direktive auf die Socket-Einheitendatei verweist.  In der Unit-Datei des Dienstes muss Gunicorn dann nur noch aus der virtuellen Umgebung aufgerufen und eine WSGI-Bindung f√ºr den UNIX-Socket und die Django-Anwendung erstellt werden. <br><br>  Hier sind einige Beispiele f√ºr Einheitendateien, die als Grundlage dienen k√∂nnen.  Konfigurieren Sie zun√§chst den Socket. <br><br><pre> <code class="plaintext hljs">[Unit] Description=Gunicorn WSGI socket [Socket] ListenStream=/run/gunicorn.sock [Install] WantedBy=sockets.target</code> </pre><br>  Jetzt m√ºssen Sie den Gunicorn-Daemon konfigurieren. <br><br><pre> <code class="plaintext hljs">[Unit] Description=Gunicorn daemon Requires=gunicorn.socket After=network.target [Service] User=cloud-user Group=cloud-user WorkingDirectory=/srv/djangoapp ExecStart=/srv/djangoapp/django/bin/gunicorn \ ‚Äîaccess-logfile - \ ‚Äîworkers 3 \ ‚Äîbind unix:gunicorn.sock djangoapp.wsgi [Install] WantedBy=multi-user.target</code> </pre><br>  Erstellen Sie f√ºr Nginx einfach eine Proxy-Konfigurationsdatei und richten Sie ein Verzeichnis zum Speichern statischer Inhalte ein, wenn Sie diese verwenden.  In RHEL lauten die Nginx-Konfigurationsdateien /etc/nginx/conf.d.  Dort k√∂nnen Sie das folgende Beispiel in die Datei /etc/nginx/conf.d/default.conf kopieren und den Dienst starten.  Stellen Sie sicher, dass Sie den Servernamen entsprechend Ihrem Hostnamen angeben. <br><br><pre> <code class="plaintext hljs">server { listen 80; server_name 8beta1.example.com; location = /favicon.ico { access_log off; log_not_found off; } location /static/ { root /srv/djangoapp; } location / { proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_pass http://unix:/run/gunicorn.sock; } }</code> </pre><br>  F√ºhren Sie die Gunicorn- und Nginx-Sockets mit systemd aus, und Sie k√∂nnen mit dem Testen beginnen. <br><br><h3>  Fehlerhafter Gateway-Fehler? </h3><br>  Wenn Sie die Adresse im Browser eingeben, wird h√∂chstwahrscheinlich der Fehler 502 Bad Gateway angezeigt.  Dies kann durch falsch konfigurierte Berechtigungen f√ºr den UNIX-Socket oder durch komplexere Probleme im Zusammenhang mit der Zugriffssteuerung in SELinux verursacht werden. <br><br>  Im Nginx-Fehlerprotokoll sehen Sie eine Zeile wie die folgende: <br><br><pre> <code class="plaintext hljs">2018/12/18 15:38:03 [crit] 12734#0: *3 connect() to unix:/run/gunicorn.sock failed (13: Permission denied) while connecting to upstream, client: 192.168.122.1, server: 8beta1.example.com, request: "GET / HTTP/1.1", upstream: "http://unix:/run/gunicorn.sock:/", host: "8beta1.example.com"</code> </pre><br>  Wenn wir Gunicorn direkt testen, erhalten wir eine leere Antwort. <br><br><pre> <code class="plaintext hljs">curl ‚Äîunix-socket /run/gunicorn.sock 8beta1.example.com</code> </pre><br>  Mal sehen, warum das passiert.  Wenn Sie das Protokoll √∂ffnen, werden wir h√∂chstwahrscheinlich feststellen, dass das Problem mit SELinux zusammenh√§ngt.  Da wir einen Daemon ausf√ºhren, f√ºr den wir keine eigene Richtlinie erstellt haben, wird dieser als init_t markiert.  Lassen Sie uns diese Theorie in der Praxis testen. <br><br><pre> <code class="plaintext hljs">sudo setenforce 0</code> </pre><br>  All dies kann Kritik und blutige Tr√§nen verursachen, aber dies ist nur das Debuggen des Prototyps.  Wir schalten den Scheck nur aus, um sicherzustellen, dass dies das Problem ist. Danach werden wir alles wieder an ihren Platz zur√ºckbringen. <br><br>  Durch Aktualisieren der Seite im Browser oder durch Neustarten unseres Befehls curl k√∂nnen Sie die Django-Testseite anzeigen. <br><br>  Um sicherzustellen, dass alles funktioniert und keine Berechtigungsprobleme mehr auftreten, aktivieren wir SELinux erneut. <br><br><pre> <code class="plaintext hljs">sudo setenforce 1</code> </pre><br>  Es wird nicht √ºber audit2allow und die Erstellung von Richtlinien basierend auf Warnungen mit sepolgen gesprochen, da es derzeit keine echte Django-Anwendung gibt, es keine vollst√§ndige Karte dar√ºber gibt, auf was Gunicorn m√∂glicherweise zugreifen m√∂chte und welcher Zugriff verweigert werden sollte.  Daher ist es erforderlich, SELinux beizubehalten, um das System zu sch√ºtzen, und gleichzeitig der Anwendung zu erm√∂glichen, Nachrichten im √úberwachungsprotokoll zu starten und zu hinterlassen, damit Sie darauf basierend eine echte Richtlinie erstellen k√∂nnen. <br><br><h3>  Zul√§ssige Dom√§nen angeben </h3><br>  Nicht jeder hat von erlaubten Domains in SELinux geh√∂rt, aber es gibt nichts Neues in ihnen.  Viele arbeiteten sogar mit ihnen, ohne es selbst zu merken.  Wenn eine Richtlinie basierend auf √úberwachungsnachrichten erstellt wird, ist die erstellte Richtlinie eine zul√§ssige Dom√§ne.  Versuchen wir, die einfachste zul√§ssige Richtlinie zu erstellen. <br><br>  Um eine bestimmte zul√§ssige Domain f√ºr Gunicorn zu erstellen, ben√∂tigen Sie eine bestimmte Richtlinie und die entsprechenden Dateien.  Dar√ºber hinaus werden Tools ben√∂tigt, um neue Richtlinien zusammenzustellen. <br><br><pre> <code class="plaintext hljs">sudo yum install selinux-policy-devel</code> </pre><br>  Der gel√∂ste Dom√§nenmechanismus ist ein hervorragendes Tool zum Erkennen von Problemen, insbesondere bei benutzerdefinierten Anwendungen oder Anwendungen, f√ºr die keine Richtlinien erstellt wurden.  In diesem Fall ist die zul√§ssige Dom√§nenrichtlinie f√ºr Gunicorn so einfach wie m√∂glich. Deklarieren Sie den Haupttyp (gunicorn_t), deklarieren Sie den Typ, mit dem mehrere ausf√ºhrbare Dateien markiert werden (gunicorn_exec_t), und konfigurieren Sie dann den √úbergang f√ºr das System, um die ausgef√ºhrten Prozesse korrekt zu markieren .  In der letzten Zeile wird die Richtlinie zum Zeitpunkt des Ladens standardm√§√üig aktiviert. <br><br>  <b>gunicorn.te:</b> <br><pre> <code class="plaintext hljs">policy_module(gunicorn, 1.0) type gunicorn_t; type gunicorn_exec_t; init_daemon_domain(gunicorn_t, gunicorn_exec_t) permissive gunicorn_t;</code> </pre><br>  Sie k√∂nnen diese Richtliniendatei kompilieren und dem System hinzuf√ºgen. <br><br><pre> <code class="plaintext hljs">make -f /usr/share/selinux/devel/Makefile sudo semodule -i gunicorn.pp sudo semanage permissive -a gunicorn_t sudo semodule -l | grep permissive</code> </pre><br>  Lassen Sie uns √ºberpr√ºfen, ob SELinux etwas anderes blockiert als das, worauf unser unbekannter Daemon zugreift. <br><br><pre> <code class="plaintext hljs">sudo ausearch -m AVC type=AVC msg=audit(1545315977.237:1273): avc: denied { write } for pid=19400 comm="nginx" name="gunicorn.sock" dev="tmpfs" ino=52977 scontext=system_u:system_r:httpd_t:s0 tcontext=system_u:object_r:var_run_t:s0 tclass=sock_file permissive=0</code> </pre><br>  SELinux verhindert, dass Nginx Daten in den von Gunicorn verwendeten UNIX-Socket schreibt.  In solchen F√§llen beginnen sich die Politiker normalerweise zu ver√§ndern, aber es stehen noch andere Aufgaben bevor.  Sie k√∂nnen die Dom√§neneinstellungen auch √§ndern, indem Sie sie von einer Einschr√§nkungsdom√§ne in eine Berechtigungsdom√§ne umwandeln.  Verschieben Sie nun httpd_t in die Berechtigungsdom√§ne.  Dadurch erh√§lt Nginx den erforderlichen Zugriff, und wir k√∂nnen die weitere Arbeit am Debuggen fortsetzen. <br><br><pre> <code class="plaintext hljs">sudo semanage permissive -a httpd_t</code> </pre><br>  Wenn es also m√∂glich war, den SELinux-Schutz beizubehalten (tats√§chlich sollten Sie das Projekt nicht mit SELinux im Einschr√§nkungsmodus belassen) und die Berechtigungsdom√§nen geladen sind, m√ºssen Sie herausfinden, was genau als gunicorn_exec_t markiert werden muss, damit alles wieder wie erwartet funktioniert.  Versuchen wir, auf die Website zuzugreifen, um neue Nachrichten zu Zugriffsbeschr√§nkungen anzuzeigen. <br><br><pre> <code class="plaintext hljs">sudo ausearch -m AVC -c gunicorn</code> </pre><br>  Sie k√∂nnen viele Nachrichten sehen, die 'comm =' gunicorn '' enthalten und verschiedene Aktionen f√ºr Dateien in / srv / djangoapp ausf√ºhren. Dies ist also offensichtlich nur einer der Befehle, die Sie markieren sollten. <br><br>  Dar√ºber hinaus wird jedoch eine Meldung wie die folgende angezeigt: <br><br><pre> <code class="plaintext hljs">type=AVC msg=audit(1545320700.070:1542): avc: denied { execute } for pid=20704 comm="(gunicorn)" name="python3.6" dev="vda3" ino=8515706 scontext=system_u:system_r:init_t:s0 tcontext=unconfined_u:object_r:var_t:s0 tclass=file permissive=0</code> </pre><br>  Wenn Sie sich den Status des Gunicorn-Dienstes ansehen oder den Befehl ps ausf√ºhren, werden keine laufenden Prozesse angezeigt.  Gunicorn scheint zu versuchen, auf den Python-Interpreter in unserer virtuellen Umgebung zuzugreifen, m√∂glicherweise um Arbeitsskripte (Worker) auszuf√ºhren.  Markieren wir nun diese beiden ausf√ºhrbaren Dateien und pr√ºfen, ob wir unsere Django-Testseite √∂ffnen k√∂nnen. <br><br><pre> <code class="plaintext hljs">chcon -t gunicorn_exec_t /srv/djangoapp/django/bin/gunicorn /srv/djangoapp/django/bin/python3.6</code> </pre><br>  Sie m√ºssen den Gunicorn-Dienst neu starten, damit Sie ein neues Etikett ausw√§hlen k√∂nnen.  Sie k√∂nnen es sofort neu starten oder den Dienst beenden und den Socket starten lassen, wenn Sie die Site in einem Browser √∂ffnen.  Stellen Sie sicher, dass die Prozesse mit ps die richtigen Beschriftungen erhalten. <br><br><pre> <code class="plaintext hljs">ps -efZ | grep gunicorn</code> </pre><br>  Denken Sie daran, sp√§ter eine normale SELinux-Richtlinie zu erstellen! <br><br>  Wenn Sie sich jetzt die AVC-Nachrichten ansehen, enth√§lt die letzte Nachricht permissive = 1 f√ºr alles, was mit der Anwendung zu tun hat, und permissive = 0 f√ºr den Rest des Systems.  Wenn Sie wissen, welche Art von Zugriff eine echte Anwendung ben√∂tigt, k√∂nnen Sie schnell den besten Weg finden, um solche Probleme zu l√∂sen.  Bis dahin ist es jedoch besser, das System zu sch√ºtzen und eine klare und benutzerfreundliche Pr√ºfung durch das Django-Projekt zu erhalten. <br><br><pre> <code class="plaintext hljs">sudo ausearch -m AVC</code> </pre><br><h3>  Es stellte sich heraus! </h3><br>  Ein funktionierendes Django-Projekt mit einem Frontend f√ºr Nginx und Gunicorn WSGI erschien.  Wir haben Python 3 und PostgreSQL 10 √ºber die RHEL 8 Beta-Repositorys konfiguriert.  Jetzt k√∂nnen Sie fortfahren und Django-Anwendungen erstellen (oder einfach nur bereitstellen) oder andere verf√ºgbare Tools in RHEL 8 Beta erkunden, um den Optimierungsprozess zu automatisieren, die Leistung zu verbessern oder diese Konfiguration sogar zu containerisieren. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de447540/">https://habr.com/ru/post/de447540/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de447530/index.html">OceanLotus: Malvari-Update f√ºr macOS</a></li>
<li><a href="../de447532/index.html">Splunk Universal Forwarder im Docker als Systemprotokollsammler</a></li>
<li><a href="../de447534/index.html">Kosmonaut Aleksandr Laveykin √ºber den besten Weltraumfilm, G-Force von 20 g und sanfte Landung</a></li>
<li><a href="../de447536/index.html">Implementieren Sie IdM. Vorbereitung zur Umsetzung durch den Kunden</a></li>
<li><a href="../de447538/index.html">KUBA 7: Was ist neu?</a></li>
<li><a href="../de447542/index.html">Sch√§tzung von VaR und ConVaR f√ºr den Aktienkurs des kasachischen Unternehmens</a></li>
<li><a href="../de447546/index.html">Bowers & Wilkins PX. Versp√§tete Neo Bewertung</a></li>
<li><a href="../de447548/index.html">Wie gerechtfertigt ist die Einf√ºhrung von VDI in kleinen und mittleren Unternehmen?</a></li>
<li><a href="../de447552/index.html">So optimieren Sie Katalogabschnitte in einem Online-Shop: Schritt-f√ºr-Schritt-Anleitung</a></li>
<li><a href="../de447554/index.html">√úbersicht √ºber die neuen Funktionen von NestJS 6</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>