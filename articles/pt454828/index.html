<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧝🏽 🕺🏻 🆘 Criando uma imagem em mosaico 🥥 🔻 👰🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Certamente você já viu essas fotos repetidamente na Internet: 


 Eu decidi escrever um script universal para criar essas imagens. 

 Parte teórica 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Criando uma imagem em mosaico</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454828/">  Certamente você já viu essas fotos repetidamente na Internet: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ec1/365/8b0/ec13658b0c0760f5da0e3f30b1f2bf47.jpg" alt="imagem"></div><br>  Eu decidi escrever um script universal para criar essas imagens. <br><a name="habracut"></a><br><h3>  Parte teórica </h3><br>  Vamos falar um pouco sobre como vamos fazer tudo isso.  Suponha que exista um conjunto limitado de imagens com as quais possamos pavimentar a tela, bem como uma imagem, que deve ser apresentada na forma de um mosaico.  Em seguida, precisamos dividir a imagem que precisa ser convertida em áreas idênticas, cada uma das quais é substituída por uma imagem de um conjunto de dados com imagens. <br><br>  Isso levanta a questão de como entender qual imagem do conjunto de dados devemos substituir uma determinada área.  Obviamente, o ladrilho ideal de uma determinada área será a mesma área.  Cada área é dimensionada <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">m</span><span class="MJXp-mtext" id="MJXp-Span-3">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">z</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.489ex" height="1.455ex" viewBox="0 -520.7 4085.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-76" x="1128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-7A" x="2080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="2549" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="3015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6E" x="3485" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> m \ vezes n </script>  pode definir <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-10"><span class="MJXp-mn" id="MJXp-Span-11">3</span><span class="MJXp-mtext" id="MJXp-Span-12">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15">z</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-16">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18">n</span><span class="MJXp-mtext" id="MJXp-Span-19">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22">z</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25">m</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.705ex" height="1.937ex" viewBox="0 -728.2 7192.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6E" x="3107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-76" x="3957" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="4443" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-7A" x="4909" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="5378" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="5844" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6D" x="6314" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> 3 \ vezes n \ vezes m </script>  números (aqui, cada pixel corresponde a três números - seus componentes R, G e B).  Em outras palavras, cada região é definida por um tensor tridimensional.  Agora fica claro que, para determinar a qualidade do ladrilho da área com uma imagem, desde que seus tamanhos coincidam, precisamos calcular alguma função de perda.  Neste problema, podemos considerar o MSE de dois tensores: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-26"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27">M</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29">E</span><span class="MJXp-mo" id="MJXp-Span-30" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31">x</span><span class="MJXp-mo" id="MJXp-Span-32" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33">y</span><span class="MJXp-mo" id="MJXp-Span-34" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-35" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-36">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-40">c</span><span class="MJXp-mrow" id="MJXp-Span-41"><span class="MJXp-mtext" id="MJXp-Span-42">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">m</span><span class="MJXp-mtext" id="MJXp-Span-46">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">t</span><span class="MJXp-msubsup" id="MJXp-Span-52"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53" style="margin-right: 0.05em;">s</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">N</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-54"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55">i</span><span class="MJXp-mo" id="MJXp-Span-56">=</span><span class="MJXp-mn" id="MJXp-Span-57">1</span></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-59" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-60"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61" style="margin-right: 0.05em;">x</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-62" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-64" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-msubsup" id="MJXp-Span-65"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66" style="margin-right: 0.05em;">y</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-67" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-68">i</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-69"><span class="MJXp-mo" id="MJXp-Span-70" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-71" style="vertical-align: 0.5em;">2</span></span></span><span class="MJXp-mrow" id="MJXp-Span-72"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73">N</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="45.915ex" height="3.262ex" viewBox="0 -987.6 19768.9 1404.6" role="img" focusable="false" style="vertical-align: -0.969ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-4D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-53" x="1051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-45" x="1697" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-28" x="2461" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-78" x="2851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-2C" x="3423" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-79" x="3868" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-29" x="4366" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-3D" x="5033" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-66" x="6339" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-72" x="6890" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-61" x="7341" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-63" x="7871" y="0"></use><g transform="translate(8304,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-75" x="719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6D" x="1292" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6C" x="2420" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="2719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6D" x="3064" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="3943" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-74" x="4288" y="0"></use><g transform="translate(4650,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-4E" x="663" y="488"></use><g transform="translate(469,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-3D" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-28" x="6368" y="0"></use><g transform="translate(6757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-2212" x="7896" y="0"></use><g transform="translate(8897,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="693" y="-213"></use></g><g transform="translate(9732,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-32" x="550" y="583"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-4E" x="18880" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> MSE (x, y) = \ frac {\ sum \ limits_ {i = 1} ^ N (x_ {i} - y_ {i}) ^ 2} {N} </script></p><br>  Aqui <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-74"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-75">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> N </script>  - o número de sinais, no nosso caso <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-76"><span class="MJXp-mn" id="MJXp-Span-77">3</span><span class="MJXp-mtext" id="MJXp-Span-78">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">z</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-83">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">n</span><span class="MJXp-mtext" id="MJXp-Span-85">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">z</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">m</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.705ex" height="1.937ex" viewBox="0 -728.2 7192.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6E" x="3107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-76" x="3957" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="4443" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-7A" x="4909" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="5378" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="5844" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6D" x="6314" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> 3 \ vezes n \ vezes m </script>  . <br><br>  No entanto, essa fórmula não se aplica a casos reais.  O fato é que, quando o conjunto de dados é bastante grande e as áreas nas quais a imagem original é dividida são muito pequenas, é necessário executar ações inaceitáveis: a compactação de cada imagem do conjunto de dados para o tamanho da área e considerar o MSE por <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-92"><span class="MJXp-mn" id="MJXp-Span-93">3</span><span class="MJXp-mtext" id="MJXp-Span-94">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">z</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-98">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-99">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-100">n</span><span class="MJXp-mtext" id="MJXp-Span-101">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">z</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">m</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.705ex" height="1.937ex" viewBox="0 -728.2 7192.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-76" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="1236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-7A" x="1702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="2171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="2637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6E" x="3107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-76" x="3957" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="4443" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-7A" x="4909" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="5378" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="5844" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6D" x="6314" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> 3 \ vezes n \ vezes m </script>  características.  Mais precisamente, nesta fórmula, o ruim é que somos forçados a compactar absolutamente todas as imagens para comparação, mais de uma vez, mas um número igual ao número de áreas nas quais a imagem original é dividida. <br><br>  Proponho a seguinte solução para o problema: sacrificaremos um pouco de qualidade e agora caracterizaremos cada imagem do conjunto de dados com apenas 3 números: RGB médio na imagem.  Obviamente, vários problemas surgem disso: primeiro, agora o ladrilho ideal da área não é apenas ele mesmo, mas, por exemplo, também está de cabeça para baixo (é óbvio que esse ladrilho é pior que o primeiro) e, em segundo lugar, depois de calcular a cor média, podemos obter R, G e B que a imagem nem terá um pixel com esses componentes (em outras palavras, é difícil dizer que nossos olhos percebem a imagem como uma mistura de todas as suas cores).  No entanto, não achei uma maneira melhor. <br><br>  Acontece que agora resta apenas uma vez calcular o RGB médio para imagens do conjunto de dados e depois usar as informações recebidas. <br><br>  Resumindo o exposto, descobrimos que agora precisamos selecionar uma região mais próxima do pixel RGB do conjunto e, em seguida, agrupar a região com a imagem do conjunto de dados ao qual esse RGB médio encontrado pertence.  Para comparar a área e o pixel, faremos o mesmo: transformamos a área em três números e encontramos o RGB médio mais próximo.  Acontece que só podemos <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-108"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">R</span><span class="MJXp-mo" id="MJXp-Span-110" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">G</span><span class="MJXp-mo" id="MJXp-Span-112" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">B</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.423ex" height="2.419ex" viewBox="0 -780.1 3195.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-2C" x="759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-47" x="1204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-2C" x="1991" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-42" x="2436" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> R, G, B </script>  encontrar em um conjunto tal <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-114"><span class="MJXp-msubsup" id="MJXp-Span-115"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116" style="margin-right: 0.05em;">R</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-117" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-119" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-120"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121" style="margin-right: 0.05em;">G</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-122" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-124" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-125"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-126" style="margin-right: 0.05em;">B</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-127" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">i</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.822ex" height="2.419ex" viewBox="0 -780.1 4228.7 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="1074" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-2C" x="1103" y="0"></use><g transform="translate(1548,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="1112" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-2C" x="2679" y="0"></use><g transform="translate(3124,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="1074" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-8"> R_ {i}, G_ {i}, B_ {i} </script>  que a distância euclidiana entre esses dois pontos no espaço tridimensional será mínima: <br><br><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-129"><span class="MJXp-mtext" id="MJXp-Span-130">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">t</span><span class="MJXp-mrow" id="MJXp-Span-135"><span class="MJXp-mo" id="MJXp-Span-136" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-137">R</span><span class="MJXp-mo" id="MJXp-Span-138" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-msubsup" id="MJXp-Span-139"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140" style="margin-right: 0.05em;">R</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-141" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">i</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-143"><span class="MJXp-mo" id="MJXp-Span-144" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-145" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-146" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-147" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">G</span><span class="MJXp-mo" id="MJXp-Span-149" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-msubsup" id="MJXp-Span-150"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151" style="margin-right: 0.05em;">G</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-152" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">i</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-154"><span class="MJXp-mo" id="MJXp-Span-155" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-156" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-157" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-158" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-159">B</span><span class="MJXp-mo" id="MJXp-Span-160" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-msubsup" id="MJXp-Span-161"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162" style="margin-right: 0.05em;">B</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-163" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">i</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-165"><span class="MJXp-mo" id="MJXp-Span-166" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-167" style="vertical-align: 0.5em;">2</span></span></span><span class="MJXp-mo" id="MJXp-Span-168" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-169">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-171">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="47.866ex" height="2.901ex" viewBox="0 -935.7 20608.9 1249" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-71" x="719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-72" x="1180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-74" x="1631" y="0"></use><g transform="translate(1993,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-52" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-2212" x="1371" y="0"></use><g transform="translate(2371,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="1074" y="-213"></use></g><g transform="translate(3475,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-32" x="550" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-2B" x="4541" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-28" x="5542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-47" x="5931" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-2212" x="6940" y="0"></use><g transform="translate(7941,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="1112" y="-213"></use></g><g transform="translate(9071,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-32" x="550" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-2B" x="10137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-28" x="11138" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-42" x="11527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-2212" x="12509" y="0"></use><g transform="translate(13510,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="1074" y="-213"></use></g><g transform="translate(14613,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-32" x="550" y="513"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-3D" x="17728" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6D" x="18784" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="19662" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6E" x="20008" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> \ sqrt {(R - R_ {i}) ^ 2 + (G - G_ {i}) ^ 2 + (B - B_ {i}) ^ 2} = min </script><br><br><h3>  Pré-processamento do conjunto de dados </h3><br>  Você pode criar seu próprio conjunto de dados de imagens.  Eu usei uma mesclagem de conjuntos de dados com imagens de cães e gatos. <br><br>  Como escrevi acima, podemos calcular os valores médios de RGB para imagens do conjunto de dados e apenas salvá-los.  O que fazemos: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cv2 <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pickle items = {} <span class="hljs-comment"><span class="hljs-comment"># cv2      BGR,   RGB,     for path in os.listdir('dogs_images_dataset'): #      ,    for file in os.listdir(os.path.join('dogs_images_dataset', path)): file1 = os.path.join('dogs_images_dataset', path + '/' + file) img = np.array(cv2.cvtColor(cv2.imread(file1), cv2.COLOR_BGR2RGB)) r = round(img[:, :, 0].mean()) g = round(img[:, :, 1].mean()) b = round(img[:, :, 2].mean()) items[file1] = (r, g, b,) for file in os.listdir('cats_images_dataset'): #      ,          file1 = os.path.join('cats_images_dataset', file) img = np.array(cv2.cvtColor(cv2.imread(file1), cv2.COLOR_BGR2RGB)) r = round(img[:, :, 0].mean()) g = round(img[:, :, 1].mean()) b = round(img[:, :, 2].mean()) items[file1] = (r, g, b,) with open('data.pickle', 'wb') as f: pickle.dump(items, f)</span></span></code> </pre> <br>  Esse script será executado por um tempo relativamente longo, após o qual as informações necessárias serão salvas no arquivo data.pickle. <br><br><h3>  Mosaico </h3><br>  Por fim, vamos criar o mosaico.  Primeiro, escreveremos as importações necessárias e também declararemos várias constantes: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cv2 <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pickle <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> math <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sqrt PATH_TO_PICTURE = <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-comment"><span class="hljs-comment">#       PICTURE = 'picture.png' #     VERTICAL_SECTION_SIZE = 7 #       HORIZONTAL_SECTION_SIZE = 7 #      </span></span></code> </pre><br>  Nós obtemos os dados salvos do arquivo: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(<span class="hljs-string"><span class="hljs-string">'data.pickle'</span></span>, <span class="hljs-string"><span class="hljs-string">'rb'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f: items = pickle.load(f)</code> </pre> <br>  Nós descrevemos a função de perda: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lost_function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(r_segm, g_segm, b_segm, arg)</span></span></span><span class="hljs-function">:</span></span> r, g, b = arg[<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sqrt((r - r_segm) ** <span class="hljs-number"><span class="hljs-number">2</span></span> + (g - g_segm) ** <span class="hljs-number"><span class="hljs-number">2</span></span> + (b - b_segm) ** <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br>  Abra a imagem original: <br><br><pre> <code class="python hljs">file = os.path.join(PATH_TO_PICTURE, PICTURE) img = np.array(cv2.cvtColor(cv2.imread(file), cv2.COLOR_BGR2RGB)) size = img.shape x, y = size[<span class="hljs-number"><span class="hljs-number">0</span></span>], size[<span class="hljs-number"><span class="hljs-number">1</span></span>]</code> </pre> <br>  Agora observe que a telha é possível se e somente se <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-172"><span class="MJXp-mo" id="MJXp-Span-173" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">x</span><span class="MJXp-msubsup" id="MJXp-Span-175"><span class="MJXp-mtext" id="MJXp-Span-176" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-177" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-178">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180">g</span><span class="MJXp-mtext" id="MJXp-Span-181">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">a</span><span class="MJXp-mrow" id="MJXp-Span-186"><span class="MJXp-mo" id="MJXp-Span-187" style="margin-left: 0em; margin-right: 0em;">ç</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">o</span><span class="MJXp-mtext" id="MJXp-Span-189">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-190">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-192">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-193">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-194">s</span><span class="MJXp-mtext" id="MJXp-Span-195">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-197">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199">a</span><span class="MJXp-mrow" id="MJXp-Span-200"><span class="MJXp-mo" id="MJXp-Span-201" style="margin-left: 0em; margin-right: 0em;">ç</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">x</span><span class="MJXp-mo" id="MJXp-Span-204" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-205">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">a</span><span class="MJXp-mrow" id="MJXp-Span-210"><span class="MJXp-mo" id="MJXp-Span-211" style="margin-left: 0em; margin-right: 0em;">ç</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">o</span><span class="MJXp-mtext" id="MJXp-Span-213">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-216">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218">a</span><span class="MJXp-mtext" id="MJXp-Span-219">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">a</span><span class="MJXp-mrow" id="MJXp-Span-224"><span class="MJXp-mo" id="MJXp-Span-225" style="margin-left: 0em; margin-right: 0em;">ç</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">o</span><span class="MJXp-mo" id="MJXp-Span-227" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">y</span><span class="MJXp-msubsup" id="MJXp-Span-229"><span class="MJXp-mtext" id="MJXp-Span-230" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-231" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">g</span><span class="MJXp-mtext" id="MJXp-Span-235">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-237">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-238">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-239">a</span><span class="MJXp-mrow" id="MJXp-Span-240"><span class="MJXp-mo" id="MJXp-Span-241" style="margin-left: 0em; margin-right: 0em;">ç</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242">o</span><span class="MJXp-mtext" id="MJXp-Span-243">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-245">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-247">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248">s</span><span class="MJXp-mtext" id="MJXp-Span-249">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-252">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-253">a</span><span class="MJXp-mrow" id="MJXp-Span-254"><span class="MJXp-mo" id="MJXp-Span-255" style="margin-left: 0em; margin-right: 0em;">ç</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-257">y</span><span class="MJXp-mo" id="MJXp-Span-258" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="79.416ex" height="2.66ex" viewBox="0 -832 34192.8 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-78" x="389" y="0"></use><g transform="translate(962,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6F" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-72" x="1655" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="2106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-67" x="2452" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="3182" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="3649" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-70" x="4118" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-61" x="4622" y="0"></use><g transform="translate(5151,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ç</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6F" x="5520" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-76" x="6256" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-64" x="6741" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6F" x="7265" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-74" x="7750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="8112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="8831" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="9298" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-70" x="9767" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-61" x="10271" y="0"></use><g transform="translate(10800,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ç</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6F" x="11169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-78" x="11654" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-29" x="12227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="12866" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="13333" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-70" x="13802" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-61" x="14306" y="0"></use><g transform="translate(14835,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ç</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6F" x="15204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-63" x="15940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-75" x="16373" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6E" x="16946" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-68" x="17546" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-61" x="18123" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="18902" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="19369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-70" x="19838" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-61" x="20342" y="0"></use><g transform="translate(20871,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ç</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6F" x="21240" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-28" x="21725" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-79" x="22115" y="0"></use><g transform="translate(22612,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6F" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-72" x="23306" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="23757" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-67" x="24103" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="24833" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="25300" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-70" x="25769" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-61" x="26273" y="0"></use><g transform="translate(26802,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ç</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6F" x="27171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-76" x="27907" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-64" x="28392" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6F" x="28916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-74" x="29401" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="29763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-65" x="30482" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-73" x="30949" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-70" x="31418" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-61" x="31922" y="0"></use><g transform="translate(32451,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ç</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6F" x="32820" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-79" x="33305" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-29" x="33803" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> (x \ _orig \ espaço \ vdots \ espaço x) \ espaço \ cunha \ espaço (y \ _orig \ espaço \ vdots \ espaço y) </script>  onde <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-259"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">x</span><span class="MJXp-msubsup" id="MJXp-Span-261"><span class="MJXp-mtext" id="MJXp-Span-262" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-263" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-265">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-266">g</span><span class="MJXp-mo" id="MJXp-Span-267" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-268">y</span><span class="MJXp-msubsup" id="MJXp-Span-269"><span class="MJXp-mtext" id="MJXp-Span-270" style="margin-right: 0.05em;">&nbsp;</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-271" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-272">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274">g</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.674ex" height="2.298ex" viewBox="0 -728.2 5456.8 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-78" x="0" y="0"></use><g transform="translate(572,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6F" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-72" x="1265" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="1717" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-67" x="2062" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-2C" x="2543" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-79" x="2988" y="0"></use><g transform="translate(3485,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-6F" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-72" x="4179" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-69" x="4630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-67" x="4976" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-11"> x \ _orig, y \ _orig </script>  - o tamanho da imagem original e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-275"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-276">x</span><span class="MJXp-mo" id="MJXp-Span-277" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-278">y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.519ex" height="1.817ex" viewBox="0 -520.7 1515.2 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMAIN-2C" x="572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/454828/&amp;usg=ALkJrhj25qolnxOIvNokfKQEkAh-sx44Ew#MJMATHI-79" x="1017" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> x, y </script>  - dimensões da área de ladrilhos.  Obviamente, a condição acima nem sempre é satisfeita.  Portanto, recortaremos a imagem original em tamanhos adequados, subtraindo do tamanho da imagem seus resíduos da divisão pelo tamanho da região: <br><br><pre> <code class="python hljs">img = cv2.resize(img, (y - (y % VERTICAL_SECTION_SIZE), x - (x % HORIZONTAL_SECTION_SIZE))) size = img.shape x, y = size[<span class="hljs-number"><span class="hljs-number">0</span></span>], size[<span class="hljs-number"><span class="hljs-number">1</span></span>]</code> </pre> <br>  Agora, prosseguimos diretamente para a telha: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(x // HORIZONT AL_SECTION_SIZE): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> j <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(y // VERTICAL_SECTION_SIZE): sect = img[i * HORIZONTAL_SECTION_SIZE:(i + <span class="hljs-number"><span class="hljs-number">1</span></span>) * HORIZONTAL_SECTION_SIZE, j * VERTICAL_SECTION_SIZE:(j + <span class="hljs-number"><span class="hljs-number">1</span></span>) * VERTICAL_SECTION_SIZE] r_mean, g_mean, b_mean = sect[:, :, <span class="hljs-number"><span class="hljs-number">0</span></span>].mean(), sect[:, :, <span class="hljs-number"><span class="hljs-number">1</span></span>].mean(), sect[:, :, <span class="hljs-number"><span class="hljs-number">2</span></span>].mean()</code> </pre> <br>  Aqui, na penúltima linha, a área de imagem desejada é selecionada e, na última linha, seus componentes RGB médios são considerados. <br><br>  Agora considere uma das linhas mais importantes: <br><br><pre> <code class="python hljs">current = sorted(items.items(), key=<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> argument: lost_function(r_mean, g_mean, b_mean, argument))[<span class="hljs-number"><span class="hljs-number">0</span></span>]</code> </pre> <br>  Essa linha classifica todas as imagens do conjunto de dados em ordem crescente pelo valor da função de perda para elas e obtém argmin. <br><br>  Agora só precisamos cortar a imagem e substituir a área por ela: <br><br><pre> <code class="python hljs">resized = cv2.resize(cv2.cvtColor(cv2.imread(current[<span class="hljs-number"><span class="hljs-number">0</span></span>]), cv2.COLOR_BGR2RGB), (VERTICAL_SECTION_SIZE, HORIZONTAL_SECTION_SIZE,)) img[i * HORIZONTAL_SECTION_SIZE:(i + <span class="hljs-number"><span class="hljs-number">1</span></span>) * HORIZONTAL_SECTION_SIZE, j * VERTICAL_SECTION_SIZE:(j + <span class="hljs-number"><span class="hljs-number">1</span></span>) * VERTICAL_SECTION_SIZE] = resized</code> </pre> <br>  E, finalmente, exiba a imagem resultante na tela: <br><br><pre> <code class="python hljs">img = cv2.cvtColor(img, cv2.COLOR_RGB2BGR) cv2.imshow(<span class="hljs-string"><span class="hljs-string">'ImageWindow'</span></span>, img) cv2.waitKey(<span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre> <br><h3>  Um pouco mais sobre a função de perda </h3><br>  Em geral, existem várias opções para a função de perda, cada uma das quais é teoricamente aplicável a esse problema.  Sua qualidade só pode ser avaliada empiricamente, o que você pode fazer :) <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-279"><span class="MJXp-mrow" id="MJXp-Span-280"><span class="MJXp-mo" id="MJXp-Span-281" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mtext" id="MJXp-Span-282">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-283">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-284">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-285">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-286">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-287">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288">R</span><span class="MJXp-mrow" id="MJXp-Span-289"><span class="MJXp-mo" id="MJXp-Span-290" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mo" id="MJXp-Span-291" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mrow" id="MJXp-Span-292"><span class="MJXp-mo" id="MJXp-Span-293" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mtext" id="MJXp-Span-294">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-296">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-298">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-299">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300">G</span><span class="MJXp-mrow" id="MJXp-Span-301"><span class="MJXp-mo" id="MJXp-Span-302" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mo" id="MJXp-Span-303" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mrow" id="MJXp-Span-304"><span class="MJXp-mo" id="MJXp-Span-305" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mtext" id="MJXp-Span-306">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-307">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-309">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-310">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-311">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-312">B</span><span class="MJXp-mrow" id="MJXp-Span-313"><span class="MJXp-mo" id="MJXp-Span-314" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mspace" id="MJXp-Span-315" style="width: 0em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-316">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">t</span><span class="MJXp-mrow" id="MJXp-Span-321"><span class="MJXp-mtext" id="MJXp-Span-322">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-325">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-326">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327">a</span><span class="MJXp-msubsup" id="MJXp-Span-328"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-329" style="margin-right: 0.05em;">R</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-330" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-331" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-332">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-333">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-336">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">a</span><span class="MJXp-msubsup" id="MJXp-Span-338"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-339" style="margin-right: 0.05em;">G</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-340" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-341" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-342">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-344">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-345">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347">a</span><span class="MJXp-msubsup" id="MJXp-Span-348"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349" style="margin-right: 0.05em;">B</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-350" style="vertical-align: 0.5em;">2</span></span></span><span class="MJXp-mspace" id="MJXp-Span-351" style="width: 0em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-352">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-354">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356">t</span><span class="MJXp-mrow" id="MJXp-Span-357"><span class="MJXp-mn" id="MJXp-Span-358">0</span><span class="MJXp-mo" id="MJXp-Span-359" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-360">2126</span><span class="MJXp-mtext" id="MJXp-Span-361">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-362">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-363">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-364">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-365">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-366">a</span><span class="MJXp-msubsup" id="MJXp-Span-367"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-368" style="margin-right: 0.05em;">R</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-369" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-370" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-371">0</span><span class="MJXp-mo" id="MJXp-Span-372" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-373">7152</span><span class="MJXp-mtext" id="MJXp-Span-374">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-375">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-376">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-377">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-378">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379">a</span><span class="MJXp-msubsup" id="MJXp-Span-380"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381" style="margin-right: 0.05em;">G</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-382" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-383" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-384">0</span><span class="MJXp-mo" id="MJXp-Span-385" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-386">0722</span><span class="MJXp-mtext" id="MJXp-Span-387">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-388">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-389">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-390">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-391">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-392">a</span><span class="MJXp-msubsup" id="MJXp-Span-393"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394" style="margin-right: 0.05em;">B</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-395" style="vertical-align: 0.5em;">2</span></span></span><span class="MJXp-mtext" id="MJXp-Span-396">&nbsp;</span><span class="MJXp-mtext" id="MJXp-Span-397">&nbsp;</span><span class="MJXp-mtext" id="MJXp-Span-398">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-399">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-400">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-401">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-402">t</span><span class="MJXp-mrow" id="MJXp-Span-403"><span class="MJXp-mn" id="MJXp-Span-404">0</span><span class="MJXp-mo" id="MJXp-Span-405" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-406"><span class="MJXp-mn" id="MJXp-Span-407" style="margin-right: 0.05em;">2126</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-408" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-409">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-410">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-411">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-413">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-414">a</span><span class="MJXp-msubsup" id="MJXp-Span-415"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-416" style="margin-right: 0.05em;">R</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-417" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-418" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-419">0</span><span class="MJXp-mo" id="MJXp-Span-420" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-421"><span class="MJXp-mn" id="MJXp-Span-422" style="margin-right: 0.05em;">7152</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-423" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-424">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-426">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-427">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-429">a</span><span class="MJXp-msubsup" id="MJXp-Span-430"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-431" style="margin-right: 0.05em;">G</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-432" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-433" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-434">0</span><span class="MJXp-mo" id="MJXp-Span-435" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-436"><span class="MJXp-mn" id="MJXp-Span-437" style="margin-right: 0.05em;">0722</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-438" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-439">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-440">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-441">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-442">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-443">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-444">a</span><span class="MJXp-msubsup" id="MJXp-Span-445"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-446" style="margin-right: 0.05em;">B</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-447" style="vertical-align: 0.5em;">2</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-13"> | \ Delta R | + | \ Delta G | + | \ Delta B | \\ \ sqrt {\ Delta R ^ 2 + \ Delta G ^ 2 + \ Delta B ^ 2} \\ \ sqrt {0,2126 \ Delta R ^ 2 + 0,7152 \ Delta G ^ 2 + 0,0722 \ Delta B ^ 2} \ \ \ sqrt {0,2126 ^ 2 \ Delta R ^ 2 + 0,7152 ^ 2 \ Delta G ^ 2 + 0,0722 ^ 2 \ Delta B ^ 2} </script></p><br><br><h3>  Conclusão </h3><br>  Aqui estão alguns dos meus resultados: <br><br><div class="spoiler">  <b class="spoiler_title">Aberto</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/dc8/729/395/dc87293957d6476e4a865de29d665414.jpg" alt="imagem"><br><img src="https://habrastorage.org/getpro/habr/post_images/df8/ecd/b6e/df8ecdb6e4ad0c7bf55cc1f7a21fcac0.jpg" alt="imagem"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Originais</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/f4a/41c/447/f4a41c44793e3070ab22541ee54f1c89.jpg" alt="imagem"><br><img src="https://habrastorage.org/getpro/habr/post_images/463/fd3/5f0/463fd35f0b3ccf5b86aaef2c2db7b0ff.jpg" alt="imagem"><br></div></div><br>  O código fonte completo, o arquivo data.pickle já calculado, bem como o arquivo com o conjunto de dados que eu coletei, você pode ver no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">repositório</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt454828/">https://habr.com/ru/post/pt454828/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt454816/index.html">Configurando o pacote php-fpm + nginx no WSL</a></li>
<li><a href="../pt454818/index.html">Desafio Rekko - como conquistar o 2º lugar na competição pela criação de sistemas de recomendação</a></li>
<li><a href="../pt454820/index.html">Pesquisa do Azure</a></li>
<li><a href="../pt454824/index.html">O amplificador operacional mais simples em elementos discretos</a></li>
<li><a href="../pt454826/index.html">Reduza os backups em 99,5% com hashget</a></li>
<li><a href="../pt454830/index.html">3 principais qualidades para um gerente de produto de sucesso: Alexander Belyaev</a></li>
<li><a href="../pt454832/index.html">Por que uma semana de trabalho de quatro dias é um péssimo conto</a></li>
<li><a href="../pt454834/index.html">Os termos reais do estudo da digitação por toque com baixa motivação</a></li>
<li><a href="../pt454840/index.html">Mudança cuidadosa para a Holanda com sua esposa e hipoteca. Parte 2: preparando documentos e movendo</a></li>
<li><a href="../pt454844/index.html">Odigest: interessante para designers da semana</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>