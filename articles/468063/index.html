<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôøÔ∏è üë®üèª‚Äçüé® üòº Angulareact üÜí üë¶ üìî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tengo un problema La aplicaci√≥n est√° escrita en Angular y la biblioteca de componentes en React. Clonar una biblioteca demasiado cara. Por lo tanto, d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Angulareact</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468063/"><p>  Tengo un problema  La aplicaci√≥n est√° escrita en Angular y la biblioteca de componentes en React.  Clonar una biblioteca demasiado cara.  Por lo tanto, debe usar los componentes React en una aplicaci√≥n angular con un costo m√≠nimo.  Descubrimos c√≥mo hacerlo. </p><a name="habracut"></a><br><h1 id="diskleymer">  Descargo de responsabilidad </h1><br><p>  No soy especialista en Angular en absoluto.  Prob√© la primera versi√≥n en 2017, luego mir√© un poco en AngularDart, y ahora he encontrado soporte de aplicaciones en una versi√≥n moderna del marco.  Si te parece que las decisiones son extra√±as o "de otro mundo", no te parece. </p><br><p>  La soluci√≥n presentada en el art√≠culo a√∫n no se ha probado en proyectos reales y es solo un concepto.  √öselo bajo su propio riesgo. </p><br><h1 id="problema">  El problema </h1><br><p>  Ahora apoyo y desarrollo una aplicaci√≥n bastante grande en Angular 8. Adem√°s, hay un par de peque√±as aplicaciones en React y planea construir una docena m√°s (tambi√©n en React).  Todas las aplicaciones se utilizan para las necesidades internas de la empresa y deben tener el mismo estilo.  La √∫nica forma l√≥gica es crear una biblioteca de componentes sobre la base de la cual pueda construir r√°pidamente cualquier aplicaci√≥n. </p><br><p>  Pero en la situaci√≥n actual, no puede simplemente tomar y escribir una biblioteca en React.  No puede usarlo en la aplicaci√≥n m√°s grande, est√° escrito en Angular.  No soy el primero en encontrar este problema.  Lo primero que debe estar en Google para "reaccionar en √°ngulo" es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el repositorio de Microsoft</a> .  Desafortunadamente, esta soluci√≥n no tiene documentaci√≥n en absoluto.  Adem√°s, en el archivo L√©ame del proyecto, se dice claramente que el paquete es utilizado internamente por Microsoft, el equipo no tiene planes obvios para su desarrollo y es solo bajo su propio riesgo utilizarlo.  No estoy listo para arrastrar un paquete tan ambiguo a producci√≥n, as√≠ que decid√≠ escribir mi bicicleta. </p><br><p><img src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/829e9e3b-1673-4067-9278-982f01e95d52/__2019-09-18__20.15.04.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=ASIAT73L2G45FTZDIACS%2F20190919%2Fus-west-2%2Fs3%2Faws4_request&amp;X-Amz-Date=20190919T122008Z&amp;X-Amz-Expires=86400&amp;X-Amz-Security-Token=AgoJb3JpZ2luX2VjENv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQCwuWc5hbwOjFa2gBX2qSa%2BrPvZmF79lBk8yc%2FXnhR5OgIgVv7r%2B%2FVK4eHtMZ4VXucxi3NFCVA8KGyzNOFcqsvvb0gq4wMIpP%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FARAAGgwyNzQ1NjcxNDkzNzAiDIQt1CA3IZ1diLWvKSq3A%2F7R4EFxWqz0ZQ3cWqbpSl7qAIZE6%2BRc8fFwpNm25pdxvEdKJXJAPDdmXjAfCd0QSedX2LOyOJ9aBjD1QXuPFe1EbMLho%2FztYBqFQyGw10VbM46reb9hex75UyV9W%2F4n%2Fx9A112LY%2FcYImpbCNz7C03aCnSybewd8uI6CbFQxR2T%2FttEuN%2BM7MINO3IiyviPzfxQH1%2FOh6%2BXJ%2FXnn7Hqy1cl07wbV9etV2Ul%2Bp71IAlE4sBaP2ZLCasQEwCbMS7dqxuQBD2vIaoW6xePr5UnIirdOwoTHmyCgkUvJbcMC159%2Bo2MXfWmwyYq3Zfv%2B%2FVoJAwiaSewM1LSls%2FUkj4TF0ILK58Isc2qFD9%2F07VV%2BoA9i0ppr%2BZhyxhLr02OftacApW638RhHUT2I%2B0DqSRdtLpRA0%2FJzJKfUvTuWY0P5sA7ulAEzvCZe3MuavIxQY9mAGyRJja%2BfRx6l3W49Gfk2Fdzv7054xQ0nJaaoaOrM7jR7taTU8HzoGnH1M3Ap0UXLu%2FVXYWFot78zsa0aDta2RIREzoL%2FDb7i8Sm6Ec5gPeTu7udP%2F2Zrgyidr0wPy1FEir0wGZJYj4wpLCN7AU6tAGdmaM%2F3OTcKirVsB97LangLG7SvqYaEZ0QCtZjQ1ismZ2d0epUNHq8J%2FbnEpM4DugcaKiXTKgLERS6nk61%2Bz3BEKh3GGUVz%2FS%2BYpHJEAo5QsoHBXiwvWlxEfnDVvYkyob2qghv0NjLp9ljkrHLnzgFGLAasNIDiPZT69zfBffDJwBhDVp6p7s3LefdevJiv5lMaMm3P272igMJjgxTiSCHiJrUVMvSgZ9PLY9ZICyyJCc2z60%3D&amp;X-Amz-Signature=5102f76091725ed13505a80485bbb95a0bcf5fc1ec2205aad9525c46ad70b09e&amp;X-Amz-SignedHeaders=host&amp;response-content-disposition=filename%20%3D%22__2019-09-18__20.15.04.png%22" alt="imagen"></p><br><p>  Sitio oficial @ angular-react / core </p><br><h1 id="reshenie">  Soluci√≥n </h1><br><p>  React es una biblioteca dise√±ada para resolver un problema espec√≠fico: administrar el √°rbol DOM de un documento.  Podemos poner cualquier elemento React en un nodo DOM arbitrario. </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Hello = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> &lt;p&gt;Hello, React!<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; render(<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Hello</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">, document.getElementById('#hello'));</span></span></code> </pre> <br><p>  Adem√°s, no hay restricciones en las llamadas repetidas a la funci√≥n de <code>render</code> .  Es decir, es posible representar cada componente por separado en el DOM.  Y esto es exactamente lo que ayudar√° a dar el primer paso en la integraci√≥n. </p><br><h2 id="podgotovka">  Preparaci√≥n </h2><br><p>  En primer lugar, es importante comprender que React por defecto no requiere condiciones especiales durante el ensamblaje.  Si no usa JSX, pero se limita a llamar a <code>createElement</code> , entonces no tendr√° que tomar ninguna medida, todo saldr√° de la caja. </p><br><p>  Pero, por supuesto, estamos acostumbrados a usar JSX y no queremos perderlo.  Afortunadamente, Angular usa TypeScript de manera predeterminada, que puede transformar JSX en llamadas a funciones.  Solo necesita agregar el indicador del compilador <code>--jsx=react</code> o en <code>tsconfig.json</code> en la secci√≥n <code>compilerOptions</code> agregue la l√≠nea <code>"jsx": "react"</code> . </p><br><h2 id="integraciya-otobrazheniya">  Integraci√≥n de pantalla </h2><br><p>  Para comenzar, debemos asegurarnos de que los componentes React se muestren dentro de la aplicaci√≥n Angular.  Es decir, para que los elementos DOM resultantes del trabajo de la biblioteca ocupen los lugares correctos en el √°rbol de elementos. </p><br><p>  Cada vez que usa el componente Reaccionar, pensar en llamar correctamente a la funci√≥n de <code>render</code> es demasiado dif√≠cil.  Adem√°s, en el futuro necesitaremos integrar componentes a nivel de datos y controladores de eventos.  En este caso, tiene sentido crear un componente angular que encapsule toda la l√≥gica de crear y controlar el elemento React. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Hello.tsx export const Hello = () =&gt; &lt;p&gt;Hello, React!&lt;/p&gt;; // hello.component.ts import { createElement } from 'react'; import { render } from 'react-dom'; import { Hello } from './Hello'; @Component({ selector: 'app-hello', template: `&lt;div #react&gt;&lt;/div&gt;`, }) export class HelloComponent implements OnInit { @ViewChild('react', { read: ElementRef, static: true }) ref: ElementRef; ngOnInit() { this.renderReactElement(); } private renderReactElement() { const props = {}; const reactElement = createElement(Hello, props); render(reactElement, this.ref.nativeElement); } }</span></span></code> </pre> <br><p>  El c√≥digo del componente angular es extremadamente simple.  Por s√≠ solo representa un contenedor vac√≠o y obtiene un enlace a √©l.  En este caso, en el momento de la inicializaci√≥n, se llama el renderizado del elemento React.  Se crea utilizando la funci√≥n <code>createElement</code> y se pasa a la funci√≥n de <code>render</code> , que lo coloca en el nodo DOM creado desde Angular.  Puede usar dicho componente como cualquier otro componente de Angulat, sin condiciones especiales. </p><br><h2 id="integraciya-vhodnyh-dannyh">  Integraci√≥n de entrada </h2><br><p>  Por lo general, al mostrar elementos de la interfaz, debe transferirles datos.  Todo aqu√≠ tambi√©n es bastante prosaico: al llamar a <code>createElement</code> puede pasar cualquier informaci√≥n a trav√©s de los accesorios al componente. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Hello.tsx export const Hello = ({ name }) =&gt; &lt;p&gt;Hello, {name}!&lt;/p&gt;; // hello.component.ts import { createElement } from 'react'; import { render } from 'react-dom'; import { Hello } from './Hello'; @Component({ selector: 'app-hello', template: `&lt;div #react&gt;&lt;/div&gt;`, }) export class HelloComponent implements OnInit { @ViewChild('react', { read: ElementRef, static: true }) ref: ElementRef; @Input() name: string; ngOnInit() { this.renderReactElement(); } private renderReactElement() { const props = { name: this.name, }; const reactElement = createElement(Hello, props); render(reactElement, this.ref.nativeElement); } }</span></span></code> </pre> <br><p>  Ahora puede pasar la cadena de <code>name</code> al componente Angular, caer√° en el componente Reaccionar y se representar√°.  Pero si la l√≠nea cambia debido a razones externas, React no lo sabr√° y obtendremos una pantalla desactualizada.  Angular tiene un <code>ngOnChanges</code> ciclo de vida <code>ngOnChanges</code> que le permite realizar un seguimiento de los cambios en los par√°metros de los componentes y las reacciones a los <code>ngOnChanges</code> .  Implementamos la interfaz <code>OnChanges</code> y agregamos un m√©todo: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ... ngOnChanges(_: SimpleChanges) { this.renderReactElement(); } // ...</span></span></code> </pre> <br><p>  Basta con volver a llamar a la funci√≥n de <code>render</code> con un elemento creado a partir de nuevos accesorios, y la propia biblioteca descubrir√° qu√© partes del √°rbol deben renderizarse.  El estado local dentro del componente tambi√©n se conservar√°. </p><br><p>  Despu√©s de estas manipulaciones, el componente angular se puede usar de la manera habitual y pasarle datos. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-hello</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Angular"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-hello</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-hello</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-hello</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Para un trabajo m√°s fino con la actualizaci√≥n de componentes, puede mirar hacia la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estrategia de detecci√≥n de cambios</a> .  No considerar√© esto en detalle. </p><br><h2 id="integraciya-vyhodnyh-dannyh">  Integraci√≥n de salida </h2><br><p>  Otro problema persiste: la reacci√≥n de la aplicaci√≥n a los eventos dentro de los componentes React.  <code>@Output</code> decorador <code>@Output</code> y <code>@Output</code> la devoluci√≥n de llamada al componente a trav√©s de accesorios. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Hello.tsx export const Hello = ({ name, onClick }) =&gt; ( &lt;div&gt; &lt;p&gt;Hello, {name}!&lt;/p&gt; &lt;button onClick={onClick}&gt;Say "hello"&lt;/button&gt; &lt;/div&gt; ); // hello.component.ts import { createElement } from 'react'; import { render } from 'react-dom'; import { Hello } from './Hello'; @Component({ selector: 'app-hello', template: `&lt;div #react&gt;&lt;/div&gt;`, }) export class HelloComponent implements OnInit { @ViewChild('react', { read: ElementRef, static: true }) ref: ElementRef; @Input() name: string; @Output() click = new EventEmitter&lt;string&gt;(); ngOnInit() { this.renderReactElement(); } private renderReactElement() { const props = { name: this.name, onClick: () =&gt; this.lick.emit(`Hello, ${this.name}!`), }; const reactElement = createElement(Hello, props); render(reactElement, this.ref.nativeElement); } }</span></span></code> </pre> <br><p>  Listo  Al usar el componente, puede registrar controladores de eventos y responder a ellos. </p><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-hello</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">)=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sayHello($event)"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-hello</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  El resultado es un contenedor completamente funcional para el componente React para usar dentro de una aplicaci√≥n angular.  Puede transmitir datos y responder a eventos dentro de √©l. </p><br><h2 id="one-more-thing">  Una cosa mas ... </h2><br><p>  Para m√≠, lo m√°s conveniente en Angular es el enlace de datos bidireccional, <code>ngModel</code> .  Es conveniente, simple, requiere una cantidad muy peque√±a de c√≥digo.  Pero en la implementaci√≥n actual, la integraci√≥n no es posible.  Esto se puede arreglar.  Para ser sincero, no entiendo realmente c√≥mo funciona este mecanismo desde el punto de vista del dispositivo interno.  Por lo tanto, admito que mi soluci√≥n es s√∫per sub√≥ptima y me alegrar√° si escribe en los comentarios una forma m√°s hermosa de apoyar <code>ngModel</code> . </p><br><p>  En primer lugar, debe implementar la interfaz <code>ControlValueAccessor</code> (del paquete <code>@angular/forms</code> y agregar un nuevo proveedor al componente. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { NG_VALUE_ACCESSOR, ControlValueAccessor } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/forms'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> REACT_VALUE_ACCESSOR: any = { <span class="hljs-attr"><span class="hljs-attr">provide</span></span>: NG_VALUE_ACCESSOR, <span class="hljs-attr"><span class="hljs-attr">useExisting</span></span>: forwardRef(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> HelloComponent), <span class="hljs-attr"><span class="hljs-attr">multi</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }; @Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'app-hello'</span></span>, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">`&lt;div #react&gt;&lt;/div&gt;`</span></span>, <span class="hljs-attr"><span class="hljs-attr">providers</span></span>: [PREACT_VALUE_ACCESSOR], }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PreactComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnChanges</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ControlValueAccessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p>  Esta interfaz requiere la implementaci√≥n de los m√©todos <code>onBlur</code> , <code>writeValue</code> , <code>registerOnChange</code> , <code>registerOnTouched</code> .  Todos ellos est√°n bien descritos en la documentaci√≥n.  Nos damos cuenta de ellos. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    const noop = () =&gt; {}; @Component({ selector: 'app-hello', template: `&lt;div #react&gt;&lt;/div&gt;`, providers: [PREACT_VALUE_ACCESSOR], }) export class PreactComponent implements OnInit, OnChanges, ControlValueAccessor { // ... private innerValue: string; //      ngModel private onTouchedCallback: Callback = noop; private onChangeCallback: Callback = noop; //       //       get value(): string { return this.innerValue; } set value(v: string) { if (v !== this.innerValue) { this.innerValue = v; //    ,   this.onChangeCallback(v); } } writeValue(value: string) { if (value !== this.innerValue) { this.innerValue = value; //        this.renderReactElement(); } } //   registerOnChange(fn: Callback) { this.onChangeCallback = fn; } registerOnTouched(fn: Callback) { this.onTouchedCallback = fn; } //    onBlur() { this.onTouchedCallback(); } }</span></span></code> </pre> <br><p>  Despu√©s de eso, debe asegurarse de que todo esto se pase al componente React.  Desafortunadamente, React no puede trabajar con el enlace de datos bidireccional, por lo que le daremos un valor y una devoluci√≥n de llamada para cambiarlo.  <code>renderReactElement</code> m√©todo <code>renderReactElement</code> . </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ... private renderReactElement() { const props = { name: this.name, onClick: () =&gt; this.lick.emit(`Hello, ${this.name}!`), model: { value: this.value, onChange: v =&gt; { this.value = v; } }, }; const reactElement = createElement(Hello, props); render(reactElement, this.ref.nativeElement); } // ...</span></span></code> </pre> <br><p>  Y en el componente Reaccionar, usaremos este valor y la devoluci√≥n de llamada. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Hello = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ name, onClick, model }</span></span></span><span class="hljs-function">) =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Hello, {name}!</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{onClick}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Say "hello"</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{model.value}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{e</span></span></span></span><span class="xml"><span class="hljs-tag"> =&gt;</span></span></span><span class="xml"> model.onChange(e.target.value)} /&gt; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> );</span></span></code> </pre> <br><p>  Ahora, realmente integramos React en Angular.  Puede usar el componente resultante como desee. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-hello</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">)=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sayHello($event)"</span></span></span><span class="hljs-tag"> [(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngModel</span></span></span><span class="hljs-tag">)]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-hello</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h1 id="itog">  Resumen </h1><br><p>  React es una biblioteca muy simple que es f√°cil de integrar con cualquier cosa.  Usando el enfoque que se muestra, no solo puede usar ning√∫n componente React dentro de las aplicaciones Angulares de forma continua, sino que tambi√©n puede migrar gradualmente toda la aplicaci√≥n. </p><br><p>  En este art√≠culo, no toqu√© en absoluto los problemas de estilo.  Si usa soluciones cl√°sicas de CSS en JS (componentes con estilo, emoci√≥n, JSS), no tiene que tomar ninguna acci√≥n adicional.  Pero si el proyecto requiere soluciones m√°s productivas (astroturf, linaria, m√≥dulos CSS), deber√° trabajar en la configuraci√≥n del paquete web.  Historia destacada: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">personalice la configuraci√≥n del paquete web en su aplicaci√≥n angular</a> . </p><br><p>  Para migrar completamente la aplicaci√≥n de Angular a React, a√∫n debe resolver el problema de implementar servicios en React-components.  Una manera simple es obtener el servicio en un componente contenedor y pasarlo a trav√©s de accesorios.  La forma dif√≠cil es escribir una capa que obtenga servicios del inyector por token.  Consideraci√≥n de este tema m√°s all√° del alcance del art√≠culo. </p><br><h1 id="bonus">  Bono </h1><br><p>  Es importante comprender que con este enfoque de 85 KB de Angular, se agregan casi 40 KB de c√≥digo de <code>react</code> y <code>react-dom</code> .  Esto puede tener un impacto significativo en la velocidad de la aplicaci√≥n.  Recomiendo considerar usar el Preact en miniatura, que pesa solo 3 KB.  Su integraci√≥n casi no es diferente. </p><br><ol><li>  En <code>tsconfig.json</code> agregamos una nueva opci√≥n de compilaci√≥n: <code>"jsxFactory": "h"</code> , indicar√° que necesita usar la funci√≥n <code>h</code> para convertir JSX.  Ahora, en cada archivo con c√≥digo JSX, <code>import { h } from 'preact'</code> . </li><li>  Todas las llamadas a <code>React.createElement</code> reemplazan por <code>Preact.h</code> . </li><li>  Todas las llamadas a <code>ReactDOM.render</code> reemplazan por <code>Preact.render</code> . </li></ol><br><p>  Hecho  Lea las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">instrucciones para migrar de React a Preact</a> .  Pr√°cticamente no hay diferencias. </p><br><h1 id="upd-19919-1649">  UPD 19.9.19 16.49 </h1><br><p>  Enlace tem√°tico de los comentarios - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Micro Frontends</a> </p><br><h1 id="upd-20919-1430">  UPD 20.9.19 14.30 </h1><br><p>  Otro enlace tem√°tico de los comentarios - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Micro Frontends</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/468063/">https://habr.com/ru/post/468063/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../468051/index.html">VDS con Windows Server con licencia por 100 rublos: ¬ømito o realidad?</a></li>
<li><a href="../468053/index.html">Aprendizaje autom√°tico para su caza plana. Parte 1</a></li>
<li><a href="../468057/index.html">Desarrollo de sistema operativo tipo Unix: multitarea y llamadas al sistema (7)</a></li>
<li><a href="../468059/index.html">Mi segunda semana con Haiku: muchos diamantes escondidos y sorpresas agradables, as√≠ como algunos problemas</a></li>
<li><a href="../468061/index.html">Cron en Linux: historia, uso y dispositivo</a></li>
<li><a href="../468065/index.html">Modelos de gesti√≥n mental de productos para todos</a></li>
<li><a href="../468067/index.html">C√≥mo funciona la composici√≥n alfa</a></li>
<li><a href="../468071/index.html">Eduard Medvedev, CTO de Tungsten Labs: "Hemos crecido hasta el punto en que la tecnolog√≠a puede causar da√±os masivos"</a></li>
<li><a href="../468073/index.html">Andrei Terekhov: "Puedes decir todo lo que quieras que el estadounidense es mejor, pero nuestro auto nunca se descompone"</a></li>
<li><a href="../468075/index.html">El uso de redes neuronales siamesas en la b√∫squeda</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>