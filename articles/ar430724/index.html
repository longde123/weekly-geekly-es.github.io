<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤜🏽 🔛 🐠 DEFCON 21. يمكن أن يكون مؤتمر DNS خطيرًا على صحتك. الجزء الأول 🕤 🤙🏿 🧐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="اسمي Rob Stackle ، أنا مستشار أمني من فينيكس ، أريزونا ، وأعمل بشكل رئيسي كبطل. لقد شاركت في مؤتمرات DefCon منذ عام 1996 ، وأنا مغرم بالتصوير على ارتف...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DEFCON 21. يمكن أن يكون مؤتمر DNS خطيرًا على صحتك. الجزء الأول</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/430724/" style=";text-align:right;direction:rtl"> اسمي Rob Stackle ، أنا مستشار أمني من فينيكس ، أريزونا ، وأعمل بشكل رئيسي كبطل.  لقد شاركت في مؤتمرات DefCon منذ عام 1996 ، وأنا مغرم بالتصوير على ارتفاعات عالية ، وكانت عطلة نهاية الأسبوع هذه هي الذكرى الحادية عشرة لحفل زفافنا.  أريد أن أشكر زوجتي المذهلة والمتفهمة ليندا ، التي لم تتوقع أن مشاركتي في DefCon تعني أنني سأضطر كل عام للاحتفال بذكرى زواجنا في فيغاس ، والتي أشعر بالأسف الشديد. <br><br><img src="https://habrastorage.org/webt/gh/iu/mb/ghiumbdk-zkg1rtasuz93unhkz8.jpeg"><br><br>  سوف أتحدث معك حول العديد من الأشياء المتعلقة بالبحث الذي عملت عليه خلال السنوات القليلة الماضية.  إنهم متحدون بموضوع مشترك - إذا كنت لا تراقب حركة مرور DNS الخاصة بك ولا تفهم ما يحدث هناك ، عندما يكون كل شيء في محله ، فمن المحتمل أنك لن تنتبه عندما تبدأ الأشياء السيئة في حدوثه.  لقد "اغتصبت" نظام أسماء النطاقات لعدة سنوات ، وكان هذا دائمًا أحد نواقل هجومي المفضلة.  يمكنك إنفاق ثروة على تعزيز محيط الشبكة ، ولكن إذا تمكنت من التحكم في أحد أجهزتك ، صدقني ، فإن اللعبة قد انتهت. <a name="habracut"></a><br><br>  إن عدم وجود ثغرات أمنية في السوق لاكتشاف التكوينات غير الصحيحة يمنحني دائمًا فرصة "وضع قدمي في الباب".  سنناقش اليوم موضوعات مختلفة سأتحدث فيها عن مغامراتي مع DNS وحيلي حول الأشخاص المرتبطين بـ DNS. <br><br>  هذه الموضوعات مخصصة لسوء فهم سلوك DNS من قبل المستخدمين النهائيين للشبكة ، سأتحدث قليلاً عن الأشخاص الذين لم يسجلوا نطاقاتهم ، وعن اختراق المجال نفسه. <br><br>  في مؤتمري Black Hat و DefCon في 2011 ، تحدث Artyom Daineberg عما أسماه ضربات القرفصاء ، أو "قلب الضربات".  أولئك الذين ليسوا على دراية بهذه الدراسة ، ولكنهم مهتمون بهذه المشكلة في DNS للمجالات الشعبية ، يمكنهم تنزيل مواد عرضه التقديمي باستخدام الروابط المتوفرة في هذه الشريحة. <br><br><img src="https://habrastorage.org/webt/k6/xn/hb/k6xnhbvdnrhqjf77lhaplvwfq0u.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">صفحة المشروع</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">عرض الفيديو</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">الشرائح</a> <br><br>  عندما قرأت إعلان خطابه ، المنشور حتى قبل التقرير عن Black Hat ، أصبحت مهتماً على الفور بكيفية استخدام هذا لأغراضي الخاصة.  دون الخوض في التفاصيل ، سأشرح ما هو ضربات القرفصاء ، لماذا يحدث وماذا يؤثر.  سأعرض لك بعض الأمثلة على خطر التقليب العرضي قليلاً في الذاكرة عندما يتحول 1 إلى 0 والعكس صحيح.  توضح الشرائح التالية كيف يبدو هذا كمثال على سطر في الذاكرة يعرض اسم المجال. <br><br><img src="https://habrastorage.org/webt/2n/po/yp/2npoypk5v5tzpcgbmdsv-usjfne.jpeg"><br><br>  في منتصف هذا الخط ، تتحول الوحدة إلى صفر.  حققت شركة Artyom في الظاهرة التي أجبر فيها خطأ بت واحد في الجزء الصحيح من الذاكرة في الوقت المناسب العميل على طلب اسم مجال شرعي تمامًا ولكنه غير صحيح. <br><br>  كان هناك الكثير من الحديث حول احتمالية وأسباب مثل هذا الخطأ ، لكنني بدأت في دراسة جميع الطرق التي تسمح باستخدام هذا الخطأ لأغراض ضارة.  لذا ، يتيح لك نظام القرفصاء DNS تشويه أسماء النطاقات ، ثم تسجيل هذه المجالات "الخاطئة" وإرسال طلبات المستخدمين إليها. <br><br>  تُظهر الشريحة التالية أنه نتيجة القرفصاء قليلاً لاسم نطاق Google ، عندما "بروتونات" عالية الطاقة في الذاكرة "يضرب" 1 ، مما يعني أن الحرف g ، يحولها إلى 0 ، مما يعني أن الحرف f ، ونتيجة لذلك ، تتم إعادة توجيه المستخدم إلى goofle.com . <br><br><img src="https://habrastorage.org/webt/mg/-i/dr/mg-idr_v9xmgo_s4tknxy-tnia0.jpeg"><br><br>  لذا ، سيعيد متصفحك توجيهك تمامًا إلى موقع آخر وسيسعد بسرد الإجابة لك.  في الوقت نفسه ، لن يتمكن DNS SEC من مساعدتك بأي شكل من الأشكال ، وفي الواقع هناك فرص قليلة جدًا لمنع هذا الخطأ بطريقة غير مرئية تمامًا ، باستثناء استخدام ذاكرة ECC ، التي تتعرف تلقائيًا على أخطاء البت وتصحيحها. <br><br>  ومع ذلك ، فإن هذا النوع من الذاكرة ليس شائعًا جدًا ، وحتى إذا كنت تستخدم ECC ، فلا يزال هناك العديد من الأماكن التي يمكن أن تحدث فيها القرفصاء البتة وحيث لا يتم استخدام ذاكرة ECC أبدًا ، على سبيل المثال ، في بطاقة الشبكة أو في ذاكرة التخزين المؤقت DRAM للقرص الصلب. <br><br>  وصف Deineberg بالتفصيل أسباب المشكلة ، ولكن بشكل عام يمكن القول أن أخطاء الذاكرة تحدث ، وأحيانًا تتلف الذاكرة وأحيانًا يكون لها تأثير على DNS.  في الأساس ، فإن "التقليب" للقليل يرجع إلى الضرر المادي للذاكرة ، والسخونة الزائدة ، والمشاكل الكهربائية ، والتعرض للإشعاع وحتى الإشعاع الكوني. <br><br>  تمت مقاطعة العرض التقديمي بسبب الظهور على مسرح منظمي DefCon ، الذين هنأوا المتحدث وزوجته ليندا ، التي كانت حاضرة في المؤتمر لأول مرة ، في الذكرى السنوية الحادية عشرة للزفاف.  روبرت يشكرهم على التهاني ويواصل العرض. <br>  يعد الإشعاع الكوني عاملاً نادرًا جدًا يؤثر على القرفصاء ، ولكن ارتفاع درجة الحرارة هو سبب شائع جدًا لأخطاء الذاكرة.  لقد لاحظت أن الهواتف الذكية ضعيفة بشكل خاص بسبب ظروف التشغيل القاسية التي تتعرض لها.  ارتفاع درجة حرارة بطارية الهاتف الذكي أمر شائع إلى حد ما.  تحتوي معظم الأجهزة الأخرى على تبريد ، ولكنها حتى تتمكن من خلق ظروف تشغيل صعبة. <br><br><img src="https://habrastorage.org/webt/o6/ji/aa/o6jiaavivezo-k_6racvxt9xdw0.jpeg"><br><br>  منذ وقت ليس ببعيد ، نشرت Google معلومات حول عمل مراكز البيانات الخاصة بها.  أحد الأشياء المثيرة للاهتمام التي علمت بها هي الرسالة القائلة بأنهم ، من أجل توفير الطاقة ، يقومون بتشغيل مراكز البيانات الخاصة بهم في ظروف قد يعتبرها معظمنا غير معقولة.  إذا كانت مراكز البيانات النموذجية تعمل عند درجة حرارة قصوى تبلغ 60-70 درجة فهرنهايت (15-20 درجة مئوية) ، فإن خبراء Google ينصحون الشركات بتشغيل مراكز البيانات عند درجة حرارة لا تقل عن 80 درجة (27 درجة مئوية) ، ومركز بيانات بلجيكي واحد Google تشغيل خوادمها عند درجة حرارة 95 درجة (35 درجة مئوية). <br><br><img src="https://habrastorage.org/webt/du/rg/hn/durghn_gxdk7asow1-e0eqkgsgc.jpeg"><br><br>  التسمية التوضيحية: "سمعت أنها توفر لنا المال". <br><br>  تدعي Intel و Microsoft أن خوادمهما تعمل بشكل جيد في درجات الحرارة المرتفعة ، وتضمن Dell أن خوادمها ستعمل عند 115 درجة فهرنهايت (46 درجة مئوية).  أعتقد أن هذه فكرة سيئة ، لأن درجة الحرارة هي العامل الرئيسي في ضمان تشغيل مستقر للذاكرة ، وتعمل مراكز بيانات Google في درجات حرارة "الحريق". <br><br>  لقد بدأت في دراسة المزايا التي يمكن أن يمنحها ذلك وأي المجالات هي الأكثر تعرضًا للقرفصاء قليلاً ، أي أنني حاولت العثور على الأسماء الأكثر طلبًا لزيادة احتمالية مواجهة مثل هذه الأخطاء.  بدأت في جمع سجلات DNS للشركات الكبيرة للعثور على أسماء النطاقات الأكثر شيوعًا واكتشفت أن الاسم الأكثر طلبًا هو gstatic.com.  هذا أحد المجالات التي تخدمها Google لتوفير معلومات ثابتة مثل CSS والصور وجافا سكريبت وملفات XML. <br><br><img src="https://habrastorage.org/webt/j9/xn/vn/j9xnvn0ht-pgfpoclvyeyf9ru5a.jpeg"><br><br>  لقد كتبت نصًا برمجيًا لتحديد "الاضطرابات" المحتملة للبتات في اسم نطاق gstatic.com هذا ، وحصلت على قائمة بجميع الاختلافات في هذا الاسم بمبلغ 34 قطعة.  تم استخدام خمسة منها لأغراض قانونية ، وكانت الـ 29 المتبقية متوفرة ، لذلك اشتريتها كلها. <br><br><img src="https://habrastorage.org/webt/e-/eo/32/e-eo32vi5w_l_cozwqd0rfmkwt0.jpeg"><br><br>  ضربت الهدف على الفور.  شخص ما كان يبحث عن صور على Google وعاد محتوى الطلب إليهم بطريقة أو بأخرى ، لأن متصفحه طلب مني تقديم إحدى الصور في الطلب.  أرى عنوان IP الخاص بهم ، والاسم المشوه الذي طلبوه ، والمورد الذي حاولوا استرداده باستخدام هذه الصورة ، والصفحة المتعلقة بهذا المحتوى ، والعميل الذي تم استخدامه كمتصفح لإرسال هذا الطلب. <br><br><img src="https://habrastorage.org/webt/eu/gm/oi/eugmoimv5zvkdflbtcz4ryp1o_4.jpeg"><br><br>  في الصفحة ، يمكنك مشاهدة قطعة أثرية مثيرة للاهتمام في شكل طلب للحصول على اسم معين Trisha Jones. <br><br><img src="https://habrastorage.org/webt/fr/sx/ol/frsxolhwqbwawblq6lbbxjrwy3k.jpeg"><br><br>  علاوة على ذلك ، ازداد عدد الطلبات ، وكان هناك المزيد من الأسماء المشوهة ، والمزيد من طلبات الصور والمزيد من الروابط إلى الطلب الأصلي ، ونتيجة لذلك جمعت أكثر من 50000 طلب فريد ، وهذا ، كما اتضح ، شائع. <br><br><img src="https://habrastorage.org/webt/ez/o3/gz/ezo3gzhi_-vnofpq9wspmn450bw.jpeg"><br><br>  تظهر الشريحة طلبًا للحصول على صورة "مصورة" للممثلة سيلينا غوميز ، والتي تسبب الضحك في القاعة. <br><br>  أحيانًا يحدث القرفصاء بالضرب في الوقت المناسب لمطابقة أحد طلباتك ، وإذا لم يحدث ذلك كثيرًا ، فلا داعي للقلق.  ولكن في بعض الأحيان يحدث هذا في نفس اللحظة عندما يكون هناك حفظ على القرص الصلب ، وهو بالفعل أكثر إثارة للاهتمام.  هناك احتمالات بأن يحدث القرفصاء في ظل ظروف التشغيل العادية للذاكرة ، ولكن من المحتمل جدًا أن يحدث ذلك بشكل أساسي في مراكز البيانات التي تصل درجة حرارتها إلى 95 درجة. <br><br>  الآن سجلاتي مليئة بكل الضوضاء ، أحصل على طلبات مشوهة كل يوم بهذه الكمية التي لا أتمكن من عرضها يدويًا. <br><br><img src="https://habrastorage.org/webt/yh/yp/4j/yhyp4j-qevsxstztuxhg71ynn0m.jpeg"><br><br>  لذلك ، أكتب نصوصًا برمجية في محاولة للعثور على نفس أنماط الاستعلام ، وأكبر ما حصلت عليه كان الكثير من الاستفسارات من نفس الصورة عن نفس اسم النطاق المشوه ، وكلها جاءت من الهواتف المحمولة.  تلقيت هذه الطلبات كل بضع ثوانٍ ، حيث حاولت جميع هذه الهواتف استخدام صفحة البحث في موقع Google على الويب وطلبت مني تزويدهم بصورة صغيرة لشعار الصفحة الأصلية. <br><br>  لقد عثرت على خادم ويب واحد من سحابة Google بأكملها التي عرضت المحتوى وشوهت باستمرار اسم النطاق ، مشيرة إلى أحد خادمي ، حيث حدث أن يكون الشعار بهذا الاسم عن طريق الصدفة ، وأخذ العملاء به. <br><br>  <i>تُظهر الشريحة كيف يتم استبدال شعار صفحة بحث Google على شاشة الجهاز المحمول بشعار Occupy ، مما يتسبب في ضحك تقديري في القاعة.</i> <br><br>  لمدة عامين ، وصلت مئات الآلاف من الطلبات لهذا الشعار إلى هذا الخادم باسم DNS مشوه ، بدلاً من الاسم الذي خططت Google لاستخدامه.  ثم توقفوا يومًا ما ، حيث رفضت Google تغيير محتوى مواقع الجوال ، وتم إلغاء هذا الطلب. <br><br>  لذا ، واصلت دراسة أنماط الاستعلام وحاولت معرفة أنماط أخرى.  ظهر أحدهم بانتظام وحدث بطريقة طبيعية من خلال "قلب القليل" في الذاكرة ، وليس نتيجة لخطأ القرفصاء المحفوظ. <br><br><img src="https://habrastorage.org/webt/hl/at/-o/hlat-o_vzwxgvkkkvlmz3c7lnpq.jpeg"><br><br>  تلقيت الطلبات الموضحة في الشريحة التالية بمعدل تكرار واحد لكل ساعة.  لم يبدوا مألوفين ، فقد استخدموا جميعًا عميل Google Feedfetcher ، وكلهم جاءوا من أجهزة على نفس الشبكة ، وكانت جميع الطلبات مرتبطة بملفات XML.  لذلك بحثت قليلاً ووجدت أن Feedfetcher هي الآلية التي تستخدمها Google لالتقاط المحتوى المحدث لـ iGoogle ، وكانت عناوين IP المصدر موجودة في بلجيكا. <br><br><img src="https://habrastorage.org/webt/al/ql/ar/alqlarm0ctfw4yj8hns-hnyj5zc.jpeg"><br><br>  تتعلق هذه الطلبات بخوادم Google الخاصة ، والتي يتم استخدامها لتلقي محتوى محدث للعديد من الأدوات التي تخصص صفحة iGoogle الرئيسية ، وهي بوابة إنترنت شخصية. <br><br>  كل أداة عبارة عن ملف XML يحدد المحتوى ، وطلبت مني Google تقديم هذا المحتوى إلى خوادم العروض التقديمية (تصفيق وضحك الجمهور). <br><br><img src="https://habrastorage.org/webt/wz/lg/im/wzlgim-q0pd6qyjg5fitzgcvjgm.jpeg"><br><br>  لذلك ، اعتقدت أنه إذا أرادت Google عن طريق الخطأ محتوى مني يمكن أن يوفر لمستخدميها ، فستتلقاه.  أخذت ملفات XML التي سألتني عنها Google وقسمتها إلى أجزاء.  كما ترى ، هناك قسمان: عنوان يصف الوحدة ، وكتلة C من البيانات المعبأة في HTML CSS و JavaScript code التي تشكل الأداة. <br><br><img src="https://habrastorage.org/webt/dq/me/oi/dqmeoijhs6fgla_b93rlqtpn34y.jpeg"><br><br>  لذلك قمت بتغيير الارتباط إلى صورة الخلفية ، وقمت بتغيير عنوان gstatic.com إلى grtatic.com ، وتركت الباقي دون تغيير ، ووضع ملفات XML في السطر الذي يحصل عليها Feedfetcher ، وانتظر قليلاً. <br><br><img src="https://habrastorage.org/webt/gh/xd/4b/ghxd4butfk2lis7we9oce-kma6m.jpeg"><br><br>  بعد ذلك تقريبًا ، سألني Feedfetcher عن ملفات XML ، وبعد ذلك بدأت على الفور في تلقي الطلبات من العديد من عناوين IP من Google لصورة الخلفية هذه. <br><br><img src="https://habrastorage.org/webt/9u/7d/lf/9u7dlfnnicox9tr7dwigqoasxge.jpeg"><br><br>  لذلك ، قمت بحذف ملفات XML التي قمت بتعديلها وانتظرت حتى توقف الطلبات ، ولكن لمدة 35 يومًا متتالية ، استمر 61 جهازًا في سؤالي عن هذه الصورة كل يوم.  والأكثر إثارة للاهتمام هو أن كل جهاز من هذه الأجهزة كان عميل فيرجن ميديا ​​في المملكة المتحدة. <br><br><img src="https://habrastorage.org/webt/40/6y/hu/406yhuuqvt3uehxryvrqad34cuy.jpeg"><br><br>  لقد خدم ملف Google XML هذا 61 شخصًا ، وخلال العام الماضي ، طلب مني 500 عنوان IP فريد من Feedfetcher تقديم هذه الوحدات 15000 مرة.  حتى أتمكن من تزويد المستخدمين بشيء أكثر ضررًا من مجرد استبدال صورة الخلفية. <br><br>  إليك بعض الحيل التي يمكنك القيام بها مع Google.  إذا كنت لا تعرف ، فإن Postini هي خدمة البريد الإلكتروني الحديثة لحماية البريد العشوائي وأمان الويب وخدمة أرشفة البريد الإلكتروني من Google. <br><br><img src="https://habrastorage.org/webt/9k/k6/ee/9kk6eeugcyqa86ezoolwhjnb71e.jpeg"><br><br>  تتيح لك هذه الخدمة تغيير DNS الخاص بك للإشارة إلى سجل MX الخاص بك في المجال الخاص بهم وجعل المجال الخاص بك عن طريق تغيير 4 أحرف MX قبل psmtp.com.  الشيء الأكثر إثارة للاهتمام هنا هو أن النطاق قصير جدًا بحيث يمكنك بسهولة تسجيل جميع الإصدارات الممكنة من الاسم باستخدام البتات "المقلوبة".  نقطة أخرى مثيرة للاهتمام هي أن الكثير من الشركات تشير إلى سجلات MX الخاصة بها لنطاق واحد ولم يعتقد أحد أنها فكرة سيئة. <br><br>  لذلك ، قمت بتسجيل ثلاثة فقط من القرفصاء الممكنة لهذا المجال ، وتبين أن توظيف موقع psmtp.com كبير جدًا لدرجة أن الشرائح الأربع التالية تعرض الطلبات التي تلقيتها في شهر واحد فقط. <br><br><img src="https://habrastorage.org/webt/gm/uh/85/gmuh85j-12saxsc-buln1v09ddk.jpeg"><br><br><img src="https://habrastorage.org/webt/fu/lj/dc/fuljdczh5bcckphdfsrostma2lm.jpeg"><br><br>  لذا إذا كنت تستخدم بريد Postini ، فسيأتي طلبك في مرحلة ما إلى الخادم الخاص بي.  لا أعتقد أن أي شخص يمكنه القول أن Google ليست جادة بشأن أمان الإنترنت.  ولكن إذا تساءل أحدهم عن المشاكل التي يمكن أن تؤدي إلى ارتفاع درجة الحرارة التي تسبب أخطاء في الذاكرة ، فسيكون قادرًا على طرح سؤال النظر في إمكانية التعويض عن مثل هذه الأشياء.  لذلك ، لا تجعل أسماء نطاقك قصيرة جدًا ، لأنها تؤثر سلبًا على عملك ، مثل Postini ، خاصة إذا كان نطاقك شائعًا. <br><br>  أوصي بشدة أن يطبق الأشخاص سياسة داخلية لإدارة اسم النطاق تسمح لهم بتصحيح أخطاء تشويه الأسماء وفهم واضح لكيفية تأثير هذه الأشياء عليك.  إذا كان لديك gstatic.com ومركز بيانات يعمل عند درجة حرارة 95 درجة ، فربما تريد التأكد من أن أي خطأ في القرفصاء لن يسمح للعميل بالوصول إلى شبكة خارجية ضارة. <br><br>  بالمناسبة ، من بين جميع المجالات التي قمت بالتحقيق فيها ، كانت الشركة الوحيدة التي سجلت جميع التشوهات المحتملة لاسمي الخاص هي Yahoo. <br><br>  في الجزء التالي من العرض التقديمي ، سوف أعرض سلوك DNS ، الذي لا يفهمه كثير من الناس ، كما اتضح ، تمامًا. <br><br><img src="https://habrastorage.org/webt/5l/id/3u/5lid3udte9qlatu5vhjy7w-qnr0.jpeg"><br><br>  بصراحة ، قامت Microsoft بعمل سيء للغاية في التوثيق ، خاصة وأن سلوك DNS غالبًا ما يتغير.  وهذا يؤدي إلى سوء فهم لما يحدث من قبل المستخدمين النهائيين ، خاصة وأن هذا السلوك غالبًا ما يكون متناقضًا. <br><br>  لذلك ، سأبدأ بحقيقة أنه يجب على الجميع فهم كيفية تصرف الأجهزة عند الاستعلام عن DNS وما يمكن توقعه منها.  ثم سأشرح كيف يصبح هذا السلوك غير متوقع عند استخدام مسارات بحث لاحقة DNS ، وكيف يؤثر التوثيق غير الكافي على كل هذا ، وسأنتهي بنظرة عامة مختصرة عن الدروس التي يمكن تعلمها من كل هذا.  ولكن أولاً ، سأوضح مدى خطورة أن يسيء المستخدم النهائي فهم ما يحدث مع DNS. <br><br>  لذا ، بعد كتابة <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.google.com</a> في شريط عنوان المتصفح ، يرسل جهاز الكمبيوتر الخاص بك طلبًا إلى خادم DNS المحلي ، ويتم الآن تعيين مهمة العثور على الشيء الذي تريده وإعادة الطلب والرد عليه.  يقوم الخادم المحلي باستدعاء الخادم الجذر للوصول إلى خادم .com ، ويقوم الخادم الجذر بإرساله إلى خادم .com.  يتحقق ما إذا كان الخادم المحلي مفوضًا لطلبات google.com ويرسله إلى الخادم ns.google.com.  أخيرًا ، يتلقى الخادم المحلي ردًا بعنوان IP للمورد الذي تحتاجه ويرسله إليك. <br><br><img src="https://habrastorage.org/webt/2o/z-/1s/2oz-1ssggey-ghbnfldymzelauy.jpeg"><br><br>  هذا هو سلوك DNS العادي الذي يتوقعه الجميع منه.  يعتقد الجميع أنه يكفي فقط إرسال طلب من الجهاز إلى خادم DNS المحلي الخاص بك بحيث يقوم بكل العمل الشاق ، ثم الحصول على إجابة لطلبك.  لكن لا يتصور الجميع أن هذه العملية تتكون من العديد من الخطوات المهمة. <br><br>  على سبيل المثال ، يحاول جهازك العثور على الإجابة على <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.google.com</a> ، ولكن العملية برمتها ، التي استغرقت منا ما يصل إلى 8 شرائح ، لن تحدث إلا إذا قمت بكتابة مثل هذا العنوان بالضبط في شريط استعلام المتصفح - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.google .com</a> .  هذا هو اسم المجال المؤهل بالكامل والمرتبط بـ DNS الجذر.  يعتقد الكثير من الناس أن اسم النطاق المؤهل بالكامل ينتهي بنقطة ، وهذا غير صحيح.  لا يزال يُفترض وجود نقطة في نهاية الاسم الكامل ، ولهذا السبب تحدث مشاكل.  لنحاول طباعة 4 أشكال مختلفة للاسم: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.google.com</a> <br>  google.com <br>  www <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.google.com</a> <br><br>  كل منها يتصرف بشكل مختلف فيما يتعلق بسلوك DNS.  كل هذا قابل للتخصيص ، ولكن عادة لا أحد يفعل ذلك. <br><br>  دعونا نلقي نظرة على ما يحدث بالفعل في مثل هذه المواقف.  هناك العديد من العوامل التي تؤثر على اتخاذ قرارات العميل قبل أن يقرروا إرسال استعلام DNS.  اثنان من هذه مسارات البحث لاحقة وتفويض DNS. <br><br><img src="https://habrastorage.org/webt/qp/2_/eo/qp2_eogxid_o03m5butwxk-ahqo.jpeg"><br><br>  يحتوي كلاهما على العديد من المعلمات القابلة للتخصيص التي تؤثر على سلوكهم ، وتتصرف بشكل مختلف في الإصدارات المختلفة من Windows وفي حزم الخدمة المختلفة. <br><br>  هذه هي الطريقة التي سيستخدم بها معظم الناس لاحقة مسار البحث.  إذا كانت شركتك تسمى foo وكنت تملك المجال foo.com ، واسم الدليل النشط هو ad.foo.com ، فيمكنك استخدام لاحقة مسارات البحث ad.foo.com أو foo.com و "دفعها" إلى جزء العميل من تجميع النظام أو في سياسة المجموعة. <br><br>  إذا حاول أحد عملائك حل الاسم المختصر www ، فسيكون السلوك الافتراضي لـ Windows XP على هذا النحو.  أولاً سترسل استعلام DNS على المسار <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.ad.foo.com</a> ، ثم على المسار <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.foo.com</a> وفي النهاية سيتبع استعلام NetBIOS - فقط www. <br><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.phx</a> ,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.phx</a> ,      ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.phx.ad.foo.com</a> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.phx.foo.com</a> .       15 ,      NetBIOS,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.phx</a> . <br><br><img src="https://habrastorage.org/webt/no/_e/1b/no_e1b8sp9sson1bcnn_6niyxrq.jpeg"><br><br>    Windows,   XP sp.3,      DNS — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.phx</a>  NetBIOS — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.phx</a> ,    ,   . <br><br><img src="https://habrastorage.org/webt/6r/0u/zg/6r0uzg3wsvjgu8tawcy_qsxg7ju.jpeg"><br><br>       ,    ,   ,     ,          ,    .  , ,  Microsoft   DNS. <br><br>  XP   ,  Microsoft    XP,     DNS   Windows   DNS    .   ,    www, Windows    ,  ,    ,    DHCP     Active Directory.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.phx.ad.foo.com</a> ,    ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.ad.foo.com</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.foo.com</a> , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.com</a>     . <br><br><img src="https://habrastorage.org/webt/ee/2q/ps/ee2qpsol_n0puvhe-8ay2ocihzq.jpeg"><br><br> 18:30  <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> DEFCON 21. DNS      .</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">الجزء 2</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/9Sgaq6OYLX8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  شكرا لك على البقاء معنا.  هل تحب مقالاتنا؟  تريد أن ترى المزيد من المواد المثيرة للاهتمام؟  ادعمنا عن طريق تقديم طلب أو التوصية به لأصدقائك ، <b>خصم 30٪ لمستخدمي Habr على تناظرية فريدة من خوادم الدخول التي اخترعناها لك:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">الحقيقة الكاملة حول VPS (KVM) E5-2650 v4 (6 Cores) 10GB DDR4 240GB SSD 1 جيجابت في الثانية من 20 $ أو كيفية تقسيم الخادم؟</a>  (تتوفر خيارات مع RAID1 و RAID10 ، ما يصل إلى 24 مركزًا وما يصل إلى 40 جيجابايت من ذاكرة DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 نوى) 10GB DDR4 240GB SSD 1Gbps حتى ديسمبر مجانًا</b> عند الدفع لمدة ستة أشهر ، يمكنك الطلب <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">هنا</a> . <br><br>  <b>ديل R730xd 2 مرات أرخص؟</b>    <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">2  Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100   $249</a>    !</b>  اقرأ عن <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">كيفية بناء البنية التحتية</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">فئة باستخدام خوادم V4 R730xd E5-2650d تكلف 9000 يورو عن بنس واحد؟</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar430724/">https://habr.com/ru/post/ar430724/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar430712/index.html">NeurIPS: كيفية التغلب على أفضل مؤتمر ML</a></li>
<li><a href="../ar430714/index.html">تشتري VMware Heptio - ماذا يعني لـ Kubernetes</a></li>
<li><a href="../ar430718/index.html">ما هي الأشياء التي تستحق استخدام المراقبة بالفيديو السحابية؟</a></li>
<li><a href="../ar430720/index.html">Intel RealSense D435i: تحديث صغير وانحراف تاريخي قصير</a></li>
<li><a href="../ar430722/index.html">أداء PHP: التخطيط والتنميط والتحسين</a></li>
<li><a href="../ar430728/index.html">علمني أن أقدم ملاحظاتك</a></li>
<li><a href="../ar430730/index.html">ماذا تفعل R&D ABBYY: NLP Advanced Research Group</a></li>
<li><a href="../ar430732/index.html">لمسألة القسمة و TI</a></li>
<li><a href="../ar430734/index.html">التحديثات الذكية مقابل العقود الذكية</a></li>
<li><a href="../ar430736/index.html">تطوير متصفحك من الصفر. الجزء الأول: HTML</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>