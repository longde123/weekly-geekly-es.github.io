<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚛 ☑️ 🙌 Einige Merkmale der Fähigkeitsentwicklung für Alice 👷 🚼 🀄️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lebst du in Moskau und fährst dein Auto? Wenn ja, wie bezahlen Sie für das Parken? SMS senden? Mit der Moscow Parking App bezahlen? Verwenden Sie den ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Einige Merkmale der Fähigkeitsentwicklung für Alice</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471388/"><img src="https://habrastorage.org/webt/lh/sw/na/lhswnatvipaiuqcpqxd0_a-jm1y.png"><br><br>  Lebst du in Moskau und fährst dein Auto?  Wenn ja, wie bezahlen Sie für das Parken?  SMS senden?  Mit der Moscow Parking App bezahlen?  Verwenden Sie den Bot in Telegramm?  "Das ist alles unangenehm", entschied ich und schuf meine Fähigkeit für Alice, das Parken per Stimme zu bezahlen.  Außerdem ist Alice bereits in Yandex.Navigator integriert.  Jetzt können Sie dem Navigator einfach etwas sagen wie "Alice, bitten Sie <i>Moscow Parking, das</i> <i>Parken 3209 für 30 Minuten</i> <i>zu</i> <i>bezahlen</i> ." <br><br>  Was habe ich bei der Entwicklung einer Fertigkeit erlebt? <br><a name="habracut"></a><br><h2>  Die Sitzung </h2><br>  Um die Fertigkeit von einem Drittanbieter zu starten, muss Alice sagen: "Alice, starte die Fertigkeit so und so."  Dies ist gut und praktisch, wenn Sie eine lange Kommunikation mit der Fertigkeit haben - zum Beispiel beginnt das Spiel.  Wenn Sie eine Phrase sagen müssen, eine Antwort erhalten und das ist alles, dann ist das Eingeben einer Fertigkeit unpraktisch. Wenn Sie mit dieser Eingabe fertig sind, müssen Sie sie mit dieser Eingabe beenden. <br><br>  Für einen Satz gibt es eine Lösung von Alices Entwicklern - Sie müssen sagen: „Alice bittet um die Fähigkeit, <i>dies und</i> das zu <i>tun</i> .  Das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Python-Beispiel</a> von Alices Entwicklern unterstützt einen solchen Skill-Start jedoch nicht: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> req[<span class="hljs-string"><span class="hljs-string">'session'</span></span>][<span class="hljs-string"><span class="hljs-string">'new'</span></span>]: <span class="hljs-comment"><span class="hljs-comment"># -  return</span></span></code> </pre> <br>  Jedes Mal, wenn eine Fertigkeit gestartet wird, inkl.  und mit dem Befehl "Alice frage nach einer <i>Fähigkeit</i> ..." ist der Wert von <i>session.new</i> <i>True</i> .  Daher wird nicht der gesamte weitere Verarbeitungscode ausgeführt.  Die Lösung besteht darin, den Text von <i>session.command</i> zu überprüfen - er sollte leer sein. <br><br>  Übrigens, wenn Sie eine Fertigkeit „eingegeben“ haben, unterstützt Alice standardmäßig für alle Fertigkeiten Ausstiegssätze - „Alice, hör auf“ und „Alice, komm zurück“.  Wenn Sie die Sitzung mit der Fähigkeit zwangsweise beenden möchten, müssen Sie <i>end_session</i> in der Antwort gleich <i>True übergeben</i> .  Dies funktioniert jedoch nur mit Yandex.Station - auf anderen Geräten funktioniert das Beenden der Fertigkeit in diesem Fall nicht. <br><br><h2>  Arbeite mit Zahlen </h2><br>  Meine Fähigkeit besteht darin, mit Nummern zu arbeiten - zuerst die Telefonnummer des Benutzers und dann die Parknummer zu erkennen. <br><br>  Im obigen Beispiel von Yandex verwendet <br><br><pre> <code class="python hljs">req[<span class="hljs-string"><span class="hljs-string">'request'</span></span>][<span class="hljs-string"><span class="hljs-string">'original_utterance'</span></span>].lower()</code> </pre> <br>  mit einer Benutzeranfrage arbeiten.  Zuerst habe ich dieses Feld aus der Anfrage verwendet.  Um die Telefonnummer des Benutzers zu erkennen, musste ich den Benutzer bitten, jede Ziffer der Nummer separat zu benennen - zum Beispiel „neun eins sechs eins zwei drei vier fünf sechs sieben“.  Und im Code - ersetzen Sie Textwerte ("neun") durch numerische (9).  Mit dem Parkcode wurde es noch lustiger - ich nenne den Code "3209" "zweiunddreißig null neun", der Code hatte eine Reihe von Typersatz <br><br><pre> <code class="python hljs">s.replace(<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'32'</span></span>).replace(<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'31'</span></span>).replace(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'0'</span></span>)</code> </pre> <br>  Da ich basierend auf dem Anforderungstext im Skill-Code versucht habe zu verstehen, was der Benutzer will (die Zustandsmaschine wird in der Skill nicht verwendet), musste ich diese Konvertierung bei fast jeder (!) Benutzeranforderung durchführen. <br><br>  Es stellte sich heraus, dass Alices Server bereits alles für Sie tun (und noch mehr).  Anstelle von <i>request.original_utterance müssen</i> Sie <i>request.command verwenden</i> .  Ja, dies ist in der Dokumentation angegeben.  Im Tooltip im Antwortbeispiel. <br><blockquote>  Servicefeld: Benutzeranforderung für die interne Verarbeitung von Alice konvertiert.  Während der Konvertierung wird insbesondere der Text von Satzzeichen befreit und die Ziffern in Zahlen konvertiert. </blockquote>  Es ist seltsam, dass im Beispiel von Alices Entwicklern (Link oben) der Originaltext verwendet wird ( <i>request.original_utterance</i> ).  Tatsächlich wird in <i>request.command</i> (was in der Dokumentation nicht beschrieben ist) noch mehr getan.  Zum Beispiel wird eine Telefonnummer in das Format <i>(916) 123-45-67 konvertiert</i> - jetzt kann der Benutzer in meiner Fähigkeit das Telefon in jedem für ihn geeigneten Format anrufen.  Auch die Sätze "Alice, frag nach so und so Geschicklichkeit", "Alice" -Nachrichten werden herausgeschnitten, Tippfehler werden korrigiert. <br><br>  Auf Alices Seite können einzelne Teile von Abfragen (Nummern, Namen, Adressen, Daten) in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">benannte Entitäten</a> konvertiert werden.  Aber es funktioniert komisch.  Anforderung <i>79161234567 1234</i> in benannten Entitäten, die in zwei Nummern konvertiert wurden - <i>791612345 <b>70</b></i> und <i>1234</i> .  Warum sich die erste Zahl als anders herausstellt, konnte man nicht herausfinden - diese.  Die Unterstützung von Yandex.Dialog denkt immer noch über die Antwort nach. <br><br><h2>  Reaktionszeit der Fertigkeiten </h2><br>  Alice wartet innerhalb von 3 Sekunden auf eine Antwort des Skills (Google hat dieses Limit - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">5/10 Sekunden</a> ).  Meine Fähigkeit besteht darin, auf Server von Drittanbietern zuzugreifen, um das Parken zu starten und zu beenden.  Sie antworten langsam.  Manchmal hat meine Fähigkeit in 3 Sekunden keine Zeit, eine Antwort zu geben.  Individuell war es nicht möglich, die Zeit für die Reaktion der Fertigkeit zu verlängern.  In einigen Fällen war es daher erforderlich, auf Bequemlichkeit zu verzichten. Beispielsweise fordert die Fertigkeit zu Beginn des Parkens nicht das im Profil der Moskauer Parkanwendung angegebene tatsächliche Fahrzeug an, sondern verwendet dasjenige, das sie während der Benutzerautorisierung beibehalten hat. <br><br>  Nun, zu den Rechten von "Ich bin PR";) - </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de471388/">https://habr.com/ru/post/de471388/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de471372/index.html">Warum sollten Unternehmen Mitarbeiter-Smartphones verwalten?</a></li>
<li><a href="../de471374/index.html">Wir laden Sie zu NIXMultiConf # 3 in Kharkov ein</a></li>
<li><a href="../de471378/index.html">Wo beginnt die Programmierung?</a></li>
<li><a href="../de471380/index.html">Pentester an der Spitze der Cybersicherheit</a></li>
<li><a href="../de471384/index.html">Liga des freien Internets</a></li>
<li><a href="../de471394/index.html">Habr Weekly # 22 / Wie man in einem Team kommuniziert, neue Steuern für Megakonzerne, TON an den Fingern, Amazon kopiert Produkte</a></li>
<li><a href="../de471396/index.html">Wie CSS Grid die Inhaltsstrukturierung ändert</a></li>
<li><a href="../de471402/index.html">Iptables und Filterung des Verkehrs von den armen und faulen Andersdenkenden</a></li>
<li><a href="../de471404/index.html">Kann man mehr verdienen, wenn man als Ingenieur in einem anderen Land arbeitet?</a></li>
<li><a href="../de471408/index.html">Eine Alternative zu Summenphasenwechselrichtern: Übertragungsleitungen (TQWT, ALT)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>