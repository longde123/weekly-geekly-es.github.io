<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍✈️ ㊙️ 🙎🏽 Qu'est-ce qui est commun entre peler les œufs et DevOps? 🧖 🤛 ♑️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Voici une traduction de l'article de Patrick Lee Scott publié sur hackernoon.com. L'auteur propose de se familiariser avec plusieurs principes importa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Qu'est-ce qui est commun entre peler les œufs et DevOps?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/plarium/blog/457120/">  Voici une traduction de l'article de Patrick Lee Scott publié sur hackernoon.com.  L'auteur propose de se familiariser avec plusieurs principes importants qui vous aideront à pomper dans DevOps. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/332/c5f/d4f/332c5fd4f164388cbf68b68611547b28.jpg" alt="image"><br><br>  Il y a quelques jours, j'ai essayé de peler un œuf d'une manière stupide, et ma petite amie Angeli m'a demandé pourquoi je faisais ça. <br><br>  Elle prit un autre œuf dur et le frappa sur une planche à découper, puis le pressa et le roula sur la table.  Il n'a fallu que 3 secondes pour nettoyer.  Et je me suis levé et j'ai enlevé la coquille pièce par pièce. <br><br>  Ce que je veux dire par ceci: <b>nous exagérons l'importance des efforts.</b> <br><a name="habracut"></a><br>  Les meilleures solutions sont simples et efficaces.  Est-il difficile de nettoyer un boulon rouillé?  Probablement oui.  Mais seulement si vous ne savez pas que cela peut être fait avec Coca-Cola.  Toujours compliqué?  Non.  Il suffit de mettre le boulon dans le verre et d'attendre. <br><br>  Sans connaître des techniques simples, vous ne pouvez pas les appliquer.  Au lieu de mettre en œuvre, vous menez des expériences; au lieu de répliquer, vous faites des recherches. <br><br>  Si, en programmation, vous utilisez encore et encore une sorte d'approche, car elle vous permet de simplifier le problème à résoudre, cette approche devient un modèle ou la soi-disant meilleure pratique. <br><br>  Malgré des noms complexes et intimidants tels que Command Query Responsibility Segregation (CQRS) ou Event Sourcing (ES), ces pratiques aident à résoudre les problèmes.  Surtout ceux qui surviennent lors de la construction de systèmes distribués. <br><br>  Si vous regardez le développement dans son ensemble, nous verrons qu'il existe des principes plus universels, par exemple, «Keep it Simple, Stupid» (KISS) et «Don't Repeat Yourself» (DRY).  Je voudrais parler de modèles et de principes similaires en relation avec DevOps. <br><br>  DevOps est souvent présenté comme la terre promise, sur laquelle les oiseaux chantent et le soleil brille.  Mais sans utiliser les bonnes méthodes, DevOps se transformera en enfer, et vous percerez tous vos doigts avec une coquille (comme moi). <br><br>  En créant des systèmes DevOps, j'ai trouvé plusieurs solutions pour moi en plus des principes universels comme KISS et DRY.  Bien qu'ils ne puissent pas être appelés modèles, ils vous aideront à nettoyer rapidement l'œuf.  Ces solutions (dans un ordre aléatoire): <br><br><ul><li>  Ne faites pas ce que les autres ont fait avant vous. </li><li>  Laissez les développeurs être aussi productifs que possible. </li><li>  La production est un mythe. </li><li>  Transférez tout sur le cluster et sauvegardez le tout. </li><li>  Le VPN est trop compliqué, les solutions sont plus faciles. </li><li>  Organisez, automatisez et conquérez! </li></ul><br><h3>  Leçon 1. Ne faites pas ce que les autres ont fait avant vous </h3><br>  Si vous avez la possibilité d'acheter un produit fini ou si vous disposez de l'outil nécessaire et pratique dans le domaine public, utilisez-le. <br><br>  Ne réinventez pas la roue - achetez-la. <br><br>  Saviez-vous que vous pouvez utiliser le même serveur de messagerie que Craigslist utilise?  Et c'est gratuit?  Besoin d'un serveur de messagerie - n'en créez pas un nouveau, travaillez avec un serveur existant. <br><br>  J'aime chercher des outils dans des listes géniales auto-hébergées ou utiliser le Helm Hub pour cela. <br><br>  <i>Malgré le fait que Helm soit un outil assez nouveau pour trouver des logiciels, ce site a déjà été créé: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://v3.helm.sh/</a></i> <br><br>  Avec Helm, vous pouvez facilement rechercher vos vélos finis. <br><br>  Revenons dans le temps quand je commençais à peine à programmer.  En 9e année, j'ai appris ma première «vraie» langue - QBasic.  Avant cela, je crée des sites HTML et CSS depuis quelques années.  Ensuite, Internet était nouveau, et bien que les gens savaient comment créer des packages, ils ne les partageaient pas, comme nous le sommes maintenant.  Habituellement, j'utilisais des disquettes pour le stockage - ce serait génial de les trouver avec un jeu comme arkanoid, que j'ai écrit dans Java Swing en 11e année ... <br><br>  Tout ce que j'utilisais alors, c'était des bibliothèques standard, bébé!  Au moins à 13 ans, je ne les connaissais que.  Même si je suis sûr que certains java pros (bonjour, Vlad et Nick!) Étaient déjà cool à l'époque.  ;) <br><br>  Maintenant, tout va mal.  Aujourd'hui, vous pouvez trouver des bibliothèques d'interface utilisateur entières.  Vous pouvez trouver une bibliothèque pour traiter les dates avec élégance et facilité avec une seule commande. <br><br>  Ce serait formidable s'il y avait un outil pour utiliser et installer des sous-systèmes pleinement fonctionnels, non?  Besoin d'une base de données?  <i>installer la base de données</i> <br><br>  Bonne nouvelle: un tel outil existe!  Avec Helm, vous pouvez également installer des sous-systèmes pleinement fonctionnels, conditionnés et prêts à l'emploi. <br><br>  Le principe est le même que pour NPM et Gradle, mais les packages que nous gérons dans Helm sont appelés graphiques.  Les graphiques balisent les conteneurs afin qu'ils s'exécutent sur Kubernetes de différentes manières. <br><br>  Il s'avère une solution clé en main, l'achat d'un vélo.  Les graphiques sont la roue, et les conteneurs avec des descriptions qui s'exécutent à l'intérieur de Kubernetes sont des roues. <br><br>  Ce qui est cool avec les graphiques, c'est la possibilité de regrouper des services et de les exécuter dans n'importe quel cluster Kubernetes et même de les partager avec d'autres personnes si vous le souhaitez. <br><br>  Cela signifie que vous pouvez décrire l'environnement entier à l'aide de code: <br><br><pre><code class="javascript hljs">- name: backup repository: http:<span class="hljs-comment"><span class="hljs-comment">//jenkins-x-chartmuseum:8080 version: 0.0.2 - name: monitor repository: http://jenkins-x-chartmuseum:8080 version: 0.0.3 - name: marketing-site repository: http://jenkins-x-chartmuseum:8080 version: 1.1.10 - name: denormalizer-service repository: http://jenkins-x-chartmuseum:8080 version: 1.0.0 - name: mongo repository: https://kubernetes-charts.storage.googleapis.com/ version: 1.0.0</span></span></code> </pre> <br>  Besoin de mettre à niveau votre site marketing vers 1.2.0?  Apportez des modifications et engagez-vous. <br><br><h3>  Leçon 2. Laissez les développeurs être aussi productifs que possible. </h3><br>  Une fois, je me suis assis à la table, j'ai regardé mon code et j'ai essayé de suivre le bug.  Les utilisateurs se plaignent de lui depuis plusieurs semaines maintenant, et finalement j'ai eu un peu de temps libre pour traîner. <br><br>  Tada-a-am!  Je l'ai trouvé!  Fixé! <br><br>  Je me suis assis derrière une cloison sur mon lieu de travail dans une pièce ensoleillée et j'ai crié aux autres: "J'ai corrigé le bug!" <br><br>  Mardi prochain, lorsque les utilisateurs verront la sortie, ils apprécieront certainement mes efforts!  Mais pour cela, nous devrons emballer et essayer de déplacer la version de l'endroit ... Peut-être que nous réussirons si rien ne se passe ... <br><br>  Eh bien, <i>si la</i> sortie arrive toujours mardi prochain, les utilisateurs l'apprécieront certainement! <br><br>  C'est ainsi que je faisais le déploiement lors de mon premier emploi universitaire, en tant que programmeur junior. <br><br>  Depuis lors, beaucoup de choses ont changé. <br><br>  Maintenant, j'utilise le développement basé sur les troncs et déploie des modules plusieurs fois par jour.  Lorsque j'envoie une demande Pull, le bot publiera un commentaire correspondant avec le code de révision avec l'environnement collecté après que les tests ont réussi et que les builds ont été collectés. <br><br>  Aujourd'hui, vous n'avez plus à crier à travers la cloison du bureau. <br><br>  Plus vous accordez de liberté aux programmeurs - la liberté de contrôler les parties de l'infrastructure dont ils ont besoin - plus il vous est facile de travailler en tant qu'ingénieur DevOps. <br><br>  Dans la première leçon, nous avons vu que pour la mise à jour en production, il suffit de changer un chiffre et de valider.  Dans un monde idéal dans lequel nous regroupons les applications dans des graphiques, chaque programmeur d'une équipe a la possibilité d'influencer le fonctionnement de l'outil au stade de la production.  Kubernetes comprend les graphiques comme des descriptions de conteneurs, c'est pourquoi ils décrivent les besoins en ressources. <br><br>  La logique est quelque chose comme ceci: je ne peux pas deviner combien de mémoire ou quels paramètres CPU seront nécessaires pour un nouveau service (et je pense que je ne suis pas le seul).  Par conséquent, je déploie également une surveillance et des alertes avec des règles selon lesquelles mon équipe et moi serons informés dans Slack que ces paramètres doivent être modifiés.  Autrement dit, le système vous informera des paramètres nécessaires lorsque nous le déploierons.  J'avais l'habitude de m'asseoir pendant des heures, envoyant des demandes via Prometheus et ajustant les paramètres, tout comme j'avais l'habitude de choisir la coque.  Et maintenant, j'ai appris à tout faire avec sagesse. <br><br>  Je vous entends déjà dire: "Cela semble trop compliqué!"  Non.  Définissez simplement le graphique. <br><br>  Si vous pouvez automatiser ou simplifier quelque chose, allez-y.  Par exemple, que se passerait-il si vous pouviez attribuer un chemin DNS en déployant simplement le service avec le libellé "expose: true"?  C'est là que les opérateurs apparaissent.  Il s'agit d'un outil Kubernetes plus avancé, et vous devriez le connaître.  Mais n'allons pas trop loin dans les détails. <br><br><h3>  Leçon 3. La production est un mythe </h3><br>  Ce fut une véritable révélation pour moi.  J'ai dû regarder les choses sous un angle différent, alors écoutez attentivement. <br><br>  Pendant plus de dix ans, j'ai pensé que dans le monde il n'y a que quelques types d'environnements.  Dans le scénario le plus simple, il y a la mise en scène et la production de l'environnement.  D'abord déployé en mise en scène, puis testé, passé à l'étape suivante, déployé, testé, etc.  Dès que tout est collé - le fils est intégré - vous pouvez passer en production. <br><br>  J'ai suivi ce modèle année après année et je n'en ai jamais douté.  Il en a toujours été ainsi. <br><br>  Et ce schéma est un autre moyen improductif de se débarrasser de la coque. <br><br>  En substance, un graphique est un graphique de dépendance.  Il peut être utilisé pour représenter l'environnement, puis le processus de déploiement en production se résume au déploiement d'un seul graphique. <br><br>  Si chaque équipe, projet ou groupe connecté par un contexte commun a son propre graphique, plusieurs environnements apparaissent qui vous permettent de regrouper et de mettre à jour tous les services en une seule transaction. <br><br>  Ne prenez pas la production comme un énorme environnement global, en fait c'est beaucoup de petite production. <br><br>  Des changements majeurs sont effrayants dans son ampleur.  Et si vous disposez de plusieurs petits environnements de développement, vous pouvez isoler les modifications et rendre le système plus flexible. <br><br>  De plus, si tout est organisé sous forme de graphiques, les variables seront définies et pourront être modifiées de l'extérieur, de la même manière.  Par exemple, pour connecter un cluster kafka moins puissant à la préproduction, là où il n'est pas requis, il vous suffit de modifier la configuration. <br><br><h3>  Leçon 4. Transférez tout sur le cluster et sauvegardez l'ensemble </h3><br>  Nous avons donc trié la production.  Que faire des bases de données?  Avec Kafka?  Avec des problèmes de sécurité? <br><br>  Si vous lisez attentivement, souvenez-vous: j'ai écrit que les bases de données peuvent être incluses dans le package graphique. <br><br>  Kubernetes dispose d'une API distincte pour exécuter des bases de données et d'autres applications avec état sous une forme pratique - <b><i>StatefulSets.</i></b> <br><br>  L'essence même de Kubernetes est d'améliorer la fiabilité du lancement de conteneurs.  Avec lui et en utilisant l'outil Velero (installé via Helm Chart), vous pouvez créer une sauvegarde de l'ensemble du cluster Kubernetes, ainsi que les disques qui y sont attachés, par exemple, ceux qui ont été créés par StatefulSet, et tout restaurer avec une seule commande.  De plus, il est facile de configurer une sauvegarde automatique selon un calendrier. <br><br>  Les sauvegardes, la restauration en une seule équipe et le gestionnaire Kubernetes vous aideront à déployer un cluster entièrement nouveau et à restaurer sa sauvegarde avec seulement deux équipes.  Un maximum de trois, si vous souhaitez d'abord créer une nouvelle sauvegarde. <br><br>  Au lieu de penser aux serveurs, vous pouvez opérer sur des clusters entiers. <br><br>  La pré-production est-elle ennuyeuse?  Mettez-le hors de vue - à distance de la sauvegarde, de la récupération et du changement de DNS. <br><br><h3>  Leçon 5. Le VPN est trop compliqué, il existe des solutions plus faciles </h3><br>  <i>Avez-vous déjà utilisé un VPN avec plaisir?</i> <br><br>  Non, vraiment.  <i>Est-ce même possible?</i> <br><br>  Google a eu une telle tentative.  Mais il y a quelques années, la société a annoncé qu'elle n'utiliserait pas de VPN.  Je pense qu'ils n'ont pas apprécié non plus. <br><br>  Google est passé à des réseaux sans confiance.  Ils n'ont pas de clé principale adaptée à n'importe quel réseau, mais à l'entrée de chaque service, il y a une clé sous la forme d'un écran de connexion SSO.  Vous souhaitez vous connecter au service de surveillance?  Connectez-vous en utilisant le nom d'utilisateur et le mot de passe de votre entreprise. <br><br>  Seul un petit changement est nécessaire: au lieu d'utiliser un VPN pour l'autorisation, utilisez un proxy. <br><br>  Le VPN héberge également le lien de gestion Kubernetes sur le réseau privé, contrairement à SSO.  Mais ils ont leur propre mécanisme d'autorisation.  Dans le cas de Google Cloud et AWS, il s'agit de la gestion des identités et des accès (IAM) et de la possibilité de mettre des adresses IP en liste blanche. <br><br>  S'il est possible de travailler avec une architecture moins volumineuse sans trop de pertes, pourquoi pas?  Soyez comme Google: passez d'un VPN à des systèmes «sans confiance». <br><br><h3>  Leçon 6. Organiser, automatiser et conquérir </h3><br>  Ah, il vous semble que systématiser c'est long?  Un non-sens!  À l'avenir, cela vous fera gagner des heures, des jours et même des semaines.  Pour travailler! <br><br>  La systématisation est le seul moyen réaliste de recréer l'infrastructure plus d'une fois. <br><br>  Si chaque élément de réglage peut être amélioré en modifiant et en validant quelque chose dans git, votre organisation technologique entière est essentiellement déclarative.  Tout développeur ayant accès à git peut facilement maintenir n'importe quel système en état de marche. <br><br>  Pour ce faire, utilisez plusieurs petits référentiels.  Les monorepos incitent les gens à couper les coins et dépendent des structures d'importance artificielle.  Au lieu de cela, il est préférable d'utiliser de nombreux petits référentiels que vous pourrez lier ultérieurement. <br><br>  Mon ami Matt et moi créons un outil appelé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i>meta</i></a> pour aider à le faire au stade du développement.  Helm le fait au stade de la production: pour lui, tout est un tableau de dépendance! <br><br><h3>  Conclusion </h3><br>  Ne cueillez pas la coquille de l'oeuf morceau par morceau.  Battre et rouler. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr457120/">https://habr.com/ru/post/fr457120/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr457110/index.html">Tests unitaires de modèles d'injection C ++ et simulés à l'aide de traits</a></li>
<li><a href="../fr457112/index.html">Les résultats de HolyJS 2019 Piter</a></li>
<li><a href="../fr457114/index.html">Choisissez un système de vidéosurveillance: cloud vs local avec Internet</a></li>
<li><a href="../fr457116/index.html">Fonctionnalités AvaloniaUI utilisant la MessageBox personnalisée</a></li>
<li><a href="../fr457118/index.html">Habr Weekly # 6 / Runet est prêt à se démarquer, Adobe recherche des traces de Photoshop, de la vulnérabilité de Vim, du géo-chat dans le panier et d'autre chose</a></li>
<li><a href="../fr457128/index.html">Situation: les entreprises AdTech violent-elles le RGPD?</a></li>
<li><a href="../fr457132/index.html">La substitution des importations dans la pratique. Partie 3.1. "QP OS". Le premier examen en son genre du système d'exploitation</a></li>
<li><a href="../fr457134/index.html">Le cerveau accélère la perception, devinant ce qui va se passer ensuite</a></li>
<li><a href="../fr457136/index.html">Facteurs clés d'une réussite d'équipe réussie</a></li>
<li><a href="../fr457138/index.html">Vendredi Post: Questions que les filles aiment</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>