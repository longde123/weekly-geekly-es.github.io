<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ•– ğŸ³ ğŸ¯ ç¼–å†™ç®€æ´çš„Reactä»£ç çš„14æ¡æŠ€å·§ã€‚ ç¬¬äºŒéƒ¨åˆ† ğŸ¤ŸğŸ» ğŸ¤ğŸ¼ ğŸ”¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä»Šå¤©ï¼Œæˆ‘ä»¬å°†å‘å¸ƒæœ‰å…³å¼€å‘Reactåº”ç”¨ç¨‹åºæ—¶ç¼–å†™å¹²å‡€ä»£ç çš„ææ–™çš„ç¬¬äºŒéƒ¨åˆ†ã€‚ è¿™é‡Œæœ‰ä¸€äº›æœ‰ç”¨çš„æç¤ºã€‚ 

  

 â†’ é˜…è¯»ç¬¬ä¸€éƒ¨åˆ† 

 8.å°†é‡å¤çš„å…ƒç´ è½¬æ¢ä¸ºç»„ä»¶ 
 å°†é‡å¤å…ƒç´ è½¬æ¢ä¸ºé€‚åˆé‡ç”¨çš„ç»„ä»¶å¯ä»¥ç§°ä¸ºæ­¤ç±»å…ƒç´ çš„â€œç»„ä»¶åŒ–â€ã€‚ 

 æ¯ä¸ªå¼€å‘äººå‘˜éƒ½æœ‰è‡ªå·±ç¼–å†™é‡å¤çš„Reactä»£ç çš„åŸå› ã€‚ è¿™å¯èƒ½æ˜¯...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ç¼–å†™ç®€æ´çš„Reactä»£ç çš„14æ¡æŠ€å·§ã€‚ ç¬¬äºŒéƒ¨åˆ†</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/465813/"> ä»Šå¤©ï¼Œæˆ‘ä»¬å°†å‘å¸ƒæœ‰å…³å¼€å‘Reactåº”ç”¨ç¨‹åºæ—¶ç¼–å†™å¹²å‡€ä»£ç çš„ææ–™çš„ç¬¬äºŒéƒ¨åˆ†ã€‚ è¿™é‡Œæœ‰ä¸€äº›æœ‰ç”¨çš„æç¤ºã€‚ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/kv/ph/qm/kvphqmduaissisnpu1klqlw7k1m.jpeg"></a> <br><br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é˜…è¯»ç¬¬ä¸€éƒ¨åˆ†</a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">8.å°†é‡å¤çš„å…ƒç´ è½¬æ¢ä¸ºç»„ä»¶</font> </h2><br> å°†é‡å¤å…ƒç´ è½¬æ¢ä¸ºé€‚åˆé‡ç”¨çš„ç»„ä»¶å¯ä»¥ç§°ä¸ºæ­¤ç±»å…ƒç´ çš„â€œç»„ä»¶åŒ–â€ã€‚ <br><br> æ¯ä¸ªå¼€å‘äººå‘˜éƒ½æœ‰è‡ªå·±ç¼–å†™é‡å¤çš„Reactä»£ç çš„åŸå› ã€‚ è¿™å¯èƒ½æ˜¯è“„æ„é‡‡å–çš„æªæ–½ï¼Œä¹Ÿå¯èƒ½æ˜¯æ„å¤–äº‹æ•…ã€‚ <br><br> æ— è®ºåº”ç”¨ç¨‹åºä¸­å‡ºç°ç›¸åŒä»£ç ç‰‡æ®µçš„åŸå› æ˜¯ä»€ä¹ˆï¼Œç¨‹åºå‘˜éƒ½åº”è¯¥è€ƒè™‘å¦‚ä½•æ”¹å–„è¿™ç§æƒ…å†µã€‚ <br><br> ä¾‹å¦‚ï¼Œå¦‚æœæŸäººæ²¡æœ‰æ‘†è„±é‡å¤çš„ä¹ æƒ¯ï¼Œé‚£ä¹ˆå®ƒä»¬å¾ˆå¯èƒ½ä¼šä¸€æ¬¡åˆä¸€æ¬¡åœ°å‡ºç°åœ¨ä»–çš„é¡¹ç›®ä¸­ã€‚ è¿™ä¸ªäººæ˜¯ä»€ä¹ˆæ ·çš„å›¢é˜Ÿæˆå‘˜ï¼Ÿ å®ƒåªä¼šä½¿åŒäº‹çš„æœªæ¥ç”Ÿæ´»å˜å¾—å¤æ‚ï¼Œå½“ä»–ä»¬é‡åˆ°é‡å¤çš„ä»£ç æ—¶ï¼Œä»–ä»¬ä¼šæ„Ÿåˆ°å›°æƒ‘ã€‚ å¦‚æœå¿…é¡»ç¼–è¾‘ç±»ä¼¼çš„ä»£ç ç‰‡æ®µï¼Œä»–ä»¬å°†è·å¾—ç‰¹æ®Šçš„â€œç¤¼ç‰©â€ã€‚ <br><br> çœ‹ä¸‹é¢çš„ç¤ºä¾‹ï¼Œç„¶åè€ƒè™‘å¦‚ä½•æ”¹è¿›å®ƒï¼š <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SomeComponent = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> (   &lt;Body noBottom&gt;     &lt;Header center&gt;Title&lt;/Header&gt;     &lt;Divider /&gt;     &lt;Background grey&gt;       &lt;Section height={500}&gt;         &lt;Grid spacing={16} container&gt;           &lt;Grid xs={12} sm={6} item&gt;             &lt;div className={classes.groupsHeader}&gt;               &lt;Header center&gt;Groups&lt;/Header&gt;             &lt;/div&gt;           &lt;/Grid&gt;           &lt;Grid xs={12} sm={6} item&gt;             &lt;div&gt;               &lt;img src={photos.groups} alt="" className={classes.img} /&gt;             &lt;/div&gt;           &lt;/Grid&gt;         &lt;/Grid&gt;       &lt;/Section&gt;     &lt;/Background&gt;     &lt;div&gt;       &lt;Section height={500}&gt;         &lt;Grid spacing={16} container&gt;           &lt;Grid xs={12} sm={6} item&gt;             &lt;div className={classes.labsHeader}&gt;               &lt;Header center&gt;Labs&lt;/Header&gt;             &lt;/div&gt;           &lt;/Grid&gt;           &lt;Grid xs={12} sm={6} item&gt;             &lt;div&gt;               &lt;img src={photos.labs} alt="" className={classes.img} /&gt;             &lt;/div&gt;           &lt;/Grid&gt;         &lt;/Grid&gt;       &lt;/Section&gt;     &lt;/div&gt;   &lt;/Body&gt; )</code> </pre> <br> å¦‚æœç°åœ¨éœ€è¦å°†ç½‘æ ¼å‚æ•°ä»<code>xs={12} sm={6}</code>æ›´æ”¹ä¸º<code>xs={12} sm={4}</code> ï¼Œé‚£ä¹ˆæ­¤ä»»åŠ¡å°†ä¸ä¼šç‰¹åˆ«ä»¤äººæ»¡æ„ã€‚ äº‹å®æ˜¯ï¼Œä¸ºæ­¤æ‚¨å¿…é¡»åœ¨å››ä¸ªä½ç½®ç¼–è¾‘ä»£ç ã€‚ <br><br> ç»„ä»¶æ–¹æ³•çš„ä¼˜ç‚¹åœ¨äºï¼Œå®ƒå…è®¸æ‚¨è§£å†³ä¸ä¸Šè¿°ç±»ä¼¼çš„é—®é¢˜ï¼Œåªåœ¨ä¸€ä¸ªä½ç½®æ›´æ”¹ä»£ç ã€‚ åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œè¿™ç§å˜åŒ–å°†åœ¨ä½¿ç”¨ç½‘æ ¼çš„æ‰€æœ‰åœ°æ–¹å¾—åˆ°ä½“ç°ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SomeComponent = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ classes, xs = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">12</span></span></span></span><span class="hljs-function"><span class="hljs-params">, sm = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">6</span></span></span></span><span class="hljs-function"><span class="hljs-params">, md, lg }</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> BodySection = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ header, src }</span></span></span><span class="hljs-function">) =&gt;</span></span> {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> gridSizes = { xs, sm, md, lg }    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (      &lt;Section height={500}&gt;        &lt;Grid spacing={16} container&gt;          &lt;Grid {...gridSizes} item&gt;            &lt;div className={classes.groupsHeader}&gt;              &lt;Header center&gt;{header}&lt;/Header&gt;            &lt;/div&gt;          &lt;/Grid&gt;          &lt;Grid {...gridSizes} item&gt;            &lt;div&gt;              &lt;img src={src} alt="" className={classes.img} /&gt;            &lt;/div&gt;          &lt;/Grid&gt;        &lt;/Grid&gt;      &lt;/Section&gt;    )  }  return (    &lt;Body noBottom&gt;      &lt;Header center&gt;Title&lt;/Header&gt;      &lt;Divider /&gt;      &lt;Background grey&gt;        &lt;BodySection header="Groups" src={photos.groups} /&gt;      &lt;/Background&gt;      &lt;div&gt;        &lt;BodySection header="Labs" src={photos.labs} /&gt;      &lt;/div&gt;    &lt;/Body&gt;  ) }</code> </pre> <br> å³ä½¿æ˜¯è¿™é‡Œå±•ç¤ºçš„æœ€ä½çº§åˆ«çš„ä»£ç è½¬æ¢ï¼Œä¹Ÿä½¿è¯¥ä»£ç åœ¨é˜…è¯»å’Œæ”¯æŒæ–¹é¢æ›´åŠ æ–¹ä¾¿ã€‚ åŒæ—¶ï¼Œä»–æ˜¯è§£å†³åˆ†é…ç»™ä»–çš„ä»»åŠ¡çš„å®Œå…¨é€‚å½“çš„æ–¹æ³•ã€‚ <br><br><h2>  <font color="#3AC1EF">9.åŠ›æ±‚ä½¿ç»„ä»¶å°½å¯èƒ½ç®€å•ã€‚</font> </h2><br> åœ¨é”€å”®åº”ç”¨ç¨‹åºä¸Šå·¥ä½œæ—¶ï¼Œæœ‰æ—¶æˆ‘é‡åˆ°çš„ä¸æ˜¯è¿½æ±‚ç»„ä»¶ç®€å•æ€§çš„éœ€æ±‚ï¼Œè€Œæ˜¯é¿å…ç»„ä»¶è¿‡äºå¤æ‚çš„æƒ…å†µçš„éœ€æ±‚ã€‚ <br><br> è¿™æ˜¯ä¸å¿…è¦å¤æ‚çš„ç»„ä»¶ç¤ºä¾‹ã€‚ å®ƒç”±<code>ConfirmAvailability.js</code>è¡¨ç¤ºï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Grid <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Grid'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Typography <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Typography'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MenuItem <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/MenuItem'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Select <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Select'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Time <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'util/time'</span></span> <span class="hljs-comment"><span class="hljs-comment">/** *     .    ,     , ,  ,  * ,    .        .     -     . * * :     Date().getTimezoneOffset().     : *   1.      . *   2.     UTC -     ,   UTC   .  ,       *     UTC. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TimeZonePicker</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{  state = {    <span class="hljs-attr"><span class="hljs-attr">time</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(),    <span class="hljs-attr"><span class="hljs-attr">offset</span></span>: -<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">new</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Date</span></span></span></span><span class="hljs-function"><span class="hljs-params">(</span></span></span><span class="hljs-function">).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getTimezoneOffset</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> / 60),  }  </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">componentDidMount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> {    </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">setOffset</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.state.offset</span></span></span><span class="hljs-function">)  }  </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">handleChange</span></span></span><span class="hljs-function"> = (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) =&gt;</span></span> {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> d = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>()    d.setTime(      d.getTime() +        d.getTimezoneOffset() * <span class="hljs-number"><span class="hljs-number">60</span></span> * <span class="hljs-number"><span class="hljs-number">1000</span></span> +        event.target.value * <span class="hljs-number"><span class="hljs-number">3600</span></span> * <span class="hljs-number"><span class="hljs-number">1000</span></span>,    )    <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({      <span class="hljs-attr"><span class="hljs-attr">time</span></span>: d,      <span class="hljs-attr"><span class="hljs-attr">offset</span></span>: event.target.value,    })    <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.setOffset(event.target.value)  }  render() {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> timezones = []    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">-12</span></span>; i &lt;= <span class="hljs-number"><span class="hljs-number">14</span></span>; i++) {      timezones.push(        <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{i}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{i}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">          {i &gt; 0 ? '+' : null}          {i}        </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>,      )    }    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (      <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">React.Fragment</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">        </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">container</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">justify</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"space-between"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">          </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">            </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Current time</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">            </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">variant</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"h6"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">gutterBottom</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">              {Time.formatTime(this.state.time)}            </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">          </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">          </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">            </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Set timezone</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">            </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Select</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.offset}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.handleChange}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">              {timezones}            </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Select</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">          </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">        </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">      </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">React.Fragment</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">    )  } }</span></span></code> </pre> <br> è¯¥ç»„ä»¶è¢«è®¤ä¸ºæ˜¯ä¸€ç§ç®€å•çš„æœºåˆ¶ï¼Œä½†æ˜¯ç”±äºå®ƒåŒ…å«é«˜åº¦ç›¸å…³çš„é€»è¾‘ï¼Œå› æ­¤å®ƒè´Ÿè´£è§£å†³å‡ ä¸ªé—®é¢˜ã€‚ åœ¨ç¼–å†™æ­¤ä»£ç æ—¶ï¼ŒReacté’©å­å°šæœªå‘å¸ƒï¼Œä½†ReactåŒ…å«äº†è¯¸å¦‚é«˜é˜¶ç»„ä»¶å’Œæ¸²æŸ“é“å…·ä¹‹ç±»çš„æŠ€æœ¯ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä½¿ç”¨è¿™äº›æ¨¡å¼ä¹‹ä¸€æ¥ç®€åŒ–ç»„ä»¶ã€‚ è¿™å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ¼”ç¤ºä¸€ç§åœ¨ä¸æ›´æ”¹ç°æœ‰åŠŸèƒ½çš„æƒ…å†µä¸‹ç®€åŒ–ç»„ä»¶çš„æ–¹æ³•ã€‚ <br><br> ä»¥å‰ï¼Œæ‰€æœ‰ä»£ç éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚ ç°åœ¨æˆ‘ä»¬å°†å…¶åˆ†ä¸ºä¸¤ä¸ªæ–‡ä»¶ã€‚ è¿™æ˜¯ç¬¬ä¸€ä¸ªæ–‡ä»¶<code>SelectTimeZone.js</code>çš„å†…å®¹ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-comment"><span class="hljs-comment">/** *     .    ,     , ,  ,  * ,    .        .     -     . * * :     Date().getTimezoneOffset().     : *   1.      . *   2.     UTC -     ,   UTC   .  ,       *     UTC. */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SelectTimeZone</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{  state = {    <span class="hljs-attr"><span class="hljs-attr">time</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(),    <span class="hljs-attr"><span class="hljs-attr">offset</span></span>: -<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">new</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Date</span></span></span></span><span class="hljs-function"><span class="hljs-params">(</span></span></span><span class="hljs-function">).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getTimezoneOffset</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> / 60),  }  </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">componentDidMount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> {    </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">setOffset</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.state.offset</span></span></span><span class="hljs-function">)  }  </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">handleChange</span></span></span><span class="hljs-function"> = (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) =&gt;</span></span> {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> d = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>()    d.setTime(      d.getTime() +        d.getTimezoneOffset() * <span class="hljs-number"><span class="hljs-number">60</span></span> * <span class="hljs-number"><span class="hljs-number">1000</span></span> +        event.target.value * <span class="hljs-number"><span class="hljs-number">3600</span></span> * <span class="hljs-number"><span class="hljs-number">1000</span></span>,    )    <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({      <span class="hljs-attr"><span class="hljs-attr">time</span></span>: d,      <span class="hljs-attr"><span class="hljs-attr">offset</span></span>: event.target.value,    })    <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.setOffset(event.target.value)  }  getTimeZones = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> timezones = []    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">-12</span></span>; i &lt;= <span class="hljs-number"><span class="hljs-number">14</span></span>; i++) {      timezones.push(        <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{i}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{i}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">          {i &gt; 0 ? '+' : null}          {i}        </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">MenuItem</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>,      )    }    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> timezones  }  render() {    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.render({      ...this.state,      <span class="hljs-attr"><span class="hljs-attr">getTimeZones</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getTimeZones,    })  } }</code> </pre> <br> è¿™æ˜¯ç¬¬äºŒä¸ªæ–‡ä»¶çš„æ ·å­<code>TimeZonePicker.js</code> ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Grid <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Grid'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Typography <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Typography'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MenuItem <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/MenuItem'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Select <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Select'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Time <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'util/time'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> TimeZonePicker = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> (  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">SelectTimeZone</span></span></span></span><span class="xml"><span class="hljs-tag">    </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">render</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{({</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">time</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">offset</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">getTimeZones</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">handleChange</span></span></span></span><span class="xml"><span class="hljs-tag"> }) =&gt;</span></span></span><span class="xml"> (      </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">container</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">justify</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"space-between"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">        </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">          </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Current time</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">          </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">variant</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"h6"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">gutterBottom</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">            {Time.formatTime(time)}          </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">        </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">        </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">          </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Set timezone</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">          </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Select</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{offset}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{handleChange}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">            {getTimeZones()}          </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Select</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">        </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">      </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">    )}  /&gt; ) export default TimeZonePicker</span></span></code> </pre> <br> ç»è¿‡å¤„ç†åï¼Œé¡¹ç›®ä»£ç æ¯”ä»¥å‰å¹²å‡€å¾—å¤šã€‚ æˆ‘ä»¬ä»ç»„ä»¶çš„è¡¨ç¤ºéƒ¨åˆ†æå–äº†é€»è¾‘ã€‚ ç°åœ¨ï¼Œæ­¤å¤–ï¼Œè¯¥é¡¹ç›®çš„å•å…ƒæµ‹è¯•å°†å¤§å¤§ç®€åŒ–ã€‚ <br><br><h2>  <font color="#3AC1EF">10.ä½¿useStateå¤æ‚æ—¶ä½¿ç”¨useReducer</font> </h2><br> æ‚¨å¿…é¡»åœ¨é¡¹ç›®ä¸­å¤„ç†çš„çŠ¶æ€ç‰‡æ®µè¶Šå¤šï¼Œ <code>useState</code>çš„ä½¿ç”¨å°±è¶Šå¤æ‚ã€‚ <br><br> ä¾‹å¦‚ï¼Œè¿™å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> axios <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'axios'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> useFrogs = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [fetching, setFetching] = React.useState(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [fetched, setFetched] = React.useState(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [fetchError, setFetchError] = React.useState(<span class="hljs-literal"><span class="hljs-literal">null</span></span>)  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [timedOut, setTimedOut] = React.useState(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [frogs, setFrogs] = React.useState(<span class="hljs-literal"><span class="hljs-literal">null</span></span>)  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [params, setParams] = React.useState({ <span class="hljs-attr"><span class="hljs-attr">limit</span></span>: <span class="hljs-number"><span class="hljs-number">50</span></span> })  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> timedOutRef = React.useRef()  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateParams</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newParams</span></span></span><span class="hljs-function">) </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (newParams != <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>) {      setParams(newParams)    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {      <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.warn(        <span class="hljs-string"><span class="hljs-string">'You tried to update state.params but the parameters were null or undefined'</span></span>,      )    }  }  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">formatFrogs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newFrogs</span></span></span><span class="hljs-function">) </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> formattedFrogs = newFrogs.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">acc, frog</span></span></span><span class="hljs-function">) =&gt;</span></span> {      <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { name, age, size, children } = frog      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">in</span></span></span></span><span class="hljs-function"><span class="hljs-params"> acc</span></span></span><span class="hljs-function">)) {        </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">acc</span></span></span><span class="hljs-function">[</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">] = {          </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">age</span></span></span><span class="hljs-function">,          </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">size</span></span></span><span class="hljs-function">,          </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">children</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">children</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(child</span></span></span><span class="hljs-function">) =&gt;</span></span> ({            <span class="hljs-attr"><span class="hljs-attr">name</span></span>: child.name,            <span class="hljs-attr"><span class="hljs-attr">age</span></span>: child.age,            <span class="hljs-attr"><span class="hljs-attr">size</span></span>: child.size,          })),        }      }      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> acc    }, {})    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> formattedFrogs  }  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFrog</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name, frog</span></span></span><span class="hljs-function">) </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> nextFrogs = {      ...frogs,      [name]: frog,    }    setFrogs(nextFrogs)  }  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeFrog</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">) </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> nextFrogs = { ...frogs }    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (name <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> nextFrogs) <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> nextFrogs[name]    setFrogs(nextFrogs)  }  React.useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (frogs === <span class="hljs-literal"><span class="hljs-literal">null</span></span>) {      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timedOutRef.current) clearTimeout(timedOutRef.current)      setFetching(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)      timedOutRef.current = setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {        setTimedOut(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)      }, <span class="hljs-number"><span class="hljs-number">20000</span></span>)      axios        .get(<span class="hljs-string"><span class="hljs-string">'https://somefrogsaspi.com/api/v1/frogs_list/'</span></span>, { params })        .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) =&gt;</span></span> {          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timedOutRef.current) clearTimeout(timedOutRef.current)          setFetching(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)          setFetched(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timedOut) setTimedOut(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fetchError) setFetchError(<span class="hljs-literal"><span class="hljs-literal">null</span></span>)          setFrogs(formatFrogs(response.data))        })        .catch(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) =&gt;</span></span> {          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timedOutRef.current) clearTimeout(timedOutRef.current)          <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(error)          setFetching(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timedOut) setTimedOut(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)          setFetchError(error)        })    }  }, [])  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {    fetching,    fetched,    fetchError,    timedOut,    frogs,    params,    addFrog,    removeFrog,  } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> useFrogs</code> </pre> <br> å¦‚æœæ‚¨å°†æ­¤ä»£ç è½¬æ¢ä¸º<code>useReducer</code> ï¼Œåˆ™ä½¿ç”¨æ‰€æœ‰è¿™äº›åŠŸèƒ½å°†å˜å¾—æ›´åŠ æ–¹ä¾¿ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> axios <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'axios'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialFetchState = {  <span class="hljs-attr"><span class="hljs-attr">fetching</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>  fetched: <span class="hljs-literal"><span class="hljs-literal">false</span></span>  fetchError: <span class="hljs-literal"><span class="hljs-literal">null</span></span>  timedOut: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = {  ...initialFetchState,  <span class="hljs-attr"><span class="hljs-attr">frogs</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>  params: { <span class="hljs-attr"><span class="hljs-attr">limit</span></span>: <span class="hljs-number"><span class="hljs-number">50</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducer = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) =&gt;</span></span> {  <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) {    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'fetching'</span></span>:      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, ...initialFetchState, <span class="hljs-attr"><span class="hljs-attr">fetching</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'fetched'</span></span>:      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, ...initialFetchState, <span class="hljs-attr"><span class="hljs-attr">fetched</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">frogs</span></span>: action.frogs }    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'fetch-error'</span></span>:      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, ...initialFetchState, <span class="hljs-attr"><span class="hljs-attr">fetchError</span></span>: action.error }    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'set-timed-out'</span></span>:      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, ...initialFetchState, <span class="hljs-attr"><span class="hljs-attr">timedOut</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'set-frogs'</span></span>:      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, ...initialFetchState, <span class="hljs-attr"><span class="hljs-attr">fetched</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">frogs</span></span>: action.frogs }    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'add-frog'</span></span>:      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, <span class="hljs-attr"><span class="hljs-attr">frogs</span></span>: { ...state.frogs, [action.name]: action.frog }}    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'remove-frog'</span></span>: {      <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> nextFrogs = { ...state.frogs }      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action.name <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> nextFrogs) <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> nextFrogs[action.name]      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, <span class="hljs-attr"><span class="hljs-attr">frogs</span></span>: nextFrogs }    }    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'set-params'</span></span>:      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, <span class="hljs-attr"><span class="hljs-attr">params</span></span>: { ...state.params, ...action.params } }      <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>:        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state  } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> useFrogs = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [state, dispatch] = React.useReducer(reducer, initialState)  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> timedOutRef = React.useRef()  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateParams</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">params</span></span></span><span class="hljs-function">) </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (newParams != <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>) {      dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'set-params'</span></span>, params })    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {      <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.warn(        <span class="hljs-string"><span class="hljs-string">'You tried to update state.params but the parameters were null or undefined'</span></span>,      )    }  }  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">formatFrogs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newFrogs</span></span></span><span class="hljs-function">) </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> formattedFrogs = newFrogs.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">acc, frog</span></span></span><span class="hljs-function">) =&gt;</span></span> {      <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { name, age, size, children } = frog      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">in</span></span></span></span><span class="hljs-function"><span class="hljs-params"> acc</span></span></span><span class="hljs-function">)) {        </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">acc</span></span></span><span class="hljs-function">[</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">] = {          </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">age</span></span></span><span class="hljs-function">,          </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">size</span></span></span><span class="hljs-function">,          </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">children</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">children</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(child</span></span></span><span class="hljs-function">) =&gt;</span></span> ({            <span class="hljs-attr"><span class="hljs-attr">name</span></span>: child.name,            <span class="hljs-attr"><span class="hljs-attr">age</span></span>: child.age,            <span class="hljs-attr"><span class="hljs-attr">size</span></span>: child.size,          })),        }      }      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> acc    }, {})    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> formattedFrogs  }  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFrog</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name, frog</span></span></span><span class="hljs-function">) </span></span>{    dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'add-frog'</span></span>, name, frog })  }  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeFrog</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">) </span></span>{    dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'remove-frog'</span></span>, name })  }  React.useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (frogs === <span class="hljs-literal"><span class="hljs-literal">null</span></span>) {      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timedOutRef.current) clearTimeout(timedOutRef.current)      timedOutRef.current = setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {        setTimedOut(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)      }, <span class="hljs-number"><span class="hljs-number">20000</span></span>)      axios        .get(<span class="hljs-string"><span class="hljs-string">'https://somefrogsaspi.com/api/v1/frogs_list/'</span></span>, { params })        .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) =&gt;</span></span> {          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timedOutRef.current) clearTimeout(timedOutRef.current)          <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> frogs = formatFrogs(response.data)          dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'set-frogs'</span></span>, frogs })        })        .catch(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) =&gt;</span></span> {          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timedOutRef.current) clearTimeout(timedOutRef.current)          <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(error)          dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'fetch-error'</span></span>, error })        })    }  }, [])  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {    fetching,    fetched,    fetchError,    timedOut,    frogs,    params,    addFrog,    removeFrog,  } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> useFrogs</code> </pre> <br> å°½ç®¡è¿™ç§æ–¹æ³•å¯èƒ½ä¸æ¯”ä½¿ç”¨<code>useState</code> ï¼Œä½†æ˜¯é€šè¿‡æŸ¥çœ‹ä»£ç å¯ä»¥çœ‹å‡ºï¼Œæ–°ä»£ç æ›´æ˜“äºç»´æŠ¤ã€‚ è¿™æ˜¯ç”±äºä»¥ä¸‹äº‹å®ï¼šä½¿ç”¨<code>useReducer</code>ç¨‹åºå‘˜ä¸å¿…æ‹…å¿ƒé’©å­ä¸åŒéƒ¨åˆ†çš„çŠ¶æ€æ›´æ–°ï¼Œå› ä¸ºæ‰€æœ‰è¿™äº›æ“ä½œéƒ½åœ¨<code>reducer</code>ä¸€ä¸ªä½ç½®å®šä¹‰ã€‚ <br><br> åœ¨ä½¿ç”¨<code>useState</code>çš„ä»£ç ç‰ˆæœ¬ä¸­ï¼Œé™¤äº†ç¼–å†™é€»è¾‘å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨æŒ‚é’©å†…å£°æ˜å‡½æ•°ï¼Œä»¥ä¾¿å¼„æ¸…æ¥šçŠ¶æ€çš„ä¸‹ä¸€éƒ¨åˆ†åº”è¯¥æ˜¯ä»€ä¹ˆã€‚ ä½¿ç”¨<code>useReducer</code>æ‚¨ä¸å¿…è¿™æ ·åšã€‚ ç›¸åï¼Œæ‰€æœ‰å†…å®¹éƒ½å½’å…¥<code>reducer</code>å‡½æ•°ã€‚ æˆ‘ä»¬åªéœ€è¦è§¦å‘é€‚å½“ç±»å‹çš„æ“ä½œå³å¯ï¼Œå®é™…ä¸Šï¼Œè¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦æ‹…å¿ƒçš„ã€‚ <br><br><h2>  <font color="#3AC1EF">11.åœ¨æœ‰äº‰è®®çš„æƒ…å†µä¸‹ä½¿ç”¨å‡½æ•°å£°æ˜</font> </h2><br> ä½¿ç”¨æ­¤å»ºè®®çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯åˆ›å»ºä¸€ä¸ª<code>useEffect</code>æ¸…ç†<code>useEffect</code> ï¼š <br><br><pre> <code class="javascript hljs">React.useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {  setMounted(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {    setMounted(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)  } }, [])</code> </pre> <br> ç»éªŒä¸°å¯Œçš„Reactå¼€å‘äººå‘˜çŸ¥é“è¿”å›å‡½æ•°çš„ä½œç”¨ï¼Œä»–å°†å¾ˆå®¹æ˜“ç†è§£è¯¥ä»£ç ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨è®¤ä¸ºå¯¹<code>useEffect</code>ä¸å¤ªç†Ÿæ‚‰çš„<code>useEffect</code>ä¼šé˜…è¯»æ­¤ä»£ç ï¼Œåˆ™æœ€å¥½åœ¨ä»£ç ä¸­å°½å¯èƒ½æ¸…æ¥šåœ°è¡¨è¾¾å…¶æ„å›¾ã€‚ å®ƒæ˜¯å…³äºä½¿ç”¨å¯ä»¥èµ‹äºˆæœ‰æ„ä¹‰åç§°çš„å‡½æ•°å£°æ˜ã€‚ ä¾‹å¦‚ï¼Œæ­¤ä»£ç å¯ä»¥è¿™æ ·é‡å†™ï¼š <br><br><pre> <code class="javascript hljs">React.useEffect(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {  setMounted(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cleanup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{    setMounted(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)  } }, [])</code> </pre> <br> è¿™ç§æ–¹æ³•ä½¿æˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°æè¿°è¿”å›å‡½æ•°æ‰€æ‰®æ¼”çš„è§’è‰²ã€‚ <br><br><h2>  <font color="#3AC1EF">12.ä½¿ç”¨æ›´æ¼‚äº®</font> </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Prettier</a>å¸®åŠ©ä¸ªäººå¼€å‘äººå‘˜å’Œå›¢é˜Ÿç»´æŠ¤ä¸€è‡´ä¸”ä¸€è‡´çš„ä»£ç æ ¼å¼åŒ–æ–¹æ³•ã€‚ è¯¥å·¥å…·æœ‰åŠ©äºèŠ‚çœæ—¶é—´å’Œç²¾åŠ›ã€‚ é€šè¿‡å‡å°‘è®¨è®ºç¨‹åºæ ·å¼çš„åŸå› ï¼Œå®ƒç®€åŒ–äº†ä»£ç å®¡æŸ¥ã€‚  Prettierè¿˜é¼“åŠ±ç¨‹åºå‘˜ä½¿ç”¨ç®€æ´çš„ä»£ç ç¼–å†™æŠ€æœ¯ã€‚ æ­¤å·¥å…·åº”ç”¨çš„è§„åˆ™æ˜¯å¯ç¼–è¾‘çš„ã€‚ ç»“æœï¼Œäº‹å®è¯æ˜æ¯ä¸ªäººéƒ½å¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰å®ƒã€‚ <br><br><h2>  <font color="#3AC1EF">13.åŠªåŠ›ä½¿ç”¨é€Ÿè®°æ¥å£°æ˜ç‰‡æ®µ</font> </h2><br> è¯¥å»ºè®®çš„å®è´¨å¯ä»¥åœ¨ä»¥ä¸‹ä¸¤ä¸ªç¤ºä¾‹ä¸­è¡¨è¾¾ã€‚ <br><br> è¿™æ˜¯ç‰‡æ®µå£°æ˜çš„ç®€åŒ–ç‰ˆæœ¬ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> App = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> (  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">FrogsTable</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">FrogsGallery</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/&gt;</span></span></span><span class="xml"> )</span></span></code> </pre> <br> è¿™æ˜¯å®Œæ•´ç‰ˆæœ¬ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> App = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> (  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">React.Fragment</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">FrogsTable</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">FrogsGallery</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">React.Fragment</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> )</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">14.ç¼–å†™ä»£ç æ—¶ï¼Œè¯·éµå¾ªå…ƒç´ çš„ç‰¹å®šæ”¾ç½®é¡ºåºã€‚</font> </h2><br> ç¼–å†™ä»£ç æ—¶ï¼Œæˆ‘æ›´å–œæ¬¢æŒ‰ä¸€å®šé¡ºåºæ’åˆ—ä¸€äº›å‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œæˆ‘åœ¨å¯¼å…¥æ–‡ä»¶æ—¶æ‰§è¡Œæ­¤æ“ä½œï¼ˆè¿™é‡Œçš„å”¯ä¸€ä¾‹å¤–æ˜¯ä»…å¯¼å…¥<code>react</code> ï¼‰ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { useSelector } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> styled <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'styled-components'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FrogsGallery <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./FrogsGallery'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FrogsTable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./FrogsTable'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Stations <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Stations'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> errorHelpers <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../utils/errorHelpers'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> utils <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../utils/'</span></span></code> </pre> <br> æŸ¥çœ‹æ­¤ä»£ç ï¼Œå¯èƒ½æœ‰äººè®¤ä¸ºè¿™é‡Œæ²¡æœ‰éµå®ˆç‰¹æ®Šé¡ºåºã€‚ æ¯•ç«Ÿï¼Œå¯¼å…¥çš„å®ä½“ç”šè‡³æ²¡æœ‰æŒ‰å­—æ¯é¡ºåºæ’åºã€‚ ä½†æ˜¯ï¼ŒæŒ‰å­—æ¯é¡ºåºæ’åˆ—æŸäº›å†…å®¹åªæ˜¯æˆ‘ä½¿ç”¨çš„å‘½ä»¤æ’åºæ–¹æ¡ˆçš„ä¸€éƒ¨åˆ†ã€‚ <br><br> ä¸ºäº†è¿½æ±‚é¡¹ç›®ä»£ç çš„çº¯ç²¹æ€§ï¼Œæˆ‘æŒ‰ç…§ä»¥ä¸‹é¡ºåºä½¿ç”¨ä»¥ä¸‹è§„åˆ™ï¼š <br><br><ol><li> å¯¼å…¥Reactã€‚ </li><li> å¯¼å…¥åº“ï¼ˆæŒ‰å­—æ¯é¡ºåºï¼‰ã€‚ </li><li> ä»é¡¹ç›®ä¸­å¯¼å…¥å®ä½“çš„ç»å¯¹å‘½ä»¤ï¼ˆæŒ‰å­—æ¯é¡ºåºï¼‰ã€‚ </li><li> ç›¸å¯¹å¯¼å…¥å‘½ä»¤ï¼ˆæŒ‰å­—æ¯é¡ºåºï¼‰ã€‚ </li><li> æ ¼å¼ä¸º<code>import * as</code>å‘½ä»¤ã€‚ </li><li> æ ¼å¼ä¸º<code>import './&lt;some file&gt;.&lt;some ext&gt;'</code> ã€‚ </li></ol><br> è¿™å°±æ˜¯æˆ‘æ›´å–œæ¬¢ç»„ç»‡å˜é‡çš„æ–¹å¼ã€‚ è¯´-å¯¹è±¡çš„å±æ€§ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> character = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {    cry() {      <span class="hljs-comment"><span class="hljs-comment">//    },    eat() {      //    },    hop() {      //    },    jump() {      //    },    punch() {      //    },    run() {      //    },    scratch() {      //    },    scream() {      //    },    sleep() {      //    },    walk() {      //    },    yawn() {      //    },  } })()</span></span></code> </pre> <br> å¦‚æœæ‚¨åœ¨ç¼–å†™ä»£ç æ—¶éµå¾ªæŸäº›å¯¹å®ä½“è¿›è¡Œæ’åºçš„è§„åˆ™-è¿™å°†å¯¹å…¶çº¯åº¦äº§ç”Ÿæœ‰ç›Šçš„å½±å“ã€‚ <br><br><h2>  <font color="#3AC1EF">æ€»ç»“</font> </h2><br> æˆ‘ä»¬ä¸ºæ‚¨æä¾›äº†ç¼–å†™å¹²å‡€çš„Reactåº”ç”¨ç¨‹åºä»£ç çš„æŠ€å·§ã€‚ æˆ‘ä»¬å¸Œæœ›æ‚¨åœ¨å…¶ä¸­æ‰¾åˆ°å¯¹æ‚¨æœ‰ç”¨çš„ä¸œè¥¿ã€‚ <br><br>  <b>äº²çˆ±çš„è¯»è€…ä»¬ï¼</b> æ‚¨å°†å¯¹æœ¬æ–‡ä»‹ç»çš„æç¤ºæ·»åŠ å“ªäº›å»ºè®®ï¼Ÿ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/it/t5/3p/itt53pns2iucwylb3bwn1fmmtnu.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN465813/">https://habr.com/ru/post/zh-CN465813/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN465803/index.html">å»ºç«‹Goé¡¹ç›®çš„Mavenæ–¹æ³•</a></li>
<li><a href="../zh-CN465805/index.html">Gigatron-ä¸å«å¤„ç†å™¨çš„è‡ªåˆ¶å¾®å‹è®¡ç®—æœº</a></li>
<li><a href="../zh-CN465807/index.html">æµè¡Œçš„JavaScriptåº“å¦‚ä½•å¼€å§‹åœ¨ç»ˆç«¯ä¸Šå±•ç¤ºå¹¿å‘Šçš„æ•…äº‹</a></li>
<li><a href="../zh-CN465809/index.html">ä¸è¦é™·å…¥è¿‡æ—©ä¼˜åŒ–çš„é™·é˜±</a></li>
<li><a href="../zh-CN465811/index.html">ç¼–å†™ç®€æ´çš„Reactä»£ç çš„14æ¡æŠ€å·§ã€‚ ç¬¬ä¸€éƒ¨åˆ†</a></li>
<li><a href="../zh-CN465815/index.html">ç§‘å­¦å®¶ä»¬åŸ¹è‚²äº†ç¥ç»ç»†èƒç°‡ï¼Œå¹¶å°†å…¶é€åˆ°å›½é™…ç©ºé—´ç«™</a></li>
<li><a href="../zh-CN465817/index.html">ä¸é€‚å¦‚ä½•å¸®åŠ©æˆ‘ä»¬æ”¹å–„å¼€å‘è¿‡ç¨‹ã€‚</a></li>
<li><a href="../zh-CN465819/index.html">ç†æƒ³çš„å±€åŸŸç½‘</a></li>
<li><a href="../zh-CN465823/index.html">Tarantool Kubernetesè¿ç®—ç¬¦</a></li>
<li><a href="../zh-CN465825/index.html">SQLè¡¨ä¸­çš„Asterisk FreePBXç”µè¯ç›®å½•ï¼ˆåŸºäºWebçš„ç›®å½•ï¼Œä¸Šè½½åˆ°Grandstreamç”µè¯çš„xmlæ–‡ä»¶ä¸­ï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>