<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì≥ üíÉüèΩ üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø Erleben Sie das Erstellen von Linux-Assemblys f√ºr Single-Board-Updates mit Unterst√ºtzung üôÑ üë©üèø‚Äç‚öñÔ∏è üê≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Einf√ºhrung 
 Derzeit bietet der Markt eine breite Palette von Einzelzahlern f√ºr jeden Geschmack zu einem erschwinglichen Preis. 

 In der Regel dienen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erleben Sie das Erstellen von Linux-Assemblys f√ºr Single-Board-Updates mit Unterst√ºtzung</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470519/"><img src="https://habrastorage.org/webt/uv/15/sj/uv15sjkhjdjizxf0g2acp_abzai.jpeg" alt="Bild"><br><br><h2>  Einf√ºhrung </h2><br>  Derzeit bietet der Markt eine breite Palette von Einzelzahlern f√ºr jeden Geschmack zu einem erschwinglichen Preis. <br><br>  In der Regel dienen verschiedene Baugruppen von Herstellern zur Bewertung der Plattform und sind Ausgangspunkt eines neuen Projekts, daher sind sie nicht immer f√ºr bestimmte Aufgaben geeignet.  Bei Aufgaben, bei denen eine hohe Zuverl√§ssigkeit erforderlich ist, steht der Entwickler vor der Frage, wie das Distributionskit fertiggestellt und dann nicht mit einer vollst√§ndigen √úberarbeitung des Images und des Aktualisierungssystems bezahlt werden kann. <br><a name="habracut"></a><br>  Im Internet gibt es fast keine Informationen dar√ºber, wie der Release-Build aussehen sollte und wie das Update implementiert werden soll. Daher muss der Entwickler ein ‚ÄûFahrrad‚Äú entwickeln oder seine eigenen Entwicklungen verwenden, die nicht immer zu 100% getestet werden. <br><br>  Da ich an der Entwicklung von Software f√ºr verschiedene Linux-Ger√§te beteiligt bin (mein Portfolio kann unter dem Wort develinux google sein) und auch Autor des 11-teiligen Projekts bin, muss ich mich regelm√§√üig nicht nur mit Baugruppen befassen, sondern auch mit der Entwicklung von Aktualisierungsmechanismen √ºber WEB oder USB-Flash. <br><br>  In diesem Artikel m√∂chte ich meine Erfahrungen und Kenntnisse in relevanten Bereichen teilen. <br><br><h2>  Montageanforderungen </h2><br>  Bei der Entwicklung von Baugruppen und Updates f√ºr verschiedene Ger√§te habe ich verschiedene Anforderungen an mich selbst ermittelt: <br><br><ul><li>  Die Baugruppe darf nicht besch√§digt werden, wenn die Stromversorgung pl√∂tzlich ausgeschaltet wird. </li><li>  Montage sollte schnell geladen werden; </li><li>  Der Bootloader sollte einwandfrei funktionieren. </li><li>  Die Assembly muss das Update unterst√ºtzen. </li></ul><br>  Ich werde versuchen, diese Anforderungen im Folgenden n√§her zu erl√§utern, und anschlie√üend drei Ans√§tze f√ºr die Unterteilung von Bildern in Abschnitte und deren Aktualisierungen beschreiben. <br><br><h2>  Die Baugruppe darf nicht besch√§digt werden, wenn die Stromversorgung pl√∂tzlich ausgeschaltet wird. </h2><br>  Wer braucht ein Ger√§t, das nach einem zehnten Neustart nicht mehr funktioniert?  F√ºr niemanden!  Wenn Sie vorgefertigte Distributionen verwenden (und es gibt nur sehr wenige davon f√ºr Embedded), sind sie ohne eine Datei aus der Box in dieser Hinsicht alle sehr unzuverl√§ssig.  Ich erinnerte mich sehr gut an das Projekt, bei dem ich Ubuntu unter imx6 verwendete. Die Dateisysteme auf der Karte waren besch√§digt, manchmal ab dem zehnten Neustart, manchmal ab dem vierzigsten, es hing von den Sternen am Himmel ab.  Das Projekt rettete FS aufs.  Tatsache ist, dass Ubuntu nicht schreibgesch√ºtzt ist und immer etwas schreiben sollte.  Ich erinnere mich an eine √§hnliche Situation in einem anderen Projekt, in dem yocto auf einer SD-Karte verwendet wurde.  Beachten Sie also, dass SD-Karten im Allgemeinen die h√§sslichste Art von Laufwerk sind, die am schnellsten abst√ºrzt, viel zuverl√§ssiger als emmc und nand.  Wenn Sie eine SD-Karte verwenden, ist es ratsam, w√§hrend des Betriebs so wenig wie m√∂glich darauf zu schreiben. Die Hintergrund√ºbertragungsalgorithmen f√ºr Sektoren sind sehr unvorhersehbar. Ich habe mit Dutzenden verschiedener SD-Karten von Weltmarken gearbeitet und keine einzige Karte gefunden, die ich empfehlen k√∂nnte. <br>  SD-Karten bieten jedoch mehrere Vorteile: Sie sind erschwinglich, kosteng√ºnstig und praktisch beim Debuggen von Software. <br><br>  Warum bin ich ... Und hier ist die Sache - der Root-FS sollte schreibgesch√ºtzt sein, es sollten w√§hrend des Betriebs keine Eintr√§ge darin sein.  Sie werden wahrscheinlich denken: wie so?  Millionen von Android-Ger√§ten schreiben immer etwas und scheitern nicht.  Das stimmt, aber das liegt daran, dass die meisten Android-Ger√§te zum einen √ºber einen Akku verf√ºgen und zum anderen der Root-FS als Ramdisk gerahmt ist und die Systempartition schreibgesch√ºtzt ist. <br><br>  Wenn das System zuverl√§ssig sein sollte, k√∂nnen alle m√∂glichen Dinge beim Installieren von Paketen im Root-FS viel verderben.  Ich empfehle squashfs als Dateisystem.  Es funktioniert schnell, kann nichts schreiben, spart Platz durch Komprimierung ... <br><br>  Aber was ist mit dem Speichern von Konfigurationen, dem Herunterladen von Dateien usw.  fragst du <br>  Dazu m√ºssen Sie jedoch separate RW-Partitionen erstellen.  Wenn Sie in NAND schreiben m√∂chten, empfehle ich eine bew√§hrte Option - UBIFS.  Wenn in NOR, dann jffs2.  Wenn ich auf ein anderes Laufwerk schreibe, empfehle ich ext4, btrfs, ReiserFS. Ich kann nicht auf den besten FS unter ihnen hinweisen, da  Es gab verschiedene Probleme mit allen. <br><br>  √úberpr√ºfen Sie in diesem Fall immer vor dem Mounten von rw-Partitionen die Partitionen mit fsck-√§hnlichen Dienstprogrammen auf Fehler. <br><br><h2>  Die Montage sollte schnell geladen werden </h2><br>  Die Download-Geschwindigkeit des Ger√§ts wirkt sich auf die allgemeine Benutzerfreundlichkeit aus.  Bei einigen Aufgaben betr√§gt die Ladezeit nicht mehr als 30 Sekunden, bei einigen sind 5 Minuten zul√§ssig.  F√ºr mich selbst habe ich Zeit bis zu 1 Minute trainiert, je weniger desto besser.  Warten Sie zu lange l√§nger als eine Minute auf den Download. M√∂glicherweise scheint das Ger√§t h√§ngen geblieben zu sein. Wenn Sie also die Zeit verk√ºrzen k√∂nnen, ist es besser, es zu verwenden. <br><br><h2>  Der Bootloader sollte reibungslos funktionieren </h2><br>  Der Lader ist das, ohne das die Baugruppe nicht startet.  In letzter Zeit beobachte ich oft, wie Single-Board-Hersteller die Entwicklung erleichtern, indem sie eine Demo f√ºr eine SD-Karte mit einer Beschreibung zum Registrieren eines Bootloaders oder eines fertigen Images bei einem Bootloader hochladen, die einfach mit dem Befehl dd ausgef√ºllt wird.  Aber was ist, wenn die SD-Karte einfriert?  Das gleiche ist nicht ungew√∂hnlich.  Pers√∂nlich fielen in meiner Praxis die Karten oft ab.  Auf diese Weise arbeiten Sie mehrere Stunden lang gegen eine Geb√ºhr, schreiben Software, bam und das ist alles ... Fehler im Kernel flie√üen ein, die Karte f√§llt ab.  Aber was ist, wenn dies ein Ger√§t ist, das in den Feldern ohne Neustart funktionieren sollte?  √úbrigens, ein Neustart einschlie√ülich Watchdog belebt nicht immer eine blockierte Karte, die Karte hat kein R√ºcksetzsignal, dies ist kein emmc, nat√ºrlich ist dies eher eine Frage f√ºr die Schaltung der Karte, wenn die Karte die Leistung der Karte zur√ºcksetzt, wird dies sparen, aber dies ist nicht √ºberall.  Bei einigen Boards hilft es nur, die Leistung oder Karte zu verzerren.  Aufgrund meiner Erfahrung empfehle ich nicht, den Bootloader mit der Hauptbaugruppe auf dem Laufwerk zu speichern, wenn w√§hrend des Betriebs eine Aufzeichnung auf dem Laufwerk durchgef√ºhrt wird.  Wenn das System mit dem Bootloader nichts auf das Laufwerk schreibt und dies selten vorkommt, dann bitte.  Nach meiner Erfahrung wurde das Dateisystem im schreibgesch√ºtzten Modus nur aufgrund von Hardwarefehlern deformiert, nicht jedoch aufgrund von Softwarefehlern. <br><br>  Der Bootloader sollte an einem sicheren Ort, auf einem zuverl√§ssigen Laufwerk, beispielsweise in einem separaten NOR- oder EEPROM-Chip, aufbewahrt werden.  Unten sehen Sie ein Beispiel f√ºr ein Modul, das auf dem imx6ull-Chip basiert und SPI NOR zum Speichern des Bootloaders enth√§lt. <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/webt/w0/ka/um/w0kaumujmmpo6mey_ubuk6oknm4.jpeg" alt="Bild" width="50%"></a> </div><br><h2>  Build muss ein Upgrade unterst√ºtzen </h2><br>  Nirgendwo ohne Update ... Ich habe an vielen Projekten teilgenommen und nie die perfekte Software f√ºr die Lieferung von Arbeiten bekommen.  Ein Fehler wird immer erkannt oder eine Funktionsverbesserung ist erforderlich.  Sie m√ºssen verstehen, dass Menschen, die Software schreiben, Fehler machen, w√§hrend sie das Ger√§t verwenden, etwas mehr wollen.  In 90% der F√§lle kann das Fehlen eines durchdachten Update-Systems sowohl zu Kopfschmerzen f√ºr den Hersteller als auch zum Zusammenbruch des gesamten Projekts f√ºhren.  Zum Beispiel wurde ein Video√ºberwachungssystem f√ºr den Transport entwickelt, das System wurde in ganz Russland installiert, und es stellte sich heraus, dass Vermarkter den Markt untersch√§tzten und kein Streaming vorsahen. Au√üerdem wurden mehrere Fehler in der Firmware gefunden, und der Verbraucher beginnt, in die Richtung der Wettbewerber zu blicken, weil sie dies getan haben Es gibt nur etwas, das nicht im gekauften Ger√§t enthalten ist ... Ja, ja, in einem seltsamen Garten sind Erdbeeren schmackhafter und das Wetter ist besser (Psychologie). <br>  Was tun in einer solchen Situation?  Wenn das Update unterst√ºtzt wird, gibt es viele L√∂sungen, Fehler k√∂nnen behoben, Stream-Broadcasting verbessert und die Funktionalit√§t f√ºr den Verbraucher angepasst werden. Geben Sie der Verbraucher-Firmware Anweisungen und das ist alles.  Wenn dies jedoch nicht unterst√ºtzt wird, wird der Hersteller gro√üe Abenteuer mit Gesch√§ftsreisen von Servicetechnikern bis hin zum Austausch von Ger√§ten erleben. <br><br>  Das Update-System im Ger√§t sollte bis ins kleinste Detail durchdacht und zu 100% getestet werden.  Ein Fehler in diesem Teil verwandelt das Eisen in Ziegel, daher sollte es keine Toleranzen und Ausnahmen geben. <br><br>  Der Aktualisierungsvorgang muss gegen das Ausschalten des Ger√§ts best√§ndig sein und darf das Ger√§t unter keinen Umst√§nden besch√§digen. <br><br><h2>  Eine √úbersicht √ºber Partitionierungsans√§tze f√ºr zuk√ºnftige Updates </h2><br>  Von den vielen Ans√§tzen kann ich 3 Typen empfehlen, die ich pers√∂nlich implementiert habe.  Dies sind nicht alle Ans√§tze, deren Umfang den Rahmen dieses Artikels sprengt.  Alle drei Typen haben M√§ngel und sind alles andere als ideal, aber, wie es mir scheint, liegen sie nahe am goldenen Mittel des gesunden Menschenverstandes. <br><br><h3>  Ansatz Nr. 1 </h3><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/webt/j4/y0/1l/j4y01l02_tkwvnpe-gs1e2jabiy.jpeg" alt="Bild" width="50%"></a> </div><br>  Der einfachste und kosteng√ºnstigste Weg: <br>  Ein Image wird auf ein Laufwerk gelegt, z. B. eine SD-Karte, die vom U-Boot in das integrierte Laufwerk des Ger√§ts geflasht wird, z. B. NAND-Flash. <br>  In U-Boot m√ºssen Sie daf√ºr Skripte vorbereiten. <br>  Von den Pluspunkten - dies ist die einfachste Art der Aktualisierung, deren Entwicklung maximal 1 Tag dauern wird. <br>  Die Nachteile dieses Ansatzes sind das Fehlen einer Visualisierung des Prozesses und die sehr begrenzten F√§higkeiten des Bootloaders, d.h.  Keine komplizierte Logik mit Standardtools, es sei denn, Sie haben nat√ºrlich einen eigenen U-Boot-Befehl (aber dies ist eine andere Art von Update, C ist eine gro√üe Kraft).  Diese Methode ist nicht f√ºr Aktualisierungen √ºber WEB vorgesehen. Es ist problematisch, die Integrit√§t des Firmware-Images zu kontrollieren. In einigen F√§llen sollte die Baugruppengr√∂√üe die RAM-Gr√∂√üe nicht √ºberschreiten. <br>  Dar√ºber hinaus ist es bei einigen Aufgaben erforderlich, die Einstellungen w√§hrend des Upgrades zu speichern. Dies ist bei diesem Ansatz nicht einfach zu implementieren. <br><br><h3>  Ansatz Nr. 2 </h3><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/webt/ia/ox/vd/iaoxvdexq7u8_biakyniktekgmk.jpeg" alt="Bild" width="50%"></a> </div><br><br>  Die zuverl√§ssigste und gesch√ºtzteste Methode der betrachteten, aber die schwierigste.  Ich empfehle diese Methode, um in besonders verantwortungsvollen Entwicklungen eingesetzt zu werden  Es sch√ºtzt sowohl vor fehlerhaften Bildern als auch vor physischen Sch√§den am Hauptlaufwerk, da die Schaltung ein zus√§tzliches verwendet. <br><br>  Der Ansatz verwendet einen minimalen Build (Ramdisk-Gr√∂√üe von 8-16 MB) und den Haupt-Build.  Ramdisk ist ein komprimiertes Archiv, sodass ein 16-MB-Build physisch um ein Vielfaches kleiner ist. <br>  Das Ziel einer minimalen Baugruppe besteht darin, die Hauptbaugruppe zu bewerten und zu laden. <br>  Ramdisk wird mit den Kernel- und U-Boot-Skripten in einem FIT-Image gehostet. <br><br>  Warum FIT Image und was gibt es?  Das FIT-Image ist ein Format, das von U-Boot unterst√ºtzt wird.  Es stellt die Integrit√§t aller Komponenten (Kernel, DTS, Ramdisk, Skripte) sicher.  Das Entpacken des FIT-Images erfolgt im U-Boot. Wenn die Pr√ºfsumme nicht konvergiert, lehnt U-Boot das Laden ab.  Dies ist zweckm√§√üig, d.h.  Sie m√ºssen sich nicht selbst um die Integrit√§tskontrolle k√ºmmern, m√ºssen nicht mehrere Dateien separat schreiben oder Ihre eigenen Bilder erfinden. Alles wird mit dem FIT-Bild erledigt.  Normalerweise nimmt ein FIT-Image 7 bis 20 MB ein. Es sollte auf ein separates, hochzuverl√§ssiges Laufwerk geschrieben werden, z. B. in qspi oder Flash.  Die Hauptbaugruppe kann in einem billigeren und unzuverl√§ssigen Speicher gespeichert werden, z. B. NAND-Flash.  Da die Hauptarbeiten in der Hauptbaugruppe stattfinden, wird genau diese zuerst besch√§digt.  In diesem Fall wird ein separates Laufwerk mit minimalen Rootfs zur Rettung kommen. <br><br>  Startvorgang. <br><br>  u-boot l√§dt ein Skript herunter, das versucht, FIT-Updates (FIT2) und anschlie√üend die FIT-Werksfirmware (FIT1) zu verwenden. <br><br>  Wenn FIT2 nicht vorhanden ist oder seine Integrit√§t verletzt wird, schl√§gt der Fit-Test fehl und U-Boot l√§dt die erste FIT (FIT1).  Wenn es FIT-Updates gibt (FIT2) und es nicht kaputt ist, wird seine Ramdisk geladen, die die Rootfs-Updates (Rootfs2) √ºberpr√ºft. <br><br>  Wenn Rootfs2 fehlerhaft ist, l√∂schen die Skripte die FIT-Updates (FIT2). Nach dem Neustart wird das aus FIT (FIT1) und Rootfs1 bestehende Factory-Image heruntergeladen. <br><br>  Aktualisierungsprozess. <br><br>  Das Update-Image enth√§lt FIT, Rootfs und verschiedene Assembly-Informationen, einschlie√ülich Pr√ºfsummen aller seiner Komponenten.  Baugruppeninformationen werden w√§hrend des Upgrades verwendet, um die Integrit√§t und Kompatibilit√§t zu √ºberwachen. <br><br>  Aktualisieren Sie den Fortschritt in Schritten: <br><br><ul><li>  √úberpr√ºfen des Images auf Kompatibilit√§t mit Hardware und Software, </li><li>  √úberpr√ºfen der Integrit√§t des Abbilds in der Aktualisierungsdatei, </li><li>  Kopieren von Rootfs2 aus der Aktualisierungsdatei in einen zuvor vorbereiteten Abschnitt, </li><li>  √úberpr√ºfen der Integrit√§t des kopierten Bildes im Abschnitt, </li><li>  Kopieren Sie FIT2 in den entsprechenden Abschnitt. </li><li>  Neustart. </li></ul><br>  Wenn der Prozess fehlschl√§gt, wird das Fehlen oder Besch√§digen von FIT2 das System nicht ruinieren  u-boot weigert sich einfach, es zu verwenden und l√§dt das Factory-Image.  Daher wird w√§hrend des Upgrades die Integrit√§t von FIT2 nicht √ºberpr√ºft. <br><br>  Nach dem Update wird die neue Assembly in Form von FIT2 und Rootfs2 auf dem Hauptlaufwerk platziert. <br><br>  Diese Methode ist best√§ndig gegen mechanische Besch√§digungen des Antriebs und FS-Fehler. <br><br>  Bei kritischen Fehlfunktionen wird das Factory-Image gestartet, in dem die Wiederherstellungssoftware funktioniert, mit der beispielsweise NAND √ºberpr√ºft, die Firmware mithilfe des SSH-Protokolls aus dem Netzwerk heruntergeladen und anschlie√üend aufgezeichnet werden kann. <br><br>  Ich habe nur ein Beispiel f√ºr die Wiederherstellung gegeben, es gibt viele M√∂glichkeiten.  Bei diesem Ansatz wird der Wiederherstellungsprozess von vollwertigem Linux gesteuert, das alles kann ... und nicht vom Bootloader wie in der ersten Version. <br><br><h3>  Ansatz Nr. 3 </h3><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/webt/wx/mz/o-/wxmzo-tpggd3a6goz48-us359_s.jpeg" alt="Bild" width="50%"></a> </div><br><br>  Diese Art von Update wird in fast allen 11-teiligen Projekten verwendet, da es sehr gut funktioniert hat. <br><br>  Das Update eignet sich f√ºr alle Baugruppengr√∂√üen und Laufwerkstypen.  Im Gegensatz zum vorherigen Typ wird hier SPI NOR nur f√ºr U-Boot verwendet, daher hat es eine geringere Gr√∂√üe und geringere Kosten, 1 MB ist ausreichend. <br><br>  Diese Art der Aktualisierung erfordert keine separate Erstellung von Ramdisk, was bedeutet, dass Programmierzeit f√ºr die zuk√ºnftige Entwicklung und Unterst√ºtzung gespart wird. <br><br>  In diesem Beispiel wird ein SD-Kartenlaufwerk verwendet, es kann jedoch auch NAND mit UBIFS verwendet werden, kein Unterschied.  Bei diesem Ansatz wird Rootfs RO vor dem Laden nicht √ºberpr√ºft. Wenn die Baugruppe besch√§digt ist, wei√ü das System nicht, dass sie besch√§digt wurde, und l√§dt sie in einem Kreis.  Hierbei wird davon ausgegangen, dass die Daten im RO-Bereich in keiner Weise ge√§ndert werden k√∂nnen. Dieser Ansatz beseitigt die physische Fehlfunktion des Antriebs.  Wenn das Laufwerk physisch nicht fehlerfrei ist, muss das Ger√§t zu einem Servicecenter gebracht werden. Es wird keine Selbstheilung bereitgestellt.  Dies ist der Preis, den Sie zahlen m√ºssen, um die Entwicklungsgeschwindigkeit, die billigere Unterst√ºtzung und die billigere Elementbasis zu erh√∂hen, aber dies ist gerechtfertigt.  Warum gegen etwas versichern, das so gut wie nie passiert? <br><br>  Die Logik zum Herunterladen und Aktualisieren ist dieselbe wie im vorherigen Ansatz. <br><br>  Beim Laden l√§dt u-boot zuerst FIT-Updates (FIT2) herunter. Wenn diese nicht vorhanden sind oder die Integrit√§t verletzt wird, l√§dt u-boot die erste FIT (FIT1), die werkseitig zusammengesetzte Baugruppe, und so weiter, bis das System aktualisiert wird.  Wenn das System aktualisiert wird, werden FIT2 und Rootfs2 angezeigt.  In diesem Fall wird beim Booten des Ger√§ts zuerst das FIT-Update (FIT2) gestartet.  In den U-Boot-Skripten, die in jeder FIT gespeichert sind, muss geschrieben werden, welche Rootfs gemountet werden sollen. <br><br><h2>  Gemeinsame Partition RW </h2><br>  In Diagrammen gibt es √ºberall einen gemeinsam genutzten Partitionsblock. Dies ist eine Gruppe von Abschnitten zum Schreiben.  Alle Eintr√§ge werden nur dort vorgenommen.  Die freigegebene Partition wird aus Gr√ºnden der √úbersichtlichkeit als eine Partition angezeigt.  Tats√§chlich gibt es drei davon: zwei kleine f√ºr Konfigurationen, die im Spiegel arbeiten, und eine gro√üe f√ºr alles andere.  Au√üerdem empfehle ich, dass Sie beim Aktualisieren einige der Konfigurationen beibehalten. Dies ist praktisch, wenn Sie beispielsweise das Netzwerk konfigurieren und aktualisieren, m√ºssen Sie die Netzwerkeinstellungen nicht neu konfigurieren. <br><br><h2>  Zusammenfassend </h2><br>  Der Artikel beschreibt drei Arten von Assemblys mit Unterst√ºtzung f√ºr Updates, die alle von mir pers√∂nlich √ºberpr√ºft wurden. Sie k√∂nnen sie sicher in Projekten verwenden. <br><br>  Im Moment benutze ich nur die letzten beiden, da sie f√ºr die Anforderungen am besten geeignet sind.  Der √úbersichtlichkeit halber sehen Sie Beispiele f√ºr Ger√§te, auf denen diese Arten von Updates verwendet werden (Details im 11-Teile-Portfolio): <br><br><ul><li>  RS485-Repeater √ºber 4G / WiFi / LAN, </li><li>  4K V-By-One-Steuerplatine f√ºr industrielle Anzeigesteuerung, </li><li>  integriertes Hangar-Klimatisierungssystem, </li><li>  2DisplayPort-LVDS Industrieanzeige-Videocontroller, </li><li>  Leitungssteuerungssystem </li><li>  VPN-Gateway. </li></ul><br>  Wenn mein Artikel n√ºtzlich und interessant ist, bin ich bereit, meine Erfahrungen und bew√§hrten technischen L√∂sungen im Bereich Embedded Linux auf dieser Website weiterzugeben. <br><br>  Danke an alle. <br>  Gorchakov Ilya <br>  Telegramm: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">develinux</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de470519/">https://habr.com/ru/post/de470519/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de470491/index.html">Durch Dornen zum Spiel der Tr√§ume - Fortschritt und Entwicklung der Kreaturen</a></li>
<li><a href="../de470497/index.html">Verwendung von systemd-nspawn zum Wiederherstellen eines Linux-Systems</a></li>
<li><a href="../de470501/index.html">Monade "Reader" √ºber async / warte in C #</a></li>
<li><a href="../de470503/index.html">Kubernetes RBAC Benutzer und Autorisierung</a></li>
<li><a href="../de470517/index.html">Russische EP f√ºr die Kleinsten</a></li>
<li><a href="../de470525/index.html">Windows in einem Browser ohne Registrierung und SMS - √úbersicht √ºber HTML5-RDP-Clients</a></li>
<li><a href="../de470529/index.html">Wie wir ein Legacy-Projekt in GraphQL √ºbersetzt haben</a></li>
<li><a href="../de470531/index.html">Der Neurophysiologe diskutiert das Neuralink-Projekt und spricht √ºber die Arbeit des Gehirns ‚Äûan den Fingern‚Äú.</a></li>
<li><a href="../de470535/index.html">M√∂glichkeiten zum Erstellen von Balkendiagrammen mit Python</a></li>
<li><a href="../de470537/index.html">Neues Validierungspaket f√ºr React on Mobx @ quantumart / mobx-form-validation-kit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>