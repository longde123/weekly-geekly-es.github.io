<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👂🏿 🌖 🛐 SAPUI5 für Dummies Teil 5: Eine vollständige Schritt-für-Schritt-Übung 👇🏼 😟 🤧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Einführung & Zusammenfassung 


 Im vorherigen Blog-Beitrag haben wir gelernt, wie Sie eine zweite Drilldown-Ebene (Detaildetail) erstellen und mit OD...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SAPUI5 für Dummies Teil 5: Eine vollständige Schritt-für-Schritt-Übung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439944/"><p><img src="https://habrastorage.org/webt/f_/1e/85/f_1e85uxxgb8ffaoa_8kdmqnce8.png"></p><br><h3 id="introduction--recap">  Einführung &amp; Zusammenfassung </h3><br><p>  Im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vorherigen Blog-Beitrag</a> haben wir gelernt, wie Sie eine zweite Drilldown-Ebene (Detaildetail) erstellen und mit OData und ODataModel (v2) interagieren, um einen Datenbankdatensatz zu löschen. </p><br><h3 id="what-will-be-covered-on-this-exercise">  Was wird in dieser Übung behandelt? </h3><br><p>  In Teil 5 dieser Reihe von Blog-Posts erfahren Sie, wie Sie in einem Dialogfeld eine SimpleForm erstellen, mit der wir die Informationen einer Kundenauftragsposition aktualisieren können. </p><br><p>  Bevor wir die Datenbankreihenfolge aktualisieren, müssen wir überprüfen, ob alles, was der Benutzer eingibt, unsere Einschränkungen überprüft. </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ODataModel</a> : Wir haben es bereits verwendet, um serverseitige Informationen zu unseren Geschäftspartnern, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kundenaufträgen und Kundenauftragspositionen</a> anzuzeigen.  Wir haben es auch verwendet, um einen Datenbankeintrag zu löschen.  Wir werden es jetzt verwenden, um einen Datensatz dank der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">submitChanges-</a> Methode zu aktualisieren oder das zu entfernen, was wir mit der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">resetChanges-</a> Methode gemacht haben. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ausdrucksbindung</a> : Eine Erweiterung der SAPUI5-Bindungssyntax, mit der Ausdrücke anstelle von benutzerdefinierten Formatierungsfunktionen bereitgestellt werden können </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SimpleForm</a> : Ein Layout, mit dem Benutzer ein pixelgenaues Formular erstellen können </li></ul><a name="habracut"></a><br><p>  Daher besteht unsere Hauptaufgabe darin, dem Benutzer zu ermöglichen, eine Kundenauftragsposition zu bearbeiten und diese Änderungen (falls vorgenommen) an das Backend-System zu senden. </p><br><p>  Hier ist eine Liste der Dinge, die Sie tun müssen, um zum Endergebnis zu gelangen: </p><br><ul><li>  Fügen Sie der Tabelle eine neue Spalte hinzu, um den Hinweiswert anzuzeigen (das ist das Feld, das wir aktualisieren werden). </li><li>  <em>Aktivieren</em> Sie den Produktnamen ( <em>titleActive = ”true”</em> ) und behandeln Sie das titlePress-Ereignis </li><li>  Erstellen Sie ein Fragment in einem <em>Dialogfeld</em> , das unsere <em>SimpleForm</em> enthält </li><li>  Die SimpleForm enthält ein <em>Label</em> / Input-Paar für jedes unserer Felder für Kundenauftragspositionen </li><li>  Alle Eingabefelder außer dem Hinweisfeld können nicht bearbeitet werden </li><li>  Aktivieren Sie die Schaltfläche Speichern des Dialogfelds nur, wenn die vom Benutzer eingegebene Notiz eine Länge größer als Null hat </li><li>  Behandeln Sie die Schaltfläche Speichern, um alle Benutzeränderungen zu übermitteln! </li></ul><br><p><img src="https://habrastorage.org/webt/9u/mz/rv/9umzrvvko1xir-vv8gsiism21ns.gif"></p><br><h3 id="lets-code">  Lassen Sie uns codieren </h3><br><h4 id="uiux">  UI / UX </h4><br><p>  Wir haben bereits in dieser Reihe von Blog-Beiträgen viel über die Benutzeroberfläche / UX gesprochen.  Wie Sie bereits verstanden haben, ist dies ein wichtiges Thema für mich.  Eine gute UX kann am Ende des Tages einen großen Unterschied machen, sodass der Endbenutzer seine Leistung steigern und die Gesamtfehler reduzieren kann, die er machen kann. </p><br><blockquote>  Deshalb sollten Sie dem Benutzer immer und immer Feedback geben.  Klares, intuitives und gut gemachtes Feedback </blockquote><p>  Nehmen Sie zum Beispiel diesen Bildschirm: </p><br><p><img src="https://habrastorage.org/webt/iq/tk/kf/iqtkkfqoi-lapmrk0aume16pxcq.png"></p><br><p>  Warum ist die Schaltfläche Speichern deaktiviert?  Warum kann der Benutzer die Aufgabe nicht ausführen? </p><br><p>  Eine gute UX gibt dem Benutzer ein klares Feedback.  Sie sollten Ihnen immer folgende Fragen stellen: </p><br><ul><li>  Ist dem Benutzer bekannt, dass ihm einige erforderliche Informationen fehlen? </li><li>  Kann der Benutzer verstehen, welche Informationen fehlen oder ungültige Werte haben? </li><li>  Ich helfe dem Benutzer, diese Fehler zu beheben? </li><li>  Wenn der Benutzer den Fehler behoben hat, gebe ich ihm das Feedback korrekt zurück (grüne Markierung, aktivieren Sie die Schaltfläche Speichern). </li></ul><br><p>  Jetzt weiß der Benutzer, was er tun soll.  Was passiert, wenn er den richtigen neuen Notenwert eingegeben und auf die Schaltfläche „Speichern“ geklickt hat? </p><br><ul><li>  Wir prüfen, ob der Benutzer einige Änderungen übermittelt hat (geänderte Werte für das Modell).  Wenn es keine Änderungen gibt, benachrichtigen wir nur den Benutzer, andernfalls behalten wir unsere Aufzählungsliste der zu erledigenden Aufgaben bei </li><li>  Setzen Sie den Dialog auf Besetzt </li><li>  Bitten Sie das Framework, alle Änderungen mit submitChanges bereitzustellen </li><li>  Hören Sie sich die Rückrufe bei Erfolg oder Fehler an </li><li>  Geben Sie dem Benutzer visuelles Feedback mit einer OK- oder Fehlermeldung </li><li>  Aktualisieren Sie die Tabelle mit den neuen Werten (automatisch von SAPUI5 erstellt). </li></ul><br><h4 id="user-validation">  Benutzerüberprüfung </h4><br><p>  Es gibt viele Möglichkeiten, Ihrem Feld eine Benutzerüberprüfung hinzuzufügen.  In unserem einfachen Beispiel wollte ich einen einfachen Anwendungsfall implementieren, um nur zu überprüfen, ob das Feld Notiz ausgefüllt wurde oder nicht.  Wenn das Feld Notiz leer ist, sollten Sie die Schaltfläche Speichern deaktivieren und einen Fehler auslösen, der das Feld Notiz hervorhebt und das Problem erklärt. </p><br><p>  Dazu müssen wir das Ereignis <em>liveChange</em> (dieses Ereignis wird jedes Mal ausgelöst, wenn ein Benutzer den Wert ändert) im Feld Note Input abhören und es auf unserem Controller wie <em>folgt</em> implementieren </p><br><pre><code class="javascript hljs">validateNote: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">oEvent</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> oResourceBundle = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getView().getModel(<span class="hljs-string"><span class="hljs-string">"i18n"</span></span>).getResourceBundle(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sValue = oEvent.getParameter(<span class="hljs-string"><span class="hljs-string">"value"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> oSource = oEvent.getSource(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( sValue &amp;&amp; sValue.trim().length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ) { oSource.setValueState(ValueState.Success); oSource.setValueStateText(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { oSource.setValueState(ValueState.Error); oSource.setValueStateText(oResourceBundle.getText(<span class="hljs-string"><span class="hljs-string">"errorEmptyNote"</span></span>)); } }</code> </pre> <br><h4 id="update-odata-model-record">  Aktualisieren Sie den OData-Modelldatensatz </h4><br><p>  Hier kommt der Kern unserer Übung.  Wenn der Benutzer auf die Schaltfläche Speichern klickt, führen wir eine Methode auf unserer Controllerseite aus. </p><br><pre> <code class="javascript hljs">onSalesOrderItemDialogSave: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">oEvent</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> controller = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> oResourceBundle = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getView().getModel(<span class="hljs-string"><span class="hljs-string">"i18n"</span></span>).getResourceBundle(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bCompact = !!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getView().$().closest(<span class="hljs-string"><span class="hljs-string">".sapUiSizeCompact"</span></span>).length; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> oModel = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getView().getModel(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( oModel.hasPendingChanges() ) { controller._oEditDialog.setBusy(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); oModel.submitChanges({ <span class="hljs-attr"><span class="hljs-attr">success</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">oData</span></span></span><span class="hljs-function">) </span></span>{ MessageBox.success( oResourceBundle.getText(<span class="hljs-string"><span class="hljs-string">"saveSaleItemSuccess"</span></span>), { <span class="hljs-attr"><span class="hljs-attr">styleClass</span></span>: bCompact ? <span class="hljs-string"><span class="hljs-string">"sapUiSizeCompact"</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span> }); controller._oEditDialog.setBusy(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); controller._oEditDialog.close(); }, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">oError</span></span></span><span class="hljs-function">) </span></span>{ MessageBox.error( oResourceBundle.getText(<span class="hljs-string"><span class="hljs-string">"saveSaleItemError"</span></span>), { <span class="hljs-attr"><span class="hljs-attr">styleClass</span></span>: bCompact ? <span class="hljs-string"><span class="hljs-string">"sapUiSizeCompact"</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span> }); controller._oEditDialog.setBusy(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); controller._oEditDialog.close(); } }); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { MessageBox.success( oResourceBundle.getText(<span class="hljs-string"><span class="hljs-string">"saveSaleItemNoChanges"</span></span>), { <span class="hljs-attr"><span class="hljs-attr">styleClass</span></span>: bCompact ? <span class="hljs-string"><span class="hljs-string">"sapUiSizeCompact"</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span> }); controller._oEditDialog.close(); } }</code> </pre> <br><p>  Der Code ist ziemlich einfach und wir müssen nicht zu viele Parameter angeben.  Das Einzige, <em>woran Sie sich</em> erinnern sollten, ist, die <em>submitChanges</em> nur auszuführen, wenn das Modell einige Änderungen zu erledigen hat. Andernfalls befindet sich Ihr Dialog unendlich im <em>Besetztzustand,</em> da der Erfolgs- / Fehlerrückruf (ich denke für einen Framework-Fehler) nicht aufgerufen wird. </p><br><h3 id="conclusion-and-whats-next">  Fazit und wie geht es weiter? </h3><br><p>  Wenn Sie das Endergebnis überprüfen möchten, können Sie direkt zum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">step_5-Zweig unseres GitHub-Projekts gehen</a> . </p><br><p>  Der nächste Teil wird meiner Meinung nach den Test behandeln, aber ich denke, dass ich eine kleine Pause von dieser Serie einlegen werde, weil ich einige wichtige Dinge wie SplitApp vs FlexibleColumnLayout behandeln möchte;) </p><br><p>  Aber keine Panik, wir reden nur über ein paar Wochen!  Sie haben viele Übungen zu beenden! </p><br><h3 id="feedback-needed">  Feedback erforderlich </h3><br><p>  Was denkst du über diese Serie?  Möchten Sie sich stärker auf einen bestimmten SAPUI5-Aspekt konzentrieren? </p><br><p>  Schreiben Sie es in den Kommentarbereich!  Viel Spaß beim Codieren an alle! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de439944/">https://habr.com/ru/post/de439944/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de439934/index.html">Geschäftsprozesse. Extrahieren Sie ein BPMN-Modell aus einem Dokument. Teil 1</a></li>
<li><a href="../de439936/index.html">3D-Technologie für die Gießerei: So erstellen Sie in einer Woche eine Form für einen Guss</a></li>
<li><a href="../de439938/index.html">Was zu nennen ist: Datenschutzrichtlinie und Datenschutzrichtlinie</a></li>
<li><a href="../de439940/index.html">Teamlead Conf Msk 2019: Ergebnisse der Anwendungskampagne, Berichte, Überlegungen</a></li>
<li><a href="../de439942/index.html">Docker: Was jeder .NET-Entwickler wissen muss</a></li>
<li><a href="../de439946/index.html">Warum haben wir uns für Electron entschieden?</a></li>
<li><a href="../de439948/index.html">Intel SVT-AV1: Open Source AV1-Encoder für hohe Beanspruchung</a></li>
<li><a href="../de439950/index.html">3. Turing-Test: Teilnahmebedingungen und Preise für die Gewinner</a></li>
<li><a href="../de439952/index.html">Hosten von Node.js https-Server mit automatisch aktualisiertem SSL in der Cloud und wie ich den Entwicklungszyklus einrichte (+ git, reagieren)</a></li>
<li><a href="../de439958/index.html">CodeFest X 30. bis 31. März. Zukünftiger Abschnitt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>