<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏕️ 👨🏿 🍮 Holivarny Geschichte über Linter 💘 🔥 🔲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir alle schreiben Code. Viel Code. Natürlich gibt es Fehler. Manchmal ist es nur ein krummer Code, und manchmal ist der Preis eines Fehlers ein explo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Holivarny Geschichte über Linter</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/433480/">  Wir alle schreiben Code.  Viel Code.  Natürlich gibt es Fehler.  Manchmal ist es nur ein krummer Code, und manchmal ist der Preis eines Fehlers ein explodiertes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Raumschiff</a> .  Natürlich macht niemand absichtliche Pfosten, jeder versucht, die Qualität nach besten Kräften zu überwachen, aber ohne statische Analysewerkzeuge ist es kaum möglich, sicher zu sein, dass alles perfekt ist. <br><br>  Linters helfen dabei, Code in einen einzigen Stil zu bringen und Fehler zu vermeiden.  Richtig, nur wenn Sie bereit sind zu leiden und am Ende „pylint: disable“ nicht entlassen, nur um es hinter sich zu lassen.  Was ein Linter sein sollte und warum Pylint das nicht kann, kennt Nikita <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Sobolevn</a> , der Linters so sehr versteht und liebt, dass er sogar seine Firma nannte, um sie nicht zu verärgern - wemake.services. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/56f/5cb/946/56f5cb9466bea0d6fd71b319f5165c2a.png" alt="Bild"><br><br>  Unten finden Sie die Textversion des Berichts über <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Moscow Python Conf ++</a> über Linters, wie man sie richtig macht und wie man sie nicht macht.  Die Präsentation hatte viel Interaktivität, Online und Kommunikation mit dem Publikum.  Der Redner führte unterwegs Umfragen durch und versuchte, das Publikum zu überzeugen: Er betrachtete den Trend und versuchte wie in der Debatte, das Verhältnis auszugleichen und die öffentliche Meinung zu ändern.  Ein Teil der Umfragen wurde entschlüsselt, aber nicht alle. Daher wird ein Video angehängt, um das Bild zu vervollständigen. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/7IVCOzL41Lk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h2>  Warum brauchen wir Linters? <br></h2><br>  Die wichtigste Aufgabe von linter ist es <strong>, den Code einheitlich zu machen</strong> .  Es gibt viele Möglichkeiten, dasselbe in Python zu schreiben: Setzen Sie hier oder da ein Komma, vergessen Sie, die Klammern zu schließen, oder vergessen Sie nicht.  Wenn Leute lange Zeit Code schreiben, wird es wie ein Patchwork-Quilt aus unterschiedlichen Teilen, die zu unterschiedlichen Zeiten genäht werden.  Es ist unangenehm, mit einer solchen Decke zu arbeiten, und es wird davon abgeraten, den Code zu lesen, was sehr schlecht ist. <br><br>  <strong>Linters erleichtern das Leben bei einer Überprüfung</strong> .  Ich komme zur Codeüberprüfung und denke: „Ich möchte das nicht tun!  Jetzt wird es zusätzliche Räume und anderen Unsinn geben! “  Ich möchte, dass jemand anderes guten Code vorbereitet, und danach werde ich die großartigen konzeptionellen Dinge zu schätzen wissen. <br><br>  Manchmal schaue ich auf den Code und denke, dass alles in Ordnung ist, und dann sehe ich in einigen Funktionen zu viele Variablen oder einen Fehler, auf den ich nicht geachtet habe.  Die Automatisierung würde diesen Fehler finden, aber ich habe nachgesehen.  Um nicht in solche Situationen zu geraten - ich benutze den <strong>Linter</strong> - <strong>findet er alles, was verborgen und schwer zu finden ist.</strong> <br><br><h2>  Was sind Linters? </h2><br>  <strong>Die einfachsten überprüfen nur den Stil</strong> , zum Beispiel <strong>Flake8</strong> .  Zum Teil auch Schwarz, sondern ein Autoformer-Linter.  <strong>Linters testen die Semantik schwieriger</strong> und nicht nur die Stilistik: Was Sie tun, warum und schlagen Sie auf die Hände, wenn Sie mit Fehlern schreiben.  Ein gutes Beispiel ist <strong>Pylint</strong> , das wir alle kennen, benutzen und lieben.  Ich nenne diese Linters - <strong>Best Practices</strong> .  Der dritte Typ ist die <strong>Typprüfung</strong> . Diese Linter sind etwas abseits.  Die Typprüfung in Python ist neu und wird jetzt von zwei konkurrierenden Plattformen durchgeführt: <strong>Mypy</strong> und <strong>Pyre</strong> . <br><br><h2>  Wie benutzt man Linter? </h2><br>  Ich behaupte nicht, dass Linter ein Allheilmittel und ein Ersatz für alles ist.  Es ist nicht so.  Linter - der erste Schritt der Pyramide, mit dem der Code in Produktion geht. <br><br>  Die Pyramide besteht aus drei Schritten: <br><br><ul><li>  <strong>Linter starten</strong> .  Es ist sehr schnell und benötigt nur den Quellcode - keine Infrastruktur, keine Einstellungen.  Check: Der erste <strong>Sanity Check wurde</strong> bestanden - alles ist in Ordnung, wir arbeiten daran. </li><li>  <strong>Testphase</strong> .  Dieser Vorgang ist aufgrund von Nicht-Code-Fehlern komplizierter und länger.  Wir benötigen bereits die korrekte und vollständige Einrichtung der gesamten Anwendung. </li><li>  <strong>Bühnenrückblick</strong> . </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/77c/f40/e1c/77cf40e1cbfb54f312e98c7af63ac9d0.png"><br><br>  <b>Dies sind die notwendigen Schritte,</b> damit der Code in Produktion geht.  Wenn Sie keinen Schritt durchlaufen haben, etwas vergessen haben oder der Prüfer sagte, dass es nicht funktionieren würde, wird die Inschrift angezeigt: Fehlgeschlagen - der fehlerhafte Code wird nicht produziert. <br><br><h3>  Verwenden Sie bei der Arbeit einen Linter? </h3><br>  Wenn Sie Entwickler aus einem harten Unternehmen, in dem sie 7 Tage die Woche arbeiten, fragen, ob sie einen Linter verwenden, stellt sich heraus, dass mindestens ein Drittel von ihnen sehr streng Linters verwendet: <strong>CI fällt ab, Überprüfungen sind streng</strong> .  Der Rest wendet Linter ungefähr gleichermaßen <strong>an, um den Stil zu überprüfen</strong> , <strong>niemals</strong> als <strong>Berichtssystem</strong> : Sie starten den Linter, generieren einen Bericht und sehen, wie schlecht alles ist.  Linters werden verwendet, und das ist gut so.  In unserem Unternehmen wurde alles sehr hart gebaut: harte Verknüpfung, viele Überprüfungen, doppelte Codeüberprüfung. <br><br><h3>  Codeüberprüfung <br></h3><br>  Probleme treten gerade in diesem Stadium auf.  Dies ist der oberste und schwierigste Schritt der Pyramide: Die Codeüberprüfung kann nicht automatisiert werden und führt nach Möglichkeit zur Automatisierung des Code-Schreibens.  Dann werden die Programmierer nicht benötigt. <br><br>  Standardmäßig sieht der Vorgang folgendermaßen aus: Der Code wird überprüft, ich finde Fehler und möchte sie nicht mehr erstellen.  Ich habe zum Beispiel gesehen, dass der Entwickler BaseException abgefangen hat: „Tun Sie das nicht.  Bitte nicht fangen! "  Nach 10 Tagen das Gleiche.  Ich erinnere dich noch einmal: <br><br>  - <em>BaseException wird nicht abgefangen.</em> <br>  " <em>Gut, ich verstehe."</em> <br><br>  Ein Jahr vergeht - der gleiche Fehler.  Ein neuer Mann kommt - der gleiche Fehler.  Ich denke - wie können wir alles automatisieren, damit die Situation nicht noch einmal passiert und nur in den Sinn kommt: „ <strong>Lassen Sie uns unseren Linter zertrümmern?</strong>  »Lassen Sie uns ein offenes Paket erstellen, alle Regeln, die wir in der Arbeit verwenden, dort ablegen und die Regelprüfung automatisieren, damit wir nicht jedes Mal von Hand schreiben.  Wir automatisieren alles gut und sofort! <br><br>  Natürlich kann man sagen: „Es <strong>gibt bereits fertige Linters,</strong> sie funktionieren, jeder benutzt sie - warum machen sie ihre eigenen?“ Und Sie werden absolut Recht haben, denn es gibt wirklich Linters.  Mal sehen, welche und was sie tun. <br><br><h3>  Pylint <br></h3><br>  Auf der Überschrift " <strong>Warum nicht Pylint?"</strong>  "Ich habe diese Frage oft gehört.  Ich werde ihm leiser antworten.  Pylint ist ein großartiges Rockstar-Tool für Python-Code, bietet jedoch Funktionen, die ich in meinem Linter nicht sehen möchte. <br><br>  <strong>Es mischt alles zusammen: Stilprüfungen, Best Practices und Typprüfungen</strong> .  Die Pylint-Typprüfung ist unterentwickelt, da keine Typinformationen vorhanden sind: Sie versucht, sie irgendwie anzuzeigen, funktioniert jedoch nicht sehr gut.  Daher kann ich häufig, wenn ich <code>model_name.some_property</code> auf Django schreibe, den Fehler sehen: "Entschuldigung, es gibt keine solche Eigenschaft - Sie können sie nicht verwenden!"  Ich erinnere mich, dass es ein Plugin gibt, ich installiere es, dann benutze ich Sellerie, es verursacht auch Probleme, ich installiere das Plugin für Sellerie, benutze eine andere magische Bibliothek und als Ergebnis schreibe ich einfach überall: "pylint: disable" ... das ist es nicht was ich von linter bekommen will. <br><br>  Eine weitere Funktion, die dem Benutzer verborgen bleibt <strong>,</strong> ist, <strong>dass Pylint eine eigene Implementierung des abstrakten Syntaxbaums in Python hat</strong> .  So sieht der Code aus, wenn Sie ihn analysieren und Informationen über den Baum der Knoten abrufen, aus denen der Code besteht.  Ich vertraue meinen eigenen Implementierungen nicht wirklich, weil sie immer falsch sind. <br><br>  Neben Pylint gibt es noch andere Linters, die ihre Arbeit erledigen. <br><br><h3>  Sonarquube <br></h3><br>  Ein wunderbares, aber separates Tool, das irgendwo in der Nähe Ihres Projekts lebt. <br><br><ul><li>  <strong>SonarQube kann nicht oft ausgeführt werden</strong> : Es muss irgendwo bereitgestellt, überwacht, überwacht und konfiguriert werden. </li><li>  Es ist <strong>in Java geschrieben</strong> .  Wenn Sie Ihren Linter für Python reparieren möchten, schreiben Sie Code in Java.  Ich denke, dass dies konzeptionell falsch ist - ein Entwickler, der in Python schreiben kann, sollte in der Lage sein, Code zum Testen von Python zu schreiben. </li></ul><br>  Das Unternehmen, das SonarQube entwickelt, befasst sich speziell mit dem Konzept der Produktentwicklung.  Dies kann ein Problem sein. <br><br>  Der Vorteil von SonarQube ist, dass es sehr coole Überprüfungen gibt, die Komplexität, mögliche versteckte Fehler und Fehler anzeigen.  Ich mag die Schecks, ich würde sie verlassen und die Plattform wechseln. <br><br><h3>  Flake8 <br></h3><br>  Ein wunderbarer Linter ist sehr einfach, aber mit einem Problem: Es <strong>gibt nur wenige Regeln,</strong> nach denen überprüft wird, wie gut der Code geschrieben ist.  Gleichzeitig hat Flake8 viele sehr einfache Plugins: Das minimale Plugin besteht aus 2 Methoden, die implementiert werden müssen.  Ich dachte - nehmen wir Flake8 als Basis und schreiben Plugins, aber mit unserem Verständnis der Vorteile für das Unternehmen.  Und so haben wir es gemacht. <br><br><h3>  Der strengste Linter der Welt <br></h3><br>  Wir haben ein Tool erstellt, in dem wir alles gesammelt haben, was wir für Python für richtig halten, und das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong>wemake-python-styleguide heißt</strong></a> .  Das Plugin wurde öffentlich veröffentlicht, da ich glaube, dass <strong>Open Source by Default eine gute Praxis ist</strong> .  Ich bin zutiefst davon überzeugt, dass viele Tools davon profitieren werden, wenn sie auf Open Source hochgeladen werden.  Für unser Instrument haben wir uns den Slogan <strong>ausgedacht</strong> : <strong>"Der strengste Linter der Welt!"</strong> <br><br><blockquote>  Das Schlüsselwort in unserem Linter ist streng, was Schmerz und Leiden bedeutet. </blockquote><br>  Wenn Sie den Linter verwenden und Sie dadurch nicht leiden, dass Sie Ihren Kopf umklammern: "Warum magst du ihn nicht, verdammt noch mal?", Dann ist dies ein schlechter Linter.  Es überspringt Fehler, überwacht die Qualität des Codes nicht ausreichend und wir brauchen ihn nicht.  Wir brauchen die strengsten der Welt, die viel kontrollieren.  Jetzt haben wir ungefähr <strong>250 verschiedene Tests in beiden Kategorien</strong> : Stil- und Best Practices, jedoch ohne Typprüfung.  Mypy ist damit beschäftigt, wir kümmern uns in keiner Weise um ihn. <br><br>  Unser Linter geht <strong>keine Kompromisse ein</strong> .  Wir haben keine Regeln aus der Kategorie "Ich würde das nicht wollen, aber wenn du es wirklich willst, dann kannst du es."  Nein, wir sprechen immer hart - wir tun es nicht, weil es schlecht ist.  Dann kommen die Leute und sagen: „Es gibt 2,5 Anwendungsfälle, in denen dies grundsätzlich möglich ist!“.  Wenn es solche Fälle gibt, schreiben Sie deutlich, dass diese Zeile für den Linter zulässig ist, um sie zu ignorieren, aber erklären Sie, warum.  Es sollte ein Kommentar sein, warum Sie eine seltsame Übung zugelassen haben und warum Sie dies tun.  Dieser Ansatz ist auch nützlich, um Code zu dokumentieren. <br><br>  Der strengste Linter <strong>erfordert keine Einstellungen (WIP)</strong> .  Wir haben noch Einstellungen, aber wir möchten sie loswerden: Mit der Freiheit wird der Benutzer sicher konfigurieren, dass der Linter nicht richtig funktioniert. <br><br><blockquote>  Ein gutes Werkzeug benötigt keine Einstellungen - es hat gute Standardwerte. </blockquote><br>  Mit diesem Ansatz ist der Code konsistent und funktioniert zumindest theoretisch für alle gleich.  Wir arbeiten noch daran, und obwohl es Einstellungen gibt, können Sie unser Tool verwenden und es selbst anpassen. <br><br><h2>  Von wem sind wir abhängig? </h2><br>  Aus einer Vielzahl von Werkzeugen. <br><br><ul><li>  <strong>Flake8</strong> . </li><li>  <strong>Eradicate</strong> ist ein cooles Plugin, das auskommentierte Fragmente im Code findet und Sie dazu bringt, sie zu löschen, da das Speichern von totem Code in einem Projekt schlecht ist.  Das dürfen wir nicht. </li><li>  <strong>Isort</strong> ist ein Tool, das Sie dazu zwingt, Importe korrekt zu sortieren: Einreihen, schöne Anführungszeichen. </li><li>  <strong>Bandit</strong> ist ein großartiges Tool zur statischen Überprüfung der Codesicherheit.  Es findet kabelgebundene Passwörter, die ungeschickte Verwendung von <code>assert</code> im Code, ruft <code>Popen</code> , <code>sys.exit</code> und sagt, dass all dies nicht verwendet werden kann, aber wenn Sie möchten, werden Sie aufgefordert, den Grund zu schreiben. </li><li>  Und mehr als <strong>20 Plugins</strong> , die Klammern, Anführungszeichen und Kommas überprüfen. </li></ul><br><h2>  Was überprüfen wir? </h2><br>  Es gibt 4 Gruppen von Regeln, die wir verwenden und durchsetzen. <br><br>  <strong>Komplexität</strong> ist das größte Problem.  Wir wissen nicht, was Komplexität ist, und wir sehen sie nicht im Code.  Wir schauen uns den Code an, mit dem wir jeden Tag arbeiten, und es scheint nicht kompliziert zu sein - nehmen Sie ihn, lesen Sie ihn, alles funktioniert.  Es ist nicht so.  Einfacher Code ist ein vertrauter Code.  Komplexität hat klare Kriterien, die wir testen.  Über die Kriterien selbst - später.  Wenn der Code die Kriterien verletzt, sagen wir: "Der Code ist komplex, schreiben Sie neu!" <br><br>  <strong>Namen</strong> für Variablen sind ein ungelöstes Programmierproblem.  Wer wann und in welchem ​​Kontext liest, ist unklar.  Wir versuchen, die Namen so konsistent und verständlich wie möglich zu machen, aber obwohl wir es versuchen, ist das Problem noch nicht vollständig gelöst. <br><br>  Aus <strong>Gründen der Konsistenz</strong> haben wir eine einfache Regel: Schreiben Sie überall dasselbe.  Wenn es einen genehmigten Ansatz gibt, verwenden Sie ihn überall.  Es spielt keine Rolle, ob Sie es mögen oder nicht, Konsistenz ist wichtiger. <br><br>  Wir versuchen, nur die <strong>Best Practices zu verwenden.</strong>  Wenn wir wissen, dass einige Praktiken nicht sehr gut sind, verbieten wir ihre Verwendung.  Wenn der Entwickler verbotene Praktiken anwenden möchte, erwarten wir von ihm Argumente: Warum und warum?  Vielleicht wird während des Beschreibungsprozesses ein Verständnis dafür entstehen, warum es schlecht ist. <br><br><h3>  Was ist Komplexität? <br></h3><br>  Die Komplexität verfügt über bestimmte Metriken, anhand derer Sie feststellen können, ob es schwierig ist oder nicht.  Es gibt viele davon. <br><br>  Zyklomatische Komplexität - jedermanns beliebteste zyklomatische Komplexität.  Es findet im Code eine große Anzahl verschachtelter, <code>if</code> auch <code>for</code> andere Strukturen, und zeigt zu viel Verzweigung des Codes und Schwierigkeiten beim Lesen an.  Mit dem eingebetteten Code ist alles schlecht: Sie lesen, lesen, lesen - gingen zurück, lesen, lesen, lesen - sprangen auf und gingen dann in einen anderen Zyklus.  Es ist unmöglich, einen solchen Code sicher von oben nach unten zu übergeben. <br><br>  <strong>Argumente, Anweisungen und Rückgaben.</strong>  Dies sind quantitative Metriken: Wie viele Argumente befinden sich in der Funktion oder in der Methode, wie viele befinden sich im Hauptteil dieser Funktion oder in der Anweisung und der Rückgabemethode. <br><br>  <strong>Kohäsion und Kopplung</strong> sind beliebte OOP-Metriken.  <strong>Der Zusammenhalt</strong> zeigt die Verbundenheit der Klasse im Inneren.  Zum Beispiel gibt es eine Klasse, in der Sie alle Methoden und Eigenschaften verwenden - alles, was Sie deklariert haben.  Dies ist eine gute Klasse mit hoher Konnektivität im Inneren.  <strong>Die Kopplung</strong> gibt an, wie stark die verschiedenen Teile des Systems miteinander verbunden sind: Module und Klassen.  Wir wollen maximale Konnektivität innerhalb der Klasse und minimale Konnektivität außerhalb erreichen.  Dann ist das System leicht zu warten und funktioniert gut. <br><br>  <strong>Jones Complexity</strong> - Ich habe diese Metrik ausgeliehen, aber nur, weil es eine Bombe ist!  Die Jones-Komplexität bestimmt die Komplexität einer Linie - je komplexer die Linie ist, desto schwieriger ist es, sie zu verstehen, da das menschliche Kurzzeitgedächtnis nicht mehr als 5-9 Objekte gleichzeitig verarbeiten kann.  Dies ist die sogenannte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Miller-Brieftasche</a> . <br><br>  Wir betrachten diese wichtigen Metriken und einige andere, die viel größer sind, und bestimmen, ob der Code geeignet ist oder nicht.  <strong>Komplexität ist nach</strong> unserem Verständnis <strong>ein Wasserfall</strong> . <br><br><h3>  Wasserfall Schwierigkeit <br></h3><br>  Die Schwierigkeit beginnt mit der Tatsache, dass wir die Zeile geschrieben haben und sie immer noch gut ist.  Aber dann kommt das Geschäft und sagt, dass sich die Preise verdoppelt haben und wir mit 2 multiplizieren. Zu diesem Zeitpunkt wird Jones Complexity verrückt und berichtet, dass die Linie jetzt zu kompliziert ist - es gibt zu viel Logik. <br><br>  Nun, wir starten eine neue Variable und der Funktionskomplexitätsanalysator sagt: <br><br>  - <em>Nein, das ist nicht so - jetzt gibt es zu viele Variablen in der Funktion.</em> <br><br>  Ich werde eine neue <strong>Methode</strong> erstellen und ihr Argumente übergeben.  Wenn Sie nun die Anzahl der Funktionsargumente oder die Anzahl der Methoden innerhalb der <strong>Klasse</strong> überprüfen, ist dies ebenfalls unmöglich - die Klasse ist zu komplex und muss in zwei Teile unterteilt werden.  Absturz durch Hervorheben einer anderen Klasse.  Jetzt gibt es mehr Klassen und alles ist in Ordnung. Wenn Sie jedoch die Komplexität des <strong>Moduls</strong> überprüfen, wird <strong>festgestellt</strong> , dass das Modul jetzt zu komplex ist und überarbeitet werden muss.  Warum ?! <br><br>  Das nennt man Leiden.  Deshalb sage ich, dass ein Linter dich leiden lassen sollte.  Wir haben zunächst in einer Zeile mit 2 multipliziert und schließlich <strong>das gesamte System überarbeitet</strong> .  Das Hinzufügen eines kleinen Codeteils führt zur Umgestaltung ganzer Module, da sich die Komplexität wie ein Wasserfall ausbreitet und alles abdeckt, was möglich ist. <br><br>  <strong>"Need to Refactor"</strong> - Mit diesem Ding können Sie den Code umgestalten.  Sie können sich nicht einfach zurücklehnen: "Ich berühre diesen Code nicht, er scheint zu funktionieren."  Nein, eines Tages werden Sie den Code an einer anderen Stelle ändern, und ein Wasserfall von Komplexität wird das Modul überfluten, das Sie nicht berührt haben, und Sie müssen es umgestalten.  Ich glaube, dass Refactoring gut ist und je mehr es ist, desto stabiler und besser funktioniert Ihr System.  <strong>Und alles andere ist subjektiv!</strong> <br><br>  Sprechen wir jetzt über den Geschmack.  Dies ist ein ganzheitlicher und interaktiver Teil! <br><br><h2>  Holivar <br></h2><br>  Lassen Sie uns unterstützen, Kommentare sind offen.  Lassen Sie mich zunächst daran erinnern, dass Namen ein komplexes und ungelöstes Problem sind.  Sie können darüber streiten, wie eine Variable benannt werden soll, aber wir haben einige Ansätze, die zumindest helfen, keine offensichtlichen Fehler zu machen. <br><br><h3>  Namen <br></h3><br>  Wie gefällt Ihnen: <strong>var, value, item, obj, data, result</strong> ?  Was sind <strong>Daten</strong> ?  Einige Daten.  Was ist das <strong>Ergebnis</strong> ?  Eine Art Ergebnis.  Oft sehe ich die <strong>Ergebnisvariable</strong> und einen Aufruf einer höllischen Methode in einer unverständlichen Klasse - und ich denke: „Was ist dieses Ergebnis?  Warum ist er hier? " <br><br>  Es gibt viele Entwickler, die mir nicht zustimmen und sagen, dass <strong>value</strong> ein ganz normaler Variablenname ist: <br><br>  - <em>Ich benutze immer Schlüssel und Wert!</em> <br>  - <em>Warum nicht Schlüssel und Wert verwenden, aber sagen, dass der Schlüssel der Name und der Wert der Nachname ist?</em>  <em>Warum es unmöglich ist, Vorname und Nachname zu benennen - jetzt gibt es einen Kontext.</em> <br><br>  Normalerweise stimmen die Leute zu, aber sie streiten sich trotzdem.  Dies ist eine sehr ganzheitliche Sache: Mindestens 3 Menschen haben eine Stunde ihres Lebens mit mir verbracht, um mit mir darüber zu streiten. <br><br><h3>  Ist es in Ordnung, Variablen mit einem Buchstaben zu benennen? <br></h3><br>  Zum Beispiel <strong>q</strong> ?  Wir alle kennen den klassischen Fall: <code>for i in some_iterable:</code>  Was bin <strong>ich</strong>  In C ist dies Standard, und alles kommt davon.  Aber in Python Sammlungen und Iteratoren.  Die Sammlungen enthalten Elemente mit Namen - nennen wir sie irgendwie anders. <br><br><blockquote>  Die Hälfte der Entwickler hält das Aufrufen der Variablen i, x, y, z für normal. </blockquote><br>  Ich glaube, dass Sie Namen nicht mit einem Buchstaben benennen können.  Ich möchte mehr Kontext und es ist gut, dass die zweite Hälfte der Entwickler mir zustimmt.  Wenn dies in C aufgrund des historischen Erbes immer noch zulässig ist, ist dies in Python ein sehr großes Problem, und Sie müssen dies nicht tun. <br><br><h3>  Konsistenz <br></h3><br>  Wählen wir einfach einen Weg aus vielen heraus und sagen: "Lass es uns tun."  Ob es gut oder schlecht ist - es spielt keine Rolle mehr - ist einfach konsistent. <br><br>  Wir sprechen nur über Python 3, Legacy wird überhaupt nicht berücksichtigt. <br><br>  Ich habe ein Argument: Wenn wir von etwas erben, sollten wir wissen, von was - es wäre schön, den Namen des Elternteils zu sehen.  Das Lustige ist, dass wir normalerweise den Namen des Elternteils sehen, außer wenn dies ein <strong>Objekt ist</strong> .  Deshalb habe ich mir eine Regel formuliert: Wenn ich eine Klasse schreibe, erbe ich von etwas - ich schreibe immer den Namen des Elternteils.  Es spielt keine Rolle, was es sein wird - Modell, Objekt oder etwas anderes. <br><br>  Wenn Sie die Wahl haben, <code>Class Some(object)</code> oder <code>class Some</code> zu schreiben, werde ich die erste auswählen.  Einerseits zeigt es, dass wir immer klar schreiben, wovon wir erben.  Auf der anderen Seite gibt es keine besondere <strong>Ausführlichkeit</strong> : Wir verlieren nichts durch ein paar zusätzliche Tastenanschläge. <br><br>  Zwei Drittel der Entwickler kennen die zweite Option besser, und ich weiß sogar warum.  Meine Hypothese: Alles nur, weil wir lange von der zweiten Version von Python auf die dritte migriert sind und jetzt zeigen wir, dass wir in der dritten Python schreiben.  Ich weiß nicht, wie die Hypothese richtig ist, aber es scheint mir so. <br><br><h3>  F-Linien sind schrecklich? <br></h3><br>  Antwortoptionen: <br><br><ul><li>  Ja: Sie verlieren den Kontext, fügen Logik in die Vorlage ein und fusseln nicht - (38%). </li><li>  Nein!  Sie sind ein Wunder!  - (62%). </li></ul><br>  Es gibt eine Hypothese, dass F-Linien schrecklich sind.  Sie schieben alles in sie hinein!  f-Zeilen sind nicht dasselbe wie <code>.format</code> , die Unterschiede sind dramatisch.  Wenn wir eine Vorlage deklarieren und dann formatieren, führen wir zwei Aktionen separat aus: Zuerst definieren wir die Vorlage und formatieren sie dann.  Wenn wir eine f-Zeile deklarieren, führen wir zwei Aktionen gleichzeitig aus: Wir deklarieren die Vorlage sofort und formatieren sie im selben Moment. <br><br>  Es gibt zwei Probleme mit F-Linien.  Wir haben eine Vorlage für die F-Linie deklariert und alles funktioniert.  Und dann entscheiden wir uns, die Vorlage 2 in eine Reihe zu verschieben oder in eine andere Funktion zu verschieben - und alles bricht.  <strong>Jetzt gibt es keinen Kontext, in dem wir Zeichenfolgen formatieren konnten</strong> , und wir können sie nicht richtig verarbeiten.  Das zweite große Problem mit F-Linien: Sie ermöglichen es Ihnen, das Schreckliche zu tun - <strong>die Logik in die Vorlage zu stecken</strong> .  Angenommen, es gibt eine Zeile, in die wir einfach den Benutzernamen und das Wort "Hallo" einfügen - das ist normal.  Es gibt nichts besonders Schreckliches, aber dann sehen wir, dass der Benutzername in Großbuchstaben geschrieben wird. Wir beschließen, ihn in eine Titel-Groß- und Kleinschreibung zu übersetzen und direkt in die Vorlage <code>username.title()</code> schreiben.  Anschließend werden Bedingungen, Zyklen und Importe in der Vorlage angezeigt.  Und alle anderen Teile von PHP. <br><br>  All diese Probleme lassen mich sagen, dass <strong>F-Linien ein schlechtes Thema sind</strong> , wir verwenden sie nicht.  Das Lustige ist, dass wir keinen Fall haben, in dem nur F-Linien für uns geeignet sind.  Normalerweise ist jede Formatierung geeignet, aber wir haben <code>.format</code> - alles andere ist unmöglich - weder <code>%</code> noch F-Zeilen.  Die Arbeit von <code>.format</code> ebenfalls fusselig, da Sie darin geschweifte Anführungszeichen setzen und entweder den Namen der Variablen oder ihre Reihenfolge schreiben können. <br><br><blockquote>  Während des Berichts stieg die Anzahl der F-Line-Gegner von 33 auf 38% - dies ist ein kleiner, aber siegreicher Sieg. </blockquote><br><h3>  Die Zahlen <br></h3><br>  Mögen Sie Zahlen wie diese: <code>final_score = 69 * previous result / 3.14</code> .  Dies scheint eine Standard-Codezeile zu sein, aber was ist 69?  Solche Fragen stellen sich oft, wenn ich mir den Code ansehe, den ich vor einiger Zeit geschrieben habe, und der Manager sagt in diesem Moment: <br><br>  - <em>Bitte mit 147 multiplizieren.</em> <br>  - <em>Warum bei 147?</em> <br>  - <em>Wir haben solche Tarife.</em> <br><br>  Ich habe multipliziert und vergessen, oder ich habe lange Zeit einen Wert des Koeffizienten aufgenommen, damit alles funktioniert - und dann habe ich vergessen, wie ich ihn aufgenommen habe und warum.  Es stellt sich heraus, dass wichtige Forschungsarbeiten hinter einer unbenannten Zahl verborgen blieben.  Ich weiß nicht einmal, was diese Nummer ist, aber ich kann sie nur finden, zurückrufen und irgendwie wiederherstellen, indem ich sie später festschreibe. <br><br>  Warum nicht anders machen - alle komplexen Zahlen mit Name und Dokumentation in eine eigene Variable einfügen?  Schreiben Sie beispielsweise für die Zahl 69, dass dies der durchschnittliche Indikator auf dem Markt ist und die Konstante nun einen Namen und einen Kontext hat.  Ich werde einen Kommentar schreiben, dass ich die Konstante an der Stelle einer solchen Studie genommen habe.  Wenn sich die Forschung in Zukunft ändert, werde ich kommen und die Daten aktualisieren. <br><br>  Somit garantieren wir, dass keine magischen Zahlen durch unseren Code gelangen und ihn von innen heraus komplizieren.  Sie überprüfen die Komplexität jeder Zeile und sagen: "Hier ist die Nummer 4766. Was ist das, ich weiß nicht, klären Sie es selbst!"  Dies war eine großartige Entdeckung für mich. <br><br><blockquote>  Als Ergebnis haben wir erkannt, dass wir dies befolgen müssen, und wir verpassen keine magischen Zahlen im Code.  Es ist gut, dass fast 100% unserer Kollegen uns zustimmen und solche Zahlen auch nicht verwenden. </blockquote><br>  Es gibt jedoch Ausnahmen - dies sind Zahlen von –10 bis 10, Zahlen 100, 1000 und dergleichen, einfach weil sie oft gefunden werden und ohne sie schwierig ist.  <strong>Wir sind hart, aber nicht sadistisch</strong> und denken ein wenig nach. <br><br><h3>  Verwenden Sie '@staticmethod'? <br></h3><br>  Lassen Sie uns darüber nachdenken, was <strong>statische Methode ist</strong> .  Haben Sie sich jemals gefragt, warum es in Python ist?  Ich nicht.  Ich hatte einen schönen Pylint, der sagte: <br><br>  - <em>Schau, du benutzt nicht</em> <code>self</code> , <code>cls</code> - <em>mach eine statische Methode!</em> <br>  - <em>Okay, Pylint, ich mache eine statische Methode.</em> <br><br>  Dann brachte ich Anfängern Python bei und sie fragten, was statische Methode ist und warum sie benötigt wird.  Ich kannte die Antwort nicht und dachte, ob es möglich ist, dasselbe mit einer Funktion zu schreiben oder sich selbst nicht in einer regulären Funktion zu verwenden, einfach weil es eine solche Klasse ist und etwas passiert.  Warum brauchen wir ein statisches Methodenkonstrukt? <br><br>  Ich habe die Frage gegoogelt und sie war so tief wie ein Kaninchenbau.  Es gibt viele andere Programmiersprachen, in denen die statische Methode ebenfalls nicht beliebt ist.  Und gut begründet - staticmethod bricht das Objektmodell.  Als Ergebnis wurde mir klar, dass die <strong>statische Methode hier nicht der richtige Ort ist</strong> , und wir haben sie herausgesägt.  Wenn wir nun den StaticMethod Decorator verwenden, sagt der Linter: "Nein, sorry, Refactor!" <br><br>  Die meisten Entwickler sind mit mir nicht einverstanden, aber ungefähr die Hälfte ist immer noch der Meinung, dass es besser ist, reguläre Methoden oder reguläre Funktionen anstelle von statischen Methoden zu schreiben. <br><br><h3>  Logik in __init __. Ru - gut oder schlecht? <br></h3><br>  Das ist mein Lieblingsthema.  Sicherlich, wenn Sie ein neues Paket erstellen und es irgendwie aufrufen - es erzeugt __init __. Ru und Sie fragen sich, was Sie darin einfügen sollen?  Was in __init __. Ru einfügen und was - in Dateien nebeneinander?  Für mich war dies eine nicht triviale Frage, und ich war immer verloren: wahrscheinlich etwas Wichtigstes?  Dann dachte ich - nein, im Gegenteil, ich werde das Wichtigste in den verständlichsten Kontext stellen.  Wenn Sie etwas in __init __. Ru einfügen und dann alles importieren, stellt sich heraus, dass zyklische Importe ebenfalls schlecht sind. <br><br>  Ich habe mir verschiedene populäre Bibliotheken angesehen, ihre __init __. Ru geklettert und festgestellt, dass es im Grunde entweder Müll oder Abwärtskompatibilität gibt.  Für mich stellte sich diese Frage sehr stark, als ich anfing, große Pakete mit vielen Unterpaketen zu erstellen - Sie verlieren sich.           ,   .    Python,  ,   ,   __init__.  ,  90%     . <br><br>   — ,   API,  ,   -  ,  ,   ? ,  ,      .      API   .   ,    __init__.   - : ,  ,   . <br><br>   ,   <code>I_CONTROL_CODE</code> —   .   ,   .    ,  ,  __init__.   —  .     ,    ,    , - ,       . <br><br><h3>  hasattr   ? <br></h3><br>     <strong>hasattr</strong> ?  ,   ,    Python   — .  hasattr  ,         (). <br><br>   ,  ,   hasattr  ,     ,   .       ,   hasattr,   ,      . - ,  Python   -, hasattr      .       ,        .    <strong>getattr</strong>   «  ,  ».          hasattr —  getattr,  <strong>exception</strong> . <br><br>     50  50 — ,        ,        . <br><br><h2>        <br></h2><br>     ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong>layer-linter</strong></a> .   ?      :   ,   ,     ,    .     ,     -    .         - .  Ich kann es nur empfehlen. <br><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong>cohesion</strong></a> .       ,    . Cohesion ,     .      False Positive       ,       — ,   ,  . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong>vulture</strong></a>      Python    . - ,  Python   ,    .      ohesion. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong>Radon</strong></a>      ,   : <strong>Halstead</strong> , <strong>Maintainability Index</strong> ,  . ,       —  . <br><br><h2> Final type <br></h2><br>   <strong>Final-</strong>  Python.     Typing Extensions,        ,    .  ,     - ,      —  ,      .   ,   -  - ,  ?  Nicht nötig.  .  -  —  ,  , , . <br><br><h2> Gratis <br></h2><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a>     ,     . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b90/e6c/e5d/b90e6ce5dc2ef3c00c83e73fa162447e.png"><br><br>       ,     . <br><br>      ,     .   ,   .      ,    Python-   ,   . <br><br><blockquote> ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Moscow Python Conf++</a> ,      .    ,        ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>         Python-. </blockquote><br>       .       .   ,      ,   ,      . <br><br><div class="spoiler"> <b class="spoiler_title">  </b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/2fd/ed2/6fa/2fded26fa11ac61fb98e0b729b6bd0c6.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/01e/18a/d2d/01e18ad2d4184a42079552671a8957d8.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f87/653/af3/f87653af3f7b6c6baca449b3c81b564f.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d1e/5a8/576/d1e5a8576f1a724683a57f2c2861950e.png"><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de433480/">https://habr.com/ru/post/de433480/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de433468/index.html">Fehlerinjektion: Ihr System ist unzuverlässig, wenn Sie nicht versucht haben, es zu beschädigen</a></li>
<li><a href="../de433472/index.html">Unity 2018.3 veröffentlicht</a></li>
<li><a href="../de433474/index.html">Pylint von innen nach außen. Wie macht er das?</a></li>
<li><a href="../de433476/index.html">50 Sellerietöne</a></li>
<li><a href="../de433478/index.html">Warum Django im Tinkoff Magazine ausgewählt wird</a></li>
<li><a href="../de433482/index.html">Django unter dem Mikroskop</a></li>
<li><a href="../de433486/index.html">Was nochmal? Die Wiederbelebung von Nicht-Bank-Debitkarten</a></li>
<li><a href="../de433488/index.html">Christmas Scrum Meetup UPD Broadcast Mitap</a></li>
<li><a href="../de433490/index.html">Creality CR-X 3D-Druckerüberprüfung</a></li>
<li><a href="../de433494/index.html">10 englische Redewendungen, die Sie nie kennen werden</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>