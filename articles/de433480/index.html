<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèïÔ∏è üë®üèø üçÆ Holivarny Geschichte √ºber Linter üíò üî• üî≤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir alle schreiben Code. Viel Code. Nat√ºrlich gibt es Fehler. Manchmal ist es nur ein krummer Code, und manchmal ist der Preis eines Fehlers ein explo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Holivarny Geschichte √ºber Linter</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/433480/">  Wir alle schreiben Code.  Viel Code.  Nat√ºrlich gibt es Fehler.  Manchmal ist es nur ein krummer Code, und manchmal ist der Preis eines Fehlers ein explodiertes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Raumschiff</a> .  Nat√ºrlich macht niemand absichtliche Pfosten, jeder versucht, die Qualit√§t nach besten Kr√§ften zu √ºberwachen, aber ohne statische Analysewerkzeuge ist es kaum m√∂glich, sicher zu sein, dass alles perfekt ist. <br><br>  Linters helfen dabei, Code in einen einzigen Stil zu bringen und Fehler zu vermeiden.  Richtig, nur wenn Sie bereit sind zu leiden und am Ende ‚Äûpylint: disable‚Äú nicht entlassen, nur um es hinter sich zu lassen.  Was ein Linter sein sollte und warum Pylint das nicht kann, kennt Nikita <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Sobolevn</a> , der Linters so sehr versteht und liebt, dass er sogar seine Firma nannte, um sie nicht zu ver√§rgern - wemake.services. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/56f/5cb/946/56f5cb9466bea0d6fd71b319f5165c2a.png" alt="Bild"><br><br>  Unten finden Sie die Textversion des Berichts √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Moscow Python Conf ++</a> √ºber Linters, wie man sie richtig macht und wie man sie nicht macht.  Die Pr√§sentation hatte viel Interaktivit√§t, Online und Kommunikation mit dem Publikum.  Der Redner f√ºhrte unterwegs Umfragen durch und versuchte, das Publikum zu √ºberzeugen: Er betrachtete den Trend und versuchte wie in der Debatte, das Verh√§ltnis auszugleichen und die √∂ffentliche Meinung zu √§ndern.  Ein Teil der Umfragen wurde entschl√ºsselt, aber nicht alle. Daher wird ein Video angeh√§ngt, um das Bild zu vervollst√§ndigen. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/7IVCOzL41Lk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h2>  Warum brauchen wir Linters? <br></h2><br>  Die wichtigste Aufgabe von linter ist es <strong>, den Code einheitlich zu machen</strong> .  Es gibt viele M√∂glichkeiten, dasselbe in Python zu schreiben: Setzen Sie hier oder da ein Komma, vergessen Sie, die Klammern zu schlie√üen, oder vergessen Sie nicht.  Wenn Leute lange Zeit Code schreiben, wird es wie ein Patchwork-Quilt aus unterschiedlichen Teilen, die zu unterschiedlichen Zeiten gen√§ht werden.  Es ist unangenehm, mit einer solchen Decke zu arbeiten, und es wird davon abgeraten, den Code zu lesen, was sehr schlecht ist. <br><br>  <strong>Linters erleichtern das Leben bei einer √úberpr√ºfung</strong> .  Ich komme zur Code√ºberpr√ºfung und denke: ‚ÄûIch m√∂chte das nicht tun!  Jetzt wird es zus√§tzliche R√§ume und anderen Unsinn geben! ‚Äú  Ich m√∂chte, dass jemand anderes guten Code vorbereitet, und danach werde ich die gro√üartigen konzeptionellen Dinge zu sch√§tzen wissen. <br><br>  Manchmal schaue ich auf den Code und denke, dass alles in Ordnung ist, und dann sehe ich in einigen Funktionen zu viele Variablen oder einen Fehler, auf den ich nicht geachtet habe.  Die Automatisierung w√ºrde diesen Fehler finden, aber ich habe nachgesehen.  Um nicht in solche Situationen zu geraten - ich benutze den <strong>Linter</strong> - <strong>findet er alles, was verborgen und schwer zu finden ist.</strong> <br><br><h2>  Was sind Linters? </h2><br>  <strong>Die einfachsten √ºberpr√ºfen nur den Stil</strong> , zum Beispiel <strong>Flake8</strong> .  Zum Teil auch Schwarz, sondern ein Autoformer-Linter.  <strong>Linters testen die Semantik schwieriger</strong> und nicht nur die Stilistik: Was Sie tun, warum und schlagen Sie auf die H√§nde, wenn Sie mit Fehlern schreiben.  Ein gutes Beispiel ist <strong>Pylint</strong> , das wir alle kennen, benutzen und lieben.  Ich nenne diese Linters - <strong>Best Practices</strong> .  Der dritte Typ ist die <strong>Typpr√ºfung</strong> . Diese Linter sind etwas abseits.  Die Typpr√ºfung in Python ist neu und wird jetzt von zwei konkurrierenden Plattformen durchgef√ºhrt: <strong>Mypy</strong> und <strong>Pyre</strong> . <br><br><h2>  Wie benutzt man Linter? </h2><br>  Ich behaupte nicht, dass Linter ein Allheilmittel und ein Ersatz f√ºr alles ist.  Es ist nicht so.  Linter - der erste Schritt der Pyramide, mit dem der Code in Produktion geht. <br><br>  Die Pyramide besteht aus drei Schritten: <br><br><ul><li>  <strong>Linter starten</strong> .  Es ist sehr schnell und ben√∂tigt nur den Quellcode - keine Infrastruktur, keine Einstellungen.  Check: Der erste <strong>Sanity Check wurde</strong> bestanden - alles ist in Ordnung, wir arbeiten daran. </li><li>  <strong>Testphase</strong> .  Dieser Vorgang ist aufgrund von Nicht-Code-Fehlern komplizierter und l√§nger.  Wir ben√∂tigen bereits die korrekte und vollst√§ndige Einrichtung der gesamten Anwendung. </li><li>  <strong>B√ºhnenr√ºckblick</strong> . </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/77c/f40/e1c/77cf40e1cbfb54f312e98c7af63ac9d0.png"><br><br>  <b>Dies sind die notwendigen Schritte,</b> damit der Code in Produktion geht.  Wenn Sie keinen Schritt durchlaufen haben, etwas vergessen haben oder der Pr√ºfer sagte, dass es nicht funktionieren w√ºrde, wird die Inschrift angezeigt: Fehlgeschlagen - der fehlerhafte Code wird nicht produziert. <br><br><h3>  Verwenden Sie bei der Arbeit einen Linter? </h3><br>  Wenn Sie Entwickler aus einem harten Unternehmen, in dem sie 7 Tage die Woche arbeiten, fragen, ob sie einen Linter verwenden, stellt sich heraus, dass mindestens ein Drittel von ihnen sehr streng Linters verwendet: <strong>CI f√§llt ab, √úberpr√ºfungen sind streng</strong> .  Der Rest wendet Linter ungef√§hr gleicherma√üen <strong>an, um den Stil zu √ºberpr√ºfen</strong> , <strong>niemals</strong> als <strong>Berichtssystem</strong> : Sie starten den Linter, generieren einen Bericht und sehen, wie schlecht alles ist.  Linters werden verwendet, und das ist gut so.  In unserem Unternehmen wurde alles sehr hart gebaut: harte Verkn√ºpfung, viele √úberpr√ºfungen, doppelte Code√ºberpr√ºfung. <br><br><h3>  Code√ºberpr√ºfung <br></h3><br>  Probleme treten gerade in diesem Stadium auf.  Dies ist der oberste und schwierigste Schritt der Pyramide: Die Code√ºberpr√ºfung kann nicht automatisiert werden und f√ºhrt nach M√∂glichkeit zur Automatisierung des Code-Schreibens.  Dann werden die Programmierer nicht ben√∂tigt. <br><br>  Standardm√§√üig sieht der Vorgang folgenderma√üen aus: Der Code wird √ºberpr√ºft, ich finde Fehler und m√∂chte sie nicht mehr erstellen.  Ich habe zum Beispiel gesehen, dass der Entwickler BaseException abgefangen hat: ‚ÄûTun Sie das nicht.  Bitte nicht fangen! "  Nach 10 Tagen das Gleiche.  Ich erinnere dich noch einmal: <br><br>  - <em>BaseException wird nicht abgefangen.</em> <br>  " <em>Gut, ich verstehe."</em> <br><br>  Ein Jahr vergeht - der gleiche Fehler.  Ein neuer Mann kommt - der gleiche Fehler.  Ich denke - wie k√∂nnen wir alles automatisieren, damit die Situation nicht noch einmal passiert und nur in den Sinn kommt: ‚Äû <strong>Lassen Sie uns unseren Linter zertr√ºmmern?</strong>  ¬ªLassen Sie uns ein offenes Paket erstellen, alle Regeln, die wir in der Arbeit verwenden, dort ablegen und die Regelpr√ºfung automatisieren, damit wir nicht jedes Mal von Hand schreiben.  Wir automatisieren alles gut und sofort! <br><br>  Nat√ºrlich kann man sagen: ‚ÄûEs <strong>gibt bereits fertige Linters,</strong> sie funktionieren, jeder benutzt sie - warum machen sie ihre eigenen?‚Äú Und Sie werden absolut Recht haben, denn es gibt wirklich Linters.  Mal sehen, welche und was sie tun. <br><br><h3>  Pylint <br></h3><br>  Auf der √úberschrift " <strong>Warum nicht Pylint?"</strong>  "Ich habe diese Frage oft geh√∂rt.  Ich werde ihm leiser antworten.  Pylint ist ein gro√üartiges Rockstar-Tool f√ºr Python-Code, bietet jedoch Funktionen, die ich in meinem Linter nicht sehen m√∂chte. <br><br>  <strong>Es mischt alles zusammen: Stilpr√ºfungen, Best Practices und Typpr√ºfungen</strong> .  Die Pylint-Typpr√ºfung ist unterentwickelt, da keine Typinformationen vorhanden sind: Sie versucht, sie irgendwie anzuzeigen, funktioniert jedoch nicht sehr gut.  Daher kann ich h√§ufig, wenn ich <code>model_name.some_property</code> auf Django schreibe, den Fehler sehen: "Entschuldigung, es gibt keine solche Eigenschaft - Sie k√∂nnen sie nicht verwenden!"  Ich erinnere mich, dass es ein Plugin gibt, ich installiere es, dann benutze ich Sellerie, es verursacht auch Probleme, ich installiere das Plugin f√ºr Sellerie, benutze eine andere magische Bibliothek und als Ergebnis schreibe ich einfach √ºberall: "pylint: disable" ... das ist es nicht was ich von linter bekommen will. <br><br>  Eine weitere Funktion, die dem Benutzer verborgen bleibt <strong>,</strong> ist, <strong>dass Pylint eine eigene Implementierung des abstrakten Syntaxbaums in Python hat</strong> .  So sieht der Code aus, wenn Sie ihn analysieren und Informationen √ºber den Baum der Knoten abrufen, aus denen der Code besteht.  Ich vertraue meinen eigenen Implementierungen nicht wirklich, weil sie immer falsch sind. <br><br>  Neben Pylint gibt es noch andere Linters, die ihre Arbeit erledigen. <br><br><h3>  Sonarquube <br></h3><br>  Ein wunderbares, aber separates Tool, das irgendwo in der N√§he Ihres Projekts lebt. <br><br><ul><li>  <strong>SonarQube kann nicht oft ausgef√ºhrt werden</strong> : Es muss irgendwo bereitgestellt, √ºberwacht, √ºberwacht und konfiguriert werden. </li><li>  Es ist <strong>in Java geschrieben</strong> .  Wenn Sie Ihren Linter f√ºr Python reparieren m√∂chten, schreiben Sie Code in Java.  Ich denke, dass dies konzeptionell falsch ist - ein Entwickler, der in Python schreiben kann, sollte in der Lage sein, Code zum Testen von Python zu schreiben. </li></ul><br>  Das Unternehmen, das SonarQube entwickelt, befasst sich speziell mit dem Konzept der Produktentwicklung.  Dies kann ein Problem sein. <br><br>  Der Vorteil von SonarQube ist, dass es sehr coole √úberpr√ºfungen gibt, die Komplexit√§t, m√∂gliche versteckte Fehler und Fehler anzeigen.  Ich mag die Schecks, ich w√ºrde sie verlassen und die Plattform wechseln. <br><br><h3>  Flake8 <br></h3><br>  Ein wunderbarer Linter ist sehr einfach, aber mit einem Problem: Es <strong>gibt nur wenige Regeln,</strong> nach denen √ºberpr√ºft wird, wie gut der Code geschrieben ist.  Gleichzeitig hat Flake8 viele sehr einfache Plugins: Das minimale Plugin besteht aus 2 Methoden, die implementiert werden m√ºssen.  Ich dachte - nehmen wir Flake8 als Basis und schreiben Plugins, aber mit unserem Verst√§ndnis der Vorteile f√ºr das Unternehmen.  Und so haben wir es gemacht. <br><br><h3>  Der strengste Linter der Welt <br></h3><br>  Wir haben ein Tool erstellt, in dem wir alles gesammelt haben, was wir f√ºr Python f√ºr richtig halten, und das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong>wemake-python-styleguide hei√üt</strong></a> .  Das Plugin wurde √∂ffentlich ver√∂ffentlicht, da ich glaube, dass <strong>Open Source by Default eine gute Praxis ist</strong> .  Ich bin zutiefst davon √ºberzeugt, dass viele Tools davon profitieren werden, wenn sie auf Open Source hochgeladen werden.  F√ºr unser Instrument haben wir uns den Slogan <strong>ausgedacht</strong> : <strong>"Der strengste Linter der Welt!"</strong> <br><br><blockquote>  Das Schl√ºsselwort in unserem Linter ist streng, was Schmerz und Leiden bedeutet. </blockquote><br>  Wenn Sie den Linter verwenden und Sie dadurch nicht leiden, dass Sie Ihren Kopf umklammern: "Warum magst du ihn nicht, verdammt noch mal?", Dann ist dies ein schlechter Linter.  Es √ºberspringt Fehler, √ºberwacht die Qualit√§t des Codes nicht ausreichend und wir brauchen ihn nicht.  Wir brauchen die strengsten der Welt, die viel kontrollieren.  Jetzt haben wir ungef√§hr <strong>250 verschiedene Tests in beiden Kategorien</strong> : Stil- und Best Practices, jedoch ohne Typpr√ºfung.  Mypy ist damit besch√§ftigt, wir k√ºmmern uns in keiner Weise um ihn. <br><br>  Unser Linter geht <strong>keine Kompromisse ein</strong> .  Wir haben keine Regeln aus der Kategorie "Ich w√ºrde das nicht wollen, aber wenn du es wirklich willst, dann kannst du es."  Nein, wir sprechen immer hart - wir tun es nicht, weil es schlecht ist.  Dann kommen die Leute und sagen: ‚ÄûEs gibt 2,5 Anwendungsf√§lle, in denen dies grunds√§tzlich m√∂glich ist!‚Äú.  Wenn es solche F√§lle gibt, schreiben Sie deutlich, dass diese Zeile f√ºr den Linter zul√§ssig ist, um sie zu ignorieren, aber erkl√§ren Sie, warum.  Es sollte ein Kommentar sein, warum Sie eine seltsame √úbung zugelassen haben und warum Sie dies tun.  Dieser Ansatz ist auch n√ºtzlich, um Code zu dokumentieren. <br><br>  Der strengste Linter <strong>erfordert keine Einstellungen (WIP)</strong> .  Wir haben noch Einstellungen, aber wir m√∂chten sie loswerden: Mit der Freiheit wird der Benutzer sicher konfigurieren, dass der Linter nicht richtig funktioniert. <br><br><blockquote>  Ein gutes Werkzeug ben√∂tigt keine Einstellungen - es hat gute Standardwerte. </blockquote><br>  Mit diesem Ansatz ist der Code konsistent und funktioniert zumindest theoretisch f√ºr alle gleich.  Wir arbeiten noch daran, und obwohl es Einstellungen gibt, k√∂nnen Sie unser Tool verwenden und es selbst anpassen. <br><br><h2>  Von wem sind wir abh√§ngig? </h2><br>  Aus einer Vielzahl von Werkzeugen. <br><br><ul><li>  <strong>Flake8</strong> . </li><li>  <strong>Eradicate</strong> ist ein cooles Plugin, das auskommentierte Fragmente im Code findet und Sie dazu bringt, sie zu l√∂schen, da das Speichern von totem Code in einem Projekt schlecht ist.  Das d√ºrfen wir nicht. </li><li>  <strong>Isort</strong> ist ein Tool, das Sie dazu zwingt, Importe korrekt zu sortieren: Einreihen, sch√∂ne Anf√ºhrungszeichen. </li><li>  <strong>Bandit</strong> ist ein gro√üartiges Tool zur statischen √úberpr√ºfung der Codesicherheit.  Es findet kabelgebundene Passw√∂rter, die ungeschickte Verwendung von <code>assert</code> im Code, ruft <code>Popen</code> , <code>sys.exit</code> und sagt, dass all dies nicht verwendet werden kann, aber wenn Sie m√∂chten, werden Sie aufgefordert, den Grund zu schreiben. </li><li>  Und mehr als <strong>20 Plugins</strong> , die Klammern, Anf√ºhrungszeichen und Kommas √ºberpr√ºfen. </li></ul><br><h2>  Was √ºberpr√ºfen wir? </h2><br>  Es gibt 4 Gruppen von Regeln, die wir verwenden und durchsetzen. <br><br>  <strong>Komplexit√§t</strong> ist das gr√∂√üte Problem.  Wir wissen nicht, was Komplexit√§t ist, und wir sehen sie nicht im Code.  Wir schauen uns den Code an, mit dem wir jeden Tag arbeiten, und es scheint nicht kompliziert zu sein - nehmen Sie ihn, lesen Sie ihn, alles funktioniert.  Es ist nicht so.  Einfacher Code ist ein vertrauter Code.  Komplexit√§t hat klare Kriterien, die wir testen.  √úber die Kriterien selbst - sp√§ter.  Wenn der Code die Kriterien verletzt, sagen wir: "Der Code ist komplex, schreiben Sie neu!" <br><br>  <strong>Namen</strong> f√ºr Variablen sind ein ungel√∂stes Programmierproblem.  Wer wann und in welchem ‚Äã‚ÄãKontext liest, ist unklar.  Wir versuchen, die Namen so konsistent und verst√§ndlich wie m√∂glich zu machen, aber obwohl wir es versuchen, ist das Problem noch nicht vollst√§ndig gel√∂st. <br><br>  Aus <strong>Gr√ºnden der Konsistenz</strong> haben wir eine einfache Regel: Schreiben Sie √ºberall dasselbe.  Wenn es einen genehmigten Ansatz gibt, verwenden Sie ihn √ºberall.  Es spielt keine Rolle, ob Sie es m√∂gen oder nicht, Konsistenz ist wichtiger. <br><br>  Wir versuchen, nur die <strong>Best Practices zu verwenden.</strong>  Wenn wir wissen, dass einige Praktiken nicht sehr gut sind, verbieten wir ihre Verwendung.  Wenn der Entwickler verbotene Praktiken anwenden m√∂chte, erwarten wir von ihm Argumente: Warum und warum?  Vielleicht wird w√§hrend des Beschreibungsprozesses ein Verst√§ndnis daf√ºr entstehen, warum es schlecht ist. <br><br><h3>  Was ist Komplexit√§t? <br></h3><br>  Die Komplexit√§t verf√ºgt √ºber bestimmte Metriken, anhand derer Sie feststellen k√∂nnen, ob es schwierig ist oder nicht.  Es gibt viele davon. <br><br>  Zyklomatische Komplexit√§t - jedermanns beliebteste zyklomatische Komplexit√§t.  Es findet im Code eine gro√üe Anzahl verschachtelter, <code>if</code> auch <code>for</code> andere Strukturen, und zeigt zu viel Verzweigung des Codes und Schwierigkeiten beim Lesen an.  Mit dem eingebetteten Code ist alles schlecht: Sie lesen, lesen, lesen - gingen zur√ºck, lesen, lesen, lesen - sprangen auf und gingen dann in einen anderen Zyklus.  Es ist unm√∂glich, einen solchen Code sicher von oben nach unten zu √ºbergeben. <br><br>  <strong>Argumente, Anweisungen und R√ºckgaben.</strong>  Dies sind quantitative Metriken: Wie viele Argumente befinden sich in der Funktion oder in der Methode, wie viele befinden sich im Hauptteil dieser Funktion oder in der Anweisung und der R√ºckgabemethode. <br><br>  <strong>Koh√§sion und Kopplung</strong> sind beliebte OOP-Metriken.  <strong>Der Zusammenhalt</strong> zeigt die Verbundenheit der Klasse im Inneren.  Zum Beispiel gibt es eine Klasse, in der Sie alle Methoden und Eigenschaften verwenden - alles, was Sie deklariert haben.  Dies ist eine gute Klasse mit hoher Konnektivit√§t im Inneren.  <strong>Die Kopplung</strong> gibt an, wie stark die verschiedenen Teile des Systems miteinander verbunden sind: Module und Klassen.  Wir wollen maximale Konnektivit√§t innerhalb der Klasse und minimale Konnektivit√§t au√üerhalb erreichen.  Dann ist das System leicht zu warten und funktioniert gut. <br><br>  <strong>Jones Complexity</strong> - Ich habe diese Metrik ausgeliehen, aber nur, weil es eine Bombe ist!  Die Jones-Komplexit√§t bestimmt die Komplexit√§t einer Linie - je komplexer die Linie ist, desto schwieriger ist es, sie zu verstehen, da das menschliche Kurzzeitged√§chtnis nicht mehr als 5-9 Objekte gleichzeitig verarbeiten kann.  Dies ist die sogenannte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Miller-Brieftasche</a> . <br><br>  Wir betrachten diese wichtigen Metriken und einige andere, die viel gr√∂√üer sind, und bestimmen, ob der Code geeignet ist oder nicht.  <strong>Komplexit√§t ist nach</strong> unserem Verst√§ndnis <strong>ein Wasserfall</strong> . <br><br><h3>  Wasserfall Schwierigkeit <br></h3><br>  Die Schwierigkeit beginnt mit der Tatsache, dass wir die Zeile geschrieben haben und sie immer noch gut ist.  Aber dann kommt das Gesch√§ft und sagt, dass sich die Preise verdoppelt haben und wir mit 2 multiplizieren. Zu diesem Zeitpunkt wird Jones Complexity verr√ºckt und berichtet, dass die Linie jetzt zu kompliziert ist - es gibt zu viel Logik. <br><br>  Nun, wir starten eine neue Variable und der Funktionskomplexit√§tsanalysator sagt: <br><br>  - <em>Nein, das ist nicht so - jetzt gibt es zu viele Variablen in der Funktion.</em> <br><br>  Ich werde eine neue <strong>Methode</strong> erstellen und ihr Argumente √ºbergeben.  Wenn Sie nun die Anzahl der Funktionsargumente oder die Anzahl der Methoden innerhalb der <strong>Klasse</strong> √ºberpr√ºfen, ist dies ebenfalls unm√∂glich - die Klasse ist zu komplex und muss in zwei Teile unterteilt werden.  Absturz durch Hervorheben einer anderen Klasse.  Jetzt gibt es mehr Klassen und alles ist in Ordnung. Wenn Sie jedoch die Komplexit√§t des <strong>Moduls</strong> √ºberpr√ºfen, wird <strong>festgestellt</strong> , dass das Modul jetzt zu komplex ist und √ºberarbeitet werden muss.  Warum ?! <br><br>  Das nennt man Leiden.  Deshalb sage ich, dass ein Linter dich leiden lassen sollte.  Wir haben zun√§chst in einer Zeile mit 2 multipliziert und schlie√ülich <strong>das gesamte System √ºberarbeitet</strong> .  Das Hinzuf√ºgen eines kleinen Codeteils f√ºhrt zur Umgestaltung ganzer Module, da sich die Komplexit√§t wie ein Wasserfall ausbreitet und alles abdeckt, was m√∂glich ist. <br><br>  <strong>"Need to Refactor"</strong> - Mit diesem Ding k√∂nnen Sie den Code umgestalten.  Sie k√∂nnen sich nicht einfach zur√ºcklehnen: "Ich ber√ºhre diesen Code nicht, er scheint zu funktionieren."  Nein, eines Tages werden Sie den Code an einer anderen Stelle √§ndern, und ein Wasserfall von Komplexit√§t wird das Modul √ºberfluten, das Sie nicht ber√ºhrt haben, und Sie m√ºssen es umgestalten.  Ich glaube, dass Refactoring gut ist und je mehr es ist, desto stabiler und besser funktioniert Ihr System.  <strong>Und alles andere ist subjektiv!</strong> <br><br>  Sprechen wir jetzt √ºber den Geschmack.  Dies ist ein ganzheitlicher und interaktiver Teil! <br><br><h2>  Holivar <br></h2><br>  Lassen Sie uns unterst√ºtzen, Kommentare sind offen.  Lassen Sie mich zun√§chst daran erinnern, dass Namen ein komplexes und ungel√∂stes Problem sind.  Sie k√∂nnen dar√ºber streiten, wie eine Variable benannt werden soll, aber wir haben einige Ans√§tze, die zumindest helfen, keine offensichtlichen Fehler zu machen. <br><br><h3>  Namen <br></h3><br>  Wie gef√§llt Ihnen: <strong>var, value, item, obj, data, result</strong> ?  Was sind <strong>Daten</strong> ?  Einige Daten.  Was ist das <strong>Ergebnis</strong> ?  Eine Art Ergebnis.  Oft sehe ich die <strong>Ergebnisvariable</strong> und einen Aufruf einer h√∂llischen Methode in einer unverst√§ndlichen Klasse - und ich denke: ‚ÄûWas ist dieses Ergebnis?  Warum ist er hier? " <br><br>  Es gibt viele Entwickler, die mir nicht zustimmen und sagen, dass <strong>value</strong> ein ganz normaler Variablenname ist: <br><br>  - <em>Ich benutze immer Schl√ºssel und Wert!</em> <br>  - <em>Warum nicht Schl√ºssel und Wert verwenden, aber sagen, dass der Schl√ºssel der Name und der Wert der Nachname ist?</em>  <em>Warum es unm√∂glich ist, Vorname und Nachname zu benennen - jetzt gibt es einen Kontext.</em> <br><br>  Normalerweise stimmen die Leute zu, aber sie streiten sich trotzdem.  Dies ist eine sehr ganzheitliche Sache: Mindestens 3 Menschen haben eine Stunde ihres Lebens mit mir verbracht, um mit mir dar√ºber zu streiten. <br><br><h3>  Ist es in Ordnung, Variablen mit einem Buchstaben zu benennen? <br></h3><br>  Zum Beispiel <strong>q</strong> ?  Wir alle kennen den klassischen Fall: <code>for i in some_iterable:</code>  Was bin <strong>ich</strong>  In C ist dies Standard, und alles kommt davon.  Aber in Python Sammlungen und Iteratoren.  Die Sammlungen enthalten Elemente mit Namen - nennen wir sie irgendwie anders. <br><br><blockquote>  Die H√§lfte der Entwickler h√§lt das Aufrufen der Variablen i, x, y, z f√ºr normal. </blockquote><br>  Ich glaube, dass Sie Namen nicht mit einem Buchstaben benennen k√∂nnen.  Ich m√∂chte mehr Kontext und es ist gut, dass die zweite H√§lfte der Entwickler mir zustimmt.  Wenn dies in C aufgrund des historischen Erbes immer noch zul√§ssig ist, ist dies in Python ein sehr gro√ües Problem, und Sie m√ºssen dies nicht tun. <br><br><h3>  Konsistenz <br></h3><br>  W√§hlen wir einfach einen Weg aus vielen heraus und sagen: "Lass es uns tun."  Ob es gut oder schlecht ist - es spielt keine Rolle mehr - ist einfach konsistent. <br><br>  Wir sprechen nur √ºber Python 3, Legacy wird √ºberhaupt nicht ber√ºcksichtigt. <br><br>  Ich habe ein Argument: Wenn wir von etwas erben, sollten wir wissen, von was - es w√§re sch√∂n, den Namen des Elternteils zu sehen.  Das Lustige ist, dass wir normalerweise den Namen des Elternteils sehen, au√üer wenn dies ein <strong>Objekt ist</strong> .  Deshalb habe ich mir eine Regel formuliert: Wenn ich eine Klasse schreibe, erbe ich von etwas - ich schreibe immer den Namen des Elternteils.  Es spielt keine Rolle, was es sein wird - Modell, Objekt oder etwas anderes. <br><br>  Wenn Sie die Wahl haben, <code>Class Some(object)</code> oder <code>class Some</code> zu schreiben, werde ich die erste ausw√§hlen.  Einerseits zeigt es, dass wir immer klar schreiben, wovon wir erben.  Auf der anderen Seite gibt es keine besondere <strong>Ausf√ºhrlichkeit</strong> : Wir verlieren nichts durch ein paar zus√§tzliche Tastenanschl√§ge. <br><br>  Zwei Drittel der Entwickler kennen die zweite Option besser, und ich wei√ü sogar warum.  Meine Hypothese: Alles nur, weil wir lange von der zweiten Version von Python auf die dritte migriert sind und jetzt zeigen wir, dass wir in der dritten Python schreiben.  Ich wei√ü nicht, wie die Hypothese richtig ist, aber es scheint mir so. <br><br><h3>  F-Linien sind schrecklich? <br></h3><br>  Antwortoptionen: <br><br><ul><li>  Ja: Sie verlieren den Kontext, f√ºgen Logik in die Vorlage ein und fusseln nicht - (38%). </li><li>  Nein!  Sie sind ein Wunder!  - (62%). </li></ul><br>  Es gibt eine Hypothese, dass F-Linien schrecklich sind.  Sie schieben alles in sie hinein!  f-Zeilen sind nicht dasselbe wie <code>.format</code> , die Unterschiede sind dramatisch.  Wenn wir eine Vorlage deklarieren und dann formatieren, f√ºhren wir zwei Aktionen separat aus: Zuerst definieren wir die Vorlage und formatieren sie dann.  Wenn wir eine f-Zeile deklarieren, f√ºhren wir zwei Aktionen gleichzeitig aus: Wir deklarieren die Vorlage sofort und formatieren sie im selben Moment. <br><br>  Es gibt zwei Probleme mit F-Linien.  Wir haben eine Vorlage f√ºr die F-Linie deklariert und alles funktioniert.  Und dann entscheiden wir uns, die Vorlage 2 in eine Reihe zu verschieben oder in eine andere Funktion zu verschieben - und alles bricht.  <strong>Jetzt gibt es keinen Kontext, in dem wir Zeichenfolgen formatieren konnten</strong> , und wir k√∂nnen sie nicht richtig verarbeiten.  Das zweite gro√üe Problem mit F-Linien: Sie erm√∂glichen es Ihnen, das Schreckliche zu tun - <strong>die Logik in die Vorlage zu stecken</strong> .  Angenommen, es gibt eine Zeile, in die wir einfach den Benutzernamen und das Wort "Hallo" einf√ºgen - das ist normal.  Es gibt nichts besonders Schreckliches, aber dann sehen wir, dass der Benutzername in Gro√übuchstaben geschrieben wird. Wir beschlie√üen, ihn in eine Titel-Gro√ü- und Kleinschreibung zu √ºbersetzen und direkt in die Vorlage <code>username.title()</code> schreiben.  Anschlie√üend werden Bedingungen, Zyklen und Importe in der Vorlage angezeigt.  Und alle anderen Teile von PHP. <br><br>  All diese Probleme lassen mich sagen, dass <strong>F-Linien ein schlechtes Thema sind</strong> , wir verwenden sie nicht.  Das Lustige ist, dass wir keinen Fall haben, in dem nur F-Linien f√ºr uns geeignet sind.  Normalerweise ist jede Formatierung geeignet, aber wir haben <code>.format</code> - alles andere ist unm√∂glich - weder <code>%</code> noch F-Zeilen.  Die Arbeit von <code>.format</code> ebenfalls fusselig, da Sie darin geschweifte Anf√ºhrungszeichen setzen und entweder den Namen der Variablen oder ihre Reihenfolge schreiben k√∂nnen. <br><br><blockquote>  W√§hrend des Berichts stieg die Anzahl der F-Line-Gegner von 33 auf 38% - dies ist ein kleiner, aber siegreicher Sieg. </blockquote><br><h3>  Die Zahlen <br></h3><br>  M√∂gen Sie Zahlen wie diese: <code>final_score = 69 * previous result / 3.14</code> .  Dies scheint eine Standard-Codezeile zu sein, aber was ist 69?  Solche Fragen stellen sich oft, wenn ich mir den Code ansehe, den ich vor einiger Zeit geschrieben habe, und der Manager sagt in diesem Moment: <br><br>  - <em>Bitte mit 147 multiplizieren.</em> <br>  - <em>Warum bei 147?</em> <br>  - <em>Wir haben solche Tarife.</em> <br><br>  Ich habe multipliziert und vergessen, oder ich habe lange Zeit einen Wert des Koeffizienten aufgenommen, damit alles funktioniert - und dann habe ich vergessen, wie ich ihn aufgenommen habe und warum.  Es stellt sich heraus, dass wichtige Forschungsarbeiten hinter einer unbenannten Zahl verborgen blieben.  Ich wei√ü nicht einmal, was diese Nummer ist, aber ich kann sie nur finden, zur√ºckrufen und irgendwie wiederherstellen, indem ich sie sp√§ter festschreibe. <br><br>  Warum nicht anders machen - alle komplexen Zahlen mit Name und Dokumentation in eine eigene Variable einf√ºgen?  Schreiben Sie beispielsweise f√ºr die Zahl 69, dass dies der durchschnittliche Indikator auf dem Markt ist und die Konstante nun einen Namen und einen Kontext hat.  Ich werde einen Kommentar schreiben, dass ich die Konstante an der Stelle einer solchen Studie genommen habe.  Wenn sich die Forschung in Zukunft √§ndert, werde ich kommen und die Daten aktualisieren. <br><br>  Somit garantieren wir, dass keine magischen Zahlen durch unseren Code gelangen und ihn von innen heraus komplizieren.  Sie √ºberpr√ºfen die Komplexit√§t jeder Zeile und sagen: "Hier ist die Nummer 4766. Was ist das, ich wei√ü nicht, kl√§ren Sie es selbst!"  Dies war eine gro√üartige Entdeckung f√ºr mich. <br><br><blockquote>  Als Ergebnis haben wir erkannt, dass wir dies befolgen m√ºssen, und wir verpassen keine magischen Zahlen im Code.  Es ist gut, dass fast 100% unserer Kollegen uns zustimmen und solche Zahlen auch nicht verwenden. </blockquote><br>  Es gibt jedoch Ausnahmen - dies sind Zahlen von ‚Äì10 bis 10, Zahlen 100, 1000 und dergleichen, einfach weil sie oft gefunden werden und ohne sie schwierig ist.  <strong>Wir sind hart, aber nicht sadistisch</strong> und denken ein wenig nach. <br><br><h3>  Verwenden Sie '@staticmethod'? <br></h3><br>  Lassen Sie uns dar√ºber nachdenken, was <strong>statische Methode ist</strong> .  Haben Sie sich jemals gefragt, warum es in Python ist?  Ich nicht.  Ich hatte einen sch√∂nen Pylint, der sagte: <br><br>  - <em>Schau, du benutzt nicht</em> <code>self</code> , <code>cls</code> - <em>mach eine statische Methode!</em> <br>  - <em>Okay, Pylint, ich mache eine statische Methode.</em> <br><br>  Dann brachte ich Anf√§ngern Python bei und sie fragten, was statische Methode ist und warum sie ben√∂tigt wird.  Ich kannte die Antwort nicht und dachte, ob es m√∂glich ist, dasselbe mit einer Funktion zu schreiben oder sich selbst nicht in einer regul√§ren Funktion zu verwenden, einfach weil es eine solche Klasse ist und etwas passiert.  Warum brauchen wir ein statisches Methodenkonstrukt? <br><br>  Ich habe die Frage gegoogelt und sie war so tief wie ein Kaninchenbau.  Es gibt viele andere Programmiersprachen, in denen die statische Methode ebenfalls nicht beliebt ist.  Und gut begr√ºndet - staticmethod bricht das Objektmodell.  Als Ergebnis wurde mir klar, dass die <strong>statische Methode hier nicht der richtige Ort ist</strong> , und wir haben sie herausges√§gt.  Wenn wir nun den StaticMethod Decorator verwenden, sagt der Linter: "Nein, sorry, Refactor!" <br><br>  Die meisten Entwickler sind mit mir nicht einverstanden, aber ungef√§hr die H√§lfte ist immer noch der Meinung, dass es besser ist, regul√§re Methoden oder regul√§re Funktionen anstelle von statischen Methoden zu schreiben. <br><br><h3>  Logik in __init __. Ru - gut oder schlecht? <br></h3><br>  Das ist mein Lieblingsthema.  Sicherlich, wenn Sie ein neues Paket erstellen und es irgendwie aufrufen - es erzeugt __init __. Ru und Sie fragen sich, was Sie darin einf√ºgen sollen?  Was in __init __. Ru einf√ºgen und was - in Dateien nebeneinander?  F√ºr mich war dies eine nicht triviale Frage, und ich war immer verloren: wahrscheinlich etwas Wichtigstes?  Dann dachte ich - nein, im Gegenteil, ich werde das Wichtigste in den verst√§ndlichsten Kontext stellen.  Wenn Sie etwas in __init __. Ru einf√ºgen und dann alles importieren, stellt sich heraus, dass zyklische Importe ebenfalls schlecht sind. <br><br>  Ich habe mir verschiedene popul√§re Bibliotheken angesehen, ihre __init __. Ru geklettert und festgestellt, dass es im Grunde entweder M√ºll oder Abw√§rtskompatibilit√§t gibt.  F√ºr mich stellte sich diese Frage sehr stark, als ich anfing, gro√üe Pakete mit vielen Unterpaketen zu erstellen - Sie verlieren sich.           ,   .    Python,  ,   ,   __init__.  ,  90%     . <br><br>   ‚Äî ,   API,  ,   -  ,  ,   ? ,  ,      .      API   .   ,    __init__.   - : ,  ,   . <br><br>   ,   <code>I_CONTROL_CODE</code> ‚Äî   .   ,   .    ,  ,  __init__.   ‚Äî  .     ,    ,    , - ,       . <br><br><h3>  hasattr   ? <br></h3><br>     <strong>hasattr</strong> ?  ,   ,    Python   ‚Äî .  hasattr  ,         (). <br><br>   ,  ,   hasattr  ,     ,   .       ,   hasattr,   ,      . - ,  Python   -, hasattr      .       ,        .    <strong>getattr</strong>   ¬´  ,  ¬ª.          hasattr ‚Äî  getattr,  <strong>exception</strong> . <br><br>     50  50 ‚Äî ,        ,        . <br><br><h2>        <br></h2><br>     ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong>layer-linter</strong></a> .   ?      :   ,   ,     ,    .     ,     -    .         - .  Ich kann es nur empfehlen. <br><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong>cohesion</strong></a> .       ,    . Cohesion ,     .      False Positive       ,       ‚Äî ,   ,  . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong>vulture</strong></a>      Python    . - ,  Python   ,    .      ohesion. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><strong>Radon</strong></a>      ,   : <strong>Halstead</strong> , <strong>Maintainability Index</strong> ,  . ,       ‚Äî  . <br><br><h2> Final type <br></h2><br>   <strong>Final-</strong>  Python.     Typing Extensions,        ,    .  ,     - ,      ‚Äî  ,      .   ,   -  - ,  ?  Nicht n√∂tig.  .  -  ‚Äî  ,  , , . <br><br><h2> Gratis <br></h2><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a>     ,     . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b90/e6c/e5d/b90e6ce5dc2ef3c00c83e73fa162447e.png"><br><br>       ,     . <br><br>      ,     .   ,   .      ,    Python-   ,   . <br><br><blockquote> ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Moscow Python Conf++</a> ,      .    ,        ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>         Python-. </blockquote><br>       .       .   ,      ,   ,      . <br><br><div class="spoiler"> <b class="spoiler_title">  </b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/2fd/ed2/6fa/2fded26fa11ac61fb98e0b729b6bd0c6.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/01e/18a/d2d/01e18ad2d4184a42079552671a8957d8.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f87/653/af3/f87653af3f7b6c6baca449b3c81b564f.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d1e/5a8/576/d1e5a8576f1a724683a57f2c2861950e.png"><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de433480/">https://habr.com/ru/post/de433480/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de433468/index.html">Fehlerinjektion: Ihr System ist unzuverl√§ssig, wenn Sie nicht versucht haben, es zu besch√§digen</a></li>
<li><a href="../de433472/index.html">Unity 2018.3 ver√∂ffentlicht</a></li>
<li><a href="../de433474/index.html">Pylint von innen nach au√üen. Wie macht er das?</a></li>
<li><a href="../de433476/index.html">50 Selleriet√∂ne</a></li>
<li><a href="../de433478/index.html">Warum Django im Tinkoff Magazine ausgew√§hlt wird</a></li>
<li><a href="../de433482/index.html">Django unter dem Mikroskop</a></li>
<li><a href="../de433486/index.html">Was nochmal? Die Wiederbelebung von Nicht-Bank-Debitkarten</a></li>
<li><a href="../de433488/index.html">Christmas Scrum Meetup UPD Broadcast Mitap</a></li>
<li><a href="../de433490/index.html">Creality CR-X 3D-Drucker√ºberpr√ºfung</a></li>
<li><a href="../de433494/index.html">10 englische Redewendungen, die Sie nie kennen werden</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>