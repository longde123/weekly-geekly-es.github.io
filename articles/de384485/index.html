<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äçüéì üëèüèΩ üí∂ Laurent Module und Smart Home (Teil 1). Haushofmeister üõåüèª üí∫ üéí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich m√∂chte Sie auf eine Reihe von Artikeln zu den Laurent-Steuerungsmodulen von KernelChip aufmerksam machen . In dieser Serie werde ich Ihnen erkl√§re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Laurent Module und Smart Home (Teil 1). Haushofmeister</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/384485/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich m√∂chte Sie auf eine Reihe von Artikeln zu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">den</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Laurent-Steuerungsmodulen von </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">KernelChip</font></a><font style="vertical-align: inherit;"> aufmerksam machen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In dieser Serie werde ich Ihnen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erkl√§ren</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , wie Sie diese Module in Ihr Smart Home integrieren, wie Sie sie mit dem beliebten </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">MajorDoMo</font></a><font style="vertical-align: inherit;"> -Hausautomationssystem </font><font style="vertical-align: inherit;">, mit Arduino-Skizzen, mit dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Mega Server-System verwalten</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und sogar wie Sie diese Module f√ºr einen v√∂llig unerwarteten Zweck anwenden - f√ºr Bringen Sie Ihren Kindern das Programmieren in Verarbeitung bei. </font></font><br>
<br>
<img src="https://habrastorage.org/files/915/0cb/0cb/9150cb0cbde940e588d1badce05af5bb.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen k√∂nnen Module, die an und f√ºr sich sehr interessant sind, in Haushalten unerwartet sehr n√ºtzlich sein, wenn Sie sich ihnen mit einem gewissen Ma√ü an Fantasie und Kreativit√§t n√§hern.</font></font><br>
<a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum Laurent?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weil diese Module in meinem Smart Home-System seit langer Zeit (mehr als drei Jahre) erfolgreich funktionieren und ich einige Erfahrungen in der Verwendung gesammelt habe und etwas dar√ºber zu erz√§hlen habe. </font><font style="vertical-align: inherit;">Au√üerdem habe ich Erfahrung und vorgefertigten, getesteten Code f√ºr die Verwaltung dieser Module, den ich mit Ihnen teilen m√∂chte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und Sie werden in der Lage sein, Ihre Softwarel√∂sungen basierend auf diesem Code zu entwickeln. Das wird ganz einfach, da ich den gr√∂√üten Teil der Arbeit bereits erledigt habe. </font><font style="vertical-align: inherit;">Dar√ºber hinaus wird der Code ausf√ºhrlich erl√§utert, was sicherlich dazu beitr√§gt, dass Sie verstehen, wie er funktioniert, Programmieren lernen und Smart-Home-Systeme erstellen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module selbst</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als ich mich f√ºr eine vorgefertigte L√∂sung f√ºr die Verwaltung elektrischer Lasten √ºber das Netzwerk entschied, bestach mich Laurent mit der Vollst√§ndigkeit und Einfachheit der L√∂sung. Um das Netzwerk ein- und ausschalten zu k√∂nnen, wurde fast nichts ben√∂tigt. Es war nicht notwendig, die Programmiersprache zu lernen, es war nicht notwendig, etwas zu l√∂ten, es war ausreichend, das Modul mit dem lokalen Netzwerk zu verbinden, die Last an die Relaisklemmen anzuschlie√üen (und nicht zu vergessen, das Modul selbst mit Strom zu versorgen) und das war alles. Danach war es m√∂glich, Befehle direkt vom Computer (vom Terminalprogramm) zu senden. Das Modul begann sofort, das Licht gem√§√ü meinen Befehlen gehorsam ein- und auszuschalten. Mehr brauchte ich damals nicht.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich kann √ºber die Module selbst sagen, dass es w√§hrend des gesamten Betriebs keine Abst√ºrze und Einfrierungen gab, alles funktionierte und ‚Äûwie eine Uhr‚Äú funktioniert, was tats√§chlich von solchen Modulen ben√∂tigt wird, um nur zu funktionieren.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Design und Bauqualit√§t</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es reicht aus, nur das Modul zu betrachten, um zu verdeutlichen, dass es aus einem Grund ‚Äûwenn nur‚Äú entwickelt wurde, aber versucht hat, etwas wirklich Wertvolles zu tun. </font><font style="vertical-align: inherit;">Ich habe auch keine Beschwerden √ºber die Verarbeitungsqualit√§t, alles ist ordentlich gemacht und wie es sein sollte: keine krummen Teile, L√∂tflecken oder √§hnliches, alles ist klar und ordentlich. </font><font style="vertical-align: inherit;">Im Gro√üen und Ganzen unterscheidet sich die Verarbeitungsqualit√§t nicht von den "Marken" -Computerkomponenten und dem "Fabrik" -Arduino. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das einzige, was ich tun w√ºrde, wenn ich diese Module selbst freigeben w√ºrde, w√§re, mehrfarbige Klemmen zum Anschlie√üen von Dr√§hten anstelle von einfarbigen Klemmen zu installieren, zumindest die Stromanschlussklemmen hervorzuheben, aber es ist so, kleine Auswahl (alles ist nat√ºrlich ordentlich signiert).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Worum geht es im ersten Artikel der Serie?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle Informationen sind in drei logisch fertige Artikel unterteilt. Der erste Artikel konzentriert sich auf die Integration von Laurent-Modulen in MajorDoMo, eine beliebte Open-Source-Plattform f√ºr die Hausautomation. Spezifische Beispiele und PHP-Code werden angegeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der zweite Artikel befasst sich mit der Integration in das Arduino-√ñkosystem. Sie k√∂nnen die Module anhand Ihrer individuellen Skizzen verwalten oder Laurent in den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Mega Server</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (der ebenfalls auf dem Arduino-Code basiert) integrieren und die Laurents √ºber eine praktische Oberfl√§che oder automatisch je nach Programm verwalten. Vorgefertigte L√∂sungen und getesteter Code werden ebenfalls angegeben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und im dritten - √ºber die Verwaltung von Laurent-Modulen anhand von Skizzen zur Verarbeitung. Das hei√üt, direkt vom Desktop Ihres Heimcomputers. In demselben Artikel wird beschrieben, wie das Interesse der Kinder am Programmierlernen gesteigert werden kann und welche Rolle diese Module in dieser Angelegenheit spielen k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Serie widmet sich der Integration von Laurent-Modulen in Hausautomationssysteme und ber√ºcksichtigt nicht die Architektur und den Betrieb der Module selbst. Dies wurde in anderen Artikeln beschrieben, mit denen Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lesen k√∂nnen </font><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">und wird sp√§ter erl√§utert. Hier konzentrieren wir uns nur auf die Integration.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Schreiben der Artikel wurde das Laurent-Modul mit La01-Firmware und die LW1.0-Webinterface-Version verwendet, dh das seit drei Jahren funktionierende ‚ÄûKampf‚Äú -Modul. </font><font style="vertical-align: inherit;">In neuen Versionen von Modulen k√∂nnen sich die Implementierungsdetails geringf√ºgig unterscheiden, die Kompatibilit√§t mit Steuerungsteams bleibt jedoch erhalten, sodass alles, was hier angegeben wird, auch f√ºr neuere √Ñnderungen gilt.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So funktioniert die Modulverwaltung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der gesamte Informationsaustausch mit den Modulen erfolgt √ºber das Netzwerk. Um mit ihnen arbeiten zu k√∂nnen, m√ºssen Sie eine TCP / IP-Verbindung an Port 2424 herstellen. </font><font style="vertical-align: inherit;">Sobald die Verbindung hergestellt ist, k√∂nnen Sie Textbefehle (sogenannte KE-Befehle) senden, die das Modul steuern. </font><font style="vertical-align: inherit;">Die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KernelChip-Website enth√§lt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eine detaillierte Dokumentation, einschlie√ülich einer zug√§nglichen Beschreibung der KE-Befehle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KernelChip k√ºmmerte sich um die Benutzer und stellte seinen Modulen eine praktische Weboberfl√§che zur Verf√ºgung. Dies ist jedoch eine ‚Äûmanuelle Steuerung‚Äú. Der Komfort, der Wert und der Nutzen der L√∂sung werden um einen Auftrag erh√∂ht, wenn wir lernen, das Modul von unserem Smart Home aus zu verwalten. </font></font><br>
<br>
<img src="https://habrastorage.org/files/0ad/e7b/6e3/0ade7b6e3ff2446e969b922121a3c87d.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Weboberfl√§che ist standardm√§√üig durch ein Passwort gesch√ºtzt. Um den Inhalt der Webseite anzuzeigen, m√ºssen Sie den Benutzernamen "admin" und das Passwort "Laurent" eingeben.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haushofmeister</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MajorDoMo-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> System </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">ist</font></a><font style="vertical-align: inherit;"> sehr beliebt und ich werde hier nicht n√§her darauf eingehen. </font><font style="vertical-align: inherit;">Es wird davon ausgegangen, dass Sie dieses System bereits installiert und einige Zeit damit gearbeitet haben. </font><font style="vertical-align: inherit;">F√ºr diejenigen, die √ºberhaupt nicht auf dem neuesten Stand sind, erkl√§re ich, dass dies eine offene Hausautomationsplattform ist, die unter Windows und Linux l√§uft und auf einem Webserver basiert und eine Art spezialisiertes CMS (Content Management System) mit umfassenden Funktionen ist und f√ºr das ‚Äûgesch√§rft‚Äú wird Heimautomatisierung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die M√∂glichkeiten von MajorDoMo sind wirklich endlos und die Verwaltung von Laurent-Modulen ist nur eines der Talente dieses Systems.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Technische Details</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MajorDoMo enth√§lt die Datei laurent.class.php, die sich im Verzeichnis befindet</font></font><br>
<br>
<pre><code class="dos hljs">\htdocs\lib\<font></font>
<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vollst√§ndiger Code laurent.class.php</font></font></b><div class="spoiler_text">&lt;?<br>
<br>
function laurent_command($host, $command, $password='Laurent') {<br>
<br>
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);<br>
 if ($socket === false) {<br>
 echo ¬´socket_create() failed: reason: ¬ª. socket_strerror(socket_last_error()). "\n";<br>
 return 0;<br>
 }<br>
<br>
$result = socket_connect($socket, $host, 2424);<br>
 if ($result === false) {<br>
 echo ¬´socket_connect( $socket, $host, 2424) failed.\nReason: ($result) ¬ª. socket_strerror(socket_last_error($socket)). "\n";<br>
 return 0;<br>
 }<br>
<br>
$in='$KE'."\r\n";<br>
 socket_write($socket, $in, strlen($in));<br>
<br>
$res='';<br>
 while ($out = socket_read($socket, 2048, PHP_NORMAL_READ)) {<br>
 $res.=$out;<br>
 if (is_integer(strpos($out, "\n"))) {<br>
 break;<br>
 }<br>
 }<br>
<br>
$in='$KE,PSW,SET,'.$password."\r\n";<br>
 socket_write($socket, $in, strlen($in));<br>
<br>
$res='';<br>
 while ($out = socket_read($socket, 2048, PHP_NORMAL_READ)) {<br>
 $res.=$out;<br>
 if (is_integer(strpos($out, "\n"))) {<br>
 break;<br>
 }<br>
 }<br>
<br>
$in=$command."\r\n";<br>
 socket_write($socket, $in, strlen($in));<br>
<br>
$res='';<br>
 while ($out = socket_read($socket, 2048, PHP_NORMAL_READ)) {<br>
 $res.=$out;<br>
 if (is_integer(strpos($out, "\n"))) {<br>
 break;<br>
 }<br>
 }<br>
<br>
socket_close($socket);<br>
 return trim($res);<br>
 <br>
 }<br>
<br>
function laurent_getStat($host, $password='Laurent') {<br>
<br>
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);<br>
 if ($socket === false) {<br>
 echo ¬´socket_create() failed: reason: ¬ª. socket_strerror(socket_last_error()). "\n";<br>
 return 0;<br>
 }<br>
<br>
$result = socket_connect($socket, $host, 2424);<br>
 if ($result === false) {<br>
 echo ¬´socket_connect( $socket, $host, 2424) failed.\nReason: ($result) ¬ª. socket_strerror(socket_last_error($socket)). "\n";<br>
 return 0;<br>
 }<br>
<br>
$in='$KE'."\r\n";<br>
 socket_write($socket, $in, strlen($in));<br>
<br>
$res='';<br>
 while ($out = socket_read($socket, 2048, PHP_NORMAL_READ)) {<br>
 $res.=$out;<br>
 if (is_integer(strpos($out, "\n"))) {<br>
 break;<br>
 }<br>
 }<br>
<br>
$in='$KE,PSW,SET,'.$password."\r\n";<br>
 socket_write($socket, $in, strlen($in));<br>
<br>
$res='';<br>
 while ($out = socket_read($socket, 2048, PHP_NORMAL_READ)) {<br>
 $res.=$out;<br>
 if (is_integer(strpos($out, "\n"))) {<br>
 break;<br>
 }<br>
 }<br>
<br>
$command='$KE,DAT,ON';<br>
 $in=$command."\r\n";<br>
 socket_write($socket, $in, strlen($in));<br>
<br>
$res='';<br>
 $started=0;<br>
 while ($out = socket_read($socket, 2048, PHP_NORMAL_READ)) {<br>
 $res.=$out;<br>
 if (is_integer(strpos($out, "#TIME,"))) {<br>
 if (!$started) {<br>
 $started=1;<br>
 } else {<br>
 break;<br>
 }<br>
 }<br>
 }<br>
<br>
$command='$KE,DAT,OFF';<br>
 $in=$command."\r\n";<br>
 socket_write($socket, $in, strlen($in));<br>
 sleep(1);<br>
 socket_write($socket, $in, strlen($in));<br>
 socket_write($socket, $in, strlen($in));<br>
<br>
socket_close($socket);<br>
 return trim($res);<br>
 <br>
 }<br>
<br>
?&gt;<br>
<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
und enth√§lt alles, was Sie f√ºr die Arbeit mit Laurent-Modulen ben√∂tigen. </font><font style="vertical-align: inherit;">Diese Datei enth√§lt Funktionen in der Programmiersprache PHP und kann wahrscheinlich in fertiger Form oder mit minimalen √Ñnderungen mit dieser Programmiersprache auf jedes System √ºbertragen werden. </font><font style="vertical-align: inherit;">Wenn Sie also ein Smart Home-Projekt auf einer anderen Plattform haben, k√∂nnen Sie versuchen, Laurent mithilfe dieser Datei in Ihr System zu integrieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hauptfunktion zur Steuerung des Moduls ist</font></font><br>
<br>
<pre><code class="php hljs">laurent_command(<span class="hljs-string">'&lt; &gt;'</span>, <span class="hljs-string">'&lt;&gt;'</span>, <span class="hljs-string">'&lt;  &gt;'</span>);<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
z.B,</font></font><br>
<br>
<pre><code class="php hljs">$result = laurent_command(<span class="hljs-string">'192.168.2.19'</span>, <span class="hljs-string">'$KE,INF'</span>, <span class="hljs-string">'Laurent'</span>);<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
, wobei '192.168.2.19' die IP-Adresse des Moduls ist, '$ KE, INF' der Befehl selbst ist, 'Laurent' das Passwort ist (Standard). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis der Arbeit der Funktion wird in die Variable $ result eingegeben, dh die Antwort des Moduls, die Sie mit Standard-PHP-Sprachtools analysieren und interpretieren k√∂nnen. Das Passwort wird standardm√§√üig angegeben. Falls Sie das Passwort f√ºr den Zugriff auf Ihr Modul ge√§ndert haben, m√ºssen Sie es im Funktionsaufruf durch ein neues ersetzen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dem Team sollte alles klar sein. Sie k√∂nnen alle Befehle aus dem Verzeichnis √ºbernehmen und das Modul nach Ihren W√ºnschen verwalten. Die IP-Adresse sollte ebenfalls keine Probleme verursachen. Geben Sie einfach die IP-Adresse an, √ºber die Ihr Laurent-Modul wirklich verf√ºgt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen die Theorie damit beenden, und jetzt zeige ich Ihnen anhand eines praktischen Beispiels, wie Sie die Lichtsteuerung (oder eine Ger√§testeuerung) direkt √ºber das MajorDoMo-Men√º vornehmen k√∂nnen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Praktisches Beispiel</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns als praktisches Beispiel die Erstellung der beiden Schaltfl√§chen "Einschalten" und "Ausschalten" im Hauptmen√º des MajorDoMo-Systems an. Mit diesen Tasten k√∂nnen Sie das Licht oder ein elektrisches Ger√§t ein- oder ausschalten (hier m√ºssen Sie nur daran denken, dass die am Modul installierten Relais eine starke Last wie einen Elektroherd oder einen Warmwasserbereiter nicht direkt steuern k√∂nnen). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also erstellen wir die Schaltfl√§che "Aktivieren". Gehen Sie dazu zum MajorDoMo-Administrationsbereich, geben Sie den Benutzernamen und das Kennwort ein (standardm√§√üig admin / admin) und klicken Sie auf "OBJEKTE / Steuerungsmen√º" und dann auf die gro√üe gr√ºne Schaltfl√§che "Neuen Abschnitt hinzuf√ºgen". </font></font><br>
<br>
<img src="https://habrastorage.org/files/fb3/4af/d8b/fb34afd8babe4df5a78392f9b6025857.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes finden wir die Dropdown-Liste "Typ" und w√§hlen "Schaltfl√§che" aus der Vielzahl der angezeigten Typen und klicken auf "Speichern".</font></font><br>
<br>
<img src="https://habrastorage.org/files/2de/95f/137/2de95f13747c4887b12cc1a6b51315ae.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes w√§hlen Sie "√úbergeordneter Men√ºpunkt" ist die Stelle, an der unsere Schaltfl√§che "einhakt". </font><font style="vertical-align: inherit;">Ich habe es Laurent, und Sie k√∂nnen jeden bequemen Men√ºpunkt haben. </font><font style="vertical-align: inherit;">Standardm√§√üig gibt es "ROOT", was bedeutet, dass die Schaltfl√§che sofort sichtbar ist, ohne auf einen Men√ºpunkt zu klicken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schreiben Sie in das Eingabefeld "Titel", was Sie m√∂chten, dass es auf die Schaltfl√§che geschrieben wird. </font><font style="vertical-align: inherit;">Und schlie√ülich schreiben Sie in das Feld Code den uns bereits bekannten Funktionscode laurent_command:</font></font><br>
<br>
<pre><code class="php hljs">laurent_command(<span class="hljs-string">'192.168.2.19'</span>, <span class="hljs-string">'$KE,REL,2,1'</span>, <span class="hljs-string">'Laurent'</span>);<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist es dasselbe wie im theoretischen Beispiel, nur die Variable $ result fehlt (wir brauchen sie nicht) und der Befehl wird durch '$ KE, REL, 2,1' ersetzt, was bedeutet, dass Relais Nr. 2 aktiviert wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir machen dasselbe f√ºr die Schaltfl√§che "Ausschalten", vergessen Sie jedoch nicht, den Namen der Schaltfl√§che zu √§ndern, und schreiben Sie anstelle von "$ KE, REL, 2.1" "$ KE, REL, 2.0", was bedeutet, dass Relais Nr. 2 ausgeschaltet wird:</font></font><br>
<br>
<pre><code class="php hljs">laurent_command(<span class="hljs-string">'192.168.2.19'</span>, <span class="hljs-string">'$KE,REL,2,0'</span>, <span class="hljs-string">'Laurent'</span>);<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist alles. </font><font style="vertical-align: inherit;">Wir laden die Seite mit der MajorDoMo-Oberfl√§che neu. Es erscheinen zwei neue Schaltfl√§chen, mit denen die Lichter (oder die Appliance) direkt √ºber die MajorDoMo-Oberfl√§che sch√∂n und fast unverz√ºglich ein- und ausgeschaltet werden k√∂nnen. </font><font style="vertical-align: inherit;">Was wir erreichen wollten.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automatische Kontrolle</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versuchen wir nun, das Modul ohne menschliches Eingreifen automatisch zu steuern. </font><font style="vertical-align: inherit;">Jetzt werden Sie sehen, dass es noch einfacher ist, als die Tasten zur Steuerung des Moduls zu verwenden. </font></font><br>
<br>
<img src="https://habrastorage.org/files/13a/34b/f74/13a34bf74e8943b5a0613e972ef09b85.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir finden im Hauptmen√º des MajorDoMo-Administrationsbereichs das Element "Objekte", klicken darauf, dann finden wir das Objekt "ClockChime" und seine Methode "onNewMinute". </font><font style="vertical-align: inherit;">Wir brauchen ihn. </font><font style="vertical-align: inherit;">F√ºr diejenigen, die sich nicht auskennen, ist dies die ‚Äûzentrale‚Äú Methode MajorDoMo, die jede Minute aufgerufen wird und sehr beliebt ist. </font><font style="vertical-align: inherit;">Bei dieser Methode gibt es viele Funktionen und Skriptaufrufe, die die Benutzerfunktionalit√§t des Systems bereitstellen.</font></font><br>
<br>
<img src="https://habrastorage.org/files/1c6/88b/2ea/1c688b2ead4642b4934a67a00b19d9d2.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und alles, was wir tun m√ºssen, ist unseren Code zu dieser Methode hinzuzuf√ºgen. </font><font style="vertical-align: inherit;">Betrachten Sie zum Beispiel diese Situation. </font><font style="vertical-align: inherit;">Ihr Laurent-Modul steuert die Nachtbeleuchtung im Innenhof Ihres Hauses. </font><font style="vertical-align: inherit;">Sie m√∂chten beispielsweise, dass das Licht um 21.00 Uhr eingeschaltet und um 7.30 Uhr morgens ausgeschaltet wird. </font><font style="vertical-align: inherit;">Nichts ist einfacher, hier ist der Code, den Sie der onNewMinute-Methode hinzuf√ºgen sollten:</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">if</span> (timeIs(<span class="hljs-string">'21:00'</span>)) {<font></font>
  laurent_command(<span class="hljs-string">'192.168.2.19'</span>, <span class="hljs-string">'$KE,REL,2,1'</span>, <span class="hljs-string">'Laurent'</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">if</span> (timeIs(<span class="hljs-string">'7:30'</span>)) {<font></font>
  laurent_command(<span class="hljs-string">'192.168.2.19'</span>, <span class="hljs-string">'$KE,REL,2,0'</span>, <span class="hljs-string">'Laurent'</span>);<font></font>
}<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und alle! </font><font style="vertical-align: inherit;">Sie m√ºssen zugeben, dass es √ºberhaupt nicht schwierig ist. </font><font style="vertical-align: inherit;">Dies ist nur ein Beispiel, die Logik der Arbeit kann absolut beliebig und sehr ausgefeilt sein. </font><font style="vertical-align: inherit;">Und die Talente von Laurent-Modulen enden nicht mit dem Ein- und Ausschalten von Lasten, ihre Funktionalit√§t ist viel umfassender, aber dies ist nicht das Thema dieses Artikels. Hier werden Integrationsprobleme nur anhand einfacher Beispiele betrachtet.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moduldaten empfangen und ausgeben</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das letzte Beispiel ist das Abrufen und Anzeigen von Informationen, die vom Laurent-Modul empfangen wurden, auf der MajorDoMo-Webseite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MajorDoMo ist ein objektorientiertes System, in dem alle Arbeiten durch die Erstellung von Objekten und die Verwendung ihrer Daten (Variablen) und Methoden (Programmcode) stattfinden. Etwas schwierig? Eigentlich ist es okay und jetzt wirst du es selbst sehen. </font></font><br>
<br>
<img src="https://habrastorage.org/files/adc/f9a/1c0/adcf9a1c0940400798e8392da8690c52.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Beispiel verwenden wir das bereits vorhandene Objekt "ThisComputer" und f√ºgen ihm eine neue Eigenschaft "test" hinzu. Klicken Sie dazu im MajorDoMo-Administrationsbereich auf das uns bereits bekannte Men√ºelement ‚ÄûObjekte‚Äú, suchen Sie das Objekt ‚ÄûThisComputer‚Äú und klicken Sie auf das Element ‚ÄûEigenschaften‚Äú, scrollen Sie nach unten und suchen Sie das Eingabefeld ‚ÄûNeue Eigenschaft hinzuf√ºgen‚Äú, geben Sie ‚ÄûTest‚Äú ein und klicken Sie auf "Aktualisieren" (lassen Sie den Wert leer).</font></font><br>
<br>
<img src="https://habrastorage.org/files/81a/bd8/8f8/81abd88f8596487ca7415eb6526d6d40.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da die vorbereitenden Vorg√§nge als abgeschlossen betrachtet werden k√∂nnen, haben wir dem Objekt "ThisComputer" eine neue Eigenschaft "test" hinzugef√ºgt, die wir in unseren Experimenten verwenden werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Aufgabe ist es nun, die notwendigen Informationen vom Laurent-Modul anzufordern und in die Eigenschaft (Variable) des "Tests" des Objekts "ThisComputer" zu stellen. </font><font style="vertical-align: inherit;">Wie macht man das? </font><font style="vertical-align: inherit;">Sehr einfach. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie diesen Code der bereits bekannten onNewMinute-Methode hinzu:</font></font><br>
<br>
<pre><code class="php hljs">$result = laurent_command(<span class="hljs-string">'192.168.2.19'</span>, <span class="hljs-string">'$KE,INF'</span>, <span class="hljs-string">'Laurent'</span>);<font></font>
setGlobal(<span class="hljs-string">'ThisComputer.test'</span>, $result); <font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und jede Minute fragt MajorDoMo das Modul nach den erforderlichen Informationen und aktualisiert die Testvariable, die wir nach Bedarf verwenden k√∂nnen. </font><font style="vertical-align: inherit;">Zum Beispiel auf einer Webseite anzeigen. </font><font style="vertical-align: inherit;">Dazu platzieren wir den folgenden Code an einer beliebigen Stelle auf der Seite, die wir ben√∂tigen:</font></font><br>
<br>
<pre><code class="php hljs">%ThisComputer.test%<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist das sogenannte. </font><font style="vertical-align: inherit;">Ein Makro, das beim Laden einer Seite den Variablenwert anstelle von sich selbst ersetzt und in der Eigenschaft "test" des Objekts "ThisComputer" gespeichert ist. </font><font style="vertical-align: inherit;">Infolgedessen sehen Sie auf der Webseite Informationen, die vom Laurent-Modul als Antwort auf Ihre Anfrage √ºbertragen wurden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie f√ºge ich der Seite ein Makro hinzu? </font><font style="vertical-align: inherit;">Wir gehen zum Admin-Men√º und w√§hlen den Eintrag "Startseiten" und w√§hlen eine beliebige Seite aus oder erstellen eine neue mit der gro√üen gr√ºnen Schaltfl√§che "Neue Seite". </font><font style="vertical-align: inherit;">F√ºgen Sie das Makro an einer beliebigen Stelle auf der Seite hinzu.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zwischensumme</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist also alles. </font><font style="vertical-align: inherit;">Mit den Informationen aus diesem Artikel k√∂nnen Sie sich wie ein echter Meister der Laurents f√ºhlen und diese Module in Ihr Smart Home-System integrieren. </font><font style="vertical-align: inherit;">Im n√§chsten Artikel aus der Reihe erfahren Sie, wie Sie Module anhand Ihrer Skizzen auf Arduino und des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Mega Server-Systems verwalten</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de384485/">https://habr.com/ru/post/de384485/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de384475/index.html">Die Bewertung ist kein Gadget. Auswahl des besten Trainingskoffers und anderen Zubeh√∂rs f√ºr Smartphones: Adidas-Verb√§nde, Taschen und Silikontasche</a></li>
<li><a href="../de384477/index.html">Die NASA wird die Technologie zur Entwicklung von Asteroiden unter Verwendung von Sonnenlicht testen</a></li>
<li><a href="../de384479/index.html">Spieleentwicklung zur Verarbeitung mit Kontrolle √ºber das Arduino Uno Board</a></li>
<li><a href="../de384481/index.html">Der Krieg zwang syrische Wissenschaftler, die Samenvorr√§te aus dem "Doomsday Vault" aufzuf√ºllen.</a></li>
<li><a href="../de384483/index.html">Ein experimentelles Telefon mit Sonnenkollektoren. RC 1.0</a></li>
<li><a href="../de384487/index.html">Song "Happy Birthday To You" per Gerichtsbeschluss √∂ffentlich bekannt gegeben</a></li>
<li><a href="../de384491/index.html">Roboter parken besser als Menschen</a></li>
<li><a href="../de384493/index.html">Elektronische Uhr im Qlocktwo-Stil</a></li>
<li><a href="../de384499/index.html">Acer Revo One: Ein Miniaturcomputer mit einem breiten Aktionsspektrum</a></li>
<li><a href="../de384501/index.html">Sound in der Tasche f√ºr 500 000r: Astell & Kern AK380 + Astell & Kern Layla</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>