<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÅ üç¥ ‚ùï Sie k√∂nnen SELECT nicht einfach nehmen und schreiben, wenn der Anbieter dies nicht zul√§sst ... aber wir werden schreiben ‚ö∞Ô∏è ü¶ó ü§≤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TL; DR: GitHub: // PastorGL / AQLSelectEx . 





 Einmal, nicht in der kalten Jahreszeit, sondern bereits in der Wintersaison und speziell vor ein pa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sie k√∂nnen SELECT nicht einfach nehmen und schreiben, wenn der Anbieter dies nicht zul√§sst ... aber wir werden schreiben</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435902/"><p>  TL; DR: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub: // PastorGL / AQLSelectEx</a> . </p><br><p><img src="https://habrastorage.org/webt/lk/ke/y2/lkkey2_mk3a-rbhftk9jja_vlyw.png" alt="Aerospike AQL SELECT"></p><br><p>  Einmal, nicht in der kalten Jahreszeit, sondern bereits in der Wintersaison und speziell vor ein paar Monaten, brauchte ich f√ºr ein Projekt, an dem ich arbeitete (etwas Geospatial basierend auf Big Data), einen schnellen NoSQL / Key-Value-Speicher. </p><br><p> Wir kauen mit Hilfe von Apache Spark Terabyte an Quellcodes, aber das Endergebnis von Berechnungen, die auf eine l√§cherliche Menge (nur Millionen von Datens√§tzen) reduziert wurden, muss irgendwo gespeichert werden.  Und es ist sehr w√ºnschenswert, es so zu speichern, dass es schnell gefunden und mithilfe von Metadaten gesendet werden kann, die jeder Zeile des Ergebnisses zugeordnet sind (dies ist eine Ziffer) (aber es gibt ziemlich viele davon). </p><a name="habracut"></a><br><p>  Die Formate des Khadupov-Stacks in diesem Sinne sind von geringem Nutzen, und relationale Datenbanken f√ºr Millionen von Datens√§tzen werden langsamer, und der Satz von Metadaten ist nicht so fest, dass er gut in das starre Schema eines regul√§ren RDBMS - in unserem Fall PostgreSQL - passt.  Nein, normalerweise wird JSON unterst√ºtzt, aber es gibt immer noch Probleme mit Indizes f√ºr Millionen von Datens√§tzen.  Indizes schwellen an, es wird notwendig, die Tabelle zu partitionieren, und ein solcher Aufwand bei der Verwaltung beginnt, dass nafig-nafig. </p><br><p>  In der Vergangenheit wurde MongoDB als NoSQL f√ºr das Projekt verwendet, aber im Laufe der Zeit zeigt sich die Monga immer schlechter (insbesondere in Bezug auf die Stabilit√§t), sodass sie schrittweise au√üer Betrieb genommen wurde.  Eine schnelle Suche nach einer moderneren, schnelleren, weniger fehlerhaften und allgemein besseren Alternative f√ºhrte zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aerospike</a> .  Viele gro√ük√∂pfige Leute haben es daf√ºr, und ich habe mich entschlossen, es zu √ºberpr√ºfen. </p><br><p>  Tests haben gezeigt, dass Daten tats√§chlich direkt aus dem Spark-Job mit einem Pfiff in der Story gespeichert werden und die Suche in vielen Millionen Datens√§tzen viel schneller ist als in der Mong.  Und sie isst weniger Ged√§chtnis.  Aber es stellte sich heraus, ein "aber".  Die Client-API des Aero-Lots ist rein funktional und nicht deklarativ. </p><br><p>  F√ºr die Aufzeichnung in der Story ist dies nicht wichtig, da dennoch alle Arten von Feldern jedes resultierenden Datensatzes lokal im Job selbst bestimmt werden m√ºssen - und der Kontext nicht verloren geht.  Der funktionale Stil ist hier vorhanden, zumal das Schreiben eines Codes auf andere Weise nicht funktioniert.  In der Web-M√ºndung, die das Ergebnis nach au√üen hochladen soll und eine gew√∂hnliche Spring-Webanwendung ist, w√§re es jedoch viel logischer, ein Standard-SQL-SELECT aus einem Benutzerformular zu erstellen, in dem es voller AND- und OR- <strong>Pr√§dikate w√§re</strong> , - in der WHERE-Klausel. </p><br><p>  Ich werde den Unterschied mit einem solchen synthetischen Beispiel erkl√§ren: </p><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> foo, bar, baz, qux, quux <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> namespace.set <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> (baz!=<span class="hljs-string"><span class="hljs-string">'a'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> (foo&gt;<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> (bar&lt;=<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> foo&gt;<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> quux <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> <span class="hljs-string"><span class="hljs-string">'%force%'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> (qux <span class="hljs-keyword"><span class="hljs-keyword">WITHIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CAST</span></span>(<span class="hljs-string"><span class="hljs-string">'{\"type\": \"Polygon\", \"coordinates\": [0.0, 0.0],[1.0, 0.0],[1.0, 1.0],[0.0, 1.0],[0.0, 0.0]}'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> GEOJSON)</code> </pre> <br><p>  - Es ist sowohl lesbar als auch relativ klar, welche Aufzeichnungen der Kunde erhalten wollte.  Wenn Sie eine solche Anforderung direkt in das Protokoll einf√ºgen, k√∂nnen Sie sie sp√§ter zum manuellen Debuggen abrufen.  Das ist sehr praktisch, wenn Sie alle m√∂glichen seltsamen Situationen analysieren. </p><br><p>  Betrachten wir nun den Aufruf der Pr√§dikat-API in einem funktionalen Stil: </p><br><pre> <code class="java hljs">Statement reference = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Statement(); reference.setSetName(<span class="hljs-string"><span class="hljs-string">"set"</span></span>); reference.setNamespace(<span class="hljs-string"><span class="hljs-string">"namespace"</span></span>); reference.setBinNames(<span class="hljs-string"><span class="hljs-string">"foo"</span></span>, <span class="hljs-string"><span class="hljs-string">"bar"</span></span>, <span class="hljs-string"><span class="hljs-string">"baz"</span></span>, <span class="hljs-string"><span class="hljs-string">"qux"</span></span>, <span class="hljs-string"><span class="hljs-string">"quux"</span></span>); reference.setFillter(Filter.stringNotEqual(<span class="hljs-string"><span class="hljs-string">"baz"</span></span>, <span class="hljs-string"><span class="hljs-string">"a"</span></span>)); reference.setPredExp(<span class="hljs-comment"><span class="hljs-comment">// 20 expressions in RPN PredExp.integerBin("foo") , PredExp.integerValue(2) , PredExp.integerGreater() , PredExp.integerBin("bar") , PredExp.integerValue(3) , PredExp.integerLessEq() , PredExp.integerBin("foo") , PredExp.integerValue(5) , PredExp.integerGreater() , PredExp.or(2) , PredExp.and(2) , PredExp.stringBin("quux") , PredExp.stringValue(".*force.*") , PredExp.stringRegex(RegexFlag.ICASE) , PredExp.and(2) , PredExp.geoJSONBin("qux") , PredExp.geoJSONValue("{\"type\": \"Polygon\", \"coordinates\": [0.0, 0.0],[1.0, 0.0],[1.0, 1.0],[0.0, 1.0],[0.0, 0.0]}") , PredExp.geoJSONWithin() , PredExp.not() , PredExp.or(2) );</span></span></code> </pre> <br><p>  Hier ist die Codewand und sogar in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">umgekehrter polnischer Notation</a> .  Nein, ich verstehe, dass die Stack-Maschine aus Sicht des Programmierers der Engine selbst einfach und bequem zu implementieren ist, aber um Pr√§dikate in RPN aus der Client-Anwendung zu r√§tseln und zu schreiben ... Ich pers√∂nlich m√∂chte nicht an den Anbieter denken, ich m√∂chte mich als Verbraucher dieser API Es war praktisch.  Pr√§dikate sind selbst mit einer Hersteller-Client-Erweiterung (konzeptionell √§hnlich der Java Persistence Criteria API) unpraktisch zu schreiben.  Und dennoch gibt es kein lesbares SELECT im Abfrageprotokoll. </p><br><p>  Im Allgemeinen wurde SQL erfunden, um kriterienbasierte Abfragen in einer Vogelsprache zu schreiben, die nahezu nat√ºrlich ist.  Man fragt sich also, was zur H√∂lle? </p><br><p>  Warten Sie, etwas stimmt nicht ... Gibt es auf dem KDPV einen Screenshot aus der offiziellen Dokumentation des Aerosolders, auf dem SELECT vollst√§ndig beschrieben ist? </p><br><p>  Ja, beschrieben.  Das ist nur AQL - dies ist ein Dienstprogramm eines Drittanbieters, das in einer dunklen Nacht vom linken Hinterfu√ü geschrieben und vor drei Jahren w√§hrend der vorherigen Version des Aerosoldering vom Anbieter aufgegeben wurde.  Es hat nichts mit der Client-Bibliothek zu tun, obwohl es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf einer Kr√∂te geschrieben ist</a> - einschlie√ülich. </p><br><p>  Die Version von vor drei Jahren hatte keine Pr√§dikat-API, und daher gibt es in AQL keine Unterst√ºtzung f√ºr Pr√§dikate, und all das nach WHERE ist tats√§chlich ein Aufruf des Index (sekund√§r oder prim√§r).  Nun, das hei√üt, n√§her an der SQL-Erweiterung wie USE oder WITH.  Das hei√üt, Sie k√∂nnen AQL-Quellen nicht einfach in Ersatzteile zerlegen und in Ihrer Anwendung f√ºr Pr√§dikataufrufe verwenden. </p><br><p>  Au√üerdem wurde es, wie gesagt, in der dunklen Nacht mit dem linken Hinterfu√ü geschrieben, und es ist unm√∂glich, die ANTLR4- <a href="">Grammatik zu betrachten</a> , nach der AQL die Abfrage ohne Tr√§nen analysiert.  Nun, f√ºr meinen Geschmack.  Aus irgendeinem Grund liebe ich es, wenn die deklarative Definition von Grammatik nicht mit Kr√∂tencode gemischt wird und dort sehr coole Nudeln gebraut werden. </p><br><p>  Zum Gl√ºck scheine ich auch zu wissen, wie man ANTLR macht.  Es stimmt, ich habe lange Zeit keinen Checker mitgenommen und das letzte Mal unter der dritten Version geschrieben.  Viertens - es ist viel sch√∂ner, denn wer eine manuelle AST-Tour schreiben m√∂chte, wenn alles vor uns geschrieben wurde und es einen normalen Besucher gibt, also fangen wir an. </p><br><p>  Wir nehmen die <a href="">SQLite-Syntax</a> als Basis und versuchen, alles Unn√∂tige wegzuwerfen.  Wir brauchen nur SELECT und nichts weiter. </p><br><pre> <code class="plaintext hljs">grammar SQLite; simple_select_stmt : ( K_WITH K_RECURSIVE? common_table_expression ( ',' common_table_expression )* )? select_core ( K_ORDER K_BY ordering_term ( ',' ordering_term )* )? ( K_LIMIT expr ( ( K_OFFSET | ',' ) expr )? )? ; select_core : K_SELECT ( K_DISTINCT | K_ALL )? result_column ( ',' result_column )* ( K_FROM ( table_or_subquery ( ',' table_or_subquery )* | join_clause ) )? ( K_WHERE expr )? ( K_GROUP K_BY expr ( ',' expr )* ( K_HAVING expr )? )? | K_VALUES '(' expr ( ',' expr )* ')' ( ',' '(' expr ( ',' expr )* ')' )* ; expr : literal_value | BIND_PARAMETER | ( ( database_name '.' )? table_name '.' )? column_name | unary_operator expr | expr '||' expr | expr ( '*' | '/' | '%' ) expr | expr ( '+' | '-' ) expr | expr ( '&lt;&lt;' | '&gt;&gt;' | '&amp;' | '|' ) expr | expr ( '&lt;' | '&lt;=' | '&gt;' | '&gt;=' ) expr | expr ( '=' | '==' | '!=' | '&lt;&gt;' | K_IS | K_IS K_NOT | K_IN | K_LIKE | K_GLOB | K_MATCH | K_REGEXP ) expr | expr K_AND expr | expr K_OR expr | function_name '(' ( K_DISTINCT? expr ( ',' expr )* | '*' )? ')' | '(' expr ')' | K_CAST '(' expr K_AS type_name ')' | expr K_COLLATE collation_name | expr K_NOT? ( K_LIKE | K_GLOB | K_REGEXP | K_MATCH ) expr ( K_ESCAPE expr )? | expr ( K_ISNULL | K_NOTNULL | K_NOT K_NULL ) | expr K_IS K_NOT? expr | expr K_NOT? K_BETWEEN expr K_AND expr | expr K_NOT? K_IN ( '(' ( select_stmt | expr ( ',' expr )* )? ')' | ( database_name '.' )? table_name ) | ( ( K_NOT )? K_EXISTS )? '(' select_stmt ')' | K_CASE expr? ( K_WHEN expr K_THEN expr )+ ( K_ELSE expr )? K_END | raise_function ;</code> </pre> <br><p>  Hmm ... Soviel zu SELECT zu viel.  Und wenn es ziemlich einfach ist, √ºbersch√ºssiges Material loszuwerden, gibt es noch eine weitere schlechte Sache in Bezug auf die Struktur der resultierenden Problemumgehung. </p><br><p>  Das ultimative Ziel ist die √úbersetzung in die Pr√§dikat-API mit RPN und impliziter Stack-Maschine.  Und hier tr√§gt der atomare Ausdruck in keiner Weise zu einer solchen Transformation bei, da er eine normale Analyse von links nach rechts impliziert.  Ja und rekursiv definiert. </p><br><p>  Das hei√üt, wir k√∂nnen unser synthetisches Beispiel erhalten, aber es wird genau so gelesen, wie es geschrieben ist, von links nach rechts: </p><br><pre> <code class="plaintext hljs">(foo&gt;2  (bar&lt;=3  foo&gt;5)  quux _ '%force%')  (qux _('{\"type\": \"Polygon\", \"coordinates\": [0.0, 0.0],[1.0, 0.0],[1.0, 1.0],[0.0, 1.0],[0.0, 0.0]}')</code> </pre> <br><p>  Es gibt Klammern, die die Priorit√§t des Parsens bestimmen (was bedeutet, dass Sie auf dem Stapel hin und her baumeln m√ºssen), und einige Operatoren verhalten sich wie Funktionsaufrufe. </p><br><p>  Und wir brauchen diese Sequenz: </p><br><pre> <code class="plaintext hljs">foo 2 &gt; bar 3 &lt;= foo 5 &gt;   quux ".*force.*" _  qux "{\"type\": \"Polygon\", \"coordinates\": [0.0, 0.0],[1.0, 0.0],[1.0, 1.0],[0.0, 1.0],[0.0, 0.0]}" _  </code> </pre> <br><p>  Brr, Zinn, schlechtes Gehirn zum Lesen.  Ohne Klammern gibt es jedoch keine Rollbacks und Missverst√§ndnisse bei der Reihenfolge des Anrufs.  Und wie √ºbersetzen wir einander? </p><br><p>  Und dann passiert in einem armen Gehirn ein Schoko!  - Hallo, dies ist ein klassischer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rangierbahnhof</a> von vielen.  prof.  Dijkstra!  Normalerweise ben√∂tigen okolobigdatovskimi-Schamanen wie ich keine Algorithmen, weil wir einfach die Prototypen, die bereits von Datensatanisten geschrieben wurden, von Python auf die Kr√∂te √ºbertragen und dann eine lange und langwierige Leistung der L√∂sung erbringen, die durch rein technische (== schamanistische) und nicht wissenschaftliche Methoden erhalten wurde . </p><br><p>  Aber dann wurde es pl√∂tzlich notwendig, den Algorithmus zu kennen.  Oder zumindest eine Idee davon.  Gl√ºcklicherweise wurden in den letzten Jahren nicht alle Universit√§tskurse vergessen, und da ich mich an gestapelte Maschinen erinnere, kann ich auch noch etwas anderes √ºber die zugeh√∂rigen Algorithmen herausfinden. </p><br><p>  Okay  In einer von Shunting Yard gesch√§rften Grammatik w√ºrde ein SELECT auf der obersten Ebene folgenderma√üen aussehen: </p><br><pre> <code class="plaintext hljs">select_stmt : K_SELECT ( STAR | column_name ( COMMA column_name )* ) ( K_FROM from_set )? ( (K_USE | K_WITH) index_expr )? ( K_WHERE where_expr )? ; where_expr : ( atomic_expr | OPEN_PAR | CLOSE_PAR | logic_op )+ ; logic_op : K_NOT | K_AND | K_OR ; atomic_expr : column_name ( equality_op | regex_op ) STRING_LITERAL | ( column_name | meta_name ) ( equality_op | comparison_op ) NUMERIC_LITERAL | column_name map_op iter_expr | column_name list_op iter_expr | column_name geo_op cast_expr ;</code> </pre> <br><p>  Das hei√üt, die den Klammern entsprechenden Token sind signifikant, und es sollte kein rekursiver Ausdruck vorhanden sein.  Stattdessen wird es eine Menge aller private_expr geben, und alle sind endlich. </p><br><p>  In dem Code auf der Kr√∂te, den der Besucher f√ºr diesen Baum implementiert, machen die Dinge etwas mehr s√ºchtig - in strikter √úbereinstimmung mit dem Algorithmus, der selbst die h√§ngende Logik verarbeitet und die Klammern ausgleicht.  Ich werde keinen Auszug geben ( <a href="">schauen Sie sich den GC</a> selbst an), aber ich werde die folgende √úberlegung machen. </p><br><p>  Es wird deutlich, warum sich die Autoren des Aero-Spikes nicht um die Unterst√ºtzung von Pr√§dikaten in AQL gek√ºmmert haben und diese vor drei Jahren aufgegeben haben.  Weil es streng typisiert ist und der Aero-Spike selbst als schemalose Geschichte dargestellt wird.  Daher ist es unm√∂glich, eine Abfrage von Bare SQL ohne ein vorbestimmtes Schema zu √ºbernehmen und auszuweiden.  Ups </p><br><p>  Aber wir sind verbrannt und vor allem arrogant.  Wir brauchen ein Schema mit Feldtypen, also wird es ein Schema mit Feldtypen geben.  Dar√ºber hinaus verf√ºgt die Client-Bibliothek bereits √ºber alle erforderlichen Definitionen, sie m√ºssen nur noch abgeholt werden.  Obwohl ich f√ºr jeden Typ viel Code schreiben musste (siehe den gleichen Link aus Zeile 56). </p><br><p>  Jetzt initialisieren ... </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> HashMap FOO_BAR_BAZ = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap() {{ put(<span class="hljs-string"><span class="hljs-string">"namespace.set0"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap() {{ put(<span class="hljs-string"><span class="hljs-string">"foo"</span></span>, ParticleType.INTEGER); put(<span class="hljs-string"><span class="hljs-string">"bar"</span></span>, ParticleType.DOUBLE); put(<span class="hljs-string"><span class="hljs-string">"baz"</span></span>, ParticleType.STRING); put(<span class="hljs-string"><span class="hljs-string">"qux"</span></span>, ParticleType.GEOJSON); put(<span class="hljs-string"><span class="hljs-string">"quux"</span></span>, ParticleType.STRING); put(<span class="hljs-string"><span class="hljs-string">"quuux"</span></span>, ParticleType.LIST); put(<span class="hljs-string"><span class="hljs-string">"corge"</span></span>, ParticleType.MAP); put(<span class="hljs-string"><span class="hljs-string">"corge.uier"</span></span>, ParticleType.INTEGER); }}); put(<span class="hljs-string"><span class="hljs-string">"namespace.set1"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap() {{ put(<span class="hljs-string"><span class="hljs-string">"grault"</span></span>, ParticleType.INTEGER); put(<span class="hljs-string"><span class="hljs-string">"garply"</span></span>, ParticleType.STRING); }}); }}; AQLSelectEx selectEx = AQLSelectEx.forSchema(FOO_BAR_BAZ);</code> </pre> <br><p>  ... und voila, jetzt ruckelt unsere synthetische Abfrage einfach und deutlich vom Aerosoldering: </p><br><pre> <code class="java hljs">Statement statement = selectEx.fromString(<span class="hljs-string"><span class="hljs-string">"SELECT foo,bar,baz,qux,quux FROM namespace.set WITH (baz='a') WHERE (foo&gt;2 AND (bar &lt;=3 OR foo&gt;5) AND quux LIKE '%force%') OR NOT (qux WITHIN CAST('{\"type\": \"Polygon\", \"coordinates\": [0.0, 0.0],[1.0, 0.0],[1.0, 1.0],[0.0, 1.0],[0.0, 0.0]}' AS GEOJSON)"</span></span>);</code> </pre> <br><p>  Und um das Formular von der Web-M√ºndung in die Anfrage selbst zu konvertieren, greifen wir auf eine Menge Code zu, der vor langer Zeit in die Web-M√ºndung geschrieben wurde ... wenn das Unternehmen das Projekt endlich erreicht, hat der Kunde es vorerst ins Regal gestellt.  Es ist eine Schande, verdammt, ich habe fast eine Woche Zeit verbracht. </p><br><p>  Ich hoffe, ich habe es mit Vorteil ausgegeben, und die AQLSelectEx-Bibliothek wird f√ºr jemanden n√ºtzlich sein, und der Ansatz selbst wird ein wenig realistischeres Tutorial sein als andere Artikel aus dem Hub, die sich mit ANTLR befassen. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de435902/">https://habr.com/ru/post/de435902/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de435892/index.html">Die Zusammenfassung interessanter Materialien f√ºr den mobilen Entwickler # 281 (vom 7. bis 13. Januar)</a></li>
<li><a href="../de435894/index.html">Privatunterricht. Versteckt in PHP</a></li>
<li><a href="../de435896/index.html">Verwenden von DiagnosticSource in .NET Core: Theorie</a></li>
<li><a href="../de435898/index.html">Woran Sie bei einem NALSD-Interview denken sollten</a></li>
<li><a href="../de435900/index.html">Verkapseln Sie es</a></li>
<li><a href="../de435904/index.html">KI √ºbersetzte Gehirnaktivit√§t in Sprache</a></li>
<li><a href="../de435906/index.html">Schrittmacher-Cluster-Speicher + DRBD (Dual Primary) + ctdb</a></li>
<li><a href="../de435908/index.html">Asketisches Netz: Prototyp-Flohm√§rkte f√ºr unterwegs und js</a></li>
<li><a href="../de435910/index.html">Warum hat BSD den Kampf mit GNU / Linux verloren?</a></li>
<li><a href="../de435912/index.html">Die Hauptprobleme bei der Entwicklung moderner Schnittstellen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>