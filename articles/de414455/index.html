<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚è±Ô∏è üí¢ üë† Algorithmus zur Erzeugung von Farbpaletten üë¶ üö∂üèΩ üòá</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Suchen Sie eine sch√∂ne Farbpalette f√ºr die Website? K√ºrzlich zu Hause installierte RGB-Hintergrundbeleuchtung oder m√∂chten Sie den Raum in neuen Farbe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Algorithmus zur Erzeugung von Farbpaletten</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/414455/"><img src="https://habrastorage.org/webt/np/sq/wx/npsqwx0pfiklizr7ipaoeoiocik.png"><br><br>  Suchen Sie eine sch√∂ne Farbpalette f√ºr die Website?  K√ºrzlich zu Hause installierte RGB-Hintergrundbeleuchtung oder m√∂chten Sie den Raum in neuen Farben streichen?  Oder haben Sie eine Tastatur mit farbiger Hintergrundbeleuchtung gekauft und m√∂chten diese optimal nutzen?  Unabh√§ngig davon, in welcher Situation Sie sich befinden, k√∂nnen Sie die Farbschemata st√§ndig anpassen. <br><br>  Als Programmierer habe ich schnell ein paar Codezeilen geschrieben, um zuf√§llige Farbpaletten zu generieren.  Als ich sofort merkte, dass ein solcher Ansatz m√∂glicherweise nicht die besten Ergebnisse liefert, implementierte ich in wenigen Minuten die Schaltfl√§che ‚ÄûNeu laden‚Äú der Palette.  Es schien mir, dass man nur ein wenig Gl√ºck und Geduld braucht, um ein gro√üartiges Programm zu erhalten. <br><br>  Ich habe mich geirrt  Zuf√§llige Farbpalettengenerierung ist zum Kotzen.  Von Zeit zu Zeit existiert eine sch√∂ne Farbe neben einem h√§sslichen, schmutzigen Braun- oder Gelbton.  Farbkollektionen sind immer entweder zu dunkel oder zu hell und kontrastarm, oder die Sets bestehen aus sehr √§hnlichen Farben.  Es war notwendig, eine andere L√∂sung zu finden. <br><a name="habracut"></a><br><h2>  Farbr√§ume </h2><br>  Beginnen wir mit der Theorie.  Heutzutage werden Farbr√§ume h√§ufig zur Klassifizierung von Farben verwendet: <br><br><h4>  sRGB </h4><br>  RGB steht f√ºr <code>Red Green Blue</code> .  So funktionieren Displays: Sie emittieren Licht in drei Farbkan√§len, die in unterschiedlichen Anteilen gemischt werden, um alle Arten von Farben zu erzeugen.  Der Wert in jedem Kanal variiert von 0 bis 255. <code>R:0, G:0, B:0</code> (oder # 000000 im hexadezimalen Ausdruck) ist schwarz und <code>R:255, G:255, B:255</code> (oder #ffffff ) - wei√ü. <br><br><h4>  Cie Labor </h4><br><img src="https://habrastorage.org/webt/2w/qu/vx/2wquvx5sk5muisnxaiz_suoadyw.png" align="right">  Der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CIE Lab-</a> Farbraum ist breiter als sRGB und umfasst alle vom Menschen wahrgenommenen Farben.  Es wurde mit der Erwartung der Universalit√§t der Wahrnehmung geschaffen.  Mit anderen Worten, der Abstand zwischen den Farben entspricht dem subjektiven Unterschied: Wenn die Werte der beiden Farben nahe beieinander liegen, sehen sie √§hnlich aus.  Andererseits werden auch zwei weit voneinander entfernte Farben als v√∂llig unterschiedlich empfunden.  In CIE Lab wird mehr Platz f√ºr ges√§ttigte Farben als f√ºr Dunkel und Hell zugewiesen.  F√ºr das menschliche Auge ist sehr dunkles Gr√ºn √ºbrigens kaum von Schwarz zu unterscheiden.  Au√üerdem ist dieser Farbraum dreidimensional: <code>L</code> bedeutet Helligkeit (von 0,0 bis 1,0), <code>a</code> und <code>b</code> (von etwa -1,0 bis 1,0) sind Farbkan√§le. <br><br><h4>  HCL </h4><br><img src="https://habrastorage.org/webt/h5/pj/nx/h5pjnxhcfpy_hau5oep_pjghq_m.png" align="right">  Wenn RGB beschreibt, wie das Display Farben anzeigt, und das CIE Lab, wie wir sie wahrnehmen, ist HCL der Farbraum, der am genauesten beschreibt, wie wir √ºber Farben denken.  Es ist auch dreidimensional, <code>H</code> steht f√ºr Farbton (0 bis 360 Grad), <code></code> steht f√ºr Chroma und <code>L</code> steht f√ºr Luminanz (beide Parameter werden von 0,0 bis 1,0 gemessen). <br><br>  Ich empfehle, CIE Lab f√ºr Berechnungen und HCL f√ºr die Darstellung von Paletten f√ºr den Benutzer zu verwenden.  Bei Bedarf k√∂nnen Sie die Werte aus diesen Leerzeichen in RGB konvertieren. <br><br><h2>  Farbraumzerlegung </h2><br><img src="https://habrastorage.org/webt/iq/aq/3h/iqaq3hljpo3n3w7zwugsyvy21na.gif" align="right">  Da ich eine Reihe einzigartiger, individueller Farben ben√∂tigen w√ºrde, verwerfen wir zuerst diejenigen, die sehr √§hnlich aussehen.  Der Farbraum ist dreidimensional, und der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">k-Mittelwert-Clustering-</a> Algorithmus ist perfekt zum Trennen solcher niedrigdimensionaler Datens√§tze.  Er versucht, die Daten (in unserem Fall den Farbraum) in k separate Bereiche zu zerlegen.  Und dann wird die Palette aus den zentralen Punkten der Cluster in diesen Bereichen zusammengestellt.  Das GIF zeigt eine zweidimensionale Darstellung des Algorithmus im dreidimensionalen Raum des CIE Lab. <br><br><h2>  Einen Code schreiben </h2><br>  Mit der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">auf Go implementierten</a> k-means-Methode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wird</a> das Problem in nur wenigen Codezeilen gel√∂st.  Bereiten Sie zun√§chst die Farbwerte im CIE Lab-Bereich vor: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d clusters.Observations <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> l := <span class="hljs-number"><span class="hljs-number">0.2</span></span>; l &lt;= <span class="hljs-number"><span class="hljs-number">0.8</span></span>; l += <span class="hljs-number"><span class="hljs-number">0.05</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> a := <span class="hljs-number"><span class="hljs-number">-1.0</span></span>; a &lt; <span class="hljs-number"><span class="hljs-number">1.0</span></span>; a += <span class="hljs-number"><span class="hljs-number">0.1</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> b := <span class="hljs-number"><span class="hljs-number">-1.0</span></span>; b &lt; <span class="hljs-number"><span class="hljs-number">1.0</span></span>; b += <span class="hljs-number"><span class="hljs-number">0.1</span></span> { d = <span class="hljs-built_in"><span class="hljs-built_in">append</span></span>(d, clusters.Coordinates{l, a, b}) } } }</code> </pre> <br>  Ich habe bereits einige Parameter aufgegriffen und den generierten Farben bestimmte Einschr√§nkungen auferlegt.  In diesem Beispiel werden die Farben zu dunkel (Helligkeit &lt;0,2) und zu hell (Helligkeit&gt; 0,8) ausgegeben. <br><br>  Erweitern Sie den neu erstellten Farbraum: <br><br><pre> <code class="go hljs">km := kmeans.New() clusters, _ := km.Partition(d, <span class="hljs-number"><span class="hljs-number">8</span></span>)</code> </pre> <br>  Die <code>Partition</code> gibt Slices von acht Clustern zur√ºck.  Jeder Cluster hat einen <code>Center</code> , der in einem bestimmten Raum eine separate Farbe hat.  Seine Koordinaten k√∂nnen leicht in einen hexadezimalen RGB-Wert umgewandelt werden: <br><br><pre> <code class="go hljs">col := colorful.Lab(c.Center[<span class="hljs-number"><span class="hljs-number">0</span></span>], c.Center[<span class="hljs-number"><span class="hljs-number">1</span></span>], c.Center[<span class="hljs-number"><span class="hljs-number">2</span></span>]) col.Clamped().Hex()</code> </pre> <br>  Denken Sie daran, dass ein CIE Lab breiter als RGB ist. Dies bedeutet, dass einige Lab-Werte nicht in RGB konvertiert werden k√∂nnen.  Diese Werte k√∂nnen mit <code>Clamped</code> auf die n√§chstgelegenen Farben im RGB-Bereich konvertiert werden. <br><br><h2>  Vollst√§ndiger Code </h2><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"github.com/muesli/kmeans"</span></span> <span class="hljs-string"><span class="hljs-string">"github.com/muesli/clusters"</span></span> colorful <span class="hljs-string"><span class="hljs-string">"github.com/lucasb-eyer/go-colorful"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// Create data points in the CIE L*a*b* color space // l for lightness, a &amp; b for color channels var d clusters.Observations for l := 0.2; l &lt;= 0.8; l += 0.05 { for a := -1.0; a &lt;= 1.0; a += 0.1 { for b := -1.0; b &lt;= 1.0; b += 0.1 { d = append(d, clusters.Coordinates{l, a, b}) } } } // Partition the color space into 8 clusters km := kmeans.New() clusters, _ := km.Partition(d, 8) for _, c := range clusters { col := colorful.Lab(c.Center[0], c.Center[1], c.Center[2]) fmt.Println("Color as Hex:", col.Clamped().Hex()) } }</span></span></code> </pre> <br>  Ein Satz von acht (nicht so) zuf√§lligen Farben, die von diesem Code generiert werden: <br><br><img src="https://habrastorage.org/webt/dr/z4/qe/drz4qedyfmtp5tedhuincbfvyly.png"><br><br><h2>  Definieren Sie Ihren eigenen Farbraum </h2><br>  F√ºgen Sie mehr Kontrolle √ºber die Farberzeugung hinzu.  Wir k√∂nnen die f√ºr weitere Berechnungen verwendeten Daten einfach verwalten und so den Farbraum ausw√§hlen, der unseren Anforderungen entspricht.  Erstellen Sie eine Pastellpalette: <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pastel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c colorful.Color)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { _, s, v := col.Hsv() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0.2</span></span> &lt;= s &amp;&amp; s &lt;= <span class="hljs-number"><span class="hljs-number">0.4</span></span> &amp;&amp; <span class="hljs-number"><span class="hljs-number">0.7</span></span> &lt;= v &amp;&amp; v &lt;= <span class="hljs-number"><span class="hljs-number">1.0</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> l := <span class="hljs-number"><span class="hljs-number">0.0</span></span>; l &lt;= <span class="hljs-number"><span class="hljs-number">1.0</span></span>; l += <span class="hljs-number"><span class="hljs-number">0.05</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> a := <span class="hljs-number"><span class="hljs-number">-1.0</span></span>; a &lt;= <span class="hljs-number"><span class="hljs-number">1.0</span></span>; a += <span class="hljs-number"><span class="hljs-number">0.1</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> b := <span class="hljs-number"><span class="hljs-number">-1.0</span></span>; b &lt;= <span class="hljs-number"><span class="hljs-number">1.0</span></span>; b += <span class="hljs-number"><span class="hljs-number">0.1</span></span> { col := colorful.Lab(l, a, b) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> col.IsValid() &amp;&amp; pastel(col) { d = <span class="hljs-built_in"><span class="hljs-built_in">append</span></span>(d, clusters.Coordinates{l, a, b}) } } } }</code> </pre> <br>  Ein weiterer Farbraum ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HSV</a> . Die Buchstaben im Namen bedeuten Farbton, S√§ttigung und Helligkeit.  In diesem Raum haben Pastellfarben normalerweise eine hohe Helligkeit und eine niedrige S√§ttigung. <br><br>  Folgendes ist passiert: <br><br><img src="https://habrastorage.org/webt/ey/pi/ts/eypitssqzzdykt5-kkyq5vfijq4.png"><br><br>  Sie k√∂nnen Farben auch nach S√§ttigung (Chroma) und Helligkeit filtern, um eine Reihe von ‚Äûwarmen‚Äú T√∂nen zu erhalten: <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">warm</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(col colorful.Color)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bool</span></span></span></span> { _, c, l := col.Hcl() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0.1</span></span> &lt;= c &amp;&amp; c &lt;= <span class="hljs-number"><span class="hljs-number">0.4</span></span> &amp;&amp; <span class="hljs-number"><span class="hljs-number">0.2</span></span> &lt;= l &amp;&amp; l &lt;= <span class="hljs-number"><span class="hljs-number">0.5</span></span> }</code> </pre> <br>  Ergebnis: <br><br><img src="https://habrastorage.org/webt/ya/8p/g4/ya8pg4sgrit501zyn4pram7mwss.png"><br><br><h2>  Gamut-Paket </h2><br>  Ich arbeite an einer Bibliothek namens <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gamut</a> , in der alle hier beschriebenen Teile in einem praktischen Paket f√ºr unterwegs zusammengefasst sind, mit dem Sie Farbpaletten und Themen erstellen und verwalten k√∂nnen.  Sie k√∂nnen es bereits versuchen, aber es ist noch in Arbeit. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de414455/">https://habr.com/ru/post/de414455/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de414445/index.html">Verbesserung von Zimbra mit der Zextras Suite</a></li>
<li><a href="../de414447/index.html">Sorten aller Zeiten</a></li>
<li><a href="../de414449/index.html">Wie man sich mit allen Betreibern im Stadion anfreundet und es nicht mit Hunderten von Antennen s√§t</a></li>
<li><a href="../de414451/index.html">"Testerkalender" f√ºr Juni. Der Tester muss den Fehler erkennen, Caner lesen und den Umzug organisieren.</a></li>
<li><a href="../de414453/index.html">Implementieren Sie den Pfadfinder f√ºr KI-Agenten mit NavMesh</a></li>
<li><a href="../de414459/index.html">Detektoren und Deskriptoren von singul√§ren Punkten FAST, BRIEF, ORB</a></li>
<li><a href="../de414463/index.html">AI selbst hat gelernt, wie man einen Zauberw√ºrfel baut</a></li>
<li><a href="../de414465/index.html">Meta Crush Saga: Spiel zur Kompilierungszeit</a></li>
<li><a href="../de414467/index.html">Beitr√§ge von der Minsk C ++ Konferenz CoreHard Spring 2018</a></li>
<li><a href="../de414469/index.html">Sicherheitswoche 22: Zwei Sekunden Smart Locks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>