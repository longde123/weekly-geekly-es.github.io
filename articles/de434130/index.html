<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍🎤 🙌🏿 ⛹🏼 Reaktive Schnittstelle. Vortrag von Artyom Belov auf den FrontTalks 2018 😪 🦀 🕴🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In browserbasiertem JavaScript sind die Schnittstellen vorhersehbar. "Single-Threaded" mit einem Transaktions-Rendering-Skript: leerer Bildschirm - La...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reaktive Schnittstelle. Vortrag von Artyom Belov auf den FrontTalks 2018</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/434130/">  In browserbasiertem JavaScript sind die Schnittstellen vorhersehbar.  "Single-Threaded" mit einem Transaktions-Rendering-Skript: leerer Bildschirm - Laden - Schnittstelle.  Der Entwickler Artyom Belov von Cxense, der sich auf das Pareto-Gesetz konzentrierte, berichtete, dass er die Anwendung nach 20% der Zeit aufgrund der Techniken des "reaktiven Designs" um 80% schneller gemacht habe - noch nicht formuliert, aber bereits in Produkten mit Priorität auf UX verwendet. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/N1vRiKV0iC4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><blockquote>  Aber was die erfahreneren Leute betrifft, die nicht aus Webpack herauskommen und Webpack leiden lassen und nicht umgekehrt?  Sie stecken Plugins ein.  Da wir jedoch am Anfang der Entwicklung dieser Technik stehen, bietet uns das Ökosystem ein Plug-In, das Ihren HTML-Code verwendet, HTML mit integriertem CSS generiert und einen QR-Code für Werbung bereitstellt ... Ernsthaft?  Danach können Sie die Stile durch "! Wichtig" unterbrechen ... Vielleicht lohnt es sich, eine Frage zu stellen, warum ich noch im Frontend bin. </blockquote><br><a name="habracut"></a>  - Hallo allerseits, ich bin Artyom Belov.  Heutzutage kann das Wort reaktiv missverstanden werden: Es gibt einen großen Prozentsatz von Menschen, die React gelernt haben, bevor sie JavaScript gelernt haben.  Daher ist das Aussprechen solcher Wurzelwörter etwas mehrdeutig.  Aber für mich ist es immer noch Physik, das Gesetz der Impulserhaltung. <br><br>  Beginnen wir mit dem Problem.  Dies ist unser professioneller Perfektionismus.  Schließlich zeigen wir die Benutzeroberfläche nicht, bevor sie nicht "perfekt" ist - unserer Meinung nach.  Und ich weiß nicht, was bei der Nominierung für Informationsinhalte gewinnen wird: ein weißer Browserbildschirm oder ein Spinner mit der Aufschrift "Fühlen Sie sich frei, für immer zu warten";  es ist mir nicht klar. <br><br><img src="https://habrastorage.org/webt/lp/6n/im/lp6nimmouvk7ykz4jww1kxtbao0.gif"><br><br>  Eines ist jedoch sicher: Das Rendern ist wie die Antwort einer Anwendung keine Transaktion.  Das Anzeigen einer Schnittstelle ist keine logische Einheit, daher müssen Sie sie stapelweise schlagen. <br><br><img src="https://habrastorage.org/webt/ij/ye/mg/ijyemgrfvrmwrqzfqjuhgij4fv0.png"><br><br>  Und im Frontend helfen wir uns im Allgemeinen, wir lügen. <br><br><img src="https://habrastorage.org/webt/xt/oq/wy/xtoqwysiydkejdbgl-5hks8zlss.png"><br><br>  Wenn wir über die „Ladezeit“ unserer Anwendung sprechen, sagen wir den Ausdruck „durchschnittliche Ladezeit“ grundsätzlich nicht vollständig.  Obwohl Sie nicht sieben Bereiche in der Stirn haben müssen, damit die zweite Anwendung mithilfe von Service Worker sofort heruntergeladen werden kann. <br><br>  Und es ist traurig, dass Lighthouse die Tatsache unterstützt, dass der Antrag möglicherweise keine Lebenszeichen aufweist und erst in den letzten zwei oder drei Frames des Audits sagt: "Ich habe mich tatsächlich zum Zeichnen bereit gemacht." <br><br><img src="https://habrastorage.org/webt/hp/de/x6/hpdex6uk7jnysvos09h9bmzqjlw.png"><br><br>  Und im Anwendungstest für Leistung jetzt unter 100 Punkte zu kommen, ist nicht das Schwierigste.  Google hat dies bemerkt, danke. <br><br><img src="https://habrastorage.org/webt/nf/od/yc/nfodyc04egapyj2qguraxrtuqgs.png"><br><br>  Ein so umfassendes Konzept wie „Time to Interactive“ wurde in Phasen unterteilt: „First Interactive“, „Time to Consistently Interactive“ und „First Input Delay“.  Wenn Sie mit den ersten beiden Begriffen, die Google Translate verwenden, verstehen, wie Sie interagieren und sich verbessern können, kann letzteres anhand des Hauptthreads des Browsers erklärt werden. <br><br><img src="https://habrastorage.org/webt/xl/d0/ii/xld0iivk6nhvadqiitkkno1wf3a.png"><br><br>  Ein Beispiel.  Wenn der Benutzer unmittelbar nach dem Laden der Benutzeroberfläche auf das Textfeld klickt, kann eine Pause auftreten, bevor im Textfeld ein Cursor mit Eingabemöglichkeit angezeigt wird.  Das liegt daran, dass der Haupt-Thread beschäftigt war und die Benutzeroberfläche zum Zeitpunkt des Klicks für die Interaktion bereit schien. <br><br><img src="https://habrastorage.org/webt/se/hs/3r/sehs3rflulvrztgsmqwmiedgseo.png"><br><br>  Es kommt alles darauf an, dass Metriken in Lighthouse fast dieselbe Fertigstellungszeit haben - während sie ausgeglichen sein müssen. <br><br><img src="https://habrastorage.org/webt/r9/yi/ry/r9yiryefiv4vpmmgjz16xjkuk0c.png"><br><br>  "First Meaning Paint" sollte so schnell wie möglich sein, "First Contentful Paint" sollte dahinter stehen und "Time to Consistently Interactive" sollte kein so großes Delta vom weißen Bildschirm des Browsers bis zur Bereitschaft der Benutzeroberfläche aufweisen. <br><br>  Natürlich gibt es Experten, die sagen, dass dies einfach erreicht wird: <br><br>  „Wir müssen die Anwendung in Webpack in Routen aufteilen und serverseitiges Rendering durchführen.  Ja, es gibt eine halbe Stunde Arbeit! " <br><br>  Dies ist jedoch nicht ganz richtig ... Lieber Experte, erwähnt nicht, dass jede neue Route dasselbe tut - Laden.  Und wieder haben alle Metriken in Lighthous ein kleines Delta zwischen sich, da die Route normalerweise von Bedeutung ist. <br><br>  Und manchmal arbeiten Sie nicht in einem großen erfolgreichen Unternehmen, und das serverseitige Rendern ist nicht vorhanden.  Und wenn Sie Ihre offizielle Position nutzen, starten Sie F &amp; E mit einem klaren Ziel - progressives Rendern.  Wie ein progressives JPEG, das im 167er Absatz von Lebedevs „Covodry“ steht. <br><br>  Im Prinzip sieht der F &amp; E-Plan sehr einfach aus ... Sie müssen irgendwie einen Gewinn erzielen.  Und vergessen Sie nicht die Hauptsache - die Zeit und die Daten, die gerne brennen.  Und wenn Sie das Manifest eines minimalistischen Programmierers in Ihren Händen halten, müssen Sie sich daran erinnern: Verbringen Sie 20% der Zeit mit 80% des Ergebnisses. <br><br>  Ich habe Werkzeuge.  Zum Beispiel Lag-Radar. <br><br><img src="https://habrastorage.org/webt/me/ui/gi/meuigirky5fida7bawgkzjkrhq4.gif"><br><br>  Ich bin zwar nicht nach Santa Barbara gegangen, die die Idee gestohlen hat, Dan Abramov von jemandem oder umgekehrt ... Bei der letzten Präsentation von JSConf Iceland 2018 wurde ein ziemlich interessantes Konzept gezeigt: Das Radar ist grün, bis es eine Verzögerung im Hauptprofil erkennt, und Wenn sie empfindlich sind, wird das Radar gelb und wenn es kritisch ist, wird es rot. <br><br>  Und durch Drücken von Cmd + Umschalt + P auf einem Mac - oder Strg + Umschalt + P auf einem Windows - habe ich mir den Prozentsatz der Codeabdeckung angesehen.  Und dann schaute er auf das Bündel. <br><br><img src="https://habrastorage.org/webt/qm/zp/xh/qmzpxh1534fuw7wmb12pcahwbu0.png"><br><br><img src="https://habrastorage.org/webt/n9/kb/b4/n9kbb4yn0tr_elsgaqcjmxoabsi.png"><br><br>  Und wieder zu decken und wieder zu bündeln.  Und er beschloss einfach, die Situation zu akzeptieren.  Ich muss hier nichts rausholen.  In Projekten verwenden viele Tools, die de facto Standards sind.  Zum Beispiel hat Ivan Akulov zusammen mit Google Chrome Labs vor langer Zeit ein Repository für die Webpack-Optimierung, Webpack-Libs-Optimierungen, erstellt.  Und warum sollte ich das wiederholen, über Code Split sprechen, über Lazy Load?  Dies ist der bekannte und fortschrittliche Standard im Jahr 2018. <br><br><img src="https://habrastorage.org/webt/bl/hq/sf/blhqsfhtguvdph0phjugkxdii8k.png"><br><br>  Und Beantwortung der Frage "Was kann in einer halben Sekunde heruntergeladen werden?"  - JS und hier ist der Gewinner.  Zum Beispiel können Sie 100 Kilobyte JPG hochladen und 0,04 für die Verarbeitung ausgeben, aber JS tut dies, da die Verarbeitung 20 Mal viel länger dauert. <br><br><img src="https://habrastorage.org/webt/i5/2t/bf/i52tbfz_iunvezbqv4inaps2gbu.png"><br><br>  Weil Sie sich merken müssen, was passiert, wenn die Anwendung gestartet wird. <br><br><img src="https://habrastorage.org/webt/zg/ma/2b/zgma2bclq-utain_9wewam-znea.png"><br><br>  Nach dem Herunterladen beginnt das, was Sie neu zusammenstellen möchten: Laden Sie es gleichzeitig herunter und analysieren, kompilieren und führen Sie Code zu einem anderen Zeitpunkt aus. <br><br><img src="https://habrastorage.org/webt/ut/ac/cn/utaccnuew-ezap0uwwa5gwdeptm.png"><br><br>  Ich habe nachgesehen, was uns das &lt;script /&gt; -Tag bietet.  Es gibt viele Möglichkeiten, und ich dachte daran, einen Hinweis zu verwenden. <br><br><img src="https://habrastorage.org/webt/lp/zm/wv/lpzmwvxsbdqhy601fquwvbfxh3g.png"><br><br>  Hmm, es gibt keine Fernbedienungen im Raum, kein Telefon.  Ich nehme 50:50.  Wir haben noch die Optionen "Aufschieben" und Typ = "Modul". <br><br><img src="https://habrastorage.org/webt/p9/4m/xn/p94mxnan7l_grkm1eeboiwompra.png"><br><br>  Sie werden geladen, ohne das Parsen zu blockieren, verarbeiten sich jedoch selbst und werden später ausgeführt, wenn die Anwendung dafür am besten bereit ist - wodurch der Hauptthread freigegeben wird. <br><br>  Aber es gibt keine richtige Option, und die Worte des großen Mannes Ben Schwartz werden in Erinnerung gerufen.  Nicht dass er es auf Russisch gesagt hätte, aber: <br><br><img src="https://habrastorage.org/webt/hp/fm/pj/hpfmpjka7cobou4-ycbslc75fr8.png"><br><br>  Um dies zu vermeiden, benötige ich JS. Daher ist die Erstanforderung die einzige Methode, mit der ich unnötige Anforderungen entfernen kann. <br><br><img src="https://habrastorage.org/webt/j2/_a/gk/j2_agk43qhz_filmtvcb5nqisps.png"><br><br>  Nun, Sie müssen Webpack erneut konfigurieren.  Dies ist nicht immer die Verbindung von Plugins. <br><br><img src="https://habrastorage.org/webt/py/br/dv/pybrdv0jaypvevaxpxmyxztnre8.png"><br><br>  Wenn ich mir das Bundle im Kontext anschaue, verstehe ich nicht wirklich, wie ich diese oder jene Codefragmente zwischen Dateien wiederhole. <br><br><img src="https://habrastorage.org/webt/ip/ns/ac/ipnsacv2uyzzh71ojjbvzq84-8s.png"><br><br>  Wahrscheinlich müssen sie in der kritischen Anfrage herausgenommen werden? <br><br><img src="https://habrastorage.org/webt/je/bj/sg/jebjsglelbtzg5ae1qpebqp6qpu.png"><br><br>  Mit ConcatenationPlugin () löschen wir das Webpack-Manifest, dh eine Liste aller Dateien der Webpack-Module, und binden diesen JSON ein, wodurch diese unnötige Anforderung beseitigt wird.  Stellen Sie dann fest, ob asynchroner Code eingebettet werden kann.  Und schließlich binden Sie die Gehirne von Webpack direkt in die Seite ein, um nicht auf das Laden aller Module zu warten.  Ja, nehmen Sie den Laufzeitblock und binden Sie ihn in HTML ein. <br><br><img src="https://habrastorage.org/webt/ez/se/mn/ezsemnw4njhrkyzacjq9ou3mpj8.png"><br><br>  Im Allgemeinen bietet die Integration von Webpack-Gehirnen nicht die bezauberndste Steigerung, aber jetzt sprechen wir über kritisches CSS. <br><br><img src="https://habrastorage.org/webt/qk/to/yp/qktoypf0izvaipse92pg8y5xrsc.png"><br><br>  Aber ... wir haben festgestellt, dass Critical CSS für Leute gedacht ist, die keine Einzelseitenanwendung haben.  Ohne eine vollständige HTML-Route können Tools schließlich kein kritisches CSS erstellen. <br><br><img src="https://habrastorage.org/webt/bb/q6/h7/bbq6h7fs1wp0en6enqpq_fghdce.png"><br><br>  Und es ist gut, dass es einen Puppenspieler gibt, der das könnte. <br><br><img src="https://habrastorage.org/webt/u4/np/ah/u4npah85nsmbspbasfgjblwndzw.png"><br><br>  Schließlich wurde das, was ihm präsentiert wurde - der Ordner „Puppenspieler-Beispiele“ auf GitHub - auf Projekte übertragen.  Und so entstand das Rendertron-Projekt.  Richtig, um zumindest einen Fehler von ihm zu erhalten, müssen Sie die Adresse eingeben, die Eingabetaste drücken ... und fertig. <br><br><img src="https://habrastorage.org/webt/l-/ld/lu/l-ldlucikl595sr-nblxzeyltgw.png"><br><br>  Gut, dass es andere npm-Pakete gibt, die funktionieren.  Sie sind offenbar länger auf dem Markt. <br><br><img src="https://habrastorage.org/webt/we/uk/ka/weukkaysbo1vbcd5dkoq6hlz3_i.png"><br><br>  Nach der Installation und Erstellung des Pakets kann ich mit der üblichen Locke den HTML-Code meiner Anwendung auf dem lokalen Server erneut rendern und dadurch den kritischen HTML-Code abrufen, der zum Erstellen von kritischem CSS erforderlich ist. <br><br><img src="https://habrastorage.org/webt/zn/yu/zy/znyuzyyszqvrvvyiw7ymmol2qe0.png"><br><br>  Anstatt auf ein Rendern zu warten, hat der Bootstrap-HTML-Code erwartungsgemäß zugenommen, aber es ist noch zu früh, um darauf einzugehen.  Setzen wir den Weg zu Critical CSS fort. <br><br><img src="https://habrastorage.org/webt/jq/tr/qp/jqtrqp3qmikvmse5u1o_hsenvii.png"><br><br>  Nochmals vielen Dank an Eddie Osmani für die Pflege des Ökosystems und die Erstellung von HtmlCriticalWebpackPlugin (), wo Sie für die Konfiguration nur ein paar Fragen beantworten müssen: Wo und in welcher Form können Sie kritisches CSS speichern? <br><br><img src="https://habrastorage.org/webt/m8/bp/e4/m8bpe4c-ycf0ycrpp61za6enyvs.png"><br><br>  Oh, Sie können die verdächtige Linie "Painthouse" sehen.  Dies ist ein sehr interessanter Moment, in dem Eddie Osmani ein Paket eines Drittanbieters verwendet, das, wie sich herausstellt, sogar über eine Weboberfläche verfügt. <br><br><img src="https://habrastorage.org/webt/1w/e5/fx/1we5fxpgriedvqtvzvpet_-xtck.png"><br><br>  Aber um ehrlich zu sein, schäme ich mich, das Webinterface zu verwenden. Dies ist anscheinend für Layoutdesigner gedacht, die keine Befehlszeile haben.  Aber alles ist einfach, wie in der Yuppy-Anzeige aus den 90er Jahren: Klicken Sie einfach auf "Erstellen". <br><br><img src="https://habrastorage.org/webt/xw/gu/3b/xwgu3bgd2swexdr43zgtvchpjru.png"><br><br>  Und dies ergibt nicht das bezauberndste Wachstum, sondern ist sehr empfindlich für die erste Färbung der Anwendung. <br><br><img src="https://habrastorage.org/webt/oh/a4/qv/oha4qvyjpbhbs7i0na3urkctw6k.png"><br><br>  Mit einer Spur von der Welt, und die Anwendung kommt leicht zu einer Wendung, wenn Schriftarten anfangen zu tanzen.  Diese Zeile wird als 3 Sekunden bezeichnet.  Und der Abschnitt beginnt, in dem wir, das Frontend, selten verlieren, nämlich das Spiel mit Schriftarten. <br><br>  Rezepte zum Herunterladen von Schriftarten.  Hier hilft uns die Schriftanzeige.  Nachdem wir verstanden haben, dass Sie sich hier nicht sofort bewegen müssen, entscheiden wir uns zuerst: Blitz aus unsichtbarem Text, FOIT oder Blitz aus nicht gestyltem Text, FOUT, ist für uns beängstigend. <br><br><img src="https://habrastorage.org/webt/ud/o3/hb/udo3hbctfrr-fhnau-vnzbxqd0a.png"><br><br>  Und - der Spoiler - das Schrecklichste für uns ist unsichtbarer Textblitz, da er eine größere Anzahl von Neuzeichnungen verursacht. <br><br><img src="https://habrastorage.org/webt/ae/re/1h/aere1hwgbcmtxarci1bmzgzuwne.gif"><br><br>  Kurz gesagt, wenn Sie sich ansehen, welche Eigenschaften für die Schriftanzeige vorhanden sind, können Sie Swap oder Fallback selbst auswählen.  Im Großen und Ganzen gibt es von den fünf Eigenschaften, die Sie für sich selbst auswählen können, keine richtige Option. <br><br><img src="https://habrastorage.org/webt/fv/tc/jt/fvtcjt7ei2axij5oq-qmg5oeicq.png"><br><br>  Außerdem habe ich gehört, dass es ein Font Style Matcher-Projekt gibt, mit dem ich eine anständige Fallback-Systemschrift für meine Comic Sans-Schrift auswählen und nicht mit Google Fonts laden kann.  Obwohl das nicht ganz richtig ist ... <br><br>  Es gibt Leute wie Zach Zezerman, die das FOFT-Konzept erfunden haben. <br><br><img src="https://habrastorage.org/webt/h7/bh/_k/h7bh_kzwxghwdaoczjamornpc3q.png"><br><br>  Was im Browser praktisch nicht sichtbar ist. <br><br>  Dies wird durch die Tatsache erreicht, dass beim Herunterladen der römischen Schriftart des Standardstils der Browser bereits so intelligent ist, dass er eine "falsche" fette, kursive, unterstrichene und durchgestrichene Schriftart basierend auf dem Standardstil erstellen kann.  Dies gibt einen Blitz, aber fast keinen.  Implementieren Sie dazu die sogenannte Preload-Schriftart. <br><br><img src="https://habrastorage.org/webt/v8/he/o6/v8heo68v8tmi1l-n4xhk_iy925c.png"><br><br>  Aber was ist, wenn ich sage, dass die Schriftart in CSS eingebettet werden kann?  Und das ist wahr, und es gibt auch einen Gewinn! <br><br><img src="https://habrastorage.org/webt/fb/rw/or/fbrworg5hz3rnlf4xb0_jumd81u.png"><br><br>  Es sieht aus wie eine Kombination von Techniken.  Sie müssen nur die römische Schrift direkt in CSS einbetten.  So können Sie bei der ersten Hauptkenntnis des Benutzers mit der Anwendung Wachstum erzielen und dann die verbleibenden Headsets bei Bedarf, jedoch nicht sofort, laden. <br><br><img src="https://habrastorage.org/webt/vc/2n/u_/vc2nu_vy1q3yhdvrjm3tiiuidek.png"><br><br>  Nach so vielen Manipulationen weist „Time to Consistently Interactive“ immer noch ein signifikantes Delta gegenüber anderen Indikatoren auf.  Ich habe nur die Färbung der Anwendung verbessert.  Das ist nicht schlecht, aber nicht das, wonach ich strebte.  Meiner Meinung nach muss ich ein Problem auffangen.  Und sie wurde gefangen und am Schwanz.  Immerhin: <br><br><img src="https://habrastorage.org/webt/zj/_-/ym/zj_-ymrryk3ncctvdj3draofpqc.png"><br><br>  Es ist ziemlich offensichtlich, warum dies in vielen Browsern nicht implementiert ist.  Eine springende Schriftrolle und das Bestimmen, was Sie laden müssen und was nicht, ist nicht die einfachste.  Vielleicht wird es eine Fahrt geben. <br><br>  Aber auch hier werden Experten Ihnen sagen - es gibt eine faule Ladung. <br><br><img src="https://habrastorage.org/webt/yt/mn/gc/ytmngczroz9syd-jilxja1j1lga.gif"><br><br>  Aber denk daran, wie du mit ihm interagierst.  Sie können nicht 100% der Fälle abdecken. <br><br><img src="https://habrastorage.org/webt/e1/xy/to/e1xytoccbdrthqr7t8mwkpz7xy0.png"><br><br>  Ja, und wenn Sie den Weg der Optimierung beschreiten und alle Kontrollpunkte im Buch von Eddie Osmani „Essential Image Optimization“ abschließen, bleiben Sie auch bei ungelösten Problemen ... <br><br>  Aber ich habe gesehen, dass Eddie Osmani Reddit gerne in seinen Almanachen und Artikeln über das Medium erwähnt.  Ich erinnerte mich, dass ein Freund dort für mich arbeitete und ihn um Rat rief. Er erinnerte mich daran, dass es so etwas wie eine wahrgenommene Aufführung gab, und diese Definition lag in den Hallen meines Geistes. <br><br><img src="https://habrastorage.org/webt/wq/7b/ir/wq7bircpigeuun2zq-1dnd2olnc.gif"><br><br>  Hier helfen uns übrigens Designer.  Dies ist der Zeitpunkt, an dem nicht die Zeit spielt, sondern wie Sie Ihre Anwendung präsentieren.  Und die richtige Taktik dafür sind „Inhaltsplatzhalter“. <br><br><img src="https://habrastorage.org/webt/sw/sp/as/swspasimeyisz0xpntedhjtwzws.gif"><br><br>  YouTube kann dies beispielsweise tun. <br><br><img src="https://habrastorage.org/webt/hs/dg/oc/hsdgocb3gd43zf28rdk9mrp8sw0.gif"><br><br>  YouTube schafft es, das Video abzuspielen, bevor alle unterstützenden Komponenten heruntergeladen wurden.  Dies geschieht mit Blick auf die Zukunft aufgrund von Inhaltsplatzhaltern, wie z. B. grauen animierten Würfeln. <br><br><img src="https://habrastorage.org/webt/r-/mn/hd/r-mnhdfosuuxnoxjmo3nkyirbiw.png"><br><br>  Und was bietet uns das Ökosystem im Moment?  Nichts Besonderes.  CodePen  Lassen Sie uns ihre Implementierungen sehen. <br><br><img src="https://habrastorage.org/webt/i3/yg/rn/i3ygrnaewv6egvo6m30viqtnizc.gif"><br><br>  Es ist eine ziemliche Karte, die in jedem Designmuster stattfindet.  Mal sehen ... <br><br><img src="https://habrastorage.org/webt/vh/bt/ol/vhbtolsbdzrzwsbjwbssns2k9ku.png"><br><br>  Wir müssen ein paar Variablen in 30 Zeilen deklarieren, ein Eigenschaftsgramm in 50 Zeilen deklarieren, ein paar Animationen und wir erhalten 100 Codezeilen ... Dies sind 10 von 10 auf der Lea Viru-Skala. <br><br>  Aber was die erfahreneren Leute betrifft, die nicht aus Webpack herauskommen und Webpack leiden lassen und nicht umgekehrt?  Sie stecken Plugins ein.  Da wir jedoch am Anfang der Entwicklung dieser Technik stehen, bietet uns das Ökosystem ein Plug-In, das Ihren HTML-Code verwendet, HTML mit integriertem CSS generiert und anscheinend einen QR-Code für Werbung liefert ... Ernsthaft?  Danach können Sie die Stile durch "! Wichtig" unterbrechen ... Vielleicht lohnt es sich, eine Frage zu stellen, warum ich noch im Frontend bin. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2e1/eb8/136/2e1eb8136cda41afbcb5c57377fa0b39.gif"><br><br>  Aber es gibt ein Team von Leuten, für die Witze über ihr Produkt einfach nicht lustig sind.  PostCSS. <br><br><img src="https://habrastorage.org/webt/gs/oz/4p/gsoz4pnecxwewknvoeibchl3jt4.png"><br><br>  Sie können sich immer auf sie verlassen.  Insbesondere können Sie diese Technik - "Contant Placeholders" - auf dem CSS-Konzept "Multi Background" implementieren.  In diesem Fall kann eine einzelne "Hintergrund" -Eigenschaft mehrere Werte in einem Komma enthalten. <br><br><img src="https://habrastorage.org/webt/-d/ib/ve/-dibve2ok-afdcgtacyxwmnoy7o.png"><br><br>  CanIUse antwortet nur, ja. <br><br><img src="https://habrastorage.org/webt/kj/rl/cy/kjrlcyol1rb9wjelcbypmi27cbg.png"><br><br>  Dies sieht wie folgt aus, das uns vertraut ist.  Bekannt - dank Medium. <br><br><img src="https://habrastorage.org/webt/6z/gg/k8/6zggk89ocfmdsweepjofkwynb7y.png"><br><br>  Auf Ihr Bild wird ein linearer Farbverlauf angewendet, der so schnell wie möglich angezeigt wird. Später wird darüber ein Bild in voller Größe angezeigt.  Im Code sieht es ungefähr so ​​aus. <br><br><img src="https://habrastorage.org/webt/aa/vz/gp/aavzgp6cvedhymo93jwi_qlgavi.png"><br><br>  Die erste Prioritätsanforderung beginnt das Bild natürlich schwer zu laden.  Und sofort, wenn Sie CSS erhalten, erscheint ein linearer Farbverlauf.  Der lineare Gradient ist jedoch nicht so gerade und glatt wie die Lockerung. <br><br><img src="https://habrastorage.org/webt/qo/2v/5t/qo2v5tly1crltm-rhtr13byfwqs.png"><br><br>  Daher sollte der Code von einem anderen Plugin aufgenommen werden, wodurch der lineare Gradient weicher wird. <br><br><img src="https://habrastorage.org/webt/vq/5o/hl/vq5ohlkxagfq4phxowdhbhdwjju.png"><br><br>  Mit einem kleinen Farbverlauf erstellen Sie jedoch Überlagerungen, die alle Fälle abdecken. <br><br><img src="https://habrastorage.org/webt/mc/2p/ko/mc2pkosyyjuaqzywe5n7snaxt2s.png"><br><br>  In diesem Fall funktioniert dies nicht richtig, da das Bild zu komplex ist, um eine Abstraktion mit nur einem linearen Farbverlauf zu erstellen.  Aber hier wird sqip funktionieren. <br><br><img src="https://habrastorage.org/webt/go/9q/k-/go9qk-zubonia-f8ce9rxpyjkjm.png"><br><br>  Dies ist ein CLI-Modul, mit dem Sie einen Platzhalter für Ihr Bild erstellen und mithilfe der Technik mit mehreren Hintergründen anhängen können. <br><br><img src="https://habrastorage.org/webt/yr/vo/3w/yrvo3wxdsdkoz3ycvvb63n_l7ja.png"><br><br>  Natürlich wird das Bild in voller Größe viel länger geladen und der Platzhalter von sqip wird aufgrund seines Gewichts viel schneller angezeigt. <br><br><img src="https://habrastorage.org/webt/k9/-f/ya/k9-fyawdkhg5wnj-g9ad0kg5ada.png"><br><br>  Aber das ist nicht ganz das, wonach ich strebe.  Ich möchte, dass schwere Bilder kommen, wenn ich sie brauche und nicht, wenn der Browser sie will.  Und ich muss dies in zwei CSS-Dateien aufteilen, eine in den &lt;head&gt; einfügen, in dem sich die hellen Bilder befinden, und dann die schweren Bilder in den &lt;body&gt; laden. <br><br><img src="https://habrastorage.org/webt/0x/3f/tp/0x3ftpbxbusr1rx9azjw0qwowfm.png"><br><br>  Aber was ist mit den verbleibenden Bildern, zum Beispiel in JS? <br><br><img src="https://habrastorage.org/webt/7i/pt/cd/7iptcduyrpohelvzqfoi7bh5n1a.png"><br><br>  Insbesondere die Manipulation mit SVG sieht enttäuschend aus.  Sie scheinen das SVG neu zeichnen zu wollen, aber durch vertrautes CSS ist es nicht unter Ihrer Kontrolle. <br><br><img src="https://habrastorage.org/webt/3n/aa/os/3naaosb4noviggdmao_ddela4ua.png" width="400"><br><br>  Offenbar muss SVG nach neuen Trends Bestandteil werden. <br><br><img src="https://habrastorage.org/webt/np/mz/8i/npmz8i9lz8-4hvuot6hkeaabpiw.png"><br><br>  Mit Hilfe des Pakets, das Dan Abramov in „create-react-app“ übernommen hat - das ist „svgr“. <br><br><img src="https://habrastorage.org/webt/4h/cy/w0/4hcyw0pbrpkries7-9uubkcdxfw.png"><br><br>  Dies ist ein CLI-Tool, das SVG einfach in Ihr JS einfügt und mit dem Sie als Komponente arbeiten können.  Dies sind in der Tat drei Codezeilen. <br><br><img src="https://habrastorage.org/webt/do/2n/5v/do2n5vqnu2abhdcvg5tyzi4rfm0.png"><br><br>  Den Designern ist jedoch anscheinend nicht bewusst, dass viele Frameworks ein Stammelement der Komponente haben sollten.  Ich werde ihn nicht bitten, SVG aus Sketch auf "besondere Weise" zu "exportieren"? <br><br><img src="https://habrastorage.org/webt/-r/e8/ec/-re8eccxf55jvammpcjxbmrdjqy.png"><br><br>  Aufgrund einer Reihe kleinerer solcher Probleme muss man auf verdächtig beliebte Projekte achten. <br><br><img src="https://habrastorage.org/webt/4b/ia/a9/4biaa9-smgckysguhn6icrhoxr0.png"><br><br>  Zum Beispiel eine "React-Icon-Base", die sich als Ersatz für das &lt;SVG&gt; -Tag anbietet.  Das Paket sagt uns sozusagen: Anstelle des &lt;SVG&gt; -Tags wickeln Sie Ihren SVG-Code in mich ein. Danach werde ich die Eigenschaften anwenden: Füllen, Text, Strich und was auch immer, weil ich die Logik habe, die dient. “ Brücke "von CSS. <br><br><img src="https://habrastorage.org/webt/68/0t/nu/680tnuknxotglxqfkedecjeimom.png"><br><br>  Und mit Hilfe eines einfachen Befehls können Sie Ihre svgr-Vorlage für Ihr Projekt erstellen. <br><br><img src="https://habrastorage.org/webt/lj/5e/a1/lj5ea1ltfxnqds_ryjlihtscmuk.png"><br><br><img src="https://habrastorage.org/webt/ab/4d/ru/ab4drujwtqjw58qy7qy_ymkkp9k.png"><br><br>  Um ehrlich zu sein, weiß ich nicht, warum dieses Projekt nur für React ist. <br><br>  Als Nächstes können Sie die Symbole importieren, die nicht mit syntaktischem Zucker überwachsen sind. <br><br><img src="https://habrastorage.org/webt/fo/fa/ip/fofaipth6nhgfrhxfkzvo-qkqye.png"><br><br>  Und schließlich entfernen Sie sich vom veralteten, möglicherweise &lt;img&gt; -Tag, hin zu dem Komponentenansatz, über den alle sprechen. <br><br><img src="https://habrastorage.org/webt/xb/mn/r_/xbmnr_cmfjvvuiiaynjd94ntbpo.png"><br><br>  Und für was?  Zum Beispiel, damit Sie die Pseudoklasse ": export" in Ihren SCSS \ SASS-Dateien ausprobieren. <br><br><img src="https://habrastorage.org/webt/da/gc/ab/dagcabkl5ljvze-pi5byymjvezs.png"><br><br>  Ich bin höchstwahrscheinlich sicher, dass dies auch im Webpack Ihrer Version funktioniert.  Die Pseudoklasse ": export" entlädt die Variablen, die Sie in SCSS deklarieren.  Dann können Sie sie in JS-Code importieren.  Und das war's, und Sie müssen keine Fahrräder anbauen, wie eine Art JSON-Datei mit allen Farben und allem. <br><br><img src="https://habrastorage.org/webt/az/et/4p/azet4purq7uyv1by9ieb2t4quey.png"><br><br>  Mit Svgr können Sie die erste Färbung der Anwendung reduzieren.  Aber nicht so ehrlich, weil der Code einfach von CSS nach JS migriert wurde. <br><br>  Aber zweitens haben wir sqip vergessen, was wird das Wachstum nach seiner Anwendung sein? <br><br><img src="https://habrastorage.org/webt/uo/kz/a_/uokza_2mediwdi2zvrbde81ocrk.png"><br><br>  Mit einfachen dynamischen Importfähigkeiten wenden wir die folgende Technik an.  Wir laden die Light-Version des Bildes, den SQL-Platzhalter und zeigen sie in der Benutzeroberfläche an.  Dann warten wir beim dynamischen Import in .then () auf das Symbol in voller Größe, ohne die Interaktion mit der Schnittstelle zu blockieren. <br><br><img src="https://habrastorage.org/webt/jp/8z/os/jp8zosqdywuruwqgm3uvctgrm64.png"><br><br>  Dies führt dazu, dass wir das Thema SVG erhalten, das wir wie eine echte JS-Komponente mit Argumenten überschreiben können. <br><br><img src="https://habrastorage.org/webt/s4/om/yc/s4omyca_uxov66_rf0cwwkkpkkc.png"><br><br>  Und schließlich gibt es eine Erhöhung der notwendigen Metriken des "interaktiven".  Und damit beantworten Sie die Hauptfrage, die in den Artikeln von Eddie Osmani gestellt wird: "Ist überhaupt etwas los?"  Sie antworten viel früher: "Ja, es passiert." <br><br><img src="https://habrastorage.org/webt/sw/sp/as/swspasimeyisz0xpntedhjtwzws.gif" width="400"><br><br>  Aber es fühlt sich so an, als hätte ich nur Symbole in der Anwendung.  Es gibt zum Beispiel auch Formularfelder. <br><br><img src="https://habrastorage.org/webt/zi/uv/zm/ziuvzmaqb4r8qjqxzkrovjs6ija.png"><br><br>  Hier ist eine Lösung, die Sie jetzt googeln können.  Zum Beispiel "React-Content-Placeholder" und "Vue-Content-Placeholder".  Aber hör auf, hier wird uns angeboten, SVG-Platzhalter für Komponenten manuell zu zeichnen. <br><br><img src="https://habrastorage.org/webt/sg/px/ig/sgpxigjx8adf8m086qspkr_uzmo.png"><br><br>  Es gibt auch eine Webversion, in der Sie Platzhalter per Drag &amp; Drop ziehen und erstellen können.  Welches wird genau wie Ihre realen Komponenten sein. <br><br><img src="https://habrastorage.org/webt/4s/x4/ql/4sx4qlbodank-sxpc_2gjwkwrou.png"><br><br>  Aber ob es darum geht, gestaltete Komponenten fünfmal zu laden - nein!  - und das gestaltete System, das ich benutze. <br><br><img src="https://habrastorage.org/webt/ws/5t/99/ws5t99mmlkoxoltvtieoqyrq6hc.png"><br><br>  Und machen Sie es zu einer Regel, dass Sie sich strikt an das Design-System halten müssen.  Und nicht Symbole und Bilder sollten korrekt exportiert werden, sondern ein Designsystem sollte diesen Prozess regulieren.  Die Breite des Textfeldes sollte nicht fest codiert sein, aber das Entwurfssystem sollte dies oben regeln. <br><br><img src="https://habrastorage.org/webt/zk/rh/j9/zkrhj9u2cfz5flb8wzo4cny7xdc.png"><br><br>  Und nicht das Schwierigste ist es schließlich, einen ternären Operator zu verwenden, der unseren einfachsten Platzhalter anzeigt, der den Benutzer darüber informiert, dass er endlich an der Adresse angekommen ist, und dann die vollständige Komponente nur dann zu laden, wenn wir sie benötigen. <br><br>  Im Allgemeinen sollte es eine Demo geben, aber ich bin nicht wegen eines Werbeberichts hierher gekommen.  Aber die anderen Jungs, die ihr alle kennt, verdienen Respekt. <br><br><img src="https://habrastorage.org/webt/xx/mf/j-/xxmfj-n04brdzux-8cw0pqetkgk.png"><br><br>  Und wenn ich bei den Oscars wäre, würde ich einen Umschlag herausnehmen und etwas sagen wie: „Für den unglaublichen Einfallsreichtum bei der Implementierung des Inhaltsplatzhalters, nämlich bei der Implementierung der Animation mit einem 10x10-Pixel-GIF, anstatt CSS-Stile zu schreiben, wird der Titel vergeben "Experten für Animation, mit Grüßen aus der Vergangenheit, Instagram!" <br><br><img src="https://habrastorage.org/webt/xe/mt/ts/xemttszhiqkiwn9j7gdbhom4_5y.gif"><br><br>  Ich hoffe, sie rücken keine transparenten Einzelpixel-GIFs ein, und die Rahmeneigenschaft ist keine Doppeltabelle. <br><br>  Und ich möchte Sie daran erinnern: Verlassen Sie sich auf echte Benutzerüberwachung, RUM. <br><br><img src="https://habrastorage.org/webt/qh/mc/wi/qhmcwipplhkttpsr0dpvkp2juvq.png"><br><br>  Für echte Benutzer Ihrer Projekte und relevante Metriken. ,      ,  , first input delay. <br><br>  ,      ,    common-,       . <br><br>   ,        ,          . <br><br>  ,     ,     JPG    ,     . <br><br>   ,       . ,   . <br><br><img src="https://habrastorage.org/webt/m-/ld/d3/m-ldd3rl4p_uxyjrdch8rpojsdm.png"><br><br>  Und der letzte.  ,    ,   ,       ,     ,    - loadable-. ́,    ,     . ,    —     ,   .      —    ,     .  , , ,         Webpack.      ,  … great loading component?  ,  -   ?      ? <br><br>  ,      ,  , ,    .     . <br><br><img src="https://habrastorage.org/webt/fk/fh/vn/fkfhvn0b1unjt3c39uyebo8lczm.png"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de434130/">https://habr.com/ru/post/de434130/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de434120/index.html">React Tutorial, Teil 5: Erste Schritte mit einer TODO-Anwendung, Grundlagen des Stylings</a></li>
<li><a href="../de434122/index.html">Drehbuch - Kein Seitenobjekt</a></li>
<li><a href="../de434124/index.html">Aktivieren Sie die GPU-Beschleunigung in Photoshop unter Wine</a></li>
<li><a href="../de434126/index.html">Spielen Sie Medien mit der VLCj-Bibliothek ab</a></li>
<li><a href="../de434128/index.html">PHP Digest Nr. 146 (10. - 24. Dezember 2018) + 2018 Ergebnisse</a></li>
<li><a href="../de434132/index.html">Kaufen Sie einen Fernseher und rollen Sie ihn auf: LG plant, im kommenden Jahr mit dem Verkauf flexibler Fernseher zu beginnen</a></li>
<li><a href="../de434134/index.html">Analyse der Ergebnisse der Kaggle ML & DS-Umfrage 2018</a></li>
<li><a href="../de434136/index.html">Unternehmensanatomie</a></li>
<li><a href="../de434138/index.html">Wir schreiben unsere eigene virtuelle Maschine</a></li>
<li><a href="../de434140/index.html">Eine kurze Geschichte der asynchronen Javascript-Funktionen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>