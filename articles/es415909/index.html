<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>别   Extensi贸n web entre navegadores para scripts personalizados Parte 2   锔</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En este art铆culo, contin煤o la serie de publicaciones en las que quiero hablar sobre mi experiencia escribiendo una extensi贸n web para navegadores. Ya ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Extensi贸n web entre navegadores para scripts personalizados Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415909/"> En este art铆culo, contin煤o la serie de publicaciones en las que quiero hablar sobre mi experiencia escribiendo una extensi贸n web para navegadores.  Ya ten铆a experiencia en la creaci贸n de una extensi贸n web, que fue instalada por unos 100,000 usuarios de Chrome, que funcion贸 de manera aut贸noma, pero en esta serie de art铆culos decid铆 profundizar en el proceso de desarrollo de la extensi贸n web al integrarla estrechamente con el lado del servidor. <br><br><img width="65" src="https://habrastorage.org/getpro/habr/post_images/188/09a/2d6/18809a2d60126c22c85f0dbb38c188dc.png" alt="imagen"><img width="65" src="https://habrastorage.org/getpro/habr/post_images/474/b37/7c9/474b377c9fd5df452ee6b2ae849c2891.png" alt="imagen"><img width="65" src="https://habrastorage.org/getpro/habr/post_images/804/cc0/c91/804cc0c91bd30f83537540bd6aca22df.png" alt="imagen"><img width="65" src="https://habrastorage.org/getpro/habr/post_images/94e/097/462/94e097462cb7f3af3b482312f6fd2ee9.png" alt="imagen"><img width="65" src="https://habrastorage.org/getpro/habr/post_images/4bf/d73/6f6/4bfd736f6830e4396071afedad261bfd.png" alt="imagen"><br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 4</a> <br><br><h1>  Elegir un marco para el lado del servidor </h1><br>  Al comienzo de mi idea, estaba pensando en c贸mo guardar los datos obtenidos como resultado del script.  Me vino a la mente la posibilidad de usar locaStorage o soluciones similares para una base de datos del lado del cliente.  A medida que la planificaci贸n del c贸digo progresaba a lo largo de este camino, result贸 que descargar archivos y almacenarlos en la computadora del usuario no es una buena idea, ya que el usuario estar谩 vinculado a una computadora. <br><br>  Por lo tanto, es necesario guardar los scripts de usuario, los datos obtenidos como resultado de ejecutar scripts en el lado del servidor.  Los archivos de usuario tambi茅n deben cargarse a trav茅s del lado del servidor.  El usuario debe registrarse, restablecer la contrase帽a, etc. directamente a trav茅s de la interfaz de extensi贸n web, porque el registro a trav茅s de una p谩gina separada no permitir铆a una interacci贸n c贸moda con la extensi贸n web. <br><br>  Por lo tanto, se eligi贸 la forma de usar XHR junto con la API RESTful.  Esta opci贸n tambi茅n permite el uso futuro del mismo c贸digo para construir un sistema de entrega de datos canalizado.  Por ejemplo, obtener posiciones de recursos web en los resultados del motor de b煤squeda se puede programar en un ciclo diario.  Despu茅s de eso, una aplicaci贸n de terceros solicita datos obtenidos como resultado de la secuencia de comandos utilizando la API y crea un gr谩fico que muestra la tendencia de la posici贸n a cambiar en los resultados de b煤squeda. <br><br>  Muchos marcos en diferentes lenguajes de programaci贸n tienen bibliotecas, m贸dulos y paquetes para el r谩pido desarrollo de aplicaciones de servidor RESTful.  Durante aproximadamente 12 a帽os he estado trabajando con varios marcos basados en PHP, y durante los 煤ltimos 3 a帽os tambi茅n he estado trabajando con Meteor.js.  Este marco se ejecuta sobre node.js, por lo que lo eleg铆 para la parte del servidor debido a su alto rendimiento (en promedio 112 milisegundos para escribir una l铆nea de datos recibidos del script) y un rico conjunto de paquetes listos para construir la aplicaci贸n. <br><br>  Como la biblioteca RESTful, eleg铆 el paquete <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/kahmali/meteor-restivus</a> , que, entre otras cosas, necesitaba ser parcheado, ya que no funcionaba correctamente con autorizaci贸n de gancho y protecci贸n contra la t茅cnica de adivinar contrase帽as infinitas. <br><br>  Restivus tiene una buena funcionalidad para describir la API RESTful y admite trabajar de forma autorizada o an贸nima.  Token y userId se utilizan como confirmaci贸n de autorizaci贸n para ejecutar un m茅todo definido por el usuario en una direcci贸n RESTful.  Estos par谩metros pueden almacenarse en permisos web localStorage y usarse al llamar a XHR. <br><br>  Para la zona administrativa, eleg铆 el paquete extensible y altamente configurable <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/yogiben/meteor-admin</a> , que me permiti贸 reducir el tiempo para crear muchas p谩ginas del mismo tipo para las necesidades del equipo de seguridad. <br><br><h1>  Dise帽o de una interfaz para extensiones web </h1><br>  La interfaz juega un papel decisivo en la selecci贸n de un producto por parte del usuario.  La conveniencia y el minimalismo fueron elegidos como los criterios principales para la interfaz de extensi贸n web.  Posteriormente, se agreg贸 un lado est茅tico para completar toda la aplicaci贸n. <br><br>  Semantic-ui fue elegido como el marco css / html.  Al mismo tiempo, rechac茅 paquetes npm adicionales y mecanismos de ensamblaje como webpack para minimizar las dependencias y el tama帽o de la extensi贸n web.  El c贸digo se escribe de la forma m谩s transparente posible, utilizando solo tres bibliotecas js y archivos de terceros. <br><br>  Para comenzar el proceso, se compil贸 una lista de las p谩ginas necesarias.  Las p谩ginas para trabajar con una cuenta de usuario se agruparon en esta lista. <br><br><ol><li>  P谩gina de inicio de sesi贸n </li><li>  P谩gina de registro </li><li>  P谩gina de restablecimiento de contrase帽a </li></ol><br>  En este punto, hubo un problema de restablecimiento de contrase帽a de enlace 煤nico.  En una aplicaci贸n normal, el usuario puede seguir el enlace, restablecer la contrase帽a y luego ingresar a la aplicaci贸n.  Una extensi贸n web puede "interceptar" enlaces mediante navigator.registerProtocolHandler y autorizar a un usuario en una extensi贸n web, pero no todos los navegadores lo admiten.  Por lo tanto, se decidi贸 restablecer la contrase帽a mediante el enlace, y luego el usuario puede ingresar la extensi贸n web utilizando la nueva contrase帽a. <br><br>  A continuaci贸n se muestra un formulario para registrar un nuevo usuario en la extensi贸n web. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/g2/lf/bj/g2lfbjvztch3zrtd0jaht9cg4t8.jpeg"></div><br>  Aqu铆 puede ver elementos para el marketing social, como el c贸digo de invitaci贸n y enlaces para su distribuci贸n en las redes sociales junto al elemento para enviar una pregunta al servicio de soporte. <br><br>  Despu茅s del registro, o despu茅s de la autorizaci贸n, el usuario puede editar su perfil directamente en la extensi贸n web.  Esto mejora cualitativamente la soluci贸n actual, ya que elimina la necesidad de trabajar con un sitio web separado.  El usuario puede realizar todas las acciones en un solo lugar. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gv/wo/um/gvwoum6cbyvrxytabglygzwdzz0.jpeg"></div><br>  Todas las pantallas est谩n divididas en pesta帽as, lo que le permite moverse r谩pidamente entre pantallas y desempe帽a el papel de una especie de men煤.  En algunos casos, para una representaci贸n m谩s visual, los elementos se minimizan para la iteraci贸n actual.  Por ejemplo, las firmas de los botones se colocan en los botones mismos, aunque en el futuro se planea reemplazar la lista vertical de botones por una horizontal y eliminar las firmas en la informaci贸n sobre herramientas.  Esto se hace para maximizar la presentaci贸n de extensiones web para nuevos usuarios.  As铆 es como se hace la pantalla principal con una lista de scripts para la iteraci贸n actual. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/so/ts/hw/sotshwjbuo1ct-ze1ebnlnu3zxo.jpeg"></div><br>  Cada script de usuario debe ser creado por alguien.  Como se mencion贸 anteriormente en la extensi贸n web, puede haber tanto scripts p煤blicos como privados.  Para agregar scripts, use la siguiente forma simple. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pc/rb/6v/pcrb6vicyqaullwhdyx19m38ore.jpeg"></div><br>  Adem谩s, el usuario puede establecer un signo de publicidad de script, que permitir谩 a otros usuarios utilizar la experiencia de la comunidad de extensiones web. <br><br>  Los guiones p煤blicos tienen varias limitaciones.  Por ejemplo, no se pueden usar para el inicio en una p谩gina, en el programador de tareas y tienen teclas de acceso r谩pido.  Adem谩s, cada script p煤blico tiene la capacidad de "editar", durante el cual el usuario puede eliminar el signo de publicidad y guardarlo en un estado privado como su propio script.  Estos pasos adicionales son necesarios para proteger contra desarrolladores sin escr煤pulos.  Al "editar" un script p煤blico, el usuario deber谩 revisar el c贸digo y decidir su uso seg煤n sus necesidades. <br><br>  La descarga de archivos en la extensi贸n web se implementa leyendo el contenido del archivo en el b煤fer, codificando y enviando a trav茅s del canal XHR al servidor.  En el servidor POST, la solicitud se procesa y el archivo se env铆a al almacenamiento en la nube.  En los scripts, los usuarios pueden leer los archivos descargados a trav茅s de <b>GC.loadFile ('filename.ext');</b>  , una funci贸n de la biblioteca interna sobre la que se escribir谩 un art铆culo separado. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vl/fv/ka/vlfvkaykdsrv3r0mgoq-udrfpjk.jpeg"></div><br>  Cada secuencia de comandos puede escribir datos de c谩lculos llamando a la funci贸n de la biblioteca interna.  Cada llamada registrar谩 una fila en una celda con el mismo nombre para todas las filas.  De esta manera puede escribir archivos csv.  La siguiente pantalla muestra la interfaz para trabajar con datos de salida.  El usuario puede descargar los datos directamente desde la extensi贸n web, enviar el archivo generado a su correo electr贸nico, obtener un enlace a la API para su uso en una aplicaci贸n de terceros o eliminar los datos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3p/in/8u/3pin8uhwlqhcvezfqnj_vefckek.jpeg"></div><br>  Todas las acciones que cambian el estado de la secuencia de comandos, como la acci贸n de eliminaci贸n, requieren confirmaci贸n.  La extensi贸n web tiene una restricci贸n en el uso de ventanas emergentes o de confirmaci贸n, ya que tiene una interfaz que se ejecuta en ventanas emergentes.  Por lo tanto, se utiliza el mecanismo de entrada de la palabra de confirmaci贸n. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b3/mq/9w/b3mq9wvbp49gxlvuaw2d3fjwnxk.jpeg"></div><br>  En el pr贸ximo art铆culo hablar茅 sobre las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"trampas en la implementaci贸n de la interacci贸n de las extensiones web y el lado del servidor"</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es415909/">https://habr.com/ru/post/es415909/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es415899/index.html">Office 365 Outlook encontr贸 API no documentadas con registros detallados de actividad del usuario</a></li>
<li><a href="../es415901/index.html">La Comisi贸n del Consejo de la Federaci贸n apoy贸 la idea de crear una base IMEI para todos los tel茅fonos blancos</a></li>
<li><a href="../es415903/index.html">Bienvenido al verano DIYorDIE Meetup el 7 de julio</a></li>
<li><a href="../es415905/index.html">C贸mo cultivar un producto saludable (ejemplo de Juno)</a></li>
<li><a href="../es415907/index.html">C贸mo despedir empleados sin arriesgar la imagen de la empresa</a></li>
<li><a href="../es415911/index.html">Acceso a un 铆ndice de matriz inexistente</a></li>
<li><a href="../es415913/index.html">Calentamiento para aquellos que pueden en Python</a></li>
<li><a href="../es415915/index.html">Pr谩ctica dura: 驴qu茅 tipo de conexi贸n inal谩mbrica tenemos para los hoteleros?</a></li>
<li><a href="../es415917/index.html">La "Ley de primavera" entr贸 en vigor: 驴qu茅 sigue?</a></li>
<li><a href="../es415919/index.html">Refactorizando un programa en Go: aceleraci贸n 23 veces</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>