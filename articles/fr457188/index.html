<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíß üå®Ô∏è ‚è±Ô∏è Calme calme conflit ü•™ üë©‚Äçüë©‚Äçüë¶ üí¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a trois ans, j'ai √©crit un article sur la biblioth√®que DI pour la langue Swift. √Ä partir de ce moment, la biblioth√®que a beaucoup chang√© et est d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Calme calme conflit</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457188/"><img src="https://habrastorage.org/files/c6d/c89/5d0/c6dc895d02324b96bc679f41228ab6bf.png" align="right" width="140" alt="ic√¥ne de la biblioth√®que">  Il y a trois ans, j'ai √©crit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un article</a> sur la biblioth√®que DI pour la langue Swift.  √Ä partir de ce moment, la biblioth√®que a beaucoup chang√© et est devenue la <s>meilleure</s> concurrente digne <s>de ce genre</s> de Swinject, la d√©passant √† bien des √©gards.  L'article est consacr√© aux capacit√©s de la biblioth√®que, mais a √©galement des consid√©rations th√©oriques.  Alors, qui sont int√©ress√©s par les sujets DI, DIP, IoC, ou qui fait un choix entre Swinject et Swinject, je demande une coupe: <br clear="all"><a name="habracut"></a><br><br><h1>  Qu'est-ce que DIP, IoC et avec quoi mange-t-il? </h1><br><h2>  Th√©orie du <abbr title="Principe d'inversion de d√©pendance">DIP</abbr> et de l' <abbr title="Inversion de contr√¥le">IoC</abbr> </h2><br>  La th√©orie est l'un des √©l√©ments les plus importants de la programmation.  Oui, vous pouvez √©crire du code sans √©ducation, mais malgr√© cela, les programmeurs lisent constamment des articles, sont int√©ress√©s par diverses pratiques, etc.  Autrement dit, d'une mani√®re ou d'une autre, j'acquiert des connaissances th√©oriques afin de les mettre en pratique. <br><br>  L'un des sujets que les gens aiment demander pour des entretiens est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SOLIDE</a> .  Aucun article ne parle de lui du tout, ne vous inqui√©tez pas.  Mais nous avons besoin d'une lettre, car elle est √©troitement li√©e √† ma biblioth√®que.  Il s'agit de la lettre ¬´D¬ª - Principe d'inversion de d√©pendance. <br><br>  Le principe d'inversion de d√©pendance stipule: <br><br><ul><li>  Les modules de niveau sup√©rieur ne doivent pas d√©pendre de modules de niveau inf√©rieur.  Les deux types de modules doivent d√©pendre d'abstractions. </li><li>  Les abstractions ne devraient pas d√©pendre des d√©tails.  Les d√©tails doivent d√©pendre des abstractions. </li></ul><br>  Beaucoup de gens supposent √† tort que s'ils utilisent des protocoles / interfaces, ils adh√®rent automatiquement √† ce principe, mais ce n'est pas enti√®rement vrai. <br><br>  <abbr title="Les modules de niveau sup√©rieur ne doivent pas d√©pendre de modules de niveau inf√©rieur. Les deux types de modules doivent d√©pendre d'abstractions.">La premi√®re d√©claration</abbr> dit quelque chose sur les d√©pendances entre les modules - les modules doivent d√©pendre des abstractions.  Attendez, qu'est-ce que l'abstraction?  - Il vaut mieux se demander non pas ce qu'est l'abstraction, mais qu'est-ce que l'abstraction?  Autrement dit, vous devez comprendre ce qu'est le processus, et le r√©sultat de ce processus sera une abstraction.  <b>L'abstraction</b> est une distraction dans le processus de cognition des parties, propri√©t√©s, relations non essentielles afin de mettre en √©vidence des signes essentiels et r√©guliers. <br><br>  Le m√™me objet, selon les objectifs, peut avoir diff√©rentes abstractions.  Par exemple, la machine du point de vue du propri√©taire a les propri√©t√©s importantes suivantes: couleur, √©l√©gance, commodit√©.  Mais du point de vue du m√©canicien, tout est quelque peu diff√©rent: marque, mod√®le, modification, kilom√©trage, participation √† un accident.  Deux abstractions diff√©rentes pour un objet viennent d'√™tre nomm√©es - la machine. <br><br>  Notez que dans Swift, il est habituel d'utiliser des protocoles pour les abstractions, mais ce n'est pas une exigence.  Personne ne prend la peine de cr√©er une classe, d'allouer un ensemble de m√©thodes publiques √† partir de celle-ci et de laisser les d√©tails de l'impl√©mentation priv√©s.  En termes d'abstraction, rien n'est cass√©.  Nous devons nous rappeler la th√®se importante - ¬´l'abstraction n'est pas li√©e √† la langue¬ª - c'est un processus qui se produit constamment dans notre t√™te, et comment cela est transf√©r√© au code n'est pas si important.  Ici, nous pouvons √©galement mentionner l' <abbr title="fusion et masquage de donn√©es">encapsulation</abbr> , comme exemple de ce qui est associ√© au langage.  Chaque langue a ses propres moyens pour la fournir.  Sur Swift, ce sont des classes, des champs d'acc√®s et des protocoles;  sur les interfaces Obj-C, les protocoles et la s√©paration des fichiers h et m. <br><br>  <abbr title="Les abstractions ne devraient pas d√©pendre des d√©tails. Les d√©tails doivent d√©pendre des abstractions.">la deuxi√®me affirmation est</abbr> plus int√©ressante, car elle est ignor√©e ou mal comprise.  Il parle de l'interaction des abstractions avec les d√©tails, et quels sont les d√©tails?  Il y a une id√©e fausse selon laquelle les d√©tails sont des classes qui impl√©mentent des protocoles - oui, c'est vrai, mais pas complet.  Vous devez comprendre que les d√©tails ne sont pas li√©s aux langages de programmation - le langage C n'a ni protocoles ni classes, mais ce principe agit √©galement sur lui.  Il est difficile pour moi d'expliquer th√©oriquement ce qu'est la capture, je vais donc donner deux exemples, puis essayer de prouver pourquoi le deuxi√®me exemple est plus correct. <br><br>  Supposons qu'il y ait une voiture de classe et un moteur de classe.  Il se trouve que nous devons les connecter - la machine contient un moteur.  En tant que programmeurs comp√©tents, nous s√©lectionnons le moteur de protocole, impl√©mentons le protocole et transmettons l'impl√©mentation du protocole √† la classe de la machine.  Tout semble aller bien - maintenant vous pouvez facilement remplacer l'impl√©mentation du moteur et ne pas penser que quelque chose va casser.  Ensuite, un m√©canicien moteur est ajout√© au circuit.  Il s'int√©resse aux caract√©ristiques du moteur compl√®tement diff√©rentes de la voiture.  Nous √©tendons le protocole et il contient maintenant un ensemble de fonctionnalit√©s plus important qu'au d√©part.  L'histoire se r√©p√®te pour le propri√©taire de la voiture, pour les moteurs qui produisent en usine, etc. <br><br><img src="https://habrastorage.org/webt/yh/hh/v1/yhhhv1kv5yvffc1hcoqu489pfqi.png" alt="Pas d'inversion"><br><br>  Mais o√π est l'erreur de raisonnement?  Le probl√®me est que la connexion d√©crite, malgr√© la disponibilit√© des protocoles, est en fait un ¬´d√©tail¬ª - un ¬´d√©tail¬ª.  Plus pr√©cis√©ment, sous quel nom et o√π se situe le protocole du moteur. <br><br>  Consid√©rez maintenant l'autre <s>bonne</s> option. <br><br>  Comme auparavant, il existe deux classes - moteur et voiture.  Comme auparavant, ils doivent √™tre connect√©s.  Mais maintenant, nous annon√ßons le protocole ¬´Car Engine¬ª ou ¬´Heart of a Car¬ª.  Nous y pla√ßons uniquement les caract√©ristiques dont la voiture a besoin pour le moteur.  Et nous pla√ßons le protocole non pas √† c√¥t√© de son impl√©mentation ¬´moteur¬ª, mais √† c√¥t√© de la machine.  De plus, si nous avons besoin d'un m√©canicien, nous devrons cr√©er un autre protocole et l'impl√©menter dans le moteur.  Il semble que rien n'a chang√©, mais l'approche est radicalement diff√©rente - la question n'est pas tant dans les noms, mais √† qui appartiennent les protocoles et √† quoi le protocole appartient - une ¬´abstraction¬ª ou un ¬´d√©tail¬ª. <br><br><img src="https://habrastorage.org/webt/wb/xl/qw/wbxlqwjb7ltz4pqvek-gybtxc00.png" alt="L'inversion est"><br><br>  Tirons maintenant une analogie avec un autre cas, car ces arguments peuvent ne pas √™tre √©vidents. <br><br>  Il y a un backend et certaines fonctionnalit√©s sont n√©cessaires.  Le backend nous donne une grande m√©thode qui contient un tas de donn√©es, et dit - "vous avez besoin de ces 3 champs sur 1000" <br><br><div class="spoiler">  <b class="spoiler_title">Petite histoire</b> <div class="spoiler_text">  Beaucoup peuvent dire que cela ne se produit pas.  Et ils auront relativement raison - il arrive que le backend soit √©crit s√©par√©ment pour l'application mobile.  Il se trouve que j'ai travaill√© pour une entreprise o√π le backend est un service avec une histoire de 10 ans qui, entre autres, est li√© √† l'API de l'√âtat.  Pour de nombreuses raisons, il n'√©tait pas habituel pour l'entreprise d'√©crire une m√©thode distincte pour le mobile, et j'ai d√ª utiliser ce qui √©tait.  Et il y avait une merveilleuse m√©thode avec une centaine de param√®tres √† la racine, et certains d'entre eux √©taient des dictionnaires imbriqu√©s.  Imaginez maintenant 100 param√®tres, dont 20% ont des param√®tres imbriqu√©s, et dans chaque param√®tre imbriqu√©, il y a 20 √† 30 autres param√®tres qui ont tous la m√™me imbrication.  Je ne me souviens pas exactement, mais le nombre de param√®tres a d√©pass√© 800 pour les objets simples, et pour les objets complexes, il pourrait √™tre sup√©rieur √† 1000. </div></div><br>  Sonne pas tr√®s bien, non?  Habituellement, le backend √©crit une m√©thode pour des t√¢ches sp√©cifiques pour le frontend, et le frontend est le client / utilisateur de ces m√©thodes.  Hmm ... Mais si vous y r√©fl√©chissez, le backend est le moteur et le frontend est la voiture - la machine a besoin de certaines caract√©ristiques du moteur, et non pas le moteur doit avoir les caract√©ristiques de la voiture.  Alors pourquoi, malgr√© cela, nous continuons d'√©crire le protocole Engine et de le rapprocher de l'impl√©mentation du moteur, et non de la machine?  Tout d√©pend de l'√©chelle - dans la plupart des programmes iOS, il est tr√®s rare d'avoir √† √©tendre les fonctionnalit√©s √† tel point qu'une telle solution devient un probl√®me. <br><br><h2>  Et puis qu'est-ce que <abbr title="Injection de d√©pendance">DI</abbr> </h2><br>  Il y a une substitution de concepts - DI n'est pas une abr√©viation pour DIP, mais une abr√©viation compl√®tement diff√©rente, malgr√© le fait qu'elle recoupe tr√®s √©troitement avec DIP.  DI est une injection de d√©pendance ou une injection de d√©pendance, pas une inversion.  Inversion explique comment les classes et les protocoles doivent interagir les uns avec les autres, et l'impl√©mentation vous indique d'o√π les obtenir.  En g√©n√©ral, vous pouvez l'impl√©menter de diff√©rentes mani√®res - en commen√ßant par les d√©pendances: constructeur, propri√©t√©, m√©thode;  se terminant par ceux qui les cr√©ent et comment ce processus est automatis√©.  Les approches sont diff√©rentes mais, √† mon avis, les plus pratiques sont les conteneurs pour l'injection de d√©pendance.  En bref, leur sens se r√©sume √† une r√®gle simple: nous informons le conteneur o√π et comment l'impl√©menter et apr√®s cela, tout est impl√©ment√© ind√©pendamment.  Cette approche correspond √† la ¬´mise en ≈ìuvre r√©elle des d√©pendances¬ª - c'est lorsque les classes dans lesquelles les d√©pendances sont introduites ne savent rien de comment cela se produit, c'est-√†-dire qu'elles sont passives. <br><br>  Dans de nombreux langages, l'approche suivante est utilis√©e pour cette impl√©mentation: Dans les classes / fichiers individuels, les r√®gles d'impl√©mentation sont d√©crites √† l'aide de la syntaxe du langage, apr√®s quoi elles sont compil√©es et impl√©ment√©es automatiquement.  Il n'y a pas de magie - rien ne se passe automatiquement, seules les biblioth√®ques sont √©troitement int√©gr√©es aux moyens de base du langage, et surchargent les m√©thodes de cr√©ation.  Donc, pour Swift / Obj-C, il est g√©n√©ralement admis que le point de d√©part est l'UIViewController, et les biblioth√®ques peuvent facilement s'int√©grer dans le ViewController cr√©√© √† partir du Storyboard.  Certes, si vous n'utilisez pas le Storyboard, vous devrez effectuer une partie du travail avec des stylos. <br><br>  Oh oui, j'ai presque oubli√© - la r√©ponse √† la question principale, "pourquoi en avons-nous besoin?"  Sans aucun doute, vous pouvez vous-m√™me prendre en charge l'injection de d√©pendance, tout prescrire avec des stylos.  Mais des probl√®mes surviennent lorsque les graphiques deviennent volumineux - vous devez mentionner beaucoup de connexions entre les classes, le code commence √† grandir beaucoup.  Par cons√©quent, les biblioth√®ques qui impl√©mentent automatiquement des d√©pendances r√©cursives (et m√™me cycliques) prennent ce soin sur elles-m√™mes et, en prime, contr√¥lent leur dur√©e de vie.  Autrement dit, la biblioth√®que ne fait rien de plus que le naturel - elle simplifie simplement la vie du d√©veloppeur.  Certes, ne pensez pas que vous pouvez √©crire une telle biblioth√®que en une journ√©e - c'est une chose d'√©crire au stylet toutes les d√©pendances pour un cas particulier, c'est une autre chose d'apprendre √† un ordinateur √† l'impl√©menter universellement et correctement. <br><br><h1>  Histoire de la biblioth√®que </h1><br>  L'histoire ne serait pas compl√®te si je ne la racontais pas bri√®vement.  Si vous suivez la biblioth√®que de la version b√™ta, elle ne sera pas si int√©ressante pour vous, mais pour ceux qui la verront pour la premi√®re fois, je pense qu'il vaut la peine de comprendre comment elle est apparue et quels objectifs l'auteur a suivis (c'est-√†-dire moi). <br>  La biblioth√®que √©tait mon deuxi√®me projet, que j'ai d√©cid√©, √† des fins d'auto-√©ducation, d'√©crire en swift.  Avant cela, j'ai r√©ussi √† √©crire un enregistreur, mais je ne l'ai pas t√©l√©charg√© dans le domaine public - c'est de mieux en mieux. <br><br>  Mais avec DI, l'histoire est plus int√©ressante.  Quand j'ai commenc√© √† le faire, je n'ai pu trouver qu'une seule biblioth√®que sur Swift - Swinject.  A cette √©poque, elle avait 500 √©toiles et des bugs que les cycles ne sont pas normalement trait√©s.  J'ai regard√© tout cela et ... Mon comportement est mieux d√©crit par ma phrase pr√©f√©r√©e ¬´Et ensuite Ostap a souffert¬ª - J'ai parcouru 5-6 langues, regard√© ce qui est dans ces langues, lu des articles sur ce sujet et r√©alis√© que cela pouvait √™tre mieux fait.  Et maintenant, apr√®s presque trois ans, je peux dire avec confiance que l'objectif a √©t√© atteint, en ce moment DITranquillity est le meilleur de ma vision du monde. <br><br>  Comprenons ce qu'est une bonne biblioth√®que DI: <br><br><ul><li>  Il devrait fournir toutes les impl√©mentations de base: constructeur, propri√©t√©s, m√©thodes </li><li>  Cela ne devrait pas affecter le code d'entreprise. </li><li>  Elle devrait d√©crire clairement ce qui n'a pas fonctionn√©. </li><li>  Elle doit comprendre √† l'avance o√π il y a des erreurs, pas au moment de l'ex√©cution. </li><li>  Il doit √™tre int√©gr√© aux outils de base (Storyboard) </li><li>  Il doit avoir une syntaxe concise et concise. </li><li>  Elle doit tout faire rapidement et efficacement. </li><li>  (Facultatif) Il doit √™tre hi√©rarchique </li></ul><br>  Ce sont ces principes que j'essaie d'adh√©rer tout au long du d√©veloppement de la biblioth√®que. <br><br><h1>  Caract√©ristiques et avantages de la biblioth√®que </h1><br>  Tout d'abord, un lien vers le r√©f√©rentiel: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/ivlevAstef/DITranquillity</a> <br><br>  Le principal avantage concurrentiel, qui est assez important pour moi, est que la biblioth√®que parle d'erreurs de d√©marrage.  Apr√®s avoir d√©marr√© l'application et appel√© la fonction souhait√©e, tous les probl√®mes, existants et potentiels, seront signal√©s.  C'est pr√©cis√©ment le sens du nom de la biblioth√®que ¬´calme¬ª - en fait, apr√®s avoir d√©marr√© le programme, la biblioth√®que garantit que toutes les d√©pendances requises existeront et qu'il n'y aura pas de cycles insolubles.  Dans les endroits o√π il y a ambigu√Øt√©, la biblioth√®que avertira qu'il peut y avoir des probl√®mes potentiels. <br><br>  Cela me semble tr√®s bien.  Il n'y a pas de plantage pendant l'ex√©cution du programme, si le programmeur a oubli√© quelque chose, cela sera imm√©diatement signal√©. <br><br>  Une fonction de journal est utilis√©e pour d√©crire les probl√®mes, que je recommande fortement d'utiliser.  La journalisation a 4 niveaux: erreur, avertissement, info, verbeux.  Les trois premiers sont assez importants.  Ce dernier n'est pas si important - il √©crit tout ce qui se passe - quel objet a √©t√© enregistr√©, quel objet a commenc√© √† √™tre introduit, quel objet a √©t√© cr√©√©, etc. <br><br>  Mais ce n'est pas tout ce que la biblioth√®que peut se vanter: <br><br><ul><li>  S√©curit√© totale des threads - toute op√©ration peut √™tre effectu√©e √† partir de n'importe quel thread et tout fonctionnera.  La plupart des gens n'en ont pas besoin, donc en termes de s√©curit√© des threads, un travail a √©t√© fait pour optimiser la vitesse d'ex√©cution.  Mais la biblioth√®que des concurrents, malgr√© les promesses, tombe si vous commencez √† vous inscrire et √† recevoir un objet en m√™me temps </li><li>  Vitesse d'ex√©cution rapide.  Sur un v√©ritable appareil, DITranquillity est deux fois plus rapide que son concurrent.  Vrai sur le simulateur, la vitesse d'ex√©cution est presque √©quivalente.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien de test</a> </li><li>  Petite taille - la biblioth√®que p√®se moins que Swinject + SwinjectStoryboad + SwinjectAutoregistration, mais surpasse cet ensemble de capacit√©s </li><li>  Une note concise et concise, bien que provoquant une d√©pendance </li><li>  Hi√©rarchie.  Pour les grands projets, qui se composent de nombreux modules, c'est un tr√®s gros avantage, car la biblioth√®que est capable de trouver les classes n√©cessaires par distance du module actuel.  Autrement dit, si vous avez votre propre impl√©mentation d'un protocole dans chaque module, alors dans chaque module, vous obtiendrez l'impl√©mentation souhait√©e sans aucun effort </li></ul><br><h1>  D√©monstration </h1><br>  Et donc commen√ßons.  Comme la derni√®re fois le projet sera consid√©r√©: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SampleHabr</a> .  Je n'ai pas sp√©cifiquement commenc√© √† changer l'exemple - vous pouvez donc comparer comment tout a chang√©.  Et l'exemple montre de nombreuses fonctionnalit√©s de la biblioth√®que. <br><br>  Juste au cas o√π, pour qu'il n'y ait pas de malentendu, puisque le projet est affich√©, il utilise de nombreuses fonctionnalit√©s.  Mais personne ne prend la peine d'utiliser la biblioth√®que de mani√®re simplifi√©e - t√©l√©charg√©, cr√©√© un conteneur, enregistr√© quelques classes, utilisez le conteneur. <br><br>  Nous devons d'abord cr√©er un cadre (facultatif): <br><br><pre><code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppFramework</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DIFramework</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   public static func load(container: DIContainer) { //     } }</span></span></code> </pre> <br>  Et au d√©but du programme, cr√©ez votre propre conteneur, avec l'ajout de ce framework: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> container = <span class="hljs-type"><span class="hljs-type">DIContainer</span></span>() <span class="hljs-comment"><span class="hljs-comment">//   container.append(framework: AppFramework.self) //     . //          ifdef DEBUG      ,         ,     . if !container.validate() { fatalError() }</span></span></code> </pre><br><h3>  Storyboard </h3><br>  Ensuite, vous devez cr√©er un √©cran de base.  Habituellement, les storyboards sont utilis√©s pour cela, et dans cet exemple, je vais l'utiliser, mais personne ne se soucie d'utiliser UIViewControllers. <br><br>  Pour commencer, nous devons enregistrer un Storyboard.  Pour ce faire, cr√©ez une ¬´partie¬ª (facultative - vous pouvez √©crire tout le code dans le framework) avec le Storyboard enregistr√© dedans: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> DITranquillity class AppPart: DIPart { static func load(container: DIContainer) { container.registerStoryboard(name: "Main", bundle: nil) .lifetime(.single) <span class="hljs-comment"><span class="hljs-comment">//   -    . } }</span></span></code> </pre><br><br>  Et ajoutez une pi√®ce √† AppFramework: <br><pre> <code class="swift hljs">container.append(part: <span class="hljs-type"><span class="hljs-type">AppPart</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>)</code> </pre><br>  Comme vous pouvez le voir, la biblioth√®que a une syntaxe pratique pour enregistrer Storyboard, et je recommande fortement de l'utiliser.  En principe, vous pouvez √©crire du code √©quivalent sans cette m√©thode, mais il sera plus volumineux et ne pourra pas prendre en charge StoryboardReferences.  Autrement dit, ce Storyboard ne fonctionnera pas d'un autre. <br><br>  Maintenant, la seule chose qui reste est de cr√©er un Storyboard et d'afficher l'√©cran de d√©marrage.  Cela se fait dans AppDelegate, apr√®s avoir v√©rifi√© le conteneur: <br><br><pre> <code class="swift hljs">window = <span class="hljs-type"><span class="hljs-type">UIWindow</span></span>(frame: <span class="hljs-type"><span class="hljs-type">UIScreen</span></span>.main.bounds) <span class="hljs-comment"><span class="hljs-comment">///  Storyboard let storyboard: UIStoryboard = container.resolve(name: "Main") window!.rootViewController = storyboard.instantiateInitialViewController() window!.makeKeyAndVisible()</span></span></code> </pre><br>  La cr√©ation d'un Storyboard √† l'aide d'une biblioth√®que n'est pas beaucoup plus compliqu√©e que d'habitude.  Dans cet exemple, le nom pourrait √™tre manquant, car nous n'avons qu'un seul Storyboard - la biblioth√®que aurait devin√© que vous l'aviez en t√™te.  Mais dans certains projets, il y a beaucoup de storyboards, alors ne manquez plus le nom. <br><br><h3>  Presenter et ViewController </h3><br>  Acc√©dez √† l'√©cran lui-m√™me.  Nous ne chargerons pas le projet avec des architectures complexes, mais nous utiliserons le MVP habituel.  De plus, je suis tellement paresseux que je ne cr√©erai pas de protocole pour un pr√©sentateur.  Le protocole sera un peu plus tard pour une autre classe, ici il est important de montrer comment enregistrer et lier Presenter et ViewController. <br><br>  Pour ce faire, ajoutez le code suivant √† AppPart: <br><br><pre> <code class="swift hljs">container.register(<span class="hljs-type"><span class="hljs-type">YourPresenter</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>) container.register(<span class="hljs-type"><span class="hljs-type">YourViewController</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) .injection(\.presenter) <span class="hljs-comment"><span class="hljs-comment">//  </span></span></code> </pre><br>  Ces trois lignes nous permettront d'enregistrer deux classes et d'√©tablir une connexion entre elles. <br><br>  Les personnes curieuses peuvent se demander - pourquoi la syntaxe de Swinject dans une biblioth√®que s√©par√©e est-elle la principale du projet?  La r√©ponse r√©side dans les objectifs - gr√¢ce √† cette syntaxe, la biblioth√®que stocke tous les liens √† l'avance, plut√¥t que de les calculer au moment de l'ex√©cution.  Cette syntaxe vous donne acc√®s √† de nombreuses fonctionnalit√©s qui ne sont pas disponibles pour d'autres biblioth√®ques. <br><br>  Nous d√©marrons l'application, et tout fonctionne, toutes les classes sont cr√©√©es. <br><br><h3>  Les donn√©es </h3><br>  Eh bien, maintenant nous devons ajouter une classe et un protocole pour recevoir des donn√©es du serveur: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Server</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(method: String)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Data?</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ServerImpl</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Server</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(domain: <span class="hljs-type"><span class="hljs-type">String</span></span>) { ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(method: String)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Data?</span></span> { ... } }</code> </pre><br>  Et pour la beaut√©, nous allons cr√©er une classe DI ServerPart distincte pour le serveur, dans laquelle nous l'enregistrons.  Permettez-moi de vous rappeler que cela n'est pas n√©cessaire et peut √™tre enregistr√© directement dans le conteneur, mais nous ne cherchons pas de moyens simples :) <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> DITranquillity class ServerPart: DIPart { static func load(container: DIContainer) { container.register{ ServerImpl(domain: "https:<span class="hljs-comment"><span class="hljs-comment">//github.com/") } .as(check: Server.self){$0} .lifetime(.single) } }</span></span></code> </pre><br>  Dans ce code, tout n'est pas aussi transparent que dans les pr√©c√©dents et n√©cessite une clarification.  Tout d'abord, √† l'int√©rieur du registre de fonction, une classe est cr√©√©e avec un param√®tre pass√©. <br><br>  Deuxi√®mement, il y a la fonction `as` - elle dit que la classe sera accessible par un autre type - le protocole.  L'√©trange fin de cette op√©ration sous la forme de {{$ 0} `fait partie du nom` check: `.  Autrement dit, ce code garantit que ServerImpl est un successeur de Server.  Mais il existe une autre syntaxe: `as (Server.self)` qui fera de m√™me, mais sans v√©rification.  Pour voir ce que le compilateur produira dans les deux cas, vous pouvez supprimer l'impl√©mentation du protocole. <br><br>  Il peut y avoir plusieurs fonctions ¬´as¬ª - cela signifie que le type est disponible sous l'un de ces noms.  J'attire votre attention sur le fait qu'il s'agira d'un seul enregistrement, ce qui signifie que si la classe est un singleton, la m√™me instance sera disponible pour tout type sp√©cifi√©. <br><br>  En principe, si vous souhaitez vous prot√©ger de la possibilit√© de cr√©er une classe par type d'impl√©mentation, ou si vous n'√™tes pas encore habitu√© √† cette syntaxe, vous pouvez √©crire: <br><br><pre> <code class="swift hljs">container.register{ <span class="hljs-type"><span class="hljs-type">ServerImpl</span></span>(domain: <span class="hljs-string"><span class="hljs-string">"https://github.com/"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-type"><span class="hljs-type">Server</span></span> }</code> </pre><br>  Ce sera un √©quivalent, mais sans la possibilit√© de sp√©cifier plusieurs types distincts. <br><br>  Vous pouvez maintenant impl√©menter le serveur dans Presenter, pour cela nous allons corriger Presenter pour qu'il accepte le serveur: <br><br><pre> <code class="swift hljs"> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">YourPresenter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(server: <span class="hljs-type"><span class="hljs-type">Server</span></span>) { ... } }</code> </pre><br>  Nous d√©marrons le programme, et il tombe sur les fonctions `validate` dans AppDelegate, avec le message que le type` Server` n'a pas √©t√© trouv√©, mais il est requis par` YourPresenter`.  Quoi de neuf?  Veuillez noter que l'erreur s'est produite au d√©but de l'ex√©cution du programme, et non un post factum.  Et la raison est assez simple - ils ont oubli√© d'ajouter ¬´ServerPart¬ª √† ¬´AppFramework¬ª: <br><br><pre> <code class="swift hljs">container.append(part: <span class="hljs-type"><span class="hljs-type">ServerPart</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>)</code> </pre><br>  Nous commen√ßons - tout fonctionne. <br><br><h3>  Enregistreur </h3><br>  Avant cela, il y avait une connaissance des opportunit√©s qui ne sont pas tr√®s impressionnantes et beaucoup l'ont.  Il y aura maintenant une d√©monstration que les autres biblioth√®ques sur Swift ne savent pas comment. <br><br>  Un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">projet</a> distinct <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">a</a> √©t√© cr√©√© sous l'enregistreur. <br><br>  Tout d'abord, comprenons ce qui sera un enregistreur.  √Ä des fins √©ducatives, nous ne ferons pas un syst√®me tromp√©, donc l'enregistreur est un protocole avec une m√©thode et plusieurs impl√©mentations: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Logger</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> msg: String)</span></span></span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConsoleLogger</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Logger</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> msg: String)</span></span></span></span> { ... } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileLogger</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Logger</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(file: <span class="hljs-type"><span class="hljs-type">String</span></span>) { ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> msg: String)</span></span></span></span> { ... } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ServerLogger</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Logger</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(server: <span class="hljs-type"><span class="hljs-type">String</span></span>) { ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> msg: String)</span></span></span></span> { ... } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainLogger</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Logger</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(loggers: [<span class="hljs-type"><span class="hljs-type">Logger</span></span>]) { ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> msg: String)</span></span></span></span> { ... } }</code> </pre><br>  Au total, nous avons: <br><br><ul><li>  Protocole public </li><li>  3 impl√©mentations d'enregistreur diff√©rentes, chacune √©crivant dans un endroit diff√©rent </li><li>  Un enregistreur central qui appelle la fonction de journalisation pour tout le monde </li></ul><br>  Le projet a cr√©√© ¬´LoggerFramework¬ª et ¬´LoggerPart¬ª.  Je n'√©crirai pas leur code, mais je n'√©crirai que les √©l√©ments internes de `LoggerPart`: <br><br><pre> <code class="swift hljs">container.register{ <span class="hljs-type"><span class="hljs-type">ConsoleLogger</span></span>() } .<span class="hljs-keyword"><span class="hljs-keyword">as</span></span>(<span class="hljs-type"><span class="hljs-type">Logger</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) .lifetime(.single) container.register{ <span class="hljs-type"><span class="hljs-type">FileLogger</span></span>(file: <span class="hljs-string"><span class="hljs-string">"file.log"</span></span>) } .<span class="hljs-keyword"><span class="hljs-keyword">as</span></span>(<span class="hljs-type"><span class="hljs-type">Logger</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) .lifetime(.single) container.register{ <span class="hljs-type"><span class="hljs-type">ServerLogger</span></span>(server: <span class="hljs-string"><span class="hljs-string">"http://server.com/"</span></span>) } .<span class="hljs-keyword"><span class="hljs-keyword">as</span></span>(<span class="hljs-type"><span class="hljs-type">Logger</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) .lifetime(.single) container.register{ <span class="hljs-type"><span class="hljs-type">MainLogger</span></span>(loggers: many($<span class="hljs-number"><span class="hljs-number">0</span></span>)) } .<span class="hljs-keyword"><span class="hljs-keyword">as</span></span>(<span class="hljs-type"><span class="hljs-type">Logger</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) .<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>() .lifetime(.single)</code> </pre><br>  Nous avons d√©j√† vu les 3 premi√®res inscriptions, et la derni√®re pose question. <br><br>  Un param√®tre est pass√© √† l'entr√©e.  Un exemple similaire a d√©j√† √©t√© montr√© lors de la cr√©ation du pr√©sentateur, bien qu'il y ait un enregistrement abr√©g√© - la m√©thode `init` vient d'√™tre utilis√©e, mais personne ne prend la peine d'√©crire comme ceci: <br><br><pre> <code class="swift hljs">container.register { <span class="hljs-type"><span class="hljs-type">YourPresenter</span></span>(server: $<span class="hljs-number"><span class="hljs-number">0</span></span>) }</code> </pre><br>  S'il y avait plusieurs param√®tres, alors on pourrait utiliser ¬´$ 1¬ª, ¬´$ 2¬ª, ¬´$ 3¬ª, etc.  jusqu'au 16. <br><br>  Mais ce param√®tre appelle la fonction `many`.  Et ici, le plaisir commence.  Il y a deux modificateurs `many` et` tag` dans la biblioth√®que. <div class="spoiler">  <b class="spoiler_title">Texte masqu√©</b> <div class="spoiler_text">  Il existe un troisi√®me modificateur `arg`, mais il n'est pas s√ªr </div></div>  Le modificateur `many` indique que vous devez obtenir tous les objets correspondant au type souhait√©.  Dans ce cas, le protocole Logger est attendu, donc toutes les classes qui h√©ritent de ce protocole seront trouv√©es et cr√©√©es, √† une exception pr√®s - elle-m√™me, c'est-√†-dire de mani√®re r√©cursive.  Il ne se cr√©era pas lors de l'initialisation, bien qu'il puisse le faire en toute s√©curit√© lorsqu'il est impl√©ment√© via une propri√©t√©. <br><br>  L'√©tiquette, √† son tour, est un type distinct qui doit √™tre sp√©cifi√© √† la fois lors de l'utilisation et lors de l'enregistrement.  Autrement dit, les balises sont des crit√®res suppl√©mentaires s'il n'y a pas suffisamment de types de base. <br><br>  Vous pouvez en savoir plus √† ce sujet: <a href="">Modificateurs</a> <br><br>  La pr√©sence de modificateurs, en particulier `many ', rend la biblioth√®que meilleure que les autres.  Par exemple, vous pouvez impl√©menter le mod√®le Observer √† un niveau compl√®tement diff√©rent.  En raison de ces 4 lettres, dans le projet, il a √©t√© possible de supprimer 30 √† 50 lignes de code de chaque observateur du projet et de r√©soudre le probl√®me avec la question - o√π et quand les objets devraient-ils √™tre ajout√©s √† l'observable.  Clear business n'est pas la seule application, mais elle est importante. <br><br>  Eh bien, nous terminerons la pr√©sentation des fonctionnalit√©s en introduisant un enregistreur dans YourPresenter: <br><br><pre> <code class="swift hljs">container.register(<span class="hljs-type"><span class="hljs-type">YourPresenter</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>) .injection { $<span class="hljs-number"><span class="hljs-number">0</span></span>.logger = $<span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre><br>  Ici, par exemple, il est √©crit un peu diff√©remment qu'auparavant - cela se fait pour un exemple d'une syntaxe diff√©rente. <br><br>  Veuillez noter que la propri√©t√© de l'enregistreur est facultative: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> logger: <span class="hljs-type"><span class="hljs-type">Logger?</span></span></code> </pre><br>  Et cela n'appara√Æt pas dans la syntaxe de la biblioth√®que.  Contrairement √† la premi√®re version, maintenant toutes les op√©rations pour le type habituel, facultatif et forc√© facultatif se ressemblent.  De plus, la logique √† l'int√©rieur est diff√©rente - si le type est facultatif et n'est pas enregistr√© dans le conteneur, le programme ne se bloquera pas, mais continuera son ex√©cution. <br><br><h2>  R√©sum√© </h2><br>  Les r√©sultats sont similaires √† la derni√®re fois, seule la syntaxe est devenue plus courte et plus fonctionnelle. <br><br><h4>  Ce qui a √©t√© examin√©: </h4><br><ul><li>  <a href="">Inscrivez-vous bri√®vement</a> </li><li>  <a href="">Travailler avec Storyboard, mais la biblioth√®que peut fonctionner avec StoryboardReferences</a> </li><li>  <a href="">Inscription via une m√©thode ou une propri√©t√© d'initialisation</a> </li><li>  <a href="">Impl√©mentation multiple</a> </li><li>  <a href="">Travailler avec des cadres et des pi√®ces</a> </li><li>  <a href="">Un peu de validation</a> </li></ul><br><h4>  Que peut faire d'autre la biblioth√®que: </h4><br><ul><li>  <a href="">5 dur√©es de vie: simple, perRun (.weak / .strong), perContainer (.weak / .strong), objectGraph, prototype</a> </li><li>  <a href="">Nom des balises</a> </li><li>  <a href="">Journalisation</a> </li><li>  <a href="">Travailler avec des d√©pendances cycliques</a> </li><li>  <a href="">Prenez racine dans les vues</a> </li><li>  <a href="">Mise en ≈ìuvre diff√©r√©e</a> </li><li>  L'introduction d'arguments, mais la fonctionnalit√© n'est pas document√©e en raison de sa non-s√©curit√© </li></ul><br><h2>  Plans </h2><br>  Tout d'abord, il est pr√©vu de passer √† la v√©rification du graphe au stade de la compilation, c'est-√†-dire une int√©gration plus √©troite avec le compilateur.  Il existe une impl√©mentation pr√©liminaire utilisant SourceKitten, mais une telle impl√©mentation a de s√©rieuses difficult√©s avec l'inf√©rence de type, il est donc pr√©vu de passer √† ast-dump - en swift5, elle est devenue op√©rationnelle sur de grands projets.  Ici, je tiens √† remercier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nekitosss</a> pour l'√©norme contribution dans ce sens. <br><br>  Deuxi√®mement, je voudrais m'int√©grer aux services de visualisation.  Ce sera un projet l√©g√®rement diff√©rent, mais √©troitement li√© √† la biblioth√®que.  √Ä quoi √ßa sert?  Maintenant, la biblioth√®que stocke le graphique complet des connexions, c'est-√†-dire qu'en th√©orie, tout ce qui est enregistr√© dans la biblioth√®que peut √™tre affich√© sous forme de diagramme de classe / composant UML.  Et ce serait bien de voir parfois ce sch√©ma. <br><br>  Cette fonctionnalit√© est pr√©vue en deux parties - la premi√®re vous permettra d'ajouter une API pour obtenir toutes les informations, et la seconde est d√©j√† l'int√©gration avec diff√©rents services. <br><br>  L'option la plus simple consiste √† afficher un graphique de liens sous forme de texte, mais je n'ai pas vu d'options lisibles - si oui, sugg√©rez des options dans les commentaires. <br><br>  WatchOS - Je n'√©cris pas moi-m√™me de projets pour eux.  Pour sa vie, il n'a √©crit qu'une seule fois, puis petit.  Mais je voudrais faire une int√©gration √©troite, comme avec le Storyboard. <br><br>  C'est tout merci de votre attention.  J'esp√®re vraiment avoir des commentaires et des r√©ponses √† l'enqu√™te. <br><br><div class="spoiler">  <b class="spoiler_title">√Ä propos de moi</b> <div class="spoiler_text">  Ivlev Alexander Evgenievich - senior / chef d'√©quipe dans l'√©quipe iOS.  Je travaille dans le commerce depuis 7 ans, sous iOS 4,5 ans - avant cela, j'√©tais d√©veloppeur C ++.  Mais l'exp√©rience de programmation totale est de plus de 15 ans - √† l'√©cole, j'ai fait la connaissance de ce monde incroyable et j'ai √©t√© tellement emport√© par lui qu'il y a eu une p√©riode o√π j'ai √©chang√© des jeux <s>, de la nourriture, des toilettes, un r√™ve</s> pour √©crire du code.  Selon l'un de mes articles, vous pouvez deviner que je suis une ancienne Olympiade - en cons√©quence, il ne m'a pas √©t√© difficile d'√©crire un travail comp√©tent avec des graphiques.  Sp√©cialit√© - Syst√®mes de mesure de l'information, et √† une √©poque j'√©tais obs√©d√© par le multithreading et le parall√©lisme - oui, j'√©cris du code dans lequel je fais des hypoth√®ses et des bugs sur des sujets similaires, mais je comprends les zones √† probl√®mes et comprends parfaitement o√π vous pouvez n√©gliger le mutex, et o√π pas la peine. <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr457188/">https://habr.com/ru/post/fr457188/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr457178/index.html">Conception et fabrication des processeurs: conception du processeur</a></li>
<li><a href="../fr457180/index.html">Le site officiel Node.js est maintenant en russe</a></li>
<li><a href="../fr457182/index.html">Langue REXX, 40e anniversaire</a></li>
<li><a href="../fr457184/index.html">Cr√©ez dynamiquement robots.txt pour les sites ASP.NET Core</a></li>
<li><a href="../fr457186/index.html">Python dans Visual Studio Code - version de juin</a></li>
<li><a href="../fr457190/index.html">Nous traitons les affaires gr√¢ce √† la mise en ≈ìuvre de syst√®mes CRM</a></li>
<li><a href="../fr457192/index.html">Airbus prend de nouveaux sommets avec la r√©alit√© mixte de Microsoft</a></li>
<li><a href="../fr457194/index.html">Airbus atteint de nouveaux sommets avec l'aide de la technologie de r√©alit√© mixte de Microsoft</a></li>
<li><a href="../fr457196/index.html">Petty little joy # 5: Dynaconf - gestion des param√®tres dans le projet</a></li>
<li><a href="../fr457198/index.html">Le r√©seau neuronal a appris √† dessiner des sc√®nes complexes √† partir d'une description textuelle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>