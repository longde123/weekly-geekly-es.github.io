<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📅 🔍 🅾️ Untuk apa kita membangun CDN? 👩🏿‍🔬 🚩 👆🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hai Habr! Pada artikel ini kita akan membangun CDN kita sendiri. Mengapa tidak menggunakan solusi yang sudah jadi? Karena situs penulis sepenuhnya sta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Untuk apa kita membangun CDN?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/466447/">  Hai Habr!  Pada artikel ini kita akan membangun CDN kita sendiri.  Mengapa tidak menggunakan solusi yang sudah jadi?  Karena situs penulis sepenuhnya statis, dibuat di Jekyll, dengan gambar besar yang perlu diberikan secepat mungkin.  Server tidak boleh caching, harus menyimpan seluruh situs, mendukung HTTP / 2 dan Brotli, dan sertifikat yang sama harus diinstal pada semua server. <br><br>  Kami juga akan melakukan semuanya pada IIS yang berjalan pada Windows Server 2019 Core. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jd/-8/bh/jd-8bhr2bkenojiyts1op3nxdr0.jpeg"></div><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Secara singkat tentang implementasinya</font> </h2><br>  Pada titik akhir, kita akan mengelola cara yang dibangun ke dalam sistem operasi, kita akan membutuhkan: <br><br><ol><li>  Direktori Aktif </li><li>  Dfs </li><li>  IIS </li><li>  Winacme </li><li>  RSAT </li></ol><br>  Opsional, tetapi disarankan: <br><br><ol><li>  Pusat Admin Windows </li></ol><br>  Di situs dengan situs, hanya IIS dan DFS yang diperlukan, Active Directory diperlukan, diperlukan untuk DFS, yang akan menyinkronkan konten situs antara server.  RSAT diperlukan untuk mengelola komponen, dan Windows Admin Center diperlukan untuk mengedit registri.  Ini juga bisa dilakukan melalui Powershell, yang juga akan saya bahas. <br><br>  Domain penulis disebut ***. ***. Wtf (jangan takut), dan server diberi nama setelah pusat data dan memiliki nama formulir cache-zur1, cahe-ru, dan sebagainya.  AD dikerahkan, dan server terhubung dengannya.  Sekarang sudah beres. <br><br><h2>  <font color="#3AC1EF">Temukan titik</font> </h2><br>  RUVDS memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">8 pusat data</a> - 3 di Eropa dan 5 di Rusia.  Pilihan saya jatuh pada Rucloud di Moskow dan LD8 (yang ada di London).  Rucloud karena hampir tidak berbeda dari M9, dan melalui London ada kabel lintas benua ke Amerika Serikat, jadi di Eropa itu harus dimiliki.  Untuk distribusi yang lebih ketat di Eropa, Anda dapat memilih Swiss atau Jerman - ini, secara umum, Anda dapat berhenti. <br><br><h2>  <font color="#3AC1EF">Memilih GeoIP DNS</font> </h2><br>  Jika klien mengetuk situs, lalu bagaimana memahami server mana yang harus mengirimkan data kepadanya?  Tentu saja menggunakan DNS.  Yaitu, tergantung pada alamat ip orang yang menangani DNS, jawaban yang relevan akan diberikan. <br><br>  Kita dapat menggunakan DNS kita sendiri (BIND dengan plugin untuk Maxmind) atau solusi turnkey (Route53).  Berlangganan ke Maxmind GeoIP-database biayanya $ 25 per bulan, dan Route53 biaya $ 0,50 per zona domain, ditambah satu sen jika Anda pergi untuk satu juta permintaan.  Selain itu, untuk membuat titik lain untuk memperkuat serangan DDoS adalah hal terakhir, jadi pilihan saya jatuh pada Route53. <br><br>  Artikel ini tentang CDN untuk Eropa;  jika Anda memerlukan CDN untuk Rusia, maka pilihan menuju DNS Anda sendiri sudah jelas, karena Route53 menyediakan perutean berdasarkan negara, bukan oleh kota. <br>  Microsoft memiliki layanan serupa (Azure Traffic Manager). <br><br><h2>  <font color="#3AC1EF">1. Instal IIS</font> </h2><br>  <b>1.1.</b>  <b>Instalasi IIS</b> <br><br>  Kami memasang komponen dasar IIS, komponen dukungan untuk sertifikat terpusat, dan pada server utama dukungan tambahan untuk manajemen jarak jauh.  Komponen ini diperlukan hanya untuk satu server - Anda tidak akan dapat mengelola server lain ketika mengaktifkan konfigurasi bersama, bahkan jika manajemen jarak jauh telah dikonfigurasi. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f09/d98/c66/f09d98c6665d1e5106436c0fd9fc258d.png"><br><br>  Via Powershell: <br><br><pre><code class="plaintext hljs">Install-WindowsFeature Web-Server, Web-CertProvider</code> </pre> <br>  Di server utama, Anda harus menginstal: <br><br><pre> <code class="plaintext hljs">Install-WindowsFeature Web-Mgmt-Service</code> </pre> <br>  <b>1.1.1 Nyalakan remote control</b> <br><br>  Agar kita dapat mengelola server IIS dari jarak jauh, kita perlu meningkatkan Layanan Manajemen Jarak Jauh IIS.  Di server utama, mulai layanan: <br><br><pre> <code class="plaintext hljs">start-service WMSVC set-service -Name WMSVC -StartupType Automatic</code> </pre> <br>  Dan sekarang kami menyertakan kemampuan untuk mengelola melalui registri. <br><br><pre> <code class="plaintext hljs">HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WebManagement\Server</code> </pre> <br>  Cara termudah untuk mengelola registri, tentu saja, adalah melalui Windows Admin Center. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8fd/9cb/7b1/8fd9cb7b19b7523283885d61564eb920.png"><br><br>  Tetapi ini juga bisa dilakukan melalui Powershell: <br><br><pre> <code class="plaintext hljs">Set-Itemproperty -path "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WebManagement\Server" -Name "EnableRemoteManagement" -value "1"</code> </pre> <br>  Di Windows Server 2012 dan 2016, aturan firewall tidak naik dengan sendirinya, Anda perlu mengedit firewall. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8c7/13e/d35/8c713ed356d5418549cdc602c62e3161.png"><br><br><pre> <code class="plaintext hljs">Set-NetFirewallRule -Name IIS-WebServerRole-WMSVC-In-TCP -Enabled True</code> </pre> <br>  Periksa apakah sudah naik: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/929/121/aa3/929121aa33cdffa49494d791b583da7f.png"><br><br><pre> <code class="plaintext hljs">Test-NetConnection 8.8.8.8 -port 8172</code> </pre> <br>  Tiga suntingan di tiga tempat berbeda dan sekarang kita dapat terhubung melalui manajer IIS ke server kami menggunakan server lain dengan desktop.  Ini hanya untuk kenyamanan manajemen selanjutnya. <br><br>  <b>1.2 Kami memotong sentralisasi konfigurasi</b> <br><br>  Tidak ada tombol untuk menginstal konfigurasi dan sertifikat terpusat di IIS Manager, mereka hanya di manajer server lokal, jadi untuk Server Core Anda harus melakukan semuanya melalui Powershell. <br><br>  Sentralisasi konfigurasi dan sertifikat dilakukan melalui SMB.  Oleh karena itu, saya membuat dua pengguna yang kehilangan haknya (secara terpisah untuk konfigurasi dan secara terpisah untuk sertifikat) yang hanya membaca akses ke folder mereka dan menamakan mereka certadmin dan configadmin. <br><br>  Dianjurkan bagi pengguna untuk menjadi lokal di server utama - jika pengontrol domain Anda mati, maka aplikasi yang melekat pada konfigurasi dan sertifikat melalui SMB atas nama pengguna domain akan mati.  Penggunaan pengguna lokal menghilangkan situasi ini. <br><br>  <b>1.2.1 Membuat folder bersama</b> <br><br>  Dua folder publik harus disimpan di salah satu server, dari mana kita mendapatkan konfigurasi dan sertifikat.  Sebagai jalur ke folder bersama, kami mengambil jalur default ke konfigurasi IIS: <br><br><pre> <code class="plaintext hljs">New-SmbShare -ReadAccess configadmin@**.**wtf -Path C:\windows\System32\Inetsrv\Config -Name sharedconfigs</code> </pre> <br>  Dan untuk sertifikat kita dapat memilih.  Saya meletakkannya di folder dengan IIS. <br><br><pre> <code class="plaintext hljs">New-SmbShare -Path C:\inetpub\centralizedcerts -Name sharedconfigs -ReadAccess configadmin</code> </pre> <br>  <b>1.2.2 Kami menghubungkan node ke konfigurasi</b> <br><br>  Pengaturan hanya perlu dilakukan untuk server yang akan membaca konfigurasi ini.  Server utama saya di bawah nama cache-ru akan menjadi kepala, jadi saya mengkonfigurasi pada dua lainnya. <br>  Masukkan kata sandi pengguna yang memiliki akses ke folder: <br><br><pre> <code class="plaintext hljs">$pass = Read-Host -AsSecureString Enable-IISSharedConfig -PhysicalPath \\cache-ru.**.**wtf\SharedConfig -UserName configadmin@**.**wtf -Password $pass -DontCopyRemoteKeys</code> </pre> <br>  Segera setelah memasuki sesi baru harus terbuka.  Untuk memverifikasi bahwa semuanya berfungsi, Anda dapat membuka RSAT → Manajemen Komputer → Folder Bersama → Sesi.  Kami akan melihat sesi pengguna dan alamat ip server, yang di bawah pengguna ini membaca folder bersama.  Di sisi klien, ia diperiksa oleh cmdlet: <br><br><pre> <code class="plaintext hljs">Get-IISSharedConfig</code> </pre> <br>  Begini tampilannya bagiku: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/459/bc9/857/459bc9857540abe84a63229992b7d3dd.png"><br><br>  <b>1.2.2 Hubungkan node ke sertifikat</b> <br><br>  Baris berikutnya hanya dapat dimasukkan secara langsung, memiliki koneksi langsung ke desktop yang menjalankan Server dengan GUI, itu tidak berfungsi pada Server Core. <br><br><pre> <code class="plaintext hljs">$pass = Read-Host -AsSecureString Enable-IISCentralCertProvider -CertStoreLocation \\cache-ru.**.**wtf\centralizedcerts -UserName certadmin@**.**wtf -Password $pass</code> </pre> <br>  Jika Anda mencoba memasukkannya melalui Winrm, Anda akan melihat output berikut: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/85f/e1b/c76/85fe1bc7691f4a7c4765560e4d62a2f8.png"><br><br>  Untuk melakukan ini dari jarak jauh, Anda perlu mengedit registri.  Betapa nyamannya!  Kami terbang: <br><br><pre> <code class="plaintext hljs">HKLM:\SOFTWARE\Microsoft\IIS\CentralCertProvider\</code> </pre> <br>  Buat DWORD 32-bit "Diaktifkan" dengan parameter "1": <br><br><img src="https://habrastorage.org/getpro/habr/post_images/06c/ba1/e1e/06cba1e1e6dd5af05cc7f9d0279e138f.png"><br><br><pre> <code class="plaintext hljs">Set-ItemProperty -Path HKLM:\SOFTWARE\Microsoft\IIS\CentralCertProvider\ -Name Enabled -Value 1</code> </pre> <br>  Kemudian kita membuat nilai string CertStoreLocation dengan parameter \\ cache-ru. **. ** wtf \ centralizedcerts: <br><br><pre> <code class="plaintext hljs">Set-ItemProperty -Path HKLM:\SOFTWARE\Microsoft\IIS\CentralCertProvider\ -Name CertStoreLocation -Value &lt;a href="about:blank"&gt;\\cache-ru.**.**wtf\centralizedcerts&lt;/a&gt;</code> </pre> <br>  Untuk memeriksa apakah semuanya beres, kami menggunakan: <br><br><pre> <code class="plaintext hljs">Get-IISCentralCertProvider</code> </pre> <br>  Outputnya harus seperti ini: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c8b/dd6/48d/c8bdd648d8d5f147c8bd28d1bad9cfc0.png"><br><br>  Dan hanya setelah itu kita masuk: <br><br><pre> <code class="plaintext hljs">$pass = Read-Host -AsSecureString Set-IISCentralCertProvider -UserName certadmin@**.**wtf -Password $pass</code> </pre> <br>  Periksa lagi: <br><br><pre> <code class="plaintext hljs">Get-IISCentralCertProvider</code> </pre> <br>  Semuanya di luar kotak disebut.  Tidak seperti konfigurasi umum, sertifikat terpusat tidak membuat sesi SMB aktif. <br><br>  <b>1.2.3 Brotli</b> <br><br>  Di setiap server, unduh dan jalankan file <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kompresi IIS</a> <br><br><pre> <code class="plaintext hljs">Start-Process .\iiscompression_amd64.msi -ArgumentList /quiet</code> </pre> <br>  Kami telah membagikan konfigurasi, jadi Anda perlu mengonfigurasi sesuatu hanya di satu tempat.  Menggunakan IIS Manager, kita pergi ke editor konfigurasi di server utama. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/489/874/4db/4898744dbe1eea52b6bfe3c92ea5a1ad.png"><br><br><pre> <code class="plaintext hljs">system.webServer/httpCompression</code> </pre> <br>  Dan atur StaticCompressionLevel ke 11 untuk Brotli dan 9 untuk Gzip, ini adalah maksimum yang dapat mereka lakukan. <br><br>  <b>1.2.4 MIME dan header</b> <br><br>  Di luar kotak, IIS tidak mengirimkan header pengodean, itulah sebabnya alfabet Cyrillic berubah menjadi rune.  Juga di MIME tidak ada entri format webp yang perlu ditambahkan. <br><br>  <b>1.</b> Pergi ke operator → MIME.  Temukan .HTML dan modifikasi tipenya menjadi: teks / html;  charset = utf-8 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e4c/bef/017/e4cbef017ae044d8720535ff9bdea63a.png"><br><br>  <b>2.</b> Jangan lupa tentang Webp - Anda perlu menambahkan MIME ini secara manual. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/07a/b62/aec/07ab62aecf03ee9b4a32ecd4044d7a42.png"><br><br><h2>  <font color="#3AC1EF">2. Kami mengeluarkan sertifikat</font> </h2><br>  Menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Winacme</a> .  Pertama, Anda harus mengikat domain ke situs - ini dapat dilakukan melalui Manajer IIS.  Saat membuat CDN, jangan pilih verifikasi host, seperti  masalah segera dimulai dengan konfirmasi kepemilikan domain, pilihan kami adalah verifikasi oleh data TXT.  Anda harus mengarahkan jalur ke folder secara manual dengan sertifikat, serta menyalin catatan secara manual dari tantangan.  Sekarang, bawa udara ke dada Anda. <br><br>  Agar tidak mencetak semuanya secara manual, aktifkan RDP di Server Core dengan perintah berikut: <br><br><pre> <code class="plaintext hljs">cscript C:\Windows\System32\Scregedit.wsf /ar 0</code> </pre> <br>  Seperti inilah tampilan RDP di Server Core: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/856/2ea/478/8562ea478872a08964c125a8b997eae6.png"><br><br>  Setelah tantangan, sertifikat jatuh ke folder yang ditentukan di Winacme.  Winacme menempatkan tugas dalam penjadwal untuk memperbarui sertifikat.  Dipasang dan lupa. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f20/8e3/d33/f208e3d33f61e407a19e1ff53e14ecde.png"><br><br>  Nah, ketika kami selesai, kami dapat mematikan RDP - kami menginstal Server Core untuk alasan yang baik, kami menemukan begitu banyak nuansa. <br><br><pre> <code class="plaintext hljs">cscript C:\Windows\System32\Scregedit.wsf /ar 1</code> </pre> <br><h2>  <font color="#3AC1EF">3. Sertifikat Bindim ke node</font> </h2><br>  Sekarang Anda perlu mengkonfigurasi dua node lain sehingga HTTPS akhirnya berfungsi.  Saat ini, di server tempat sertifikat disimpan, HTTPS sudah berjalan.  Sehingga sisanya mulai bekerja pada HTTPS, well, secara umum, ini dilakukan melalui netsh. <br><br>  Seperti biasa, kita terhubung ke Windows Server Core melalui RDP untuk menjalankan snap-in ini.  Jangan melihat situs di Microsoft, terutama dalam panduan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> .  Langkah-langkah di dalamnya dijelaskan secara salah. <br><br>  Menggunakan http netsh show sslcert, pada node master Anda perlu mendapatkan appid, yang kita masukkan seperti yang dijelaskan di bawah ini: <br><br><pre> <code class="plaintext hljs">netsh http add sslcert ccs=443 appid= '{4dc3e181-e14b-4a21-b022-59fc669b0914}'</code> </pre> <br>  Nilai appid harus dalam tanda kutip, jika tidak maka tidak akan berfungsi. <br><br><h2>  <font color="#3AC1EF">4. Instal DFS</font> </h2><br>  Jangan menyinkronkan sertifikat dan konfigurasi melalui DFS, alat khusus diciptakan karena suatu alasan.  Saya mencoba dan ternyata buruk, untuk beberapa alasan yang tidak jelas, konfigurasi pada server yang mengambil konfigurasi baru saja berhenti membaca perubahan, meskipun untuk pertama kalinya semuanya bekerja.  Saya tidak menemukan penyebab kegagalan dan memutuskan untuk melakukannya secara berbeda. <br><br>  Konfigurasi lebih lanjut dilakukan secara eksklusif melalui RSAT, cmdlet yang ditentukan dalam dokumentasi hanya berfungsi di bawah Windows Server dengan GUI.  Menyebarkan replikasi DFS menggunakan Server Core secara eksklusif tidak dimungkinkan.  Anda memerlukan server lain dengan GUI, atau komputer yang menjalankan Windows 10 Pro dengan RSAT diinstal, bergabung ke domain. <br><br>  <b>2.1.</b>  <b>Instal</b> <br><br>  Pada setiap server Anda perlu menginstal Replikasi DFS: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ebf/999/b17/ebf999b179089dd87a346406bfe6a09d.png"><br><br><pre> <code class="plaintext hljs">Install-WindowsFeature FS-DFS-Replication, FS-DFS-Namespace</code> </pre> <br>  <b>2.2.</b>  <b>Membuat grup replikasi baru</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/53b/3e2/9d6/53b3e29d6aee1c0e9f9a6b4e8f5ea06e.png"><br><br>  Pertama, Anda perlu menghubungi grup replikasi kami. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/14d/7ce/a23/14d7cea23a3bd08b1aec745ed40c0fb3.png"><br><br>  Pilih topologi sesuai selera Anda.  Secara pribadi, akan lebih mudah bagi saya untuk menambahkan konten ke satu tempat, jadi saya memilih bintang. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2fb/a17/e99/2fba17e99d83b3bec4940c5517c2a690.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/7a2/6e4/508/7a26e4508dfe041bc25c5cf008120ec2.png"><br><br>  Salah satu server harus menjadi yang utama, dari situlah replikasi dimulai.  Jika Anda mengunggah file ke pendengar, maka file yang diunggah tidak direplikasi. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d36/298/12a/d3629812afb96964a66db8a1c7682513.png"><br><br>  Sebagai folder untuk replikasi, saya memilih folder default dengan situs: <br><br><pre> <code class="plaintext hljs">C:\inetpub\wwwroot</code> </pre> <br>  Folder ini adalah jalur ke direktori server pertama khusus ini.  Anda dapat mereplikasi konten folder ini di mana saja, apa pun lintasannya. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d10/e94/f5e/d10e94f5e3e48d88ddcc3a5cb97ff5a4.png"><br><br>  Dalam satu grup, kami dapat mereplikasi beberapa folder, dan di masa mendatang kami dapat memperluas daftar mereka jika perlu. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ccc/ae9/649/cccae9649e5b0145fb38a6cd59d73490.png"><br><br>  Selesai <br><br><h2>  <font color="#3AC1EF">5. Menguji kinerja</font> </h2><br>  Untuk memahami jumlah pengunjung yang benar-benar menang, Anda perlu melakukan pengukuran.  Mereka akan dilakukan dari dua poin.  PC penulis di Moskow dan server virtual di Frankfurt.  Ketiga poin akan diuji secara terpisah.  Berikut ini ringkasannya. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d26/12c/04a/d2612c04abedc5d8eb796cbeeaaf31f7.png"><br><br>  Kami pergi ke Devtools dan menyaksikan air terjun.  Rata-rata di rumah sakit, CDN akan mengurangi sekitar 200 milidetik sebelum situs terisi penuh.  Gambar, objek terbesar pada halaman, dimuat segera setelah memasuki viewport, jadi perhatikan garis vertikal biru.  CDN mempercepat gaya dan skrip HTML + murni hingga 10-15 milidetik, dan gambar memuat 220 milidetik lebih cepat, ini adalah perbedaan yang sangat signifikan. <br><br><div class="spoiler">  <b class="spoiler_title">Moskow - Moskow:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/12b/5e5/8a9/12b5e58a9665f6901f073c0eba3f2678.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">London - Moskow:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/03e/435/b93/03e435b93de7b098fbd98afdacc0c8f4.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Zurich - Moskow:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/1f2/474/cfb/1f2474cfba94d72d5482cb9a0ba0c679.png"></div></div><br>  Saya juga mengukur kecepatan Jekyll pada host lokal: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/514/976/285/514976285849bbf746909644173302ba.png"><br><br>  Kami beralih ke rumah cahaya dan melihat hasil aneh: <br><br><div class="spoiler">  <b class="spoiler_title">Moskow - Moskow:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/f2b/516/abb/f2b516abbaeb5ea7ec29c39585719d38.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">London - Moskow:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/9ab/9d8/38c/9ab9d838cd9c67792381c0741ef81a27.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Zurich - Moskow:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/12e/500/00b/12e50000b52c228beb3f08367fbbf00d.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Localhost - Jekyll:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/3eb/449/599/3eb449599c0eee7698301470b48ea67b.png"></div></div><br>  Dalam sintetik ini, server yang jauh mendarat memotong host lokal.  Tapi mengapa? <br>  Untuk bersenang-senang, mari singkirkan Google Font dan transfer ke server kami. <br><br><div class="spoiler">  <b class="spoiler_title">Moskow - Moskow:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/457/082/7cb/4570827cb685795120f645da992ebcf8.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">London - Moskow:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/f90/fbd/2ad/f90fbd2ad39d80e6b246faf348fee577.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Zurich - Moskow:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/d45/2f0/530/d452f0530f2d1d914aba53649cff763d.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Localhost - Jekyll:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/bc2/6a1/f27/bc26a1f275f6d3626de02d96b436c186.png"></div></div><br>  Hasil antara pusat data selaras.  Tapi itu masih tidak menjelaskan apa pun.  Saya mengulang tes beberapa kali, hasilnya benar-benar besi dan dapat diproduksi ulang setiap saat. <br><br>  Sekarang kita akan menggunakan VPS dengan dua core dan 4 gigabytes RAM yang terletak di Frankfurt dan melihat apa yang dikatakannya.  Air terjun: <br><br><div class="spoiler">  <b class="spoiler_title">Moskow - Frankfurt:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/025/d40/dd7/025d40dd7962e7e312a6978cff91cabd.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">London - Frankfurt:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/961/e9f/acf/961e9facf3d0a4654654f3541c7093a6.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Zurich - Frankfurt:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/d5a/81e/399/d5a81e399de00ca9f3a451d09379f6cd.png"></div></div><br>  Di sini, dengan poin yang tepat, penghematan waktu hanya pada gaya dan HTML berjumlah 200 milidetik.  Artinya, dalam kasus klien dari Frankfurt, situs hanya akan lebih cepat dengan 200 milidetik.  Ini juga tercermin dalam rumah lampu.  Dalam kasus seperti itu, CDN akan mempercepat tidak hanya toko online, tetapi juga blog yang mudah. <br><br><div class="spoiler">  <b class="spoiler_title">Moskow - Frankfurt:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/e4d/e88/785/e4de88785e56ed3102cef5ade05f8462.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">London - Frankfurt:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/042/b1c/071/042b1c0716f7e44b2f2dfc0b3955a68f.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Zurich - Frankfurt:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/db1/ae1/de5/db1ae1de5ebfd5be8c3af5e6822a4376.png"></div></div><br>  Sekarang nyalakan Google Fonts dan lihat mercusuar lagi. <br><br><div class="spoiler">  <b class="spoiler_title">Moskow - Frankfurt:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/87d/ae6/281/87dae6281e2510fa35ee4aecd45079f0.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">London - Frankfurt:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/025/ec2/d7d/025ec2d7d6982b39261551f927167ad2.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Zurich - Frankfurt:</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/802/f0c/073/802f0c073e6fa0f445dda60d7823da00.png"></div></div><br>  Sayangnya, saya tidak lagi memiliki poin untuk melakukan tes, jadi saya akan selesai. <br><br><h2>  <font color="#3AC1EF">Kesimpulan</font> </h2><br><ul><li>  CDN untuk menghasilkan semua statika diperlukan, terutama ketika menyangkut gambar-gambar berat atau skrip panjang. </li><li>  Menggunakan Google Font adalah mungkin dan perlu, dalam skenario berat itu benar-benar mempercepat situs. </li><li>  Server utama, jika Anda memutuskan untuk melakukan semua ini pada Windows, disarankan untuk memiliki GUI. </li><li>  Pengguna yang akan mengambil konfigurasi dari server utama sebaiknya dibuat lokal - jika terjadi kegagalan kontroler domain, node mungkin kehilangan koneksi dengan konfigurasi dan sertifikat, dan Application Pool akan dihentikan, karena  tidak akan dapat membaca konfigurasi. </li></ul><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/it/t5/3p/itt53pns2iucwylb3bwn1fmmtnu.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id466447/">https://habr.com/ru/post/id466447/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id466437/index.html">Pelatihan Cisco 200-125 CCNA v3.0. Hari 43. Protokol Routing Distance Vector dan Link State</a></li>
<li><a href="../id466439/index.html">Periksa diri Anda: berapa banyak pertanyaan yang dapat Anda jawab ChGK?</a></li>
<li><a href="../id466441/index.html">Kode kereta python: 10 kesalahan paling umum yang dilakukan pengembang</a></li>
<li><a href="../id466443/index.html">ShIoTiny dan dunia: sensor analog atau ADC untuk yang terkecil</a></li>
<li><a href="../id466445/index.html">Serangan antara trust di antara domain</a></li>
<li><a href="../id466449/index.html">Pelatihan Cisco 200-125 CCNA v3.0. Hari 44. Pengantar OSPF</a></li>
<li><a href="../id466451/index.html">Baca_Anda tidak bisa_menghapus</a></li>
<li><a href="../id466453/index.html">Pelatihan Cisco 200-125 CCNA v3.0. Hari 45. Mengkonfigurasi OSPF</a></li>
<li><a href="../id466455/index.html">Layanan, layanan microser dan pemrograman berorientasi batch</a></li>
<li><a href="../id466457/index.html">Pertanian dan panel surya - strategi win-win untuk insinyur listrik dan petani</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>