<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’… ãŠ—ï¸ ğŸ¤¸ğŸ¿ Reset kata sandi pada Cisco ASA tanpa downtime untuk sirkuit failover aktif / siaga ğŸ––ğŸ» ğŸ”® ğŸ•¤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Baru-baru ini saya mengalami masalah: klien memiliki dua Cisco ASA 5512-x, yang beroperasi dalam mode aktif / siaga. Klien lupa memperbarui kata sandi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reset kata sandi pada Cisco ASA tanpa downtime untuk sirkuit failover aktif / siaga</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418279/">  Baru-baru ini saya mengalami masalah: klien memiliki dua Cisco ASA 5512-x, yang beroperasi dalam mode aktif / siaga.  Klien lupa memperbarui kata sandi, dan semua pengguna telah kedaluwarsa kata sandi.  Saat mencoba masuk, ASA hanya melaporkan tanggal kedaluwarsa dan tidak memungkinkan Anda untuk mengubah kata sandi.  Karena semua pengguna kedaluwarsa, tidak mungkin menghubungkan dan mengubah kata sandi dengan cara apa pun.  Selalu ada opsi ironis untuk mengatur ulang kata sandi dengan mengubah register, tetapi di sini Anda tidak dapat melakukannya tanpa downtime.  Opsi ini tidak cocok.  Diputuskan untuk menggunakan ASA siaga untuk menghindari downtime.  Namun ada beberapa nuansa: <br><br>  1) Jika Anda cukup me-restart ASA siaga, masuk ke mode ROMMON, ganti case dan boot, maka kami akan mendapatkan akses dan akan dapat mengubah kata sandi, tetapi segera setelah kami menjalankan <br><br><pre><code class="hljs lua">copy startup-<span class="hljs-built_in"><span class="hljs-built_in">config</span></span> <span class="hljs-built_in"><span class="hljs-built_in">running</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">config</span></span></code> </pre> <br>  maka segera siaga ASA akan menemukan node aktif dan sudah akan menyinkronkan konfigurasi dari sana. <br><br>  2) Jika Anda mematikan sinkronisasi dan hanya mengunduh konfigurasi, maka ASA siaga akan mengambil alamat ip aktif dan kami akan mengalami konflik. <br><br>  Setelah refleksi, rencana berikut diciptakan: <br><br>  1. Reboot ASA siaga, buka ROMMON, ubah register menjadi 0x41 dan boot: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">rommon</span></span> <span class="hljs-comment"><span class="hljs-comment">#1&gt; confreg 0x41</span></span></code> </pre> <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">rommon</span></span> <span class="hljs-comment"><span class="hljs-comment">#2&gt; boot</span></span></code> </pre> <a name="habracut"></a><br>  2. Sekarang kita putuskan semua antarmuka ASA siaga (ada kemungkinan pada saklar di mana ASA terhubung atau cukup tarik semua kabel jaringan dari ASA itu sendiri). <br><br>  3. Kami memasuki mode EXEC istimewa: <br><br><pre> <code class="hljs pgsql">hostname&gt; <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span></code> </pre> <br>  dan muat konfigurasi kerja: <br><br><pre> <code class="hljs lua">hostname# copy startup-<span class="hljs-built_in"><span class="hljs-built_in">config</span></span> <span class="hljs-built_in"><span class="hljs-built_in">running</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">config</span></span></code> </pre> <br>  Di sini siaga ASA tanpa antarmuka aktif tidak dapat menyinkronkan data atau membahayakan konflik alamat ip jika menganggap dirinya node aktif.  Kami masuk ke konfigurasi dan menambahkan pengguna baru untuk akses lebih lanjut: <br><br><pre> <code class="hljs lisp">hostname# configure terminal hostname(<span class="hljs-name"><span class="hljs-name">config</span></span>)# username test password test</code> </pre> <br>  4. Di sini Anda dapat melakukan berbagai hal secara berbeda, jangan menghubungkan kabel, hanya pada akhirnya sambungkan kabel yang kami putuskan secara fisik, atau sambungkan, tetapi sebelum itu lepaskan semua antarmuka dari konfigurasi.  Pada tahap ini, diputuskan untuk menonaktifkan semua antarmuka melalui konfigurasi dan mempersiapkan inklusi. <br><br><pre> <code class="hljs lisp">hostname(<span class="hljs-name"><span class="hljs-name">config</span></span>)# interface interface_id hostname(<span class="hljs-name"><span class="hljs-name">config-if</span></span>)# shutdown</code> </pre> <br>  5. Kembalikan register default, simpan konfigurasi dan reboot. <br><br><pre> <code class="hljs lisp">hostname(<span class="hljs-name"><span class="hljs-name">config</span></span>)# no config-register hostname(<span class="hljs-name"><span class="hljs-name">config</span></span>)# write</code> </pre> <br>  Sekarang siaga ASA setelah restart akan boot dengan konfigurasi dan tes pengguna yang kami butuhkan.  ASA tidak akan dapat menemukan simpul aktif untuk sinkronisasi dengan siaga, karena antarmuka dimatikan, dan menjadi aktif tidak akan merusak apa pun untuk alasan yang sama. <br><br>  6. Sekarang, setelah memuat dengan konfigurasi yang diinginkan, kita dapat terhubung dengan pengguna uji.  Kami terhubung dan kami memasuki mode EXEC istimewa.  Selanjutnya, aktifkan antarmuka atau antarmuka yang dimaksudkan untuk failover.  Setelah itu, ASA siaga kami akan menemukan simpul aktif, menyinkronkan konfigurasi dan beralih ke mode siaga.  Dalam hal ini, uji pengguna kami akan dihapus, tetapi karena pada saat itu kami sudah dalam mode EXEC istimewa, sesi kami akan tetap.  Jika kita pergi pada saat ini, maka kita tidak akan bisa masuk, jadi kita harus sangat berhati-hati di sini.  Semua antarmuka lain juga akan menyala karena sinkronisasi konfigurasi dari node aktif. <br><br>  Kami dapat mengubah kata sandi pengguna hanya pada simpul aktif, tetapi kami masih tidak memiliki akses ke sana.  Jalan keluarnya adalah membuat ASA stanby kami aktif dengan akses kami yang ada.  Ketika ASA siaga kami memasuki status siap siaga setelah sinkronisasi dengan simpul aktif, kami dapat beralih.  Anda dapat melihat status menggunakan perintah: <br><br><pre> <code class="hljs lisp">hostname(<span class="hljs-name"><span class="hljs-name">config</span></span>)# show failover state</code> </pre> <br>  Dan dengan perintah kedua, kita beralih dari ASA Aktif ke Siaga ASA: <br><br><pre> <code class="hljs lisp">hostname(<span class="hljs-name"><span class="hljs-name">config</span></span>)# failover active</code> </pre> <br>  7. Sekarang, kita memiliki akses pada node aktif.  Di sini sudah mungkin untuk mengubah kata sandi pengguna dan beralih kembali jika perlu (jika ini sangat penting). <br><br>  Dengan demikian, kami dapat mengatur ulang kata sandi tanpa downtime dalam skema ini.  Anda hanya perlu mempertimbangkan penundaan saat beralih dari node aktif ke node cadangan. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id418279/">https://habr.com/ru/post/id418279/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id418269/index.html">Cara Kerja Manajer CPU di Kubernetes</a></li>
<li><a href="../id418271/index.html">Hancurkan garis dengan pemisah. Sedikit tentang CONNECT BY</a></li>
<li><a href="../id418273/index.html">Alat pengembangan untuk platform Baikal-T1 beralih ke ALT distribusi Rusia</a></li>
<li><a href="../id418275/index.html">Pelajaran Pencetakan 3D. Mencetak model berdinding tipis dari 3Dtool</a></li>
<li><a href="../id418277/index.html">Perangkat bayangan kotak</a></li>
<li><a href="../id418281/index.html">Analisis Pekerjaan HeadHunter</a></li>
<li><a href="../id418283/index.html">CocoaHeads di FunCorp</a></li>
<li><a href="../id418285/index.html">Ahli iklim telah menunjukkan bagaimana manusia mempengaruhi variasi musiman dalam suhu atmosfer</a></li>
<li><a href="../id418287/index.html">Daftar periksa wajib untuk pengembangan desain UX aplikasi seluler</a></li>
<li><a href="../id418289/index.html">Bagaimana Solusi TI Membantu Mengatur Harga Dinamis Dalam Toko</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>