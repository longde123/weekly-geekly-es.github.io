<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ûø ‚öôÔ∏è üßó Sotchi. Appareil photo: caract√©ristiques de la cr√©ation d'un projet en g√©n√©ral, compl√®tement, compl√®tement √† partir de z√©ro, sans normes et exemples d√©j√† mis en ≈ìuvre ü§≤üèª üçû üßîüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sochi.Camera - un site avec des flux de diffusion de plus de 300 cam√©ras Web install√©es √† Sotchi et ses environs. Le site et l'ensemble du service son...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sotchi. Appareil photo: caract√©ristiques de la cr√©ation d'un projet en g√©n√©ral, compl√®tement, compl√®tement √† partir de z√©ro, sans normes et exemples d√©j√† mis en ≈ìuvre</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sochikamera/blog/413929/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sochi.Camera</a> - un site avec des flux de diffusion de plus de 300 cam√©ras Web install√©es √† Sotchi et ses environs.  Le site et l'ensemble du service sont √† but non lucratif, cr√©√©s et maintenus √† leurs frais par le fournisseur d'acc√®s Internet local <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Business Connection"</a> , pendant pr√®s de 10 ans.  Dans cet article, nous expliquerons comment coder √† partir du z√©ro absolu;  sur la bataille avec YouTube (nous avons gagn√©);  pourquoi le logiciel libre est mauvais et le service de streaming vid√©o gratuit est bon.  Peut-√™tre √† l'avenir, quand ils se tourneront vers nous avec la prochaine proposition - √©crivez pour 100-200 mille roubles.  le m√™me service que Sotchi. Appareil photo, au lieu de mille mots, nous <s>donnerons √†</s> Rafael un lien vers ce post, afin que tout le monde puisse comprendre imm√©diatement. <br><a name="habracut"></a><br>  <b>Premi√®re version: design d√©chir√© avec des morceaux de code de quelqu'un d'autre</b> <br><br>  Notre projet a √©t√© fait √† partir de z√©ro, il n'y avait pas de services, mod√®les de r√¥le ou mod√®les similaires.  Tout ce que nous avons fait, nous avons d√ª le faire nous-m√™mes: de la r√©√©criture des modules de buggy des biblioth√®ques open source √† l'invention de nouvelles fa√ßons de monter les cam√©ras.  Il n'y avait pas de solutions toutes faites, et lorsque nous avons commenc√© le projet, et maintenant elles ne sont pas non plus sous forme de mod√®les, de toute fa√ßon des comp√©tences en programmation assez d√©centes sont requises. <br><br>  Nous avons commenc√© nous-m√™mes, avec nos administrateurs r√©seau √† plein temps, qui savaient coder un peu.  D√®s les premi√®res √©tapes du projet, nous souhaitons nous simplifier la vie.  Mais la seule version "arrach√©e" du site √©tait la toute premi√®re.  Le design a √©t√© emprunt√© au programme de bureau pour visualiser des photos et des vid√©os, dont personne ne se souvient maintenant.  En fait, l'id√©e originale du site √©tait un cin√©ma en ligne avec de nombreuses salles, avec un fond sombre et un grand √©cran avec une image de haute qualit√©.  La conception de ce programme avec le nom oubli√© n'√©tait que cela - un fond sombre, un tas d'aper√ßus, lorsque vous cliquez dessus, un grand √©cran s'ouvre. <br><br><img src="https://habrastorage.org/webt/is/9x/qj/is9xqjpj2cderxubllih-krvgfo.png"><br><br>  Le code a √©t√© tir√© du DVR Linux, le DVR Linux open source open source.  Il fonctionnait comme un site, il √©tait possible d'y acc√©der via un navigateur et de regarder les flux des cam√©ras.  Sur un morceau de code du DVR Linux, o√π jpeg motion a √©t√© utilis√©, nous avons retir√© le design du programme de visionneuse de photos et nous avons obtenu la premi√®re version de Sotchi. La cam√©ra est maladroite, mais fonctionne. <br><br>  Maintenant, la cinqui√®me version de Sotchi fonctionne.  La conception du site a beaucoup chang√©.  L'id√©e principale d'une ¬´salle de cin√©ma sombre¬ª n'a cependant pas disparu, mais maintenant le design ressemble plus √† la vid√©o Yandex qu'√† une phototh√®que et une vid√©oth√®que de bureau.  Cependant, ce n'est qu'un rappel lointain, pas une apparence d√©chir√©e.  Un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">concours en ligne a</a> √©t√© annonc√© pour la nouvelle version du site, la conception globale et les pictogrammes cr√©√©s par les gagnants ont √©t√© utilis√©s sur la version actuelle du site. <br><br><img src="https://habrastorage.org/webt/j0/ec/qi/j0ecqimdu6c0aw4zf3sloadevcq.jpeg" alt="image"><br><br>  Bien s√ªr, tous les utilisateurs du site n'ont pas favorablement adopt√© un nouveau look; pour les tr√®s m√©contents, l'ancienne version a √©galement √©t√© laiss√©e, cependant, maintenant presque personne ne le visite. <br><br>  En ce qui concerne le code, la deuxi√®me version et les autres ont √©t√© r√©alis√©es de mani√®re plus ind√©pendante et se sont av√©r√©es moins artisanales.  Maintenant, le service est fait en script Java, la partie serveur dans Node.js, la partie client dans Angular.js.  Nous n'avons qu'une seule personne d√©veloppant une application serveur, mais c'est un d√©veloppeur professionnel et le haut niveau de nos services d'aujourd'hui est largement son m√©rite.  Soit dit en passant, toute notre √©quipe est r√©pertori√©e dans la section <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur le projet √† Sotchi.</a> <br><br>  <b>Turbulence lors du passage de Flash √† HTML5</b> <br><br>  Lorsque Steve Jobs a d√©clar√© la guerre √† Flash, notre site y a travaill√©.  Tous les fabricants de navigateurs ont commenc√© √† abandonner progressivement HTML5, o√π la d√©monstration des flux vid√©o n'√©tait pas encore standardis√©e, et nous avons eu de gros probl√®mes.  Sotchi L'appareil photo pourrait fonctionner pendant plusieurs ann√©es sur Flash, mais dans les nouvelles versions des navigateurs, tout fonctionnait de mani√®re instable, nous avons perdu beaucoup d'utilisateurs, car au lieu de la vid√©o des cam√©ras, ils ont une fen√™tre sombre. <br><br><img src="https://habrastorage.org/webt/h-/o8/vu/h-o8vu-kfokzlvfx_vbkldfvl-y.jpeg"><br><br>  Il √©tait n√©cessaire de r√©√©crire le site pour les nouvelles versions de navigateurs, et non seulement d'√©crire un morceau de code pour chaque version s√©par√©ment, mais √©galement de d√©terminer √† la vol√©e un tas de navigateurs.  Ici, notre d√©veloppeur a √©crit une telle construction qu'il a r√©ussi.  Bien s√ªr, cela √©tait tr√®s stressant et compliquait le code.  Ainsi, lorsque la situation de normalisation est r√©gl√©e, nous avons √† nouveau repens√© le service, en √©liminant ces b√©quilles suppl√©mentaires. <br><br>  L'une des forces de notre d√©veloppeur r√©side dans le fait qu'il est constamment engag√© dans la refactorisation - optimise le code, r√©duit la charge sur le serveur et les canaux de communication, surveille en permanence les capacit√©s des nouvelles versions des langages de programmation. <br><br>  Soit dit en passant, en m√™me temps, lorsque nous luttions avec diff√©rents formats de navigateur, YouTube r√©solvait un probl√®me similaire, avec deux petites diff√©rences: YouTube affichait des fichiers, pas des flux, ce qui rendait les programmeurs beaucoup plus faciles;  et c'est YouTube, avec une √©norme √©quipe de programmeurs, et pas une petite entreprise avec un, bien qu'un tr√®s bon et m√™me brillant programmeur.  En regardant maintenant ces affaires pass√©es, nous pouvons dire que la turbulence n'a pas empir√©. <br><br>  En plus de l'approche correcte de notre programmeur principal quant √† l'efficacit√© des logiciels, un autre point tr√®s important √©tait le choix d'une nouvelle plateforme de streaming.  Bien que nous ayons quitt√© Wowza non pas pour une ¬´raison technique¬ª, mais en raison de leur politique tarifaire impudique, nous avons √©galement gagn√© techniquement √† long terme.  Nous avons commenc√© √† travailler avec Flussonic d'Erlivideo sur notre quatri√®me version, il y a environ 4 ans, alors qu'ils n'√©taient pas encore entendus.  Ensuite, ce produit est pass√© d'une source ouverte semi-artisanale √† une publicit√© commerciale normale. <br><br>  L'histoire de ce produit est tr√®s bien confirm√©e par le fait que les produits logiciels sont mieux d√©velopp√©s non pas sur la voie des logiciels open source avec distribution gratuite (ou shareware), mais sur la voie commerciale. <br><br>  Flussonic lui-m√™me, au moment o√π nous allions y passer, existait d√©j√† depuis environ trois ans.  Au d√©but, il avait du code open source, distribu√© gratuitement, et les programmeurs ne gagnaient de l'argent que sur son soutien.  Son d√©veloppement √©tait instable, car les utilisateurs n'ont pas signal√© de bugs, il n'√©tait pas int√©ressant pour des d√©veloppeurs tiers de participer au d√©veloppement du projet, il y avait peu d'argent du support.  Ensuite, le code a √©t√© d√©cid√© de fermer, de cr√©er une soci√©t√© Erlivideo et de commencer √† d√©velopper un produit commercial.  Et quelque part dans l'ann√©e apr√®s la cr√©ation de l'entreprise, nous avons commenc√© √† travailler avec eux. <br><br>  Nous √©tions un terrain d'essai pour eux, une base exp√©rimentale, nous avons partag√© des probl√®mes avec eux, offert des fonctionnalit√©s.  L'une des choses importantes que nous avons obtenues d'eux est un lecteur √©crit sp√©cialement pour leur moteur.  Le point important est que ces deux parties - le noyau et le client - sont √©crites par le m√™me d√©veloppeur, m√™me si des probl√®mes surviennent, elles sont tr√®s rapidement corrig√©es.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Erlivideo a</a> beaucoup grandi pendant cette p√©riode, est devenu bien connu dans l'industrie IPTV, et maintenant sur notre cinqui√®me version, tout fonctionne de mani√®re stable depuis plus d'un an sans aucun probl√®me. <br><br>  <b>Argent: quoi d√©penser et comment gagner de l'argent</b> <br><br>  Apr√®s de nombreuses ann√©es de travail, le site est devenu tr√®s c√©l√®bre, populaire, lui-m√™me est devenu un mod√®le pour de telles ressources.  Nous sommes p√©riodiquement contact√©s pour acheter une solution compl√®te.  Nous avons d√©termin√© ce que cette d√©cision nous co√ªterait aujourd'hui, en tenant compte de notre exp√©rience et des erreurs commises.  En g√©n√©ral, la partie serveur est d'environ 1 000 000 roubles, chaque application mobile est de 500 000 - 600 000 roubles.  Ces quantit√©s d'acheteurs potentiels font peur, ils s'attendent √† un maximum de 100 000 √† 200 000 roubles pour tout.  Lorsque nous commen√ßons √† peindre les composants d'un logiciel, le co√ªt de certaines solutions, les gens sont perplexes: par exemple, pourquoi d√©penser de l'argent pour √©crire des modules pour lesquels il existe des analogues gratuits dans les biblioth√®ques open source.  Oui, juste pour les faire fonctionner mieux! <br><br><img src="https://habrastorage.org/webt/qp/ib/q2/qpibq2cjozcttlpkycr4anjeohk.jpeg" alt="image"><br><br>  Voici un exemple, une t√¢che simple - prendre un flux de la cam√©ra et le distribuer √† un grand nombre d'abonn√©s, juste pour le multiplier sans changer.  Pour une solution gratuite de la biblioth√®que ffmpeg open source, lorsque le flux de la source est interrompu, l'ensemble du processus s'arr√™te et doit √™tre red√©marr√© manuellement.  Imaginez qu'il y ait plus de trois cents cam√©ras sur le r√©seau, un r√©seau assez grand, quelque chose se passe constamment - quelque part sur la cam√©ra, l'alimentation sera coup√©e, quelque part entre le serveur et la cam√©ra, la connexion se coupera et le service s'arr√™te.  Il est plus facile de payer pour une solution payante qui peut surveiller l'√©tat et red√©marrer si n√©cessaire, que d'utiliser une solution gratuite, mais surveiller et red√©marrer manuellement. <br><br>  En g√©n√©ral, selon nos estimations, le co√ªt de d√©veloppement d'un logiciel repr√©sentait environ 40% de tous les co√ªts du projet.  Les 60% restants sont tous du mat√©riel, y compris des cam√©ras et des serveurs, ainsi que des licences pour les applications tierces utilis√©es. <br><br>  Nous avons d√©pens√© beaucoup d'argent pour ce projet qui est le n√¥tre, et en g√©n√©ral, maintenant nous ne refuserions pas de gagner de l'argent.  Mais ce n'est certainement pas une voie directe, ¬´sur le front¬ª, de mon√©tisation.  Apr√®s avoir √©tudi√© la majorit√© des mod√®les de mon√©tisation, il est devenu clair que ceux o√π le service gagne directement n√©cessitent des tracas suppl√©mentaires et ne sont g√©n√©ralement pas payants.  Il existe maintenant des solutions techniques qui peuvent facilement int√©grer la publicit√© directement dans le flux vid√©o.  Techniquement, c'est une tr√®s bonne solution, la charge sur les serveurs est faible, il est impossible de contourner les bloqueurs de publicit√©s, avec notre pr√©sence de 500 000 √† 600 000 personnes, un tr√®s large public va regarder cette annonce vid√©o tous les mois, mais construire un syst√®me de vente autour de cela et administrer les flux de tr√©sorerie est tr√®s cher, et nous ne pr√©voyons pas une telle mon√©tisation. <br><br>  Nous utilisons donc des mod√®les indirects, principalement pour promouvoir notre c≈ìur de m√©tier d'op√©rateur.  Par exemple, lorsque nous acc√©dons au site, nous analysons l'adresse IP du visiteur et nous affichons des annonces de nos propres services au r√©sident local, mais pas √† notre client.  Nous fournissons des flux √† afficher sur des ressources Web tierces en √©change de notre publicit√© avec eux.  Sur les cha√Ænes de t√©l√©vision locales, ils sont pr√™ts √† utiliser la vid√©o de nos cam√©ras dans les blocs d'informations aux heures de grande √©coute avec le nom de notre soci√©t√©.  Nos cha√Ænes h√¥teli√®res clients diffusent des flux vid√©o de nos cam√©ras sur leurs t√©l√©viseurs, les recevant comme cha√Ænes de t√©l√©vision, pour eux c'est un service gratuit suppl√©mentaire, une puce pour les clients. <br><br>  Le site lui-m√™me, avec pr√®s de 5 millions de vues par mois, que nous utilisons comme plate-forme publicitaire, mais nous ne vendons pas de publicit√©s - nous pla√ßons uniquement nos propres clients ou nos clients l√©gaux, nous augmentons simplement la fid√©lit√©. <br><br>  √Ä l'avenir, nous pr√©voyons d'adh√©rer √† la m√™me ligne strat√©gique - les m√©thodes indirectes de mon√©tisation, un service gratuit pour les visiteurs. <br><br>  Nous attendons avec impatience vos questions, commentaires, commentaires et suggestions concernant le prochain article. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr413929/">https://habr.com/ru/post/fr413929/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr413917/index.html">Les titulaires de droits d'auteur croient que Yandex contribue √† la croissance du piratage dans le pays</a></li>
<li><a href="../fr413921/index.html">Comment sauver le projet de livres suppl√©mentaires</a></li>
<li><a href="../fr413923/index.html">Peut-√™tre que l'atmosph√®re peut encore √™tre nettoy√©e du dioxyde de carbone</a></li>
<li><a href="../fr413925/index.html">CVT pour Moskvich</a></li>
<li><a href="../fr413927/index.html">Digispark sur Attiny85 - Connexion sous Windows 10</a></li>
<li><a href="../fr413931/index.html">Version du noyau Linux 4.17: ce que vous devez savoir √† ce sujet</a></li>
<li><a href="../fr413933/index.html">[CASE] Comment nous avons am√©nag√© le hangar du Boeing 747</a></li>
<li><a href="../fr413935/index.html">Connaissez-vous bien bash?</a></li>
<li><a href="../fr413937/index.html">Id√©es fausses des programmeurs sur l'emploi</a></li>
<li><a href="../fr413939/index.html">R√©duction du r√©seau neuronal √† l'aide de l'optimisation variationnelle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>