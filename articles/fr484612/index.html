<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õπüèø üëßüèæ üòÅ Optimisation du temps de construction du projet ü§¶üèæ üìé üë®üèΩ‚Äçüè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L√† o√π je travaille (dans la startup Spot.IM , dont la taille se situe entre petite et moyenne), Webpack est utilis√© pour construire diff√©rents projets...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Optimisation du temps de construction du projet</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/484612/">  L√† o√π je travaille (dans la startup <a href="https://www.spot.im/">Spot.IM</a> , dont la taille se situe entre petite et moyenne), Webpack est utilis√© pour construire diff√©rents projets.  Apr√®s 4 ans de travail sur notre produit principal, alors que tant de personnes ont contribu√© √† son code qu'il ne peut pas √™tre compt√©, le temps de son montage initial a atteint 90 secondes exorbitantes, et le temps de remontage - 14. <br><br>  Il faut environ 14 secondes pour attendre apr√®s chaque clic sur le bouton "Enregistrer". <br><br>  Apr√®s avoir eu recours √† quelques optimisations simples, telles que n'importe qui peut postuler dans leur projet, nous avons pu r√©duire les chiffres ci-dessus √† 20 secondes pour l'assemblage et 1 seconde pour la reconstruction du projet. <br><br> <a href="https://habr.com/ru/company/ruvds/blog/484612/"><img src="https://habrastorage.org/webt/d9/jb/sc/d9jbscezozngccwtdz8pkqlvmh8.png"></a> <br><br>  Dans cet article, je veux parler de quelques changements simples, ce qui permet au projet d'am√©liorer consid√©rablement son temps d'assemblage.  Veuillez noter que si vous utilisez <a href="https://github.com/facebook/create-react-app">CreateReactApp</a> (ou un autre g√©n√©rateur d'application √† la mode), cet article peut ne pas vous √™tre particuli√®rement utile.  Mais si vous n'utilisez rien de tel, alors ce dont nous parlons ici peut vous √™tre tr√®s utile. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Mesurer le temps de construction d'un projet</font> </h2><br>  Avant de faire tout type d'optimisation, mettons en place une mesure d'indicateurs permettant de juger des r√©sultats du travail.  Pour ce faire, utilisez le package <a href="https://www.npmjs.com/package/speed-measure-webpack-plugin">speed-measure-webpack-plugin</a> (SMP): <br><br><pre><code class="plaintext hljs">const webpackConfig = require('./webpack.config') const SpeedMeasurePlugin = require('speed-measure-webpack-plugin') const smp = new SpeedMeasurePlugin({   disable: !process.env.MEASURE, }) module.exports = smp.wrap(webpackConfig)</code> </pre> <br>  Nous pla√ßons le fichier de configuration Webpack dans l'encapsuleur SMP (en d√©marrant le m√©canisme pour prendre des mesures de performances √† l'aide de la variable d'environnement), puis nous transf√©rons l'objet de configuration Webpack.  Apr√®s cela, nous avons √† notre disposition un rapport agr√©able qui nous permet de savoir combien de temps est consacr√© √† chaque chargeur de d√©marrage pendant l'assemblage.  En utilisant SMP, nous obtenons un double avantage.  Premi√®rement, apr√®s avoir apport√© une certaine am√©lioration, nous pouvons imm√©diatement d√©couvrir comment cela a affect√© le temps de construction du projet.  Deuxi√®mement, nous avons imm√©diatement √† notre disposition un rapport complet sur le temps que prend chaque bootloader (ou, plus pr√©cis√©ment, la ¬´cha√Æne de bootloader¬ª). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f15/e08/8ee/f15e088ee6791f9b4cc0d2449773cf10.png"></div><br>  <i><font color="#999999">Rapport g√©n√©r√© avec le plug-in speed-measure-webpack</font></i> <br><br><h2>  <font color="#3AC1EF">Am√©lioration du temps de construction initial d'un projet</font> </h2><br>  Apr√®s avoir commenc√© √† utiliser SMP, nous avions des informations sur la fa√ßon dont le temps de g√©n√©ration du projet change lors de l'am√©lioration du processus de g√©n√©ration.  La premi√®re chose que nous avons commenc√© √† optimiser √©tait le temps de construction initial (c'est-√†-dire le temps qu'il a fallu √† Webpack pour construire le paquet apr√®s son initialisation).  Pour acc√©l√©rer le processus de construction initial, nous avons d√©cid√© d'utiliser le <code>cache-loader</code> d√©marrage du <code>cache-loader</code> . <br><br>  <a href="https://github.com/webpack-contrib/cache-loader">Cache-loader</a> est un chargeur qui met en cache et enregistre sur le disque (ou la base de donn√©es) les r√©sultats du travail des chargeurs qui le suivent.  Cela signifie que la prochaine fois que vous d√©marrez Webpack, vous pouvez constater une am√©lioration significative de la vitesse de construction, ou du moins vous pouvez l'esp√©rer. <br><br>  Voici un exemple: <br><br><pre> <code class="plaintext hljs">{  rules: [    {      test: /\.jsx?$/,      use: [        'cache-loader',        'babel-loader',      ],    },    {      test: /\.scss$/,      use: [        'style-loader',        'cache-loader',        'css-loader',        'postcss-loader',        'sass-loader',      ],    },  ] }</code> </pre> <br>  L'ajout d'un <code>cache-loader</code> avant <a href="https://www.npmjs.com/package/css-loader">css-loader</a> (pour CSS) et avant <a href="https://www.npmjs.com/package/babel-loader/">babel-loader</a> (pour JS) nous a permis de supprimer environ 75 secondes du temps pass√© sur la construction initiale du projet. <br><br>  Maintenant, travaillons sur le temps de remontage.  Nous allons essayer d'am√©liorer ce temps en changeant la propri√©t√© <code>devtool</code> . <br><br><h2>  <font color="#3AC1EF">Cartes de code Webpack</font> </h2><br>  Dans les param√®tres du Webpack, vous pouvez trouver la propri√©t√© <a href="https://webpack.js.org/configuration/devtool/">devtool</a> qui, selon la documentation, ¬´vous permet de choisir le style de cr√©ation des cartes de code utilis√©es pour am√©liorer les capacit√©s de d√©bogage.  Les points de consigne peuvent affecter consid√©rablement la vitesse de montage et de remontage. " <br><br>  En d'autres termes, la modification de la propri√©t√© <code>devtool</code> affecte la carte de code qui sera disponible pour le d√©veloppeur apr√®s la construction du projet.  Et cela, √† son tour, d√©pend du temps qu'il faut pour cr√©er une telle carte de code. <br><br>  Les exp√©riences avec cette propri√©t√© sont quelque chose de terrain qui peut changer de fa√ßon permanente la vie d'un programmeur.  Cela a un impact √©norme sur la vitesse de construction du projet.  A savoir, nous avons chang√© la valeur <code>devtool</code> de <code>source-map</code> (probablement c'est le mode le plus lent) en <code>eval-source-map</code> et avons pu r√©duire le temps de r√©assemblage du projet de 14 √† 3,5 secondes: <br><br><pre> <code class="plaintext hljs">{  devtool: process.env.NODE_ENV === 'development'    ? 'eval-source-map'    : 'source-map' }</code> </pre> <br>  La propri√©t√© <code>devtool</code> capable d'accepter 12 variantes de valeur.  CreateReactApp, par exemple, utilise <a href="">une carte source de module bon march√©</a> .  Par cons√©quent, si vous allez configurer cette propri√©t√©, testez et trouvez la valeur qui vous convient le mieux. <br><br>  Il convient de noter que lors de l'utilisation de m√©thodes rapides de cr√©ation de cartes de code, la qualit√© des cartes r√©sultantes se d√©t√©riore.  Ces d√©t√©riorations peuvent √™tre ressenties en commen√ßant le d√©bogage.  Heureusement, les navigateurs modernes suivent le TC39.  En cons√©quence (au moins pendant le d√©veloppement), il n'est pas vraiment n√©cessaire de transpiler de grandes quantit√©s de code.  Si vous configurez Babel pour que cet outil transporte JavaScript √† un niveau que la derni√®re version du navigateur comprend (comme cela est fait dans <a href="">CRA</a> ), alors avec le d√©bogage de code, tout devrait bien se passer, car les mappages de code ne diff√©reront pas trop du code lui-m√™me. <br><br>  Voici √† quoi devrait ressembler <code>babel.config.js</code> si vous d√©cidez de transposer le code dans un √©tat clair pour les derni√®res versions des diff√©rents navigateurs: <br><br><pre> <code class="plaintext hljs">module.exports = {  presets: [    [      '@babel/preset-env',      {        targets: [          'last 1 chrome version',          'last 1 safari version',          'last 1 firefox version',        ].join(', '),      },    ],  ],  // ... }</code> </pre> <br>  C‚Äôest tout.  Trois √©tapes simples et le temps de construction de notre projet a √©t√© consid√©rablement r√©duit. <br><br>  Je voudrais noter que quelqu'un qui commence √† r√©soudre un probl√®me similaire peut avoir envie de consulter d'abord la documentation Webpack et de la lire correctement.  Cependant, ce n'est pas la seule source de connaissances. <br><br>  J'ai trouv√© une autre approche pour trouver des informations pr√©cieuses sur les projets de construction.  Cette approche a fait ses preuves dans la pratique.  Il consiste √† analyser les fichiers <code>webpack.config</code> des projets open source existants.  En particulier, le fichier de projet <a href="">CreateReactApp</a> .  En lisant attentivement ce fichier, vous pouvez d√©couvrir beaucoup de choses utiles. <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>  Un lecteur attentif a pu constater qu'au tout d√©but il s'agissait de r√©duire le temps de remontage √† 1 seconde.  Et la meilleure valeur de cet indicateur mentionn√© dans le texte √©tait de 3,5 secondes.  De toute √©vidence, quelque chose a √©t√© omis lors de la description de la progression de l'optimisation du processus d'assemblage.  Il en est ainsi.  Il a √©t√© possible d'am√©liorer le temps de remontage du projet √† 1 seconde en gagnant 2,5 secondes suppl√©mentaires gr√¢ce √† des optimisations subtiles, qui d√©pendent largement des caract√©ristiques sp√©cifiques du projet, √† savoir Spot.IM.  Par cons√©quent, une description de ces am√©liorations n'est pas fournie ici. <br><br>  <b>Chers lecteurs!</b>  Optimisez-vous le temps de construction de vos projets? <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr484612/">https://habr.com/ru/post/fr484612/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr484596/index.html">Boutique en ligne c√¥t√© client Blazor: Partie 1 - Autorisation oidc (oauth2) + Identity Server4</a></li>
<li><a href="../fr484600/index.html">Microsoft Ignite The Tour Prague Conf√©rence technique</a></li>
<li><a href="../fr484602/index.html">Livre ¬´D√©veloppement d'applications mobiles en C # pour iOS et Android¬ª</a></li>
<li><a href="../fr484604/index.html">Nouvelle ann√©e, nouveau navigateur: Microsoft Edge hors de l'√©valuation pr√©liminaire et maintenant disponible en t√©l√©chargement</a></li>
<li><a href="../fr484610/index.html">Au revoir le code propre</a></li>
<li><a href="../fr484614/index.html">6 recommandations pour d√©velopper des applications Go s√©curis√©es</a></li>
<li><a href="../fr484616/index.html">6 le√ßons tir√©es de l'exp√©rience d'optimisation des performances du service Node.js</a></li>
<li><a href="../fr484618/index.html">Angular 9 et Ivy: chargement de composants paresseux</a></li>
<li><a href="../fr484620/index.html">Nouveau rendu graphique PS1 pour l'√©mulateur Omega Red</a></li>
<li><a href="../fr484624/index.html">Mod√®les de je√ªne √† intervalle et d'extension de la dur√©e de vie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>