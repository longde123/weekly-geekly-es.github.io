<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📞 🤯 🤠 قوالب مخصصة في GTM: مثال 🧢 ➡️ 🌩️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="في نهاية شهر مايو ، قدمت Google ميزة جديدة في Google Tag Manager (GTM): قوالب مخصصة أو قوالب مخصصة. دعونا نرى سبب الحاجة إليها ، وكيفية استخدامها ، وم...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>قوالب مخصصة في GTM: مثال</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458788/" style=";text-align:right;direction:rtl">  في نهاية شهر مايو ، قدمت Google ميزة جديدة في Google Tag Manager (GTM): قوالب مخصصة أو قوالب مخصصة.  دعونا نرى سبب الحاجة إليها ، وكيفية استخدامها ، وما الاختلافات بين علامات HTML ومتغيرات JavaScript. <br><br>  على سبيل المثال ، فكر في إنشاء قالب مخصص لـ VKontakte لاستعادة الحيوية للبكسل وتخصيص علامات GTM من خلاله. <br><br><img src="https://habrastorage.org/webt/c-/62/zr/c-62zrfxks1t6c2gfsv0kn2brjm.png"><br><a name="habracut"></a><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">كلمات بسيطة حول قوالب مخصصة</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">إنشاء قالب مخصص</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">• علامة التبويب معلومات</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">• علامة التبويب الحقول</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">• علامة التبويب رمز</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">• علامة التبويب أذونات</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">تخصيص واختبار العلامة على القالب المخصص المنشأ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">• مشاهدة الصفحة</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">• AddToCart</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">• اختبار التعدين</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">استنتاج</a> <br><br><a name="1"></a><h2 style=";text-align:right;direction:rtl">  كلمات بسيطة حول قوالب مخصصة </h2><br>  القوالب المخصصة هي قوالب يمكن للمستخدمين من خلالها إنشاء علامات أو متغيرات جديدة.  لدى GTM قوالب جاهزة (في القسم المميز أو الموصى به) ، على سبيل المثال ، علامة Google Analytics و Google Optimize وغيرها.  الآن يمكننا استكمالها بقوالبنا.  بمجرد إنشائها ، سوف تظهر في علامة التبويب مخصص: <br><br><img src="https://habrastorage.org/webt/nx/q_/mu/nxq_mu_uxl6tyiumnl8xbzt6o2c.png"><br><br>  يتمثل الاختلاف الرئيسي بين علامات HTML ومتغيرات JS في أنه عندما ينشئ المستخدم علامة أو متغيرًا وفقًا لقالب جاهز ، فإنه لا يتفاعل مع رمز JS. <br><br>  تتم كتابة رمز قالب المستخدم بواسطة المطور أو محلل الويب في مرحلة إنشائه.  بعد ذلك ، عند إنشاء علامة أو متغير وفقًا لقالب المستخدم ، يتم تنفيذ كل التفاعل من خلال الواجهة (التي يتم تكوينها أيضًا عند إنشاء قالب مستخدم): <br><br><img src="https://habrastorage.org/webt/pe/e2/te/pee2tevqbahm_nplbfgj0btis34.png"><br><br>  وفقًا لذلك ، بالمقارنة مع كتابة علامة HTML أو متغير JS ، يصبح تخصيص علامة أو متغير وفقًا لقالب المستخدم أمرًا أسهل من حيث الحجم ، لأن هذا لا يتطلب معرفة ومهارات في العمل مع JavaScript. <br><br>  إضافة كبيرة أخرى من القوالب المخصصة هي أن احتمال "وضع" موقع يتم تقليله بترتيب حجم بسبب خطأ في رمز JS للعلامة. <br><br>  في المثال الخاص بنا ، لتكوين علامة الاستهداف الديناميكي "VKontakte" ، لم تعد بحاجة إلى الاتصال بالمطورين - يمكن إعداد كل شيء بشكل مستقل ، حتى نقل البيانات حول البضائع (مع تكوين التجارة الإلكترونية المتقدمة من Google على الموقع) ، مع تجربة فقط مع GTM. <br><br><a name="2"></a><h2 style=";text-align:right;direction:rtl">  إنشاء قالب مخصص </h2><br>  نظرًا لأننا نقوم بإنشاء قالب علامة ، نحتاج إلى الانتقال إلى قسم "النماذج" والنقر فوق الزر "جديد" في قسم "قوالب العلامات". <br><br><img src="https://habrastorage.org/webt/ca/bt/sa/cabtsaamxy-zoglccqgvt1v_tra.png"><br><br>  بعد ذلك ، يفتح محرر القوالب: <br><br><img src="https://habrastorage.org/webt/bf/c3/jf/bfc3jf2xgpkasmc3qvik2tp4wxy.png"><br><br>  على الجانب الأيسر من المحرر توجد نافذة إعدادات ، وعلى الجانب الأيمن هناك نافذة معاينة ووحدة تحكم.  توجد أربع علامات تبويب في نافذة الإعدادات ضرورية لإنشاء القالب والعمل به. <br><br><a name="3"></a><h3 style=";text-align:right;direction:rtl">  علامة تبويب المعلومات </h3><br>  يتم ملء المعلومات الموجودة على العلامة في علامة التبويب هذه: الاسم والوصف والرمز.  هذه هي المعلومات التي سنراها عند إنشاء علامة جديدة في قائمة القوالب: <br><br><img src="https://habrastorage.org/webt/dd/nm/9f/ddnm9fvcygh2ob6jzkliccqgi1o.png"><br><br>  هناك متطلبات لرمز العلامة: تنسيق PNG أو JPEG أو GIF بدقة 64 × 64 بكسل على الأقل ولا يزيد حجمها عن 50 كيلوبايت. <br><br><a name="4"></a><h3 style=";text-align:right;direction:rtl">  علامة تبويب الحقول </h3><br>  ينشئ هذا القسم واجهة القالب الخاص بنا.  تتكون الواجهة من عدة حقول وأشكال يتفاعل معها المستخدم في مرحلة إنشاء علامة أو متغير جديد. <br><br>  في المستقبل ، يتم استخدام المعلومات التي أدخلها المستخدم عند إنشاء العلامة باستخدام الواجهة في رمز القالب. <br><br>  لإضافة عنصر جديد ، انقر فوق الزر "إضافة حقل".  تظهر نافذة تحديد نوع العنصر: <br><br><img src="https://habrastorage.org/webt/g5/ko/d7/g5kod7ox7dal761180kpdfhojto.png"><br><br>  تتيح لك GTM تحديد الأنواع التالية من عناصر الواجهة: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>مربع النص</b> </li><li style=";text-align:right;direction:rtl">  <b>القائمة المنسدلة</b> </li><li style=";text-align:right;direction:rtl">  <b>خانة الاختيار</b> </li><li style=";text-align:right;direction:rtl">  <b>التبديل.</b> </li><li style=";text-align:right;direction:rtl">  <b>جدول بسيط</b> ، هنا يمكنك تعديل كل خلية. </li><li style=";text-align:right;direction:rtl">  <b>جدول ممتد</b> ، يمكنك فقط تحرير صف ، هذا النوع من الجدول مناسب لاستخدامه لإنشاء قاموس من أزواج القيمة الرئيسية ؛ </li><li style=";text-align:right;direction:rtl">  <b>مجموعة من العناصر</b> ، يسمح لك بتجميع عدة أنواع في مجموعة ؛ </li><li style=";text-align:right;direction:rtl">  يستخدم <b>الاختصار</b> لإضافة نص إلى الواجهة ، ولا يتطلب من المستخدم إدخال أي بيانات. </li></ul><br>  بعد إضافة عنصر ، ستحتاج إلى إعطائه اسمًا مألوفًا ، والذي سيتم استخدامه بعد ذلك في الكود.  هذا هو نوع من الاسم المتغير - يجب أن يكون مفهومًا ويكشف جوهر عنصر الواجهة الذي تم إنشاؤه.  على سبيل المثال ، لا يعني الاسم "ID" أي شيء محدد ، لكن الاسم "pixelIDs" يظهر بالفعل أنه يتم تخزين معرفات البكسل التي أدخلها المستخدم في هذا العنصر: <br><br><img src="https://habrastorage.org/webt/fv/1h/ht/fv1hht_iaatbuhi1ejovajkehhc.png"><br><br>  بعد ذلك ، انتقل إلى إعدادات كل عنصر وقم بتنشيط الخصائص الضرورية. <br>  في المواقف المختلفة ، تكون الخصائص المختلفة لعنصر الواجهة مطلوبة ، وبالتالي فهي كلها مخفية ، ونحن بحاجة إلى تنشيط الخصائص المطلوبة الآن: <br><br><img src="https://habrastorage.org/webt/ah/jx/o1/ahjxo1oz0w8fp6pntytshfs1y_o.png"><br><br>  بالنسبة لأنواع مختلفة من العناصر ، تختلف الخصائص المتاحة ، سأشير إلى العناصر الأكثر استخدامًا ، وهي كلها عناصر تقريبًا: <br><br>  <b>1. اسم العرض</b> .  هذا هو الاسم الذي سيراه المستخدم في الواجهة عند إنشاء العلامة: <br><br><img src="https://habrastorage.org/webt/jf/lk/-g/jflk-glzt0dahft6vpdx9qrzy8q.png"><br><br>  <b>2. قيمة المثال</b> .  هذا تلميح للمستخدم حول القيم التي يجب إدخالها في الحقل: <br><br><img src="https://habrastorage.org/webt/b6/zz/sc/b6zzscielm1pjho74x22rk88c0c.png"><br><br>  <b>3. نص المساعدة</b> .  هذا هو النص الذي سيرى المستخدم ما إذا كان يحوم فوق أيقونة تعليمات العنصر: <br><br><img src="https://habrastorage.org/webt/nv/wo/qr/nvwoqraide7hp-qrbdjaomwvg3e.png"><br><br>  <b>4. قواعد التحقق من البيانات</b> .  في هذه الخاصية ، يمكنك تعيين قواعد معينة للتحقق من البيانات التي أدخلها المستخدم في الحقل ، وإذا لزم الأمر ، نص الخطأ الذي يظهر عند محاولة حفظ علامة مع البيانات التي لم تنجح في الاختبار. <br><br>  على سبيل المثال ، يمكنك تحديد أنه يجب ملء الحقل.  المثال الثاني: تحتاج إلى الحصول على عنوان بريد إلكتروني من المستخدم ، ثم يمكنك التحقق من أن البيانات التي أدخلها المستخدم يجب أن تتطابق مع التعبير العادي <b>. * @. * \ .. *</b> . <br><br><img src="https://habrastorage.org/webt/3s/ma/pb/3smapbl1aorsc4fsvhwpd-1oy4m.png"><br><br>  لتحديد نص الخطأ الذي يظهر إذا كانت البيانات المدخلة لا تتوافق مع قواعد التحقق ، تحتاج إلى تنشيط إعدادات القاعدة المتقدمة: <br><br><img src="https://habrastorage.org/webt/kb/zw/qr/kbzwqr32irigkreu9bbht9fxf1m.png"><br><br><img src="https://habrastorage.org/webt/ek/xh/hg/ekxhhgobsta59wpr6uxsbaqzdwg.png"><br><br>  أيضًا ، في الإعدادات المتقدمة ، يمكنك تحديد الشروط التي يتم بموجبها تنشيط هذه القاعدة (حقل تمكين الشرط). <br><br>  <b>5. شروط الإدراج</b> .  هذه هي الشروط التي بموجبها سيكون للمستخدم عنصر الواجهة هذا. <br><br>  على سبيل المثال ، حتى لا يتم تحميل القالب بعناصر واجهة ، يمكنك إظهار العناصر الضرورية عند تحديد خانة الاختيار.  بمعنى أنه إذا كان المستخدم يريد تكوين نقل بيانات المنتج بالبكسل (هذا ممكن مع موقع التجارة الإلكترونية المتقدمة من Google الذي تم تكوينه على الموقع) ، ثم حدد خانة الاختيار "استخدام dataLayer لنقل بيانات المنتج" ، وبعد تحديد المربع ، تظهر العناصر في واجهة العلامة المطلوبة لتكوين مثل هذا النقل.  إذا لم يتم تحديد المربع ، فلن تكون هناك عناصر في الواجهة. <br><br><img src="https://habrastorage.org/webt/rp/ui/x_/rpuix__y-ya--_uat8taekcwpa0.png"><br><br>  وألاحظ أنه من الضروري هنا الإشارة إلى اسم العنصر ، الذي كان يجب تعيينه مباشرة بعد الإضافة. <br><br>  عند إضافة الإعدادات وإنشاء واجهة ، يمكن عرض جميع التغييرات على الفور واختبارها في نافذة المعاينة: <br><br><img src="https://habrastorage.org/webt/df/bl/l9/dfbll9mc0qvpwcxnbzzx-fbg71g.png"><br><br><a name="5"></a><h3 style=";text-align:right;direction:rtl">  علامة تبويب الرمز </h3><br>  علامة التبويب هذه هي محرر رمز. <br><br>  تتم كتابة شفرة قوالب GTM المخصصة في JavaScript ES6 ويتم تشغيلها في بيئة معزولة حيث تتم جميع الاتصالات مع البيانات العالمية (أي ، مباشرة مع الصفحة) من خلال API.  لا توجد كائنات عمومية ، مثل النافذة أو الوثيقة ، على التوالي ، بالطريقة المعتادة أيضًا.  على سبيل المثال ، المنشئات (كائن جديد وما شابه) ، setTimeout ، parseInt ، delete ، إلخ.  - لن يعمل كل هذا في "القالب المخصص". <br><br>  ولكن هناك API لكل هذا.  وبالتالي ، يجب أن تبدأ كتابة التعليمات البرمجية للقالب المخصص بحقيقة أننا نحدد واجهات برمجة التطبيقات التي سنستخدمها في الكود الخاص بنا: <br><br><pre style=";text-align:right;direction:rtl"><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// API //     const copyFromWindow = require('copyFromWindow'); //     const setInWindow = require('setInWindow'); //      const injectScript = require('injectScript'); //    const callInWindow = require('callInWindow'); //  ,     ,    const makeTableMap = require('makeTableMap'); //   URL  const getUrl = require('getUrl'); //    const getQueryParameters = require('getQueryParameters'); //     const makeInteger = require('makeInteger'); //    const makeString = require('makeString'); //  setTimeout const callLater = require('callLater'); //  console.log const logToConsole = require('logToConsole');</span></span></code> </pre> <br>  راجع <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">مساعدة مطوري Google للحصول على</a> قائمة كاملة بواجهات برمجة التطبيقات مع وثائق مفصلة. <br><br>  سأريك أمثلة لكيفية العمل مع واجهة برمجة التطبيقات: <br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><tbody><tr><th>  وصف العمل </th><th>  شبيبة الكلاسيكية </th><th>  قالب مخصص API </th></tr><tr><td>  إخراج وحدة التحكم </td><td>  console.log ('مرحبًا') ؛ </td><td>  logToConsole ("مرحبا") ؛ </td></tr><tr><td>  ضبط الموقت </td><td>  setTimeout (وظيفة ، 100) ؛ </td><td>  callLater (وظيفة) ؛ </td></tr><tr><td>  تحويل إلى سلسلة </td><td>  سلسلة (1234) ؛ </td><td>  makeString (1234) ؛ </td></tr><tr><td>  التحويل إلى عدد صحيح </td><td>  parseInt ('1234'، 10)؛ </td><td>  makeInteger ('1234') ؛ </td></tr><tr><td>  مضيف الصفحة </td><td>  window.location.hostname </td><td>  getUrl ('المضيف') ؛ </td></tr></tbody></table></div><br>  كما ترى من جدول المثال ، بعد تحديد واجهة برمجة التطبيقات ، يجب عليك استخدامه بدلاً من بنيات JS القياسية. <br><br>  بعد تعريف API ، من المستحسن تعريف كائن بالإعدادات التي أدخلها المستخدم.  يمكن أن يتم ذلك أيضًا ، على سبيل المثال ، أثناء التعليمات البرمجية القابلة للتنفيذ ، وطلب البيانات اللازمة من إعدادات المستخدم.  ولكن إذا حددنا كائن الإعدادات من البداية ، يصبح العمل باستخدام الكود أسهل وأكثر قابلية للفهم ، حيث يتم تخزين جميع إعدادات المستخدم في كائن منفصل. <br><br>  للحصول على البيانات من عنصر واجهة ، يجب عليك استخدام بنية البيانات. <br><br>  {{اسم العنصر}}: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    const settings = { //  event: data.event, //ID  () pixelIDs: data.pixelIDs, //ID - (  1 -) priceListId: data.priceListId, //   -? fewPriceLists: data.fewPriceLists, //ID - (    ) priceListIds: data.priceListIds === undefined ? data.priceListIds : makeTableMap(data.priceListIds,'hostname','priceListId'), //  ecommerce   ? ecommerceUse: data.ecommerceUse, // ecommerce   eventEcommerce: data.eventEcommerce, //     siteSearchQueryParam: data.siteSearchQueryParam };</span></span></code> </pre><br>  ملاحظة: إذا قمت بتمرير طريقة غير معروفة إلى makeTableMap ، فسيؤدي ذلك إلى حدوث خطأ في البرنامج النصي ، لذا فإنني أستخدم إنشاءًا مع عامل تشغيل ثلاثي (سجل مختصر لملف if-else) لتصفية هذه البرامج النصية. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">حول طريقة makeTableMap.</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  إذا كانت الواجهة تستخدم جدولًا ممتدًا ، فسيتم تخزين البيانات الموجودة به في هذا النموذج: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">[ <span class="hljs-string"><span class="hljs-string">'key'</span></span>: <span class="hljs-string"><span class="hljs-string">'k1'</span></span>, <span class="hljs-string"><span class="hljs-string">'value'</span></span>: <span class="hljs-string"><span class="hljs-string">'v1'</span></span>}, <span class="hljs-string"><span class="hljs-string">'key'</span></span>: <span class="hljs-string"><span class="hljs-string">'k2'</span></span>, <span class="hljs-string"><span class="hljs-string">'value'</span></span>: <span class="hljs-string"><span class="hljs-string">'v2'</span></span>} ]</code> </pre><br>  بعد المعالجة باستخدام طريقة makeTableMap ، تصبح البيانات كائنًا عاديًا مع أزواج قيمة المفتاح: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">'k1'</span></span>: <span class="hljs-string"><span class="hljs-string">'v1'</span></span>, <span class="hljs-string"><span class="hljs-string">'k2'</span></span>: <span class="hljs-string"><span class="hljs-string">'v2'</span></span> }</code> </pre><br></div></div><br>  مطلب آخر لرمز القالب المخصص: إذا تم تنفيذ العلامة بنجاح ، يجب عليك استدعاء الأسلوب data.gtmOnSuccess () ، وفي حالة حدوث خطأ ، اتصل بالطريقة data.gtmOnFailure (). <br><br>  على سبيل المثال ، في الكود الخاص بي ، يتم استدعاء طريقة data.gtmOnSuccess () بعد إرسال الطلب بنجاح ، ويتم استدعاء طريقة data.gtmOnFailure () في حالة فشل التنزيل في صفحة البرنامج النصي الخارجية VK openapi.js. <br><br>  بعد تحديد واجهة برمجة التطبيقات وتعريف الكائن بالإعدادات ، يمكنك البدء في كتابة خوارزمية للعمل على بكسل. <br><br>  الشيء الرئيسي الذي يجب تذكره هنا هو: <br><br>  • إذا كنت بحاجة إلى الحصول على متغير عمومي - استخدم أسلوب copyFromWindow API. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">copyFromWindow(<span class="hljs-string"><span class="hljs-string">'VK'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//VK -   ,    </span></span></code> </pre><br>  • إذا كنت بحاجة إلى تعيين متغير عمومي ، فإننا نستخدم طريقة setInWindow API. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">setInWindow(<span class="hljs-string"><span class="hljs-string">'openapiInject'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-comment"><span class="hljs-comment">//openapiInject -   ,    //1 - ,    .</span></span></code> </pre><br>  • إذا كنت بحاجة إلى تشغيل وظيفة عمومية ، فإننا نستخدم طريقة callInWindow API. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">callInWindow(<span class="hljs-string"><span class="hljs-string">'VK.Retargeting.Init'</span></span>, p); <span class="hljs-comment"><span class="hljs-comment">//VK.Retargeting.Init -   ,    //p - ,     </span></span></code> </pre><br>  • إذا كنت بحاجة إلى إضافة برنامج نصي خارجي إلى الصفحة - فاستخدم طريقة injectScript API. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">injectScript(<span class="hljs-string"><span class="hljs-string">'https://vk.com/js/api/openapi.js?159'</span></span>, pixel.setVkAsyncInit(), data.gtmOnFailure, <span class="hljs-string"><span class="hljs-string">'vkPixel'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//https://vk.com/js/api/openapi.js?159 -  ,      //pixel.setVkAsyncInit() - ,        //data.gtmOnFailure - ,        //vkPixel -  ,  ,   URL  .    ,   JavaScript      </span></span></code> </pre><br>  • إذا كنت بحاجة إلى الحصول على عنوان URL (أو جزء منه) - استخدم طريقة getUrl API. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">getUrl(<span class="hljs-string"><span class="hljs-string">'host'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//host -  URL,  .  ,  host: protocol, port, path, extension, fragment, query.</span></span></code> </pre><br>  كما كتبت أعلاه ، يدعم Custom Template JS ES6.  من المستحسن استخدام بناء الجملة هذا ، لأنه يقصر الكود ويجعله أكثر قابلية للقراءة ، وعمل JS أكثر قابلية للتنبؤ به ويشبه لغات البرمجة الأخرى. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">المزيد عن JS ES6 Syntax</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  الشيء الرئيسي الذي يُفضل استخدامه هو وظائف السهم والإعلانات من const والسماح للمتغيرات بدلاً من var. <br><br>  المتغير المعلن عبر const هو ثابت لا يمكن تغيير قيمته. <br><br>  يختلف المتغير المصرح به خلال let عن المتغير المعلن خلال var كما يلي: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  اسمحوا لا تضاف إلى كائن نافذة عمومية. </li><li style=";text-align:right;direction:rtl">  دعنا نقتصر الرؤية على كتلة الإعلان ؛ </li><li style=";text-align:right;direction:rtl">  لا يمكن إعادة تعريف المتغيرات التي تم الإعلان عنها عبر let. </li></ul><br>  وظائف السهم هي اختصار للوظائف المعتادة: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//1.   const func1 = function() { return 'test'; } //    const func1 = () =&gt; 'test'; //2.   const func2 = function(arg) { if (arg &gt; 0) return 'plus'; else return 'minus'; } //    const func2 = arg =&gt; { if (arg &gt; 0) return 'plus'; else return 'minus'; } //3.   const func3 = function(arg1, arg2){ if (arg1 &gt; arg2) return arg1; else return arg2; } //    const func3 = (arg1, arg2) =&gt; { if (arg1 &gt; arg2) return arg1; else return arg2; }</span></span></code> </pre><br></div></div><br>  الآن وقد فهمنا كيفية استخدام واجهة برمجة تطبيقات Custom Template ، يمكننا كتابة رمز تشغيل العلامة باستخدام بناء جملة JavaScript ES6. <br><br>  تحتوي التعليمات البرمجية الخاصة بي على طرق لإطلاق بكسل ، وتثبيت VK openapi.js ، واستعادة بيانات المنتج من dataLayer (مع تكوين موقع التجارة الإلكترونية المتقدمة من Google) ، ومعالجة هذه البيانات لإحضارها في النموذج الضروري لإرسالها إلى بكسلات إعادة تكوين VKontakte ، وطريقة إرسال الحدث. <br><br>  تدعم طريقة المشغل pixel ثلاثة سيناريوهات: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  يتم تشغيل البكسل على صفحة حيث openapi.js مفقودة. </li><li style=";text-align:right;direction:rtl">  يتم تشغيل البكسل على الصفحة حيث يوجد openapi.js ، لكنه لم يتم تحميله بعد. </li><li style=";text-align:right;direction:rtl">  يتم إطلاق البكسل على الصفحة مع تحميل openapi.js. </li></ol><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">الشفرة الكاملة لقالب GTM المخصص لـ VKontakte بكسل لإعادة الاستهداف الديناميكي</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//api const copyFromWindow = require('copyFromWindow'); const setInWindow = require('setInWindow'); const injectScript = require('injectScript'); const callInWindow = require('callInWindow'); const makeTableMap = require('makeTableMap'); const getUrl = require('getUrl'); const getQueryParameters = require('getQueryParameters'); const makeInteger = require('makeInteger'); const makeString = require('makeString'); const callLater = require('callLater'); //    const settings = { event: data.event, pixelIDs: data.pixelIDs, priceListId: data.priceListId, fewPriceLists: data.fewPriceLists, priceListIds: data.priceListIds === undefined ? data.priceListIds : makeTableMap(data.priceListIds,'hostname','priceListId'), ecommerceUse: data.ecommerceUse, eventEcommerce: data.eventEcommerce, siteSearchQueryParam: data.siteSearchQueryParam }; //       const pixel = { //    getPageHostname: () =&gt; getUrl('host'), //    VK getVK: () =&gt; copyFromWindow('VK'), //    VK setVkAsyncInit: () =&gt; { setInWindow('vkAsyncInit', pixel.sendEvent); }, //       getSiteSearchPhrase: () =&gt; { if (settings.event === 'view_search') return getQueryParameters(settings.siteSearchQueryParam); else return undefined; }, //      getEventParams: (products, currencyCode, revenue) =&gt; { let eventParamsClean= {}; let eventParams = { products: eventProducts.getProductParams(products), category_ids: eventProducts.getCategoryString(products), currency_code: currencyCode, total_price: eventProducts.getTotalPrice(products, revenue), search_string: pixel.getSiteSearchPhrase() }; if (eventParams.products !== undefined) eventParamsClean.products = eventParams.products; if (eventParams.category_ids !== undefined) eventParamsClean.category_ids = eventParams.category_ids; if (eventParams.currency_code !== undefined) eventParamsClean.currency_code = eventParams.currency_code; if (eventParams.total_price !== undefined) eventParamsClean.total_price = eventParams.total_price; if (eventParams.search_string !== undefined) eventParamsClean.search_string = eventParams.search_string; return eventParamsClean; }, //  - getPriceListId: hostname =&gt; { if (settings.fewPriceLists) return settings.priceListIds[hostname]; else return settings.priceListId; }, //  openapi.js openapiInit: () =&gt; { injectScript('https://vk.com/js/api/openapi.js?159', pixel.setVkAsyncInit(), data.gtmOnFailure, 'vkPixel'); setInWindow('openapiInject', 1); }, //   sendEvent: () =&gt; { if (settings.event === 'hit') { settings.pixelIDs.split(',').forEach(p =&gt; { callInWindow('VK.Retargeting.Init',p); callInWindow('VK.Retargeting.Hit'); }); } else { const pricelist = pixel.getPriceListId(pixel.getPageHostname()); const name = settings.event; let products = []; if(settings.ecommerceUse) products = name === 'view_home' || name === 'view_category' || name === 'view_search' || name === 'view_other' ? settings.eventEcommerce : settings.eventEcommerce.products; else products = undefined; const currencyCode = settings.ecommerceUse ? settings.eventEcommerce.currencyCode : undefined; const revenue = (settings.ecommerceUse &amp;&amp; name === 'purchase') ? settings.eventEcommerce.actionField.revenue : undefined; const eventParams = settings.ecommerceUse ? pixel.getEventParams(products, currencyCode, revenue) : undefined; settings.pixelIDs.split(',').forEach(p =&gt; { callInWindow('VK.Retargeting.Init',p); callInWindow('VK.Retargeting.ProductEvent', pricelist, name, eventParams); }); }, //   start: () =&gt; { if (pixel.getVK() === undefined &amp;&amp; copyFromWindow('openapiInject') !== 1) { pixel.openapiInit(); data.gtmOnSuccess(); } else if (pixel.getVK() === undefined &amp;&amp; copyFromWindow('openapiInject') === 1) { if (pixel.count &lt; 50) { callLater(pixel.start); pixel.count++; } else return; } else { pixel.sendEvent(); data.gtmOnSuccess(); }, //   count: 0 }; //       const eventProducts = { //    products   getProductParams: products =&gt; { let arr = []; products.forEach(i =&gt; { let productParamsClean = {}; let productParams = { id: makeString(i.id), group_id: makeString(i.brand), price: makeInteger(i.price * 100) / 100 }; if (productParams.id !== 'undefined') productParamsClean.id = productParams.id; if (productParams.group_id !== 'undefined') productParamsClean.group_id = productParams.group_id; if (productParams.price !== 0) productParamsClean.price = productParams.price; arr.push(productParamsClean); }); return arr; }, //       'a,b,c'       getCategoryString: products =&gt; { let categoryId = ''; let check = []; products.forEach(i =&gt; { if(check.indexOf(i.category) === -1) { check.push(i.category); categoryId += ',' + i.category; }); return categoryId.slice(1); }, //     getTotalPrice: (products, revenue) =&gt; { let sumPrice = 0; if (revenue !== undefined ) return makeInteger(revenue * 100) / 100; else { products.forEach(i =&gt; { if (i.hasOwnProperty('quantity')) sumPrice += (makeInteger(i.price * 100) / 100) * makeInteger(i.quantity); else sumPrice += makeInteger(i.price * 100) / 100; }); return sumPrice; }; //  pixel.start();</span></span></code> </pre> <br></div></div><br><a name="6"></a><h2 style=";text-align:right;direction:rtl">  علامة تبويب الأذونات </h2><br>  بعد كتابة رمز العلامة ، تظل المرحلة النهائية - لإصدار أذونات للتفاعل مع البيانات العامة للصفحة.  يتم ذلك فقط في علامة التبويب أذونات. <br><br>  نظرًا لأنه يتم تنفيذ التعليمات البرمجية في بيئة معزولة ، ويتم التفاعل مع البيانات العامة من خلال واجهة برمجة التطبيقات ، ولكل طريقة API (عند الضرورة) ، نحتاج إلى تحديد الأذونات يدويًا لإجراءات معينة. <br><br>  يتم ذلك من أجل التعامل مع العمل مع بيانات الصفحة العالمية بأقصى قدر ممكن من التفكير ، وبالتالي تقليل فرص "وضع" الموقع في خطأ في رمز القالب الخاص بنا. <br><br>  بالنسبة لأساليب API المستخدمة في الكود ، يجب إصدار ثلاثة أنواع من الأذونات: <br><br><img src="https://habrastorage.org/webt/29/og/lw/29oglwyra6zkhac7_2lr4jpqq5a.png"><br><br>  <b>1. الوصول إلى المتغيرات العالمية</b> - قراءة وكتابة وتنفيذ إمكانية الوصول إلى المتغيرات العالمية المستخدمة في التعليمات البرمجية الخاصة بنا.  يجب إضافة المتغيرات يدويًا وتشير كل منها إلى ما نسمح به. <br><br><img src="https://habrastorage.org/webt/f3/qb/6b/f3qb6b9sj6rn1v4q55t_z9f362e.png"><br><br>  على سبيل المثال ، يمكن قراءة المتغير VK فقط ، ويمكن قراءة vkAsyncInit وإعادة تعريفه ، ويمكن تنفيذ طريقة VK.Retargeting.Hit فقط. <br><br>  <b>2. يقرأ URL</b> .  هنا يجب عليك تحديد أجزاء عنوان URL المسموح بتلقيها.  أسمح باستلام أي أجزاء من عنوان URL: <br><br><img src="https://habrastorage.org/webt/do/um/li/doumlixqd-rw2cppm4ordw1svae.png"><br><br>  ولكن إذا كنت ترغب في ذلك ، يمكنك تحديد أي: <br><br><img src="https://habrastorage.org/webt/sj/d3/ne/sjd3nefe52_foeat88kifeodi-w.png"><br><br>  <b>3. حقن البرامج النصية</b> .  من الضروري هنا تسجيل العناوين التي يمكنك من خلالها تنزيل البرامج النصية الخارجية.  في الكود ، يتم تحميل نص واحد فقط به VK openapi.js ، أقوم بتحديد عنوانه: <br><br><img src="https://habrastorage.org/webt/xt/oy/hd/xtoyhd-yprd2sn_eu41mbquh2s0.png"><br><br>  هذا كل شيء ، اكتمال إعداد القالب المخصص ، يمكنك حفظ القالب والمتابعة إلى الاختبار. <br><br><a name="7"></a><h2 style=";text-align:right;direction:rtl">  تخصيص واختبار العلامة على القالب المخصص المنشأ </h2><br>  على سبيل المثال ، سنقوم بإنشاء علامتي إعادة توجيه ديناميكية "VKontakte" باستخدام "القوالب المخصصة": pageview و addToCart. <br><br><a name="8"></a><h3 style=";text-align:right;direction:rtl">  مشاهدة صفحة </h3><br>  سنذهب إلى حاوية GTM اللازمة ، وننشئ علامة جديدة ، وحدد نوع العلامة VK Pixel في القسم Custom: <br><br><img src="https://habrastorage.org/webt/gd/s-/fi/gds-fi0tqxxcmfkkccsi8trowq4.png"><br><br>  املأ اسم العلامة ، وحدد الحدث المراد تتبعه ، وحدد Hit (هذا عرض صفحة قياسي) ، في الحقل "Pixel ID" ، يشير إلى معرف البكسلين اللذين سيتم إرسال البيانات إليهما ، واضبط مشغل All Pages: <br><br><img src="https://habrastorage.org/webt/vr/op/-0/vrop-0cjfqndkh35qnbtdsoxpc4.png"><br><br>  حفظ العلامة التي تم إنشاؤها. <br><br><a name="9"></a><h3 style=";text-align:right;direction:rtl">  AddToCart </h3><br>  سيكون إنشاء علامة لحدث ما بإضافة منتج إلى السلة أكثر تعقيدًا من علامة Hit. <br><br>  أولاً ، تحتاج إلى نقل البضائع التي تمت إضافتها إلى السلة.  كما كتبت أعلاه ، هذا ممكن مع Google التجارة الإلكترونية المتقدمة التي تم تكوينها على الموقع.  في هذه الحالة ، يتم أخذ بيانات المنتج من dataLayer. <br><br>  للقيام بذلك ، نحتاج إلى إنشاء متغير dataLayer في GTM ، والذي سيخزن كائن التجارة الإلكترونية لحدث addToCart.  تبدو الإعدادات المتغيرة كما يلي: <br><br><img src="https://habrastorage.org/webt/ko/r5/gu/kor5gumudjjzs9groemuo7nepco.png"><br><br>  ثانياً ، تحتاج إلى إنشاء مشغل من شأنه تنشيط العلامة عند حدوث حدث addToCart للتجارة الإلكترونية (يقوم المشغل بتنشيط العلامة عند الضغط في dataLayer عند حدوث الحدث addToCart): <br><br><img src="https://habrastorage.org/webt/og/xl/lt/ogxlltp_4_spurvq8fesqg3uy0m.png"><br><br>  بعد إنشاء متغير بكائن التجارة الإلكترونية ومشغل ، يمكنك البدء في إنشاء العلامة: <br><br><img src="https://habrastorage.org/webt/dp/qg/zq/dpqgzqb27rcdydnjeen5fftp6ba.png"><br><br>  بالترتيب: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  كحدث متعقب ، حدد Add To Cart. </li><li style=";text-align:right;direction:rtl">  نحن نملأ المعرف المفصول بفواصل وهو بكسلان يجب نقل البيانات إليه. </li><li style=";text-align:right;direction:rtl">  قم بتعيين مربع الاختيار "استخدام قوائم أسعار متعددة": بالنسبة لموسكو وسانت بطرسبرغ ، في مثالنا ، من الضروري استخدام قوائم أسعار مختلفة. </li><li style=";text-align:right;direction:rtl">  املأ الجدول بقوائم الأسعار. </li><li style=";text-align:right;direction:rtl">  قم بتعيين مربع الاختيار "استخدام التجارة الإلكترونية لنقل المنتجات والمعلمات". </li><li style=";text-align:right;direction:rtl">  في كائن التجارة الإلكترونية لهذا الحدث ، حدد المتغير الذي تم إنشاؤه مسبقًا. </li><li style=";text-align:right;direction:rtl">  قمنا بتعيين المشغل لهذا الحدث المراقبة ، في هذه الحالة - AddToCart. </li><li style=";text-align:right;direction:rtl">  حفظ. </li></ol><br><a name="10"></a><h3 style=";text-align:right;direction:rtl">  اختبار التعدين </h3><br>  للتحقق من العمل خارج بكسل إعادة التوجيه الديناميكي على VKontakte ، تحتاج إلى تنشيط وضع Preview في GTM ، والانتقال إلى موقعنا على شبكة الإنترنت ، وفتح قسم الشبكة في وحدة تحكم المتصفح وإدخال "rtrg" في حقل Filter: <br><img src="https://habrastorage.org/webt/ci/m9/z8/cim9z824mbc9dfvdz-4425fe02w.png"><br><br>  بعد ذلك ، نقوم بتحديث الصفحة ، ويجب أن يكون لدينا طلبان - حدث Hit الذي تم إرساله بالبكسل اثنين: <br><br><img src="https://habrastorage.org/webt/o0/5x/80/o05x80jeypiwcogusca_zgsnaju.png"><br><br>  الحالة 200 تعني أن الطلبات يتم إرسالها واستلامها بواسطة الخادم بنجاح. <br><br>  أيضًا في نافذة معاينة GTM ، نرى أن العلامة التي تم إنشاؤها تعمل بشكل صحيح لحدث عرض الصفحة. <br><br>  للتحقق من حدث Add To Cart ، أضف المنتج إلى العربة ، وفي وحدة التحكم لدينا طلبان آخران: <br><br><img src="https://habrastorage.org/webt/wt/jm/-k/wtjm-k50mmapqa1xtyva_yd3wcc.png"><br><br>  في نافذة معاينة GTM ، نرى أن العلامة الثانية عملت بنجاح.  تم سحب بيانات المنتج من dataLayer ومعالجتها بشكل صحيح ، كما تم استبدال قائمة الأسعار الصحيحة. <br><br>  بالنسبة للمضيف الثاني ، يتم أيضًا استبدال قائمة الأسعار بشكل صحيح: <br><br><img src="https://habrastorage.org/webt/n3/de/h3/n3deh30jep61h2kv9zefwruu8cy.png"><br><br>  يتم تكوين العلامات للأحداث الأخرى والتحقق بنفس الطريقة. <br><br><a name="11"></a><h2 style=";text-align:right;direction:rtl">  استنتاج </h2><br>  تقوم القوالب المخصصة بتغيير النموذج المألوف لاستخدام GTM.  الجميع معتادون على علامات HTML ومتغيرات JS ، ولكن يوجد الآن بديل رائع. <br><br>  يكفي إنشاء قالب مخصص عالي الجودة مرة واحدة ، ومن ثم يمكن لأي شخص مطلع على GTM استخدامه. <br><br>  بالنظر إلى القدرة على مشاركة القوالب التي تم إنشاؤها ، أعتقد أنها يجب أن تكتسب شعبية بين المستخدمين. <br><br>  يمكنك <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">تنزيل قالب</a> بكسل إعادة تكوين الديناميكي <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">المخصص في</a> فكونتاكتي ، والذي درسناه في هذه المقالة. <br><br>  لاستيراد قالب ، تحتاج إلى إنشاء قالب مخصص جديد وتحديد استيراد من القائمة: <br><br><img src="https://habrastorage.org/webt/mx/nn/jc/mxnnjc0419poxmshokabjcgeoye.png"><br><br>  <i>المواد التي أعدتها لي ل ppc.world</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar458788/">https://habr.com/ru/post/ar458788/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar458774/index.html">نظم إدارة قواعد البيانات الوظيفية</a></li>
<li><a href="../ar458778/index.html">محرك تقارير القمر الصناعي 6.5: ماذا ولماذا</a></li>
<li><a href="../ar458782/index.html">تكييف برامج ZX Spectrum مع TR-DOS بالوسائل الحديثة. الجزء 3</a></li>
<li><a href="../ar458784/index.html">بث المشاريع والمكتبات من Altium Designer إلى PADS Professional</a></li>
<li><a href="../ar458786/index.html">يحافظ حراس ألعاب الفيديو على ثقافة اللعبة خطوة بخطوة</a></li>
<li><a href="../ar458790/index.html">مقدمة إلى CatBoost. تقرير ياندكس</a></li>
<li><a href="../ar458792/index.html">الموظفون "المحترقون": هل هناك طريقة للخروج؟</a></li>
<li><a href="../ar458794/index.html">اجتماع المحللين في Redmadrobot 18 يوليو</a></li>
<li><a href="../ar458796/index.html">كيفية إعداد موقعك لأحمال العمل الثقيلة: 5 نصائح عملية وأدوات مفيدة</a></li>
<li><a href="../ar458798/index.html">المغذيات بوت أو كيف أريد أن آخذ الخبز من مدربي اللياقة البدنية</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>