<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñáÔ∏è ‚úäüèæ üë©üèæ Verwendung der Funktion connect () von react-redux üë®üèª‚Äçüéì üåã üêπ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In dem Artikel, den wir heute √ºbersetzen, wird erl√§utert, wie Containerkomponenten in React-Anwendungen erstellt werden, die sich auf den Status von R...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Verwendung der Funktion connect () von react-redux</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/423157/">  In dem Artikel, den wir heute √ºbersetzen, wird erl√§utert, wie Containerkomponenten in React-Anwendungen erstellt werden, die sich auf den Status von Redux beziehen.  Dieses Material basiert auf der Beschreibung des Zustandsverwaltungsmechanismus in React unter Verwendung des React <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">-Redux-Pakets</a> .  Es wird davon ausgegangen, dass Sie bereits ein grundlegendes Verst√§ndnis der Architektur und API der Bibliotheken haben, √ºber die wir sprechen werden.  Ist dies nicht der Fall, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">lesen Sie die</a> Dokumentation zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">React</a> and <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Redux</a> . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/35f/0eb/fea/35f0ebfea2178696cb95ede9f78407c9.jpg" alt="Bild"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Informationen zur Statusverwaltung in JavaScript-Anwendungen</font> </h2><br>  React bietet dem Entwickler zwei Hauptmechanismen zum √úbertragen von Daten an Komponenten.  Dies sind Eigenschaften (Requisiten) und Zustand.  Eigenschaften sind schreibgesch√ºtzt und erm√∂glichen es √ºbergeordneten Komponenten, Attribute an untergeordnete Komponenten zu √ºbergeben.  Ein Status ist eine lokale Entit√§t, die in einer Komponente gekapselt ist und sich jederzeit im Lebenszyklus der Komponente √§ndern kann. <br><br>  Da state ein √§u√üerst n√ºtzlicher Mechanismus zum Erstellen leistungsf√§higer dynamischer React-Anwendungen ist, muss es ordnungsgem√§√ü verwaltet werden.  Derzeit gibt es mehrere Bibliotheken, die eine gut strukturierte Architektur f√ºr die Verwaltung des Anwendungszustands bereitstellen.  Unter ihnen sind <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Flux</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Redux</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MobX</a> . <br><br>  Redux ist eine Bibliothek zum Erstellen von Containern zum Speichern des Anwendungsstatus.  Es bietet dem Entwickler verst√§ndliche Tools zur Statusverwaltung, die sich vorhersehbar verhalten.  Diese Bibliothek eignet sich f√ºr Anwendungen, die in reinem JavaScript geschrieben sind, sowie f√ºr Projekte, bei deren Entwicklung einige Frameworks verwendet wurden.  Redux ist klein, aber Sie k√∂nnen zuverl√§ssige Anwendungen schreiben, die in verschiedenen Umgebungen funktionieren. <br><br>  So erstellen Sie Redux-Repositorys: <br><br><pre><code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createStore } from <span class="hljs-string"><span class="hljs-string">'redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = {    auth: { loggedIn: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = createStore((state = initialState, action) =&gt; {    switch (action.type) {        case <span class="hljs-string"><span class="hljs-string">"LOG_IN"</span></span>:            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, auth: { loggedIn: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } };            <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;        case <span class="hljs-string"><span class="hljs-string">"LOG_OUT"</span></span>:            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, auth: { loggedIn: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } };            <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;        <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>:            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state;            <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;    }    })</code> </pre> <br><h2>  <font color="#3AC1EF">React-Redux-Paket</font> </h2><br>  Das React-Redux-Paket enth√§lt React-Bindungen f√ºr den Redux-Statuscontainer, sodass die React-Anwendung extrem einfach mit dem Redux-Repository verbunden werden kann.  Auf diese Weise k√∂nnen Sie die Komponenten einer React-Anwendung anhand ihrer Beziehung zum Repository trennen.  Wir sprechen n√§mlich √ºber die folgenden Arten von Komponenten: <br><br><ol><li>  Pr√§sentationskomponenten.  Sie sind nur f√ºr das Erscheinungsbild der Anwendung verantwortlich und kennen den Status von Redux nicht.  Sie empfangen Daten √ºber Eigenschaften und k√∂nnen R√ºckrufe aufrufen, die auch √ºber Eigenschaften an sie weitergeleitet werden. </li><li>  Containerkomponenten.  Sie sind f√ºr den Betrieb der internen Mechanismen der Anwendung verantwortlich und interagieren mit dem Status von Redux.  Sie werden h√§ufig mit React-Redux erstellt und k√∂nnen Redux-Aktionen ausl√∂sen.  Dar√ºber hinaus abonnieren sie Status√§nderungen. </li></ol><br>  Details zu diesem Ansatz zur Aufteilung der Verantwortung von Bauteilen finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> .  In diesem Artikel werden wir haupts√§chlich √ºber Containerkomponenten sprechen, die mithilfe von React-Redux mit dem Redux-Status verbunden sind. <br><br>  Das React-Redux-Paket verf√ºgt √ºber eine sehr einfache Oberfl√§che.  Das Interessanteste an dieser Schnittstelle ist insbesondere Folgendes: <br><br><ol><li>  <code>&lt;Provider store&gt;</code> - Mit dieser Option k√∂nnen Sie einen Wrapper f√ºr eine React-Anwendung erstellen und den Redux-Status f√ºr alle Containerkomponenten in ihrer Hierarchie verf√ºgbar machen. </li><li>  <code>connect([mapStateToProps], [mapDispatchToProps], [mergeProps], [options])</code> - Erm√∂glicht das Erstellen von Komponenten h√∂herer Ordnung.  Dies ist erforderlich, um Containerkomponenten basierend auf den grundlegenden React-Komponenten zu erstellen. </li></ol><br>  Installieren Sie react-redux, um dieses Paket wie folgt im Projekt zu verwenden: <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> react-redux <span class="hljs-comment"><span class="hljs-comment">--save</span></span></code> </pre> <br>  Basierend auf der Annahme, dass Sie das Redux-Repository bereits f√ºr Ihre React-Anwendung konfiguriert haben, finden Sie hier ein Beispiel f√ºr die Verbindung der Anwendung mit dem Redux-Repository: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Provider } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> createStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./createReduxStore'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = createStore(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rootElement = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'root'</span></span>); ReactDOM.render(( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Provider</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">store</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{store}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">AppRootComponent</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Provider</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ), rootElement);</code> </pre> <br>  Jetzt k√∂nnen Sie Containerkomponenten erstellen, die mit dem Redux-Repository verbunden sind.  Dies erfolgt innerhalb der Hierarchie der <code>AppRootComponent</code> mithilfe der <code>connect()</code> API. <br><br><h2>  <font color="#3AC1EF">Wann soll connect () verwendet werden?</font> </h2><br><h3>  <font color="#3AC1EF">‚ñçContainerkomponenten erstellen</font> </h3><br>  Wie bereits erw√§hnt, werden mit der API react-redux <code>connect()</code> Containerkomponenten erstellt, die mit dem Redux-Repository verbunden sind.  Der Speicher, zu dem Sie eine Verbindung herstellen, wird vom obersten Vorfahren der Komponente mithilfe des Kontextmechanismus "Reagieren" abgerufen.  Die Funktion <code>connect()</code> wird nicht ben√∂tigt, wenn Sie nur Pr√§sentationskomponenten erstellen. <br><br>  Wenn Sie in der React-Komponente Daten aus dem Speicher empfangen m√ºssen oder Aktionen ausl√∂sen m√ºssen oder beides ausf√ºhren m√ºssen, k√∂nnen Sie eine regul√§re Komponente in eine Containerkomponente konvertieren, indem Sie sie in eine Komponente h√∂herer Ordnung einschlie√üen, die von <code>connect()</code> von zur√ºckgegeben wird React-Redux.  So sieht es aus: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Profile <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./components/Profile'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> ProfileContainer(props) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   props.loggedIn     ? &lt;Profile profile={props.profile} /&gt;     : &lt;div&gt;Please <span class="hljs-keyword"><span class="hljs-keyword">login</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> profile.&lt;/div&gt; ) } const mapStateToProps = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(state) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {   profile: state.<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>.profile,   loggedIn: state.auth.loggedIn } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>(mapStateToProps)(ProfileContainer);</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç Sie m√ºssen den Redux-Speicher nicht mehr manuell abonnieren</font> </h3><br>  Sie k√∂nnen die Containerkomponente selbst erstellen und die Komponente im Redux-Repository manuell mit dem Befehl <code>store.subscribe()</code> .  Die Verwendung der Funktion <code>connect()</code> bedeutet jedoch, einige Leistungsverbesserungen und -optimierungen anzuwenden, die Sie m√∂glicherweise nicht verwenden k√∂nnen, wenn Sie andere Mechanismen verwenden. <br><br>  Im folgenden Beispiel versuchen wir, eine Containerkomponente manuell zu erstellen und sie durch Abonnieren mit dem Redux-Repository zu verbinden.  Hier bem√ºhen wir uns, die gleiche Funktionalit√§t wie im vorherigen Beispiel zu implementieren. <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component } from <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> store from <span class="hljs-string"><span class="hljs-string">'./reduxStore'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Profile from <span class="hljs-string"><span class="hljs-string">'./components/Profile'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProfileContainer</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getCurrentStateFromStore() getCurrentStateFromStore() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {     profile: store.getState().user.profile,     loggedIn: store.getState().auth.loggedIn   } } updateStateFromStore = () =&gt; {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> currentState = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getCurrentStateFromStore();     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state !== currentState) {     <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState(currentState);   } } componentDidMount() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.unsubscribeStore = store.subscribe(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.updateStateFromStore); } componentWillUnmount() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.unsubscribeStore(); } render() {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { loggedIn, profile } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state;     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     loggedIn       ? &lt;Profile profile={profile} /&gt;       : &lt;div&gt;Please login to view profile.&lt;/div&gt;   ) } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> ProfileContainer;</code> </pre> <br>  Die Funktion <code>connect()</code> bietet dem Entwickler au√üerdem zus√§tzliche Flexibilit√§t, sodass Sie Containerkomponenten so konfigurieren k√∂nnen, dass sie dynamische Eigenschaften basierend auf den Eigenschaften erhalten, die urspr√ºnglich an sie √ºbergeben wurden.  Dies erweist sich als sehr n√ºtzlich, um eine Auswahl aus einem Zustand basierend auf Eigenschaften zu erhalten oder um Aktionsgeneratoren mit einer bestimmten Variablen aus Eigenschaften zu verkn√ºpfen. <br><br>  Wenn Ihre React-Anwendung mehrere Redux-Repositorys verwendet, k√∂nnen Sie mit <code>connect()</code> auf einfache Weise das spezifische Repository angeben, mit dem die Containerkomponente verbunden werden soll. <br><br><h2>  <font color="#3AC1EF">Anatomie verbinden ()</font> </h2><br>  Die vom React-Redux-Paket bereitgestellte Funktion <code>connect()</code> kann bis zu vier Argumente annehmen, von denen jedes optional ist.  Nach dem Aufruf der Funktion <code>connect()</code> wird eine Komponente h√∂herer Ordnung zur√ºckgegeben, mit der jede React-Komponente umbrochen werden kann. <br><br>  Da die Funktion eine Komponente h√∂herer Ordnung zur√ºckgibt, muss sie erneut aufgerufen werden, wobei die grundlegende React-Komponente √ºbergeben wird, um sie in eine Containerkomponente zu konvertieren: <br><br><pre> <code class="hljs lisp">const ContainerComponent = connect()(<span class="hljs-name"><span class="hljs-name">BaseComponent</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br>  Hier ist die Signatur der Funktion <code>connect()</code> : <br><br><pre> <code class="hljs powershell">connect([<span class="hljs-type"><span class="hljs-type">mapStateToProps</span></span>], [<span class="hljs-type"><span class="hljs-type">mapDispatchToProps</span></span>], [<span class="hljs-type"><span class="hljs-type">mergeProps</span></span>], [<span class="hljs-type"><span class="hljs-type">options</span></span>])</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç mapStateToProps-Argument</font> </h3><br>  Das Argument <code>mapStateToProps</code> ist eine Funktion, die entweder ein regul√§res Objekt oder eine andere Funktion zur√ºckgibt.  Wenn Sie dieses <code>connect()</code> -Argument √ºbergeben, wird die Containerkomponente f√ºr Redux-Repository-Updates abonniert.  Dies bedeutet, dass die Funktion <code>mapStateToProps</code> jedes Mal <code>mapStateToProps</code> wird, wenn sich der Status des Repositorys √§ndert.  Wenn Sie nicht an der √úberwachung von Statusaktualisierungen interessiert sind, √ºbergeben Sie <code>connect()</code> als Wert dieses Arguments an <code>undefined</code> oder <code>null</code> . <br><br>  Die Funktion <code>mapStateToProps</code> mit zwei Parametern deklariert, von denen der zweite optional ist.  Der erste Parameter ist der aktuelle Status des Redux-Repositorys.  Der zweite Parameter ist, falls √ºbergeben, ein Objekt der Eigenschaften, die an die Komponente √ºbergeben werden: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {   <span class="hljs-attr"><span class="hljs-attr">profile</span></span>: state.user.profile,   <span class="hljs-attr"><span class="hljs-attr">loggedIn</span></span>: state.auth.loggedIn } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> connect(mapStateToProps)(ProfileComponent);</code> </pre> <br>  Wenn ein regul√§res Objekt von <code>mapStateToProps</code> , wird das zur√ºckgegebene <code>stateProps</code> Objekt mit den Eigenschaften der Komponente kombiniert.  Sie k√∂nnen in der Komponente wie folgt auf diese Eigenschaften zugreifen: <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProfileComponent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   props.loggedIn     ? <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Profile</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">profile</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{props.profile}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">     : </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Please login to view profile.</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ) }</span></span></code> </pre> <br>  Wenn <code>mapStateToProps</code> eine Funktion zur√ºckgibt, wird diese Funktion als <code>mapStateToProps</code> f√ºr jede Instanz der Komponente verwendet.  Dies kann n√ºtzlich sein, um die Renderleistung zu verbessern und sich Notizen zu machen. <br><br><h3>  <font color="#3AC1EF">‚ñç mapDispatchToProps-Argument</font> </h3><br>  Das Argument <code>mapDispatchToProps</code> kann entweder ein Objekt oder eine Funktion sein, die entweder ein regul√§res Objekt oder eine andere Funktion zur√ºckgibt.  Um <code>mapDispatchToProps</code> besser zu veranschaulichen, ben√∂tigen wir Aktionsgeneratoren.  Angenommen, wir haben die folgenden Generatoren: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> writeComment = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">comment</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ comment, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'WRITE_COMMENT'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> updateComment = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id, comment</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ id, comment, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'UPDATE_COMMENT'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> deleteComment = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ id, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'DELETE_COMMENT'</span></span> });</code> </pre> <br>  Betrachten Sie nun die verschiedenen Verwendungszwecke von <code>mapDispatchToProps</code> . <br><br><h4>  Standardm√§√üige Standardimplementierung </h4><br>  Wenn Sie keine eigene <code>mapDispatchToProps</code> Implementierung verwenden, die durch ein Objekt oder eine Funktion dargestellt wird, wird eine Standardimplementierung verwendet, die die <code>dispatch()</code> Repository-Methode als Eigenschaft f√ºr die Komponente implementiert.  Sie k√∂nnen diese Eigenschaft in einer Komponente wie der folgenden verwenden: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { updateComment, deleteComment } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>(props) { const { id, content } = props.<span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>; //    props.dispatch() const editComment = () =&gt; props.dispatch(updateComment(id, content)); const removeComment = () =&gt; props.dispatch(deleteComment(id)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;div&gt;     &lt;p&gt;{ content }&lt;/p&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={editComment}&gt;Edit <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={removeComment}&gt;Remove <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;   &lt;/div&gt; ) } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>()(<span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>);</code> </pre> <br><h4>  Objekt√ºbertragung </h4><br>  Wenn ein Objekt als Argument f√ºr <code>mapDispatchToProps</code> , wird jede Funktion im Objekt als Redux-Aktionsgenerator verwendet und in einen <code>dispatch()</code> Repository-Methodenaufruf eingeschlossen, mit dem es direkt aufgerufen werden kann.  Das resultierende Objekt mit Aktionsgeneratoren, <code>dispatchProps</code> , wird mit den Eigenschaften der Komponente kombiniert. <br><br>  Das folgende Beispiel zeigt ein Beispiel f√ºr die Erstellung des <code>mapDispatchToProps</code> Arguments, bei dem es sich um ein Objekt mit Aktionsgeneratoren handelt, sowie f√ºr die Verwendung von Generatoren als Eigenschaften der React-Komponente: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { updateComment, deleteComment } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>(props) { const { id, content } = props.<span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>; // ,   ,   const editComment = () =&gt; props.updatePostComment(id, content); const removeComment = () =&gt; props.deletePostComment(id); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;div&gt;     &lt;p&gt;{ content }&lt;/p&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={editComment}&gt;Edit <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={removeComment}&gt;Remove <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;   &lt;/div&gt; ) } //     const mapDispatchToProps = { updatePostComment: updateComment, deletePostComment: deleteComment } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, mapDispatchToProps)(<span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>);</code> </pre> <br><h4>  Funktions√ºbertragung </h4><br>  Wenn Sie die Funktion <code>mapDispatchToProps</code> als Argument verwenden <code>mapDispatchToProps</code> muss der Programmierer darauf achten, dass das <code>dispatchProps</code> Objekt zur√ºckgegeben wird, das die Aktionsgeneratoren mithilfe der <code>dispatch()</code> -Speichermethode bindet.  Diese Funktion akzeptiert als ersten Parameter die <code>dispatch()</code> Repository-Methode.  Wie bei <code>mapStateToProps</code> kann die Funktion auch den optionalen zweiten Parameter <code>ownProps</code> , der die Zuordnung mit den urspr√ºnglichen Eigenschaften beschreibt, die an die Komponente √ºbergeben werden. <br><br>  Wenn diese Funktion eine andere Funktion zur√ºckgibt, wird die zur√ºckgegebene Funktion als <code>mapDispatchToProps</code> verwendet. <code>mapDispatchToProps</code> kann hilfreich sein, um die Renderleistung und das <code>mapDispatchToProps</code> zu verbessern. <br><br>  Die <code>bindActionCreators()</code> von Redux kann innerhalb dieser Funktion verwendet werden, um Aktionsgeneratoren an die Repository-Methode <code>dispatch()</code> zu binden. <br><br>  Das folgende Beispiel zeigt die Verwendung einer Funktion in der Rolle von <code>mapDispatchToProps</code> .  Es zeigt auch die Arbeit mit der Hilfsfunktion <code>bindActionCreators()</code> , mit der <code>props.actions</code> werden, um mit Kommentaren zu den <code>props.actions</code> der React-Komponente zu arbeiten: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { bindActionCreators } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> commentActions <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>(props) { const { id, content } = props.<span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>; const { updateComment, deleteComment } = props.actions; //    props.actions const editComment = () =&gt; updateComment(id, content); const removeComment = () =&gt; deleteComment(id); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;div&gt;     &lt;p&gt;{ content }&lt;/p&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={editComment}&gt;Edit <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={removeComment}&gt;Remove <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;   &lt;/div&gt; ) } const mapDispatchToProps = (dispatch) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {   actions: bindActionCreators(commentActions, dispatch) } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, mapDispatchToProps)(<span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>);</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçArgument mergeProps</font> </h3><br>  Wenn das Argument <code>mergeProps</code> an <code>connect()</code> wird, √ºbernimmt diese Funktion die folgenden drei Parameter: <br><br><ul><li>  <code>stateProps</code> ist das vom Aufruf <code>mapStateToProps()</code> Eigenschaftsobjekt. </li><li>  <code>dispatchProps</code> - Ein Eigenschaftsobjekt mit Aktionsgeneratoren aus <code>mapDispatchToProps()</code> . </li><li>  <code>ownProps</code> - Die urspr√ºnglichen Eigenschaften, die von der Komponente erhalten wurden. </li></ul><br>  Diese Funktion gibt ein einfaches Objekt mit Eigenschaften zur√ºck, die an die umschlossene Komponente √ºbergeben werden.  Dies ist n√ºtzlich, um einen Teil des Status eines Redux-Repositorys oder eigenschaftsbasierter Aktionsgeneratoren bedingt zuzuordnen. <br><br>  Wenn <code>connect()</code> diese Funktion nicht besteht, wird die Standardimplementierung verwendet: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mergeProps = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stateProps, dispatchProps, ownProps</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign({}, ownProps, stateProps, dispatchProps) }</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçArgument, das ein Objekt mit Parametern darstellt</font> </h3><br>  Ein optionales Objekt, das als viertes Argument an die Funktion <code>connect()</code> , enth√§lt Parameter, mit denen das Verhalten dieser Funktion ge√§ndert werden kann.  <code>connect()</code> ist also eine spezielle Implementierung der Funktion <code>connectAdvanced()</code> . Sie akzeptiert die meisten f√ºr <code>connectAdvanced()</code> verf√ºgbaren Parameter sowie einige zus√§tzliche Parameter. <br><br>  <a href="">Auf der</a> Dokumentationsseite finden Sie nach dem Lesen heraus, welche Parameter mit <code>connect()</code> k√∂nnen und wie sie das Verhalten dieser Funktion √§ndern. <br><br><h2>  <font color="#3AC1EF">Verwenden der Funktion connect ()</font> </h2><br><h3>  <font color="#3AC1EF">‚ñçSpeicher erstellen</font> </h3><br>  Bevor Sie eine regul√§re React-Komponente mit <code>connect()</code> in eine Containerkomponente konvertieren, m√ºssen Sie ein Redux-Repository erstellen, mit dem diese Komponente verbunden wird. <br><br>  Angenommen, wir haben eine Containerkomponente <code>NewComment</code> , mit der der Ver√∂ffentlichung neue Kommentare hinzugef√ºgt werden. Au√üerdem wird eine Schaltfl√§che zum Senden von Kommentaren angezeigt.  Der Code, der diese Komponente beschreibt, sieht m√∂glicherweise folgenderma√üen aus: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">React</span></span> from <span class="hljs-symbol"><span class="hljs-symbol">'reac</span></span>t'; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { connect } from <span class="hljs-symbol"><span class="hljs-symbol">'react</span></span>-redux'; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NewComment</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ input = <span class="hljs-literal"><span class="hljs-literal">null</span></span> writeComment = evt =&gt; {   evt.preventDefault();   const comment = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.input.value;     comment &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.dispatch({ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: <span class="hljs-symbol"><span class="hljs-symbol">'WRITE_COMMEN</span></span>T', comment }); } render() {   const { id, content } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.comment;     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;div&gt;       &lt;input <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"text"</span></span> ref={e =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.input = e} placeholder=<span class="hljs-string"><span class="hljs-string">"Write a comment"</span></span> /&gt;       &lt;button <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"button"</span></span> onClick={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.writeComment}&gt;<span class="hljs-type"><span class="hljs-type">Submit</span></span> <span class="hljs-type"><span class="hljs-type">Comment</span></span>&lt;/button&gt;     &lt;/div&gt;   ) } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> connect()(<span class="hljs-type"><span class="hljs-type">NewComment</span></span>);</code> </pre> <br>  Damit diese Komponente in der Anwendung verwendet werden kann, muss das Redux-Repository beschrieben werden, mit dem diese Komponente verbunden werden muss.  Andernfalls tritt ein Fehler auf.  Dies kann auf zwei Arten geschehen, die wir nun betrachten werden. <br><br><h4>  Festlegen der Store-Eigenschaft in einer Containerkomponente </h4><br>  Die erste M√∂glichkeit, eine Komponente mit einem Redux-Repository auszustatten, besteht darin, einen Link zu einem solchen Repository als Wert der <code>store</code> der Komponente zu √ºbergeben: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> store <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./reduxStore'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> NewComment <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./components/NewComment'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CommentsApp</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">NewComment</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">store</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{store}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> }</span></span></code> </pre> <br><h4>  Festlegen der Store-Eigenschaft in der &lt;Provider&gt; -Komponente </h4><br>  Wenn Sie das Redux-Repository f√ºr die Anwendung nur einmal festlegen m√∂chten, interessiert Sie die Methode, die wir jetzt betrachten werden.  Es ist normalerweise f√ºr Anwendungen geeignet, die nur ein Redux-Repository verwenden. <br><br>  Das React-Redux-Paket stellt dem Entwickler die <code>&lt;Provider&gt;</code> -Komponente zur Verf√ºgung, mit der die Stammkomponente der Anwendung umbrochen werden kann.  Es akzeptiert die <code>store</code> Eigenschaft.  Es wird davon ausgegangen, dass es sich um eine Verkn√ºpfung zum Redux-Repository handelt, das in der Anwendung verwendet werden soll.  Die <code>store</code> Eigenschaft wird gem√§√ü der Anwendungshierarchie mithilfe des React-Kontextmechanismus an die Containerkomponenten √ºbergeben: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> store <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./reduxStore'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Provider } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> NewComment <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./components/NewComment'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CommentsApp</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">NewComment</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> } ReactDOM.render(( </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Provider</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">store</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{store}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">CommentsApp</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Provider</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ), document.getElementById('root'))</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçOpenProps Access Organization</font> </h3><br>  Wie bereits erw√§hnt, k√∂nnen <code>mapStateToProps</code> an <code>connect()</code> <code>mapDispatchToProps</code> Funktionen <code>mapStateToProps</code> und <code>mapDispatchToProps</code> mit dem zweiten Parameter <code>ownProps</code> deklariert werden. <code>ownProps</code> sind die Eigenschaften der Komponente. <br>  Es gibt jedoch ein Problem.  Wenn die Anzahl der erforderlichen Parameter der deklarierten Funktion weniger als 2 <code>ownProps</code> werden <code>ownProps</code> nicht √ºbertragen.  Wenn jedoch eine Funktion ohne erforderliche Parameter oder mit mindestens 2 Parametern <code>ownProps</code> wird, werden <code>ownProps</code> √ºbergeben. <br><br>  Ber√ºcksichtigen Sie verschiedene Optionen f√ºr die Arbeit mit <code>ownProps</code> . <br><br><h4>  Funktionsdeklaration ohne Parameter </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-comment"><span class="hljs-comment">// state console.log(arguments[1]); // ownProps };</span></span></code> </pre> <br>  In dieser Situation wird <code>ownProps</code> √ºbergeben, da die Funktion ohne die erforderlichen Parameter deklariert wird.  Infolgedessen funktioniert der folgende Code, der mit der neuen Syntax f√ºr die verbleibenden ES6-Parameter geschrieben wurde: <br><br><pre> <code class="hljs actionscript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-rest_arg"><span class="hljs-function"><span class="hljs-params"><span class="hljs-rest_arg">...args</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ console.log(args[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-comment"><span class="hljs-comment">// state console.log(args[1]); // ownProps };</span></span></code> </pre> <br><h4>  Funktionsdeklaration mit einem Parameter </h4><br>  Betrachten Sie das folgende Beispiel: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(state); <span class="hljs-comment"><span class="hljs-comment">// state console.log(arguments[1]); // undefined };</span></span></code> </pre> <br>  Es gibt nur einen Parameter, <code>state</code> .  Infolgedessen nehmen <code>arguments[1]</code> den Wert <code>undefined</code> an, da <code>ownProps</code> nicht √ºbertragen wird. <br><br><h4>  Funktionsdeklaration mit Standardparameter </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, ownProps = {}</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(state); <span class="hljs-comment"><span class="hljs-comment">// state console.log(ownProps); // {} };</span></span></code> </pre> <br>  Es gibt nur einen erforderlichen Parameter, <code>state</code> , da der zweite Parameter, <code>ownProps</code> , optional ist, da er einen Standardwert hat.  Da nur ein Parameter erforderlich ist, wird <code>ownProps</code> nicht √ºbergeben, und die Zuordnung wird mit dem ihm zugewiesenen Standardwert durchgef√ºhrt, <code>ownProps</code> mit einem leeren Objekt. <br><br><h4>  Deklarieren einer Funktion mit zwei Parametern </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, ownProps</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(state); <span class="hljs-comment"><span class="hljs-comment">// state console.log(ownProps); // ownProps };</span></span></code> </pre> <br>  Alles ist sehr einfach angeordnet.  In einer solchen Situation wird n√§mlich die √úbertragung von <code>ownProps</code> aufgrund der Tatsache durchgef√ºhrt, dass die Funktion mit zwei erforderlichen Parametern deklariert wird. <br><br><h2>  <font color="#3AC1EF">Zusammenfassung</font> </h2><br>  Nachdem Sie dieses Material beherrscht haben, haben Sie gelernt, wann und wie Sie die <code>connect()</code> API verwenden, die vom React-Redux-Paket bereitgestellt wird und zum Erstellen von Containerkomponenten entwickelt wurde, die mit dem Redux-Status verbunden sind.  Hier haben wir ausf√ºhrlich √ºber die Struktur der Funktion <code>connect()</code> und deren Arbeitsweise gesprochen. Wenn Sie jedoch mehr √ºber diesen Mechanismus erfahren m√∂chten, insbesondere sich mit seinen Anwendungsf√§llen vertraut machen m√∂chten, lesen Sie <a href="">diesen</a> Abschnitt der React-Redux-Dokumentation. <br><br>  <b>Liebe Leser!</b>  Verwenden Sie React-Redux in Ihren Projekten? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de423157/">https://habr.com/ru/post/de423157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de423147/index.html">√úber die Speicherstrategie und das Speicherformat in der Hadoop-√Ñra</a></li>
<li><a href="../de423149/index.html">Direkter Vergleich der Methoden zur Korrektur von Laser-Myopie oder Ihrer Bezahlung bei der Auswahl von ReLEx SMILE</a></li>
<li><a href="../de423151/index.html">Globale Objekte in PHP</a></li>
<li><a href="../de423153/index.html">Node.js-Handbuch, Teil 2: JavaScript, V8, einige Entwicklungstricks</a></li>
<li><a href="../de423155/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 8: Netzwerksicherheitsmodell, Teil 2</a></li>
<li><a href="../de423159/index.html">Gl√ºcklicher Programmiertag! Liebe deine Entwickler</a></li>
<li><a href="../de423161/index.html">Unternehmen wollen personenbezogene Daten</a></li>
<li><a href="../de423163/index.html">CryptoPro mit Mono verbinden</a></li>
<li><a href="../de423165/index.html">Dynamische Netzzeichnung in Unreal Engine 4</a></li>
<li><a href="../de423167/index.html">Was Mark Zuckerberg √ºber Facebook-Themen spricht. Die Hauptsache aus dem Artikel von The New Yorker</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>