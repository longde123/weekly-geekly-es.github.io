<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯТо ЁЯжБ ЁЯЕ▒я╕П рд╕реА ++: рд╕рд╣рдЬ рдкреБрд░рд╛рддрддреНрд╡ рдХрд╛ рдПрдХ рд╕рддреНрд░ рдФрд░ рдЖрдкрдХреЛ рд╕реА рдХреА рд╢реИрд▓реА рдореЗрдВ рдЪрд░ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрдпреЛрдВ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП ЁЯШ┐ ЁЯдЬЁЯП╜ ЁЯФ╕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдпрд╣ рд╕рдм, рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣, рдПрдХ рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рд╣реБрдЖред рдпрд╣ рдкрд╣рд▓реА рдмрд╛рд░ рд╣реИ рдЬрдм рдореИрдВрдиреЗ рдЬрд╛рд╡рд╛ рдиреЗрдЯрд┐рд╡ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд┐рдпрд╛ рд╣реИ рдФрд░ рд╕реА ++ рднрд╛рдЧ рдореЗрдВ рдореИрдВрдиреЗ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рд▓рдкреЗрдЯрд╛...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд╕реА ++: рд╕рд╣рдЬ рдкреБрд░рд╛рддрддреНрд╡ рдХрд╛ рдПрдХ рд╕рддреНрд░ рдФрд░ рдЖрдкрдХреЛ рд╕реА рдХреА рд╢реИрд▓реА рдореЗрдВ рдЪрд░ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрдпреЛрдВ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430064/"> рдпрд╣ рд╕рдм, рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣, рдПрдХ рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рд╣реБрдЖред  рдпрд╣ рдкрд╣рд▓реА рдмрд╛рд░ рд╣реИ рдЬрдм рдореИрдВрдиреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЬрд╛рд╡рд╛ рдиреЗрдЯрд┐рд╡ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ</a> рд╕рд╛рде рдХрд╛рдо рдХрд┐рдпрд╛ рд╣реИ рдФрд░ рд╕реА ++ рднрд╛рдЧ рдореЗрдВ рдореИрдВрдиреЗ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рд▓рдкреЗрдЯрд╛ рд╣реИ рдЬреЛ рдЬрд╛рд╡рд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рддрд╛ рд╣реИред  рдпрд╣ рдлрд╝рдВрдХреНрд╢рди - <code>CallVoidMethod</code> - рдЪрд░ рд╣реИ, рдЕрд░реНрдерд╛рдд  <abbr title="рдЬрд╛рд╡рд╛ рдиреЗрдЯрд┐рд╡ рдЗрдВрдЯрд░рдлрд╝реЗрд╕">рдЬреЗрдПрдирдЖрдИ</abbr> рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдВрдХреЗрддрдХ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдмрдирд╛рдпрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдВрдХреЗрддрдХ, рдФрд░ рддрдерд╛рдХрдерд┐рдд рд╡рд┐рдзрд┐ (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдирд┐рд░реНрдорд╛рдгрдХрд░реНрддрд╛) рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛, рдпрд╣ рдЕрдиреНрдп рддрд░реНрдХреЛрдВ рдХреА рдПрдХ рдордирдорд╛рдиреА рд╕рдВрдЦреНрдпрд╛ рд▓реЗрддрд╛ рд╣реИред  рдЬреЛ рддрд╛рд░реНрдХрд┐рдХ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐  рдЗрди рдЕрдиреНрдп рддрд░реНрдХреЛрдВ рдХреЛ рдЬрд╛рд╡рд╛ рдХреА рдУрд░ рд╕реЗ рд╡рд┐рдзрд┐ рдХреЛ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рд╡рд┐рдзрд┐рдпрд╛рдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ, рдХрд┐рд╕реА рднреА рдкреНрд░рдХрд╛рд░ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рддрд░реНрдХреЛрдВ рдХреЗ рд╕рд╛рдеред <br><br>  рддрджрдиреБрд╕рд╛рд░, рдореИрдВрдиреЗ рдЕрдкрдирд╛ рд░реИрдкрд░ рд╡реЗрд░рд┐рдПрдмрд▓ рднреА рдмрдирд╛рдпрд╛ред  <code>CallVoidMethod</code> рд▓рд┐рдП рдПрдХ рдордирдорд╛рдиреА рд╕рдВрдЦреНрдпрд╛ рдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <code>CallVoidMethod</code> <code>va_list</code> рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рднрд┐рдиреНрди рд╣реИред  рд╣рд╛рдВ, рдпрд╣реА <code>va_list</code> рднреЗрдЬрд╛ рдЧрдпрд╛ рд╣реИред  рдФрд░ рдЬреЗрд╡реАрдПрдо рдмреИрдВрдХрд▓ рд╕реЗрдЧрдореЗрдВрдЯреЗрд╢рди рдлреЙрд▓реНрдЯ рдХреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛ред <br><br>  2 рдШрдВрдЯреЗ рдореЗрдВ рдореИрдВ 8 рд╡реАрдВ рд╕реЗ 11 рд╡реАрдВ рддрдХ рдЬреЗрд╡реАрдПрдо рдХреЗ рдХрдИ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рдиреЗ рдореЗрдВ рдХрд╛рдордпрд╛рдм рд░рд╣рд╛, рдХреНрдпреЛрдВрдХрд┐: рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" title="рдЬрд╛рд╡рд╛ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди">рдЬреЗрд╡реАрдПрдо рдХреЗ</a> рд╕рд╛рде рдпрд╣ рдореЗрд░рд╛ рдкрд╣рд▓рд╛ рдЕрдиреБрднрд╡ рд╣реИ, рдФрд░ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдореИрдВрдиреЗ рдЦреБрдж рд╕реЗ рдЬреНрдпрд╛рджрд╛ рд╕реНрдЯреИрдХрдСрд╡рд░рдлреНрд▓реЛ рдкрд░ рднрд░реЛрд╕рд╛ рдХрд┐рдпрд╛, рдФрд░ рджреВрд╕рд░реА рдмрд╛рдд, рдХрд┐рд╕реА рдиреЗ рддрдм StackOverflow рдкрд░ рдореИрдВрдиреЗ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ OpenJDK рдХрд╛ рдЙрдкрдпреЛрдЧ рди рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреА, рд▓реЗрдХрд┐рди OracleJDK, рдФрд░ 8 рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ 10. рдФрд░ рддрднреА рдореИрдВрдиреЗ рдЕрдВрдд рдореЗрдВ рджреЗрдЦрд╛ рдХрд┐ рдЪрд░ <code>CallVoidMethod</code> рдЕрд▓рд╛рд╡рд╛ <code>CallVoidMethodV</code> , рдЬреЛ <code>va_list</code> рдорд╛рдзреНрдпрдо рд╕реЗ рдордирдорд╛рдиреА рд╕рдВрдЦреНрдпрд╛ рд▓реЗрддрд╛ рд╣реИред <br><br>  рдореБрдЭреЗ рдЗрд╕ рдХрд╣рд╛рдиреА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬреЛ рдмрд╛рдд рд╕рдмрд╕реЗ рдЬреНрдпрд╛рджрд╛ рдкрд╕рдВрдж рдирд╣реАрдВ рдЖрдИ, рд╡рд╣ рдпрд╣ рдереА рдХрд┐ рдореИрдВрдиреЗ <code>va_list</code> (рджреАрд░реНрдШрд╡реГрддреНрдд) рдФрд░ <code>va_list</code> рдмреАрдЪ рдЕрдВрддрд░ рдХреЛ рддреБрд░рдВрдд рдирд╣реАрдВ рджреЗрдЦрд╛ рдерд╛ред  рдФрд░ рдзреНрдпрд╛рди рджреЗрдиреЗ рдкрд░, рдореИрдВ рдЦреБрдж рдХреЛ рдирд╣реАрдВ рд╕рдордЭрд╛ рд╕рдХрд╛ рдХрд┐ рдореВрд▓рднреВрдд рдЕрдВрддрд░ рдХреНрдпрд╛ рдерд╛ред  рддреЛ, рд╣рдореЗрдВ рджреАрд░реНрдШрд╡реГрддреНрдд рдХреЗ рд╕рд╛рде рдФрд░ <code>va_list</code> рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ (рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдЕрднреА рднреА C ++ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВ) рд╡реИрд░рд┐рдПрдмрд▓ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдХреЗ рд▓рд┐рдПред <br><a name="habracut"></a><br><h3>  рдорд╛рдирдХ рдореЗрдВ ellipsis рдФрд░ va_list рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛ рдХрд╣рд╛ рдЧрдпрд╛ рд╣реИ </h3><br>  C ++ рдорд╛рдирдХ рдХреЗрд╡рд▓ рдЕрдкрдиреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдФрд░ рдорд╛рдирдХ C. рдХреЗ рдмреАрдЪ рдХреЗ рдЕрдВрддрд░реЛрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИред рдорддрднреЗрджреЛрдВ рдкрд░ рд╕реНрд╡рдпрдВ рдмрд╛рдж рдореЗрдВ рдЪрд░реНрдЪрд╛ рдХреА рдЬрд╛рдПрдЧреА, рд▓реЗрдХрд┐рди рдЕрдм рдореИрдВ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдмрддрд╛рдКрдВрдЧрд╛ рдХрд┐ рдорд╛рдирдХ C рдХреНрдпрд╛ рдХрд╣рддрд╛ рд╣реИ (C89 рд╕реЗ рд╢реБрд░реВ)ред <br><br><ul><li>  рдЖрдк рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдХреА рдШреЛрд╖рдгрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдордирдорд╛рдиреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рддрд░реНрдХ рд▓реЗрддрд╛ рд╣реИред  рдпрд╛рдиреА  рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдорд╛рдкрджрдВрдбреЛрдВ рд╕реЗ рдЕрдзрд┐рдХ рддрд░реНрдХ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЗрд╕рдХреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреА рд╕реВрдЪреА рдПрдХ рджреАрд░реНрдШрд╡реГрддреНрдд рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдХрдо рд╕реЗ рдХрдо рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдкреИрд░рд╛рдореАрдЯрд░ <i>[C11 6.9.1 / 8]</i> рднреА рдореМрдЬреВрдж рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br><pre> <code class="plaintext hljs">void foo(int parm1, int parm2, ...);</code> </pre> </li><li>  рджреАрд░реНрдШрд╡реГрддреНрдд рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рддрд░реНрдХреЛрдВ рдФрд░ рд╕рдВрдЦреНрдпрд╛рдУрдВ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд╣реА рдирд╣реАрдВ рджреА рдЬрд╛рддреА рд╣реИред  рдпрд╛рдиреА  рдЕрдВрддрд┐рдо рдирд╛рдорд┐рдд рдкреИрд░рд╛рдореАрдЯрд░ (рдЙрдкрд░реЛрдХреНрдд рдЙрджрд╛рд╣рд░рдг рдореЗрдВ <code>parm2</code> ) рдХреЗ рдмрд╛рдж <i>[C11 6.7.6.3/9]</i> ред <br></li><li>  рдЗрди рддрд░реНрдХреЛрдВ рдХреЛ рдПрдХреНрд╕реЗрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ <code>&lt;stdarg.h&gt;</code> рд╣реЗрдбрд░ рдФрд░ 4 (C11 рдорд╛рдирдХ рд╕реЗ рдкрд╣рд▓реЗ 3) рдореИрдХреНрд░реЛрдЬрд╝: <code>va_start</code> , <code>va_arg</code> , <code>va_end</code> рдФрд░ <code>va_copy</code> (C11 рдХреЗ рд╕рд╛рде рд╢реБрд░реВ) <i>[C11 7.16]</i> рдореЗрдВ рдШреЛрд╖рд┐рдд <code>va_list</code> рдкреНрд░рдХрд╛рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><br><div class="spoiler">  <b class="spoiler_title">рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">int add(int count, ...) { int result = 0; va_list args; va_start(args, count); for (int i = 0; i &lt; count; ++i) { result += va_arg(args, int); } va_end(args); return result; }</code> </pre> <br>  рд╣рд╛рдВ, рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЗрд╕рдХреЗ рдХрд┐рддрдиреЗ рддрд░реНрдХ рд╣реИрдВред  рдЙрд╕реЗ рдХрд┐рд╕реА рддрд░рд╣ рдЗрд╕ рдирдВрдмрд░ рдХреЛ рдкрд╛рд╕ рдХрд░рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдПрдХ рдПрдХрд▓ рдирд╛рдорд┐рдд рддрд░реНрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ (рджреВрд╕рд░рд╛ рд╕рд╛рдорд╛рдиреНрдп рд╡рд┐рдХрд▓реНрдк рдЕрдВрддрд┐рдо рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ <code>NULL</code> рдХреЛ рдкрд╛рд╕ рдХрд░рдирд╛ <code>NULL</code> , рдЬреИрд╕рд╛ рдХрд┐ <code>execl</code> рдпрд╛ 0 рдореЗрдВ рд╣реИ)ред </div></div></li><li>  рдЕрдВрддрд┐рдо рдирд╛рдорд┐рдд рддрд░реНрдХ рдореЗрдВ <code>register</code> рд╕реНрдЯреЛрд░реЗрдЬ рдХреНрд▓рд╛рд╕ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╣ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдпрд╛ рдПрдХ рд╕рд░рдгреА рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдЕрдиреНрдпрдерд╛, рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ <i>[C11 7.16.1.4/4]</i> ред </li><li>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЕрдВрддрд┐рдо рдирд╛рдорд┐рдд рддрд░реНрдХ рдФрд░ рд╕рднреА рдирд╛рдорд╛рдВрдХрд┐рдд рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП, " <i>рдбрд┐рдлрд╝реЙрд▓реНрдЯ рддрд░реНрдХ рдкрджреЛрдиреНрдирддрд┐</i> " рд▓рд╛рдЧреВ рдХреА рдЬрд╛рддреА рд╣реИ ( <i>рдбрд┐рдлрд╝реЙрд▓реНрдЯ рддрд░реНрдХ рдкрджреЛрдиреНрдирддрд┐</i> ; рдпрджрд┐ рд░реВрд╕реА рдореЗрдВ рдЗрд╕ рдЕрд╡рдзрд╛рд░рдгрд╛ рдХрд╛ рдПрдХ рдЕрдЪреНрдЫрд╛ рдЕрдиреБрд╡рд╛рдж рд╣реИ, рддреЛ рдореИрдВ рдЦрд╝реБрд╢реА рд╕реЗ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ)ред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рдпрджрд┐ рддрд░реНрдХ рдореЗрдВ <code>char</code> , <code>short</code> (рд╕рд╛рде рдпрд╛ рдмрд┐рдирд╛ рдЪрд┐рд╣реНрди) рдпрд╛ <code>float</code> , рддреЛ рд╕рдВрдмрдВрдзрд┐рдд рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ <code>int</code> , <code>int</code> (рд╕рд╛рдЗрди рдХреЗ рд╕рд╛рде рдпрд╛ рдмрд┐рдирд╛) рдпрд╛ <code>double</code> рд░реВрдк рдореЗрдВ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЕрдиреНрдпрдерд╛, рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ <i>[C11 7.16.1.1/2]</i> ред </li><li>  <code>va_list</code> рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреЗрд╡рд▓ рдпрд╣ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдпрд╣ <code>&lt;stdarg.h&gt;</code> рдореЗрдВ рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдкреВрд░реНрдг рд╣реИ (рдЕрд░реНрдерд╛рдд, рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреА рдХрд┐рд╕реА рд╡рд╕реНрддреБ рдХрд╛ рдЖрдХрд╛рд░ рдЬреНрдЮрд╛рдд рд╣реИ) <i>[C11 7.16 / 3]</i> ред </li></ul><br><h3>  рдХреНрдпреЛрдВ?  рд▓реЗрдХрд┐рди рдХреНрдпреЛрдВрдХрд┐! </h3><br>  C рдореЗрдВ рдХрдИ рдкреНрд░рдХрд╛рд░ рдирд╣реАрдВ рд╣реИрдВред  <code>va_list</code> рдХреЛ рдорд╛рдирдХ рдореЗрдВ рдХреНрдпреЛрдВ рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХреА рдЖрдВрддрд░рд┐рдХ рд╕рдВрд░рдЪрдирд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рдирд╣реАрдВ рдХрд╣рд╛ рдЧрдпрд╛ рд╣реИред <br><br>  рдЕрдЧрд░ рдХрд┐рд╕реА рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдордирдорд╛рдиреА рд╕рдВрдЦреНрдпрд╛рдУрдВ рдХреЛ <code>va_list</code> рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рддреЛ рд╣рдореЗрдВ рдПрдХ рджреАрд░реНрдШрд╡реГрддреНрдд рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпреЛрдВ рд╣реИ?  рдЕрдм рдпрд╣ рдХрд╣рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: "рд╕рд┐рдВрдЯреИрдХреНрдЯрд┐рдХ рд╢реБрдЧрд░ рдХреЗ рд░реВрдк рдореЗрдВ", рд▓реЗрдХрд┐рди 40 рд╕рд╛рд▓ рдкрд╣рд▓реЗ, рдореБрдЭреЗ рдпрдХреАрди рд╣реИ, рдЪреАрдиреА рдХреЗ рд▓рд┐рдП рд╕рдордп рдирд╣реАрдВ рдерд╛ред <br><br>  рдлрд┐рд▓рд┐рдк рдЬреЗрдореНрд╕ рдкреНрд▓реЙрдЧрд░ <i>рдлрд┐рд▓рд┐рдк рдЬреЗрдореНрд╕ рдкреНрд▓реЗрдВрдЬрд░</i> рдкреБрд╕реНрддрдХ <i>рдж рд╕реНрдЯреИрдВрдбрд░реНрдб рд╕реА рд▓рд╛рдЗрдмреНрд░реЗрд░реА</i> - 1992 рдореЗрдВ - рдХрд╣рддреЗ рд╣реИрдВ рдХрд┐ рд╢реБрд░реБрдЖрдд рдореЗрдВ рд╕реА рдХреЛ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдкреАрдбреАрдкреА -11 рдХрдВрдкреНрдпреВрдЯрд░реЛрдВ рдХреЗ рд▓рд┐рдП рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдФрд░ рд╕рд░рд▓ рд╕реВрдЪрдХ рдЕрдВрдХрдЧрдгрд┐рдд рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рднреА рддрд░реНрдХреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЫрд╛рдВрдЯрдирд╛ рд╕рдВрднрд╡ рдерд╛ред  рд╕рдорд╕реНрдпрд╛ рд╕реА рдХреА рд▓реЛрдХрдкреНрд░рд┐рдпрддрд╛ рдФрд░ рд╕рдВрдХрд▓рдХ рдХреЗ рдЕрдиреНрдп рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреЗ рд╣рд╕реНрддрд╛рдВрддрд░рдг рдХреЗ рд╕рд╛рде рджрд┐рдЦрд╛рдИ рджреАред  <i>рдмреНрд░рд╛рдпрди рдХреЗрд░рдирд┐рдШрди</i> рдФрд░ рдбреЗрдирд┐рд╕ рд░рд┐рдЪреА <i>рджреНрд╡рд╛рд░рд╛ рдж рд╕реА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд▓реИрдВрдЧреНрд╡реЗрдЬ</i> рдХрд╛ рдкрд╣рд▓рд╛ рд╕рдВрд╕реНрдХрд░рдг - 1978 - рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдХрд╣рд╛ рдЧрдпрд╛ рд╣реИ: <blockquote>  рд╡реИрд╕реЗ, рдордирдорд╛рдиреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рддрд░реНрдХреЛрдВ рдХреЗ рдкреЛрд░реНрдЯреЗрдмрд▓ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд▓рд┐рдЦрдиреЗ рдХрд╛ рдХреЛрдИ рд╕реНрд╡реАрдХрд╛рд░реНрдп рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐  рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рдХрд╣рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдлрд╝рдВрдХреНрд╢рди рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЗрд╕рдХреЗ рдкрд╛рд╕ рдХрд┐рддрдиреЗ рддрд░реНрдХ рд╣реИрдВред  ... <code>printf</code> , рд╕рдмрд╕реЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реА рднрд╛рд╖рд╛ рдлрд╝рдВрдХреНрд╢рди рдПрдХ рдордирдорд╛рдиреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рддрд░реНрдХреЛрдВ рдХреА, ... рдкреЛрд░реНрдЯреЗрдмрд▓ рдирд╣реАрдВ рд╣реИ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд▓рд┐рдП рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </blockquote>  рдпрд╣ рдкреБрд╕реНрддрдХ <code>vprintf</code> рд╡рд░реНрдгрди рдХрд░рддреА рд╣реИ, рд▓реЗрдХрд┐рди рдЕрднреА рддрдХ рдЗрд╕рдХрд╛ рдХреЛрдИ <code>vprintf</code> рдирд╣реАрдВ рд╣реИ, рдФрд░ рдпрд╣ рдкреНрд░рдХрд╛рд░ рдФрд░ рдореИрдХреНрд░реЛрдЬрд╝ <code>va_*</code> рдЙрд▓реНрд▓реЗрдЦ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рд╡реЗ рд╕реА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд▓реИрдВрдЧреНрд╡реЗрдЬ (1988) рдХреЗ рджреВрд╕рд░реЗ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрддреЗ рд╣реИрдВ, рдФрд░ рдпрд╣ рдкрд╣рд▓реЗ рд╕реА рд╕реНрдЯреИрдВрдбрд░реНрдб (C89, рдЙрд░реНрдл тАЛтАЛANSI C) рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рд╕рдорд┐рддрд┐ рдХреА рдпреЛрдЧреНрдпрддрд╛ рд╣реИред  рд╕рдорд┐рддрд┐ рдиреЗ <code>&lt;stdarg.h&gt;</code> рдХреЛ рдорд╛рдирдХ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛, рдЬреЛ рдЖрдзрд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЗ рд░рд╣рд╛ рд╣реИ <code>&lt;varargs.h&gt;</code> , UNIX OS рдХреА рдкреЛрд░реНрдЯреЗрдмрд┐рд▓рд┐рдЯреА рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рдХреНрд╖реНрдп рдХреЗ рд╕рд╛рде рдПрдВрдбреНрд░рдпреВ рдХреЛрдПрдирд┐рдЧ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ред  <code>va_*</code> рдореИрдХреНрд░реЛрдЬрд╝ рдХреЛ рдореИрдХреНрд░реЛрдЬрд╝ рдХреЗ рд░реВрдк рдореЗрдВ рдЫреЛрдбрд╝рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ рддрд╛рдХрд┐ рдореМрдЬреВрджрд╛ рд╕рдВрдХрд▓рдХ рдХреЗ рд▓рд┐рдП рдирдП рдорд╛рдирдХ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реЛред <br><br>  рдЕрдм, C89 рдФрд░ <code>va_*</code> рдкрд░рд┐рд╡рд╛рд░ рдХреЗ рдЖрдЧрдорди рдХреЗ рд╕рд╛рде, рдкреЛрд░реНрдЯреЗрдмрд▓ рдЪрд░ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдмрдирд╛рдирд╛ рд╕рдВрднрд╡ рд╣реЛ рдЧрдпрд╛ рд╣реИред  рдФрд░ рдпрджреНрдпрдкрд┐ рдЗрд╕ рдкрд░рд┐рд╡рд╛рд░ рдХреА рдЖрдВрддрд░рд┐рдХ рд╕рдВрд░рдЪрдирд╛ рдЕрднреА рднреА рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ рд╡рд░реНрдгрд┐рдд рдирд╣реАрдВ рд╣реИ, рдФрд░ рдЗрд╕рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рдХреНрдпреЛрдВред <br><br>  рд╕рд░рд╛рд╕рд░ рдЬрд┐рдЬреНрдЮрд╛рд╕рд╛ рд╕реЗ, рдЖрдк <code>&lt;stdarg.h&gt;</code> рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рдЙрджрд╛рд╣рд░рдг рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╡рд╣реА "рд╕реА рд╕реНрдЯреИрдВрдбрд░реНрдб рд▓рд╛рдЗрдмреНрд░реЗрд░реА" <b>рдмреЛрд░рд▓реИрдВрдб рдЯрд░реНрдмреЛ рд╕реА ++ рдХреЗ</b> рд▓рд┐рдП рдПрдХ рдЙрджрд╛рд╣рд░рдг рдкреНрд░рджрд╛рди рдХрд░рддрд╛ <b>рд╣реИ</b> : <br><br><div class="spoiler">  <b class="spoiler_title">рдмреЛрд░рд▓реИрдВрдб рдЯрд░реНрдмреЛ рд╕реА ++ рд╕реЗ &lt;stdarg.h&gt;</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#ifndef _STADARG #define _STADARG #define _AUPBND 1 #define _ADNBND 1 typedef char* va_list #define va_arg(ap, T) \ (*(T*)(((ap) += _Bnd(T, _AUPBND)) - _Bnd(T, _ADNBND))) #define va_end(ap) \ (void)0 #define va_start(ap, A) \ (void)((ap) = (char*)&amp;(A) + _Bnd(A, _AUPBND)) #define _Bnd(X, bnd) \ (sizeof(X) + (bnd) &amp; ~(bnd)) #endif</code> </pre> <br></div></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">AMD64 рдХреЗ рд▓рд┐рдП</a> рдмрд╣реБрдд рдирдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">SystemV ABI va_list рдХреЗ рд▓рд┐рдП</a> рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ: <br><br><div class="spoiler">  <b class="spoiler_title">SystemV ABI AMD64 рдХрд╛ va_list</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">typedef struct { unsigned int gp_offset; unsigned int fp_offset; void *overflow_arg_area; void *reg_save_area; } va_list[1];</code> </pre> <br></div></div><br>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рд╣рдо рдХрд╣ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдкреНрд░рдХрд╛рд░ рдФрд░ рдореИрдХреНрд░реЛ <code>va_*</code> рдПрдХ рдЪрд░ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рддрд░реНрдХреЛрдВ рдХреЛ <code>va_*</code> рд▓рд┐рдП рдПрдХ рдорд╛рдирдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдРрддрд┐рд╣рд╛рд╕рд┐рдХ рдХрд╛рд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдирдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕рдВрдХрд▓рдХ, рд▓рдХреНрд╖реНрдп рдкреНрд▓реЗрдЯрдлрд╛рд░реНрдореЛрдВ рдФрд░ рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ рджреАрд░реНрдШрд╡реГрддреНрдд (рдпрд╛рдиреА, рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рдореЗрдВ рдЪрд░ рдХрд╛рд░реНрдп) рд╕реА рдореЗрдВ <code>va_list</code> (рдпрд╛рдиреА, рд╣реЗрдбрд░ <code>&lt;stdarg.h&gt;</code> ) рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдкрд╣рд▓реЗ рджрд┐рдЦрд╛рдИ рджрд┐рдпрд╛ред  рдФрд░ <code>va_list</code> рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП <code>va_list</code> рдирд╣реАрдВ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЛ рдЕрдкрдиреЗ рдкреЛрд░реНрдЯреЗрдмрд▓ рдЪрд░ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд▓рд┐рдЦрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдПред <br><br>  C ++ рдореЛрдЯреЗ рддреМрд░ рдкрд░ C рдХреЗ рд╕рд╛рде рдкрд┐рдЫрдбрд╝реА рд╕рдВрдЧрддрддрд╛ рдмрдирд╛рдП рд░рдЦрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЙрдкрд░реЛрдХреНрдд рд╕рднреА рдЙрд╕ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЗрд╕рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рднреА рд╣реИрдВред <br><br><h3>  C ++ рдореЗрдВ рдЪрд░ рдХрд╛рд░реНрдп </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">WG21</a> рд╡рд░реНрдХрд┐рдВрдЧ рдЧреНрд░реБрдк C ++ рд╕реНрдЯреИрдВрдбрд░реНрдб рдХреЗ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд░рд╣рд╛ рд╣реИред  1989 рдореЗрдВ, рдирд╡ рдирд┐рд░реНрдорд┐рдд C89 рдорд╛рдирдХ рдХреЛ рдПрдХ рдЖрдзрд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдЬреЛ рдзреАрд░реЗ-рдзреАрд░реЗ рд╕реА ++ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрджрд▓ рдЧрдпрд╛ред  1995 рдореЗрдВ, <i>рдЬреЙрди рдорд╛рдЗрдХрдХреЛ</i> рд╕реЗ рдкреНрд░рд╕реНрддрд╛рд╡ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">N0695 рдкреНрд░рд╛рдкреНрдд рд╣реБрдЖ</a> , рдЬрд┐рд╕рдореЗрдВ рд▓реЗрдЦрдХ рдиреЗ рдореИрдХреНрд░реЛрдЬрд╝ <code>va_*</code> рд▓рд┐рдП рдкреНрд░рддрд┐рдмрдВрдзреЛрдВ рдХреЛ рдмрджрд▓рдиреЗ рдХрд╛ рд╕реБрдЭрд╛рд╡ рджрд┐рдпрд╛: <br><br><ul><li>  рдХреНрдпреЛрдВрдХрд┐  C ++, C рдХреЗ рд╡рд┐рдкрд░реАрдд, рдЖрдкрдХреЛ рдЪрд░ рдХрд╛ <code>register</code> рдкрддрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдлрд┐рд░ рдХрд┐рд╕реА рдЪрд░ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдЕрдВрддрд┐рдо рдирд╛рдорд┐рдд рддрд░реНрдХ рдореЗрдВ рдпрд╣ рд╕рдВрдЧреНрд░рд╣рдг рд╡рд░реНрдЧ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред <br></li><li>  рдХреНрдпреЛрдВрдХрд┐  рд╕реА ++ рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрдиреЗ рд╡рд╛рд▓реЗ рд▓рд┐рдВрдХ рд╕реА рдЪрд░ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдЕрд▓рд┐рдЦрд┐рдд рдирд┐рдпрдо рдХрд╛ рдЙрд▓реНрд▓рдВрдШрди рдХрд░рддреЗ рд╣реИрдВ - рдкреИрд░рд╛рдореАрдЯрд░ рдХрд╛ рдЖрдХрд╛рд░ рдЗрд╕рдХреЗ рдШреЛрд╖рд┐рдд рдкреНрд░рдХрд╛рд░ рдХреЗ рдЖрдХрд╛рд░ рд╕реЗ рдореЗрд▓ рдЦрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП - рдлрд┐рд░ рдЕрдВрддрд┐рдо рдирд╛рдорд┐рдд рддрд░реНрдХ рдПрдХ рд▓рд┐рдВрдХ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдЕрдиреНрдпрдерд╛, рдЕрд╕реНрдкрд╖реНрдЯ рд╡реНрдпрд╡рд╣рд╛рд░ред <br></li><li>  рдХреНрдпреЛрдВрдХрд┐  C ++ рдореЗрдВ " <i>рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рддрд░реНрдХ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЛ рдмрдврд╝рд╛рдиреЗ</i> " рдХреА рдХреЛрдИ рдЕрд╡рдзрд╛рд░рдгрд╛ рдирд╣реАрдВ рд╣реИ, рдлрд┐рд░ рд╡рд╛рдХреНрдпрд╛рдВрд╢ <br><blockquote>  рдпрджрд┐ рдкреИрд░рд╛рдореАрдЯрд░ <code>parmN</code> рд╕рд╛рде рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ ... рдПрдХ рдкреНрд░рдХрд╛рд░ рдЬреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рддрд░реНрдХ рдкрджреЛрдиреНрдирддрд┐ рдХреЗ рдЖрд╡реЗрджрди рдХреЗ рдмрд╛рдж рдкрд░рд┐рдгрд╛рдо рдХреЗ рд╕рд╛рде рд╕рдВрдЧрдд рдирд╣реАрдВ рд╣реИ, рддреЛ рд╡реНрдпрд╡рд╣рд╛рд░ рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд╣реИ </blockquote>  рджреНрд╡рд╛рд░рд╛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП <blockquote>  рдпрджрд┐ рдкреИрд░рд╛рдореАрдЯрд░ <code>parmN</code> рд╕рд╛рде рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ ... рдПрдХ рдкреНрд░рдХрд╛рд░ рдЬреЛ рдЙрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рд╛рде рд╕рдВрдЧрдд рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдПрдХ рдРрд╕рд╛ рддрд░реНрдХ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдкреИрд░рд╛рдореАрдЯрд░ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╡реНрдпрд╡рд╣рд╛рд░ рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд╣реЛрддрд╛ рд╣реИ </blockquote></li></ul>  рдореИрдВрдиреЗ рдЕрдкрдиреЗ рджрд░реНрдж рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдВрддрд┐рдо рдмрд┐рдВрджреБ рдХрд╛ рдЕрдиреБрд╡рд╛рдж рдирд╣реАрдВ рдХрд┐рдпрд╛ред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, C ++ рд╕реНрдЯреИрдВрдбрд░реНрдб рдореЗрдВ " <i>рдбрд┐рдлреЙрд▓реНрдЯ рд▓реЙрдЬрд┐рдХ рдЯрд╛рдЗрдк рдПрд╕реНрдХреЗрд▓реЗрд╢рди</i> " рд░рд╣рддрд╛ рд╣реИ <i>[C ++ 17 8.2.2 / 9]</i> ред  рдФрд░ рджреВрд╕рд░реА рдмрд╛рдд, рдореИрдВ рдорд╛рдирдХ рд╡рд╛рдХреНрдпрд╛рдВрд╢ рдХреЗ рд╕рд╛рде рдЗрд╕ рд╡рд╛рдХреНрдпрд╛рдВрд╢ рдХреЗ рдЕрд░реНрде рдкрд░ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рд╣реИрд░рд╛рди рдерд╛, рдЬрд╣рд╛рдВ рд╕рдм рдХреБрдЫ рд╕реНрдкрд╖реНрдЯ рд╣реИред  N0695 рдкрдврд╝рдиреЗ рдХреЗ рдмрд╛рдж рд╣реА рдореБрдЭреЗ рдЖрдЦрд┐рд░ рд╕рдордЭ рдореЗрдВ рдЖрдпрд╛: рдореЗрд░рд╛ рдорддрд▓рдм рд╡рд╣реА рд╣реИред <br><br>  рд╣рд╛рд▓рд╛рдБрдХрд┐, рд╕рднреА 3 рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рдЕрдкрдирд╛рдпрд╛ рдЧрдпрд╛ <i>[C ++ 98 18.7 / 3]</i> ред  C ++ рдореЗрдВ рд╡рд╛рдкрд╕, рдПрдХ рдЪрд░ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдХрдо рд╕реЗ рдХрдо рдПрдХ рдирд╛рдорд┐рдд рдкреИрд░рд╛рдореАрдЯрд░ рд╣реЛрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдЖрдк рджреВрд╕рд░реЛрдВ рддрдХ рдирд╣реАрдВ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЙрд╕ рдкрд░ рдмрд╛рдж рдореЗрдВ рдФрд░ рдЕрдзрд┐рдХ) рдЧрд╛рдпрдм рд╣реЛ рдЧрдП рд╣реИрдВ, рдФрд░ рд╡реИрдз рдкреНрд░рдХрд╛рд░ рдХреЗ рдЕрдирд╛рдо рддрд░реНрдХреЛрдВ рдХреА рд╕реВрдЪреА рдХреЛ рдХрдХреНрд╖рд╛ рд╕рджрд╕реНрдпреЛрдВ рдФрд░ <abbr title="рдкреБрд░рд╛рдирд╛ рдбреЗрдЯрд╛">рдкреАрдУрдбреА</abbr> рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рд╕рдВрдХреЗрдд рдХреЗ рд╕рд╛рде рдкреВрд░рдХ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br>  C ++ 03 рдорд╛рдирдХ рдиреЗ рдкрд░рд┐рд╡рд░реНрддрдирд╢реАрд▓ рдХрд╛рд░реНрдпреЛрдВ рдореЗрдВ рдХреЛрдИ рдмрджрд▓рд╛рд╡ рдирд╣реАрдВ рдХрд┐рдпрд╛ред  C ++ 11 рдиреЗ рдЧреИрд░-рддреБрдЪреНрдЫ рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдФрд░ рд╡рд┐рдзреНрд╡рдВрд╕рдХ <i>[C ++ 11 5.2.2.2 / 7] рдХреЗ</i> рд╕рд╛рде рдкреНрд░рдХрд╛рд░реЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЯрд╛рдЗрдк <code>std::nullptr_t</code> рдХреЛ <code>void*</code> рдФрд░ рдЕрдиреБрдордд рд╕рдВрдХрд▓рдХ рдХреЗ рдЕрдкрдиреЗ рдЕрдирд╛рдо рддрд░реНрдХ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛ред  C ++ 14 рдиреЗ рдЕрдВрддрд┐рдо рдирд╛рдорд┐рдд рдкреИрд░рд╛рдореАрдЯрд░ <i>[C ++ 14 18.10 / 3] рдХреЗ</i> рд░реВрдк рдореЗрдВ рдлрд╝рдВрдХреНрд╢рди рдФрд░ рд╕рд░рдгрд┐рдпреЛрдВ рдХреЗ рдЙрдкрдпреЛрдЧ рдХреА рдЕрдиреБрдорддрд┐ рджреА, рдФрд░ C ++ 17 рдиреЗ рд▓реИрдореНрдмреНрдбрд╛ рджреНрд╡рд╛рд░рд╛ рдХреИрдкреНрдЪрд░ рдХрд┐рдП рдЧрдП <i>рд╡рд┐рд╕реНрддрд╛рд░ рдкреИрдХ</i> рдФрд░ рдЪрд░ рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЛ рдордирд╛ рдХрд░ рджрд┐рдпрд╛ <i>[C ++ 17 21.10.1 / рез]</i> ред <br><br>  рдирддреАрдЬрддрди, C ++ рдиреЗ рдЕрдкрдиреЗ рдиреБрдХрд╕рд╛рди рдХреЗ рд▓рд┐рдП рд╡реИрд░рд┐рдПрдмрд▓ рдлрд╝рдВрдХреНрд╢рди рдЬреЛрдбрд╝реЗред  рдЧреИрд░-рддреБрдЪреНрдЫ рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ / рд╡рд┐рдзреНрд╡рдВрд╕рдХ рдХреЗ рд╕рд╛рде рдХреЗрд╡рд▓ рдЕрдирд┐рд░реНрджрд┐рд╖реНрдЯ рдкреНрд░рдХрд╛рд░ рдХрд╛ рд╕рдорд░реНрдерди рдЗрд╕рдХреЗ рд▓рд╛рдпрдХ рд╣реИред  рдиреАрдЪреЗ рдореИрдВ рдПрдХ рд╕реВрдЪреА рдореЗрдВ рдЪрд░ рдХрд╛рд░реНрдпреЛрдВ рдХреА рд╕рднреА рдЧреИрд░-рд╕реНрдкрд╖реНрдЯ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рдХрдо рдХрд░рдиреЗ рдФрд░ рдЗрд╕реЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЗ рд╕рд╛рде рдкреВрд░рдХ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реВрдВрдЧрд╛ред <br><br><h3>  рдЪрд░ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рдФрд░ рдЧрд▓рдд рддрд░реАрдХреЗ рд╕реЗ рдХреИрд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ </h3><br><ol><li>  рдкрджреЛрдиреНрдирдд рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рд╛рде рдЕрдВрддрд┐рдо рдирд╛рдорд┐рдд рддрд░реНрдХ рдХреА рдШреЛрд╖рдгрд╛ рдХрд░рдирд╛ рдЧрд▓рдд рд╣реИ, рдЕрд░реНрдерд╛рдд  <code>char</code> , <code>signed char</code> , <code>unsigned char</code> , <code>singed short</code> , рдПрдХ <code>unsigned short</code> рдпрд╛ <code>float</code> ред  рдорд╛рдирдХ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдкрд░рд┐рдгрд╛рдо рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ рд╣реЛрдЧрд╛ред <br><br><div class="spoiler">  <b class="spoiler_title">рдЕрдорд╛рдиреНрдп рдХреЛрдб</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void foo(float n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; va_end(va); }</code> </pre> <br></div></div><br>  рд╕рднреА рд╕рдВрдХрд▓рдХ рдЬреЛ рдореЗрд░реЗ рд╣рд╛рде рдореЗрдВ рдереЗ (gcc, clang, MSVC), рдХреЗрд╡рд▓ <b>рдХреНрд▓реИрдВрдЧ</b> рдиреЗ рдПрдХ рдЪреЗрддрд╛рд╡рдиреА рдЬрд╛рд░реА рдХреАред <br><br><div class="spoiler">  <b class="spoiler_title">рджрдмрдВрдЧ рдЪреЗрддрд╛рд╡рдиреА</b> <div class="spoiler_text"><pre> <code class="diff hljs">./test.cpp:7:18: warning: passing an object that undergoes default argument promotion to 'va_start' has undefined behavior [-Wvarargs] va_start(va, n); ^</code> </pre> </div></div><br>  рдФрд░ рдпрджреНрдпрдкрд┐ рд╕рднреА рдорд╛рдорд▓реЛрдВ рдореЗрдВ рд╕рдВрдХрд▓рд┐рдд рдХреЛрдб рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЖрдкрдХреЛ рдЗрд╕ рдкрд░ рднрд░реЛрд╕рд╛ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br><div class="spoiler">  <b class="spoiler_title">рдпрд╣ рд╕рд╣реА рд╣реЛрдЧрд╛</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void foo(double n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; va_end(va); }</code> </pre> </div></div><br></li><li>  рдЕрдВрддрд┐рдо рдирд╛рдорд┐рдд рддрд░реНрдХ рдХреЛ рд╕рдВрджрд░реНрдн рдХреЗ рд░реВрдк рдореЗрдВ рдШреЛрд╖рд┐рдд рдХрд░рдирд╛ рдЧрд▓рдд рд╣реИред  рдХреЛрдИ рд▓рд┐рдВрдХред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдорд╛рдирдХ рднреА рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ рд╡рд╛рджрд╛ рдХрд░рддрд╛ рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">рдЕрдорд╛рдиреНрдп рдХреЛрдб</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void foo(int&amp; n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; va_end(va); }</code> </pre> </div></div><br>  <b>gcc 7.3.0</b> рдиреЗ рдмрд┐рдирд╛ рдХрд┐рд╕реА рдЯрд┐рдкреНрдкрдгреА рдХреЗ рдЗрд╕ рдХреЛрдб рдХреЛ рд╕рдВрдХрд▓рд┐рдд рдХрд┐рдпрд╛ред  <b>lang 6.0.0</b> рдиреЗ рдПрдХ рдЪреЗрддрд╛рд╡рдиреА рдЬрд╛рд░реА рдХреА, рд▓реЗрдХрд┐рди рдлрд┐рд░ рднреА рдЗрд╕реЗ рд╕рдВрдХрд▓рд┐рдд рдХрд┐рдпрд╛ред <br><br><div class="spoiler">  <b class="spoiler_title">рджрдмрдВрдЧ рдЪреЗрддрд╛рд╡рдиреА</b> <div class="spoiler_text"><pre> <code class="diff hljs">./test.cpp:7:18: warning: passing an object of reference type to 'va_start' has undefined behavior [-Wvarargs] va_start(va, n); ^</code> </pre> </div></div><br>  рджреЛрдиреЛрдВ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдХрд╛рд░реНрдпрдХреНрд░рдо рдиреЗ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХрд╛рдо рдХрд┐рдпрд╛ (рднрд╛рдЧреНрдпрд╢рд╛рд▓реА, рдЖрдк рдЗрд╕ рдкрд░ рднрд░реЛрд╕рд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ)ред  рд▓реЗрдХрд┐рди <b>MSVC 19.15.26730</b> рдиреЗ рдЦреБрдж рдХреЛ рдкреНрд░рддрд┐рд╖реНрдард┐рдд рдХрд┐рдпрд╛ - рдЗрд╕рдиреЗ рдХреЛрдб рдХреЛ рд╕рдВрдХрд▓рд┐рдд рдХрд░рдиреЗ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░ рджрд┐рдпрд╛, рдХреНрдпреЛрдВрдХрд┐  <code>va_start</code> рддрд░реНрдХ рдПрдХ рд╕рдВрджрд░реНрдн рдирд╣реАрдВ рд╣реЛрдирд╛ <code>va_start</code> ред <br><br><div class="spoiler">  <b class="spoiler_title">MSVC рд╕реЗ рддреНрд░реБрдЯрд┐</b> <div class="spoiler_text"><pre> <code class="diff hljs">c:\program files (x86)\microsoft visual studio\2017\community\vc\tools\msvc\14.15.26726\include\vadefs.h(151): error C2338: va_start argument must not have reference type and must not be parenthesized</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">рдЦреИрд░, рд╕рд╣реА рд╡рд┐рдХрд▓реНрдк рджрд┐рдЦрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЗрд╕ рддрд░рд╣</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void foo(int* n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; va_end(va); }</code> </pre> </div></div><br></li><li>  рдЯрд╛рдЗрдк <code>va_arg</code> рд▓рд┐рдП <code>va_arg</code> рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рдирд╛ рдЧрд▓рдд рд╣реИ - <code>char</code> , <code>short</code> рдпрд╛ <code>float</code> ред <br><br><div class="spoiler">  <b class="spoiler_title">рдЕрдорд╛рдиреНрдп рдХреЛрдб</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#include &lt;cstdarg&gt; #include &lt;iostream&gt; void foo(int n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; std::cout &lt;&lt; va_arg(va, float) &lt;&lt; std::endl; std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; va_end(va); } int main() { foo(0, 1, 2.0f, 3); return 0; }</code> </pre> </div></div><br>  рдпрд╣ рдпрд╣рд╛рдБ рдФрд░ рдЕрдзрд┐рдХ рджрд┐рд▓рдЪрд╕реНрдк рд╣реИред  рд╕рдВрдХрд▓рди рдкрд░ <b>рдЬреАрд╕реАрд╕реА</b> рдПрдХ рдЪреЗрддрд╛рд╡рдиреА рджреЗрддрд╛ рд╣реИ рдХрд┐ <code>float</code> рдмрдЬрд╛рдп <code>double</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рдФрд░ рдпрджрд┐ рдпрд╣ рдХреЛрдб рдЕрднреА рднреА рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдПрдХ рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рдПрдЧрд╛ред <br><br><div class="spoiler">  <b class="spoiler_title">рдЬреАрд╕реАрд╕реА рдЪреЗрддрд╛рд╡рдиреА</b> <div class="spoiler_text"><pre> <code class="diff hljs">./test.cpp:9:15: warning: 'float' is promoted to 'double' when passed through '...' std::cout &lt;&lt; va_arg(va, float) &lt;&lt; std::endl; ^~~~~~ ./test.cpp:9:15: note: (so you should pass 'double' not 'float' to 'va_arg') ./test.cpp:9:15: note: if this code is reached, the program will abort</code> </pre> </div></div><br>  рджрд░рдЕрд╕рд▓, рдПрдХ рдЕрд╡реИрдз рдирд┐рд░реНрджреЗрд╢ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╢рд┐рдХрд╛рдпрдд рдХреЗ рд╕рд╛рде рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреНрд░реИрд╢ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред <br>  рдПрдХ рдбрдВрдк рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЛ рдПрдХ рд╕рдВрдХреЗрдд рдкреНрд░рд╛рдкреНрдд рд╣реБрдЖред  рдФрд░ рдпрд╣ <code>va_list</code> рдХреА рд╕рдВрд░рдЪрдирд╛ рдХреЛ рднреА рджрд░реНрд╢рд╛рддрд╛ рд╣реИред  32 рдмрд┐рдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдпрд╣ рд╣реИ <br><br><pre> <code class="diff hljs">va = 0xfffc6918 ""</code> </pre> <br>  рдпрд╛рдиреА  <code>va_list</code> рд╕рд┐рд░реНрдл <code>char*</code> ред  64 рдмрд┐рдЯреНрд╕ рдХреЗ рд▓рд┐рдП: <br><br><pre> <code class="diff hljs">va = {{gp_offset = 16, fp_offset = 48, overflow_arg_area = 0x7ffef147e7e0, reg_save_area = 0x7ffef147e720}}</code> </pre> <br>  рдпрд╛рдиреА  рдмрд┐рд▓реНрдХреБрд▓ рд╡рд╣реА рдЬреЛ SystemV ABI AMD64 рдореЗрдВ рд╡рд░реНрдгрд┐рдд рд╣реИред <br><br>  рд╕рдВрдХрд▓рди рдореЗрдВ <b>рдЕрд╡реНрдпрд╡рд╕реНрдерд╛</b> рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ рдХреА рдЪреЗрддрд╛рд╡рдиреА рджреЗрддреА рд╣реИ рдФрд░ <code>double</code> рд╕рд╛рде <code>float</code> рдХреЛ рдмрджрд▓рдиреЗ рдХрд╛ рднреА рд╕реБрдЭрд╛рд╡ рджреЗрддреА рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">рджрдмрдВрдЧ рдЪреЗрддрд╛рд╡рдиреА</b> <div class="spoiler_text"><pre> <code class="diff hljs">./test.cpp:9:26: warning: second argument to 'va_arg' is of promotable type 'float'; this va_arg has undefined behavior because arguments will be promoted to 'double' [-Wvarargs] std::cout &lt;&lt; va_arg(va, float) &lt;&lt; std::endl; ^~~~~</code> </pre> </div></div><br>  рд▓реЗрдХрд┐рди рдкреНрд░реЛрдЧреНрд░рд╛рдо рдЕрдм рдХреНрд░реИрд╢ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, 32-рдмрд┐рдЯ рд╕рдВрд╕реНрдХрд░рдг рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ: <br><br><pre> <code class="diff hljs">1 0 1073741824</code> </pre> <br>  64 рдмрд┐рдЯ: <br><br><pre> <code class="diff hljs">1 0 3</code> </pre> <br>  <b>MSVC</b> рдмрд┐рд▓реНрдХреБрд▓ рд╡реИрд╕рд╛ рд╣реА рдкрд░рд┐рдгрд╛рдо рджреЗрддрд╛ рд╣реИ, рдХреЗрд╡рд▓ рдЪреЗрддрд╛рд╡рдиреА рдХреЗ рдмрд┐рдирд╛ <code>/Wall</code> ред <br><br>  рдпрд╣рд╛рдВ рдпрд╣ рдорд╛рдирд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ 32 рдФрд░ 64 рдмрд┐рдЯреНрд╕ рдХреЗ рдмреАрдЪ рдХрд╛ рдЕрдВрддрд░ рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рд╣реИ рдХрд┐ рдкрд╣рд▓реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдПрдмреАрдЖрдИ рд╕реНрдЯреИрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рднреА рдлрд╝рдВрдХреНрд╢рди рдХреЛ рддрдерд╛рдХрдерд┐рдд рдлрд╝рдВрдХреНрд╢рди рд╕реЗ рдЧреБрдЬрд░рддрд╛ рд╣реИ, рдФрд░ рджреВрд╕рд░реЗ рдореЗрдВ, рдкрд╣рд▓реЗ рдЪрд╛рд░ (рд╡рд┐рдВрдбреЛрдЬ) рдпрд╛ рдЫрд╣ (рд▓рд┐рдирдХреНрд╕) рдкреНрд░реЛрд╕реЗрд╕рд░ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рддрд░реНрдХ рджреЗрддрд╛ рд╣реИ, рдмрд╛рдХреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдвреЗрд░ [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рдХреА</a> ]ред  рд▓реЗрдХрд┐рди рдирд╣реАрдВ, рдЕрдЧрд░ рдЖрдк <code>foo</code> рдХреЛ 4 рддрд░реНрдХреЛрдВ рдХреЗ рд╕рд╛рде рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ 19 рдХреЗ рд╕рд╛рде рдХрд╣рддреЗ рд╣реИрдВ, рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЙрд╕реА рддрд░рд╣ рд╕реЗ рдЖрдЙрдЯрдкреБрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдкрд░рд┐рдгрд╛рдо рд╕рдорд╛рди рд╣реЛрдЧрд╛: 32-рдмрд┐рдЯ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдкреВрд░реНрдг рдЧрдбрд╝рдмрдбрд╝реА, рдФрд░ 64-рдмрд┐рдЯ рдПрдХ рдореЗрдВ рд╕рднреА <code>float</code> рд▓рд┐рдП рд╢реВрдиреНрдпред  рдпрд╛рдиреА  рдПрдмреАрдЖрдИ рдореЗрдВ рдмрд┐рдВрджреБ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рд╣реИ, рд▓реЗрдХрд┐рди рддрд░реНрдХреЛрдВ рдХреЛ рдкрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЗ рдЙрдкрдпреЛрдЧ рдореЗрдВ рдирд╣реАрдВред <br><br><div class="spoiler">  <b class="spoiler_title">рдмреЗрд╢рдХ, рдРрд╕рд╛ рдХрд░рдирд╛ рд╕рд╣реА рд╣реИ</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void foo(int n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; std::cout &lt;&lt; va_arg(va, double) &lt;&lt; std::endl; std::cout &lt;&lt; va_arg(va, int) &lt;&lt; std::endl; va_end(va); }</code> </pre> </div></div><br></li><li>  рдЕрдирд╛рдо рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ nontrivial рдирд┐рд░реНрдорд╛рддрд╛ рдпрд╛ рд╡рд┐рдзреНрд╡рдВрд╕рдХ рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд░реНрдЧ рдХреЗ рдЙрджрд╛рд╣рд░рдг рдХреЛ рдкрд╛рд░рд┐рдд рдХрд░рдирд╛ рдЧрд▓рдд рд╣реИред  рдЬрдм рддрдХ, рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ, рдЗрд╕ рдХреЛрдб рдХрд╛ рднрд╛рдЧреНрдп рдЖрдкрдХреЛ рдХрдо рд╕реЗ рдХрдо "рд╕рдВрдХрд▓рди рдФрд░ рдпрд╣рд╛рдВ рдФрд░ рдЕрднреА рдЪрд▓рд╛рдиреЗ" рд╕реЗ рдЕрдзрд┐рдХ рдЙрддреНрддреЗрдЬрд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">рдЕрдорд╛рдиреНрдп рдХреЛрдб</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#include &lt;cstdarg&gt; #include &lt;iostream&gt; struct Bar { Bar() { std::cout &lt;&lt; "Bar default ctor" &lt;&lt; std::endl; } Bar(const Bar&amp;) { std::cout &lt;&lt; "Bar copy ctor" &lt;&lt; std::endl; } ~Bar() { std::cout &lt;&lt; "Bar dtor" &lt;&lt; std::endl; } }; struct Cafe { Cafe() { std::cout &lt;&lt; "Cafe default ctor" &lt;&lt; std::endl; } Cafe(const Cafe&amp;) { std::cout &lt;&lt; "Cafe copy ctor" &lt;&lt; std::endl; } ~Cafe() { std::cout &lt;&lt; "Cafe dtor" &lt;&lt; std::endl; } }; void foo(int n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; "Before va_arg" &lt;&lt; std::endl; const auto b = va_arg(va, Bar); va_end(va); } int main() { Bar b; Cafe c; foo(1, b, c); return 0; }</code> </pre> </div></div><br>  рдХреНрд▓реИрдВрдЧ рд╕рдмрд╕реЗ рдЧрдВрднреАрд░ рд╣реИ  рд╡рд╣ рдХреЗрд╡рд▓ рдЗрд╕ рдХреЛрдб рдХреЛ рд╕рдВрдХрд▓рд┐рдд рдХрд░рдиреЗ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рджреВрд╕рд░рд╛ рддрд░реНрдХ, <code>va_arg</code> POD рдкреНрд░рдХрд╛рд░ рдирд╣реАрдВ рд╣реИ, рдФрд░ рдЪреЗрддрд╛рд╡рдиреА рджреЗрддрд╛ рд╣реИ рдХрд┐ рдХрд╛рд░реНрдпрдХреНрд░рдо рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдкрд░ <code>va_arg</code> рд╣реЛ рдЬрд╛рдПрдЧрд╛ред <br><br><div class="spoiler">  <b class="spoiler_title">рджрдмрдВрдЧ рдЪреЗрддрд╛рд╡рдиреА</b> <div class="spoiler_text"><pre> <code class="diff hljs">./test.cpp:23:31: error: second argument to 'va_arg' is of non-POD type 'Bar' [-Wnon-pod-varargs] const auto b = va_arg(va, Bar); ^~~ ./test.cpp:31:12: error: cannot pass object of non-trivial type 'Bar' through variadic function; call will abort at runtime [-Wnon-pod-varargs] foo(1, b, c); ^</code> </pre> </div></div><br>  рддреЛ рдпрд╣ рд╣реЛрдЧрд╛, рдпрджрд┐ рдЖрдк рдЕрднреА рднреА <code>-Wno-non-pod-varargs</code> рдзреНрд╡рдЬ рдХреЗ рд╕рд╛рде рд╕рдВрдХрд▓рди рдХрд░рддреЗ рд╣реИрдВред <br><br>  <b>MSVC</b> рдиреЗ рдЪреЗрддрд╛рд╡рдиреА рджреА рд╣реИ рдХрд┐ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдЧреИрд░-рддреБрдЪреНрдЫ рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░реЛрдВ рдХреЗ рд╕рд╛рде рдкреНрд░рдХрд╛рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдкреЛрд░реНрдЯреЗрдмрд▓ рдирд╣реАрдВ рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">MSVC рд╕реЗ рдЪреЗрддрд╛рд╡рдиреА</b> <div class="spoiler_text"><pre> <code class="diff hljs">d:\my documents\visual studio 2017\projects\test\test\main.cpp(31): warning C4840:    "Bar"         </code> </pre> </div></div><br>  рд▓реЗрдХрд┐рди рдХреЛрдб рд╕рдВрдХрд▓рд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдЪрд▓рддрд╛ рд╣реИред  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдВрд╕реЛрд▓ рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: <br><br><div class="spoiler">  <b class="spoiler_title">рд▓реЙрдиреНрдЪ рдкрд░рд┐рдгрд╛рдо</b> <div class="spoiler_text"><pre> <code class="diff hljs">Bar default ctor Cafe default ctor Before va_arg Bar copy ctor Bar dtor Cafe dtor Bar dtor</code> </pre> </div></div><br>  рдпрд╛рдиреА  <code>va_arg</code> рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд╕рдордп рд╣реА рдПрдХ рдХреЙрдкреА рдмрдирд╛рдИ <code>va_arg</code> , рдФрд░ рддрд░реНрдХ, рдпрд╣ рдирд┐рдХрд▓рддрд╛ рд╣реИ, рд╕рдВрджрд░реНрдн рджреНрд╡рд╛рд░рд╛ рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рдХрд┐рд╕реА рддрд░рд╣ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдорд╛рдирдХ рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред <br><br>  <b>рдЬреАрд╕реАрд╕реА 6.3.0</b> рдПрдХ рднреА рдЯрд┐рдкреНрдкрдгреА рдХреЗ рдмрд┐рдирд╛ рд╕рдВрдХрд▓рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЖрдЙрдЯрдкреБрдЯ рд╕рдорд╛рди рд╣реИ: <br><br><div class="spoiler">  <b class="spoiler_title">рд▓реЙрдиреНрдЪ рдкрд░рд┐рдгрд╛рдо</b> <div class="spoiler_text"><pre> <code class="diff hljs">Bar default ctor Cafe default ctor Before va_arg Bar copy ctor Bar dtor Cafe dtor Bar dtor</code> </pre> </div></div><br>  <b>7.3.0 gcc</b> рднреА рдХреБрдЫ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪреЗрддрд╛рд╡рдиреА рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╡реНрдпрд╡рд╣рд╛рд░ рдмрджрд▓ рд░рд╣рд╛ рд╣реИ: <br><br><div class="spoiler">  <b class="spoiler_title">рд▓реЙрдиреНрдЪ рдкрд░рд┐рдгрд╛рдо</b> <div class="spoiler_text"><pre> <code class="diff hljs">Bar default ctor Cafe default ctor Cafe copy ctor Bar copy ctor Before va_arg Bar copy ctor Bar dtor Bar dtor Cafe dtor Cafe dtor Bar dtor</code> </pre> </div></div><br>  рдпрд╛рдиреА  рд╕рдВрдХрд▓рдХ рдХрд╛ рдпрд╣ рд╕рдВрд╕реНрдХрд░рдг рдорд╛рди рд╕реЗ рддрд░реНрдХ рдкрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЬрдм рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ <code>va_arg</code> рдПрдХ рдФрд░ рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рддрд╛ рд╣реИред  рдЗрд╕ рдЕрдВрддрд░ рдХреЛ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрд╝реЗрджрд╛рд░ рд╣реЛрдЧрд╛ рдЬрдм 6 рд╡реЗрдВ рд╕реЗ 7 рд╡реЗрдВ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕реАрдПрдЪрд╕реА рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдпрджрд┐ рдирд┐рд░реНрдорд╛рдгрдХрд░реНрддрд╛рдУрдВ / рд╡рд┐рдирд╛рд╢рдХреЛрдВ рдХреЗ рджреБрд╖реНрдкреНрд░рднрд╛рд╡ рд╣реЛрддреЗ рд╣реИрдВред <br><br>  рд╡реИрд╕реЗ, рдпрджрд┐ рдЖрдк рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдкрд╛рд╕ рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рдХрдХреНрд╖рд╛ рдХреЗ рд╕рдВрджрд░реНрдн рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╣реИрдВ: <br><br><div class="spoiler">  <b class="spoiler_title">рдПрдХ рдФрд░ рдЧрд▓рдд рдХреЛрдб</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void foo(int n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; "Before va_arg" &lt;&lt; std::endl; const auto&amp; b = va_arg(va, Bar&amp;); va_end(va); } int main() { Bar b; Cafe c; foo(1, std::ref(b), c); return 0; }</code> </pre> </div></div><br>  рддрдм рд╕рднреА рд╕рдВрдХрд▓рдХ рдПрдХ рддреНрд░реБрдЯрд┐ рдлреЗрдВрдХ рджреЗрдВрдЧреЗред  рдЬреИрд╕рд╛ рдХрд┐ рдорд╛рдирдХ рджреНрд╡рд╛рд░рд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред <br><br>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдпрджрд┐ рдЖрдк рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рд╕реВрдЪрдХ рджреНрд╡рд╛рд░рд╛ рддрд░реНрдХ рдкрд╛рд░рд┐рдд рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">рдЗрд╕ рддрд░рд╣</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void foo(int n, ...) { va_list va; va_start(va, n); std::cout &lt;&lt; "Before va_arg" &lt;&lt; std::endl; const auto* b = va_arg(va, Bar*); va_end(va); } int main() { Bar b; Cafe c; foo(1, &amp;b, &amp;c); return 0; }</code> </pre> </div></div><br></li></ol><br><h3>  рдЕрдзрд┐рднрд╛рд░ рд╕рдВрдХрд▓реНрдк рдФрд░ рдЪрд░ рдХрд╛рд░реНрдп </h3><br>  рдПрдХ рдУрд░, рд╕рдм рдХреБрдЫ рд╕рд░рд▓ рд╣реИ: рдПрдХ рджреАрд░реНрдШрд╡реГрддреНрдд рдХреЗ рд╕рд╛рде рдорд┐рд▓рд╛рди рдПрдХ рдирд┐рдпрдорд┐рдд рдирд╛рдо рдХреЗ рддрд░реНрдХ рдХреЗ рд╕рд╛рде рдорд┐рд▓рд╛рди рдХрд░рдиреЗ рд╕реЗ рднреА рдмрджрддрд░ рд╣реИ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдорд╛рдирдХ рдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛-рдкрд░рд┐рднрд╛рд╖рд┐рдд рдкреНрд░рдХрд╛рд░ рдХреЗ рд░реВрдкрд╛рдВрддрд░рдг рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рднреАред <br><br><div class="spoiler">  <b class="spoiler_title">рдЕрдзрд┐рднрд╛рд░ рдЙрджрд╛рд╣рд░рдг</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#include &lt;iostream&gt; void foo(...) { std::cout &lt;&lt; "C variadic function" &lt;&lt; std::endl; } void foo(int) { std::cout &lt;&lt; "Ordinary function" &lt;&lt; std::endl; } int main() { foo(1); foo(1ul); foo(); return 0; }</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">рд▓реЙрдиреНрдЪ рдкрд░рд┐рдгрд╛рдо</b> <div class="spoiler_text"><pre> <code class="diff hljs">$ ./test Ordinary function Ordinary function C variadic function</code> </pre> </div></div><br>  рд▓реЗрдХрд┐рди рдпрд╣ рдХреЗрд╡рд▓ рддрдм рддрдХ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдЬрдм рддрдХ рдХрд┐ рддрд░реНрдХреЛрдВ рдХреЗ рдмрд┐рдирд╛ <code>foo</code> рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ рд╕реЗ рд╡рд┐рдЪрд╛рд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рди рд╣реЛред <br><br><div class="spoiler">  <b class="spoiler_title">рдмрд┐рдирд╛ рдмрд╣рд╕ рдХреЗ рдлреВрдХреЛ рдХреЛ рдмреБрд▓рд╛рдУ</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#include &lt;iostream&gt; void foo(...) { std::cout &lt;&lt; "C variadic function" &lt;&lt; std::endl; } void foo() { std::cout &lt;&lt; "Ordinary function without arguments" &lt;&lt; std::endl; } int main() { foo(1); foo(); return 0; }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">рд╕рдВрдХрд▓рдХ рдЙрддреНрдкрд╛рджрди</b> <div class="spoiler_text"><pre> <code class="diff hljs">./test.cpp:16:9: error: call of overloaded 'foo()' is ambiguous foo(); ^ ./test.cpp:3:6: note: candidate: void foo(...) void foo(...) ^~~ ./test.cpp:8:6: note: candidate: void foo() void foo() ^~~</code> </pre> </div></div><br>  рд╕рдм рдХреБрдЫ рдорд╛рдирдХ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╣реИ: рдХреЛрдИ рддрд░реНрдХ рдирд╣реАрдВ рд╣реИрдВ - рджреАрд░реНрдШрд╡реГрддреНрдд рдХреЗ рд╕рд╛рде рдХреЛрдИ рддреБрд▓рдирд╛ рдирд╣реАрдВ рд╣реИ, рдФрд░ рдЬрдм рдЕрдзрд┐рднрд╛рд░ рд╣рд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╡реИрд░рд┐рдПрдмрд▓ рдлрд╝рдВрдХреНрд╢рди рд╕рд╛рдорд╛рдиреНрдп рд╕реЗ рдмрджрддрд░ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред <br><br><h3>  рдЬрдм рдпрд╣ рдЪрд░ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ </h3><br>  рдЦреИрд░, рдкрд░рд┐рд╡рд░реНрддрдирд╢реАрд▓ рдХрд╛рд░реНрдп рдХрднреА-рдХрднреА рдмрд╣реБрдд рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╕реА ++ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рдЖрд╕рд╛рдиреА рд╕реЗ рдЦрд░рд╛рдм рдкреЛрд░реНрдЯреЗрдмрд▓ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ тАЬрд╕реА рд╡реЗрд░рд┐рдПрдВрдЯ C рдлрдВрдХреНрд╢рдиреНрд╕ рди рдмрдирд╛рдПрдВ рдпрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рди рдХрд░реЗрдВтАЭ рдЬреИрд╕реЗ рдХрдИ рдЯрд┐рдкреНрд╕ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╡реЗ C ++ рд╕реНрдЯреИрдВрдбрд░реНрдб рд╕реЗ рдЕрдкрдирд╛ рд╕рдкреЛрд░реНрдЯ рдирд╣реАрдВ рд╣рдЯрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╣реИрдВред  рддреЛ рдЗрди рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рд▓рд╛рдн рд╣реИ?  рдЦреИрд░ рд╡рд╣рд╛рдБред <br><br><ul><li>  рд╕рдмрд╕реЗ рдЖрдо рдФрд░ рд╕реНрдкрд╖реНрдЯ рдорд╛рдорд▓рд╛ рдкрд┐рдЫрдбрд╝реА рд╕рдВрдЧрддрддрд╛ рд╣реИред  рдпрд╣рд╛рдВ рдореИрдВ рддреГрддреАрдп-рдкрдХреНрд╖ рд╕реА рд▓рд╛рдЗрдмреНрд░реЗрд░реАрдЬрд╝ (рдЬреЗрдПрдирдЖрдИ рдХреЗ рд╕рд╛рде рдореЗрд░рд╛ рдорд╛рдорд▓рд╛) рдФрд░ рд╕реА рдПрдкреАрдЖрдИ рдХреЗ рд╕реА ++ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рдкреНрд░рд╛рд╡рдзрд╛рди рджреЛрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рд╢рд╛рдорд┐рд▓ рд╣реЛрдЧрд╛ред <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" title="рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рд╡рд┐рдлрд▓рддрд╛ рдПрдХ рддреНрд░реБрдЯрд┐ рдирд╣реАрдВ рд╣реИ">SFINAE</a> ред  рдпрд╣рд╛рдВ, рдпрд╣ рдмрд╣реБрдд рдЙрдкрдпреЛрдЧреА рд╣реИ рдХрд┐ C ++ рдореЗрдВ рдПрдХ рдЪрд░ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдирд╛рдо рддрд░реНрдХ рдирд╣реАрдВ рд╣реИ, рдФрд░ рдпрд╣ рдХрд┐ рдЬрдм рдУрд╡рд░рд▓реЛрдб рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд╣рд▓ рдХрд░рдирд╛ рд╣реИ, рддреЛ рдПрдХ рдЪрд░ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдЕрдВрддрд┐рдо рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ (рдпрджрд┐ рдХрдо рд╕реЗ рдХрдо рдПрдХ рддрд░реНрдХ рд╣реИ)ред  рдФрд░ рдХрд┐рд╕реА рдЕрдиреНрдп рдлрд╝рдВрдХреНрд╢рди рдХреА рддрд░рд╣, рдПрдХ рдЪрд░ рдлрд╝рдВрдХреНрд╢рди рдХреЗрд╡рд▓ рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХрднреА рднреА рдХреЙрд▓ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">рдЙрджрд╛рд╣рд░рдг</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class T&gt; struct HasFoo { private: template &lt;class U, class = decltype(std::declval&lt;U&gt;().foo())&gt; static void detect(const U&amp;); static int detect(...); public: static constexpr bool value = std::is_same&lt;void, decltype(detect(std::declval&lt;T&gt;()))&gt;::value; };</code> </pre> </div></div><br>  рд╣рд╛рд▓рд╛рдВрдХрд┐ C ++ 14 рдореЗрдВ рдЖрдк рдереЛрдбрд╝рд╛ рдЕрд▓рдЧ рддрд░реАрдХреЗ рд╕реЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><div class="spoiler">  <b class="spoiler_title">рдПрдХ рдФрд░ рдЙрджрд╛рд╣рд░рдг</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class T&gt; struct HasFoo { private: template &lt;class U, class = decltype(std::declval&lt;U&gt;().foo())&gt; static constexpr bool detect(const U*) { return true; } template &lt;class U&gt; static constexpr bool detect(...) { return false; } public: static constexpr bool value = detect&lt;T&gt;(nullptr); };</code> </pre> </div></div><br>  рдФрд░ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдпрд╣ рджреЗрдЦрдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рддрд░реНрдХ рдХрд╛ <code>detect(...)</code> рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ <code>detect(...)</code> рдХрд╣рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдореИрдВ рдХреБрдЫ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреЛ рдмрджрд▓рдирд╛ рдкрд╕рдВрдж рдХрд░реВрдВрдЧрд╛ рдФрд░ рдЪрд░ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЖрдзреБрдирд┐рдХ рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реВрдВрдЧрд╛, рдЙрдирдХреА рд╕рднреА рдХрдорд┐рдпреЛрдВ рд╕реЗ рд░рд╣рд┐рддред <br></li></ul><br><h3>  рд╡реЗрд░рд┐рдПрдВрдЯ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдпрд╛ рдЖрдзреБрдирд┐рдХ C ++ рдореЗрдВ рдордирдорд╛рдиреА рд╕рдВрдЦреНрдпрд╛рдУрдВ рд╕реЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рдП </h3><br>  рдЪрд░ рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдХрд╛ рд╡рд┐рдЪрд╛рд░ рдбрдЧрд▓рд╕ рдЧреНрд░реЗрдЧрд░, рдЬрд╛рдХреЛ рдЬреЗрд░реНрд╡реА рдФрд░ рдЧреИрд░реА рдкреЙрд╡реЗрд▓ рджреНрд╡рд╛рд░рд╛ 2004 рдореЗрдВ рд╡рд╛рдкрд╕ рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдЕрд░реНрдерд╛рддреНред  рд╕реА ++ 11 рдорд╛рдирдХ рдХреЛ рдЕрдкрдирд╛рдиреЗ рд╕реЗ 7 рд╕рд╛рд▓ рдкрд╣рд▓реЗ, рдЬрд┐рд╕рдореЗрдВ рдЗрди рдЪрд░ рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдХреЛ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд░реВрдк рд╕реЗ рд╕рдорд░реНрдерди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╛рдирдХ рдореЗрдВ рдЙрдирдХреЗ рдкреНрд░рд╕реНрддрд╛рд╡ рдХрд╛ рдПрдХ рддреАрд╕рд░рд╛ рд╕рдВрд╢реЛрдзрди рд╢рд╛рдорд┐рд▓ рдерд╛, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N2080</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╢реБрд░реБрдЖрдд рд╕реЗ рд╣реА, рд╡реИрд░рд┐рдПрдмрд▓ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдмрдирд╛рдП рдЧрдП рдереЗ рддрд╛рдХрд┐ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЛ рдордирдорд╛рдиреА рд╕рдВрдЦреНрдпрд╛ рд╡рд╛рд▓реЗ рддрд░реНрдХреЛрдВ рд╕реЗ рдЯрд╛рдЗрдк-рд╕реЗрдл (рдФрд░ рдкреЛрд░реНрдЯреЗрдмрд▓!) рдлрдВрдХреНрд╢рдиреНрд╕ рдмрдирд╛рдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рдорд┐рд▓реЗред </font><font style="vertical-align: inherit;">рдПрдХ рдЕрдиреНрдп рд▓рдХреНрд╖реНрдп рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдПрдХ рдЪрд░ рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рд╛рде рд╡рд░реНрдЧ рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛рдирд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдм рд╣рдо рдХреЗрд╡рд▓ рдЪрд░ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡реИрд░рд┐рдПрдмрд▓ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рддреАрди рдирдИ рдЕрд╡рдзрд╛рд░рдгрд╛рдУрдВ рдХреЛ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++ [C ++ 17 17.5.3] рдкрд░ рд▓реЗ рдЖрдП</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦрд╛рдХрд╛ рдорд╛рдкрджрдВрдбреЛрдВ рдкреИрдХреЗрдЬ ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯреЗрдореНрдкрд▓реЗрдЯ рдкреИрд░рд╛рдореАрдЯрд░ рдкреИрдХ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) - рдЬреЛ рдХреЗ рдмрдЬрд╛рдп рдпрд╣ рдХрд┐рд╕реА рднреА (0 рд╕рд╣рд┐рдд) рдЯреЗрдореНрдкрд▓реЗрдЯ рддрд░реНрдХ рдХреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ рд╣реИ,;</font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлрдВрдХреНрд╢рди рдкреИрд░рд╛рдореАрдЯрд░реНрд╕ рдХрд╛ рдПрдХ рдкреИрдХреЗрдЬ ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлрдВрдХреНрд╢рди рдкреИрд░рд╛рдореАрдЯрд░ рдкреИрдХ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) - рддрджрдиреБрд╕рд╛рд░, рдпрд╣ рдПрдХ рдлрдВрдХреНрд╢рди рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИ рдЬреЛ рдлрд╝рдВрдХреНрд╢рди рддрд░реНрдХреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ (0 рд╕рд╣рд┐рдд) рд▓реЗрддрд╛ рд╣реИ;</font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдкреИрдХреЗрдЬ рдХрд╛ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рд╕реНрддрд╛рд░</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><i><font style="vertical-align: inherit;">рдкреИрдХ рд╡рд┐рд╕реНрддрд╛рд░</font></i><font style="vertical-align: inherit;"> ) рдХреЗрд╡рд▓ рдПрдХ рдЪреАрдЬ рд╣реИ рдЬреЛ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдкреИрдХреЗрдЬ рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред</font></font><br></li></ul><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрджрд╛рд╣рд░рдг</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class ... Args&gt; void foo(const std::string&amp; format, Args ... args) { printf(format.c_str(), args...); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ </font></font><code>class ... Args</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯреЗрдореНрдкрд▓реЗрдЯ рдорд╛рдкрджрдВрдбреЛрдВ </font></font><code>Args ... args</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╛ рдПрдХ рдкреИрдХреЗрдЬ рд╣реИ, рдлрд╝рдВрдХреНрд╢рди рдорд╛рдкрджрдВрдбреЛрдВ рдХрд╛ рдПрдХ рдкреИрдХреЗрдЬ рд╣реИ, рдФрд░ рдлрд╝рдВрдХреНрд╢рди рдорд╛рдкрджрдВрдбреЛрдВ </font></font><code>args...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЗ рдПрдХ рдкреИрдХреЗрдЬ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рд╣реИред</font></font></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╛рдирдХ рдкреИрдХреЗрдЬ рдХрд╣рд╛рдБ рдФрд░ рдХреИрд╕реЗ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЗрд╕рдХреА рдкреВрд░реА рд╕реВрдЪреА рдорд╛рдирдХ рдореЗрдВ рд╣реА рджреА рдЧрдИ рд╣реИ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[C ++ 17 17.5.3 / 4]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рдФрд░ рдЪрд░ рдХрд╛рд░реНрдпреЛрдВ рдХреА рдЪрд░реНрдЪрд╛ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ, рдпрд╣ рдХрд╣рдирд╛ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ рдХрд┐:</font></font><br><br><ul><li><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлрд╝рдВрдХреНрд╢рди рдкреИрд░рд╛рдореАрдЯрд░ рдкреИрдХреЗрдЬ рдХреЛ рджреВрд╕рд░реЗ рдлрд╝рдВрдХреНрд╢рди рдХреА рддрд░реНрдХ рд╕реВрдЪреА рдореЗрдВ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class ... Args&gt; void bar(const std::string&amp; format, Args ... args) { foo&lt;Args...&gt;(format.c_str(), args...); }</code> </pre> </div></div><br></li><li><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╛ рдЖрд░рдВрднреАрдХрд░рдг рд╕реВрдЪреА рдореЗрдВ</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class ... Args&gt; void foo(const std::string&amp; format, Args ... args) { const auto list = {args...}; }</code> </pre> </div></div><br></li><li><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╛ рд▓реИрдВрдмрдбрд╛ рдХреИрдкреНрдЪрд░ рд╕реВрдЪреА рдореЗрдВ</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class ... Args&gt; void foo(const std::string&amp; format, Args ... args) { auto lambda = [&amp;format, args...] () { printf(format.c_str(), args...); }; lambda(); }</code> </pre> </div></div><br></li><li><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлрд╝рдВрдХреНрд╢рди рдорд╛рдкрджрдВрдбреЛрдВ рдХрд╛ рдПрдХ рдФрд░ рдкреИрдХреЗрдЬ рдПрдХ рдХрдирд╡рд▓реНрд╢рди рдПрдХреНрд╕рдкреНрд░реЗрд╢рди рдореЗрдВ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class ... Args&gt; int foo(Args ... args) { return (0 + ... + args); }</code> </pre> </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд╛рд░реНрддрд╛рд▓рд╛рдк C ++ 14 рдореЗрдВ рджрд┐рдЦрд╛рдИ рджрд┐рдП рдФрд░ рд╡реЗ рджрд╛рдПрдВ рдФрд░ рдмрд╛рдПрдВ рдПрдХрд╛рддреНрдордХ рдФрд░ рдмрд╛рдЗрдирд░реА рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╕рдмрд╕реЗ рдкреВрд░реНрдг рд╡рд┐рд╡рд░рдг, рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣, рдорд╛рдирдХ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[C ++ 17 8.1.6] рдореЗрдВ рд╣реИ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред</font></font><br></li><li><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреЛрдиреЛрдВ рдкреНрд░рдХрд╛рд░ рдХреЗ рдкреИрд░рд╛рдореАрдЯрд░ рдкреИрдХреЗрдЬреЛрдВ рдХреЛ рдЖрдХрд╛рд░ ... рдСрдкрд░реЗрдЯрд░ рдореЗрдВ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class ... Args&gt; void foo(Args ... args) { const auto size1 = sizeof...(Args); const auto size2 = sizeof...(args); }</code> </pre> </div></div><br></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдкрд╖реНрдЯ рдЕрдВрдбрд╛рдХрд╛рд░ рдкреИрдХреЗрдЬ рдХрд╛ рдЦреБрд▓рд╛рд╕рд╛ рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ (рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреА рдЬрд░реВрд░рдд рд╣реИ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреИрдЯрд░реНрди</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) рдкреНрд░рдХрдЯреАрдХрд░рдг рдФрд░ рдЗрд╕ рдЕрд╕реНрдкрд╖реНрдЯрддрд╛ рд╕реЗ рдмрдЪрдиреЗ рдХреЗред</font></font><br><br><div class="spoiler">  <b class="spoiler_title">рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;class ... Args&gt; void foo() { using OneTuple = std::tuple&lt;std::tuple&lt;Args&gt;...&gt;; using NestTuple = std::tuple&lt;std::tuple&lt;Args...&gt;&gt;; }</code> </pre> <br> <code>OneTuple</code> тАФ      ( <code>std:tuple&lt;std::tuple&lt;int&gt;&gt;, std::tuple&lt;double&gt;&gt;</code> ),  <code>NestTuple</code> тАФ ,     тАФ   ( <code>std::tuple&lt;std::tuple&lt;int, double&gt;&gt;</code> ). </div></div><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡реЗрд░рд┐рдПрдмрд▓ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рд┐рдВрдЯрдлрд╝ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рд╣реА рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рд╣реИ, рд╕реА рдХреЗ рдЪрд░ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реАрдзреЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ рдмрдирд╛рдП рдЧрдП рдереЗред рдЗрди рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдХреЗ рд▓реЗрдЦрдХреЛрдВ рдиреЗ рд╕реНрд╡рдпрдВ рдЕрдкрдиреЗ рдмрд╣реБрдд рд╣реА рд╕рд░рд▓ рд▓реЗрдХрд┐рди рдЯрд╛рдЗрдк-рд╕реБрд░рдХреНрд╖рд┐рдд рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдкреНрд░рд╕реНрддрд╛рд╡ рд░рдЦрд╛ рдерд╛ </font></font><code>printf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рд╕реА рдореЗрдВ рдкрд╣рд▓реЗ рдЪрд░ рдХрд╛рд░реНрдпреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдкрд░ рдкреНрд░рд┐рдВрдЯ рдХрд░реЗрдВ</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void printf(const char* s) { while (*s) { if (*s == '%' &amp;&amp; *++s != '%') throw std::runtime_error("invalid format string: missing arguments"); std::cout &lt;&lt; *s++; } } template &lt;typename T, typename ... Args&gt; void printf(const char* s, T value, Args ... args) { while (*s) { if (*s == '%' &amp;&amp; *++s != '%') { std::cout &lt;&lt; value; return printf(++s, args...); } std::cout &lt;&lt; *s++; } throw std::runtime_error("extra arguments provided to printf"); }</code> </pre> </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореБрдЭреЗ рд╕рдВрджреЗрд╣ рд╣реИ, рддреЛ рдЪрд░ рддрд░реНрдХреЛрдВ рдХреА рдЧрдгрдирд╛ рдХрд╛ рдпрд╣ рдкреИрдЯрд░реНрди рджрд┐рдЦрд╛рдИ рджрд┐рдпрд╛ - рдЕрддрд┐рднрд╛рд░рд┐рдд рдХрд╛рд░реНрдпреЛрдВ рдХреА рдкреБрдирд░рд╛рд╡рд░реНрддреА рдХреЙрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдореИрдВ рдЕрднреА рднреА рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдХреЗ рдмрд┐рдирд╛ рд╡рд┐рдХрд▓реНрдк рдкрд╕рдВрдж рдХрд░рддрд╛ рд╣реВрдВред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдкрд░ рдФрд░ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдХреЗ рдмрд┐рдирд╛ рдкреНрд░рд┐рдВрдЯ</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">template &lt;typename ... Args&gt; void printf(const std::string&amp; fmt, const Args&amp; ... args) { size_t fmtIndex = 0; size_t placeHolders = 0; auto printFmt = [&amp;fmt, &amp;fmtIndex, &amp;placeHolders]() { for (; fmtIndex &lt; fmt.size(); ++fmtIndex) { if (fmt[fmtIndex] != '%') std::cout &lt;&lt; fmt[fmtIndex]; else if (++fmtIndex &lt; fmt.size()) { if (fmt[fmtIndex] == '%') std::cout &lt;&lt; '%'; else { ++fmtIndex; ++placeHolders; break; } } } }; ((printFmt(), std::cout &lt;&lt; args), ..., (printFmt())); if (placeHolders &lt; sizeof...(args)) throw std::runtime_error("extra arguments provided to printf"); if (placeHolders &gt; sizeof...(args)) throw std::runtime_error("invalid format string: missing arguments"); }</code> </pre> </div></div><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдзрд┐рднрд╛рд░ рд╕рдВрдХрд▓реНрдк рдФрд░ рдЪрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХрд╛рд░реНрдп </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рд╣рд▓ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЗрди рд╡реИрд░рд┐рдПрдмрд▓ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рджреВрд╕рд░реЛрдВ рдХреЗ рдмрд╛рдж, рдорд╛рдирдХ рдФрд░ рд╕рдмрд╕реЗ рдХрдо рд╡рд┐рд╢рд┐рд╖реНрдЯ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдмрд┐рдирд╛ рдмрд╣рд╕ рдХреЗ рдХреЙрд▓ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реИред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдзрд┐рднрд╛рд░ рдЙрджрд╛рд╣рд░рдг</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#include &lt;iostream&gt; void foo(int) { std::cout &lt;&lt; "Ordinary function" &lt;&lt; std::endl; } void foo() { std::cout &lt;&lt; "Ordinary function without arguments" &lt;&lt; std::endl; } template &lt;class T&gt; void foo(T) { std::cout &lt;&lt; "Template function" &lt;&lt; std::endl; } template &lt;class ... Args&gt; void foo(Args ...) { std::cout &lt;&lt; "Template variadic function" &lt;&lt; std::endl; } int main() { foo(1); foo(); foo(2.0); foo(1, 2); return 0; }</code> </pre> </div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЙрдиреНрдЪ рдкрд░рд┐рдгрд╛рдо</font></font></b> <div class="spoiler_text"><pre> <code class="diff hljs">$ ./test Ordinary function Ordinary function without arguments Template function Template variadic function</code> </pre> </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рдЕрдзрд┐рднрд╛рд░ рд╣рд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдПрдХ рдЪрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╝рдВрдХреНрд╢рди рдХреЗрд╡рд▓ рдПрдХ рдЪрд░ рд╕реА рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░ рд╕рдХрддрд╛ рд╣реИ (рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЙрдиреНрд╣реЗрдВ рдХреНрдпреЛрдВ рдорд┐рд▓рд╛рдПрдВ?)ред </font><font style="vertical-align: inherit;">рд╕рд┐рд╡рд╛рдп - рдмреЗрд╢рдХ! </font><font style="vertical-align: inherit;">- рдмрд┐рдирд╛ рдмрд╣рд╕ рдХреЗ рдмреБрд▓рд╛рд╡рд╛ред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд┐рдирд╛ рдмрд╣рд╕ рдХреЗ рдмреБрд▓рд╛рдУ</font></font></b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#include &lt;iostream&gt; void foo(...) { std::cout &lt;&lt; "C variadic function" &lt;&lt; std::endl; } template &lt;class ... Args&gt; void foo(Args ...) { std::cout &lt;&lt; "Template variadic function" &lt;&lt; std::endl; } int main() { foo(1); foo(); return 0; }</code> </pre> </div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЙрдиреНрдЪ рдкрд░рд┐рдгрд╛рдо</font></font></b> <div class="spoiler_text"><pre> <code class="diff hljs">$ ./test Template variadic function C variadic function</code> </pre> </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рджреАрд░реНрдШрд╡реГрддреНрдд рдХреЗ рд╕рд╛рде рдПрдХ рддреБрд▓рдирд╛ рд╣реИ - рд╕рдВрдмрдВрдзрд┐рдд рдлрд╝рдВрдХреНрд╢рди рд╣рд╛рд░рддрд╛ рд╣реИ, рдПрдХ рджреАрд░реНрдШрд╡реГрддреНрдд рдХреЗ рд╕рд╛рде рдХреЛрдИ рддреБрд▓рдирд╛ рдирд╣реАрдВ рд╣реИ - рдФрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╝рдВрдХреНрд╢рди рдЧреИрд░-рдЯреЗрдореНрдкрд▓реЗрдЯ рдПрдХ рд╕реЗ рдЕрд╡рд░ рд╣реИред </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЪрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХреА рдЧрддрд┐ рдкрд░ рдПрдХ рддреНрд╡рд░рд┐рдд рдиреЛрдЯ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2008 рдореЗрдВ, </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">Lo</font></a><font style="vertical-align: inherit;"> submittedc </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Joly</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдиреЗ C ++ рдорд╛рдирдХреАрдХрд░рдг рд╕рдорд┐рддрд┐ рдХреЛ рдЕрдкрдирд╛ рдкреНрд░рд╕реНрддрд╛рд╡ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N2772</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ </font><font style="vertical-align: inherit;">, рдЬрд┐рд╕рдореЗрдВ рдЙрдиреНрд╣реЛрдВрдиреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рджрд┐рдЦрд╛рдпрд╛ рдХрд┐ рдЪрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╝рдВрдХреНрд╢рди рд╕рдорд╛рди рдХрд╛рд░реНрдпреЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рдзреАрдореА рдЧрддрд┐ рд╕реЗ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рддрд░реНрдХ рдЖрд░рдВрднреАрдХрд░рдг рд╕реВрдЪреА ( </font></font><code>std::initializer_list</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдпрджреНрдпрдкрд┐ рдЗрд╕рдиреЗ рд╕реНрд╡рдпрдВ рд▓реЗрдЦрдХ рдХреЗ рд╕реИрджреНрдзрд╛рдВрддрд┐рдХ рдФрдЪрд┐рддреНрдп рдХрд╛ рдЦрдВрдбрди рдХрд┐рдпрд╛, рдЬреЛрд▓реА рдиреЗ рдЗрд╕реЗ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рд╕реНрддрд╛рд╡ рд░рдЦрд╛ </font></font><code>std::min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>std::max</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>std::minmax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдареАрдХ рд╕реЗ рдЖрд░рдВрднреАрдХрд░рдг рд╕реВрдЪрд┐рдпреЛрдВ рдХреА рдорджрдж рд╕реЗ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рди рдХрд┐ рдкрд░рд┐рд╡рд░реНрддрдиреАрдп рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдХреЗ рд╕рд╛рдеред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ рд╕реЗ рд╣реА 2009 рдореЗрдВ, рдПрдХ рдЦрдВрдбрди рджрд┐рдЦрд╛рдИ рджрд┐рдпрд╛ред </font><font style="vertical-align: inherit;">рдЬреЛрд▓реА рдХреЗ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдореЗрдВ, рдПрдХ "рдЧрдВрднреАрд░ рдЧрд▓рддреА" рдХреА рдЦреЛрдЬ рдХреА рдЧрдИ рдереА (рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЦреБрдж рдХреЛ рднреА)ред </font><font style="vertical-align: inherit;">рдирдП рдкрд░реАрдХреНрд╖рдг ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ рджреЗрдЦреЗрдВ)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдЪрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╝рдВрдХреНрд╢рдВрд╕ рдЕрднреА рднреА рддреЗрдЬрд╝ рд╣реИрдВ, рдФрд░ рдХрднреА-рдХрднреА рдорд╣рддреНрд╡рдкреВрд░реНрдг рд░реВрдк рд╕реЗред </font><font style="vertical-align: inherit;">рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рд╕реЗ рдЖрд╢реНрдЪрд░реНрдп рдирд╣реАрдВ рд╣реИ </font><font style="vertical-align: inherit;">рдЖрд░рдВрднреАрдХрд░рдг рд╕реВрдЪреА рдЗрд╕рдХреЗ рддрддреНрд╡реЛрдВ рдХреА рдкреНрд░рддрд┐рдпрд╛рдВ рдмрдирд╛рддреА рд╣реИ, рдФрд░ рдЪрд░ рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдЖрдк рд╕рдВрдХрд▓рди рдЪрд░рдг рдореЗрдВ рдмрд╣реБрдд рдХреБрдЫ рдЧрд┐рди рд╕рдХрддреЗ рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлрд┐рд░ рднреА, C ++ 11 рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рдХреЗ рдорд╛рдирдХреЛрдВ </font></font><code>std::min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>std::max</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>std::minmax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд╛рдзрд╛рд░рдг рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╝рдВрдХреНрд╢рдВрд╕ рд╣реИрдВ, рдПрдХ рдЕрдирд┐рдпрдВрддреНрд░рд┐рдд рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рддрд░реНрдХ рдЬрд┐рдиреНрд╣реЗрдВ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реВрдЪреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╕рд╛рд░рд╛рдВрд╢ рдФрд░ рдирд┐рд╖реНрдХрд░реНрд╖ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рддреЛ, рд╕реА-рд╕реНрдЯрд╛рдЗрд▓ рдЪрд░ рдХрд╛рд░реНрдп: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдиреНрд╣реЗрдВ рдпрд╛ рддреЛ рдЙрдирдХреЗ рддрд░реНрдХреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдпрд╛ рдЙрдирдХреЗ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреА рдЬрд╛рдирдХрд╛рд░реА рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдбреЗрд╡рд▓рдкрд░ рдХреЛ рдмрд╛рдХреА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рдВрдХреНрд╢рди рдХреЗ рддрд░реНрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред</font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрд╡реИрдз рд░реВрдк рд╕реЗ рдЕрдирд╛рдо рддрд░реНрдХ (рдФрд░ рдЕрдВрддрд┐рдо рдирд╛рдо) рдХреЗ рдкреНрд░рдХрд╛рд░ рдЙрдард╛рдПрдВред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рднреВрд▓ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдЕрд╕реНрдкрд╖реНрдЯ рд╡реНрдпрд╡рд╣рд╛рд░ рдорд┐рд▓рддрд╛ рд╣реИред</font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡реЗ рд╢реБрджреНрдз рд╕реА рдХреЗ рд╕рд╛рде рдкрд┐рдЫрдбрд╝реА рд╕рдВрдЧрддрддрд╛ рдмрдирд╛рдП рд░рдЦрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕рд▓рд┐рдП рд╕рдВрджрд░реНрдн рджреНрд╡рд╛рд░рд╛ рддрд░реНрдХ рдкрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++ 11 рд╕реЗ рдкрд╣рд▓реЗ, </font></font><abbr title="рдкреБрд░рд╛рдирд╛ рдбреЗрдЯрд╛"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ </font><font style="vertical-align: inherit;">рддрд░реНрдХ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ </font><font style="vertical-align: inherit;">, рдФрд░ C ++ 11 рдХреЗ рдмрд╛рдж рд╕реЗ, рдЧреИрд░-рддреБрдЪреНрдЫ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рд╕рдВрдХрд▓рдХ рдХреЗ рд╡рд┐рд╡реЗрдХ рдкрд░ рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред</font></font> рдпрд╛рдиреА<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЛрдб рдХрд╛ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрдВрдкрд╛рдЗрд▓рд░ рдФрд░ рдЙрд╕рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред </font></font><br></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдПрдХрдорд╛рддреНрд░ рдЕрдиреБрдореЗрдп рдЙрдкрдпреЛрдЧ C ++ рдХреЛрдб рдореЗрдВ C API рдХреЗ рд╕рд╛рде рд╕рд╣рднрд╛рдЧрд┐рддрд╛ рдХрд░рдирд╛ рд╣реИред </font></font><abbr title="рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рд╡рд┐рдлрд▓рддрд╛ рдПрдХ рддреНрд░реБрдЯрд┐ рдирд╣реАрдВ рд╣реИ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SFINAE</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рд╣рд┐рдд рдЕрдиреНрдп рд╕рднреА рдЪреАрдЬрд╝реЛрдВ рдХреЗ рд▓рд┐рдП, </font><font style="vertical-align: inherit;">рдЪрд░ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдлрд╝рдВрдХреНрд╢рдВрд╕ рд╣реИрдВ:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрдирдХреЗ рд╕рднреА рддрд░реНрдХреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рдЬрд╛рдиреЗрдВред </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕реБрд░рдХреНрд╖рд┐рдд рдЯрд╛рдЗрдк рдХрд░реЗрдВ, рдЙрдирдХреЗ рддрд░реНрдХреЛрдВ рдХреЗ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рди рдмрджрд▓реЗрдВред </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡реЗ рдХрд┐рд╕реА рднреА рд░реВрдк рдореЗрдВ рдЧреБрдЬрд░рддреА рддрд░реНрдХреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреЗ рд╣реИрдВ - рдореВрд▓реНрдп рджреНрд╡рд╛рд░рд╛, рд╕реВрдЪрдХ рджреНрд╡рд╛рд░рд╛, рд╕рдВрджрд░реНрдн рджреНрд╡рд╛рд░рд╛, рд╕рд╛рд░реНрд╡рднреМрдорд┐рдХ рд▓рд┐рдВрдХ рджреНрд╡рд╛рд░рд╛ред </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд┐рд╕реА рднреА рдЕрдиреНрдп рд╕реА ++ рдлрд╝рдВрдХреНрд╢рди рдХреА рддрд░рд╣, рддрд░реНрдХреЛрдВ рдХреЗ рдкреНрд░рдХрд╛рд░реЛрдВ рдкрд░ рдХреЛрдИ рдкреНрд░рддрд┐рдмрдВрдз рдирд╣реАрдВ рд╣реИред </font></font><br></li><li>        (   C ),   . <br></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░рд┐рд╡рд░реНрддрдиреАрдп рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╝рдВрдХреНрд╢рдВрд╕ рдЙрдирдХреЗ рд╕реА-рд╕реНрдЯрд╛рдЗрд▓ рд╕рдордХрдХреНрд╖реЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд░реНрдмреЛрдЬрд╝ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдХрднреА-рдХрднреА рдЙрдиреНрд╣реЗрдВ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдЕрддрд┐рднрд╛рд░рд┐рдд рдЧреИрд░-рдЯреЗрдореНрдкреНрд▓реЗрдЯ рд╕рдВрд╕реНрдХрд░рдг (рдкреБрдирд░рд╛рд╡рд░реНрддреА рддрд░реНрдХ рдЯреНрд░реИрд╡рд░реНрд╕рд▓) рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </font><font style="vertical-align: inherit;">рд╡реЗ рдкрдврд╝рдирд╛ рдФрд░ рд▓рд┐рдЦрдирд╛ рдХрдард┐рди рд╣реИрдВред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдм рд╕реВрдЪреАрдмрджреНрдз рдХрдорд┐рдпреЛрдВ рдХреА рдЕрдиреБрдкрд╕реНрдерд┐рддрд┐ рдФрд░ рд╕реВрдЪреАрдмрджреНрдз рд▓рд╛рднреЛрдВ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рд╕реЗ рднреБрдЧрддрд╛рди рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдареАрдХ рд╣реИ, рдирд┐рд╖реНрдХрд░реНрд╖ рд╕рд░рд▓ рд╣реИ: рд╕реА рд╢реИрд▓реА рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрдирд╢реАрд▓ рдХрд╛рд░реНрдп рд╕реА ++ рдореЗрдВ рдХреЗрд╡рд▓ рдкрд┐рдЫрдбрд╝реЗ рд╕рдВрдЧрддрддрд╛ рдХреЗ рдХрд╛рд░рдг рдмрдиреЗ рд░рд╣рддреЗ рд╣реИрдВ, рдФрд░ рд╡реЗ рдЖрдкрдХреЗ рдкреИрд░ рдХреЛ рд╢реВрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреА рдПрдХ рд╡рд┐рд╕реНрддреГрдд рд╢реНрд░реГрдВрдЦрд▓рд╛ рдкреЗрд╢ рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЖрдзреБрдирд┐рдХ рд╕реА ++ рдореЗрдВ, рдпрд╣ рд╕рд▓рд╛рд╣ рджреА рдЬрд╛рддреА рд╣реИ рдХрд┐ рдирдП рдХреЛ рди рд▓рд┐рдЦреЗрдВ рдФрд░, рдпрджрд┐ рд╕рдВрднрд╡ рд╣реЛ рддреЛ, рдореМрдЬреВрджрд╛ рдЪрд░ рд╕реА рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рди рдХрд░реЗрдВред </font><font style="vertical-align: inherit;">рдЪрд░ рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╝рдВрдХреНрд╢рди рдЖрдзреБрдирд┐рдХ C ++ рдХреА рджреБрдирд┐рдпрд╛ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИрдВ рдФрд░ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рд╛рд╣рд┐рддреНрдп рдФрд░ рд╕реНрд░реЛрдд </font></font></h3><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреАрдЬреЗ рдкреНрд▓реЗрдВрдЬрд░, рдж рд╕реНрдЯреИрдВрдбрд░реНрдб рд╕реА рд▓рд╛рдЗрдмреНрд░реЗрд░реА</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмреНрд░рд╛рдпрди рдбрдмреНрд▓реНрдпреВ рдХрд░реНрдирд┐рдШрди рдФрд░ рдбреЗрдирд┐рд╕ рдПрдоред рд░рд┐рдЪреА, рдж рд╕реА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд▓реИрдВрдЧреНрд╡реЗрдЬ, рдкреНрд░рдердо рд╕рдВрд╕реНрдХрд░рдг</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмреНрд░рд╛рдпрди рдбрдмреНрд▓реНрдпреВ рдХрд░реНрдирд┐рдШрди рдФрд░ рдбреЗрдирд┐рд╕ рдПрдоред рд░рд┐рдЪреА, рдж рд╕реА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд▓реИрдВрдЧреНрд╡реЗрдЬ, 2 рдбреА рд╕рдВрд╕реНрдХрд░рдг</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╛рдирдХ C11, рдорд╕реМрджрд╛ N1570</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реА ++ 98 рдорд╛рдирдХ</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реА ++ 03 рдорд╛рдирдХ</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реА ++ 11 рдорд╛рдирдХ, рдорд╕реМрджрд╛ рдПрди 3337</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╛рдирдХ рд╕реА ++ 14, рдбреНрд░рд╛рдлреНрдЯ N4296</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реА ++ 17 рдорд╛рдирдХ, рдорд╕реМрджрд╛ N4659</font></font></a> <br></li></ul><br><h3>  рдкреБрдирд╢реНрдЪ </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдиреЗрдЯ рдкрд░ рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рдкреБрд╕реНрддрдХреЛрдВ рдХреЗ рдЗрд▓реЗрдХреНрдЯреНрд░реЙрдирд┐рдХ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЛ рдЦреЛрдЬрдирд╛ рдФрд░ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдореБрдЭреЗ рдпрдХреАрди рдирд╣реАрдВ рд╣реИ рдХрд┐ рдпрд╣ рдХрд╛рдиреВрдиреА рд╣реЛрдЧрд╛, рдЗрд╕рд▓рд┐рдП рдореИрдВ рд▓рд┐рдВрдХ рдирд╣реАрдВ рджреЗрддрд╛ред</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi430064/">https://habr.com/ru/post/hi430064/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi430052/index.html">рдХреНрдпреЛрдВ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП рдЧреБрдгрд╡рддреНрддрд╛ cusdev рдХрд╛ рд╕рдВрдЪрд╛рд▓рди рдХрд░рдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ</a></li>
<li><a href="../hi430054/index.html">рдкрд╡рд┐рддреНрд░рдЬреЗрдПрд╕ 2018 рдорд╛рд╕реНрдХреЛ: рдореБрдлреНрдд рдСрдирд▓рд╛рдЗрди рдкреНрд░рд╕рд╛рд░рдг, рдкрд╛рд░реНрдЯреА рдФрд░ рд╡рд┐рдЬреНрдЮрд╛рди рдФрд░ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рд░реИрдк</a></li>
<li><a href="../hi430058/index.html">рд╣рд╛рдЗрдбреНрд░реЛрд▓рд┐рдХ рд▓рд╛рдЗрдиреЛрдВ рдореЗрдВ рд╡реЗрд╡ рдкреНрд░рдХреНрд░рд┐рдпрд╛ред рдореВрд▓ рдмрд╛рддреЗрдВ</a></li>
<li><a href="../hi430060/index.html">рд╣реИрдХрд╕реНрдкреЗрд╕, рдбреЗрдирд┐рд╕ рдкреЗрд░реЗрд╡рд▓реЛрд╡, рдЕрдирд╛рд╕реНрддрд╛рд╕рд┐рдпрд╛ рдХреНрд░реЛрдХрд▓реЗрд╡рд╛ - рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХрд╛ рдЬрд╛рджреВ</a></li>
<li><a href="../hi430062/index.html">Mikroservisyред рдЬрд╛рд╡рд╛ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЗ рд╕рд╛рде рд╡рд┐рдХрд╛рд╕ рдФрд░ рд░рд┐рдлреИрдХреНрдЯрд┐рдВрдЧ рдкреИрдЯрд░реНрди</a></li>
<li><a href="../hi430068/index.html">рдХреНрд░рд┐рд╕рд▓рд┐рд╕ рдХрд╛ рдХреНрд░рдо</a></li>
<li><a href="../hi430070/index.html">рд╕реНрдЯреИрдХ рдФрд░ рдХрддрд╛рд░ рджреЛ рдЦрд░рд╛рдм рдкреНрд░рддрд┐рдорд╛рди рд╣реИрдВ рдФрд░ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ</a></li>
<li><a href="../hi430072/index.html">рд╕рд░реНрд╡рд░-рд╕рд╛рдЗрдб рд╕реНрд╡рд┐рдлреНрдЯ рдХреЛ рдХрдо рдХрд░рдХреЗ рдЖрдВрдХрд╛ рдЧрдпрд╛: рдкреЙрд▓ рд╣рдбрд╕рди рдХреЗ рд╕рд╛рде рд╕рд╛рдХреНрд╖рд╛рддреНрдХрд╛рд░</a></li>
<li><a href="../hi430074/index.html">рдХреИрд╕реЗ рдореИрдВрдиреЗ рд▓рдЧрднрдЧ рдПрдХ рд╡рд╛рдпрд░рд╕ рдХреЛ рдмреВрдЯ рдмреЗрдЪрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдореЗрдВ рдкрдХрдбрд╝рд╛</a></li>
<li><a href="../hi430076/index.html">рдбреЙрдЯрдиреЗрдХреНрд╕реНрдЯ 2018 рдорд╛рд╕реНрдХреЛ рдХрд╛ рдореБрдлреНрдд рдкреНрд░рд╕рд╛рд░рдг</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>