<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ฅ โ๐พ ุงูุชูููุฑ ูุน ุงูุจูุงุจุงุช: ุฅูุดุงุก ุจูุงุจุงุช ูู Unreal Engine 4 ๐๐ผ ๐ฉ๐พโ๐ณ ๐๐ฟ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ูุฐู ุงูููุงูุฉ ุ ุณุฃุฎุจุฑู ุนู ููููุฉ ุฅูุดุงุก ุจูุงุจุงุช ูู Unreal Engine 4. ูู ุฃุฌุฏ ุฃู ูุตุงุฏุฑ ุชุตู ูุซู ูุฐุง ุงููุธุงู ุจุงูุชูุตูู (ุงูููุงุญุธุฉ ูู ุฎูุงู ุงูุจูุงุจุงุช ูุงููุฑูุฑ ุนุจุฑูุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุชูููุฑ ูุน ุงูุจูุงุจุงุช: ุฅูุดุงุก ุจูุงุจุงุช ูู Unreal Engine 4</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448802/" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5a9/47f/229/5a947f2299f45d3deab4cfc258045cc1.gif" alt="ุตูุฑุฉ"></div><br>  ูู ูุฐู ุงูููุงูุฉ ุ ุณุฃุฎุจุฑู ุนู ููููุฉ ุฅูุดุงุก ุจูุงุจุงุช ูู Unreal Engine 4. ูู ุฃุฌุฏ ุฃู ูุตุงุฏุฑ ุชุตู ูุซู ูุฐุง ุงููุธุงู ุจุงูุชูุตูู (ุงูููุงุญุธุฉ ูู ุฎูุงู ุงูุจูุงุจุงุช ูุงููุฑูุฑ ุนุจุฑูุง) ุ ูุฐูู ูุฑุฑุช ุฃู ุฃูุชุจ ุจูุฏู. <br><br><h2 style=";text-align:right;direction:rtl">  ูุง ูู ุงูุจูุงุจุฉุ </h2><br>  ููุจุฏุฃ ุจุฃูุซูุฉ ูุชูุถูุญุงุช ุญูู ูุงููุฉ ุงูุจูุงุจุฉ ุงูุฅููุชุฑูููุฉ.  ุฃุณูู ุทุฑููุฉ ููุตู ุงูุจูุงุจุงุช ููุณููุฉ ูููุฑูุฑ ูู ูุณุงุญุฉ ุฅูู ุฃุฎุฑู.  ูู ุจุนุถ ุงูุฃูุนุงุจ ุงูุดุงุฆุนุฉ ุ ูุชู ุงุณุชุฎุฏุงู ูุฐุง ุงูููููู ููุชุฃุซูุฑุงุช ุงููุฑุฆูุฉ ูุญุชู ููููุงูููุง ุงููุนุจ: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฃูุซูุฉ ุจูุงุจุฉ ุงููุนุจุฉ (GIF)</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/611/020/f86/611020f86b634e1946a79f86ee8c4024.gif"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/77d/7b9/813/77d7b9813811fc5b1748d8d29c7599ad.gif"></div><br>  <i>Antichamber (2013) ู Portal (2007)</i> <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/527/671/ad1/527671ad1b23838f56c324d350bf2e1e.gif"></div><br>  <i>ูุฑู ุ 2006</i> </div></div><br>  ูู ุจูู ุงูุฃูุนุงุจ ุงูุซูุงุซ ุ ุฑุจูุง ุชููู ุงูุจูุงุจุฉ ุงูุฃูุซุฑ ุดูุฑุฉ ุ ููููู ุดุฎุตูุงู ุฃุนุฌุจุช ุจุฑู ุฏุงุฆูุงู ููุงูุช ูู ุงูุชู ุฃุฑุฏุช ูุณุฎูุง.  ุจูุฌุฑุฏ ุฃู ุญุงููุช ุชุทุจูู ุงูุฅุตุฏุงุฑ ุงูุฎุงุต ุจู ูู Unreal Engine 4 ุ ููููู ูู ุฃููุญ ุญููุง ุ ูุฃู ุงููุญุฑู ููุชูุฑ ุฅูู ุงููุธุงุฆู.  ููุน ุฐูู ุ ุชูููุช ูู ุฅุฌุฑุงุก ูุฐู ุงูุชุฌุงุฑุจ: <br><br><div class="oembed" style=";text-align:right;direction:rtl"><div style=";text-align:right;direction:rtl"><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;;text-align:right;direction:rtl"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  ูุชุตูุญู ูุง ูุฏุนู ููุฏูู HTML5. <source src="http://froyok.fr/vine_archive/videos/1318354931002269696.mp4" type="video/mp4"></video></div></div></div><br>  ููุน ุฐูู ุ ููุท ูู ุงูุฅุตุฏุงุฑุงุช ุงูุฌุฏูุฏุฉ ูู Unreal Engine ุชูููุช ุฃุฎูุฑูุง ูู ุชุญููู ุงูุชุฃุซูุฑ ุงููุทููุจ: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/5lga4ppJiuI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุจูุงุจุงุช - ููู ุชุนููุ </h2><br>  ูุจู ูุชุงุจุนุฉ ุงูุชูุงุตูู ุ ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุงูุตูุฑุฉ ุงูุนุงูุฉ ูููููุฉ ุนูู ุงูุจูุงุจุงุช. <br><br>  ูู ุงููุงูุน ุ ุงููุฏุฎู ูู ูุงูุฐุฉ ูุง ุชุฎุฑุฌ ุนู ุงูุฃูุธุงุฑ ุ ูููู ุฅูู ููุงู ุขุฎุฑ ุ ุฃู ุฃููุง ูุถุน ูุฌูุฉ ูุธุฑ ูุญููุฉ ูุนููุฉ ุจุงููุณุจุฉ ูููุงุฆู ูููุฑุฑ ูุฌูุฉ ุงููุธุฑ ูุฐู ูู ููุงู ุขุฎุฑ.  ุจุงุณุชุฎุฏุงู ูุฐุง ุงููุจุฏุฃ ุ ูููููุง ุชูุตูู ูุณุงูุชูู ุ ุญุชู ูู ูุงูุช ุจุนูุฏุฉ ุฌุฏูุง ุนู ุจุนุถูุง ุงูุจุนุถ.  ุชุดุจู ุงููุงูุฐุฉ ููุงุนูุง ูุชูุญ ููุง ูุนุฑูุฉ ููุงู ูุฒูุงู ุนุฑุถ ูุณุงุญุฉ ุฃุฎุฑู ุจุฏูุงู ูู ุงููุณุงุญุฉ ุงูุฃุตููุฉ.  ูุธุฑูุง ูุชูุฑุงุฑ ููุทุฉ ุงูุงูุทูุงู ูู ุฃู ููุงู ุขุฎุฑ ุ ูุฅู ูุฐุง ูุนุทููุง ููู ุงูุงุณุชูุฑุงุฑูุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6b3/d56/84b/6b3d5684bf30d66c8b60d551049f7a9b.png"></div><br>  ูู ูุฐู ุงูุตูุฑุฉ ุ ููุน ุฌูุงุฒ ุงูุงูุชูุงุท (SceneCapture ูู UE4) ุฃูุงู ุงููุณุงุญุฉ ุงูุชู ุชุชูุงูู ูุน ุงููุณุงุญุฉ ุงููุฑุฆูุฉ ูู ูุฌูุฉ ูุธุฑ ุงููุงุนุจ.  ูุชู ุงุณุชุจุฏุงู ูู ูุง ูู ูุฑุฆู ุจุนุฏ ุงูุณุทุฑ ุจูุง ูููู ุฃู ูุฑุงู ุงูุงูุชูุงุท.  ูุธุฑูุง ููุฌูุฏ ุฌูุงุฒ ุงูุงูุชูุงุท ุจูู ุงูุจุงุจ ูุงููุงุฆูุงุช ุงูุฃุฎุฑู ุ ูู ุงูููู ุงุณุชุฎุฏุงู ูุง ูุณูู "ุทุงุฆุฑุฉ ุงููุทุน".  ูู ุญุงูุฉ ูููุน ุงูุจูุงุจุฉ ุ ูุฑูุฏ ุฃู ุชููู ุทุงุฆุฑุฉ ุงููุทุน ุงููุฑูุจุฉ ุจุฅุฎูุงุก ุงููุงุฆูุงุช ุงููุฑุฆูุฉ ุฃูุงู ุงูุจูุงุจุฉ. <br><br>  ูุชูุฎูุต.  ูุญุชุงุฌ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููุน ุงููุงุนุจ </li><li style=";text-align:right;direction:rtl">  ุจูุงุจุฉ ุฏุฎูู ููุทุฉ </li><li style=";text-align:right;direction:rtl">  ุจูุงุจุฉ ุงูุฎุฑูุฌ ููุทุฉ </li><li style=";text-align:right;direction:rtl">  ุฌูุงุฒ ุงููุทุน ูุน ุทุงุฆุฑุฉ ุงููุทุน </li></ul><br>  ููููุฉ ุชูููุฐ ูุฐุง ูู ูุญุฑู ุบูุฑ ูุงูุนูุ <br><br>  ููุฏ ุจููุช ูุธุงูู ุนูู ุฃุณุงุณ ูุฆุชูู ุฑุฆูุณูุชูู <b>ุชุฏูุฑููุง PlayerController</b> <b>ูุดุฎุตูุฉ</b> .  ูุฆุฉ <b>Portal</b> ูู ููุทุฉ ุฏุฎูู ุญููููุฉ ููุจูุงุจุฉ ุ ุชููู ููุทุฉ ุงูุนุฑุถ / ุงูุฎุฑูุฌ ุงูุฎุงุตุฉ ุจูุง ูู ุงููุงุนู ุงููุณุชูุฏู.  ููุงู ุฃูุถูุง <b>Portal Manager</b> ุ ุงูุฐู ูุชู ุฅูุดุงุคู ุจูุงุณุทุฉ PlayerController ููุชู ุชุญุฏูุซู ุจูุงุณุทุฉ Character ูุฅุฏุงุฑุฉ ูู ุจูุงุจุฉ ุนูู ุงููุณุชูู ูุชุญุฏูุซูุง ุ ููุฐูู ููุนุงูุฌุฉ ูุงุฆู SceneCapture (ููู ุฃูุฑ ุดุงุฆุน ูู ุฌููุน ุงูุจูุงุจุงุช). <br><br><blockquote style=";text-align:right;direction:rtl">  ุถุน ูู ุงุนุชุจุงุฑู ุฃู ุงูุจุฑูุงูุฌ ุงูุชุนูููู ูุชููุน ููู ุงููุตูู ุฅูู ูุตูู ุงูุฃุญุฑู ู PlayerController ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.  ูู ุญุงูุชู ุ ูุทูู ุนูููู ExedreCharacter ู ExedrePlayerController. </blockquote><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุฆุฉ ููุซู ุงูุจูุงุจุฉ </h2><br>  ููุจุฏุฃ ูุน ููุซู ุงูุจูุงุจุฉ ุ ูุงูุฐู ุณูุชู ุงุณุชุฎุฏุงูู ูุชุนููู "ุงูููุงูุฐ" ุงูุชู ุณููุธุฑ ูู ุฎูุงููุง ุฅูู ุงููุณุชูู.  ูููุฉ ุงูููุซู ูู ุชูุฏูู ูุนูููุงุช ุนู ุงููุงุนุจ ูุญุณุงุจ ุงูููุงูู ูุงูููุนุทูุงุช ุงููุฎุชููุฉ.  ุณูุดุงุฑู ุฃูุถูุง ูู ุงูุชุนุฑู ุนูู ูุง ุฅุฐุง ูุงู ุงููุงุนุจ ูุนุจุฑ ุงูุจูุงุจุฉ ุฃู ูุง. <br><br>  ูุจู ุงูุจุฏุก ูู ููุงูุดุฉ ููุตูุฉ ููููุซู ุ ุงุณูุญูุง ูู ุฃู ุฃุดุฑุญ ุจุนุถ ุงูููุงููู ุงูุชู ููุช ุจุฅูุดุงุฆูุง ูุฅุฏุงุฑุฉ ูุธุงู ุงูุจูุงุจุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฑูุถ ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ุจุดูู ููุงุฆู ุ ุชุชูุชุน ุงูุจูุงุจุฉ ุจุญุงูุฉ ูุดุทุฉ.  ูุชู ุชุญุฏูุซ ูุฐู ุงูุญุงูุฉ ุจูุงุณุทุฉ Portal Manager. </li><li style=";text-align:right;direction:rtl">  ุชุญุชูู ุงูุจูุงุจุฉ ุนูู ุฌุงูุจูู ุฃูุงูููู ูุฎููููู ูุญุฏุฏููุง ูููุนูุง ูุงุชุฌุงููุง (ุงูููุฌู ุงูุฃูุงูู). </li><li style=";text-align:right;direction:rtl">  ููุนุฑูุฉ ูุง ุฅุฐุง ูุงู ุงููุงุนุจ ูุนุจุฑ ุงูุจูุงุจุฉ ุ ูููู ุจุชุฎุฒูู ุงูููุถุน ุงูุณุงุจู ููุงุนุจ ูููุงุฑูุชู ุจุงููููุน ุงูุญุงูู.  ุฅุฐุง ูุงู ุงููุงุนุจ ูู ุงูุชุฏุจูุฑ ุงูุณุงุจู ุฃูุงู ุงูุจูุงุจุฉ ุ ููู ุงูุชูุงุฑ - ุฎููู ุ ูุฅููุง ูุนุชูุฏ ุฃู ุงููุงุนุจ ุชุฌุงูุฒู.  ูุชู ุชุฌุงูู ุงูุณููู ุงูุนูุณู. </li><li style=";text-align:right;direction:rtl">  ูุญุชูู ุงููุฏุฎู ุนูู ุญุฌู ูุญุฏุฏ ุ ุญุชู ูุง ูุคุฏู ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ููุชุญูู ุญุชู ูููู ุงููุดุบู ูู ูุฐุง ุงููุฌูุฏ.  ูุซุงู: ุชุฌุงูู ุงูุชูุงุทุน ุฅุฐุง ูุงู ุงููุดุบู ูุง ูููุณ ุงูุจูุงุจุฉ ูุนูููุง. </li><li style=";text-align:right;direction:rtl">  ูุชู ุญุณุงุจ ูููุน ุงููุงุนุจ ูู ูููุน ุงููุงููุฑุง ูุถูุงู ุงูุณููู ุงูุตุญูุญ ุนูุฏูุง ุชุนุจุฑ ูุฌูุฉ ุงููุธุฑ ุงูุจูุงุจุฉ ูููู ููุณ ุฌุณู ุงููุงุนุจ. </li><li style=";text-align:right;direction:rtl">  ูุณุชูุจู ุงููุฏุฎู Render Target ุ ุงูุฐู ูุนุฑุถ ูุฌูุฉ ูุธุฑ ูุฎุชููุฉ ูู ูู ููุงุณ ูู ุญุงู ูุงู ุงููููุณ ูู ุงููุฑุฉ ุงููุงุฏูุฉ ุบูุฑ ุตุญูุญ ููุญุชุงุฌ ุฅูู ุงุณุชุจุฏุงูู. </li><li style=";text-align:right;direction:rtl">  ุชุฎุฒู ุงูุจูุงุจุฉ ุฑุงุจุทูุง ุฅูู ููุซู ุขุฎุฑ ูุฏุนู Target ุ ูู ุฃุฌู ูุนุฑูุฉ ููุงู ุงูุงุชุตุงู ุจุงููุณุงุญุฉ ุงูุฃุฎุฑู. </li></ul><br>  ุจุงุณุชุฎุฏุงู ูุฐู ุงูููุงุนุฏ ุ ููุช ุจุฅูุดุงุก ูุฆุฉ ExedrePortal ุฌุฏูุฏุฉ ููุฑูุซุฉ ูู AActor ูููุทุฉ ุงูุทูุงู.  ููุง ูู ุนููุงููุง: <br><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CoreMinimal.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"GameFramework/Actor.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ExedrePortal.generated.h"</span></span></span><span class="hljs-meta"> UCLASS() class EXEDRE_API AExedrePortal : public AActor { GENERATED_UCLASS_BODY() protected: virtual void BeginPlay() override; public: virtual void Tick(float DeltaTime) override; </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//Status of the Portal (being visualized by the player or not) UFUNCTION(BlueprintPure, Category="Exedre|Portal") bool IsActive(); UFUNCTION(BlueprintCallable, Category="Exedre|Portal") void SetActive( bool NewActive ); //Render target to use to display the portal UFUNCTION(BlueprintNativeEvent, BlueprintCallable, Category="Exedre|Portal") void ClearRTT(); UFUNCTION(BlueprintNativeEvent, BlueprintCallable, Category="Exedre|Portal") void SetRTT( UTexture* RenderTexture ); UFUNCTION(BlueprintNativeEvent, Category="Exedre|Portal") void ForceTick(); //Target of where the portal is looking UFUNCTION(BlueprintPure, Category="Exedre|Portal") AActor* GetTarget(); UFUNCTION(BlueprintCallable, Category="Exedre|Portal") void SetTarget( AActor* NewTarget ); //Helpers UFUNCTION(BlueprintCallable, Category="Exedre|Portal") bool IsPointInFrontOfPortal( FVector Point, FVector PortalLocation, FVector PortalNormal ); UFUNCTION(BlueprintCallable, Category="Exedre|Portal") bool IsPointCrossingPortal( FVector Point, FVector PortalLocation, FVector PortalNormal ); UFUNCTION(BlueprintCallable, Category="Exedre|Portal") void TeleportActor( AActor* ActorToTeleport ); protected: UPROPERTY(BlueprintReadOnly) USceneComponent* PortalRootComponent; private: bool bIsActive; AActor* Target; //Used for Tracking movement of a point FVector LastPosition; bool LastInFront; };</span></span></span></span></code> </pre> <br>  ููุง ุชุฑูู ุ ููุงู ูุนุธู ุงูุณููููุงุช ุงูููุถุญุฉ ููุง.  ุงูุขู ุฏุนููุง ูุฑู ููู ุชุชู ูุนุงูุฌุชูุง ูู ุงูุฌุณู (.cpp). <br><br><hr><br>  ุงููุตูู ููุง ูุนุฏ ููููุงุช ุงูุฌุฐุฑ.  ูุฑุฑุช ุฅูุดุงุก ูููููู ุฃุณุงุณููู ุ ูุฃู ุงููุงุนู ุงููุฏุฎู ุณูู ูุฌูุน ุจูู ูู ูู ุงูุชุฃุซูุฑุงุช ุงูุฑุณูููุฉ ูุงูุชุตุงุฏูุงุช / ุงูุงุนุชุฑุงู.  ูุฐูู ููุช ุจุญุงุฌุฉ ุฅูู ุทุฑููุฉ ุจุณูุทุฉ ูุชุญุฏูุฏ ููุงู ูุฌูุฏ ูุงูุฐุฉ / ุจูุงุจุฉ ุ ุฏูู ุงูุญุงุฌุฉ ุฅูู ููุฒุงุช ุงูุจููุชูุซ ุฃู ุบูุฑูุง ูู ุงูุญูู.  ุณูููู PortalRootComponent ูู ุงูุฃุณุงุณ ูุฌููุน ุงูุนูููุงุช ุงููุชุนููุฉ ุจุงูุจูุงุจุฉ. <br><br>  ูุชู ุชุนููู ุฌุฐุฑ ูููุน ุงูุจูุงุจุฉ ุนูู ุฏููุงูููู ุ ูู ุญุงูุฉ ููุงู ูุฆุฉ Blueprint ุจุชูุดูุทู (ุนูู ุณุจูู ุงููุซุงู ุ ูุณุชุฎุฏู ุญุฑูุฉ ูุชุญ / ุฅุบูุงู). <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Sets default values AExedrePortal::AExedrePortal(const FObjectInitializer&amp; ObjectInitializer) : Super(ObjectInitializer) { PrimaryActorTick.bCanEverTick = true; bIsActive = false; RootComponent = CreateDefaultSubobject&lt;USceneComponent&gt;(TEXT("RootComponent")); RootComponent-&gt;Mobility = EComponentMobility::Static; PortalRootComponent = CreateDefaultSubobject&lt;USceneComponent&gt;(TEXT("PortalRootComponent")); PortalRootComponent-&gt;SetupAttachment( GetRootComponent() ); PortalRootComponent-&gt;SetRelativeLocation( FVector(0.0f, 0.0f, 0.0f) ); PortalRootComponent-&gt;SetRelativeRotation( FRotator(0.0f, 0.0f, 0.0f) ); PortalRootComponent-&gt;Mobility = EComponentMobility::Movable; }</span></span></code> </pre> <br><hr><br>  ูุง ููุฌุฏ ุณูู ูุธุงุฆู Get ู Set ุ ููุง ุดูุก ุฃูุซุฑ ูู ุฐูู.  ุณูุฏูุฑ ุญุงูุฉ ุงููุดุงุท ูู ููุงู ุขุฎุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> AExedrePortal::IsActive() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bIsActive; } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedrePortal::SetActive( <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> NewActive ) { bIsActive = NewActive; }</code> </pre> <br><hr><br>  ุฃุญุฏุงุซ ุงููุฎุทุท ุ ุฃูุง ูุง ุฃูุนู ุฃู ุดูุก ูู ูุฆุฉ C ++. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedrePortal::ClearRTT_Implementation() { } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedrePortal::SetRTT_Implementation( UTexture* RenderTexture ) { } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedrePortal::ForceTick_Implementation() { }</code> </pre> <br><hr><br>  ุฅุญุถุงุฑ ูุถุจุท ูุธุงุฆู ููููุซู ุงููุฏู.  ูุง ููุฌุฏ ุดูุก ุฃูุซุฑ ุชุนููุฏูุง ูู ูุฐุง ุงูุฌุฒุก ุฃูุถูุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">AActor* AExedrePortal::GetTarget() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Target; } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedrePortal::SetTarget( AActor* NewTarget ) { Target = NewTarget; }</code> </pre> <br><hr><br>  ูู ุฎูุงู ูุฐู ุงููุธููุฉ ุ ูููููุง ุจุณูููุฉ ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ููุงู ููุทุฉ ุฃูุงู ุงูุทุงุฆุฑุฉ ุ ููู ุญุงูุชูุง ูุฐู ุจูุงุจุฉ.  ุชุณุชุฎุฏู ุงููุธููุฉ ุจููุฉ FPlane ููุญุฑู UE4 ูุฅุฌุฑุงุก ุงูุนูููุงุช ุงูุญุณุงุจูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> AExedrePortal::IsPointInFrontOfPortal( FVector Point, FVector PortalLocation, FVector PortalNormal ) { FPlane PortalPlane = FPlane( PortalLocation, PortalNormal ); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> PortalDot = PortalPlane.PlaneDot( Point ); <span class="hljs-comment"><span class="hljs-comment">//If &lt; 0 means we are behind the Plane //See : http://api.unrealengine.com/INT/API/Runtime/Core/Math/FPlane/PlaneDot/index.html return ( PortalDot &gt;= 0 ); }</span></span></code> </pre> <br><hr><br>  ุชุชุญูู ูุฐู ุงููุธููุฉ ููุนุฑูุฉ ูุง ุฅุฐุง ูุงูุช ุงูููุทุฉ ูุฏ ุนุจุฑุช ูุณุชูู ุจูุงุจุฉ ุงููุฏุฎู.  ููุง ูุณุชุฎุฏู ุงููููู ุงููุฏูู ููุนุฑูุฉ ููู ุชุชุตุฑู ุงูููุทุฉ.  ูุฐู ุงููุธููุฉ ุดุงุฆุนุฉ ุจุญูุซ ูููููุง ุงูุนูู ูุน ุฃู ููุซู ุ ูููู ูู ุญุงูุชู ูุชู ุงุณุชุฎุฏุงููุง ููุท ูุน ุงููุงุนุจ. <br><br>  ุชููู ุงููุธููุฉ ุจุฅูุดุงุก ุงุชุฌุงู / ูุทุนุฉ ุจูู ุงููููุน ุงูุณุงุจู ูุงูุญุงูู ุ ุซู ุชุชุญูู ููุง ุฅุฐุง ูุงูุช ุชุชูุงุทุน ูุน ุงููุณุชูู ุฃู ูุง.  ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุฅููุง ูุชุญูู ููุง ุฅุฐุง ูุงูุช ุชุนุจุฑ ูู ุงูุงุชุฌุงู ุงูุตุญูุญ (ูู ุงูุฃูุงู ุฅูู ุงูุฎููุ). <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> AExedrePortal::IsPointCrossingPortal( FVector Point, FVector PortalLocation, FVector PortalNormal ) { FVector IntersectionPoint; FPlane PortalPlane = FPlane( PortalLocation, PortalNormal ); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> PortalDot = PortalPlane.PlaneDot( Point ); <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsCrossing = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsInFront = PortalDot &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsIntersect = FMath::SegmentPlaneIntersection( LastPosition, Point, PortalPlane, IntersectionPoint ); <span class="hljs-comment"><span class="hljs-comment">//Did we intersect the portal since last Location ? //If yes, check the direction : crossing forward means we were in front and now at the back //If we crossed backward, ignore it (similar to Prey 2006) if( IsIntersect &amp;&amp; !IsInFront &amp;&amp; LastInFront ) { IsCrossing = true; } //Store values for Next check LastInFront = IsInFront; LastPosition = Point; return IsCrossing; }</span></span></code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ููุซู ุงูููู ุงููุถุงุฆู </h2><br>  ุงูุฌุฒุก ุงูุฃุฎูุฑ ูู ููุซู ุงูุจูุงุจุฉ ุงูุฐู ุณููุธุฑ ุฅููู ูู ูุธููุฉ <b>TeleportActor ()</b> . <br><br>  ุนูุฏ ุงูููู ุนู ุจูุนุฏ ูุฃุญุฏ ุงูููุซููู ูู ุงูููุทุฉ A ุฅูู ุงูููุทุฉ B ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุชูุฑุงุฑ ุญุฑูุชู ููููุนู.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ุฏุฎู ุงููุงุนุจ ุฅูู ุงูุจูุงุจุฉ ุ ุซู ุจุงูุงูุชุฑุงู ูุน ุงููุคุซุฑุงุช ุงููุฑุฆูุฉ ุงูููุงุณุจุฉ ุ ุณูุธูุฑ ูู ุฃูู ุฏุฎู ูู ุจุงุจ ุนุงุฏู. <br><br>  ูุจุฏู ุชูุงุทุน ุงูุจูุงุจุฉ ููุฃูู ูุชุญุฑู ูู ุฎุท ูุณุชููู ุ ูููู ูู ุงููุงูุน ูุญุฏุซ ุดูุก ูุฎุชูู ุชูุงููุง.  ุนูุฏ ุงูุฎุฑูุฌ ูู ุงูุจูุงุจุฉ ุ ูุฏ ูููู ุงููุดุบู ูู ุณูุงู ูุฎุชูู ุชูุงููุง.  ุงููุธุฑ ูู ูุซุงู ูู ุงูุจูุงุจุฉ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/185/809/d4f/185809d4fd81675cdd6f1cc871eaf193.gif"></div><br>  ููุง ุชุฑูู ุ ุนูุฏ ุนุจูุฑ ุงูุจูุงุจุฉ ุ ุชุฏูุฑ ุงููุงููุฑุง ูุณุจุฉ ุฅูู ูุชุฌู ุฅูู ุงูุฃูุงู (ุชุฏูุฑ).  ูุฐูู ูุฃู ููุงุท ุงูุจุฏุงูุฉ ูุงูููุงูุฉ ูุชูุงุฒูุฉ ูุน ุงูุทุงุฆุฑุงุช ุงููุฎุชููุฉ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/072/97f/b30/07297fb30171a80c1cc0d831701feb74.jpg"></div><br>  ูุฐูู ุ ููู ููุฌุญ ูุฐุง ุ ูุญุชุงุฌ ุฅูู ุชุญููู ุญุฑูุฉ ุงููุงุนุจ ุฅูู ุงููุณุงุญุฉ ุงููุณุจูุฉ ูููุฏุฎู ูู ุฃุฌู ุชุญูููู ุฅูู ุงููุณุงุญุฉ ุงููุณุชูุฏูุฉ.  ูู ุฎูุงู ุชุทุจูู ูุฐุง ุ ูููููุง ุงูุชุฃูุฏ ูู ุฃูู ุจุนุฏ ุฏุฎูู ุงูุจูุงุจุฉ ูุงูุฎุฑูุฌ ูู ุงูุฌุงูุจ ุงูุขุฎุฑ ุ ุณูุชู ูุญุงุฐุงุฉ ุงููุงุนุจ ุจุดูู ุตุญูุญ ูููุง ูุชุนูู ุจุงููุณุงุญุฉ.  ูุฐุง ูุง ููุทุจู ููุท ุนูู ูููู ูุชูุงูุจ ุงูููุซู ุ ูููู ุฃูุถุง ุนูู <b>ุณุฑุนุชู</b> . <br><br><blockquote style=";text-align:right;direction:rtl">  ุฅุฐุง ููููุง ุนู ููุซู ุฏูู ุชุบููุฑ ุ ููููุง ุจุชุญูููู ุฅูู ุฏูุฑุฉ ูุญููุฉ ุ ููุชูุฌุฉ ูุฐูู ุ ูููู ููููุซู ุฃู ูุฌุฏ ููุณู ุฑุฃุณูุง ุนูู ุนูุจ.  ูุฏ ูููู ูุฐุง ููุงุณุจูุง ูููุงุฆูุงุช ุ ูููู ูุง ููุทุจู ุนูู ุงูุดุฎุตูุงุช ุฃู ุงููุงุนุจ ููุณู.  ุชุญุชุงุฌ ุฅูู ุชุบููุฑ ููุถุน ุงูููุซู ุ ููุง ูู ููุถุญ ุฃุนูุงู ูู ุงููุซุงู ูู Portal. </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedrePortal::TeleportActor( AActor* ActorToTeleport ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ActorToTeleport == <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> || Target == <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-comment"><span class="hljs-comment">//------------------------------- //Retrieve and save Player Velocity //(from the Movement Component) //------------------------------- FVector SavedVelocity = FVector::ZeroVector; AExedreCharacter* EC = nullptr; if( ActorToTeleport-&gt;IsA( AExedreCharacter::StaticClass() ) ) { EC = Cast&lt;AExedreCharacter&gt;( ActorToTeleport ); SavedVelocity = EC-&gt;GetCharMovementComponent()-&gt;GetCurrentVelocity(); } //------------------------------- //Compute and apply new location //------------------------------- FHitResult HitResult; FVector NewLocation = UTool::ConvertLocationToActorSpace( ActorToTeleport-&gt;GetActorLocation(), this, Target ); ActorToTeleport-&gt;SetActorLocation( NewLocation, false, &amp;HitResult, ETeleportType::TeleportPhysics ); //------------------------------- //Compute and apply new rotation //------------------------------- FRotator NewRotation = UTool::ConvertRotationToActorSpace( ActorToTeleport-&gt;GetActorRotation(), this, Target ); //Apply new rotation ActorToTeleport-&gt;SetActorRotation( NewRotation ); //------------------------------- //If we are teleporting a character we need to //update its controller as well and reapply its velocity //------------------------------- if( ActorToTeleport-&gt;IsA( AExedreCharacter::StaticClass() ) ) { //Update Controller AExedrePlayerController* EPC = EC-&gt;GetPlayerController(); if( EPC != nullptr ) { NewRotation = UTool::ConvertRotationToActorSpace( EPC-&gt;GetControlRotation(), this, Target ); EPC-&gt;SetControlRotation( NewRotation ); } //Reapply Velocity (Need to reorient direction into local space of Portal) { FVector Dots; Dots.X = FVector::DotProduct( SavedVelocity, GetActorForwardVector() ); Dots.Y = FVector::DotProduct( SavedVelocity, GetActorRightVector() ); Dots.Z = FVector::DotProduct( SavedVelocity, GetActorUpVector() ); FVector NewVelocity = Dots.X * Target-&gt;GetActorForwardVector() + Dots.Y * Target-&gt;GetActorRightVector() + Dots.Z * Target-&gt;GetActorUpVector(); EC-&gt;GetCharMovementComponent()-&gt;Velocity = NewVelocity; } } //Cleanup Teleport LastPosition = NewLocation; }</span></span></code> </pre> <br><hr><br>  ููุง ูุงุญุธุช ุนูู ุงูุฃุฑุฌุญ ุ ููุงุชุตุงู ุจุงูุชูุงูุจ / ุงููุถุน ุ ุฃุฏุนู ุงููุธุงุฆู ุงูุฎุงุฑุฌูุฉ.  ูุชู ุงุณุชุฏุนุงุคูุง ูู ูุฆุฉ ูุณุชุฎุฏู UTool ุ ูุงูุชู ุชุญุฏุฏ ุงููุธุงุฆู ุงูุซุงุจุชุฉ ุงูุชู ูููู ุงุณุชุฏุนุงุคูุง ูู ุฃู ููุงู (ุจูุง ูู ุฐูู ุงููุฎุทุทุงุช).  ูุชู ุนุฑุถ ุงูููุฏ ุงูุฎุงุต ุจูู ุฃุฏูุงู ุ ูููููู ุชูููุฐู ุจุงูุทุฑููุฉ ุงูุชู ุชุจุฏู ุฃูุถู ูู (ุฑุจูุง ูููู ูู ุงูุฃุณูู ูุถุนูู ูู ูุฆุฉ ููุซู ุงูุจูุงุจุฉ). <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">FVector </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConvertLocationToActorSpace</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( FVector Location, AActor* Reference, AActor* Target )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( Reference == <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> || Target == <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> FVector::ZeroVector; } FVector Direction = Location - Reference-&gt;GetActorLocation(); FVector TargetLocation = Target-&gt;GetActorLocation(); FVector Dots; Dots.X = FVector::DotProduct( Direction, Reference-&gt;GetActorForwardVector() ); Dots.Y = FVector::DotProduct( Direction, Reference-&gt;GetActorRightVector() ); Dots.Z = FVector::DotProduct( Direction, Reference-&gt;GetActorUpVector() ); FVector NewDirection = Dots.X * Target-&gt;GetActorForwardVector() + Dots.Y * Target-&gt;GetActorRightVector() + Dots.Z * Target-&gt;GetActorUpVector(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TargetLocation + NewDirection; }</code> </pre> <br>  ูุชู ุฅุฌุฑุงุก ุงูุชุญููู ููุง ูู ุฎูุงู ุญุณุงุจ ุงููุงุชุฌ ุงูููุงุณู ูููุงููุงุช ูุชุญุฏูุฏ ุฒูุงูุง ูุฎุชููุฉ.  ูู ูุชู ุชุทุจูุน ูุงูู ุงูุงุชุฌุงู ุ ุฃู ุฃูู ูููููุง ูุฑุฉ ุฃุฎุฑู ูุถุงุนูุฉ ูุชูุฌุฉ ุงูููุงุท ุจูุงุณุทุฉ ุงูููุฌูุงุช ุงููุณุชูุฏูุฉ ูููุตูู ุฅูู ุงูููุถุน ูู ููุณ ุงููุณุงูุฉ ุจุงูุถุจุท ูู ุงููุณุงุญุฉ ุงููุญููุฉ ููููุซู ุงููุณุชูุฏู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">FRotator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConvertRotationToActorSpace</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( FRotator Rotation, AActor* Reference, AActor* Target )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( Reference == <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> || Target == <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> FRotator::ZeroRotator; } FTransform SourceTransform = Reference-&gt;GetActorTransform(); FTransform TargetTransform = Target-&gt;GetActorTransform(); FQuat QuatRotation = FQuat( Rotation ); FQuat LocalQuat = SourceTransform.GetRotation().Inverse() * QuatRotation; FQuat NewWorldQuat = TargetTransform.GetRotation() * LocalQuat; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NewWorldQuat.Rotator(); }</code> </pre> <br>  ุชุญูู ุงูุชุญูู ูุงู ุฃุตุนุจ ููููุง ูุชูููุฐ.  ูู ุงูููุงูุฉ ุ ุชุจูู ุฃู ุฃูุถู ุญู ูู ุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ุงููุฑุจุนุงุช ุงูุฑุจุงุนูุฉ</a> ุ ูุฃู ูุฐุง ุฃูุซุฑ ุฏูุฉ ุจูุซูุฑ ูู ุงูุนูู ูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer">ุฒูุงูุง Euler</a> ุงูุนุงุฏูุฉ ููุง ูุชุทูุจ ุณูู ุณุทูุฑ ููููุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.  ูุชู ุฅุฌุฑุงุก ุงูุชุฏููุฑ ุจูุงุณุทุฉ ูุชุฑุงุช ุฑุจุงุนูุฉ ุจุงุณุชุฎุฏุงู ุงูุถุฑุจ ุ ูุฐูู ูู ุญุงูุชูุง ุ ุจุชุทุจูู Inverse () ุนูู ุงูุชูุงูุจ ุงูุฐู ูุฑูุฏ ุชุญูููู ุ ุณููููู ุฅูู ุงููุณุงุญุฉ ุงููุญููุฉ.  ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ููุท ุฅูู ุถุฑุจูุง ูุฑุฉ ุฃุฎุฑู ูู ุฎูุงู ุงูููุนุทู ุงููุณุชูุฏู ููุญุตูู ุนูู ุงูููุนุทู ุงูููุงุฆู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุดุจูุฉ ุจูุงุจุฉ </h2><br>  ูุชุจุฏู ุฌูููุฉ ูู ูุฌูุฉ ูุธุฑ ุงููุงุนุจ ุ ูุณุชุฎุฏู ูุธุงู ุงูุจูุงุจุฉ ุงูุฎุงุต ุจู ุดุจูุฉ ูุญุฏุฏุฉ.  ุชููุณู ุงูุดุจูุฉ ุฅูู ุทุงุฆุฑุชูู ูุฎุชููุชูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ุงููุณุชูู 1</b> : ุงูุทุงุฆุฑุฉ ุงูุฑุฆูุณูุฉ ุงูุชู ูุชู ุนุฑุถ ูุฏู ุชูุฏูู ุงูุจูุงุจุฉ ุนูููุง.  ุชุชููุฒ ูุฐู ุงูุทุงุฆุฑุฉ ุจุณููู ุบูุฑ ูุนุชุงุฏ ุ ูุฃู ูููุชูุง ูู ุงูุงุจุชุนุงุฏ ููููุงู ุนู ุงููุดุบู ุฃุซูุงุก ุงูุชุฑุงุจู ูุชุฌูุจ ุงููุตุงุต ุจูุงุณุทุฉ ุงููุงููุฑุง.  ูุธุฑูุง ูุฃู ุญุฏูุฏ ุงูุทุงุฆุฑุฉ ูุง ุชุชุญุฑู ุ ูููู ุชุชุญุฑู ููููุง ุงููุณุทู ููุท ุ ูุฅู ูุฐุง ูุณูุญ ููุงุนุจ ุจุชุซุจูุชู ุนูู ุชูุฏูู ุงูุจูุงุจุฉ ุจุฏูู ูุทุน ุจุตุฑูุฉ.  ุงูุญูุงู ุนูู ุงูุญูุงู ููุง ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุงูุฎุงุตุฉ ุจูุง ูู ุงููุตู ุงูุนููู ุ ุจูููุง ุงูุญูุงู ุงูุฏุงุฎููุฉ ููุง ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุงูุฎุงุตุฉ ุจูุง ูู ุงููุตู ุงูุณููู ุ ููุง ูุฌุนู ูู ุงูุณูู ุญุฌุจูุง ูู ุงูุชุธููู. </li><li style=";text-align:right;direction:rtl">  <b>ุงููุณุชูู 2</b> : ูุชู ุงุณุชุฎุฏุงู ูุฐู ุงูุทุงุฆุฑุฉ ููุท ูุชูุฏูุฏ ุงููุฑุจุน ุงููุญูุท ููุดุจูุฉ.  ูุชู ุชูุฌูู ุงูุฃูุถุงุน ุงูุทุจูุนูุฉ ููููุน ูุฃุณูู ุ ูุฐูู ุญุชู ุนูู ุงูุฃุฑุถ ุบูุฑ ุงููุณุชููุฉ ุ ูู ุชููู ุงูุดุจูุฉ ูุฑุฆูุฉ ุจุดูู ุงูุชุฑุงุถู (ูุฃู ูุงุฏุฉ ุงูุนุฑุถ ูู ุชููู ุซูุงุฆูุฉ ุงูุงุชุฌุงู). </li></ul><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/72e/125/f6f/72e125f6fd315caa2777f65dc0eaf39a.gif"></div><br>  ููุงุฐุง ุงุณุชุฎุฏุงู ุดุจูุฉ ูุซู ูุฐุงุ <br><br>  ูุฑุฑุช ุฃู "ุงูุทุงุฆุฑุฉ 1" ุณุชูุชุฏ ูุน ุงูุชุฑุงุจ ุงููุงุนุจ.  ูุชูุญ ุฐูู ููุงุนุจ ุชุฏุงุฎู ุงูุจูุงุจุฉ ูุงูุนุจูุฑ ูููุง ุฏูู ุชูููู (ุงููุทุน).  ูููู ุฃู ูุญุฏุซ ูุฐุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูู ุชูู ุงููุงููุฑุง ูุฏ ุนุจุฑุช ุจุนุฏ ูุณุชูู ุงูุทุงุฆุฑุฉ ุงูุฎุงุตุฉ ุจุงููุฏุฎู ุ ููู ูุฏูููุง ุจุงููุนู.  ูุฐุง ูุณูุญ ูู ุจุนุฏู ูุทุน ุงููุงุนุจ ูุชูุฑุงุฑ ุงูุดุจูุฉ ูู ูุงุญูุฉ ุฃุฎุฑู. <br><br>  ุชุชูุซู ูููุฉ "ุงููุณุชูู 2" ูู ุชูุฏูุฏ ุงูุตูุฏูู ุงููุญูุท ุงูููุงุณู ููุดุจูุฉ.  ุจูุง ุฃู "ุงููุณุชูู 1" ูุณุทุญ ุ ูุฅู ุงูุตูุฏูู ุงููุญูุท ุนูู ูุญูุฑ ูุงุญุฏ ุจุณูู 0 ุ ูุฅุฐุง ูุงูุช ุงููุงููุฑุง ูุฑุงุกู ุ ูุณูููู ุงููุญุฑู ุจูุทุนู (ุฃู ุฃูู ูู ูุนุฑุถู).  ุญุฌู ุงูุทุงุฆุฑุฉ 1 128 ร 128 ุ ูุฐูู ูููู ุชุญุฌูููุง ุจุณูููุฉ ุจุงุณุชุฎุฏุงู ุงููุญุฑู.  ุงูุทุงุฆุฑุฉ 2 ุฃูุจุฑ ููููุงู ูุชุญุช ุงูุฃุฑุถ (ุฃูู ูู 0). <br><br>  ุจุนุฏ ุฅูุดุงุก ุงูุดุจูุฉ ุ ูููู ุจุจุณุงุทุฉ ุจุชุตุฏูุฑูุง ูู ูุญุฑุฑ ุซูุงุซู ุงูุฃุจุนุงุฏ ูุฌูุฉ ุฎุงุฑุฌูุฉ ูุงุณุชูุฑุงุฏูุง ุฅูู Unreal.  ุณูุชู ุงุณุชุฎุฏุงูู ูู ุงูุฎุทูุฉ ุงูุชุงููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ููุงุฏ ุงูุจูุงุจุฉ </h2><br>  ูุนุฑุถ ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุจูุงุจุฉ ุ ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ุงูููุงุฏ ุงูุฎุงุตุฉ ุจูุง.  ูู ุจุฅูุดุงุก ูุงุฏุฉ ุฌุฏูุฏุฉ ูู ูุชุตูุญ ุงููุญุชูู (ุฏุนูุชูุง <b>MAT_PortalBase</b> ): <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7b0/402/a9c/7b0402a9cd6c6d62438e06fa3a7cd1f4.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/dea/96c/a1b/dea96ca1b613a92acc7ca35e0bbe44b1.png"></div><br>  ุงูุชุญู ุงูุขู ููู ุจุฅูุดุงุก ุงูุฑุณู ุงูุจูุงูู ุงูุชุงูู: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/cfe/4fa/c17/cfe4fac175e5e399c9e615a6afd0b800.jpg"></div><br>  ุฅููู ููููุฉ ุนูู ุงูููุงุฏ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>FadeColor</b> ูู ุงูููู ุงูุฐู ุณูููู ูุฑุฆููุง ูู ุฎูุงู ุงูุจูุงุจุฉ ุนูุฏูุง ุชููู ุจุนูุฏุฉ ุฌุฏูุง.  ููุงู ุญุงุฌุฉ ูุฃููุง ูุง ููุฏู ุฏุงุฆููุง ุฌููุน ุงูุจูุงุจุงุช ุ ูุฐูู ูุญู ูุญุฌุจ ุงูุนุฑุถ ุนูุฏูุง ูููู ุงููุดุบู / ุงููุงููุฑุง ุจุนูุฏูุง. </li><li style=";text-align:right;direction:rtl">  ููุนุฑูุฉ ููุฏุงุฑ ุงููุณุงูุฉ ุจูู ุงููุดุบู ูุงูุจูุงุจุฉ ุ ุญุฏุฏ <b>ุงููุณุงูุฉ</b> ุจูู Camera Position ู Actor Position.  ุซู ุฃูุณู ุงููุณุงูุฉ ุนูู ุงููููุฉ ุงููุตูู ุงูุชู ุฃุฑุบุจ ูู ุฅุฌุฑุงุก ููุงุฑูุฉ ุจูุง.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงู ุงูุญุฏ ุงูุฃูุตู ุงูุฐู ุญุฏุฏุชู ูู 2000 ุ ููุงูุช ุงููุณุงูุฉ ุฅูู ุงููุงุนุจ ูู 1000 ุ ูุณูุญุตู ุนูู 0.5.  ุฅุฐุง ูุงู ุงููุงุนุจ ุฃุจุนุฏ ูู ุฐูู ุ ูุณูู ุฃุญุตู ุนูู ูููุฉ ุฃูุจุฑ ูู 1 ุ ูุฐูู ูููููู ุงุณุชุฎุฏุงู ุงูุนูุฏ ุงููุดุจุนุฉ ููุญุฏ ููู.  ุจุนุฏ ุฐูู ุ ุชุฃุชู ุงูุนูุฏุฉ Smoothstep ุ ูุงูุชู ูุชู ุงุณุชุฎุฏุงููุง ูููุงุณ ุงููุณุงูุฉ ูุงูุชุฏุฑุฌ ูุงูุชุญูู ุจุฏูุฉ ุฃูุจุฑ ูู ุงูุจูุงุจุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุฃุฑูุฏ ุนูุฏูุง ูููู ุงููุงุนุจ ูุฑูุจูุง ุ ูุฎุชูู ุงูุธู ุชูุงููุง. </li><li style=";text-align:right;direction:rtl">  ุฃุณุชุฎุฏู ุญุณุงุจ ุงููุณุงูุฉ ููููุฉ ููุงุฉ ุฃููุง ูุนูุฏุฉ <b>Lerp</b> ูุฎูุท ููู ุงูุชุธููู <b>ูุงููููุณ</b> ุงูุฐู ุณูุฌุนู ูุฏู ุงููุฏุฎู. </li><li style=";text-align:right;direction:rtl">  ุฃุฎูุฑูุง ุ ุฃููู ุจุนุฒู ุงููููู Y ูุฅุญุฏุงุซูุงุช UV ูุฅูุดุงุก ููุงุน ูุชูุญ ูู ูุนุฑูุฉ ุฑุคูุณ ุงูุดุจูุฉ ุงูุชู ุณูุชู ุฏูุนูุง.  ุฃุถุฑุจ ูุฐุง ุงูููุงุน ุจููุฏุงุฑ ุงูุทุฑุฏ ุงูุฐู ุฃุญุชุงุฌู.  ุฃุณุชุฎุฏู ูููุฉ ุณุงูุจุฉ ุจุญูุซ ุนูุฏูุง ูุชู ุถุฑุจ ุงูููู ุงูุทุจูุนูุฉ ููููู ุจุงูุฑุคูุณ ุ ูุฅููุง ุชุชุญุฑู ูู ุงูุงุชุฌุงู ุงููุนุงูุณ. </li></ul><br>  ุจุนุฏ ุงูููุงู ุจูู ูุฐุง ุ ุฃูุดุฃูุง ููุงุฏ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ููุซู ุงูุจูุงุจุฉ ูู ูุฎุทุท </h2><br>  ูููู ุจุฅุนุฏุงุฏ ูุตู ุฌุฏูุฏ ููููุฑูุซุงุช ูู ููุซู Portal.  ุงููุฑ ุจุฒุฑ ุงููุงูุณ ุงูุฃููู ุนูู ูุชุตูุญ ุงููุญุชูู ูุญุฏุฏ ูุฆุฉ Blueprint: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ead/28b/5a2/ead28b5a23369c2c86a076ec8bb1dda0.png"></div><br>  ุฃุฏุฎู ุงูุขู "portal" ูู ุญูู ุงูุจุญุซ ูุชุญุฏูุฏ ูุฆุฉ ูููุน ุงูุจูุงุจุฉ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bd7/da4/555/bd7da4555cff2dc953ab3b0b0f4d1057.png"></div><br>  ุงูุชุญ ุงูุจููุชูุซ ุฅุฐุง ูู ููู ููุชูุญูุง ุจุงููุนู.  ูู ูุงุฆูุฉ ุงูููููุงุช ุ ุณุชุฑู ุงูุชุณูุณู ุงููุฑูู ุงูุชุงูู: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/73c/34c/308/73c34c308a70f644759dc9057b0facd2.png"></div><br>  ููุง ุชููุนูุง ุ ููุงู ูููู ุงูุฌุฐุฑ ูุฌุฐุฑ ุงูุจูุงุจุฉ.  ุฏุนูุง ูุถูู ูููู ุดุจูุฉ ุซุงุจุช ุฅูู PortalRootComponent ูุชุญููู ุงูุดุจูุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ูู ุงูุฎุทูุฉ ุงูุณุงุจูุฉ ููู: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/fa4/ef3/11d/fa4ef311d11c803afc565060a9902c24.jpg"></div><br><hr><br>  ูุถูู ุฃูุถูุง ูุฑุจุน ุงูุชุตุงุฏู ุ ูุงูุฐู ุณูุชู ุงุณุชุฎุฏุงูู ูุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุงููุดุบู ุฏุงุฎู ูุญุฏุฉ ุชุฎุฒูู ุงูุจูุงุจุฉ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/0b0/28f/df6/0b028fdf696598f6b3eca9af3049caa1.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c2a/85d/747/c2a85d747c8b76900cae32e9f9cc1a59.png"></div><br>  ููุน ูุฑุจุน ุงูุชุตุงุฏู ุฃุณูู ูููู ุงููุดูุฏ ุงููุฑุชุจุท ุจุงูุฌุฐุฑ ุงูุฑุฆูุณู ุ ูููุณ ุชุญุช ุฌุฐุฑ ูููุน ุงูุจูุงุจุฉ.  ุฃุถูุช ุฃูุถูุง ุฃููููุฉ (ููุญุฉ) ููููู ุณูู ูุฌุนู ุงูุจูุงุจุฉ ุฃูุซุฑ ูุถูุญูุง ุนูู ุงููุณุชููุงุช.  ุจุงูุทุจุน ุ ูุฐุง ููุณ ุถุฑูุฑูุง. <br><br>  ุงูุขู ูููู ุจุฅุนุฏุงุฏ ุงูููุงุฏ ูู ุงููุฎุทุท. <br><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุญุชุงุฌ ุฅูู ูุชุบูุฑูู - ุฃุญุฏููุง ูู ุงูููุน <b>Actor</b> ูุงูุงุณู ูู <b>PortalTarget</b> ุ ูุงูุซุงูู ูู ุงูููุน <b>Dynamic Material Instance</b> ููุณูู <b>MaterialInstance</b> .  ููุซู PortalTarget ุฅุดุงุฑุฉ ุฅูู ุงูููุถุน ุงูุฐู ุชูุธุฑ ุฅููู ูุงูุฐุฉ ุงููุฏุฎู (ูุจุงูุชุงูู ุ ูุฅู ุงููุชุบูุฑ ุดุงุฆุน ุ ูุน ุฃููููุฉ ุงูุนูู ุงูููุชูุญุฉ) ุญุชู ูุชููู ูู ุชุบููุฑู ุนูุฏูุง ูุชู ูุถุน ุงููุงุนู ุนูู ุงููุณุชูู.  ุณูููู MaterialInstance ุจุชุฎุฒูู ุฑุงุจุท ูููุงุฏ ุฏููุงููููุฉ ุญุชู ูุชููู ูู ุงููุณุชูุจู ูู ุชุนููู ูุฏู ุงูุชุฌุณูุฏ ุงูุฎุงุต ุจุงูุจูุงุจุฉ ุนูู ุงูููุฑ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/474/0b9/772/4740b9772dfc7ce30cda63300f1682a5.png"></div><br>  ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุฅุถุงูุฉ ุนูุฏ ุงูุฃุญุฏุงุซ ุงูุฎุงุตุฉ ุจูุง.  ูู ุงูุฃูุถู ูุชุญ ูุงุฆูุฉ ุงูููุฑ ุจุฒุฑ ุงููุงูุณ ุงูุฃููู ูู <b>Event Graph</b> ูุงูุนุซูุฑ ุนูู ุฃุณูุงุก ุงูุฃุญุฏุงุซ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bc2/719/d22/bc2719d224381581c9bdb8ea5ce7c365.png"></div><br>  ูููุง ูุฅูุดุงุก ุงูุฑุณู ุงูุชุงูู: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/0f4/400/24f/0f440024f5c322c6640609bb8d20bcad.jpg"></div><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ุงุจุฏุฃ ุงูุชุดุบูู</b> : ููุง ูุณูู ุงูุฏุงูุฉ ุงูุฃุตู SetTarget () ุงูุฎุงุตุฉ ุจุงูุจูุงุจุฉ ูุชุฎุตูุต ุฑุงุจุท ููููุซู ุ ูุงูุฐู ุณูุชู ุงุณุชุฎุฏุงูู ูุงุญููุง ูู SceneCapture.  ุซู ูููู ุจุฅูุดุงุก ูุงุฏุฉ ุฏููุงููููุฉ ุฌุฏูุฏุฉ ููุฎุตุต ููุง ูููุฉ ูุชุบูุฑ MaterialInstance.  ุจุงุณุชุฎุฏุงู ูุฐู ุงูููุงุฏ ุงูุฌุฏูุฏุฉ ุ ูููููุง ุชุฎุตูุตูุง ููููู ุดุจูุฉ ุซุงุจุช.  ููุง ุฃุนุทูุช ุงููุงุฏุฉ ูุณูุฌูุง ููููุฉ ุ ูููู ูุฐุง ุงุฎุชูุงุฑู. </li><li style=";text-align:right;direction:rtl">  <b>ูุณุญ RTT</b> : ุงูุบุฑุถ ูู ูุฐู ุงูููุฒุฉ ูู ูุณุญ ูุณูุฌ Render Target ุงููุฎุตุต ูููุงุฏ ุงููุฏุฎู.  ูุชู ุชุดุบููู ุจูุงุณุทุฉ ูุฏูุฑ ุงูุจูุงุจุฉ. </li><li style=";text-align:right;direction:rtl">  <b>Set RTT</b> : ุงูุบุฑุถ ูู ูุฐู ุงููุธููุฉ ูู ุชุนููู ุงููุงุฏุฉ ุงููุณุชูุฏูุฉ ููุชุฌุณูุฏ ุงูุฎุงุตุฉ ุจุงูุจูุงุจุฉ.  ูุชู ุชุดุบููู ุจูุงุณุทุฉ ูุฏูุฑ ุงูุจูุงุจุฉ. </li></ul><br>  ุญุชู ุงูุขู ุงูุชูููุง ูู ุงุณุชุฎุฏุงู ุงูุจููุชูุซ ุ ููููุง ุณูุนูุฏ ุฅููู ูุงุญููุง ูุชูููุฐ ูุธุงุฆู ุงูุชุฌุฒุฆุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ูุฏูุฑ ุงูุจูุงุจุฉ </h2><br>  ูุฐูู ุ ูุฏููุง ุงูุขู ุฌููุน ุงูุนูุงุตุฑ ุงูุฃุณุงุณูุฉ ุงููุงุฒูุฉ ูุฅูุดุงุก ูุฆุฉ ุฌุฏูุฏุฉ ููุฑูุซุฉ ูู AActor ุ ูุงูุชู ุณุชููู Portal Manager.  ูุฏ ูุง ุชุญุชุงุฌ ุฅูู ูุฆุฉ Portal Manager ูู ูุดุฑูุนู ุ ูููู ูู ุญุงูุชู ุ ูุณูู ุงูุนูู ุฅูู ุญุฏ ูุจูุฑ ูุน ุจุนุถ ุงูุฌูุงูุจ.  ูููุง ููู ูุงุฆูุฉ ุจุงูููุงู ุงูุชู ูุคุฏููุง ูุฏูุฑ ุงูุจูุงุจุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Portal Manager ูู ููุซู <b>ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ "ูุญุฏุฉ ุชุญูู ุงููุดุบู"</b> ูููุญู ุจู ูุชุชุจุน ุญุงูุฉ ูุชุทูุฑ ุงููุงุนุจ ุฏุงุฎู ูุณุชูู ุงููุนุจุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุชุฏููุฑ <b>ุชูุฏูู ุงูุจูุงุจุฉ ุงููุณุชูุฏูุฉ</b> .  ุชุชูุซู ุงูููุฑุฉ ูู ุฅูุดุงุก ูุณูุฌ ูุณุชูุฏู ุจุดูู ุฏููุงูููู ูุทุงุจู ุฏูุฉ ุดุงุดุฉ ุงููุงุนุจ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุนูุฏ ุชุบููุฑ ุงูุฏูุฉ ุฃุซูุงุก ุงููุนุจุฉ ุ ูููู ุงููุฏูุฑ ุชููุงุฆููุง ุจุชุญููููุง ุฅูู ุงูุญุฌู ุงููุทููุจ. </li><li style=";text-align:right;direction:rtl">  ูุจุญุซ ูุฏูุฑ ุงูุจูุงุจุฉ ุนู ูุณุชูู ููุซู ุงูุจูุงุจุฉ <b>ููููู</b> ุจุชุญุฏูุซู ูููุญูู ูุฏู ุงูุชุฌุณูุฏ.  ูุชู ุชูููุฐ ูุฐู ุงููููุฉ ุจุทุฑููุฉ ุชุถูู ุงูุชูุงูู ูุน ุชุฏูู ุงููุณุชูู.  ุนูุฏูุง ูุธูุฑ ููุซู ุฌุฏูุฏ ุ ูุฌุจ ุฃู ูุญุตู ุนูู ูุณูุฌ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุฅุฐุง ุชุบูุฑ ูุฏู Render ุ ููููู ูููุฏูุฑ ุฃูุถูุง ุชุนููู ูุงุญุฏ ุฌุฏูุฏ ุชููุงุฆููุง.  ูุนูู ุฐูู ุนูู ุชุณููู ุฅุฏุงุฑุฉ ุงููุธุงู ุ ุจุฏูุงู ูู ุงูุงุชุตุงู ุจูู ูุฏูุฑ ุจูุงุจุฉ ูุฏูููุง ุจุงููุฏูุฑ. </li><li style=";text-align:right;direction:rtl">  ูุชู <b>ุชูุตูู</b> ูููู <b>SceneCapture</b> ุจูุฏูุฑ Portal ุ ุญุชู ูุง ูุชู ุฅูุดุงุก ูุณุฎุฉ ูุงุญุฏุฉ ููู ุจูุงุจุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุณูุญ ูู ุจุฅุนุงุฏุฉ ุงุณุชุฎุฏุงูู ูู ูู ูุฑุฉ ูุชุญูู ูููุง ุฅูู ููุซู ุจูุงุจุฉ ูุนูู ุนูู ุงููุณุชูู. </li><li style=";text-align:right;direction:rtl">  ุนูุฏูุง ููุฑุฑ ุงููุฏุฎู <b>ุงูููู ุนู ุจูุนุฏ</b> ููุงุนุจ ุ ูุฅูู ูุฑุณู ุทูุจูุง ุฅูู Portal Manager.  ูุนุฏ ุฐูู ุถุฑูุฑููุง ูุชุญุฏูุซ ูู ูู ุงูุจูุงุจุฉ ุงููุตุฏุฑ ูุงููุฌูุฉ (ุฅู ูุฌุฏุช) ุ ุจุญูุซ ูุญุฏุซ ุงูููู ุจุฏูู ูุตูุงุช. </li><li style=";text-align:right;direction:rtl">  ูุชู <b>ุชุญุฏูุซ</b> Portal Manager ูู ููุงูุฉ ูุธููุฉ <b>Character (())</b> ุจุญูุซ ูุชู ุชุญุฏูุซ ูู ุดูุก ุจุดูู ุตุญูุญ ุ ุจูุง ูู ุฐูู ูุงููุฑุง ุงููุดุบู.  ูุฐุง ูุถูู ุฃู ูู ุดูุก ุนูู ุงูุดุงุดุฉ ูุชุฒุงูู ููุชุฌูุจ ุชุฃุฎูุฑ ุฅุทุงุฑ ูุงุญุฏ ุฃุซูุงุก ุงูุชูุฏูู ุจูุงุณุทุฉ ุงููุญุฑู. </li></ul><br>  ุฏุนูุง ูููู ูุธุฑุฉ ุนูู ุฑุฃุณ Portal Manager: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CoreMinimal.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"GameFramework/Actor.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ExedrePortalManager.generated.h"</span></span></span><span class="hljs-meta"> </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//Forward declaration class AExedrePlayerController; class AExedrePortal; class UExedreScriptedTexture; UCLASS() class EXEDRE_API AExedrePortalManager : public AActor { GENERATED_UCLASS_BODY() public: AExedrePortalManager(); //Called by a Portal actor when wanting to teleport something UFUNCTION(BlueprintCallable, Category="Portal") void RequestTeleportByPortal( AExedrePortal* Portal, AActor* TargetToTeleport ); //Save a reference to the PlayerControler void SetControllerOwner( AExedrePlayerController* NewOwner ); //Various setup that happens during spawn void Init(); //Manual Tick void Update( float DeltaTime ); //Find all the portals in world and update them //returns the most valid/usable one for the Player AExedrePortal* UpdatePortalsInWorld(); //Update SceneCapture void UpdateCapture( AExedrePortal* Portal ); //Accessor for Debug purpose UTexture* GetPortalTexture(); //Accessor for Debug purpose FTransform GetCameraTransform(); private: //Function to create the Portal render target void GeneratePortalTexture(); UPROPERTY() USceneCaptureComponent2D* SceneCapture; //Custom class, can be replaced by a "UCanvasRenderTarget2D" instead //See : https://api.unrealengine.com/INT/API/Runtime/Engine/Engine/UCanvasRenderTarget2D/index.html UPROPERTY() UExedreScriptedTexture* PortalTexture; UPROPERTY() AExedrePlayerController* ControllerOwner; int32 PreviousScreenSizeX; int32 PreviousScreenSizeY; float UpdateDelay; };</span></span></span></span></code> </pre> <br><hr><br>  ูุจู ุงูุฏุฎูู ูู ุงูุชูุงุตูู ุ ุณุฃุจูู ููู ูุชู ุฅูุดุงุก ููุซู ูู ูุฆุฉ Player Controller ุ ูุงูุชู ูุชู ุงุณุชุฏุนุงุคูุง ูู ูุธููุฉ BeginPlay (): <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> FActorSpawnParameters SpawnParams; PortalManager = <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>; PortalManager = GetWorld()-&gt;SpawnActor&lt;AExedrePortalManager&gt;( AExedrePortalManager::StaticClass(), FVector::ZeroVector, FRotator::ZeroRotator, SpawnParams); PortalManager-&gt;AttachToActor( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, FAttachmentTransformRules::SnapToTargetIncludingScale); PortalManager-&gt;SetControllerOwner( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> ); PortalManager-&gt;Init();</code> </pre> <br>  ูุฐูู ุ ูุฅููุง ููุดุฆ ููุซููุง ุ ููุนููู ุนูู ูุญุฏุฉ ุชุญูู ุงููุดุบู (ูุฐุง) ุ ุซู ูุญูุธ ุงูุฑุงุจุท ููุณุชุฏุนู ุงูุฏุงูุฉ Init (). <br><br>  ูู ุงูููู ุฃูุถูุง ููุงุญุธุฉ ุฃููุง ูููู ุจุชุญุฏูุซ ุงูููุซู ูุฏูููุง ูู ูุฆุฉ ุงูุญุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedreCharacter::TickActor( <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> DeltaTime, <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> ELevelTick TickType, FActorTickFunction&amp; ThisTickFunction ) { Super::TickActor( DeltaTime, TickType, ThisTickFunction ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( UGameplayStatics::GetPlayerController(GetWorld(), <span class="hljs-number"><span class="hljs-number">0</span></span>) != <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ) { AExedrePlayerController* EPC = Cast&lt;AExedrePlayerController&gt;( UGameplayStatics::GetPlayerController(GetWorld(), <span class="hljs-number"><span class="hljs-number">0</span></span>) ); EPC-&gt;PortalManager-&gt;Update( DeltaTime ); } }</code> </pre> <br>  ูููุง ูู ููุดุฆ ูุฏูุฑ ุงูุจูุงุจุฉ.  ูุงุญุธ ุฃูู ุชู ุชุนุทูู ุงูุชุฌุฒุฆุฉ ุ ูุฃููุง ุณูููู ุจุชุญุฏูุซ Portal Manager ูุฏูููุง ูู ุฎูุงู ุงููุดุบู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">AExedrePortalManager::AExedrePortalManager(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> FObjectInitializer&amp; ObjectInitializer) : Super(ObjectInitializer) { PrimaryActorTick.bCanEverTick = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; PortalTexture = <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>; UpdateDelay = <span class="hljs-number"><span class="hljs-number">1.1f</span></span>; PreviousScreenSizeX = <span class="hljs-number"><span class="hljs-number">0</span></span>; PreviousScreenSizeY = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><hr><br>  ูููุง ููู ูุธุงุฆู get / set Portal Manager (ุจุนุฏ ุฐูู ุณููุชูู ุฅูู ุฃุดูุงุก ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู): <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedrePortalManager::SetControllerOwner( AExedrePlayerController* NewOwner ) { ControllerOwner = NewOwner; } FTransform AExedrePortalManager::GetCameraTransform() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( SceneCapture != <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SceneCapture-&gt;GetComponentTransform(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> FTransform(); } } UTexture* AExedrePortalManager::GetPortalTexture() { <span class="hljs-comment"><span class="hljs-comment">//Portal Texture is a custom component class that embed a UCanvasRenderTraget2D //The GetTexture() simply returns the RenderTarget contained in that class. //IsValidLowLevel() is used here as a way to ensure the Texture has not been destroyed or garbage collected. if( PortalTexture != nullptr &amp;&amp; PortalTexture-&gt;IsValidLowLevel() ) { return PortalTexture-&gt;GetTexture(); } else { return nullptr; } }</span></span></code> </pre> <br><hr><br>  ูู ุงููุงุถุญ ุฃู ุฃูู ุดูุก ุชุจุฏุฃ ุจู ูู ุงูุฏุงูุฉ <b>Init ()</b> . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฏู ุงูุฑุฆูุณู ูู ูุฐู ุงููุธููุฉ ูู ุฅูุดุงุก ูููู SceneCapture (ุฃู ุฌูุงุฒ ุงูุงูุชูุงุท ุงููุฐููุฑ ุฃุนูุงู) ูุชููููู ุจุดูู ุตุญูุญ. </font><font style="vertical-align: inherit;">ูุจุฏุฃ ุจุฅูุดุงุก ูุงุฆู ุฌุฏูุฏ ูุชุณุฌููู ูุนูุตุฑ ูู ุนูุงุตุฑ ูุฐุง ุงูููุซู. </font><font style="vertical-align: inherit;">ุซู ููุชูู ุฅูู ุฅุนุฏุงุฏ ุงูุฎุตุงุฆุต ุงููุชุนููุฉ ุจูุฐุง ุงูุงูุชูุงุท. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุตุงุฆุต ุงูุชู ูุฌุจ ุฐูุฑูุง:</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bCaptureEveryFrame = ุฎุทุฃ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุง ูุฑูุฏ ุชุดุบูู ุงูุงูุชูุงุท ุนูุฏูุง ูุง ูุญุชุงุฌ ุฅููู. </font><font style="vertical-align: inherit;">ุณูููู ุจุฅุฏุงุฑุชู ูุฏูููุง.</font></font></li><li style=";text-align:right;direction:rtl"> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bEnableClipPlane = true</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุฎุงุตูุฉ ูููุฉ ุฌุฏูุง ูุชูุฏูู ุงูุชูุงุท ุงููุฏุฎู ุจุดูู ุตุญูุญ.</font></font></li><li style=";text-align:right;direction:rtl"> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bUseCustomProjectionMatrix = ุตูุงุจ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุฐุง ูุชูุญ ููุง ุงุณุชุจุฏุงู ุฅุณูุงุท Capture </font><b><font style="vertical-align: inherit;">ุจุชููุนุงุชูุง</font></b><font style="vertical-align: inherit;"> ุ ุจูุงุกู ุนูู ูุฌูุฉ ูุธุฑ ุงููุงุนุจ.</font></font></li><li style=";text-align:right;direction:rtl"> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CaptureSource = ESceneCaptureSource :: SCS_SceneColorSceneDepth</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุฐุง ุงููุถุน ูููู ุจุนุถ ุงูุดูุก ุ ููููู ุถุฑูุฑู ูุชูุฏูู ูููุฉ ูุงููุฉ ูู ุงููุนูููุงุช.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชุนูู ุงูุฎุตุงุฆุต ุงููุชุจููุฉ ุฃุณุงุณูุง ุจูุนุงููุงุช ูุง ุจุนุฏ ุงููุนุงูุฌุฉ. </font><font style="vertical-align: inherit;">ุฅููุง ุทุฑููุฉ ููุงุฆูุฉ ููุชุญูู ูู ุงูุฌูุฏุฉ ุ ูุจุงูุชุงูู ุฃุฏุงุก ุงูุชูุงุท. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฏุนู ุงูุฌุฒุก ุงูุฃุฎูุฑ ุงููุธููุฉ ุงูุชู ุชูุดุฆ ูุฏู ุงูุชุฌุณูุฏ ุ ูุงูุฐู ุณูุฑู ุฃุฏูุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedrePortalManager::Init() { <span class="hljs-comment"><span class="hljs-comment">//------------------------------------------------ //Create Camera //------------------------------------------------ SceneCapture = NewObject&lt;USceneCaptureComponent2D&gt;(this, USceneCaptureComponent2D::StaticClass(), *FString("PortalSceneCapture")); SceneCapture-&gt;AttachToComponent( GetRootComponent(), FAttachmentTransformRules::SnapToTargetIncludingScale ); SceneCapture-&gt;RegisterComponent(); SceneCapture-&gt;bCaptureEveryFrame = false; SceneCapture-&gt;bCaptureOnMovement = false; SceneCapture-&gt;LODDistanceFactor = 3; //Force bigger LODs for faster computations SceneCapture-&gt;TextureTarget = nullptr; SceneCapture-&gt;bEnableClipPlane = true; SceneCapture-&gt;bUseCustomProjectionMatrix = true; SceneCapture-&gt;CaptureSource = ESceneCaptureSource::SCS_SceneColorSceneDepth; //Setup Post-Process of SceneCapture (optimization : disable Motion Blur, etc) FPostProcessSettings CaptureSettings; CaptureSettings.bOverride_AmbientOcclusionQuality = true; CaptureSettings.bOverride_MotionBlurAmount = true; CaptureSettings.bOverride_SceneFringeIntensity = true; CaptureSettings.bOverride_GrainIntensity = true; CaptureSettings.bOverride_ScreenSpaceReflectionQuality = true; CaptureSettings.AmbientOcclusionQuality = 0.0f; //0=lowest quality..100=maximum quality CaptureSettings.MotionBlurAmount = 0.0f; //0 = disabled CaptureSettings.SceneFringeIntensity = 0.0f; //0 = disabled CaptureSettings.GrainIntensity = 0.0f; //0 = disabled CaptureSettings.ScreenSpaceReflectionQuality = 0.0f; //0 = disabled CaptureSettings.bOverride_ScreenPercentage = true; CaptureSettings.ScreenPercentage = 100.0f; SceneCapture-&gt;PostProcessSettings = CaptureSettings; //------------------------------------------------ //Create RTT Buffer //------------------------------------------------ GeneratePortalTexture(); }</span></span></code> </pre> <br><hr><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GeneratePortalTexture ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุธููุฉ ุชุณูู ุนูุฏ ุงูุถุฑูุฑุฉ ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ูุณูุฌ Render Target ุฌุฏูุฏ ููุจูุงุจุงุช. </font><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ูู ูุธููุฉ ุงูุชููุฆุฉ ุ ูููู ูููู ุฃูุถูุง ุงุณุชุฏุนุงุกู ุฃุซูุงุก ุชุฑููุฉ Portal Manager. </font><font style="vertical-align: inherit;">ูุฐุง ูู ุงูุณุจุจ ูู ุฃู ูุฐู ุงููุธููุฉ ูุฏููุง ูุญุต ุฏุงุฎูู ูุชุบููุฑ ุฏูุฉ ูููุฐ ุงูุนุฑุถ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ูุญุฏุซ ุฐูู ุ ููู ูุชู ุฅุฌุฑุงุก ุงูุชุญุฏูุซ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุญุงูุชู ุ ููุช ุจุฅูุดุงุก ูุฆุฉ ูุฌููุน ูู UCanvasRenderTarget2D. ุฏุนูุชูุง ExedreScriptedTexture ุ ููู ูููู ูููู ุฅุฑูุงูู ุฅูู ููุซู. ููุฏ ููุชู ุจุฅูุดุงุก ูุฐู ุงููุฆุฉ ูุฅุฏุงุฑุฉ ุฃูุฏุงู ุงูุชุฌุณูุฏ ุจุดูู ูุฑูุญ ูุน ุงูููุซููู ุงูุฐูู ูุฏููู ููุงู ุชูุฏูู. ูููู ุจุงูุชููุฆุฉ ุงูููุงุณุจุฉ ูู Render Target ููุชูุงูู ูุน ูุธุงู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฎุงุต ุจู. ููุน ุฐูู ุ ูู ุณูุงู ุงูุจูุงุจุงุช ุ ูููู ูุณูุฌ RenderTarget2D ุงูุนุงุฏู ุฃูุซุฑ ูู ูุงูู. ูุฐูู ุ ููููู ุจุจุณุงุทุฉ ุงุณุชุฎุฏุงูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedrePortalManager::GeneratePortalTexture() { int32 CurrentSizeX = <span class="hljs-number"><span class="hljs-number">1920</span></span>; int32 CurrentSizeY = <span class="hljs-number"><span class="hljs-number">1080</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ControllerOwner != <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ) { ControllerOwner-&gt;GetViewportSize(CurrentSizeX, CurrentSizeY); } CurrentSizeX = FMath::Clamp( <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(CurrentSizeX / <span class="hljs-number"><span class="hljs-number">1.7</span></span>), <span class="hljs-number"><span class="hljs-number">128</span></span>, <span class="hljs-number"><span class="hljs-number">1920</span></span>); <span class="hljs-comment"><span class="hljs-comment">//1920 / 1.5 = 1280 CurrentSizeY = FMath::Clamp( int(CurrentSizeY / 1.7), 128, 1080); if( CurrentSizeX == PreviousScreenSizeX &amp;&amp; CurrentSizeY == PreviousScreenSizeY ) { return; } PreviousScreenSizeX = CurrentSizeX; PreviousScreenSizeY = CurrentSizeY; //Cleanup existing RTT if( PortalTexture != nullptr &amp;&amp; PortalTexture-&gt;IsValidLowLevel() ) { PortalTexture-&gt;DestroyComponent(); GEngine-&gt;ForceGarbageCollection(); } //Create new RTT PortalTexture = nullptr; PortalTexture = NewObject&lt;UExedreScriptedTexture&gt;(this, UExedreScriptedTexture::StaticClass(), *FString("PortalRenderTarget")); PortalTexture-&gt;SizeX = CurrentSizeX; PortalTexture-&gt;SizeY = CurrentSizeY; //Custom properties of the UExedreScriptedTexture class PortalTexture-&gt;Gamma = 1.0f; PortalTexture-&gt;WrapModeX = 1; //Clamp PortalTexture-&gt;WrapModeY = 1; //Clamp PortalTexture-&gt;bDrawWidgets = false; PortalTexture-&gt;bGenerateMipMaps = false; PortalTexture-&gt;SetClearOnUpdate( false ); //Will be cleared by SceneCapture instead PortalTexture-&gt;Format = ERenderTargetFormat::RGBA16; //Needs 16b to get &gt;1 for Emissive PortalTexture-&gt;AttachToComponent( GetRootComponent(), FAttachmentTransformRules::SnapToTargetIncludingScale ); PortalTexture-&gt;RegisterComponent(); PortalTexture-&gt;SetOwner( this ); PortalTexture-&gt;Init(); PortalTexture-&gt;SetFilterMode( TextureFilter::TF_Bilinear ); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุฐูุฑูุง ุฃุนูุงู ุ ููุช ุจุฅูุดุงุก ูุตู ุฎุงุต ุจู ุ ูุฐุง ูุฌุจ ุชูููู ุงูุฎุตุงุฆุต ุงููุญุฏุฏุฉ ููุง ูุน ูุฏู ุงูุนุฑุถ ุงููุนุชุงุฏ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูููู ุฃู ูููู ุฃูู ุณูุชู ุนุฑุถ ุงูุงูุชูุงุท. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูุฏู ุงูุชุฌุณูุฏ ุณูุชู ุนุฑุถู ูู ุงููุนุจุฉ ุ ููุฐุง ูุนูู ุฃู ูุฐุง ุณูุญุฏุซ ูุจู ุงููุนุงูุฌุฉ ุงููุงููุฉ ุจุฃููููุง ุ ูุจุงูุชุงูู ูุญุชุงุฌ ุฅูู ุชูุฏูู ุงููุดูุฏ ุจูุนูููุงุช ูุงููุฉ (ูุชุฎุฒูู ุงูููู ุฃุนูุงู 1 ูุฅูุดุงุก Bloom). </font><font style="vertical-align: inherit;">ููุฐุง ุงูุณุจุจ ุงุฎุชุฑุช ุชูุณูู RGBA16 (ูุงุญุธ ุฃูู ูุญุชูู ุนูู ุงูุชุนุฏุงุฏ ุงูุฎุงุต ุจู ุ ุณุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ETextureRenderTargetFormat ุจุฏูุงู ูู ุฐูู). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฒูุฏ ูู ุงููุนูููุงุช ุ ุฑุงุฌุน ุงููุตุงุฏุฑ ุงูุชุงููุฉ:</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTextureRenderTarget2D</font></font></a> </li><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ETextureRenderTargetFormat</font></font></a> </li><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USceneCaptureComponent2D</font></font></a> </li></ul><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ุณูู ููุธุฑ ูู ูุธุงุฆู ุงูุชุญุฏูุซ. </font><font style="vertical-align: inherit;">ุงููุธููุฉ ุงูุฃุณุงุณูุฉ ุจุณูุทุฉ ููุบุงูุฉ ูุชุชุณุจุจ ูู ุชุนููุฏ ุฃูุซุฑ. </font><font style="vertical-align: inherit;">ููุงู ุชุฃุฎูุฑ ูุจู ุงุณุชุฏุนุงุก ุฏุงูุฉ GeneratePortalTexture () ูุชุฌูุจ ุฅุนุงุฏุฉ ุฅูุดุงุก ูุฏู ุงูุชุฌุณูุฏ ุนูุฏ ุชุบููุฑ ุญุฌู ูููุฐ ุงูุนุฑุถ (ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงููุญุฑุฑ). </font><font style="vertical-align: inherit;">ุฃุซูุงุก ูุดุฑ ุงููุนุจุฉ ุ ูููู ุฅุฒุงูุฉ ูุฐุง ุงูุชุฃุฎูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedrePortalManager::Update( <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> DeltaTime ) { <span class="hljs-comment"><span class="hljs-comment">//----------------------------------- //Generate Portal texture ? //----------------------------------- UpdateDelay += DeltaTime; if( UpdateDelay &gt; 1.0f ) { UpdateDelay = 0.0f; GeneratePortalTexture(); } //----------------------------------- //Find portals in the level and update them //----------------------------------- AExedrePortal* Portal = UpdatePortalsInWorld(); if( Portal != nullptr ) { UpdateCapture( Portal ); } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ูุฏุนู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UpdatePortalsInWorld ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุนุซูุฑ ุนูู ุฌููุน ุงูุจูุงุจุงุช ุงูููุฌูุฏุฉ ูู ุงูุนุงูู ุงูุญุงูู (ุจูุง ูู ุฐูู ุฌููุน ุงููุณุชููุงุช ุงููุญููุฉ) ูุชุญุฏูุซูุง. </font><font style="vertical-align: inherit;">ุชุญุฏุฏ ุงููุธููุฉ ุฃูุถูุง ุฃู ูููุง "ูุดุท" ุ ุฃู </font><font style="vertical-align: inherit;">ูุฑุฆูุฉ ููุงุนุจ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุฌุฏูุง ุจูุงุจุฉ ูุดุทุฉ ุ ูุฅููุง ูุฏุนู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UpdateCapture ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุฐู ูุชุญูู ูู ูููู SceneCapture.</font></font><br><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅููู ููููุฉ ุนูู ุงูุชุญุฏูุซ ุงูุนุงููู ุฏุงุฎู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UpdatePortalsInWorld ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   <b></b>   (    ) </li><li style=";text-align:right;direction:rtl">   <b>iterator</b> ,         </li><li style=";text-align:right;direction:rtl">     ,   ,    <b>ClearRTT()</b> ,    .    <b> </b> (,   ). </li><li style=";text-align:right;direction:rtl">  ,     <b></b>  ,    ,     ,     . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญูู ุงูุฐู ูุญุฏุฏ ุตุญุฉ ุงูุจูุงุจุฉ ุจุณูุท: ูุนุทู ุงูุฃููููุฉ ููุจูุงุจุฉ ุงูุฃูุฑุจ ุฅูู ุงููุดุบู ุ ูุฃูู ูู ุงููุฑุฌุญ ุฃู ูููู ุงูุฃูุซุฑ ูุถูุญูุง ูู ูุฌูุฉ ูุธุฑู. </font><font style="vertical-align: inherit;">ูุฅุณูุงุท ุงูุฃูุงุฑุจ ุ ูููู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงูุจูุงุจุงุช ุงูููุฌูุฏุฉ ุฎูู ุงููุดุบู ุ ุณุชููู ููุงู ุญุงุฌุฉ ุฅูู ุฅุฌุฑุงุก ุงุฎุชุจุงุฑุงุช ุฃูุซุฑ ุชุนููุฏูุง ุ ููููู ูู ุฃุฑุบุจ ูู ุงูุชุฑููุฒ ุนูู ุฐูู ูู ุชุนูููู ุ ูุฃูู ูุฏ ูุตุจุญ ุฃูุฑูุง ุตุนุจูุง ููุบุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">AExedrePortal* AExedrePortalManager::UpdatePortalsInWorld() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ControllerOwner == <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>; } AExedreCharacter* Character = ControllerOwner-&gt;GetCharacter(); <span class="hljs-comment"><span class="hljs-comment">//----------------------------------- //Update Portal actors in the world (and active one if nearby) //----------------------------------- AExedrePortal* ActivePortal = nullptr; FVector PlayerLocation = Character-&gt;GetActorLocation(); FVector CameraLocation = Character-&gt;GetCameraComponent()-&gt;GetComponentLocation(); float Distance = 4096.0f; for( TActorIterator&lt;AExedrePortal&gt;ActorItr( GetWorld() ); ActorItr; ++ActorItr ) { AExedrePortal* Portal = *ActorItr; FVector PortalLocation = Portal-&gt;GetActorLocation(); FVector PortalNormal = -1 * Portal-&gt;GetActorForwardVector(); //Reset Portal Portal-&gt;ClearRTT(); Portal-&gt;SetActive( false ); //Find the closest Portal when the player is Standing in front of float NewDistance = FMath::Abs( FVector::Dist( PlayerLocation, PortalLocation ) ); if( NewDistance &lt; Distance ) { Distance = NewDistance; ActivePortal = Portal; } } return ActivePortal; }</span></span></code> </pre> <br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุญุงู ุงูููุช ูููุธุฑ ูู ูุธููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UpdateCapture ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐู ููุฒุฉ ุชุฑููุฉ ุชูุชูุท ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุจูุงุจุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุชุนูููุงุช ูุฌุจ ุฃู ูููู ูู ุดูุก ูุงุถุญูุง ุ ูููู ุฅููู ูุตู ููุฌุฒ:</font></font><br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุตู ุนูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูุงุจุท</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู ุงูุญุฑู ููุดุบู ุงูุชุญูู.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญูู ููุง </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูู ุดูุก ุตุญูุญูุง</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Portal ุ ูููู SceneCapture ุ ุงููุดุบู).</font></font></li><li style=";text-align:right;direction:rtl">   <b>Camera</b>    <b>Target</b>  . </li><li style=";text-align:right;direction:rtl"> <b></b>    ,     SceneCapture. </li><li style=";text-align:right;direction:rtl">      SceneCapture     Target. </li><li style=";text-align:right;direction:rtl"> ,  SceneCapure  ,  ,   <b></b> . </li><li style=";text-align:right;direction:rtl"> <b> Render Target</b>  SceneCapture,  . </li><li style=";text-align:right;direction:rtl">  <b> </b>  PlayerController. </li><li style=";text-align:right;direction:rtl"> ,    <b>Capture</b>  SceneCapture     . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุง ูููููุง ุฃู ูุฑู ุ ุนูุฏ ุงูููู ุนู ุจุนุฏ ููุงุนุจ ุ ูุฅู ุงูุนูุตุฑ ุงูุฃุณุงุณู ูู ุงูุณููู ุงูุทุจูุนู ุงูุฐู ูุง ุชุดูุจู ุดุงุฆุจุฉ ูู SceneCapture ูู ุงูุชุญูู ุงูุตุญูุญ ูููุถุน ูุชุฏููุฑ ุงูุจูุงุจุฉ ุฅูู ุงููุถุงุก ุงููุณุชูุฏู ุงููุญูู. </font></font><br><br><blockquote style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุญุตูู ุนูู ุชุนุฑูู ConvertLocationToActorSpace () ุ ุฑุงุฌุน "ุงูููู ุนู ุจุนุฏ ูู ููุซู". </font></font></blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedrePortalManager::UpdateCapture( AExedrePortal* Portal ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ControllerOwner == <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } AExedreCharacter* Character = ControllerOwner-&gt;GetCharacter(); <span class="hljs-comment"><span class="hljs-comment">//----------------------------------- //Update SceneCapture (discard if there is no active portal) //----------------------------------- if(SceneCapture != nullptr &amp;&amp; PortalTexture != nullptr &amp;&amp; Portal != nullptr &amp;&amp; Character != nullptr ) { UCameraComponent* PlayerCamera = Character-&gt;GetCameraComponent(); AActor* Target = Portal-&gt;GetTarget(); //Place the SceneCapture to the Target if( Target != nullptr ) { //------------------------------- //Compute new location in the space of the target actor //(which may not be aligned to world) //------------------------------- FVector NewLocation = UTool::ConvertLocationToActorSpace( PlayerCamera-&gt;GetComponentLocation(), Portal, Target ); SceneCapture-&gt;SetWorldLocation( NewLocation ); //------------------------------- //Compute new Rotation in the space of the //Target location //------------------------------- FTransform CameraTransform = PlayerCamera-&gt;GetComponentTransform(); FTransform SourceTransform = Portal-&gt;GetActorTransform(); FTransform TargetTransform = Target-&gt;GetActorTransform(); FQuat LocalQuat = SourceTransform.GetRotation().Inverse() * CameraTransform.GetRotation(); FQuat NewWorldQuat = TargetTransform.GetRotation() * LocalQuat; //Update SceneCapture rotation SceneCapture-&gt;SetWorldRotation( NewWorldQuat ); //------------------------------- //Clip Plane : to ignore objects between the //SceneCapture and the Target of the portal //------------------------------- SceneCapture-&gt;ClipPlaneNormal = Target-&gt;GetActorForwardVector(); SceneCapture-&gt;ClipPlaneBase = Target-&gt;GetActorLocation() + (SceneCapture-&gt;ClipPlaneNormal * -1.5f); //Offset to avoid visible pixel border } //Switch on the valid Portal Portal-&gt;SetActive( true ); //Assign the Render Target Portal-&gt;SetRTT( PortalTexture-&gt;GetTexture() ); SceneCapture-&gt;TextureTarget = PortalTexture-&gt;GetTexture(); //Get the Projection Matrix SceneCapture-&gt;CustomProjectionMatrix = ControllerOwner-&gt;GetCameraProjectionMatrix(); //Say Cheeeeese ! SceneCapture-&gt;CaptureScene(); } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุงุฆู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetCameraProjectionMatrix ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุงูุชุฑุงุถูุฉ ูู ูุฆุฉ PlayerController ูุง ูุฌูุฏ ููุงุ ูุฃุถูุช ุจููุณู. </font><font style="vertical-align: inherit;">ูู ูุจูู ุฃุฏูุงู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">FMatrix AExedrePlayerController::GetCameraProjectionMatrix() { FMatrix ProjectionMatrix; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( GetLocalPlayer() != <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ) { FSceneViewProjectionData PlayerProjectionData; GetLocalPlayer()-&gt;GetProjectionData( GetLocalPlayer()-&gt;ViewportClient-&gt;Viewport, EStereoscopicPass::eSSP_FULL, PlayerProjectionData ); ProjectionMatrix = PlayerProjectionData.ProjectionMatrix; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ProjectionMatrix; }</code> </pre> <br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎูุฑูุง ุ ูุญุชุงุฌ ุฅูู ุชูููุฐ ุงูุฏุนูุฉ ุฅูู ูุธููุฉ ุงูููู ุงููุถุงุฆู. </font><font style="vertical-align: inherit;">ุณุจุจ ุงููุนุงูุฌุฉ ุงูุฌุฒุฆูุฉ ููููู ุนู ุจุนุฏ ูู ุฎูุงู Portal Manager ูู ุฃูู ูู ุงูุถุฑูุฑู ุถูุงู ุชุญุฏูุซ ุงูุจูุงุจุงุช ุงูุถุฑูุฑูุฉ ุ ูุฃู Manager ููุท ูุฏูู ูุนูููุงุช ุญูู ุฌููุน ุงูุจูุงุจุงุช ุงูููุฌูุฏุฉ ูู ุงููุดูุฏ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูุฏููุง ุจูุงุจุชุงู ูุชุตูุชุงู ุ ูุนูุฏ ุงูุชุจุฏูู ูู ูุงุญุฏ ุฅูู ุขุฎุฑ ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุซ ููุงููุง ูู ุนูุงูุฉ ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ุจุฎูุงู ุฐูู ุ ุณูููู ุงููุดุบู ุจุงูุงุชุตุงู ุนู ุจุนุฏ ูุณูููู ุนูู ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุจูุงุจุฉ ุ ููู ุงูุจูุงุจุฉ ุงููุฏู ูู ุชููู ูุดุทุฉ ุญุชู ุงูุฅุทุงุฑ / ุงูุชุฏุจูุฑ ุงูุชุงูู. </font><font style="vertical-align: inherit;">ุณูุคุฏู ุฐูู ุฅูู ุฅูุดุงุก ูุฌูุงุช ูุฑุฆูุฉ ูุน ูุงุฏุฉ ุงูุฅุฒุงุญุฉ ูุดุจูุฉ ุงูุทุงุฆุฑุฉ ุงูุชู ุฑุฃููุงูุง ุฃุนูุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedrePortalManager::RequestTeleportByPortal( AExedrePortal* Portal, AActor* TargetToTeleport ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( Portal != <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> &amp;&amp; TargetToTeleport != <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ) { Portal-&gt;TeleportActor( TargetToTeleport ); <span class="hljs-comment"><span class="hljs-comment">//----------------------------------- //Force update //----------------------------------- AExedrePortal* FuturePortal = UpdatePortalsInWorld(); if( FuturePortal != nullptr ) { FuturePortal-&gt;ForceTick(); //Force update before the player render its view since he just teleported UpdateCapture( FuturePortal ); } } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุณููุง ุ ูุฐุง ูู ุดูุก ุ ููุฏ ุงูุชูููุง ุฃุฎูุฑูุง ูู Portal Manager! </font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุงูุชูุงุก ูู ูุฎุทุท </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุงูุงูุชูุงุก ูู Portal Manager ุ ูุญุชุงุฌ ููุท ุฅูู ุฅููุงู ููุซู Portal ููุณู ุ ูุจุนุฏ ุฐูู ุณูุนูู ุงููุธุงู. </font><font style="vertical-align: inherit;">ุงูุดูุก ุงููุญูุฏ ุงูููููุฏ ููุง ูู ููุฒุงุช ุงูุชุฌุฒุฆุฉ:</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/455/bd3/f0f/455bd3f0f3b7c9f4f3fb36d5d1ae85d0.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅููู ููู ุชุนูู: </font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ูููู ุจุชุญุฏูุซ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงุฏ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุญูุซ ูุง ุชุจูู ูู ุญุงูุฉ ูุดุทุฉ.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงููููุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุบูุฑ ูุดุท</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุงูููุง </font><font style="vertical-align: inherit;">ุ ูุณูุชู ุชุฌุงูู ุงูุฌุฒุก ุงููุชุจูู ูู ุงูุฅุฌุฑุงุก.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุตู ุนูู ูุฆุฉ ุงูุฃุญุฑู ูููุตูู ุฅูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุน ุงููุงููุฑุง</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญูู ุงูุฌุฒุก ุงูุฃูู ููุง ุฅุฐุง ูุงูุช ุงููุงููุฑุง ูู ูุฑุจุน ุงูุชุตุงุฏู ุงูุฎุงุต ุจุงูุจูุงุจุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงูุฅุฌุงุจุฉ ุจูุนูุ ุซู ููุชูู ุดุจูุฉ ุงูุจูุงุจุฉ ูู ุฎูุงู ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงุฏ A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก ุงูุซุงูู ูู ุฅุนุงุฏุฉ ุงูุชุญูู ูู ุงููููุน ุฏุงุฎู ูุฑุจุน ุงูุชุตุงุฏู. </font><font style="vertical-align: inherit;">ุฅุฐุง ุชู ุชูููุฐู ุ ูุฅููุง ูุฏุนู ุงูุฏุงูุฉ ุงูุชู ุชุญูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุฅุฐุง ููุง ูุนุจุฑ ุงูุจูุงุจุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li style=";text-align:right;direction:rtl">        ,   Portal manager,    <b> Teleport</b> . </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุทุฉ ุดุงุดุฉ ุงูุฑุณู ุงูุจูุงูู ุงูุฎุงุต ุจู ุ ููููู ููุงุญุธุฉ ููุทุชูู ูููุชูู: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is Point Inside Box</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get Portal Manager</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู ุฃุดุฑุญ ุจุนุฏ ูุงุชูู ุงููุธููุชูู. ูุฐู ูุธุงุฆู ุซุงุจุชุฉ ููุช ุจุชุนุฑูููุง ูู ุตูู ุญุชู ุชุชููู ูู ุงูุงุชุตุงู ุจูุง ูู ุฃู ููุงู. ูุฐุง ูู ููุน ูู ุงูุฏุฑุฌุฉ ุงููุณุงุนุฏ. ูุธูุฑ ุฑูุฒ ูุฐู ุงููุธุงุฆู ุฃุฏูุงู ุ ูููููู ุฃูุช ุจููุณู ุชุญุฏูุฏ ููุงู ุฅุฏุฑุงุฌูุง. ุฅุฐุง ูู ุชูู ุจุญุงุฌุฉ ุฅูููุง ุฎุงุฑุฌ ูุธุงู ุงููุฏุฎู ุ ูููููู ุฅุฏุฑุงุฌูุง ูุจุงุดุฑุฉู ูู ูุฆุฉ ุงููุงุนู ูู Portal. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุจุฏุงูุฉ ุ ุฃุฑุฏุช ุงุณุชุฎุฏุงู ูุธุงู ุงูุชุตุงุฏู ููุนุซูุฑ ุนูู ุงููุงุนู portal ุฏุงุฎู ูุฑุจุน ุงูุชุตุงุฏู ุ ููู ุจุฏุง ูู ุฃูู ุบูุฑ ููุซูู ุจู ุจุฏุฑุฌุฉ ูุงููุฉ. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุจุฏู ูู ุฃู ูุฐู ุงูุทุฑููุฉ ุฃุณุฑุน ูู ุงูุงุณุชุฎุฏุงู ููุฏููุง ููุฒุฉ: ููู ุชุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฏูุฑุงู ุงูููุซู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsPointInsideBox</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( FVector Point, UBoxComponent* Box )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( Box != <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ) { <span class="hljs-comment"><span class="hljs-comment">//From : //https://stackoverflow.com/questions/52673935/check-if-3d-point-inside-a-box/52674010 FVector Center = Box-&gt;GetComponentLocation(); FVector Half = Box-&gt;GetScaledBoxExtent(); FVector DirectionX = Box-&gt;GetForwardVector(); FVector DirectionY = Box-&gt;GetRightVector(); FVector DirectionZ = Box-&gt;GetUpVector(); FVector Direction = Point - Center; bool IsInside = FMath::Abs( FVector::DotProduct( Direction, DirectionX ) ) &lt;= Half.X &amp;&amp; FMath::Abs( FVector::DotProduct( Direction, DirectionY ) ) &lt;= Half.Y &amp;&amp; FMath::Abs( FVector::DotProduct( Direction, DirectionZ ) ) &lt;= Half.Z; return IsInside; } else { return false; } }</span></span></code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">AExedrePortalManager* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetPortalManager</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( AActor* Context )</span></span></span><span class="hljs-function"> </span></span>{ AExedrePortalManager* Manager = <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>; <span class="hljs-comment"><span class="hljs-comment">//Retrieve the World from the Context actor if( Context != nullptr &amp;&amp; Context-&gt;GetWorld() != nullptr ) { //Find PlayerController AExedrePlayerController* EPC = Cast&lt;AExedrePlayerController&gt;( Context-&gt;GetWorld()-&gt;GetFirstPlayerController() ); //Retrieve the Portal Manager if( EPC != nullptr &amp;&amp; EPC-&gt;GetPortalManager() != nullptr ) { Manager = EPC-&gt;GetPortalManager(); } } return Manager; }</span></span></code> </pre> <br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก ุงูุฃุฎูุฑ ูู ููุซู Blueprint ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ForceTick</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุชุฐูุฑ ุฃูู ูุชู ุงุณุชุฏุนุงุก Force Tick ุนูุฏูุง ูุนุจุฑ ุงููุงุนุจ ุจูุงุจุฉ ูุง ูููุน ุจุฌุงูุจ ูุฏุฎู ุขุฎุฑ ูููู Portal Manager ุจูุฑุถ ุชุญุฏูุซ ุนููู. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ููููุง ุนู ุจูุนุฏ ุ ูููุณ ูู ุงูุถุฑูุฑู ุงุณุชุฎุฏุงู ููุณ ุงูุฑูุฒ ุ ูููููู ุงุณุชุฎุฏุงู ูุณุฎุชู ุงููุจุณุทุฉ:</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/cf3/562/22e/cf356222e9d9c81dc38c57d021e51a90.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุจุฏุฃ ุงูุนูููุฉ ุชูุฑูุจูุง ูู ููุณ ุงูููุช ูุซู ูุธููุฉ ุงูุชุฌุฒุฆุฉ ุ ููููุง ูููุฐ ุงูุฌุฒุก ุงูุฃูู ููุท ูู ุงูุชุณูุณู ุ ูุงูุฐู ูููู ุจุชุญุฏูุซ ุงููุงุฏุฉ. </font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงูุชูููุงุ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฑูุจุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูููุง ุจุชุทุจูู ูุธุงู ุงููุฏุฎู ูู ูุฐุง ุงููููุฐุฌ ุ ูุนูู ุงูุฃุฑุฌุญ ุณููุงุฌู ุงููุดููุฉ ุงูุชุงููุฉ:</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4c1/f2f/9f7/4c1f2f9f71e8ce213764d42dad1d20c3.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุงูุฐู ูุญุฏุซ ููุงุ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐุง gif ุ ููุชุตุฑ ูุนุฏู ุฅุทุงุฑุงุช ุงููุนุจุฉ ุนูู 6 ุฅุทุงุฑุงุช ูู ุงูุซุงููุฉ ูุฅุธูุงุฑ ุงููุดููุฉ ุจุดูู ุฃูุซุฑ ูุถูุญูุง. ูู ุฅุทุงุฑ ูุงุญุฏ ุ ูุฎุชูู ุงูููุนุจ ูุฃู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุงู ุงููุทุน</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Unreal Engine ูุนุชุจุฑู ุบูุฑ ูุฑุฆู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ุจุณุจุจ ุฅุฌุฑุงุก ุงูุงูุชุดุงู ูู ุงูุฅุทุงุฑ ุงูุญุงูู ุ ุซู ุงุณุชุฎุฏุงูู ูู ุงูุฅุทุงุฑ ุงูุชุงูู. ูุฐุง ูุฎูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฃุฎูุฑ ุฅุทุงุฑ ูุงุญุฏ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูููู ุญู ูุฐุง ุนุงุฏุฉู ุนู ุทุฑูู ุชูุณูุน ุงููุฑุจุน ุงููุญูุท ูููุงุฆู ุจุญูุซ ูุชู ุชุณุฌููู ูุจู ุฃู ูุตุจุญ ูุฑุฆููุง. ููุน ุฐูู ุ ูู ููุฌุญ ูุฐุง ููุง ุ ูุฃูู ุนูุฏูุง ูุนุจุฑ ุงูุจูุงุจุฉ ุ ูุฅููุง ููุชูู ูู ููุงู ุฅูู ููุงู ูุฎุชูู ุชูุงููุง.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุนุฐุฑ ุฃูุถูุง ุชุนุทูู ูุธุงู ุงููุทุน ุ ุฎุงุตุฉู ูุฃู ุฐูู ุณูุคุฏู ุฅูู ุงูุฎูุงุถ ูู ุงูุฃุฏุงุก ูู ุงููุณุชููุงุช ุงูุชู ุชุญุชูู ุนูู ุงูุนุฏูุฏ ูู ุงููุงุฆูุงุช. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุฌุฑุจุช ุงูุนุฏูุฏ ูู ูุฑู ูุญุฑู Unreal ุ ููู ูู ุฃุญุตู ุนูู ูุชุงุฆุฌ ุฅูุฌุงุจูุฉ: ูู ุฌููุน ุงูุญุงูุงุช ุ ุธู ุชุฃุฎูุฑ ุฅุทุงุฑ ูุงุญุฏ. ูุญุณู ุงูุญุธ ุ ุจุนุฏ ุฏุฑุงุณุฉ ููุตูุฉ ูููุฏ ูุตุฏุฑ Unreal Engine ุ ุชูููุช ูู ุฅูุฌุงุฏ ุญู (ุงููุณุงุฑ ุทููู - ุงุณุชุบุฑู ุงูุฃูุฑ ุฃูุซุฑ ูู ุฃุณุจูุน)! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูู ุงูุญุงู ูุน ูููู SceneCapture ุ ููููู ุฅุฎุจุงุฑ ูุงููุฑุง ุงููุดุบู ุจุฃููุง </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทุนูุง ููุฒุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ููุฒ ููุถุน ุงููุงููุฑุง ุจูู ุฅุทุงุฑูู ุ ููุง ูุนูู ุฃูู ูุง ูููููุง ุงูุงุนุชูุงุฏ ุนูู ูุนูููุงุช ุงูุฅุทุงุฑ ุงูุณุงุจู. </font><font style="vertical-align: inherit;">ูููู ููุงุญุธุฉ ูุฐุง ุงูุณููู ุนูุฏ ุงุณุชุฎุฏุงู Matinee ุฃู Sequencer ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ุชุจุฏูู ุงููุงููุฑุงุช: ูุง ูููู ูุทูุณ ุงูุญุฑูุฉ ุฃู ุงูุชูุนูู ุงูุงุนุชูุงุฏ ุนูู ูุนูููุงุช ูู ุงูุฅุทุงุฑ ุงูุณุงุจู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู ุงููุธุฑ ูู ุฌุงูุจูู:</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LocalPlayer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">ูุนุงูุฌ</font></b><font style="vertical-align: inherit;"> ูุฐุง ุงููุตู ุงููุนูููุงุช ุงููุฎุชููุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ูููุฐ ุนุฑุถ ุงููุดุบู) ููุฑุชุจุท ุจู PlayerController. </font><font style="vertical-align: inherit;">ูุฐุง ูู ุงูููุงู ุงูุฐู ูููููุง ููู ุงูุชุฃุซูุฑ ุนูู ุนูููุฉ ุนุฑุถ ูุงููุฑุง ุงููุงุนุจ.</font></font></li><li style=";text-align:right;direction:rtl"> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PlayerController</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนูุฏูุง ูููู ุงููุงุนุจ </font><b><font style="vertical-align: inherit;">ุจุงูุงุชุตุงู</font></b><font style="vertical-align: inherit;"> ุนู ุจุนุฏ ุ ุชุจุฏุฃ ูุฐู ุงููุฆุฉ ูู ุงูุฑุจุท ุจูุถู ุงููุตูู ุฅูู LocalPlayer.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุฒุฉ ุงููุจูุฑุฉ ููุฐุง ุงูุญู ูู ุฃู ุงูุชุฏุฎู ูู ุนูููุฉ ุชูุฏูู ุงููุญุฑู ูู ุงูุญุฏ ุงูุฃุฏูู ูุณูู ุงูุตูุงูุฉ ูู ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ ูู Unreal Engine. </font></font><br><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุจุฏุฃ ุจุฅูุดุงุก ูุฆุฉ ุฌุฏูุฏุฉ ููุฑูุซุฉ ูู LocalPlayer. </font><font style="vertical-align: inherit;">ููุฌุฏ ุฃุฏูุงู ุนููุงู ูุญุฏุฏ ุนูุตุฑูู ุฑุฆูุณููู: ุฅุนุงุฏุฉ ุชุญุฏูุฏ ุญุณุงุจุงุช Scene Viewport ููุธููุฉ ุฌุฏูุฏุฉ ูุงุณุชุฏุนุงุก ูุตู ุงููุงููุฑุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CoreMinimal.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Engine/LocalPlayer.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ExedreLocalPlayer.generated.h"</span></span></span><span class="hljs-meta"> UCLASS() class EXEDRE_API UExedreLocalPlayer : public ULocalPlayer { GENERATED_BODY() UExedreLocalPlayer(); public: FSceneView* CalcSceneView( class FSceneViewFamily* ViewFamily, FVector&amp; OutViewLocation, FRotator&amp; OutViewRotation, FViewport* Viewport, class FViewElementDrawer* ViewDrawer, EStereoscopicPass StereoPass) override; void PerformCameraCut(); private: bool bCameraCut; };</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅููู ููููุฉ ุชูููุฐ ูู ุดูุก: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Exedre.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ExedreLocalPlayer.h"</span></span></span><span class="hljs-meta"> UExedreLocalPlayer::UExedreLocalPlayer() { bCameraCut = false; } FSceneView* UExedreLocalPlayer::CalcSceneView( class FSceneViewFamily* ViewFamily, FVector&amp; OutViewLocation, FRotator&amp; OutViewRotation, FViewport* Viewport, class FViewElementDrawer* ViewDrawer, EStereoscopicPass StereoPass) { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// ULocalPlayer::CalcSceneView() use a ViewInitOptions to create // a FSceneView which contains a "bCameraCut" variable // See : H:\GitHub\UnrealEngine\Engine\Source\Runtime\Renderer\Private\SceneCaptureRendering.cpp // as well for bCameraCutThisFrame in USceneCaptureComponent2D FSceneView* View = Super::CalcSceneView(ViewFamily, OutViewLocation, OutViewRotation, Viewport, ViewDrawer, StereoPass ); if( bCameraCut ) { View-&gt;bCameraCut = true; bCameraCut = false; } return View; } void UExedreLocalPlayer::PerformCameraCut() { bCameraCut = true; }</span></span></span></span></code> </pre> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PerformCameraCut ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุท ูุจุฏุฃ Camera Cut ุจูููุฉ ููุทููุฉ. </font><font style="vertical-align: inherit;">ุนูุฏูุง ูููู ุงููุญุฑู ุจุงุณุชุฏุนุงุก ูุธููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CalcSceneView ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููู ุฃููุงู ุจุชุดุบูู ุงููุธููุฉ ุงูุฃุตููุฉ. </font><font style="vertical-align: inherit;">ุซู ูุชุญูู ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุฃุฏุงุก ุงูุฅูุชุตุงู </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุฅููุง ูุนูุฏ ุชุนุฑูู ูุชุบูุฑ Camera Cut Boolean ุฏุงุฎู ุจููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FSceneView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุฐู ุณูุชู ุงุณุชุฎุฏุงูู ุจูุงุณุทุฉ ุนูููุฉ ุชูุฏูู ุงููุญุฑู ุ ุซู ุฅุนุงุฏุฉ ุชุนููู ุงููุชุบูุฑ Boolean (ุงุณุชุฎุฏุงูู).</font></font><br><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุฌุงูุจ ูุญุฏุฉ ุชุญูู ุงููุดุบู ุ ุชููู ุงูุชุบููุฑุงุช ุถุฆููุฉ. </font><font style="vertical-align: inherit;">ุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ูุชุบูุฑ ุฅูู ุงูุฑุฃุณ ูุชุฎุฒูู ุฑุงุจุท ุฅูู ุงููุฆุฉ ุงููุญููุฉ ูู LocalPlayer:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> UPROPERTY() UExedreLocalPlayer* LocalPlayer;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู ูู ุงูุฏุงูุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BeginPlay ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> LocalPlayer = Cast&lt;UExedreLocalPlayer&gt;( GetLocalPlayer() );</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฏ ุฃุถูุช ุฃูุถูุง ูุธููุฉ ูุฅุทูุงู Cut ุจุณุฑุนุฉ: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedrePlayerController::PerformCameraCut() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( LocalPlayer != <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ) { LocalPlayer-&gt;PerformCameraCut(); } }</code> </pre> <br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎูุฑูุง ุ ูู ูุธููุฉ Portal Manager </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RequestTeleportByPortal () ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููููุง ุชูููุฐ ุฃุซูุงุก ุงูููู ุนู ุจุนุฏ ูู Camera Cut:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AExedrePortalManager::RequestTeleportByPortal( AExedrePortal* Portal, AActor* TargetToTeleport ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( Portal != <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> &amp;&amp; TargetToTeleport != <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ControllerOwner != <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> ) { ControllerOwner-&gt;PerformCameraCut(); } [...]</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฐุง ูู ุดูุก! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุงุณุชุฏุนุงุก Camera Cut ูุจู ุชุญุฏูุซ SceneCapture ุ ููุฐุง ูู ุงูุณุจุจ ูู ุจุฏุงูุฉ ุงููุธููุฉ.</font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุชูุฌุฉ ุงูููุงุฆูุฉ </font></font></h2><br> <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุชุนูููุง ุงูุชูููุฑ ูู ุงูุจูุงุจุงุช. </font></font></a></em> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงููุธุงู ูุนูู ุจุดูู ุฌูุฏ ุ ููุฌุจ ุฃู ูููู ูุงุฏุฑูู ุนูู ุฅูุดุงุก ูุฐู ุงูุฃุดูุงุก:</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5a9/47f/229/5a947f2299f45d3deab4cfc258045cc1.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฐุง ููุช ุชูุงุฌู ูุดููุงุช ุ ูุนููู ุงูุชุญูู ููุง ููู: </font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญูู ูู ุฅูุดุงุก Portal Manager ูุชููุฆุชู ุจุดูู ุตุญูุญ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชู ุฅูุดุงุก ูุฏู ุงูุชุฌุณูุฏ ุจุดูู ุตุญูุญ (ููููู ุงุณุชุฎุฏุงู ุงููุฏู ุงูุฐู ุชู ุฅูุดุงุคู ูู ูุชุตูุญ ุงููุญุชูู ููุจุฏุก). </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชู ุชูุดูุท ุงูุจูุงุจุงุช ูุฅูุบุงุก ุชูุดูุทูุง ุจุดูู ุตุญูุญ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุชูู ุงููุฏุงุฎู ุนูู ุชุนููู ุงููุงุนู ุงููุฏู ุจุดูู ุตุญูุญ ูู ุงููุญุฑุฑ. </font></font></li></ul><br><h2 style=";text-align:right;direction:rtl">  ุณุคุงู ูุฌูุงุจ </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุณุฆูุฉ ุงูุฃูุซุฑ ุดููุนูุง ุงูุชู ุทูุฑุญุช ุนูู ุญูู ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูู ุงููููู ุชุทุจูู ุฐูู ุนูู ุงูุฃุฎุทุงุก ุ ูููุณ ูู ุฎูุงู C ++ุ </font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุชูููุฐ ุงูุฌุฒุก ุงูุฃูุจุฑ ูู ุงูููุฏ ูู ุญุงูุงุช ุบูุฑ ูุงุถุญุฉ ุ ุจุงุณุชุซูุงุก ุฌุงูุจูู:</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุชููุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธููุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> LocalPlayer </font><b><font style="vertical-align: inherit;">GetProjectionData ()</font></b><font style="vertical-align: inherit;"> ุงููุณุชุฎุฏูุฉ ููุญุตูู ุนูู ูุตูููุฉ ุงูุฅุณูุงุท ูู ุงููุฎุทุทุงุช.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุชููุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธููุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> LocalPlayer </font><b><font style="vertical-align: inherit;">CalcSceneView ()</font></b><font style="vertical-align: inherit;"> ุ ุงูุชู ุชุนุฏ ูููุฉ ููุบุงูุฉ ูุญู ูุดููุฉ ูุธุงู ุงููุทุน ุ ูู ุงููุฎุทุทุงุช.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ุ ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุชุทุจูู C ++ ูููุตูู ุฅูู ูุงุชูู ุงููุธููุชูู ุ ุฃู ุชุนุฏูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑ ูููุญุฑู ูุฌุนููุง ูู ูุชูุงูู ูู ุฎูุงู ุงููุฎุทุทุงุช. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูููููู ุงุณุชุฎุฏุงู ูุฐุง ุงููุธุงู ูู ุงููุงูุน ุงูุงูุชุฑุงุถูุ </font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนู ุ ูู ุงูุบุงูุจ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุณูุชุนูู ุชูููู ุจุนุถ ุงูุฃุฌุฒุงุก ุ ุนูู ุณุจูู ุงููุซุงู:</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู Render Targets (ูุฏู ููู ุนูู) ูููุงุนูู ูู ูุงุฏุฉ ูููุน ุงูุจูุงุจุฉ ูุนุฑุถู ุฌูุจูุง ุฅูู ุฌูุจ ูู ูุณุงุญุฉ ุงูุดุงุดุฉ. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูููู ูู ูุฏู ูุณุชูุฏู ูุตู ุนุฑุถ ุฏูุฉ ุฌูุงุฒ VR.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃูุช ุจุญุงุฌุฉ ุฅูู ุงุณุชุฎุฏุงู ููุธุฑูู SceneCapture ูุชูุฏูู ุงููุฏู ุจุงููุณุงูุฉ ุงูุตุญูุญุฉ (ุงููุณุงูุฉ ุจูู ุงูุนูููู) ูุฅูุดุงุก ุชุฃุซูุฑุงุช ูุฌุณูุฉ. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชููู ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ูู ุงูุฃุฏุงุก ุ ูุฃู ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุจูุงุจุฉ ุณูุชุนูู ุชูุฏููู ูุฑุชูู. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ูุงุฆู ุขุฎุฑ ุนุจูุฑ ุงูุจูุงุจุฉุ</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ููุฌุฏ ูู ุงูููุฏ ููุน ุฐูู ุ ุฌุนููุง ุฃูุซุฑ ุนููููุฉ ููุณุช ุตุนุจุฉ ููุบุงูุฉ. ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุงููุฏุฎู ุฅูู ุชุชุจุน ูุฒูุฏ ูู ุงููุนูููุงุช ุญูู ุฌููุน ุงููุงุฆูุงุช ุงููุฑูุจุฉ ูู ุฃุฌู ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ุชุนุจุฑู. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฏุนู ุงููุธุงู ุงูุนูุฏูุฉ (ุงููุฏุฎู ุฏุงุฎู ุงููุฏุฎู)ุ</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ููุณ ูุฐูู. ููุชูุฑุงุฑ ุ ุชุญุชุงุฌ ุฅูู ุชูุฏูู ูุฏู ุฅุถุงูู ู SceneCapture. ุณูููู ูู ุงูุถุฑูุฑู ุฃูุถูุง ุชุญุฏูุฏ RenderTarget ุงูุฐู ุณูุชู ุชูุฏููู ุฃููุงู ุ ูููุฐุง. ูุฐุง ุตุนุจ ููุบุงูุฉ ููู ุฃุฑุบุจ ูู ุงูููุงู ุจุฐูู ุ ูุฃู ูุฐุง ููุณ ุถุฑูุฑููุง ุจุงููุณุจุฉ ููุดุฑูุนู. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูููููู ุนุจูุฑ ุงูุจูุงุจุฉ ุจุงููุฑุจ ูู ุงูุฌุฏุงุฑุ</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุก ุงูุญุธ ุ ูุง. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุฃุฑู ุทุฑููุชูู ูุชูููุฐ ูุฐุง (ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ):</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุชุนุทูู ุชุตุงุฏู ุงููุงุนุจ ุญุชู ูุชููู ูู ุงููุฑูุฑ ุนุจุฑ ุงูุฌุฏุฑุงู. </font><font style="vertical-align: inherit;">ุฅูู ุณูู ุงูุชูููุฐ ุ ููููู ุณูุคุฏู ุฅูู ุงูุนุฏูุฏ ูู ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ.</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุฑู ูุธุงู ุงูุชุตุงุฏู ูุฅูุดุงุก ุซูุจ ุฏููุงูููู ุ ููุง ุณูุณูุญ ููุงุนุจ ุจุงููุฑูุฑ. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุชุญุชุงุฌ ุฅูู ุชุนุฏูู ุงููุธุงู ุงููุนูู ูููุญุฑู. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุจูุงุกู ุนูู ูุง ุฃุนุฑู ุ ุจุนุฏ ุชุญููู ุงููุณุชูู ุ ูุง ูููู ุชุญุฏูุซ ุงูููุฒูุงุก ุงูุซุงุจุชุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุฏุนู ูุฐู ุงูููุฒุฉ ุณูู ูุชุทูุจ ุงููุซูุฑ ูู ุงูุนูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงูุจูุงุจุงุช ุงูุฎุงุตุฉ ุจู ุซุงุจุชุฉ ุ ููู ุงููุญุชูู ุฃู ุชุชููู ูู ุงูุชุบูุจ ุนูู ูุฐู ุงููุดููุฉ ุจุงุณุชุฎุฏุงู ุชุฏูู ุงููุณุชูู ููุชุจุฏูู ุจูู ุงูุชุตุงุฏูุงุช ุงููุฎุชููุฉ.</font></font></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar448802/">https://habr.com/ru/post/ar448802/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar448780/index.html">ูุง ูุนุทู ุจุฑูุงูุฌ ููุชุฌููุฏ ูู ุงููุงู</a></li>
<li><a href="../ar448788/index.html">ุจูุซูู ุงุฎุชุจุงุฑ ูุน pytest. ุงููุตู 2 ุ ูุธุงุฆู ุงุฎุชุจุงุฑ ุงููุชุงุจุฉ</a></li>
<li><a href="../ar448790/index.html">SpaceVIL ูู ุฅุทุงุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุณูููุฉ ุนุจุฑ ููุตุฉ ูุชุทููุฑ .Net Core ู .Net Standard ู JVM</a></li>
<li><a href="../ar448794/index.html">ุจูุซูู ุงุฎุชุจุงุฑ ูุน pytest. ุงูุฅุถุงูุงุช ุงููุตู 5</a></li>
<li><a href="../ar448800/index.html">ูู ุจุชูููู Visual Studio ุนุจุฑ ูุคุณุณุชู ุจุงุณุชุฎุฏุงู .vsconfig</a></li>
<li><a href="../ar448804/index.html">ุงูุญุตูู ุนูู ุงุณุชุนุฏุงุฏ ูููุช ุชุดุบูู ูุงู ุชุตูุจ ููุงุชุจ ุงูุนุฏู</a></li>
<li><a href="../ar448806/index.html">ุฅูุดุงุก ูุธุงู ููุญู ุนูู ููุชุจุฉ Qt</a></li>
<li><a href="../ar448808/index.html">ุนู ุฃุดูุงุก ุจุณูุทุฉ ููุนูุฏุฉ. "ุงูููู ุงูุตูุจ". ููููุฉ ุดุญู ุงูุจุฑุงุบู ุงูุตุฏุฆุฉ ุฃู ุบูุฑ WD-40 ูุน ููุฑุฏุฉ ...</a></li>
<li><a href="../ar448810/index.html">ููู ูุจุถ ุนูู ุงููุชุณูู</a></li>
<li><a href="../ar448812/index.html">ุงููููุฉ ุงูููุฑูุฉ "Bereshit" - ุงูุจุญุซ ุนู ุฃูู ููุชุจุฉ ููุฑูุฉ ุจุนุฏ ุจุฏุก ุญุงุฏุซุฉ ุดุฑูุฉ ุงูููู ุงูุฎุงุตุฉ ุจูุง</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>