<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôáüèæ ‚òùüèΩ üç¥ Unit Fairy Magic Fairy: DSL en C # üò¢ üëåüèª üëé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Combien de fois est-il arriv√© que lorsque vous √©crivez un test unitaire de travail, vous regardez son code, et est-ce ... mauvais? Et vous pensez comm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Unit Fairy Magic Fairy: DSL en C #</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/451598/">  Combien de fois est-il arriv√© que lorsque vous √©crivez un test unitaire de travail, vous regardez son code, et est-ce ... mauvais?  Et vous pensez comme √ßa: "Ceci est un test, laissez-le comme √ßa ...".  Non,% username%, alors ne le quittez pas.  Les tests sont une partie importante du syst√®me qui fournit un support de code, et il est tr√®s important que cette partie soit √©galement prise en charge.  Malheureusement, nous n'avons pas beaucoup de moyens de garantir cela (nous n'√©crirons pas de tests pour les tests), mais il en reste quelques-uns. <br><br><img src="https://habrastorage.org/webt/9_/cb/xb/9_cbxb0psq2mvlfwzkxf0uvpwru.png"><a name="habracut"></a><br>  Dans notre √©cole de d√©veloppeurs Dodo DevSchool, nous soulignons, entre autres, les crit√®res suivants pour un bon test: <br><br><ul><li>  reproductibilit√©: l'ex√©cution de tests sur le m√™me code et la m√™me entr√©e conduit toujours au m√™me r√©sultat; </li><li>  concentration: il ne devrait y avoir qu'une seule raison pour que le test tombe; </li><li>  compr√©hensibilit√©: eh bien, ici c'est clair.  :) </li></ul><br>  Comment appr√©ciez-vous un tel test au regard de ces crit√®res? <br><br><pre><code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Fact</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AcceptOrder_Successful</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ingredient1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Ingredient(<span class="hljs-string"><span class="hljs-string">"Ingredient1"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ingredient2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Ingredient(<span class="hljs-string"><span class="hljs-string">"Ingredient2"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ingredient3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Ingredient(<span class="hljs-string"><span class="hljs-string">"Ingredient3"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> order = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Order(DateTime.Now); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> product1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Product(<span class="hljs-string"><span class="hljs-string">"Pizza1"</span></span>); product1.AddIngredient(ingredient1); product1.AddIngredient(ingredient2); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> orderLine1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrderLine(product1, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">500</span></span>); order.AddLine(orderLine1); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> product2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Product(<span class="hljs-string"><span class="hljs-string">"Pizza2"</span></span>); product2.AddIngredient(ingredient1); product2.AddIngredient(ingredient3); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> orderLine2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrderLine(product2, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">650</span></span>); order.AddLine(orderLine2); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> orderRepositoryMock = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mock&lt;IOrderRepository&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ingredientsRepositoryMock = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mock&lt;IIngredientRepository&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> service = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PizzeriaService(orderRepositoryMock.Object, ingredientsRepositoryMock.Object); service.AcceptOrder(order); orderRepositoryMock.Verify(r =&gt; r.Add(order), Times.Once); ingredientsRepositoryMock.Verify(r =&gt; r.ReserveIngredients(order), Times.Once); }</code> </pre> <br>  Pour moi - tr√®s mauvais. <br><br>  C'est incompr√©hensible: par exemple, je ne peux m√™me pas allouer les blocs Arranger, Act et Assert. <br><br>  Illisible: la propri√©t√© DateTime.Now est utilis√©e.  Et enfin, il est flou, car  a 2 raisons √† la chute: les appels aux m√©thodes de deux r√©f√©rentiels sont v√©rifi√©s. <br><br>  De plus, bien que la d√©nomination des tests d√©passe le cadre de cet article, je reste attentif au nom: avec un tel ensemble de propri√©t√©s n√©gatives, il est difficile de le formuler de telle mani√®re qu'en regardant le nom du test, une personne ext√©rieure comprenne imm√©diatement pourquoi ce test est g√©n√©ralement dans le projet. <br><blockquote>  Si vous ne pouvez pas nommer le test de mani√®re concise, alors quelque chose ne va pas avec le test. </blockquote>  Puisque le test est incompr√©hensible, disons ce qui s'y passe: <br><br><ol><li>  Les ingr√©dients sont cr√©√©s. </li><li>  √Ä partir des ingr√©dients, des produits (pizzas) sont cr√©√©s. </li><li>  Une commande est cr√©√©e √† partir des produits. </li><li>  Un service est cr√©√© pour lequel les r√©f√©rentiels sont mouill√©s. </li><li>  La commande est pass√©e √† la m√©thode AcceptOrder du service. </li><li>  Il est v√©rifi√© que les m√©thodes Add et ReserveIngredients des r√©f√©rentiels respectifs ont √©t√© appel√©es. </li></ol><br>  Alors, comment pouvons-nous am√©liorer ce test?  Vous devez essayer de ne laisser dans le corps du test que ce qui est vraiment important.  Et pour cela, des gens intelligents comme Martin Fowler et Rebecca Parsons sont venus avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DSL (Domain Specific Language)</a> .  Ici, je vais parler des mod√®les DSL que nous utilisons chez Dodo pour nous assurer que nos tests unitaires sont doux et soyeux, et les d√©veloppeurs se sentent en confiance tous les jours. <br><br>  Le plan est le suivant: nous allons d'abord rendre ce test compr√©hensible, puis nous travaillerons sur la reproductibilit√© et finirons par le rendre cibl√©.  Nous avons conduit ... <br><br><h2>  √âlimination des ingr√©dients (objets de domaine pr√©d√©finis) </h2><br>  Commen√ßons par le bloc de cr√©ation de commande.  La commande est l'une des entit√©s du domaine central.  Ce serait cool si nous pouvions d√©crire l'ordre de telle mani√®re que m√™me les personnes qui ne savent pas √©crire du code mais comprennent la logique du domaine peuvent comprendre quel type d'ordre nous cr√©ons.  Pour ce faire, tout d'abord, nous devons abandonner l'utilisation de l'abr√©g√© "Ingr√©dient1" et "Pizza1" en les rempla√ßant par de vrais ingr√©dients, pizzas et autres objets du domaine. <br><br>  Le premier candidat √† l'optimisation est les ingr√©dients.  Tout est simple avec eux: ils n'ont besoin d'aucune personnalisation, juste un appel au constructeur.  Il suffit de les mettre dans un conteneur s√©par√© et de les nommer pour qu'il soit clair pour les experts du domaine: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Ingredients</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Ingredient Dough = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Ingredient(<span class="hljs-string"><span class="hljs-string">"Dough"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Ingredient Pepperoni = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Ingredient(<span class="hljs-string"><span class="hljs-string">"Pepperoni"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Ingredient Mozzarella = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Ingredient(<span class="hljs-string"><span class="hljs-string">"Mozzarella"</span></span>); }</code> </pre><br>  Au lieu de l'ingr√©dient1, l'ingr√©dient2 et l'ingr√©dient3 compl√®tement insens√©s, nous avons obtenu la p√¢te, le pepperoni et la mozzarella. <br><blockquote>  Utilisez des objets de domaine pr√©d√©finis pour les entit√©s de domaine couramment utilis√©es. </blockquote><br><h2>  Constructeur de produits </h2><br>  L'entit√© de domaine suivante est les produits.  Tout est un peu plus compliqu√© avec eux: chaque produit est compos√© de plusieurs ingr√©dients et nous devrons les ajouter au produit avant utilisation. <br><br>  Ici, le bon vieux mod√®le Builder est tr√®s pratique.  Voici ma version de build pour le produit: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ProductBuilder</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Product _product; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProductBuilder</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> { _product = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Product(name); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProductBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Containing</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Ingredient ingredient</span></span></span><span class="hljs-function">)</span></span> { _product.AddIngredient(ingredient); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Product </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Please</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _product; } }</code> </pre><br>  Il se compose d'un constructeur param√©tr√©, d'une m√©thode <code>Containing</code> personnalis√©e et d'une m√©thode <code>Please</code> terminal.  Si vous n'aimez pas √™tre gentil avec le code, vous pouvez remplacer <code>Please</code> par <code>Now</code> .  Le g√©n√©rateur masque les constructeurs complexes et les appels de m√©thode qui configurent l'objet.  Le code devient plus propre et plus compr√©hensible.  Dans le bon sens, le constructeur devrait simplifier la cr√©ation de l'objet afin que le code soit clair pour l'expert du domaine.  Il est particuli√®rement utile d'utiliser un g√©n√©rateur pour les objets qui n√©cessitent une configuration avant de commencer le travail. <br><br>  Le constructeur de produits vous permettra de cr√©er des designs comme: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pepperoni = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductBuilder(<span class="hljs-string"><span class="hljs-string">"Pepperoni"</span></span>) .Containing(Ingredients.Dough) .Containing(Ingredients.Pepperoni) .Please();</code> </pre><br><blockquote>  Les builds vous aident √† cr√©er des objets qui n√©cessitent une personnalisation.  Envisagez de cr√©er un g√©n√©rateur m√™me si la configuration se compose d'une seule ligne. </blockquote><br><h2>  ObjectMother </h2><br>  Malgr√© le fait que la cr√©ation du produit est devenue beaucoup plus d√©cente, le concepteur du <code>new ProductBuilder</code> toujours l'air plut√¥t moche.  Corrigez-le avec le mod√®le ObjectMother (Father). <br><br>  Le mod√®le est simple comme 5 kopecks: nous cr√©ons une classe statique et rassemblons tous les constructeurs dedans. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Create</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ProductBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Product</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductBuilder(name); }</code> </pre><br>  Vous pouvez maintenant √©crire comme ceci: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pepperoni = Create.Product(<span class="hljs-string"><span class="hljs-string">"Pepperoni"</span></span>) .Containing(Ingredients.Dough) .Containing(Ingredients.Pepperoni) .Please();</code> </pre><br>  ObjectMother a √©t√© invent√© pour la cr√©ation d√©clarative d'objets.  De plus, cela aide √† introduire de nouveaux d√©veloppeurs dans le domaine, comme  lors de l'√©criture du mot <code>Create</code> IDE lui-m√™me vous dira ce que vous pouvez cr√©er dans ce domaine. <br><br>  Dans notre code, ObjectMother est parfois appel√© Non <code>Create</code> , mais <code>Given</code> .  J'aime les deux options.  Si vous avez d'autres id√©es, partagez-les dans les commentaires. <br><blockquote>  Pour cr√©er des objets de mani√®re d√©clarative, utilisez ObjectMother.  Le code deviendra plus propre et il sera plus facile pour les nouveaux d√©veloppeurs de se plonger dans le domaine. </blockquote><br><h2>  Retrait du produit </h2><br>  C'est devenu beaucoup mieux, mais les produits ont encore de la place pour grandir.  Nous avons un nombre limit√© de produits et, comme les ingr√©dients, ils peuvent √™tre collect√©s dans une classe distincte et non initialis√©s pour chaque test: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Pizza</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Product Pepperoni =&gt; Create.Product(<span class="hljs-string"><span class="hljs-string">"Pepperoni"</span></span>) .Containing(Ingredients.Dough) .Containing(Ingredients.Pepperoni) .Please(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Product Margarita =&gt; Create.Product(<span class="hljs-string"><span class="hljs-string">"Margarita"</span></span>) .Containing(Ingredients.Dough) .Containing(Ingredients.Mozzarella) .Please(); }</code> </pre><br>  Ici, j'ai appel√© le conteneur non pas des <code>Products</code> , mais de la <code>Pizza</code> .  Ce nom permet de lire le test.  Par exemple, cela aide √† supprimer les questions comme ¬´Le Pepperoni est-il une pizza ou une saucisse?¬ª. <br><blockquote>  Essayez d'utiliser des objets de domaine r√©els, pas des substituts comme Product1. </blockquote><br><h2>  Le constructeur de la commande (exemple au dos) </h2><br>  Maintenant, nous appliquons les mod√®les d√©crits pour cr√©er un g√©n√©rateur de commandes, mais maintenant, ne partons pas du g√©n√©rateur, mais de ce que nous aimerions recevoir.  Voici comment je souhaite cr√©er une commande: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> order = Create.Order .Dated(DateTime.Now) .With(Pizza.Pepperoni.CountOf(<span class="hljs-number"><span class="hljs-number">1</span></span>).For(<span class="hljs-number"><span class="hljs-number">500</span></span>)) .With(Pizza.Margarita.CountOf(<span class="hljs-number"><span class="hljs-number">1</span></span>).For(<span class="hljs-number"><span class="hljs-number">650</span></span>)) .Please();</code> </pre><br>  Comment pouvons-nous y parvenir?  Nous avons √©videmment besoin de constructeurs pour la commande et la ligne de commande.  Avec le constructeur pour commander, tout est limpide.  Le voici: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">OrderBuilder</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> DateTime _date; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> List&lt;OrderLine&gt; _lines = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;OrderLine&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> OrderBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dated</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DateTime date</span></span></span><span class="hljs-function">)</span></span> { _date = date; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> OrderBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">With</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">OrderLine orderLine</span></span></span><span class="hljs-function">)</span></span> { _lines.Add(orderLine); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Order </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Please</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> order = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Order(_date); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> line <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> _lines) { order.AddLine(line); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> order; } }</code> </pre><br>  Mais avec <code>OrderLine</code> situation est plus int√©ressante: premi√®rement, la m√©thode Please du terminal n'est pas appel√©e ici, et deuxi√®mement, l'acc√®s au g√©n√©rateur n'est pas fourni par le <code>Create</code> statique et non par le constructeur du constructeur lui-m√™me.  Nous allons r√©soudre le premier probl√®me en utilisant l' <code>implicit operator</code> et notre constructeur ressemblera √† ceci: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">OrderLineBuilder</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Product _product; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">decimal</span></span> _count; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">decimal</span></span> _price; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> OrderLineBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Of</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">decimal</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count, Product product</span></span></span><span class="hljs-function">)</span></span> { _product = product; _count = count; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> OrderLineBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">For</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">decimal</span></span></span></span><span class="hljs-function"><span class="hljs-params"> price</span></span></span><span class="hljs-function">)</span></span> { _price = price; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">implicit</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">operator</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OrderLine</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">OrderLineBuilder b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrderLine(b._product, b._count, b._price); } }</code> </pre><br>  La deuxi√®me m√©thode nous aidera √† comprendre la m√©thode d'extension pour la classe <code>Product</code> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ProductExtensions</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> OrderLineBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CountOf</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Product product, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">decimal</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Create.OrderLine.Of(count, product) } }</code> </pre> <br>  En g√©n√©ral, les m√©thodes d'extension sont de grands amis de DSL.  Ils peuvent faire une description d√©clarative et compr√©hensible √† partir d'une logique compl√®tement infernale. <br><blockquote>  Utilisez des m√©thodes d'extension.  Utilisez-les.  :) </blockquote>  Apr√®s avoir fait toutes ces actions, nous avons obtenu le code de test suivant: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Fact</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AcceptOrder_Successful</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> order = Create.Order .Dated(DateTime.Now) .With(Pizza.Pepperoni.CountOf(<span class="hljs-number"><span class="hljs-number">1</span></span>).For(<span class="hljs-number"><span class="hljs-number">500</span></span>)) .With(Pizza.Margarita.CountOf(<span class="hljs-number"><span class="hljs-number">1</span></span>).For(<span class="hljs-number"><span class="hljs-number">650</span></span>)) .Please(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> orderRepositoryMock = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mock&lt;IOrderRepository&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ingredientsRepositoryMock = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mock&lt;IIngredientRepository&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> service = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PizzeriaService(orderRepositoryMock.Object, ingredientsRepositoryMock.Object); service.AcceptOrder(order); orderRepositoryMock.Verify(r =&gt; r.Add(order), Times.Once); ingredientsRepositoryMock.Verify(r =&gt; r.ReserveIngredients(order), Times.Once); }</code> </pre><br>  Ici, nous avons adopt√© l'approche que nous appelons la ¬´f√©e f√©e¬ª.  C'est lorsque vous √©crivez pour la premi√®re fois du code inactif comme vous voudriez le voir, puis essayez d'envelopper ce que vous avez √©crit en DSL.  Ceci est tr√®s utile pour agir - parfois vous-m√™me ne pouvez pas imaginer ce dont C # est capable. <br><blockquote>  Imaginez qu'une f√©e magique est arriv√©e et vous a permis d'√©crire du code comme vous le souhaitez, puis essayez d'envelopper tout ce qui est √©crit en DSL. </blockquote><br><h2>  Cr√©ation d'un service (mod√®le testable) </h2><br>  Avec la commande maintenant tout va plus ou moins pas mal.  Le moment est venu de s'occuper des mokas des r√©f√©rentiels.  Il convient de dire ici que le test lui-m√™me, que nous envisageons, est un test de comportement.  Les tests de comportement sont fortement associ√©s √† la mise en ≈ìuvre de m√©thodes, et s'il est possible de ne pas √©crire de tels tests, il vaut mieux ne pas le faire.  Cependant, ils sont parfois utiles et parfois, vous ne pouvez pas vous en passer du tout.  La technique suivante permet d'√©crire exactement des tests de comportement, et si vous r√©alisez soudainement que vous voulez l'utiliser, pensez d'abord si vous pouvez r√©√©crire les tests de telle mani√®re qu'ils v√©rifient l'√©tat, pas le comportement. <br><br>  Donc, je veux m'assurer que dans ma m√©thode de test, il n'y a pas un seul mok.  Pour ce faire, je vais cr√©er un wrapper pour <code>PizzeriaService</code> dans lequel j'encapsule toute la logique qui v√©rifie les appels de m√©thode: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PizzeriaServiceTestable</span></span> : <span class="hljs-title"><span class="hljs-title">PizzeriaService</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Mock&lt;IOrderRepository&gt; _orderRepositoryMock; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Mock&lt;IIngredientRepository&gt; _ingredientRepositoryMock; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PizzeriaServiceTestable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Mock&lt;IOrderRepository&gt; orderRepositoryMock, Mock&lt;IIngredientRepository&gt; ingredientRepositoryMock</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">orderRepositoryMock.Object, ingredientRepositoryMock.Object</span></span></span><span class="hljs-function">)</span></span> { _orderRepositoryMock = orderRepositoryMock; _ingredientRepositoryMock = ingredientRepositoryMock; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">VerifyAddWasCalledWith</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Order order</span></span></span><span class="hljs-function">)</span></span> { _orderRepositoryMock.Verify(r =&gt; r.Add(order), Times.Once); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">VerifyReserveIngredientsWasCalledWith</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Order order</span></span></span><span class="hljs-function">)</span></span> { _ingredientRepositoryMock.Verify(r =&gt; r.ReserveIngredients(order), Times.Once); } }</code> </pre><br>  Cette classe nous permettra de v√©rifier les appels de m√©thode, mais nous devons toujours la cr√©er d'une mani√®re ou d'une autre.  Pour ce faire, nous utiliserons le constructeur que nous connaissons d√©j√†: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PizzeriaServiceBuilder</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> PizzeriaServiceTestable </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Please</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> orderRepositoryMock = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mock&lt;IOrderRepository&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ingredientsRepositoryMock = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mock&lt;IIngredientRepository&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PizzeriaServiceTestable(orderRepositoryMock, ingredientsRepositoryMock); } }</code> </pre><br>  Pour le moment, notre m√©thode de test ressemble √† ceci: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Fact</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AcceptOrder_Successful</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> order = Create.Order .Dated(DateTime.Now) .With(Pizza.Pepperoni.CountOf(<span class="hljs-number"><span class="hljs-number">1</span></span>).For(<span class="hljs-number"><span class="hljs-number">500</span></span>)) .With(Pizza.Margarita.CountOf(<span class="hljs-number"><span class="hljs-number">1</span></span>).For(<span class="hljs-number"><span class="hljs-number">650</span></span>)) .Please(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> service = Create.PizzeriaService.Please(); service.AcceptOrder(order); service.VerifyAddWasCalledWith(order); service.VerifyReserveIngredientsWasCalledWith(order); }</code> </pre><br>  Le test des appels de m√©thode n'est pas la seule raison pour laquelle la classe Testable peut √™tre utilis√©e.  Ici, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> notre Dima Pavlov l'utilise pour une refactorisation complexe d'un code h√©rit√©. <br><blockquote>  Testable est capable de sauver la situation dans les cas les plus difficiles.  Pour les tests de comportement, cela aide √† encapsuler les contr√¥les d'appels laids dans de belles m√©thodes. </blockquote>  √Ä ce moment capital, nous avons fini de comprendre la compr√©hensibilit√© du test.  Il reste √† le rendre reproductible et cibl√©. <br><br><h2>  Reproductibilit√© (extension litt√©rale) </h2><br>  Le mod√®le d'extension litt√©rale n'est pas directement li√© √† la reproductibilit√©, mais il nous y aidera.  Notre probl√®me pour le moment est que nous utilisons la date <code>DateTime.Now</code> comme date de commande.  Si soudainement √† partir d'une certaine date, la logique d'acceptation des commandes change, alors dans notre logique m√©tier nous devrons au moins pendant un certain temps supporter 2 logiques d'acceptation des commandes, les s√©parant en v√©rifiant comme <code>if (order.Date &gt; edgeDate)</code> .  Dans ce cas, notre test a une chance de tomber lorsque la date syst√®me passe √† travers la fronti√®re.  Oui, nous allons r√©soudre ce probl√®me rapidement et m√™me effectuer deux tests: l'un v√©rifiera la logique avant la date limite et l'autre apr√®s.  N√©anmoins, il est pr√©f√©rable d'√©viter de telles situations et de rendre imm√©diatement toutes les donn√©es d'entr√©e constantes. <br><br>  "Et o√π est la DSL?"  - demandez-vous.  Le fait est qu'il est pratique d'entrer des dates dans les tests via des m√©thodes d'extension, par exemple <code>3.May(2019)</code> .  Cette forme d'enregistrement sera compr√©hensible non seulement pour les d√©veloppeurs, mais aussi pour les entreprises.  Pour ce faire, il suffit de cr√©er une telle classe statique <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">DateConstructionExtensions</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> DateTime </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">May</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> day, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> year</span></span></span><span class="hljs-function">)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DateTime(year, <span class="hljs-number"><span class="hljs-number">5</span></span>, day); }</code> </pre><br>  Naturellement, les dates ne sont pas les seules √† utiliser ce mod√®le.  Par exemple, si nous introduisions la quantit√© d'ingr√©dients dans la composition des produits, nous pourrions √©crire quelque chose comme <code>42.Grams("flour")</code> . <br><blockquote>  Les objets et les dates quantitatifs sont cr√©√©s de mani√®re pratique gr√¢ce aux m√©thodes d'extension famili√®res. </blockquote><br><h2>  Focus </h2><br>  Pourquoi est-il important de garder les tests cibl√©s?  Le fait est que les tests cibl√©s sont plus faciles √† maintenir, mais ils doivent toujours √™tre pris en charge.  Par exemple, ils doivent √™tre modifi√©s lors du changement de code et supprim√©s lors du sciage d'anciennes fonctionnalit√©s.  Si les tests ne sont pas cibl√©s, lors de la modification de la logique, vous devrez comprendre les grands tests et en d√©couper des √©l√©ments de la fonctionnalit√© test√©e.  Si les tests sont cibl√©s et que leurs noms sont clairs, il vous suffit de supprimer les tests obsol√®tes et d'en √©crire de nouveaux.  Si les tests ont une bonne DSL, ce n'est pas du tout un probl√®me. <br><br>  Donc, apr√®s avoir fini d'√©crire DSL, nous avons eu l'opportunit√© de concentrer ce test en le divisant en 2 tests: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Fact</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WhenAcceptOrder_AddIsCalled</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> order = Create.Order .Dated(<span class="hljs-number"><span class="hljs-number">3.</span></span>May(<span class="hljs-number"><span class="hljs-number">2019</span></span>)) .With(Pizza.Pepperoni.CountOf(<span class="hljs-number"><span class="hljs-number">1</span></span>).For(<span class="hljs-number"><span class="hljs-number">500</span></span>)) .With(Pizza.Margarita.CountOf(<span class="hljs-number"><span class="hljs-number">1</span></span>).For(<span class="hljs-number"><span class="hljs-number">650</span></span>)) .Please(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> service = Create.PizzeriaService.Please(); service.AcceptOrder(order); service.VerifyAddWasCalledWith(order); } [Fact] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WhenAcceptOrder_ReserveIngredientsIsCalled</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> order = Create.Order .Dated(<span class="hljs-number"><span class="hljs-number">3.</span></span>May(<span class="hljs-number"><span class="hljs-number">2019</span></span>)) .With(Pizza.Pepperoni.CountOf(<span class="hljs-number"><span class="hljs-number">1</span></span>).For(<span class="hljs-number"><span class="hljs-number">500</span></span>)) .With(Pizza.Margarita.CountOf(<span class="hljs-number"><span class="hljs-number">1</span></span>).For(<span class="hljs-number"><span class="hljs-number">650</span></span>)) .Please(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> service = Create.PizzeriaService.Please(); service.AcceptOrder(order); service.VerifyReserveIngredientsWasCalledWith(order); }</code> </pre><br>  Les deux tests se sont r√©v√©l√©s courts, clairs, reproductibles et cibl√©s. <br><br>  Veuillez noter que maintenant les noms des tests refl√®tent le but pour lequel ils ont √©t√© √©crits et maintenant tout d√©veloppeur qui est venu dans mon projet comprendra pourquoi chacun des tests a √©t√© √©crit et ce qui se passe dans ce test. <br><blockquote>  L'objectif des tests les rend pris en charge.  Un bon test doit √™tre cibl√©. </blockquote>  Et maintenant, je peux d√©j√† vous entendre me crier: ¬´Yura, qu'est-ce que tu fous?  Nous avons √©crit un million de code juste pour rendre jolis deux tests? ¬ª  Oui, exactement.  Bien que nous n'ayons que quelques tests, il est logique d'investir dans la DSL et de rendre ces tests compr√©hensibles.  Une fois que vous √©crivez DSL, vous obtenez un tas de goodies: <br><br><ul><li>  Il devient facile d'√©crire de nouveaux tests.  Pas besoin de vous installer pendant 2 heures pour les tests unitaires, il suffit de prendre et d'√©crire. </li><li>  Les tests deviennent compr√©hensibles et lisibles.  Tout d√©veloppeur qui regarde le test comprend pourquoi il a √©t√© √©crit et ce qu'il v√©rifie. </li><li>  Le seuil de participation aux tests (et peut-√™tre dans le domaine) pour les nouveaux d√©veloppeurs est r√©duit.  Par exemple, via ObjectMother, vous pouvez facilement d√©terminer quels objets peuvent √™tre cr√©√©s dans le domaine. </li><li>  Enfin, il est tout simplement agr√©able de travailler avec des tests et, par cons√©quent, le code est davantage pris en charge. </li></ul><br>  Des exemples de code source et de tests sont disponibles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr451598/">https://habr.com/ru/post/fr451598/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr451588/index.html">Note sur les tests d'int√©gration √† l'aide de Jenkins sur Kubernetes</a></li>
<li><a href="../fr451590/index.html">100 choses annonc√©es lors de l'E / S n ¬∞ 19</a></li>
<li><a href="../fr451592/index.html">Rapports des rapports du deuxi√®me QA-mitap Redmadrobot</a></li>
<li><a href="../fr451594/index.html">Guide du rapport PHP Russie 2019</a></li>
<li><a href="../fr451596/index.html">Cardinal gris .NET - John Galloway</a></li>
<li><a href="../fr451600/index.html">Comment r√©diger une lettre de motivation lorsque vous cherchez un emploi aux √âtats-Unis: 7 conseils</a></li>
<li><a href="../fr451602/index.html">Nous √©tudions MITRE ATT & CK. Matrices mobiles: acc√®s aux appareils. Partie 1</a></li>
<li><a href="../fr451604/index.html">Cet article contient trop d'eau.</a></li>
<li><a href="../fr451606/index.html">Histoire d'Internet: d√©labrement, partie 2</a></li>
<li><a href="../fr451610/index.html">Semaine de la s√©curit√© 20: d√©sactivation des extensions Firefox</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>