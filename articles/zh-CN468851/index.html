<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚍 🏅 🙍🏼 React Native中动画的实现 🛀🏼 🕚 🅿️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="本文的翻译是专门为ReactJS / React Native-Developer课程的学生准备的。 
 


 很难想象没有动画的移动应用程序。 如果根本不存在，则网络上的动画通常很简单（最多-一个页面替换另一个页面）。 移动应用程序中的动画需要完全不同的关注。 

 CSS3有一个相对简单的AP...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>React Native中动画的实现</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/468851/">  <i>本文的翻译是专门为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ReactJS / React Native-Developer</a>课程的学生准备的。</i> <i><br></i> <br><img src="https://habrastorage.org/webt/v4/fq/ov/v4fqovx0xsqqctvlu7uvn4xguuk.png"><br><hr><br> 很难想象没有动画的移动应用程序。 如果根本不存在，则网络上的动画通常很简单（最多-一个页面替换另一个页面）。 移动应用程序中的动画需要完全不同的关注。 <a name="habracut"></a><br><br>  CSS3有一个相对简单的API，可让您制作简单的动画。 但是在React Native中您没有此工具。 是的，即使是这样，这还不够。 <br><br> 那么，您是否需要知道是否正在使用React Native并实现完整的动画呢？ <br><br>  React Native有一个类似Animated的工具，但至少一开始看起来很吓人。 <br><br> 因此，如果需要，可以使用三个“事物组”或“块”，以便与动画配合使用。 <br><br><h3> 块0：需要改变 </h3><br> 动画是从一种状态到另一种状态的变化： <br><br><ul><li> 从“隐藏”到“可见”的过渡； </li><li> 从圆形过渡到正方形。 </li></ul><br> 想想动画前后要显示什么。 <br> 考虑一下过渡以及为此需要更改的样式： <br><br><ul><li> 该对象应该出现透明度变化的情况，还是应该只是从上方“掉落”？ </li><li> 圆应该变成正方形还是在过程中间变成三角形？ </li></ul><br><br>
<h3> 块1：一种称为<code>Animated.Value</code>视觉状态 </h3><br> 从逻辑的角度来看，任何组件都可以显示或隐藏-这些是“ true”和“ false”的含义；这里没有中间立场。 作为状态，显示对象是否显示为是或否。 <br><br> 在良好的用户界面中，对象不会突然隐藏，也不会突然出现。 它们会逐渐出现，以帮助用户了解界面。 <br> 因此，清楚的是，视觉状态可以在真实状态与错误状态之间。 <br><br> 怎么会这样 <br> 我们可以引入另一个变量来表示一系列视觉状态。 我们需要它是一个数字，因为无论我们处于什么逻辑状态，数字都可以帮助我们表示中间值。 <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._shown = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Animated.Value(<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br><br> 逻辑状态可以是二进制的（即<code>true</code>或<code>false</code> ，1或0），而可视状态是浮点数。 <br><br><h3> 块2：过渡称为<code>Animated.timing</code> </h3><br> 假设某个组件​​是隐藏的：这意味着其可见性参数的逻辑状态将为false，而可视状态也将为0.0。 但是，当我们想要显示一个组件时会发生什么？ 逻辑状态应立即变为真，而视觉状态应首先逐渐通过0.1、0.2，...，最后完全通过1.0。 <br><br> 为此，我们需要一种方法来告诉可视状态到1.0的过渡。 <br> 并且有这样的方式。 实际上，甚至有一些。 <br> 最简单的方法基本上是： <br><br><pre> <code class="javascript hljs">Animated.timing(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._shown, { <span class="hljs-attr"><span class="hljs-attr">toValue</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">duration</span></span>: <span class="hljs-number"><span class="hljs-number">300</span></span>, }).start();</code> </pre> <br><br> 在这里，我们说<code>Animated</code> ，可以在300毫秒的间隔内将<code>_shown</code>更改为<code>1.0</code> 。 <br> 还有其他过渡和组织多个过渡的方式，但是现在我们可以使用<code>Animated.timing</code> 。 <br><br><h3> 区块3：称为<code>Animated.View</code>和<code>interpolate</code>像素 </h3><br> 如果看不到它们，我们在<code>_shown</code>到<code>0.0</code>和<code>1.0</code>之间的过渡没有任何意义。 那么我们该怎么做呢？ <br><br> 我们需要以某种方式使用<code>_shown</code>来设置子组件的透明度。 <br><br> 假设在开始使用动画之前我们有以下代码： <br><br><pre> <code class="javascript hljs">&lt;View style={{ <span class="hljs-attr"><span class="hljs-attr">opacity</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.shown ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span> }}&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">SomeComponent</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">View</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br><br> 隐藏组件时将透明度设置为<code>0</code> ，显示组件时将透明度设置为<code>1</code> 。 <br><br> 我们可以使用现有的<code>Animated.Value</code>和<code>_shown</code>设置从<code>0</code>到<code>1</code>过渡的动画吗？ <br><br><h3> 风格动画 </h3><br> 使用样式时，可以使用任何<code>Animated.Value</code> 。 <br> 我们只需要将<code>View</code>更改为<code>Animated.View</code> ，现在我们有了以下内容： <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> opacity = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._shown; <span class="hljs-comment"><span class="hljs-comment">// This is an Animated.Value &lt;Animated.View style={{ opacity: opacity }}&gt; &lt;SomeComponent /&gt; &lt;/Animated.View&gt;</span></span></code> </pre> <br><br> 这不是关于动画的文章吗？ 为什么仍然没有图片？ <br><br><img src="https://habrastorage.org/webt/zt/m6/ts/ztm6tsgmjjycmvlvu8r17se_fzm.gif"><br><br><h3> 还有一件事：插值 </h3><br> 这个词听起来很吓人，但是这个想法本身很简单。 插值使我们可以将视觉状态保持在0和1之间，但可以“匹配”其他内容。 <br><br> 说，我们不仅希望创建继承的组件，还希望我们的组件“从上方退出”。 然后，我们可以通过将隐藏组件的位置放高40px并在状态变为可见时将其移动动画到所需位置来实现此目的。 <br><br> 我们可以使用通常的<code>interpolate</code>调用将0到1的值与-40到0的值“匹配”： <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> top = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._shown.interpolate({ <span class="hljs-attr"><span class="hljs-attr">inputRange</span></span>: [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>], <span class="hljs-attr"><span class="hljs-attr">outputRange</span></span>: [<span class="hljs-number"><span class="hljs-number">-40</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>], });</code> </pre> <br><br> 这将创建一个新的<code>Animated.Value</code> ，其值将从-40到0。 <br> 换句话说，当<code>_shown</code>为<code>0</code>时将为<code>-40</code> ，当<code>_shown</code> = <code>0.5</code>时<code>_shown</code> <code>-20</code> <code>0.5</code>而当<code>_shown</code> <code>1.0</code>时<code>_shown</code> <code>1.0</code> 。 <br><br><img src="https://habrastorage.org/webt/d0/dg/-o/d0dg-otquzjewgz-byxs564rxrg.gif"><br><br>  <i>秘密：通过<code>interpolate</code>您还可以更改颜色和色度的值。</i> <br><br><h3> 结论： </h3><br><ul><li> 视觉状态是一个数值，它应该反映从一种样式到另一种样式的过渡。 </li><li>  <code>Animated.Value</code>允许您反映视觉状态的数值。 </li><li>  <code>Animated.timing</code>可用于将<code>Animated.Value</code>移动到另一个数字。 </li><li> 当用<code>Animated.View</code>替换<code>View</code>时，可以将<code>Animated.Value</code>用于样式。 </li></ul><br> 插值允许您将一个<code>Animated.Value</code>范围映射到另一个范围，例如，从<code>0</code>到<code>1</code>到<code>5</code>到<code>25</code>的范围，甚至到黑色和绿色之间的范围。 <br><br><h4> 资料来源： </h4><br> 在本文中，我们遇到了React Native中的动画原语，并了解了基本概念。 在这里，您可以找到资源来帮助您更深入地探讨该主题： <br><br><ul><li> 杰森·布朗<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">（</a> Jason Brown <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">）</a>出色的Egghead课程“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Animate React Native UI Elements”</a>是最好的。 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">React Native的官方动画文档</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">官方</a>动画<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文件</a> ; </li><li> 我关于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使用React Native的动画外观和消失的</a>文章； </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">一篇关于动画输入域的文章</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在4个地方可以找到React Native实践的灵感</a> 。 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN468851/">https://habr.com/ru/post/zh-CN468851/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN468841/index.html">连续交付您的Kotlin Multiplatform库</a></li>
<li><a href="../zh-CN468843/index.html">您害怕实施CRM系统吗？ 您的公司可能生病了</a></li>
<li><a href="../zh-CN468845/index.html">城市生理学或身体部位的短期课程</a></li>
<li><a href="../zh-CN468847/index.html">其他国家的公共采购：法律为何需要框架</a></li>
<li><a href="../zh-CN468849/index.html">单个程序中的未知处理器逆向工程</a></li>
<li><a href="../zh-CN468853/index.html">在旧版项目中成功应用SPR的故事</a></li>
<li><a href="../zh-CN468859/index.html">“泵送路由器”：针对Internet提供商的TP-Link设备调整</a></li>
<li><a href="../zh-CN468861/index.html">积极技术在HITB + Cyber​​Week的僵持网络战中为“骇人城市”注入生命</a></li>
<li><a href="../zh-CN468863/index.html">内部使用Go：在循环中包装循环变量</a></li>
<li><a href="../zh-CN468873/index.html">曾经破坏便利的私人火车</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>