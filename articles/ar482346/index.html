<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ข ๐ ๐ณ ASP.NET MVC - ุงูุนูู ูุน MySQL ูู ุฎูุงู ADO.NET ๐ณ ๐ฉ๐ฟโ๐คโ๐จ๐ป ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงูุชูููููุฌูุง ุงููุฏููุฉ  ุชุญุฐูุฑ: ุชู ุฅููุงู ASP.NET MVC ู ADO.NET ุฃูุถูุง. ููุตู ุจุงุณุชุฎุฏุงู ASP.NET Core ูุน ORM ุงูุญุฏูุซุฉ. ูููู ุฅุฐุง ููุช ููุชูุง ุ ูุงูุฑุฃ. 

 ุจุงููุนู ุ ุฑ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ASP.NET MVC - ุงูุนูู ูุน MySQL ูู ุฎูุงู ADO.NET</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482346/" style=";text-align:right;direction:rtl"><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุชูููููุฌูุง ุงููุฏููุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  <b>ุชุญุฐูุฑ: ุชู ุฅููุงู ASP.NET MVC ู ADO.NET ุฃูุถูุง.</b>  <b>ููุตู ุจุงุณุชุฎุฏุงู ASP.NET Core ูุน ORM ุงูุญุฏูุซุฉ.</b>  <b>ูููู ุฅุฐุง ููุช ููุชูุง ุ ูุงูุฑุฃ.</b> <br></div></div><br>  ุจุงููุนู ุ ุฑุจูุง ุ ุซูุงุซ ูุฑุงุช ุฃุญุตู ุนูู ASP.NET MVC.  ุจุนุฏ ุนุดุฑ ุณููุงุช ูุน ASP.NET WebForms ุ ูู ุงูุตุนุจ ุจุนุถ ุงูุดูุก ุงูุชุจุฏูู ุฅูู ุชูููุฉ MVC ุ ูุธุฑูุง ููุฌูุฏ ุงูุนุฏูุฏ ูู ุงูุงุฎุชูุงูุงุช ุจุญูุซ ูุณูู ุณุฑุฏ ูุง ุชุดุชุฑู ุจู ูุฐู ุงูุชูููุงุช - ุจุงุณุชุซูุงุก ููุชุจุงุช .NET Framework.  ูู ุฃูุชุจ ููุง - MVC ุฃูุถู ุฃู ุฃุณูุฃ ูู WebForms ุ ููู ุฌูุฏุฉ ุ ูููููู ุจูุงุก ุชุทุจูู ุฌูุฏ ุนูู ููุง ุงูุชูููุชูู.  ุฃุชุฑู ุฃููุงุฑู ุฃูุถูุง ุญูู ุงูุญุงุฌุฉ ุฅูู TDD ูุนู ุ ุฑุบู ุฃููู ุฃูุชูููุง. <br><br>  ูุงูุขู ุณุฃุชุญุฏุซ ุนู ุฃูุซุฑ ุงูููุงู ุงูููุงุณูุฉ - ุงูุนูู ุงููุนุชุงุฏ ูุน ุงูุจูุงูุงุช: ุนุฑุถ ูู ุดูู ุฌุฏูู ูุงุฆูุฉ ุงูุณุฌูุงุช ุ ุฅุถุงูุฉ ูุชุบููุฑ ูุญุฐู ุงูุจูุงูุงุช (ุนูููุงุช CRUD).  ููุน ุฐูู ุ ูู ุฌููุน ุงููุชุจ ุชูุฑูุจูุง ูุงูุนุฏูุฏ ูู ุญููู ุงูุฅูุชุฑูุช ูู ASP.NET MVC ุ ูุณุจุจ ูุง ุ ูุชู ุงููุธุฑ ูู ุงูุฎูุงุฑ ุญุตุฑููุง ูู ุฎูุงู ORM (ุชุนููู ุงุฑุชุจุงุท ุงููุงุฆูุงุช): ุฅูุง Entity Framework (EF) ุฃู LINQ for SQL.  ุงูุชูููุงุช ููุชุงุฒุฉ ุ ูุง ุดู ุ ุฃุฎูุฑูุง ุ ูุฏ ูุง ูููู ุงููุจุฑูุฌ - ููู ููู ูุนูู ูุธุงู ุฅุฏุงุฑุฉ ููุงุนุฏ ุงูุจูุงูุงุช ุงูุชุฑุงุจุทูุฉ (ุงูุฐู ูุณุชุฎุฏูู ุนูู ุงูุฃุฑุฌุญ) ุจุดูู ุนุงู ุ ูุญุชู SQL ุ ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ ุ ูู ุชุนุฏ ุถุฑูุฑูุฉ: ูุถุน ูู ุดูู EF ู ุณูู ุงูููุตูุงุช ู DBMS ููู ุจุนุถูู ุงูุจุนุถ.  "ููุง ูู ุงูุณุนุงุฏุฉ - ูู ูุนุฏ ููุงู ุฌูุงู".  ููู ุจุงููุณุจุฉ ูููุจุฑูุฌูู ุงูุฐูู ูุง ูุฎุดูู ุงูุนูู ูุจุงุดุฑุฉ ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุฎูุงู ุขููุฉ ADO.NET ุ ูุบุงูุจูุง ูุง ูููู ุงูุฃูุฑ ุบูุฑ ูุงุถุญ - ููู ุฃูู ุชุจุฏุฃ ุจู ASP.NET MVC ุจุดูู ุนุงู ููุง ุฅุฐุง ูุงู ุฐูู ุถุฑูุฑููุง. <br><a name="habracut"></a><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงูุจุฏุงูุฉ ููุช ููุฒุนุฌูุง ุจุดูู ูุจูุฑ ุจุณุจุจ ุนุฏู ูุฌูุฏ ูููู ููุงุณุจ ูุนุฑุถ ุงูุจูุงูุงุช ูู ุฌุฏูู ุงูุดุจูุฉ.  ูู ุงููุนููู ุฃูู ูุฌุจ ุนูู ุงููุทูุฑ ููุณู ุชูููุฐ ูู ูุฐุง ุฃู ุฃุฎุฐ ุดูุก ููุงุณุจ ูู ูุฏูุฑ ุงูุญุฒูุฉ.  ุฅุฐุง ููุช ูุซูู ุฃูุซุฑ ูู ุณุนูุฏ ุจูููู GridView ูู ASP.NET WebForms ุ ููู ุงูุตุนุจ ุนูู MVC ุงูุนุซูุฑ ุนูู ุดูุก ุฃูุซุฑ ุฃู ุฃูู ูุงุจููุฉ ููููุงุฑูุฉ ุ ุจุงุณุชุซูุงุก Grid.mvc.  ููู ุซูุชู ูู ูุฐู ุงูููููุงุช ููุณุช ูุงููุฉ ูุงุณุชุฎุฏุงููุง ูู ูุดุฑูุน ูุจูุฑ ุจูุง ููู ุงูููุงูุฉ.  ุฅุฐุง ุชู ุงุณุชุฎุฏุงููุง ุ ูุจุฏุฃ ุงููุจุฑูุฌ ูู ุงูุงุนุชูุงุฏ ุนูู ูุทูุฑ ุขุฎุฑ ุ ุฃููุงู ุ ูุง ูุนุฑู ููููุฉ ูุชุงุจุฉ ูุฐุง ุงููููู (ูู ูู ููุนูุ) ุ ูุซุงููุงู ุ ูู ุบูุฑ ุงููุนุฑูู ูุชู ูููู ุณูุชู ุงูุงูุชูุงุก ููู.  ูุฏ ูุจุฏู ูู ุงููููู ูู ุจุนุถ ุงูุฃุญูุงู ุชูุณูุน ุงููููู ูุฑุคูุชู ุจุดูู ุฃูุจุฑ ุ ูููู ุฅุฐุง ุฃูููู ุงููุทูุฑ ุ ููุญู ูุถุทุฑูู ุฅูุง ูุฅุนุงุฏุฉ ุญูุฑ ุงูููุฏ ูุฑุฉ ุฃุฎุฑู ุฃู ุชุฌููุฏ ุชุญุฏูุซ ุงููููู ูู ุฅุตุฏุงุฑ ูุนูู.  ูุฅุฐุง ูุงู ุงููุทูุฑ ูุนูู ุนูู ุฅุตูุงุญ ุซุบุฑุฉ ุฃูููุฉ ุ ููุง ูุฒุงู ูุชุนูู ุนููู ุงูุชุฑููุฉ ุฅูู ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ.  ุญุชู ุงูุงูุชูุงู ุฅูู ุฅุตุฏุงุฑุงุช ุฌุฏูุฏุฉ ูู ููุตู MySQL ูุณุจุจ ุจุนุถ ุงููุดููุงุช ุ ุนูู ุงูุฑุบู ูู ุฃูู ูุง ูุฒุงู ููุฏ ุงูุชุทููุฑ ูู ูุจู ุดุฑูุฉ ูุจูุฑุฉ ุ ูููู ูุงุฐุง ุนู "ุงูุฏุฑุงุฌุงุช" ุงูุนุฏูุฏุฉ ูู ูุฏูุฑ ุญุฒูุฉ Nugetุ <br><br>  ูุฐูู ุ ุฏุนููุง ูุญุงูู ูุนุฑูุฉ ููููุฉ ุงููุชุงุจุฉ ุชุญุช ASP.NET MVC ุ ุฃุซูุงุก ุงูุนูู ูุน ุงูุจูุงูุงุช ุงูุชู ุชุชู ูุนุงูุฌุชูุง ุจูุงุณุทุฉ MySQL DBMS.  ูููู ุฃุฎุฐ ุฌููุน ุงูุดูุฑุงุช ููุง ุนูู <a href="https://yadi.sk/d/EArrZdGh_iVaJg" rel="nofollow">ูุฐุง ุงูุนููุงู</a> ุ ุฃุณูู ูุฐุง ุงูุฑูุฒ ุณูุชู ุชูุฏููู ุฌุฒุฆููุง ูุน ุฑูุงุจุท ูุชูุณูุฑุงุช ุตุบูุฑุฉ.  <a href="https://example-mvc.azurewebsites.net/" rel="nofollow">ูููุง</a> ููููู ุฑุคูุฉ ุงูุชุทุจูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ูู MySQL </h2><br><pre style=";text-align:right;direction:rtl"><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SCHEMA</span></span> <span class="hljs-string"><span class="hljs-string">`example`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">USE</span></span> <span class="hljs-string"><span class="hljs-string">`example`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`users`</span></span> ( <span class="hljs-string"><span class="hljs-string">`UserID`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT, <span class="hljs-string"><span class="hljs-string">`SupporterTier`</span></span> enum(<span class="hljs-string"><span class="hljs-string">'None'</span></span>,<span class="hljs-string"><span class="hljs-string">'Silver'</span></span>,<span class="hljs-string"><span class="hljs-string">'Gold'</span></span>,<span class="hljs-string"><span class="hljs-string">'Platinum'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">'None'</span></span>, <span class="hljs-string"><span class="hljs-string">`Loginname`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`LanguageID`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">'2'</span></span>, <span class="hljs-string"><span class="hljs-string">`Email`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`LastLoginDate`</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`UserID`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`i_Loginname`</span></span> (<span class="hljs-string"><span class="hljs-string">`Loginname`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`i_Language_idx`</span></span> (<span class="hljs-string"><span class="hljs-string">`LanguageID`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> <span class="hljs-string"><span class="hljs-string">`i_Language`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`LanguageID`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> <span class="hljs-string"><span class="hljs-string">`languages`</span></span> (<span class="hljs-string"><span class="hljs-string">`LanguageID`</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span> AUTO_INCREMENT=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CHARSET</span></span>=utf8; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`languages`</span></span> ( <span class="hljs-string"><span class="hljs-string">`LanguageID`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT, <span class="hljs-string"><span class="hljs-string">`LanguageName`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">`Culture`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`LanguageID`</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span> AUTO_INCREMENT=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CHARSET</span></span>=utf8;</code> </pre> <br>  ุณุชููู ูุงุนุฏุฉ ุงูุจูุงูุงุช (DB) ุจุณูุทุฉ ูููุซููุง ุฌุฏููุงู ููุท ุ ูุน ูุฌูุฏ ุนูุงูุฉ ุฑุฃุณ ุจุฃุทุฑุงู ุจููููุง ูู ุญูู <code>LanguageID</code> .  ุจูุฐู ุงูุทุฑููุฉ ุณุฃููู ุจุชุนููุฏ ุงููููู ุจุณุจุจ ุงูุญุงุฌุฉ ุฅูู ุงุณุชุฎุฏุงู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ูุงุฎุชูุงุฑ ุฅุญุฏู ุงููุบุงุช ูููุณุชุฎุฏู.  ุฃูุถูุง ุ ุจุงููุณุจุฉ ุฅูู ุงููุถุงุนูุงุช ุ ุจุงููุณุจุฉ ูููุณุชุฎุฏู ุ ุณููุฏู ุฃูุถูุง ุญูู <code>SupporterTier</code> ุ ูุงูุฐู ุณูุญุฏุฏ ูุณุชูู ุฏุนู ุงููุณุชุฎุฏู ูู ุฎูุงู ุงูุชุนุฏุงุฏ.  ููู ุฃุฌู ุงุณุชุฎุฏุงู ุฌููุน ุฃููุงุน ุงูุจูุงูุงุช ุชูุฑูุจูุง ูู ูุดุฑูุนูุง ุ ูุถูู ุญูู <code>LastLoginDate</code> ูู ููุน "ุงูุชุงุฑูุฎ / ุงูููุช" ุ ูุงูุฐู ุณูุชู ููุคู ุจูุงุณุทุฉ ุงูุชุทุจูู ููุณู ุนูุฏูุง ูููู ุงููุณุชุฎุฏู ุจุชุณุฌูู ุงูุฏุฎูู (ูุง ููุนูุณ ูู ูุฐุง ุงููุดุฑูุน). <br><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุดุฑูุน </h2><br><img src="https://habrastorage.org/webt/sm/4a/07/sm4a07w8etetdgvtnkhd5i-wjcu.png"><br><br>  ุงุฎุชุฑ "MVC".  ูู ุงููููู ุงุณุชุฎุฏุงู "Empty" ุ ููู ูุฏููุง ุชุฏุฑูุจ ุ ูููุณ ุชุทุจูููุง ุญูููููุง ุ ูุฐูู ุณูุณุงุนุฏูุง ุฐูู ููุฑูุง ุ ุฏูู ุฅููุงุกุงุช ุบูุฑ ุถุฑูุฑูุฉ ุ ุนูู ุฏูุฌ Bootstrap ู JQuery ูู ุชุทุจูููุง. <br><br><img src="https://habrastorage.org/webt/lg/yv/rn/lgyvrneaxmudgq9mx1ijk36jjqs.png"><br><br>  ูุญุตู ุจุงููุนู ุนูู ูุฌูุฏุงุช <i>ุงููุญุชูู</i> <i>ูุงูุฎุทูุท</i> <i>ูุงููุฎุทูุทุงุช</i> ุ ููุฐูู <i>ูููุงุช</i> <i>BundleConfig.cs</i> ู <i>FilterConfig.cs</i> ูู ุฏููู <i>App_Start</i> ูุน ุชุณุฌูู ุงูุญุฒู ููุฑุดุญุงุช ASP.NET MVC.  ูู ูุดุฑูุน ูุงุฑุบ ุ ููุฌุฏ ููุท ุชุณุฌูู ููุทุฑู ูู ููู <i>RouteConfig.cs</i> .  ูู <i>Global.asax.cs ุ</i> ุณุชุชู ุฃูุถูุง ุฅุถุงูุฉ ุงุณุชุฏุนุงุกุงุช ุงูุทุฑููุฉ ุงูููุถุญุฉ ูู ูุฐู ุงููููุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters); RouteConfig.RegisterRoutes(RouteTable.Routes); BundleConfig.RegisterBundles(BundleTable.Bundles);</code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ุฃูุดุฃูุง ุงูุจููุฉ ุงูุชุญุชูุฉ ูุญุฒูุฉ ูุงููุฉ </h2><br>  ููุนูู ูุน MySQL DBMS ุ ุฃุถู ููุชุจุฉ <i>MySql.Data</i> : ุฅูุง ูุฏูููุง ุ ุฅุฐุง ูุงู <b>ููุตู mysql-connector-net-8.0.18</b> ูุซุจุชูุง ุจุงููุนู ุนูู ุงูููุจููุชุฑ ุ ุฃู ูู ูุฏูุฑ ุญุฒู Nuget: <br><br><img src="https://habrastorage.org/webt/mk/b_/fh/mkb_fhxg6d8kx2pdnrithceoaf4.png"><br><br>  ุฃุถู ุชูููู ุณูุณูุฉ ุงูุงุชุตุงู ุฅูู MySQL DBMS ุฅูู ููู <i>Web.config</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">&lt;connectionStrings&gt; &lt;add name=<span class="hljs-string"><span class="hljs-string">"example"</span></span> providerName=<span class="hljs-string"><span class="hljs-string">"MySql.Data.MySqlClient"</span></span> connectionString=<span class="hljs-string"><span class="hljs-string">"server=localhost;Port=3306;user id=develop;Password=develop;persistsecurityinfo=True;database=example;CharSet=utf8;SslMode=none"</span></span> /&gt; &lt;/connectionStrings&gt;</code> </pre> <br>  ุฃุถู ุณุทุฑูุง ุฅูู ูุณู <code>&lt;appSettings&gt;</code> ูุน ุฑุงุจุท ูุณูุณูุฉ ุงูุงุชุตุงู ุงููุถุงูุฉ: <code>&lt;add key="ConnectionString" value="example" /&gt;</code> <br>  ูุถูู ุฏููู <i>ูุฌุงู</i> ุฌุฏูุฏ ุฅูู ุงูุชุทุจูู ุ ุญูุซ ูููู ุจุฅูุดุงุก ูุฆุฉ ุฃุณุงุณูุฉ ุซุงุจุชุฉ ุฌุฏูุฏุฉ (ูู ููู <i>Base.cs</i> ) ุ ูููููุง ูู ุฎูุงููุง ุงููุตูู ุฅูู ูุฐู ุงููุนููุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> ConnectionString { get { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> System.Configuration.ConfigurationManager.AppSettings[<span class="hljs-string"><span class="hljs-string">"ConnectionString"</span></span>]; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> strConnect { get { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> System.Configuration.ConfigurationManager.ConnectionStrings[ConnectionString].ConnectionString; } } }</code> </pre> <br>  ุฃุฑุบุจ ูู ุงูุญุตูู ุนูู ูุฆุฉ ุฃุณุงุณูุฉ ูุนููุฉ ูู ุงูุชุทุจูู ูุน ุฑูุงุจุท ููุนููุงุช ุงูุชุทุจูู ูุจุนุถ ุงููุธุงุฆู ุงูููุงุณูุฉ ุงูุชู ูููู ุงุณุชุฏุนุงุคูุง ูู ุงูุชุทุจูู ุจุฃูููู. <br>  ูุชู ุชุนุฑูู ุงุณู ุณูุณูุฉ ุงูุงุชุตุงู ูู ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู ุ ุจุญูุซ ุณูููู ูู ุงูุฃุณูู ูู ุงููุณุชูุจู ุงูุนูู ูุน ุณูุณูุฉ ุงูุงุชุตุงู ุฅูู DBMS: ุงูุชุจุฏูู ุงูุณุฑูุน ุจูู ููุงุนุฏ ุงูุจูุงูุงุช ุงููุฎุชููุฉ ูุชุบููุฑ ุฅุนุฏุงุฏุงุช ุงูุงุชุตุงู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุนุฏ ุงุณุชุฎุฏุงู ุงุณู ุณูุณูุฉ ุงูุงุชุตุงู ูู ูุนููุฉ ุงูุชุทุจูู ููุงุณุจูุง ููุดุฑ ุงูุชุทุจูู ูู Microsoft Azure - ุญูุซ ููููู ุชุนููู ุงููุนููุฉ ูุฎุฏูุฉ ุงูุชุทุจูู ุงููุณุชุฎุฏูุฉ ูููุดุฑ ุ ูููู ุชุญุฏุฏ ุณูุณูุฉ ุงูุงุชุตุงู ุงููุทููุจุฉ ุ ูุงูุชู ุชู ุชุนุฑูููุง ูุณุจููุง ูู <code>&lt;connectionStrings&gt;</code> .  ุจุนุฏ ุฐูู ุ ุนูุฏ ุงููุดุฑ ุ ูุง ููููู ุงุณุชุฎุฏุงู ุชุญููู <i>ููู web.config</i> . <br><br>  ุฃูุฏ ุฃูุถูุง ุงุณุชุฎุฏุงู ุงูููู ูู ููู ุงูููุงุฑุฏ ุงูุนุงููู ูู ุงููุต ุ ุญุชู ูุง ูุชู ุงุณุชุจุฏุงููุง ูู ุนุฏุฉ ุฃูุงูู ุ ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูููุง ูุฌุฃุฉ.  ุนูู ุณุจูู ุงููุซุงู: <br><br><img src="https://habrastorage.org/webt/rc/8u/qz/rc8uqzdrz9hvnd-y7swirgoh4tm.png"><br><br>  ูู ููู ุชุฎุทูุท ุงูุตูุญุฉ <i>_Layout.cshtml</i> (ููู ููุฌูุฏ ุจุดูู ููุงุณู ูู ุงูุฏููู <i>Views \ Shared</i> ูุงูุฐู ุชู ุงุณุชุฎุฏุงูู ูุงุญููุง ูุฌููุน ุตูุญุงุช ูุฐุง ุงููุดุฑูุน) ุ ููููู ุงูุขู ุงุณุชุฎุฏุงู ูุฐู ุงููุชุบูุฑุงุช (ุงูุธุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ <code>Example_Users.Properties.Resources.Title</code> ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Content-Type"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/html; charset=utf-8"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width, initial-scale=1.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>@ViewBag.Title โ @Example_Users.Properties.Resources.Title<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> @Styles.Render("~/Content/css") @Scripts.Render("~/bundles/modernizr") <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container body-content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"page-header"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/"</span></span></span><span class="hljs-tag">&gt;</span></span>@Example_Users.Properties.Resources.Title<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> @RenderBody() <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> @DateTime.Now.Year โ @Example_Users.Properties.Resources.Author<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> @Scripts.Render("~/bundles/jquery") @Scripts.Render("~/bundles/bootstrap") @RenderSection("scripts", required: false) <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  ูู ูุฐุง ุงูููู ุฃูุถูุง ุ ูุฑู ูุฑูู ูุฑูุฉ ุงูุฃููุงุท ุงููุชุชุงููุฉ ูู Bootstrap ุงููุชุตู ูููุชุจุฉ ุงููุตูุต JQuery.  ุณูุชู ุฅูุดุงุก ูุญุชููุงุช ุฌููุน ุงููุดุงูุฏุงุช ูู ูููุน ุงูุฏุนูุฉ ุฅูู ูุธููุฉ <code>RenderBody()</code> . <br><br><h2 style=";text-align:right;direction:rtl">  M ูุนูู ูููุฐุฌ </h2><br>  ุฃุถู ุงูููู <i>UserClass.cs</i> ุฅูู ุฏููู <i>ุงููุฌุงู</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">[DisplayName(<span class="hljs-string"><span class="hljs-string">"User"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserClass</span></span></span><span class="hljs-class"> {</span></span> [Key] [HiddenInput(DisplayValue=<span class="hljs-literal"><span class="hljs-literal">false</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> UserID { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } [Required(ErrorMessage=<span class="hljs-string"><span class="hljs-string">"Please enter a login name"</span></span>)] [Display(Name = <span class="hljs-string"><span class="hljs-string">"Login"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> Loginname { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> LanguageClass Language { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } [EmailAddress(ErrorMessage = <span class="hljs-string"><span class="hljs-string">"Please enter a valid email"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> Email { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } [UIHint(<span class="hljs-string"><span class="hljs-string">"Enum"</span></span>)] [EnumDataType(typeof(Supporter))] [Required(ErrorMessage = <span class="hljs-string"><span class="hljs-string">"Please select supporter tier"</span></span>)] [Display(Name = <span class="hljs-string"><span class="hljs-string">"Supporter"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Supporter SupporterTier { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } [HiddenInput(DisplayValue = <span class="hljs-literal"><span class="hljs-literal">true</span></span>)] [ScaffoldColumn(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)] [Display(Name = <span class="hljs-string"><span class="hljs-string">"Last login"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime? LastLoginDate { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } [HiddenInput(DisplayValue = <span class="hljs-literal"><span class="hljs-literal">false</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsLastLogin { get { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> LastLoginDate != null &amp;&amp; LastLoginDate &gt; DateTime.MinValue; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UserClass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UserClass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> UserID, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Loginname, LanguageClass Language, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Email, DateTime? LastLoginDate, Supporter SupporterTier)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.UserID = UserID; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Loginname = Loginname; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Language = Language; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Email = Email; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.LastLoginDate = LastLoginDate; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SupporterTier = SupporterTier; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> Supporter { [Display(Name=<span class="hljs-string"><span class="hljs-string">""</span></span>)] None = <span class="hljs-number"><span class="hljs-number">1</span></span>, Silver = <span class="hljs-number"><span class="hljs-number">2</span></span>, Gold = <span class="hljs-number"><span class="hljs-number">3</span></span>, Platinum = <span class="hljs-number"><span class="hljs-number">4</span></span> }</code> </pre> <br>  ููุฐูู ููู <i>LanguageClass.cs</i> ูู ููุณ ุงูุฏููู: <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">[DisplayName(<span class="hljs-string"><span class="hljs-string">"Language"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LanguageClass</span></span></span><span class="hljs-class"> {</span></span> [Key] [HiddenInput(DisplayValue = <span class="hljs-literal"><span class="hljs-literal">false</span></span>)] [Required(ErrorMessage = <span class="hljs-string"><span class="hljs-string">"Please select a language"</span></span>)] [Range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue, ErrorMessage = <span class="hljs-string"><span class="hljs-string">"Please select a language"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LanguageID { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } [Display(Name = <span class="hljs-string"><span class="hljs-string">"Language"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> LanguageName { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LanguageClass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LanguageClass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> LanguageID, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> LanguageName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.LanguageID = LanguageID; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.LanguageName = LanguageName; } }</code> </pre> <br>  ููุง ููููู ุฃู ุชุฑู ุฃู ุฎุตุงุฆุต ุงููุฆุงุช ุชูุฑุฑ ุจููุฉ ุฌุฏูู <code>Users</code> <code>Languages</code> ูู DBMS.  <code>enum Supporter</code> ุฅูุดุงุก <code>enum Supporter</code> ุงูุชุนุฏุงุฏ ูููุน ุงูุชุนุฏุงุฏ ุจุญูุซ ูููู ุงุณุชุฎุฏุงูู ูุฎุงุตูุฉ ูุฆุฉ <code>SupporterTier</code> ูุญูู ููุงุซู ูู ุฌุฏูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.  ุจุงููุณุจุฉ ูุญููู <code>UserID</code> ุ <code>LanguageID</code> ุ ููููู ุฃู ุชุฑู ุฃูู ุชู ุชุญุฏูุฏูุง ูููุชุงุญ ุฃุณุงุณู ุ ููุง ูู ุงูุญุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.  ูุชู ุงุณุชุฎุฏุงู ุงูุณูุฉ <code>[Key]</code> ููุฐุง ุงูุบุฑุถ. <br><br>  ุชุฑุชุจุท ุฌููุน ุงูุณูุงุช ุงูุฃุฎุฑู ุนูู ุงูุฃุฑุฌุญ ุจุงุณุชุฎุฏุงู ุงููุดุงูุฏุงุช ุจุงุณุชุฎุฏุงู ูุฐู ุงููุฆุฉ.  ูุฅุฐุง ููุง ุณูุณุชุฎุฏู ุงููุณุงุนุฏูู ูุชูููู ุนูุงูุงุช HTML ููุฐู ุงูุฎุตุงุฆุต (ูุงูุชู ุฃูุตู ุจูุง ุดุฎุตููุง ุจุงูุชุฃููุฏ) ุ ูุณูู ูุชุนูู ุนูููุง ุชุนููู ูุฐู ุงูุณูุงุช ุจุนูุงูุฉ ูุงุฆูุฉ ููุญุตูู ุนูู ูุง ูุญุชุงุฌ ุฅููู.  ุนูู ูุฌู ุงูุฎุตูุต ุ ุฅููู ูุง ูู ูุทููุจ ููุฐุง ุงููุดุฑูุน: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b><code>[DisplayName]</code></b> - ูุณุชุฎุฏู ูุงุณู ุนุฑุถ ูููุฆุฉ.  ูู ุจุนุถ ุงูุฃุญูุงู ูุฏ ูููู ุฐูู ูููุฏูุง ุ ูู ูุฐุง ุงููุดุฑูุน ุฃุถูุช ุจุดูู ุฎุงุต ุงุณุชุฎุฏุงู <code>Html.DisplayNameForModel</code> ุงููุณุงุนุฏ ููุชุธุงูุฑ. </li><li style=";text-align:right;direction:rtl">  <b><code>[Display]</code></b> ูุน ุฎุงุตูุฉ <code>Name</code> - ุชุณุชุฎุฏู ูุงุณู ุฎุงุตูุฉ ุงููุฆุฉ ุงููุนุฑูุถุฉ ุนูู ุงูุดุงุดุฉ.  ููุงู ุฃูุถูุง ุฎุงุตูุฉ ุชุฑุชูุจ ูููุฏุฉ ุชุชูุญ ูู ุชุฑุชูุจ ุชุณูุณู ุนุฑุถ ุฎุตุงุฆุต ุงููุตู ูู ูููุฐุฌ ุจุงุณุชุฎุฏุงู ุงููุณุงุนุฏูู (ุจุดูู ุงูุชุฑุงุถู ุ ุงูุชุฑุชูุจ ุญุณุจ ุงูุชุฑุชูุจ ุงูุฐู ูุชู ุชุนุฑูู ุฎุตุงุฆุต ุงููุฆุฉ ุจู ุ ูุฐูู ูู ูุชู ุงุณุชุฎุฏุงู ุฎุงุตูุฉ ุงูุทูุจ ูู ูุฐุง ุงููุดุฑูุน). </li><li style=";text-align:right;direction:rtl">  <b><code>[HiddenInput]</code></b> ูุน ุฎุงุตูุฉ <code>DisplayValue</code> .  ูุชู ุงุณุชุฎุฏุงูู ููุฎุตุงุฆุต ุงูุชู ูุง ุชุญุชุงุฌ ุฅูู ุฅุธูุงุฑูุง ูู ุงูููุงุฐุฌ ูุงูููุงุฆู ุนูู ุงูุฅุทูุงู ( <code>DisplayValue=false</code> ุ ูุชู ุฑุณููุง ูุนูุงูุงุช <code>input</code> ุจููุน <code>hidden</code> ) ุ ุฃู ููุฎุตุงุฆุต ุงูุชู ูุง ุชุฒุงู ุจุญุงุฌุฉ ุฅูู ุนุฑุถูุง ุ ูููู ูู ุดูู ูุต ุบูุฑ ูุงุจู ููุชุบููุฑ ( <code>DisplayValue=true</code> ุ ูุชู ุฑุณูู ูุซู ุงููุต ุงููุธูู ุ ุฏูู ุนูุงูุงุช) </li><li style=";text-align:right;direction:rtl">  <b><code>[ScaffoldColumn]</code></b> - ูุดูุฑ ุฅูู ูุง ุฅุฐุง ูุงู ุณูุชู ุนุฑุถ ุงูุญูู ูู ุชุญุฑูุฑ <code>Html.EditorForModel</code> (ุนูู ุณุจูู ุงููุซุงู ุ <code>Html.EditorForModel</code> ).  ุฅุฐุง ูุงูุช <code>false</code> ุ ููู ูุชู ุนุฑุถ ูุตู ุฎุงุตูุฉ ุงููุฆุฉ ููุง ูููุชูุง ูู ุงููููุฐุฌ.  ูุง ูููู ุงุณุชุฎุฏุงู <code>[HiddenInput(DisplayValue = false)]</code> ุ ูุฃูู ูู ูุฐู ุงูุญุงูุฉ ูู ูุชู ุนุฑุถ ููู ุฎุงุตูุฉ ูุฐู ุงููุฆุฉ ุนูู ุงูุฅุทูุงู ููุณ ููุท ูู ููุงุฐุฌ ุฅุฏุฎุงู ุงููุนูููุงุช ุ ูููู ุฃูุถูุง ูู ุดุงุดุงุช ุงูุฌุฏูู.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุงู ูุฐุง ูุทููุจูุง ูุฎุงุตูุฉ <code>LastLoginDate</code> ุ ุงูุชู ูู ูุชู ุฅุฏุฎุงููุง ูุฏูููุง ุ ูููู ูุชู ููุคูุง ูู ููุงู ูุง ุชููุงุฆููุง ุ ูููู ูุง ูุฒุงู ุจุญุงุฌุฉ ุฅูู ุฑุคูุชู. </li><li style=";text-align:right;direction:rtl">  <b><code>[Required]</code></b> - ููุชุญูู ูู ุฅุฏุฎุงู ูููุฉ ูุฎุงุตูุฉ ูุฆุฉ ุ ูุน ูุต ุฑุณุงูุฉ ุงูุฎุทุฃ ูู ุฎุงุตูุฉ <code>ErrorMessage</code> ูุฎุงุตูุฉ <code>AllowEmptyStrings</code> ุชุชูุญ ูู ุฅุฏุฎุงู ุณุทูุฑ ูุงุฑุบุฉ. </li><li style=";text-align:right;direction:rtl">  <b><code>[EmailAddress]</code></b> - ููุณ ุงูุณูุฉ ููุณูุง ููุชุญูู ูู ุตุญุฉ ุงูุนููุงู ุงูุจุฑูุฏู. </li></ul><br>  ูุฆุงุช ูููุฐุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฌุงูุฒุฉ ุ ููุชูู ุฅูู ุงูุชูุซูู (ุณูุชู ูุตู ูุฆุงุช ููุงุฐุฌ ุงูุชูุซูู ุฃุฏูุงู). <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฎุงูุณ - ูุนูู ุฃุฏุงุก <s>ุงูุซุฃุฑ</s> </h2><br>  ูู ุฏููู <i>ุทุฑู ุงูุนุฑุถ</i> ุ ูู ุจุฅูุดุงุก ุฏููู <i>ุงููุณุชุฎุฏููู</i> ูุทุฑู ุงูุนุฑุถ ุงูุฎุงุตุฉ ุจูุง.  ุชุณุชุฎุฏู ุฌููุน ุทุฑู ุงูุนุฑุถ ุงูุฎุงุตุฉ ุจูุง ุงููุนูุงุฑ (ุงููุญุฏุฏ ูู ููู <i>_ViewStart.cshtml</i> ูู ุฏููู <i>ุทุฑู ุงูุนุฑุถ</i> ) <i>_Layout.cshtml</i> ุชุฎุทูุท ุงูููุฌูุฏ ูู ุงูุฏููู <i>ุทุฑู ุงูุนุฑุถ \ ุงููุดุชุฑูุฉ</i> .  ุฅูุดุงุก ุทุฑููุฉ ุนุฑุถ <code>Index</code> (ููู <i>Index.cshtml</i> ูู ุฏููู <i>ุงููุณุชุฎุฏููู</i> ): <br><br><img src="https://habrastorage.org/webt/jh/es/jn/jhesjnicwj2g1acx7yziv4f6wqy.png"><br><br>  ูุงูุชุจ ุงูููุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs">@model Example_Users.Models.UsersGrid @{ ViewBag.Title = "Users page"; } @using (@Html.BeginForm()) { <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span>Users list:<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> @if (TempData["message"] != null) {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-success"</span></span></span><span class="hljs-tag">&gt;</span></span>@TempData["message"]<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>} @if (TempData["error"] != null) {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-warning"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"alert"</span></span></span><span class="hljs-tag">&gt;</span></span>ERROR:<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> @TempData["error"]<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>} @Html.Partial("List") <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onNewUser"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"New user"</span></span></span><span class="hljs-tag"> /&gt;</span></span> @*@Html.ActionLink("New user", "New", "Users")*@ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> }</code> </pre> <br>  ุฅุฐุง ููุง ูุฑูุฏ ุฃู ุชุจุฏุฃ ุทุฑููุฉ ุงูุนุฑุถ ูุฐู ุงูุชุฑุงุถููุง ุ <i>ููู</i> ุจุฅุฌุฑุงุก ุชุบููุฑ ุนูู <code>Default</code> ูู ููู <i>RouteConfig.cs</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">routes.MapRoute(name: <span class="hljs-string"><span class="hljs-string">"Default"</span></span>, url: <span class="hljs-string"><span class="hljs-string">"{controller}/{action}/{id}"</span></span>, defaults: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { controller = <span class="hljs-string"><span class="hljs-string">"Users"</span></span>, action = <span class="hljs-string"><span class="hljs-string">"Index"</span></span>, id = UrlParameter.Optional });</code> </pre> <br>  ูู ุงูุนุฑุถ ููุณู ุ ุชุญุชุงุฌ ุฅูู ุงูุงูุชุจุงู ุฅูู ุงูุณุทุฑ ูุน <code>Html.Partial("List")</code> .  ูุฐุง ุถุฑูุฑู ูุฑุณู ูู ูุฐุง ุงูููุงู ุทุฑููุฉ ุนุฑุถ ุฌุฒุฆูุฉ ุนุงูุฉ ูููุตูุฉ ุฎุงุตุฉ ููุฌูุฏุฉ ูู ููู <i>List.cshtml</i> ูู ุงูุฏููู <i>Views \ Shared</i> .  ูู ุงููุงูุน ุ ุฅูู ุฌุฏูู ุดุจูุฉ ูุนุฑุถ ุงูุจูุงูุงุช ูู ุฌุฏูู ูุงุนุฏุฉ ุจูุงูุงุช <code>users</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs">@model Example_Users.Models.UsersGrid @using Example_Users.Domain <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"table-responsive"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"table table-bordered table-hover"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().Loginname).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().Loginname).ToString()))) @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().Loginname).ToString()) <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().Language.LanguageName).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().Language).ToString()))) @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().Language).ToString()) <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().Email).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().Email).ToString()))) @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().Email).ToString()) <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().SupporterTier).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().SupporterTier).ToString()))) @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().SupporterTier).ToString()) <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().LastLoginDate).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().LastLoginDate).ToString()))) @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().LastLoginDate).ToString()) <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> @foreach (var item in Model.Users) { <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.ActionLink(item.Loginname, "Edit", "Users", new { UserID = item.UserID }, null)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.DisplayFor(modelitem =&gt; item.Language.LanguageName)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.DisplayFor(modelitem =&gt; item.Email)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@Html.DisplayFor(modelitem =&gt; item.SupporterTier)"</span></span></span><span class="hljs-tag">&gt;</span></span>@if (item.SupporterTier != Supporter.None) {@Html.DisplayFor(modelitem =&gt; item.SupporterTier);}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>@if (item.IsLastLogin) {@Html.DisplayFor(modelitem =&gt; item.LastLoginDate)}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> } <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> @if (Model.PagingInfo.totalPages &gt; 1) { <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pagination"</span></span></span><span class="hljs-tag">&gt;</span></span> @Html.PageLinks(Model.PagingInfo, x =&gt; Url.Action("Index", new { page = x, sortOrder = Model.SortingInfo.currentSort })) <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> }</code> </pre> <br>  ูููู ููุงุญุธุฉ ุฃูู ูู ุฑุฃุณ ุฌุฏูู ุงูุจูุงูุงุช ุ ูุชู <code>Html.DisplayNameFor</code> ูุณุงุนุฏูู <code>Html.DisplayNameFor</code> ูุนุฑุถ ุฃุณูุงุก ุงูุฃุนูุฏุฉ ูููุฐุง ุนููู ุชุญุฏูุฏ ูุฑุฌุน ูุฎุงุตูุฉ ูุงุฆู ุงููุฆุฉ.  <code>Model.Users</code> ุนูุฏ ุชูููู ุนููุงู ุงูุฌุฏูู ุ ูุง ููุฌุฏ ูุฏููุง ุณูู ูุงุฆู <code>Model.Users</code> ุ ููู ุนุจุงุฑุฉ ุนู ูุงุฆูุฉ ุจุงููุงุฆูุงุช ูู ููุน <code>UserClass</code> ุ ูุนูููุง ุงุณุชุฎุฏุงู ุงูุทุฑููุฉ ุงูุชุงููุฉ: ุญุฏุฏ ุงูุตู ุงูุฃูู ูู ูุฐู ุงููุงุฆูุฉ ููุงุฆู ูู ูุฆุฉ <code>UserClass</code> .  ุนูู ุณุจูู ุงููุซุงู ุ ูุงุณู ุงููุณุชุฎุฏู: <code>Model.Users.First().Loginname</code> .  ูุธุฑูุง ูุฃู ุณูุฉ <code>Loginname</code> ููุฆุฉ <code>Users</code> ุชุญุชูู ุนูู ุงูุณูุฉ <code>[Display(Name = "Login")]</code> ุ ูุณูุชู ุนุฑุถูุง "ุชุณุฌูู ุงูุฏุฎูู" ูู ุงุณู ุงูุนููุฏ: <br><br><img src="https://habrastorage.org/webt/hv/kf/dv/hvkfdvojevmzacuid51wurye8ik.png"><br><br>  ูุง ูู ุงูุขุฎุฑ ุงููุซูุฑ ููุงูุชูุงู ูู ุนุฑุถ <code>List</code> ุ  ูุชูุฉ <code>foreach</code> ุ ุจุงูุทุจุน ุ ูุนุฑุถ ูุงุฆูุงุช ูุฆุฉ <code>UserClass</code> ุงูููุฌูุฏุฉ ูู ูุงุฆูุฉ <code>Users</code> ุงููุณุชููุฉ ูู ูุญุฏุฉ ุงูุชุญูู.  <code>SortingInfo</code> ู <code>PagingInfo</code> ูู ูููุฐุฌ <code>UsersGrid</code> ูุฏููุง ูุซูุฑุฉ ููุงูุชูุงู ููุง.  ููุญู ุจุญุงุฌุฉ ุฅูู ูุฐู ุงููุงุฆูุงุช ูุชูุธูู ูุฑุฒ ุงูุจูุงูุงุช (ุงููุณุชุฎุฏู ูู ุฑุฃุณ ุงูุฌุฏูู ูู ุงูุนูุงูุงุช <code>&lt;th&gt;</code> ) ูุชูุธูู ุชุฑููู ุงูุตูุญุงุช ูู ุงููุนูููุงุช (ุงููุณุชุฎุฏูุฉ ูู ุฃุณูู ุงูุตูุญุฉ ุ ุฃุณูู ุงูุฌุฏูู).  ูุฐุง ูู ุงูุณุจุจ ูู ุฃููุง ูุง ูุณุชุฎุฏู ููููุฐุฌ ูุงุฆูุฉ ุฎุงูุตุฉ ุจุงููุงุฆูุงุช ูู ุงูููุน <code>IEnumerable&lt;UserClass&gt;</code> .  <code>UsersGrid</code> ุ <code>UsersGrid</code> ูุฆุฉ <code>UsersGrid</code> ุ ุงูููุฌูุฏ ูู ููู <i>UsersGrid.cs</i> ูู ุงูุฏููู <i>Model</i> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UsersGrid</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IEnumerable&lt;UserClass&gt; Users { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PagingInfo PagingInfo { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> SortingInfo SortingInfo { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } }</code> </pre> <br>  <code>PagingInfo</code> ู <code>SortingInfo</code> ุฃููุณูู ูู ููู <code>GridInfo.cs</code> ูู ููุณ ุงูููุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PagingInfo</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">//     public int totalItems { get; set; } //     public int itemsPerPage { get; set; } //   public int currentPage { get; set; } //         public int showPages { get; set; } //   public int totalPages { get { return (int)Math.Ceiling((decimal)totalItems / itemsPerPage); } } //           public int pagesSide { get { return (int)Math.Truncate((decimal)showPages / 2); } } } public class SortingInfo { //  ,     public string currentOrder { get; set; } //   public SortDirection currentDirection { get; set; } //      public string currentSort { get { return currentDirection != SortDirection.Descending ? currentOrder : currentOrder + "_desc"; } } //       (      -   ) public string NewOrder(string columnName) { return columnName == currentOrder &amp;&amp; currentDirection != SortDirection.Descending ? columnName + "_desc" : columnName; } }</span></span></code> </pre> <br>  <i>ูููุงุณุชุฎุฏุงู</i> ูู ุทุฑู ุงูุนุฑุถ ุ ุชูุช ุฅุถุงูุฉ ูุณุงุนุฏูู ุฎุงุตูู ุฅูู ููู <i>GridHelpers.cs</i> (ุฏููู <i>HtmlHelpers</i> ): <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GridHelpers</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">//     1 ... 3 4 5 ... Last public static MvcHtmlString PageLinks(this HtmlHelper html, PagingInfo pagingInfo, Func&lt;int, string&gt; pageUrl) { StringBuilder result = new StringBuilder(); if (pagingInfo.currentPage &gt; pagingInfo.pagesSide + 1) {//   TagBuilder li = new TagBuilder("li"); li.AddCssClass("page-item"); TagBuilder tag = new TagBuilder("a"); tag.MergeAttribute("href", pageUrl(1)); tag.InnerHtml = "1"; li.InnerHtml = tag.ToString(); result.Append(li.ToString()); } int page1 = pagingInfo.currentPage - pagingInfo.pagesSide; int page2 = pagingInfo.currentPage + pagingInfo.pagesSide; if (page1 &lt; 1) { page2 = page2 - page1 + 1; page1 = 1; } if (page2 &gt; pagingInfo.totalPages) page2 = pagingInfo.totalPages; if (page1 &gt; 2) {// ... TagBuilder li = new TagBuilder("li"); li.AddCssClass("page-item"); TagBuilder tag = new TagBuilder("span"); tag.InnerHtml = "..."; tag.AddCssClass("page-item"); tag.AddCssClass("disabled"); li.InnerHtml = tag.ToString(); result.Append(li.ToString()); } for (int i = page1; i &lt;= page2; i++) {//  TagBuilder li = new TagBuilder("li"); li.AddCssClass("page-item"); if (i == pagingInfo.currentPage) li.AddCssClass("active"); TagBuilder tag = new TagBuilder("a"); tag.AddCssClass("page-link"); tag.MergeAttribute("href", pageUrl(i)); tag.InnerHtml = i.ToString(); li.InnerHtml = tag.ToString(); result.Append(li.ToString()); } if (page2 &lt; pagingInfo.totalPages) {// ...    TagBuilder li = new TagBuilder("li"); li.AddCssClass("page-item"); TagBuilder tag = new TagBuilder("span"); tag.InnerHtml = "..."; tag.AddCssClass("page-item"); tag.AddCssClass("disabled"); li.InnerHtml = tag.ToString(); result.Append(li.ToString()); li = new TagBuilder("li"); li.AddCssClass("page-item"); tag = new TagBuilder("a"); tag.MergeAttribute("href", pageUrl(pagingInfo.totalPages)); tag.InnerHtml = pagingInfo.totalPages.ToString(); li.InnerHtml = tag.ToString(); result.Append(li.ToString()); } return MvcHtmlString.Create(result.ToString()); } public static IHtmlString SortIdentifier(this HtmlHelper htmlHelper, string sortOrder, string field) { if (string.IsNullOrEmpty(sortOrder) || (sortOrder.Trim() != field &amp;&amp; sortOrder.Replace("_desc", "").Trim() != field)) return null; string glyph = "glyphicon glyphicon-chevron-up"; if (sortOrder.ToLower().Contains("desc")) { glyph = "glyphicon glyphicon-chevron-down"; } var span = new TagBuilder("span"); span.Attributes["class"] = glyph; return MvcHtmlString.Create(span.ToString()); } public static RouteValueDictionary ToRouteValueDictionary(this NameValueCollection collection, string newKey, string newValue) { var routeValueDictionary = new RouteValueDictionary(); foreach (var key in collection.AllKeys) { if (key == null) continue; if (routeValueDictionary.ContainsKey(key)) routeValueDictionary.Remove(key); routeValueDictionary.Add(key, collection[key]); } if (string.IsNullOrEmpty(newValue)) { routeValueDictionary.Remove(newKey); } else { if (routeValueDictionary.ContainsKey(newKey)) routeValueDictionary.Remove(newKey); routeValueDictionary.Add(newKey, newValue); } return routeValueDictionary; } }</span></span></code> </pre> <br>  ูุธุฑูุง ูุฃู ุงูุดุจูุฉ ุงูุชู ุชุญุชูู ุนูู ุจูุงูุงุช ุฏูู ูุฑุฒ ูุฏูู ูุนูููุงุช ุงูุชุฑุญูู ูู ุดูุก ุนุฏูู ุงููุงุฆุฏุฉ ุฅูู ุญุฏ ูุง ุ ููุง ููุฌุฏ ูุณุงุนุฏ ููุงุณู ูุฌุฏูู ูุงูู ููุจูุงูุงุช ูู ASP.NET MVC ุ ุนููู ุฅูุดุงุก ุฐูู ุจููุณู (ุฃู ุงูุชูุงุท ูุงุญุฏุฉ ุฃูุดุฃูุง ุดุฎุต ุขุฎุฑ).  ูู ูุฐู ุงูุญุงูุฉ ุ ููุช ุจุงูุชุฌุณุณ ุนูู ุงูุนุฏูุฏ ูู ุงูุชุทุจููุงุช ูู ูุชุจ ASP.NET MVC ูุงูุญููู ุงูููุฏูุฉ ุนูู ุงูุฅูุชุฑูุช.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุณุจุจ ูุง ุ ุงูุญููู ุงูุชู ุชุฌูุน ุนูู ุงูุฃูู ูุฑุฒ ุงูุจูุงูุงุช ูุชุฑููู ุงูุตูุญุงุช ุ ุฅูุง ุฃููุง ุบูุฑ ููุฌูุฏุฉ ุนูู ุงูุฅุทูุงู ุ ุฃู ูู ุฃุฌุฏูุง.  ุงุถุทุฑุฑุช ุฅูู ููู ูุฐุง ุงูุฃูุฑ ุจุฑูุชู ุ ูุงูุฌูุน ุจูู ูุชุนุฏููู ุฅูู ุญุงูุฉ ุทุจูุนูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุง ููุต ุชุฑููู ุงูุตูุญุงุช ูู ูุฐู ุงูุชุทุจููุงุช ุบุงูุจูุง ุนูู ุฅุฎุฑุงุฌ ูุงุฆูุฉ ุทูููุฉ ุฃู ุฃูู ูู ุงูุตูุญุงุช - ุญุณููุง ุ ูุงุฐุง ูู ูุงู ููุงู ุนุฏุฉ ุขูุงู ูู ุงูุตูุญุงุชุ  ุฃูุฏู ูุซุงู ุนุฑุถ ููุญู ุงูููุถุญ ุฃุนูุงู: <br><br><img src="https://habrastorage.org/webt/wj/dt/yr/wjdtyrmtbxm5f_5jfj7til_iqy0.png"><br><br>  ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุทุฑู ุนุฑุถ ูุฅูุดุงุก ุงูุจูุงูุงุช ูุชุนุฏูููุง.  ุนุฑุถ ูุฅูุดุงุก ูุงุฆู ูู ููุน <code>UserClass</code> : <br><br><img src="https://habrastorage.org/webt/0u/80/-i/0u80-itckfou4ciyyxremebrqy8.png"><br><br>  ูุณูุธูุฑ ุฑูุฒ ุงูุนุฑุถ ูุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">@model Example_Users.Models.UserModel @{ ViewBag.Title = <span class="hljs-string"><span class="hljs-string">"New "</span></span> + Html.DisplayNameForModel().ToString().ToLower(); } &lt;h2&gt;@ViewBag.Title&lt;/h2&gt; @<span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (@Html.BeginForm(<span class="hljs-string"><span class="hljs-string">"New"</span></span>, <span class="hljs-string"><span class="hljs-string">"Users"</span></span>, FormMethod.Post)) { @Html.EditorFor(m =&gt; m.User); @Html.LabelFor(m =&gt; Model.User.Language)&lt;br /&gt; @Html.DropDownListFor(m =&gt; Model.User.Language.LanguageID, Model.SelectLanguages()) &lt;span/&gt;@Html.ValidationMessageFor(m =&gt; Model.User.Language.LanguageID)&lt;br /&gt; &lt;br /&gt; &lt;p&gt;&lt;input type=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> name=<span class="hljs-string"><span class="hljs-string">"action"</span></span> value=<span class="hljs-string"><span class="hljs-string">"Add"</span></span> /&gt; &lt;input type=<span class="hljs-string"><span class="hljs-string">"button"</span></span> onclick=<span class="hljs-string"><span class="hljs-string">"history.go(-1)"</span></span> value=<span class="hljs-string"><span class="hljs-string">"Cancel"</span></span> /&gt;&lt;/p&gt; @*&lt;p&gt;@Html.ActionLink(<span class="hljs-string"><span class="hljs-string">"Back to list"</span></span>, <span class="hljs-string"><span class="hljs-string">"Index"</span></span>)&lt;/p&gt;*@ }</code> </pre> <br>  ุชูุถุญ ุทุฑููุฉ ุงูุนุฑุถ ูุฐู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงุณุชุฎุฏุงู <code>Html.EditorFor</code> ุงููุณุงุนุฏ ููุณููุฉ ูุฅูุดุงุก ุนูุงูุงุช ูุชุญุฑูุฑ ุฌููุน ุฎุตุงุฆุต ุงููุงุฆูุงุช ูู ูุฆุฉ <code>UserClass</code> .  ูุชู ุนุฑุถู ุนูู ุงููุญู ุงูุชุงูู: <br><br><img src="https://habrastorage.org/webt/v-/rz/kw/v-rzkwz4dtui-xhs4lo2vbjyf3s.png"><br><br>  ูุณุชุฎุฏู ูุฐุง ุงูุนุฑุถ ูุฆุฉ <code>UserClass</code> ููููุฐุฌ ุ ูููุณ <code>UserClass</code> ูุจุงุดุฑุฉ.  ุชูุฌุฏ ูุฆุฉ <code>UserModel</code> ููุณูุง ูู ููู <i>UserModel.cs</i> ูู ุฏููู <i>ุงูุทุฑุงุฒุงุช</i> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserModel</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> UserClass User { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> IList&lt;LanguageClass&gt; Languages { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UserModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UserModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UserClass user, IList&lt;LanguageClass&gt; languages)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.User = user; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Languages = languages; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IEnumerable&lt;SelectListItem&gt; SelectLanguages() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Languages != null) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SelectList(Languages, <span class="hljs-string"><span class="hljs-string">"LanguageID"</span></span>, <span class="hljs-string"><span class="hljs-string">"LanguageName"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> null; } }</code> </pre> <br>  ูุชู <code>UserClass</code> ูุงุฆู <code>UserClass</code> ููุณู ููุงุฆูุฉ ุฅุถุงููุฉ ูู ุงููุงุฆูุงุช ูู ููุน <code>LanguageClass</code> ูู ูุฐู ุงููุฆุฉ.  ููุง ุจุญุงุฌุฉ ุฅูู ูุฐู ุงููุงุฆูุฉ ูุฅูุดุงุก ูุงุฆูุฉ ููุณุฏูุฉ ูู ุงููุบุงุช ุ ูุน ุชุญุฏูุฏ ูุบุฉ ุงููุณุชุฎุฏู ุงูุญุงููุฉ ูููุง: <code>@Html.DropDownListFor(m =&gt; Model.User.Language.LanguageID, Model.SelectLanguages(), "")</code> <br><br>  ูุณุชุฎุฏู ูุฐุง ุงููุณุงุนุฏ ุงุณุชุฏุนุงุก <code>SelectLanguages()</code> ุ ูุงูุชู ุชุญูู ูุงุฆูุฉ ุงููุบุงุช ุฅูู ูุงุฆู ูู ุงูููุน <code>SelectList</code> ุจุงุณุชุฎุฏุงู ูุนููุงุช ุงููุนุฑู ูุงุณู ุงูุฎุท <code>SelectLanguages()</code> ุจุงููุนู.  ุณูููู ูุถุน ุฌูู ูู ูุฐุง ุงููุงุฆู ูู ุงูุนุฑุถ ุฎุงุทุฆูุง ุ ูุฃู ุงูููุฑุฉ ูู ุชูู ููุนุฑูุฉ ูุฐู ุงูุฑูุงุจุท ุจุฃุณูุงุก ุงูุญููู.  ุจุงูุทุจุน ุ ุณูููู ูู ุงููููู ุฅูุดุงุก <code>SelectList</code> ุงูุฌุงูุฒุฉ ูุจุงุดุฑุฉ ูู ูุญุฏุฉ ุงูุชุญูู ุ ูููู ุฃุญุจ ุงูุฎูุงุฑ ูุน ูุงุฆูุฉ ุฎุงุตุฉ ุจูุงุฆูุงุช ูุฆุฉ ุงููุฌุงู ููุธููุฉ ุฃูุซุฑ. <br><br>  ูุฅูุดุงุก ูุงุฆูุฉ ููุณุฏูุฉ ุ ูุชุนูู ุนูููุง ุงุณุชุฎุฏุงู ูุณุงุนุฏูู ูููุตููู ุ ูุฃู <code>Html.EditorFor(m =&gt; m.User)</code> ูู ูููุฏ ุนูุงูุฉ ุชุญุฑูุฑ ููุงุฆู ูุถูู ูู ููุน <code>LanguageClass</code> (ูููู ุชุฌุงูุฒ ูุฐุง ุนู ุทุฑูู ูุชุงุจุฉ ูุงูุจ ุนุงู ููููุงุฆู ุงูููุณุฏูุฉ ุ ูููููุง ููุง ูู ููุนู ูุฐุง ...). <br><br>  ููุธุฑูุง ูุฃููุง ูุณุชุฎุฏู ูุงุฆููุง ูู ูุฆุฉ <code>UserModel</code> ูู ุทุฑููุฉ ุงูุนุฑุถ ุงูุฎุงุตุฉ ุจูุง ุ ูุงูุฐู ูุชุถูู ูุงุฆููุง ุขุฎุฑ ูู ูุฆุฉ <code>UserClass</code> ุ ููู ูุชููู ูู ุงุณุชุฎุฏุงู ูุณุงุนุฏ <code>Html.EditorForModel()</code> ุ ูุธุฑูุง ูุฃู ุงููุณุงุนุฏูู ูุง <code>Html.EditorForModel()</code> ููู ูุนูููุง ูู ูุฐุง ุงููููู ุ ูุจุงูุชุงูู ูุชู ุงุณุชุฎุฏุงู ูุณุงุนุฏ <code>Html.EditorFor()</code> ููุงุฆู <code>User</code> . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฑูุฏ ุฃูุถูุง ุงูุงูุชุจุงู ุฅูู ุนูุงูุฉ ุงูุชุนููู: ูู </font></font><code>Html.ActionLink("Back to list", "Index")</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนุงุฏุฉ ุ ูุชู ุชูููุฐ ุนุงุฆุฏ ูู ุทุฑููุฉ ุงูุนุฑุถ ููุชุญุฑูุฑ ูุฑุฉ ุฃุฎุฑู ุฅูู ูุงุฆูุฉ ุงูุจูุงูุงุช ุจุทุฑููุฉ ููุงุซูุฉ. ูู ุงูุญูููุฉ ุ ุฃููุงู ุ ูู ุฑุฃูู ุ ูุจุฏู ุงูุฃูุฑ ุบุฑูุจูุง - ุนูุฏ ุงุณุชุฎุฏุงู ุฃุฒุฑุงุฑ ุงููุชุงุจุฉ ูู ูููุฐุฌ </font></font><code>button</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุชู ุชูููุฐ ุฒุฑ ุงูุฅุฑุฌุงุน ูุณุจุจ ูุง ุจูุงุณุทุฉ ุฑุงุจุท. ุซุงููุงู ุ ุฅุฐุง ุงุณุชุฎุฏููุง ุงููุฑุฒ ูุฅุฎุฑุงุฌ ุงูุตูุญุงุช ุจุงูุตูุญุฉ - ูุฌุจ ุฃู ูููู ุญููููู ูู ุงูุนูุฏุฉ ุฅูู ููุณ ุงูุตูุญุฉ ูู ุงูุนุฑุถ ููุณู - ูุชูุฑูุฑ ุงูุนุฑุถ ููุณ ููุท ุงููุงุฆู </font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููู ุฃูุถูุง ุงููุนููุงุช ููุนูุฏุฉ ูุฑุฉ ุฃุฎุฑู ุฅูู ุงูุตูุญุฉ. ููุงู ุทุฑููุฉ ุฃูุซุฑ ุจุณุงุทุฉ ุจูุซูุฑ - ุงุณุชุฎุฏู ุงูุฎูุงุฑ ูุน ุฒุฑ ูุซู:</font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุชู ุณูู ุชุฑุณู ุงููุณุชุฎุฏู ูุฑุฉ ุฃุฎุฑู ุฅูู ุตูุญุฉ ุณุฌู ุงููุชุตูุญ. ููุง ุ ุจุงูุทุจุน ุ ููุงู ูุฑูู ุฏูููุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ููุฏ ุญุงููุช ุจุงููุนู ุญูุธ ุงููุงุฆู ูู ูุฐู ุงูุตูุญุฉ ุ ูู ุชูุฌุญ ุ ูุงูุขู - ุชุญุชุงุฌ ุจุงููุนู ุฅูู ุงูููุฑ ุงููุฒุฏูุฌ ููู ุฒุฑ "ุฅูุบุงุก") ุ ูููู ูุฐุง ุงูุฎูุงุฑ ููู ูุนูู ุจุดูู ุฌูุฏ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฑุถ ูุชุญุฑูุฑ ูุงุฆู ูู ููุน </font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/a2/eo/xh/a2eoxhk3nzvbvs0h7s_nmjxuems.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑูุฒูุง:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">@model Example_Users.Models.UserModel @{ ViewBag.Title = <span class="hljs-string"><span class="hljs-string">"Edit "</span></span> + Html.DisplayNameForModel().ToString().ToLower(); } &lt;h2&gt;@ViewBag.Title @Model.User.Loginname&lt;/h2&gt; @<span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (@Html.BeginForm(<span class="hljs-string"><span class="hljs-string">"Edit"</span></span>, <span class="hljs-string"><span class="hljs-string">"Users"</span></span>, FormMethod.Post)) { @Html.HiddenFor(m =&gt; Model.User.UserID) &lt;div&gt; @Html.LabelFor(m =&gt; Model.User.Loginname) @Html.EditorFor(m =&gt; Model.User.Loginname) @Html.ValidationMessageFor(m =&gt; Model.User.Loginname) &lt;/div&gt; &lt;div&gt; @Html.LabelFor(m =&gt; Model.User.Language) @Html.DropDownListFor(m =&gt; Model.User.Language.LanguageID, Model.SelectLanguages()) @Html.ValidationMessageFor(m =&gt; Model.User.Language.LanguageID) &lt;/div&gt; &lt;div&gt; @Html.LabelFor(m =&gt; Model.User.Email) @Html.EditorFor(m =&gt; Model.User.Email) @Html.ValidationMessageFor(m =&gt; Model.User.Email) &lt;/div&gt; &lt;div&gt; @Html.LabelFor(m =&gt; Model.User.SupporterTier) @Html.EditorFor(m =&gt; Model.User.SupporterTier) @*@Html.EnumDropDownListFor(m =&gt; Model.User.SupporterTier)*@ @*@Html.DropDownListFor(m =&gt; m.Model.User.SupporterTier, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SelectList(Enum.GetNames(typeof(Example_Users.Domain.Supporter))))*@ @Html.ValidationMessageFor(m =&gt; Model.User.SupporterTier) &lt;/div&gt; &lt;br /&gt; &lt;p&gt;&lt;input type=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> name=<span class="hljs-string"><span class="hljs-string">"action"</span></span> value=<span class="hljs-string"><span class="hljs-string">"Save"</span></span> /&gt; &lt;input type=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> name=<span class="hljs-string"><span class="hljs-string">"action"</span></span> value=<span class="hljs-string"><span class="hljs-string">"Remove"</span></span> onclick=<span class="hljs-string"><span class="hljs-string">"javascript:return confirm('Are you sure?');"</span></span> /&gt; &lt;input type=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> name=<span class="hljs-string"><span class="hljs-string">"action"</span></span> value=<span class="hljs-string"><span class="hljs-string">"Cancel"</span></span> /&gt;&lt;/p&gt; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุทุฑููุฉ ุงูุนุฑุถ ูุฐู ุ ูุชู ุชูุฏูู ุฎูุงุฑ ุงุณุชุฎุฏุงู ูุณุงุนุฏูู ูุฎุชูููู ูุฅูุดุงุก ุนูุงูุงุช ุจุดูู ูููุตู ููู ุฎุงุตูุฉ ูุทููุจุฉ ููุงุฆู ูุฆุฉ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ููููู ุจุงููุนู ุนุฑุถ ุงูุดุงุดุฉ ุจุทุฑููุฉ ูุฎุชููุฉ ูุฌุฐุงุจุฉ: </font></font><br><br><img src="https://habrastorage.org/webt/3g/ew/as/3gewasn6m2whqy9odk4gvrn2l0c.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุทุฑููุฉ ุงูุนุฑุถ ูุฐู ุ ูุชู ุงุณุชุฎุฏุงู ุทุฑููุฉ ุฃุฎุฑู ููุนูุฏุฉ ุฅูู ุงููุงุฆูุฉ. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุงุณุชุฎุฏุงู ุฒุฑ ูุซู: </font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุงุณุชุฎุฏุงู ููุณ ุงูุฒุฑ ูุฃุฒุฑุงุฑ ุฅุฌุฑุงุก ุฃุฎุฑู ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูุธ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฒุงูุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ): </font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชู ุชูููุฐ ุงูุฅุฑุฌุงุน ุฏุงุฎู ุทุฑููุฉ ุงูุชุญูู ุงูุชู ุชุนุงูุฌ ุฅุฌุฑุงุกุงุช ูุฐู ุงูุฃุฒุฑุงุฑ (ุงูุธุฑ ุชูููุฐ ุงูุทุฑููุฉ ุฃุฏูุงู).</font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุนุฏุงุฏ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู ูุงู ููุงู ูุงุฑู ุจุณูุท ูุฑุชุจุท ุจุงุณุชุฎุฏุงู ุฎุงุตูุฉ ูุฆุฉ ูู ููุน </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุนุฏุงุฏ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุงูุญูููุฉ ูู ุฃููุง ุฅุฐุง ุงุณุชุฎุฏููุง ุงููุณุงุนุฏ ููุท </font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font><font style="vertical-align: inherit;">ูุณูุชู </font><font style="vertical-align: inherit;">ุนุฑุถ ุญูู ุฅุฏุฎุงู ูุนูููุงุช ุงููุต (ุนูุงูุฉ ุงููุชุงุจุฉ </font></font><code>&lt;input type=โtextโ/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">ูู ุงููููุฐุฌ </font><font style="vertical-align: inherit;">ุ ููููุง ูุญุชุงุฌ ุญููุง ุฅูู ุญูู ูุน ุงุฎุชูุงุฑ ูู ูุฌููุนุฉ ูู ุงูููู (ูุซู ุนูุงูุฉ </font></font><code>&lt;select&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชูู ุนูู ูุฌููุนุฉ ูู ุงูุฎูุงุฑุงุช </font></font><code>&lt;option&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. ุฎุท ูุณุชููู ูุชู ุญููุง ุจุงุณุชุฎุฏุงู ููุน ุงููุณุงุนุฏ </font></font><code>Html.DropDownListFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู </font></font><code>Html.ListBoxFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุนูู ุณุจูู ุงููุซุงูุ ูู ุญุงูุชูุง </font></font><code>@Html.DropDownListFor(m =&gt; m.Model.User.SupporterTier, new SelectList(Enum.GetNames(typeof(Example_Users.Domain.Supporter))))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุงู ููุนุงู ูู ุงูุณูุจูุงุช - ูู ูู ูุฑุฉ ูุฌุจ ุฃู ูุชู ูุตูู ุจุดูู ูููุฑุฏ ูููุณุงุนุฏ </font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู </font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุฌุญ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. ููููู ุฅูุดุงุก ูุงูุจ ููุน ูุฎุตุต </font></font><code>Editor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฅูุดุงุก ููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Supporter.cshtml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงููุฌูุฏ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑู ุงูุนุฑุถ \ Shared \ EditorTemplates</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs">@model Example_Users.Domain.Supporter @Html.DropDownListFor(m =&gt; m, new SelectList(Enum.GetNames(Model.GetType()), Model.ToString()))</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุชุทุงุจู ุงุณู ุงูููู ูุน ุงุณู ุงูููุน ุ ูุฅูุง ูุณูุชุนูู ุนููู ูุชุงุจุฉ ูุง </font></font><code>Html.EditorFor(m =&gt; Model.SupporterTier)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููู </font></font><code>Html.EditorFor(m =&gt; Model.SupporterTier, "Supporter")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุฅุฐุง ููุช ุจุชุณููุฉ ุงูููู ุจุดูู ูุฎุชูู ุ ูุณุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุชูููุญ ูุจู ูุตู ุงูุฎุงุตูุฉ ูู ุงููุตู ุงูุฏุฑุงุณู </font></font><code>[UIHint("Supporter")]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ููุฌุจ ุฃู ูุชู ุฐูู ุฃูุถูุง ุฅุฐุง ุชู ุงูุชุฎุทูุท ูุงุณุชุฎุฏุงูู </font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><code>Html.EditorFor(m =&gt; Model.SupporterTier, "Supporter")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ููุฌุญ </font><font style="vertical-align: inherit;">ุญู ุงููููุฐุฌ </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I ูุซู ูุฐุง ุงูุฎูุงุฑ ูู ูุฃุช ูู ุญูููุฉ ุฃููุ ุนูุฏ ูุญุงููุฉ ุฅูุดุงุก ูุณุชุฎุฏู (ุนุฑุถ ุจุฏุก </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุฑูุงูุฌ) ูุงููุณุงุนุฏูู </font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชูู ูุน ุงูุฎุทุฃ: " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุฐุฌ ุนูุตุฑ ุชูุฑูุฑูุง ุฅูู ุงููุงููุณุ ูู NULLุ ูููู ูุทููุจ ูุฐู ุงูููุฑุฏุงุช ุนูุตุฑ ููุนยซ Example_Users ูููุฐุฌ. Domain.Supporter "ุ ุบูุฑ ูุงุฑุบ.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ยปุงูุณุจุจ ูุงุถุญ - ูุง ูููู ุฃู ุชููู ูููุฉ ุงููุงุฆูุฉ ูุงุฑุบุฉ ุ ููู ุชุนุฐุฑ ุญู ุงููุดููุฉ. ูุฐูู ุ ุจุฏุฃ ูููู ุฃูุซุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. ููููู ุงุณุชุฎุฏุงู ุงููุณุงุนุฏ </font></font><code>Html.EnumDropDownListFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุตููุน ุฎุตูุตูุง ูุนูููุงุช ุงูููู. ูู ุดูุก ุนูู ูุง ูุฑุงู ููุง ุ ูุง ุดูุก ูุญุชุงุฌ ุฅูู ุฃู ููุชุจ ุ ูู ุดูุก ูุนุฑูุถ ุจุดูู ุตุญูุญ ุ ุฅูู ูุนูู ุนูุฏ ุงูุชุญุฑูุฑ ูุนูุฏ ุฅูุดุงุก ูุงุฆู. ุจุงุณุชุซูุงุก ูุงุญุฏ "ููู": </font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู </font><font style="vertical-align: inherit;">ุงููุณุงุนุฏ </font><font style="vertical-align: inherit;">ูุณุงุนุฏูู ูุนุฑุถ ุฌููุน ุงูุฎุตุงุฆุต </font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุจุงูุชุงูู ูุง ูุณุชุฎุฏููุง </font></font><code>Html.EnumDropDownListFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุ ููุง ุฃููููุงุ ูุฅูู ูุง ูููู ุชุฌูุจูุง ูุน ูุณุงุนุฏุฉ ูู ุณูุงุช ููุฆุฉ ูู ุฎุตุงุฆุต - </font></font><code>[UIHint]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>[DataType]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>[EnumDataType]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ูุง ุชูุนู ุงูุนูู. ูู ุชุนูู ุณูุงุช ููู ุงูุชุนุฏุงุฏ ุฃูุถูุง ุ ุฃู ุฃููุง ูู ุชุนูู ุ ุจุฏูุงู ูู ูุง ุดูุก ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนุฑุถ ุณูุณูุฉ ูุงุฑุบุฉ ุนูู ุงููุญู ุงููุญุฏุฏ ูู ูุตู ุงูุชุนุฏุงุฏ</font></font><code>Supporter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. ููุชูุฌุฉ ูุฐูู ุ ุชูุตูุช ุฅูู ุฎูุงุฑ ุญู </font></font><a href="https://odetocode.com/Blogs/scott/archive/2012/08/29/working-with-enums-and-templates-in-asp-net-mvc.aspx" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฌูุฏ ุนูู ุงูุฅูุชุฑูุช</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุฅูุดุงุก ูุงูุจ ูุดุชุฑู ูุนูููุงุช ุงูููู. </font><font style="vertical-align: inherit;">ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฅูุดุงุก</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู </font><i><font style="vertical-align: inherit;">Enum.cshtml</font></i><font style="vertical-align: inherit;"> ูู ุงููุฌูุฏ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Views \ Shared \ EditorTemplates</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs">@using System.ComponentModel.DataAnnotations @model Enum @{ Func<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">object,</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">string</span></span></span><span class="hljs-tag">&gt;</span></span> GetDisplayName = o =&gt; { var result = null as string; var display = o.GetType() .GetMember(o.ToString()).First() .GetCustomAttributes(false) .OfType<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DisplayAttribute</span></span></span><span class="hljs-tag">&gt;</span></span>() .LastOrDefault(); if (display != null) result = display.GetName(); return result ?? o.ToString(); }; var values = Enum.GetValues(ViewData.ModelMetadata.ModelType).Cast<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">object</span></span></span><span class="hljs-tag">&gt;</span></span>() .Select(v =&gt; new SelectListItem { Selected = v.Equals(Model), Text = GetDisplayName(v), // v.ToString(), Value = v.ToString() }); } @Html.DropDownList("", values)</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุ ุจุดูู ุนุงู ุ ุชุญูู ูู ุดูุก ุจุดูู ุฌูุฏ: ูุนูู ุงููุงูุจ ุจุดูู ุฑุงุฆุน ูููุง ูุงู ุฐูู ูููููุง. </font><font style="vertical-align: inherit;">ูุง </font></font><code>[UIHint("Enum")]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู </font><font style="vertical-align: inherit;">ุญุชู </font><font style="vertical-align: inherit;">ุฅุถุงูุฉ. </font><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ููุฑุฃ ูุฐุง ุงููุงูุจ ุงูุนุงู ุงูุณูุฉ </font></font><code>[Display(Name)]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงูุชุนุฏุงุฏ ุจุงุณุชุฎุฏุงู ุฏุงูุฉ ุฎุงุตุฉ.</font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C ูุนูู ุชุญูู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุงูููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UsersController.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู ุฏููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UsersController</span></span></span><span class="hljs-class"> :</span></span> Controller { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> pageSize = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> showPages = <span class="hljs-number"><span class="hljs-number">15</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    public ViewResult Index(string sortOrder, int page = 1) { string sortName = null; System.Web.Helpers.SortDirection sortDir = System.Web.Helpers.SortDirection.Ascending; sortOrder = Base.parseSortForDB(sortOrder, out sortName, out sortDir); UsersRepository rep = new UsersRepository(); UsersGrid users = new UsersGrid { Users = rep.List(sortName, sortDir, page, pageSize, out count), PagingInfo = new PagingInfo { currentPage = page, itemsPerPage = pageSize, totalItems = count, showPages = showPages }, SortingInfo = new SortingInfo { currentOrder = sortName, currentDirection = sortDir } }; return View(users); } [ReferrerHold] [HttpPost] public ActionResult Index(string onNewUser) { if (onNewUser != null) { TempData["referrer"] = ControllerContext.RouteData.Values["referrer"]; return View("New", new UserModel(new UserClass(), Languages())); } return View(); } [ReferrerHold] public ActionResult New() { TempData["referrer"] = ControllerContext.RouteData.Values["referrer"]; return View("New", new UserModel(new UserClass(), Languages())); } [HttpPost] public ActionResult New(UserModel model) { if (ModelState.IsValid) { if (model.User == null || model.User.Language == null || model.User.Language.LanguageID == 0) RedirectToAction("Index"); UsersRepository rep = new UsersRepository(); if (rep.AddUser(model.User)) TempData["message"] = string.Format("{0} has been added", model.User.Loginname); else TempData["error"] = string.Format("{0} has not been added!", model.User.Loginname); if (TempData["referrer"] != null) return Redirect(TempData["referrer"].ToString()); return RedirectToAction("Index"); } else { model = new UserModel(model.User, Languages()); // -          model.Languages,   return View(model); } } [ReferrerHold] public ActionResult Edit(int UserID) { UsersRepository rep = new UsersRepository(); UserClass user = rep.FetchByID(UserID); if (user == null) return HttpNotFound(); TempData["referrer"] = ControllerContext.RouteData.Values["referrer"]; return View(new UserModel(user, Languages())); } [HttpPost] public ActionResult Edit(UserModel model, string action) { if (action == "Cancel") { if (TempData["referrer"] != null) return Redirect(TempData["referrer"].ToString()); return RedirectToAction("Index"); } if (ModelState.IsValid) { if (model.User == null || model.User.Language == null || model.User.Language.LanguageID == 0) RedirectToAction("Index"); UsersRepository rep = new UsersRepository(); if (action == "Save") { if (rep.ChangeUser(model.User)) TempData["message"] = string.Format("{0} has been saved", model.User.Loginname); else TempData["error"] = string.Format("{0} has not been saved!", model.User.Loginname); } if (action == "Remove") { if (rep.RemoveUser(model.User)) TempData["message"] = string.Format("{0} has been removed", model.User.Loginname); else TempData["error"] = string.Format("{0} has not been removed!", model.User.Loginname); } if (TempData["referrer"] != null) return Redirect(TempData["referrer"].ToString()); return RedirectToAction("Index"); } else { model = new UserModel(model.User, Languages()); return View(model); } } public IList&lt;LanguageClass&gt; Languages() { IList&lt;LanguageClass&gt; languages = new List&lt;LanguageClass&gt;(); LanguagesRepository rep = new LanguagesRepository(); languages = rep.List(); return languages; } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนูุง ูุญูู ุทุฑู ุงูุชุญูู: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1) ุทุฑู </font></font><code>Index</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุถ ุตูุญุฉ ูุน ูุงุฆูุฉ ุงููุณุชุฎุฏููู: </font></font><code>public ViewResult Index(string sortOrder, int page = 1)</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ููุนุงู ูู ูุนููุงุช ุงูุฅุฏุฎุงู </font></font><code>sortOrder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>page</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุน </font></font><code>page</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฃูุซุฑ ุฃู ุฃูู ูุถูุญุงุ ูููู ูู ุฎูุงู </font></font><code>sortOrder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุดุฑูุท ุงูุนูุงูููุ ููููู ุชูุฑูุฑ ุณูุณูุฉ ุงูุชุนุณููุฉุ ููุญู ุจุนุฏ ุฐูู ูุงูุงูุฒุงู ูู ุงุณุชุนูุงู SQL ู ูุง ุชุณุชุทูุน ุงู ุชูุนู ุฐูู ูุจุงุดุฑุฉ. ูุฐูู ุ ูููู ุจุชุญููู ูุฐุง ุงูุณุทุฑ ุจูุณุงุนุฏุฉ ุงูุฏุงูุฉ (ูู ุฃุนุทู ุงููุธููุฉ ููุณูุง ููุง ุ ููููู ุฑุคูุชูุง ูู ููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ): </font></font><code>sortOrder = Base.parseSortForDB(sortOrder, out sortName, out sortDir);</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู ูู ุดูุก </font><i><font style="vertical-align: inherit;">ุจุณูุท</font></i><font style="vertical-align: inherit;"> ุ ูู ุจุฅูุดุงุก ูุงุฆู ูุณุชูุฏุน ุชุฎุฒูู </font></font><code>UsersRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ููุนูู ูุน DBMS ุ ุชูุช ููุงูุดุชู ูู ุงููุตู ุงูุชุงูู) ุ ุงุณุชุฏุนุงุก ุงูุทุฑููุฉ </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญุตูู ุนูู ูุงุฆูุฉ ุงููุณุชุฎุฏููู ู ุดูู ูุงุฆู ูุฆุฉ</font></font><code>UsersGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุงุฆูุฉ ุงููุนููุฉ ูููุณุชุฎุฏููู ูุงููุนูููุงุช ุงููุงุฒูุฉ ูุชูุธูู ุชุฑููู ุงูุตูุญุงุช ูู ุงููุนูููุงุช ูุงููุฑุฒ. ุนูุงูุฉ ุนูู ุฐูู ุ ูุชู ุงูุญุตูู ุนูู ูููุฉ totalItem ุนูุฏูุง ูุชู ุงุณุชุฏุนุงุก ุงูุทุฑููุฉ </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุจุงูุชุฒุงูู ูุน ุฅูุดุงุก ูุงุฆู ุงููุฆุฉ </font></font><code>UsersGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุฐูู ูุชู ููู ูุฐุง ุงููุงุฆู ูุนุฑุถู ุนูู ุงูุชูุซูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ุฃูุถูุง ุทุฑููุฉ ููุฑุณ ุฃุฎุฑู ููุง ุงูุณูุฉ </font></font><code>[HttpPost]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชู ูุญุชุงุฌูุง ูุงุณุชูุดุงู ุงูุฒุฑ ุ ุงููุฑ ููู </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ ุงูุนุฑุถ </font></font><code>Index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><code>public ActionResult Index(string onNewUser)</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชูู ูุนููุฉ ุงูุฅุฏุฎุงู ุนูู </font></font><code>onNewUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดูุก ูุดุชุฑู ูุน ุงูุนูุตุฑ </font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุนุฑุถ </font></font><code>Index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุนูุฏูุง ูุถุบุท ุนูู ูุฐุง ุงูุฒุฑ ุ ุชููู ุจุชูุฑูุฑ ุงููููุฉ ุฅูู ุงููุธููุฉ ุงูุชู ูุชุญูู ูููุง ูู ููุงุจู ุงููููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุงููุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุฅุฐุง ูุงูุช ุฃุฒุฑุงุฑ ุงููุชุงุจุฉ </font></font><code>submit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชููู ูู ุงูุนุฑุถ</font></font><code>Index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฏุฉ ุ ูุฌุจ ุนููู ุงูุชุญูู ูู ุงููููุฉ ููุณูุง (ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชููู ุงููููุฉ "ูุณุชุฎุฏู ุฌุฏูุฏ"). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุงูุชุฏููู ุ ูููู ุจุชูููู ูุงุฆู ูุฆุฉ </font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุชููู ูู ูุงุฆู ุฌุฏูุฏ </font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฆูุฉ ูู ุงููุบุงุช ูุชุญุฏูุฏูุง ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ูููููุง ุฅูู ุงูุนุฑุถ ุงูุชูุฏููู </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุชู ุงูุญุตูู ุนูู ูุงุฆูุฉ ุงููุบุงุช ูู ุงููุณุชูุฏุน ุนู ุทุฑูู </font></font><code>LanguageRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฏุนุงุก ุงูุทุฑููุฉ </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ููู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IList&lt;LanguageClass&gt; Languages() { LanguagesRepository rep = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LanguagesRepository(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rep.List(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2) ุงูุทุฑู: ูุชู </font></font><code>New</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฌุฑุงุก ุทุฑููุฉ </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูู ูุนููุฉ ูุฅูุฌุงุฏ ููุฑุฉ ุนูู ุฑุงุจุท </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุฌุฏูุฏ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณุทุฑ ุงูุชุนููู </font></font><code>Html.ActionLink("New user", "New", "Users")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุนุฑุถ </font></font><code>Index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุชู ุชูููุฐ ุงูุฅุฌุฑุงุก (ูุชุญ ุงูุนุฑุถ </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุจุดูู ูุดุงุจู </font><font style="vertical-align: inherit;">ููุฅุฌุฑุงุก </font><font style="vertical-align: inherit;">ุงูุณุงุจู ุ ููุท ูุง ููุฌุฏ ูุญุต ููุฒุฑ ุงูุฐู ุชู ุงูุถุบุท ุนููู ุ ูุฃู ุงูููุฑ ุนูู ุงูุฑุงุจุท ูุชู ุชูููุฐู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ุงููุนููุฉ ุทุฑุงุฒ ูู ููุน </font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุนุงูุฌุฉ ุญุฏุซ ุฅุฑุณุงู ุจูุงูุงุช ุงููููุฐุฌ ูู ุฃุฌู ุญูุธ ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช: </font></font><code>public ActionResult New(UserModel model)</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฑุฏุงุฏ ูุงุฆู ูุฆุฉ ูุนุจุฃ ูู ุทุฑููุฉ ุงูุนุฑุถ ุงูุฌุฏูุฏุฉ </font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช (ูููุง ูููุชุทูุจุงุช ุงููุฐููุฑุฉ ูู </font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>LanguageClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ </font></font><code>UsersRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅูุดุงุก </font><font style="vertical-align: inherit;">ูุงุฆู ูุณุชูุฏุน </font><font style="vertical-align: inherit;">ููุญุงูู ุฅุถุงูุฉ ุตู ุฌุฏูุฏ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ุงุณุชุฏุนุงุก ูุธููุฉ</font></font><code>AddUser(model.User)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุซู ูุนูุฏ ุฅูู ุงูุตูุญุฉ ุงูุณุงุจูุฉ (ุญูุซ ุชู ุงุณุชุฏุนุงุก ุงูุนุฑุถ </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ููุชู ุนุฑุถ ุฑุณุงูุฉ ููุงู ุชุดูุฑ ุฅูู ูุฌุงุญ ุงูุนูููุฉ ุฃู ุงููุดู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3) ุงูุทุฑู: </font><font style="vertical-align: inherit;">ุชููุฑ </font></font><code>Edit</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ </font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฐุงุช ูุนููุฉ ุฅุฏุฎุงู </font></font><code>UserID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ูุนุฑู ุงููุณุชุฎุฏู) ุนูู ุงุณู ุงููุณุชุฎุฏู ูู ุงููุงุฆูุฉ ููุชุญ ุนุฑุถ ุชุญุฑูุฑ ุจูุงูุงุช ุงููุณุชุฎุฏู: </font></font><code>public ActionResult Edit(int UserID)</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุทุฑููุฉ ุ ูุชู ุฅูุดุงุก ูุณุชูุฏุน ูุฑุฉ ุฃุฎุฑู </font></font><code>UsersRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชู ุงุณุชุฏุนุงุก ุฏุงูุฉ ููู </font></font><code>FetchByID(UserID)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญุตูู ุนูู ูุงุฆู ูู ุงูููุน </font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูู ุญุงูุฉ ุงููุฌุงุญ ุ ูุชู ุฅูุดุงุก ูููุฐุฌ - ูุงุฆู ูุฆุฉ </font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุงุฆู ุงููุณุชูู ููุงุฆูุฉ ุงููุบุงุช ูุชูุฑูุฑู ุฅูู ุงูุนุฑุถ </font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุนุฑุถ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ูุน ูุนููุฉ ุฅุฏุฎุงู ูู ุงูููุน </font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุตู </font><font style="vertical-align: inherit;">ุงููููุฐุฌ </font></font><code>action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><code>public ActionResult Edit(UserModel model, string action)</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชูุฑูุฑ ูุงุฆู ุงููุชุงุจุฉ ุฅูู ูุฐู ุงูุทุฑููุฉ </font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุจูุนุงูุฌุฉ ุงูุฅุฌุฑุงุกุงุช ุนูุฏ ุงูููุฑ ููู ุงูุฃุฒุฑุงุฑ (ูุนุงูุฌุฉ ุฃุญุฏุงุซ ุฅุฑุณุงู ุจูุงูุงุช ุงููููุฐุฌ) </font><font style="vertical-align: inherit;">ูุทุฑููุฉ </font><font style="vertical-align: inherit;">ุงูุนุฑุถ </font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูููู ุฃู ุฒุฑ ูุชู ุงูุถุบุท ุนููู ุ ูุชู ุงุณุชุฎุฏุงู ูุนููุฉ ุงูุฅุฏุฎุงู </font></font><code>action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุชู ุชุชู ุงูุฅุดุงุฑุฉ ุฅูููุง ุจุงุณู ุนูุงูุงุช ููุน HTML </font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุฐูู ุ ููุงุฑู ุงูุฃุณููุจ ููู ูุฐู ุงููุนููุฉ ูุน ููู ุงููุนููุงุช ูู </font></font><code>value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐู ุงูุฃุฒุฑุงุฑ. ูุจู ุงูุชุญูู ูู ุตุญุฉ ุงููููุฐุฌ ุ ูุชู ุงูุชุญูู ูู ุงููููุฉ </font></font><code>Cancel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃุฏุงุก ุฅุฌุฑุงุกุงุช ูุฅูุบุงุก ุชุญุฑูุฑ ุงููุณุชุฎุฏู. ููุณุชุฎุฏู ูุฐุง ุงูุฎูุงุฑ ุจุฏูุงู ูู ุงูุฑุฌูุน ุฅูู ูุญููุธุงุช ุงููุณุชุนุฑุถ ุ ูุงูุฐู ููุณุชุฎุฏู ูู ุทุฑููุฉ ุงูุนุฑุถ </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณุชุฎุฏู ุชุฎุฒูู ุนููุงู ุงูุตูุญุฉ ุงูุชู ุชูุช ุฅุนุงุฏุฉ ุชูุฌูู ุงูุนุฑุถ ูููุง.</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ููููุงู ุจุฐูู ุ </font><i><font style="vertical-align: inherit;">ุฃูุถุญุช</font></i><font style="vertical-align: inherit;"> ูุญุฏุฉ ุงูุชุญูู ุชูููุฉ ุงุณุชุฎุฏุงู ุงูุณูุฉ ุงูุฎุงุตุฉ ุจูุง </font></font><code>ActionFilter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ุงููุฆุฉ </font></font><code>ReferrerHoldAttribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReferrerHoldAttribute.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ุฏููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HtmlAttribute</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReferrerHoldAttribute</span></span></span><span class="hljs-class"> :</span></span> ActionFilterAttribute { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnActionExecuting</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ActionExecutingContext filterContext)</span></span></span><span class="hljs-function"> </span></span>{ var referrer = filterContext.RequestContext.HttpContext.Request.UrlReferrer; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (referrer != null) filterContext.RouteData.Values.Add(<span class="hljs-string"><span class="hljs-string">"referrer"</span></span>, referrer); base.OnActionExecuting(filterContext); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุงุณุชุฎุฏุงูู ูุชุฎุฒูู ูุนูููุงุช ุญูู ุงูุตูุญุฉ ุงูุชู ุชุญุชุงุฌ ุฅูู ุงูุฑุฌูุน ุฅูููุง ุจุนุฏ ุงูููุฑ ุนูู ุฒุฑ </font><font style="vertical-align: inherit;">" </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุฌุฏูุฏ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " ุฃู ุฑุงุจุท ูุชุบููุฑ ุงููุณุชุฎุฏู: </font></font><code>TempData["referrer"] = ControllerContext.RouteData.Values["referrer"];</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ุฅูููุง ุญุชู ูุง ููุชุจ ูู ููุณ ุงูููุช ููุณ ุงูููุฏ ุจุทุฑู ูุฎุชููุฉ. ูุฏ ูููู ูู ุงููููู ูุชุงุจุฉ ูุธููุฉ ูููุตูุฉ ูู ูุญุฏุฉ ุงูุชุญูู ุ ูููู ุฅุฐุง ุชู ุงุณุชุฎุฏุงู ุนุฏุฉ ูุญุฏุงุช ุชุญูู ุ ูุณูููู ูู ุงูุฃูุถู ุงุณุชุฎุฏุงู ููุน ุณูุฉ ุฎุงุต. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ููุช ูุงุญูุ ูู ุงูุฌุณู ูู ุงูุทุฑููุฉ ุงูุชู ูุชุนุงูู ุงูุชูุซูู </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชุฎุฒูู ุงููุนูููุงุช ุงููุณุชุฎุฑุฌุฉ ูุชุณุชุฎุฏู ูุฅุนุงุฏุฉ ุชูุฌูู ููุนูุฏุฉ ุฅูู ุงูุตูุญุฉ ุงูุชู ูุงูุช ุชุณูู ูุฐู ุงูุฃููุงุฑ: </font></font><code>if (TempData["referrer"] != null) return Redirect(TempData["referrer"].ToString());</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญุฏูุฏ ุงูุญุงุฌุฉ ุฅูู ุญูุธ ุฃู ุญุฐู ุงููุณุชุฎุฏู ููุงุฑู ุงููุนููุฉ </font></font><code>action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ุงูููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูุธ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฒุงูุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุนูู ุงูุชูุงููุ ูุงููุงุฌูุฉ ุนู ูุณุชูุฏุน </font></font><code>UsersRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธููุฉ </font></font><code>ChangeUser(model.User)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>RemoveUser(model.User)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุซู ููุงู ุนูุฏุฉ ุฅูู ุงูุตูุญุฉ ุงูุณุงุจูุฉ (ุญูุซ ุฃุชุช ููุงููุฉ ุงูุนุฑุถ </font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ููุชู ุนุฑุถ ุฑุณุงูุฉ ุชุดูุฑ ุฅูู ูุฌุงุญ ุงูุนูููุฉ ุฃู ุงููุดู.</font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ADO.NET ู MySQL - ูุณุชูุฏุน </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูุตููุง ุฃุฎูุฑูุง ุฅูู ุงูุนูู ูุน ูุธุงู ุฅุฏุงุฑุฉ ููุงุนุฏ ุงูุจูุงูุงุช. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุชูููุฐ ูุธุงุฆู ุฅุถุงูุฉ ูุณุชุฎุฏู ุฅูู ุฌุฏูู </font></font><code>Users</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฅุฌุฑุงุก ุชุบููุฑุงุช ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุ ูุฅุฒุงูุฉ ูุณุชุฎุฏู ูู ุงูุฌุฏูู ุ ูุงูุญุตูู ุนูู ุงููุณุชุฎุฏู ุจูุนุฑู ุ ูุงูุญุตูู ุนูู ูุงุฆูุฉ ุงููุณุชุฎุฏููู ุ ูุงูุญุตูู ุนูู ูุงุฆูุฉ ุจุงููุบุงุช ูู ุงูุฌุฏูู </font></font><code>Languages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุชุฎุฏู ูุนุธู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจููุงุช ุงูููุงุณูุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฆุฉ </font><i><font style="vertical-align: inherit;">MySQL.Data</font></i><font style="vertical-align: inherit;"> ุจุงุณุชุฎุฏุงู </font></font><code>MySqlCommand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlConnection connect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection( )) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> sql = <span class="hljs-string"><span class="hljs-string">" "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlCommand cmd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlCommand(sql, connect)) { cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">" "</span></span>,  ).Value =  ; connect.Open(); result = cmd.ExecuteNonQuery() &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//        (INSERT, UPDATE, DELETE)   cmd.ExecuteScalar()         SELECT } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู </font></font><code>MySqlDataReader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑุงุกุฉ ุตููู ุงูุฌุฏูู ููุชูุฌุฉ ููุงุณุชุนูุงู:</font></font><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlConnection connect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection( )) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> sql = <span class="hljs-string"><span class="hljs-string">" "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlDataReader dr = cmd.ExecuteReader()) { cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">" "</span></span>,  ).Value =  ; objConnect.Open(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (dr.Read()) {<span class="hljs-comment"><span class="hljs-comment">//       } } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฅูุดุงุก</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู </font><i><font style="vertical-align: inherit;">UserRepository.cs</font></i><font style="vertical-align: inherit;"> ูู ุฏููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑุงุฒุงุช</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UsersRepository</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UserClass user)</span></span></span><span class="hljs-function"> </span></span>{ user.UserID = AddUser(Name: user.Loginname, LanguageID: user.Language.LanguageID, Email: user.Email, SupporterTier: user.SupporterTier); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> user.UserID &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Name, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> LanguageID, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Email, Supporter SupporterTier)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ID = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlConnection connect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection(Base.strConnect)) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> sql = <span class="hljs-string"><span class="hljs-string">"INSERT INTO `Users` (`Loginname`, `LanguageID`, `Email`, `SupporterTier`) VALUES (@Loginname, @LanguageID, @Email, @SupporterTier)"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlCommand cmd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlCommand(sql, connect)) { cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"Loginname"</span></span>, MySqlDbType.String).Value = Name; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"LanguageID"</span></span>, MySqlDbType.Int32).Value = LanguageID; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>, MySqlDbType.String).Value = Email; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"SupporterTier"</span></span>, MySqlDbType.Int32).Value = SupporterTier; connect.Open(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cmd.ExecuteNonQuery() &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { sql = <span class="hljs-string"><span class="hljs-string">"SELECT LAST_INSERT_ID() AS ID"</span></span>; cmd.CommandText = sql; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.TryParse(cmd.ExecuteScalar().ToString(), out ID); } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ID; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ChangeUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UserClass user)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ChangeUser(ID: user.UserID, Name: user.Loginname, LanguageID: user.Language.LanguageID, Email: user.Email, SupporterTier: user.SupporterTier); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ChangeUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ID, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Name, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> LanguageID, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Email, Supporter SupporterTier)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> result = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ID &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlConnection connect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection(Base.strConnect)) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> sql = <span class="hljs-string"><span class="hljs-string">"UPDATE `Users` SET `Loginname`=@Loginname, `LanguageID`=@LanguageID, `Email`=@Email, `SupporterTier`=@SupporterTier WHERE UserID=@UserID"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlCommand cmd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlCommand(sql, connect)) { cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"UserID"</span></span>, MySqlDbType.Int32).Value = ID; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"Loginname"</span></span>, MySqlDbType.String).Value = Name; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"LanguageID"</span></span>, MySqlDbType.Int32).Value = LanguageID; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>, MySqlDbType.String).Value = Email; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"SupporterTier"</span></span>, MySqlDbType.Int32).Value = SupporterTier; connect.Open(); result = cmd.ExecuteNonQuery() &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoveUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UserClass user)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> RemoveUser(user.UserID); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoveUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ID)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlConnection connect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection(Base.strConnect)) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> sql = <span class="hljs-string"><span class="hljs-string">"DELETE FROM `Users` WHERE `UserID`=@UserID"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlCommand cmd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlCommand(sql, connect)) { cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"UserID"</span></span>, MySqlDbType.Int32).Value = ID; connect.Open(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cmd.ExecuteNonQuery() &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> UserClass </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FetchByID</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ID)</span></span></span><span class="hljs-function"> </span></span>{ UserClass user = null; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlConnection objConnect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection(Base.strConnect)) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> strSQL = <span class="hljs-string"><span class="hljs-string">"SELECT u.`UserID`, u.`Loginname`, l.`LanguageID`, l.`LanguageName`, u.`Email`, u.`LastLoginDate`, CAST(u.`SupporterTier` AS UNSIGNED) as `SupporterTier` FROM `Users` u LEFT JOIN `Languages` l ON l.LanguageID=u.LanguageID WHERE `UserID`=@UserID"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlCommand cmd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlCommand(strSQL, objConnect)) { objConnect.Open(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> UserID = <span class="hljs-number"><span class="hljs-number">0</span></span>, LanguageID = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> Loginname = null, LanguageName= null, Email = String.Empty; Supporter SupporterTier = Supporter.None; DateTime? LastLoginDate = null; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"UserID"</span></span>, MySqlDbType.Int32).Value = ID; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlDataReader dr = cmd.ExecuteReader()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dr.Read()) { UserID = dr.GetInt32(<span class="hljs-string"><span class="hljs-string">"UserID"</span></span>); Loginname = dr.GetString(<span class="hljs-string"><span class="hljs-string">"Loginname"</span></span>).ToString(); LanguageID = dr.GetInt32(<span class="hljs-string"><span class="hljs-string">"LanguageID"</span></span>); LanguageName = dr.GetString(<span class="hljs-string"><span class="hljs-string">"LanguageName"</span></span>).ToString(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>))) Email = dr.GetString(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>).ToString(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string"><span class="hljs-string">"LastLoginDate"</span></span>))) LastLoginDate = dr.GetDateTime(<span class="hljs-string"><span class="hljs-string">"LastLoginDate"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string"><span class="hljs-string">"SupporterTier"</span></span>))) SupporterTier = (Supporter)dr.GetInt32(<span class="hljs-string"><span class="hljs-string">"SupporterTier"</span></span>); } LanguageClass language = null; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (LanguageID &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) language = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LanguageClass(LanguageID: LanguageID, LanguageName: LanguageName); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (UserID &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; language != null &amp;&amp; language.LanguageID &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) user = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserClass(UserID: UserID, Loginname: Loginname, Language: language, Email: Email, LastLoginDate: LastLoginDate, SupporterTier: (Supporter)SupporterTier); } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> user; } <span class="hljs-comment"><span class="hljs-comment">//       ASP.NET WebForms,             ObjectDataSource      //     ,         " "         //public IEnumerable&lt;DataRow&gt; List() //{ // using (MySqlConnection objConnect = new MySqlConnection(Base.strConnect)) // { // string strSQL = "select * from users"; // using (MySqlCommand objCommand = new MySqlCommand(strSQL, objConnect)) // { // objConnect.Open(); // using (MySqlDataAdapter da = new MySqlDataAdapter(objCommand)) // { // DataTable dt = new DataTable(); // da.Fill(dt); // return dt.AsEnumerable(); // } // } // } //} public IList&lt;UserClass&gt; List(string sortOrder, System.Web.Helpers.SortDirection sortDir, int page, int pagesize, out int count) { List&lt;UserClass&gt; users = new List&lt;UserClass&gt;(); using (MySqlConnection objConnect = new MySqlConnection(Base.strConnect)) { //     string sort = " ORDER BY "; //   ,               (inject) // ,  , MySQL        //    ,         (       ) //        ,    if (sortOrder != null &amp;&amp; sortOrder != String.Empty) { sort += "`" + sortOrder + "`"; if (sortDir == System.Web.Helpers.SortDirection.Descending) sort += " DESC"; sort += ","; } sort += "`UserID`"; //   //        ( ) string limit = ""; if (pagesize &gt; 0) { int start = (page - 1) * pagesize; limit = string.Concat(" LIMIT ", start.ToString(), ", ", pagesize.ToString()); } string strSQL = "SELECT SQL_CALC_FOUND_ROWS u.`UserID`, u.`Loginname`, l.`LanguageID`, l.`LanguageName` as `Language`, u.`Email`, u.`LastLoginDate`, CAST(u.`SupporterTier` AS UNSIGNED) as `SupporterTier` FROM `Users` u LEFT JOIN `Languages` l ON l.LanguageID=u.LanguageID" + sort + limit; using (MySqlCommand cmd = new MySqlCommand(strSQL, objConnect)) { objConnect.Open(); cmd.Parameters.Add("page", MySqlDbType.Int32).Value = page; cmd.Parameters.Add("pagesize", MySqlDbType.Int32).Value = pagesize; using (MySqlDataReader dr = cmd.ExecuteReader()) { while (dr.Read()) { LanguageClass language = new LanguageClass(LanguageID: dr.GetInt32("LanguageID"), LanguageName: dr.GetString("Language").ToString()); users.Add(new UserClass( UserID: dr.GetInt32("UserID"), Loginname: dr.GetString("Loginname"), Language: language, Email: dr.IsDBNull(dr.GetOrdinal("Email")) ? String.Empty : dr.GetString("Email"), LastLoginDate: dr.IsDBNull(dr.GetOrdinal("LastLoginDate")) ? (DateTime?) null : dr.GetDateTime("LastLoginDate"), SupporterTier: dr.IsDBNull(dr.GetOrdinal("SupporterTier")) ? (Supporter) Supporter.None : (Supporter)dr.GetInt32("SupporterTier"))); } } } using (MySqlCommand cmdrows = new MySqlCommand("SELECT FOUND_ROWS()", objConnect)) { int.TryParse(cmdrows.ExecuteScalar().ToString(), out count); } } return users; } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชูู ุนูู ุทุฑููุฉ </font></font><code>AddUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุถุงูุฉ ูุณุชุฎุฏู ุ ูุชุญุฏูุซ ุจูุงูุงุช ุงููุณุชุฎุฏู ( </font></font><code>ChangeUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ูุญุฐู ( </font></font><code>RemoveUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ูุงูุจุญุซ ุนู ูุณุชุฎุฏู ( </font></font><code>FetchByID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุจูุนุฑู ุ ูุงูุทุฑููุฉ ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฑุถ ูุงุฆูุฉ ููุณูุฉ ุฅูู ุตูุญุงุช ูู ุงููุณุชุฎุฏููู ุจุงููุฑุฒ. </font><font style="vertical-align: inherit;">ุฃูุฏ ุฃู ุฃุนูู ุจุดูู ุฅุถุงูู ุนูู ุงููุธููุฉ </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุณุชุญู ุฅุนุงุฏุฉ ุงูุฌุฏูู ( </font></font><code>DataTable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุนูู ูุฐุง ุงููุญู - ูู ูุฐู ุงูุญุงูุฉ ุ ุณูููุฏ ุงููุฏุฑุฉ ุนูู ุงููุตูู ุฅูู ุนูุงุตุฑ ุงููุฆุฉ ูู ุงูุนุฑุถ ูุณูุถุทุฑ ูุงุณุชุฎุฏุงู ุซูุงุจุช ุงูุณูุณูุฉ ููุฅุดุงุฑุฉ ุฅูู ุงูููู ุงูููุฌูุฏุฉ ูู ุตู ุงูุฌุฏูู.</font></font> ุฃู          SQL-.       <code>UserClass</code> . </li><li style=";text-align:right;direction:rtl">          <code>LIMIT</code>  SQL- <code>SELECT</code> .  ,  MySQL      ,   <code>LIMIT</code>       .   ,     ,       <code>ORDER BY</code>           . ,         SQL-,     SQL   ,       ,     .       ,      ,          :         . </li><li style=";text-align:right;direction:rtl">           SQL  <code>SELECT FOUND_ROWS()</code> ,          ,     <code>SELECT SQL_CALC_FOUND_ROWS</code>     <code>LIMIT</code> . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌููุน ุงูุทุฑู ุงูุฃุฎุฑู ุนุงุฏูุฉ ุชูุงููุง ุ ุจูุง ูุชูุงูู ูุน ุงูุดุฑูุนุฉ ุฃุนูุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LanguageRepository.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุฏููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑุงุฒุงุช</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LanguagesRepository</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IList&lt;LanguageClass&gt; List() { List&lt;LanguageClass&gt; languages = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;LanguageClass&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlConnection objConnect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection(Base.strConnect)) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> strSQL = <span class="hljs-string"><span class="hljs-string">"SELECT `LanguageID`, `LanguageName` as `Language` FROM `Languages` ORDER BY `LanguageName`"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlCommand cmd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlCommand(strSQL, objConnect)) { objConnect.Open(); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlDataReader dr = cmd.ExecuteReader()) { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (dr.Read()) { LanguageClass language = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LanguageClass(LanguageID: dr.GetInt32(<span class="hljs-string"><span class="hljs-string">"LanguageID"</span></span>), LanguageName: dr.GetString(<span class="hljs-string"><span class="hljs-string">"Language"</span></span>).ToString()); languages.Add(language); } } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> languages; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏูู ูุธููุฉ ูุงุญุฏุฉ ููุท ููุญุตูู ุนูู ูุงุฆูุฉ ุจุงููุบุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุฅูุดุงุก ูุงุฆูุฉ ูู ุนูุงุตุฑ ุงููุตู </font></font><code>LanguageClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><h2 style=";text-align:right;direction:rtl">  ูู ุงููุฌููุน </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ูู ุดูุก - ุชู ุญู ุงููููุฉ. </font><font style="vertical-align: inherit;">ูู ุงููุงุถุญ ุฃูู ูู ุชุชู ูุนุงูุฌุฉ ุงูุนุฏูุฏ ูู ุงููุดููุงุช: ุญุงููุฉ ุญูู ุงูุชุจุนูุฉ ุ ูุงุฎุชุจุงุฑ ุงููุญุฏุฉ ุ ูุฃุฏูุงุช moking ุ ูุงูุชุนุฑูุจ ุ ุฅูุฎ.</font></font> ุฅูุฎ<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฃู ูุชู ุจุนุถ ุงูุฃุดูุงุก ุจุดูู ูุฎุชูู ุฃู ุจุจุณุงุทุฉ ุฃูุถู. </font><font style="vertical-align: inherit;">ููู "ุงูุทูุจ" ุงูุฐู ุชู ุฅูุชุชุงุญู ุฌุงุก ูุงููุงู ุจูุง ููู ุงูููุงูุฉ ูููู ููููุฉ ุนูู ASP.NET MVC ูุฃูู ููุณ ูุฎูููุง ุฌุฏูุง ุงูุชุนุงูู ูุน ADO.NET ู DBMSs ุงูุชู ููุณุช MS SQL. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ: ูุฃุฎูุฑุง ุ ููููู ุฃู ุชุฑู ููู ูุนูู ูุฐุง ุงููุดุฑูุน ุนูู </font></font><a href="http://example-mvc.azurewebsites.net/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ุงูุนููุงู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ู </font></font><a href="https://yadi.sk/d/EArrZdGh_iVaJg" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููู ุชุญููู ุงููุดุฑูุน ุจุฃูููู. </font><font style="vertical-align: inherit;">ุญุณูุง ุ ุฅูู ุงููููุฉ - ุฑุงุจุท </font></font><a href="https://dukeyusupov.wordpress.com/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจูุฏู ุจููู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar482346/">https://habr.com/ru/post/ar482346/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar482330/index.html">ูุงุฆูุฉ ุงูุฃุญุฌุงุฑ ุงููุฑููุฉ ุงูุฃุณุงุณูุฉ ูุชุญุฏูุฏ ููุงูุญ ุฑูุจู ุนูู ุชุทุจูู ุงููุถุจุงู</a></li>
<li><a href="../ar482336/index.html">ูููู ููุชุฌุงุฑ ุงููุตูู ุฅูู ุงููุคุชูุฑุงุช ุงูุตุญููุฉ ููุจูู ุงููุฑูุฒู ูู ุฅูุฌูุชุฑุง ูุจู ุจุซูู ุงูุนุงู</a></li>
<li><a href="../ar482338/index.html">Visual Studio for Mac: ุชุญูู ูู IDE ุงูุฎุงุต ุจู ุจุงุณุชุฎุฏุงู ุงูููุงุชูุญ</a></li>
<li><a href="../ar482340/index.html">ูู Junior'a ุฅูู Middle'a: ุงููุญูู ุงููุบูู</a></li>
<li><a href="../ar482344/index.html">ุงุญุตู ุนูู ุงุณุชุนุฏุงุฏ ูุฅุฏุฎุงู ุงูุชุตููู ุงูุงุฌุชูุงุนู ูู ุฑูุณูุง</a></li>
<li><a href="../ar482348/index.html">ุงูุทูุจูููุฌูุง ูุงูุชุญููู ุงูุดุงูู ููุทูุฑ ุงูุฃูุนุงุจ ุงููุทูุฆู: ุถุบุท ุงููุชุฌูุงุช ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ุงููุฑุฏูุฉ</a></li>
<li><a href="../ar482352/index.html">ููุง ุฑููุช ุชูุฑูุจุง 150K ูู ููุจ ุงูุฑูุญ ุฃู ุชุงุฑูุฎ ุชุฑููุจ ุงูุชูููุฉ ุงููุณุฑูุฉ ูู ุงูุดูุฉ</a></li>
<li><a href="../ar482354/index.html">ConfigureAwait: ุงูุฃุณุฆูุฉ ุงููุชุฏุงููุฉ</a></li>
<li><a href="../ar482356/index.html">ุงุณุชุฎุฏุงู Windows Server ุฏูู ุงููุณุชูุดู ูู ูุฌูุฉ ูุธุฑ ูุณุชุฎุฏู Windows ุงูุนุงุฏู</a></li>
<li><a href="../ar482360/index.html">ุงููุจุงุญุซ ูุจุฑุง: ูู ุฃุตุฏูุงุก ูุน ุงูุฃุฌุณุงู ุงูุบุฑูุจุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>