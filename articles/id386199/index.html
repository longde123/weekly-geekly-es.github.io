<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👀 😚 ♍️ Kisah tentang bagaimana pengontrol perfeksionisme mereset saya 🙄 🧓🏻 🧑🏾‍🤝‍🧑🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya berpikir untuk membeli pembuat yogurt. Ya, sehingga yogurt membuat kualitas yang baik dan selalu sama. Apa yang dibutuhkan untuk ini? Pertama, ba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kisah tentang bagaimana pengontrol perfeksionisme mereset saya</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/386199/"><img src="https://habrastorage.org/files/37d/40d/7e3/37d40d7e35b541be9f60a172bddb7553.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya berpikir untuk membeli pembuat yogurt. Ya, sehingga yogurt membuat kualitas yang baik dan selalu sama. Apa yang dibutuhkan untuk ini? Pertama, bahan baku, kedua, suhu akurat dan stabil, ketiga, pengaturan waktu memasak. Saya mulai memilih dan menghadapi serangan berikut: pembuat yogurt murah tidak diregulasi. Yaitu, di dalam kabel pemanas, dan kabel ini, pada kenyataannya, terhubung ke jaringan. Berapa suhu yang akan berada di dalam pembuat yogurt pada saat yang sama tergantung pada tangan pengumpul, suhu sekitar, fase bulan dan kedalaman tidur Cthulhu (Cthulhu fhtagn, omong-omong).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, situasi ini tidak cocok untukku. Dan lebih lagi saya merasa terganggu dengan situasi di sekitar pembuat yogurt, yang, dengan fungsi dan parameternya, cocok untuk saya. Untuk beberapa alasan, produsen pembuat yogurt tersebut percaya bahwa mereka memasok produk luar angkasa ke pasar dan harga produk tersebut harus sesuai. Penderitaan mental yang kuat dalam proses seleksi mendorong saya ke titik di mana saya menyatakan kemarahan saya kepada istri tercinta tentang kebijakan penetapan harga yang tidak manusiawi dari pembuat yogurt dan dalam proses curahan verbal saya mengucapkan ungkapan "Saya akan melakukannya dengan lebih baik untuk lima ratus rubel," setelah itu kemudian mengklik ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu adalah latar belakang. Dan sekarang ceritanya.</font></font><a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam proses membangun perangkat yang luar biasa, saya menemukan bug. Ketika suhu saat ini ditampilkan, controller secara berkala masuk ke reboot. Yaitu, kadang-kadang bekerja berjam-jam secara normal, dan kadang-kadang disetel ulang setiap beberapa detik. Karena ini mulai terjadi setelah fungsi pemungutan suara sensor ds18b20 diperkenalkan ke firmware, adalah wajar bahwa saya menoleh padanya untuk mencari bug. Dan tidak menemukan apa pun. Tumpukan tidak pecah, fungsi tidak menulis apa pun ke area memorinya. Secara umum, itu berhasil, sebagaimana mestinya. Selain itu, menonaktifkan fungsi ini menghilangkan bug, yang dengan jelas menunjukkan (seperti yang saya lihat pada saat itu) pahlawan acara tersebut. Saya pikir sistem sinkronisasi yang harus disalahkan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena saya punya batu kecil (attiny2313a) dan tidak ada timer yang cukup untuk semua lotion, saya keluar dari situasi dengan menulis task manager yang menerima tugas dan waktu tunda yang diperlukan dari fungsi, menempatkan mereka dalam antrian. Kemudian, setelah menghitung jumlah waktu yang diperlukan, ia mentransfer kendali kepada mereka. Saya menetapkan waktu tunda minimum menjadi 1 milidetik. Yang memungkinkan saya untuk mengatur penundaan dari milidetik menjadi satu menit. Tetapi jika Anda melihat lembar data sensor ds18b20, Anda akan melihat bahwa komunikasi dengan sensor suhu terkadang berlangsung lebih dari 500 mikrodetik (reset dan tunggu kehadirannya).</font></font><br>
<br>
<img src="https://habrastorage.org/files/e26/4fe/c69/e264fec696284cd8ad1203ebe4568514.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi bagaimana jika, dalam prosesnya, gangguan mengganggu fungsi komunikasi? Akan ada slot waktu yang diimbangi, di mana pengontrol tidak akan dapat membaca bit atau mengenali keberadaannya dengan benar. Saya menemukan jalan keluar dalam menggunakan sinkronisasi. Prosesnya sederhana. Ketika fungsi polling sensor melihat bahwa ia akan memiliki komunikasi jangka panjang dengan sensor, ia mengatur interupsi dalam register B dari timer 1 pada saat yang sama dengan interupsi "manajer waktu", yang terletak di register A dari timer 1. Dan karena interupsi diproses secara ketat sesuai dengan alamat vektor interupsi dalam tabel interupsi, ternyata setelah proses sinkronisasi, fungsi polling sensor akan menerima kontrol segera setelah gangguan dari "time manager".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nah, di mana ada bug? Ya di mana-mana. Tetapi secara pribadi, saya berpikir bahwa masalahnya bisa di persimpangan interupsi. Artinya, dalam kasus ketika satu lagi masuk selama pelaksanaan satu interupsi. Pembersihan kode untuk menyelesaikan masalah ini berlanjut hingga saya menemukan bahwa tindakan saya mengarah pada fakta bahwa masalah mulai terjadi bahkan dengan sensor yang tidak terhubung. Setelah menonaktifkan fungsi polling sensor, saya yakin bahwa sekarang kontroler reset tidak tergantung pada operasinya. Dan kemudian tebakan yang brilian mengejutkan saya. Perlu mengukur tegangan! Multimeter dengan ceria melaporkan bahwa ada 4,2 volt pada controller. “Yah, tentu saja, BOD, pikirku. Dan saya menghubungkan daya eksternal ke papan (sebelum itu saya puas dengan daya USB). Multimeter mendengus sedikit, yaitu 4,98 volt di papan tulis. Dengan perasaan kemenangan, saya membalik papan untuk melihat yang luar biasa. Ada bug!Dan itu menjadi lebih kuat. Sekarang controller diatur ulang setiap beberapa detik, dan terkadang dalam sepersekian detik. Pencarian dilanjutkan dengan balas dendam dan mengarah ke fungsi yang menampilkan informasi di layar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang mungkin Anda tebak, semuanya baik-baik saja dengannya, terutama karena setelah menulis dia diuji dengan benar. Dan, bagaimanapun, semua mengatakan bahwa bug saya yang sulit dipahami terletak di dalamnya. Ternyata bug hanya terjadi saat menampilkan halaman suhu saat ini. Halaman menampilkan daya, mulai, waktu bug tidak menyebabkan. Tidak menemukan apa pun yang dapat menyebabkan perilaku ini, saya memutuskan untuk membangun makanan. Yaitu, fakta bahwa di bawah tegangan normal bug terjadi lebih sering. Dengan menurunkan tegangan, saya menemukan bahwa pada 3,8 volt pada pengontrol, yang terakhir bekerja secara stabil. Situasi merobek semua pola. Dan kemudian aku ingat hukum Ohm. Arus sebanding dengan tegangan. Selalu? Tidak. Pada LED, hukum ini tidak berfungsi. Ini bekerja lebih tepat, tetapi dengan gadgetnya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proporsionalitas arus melalui dioda tidak sama dengan resistor konvensional, karena perangkat semikonduktor sebagian besar non-linear. Ingat setidaknya thyristor atau dioda zener (zener diode). Berikut ini adalah perbandingan karakteristik tegangan arus LED dari lembar data (garis hitam) dan karakteristik tegangan arus dari beban resistif (garis merah)</font></font><br>
<br>
<img src="https://habrastorage.org/files/3c0/177/192/3c017719200b4597817dbb99b817925e.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terlihat bahwa untuk memuat resistif hukum Ohm adalah dewa dan tuan. Jika tegangan meningkat 10%, maka arus akan meningkat 10% yang sama. Tapi tidak ada yang keputusan untuk LED. Jika Anda menaikkan tegangan pada LED hanya 10% (dari 2 volt menjadi 2,2 volt), arusnya akan melonjak 100%, yaitu, dua kali! Tetapi dalam kasus saya, hal utama adalah peningkatan voltase juga meningkatkan penurunan pada saat dioda dinyalakan. Dan saya punya 32 dioda! Empat indikator tujuh segmen dengan masing-masing delapan LED di masing-masing (tujuh segmen dan satu titik). Mereka terhubung dengan saya bukan melalui multiplexing, tetapi melalui register geser karena: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Kesimpulan dari kontroler attiny2313 sangat kurang. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Saya terganggu oleh kedipan mereka ketika terhubung dengan multiplexing (perfeksionisme beberapa kali)</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Multiplexing menghabiskan banyak sumber daya pengontrol untuk keluaran (perfeksionisme nomor dua) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
.Selain itu, saya menghubungkan register geser dengan fungsi mematikan layar selama durasi pembaruan tampilan (perfeksionisme nomor tiga). Mengapa saya melepaskan fitur ini - Saya tidak tahu. Bagaimanapun, logika yang saya pilih dapat bekerja hingga frekuensi 100 MHz. Dengan demikian, data dapat didorong ke dalamnya pada frekuensi penuh controller, yang saya miliki adalah 10 MHz. Nah, siapa yang punya waktu untuk memperhatikan pergerakan bit dalam bit indikator pada frekuensi seperti itu? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berpindah. Kekuatan sirkuit saya disediakan oleh regulator L7805, berikut adalah diagram koneksinya.</font></font><br>
<br>
<img src="https://habrastorage.org/files/f81/16d/d58/f8116dd5889a402f894556df37420864.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regulator menyediakan arus 1A tanpa masalah. Pada output regulator terdapat kapasitor 0,1 mikrofarad, yang, secara teori, harus memperlancar fluktuasi arus. Muatannya pada 5 volt adalah 0,5 microcoulomb. Pada 3,8 volt, muatannya masing-masing 0,38 microcoulomb. Pada 3,8 volt, LED mengkonsumsi sekitar 288 mA, dan pada 5 volt sekitar 416 mA. Dengan demikian, ketika tegangan dinaikkan dari 3,8 volt menjadi 5 volt, muatan yang disimpan oleh kapasitor akan meningkat sebesar 24%, tetapi konsumsi saat ini akan meningkat lebih dari 30 persen. Perhitungannya tentu saja patut dicontoh, tetapi menunjukkan bahwa penurunan tegangan pada rangkaian semacam itu adalah semakin besar semakin besar tegangan suplai. Pada 3,8 volt, drawdown itu tidak kritis untuk controller. Tetapi pada 5 volt drawdown meningkat dan mulai mereset controller. Dan pengontrol diatur ulang tepat pada halaman tampilan suhu karenaapa tepatnya di halaman ini adalah semua indikator tampilan yang terlibat.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solusinya sederhana. Dalam kode, Anda hanya perlu mengomentari garis untuk menghidupkan dan mematikan indikator sbi displayPort, offDispWire dan cbi displayPort, offDispWire.</font></font><br>
<br>
<pre><code class="hljs nginx">                <span class="hljs-attribute">ldi</span> XL, videoMem<font></font>
		cbi displayPort, shiftWire<font></font>
		cbi displayPort, storageWire<font></font>
		;<span class="hljs-attribute">sbi</span> displayPort, <span class="hljs-literal">off</span>DispWire<font></font>
		ZpushToDisplay:<font></font>
		ldi temp2, <span class="hljs-number">8</span><font></font>
		ld temp, X+<font></font>
		ZnextbitToDisplay:<font></font>
		cbi displayPort, dataWire<font></font>
		sbrc temp, <span class="hljs-number">7</span><font></font>
		sbi displayPort, dataWire<font></font>
		sbi displayPort, shiftWire<font></font>
		cbi displayPort, shiftWire<font></font>
		lsl temp<font></font>
		dec temp2<font></font>
		cpi temp2, <span class="hljs-number">0</span><font></font>
		brne ZnextbitToDisplay<font></font>
<font></font>
		cpi XL, videoMem+sizeVideoMem<font></font>
		brne ZpushToDisplay<font></font>
<font></font>
		sbi displayPort, storageWire<font></font>
   		cbi displayPort, storageWire<font></font>
		;<span class="hljs-attribute">cbi</span> displayPort, <span class="hljs-literal">off</span>DispWire
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pelepasan telah berhenti. </font><font style="vertical-align: inherit;">Dan controllernya hidup bahagia selamanya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Z.Y. </font><font style="vertical-align: inherit;">proses pencarian bug yang sulit dipahami menunjuk cant lain dalam skema. </font><font style="vertical-align: inherit;">Faktanya adalah bahwa disipasi daya maksimum register geser adalah sekitar 0,5 watt, dan arus melalui output daya atau ground adalah sekitar 70 miliamp. </font><font style="vertical-align: inherit;">Jika angka delapan dengan titik ditampilkan, arus melalui register geser harus sekitar 104 miliamp, yang, seperti yang Anda tahu, merupakan kelebihan. </font><font style="vertical-align: inherit;">Bukannya aku tidak memperhitungkan momen ini. </font><font style="vertical-align: inherit;">Saya sudah memperhitungkan. </font><font style="vertical-align: inherit;">Tetapi dalam proses menghitung resistor untuk LED, ia menyerah pada kelemahan satu menit dan lupa bahwa LED adalah elemen nonlinear dan untuk mengurangi arus melalui itu dua kali tidak cukup untuk menggandakan resistensi dari resistor yang membatasi arus. </font><font style="vertical-align: inherit;">Secara umum, dalam situasi yang tidak dapat dipahami, lihat CVC!</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id386199/">https://habr.com/ru/post/id386199/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id386183/index.html">Bethesda Meluncurkan Aplikasi Pip-Boy</a></li>
<li><a href="../id386185/index.html">Tinjauan Umum Lifetrak C410 - Monitor Detak Jantung Tidak Stabil untuk Penggunaan Berkelanjutan</a></li>
<li><a href="../id386187/index.html">Система сенсорного замещения от российских студентов</a></li>
<li><a href="../id386195/index.html">Bagaimana berhenti takut pada kegelapan malam dan mencintai alam semesta</a></li>
<li><a href="../id386197/index.html">Nokia Networks sedang menguji peralatan untuk "gelembung" jaringan publik berkecepatan tinggi</a></li>
<li><a href="../id386201/index.html">Cukup! Teknologi tidak mengarah pada isolasi sosial</a></li>
<li><a href="../id386203/index.html">LG 34 inci</a></li>
<li><a href="../id386205/index.html">Pemerintah Finlandia memulai pengembangan rencana untuk memperkenalkan pendapatan universal tanpa syarat</a></li>
<li><a href="../id386209/index.html">Pada 2020, Jepang akan memperkenalkan Robotaxi</a></li>
<li><a href="../id386211/index.html">Panduan Pemindai untuk Rumah dan Kantor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>