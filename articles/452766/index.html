<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï¢ üçº üèÅ Tecnolog√≠a de transmisi√≥n progresiva, o c√≥mo ver video 4k a trav√©s de la red, sin frisos üöµ üßíüèº üôçüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoy en d√≠a, no se puede sorprender a nadie con la velocidad de Internet de 100 Mbit / s, pero hay un problema sobre c√≥mo usarlo. Todas las operaciones...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tecnolog√≠a de transmisi√≥n progresiva, o c√≥mo ver video 4k a trav√©s de la red, sin frisos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452766/"><img src="https://habrastorage.org/webt/3-/du/hu/3-duhuu-n4ijfxkww4tnjhgdvxy.jpeg"><br><br>  Hoy en d√≠a, no se puede sorprender a nadie con la velocidad de Internet de 100 Mbit / s, pero hay un problema sobre c√≥mo usarlo.  Todas las operaciones b√°sicas no cargan completamente la red.  Al mismo tiempo, los formatos pesados ‚Äã‚Äãde audio y video 4k-8k que desea ver en l√≠nea son m√°s populares.  Y mirando la alta velocidad de Internet, surge una pregunta l√≥gica: ¬øpor qu√© no?  ¬øC√≥mo dominar la velocidad m√°xima proporcionada por el proveedor?  Tanto del lado del cliente como del lado del servicio.  Considere todos estos problemas en el art√≠culo. <br><a name="habracut"></a><br>  Hice un producto de software realmente bueno y quiero contar con m√°s detalle c√≥mo se organiza todo all√≠.  Hay muchas nuevas tecnolog√≠as.  Quiz√°s porque nadie ha inventado nada en esta industria durante mucho tiempo, y ha llegado el momento.  Este art√≠culo no es solo para desarrolladores, sino tambi√©n para personas comunes.  Trat√© de explicar todo lo m√°s simple posible. <br><br>  <b>1.</b> Comencemos con los fundamentos b√°sicos de las tecnolog√≠as actuales de transferencia de datos. <br>  Existe una gran brecha en el conocimiento de muchas personas sobre algoritmos de transferencia de datos de alta velocidad: m√°s de 10 Mbit / s ... Vamos a llenar estos vac√≠os: <br><br>  <b>Espacio # 1.</b>  El problema es que la totalidad de las tecnolog√≠as de transmisi√≥n de radio ahora se centra en la transmisi√≥n continua de datos, como el mejor escenario. <br><br>  Todo lo que se transmite a trav√©s de wi-fi \ 3G \ 4G e incluso por cable se transmitir√° m√°s r√°pidamente si la transmisi√≥n es constante, incluso a una velocidad menor que la m√°xima.  Esto ser√° mucho m√°s r√°pido que transmitir de forma intermitente, pero a la velocidad m√°xima. <br><br>  Razones: <br><br><ul><li>  para reanudar la comunicaci√≥n, se agrega m√°s informaci√≥n de servicio al tr√°fico; </li><li>  Al reanudar la comunicaci√≥n, el servidor puede reducir la calificaci√≥n del cliente y proporcionar datos a una velocidad menor (posiblemente debido a la aparici√≥n de otros clientes), o no hacerlo en absoluto.  Incluso en una red wifi dom√©stica, el enrutador puede reducir la clasificaci√≥n, por ejemplo, debido a una aspiradora wi-fi.  Es decir  Esto se aplica a todas las redes donde hay m√°s de 2 clientes.  En general, casi para todos :-) </li></ul><br>  <b>Espacio # 2.</b>  Al copiar datos, cualquier programa utiliza un tipo de "dep√≥sito" que extrae datos del origen y los transfiere al destino.  Por lo tanto, este segmento, dependiendo de la velocidad de transferencia de datos, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">debe ser de diferentes tama√±os</a> .  Es f√°cil de entender: si saca un cubo de agua con una cucharadita, tomar√° mucho m√°s tiempo que sacar una taza. <br><br>  <b>Espacio # 3.</b>  Para aumentar la velocidad de descarga de datos a trav√©s de la red, se debe usar RAM.  Los milisegundos m√°s peque√±os de retraso al registrar los datos entrantes se vierten en segundos, minutos y horas.  Para evitar que esto suceda, primero debe escribir datos en la RAM y luego en un "dep√≥sito" m√°s voluminoso en un medio permanente (disco duro).  De lo contrario, la velocidad de transferencia de datos disminuir√° dr√°sticamente. <br><br>  <b>Esto es suficiente para copiar el archivo.</b> <br><br>  <b>2.</b> Estas brechas son solo la punta del iceberg.  Con la transferencia normal de archivos esto es suficiente, pero ¬øqu√© pasa si nuestro archivo es multimedia y debemos comenzar a reproducirlo en l√≠nea?  Un archivo multimedia moderno no puede caber completamente en la RAM, por lo que debe considerar guardarlo en el disco. <br><br>  La mejor estrategia se construye a partir de lo anterior sobre espacios: <br><br><ul><li>  la carga de datos debe ocurrir independientemente de la reproducci√≥n, continuamente; </li><li>  Para garantizar el rebobinado, es necesario crear otra secuencia de carga de datos; </li><li>  Para superar el friso al inicio, debido a la recepci√≥n de datos t√©cnicos (c√≥decs, etc.), es necesaria la precarga.  Emp√≠ricamente, encontr√© la f√≥rmula: el tama√±o de todo el archivo es * 0.002 o 0.2%. </li></ul><br>  <b>Esto es suficiente para reproducir archivos Flac.</b> <br><br>  <b>3.</b> Resulta que para la transmisi√≥n en l√≠nea, que utilizar√° racional y completamente nuestro canal de comunicaci√≥n, necesita RAM y espacio en disco.  Sin esto, el canal no se utilizar√° por completo. <br><br>  ¬°Y aqu√≠ comienza la ramificaci√≥n de los algoritmos de carga de datos!  Sin detalles t√©cnicos, los dar√© en un volumen aproximado: <br><br><ul><li>  Para que los datos no se descarguen dos veces, es necesario hacer una colisi√≥n de las transmisiones.  Es decir  Si comenzamos la pista y rebobinamos r√°pidamente hacia el medio, entonces la primera secuencia, que llega al medio, deber√≠a interrumpir su trabajo. </li><li>  para que los datos no se descarguen dos veces, no se debe crear una secuencia si los datos ya est√°n cargados. </li><li>  Para una reproducci√≥n normal, es necesaria una l√≥gica compleja de interacci√≥n entre la transmisi√≥n del reproductor y las transmisiones que descargan datos. </li></ul><br>  Hice todo esto y un poco m√°s.  Result√≥ absolutamente fabuloso.  Los datos vuelan y la reproducci√≥n no se interrumpe.  Los archivos Flac se descargaron completamente a 1-3 segundos de reproducci√≥n.  <b>Y eso fue suficiente para reproducir video Full HD.</b> <br><br>  <b>4.</b> El problema es que nuestros archivos multimedia son muy diferentes en tama√±o.  Y con las pel√≠culas 4K Blu-ray, que pesan entre 80 y 120 GB, nada funcion√≥.  El jugador cre√≥ 15 hilos al principio, y todos compartieron la velocidad, que, por supuesto, no era suficiente para el hilo principal, que el jugador estaba esperando.  Los datos se cargaron a la velocidad m√°xima, s√≠ ... descargaron el canal completo, pero el video 4K se colg√≥ y se reprodujo m√°s lento que la presentaci√≥n de diapositivas.  Resulta que muchas transmisiones son da√±inas para el video 4k, pero ¬ød√≥nde est√° el borde despu√©s del cual los beneficios en Full HD se convirtieron en da√±os en 4k? <br><br>  Como resultado, todo descansaba en la velocidad del canal.  Para optimizar los hilos, necesita saber dos cosas: <br><br>  a) La velocidad requerida para la reproducci√≥n, que se calcula: (tama√±o / duraci√≥n del archivo en segundos) * 8. <br><br>  b) La velocidad de carga de datos por la transmisi√≥n principal con la que el jugador est√° trabajando actualmente. <br><br>  Si gestionamos la carga de datos, definitivamente tenemos la oportunidad de medir la velocidad de descarga.  Ahora cada hilo conoc√≠a su velocidad (en Mbps) y esto no impone costos adicionales en el rendimiento.  Aseg√∫rese de identificar en qu√© transmisi√≥n est√° trabajando actualmente el reproductor.  Todo comienza en el modo habitual de subprocesos m√∫ltiples.  Pero tan pronto como el reproductor calcula la duraci√≥n del archivo multimedia en segundos y transmite estos datos, todas las transmisiones obtienen una velocidad fija y necesaria para la reproducci√≥n.  Inmediatamente despu√©s de esto, todos los flujos (excepto el principal) comparan la velocidad necesaria con la velocidad de la corriente principal y si su velocidad es menor, se detienen.  Adem√°s, el hilo principal aumenta lentamente su velocidad, y tan pronto como excede la velocidad necesaria dos veces (como lo hice), detiene todos los flujos secundarios desde la pausa. <br><br>  Seg√∫n las observaciones, luego, despu√©s de un tiempo, la velocidad de la transmisi√≥n principal vuelve a caer y todas las transmisiones secundarias entran en pausa nuevamente, y as√≠ hasta que se descargan los datos o se completa la reproducci√≥n.  Una estrategia tan flexible, cuando la carga de datos es paralela y, si es necesario, comprimida en un flujo, descarga completamente el canal de comunicaci√≥n y al mismo tiempo asegura la descarga m√°s r√°pida posible de los datos necesarios para la reproducci√≥n de datos.  Esta estrategia funciona igualmente bien en archivos de 10 MB y 100 GB.  Para jugar en la red sin p√©rdida, es imposible encontrar algo mejor.  Si tiene alguna sugerencia, me complacer√° analizarla en los comentarios. <br><br>  <b>Adecuado para reproducir archivos multimedia de cualquier volumen 4k-8k.</b> <br><br><blockquote>  La transmisi√≥n progresiva es el tipo m√°s r√°pido de transmisi√≥n cuando se transmiten datos en su calidad original.  Para aumentar la velocidad de transferencia de datos, utiliza RAM y subprocesos m√∫ltiples.  Los datos se cargan de forma as√≠ncrona en el flujo de reproducci√≥n, pero con una interacci√≥n activa con ellos.  Durante la reproducci√≥n, se mide la velocidad de adquisici√≥n de datos y el n√∫mero de transmisiones activas se adapta al canal de datos disponible. </blockquote>  En este momento en el mundo hay una gran tendencia a aumentar la cantidad de videos de alta resoluci√≥n, y la popularidad de los dispositivos para reproducirlos est√° creciendo. <br><br><img src="https://habrastorage.org/webt/jt/-c/cv/jt-ccvuigi38b7q-pub-5ds3qqs.png"><br>  <i>Fuente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.vox.com</a></i> <br><br>  El video de velocidad de bits 4k es grande, pero no demasiado alto.  El c√≥dec VP9 m√°s eficiente de hoy comprime video 4k a 15 Mbps.  con audio sale aproximadamente 15.5.  Una pel√≠cula de Blu-ray de 100 GB tiene una tasa de bits de aproximadamente 60 Mb / s ... <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cualquiera en el mundo</a> que quiera ver videos en 4K tiene estas velocidades de Internet.  ¬°Esto significa que ahora se pueden ver 4k videos en l√≠nea! <br><br>  A pesar de la simplicidad del algoritmo descrito anteriormente, la implementaci√≥n parece muy complicada.  Las tecnolog√≠as de transmisi√≥n con deterioro en la calidad del video y el audio se ven obligadas a estropear el contenido debido a la falta de implementaci√≥n del algoritmo de transferencia de datos correcto.  Supongo que muchas personas y empresas tienen (arriba) lagunas de conocimiento y, por supuesto, dificultades para implementar este algoritmo.  Por lo tanto, escribi√≥ un art√≠culo para simplificar la comprensi√≥n de este m√©todo de transmisi√≥n. <br><br>  Ser√° un poco m√°s dif√≠cil hacer este algoritmo con derechos de autor, pero en general tambi√©n es posible.  Al guardar en el disco y leer, es necesario cifrar los datos.  Parece una acci√≥n enemiga contra el usuario, pero qu√© hacer.  Algunas compa√±√≠as est√°n haciendo esto. <br><br>  Ahora veamos las desventajas de la transmisi√≥n convencional, en comparaci√≥n con la progresiva: <br><br><ul><li>  es imposible precargar el siguiente archivo \ para predecir y preparar la siguiente acci√≥n; </li><li>  incluso con una desconexi√≥n temporal de Internet / interrupciones en la velocidad, aparecer√° un friso notable de sonido / imagen; </li><li>  el canal de comunicaci√≥n no se utiliza por completo y la mitad del tiempo de reproducci√≥n est√° inactivo, en un momento en que todav√≠a hay muchos datos para cargar; </li><li>  la imposibilidad de reproducir video 4k-8k, incluso a trav√©s de wi-fi sin frisos.  Las r√°fagas constantes de comunicaci√≥n y los saltos de velocidad al m√°ximo no pueden soportarlo, incluso el wifi dom√©stico en toda la pel√≠cula es de 2 horas o m√°s; </li><li>  esto impone una carga a√∫n mayor cuando se reproduce contenido de 4k, ya que el reproductor necesita mantener en RAM de 200-300 MB de datos de video (a la velocidad requerida de 60 Mbps).  Cuando se reproduce a trav√©s de un algoritmo de transmisi√≥n progresiva, esto ya no es necesario, ya que la reproducci√≥n es desde un disco, no a trav√©s de una red. </li></ul><br>  Seg√∫n estos puntos, est√° claro qu√© transmitir, como antes, ya no es posible.  Por supuesto, puede aumentar la velocidad \ memoria \ cach√© diez veces, pero por qu√©, si las velocidades de hoy ya son suficientes y el problema radica en los algoritmos.  Los malos algoritmos, tarde o temprano, se paralizan.  Hoy en d√≠a, la transmisi√≥n progresiva es la √∫nica tecnolog√≠a que le permite ver de manera estable y c√≥moda pel√≠culas de 4k 100 Gigabytes en l√≠nea. <br><br>  Como ejemplo de c√≥mo funciona la tecnolog√≠a, escrib√≠ una aplicaci√≥n multimedia: el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">reproductor de la Biblioteca de Medios</a> .  Es compatible con todos los formatos.  Para demostrar las capacidades que necesita para ejecutarlo.  Abra el sitio de demostraci√≥n y vaya al √°rbol de directorios "Pel√≠culas (TOP) / 4k pel√≠culas".  All√≠ puede seleccionar cualquier pel√≠cula y verla.  Para admitir todos los formatos, debe cambiar el m√≥dulo del reproductor de ExoPlayer a VlcPlayer. <br>  En este escenario, se utilizar√°n todos los algoritmos de adquisici√≥n de datos anteriores.  Mi aplicaci√≥n admite los siguientes protocolos: nmdc \ http \ ftp \ samba, as√≠ como la nube Mega.nz. <br><br>  Los archivos de video de 4K con un peso de 100 GB se reproducen con retrasos m√≠nimos y se descargan a la memoria a la velocidad m√°s alta posible.  Puede precargar m√°s datos simplemente haciendo una pausa, pero esto generalmente no es necesario.  La reproducci√≥n siempre es estable, si no es estable, la velocidad del canal est√° cerca de la velocidad necesaria para la reproducci√≥n. <br><br>  Debido a las brechas descritas anteriormente, las pol√≠ticas de las empresas m√°s grandes no se est√°n desarrollando de la manera correcta, lo que ralentiza el progreso y, a menudo, impide el uso completo de los dispositivos y canales de comunicaci√≥n disponibles. <br><br>  La aplicaci√≥n permite guardar el cach√© en medios externos, pero debido a la extra√±a complicaci√≥n del acceso a medios externos desde Google, actualmente es compatible principalmente con dispositivos Samsung y Android versi√≥n 5.0+.  En el futuro, aparecer√° soporte completo para medios usb externos. <br><br>  En general, el algoritmo mejora significativamente la calidad y la velocidad de descarga de datos cuando se transmite, tanto archivos peque√±os de 30-50 MB como grandes de 50-120 GB. <br><br>  En perspectiva se puede usar: <br><br><ul><li>  para reproducci√≥n de alta calidad de contenido multimedia 4k-8k en tel√©fonos m√≥viles, televisores y otros dispositivos; </li><li>  en realidad virtual para mostrar escenas volum√©tricas en alta resoluci√≥n; </li><li>  en combinaci√≥n con protocolos peer-to-peer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">parecidos</a> a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">torrent</a> ; </li><li>  para reproducci√≥n de m√∫sica de alta calidad en alta resoluci√≥n en cualquier dispositivo.  Las pruebas experimentales mostraron que 2 Mbps de un canal de comunicaci√≥n inestable es suficiente para esto. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/452766/">https://habr.com/ru/post/452766/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../452754/index.html">El 19% de las im√°genes Docker m√°s populares no tienen una contrase√±a de root</a></li>
<li><a href="../452756/index.html">Creando Tower Defense en Unity: Enemies</a></li>
<li><a href="../452760/index.html">Vitamina D. Beber o no beber, esa es la cuesti√≥n. (O una historia sobre c√≥mo pas√© un an√°lisis que no me recetaron)</a></li>
<li><a href="../452762/index.html">MVCC-7. Limpieza autom√°tica</a></li>
<li><a href="../452764/index.html">[Peter] Reuni√≥n JUG.ru con Sergei Melnikov - Perfilando con velocidad superluminal: teor√≠a y pr√°ctica</a></li>
<li><a href="../452768/index.html">C√≥mo dise√±ar un producto si decide ingresar al mercado extranjero</a></li>
<li><a href="../452772/index.html">5 t√©cnicas avanzadas de prueba de Go</a></li>
<li><a href="../452774/index.html">Dell XPS 13 9380: port√°til confiable y muy compacto para negocios serios</a></li>
<li><a href="../452776/index.html">N.M.D. (No es mi negocio)</a></li>
<li><a href="../452778/index.html">C√≥mo acelerar la descarga de LZ4 en ClickHouse</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>