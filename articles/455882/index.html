<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∂üèº ü•û üíΩ Network Factory para Cisco ACI Data Center - Ayuda de administrador üë®üèº‚Äçüöí üôáüèø üí´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Con esta pieza m√°gica del script Cisco ACI, puede configurar r√°pidamente su red. 

 La f√°brica de redes para el centro de datos Cisco ACI ha existido ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Network Factory para Cisco ACI Data Center - Ayuda de administrador</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/croc/blog/455882/"><img src="https://habrastorage.org/webt/sy/ml/l2/symll2m6gww_cyira-8xkwg5i3a.jpeg"><br>  <i>Con esta pieza m√°gica del script Cisco ACI, puede configurar r√°pidamente su red.</i> <br><br>  La f√°brica de redes para el centro de datos Cisco ACI ha existido durante cinco a√±os, pero en Habr no se dijo nada al respecto, as√≠ que decid√≠ arreglarlo un poco.  Te dir√© por experiencia propia lo que es, lo bueno que es y d√≥nde tiene un rastrillo. <br><br><h3>  ¬øQu√© es y de d√≥nde vino? </h3><br>  En el momento del anuncio de ACI (Application Centric Infrastructure) en 2013, los competidores estaban atacando los enfoques tradicionales de las redes de centros de datos en tres lados a la vez. <br><br>  Por un lado, las soluciones SDN de "primera generaci√≥n" basadas en OpenFlow prometieron hacer las redes m√°s flexibles y m√°s baratas al mismo tiempo.  La idea era tomar decisiones, tradicionalmente realizadas por el software propietario de los conmutadores, en el controlador central. <br><br>  Este controlador tendr√≠a una visi√≥n √∫nica de todo lo que estaba sucediendo y, en base a esto, programar√≠a el hardware de todos los conmutadores al nivel de las reglas para procesar flujos espec√≠ficos. <a name="habracut"></a><br>  Por otro lado, las soluciones de red superpuestas permitieron implementar las pol√≠ticas de conectividad y seguridad necesarias sin ning√∫n cambio en la red f√≠sica, creando t√∫neles de software entre hosts virtualizados.  El ejemplo m√°s famoso de este enfoque fue la decisi√≥n de Nicira, que en ese momento ya hab√≠a sido adquirida por VMWare por $ 1.26 mil millones y dio lugar al actual VMWare NSX.  Para un poco picante de la situaci√≥n, Nicira fue cofundada por las mismas personas que anteriormente se encontraban en los or√≠genes de OpenFlow, y ahora dicen que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OpenFlow no es adecuado</a> para construir una f√°brica de centro de datos. <br><br>  Y finalmente, los chips de conmutaci√≥n disponibles en el mercado abierto (lo que se llama silicio comercial) han alcanzado un grado de madurez en el que se han convertido en una amenaza real para los fabricantes de conmutadores tradicionales.  Anteriormente, cada proveedor mismo desarrollaba chips para sus conmutadores, pero con el tiempo, los chips de terceros fabricantes, principalmente de Br¬Æadcom, comenzaron a reducir la distancia con los chips del vendedor en t√©rminos de funciones y en t√©rminos de relaci√≥n precio / rendimiento que excedieron.  Por lo tanto, muchos cre√≠an que los d√≠as de interruptores en chips de su propio dise√±o est√°n contados. <br><br>  ACI fue la "respuesta asim√©trica" ‚Äã‚Äãde Cisco (o m√°s bien, Insieme, que fue fundada por sus antiguos empleados), a todo lo anterior. <br><br><h3>  ¬øCu√°l es la diferencia con OpenFlow? </h3><br>  En t√©rminos de distribuci√≥n de funciones, ACI es en realidad lo contrario de OpenFlow. <br>  En la arquitectura OpenFlow, el controlador es responsable de prescribir reglas detalladas (flujos) <br>  en el hardware de todos los conmutadores, es decir, en una red grande, puede ser responsable de mantener y, lo m√°s importante, cambiar decenas de millones de registros en cientos de puntos en la red, por lo tanto, su rendimiento y confiabilidad en la implementaci√≥n a gran escala se convierten en un cuello de botella. <br><br>  ACI utiliza el enfoque opuesto: el controlador, por supuesto, tambi√©n existe, pero los conmutadores reciben pol√≠ticas declarativas de alto nivel, y el conmutador en s√≠ mismo los representa en los detalles de configuraciones espec√≠ficas en el hardware.  El controlador se puede reiniciar o apagar por completo, y nada malo le suceder√° a la red, excepto, por supuesto, la falta de control en este momento.  Curiosamente, hay situaciones en ACI en las que OpenFlow todav√≠a se usa, pero localmente dentro del host para programar Open vSwitch. <br><br>  ACI se basa completamente en el transporte de superposici√≥n basado en VXLAN, pero al mismo tiempo incluye el transporte IP subyacente como parte de una soluci√≥n √∫nica.  Cisco llam√≥ a esto el t√©rmino "superposici√≥n integrada".  Como punto de terminaci√≥n para las superposiciones en ACI, en la mayor√≠a de los casos se usan interruptores de f√°brica (lo hacen a la velocidad del canal).  No se requiere que los hosts sepan nada sobre la f√°brica, las encapsulaciones, etc. Sin embargo, en algunos casos (por ejemplo, para conectar hosts OpenStack), el tr√°fico de VXLAN puede llegar a ellos. <br><br>  Las superposiciones se usan en ACI no solo para proporcionar conectividad flexible a trav√©s de la red de transporte, sino tambi√©n para transmitir metainformaci√≥n (se usa, por ejemplo, para aplicar pol√≠ticas de seguridad). <br><br>  Los chips de Broadcom fueron utilizados previamente por Cisco en la serie de conmutadores Nexus 3000. La familia Nexus 9000, lanzada especialmente para admitir ACI, implement√≥ inicialmente un modelo h√≠brido llamado Merchant +.  El conmutador utiliz√≥ simult√°neamente el nuevo chip Broadcom Trident 2 y el chip de desarrollo de Cisco que lo complementa, realizando toda la magia de ACI.  Aparentemente, esto hizo posible acelerar la salida del producto y reducir el precio del interruptor a un nivel cercano a los modelos solo para Trident 2. Este enfoque fue suficiente para los primeros dos o tres a√±os de suministros de ACI.  Durante este tiempo, Cisco desarroll√≥ y lanz√≥ la pr√≥xima generaci√≥n de Nexus 9000 en sus propios chips con m√°s rendimiento y caracter√≠sticas, pero al mismo nivel de precios.  Las especificaciones externas en t√©rminos de interacci√≥n en la f√°brica se conservan por completo.  Al mismo tiempo, el relleno interno ha cambiado por completo: algo as√≠ como la refactorizaci√≥n, pero para el hierro. <br><br><h3>  C√≥mo funciona la arquitectura Cisco ACI </h3><br>  En el caso m√°s simple, ACI se basa en la topolog√≠a de la red Clos o, como se suele decir, Spine-Leaf.  Los interruptores de nivel de columna pueden ser de dos (o uno, si no nos importa la tolerancia a fallas) a seis.  En consecuencia, cuanto m√°s haya, mayor ser√° la tolerancia a fallas (menos reducci√≥n en el ancho de banda y la confiabilidad en caso de accidente o mantenimiento de una columna vertebral) y el rendimiento general.  Todas las conexiones externas van a conmutadores de nivel de hoja: estos son los servidores y se conectan a redes externas a trav√©s de L2 o L3, y conectan los controladores APIC.  En general, con ACI, no solo la configuraci√≥n, sino tambi√©n la recopilaci√≥n de estad√≠sticas, el monitoreo de fallas, etc., todo se hace a trav√©s de la interfaz de los controladores, que son tres en implementaciones de tama√±o est√°ndar. <br><br>  No es necesario que se conecte nunca a los conmutadores con la consola, ni siquiera para iniciar la red: el controlador en s√≠ mismo detecta los conmutadores y recoge la f√°brica de ellos, incluida la configuraci√≥n de todos los protocolos de servicio, por lo tanto, es muy importante registrar los n√∫meros de serie del equipo instalado durante la instalaci√≥n para que no tenga que adivinar qu√© conmutador cu√°l estante est√° ubicado.  Para solucionar problemas, puede conectarse a los conmutadores a trav√©s de SSH si es necesario: utilizan los comandos show habituales de Cisco con bastante cuidado. <br><br>  En el interior, la f√°brica utiliza el transporte IP, por lo que no hay ning√∫n √°rbol de expansi√≥n y otros horrores del pasado: todos los enlaces est√°n involucrados y la convergencia en caso de fallas es muy r√°pida.  El tr√°fico de f√°brica se transmite a trav√©s de t√∫neles VXLAN.  M√°s precisamente, Cisco mismo llama a la encapsulaci√≥n iVXLAN, y difiere de la VXLAN habitual en que los campos reservados en el encabezado de la red se utilizan para transmitir informaci√≥n general, principalmente sobre la relaci√≥n del tr√°fico con el grupo EPG.  Esto le permite implementar las reglas de interacci√≥n entre grupos en el equipo, usando sus n√∫meros de la misma manera que las direcciones se usan en las listas de acceso ordinarias. <br><br>  Los t√∫neles le permiten estirarse a trav√©s del transporte interno IP y los segmentos L2 y L3 (es decir, VRF).  En este caso, se distribuye la puerta de enlace predeterminada.  Esto significa que cada interruptor est√° involucrado en el enrutamiento del tr√°fico que ingresa a la f√°brica.  En t√©rminos de l√≥gica de transferencia de tr√°fico, ACI es similar a una f√°brica basada en VXLAN / EVPN. <br><br><h3>  Si es as√≠, ¬øcu√°les son las diferencias?  Por lo dem√°s! </h3><br>  La diferencia n√∫mero uno que encuentra en ACI es c√≥mo se conectan los servidores a la red.  En las redes tradicionales, la inclusi√≥n de servidores f√≠sicos y m√°quinas virtuales va a las VLAN, y todo lo dem√°s se deriva de ellas: conectividad, seguridad, etc. El ACI utiliza un dise√±o que Cisco llama EPG (Grupo de punto final), del cual no hay ning√∫n lugar para escapar  ¬øEs posible equipararlo a una VLAN?  S√≠, pero en este caso existe la posibilidad de perder la mayor parte de lo que ACI brinda. <br><br>  Con respecto a EPG, todas las reglas de acceso est√°n formuladas, y el ACI utiliza el principio de "lista blanca" de forma predeterminada, es decir, solo se permite el tr√°fico, cuya transmisi√≥n est√° expl√≠citamente permitida.  Es decir, podemos crear grupos EPG "Web" y "MySQL" y definir una regla que permita la interacci√≥n entre ellos solo en el puerto 3306. ¬°Esto funcionar√° sin referencia a las direcciones de red e incluso dentro de la misma subred! <br><br>  Tenemos clientes que eligieron ACI precisamente por esta caracter√≠stica, ya que le permite restringir el acceso entre servidores (virtuales o f√≠sicos, no importa) sin arrastrarlos entre subredes y, por lo tanto, sin tocar el direccionamiento.  S√≠, s√≠, sabemos que nadie prescribe direcciones IP en configuraciones de aplicaciones con sus manos, ¬øverdad? <br><br>  Las reglas de tr√°fico ACI se denominan contratos.  En dicho contrato, uno o m√°s grupos o niveles en una aplicaci√≥n de varios niveles se convierten en un proveedor de servicios (por ejemplo, un servicio de base de datos), otros se convierten en consumidores.  Un contrato puede simplemente omitir el tr√°fico, o puede hacer algo m√°s complicado, por ejemplo, dirigirlo a un firewall o un equilibrador, y tambi√©n cambiar el valor de QoS. <br><br>  ¬øC√≥mo entran los servidores en estos grupos?  Si se trata de servidores f√≠sicos o algo conectado a la red existente en la que creamos el enlace troncal de la VLAN, para colocarlos en la EPG deber√° se√±alar el puerto del conmutador y la VLAN utilizada en √©l.  Como puede ver, las VLAN aparecen donde no puede prescindir de ellas. <br><br>  Si los servidores son m√°quinas virtuales, es suficiente referirse al entorno de virtualizaci√≥n conectado, y luego todo suceder√° por s√≠ solo: se crear√° un grupo de puertos (en t√©rminos de VMWare) para conectar la VM, se asignar√°n las VLAN o VXLAN necesarias, se registrar√°n en los puertos de conmutador necesarios, etc. e. Entonces, aunque ACI se construye alrededor de una red f√≠sica, las conexiones para servidores virtuales parecen mucho m√°s simples que las f√≠sicas.  ACI ya tiene un paquete con VMWare y MS Hyper-V, as√≠ como soporte para OpenStack y RedHat Virtualization.  En alg√∫n momento, tambi√©n hab√≠a soporte incorporado para plataformas de contenedores: Kubernetes, OpenShift, Cloud Foundry, y tambi√©n se aplica a pol√≠ticas y monitoreo, es decir, el administrador de la red puede ver de inmediato qu√© hosts funcionan y a qu√© grupos pertenecen. <br><br>  Adem√°s de estar incluidos en un grupo de puertos en particular, los servidores virtuales tienen propiedades adicionales: nombre, atributos, etc., que se pueden usar como criterios para transferirlos a otro grupo, por ejemplo, al cambiar el nombre de una VM o cuando tiene una etiqueta adicional.  Cisco llama a esto grupos de microsegmentaci√≥n, aunque en general, el dise√±o en s√≠ con la capacidad de crear muchos segmentos de seguridad como EPG en la misma subred tambi√©n es microsegmentaci√≥n.  Bueno, el vendedor lo sabe mejor. <br><br>  Las EPG en s√≠ mismas son construcciones puramente l√≥gicas que no est√°n vinculadas a conmutadores, servidores, etc. espec√≠ficos, de modo que con ellas y construcciones basadas en ellas (aplicaciones e inquilinos) puede hacer cosas que son dif√≠ciles de hacer en redes regulares, por ejemplo, clonar.  Como resultado, digamos que es muy f√°cil crear un clon de un entorno productivo para obtener un entorno de prueba que sea id√©ntico al productivo.  Se puede hacer manualmente, pero mejor (y m√°s f√°cil) a trav√©s de la API. <br><br>  En general, la l√≥gica de control en ACI es completamente diferente de lo que normalmente encuentra <br>  en redes tradicionales del mismo Cisco: la interfaz del software es primaria y la GUI o CLI son secundarias porque funcionan a trav√©s de la misma API.  Por lo tanto, casi todos los que tratan con ACI, despu√©s de un tiempo, comienzan a navegar por el modelo de objeto utilizado para el control y a automatizar algo para sus necesidades.  La forma m√°s f√°cil de hacer esto es desde Python: hay herramientas convenientes listas para usar. <br><br><h3>  Rastrillo prometido </h3><br>  El principal problema es que muchas cosas en ACI se hacen de manera diferente.  Para comenzar a trabajar con ella normalmente, debes volver a aprender.  Esto es especialmente cierto para los equipos de operaci√≥n de red en grandes clientes, donde los ingenieros se han dedicado a "prescribir VLAN" para aplicaciones durante a√±os.  El hecho de que ahora las VLAN ya no sean VLAN, y para colocar nuevas redes en hosts virtualizados, no es necesario crear VLAN con las manos, "destruye" completamente a los networkers tradicionales y lo obliga a aferrarse a enfoques familiares.  Cabe se√±alar que Cisco intent√≥ endulzar ligeramente la p√≠ldora y agreg√≥ una CLI "similar a NXOS" al controlador, que le permite configurar desde una interfaz similar a los conmutadores tradicionales.  Pero a√∫n as√≠, para comenzar a usar ACI normalmente, deber√° comprender c√≥mo funciona. <br><br>  Desde el punto de vista del precio en redes ACI grandes y medianas, pr√°cticamente no es diferente de las redes tradicionales en los equipos Cisco, ya que se utilizan los mismos conmutadores para construirlos (Nexus 9000 puede funcionar tanto en ACI como en modo tradicional y ahora el "caballo de batalla" principal para proyectos de nuevos centros de datos).  Pero para los centros de datos de dos conmutadores, la disponibilidad de controladores y la arquitectura de Spine-Leaf, por supuesto, se hacen sentir.  Recientemente apareci√≥ una f√°brica de Mini ACI, en la que dos de los tres controladores son reemplazados por m√°quinas virtuales.  Esto le permite reducir la diferencia en el costo, pero a√∫n permanece.  Entonces, para el cliente, la elecci√≥n depende de cu√°nto est√© interesado en las funciones de seguridad, la integraci√≥n con la virtualizaci√≥n, un √∫nico punto de administraci√≥n y m√°s. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/455882/">https://habr.com/ru/post/455882/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../455868/index.html">Superando la Ley de Moore: Tecnolog√≠as de transistores del futuro</a></li>
<li><a href="../455872/index.html">¬øQu√© apuestas hizo Bezos en 1997 para que Amazon ahora tenga el 50% del mercado de comercio electr√≥nico en los Estados Unidos y el 14% en el mundo?</a></li>
<li><a href="../455874/index.html">Procedimiento de notificaci√≥n para aplicaciones Electron para macOS 10.14.5</a></li>
<li><a href="../455878/index.html">Escenarios para el uso de la anal√≠tica de video en el comercio minorista. Siguiendo los pasos de Video Analytics en Retail</a></li>
<li><a href="../455880/index.html">Nueva serializaci√≥n puede aparecer en Java</a></li>
<li><a href="../455884/index.html">Extensi√≥n de c√≥digo VS - Fragmentos - Le dir√© c√≥mo ahorrar tiempo</a></li>
<li><a href="../455888/index.html">Internet para el residente de verano. Parte 3. Vienen los rusos</a></li>
<li><a href="../455890/index.html">La verdad sobre los pagos sin contacto en pulseras de fitness</a></li>
<li><a href="../455892/index.html">¬øC√≥mo puede un programador mudarse a los Pa√≠ses Bajos?</a></li>
<li><a href="../455894/index.html">Tendencias en l√≠nea 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>