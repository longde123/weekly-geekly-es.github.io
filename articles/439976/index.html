<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç∫ üï∏Ô∏è üë®üèº‚Äçüé® ¬øNode.js siempre ser√° m√°s lento que Golang? ü•Ö ü§πüèª üñ≤Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Existe la sensaci√≥n de que, literalmente, cada semana aparece un nuevo "marco web" para Node.js, que se llama algo que funciona m√°s r√°pido que todo lo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øNode.js siempre ser√° m√°s lento que Golang?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/439976/">  Existe la sensaci√≥n de que, literalmente, cada semana aparece un nuevo "marco web" para Node.js, que se llama algo que funciona m√°s r√°pido que todo lo anterior.  Todo el mundo sabe que Express es lento, pero ¬øes el pr√≥ximo marco capaz de mejorar realmente el rendimiento del subsistema de E / S Node.js?  Lo √∫nico que puede hacer es eliminar la carga excesiva en el sistema creado por Express.  No se habla de mejorar algo fundamental.  De hecho, para mejorar radicalmente la situaci√≥n, debe trabajar a un nivel m√°s profundo y no agregar nuevas abstracciones sobre Node.js. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/ca9/67d/fb9/ca967dfb9d2f8e6128460295b5245e65.jpg" alt="imagen"></a> <br><br>  ¬øQu√© se necesita para crear aplicaciones de servidor en la plataforma Node.js que se ejecutan mucho m√°s r√°pido que todo lo que es hoy? <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">An√°lisis de la situaci√≥n</font> </h2><br>  Express es uno de los frameworks web m√°s antiguos para Node.js.  Se basa en las capacidades est√°ndar de esta plataforma, brindando a los desarrolladores una interfaz conveniente basada en el concepto de la aplicaci√≥n y permiti√©ndole administrar rutas URL, par√°metros, m√©todos y similares. <br><br>  Express es simple; ayuda a los programadores a desarrollar aplicaciones r√°pidamente.  Lo √∫nico que le falta es el rendimiento.  Los proyectos que aparecen constantemente, como Fastify, se esfuerzan por brindar a los desarrolladores las mismas capacidades que Express, pero con menos p√©rdida de rendimiento.  Pero ellos mismos son los que crean una carga adicional en el sistema y afectan gravemente el rendimiento.  Est√°n severamente limitados por lo que puede proporcionar la plataforma Node.js.  Y puede dar, en comparaci√≥n con la competencia, no tanto. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/748/266/c8a/748266c8a017e8c15fb882d06c2100fd.png"></div><br>  <i><font color="#999999">El n√∫mero de solicitudes HTTP procesadas por diferentes servidores por segundo</font></i> <br><br>  Presta atenci√≥n a la l√≠nea roja.  Esta es la plataforma m√°xima Node.js.  Para ella, independientemente de si sus nombres contienen la palabra "r√°pido" o no, no pueden cruzar esta l√≠nea.  Este es en realidad un l√≠mite de rendimiento muy bajo cuando se compara la plataforma Node.js con sus alternativas populares como Golang. <br><br>  Afortunadamente, Node.js admite complementos C ++, carpetas de Google V8 que le permiten vincular JavaScript y C ++, y le permite llamar a cualquier mecanismo desde JavaScript, incluso si estos mecanismos son proporcionados por algo distinto a la plataforma Node.js. <br><br>  Esto permite expandir y mejorar las capacidades de las aplicaciones JavaScript, le permite alcanzar nuevos niveles de rendimiento.  Esto permite que los programas de JavaScript expriman todo lo posible del motor de Google V8, sin limitarse a lo que los desarrolladores de Node.js encontraron suficiente. <br><br><h2>  <font color="#3AC1EF">Sobre ¬µWebSockets.js</font> </h2><br>  A principios de este mes, <a href="">lanc√©</a> un nuevo proyecto: <a href="">¬µWebSockets.js</a> .  GitHub se usa como hosting para su c√≥digo, no npm, pero puede instalarlo para Node.js usando npm de esta manera: <br><br><pre><code class="plaintext hljs">npm install uNetworking/uWebSockets.js#v15.0.0</code> </pre> <br>  Para trabajar con ¬µWebSockets.js, no necesita un compilador.  Linux, macOS y Windows son compatibles.  La versi√≥n inicial del sistema es 15.0.0, la numeraci√≥n de la versi√≥n se lleva a cabo de acuerdo con las reglas de versiones sem√°nticas. <br><br>  ¬µWebSockets.js es un servidor web alternativo para aplicaciones de back-end escritas en JS.  Consiste en aproximadamente 6 mil l√≠neas de c√≥digo C y C ++ y supera significativamente las mejores soluciones escritas en Golang.  Entonces, el intercambio de bitfinex.com ya ha portado sus dos API comerciales (REST y WebSocket) a ¬µWebSockets.js y las est√° introduciendo gradualmente en la producci√≥n.  Paolo Ardoino de Bitfinex se√±ala que este es un gran proyecto.  Me gustar√≠a decir que el hecho de que tuve la oportunidad de lanzar ¬µWebSockets.js se debe totalmente al apoyo que me brindaron BitMEX, Bitfinex y Coinbase. <br><br><h2>  <font color="#3AC1EF">Caracter√≠sticas de ¬µWebSockets.js</font> </h2><br>  ¬µWebSockets.js es un nuevo proyecto lanzado bajo la licencia Apache 2.0, que es una continuaci√≥n de lo que se conoce como "uws".  Este proyecto es una pila completa para Google V8, que comienza en el nivel del n√∫cleo del sistema operativo, reemplaza por completo las caracter√≠sticas est√°ndar de Node.js y representa un subsistema de E / S estable, seguro, que cumple con los est√°ndares, r√°pido y liviano para Node.js.  As√≠ es como se ve la interacci√≥n de la aplicaci√≥n JS con el sistema operativo usando ¬µWebSockets.js. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4ef/b7e/416/4efb7e416344ba928f85143ad1dbba62.png"></div><br>  <i><font color="#999999">Interacci√≥n de la aplicaci√≥n JS con el SO utilizando ¬µWebSockets.js</font></i> <br><br>  Como puede ver, el proyecto consta de varias capas.  Cada capa depende solo de la capa anterior.  Esta arquitectura simplifica la identificaci√≥n y correcci√≥n de errores, as√≠ como la implementaci√≥n del trabajo para expandir la soluci√≥n debido a la implementaci√≥n de nuevas caracter√≠sticas. <br><br>  Cabe se√±alar que la capa <code>¬µSockets</code> s√≠ misma consta de tres subcapas, que son mecanismos para trabajar con eventos y con la red, as√≠ como herramientas para proteger los datos.  Esto permite, si es necesario, reemplazar partes de la soluci√≥n, agregar implementaciones alternativas de ciertas caracter√≠sticas al sistema, sin encontrar la necesidad de cambiar el c√≥digo a un nivel superior. <br><br>  Por ejemplo, si necesita reemplazar OpenSSL con algo, simplemente cambie el archivo <code>ssl.c</code> con sus seiscientas l√≠neas de c√≥digo a lo que necesita.  Sin embargo, otras capas del sistema ni siquiera saben qu√© es SSL.  Este enfoque, adem√°s de la conveniencia de reemplazar algunas partes del sistema con otras, tambi√©n conduce a una simplificaci√≥n del proceso de detecci√≥n de errores. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/719/113/b42/719113b4261fee20a799f8412e332f53.png"></div><br>  <i><font color="#999999">ŒúSockets subcapas internas</font></i> <br><br>  La arquitectura presentada aqu√≠ es muy diferente de la monol√≠tica que se usa en Node.js, donde en el mismo archivo de c√≥digo fuente puede encontrar llamadas a libuv, comandos para trabajar con el sistema y llamadas a OpenSSL y V8.  En Node.js todo esto es mixto, nadie se propuso aislar partes individuales de esta plataforma.  Esto complica enormemente el proceso de realizar cambios importantes en Node.js. <br><br><h2>  <font color="#3AC1EF">Sobre el desarrollo de ¬µWebSockets.js</font> </h2><br>  Aqu√≠ hay un ejemplo extremadamente simplificado y abreviado de trabajar con ¬µWebSockets.js, cuya tarea principal es demostrar las capacidades b√°sicas del sistema. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* SSL-   */</span></span> uWS.SSLApp({   <span class="hljs-attr"><span class="hljs-attr">key_file_name</span></span>: <span class="hljs-string"><span class="hljs-string">'misc/key.pem'</span></span>,   <span class="hljs-attr"><span class="hljs-attr">cert_file_name</span></span>: <span class="hljs-string"><span class="hljs-string">'misc/cert.pem'</span></span>,   <span class="hljs-attr"><span class="hljs-attr">passphrase</span></span>: <span class="hljs-string"><span class="hljs-string">'1234'</span></span> }).get(<span class="hljs-string"><span class="hljs-string">'/hello'</span></span>, (res, req) =&gt; {   <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span>   res.end(<span class="hljs-string"><span class="hljs-string">'Hello World!'</span></span>); }).ws(<span class="hljs-string"><span class="hljs-string">'/*'</span></span>, {   <span class="hljs-attr"><span class="hljs-attr">open</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ws, req</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'A WebSocket connected via URL: '</span></span> + req.getUrl() + <span class="hljs-string"><span class="hljs-string">'!'</span></span>);   },   <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ws, message, isBinary</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-comment"><span class="hljs-comment">/* OK   false          *     */</span></span>       <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> ok = ws.send(message, isBinary);   },   <span class="hljs-attr"><span class="hljs-attr">drain</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ws</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'WebSocket backpressure: '</span></span> + ws.getBufferedAmount());   },   <span class="hljs-attr"><span class="hljs-attr">close</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ws, code, message</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'WebSocket closed'</span></span>);   } }).listen(port, (token) =&gt; {   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (token) {       <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Listening to port '</span></span> + port);   } });</code> </pre> <br>  En cierto sentido, podemos decir que ¬µWebSockets.js que usa SSL puede omitir Gorilla WebSocket, una implementaci√≥n del protocolo WebSocket en Go, sin SSL.  Es decir, resulta que el c√≥digo JS puede intercambiar mensajes usando SSL incluso m√°s r√°pido que, bajo ciertas condiciones, el c√≥digo escrito en Go sin SSL.  Creo que este es un excelente resultado. <br><br><h2>  <font color="#3AC1EF">Implementaci√≥n r√°pida del protocolo WebSocket</font> </h2><br>  Socket.IO, en muchos sentidos, puede considerarse el equivalente de Express en tiempo real.  Ambos proyectos aparecieron hace mucho tiempo, es f√°cil trabajar con ellos, son populares.  Pero ellos, entre otras cosas, tambi√©n son lentos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7eb/459/06d/7eb45906d3bb8f8867ed5f689223d441.png"></div><br>  <i><font color="#999999">Diversas implementaciones de WebSocket</font></i> <br><br>  Las tareas que el desarrollador de Socket.IO ayuda a resolver se reducen a la implementaci√≥n de la funcionalidad para publicar mensajes y suscribirse a ellos, a la capacidad de enviar y recibir mensajes. <br><br>  Al mismo tiempo, vale la pena se√±alar el uso de algunos mecanismos adicionales para trabajar con el protocolo WebSocket, ya que los navegadores han respaldado esta tecnolog√≠a durante mucho tiempo.  El tr√°fico SSL no puede ser interpretado por los proxys corporativos, pasa a trav√©s de ellos de la misma manera que cualquier tr√°fico HTTP; como resultado, el uso del protocolo WebSocket sobre SSL no bloquea el tr√°fico correspondiente.  Se pueden proporcionar mecanismos de repuesto para soportar WebSocket, pero no tiene sentido usarlos.  Solo aumentan injustificadamente la complejidad de las decisiones. <br><br>  Uno de los objetivos de ¬µWebSockets.js es proporcionar a los desarrolladores caracter√≠sticas similares a las que se encuentran en Socket.IO para que ¬µWebSockets.js pueda reemplazar completamente a Socket.IO sin la necesidad de envoltorios de alto nivel .  Esto es posible si no se utiliza alg√∫n protocolo especial no est√°ndar. <br><br>  Muchas empresas tienen problemas para publicar y suscribirse a mensajes mientras trabajan con WebSocket.  Cabe se√±alar que en la versi√≥n descrita de ¬µWebSockets.js a estas caracter√≠sticas no se les prest√≥ mucha atenci√≥n, pero ahora se est√° trabajando seriamente en ellas.  El resultado ser√° muy r√°pido (las pruebas muestran que ¬µWebSockets.js ya es m√°s r√°pido que Redis).  As√≠ que estad atentos. <br><br><h2>  <font color="#3AC1EF">Resumen</font> </h2><br>  Actualmente se est√° desarrollando ¬µWebSockets.js, se agregan nuevas caracter√≠sticas al proyecto y se corrigen los errores.  Tomar√° alg√∫n tiempo deshacerse de esos defectos menores que son caracter√≠sticos de los primeros lanzamientos de nuevos programas.  Tenga en cuenta que este es un gran proyecto que consta de miles de l√≠neas de c√≥digo escritas en C y C ++, que se almacenan en tres repositorios.  <a href="">Aqu√≠ se</a> encuentra el contenedor de JavaScript: uWebSockets.js.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aqu√≠ hay un</a> servidor web escrito en C ++ - uWebSockets.  Y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> est√° la biblioteca base escrita en C - uSockets. <br><br>  El proyecto en cuesti√≥n es utilizado por empresas, los programas utilizados por los cuales crean una gran carga en los subsistemas de E / S.  En estas empresas, la estabilidad y la seguridad, que es completamente natural y obvia, son las caracter√≠sticas m√°s importantes del software que utilizan. <br><br>  <b>Estimados lectores!</b>  ¬øPlanea usar ¬µWebSockets.js en sus proyectos? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/439976/">https://habr.com/ru/post/439976/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../439966/index.html">Analizador simple para operaciones aritm√©ticas</a></li>
<li><a href="../439968/index.html">Espacio de Generaci√≥n y Espacio de Oportunidad</a></li>
<li><a href="../439970/index.html">Informe sobre problemas y accesibilidad de Internet en 2018-2019</a></li>
<li><a href="../439972/index.html">io_submit: una alternativa a epoll de la que nunca has o√≠do hablar</a></li>
<li><a href="../439974/index.html">Transformaci√≥n √°gil personal: un viaje flexible hacia la productividad</a></li>
<li><a href="../439978/index.html">Aprendizaje Docker, Parte 2: T√©rminos y conceptos</a></li>
<li><a href="../439980/index.html">Aprendizaje Docker, Parte 3: Archivos Dockerfile</a></li>
<li><a href="../439982/index.html">Tutorial de React, Parte 16: La cuarta fase de trabajar en una aplicaci√≥n TODO, Procesamiento de eventos</a></li>
<li><a href="../439984/index.html">Tutorial de React, Parte 17: La quinta etapa de trabajar en una aplicaci√≥n TODO, modificar el estado de los componentes</a></li>
<li><a href="../439986/index.html">Chips VS amenazas a la tecnolog√≠a de contenedorizaci√≥n</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>