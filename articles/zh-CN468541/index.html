<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙍🏾 🖕🏻 🍲 拖放-和-拖放组件供盲人使用？ 你在开玩笑吗 📡 🏆 🤞🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="是什么使Trello，Gmail，Aviasales和Google Keep融合在一起？ 它们每个都有Drag-＆-Drop组件，可以用鼠标拖动它们。 这些组件的使用使网站真正方便，因为在现实生活中我们经常使用这种模式。 对于我们来说，移动事物是很自然的，因此在网络上，我们希望将屏幕周围的元素从一个...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>拖放-和-拖放组件供盲人使用？ 你在开玩笑吗</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/468541/">是什么使Trello，Gmail，Aviasales和Google Keep融合在一起？ 它们每个都有Drag-＆-Drop组件，可以用鼠标拖动它们。 这些组件的使用使网站真正方便，因为在现实生活中我们经常使用这种模式。 对于我们来说，移动事物是很自然的，因此在网络上，我们希望将屏幕周围的元素从一个位置移动到另一个位置，例如黑板上的贴纸或冰箱上的磁铁。 对待办事项列表进行排序，组织仪表板，下载文件-如果不拖放页面上的元素，我们简直无法想象所有这些事件。 <br><br><img src="https://habrastorage.org/webt/xy/bl/3z/xybl3zvzibklnt3lr1w4gtn-hhw.jpeg"><br><br> 但是有细微差别。 在开发此类组件时，我们认为用户实际上可以看到屏幕和元素，可以用鼠标抓住并拖动它们，通常是这样，但我们却忽略了视力障碍的用户群体。 我们创建的组件无法被根本看不到的大批人使用。 如何使拖放组件也可访问？ <br><br>  <b>Sergey Krieger</b>是SinnerSchrader的前端开发人员。 除了前端开发之外，他还对Web可访问性主题非常感兴趣，并讨论了一些增加它的方法。 在剪辑之下-一个有关为那些看不见屏幕并使用其他设备与浏览器进行交互的用户创建拖放组件的故事。 <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2> 滑杆 </h2><br> 让我们从Aviasales屏幕上的一个简单屏幕开始。 输入出发点，到达点，屏幕上会出现可供选择的航班列表。 航班可以有很多，可以按价格，时间和其他参数进行过滤。 滑块用于过滤Aviasales网站上的结果。 它们看起来很棒，使用方便。 <br><br><img src="https://habrastorage.org/webt/ue/wx/7o/uewx7oalw17sy1dg05e1lkk4mvy.jpeg"><br><br> 我们的任务是想象我们是该网站的开发者。 让我们尝试重新创建这些滑块，并查看它们在不同情况下的工作方式。 <br><br><h3> 本机滑块 </h3><br> 首先要考虑的是本机元素是否可以用于我们的功能？ 如果有这样的机会，我们就这样走，因为原生元素会节省很多时间。 <br><br> 让我们举一个简单的例子：滑块沿着轨道移动，并且滑块的值改变。 向右移动滑块-屏幕颜色从白色变为亮粉红色（如果变回，则从红色变为）-再次变为白色。 <br><br><img src="https://habrastorage.org/webt/u0/qx/3j/u0qx3jhkrepn96nsdnf81-c0z1e.gif"><br><br> 滑块的工作原理很简单-滑块沿着轨道滑动，并且滑块返回一些值。 <br><br> 没有人会在生产中使用这种滑块。 没有设计师允许他使用，因为他看上去很虚弱。 作为开发人员，我们可以解决此问题。 每个浏览器都有许多带前缀的CSS属性，您可以在其中样式化滑块的各个元素并对其进行优化。 <br><br><pre><code class="css hljs">: : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-webkit-slider-runnable-track</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-webkit-sHder-thumb</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-moz-range-track</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-moz-range-thumb</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-ns-track</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:-ms-thumb</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-ms-fill-lower</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-ms-fill-upper</span></span></code> </pre> <br> 您可以手动使用属性，但这不是一件容易的事。 属性在不同的浏览器中工作，并且测试将花费大量时间。 <br><br> 但是，有一个特殊的工具可以解决该问题<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-Daniel Stern网站</a> 。 您手动设置滑块的样式，复制CSS代码，一切正常。 现在，本机滑块是类型为<code>range</code>的<code>input</code> HTML元素，但仍可以像以前一样工作-通过移动滑块。 <br><br><h3> 滑块测试 </h3><br> 为了彻底解决问题-我们进行了测试。 此外，我们将不仅测试滑块，还测试三个参数中的其他元素。 <br><br><ul><li>  <b>鼠标</b> 。 用鼠标测试组件的操作正是我们一直要做的。 <br></li><li>  <b>琴键</b> 除鼠标外，我们还为视力障碍者调整了滑块。 这些用户看不到屏幕，而是使用键盘与计算机和浏览器进行交互 <br></li><li>  <b>屏幕阅读器</b> -一种读取屏幕上信息的特殊设备。 <br></li></ul><br>  <i>注意：在下文中，结合视频记录的阅读和观看测试会更加方便-这更加明显。</i>  <i>经过测试的视频片段将从正确的时刻开始。</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>鼠标</b> 。 我们紧贴滑块，向左右拖动。 如果一切都变了-太好了。 <br><br>  <b>琴键</b> 使用Tab键转到滑块，然后使用箭头沿着轨道移动它。 <br><br>  <b>屏幕阅读器</b> 。 这里比较复杂。 想象一下，我们看不到屏幕-关闭屏幕上的灯，然后打开屏幕阅读器。 他说： <br><br>  <i>-VoiceOver已在Chrome中打开</i> 。 <br><br> 使用Tab键，转到滑块。 <br><br>  <i>-零</i>  <i>程式化的滑块应用程序。</i> <br><br> 屏幕阅读器的语音信息：值，滑块名称和其他相关信息，也可能很有用。 我们开始移动滑块： <br><br>  <i>-一，二，三，四，五。</i> <br><br> 如果我们听到倒计时，一切正常。 打开灯并检查结果。 测试结束。 <br><br> 似乎我们什么也没做，只是简单地设置了滑块。 我们在可访问性方面的工作是什么？ 事实是，没有工作-我们使用了本机元素。 <br><br><blockquote> 如果您的应用程序能够使用本机元素：滑块，按钮，复选框，请随时使用它们并节省时间。 这些元素已经支持键盘和屏幕阅读器。 </blockquote><br><h3> 自定义滑块 </h3><br> 假设本机滑块不是我们的选择。 让我们看一下Aviasales代码，看看这里不是我们刚刚测试过的滑块。 <br><br><img src="https://habrastorage.org/webt/yd/nj/lw/ydnjlwzcvn_rkij3l_z5sgvi5ti.jpeg"><br><br> 这不是类型<code>range</code>的<code>input</code> ，而是设计师设计所需的一组<code>div</code>样式。 似乎没有区别，一切正常。 <br><br> 我们将对此进行检查，并通过手动创建滑块来使任务复杂化。 沿轨道移动滑块的关键是绝对定位： <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">position</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">absolute</span></span></code> </pre> <br> 我们绝对将滑块相对于轨道定位，并根据其位置计算滑块的值。 <br><br> 为了确定使用鼠标捕获元素的时刻，我们使用<code>mousedown</code>事件。 要跟踪事件的运动<code>mousemove</code> ， <code>mouseup</code>会告诉我们我们释放了滑块。 对于触摸屏，我们还将使用许多事件： <code>touchstart</code> ， <code>touchmove</code>和<code>touchend</code> 。 <br><br> 似乎一切都很简单。 滑块的外观与上一个示例相同，但是在代码中，它不是滑块，而是一组样式化<code>div</code> ，而JavaScript将负责移动它。 使用鼠标时，这是很难察觉的，但是键盘上却有细微差别。 为了使键盘能够抓住这样的滑块，我们为它提供了一个属性，使其具有<code>tabindex</code>属性的焦点，并使用JavaScript来跟踪箭头的单击。 <br><br><h3> 测试自定义滑块 </h3><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> 使用屏幕阅读器会更难。 关闭灯，打开屏幕阅读器，然后尝试更改该值。 屏幕阅读器会说出这些动作，如果他说出奇怪的话，例如“小组”，我们认为。 <br><br> 屏幕阅读器读取没有任何语义角色的div或其他元素时，“ Groups”即为屏幕阅读器发出的声音。 任何不涉及滑块的词都表示尚未实现可访问性。 为了使滑块可用，我们使用ARIA属性： <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"thumb"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tabindex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"slider"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-lab</span></span></span><span class="hljs-tag"></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">l</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-valuenow</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-valuemin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-valuenax</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"10"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> 我们需要告诉屏幕阅读器我们通常的样式元素是滑块。 我们将通过<code>role</code>使用值<code>slider</code>来执行此操作。 然后使用<code>aria-labl</code>为滑块指定名称。 我们设置滑块的当前值，滑块的最小值和最大值。 使用这五个ARIA属性，我们将对滑块进行动画处理，并使屏幕阅读器说出我们需要的内容。 <br><br> 使用标记，JavaScript和ARIA元素，我们使所有用户都可以使用自定义滑块。 <br><br><h2> 排序 </h2><br> 实现拖放组件的另一种方法是排序。 通常，网站上都有很好排序的项目列表。 <br><br><img src="https://habrastorage.org/webt/8h/vt/wm/8hvtwmxdsv-1vxevekfds05md04.jpeg"><br><br> 上方是Google Keep网站的屏幕截图-该服务可让您创建待办事项列表，待办事项表。 待办事项表具有名称，元素列表，标记每个元素，将其删除以及添加新元素的能力。 我们的任务是重新创建此功能。 <br><br> 这是待办事项列表小部件的样子。 <br><br><img src="https://habrastorage.org/webt/wj/vg/rp/wjvgrpwrdzpgct2-bnwfp7z_q58.jpeg"><br><br> 它具有： <br><br><ul><li> 名称-待办事项清单; <br></li><li> 要素：与狗同行，与医生约诊，可以注明或删除； <br></li><li> 添加新元素的能力-添加任务。 <br></li></ul><br> 当我们添加新项目（例如“做晚餐”）时，它会放在列表的末尾。 这是一种逻辑行为-我们在最后添加了该项。 但是，让我们假设这些列表具有某种优先级。 例如，在工作一天之后，晚餐比带狗散步更重要。 我们想将其移到开头-优先级元素应该在列表的顶部。 如何解决这个问题？ <br><br> 即使根本不考虑辅助功能，也该如何移动元素？ 我们已经知道一种方法-使用绝对定位。 另一种方法是将<code>draggable</code>属性添加到元素。 如果<code>true</code>任何元素将此属性添加为<code>true</code> ，则该属性变为可拖动。 您可以用鼠标抓住它并将其拖动到屏幕上的其他位置。 <br><br><blockquote> 但并非所有元素都需要<code>draggable</code>属性。 不需要图像和链接-默认情况下将它们拖放。 </blockquote><br> 仅当我们要取消此功能时，我们才将<code>false</code>设置为<code>draggable</code> 。 <br><br><h3> 资料传输 </h3><br> 屏幕上有两个元素。 左图是默认情况下暗含<code>draggable</code>属性的图片。 右边是带有虚线的元素。 我们的任务是将图片拖到虚线框内，我称之为“拖放区”。 <br><br><img src="https://habrastorage.org/webt/2m/tj/-d/2mtj-di88v16scbsrxxr6toswsq.jpeg"><br><br> 抓住图片并将其拖到拖放区。 这种熟悉的功能：我们可以在拖动区域中输入图片，放开时退出-图片在里面。 我们希望在待办事项列表中具有相同的功能。 <br><br><img src="https://habrastorage.org/webt/r_/u_/rf/r_u_rf1xnlxdk1hrgz6tvyt62tw.gif"><br><br> 但是在查看待办事项列表如何使用这项技术之前，我们将弄清楚当将一个项目从一个地方拖到另一个地方时会发生什么。 这些元素中的每一个都发生事件列表。 <br><br> 拖动的项目上有三个事件。 <br><br>  <b>Dragstart</b> ，当我们开始拖动元素的过程时发生一次。 这是一个重要事件，我们稍后将查找原因。 <br><br> 每数百毫秒定期发生一次<b>拖动</b> 。 取决于浏览器，该值会更改，但是该事件很频繁。 使用此属性，您可以跟踪要拖动的元素在屏幕上的位置。 <br><br>  <b>Dragend-</b>当我们用鼠标释放物品时触发。 <br><br> 在接受其他元素的元素上，将引发四个事件。 <br><br>  <b>Dragenter-</b>当我们将一个项目拖到另一个项目中时发出警报。 <br><br>  <b>Dragover-</b>当我们开始将其移入内部时说。 <br><br>  <b>Dragleave-</b>当我们<b>将</b>一个元素<b>移到</b>另一个元素的边界之外而没有释放鼠标时。 <br><br> 当我们在接收元素内释放鼠标时， <b>掉落</b>是最重要的事件。 <br><br> 所有这四个事件只是元素移动的先决条件-它们本身什么也不做。 使用它们，您可以决定元素的移动。 我们这样做： <br><br><pre> <code class="javascript hljs">draggable.addEventListener(<span class="hljs-string"><span class="hljs-string">"dragstart"</span></span>, e =&gt; { e.dataTransfer.setData(<span class="hljs-string"><span class="hljs-string">"text/plain"</span></span>, e.target.id); }); dropZone.addEventListener(<span class="hljs-string"><span class="hljs-string">"drop"</span></span>, e =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = e.dataTransfer.getData(<span class="hljs-string"><span class="hljs-string">"text/plain"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> el = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(id); });</code> </pre> <br> 我们可以将数据手动添加到在拖动元素的开头触发的事件中。 使用<code>dataTransfer.setData</code>方法，我们添加了要拖动的项目的选择器。 在我们的例子中，这是<code>id</code> 。 <br><br> 最后，当在接收元素上触发Drop事件时，我们使用<code>dataTransfer.getData</code>方法获取此数据。 事实证明，我们将拥有我们要移动<code>id</code>元素的<code>id</code> 。 接下来，使用普通的JavaScript，在页面上选择此元素并将其移动到任何地方。 我们用手移动。 为了使其成为可能，我们在拖放元素上使用事件。 <br><br> 我们可以将任何元素拖到任何其他元素上。 只需在页面上拖动元素并将其指向其他元素即可。 移动并不意味着一个要素如果没有计划就应该接受另一要素。 因此，浏览器以这种方式工作：默认情况下，没有元素可以接受其他元素。 <br><br> 如果要教元素接受其他元素，则需要在<code>dragenter</code>和<code>dragover</code>上使用<code>e.preventDefault()</code>方法取消此值，这会在<code>dropZone</code>元素上<code>dropZone</code> 。 <br><br><pre> <code class="javascript hljs">dropZone.addEventListener(<span class="hljs-string"><span class="hljs-string">"dragenter"</span></span>, e =&gt; { e.preventDefault(); }); dropZone.addEventListener(<span class="hljs-string"><span class="hljs-string">"dragover«, e =&gt; { e.preventDefault(); });</span></span></code> </pre> <br> 我在不同的浏览器中测试了这种组合。 例如，只有<code>dragenter</code>才能在Chrome中工作，因此将<code>dragenter</code>和<code>dragover</code>用于跨浏览器解决方案。 <br><br> 让我们看看这在待办事项清单上如何运作。 <br><br><img src="https://habrastorage.org/webt/w3/7m/dw/w37mdwtlrdvhviswwdbbpvj23zu.jpeg"><br><br> 我们的任务是将熟悉的待办事项列表中的最后一项拖到第一个位置。 将鼠标悬停在一个元素上，一个具有6个垂直点的元素将显示在左侧。 在UX世界中，这意味着您可以拖动它。 <br><br><img src="https://habrastorage.org/webt/wx/lb/ju/wxlbju_v8d-jwy2asx3vkp-wgma.gif"><br><br> 我们将鼠标悬停在它上面，如果它发生变化，则表明该元素已准备好移动。 用鼠标向上拉，会出现一个粉红色指示器，指示您可以在哪里移动该项目。 其余技术是将对象放置在所需位置。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b4a/48a/1e1/b4a48a1e11e23220d4fe08daddd96fee.gif"><br><br> 现在，我们将教键盘，然后教屏幕阅读器正确处理我们刚做的事情。 <br><br><h3> 琴键 </h3><br> 使用键盘，一切都不会那么复杂。 使用键盘，我们使用与鼠标相同的模式：找到要移动，选择，移动然后释放的元素，并将其放到适当的位置。 <br><br> 按Tab键，第一个元素的左侧会出现一个熟悉的6点图标，表示可以拖放。 默认情况下，它是隐藏的，并且它的出现意味着它已经聚焦。 这是您可以与此元素进行交互的信号。 <br><br> 我们通过按“ Enter”键将第一个元素“烹饪晚餐”引入“选择模式”。 该项目目前正在接受其他选项。 向上和向下箭头可以将其移动到其他位置。 按下向下箭头，该项将移动一个位置，再次移至另一位置。 因此，我们手动移动组件。 这不是浏览器中的默认设置-我们使用JavaScript手动编写。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e62/d92/a1b/e62d92a1b2d10dc8fe1d71b780b23ced.gif"><br><br> 当我们要从元素中删除选择时，请按“ Esc”或任何其他键-元素丢失选择并保留在正确的位置。 <br><br><h3> 屏幕阅读器 </h3><br> 键盘上的所有内容都很清晰。 我们几乎解决了这个问题。 仍然需要教屏幕阅读器发出动作。 所需要做的只是添加说明，以便屏幕阅读器知道正在发生的事情：它在哪里以及要做什么。 <br><br> 为了控制屏幕阅读器所说的内容，我们将使用实时区域技术。 这是一组可以添加到元素的属性。 根据属性，屏幕阅读器会发音不同的短语。 <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"live-region visually-hidden"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-live</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"polite"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"status"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> liveRegion = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">".live-region«); liveRegion.textContent = ' ';</span></span></code> </pre> <br> 我将<code>aria-live</code>属性的值为<code>polite</code>常规的空<code>div</code> ，并将<code>role</code>的<code>status</code>设置为<code>status</code> 。 对于屏幕阅读器，这是一个监听元素的信号。 当您希望屏幕阅读器说些什么时，请使用JavaScript更新内容，然后屏幕阅读器会说出该内容。 <br><br> 让我们看看它是如何工作的。 <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> 我们的任务是将第一个元素移到最后一个位置。 关闭屏幕上的灯，打开屏幕阅读器。 <br><br>  <i>-VoiceOver已在Chrome中打开。</i> <br><br> 我们开始移动该物品。 首先，寻找我们的小部件-在标题中移动。 屏幕阅读器声音： <br><br>  <i>-二级标题。</i>  <i>待办事项清单。</i> <br><br> 找到了 我们继续单击Tab键。 <br><br>  <i>-对象列表3.按“ Enter”键选择元素“与狗同行”。</i>  <i>组。</i> <br><br> 首先，屏幕阅读器会读出列表中元素的数量，以便用户了解列表中有多少个元素。 然后他说出一条指令-选择项目的操作：“按Enter键和该组件的名称。很明显，该做什么-按下Enter键。 <br><br>  <i>-选择元素“与狗同行”。</i>  <i>使用向上和向下键移动。</i>  <i>使用Esc键取消选择。</i> <br><br> 我讲的是关于这些说明的信息：当您选择一个元素时，屏幕阅读器会提供我们想到的说明。 我们更新屏幕阅读器，并朗读放置在实时区域元素中的文本。 按照说明进行操作很简单-使用向上/向下和Esc键取消选择。 下移一个位置。 <br><br>  <i>-元素“与狗同行”移动到位置2。</i> <br><br> 再来一次 <br><br>  <i>-将元素“与狗同行”移到位置3。</i> <br><br> 该项目在列表的末尾。 打开灯，检查元素是否真的在最后位置。 <br><br> 按“ Esc”取消选择。 <br><br>  <i>-取消“带狗散步”项目。</i> <br><br><blockquote> 借助想象力，标记，JavaScript和ARIA属性，我们提供了一个小部件，对于有视力问题的用户来说是很难的。 </blockquote><br><h2> 搬家 </h2><br> 让我们以Trello为例来看一下页面中元素的移动。 这是一个任务跟踪器，带有用于指示任务状态的列。 将任务从一列拖放到另一列对应于任务状态的更改。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5bf/b85/c45/5bfb85c458996b5b47c627254d5f6fd9.jpg"><br><br> 模拟Trello的简化版本以弄清楚如何使该组件可用。 在我的版本中，有三列：“我会做”，“我会做”，“完成”。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/70d/9d1/160/70d9d1160ad3845ed34dbdbe0110c160.gif"><br><br> 任务可以从一个地方拖到另一个地方：用鼠标抓住组件，将其拖到下一列，然后释放它-它就在那里。 <br><br><h3> 琴键 </h3><br> 使用鼠标，一切都很简单；我们熟悉上一个示例中的<code>true</code>值<code>draggable</code>属性。 使用键盘，可以选择相同的选项-使用箭头将任务从一列移到另一列。 但是，如果列是5或8，则从第一个移动到最后一个将需要在右键5或8次上单击5或8次，这很不方便，并且会使得使用该组件变得困难。 <br><br> 否则我们将做。 按Tab键，焦点移到第一个元素。 再次按该键，将出现一个隐藏的新元素，直到焦点移入其中。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/130/949/8f9/1309498f9ad7190823280c901d1f0d4d.gif"><br><br> 三个垂直点表示该项目将具有一个菜单。 图标可能不同。 使用<code>select</code>元素时，浏览器的默认行为是单击“空格”，然后出现一个菜单。 <br><br> 我们将使用JavaScript解决问题，但让用户有机会选择他们要移动此任务的列。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3dd/14a/1c5/3dd14a1c560be0797852e02380576b32.gif"><br><br> 我们移至最后一列，按Enter键，一切正常-元素移至所需位置。 <br><br><h3> 屏幕阅读器 </h3><br> 添加有关屏幕阅读器的说明。 使用常规<code>select</code>元素具有很大的优势，因为默认情况下它是可用的。 让我们看看我们能做什么。 <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> 关闭屏幕上的灯，打开屏幕阅读器。 <br><br>  <i>-VoiceOver已在Chrome中打开。</i> <br><br> 我们转到第一个元素。 屏幕阅读器会显示列表中有多少个对象。 我们使用了语义元素<code></code>以及元素的名称。 按Tab键。 <br><br>  <i>-“制作”：分组选择“踢足球”按钮的折叠弹出按钮。</i> <br><br> 屏幕阅读器可以发音奇怪的单词。 他称列名称为“ Make”，而屏幕阅读器的“最小化弹出窗口”则表示我们将使用菜单-对于屏幕阅读器的用户，这将是清晰的。“ Minimized”，“ pop-up”和“ button”将被发音。在不同的屏幕阅读器中有所不同，但我们不必为此担心，因为屏幕阅读器用户已熟悉此行为。 <br><br> 我们的任务是从列表中选择所需的列。 <br><br>  <i>-不为零，请执行。</i>  <i>选择列展开的弹出按钮。</i>  <i>您当前在屏幕上的位置...“正在执行”。</i>  <i>“完成” ...项目“踢足球”已移至“完成”列。</i> <br><br> 这是我们手动添加的文本，用于通知用户我们已经这样做了。 这就是我们的任务委员会的工作方式。 <br><br><h2> 上载档案 </h2><br> 还可以在网站上找到文件上传功能，例如，将文件附加到电子邮件。 因此，在我的示例中，电子邮件是Gmail。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c6c/162/9af/c6c1629aff5082ed186d55c096380d34.jpg"><br><br> 屏幕上有一个带有虚线的元素。 我们将在这里拖动文件。 <br><br><img src="https://habrastorage.org/webt/3f/1u/7v/3f1u7vujslz3sxoiybyis4lxopy.gif"><br><br> 为此，请打开文件所在的资源管理器，然后用鼠标将文件拖到虚线区域。 拖放后，项目将更改状态，释放文件，然后开始下载。 下载结束时，我们将通知用户所有内容均已成功下载。 <br><br><h3> 琴键 </h3><br> 使用键盘，一切都可以轻松解决。 有一个类型为<code>file</code>的语义<code>input</code>元素。 如果使用它，则单击此项目时，“浏览器”对话框将自动打开，您可以在其中从OS中选择文件。 窗口样式可以设置为任何样式，具体取决于设计人员的需求。 <br><br><img src="https://habrastorage.org/webt/q7/13/ss/q713sspf4k5lmwca19b-9po0w5i.gif"><br><br> 单击该项目，将打开一个对话框。 由于我们使用了本机<code>input</code>元素，因此您也可以使用Tab键移动到该元素，按空格键，将打开一个对话框。 使用Enter键选择元素，所有操作均以相同的方式进行。 <br><br> 一切都可以通过鼠标和键盘使用。 对于屏幕阅读器，您可以执行默认情况下本机元素未提供的操作。 <br><br><h3> 屏幕阅读器 </h3><br>  “选择”元素将起作用，我们仍然可以使用操作系统打开一个对话框。<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 但是，当加载开始时，我们可以做一件非常有趣的事情来更新用户的屏幕阅读器有关下载状态的信息。 </font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开屏幕阅读器。</font><font style="vertical-align: inherit;">使用键盘，转到该项目以从OS中选择文件。</font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-选择按钮应用程序。</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用屏幕阅读器按按钮。</font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-按选择按钮。</font><font style="vertical-align: inherit;">对话的开始... image image.png。</font><font style="vertical-align: inherit;">3月31日... 0％... 16％已下载... 73％已下载... 100％已加载。</font><font style="vertical-align: inherit;">image.png文件已成功上传。</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发生什么事了 </font><font style="vertical-align: inherit;">打开对话框后，我们选择了文件。</font><font style="vertical-align: inherit;">我们不需要在这里做任何事情，因为屏幕阅读器与操作系统有关，与浏览器无关。</font><font style="vertical-align: inherit;">像所有其他应用程序一样，文件系统可以很好地处理。</font></font><br><br>       ,    screen reader    .          — 10%, 20%...100%.    ,   ,  ,   . <br><br>      Live region,   .   screen reader,     ,     ARIA Live,   screen reader         .       . <br><br><h2> 总结 </h2><br> <b> </b> .    —  .   , ,       screen reader.     , ,           . <br><br> <b>HTML + JavaScript + ARIA</b> .   Drag-&amp;-Drop      , JavaScript   ARIA.    ,      . <br><br> <b>« »</b> .     ,  « »:  , ,  ,    ,   . <br><br> <b> </b> .   :      , ,   . <br><br><h2>  </h2><br>   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">W3.org</a> —     .              . <br><br>   ,     ,    <b> </b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">inclusive-components.design</a> .          . ,       ,       ,   ,   ,  . <br><br> <b></b> .       ,     ,    <b> </b> « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://www.google.com/url%3Fq%3D">  </a> ».      —     .      . <br><br> <b> </b> .      ,       —       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://www.google.com/url%3Fq%3D">Medium    </a> .       ,       .     ,    . ,        ,     .      .    ,     . <br><br><blockquote>       .        FrontendConf ++  .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">FrontendConf 2019</a>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  Leonie Watson</a> — ,    W3C     W3C  -.   Leonie      screen reader.  ,       ,        ,   ,         . <br><br>  FrontendConf   ,     .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a>  ,       . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN468541/">https://habr.com/ru/post/zh-CN468541/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN468527/index.html">逆动力学问题法合成控制器</a></li>
<li><a href="../zh-CN468529/index.html">驯服Gorynych或在Ghidra中反编译eBPF</a></li>
<li><a href="../zh-CN468533/index.html">使用Express 42在DevOps上搭便车</a></li>
<li><a href="../zh-CN468535/index.html">不需要日志？</a></li>
<li><a href="../zh-CN468537/index.html">DevOps的基础知识。 从头开始进入项目</a></li>
<li><a href="../zh-CN468543/index.html">平日程序委员会FrontendConf。 谢尔盖·波波夫专访</a></li>
<li><a href="../zh-CN468545/index.html">“爱丽丝，我们去前端吧！”</a></li>
<li><a href="../zh-CN468547/index.html">FrontendConf的英语，CSS，网格和可访问性</a></li>
<li><a href="../zh-CN468549/index.html">GPU绑定。 如何将所有内容传输到视频卡等等。 动画制作</a></li>
<li><a href="../zh-CN468553/index.html">与版本控制系统类似的业务应用程序中的参数管理</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>