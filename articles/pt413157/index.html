<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëåüèª ‚úä üç¨ Sobre o armazenamento de senhas no banco de dados üë®üèΩ‚Äçüéì ‚ú® üèáüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoje veremos a melhor forma de armazenar senhas em um banco de dados e como plataformas conhecidas resolvem esse problema. 

 Texto simples 
 Quando s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sobre o armazenamento de senhas no banco de dados</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/acribia/blog/413157/"><img src="https://habrastorage.org/webt/5m/il/hx/5milhxdjp-qtujnj6mfodpirgem.jpeg"><br><br>  Hoje veremos a melhor forma de armazenar senhas em um banco de dados e como plataformas conhecidas resolvem esse problema. <br><a name="habracut"></a><br><h3>  Texto simples </h3><br>  Quando surgiu a quest√£o de armazenar senhas, √© claro, a primeira id√©ia foi simplesmente escrev√™-las abertas na placa de identifica√ß√£o apropriada no banco de dados.  E tudo ficaria bem se os clientes n√£o pudessem realmente acessar diretamente.  Infelizmente, por√©m, essa inje√ß√£o SQL bem conhecida √†s vezes ainda funciona em v√°rios aplicativos da web, sem mencionar outras vulnerabilidades em potencial.  Em quest√µes de seguran√ßa, geralmente √© aceito assumir o pior e preparar um plano de a√ß√£o e prote√ß√£o, mesmo nesse caso.  Assumimos que um invasor encontrou uma brecha em um aplicativo da Web, de uma maneira ou de outra, descarrega alegremente uma tabela com nomes de usu√°rio e senhas e, em seguida, as descarta como bem entender.  Em geral, suas a√ß√µes adicionais podem ser as seguintes: <br><br><ul><li>  executando a√ß√µes ileg√≠timas em nome de usu√°rios usando suas credenciais em um recurso vulner√°vel: por exemplo, um cart√£o banc√°rio est√° vinculado a uma conta e agora um invasor pode us√°-lo; </li><li>  uma tentativa de usar a senha recebida em outros recursos: longe de sempre, os usu√°rios, seguindo os conselhos, criam novas senhas para diferentes servi√ßos a cada vez; </li><li>  uma tentativa de identificar a regra para gerar uma senha e ir para o segundo ponto: alguns formam uma regra para gerar uma senha; como resultado, as senhas em diferentes recursos s√£o diferentes, mas obedecem √† mesma regra que pode ser detectada; </li><li>  escalonamento de privil√©gios: a senha do administrador tamb√©m pode ser armazenada na mesma tabela, com o conhecimento do qual √†s vezes voc√™ pode obter controle total sobre o servidor. </li></ul><br><h3>  Hashing de <s>criptografia</s> </h3><br>  A id√©ia imediatamente acaba n√£o sendo t√£o boa.  O que fazer  Seria √≥timo armazenar senhas na forma criptografada.  Ent√£o, mesmo que sejam removidos, eles n√£o poder√£o se recuperar ou, pelo menos, passar√£o muito tempo com isso.  Aqui, a escolha surge entre dois ramos do desenvolvimento: criptografar senhas ou hash.  Os desenvolvedores se estabeleceram no segundo e, em princ√≠pio, √© claro o porqu√™.  Compare nossos candidatos para diferentes caracter√≠sticas: <br><br><ol><li>  Entrada de trabalho.  A criptografia leva mais tempo e, independentemente da convers√£o que escolhermos, ser√° necess√°rio realizar todas as verifica√ß√µes de senha.  Um dos requisitos para as fun√ß√µes de hash √© a velocidade de execu√ß√£o. </li><li>  O comprimento dos valores de sa√≠da.  O resultado da criptografia √© vari√°vel em tamanho, o resultado do hash √© sempre o mesmo e armazenar dados uniformes em um banco de dados √© muito conveniente.  Sem mencionar o fato de que o tamanho da senha na forma criptografada fornecer√° algumas informa√ß√µes sobre o tamanho da senha original.  O mesmo comprimento, no entanto, leva √† possibilidade de colis√µes, mas mais sobre isso abaixo. </li><li>  Gerenciamento de chaves.  A criptografia requer uma chave, que tamb√©m precisar√° ser armazenada em algum lugar e espero que ningu√©m a encontre.  De qualquer forma, a gera√ß√£o e o gerenciamento de chaves s√£o uma hist√≥ria separada (eles n√£o devem ser fracos, precisam ser alterados regularmente e assim por diante). </li><li>  A possibilidade de conflito.  Ao criptografar, a sa√≠da de diferentes dados de entrada tamb√©m ser√° sempre diferente.  Com o hash, esse nem sempre √© o caso.  Um comprimento de hash constante significa que o conjunto de valores de sa√≠da da fun√ß√£o de hash √© limitado, o que leva √† colis√£o.  Ou seja, digamos que o usu√°rio realmente ficou confuso e criou uma senha longa muito legal, que possui caracteres especiais, n√∫meros e letras em mai√∫sculas e min√∫sculas.  O invasor insere a senha n√£o menos legal "admin" no campo de senha.  O servidor fez o hash para verifica√ß√£o e compara√ß√£o de hashes.  Hashes combinados.  √â uma pena. </li></ol><br>  Assim, com uma pontua√ß√£o de 3: 1, o hash vence.  Mas √© poss√≠vel parar por a√≠? <br>  A resposta √© n√£o. <br><br><h3>  Ataques com senha com hash </h3><br>  Ent√£o, o atacante conseguiu nossa mesa com nomes de usu√°rio e senhas.  As senhas agora est√£o com hash, mas isso n√£o impede o invasor e ele pretende seriamente recuper√°-las.  Suas poss√≠veis a√ß√µes: <br><br><ul><li>  for√ßa bruta do dicion√°rio: se o invasor n√£o obteve √™xito com a senha de refer√™ncia do administrador, ele se volta para o dicion√°rio de senhas populares e tenta a sorte com seus hashes; </li><li>  tabelas do arco-√≠ris: hoje em geral, talvez ele n√£o precise calcular nada e classificar o dicion√°rio.  Ser√° suficiente recorrer √†s tabelas do arco-√≠ris na rede.  As tabelas Rainbow cont√™m valores de hash j√° calculados por algu√©m antes e seus dados de entrada correspondentes.  √â importante observar que, devido a colis√µes, a senha que a tabela rainbow oferecer√° n√£o ser√° necessariamente a que o usu√°rio usa.  Os valores calculados j√° s√£o para MD5, SHA1, SHA256, SHA512, bem como para suas modifica√ß√µes e algumas outras.  Voc√™ pode tentar reverter o hash, por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ; </li><li>  pesquisa exaustiva: se isso n√£o ajudar, voc√™ ter√° que recorrer √† for√ßa bruta e repetir todas as senhas poss√≠veis seguidas at√© que os hashes calculados finalmente correspondam. </li></ul><br>  No caso mais geral, um invasor precisar√° decifrar senhas.  E aqui seu sucesso depender√°, entre outras coisas, da velocidade de computa√ß√£o da fun√ß√£o hash.  Uma compara√ß√£o do tempo dos hashes pode ser encontrada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  Por exemplo, as fun√ß√µes de hash implementadas em Java no Windows 10 de 64 bits com 1 n√∫cleo Intel i7 de 2,60 GHz e 16 GB de RAM foram executadas um milh√£o de vezes para calcular um hash de 36 caracteres.  Eles mostraram os seguintes resultados: <br><br>  MD5 - 627 ms <br>  SHA-1 - 604 ms <br>  SHA-256 - 739 ms <br>  SHA-512 - 1056 ms <br><br>  Hoje, por√©m, o bruteforce pode ser paralelo e funcionar muitas vezes mais r√°pido na GPU (assim como na APU, DSP e FPGA).  No entanto, al√©m de escolher um algoritmo mais longo e uma sa√≠da mais longa, voc√™ pode fazer outra coisa. <br><br><h3>  Hash hash </h3><br>  Para impedir que um invasor use tabelas arco-√≠ris prontas, existe uma t√©cnica para hash uma senha v√°rias vezes.  Ou seja, calculamos o hash do hash do hash do hash ... e, portanto, n vezes (√© necess√°rio, no entanto, n√£o nos envolvermos demais com isso, porque o servidor tamb√©m precisar√° fazer isso durante a verifica√ß√£o regular da senha do usu√°rio).  Agora, √© t√£o simples, de acordo com a tabela do arco-√≠ris, que ele n√£o encontrar√° a senha e o tempo para a for√ßa bruta aumentar√° significativamente.  Mas nada impede o invasor de gerar uma tabela arco-√≠ris a partir do dicion√°rio de senhas, conhecendo o algoritmo de hash.  Al√©m disso, para as combina√ß√µes mais populares desse m√©todo, essas tabelas j√° foram geradas: <br><br><img src="https://habrastorage.org/webt/wr/la/gr/wrlagrdaz9zpo8gm4lku4s7wvvc.jpeg">  " <br><br><h3>  Adicione sal a gosto </h3><br>  Para que ele n√£o pudesse fazer isso, as senhas s√£o hash hoje com a adi√ß√£o de sal. <br>  Um salt √© uma sequ√™ncia aleat√≥ria extra atribu√≠da a uma senha e com hash.  Voc√™ n√£o pode recuperar a senha do hash obtido da tabela arco-√≠ris.  Conhecendo o sal e o hash de sa√≠da, o atacante est√° fadado √† for√ßa bruta e nenhuma tabela pr√©-calculada provavelmente o ajudar√°. <br>  Taxonomia de salga de senha: <br><br>  1. De acordo com o princ√≠pio da salga: <br><br><ul><li>  um sal √∫nico para cada usu√°rio: individual para cada usu√°rio - dessa maneira, se o sal se tornar conhecido pelo invasor, cada senha dever√° ser alterada.  Al√©m disso, mesmo que dois usu√°rios pensem da mesma maneira e criem senhas id√™nticas, os hashes ainda ser√£o diferentes na sa√≠da; </li><li>  sal global: o mesmo para todos, usado para todos os hashes; </li><li>  isso e outro. </li></ul><br>  2. De acordo com o m√©todo de armazenamento de sal: <br><br><ul><li>  no banco de dados: como regra, sais individuais s√£o armazenados no mesmo banco de dados que os hashes de senha;  frequentemente at√© na mesma linha; </li><li>  no c√≥digo (leia-se: na configura√ß√£o): o salt global geralmente √© armazenado n√£o no banco de dados, mas, por exemplo, na configura√ß√£o, para que o violador tenha que gastar tempo na sua sele√ß√£o. </li></ul><br>  Assumimos que os sais de usu√°rios individuais sejam armazenados no banco de dados, o sal global na configura√ß√£o.  O atacante obteve acesso ao banco de dados e conhece todos os hashes e seus sais correspondentes (o sal global n√£o √© armazenado no banco de dados e ele n√£o o conhece).  No total, se todos os m√©todos forem combinados, a fim de obter senhas de forma clara, como foi o caso nos primeiros sistemas, ele, sendo extremamente proposital, encontrar√° os seguintes obst√°culos: <br><br><ol><li>  Ele n√£o conhece o sal global, ent√£o ter√° que ser brutalizado. </li><li>  Ele conhece os sais dos usu√°rios, mas n√£o possui tabelas preparadas com esses sais, portanto ter√° que decifrar senhas. </li><li>  Esse processo levar√° ainda mais tempo devido ao fato de voc√™ precisar fazer hash hash n vezes. </li></ol><br><h3>  Como as senhas armazenam v√°rios CMS </h3><br><h4>  Wordpress </h4><br>  Antes da vers√£o 3.x, as senhas eram simplesmente hash com MD5.  Agora a biblioteca phpass √© usada.  Por padr√£o, salt √© atribu√≠do √† senha √† frente e a sequ√™ncia resultante √© hash MD5 2 ^ 8 vezes. <br><br><h4>  Joomla </h4><br>  Antes da vers√£o 1.0.12, apenas o MD5 era usado.  A biblioteca phpass √© usada, por padr√£o, bcrypt com salt e 2 ^ 10 repeti√ß√µes. <br><br><h4>  Drupal </h4><br>  At√© a vers√£o 6 md5 sem sal.  A biblioteca phpass √© usada.  O padr√£o √© sha512 salgado com 2 ^ 16 repeti√ß√µes. <br><br><h4>  Silverstripe </h4><br>  Usa Blowfish salgado com 2 ^ 10 repeti√ß√µes. <br><br><h4>  Umbraco </h4><br>  Usa HMACSHA256 com sal.  Usa o segundo sal global especificado na configura√ß√£o. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt413157/">https://habr.com/ru/post/pt413157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt413145/index.html">Analista ajuda empresas a ganhar dinheiro</a></li>
<li><a href="../pt413147/index.html">√â poss√≠vel usar o Tibero em vez do Oracle. E √© necess√°rio</a></li>
<li><a href="../pt413149/index.html">Data warehouse distribu√≠do no conceito Data Lake: por onde come√ßar</a></li>
<li><a href="../pt413151/index.html">A NSA prop√¥s um padr√£o de criptografia para dispositivos IoT, mas a ISO o rejeitou</a></li>
<li><a href="../pt413155/index.html">Guia de estilos de shell do Google (em russo)</a></li>
<li><a href="../pt413159/index.html">UI clara ou escura? Dicas para escolher um esquema de cores para sua interface</a></li>
<li><a href="../pt413161/index.html">Poema Git</a></li>
<li><a href="../pt413163/index.html">Fraquezas de HTTPS. Parte 2</a></li>
<li><a href="../pt413165/index.html">Explica√ß√£o SRTP</a></li>
<li><a href="../pt413167/index.html">Como integrar o Zimbra com um sistema DLP?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>