<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🆎 ☀️ 👎🏾 Java-Befehlszeilenschnittstellen: picocli 🔗 🤒 📻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! 

 Der nächste Start der Java Developer Group , bei dem wir alle unser Experiment fortsetzen, dass der Lernprozess nicht kontinuierl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Java-Befehlszeilenschnittstellen: picocli</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/419401/"> Hallo allerseits! <br><br>  Der nächste Start <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der Java Developer Group</a> , bei dem wir alle unser Experiment fortsetzen, dass der Lernprozess nicht kontinuierlich sein muss ("Sollte die Kontroverse kontinuierlich sein?").  Das heißt, wir haben das Programm leicht überarbeitet und gemischt und in drei Schritte unterteilt, die leicht mit einer Pause zwischen ihnen übergeben werden können.  Im Allgemeinen ist es sowohl für Studenten als auch für uns interessant, wenn nur niemand feucht wäre, sonst würde das Programm sogar etwas komplizierter erscheinen, obwohl es vorher nicht einfach war.  Nun, ein traditionell interessanter Artikel zu unserem Kurs. <br><br>  Lass uns gehen! <br><br><img src="https://habrastorage.org/webt/op/zt/xy/opztxye_lbi2eq1jlkb1i-yvuz4.png"><a name="habracut"></a><br><br>  Auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offiziellen Website wird</a> picocli als „leistungsstarke kleine Befehlszeilenschnittstelle“ beschrieben, bei der es sich um ein Java-Framework mit nur einer Datei handelt, mit dem Befehlszeilenargumente analysiert und fehlerfreie, leicht anpassbare Hilfsnachrichten erstellt werden können.  Mit Blumen. "  Dieser Beitrag bietet einen <a href="">kurzen Überblick über Picocli 0.9.7</a> und seine Verwendung zum Parsen von Befehlszeilenargumenten in Java-Code. <br><br>  Wie die anderen in dieser Reihe beschriebenen Java- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Befehlszeilenverarbeitungsbibliotheken ist picocli Open Source</a> .  Da alle picocli in einer einzigen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Java-Datei</a> implementiert sind, können Sie den Quellcode einfach direkt verwenden, wenn Sie dies wünschen.  Auf der Picocli-Website wird betont, dass "die Besonderheit von Picocli darin besteht, dass Benutzer Anwendungen ausführen können, die Picocli verwenden, ohne Picocli selbst als externe Abhängigkeit zu benötigen: Der gesamte Quellcode befindet sich in einer Datei, um die Autoren der Anwendung zu ermutigen, ihn in den Programmquellcode aufzunehmen." . Wenn Sie picocli als Bibliothek im Maven Repository hat eine zu bevorzugen <a href="">JAR-Datei</a> mit dem Satz von kompilierten Class - Dateien (picocli stellt eine Java-Datei, aber zahlreiche Unterklassen und Annotation enthält  s). <br><br>  Der einfachste Weg, sich ein Bild von der Einzeldatei-Natur von Picocli zu machen, besteht darin, sich die Datei selbst anzusehen.  Der Quellcode für CommandLine.java ist auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Picocli-</a> Downloadseite verfügbar.  Die folgenden beiden Screenshots zeigen die Ausgabe von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Javap</a> beim Ausführen der CommandLine-Klasse und beim Ausführen einer ihrer internen Anmerkungen und einer ihrer internen Klassen. <br><br><img src="https://habrastorage.org/webt/ly/pz/rd/lypzrdilo683xyhgaldpf2iplng.png"><br><br><img src="https://habrastorage.org/webt/w8/sp/a6/w8spa6ghbqwnaxatgnmozur4ofk.png"><br><br>  Unabhängig davon, ob wir CommandLine.java in unsere eigene Klassen- / JAR-Datei kompilieren oder eine bereits erstellte JAR von Maven verwenden, ist der Quellcode der Anwendung, die Picocli verwendet, offensichtlich der gleiche.  Die Bestimmungsphase beim Parsen von Argumenten mit Picocli wird durch Kommentieren der Felder der Instanz erreicht, in denen die mit den Befehlszeilenparametern verknüpften Werte gespeichert werden.  Dies wird im folgenden Codeausschnitt gezeigt. <br><br>  <b>Picocli "Definition" -Stufe</b> <br><pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/*     Java   picocli. */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Command</span></span>( name=<span class="hljs-string"><span class="hljs-string">"Main"</span></span>, description=<span class="hljs-string"><span class="hljs-string">"Demonstrating picocli"</span></span>, headerHeading=<span class="hljs-string"><span class="hljs-string">"Demonstration Usage:%n%n"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Option</span></span>(names={<span class="hljs-string"><span class="hljs-string">"-v"</span></span>, <span class="hljs-string"><span class="hljs-string">"--verbose"</span></span>}, description=<span class="hljs-string"><span class="hljs-string">"Verbose output?"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> verbose; <span class="hljs-meta"><span class="hljs-meta">@Option</span></span>(names={<span class="hljs-string"><span class="hljs-string">"-f"</span></span>, <span class="hljs-string"><span class="hljs-string">"--file"</span></span>}, description=<span class="hljs-string"><span class="hljs-string">"Path and name of file"</span></span>, required=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String fileName; <span class="hljs-meta"><span class="hljs-meta">@Option</span></span>(names={<span class="hljs-string"><span class="hljs-string">"-h"</span></span>, <span class="hljs-string"><span class="hljs-string">"--help"</span></span>}, description=<span class="hljs-string"><span class="hljs-string">"Display help/usage."</span></span>, help=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> help;</code> </pre> <br>  Das obige Codebeispiel zeigt, dass Sie mit Picocli mehrere Flaggennamen angeben können (in meinem Beispiel Einzelzeichennamen mit einem Bindestrich und Mehrzeichennamen mit zwei Bindestrichen).  Dieses Beispiel zeigt auch, dass für die erforderlichen Parameter erforderlich = wahr festgelegt werden kann und für <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hilfsoptionen</a> wie das Drucken von Verwendungsdetails und das Eliminieren von Fehlern im Zusammenhang mit dem Fehlen erforderlicher Parameter help = true angegeben werden kann.  Beachten Sie, dass Picocli 0.9.8 zusätzliche Unterstützung für die spezifischeren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hilfsnachrichtentypen versionHelp</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">usageHelp bietet</a> . <br><br>  Die Parsing-Phase in Picocli wird in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CommandLine.populateCommand (T, String ...) ausgeführt</a> , wobei T eine Instanz der Klasse mit Picocli-annotierten Feldern ist und die verbleibenden Zeilen die Argumente sind, die analysiert werden müssen.  Dies wird im folgenden Codeausschnitt gezeigt. <br>  <b>Picocli-Analysephase</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Main main = CommandLine.populateCommand(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Main(), arguments);</code> </pre> <br>  Die Abrufphase in Picocli besteht darin, einfach auf die mit Picocli kommentierten Felder der Instanz zuzugreifen, die in der Phase "Parsing" an die CommandLine.populateCommand (T, String ...) -Methode übergeben wurden.  Ein einfaches Beispiel für eine solche „Umfrage“ ist in der folgenden Auflistung dargestellt. <br><br>  <b>Picocli-Umfragephase</b> <br><br><pre> <code class="java hljs">out.println( <span class="hljs-string"><span class="hljs-string">"The provided file path and name is "</span></span> + main.fileName + <span class="hljs-string"><span class="hljs-string">" and verbosity is set to "</span></span> + main.verbose);</code> </pre> <br>  Das Anzeigen von Zusatznachrichten oder Verwendungsinformationen für den Benutzer, wenn -h oder --help in der Befehlszeile angegeben ist, ist so einfach wie das "Abrufen" eines mit Picocli-Anmerkungen versehenen Felds, für das help = true angegeben wurde, um festzustellen, ob dieser boolesche Wert festgelegt wurde oder nicht und rufen Sie bei Installation eine der überladenen CommandLine.usage-Methoden auf.  Ich musste eine der statischen Versionen dieser Methode verwenden, wie in der folgenden Liste gezeigt. <br><br>  <b>Support-Meldungen / Nutzungsinformationen in Picocli</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (main.help) { CommandLine.usage(main, out, CommandLine.Help.Ansi.AUTO); }</code> </pre><br>  Die folgenden Screenshots zeigen eine einfache Anwendung, die mit picocli geschrieben wurde.  Der erste Screenshot zeigt den Typ der Fehlermeldung und die Stapelverfolgung, wenn das erforderliche Flag fehlt.  Der zweite Screenshot zeigt, wie die in den Anmerkungen angegebenen langen und kurzen Namen verwendet werden.  Das dritte Bild zeigt die Funktion der Anzeige von Hilfsmeldungen in Aktion. <br><br><img src="https://habrastorage.org/webt/us/sj/4d/ussj4dkuaajcytgltr_vkytopzk.png"><br><img src="https://habrastorage.org/webt/pm/qs/wd/pmqswdqvi8e9yeu3qmfdc0t7jl8.png"><br><img src="https://habrastorage.org/webt/gf/rb/uo/gfrbuozuswdqrb06-h9sth0f_b8.png"><br><br>  Eine der zusätzlichen Funktionen von Picocli, die in vielen anderen Java-Befehlszeilenargument-Analysebibliotheken nicht verfügbar ist, ist die Unterstützung der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Farbsyntax</a> a.  In der ersten Auflistung dieses Beitrags wurden Zeilen in Anmerkungen mit @ | definiert  |  @ Syntax.  In dem obigen Screenshot, der die Verwendung von Hilfsnachrichten demonstriert, wurden diese Zeichen ohne spezielle Verarbeitung unverändert übertragen.  Wenn ich diesen Beispielcode jedoch in Cygwin ausführe, werde ich sehen, was diese Zeichen bewirken. <br><br><img src="https://habrastorage.org/webt/hl/d2/gm/hld2gm792xahxrehyp-g-uz8tlm.png"><br><br>  Im obigen Screenshot sehen wir, dass Picocli die Farbsyntax (gelb und weiß) automatisch auf die Zusatznachrichtenoptionen angewendet hat und auch fettgedruckte und unterstrichene Fettdrucksyntax auf Bereiche mit der Beschreibung von Zusatznachrichten angewendet hat, in denen die @ | -Syntax angewendet wurde  |  @. <br><br>  Im Folgenden finden Sie zusätzliche Picocli-Funktionen, die bei der Auswahl eines Frameworks oder einer Bibliothek berücksichtigt werden müssen, um das Parsen von Befehlszeilenargumenten in Java zu erleichtern. <br><br><ul><li>  Picocli ist ein Open Source-Projekt, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das</a> mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Apache 2.0 lizenziert ist.</a> </li><li>  Für Picocli müssen keine Bibliotheken oder Frameworks von Drittanbietern heruntergeladen werden. </li><li>  Der gesamte Picocli-Quellcode ist in einer einzigen Java-Datei enthalten. Dieser Code kann kopiert und in ein eigenes Konfigurationsverwaltungssystem eingefügt und mit dem Rest des Anwendungscodes kompiliert werden. Dies bedeutet, dass selbst die Picocli-JAR-Datei nicht erforderlich ist. </li><li>  Die CommandLine.java-Quelldatei (Picocli 0.9.7) umfasst etwas mehr als 3.700 Zeilen (einschließlich Leerzeichen und Kommentare) und wiegt fast 200 KB.  Die Datei picocli-0.9.7.jar wiegt ungefähr 83 KB. </li><li>  Picocli ist aktuell und wird regelmäßig aktualisiert.  Version 0.9.8 wurde gestern veröffentlicht (nachdem ich den größten Teil dieses Beitrags geschrieben habe). </li><li>  Picocli verfügt über eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sehr detaillierte Dokumentation</a> und ist in vielerlei Hinsicht aktueller als die Dokumentation einiger anderer Java-Befehlszeilenverarbeitungsbibliotheken. </li><li>  Die Unterstützung der Farbsyntax von Picocli ist einfach zu verwenden, und die Hilfe zur plattformübergreifenden Verwendung der Farbsyntax ist im Abschnitt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unterstützte Plattformen</a> dokumentiert. </li><li>  Die Verwendung von Picocli-Annotationen für Felder auf Instanzebene ähnelt der Verwendung von Annotationen in einigen anderen Befehlszeilenverarbeitungsbibliotheken und bietet dieselben Vorteile. </li><li>  Die Hauptfunktionen von Picocli sind sehr praktisch und leicht zu erlernen. Picocli unterstützt jedoch auch die Möglichkeit, verschiedene Aspekte der Befehlszeilenverarbeitung mit Picocli zu konfigurieren. </li></ul><br>  Die Einträge in diesem Beitrag sind auf <a href="">GitHub</a> vollständig verfügbar. <br><br>  Picocli ist eine unterstützte und aktualisierte Bibliothek zum Parsen von Java-Befehlszeilenargumenten.  Es enthält mehrere neue Funktionen und Ansätze aus einigen anderen verfügbaren Befehlszeilenverarbeitungsbibliotheken, die in Java geschrieben wurden. Es wurden jedoch einige verschiedene Funktionen hinzugefügt (z. B. die Farbsyntax und die gesamte Bibliothek, die in einer Java-Quelldatei enthalten ist).  Picocli ist an sich recht einfach zu bedienen und attraktiv, wird sich jedoch höchstwahrscheinlich von anderen Bibliotheken für einen einzelnen Entwickler abheben, wenn dieser Entwickler die Farbsyntax oder die Möglichkeit unterstützen möchte, dem Projekt des Entwicklers eine Quellcodedatei ohne zusätzliche oder kompilierte JAR-Dateien hinzuzufügen. Klassendateien. <br><br>  DAS ENDE <br><br>  Wie immer warten wir auf Ihre Fragen und Kommentare. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de419401/">https://habr.com/ru/post/de419401/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de419391/index.html">Macht, Geld und Open Source. Erklären, wie die Community mit Apache Ignite funktioniert</a></li>
<li><a href="../de419393/index.html">Erstellen Sie ein einfaches API-Gateway in ASP.NET Core</a></li>
<li><a href="../de419395/index.html">Erklärung der Lambda-Ausdrücke</a></li>
<li><a href="../de419397/index.html">Wie wir eine mobile App für sechs Länder erstellt haben</a></li>
<li><a href="../de419399/index.html">OpenAI Five besiegt ein Team von Leuten in einem Show Match Dota 2</a></li>
<li><a href="../de419405/index.html">Wie sieht es mit IPv6 aus oder was behindert den Übergang zu einer neuen Version des Protokolls? Besprechen Sie die Situation</a></li>
<li><a href="../de419407/index.html">Eine detaillierte Analyse der Dota 2-Übereinstimmung zwischen OpenAI und Personen im 5x5-Format. Menschen verloren</a></li>
<li><a href="../de419409/index.html">Neue Intel NUCs basierend auf Coffee Lake Prozessoren</a></li>
<li><a href="../de419411/index.html">Über das Feuer in einem Wolkenkratzer. Kino und Realität</a></li>
<li><a href="../de419413/index.html">Meißel - (nicht ganz) ein neuer Ansatz zur Entwicklung der digitalen Logik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>