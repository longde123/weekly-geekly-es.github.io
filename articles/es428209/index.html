<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå∏ üë©üèΩ‚Äçüíº üíé Libro de cocina del desarrollador: recetas de dise√±o impulsado por dominio (Parte 2, estructura e interacci√≥n) ‚è∏Ô∏è üí´ üôã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduccion 


 En el primer art√≠culo, identificamos el alcance de las pr√°cticas indicadas, para qu√© proyectos se pueden aplicar y para cu√°les no. 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Libro de cocina del desarrollador: recetas de dise√±o impulsado por dominio (Parte 2, estructura e interacci√≥n)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428209/"><p><img src="https://habrastorage.org/webt/fr/vw/on/frvwonyhe7k6st_x65v67hcbrcs.jpeg" alt="ddd-header"></p><br><h1 id="vvedenie">  Introduccion </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">En el primer art√≠culo,</a> identificamos el alcance de las pr√°cticas indicadas, para qu√© proyectos se pueden aplicar y para cu√°les no. </p><br><p> En este art√≠culo, me gustar√≠a dar una breve descripci√≥n de los principios b√°sicos de DDD, as√≠ como compartir mi experiencia personal con su aplicaci√≥n.  Hablaremos con m√°s detalle sobre la comunicaci√≥n y los enfoques estructurales con ejemplos de su implementaci√≥n. </p><br><p>  En el siguiente art√≠culo escribir√© las posibles combinaciones de los patrones de dise√±o aplicados teniendo en cuenta su implementaci√≥n, y finalmente dar√© un ejemplo de una implementaci√≥n espec√≠fica de un peque√±o microservicio. </p><a name="habracut"></a><br><h1 id="ddd">  DDD </h1><br><p>  Recordemos la definici√≥n anterior: </p><br><blockquote>  El dise√±o impulsado por dominio (DDD) es un enfoque para el desarrollo de software para la satisfacci√≥n integral de las necesidades, al vincular estrechamente la implementaci√≥n con los principales modelos de negocio que est√°n en constante desarrollo. </blockquote><p>  El libro de referencia que describe la pr√°ctica de construir sistemas complejos es Eric <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ded</a> ' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Domain Driven Dedign</a> (Big Blue Book).  Si lees alg√∫n art√≠culo de revisi√≥n sobre este tema, ya lo sabes.  Para cuando use DDD en la pr√°ctica, tendr√° que leerlo.  Este no es el libro m√°s f√°cil de leer: </p><br><blockquote>  La fuente can√≥nica para DDD es el libro de Eric Evans.  No es la lectura m√°s f√°cil en la literatura de software, pero es uno de esos libros que paga ampliamente una inversi√≥n sustancial. <br><br>  Martin Fowler: 15 de enero de 2014 </blockquote><p>  Si se desplaza por el contenido del libro, le parecer√° que no est√° completamente estructurado.  Pero el mapa nos ayudar√°. <br><img src="https://habrastorage.org/webt/oh/5e/tj/oh5etj1mf-uvet2bdyn7y1olj8k.png" alt="DDD-map"></p><br><p>  En el mapa est√°n aquellas pr√°cticas que consideraremos hoy. </p><br><p>  El alcance de las pr√°cticas cubiertas en el libro es enorme.  El alcance de las pr√°cticas que se pueden aplicar fuera de este libro es a√∫n mayor.  Antes de poner en servicio al menos parte de ellos, identifique sus objetivos.  Dar√© el m√≠o como ejemplo. </p><br><ul><li>  Aumenta la productividad. </li><li>  Escribe un c√≥digo comprensible. </li><li>  Escalado a nivel de desarrollo de software. </li></ul><br><h2 id="edinyy-yazyk">  Idioma √∫nico </h2><br><p>  El desarrollo de software rara vez conduce a la creaci√≥n de algo nuevo, como regla, esto es una simulaci√≥n de algo existente. </p><br><blockquote>  Un modelo es una representaci√≥n de un objeto real, que incluye solo las propiedades y funciones necesarias. </blockquote><p>  No podemos crear un producto de software que cubra todo el √°rea tem√°tica.  Es posible reproducir solo esa parte que reproducir√° la funcionalidad necesaria. </p><br><p>  Un buen ejemplo de un modelo ser√≠a un mapa topogr√°fico.  Ella es una modelo de terreno.  El mapa no contiene praderas de campos y r√≠os, solo refleja la ubicaci√≥n de objetos reales entre s√≠. </p><br><p>  Para crear un modelo claro y claro para todos, debe hablar el mismo idioma.  No solo Eric Evans nos dice esto, sino tambi√©n el sentido com√∫n.  Si los programadores usan sus t√©rminos y hacen su propia "jerga", entonces los primeros simplemente no entender√°n lo que hay que hacer.  Las empresas en este caso no podr√°n darse cuenta del costo real de desarrollar una u otra "caracter√≠stica".  ¬øCu√°ntas veces has escuchado: "S√≠, es solo un bot√≥n para agregar"? </p><br><p>  Su objetivo como dise√±ador de sistemas debe ser obtener la m√°xima comprensi√≥n mutua de todo el equipo.  ¬øC√≥mo lograr esto?  Comienza a hablar  Si las personas comienzan a comunicarse en cualquier grupo cercano, tienen un cierto conjunto de t√©rminos generalmente aceptados.  En diferentes empresas, el proceso de introducci√≥n de un lenguaje com√∫n es probable que sea diferente.  Esto puede ser una decisi√≥n decidida o un procedimiento democr√°tico.  El idioma se puede indicar expl√≠citamente, y no se ingresa expl√≠citamente, en cuyo caso simplemente comienzan a hablarlo.  Una buena t√©cnica para introducir un lenguaje com√∫n es la documentaci√≥n general. </p><br><h3 id="kak-vesti-dokumentaciyu-proekta">  C√≥mo mantener la documentaci√≥n del proyecto </h3><br><ol><li>  Cualquier comunicaci√≥n entre negocios y desarrollo deber√≠a mejorar su modelo. </li><li>  Despu√©s de la reuni√≥n, registre el resultado en forma de documentaci√≥n (artefacto Scrum) y muestre esta documentaci√≥n a todos los participantes en el proceso de desarrollo. </li><li>  Use un solo idioma en la documentaci√≥n. </li><li>  Lo m√°s importante: no pierda el tiempo en la documentaci√≥n.  Todav√≠a tiene que escribir c√≥digo, y la documentaci√≥n se reescribir√° muchas veces, gastar recursos es costoso.  En lugar de perder el tiempo con la aplicaci√≥n de gr√°ficos UML durante mucho tiempo, use una servilleta, un bol√≠grafo y una c√°mara en su tel√©fono. </li><li>  La documentaci√≥n requiere disciplina; no puede escribirla de vez en cuando. </li><li>  Separar la documentaci√≥n: <br><ul><li> Comentarios en el c√≥digo: describa momentos incomprensibles directamente en el c√≥digo, deje <code>#ODO:</code> (elimine al fusionar el c√≥digo en maestro).  Exprese su opini√≥n en los comentarios, por ejemplo, debe usar una u otra muleta cuando trabaje con c√≥digo legasy. </li><li>  Los comentarios sobre el proyecto <code>README.md</code> en el directorio ra√≠z de su proyecto deben contener informaci√≥n t√©cnica: c√≥mo iniciar el proyecto, c√≥mo ejecutar pruebas, etc.  Tambi√©n es una buena idea obtener un mapa donde tenga todos los proyectos y en qu√© servidores se ejecutan.  Registre por separado todos los acuerdos aceptados. </li><li>  Y lo m√°s importante, la base de conocimiento.  Una colecci√≥n de documentos que describen los procesos comerciales, esta es la parte de los documentos que est√° disponible tanto para usted como para la empresa. </li></ul></li><li>  El principal error de quienes escriben documentaci√≥n es la redundancia.  No intentes cubrir todo y todo, transmitir solo el significado general.  La documentaci√≥n debe complementar su proyecto, pero no reemplazarlo de ninguna manera.  No escriba todos los t√©rminos que solo sean ambiguos.  Si una definici√≥n toma m√°s de dos oraciones, es una definici√≥n pobre. </li></ol><br><p>  Documentaci√≥n de ejemplo: </p><br><pre> <code class="markdown hljs"><span class="hljs-section"><span class="hljs-section">#         . # :  : -    - email -  ## : ###        ,     email  ,    1  (      email  ). ###           .          email . ###  email  email     .    ,    email.   . ###       ,     ,    .   . ###      email,    ,       .   2 . ###                  .    ,     ,             .</span></span></code> </pre><br><p>  Tenga en cuenta que en este ejemplo no especificamos un diccionario expl√≠cito, sin embargo, arreglamos el concepto de <em>Usuario</em> , <em>Autorizaci√≥n</em> , <em>Registro</em> .  Escribir dicha documentaci√≥n no le llevar√° al experto m√°s de 20 minutos. </p><br><p>  Para una persona que no es experta en el √°rea tem√°tica, el proceso de escribir documentaci√≥n se percibe como algo complicado.  Es necesario separar la recopilaci√≥n de conocimientos y el registro de los conocimientos recopilados. <code> !=  +  .</code> </p><br><blockquote>  "Lo que llamas el universo", dijo el cuarto, "es, de hecho, una acumulaci√≥n de mundos que, como la piel de un arco, est√°n uno encima del otro y se separan gradualmente uno del otro". <br><br>  - Inusualmente claramente indicado!  - Admir√© a los abderitas.  - Incre√≠blemente claro!  "Pensaron que entend√≠an al fil√≥sofo, porque sab√≠an muy bien qu√© era la cebolla". <br><br>  Historia de Aberdeen, Cristov Martin Wieland </blockquote><br><h2 id="ogranichennyy-konteksty-i-domeny">  Contextos y dominios limitados </h2><br><p>  Imagine que actuamos como dise√±adores de una startup progresiva.  A todos nos encanta la pizza fr√≠a, maldecir con correos y completar formularios en el sitio durante horas.  Por lo tanto, se nos ocurri√≥ una maravillosa startup "Cuatro tortugas y una rata": </p><br><ul><li>  Hay un sitio en el que las pizzer√≠as se registran y publican sus platos reales. </li><li>  Estas pizzer√≠as no tienen su propio servicio de mensajer√≠a. </li><li>  Hay clientes que no pueden comunicarse con la pizzer√≠a, pero est√°n listos para hacer un pedido a trav√©s del sitio web o la aplicaci√≥n m√≥vil. </li><li>  'Caracter√≠stica' asesina: los correos no son personal especialmente contratado, sino personas comunes que se registraron a trav√©s de la aplicaci√≥n m√≥vil </li><li>  Los correos reciben √≥rdenes, despu√©s de su ejecuci√≥n reciben el pago por el trabajo realizado. </li><li>  Lleva m√°s tiempo esperar a tales correos, pero la entrega y, en consecuencia, la pizza, es m√°s barata. </li></ul><br><p>  Recordemos la documentaci√≥n que describimos en el cap√≠tulo anterior.  All√≠, en nuestro diccionario √∫nico, <em>se utiliz√≥</em> el t√©rmino <em>registro</em> .  Pero en este proyecto tenemos varios de ellos: </p><br><ul><li>  Registro de clientes </li><li>  Registro de pizzer√≠a </li><li>  Registro de mensajer√≠a </li><li>  Registro de pedidos </li></ul><br><p>  Un lenguaje unificado pertenece a un contexto limitado.  El dominio de la documentaci√≥n anterior es 'Sistema de autorizaci√≥n'.  Intentemos asignar dominios para nuestro inicio. </p><br><p>  Pero antes de comenzar, veamos una peque√±a terminolog√≠a sobre qu√© es un dominio y qu√© contexto es limitado. </p><br><blockquote>  Dominio (Dominio): una representaci√≥n de una estructura comercial real que resuelve un problema espec√≠fico. </blockquote><p>  Por ejemplo: sistema log√≠stico, sistema de pago, sistema de autorizaci√≥n, sistema de gesti√≥n de pedidos. </p><br><p>  El dominio se divide en subdominios, que describen estructuras m√°s peque√±as, por ejemplo: una cesta de pedidos, un sistema para construir rutas. </p><br><p>  Cada dominio tiene un √°rea de responsabilidad limitada: funcionalidad limitada. </p><br><blockquote>  Contexto limitado: un conjunto de restricciones de dominio que ayuda al dominio a centrarse en una sola tarea para su mejor soluci√≥n. </blockquote><p>  Me gusta presentar este t√©rmino como tal abstracci√≥n.  Un dominio es un c√≠rculo.  Un contexto restringido es un c√≠rculo. </p><br><p><img src="https://habrastorage.org/webt/nf/nm/jz/nfnmjzlgui85mvfatppogqv-kdq.jpeg" alt="Contexto de dominio"></p><br><p>  Incluso en la terminolog√≠a DDD, se asigna el n√∫cleo. </p><br><blockquote>  El n√∫cleo (dominio principal): el dominio m√°s importante que m√°s caracteriza a su negocio. </blockquote><p>  Entonces, los dominios del proyecto "Cuatro tortugas y una rata": </p><br><p>  <strong>Trabaja con una pizzer√≠a</strong> (Pizzarias) </p><br><p>  <em>Contexto</em> : b2b todo lo relacionado con pizzer√≠as </p><br><p>  <em>Subdominios</em> : </p><br><ul><li>  registro de nuevas pizzer√≠as </li><li>  agregando surtido </li><li>  actualizar el estado de la disponibilidad de un producto </li></ul><br><p>  <strong>Trabajar con el cliente</strong> (clientes) </p><br><p>  <em>Contexto</em> : b2c, todo lo relacionado con trabajar con clientes de pizza </p><br><p>  <em>Subdominios</em> : </p><br><ul><li>  ver surtido </li><li>  materiales informativos </li></ul><br><p>  <strong>Trabajar con mensajeros</strong> (sistema de entrega) </p><br><p>  <em>Contexto</em> : b2e, todo lo relacionado con el trabajo con correos </p><br><p>  <em>Subdominios</em> : </p><br><ul><li>  registro de mensajer√≠a </li><li>  asignaci√≥n de tareas </li><li>  registro de solicitudes de retiro de fondos ganados por el servicio de mensajer√≠a. </li></ul><br><p>  Sistema de pedidos </p><br><p>  <em>Contexto</em> : Kernel.  Le permite coordinar todos los dominios individuales, proporcionando un ciclo completo desde la recepci√≥n de un pedido hasta la entrega de pizza al usuario.  No es un artista int√©rprete o ejecutante, pero desempe√±a el papel de conductor. </p><br><p>  <em>Subdominios</em> : </p><br><ul><li>  aceptaci√≥n del pedido </li><li>  ejecuci√≥n de orden </li><li>  seguimiento del estado del pedido </li></ul><br><p>  <strong>Sistema de liquidaci√≥n</strong> (facturaci√≥n) </p><br><p>  <em>Contexto</em> : contiene todas las transacciones financieras.  Proporciona interacci√≥n con el centro de procesamiento. </p><br><p>  <em>Subdominios</em> : </p><br><ul><li>  aceptar dinero para pedidos </li><li>  dar dinero a los mensajeros por el trabajo realizado </li></ul><br><p>  <strong>Sistema de estad√≠sticas</strong> </p><br><p>  <em>Contexto</em> : La recopilaci√≥n y procesamiento (no emisi√≥n) de informaci√≥n anal√≠tica. </p><br><p>  <em>Subdominios</em> : </p><br><ul><li>  estad√≠sticas sobre fondos </li><li>  estad√≠sticas de la aplicaci√≥n </li></ul><br><p>  <strong>Sistema de gesti√≥n</strong> (panel de <strong>gesti√≥n</strong> ) </p><br><p>  <em>Contexto</em> : la emisi√≥n de informaci√≥n anal√≠tica.  Kit de herramientas de decisiones de gesti√≥n. </p><br><ul><li>  an√°lisis basados ‚Äã‚Äãen estad√≠sticas recopiladas </li><li>  moderaci√≥n previa de pagos a correos </li></ul><br><p>  Seg√∫n los dominios, vamos a mapearlo. </p><br><blockquote>  Un mapa de dominio (mapa de contexto) es una herramienta gr√°fica que le permite describir las relaciones entre dominios individuales. </blockquote><p><img src="https://habrastorage.org/webt/p1/ks/po/p1kspot2qqut90gzcn1b9fhxyn8.png" alt="Mapa de contexto"></p><br><p>  El mapa muestra enlaces entre dominios.  Este mapa es muy superficial, pero el √°rea tem√°tica no se comprende bien.  Este es el primer boceto, reescribiendo el cual obtendr√° el resultado esperado. </p><br><p>  Lo m√°s importante en el mapa es que vemos conexiones entre dominios.  Tal estructura encaja muy bien en la arquitectura de microservicios: </p><br><blockquote>  El principio principal de la arquitectura de microservicios: conectividad d√©bil y fuerte adhesi√≥n. </blockquote><p>  Este principio es dado en el libro de Sam Newman - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Creaci√≥n de microservicios</a> , este es el segundo libro que tendr√° que leer para comenzar a usar los enfoques descritos en este art√≠culo.  Lo que se quiere decir: los dominios deben estar libremente acoplados, pero estrechamente vinculados internamente. </p><br><p>  La traducci√≥n de estos t√©rminos se toma de la traducci√≥n oficial al ruso y, tal vez, refleja mal el significado transmitido.  En los t√©rminos originales son: bajo acoplamiento (conectividad, compromiso, agarre, conjugaci√≥n), alta cohesi√≥n (conectividad, resistencia). </p><br><h2 id="praktika-realizacii-domennogo-razdelenie">  Pr√°ctica de implementaci√≥n de dominio compartido </h2><br><p>  Me gustar√≠a compartir mi experiencia personal: un conjunto de decisiones informadas.  No te insto a que uses estas soluciones.  Pero pueden ser una buena opci√≥n si no sabe por d√≥nde empezar.  Con experiencia personal, las herramientas se adaptar√°n a√∫n m√°s a sus necesidades. </p><br><p>  Los principios principales que nos guiaron: </p><br><ul><li>  La simplicidad de la soluci√≥n.  Haga las cosas complejas simples, no simples complicadas. </li><li>  Pragmatismo  Siempre debe observar la situaci√≥n y, en ausencia de una soluci√≥n existente, desarrollar una nueva.  Intenta tipificar todo, pero evita el dogmatismo. </li><li>  C√≥digo! = Documentaci√≥n.  El c√≥digo son instrucciones para la m√°quina, la documentaci√≥n es una instrucci√≥n para las personas.  No hay necesidad de confundirlos y dar uno tras otro. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">S√ìLIDO</a> </li></ul><br><h3 id="kak-realizovat-domeny">  ¬øC√≥mo implementar dominios? </h3><br><p>  Es muy conveniente seleccionar dominios como microservicios separados. </p><br><blockquote>  Microservices es una aplicaci√≥n separada que implementa la l√≥gica de un dominio. </blockquote><p>  En el desarrollo DDD, el principio de asignar un microservicio en una aplicaci√≥n separada ser√° un contexto limitado.  Esto no niega el principio t√©cnico de separaci√≥n de servicios (si esto se debe a la necesidad de garantizar un alto rendimiento).  Pero el principio contextual ser√° dominante y vinculante. </p><br><h3 id="kak-vydelit-svyazi-mezhdu-domenami">  ¬øC√≥mo resaltar la relaci√≥n entre dominios? </h3><br><p>  Las relaciones entre dominios siempre son una API.  Podr√≠a ser RESTful json api, gRPC, AMPQ.  En el marco de este art√≠culo, no compararemos un protocolo con otro y destacaremos sus ventajas y desventajas; cada uno de ellos tiene su propio campo de aplicaci√≥n.  Pero a√∫n as√≠, deteng√°monos en recomendaciones generales: </p><br><p>  <strong>Sea flexible al elegir un protocolo y r√≠gido en la uniformidad de su implementaci√≥n.</strong> </p><br><p>  Elija un protocolo para cada par de dominios individualmente, no intente usar http en todas partes, puede necesitar colas asincr√≥nicas en alg√∫n lugar y las ventajas de AMPQ le resultar√°n obvias.  No ignore esta oportunidad porque tiene RESTful en todas partes. </p><br><p>  Por otro lado, si est√° implementando RESTful json, use un est√°ndar de estructuraci√≥n de datos.  Puedes tener listo por ejemplo jsonapi u openapi.  Si por alguna raz√≥n, las soluciones preparadas no le convienen y usted siente que puede desarrollar su est√°ndar, describirlo y usarlo.  Pero √∫selo en todas partes, no cree est√°ndares de "zool√≥gico".  Si necesita comunicarse con un sistema externo donde no saben nada sobre sus est√°ndares, escriba un adaptador de microservicio. </p><br><p><img src="https://habrastorage.org/webt/cz/ff/go/czffgobmp7v9lr2pzkjx0-3y5xq.png" alt="Adaptador"></p><br><h3 id="kak-realizovat-sabdomeny">  ¬øC√≥mo implementar subdominios? </h3><br><p>  Como m√≥dulos separados dentro de un microservicio. </p><br><blockquote>  Un m√≥dulo es una implementaci√≥n de un subdominio, al poner la l√≥gica en un espacio de nombres separado (espacio de nombres) dentro de un √∫nico microservicio. </blockquote><p>  ¬øC√≥mo se ve todo esto?  Veamos un ejemplo.  Como recordamos, tenemos un dominio del sistema de entrega: este dominio tiene tres subdominios: </p><br><ul><li>  registro de mensajer√≠a </li><li>  cuesti√≥n de tareas (tareas) </li><li>  registro de solicitudes para el retiro de fondos ganados por el servicio de mensajer√≠a (retiro) </li><li>  comprobar que su microservicio funciona, herramienta auxiliar, t√©cnica (healt_checker) </li></ul><br><p>  Imagina todo esto en forma de una estructura de carpetas: </p><br><pre> <code class="bash hljs">$ tree --dirsfirst delivery_system delivery_system ‚îú‚îÄ‚îÄ app/ ‚îÇ ‚îú‚îÄ‚îÄ health_checker/ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ endpoints.rb ‚îÇ ‚îú‚îÄ‚îÄ registrations/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ entities/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ forms/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ repositories/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ interactor/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ services/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ validations/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ endpoints.rb ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ helpers.rb ‚îÇ ‚îú‚îÄ‚îÄ tasks ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ entities/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ queries/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ repositories/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ endpoints.rb ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ helpers.rb ‚îÇ ‚îî‚îÄ‚îÄ withdrawals ‚îÇ ‚îú‚îÄ‚îÄ entities/ ‚îÇ ‚îú‚îÄ‚îÄ forms/ ‚îÇ ‚îú‚îÄ‚îÄ repositories/ ‚îÇ ‚îú‚îÄ‚îÄ interactor/ ‚îÇ ‚îú‚îÄ‚îÄ services/ ‚îÇ ‚îú‚îÄ‚îÄ validations/ ‚îÇ ‚îú‚îÄ‚îÄ endpoints.rb ‚îÇ ‚îî‚îÄ‚îÄ helpers.rb ‚îú‚îÄ‚îÄ config/ ‚îú‚îÄ‚îÄ db/ ‚îú‚îÄ‚îÄ docs/ ‚îú‚îÄ‚îÄ lib/ ‚îÇ ‚îú‚îÄ‚îÄ schemas/ ‚îÇ ‚îî‚îÄ‚îÄ values/ ‚îú‚îÄ‚îÄ public ‚îú‚îÄ‚îÄ specs ‚îú‚îÄ‚îÄ config.ru ‚îú‚îÄ‚îÄ Gemfile ‚îú‚îÄ‚îÄ Gemfile.lock ‚îú‚îÄ‚îÄ Rakefile ‚îî‚îÄ‚îÄ README.md</code> </pre> <br><p>  Cada carpeta en el directorio de <code>apps/</code> implementa uno u otro subdominio, dentro de cada dominio hay varios patrones: <code>entities</code> , <code>forms</code> , <code>services</code> , etc. Consideraremos cada uno de los patrones aplicados en detalle en uno de los futuros art√≠culos. </p><br><p>  Cada uno de estos patrones se implementa en el espacio de nombres correspondiente (espacio de nombres).  Por ejemplo, un formulario para crear una solicitud de pago a un servicio de mensajer√≠a: </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Withdrawal</span></span></span><span class="hljs-class"> </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment">#   module Forms #  class Create end end end</span></span></span></span></code> </pre> <br><h3 id="kak-realizovat-svyazi-mezhdu-sabdomeny">  ¬øC√≥mo implementar la comunicaci√≥n entre subdominios? </h3><br><p>  Veamos un ejemplo espec√≠fico.  Tenemos una cuenta de mensajer√≠a: <code>Registrations::Entities::Account</code> .  Se refiere al subdominio <code>Registrations</code> , ya que consideramos este dominio no como un proceso de registro, sino como una tabla de cuentas y un libro de registro, como se indica en nuestra documentaci√≥n comercial. </p><br><p>  Tenemos dos <em>procesos</em> en la ejecuci√≥n de los cuales accedemos a esta cuenta. </p><br><ul><li>  Crear una cuenta (registro) </li><li>  Creaci√≥n de una solicitud de retiro de fondos ganados por un servicio de mensajer√≠a (Wihtdrawal) </li></ul><br><p>  Como vemos, estos dos procesos pertenecen a diferentes subdominios: Registro y Wihtdrawal. </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Registrations</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serivices</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CreateAccount</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">call</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">account</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Entities::Account</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Withdrwals</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serivices</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CreateOrder</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">call</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">account</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Registrations::Entities::Account</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  En el primer caso, se implementar√° una llamada a la clase a trav√©s de una llamada a <code>Entities::Account</code> .  Y en el segundo caso, a trav√©s de una llamada expl√≠cita a <code>Registrations::Entities::Account</code> .  Es decir  si especificamos expl√≠citamente un subdominio, entonces la clase es de otro subdominio y, por lo tanto, indicamos claramente la conexi√≥n. </p><br><p>  Si la clase no se aplica expl√≠citamente a ninguno de los subdominios, tiene sentido moverla a la carpeta <code>lib/</code> .  Como regla, estas son clases que implementan el patr√≥n 'ValueObject'.  Examinaremos este patr√≥n con m√°s detalle en uno de los siguientes art√≠culos. </p><br><h2 id="realizaciya-cherez-model">  Implementaci√≥n a trav√©s del modelo. </h2><br><p>  Para citar a Eric Evans: </p><br><blockquote>  Si la arquitectura del programa, o al menos una parte central del mismo, no corresponde a la estructura del modelo de dominio, dicho modelo es pr√°cticamente in√∫til, y la operaci√≥n correcta del programa tambi√©n debe cuestionarse.  Al mismo tiempo, las relaciones demasiado complejas entre modelos y funciones en la arquitectura de software son dif√≠ciles de entender, y en la pr√°ctica son dif√≠ciles de mantener a medida que cambia la arquitectura. </blockquote><p>  Recordemos el ejemplo de un buen modelo que ya cit√© al comienzo de este art√≠culo: un mapa topogr√°fico.  Nuestro objetivo es poder encontrar r√°pidamente la distancia entre dos asentamientos.  Podr√≠amos usar una tabla de referencia que muestre dos puntos entre ciudades.  Y podemos usar la tarjeta.  Tanto all√≠ como all√≠ obtenemos el mismo resultado aproximadamente al mismo tiempo.  Pero el mapa es m√°s compacto, muestra con mayor precisi√≥n el √°rea tem√°tica, es m√°s universal.  El mapa como modelo es incre√≠blemente expresivo.  Y si lo consideramos dentro del marco de esta tarea, medir la distancia es m√°s conveniente en el mapa que en el territorio en s√≠, lo que refleja.  Un modelo que refleja un √°rea tem√°tica puede superarlo en algunas propiedades.  Realmente es asombroso. </p><br><p>  La implementaci√≥n del modelo es siempre un proceso creativo con resultados impredecibles.  La calidad de su c√≥digo no es su rendimiento, ni su complejidad, es simplicidad y expresividad.  Mejore a trav√©s de la refactorizaci√≥n constante, h√°galo flexible y elimine todo lo innecesario.  Separe la capa que ser√° responsable de la l√≥gica empresarial del modelo de las capas cuya necesidad se debe a la implementaci√≥n t√©cnica.  La forma en que logramos hacer esto se describir√° m√°s adelante. </p><br><hr><br><div class="spoiler">  <b class="spoiler_title">Fuentes de inspiraci√≥n</b> <div class="spoiler_text"><ul><li>  Dise√±o orientado a problemas, Eric J. Evans </li><li>  Creando microservicios, Sam Newman </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">http://gorodinski.com/blog/2013/04/29/sub-domains-and-bounded-contexts-in-domain-driven-design-ddd/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://martinfowler.com/bliki/BoundedContext.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://habr.com/post/316438/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://dotnetcodr.com/2015/08/06/domain-driven-design-with-web-api-revisited-part-1-introduction/</a> </li><li>  Historia de Aberdeen, Cristov Martin Wieland </li></ul><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es428209/">https://habr.com/ru/post/es428209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es428193/index.html">Sobre ir de gira</a></li>
<li><a href="../es428197/index.html">Finanzas personales efectivas. Nivel 1</a></li>
<li><a href="../es428201/index.html">Agujeros moleculares en JavaScript</a></li>
<li><a href="../es428203/index.html">Observamos los gr√°ficos: estimaciones y pron√≥sticos para el mercado de computaci√≥n en la nube, datos en 2018</a></li>
<li><a href="../es428205/index.html">Lifehacks NaviHaka</a></li>
<li><a href="../es428211/index.html">El libro "Arquitectura evolutiva. Apoyo al cambio continuo "</a></li>
<li><a href="../es428213/index.html">C√≥mo interpretar predicciones de modelos en SHAP</a></li>
<li><a href="../es428217/index.html">Millones de videollamadas por d√≠a o "¬°Llama a mam√°!"</a></li>
<li><a href="../es428219/index.html">¬øDe d√≥nde viene la pr√°ctica de la reubicaci√≥n masiva de personal calificado?</a></li>
<li><a href="../es428221/index.html">Generaci√≥n AI de caras realistas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>