<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÄ üê£ ü•£ In√≠cio r√°pido com o WPF. Parte 1. Liga√ß√£o, INotifyPropertyChanged e MVVM üëêüèª üéÖüèæ üíÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° pessoal! 


 Por v√°rias raz√µes, a maioria de n√≥s usa aplicativos de √°rea de trabalho, pelo menos um navegador :) E alguns de n√≥s precisam escrever...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>In√≠cio r√°pido com o WPF. Parte 1. Liga√ß√£o, INotifyPropertyChanged e MVVM</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427325/"><p>  Ol√° pessoal! </p><br><p> Por v√°rias raz√µes, a maioria de n√≥s usa aplicativos de √°rea de trabalho, pelo menos um navegador :) E alguns de n√≥s precisam escrever nossos pr√≥prios.  Neste artigo, desejo examinar o processo de desenvolvimento de um aplicativo de desktop simples usando a tecnologia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Windows Presentation Foundation (WPF)</a> e aplicando o padr√£o MVVM.  Aqueles que desejam continuar lendo, por favor, abaixo do gato. <a name="habracut"></a></p><br><p>  Acho que n√£o √© necess√°rio dizer que o WPF √© o desenvolvimento da Microsoft :) Essa tecnologia foi projetada para desenvolver aplicativos de desktop para Windows, come√ßando com o Windows XP.  Porque assim?  Isso ocorre pelo fato de o WPF ser executado na plataforma .NET, cujos requisitos m√≠nimos s√£o o Windows XP e posterior.  Infelizmente, o WPF n√£o funciona em outras plataformas, embora haja chances de que isso mude no futuro pr√≥ximo: a estrutura <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Avalonia</a> baseada no WPF est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">em desenvolvimento</a> . </p><br><h4 id="v-chyom-osobennost-wpf">  O que h√° de especial no WPF? </h4><br><p>  Duas principais diferen√ßas entre o WPF e outras ferramentas de cria√ß√£o de desktops: </p><br><ul><li>  A linguagem de marca√ß√£o XAML para marcar a pr√≥pria interface da janela. </li><li>  Renderiza√ß√£o atrav√©s do DirectX, acelera√ß√£o gr√°fica de hardware. </li></ul><br><p>  Eu n√£o vou entrar em detalhes, porque  este n√£o √© exatamente o t√≥pico do artigo.  Se estiver interessado, pesquise no Google XAML, renderiza√ß√£o WPF, milcore.dll e DirectX :) </p><br><h4 id="o-chyom-eta-statya">  Sobre o que √© este artigo? </h4><br><p>  Este artigo cont√©m um aplicativo de exemplo criado na tecnologia WPF: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Interface MVVM e INotifyPropertyChanged.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C√≥pia do texto.</a> </li></ul><br><p>  Tentarei orientar o material do artigo em uma dire√ß√£o pr√°tica, no estilo de "repita comigo", com explica√ß√µes. </p><br><h4 id="chto-nam-ponadobitsya-dlya-povtoreniya-stati">  O que precisamos para repetir o artigo? </h4><br><p>  Pouca experi√™ncia em desenvolvimento em C # :) No m√≠nimo, voc√™ precisa entender bem a sintaxe da linguagem.  Voc√™ tamb√©m precisar√° de uma m√°quina Windows (Win 10 nos exemplos) com o Visual Studio instalado (nos exemplos em 2017, h√° uma vers√£o gratuita da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Comunidade</a> ).  Ao instalar o VS, voc√™ precisar√° ativar o suporte ao desenvolvimento de √°rea de trabalho para a plataforma .NET </p><br><p><img src="https://habrastorage.org/webt/g2/uf/ea/g2ufeaboqvhjvklpzn29cx45w3c.png" alt="imagem"></p><br><p>  Tamb√©m nesta se√ß√£o, descreverei a cria√ß√£o de um projeto. </p><br><p>  Lan√ßamos o VS, criamos um novo projeto, selecionamos o tipo de aplicativo WPF App (.NET Framework) (voc√™ pode inseri-lo na barra de pesquisa no canto superior direito) e nomeie o que for. </p><br><p><img src="https://habrastorage.org/webt/jb/mo/gu/jbmoguoemuje0em1g2gbofodsns.png" alt="imagem"></p><br><p>  Depois de criar um novo projeto, a janela do editor de interface √© aberta, fica assim para mim </p><br><p><img src="https://habrastorage.org/webt/2d/tn/do/2dtndo0yii6z78g-1avlkglqoew.jpeg" alt="imagem"></p><br><p>  Na parte inferior, h√° um editor de layout; na parte superior, h√° uma visualiza√ß√£o da interface da janela, mas voc√™ pode alterar a localiza√ß√£o relativa do editor de c√≥digo e a visualiza√ß√£o da interface para que eles fiquem na ordem horizontal usando esses bot√µes (√† direita da borda das duas √°reas): </p><br><p><img src="https://habrastorage.org/webt/m8/xl/fo/m8xlfoleczsfra-w8yskkxg9ko4.png" alt="imagem"></p><br><h4 id="pered-tem-kak-nachat">  Antes de come√ßar </h4><br><p>  Os elementos da janela (tamb√©m chamados de controles da palavra <strong>Controle</strong> ) devem ser colocados dentro do cont√™iner ou dentro de outro elemento do tipo ContentControl.  <strong>Um cont√™iner</strong> √© um controle especial que permite colocar v√°rios controles filho dentro e organizar seu arranjo m√∫tuo.  Exemplos de recipientes: </p><br><ul><li>  <strong>Grade</strong> - permite organizar elementos por colunas e linhas, a largura de cada coluna ou linha √© configurada individualmente. </li><li>  <strong>StackPanel</strong> - permite organizar filhos em uma √∫nica linha ou coluna. </li></ul><br><p>  Existem outros recipientes.  Como o cont√™iner tamb√©m √© um controle, dentro dele, pode haver cont√™ineres aninhados contendo cont√™ineres aninhados e assim por diante.  Isso permite que voc√™ organize de maneira flex√≠vel os controles entre si.  Al√©m disso, com a ajuda de cont√™ineres, n√£o podemos controlar com menos flexibilidade o comportamento de controles aninhados ao redimensionar uma janela. </p><br><h4 id="mvvm-i-interfeys-inotifypropertychanged-kopiya-teksta">  Interface MVVM e INotifyPropertyChanged.  C√≥pia do texto. </h4><br><p>  <em>O resultado deste exemplo ser√° um aplicativo com dois controles, em um dos quais voc√™ pode editar o texto e na outra apenas visualiza√ß√£o.</em>  <em>Altera√ß√µes de uma para outra ser√£o transferidas de forma s√≠ncrona sem c√≥pia expl√≠cita do texto usando a <strong>liga√ß√£o</strong> .</em> </p><br><p>  Portanto, temos um projeto rec√©m-criado ( <strong>chamei</strong> -o de <strong>Ex1</strong> ), v√° para o editor de layout e primeiro substitua o cont√™iner padr√£o ( <strong>&lt;Grid&gt; &lt;/Grid&gt;</strong> ) por <strong>&lt;StackPanel&gt; &lt;/StackPanel&gt;</strong> .  Este cont√™iner ser√° suficiente, porque  precisaremos colocar apenas dois controles um acima do outro.  Especificamos explicitamente como os componentes ser√£o organizados adicionando a propriedade <strong>Orientation = "Vertical"</strong> .  Adicione alguns elementos dentro da pilha do painel: um campo para inserir texto e um campo para exibir texto.  Como esses controles n√£o cont√™m c√≥digo incorporado, voc√™ pode descrev√™-los com uma tag de fechamento autom√°tico (consulte o c√≥digo abaixo).  Ap√≥s todos os procedimentos acima, o c√≥digo de descri√ß√£o do cont√™iner e os controles aninhados devem assumir o seguinte formato: </p><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Orientation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Vertical"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Agora vamos nos concentrar no objetivo deste exemplo.  Queremos que, ao digitar na caixa de texto, o mesmo texto seja exibido de forma s√≠ncrona no bloco de texto, evitando a opera√ß√£o de c√≥pia expl√≠cita.  Precisamos de algum tipo de entidade conectora, e aqui chegamos a algo <strong>vinculativo</strong> , que foi mencionado acima.  A liga√ß√£o na terminologia WPF √© um mecanismo que permite associar algumas propriedades dos controles a algumas propriedades de um objeto da classe C # e atualizar mutuamente essas propriedades quando uma das partes do pacote √© alterada (isso pode funcionar em uma, na outra ou nas duas dire√ß√µes ao mesmo tempo).  Para aqueles que est√£o familiarizados com o Qt, voc√™ pode desenhar uma analogia de slots e sinais.  Para n√£o esticar o tempo, vamos para o c√≥digo. </p><br><p>  Portanto, para organizar a liga√ß√£o, voc√™ precisa das propriedades dos controles e de alguma propriedade de uma determinada classe C #.  Primeiro, vamos descobrir o c√≥digo XAML.  O texto dos dois controles √© armazenado na propriedade Text, portanto, adicione uma liga√ß√£o para essas propriedades.  √â feito assim: </p><br><pre> <code class="hljs pgsql">&lt;TextBox <span class="hljs-type"><span class="hljs-type">Text</span></span>="{Binding}"/&gt; &lt;TextBlock <span class="hljs-type"><span class="hljs-type">Text</span></span>="{Binding}"/&gt;</code> </pre> <br><p>  Criamos uma liga√ß√£o, mas, por enquanto, n√£o est√° claro o porqu√™ :) Precisamos de um objeto de alguma classe e alguma propriedade nesse objeto √† qual a liga√ß√£o ser√° feita (como eles dizem, √† qual voc√™ deve se ligar). </p><br><p>  Ent√£o, o que √© essa aula?  Essa classe √© chamada de modelo de visualiza√ß√£o e serve como um link entre a visualiza√ß√£o (a interface ou suas partes) e o modelo (modelo, ou seja, as partes do c√≥digo respons√°veis ‚Äã‚Äãpela l√≥gica do aplicativo. Isso permite separar (at√© certo ponto) ) a l√≥gica do aplicativo a partir da interface (exibi√ß√£o, exibi√ß√£o) √© denominada <strong>padr√£o MVVM (Model-View-ViewModel) .No</strong> WPF, essa classe tamb√©m √© chamada <strong>DataContext</strong> . </p><br><p>  No entanto, apenas escrever uma classe de modelo de exibi√ß√£o n√£o √© suficiente.  √â necess√°rio informar de alguma forma o mecanismo de liga√ß√£o que a propriedade do modelo de exibi√ß√£o ou a propriedade de exibi√ß√£o foi alterada.  Para fazer isso, existe uma interface especial <strong>INotifyPropertyChanged</strong> , que cont√©m o evento <strong>PropertyChanged</strong> .  Implementamos essa interface na estrutura da classe base <strong>BaseViewModel</strong> .  No futuro, herdaremos todos os nossos modelos de exibi√ß√£o dessa classe base para n√£o duplicar a implementa√ß√£o da interface.  Portanto, adicione o diret√≥rio <em>ViewModels</em> ao projeto e adicione o arquivo <em>BaseViewModel.cs</em> a esse diret√≥rio.  Temos a seguinte estrutura de projeto: </p><br><p><img src="https://habrastorage.org/webt/va/yi/sn/vayisnwyoe4gndnwxyp9zip12b4.png" alt="imagem"></p><br><p>  C√≥digo de implementa√ß√£o para o modelo de vista base: </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.ComponentModel; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Ex1.ViewModels</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BaseViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">INotifyPropertyChanged</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> PropertyChangedEventHandler PropertyChanged; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnPropertyChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> propertyName = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span></span><span class="hljs-function">)</span></span> { PropertyChanged?.Invoke(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PropertyChangedEventArgs(propertyName)); } } }</code> </pre> <br><p>  Vamos criar nosso viewmodel para nossa classe <strong>MainWindow</strong> , herdando da classe base.  Para fazer isso, no mesmo diret√≥rio <em>ViewModels</em> , crie o arquivo <em>MainWindowViewModel.cs</em> , dentro do qual haver√° esse c√≥digo: </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Ex1.ViewModels</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainWindowViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">BaseViewModel</span></span> { } }</code> </pre> <br><p>  √ìtimo!  Agora precisamos adicionar uma propriedade a esse modelo de exibi√ß√£o, na qual vincularemos o texto de nossos controles.  Como este √© um texto, o tipo dessa propriedade deve ser <em>string</em> : </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SynchronizedText { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br><p>  Como resultado, obtemos esse c√≥digo </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Ex1.ViewModels</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainWindowViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">BaseViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SynchronizedText { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } }</code> </pre> <br><p>  Ent√£o, ao que parece, eles fizeram isso.  Resta vincular essa propriedade a partir da visualiza√ß√£o e est√° pronto.  Vamos fazer agora: </p><br><pre> <code class="hljs pgsql">&lt;TextBox <span class="hljs-type"><span class="hljs-type">Text</span></span>="{Binding Path=SynchronizedText}"/&gt; &lt;TextBlock <span class="hljs-type"><span class="hljs-type">Text</span></span>="{Binding Path=SynchronizedText}"/&gt;</code> </pre> <br><p>  Nishtyak, come√ßamos o projeto, digitamos na caixa de texto iiiii ... nada acontece))) Bem, tudo bem, na verdade, estamos indo no caminho certo, apenas n√£o chegamos ao ponto certo. </p><br><p>  Proponho parar por um momento e pensar no que estamos perdendo.  N√≥s temos uma vis√£o.  Viewmodel tamb√©m.  Propriedades como zabindili.  A interface desejada √© implementada.  Fizemos muito trabalho para copiar uma linha de texto pat√©tica, por que precisamos disso ???!?! 111 </p><br><p>  Ok, brincadeiras √† parte.  Esquecemos de criar um objeto de modelo de exibi√ß√£o e outra coisa (mais sobre isso mais tarde).  Descrevemos a pr√≥pria classe, mas isso n√£o significa nada, porque n√£o temos objetos dessa classe.  Ok, onde voc√™ precisa armazenar um link para esse objeto?  Mais perto do in√≠cio do exemplo, mencionei um certo <em>DataContext</em> usado no WPF.  Portanto, qualquer visualiza√ß√£o tem uma propriedade <strong>DataContext</strong> √† qual podemos atribuir um link ao nosso modelo de visualiza√ß√£o.  Vamos fazer isso.  Para fazer isso, abra o arquivo <em>MainWindow.xaml</em> e pressione F7 para abrir o c√≥digo para esta exibi√ß√£o.  Est√° quase vazio, apenas possui um construtor de classe de janela.  Adicione a cria√ß√£o do nosso modelo de exibi√ß√£o a ele e coloque-o no <strong>DataContext da</strong> janela (n√£o se esque√ßa de adicionar usando o espa√ßo de nome desejado): </p><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainWindow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { InitializeComponent(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.DataContext = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainWindowViewModel(); }</code> </pre> <br><p>  Era simples, mas ainda n√£o o suficiente.  Ainda assim, quando o aplicativo inicia, nenhuma sincroniza√ß√£o de texto ocorre.  O que mais precisa ser feito? </p><br><p>  Voc√™ precisa aumentar o evento <strong>PropertyChanged</strong> quando a propriedade <strong>SynchronizedText for</strong> alterada e informar √† exibi√ß√£o que ele deve monitorar esse evento.  Portanto, para acionar o evento, modifique o c√≥digo do modelo de exibi√ß√£o: </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainWindowViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">BaseViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _synchronizedText; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SynchronizedText { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> =&gt; _synchronizedText; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { _synchronizedText = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; OnPropertyChanged(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(SynchronizedText)); } } }</code> </pre> <br><p>  O que fizemos aqui?  Adicionamos um campo oculto para armazenar texto, agrupamos-o em uma propriedade existente e, ao alterar essa propriedade, n√£o apenas alteramos o campo oculto, mas tamb√©m chamamos o m√©todo <strong>OnPropertyChanged</strong> definido no modelo de vista base e aumentamos o evento <strong>PropertyChanged</strong> declarado na interface <strong>INotifyPropertyChanged</strong> , tamb√©m implementada na base ver modelos.  Acontece que, toda vez que o texto √© alterado, ocorre o evento <strong>PropertyChanged</strong> , para o qual o nome da propriedade do modelo de exibi√ß√£o que foi alterado √© passado. </p><br><p>  Bem, quase tudo, a linha de chegada!  Resta especificar a exibi√ß√£o que deve ouvir o evento <strong>PropertyChanged</strong> : </p><br><pre> <code class="hljs pgsql">&lt;TextBox <span class="hljs-type"><span class="hljs-type">Text</span></span>="{Binding Path=SynchronizedText, UpdateSourceTrigger=PropertyChanged, Mode=OneWayToSource}"/&gt; &lt;TextBlock <span class="hljs-type"><span class="hljs-type">Text</span></span>="{Binding Path=SynchronizedText, UpdateSourceTrigger=PropertyChanged, Mode=OneWay}"/&gt;</code> </pre> <br><p>  Al√©m do fato de indicarmos por qual acionador a atualiza√ß√£o deve ocorrer, tamb√©m indicamos em que dire√ß√£o essa atualiza√ß√£o est√° sendo rastreada: de vista para ver modelo ou vice-versa.  Como <strong>inserimos</strong> texto na caixa de texto, estamos interessados ‚Äã‚Äãapenas nas altera√ß√µes na exibi√ß√£o; portanto, selecionamos o modo <strong>OneWayToSource</strong> .  No caso do bloco de texto, tudo √© exatamente o oposto: estamos interessados ‚Äã‚Äãem altera√ß√µes no modelo de exibi√ß√£o para exibi-las na exibi√ß√£o, portanto, selecionamos o modo <strong>OneWay</strong> .  Se quis√©ssemos rastrear as altera√ß√µes nas duas dire√ß√µes, n√£o poder√≠amos especificar o <strong>Modo</strong> , nem especificar o <strong>TwoWay</strong> explicitamente. </p><br><p>  Ent√£o, execute o programa, digite o texto e voi-la!  O texto muda de forma s√≠ncrona e n√£o copiamos nada em lugar nenhum! </p><br><p><img src="https://habrastorage.org/webt/pu/69/jw/pu69jwasrfi2bs43obsaj026rlw.png" alt="imagem"></p><br><p>  Obrigado por sua aten√ß√£o, para continuar.  Lidaremos com o DataTemplate e o padr√£o de comando. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt427325/">https://habr.com/ru/post/pt427325/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt427315/index.html">Sala de leitura Izba ou uma sele√ß√£o de literatura profissional</a></li>
<li><a href="../pt427317/index.html">Para ter sucesso no campo da TI ou o que mata a TI'shnikov?</a></li>
<li><a href="../pt427319/index.html">Programador de recrutamento de cavalheiros UE4, parte 1</a></li>
<li><a href="../pt427321/index.html">Fone de ouvido Neuro para todos os dias - como √© feito, por que √© necess√°rio e o que nos transformar√° em</a></li>
<li><a href="../pt427323/index.html">Infraestrutura para microsservi√ßos. K8s e tudo-tudo-tudo</a></li>
<li><a href="../pt427327/index.html">Arquitetura MVVM em aplicativos m√≥veis Flutter</a></li>
<li><a href="../pt427329/index.html">IBM supera marco de 7 nan√¥metros usando grafeno para colocar nanomateriais em substratos</a></li>
<li><a href="../pt427331/index.html">Revis√£o da vers√£o internacional do smartphone Xiaomi Mi Max 3 - meu tamanho</a></li>
<li><a href="../pt427333/index.html">Converter temperatura de cor (K) em RGB: algoritmo e exemplo de c√≥digo</a></li>
<li><a href="../pt427335/index.html">Leia dados de um disco r√≠gido MiniScribe antigo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>