<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ½â€ğŸŒ¾ ğŸ”’ ğŸ“œ Bless Nouveau, atau tentang siksaanku dengan Nvidia Optimus. Bagian 1. Keindahan dokumentasi Arch ğŸ‘¨ğŸ½â€ğŸ¤â€ğŸ‘¨ğŸ¼ ğŸ™ŒğŸ½ ğŸ¤”</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sebelum saya mulai 
 Sebelum memulai cerita utama, saya ingin mengklarifikasi beberapa poin. Artikel ini ditujukan terutama untuk pemilik laptop denga...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bless Nouveau, atau tentang siksaanku dengan Nvidia Optimus. Bagian 1. Keindahan dokumentasi Arch</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414061/"><h2>  Sebelum saya mulai </h2><br>  Sebelum memulai cerita utama, saya ingin mengklarifikasi beberapa poin.  Artikel ini ditujukan terutama untuk pemilik laptop dengan teknologi Nvidia Optimus yang ingin menginstal GNU / Linux (selanjutnya disebut Linux).  Materi ini bertujuan untuk memastikan bahwa Asia Tengah yang disebutkan di atas membiasakan diri dengan kemungkinan solusi untuk masalah ini dan untuk memfasilitasi dan mempercepat penyelesaiannya.  Selain itu, artikel ini tidak sedikit <b>memotivasi</b> , dan ditujukan untuk memahami satu kebenaran sederhana oleh orang-orang: di Linux, seperti dalam kehidupan, selalu ada solusi, dan jika Anda menyerah, itu tidak <i>(dalam banyak kasus) tidak</i> akan lebih baik. <br><blockquote>  <b><i>Qui quaerit, reperit</i></b> </blockquote>  <i>- Pepatah Latin</i> <br><br><h3>  Kata Pengantar </h3><br>  Untuk saat ini saya adalah Linuxoid biasa.  Saya menguji distribusi yang berbeda, perlahan-lahan mempelajari hal-hal baru.  Hanya karena saya tertarik.  Sebagai aturan, "pengetahuan" terbatas pada Ubuntu dan garpu, serta Fedora dan beberapa distribusi "ramah pengguna".  Tetapi, seperti kata pepatah Latin lainnya, omnia fluunt, omnia mutantur, yaitu, semuanya mengalir, semuanya berubah, dan jelas bahwa ini tidak dapat berlanjut selamanya. <br><br><h3>  Semuanya dimulai dengan baik </h3><br>  Perlu dicatat bahwa saya tidak memiliki banyak ruang untuk percobaan: PC yang <i>relatif</i> lemah yang hampir tidak menarik GNOME 3, dan Internet yang lambat, yang sangat rumit dalam situasi keseluruhan.  Tetapi lebih dari itu untuk bocah 12 tahun dan itu tidak perlu.  Pada akhirnya, saya lelah bereksperimen, saya menginstal Windows 10 dan melupakan Linux selama beberapa tahun. <br><br>  Waktu berlalu, dan setelah sekitar 2 tahun saya menyadari bahwa sudah waktunya untuk memperbarui <s>besi</s> PC <s>berlumut</s> saya, dan mulai menghemat uang.  Sesuatu datang dari menjual barang-barang mereka, mereka memberikan sesuatu, lebih dari setengah jumlah yang dilemparkan oleh orang tua, saya bahkan harus <s>berkorban</s> untuk menjual Xbox saya (!) <a name="habracut"></a>  untuk menghibur FAQ Anda untuk meningkatkan keterampilan Linux Anda.  Kali ini saya memutuskan untuk mencoba menginstal Arch.  Saya mendengar bahwa dia memiliki dokumentasi yang sangat bagus.  Dan dia mulai. <br><br><h3>  Keindahan dokumentasi Arch </h3><br>  Pemasangannya cepat dan <i>relatif</i> tidak menimbulkan rasa sakit.  Sekali lagi, terima kasih untuk dokumentasinya.  Setelah menginstal sistem dan DE yang diwakili oleh KDE Plasma, saya mencoba menghubungkan laptop ke monitor eksternal saya, karena monitor memiliki diagonal 24 'dan layar laptop hanya 15,6'.  Tidak ada yang terjadi, tidak ada sinyal di monitor.  Seperti biasa, saya mulai googling.  Dan setelah 30 menit mencari, saya menemukan bahwa masalahnya adalah dengan teknologi Nvidia Optimus. <br><br><h4>  Sedikit tentang Nvidia Optimus </h4><br>  Nvidia adalah perusahaan yang baik.  Selama 25 tahun sejarah mereka, mereka telah menerapkan banyak solusi yang <i>relatif</i> baik.  Nvidia Optimus adalah salah satunya.  Subjeknya adalah teknologi hibrida untuk memastikan operasi yang benar dari dua kartu grafis (biasanya grafis Nvidia yang kuat dan Intel terintegrasi) pada laptop.  Jika <s>berfungsi di Windows yang</s> dikonfigurasi dengan benar, ini membantu menghemat daya dan sumber daya laptop.  Semua ini luar biasa, tetapi yang mendorong saya untuk menulis karya ini adalah bahwa teknologi yang indah ini di Linux, menurut para pengembang, hanya berfungsi <i>sebagian</i> , dan menurut pendapat saya itu membutuhkan banyak, banyak keberanian, waktu dan usaha untuk mengkonfigurasinya. <br><br><h3>  Keindahan dokumentasi Arch (lanjutan) </h3><br>  Setelah saya mengetahui akar masalah sebenarnya, pada awalnya saya senang bahwa saya menentukan "di mana anjing dimakamkan" (hanya kartu Nvidia yang memiliki output HDMI), dan langkah pertama saya adalah membaca dokumentasi resmi Arch.  Esensinya adalah menggunakan Xorg.conf dan .xinitrc untuk memaksa X menggunakan hanya kartu Nvidia.  Setelah menyelesaikan langkah-langkah ini dan me-reboot ... layar hitam muncul.  Dokumentasi mengatakan bahwa dalam hal ini perlu untuk memeriksa apakah ada ampersand di .xinitrc, dan jika tidak ada, gunakan "konfigurasi Alternatif", yang memaksa X untuk hanya menggunakan kartu Intel.  Ini tidak cocok untuk saya, karena kartu Intel sudah digunakan secara default dan opsi ini tidak cocok untuk saya.  Ada juga opsi untuk berbagai DM.  Mereka juga tidak cocok, karena tidak ada dari mereka yang dapat memulai server X karena berbagai alasan. <br>  Untuk menggambarkan masing-masing secara terpisah akan menjadi latihan yang sangat panjang dan tidak berarti. <br><br><h3>  Qui quaerit, reperit </h3><br>  Ungkapan ini dalam terjemahan dari bahasa Latin berarti "siapa yang mencari, menemukan."  Tidak sia-sia saya meletakkannya di awal, karena bagi saya ungkapan ini akan menjadi moral yang ideal untuk artikel ini. <br><br>  Saya putus asa.  Selama dua hari saya mencoba dengan sia-sia untuk menemukan solusi, menjelajahi forum asing (hanya pada mereka, karena di Orthodox LOR, jawabannya adalah ini: Anda tidak dapat memulai X melalui Nvidia dengan cara apa pun. Tidak mungkin, berdamai).  Tapi tetap saja, pada pagi hari yang berawan dari pencarian hari ketiga, saya menemukan sebuah utas (tautan di ruang bawah tanah) di forum pengembangan Nvidia, di mana dijelaskan bagaimana Nvidia Optimus diimplementasikan di Arch pada laptop Dell.  Saya segera menyadari - saya diselamatkan!  Mengikuti langkah-langkahnya, saya memulai kembali dan ... layar hitam.  Tentu saja, saya kesal, tetapi kemudian saya ingat: Saya tidak mendaftar di baris .xinitrc untuk menjalankan DE.  Setelah menulis exec startkde, saya restart lagi dan berhasil.  X memulai melalui Nvidia.  Butuh waktu empat hari untuk menginstal dan mengkonfigurasi Arch, namun saya berhasil! <br><br><h3>  Tanya jawab </h3><br>  Sekarang mari kita parsing instruksi dari utas di atas.  Mari kita mulai: <br><br>  Pertama, Anda perlu mengaktifkan dukungan KMS (Kernel Mode Setting, metode pengaturan resolusi langsung di kernel) dengan menambahkan ke parameter kernel (file / etc / default / grub) di baris GRUB_CMDLINE_LINUX_DEFAULT = parameter <br><br><pre><code class="bash hljs">nvidia-drm.modeset=1</code> </pre> <br>  Kemudian kami membuat skrip untuk DM (login manager).  Pertimbangkan opsi dengan LightDM.  Kami membuat skrip /etc/lightdm/display_setup.sh dengan konten berikut: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh xrandr --setprovideroutputsource modesetting NVIDIA-0 xrandr --auto</span></span></code> </pre> <br>  Dengan skrip ini, kami menentukan penyedia dan mengatur resolusi layar semaksimal mungkin. <br><br>  Mari kita membuat skrip yang dibuat dapat dieksekusi: <br><br><pre> <code class="bash hljs">chmod +x /etc/lightdm/display_setup.sh</code> </pre> <br>  Biarkan LightDM menjalankan skrip di atas saat startup.  Pertama, edit /etc/lightdm/lightdm.conf: <br><br><pre> <code class="bash hljs">nano /etc/lightdm/lightdm.conf</code> </pre> <br>  Masukkan parameter <br><br><pre> <code class="bash hljs">display-setup-script=/etc/lightdm/display_setup.sh</code> </pre> <br>  Anda dapat melihat instruksi untuk SDDM di utas yang telah saya sebutkan, tautan di ruang bawah tanah. <br><br>  Sekarang kita perlu memperbarui mikrokode CPU (lebih lanjut tentang mikrokode dari tautan di ruang bawah tanah): <br><br><pre> <code class="bash hljs">sudo pacman -S intel-ucode</code> </pre> <br>  Setelah memperbarui mikrokode, instal banyak paket dari Nvidia: <br><br><pre> <code class="bash hljs">sudo pacman -S lib32-mesa-demos mesa-demos libva-vdpau-driver nvidia nvidia-libgl lib32-nvidia-utils nvidia-settings lib32-opencl-nvidia</code> </pre> <br><blockquote>  <b>Catatan:</b> Beberapa paket mungkin tidak tersedia.  Dalam hal ini, instal semuanya secara terpisah.  Lewati paket yang tidak akan tersedia. </blockquote>  Nyalakan daemon nvidia.persistenced, yang bertanggung jawab untuk ketekunan (baca lebih lanjut tentang hal itu di tautan bawah tanah) dari driver Nvidia: <br><br><pre> <code class="bash hljs">systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> nvidia-persistenced.service</code> </pre> <br>  Konfigurasikan GRUB secara otomatis: <br><br><pre> <code class="bash hljs">sudo grub-mkconfig -o /boot/grub/grub.cfg</code> </pre> <br>  Buat disk RAM yang dapat di-boot: <br><br><pre> <code class="bash hljs">mkinitcpio -p linux</code> </pre> <br>  Periksa .xinitrc: <br><br><pre> <code class="bash hljs">nano ~/.xinitrc</code> </pre> <br>  Jika tidak dimasukkan, masukkan <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> gnome-session</code> </pre> <br>  untuk GNOME dan <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> startkde</code> </pre> <br>  untuk KDE Plasma. <br><br>  Mulai ulang: <br><br><pre> <code class="bash hljs">reboot</code> </pre> <br>  Setelah mem-boot ulang laptop, masuk menggunakan akun Anda dan nikmati dunia Arch. <br><br><h3>  Tentang Bumblebee dan PRIME </h3><br>  Anda mungkin telah memperhatikan bahwa saya tidak mengatakan apa-apa tentang â€œkrukâ€ yang bertujuan untuk memastikan operasi Nvidia Optimus yang benar di Linux: Bumblebee dan PRIME. <br>  Selain itu, saya hanya mendapat kartu Nvidia dengan driver berpemilik, Nouveau tidak berfungsi (itu sebabnya artikel itu disebut "Bless Nouveau". <br>  Adapun pengalaman pribadi saya dengan mereka, dia kecil dan menyedihkan: kedua kruk point blank tidak melihat kartu grafis Nvidia saya.  Jika Anda tertarik pada mereka, di ruang bawah tanah Anda akan menemukan tautan ke materi tentang mereka. <br><br><h2>  Kata penutup </h2><br>  Jika Anda membaca seluruh artikel, maka Anda adalah pahlawan <i>(baik, atau moderator)</i> . <br><br>  Ketika menulis sebuah artikel, saya mencoba melemahkannya untuk Anda <i>dengan</i> lelucon yang <i>relatif</i> lucu untuk membenarkan tidak adanya gambar di dalamnya.  Semoga Anda mencapai zen setelah membaca. <br><br><h3>  Daftar sumber </h3><br>  Tentang mikrokode: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">en.wikipedia.org/wiki/</a> Microcode <br>  Tentang Bumblebee: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">wiki.archlinux.org/index.php/Bumblebee_</a> (Rusia) <br>  Tentang PRIME: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">wiki.archlinux.org/index.php/PRIME</a> <br>  Thread: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">devtalk.nvidia.com/default/topic/1027679/linux/optimus-support-for-arch-linux-for-dell-i7559-dual-graphics-intel-nvidia-gtx-960m-laptop-/2</a> <br>  Tentang Kegigihan: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">en.wikipedia.org/wiki/Persistency</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id414061/">https://habr.com/ru/post/id414061/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id414049/index.html">Permainan utama E3 2018: Fallout 76, Metro Exodus, Doom Eternal, dan lainnya</a></li>
<li><a href="../id414053/index.html">5 kesalahpahaman tentang GDPR</a></li>
<li><a href="../id414055/index.html">Trans-PRK: salah satu standar koreksi visi</a></li>
<li><a href="../id414057/index.html">Pendinginan Pusat Data: A Song of Ice and Fire</a></li>
<li><a href="../id414059/index.html">Persentase pernikahan di antara lampu LED. Pilihan 27.000 lampu terjual</a></li>
<li><a href="../id414063/index.html">Komandan pagi</a></li>
<li><a href="../id414065/index.html">Smartphone Cina terbaik "hingga 10 ribu rubel" dengan AliExpress vs Xiaomi Redmi 5</a></li>
<li><a href="../id414067/index.html">Luncurkan penargetan ulang seluler dengan Sesuaikan: pengaturan, laporan, dan tautan</a></li>
<li><a href="../id414069/index.html">Droning pembatasan selama Piala Dunia FIFA 2018 (FIFA 2018)</a></li>
<li><a href="../id414071/index.html">Dari pemantauan hingga manajemen insiden. Laporan dari DevOps Moscow Meetup</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>