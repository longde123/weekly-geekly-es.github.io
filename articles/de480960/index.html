<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃🏿 👂🏿 👩🏻‍🔬 Finden Sie verlorene Dateien in mehreren Xcode-Zielen 🙇🏽 ➕ 🍝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo, ich bin Sanya - iOS-Entwickler und in diesem Artikel werde ich Ihnen zeigen, wie Sie die Kopfschmerzen lösen können, die bei der Arbeit an eine...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Finden Sie verlorene Dateien in mehreren Xcode-Zielen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/surfstudio/blog/480960/"><p>  Hallo, ich bin Sanya - iOS-Entwickler und in diesem Artikel werde ich Ihnen zeigen, wie Sie die Kopfschmerzen lösen können, die bei der Arbeit an einem Projekt mit mehreren Zielen auftreten. </p><br><p><img src="https://habrastorage.org/webt/sr/xk/g-/srxkg-cucteqhcz6v0ay-thtgz8.jpeg"><a name="habracut"></a></p><br><p>  Ich sehe die Frage "Warum brauchen Sie mehrere Ziele in dem Projekt, Sanya?"  Ich antworte: An dem Projekt, an dem ich einmal gearbeitet habe, war ein Ziel mit dem Kundenkonto verknüpft. </p><br><ul><li>  Wir hatten keinen Zugriff auf dieses Konto. </li><li>  Es gab keine Möglichkeit, Bereitstellungsprofile und Vertriebszertifikate zu erstellen. </li><li>  Das Schlimmste war, dass es nicht möglich war, neue Geräte zu den Bereitstellungsprofilen hinzuzufügen. </li></ul><br><p>  Daher haben wir beim Kauf neuer Geräte im Studio auf eine ganze Reihe von Verhandlungen mit dem Kunden gewartet, um diese Ihrem Konto hinzuzufügen und die Möglichkeit zu erhalten, sie zu testen. </p><br><p>  Die Lösung lag auf der Hand: Es sollte ein zweites Ziel erstellt werden, das dem Hauptziel ähnelt, jedoch eine andere Bundle-ID aufweist und das vollständig mit unserem Studio-Account verknüpft ist.  Gesagt, getan!  Mit dem zweiten Ziel konnten wir unabhängig von den Entwicklern auf Kundenseite eine umfassende Entwicklung durchführen, wodurch der Entwicklungsprozess mehrmals gespart wurde, beispielsweise, als die Entwickler des Kunden alle unsere Geräte im Bereitstellungsprofil des Hauptziels entfernten und wir die Anwendung nicht auf ihren Geräten ausführen konnten. </p><br><p>  In Ihrem Projekt können bei Bedarf noch mehrere Ziele angezeigt werden, zum Beispiel: </p><br><ul><li>  Sammeln Sie mehrere Anwendungen aus einer Codebasis, jedoch mit unterschiedlichen Ressourcen. </li><li>  Behalten Sie mehrere Instanzen der Anwendung auf einem Gerät. </li></ul><br><p> Die Arbeit an mehreren Zielen führt jedoch zu den Nachteilen. Die Hauptsache ist, dass der Prozess des Hinzufügens neuer Dateien zum Projekt streng kontrolliert werden muss.  Beide sind identisch. Wenn Sie dem Projekt eine neue Datei hinzufügen, müssen Sie beide Ziele mit einem Häkchen versehen. </p><br><p><img src="https://habrastorage.org/webt/0m/bo/sr/0mbosrp2caohrqs9ijmhb5e5-ti.png"><cut></cut></p><br><p>  Dies ist sehr schwierig, wenn Sie in einem großen, mehrstufigen Team arbeiten, sowohl fachlich als auch nach Treu und Glauben. </p><br><p>  Wenn Sie dieser einfachen Regel nicht folgen, stellen Sie nach dem nächsten Zusammenführen möglicherweise fest, dass eines der Ziele nicht mehr erfasst wird, und Xcode schwört, dass es die eine oder andere Klasse nicht finden kann.  Das Interessanteste ist jedoch, dass Sie einen solchen Fehler nur zur Laufzeit feststellen können, wenn niemand eine Datei aus "Bundle-Ressourcen kopieren" zu beiden Zielen hinzugefügt hat (z. B. XIB-Zellen). </p><br><p>  Nach einem weiteren Problem mit dem Debug-Ziel haben wir beschlossen, die Konsistenz der Skriptziele zu steuern.  Wir haben die Ruby-Sprache als Werkzeug gewählt, da sie ein exzellentes <a href="https://www.rubydoc.info/gems/xcodeproj/Xcodeproj/Project/Object/PBXFrameworksBuildPhase">xcodeproj-</a> Juwel enthält, das fast der Standard für das Schreiben von Werkzeugen für die iOS-Entwicklung ist (siehe fastlane, generamba usw.). </p><br><p>  Als Ergebnis haben wir ein Skript entwickelt, das die folgende Arbeitslogik implementiert: </p><br><ul><li>  Der Pfad zur Projektdatei und die Namen der getesteten Ziele werden in die Eingabe eingegeben. </li><li>  Auf dem Weg zum Projekt findet das Skript das Projekt selbst; </li><li>  wählt die gewünschten Ziele aus und sammelt daraus Dateien (Compile Sources, Copy Bundle Resources und Frameworks); </li><li>  Suchen nach dem Unterschied zwischen Dateilisten; </li><li>  Wir werfen Dateien aus unserer Whitelist aus diesem Unterschied heraus.  Zum Beispiel Dateien mit Konstanten, die sich je nach Ziel unterscheiden (baseUrl, wenn Sie das Projekt so organisieren, dass Anwendungen von verschiedenen Zielen auf verschiedene Server zugreifen), oder GoogleService-Info.plist-Dateien, die für verschiedene Ziele unterschiedlich sind. </li></ul><br><p>  Wenn das Skript einen Unterschied findet, haben wir ein Problem.  Dies bedeutet, dass diese oder jene Datei / dieses Framework zu einem Ziel hinzugefügt wurde, aber nicht zu einem anderen. </p><br><p>  Somit können Sie mit dem Skript: </p><br><ul><li>  Stellen Sie sicher, dass alle Dateien aus Compile Sources und Copy Bundle Resources beiden Zielen korrekt hinzugefügt wurden. </li><li>  Die Identität der Listen der hinzugefügten Frameworks wird ebenfalls überprüft. Dies ist sehr wichtig, wenn Ihr Projekt über eine Architektur mit mehreren Modulen verfügt. </li><li>  Durch die Integration des Skripts in die Erstellungsphase können Sie das Problem bereits vor der Erstellungsphase des Projekts identifizieren. </li><li>  und wenn Sie zuvor beide Ziele für dieses CI gesammelt haben, können Sie die Assembly jetzt nur einem überlassen, wodurch sich die Assembly-Zeit für CI um die Hälfte verringert. </li></ul><br><p>  Im Fehlerfall können Sie in Xcode folgende Meldung beobachten: </p><br><p><img src="https://habrastorage.org/webt/lx/av/6r/lxav6rpneaqjxc4lgwuf05kaow4.png"></p><br><p>  Im Erfolgsfall finden Sie Einhörner: </p><br><p><img src="https://habrastorage.org/webt/s4/w3/ni/s4w3nip_qvgl0rnxhflxbe1sq7y.png"></p><br><p>  Detaillierte Anweisungen zum Hinzufügen zum Projekt, zu den Einstellungen sowie zum Beispielprojekt im <a href="https://github.com/surfstudio/TargetsCheck">Repository</a> . </p><br><p>  Das daraus resultierende Dienstprogramm zeigt perfekt, dass Sie selbst als iOS-Entwickler Ihrer täglichen Arbeit ein kleines Stück Kreativität hinzufügen und Automatisierung und Skripterstellung durchführen können, die Ihr Leben vereinfachen! </p><br><p>  Vielen Dank für Ihre Aufmerksamkeit! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de480960/">https://habr.com/ru/post/de480960/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de480948/index.html">Mitap Marketing und PR in Ivanovo</a></li>
<li><a href="../de480950/index.html">Analyse des Android-Quiz vom Stand hh.ru auf der Mobius 2019 in Moskau</a></li>
<li><a href="../de480954/index.html">Aufgabennummer 1. Finden Sie Geschlecht und Verwandtschaftsgrad heraus</a></li>
<li><a href="../de480956/index.html">Wie ich einen Weg gefunden habe, alle Citimobil-Fahrer zu verfolgen</a></li>
<li><a href="../de480958/index.html">Satellitenverbindung. Übersicht der Betreiberfirmen und ein bisschen über das Rating</a></li>
<li><a href="../de480962/index.html">Entwicklung des C-Compilers für den neuen Multiclet-Neuroprozessor</a></li>
<li><a href="../de480964/index.html">Was ist die Fresnel-Zone und CCQ (Client Connection Quality) oder die grundlegenden Faktoren für eine hochwertige drahtlose Brücke</a></li>
<li><a href="../de480970/index.html">10 Best Practices zum Sichern von Docker-Images. Teil 1</a></li>
<li><a href="../de480974/index.html">Anwendungsentwicklung in VK Mini Apps</a></li>
<li><a href="../de480976/index.html">JSON-RPC-API-Testbibliothek</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>