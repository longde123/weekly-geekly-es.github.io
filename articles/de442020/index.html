<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚óΩÔ∏è üë®‚Äçüëß üîè Neuer AV1-Codec: Beschleunigt das Laden von Videos in einem Browser üíß üò© üé≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Handbuch erfahren Sie, wie Sie Videos im Web verwenden, wie es 2019 √ºblich ist. Chrome und Firefox unterst√ºtzen den neuen AV1-Codec - f√ºr si...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Neuer AV1-Codec: Beschleunigt das Laden von Videos in einem Browser</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442020/"> In diesem Handbuch erfahren Sie, wie Sie Videos im Web verwenden, wie es 2019 √ºblich ist. Chrome und Firefox unterst√ºtzen den neuen AV1-Codec - f√ºr sie k√∂nnen Videos halb so viel erstellt werden. <br><br>  Wir werden separat dar√ºber sprechen, wie GIFs in AV1 und H.264 durch Videos ersetzt werden. Dann wird die Gr√∂√üe um das 20- bis 40-fache verringert. <br><br><img src="https://habrastorage.org/webt/e6/ma/qx/e6maqxoeu5hqqh3ilpk5vh6ozvk.jpeg" alt="AV1 im Browser"><br><br>  YouTube verwendet es bereits auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">TestTube</a> .  Netflix sagte, der AV1 werde " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">der Codec der n√§chsten Generation</a> " sein. <br><br>  Wir in den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Evil Martians</a> verwenden es bereits auf unserer Website und auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Amplifer</a> .  In diesem Artikel werde ich die Erfahrungen mit der Implementierung von AV1 teilen und Ihnen Schritt f√ºr Schritt erkl√§ren, wie Sie ein Video einbetten, damit es in allen Browsern funktioniert. <br><a name="habracut"></a><br><h2>  Codecs und Container </h2><br>  Mit Bildern ist alles einfach: entweder JPEG mit PNG f√ºr alle Browser oder kompaktere Dateien in WebP f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">moderne Browser</a> .  Wir k√∂nnen immer sicher sein, dass die PNG-Dateien ein PNG-Format haben (mit der seltenen Ausnahme von PNG-Bomben, vor denen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Imgproxy</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">sch√ºtzen kann</a> ). <br><br>  Videodateien sind komplizierter.  Die Dateierweiterung ( <code>.mp4</code> , <code>.wmv</code> , <code>.webm</code> oder <code>.mov</code> ) spricht nur √ºber den Container.  W√§hrend Videodateien aus drei verschiedenen Komponenten bestehen: <br><br><ol><li>  <b>Der Video-Codec</b> bestimmt, wie viel Sie das Video komprimieren k√∂nnen und was Sie opfern m√ºssen.  Die wichtigsten Video-Codecs des Web: H.264, HEVC, VP9 und jetzt AV1. </li><li>  <b>Der Audio-Codec</b> komprimiert den Sound.  Nat√ºrlich wird es nicht ben√∂tigt, wenn das Video keinen Ton enth√§lt.  Beliebte Optionen sind MP3, Opus und AAC. </li><li>  <b>Der Container</b> speichert sowohl Video (komprimiert durch eine Art Video-Codec) als auch Audio-Stream (komprimiert durch eine Art Audio-Codec).  Sowie zus√§tzliche Daten wie Untertitel und Metainformationen.  Beliebte Container: MP4, MOV, WebM. </li></ol><br>  Wenn wir die Dateierweiterung <code>.mp4</code> , k√∂nnen wir nur sagen, dass der MP4-Container verwendet wurde.  Aber die Codecs darin k√∂nnen unterschiedlich sein - der Autor k√∂nnte H.264 und AAC, AV1 und Opus oder etwas anderes nehmen. <br><br><h2>  Siehe AV1 </h2><br>  AV1 ist ein Video-Codec, der vor einem Jahr im M√§rz 2018 ver√∂ffentlicht wurde. Er wurde entwickelt, um die Codecs der vorherigen Generation - HEVC, VP9, ‚Äã‚ÄãH.264 und VP8 - zu √ºbertreffen. <br><br><img src="https://habrastorage.org/webt/l1/pr/n6/l1prn6kicyr6f7smayebyp7m85m.jpeg" alt="Generierungsdiagramm von Video-Codecs"><br>  <i>Generierungscodec-Diagramm von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Tsahi Levent-Levy</a></i> <br><br><blockquote>  Wenn Sie sich daf√ºr interessieren, wie genau AV1 es geschafft hat, den Rest der Codecs bei der Komprimierung zu √ºbertreffen, lesen Sie die technischen Details in den √úbersetzungen auf Habr√©: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Video der n√§chsten Generation: Einf√ºhrung in AV1</a> <br>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AV1 Next Generation Codec: CDEF-Richtungsfilter</a> " <br></blockquote><br>  Aufgrund neuer Optimierungen komprimiert AV1 Video 30-50% besser als H.264 oder VP8 und bis zu 30% besser als HEVC.  Aber der Codec wurde k√ºrzlich ver√∂ffentlicht und hat bisher mehrere Kinderkrankheiten: <br><br><ul><li>  Der Stromgeber ist nicht optimiert.  AV1 komprimiert das Video <i>sehr</i> langsam (ein neuer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">schneller Encoder f√ºr Rust befindet sich</a> bereits in der Entwicklung).  Der Codec ist nicht zum Streamen geeignet.  Wenn es sich um statische Videos auf Landungen handelt, ist dieses Problem f√ºr uns nicht relevant. </li><li>  Bisher wird der Codec nur auf Desktop-Chrome und Firefox unter Windows unterst√ºtzt.  Es gibt noch keine Unterst√ºtzung f√ºr Safari und Edge (obwohl Microsoft dies <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">bereits testet</a> ).  Sie ben√∂tigen mindestens 2 Dateien: AV1 f√ºr Chrome und Firefox und H.264 f√ºr andere Browser. </li></ul><br>  Das Coolste an AV1 ist, dass die " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Jackalisierungs</a> " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">-Quadrate</a> nicht bei niedrigen Bitraten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">angezeigt werden</a> . <br><br><img src="https://habrastorage.org/webt/kd/fi/gm/kdfigmacjbsduq4reyw7fsjvygo.png" alt="Vergleich der Bildqualit√§t f√ºr verschiedene Codecs bei verschiedenen Bitraten"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Vergleich der</a> Bildqualit√§t f√ºr verschiedene Codecs mit unterschiedlichen Bitraten - AV1 gewinnt</i> <br><br><h2>  AV1 richtig kochen </h2><br>  Kommen wir endlich zum √úben.  Lassen Sie uns zun√§chst den Container festlegen.  Theoretisch kann AV1 in verschiedenen Beh√§ltern platziert werden, MP4 ist jedoch kompakter und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">wird</a> in der Spezifikation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">empfohlen</a> .  F√ºr den Sound in AV1 nehmen wir Opus, weil es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">den Sound perfekt komprimiert</a> . <br><br>  Damit das Video in allen Browsern funktioniert, werden 3 Dateien generiert: <br><br><ol><li>  F√ºr Desktop-Chrome und Firefox unter Windows ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">31% des Marktes</a> ab M√§rz 2019): MP4-Container mit AV1 f√ºr Video und Opus f√ºr Sound. </li><li>  F√ºr Safari und Edge ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">16% des Marktes</a> ) - MP4 mit HEVC und AAC. </li><li>  Im √úbrigen: eine gro√üe MP4-Datei mit H.264 und AAC. </li></ol><br>  Sie k√∂nnen nur AV1 und H.264 verwenden - das Video funktioniert auch f√ºr alle. <br><br>  F√ºr die Komprimierung empfehle ich die Konsole <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">FFmpeg</a> .  Es gibt viele grafische Dienstprogramme, aber es ist einfacher, Optionen in der Konsole zu speichern und die Konvertierung dann automatisch zu starten.  Stellen Sie sicher, dass Sie die neueste Version von FFmpeg verwenden.  Versionen vor <b>4.1</b> unterst√ºtzen AV1 in MP4 nicht. <br><br>  F√ºr Mac OS X: <br><br><ol><li>  Installieren Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Homebrew</a> . </li><li> <code>brew install ffmpeg</code> </li> </ol><br>  F√ºr Linux ist es besser, einen neuen Build von der offiziellen Website zu nehmen - w√§hrend es in vielen Distributionen keine Version gibt, die AV1 in MP4 unterst√ºtzt: <br><br><ol><li> <code>wget https://johnvansickle.com/ffmpeg/releases/ffmpeg-release-amd64-static.tar.xz</code> </li> <li> <code>tar -xf ffmpeg-release-amd64-static.tar.xz</code> </li> <li> <code>sudo cp ffmpeg-4.1-64bit-static/ff* /usr/local/bin/</code> </li> </ol><br>  F√ºr Windows k√∂nnen Sie FFmpeg <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">von William Diaz</a> installieren. <br><br>  Wir wenden uns der Konvertierung der H.264-Datei zu, die wir f√ºr √§ltere Browser ben√∂tigen.  Da alle unsere Dateien den MP4-Container verwenden, verwende ich die Postfixes <code>.av1.mp4</code> , <code>.hevc.mp4</code> und <code>.h264.mp4</code> .  Lassen Sie sich vom langen Team nicht beunruhigen, wir werden dann alles analysieren: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  SOURCE.mov     - ffmpeg -i SOURCE.mov -map_metadata -1 -c:a libfdk_aac -c:v libx264 -crf 24 -preset veryslow -profile:v main -pix_fmt yuv420p -movflags +faststart -vf "scale=trunc(iw/2)*2:trunc(ih/2)*2" video.h264.mp4</span></span></code> </pre><br>  √ñffnen <code>video.h264.mp4</code> jetzt <code>video.h264.mp4</code> .  Wenn die Qualit√§t gut und die Gr√∂√üe gro√ü ist, erh√∂hen Sie <code>-crf</code> ( <code>-crf 26</code> dann <code>-crf 28</code> ).  Diese Option reduziert die Dateigr√∂√üe auf Kosten einer reduzierten Qualit√§t.  Das Gleichgewicht zwischen Qualit√§t und Gr√∂√üe ist eine Kunst. <br><br><blockquote>  Wenn keine Originalvideodatei vorhanden ist, k√∂nnen Sie die alte H.264-Datei in AV1 konvertieren. </blockquote><br>  Jetzt ist es Zeit, AV1 zu konvertieren - ich erinnere Sie, es wird l√§nger als H.264 sein.  Der Codec nutzt noch nicht die volle Leistung des Prozessors (es ist sinnvoll, mehrere Dateien parallel zu konvertieren). <br><br><pre> <code class="bash hljs">ffmpeg -i SOURCE.mov -map_metadata -1 -c:a libopus -c:v libaom-av1 -crf 34 -b:v 0 -pix_fmt yuv420p -movflags +faststart -vf <span class="hljs-string"><span class="hljs-string">"scale=trunc(iw/2)*2:trunc(ih/2)*2"</span></span> -strict experimental video.av1.mp4</code> </pre><br>  <code>-crf</code> erneut mit <code>-crf</code> , <code>-crf</code> perfekte Gleichgewicht zwischen Qualit√§t und Gr√∂√üe zu finden. <br><br>  Jetzt das gleiche f√ºr HEVC. <br><br><pre> <code class="bash hljs">ffmpeg -i SOURCE.mov -map_metadata -1 -c:a libfdk_aac -c:v libx265 -crf 24 -preset veryslow -pix_fmt yuv420p -movflags +faststart -vf <span class="hljs-string"><span class="hljs-string">"scale=trunc(iw/2)*2:trunc(ih/2)*2"</span></span> video.hevc.mp4</code> </pre><br>  Kopieren Sie <code>video.h264.mp4</code> , <code>video.hevc.mp4</code> und <code>video.av1.mp4</code> in das Stammverzeichnis Ihrer Site. <br><br><h3>  Grundlegendes zu FFmpeg-Optionen </h3><br>  Sehen die obigen Befehle wie ein D√§monenbeschw√∂rungszauber aus?  Keine Sorge, dies ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">kein PostCSS</a> .  Schauen wir uns die Optionen an. <br><br>  <code>-i SOURCE.mov</code> gibt die Eingabedatei an, aus der FFmpeg die Video- und Audiostreams <code>-i SOURCE.mov</code> , komprimiert und in einen neuen Container packt. <br><br>  <code>-map_metadata -1</code> entfernt die Metainformationen aus dem Video (z. B. das Programm, in dem das Video erstellt wurde).  Solche Informationen sind im Web selten n√ºtzlich. <br><br>  <code>-c:a libopus</code> oder <code>-c:a libfdk_aac</code> setzt die Audio-Codecs.  Wenn Sie keinen Ton ben√∂tigen, ersetzen Sie diese durch <code>-an</code> . <br><br>  <code>-c:v libaom-av1</code> w√§hlt den Videocodec aus - eine Bibliothek, die die Frames des Videostreams komprimiert. <br><br>  <code>-crf 34</code> - Konstanter <code>-crf 34</code> , ein Gleichgewicht zwischen Qualit√§t und Gr√∂√üe.  Es ist wie ein Schieberegler in JPEG-Qualit√§t, nur geht es in eine andere Richtung (0 ist die beste Qualit√§t und die gr√∂√üte Datei).  Die CRF-Skala ist f√ºr H.264 und AV1 unterschiedlich - f√ºr H.264 bis 51, f√ºr AV1 bis 61. Die CRF f√ºr AV1 und H.264 ist unterschiedlich. <br><br><blockquote>  Facebook fand eine ungef√§hre √úbereinstimmung zwischen den CRF-Werten f√ºr H.264 und AV1: <br>  19 ‚Üí 27, 23 ‚Üí 33, 27 ‚Üí 39, 31 ‚Üí 45, 35 ‚Üí 51, 39 ‚Üí 57. <br></blockquote><br>  <code>-preset veryslow</code> zwingt <code>-preset veryslow</code> und HEVC-Codecs, die Datei auf Kosten einer starken <code>-preset veryslow</code> noch st√§rker zu komprimieren. <br><br>  <code>-profile:v main</code> von H.264 verwendet, um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">ein Codec-Profil</a> auszuw√§hlen.  In Safari funktioniert nur "Main". <br><br>  <code>-b:v 0</code> legt die minimale Bitrate f√ºr AV1 fest, damit das Video eine gleichbleibende Qualit√§t aufweist. <br><br>  <code>-pix_fmt yuv420p</code> (Pixelformat) ist eine schwierige <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Methode,</a> um die Dateigr√∂√üe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">zu</a> reduzieren.  Die urspr√ºngliche Aufl√∂sung f√ºr die Helligkeit bleibt erhalten, die Aufl√∂sung f√ºr die Farbe wird jedoch verringert.  Unsere Augen sehen eine schlechtere Farbe, deshalb bemerken sie diesen Trick nicht.  Entfernen Sie diese Option, wenn sie in Ihrem Fall st√∂rt. <br><br>  <code>-movflags +faststart</code> verschiebt alles Wichtige an den Anfang der Datei, damit der Browser das Video abspielen kann, bis der Download abgeschlossen ist. <br><br>  <code>-vf "scale=trunc(iw/2)*2:trunc(ih/2)*2"</code> √§ndert die Gr√∂√üe der Seiten des Videos auf die n√§chsten geraden (einige Codecs k√∂nnen mit einer Aufl√∂sung von 300 √ó 200 und 302 √ó 200 arbeiten, funktionieren jedoch nicht mit 301 √ó 200).  Wenn Sie sicher sind, dass die Aufl√∂sung √ºberall durch 2 geteilt wird, k√∂nnen Sie diese Option entfernen. <br><br>  <code>-strict experimental</code> F√ºr AV1 ist ein <code>-strict experimental</code> erforderlich, sein Encoder ist noch experimentell. <br><br>  <code>video.av1.mp4</code> legt den Namen der resultierenden Datei fest. <br><br><h3>  Wir starten Videos in Browsern </h3><br>  Jetzt brauchen wir jeden Browser, um das unterst√ºtzte Video herunterzuladen.  Daf√ºr hat &lt;Quelle&gt; ein Typattribut.  Und ich rate Ihnen, sich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">unter &lt;video&gt;</a> √ºber die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Optionen zu informieren</a> . <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">controls</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"600"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"400"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video.hevc.mp4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video/mp4; codecs=hevc,mp4a.40.2"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video.av1.mp4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video/mp4; codecs=av01.0.05M.08,opus"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video.h264.mp4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video/mp4; codecs=avc1.4D401E,mp4a.40.2"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  &lt;Quelle&gt; sind wie <code>if‚Ä¶else</code> Ausdr√ºcke - der Browser liest sie von oben nach unten, bis er den findet, dessen <code>type</code> er unterst√ºtzt. <br><br>  Im <code>type</code> Sie das gesamte Dateiformat angeben: Container ( <code>video/mp4</code> MP4 f√ºr MP4), Videocodec ( <code>av01.0.05M.08</code> f√ºr AV1, <code>hevc</code> f√ºr HEVC und <code>avc1.4D401E</code> f√ºr H.264) und Audiocodec ( <code>opus</code> f√ºr Opus) und <code>mp4a.40.2</code> f√ºr AAC). <br><br><h2>  Bonus: So konvertieren Sie GIF in AV1 und H.264 </h2><br>  Im Jahr 2019 ist die Verwendung von GIFs f√ºr kurze Videos eine gro√üe S√ºnde.  GIF wiegt 20-40 mal mehr als H.264 oder AV1.  GIF trifft die CPU st√§rker und l√§sst den Akku schneller auslaufen.  Wenn Sie ein Video mit kurzer Schleife ben√∂tigen, nehmen Sie Video-Codecs.  Und FFmpeg kann Videos direkt aus GIF konvertieren. <br><br>  GIF in H.264 konvertieren: <br><br><pre> <code class="bash hljs">ffmpeg -i IMAGE.gif -map_metadata -1 -an -c:v libx264 -crf 24 -preset veryslow -profile:v main -pix_fmt yuv420p -movflags +faststart -vf <span class="hljs-string"><span class="hljs-string">"scale=trunc(iw/2)*2:trunc(ih/2)*2"</span></span> video.h264.mp4</code> </pre><br>  Generieren Sie einen noch kleineren AV1: <br><br><pre> <code class="bash hljs">ffmpeg -i IMAGE.gif -map_metadata -1 -an opus -c:v libaom-av1 -crf 50 -b:v 0 -pix_fmt yuv420p -movflags +faststart -vf <span class="hljs-string"><span class="hljs-string">"scale=trunc(iw/2)*2:trunc(ih/2)*2"</span></span> -strict experimental video.av1.mp4</code> </pre><br>  F√ºgen Sie nun <code>animation.h264.mp4</code> und <code>animation.av1.mp4</code> in den HTML-Code ein. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autoplay</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">loop</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">muted</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">playsinline</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"300"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"200"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"animation.av1.mp4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video/mp4; codecs=av01.0.05M.08"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"animation.h264.mp4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video/mp4"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Die Optionen f√ºr <code>autoplay</code> und <code>loop</code> machen das Video zu einem ‚ÄûGIF‚Äú - einem geloopten Video, das unmittelbar nach dem Laden der Seite abgespielt wird.  <code>playsinline</code> , dass Safari das Video im Vollbildmodus √∂ffnet, wenn Sie auf das Video klicken. <br><br><h2>  Abhebungszeit </h2><br>  AV1 ist noch experimentell.  Aber es kann bereits verwendet werden, um ein Viertel Ihrer Benutzer gl√ºcklicher zu machen.  Ein Paar FFmpeg-Befehle generiert Videodateien.  &lt;video&gt; wurde von Anfang an erstellt, um Videos gem√§√ü den Browserfunktionen zu rendern.  Wir verwenden AV1 bereits in der Produktion und alles funktioniert einwandfrei (mit Ausnahme der Wartezeit, bis der AV1-Encoder seine Arbeit beendet hat). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de442020/">https://habr.com/ru/post/de442020/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de442010/index.html">Python und FPGA. Testen</a></li>
<li><a href="../de442012/index.html">Experiment: Wir sammeln ein Verzeichnis von Einheiten, die einen Pass ausgestellt haben</a></li>
<li><a href="../de442014/index.html">Dart 2.2 angek√ºndigt: Effizienterer Maschinencode, Unterst√ºtzung f√ºr Set-Literale</a></li>
<li><a href="../de442016/index.html">Hacker sind schlimmer als Malen oder wie man Webanwendungen sch√ºtzt</a></li>
<li><a href="../de442018/index.html">Fr√ºhlingsgesetz in Bezug auf die Verfassung. Warum kann</a></li>
<li><a href="../de442022/index.html">Design auf CodeFest. Das ist aber nicht sicher</a></li>
<li><a href="../de442024/index.html">In Russland wird eine nationale Strategie f√ºr k√ºnstliche Intelligenz entwickelt</a></li>
<li><a href="../de442026/index.html">Trojan.Multi.BroSubsc.gen - Kaspersky funktioniert</a></li>
<li><a href="../de442028/index.html">Karriere Steroide. Samurai-Weg</a></li>
<li><a href="../de442032/index.html">Wiedereinf√ºhrung von Bison (kleiner Sieg der Zoologen)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>