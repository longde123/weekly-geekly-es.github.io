<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìø üë©‚Äçüè´ üìú Introducci√≥n a CatBoost. Informe Yandex üë©‚ÄçüöÄ üëéüèª ‚ÜñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mi nombre es Stas Kirillov, soy un desarrollador l√≠der en el grupo de plataformas ML en Yandex. Estamos desarrollando herramientas de aprendizaje auto...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introducci√≥n a CatBoost. Informe Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/458790/">  Mi nombre es Stas Kirillov, soy un desarrollador l√≠der en el grupo de plataformas ML en Yandex.  Estamos desarrollando herramientas de aprendizaje autom√°tico, apoyando y desarrollando infraestructura para ellos.  A continuaci√≥n se muestra mi reciente charla sobre c√≥mo funciona la biblioteca CatBoost.  En el informe, habl√© sobre los puntos de entrada y las caracter√≠sticas del c√≥digo para aquellos que quieran entenderlo o convertirse en nuestro colaborador. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ySla2kczbeM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  - CatBoost vive en GitHub bajo la licencia Apache 2.0, es decir, es abierto y gratuito para todos.  El proyecto se est√° desarrollando activamente, ahora nuestro repositorio tiene m√°s de cuatro mil estrellas.  CatBoost est√° escrito en C ++, es una biblioteca para aumentar el gradiente en los √°rboles de decisi√≥n.  Admite varios tipos de √°rboles, incluidos los llamados √°rboles "sim√©tricos", que se utilizan en la biblioteca de forma predeterminada. <br><br><a name="habracut"></a>  ¬øCu√°l es el beneficio de nuestros √°rboles ajenos?  Aprenden r√°pidamente, aplican r√°pidamente y ayudan a aprender a ser m√°s resistentes a los par√°metros cambiantes en t√©rminos de cambios en la calidad final del modelo, lo que reduce en gran medida la necesidad de seleccionar par√°metros.  Nuestra biblioteca se trata de facilitar su uso en la producci√≥n, aprender r√°pido y obtener buena calidad de inmediato. <br><br><img src="https://habrastorage.org/webt/wv/0s/8f/wv0s8fv32vjvrpihdkyek1uv-yu.jpeg"><br><br>  El aumento de gradiente es un algoritmo en el que construimos predictores simples que mejoran nuestra funci√≥n objetivo.  Es decir, en lugar de construir inmediatamente un modelo complejo, construimos muchos modelos peque√±os a su vez. <br><br><img src="https://habrastorage.org/webt/nn/jd/e0/nnjde08vq2zueuftpfs6nv1pemw.jpeg"><br><br>  ¬øC√≥mo es el proceso de aprendizaje en CatBoost?  Te dir√© c√≥mo funciona en t√©rminos de c√≥digo.  Primero, analizamos los par√°metros de entrenamiento que pasa el usuario, los validamos y luego vemos si necesitamos cargar los datos.  Debido a que los datos ya se pueden cargar, por ejemplo, en Python o R. A continuaci√≥n, cargamos los datos y construimos una cuadr√≠cula desde los bordes para cuantificar las caracter√≠sticas num√©ricas.  Esto es necesario para que el aprendizaje sea r√°pido. <br><br>  Las caracter√≠sticas categ√≥ricas las procesamos de manera un poco diferente.  Clasificamos las caracter√≠sticas desde el principio, y luego renumeramos los valores hash de cero al n√∫mero de valores √∫nicos de la caracter√≠stica categ√≥rica para poder leer r√°pidamente las combinaciones de caracter√≠sticas categ√≥ricas. <br><br>  Luego lanzamos el ciclo de capacitaci√≥n directamente, el ciclo principal de nuestro aprendizaje autom√°tico, donde construimos √°rboles de forma iterativa.  Despu√©s de este ciclo, el modelo se exporta. <br><br><img src="https://habrastorage.org/webt/ed/m6/lm/edm6lmnfi6ub-9ocgvxci6x7usm.jpeg"><br><br>  El ciclo de entrenamiento en s√≠ consta de cuatro puntos.  Primero, estamos tratando de construir un √°rbol.  Luego observamos qu√© tipo de aumento o disminuci√≥n de la calidad ofrece.  Luego verificamos si nuestro detector de reentrenamiento ha funcionado.  Luego, si es el momento adecuado, guardamos la instant√°nea. <br><br><img src="https://habrastorage.org/webt/wn/es/f2/wnesf2muxq15auqojtipuwjzrjk.jpeg"><br><br>  Aprender un solo √°rbol es un ciclo a trav√©s de los niveles de los √°rboles.  Al principio, seleccionamos al azar una permutaci√≥n de datos si usamos el refuerzo ordenado o tenemos caracter√≠sticas categ√≥ricas.  Luego contamos los contadores en esta permutaci√≥n.  Luego tratamos de elegir con avidez buenas divisiones en este √°rbol.  Por divisiones entendemos simplemente ciertas condiciones binarias: tal y tal caracter√≠stica num√©rica es mayor que tal o cual valor, o tal y tal contador por caracter√≠stica categ√≥rica es mayor que tal y tal valor. <br><br>  ¬øC√≥mo se organiza el ciclo de nivel del √°rbol codicioso?  Al principio, se realiza el bootstrap: volvemos a pesar o muestreamos los objetos, despu√©s de lo cual solo los objetos seleccionados se utilizar√°n para construir el √°rbol.  Bootstrap tambi√©n se puede contar antes de seleccionar cada divisi√≥n si la opci√≥n de muestreo en cada nivel est√° habilitada. <br><br>  Luego agregamos los derivados en histogramas, como lo hacemos para cada candidato dividido.  Usando histogramas, tratamos de evaluar el cambio en la funci√≥n objetivo que ocurrir√° si seleccionamos este candidato dividido. <br><br>  Seleccionamos al candidato con la mejor velocidad y lo agregamos al √°rbol.  Luego calculamos las estad√≠sticas usando este √°rbol seleccionado en las permutaciones restantes, actualizamos el valor en las hojas en estas permutaciones, calculamos los valores en las hojas para el modelo y procedemos a la siguiente iteraci√≥n del bucle. <br><br><img src="https://habrastorage.org/webt/7s/bd/dt/7sbddtjen2ktfvjvgccack2hrrm.jpeg"><br><br>  Es muy dif√≠cil seleccionar un lugar donde se lleva a cabo el entrenamiento, por lo que en esta diapositiva, puede usarlo como un punto de entrada, se enumeran los archivos principales que usamos para el entrenamiento.  Esto es greedy_tensor_search, en el que vivimos el mismo procedimiento para la selecci√≥n codiciosa de divisiones.  Este es train.cpp, donde tenemos la f√°brica principal de entrenamiento de CPU.  Esto es aproximadamente_calcer, donde se encuentran las funciones de actualizaci√≥n de los valores en las hojas.  Y tambi√©n score_calcer: una funci√≥n para evaluar a alg√∫n candidato. <br><br>  Partes igualmente importantes son catboost.pyx y core.py.  Este es el c√≥digo del contenedor de Python, lo m√°s probable es que muchos de ustedes incorporen alg√∫n tipo de cosas en el contenedor de Python.  Nuestro contenedor de Python est√° escrito en Cython, Cython se traduce en C ++, por lo que este c√≥digo debe ser r√°pido. <br><br>  Nuestro R-wrapper se encuentra en la carpeta R-package.  Quiz√°s alguien tendr√° que agregar o corregir algunas opciones, para las opciones tenemos una biblioteca separada: catboost / libs / options. <br><br>  Vinimos de Arcadia a GitHub, por lo que tenemos muchos artefactos interesantes que encontrar√°s. <br><br><img src="https://habrastorage.org/webt/wc/aw/as/wcawas_io1tv2tsyir8wv9y9ewu.jpeg"><br><br><img src="https://habrastorage.org/webt/yc/w6/or/ycw6or5ltsotncff_edmb_aq_4e.jpeg"><br><br>  Comencemos con la estructura del repositorio.  Tenemos una carpeta util donde las primitivas b√°sicas son: vectores, mapas, sistemas de archivos, trabajo con cadenas, secuencias. <br><br>  Tenemos una biblioteca donde se encuentran las bibliotecas compartidas utilizadas por Yandex, muchas, no solo CatBoost. <br><br>  La carpeta CatBoost y contrib es el c√≥digo de las bibliotecas de terceros a las que vinculamos. <br><br>  Ahora hablemos de las primitivas de C ++ que encontrar√°.  El primero son los punteros inteligentes.  En Yandex, hemos usado THolder desde std :: unique_ptr, y MakeHolder se usa en lugar de std :: make_unique. <br><br><img src="https://habrastorage.org/webt/vo/uy/dw/vouydw0bfucjevtxvyttk36rkim.jpeg"><br><br>  Tenemos nuestro propio SharedPtr.  Adem√°s, existe en dos formas, SimpleSharedPtr y AtomicSharedPtr, que difieren en el tipo de contador.  En un caso, es at√≥mico, lo que significa que, como si varias corrientes pudieran poseer un objeto.  Por lo tanto, ser√° seguro desde el punto de vista de la transferencia entre flujos. <br><br>  Una clase separada, IntrusivePtr, le permite poseer objetos heredados de la clase TRefCounted, es decir, clases que tienen un contador de referencia incorporado.  Esto es para asignar tales objetos a la vez, sin asignar adicionalmente un bloque de control con un contador. <br><br>  Tambi√©n tenemos nuestro propio sistema de entrada y salida.  IInputStream e IOutputStream son interfaces para entrada y salida.  Tienen m√©todos √∫tiles, como ReadTo, ReadLine, ReadAll, en general, todo lo que se puede esperar de InputStreams.  Y tenemos implementaciones de estos flujos para trabajar con la consola: Cin, Cout, Cerr y Endl por separado, que es similar a std :: endl, es decir, limpia el flujo. <br><br><img src="https://habrastorage.org/webt/n4/cs/wa/n4cswarvhmfpciuulxej55cbea8.jpeg"><br><br>  Tambi√©n tenemos nuestras propias implementaciones de interfaz para archivos: TInputFile, TOutputFile.  Esta es una lectura protegida.  Implementan la lectura y la escritura en un archivo, para que pueda usarlas. <br><br>  Util / system / fs.h tiene m√©todos NFs :: Exists y NFs :: Copy, si de repente necesitas copiar algo o comprobar que realmente existe alg√∫n archivo. <br><br><img src="https://habrastorage.org/webt/a0/vq/4z/a0vq4zt1s-biymm5n2y4bix80a0.jpeg"><br><br>  Tenemos nuestros propios contenedores.  Pasaron a usar std :: vector hace bastante tiempo, es decir, simplemente heredan de std :: vector, std :: set y std :: map, pero tambi√©n tenemos nuestro propio THashMap y THashSet, que en parte tienen interfaces compatibles con unordered_map y conjunto_desordenado  Pero para algunas tareas resultaron ser m√°s r√°pidas, por lo que a√∫n las usamos. <br><br><img src="https://habrastorage.org/webt/h-/he/go/h-hegomeoamviz05exj_rt03bzg.jpeg"><br><br>  Las referencias de matriz son an√°logas a std :: span de C ++.  Es cierto que apareci√≥ con nosotros no en el vig√©simo a√±o, sino mucho antes.  Lo usamos activamente para transferir referencias a matrices, como si estuvieran asignadas en buffers grandes, para no asignar buffers temporales cada vez.  Supongamos que, para contar derivados o algunas aproximaciones, podemos asignar memoria en alg√∫n b√∫fer grande preasignado y pasar solo TArrayRef a la funci√≥n de conteo.  Es muy conveniente y lo usamos mucho. <br><br><img src="https://habrastorage.org/webt/18/f0/km/18f0kmuuuuigc-j7zdck_yzn_qi.jpeg"><br><br>  Arcadia utiliza su propio conjunto de clases para trabajar con cadenas.  Esto es, en primer lugar, TStingBuf, un an√°logo de str :: string_view de C ++ 17. <br><br>  TString no es en absoluto std :: sting, es una cadena CopyOnWrite, por lo que debe trabajar con bastante cuidado.  Adem√°s, TUtf16String es el mismo TString, solo que su tipo base no es char, sino wchar de 16 bits. <br><br>  Y tenemos herramientas para convertir de cadena en cadena.  Este es ToString, que es un an√°logo de std :: to_string y FromString emparejado con TryFromString, que le permite convertir la cadena en el tipo que necesita. <br><br><img src="https://habrastorage.org/webt/2f/fo/jv/2ffojvcw39thuqmjwps2cl2kreu.jpeg"><br><br>  Tenemos nuestra propia estructura de excepci√≥n, la excepci√≥n b√°sica en las bibliotecas arcade es yexception, que hereda de std :: exception.  Tenemos una macro ythrow que agrega informaci√≥n sobre el lugar donde se produjo la excepci√≥n en yexception, es solo un contenedor conveniente. <br><br>  Hay un an√°logo de std :: current_exception - CurrentExceptionMessage, esta funci√≥n arroja la excepci√≥n actual como una cadena. <br><br>  Hay macros para afirmaciones y verificaciones: estas son Y_ASSERT e Y_VERIFY. <br><br><img src="https://habrastorage.org/webt/ac/ao/di/acaodinndi3xj9hr7kiju_vreew.jpeg"><br><br>  Y tenemos nuestra propia serializaci√≥n incorporada, es binaria y no tiene la intenci√≥n de transferir datos entre diferentes revisiones.  M√°s bien, esta serializaci√≥n es necesaria para transferir datos entre dos archivos binarios de la misma revisi√≥n, por ejemplo, en el aprendizaje distribuido. <br><br>  Dio la casualidad de que tenemos dos versiones de serializaci√≥n en CatBoost.  La primera opci√≥n funciona a trav√©s de los m√©todos de interfaz Guardar y Cargar, que se serializan en la secuencia.  Otra opci√≥n se utiliza en nuestra capacitaci√≥n distribuida, utiliza una biblioteca BinSaver interna bastante antigua, conveniente para serializar objetos polim√≥rficos que deben registrarse en una f√°brica especial.  Esto es necesario para la capacitaci√≥n distribuida, de la cual es poco probable que tengamos tiempo para hablar aqu√≠. <br><br><img src="https://habrastorage.org/webt/lb/oa/q9/lboaq9rvcuexqpoea75mbnbve8g.jpeg"><br><br>  Tambi√©n tenemos nuestro propio anal√≥gico boost_optional o std :: optional - TMaybe.  An√°logo de std :: variante - TVariant.  Necesitas usarlos. <br><br><img src="https://habrastorage.org/webt/fd/eg/xo/fdegxof00jzhggi1slypv6s_uvi.jpeg"><br><br>  Existe una cierta convenci√≥n de que dentro del c√≥digo CatBoost arrojamos una TCatBoostException en lugar de una yexception.  Esta es la misma excepci√≥n y, solo se agrega el seguimiento de la pila cuando se lanza. <br><br>  Y tambi√©n usamos la macro CB_ENSURE para verificar convenientemente algunas cosas y lanzar excepciones si no se ejecutan.  Por ejemplo, a menudo usamos esto para analizar opciones o analizar par√°metros pasados ‚Äã‚Äãpor el usuario. <br><br><img src="https://habrastorage.org/webt/qn/ut/jk/qnutjk-36n7wnibgpx_1xvhzsw4.jpeg"><br><h5>  <sup><sub>Enlaces de la diapositiva: <a href="">primero</a> , <a href="">segundo</a></sub></sup> </h5><br>  Antes de comenzar, le recomendamos que se familiarice con el estilo del c√≥digo, que consta de dos partes.  El primero es un estilo de c√≥digo arcade general, que se encuentra directamente en la ra√≠z del repositorio en el archivo CPP_STYLE_GUIDE.md.  Tambi√©n en la ra√≠z del repositorio hay una gu√≠a separada para nuestro equipo: catboost_command_style_guide_extension.md. <br><br>  Estamos tratando de formatear el c√≥digo Python usando PEP8.  No siempre funciona, porque para el c√≥digo Cython, la interfaz no funciona para nosotros, y a veces algo sucede con PEP8. <br><br><img src="https://habrastorage.org/webt/dp/cl/kg/dpclkg4wxn_ilcriilpquvfpihk.jpeg"><br><br>  ¬øCu√°les son las caracter√≠sticas de nuestro ensamblaje?  Originalmente, el ensamblaje de Arcadia ten√≠a como objetivo recopilar las aplicaciones m√°s herm√©ticas, es decir, que habr√≠a un m√≠nimo de dependencias externas debido a la vinculaci√≥n est√°tica.  Esto le permite usar el mismo binario en diferentes versiones de Linux sin volver a compilar, lo cual es bastante conveniente.  Los objetivos de ensamblaje se describen en los archivos ya.make.  Un ejemplo de ya.make se puede ver en la siguiente diapositiva. <br><br><img src="https://habrastorage.org/webt/ua/zz/eh/uazzehw8w6k-2lo2f49jyk_tv9e.jpeg"><br><br>  Si de repente desea agregar alg√∫n tipo de biblioteca, programa u otra cosa, puede, en primer lugar, simplemente mirar los archivos ya.make vecinos y, en segundo lugar, usar este ejemplo.  Aqu√≠ hemos enumerado los elementos m√°s importantes de ya.make.  Al principio del archivo, decimos que queremos declarar una biblioteca, luego enumeramos las unidades de compilaci√≥n que queremos poner en esta biblioteca.  Aqu√≠ puede haber archivos cpp y, por ejemplo, archivos pyx para los que Cython se iniciar√° autom√°ticamente, y luego el compilador.  Las dependencias de la biblioteca se enumeran a trav√©s de la macro PEERDIR.  Simplemente escribe las rutas a la carpeta con la biblioteca o con otro artefacto dentro, en relaci√≥n con la ra√≠z del repositorio. <br><br>  Hay una cosa √∫til, GENERATE_ENUM_SERIALIZATION, necesaria para generar m√©todos ToString, FromString para clases de enumeraci√≥n y enumeraciones descritas en alg√∫n archivo de encabezado que pase a esta macro. <br><br><img src="https://habrastorage.org/webt/gj/w3/rq/gjw3rq4uayzgspxh4sj95pcgime.jpeg"><br><br>  Ahora sobre lo m√°s importante: c√≥mo compilar y ejecutar alg√∫n tipo de prueba.  En la ra√≠z del repositorio se encuentra el script ya, que descarga los kits de herramientas y herramientas necesarias, y tiene el comando ya make, el subcomando make, que le permite construir una versi√≥n -r con un modificador -d y una versi√≥n de depuraci√≥n con el modificador -d.  Los artefactos en √©l se pasan y se separan por un espacio. <br><br>  Para construir Python, inmediatamente se√±al√© las banderas aqu√≠ que podr√≠an ser √∫tiles.  Estamos hablando de construir con el sistema Python, en este caso con Python 3. Si de repente tiene un CUDA Toolkit instalado en su computadora port√°til o m√°quina de desarrollo, entonces para un ensamblaje m√°s r√°pido, recomendamos especificar el indicador ‚Äìd have_cuda no.  CUDA se desarrolla durante bastante tiempo, especialmente en sistemas de 4 n√∫cleos. <br><br><img src="https://habrastorage.org/webt/eg/sn/4k/egsn4kcvq8bepyogckxf0p1vylw.jpeg"><br><br>  Ya ide ya deber√≠a funcionar.  Esta es una herramienta que generar√° una soluci√≥n clion o qt para usted.  Y para aquellos que vinieron con Windows, tenemos una soluci√≥n de Microsoft Visual Studio, que se encuentra en la carpeta msvs. <br><br>  Oyente: <br>  - ¬øTienes todas las pruebas a trav√©s del envoltorio de Python? <br><br>  Stas: <br>  - No, tenemos pruebas por separado que se encuentran en la carpeta pytest.  Estas son pruebas de nuestra interfaz CLI, es decir, nuestra aplicaci√≥n.  Es cierto que funcionan a trav√©s de pytest, es decir, estas son funciones de Python en las que realizamos una llamada de verificaci√≥n de subproceso y verificamos que el programa no se bloquee y funcione correctamente con algunos par√°metros. <br><br>  Oyente: <br>  - ¬øQu√© pasa con las pruebas unitarias en C ++? <br><br>  Stas: <br>  - Tambi√©n tenemos pruebas unitarias en C ++.  Por lo general, se encuentran en la carpeta lib en subcarpetas ut.  Y est√°n escritos as√≠: prueba unitaria o prueba unitaria para.  Hay ejemplos  Hay macros especiales para declarar una clase de prueba unitaria y registros separados para la funci√≥n de prueba unitaria. <br><br>  Oyente: <br>  - Para verificar que nada se ha roto, ¬øes mejor lanzar esos y esos? <br><br>  Stas: <br>  - si.  Lo √∫nico es que nuestras pruebas de c√≥digo abierto son verdes solo en Linux.  Por lo tanto, si compila, por ejemplo, en Mac, si fallan cinco pruebas, entonces no hay nada de qu√© preocuparse.  Debido a la diferente implementaci√≥n del expositor en diferentes plataformas o algunas otras diferencias menores, los resultados pueden ser muy diferentes. <br><br><img src="https://habrastorage.org/webt/kr/bs/n0/krbsn0v7mas3stqnhzg19l_uwrq.jpeg"><br><br>  Por ejemplo tomaremos una tarea.  Me gustar√≠a mostrar alg√∫n ejemplo.  Tenemos un archivo con tareas: open_problems.md.  Solucionemos el problema ‚Ññ4 de open_problems.md.  Se formula de la siguiente manera: si el usuario establece la tasa de aprendizaje en cero, entonces debemos caer de TCatBoostException.  Necesita agregar opciones de validaci√≥n. <br><br><img src="https://habrastorage.org/webt/ut/uu/hq/utuuhqx7huwgb0cuqoolyy253vm.jpeg"><br><br>  Primero, necesitamos crear una rama, clonar nuestra bifurcaci√≥n, clonar origen, origen pop, ejecutar el origen en nuestra bifurcaci√≥n y luego crear una rama y comenzar a trabajar en ella. <br><br>  ¬øC√≥mo funcionan las opciones de an√°lisis?  Como dije, tenemos una importante carpeta catboost / libs / options donde se almacena el an√°lisis de todas las opciones. <br><br><img src="https://habrastorage.org/webt/e-/n4/bi/e-n4bi3t-z6l5fedfrlaexyeiza.jpeg"><br><br>  Tenemos todas las opciones almacenadas en el contenedor TOption, lo que nos permite comprender si el usuario ha anulado la opci√≥n.  Si no fuera as√≠, conserva alg√∫n valor predeterminado en s√≠ mismo.  En general, CatBoost analiza todas las opciones en forma de un gran diccionario JSON, que durante el an√°lisis se convierte en diccionarios anidados y estructuras anidadas. <br><br><img src="https://habrastorage.org/webt/bm/zo/ch/bmzochyhm--wr1cwi9jg5snn3aq.jpeg"><br><br>  De alguna manera descubrimos, por ejemplo, al buscar con grep o leer el c√≥digo, que tenemos la tasa de aprendizaje en TBoostingOptions.  Intentemos escribir c√≥digo que simplemente agregue CB_ENSURE que nuestra tasa de aprendizaje es m√°s que std :: numeric_limits :: epsilon, que el usuario ha ingresado algo m√°s o menos razonable. <br><br><img src="https://habrastorage.org/webt/1m/u1/ay/1mu1ay3e5usvwwp51l1ctaxjtqy.jpeg"><br><br>  Aqu√≠ solo usamos la macro CB_ENSURE, escribimos un c√≥digo y ahora queremos agregar pruebas. <br><br><img src="https://habrastorage.org/webt/ut/sb/gq/utsbgqg6miybtxhekflu0w6frie.jpeg"><br><br>  En este caso, agregamos una prueba en la interfaz de l√≠nea de comandos.  En la carpeta pytest, tenemos el script test.py, donde ya hay bastantes ejemplos de prueba y puede elegir uno que se parezca a su tarea, copiarlo y cambiar los par√°metros para que comience a caer o no, dependiendo de los par√°metros que haya pasado.  En este caso, simplemente tomamos y creamos un grupo simple de dos l√≠neas.  (Llamamos a los grupos de conjuntos de datos en Yandex. Esta es nuestra peculiaridad). Y luego verificamos que nuestro binario realmente cae si pasamos la tasa de aprendizaje 0.0. <br><br><img src="https://habrastorage.org/webt/xb/uk/jn/xbukjnn55irccxybobjki-b8iyw.jpeg"><br><br>  Tambi√©n agregamos una prueba a python-package, que se encuentra en atBoost / python-package / ut / medium.  Tambi√©n tenemos pruebas grandes y grandes que est√°n relacionadas con pruebas para construir paquetes de ruedas de pit√≥n. <br><br><img src="https://habrastorage.org/webt/ki/jh/1p/kijh1pd1b8rdeyr2scg82dbjtis.jpeg"><br><br>  Adem√°s tenemos claves para hacer make - -t y -A.  -t ejecuta pruebas, -A obliga a todas las pruebas a ejecutarse independientemente de si tienen etiquetas grandes o medianas. <br><br>  Aqu√≠, por belleza, tambi√©n utilic√© un filtro llamado prueba.  Se configura con la opci√≥n -F y el nombre de la prueba especificado m√°s adelante, que pueden ser estrellas salvajes.  En este caso, utilic√© test.py::test_zero_learning_rate*, porque, mirando nuestras pruebas de paquete de Python, ver√°: casi todas las funciones toman un accesorio de tipo de tarea.  Esto es para que, de acuerdo con el c√≥digo, nuestras pruebas de paquete python tengan el mismo aspecto para el aprendizaje de CPU y GPU y se puedan usar para pruebas de GPU y entrenador de CPU. <br><br><img src="https://habrastorage.org/webt/hz/qj/yf/hzqjyf9cp0mlftldhq74zot4nya.jpeg"><br><br><img src="https://habrastorage.org/webt/d_/qx/g2/d_qxg2fyla89bki38tdx5o3gc68.jpeg"><br><br>  Luego, confirme nuestros cambios y p√≥ngalos en nuestro repositorio bifurcado.  Publicamos la solicitud de grupo.  Ya se ha unido, todo est√° bien. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/458790/">https://habr.com/ru/post/458790/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../458778/index.html">Satellite 6.5 Reporting Engine: qu√© y por qu√©</a></li>
<li><a href="../458782/index.html">Adaptaci√≥n de programas para ZX Spectrum a TR-DOS por medios modernos. Parte 3</a></li>
<li><a href="../458784/index.html">Transmita proyectos y bibliotecas de Altium Designer a PADS Professional</a></li>
<li><a href="../458786/index.html">Los guardianes de los videojuegos mantienen la cultura del juego paso a paso</a></li>
<li><a href="../458788/index.html">Plantillas personalizadas en GTM: un ejemplo</a></li>
<li><a href="../458792/index.html">Empleados "quemados": ¬øhay alguna salida?</a></li>
<li><a href="../458794/index.html">Reuni√≥n de analistas de negocios en Redmadrobot 18 de julio</a></li>
<li><a href="../458796/index.html">C√≥mo preparar su sitio para grandes cargas de trabajo: 5 consejos pr√°cticos y herramientas √∫tiles</a></li>
<li><a href="../458798/index.html">Nutrient Bot o c√≥mo quiero tomar el pan de los entrenadores de fitness</a></li>
<li><a href="../458800/index.html">Aprendizaje profundo Aprendizaje Federado</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>