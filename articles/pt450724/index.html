<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçü§ù‚Äçüë©üèΩ üòµ üåÅ Apresentando o Python para camaradas superando a ‚Äúlinguagem A vs. V‚Äù l√≠ngua B "e outros preconceitos ‚úåüèø üíáüèø üñïüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Para todos os residentes de habrach que t√™m o sentimento de d√©j√† vu: fui solicitado a escrever este post pelo artigo "Introdu√ß√£o ao Python" e coment√°-...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apresentando o Python para camaradas superando a ‚Äúlinguagem A vs. V‚Äù l√≠ngua B "e outros preconceitos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450724/"><p>  Para todos os residentes de habrach que t√™m o sentimento de d√©j√† vu: fui solicitado a escrever este post pelo artigo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Introdu√ß√£o ao Python"</a> e coment√°-lo.  Infelizmente, a qualidade desta "introdu√ß√£o" ahem ... n√£o vamos falar de coisas tristes.  Mas foi ainda mais triste observar brigas nos coment√°rios, da categoria ‚ÄúC ++ √© mais r√°pido que Python‚Äù, ‚ÄúFerrugem √© ainda mais r√°pida que C ++‚Äù, ‚ÄúPython n√£o √© necess√°rio‚Äù etc.  √â incr√≠vel que eles n√£o se lembrassem de Ruby! </p><br><p>  Como Bjarn Stroustrup disse, </p><br><blockquote>  "Existem apenas dois tipos de linguagens de programa√ß√£o: aquelas que as pessoas juram o tempo todo e aquelas que ningu√©m usa". </blockquote><p>  Bem-vindo a todos que gostariam de se familiarizar com o Python sem cair em maldi√ß√µes sujas! </p><a name="habracut"></a><br><p> A manh√£ nas montanhas do C√°ucaso Oriental foi marcada por gritos.  Dois jovens sentaram-se em uma pedra grande e discutiram vigorosamente algo, gesticulando ativamente.  Um minuto depois, eles come√ßaram a se empurrar, e ent√£o se agarraram e ca√≠ram de uma pedra em (como se viu) um arbusto de urtiga.  Aparentemente, esse arbusto cresceu l√° por uma raz√£o - ele imediatamente pacificou os brig√µes e trouxe uma tr√©gua √† sua disputa insaci√°vel.  Como voc√™ provavelmente adivinhou, eu era um dos debatedores, o outro era meu melhor amigo (ol√°, Quaker_t!), Mas o assunto da nossa conversa foi <strong>Visual Basic vs.</strong>  <strong>Delphi</strong> ! </p><br><p>  Voc√™ se reconhece?  √Äs vezes, transformamos nossas linguagens de programa√ß√£o favoritas em um culto e estamos prontos para defend√™-la at√© o fim!  Mas os anos passam e chega o momento em que "A vs. B" do assunto das disputas se transforma em "Estou mais confort√°vel trabalhando com A, mas, se necess√°rio, aprenderei a trabalhar com B, C, D, E <em>e, em geral, com qualquer coisa</em> ".  Somente quando nos deparamos com novas linguagens de programa√ß√£o, velhos h√°bitos e cultura podem n√£o nos deixar sair por um longo tempo. </p><br><p>  Gostaria de apresentar o Python e ajudar a transferir sua experi√™ncia para uma nova dire√ß√£o.  Como qualquer tecnologia, ela tem seus pr√≥prios pontos fortes e fracos.  Python, como C ++, Rust, Ruby, JS e todos os outros, √© uma ferramenta.  As instru√ß√µes est√£o anexadas a qualquer instrumento e voc√™ deve aprender a us√°-lo <em>corretamente</em> . </p><br><p>  "Autor, n√£o tem c√©rebro, voc√™ iria nos apresentar o Python?"  Vamos nos familiarizar! </p><br><p>  Python √© uma linguagem de programa√ß√£o din√¢mica e de alto n√≠vel para fins gerais.  Python √© uma linguagem de programa√ß√£o <strong>madura</strong> , com um rico ecossistema e tradi√ß√£o.  Embora a linguagem tenha sido lan√ßada em 1991, sua apar√™ncia moderna come√ßou a tomar forma no in√≠cio dos anos 2000.  Python √© uma linguagem <strong>carregada</strong> , em sua biblioteca padr√£o existem solu√ß√µes para muitas ocasi√µes.  Python √© uma linguagem de programa√ß√£o <strong>popular</strong> : Dropbox, Reddit, Instagram, Disqus, YouTube, Netflix, droga, at√© Eve Online e muitas outras usam ativamente o Python. </p><br><p>  Qual o motivo dessa popularidade?  Com sua permiss√£o, apresentarei minha pr√≥pria vers√£o. </p><br><p>  Python √© uma linguagem de programa√ß√£o <strong>simples</strong> .  Digita√ß√£o din√¢mica.  Coletor de lixo.  Fun√ß√µes de ordem superior.  Sintaxe simples para trabalhar com dicion√°rios, conjuntos, tuplas e listas (inclusive para obter fatias).  O Python √© √≥timo para iniciantes: torna poss√≠vel come√ßar com programa√ß√£o procedural, alternar lentamente para OOP e experimentar a programa√ß√£o funcional.  Mas essa simplicidade √© como a ponta de um iceberg.  Vale a pena mergulhar nas profundezas quando voc√™ se deparar com a filosofia do Python - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Zen Of Python</a> .  Mergulhando ainda mais - e voc√™ se encontra em um conjunto de regras claras para o design de c√≥digo - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Guia de Estilo para C√≥digo Python</a> .  Mergulhando, o programador aprofunda-se gradualmente no conceito de "caminho Python" ou "Pythonic".  Nesse est√°gio incr√≠vel do aprendizado de idiomas, voc√™ come√ßa a entender por que bons programas Python s√£o escritos dessa maneira e n√£o de outra forma.  Por que a linguagem evoluiu nessa dire√ß√£o, e n√£o em outra.  Python n√£o teve sucesso em velocidade.  Mas ele conseguiu o aspecto mais importante do nosso trabalho - a legibilidade.  "Escreva c√≥digo para pessoas, n√£o para carros" - esta √© a base do b√°sico do Python. </p><br><p>  Um bom c√≥digo Python est√° bonito.  E para escrever um c√≥digo bonito - o que n√£o √© uma ocupa√ß√£o agrad√°vel? </p><br><p>  <strong>Dica 0:</strong> <em>Antes de ler mais, d√™ uma olhada em um canto do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Zen Python</a> .</em>  <em>O idioma √© baseado nesses postulados e nossa comunica√ß√£o ser√° muito mais agrad√°vel se voc√™ estiver familiarizado com eles.</em> </p><br><h3 id="kakoy-umnik-dodumalsya-do-otstupov">  Que homem inteligente surgiu com indenta√ß√£o? </h3><br><p>  O primeiro choque para quem nunca viu o c√≥digo em Python √© o recuo do corpo de instru√ß√µes: </p><br><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> ins = input(<span class="hljs-string"><span class="hljs-string">'Please say something'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ins.split(<span class="hljs-string"><span class="hljs-string">' '</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> w == <span class="hljs-string"><span class="hljs-string">'hello'</span></span>: print(<span class="hljs-string"><span class="hljs-string">'world!'</span></span>)</code> </pre> <br><p>  Lembro-me das noites no albergue do Polit√©cnico de Petersburgo quando meu vizinho, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">VlK</a> , com olhos ardentes me disse que havia descoberto algo novo em Python.  "Corpo de indenta√ß√£o? S√©rio?"  - foi a minha rea√ß√£o.  De fato, para uma pessoa que passou do Visual Basic ( <code>if ... end if</code> ) para C # (chaves) atrav√©s de C, C ++ e Java, essa abordagem parecia, para dizer o m√≠nimo, estranha.  "Voc√™ est√° formatando o c√≥digo com indenta√ß√£o?", Perguntou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">VlK</a> .  Claro que eu o formatei.  Mais precisamente, o Studio Visual espiral fez isso por mim.  Ela fez isso muito bem.  Eu nunca pensei em formata√ß√£o e recuo - eles apareceram no c√≥digo sozinhos e pareciam algo comum e familiar.  Mas n√£o havia nada a esconder - o c√≥digo sempre era formatado com recuo.  "Ent√£o por que voc√™ precisa de aparelho se o corpo das instru√ß√µes √©, de qualquer forma, deslocado para a direita?" </p><br><p>  Naquela noite, sentei-me com Python.  Olhando para tr√°s, posso dizer com certeza o que exatamente ajudou a absorver rapidamente o novo material.  Era um editor de c√≥digo.  Influenciado pelo mesmo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">VlK</a> , pouco antes dos eventos descritos acima, mudei do Windows para o Ubuntu e o Emacs como editor (no p√°tio de 2007, para PyCharm, Atom, VS Code e outros - muitos mais anos).  "Bem, agora o Emacs ir√° PR ..." - voc√™ diz.  S√≥ um pouquinho :) Tradicionalmente, a tecla <code>&lt;tab&gt;</code> no Emacs n√£o adiciona tabula√ß√µes, mas serve para alinhar a linha de acordo com as regras deste modo.  Pressione <code>&lt;tab&gt;</code> - e a linha de c√≥digo √© deslocada para a pr√≥xima posi√ß√£o apropriada: </p><br><p><img src="https://habrastorage.org/webt/p_/8g/jm/p_8gjmuqid2ffw7ixile3wkjz74.gif"></p><br><p>  Dessa forma, voc√™ nunca precisar√° pensar se alinhara o c√≥digo corretamente. </p><br><p>  <strong>Dica 1:</strong> <em>Ao conhecer o Python, use um editor que cuide do recuo.</em> </p><br><p>  Voc√™ sabe que efeito colateral toda essa desgra√ßa tem?  O programador tenta evitar constru√ß√µes longas.  Assim que o tamanho da fun√ß√£o ultrapassa as bordas verticais da tela, fica mais dif√≠cil distinguir a qual design o bloco de c√≥digo especificado pertence.  E quanto mais investimentos, mais dif√≠cil.  Como resultado, voc√™ tenta escrever da forma mais concisa poss√≠vel, dividindo os longos corpos de fun√ß√µes, loops, transi√ß√µes condicionais etc. </p><br><h3 id="da-nu-vashu-dinamicheskuyu-tipizaciyu">  Oh, bem, sua digita√ß√£o din√¢mica </h3><br><p>  O, essa discuss√£o existe quase enquanto existir o conceito de ‚Äúprograma√ß√£o‚Äù!  A digita√ß√£o din√¢mica n√£o √© ruim nem boa.  A digita√ß√£o din√¢mica tamb√©m √© nossa ferramenta.  No Python, a digita√ß√£o din√¢mica oferece uma tremenda liberdade de a√ß√£o.  E onde h√° maior liberdade de a√ß√£o - √© mais prov√°vel que voc√™ atire no pr√≥prio p√©. </p><br><p>  Vale esclarecer que a digita√ß√£o em Python √© <strong>estrita</strong> e a adi√ß√£o de um n√∫mero a uma string n√£o funciona: </p><br><pre> <code class="python hljs"><span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-string"><span class="hljs-string">'1'</span></span> &gt;&gt;&gt; TypeError: unsupported operand type(s) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> +: <span class="hljs-string"><span class="hljs-string">'int'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-string"><span class="hljs-string">'str'</span></span></code> </pre> <br><p>  O Python tamb√©m verifica a assinatura da fun√ß√£o quando √© chamada e lan√ßa uma exce√ß√£o se a assinatura da chamada n√£o for verdadeira: </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y sum(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>) &gt;&gt;&gt; TypeError: sum() takes <span class="hljs-number"><span class="hljs-number">2</span></span> positional arguments but <span class="hljs-number"><span class="hljs-number">3</span></span> were given</code> </pre> <br><p>  Por√©m, ao carregar um script, o Python n√£o informar√° que a fun√ß√£o espera um n√∫mero e n√£o uma string que voc√™ passa para ele.  E voc√™ s√≥ aprende sobre isso em tempo de execu√ß√£o: </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y sum(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'10'</span></span>) &gt;&gt;&gt; TypeError: can only concatenate str (<span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-string"><span class="hljs-string">"int"</span></span>) to str</code> </pre> <br><p>  Quanto mais forte o desafio para o programador, <em>especialmente ao escrever grandes projetos</em> .  O Python moderno respondeu a esse desafio com um mecanismo de anota√ß√£o e uma biblioteca de tipos, e a comunidade desenvolveu programas que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">executam a verifica√ß√£o de tipo est√°tico</a> .  Como resultado, o programador aprende sobre esses erros antes de executar o programa: </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># main.py: def sum(x: int, y: int) -&gt; int: return x + y sum(10, '10') $ mypy main.py tmp.py:5: error: Argument 2 to "sum" has incompatible type "str"; expected "int"</span></span></code> </pre> <br><p>  O Python n√£o atribui nenhuma import√¢ncia √†s anota√ß√µes, embora as armazene no atributo <code>__annotations__</code> .  A √∫nica condi√ß√£o √© que as anota√ß√µes sejam valores v√°lidos em termos de idioma.  Desde a sua apari√ß√£o na vers√£o 3.0 (que foi h√° mais de dez anos!), Foram os esfor√ßos da comunidade que come√ßaram a usar anota√ß√µes para marca√ß√£o digitada de vari√°veis ‚Äã‚Äãe argumentos. </p><br><div class="spoiler">  <b class="spoiler_title">Outro exemplo, mais complicado.</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#      , :   :) from typing import TypeVar, Iterable Num = TypeVar('Num', int, float) def sum(items: Iterable[Num]) -&gt; Num: accum = 0 for item in items: accum += item return accum sum([1, 2, 3]) &gt;&gt;&gt; 6</span></span></code> </pre> </div></div><br><p>  <strong>Dica 2:</strong> <em>Na pr√°tica, a digita√ß√£o mais din√¢mica causa problemas ao ler e depurar c√≥digo.</em>  <em>Especialmente se esse c√≥digo foi escrito sem anota√ß√µes e voc√™ precisa gastar muito tempo descobrindo os tipos de vari√°veis.</em>  <em>Voc√™ n√£o precisa indicar e documentar os tipos de tudo, mas o tempo gasto em uma descri√ß√£o detalhada das interfaces p√∫blicas e nas se√ß√µes mais cr√≠ticas do c√≥digo ser√° recompensado em cem vezes!</em> </p><br><h3 id="krya-utinaya-tipizaciya">  Quack!  Digita√ß√£o de pato </h3><br><p>  √Äs vezes, os entusiastas de Python fingem ser misteriosos e falam sobre "digita√ß√£o de pato". <br>  Digita√ß√£o de pato √© o uso do teste de pato na programa√ß√£o: </p><br><blockquote>  Se um objeto se agita como um pato, voa como um pato e anda como um pato, provavelmente √© um pato. </blockquote><p>  Considere um exemplo: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RpgCharacter</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, weapon)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">self</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">weapon</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">weapon</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">battle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.weapon.attack()</code> </pre> <br><p>  Aqui est√° a inje√ß√£o de depend√™ncia cl√°ssica.  A classe <code>RpgCharacter</code> recebe o objeto de <code>weapon</code> no construtor e, mais tarde, no m√©todo <code>battle()</code> , chama <code>weapon.attack()</code> .  Mas o <code>RpgCharacter</code> n√£o depende da implementa√ß√£o espec√≠fica da <code>weapon</code> .  Pode ser uma espada, um BFG 9000 ou uma baleia com um vaso de flores, pronta para pousar na cabe√ßa do inimigo a qualquer momento.  √â importante que o objeto tenha um m√©todo <code>attack()</code> , pois o Python n√£o est√° interessado em tudo o mais. </p><br><p></p><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img width="400" src="https://habrastorage.org/webt/l8/ld/yz/l8ldyzcgtvlj3ifvbpnswr2k7ws.png"></a> </div><p></p><br><p>  A rigor, a digita√ß√£o de patos n√£o √© √∫nica.  Est√° presente em todas as linguagens din√¢micas (familiares para mim) que implementam OOP. </p><br><p>  Este √© outro exemplo de como programar cuidadosamente no mundo da digita√ß√£o din√¢mica.  M√©todo mal nomeado?  Nomeada uma vari√°vel de forma amb√≠gua?  Seu colega, ou voc√™ mesmo, depois de cerca de meio ano, ficar√° feliz em usar esse c√≥digo :) </p><br><div class="spoiler">  <b class="spoiler_title">O que aconteceria se usarmos Java condicional?</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IWeapon</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attack</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sword</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IWeapon</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attack</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//... } } public class RpgCharacter { IWeapon weapon; public RpgCharacter(IWeapon weapon) { this.weapon = weapon; } public void battle() { weapon.attack(); } }</span></span></code> </pre> <br><p>  E haveria uma digita√ß√£o est√°tica cl√°ssica, com verifica√ß√£o de tipo no est√°gio de compila√ß√£o.  Pre√ßo - a incapacidade de usar um objeto que possui um m√©todo <code>attack()</code> , mas n√£o implementa explicitamente a interface <code>IWeapon</code> . </p></div></div><br><p>  <strong>Dica 3</strong> : <em>Se desejar, voc√™ pode descrever a interface criando sua pr√≥pria <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe abstrata com m√©todos e propriedades</a> .</em>  <em>Melhor ainda, dedique algum tempo testando e escrevendo a documenta√ß√£o para voc√™ e seus usu√°rios de c√≥digo.</em> </p><br><h3 id="procedurnyy-podhod-i-__specialnye_metody__">  Abordagem processual e __ m√©todos especiais __ () </h3><br><p>  Python √© uma linguagem orientada a <code>object</code> e a classe de <code>object</code> est√° na raiz da hierarquia de heran√ßa: </p><br><pre> <code class="python hljs">isinstance(<span class="hljs-string"><span class="hljs-string">'abc'</span></span>, object) &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> isinstance(<span class="hljs-number"><span class="hljs-number">10</span></span>, object) &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">True</span></span></code> </pre> <br><p>  Mas onde <code>obj.ToString()</code> usado em Java e C #, haver√° uma chamada para <code>str(obj)</code> em Python.  Ou, por exemplo, em vez de <code>myList.length</code> , o Python ter√° <code>len(my_list)</code> .  O criador da linguagem, Guido van Rossum, explicou o seguinte: </p><br><blockquote>  Quando leio o c√≥digo que diz <code>len(x)</code> , sei que o tamanho de algo est√° sendo solicitado.  Isso imediatamente me diz que o resultado ser√° um n√∫mero inteiro e o argumento √© algum tipo de cont√™iner.  Por outro lado, ao ler <code>x.len()</code> , preciso saber que <code>x</code> √© algum tipo de cont√™iner que implementa uma interface espec√≠fica ou herda de uma classe que possui o m√©todo <code>len()</code> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">[Fonte]</a> . </blockquote><p>  No entanto, dentro de si, as fun√ß√µes <code>len()</code> , <code>str()</code> e algumas outras chamar√£o <strong>certos</strong> m√©todos do objeto: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, name, last_name)</span></span></span><span class="hljs-function">:</span></span> self.name = name self.last_name = last_name <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__str__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">f"Honourable </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{self.name}</span></span></span><span class="hljs-string"> </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{self.last_name}</span></span></span><span class="hljs-string">"</span></span> u = User(<span class="hljs-string"><span class="hljs-string">'Alex'</span></span>, <span class="hljs-string"><span class="hljs-string">'Black'</span></span>) label = str(u) print(label) &gt;&gt;&gt; Honourable Alex Black</code> </pre> <br><p>  M√©todos especiais tamb√©m s√£o usados ‚Äã‚Äãpor operadores de linguagem, matem√°ticos e booleanos, bem como <code>for ... in ...</code> operadores de loop, <code>with</code> operador de contexto, operador de √≠ndice <code>[]</code> , etc. <br>  Por exemplo, um protocolo iterador consiste em dois m√©todos: <code>__iter__()</code> e <code>__next__()</code> : </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#  Iterable, IEnumerable, std::iterator  .. class InfinitePositiveIntegers: def __init__(self): self.counter = 0 def __iter__(self): """      .    iter(). """ return self def __next__(self): """  .    next(). """ self.counter += 1 return self.counter for i in InfinitePositiveIntegers(): print(i) &gt;&gt;&gt; 1 &gt;&gt;&gt; 2 &gt;&gt;&gt; ... #  ,  Ctrl + C</span></span></code> </pre> <br><p>  Bem, digamos m√©todos especiais.  Mas por que eles parecem t√£o distorcidos?  Guido explicou isso pelo fato de terem os nomes usuais sem sublinhar, os pr√≥prios programadores n√£o os redefiniriam, mais cedo ou mais tarde.  I.e.  <code>____()</code> √© um tipo de prote√ß√£o contra o tolo.  Como o tempo mostrou - a prote√ß√£o √© eficaz :) </p><br><p>  <strong>Dica 4:</strong> <em>observe atentamente as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fun√ß√µes</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">internas</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">os m√©todos de objetos especiais</a> .</em>  <em>Eles s√£o parte integrante da linguagem, sem a qual √© imposs√≠vel falar completamente.</em> </p><br><h3 id="gde-inkapsulyaciya-gde-moy-private-gde-moya-skazochka">  Onde est√° o encapsulamento?  Onde est√° o meu privado ?!  Onde est√° o meu conto de fadas? !! </h3><br><p>  Python n√£o possui modificadores de acesso para atributos de classe.  O interior dos objetos est√° aberto para acesso sem restri√ß√µes.  No entanto, existe uma conven√ß√£o segundo a qual os atributos com o prefixo <code>_</code> s√£o considerados privados, por exemplo: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyFile</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#    _os_handle = None def __init__(self, path: str): self._open(path) #    def _open(self, path): # os.open() - **    . #      open(). #   os.open()    . self._os_handle = os.open(path, os.O_RDWR | os.O_CREAT) #      def close(self): if self._os_handle is not None: os.close(self._os_handle) f = MyFile('/tmp/file.txt') print(f._os_handle) #    ""    ! f.close()</span></span></code> </pre> <br><p>  Porque </p><br><blockquote>  N√£o h√° nada particular em Python.  Nem a classe nem sua inst√¢ncia ir√£o esconder de voc√™ o que est√° dentro (gra√ßas ao qual a introspec√ß√£o mais profunda √© poss√≠vel).  Python confia em voc√™.  Ele meio que diz: "Amigo, se voc√™ quiser remexer nos cantos escuros - n√£o h√° problema. Acredito que existem boas raz√µes para isso e espero que voc√™ n√£o quebre nada. √â claro. <br><br>  No final, somos todos adultos aqui. <br><br>  - Karl Fast <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">[fonte]</a> . </blockquote><br><div class="spoiler">  <b class="spoiler_title">Mas como evitar colis√µes de nomes durante a heran√ßa?</b> <div class="spoiler_text"><p>  O Python possui um mecanismo especial para manipular o nome dos atributos come√ßando com sublinhado duplo e n√£o terminando com sublinhado duplo ( <code>__my_attr</code> )!  Isso √© feito para evitar colis√µes de nomes durante a heran√ßa.  Para chamar os m√©todos de classe fora do corpo, o Python adiciona o prefixo <code>___</code> .  Mas para acesso interno, nada muda: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.__x = <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.__x c = C() c.__x &gt;&gt;&gt; <span class="hljs-string"><span class="hljs-string">'C'</span></span> object has no attribute <span class="hljs-string"><span class="hljs-string">'__x'</span></span> print(c.get_x()) &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">10</span></span> print(c._C__x) &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br><p>  Vamos olhar para uma aplica√ß√£o pr√°tica.  Por exemplo, para a classe <code>File</code> , que l√™ arquivos do sistema de arquivos local, queremos adicionar recursos de cache.  Nosso colega conseguiu escrever uma aula de mixin para esses fins.  Mas, para isolar m√©todos e atributos de <strong>poss√≠veis</strong> conflitos, um colega adicionou o prefixo <code>__</code> a seus nomes: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseFile</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, path)</span></span></span><span class="hljs-function">:</span></span> self.path = path <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LocalMixin</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read_from_local</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(self.path) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> f.read() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CachedMixin</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CacheMissError</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Exception)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># Tepe,         #   __cache,   __from_cache(), # ,     ! self.__cache = {} def __from_cache(self): return self.__cache[self.path] def read_from_cache(self): try: return self.__from_cache() except KeyError as e: raise self.CacheMissError() from e def store_to_cache(self, data): self.__cache[self.path] = data class File(CachedMixin, LocalMixin, BaseFile): def __init__(self, path): CachedMixin.__init__(self) BaseFile.__init__(self, path) def read(self): try: return self.read_from_cache() except CachedMixin.CacheMissError: data = self.read_from_local() self.store_to_cache(data) return data</span></span></code> </pre> <br><p>  Se voc√™ estiver interessado em examinar a implementa√ß√£o desse mecanismo no CPython, por favor, em <a href="">Python / compile.c</a> </p></div></div><br><p>  Finalmente, devido √† presen√ßa de propriedades na linguagem, n√£o faz sentido escrever getters e setters no estilo Java: <code>getX(), setX()</code> .  Por exemplo, na classe originalmente escrita <code>Coordinates</code> , </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Coordinates</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, x, y)</span></span></span><span class="hljs-function">:</span></span> self.x = x self.y = y c = Coordinates(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>) print(cx, cy) &gt;&gt;&gt; (<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)</code> </pre> <br><p>  Eu precisava controlar o acesso ao atributo <code>x</code> .  A abordagem correta seria substitu√≠-la por <code>property</code> , mantendo assim um contrato com o mundo exterior. </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Coordinates</span></span></span><span class="hljs-class">:</span></span> _x = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, x, y)</span></span></span><span class="hljs-function">:</span></span> self.x = x self.y = y @property <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self._x @x.setter <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, val)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> val &gt; <span class="hljs-number"><span class="hljs-number">10</span></span>: self._x = val <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> ValueError(<span class="hljs-string"><span class="hljs-string">'x should be greater than 10'</span></span>) c = Coordinates(<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>) cx = <span class="hljs-number"><span class="hljs-number">5</span></span> &gt;&gt;&gt; ValueError: x should be greater than <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br><p>  <strong>Dica 5:</strong> <em>Assim como em Python, o conceito de campos particulares e m√©todos de classe √© baseado em uma conven√ß√£o estabelecida.</em>  <em>N√£o se ofenda com os autores das bibliotecas se "tudo parou de funcionar" pelo motivo de voc√™ ter usado ativamente os campos particulares de suas classes.</em>  <em>No final, somos todos adultos aqui :)</em> . </p><br><h3 id="nemnogo-ob-isklyucheniyah">  Um pouco sobre exce√ß√µes </h3><br><p>  A cultura Python tem uma abordagem √∫nica para exce√ß√µes.  Al√©m da intercepta√ß√£o e processamento usuais em C ++ / Java, voc√™ encontrar√° o uso de exce√ß√µes no contexto </p><br><blockquote>  "Mais f√°cil pedir perd√£o do que permiss√£o - EAFP." </blockquote><p>  Parafraseando - n√£o escreva muito <code>if</code> , <code>if</code> , na maioria dos casos, a execu√ß√£o for neste ramo.  Em vez disso, envolva a l√≥gica em <code>try..except</code> . </p><br><p>  Exemplo: imagine um manipulador de solicita√ß√£o POST que crie um usu√°rio em um banco de dados condicional.  Na entrada da fun√ß√£o, h√° um dicion√°rio (dicion√°rio) do tipo de valor-chave: </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_user_handler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data: Dict[str, str])</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: database.user.persist( username=data[<span class="hljs-string"><span class="hljs-string">'username'</span></span>], password=data[<span class="hljs-string"><span class="hljs-string">'password'</span></span>] ) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> KeyError: print(<span class="hljs-string"><span class="hljs-string">'There was a missing field in data passed for user creation'</span></span>)</code> </pre> <br><p>  N√£o poluimos o c√≥digo com verifica√ß√µes "se o <code>username</code> ou a <code>password</code> est√£o nos <code>data</code> ".  Esperamos que eles provavelmente estejam l√°.  N√£o pedimos ‚Äúpermiss√£o‚Äù para usar esses campos, mas ‚Äúpedimos desculpas‚Äù quando o pr√≥ximo kulhacker postar um formul√°rio com dados ausentes. </p><br><div class="spoiler">  <b class="spoiler_title">S√≥ n√£o leve ao ponto do absurdo!</b> <div class="spoiler_text"><p>  Por exemplo, voc√™ gostaria de verificar se o sobrenome do usu√°rio est√° presente nos dados e se n√£o o define como um valor vazio.  <code>if</code> aqui fosse muito mais apropriado: </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_user_handler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">'last_name'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data: data[<span class="hljs-string"><span class="hljs-string">'last_name'</span></span>] = <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: database.user.persist( username=data[<span class="hljs-string"><span class="hljs-string">'username'</span></span>], password=data[<span class="hljs-string"><span class="hljs-string">'password'</span></span>], last_name=data[<span class="hljs-string"><span class="hljs-string">'last_name'</span></span>] ) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> KeyError: print(<span class="hljs-string"><span class="hljs-string">'There was a missing field in data passed for user creation'</span></span>)</code> </pre> </div></div><br><p>  <strong>Os erros nunca devem passar silenciosamente.</strong>  - n√£o ignore as exce√ß√µes!  O Python moderno tem um <code>raise from</code> maravilhoso <code>raise from</code> constru√ß√£o que permite manter o contexto da cadeia de exce√ß√µes.  Por exemplo: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyProductError</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Exception)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> super().__init__(<span class="hljs-string"><span class="hljs-string">'There has been a terrible product error'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> / x <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> ZeroDivisionError <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> e: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> MyProductError() <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> e</code> </pre> <br><p>  Sem <code>raise from e</code> cadeia de exce√ß√£o √© interrompida em <code>MyProductError</code> e n√£o podemos descobrir qual foi exatamente a causa desse erro.  Com <code>raise from X</code> , o motivo (ou seja, <code>X</code> ) da exce√ß√£o lan√ßada √© armazenado no atributo <code>__cause__</code> : </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: calculate(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> MyProductError <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> e: print(e.__cause__) &gt;&gt;&gt; division by zero</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Mas h√° uma pequena nuance no caso da itera√ß√£o: StopIteration</b> <div class="spoiler_text"><p>  No caso de uma itera√ß√£o, o lan√ßamento de uma exce√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">StopIteration</a> √© a maneira oficial de sinalizar que o iterador est√° completo. </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PositiveIntegers</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, limit)</span></span></span><span class="hljs-function">:</span></span> self.counter = <span class="hljs-number"><span class="hljs-number">0</span></span> self.limit = limit <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__iter__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__next__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.counter += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.counter == self.limit: <span class="hljs-comment"><span class="hljs-comment">#  hasNext()  moveNext(), #  ,   raise StopIteration() return self.counter for i in PositiveIntegers(5): print(i) &gt; 1 &gt; 2 &gt; 3 &gt; 4</span></span></code> </pre> </div></div><br><p>  <strong>Dica 6:</strong> <em>pagamos pelo tratamento de exce√ß√µes somente em situa√ß√µes excepcionais.</em>  <em>N√£o os negligencie!</em> </p><br><h3 id="there-should-be-one---and-preferably-only-one---obvious-way-to-do-it">  Deve haver um - e de prefer√™ncia apenas um - a maneira anterior de fazer isso. </h3><br><p>  <code>switch</code> ou correspond√™ncia de padr√µes?  - use <code>if</code> e dicion√°rios.  <code>do-</code> ?  - para isso h√° um <code>while</code> e <code>for</code> .  <code>goto</code> ?  Eu acho que voc√™ mesmo adivinhou.  O mesmo se aplica a algumas t√©cnicas e padr√µes de design que parecem ter sido concedidos em outros idiomas.  O mais surpreendente √© que n√£o h√° restri√ß√µes t√©cnicas √† sua implementa√ß√£o, √© apenas "n√£o aceitamos". </p><br><p>  Por exemplo, no Python, voc√™ n√£o v√™ frequentemente o padr√£o "Construtor".  Em vez disso, ele usa a capacidade de transmitir e solicitar explicitamente argumentos de nome para a fun√ß√£o.  Em vez disso </p><br><pre> <code class="python hljs">human = HumanBuilder.withName(<span class="hljs-string"><span class="hljs-string">"Alex"</span></span>).withLastName(<span class="hljs-string"><span class="hljs-string">"Black"</span></span>).ofAge(<span class="hljs-number"><span class="hljs-number">20</span></span>).withHobbies([<span class="hljs-string"><span class="hljs-string">'tennis'</span></span>, <span class="hljs-string"><span class="hljs-string">'programming'</span></span>]).build()</code> </pre> <br><p>  ser√° </p><br><pre> <code class="python hljs">human = Human( name=<span class="hljs-string"><span class="hljs-string">"Alex"</span></span> last_name=<span class="hljs-string"><span class="hljs-string">"Black"</span></span> age=<span class="hljs-number"><span class="hljs-number">20</span></span> hobbies=[<span class="hljs-string"><span class="hljs-string">'tennis'</span></span>, <span class="hljs-string"><span class="hljs-string">'programming'</span></span>] )</code> </pre> <br><p>  A biblioteca padr√£o n√£o usa cadeias de m√©todos para trabalhar com <em>cole√ß√µes</em> .  Lembro-me de como um colega que veio do mundo de Kotlin me mostrou o c√≥digo do seguinte sentido (extra√≠do da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o oficial</a> do Kotlin): </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> shortGreetings = people .filter { it.name.length &lt; <span class="hljs-number"><span class="hljs-number">10</span></span> } .map { <span class="hljs-string"><span class="hljs-string">"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${it.name}</span></span></span><span class="hljs-string">!"</span></span> }</code> </pre> <br><p>  No Python, <code>map()</code> , <code>filter()</code> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">muitos outros</a> s√£o fun√ß√µes, n√£o m√©todos de coleta.  Reescrevendo este c√≥digo um por um, obtemos: </p><br><pre> <code class="python hljs">short_greetings = map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> h: <span class="hljs-string"><span class="hljs-string">f"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{h.name}</span></span></span><span class="hljs-string">"</span></span>, filter(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> h: len(h.name) &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>, people))</code> </pre> <br><p>  Na minha opini√£o, parece horr√≠vel.  Portanto, para pacotes grandes como <code>.takewhile().filter().map().reduce()</code> , √© melhor usar o chamado  <em>inclus√£o</em> (compreens√µes) ou bons ciclos antigos.  A prop√≥sito, o mesmo exemplo no Kotlin √© dado na forma da compreens√£o da lista correspondente.  E no Python √© assim: </p><br><pre> <code class="python hljs">short_greetings = [ <span class="hljs-string"><span class="hljs-string">f"Hello </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{h.name}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> h <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> people <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(h.name) &lt; <span class="hljs-number"><span class="hljs-number">10</span></span> ]</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Para quem sente falta das correntes</b> <div class="spoiler_text"><p>  Existem bibliotecas como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pipe</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">py_linq</a> ! </p></div></div><br><p>  As cadeias de m√©todos s√£o usadas onde s√£o mais eficientes que as ferramentas padr√£o.  Por exemplo, na estrutura da web do Django, cadeias s√£o usadas para criar um objeto de consulta ao banco de dados: </p><br><pre> <code class="python hljs">query = User.objects \ .filter(last_visited__gte=<span class="hljs-string"><span class="hljs-string">'2019-05-01'</span></span>) \ .order_by(<span class="hljs-string"><span class="hljs-string">'username'</span></span>) \ .values(<span class="hljs-string"><span class="hljs-string">'username'</span></span>, <span class="hljs-string"><span class="hljs-string">'last_visited'</span></span>) \ [:<span class="hljs-number"><span class="hljs-number">5</span></span>]</code> </pre> <br><p>  <strong>Dica 7:</strong> <em>Antes de fazer algo muito familiar com a experi√™ncia passada, mas n√£o familiar no Python, pergunte-se que decis√£o um pythonist experiente tomaria?</em> </p><br><h3 id="piton-medlennyy">  Python lento </h3><br><p>  Sim </p><br><p>  Sim, quando se trata de velocidade de execu√ß√£o em compara√ß√£o com linguagens estaticamente tipadas e compiladas. </p><br><p>  Mas voc√™ parece querer uma resposta detalhada? </p><br><p>  A implementa√ß√£o de refer√™ncia do Python (CPython) est√° longe de ser a sua implementa√ß√£o mais eficaz.  Uma das raz√µes importantes √© o desejo dos desenvolvedores de n√£o complic√°-lo.  E a l√≥gica √© compreens√≠vel - o c√≥digo n√£o muito obscuro significa menos erros, uma melhor oportunidade para fazer altera√ß√µes e, no final, mais pessoas que desejam ler, entender e complementar esse c√≥digo. </p><br><p>  Jake VanderPlas, em seu blog, analisa o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">que acontece no CPython</a> ao adicionar duas vari√°veis ‚Äã‚Äãque cont√™m valores inteiros: </p><br><pre> <code class="python hljs">a = <span class="hljs-number"><span class="hljs-number">1</span></span> b = <span class="hljs-number"><span class="hljs-number">2</span></span> c = a + b</code> </pre> <br><p>  Mesmo se n√£o nos aprofundarmos na selva do CPython, podemos dizer que, para armazenar as vari√°veis <code>a</code> , <code>b</code> , o int√©rprete precisar√° criar tr√™s objetos na pilha, nos quais os valores de tipo e (indicadores para) ser√£o armazenados;  <code>binary_add&lt;int, int&gt;(a-&gt;val, b-&gt;val)</code> novamente o tipo e os valores durante a opera√ß√£o de adi√ß√£o para chamar algo como <code>binary_add&lt;int, int&gt;(a-&gt;val, b-&gt;val)</code> ;  escreva o resultado em <code>c</code> . <br>  Isso √© terrivelmente ineficiente em compara√ß√£o com um programa C semelhante. </p><br><p>  Outro problema com o CPython √© o chamado  Bloqueio Global de Int√©rpretes (GIL).  Esse mecanismo, essencialmente um valor booleano delimitado por um mutex, √© usado para sincronizar a execu√ß√£o do bytecode.  O GIL simplifica o desenvolvimento de c√≥digo em execu√ß√£o em um ambiente multiencadeado: o CPython n√£o precisa pensar em sincronizar o acesso a vari√°veis ‚Äã‚Äãou deadlocks.  Voc√™ precisa pagar por isso, pois apenas um thread obt√©m acesso e <em>executa o bytecode</em> em um determinado momento: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rw/od/if/rwodifh_niof7jaf5bvmagg4ypy.gif"></div><br><p>  <strong>UPD:</strong> Mas isso n√£o significa que o programa em Python funcione magicamente em um ambiente multiencadeado!  O c√≥digo no Python n√£o √© transferido para o bytecode um por um e n√£o h√° garantias sobre a compatibilidade do bytecode entre as vers√µes!  Portanto, voc√™ ainda precisa sincronizar os threads no c√≥digo.  Felizmente, aqui o Python possui um rico conjunto de ferramentas, por exemplo, permitindo que voc√™ alterne entre um modelo de execu√ß√£o multiencadeado e multiprocesso. </p><br><div class="spoiler">  <b class="spoiler_title">Se voc√™ est√° curioso sobre quais esfor√ßos est√£o sendo feitos para erradicar o GIL</b> <div class="spoiler_text"><p>    Anthony Shaw " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Has the Python GIL been slain?</a> ". </p></div></div><br><p>    ? </p><br><ol><li>      .    ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CFFI</a> )              .           API    (extensions)  C/C++.    ,      Rust, Go   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Kotlin Native</a> ! </li><li>    , : <br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PyPy</a> ,   JIT-.    ,     ,          ? </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cython</a> ‚Äî      Python    C. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IronPython</a> ‚Äî ,   .NET framework. </li></ul></li></ol><br><p> <strong> 8:</strong> <em>     ,              .      ,   IO (, ,  )   ,    ,      ,    ,     :)</em> </p><br><h3 id="osnovnye-instrumenty">   </h3><br><p>      ?      Linux  MacOS,   95%      .      ,      3.,       2.7.    Windows   .   :  Docker, Windows Subsystem for Linux, Cygwin, ,     . </p><br><p> <strong> 9:</strong> <em>     .  ,   ‚Äî       -   .</em> </p><br><p>    "Hello world"   ?  √ìtimo!      machine learning-    -    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Python Package Index</a> (PyPI). </p><br><p>        (packages),    ..   (virtual environments).        ,      .     -    .   <code>pip</code>    .     <code>pip</code>      .      ,  <code>pipenv</code>  <code>poetry</code> ‚Äî  npm, bundler, cargo  .. </p><br><p> <strong> 0xA:</strong> <em>      ‚Äî  <code>pip</code>  <code>virtualenv</code> .   ‚Äî  , ,  .  ,      ‚Äî   <code>sys.path</code> ‚Äî  ,        .</em> </p><br><h3 id="chto-zhe-dalshe">   ? </h3><br><p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> ?       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a> .     : </p><br><blockquote>      Dive into python... </blockquote><p> ,               .              , ,     :) </p><br><p> , ! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt450724/">https://habr.com/ru/post/pt450724/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt450710/index.html">V√≠deos sobre reconstru√ß√£o de Midi a partir de Synthesia (e similares)</a></li>
<li><a href="../pt450712/index.html">DotNetRu na DotNext 2019 Piter</a></li>
<li><a href="../pt450716/index.html">Anunciando as habilidades do Windows Vision (vers√£o pr√©via)</a></li>
<li><a href="../pt450718/index.html">O que h√° de novo no RxJS v6.5</a></li>
<li><a href="../pt450720/index.html">Como desenvolver um aplicativo amig√°vel</a></li>
<li><a href="../pt450726/index.html">Criando uma ferramenta para escrever de forma r√°pida e eficiente autotestes no Selenium</a></li>
<li><a href="../pt450728/index.html">NLog: regras e filtros</a></li>
<li><a href="../pt450730/index.html">ok.tech: frontend meetup</a></li>
<li><a href="../pt450732/index.html">Entendo, significa que existo: uma revis√£o do Deep Learning in Computer Vision (parte 1)</a></li>
<li><a href="../pt450734/index.html">Fuzzing √© um passo importante no desenvolvimento seguro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>