<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòå üõÄ üßíüèº Prise en main de l'API Automation: Partie 1 - Pr√©sentation ü§ôüèª üè¢ üõ£Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Traduction de Shashi Kumar Raja 


 Donc, disons que vous voulez faire de l'automatisation API, mais chaque fois que vous tapez le meilleur outil d'au...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Prise en main de l'API Automation: Partie 1 - Pr√©sentation</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433726/"><p>  <em>Traduction <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de</a> Shashi Kumar Raja</em> </p><br><p>  Donc, disons que vous voulez faire de l'automatisation API, mais chaque fois que vous tapez le <em>meilleur outil d'automatisation api</em> dans la barre de recherche Google, vous voyez tellement de liens vers les 10 meilleurs outils que vous vous trompez et d√©cidez que vous le ferez certainement <strong>demain</strong> </p><br><p><img src="https://habrastorage.org/webt/zr/kq/we/zrkqwein7iz4odk_rqiw_osz730.png"></p><br><a name="habracut"></a><br><p>  Commen√ßons par comprendre ce dont nous avons besoin si nous voulons mettre en place (esp√©rons-le demain) <strong>une plate-forme d'automatisation d'API</strong> .  Tenez cette pens√©e pendant une seconde ... J'ai dit, arr√™tez de penser ... <em>Je sais que votre patron n'attribue pas un centime pour les outils pay√©s</em> .  Ecoute, je lis dans ton esprit, ne pense pas √† haute voix </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ac9/747/97d/ac974797ded807ac62b12807b6487e82.jpg"></p><br><p>  Les outils payants doivent √™tre suspendus, pas ex√©cut√©s :) </p><br><blockquote><h3>  1. o√π diable dois-je commencer √† √©crire des tests? </h3></blockquote><p>  Vous aurez besoin de quelque chose qui vous fournira des ensembles de r√®gles et de directives pour la r√©daction des tests, et vous permettra √©galement de le faire en vous donnant acc√®s √† plusieurs outils et techniques.  J'entends une cloche sonner, non !!!  Eh bien, je sais ce que fera une cloche. </p><br><p>  <em>Avez-vous d√©j√† entendu parler de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TESTNG</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JUNIT</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MOCHA</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PYTEST</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ROBOT</a> !?</em>  <em>Oui, ce sont tous des environnements d'automatisation de test.</em> </p><br><p>  Vous devez trouver le bon environnement de test en fonction de vos besoins: quelle pile technologique existante votre entreprise utilise-t-elle?  Quelle automatisation voulez-vous faire?  Quelle langue vous convient le mieux, etc.  Vous trouverez un environnement d'automatisation dans les langages les plus populaires qui vous permettra d'√©crire des tests <em>unitaires, fonctionnels et autres</em> types de tests d'API. </p><br><p>  Pour en savoir plus sur l'environnement de test, reportez-vous √† la partie 2 de la s√©rie, o√π j'ai pr√©sent√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mocha</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pytest en d√©tail</a> . </p><br><blockquote><h3>  2. Comment vais-je faire des appels d'API dans un environnement de test? </h3></blockquote><p>  La plupart de ces plates-formes prennent en charge les appels d'API, y compris la <strong>biblioth√®que de requ√™tes HTTP</strong> , car les API REST utilisent le protocole HTTP pour la communication. </p><br><p>  Certains frameworks, tels que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mocha</a> , vous donnent la libert√© d'utiliser la biblioth√®que de requ√™tes HTTP de votre choix, comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">superagent</a> . </p><br><pre>  &lt;code class = "lang-JS"&gt; demande
   .post ('/ api / pet')
   .send ({nom: 'Manny', esp√®ce: 'cat'}) // envoie un corps de message JSON
   .set ('X-API-Key', 'foobar')
   .set ('accepter', 'json')
   .end ((err, res) =&gt; {
     // L'appel de la fonction de fin enverra la requ√™te
   });
 &lt;/code&gt; </pre><br><p>  Ils vous offrent un support facile pour GET, PUT, POST, DELETE et toutes les autres m√©thodes. Vous pouvez passer les en-t√™tes, le cache, les param√®tres de requ√™te, vous l'avez appel√© - vous l'avez compris </p><br><blockquote><h3>  3. Cool, mais certaines de mes API donnent JSON et d'autres donnent XML en r√©ponse, comment puis-je g√©rer cela? </h3></blockquote><p>  La plupart de ces biblioth√®ques de requ√™tes HTTP vous permettent d'envoyer et de recevoir des donn√©es au <em>format JSON, XML, CSV, texte, image, donn√©es de formulaire, donn√©es cod√©es</em> avec plusieurs normes d'autorisation prises en charge. </p><br><p>  Ils vous permettent √©galement de traiter le code d'√©tat de r√©ponse HTTP et de v√©rifier si nous avons re√ßu le code d'√©tat de r√©ponse requis ou non. </p><br><ul><li>  Codes de r√©ponse informationnelle (1xx) <br>  100 - Continuer <br>  101 - Changer de protocole <br>  102 - Traitement </li></ul><br><ul><li>  Codes de r√©ponse de r√©ussite (2xx) <br>  200 - OK 206 - Contenu partiel <br>  201 - Cr√©√© 207 - Multi-statuts <br>  202 - Accept√© 208 - D√©j√† signal√© <br>  203 - Info sans autorit√© 226 - IM utilis√© <br>  204 - Pas de contenu 250 - Espace de stockage faible <br>  205 - R√©initialiser le contenu </li></ul><br><ul><li>  Codes de r√©ponse de redirection (3xx) <br>  300 - Choix multiples 304 - Non modifi√© <br>  301 - D√©plac√© de fa√ßon permanente 305 - Utiliser un proxy <br>  302 - trouv√© 307 - Redirection temporaire <br>  303 - Voir autres 308 - Redirection permanente </li></ul><br><ul><li>  Codes de r√©ponse d'erreur client (4xx) <br>  400 - Choix multiples 410 - Non modifi√© <br>  401 - D√©plac√© en permanence 411 - Utiliser un proxy <br>  402 - trouv√© 412 - redirection temporaire <br>  403 - Voir autre 413 - Redirection permanente <br>  404 - Choix multiples 414 - Non modifi√© <br>  405 - D√©plac√© d√©finitivement 415 - Utiliser un proxy <br>  406 - trouv√© 416 - Redirection temporaire <br>  407 - Voir autre 417 - Redirection permanente <br>  408 - trouv√© 418 - Redirection temporaire <br>  409 - Voir les autres </li></ul><br><ul><li>  Codes de r√©ponse aux erreurs du serveur (5xx) <br>  500 - Erreur de serveur interne 508 - Boucle d√©tect√©e <br>  501 - Non impl√©ment√© 509 - Bande passante limit√©e <br>  502 - Bad Gateway 510 - Non √©tendu <br>  503 - Service non disponible 511 - Autorisation r√©seau requise <br>  504 - D√©lai d'expiration de la passerelle 550 - Autorisation refus√©e <br>  505 - HTTP Ver non pris en charge 551 - Option non prise en charge <br>  506 - La variante n√©gocie √©galement 598 - Erreur de d√©lai d'attente de lecture √† New York <br>  507 - Stockage insuffisant 599 - Erreur de d√©lai de connexion r√©seau </li></ul><br><blockquote><h3>  4. Bien, mais comment vais-je traiter les donn√©es de test? </h3></blockquote><p>  Cela d√©pend d'o√π vous obtenez les donn√©es de test.  Ces frameworks de test vous permettront d'utiliser toutes les fonctionnalit√©s du langage dans lequel ils sont bas√©s - </p><br><p>  a.  <strong>Base de donn√©es:</strong> vous pouvez facilement cr√©er des connexions √† la base de donn√©es pour lire les donn√©es. </p><br><p>  b.  <strong>Fichier externe:</strong> vous pouvez lire du texte externe, JSON, CSV ou tout autre fichier. </p><br><p>  c.  <strong>Donn√©es al√©atoires:</strong> vous pouvez utiliser des biblioth√®ques comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">faker</a> pour g√©n√©rer des donn√©es de test al√©atoires √† la vol√©e. </p><br><pre>  &lt;code&gt; var faker = require ('faker');

 var randomName = faker.name.findName ();  // Rowan Nikolaus
 var randomEmail = faker.internet.email ();  // Kassandra.Haley@erich.biz
 var randomCard = faker.helpers.createCard ();  // carte de contact al√©atoire contenant de nombreuses propri√©t√©s
 &lt;/code&gt; </pre><p>  d.  <strong>Donn√©es de la r√©ponse de l'API:</strong> Plusieurs fois pendant le test, vous devrez transmettre la r√©ponse d'une API en tant que donn√©es de demande √† une autre.  Vous pouvez le faire en utilisant des <strong>hooks</strong> . Vous obtiendrez des fonctions comme <strong>Avant, Avant chaque, Apr√®s, Apr√®s chaque</strong> , qui, comme son nom l'indique, sont ex√©cut√©es avant / apr√®s tout ou partie des tests.  Appelez API1 avant API2 et transmettez sa r√©ponse √† API2.  Parfait!  Ô∏è </p><br><blockquote><h3>  5. Le traitement des donn√©es de test et les appels d'API semblent simples, mais comment vais-je v√©rifier les r√©ponses d'API? </h3></blockquote><p>  Pour v√©rifier les r√©ponses, vous aurez besoin d'une biblioth√®que appel√©e <strong>biblioth√®que d'assertions</strong> .  De nombreux environnements de test sont fournis avec des biblioth√®ques d'assertions, ce qui vous permet d'√©crire des assertions en anglais simple, comme la syntaxe.  Ils vous permettent √©galement de v√©rifier le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sch√©ma JSON de</a> votre r√©ponse. </p><br><p>  Dans mocha, vous pouvez utiliser n'importe quelle biblioth√®que d'assertions, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>chai</strong></a> . </p><br><pre>  &lt;code&gt; response.status.should.equal (200)
 foo.should.be.a ('cha√Æne');
 foo.devrait.avoir.longueurOf (3);
 tea.should.have.property ('flavors')
   .avec.longueurOf (3);
 &lt;/code&gt; </pre><blockquote><h3>  6. Incroyable !!!  Il restait un peu, apr√®s tous ces tests, de montrer √† mon patron ce que j'ai fait et o√π j'ai trouv√© des probl√®mes? </h3></blockquote><p>  La plupart de ces frameworks vous fourniront un rapport de <strong>base de</strong> test <strong>HTML</strong> que vous pourrez t√©l√©charger et partager.  Si vous avez besoin de rapports plus beaux avec des graphiques et des tableaux, vous pouvez utiliser plusieurs outils de rapport open source tels que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">allure</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mochawesome</a> . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ac5/a79/58e/ac5a7958edf2ea766ec2eeb0df70ec46.png"></p><br><blockquote><h3>  <em>7. Seulement si je pouvais obtenir une sorte de mod√®le avec ces choses pour d√©marrer l'automatisation de l'API maintenant</em> </h3></blockquote><p>  <em>Qu'est-ce que je t'ai dit, tu l'as appel√©, tu as</em> </p><br><p>  Il s'agit du mod√®le que j'ai cr√©√© pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">automatiser l'API √† l'aide de mocha dans node.js.</a> </p><br><p>  Il comprend- </p><br><ul><li>  Cadre de test (mocha), </li><li>  Biblioth√®que de requ√™tes HTTP (supertest), </li><li>  Biblioth√®que d'assertions (chai), </li><li>  Journaliste (allure), </li><li>  enregistreur (winston), </li><li>  G√©n√©rateur de donn√©es al√©atoires (faker), </li><li>  Support Eslint et </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">validation de cha√Æne coquine int√©gr√©e</a> .  Tout ce que vous avez √† faire est de le cloner / le t√©l√©charger et vous √™tes pr√™t √† partir. </li></ul><br><p>  Si vous avez besoin d'un mod√®le dans une autre langue, je peux le pr√©parer pour demain. </p><br><p>  Si vous avez aim√© cet article, vous pouvez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">applaudir</a> , cela me fera probablement √©crire plus </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr433726/">https://habr.com/ru/post/fr433726/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr433714/index.html">ILV: L'utilisation de l'analytique peut conduire √† bloquer le site</a></li>
<li><a href="../fr433716/index.html">Google a montr√© une nouvelle g√©n√©ration de sacs √† dos Street View Trekker</a></li>
<li><a href="../fr433720/index.html">10 raisons de choisir une solution pour SAP HANA de HPE</a></li>
<li><a href="../fr433722/index.html">HeisenBug √† travers les yeux d'un employ√© de SberTech</a></li>
<li><a href="../fr433724/index.html">Une v√©rit√© inconfortable sur LDAC</a></li>
<li><a href="../fr433728/index.html">Google a ferm√© le projet de moteur de recherche censur√© chinois en raison de d√©saccords au sein de l'entreprise</a></li>
<li><a href="../fr433730/index.html">Optimisation des bases de donn√©es relationnelles sans temps d'arr√™t par l'exemple de la base de donn√©es la plus charg√©e dans Badoo</a></li>
<li><a href="../fr433732/index.html">Alan Kay: ¬´Quels livres recommanderiez-vous de lire √† quelqu'un qui √©tudie l'informatique¬ª</a></li>
<li><a href="../fr433734/index.html">Donald Knuth: ¬´Les camarades plus √¢g√©s jouaient au tennis, nous √©tions des balles. Ils nous ont frapp√©s, √ßa fait mal. ¬ª (11,12 / 97)</a></li>
<li><a href="../fr433738/index.html">Antiquit√©s: jeux sous MS-DOS que nous n'avons pas choisis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>