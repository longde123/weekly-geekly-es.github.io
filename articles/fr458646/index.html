<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙎🏻 🤵🏿 🎅🏻 Atomic Swaps en bref 🤘🏽 🦏 💒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En juillet 2019, il y avait environ 2000 crypto-monnaies, mais il n'y a pas de mécanisme d'échange unique entre les différentes blockchains. Dans cet ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Atomic Swaps en bref</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458646/"><p>  En juillet 2019, il y avait environ 2000 crypto-monnaies, mais il n'y a pas de mécanisme d'échange unique entre les différentes blockchains.  Dans cet article, nous considérons de manière simpliste comment une des technologies d'échange sans intermédiaires est arrangée - les échanges atomiques. <br>  Bonne lecture! </p><br><p><img src="https://habrastorage.org/webt/jc/ba/qj/jcbaqjix_if2eyc1wfdplh9y24y.png" alt="logo"></p><a name="habracut"></a><br><h1 id="atomic-swaps-chto-eto-takoe-i-s-chem-ego-edyat">  Atomic Swaps: qu'est-ce que c'est et avec quoi mange-t-il? </h1><br><p>  Les swaps atomiques sont une série de transactions sur les deux chaînes de blocs qui vous permet d'échanger des pièces sans la participation d'un tiers et de faire confiance au deuxième participant de l'échange.  En substance, une telle transaction est créée, dont la sortie peut être dépensée soit en présence d'une certaine clé, soit après un certain temps. <br>  Toutes les chaînes de blocs ne permettent pas à AtomicSwap d'être implémenté.  Il y a deux exigences principales: </p><br><ul><li>  soutien aux contrats intelligents (générateur de cette transaction très "initiale"); </li><li>  utilisation de la même cryptomagie (fonction de hachage). </li></ul><br><div class="spoiler">  <b class="spoiler_title">Des contrats intelligents?</b>  <b class="spoiler_title">Non, pas entendu</b> <div class="spoiler_text"><p>  Les contrats intelligents sont, au sens large, un algorithme «non adhérent» qui effectue des actions dans des conditions connues et rien d'autre.  Dans notre cas, un contrat intelligent peut être considéré comme une grande boîte noire, qui est envoyée à l'adresse du destinataire, à l'adresse de l'expéditeur, au montant de l'envoi, au temps de détention de l'argent et à attribuer un identifiant unique (hachage).  La sortie est la transaction souhaitée avec les conditions. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Hash et ses amis</b> <div class="spoiler_text"><p>  Une fonction de hachage est un autre personnage d'un conte de mathématiques supérieures.  Convertit le flux d'entrée en une valeur différente.  Les mêmes données donnent le même résultat.  En règle générale, l'entrée est un grand nombre appelé clé secrète et la sortie est un hachage.  La conversion d'un hachage en une clé secrète n'est pas possible. </p></div></div><br><h1 id="kogda-vse-idet-gladko">  Quand tout se passe bien </h1><br><p>  Considérez l'échange entre Alice (oui, oui, Alice n'est plus la même) et Bob.  Alice a Bitcoin (btc), Bob a Ether (eth).  Les deux personnages ont des adresses sur les deux blockchains.  Ex: les grands signes de crypto-monnaie symbolisent les chaînes de blocs. </p><br><p><img src="https://habrastorage.org/webt/he/-w/pn/he-wpn_bs0onorq7h0fk9lesjoi.png"></p><br><p>  Alice génère une clé (un grand nombre) et ne dit modestement à personne: </p><br><p><img src="https://habrastorage.org/webt/yg/yp/ki/ygypki8kwue-kfpciozfa1amdao.png"></p><br><p>  Sur la base de la clé, elle considère le hachage: </p><br><p><img src="https://habrastorage.org/webt/6p/fy/05/6pfy05jkf_gsnkdpnmsobirlksw.png"></p><br><p>  Crée un contrat avec un identifiant unique égal à un hachage: </p><br><p><img src="https://habrastorage.org/webt/o0/tb/o7/o0tbo7awy1tggp2hw6_2o4r1bwy.png"></p><br><p>  Envoie de l'argent à un contrat.  Maintenant, elle ne peut pas les passer un certain temps (timelock): </p><br><div class="spoiler">  <b class="spoiler_title">Le temps est écoulé, ou timelock</b> <div class="spoiler_text"><p>  Timelock - temps après lequel le créateur du contrat pourra retourner l'argent s'il envoie une transaction d'un certain type (appelons-le "remboursement").  Aucune clé secrète n'est nécessaire pour cette transaction.  Un autre utilisateur peut retirer de l'argent pour l'adresse du destinataire spécifié dans le contrat (important: pas le sien) s'il envoie une transaction d'un type différent (appelons-la racheter) avec la clé secrète. </p><br><p>  En général, le mécanisme de traitement des transactions contractuelles est le suivant: </p><br><pre><code class="plaintext hljs">if (transaction_type == "refund" and sender == contract_creater and timelock &lt; now()) { send_to(creator_address); } else if (transaction_type == "redeem" and hash(secret_key) == contract_id) { send_to(receiver_address); }</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/qn/a7/gv/qna7gvo-5i4xwnhcfxwtoe8fay4.png"></p><br><p>  Alice rapporte le hachage à Bob.  Maintenant, il peut vérifier (vérifier) ​​tous les champs du contrat: assurez-vous que les adresses sont correctes, le montant de l'envoi, le moment où l'argent a été stocké sur le contrat (la période pendant laquelle Alice ne pourra pas le retirer): </p><br><p><img src="https://habrastorage.org/webt/dz/9g/03/dz9g03vs129wy9zt4lz1kwbwjo0.png"></p><br><p>  Si tout va bien, Bob crée un contrat sur la deuxième blockchain similaire à Alisinom (avec le même identifiant).  Le destinataire et, éventuellement, le montant changent (si le taux n'est pas de 1 à 1). </p><br><p><img src="https://habrastorage.org/webt/y9/he/o3/y9heo3nanmlllp1p1c9wgfoh61m.png"></p><br><p>  Alice audite le contrat: </p><br><p><img src="https://habrastorage.org/webt/u2/ab/px/u2abpxzaey8qdfotjdrcswduroq.png"></p><br><p>  Si elle triple tout, elle crée une transaction sur Ethereum qui dépense de l'argent sur le contrat de Bob.  La seule façon de le faire est de fournir une clé.  Maintenant, il est connu: </p><br><p><img src="https://habrastorage.org/webt/bq/0q/57/bq0q57qn1v7p_hg1zfzus21qiy0.png"></p><br><p>  Alice obtient eth: </p><br><p><img src="https://habrastorage.org/webt/69/s8/wu/69s8wut5tgijnspuyr7c4conq9u.png"></p><br><p>  Bob regarde la clé et crée une transaction qui dépense de l'argent sur le contrat d'Alice en utilisant sa clé: </p><br><p><img src="https://habrastorage.org/webt/yz/pk/j9/yzpkj9qdzxpfshxb6nt6j-40-y4.png"></p><br><p>  Succès!  Les loups sont pleins, les moutons sont en sécurité! </p><br><h1 id="kogda-mir-ne-idealen">  Quand le monde n'est pas parfait </h1><br><p>  Cependant, parfois quelque chose peut mal tourner.  Il y a deux endroits où l'échange peut échouer.  Pour ce faire, il existe un mécanisme permettant de restituer l'argent à leurs propriétaires légitimes. </p><br><p>  Supposons qu'Alice en tant que fille décente ait envoyé de l'argent pour un contrat, mais après un audit, Bob a changé d'avis sur la séparation avec les airs: </p><br><p><img src="https://habrastorage.org/webt/dz/9g/03/dz9g03vs129wy9zt4lz1kwbwjo0.png"></p><br><p>  Alice attend l'expiration du délai spécifié dans le contrat (par exemple, 48 heures) et retourne les grillons sanguins: </p><br><p><img src="https://habrastorage.org/webt/69/vc/dw/69vcdwy1-vgf2fvclawn6gbbfg8.png"></p><br><p>  Une autre histoire raconte le volage d'Alice, qui n'a pas voulu continuer l'échange atomique après que Bob a créé le contrat.  Scénario alternatif: Alice a perdu la clé et ne peut pas le faire: </p><br><p><img src="https://habrastorage.org/webt/u2/ab/px/u2abpxzaey8qdfotjdrcswduroq.png"></p><br><p>  Bob attend un certain temps pour bloquer de l'argent (il est généralement inférieur à celui d'Alice, de sorte qu'Alice ne retire pas l'argent de Bob à la dernière minute, puis ne retourne pas le sien; par exemple, 24 heures).  Alice rend son argent après son timelock. </p><br><p><img src="https://habrastorage.org/webt/wl/ij/p-/wlijp-qfuo2p7dlqdxycxnhchg0.png"></p><br><h1 id="zaklyuchenie">  Conclusion </h1><br><p>  Les échanges atomiques sont très pratiques pour les échanges point à point, contournant les échanges et les intermédiaires.  Les participants s'engagent à ne payer qu'une commission pour l'envoi des transactions. </p><br><p>  En résumé, dans l'échange entre A et C sur les blockchains B1 et B2, les étapes suivantes peuvent être distinguées: </p><br><ol><li>  initialisation du contrat sur B1 par le participant A; </li><li>  écoute d'un contrat sur B1 par la partie C; </li><li>  initialisation du contrat sur B2 par le participant C; </li><li>  Écoute d'un contrat B2 par A; </li><li>  fournir une clé et retirer de l'argent à B2 par le participant A; </li><li>  obtenir une clé sur B2 par le participant C; </li><li>  Retrait d'argent à B1 par la partie S. </li></ol><br><p>  La technologie est nouvelle, mais est déjà activement introduite.  Peut-être que dans un proche avenir, elle sera en mesure de remplacer le centralisé et donc idéologiquement étranger à l'échange de blockchain. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr458646/">https://habr.com/ru/post/fr458646/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr458634/index.html">«D̶o̶n̶'̶t be evil» ou ce que Facebook nous cache</a></li>
<li><a href="../fr458636/index.html">Cassettes vidéo de mitap DevLeads du bureau Tutu.ru</a></li>
<li><a href="../fr458638/index.html">Projet Intel oneAPI: de nombreuses architectures, une API</a></li>
<li><a href="../fr458640/index.html">Trouver un long tableau de bord</a></li>
<li><a href="../fr458642/index.html">Théorie au lieu d'heuristique: s'améliorer en tant que développeurs frontend</a></li>
<li><a href="../fr458648/index.html">CI / CD avec AWS et Bamboo</a></li>
<li><a href="../fr458650/index.html">Cyber ​​Challenge. Un nouveau niveau. Concours en ligne de Rostelecom Solar</a></li>
<li><a href="../fr458652/index.html">RamblerFront et Meetup # 7</a></li>
<li><a href="../fr458654/index.html">Le virus Lurk a piraté des banques alors qu'il était écrit par des employés ordinaires</a></li>
<li><a href="../fr458658/index.html">Passer des machines virtuelles aux conteneurs LXC: raisons, avantages et instructions prêtes à l'emploi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>