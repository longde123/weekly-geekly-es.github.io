<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶ç ü•ß üë®‚Äçüëß‚Äçüë¶ Kodein. Die Grundlagen üïß üë©‚Äçüíª üï∫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich habe keine verst√§ndlichen Anleitungen f√ºr diejenigen gefunden, Kodein zum ersten Mal gesehen haben, und die Dokumentation ist nicht an allen Stell...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kodein. Die Grundlagen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431696/"> Ich habe keine verst√§ndlichen Anleitungen f√ºr diejenigen gefunden, <code>Kodein</code> zum ersten Mal gesehen haben, und die Dokumentation ist nicht an allen Stellen transparent und konsistent. <code>Kodein</code> m√∂chte ich die Hauptfunktionen der Bibliothek mit Ihnen teilen.  Einige Bibliotheksfunktionen werden ver√∂ffentlicht, dies ist jedoch im Grunde der erweiterte Teil.  Hier finden Sie alles, um normal zu beginnen und Abh√§ngigkeiten mit <code>Kodein</code> implementieren, w√§hrend Sie den Artikel lesen.  Der Artikel basiert auf <code>Kodein 5.3.0</code> , da f√ºr <code>Kodein 6.0.0</code> die <code>Support Library 28</code> oder <code>AndroidX</code> und keinesfalls jeder zu ihnen wechseln wird, da viele Bibliotheken von Drittanbietern noch keine kompatiblen Versionen anbieten. <br><img src="https://habrastorage.org/webt/uj/ve/am/ujveamkhrxko4wle8mcfugfzjvc.png"><br><a name="habracut"></a><br>  <code>Kodein</code> ist eine Bibliothek zur Implementierung der Abh√§ngigkeitsinjektion (DI).  Wenn Sie mit diesem Konzept nicht vertraut sind, lesen Sie den Anfang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">des Dagger2-Artikels</a> , in dem der Autor die theoretischen Aspekte von DI kurz erl√§utert. <br><br>  In diesem Artikel werden wir alles am Beispiel von Android betrachten, aber laut den Entwicklern verh√§lt sich Kodein auf allen von Kotlin unterst√ºtzten Plattformen (JVM, Android, JS, Native) gleich. <br><br><h3>  Installation </h3><br>  Aufgrund der Tatsache, dass Java √ºber eine <code>type erasure</code> , tritt ein Problem auf - der Compiler l√∂scht den generischen Typ.  Auf Bytecode-Ebene sind <code>List&lt;String&gt;</code> und <code>List&lt;Date&gt;</code> nur <code>List</code> .  Es gibt immer noch eine M√∂glichkeit, Informationen √ºber generische Typen zu erhalten, aber es wird viel kosten und nur unter JVM und Android funktionieren.  In diesem Zusammenhang schlagen die <code>Kodein</code> Entwickler vor, eine von zwei Abh√§ngigkeiten zu verwenden: Eine empf√§ngt Informationen √ºber verallgemeinerte Typen ( <code>kodein-generic</code> ) w√§hrend der Arbeit und die andere nicht ( <code>kodein-erased</code> ).  Wenn Sie beispielsweise <code>kodein-erased</code> <code>List&lt;String&gt;</code> und <code>List&lt;Date</code> &gt; als <code>List&lt;*&gt;</code> speichern, und wenn Sie <code>kodein-generic</code> alles zusammen mit dem angegebenen Typ gespeichert, <code>kodein-generic</code> als <code>List&lt;String&gt;</code> und <code>List&lt;Date&gt;</code> jeweils. <br><br>  Wie w√§hle ich? <br><br>  Schreiben Sie <b>nicht</b> unter die JVM - verwenden Sie <code>kodein-erased</code> , sonst ist es unm√∂glich. <br>  Schreiben Sie unter die JVM, und das Leistungsproblem ist f√ºr Sie sehr wichtig. Sie k√∂nnen <code>kodein-erased</code> verwenden. <code>kodein-erased</code> Sie jedoch vorsichtig, diese Erfahrung kann im schlechten Sinne dieser W√∂rter unerwartet sein.  Wenn Sie eine regul√§re Anwendung ohne besondere Leistungsanforderungen <code>kodein-generic</code> , verwenden Sie <code>kodein-generic</code> . <br><br>  Wenn Sie √ºber die Auswirkungen von DI auf die Leistung nachdenken, wird der Gro√üteil der Abh√§ngigkeiten meistens einmal erstellt oder die Abh√§ngigkeiten werden f√ºr die wiederholte Wiederverwendung erstellt. Es ist unwahrscheinlich, dass Sie mit solchen Aktionen die Leistung Ihrer Anwendung erheblich beeintr√§chtigen k√∂nnen. <br><br>  Installieren Sie also: <br><br>  Zuerst sollte in build.gradle unter den Repositorys jcenter () sein, wenn es nicht vorhanden ist - add. <br><br><pre> <code class="plaintext hljs">buildscript { repositories { jcenter() } }</code> </pre><br>  F√ºgen Sie als N√§chstes im Abh√§ngigkeitsblock eine der oben genannten grundlegenden Abh√§ngigkeiten hinzu: <br><br><pre> <code class="plaintext hljs">implementation "org.kodein.di:kodein-di-generic-jvm:$version"</code> </pre><br><pre> <code class="plaintext hljs">implementation "org.kodein.di:kodein-di-erased-jvm:$version"</code> </pre><br>  Da es sich um Android handelt, wird es mehr Abh√§ngigkeiten geben.  Sie k√∂nnen nat√ºrlich darauf verzichten, Kodein funktioniert normal, aber warum sollten Sie zus√§tzliche Funktionen ablehnen, die f√ºr Android n√ºtzlich sind (ich werde am Ende des Artikels dar√ºber sprechen)?  Sie haben die Wahl, aber ich schlage vor, hinzuzuf√ºgen. <br><br>  Hier gibt es auch Optionen. <br><br>  Erstens verwenden Sie <code>SupportLibrary</code> <br><br><pre> <code class="plaintext hljs">implementation "org.kodein.di:kodein-di-framework-android-core:$version"</code> </pre><br>  Die zweite - Verwendung <br><br><pre> <code class="plaintext hljs">implementation "org.kodein.di:kodein-di-framework-android-support:$version"</code> </pre><br>  Drittens - Sie verwenden AndroidX <br><br><pre> <code class="plaintext hljs">implementation "org.kodein.di:kodein-di-framework-android-x:$version"</code> </pre><br><h3>  Wir beginnen Abh√§ngigkeiten zu erstellen </h3><br>  Mit <code>Dagger2</code> bin ich es gewohnt, Abh√§ngigkeiten beim Start der Anwendung in der Anwendungsklasse zu erstellen und zu initialisieren. <br><br>  Bei Kodein geschieht dies folgenderma√üen: <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyApp</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Application</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> } }</code> </pre><br>  Abh√§ngigkeitserkl√§rungen beginnen immer mit <br><br><pre> <code class="kotlin hljs">bind&lt;TYPE&gt;() with</code> </pre><br><h4>  Tags </h4><br>  Das Kodein-Abh√§ngigkeits-Tagging ist eine √§hnliche Funktion wie <code>Qualifier</code> von <code>Dagger2</code> .  In <code>Dagger2</code> m√ºssen Sie entweder einen separaten <code>Qualifier</code> <code>@Named("someTag")</code> oder <code>@Named("someTag")</code> , der tats√§chlich auch <code>Qualifier</code> .  Das Endergebnis ist einfach: Auf diese Weise unterscheiden Sie zwei Abh√§ngigkeiten desselben Typs.  Beispielsweise m√ºssen Sie je nach Situation den <code>ontext</code> Anwendung oder einer bestimmten <code>Activity</code> abrufen. Daher m√ºssen Sie Tags angeben, um Abh√§ngigkeiten daf√ºr zu deklarieren.  <code>Kodein</code> k√∂nnen <code>Kodein</code> eine Abh√§ngigkeit ohne Tag deklarieren. <code>Kodein</code> die <code>Kodein</code> Wenn Sie das Tag beim Empfang der Abh√§ngigkeit nicht angeben, erhalten wir es, die anderen m√ºssen markiert werden, und wenn die Abh√§ngigkeit empfangen wird, muss das Tag angegeben werden. <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { bind&lt;Context&gt;() with ... bind&lt;Context&gt;(tag = <span class="hljs-string"><span class="hljs-string">"main_activity"</span></span>) with ... bind&lt;Context&gt;(tag = <span class="hljs-string"><span class="hljs-string">"sale_activity"</span></span>) with ... }</code> </pre><br>  Der <code>tag</code> Parameter ist vom Typ <code>Any</code> , sodass Sie mehr als nur Zeichenfolgen verwenden k√∂nnen.  Denken Sie jedoch daran, dass Klassen, die als Tags verwendet werden, die Methoden <code>equals</code> und <code>hashCode</code> implementieren m√ºssen.  Es ist immer erforderlich, ein Tag als benanntes Argument an eine Funktion zu √ºbergeben, unabh√§ngig davon, ob Sie eine Abh√§ngigkeit erstellen oder empfangen. <br><br><h3>  Arten der Abh√§ngigkeitsinjektion </h3><br>  Es gibt verschiedene M√∂glichkeiten, Abh√§ngigkeiten in <code>Kodein</code> bereitzustellen, <code>Kodein</code> mit dem Wesentlichen - Erstellen von Singletones.  Der Singleton wird im Rahmen der erstellten Instanz von <code>Kodein</code> . <br><br><h4>  Einf√ºhrung in Singleton </h4><br>  Beginnen wir mit einem Beispiel: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { bind&lt;IMyDatabase&gt;() with singleton { RoomDb() } }</code> </pre><br>  Daher stellen wir <code>IMyDatabase</code> , hinter der eine Instanz von <code>RoomDb</code> versteckt wird.  Eine Instanz von <code>RoomDb</code> wird bei der ersten Anforderung der Abh√§ngigkeit <code>Kodein</code> erst neu <code>Kodein</code> wenn eine neue <code>Kodein</code> Instanz <code>Kodein</code> .  Ein Singleton wird synchronisiert erstellt, kann jedoch bei Bedarf unsynchronisiert werden.  Dies erh√∂ht die Produktivit√§t, aber Sie m√ºssen die folgenden Risiken verstehen. <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { bind&lt;IMyDatabase&gt;() with singleton(sync = <span class="hljs-literal"><span class="hljs-literal">false</span></span>) { RoomDb() } }</code> </pre><br>  Wenn Sie eine Abh√§ngigkeitsinstanz nicht beim ersten Aufruf, sondern unmittelbar nach dem Erstellen der <code>Kodein</code> Instanz erstellen m√ºssen, verwenden Sie eine andere Funktion: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { bind&lt;IMyDatabase&gt;() with eagerSingleton { RoomDb() } }</code> </pre><br><h4>  St√§ndig eine neue Instanz der Abh√§ngigkeit erstellen </h4><br>  Es ist m√∂glich, keine Singletones zu erstellen, sondern st√§ndig, wenn auf eine Abh√§ngigkeit zugegriffen wird, um eine neue Instanz davon zu erhalten.  Hierzu wird die <code>provider</code> Funktion verwendet: <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { bind&lt;IMainPresenter&gt;() with provider { QuantityPresenter() } }</code> </pre><br>  In diesem Fall wird jedes Mal, wenn wir eine <code>IMainPresenter</code> Abh√§ngigkeit <code>IMainPresenter</code> , eine neue Instanz von <code>QuantityPresenter</code> erstellt. <br><br><h4>  Erstellen Sie st√§ndig eine neue Instanz der Abh√§ngigkeit und √ºbergeben Sie die Parameter an den Konstruktor </h4><br>  Sie k√∂nnen jedes Mal eine neue Instanz davon abrufen, wenn Sie eine Abh√§ngigkeit hinzuf√ºgen, wie im vorherigen Beispiel, aber die Parameter zum Erstellen der Abh√§ngigkeit angeben.  Parameter k√∂nnen maximal <b>5 sein</b> .  Verwenden Sie f√ºr dieses Verhalten die <code>factory</code> Methode. <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { bind&lt;IColorPicker&gt;() with factory { r: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, g: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, b: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, a: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> -&gt; RgbColorPicker(r, g, b, a) } }</code> </pre><br><h4>  Jedes Mal, wenn wir eine zwischengespeicherte Instanz erstellen, h√§ngt dies von den Parametern ab </h4><br>  Wenn Sie den vorherigen Absatz lesen, denken Sie vielleicht, dass es sch√∂n w√§re, nicht jedes Mal eine neue Instanz gem√§√ü den √ºbergebenen Parametern zu empfangen, sondern dieselbe Instanz der Abh√§ngigkeit von demselben Parameter zu erhalten. <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { bind&lt;IRandomIntGenerator&gt;() with multiton { from: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, to: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> -&gt; IntRandom(from, to) } }</code> </pre><br>  Wenn wir im obigen Beispiel zum ersten Mal die Abh√§ngigkeit mit den Parametern <code>5</code> und <code>10</code> erstellen wir eine neue Instanz von <code>IntRandom(5, 10)</code> . Wenn wir die Abh√§ngigkeit erneut mit denselben Parametern aufrufen, erhalten wir die zuvor erstellte Instanz.  Somit wird eine <code>map</code> von Singleton mit verz√∂gerter Initialisierung erhalten.  Die Argumente sind, wie im Fall der <code>factory</code> maximal <b>5</b> . <br><br>  Wie bei Singletones k√∂nnen Sie hier die Synchronisation deaktivieren. <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { bind&lt;IRandomIntGenerator&gt;() with multiton(sync = <span class="hljs-literal"><span class="hljs-literal">false</span></span>) { from: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, to: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> -&gt; IntRandom(from, to) } }</code> </pre><br><h4>  Verwenden von weichen und schwachen Links in Kodein </h4><br>  Wenn Sie Abh√§ngigkeiten mit <code>singleton</code> oder <code>multiton</code> bereitstellen <code>multiton</code> Sie den Referenztyp f√ºr die gespeicherte Instanz angeben.  Im √ºblichen Fall, den wir oben betrachtet haben, wird dies die √ºbliche <code>strong</code> Verbindung sein.  Es ist jedoch m√∂glich, <code>soft</code> und <code>weak</code> Glieder zu verwenden.  Wenn Sie mit diesen Konzepten noch nicht vertraut sind, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">schauen Sie hier</a> . <br><br>  Daher werden Ihre Singletones m√∂glicherweise als Teil des Anwendungslebenszyklus neu erstellt oder nicht. <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { bind&lt;IMyMap&gt;() with singleton(ref = softReference) { WorldMap() } bind&lt;IClient&gt;() with singleton(ref = weakReference) { id -&gt; clientFromDB(id) } }</code> </pre><br><h4>  Separater Singleton f√ºr jeden Stream </h4><br>  Dies ist derselbe Singleton, aber f√ºr jeden Thread, der eine Abh√§ngigkeit anfordert, wird ein Singleton erstellt.  Verwenden Sie dazu den bekannten Parameter <code>ref</code> . <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { bind&lt;Cache&gt;() with singleton(ref = threadLocal) { LRUCache(<span class="hljs-number"><span class="hljs-number">16</span></span> * <span class="hljs-number"><span class="hljs-number">1024</span></span>) } }</code> </pre><br><h4>  Konstanten als einbettbare Abh√§ngigkeiten </h4><br>  Sie k√∂nnen Konstanten als Abh√§ngigkeiten angeben.  In der Dokumentation wird darauf <code>Kodein</code> , dass Sie mit <code>Kodein</code> Konstanten einfacher Typen ohne Vererbung oder Schnittstellen bereitstellen m√ºssen, z. B. Grundelemente oder Datenklassen. <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { constant(tag = <span class="hljs-string"><span class="hljs-string">"maxThread"</span></span>) with <span class="hljs-number"><span class="hljs-number">8</span></span> constant(tag = <span class="hljs-string"><span class="hljs-string">"serverURL"</span></span>) with <span class="hljs-string"><span class="hljs-string">"https://my.server.url"</span></span></code> </pre><br><h4>  Erstellen Sie Abh√§ngigkeiten, ohne den Typ zu √§ndern </h4><br>  Beispielsweise m√∂chten Sie die Abh√§ngigkeit als Singleton bereitstellen, sie jedoch nicht hinter der Schnittstelle ausblenden.  Sie k√∂nnen den Typ einfach nicht angeben, wenn Sie <code>bind</code> aufrufen und <code>from</code> anstelle von <code>with</code> . <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { bind() from singleton { Gson() }</code> </pre><br>  Die Abh√§ngigkeit im obigen Beispiel hat den R√ºckgabetyp der Funktion, <code>Gson</code> es wird eine <code>Gson</code> vom <code>Gson</code> Typ <code>Gson</code> . <br><br><h4>  Erstellen Sie Unterklassenabh√§ngigkeiten einer Oberklasse oder Schnittstelle </h4><br>  <code>Kodein</code> k√∂nnen <code>Kodein</code> Abh√§ngigkeiten f√ºr die Nachkommen einer bestimmten Klasse oder von Klassen, die eine einzelne Schnittstelle implementieren, auf unterschiedliche Weise bereitstellen. <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { bind&lt;Animal&gt;().subTypes() with { animalType -&gt; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (animalType.jvmType) { Dog::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">eagerSingleton</span></span></span><span class="hljs-class"> </span></span>{ Dog() } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; provider { WildAnimal(animalType) } } }</code> </pre><br>  Die <code>Animal</code> Klasse kann entweder eine Oberklasse oder eine Schnittstelle sein. Unter Verwendung von <code>.subtypes</code> wir <code>animalType</code> mit dem <code>TypeToken&lt;*&gt;</code> , von dem wir bereits die Java-Klasse <code>TypeToken&lt;*&gt;</code> und abh√§ngig davon die Abh√§ngigkeit auf unterschiedliche Weise bereitstellen k√∂nnen.  Diese Funktion kann n√ºtzlich sein, wenn Sie <code>TypeToken</code> oder seine Ableitungen als Konstruktorparameter f√ºr eine Reihe von F√§llen verwenden.  Auf diese Weise k√∂nnen Sie auch unn√∂tigen Code mit derselben Abh√§ngigkeitserstellung f√ºr verschiedene Typen vermeiden. <br><br><h4>  Erstellen Sie Abh√§ngigkeiten, die andere Abh√§ngigkeiten als Parameter ben√∂tigen </h4><br>  Meistens erstellen wir nicht nur eine Klasse ohne Parameter als Abh√§ngigkeit, sondern eine Klasse, an die wir Parameter an den Konstruktor √ºbergeben m√ºssen. <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductGateway</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> api: IProductApi, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dispatchers: IDispatchersContainer) : IProductGateway</code> </pre><br>  Um eine Klasse mit Abh√§ngigkeiten zu erstellen, die zuvor in <code>Kodein</code> aus, einen Funktionsaufruf instance () als Parameter zu √ºbergeben.  In diesem Fall ist die Reihenfolge der Erstellung nicht wichtig. <br><br><pre> <code class="kotlin hljs">bind&lt;IDispatchersContainer&gt;() with singleton { DispatchersContainer() } bind&lt;IProductGateway&gt;() with singleton { ProductGateway(instance(), instance()) } bind&lt;IProductApi&gt;() with singleton { ProductApi() }</code> </pre><br>  Anstelle von <code>instance()</code> es zu Aufrufen von <code>provider()</code> oder <code>factory()</code> . Wir werden uns diese Methoden im Abschnitt zum Abrufen und Implementieren von Abh√§ngigkeiten genauer ansehen. <br><br><h4>  Erstellen Sie eine Abh√§ngigkeit, indem Sie die zuvor erstellte Abh√§ngigkeitsmethode aufrufen </h4><br>  Es klingt nicht sehr gut, aber Sie k√∂nnen die <code>instance&lt;TYPE&gt;</code> aufrufen, um eine Klasse <code>instance&lt;TYPE&gt;</code> , die wir bereits irgendwo bereitstellen, und die Methode dieser Klasse aufrufen, um eine neue Abh√§ngigkeit zu erhalten. <br><br><pre> <code class="kotlin hljs">bind&lt;DataSource&gt;() with singleton { MySQLDataSource() } bind&lt;Connection&gt;() with provider { instance&lt;DataSource&gt;().openConnection() }</code> </pre><br><h3>  Module </h3><br>  Mit <code>Dagger2</code> bin ich es <code>Dagger2</code> , <code>Dagger2</code> .  In <code>Kodein</code> sieht auf den ersten Blick nicht alles sehr gut aus.  Sie m√ºssen viele Abh√§ngigkeiten direkt in der <code>Application</code> erstellen, und ich pers√∂nlich mag es nicht wirklich.  Es gibt jedoch eine L√∂sung: Mit <code>Kodein</code> k√∂nnen Sie auch Module erstellen und diese bei Bedarf an den entsprechenden Stellen verbinden. <br><br><pre> <code class="kotlin hljs"> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> appModule = Kodein.Module(<span class="hljs-string"><span class="hljs-string">"app"</span></span>) { bind&lt;Gson&gt;() with singleton { provideGson() } bind&lt;HttpClient&gt;() with singleton { provideHttpClient() } } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(appModule) bind&lt;ISchedulersContainer&gt;() with singleton { SchedulersContainer() } <span class="hljs-comment"><span class="hljs-comment">//   }</span></span></code> </pre><br>  Aber seien Sie vorsichtig, Module sind nur Container, die Methoden zum Abrufen von Abh√§ngigkeiten deklarieren. Sie selbst erstellen keine Klassen.  Wenn Sie daher den Empfang der Abh√§ngigkeit als Singleton im Modul deklarieren und dieses Modul dann in zwei verschiedene Instanzen von <code>Kodein</code> importieren, erhalten Sie zwei verschiedene Singuletts, eines pro Instanz von <code>Kodein</code> . <br><br>  Au√üerdem muss der Name jedes Moduls eindeutig sein.  Wenn Sie jedoch ein Modul aus einem anderen Projekt importieren m√ºssen, ist es schwierig, die Eindeutigkeit des Namens zu gew√§hrleisten. Dazu k√∂nnen Sie das Modul umbenennen oder seinem Namen ein Pr√§fix hinzuf√ºgen. <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(apiModule.copy(name = <span class="hljs-string"><span class="hljs-string">"firstAPI"</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(secondApiModule.copy(prefix = <span class="hljs-string"><span class="hljs-string">"secondAPI-"</span></span>))</code> </pre><br>  Ich bin es gewohnt zu arbeiten, wenn die Module voneinander abh√§ngig sind und eine Art Hierarchie bilden.  <code>Kodein</code> k√∂nnen jedes Modul einmal in <code>Kodein</code> importieren. Wenn Sie also versuchen, zwei Module mit denselben abh√§ngigen Modulen in ein <code>Kodein</code> zu importieren, st√ºrzt die Anwendung ab.  Die L√∂sung ist einfach: Sie m√ºssen zum <code>importOnce(someModule)</code> Aufruf <code>importOnce(someModule)</code> , mit dem √ºberpr√ºft wird, ob das gleichnamige Modul zuvor importiert wurde, und bei Bedarf importiert werden. <br><br>  In solchen F√§llen st√ºrzt die Anwendung beispielsweise ab: <br><br><pre> <code class="kotlin hljs"> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> appModule = Kodein.Module(<span class="hljs-string"><span class="hljs-string">"app"</span></span>) { bind&lt;Gson&gt;() with singleton { provideGson() } } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> secondModule = Kodein.Module(<span class="hljs-string"><span class="hljs-string">"second"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(appModule) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> thirdModule = Kodein.Module(<span class="hljs-string"><span class="hljs-string">"third"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(appModule) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(secondModule) <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(thirdModule) }</code> </pre><br><pre> <code class="kotlin hljs"> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> appModule = Kodein.Module(<span class="hljs-string"><span class="hljs-string">"app"</span></span>) { bind&lt;Gson&gt;() with singleton { provideGson() } } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> secondModule = Kodein.Module(<span class="hljs-string"><span class="hljs-string">"second"</span></span>) { importOnce(appModule) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> thirdModule = Kodein.Module(<span class="hljs-string"><span class="hljs-string">"third"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(appModule) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(secondModule) <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(thirdModule) }</code> </pre><br>  Wenn der <code>importOnce</code> Aufruf jedoch bei einem zweiten Verbindungsversuch ausgef√ºhrt wird, funktioniert alles.  Seien Sie aufmerksam. <br><br><pre> <code class="kotlin hljs"> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> appModule = Kodein.Module(<span class="hljs-string"><span class="hljs-string">"app"</span></span>) { bind&lt;Gson&gt;() with singleton { provideGson() } } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> secondModule = Kodein.Module(<span class="hljs-string"><span class="hljs-string">"second"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(appModule) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> thirdModule = Kodein.Module(<span class="hljs-string"><span class="hljs-string">"third"</span></span>) { importOnce(appModule) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(secondModule) <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(thirdModule) }</code> </pre><br><h4>  Vererbung </h4><br>  Wenn Sie dasselbe Modul zweimal verwenden, werden unterschiedliche Abh√§ngigkeiten erstellt. Wie steht es jedoch mit der Vererbung und dem Implementierungsverhalten, das den <code>Subcomponents</code> in <code>Dagger2</code> ?  Alles ist einfach, Sie m√ºssen nur von der <code>Kodein</code> Instanz erben und erhalten Zugriff auf alle Abh√§ngigkeiten des Elternteils im Erben. <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { bind&lt;ISchedulersContainer&gt;() with singleton { SchedulersContainer() } <span class="hljs-comment"><span class="hljs-comment">//   } val subKodein = Kodein { extend(kodein) //   }</span></span></code> </pre><br><h4>  Neudefinition </h4><br>  Standardm√§√üig k√∂nnen Sie die Abh√§ngigkeit nicht √ºberschreiben, da Benutzer sonst verr√ºckt werden und nach Gr√ºnden suchen, warum die Anwendung nicht ordnungsgem√§√ü funktioniert.  Dies ist jedoch mit einem zus√§tzlichen Parameter der <code>bind</code> .  Diese Funktionalit√§t ist beispielsweise zum Organisieren von Tests hilfreich. <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { bind&lt;Api&gt;() with singleton { ApiImpl() } <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> bind&lt;Api&gt;(overrides = <span class="hljs-literal"><span class="hljs-literal">true</span></span>) with singleton { OtherApiImpl() } }</code> </pre><br>  Standardm√§√üig k√∂nnen Module und ihre Abh√§ngigkeiten bereits im <code>Kodein</code> Objekt deklarierte Abh√§ngigkeiten nicht √ºberschreiben. Beim Importieren eines Moduls k√∂nnen Sie jedoch angeben, dass vorhandene Abh√§ngigkeiten seine Abh√§ngigkeiten √ºberschreiben k√∂nnen, und in diesem Modul k√∂nnen Sie bereits Abh√§ngigkeiten angeben, die andere √ºberschreiben k√∂nnen. <br><br>  Es klingt nicht sehr klar, verwenden wir Beispiele.  In diesen F√§llen st√ºrzt die Anwendung ab: <br><br><pre> <code class="kotlin hljs"> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> appModule = Kodein.Module(<span class="hljs-string"><span class="hljs-string">"app"</span></span>) { bind&lt;Gson&gt;() with singleton { provideGson() } } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { bind&lt;Gson&gt;() with singleton { provideGson() } <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(appModule) }</code> </pre><br><pre> <code class="kotlin hljs"> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> appModule = Kodein.Module(<span class="hljs-string"><span class="hljs-string">"app"</span></span>) { bind&lt;Gson&gt;() with singleton { provideGson() } } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { bind&lt;Gson&gt;() with singleton { provideGson() } <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(appModule, allowOverride = <span class="hljs-literal"><span class="hljs-literal">true</span></span>) }</code> </pre><br>  Dabei √ºberschreibt die Modulabh√§ngigkeit die im <code>Kodein</code> Objekt deklarierte Abh√§ngigkeit. <br><br><pre> <code class="kotlin hljs"> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> appModule = Kodein.Module(<span class="hljs-string"><span class="hljs-string">"app"</span></span>) { bind&lt;Gson&gt;(overrides = <span class="hljs-literal"><span class="hljs-literal">true</span></span>) with singleton { provideGson() } } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { bind&lt;Gson&gt;() with singleton { provideGson() } <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(appModule, allowOverride = <span class="hljs-literal"><span class="hljs-literal">true</span></span>) }</code> </pre><br>  Wenn Sie jedoch wirklich m√∂chten und verstehen, was Sie tun, k√∂nnen Sie ein Modul erstellen, das bei identischen Abh√§ngigkeiten mit dem <code>Kodein</code> Objekt diese neu definiert und die Anwendung nicht abst√ºrzt.  Wir verwenden den Parameter <code>allowSilentOverride</code> f√ºr das Modul. <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> testModule = Kodein.Module(name = <span class="hljs-string"><span class="hljs-string">"test"</span></span>, allowSilentOverride = <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { bind&lt;EmailClient&gt;() with singleton { MockEmailClient() } }</code> </pre><br>  In der Dokumentation werden komplexere Situationen mit Vererbung und Neudefinition von Abh√§ngigkeiten sowie mit dem Kopieren von Abh√§ngigkeiten bei Erben er√∂rtert. Diese Situationen werden hier jedoch nicht ber√ºcksichtigt. <br><br><h3>  Abh√§ngigkeiten abrufen und einf√ºgen </h3><br>  Schlie√ülich haben wir herausgefunden, wie man Abh√§ngigkeiten auf viele Arten deklariert. Es ist Zeit herauszufinden, wie man sie in ihre Klassen bringt. <br><br>  <code>Kodein</code> Entwickler teilen zwei M√∂glichkeiten, um Abh√§ngigkeiten zu erhalten - <code>injection</code> und <code>retieval</code> .  Kurz gesagt, <code>injection</code> ist, wenn die Klasse alle Abh√§ngigkeiten empf√§ngt, wenn sie erstellt wird, dh im Konstruktor, und <code>retrieval</code> ist, wenn die Klasse selbst daf√ºr verantwortlich ist, ihre Abh√§ngigkeiten zu erhalten. <br><br>  Wenn Sie <code>injection</code> wei√ü Ihre Klasse nichts √ºber <code>Kodein</code> und der Code in der Klasse ist sauberer. Wenn Sie jedoch <code>retrieval</code> , haben Sie die M√∂glichkeit, Abh√§ngigkeiten flexibler zu verwalten.  Beim <code>retrieval</code> alle Abh√§ngigkeiten nur zum Zeitpunkt der ersten Berufung auf die Abh√§ngigkeit tr√§ge erhalten. <br><br><h4>  <code>Kodein</code> Methoden zur Verwendung von Abh√§ngigkeiten </h4><br>  Eine Instanz der <code>Kodein</code> Klasse verf√ºgt √ºber drei Methoden, die eine Abh√§ngigkeit, eine Abh√§ngigkeitsfactory oder einen Abh√§ngigkeitsanbieter zur√ºckgeben - <code>instance()</code> , <code>factory()</code> bzw. <code>provider()</code> .  Wenn Sie also eine Abh√§ngigkeit √ºber eine <code>factory</code> oder einen <code>provider</code> bereitstellen, k√∂nnen Sie nicht nur das Ergebnis der Funktionsausf√ºhrung, sondern auch die Funktion selbst empfangen.  Denken Sie daran, dass Sie Tags in allen Variationen verwenden k√∂nnen. <br><br><pre> <code class="kotlin hljs"> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { bind&lt;BigDecimal&gt;() with factory { value: String -&gt; BigDecimal(value) } bind&lt;Random&gt;() with provider { Random() } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> number: BigDecimal <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> instance(arg = <span class="hljs-string"><span class="hljs-string">"23.87"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> numberFactory: (value: String) -&gt; BigDecimal <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> factory() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> random: Random <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> instance() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> randomProvider: () -&gt; Random <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> provider()</code> </pre><br><h4>  Abh√§ngigkeitsinjektion durch Konstruktor </h4><br>  Wie Sie bereits verstanden haben, geht es um <code>injection</code> .  Zum Implementieren m√ºssen Sie zuerst alle Abh√§ngigkeiten der Klasse in ihren Konstruktor √ºbernehmen und dann eine Instanz der Klasse erstellen, indem Sie <code>kodein.newInstance</code> aufrufen <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductApi</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> client: HttpClient, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> gson: Gson) : IProductApi <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Application</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { bind&lt;Gson&gt;() with singleton { provideGson() } bind&lt;HttpClient&gt;() with singleton { provideHttpClient() } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> productApi: IProductApi <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.newInstance { ProductApi(instance(), instance()) } }</code> </pre><br><h4>  Abh√§ngigkeitsinjektion in nullbaren Eigenschaften </h4><br>  M√∂glicherweise wissen Sie nicht, ob eine Abh√§ngigkeit deklariert wurde.  Wenn die Abh√§ngigkeit in der <code>Kodein</code> Instanz nicht deklariert ist, f√ºhrt der Code aus dem obigen Beispiel zu einer <code>Kodein.NotFoundException</code> .  Wenn Sie als Ergebnis eine <code>null</code> m√∂chten und keine Abh√§ngigkeit besteht, gibt es hierf√ºr drei Hilfsfunktionen: <code>instanceOrNull()</code> , <code>factoryOrNull()</code> und <code>providerOrNull()</code> . <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductApi</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> client: HttpClient?, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> gson: Gson) : IProductApi <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Application</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { bind&lt;Gson&gt;() with singleton { provideGson() } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> productApi: IProductApi <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.newInstance { ProductApi(instanceOrNull(), instance()) } }</code> </pre><br><h4>  Holen Sie sich Abh√§ngigkeiten innerhalb der Klasse. </h4><br>  Wie bereits erw√§hnt, ist in dem Fall, in dem der <code>retrieval</code> , die Initialisierung aller Abh√§ngigkeiten standardm√§√üig verz√∂gert.  Auf diese Weise k√∂nnen Sie Abh√§ngigkeiten nur dann abrufen, wenn sie ben√∂tigt werden, und Abh√§ngigkeiten in den vom System erstellten Klassen abrufen. <br><br>  <code>Activity</code> , <code>Fragment</code> und andere Klassen mit ihrem eigenen Lebenszyklus, es geht nur um sie. <br><br>  Um Abh√§ngigkeiten in <code>Activity</code> zu implementieren <code>Activity</code> ben√∂tigen wir nur einen Link zu einer Instanz von Kodein, wonach wir bereits bekannte Methoden verwenden k√∂nnen.  Tats√§chlich haben Sie oben bereits Beispiele f√ºr den <code>retrieval</code> . Sie m√ºssen lediglich eine Eigenschaft deklarieren und an eine der folgenden Funktionen delegieren: <code>instance()</code> , <code>factory()</code> oder <code>provider()</code> <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> number: BigDecimal <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.instance(arg = <span class="hljs-string"><span class="hljs-string">"23.87"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> numberFactory: (value: String) -&gt; BigDecimal <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.factory() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> random: Random? <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.instanceOrNull() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> randomProvider: (() -&gt; Random)? <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.providerOrNull()</code> </pre><br><h4>  Parameter an Fabriken √ºbergeben </h4><br>  Sie haben bereits gesehen, dass es ausreicht, den Parameter <code>arg</code> der <code>arg</code> zu verwenden, um einen Parameter an die Factory zu √ºbergeben.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aber was ist, wenn es mehrere Parameter gibt (ich habe bereits gesagt, dass es in einer Fabrik bis zu </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Parameter geben kann </font><font style="vertical-align: inherit;">)? </font><font style="vertical-align: inherit;">Sie m√ºssen nur eine </font></font><code>arg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klasse </font><font style="vertical-align: inherit;">an den Parameter √ºbergeben </font></font><code>M</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, der Konstruktoren √ºberladen hat und 2 bis 5 Argumente annehmen kann.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein { bind&lt;IColorPicker&gt;() with factory { r: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, g: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, b: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, a: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> -&gt; RgbColorPicker(r, g, b, a) } } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> picker: IColorPicker <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.instance(arg = M(<span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">211</span></span>, <span class="hljs-number"><span class="hljs-number">175</span></span>, <span class="hljs-number"><span class="hljs-number">215</span></span>))</code> </pre><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Abh√§ngigkeitsinitialisierung erzwingen </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie bereits erw√§hnt, ist die Initialisierung standardm√§√üig verz√∂gert. Sie k√∂nnen jedoch einen Trigger erstellen, ihn an eine Eigenschaft, mehrere Eigenschaften oder eine gesamte Instanz binden </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, nachdem Sie diesen Trigger gedr√ºckt haben, und die Abh√§ngigkeiten werden initialisiert.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myTrigger = KodeinTrigger() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> gson: Gson <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.on(trigger = myTrigger).instance() <span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span> myTrigger.trigger() <span class="hljs-comment"><span class="hljs-comment">//     Gson</span></span></code> </pre><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myTrigger = KodeinTrigger() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodeinWithTrigger = kodein.on(trigger = myTrigger) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> gson: Gson <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodeinWithTrigger.instance() <span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span> myTrigger.trigger() <span class="hljs-comment"><span class="hljs-comment">//        kodeinWithTrigger</span></span></code> </pre><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lazy Kodein Instanzerstellung </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vorher haben wir st√§ndig explizit eine Instanz erstellt </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aber es ist m√∂glich, die Initialisierung dieser Eigenschaft mithilfe einer Klasse zu verschieben </font></font><code>LazyKodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die eine Funktion im Konstruktor √ºbernimmt, die ein Objekt zur√ºckgeben soll </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieser Ansatz kann n√ºtzlich sein, wenn beispielsweise nicht bekannt ist, ob Abh√§ngigkeiten von einer bestimmten Kodein-Instanz √ºberhaupt ben√∂tigt werden.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = LazyKodein { Kodein { bind&lt;BigDecimal&gt;() with factory { value: String -&gt; BigDecimal(value) } bind&lt;Random&gt;() with provider { Random() } } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> number: BigDecimal <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.instance(arg = <span class="hljs-string"><span class="hljs-string">"13.4"</span></span>) <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> number.toPlainString() <span class="hljs-comment"><span class="hljs-comment">//     kodein   </span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ein Aufruf von Kodein.lazy f√ºhrt zu einem √§hnlichen Ergebnis. </font></font><br><br><pre> <code class="kotlin hljs"> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein.lazy { bind&lt;BigDecimal&gt;() with factory { value: String -&gt; BigDecimal(value) } bind&lt;Random&gt;() with provider { Random() } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> number: BigDecimal <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.instance(arg = <span class="hljs-string"><span class="hljs-string">"13.4"</span></span>) <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> number.toPlainString() <span class="hljs-comment"><span class="hljs-comment">//     kodein   </span></span></code> </pre><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kodein verz√∂gerte Initialisierung </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºr die verz√∂gerte Initialisierung ist </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ein Objekt vorhanden </font></font><code>LateInitKodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Sie k√∂nnen dieses Objekt erstellen, die Erstellung von Eigenschaften an es delegieren und nach der Initialisierung des Objekts selbst die Eigenschaft darauf festlegen. </font></font><code>baseKodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Danach k√∂nnen Sie bereits auf die Abh√§ngigkeiten zugreifen.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = LateInitKodein() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> gson: Gson <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.instance() <span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span> kodein.baseKodein = <span class="hljs-comment"><span class="hljs-comment">/*     Kodein */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span> gson.fromJson(someStr)</code> </pre><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ruft alle Instanzen des angegebenen Typs ab </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen Kodein nach einer Instanz des angegebenen Typs und allen seinen Nachkommen im Formular fragen </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Alles ist nur innerhalb des angegebenen Tags. </font><font style="vertical-align: inherit;">Um dies zu tun, gibt es Methoden </font></font><code>allInstances</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>allProviders</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>allFactories</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre> <code class="kotlin hljs"> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { bind&lt;Number&gt;() with singleton { <span class="hljs-built_in"><span class="hljs-built_in">Short</span></span>.MAX_VALUE } bind&lt;<span class="hljs-built_in"><span class="hljs-built_in">Double</span></span>&gt;() with singleton { <span class="hljs-number"><span class="hljs-number">12.46</span></span> } bind&lt;<span class="hljs-built_in"><span class="hljs-built_in">Double</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"someTag"</span></span>) with singleton { <span class="hljs-number"><span class="hljs-number">43.89</span></span> } bind&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;() with singleton { <span class="hljs-number"><span class="hljs-number">4562</span></span> } bind&lt;<span class="hljs-built_in"><span class="hljs-built_in">Float</span></span>&gt;() with singleton { <span class="hljs-number"><span class="hljs-number">136.88f</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> numbers: List&lt;Number&gt; <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.allInstances()</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie in das Protokoll drucken, sehen Sie dort [32767, 136.88, 4562, 12.46]. </font><font style="vertical-align: inherit;">Die Abh√§ngigkeit mit dem Tag ist nicht in der Liste enthalten.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Vereinfachen Sie die Erfassung von Abh√§ngigkeiten mithilfe der KodeinAware-Schnittstelle </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diese Schnittstelle verpflichtet Sie, die type-Eigenschaft zu √ºberschreiben </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und bietet im Gegenzug Zugriff auf alle Funktionen, die der Instanz zur Verf√ºgung stehen </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyApplication</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Application</span></span></span></span>(), KodeinAware { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { bind&lt;Number&gt;() with singleton { <span class="hljs-built_in"><span class="hljs-built_in">Short</span></span>.MAX_VALUE } bind&lt;<span class="hljs-built_in"><span class="hljs-built_in">Double</span></span>&gt;() with singleton { <span class="hljs-number"><span class="hljs-number">12.46</span></span> } bind&lt;<span class="hljs-built_in"><span class="hljs-built_in">Double</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"someTag"</span></span>) with singleton { <span class="hljs-number"><span class="hljs-number">43.89</span></span> } bind&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;() with singleton { <span class="hljs-number"><span class="hljs-number">4562</span></span> } bind&lt;<span class="hljs-built_in"><span class="hljs-built_in">Float</span></span>&gt;() with singleton { <span class="hljs-number"><span class="hljs-number">136.88f</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> numbers: List&lt;Number&gt; <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> allInstances() }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie Sie sehen, k√∂nnen Sie jetzt einfach schreiben </font></font><code>by allInstances()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anstatt </font></font><code>by kodein.allInstances()</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zuvor. Wir haben bereits √ºber den Ausl√∂ser f√ºr den Empfang von Abh√§ngigkeiten gesprochen. </font><font style="vertical-align: inherit;">In der Schnittstelle k√∂nnen </font></font><code>KodeinAware</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie einen Trigger √ºberschreiben und alle deklarierten Abh√§ngigkeiten abrufen, wenn dieser Trigger aufgerufen wird.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyApplication</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Application</span></span></span></span>(), KodeinAware { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { bind&lt;Number&gt;() with singleton { <span class="hljs-built_in"><span class="hljs-built_in">Short</span></span>.MAX_VALUE } bind&lt;<span class="hljs-built_in"><span class="hljs-built_in">Double</span></span>&gt;() with singleton { <span class="hljs-number"><span class="hljs-number">12.46</span></span> } bind&lt;<span class="hljs-built_in"><span class="hljs-built_in">Double</span></span>&gt;(<span class="hljs-string"><span class="hljs-string">"someTag"</span></span>) with singleton { <span class="hljs-number"><span class="hljs-number">43.89</span></span> } bind&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;() with singleton { <span class="hljs-number"><span class="hljs-number">4562</span></span> } bind&lt;<span class="hljs-built_in"><span class="hljs-built_in">Float</span></span>&gt;() with singleton { <span class="hljs-number"><span class="hljs-number">136.88f</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodeinTrigger = KodeinTrigger() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> numbers: List&lt;Number&gt; <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> allInstances() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate() kodeinTrigger.trigger() } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Da der Zugriff auf die Abh√§ngigkeiten und die Instanz </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verz√∂gert ist, k√∂nnen Sie die Instanzinitialisierung an die </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in Kotlin integrierte Funktion </font><font style="vertical-align: inherit;">delegieren </font></font><code>lazy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ein solcher Ansatz kann in Klassen abh√§ngig von ihrem Kontext n√ºtzlich sein, z </font></font><code>Activity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesActivity</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Activity</span></span></span></span>(), KodeinAware { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> lazy { (application <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> MyApplication).kodein } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myFloat: <span class="hljs-built_in"><span class="hljs-built_in">Float</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> instance()</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aus den gleichen Gr√ºnden k√∂nnen Sie einen Modifikator verwenden </font></font><code>lateinit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesActivity</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Activity</span></span></span></span>(), KodeinAware { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> kodein: Kodein <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myFloat: <span class="hljs-built_in"><span class="hljs-built_in">Float</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> instance() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) kodein = (application <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> MyApplication).kodein }</code> </pre><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zugriff auf Abh√§ngigkeiten ohne Delegierung von Eigenschaften </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie aus irgendeinem Grund keine Eigenschaftsdelegierung verwenden m√∂chten, k√∂nnen Sie den direkten Zugriff √ºber </font></font><code>DKodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(von direkt) verwenden. </font><font style="vertical-align: inherit;">Der Hauptunterschied besteht darin, dass es keine verz√∂gerte Initialisierung mehr gibt, die Abh√§ngigkeit sofort zum Zeitpunkt des Aufrufs erhalten </font></font><code>instance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird </font></font><code>provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und √§hnliche Funktionen. </font><font style="vertical-align: inherit;">Sie </font></font><code>DKodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k√∂nnen es von einer vorhandenen Kodein-Instanz herunterladen oder von Grund auf neu erstellen.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyApplication</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Application</span></span></span></span>(), KodeinAware { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { bind&lt;BigDecimal&gt;() with singleton { BigDecimal.TEN } } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> directKodein: DKodein = kodein.direct <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> directKodein2: DKodein = Kodein.direct { bind&lt;BigDecimal&gt;() with singleton { BigDecimal.ONE } } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> someNumber:BigDecimal = directKodein.instance() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> someNumber2:BigDecimal = directKodein2.instance()</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kodein kann im Framework verwendet werden </font></font><code>KodeinAware</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und </font></font><code>DKodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im Framework </font></font><code>DKodeinAware</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k√∂nnen Sie experimentieren.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Holen Sie sich Abh√§ngigkeiten in jedem Kontext </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mehrere Abh√§ngigkeiten desselben Typs </font><font style="vertical-align: inherit;">von einem Objekt zu erhalten, haben </font><font style="vertical-align: inherit;">wir bereits die M√∂glichkeit untersucht, Tags und Fabriken mit Argumenten zu verwenden. Es gibt jedoch noch eine weitere M√∂glichkeit: die Verwendung eines Kontexts (und dies ist nicht der Kontext in Android). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unterschiede zur Abh√§ngigkeit vom Tag:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ein Tag kann nicht in einer Funktion verwendet werden, in der wir eine Abh√§ngigkeit erstellen </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bei Verwendung von Kontext haben wir Zugriff auf die Kontextinstanz in der Funktion zur Erstellung von Abh√§ngigkeiten </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anstelle des Kontexts k√∂nnen Sie h√§ufig eine Factory mit einem Argument verwenden. Entwickler </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">empfehlen dies, wenn Sie sich nicht sicher sind, was Sie verwenden sollen. Der Kontext kann jedoch n√ºtzlich sein, wenn Sie beispielsweise nicht zwei Argumente f√ºr denselben Typ umwandeln k√∂nnen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zum Beispiel haben Sie </font></font><code>Activity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>Presenter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wie Sie wollen, ein einzelnes Objekt mit </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mehrere verschiedene Arten von Abh√§ngigkeiten auf verschiedene Weise zur Verf√ºgung zu stellen, in </font><font style="vertical-align: inherit;">Abh√§ngigkeit von der Klasse , </font><font style="vertical-align: inherit;">in der sie erhalten werden. Zu f√ºhren </font></font><code>Activity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>Presenter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zu einer Art - Sie ben√∂tigen eine optionale Schnittstelle, und die Fabrik m√ºssen die Art des resultierenden Arguments √ºberpr√ºfen. Das Schema ist nicht sehr bequem. Daher schauen wir uns an, wie der Kontext verwendet wird:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyApplication</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Application</span></span></span></span>(), KodeinAware { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein = Kodein { bind&lt;BigDecimal&gt;() with contexted&lt;CategoriesActivity&gt;().provider { context.getActivityBigDecimal() } bind&lt;BigDecimal&gt;() with contexted&lt;CategoriesPresenter&gt;().factory { initialValue:BigDecimal -&gt; context.getPresenterBigDecimal(initialValue) } } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesActivity</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Activity</span></span></span></span>(), AppKodeinAware { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getActivityBigDecimal</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = BigDecimal(<span class="hljs-string"><span class="hljs-string">"16.34"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> activityBigDecimal: BigDecimal <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.on(context = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).instance() } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesPresenter</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppKodeinAware { fun getPresenterBigDecimal</span></span></span></span>(initialValue: BigDecimal) = initialValue * BigDecimal.TEN <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> presenterBigDecimal: BigDecimal <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.on(context = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).instance(arg = BigDecimal(<span class="hljs-string"><span class="hljs-string">"31.74"</span></span>)) }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Beispiel wird nat√ºrlich √ºber die Ohren gezogen, und in der Praxis ist es unwahrscheinlich, dass Sie auf eine solche Situation sto√üen, aber dieses Beispiel zeigt, wie der Kontext funktioniert. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um eine Abh√§ngigkeit zu deklarieren, geben Sie nicht an </font></font><code>with provider()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sondern </font></font><code>with contexted&lt;OurContextClass&gt;().provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wo </font></font><code>OurContextClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sich der Klassentyp befindet, dessen Instanz als Kontext fungiert. </font></font><code>contexted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann nur Anbieter oder Fabrik sein. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Zugriff auf diesen Kontext in der Funktion, die die Abh√§ngigkeit zur√ºckgibt, erfolgt √ºber eine Variable mit dem Namen </font></font><code>context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um eine Abh√§ngigkeit an einen Kontext anzuh√§ngen, m√ºssen Sie zuerst den Kontext f√ºr das Objekt </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√ºber die Funktion </font><font style="vertical-align: inherit;">angeben </font></font><code>on()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und dann die Abh√§ngigkeit anfordern. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In √§hnlicher Weise wird der Kontext im Fall von verwendet </font></font><code>injection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> productApi: IProductApi <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.on(context = someContext).newInstance { ProductApi(instance(), instance()) } }</code> </pre><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Android-Erweiterungen </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zu Beginn des Artikels habe ich versprochen, Erweiterungsoptionen f√ºr in Betracht zu ziehen </font></font><code>Android</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nichts hindert Sie daran, </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es wie oben beschrieben zu verwenden, aber Sie k√∂nnen alles um eine Gr√∂√üenordnung bequemer gestalten.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eingebautes Kodein f√ºr Android </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine sehr n√ºtzliche Sache ist ein Modul, das f√ºr Android vorbereitet ist. </font><font style="vertical-align: inherit;">Um eine Verbindung herzustellen, muss die Klasse </font><font style="vertical-align: inherit;">die Eigenschaft </font><font style="vertical-align: inherit;">tr√§ge </font></font><code>Application</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementieren </font></font><code>KodeinAware</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und initialisieren </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(um auf die Instanz zugreifen zu k√∂nnen </font></font><code>Application</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Im Gegenzug erhalten Sie eine gro√üe Anzahl deklarierter Abh√§ngigkeiten, die Sie von der Klasse erhalten k√∂nnen </font></font><code>Application</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, einschlie√ülich allem, was Sie ben√∂tigen </font></font><code>Context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">So verbinden Sie sich - sehen Sie sich ein Beispiel an.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyApplication</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Application</span></span></span></span>(), KodeinAware { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein = Kodein.lazy { <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(androidModule(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span><span class="hljs-symbol"><span class="hljs-symbol">@MyApplication</span></span>)) <span class="hljs-comment"><span class="hljs-comment">//  } val inflater: LayoutInflater by instance() }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie Sie sehen k√∂nnen - k√∂nnen Sie zum Beispiel bekommen </font></font><code>LayoutInflater</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Eine vollst√§ndige Liste der im Modul deklarierten Abh√§ngigkeiten finden Sie </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie diese Abh√§ngigkeiten au√üerhalb von Android-Klassen erhalten m√∂chten, deren Kontext bekannt ist, geben Sie den Kontext explizit an.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> inflater: LayoutInflater <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> kodein.on(context = getActivity()).instance()</code> </pre><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Holen Sie sich schnell Eltern Kodein durch n√§chstgelegene Kodein () </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist einfach, in Android h√§ngen einige Objekte von anderen ab. </font><font style="vertical-align: inherit;">Auf der obersten Ebene gibt es Anwendung, unter der Aktivit√§t und dann Fragment steht. </font><font style="vertical-align: inherit;">Sie k√∂nnen die Aktivit√§t implementieren </font></font><code>KodeinAware</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sowie Initialisierungsaufruf </font></font><code>closestKodein()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und somit eine Kopie erhalten </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von </font></font><code>Application</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyActivity</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Activity</span></span></span></span>(), KodeinAware { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> closestKodein() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> ds: DataSource <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> instance() }</code> </pre><br> <code>closestKodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen es auch au√üerhalb von Android-Klassen herunterladen, ben√∂tigen jedoch einen Android-Kontext, √ºber den Sie die Funktion aufrufen k√∂nnen. </font><font style="vertical-align: inherit;">Wenn Sie es verwenden </font></font><code>KodeinAware</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, geben Sie auch den Kontext daf√ºr an (√ºberschreiben Sie die entsprechende Eigenschaft und √ºbergeben Sie den Android-Kontext an die Funktion </font></font><code>kcontext()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyController</span></span></span></span>(androidContext: Context) : KodeinAware { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> androidContext.closestKodein() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodeinContext = kcontext(androidContext) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> inflater: LayoutInflater <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> instance() }</code> </pre><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Erstellen Sie ein separates Kodein in Aktivit√§t </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es kann durchaus notwendig sein, in der Aktivit√§t vom √ºbergeordneten Kodein zu erben und es zu erweitern. </font><font style="vertical-align: inherit;">Die L√∂sung ist ganz einfach.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyActivity</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Activity</span></span></span></span>(), KodeinAware { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> parentKodein <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> closestKodein() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> Kodein.lazy { extend(parentKodein) <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> } }</code> </pre><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kodein, das eine Konfigurations√§nderung durchl√§uft </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ja, das kannst du. </font><font style="vertical-align: inherit;">Hierf√ºr gibt es eine Funktion </font></font><code>retainedKodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Bei Verwendung wird das Objekt </font></font><code>Kodein</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nach einer Konfigurations√§nderung nicht neu erstellt.</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyActivity</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Activity</span></span></span></span>(), KodeinAware { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> parentKodein <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> closestKodein() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kodein: Kodein <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> retainedKodein { extend(parentKodein) } }</code> </pre><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Was steht im Artikel nicht? </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich gab nicht vor, vollst√§ndig zu sein, und ich selbst verstehe einige Dinge nicht gut genug, um zu versuchen, sie zu formulieren. </font><font style="vertical-align: inherit;">Hier ist eine Liste dessen, was Sie selbst lernen k√∂nnen, wenn Sie die Grundprinzipien kennen:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Geltungsbereich </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Instanzbindung </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mehrfachbindung </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bereits R√ºckrufe </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Externe Quelle </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fallstricke der gel√∂schten Version </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Konfigurierbares Kodein </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> JSR-330-Kompatibilit√§t </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gut und Links zur Dokumentation: </font></font><br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kern 5.3</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Android 5.3</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Startseite</font></font></a> </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Vielen Dank f√ºrs Lesen, ich hoffe, der Artikel wird Ihnen n√ºtzlich sein! </font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de431696/">https://habr.com/ru/post/de431696/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de431686/index.html">Au√üer IoT: Das Mirai-Botnetz hat einen Angriff auf Linux-Computer gestartet</a></li>
<li><a href="../de431688/index.html">Wie Clang eine Funktion kompiliert</a></li>
<li><a href="../de431690/index.html">Crackme von Kaspersky Lab l√∂sen</a></li>
<li><a href="../de431692/index.html">Fortschritte in der Immuntherapie bei der Behandlung von Multipler Sklerose</a></li>
<li><a href="../de431694/index.html">Sortieren Sie "Turm von Hanoi"</a></li>
<li><a href="../de431698/index.html">Analyse der Fragen am Stand hh.ru auf # HolyJS18</a></li>
<li><a href="../de431700/index.html">Ein Haushaltsmultimeter, das ich nie auf dem Markt gefunden habe</a></li>
<li><a href="../de431702/index.html">Sowjetisches HI-FI und seine Sch√∂pfer: Kopfh√∂rer f√ºr eine Schallplatte oder eine vergessene Geschichte Electronics TDK-3 ‚ÄûQuad‚Äú</a></li>
<li><a href="../de431704/index.html">Wochenendlesung: Wie Sie Ihr Geh√∂r nicht beeintr√§chtigen und dem L√§rm der Stadt entfliehen k√∂nnen - 17 Artikel und praktische Anleitungen</a></li>
<li><a href="../de431706/index.html">Theorie des Gl√ºcks. Unf√§lle sind nicht zuf√§llig?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>