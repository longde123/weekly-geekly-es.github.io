<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔋 👨🏾‍🚀 ⛅️ Qu'est-ce que la pile MERN et comment l'utiliser? 📽️ 💪🏼 🧑🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 

 Il était une fois, nous avons publié un projet pilote sur la pile MEAN (Mongo, Express, Angular, Node), qui ne nous a généralement p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Qu'est-ce que la pile MERN et comment l'utiliser?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/458096/">  Bonjour, Habr! <br><br>  Il était une fois, nous avons publié un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">projet</a> pilote <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur la pile MEAN</a> (Mongo, Express, Angular, Node), qui ne nous a généralement pas déçus, cependant, nous avons décidé de ne pas faire d'impressions et de mises à jour supplémentaires à l'époque - contrairement à Manning, qui a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mis à jour</a> ce livre. .  Néanmoins, nous continuons à chercher dans cette direction et aujourd'hui, nous aimerions vous parler de la pile MERN associée, où React est situé sur le client, pas Angular.  La <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">parole est</a> donnée à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tim Smith</a> . <br><br><img src="https://habrastorage.org/webt/1d/hf/l7/1dhfl7yw9am620o13r-nz-i4il8.jpeg"><br><a name="habracut"></a><br>  Attention: tout le code de cet article est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Dans ce guide de pile MERN, nous écrirons un blog simple utilisant React.js, Node.js, Express.js et MongoDB pour étendre notre arsenal de pile complète. <br><br><h3>  Qu'est-ce qu'une pile? </h3><br>  Peut-être que la première chose à discuter est l'idée d'une "pile" en tant que telle.  Il existe de nombreuses piles différentes, et toutes ne sont que des chemins différents pour atteindre le même objectif.  En créant une application full-stack, nous fournissons la partie client avec laquelle l'utilisateur va interagir, et la même partie client assurera la médiation du travail avec le serveur et la base de données - rendant tout ce processus aussi simple et gérable que possible. <br><br>  Nous pouvons dire que la pile est un certain ensemble de technologies utilisées pour résoudre ce problème. <br><br>  Bien qu'il existe de nombreuses piles qui méritent d'être discutées, certaines d'entre elles sont plus populaires que d'autres aujourd'hui.  L'une de ces piles populaires s'appelle MEAN et comprend: <br><br><ul><li>  <b>M</b> ongoDb </li><li>  <b>E</b> xpress.js </li><li>  <b>A</b> ngular.js </li><li>  <b>N</b> ode.js </li></ul><br>  Aujourd'hui, nous allons parler de la pile MERN, qui est très similaire à MEAN sauf que Angular.js est remplacé ici par React.js.  Ainsi, nous pouvons utiliser MongoDB comme base de données, Node.js et Express, respectivement, pour le serveur et le routage, et React.js - pour créer la partie client avec laquelle l'utilisateur va interagir. <br><br><h3>  Comment se déroule le développement avec cette pile? </h3><br>  Avant de passer à toutes les subtilités, jetons un regard général sur la façon dont tous ces éléments fonctionnent ensemble.  Personnellement, il m'a fallu un certain temps pour y entrer, car mon expérience est liée à PHP, où les parties client et serveur sont quelque peu mélangées. <br><br>  <i>1. La partie serveur (Node et Express.js) et la partie client (React.js)</i> <br><br>  Tout d'abord, vous devez comprendre que la partie serveur et la partie client sont des entités distinctes.  La partie client peut être dans le même référentiel avec le serveur, ou peut-être dans un tout autre. <br><br>  <i>2. Les terminaux API sont utilisés pour la communication</i> <br><br>  Si vous réfléchissez déjà à la façon de vous faire des amis des parties client et serveur, je répondrai: cela se fait via l'API.  Une API (interface de programme d'application) est créée sur le serveur, où nous obtiendrons des «terminaux» à travers lesquels l'application située dans la partie client peut interagir avec le serveur. <br><br>  Expliquons sur les doigts: imaginez que votre main gauche est du côté serveur et votre main droite du côté client. <br><br>  Maintenant, pliez vos mains et tournez vos doigts ensemble comme si vous serriez la main.  C'est ainsi que fonctionnent les langages de modèles.  Ils vous permettent d'afficher simplement un balisage avec les données sauvegardées avec les serveurs - et en eux les composants client et serveur se chevauchent dans une large mesure. <br><br>  Maintenant, ouvrez vos mains.  Écartez vos doigts aussi largement que possible et faites en sorte que les mains gauche et droite ne touchent que du bout des doigts.  C'est ainsi que fonctionne la pile MERN.  La partie serveur fournit des terminaux (bout des doigts de la main gauche) pour accéder au serveur, auquel le client envoie des appels (du bout des doigts de la main droite) et à travers ces points de contact échange des informations avec le serveur (main gauche). <br><br>  J'espère qu'elle est devenue un peu plus claire, et sinon, oubliez toute cette métaphore, comme si je ne l'avais pas mentionnée. <br><br><h3>  Notre côté serveur de Node.js et Express.js </h3><br>  Bien que je ne vais pas donner ici des instructions pas à pas sur la façon de construire cette pile (c'est un sujet pour un article séparé), je voudrais considérer les différents éléments de la pile qui sont généralement utilisés ou peuvent y être utilisés.  J'ai lu moi-même plusieurs manuels qui expliquaient comment configurer le serveur, mais je n'ai pas expliqué pourquoi ces bibliothèques particulières sont utilisées à cet effet. <br><br>  Après avoir créé le fichier app.js, vous devrez installer un certain nombre de packages.  Voici les packages les plus courants que j'ai déjà utilisés dans mes projets avec Express.js - peut-être qu'ils vous seront utiles également. <br><br><ul><li>  <b>Express.js</b> est un cadre pour créer des applications Web.  Il a une fonctionnalité intégrée pour résoudre de nombreux problèmes, en particulier, pour établir le routage. </li><li>  <b>Mongoose</b> est un gestionnaire de données d'objets (ODM) qui assure l'interopérabilité entre une application express.js et une base de données MongoDB. </li><li>  <b>BodyParser</b> est une bibliothèque qui permet à l'application express.js de lire le corps (c'est-à-dire le contenu) des demandes entrantes. </li><li>  <b>DotENV</b> - vous permet d'utiliser des fichiers avec l'extension .env pour travailler avec des données confidentielles. </li><li>  <b>Passport.js</b> - fournit une authentification dans notre application et fournit plusieurs méthodes d'authentification différentes. </li><li>  <b>Validateur</b> - validation simple de nombreux types de données </li><li>  <b>bCrypt</b> - cryptage des données sensibles, telles que les mots de passe </li><li>  <b>Nodemon</b> - «redémarrage à chaud» pour notre serveur de nœuds en cas de changement de situation;  Grâce à Nodemon, vous ne pouvez pas arrêter ou redémarrer le serveur après avoir effectué des modifications. </li></ul><br>  Bien sûr, il existe de nombreux autres packages, mais d'après mon expérience, ce sont ces bibliothèques qui sont utilisées le plus souvent. <br><br>  Donc, après avoir trié certains des packages les plus utilisés, regardons le code.  Pour commencer - notre serveur: <br><br><img src="https://habrastorage.org/webt/xk/g7/f_/xkg7f_3zeltvgqsj-knjstppros.png"><br><br>  Il s'agit d'un simple serveur API.  Comme vous pouvez le voir, il est équipé de la fonctionnalité de base CRUD (Create-Read-Update-Delete) - rien de surnaturel.  En y regardant de plus près, nous voyons que <code>res.json()</code> est utilisé ici pour fournir des données de sortie pour une URL spécifique - c'est-à-dire que HTML ou un autre modèle n'est pas utilisé pour la sortie.  C'est ainsi que nous construisons nos API en ouvrant l'accès aux données à React.js. <br><br>  Vous pourriez également remarquer que je viens de pointer mangouste vers mon propre serveur mongodb installé sur mon ordinateur.  Pour qu'un tel mécanisme fonctionne correctement, MongoDB doit être installé sur votre ordinateur et fonctionner.  Si cela ne fonctionne pas, ouvrez simplement la fenêtre de la console et entrez la commande suivante: <br><br><img src="https://habrastorage.org/webt/yz/fr/o2/yzfro2ns9az9yqno2kc522rdnfa.png"><br><br>  Il démarrera le serveur MongoDB sur votre machine locale.  Étant donné que tout cela se fait localement, vous ne pourrez pas voir mes publications si vous exécutez le code à partir du référentiel.  Nous devons écrire nous-mêmes du nouveau contenu.  Si vous avez besoin d'un talon de contenu, je recommande l'excellent générateur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fillerama.io</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">découpant le</a> texte de certains de mes films et émissions de télévision préférés. <br><br>  Si vous souhaitez tester le serveur vous-même, vous pouvez le démarrer avec la commande suivante: <br><br><img src="https://habrastorage.org/webt/83/fr/1z/83fr1z4cgcdnjrx9up44nk5enxe.png"><br><br>  Une fois que le serveur a démarré et nous a indiqué qu'il fonctionne sur le port 3333, ainsi que qu'il s'est connecté à MongoDB, vous pouvez ouvrir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Postman</a> et tester nos itinéraires là-bas.  En ce qui concerne les options GET, vous pouvez simplement insérer l'itinéraire et cliquer sur «Envoyer».  Dans le cas de POST, vous devrez sélectionner «Corps» et remplir les champs pour l'en-tête et le contenu principal. <br><br><h3>  Note côté client </h3><br>  Maintenant que nous avons configuré et lancé notre serveur, nous pouvons commencer à travailler sur le client avec lequel nos utilisateurs interagiront.  Le client sera écrit dans React.js, et cela peut être fait de plusieurs manières différentes. <br><br>  La première consiste simplement à ajouter toutes les bibliothèques nécessaires pour le côté client (react, react-dom, react-router, etc.) toutes dans le même fichier <code>package.json</code> où nous avons écrit les bibliothèques du serveur.  C'est exactement ce que j'ai fait dans ce projet, mais je dois dire que je ne pense pas que cette option soit optimale.  Je pense qu'à mesure que notre projet se développe, la base de code deviendra de plus en plus confuse, et si vous utilisez uniquement cette méthode, travailler avec elle deviendra plus compliqué à l'avenir.  J'ai préféré ce chemin dans l'application décrite précisément parce que je sais avec certitude: il ne grandira pas et ne changera pas du tout.  Cette application est écrite uniquement à des fins de démonstration. <br><br>  La deuxième approche (et à mon avis) la plus optimale consiste à créer un référentiel séparé pour le côté serveur et un autre pour le client.  Comme précédemment, nous pouvons facilement cloner le référentiel de la partie client dans le répertoire avec notre projet sans aucun problème, nous devons seulement nous assurer que la partie client est répertoriée dans notre fichier <code>.gitignore</code> .  Par exemple, dans la structure de fichiers de cette application, il existe un répertoire <code>client</code> , où se trouve tout le code pièce client.  Nous pourrions le prendre dans un référentiel complètement séparé, puis ajouter simplement l'entrée suivante au fichier <code>.gitignore</code> de notre référentiel avec le côté serveur: <br><br><img src="https://habrastorage.org/webt/o8/sy/h4/o8syh4xj4rxbc5te5wwk_ax_7bc.png"><br><br>  En ajoutant le dossier <code>client</code> au fichier <code>.gitignore</code> , nous garantissons que le système ne percevra pas ce dossier comme le deuxième référentiel du projet.  De plus, cette approche facilite le travail de refonte ou de remplacement de la partie client, puisque la partie serveur n'est pas du tout affectée. <br><br>  La façon dont votre application full-stack sera conçue dépend entièrement de vous.  Il me semble simplement que si vous gardez des référentiels séparés pour les parties client et serveur, la structure de l'application sera un peu plus précise. <br><br><h3>  Nous créons une partie client sur React.js </h3><br>  Maintenant, après avoir compris l'organisation du projet, parlons en fait du code client.  Ci-dessous se trouve mon fichier <code>app.js</code> pour une application sur React.js, et je n'insérerai pas de code pour chaque composant dans ce post, je laisse juste un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien</a> vers le référentiel et explique ce que fait chacun des composants React. <br><br>  Et voici à quoi ressemblera la capture d'écran de la page principale de notre application: <br><br><img src="https://habrastorage.org/webt/rp/j-/yz/rpj-yzfnehkwotobufkxqxf3zzi.png"><br><br>  Comme vous pouvez le voir, <code>app.js</code> absolument rien de compliqué.  Il existe un &lt;Router&gt; qui vous permet de configurer des itinéraires dans React.js qui affichent divers composants en fonction de leur URL.  Voici les autres composants qui seront utilisés dans notre application React.js: <br><br><ul><li>  <b>En</b> - <b>tête</b> - La barre de navigation située en haut de l'écran </li><li>  <b>Index</b> - Répertorie les entrées de blog disponibles </li><li>  <b>Nouveau</b> - Le formulaire à travers lequel l'utilisateur peut créer un nouveau message </li><li>  <b>Unique</b> - Affiche une entrée de blog spécifique en fonction de son <code>id</code> </li><li>  <b>Modifier</b> - Le formulaire à travers lequel l'utilisateur peut mettre à jour l'entrée de blog trouvée par <code>id</code> </li></ul><br>  Nous utilisons Axios pour effectuer des appels http vers les terminaux API, puis utilisons React.js pour afficher les données à notre guise.  Dans cet article, je donnerai du code Index.js pour rendre plus clair comment tout cela fonctionne ensemble. <br><br><img src="https://habrastorage.org/webt/9j/dp/wo/9jdpwo-gh8ifomloyx0cibju1mi.png"><br><br>  Dans le code ci-dessus, un composant de classe est impliqué, nous permettant d'utiliser des méthodes d'état et de cycle de vie.  Cela est nécessaire car les appels Axios doivent être effectués dans la méthode du cycle de vie <code>componentDidMount()</code> .  Il convient de noter que j'obtenais une erreur CORS lorsque j'essayais d'appeler mon API locale.  Pour résoudre ce problème, j'ai ajouté plusieurs en-têtes au fichier server.js sur mon serveur Express - et cela a fonctionné.  Ce code est noté dans les commentaires sur le fichier server.js. <br><br>  <i>Assurons-nous que les robots de recherche lisent normalement notre application React.js.</i> <br><br>  Pour terminer, je voudrais parler brièvement du rendu.  Si vous lancez notre site et accédez directement à un article de blog, il peut y avoir des problèmes d'affichage du contenu.  Dans ce cas, la navigation sur le site sera gênante non seulement pour les utilisateurs, mais également pour les robots de recherche qui indexent le contenu.  Pour contourner ce problème, je recommande d'utiliser des outils tels que Gatsby js ou Next js.  Ces deux solutions sont différentes l'une de l'autre, mais les deux peuvent être utiles, selon ce dont vous avez besoin. <br><br>  Gatsby js est un générateur de site statique.  Vous pouvez écrire un site sur React.js, puis Gatsby le transformera en fichiers statiques pendant la construction, ce qui rendra le site ultra-rapide.  Gatsby est livré avec de nombreux plugins utiles qui rendent l'outil presque universel.  Soit dit en passant, mon site a été créé en utilisant Gatsby.js!  Étant donné que les fichiers statiques sont créés lors de l'assemblage, le site doit être reconstruit chaque fois que le contenu d'origine change. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Next.js</a> , à son tour, est un composant serveur pour afficher les sites React.js.  De nombreuses fonctionnalités utiles y sont intégrées, en particulier le routage, le fractionnement de code, les composants conçus et bien plus encore.  Le rendu du serveur signifie que les données seront mises à jour automatiquement, comme cela se fait sur le serveur, mais, avant d'être affichées dans la fenêtre du navigateur, l'étape de rendu aura lieu.  C'est pourquoi il ne devrait pas y avoir de problème avec l'affichage des données à l'utilisateur, et les robots de recherche feront également leur travail sans problème. <br><br>  Il existe de nombreuses autres solutions de ce type, mais j'ai surtout entendu parler de ces deux-là, et lorsque j'ai travaillé sur ce projet, je les ai utilisées.  Les deux sont parfaitement documentés, il est donc facile de traiter rapidement les deux et de se mettre au travail. <br><br><h3>  Réflexions finales sur la pile MERN </h3><br>  J'espère que cet article vous a aidé un peu plus précisément à savoir comment fonctionne la pile MERN.  Dans ce document, nous prenons simplement MongoDB, Express.js et Node.js et créons à partir d'eux un serveur qui fournit déjà des terminaux API via lesquels notre application React.js peut accéder aux données.  Alors maintenant, vous comprenez beaucoup, il est temps de faire de grandes choses! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr458096/">https://habr.com/ru/post/fr458096/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr458084/index.html">50 matériaux sélectionnés sur les gains des musiciens, le son dans les jeux et les films, les instruments inhabituels et les vieux oubliés</a></li>
<li><a href="../fr458088/index.html">Meilleures distributions Linux pour les ordinateurs plus anciens</a></li>
<li><a href="../fr458090/index.html">Qu'est-il vraiment arrivé au Boeing malaisien disparu (partie 2/3)</a></li>
<li><a href="../fr458092/index.html">En route vers le noyau Python</a></li>
<li><a href="../fr458094/index.html">Vidéosurveillance «intelligente»: à quoi ressemblera la vie sous des caméras à intelligence artificielle</a></li>
<li><a href="../fr458098/index.html">Pièges du RGPD</a></li>
<li><a href="../fr458100/index.html">Python dans Visual Studio Code - Version de juin 2019</a></li>
<li><a href="../fr458102/index.html">Flux de travail de développement Web efficace: Confluence, Airtable, etc.</a></li>
<li><a href="../fr458104/index.html">RDMA à l'intérieur du centre de données dans la mise en œuvre de Huawei</a></li>
<li><a href="../fr458106/index.html">Plongez dans Jetpack Compose</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>