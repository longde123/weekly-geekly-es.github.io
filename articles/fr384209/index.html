<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÇüèΩ üôçüèæ üêΩ LAMP sur Raspberry Pi 2 - ce que le processeur ARM + USB est capable de üå´Ô∏è ü§±üèø ü§õüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je ferai une r√©servation tout de suite, le but n'est pas de d√©couvrir les capacit√©s maximales du syst√®me, mais de d√©couvrir les performances fondament...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LAMP sur Raspberry Pi 2 - ce que le processeur ARM + USB est capable de</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/384209/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je ferai une r√©servation tout de suite, le but n'est pas de d√©couvrir les capacit√©s maximales du syst√®me, mais de d√©couvrir les performances fondamentales des micro-ordinateurs modernes en tant que serveurs Web √† part enti√®re et d'aider √† √©valuer la comp√©titivit√© par rapport √† l'h√©bergement partag√©. </font><font style="vertical-align: inherit;">Par cons√©quent, cet article ne traite pas des probl√®mes d'optimisation et d'√©tude de la charge maximale admissible. </font><font style="vertical-align: inherit;">Au lieu de cela, une exp√©rience est men√©e sur des sites existants avec de vrais visiteurs.</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">introduction</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Probablement, beaucoup de ceux qui connaissent les micro-ordinateurs des familles comestibles (framboise, banane, orange ...) ont pens√© √† √©largir la gamme de leur utilisation. </font><font style="vertical-align: inherit;">Con√ßus √† l'origine pour les syst√®mes domestiques intelligents et la robotique, ils deviennent de plus en plus rapides tout en conservant leur taille. </font><font style="vertical-align: inherit;">Leur faible consommation d'√©nergie et leur puissance de processeur accrue les rendent attrayants pour une utilisation potentielle comme serveurs Web. </font><font style="vertical-align: inherit;">Choisissons un mod√®le adapt√© √† cela.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi le Raspberry Pi 2 mod√®le B?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âtant donn√© que le point le plus faible de ces syst√®mes du point de vue de l'h√©bergement est le processeur, qui a des performances relatives tr√®s faibles (plus √† ce sujet plus tard), nous essaierons d'organiser un serveur Web avec une option budg√©taire, mais qui, n√©anmoins, peut s'av√©rer assez puissant pour notre t√¢che est le Raspberry Pi 2 mod√®le B. Il a un processeur √† 4 c≈ìurs qui fonctionne en mode normal sans refroidissement √† 900 MHz et la possibilit√© de changer cette fr√©quence de 700 √† 1200 MHz. </font><font style="vertical-align: inherit;">Nous n'augmenterons pas la fr√©quence d'horloge, nous notons simplement que pour ¬´l'overclocking¬ª, vous aurez besoin d'un radiateur et, √©ventuellement, d'un ventilateur. </font><font style="vertical-align: inherit;">Puisqu'il se trouve qu'aujourd'hui le Raspberry Pi 2 mod√®le B poss√®de le processeur le plus productif parmi les "camarades de classe", nous le s√©lectionnons pour les tests.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caract√©ristiques techniques de la plateforme en question</font></font></h4><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons un processeur inhabituel, la famille RISC. En bref, on peut dire que l'ensemble d'instructions pour un tel processeur est beaucoup plus petit que celui des ¬´ordinaires¬ª, mais il ex√©cute tr√®s rapidement des commandes simples. Mais pour ex√©cuter des instructions complexes, de telles commandes simples n√©cessitent beaucoup. Par cons√©quent, l'horloge fait plus de cycles. Donc, s'il semblait √† quiconque que 4 c≈ìurs de 900 MHz chacun sont plus que suffisants pour un serveur Web, alors vous devriez apporter un amendement - le Cortex A7 quadric≈ìur Broadcom BCM2836 pour notre t√¢che ne sera pas plus rapide que l'ancien Pentium 300-400 Mhz. Certes, 6 fois plus que le pr√©c√©dent mod√®le √† c≈ìur unique sur le Raspberry Pi, et 1,9 fois devant le camarade de classe √† double c≈ìur sur le Banana Pi M2 (qui, bien que annonc√© par la pr√©sence de SATA et d'Ethernet gigabit, est beaucoup moins adapt√© au serveur Web en raison de son processeur )C'est pr√©cis√©ment √† cause de la lenteur du processeur central que l'on observe une consommation record de micro-ordinateurs. Selon les donn√©es disponibles, le Raspberry Pi consomme de 2 √† 3 watts, 4 watts √† pleine charge, 1 watts au ralenti. Eh bien, 2-3 watts (5V, 0,4-0,6A) en moyenne pour l'ensemble du syst√®me, √† l'exception de la puissance des supports de stockage - c'est ce pour quoi il vaut la peine de se battre dans le domaine de l'h√©bergement Web d'entreprise ou domestique, ce qui peut le rendre rentable avec des √©conomies points de vue.ce qui peut le rendre √©conomiquement avantageux.ce qui peut le rendre √©conomiquement avantageux.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©moire</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La m√©moire utilis√©e n'est pas la plus rapide, c'est la DDR2, mais il y a une quantit√© de m√©moire suffisante - 1 Go. </font><font style="vertical-align: inherit;">Je dois dire que c'est une bonne quantit√© pour les serveurs Web ordinaires ex√©cutant Linux.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interface r√©seau</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une interface r√©seau de 100 m√©gaoctets suffit pour le transfert de donn√©es. </font><font style="vertical-align: inherit;">Nous n'avons besoin de rien d'autre - le sous-syst√®me de stockage d'informations et le processeur ne peuvent tout simplement pas faire face √† </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lourde charge.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stockage de donn√©es</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous passons √† un point tr√®s int√©ressant - le lecteur de carte int√©gr√© permet au syst√®me de d√©marrer uniquement √† partir de celui-ci (sauf si vous redirigez le chargeur de d√©marrage ...), et cela dans une situation normale limite le choix du support principal √† une carte micro SD. La bonne nouvelle est qu'aujourd'hui, ils peuvent d√©j√† √™tre d'un volume important et fonctionner rapidement. Bien qu'il existe d√©j√† des lacunes - il est peu probable que nous souhaitions conserver les fichiers du site Web, les bases de donn√©es, les √©changes et les journaux, afin d'√©viter un fonctionnement lent et une r√©duction pr√©matur√©e de la vie du transporteur. Pour ce faire, nous aurons un autre m√©dia sur le bus USB. Cette approche augmentera non seulement les performances du syst√®me, mais donnera √©galement l'avantage de la modularit√© - il est facile de remplacer le m√©dia par un autre et de faire des sauvegardes de l'image enti√®re. La question est de savoir exactement ce que nous voulons utiliser comme support externe - un disque SSD, un disque dur ou une carte m√©moire rapide.Ici, tout le monde d√©cide par lui-m√™me, cela d√©pend beaucoup de la nature des sites h√©berg√©s. Il faut se rappeler que le Raspberry Pi 2 utilise la norme USB 2.0, ce qui limite notre sous-syst√®me de fichiers en vitesse de transfert de donn√©es.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet exemple, en tant qu'appareil externe, nous consid√©rerons une option d'enregistrement relativement lente - il s'agit d'un lecteur de carte USB avec une carte SD plein format Lexar Professional connect√©e, ce qui vous permet d'enregistrer des donn√©es √† seulement environ 15 Mo / s avec cette connexion. Bien que (dans le cas g√©n√©ral), des vitesses de lecture sup√©rieures √† 100 m√©gabits pour la lecture et l'√©criture seront sans importance pour nous, car la communication avec le monde ext√©rieur est limit√©e par ce chiffre. Lorsque vous utilisez des sous-syst√®mes de disques, vous devez penser √† leur consommation d'√©nergie. Winchester 2.5 "consomme ~ 5 watts et n√©cessitera probablement une alimentation s√©par√©e. Vous devez √©galement vous souvenir de l'organisation sp√©cifique de l'entr√©e-sortie vers Raspberry via USB, √©videmment, nous avons un goulot d'√©tranglement de plus: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/cfc/376/82b/cfc37682b520fe14a7043a9304b04b3f.png" alt="sch√©ma fonctionnel du Raspberry Pi 2 mod√®le B"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, le support de test: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
" Interne ": MicoSD 8Gb classe 10</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Externe: SD 32 Go classe 10+ (UHS)</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation et composition de LAMP</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le syst√®me doit √™tre simple, mais avoir toutes les fonctionnalit√©s. </font><font style="vertical-align: inherit;">Par cons√©quent, une exigence n'est rien de plus, mais seul Apache se cachera derri√®re Nginx, car la m√©moire le permet.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syst√®me op√©rateur</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Minibian est install√© sur le support ¬´interne¬ª √† partir de l'image 2015-02-18-wheezy-minibian.img. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit de Debian 7.8 au minimum pour Raspberry. </font><font style="vertical-align: inherit;">Nous faisons une r√©servation, dans le r√©f√©rentiel standard, ils n'attendent pas de PHP sup√©rieur √† 5,5 et d'Apache pas sup√©rieur √† 2,2. </font><font style="vertical-align: inherit;">Ce n'est pas une restriction g√™nante, mais pour cet article, il est utile de v√©rifier la possibilit√© d'utiliser les derni√®res versions. </font><font style="vertical-align: inherit;">Afin d'installer PHP 5.6.x et Apache 2.4.x, qui ne sont pas inclus dans le r√©f√©rentiel standard, j'ai d√ª changer la source de la 8√®me version de Raspbian, le syst√®me apr√®s la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mise</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† </font><i><font style="vertical-align: inherit;">niveau apt-get a</font></i><font style="vertical-align: inherit;"> commenc√© √† avoir la version 8.0.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Version 2.4.10 (Raspbian). </font><font style="vertical-align: inherit;">Gzip est activ√©, tous les modules les plus couramment utilis√©s de la distribution standard sont connect√©s, y compris mod_rewrite, mod_cache ..., sans compter ceux qui sont activ√©s par d√©faut.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Php</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5.6.12-0 + deb8u1 (cli). </font><font style="vertical-align: inherit;">Fonctionne dans Apache en tant que pr√©fork. </font><font style="vertical-align: inherit;">Il existe php-curl, php-gd et d'autres biblioth√®ques populaires.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5.5.44-0 + deb8u1 - (Raspbian).</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nginx</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nginx / 1.6.2. </font><font style="vertical-align: inherit;">Nginx est responsable de la statique. </font><font style="vertical-align: inherit;">La compression Gzip est incluse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Permettez-moi de vous rappeler que tous les journaux sont √©crits sur des supports externes, la base de donn√©es MySQL est l√†, le swap n'est pas d√©sactiv√©, mais vide pendant toute la dur√©e du test. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tant qu'utilitaires auxiliaires, j'utilise PhpMyAdmin, htop, iostat et webmin. </font><font style="vertical-align: inherit;">Exim4 est install√©, mais uniquement pour l'envoi de messages √† partir de formulaires. </font><font style="vertical-align: inherit;">Comme vous pouvez le voir, notre serveur est assez moderne et fonctionnel. </font><font style="vertical-align: inherit;">Je vais d√©cevoir les fans du panneau de contr√¥le VESTA - malheureusement, le fabricant ne prend pas en charge les processeurs ARM et ne le fera pas dans un avenir proche. </font><font style="vertical-align: inherit;">Par cons√©quent, webmin.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essai</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je n'allais pas imm√©diatement faire de tests synth√©tiques, car ils sont plus susceptibles de provenir du domaine d'une th√©orie tr√®s √©loign√©e. En pratique, tout d√©pend fortement de la nature des sites h√©berg√©s, de la r√©partition des charges par le temps, du canal de communication, du nombre de vues, du temps des visiteurs du site ..., ainsi que des param√®tres. En d'autres termes, je propose de voir ce qui se passe r√©ellement sur les sites existants.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les sites Web test√©s ne sont bas√©s sur aucun CMS, mais utilisent l'affichage d'images de la base de donn√©es sur des pages dynamiques (PHP), il peut donc y avoir une charge assez intense sur MySQL. Mais il n'y a aucune connexion AJAX. √âtant donn√© que notre h√©bergement ne pr√©tend pas encore √™tre professionnel, il est consid√©r√© suffisant pour que le test place 16 sites actifs √† faible trafic, dont environ cinq repr√©sentent environ 100-200 personnes par jour, les autres ne sont pas plus de 50 visiteurs pour le m√™me temps. Au total - environ 800 √† 900 personnes par jour, ce qui est comparable en termes de charge acceptable avec un h√©bergement partag√© peu co√ªteux. La moiti√© des visiteurs tombent le soir, les principales visites ont lieu √† 20-22 heures (~ 300 personnes en deux heures, en moyenne 4 vues = 10 vues par minute √† ~ 700 ko chacune = 116 kilo-octets de trafic par seconde).Nous d√©signerons cette heure ¬´heure de pointe¬ª et en m√™me temps nous effectuerons des tests. Il n'y aura que deux types de tests: l'√©valuation des performances √† l'aide de services tiers et un rapport des utilitaires htop et iostat sur le travail r√©el.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. L'heure de g√©n√©ration et de chargement par l'utilisateur des pages aux "heures de pointe"</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous n'utilisons que deux param√®tres principaux - le temps de g√©n√©ration de page et le temps de chargement de page, pour deux types de pages - ¬´lourd¬ª (lourd pour le processeur, car il y a beaucoup d'images de MySQL, longue g√©n√©ration) et ¬´l√©ger¬ª (page PHP dynamique normale). </font><font style="vertical-align: inherit;">Nous r√©p√©terons chaque test 10 fois pour r√©duire la probabilit√© d'un r√©sultat al√©atoire, et nous utiliserons √©galement diff√©rents services.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Permettez-moi de vous rappeler la g√©ographie des serveurs de test et leur charge de travail possible. </font><font style="vertical-align: inherit;">Par cons√©quent, les r√©sultats absolus peuvent varier consid√©rablement, c'est normal. </font><font style="vertical-align: inherit;">J'ai fait des mesures r√©p√©t√©es avec des interruptions de 5 √† 10 minutes afin d'entrer dans diff√©rents temps de chargement des services. </font><font style="vertical-align: inherit;">Le canal de la framboise test√©e est l'optique gigabit, la g√©ographie est la Sib√©rie, 150 m√©gabits garantis √† Moscou. </font><font style="vertical-align: inherit;">Afin de v√©rifier la capacit√© du serveur √† servir plusieurs connexions simultan√©es, des tests ont √©t√© lanc√©s simultan√©ment sur les sites de service suivants:</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page l√©g√®re (547 ko, sans acc√®s MySQL)</font></font></h5><br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PingDom.com, Su√®de</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temps de chargement de la page (46 requ√™tes): minimum - 925 ms, maximum - 1124 ms, moyenne - 955 ms.</font></font><br>
<br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google PageSpeed ‚Äã‚ÄãInsights</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il n'y a rien √† redire sur la vitesse.</font></font><br>
<br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sitespeed.ru</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temps total de chargement des pages 3.9-4.2, moyenne 4.0. </font><font style="vertical-align: inherit;">Temps de g√©n√©ration de page de 139 √† 157, 145 ms en moyenne. </font><font style="vertical-align: inherit;">C'est pourquoi Google n'a aucune plainte - nous entrons dans les 200 ms autoris√©s.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page `Heavy` (843 ko, dont 38 images de 10-15 kb de MySQL)</font></font></h5><br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PingDom.com, Su√®de</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temps de chargement de la page (85 requ√™tes): minimum - 946 ms, maximum - 1001 ms, moyenne - 973 ms.</font></font><br>
<br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google PageSpeed ‚Äã‚ÄãInsights</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il n'y a rien √† redire sur la vitesse.</font></font><br>
<br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sitespeed.ru</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temps total de chargement des pages 5.3-4.2, moyenne 4.0. </font><font style="vertical-align: inherit;">Temps de g√©n√©ration de page de 158 √† 169, 162 ms en moyenne.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Rapport de l'utilitaire htop</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme pr√©vu, Htop a montr√© que le principal consommateur de temps CPU est les processus mysql. </font><font style="vertical-align: inherit;">Ils ont "mang√©" 98 minutes √† partir du dernier jour de temps processeur. </font><font style="vertical-align: inherit;">Ce qui n'est pas surprenant - les requ√™tes fr√©quentes et ¬´lourdes¬ª adress√©es √† la base √©taient initialement suppos√©es de nous. </font><font style="vertical-align: inherit;">S'il y avait des images dans le cache nginx, nous aurions un gain de performances, mais le test est int√©ressant car il mod√©lise l'augmentation de la charge sur MySQL avec une marge, ce qui est d'ailleurs typique de la plupart des CMS.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Rapport de l'utilitaire iostat</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet utilitaire a montr√© des vitesses moyennes de lecture et d'√©criture sur les supports: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. </font><font style="vertical-align: inherit;">Support </font><font style="vertical-align: inherit;">¬´interne¬ª (syst√®me) - 0,87 kb / s en lecture en moyenne, 15,5 kb / s en √©criture en moyenne (probablement en raison de la mise en cache nginx, il y a quelque chose √† am√©liorer en configuration). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. M√©dias ¬´externes¬ª (sites, journaux, bases de donn√©es) - 2,4 kb / s en lecture et 3 kb / s en √©criture (tout va bien ici, la lecture est mise en cache, les journaux sont √©crits).</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Allocation CPU</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Distribution du temps CPU par htop, √©chantillonnage - exactement deux jours de travail (~ 1600 visiteurs uniques servis selon les m√©triques Yandex): </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysql 6,8% </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
htop 1,8% </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nginx 0,75% </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
apache2 &lt;0,3% </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant presque le reste du temps, le processeur s'est repos√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cons√©quence, nous avons une grande marge pour le temps libre du processeur, une marge pour augmenter la fr√©quence du processeur, une marge pour la vitesse du support d'enregistrement. </font><font style="vertical-align: inherit;">De nombreuses optimisations sont disponibles pour configurer √† la fois les programmes serveur (placer le cache nginx sur un support s√©par√©, par exemple) et les sites eux-m√™mes. </font><font style="vertical-align: inherit;">Tous ensemble - un bon potentiel pour augmenter la productivit√© globale.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre visiteur virtuel a appr√©ci√© la vitesse du serveur Web sur le micro-ordinateur, malgr√© le fait qu'il y ait eu d'autres visites simultan√©es. Ainsi, malgr√© les goulots d'√©tranglement (USB et processeur), nous avons une conclusion tr√®s √©vidente - un serveur Web √† part enti√®re sur le Raspberry Pi 2 mod√®le B est r√©el. Tant dans le logiciel que dans les param√®tres techniques. Sur la base de la tr√®s faible charge de travail de l'option envisag√©e, je suppose qu'il sera en mesure de servir rapidement au moins quelques milliers de visiteurs par jour sur le ou les sites moyens.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le multitraitement aide √† faire face aux demandes plus rapidement, il y a suffisamment de m√©moire pour la mise en cache, le transfert de donn√©es via USB est satisfaisant, de sorte que le serveur b√©b√© peut non seulement √©conomiser de l'√©lectricit√©, mais aussi effectuer rapidement (et √† peu de frais!) Le remplacement de l'√©quipement d√©fectueux. Un tel syst√®me peut √™tre rentable lorsqu'il est utilis√© sur un r√©seau d'entreprise en tant que serveur d'entreprise (serveur de base de donn√©es, serveur Web, serveur de sauvegarde, partage de fichiers) par rapport √† d'autres solutions populaires. Et certainement une alternative √† l'h√©bergement virtuel entre de bonnes mains. Par exemple, sur une alimentation √©lectrique sans coupure √©conomique, un micro-ordinateur coupl√© √† un routeur peut fonctionner pendant des heures, de sorte que la question d'une panne de courant courte (et pas si) peut √™tre r√©gl√©e √† la maison,si le site du fournisseur a √©galement UPS. Et vous pouvez √©galement contr√¥ler l'√©lectricit√©, donner des commandes √† divers appareils, connecter une cam√©ra vid√©o et divers capteurs ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essayez, exp√©rimentez, les micro-ordinateurs - ce n'est pas seulement bon march√©, mais aussi agr√©ablement silencieux ...</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr384209/">https://habr.com/ru/post/fr384209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr384197/index.html">Ask Ethan No. 30: Compter de longues sections de temps</a></li>
<li><a href="../fr384199/index.html">La NASA manque de plutonium 238</a></li>
<li><a href="../fr384201/index.html">60 minutes demain: il est temps de se lever sur un hoverboard</a></li>
<li><a href="../fr384203/index.html">Vapeur de cigare. La cigarette √©lectronique WoodStick comme moyen d'arr√™ter de fumer</a></li>
<li><a href="../fr384207/index.html">Dainese a pr√©sent√© une veste de moto avec un airbag automatique</a></li>
<li><a href="../fr384211/index.html">Les voitures √©lectriques Porsche et Audi concurrenceront Tesla</a></li>
<li><a href="../fr384213/index.html">La lentille bionique rend la vision parfaite</a></li>
<li><a href="../fr384217/index.html">37 voyages, deux jours, 185 000 miles gratuits</a></li>
<li><a href="../fr384219/index.html">Robot bricolage ou √©volution group√©</a></li>
<li><a href="../fr384221/index.html">L'Am√©ricain moyen passe plus de temps sur les applications que sur la t√©l√©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>