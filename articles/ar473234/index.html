<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛷️ 🐵 🧗🏽 إنشاء واجهة برمجة تطبيقات REST باستخدام Node.js وقاعدة بيانات Oracle 👩🏻 🧠 🧥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="مرحبا يا هبر! أقدم إليكم ترجمة المقال "إنشاء واجهة برمجة تطبيقات REST: أساسيات خادم الويب" . 

 الجزء 1. إنشاء API REST: أساسيات خادم الويب 
 خادم الو...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>إنشاء واجهة برمجة تطبيقات REST باستخدام Node.js وقاعدة بيانات Oracle</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473234/" style=";text-align:right;direction:rtl"> مرحبا يا هبر!  أقدم إليكم ترجمة المقال <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"إنشاء واجهة برمجة تطبيقات REST: أساسيات خادم الويب"</a> . <br><br><h4 style=";text-align:right;direction:rtl">  الجزء 1. إنشاء API REST: أساسيات خادم الويب </h4><br>  خادم الويب هو أحد أهم مكونات واجهة برمجة تطبيقات REST.  في هذا المنشور ، ستبدأ مشروع REST API الخاص بك عن طريق إنشاء بعض الأدلة والملفات الأولية.  ثم تقوم بإنشاء وحدة خادم الويب وتوصيلها حتى يبدأ خادم الويب في إيقاف التشغيل بشكل صحيح. <br><br>  سيتم تنظيم الكود في هذا المشروع باستخدام بنية دليل مشتركة ، والتي يمكن تعديلها وبناؤها بمرور الوقت حسب الضرورة. <br><br><pre style=";text-align:right;direction:rtl"><code class="javascript hljs">cd ~ mkdir hr_app cd hr_app/ touch index.js mkdir config touch config/web-server.js mkdir controllers mkdir db_apis mkdir services touch services/web-server.js</code> </pre> <br>  يمكن اعتبار ملف index.js الملف "الرئيسي" في التطبيق.  سيكون نقطة الدخول إلى التطبيق.  سنضيف رمزًا إلى هذا الملف وملفات web-server.js في دلائل التكوين والخدمات. <br><br>  الصق التعليمة البرمجية التالية في الملف <b>Home&gt; hr_app&gt; config&gt; web-server.js</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">port</span></span>: process.env.HTTP_PORT || <span class="hljs-number"><span class="hljs-number">3000</span></span> };</code> </pre> <br>  في Node.js ، يحتوي كائن العملية على خاصية env التي تحتوي على بيئة مستخدم.  أنا استخدم هذا لتعيين قيمة المنفذ إلى قيمة متغير البيئة HTTP_PORT.  إذا لم يتم تعريف متغير البيئة هذا ، فإن القيمة الافتراضية هي 3000. <br><a name="habracut"></a><br>  الصق التعليمة البرمجية التالية في <b>الصفحة الرئيسية&gt; hr_app&gt; services&gt; web-server.js</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> http = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> express = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'express'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> webServerConfig = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'../config/web-server.js'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> httpServer; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initialize</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = express(); httpServer = http.createServer(app); app.get(<span class="hljs-string"><span class="hljs-string">'/'</span></span>, (req, res) =&gt; { res.end(<span class="hljs-string"><span class="hljs-string">'Hello World!'</span></span>); }); httpServer.listen(webServerConfig.port) .on(<span class="hljs-string"><span class="hljs-string">'listening'</span></span>, () =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Web server listening on localhost:</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${webServerConfig.port}</span></span></span><span class="hljs-string">`</span></span>); resolve(); }) .on(<span class="hljs-string"><span class="hljs-string">'error'</span></span>, err =&gt; { reject(err); }); }); } <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports.initialize = initialize;</code> </pre> <br>  <b>خطوط 1-3:</b> وحدات متعددة المطلوبة.  يتم تضمين الوحدة النمطية http في Node.js ، ولكن يلزم تثبيت الوحدة النمطية Express عبر npm. <br><br>  <b>الأسطر 7-27:</b> تم التصريح عن وظيفة باسم تهيئة.  تقوم الوظيفة على الفور بإرجاع الوعد ، المسموح به أو المرفوض بناءً على ما إذا كان قد تم تشغيل خادم الويب بنجاح. <br><br>  <b>الأسطر 9-10:</b> يتم إنشاء تطبيق سريع جديد (والذي هو في الواقع مجرد وظيفة) ثم يتم استخدامه لإنشاء خادم http من خلال وحدة http. <br><br>  <b>الأسطر 12-14: يتم استخدام</b> أسلوب الحصول على التطبيق لإضافة معالج لطلبات GET التي تصل إلى مسار الجذر (/).  سيتم استدعاء وظيفة رد الاتصال عند استلام مثل هذا الطلب ، وسوف تستخدم المعلمة "res" (res) لإرسال الرد "Hello World!"  للعميل. <br><br>  <b>الأسطر 16-24:</b> يتم استخدام طريقة استماع الخادم للربط بالمنفذ المحدد وبدء الاستماع إلى الطلبات الواردة. <br><br>  <b>السطر 28:</b> تصدير الوحدة النمطية بحيث يمكن استخدامها خارجيًا <br><br>  الصق التعليمة البرمجية التالية في الملف <b>Home&gt; hr_app&gt; index.js</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> webServer = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./services/web-server.js'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">startup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Starting application'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Initializing web server module'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> webServer.initialize(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (err) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(err); process.exit(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Non-zero failure code } } startup();</span></span></code> </pre> <br>  نقوم بتوصيل وحدة خادم الويب ، ثم تحدد وتطلق على وظيفة بدء التشغيل غير المتزامن.  نظرًا لأن وظيفة التهيئة لخادم الويب تُرجع وعدًا ، يمكنك استخدامه مع async / await ولفه في كتلة try-catch.  إذا نجحت وظيفة التهيئة ، سيعمل خادم الويب ؛  خلاف ذلك ، سيتم اكتشاف ومعالجة أي استثناءات.  كل ما عليك فعله الآن هو تهيئة npm وتثبيت Express - ثم يمكنك بدء تشغيل التطبيق.  قم بتشغيل الأوامر التالية في محطة طرفية من دليل hr_app. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">npm init -y npm install express -s node .</code> </pre> <br>  يتم استخدام الأمر init npm لإنشاء ملف package.json ، والذي يستخدمه npm كملف بيان (العلم -y يقبل الخيارات الافتراضية).  يتم استخدام الأمر npm install لتثبيت صريح (تضيف علامة -s صريحة إلى قائمة التبعية في package.json).  يخزن Npm الوحدات النمطية التي تقوم بتثبيتها في دليل node_modules.  كما أنه ينشئ ملفًا يسمى package.lock.json لتوفير شجرة متطابقة لفريق التطوير. <br><br>  هل ترى الرسالة <b>خادم الويب يستمع على المضيف المحلي: 3000؟</b>  مبروك ، لقد قمت بإنشاء خادم سريع على أساس! <br><br>  وهنا هو ، آخر "مرحبا العالم".  على الرغم من أنها ليست ممتعة بشكل خاص ، إلا أنها خطوة أولى مهمة لواجهة برمجة التطبيقات. <br><br>  عندما تكون جاهزًا ، يمكنك إيقاف تشغيل الخادم عن طريق العودة إلى الجهاز والضغط على ctrl + c. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ca/f1a/d8f/2caf1ad8fd86f8d3512260fb1e68df2d.png" alt="صورة"><br><br><h4 style=";text-align:right;direction:rtl">  الاغلاق التي تسيطر عليها </h4><br>  أثناء إيقاف التشغيل بالضغط على Ctrl + C ، لا يمكنك التحكم في كيفية حدوث ذلك.  للتحكم في عملية إيقاف التشغيل ، تحتاج إلى إغلاق خادم الويب بشكل صريح والخروج من عملية Node.js. <br><br>  الصق التعليمة البرمجية التالية في <b>الصفحة الرئيسية&gt; hr_app&gt; services&gt; web-server.js</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// *** previous code above this line *** function close() { return new Promise((resolve, reject) =&gt; { httpServer.close((err) =&gt; { if (err) { reject(err); return; } resolve(); }); }); } module.exports.close = close;</span></span></code> </pre> <br>  تقوم دالة الإغلاق بإرجاع وعد يتم حله عندما يغلق خادم الويب بنجاح.  توقف طريقة httpServer.close عن إنشاء اتصالات جديدة ، ولكنها لا تفرض إغلاق الاتصالات المفتوحة بالفعل.  اعتمادًا على عدد الاتصالات المفتوحة وما تفعله ، قد تحتاج إلى الانتظار قليلاً حتى يعمل رد الاتصال.  على الرغم من أنك لن تفعل ذلك في هذه الوحدة ، يمكنك استخدام وحدات مخصصة للرمز أو npm مثل http-shutdown لإجبار الاتصالات المفتوحة على الإغلاق. <br><br>  الصق التعليمة البرمجية التالية في الملف <b>Home&gt; hr_app&gt; index.js</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// *** previous code above this line *** async function shutdown(e) { let err = e; console.log('Shutting down'); try { console.log('Closing web server module'); await webServer.close(); } catch (e) { console.log('Encountered error', e); err = err || e; } console.log('Exiting process'); if (err) { process.exit(1); // Non-zero failure code } else { process.exit(0); } } process.on('SIGTERM', () =&gt; { console.log('Received SIGTERM'); shutdown(); }); process.on('SIGINT', () =&gt; { console.log('Received SIGINT'); shutdown(); }); process.on('uncaughtException', err =&gt; { console.log('Uncaught exception'); console.error(err); shutdown(err); });</span></span></code> </pre> <br>  تتعلق أحداث SIGINT و SIGTERM بالإشارات التي يمكن إرسالها إلى عملية لإغلاقها ، على سبيل المثال ، عند الضغط على ctrl + c.  سيحدث حدث uncaughtException عند طرح خطأ JavaScript ، ولكن لا يتم اكتشافه ، ومعالجته باستخدام عبارة try-catch.  حاول بدء وإغلاق التطبيق مرة أخرى.  ستكتشف أن كل شيء يعمل بشكل صحيح عندما ترى رسائل "إيقاف التشغيل" في الجهاز. <br><br><h4 style=";text-align:right;direction:rtl">  التسجيل على الخادم </h4><br>  هناك شيء آخر يكمل وحدة خادم الويب الخاصة بنا: تسجيل HTTP.  هناك العديد من الوحدات النمطية التي يمكنك استخدامها لهذا النوع من تسجيل الدخول ، ولكن مورغان هي واحدة من الوحدات البسيطة.  دعونا تثبيت مورغان باستخدام npm. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">npm install morgan -s</code> </pre> <br>  ثم أضف السطر التالي إلى services / web-server.js تحت السطر الذي يتطلب التعبير عن (السطر 2): <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> morgan = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'morgan'</span></span>);</code> </pre> <br>  يمكنك الآن تمكين وظيفة morgan كبرنامج وسيط يتم من خلاله معالجة جميع الطلبات باستخدام app.use.  أضف هذا السطر قبل الاتصال بـ app.get ، والذي يعرض الرسالة "hello world". <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Combines logging info from request and response app.use(morgan('combined')); // *** app.get call below this line ***</span></span></code> </pre> <br>  لاحظ أن التطبيق. ينشئ خط أنابيب من وظائف الوسيطة التي يمكن أن تتفاعل مع طلبات HTTP والردود.  سيتم تنفيذ وظائف الوسيطة بالترتيب الذي تم تمكينها به.  أعد تشغيل التطبيق وتثبيت الجهاز بحيث يمكنك رؤيته والمتصفح في نفس الوقت.  في كل مرة تقوم فيها بإعادة تحميل الصفحة ، سترى إدخال سجل جديد يظهر في الجهاز.  بشكل افتراضي ، يقوم morgan بتمرير معلومات السجل إلى STDOUT (والذي يتم عرضه في الجهاز الطرفي). <br><br>  ستغطي <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">المقالة التالية</a> أساسيات العمل مع قواعد البيانات ، بما في ذلك تجمعات الاتصال ، والتي ستساعدك على فهم وإنشاء واجهة برمجة تطبيقات REST لـ Node.js. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar473234/">https://habr.com/ru/post/ar473234/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar473222/index.html">قواعد iptables المخصصة لرسو السفن باستخدام zabbix كمثال</a></li>
<li><a href="../ar473224/index.html">التعليم العالي مقابل الكفاءة. رأي منفصل لقاضي في المحكمة الدستورية للاتحاد الروسي بشأن حالة التعليم العالي</a></li>
<li><a href="../ar473228/index.html">وضع بيرل مباشرة من 1987</a></li>
<li><a href="../ar473230/index.html">هل الانترنت عبر الأقمار الصناعية سباق جديد للفضاء؟</a></li>
<li><a href="../ar473232/index.html">ما هو نظام التحكم في الإصدار الذي تستخدمه (في العمل الحقيقي ، أكثر)؟</a></li>
<li><a href="../ar473236/index.html">العمل في مجال تكنولوجيا المعلومات ، وإدارة المشاريع ، وتنظيم وتطوير PD في السحابة: megadigest من 1cloud.ru</a></li>
<li><a href="../ar473242/index.html">ما فهمته لعام استخدام سكوتر كهربائي (أقصر وقت ممكن)</a></li>
<li><a href="../ar473246/index.html">التبرير الرياضي لعدم ملاءمة الجري في السلم الكهربائي في المترو</a></li>
<li><a href="../ar473248/index.html">مشاريع اردوينو DIY: رماية شيطانية الرماية الروبوتية</a></li>
<li><a href="../ar473252/index.html">التطوير الذاتي للمبرمج وسؤال "لماذا؟"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>