<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëçüèø üôçüèΩ üë©‚Äçüëß‚Äçüëß L'impl√©mentation de la biblioth√®que babylonienne ü•ü üö¥üèø ‚ôçÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, vous apprendrez tout sur la biblioth√®que babylonienne, et surtout - comment la recr√©er, et en fait n'importe quelle biblioth√®que. 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>L'impl√©mentation de la biblioth√®que babylonienne</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433336/">  Dans cet article, vous apprendrez tout sur la biblioth√®que babylonienne, et surtout - comment la recr√©er, et en fait n'importe quelle biblioth√®que. <a name="habracut"></a><br><br>  Commen√ßons par les citations de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">biblioth√®que babylonienne</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Luis Borges</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Devis</b> <div class="spoiler_text"><blockquote>  <i>¬´L'univers - certains l'appellent la Biblioth√®que - se compose d'un nombre √©norme, peut-√™tre infini, de galeries hexagonales, avec de larges chambres de ventilation entour√©es de rails bas.</i>  <i>De chaque hexagone, deux √©tages sup√©rieurs et deux √©tages inf√©rieurs sont visibles - √† l'infini. ¬ª</i> </blockquote><br><blockquote>  <i>¬´Une biblioth√®que est une balle dont le centre exact se trouve dans l'un des hexagones et dont la surface est inaccessible.</i>  <i>Sur chaque mur de chaque hexagone, il y a cinq √©tag√®res, sur chaque √©tag√®re, trente-deux livres du m√™me format, chaque livre a quatre cent dix pages, chaque page a quarante lignes, chaque ligne contient environ quatre-vingt lettres noires.</i>  <i>Il y a des lettres sur la colonne vert√©brale du livre, mais elles ne d√©finissent pas ni ne pr√©figurent ce que les pages diront.</i>  <i>Cette diff√©rence, je le sais, semblait autrefois myst√©rieuse. ¬ª</i> </blockquote><br></div></div><br>  Si vous entrez dans un hexagone al√©atoire, montez sur n'importe quel mur, regardez n'importe quelle √©tag√®re et prenez le livre que vous aimez le plus, alors vous √™tes le plus susceptible d'√™tre contrari√©.  Apr√®s tout, vous vous attendiez √† d√©couvrir le sens de la vie l√†-bas, mais vous avez vu un √©trange ensemble de personnages.  Mais ne vous f√¢chez pas si vite!  La plupart des livres n'ont pas de sens, car ils sont une recherche combinatoire de toutes les variantes possibles de vingt-cinq caract√®res ( <b>c'est cet alphabet que Borges a utilis√© dans sa biblioth√®que, mais le lecteur d√©couvrira alors qu'il peut y avoir n'importe quel nombre de caract√®res dans la biblioth√®que</b> ).  La loi principale de la biblioth√®que est qu'il n'y a pas deux livres absolument identiques, donc leur nombre est fini, et la biblioth√®que finira √©galement un jour.  Borges pensait que la biblioth√®que √©tait p√©riodique: <br><br><div class="spoiler">  <b class="spoiler_title">Devis</b> <div class="spoiler_text"><blockquote>  <i>¬´Peut-√™tre que la peur et la vieillesse me trompent, mais je pense que la race humaine - la seule - est proche de l'extinction, et la Biblioth√®que survivra: illumin√©e, inhabit√©e, sans fin, absolument immobile, remplie de volumes pr√©cieux, inutile, incorruptible, myst√©rieuse.</i>  <i>Je viens d'√©crire sans fin.</i>  <i>Je n'ai pas mis ce mot par amour pour la rh√©torique;</i>  <i>Je pense qu'il est logique de supposer que le monde est sans fin.</i>  <i>Ceux qui le jugent limit√© admettent que quelque part dans les couloirs, les escaliers et les hexagones peuvent se terminer pour une raison inconnue - une telle hypoth√®se est absurde.</i>  <i>Ceux qui l'imaginent sans fronti√®res oublient que le nombre de livres possibles est limit√©.</i>  <i>J'ose proposer une telle solution √† ce probl√®me s√©culaire: la biblioth√®que est illimit√©e et p√©riodique.</i>  <i>Si l'√©ternel vagabond entreprenait un voyage dans n'importe quelle direction, il serait en mesure de v√©rifier apr√®s des si√®cles que les m√™mes livres se r√©p√®tent dans le m√™me g√¢chis (qui, une fois r√©p√©t√©, devient ordre - Ordre).</i>  <i>Cet espoir gracieux illumine ma solitude. ¬ª</i> </blockquote><br></div></div><br>  Compar√© au non-sens, il y a tr√®s peu de livres dont le contenu peut au moins √™tre compris par une personne, mais cela ne change pas le fait que la biblioth√®que contient tous les textes qui ont √©t√© et seront jamais invent√©s par une personne.  Et d'ailleurs, depuis l'enfance, vous avez l'habitude de consid√©rer certaines s√©quences de symboles significatives, tandis que d'autres ne le font pas.  En fait, dans le contexte de la biblioth√®que, il n'y a aucune diff√©rence entre eux.  Mais ce qui a du sens a un pourcentage beaucoup plus faible, et nous l'appelons langage.  C'est un moyen de communication entre les gens.  Toute langue ne contient que quelques dizaines de milliers de mots, dont nous connaissons 70% de la force, il s'av√®re donc que nous ne pouvons pas interpr√©ter la plupart de la recherche combinatoire des livres.  Et quelqu'un souffre d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">apoph√©nie</a> et m√™me dans des jeux de caract√®res al√©atoires, il voit une signification cach√©e.  Mais c'est une bonne id√©e pour la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">st√©ganographie</a> !  Eh bien, je continue √† discuter de ce sujet dans les commentaires. <br><br>  Avant de proc√©der √† l'impl√©mentation de cette biblioth√®que, je vais vous surprendre par un fait int√©ressant: si vous souhaitez recr√©er la biblioth√®que babylonienne de Louis Borges, vous n'y arriverez pas, car ses volumes d√©passent le volume de l'Univers visible 10 ^ 611338 (!) Times.  Et √† propos de ce qui se passera dans des biblioth√®ques encore plus grandes, j'ai m√™me peur de penser. <br><br><h2>  Impl√©mentation de la biblioth√®que </h2><br><h3>  Description du module </h3><br>  Notre petite introduction est termin√©e.  Mais ce n'est pas sans signification: maintenant vous comprenez √† quoi ressemble la biblioth√®que babylonienne, et la lecture ne sera que plus int√©ressante.  Mais je vais m'√©loigner de l'id√©e originale, je voulais cr√©er une biblioth√®que ¬´universelle¬ª, qui sera discut√©e plus loin.  J'√©crirai en JavaScript sous Node.js. Que devrait faire la biblioth√®que? <br><ul><li>  Trouvez rapidement le texte souhait√© et affichez son emplacement dans la biblioth√®que </li><li>  D√©finir un titre de livre </li><li>  Trouvez rapidement un livre avec le bon titre </li></ul><br>  De plus, il doit √™tre universel, c'est-√†-dire  n'importe lequel des param√®tres de la biblioth√®que peut √™tre modifi√© si je le souhaite.  Eh bien, je pense que je vais d'abord montrer tout le code du module, nous allons l'analyser en d√©tail, voir comment cela fonctionne, et je dirai quelques mots.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©p√¥t Github</a> <br><br>  Le fichier principal est index.js, toute la logique de la biblioth√®que y est d√©crite, je vais vous expliquer le contenu de ce fichier. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sha512 = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">`js-sha512`</span></span>);</code> </pre> <br>  Nous connectons le module impl√©mentant l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">algorithme de</a> hachage <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sha512</a> .  Cela peut vous sembler √©trange, mais cela nous sera toujours utile. <br>  Quelle est la sortie de notre module?  Il renvoie une fonction, un appel auquel retournera un objet de biblioth√®que avec toutes les m√©thodes n√©cessaires.  Nous pourrions le renvoyer tout de suite, mais g√©rer la biblioth√®que ne serait pas si pratique lorsque nous transmettons des param√®tres √† la fonction et obtenons la biblioth√®que ¬´n√©cessaire¬ª.  Cela nous permettra de cr√©er une biblioth√®que ¬´universelle¬ª.  Puisque j'essaie d'√©crire dans le style ES6, ma fonction de fl√®che accepte un objet comme param√®tres, qui seront ensuite d√©structur√©s dans les variables n√©cessaires: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ lengthOfPage = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4819</span></span></span></span><span class="hljs-function"><span class="hljs-params">, lengthOfTitle = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">31</span></span></span></span><span class="hljs-function"><span class="hljs-params">, digs = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'0123456789abcdefghijklmnopqrstuvwxyz'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, alphabet = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">', .'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, wall = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, shelf = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">, volume = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">31</span></span></span></span><span class="hljs-function"><span class="hljs-params">, page = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">421</span></span></span></span><span class="hljs-function"><span class="hljs-params">, } = {}</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... };</span></span></code> </pre><br>  Passons maintenant en revue les param√®tres.  En tant que param√®tres num√©riques standard, j'ai d√©cid√© de choisir des nombres premiers, car il me semblait que ce serait plus int√©ressant. <br><br><ul><li>  <b>lengthOfPage</b> - nombre, nombre de caract√®res sur une page.  La valeur par d√©faut est 4819. Si nous factorisons ce nombre, nous obtenons 61 et 79. 61 lignes de 79 caract√®res, ou vice versa, mais je pr√©f√®re la premi√®re option. </li><li>  <b>lengthOfTitle</b> - nombre, nombre de caract√®res dans le titre du titre du livre. </li><li>  <b>digs</b> - une cha√Æne, les chiffres possibles d'un nombre avec une base √©gale √† la longueur de cette cha√Æne.  √Ä quoi sert ce num√©ro?  Il contiendra le num√©ro (identifiant) de l'hexagone vers lequel nous voulons aller.  Par d√©faut, il s'agit du latin minuscule et des chiffres de 0 √† 9.  La plupart du texte est cod√© ici, donc ce sera un grand nombre - plusieurs milliers de bits (selon le nombre de caract√®res sur la page), mais il sera trait√© caract√®re par caract√®re. </li><li>  <b>alphabet</b> - la cha√Æne, les caract√®res que nous voulons voir dans la biblioth√®que.  Il en sera rempli.  Pour que tout fonctionne correctement, le nombre de caract√®res de l'alphabet doit √™tre √©gal au nombre de caract√®res de la cha√Æne avec des chiffres possibles du nombre identifiant l'hexagone. </li><li>  <b>mur</b> - nombre, nombre maximal de murs, par d√©faut 5 </li><li>  <b>tablette</b> - num√©ro, num√©ro de <b>tablette</b> maximum, par d√©faut 7 </li><li>  <b>volume</b> - nombre, nombre maximum de livres, par d√©faut 31 </li><li>  <b>page</b> - num√©ro, num√©ro de page maximum, par d√©faut 421 </li></ul><br>  Comme vous pouvez le voir, cela ressemble un peu √† la vraie biblioth√®que babylonienne de Luis Borges.  Mais j'ai dit plus d'une fois que nous cr√©erons des biblioth√®ques ¬´universelles¬ª qui peuvent √™tre la fa√ßon dont nous voulons les voir (par cons√©quent, le nombre hexad√©cimal peut √™tre interpr√©t√© diff√©remment, par exemple, juste l'identifiant d'un endroit o√π est stock√© celui souhait√©) informations).  La biblioth√®que babylonienne n'est que l'une d'entre elles.  Mais tous ont beaucoup en commun - un algorithme est responsable de leurs performances, ce qui sera maintenant discut√©. <br><br><h3>  Algorithmes de recherche et d'affichage des pages </h3><br>  Lorsque nous allons √† une adresse, nous voyons le contenu de la page.  Si nous allons √† nouveau √† la m√™me adresse, le contenu devrait √™tre exactement le m√™me.  Cette propri√©t√© des biblioth√®ques fournit un algorithme pour g√©n√©rer des nombres pseudo-al√©atoires - la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">m√©thode congruente lin√©aire</a> .  Lorsque nous devons s√©lectionner un caract√®re pour g√©n√©rer l'adresse ou, inversement, le contenu de la page, cela nous aidera et le nombre de pages, d'√©tag√®res, etc. sera utilis√© comme grain.  La configuration de mon PRNG: m = 2 ^ 32 (4294967296), a = 22695477, c = 1. Je voudrais √©galement ajouter que dans notre impl√©mentation seul le principe de g√©n√©ration de nombres reste de la m√©thode congruente lin√©aire, le reste est chang√©.  Nous continuons sur la liste des programmes: <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ lengthOfPage = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4819</span></span></span></span><span class="hljs-function"><span class="hljs-params">, lengthOfTitle = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">31</span></span></span></span><span class="hljs-function"><span class="hljs-params">, digs = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'0123456789abcdefghijklmnopqrstuvwxyz'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, alphabet = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">', .'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, wall = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, shelf = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">, volume = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">31</span></span></span></span><span class="hljs-function"><span class="hljs-params">, page = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">421</span></span></span></span><span class="hljs-function"><span class="hljs-params">, } = {}</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> seed = <span class="hljs-number"><span class="hljs-number">13</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   const rnd = (min = 1, max = 0) =&gt; { //   //    min  max seed = (seed * 22695477 + 1) % 4294967296; //   //      return min + seed / 4294967296 * (max - min); //   //   }; const pad = (s, size) =&gt; s.padStart(size, `0`); //   //       let getHash = str =&gt; parseInt(sha512(str).slice(0, 7), 16); //  const mod = (a, b) =&gt; ((a % b) + b) % b; //    const digsIndexes = {}; //     //    digs const alphabetIndexes = {}; //     //    alphabet Array.from(digs).forEach((char, position) =&gt; { //    digs digsIndexes[char] = position; //     //   }); Array.from(alphabet).forEach((char, position) =&gt; { //    alphabet alphabetIndexes[char] = position; //     //   }); return { //    };</span></span></code> </pre><br></div></div><br>  Comme vous pouvez le voir, le grain PRNG change apr√®s chaque r√©ception du num√©ro, et les r√©sultats d√©pendent directement du soi-disant point de r√©f√©rence - le grain, apr√®s quoi les chiffres nous int√©resseront.  (nous g√©n√©rons l'adresse ou obtenons le contenu de la page) <br><br>  La fonction <b>getHash</b> nous aidera √† g√©n√©rer un point de r√©f√©rence.  Nous obtenons simplement un hachage de certaines donn√©es, prenons 7 caract√®res, traduisons en un syst√®me de nombres d√©cimaux et vous avez termin√©! <br><br>  La fonction <b>mod</b> se comporte de la m√™me mani√®re que l'op√©rateur%.  Mais si le dividende est &lt;0 (de telles situations sont possibles), la fonction <b>mod</b> retournera un nombre positif en raison de la structure sp√©ciale, nous en avons besoin pour s√©lectionner correctement les caract√®res de la cha√Æne <b>alphab√©tique</b> lors de la r√©ception du contenu de la page √† l'adresse. <br><br>  Et le dernier morceau de code de dessert est l'objet de biblioth√®que retourn√©: <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { wall, shelf, volume, page, lengthOfPage, lengthOfTitle, search(searchStr) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> wall = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.wall + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, shelf = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.shelf + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, volume = pad(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random()* </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.volume + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), page = pad(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random()* </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.page + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>), locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${volume}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${page}</span></span></span><span class="hljs-string">`</span></span>), hex = <span class="hljs-string"><span class="hljs-string">``</span></span>, depth = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage - searchStr.length) ^ <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; depth; i++){ searchStr = alphabet[<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * alphabet.length ^ <span class="hljs-number"><span class="hljs-number">0</span></span>] + searchStr; } seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; searchStr.length; i++){ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = alphabetIndexes[searchStr[i]] || <span class="hljs-number"><span class="hljs-number">-1</span></span>, rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length), newIndex = mod(index + <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), digs.length), newChar = digs[newIndex]; hex += newChar; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${hex}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${+volume}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${+page}</span></span></span><span class="hljs-string">`</span></span>; }, searchExactly(text) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pos = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage - text.length) ^ <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.search(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">` `</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.repeat(pos)}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${text}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">` `</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.repeat(</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.lengthOfPage - (pos + text.length))}</span></span></span><span class="hljs-string">`</span></span>); }, searchTitle(searchStr) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> wall = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.wall + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, shelf = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.shelf + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, volume = pad(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random()* </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.volume + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${volume}</span></span></span><span class="hljs-string">`</span></span>), hex = <span class="hljs-string"><span class="hljs-string">``</span></span>; searchStr = searchStr.substr(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle); searchStr = searchStr.length == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle ? searchStr : <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${searchStr}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">` `</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.repeat(</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.lengthOfTitle - searchStr.length)}</span></span></span><span class="hljs-string">`</span></span>; seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; searchStr.length; i++){ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = alphabetIndexes[searchStr[i]], rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length), newIndex = mod(index + <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), digs.length), newChar = digs[newIndex]; hex += newChar; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${hex}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${+volume}</span></span></span><span class="hljs-string">`</span></span>; }, getPage(address) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> addressArray = address.split(<span class="hljs-string"><span class="hljs-string">`-`</span></span>), hex = addressArray[<span class="hljs-number"><span class="hljs-number">0</span></span>], locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${pad(addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">3</span></span></span></span><span class="hljs-string"><span class="hljs-subst">], </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${pad(addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">4</span></span></span></span><span class="hljs-string"><span class="hljs-subst">], </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">3</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>), result = <span class="hljs-string"><span class="hljs-string">``</span></span>; seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; hex.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = digsIndexes[hex[i]], rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, digs.length), newIndex = mod(index - <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), alphabet.length), newChar = alphabet[newIndex]; result += newChar; } seed = getHash(result); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (result.length &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage) { result += alphabet[<span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length))]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result.substr(result.length - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage); }, getTitle(address) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> addressArray = address.split(<span class="hljs-string"><span class="hljs-string">`-`</span></span>), hex = addressArray[<span class="hljs-number"><span class="hljs-number">0</span></span>], locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${pad(addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">3</span></span></span></span><span class="hljs-string"><span class="hljs-subst">], </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>), result = <span class="hljs-string"><span class="hljs-string">``</span></span>; seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; hex.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = digsIndexes[hex[i]], rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, digs.length), newIndex = mod(index - <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), alphabet.length), newChar = alphabet[newIndex]; result += newChar; } seed = getHash(result); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (result.length &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle) { result += alphabet[<span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length))]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result.substr(result.length - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle); } };</code> </pre><br></div></div><br>  Au d√©but, nous lui √©crivons les propri√©t√©s de la biblioth√®que que j'ai d√©crite pr√©c√©demment.  Vous pouvez les changer m√™me apr√®s l'appel de la fonction principale (qui, en principe, peut √™tre appel√©e constructeur, mais mon code est faiblement similaire √† l'impl√©mentation de classe de la biblioth√®que, donc je me limiterai au mot ¬´principal¬ª).  Ce comportement n'est peut-√™tre pas tout √† fait ad√©quat, mais flexible.  Passez maintenant en revue chaque m√©thode. <br><br><h3>  M√©thode de recherche </h3><br><pre> <code class="javascript hljs">search(searchStr) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> wall = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.wall + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, shelf = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.shelf + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, volume = pad(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.volume + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), page = pad(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.page + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>), locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${volume}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${page}</span></span></span><span class="hljs-string">`</span></span>), hex = <span class="hljs-string"><span class="hljs-string">``</span></span>, depth = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage - searchStr.length) ^ <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; depth; i++){ searchStr = alphabet[<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * alphabet.length ^ <span class="hljs-number"><span class="hljs-number">0</span></span>] + searchStr; } seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; searchStr.length; i++){ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = alphabetIndexes[searchStr[i]] || <span class="hljs-number"><span class="hljs-number">-1</span></span>, rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length), newIndex = mod(index + <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), digs.length), newChar = digs[newIndex]; hex += newChar; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${hex}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${+volume}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${+page}</span></span></span><span class="hljs-string">`</span></span>; }</code> </pre><br>  Renvoie l'adresse de la cha√Æne <b>searchStr</b> dans la biblioth√®que.  Pour ce faire, s√©lectionnez au hasard <b>mur, √©tag√®re, volume, page</b> .  <b>volume</b> et <b>page</b> √©galement rembourr√©s avec des z√©ros √† la longueur souhait√©e.  Ensuite, concat√©nez-les dans une cha√Æne pour passer √† la fonction <b>getHash</b> .  Le <b>locHash</b> r√©sultant est le point de d√©part, c'est-√†-dire  le grain. <br><br>  Pour une plus grande impr√©visibilit√©, nous <b>compl√©tons la</b> <b>profondeur de</b> <b>searchStr</b> <b>avec des</b> caract√®res pseudo-al√©atoires de l'alphabet, d√©finissons la graine de <b>d√©part</b> sur <b>locHash</b> .  √Ä ce stade, peu importe la fa√ßon dont nous compl√©tons la ligne, vous pouvez donc utiliser le PRNG JavaScript int√©gr√©, ce n'est pas critique.  Vous pouvez l'abandonner compl√®tement pour que les r√©sultats qui nous int√©ressent soient toujours en haut de la page. <br><br>  Il ne reste plus qu'√† g√©n√©rer l'identifiant hexagonal.  Pour chaque caract√®re de la cha√Æne <b>searchStr</b> , <b>nous ex√©cutons</b> l'algorithme: <br><br><ol><li>  Obtenez le num√©ro du caract√®re d' <b>index</b> dans l'alphabet √† partir de l'objet <b>alphabetIndexes</b> .  Si ce n'est pas le cas, retournez -1, mais si cela se produit, vous faites certainement quelque chose de mal. </li><li>  G√©n√©rez un nombre al√©atoire pseudo-al√©atoire en utilisant notre PRNG, dans la plage de 0 √† la longueur de l'alphabet. </li><li>  Calculez le nouvel indice, qui est calcul√© comme la somme du nombre de l' <b>indice de</b> symbole et du nombre pseudo-al√©atoire <b>rand</b> , divis√© modulo la longueur des <b>fouilles</b> . </li><li>  Ainsi, nous avons obtenu le chiffre de l'identifiant hexagonal - <b>newChar</b> (en le prenant √† partir des <b>fouilles</b> ). </li><li>  Ajouter <b>newChar</b> √† l'identifiant <b>hexad√©cimal hex</b> </li></ol><br>  √Ä la fin de la g√©n√©ration <b>hexad√©cimale</b> , nous renvoyons l'adresse compl√®te de l'endroit o√π se trouve la ligne souhait√©e.  Les composants d'adresse sont s√©par√©s par un tiret. <br><br><h3>  M√©thode SearchExactly </h3><br><pre> <code class="javascript hljs">searchExactly(text) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pos = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage - text.length) ^ <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.search(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">` `</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.repeat(pos)}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${text}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">` `</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.repeat(</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.lengthOfPage - (pos + text.length))}</span></span></span><span class="hljs-string">`</span></span>); }</code> </pre><br>  Cette m√©thode fait la m√™me chose que la m√©thode de <b>recherche</b> , mais remplit tous les espaces libres (rend la cha√Æne de <b>recherche searchStr</b> avec une longueur de caract√®res <b>lengthOfPage</b> ).  Lorsque vous consultez une telle page, il appara√Æt qu'il n'y a rien d'autre que votre texte. <br><br><h3>  M√©thode SearchTitle </h3><br><pre> <code class="javascript hljs">searchTitle(searchStr) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> wall = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.wall + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, shelf = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random() * </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.shelf + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, volume = pad(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${(</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random()* </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.volume + </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst"> ^ </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>), locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${volume}</span></span></span><span class="hljs-string">`</span></span>), hex = <span class="hljs-string"><span class="hljs-string">``</span></span>; searchStr = searchStr.substr(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle); searchStr = searchStr.length == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle ? searchStr : <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${searchStr}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">` `</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.repeat(</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.lengthOfTitle - searchStr.length)}</span></span></span><span class="hljs-string">`</span></span>; seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; searchStr.length; i++){ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = alphabetIndexes[searchStr[i]], rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length), newIndex = mod(index + <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), digs.length), newChar = digs[newIndex]; hex += newChar; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${hex}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wall}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${shelf}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${+volume}</span></span></span><span class="hljs-string">`</span></span>; }</code> </pre><br>  La m√©thode <b>searchTitle</b> renvoie l'adresse d'un livre appel√© <b>searchStr</b> .  √Ä l'int√©rieur, c'est tr√®s similaire √† la <b>recherche</b> .  La diff√©rence est que lors du calcul de <b>locHash,</b> nous n'utilisons pas la page pour lier son nom au livre.  Cela ne devrait pas d√©pendre de la page.  <b>searchStr</b> est tronqu√© √† <b>lengthOfTitle</b> et <b>compl√©t√©</b> avec des espaces si n√©cessaire.  De m√™me, l'identifiant hexagonal est g√©n√©r√© et l'adresse re√ßue est retourn√©e.  Veuillez noter qu'il n'y a pas de page, comme c'√©tait le cas lors de la recherche de l'adresse exacte d'un texte arbitraire.  Donc, si vous voulez savoir ce qui se trouve dans le livre avec le nom que vous avez invent√©, d√©cidez de la page que vous souhaitez consulter. <br><br><h3>  M√©thode GetPage </h3><br><pre> <code class="javascript hljs">getPage(address) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> addressArray = address.split(<span class="hljs-string"><span class="hljs-string">`-`</span></span>), hex = addressArray[<span class="hljs-number"><span class="hljs-number">0</span></span>], locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${pad(addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">3</span></span></span></span><span class="hljs-string"><span class="hljs-subst">], </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${pad(addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">4</span></span></span></span><span class="hljs-string"><span class="hljs-subst">], </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">3</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>), result = <span class="hljs-string"><span class="hljs-string">``</span></span>; seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; hex.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = digsIndexes[hex[i]], rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, digs.length), newIndex = mod(index - <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), alphabet.length), newChar = alphabet[newIndex]; result += newChar; } seed = getHash(result); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (result.length &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage) { result += alphabet[<span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length))]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result.substr(result.length - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfPage); }</code> </pre><br>  Le contraire de la m√©thode de <b>recherche</b> .  Sa t√¢che consiste √† renvoyer le contenu de la page √† l'adresse indiqu√©e.  Pour ce faire, nous convertissons l'adresse en un tableau √† l'aide du s√©parateur "-".  Nous avons maintenant un tableau de composants d'adresse: identifiant hexagonal, mur, √©tag√®re, livre, page.  Nous calculons <b>locHash</b> de la m√™me mani√®re que nous l'avons fait dans la m√©thode de <b>recherche</b> .  Nous obtenons le m√™me num√©ro que lors de la g√©n√©ration de l'adresse.  Cela signifie que le PRNG produira les m√™mes nombres, c'est ce comportement qui assure la r√©versibilit√© de nos transformations sur le texte source.  Pour le calculer, nous effectuons l'algorithme sur chaque caract√®re (de facto, c'est un chiffre) de l'identifiant hexagonal: <br><br><ol><li>  Nous calculons l' <b>index</b> dans les <b>digits de</b> cha√Æne.  Prenez-le de <b>digsIndexes</b> . </li><li>  En utilisant le PRNG, nous g√©n√©rons un nombre al√©atoire pseudo-al√©atoire dans la plage 0 √† la base du syst√®me num√©rique d'un grand nombre, √©gal √† la longueur de la cha√Æne contenant les chiffres de ce beau nombre.  Tout est √©vident. </li><li>  Nous calculons la position du symbole du texte source <b>newIndex</b> comme la diff√©rence entre <b>index</b> et <b>rand</b> , divis√© modulo la longueur de l'alphabet.  Il est possible que la diff√©rence soit n√©gative, alors la division habituelle modulo donnera un indice n√©gatif, ce qui ne nous convient pas, nous utilisons donc une version modifi√©e de la division modulo.  (vous pouvez essayer l'option de prendre la valeur absolue de la formule ci-dessus, cela r√©sout √©galement le probl√®me des nombres n√©gatifs, mais en pratique cela n'a pas encore √©t√© test√©) </li><li>  Le caract√®re du texte de la page est <b>newChar</b> , nous obtenons l'index de l'alphabet. </li><li>  Ajoutez un caract√®re de texte au r√©sultat. </li></ol><br>  Le r√©sultat obtenu √† ce stade ne remplira pas toujours la page enti√®re, nous allons donc calculer le nouveau grain √† partir du r√©sultat actuel et remplir l'espace libre avec des caract√®res de l'alphabet.  Le PRNG nous aide √† choisir un symbole. <br><br>  Ceci termine le calcul du contenu de la page, nous le renvoyons, sans oublier de recadrer √† la longueur maximale.  L'identifiant hexagonal √©tait peut-√™tre ind√©cemment grand dans l'adresse d'entr√©e. <br><br><h3>  M√©thode GetTitle </h3><br><pre> <code class="javascript hljs">getTitle(address) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> addressArray = address.split(<span class="hljs-string"><span class="hljs-string">`-`</span></span>), hex = addressArray[<span class="hljs-number"><span class="hljs-number">0</span></span>], locHash = getHash(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">1</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">]}</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${pad(addressArray[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">3</span></span></span></span><span class="hljs-string"><span class="hljs-subst">], </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">2</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>), result = <span class="hljs-string"><span class="hljs-string">``</span></span>; seed = locHash; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; hex.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = digsIndexes[hex[i]], rand = rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, digs.length), newIndex = mod(index - <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rand), alphabet.length), newChar = alphabet[newIndex]; result += newChar; } seed = getHash(result); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (result.length &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle) { result += alphabet[<span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(rnd(<span class="hljs-number"><span class="hljs-number">0</span></span>, alphabet.length))]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result.substr(result.length - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lengthOfTitle); }</code> </pre><br>  Eh bien, l'histoire est la m√™me.  Imaginez que vous lisez la description de la m√©thode pr√©c√©dente, uniquement lors du calcul des grains PRNG, ne prenez pas en compte le num√©ro de page, et ajoutez et recadrez le r√©sultat √† la longueur maximale du titre du livre - <b>lengthOfTitle</b> . <br><br><h2>  Test du module de cr√©ation de biblioth√®ques </h2><br>  Apr√®s avoir examin√© le principe de fonctionnement de toute biblioth√®que de type babylonien - il est temps de tout essayer dans la pratique.  J'utiliserai la configuration au plus pr√®s de celle cr√©√©e par Louis Borges.  Nous rechercherons une simple phrase "habr.com": <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> libraryofbabel = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">`libraryofbabel`</span></span>)({ <span class="hljs-attr"><span class="hljs-attr">lengthOfPage</span></span>: <span class="hljs-number"><span class="hljs-number">3200</span></span>, <span class="hljs-attr"><span class="hljs-attr">alphabet</span></span>: <span class="hljs-string"><span class="hljs-string">`abcdefghijklmnopqrstuvwxyz, .`</span></span>, <span class="hljs-comment"><span class="hljs-comment">//, , ,  digs: `0123456789abcdefghijklmnopqrs`, // - 29-  wall: 4, shelf: 5, volume: 32, page: 410 //   }); //  console.log(libraryofbabel.search(`habr.com`));</span></span></code> </pre><br>  Run, le r√©sultat: <br><br><img src="https://habrastorage.org/webt/in/75/3w/in753wlgenqcq0riibootatdxn4.png" alt="image"><br><br>  Pour le moment, cela ne nous donne rien.  Mais d√©couvrons ce qui se cache derri√®re cette adresse!  Le code sera comme ceci: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> libraryofbabel = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">`libraryofbabel`</span></span>)({ <span class="hljs-attr"><span class="hljs-attr">lengthOfPage</span></span>: <span class="hljs-number"><span class="hljs-number">3200</span></span>, <span class="hljs-attr"><span class="hljs-attr">alphabet</span></span>: <span class="hljs-string"><span class="hljs-string">`abcdefghijklmnopqrstuvwxyz, .`</span></span>, <span class="hljs-comment"><span class="hljs-comment">//, , ,  digs: `0123456789abcdefghijklmnopqrs`, // - 29-  wall: 4, shelf: 5, volume: 32, page: 410 //   }); const text = `habr.com`; //  const adress = libraryofbabel.search(text); //    const clc = require(`cli-color`); //      console.log(libraryofbabel.getPage(adress).replace(text, clc.green(text)));</span></span></code> </pre><br>  R√©sultat: <br><br><img src="https://habrastorage.org/webt/qb/6n/8q/qb6n8qcbd3gyd9xbou3tvgh4czg.png" alt="image"><br><br>  Nous avons trouv√© ce que nous recherchions dans un nombre infini de pages d√©nu√©es de sens (je parie)! <br><br>  Mais c'est loin d'√™tre le seul endroit o√π se trouve cette phrase.  Au prochain d√©marrage du programme, une autre adresse sera g√©n√©r√©e.  Si vous le souhaitez, vous pouvez en enregistrer un et l'utiliser.  L'essentiel est que le contenu des pages ne change jamais.  Regardons le titre du livre dans lequel se trouve notre phrase.  Le code sera le suivant: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> libraryofbabel = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">`libraryofbabel`</span></span>)({ <span class="hljs-attr"><span class="hljs-attr">lengthOfPage</span></span>: <span class="hljs-number"><span class="hljs-number">3200</span></span>, <span class="hljs-attr"><span class="hljs-attr">alphabet</span></span>: <span class="hljs-string"><span class="hljs-string">`abcdefghijklmnopqrstuvwxyz, .`</span></span>, <span class="hljs-comment"><span class="hljs-comment">//, , ,  digs: `0123456789abcdefghijklmnopqrs`, // - 29-  wall: 4, shelf: 5, volume: 32, page: 410 //   }); const text = `habr.com`; //  const adress = libraryofbabel.search(text); //    const clc = require(`cli-color`); //      console.log(libraryofbabel.getPage(adress).replace(text, clc.green(text))); console.log(`\n : ${clc.green(libraryofbabel.getTitle(adress))}`);</span></span></code> </pre><br>  Le titre du livre ressemble √† ceci: <br><br><img src="https://habrastorage.org/webt/3_/ei/e3/3_eie30ck52m1pfmpaix-al2_pu.png" alt="image"><br><br>  Honn√™tement, √ßa n'a pas l'air tr√®s attrayant.  Trouvons alors un livre avec notre phrase dans le titre: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> libraryofbabel = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">`libraryofbabel`</span></span>)({ <span class="hljs-attr"><span class="hljs-attr">lengthOfPage</span></span>: <span class="hljs-number"><span class="hljs-number">3200</span></span>, <span class="hljs-attr"><span class="hljs-attr">alphabet</span></span>: <span class="hljs-string"><span class="hljs-string">`abcdefghijklmnopqrstuvwxyz, .`</span></span>, <span class="hljs-comment"><span class="hljs-comment">//, , ,  digs: `0123456789abcdefghijklmnopqrs`, // - 29-  wall: 4, shelf: 5, volume: 32, page: 410 //   }); const text = `habr.com`; //  const adress = libraryofbabel.searchTitle(text); //    const newAdress = `${adress}-${1}`; //    console.log(libraryofbabel.getPage(newAdress)); //     console.log(libraryofbabel.getTitle(newAdress)); //  ,        :)</span></span></code> </pre><br><img src="https://habrastorage.org/webt/vh/4t/gf/vh4tgfcjmuyvkm6paed3z0z9rco.png" alt="image"><br><br>  Vous comprenez maintenant comment utiliser cette biblioth√®que.  Permettez-moi de d√©montrer la possibilit√© de cr√©er une biblioth√®que compl√®tement diff√©rente.  Maintenant, il sera rempli de uns et de z√©ros, chaque page aura 100 caract√®res, l'adresse sera un nombre hexad√©cimal.  N'oubliez pas d'observer la condition d'√©galit√© des longueurs de l'alphabet et de la cha√Æne de chiffres de notre grand nombre.  Nous rechercherons, par exemple, "10101100101010111001000000".  Nous regardons: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> libraryofbabel = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">`libraryofbabel`</span></span>)({ <span class="hljs-attr"><span class="hljs-attr">lengthOfPage</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">alphabet</span></span>: <span class="hljs-string"><span class="hljs-string">`1010101010101010`</span></span>, <span class="hljs-comment"><span class="hljs-comment">// 1  0,     digs: `0123456789abcdef`, // - 16-  wall: 4, shelf: 5, volume: 32, page: 410 //   }); const text = `10101100101010111001000000`; //  const adress = libraryofbabel.search(text); //    console.log(`\n${adress}\n`); //    const clc = require(`cli-color`); //      console.log(libraryofbabel.getPage(adress).replace(text, clc.green(text))); console.log(`\n : ${clc.green(libraryofbabel.getTitle(adress))}`);</span></span></code> </pre><br><img src="https://habrastorage.org/webt/ns/lz/wu/nslzwulb-mfzpxn1gywod1pd4d8.png" alt="image"><br><br>  Jetons un coup d'≈ìil √† la recherche d'une correspondance compl√®te.  Pour ce faire, <b>revenons</b> √† l'ancien exemple et dans le code, remplacez <b>libraryofbabel.search</b> par <b>libraryofbabel.searchExactly</b> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> libraryofbabel = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">`libraryofbabel`</span></span>)({ <span class="hljs-attr"><span class="hljs-attr">lengthOfPage</span></span>: <span class="hljs-number"><span class="hljs-number">3200</span></span>, <span class="hljs-attr"><span class="hljs-attr">alphabet</span></span>: <span class="hljs-string"><span class="hljs-string">`abcdefghijklmnopqrstuvwxyz, .`</span></span>, <span class="hljs-comment"><span class="hljs-comment">//, , ,  digs: `0123456789abcdefghijklmnopqrs`, // - 29-  wall: 4, shelf: 5, volume: 32, page: 410 //   }); const text = `habr.com`; //  const adress = libraryofbabel.searchExactly(text); //    const clc = require(`cli-color`); //      console.log(libraryofbabel.getPage(adress).replace(text, clc.green(text))); console.log(`\n : ${clc.green(libraryofbabel.getTitle(adress))}`);</span></span></code> </pre><br><img src="https://habrastorage.org/webt/nb/vz/tw/nbvztwt7rggv9cxpp5ekozlhfeq.png" alt="image"><br><br><h2>  Conclusion </h2><br>  Apr√®s avoir lu la description de l'algorithme de fonctionnement de la biblioth√®que, vous avez probablement d√©j√† devin√© que c'√©tait une sorte de tromperie.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque vous recherchez quelque chose de significatif dans la biblioth√®que, il est simplement encod√© sous une forme diff√©rente et affich√© sous une forme diff√©rente. Mais il est si bien servi que vous commencez √† croire en ces rang√©es infinies d'hexagones. En fait, ce n'est rien de plus qu'une abstraction math√©matique. Mais le fait que dans cette biblioth√®que vous puissiez trouver absolument n'importe quoi, n'importe quoi, est vrai. La v√©rit√© est que si vous g√©n√©rez des s√©quences al√©atoires de caract√®res, t√¥t ou tard, vous pouvez obtenir absolument n'importe quel texte. Pour une meilleure compr√©hension de ce sujet, vous pouvez √©tudier </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le th√©or√®me des singes sans fin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez trouver d'autres options pour impl√©menter des biblioth√®ques: utilisez n'importe quel algorithme de chiffrement, o√π le texte chiffr√© sera l'adresse dans votre biblioth√®que compl√®te. D√©cryptage - obtenir le contenu de la page. Ou peut-√™tre essayer</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base64</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , m? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une utilisation possible de la biblioth√®que est de stocker des mots de passe dans certains de ses emplacements. Cr√©ez la configuration dont vous avez besoin, d√©couvrez o√π se trouvent vos mots de passe dans la biblioth√®que (oui, ils existent d√©j√†. Et vous pensiez que c'√©tait vous qui les aviez invent√©s?), Enregistrez l'adresse. Et maintenant, lorsque vous avez besoin de trouver une sorte de mot de passe, il vous suffit de le trouver dans la biblioth√®que. Mais cette approche est dangereuse, car un attaquant peut d√©couvrir la configuration de la biblioth√®que et simplement utiliser votre adresse. Mais s'il ne conna√Æt pas la signification de ce qu'il a trouv√©, il est peu probable que vos donn√©es lui parviennent. Et est-ce vraiment une telle m√©thode de stockage de mot de passe? Non, il a donc sa place.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cette id√©e peut √™tre utilis√©e pour cr√©er une vari√©t√© de "biblioth√®ques". </font><font style="vertical-align: inherit;">Vous pouvez parcourir non seulement les caract√®res, mais aussi les mots entiers ou m√™me les sons! </font><font style="vertical-align: inherit;">Imaginez un endroit o√π vous pouvez √©couter absolument n'importe quel son disponible pour la perception humaine, ou pour trouver une sorte de chanson. </font><font style="vertical-align: inherit;">√Ä l'avenir, je vais certainement essayer de mettre en ≈ìuvre cela. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La version web en russe est disponible </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , elle est d√©ploy√©e sur mon serveur virtuel. </font><font style="vertical-align: inherit;">Je ne connais pas toutes les recherches agr√©ables du sens de la vie dans la biblioth√®que babylonienne, ni ce que vous voulez cr√©er. </font><font style="vertical-align: inherit;">Salut!</font></font> :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr433336/">https://habr.com/ru/post/fr433336/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr433326/index.html">Qualit√© du code</a></li>
<li><a href="../fr433328/index.html">Mieux vaut perdre un jour</a></li>
<li><a href="../fr433330/index.html">R√©solvez les mots crois√©s japonais avec SAT Solver</a></li>
<li><a href="../fr433332/index.html">Prise en charge de Python dans Azure Functions</a></li>
<li><a href="../fr433334/index.html">Comportements XAML pour WPF est d√©sormais Open Source</a></li>
<li><a href="../fr433338/index.html">Pr√©sentation du fabricant d'imprimantes 3D Creality</a></li>
<li><a href="../fr433340/index.html">Appareils sans fil Xiaomi dans la maison intelligente ioBroker</a></li>
<li><a href="../fr433342/index.html">Un autre processeur Verilog simple</a></li>
<li><a href="../fr433344/index.html">Deux succ√®s de l'espace priv√©</a></li>
<li><a href="../fr433346/index.html">Passer de Redshift √† ClickHouse</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>