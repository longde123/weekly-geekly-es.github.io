<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ôüèæ üë®üèΩ‚Äçüíª üå∞ ¬øPor qu√© las fotos / videos autodestruibles en Telegram no son seguros? üë∞üèæ üëåüèæ üöµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="M√°s recientemente, vi un art√≠culo que hablaba sobre la introducci√≥n de mensajes autodestructivos en el mensajero de WhatsApp . Tendr√° una funcionalida...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øPor qu√© las fotos / videos autodestruibles en Telegram no son seguros?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470225/"><img src="https://habrastorage.org/webt/pb/vz/ur/pbvzuriwtjebtwfbawzykgzjnek.png" alt="imagen"><br><br>  M√°s recientemente, vi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un art√≠culo</a> que hablaba sobre la introducci√≥n de <b>mensajes autodestructivos</b> en el mensajero de <b>WhatsApp</b> .  Tendr√° una funcionalidad similar a Telegram, pero si en el mensajero de Durov la eliminaci√≥n se aplica a mensajes ordinarios (chats secretos), tambi√©n se pueden usar en fotos en chats regulares.  Es decir, despu√©s de enviar, suponga que la foto, el interlocutor podr√° verla por un tiempo limitado, y despu√©s, en teor√≠a, se eliminar√° de ambos interlocutores (preferiblemente tambi√©n del servidor), luego WhatsApp planea introducir la eliminaci√≥n de mensajes regulares (y hasta ahora se ha hecho) . <br><br>  Pero hoy no estamos hablando de WhatsApp (porque no lo uso en absoluto), sino de Telegram.  La idea misma de los mensajes autodestructivos no tiene mucha demanda, pero existen aquellos usuarios que los usan, por ejemplo, al enviar documentos o fotos que solo se pueden ver una vez (ejem). <br><br>  Para aquellos que son demasiado flojos para leer, <b>los mensajes autodestructivos en Telegram no son seguros</b> ni confidenciales.  No piense que si env√≠a un documento importante a alguien con quien habla de esta manera, √©l no podr√° guardarlo (y no estoy hablando de una captura de pantalla r√°pida o fotograf√≠as de pantallas de tel√©fonos, Dios no lo quiera) - use chats secretos para esto.  Y para aquellos que est√©n interesados ‚Äã‚Äãen la implementaci√≥n de estos mensajes, pueden continuar leyendo. <a name="habracut"></a><br><br>  Tambi√©n los us√©, aunque no con frecuencia, sino que eran solo "entretenimiento" y no los ve√≠a especialmente.  En el mes de junio de este a√±o, mientras investigaba el <b>UserAPI Telegram</b> , prob√© el env√≠o de fotos y su recepci√≥n.  Me divert√≠, no m√°s.  Y apareci√≥ inter√©s en ver la "vista" del env√≠o de mensajes, y c√≥mo se muestran generalmente en la respuesta.  Me preguntaba c√≥mo se implementa esta funci√≥n "desde adentro", si los archivos se eliminan del servidor de Telegram o si se pueden cifrar de alguna manera. <br><br>  Y para mi sorpresa, estos mensajes pr√°cticamente no son diferentes de los habituales.  Directamente a todos.  Tienen el mismo <b>file_id</b> que las fotos normales, con las que puede obtener el archivo en s√≠.  E incluso si mir√≥ el mensaje y desapareci√≥ en el chat, <b>puede guardarlo / enviarlo / reenviarlo de manera segura</b> y hacer lo mismo que podr√≠a hacer con fotos / videos normales.  Es decir, no se elimina del servidor Telegram. <br><br>  Repito, dichos mensajes no se aplican a los chats secretos, donde la correspondencia est√° en dos dispositivos, y desde otro cliente no puedo acceder a ellos.  Esta caracter√≠stica est√° dise√±ada para chats regulares y parece considerarse "segura".  Pero aqu√≠ es interesante, no he encontrado una descripci√≥n detallada de estos mensajes autodestructivos en ninguna parte.  Es decir, Telegram no parece decirnos que estos mensajes son tan seguros en t√©rminos de acceso (si tiene acceso a la cuenta en s√≠) como, por ejemplo, los mismos chats secretos.  Lo √∫nico que vi fue que Telegram mismo dijo que ning√∫n mensaje, incluso los chats secretos, tienen 100 por ciento de seguridad y que todos son responsables de los mensajes que env√≠a, pero ... <br>  Confieso que se implementar√≠a en algunos WhatsApp / Viber / VK, ni siquiera le prestar√≠a atenci√≥n, pero Telegram es un mensajero muy conveniente que realmente amo, pero lo que odio es su apoyo lleno de voluntarios. <br><br>  En el mismo mes de junio, escrib√≠ a support@telegram.org, donde escrib√≠ una carta completa en dos idiomas.  Dijo no solo sobre mensajes autodestructivos, sino tambi√©n sobre mensajes ordinarios y que Telegram no establece ning√∫n l√≠mite para el reenv√≠o, sino m√°s sobre eso m√°s adelante. <br><br>  Dos meses despu√©s, no me respondieron, as√≠ que tuve que escribir al telegrama de "soporte" para explicar qu√© hacer y d√≥nde escribir al encontrar este tipo de "vulnerabilidad". <br><br>  All√≠, sorprendentemente me respondieron tres horas despu√©s, donde me dijeron que deber√≠a escribir sobre vulnerabilidades graves en el protocolo en security@telegram.org o compartir los detalles aqu√≠.  Adjunto el texto de respuesta original del soporte: <br><br><div class="spoiler">  <b class="spoiler_title">5 de julio, respuesta de apoyo</b> <div class="spoiler_text">  <i>Hola</i>  <i>Puede compartir los detalles aqu√≠ o escribir a security@telegram.org si realmente estamos hablando de alg√∫n tipo de vulnerabilidad en nuestras aplicaciones o protocolo.</i> <br></div></div><br>  Decid√≠ escribir al soporte en s√≠ sobre los "detalles" de las vulnerabilidades, aplicando el video, el script en s√≠ y las soluciones al problema (a continuaci√≥n est√° mi mensaje), pero hasta ahora no he recibido respuesta, ni por correo ni en el soporte en s√≠.  Aparentemente hasta ahora, esto no les molesta.  <s>Mejor hagamos una animaci√≥n de emojis individuales.</s> <br><br>  Adem√°s de la opci√≥n con mensajes autodestructivos, tambi√©n not√© que cualquier mensaje que se elimin√≥, por ejemplo, en un chat privado, grupo, canal, tambi√©n es f√°cil de interceptar.  Esto se realiza utilizando el <b>reenv√≠o habitual de todos los mensajes</b> , por ejemplo, en un grupo separado, y despu√©s de obtenerlos <b>utilizando la ID del mensaje eliminado</b> (ahora las bibliotecas tienen controladores en ellos). <br><br>  Tambi√©n describ√≠ todo el proceso en mi carta (aunque en realidad es simple), con una soluci√≥n al problema en forma de limitar el reenv√≠o de los propios mensajes.  Y si no limita por completo, proh√≠ba el reenv√≠o constante de todos los mensajes.  Creo que el equipo de desarrollo podr√° hacer algunos anti-inundaciones desde adelante. <br><br>  Y con los autodestructivos, simplemente elim√≠nelos del servidor.  Esto no resolver√° el problema, los mensajes a√∫n pueden ser interceptados exactamente en el momento en que se reciben.  Para una eliminaci√≥n completa, todo el algoritmo para leerlos debe ser modificado.  Por ejemplo, para hacer una clave de acceso a cada mensaje y cuando se usa esta tecla, la imagen / video estar√° disponible solo por un tiempo determinado.  Es dif√≠cil para m√≠ encontrar todo el algoritmo para el equipo de desarrollo, lo admito, yo mismo no soy capaz de pensar en todos los aspectos y, en cualquier caso, hay una manera de interceptarlos.  Pero en este momento, se implementan terriblemente, los desarrolladores que se dedicaron a esta funci√≥n deber√≠an ser m√°s responsables del desarrollo de este tipo de funci√≥n.  Bueno, o en casos extremos, solo escriba, en letras rojas y en negrita, que los mensajes autodestructivos son f√°ciles de interceptar y esto no es m√°s que un juguete. <br><br>  Te contar√© sobre m√≠, un estudiante de 15 a√±os, recientemente aficionado al desarrollo en Python, incursion√≥ en la API de usuario y encontr√≥ este tipo de "falla / vulnerabilidad".  Lo que m√°s me enfureci√≥ y me oblig√≥ a escribir todo esto aqu√≠, una implementaci√≥n terrible del soporte de Telegram, que simplemente me ignor√≥ tres veces en 4 meses. <br><br>  Para algunos, esta funci√≥n no ser√° √∫til, no encontrar√° nada malo en la implementaci√≥n deficiente de dichos mensajes, pero creo que, dado que Telegram no est√° interesado en mejorar las funciones actuales, ser√° √∫til que otros solo lo tengan en cuenta. <br><br>  Estoy escribiendo art√≠culos por primera vez, podr√≠a dejar errores en alguna parte, pero espero que me corrijan en los comentarios, indicando.  O, en general, me dir√°n que todo est√° mal e ignorar el apoyo fue una buena soluci√≥n y finalmente me calmar√©.  Tambi√©n adjunto mi mensaje: <br><br><div class="spoiler">  <b class="spoiler_title">Mensaje de soporte para el que no se recibi√≥ respuesta</b> <div class="spoiler_text">  <i>Hola, mi nombre es Khamidov Amal.</i> <i><br><br></i>  <i>Recientemente, escrib√≠ una experiencia de usuario para mi proyecto.</i>  <i>En alg√∫n momento, not√© c√≥mo mi amigo me envi√≥ una foto autoextra√≠ble.</i>  <i>Lo mir√© en mi cliente Android y fue eliminado como deber√≠a ser despu√©s de 10 segundos.</i> <i><br><br></i>  <i>Pero me preguntaba c√≥mo se cifran dichos mensajes y c√≥mo se almacenan sobre la marcha.</i>  <i>Despu√©s de todo, resulta que el cliente de telegramas primero carga la foto en el tel√©fono y, despu√©s de leerla, debe eliminarla.</i> <i><br><br></i>  <i>Escrib√≠ un peque√±o script de Python usando la biblioteca Pyrogram y quer√≠a ver c√≥mo llegaron al cliente.</i> <i><br><br></i>  <i>Me sorprendi√≥ ver que estas "fotos que se borran autom√°ticamente" se parecen a las normales (¬øqu√©?).</i> <i><br></i>  <i>Es decir, si envi√© una foto normal, no ser√≠a diferente de la "autocr√≠tica".</i> <i><br></i>  <i>Despu√©s de eso, escrib√≠ un gui√≥n que env√≠a esta foto en el archivo, y en ese momento, la foto fue a mi canal de prueba como una foto normal.</i>  <i>Y en el tel√©fono desde el que envi√© esta foto m√°s "autoextra√≠ble", ni siquiera fue le√≠da.</i> <i><br><br></i>  <i>Tambi√©n me permiti√≥ ver la foto en mi cliente de escritorio.</i>  <i>Es decir, este script omite la esencia m√°s importante de la foto "autoextra√≠ble".</i> <i><br><br></i>  <i>Considero que es una vulnerabilidad, y considero que es una soluci√≥n para reconsiderar el m√©todo de enviar mensajes de "eliminaci√≥n autom√°tica" y procesarlos en el servidor y no en el dispositivo.</i> <i><br><br></i>  <i>Adem√°s, encontr√© el segundo (casi una vulnerabilidad), que se cre√≥ utilizando el telegrama de la API y no est√° prohibido en absoluto.</i> <i><br><br></i>  <i>Entonces, estamos hablando de mensajes ordinarios.</i> <i><br><br></i>  <i>Tambi√©n escrib√≠ un script regular que env√≠a (reenv√≠a) todos los mensajes del chat a mi grupo y los marca por su ID.</i> <i><br><br></i>  <i>Agregu√© un controlador a este script que responde a todos los mensajes eliminados y proporciona la ID de estos mensajes eliminados (hola pirograma).</i> <i><br><br></i>  <i>Despu√©s de eso, agregu√© un script y ahora, cuando el controlador responde a todos los mensajes eliminados, los verifica con los mensajes del grupo (que contiene todos los mensajes) y busca este mensaje por ID.</i> <i><br><br></i>  <i>Por un lado, esto no viola nada, ya que los telegramas tienen un c√≥digo abierto, todos pueden escribir sus robots de usuario.</i>  <i>pero por otro lado (el ruso es bueno), en la √∫ltima actualizaci√≥n agreg√≥ la funci√≥n de eliminar sus propios mensajes y los de los dem√°s por razones de seguridad, pero estos simples guiones escritos por un ni√±o de 15 a√±os parecen pasar por alto esto Muy seguridad.</i> <i><br><br></i>  <i>Entiendo que todos responden en respuesta que √©l env√≠a, pero una persona puede enviar archivos importantes a una persona innecesaria por error y en este momento borrar√° el mensaje (mientras el interlocutor no ha le√≠do) sin saber que todos estos mensajes pueden verse comprometidos y lo m√°s importante, que los mensajes no est√°n marcados como le√≠dos.</i> <i><br><br></i>  <i>La decisi√≥n, creo, es agregar l√≠mites a los mensajes reenviados y revisar la forma de "leer" los mensajes.</i> <i><br><br></i>  <i>En el segundo video adjunto, ¬øc√≥mo puedo guardar todos los mensajes eliminados sin leerlos?</i> <i><br></i>  <i>Adjunto el video y el gui√≥n que escrib√≠ para mostrar claramente c√≥mo funciona.</i> <br></div></div><br><br>  Y c√≥mo se ve en el c√≥digo (us√≥ la biblioteca Telethon, en Pyrogram es casi lo mismo): <br><br><div class="spoiler">  <b class="spoiler_title">La parte m√°s importante del c√≥digo.</b>  <b class="spoiler_title">El resto es solo una indicaci√≥n de la cuenta, n√∫mero de tel√©fono, etc.</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@client.on(events.NewMessage(func=lambda e: e.is_private and getattr(e, 'photo'))) async def handler(event: message.Message): # event.input_chat may be None, use event.get_input_chat() chat: InputPeerUser = await event.get_input_chat() sender: User = await event.get_sender() photo: Photo = event.photo await client.send_message(img_channel, file=MessageMediaPhoto(photo), message=f'&lt;code&gt;{chat.user_id}&lt;/code&gt;\n' f'&lt;code&gt;{sender.first_name}&lt;/code&gt;\n', parse_mode='HTML')</span></span></code> </pre> <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/470225/">https://habr.com/ru/post/470225/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../470215/index.html">CAGR como una maldici√≥n sobre especialistas, o errores en la predicci√≥n de procesos exponenciales</a></li>
<li><a href="../470217/index.html">Falso DS18B20 a prueba de agua: ¬øqu√© hacer?</a></li>
<li><a href="../470219/index.html">F # 5: Operadores</a></li>
<li><a href="../470221/index.html">Holivar Historia de Runet. Parte 3. Motores de b√∫squeda: Yandex vs Rambler. ¬øC√≥mo no hacer una inversi√≥n?</a></li>
<li><a href="../470223/index.html">Pautas de dise√±o de juegos m√≥viles UX</a></li>
<li><a href="../470227/index.html">¬øC√≥mo entrevistar a un empleador?</a></li>
<li><a href="../470233/index.html">C√≥mo escribir un robot comercial: herramientas para principiantes</a></li>
<li><a href="../470235/index.html">Entrevista con Dmitry Simonov, creador del canal CTORECORDS: "La principal cualidad de techdir es el h√°bito de ganar"</a></li>
<li><a href="../470237/index.html">Literatura de fin de semana: lectura f√°cil para t√©cnicos</a></li>
<li><a href="../470239/index.html">ERP no desarrollado en producci√≥n: en cuidados intensivos o en una morgue?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>