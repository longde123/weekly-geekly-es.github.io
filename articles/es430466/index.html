<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÅ ü§òüèø üöæ Mini AI Cup # 3: Escribiendo un Top Bot üéå üëºüèΩ üì©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A principios de oto√±o, se complet√≥ la competencia para escribir bots Mini AI Cup # 3 (tambi√©n conocida como Mad Cars), en la que los participantes tuv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mini AI Cup # 3: Escribiendo un Top Bot</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/430466/"><p><img src="https://habrastorage.org/webt/uk/nd/_2/uknd_2qxbi4b0qt85hqcoxgvt7i.png"></p><br><p>  A principios de oto√±o, se complet√≥ la competencia para escribir bots <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mini AI Cup # 3</a> (tambi√©n conocida como Mad Cars), en la que los participantes tuvieron que pelear en autos.  Los participantes discutieron mucho sobre lo que funcionar√° y lo que no funcionar√°, las ideas se expresaron y probaron desde simples ifs hasta redes neuronales de entrenamiento, pero los chicos ocuparon los primeros lugares con la llamada "simulaci√≥n".  Intentemos averiguar qu√© es, comparar soluciones para el 1er, 3er y 4to lugar y discutir otras posibles soluciones. </p><a name="habracut"></a><br><h1 id="diskleymer">  Descargo de responsabilidad </h1><br><p>  El art√≠culo fue escrito en colaboraci√≥n con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Alexei Dichkovsky (Comandos)</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Vladimir Kiselev (Valdemar)</a> . </p><br><p>  Para aquellos que solo quieren leer sobre las decisiones de los ganadores, les aconsejo que comiencen de inmediato con el √≠tem "Simulaci√≥n". </p><br><h1 id="postanovka-zadachi">  Declaraci√≥n del problema. </h1><br><p> Esta vez, la mec√°nica del mundo era muy parecida al juego m√≥vil Drive Ahead: a los jugadores se les dio un autom√≥vil con un bot√≥n ubicado en √©l;  la tarea es presionar el bot√≥n del enemigo m√°s r√°pido que √©l.  Si nadie gana en 600 ticks de juego, la carta comienza a hundirse en una pila de basura, que tambi√©n puede presionar un bot√≥n.  En otras palabras, debes proteger tu bot√≥n de los enemigos, el mundo que te rodea y un mont√≥n de basura (vitalmente, s√≠).  A cada jugador se le dieron 5 vidas, el juego pas√≥ de 5 a 9 rondas, mientras que alguien no termin√≥ sus vidas.  Cada ronda se llev√≥ a cabo en un mapa aleatorio y autom√≥viles, lo mismo para ambos participantes.  En total hab√≠a 6 cartas diferentes y 3 tipos de autos, un total de 18 combinaciones diferentes. </p><br><p> Cada ronda se divide en garrapatas.  Una marca es un movimiento, como en el ajedrez.  La √∫nica diferencia es que ambos jugadores van al mismo tiempo.  Hay competiciones donde todos se turnan, o puedes hacer una acci√≥n solo una vez cada pocos movimientos y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">seleccionar unidades como marco</a> . <br>  Cada tic en el bot llega a un estado de paz y se le da la oportunidad de realizar 3 acciones: <code></code> , <code></code> , <code></code> .  Estas acciones hacen que el autom√≥vil vaya en una de las direcciones, y si al mismo tiempo no toca las ruedas de la tierra, entonces le dan una peque√±a rotaci√≥n a todo el cuerpo (un poco de f√≠sica arcade).  Despu√©s de que ambos oponentes hayan elegido una acci√≥n, se inicia una simulaci√≥n del mundo del juego, se considera un nuevo estado y se env√≠a a los jugadores.  Si alguien hizo clic en un bot√≥n, la ronda finaliza y comienza la siguiente.  Todo es simple, pero hay matices. </p><br><p>  Reglas m√°s completas se pueden encontrar <a href="">aqu√≠</a> .  Y mira los juegos finales <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . </p><br><h1 id="obschee-opisanie-resheniya">  Descripci√≥n general de la soluci√≥n </h1><br><p>  La mayor√≠a de las competiciones de escritura de bot son muy similares: hay un n√∫mero finito de ticks (hay aproximadamente 1,500 como m√°ximo para una ronda), hay un n√∫mero finito de acciones posibles, debes elegir una secuencia de acciones para ser mejor que tus oponentes.  Un poco m√°s tarde volveremos a lo que significa ser mejor, pero por ahora descubriremos c√≥mo lidiar con el problema principal: una gran cantidad de opciones: al principio tenemos un estado inicial, luego cada m√°quina puede moverse de tres maneras diferentes, que nos da 9 combinaciones diferentes para dos autos, para el movimiento 1500 ser√° 9 ^ 1500 combinaciones diferentes ... Lo cual es un poco m√°s de lo que nos gustar√≠a si planeamos resolverlos durante la existencia del Universo. </p><br><p>  Aqu√≠ llegamos a lo que <strong>es la simulaci√≥n</strong> .  Este no es alg√∫n tipo de algoritmo, sino simplemente una recreaci√≥n de las reglas del juego con precisi√≥n suficiente o completa para que sea posible clasificar las soluciones.  Por supuesto, no analizaremos todas las soluciones, sino solo una parte de ellas.  Se utilizar√° un algoritmo de b√∫squeda para esto: en el √°rbol de estado del juego estamos buscando lo mejor para nosotros.  Hay muchos algoritmos (desde minimax hasta MCTS), cada uno tiene sus propios matices.  Es mejor familiarizarse con las decisiones que escribieron los participantes en competencias pasadas de IA.  Esto proporcionar√° una comprensi√≥n b√°sica de en qu√© condiciones funcionan los algoritmos y en qu√© no.  Hay muchos enlaces para esto en un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">repositorio especial</a> . </p><br><p>  Al elegir un algoritmo, debe considerar: </p><br><ul><li>  l√≠mite de tiempo para 1 marca (aqu√≠ calcul√© mal mucho este a√±o, pero pude permanecer en el 3er lugar); </li><li>  N√∫mero de jugadores.  Por ejemplo, si hay tres jugadores, ser√° dif√≠cil usar minimax; </li><li>  precisi√≥n de simulaci√≥n, como  esto puede permitir la reutilizaci√≥n de c√°lculos antiguos; </li><li>  "Ramificaci√≥n" del √°rbol de estado (es posible calcular todos los estados posibles al menos 10 movimientos adelante); </li><li>  sentido com√∫n: no comience a escribir MCTS si la competencia dura 4 horas. </li></ul><br><p>  En esta competencia, 1 tick dio alrededor de 10-13 ms (2 minutos para todo el juego).  Durante este tiempo, el bot tuvo que leer los datos, tomar una decisi√≥n y enviar un comando para moverse.  Esto fue suficiente para estimular unos 500-1000 movimientos.  Iterar sobre todos los estados.  El algoritmo de b√∫squeda m√°s simple puede parecer una comparaci√≥n de tres opciones de movimiento: "50 ticks van a la izquierda", "50 ticks van a la derecha", "50 ticks clic en detener".  Y no importa cu√°n simple suene, no est√° muy lejos de la decisi√≥n del ganador. </p><br><p>  Porque  solo contamos 50 movimientos por delante, que en la mayor√≠a de los casos no cuentan hasta el final del juego, entonces necesitamos <strong>una funci√≥n de evaluaci√≥n</strong> que diga cu√°n bueno y malo es el estado del mundo para nosotros.  Muy a menudo, se basa en la heur√≠stica y en la comprensi√≥n de lo que es importante para la victoria.  Por ejemplo, en la competencia rusa de la Copa AI de 2014 hubo carreras, pero podr√≠a ganar si llegara el √∫ltimo, si obtiene m√°s puntos de bonificaci√≥n.  Por lo tanto, la funci√≥n de calificaci√≥n deber√≠a estimular la recolecci√≥n de puntos al mismo tiempo que el movimiento r√°pido a lo largo de la carretera.  La puntuaci√≥n solo se puede calcular para el √∫ltimo estado de la simulaci√≥n (despu√©s de 50 ticks) o como la suma de las estimaciones de los estados intermedios.  A menudo, la estimaci√≥n "se desvanece" a tiempo para que los estados que ocurren antes est√©n m√°s influenciados.  Porque  no podemos predecir con seguridad al enemigo, entonces es menos probable que ocurran opciones futuras, no confiaremos en gran medida en ellas.  Adem√°s, esta t√©cnica hace que el bot sea m√°s r√°pido para completar sus tareas y no posponer todo para m√°s adelante.  Pero vale la pena se√±alar que el bot tomar√° menos riesgos en aras de los beneficios posteriores. </p><br><p>  Como vamos a predecir el estado del mundo en respuesta a nuestras acciones, necesitamos modelar de alguna manera el comportamiento de los enemigos.  No hay nada complicado y hay un par de opciones comunes: </p><br><ul><li>  <strong>Trozo o heur√≠stico</strong> <br>  Se escribe una l√≥gica simple de comportamiento donde el enemigo simplemente no hace nada, o elige acciones basadas en heur√≠sticas simples (por ejemplo, puede usar sus primeras versiones de la estrategia o simplemente repetir el movimiento anterior del oponente). </li><li>  <strong>Usa el mismo algoritmo que t√∫ mismo</strong> <br>  Primero intentamos encontrar las mejores acciones para el enemigo (contra nuestro mejor conjunto de acciones desde el √∫ltimo movimiento, o contra un trozo), y luego buscamos la mejor acci√≥n para nosotros mismos, utilizando el comportamiento que encontr√≥ el enemigo.  Aqu√≠ el bot intentar√° resistir a los enemigos dif√≠ciles.  Esta l√≥gica no funciona bien al comienzo de la competencia, porque  muchos bots siguen siendo muy d√©biles, y tu decisi√≥n ser√° demasiado cautelosa con ellos. </li><li>  <strong>Otros</strong> <br>  El mismo minimax itera sobre todos los movimientos de los jugadores al mismo tiempo, y √©l simplemente no necesitar√° heur√≠stica. </li></ul><br><p>  Si implementa todos los pasos anteriores, lo m√°s probable es que obtenga un bot muy bueno, especialmente si puede elegir una buena funci√≥n de calificaci√≥n.  Pero, mirando a trav√©s de sus peleas, puedes ver que en ciertas situaciones se comporta de manera extra√±a.  Corregir la funci√≥n de evaluaci√≥n para estas situaciones puede ser dif√≠cil o existe un gran riesgo de romper otra l√≥gica.  Aqu√≠ muletas y si vienen al rescate.  S√≠, los √∫ltimos d√≠as de la competencia a menudo se reducen a escribir muletas y ifs para corregir los defectos en cualquier condici√≥n espec√≠fica.  Personalmente, realmente no me gusta esta parte, pero he notado m√°s de una vez que son las muletas en la final las que pueden afectar la disposici√≥n de los lugares entre los diez primeros, lo que significa que un no escrito puede costarle un premio (mi coraz√≥n duele cuando escribo estas palabras, yo Tambi√©n amo hermosos algoritmos y soluciones). </p><br><p>  <strong>P: ¬øEs posible prescindir de la simulaci√≥n?</strong> <br>  <em>R: S√≠, puede usar soluciones en heur√≠stica (√°rboles de decisi√≥n, un mont√≥n de ifs, etc.).</em>  <em>Hay un buen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo</a> con arquitecturas de IA sobre heur√≠stica.</em> </p><br><p>  <strong>P: ¬øCu√°nto mejor es el uso de la simulaci√≥n que los enfoques heur√≠sticos?</strong> <br>  <em>A: Todo depende de la tarea.</em>  <em>Por ejemplo, aqu√≠ algunas combinaciones de cartas y autos podr√≠an codificarse con ifs y siempre ganar (o robar).</em>  <em>Sin embargo, a menudo la simulaci√≥n encuentra soluciones que son dif√≠ciles de pensar por s√≠ mismas o dif√≠ciles de implementar heur√≠sticas.</em>  <em>En este concurso, cuando volteas otro auto, las soluciones en las simulaciones ponen su rueda sobre la rueda del enemigo, que apaga la bandera "en el aire", lo que significa que el enemigo no puede aplicar la rotaci√≥n del cuerpo y girar sobre las ruedas.</em>  <em>Pero la decisi√≥n no pens√≥ en el significado de esto, solo encontr√≥ opciones donde el enemigo caer√≠a m√°s r√°pido en el techo y presionar√≠a su bot√≥n.</em> </p><br><p><img src="https://habrastorage.org/webt/in/i4/wk/ini4wk8qqxl7dfzdzlcegwpmyyq.gif"></p><br><p>  <strong>P: ¬øRedes neuronales y RL?</strong> <br>  <em>R: No importa cu√°n popular sea esto, en las competiciones de bot tales soluciones rara vez funcionan bien.</em>  <em>Aunque las redes neuronales no necesitan simulaci√≥n, porque</em>  <em>simplemente pueden emitir una acci√≥n basada en los par√°metros de entrada del estado actual, a√∫n necesitan aprender algo, y para esto a menudo tienen que escribir un simulador para manejar miles de juegos localmente.</em>  <em>Personalmente, creo que tienen potencial.</em>  <em>Quiz√°s puedan resolver parte del problema o utilizarlo en condiciones de tiempo de respuesta muy limitado.</em> </p><br><p>  <strong>Nota</strong> <br>  <em>Con respecto al n√∫mero finito de acciones posibles, vale la pena aclarar que a veces se permite ajustar "sin problemas" alg√∫n par√°metro.</em>  <em>Por ejemplo, no solo conduce hacia adelante, sino con cierto porcentaje de potencia.</em>  <em>En este caso, la "finitud" del n√∫mero de conclusiones puede lograrse f√°cilmente simplemente usando varios valores, por ejemplo, 0%, 25%, 50%, 75% y 100%.</em>  <em>Muy a menudo, solo dos son suficientes: "completamente encendido" y "completamente apagado".</em> </p><br><h1 id="simulyaciya">  Simulaci√≥n </h1><br><p>  En esta competencia, utilizamos el motor de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">f√≠sica de ardilla</a> lista para usar.  Las expectativas de los organizadores eran que √©l es viejo, probado en el tiempo y tiene muchos envoltorios para que todos puedan incluirlo en su decisi√≥n ... </p><br><p>  En la dura realidad, el motor produce diferentes valores cada vez, lo que dificulta el reinicio para calcular las opciones de movimientos.  El problema se resolvi√≥ "de frente": se escribi√≥ un asignador de memoria en C y se copi√≥ completamente un fragmento de memoria con el estado del mundo.  Tal asignador puso fin a la capacidad de escribir soluciones en lenguajes distintos de C ++ (de hecho, era posible, pero muy laborioso y un asignador a√∫n tendr√≠a que escribirse en C).  Adem√°s, la precisi√≥n de la predicci√≥n estuvo influenciada por el orden de agregar elementos al mundo del juego, que requer√≠a una copia muy precisa del c√≥digo que los organizadores utilizaron para calcular los juegos.  Pero √©l ya estaba en Python.  El √∫ltimo aspecto destacado en el ata√∫d de otros lenguajes de programaci√≥n fue que el motor es antiguo y contiene muchas optimizaciones que no se pueden recrear con precisi√≥n durante la competencia para obtener su propia versi√≥n recortada de la simulaci√≥n f√≠sica. </p><br><p>  Como resultado, el motor, que se supon√≠a deb√≠a dar a todos los participantes las mismas condiciones para simular movimientos, se convirti√≥ en el obst√°culo m√°s dif√≠cil para esto.  M√°s de 10 personas pudieron superarlo. Los primeros 7 lugares en la tabla de clasificaci√≥n fueron ocupados exclusivamente por los muchachos que hicieron una simulaci√≥n precisa, lo que puede servir como evidencia de su importancia en tales competiciones. </p><br><p>  Con la excepci√≥n de un par de participantes que pudieron ingresar al interior de la ardilla listada y optimizar la copia de su estado, el resto tuvo una simulaci√≥n de aproximadamente el mismo rendimiento (lo que hizo que la competencia fuera un poco m√°s interesante, porque sabes que la lucha es por el algoritmo de decisi√≥n, no "qui√©n cuenta m√°s los movimientos"). </p><br><h1 id="algoritm-poiska-i-predskazanie-protivnika">  Algoritmo para buscar y predecir un adversario. </h1><br><p>  A partir de este punto, comienza una descripci√≥n separada de las soluciones.  Los algoritmos se describir√°n en nombre de su autor. </p><br><h3 id="vladimir-kiselev-valdemar-4-mesto">  Vladimir Kiselev (Valdemar) 4to lugar </h3><br><p>  Se utiliz√≥ una b√∫squeda aleatoria (Monte Carlo) para buscar el espacio de la soluci√≥n.  El algoritmo es el siguiente: </p><br><ol><li>  Inicializamos el genoma, una secuencia de acciones (izquierda, derecha, parada) para 60 ticks, datos aleatorios. </li><li>  Toma el mejor genoma encontrado </li><li>  Cambiar aleatoriamente una de las acciones </li><li>  Usando la funci√≥n de evaluaci√≥n obtenemos un n√∫mero, un indicador de cu√°n bueno es el nuevo genoma </li><li>  Si obtiene una mejor soluci√≥n, actualice la mejor soluci√≥n. </li><li>  Repita nuevamente desde el paso 2 </li></ol><br><p>  Mi simulador produjo ~ 100k simulaciones del mundo en 1 segundo, considerando que hay un promedio de ~ 12ms por tic, obtenemos 1200 acciones por tic.  Es decir, en 1 tick logramos pasar por el ciclo completo unas 20 veces. </p><br><p>  Para encontrar la soluci√≥n √≥ptima, este n√∫mero de iteraciones claramente no fue suficiente.  Por lo tanto, la idea con acciones de "estiramiento" se realiz√≥: en lugar del genoma de 60 movimientos, operaremos con una cadena de 12 movimientos "estirados": creemos que cada acci√≥n dura 5 tics seguidos. <br>  Adem√°s: al mejorar la calidad de las mutaciones al reducir la longitud del genoma, la simulaci√≥n tambi√©n se puede ejecutar cada 5 tics y verificar 100 genomas en lugar de 20 (para evitar ca√≠das en el l√≠mite de tiempo, finalmente me detuve en 70). <br>  Menos: las acciones de estiramiento pueden conducir a soluciones no √≥ptimas (por ejemplo, balancearse sobre el parachoques, en lugar de un estante estable) </p><br><p>  Cabe se√±alar las t√©cnicas que han mejorado significativamente la calidad del algoritmo: </p><br><ul><li>  Llevamos a cabo la inicializaci√≥n aleatoria solo en el primer tic, el resto del tiempo reutilizamos la mejor soluci√≥n encontrada con un cambio de 1 movimiento (la acci√≥n en el segundo tic se desplaza al primero, etc., se agrega una acci√≥n aleatoria al final).  Esto mejora en gran medida la calidad de la b√∫squeda, ya que de lo contrario el algoritmo "olvida" lo que iba a hacer en el √∫ltimo tic y produce sacudidas sin sentido en diferentes direcciones. </li><li>  Al comienzo del curso, realizamos cambios m√°s intensivos (cambiamos el genoma 2 o 3 veces en lugar de uno) con la esperanza de romper el m√°ximo local (similitud de temperatura en el m√©todo de simulaci√≥n de recocido). <br>  La intensidad se seleccion√≥ manualmente: las primeras 30 iteraciones hacen 3 mutaciones, las siguientes 10 por 2, luego por 1. </li><li>  Muy importante es la predicci√≥n de las acciones enemigas.  En detrimento del tiempo para buscar nuestra propia soluci√≥n, lanzamos una b√∫squeda aleatoria desde el lado del oponente, a 20 iteraciones, luego 50 para nosotros, utilizando informaci√≥n sobre los movimientos √≥ptimos del oponente. <br>  La mejor decisi√≥n del oponente tambi√©n se reutiliza en el siguiente movimiento con un desplazamiento.  Al mismo tiempo, cuando busco una soluci√≥n para el enemigo, el genoma del √∫ltimo movimiento se usa como mis acciones previstas. </li></ul><br><p>  Durante la competencia, utiliz√≥ activamente herramientas para el desarrollo local, lo que hizo posible encontrar r√°pidamente errores y centrarse en los puntos d√©biles de la estrategia: </p><br><ul><li>  arena local: lanzamiento de muchos partidos contra la versi√≥n anterior; </li><li>  visualizador para el comportamiento de depuraci√≥n; </li><li>  Una secuencia de comandos para recopilar estad√≠sticas sobre coincidencias del sitio: le permite comprender en qu√© mapas y m√°quinas se produce la derrota con mayor frecuencia. </li></ul><br><blockquote>  <strong>mortido</strong> <br>  Contar cada 5 ticks parece arriesgado, especialmente si el enemigo se est√° alejando de las opciones que predice.  Por otro lado, en este mundo de juego por 5 ticks, no pas√≥ mucho. <br>  Adem√°s, en mi decisi√≥n, sin embargo, agregu√© combinaciones aleatorias en cada tic, pero definitivamente no dir√© c√≥mo esto afect√≥ la decisi√≥n. <br><br>  <strong>Comandos:</strong> <br>  Cambiar un par de acciones con tantas simulaciones no parece muy significativo, porque ocurren muy pocos cambios en una sola acci√≥n.  Pero cuando extiendes una acci√≥n a 5 tics de significado, parece volverse m√°s. <br>  Tampoco me gusta la idea en s√≠ misma: tomamos el mejor conjunto e intentamos editarlo en alg√∫n lugar al principio.  Parece il√≥gico que cambiar las primeras marcas dejar√° las siguientes al menos relativamente adecuadas. </blockquote><br><h3 id="aleksandr-kiselev-mortido-3-mesto">  Alexander Kiselev (mortido) 3er lugar </h3><br><p>  Armado con art√≠culos de ganadores de otras competiciones, decid√≠ usar el algoritmo gen√©tico.  Result√≥, sin embargo, algo similar a una b√∫squeda aleatoria o incluso una imitaci√≥n de recocido, pero m√°s sobre eso m√°s adelante. </p><br><p>  Codificamos la soluci√≥n con una matriz de 40 n√∫meros, donde -1, 0 y 1 corresponden a los movimientos <code></code> , <code></code> y <code></code> . </p><br><p>  Al comienzo de cada ronda, calcul√© la cantidad de tiempo que ya hab√≠a gastado en todo el juego, cont√© un nuevo l√≠mite de tiempo basado en cu√°ntas rondas m√°s quedar√≠an, y cada ronda supuse que eran 1200 ticks.  T.O.  Inicialmente, trat√© de pasar no m√°s de 11 ms por turno, pero pod√≠a "caminar" un poco al final si las rondas anteriores eran m√°s r√°pidas que 1200 ticks. </p><br><blockquote>  <strong>Valdemar:</strong> <br>  Curiosamente, este chip empeor√≥ el juego para m√≠.  Result√≥ que siempre es mejor gastar 20-30 ms que 11 primero y 60 al final </blockquote><p>  Un tercio de este tiempo estaba buscando el mejor movimiento del enemigo, el resto fue para calcular mi propia decisi√≥n.  Al buscar un movimiento para el enemigo, mi comportamiento fue modelado como el mejor del √∫ltimo movimiento, cambiado por 1 tic.  Es decir  como si siguiera actuando de acuerdo con el plan elaborado en el √∫ltimo tic, y √©l est√° tratando de resistirse a m√≠. </p><br><p>  La b√∫squeda de la soluci√≥n en s√≠ fue la misma tanto para √©l como para el oponente: </p><br><ol><li>  Tomamos la decisi√≥n del √∫ltimo movimiento y lo cambiamos por 1 movimiento (que ya hemos hecho) </li><li>  Probamos a la poblaci√≥n de soluciones aleatorias hasta que lo llenemos todo </li><li>  Simulamos todas las decisiones y establecemos la aptitud utilizando la funci√≥n de evaluaci√≥n.  Recordamos lo mejor. </li><li>  Si bien hay tiempo para los c√°lculos <br><ol><li>  Sugerencia, siempre agregue 1 mutaci√≥n de la mejor soluci√≥n actual a la poblaci√≥n, recu√©rdelo si es mejor </li><li>  Mientras haya un lugar en la nueva poblaci√≥n y no se haya excedido el tiempo para los c√°lculos (puede ir al piso de una poblaci√≥n poblada) <br><ol><li>  Tomamos dos individuos diferentes y nos vamos con la mejor forma f√≠sica: mam√° </li><li>  Tomamos dos individuos diferentes y nos vamos con la mejor forma f√≠sica: pap√° (no debe coincidir con mam√°) </li><li>  Cruzarlos </li><li>  Mutar si <code>RND &lt;  </code> </li><li>  Simulamos una soluci√≥n y la recordamos, si es la mejor. </li></ol></li></ol></li></ol><br><p>  Como resultado, devolveremos la secuencia de acciones que se considera √≥ptima.  El primer movimiento en √©l se env√≠a como una acci√≥n bot.  Desafortunadamente, hubo un serio inconveniente en mi plan, ya que  el n√∫mero de simulaciones que se pueden hacer en un tic era muy peque√±o (incluso debido a la larga funci√≥n de evaluaci√≥n), luego en el servidor de competencia se realizaron 4 puntos solo 1 vez, y para el enemigo no se realiz√≥ en absoluto.  Esto hizo que el algoritmo se pareciera m√°s a una b√∫squeda aleatoria o un recocido simulado (ya que logramos mutar la soluci√≥n 1 vez desde el √∫ltimo movimiento).  Ya era demasiado tarde para cambiar algo, y logramos mantener el 3er lugar. </p><br><p>  Es importante implementar los algoritmos para cruzar, mutar y generar soluciones aleatorias iniciales, ya que  depende de qu√© decisiones se probar√°n, y una decisi√≥n aleatoria completa no es tan buena como podr√≠a parecer a primera vista (funcionar√°, pero se necesitar√°n muchas m√°s opciones). </p><br><p>  En la versi√≥n final, se generaron decisiones aleatorias en segmentos, que excluyeron las soluciones "espasm√≥dicas" en un solo lugar: </p><br><ol><li>  Equipo aleatorio seleccionado </li><li>  Para toda la longitud de la soluci√≥n (40 movimientos) <br><ol><li>  Escribimos el comando actual en la celda </li><li>  Con una probabilidad del 10% cambiamos el equipo actual a un azar </li></ol></li></ol><br><p>  Seg√∫n una tecnolog√≠a similar, tambi√©n se produjo una mutaci√≥n: un segmento aleatorio de la soluci√≥n se reemplaz√≥ con un comando aleatorio.  El cruce se llev√≥ a cabo eligiendo el punto en el que se tom√≥ la decisi√≥n de 1 padre y despu√©s del 2 ¬∞. </p><br><p>  Me gust√≥ que us√°ramos todo el tiempo disponible para encontrar la mejor soluci√≥n.  No es un gran problema si la soluci√≥n no es la mejor, podemos mejorarla en el siguiente paso, porque  la optimizaci√≥n resulta ser "borrosa" a tiempo.     ,        .  ,      -  ,    .           ,           </p><br><blockquote> <strong>Valdemar:</strong> <br>   1     , ,             . <br><br> <strong>Commandos:</strong> <br>    ‚Äî   -        . <br>         ‚Äî    ,     .         ,     ‚Ä¶      ,        .    "    ‚Äù.         -. </blockquote><br><h3 id="aleksey-dichkovskiy-commandos-1-mesto">   (Commandos) 1  </h3><br><p>        (  ),   <strong>n</strong>  <strong>m</strong>  .    3^2=9 .       <strong>m</strong> + <strong>n</strong>      40 . </p><br><p>  : </p><br><pre> <code class="plaintext hljs">|----------- n  -----------|---------- m  --------| |   ...   |   ...   |</code> </pre> <br><p>          :     ,  ,  .      (   ). </p><br><p>       <strong>n</strong>  <strong>m</strong> ,          .       ,     . </p><br><p>        : </p><br><ol><li>     ,       (       ,   ): <br><ul><li>   ,     ,   ,     . </li><li>       ,      ,   .           .                .            ,       ,      ,     . </li><li>         .   ;        (           ). </li></ul></li><li>       <strong>n</strong>  <strong>m</strong>  .      ,    .1,      ,          .     -  (    )  ,        ‚Äî        ,      ; </li><li>             .   ,     ‚Äî      .    ,       (       ). </li></ol><br><blockquote> <strong>Valdemar:</strong> <br> ,       2    .    .         ,    . <br><br> <strong>mortido:</strong> <br> !   ,       .    .  ,   2    ,   40-60       .  ,        3   . <br> n + m == const ? </blockquote><p>   .  <code>n + m != const</code> ,              .      ,  .  -   . </p><br><h1 id="funkciya-ocenki">   </h1><br><h3 id="vladimir-kiselev-valdemar-4-mesto-1">   (Valdemar) 4  </h3><br><p>   ,       . ,    (  , ,   ..)    [0..1]. <br>           .     :   ,        . <br>            ,    ,      :      ,          . </p><br><p> ,   : </p><br><ul><li>    ‚Äî    70  180  (  :         ). <br>       ,       . </li><li>       0..500 </li><li>   ‚Äî  [2pi, pi/4]   [0, 1] </li><li>    ‚Äî    ,       (    ),   (  ,      ,        ) </li><li>   ‚Äî ,      ,     ,           . <br>      ,  ,       . </li><li>  ‚Äî     .          . </li><li>     Y   ‚Äî    . </li><li>           </li></ul><br><p>  ,       2           , . </p><br><p>           . </p><br><p>         : </p><br><ul><li>  ‚Äú‚Äù      ,       </li><li>  ‚Äú  ‚Äù        ,   ,        . </li></ul><br><blockquote> <strong>mortido:</strong> <br>    , ..      ,     . <br><br> <strong>Commandos:</strong> <br>      ,      .    -  </blockquote><br><h3 id="aleksandr-kiselev-mortido-3-mesto-1">   (mortido) 3  </h3><br><p>        ,      chipmunk.              .     ,      ,     ,   ,   .        . </p><br><p>                    3   <del>  </del>   . </p><br><p>   ,        ( ,     ,   ): </p><br><ul><li>   .          ,  ,        (       ,     ); </li><li>    ,    ‚Äî       ,     ;      ,     1  ; </li><li>   ; </li><li>      (    ,  ); </li><li>       (   ‚Äú+‚Äù,    ‚Äú-‚Äù); <br> -     (   ‚Äú+‚Äù,    ‚Äú-‚Äù);   ,     ,      ,          ; <br>   30    ,       ,      (   ); </li><li>  ,         . </li></ul><br><p>  ,        ,         (,            ,     ) </p><br><blockquote> <strong>Valdemar:</strong> <br>         .    ,     ‚Äú  ,     ,    ‚Äù     ,      (     ..)     . </blockquote><p>  ,    ,        .    . </p><br><blockquote> <strong>Commandos:</strong> <br>   ,   ,   ‚Äú‚Äù‚Ä¶      ?              ,   ‚Äú‚Äù . </blockquote><br><h3 id="aleksey-dichkovskiy-commandos-1-mesto-1">   (Commandos) 1  </h3><br><p>      <code>SquaredWheelsBuggy</code> ,      ..  ,       .     Buggy   ,          ,          (         /). <br> : </p><br><ol><li>   ; </li><li>     ;         ‚Äî ,     ,   1  0; ..        ; </li><li>     .        ;          10      (            ); </li><li>             (       ,    ); </li><li>     (,          ); </li><li>       ‚Äî -    ,   ; </li><li> /     ;       ,       ‚Äî   ;             . </li></ol><br><p>  1-5      ,   .   2     ‚Äú  ‚Äù. </p><br><blockquote> <strong>Valdemar:</strong> <br>     ,        .       ,      . <br><br> <strong>mortido:</strong> <br>      ,     10 . </blockquote><br><h1 id="kostyli-i-ify">   IF' </h1><br><h3 id="vladimir-kiselev-valdemar-4-mesto-2">   (Valdemar) 4  </h3><br><p>      ,            if'.         3    ,         ,           . ,        ,         -. <br>  :      ,    ‚Äú‚Äù   ‚Äî      ,   - ,           (  ,   ) ‚Äî   . </p><br><p>     : </p><br><ul><li>     .      ,        . </li><li>      ‚Äî     ,                  . </li><li>   .      ‚Äú  ‚Äù      . <br>      ,        ,         . <br>                ,      ,      . </li></ul><br><p>        ,    :     .   ,       ,   if'     . </p><br><blockquote> <strong>mortido:</strong> <br>     ,       .            . <br><br> <strong>Commandos:</strong> <br>   if'.   ,    ,    ‚Ä¶          ,     ,     . </blockquote><br><h3 id="aleksandr-kiselev-mortido-3-mesto-2">   (mortido) 3  </h3><br><p>              - . </p><br><p>     3  .    .         .  ‚Äú‚Äù,                  .        ,      ,    . </p><br><p>          ,     ‚Äú‚Äù   .       .     ,        , ,      -  .        .     ,       , ..    . </p><br><p>    ,      ,  ,     ,           ,       .     ‚Ä¶         .    -       ‚Äî  ,     (      ,     ). </p><br><blockquote> <strong>Valdemar:</strong> <br>    ,     .          .        ‚Äú‚Äù ,       if'.  ,           ‚Äî             . </blockquote><p>          ,       +      . ,       . </p><br><blockquote> <strong>Commandos:</strong> <br>   ‚Ä¶  ,  -   ‚Äî   ,      ,   .        ,     ,                . </blockquote><br><h3 id="aleksey-dichkovskiy-commandos-1-mesto-2">   (Commandos) 1  </h3><br><p>         .      (,     ,    ).         (  )   /. </p><br><p>    pill carcass map        ,       ,             (         ).      island map,      ,     . </p><br><p>             island hole  buggy.    /      ,     ,      (  ).       ‚Äî    .  ,          ,    .   SquaredWheelBuggy           .    ,      ,      ,    .  ,   ‚Ä¶    ,      ,     . </p><br><p>    (Pill map, Bus)                 ,        (     /  100% ). </p><br><p>         pill hubble map.    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> (    ),     .       . </p><br><p>               ‚Äî         ,   ... </p><br><p>       ,     .                ,    .          (     ). </p><br><blockquote> <strong>Valdemar:</strong> <br>   ,          ‚Äî        .   ,     . <br><br> <strong>mortido:</strong> <br>     ,     ‚Äú‚Äù  . </blockquote><br><h1 id="emocii">  </h1><br><blockquote> <strong>Valdemar:</strong> <br>     .           ,      .    (   )      . <br>                  .  ‚Äú‚Äù,      ,          , ,  :) <br>  ,  mailru  ,     . <br><br> <strong>mortido:</strong> <br>        :               ,          ‚Ä¶   ,      ,       (      ).     ,     3   ,    ,   ‚Ä¶      . <br><br> <strong>Commandos:</strong> <br> -     ,     . , ,   ,  .    ‚Ä¶       .         ‚Äî     ,      . <br>     ‚Äî       ++.       .       ,       .     1  <del>       </del>     -. </blockquote><br><h1 id="itak">  </h1><br><p> ,           .    ,              .      ,      ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a> . </p><br><p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>  Mail.Ru Group   . </p><br><h1 id="bonus">  Bono </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Valdemar</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mortido</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">   </a> </p><br><div class="spoiler"> <b class="spoiler_title"> ,    </b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/bz/b8/cd/bzb8cdwabur3c-7qbcwzmjokx0o.gif"></p><br><p><img src="https://habrastorage.org/webt/tw/nw/cw/twnwcwndcdjglzq2hhuh0ulxohc.gif"></p><br><p><img src="https://habrastorage.org/webt/ib/jh/vq/ibjhvquma8mwq6meckt2qzteicy.gif"></p><br><p><img src="https://habrastorage.org/webt/4e/eg/c9/4eegc9jvtcg-0namubh_9cqx2ok.gif"></p><br><p><img src="https://habrastorage.org/webt/4f/uw/w8/4fuww8dcs4-fx4nuar8bcur0lpm.gif"></p><br><p><img src="https://habrastorage.org/webt/fz/q3/6u/fzq36ufo15jgjwbd9ev_cnc6mso.gif"></p><br><p><img src="https://habrastorage.org/webt/og/55/dt/og55dtgv4ohguhiucwhn0qwqiak.gif"></p></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es430466/">https://habr.com/ru/post/es430466/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es430454/index.html">Estoy rodeado de idiotas o de c√≥mo trabajar en equipo.</a></li>
<li><a href="../es430456/index.html">Legal Project Management Books por PMI</a></li>
<li><a href="../es430458/index.html">Superconductor de grafeno multicapa: investigaci√≥n de zonas planas</a></li>
<li><a href="../es430460/index.html">Ping√ºino de Troya: haciendo un virus para Linux</a></li>
<li><a href="../es430462/index.html">En Rusia, apareci√≥ un proyecto de ley sobre el suministro de datos de usuarios de redes sociales a un c√≠rculo ilimitado de personas. Redes sociales contra</a></li>
<li><a href="../es430468/index.html">Sensibilizar a los ciudadanos.</a></li>
<li><a href="../es430470/index.html">¬øPor qu√© mantener el contexto en la cuenta del cliente? Honestamente y de manera rentable</a></li>
<li><a href="../es430472/index.html">Red DECT sin costura de bricolaje</a></li>
<li><a href="../es430474/index.html">CephFS vs GlusterFS</a></li>
<li><a href="../es430476/index.html">NCBI Genome Workbench: Investigaci√≥n en peligro de extinci√≥n</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>