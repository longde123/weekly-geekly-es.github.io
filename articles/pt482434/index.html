<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÜóÔ∏è ü§µ üõ∑ Armazenamento AERODISK em processadores dom√©sticos Elbrus 8C üßöüèæ üê´ üíÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° leitores da Habr. Queremos compartilhar not√≠cias extremamente boas. Finalmente, esperamos a produ√ß√£o em s√©rie real de uma nova gera√ß√£o de processa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Armazenamento AERODISK em processadores dom√©sticos Elbrus 8C</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/aerodisk/blog/482434/"><p><img src="https://habrastorage.org/webt/ou/jl/p-/oujlp-a--ob6zgj5myhry58rdkm.jpeg"></p><br><p>  Ol√° leitores da Habr.  Queremos compartilhar not√≠cias extremamente boas.  Finalmente, esperamos a produ√ß√£o em s√©rie real de uma nova gera√ß√£o de processadores russos Elbrus 8C.  Oficialmente, a produ√ß√£o em s√©rie deveria come√ßar j√° em 2016, mas, de fato, foi a produ√ß√£o em massa que come√ßou apenas em 2019 e atualmente cerca de 4000 processadores j√° foram lan√ßados. </p><br><p>  Quase imediatamente ap√≥s o in√≠cio da produ√ß√£o em massa, esses processadores apareceram em nosso Aerodisk, pelo qual queremos agradecer √† empresa NORSI-TRANS, que gentilmente nos forneceu sua plataforma de hardware Yakhont UVM, suportando os processadores Elbrus 8C, por portar o software de armazenamento.  Esta √© uma plataforma moderna e universal que atende a todos os requisitos do MCST.  No momento, a plataforma √© usada por consumidores especiais e operadoras de telecomunica√ß√µes para garantir a implementa√ß√£o de a√ß√µes estabelecidas durante as atividades de busca operacional. </p><br><p>  No momento, a portabilidade foi conclu√≠da com √™xito e agora o armazenamento do AERODISK est√° dispon√≠vel na vers√£o com os processadores Elbrus dom√©sticos. </p><br><p>  Neste artigo, falaremos sobre os pr√≥prios processadores, seu hist√≥rico, arquitetura e, √© claro, sobre nossa implementa√ß√£o de armazenamento no Elbrus. </p><a name="habracut"></a><br><h2 id="istoriya">  A hist√≥ria </h2><br><p>  A hist√≥ria dos processadores Elbrus se origina nos dias da Uni√£o Sovi√©tica.  Em 1973, no Instituto de Mec√¢nica de Precis√£o e Engenharia de Computa√ß√£o.  S.A.  Lebedev (nomeado em homenagem ao mesmo Sergey Lebedev, que anteriormente liderou o desenvolvimento do primeiro computador sovi√©tico MESM, e mais tarde BESM) iniciou o desenvolvimento de sistemas de computa√ß√£o multiprocessadores chamados "Elbrus".  Vsevolod Sergeevich Burtsev liderou o desenvolvimento, e Boris Artashesovich Babayan, que era um dos vice-designers principais, tamb√©m participou ativamente do desenvolvimento. </p><br><p><img src="https://habrastorage.org/webt/32/v3/-z/32v3-ztuwe2lzirl5m-iwar5gog.jpeg"><br>  <em>Vsevolod Sergeevich Burtsev</em> </p><br><p><img src="https://habrastorage.org/webt/nn/y7/op/nny7opn3lokxamvfgphpbp2caxw.png"><br>  <em>Boris Artashesovich Babayan</em> </p><br><p> O principal cliente do projeto foi, obviamente, as For√ßas Armadas da URSS, e essa s√©rie de computadores acabou sendo usada com sucesso para criar centros de computadores de comando e sistemas de disparo para sistemas de defesa antim√≠sseis, bem como outros sistemas para fins especiais. </p><br><p>  O primeiro computador Elbrus foi conclu√≠do em 1978.  Tinha uma arquitetura modular e poderia incluir de 1 a 10 processadores baseados em circuitos de integra√ß√£o m√©dios.  A velocidade desta m√°quina atingiu 15 milh√µes de opera√ß√µes por segundo.  A quantidade de RAM, que era comum em todos os 10 processadores, era de 2 a 20 palavras de m√°quina el√©trica ou 64 MB. </p><br><p>  Mais tarde, descobriu-se que muitas das tecnologias usadas no desenvolvimento da Elbrus ao mesmo tempo eram estudadas no mundo, e a International Business Machine (IBM) estava envolvida nelas, mas o trabalho nesses projetos, diferentemente do trabalho na Elbrus, nunca foi foram conclu√≠das e n√£o resultaram em um produto acabado. </p><br><p>  Segundo Vsevolod Burtsev, os engenheiros sovi√©ticos tentaram aplicar a experi√™ncia mais avan√ßada de desenvolvedores nacionais e estrangeiros.  A arquitetura dos computadores Elbrus tamb√©m foi influenciada pelos computadores Burroughs, pelos desenvolvimentos da Hewlett-Packard e pela experi√™ncia dos desenvolvedores do BESM-6. </p><br><p>  Mas, ao mesmo tempo, muitos desenvolvimentos eram originais.  O mais interessante em "Elbrus-1" foi justamente sua arquitetura. </p><br><p>  O supercomputador criado foi o primeiro computador na URSS a usar a arquitetura superescalar.  O uso maci√ßo de processadores superescalares no exterior come√ßou apenas nos anos 90 do s√©culo passado, com o advento de processadores Intel Pentium acess√≠veis no mercado. </p><br><p>  Al√©m disso, para organizar a transfer√™ncia de fluxos de dados entre dispositivos perif√©ricos e RAM no computador, processadores especiais de entrada / sa√≠da podem ser usados.  Pode haver at√© quatro desses processadores no sistema; eles trabalham em paralelo com o processador central e t√™m sua pr√≥pria mem√≥ria dedicada. </p><br><h3 id="elbrus-2">  Elbrus-2 </h3><br><p>  Em 1985, a Elbrus teve sua continua√ß√£o l√≥gica, o computador Elbrus-2 foi criado e colocado em produ√ß√£o em s√©rie.  Na arquitetura, n√£o era muito diferente do antecessor, mas usava uma nova base de elementos, que permitia aumentar a produtividade geral em quase 10 vezes - de 15 milh√µes de opera√ß√µes por segundo para 125 milh√µes.A RAM do computador aumentou para 16 milh√µes de palavras de 72 bits ou 144 MB.  A taxa de transfer√™ncia m√°xima dos canais de E / S Elbrus-2 foi de 120 MB / s. </p><br><p>  O "Elbrus-2" foi usado ativamente em centros de pesquisa nuclear em Chelyabinsk-70 e em Arzamas-16 no MCC, no sistema de defesa antim√≠sseis A-135, bem como em outras instala√ß√µes militares. </p><br><p><img src="https://habrastorage.org/webt/z1/i4/t4/z1i4t4rscjdds4558nywm7z3kc8.jpeg"><br>  <em>Complex SPRUT C1200 baseado nos processadores Elbrus</em> </p><br><p>  A cria√ß√£o de Elbrus foi apreciada pelos l√≠deres da Uni√£o Sovi√©tica.  Muitos engenheiros receberam ordens e medalhas.  O designer geral Vsevolod Burtsev e v√°rios outros especialistas receberam pr√™mios estaduais.  E Boris Babayan foi premiado com a Ordem da Revolu√ß√£o de Outubro. </p><br><p>  Esses pr√™mios s√£o mais do que merecidos, Boris Babayan disse mais tarde: </p><br><blockquote>  "Em 1978, fabricamos a primeira m√°quina superescalar, Elbrus-1. Agora, no Ocidente, eles fazem superescalares apenas dessa arquitetura. O primeiro superscalar apareceu no 92¬∫ ano, o nosso no 78¬∫. Al√©m disso, a vers√£o do superescalar que fizemos , semelhante ao Pentium Pro, que a Intel fabricou no 95¬∫ ano. " </blockquote><p>  Essas palavras sobre o primado hist√≥rico tamb√©m s√£o confirmadas nos EUA, Keith Diefendorff, desenvolvedor do Motorola 88110, um dos primeiros processadores superscalares ocidentais, escreveu: </p><br><blockquote>  "Em 1978, quase 15 anos antes do surgimento dos primeiros processadores superescalares ocidentais, um processador foi usado no Elbrus-1, com a emiss√£o de duas instru√ß√µes por ciclo, alterando a ordem de execu√ß√£o das instru√ß√µes, renomeando registros e executando por suposi√ß√£o". </blockquote><br><h3 id="elbrus-3">  Elbrus-3 </h3><br><p>  Em 1986, e quase imediatamente ap√≥s a conclus√£o do trabalho no segundo Elbrus, a ITM &amp; VT come√ßou a desenvolver um novo sistema Elbrus-3 usando uma arquitetura de processador fundamentalmente nova.  Boris Babayan chamou essa abordagem de "p√≥s-superescalar".  Foi essa arquitetura, mais tarde chamada VLIW / EPIC, que os processadores Intel Itanium come√ßaram a usar no futuro (em meados dos anos 90) (e na URSS, esses desenvolvimentos come√ßaram em 1986 e terminaram em 1991). </p><br><p>  A ideia de gerenciar explicitamente o paralelismo das opera√ß√µes usando um compilador foi realizada pela primeira vez neste complexo de computa√ß√£o. </p><br><p>  Em 1991, o primeiro e, infelizmente, o √∫nico computador Elbrus-3 foi lan√ßado, que n√£o p√¥de ser totalmente ajustado, e ap√≥s o colapso da Uni√£o Sovi√©tica, ningu√©m precisou, e o desenvolvimento e os planos permaneceram no papel. </p><br><h3 id="predposylki-k-novoy-arhitekture">  Antecedentes da nova arquitetura </h3><br><p>  A equipe que trabalhou na ITMiVT para criar supercomputadores sovi√©ticos n√£o se separou, mas continuou a trabalhar como uma empresa separada sob o nome MCST (Moscow SPARK-Technology Center).  E, no in√≠cio dos anos 90, o ICST iniciou uma coopera√ß√£o ativa com a Sun Microsystems, onde a equipe do ICST participou do desenvolvimento do microprocessador UltraSPARC. </p><br><p>  Foi nesse per√≠odo que surgiu o projeto de arquitetura E2K, que foi originalmente financiado pela Sun.  Mais tarde, o projeto tornou-se completamente independente e toda a propriedade intelectual permaneceu com a equipe do ICST. </p><br><blockquote>  "Se continu√°ssemos a trabalhar com a Sun nessa √°rea, tudo teria pertencido √† Sun. Embora 90% do trabalho tenha sido feito antes do surgimento da Sun".  (Boris Babayan) </blockquote><br><h2 id="arhitektura-e2k">  Arquitetura E2K </h2><br><p>  Quando discutimos a arquitetura dos processadores Elbrus, muitas vezes de nossos colegas do setor de TI, ouvimos as seguintes declara√ß√µes: </p><br><blockquote>  ‚ÄúElbrus √© arquitetura RISC‚Äù <br>  ‚ÄúElbrus √© uma arquitetura EPIC‚Äù <br>  ‚ÄúElbrus √© a arquitetura SPARC‚Äù </blockquote><p>  De fato, nenhuma dessas afirma√ß√µes √© completamente verdadeira e, se for, √© apenas parcialmente. </p><br><p>  A arquitetura do E2K √© uma arquitetura de processador original separada, os principais recursos do E2K s√£o a efici√™ncia energ√©tica e a excelente escalabilidade alcan√ßada ao definir paralelismo expl√≠cito das opera√ß√µes.  A arquitetura E2K foi desenvolvida pela equipe do ICST e √© baseada na arquitetura p√≥s-superscalar (√† la EPIC), com alguma influ√™ncia da arquitetura SPARC (com o passado do RISC).  Ao mesmo tempo, na cria√ß√£o de tr√™s das quatro arquiteturas b√°sicas (superescalares, p√≥s-superescalares e SPARC), o MCST estava diretamente envolvido.  O mundo √© realmente pequeno. </p><br><p>  Para evitar mais confus√£o, desenhamos um diagrama simples, que, embora simplista, mas muito claramente mostra as ra√≠zes da arquitetura E2K. </p><br><p><img src="https://habrastorage.org/webt/_p/di/ek/_pdiekhlikt5q_vpspizfbiznby.png"></p><br><p>  Agora, um pouco mais sobre o nome da arquitetura, em rela√ß√£o ao qual tamb√©m h√° um mal-entendido. </p><br><p>  Em diferentes fontes, voc√™ pode encontrar os seguintes nomes dessa arquitetura: "E2K", "Elbrus", "Elbrus 2000", ELBRUS ("Programa√ß√£o da utiliza√ß√£o de recursos b√°sicos da ExpLicit", ou seja, planejamento expl√≠cito para o uso de recursos b√°sicos).  Todos esses nomes dizem a mesma coisa - sobre arquitetura, mas na documenta√ß√£o t√©cnica oficial, bem como em f√≥runs t√©cnicos, o nome E2K √© usado para designar arquitetura, portanto, no futuro, se falarmos sobre arquitetura de processador, usaremos o termo "E2K" e, se sobre um processador espec√≠fico, usamos o nome "Elbrus". </p><br><h3 id="tehnicheskie-osobennosti-arhitektury-e2k">  Recursos t√©cnicos da arquitetura E2K </h3><br><p>  Em arquiteturas tradicionais, como RISC ou CISC (x86, PowerPC, SPARC, MIPS, ARM), o processador recebe um fluxo de instru√ß√µes projetadas para execu√ß√£o seq√ºencial.  O processador pode detectar opera√ß√µes independentes e execut√°-las em paralelo (superescalidade) e at√© alterar sua ordem (execu√ß√£o extraordin√°ria).  No entanto, a an√°lise din√¢mica de depend√™ncia e o suporte para execu√ß√£o extraordin√°ria t√™m limita√ß√µes no n√∫mero de inicializa√ß√£o e an√°lise de comandos por ciclo.  Al√©m disso, os blocos correspondentes dentro do processador consomem uma quantidade significativa de energia, e sua implementa√ß√£o mais complicada √†s vezes leva a problemas de estabilidade ou seguran√ßa. </p><br><p>  Na arquitetura E2K, o compilador pega a maior parte do trabalho em an√°lise de depend√™ncia e otimiza a ordem das opera√ß√µes.  O processador recebe a chamada entrada.  comandos amplos, em cada um dos quais s√£o codificadas instru√ß√µes para todos os dispositivos executivos do processador que devem ser executados neste rel√≥gio.  O processador n√£o precisa analisar depend√™ncias entre operandos ou reorganizar opera√ß√µes entre comandos amplos: tudo isso √© feito pelo compilador com base na an√°lise do c√≥digo-fonte e no planejamento dos recursos do processador.  Como resultado, o componente de hardware do processador pode ser mais simples e econ√¥mico. </p><br><p>  O compilador √© capaz de analisar o c√≥digo fonte muito mais detalhadamente do que o hardware do processador RISC / CISC e encontrar opera√ß√µes mais independentes.  Portanto, existem mais atuadores simult√¢neos na arquitetura E2K do que nas arquiteturas tradicionais. </p><br><p>  Recursos atuais da arquitetura E2K: </p><br><ul><li>  6 canais de dispositivos l√≥gicos aritm√©ticos (ALU) trabalhando em paralelo. </li><li>  Um arquivo de registro de 256 registros de 84 bits. </li><li>  Suporte de hardware para loops, incluindo pipelining.  Melhora a utiliza√ß√£o da CPU. </li><li>  Dispositivo de pr√©-pagina√ß√£o de dados ass√≠ncronos program√°vel com canais de leitura separados.  Permite ocultar atrasos no acesso √† mem√≥ria e fazer pleno uso da ALU. </li><li>  Suporte para computa√ß√£o especulativa e predicados de bit √∫nico.  Permite reduzir o n√∫mero de transi√ß√µes e executar simultaneamente v√°rias ramifica√ß√µes do programa. </li><li>  Uma equipe ampla capaz de configurar at√© 23 opera√ß√µes em um √∫nico ciclo com enchimento m√°ximo (mais de 33 opera√ß√µes ao embalar operandos em instru√ß√µes vetoriais). </li></ul><br><p><img src="https://habrastorage.org/webt/8a/d3/2t/8ad32tlti3athw8wndcx4kg0ngu.png"></p><br><h3 id="emulyaciya-h86">  Emula√ß√£o X86 </h3><br><p>  Mesmo no est√°gio de design da arquitetura, os desenvolvedores entendiam a import√¢ncia de oferecer suporte ao software criado para a arquitetura Intel x86.  Para isso, foi implementado um sistema de convers√£o din√¢mica (ou seja, no processo de execu√ß√£o do programa ou "on the fly") de c√≥digos bin√°rios x86 em c√≥digos de processador da arquitetura E2K.  Esse sistema pode funcionar no modo de aplicativo (da maneira WINE) e em um modo semelhante ao hipervisor (√© poss√≠vel executar todo o SO convidado para a arquitetura x86). </p><br><p>  Gra√ßas a v√°rios n√≠veis de otimiza√ß√£o, √© poss√≠vel obter alta velocidade do c√≥digo traduzido.  A qualidade da emula√ß√£o da arquitetura x86 √© confirmada pelo lan√ßamento bem-sucedido de mais de 20 sistemas operacionais (incluindo v√°rias vers√µes do Windows) e centenas de aplicativos nos complexos de computa√ß√£o da Elbrus. </p><br><h3 id="zaschischennyy-rezhim-ispolneniya-programm">  Modo de execu√ß√£o do programa protegido </h3><br><p>  Uma das id√©ias mais interessantes herdadas das arquiteturas Elbrus-1 e Elbrus-2 √© a chamada execu√ß√£o segura de programas.  Sua ess√™ncia √© garantir a opera√ß√£o do programa apenas com dados inicializados, verificar todos os acessos √† mem√≥ria por pertencer a um intervalo v√°lido de endere√ßos, fornecer prote√ß√£o entre m√≥dulos (por exemplo, proteger o programa de chamada de um erro na biblioteca).  Todas essas verifica√ß√µes s√£o feitas em hardware.  Para o modo protegido, h√° um compilador completo e uma biblioteca de suporte ao tempo de execu√ß√£o.  Deve-se entender que as restri√ß√µes impostas tornam imposs√≠vel organizar a execu√ß√£o de, por exemplo, c√≥digo escrito em C ++. </p><br><p>  Mesmo no modo de opera√ß√£o "desprotegido" usual dos processadores Elbrus, existem recursos que aumentam a confiabilidade do sistema.  Portanto, a pilha de informa√ß√µes de liga√ß√£o (a cadeia de endere√ßos de retorno para chamadas processuais) √© separada da pilha de dados do usu√°rio e n√£o est√° dispon√≠vel para ataques usados ‚Äã‚Äãem v√≠rus como falsifica√ß√£o do endere√ßo de retorno. </p><br><p>  Esses desenvolvimentos n√£o apenas nos permitem alcan√ßar e, no futuro, superar as arquiteturas concorrentes em termos de desempenho e escalabilidade, mas tamb√©m fornecem prote√ß√£o contra erros que afetam x86 / amd64.  Indicadores como Meltdown (CVE-2017-5754), Spectre (CVE-2017-5753, CVE-2017-5715), RIDL (CVE-2018-12126, CVE-2018-12130), Fallout (CVE-2018-12127), ZombieLoad (CVE-2019-11091) e similares. </p><br><p>  A prote√ß√£o moderna contra vulnerabilidades encontrada na arquitetura x86 / amd64 √© baseada em patches no n√≠vel do sistema operacional.  √â por isso que a queda no desempenho nas gera√ß√µes atuais e anteriores de processadores dessas arquiteturas √© t√£o percept√≠vel e varia de 30% a 80%.  N√≥s, como usu√°rios ativos de processadores x86, sabemos sobre isso, sofremos e continuamos a "comer um cacto", mas a solu√ß√£o para esses problemas est√° na raiz para n√≥s (e, como resultado, para nossos clientes), um benef√≠cio indiscut√≠vel, especialmente se a solu√ß√£o for russa. </p><br><h3 id="tehnicheskie-harakteristiki">  Especifica√ß√µes t√©cnicas </h3><br><p>  Abaixo est√£o as especifica√ß√µes t√©cnicas oficiais dos processadores Elbrus das gera√ß√µes anteriores (4C), atuais (8C), novas (8CB) e futuras (16C) em compara√ß√£o com processadores Intel x86 semelhantes. </p><br><p><img src="https://habrastorage.org/webt/k5/3a/dn/k53adnhxrse033qqcwvvxrqwyis.png"></p><br><p>  Mesmo uma r√°pida olhada nesta tabela mostra (e isso √© muito agrad√°vel) que o atraso tecnol√≥gico dos processadores dom√©sticos, que parecia insuper√°vel h√° 10 anos, agora parece muito pequeno, e em 2021 com o lan√ßamento do Elbrus-16C (que, entre outras coisas, suportar√° virtualiza√ß√£o) ser√° reduzido para dist√¢ncias m√≠nimas. </p><br><h2 id="shd-aerodisk-na-processorah-elbrus-8s">  Armazenamento AERODISK nos processadores Elbrus 8C </h2><br><p>  Passamos da teoria para a pr√°tica.  Como parte da alian√ßa estrat√©gica das empresas MTsST, Aerodisk, Basalt SPO (anteriormente Alt Linux) e NORSI-TRANS, um sistema de armazenamento de dados foi desenvolvido e preparado para opera√ß√£o, que no momento n√£o √© o melhor em termos de seguran√ßa, funcionalidade, custo e desempenho, ent√£o , em nossa opini√£o, uma solu√ß√£o inegavelmente digna que pode fornecer o devido n√≠vel de independ√™ncia tecnol√≥gica de nosso pa√≠s. <br>  Agora os detalhes ... </p><br><h3 id="apparatnaya-chast">  Hardware </h3><br><p>  O hardware do armazenamento √© implementado com base na plataforma universal Yakhont UVM da NORSI-TRANS.  A plataforma Yakhont UVM recebeu o status de equipamento de telecomunica√ß√µes de origem russa e est√° inclu√≠da no registro unificado de produtos radioeletr√¥nicos russos.  O sistema consiste em dois controladores de armazenamento separados (2U cada), que s√£o interconectados por uma interconex√£o Ethernet 1G ou 10G, bem como em prateleiras de disco comuns usando uma conex√£o SAS. </p><br><p>  Obviamente, isso n√£o √© t√£o bonito quanto o formato ‚ÄúCluster in a box‚Äù (quando controladores e unidades com um backplane comum s√£o instalados no mesmo chassi de 2U), que costumamos usar, mas tamb√©m estar√° dispon√≠vel em um futuro pr√≥ximo.  O principal aqui √© funcionar bem, mas pensaremos nos "arcos" mais tarde. </p><br><p><img src="https://habrastorage.org/webt/ev/mg/s7/evmgs7gsr9wnbjyazymhzry_q78.jpeg"></p><br><p><img src="https://habrastorage.org/webt/2b/sa/ta/2bsatabl7o537ee6kkqngy9uixw.jpeg"></p><br><p>  Sob o cap√¥, cada controlador possui uma placa-m√£e com processador √∫nico com quatro slots de RAM (DDR3 para processador 8C).  Cada controlador tamb√©m possui 4 portas Ethernet 1G (duas das quais s√£o utilizadas pelo AERODISK ENGINE como servi√ßo) e tr√™s conectores PCIe para adaptadores Back-end (SAS) e Front-end (Ethernet ou FibreChannel). </p><br><p>  Como discos de inicializa√ß√£o, usamos discos russos SATA SSD da GS Nanotech, que testamos e usamos repetidamente em projetos. </p><br><p><img src="https://habrastorage.org/webt/bz/48/nx/bz48nxtpe4j3ja7gmrappql8pmu.jpeg"></p><br><p>  Quando conhecemos a plataforma, a examinamos cuidadosamente.  N√£o tivemos d√∫vidas sobre a qualidade da montagem e da solda, tudo foi feito de maneira organizada e confi√°vel. </p><br><h3 id="operacionnaya-sistema">  Sistema operacional </h3><br><p>  Como sistema operacional, a vers√£o do Alt 8SP OS √© usada para certifica√ß√£o.  Em um futuro pr√≥ximo, planejamos criar um plug-in e um reposit√≥rio constantemente atualizado para o Alt OS com o software de armazenamento Aerodisk. </p><br><p>  Esta vers√£o da distribui√ß√£o √© constru√≠da na vers√£o est√°vel atual do kernel Linux 4.9 para E2K (uma ramifica√ß√£o com suporte a longo prazo foi transportada pelos especialistas do MCST), complementada por patches de funcionalidade e seguran√ßa.  Todos os pacotes no Alt OS foram coletados diretamente no Elbrus usando o sistema de montagem transacional original do projeto ALT Linux Team, o que permitiu reduzir os custos de m√£o-de-obra para a pr√≥pria porta e prestar mais aten√ß√£o √† qualidade do produto. </p><br><p>  Qualquer vers√£o do Alt OS para Elbrus pode ser significativamente expandida em termos de funcionalidade, usando o reposit√≥rio dispon√≠vel (de cerca de 6 mil pacotes de c√≥digo-fonte para a oitava vers√£o a cerca de 12 para a nona). </p><br><p>  A escolha tamb√©m foi feita porque a empresa Basalt SPO, desenvolvedora do Alt OS, est√° trabalhando ativamente com outros desenvolvedores de software e dispositivos em v√°rias plataformas, fornecendo intera√ß√£o cont√≠nua na estrutura de sistemas de hardware e software. </p><br><h3 id="po-sistemy-hraneniya-dannyh">  Software de armazenamento </h3><br><p>  Ao portar, abandonamos imediatamente a id√©ia de usar a emula√ß√£o x86 suportada no E2K e come√ßamos a trabalhar diretamente com os processadores (j√° que a Alt j√° possui as ferramentas necess√°rias para isso). </p><br><p>  Entre outras coisas, o modo de execu√ß√£o nativo fornece melhor seguran√ßa (as mesmas tr√™s pilhas de hardware em vez de uma) e maior desempenho (n√£o h√° necessidade de alocar um ou dois kernels em oito para o tradutor bin√°rio funcionar, e o compilador faz seu trabalho melhor que o JIT). </p><br><p>  De fato, na implementa√ß√£o do AERODISK ENGINE no E2K, √© suportada a maior parte da funcionalidade de armazenamento existente, que √© em x86.  Como software do sistema de armazenamento, √© usada a vers√£o atual do AERODISK ENGINE (A-CORE vers√£o 2.30) </p><br><p>  Sem problemas, as seguintes fun√ß√µes foram lan√ßadas no E2K e testadas para uso no produto: </p><br><ul><li>  Toler√¢ncia a falhas para at√© dois controladores e E / S de v√°rios caminhos (mpio) </li><li>  Acesso a blocos e arquivos com volumes finos (conjuntos RDG, DDP; protocolos FC, iSCSI, NFS, SMB, incluindo integra√ß√£o com o Active Directory) </li><li>  Diferentes n√≠veis de RAID at√© paridade tripla (incluindo a capacidade de usar o construtor RAID) </li><li>  Armazenamento h√≠brido (combinando SSD e HDD no mesmo pool, ou seja, cache e lacrimejamento) </li><li>  Op√ß√µes de economia de espa√ßo com desduplica√ß√£o e compacta√ß√£o </li><li>  Instant√¢neos ROW, clones e diferentes op√ß√µes de replica√ß√£o </li><li>  E outros recursos pequenos, mas √∫teis, como QoS, hotspare global, VLAN, BOND, etc. </li></ul><br><p>    E2K      ,   ( )    -,     all-flash   20-30%. </p><br><p>     , ,  ,  . </p><br><h3 id="nemnogo-o-proizvoditelnosti">    </h3><br><p>        , ,    . </p><br><p>  ,    (2xCPU E8C 1.3 Ghz, 32 GB RAM + 4 SAS SSD 800GB 3DWD),     RAM-,     DDP    RAID-10   LUN  500G    LUN-  iSCSI (10G Ethernet)  Linux-.                FIO. </p><br><p>     . </p><br><p><img src="https://habrastorage.org/webt/sd/4g/ox/sd4goxz7ia3wzktjxk3pcl4_xdm.png"></p><br><p>         60%, ..   ,      . </p><br><p> ,    highload     -     , ,    ,     80%  ,    . </p><br><p>                . </p><br><h2 id="svetloe-buduschee">   </h2><br><p>    ,    8      ‚Äì   2019         4000 .  ,     4         5000,    . </p><br><p>  ,     ,    ,    . <br>  2020         8,     .  ,   2020   -8        . </p><br><p>    ‚Äî           . </p><br><p>                      ,              (       -16).   ,        . </p><br><p>         ,      ,      ,         ,   .  ,  ,         . </p><br><p>      ,     ,    ,        -   ,     ‚Äì   ,  ,     .     ,  ,       . </p><br><p><img src="https://habrastorage.org/webt/lv/hn/gm/lvhngmwzjvpif378cj77omw09k4.jpeg"></p><br><p>                        .   ,   ,    ,        ! </p><br><p>    , ,   ,  , , .   . </p><br><p>           -      ,  100%  ‚Äì         ))). </p><br><h3 id="ispolzuemye-materialy">   </h3><br><p>     ,   : <br> <a href="https://www.ixbt.com/cpu/e2k-spec.html">https://www.ixbt.com/cpu/e2k-spec.html</a> </p><br><p>      ¬´¬ª: <br> <a href="https://topwar.ru/34409-istoriya-kompyuterov-elbrus.html">https://topwar.ru/34409-istoriya-kompyuterov-elbrus.html</a> </p><br><p>     e2k: <br> <a href="https://ru.wikipedia.org/wiki/%25D0%25AD%25D0%25BB%25D1%258C%25D0%25B1%25D1%2580%25D1%2583%25D1%2581_2000">https://ru.wikipedia.org/wiki/%D0%AD%D0%BB%D1%8C%D0%B1%D1%80%D1%83%D1%81_2000</a> </p><br><p>    4-  (-8)  5-  (-8, 2020 ): <br> <a href="https://ru.wikipedia.org/wiki/%25D0%25AD%25D0%25BB%25D1%258C%25D0%25B1%25D1%2580%25D1%2583%25D1%2581-8%25D0%25A1">https://ru.wikipedia.org/wiki/%D0%AD%D0%BB%D1%8C%D0%B1%D1%80%D1%83%D1%81-8%D0%A1</a> </p><br><p>   6-   (-16, 2021 ): <br> <a href="https://ru.wikipedia.org/wiki/%25D0%25AD%25D0%25BB%25D1%258C%25D0%25B1%25D1%2580%25D1%2583%25D1%2581-16%25D0%25A1">https://ru.wikipedia.org/wiki/%D0%AD%D0%BB%D1%8C%D0%B1%D1%80%D1%83%D1%81-16%D0%A1</a> </p><br><p>    : <br> <a href="http://www.elbrus.ru/elbrus_arch">http://www.elbrus.ru/elbrus_arch</a> </p><br><p>   -  ¬´¬ª     : <br> <a href="http://www.mcst.ru/files/5a9eb2/a10cd8/501810/000003/kim_a._k._perekatov_v._i._feldman_v._m._na_puti_k_rossiyskoy_ekzasisteme_plany_razrabotchikov.pdf">http://www.mcst.ru/files/5a9eb2/a10cd8/501810/000003/kim_a._k._perekatov_v._i._feldman_v._m._na_puti_k_rossiyskoy_ekzasisteme_plany_razrabotchikov.pdf</a> </p><br><p>   ¬´¬ª   ,   : <br> <a href="http://www.mcst.ru/files/5472ef/770cd8/50ea05/000001/rossiyskietehnologiielbrus-it-edu9-201410l.pdf">http://www.mcst.ru/files/5472ef/770cd8/50ea05/000001/rossiyskietehnologiielbrus-it-edu9-201410l.pdf</a> </p><br><p>    ,     : <br> <a href="http://www.mcst.ru/e2k_arch.shtml">http://www.mcst.ru/e2k_arch.shtml</a> </p><br><p>    : <br> <a href="https://www.osp.ru/os/1999/05-06/179819">https://www.osp.ru/os/1999/05-06/179819</a> </p><br><p>  ,  : <br> <a href="https://yadi.sk/i/HDj7d31jTDlDgA">https://yadi.sk/i/HDj7d31jTDlDgA <br></a> </p><br><p>       : <br> <a href="https://altlinux.org/%25D1%258D%25D0%25BB%25D1%258C%25D0%25B1%25D1%2580%25D1%2583%25D1%2581">https://altlinux.org/</a> </p><br><p> <a href="https://sdelanounas.ru/blog/shigorin/">https://sdelanounas.ru/blog/shigorin/</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt482434/">https://habr.com/ru/post/pt482434/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt482420/index.html">JavaFX - ainda n√£o est√° morto</a></li>
<li><a href="../pt482426/index.html">V√§terchen Frost ou seis d√≠gitos para Habr</a></li>
<li><a href="../pt482428/index.html">Dotnetru. 2019. Resultados</a></li>
<li><a href="../pt482430/index.html">Estudar n√£o √© uma loteria, as m√©tricas est√£o mentindo</a></li>
<li><a href="../pt482432/index.html">TI no sistema escolar</a></li>
<li><a href="../pt482436/index.html">Food Design Digest, dezembro de 2019</a></li>
<li><a href="../pt482438/index.html">O que um especialista em TI n√£o deve fazer em 2020?</a></li>
<li><a href="../pt482440/index.html">O resumo de materiais frescos do mundo do front-end da √∫ltima semana n ¬∞ 395 (23 a 29 de dezembro de 2019)</a></li>
<li><a href="../pt482442/index.html">A maior tecnologia falha em 2019</a></li>
<li><a href="../pt482450/index.html">O MVP se tornou um produto ou minha experi√™ncia com o MVP em 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>