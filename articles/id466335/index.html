<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ… ğŸ‘¨ğŸ½â€ğŸ’» ğŸ’» Membuat Aplikasi Slack Menggunakan Fitur 8base â˜‚ï¸ ğŸ‘© ğŸ‘©â€âš•ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Slack adalah aplikasi bagus untuk komunikasi internal antar tim. Salah satu fitur yang kami dapat dengan mudah mengembangkannya dengan membuat dan men...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membuat Aplikasi Slack Menggunakan Fitur 8base</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466335/"><img src="https://habrastorage.org/getpro/habr/post_images/ee8/574/873/ee8574873908032aed87f5703682d618.png" alt="gambar"><br><br>  Slack adalah aplikasi bagus untuk komunikasi internal antar tim.  Salah satu fitur yang kami dapat dengan mudah mengembangkannya dengan membuat dan mengintegrasikan obrolan bot dan perintah slash chat yang memungkinkan pengguna untuk berinteraksi dengan layanan eksternal.  Bot Slack yang sangat baik, sangat populer dan berguna, adalah bot GitHub, yang menerbitkan pembaruan pada permintaan tarik, komitmen, dan ish di saluran. <br><br>  Pada artikel ini, kami akan membuat bot Slack yang menerbitkan pembaruan saat membuat pesanan pada platform e-commerce yang kami kelola. <br><br>  Platform E-commerce adalah aplikasi tanpa server yang dibuat menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">8base</a> .  Pada artikel ini, kita akan menggunakan fungsi 8base untuk mendengarkan Buat acara dalam model data menggunakan pemicu. <br><br>  Pemicu adalah jenis fungsi yang dipicu sebagai respons terhadap peristiwa mutasi data: <i>membuat</i> , <i>memperbarui,</i> atau menghapus objek.  8base menyediakan dua jenis pemicu, tergantung pada apakah pengembang ingin menjalankan fungsi sebelum atau setelah mengubah data: trigger.before dan trigger.after. <br><br><h4>  Anda akan membutuhkannya </h4><br><ul><li>  Pemahaman dasar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">React</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Node.js.</a>  Sebelum Anda mulai, pastikan Anda memiliki Node dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">npm</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">benang terpasang</a> . </li><li>  Kami akan menggunakan beberapa permintaan GraphQL di proyek, jadi keakraban dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GraphQL berguna</a> . </li><li>  Buat akun 8base (jika Anda belum melakukannya) dengan mengunjungi <a href="http://">situs web</a> mereka. </li></ul><br><h3>  Mempersiapkan Lingkungan 8base </h3><br>  Buat akun atau masuk ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://auth.8base.com/login%3Fstate%3Dg6Fo2SBpTkZiUGl6QXJ5VFVkZS16U09yanNQU3dxNlJlQlV2NqN0aWTZIC04bGxiaENJU05ha0MzVUduT2ZuU19senhlbE5VN1l1o2NpZNkgcUdIWlZ1NUN4WTVrbGl2bTI4T1BMam9wdnNZcDBiYUQ%26client%3DqGHZVu5CxY5klivm28OPLjopvsYp0baD%26protocol%3Doauth2%26response_type%3Dtoken%2520id_token%26redirect_uri%3D">8base</a> .  Untuk akun baru, 8base menyediakan akses 30 hari gratis. <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/064/449/5e8/0644495e868a6e3b11bf27df93d61080.png" alt="gambar"><br>  â€2.  Setelah masuk, buka halaman <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">data</a> dan klik "Tabel Baru" untuk mulai mengonfigurasi backend. <br><img src="https://habrastorage.org/getpro/habr/post_images/011/8e4/ce6/0118e4ce63f1da4bc98b872b1e76a260.png" alt="gambar"><br>  â€3.  Setelah memuat tabel baru, Anda akan melihat diagram dan Anda bisa mulai mendefinisikan bidang.  Selanjutnya, buat tabel yang disebut Pesanan, yang terdiri dari bidang-bidang berikut: <br>  - <b>pengguna</b> : jenis bidang adalah Tabel.  Di bagian kanan, pilih tabel Pengguna dan di bidang Nama Bidang Relasi tentukan "pesanan".  Kemudian centang kotak "Izinkan beberapa <b>Pesanan</b> per <b>Pengguna</b> ". <br><img src="https://habrastorage.org/getpro/habr/post_images/64f/24f/8d0/64f24f8d0f5f626c397708980ef822ea.png" alt="gambar"><br>  - item: jenis bidang adalah JSON.  Bidang ini berisi informasi tentang produk yang dibeli pengguna, misalnya, harga, nama, dan gambar. <br>  Skema kami cukup sederhana dan harus mencakup fungsi yang diperlukan.  Selanjutnya, mari kita mengatur Aplikasi Slack dan menginstalnya. <br><br><h3>  Buat Aplikasi Slack </h3><br>  Mulailah dengan masuk ke Slack Anda atau buat yang baru untuk panduan ini.  Kunjungi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Konsol Slack API</a> untuk membuat aplikasi Slack baru. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/870/fb8/956/870fb8956f2b3b4dabceadf602df6d0d.png" alt="gambar"><br><br>  Sebut aplikasi Slack ini setelah platform e-commerce fiksi kami yang disebut <b>Shop Quick</b> . <br><br>  Setelah kami membuat aplikasi di bengkel kami, kami dapat menunda sementara aplikasi Slack dan bekerja untuk menciptakan fungsi 8base, yang akan mendengarkan acara pembuatan pesanan baru pada platform <b>Shop Quick</b> . <br><br><h4>  Buat Fungsi 8base </h4><br>  Platform 8base menawarkan fitur-fitur yang memfasilitasi pembuatan aplikasi tanpa server.  Untuk aplikasi Slack ini, kita membutuhkan logika khusus dan integrasi yang tidak dapat diimplementasikan hanya dengan CRUD.  Dalam kasus kami, kami ingin mengirim pesan ke Slack saat membuat pesanan baru.  Kita dapat mencapai ini menggunakan fungsi 8base, mendengarkan acara Buat, Perbarui dan Hapus, kita akan menggunakan pemicu. <br><br>  Pemicu adalah fungsi yang dipicu sebagai respons terhadap peristiwa mutasi data: ketika suatu objek dibuat, diperbarui, atau dihapus.  Ada dua jenis pemicu, tergantung pada apakah itu dijalankan sebelum atau setelah perubahan data: trigger.before dan trigger.after. <br><br>  Dalam kasus kami, kami akan memanggil fungsi kami setelah membuat pesanan.  Karena itu, kita harus menentukan Pesanan.buat.  Nilai yang mungkin untuk acara data adalah buat, perbarui, dan hapus. <br><br><h4>  8basis CLI </h4><br>  CLI 8base memungkinkan Anda untuk menulis JavaScript atau TypeScript khusus untuk menambahkan logika secara efisien, dengan fokus hanya pada apa yang unik untuk aplikasi Anda, sambil menghindari kode boilerplate. <br><br>  8base Command Line Interface (CLI) membuatnya mudah untuk menambahkan logika server khusus ke aplikasi Anda langsung dari terminal.  Instal CLI dengan menjalankan perintah berikut di terminal: <br><br><pre><code class="javascript hljs">npm install -g <span class="hljs-number"><span class="hljs-number">8</span></span>base</code> </pre> <br>  Setelah menginstal CLI secara global, Anda harus login untuk memberikan akses CLI ke akun 8base Anda.  Jalankan perintah berikut untuk masuk: <br>  â€ <br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">8</span></span>base login</code> </pre><br>  Saat Anda menjalankan perintah ini, jendela browser akan muncul untuk otorisasi CLI.  Masuklah memberi CLI akses ke akun 8base Anda.  Anda dapat menemukan perintah lain yang ditawarkan oleh CLI dengan menjalankan perintah bantuan: <br><br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">8</span></span>base help</code> </pre><br>  Selanjutnya, kami menginisialisasi proyek 8base menggunakan CLI dengan menjalankan perintah berikut di terminal Anda: <br><br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">8</span></span>base init shop-quick-functions</code> </pre><br>  Setelah perintah dieksekusi, folder baru akan dibuat.  Struktur folder akan terlihat seperti ini: <br><br><pre> <code class="javascript hljs">â”œâ”€â”€ src/ | â”œâ”€â”€ function1.ts | â””â”€â”€ function2.js â”œâ”€â”€ <span class="hljs-number"><span class="hljs-number">8</span></span>base.yml â””â”€â”€ package.json</code> </pre> <br>  CLI memuat proyek Node biasa, yang memungkinkan Anda untuk menginstal dependensi menggunakan npm atau benang.  Selain itu, 8base CLI hadir dengan Webpack dan TypeScript yang sudah dikonfigurasi sebelumnya sehingga Anda dapat menulis kode JavaScript atau TypeScript. <br><br>  Kami mengatur fitur dan izin khusus di 8base.yml.  Kami mengubah pengaturan file 8base.yml saat ini sesuai dengan kebutuhan kami.  Buka file dan buat perubahan berikut: <br><br><pre> <code class="javascript hljs">functions: notifySlack: handler: code: src/notifySlack.js type: trigger.after operation: Orders.create</code> </pre> <br>  Struktur file mirip dengan file YAML.  Blok pertama yang akan kita lihat adalah blok fungsi;  kami akan meletakkan semua definisi fungsi yang akan kami buat di blok ini.  Misalnya, fungsi notifySlack yang kami buat;  Fungsi ini memiliki properti berikut: <br><br><ul><li>  <b>handler</b> : path file relatif ke function handler notifySlack. </li><li>  <b>operasi</b> : parameter menentukan tipe data dan peristiwa apa yang harus didengar oleh pelatuk. </li><li>  <b>ketik</b> : apakah mereka dimulai sebelum atau setelah perubahan data.  Ada dua jenis: trigger.before dan trigger.after. </li></ul><br>  Langkah selanjutnya adalah membuat file penangan untuk mulai menerima acara setelah pelatuk.  Untuk mengirim pembaruan ke Slack, kami akan menggunakan metode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">chat.postMessage</a> .  Pesan akan dikirim menggunakan metode posting HTTP - setiap permintaan ke chat.postMessage akan ditandatangani oleh token akses OAuth bot Anda.  Kunjungi halaman detail untuk aplikasi Anda, klik tautan OAuth &amp; Izin di navigasi bilah samping. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/180/c54/94d/180c5494dcf0df2c5de56fcefbc65c2a.png" alt="gambar"><br><br>  â€ Salin token dan pergi ke tab <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Variabel Lingkungan</a> di halaman pengaturan 8base.  Fungsi Anda memiliki akses ke semua variabel lingkungan yang dibuat.  <b>Selalu</b> simpan nilai dan kredensial rahasia Anda di sini, dan jangan letakkan langsung di basis data kode sumber.  Buat variabel baru bernama SLACK_ACCESS_TOKEN, rekatkan token yang disalin dan simpan. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/84a/b45/96b/84ab4596bc04520f2ae6da4675274dc4.png" alt="gambar"><br><br>  Sekarang mari kita tambahkan kode ke editor.  Buat file bernama utils.js di direktori src.  Buka file di editor favorit Anda dan salin yang berikut ke dalamnya: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* src/utils.js */</span></span><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sendMessage = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">order</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> message = <span class="hljs-string"><span class="hljs-string">`A new order was just created`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> messageBody = dataBuilder(order); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> body = { <span class="hljs-attr"><span class="hljs-attr">channel</span></span>: <span class="hljs-string"><span class="hljs-string">'general'</span></span>, <span class="hljs-attr"><span class="hljs-attr">attachments</span></span>: messageBody, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: message }; â€ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Message body'</span></span>, { body }); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Sending message request'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> makeRequest(body); };â€</code> </pre> <br>  Dengan demikian, fungsi sendMessage menerima pesanan dengan satu argumen, yang merupakan objek yang berisi bidang yang kami buat untuk model pesanan.  Sekarang kita perlu membuat pesan baru menggunakan objek pesanan, jadi kita meneruskan objek ke fungsi yang disebut dataBuilder.  Fungsi dataBuilder mengembalikan objek dalam format <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lampiran Slack</a> . <br><br>  Kemudian kami membuat badan permintaan yang berisi saluran ruang kerja tempat kami menerbitkan pesan, lampiran yang dikembalikan dari dataBuilder, dan akhirnya teks.  Selanjutnya, permintaan untuk mempublikasikan pesan dikirim oleh fungsi makeRequest. <br><br>  Mari kita buat fungsi dataBuilder, salin fragmen di bawah ini dan perbarui file utils.js: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* src/utils.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sendMessage = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">order</span></span></span><span class="hljs-function">) =&gt;</span></span> { ...}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dataBuilder = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">order</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { items } = order; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> itemSections = items.map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'section'</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: item.name, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'#3AA3E3'</span></span>, <span class="hljs-attr"><span class="hljs-attr">accessory</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'image'</span></span>, <span class="hljs-attr"><span class="hljs-attr">image_url</span></span>: item.image, <span class="hljs-attr"><span class="hljs-attr">alt_text</span></span>: item.name, }, }; }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = [ { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'section'</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'mrkdwn'</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">`*There are </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${items.length}</span></span></span><span class="hljs-string"> items in the order*`</span></span>, }, }, ...itemSections, ]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data; };</code> </pre> <br>  Fungsi dataBuilder menerima objek pesanan dan membuat bagian untuk setiap item dalam urutan menggunakan nama dan gambar item.  Anda dapat menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pembuat Pesan</a> untuk melihat format pesan dan lampiran secara real time. <br><br>  Selanjutnya, kita menambahkan fungsi makeRequest, yang mengirimkan isi pesan ke bengkel Slack. <br><br>  Salin cuplikan berikut ke file utils.js: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* src/utils.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> fetch <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'node-fetch'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sendMessage = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">order</span></span></span><span class="hljs-function">) =&gt;</span></span> { ... }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dataBuilder = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">order</span></span></span><span class="hljs-function">) =&gt;</span></span> { ... }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> makeRequest = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> url = <span class="hljs-string"><span class="hljs-string">'https://slack.com/api/chat.postMessage'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> headers = { <span class="hljs-attr"><span class="hljs-attr">Authorization</span></span>: <span class="hljs-string"><span class="hljs-string">`Bearer </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${process.env.SLACK_ACCESS_TOKEN}</span></span></span><span class="hljs-string">`</span></span>, <span class="hljs-string"><span class="hljs-string">'Content-type'</span></span>: <span class="hljs-string"><span class="hljs-string">'application/json'</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fetch(url, { <span class="hljs-attr"><span class="hljs-attr">method</span></span>: <span class="hljs-string"><span class="hljs-string">'post'</span></span>, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(data), headers, }); };</code> </pre> <br>  Pertama instal paket node-fetch dengan menjalankan perintah berikut: <br><br><pre> <code class="javascript hljs">npm install node-fetch</code> </pre><br>  Kami mengimpor paket dan menggunakannya dalam fungsi makeRequest.  Sebagai bagian dari fungsi, kami akan menambahkan semua header yang diperlukan ke permintaan.  Permintaan harus ditandatangani dengan header Otoritas Pembawa.  Token akan diperoleh dari variabel lingkungan yang kami buat sebelumnya.  Terakhir, kami mengembalikan permintaan POST menggunakan API ambil. <br><br>  Sekarang kami memiliki semua yang Anda butuhkan untuk mengirim pesan ke warspace Slack menggunakan bot.  Mari kita membuat penangan fungsi yang kita rujuk dalam file 8base.yml di atas. <br><br>  Buat file bernama notifySlack.js di direktori src, buka file dan salin kode ke dalamnya: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* src/notifySlack.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { sendMessage } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./utils'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (event) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Sending notification to slack'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> res = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> sendMessage(event.data); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Notification sent successfully'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (error) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(error); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">data</span></span>: event.data, }; };</code> </pre> <br>  Dalam file tersebut, kami menggunakan fungsi utilitas sendMessage yang kami buat.  Handler fungsi 8base melewati dua argumen: peristiwa dan konteks.  Struktur objek acara tergantung pada jenis fungsi, dan objek konteks berisi properti dan metode yang berguna, yang dapat Anda baca di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br>  Dalam kasus kami, objek acara akan berisi Pesanan yang dibuat, yang terdiri dari dua bidang pengguna dan item.  Objek Pesanan adalah properti dari data objek acara, dan kami meneruskan objek ini ke fungsi sendMessage untuk memberi tahu Slack. <br><br>  Panggilan fungsi dibungkus try / catch, karena kami tidak ingin kesalahan menyebabkan fungsi berakhir.  Akhirnya, kami mengembalikan data acara di akhir fungsi. <br>  Dengan data ini, kami dapat menunjukkan subjek dan isi pesan, dan kemudian mengirim email menggunakan transporter yang kami buat.  Simpan file dan gunakan fungsi menggunakan 8base CLI dengan menjalankan perintah berikut: <br><br>  â€ <pre> <code class="javascript hljs"># deploy <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> project root directory <span class="hljs-number"><span class="hljs-number">8</span></span>base deploy</code> </pre> <br>  Setelah berhasil mengeluarkan fungsi, Anda akan melihat output berikut dari terminal: <br>  â€ <br><pre> <code class="javascript hljs">âœ <span class="hljs-number"><span class="hljs-number">8</span></span>base deploy deploy done. Time: <span class="hljs-number"><span class="hljs-number">15</span></span>,<span class="hljs-number"><span class="hljs-number">553</span></span> ms.</code> </pre> <br><h4>  Fitur debugging </h4><br>  Penting untuk memiliki log di fungsi Anda sehingga Anda dapat dengan mudah men-debug fungsi dan melacak apa yang terjadi di sana.  8base memiliki halaman untuk melihat semua fungsi yang dilampirkan ke profil Anda.  Anda dapat dengan mudah melihat semua log yang berasal dari masing-masing fungsi. <br><br>  Buka 8base <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dashboard</a> dan klik <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Logic</a> di menu samping.  Pada halaman logika, Anda dapat melihat semua fungsi yang diletakkan. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a2/c20/38a/1a2c2038afb3be1b65769a05cda9482b.png" alt="gambar"><br>  Untuk fungsi tertentu, klik <b>Lihat Log</b> untuk melihat semua log.  Selanjutnya, kita menginstal aplikasi Slack dan mengujinya. <br><br><h3>  Menginstal dan menguji aplikasi Slack </h3><br>  Mari kita selesaikan langkah terakhir dan instal aplikasi Slack di ruang kerja.  Untuk melakukan ini, kembali ke konsol aplikasi Slack dan klik <b>Instal Aplikasi</b> pada bilah navigasi samping. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/76e/212/b74/76e212b74709411272256b422a77f653.png" alt="gambar"><br><br>  Pada halaman tersebut, Anda akan melihat peringatan tentang menambahkan fungsi atau otoritas untuk menginstal aplikasi.  Klik di atasnya dan tambahkan izin. <br><br>  Setelah berhasil menginstal aplikasi, kita dapat menguji fungsi dan aplikasi.  Pergi ke halaman 8base <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Data</a> , klik tabel Orders di sidebar.  Di penampil tabel Pesanan, klik pada tab <b>DATA</b> , di sini kita dapat menambahkan baris baru ke tabel. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c0/fab/84c/7c0fab84c009f1f3620ab57e41086a55.png" alt="gambar"><br><br>  Di tabel data, tekan tombol {+} dan buat baris baru. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b1a/015/2bf/b1a0152bf7dad2951b3ef2d1e0a07310.png" alt="gambar"><br><br>  Anda dapat mengisi bidang produk dengan data berikut: <br><br><pre> <code class="javascript hljs">[{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Food product"</span></span>, <span class="hljs-string"><span class="hljs-string">"image"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://static.pexels.com/photos/368893/pexels-photo-368893.jpeg"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span> }, { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"The real fruit"</span></span>, <span class="hljs-string"><span class="hljs-string">"image"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://static.pexels.com/photos/368893/pexels-photo-368883.jpeg"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span> }]</code> </pre> <br>  Klik <b>Tambahkan Baris</b> untuk membuat pesanan baru.  Kemudian pergi ke bengkel tempat Anda menginstal Aplikasi Slack, klik pada saluran #general dan Anda akan melihat pesan baru dari bot. <br><br>  Seharusnya terlihat seperti ini: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/739/025/ef1/739025ef157a8879e5a1aa63595036de.png" alt="gambar"><br><br>  Pemberitahuan baru dari bot 8base di saluran Slack <br><br><h3>  Kata-kata terakhir </h3><br>  Membuat aplikasi Slack adalah ide yang bagus;  Slack adalah sarana komunikasi utama bagi sebagian besar tim, dan dapat memungkinkan Anda untuk memiliki semua informasi yang Anda butuhkan untuk pekerjaan sehari-hari. <br><br>  Untuk artikel ini, menggunakan fungsionalitas 8base, kami membuat aplikasi Slack sederhana yang mengirim pesan tentang pesanan baru dalam sistem.  Pesan yang dikirim cukup sederhana.  Slack memiliki banyak <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">format</a> untuk pesan-pesannya, dan Anda dapat menyulitkannya sehingga mengandung lebih banyak informasi.  Baca lebih lanjut tentang fitur 8base di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> .  Lihat kode di artikel ini di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> . <br><br>  Terima kasih sudah membaca. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id466335/">https://habr.com/ru/post/id466335/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id466317/index.html">Kiat dan trik dari saluran Telegram saya @pythonetc, Agustus 2019</a></li>
<li><a href="../id466319/index.html">Kesepakatan: VMware membeli startup berbasis cloud</a></li>
<li><a href="../id466323/index.html">Kami membuat game platform portabel di mikrokontroler Cortex M0 +</a></li>
<li><a href="../id466329/index.html">Peta elektronik pembuatan anggur di Rusia. Desain dan konten</a></li>
<li><a href="../id466333/index.html">Bagaimana mengatur tempat kerja untuk Anda sendiri</a></li>
<li><a href="../id466337/index.html">Apa warna fungsi Anda?</a></li>
<li><a href="../id466339/index.html">Bagaimana di Microsoft SQL Server untuk mendapatkan data dari Google Analytics menggunakan R</a></li>
<li><a href="../id466341/index.html">Pelatihan Cisco 200-125 CCNA v3.0. Hari 33. Persiapan untuk Ujian ICND1</a></li>
<li><a href="../id466345/index.html">Metode gelombang membangun skema warna</a></li>
<li><a href="../id466347/index.html">Pelatihan Cisco 200-125 CCNA v3.0. Hari 34. Konsep VLAN Lanjutan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>