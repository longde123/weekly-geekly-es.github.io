<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤱🏻 🚶🏾 📼 Zusammensetzung versus Vererbung, Teammuster und Spielentwicklung im Allgemeinen 🕤 👲🏾 ➡️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Haftungsausschluss: Meiner Meinung nach sollte und kann ein Artikel zur Softwarearchitektur nicht ideal sein. Jede beschriebene Lösung deckt möglicher...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Zusammensetzung versus Vererbung, Teammuster und Spielentwicklung im Allgemeinen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438510/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/na/sz/bh/naszbh_usuh0jpozxmoiuqpdl1q.png"></div><br>  Haftungsausschluss: <i>Meiner Meinung nach sollte und kann ein Artikel zur Softwarearchitektur nicht ideal sein.</i>  <i>Jede beschriebene Lösung deckt möglicherweise nicht die für einen Programmierer erforderliche Ebene ab, und für einen anderen Programmierer wird die Architektur zu unnötig kompliziert.</i>  <i>Aber es muss eine Lösung für die Aufgaben geben, die es sich selbst gestellt hat.</i>  <i>Und diese Erfahrung, zusammen mit all dem anderen Wissensgepäck eines Programmierers, der lernt, Informationen organisiert, Neulinge schärft und sich selbst und andere kritisiert - diese Erfahrung wird zu hervorragenden Softwareprodukten.</i>  <i>Der Artikel wechselt zwischen dem technischen und dem technischen Teil.</i>  <i>Dies ist ein kleines Experiment und ich hoffe, es wird interessant sein.</i> <br><blockquote>  - Hören Sie, ich hatte eine großartige Spielidee!  - Spieledesigner Vasya war zerzaust und seine Augen waren rot.  Ich trank immer noch Kaffee und Holivar auf Habré, um die Zeit vor dem Aufstehen zu vertreiben.  Er sah mich erwartungsvoll an, bis ich mit dem Schreiben der Kommentare an den Mann fertig war, worüber er sich geirrt hatte.  Vasya wusste, dass es keinen Sinn machte, das Gespräch mit mir fortzusetzen, bis Gerechtigkeit herrschte und die Wahrheit nicht geschützt wurde.  Ich fügte den letzten Satz hinzu und sah ihn an. <br><br>  - Kurz gesagt - Magier mit Mana können Zauber wirken, und Krieger können im Nahkampf kämpfen und Ausdauer ausgeben.  Sowohl Zauberer als auch Krieger können sich bewegen.  Ja, dort wird es weiterhin möglich sein, die Kühe auszurauben, aber wir werden es bereits in der nächsten Version tun, kurz gesagt.  Zeigen Sie den Prototyp nach dem Aufstehen, okay? <br><br>  Er lief in seinem Spieledesign-Geschäft davon und ich öffnete die IDE. </blockquote><a name="habracut"></a><br>  Tatsächlich sind die Themen „Zusammensetzung versus Vererbung“, „Bananen-Affen-Problem“, „Rautenproblem (Mehrfachvererbung)“ bei Interviews in verschiedenen Formaten und aus gutem Grund häufig gestellte Fragen.  Eine falsche Verwendung der Vererbung kann die Architektur komplizieren, und unerfahrene Programmierer wissen nicht, wie sie damit umgehen sollen, und beginnen infolgedessen, OOP als Ganzes zu kritisieren und prozeduralen Code zu schreiben.  Erfahrene Programmierer (oder diejenigen, die intelligente Dinge im Internet gelesen haben) sehen es daher als ihre Pflicht an, bei einem Interview in verschiedenen Formen nach solchen Dingen zu fragen.  Die universelle Antwort lautet: "Zusammensetzung ist besser als Vererbung, und es sollten keine Graustufen angewendet werden."  Diejenigen, die gerade jede solche Antwort gelesen haben, werden zu 100% zufrieden sein. <br><br>  Aber wie ich am Anfang des Artikels sagte, passt jede Architektur zu Ihrem Projekt. Wenn die Vererbung für Ihr Projekt ausreicht und alles, was zur Lösung des Problems erforderlich ist, ist, Monkey with Banana zu erstellen - erstellen Sie es.  Unser Programmierer war in einer ähnlichen Situation.  Es macht keinen Sinn, die Vererbung abzulehnen, nur weil der FPS Sie auslacht. <br><br><pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ x = <span class="hljs-number"><span class="hljs-number">0</span></span>; y = <span class="hljs-number"><span class="hljs-number">0</span></span>; moveTo (x, y) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.x = x; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.y = y; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ mana = <span class="hljs-number"><span class="hljs-number">100</span></span>; castSpell () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mana--; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Warrior</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ stamina = <span class="hljs-number"><span class="hljs-number">100</span></span>; meleeHit () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.stamina--; } }</code> </pre> <br><blockquote>  Der Stand-up zog sich wie immer hin.  Ich schaukelte auf einem Stuhl und legte auf, während June Petya versuchte, den Tester davon zu überzeugen, dass die Unmöglichkeit einer schnellen Steuerung mit der rechten Maustaste kein Fehler ist, da es nirgendwo eine solche Möglichkeit gab, was bedeutet, dass Sie die Aufgabe an die Vorproduktionsabteilung übergeben müssen.  Der Tester argumentierte, dass dies für Benutzer ein Fehler und keine Funktion ist, da für Benutzer die Steuerung über die rechte Schaltfläche obligatorisch zu sein scheint.  Als einziger Spieler in unserem Team, der unser Spiel auf Kampfservern spielt, wollte er diese Funktion so schnell wie möglich hinzufügen, aber er wusste, dass die bürokratische Maschine sie frühestens in 4 veröffentlichen würde, wenn Sie sie in die Vorproduktionsabteilung legen Monate, und nachdem Sie es als Fehler ausgegeben haben, können Sie es bereits im nächsten Build erhalten.  Der Projektmanager war wie immer zu spät und die Jungs fluchten so heftig, dass sie bereits auf Matten umgestiegen waren und es wahrscheinlich bald zu einer Schlägerei gekommen wäre, wenn der Studiodirektor nicht in den Fluch geraten wäre und nicht beide in sein Büro gebracht hätte.  Wahrscheinlich wieder für 300 Dollar Geldstrafe. <br><br>  Als ich den Rallye-Raum verließ, kam ein Spieledesigner auf mich zu und sagte glücklich, dass jeder den Prototyp mochte, sie akzeptierten ihn und jetzt ist dies unser neues Projekt für die nächsten sechs Monate.  Während wir zu meinem Tisch gingen, erzählte er begeistert, welche neuen Funktionen in unserem Spiel sein würden.  Wie viele verschiedene Zauber er erfunden hat und natürlich, dass es einen Paladin geben wird, der sowohl kämpfen als auch Magie werfen kann.  Und die gesamte Künstlerabteilung arbeitet bereits an neuen Animationen, und China hat bereits eine Vereinbarung unterzeichnet, nach der unser Spiel auf den Markt gebracht wird.  Ich schaute schweigend auf den Code meines Prototyps, dachte tief nach, hob alles hervor und löschte ihn. </blockquote>  Ich glaube, dass jeder Programmierer im Laufe der Zeit aufgrund seiner Erfahrung offensichtliche Probleme sieht, auf die er stoßen kann.  Vor allem, wenn Sie lange Zeit in einem Team mit einem Spieledesigner arbeiten.  Wir haben eine Reihe neuer Anforderungen und Funktionen.  Und unsere alte "Architektur" kann offensichtlich nicht damit umgehen. <br><br>  Wenn Sie bei einem Interview nach einer ähnlichen Aufgabe gefragt werden, werden sie sicherlich versuchen, Sie zu fangen.  Sie können in vielen verschiedenen Formen vorliegen - Krokodile, die sowohl schwimmen als auch rennen können.  Panzer, die eine Kanone oder ein Maschinengewehr abfeuern können und so weiter.  Die wichtigste Eigenschaft solcher Aufgaben ist, dass Sie ein Objekt haben, das verschiedene Aufgaben ausführen kann.  Und Ihre Vererbung kann in keiner Weise bewältigt werden, da es unmöglich ist, sowohl von FlyingObject als auch von SwimmingObject zu erben. Und verschiedene Objekte können unterschiedliche Aktionen ausführen.  An diesem Punkt geben wir die Vererbung auf und fahren mit der Komposition fort: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Character</span></span></span><span class="hljs-class"> </span></span>{ abilities = []; addAbility (...abilities) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> abilities) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.abilities.push(a); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } getAbility (AbilityClass) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.abilities) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> AbilityClass) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } <span class="hljs-comment"><span class="hljs-comment">/////////////////////////////////////// // //    ,      //       // /////////////////////////////////////// class Ability {} class HealthAbility extends Ability { health = 100; maxHealth = 100; } class MovementAbility extends Ability { x = 0; y = 0; moveTo(x, y) { this.x = x; this.y = y; } } class SpellCastAbility extends Ability { mana = 100; maxMana = 100; cast () { this.mana--; } } class MeleeFightAbility extends Ability { stamina = 100; maxStamina = 100; constructor (power) { this.power = power; } hit () { this.stamina--; } } /////////////////////////////////////// // //        // /////////////////////////////////////// class CharactersFactory { createMage () { return new Character().addAbility( new MovementAbility(), new HealthAbility(), new SpellCastAbility() ); } createWarrior () { return new Character().addAbility( new MovementAbility(), new HealthAbility(), new MeleeFightAbility(3) ); } createPaladin () { return new Character().addAbility( new MovementAbility(), new HealthAbility(), new SpellCastAbility(), new MeleeFightAbility(2) ); } }</span></span></code> </pre><br>  Jede mögliche Aktion ist jetzt eine separate Klasse mit einem eigenen Status. Bei Bedarf können wir eindeutige Charaktere erstellen, indem wir ihnen die erforderliche Anzahl von Fähigkeiten verleihen.  Zum Beispiel ist es sehr einfach, einen unsterblichen Zauberbaum zu erstellen: <br><br><pre> <code class="javascript hljs">createMagicTree () { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Character().addAbility( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpellCastAbility() ); }</code> </pre> <br>  Wir haben das Erbe verloren und stattdessen erschien eine Komposition.  Jetzt erstellen wir einen Charakter und listen seine möglichen Fähigkeiten auf.  Dies bedeutet jedoch nicht, dass die Vererbung immer schlecht ist, nur in diesem Fall passt sie nicht.  Der beste Weg zu verstehen, ob Vererbung richtig ist, besteht darin, die Frage selbst zu beantworten, welche Beziehung sie darstellt.  Wenn diese Verbindung "is-a" ist, das heißt, Sie geben an, dass MeleeFightAbility eine Fähigkeit ist, dann ist sie perfekt.  Wenn die Verbindung nur erstellt wird, weil Sie eine Aktion hinzufügen möchten und "has-a" anzeigen, sollten Sie über die Komposition nachdenken. <br><blockquote>  Ich habe es genossen, ein großartiges Ergebnis zu sehen.  Es funktioniert intelligent und fehlerfrei, Traumarchitektur!  Ich bin sicher, dass es mehr als einen Test der Zeit bestehen wird und wir es für eine lange Zeit nicht neu schreiben müssen.  Ich war so begeistert von meinem Code, dass ich nicht einmal bemerkte, wie June Petya auf mich zukam. <br><br>  Die Straße war bereits dunkel, was es noch deutlicher machte, wie er vor Glück strahlte.  Anscheinend gelang es ihm, die Aufgabe abzuschieben und die Strafe für Matten in Richtung Kollegen loszuwerden, die letzte Woche angekündigt wurde. <br><br>  "Die Künstler haben einfach göttliche Animationen gemalt", schwatzte er schnell, "ich kann es kaum erwarten, sie zu verarschen."  Besonders schöne fliegende Pluspunkte, wenn ein Heilzauber angewendet wird.  Sie sind so grün und solche Pluspunkte! <br><br>  Ich fluchte vor mich hin, weil ich völlig vergessen hatte, dass wir immer noch die Sicht vermasseln müssen.  Verdammt, es scheint, Architektur neu schreiben zu müssen. </blockquote>  Solche Artikel beschreiben normalerweise nur die Arbeit mit dem Modell, da es abstrakt und erwachsen ist und Sie auch bis Juni „Bilder zum Zeigen“ geben können, unabhängig von der Architektur.  Trotzdem sollte unser Modell maximale Informationen für die Ansicht bereitstellen, damit es seine Aufgabe erfüllen kann.  In GameDev wird normalerweise das "Team" -Muster verwendet.  Kurz gesagt - wir haben einen Zustand ohne Logik, und jede Änderung sollte in den entsprechenden Teams erfolgen.  Dies mag kompliziert erscheinen, bietet aber viele Vorteile: <br>  - Sie lassen sich sehr gut kombinieren, wenn ein Team ein anderes anruft <br>  - Jeder Befehl ist, wenn er ausgeführt wird, tatsächlich ein Ereignis, das Sie abonnieren können <br>  - Wir können sie leicht serialisieren. <br><br>  Ein Schadensbefehl könnte beispielsweise so aussehen.  Dann wird der Krieger es benutzen, wenn er mit einem Schwert getroffen wird, und der Magier, wenn er von einem Feuerzauber getroffen wird.  Der Einfachheit halber habe ich die Befehlsüberprüfung durch Ausnahmen implementiert, aber dann können sie als Rückkehrcodes umgeschrieben werden. <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DealDamageCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (target, damage) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target = target; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damage = damage; } execute () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> healthAbility = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target.getAbility(HealthAbility); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (healthAbility == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'NoHealthAbility'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> resultHealth = healthAbility.health - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damage; healthAbility.health = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.max( <span class="hljs-number"><span class="hljs-number">0</span></span>, resultHealth ); } }</code> </pre> <br>  Ich mache gerne hierarchische Befehle - wenn einer ausgeführt wird, werden viele Kinder geboren, die die Engine dann ausführt.  Jetzt, da wir die Fähigkeit haben, Schaden zu verursachen, können wir versuchen, einen Nahkampfschlag auszuführen <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MeleeHitCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (source, target, damage) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source = source; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target = target; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damage = damage; } execute () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fightAbility = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source.getAbility(MeleeFightAbility); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fightAbility == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'NoFightAbility'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addChildren([ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DealDamageCommand(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target, fightAbility.power); ]); } }</code> </pre> <br>  Diese beiden Teams haben alles, was Sie für unsere Animationen benötigen.  Ein Renderer kann einfach Ereignisse abonnieren und mit dem folgenden Code alles anzeigen, was Künstler wünschen: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> onMeleeHit (meleeHitCommand) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> view.drawMeleeHit( meleeHitCommand.source, meleeHitCommand.target ); } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> onDealDamage (dealDamageCommand) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> view.showDamageNumbers( dealDamageCommand.target, dealDamageCommand.damage ); }</code> </pre> <br><blockquote>  Ich habe die Zählung verloren, und einmal in Folge bleibe ich bis zur Dunkelheit bei der Arbeit.  Seit meiner Kindheit hat mich die Entwicklung von Spielen angezogen, es schien mir etwas Magisches zu sein, und selbst jetzt, wo ich das seit vielen Jahren mache, bin ich besorgt darüber.  Trotz der Tatsache, dass ich ein Geheimnis darüber gelernt habe, wie sie geschaffen werden, habe ich das Vertrauen in die Magie nicht verloren.  Und diese Magie lässt mich nachts mit solcher Inspiration sitzen und meinen Code schreiben.  Vasya kam auf mich zu.  Er weiß absolut nicht, wie man programmiert, teilt aber meine Einstellung zu Spielen. <br><br>  - Hier - der Spieledesigner stellte mir einen Talmud von 200 Seiten vor, der auf A4-Blättern gedruckt war.  Obwohl das Designdokument in Konfluenz ausgeführt wurde, haben wir es gerne in wichtigen Phasen gedruckt, um diese Arbeit in physischer Verkörperung zu spüren.  Ich öffnete es auf einer zufälligen Seite und bekam eine riesige Liste mit einer Vielzahl von Zaubersprüchen, die ein Magier und ein Paladin ausführen können, eine Beschreibung ihrer Effekte, Intelligenzanforderungen, Manapreis und eine ungefähre Beschreibung für Künstler, wie sie angezeigt werden sollen.  Arbeite viele Monate, denn heute werde ich wieder bei der Arbeit bleiben. </blockquote>  Unsere Architektur macht es einfach, komplexe Kombinationen von Zaubersprüchen zu erstellen.  Es ist nur so, dass jeder Zauber eine Liste von Befehlen zurückgeben kann, die während des Zaubers ausgeführt werden müssen <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CastSpellCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (source, target, spell) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source = source; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target = target; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.spell = spell; } execute () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> spellAbility = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source.getAbility(SpellCastAbility); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (spellAbility == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'NoSpellCastAbility'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addChildren(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PayManaCommand(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.spell.manaCost)); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addChildren(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.spell.getCommands(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target)); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">0</span></span>; getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DamageSpell</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (damageValue) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damageValue = damageValue; } getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DealDamageCommand(target, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damageValue) ]; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HealSpell</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (healValue) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.healValue = healValue; } getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HealDamageCommand(target, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.healValue) ]; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VampireSpell</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Spell</span></span></span><span class="hljs-class"> </span></span>{ manaCost = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (value) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value = value; } getCommands (source, target) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DealDamageCommand(target, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HealDamageCommand(source, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value) ]; } }</code> </pre><br><blockquote>  <i>Eineinhalb Jahre später</i> <br><br>  Der Stand-up zog sich wie immer hin.  Ich schwankte auf dem Stuhl und hing im Laptop, während Middle Petya mit dem Tester über den Fehler diskutierte, der gestartet worden war.  Mit aller Aufrichtigkeit versuchte er den Tester davon zu überzeugen, dass die mangelnde Kontrolle über die rechte Maustaste in unserem neuen Spiel nicht als Fehler markiert werden sollte, da eine solche Aufgabe nie stand und nicht von Spieledesignern oder Spaßvögeln ausgearbeitet wurde.  Ich hatte ein Gefühl von Deja Vu, aber eine neue Botschaft in der Zwietracht lenkte mich ab: <br><br>  - Hören Sie - der Spieledesigner schrieb - Ich habe eine großartige Idee ... </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de438510/">https://habr.com/ru/post/de438510/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de438496/index.html">Python + Raspberry Pi + Pixhawk und Quadrocopter. Oder wie man keine Roboter macht</a></li>
<li><a href="../de438498/index.html">Wie bereite ich mich schnell auf ein Interview vor, das Fragen zu Algorithmen und Informationsverarbeitungstechnologien enthält?</a></li>
<li><a href="../de438500/index.html">Auf der guten Seite: Wie Optimus Prime Kingston und HyperX zur CES 2019 brachte</a></li>
<li><a href="../de438506/index.html">Mein zweiter Winter ohne Schnee oder Magistratur in Belgien</a></li>
<li><a href="../de438508/index.html">Die Aktivität des menschlichen Gehirns wurde zuerst in klare Sprache übersetzt</a></li>
<li><a href="../de438512/index.html">Huffman-Datenkomprimierung</a></li>
<li><a href="../de438514/index.html">Wie ich seit einem Jahr nicht mehr bei der Sberbank gearbeitet habe</a></li>
<li><a href="../de438516/index.html">Wann wird die Länge eines Arrays in einer lokalen Variablen in C # gespeichert?</a></li>
<li><a href="../de438518/index.html">Erstellen Sie Ihre jsfiddle, Teil 2</a></li>
<li><a href="../de438522/index.html">Strategischer Equalizer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>