<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤵🏽 🙃 🕞 So führen wir Abrechnungsregressionstests in SAP HCM durch 🏼 🐩 🐳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Payroll Engine in SAP HCM ist ein zuverlässiges und zugleich flexibles Tool. Mit diesem Tool können Sie alle Anforderungen der Gesetzgebung und de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So führen wir Abrechnungsregressionstests in SAP HCM durch</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/X5RetailGroup/blog/474770/">  Die Payroll Engine in SAP HCM ist ein zuverlässiges und zugleich flexibles Tool.  Mit diesem Tool können Sie alle Anforderungen der Gesetzgebung und der örtlichen Vorschriften im Bereich der Arbeitnehmervergütung berücksichtigen.  Die Kehrseite der Medaille dieser Vielseitigkeit ist jedoch die Komplexität und die starke Empfindlichkeit gegenüber Änderungen der Einstellungen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/c0/on/sg/c0onsgt9om9oa8z2-kbcbpsqumw.png"></div><a name="habracut"></a><br>  Die obige Abbildung zeigt beispielsweise eine Ansicht zum Festlegen einer Lohnart.  Ein falsch eingestellter Parameter oder ein falsch gesetztes Kontrollkästchen führt zu einer falschen Berechnung. <br><br>  Darüber hinaus kann der Preis eines Fehlers sowohl in monetärer Hinsicht als auch in Bezug auf die Reputation sehr hoch sein. <br><br>  Erwähnenswert ist auch, dass der Fehler möglicherweise nicht sofort, sondern erst einige Monate nach der Berechnung auftritt.  In diesem Fall kann es erforderlich sein, die Löhne für mehrere Monate neu zu berechnen oder ein spezielles Korrekturberechnungsschema zu erstellen.  Beide Szenarien sind extrem zeitaufwendig und riskant, daher können sie nur als letzter Ausweg betrachtet werden. <br><br>  Woher können solche Fehler kommen?  Die HR-Funktionalität entwickelt sich ständig weiter, gesetzliche Anforderungen und Geschäftsanforderungen ändern sich.  Um diese Anforderungen zu erfüllen, müssen Sie regelmäßig Änderungen an Ihren SAP-HCM-Einstellungen vornehmen.  In unserem Unternehmen werden alle Änderungen in monatlichen Releases umgesetzt.  Standardupdates von SAP erscheinen ebenfalls ungefähr einmal im Monat und werden mit dem Release installiert. <br><br>  Updates vom Hersteller sind Pakete mit Hinweisen zu Änderungen an Programmen und Einstellungen.  Die Abbildung zeigt die Zusammensetzung des Service Packs SAPK-60866INEAHRCRU mit vier Gehaltsabrechnungen für Russland. <br><br><img src="https://habrastorage.org/webt/wf/5x/jg/wf5xjgoy339lwyvpjb6piqiriii.png"><br><br>  Wenn Sie Ihre eigenen Entwicklungsprodukte \ Einstellungen und Standard-Service Packs installieren, können sich die aktuellen Einstellungen ändern und zu einem fehlerhaften Systembetrieb führen. <br><br><h3>  Regressionstests </h3><br>  Wie kann ich sicherstellen, dass die vorhandene Funktionalität nicht durch Standard-SAP-Updates und meine eigenen neuen Entwicklungen / Einstellungen beeinträchtigt wurde? <br><br>  Sie können natürlich alle Änderungen, alle Standardnotizen analysieren.  Erstellen Sie Beispiele dafür und führen Sie Funktionstests durch. <br><br>  Hierbei ist jedoch zu beachten, dass die Anzahl der Noten im Zehnerbereich liegen und die zugehörige Funktionalität beeinträchtigen kann.  Und wenn wir noch die Größe unseres Unternehmens hinzufügen (mehr als 270.000 Mitarbeiter werden in SAP HR berechnet), wird die Anzahl der möglichen Fälle einen angemessenen Betrag überschreiten. <br><br>  Um dieses Problem zu lösen, haben die Mitarbeiter unserer Abteilung „Business Applications SAP HR Management“ einen Mechanismus zur Regressionstestung von Löhnen entwickelt. <br>  Das Wesen dieses Mechanismus ist recht einfach.  Zunächst wird ein Standard erstellt - durch Berechnung der Löhne im ursprünglichen System. <br><br>  Anschließend werden Aktualisierungen auf dem System installiert und eine neue Gehaltsberechnung durchgeführt.  Die Ergebnisse werden als Freigabedaten gespeichert. <br><br>  Und im letzten Schritt wird der Standard mit den Freigabedaten abgeglichen. <br>  Die Prüfung erfolgt auf dem gesamten Personalbestand. <br>  Lassen Sie uns nun genauer darauf eingehen. <br><br>  Unser SAP HCM hat eine klassische 3-System-Landschaft.  Ein Entwicklungssystem (nennen wir es HRD), ein Testsystem (HRT) und ein Produktivsystem (HRP).  Alle Verbesserungen werden notwendigerweise in HRT getestet, während die technischen Eigenschaften des Testsystems den Eigenschaften des Produkts nahe kommen. <br><br>  Regressionstests sind in Stufen unterteilt: <br><br><ul><li>  Vorbereitung des HRT-Systems </li><li>  Vorbereitung der Testdaten </li><li>  Entfernung des Standards </li><li>  Release freigeben </li><li>  Überleitung der Ergebnisse </li></ul><br><h4>  Vorbereitungsphase des HRT-Testsystems </h4><br>  In dieser Phase bereiten die Basisspezialisten das HRT-System vor.  HRT wird zu einem bestimmten Zeitpunkt aus einer Sicherung eines Produktivsystems wiederhergestellt.  Das heißt  Daten in HRP und HRT werden gleich. <br><br><h4>  Testdatenvorbereitungsphase </h4><br>  Trotz der Tatsache, dass die Daten zwischen dem Produktiv- und dem Testsystem aufeinander abgestimmt sind, müssen die Gehaltsabrechnungstests in einem noch berechneten Zeitraum durchgeführt werden.  Bereiten Sie dazu Testdaten vor: <br><br><ul><li>  Zeitstempelerzeugung </li></ul><br>  Da wir einen neuen Zeitraum berechnen möchten, müssen wir Zeitstempel für Mitarbeiter erstellen, die positiv registriert sind.  Zu diesem Zweck werden mithilfe des entwickelten Programms Zeitstempel für die Ankunft / Abreise in IT2011 aus dem Zeitplan des Mitarbeiters in IT0007 generiert. <br><br><img src="https://habrastorage.org/webt/5z/-m/bw/5z-mbwnqewotvn2z0o7btebelri.png"><br><br><ul><li>  Datenpflege IT0027 Kostenteilung </li></ul><br>  Für positiv registrierte Mitarbeiter wird die 0027IT-Kostenbeteiligung durch Kopieren von Daten aus IT1018 mit einem speziell entwickelten Programm ausgefüllt. <br><br><ul><li>  Daten für die Anzahlungsberechnung pflegen </li></ul><br>  Die Testdaten werden vollständig anhand der Personalnummern aufbereitet, die jeder Berechnungseinheit zugeordnet sind.  Füllen Sie dazu IT267 Off-Cycle Payments mit der Transaktion HRUU0267 aus. <br><br>  Zur Berechnung von Urlaub, Prämien, Entlassungen und verschiedenen Arten von Krankheitstage werden Testdaten für etwa 20 Mitarbeiter erstellt. <br><br>  Nachdem alle Testdaten gestartet wurden, wird die Sicherung des HRT-Systems durchgeführt. <br><br><h4>  Stadium der Entfernung des Standards </h4><br>  Diese Phase beinhaltet: <br><br><ul><li>  Zeitauswertung </li></ul><br>  Hierzu wird in der Zeitauswertungstransaktion pt60 eine Variante angelegt, die im Programm RPCS0000 weiter verwendet wird.  Mit dem Standardprogramm RPCS0000 werden Zeitauswertungen von Personalgruppengruppen parallel ausgeführt.  Die Verwendung von RPCS0000 kann die Zeitauswertungszeit erheblich verkürzen. <br><br><img src="https://habrastorage.org/webt/xn/9q/ta/xn9qtavvl2droxpzjtudti9qgzo.png"><br><br><ul><li>  Speichern des Benchmarks für Zeitauswertungsergebnisse </li></ul><br>  Nach Abschluss der Zeitauswertung müssen Sie das Ergebnis speichern.  Zu diesem Zweck wurde ein spezielles Programm erstellt, das die Ergebnisse der Bewertung (Tabellen ZES und ZL) in Textdateien speichert: <br><br><img src="https://habrastorage.org/webt/jb/me/kr/jbmekrhqosu4qlbrlwt2fyef0cm.png"><br><br>  Ein Fragment der erstellten Zeitauswertungs-Standarddatei: <br><br><img src="https://habrastorage.org/webt/7u/i2/e9/7ui2e9zzpztebhfzwvkzilwiztk.png"><br><br><ul><li>  Gehaltsabrechnung durchführen (reguläre und Zwischenabrechnungszahlungen) </li></ul><br>  Die Berechnungen werden mit Standardmitteln (HRCUCLACM-Programm und Transaktion PUST) für das gesamte Personalnummernvolumen durchgeführt. <br><br><ul><li>  Berechnungsergebnisse für spätere Abstimmung speichern </li></ul><br>  Zu diesem Zweck speichern wir im Standardbericht zu den Lohnarten PC00_M99_CWTR die Option zum Anzeigen der erforderlichen Berechnung (regulär oder zwischen Abrechnung).  Um die Berechnungsdaten im HRD-Entwicklungssystem zu speichern, wurde ein Anwenderprogramm entwickelt.  Einer der Eingabeparameter für dieses Programm ist die generierte Version des Reports PC00_M99_CWTR: <br><br><img src="https://habrastorage.org/webt/sq/kf/as/sqkfasgh1zkdjo9eycdbb0wnioy.png"><br><br>  Nachdem Sie dieses Programm im HRD-Entwicklungssystem ausgearbeitet haben, werden die Referenzergebnisse der Gehaltsabrechnung gespeichert: <br><br><img src="https://habrastorage.org/webt/rm/1m/9m/rm1m9m0lzvcqs4hiot-goz9xoh4.png"><br><br><ul><li>  Posten </li></ul><br>  Im HRT-Testsystem wird eine produktive Buchung des Testfinanzsystems durchgeführt.  Anschließend werden mit einem speziell entwickelten Programm Buchungsdaten in das HRD-Entwicklungssystem als Referenz für die zukünftige Abstimmung hochgeladen. <br><br><img src="https://habrastorage.org/webt/ly/wm/gn/lywmgnsdsxqcjij6vbpofzqecjc.png"><br><br>  Nach Abschluss dieses Programms werden die Referenzergebnisse von Buchungen im Finanzsystem im HRD-Entwicklungssystem gespeichert: <br><br><img src="https://habrastorage.org/webt/rr/la/ke/rrlakerjyhndywewkfioat8lzv8.png"><br><br><ul><li>  Bildung von Registern für die Übertragung </li></ul><br>  Nach der Berechnung des Gehalts bilden wir ein Überweisungsregister.  Mit dem entwickelten Anwenderprogramm werden diese Registrierungen auch als Referenz in Textdateien gespeichert. <br><br><img src="https://habrastorage.org/webt/bp/t6/dd/bpt6ddu8nigqa0vmolmd5bcrgue.png"><br><br>  Ein Fragment der Standarddatei des Gehaltsübertragungsregisters: <br><br><img src="https://habrastorage.org/webt/uu/cn/_l/uucn_lpfuiz1mwp1u101acct5i4.png"><br><br><ul><li>  Steuerberichterstattung </li></ul><br>  6-NDFL- und 2-NDFL-Steuerberichte werden unter Verwendung der Standardberichte RPCPAYRU_6NDFL bzw. HRULNDFL generiert.  Zu Testzwecken wurden sie mit Logik erweitert, um Ergebnisse in transparenten Tabellen zu speichern.  Nachdem das Steuerreporting in einer Testumgebung erstellt wurde, werden diese Ergebnisse mit einem Anwenderprogramm in das Entwicklungssystem übertragen. <br><br><img src="https://habrastorage.org/webt/rc/ot/gr/rcotgr4lzj-jk9pnudc57copn40.png"><br><br>  Empfangen steuer daten standard: <br><br><img src="https://habrastorage.org/webt/nw/go/gq/nwgogqazzfq5akv025rays4_nbm.png"><br><br><h4>  Release Release Phase </h4><br>  Nach dem Entfernen des Standards muss das Testsystem aus der Sicherung wiederhergestellt werden, die nach der Vorbereitung der Testdaten erstellt wurde.  Das heißt  Wir erhalten ein System mit abgewickelten Testdaten, jedoch ohne Berechnungen.  Alle Updates werden auf diesem System installiert - Eigenentwicklungen und Standard Service Packs von SAP.  Danach werden regelmäßige und abrechnungsübergreifende Abrechnungen, Buchungen und andere Aktionen durchgeführt, die den Aktionen in der Phase der Entfernung des Standards entsprechen. <br><br><h4>  Versöhnungsphase </h4><br>  Nach dem Entfernen des Standards und der Freigabe ist die Abstimmungsphase abgeschlossen.  In dieser Phase <br>  Wir vergleichen die vor der Installation der Updates erhaltenen Daten mit den Daten auf dem aktualisierten System.  Und basierend auf der Analyse der Abweichungen ziehen wir Rückschlüsse auf das Vorhandensein von Fehlern in den installierten Updates. <br><br><ul><li>  Abstimmung der Zeitauswertungsergebnisse </li></ul><br>  Dazu starten wir das Programm zur automatisierten Überprüfung von Berechnungsergebnissen im Modus "Vergleich von Standard und Release".  Als einen der Parameter geben wir das Verzeichnis an, in dem die Zeitauswertungs-Standarddatei gespeichert wurde. <br><br><img src="https://habrastorage.org/webt/se/p0/lt/sep0lt04p7igob2-fxugf_1dpas.png"><br><br>  Wenn es einen Unterschied zwischen den Standard- und Release-Daten gibt, werden diese in diesem Bericht angezeigt. <br><br><img src="https://habrastorage.org/webt/qb/zx/fy/qbzxfynypuauwem7z0wttbz386c.png"><br><br><ul><li>  Abgleich buchen </li></ul><br>  Das Posten von Daten aus Release und Benchmark ist bereits im Entwicklungssystem.  Zur Verifizierung wird ein Anwenderbericht verwendet, in dem wir die Veröffentlichungstermine und den Standard als Parameter angeben: <br><br><img src="https://habrastorage.org/webt/ri/om/kh/riomkhx5betrvurxy04-oqfjvla.png"><br><br>  Wenn zwischen den Standard- und Freigabedaten ein Unterschied besteht, werden diese in diesem Bericht angezeigt. <br><br><img src="https://habrastorage.org/webt/dv/to/wm/dvtowmgce5h0qc1dffa3kf6mxwe.png"><br><br><ul><li>  Überleitung der Steuerberichterstattung </li></ul><br>  Daten mit den Ergebnissen der Erstellung von Berichten über 2-NDFL und 6-NDFL im Stadium der Entfernung sowohl des Standards als auch der Freigabe wurden in das HRD-Entwicklungssystem übertragen.  Ein Benutzerbericht wird zur Überprüfung der Daten verwendet.  Bei den Eingabeparametern handelt es sich um das Datum der Entfernung des Standards und des Benutzers, unter dem diese Entfernung stattgefunden hat: <br><br><img src="https://habrastorage.org/webt/p2/4o/ev/p24oevfz0cnlj27juvzy6gczgbo.png"><br><br>  Wenn es Unterschiede in den Daten gibt, werden diese angezeigt. <br><br><img src="https://habrastorage.org/webt/p8/fz/tl/p8fztloafhwrlgfanya96zsi9eq.png"><br><br><ul><li>  Abgleich der Gehaltsabrechnung </li></ul><br>  Die Daten, die bei der regelmäßigen Berechnung der Löhne mit verschiedenen Zwischenabrechnungen im Testsystem zum Zeitpunkt der Erstellung des Standards und der Freigabe gewonnen wurden, wurden in das Entwicklungssystem übertragen.  Jetzt gibt es im Entwicklungssystem eine Überprüfung der Daten zum Standard und zur Freigabe mit dem entwickelten Anwenderprogramm: <br><br><img src="https://habrastorage.org/webt/mi/kf/v7/mikfv7lxs5tk1lvc99bao4fr84k.png"><br><br>  Alle erhaltenen Unstimmigkeiten sind im Bericht enthalten. <br><br><img src="https://habrastorage.org/webt/bf/bp/mk/bfbpmkrx2zwdmytsslfeefhvnuw.png"><br><br><ul><li>  Abgleich von Registern zur Übertragung </li></ul><br>  Zum Zeitpunkt der Veröffentlichung wurden Textdateien mit Registrierungsdaten für die Auflistung generiert.  Wir vergleichen diese Referenzdaten mit den Registrierungen für die Auflistung, die nach der Installation der Updates erstellt wurden. <br><br><img src="https://habrastorage.org/webt/ug/w9/on/ugw9onqpixpcoxvdodxg2ft9qo4.png"><br><br>  Im Falle von Abweichungen werden diese im Bericht angezeigt. <br><br><img src="https://habrastorage.org/webt/pb/wx/x9/pbwxx92tha-y0nucxl9iuuiq1so.png"><br><br>  Alle festgestellten Unstimmigkeiten werden von Spezialisten der SAP HCM-Supportabteilung analysiert.  Wenn der Grund für die Abweichung Fehler in den Einstellungen / Designs sind, werden diese korrigiert und in der nächsten Iteration getestet.  Das heißt  Das Testsystem wird erneut aus der Sicherung wiederhergestellt, die nach der Einrichtung der Testdaten erstellt wurde. Installieren Sie Updates mit Fehlerkorrekturen und führen Sie die Schritte zum Entfernen der Freigabe und des Abgleichs erneut aus. <br><br>  Dieser Ansatz ermöglicht das Testen eines so kritischen Prozesses wie der Personalabrechnung in sehr hoher Qualität und wird nicht nur beim Testen monatlicher Releases / Updates, sondern auch bei Projektaktivitäten verwendet.  So wurde es erst in diesem Jahr erfolgreich bei zwei großen Projekten angewendet - der Reorganisation von juristischen Personen und der Aktualisierung des SAP-HCM-Systems auf die Erweiterungsstufe 8. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de474770/">https://habr.com/ru/post/de474770/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de474754/index.html">PHP-Sicherheit: Wo und wie werden Passwörter gespeichert? Teil 1</a></li>
<li><a href="../de474756/index.html">VMworld Europe 2019: Schlüsselankündigungen und Auspacken des legendären Rucksacks</a></li>
<li><a href="../de474760/index.html">Wir befestigen ngx-translate in Angular-Anwendung. Praktische Anleitung</a></li>
<li><a href="../de474762/index.html">Seminar: Hybride IT-Lösungen für Unternehmen. 14. November Moskau</a></li>
<li><a href="../de474768/index.html">Open Broadcast der Haupthalle HighLoad ++ 2019</a></li>
<li><a href="../de474772/index.html">Ein Startup, das in 21 Tagen mit AI ein Heilmittel entwickelt hat</a></li>
<li><a href="../de474776/index.html">Allgemeine Theorie und Archäologie der Virtualisierung x86</a></li>
<li><a href="../de474782/index.html">Überblick über die Sprachsynthese-Technologie</a></li>
<li><a href="../de474784/index.html">Arcade Stick Story</a></li>
<li><a href="../de474788/index.html">Organisation von Routen in Laravel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>