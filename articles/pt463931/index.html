<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí™üèº üçí ‚è≠Ô∏è Explorando as profundezas das anota√ß√µes de tipo no Python. Parte 2 ü§≥ üê∂ üéõÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoje estamos publicando a segunda parte de uma tradu√ß√£o do material, que √© dedicada √†s anota√ß√µes de tipo em Python. 

  

 ‚Üí A primeira parte 

 Como ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Explorando as profundezas das anota√ß√µes de tipo no Python. Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/463931/">  Hoje estamos publicando a segunda parte de uma tradu√ß√£o do material, que √© dedicada √†s anota√ß√µes de tipo em Python. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/wr/lw/bq/wrlwbqu0zinltnd22qtfjqnhsb4.jpeg"></a> <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A primeira parte</a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Como o Python suporta tipos de dados?</font> </h2><br>  Python √© uma linguagem de tipo din√¢mico.  Isso significa que os tipos de vari√°veis ‚Äã‚Äãusadas s√£o verificados apenas durante a execu√ß√£o do programa.  No exemplo dado na parte anterior do artigo, era poss√≠vel ver que um programador que escreve em Python n√£o precisava planejar os tipos de vari√°veis ‚Äã‚Äãe pensar em quanta mem√≥ria seria necess√°ria para armazenar seus dados. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui est√° o</a> que acontece quando voc√™ prepara seu c√≥digo Python para execu√ß√£o: ‚ÄúNo Python, o c√≥digo-fonte √© convertido, usando CPython, em uma forma muito mais simples chamada bytecode.  O bytecode consiste em instru√ß√µes que, em ess√™ncia, s√£o semelhantes √†s instru√ß√µes do processador.  Mas eles n√£o s√£o executados pelo processador, mas por um sistema de software chamado m√°quina virtual.  (N√£o se trata de m√°quinas virtuais cujos recursos permitem executar sistemas operacionais inteiros neles. No nosso caso, este √© um ambiente que √© uma vers√£o simplificada do ambiente dispon√≠vel para programas em execu√ß√£o no processador). " <br><br>  Como o CPython sabe quais tipos de vari√°veis ‚Äã‚Äãdevem ser quando prepara um programa para execu√ß√£o?  Afinal, n√£o indicamos esses tipos.  O CPython n√£o sabe disso.  Ele s√≥ sabe que vari√°veis ‚Äã‚Äãs√£o objetos.  Tudo no Python √© um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">objeto</a> , pelo menos at√© que algo tenha um tipo mais espec√≠fico. <br><br>  Por exemplo, o Python considera como uma string tudo o que est√° entre aspas simples ou duplas.  Se o Python encontrar um n√∫mero, ele considerar√° que o valor correspondente √© de um tipo num√©rico.  Se tentarmos fazer algo com uma entidade que n√£o pode ser feita com uma entidade de seu tipo, o Python nos informar√° mais tarde. <br><br>  Considere a seguinte mensagem de erro que aparece quando voc√™ tenta adicionar uma seq√º√™ncia de caracteres e um n√∫mero: <br><br><pre><code class="python hljs">name = <span class="hljs-string"><span class="hljs-string">'Vicki'</span></span> seconds = <span class="hljs-number"><span class="hljs-number">4.71</span></span>; --------------------------------------------------------------------------- TypeError                 Traceback (most recent call last) &lt;ipython-input<span class="hljs-number"><span class="hljs-number">-9</span></span><span class="hljs-number"><span class="hljs-number">-71805</span></span>d305c0b&gt; <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt;       <span class="hljs-number"><span class="hljs-number">3</span></span>       <span class="hljs-number"><span class="hljs-number">4</span></span> ----&gt; <span class="hljs-number"><span class="hljs-number">5</span></span> name + seconds TypeError: must be str, <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> float</code> </pre> <br>  O sistema nos diz que n√£o pode adicionar seq√º√™ncias de caracteres e n√∫meros de ponto flutuante.  Al√©m disso, o fato de o <code>name</code> ser uma string e de <code>seconds</code> ser um n√∫mero n√£o interessava ao sistema at√© que fosse feita uma tentativa de adicionar <code>name</code> e <code>seconds</code> . <br><br>  Em outras palavras, pode ser descrito da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">seguinte forma</a> : ‚ÄúA digita√ß√£o do pato √© usada ao realizar a adi√ß√£o.  Python n√£o est√° interessado em qual tipo um objeto espec√≠fico possui.  Tudo o que o sistema est√° interessado √© se ele retorna uma chamada significativa para o m√©todo de adi√ß√£o.  Caso contr√°rio, ser√° emitido um erro. " <br><br>  O que isso significa?  Isso significa que, se escrevermos programas em Python, n√£o receberemos uma mensagem de erro at√© que o int√©rprete do CPython esteja envolvido na execu√ß√£o da mesma linha na qual h√° um erro. <br><br>  Essa abordagem foi inconveniente quando aplicada em equipes que trabalham em grandes projetos.  O fato √© que, nesses projetos, eles trabalham n√£o com vari√°veis ‚Äã‚Äãseparadas, mas com estruturas de dados complexas.  Nesses projetos, algumas fun√ß√µes s√£o chamadas por outras, e essas, por sua vez, s√£o chamadas por algumas outras fun√ß√µes.  Os membros da equipe devem poder verificar rapidamente o c√≥digo de seus projetos.  Se eles n√£o conseguirem escrever bons testes que detectam erros nos projetos antes de serem colocados em produ√ß√£o, isso significa que esses projetos podem esperar grandes problemas. <br><br>  A rigor, aqui chegamos √† conversa sobre anota√ß√µes de tipo em Python. <br><br>  Podemos dizer que, em geral, o uso de anota√ß√µes de tipo tem muitos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pontos fortes</a> .  Se voc√™ trabalha com estruturas ou fun√ß√µes complexas de dados que recebem muitos valores de entrada, o uso de anota√ß√µes simplifica bastante o trabalho com estruturas e fun√ß√µes semelhantes.  Especialmente - algum tempo ap√≥s a sua cria√ß√£o.  Se voc√™ tiver apenas uma fun√ß√£o com um par√¢metro, como nos exemplos fornecidos aqui, trabalhar com essa fun√ß√£o √©, em qualquer caso, muito simples. <br><br>  E se precisarmos trabalhar com fun√ß√µes complexas que usam muitos valores de entrada semelhantes a isso na documenta√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PyTorch</a> : <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">train</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args, model, device, train_loader, optimizer, epoch)</span></span></span><span class="hljs-function">:</span></span>    model.train()    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> batch_idx, (data, target) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> enumerate(train_loader):        data, target = data.to(device), target.to(device)        optimizer.zero_grad()        output = model(data)        loss = F.nll_loss(output, target)        loss.backward()        optimizer.step()        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> batch_idx % args.log_interval == <span class="hljs-number"><span class="hljs-number">0</span></span>:            print(<span class="hljs-string"><span class="hljs-string">'Train Epoch: {} [{}/{} ({:.0f}%)]\tLoss: {:.6f}'</span></span>.format(                epoch, batch_idx * len(data), len(train_loader.dataset), <span class="hljs-number"><span class="hljs-number">100.</span></span> * batch_idx / len(train_loader), loss.item()))</code> </pre> <br>  O que √© <code>model</code> ?  Obviamente, podemos nos aprofundar na base de c√≥digo e descobrir: <br><br><pre> <code class="python hljs">model = Net().to(device)</code> </pre> <br>  Mas seria bom se voc√™ pudesse apenas especificar o tipo de <code>model</code> na assinatura da fun√ß√£o e se poupar de an√°lises de c√≥digo desnecess√°rias.  Talvez fosse assim: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">train</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args, model </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(type Net)</span></span></span></span><span class="hljs-function"><span class="hljs-params">, device, train_loader, optimizer, epoch)</span></span></span><span class="hljs-function">:</span></span></code> </pre> <br>  E o <code>device</code> ?  Se voc√™ vasculhar o c√≥digo, poder√° descobrir o seguinte: <br><br><pre> <code class="python hljs">device = torch.device(<span class="hljs-string"><span class="hljs-string">"cuda"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> use_cuda <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">"cpu"</span></span>)</code> </pre> <br>  Agora, estamos diante da quest√£o do que <code>torch.device</code> .  Este √© um tipo especial de PyTorch.  Sua descri√ß√£o pode ser encontrada na <a href="">se√ß√£o correspondente da</a> documenta√ß√£o do PyTorch. <br><br>  Seria bom se pud√©ssemos especificar o tipo de <code>device</code> na lista de argumentos da fun√ß√£o.  Assim, economizar√≠amos muito tempo para aqueles que precisariam analisar esse c√≥digo. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">train</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args, model </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(type Net)</span></span></span></span><span class="hljs-function"><span class="hljs-params">, device </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(type torch.Device)</span></span></span></span><span class="hljs-function"><span class="hljs-params">, train_loader, optimizer, epoch)</span></span></span><span class="hljs-function">:</span></span></code> </pre> <br>  Essas considera√ß√µes podem continuar por muito tempo. <br><br>  Como resultado, as anota√ß√µes de tipo s√£o muito √∫teis para quem escreve c√≥digo.  Mas eles tamb√©m beneficiam quem l√™ o c√≥digo de outras pessoas.  √â muito mais f√°cil ler o c√≥digo digitado do que o c√≥digo, para entender o que voc√™ precisa lidar com o que √© uma entidade.  As anota√ß√µes de tipo melhoram a legibilidade do c√≥digo. <br><br>  Ent√£o, o que foi feito no Python para trazer o c√≥digo para o mesmo n√≠vel de legibilidade que distingue o c√≥digo escrito em linguagens estaticamente tipadas? <br><br><h2>  <font color="#3AC1EF">Anota√ß√µes de tipo em Python</font> </h2><br>  Agora estamos prontos para falar seriamente sobre anota√ß√µes de tipo no Python.  Ao ler programas escritos em Python 2, era poss√≠vel ver que os programadores forneciam seu c√≥digo com dicas dizendo aos leitores do c√≥digo que tipo de vari√°veis ‚Äã‚Äãou valores retornados pelas fun√ß√µes s√£o. <br><br>  C√≥digo semelhante era originalmente assim: <br><br><pre> <code class="python hljs">users = [] <span class="hljs-comment"><span class="hljs-comment"># type: List[UserID] examples = {} # type: Dict[str, Any]</span></span></code> </pre> <br>  As anota√ß√µes de tipo costumavam ser coment√°rios simples.  Mas aconteceu que o Python come√ßou a mudar gradualmente para uma maneira mais uniforme de lidar com anota√ß√µes.  Em particular, estamos falando sobre o surgimento do documento <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PEP 3107</a> , dedicado √† anota√ß√£o de fun√ß√µes. <br><br>  Em seguida, come√ßaram os trabalhos no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PEP 484</a> .  Este documento, dedicado √†s anota√ß√µes de tipo, foi desenvolvido em estreita conex√£o com o mypy, o projeto DropBox, que visa verificar os tipos antes de executar scripts.  Usando mypy, vale lembrar que a verifica√ß√£o de tipo n√£o √© realizada durante a execu√ß√£o do script.  Uma mensagem de erro pode ser recebida em tempo de execu√ß√£o se, por exemplo, voc√™ tentar criar algo que n√£o seja compat√≠vel com esse tipo.  Diga - se voc√™ tentar <code>.pop()</code> um dicion√°rio ou chamar o m√©todo <code>.pop()</code> para uma sequ√™ncia. <br><br>  Aqui est√° o que voc√™ pode aprender com o PEP 484 sobre os detalhes da implementa√ß√£o de anota√ß√£o: ‚ÄúEmbora essas anota√ß√µes estejam dispon√≠veis em tempo de execu√ß√£o por meio do atributo de <code>annotations</code> regulares, as verifica√ß√µes de tipo n√£o s√£o executadas em tempo de execu√ß√£o.  Em vez disso, essa proposta prev√™ a exist√™ncia de uma ferramenta independente separada para verifica√ß√£o de tipos, com a qual o usu√°rio, se desejar, pode verificar o c√≥digo fonte de seus programas.  Em geral, uma ferramenta de verifica√ß√£o de tipo semelhante funciona como um linter muito poderoso.  "Embora, √© claro, usu√°rios individuais possam usar uma ferramenta semelhante para verificar tipos em tempo de execu√ß√£o, seja para a implementa√ß√£o da metodologia Design By Contract ou para a implementa√ß√£o da otimiza√ß√£o de JIT. Mas deve-se notar que essas ferramentas ainda n√£o atingiram maturidade suficiente". <br><br>  Como √© o trabalho com anota√ß√µes de tipo na pr√°tica? <br><br>  Por exemplo, seu uso significa a possibilidade de facilitar o trabalho em v√°rios IDEs.  Portanto, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PyCharm</a> oferece, com base nas informa√ß√µes de tipo, conclus√£o e verifica√ß√£o de c√≥digo.  Recursos semelhantes est√£o dispon√≠veis no VS Code. <br><br>  As anota√ß√µes de tipo s√£o √∫teis por mais um motivo: protegem o desenvolvedor de erros est√∫pidos.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui est√° um</a> √≥timo exemplo dessa prote√ß√£o. <br><br>  Suponha que adicionemos os nomes das pessoas ao dicion√°rio: <br><br><pre> <code class="python hljs">names = {<span class="hljs-string"><span class="hljs-string">'Vicki'</span></span>: <span class="hljs-string"><span class="hljs-string">'Boykis'</span></span>,         <span class="hljs-string"><span class="hljs-string">'Kim'</span></span>: <span class="hljs-string"><span class="hljs-string">'Kardashian'</span></span>} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dict, first_name, last_name)</span></span></span><span class="hljs-function">:</span></span>    dict[first_name] = last_name   append_name(names,<span class="hljs-string"><span class="hljs-string">'Kanye'</span></span>,<span class="hljs-number"><span class="hljs-number">9</span></span>)</code> </pre> <br>  Se permitirmos isso, haver√° muitas entradas formadas incorretamente no dicion√°rio. <br>  Vamos consertar isso: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> typing <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Dict names_new: Dict[str, str] = {<span class="hljs-string"><span class="hljs-string">'Vicki'</span></span>: <span class="hljs-string"><span class="hljs-string">'Boykis'</span></span>,                             <span class="hljs-string"><span class="hljs-string">'Kim'</span></span>: <span class="hljs-string"><span class="hljs-string">'Kardashian'</span></span>} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dic: Dict[str, str] , first_name: str, last_name: str)</span></span></span><span class="hljs-function">:</span></span>    dic[first_name] = last_name append_name(names_new,<span class="hljs-string"><span class="hljs-string">'Kanye'</span></span>,<span class="hljs-number"><span class="hljs-number">9.7</span></span>) names_new</code> </pre> <br>  Agora verifique este c√≥digo com mypy e obtenha o seguinte: <br><br><pre> <code class="python hljs">(kanye) mbp-vboykis:types vboykis$ mypy kanye.py kanye.py:<span class="hljs-number"><span class="hljs-number">9</span></span>: error: Argument <span class="hljs-number"><span class="hljs-number">3</span></span> to <span class="hljs-string"><span class="hljs-string">"append_name"</span></span> has incompatible type <span class="hljs-string"><span class="hljs-string">"float"</span></span>; expected <span class="hljs-string"><span class="hljs-string">"str"</span></span></code> </pre> <br>  Pode-se ver que mypy n√£o permite que voc√™ use o n√∫mero em que a string √© esperada.  Aqueles que desejam usar esses testes regularmente s√£o aconselhados a incluir o mypy, onde os testes de c√≥digo s√£o realizados em seus sistemas de integra√ß√£o cont√≠nua. <br><br><h2>  <font color="#3AC1EF">Digite dicas em v√°rios IDEs</font> </h2><br>  Um dos benef√≠cios mais importantes do uso de anota√ß√µes de tipo √© que eles permitem que os programadores Python usem os mesmos recursos de conclus√£o de c√≥digo em v√°rios IDEs dispon√≠veis para linguagens de tipo estaticamente. <br><br>  Por exemplo, suponha que voc√™ tenha um peda√ßo de c√≥digo semelhante ao seguinte.  Estas s√£o algumas fun√ß√µes dos exemplos anteriores agrupadas em classes. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> typing <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Dict <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rainfallRate</span></span></span><span class="hljs-class">:</span></span>    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, hours, inches)</span></span></span><span class="hljs-function">:</span></span>        self.hours= hours        self.inches = inches    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateRate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, inches:int, hours:int)</span></span></span><span class="hljs-function"> -&gt; float:</span></span>        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> inches/hours rainfallRate.calculateRate() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">addNametoDict</span></span></span><span class="hljs-class">:</span></span>    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, first_name, last_name)</span></span></span><span class="hljs-function">:</span></span>        self.first_name = first_name        self.last_name = last_name        self.dict = dict    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dict:Dict[str, str], first_name:str, last_name:str)</span></span></span><span class="hljs-function">:</span></span>        dict[first_name] = last_name addNametoDict.append_name()</code> </pre> <br>  O bom √© que, por nossa pr√≥pria iniciativa, adicionamos descri√ß√µes de tipo ao c√≥digo, podemos observar o que acontece no programa quando os m√©todos de classe s√£o chamados: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8dd/b42/ded/8ddb42ded904ffe516a90d990a7ff856.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/731/336/a7a/731336a7aa97c55b1e60930ada747ac0.png"></div><br>  <i><font color="#999999">Dicas do tipo IDE</font></i> <br><br><h2>  <font color="#3AC1EF">Introdu√ß√£o √†s anota√ß√µes de tipo</font> </h2><br>  Voc√™ pode encontrar boas recomenda√ß√µes na documenta√ß√£o do mypy sobre o que come√ßar ao come√ßar a digitar a base de c√≥digo: <br><br><ol><li>  Comece pequeno - verifique se alguns arquivos que cont√™m v√°rias anota√ß√µes s√£o validados com mypy. </li><li>  Escreva um script para executar o mypy.  Isso ajudar√° a obter resultados consistentes de teste. </li><li>  Execute mypy nos pipelines de IC para evitar erros de tipo. </li><li>  Anote gradualmente os m√≥dulos usados ‚Äã‚Äãcom mais freq√º√™ncia no projeto. </li><li>  Adicione anota√ß√µes de tipo ao c√≥digo existente que voc√™ est√° modificando;  equipe-os com o novo c√≥digo que voc√™ escreve. </li><li>  Use MonkeyType ou PyAnnotate para anotar automaticamente o c√≥digo antigo. </li></ol><br>  Antes de come√ßar a anotar seu pr√≥prio c√≥digo, ser√° √∫til lidar com algo. <br><br>  Primeiro, voc√™ precisar√° importar o m√≥dulo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">digita√ß√£o</a> para o c√≥digo se usar algo diferente de cadeias, n√∫meros inteiros, booleanos e os valores de outros tipos b√°sicos de Python. <br><br>  Em segundo lugar, este m√≥dulo permite trabalhar com v√°rios tipos complexos.  Entre eles est√£o <code>Dict</code> , <code>Tuple</code> , <code>List</code> e <code>Set</code> .  Uma constru√ß√£o do formul√°rio <code>Dict[str, float]</code> significa que voc√™ deseja trabalhar com um dicion√°rio cujos elementos usem uma string como chave e um n√∫mero de ponto flutuante como valor.  Tamb√©m existem tipos chamados <code>Optional</code> e <code>Union</code> . <br><br>  Em terceiro lugar, voc√™ precisa se familiarizar com o formato das anota√ß√µes de tipo: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> typing <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">some_function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(variable: type)</span></span></span><span class="hljs-function"> -&gt; return_type:</span></span>  do_something</code> </pre> <br>  Se voc√™ quiser saber mais sobre como come√ßar a aplicar anota√ß√µes de tipo em seus projetos, gostaria de observar que muitos bons tutoriais s√£o dedicados a isso.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui</a> est√° um deles.  Eu considero o melhor.  Depois de dominado, voc√™ aprender√° sobre a anota√ß√£o de c√≥digo e sua verifica√ß√£o. <br><br><h2>  <font color="#3AC1EF">Os resultados.</font>  <font color="#3AC1EF">Vale a pena usar anota√ß√µes de tipo em Python?</font> </h2><br>  Agora vamos nos perguntar se voc√™ deve usar anota√ß√µes de tipo em Python.  Na verdade, isso depende dos recursos do seu projeto.  Aqui est√° o que Guido van Rossum diz na documenta√ß√£o do mypy sobre isso: ‚ÄúO objetivo do mypy n√£o √© convencer todos a escrever c√≥digo Python estaticamente digitado.  A digita√ß√£o est√°tica √© totalmente opcional agora e no futuro.  O objetivo de Mypy √© oferecer aos programadores Python mais op√ß√µes.  √â para tornar o Python uma alternativa mais competitiva a outras linguagens estaticamente usadas em grandes projetos.  √â para aumentar a produtividade dos programadores e melhorar a qualidade do software ". <br><br>  O tempo necess√°rio para configurar o mypy e planejar os tipos necess√°rios para um determinado programa n√£o se justifica em pequenos projetos e durante experimentos (por exemplo, aqueles realizados no Jupyter).  Qual projeto deve ser considerado pequeno?  Provavelmente aquele cujo volume, de acordo com estimativas cuidadosas, n√£o exceda 1000 linhas. <br><br>  As anota√ß√µes de tipo fazem sentido em projetos maiores.  L√° eles podem, em particular, economizar muito tempo.  Estamos falando de projetos desenvolvidos por grupos de programadores, de pacotes e de c√≥digo, que s√£o usados ‚Äã‚Äãno desenvolvimento de sistemas de controle de vers√£o e pipelines de CI. <br><br>  Acredito que as anota√ß√µes de tipo nos pr√≥ximos dois anos se tornem muito mais comuns do que agora, sem mencionar o fato de que elas podem se transformar em uma ferramenta di√°ria comum.  E acredito que algu√©m que come√ßa a trabalhar com eles antes dos outros n√£o perde nada. <br><br>  <b>Caros leitores!</b>  Voc√™ usa anota√ß√µes de tipo em seus projetos Python? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt463931/">https://habr.com/ru/post/pt463931/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt463921/index.html">(N√£o muito) custos ocultos da base de c√≥digo comum do iOS e Android</a></li>
<li><a href="../pt463923/index.html">.container n√£o √© mais necess√°rio</a></li>
<li><a href="../pt463925/index.html">Vivaldi: Como contamos o n√∫mero de usu√°rios?</a></li>
<li><a href="../pt463927/index.html">Seguran√ßa e censura contornada: 5 VPN e proxies para o Google Chrome</a></li>
<li><a href="../pt463929/index.html">Explorando as profundezas das anota√ß√µes de tipo no Python. Parte 1</a></li>
<li><a href="../pt463933/index.html">Um script Python de 20 linhas que deseja aos pais bom dia todos os dias atrav√©s do WhatsApp</a></li>
<li><a href="../pt463937/index.html">N√£o tenho nada a esconder</a></li>
<li><a href="../pt463939/index.html">SimbirSoft lan√ßou uma solu√ß√£o m√≥vel para companhias de seguros</a></li>
<li><a href="../pt463943/index.html">As desventuras do unic√≥rnio preto</a></li>
<li><a href="../pt463951/index.html">c.tech: Cassandra Meetup # 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>