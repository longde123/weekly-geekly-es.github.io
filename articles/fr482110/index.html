<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíõ üßëüèø‚Äçü§ù‚Äçüßëüèø üöª Linux fonctionne sur ma carte de visite üë®üèº‚Äçüé§ ‚Ñ¢Ô∏è üë¶üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Traduction d'un article du blog de l' ing√©nieur George Hilliard 

  
 Cliquable 

 Je suis ing√©nieur en syst√®mes embarqu√©s. Dans mon temps libre, je c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Linux fonctionne sur ma carte de visite</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482110/"> <i>Traduction d'un article du <a href="https://www.thirtythreeforty.net/">blog de l'</a> ing√©nieur George Hilliard</i> <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/953/2a8/ddc/9532a8ddcfcc8709783f40fd9c588eeb.jpg"></a> <br>  <i>Cliquable</i> <br><br>  Je suis ing√©nieur en syst√®mes embarqu√©s.  Dans mon temps libre, je cherche souvent ce qui peut √™tre utilis√© dans la conception de futurs syst√®mes, ou quelque chose de la cat√©gorie de mes int√©r√™ts. <br><br>  Un de ces domaines est celui des ordinateurs bon march√© qui peuvent prendre en charge Linux, et moins cher sera le mieux.  Par cons√©quent, je me suis enterr√© dans un trou de lapin profond de processeurs peu connus. <br><br>  J'ai pens√©: "Ces processeurs sont si bon march√© qu'ils peuvent pratiquement √™tre distribu√©s gratuitement."  Et apr√®s un certain temps, l'id√©e m'est venue de cr√©er une carte nue pour Linux sous forme de carte de visite. <br><a name="habracut"></a><br>  D√®s que j'y ai pens√©, j'ai d√©cid√© que ce serait tr√®s cool √† faire.  J'ai d√©j√† <a href="https://hackaday.com/2017/10/04/literally-flashy-business-cards/">vu</a> <a href="https://hackaday.com/2018/05/11/stylish-business-card-with-a-stylophone-built-in/">des</a> <a href="https://hackaday.com/2014/06/17/designing-the-second-version-of-my-business-card/">cartes de visite</a> <a href="https://hackaday.com/2018/05/11/stylish-business-card-with-a-stylophone-built-in/">√©lectroniques</a> auparavant, et elles avaient diverses fonctionnalit√©s int√©ressantes, telles que l'√©mulation de cartes flash, des voyants clignotants ou m√™me le transfert de donn√©es sans fil.  Cependant, je n'ai pas vu de cartes de visite avec support Linux. <br><br>  Je m'en suis donc fait un. <br><br>  Ceci est une version compl√®te du produit.  Un ordinateur minimum √† part enti√®re sur ARM, qui ex√©cute ma version sp√©ciale de Linux, cr√©√©e √† l'aide de Buildroot. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6fd/e4a/608/6fde4a6082ee3747bc571f7b9394047b.jpg"><br><br>  Dans le coin, elle a un port USB.  Si vous le connectez √† un ordinateur, il se charge en environ 6 secondes et il peut √™tre vu comme une carte flash et un port s√©rie virtuel, √† travers lequel vous pouvez entrer dans le shell de la carte.  Sur le lecteur flash se trouve un fichier README, une copie de mon CV et certaines de mes photos.  Il y a plusieurs jeux dans le shell, des classiques d'Unix comme fortune et rogue, une petite version du jeu 2048 et l'interpr√©teur MicroPython. <br><br>  Tout cela se fait avec une toute petite puce flash de 8 Mo.  Le chargeur de d√©marrage tient dans 256 Ko, le noyau prend 1,6 Mo et l'ensemble du syst√®me de fichiers racine - 2,4 Mo.  Par cons√©quent, il reste beaucoup d'espace pour un lecteur flash virtuel.  Il a √©galement un r√©pertoire personnel accessible en √©criture - si quelqu'un fait quelque chose qu'il veut enregistrer.  Ceci est √©galement stock√© sur une puce flash. <br><br>  L'ensemble de l'appareil co√ªte moins de 3 $.  C'est assez bon march√© pour √™tre distribu√©.  Si vous avez re√ßu un tel appareil de ma part, cela signifie que j'essaie tr√®s probablement de vous impressionner. <br><br><h2>  Conception et assemblage </h2><br>  J'ai tout con√ßu et assembl√© moi-m√™me.  C'est mon travail, et j'aime √ßa, et la plupart des difficult√©s ont consist√© √† trouver suffisamment de pi√®ces bon march√© pour un tel passe-temps. <br><br>  Le choix d'un processeur a √©t√© la d√©cision la plus importante qui a affect√© le co√ªt et la faisabilit√© du projet.  Apr√®s des recherches actives, j'ai choisi le F1C100s, un processeur Allwinner relativement peu connu, √† co√ªt optimis√© (c'est-√†-dire sacr√©ment bon march√©).  Dans un cas, sont √† la fois RAM et CPU.  J'ai achet√© des processeurs sur Taobao.  Tous les autres composants achet√©s au LCSC. <br><br>  J'ai command√© des planches √† JLC.  Pour 8 $, j'ai fait 10 copies.  Leur qualit√© est impressionnante, surtout pour le prix;  Pas aussi bien rang√© que OSHPark, mais il a toujours l'air bien. <br><br>  J'ai fait le premier lot noir mat.  Ils √©taient beaux, mais √©taient tr√®s facilement souill√©s. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/750/9d9/d7c/7509d9d7c24c3ba3c6d7d9214c0f0878.jpg"><br><br>  Il y a eu quelques probl√®mes avec le premier lot.  Premi√®rement, le connecteur USB n'√©tait pas assez long pour s'ins√©rer correctement dans les ports USB.  Deuxi√®mement, les traces de flash n'ont pas √©t√© faites correctement, mais j'ai contourn√© cela en pliant les contacts. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f6a/d88/294/f6ad8829440e6f1b942292b45ab6841b.jpg"><br><br>  Apr√®s avoir tout v√©rifi√© au travail, j'ai command√© un nouveau lot de planches;  Vous pouvez voir une photo de l'un d'eux au d√©but de l'article. <br><br>  En raison de la petite taille de tous ces petits composants, j'ai d√©cid√© de recourir √† la soudure par refusion √† l'aide d'un <a href="https://www.thirtythreeforty.net/posts/2019/08/t962-reflow-profile-calculator/">po√™le bon march√©</a> .  J'ai acc√®s √† un cutter laser, j'ai donc coup√© un pochoir √† souder √† partir d'un film pour une plastifieuse dessus.  Le pochoir s'est plut√¥t bien pass√©.  Les trous pour les contacts du processeur d'un diam√®tre de 0,2 mm n√©cessitaient un soin particulier pour une fabrication de haute qualit√© - il √©tait extr√™mement important de bien focaliser le laser et de s√©lectionner sa puissance. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/91e/4bf/55d/91e4bf55dd1c86a241be05998ca1b2fd.jpg"><br>  <i>D'autres planches sont bonnes pour tenir la planche lors de l'application de la p√¢te.</i> <br><br>  J'ai appliqu√© de la p√¢te √† souder et arrang√© les composants manuellement.  Je me suis assur√© que le plomb n'√©tait utilis√© nulle part dans le processus - toutes les cartes, composants et p√¢tes sont <a href="https://ru.wikipedia.org/wiki/Restriction_of_Hazardous_Substances_Directive">conformes √† RoHS</a> - afin que je ne sois pas tourment√© par la conscience lorsque je les distribue aux gens. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/419/00d/a63/41900da63d71dd54c47c8325e4bfeead.jpg"><br>  <i>J'ai manqu√© un peu avec ce lot, mais la p√¢te √† souder pardonne les erreurs, et tout s'est bien pass√©</i> <br><br>  Chaque composant a pris environ 10 secondes pour se positionner, j'ai donc essay√© de minimiser leur nombre.  Plus de d√©tails sur la conception d'une carte peuvent √™tre trouv√©s dans <a href="https://www.thirtythreeforty.net/posts/2019/12/designing-my-linux-business-card/">mon</a> autre <a href="https://www.thirtythreeforty.net/posts/2019/12/designing-my-linux-business-card/">article d√©taill√©</a> . <br><br><h2>  Liste des mat√©riaux et co√ªt </h2><br>  J'ai respect√© un budget strict.  Et la carte de visite s'est av√©r√©e comme elle √©tait destin√©e - cela ne me d√©range pas de la donner!  Bien s√ªr, je ne le donnerai √† personne et √† tout le monde, car du temps est consacr√© √† la production de chaque copie, et mon temps n'est pas pris en compte dans le co√ªt d'une carte de visite (c'est un peu gratuit). <br><br><div class="scrollable-table"><table><tbody><tr><th>  Composant </th><th>  Prix </th></tr><tr><td>  F1C100s </td><td>  1,42 $ </td></tr><tr><td>  PCB </td><td>  0,80 $ </td></tr><tr><td>  Flash de 8 Mo </td><td>  0,17 $ </td></tr><tr><td>  Tous les autres composants </td><td>  0,49 $ </td></tr><tr><td>  <b>Total</b> </td><td>  2,88 $ </td></tr></tbody></table></div><br><br>  Naturellement, il y a encore des d√©penses difficiles √† calculer, comme la livraison (puisqu'elle a √©t√© r√©partie entre des composants destin√©s √† plusieurs projets).  Cependant, pour une carte avec prise en charge Linux, c'est certainement assez bon march√©.  De plus, cette ventilation donne une bonne id√©e du co√ªt de fabrication des appareils du segment de prix le plus bas: vous pouvez √™tre s√ªr que cela co√ªte encore moins cher aux entreprises que moi! <br><br><h2>  Les possibilit√©s </h2><br>  Que dire?  La carte charge Linux tr√®s fortement recadr√© en 6 secondes.  En raison du facteur de forme et du co√ªt, la carte ne dispose pas d'E / S, d'une prise en charge r√©seau ou d'une quantit√© importante de stockage pour lancer des programmes lourds.  N√©anmoins, j'ai r√©ussi √† ins√©rer un tas de choses int√©ressantes dans l'image du firmware. <br><br><h2>  USB </h2><br>  Avec l'USB, vous pourriez trouver beaucoup de choses int√©ressantes, mais j'ai choisi l'option la plus simple, de sorte qu'avec une forte probabilit√©, les gens travailleraient s'ils d√©cidaient d'essayer ma carte de visite.  Linux permet √† la carte de se comporter comme un ¬´p√©riph√©rique¬ª avec prise en charge du <a href="https://linux-sunxi.org/USB_Gadget">Gadget Framework</a> .  J'ai pris quelques pilotes de projets pr√©c√©dents qui comprenaient ce processeur, j'ai donc acc√®s √† toutes les fonctionnalit√©s du framework de gadget USB.  J'ai d√©cid√© d'√©muler un lecteur flash pr√©-g√©n√©r√© et de donner acc√®s au shell via un port s√©rie virtuel. <br><br><h2>  Coquille </h2><br>  Apr√®s vous √™tre connect√© en tant que root, vous pouvez ex√©cuter les programmes suivants sur la console s√©rie: <br><ul><li>  voleur: un jeu d'aventure de donjon Unix classique; </li><li>  2048: jeu simple en 2048 en mode console; </li><li>  fortune: la conclusion de divers dictons path√©tiques.  J'ai d√©cid√© de ne pas inclure ici toute la base de devis pour laisser de la place √† d'autres fonctions; </li><li>  <a href="https://micropython.org/">micropython</a> : un tr√®s petit interpr√©teur Python. </li></ul><br><br><h2>  √âmulation de lecteur flash </h2><br>  Au moment de la compilation, les outils de g√©n√©ration g√©n√®rent une petite image FAT32 et l'ajoutent comme l'une des partitions UBI.  Le sous-syst√®me de gadget Linux pr√©sente son PC comme un p√©riph√©rique de stockage. <br><br>  Si vous souhaitez voir ce qui appara√Æt sur le lecteur flash, la fa√ßon la plus simple de le faire est de vous familiariser avec la <a href="https://github.com/thirtythreeforty/businesscard-linux/tree/master/package/businesscard-flashdrive/files">source</a> .  Il y a aussi quelques photos et mon CV. <br><br><h2>  Les ressources </h2><br><h3>  Code source </h3><br>  Mon arborescence Buildroot est t√©l√©charg√©e sur GitHub - <a href="https://github.com/thirtythreeforty/businesscard-linux">trentethreeforty / businesscard-linux</a> .  Il existe un code pour g√©n√©rer une image flash NOR, qui est d√©fini √† l'aide du mode de t√©l√©chargement USB du processeur.  Il contient √©galement toutes les d√©finitions de packages pour les jeux et autres programmes que j'ai ins√©r√©s dans Buildroot apr√®s leur fonctionnement.  Si vous souhaitez utiliser les F1C100 dans votre projet, ce sera un excellent point de d√©part (n'h√©sitez pas <a href="https://www.thirtythreeforty.net/about/">√† me poser des questions</a> ). <br>  J'ai utilis√© le <a href="https://github.com/Icenowy/linux/tree/f1c100s">projet</a> Linux v4.9 <a href="https://github.com/Icenowy/linux/tree/f1c100s">magnifiquement ex√©cut√©</a> pour F1C100s par Icenowy, en le refaisant un peu.  La v5.2 presque standard fonctionne sur ma carte.  Elle se trouve sur GitHub - <a href="">trente</a> - <a href="">troisforty / linux</a> . <br>  Je pense qu'aujourd'hui j'ai le meilleur port U-Boot pour F1C100 au monde, et il est partiellement bas√© sur le travail d'Icenowy (de mani√®re inattendue, faire fonctionner U-Boot comme il se doit s'est av√©r√© √™tre une t√¢che tr√®s d√©sagr√©able).  Vous pouvez √©galement prendre GitHub - <a href="">trente</a> - <a href="">troisforty / u-boot</a> . <br><br><h3>  Documentation pour F1C100s </h3><br>  J'ai trouv√© la documentation plut√¥t rare des F1C100, et je la poste ici: <br><ul><li>  <a href="https://www.thirtythreeforty.net/media/F1C100s_Datasheet_V1.0.pdf">Fiche technique Allwinner F1C100s</a> - informations g√©n√©rales et brochage. </li><li>  <a href="https://www.thirtythreeforty.net/media/Allwinner_F1C600_User_Manual_V1.0.pdf">Allwinner F1C600 Reference Manual</a> - d√©finitions de registre pour le F1C600, qui est en fait le m√™me F1C100, mais renomm√© avec le support Linux d√©clar√© (ha!). </li><li>  J'ai activement emprunt√© les informations du circuit √† <a href="http://dl.sipeed.com/LICHEE/Nano/">Lichee Nano de Sipeed</a> - la carte de d√©veloppement que j'ai utilis√©e pour configurer le logiciel. </li></ul><br><br>  Pour les curieux, je t√©l√©charge le <a href="https://www.thirtythreeforty.net/posts/2019/12/my-business-card-runs-linux/businesscard.pdf">plan de mon projet</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d56/59a/549/d5659a549dd475471b3309f2efb66a0a.svg"><br><br><h2>  Conclusion </h2><br>  J'ai appris beaucoup de choses pendant le d√©veloppement de ce projet - c'est mon premier projet, o√π j'ai utilis√© un four de brasage par refusion.  J'ai √©galement appris √† trouver des ressources pour des composants avec une documentation m√©diocre. <br><br>  J'ai utilis√© mon exp√©rience avec Linux embarqu√© et mon exp√©rience dans le d√©veloppement de cartes.  Le projet n'est pas sans d√©fauts, mais il montre bien toutes mes comp√©tences. <br><br>  Pour ceux qui s'int√©ressent aux d√©tails du travail avec Linux embarqu√©, je sugg√®re de lire ma s√©rie d'articles √† ce sujet: <a href="https://www.thirtythreeforty.net/posts/2019/08/mastering-embedded-linux-part-1-concepts/">Ma√Ætriser Linux embarqu√©</a> .  L√†, je parle en d√©tail de la fa√ßon de cr√©er des logiciels et du mat√©riel √† partir de z√©ro pour des syst√®mes Linux minuscules et bon march√©, similaires √† ma carte de visite. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr482110/">https://habr.com/ru/post/fr482110/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr482100/index.html">Technologie AMP dans les e-mails: avantages, inconv√©nients et utilisations possibles</a></li>
<li><a href="../fr482102/index.html">Habr Q&A 2019: r√©sultats de l'ann√©e</a></li>
<li><a href="../fr482104/index.html">Comment g√©rer les habitudes des personnes programm√©es</a></li>
<li><a href="../fr482106/index.html">Habr Freelance 2019: r√©sultats de l'ann√©e</a></li>
<li><a href="../fr482108/index.html">Intelligence silencieuse. M√©thode d'identification des vuln√©rabilit√©s WEB potentielles</a></li>
<li><a href="../fr482114/index.html">Envoyer des e-mails en utilisant asyncio et aiohttp √† partir d'une application Django</a></li>
<li><a href="../fr482126/index.html">Chronique de Keras pour TensorFlow</a></li>
<li><a href="../fr482128/index.html">gReebok d√©tect√©. Dermatov√©nologue lui-m√™me</a></li>
<li><a href="../fr482130/index.html">Attribution √† grande √©chelle de droits aux utilisateurs de domaine de diff√©rentes for√™ts</a></li>
<li><a href="../fr482132/index.html">La copie de Tesla Cybertruck a √©t√© rep√©r√©e √† Moscou. Il s'agit d'un ... LADA russe Samara personnalis√©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>