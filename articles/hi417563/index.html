<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯУЮ тЫ╣ЁЯП╜ ЁЯзСЁЯП╝ WebAssembly рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдЖрдк рдЧреЛ рдкрд░ рдлреНрд░рдВрдЯреЗрдВрдб рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ ЁЯМ╛ ЁЯСИЁЯП┐ тШЭЁЯП╜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдореВрд▓ рд▓реЗрдЦред 

 рдлрд░рд╡рд░реА 2017 рдореЗрдВ, рдмреНрд░реИрдб рдлрд┐рдЯреНрдЬрд╝рдкреИрдЯреНрд░рд┐рдХ рдЯреАрдо рдХреЗ рдПрдХ рд╕рджрд╕реНрдп рдиреЗ рднрд╛рд╖рд╛ рдореЗрдВ WebAssembly рд╕рдорд░реНрдерди рдмрдирд╛рдиреЗ рдХрд╛ рдкреНрд░рд╕реНрддрд╛рд╡ рджрд┐рдпрд╛ред рдЪрд╛рд░ рдорд╣реАрдиреЗ рдмрд╛рдж, рдирд╡рдВрдмрд░ 2017 рдореЗрдВ, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>WebAssembly рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдЖрдк рдЧреЛ рдкрд░ рдлреНрд░рдВрдЯреЗрдВрдб рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417563/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореВрд▓</a> рд▓реЗрдЦред <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ww/az/mf/wwazmfemkd6qhegdxrzeabctnxk.jpeg"></div><br>  рдлрд░рд╡рд░реА 2017 рдореЗрдВ, рдмреНрд░реИрдб рдлрд┐рдЯреНрдЬрд╝рдкреИрдЯреНрд░рд┐рдХ рдЯреАрдо рдХреЗ рдПрдХ рд╕рджрд╕реНрдп рдиреЗ рднрд╛рд╖рд╛ рдореЗрдВ WebAssembly рд╕рдорд░реНрдерди рдмрдирд╛рдиреЗ рдХрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рд╕реНрддрд╛рд╡</a> рджрд┐рдпрд╛ред  рдЪрд╛рд░ рдорд╣реАрдиреЗ рдмрд╛рдж, рдирд╡рдВрдмрд░ 2017 рдореЗрдВ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧреЛрдлрд░рдЬреЗрдПрд╕</a> рд▓реЗрдЦрдХ рд░рд┐рдЪрд░реНрдб рдореБрдЬрд┐рдпреЛрд▓ рдиреЗ рд╡рд┐рдЪрд╛рд░ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛ред  рдФрд░ рдЕрдВрдд рдореЗрдВ, рдкреВрд░реНрдг рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдорд╛рд╕реНрдЯрд░ рдореЗрдВ рдкрд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдЕрдЧрд╕реНрдд 2018 рдХреЗ рдЖрд╕рдкрд╛рд╕ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЛ <a href="">рдЧреЛ</a> рд╕рдВрд╕реНрдХрд░рдг <a href="">1.11</a> рдкреНрд░рд╛рдкреНрдд рд╣реЛрдЧрд╛ред  рдирддреАрдЬрддрди, рдорд╛рдирдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рд▓рдЧрднрдЧ рд╕рднреА рддрдХрдиреАрдХреА рдХрдард┐рдирд╛рдЗрдпреЛрдВ рдХреЛ рдЕрдкрдиреЗ рд╕рд╛рде рдкрд░рд┐рдЪрд┐рдд рдХрд░рдиреЗ рдФрд░ рдЖрдпрд╛рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рд▓реЗрддрд╛ рд╣реИ рдпрджрд┐ рдЖрдкрдиреЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдореА рдореЗрдВ рд╕реА рд╕рдВрдХрд▓рди рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА рд╣реИред  рдпрд╣ рдЖрд╢рд╛рдЬрдирдХ рд▓рдЧрддрд╛ рд╣реИред  рдЖрдЗрдП рджреЗрдЦреЗрдВ рдХрд┐ рдкрд╣рд▓реЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕рд╛рде рдХреНрдпрд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/de1/415/41d/de141541d13f83b05f9e3412d1961868.png"></div><br><br>  рдЗрд╕ рд▓реЗрдЦ рдХреЗ рд╕рднреА рдЙрджрд╛рд╣рд░рдг рдбреЙрдХ рдХрдВрдЯреЗрдирд░ рд╕реЗ рд▓реЙрдиреНрдЪ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЬреЛ рд▓реЗрдЦрдХ рдХреЗ рднрдВрдбрд╛рд░ рдореЗрдВ рд╣реИрдВ</a> : <br><br><pre><code class="bash hljs">я╗┐docker container run -dP nlepage/golang_wasm:examples <span class="hljs-comment"><span class="hljs-comment"># Find out which host port is used docker container ls</span></span></code> </pre> <br>  рдлрд┐рд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓реЛрдХрд▓рд╣реЛрд╕реНрдЯ рдкрд░ рдЬрд╛рдПрдВ</a> : 32XXX /, рдФрд░ рдПрдХ рд▓рд┐рдВрдХ рд╕реЗ рджреВрд╕рд░реЗ рд▓рд┐рдВрдХ рдкрд░ рдЬрд╛рдПрдВред <br><br><h3>  рд╣рд╛рдп рд╡рд╛рд╕рдо! </h3><br>  рдореВрд▓ "рд╣реИрд▓реЛ рд╡рд░реНрд▓реНрдб" рдФрд░ рдЕрд╡рдзрд╛рд░рдгрд╛ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдХрд╛рдлреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдкреНрд░рд▓реЗрдЦрд┐рдд рд╣реИ</a> (рдпрд╣рд╛рдВ рддрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд┐ рд░реВрд╕реА рдореЗрдВ</a> рднреА), рддреЛ рдЪрд▓рд┐рдП рдмрд╕ рдФрд░ рдЕрдзрд┐рдХ рд╕реВрдХреНрд╖реНрдо рдЪреАрдЬреЛрдВ рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВред <br><br>  рд╕рдмрд╕реЗ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдЧреЛ рдХрд╛ рдПрдХ рддрд╛рдЬрд╝рд╛ рд╕рдВрдХрд▓рд┐рдд рд╕рдВрд╕реНрдХрд░рдг рдЬреЛ рдХрд┐ рдореАрд╕рдо рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред  рдореИрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрджрдо рд╕реЗ рдХрджрдо рдХрд╛ рд╡рд░реНрдгрди</a> рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрдерд╛рдкрдирд╛</a> , рдмрд╕ рдкрддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдЬрд░реВрд░рдд рд╣реИ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдорд╛рд╕реНрдЯрд░ рдореЗрдВ рд╣реИред <br><br>  рдпрджрд┐ рдЖрдк рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдЪрд┐рдВрддрд╛ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреЙрдХрд░реАрдлрд╛рдЗрд▓ рд╕реА рдЧреЛ</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧрд┐рддреБрдм</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд░ рдЧреЛрд▓рдм-рд╡рд╛рд╕ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА</a> рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИ, рдпрд╛ рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">nlepage / golang_wasm</a> рд╕реЗ рдПрдХ рдЫрд╡рд┐ рднреА рддреЗрдЬреА рд╕реЗ рд▓реЗ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдЕрдм рдЖрдк рдкрд╛рд░рдВрдкрд░рд┐рдХ <code>helloworld.go</code> рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рд╕рдВрдХрд▓рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">я╗┐GOOS=js GOARCH=wasm go build -o test.wasm helioworld.go</code> </pre><br>  GOOS рдФрд░ GOARCH рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">nlepage / golang_wasm</a> рдЫрд╡рд┐ рдореЗрдВ рд╕реЗрдЯ рдХрд┐рдП рдЧрдП рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЖрдк рд╕рдВрдХрд▓рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕ рддрд░рд╣ рдПрдХ <code>Dockerfile</code> рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="hljs go">FROM nlepage/golang_wasm COPY helloworld.<span class="hljs-keyword"><span class="hljs-keyword">go</span></span> /<span class="hljs-keyword"><span class="hljs-keyword">go</span></span>/src/hello/ RUN <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> build -o test.wasm hello</code> </pre><br>  рдЕрдВрддрд┐рдо рдЪрд░рдг <code>wasm_exec.html</code> рдФрд░ <code>wasm_exec.js</code> рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code> misc/wasm</code></a> рдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧреЛрдХрд░</a> рдЫрд╡рд┐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">nlepage / golang_wasm</a> рдореЗрдВ <code>/usr/local/go/misc/wasm/</code> рдореЗрдВ <code>test.wasm</code> рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИред <code>test.wasm</code> рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдПред рдмреНрд░рд╛рдЙрдЬрд╝рд░ (wasm_exec.js рджреНрд╡рд┐рдЖрдзрд╛рд░реА рдлрд╝рд╛рдЗрд▓ test.wasm рдХреА рдЕрдкреЗрдХреНрд╖рд╛ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдЗрд╕ рдирд╛рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ)ред <br>  рдЖрдкрдХреЛ рдмрд╕ nginx рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ 3 рд╕реНрдерд┐рд░ рдлрд╛рдЗрд▓реЗрдВ рджреЗрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рддрдм wasm_exec.html "рд░рди" рдмрдЯрди рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдЧрд╛ (рдпрд╣ рдХреЗрд╡рд▓ рддрднреА <code>test.wasm</code> рд╣реЛрдЧрд╛ рдЬрдм <code>test.wasm</code> рд╕рд╣реА рдврдВрдЧ <code>test.wasm</code> рд▓реЛрдб рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ)ред <br><br>  рдпрд╣ рдЙрд▓реНрд▓реЗрдЦрдиреАрдп рд╣реИ рдХрд┐ MIME рдкреНрд░рдХрд╛рд░ рдХреЗ <code>application/wasm</code> рд╕рд╛рде <code>test.wasm</code> рдХреЛ рдкрд░реЛрд╕рд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЕрдиреНрдпрдерд╛ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдЗрд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рд╕реЗ рдЗрдВрдХрд╛рд░ рдХрд░ рджреЗрдЧрд╛ред  (рдЙрджрд╛ред nginx рдХреЛ рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрдкрдбреЗрдЯ рдХрд┐рдП рдЧрдП mime.types рдлрд╝рд╛рдЗрд▓ рдХреА</a> рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ)ред <br><br>  рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">nlepage / golang_wasm</a> рд╕реЗ nginx рдЫрд╡рд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдирд┐рд╢реНрдЪрд┐рдд MIME рдкреНрд░рдХрд╛рд░, <code>wasm_exec.html</code> рдФрд░ <code>wasm_exec.js</code> рдХреЛрдб&gt; / usr / рд╢реЗрдпрд░ / nginx / html / рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред <br><br>  рдЕрдм "рд░рди" рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ, рдлрд┐рд░ рдЕрдкрдирд╛ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХрдВрд╕реЛрд▓ рдЦреЛрд▓реЗрдВ рдФрд░ рдЖрдк рдХрдВрд╕реЛрд▓ рджреЗрдЦреЗрдВрдЧреЗред рдЧреНрд░реАрдЯрд┐рдВрдЧ рдЧреНрд░реАрдЯрд┐рдВрдЧ ("рд╣реИрд▓реЛ рд╡рд╛рд╕реЛ" "))ред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cb1/3fe/587/cb13fe587331b2426368ea541f22c61b.png"></div><br>  рдПрдХ рдкреВрд░рд╛ рдЙрджрд╛рд╣рд░рдг <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> рдЙрдкрд▓рдмреНрдз <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> ред <br><br><h3>  рдЧреЛ рд╕реЗ рдЬреЗрдПрд╕ рдХреЛ рдмреБрд▓рд╛рдУ </h3><br>  рдЕрдм рдЬрдм рд╣рдордиреЗ рдЧреЛ рд╕реЗ рд╕рдВрдХрд▓рд┐рдд рдкрд╣рд▓рд╛ WebAssembly рдмрд╛рдЗрдирд░реА рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рд╣реИ, рддреЛ рдЖрдЗрдП рдкреНрд░рджрд╛рди рдХреА рдЧрдИ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдкрд░ рдПрдХ рдХрд░реАрдм рд╕реЗ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВред <br><br>  рдирдП syscall / js рдкреИрдХреЗрдЬ рдХреЛ рдорд╛рдирдХ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ рд╣реИред рдореБрдЦреНрдп рдлрд╝рд╛рдЗрд▓, <code><a href="">js.go</a></code> рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред <br>  рдПрдХ рдирдпрд╛ <code>js.Value</code> рдкреНрд░рдХрд╛рд░ <code>js.Value</code> рдЬреЛ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореВрд▓реНрдп рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддрд╛ рд╣реИред <br><br>  рдпрд╣ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЪрд░ рдХреЗ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд░рд▓ рдПрдкреАрдЖрдИ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ: <br><br><ul><li>  <code>js.Value.Get()</code> рдФрд░ <code>js.Value.Set()</code> рд▓реМрдЯреЗрдВ рдФрд░ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдлрд╝реАрд▓реНрдб рдорд╛рди рд╕реЗрдЯ рдХрд░реЗрдВред </li><li>  <code>js.Value.Index()</code> рдФрд░ <code>js.Value.SetIndex()</code> рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рд░реАрдб рдПрдВрдб рд░рд╛рдЗрдЯ рдЗрдВрдбреЗрдХреНрд╕ рджреНрд╡рд╛рд░рд╛ рдПрдХреНрд╕реЗрд╕ рдХрд░рддреЗ рд╣реИрдВред </li><li>  <code>js.Value.Call()</code> рдСрдмреНрдЬреЗрдХреНрдЯ рд╡рд┐рдзрд┐ рдХреЛ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рдмреБрд▓рд╛рддрд╛ рд╣реИред </li><li>  <code>js.Value.Invoke()</code> рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдлрдВрдХреНрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╣рддрд╛ рд╣реИред </li><li>  <code>js.Value.New()</code> рдирдП рдСрдкрд░реЗрдЯрд░ рдХреЛ рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдПрдХ рдирд┐рд░реНрдорд╛рддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдЬреНрдЮрд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред </li><li>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>js.Value.Int()</code> рдпрд╛ <code>js.Value.Bool()</code> рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЗрд╕реА рдЧреЛ рдкреНрд░рдХрд╛рд░ рдореЗрдВ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдорд╛рди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдФрд░ рддрд░реАрдХреЗред </li></ul><br>  рдФрд░ рдЕрддрд┐рд░рд┐рдХреНрдд рджрд┐рд▓рдЪрд╕реНрдк рддрд░реАрдХреЗ: <br><br><ul><li>  <code>js.Undefined()</code> js.Value рдХреЛ рд╕рдВрдмрдВрдзрд┐рдд <code>undefined</code> ред </li><li>  <code>js.Null()</code> <code>js.Value</code> рд╕рдВрдмрдВрдзрд┐рдд <code>null</code> ред </li><li>  <code>js.Global()</code> <code>js.Value</code> рдХреЛ рд╡реИрд╢реНрд╡рд┐рдХ рджрд╛рдпрд░реЗ рдореЗрдВ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░реЗрдЧрд╛ред </li><li>  <code>js.ValueOf()</code> рдЖрджрд┐рдо рдЬрд╛рдУ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕рд╣реА <code>js.Value</code> </li></ul><br>  Os.StdOut рдореЗрдВ рд╕рдВрджреЗрд╢ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп, рдЖрдЗрдП рдЗрд╕реЗ <code>window.alert()</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реВрдЪрдирд╛ рд╡рд┐рдВрдбреЛ рдореЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдВред <br><br>  рдЪреВрдВрдХрд┐ рд╣рдо рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рд╣реИрдВ, рд╡реИрд╢реНрд╡рд┐рдХ рд╕реНрдХреЛрдк рдПрдХ рд╡рд┐рдВрдбреЛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рдЖрдкрдХреЛ рд╡реИрд╢реНрд╡рд┐рдХ рд╕реНрдХреЛрдк рд╕реЗ рдЕрд▓рд░реНрдЯ () рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: <br><br><pre> <code class="go hljs">alert := js.Global().Get(<span class="hljs-string"><span class="hljs-string">"alert"</span></span>)</code> </pre><br>  рдЕрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ <code>js.Value</code> рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ <code>alert</code> рд╡реЗрд░рд┐рдПрдмрд▓ рд╣реИ, рдЬреЛ <code>window.alert</code> JS рдХрд╛ рд╕рдВрджрд░реНрдн рд╣реИ, рдФрд░ рдЖрдк <code>js.Value.Invoke()</code> рдорд╛рдзреНрдпрдо рд╕реЗ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><pre> <code class="go hljs">alert.Invoke(<span class="hljs-string"><span class="hljs-string">"Hello wasm!"</span></span>)</code> </pre><br>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрдирд╡реЙрдЗрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддрд░реНрдХреЛрдВ рдХреЛ рдкрд╛рд░рд┐рдд рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ js.ValueOf () рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреА рдХреЛрдИ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдпрд╣ рдПрдХ рдордирдорд╛рдиреА рд░рд╛рд╢рд┐ рд▓реЗрддрд╛ <code>interface{}</code> рдФрд░ рд╡реИрд▓реНрдпреВрдСрдл рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╣реА рдорд╛рдиреЛрдВ рдХреЛ рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИред <br><br>  рдЕрдм рд╣рдорд╛рд░реЗ рдирдП рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЛ рдЗрд╕ рддрд░рд╣ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"syscall/js"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { alert := js.Global().Get(<span class="hljs-string"><span class="hljs-string">"alert"</span></span>) alert.Invoke(<span class="hljs-string"><span class="hljs-string">"Hello Wasm!"</span></span>) }</code> </pre><br>  рдЬреИрд╕рд╛ рдХрд┐ рдкрд╣рд▓реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рдЖрдкрдХреЛ рд╕рд┐рд░реНрдл <code>test.wasm</code> рдирд╛рдордХ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ <code>wasm_exec.html</code> рдФрд░ <code>wasm_exec.js</code> рдХреЛ рдЫреЛрдбрд╝ рджреЗрдВ <code>wasm_exec.js</code> рдХрд┐ рдпрд╣ рдерд╛ред <br>  рдЕрдм, рдЬрдм рд╣рдо "рд░рди" рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдПрдХ рдЕрд▓рд░реНрдЯ рд╡рд┐рдВрдбреЛ рд╣рдорд╛рд░реЗ рд╕рдВрджреЗрд╢ рдХреЗ рд╕рд╛рде рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИред <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>examples/js-call</code></a> рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдПрдХ рдХрд╛рд░реНрдпрд╢реАрд▓ рдЙрджрд╛рд╣рд░рдг рд╣реИред <br><br><h3>  рдЬреЗрдПрд╕ рд╕реЗ рдХреЙрд▓ рдЬрд╛рдУред </h3><br>  рдЬреЗрдПрд╕ рдХреЛ рдЧреЛ рд╕реЗ рдХреЙрд▓ рдХрд░рдирд╛ рдмрд╣реБрдд рд╕рд░рд▓ рд╣реИ, рдЪрд▓реЛ <code>syscall/js</code> рдкреИрдХреЗрдЬ рдкрд░ рдХрд░реАрдм рд╕реЗ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ, рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рджреВрд╕рд░реА рдлрд╝рд╛рдЗрд▓ <a href=""><code>callback.go</code></a> ред <br><br><ul><li>  <code>js.Callback</code> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдЧреЛ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП <code>js.Callback</code> рдЖрд╡рд░рдг рдкреНрд░рдХрд╛рд░ред </li><li>  <code>js.NewCallback()</code> рдлрд╝рдВрдХреНрд╢рди рд╣реИ рдЬреЛ <code>js.NewCallback()</code> рдлрд╝рдВрдХреНрд╢рди рд▓реЗрддрд╛ рд╣реИ ( <code>js.Value</code> рдПрдХ рд╕реНрд▓рд╛рдЗрд╕ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдХреБрдЫ рднреА рдирд╣реАрдВ рд▓реМрдЯрд╛рддрд╛ рд╣реИ), рдФрд░ <code>js.Callback</code> рд▓реМрдЯрд╛рддрд╛ рд╣реИред </li><li>  рд╕рдХреНрд░рд┐рдп рдХреЙрд▓рдмреИрдХ рдФрд░ <code>js.Callback.Release()</code> рдХреЗ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдореИрдХреЗрдирд┐рдХ, рдЬрд┐рдиреНрд╣реЗрдВ рдХреЙрд▓рдмреИрдХ рдХреЛ рдирд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </li><li>  <code>js.NewEventCallback()</code> рд╕рдорд╛рди рд╣реИ, рд▓реЗрдХрд┐рди рд▓рд┐рдкрдЯреЗ рдлрд╝рдВрдХреНрд╢рди рдХреЗрд╡рд▓ 1 рддрд░реНрдХ - рдПрдХ рдШрдЯрдирд╛ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИред </li></ul><br>  рдЖрдЗрдП рдХреБрдЫ рд╕рд░рд▓ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ: JS <code>fmt.Println()</code> рдХреЛ JS рд╕рд╛рдЗрдб рд╕реЗ <code>fmt.Println()</code> ред <br><br>  рд╣рдо рдЗрд╕реЗ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Go рд╕реЗ рдХреЙрд▓рдмреИрдХ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП <code>wasm_exec.html</code> рдХреБрдЫ рдкрд░рд┐рд╡рд░реНрддрди рдХрд░реЗрдВрдЧреЗред <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.clear(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> go.run(inst); inst = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> WebAssembly.instantiate(mod, go.ImportObject); <span class="hljs-comment"><span class="hljs-comment">//   }</span></span></code> </pre><br>  рдпрд╣ рддрддреИрдпрд╛ рдмрд╛рдЗрдирд░реА рдХреЛ рд▓реЙрдиреНрдЪ рдХрд░рддреА рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░рддреА рд╣реИ, рдлрд┐рд░ рдЕрдЧрд▓реЗ рд░рди рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ рдлрд┐рд░ рд╕реЗ рд╕рдВрдЧрдард┐рдд рдХрд░рддреА рд╣реИред <br><br>  рдЖрдЗрдП рдПрдХ рдирдпрд╛ рдлрд╝рдВрдХреНрд╢рди рдЬреЛрдбрд╝реЗрдВ, рдЬреЛ рдЧреЛ рдХреЙрд▓рдмреИрдХ рдХреЛ рдмрдЪрд╛рдПрдЧрд╛ рдФрд░ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдкрд░ <code>Promise</code> рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдмрджрд▓ рджреЗрдЧрд╛: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> printMessage <span class="hljs-comment"><span class="hljs-comment">// Our reference to the Go callback let printMessageReceived // Our promise let resolvePrintMessageReceived // Our promise resolver function setPrintMessage(callback) { printMessage = callback resolvePrintMessageReceived() }</span></span></code> </pre><br>  рдЕрдм рдХреЙрд▓рдмреИрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <code>run()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░реЗрдВ: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.clear() <span class="hljs-comment"><span class="hljs-comment">// Create the Promise and store its resolve function printMessageReceived = new Promise(resolve =&gt; { resolvePrintMessageReceived = resolve }) const run = go.run(inst) // Start the wasm binary await printMessageReceived // Wait for the callback reception printMessage('Hello Wasm!') // Invoke the callback await run // Wait for the binary to terminate inst = await WebAssembly.instantiate(mod, go.importObject) // reset instance }</span></span></code> </pre><br>  рдФрд░ рдпрд╣ JS рдХреА рддрд░рдл рд╣реИ! <br><br>  рдЕрдм, рдЧреЛ рднрд╛рдЧ рдореЗрдВ, рдЖрдкрдХреЛ рдХреЙрд▓рдмреИрдХ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЗрд╕реЗ рдЬреЗрдПрд╕ рдкрдХреНрд╖ рдХреЛ рднреЗрдЬреЗрдВ рдФрд░ рдлрд╝рдВрдХреНрд╢рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдиреЗ рддрдХ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВред <br><br><pre> <code class="go hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> done = <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">chan</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span>{})</code> </pre><br>  рдлрд┐рд░ рдЙрдиреНрд╣реЗрдВ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдлрд╝рдВрдХреНрд╢рди <code>printMessage()</code> рд▓рд┐рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args []js.Value)</span></span></span></span> { message := args[<span class="hljs-number"><span class="hljs-number">0</span></span>].Strlng() fmt.Println(message) done &lt;- <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span>{}{} <span class="hljs-comment"><span class="hljs-comment">// Notify printMessage has been called }</span></span></code> </pre><br>  рддрд░реНрдХ рд╕реНрд▓рд╛рдЗрд╕ <code>[]js.Value</code> рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╛рд░рд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ рдЧреЛ рд▓рд╛рдЗрди рдореЗрдВ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рд╕реНрд▓рд╛рдЗрд╕ рддрддреНрд╡ рдкрд░ <code>js.Value.String()</code> рдХреЙрд▓ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br>  рдЕрдм рд╣рдо рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓рдмреИрдХ рдореЗрдВ рд▓рдкреЗрдЯ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="go hljs">callback := js.NewCallback(printMessage) <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> callback.Release() <span class="hljs-comment"><span class="hljs-comment">// to defer the callback releasing is a good practice</span></span></code> </pre><br>  рдлрд┐рд░ рдЬреЗрдПрд╕ рдлрд╝рдВрдХреНрд╢рди <code>setPrintMessage()</code> рдХреЙрд▓ <code>setPrintMessage()</code> , рдЬреИрд╕реЗ рдХреЙрд▓рд┐рдВрдЧ <code>setPrintMessage()</code> <code>window.alert()</code> : <br><br><pre> <code class="go hljs">setPrintMessage := js.Global.Get(<span class="hljs-string"><span class="hljs-string">"setPrintMessage"</span></span>) setPrintMessage.Invoke(callback)</code> </pre><br>  рдореБрдЦреНрдп рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдХреЙрд▓рдмреИрдХ рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рд╣реИ: <br><br><pre> <code class="go hljs">&lt;-done</code> </pre><br>  рдпрд╣ рдЕрдВрддрд┐рдо рднрд╛рдЧ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдХреЙрд▓рдмреИрдХ рдХреЛ рдПрдХ рд╕рдорд░реНрдкрд┐рдд рдЧреЛрд░рдЖрдЙрдЯ рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдореБрдЦреНрдп рдЧреЛрд░рдЖрдЙрдЯ рдХреЛ рдХреЙрд▓рдмреИрдХ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рдиреА рдЪрд╛рд╣рд┐рдП, рдЕрдиреНрдпрдерд╛ рд╕рдордп рд╕реЗ рдкрд╣рд▓реЗ wasm рдмрд╛рдЗрдирд░реА рдХреЛ рд░реЛрдХ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br>  рдкрд░рд┐рдгрд╛рдореА Go рдкреНрд░реЛрдЧреНрд░рд╛рдо рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br><pre> <code class="go hljs">я╗┐<span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"syscall/js"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> done = <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">chan</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span>{}) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { callback := js.NewCallback(prtntMessage) <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> callback.Release() setPrintMessage := js.Global().Get(<span class="hljs-string"><span class="hljs-string">"setPrintMessage"</span></span>) setPrIntMessage.Invoke(callback) &lt;-done } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args []js.Value)</span></span></span></span> { message := args[<span class="hljs-number"><span class="hljs-number">0</span></span>].Strlng() fmt.PrintIn(message) done &lt;- <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span>{}{} }</code> </pre><br>  рдкрд┐рдЫрд▓реЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреА рддрд░рд╣, <code>test.wasm</code> рдирд╛рдордХ рдлрд╝рд╛рдЗрд▓ <code>test.wasm</code> ред  рд╣рдореЗрдВ рдЕрдкрдиреЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕рд╛рде <code>wasm_exec.html</code> рдХреЛ рдмрджрд▓рдирд╛ <code>wasm_exec.html</code> , рдФрд░ <code>wasm_exec.js</code> рдкреБрди: рдЙрдкрдпреЛрдЧ <code>wasm_exec.js</code> рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдЕрдм, рдЬрдм рдЖрдк "рд░рди" рдмрдЯрди рджрдмрд╛рддреЗ рд╣реИрдВ, рддреЛ рд╣рдорд╛рд░реЗ рдкрд╣рд▓реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рд╕рдВрджреЗрд╢ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХрдВрд╕реЛрд▓ рдореЗрдВ рдореБрджреНрд░рд┐рдд рд╣реЛрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕ рдмрд╛рд░ рдпрд╣ рдмрд╣реБрдд рдмреЗрд╣рддрд░ рд╣реИ!  (рдФрд░ рдХрдард┐рдиред) <br><br>  рдбреЙрдХ рдлрд╝рд╛рдЗрд▓ рдмреЛрд▓реА рдореЗрдВ рдПрдХ рдХрд╛рд░реНрдпрд╢реАрд▓ рдЙрджрд╛рд╣рд░рдг <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>examples/go-call</code></a> рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИред <br><br><h3>  рд▓рдВрдмрд╛ рдХрд╛рдо </h3><br>  рдЬреЗрдПрд╕ рд╕реЗ рдХреЙрд▓рд┐рдВрдЧ рдЬреЗрдПрд╕ рд╕реЗ рдХреЙрд▓ рдХрд░рдиреЗ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдереЛрдбрд╝рд╛ рдЕрдзрд┐рдХ рдмреЛрдЭрд┐рд▓ рд╣реИ, рдЦрд╛рд╕рдХрд░ рдЬреЗрдПрд╕ рдХреА рддрд░рдл рд╕реЗред <br><br>  рдпрд╣ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рд╣реИ рдХрд┐ рдЖрдкрдХреЛ рдЧреЛ рдХреЙрд▓рдмреИрдХ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рдЬреЗрдПрд╕ рдХреА рдУрд░ рд╕реЗ рдкрд╛рд░рд┐рдд рд╣реЛрдиреЗ рддрдХ рдЗрдВрддрдЬрд╛рд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><br>  рдЖрдЗрдП рдХреБрдЫ рдФрд░ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ: рдХреНрдпреЛрдВ рдирд╣реАрдВ, рдореИрдВ wasm рдмрд╛рдЗрдирд░реА рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рддрд╛ рд╣реВрдВ, рдЬреЛ рдХреЙрд▓рдмреИрдХ рдХреЙрд▓ рдХреЗ рддреБрд░рдВрдд рдмрд╛рдж рд╕рдорд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рдЗрди рдХреЙрд▓реЛрдВ рдХреЛ рдХрд╛рдо рдХрд░рдирд╛ рдФрд░ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦреЗрдЧрд╛ред <br>  рдЗрд╕ рдмрд╛рд░, рдЖрдЗрдП рдЧреЛ рдкрдХреНрд╖ рд╕реЗ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рд╣рдорд╛рд░реЗ рдкрд┐рдЫрд▓реЗ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ, рд╣рдореЗрдВ рдХреЙрд▓рдмреИрдХ рдмрдирд╛рдиреЗ рдФрд░ рдЗрд╕реЗ рдЬреЗрдПрд╕ рдкрдХреНрд╖ рдХреЛ рднреЗрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br><br>  рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХрд┐рддрдиреА рдмрд╛рд░ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдпрд╣ рдЯреНрд░реИрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрд▓ рдХрд╛рдЙрдВрдЯрд░ рдЬреЛрдбрд╝реЗрдВред <br><br>  рд╣рдорд╛рд░рд╛ рдирдпрд╛ рдлрд╝рдВрдХреНрд╢рди <code>printMessage()</code> рдкреНрд░рд╛рдкреНрдд рд╕рдВрджреЗрд╢ рдФрд░ рдХрд╛рдЙрдВрдЯрд░ рдореВрд▓реНрдп рдХреЛ рдкреНрд░рд┐рдВрдЯ рдХрд░реЗрдЧрд╛: <br><br><pre> <code class="go hljs">я╗┐<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> no <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args []js.Value)</span></span></span></span> { message := args[<span class="hljs-number"><span class="hljs-number">0</span></span>].String() no++ fmt.Printf(<span class="hljs-string"><span class="hljs-string">"Message no %d: %s\n"</span></span>, no, message) }</code> </pre><br>  рдХреЙрд▓рдмреИрдХ рдмрдирд╛рдирд╛ рдФрд░ рдЗрд╕реЗ JS рд╕рд╛рдЗрдб рдореЗрдВ рднреЗрдЬрдирд╛ рдкрд┐рдЫрд▓реЗ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд╕рдорд╛рди рд╣реИ: <br><br><pre> <code class="go hljs">я╗┐callback := js.NewCallback(printMessage) <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> callback.Release() setPrintMessage := js.Global().Get(<span class="hljs-string"><span class="hljs-string">"setPrintMessage"</span></span>) setPrIntMessage.Invoke(callback)</code> </pre><br>  рд▓реЗрдХрд┐рди рдЗрд╕ рдмрд╛рд░ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдореБрдЦреНрдп рдЧреЛрд░реЛрдЗрди рдХреА рд╕рдорд╛рдкреНрддрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реВрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдЪреИрдирд▓ рдирд╣реАрдВ <code>done</code> ред  рдПрдХ рддрд░реАрдХрд╛ рдпрд╣ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдореБрдЦреНрдп рдЧреЛрд░реЛрдЗрди рдХреЛ рд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ рдЦрд╛рд▓реА <code>select{}</code> : <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span>{}</code> </pre><br>  рдпрд╣ рд╕рдВрддреЛрд╖рдЬрдирдХ рдирд╣реАрдВ рд╣реИ, рдЬрдм рддрдХ рдХрд┐ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдЯреИрдм рдмрдВрдж рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддрд╛, рддрдм рддрдХ рд╣рдорд╛рд░реЗ рдмрд╛рдЗрдирд░реА рд╡рд╛рд╢ рдореЗрдореЛрд░реА рдореЗрдВ рд▓рдЯрдХрд╛ рд░рд╣реЗрдЧрд╛ред <br><br>  рдЖрдк рдкреГрд╖реНрда рдкрд░ рдкрд╣рд▓реЗ рдХреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>beforeunload</code></a> рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдИрд╡реЗрдВрдЯ рдХреЛ рд╕реБрди рд╕рдХрддреЗ рд╣реИрдВ, рдЖрдкрдХреЛ рдИрд╡реЗрдВрдЯ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдФрд░ рдЪреИрдирд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдореБрдЦреНрдп рдЧреЛрд░реЛрдЗрди рдХреЛ рд╕реВрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджреВрд╕рд░реЗ рдХреЙрд▓рдмреИрдХ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> beforeUnloadCh = <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">chan</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span>{})</code> </pre><br>  рдЗрд╕ рдмрд╛рд░, рдирдпрд╛ рдкрд╣рд▓реЗ <code>beforeUnload()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗрд╡рд▓ рдИрд╡реЗрдВрдЯ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдЧрд╛, рдПрдХ рдПрдХрд▓ <code>js.Value</code> рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ: <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">beforeUnload</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(event js.Value)</span></span></span></span> { beforeUnloadCh &lt;- <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span>{}{} }</code> </pre><br>  рдлрд┐рд░ рдЗрд╕реЗ <code>js.NewEventCallback()</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреЙрд▓рдмреИрдХ рдореЗрдВ рд▓рдкреЗрдЯреЗрдВ рдФрд░ рдЗрд╕реЗ JS рд╕рд╛рдЗрдб рдкрд░ рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░реЗрдВ: <br><br><pre> <code class="go hljs">beforeUnloadCb := js.NewEventCallback(<span class="hljs-number"><span class="hljs-number">0</span></span>, beforeUnload) <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> beforeUnloadCb.Release() addEventLtstener := js.Global().Get(<span class="hljs-string"><span class="hljs-string">"addEventListener"</span></span>) addEventListener.Invoke(<span class="hljs-string"><span class="hljs-string">"beforeunload"</span></span>, beforeUnloadCb)</code> </pre><br>  рдЕрдВрдд рдореЗрдВ, рдкрд╣рд▓реЗ <code>beforeUnloadCh</code> рдЪреИрдирд▓ рд╕реЗ рдкрдврд╝рдиреЗ рдХреЗ рд╕рд╛рде рдЦрд╛рд▓реА рдмреНрд▓реЙрдХрд┐рдВрдЧ <code>select</code> рдХреЛ <code>beforeUnloadCh</code> : <br><br><pre> <code class="go hljs">&lt;-beforeUnloadCh fmt.Prtntln(<span class="hljs-string"><span class="hljs-string">"Bye Wasm!"</span></span>)</code> </pre><br>  рдЕрдВрддрд┐рдо рдХрд╛рд░реНрдпрдХреНрд░рдо рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><pre> <code class="go hljs">я╗┐<span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"syscall/js"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ( no <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> beforeUnloadCh = <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">chan</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span>{}) ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { callback := js.NewCallback(printMessage) <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> callback.Release() setPrintMessage := js.Global().Get(<span class="hljs-string"><span class="hljs-string">"setPrintMessage"</span></span>) setPrIntMessage.Invoke(callback) beforeUnloadCb := js.NewEventCallback(<span class="hljs-number"><span class="hljs-number">0</span></span>, beforeUnload) <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> beforeUnloadCb.Release() addEventLtstener := js.Global().Get(<span class="hljs-string"><span class="hljs-string">"addEventListener"</span></span>) addEventListener.Invoke(<span class="hljs-string"><span class="hljs-string">"beforeunload"</span></span>, beforeUnloadCb) &lt;-beforeUnloadCh fmt.Prtntln(<span class="hljs-string"><span class="hljs-string">"Bye Wasm!"</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args []js.Value)</span></span></span></span> { message := args[<span class="hljs-number"><span class="hljs-number">0</span></span>].String() no++ fmt.Prtntf(<span class="hljs-string"><span class="hljs-string">"Message no %d: %s\n"</span></span>, no, message) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">beforeUnload</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(event js.Value)</span></span></span></span> { beforeUnloadCh &lt;- <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span>{}{} }</code> </pre><br>  рдкрд╣рд▓реЗ, рдЬреЗрдПрд╕ рдХреА рдУрд░ рд╕реЗ, wasm рдмрд╛рдЗрдирд░реА рдХрд╛ рдбрд╛рдЙрдирд▓реЛрдб рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рдерд╛: <br><br><pre> <code class="javascript hljs">я╗┐<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> go = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Go() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mod, inst WebAssembly .instantiateStreaming(fetch(<span class="hljs-string"><span class="hljs-string">"test.wasm"</span></span>), go.importObject) .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) =&gt;</span></span> { mod = result.module inst = result.Instance <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"runButton"</span></span>).disabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span> })</code> </pre><br>  рдЪрд▓реЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рддреБрд░рдВрдд рдмрд╛рдж рдмрд╛рдЗрдирд░реА рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░реЗрдВ: <br><br><pre> <code class="javascript hljs">я╗┐(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> go = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Go() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { instance } = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> WebAssembly.instantiateStreaming( fetch(<span class="hljs-string"><span class="hljs-string">"test.wasm"</span></span>), go.importObject ) go.run(instance) })()</code> </pre><br>  рдФрд░ тАЬрд░рдитАЭ рдмрдЯрди рдХреЛ рдПрдХ рдореИрд╕реЗрдЬ рдлреАрд▓реНрдб рдФрд░ рдПрдХ рдмрдЯрди <code>printMessage()</code> рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрд▓ рдХрд░реЗрдВред <br><br><pre> <code class="xml hljs">я╗┐<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"messageInput"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Hello Wasm!"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"printMessage(document.querySelector('#messagelnput').value);"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"prtntMessageButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span><span class="hljs-tag">&gt;</span></span> Print message <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  рдЕрдВрдд рдореЗрдВ, <code>setPrintMessage()</code> рдлрд╝рдВрдХреНрд╢рди, рдЬреЛ рдХреЙрд▓рдмреИрдХ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ, рд╕рд░рд▓ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br><pre> <code class="javascript hljs">я╗┐<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> printMessage; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setPrintMessage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">callback</span></span></span><span class="hljs-function">) </span></span>{ printMessage = callback; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'#printMessageButton'</span></span>).disabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre><br>  рдЕрдм, рдЬрдм рд╣рдо "рдкреНрд░рд┐рдВрдЯ рд╕рдВрджреЗрд╢" рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рд╣рдорд╛рд░реА рдкрд╕рдВрдж рдХрд╛ рдПрдХ рд╕рдВрджреЗрд╢ рдФрд░ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХрдВрд╕реЛрд▓ рдореЗрдВ рдореБрджреНрд░рд┐рдд рдХреЙрд▓ рдХрд╛рдЙрдВрдЯрд░ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдПред <br>  рдпрджрд┐ рд╣рдо рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХрдВрд╕реЛрд▓ рдХреЗ рдкреНрд░рд┐рдЬрд░реНрд╡ рд▓реЙрдЧ рдмреЙрдХреНрд╕ рдХреЛ рдЪреЗрдХ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдкреЗрдЬ рдХреЛ рд░рд┐рдлреНрд░реЗрд╢ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо "рдмрд╛рдп рд╡рд╛рд╕рдо" рд╕рдВрджреЗрд╢ рджреЗрдЦреЗрдВрдЧреЗред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6c3/676/63d/6c367663d28d90535ccaafd1c10b5f50.png"></div><br><br>  рд╕реНрд░реЛрдд рдЬреАрдердм рдкрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>examples/long-running</code></a> рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИрдВред <br><br><h3>  рдФрд░ рдлрд┐рд░? </h3><br>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рд╕реАрдЦрд╛ <code>syscall/js</code> API рдЕрдкрдирд╛ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреЛ рдХреБрдЫ рдХреЛрдб рдХреЗ рд╕рд╛рде рдЬрдЯрд┐рд▓ рдЪреАрдЬреЗрдВ рд▓рд┐рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдпрджрд┐ рдЖрдк рдПрдХ рд╕рд░рд▓ рд╡рд┐рдзрд┐ рдЬрд╛рдирддреЗ рд╣реИрдВ рддреЛ рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓реЗрдЦрдХ</a> рдХреЛ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВред <br>  рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдЧреЛ рдХреЙрд▓рдмреИрдХ рд╕реЗ рд╕реАрдзреЗ рдЬреЗрдПрд╕ рдХрд╛ рдореВрд▓реНрдп рд╡рд╛рдкрд╕ рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИред <br>  рдзреНрдпрд╛рди рд░рдЦреЗрдВ рдХрд┐ рд╕рднреА рдХреЙрд▓рдмреИрдХ рдПрдХ рд╣реА рдЧреЛрд░рдЖрдЙрдЯ рдореЗрдВ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдпрджрд┐ рдЖрдк рдХреЙрд▓рдмреИрдХ рдореЗрдВ рдХреБрдЫ рдмреНрд▓реЙрдХрд┐рдВрдЧ рдСрдкрд░реЗрд╢рди рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдПрдХ рдирдпрд╛ рдЧреЛрд░рдЖрдЙрдЯ рдмрдирд╛рдирд╛ рди рднреВрд▓реЗрдВ, рдЕрдиреНрдпрдерд╛ рдЖрдк рдЕрдиреНрдп рд╕рднреА рдХреЙрд▓рдмреИрдХ рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рд░реЛрдХ рджреЗрдВрдЧреЗред <br>  рд╕рднреА рдореВрд▓ рднрд╛рд╖рд╛ рд╕реБрд╡рд┐рдзрд╛рдПрдБ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЙрдкрд▓рдмреНрдз рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рд╕рдореНтАНрдорд┐рд▓рд┐рдд рд╣реИ  рдЕрднреА рдХреЗ рд▓рд┐рдП, рд╕рднреА рдЧреЛрд░рдЖрдЙрдЯ рдПрдХ рдзрд╛рдЧреЗ рдореЗрдВ рдХрд╛рдо рдХрд░реЗрдВрдЧреЗ, рд▓реЗрдХрд┐рди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд╡рд┐рд╖реНрдп рдореЗрдВ</a> рдпрд╣ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмрджрд▓ рдЬрд╛рдПрдЧрд╛</a> ред <br>  рд╣рдорд╛рд░реЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдореЗрдВ, рд╣рдордиреЗ рдорд╛рдирдХ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╕реЗ рдХреЗрд╡рд▓ fmt рдкреИрдХреЗрдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛, рд▓реЗрдХрд┐рди рд╡рд╣ рд╕рдм рдХреБрдЫ рдЙрдкрд▓рдмреНрдз рд╣реИ рдЬреЛ рд╕реИрдВрдбрдмреЙрдХреНрд╕ рд╕реЗ рднрд╛рдЧрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред <br><br>  рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЛ Node.js. рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рдорд░реНрдерд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд▓рдЧрддрд╛ рд╣реИ <br><br>  рдЕрдВрдд рдореЗрдВ, рдкреНрд░рджрд░реНрд╢рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛?  рдпрд╣ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдкрд░реАрдХреНрд╖рдг рдЪрд▓рд╛рдирд╛ рджрд┐рд▓рдЪрд╕реНрдк рд╣реЛрдЧрд╛ рдХрд┐ рдЧреЛ рдХреЛ рд╢реБрджреНрдз рд╢реБрджреНрдз рдЬреЗрдПрд╕ рдХреЛрдб рдХреЗ рд╕рд╛рде рддреБрд▓рдирд╛ рдХреИрд╕реЗ рдХреА рдЬрд╛рддреА рд╣реИред  рдХрд┐рд╕реА рдиреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">hajimehoshi рдХрд╛</a> рдорд╛рдкрди рдХрд┐рдпрд╛ рдХрд┐ рд╡рд┐рднрд┐рдиреНрди рд╡рд╛рддрд╛рд╡рд░рдг рдкреВрд░реНрдгрд╛рдВрдХ рдХреЗ рд╕рд╛рде рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рддрдХрдиреАрдХ рдмрд╣реБрдд рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ae0/e5b/ab5/ae0e5bab565640331a956284e94f4859.jpg"></div><br><br>  рдпрд╣ рдордд рднреВрд▓реЛ рдХрд┐ рдЧреЛ 1.11 рдХреЛ рдЕрднреА рддрдХ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд░реВрдк рд╕реЗ рдЬрд╛рд░реА рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдореЗрд░реА рд░рд╛рдп рдореЗрдВ рдпрд╣ рдкреНрд░рд╛рдпреЛрдЧрд┐рдХ рддрдХрдиреАрдХ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╣реИред  рдЬреЛ рд▓реЛрдЧ рдкреНрд░рджрд░реНрд╢рди рдкрд░реАрдХреНрд╖рдгреЛрдВ рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рд╡реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрдкрдиреЗ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреЛ рдкреАрдбрд╝рд╛ рджреЗ рд╕рдХрддреЗ рд╣реИрдВ</a> ред <br>  рдореБрдЦреНрдп рдиреЛрдЯреНрд╕, рдЬреИрд╕рд╛ рдХрд┐ рд▓реЗрдЦрдХ рдиреЛрдЯ рдХрд░рддрд╛ рд╣реИ, рд╕рд░реНрд╡рд░ рд╕реЗ рдореМрдЬреВрджрд╛ рдЧреЛ рдХреЛрдб рдХреЗ рдХреНрд▓рд╛рдЗрдВрдЯ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рдг рд╣реИред  рд▓реЗрдХрд┐рди рдирдП рдорд╛рдирдХреЛрдВ рдХреЗ рд╕рд╛рде, рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдСрдлрд╝рд▓рд╛рдЗрди рдПрдкреНрд▓рд┐рдХреЗрд╢рди</a> рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ wasm рдХреЛрдб рд╕рдВрдХрд▓рд┐рдд рд░реВрдк рдореЗрдВ рд╕рд╣реЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЖрдк рдХрдИ рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рдХреЛ рд╡реЗрдм рдкрд░ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рд╣рдордд рд╣реИрдВ, рдЖрд╕рд╛рдиреА рд╕реЗ? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi417563/">https://habr.com/ru/post/hi417563/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi417553/index.html">рд╡реЗрдмрд┐рдирд╛рд░ "рд╕реАрдПрд╕рдПрд╕ рдкреНрд░реАрдкреНрд░реЛрд╕реЗрд╕рд░реНрд╕" рдЦреЛрд▓реЗрдВ</a></li>
<li><a href="../hi417555/index.html">рдорд╛рд╕реНрдХреЛ рдореЗрдВ рдХрд╛рд░реНрдЧреЛ рдХрд▓реНрдЯ рд╕реЗрдорд┐рдирд╛рд░ рдХреА рдШреЛрд╖рдгрд╛: рдорд╛рд░реНрдХреЗрдЯрд┐рдВрдЧ рд╕реНрдЯреНрд░рд╛рдЗрдХреНрд╕ рдмреИрдХ</a></li>
<li><a href="../hi417557/index.html">рд▓реЗрдЬрд░ рд╕реАрдПрдирд╕реА рдорд╢реАрдиреЛрдВ рдХрд╛ рдЕрд╡рд▓реЛрдХрди LaserSolid</a></li>
<li><a href="../hi417559/index.html">рдЪреАрди рдиреЗ рдХреИрд╕реЗ рдПрдкреНрдкрд▓ рд╕реНрдЯреЛрд░ рдмрдирд╛рдпрд╛ iCloud рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдХреБрдВрдЬреА рд░рд╛рдЬреНрдп рдЪреАрдиреА рд╕рд░реНрд╡рд░ рдкрд░</a></li>
<li><a href="../hi417561/index.html">рддрд┐рдерд┐ рдХрд╛ рдХреЙрд▓, рдпрд╛ рджреВрд╕рд░рд╛ Mail.Ru рдореЗрд▓ рд╣реИрдХрдереЙрди рдХреИрд╕рд╛ рдерд╛</a></li>
<li><a href="../hi417565/index.html">Google рдЕрдЯрд▓рд╛рдВрдЯрд┐рдХ рдХреЗ рдкрд╛рд░ рдПрдХ рдирд┐рдЬреА рдХреЗрдмрд▓ рдмрд┐рдЫрд╛рдПрдЧрд╛</a></li>
<li><a href="../hi417569/index.html">рдпреВрдирд┐рдЯ рдкрд░реАрдХреНрд╖рдг рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реНрдХреНрд░рд┐рдкреНрдЯ</a></li>
<li><a href="../hi417571/index.html">рд╕рд┐рдлрд╛рд░рд┐рд╢реЛрдВ рдореЗрдВ рдмрд╣реБ-рд╣рдерд┐рдпрд╛рд░рдмрдВрдж рдбрд╛рдХреВ</a></li>
<li><a href="../hi417573/index.html">рд╡рд┐рд╢реНрд╡ рдкреНрд░рд╕рд┐рджреНрдз рдПрдЖрдИ рдбреЗрд╡рд▓рдкрд░реНрд╕ рд╕реНрдорд╛рд░реНрдЯ рд╣рдерд┐рдпрд╛рд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╣рдордд рдирд╣реАрдВ рд╣реИрдВ</a></li>
<li><a href="../hi417577/index.html">рд╕реАрдПрдирд╕реА рдорд╢реАрдиреЗрдВ 3Dtool рд╕реЗ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>