<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõÄüèΩ üßëüèª‚Äçü§ù‚Äçüßëüèª „Ä∞Ô∏è Cr√©ation d'un projet BEM √† l'aide de Webpack üåñ üõÉ üßùüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'article se concentrera sur l'assemblage de projets BEM √† l'aide du bundle Webpack. Je vais montrer un exemple de configuration sans charger de lecte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cr√©ation d'un projet BEM √† l'aide de Webpack</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447560/"><p>  L'article se concentrera sur l'assemblage de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">projets BEM</a> √† l'aide du bundle Webpack.  Je vais montrer un exemple de configuration sans charger de lecteurs avec des entit√©s inutiles. </p><br><p>  Le mat√©riel convient √† ceux qui commencent tout juste √† se familiariser avec BEM.  Tout d'abord, nous aborderons les aspects th√©oriques de la m√©thodologie, et dans la section ¬´Pratique¬ª, je montrerai comment ils peuvent √™tre appliqu√©s. </p><a name="habracut"></a><br><h3 id="nemnogo-teorii">  Un peu de th√©orie </h3><br><p>  Si c'est la premi√®re fois que vous entendez parler de BEM et que vous voulez en savoir plus vous-m√™me, conservez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . </p><br><p>  <strong>Le BEM</strong> est une m√©thodologie utilis√©e pour organiser des projets de toute envergure.  Yandex l'a d√©velopp√© et l'a d'abord utilis√© uniquement dans le travail de ses services, mais plus tard, il a √©t√© publi√© dans le domaine public. </p><br><p>  BEM signifie ¬´Block, Element, Modifier¬ª. </p><br><p>  <strong>Block</strong> est une entit√© avec une architecture autonome qui peut √™tre r√©utilis√©e.  Un bloc peut contenir ses propres √©l√©ments. </p><br><p>  <strong>Un √©l√©ment</strong> fait partie int√©grante d'un bloc.  Un √©l√©ment ne peut √™tre utilis√© qu'√† l'int√©rieur du bloc parent. </p><br><p>  <strong>Un modificateur</strong> est une entit√© qui modifie l'affichage, l'√©tat ou le comportement d'un bloc. </p><br><p>  Ces √©l√©ments sous-tendent la m√©thodologie.  Ils offrent une beaut√© et une s√©paration de code pratique.  Plus de d√©tails sur leur appareil sont √©crits dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . </p><br><p>  La documentation BEM est largement √©crite.  Cependant, il y a un ¬´mais¬ª: un seuil √©lev√© pour entrer dans le mat√©riau.  Si les bases de la composition peuvent √™tre comprises en lisant une page de la documentation, alors la question de l'assemblage du projet est plus compliqu√©e. </p><br><p>  Pourquoi s'agissait-il de monter le projet?  Lorsque l'on travaille sur un projet √† grande √©chelle, tout le monde est confront√© au probl√®me de l'organisation du code.  Il n'est pas pratique de stocker tout le code d'un grand projet dans un seul fichier.  Diviser le code en plusieurs fichiers, puis le compiler manuellement n'est pas non plus une bonne solution.  Pour r√©soudre ce probl√®me, des collecteurs ou des <em>bundlers</em> sont utilis√©s qui automatisent la conversion du code source du projet en un code pr√™t √† √™tre envoy√© en production. </p><br><p>  Permettez-moi de vous rappeler: il est en outre suppos√© que les lecteurs poss√®dent les comp√©tences de base de Webpack.  Si vous n'avez jamais travaill√© avec lui auparavant, je vous recommande de vous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">familiariser</a> avec cet outil. </p><br><p>  La documentation BEM fournit des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">recommandations</a> pour l'assemblage des projets.  Seules deux options sont propos√©es √† titre d'exemples: l'assemblage utilisant ENB et Gulp. </p><br><p>  <strong>ENB</strong> est un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">utilitaire</a> con√ßu sp√©cifiquement pour la construction de projets BEM.  Elle est capable de travailler avec des entit√©s BEM hors de la bo√Æte.  Mais jetez un ≈ìil au code.  √Ä premi√®re vue, il peut d√©motiver un d√©veloppeur non pr√©par√©: </p><br><div class="spoiler">  <b class="spoiler_title">make.js</b> <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> techs = { <span class="hljs-comment"><span class="hljs-comment">// essential fileProvider: require('enb/techs/file-provider'), fileMerge: require('enb/techs/file-merge'), // optimization borschik: require('enb-borschik/techs/borschik'), // css postcss: require('enb-postcss/techs/enb-postcss'), postcssPlugins: [ require('postcss-import')(), require('postcss-each'), require('postcss-for'), require('postcss-simple-vars')(), require('postcss-calc')(), require('postcss-nested'), require('rebem-css'), require('postcss-url')({ url: 'rebase' }), require('autoprefixer')(), require('postcss-reporter')() ], // js browserJs: require('enb-js/techs/browser-js'), // bemtree // bemtree: require('enb-bemxjst/techs/bemtree'), // bemhtml bemhtml: require('enb-bemxjst/techs/bemhtml'), bemjsonToHtml: require('enb-bemxjst/techs/bemjson-to-html') }, enbBemTechs = require('enb-bem-techs'), levels = [ { path: 'node_modules/bem-core/common.blocks', check: false }, { path: 'node_modules/bem-core/desktop.blocks', check: false }, { path: 'node_modules/bem-components/common.blocks', check: false }, { path: 'node_modules/bem-components/desktop.blocks', check: false }, { path: 'node_modules/bem-components/design/common.blocks', check: false }, { path: 'node_modules/bem-components/design/desktop.blocks', check: false }, 'common.blocks', 'desktop.blocks' ]; module.exports = function(config) { const isProd = process.env.YENV === 'production'; config.nodes('*.bundles/*', function(nodeConfig) { nodeConfig.addTechs([ // essential [enbBemTechs.levels, { levels: levels }], [techs.fileProvider, { target: '?.bemjson.js' }], [enbBemTechs.bemjsonToBemdecl], [enbBemTechs.deps], [enbBemTechs.files], // css [techs.postcss, { target: '?.css', oneOfSourceSuffixes: ['post.css', 'css'], plugins: techs.postcssPlugins }], // bemtree // [techs.bemtree, { sourceSuffixes: ['bemtree', 'bemtree.js'] }], // bemhtml [techs.bemhtml, { sourceSuffixes: ['bemhtml', 'bemhtml.js'], forceBaseTemplates: true, engineOptions : { elemJsInstances : true } }], // html [techs.bemjsonToHtml], // client bemhtml [enbBemTechs.depsByTechToBemdecl, { target: '?.bemhtml.bemdecl.js', sourceTech: 'js', destTech: 'bemhtml' }], [enbBemTechs.deps, { target: '?.bemhtml.deps.js', bemdeclFile: '?.bemhtml.bemdecl.js' }], [enbBemTechs.files, { depsFile: '?.bemhtml.deps.js', filesTarget: '?.bemhtml.files', dirsTarget: '?.bemhtml.dirs' }], [techs.bemhtml, { target: '?.browser.bemhtml.js', filesTarget: '?.bemhtml.files', sourceSuffixes: ['bemhtml', 'bemhtml.js'], engineOptions : { elemJsInstances : true } }], // js [techs.browserJs, { includeYM: true }], [techs.fileMerge, { target: '?.js', sources: ['?.browser.js', '?.browser.bemhtml.js'] }], // borschik [techs.borschik, { source: '?.js', target: '?.min.js', minify: isProd }], [techs.borschik, { source: '?.css', target: '?.min.css', minify: isProd }] ]); nodeConfig.addTargets([/* '?.bemtree.js', */ '?.html', '?.min.css', '?.min.js']); }); };</span></span></code> </pre> <br><p>  <em>Code du r√©f√©rentiel public <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">project-stub</a> .</em> </p></div></div><br><p>  Le code de configuration ENB sera √©videmment compliqu√© pour ceux qui commencent tout juste √† utiliser BEM. </p><br><p>  La documentation contient <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des param√®tres pr√™ts √† l'emploi pour le collecteur</a> , et ils peuvent √™tre utilis√©s sans plonger dans les d√©tails de l'assemblage.  Mais que se passe-t-il si vous, comme moi, souhaitez avoir une image compl√®te de ce qui se passe avec le projet pendant la construction? </p><br><p>  La documentation BEM explique bien le processus d'assemblage en th√©orie, cependant, il existe peu d'exemples pratiques et ils ne sont pas toujours adapt√©s √† une compr√©hension claire du processus.  Pour r√©soudre ce probl√®me, je vais essayer de construire un projet BEM √©l√©mentaire en utilisant Webpack. </p><br><h3 id="praktika">  Pratique </h3><br><p>  Avant cela, j'ai mentionn√© que la s√©paration du code et l'organisation de l'assemblage simplifiaient le travail avec le projet.  Dans l'exemple ci-dessous, nous fournirons la s√©paration du code √† l'aide de BEM et son assemblage √† l'aide de Webpack. </p><br><p>  Nous voulons obtenir la configuration la plus simple, la logique d'assemblage doit √™tre lin√©aire et intuitive.  Mettons ensemble une page avec un bloc BEM, qui aura deux technologies: CSS et JS. </p><br><p>  Vous pouvez √©crire du code HTML avec un DIV avec la classe "block" et connecter manuellement toutes ses technologies.  En utilisant la d√©nomination de classe BEM et la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">structure de fichiers</a> correspondante, nous ne violons pas les principes de la m√©thodologie. </p><br><p>  J'ai obtenu l'arborescence de projet suivante: </p><br><pre> <code class="bash hljs">‚îú‚îÄ‚îÄ desktop <span class="hljs-comment"><span class="hljs-comment">#   "desktop" ‚îÇ ‚îî‚îÄ‚îÄ block #  "block" ‚îÇ ‚îú‚îÄ‚îÄ block.css # CSS-  "block" ‚îÇ ‚îî‚îÄ‚îÄ block.js # JS-  "block" ‚îú‚îÄ‚îÄ dist # ,      ‚îú‚îÄ‚îÄ pages # ,       JS- ‚îÇ ‚îú‚îÄ‚îÄ index.html # ,     ‚îÇ ‚îî‚îÄ‚îÄ index.js #      index.html ‚îî‚îÄ‚îÄ webpack.config.js # - Webpack</span></span></code> </pre> <br><p>  La premi√®re ligne fait r√©f√©rence au niveau prioritaire de ¬´bureau¬ª.  Dans la terminologie BEM, les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">niveaux de red√©finition</a> sont des r√©pertoires qui contiennent leurs propres impl√©mentations de blocs.  Lors de l'assemblage d'un projet, les impl√©mentations de tous les niveaux de red√©finition dans un certain ordre tombent dans le bundle final. </p><br><p>  Par exemple, nous avons un niveau de red√©finition de "bureau" dans lequel les impl√©mentations de blocs pour les appareils de bureau sont stock√©es.  Si nous devons compl√©ter le projet avec une mise en page pour les appareils mobiles, il nous suffira de cr√©er un nouveau niveau de red√©finition du "mobile" et de le remplir avec de nouvelles impl√©mentations des m√™mes blocs.  La commodit√© de cette approche est qu'√† un nouveau niveau de red√©finition, nous n'aurons pas besoin de dupliquer le code qui existe d√©j√† dans "desktop", car il se connectera automatiquement. </p><br><p>  Voici la configuration Webpack: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// webpack.config.js //    const path = require('path'); const opy = require('copy-webpack-plugin'); module.exports = { //  entry  output -       entry: path.resolve(__dirname, "pages", "index.js"), output: { filename: 'index.js', path: path.join(__dirname, 'dist') }, module: { rules: [ //    CSS- { test: /\.css$/, loader: 'style-loader!css-loader' } ] }, plugins: [ new opy([ //  HTML-      { from: path.join(__dirname, 'pages'), test: /\.html$/, to: path.join(__dirname, "dist") } ]) ] }</span></span></code> </pre> <br><p>  Ici, nous <code>/pages/index.js</code> le fichier <code>/pages/index.js</code> comme point d'entr√©e, ajoutons des chargeurs pour les styles CSS et copions <code>/pages/index.html</code> dans <code>/dist/index.html</code> . </p><br><div class="spoiler">  <b class="spoiler_title">index.html</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"block"</span></span></span><span class="hljs-tag">&gt;</span></span>Hello, World!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"index.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">block.css</b> <div class="spoiler_text"><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.block</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: red; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">24px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">text-align</span></span>: center; }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">block.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByClassName(<span class="hljs-string"><span class="hljs-string">'block'</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>].innerHTML += <span class="hljs-string"><span class="hljs-string">" [This text is added by block.js!]"</span></span></code> </pre> </div></div><br><p>  L'exemple utilise un niveau de remplacement et un bloc.  La t√¢che consiste √† assembler la page pour que les technologies (css, js) de notre bloc y soient connect√©es. </p><br><p>  Pour connecter les technologies, nous utilisons <code>require()</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// index.js require('../desktop/block/block.js'); require('../desktop/block/block.css');</span></span></code> </pre> <br><p>  Lancez Webpack et voyez ce qui se passe.  Ouvrez <code>index.html</code> partir du dossier <code>./dist</code> : </p><br><div class="spoiler">  <b class="spoiler_title">Capture d'√©cran de la page</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/jt/hn/mi/jthnmiunob5petfsjxx6aktp9wy.png"></p></div></div><br><p>  Les styles de bloc ont √©t√© charg√©s, javascript a fonctionn√© avec succ√®s.  Maintenant, nous pouvons l√©gitimement ajouter les lettres pr√©cieuses "BEM" √† notre projet. </p><br><p>  Tout d'abord, BEM a √©t√© cr√©√© pour travailler avec de grands projets.  Imaginons que notre designer ait essay√© et que la page ne soit plus un bloc, mais une centaine.  Suivant le sc√©nario pr√©c√©dent, nous connecterons manuellement les technologies de chaque bloc √† l'aide de <code>require()</code> .  Autrement dit, au moins cent lignes de code suppl√©mentaires appara√Ætront dans index.js. </p><br><p>  Les lignes de code suppl√©mentaires qui auraient pu √™tre √©vit√©es sont mauvaises.  Le code inutilis√© est encore pire.  Que faire si sur notre page il n'y aura que 10 des blocs disponibles, ou 20, ou 53?  Le d√©veloppeur aura du travail suppl√©mentaire: il devra se concentrer exactement sur les blocs utilis√©s sur la page, ainsi que les connecter et les d√©connecter manuellement pour √©viter le code inutile dans le bundle final. </p><br><p>  Heureusement, ce travail peut √™tre confi√© √† Webpack. </p><br><p>  L'algorithme optimal d'actions pour automatiser ce processus: </p><br><ol><li>  S√©lectionnez les classes correspondant √† la d√©nomination BEM √† partir du code HTML existant; </li><li>  En fonction des classes, obtenez la liste des entit√©s BEM utilis√©es sur la page; </li><li>  V√©rifiez s'il existe des r√©pertoires des blocs, √©l√©ments et modificateurs utilis√©s aux niveaux de red√©finition; </li><li>  Connectez la technologie de ces entit√©s au projet en ajoutant les expressions <code>require()</code> appropri√©es. </li></ol><br><p>  Pour commencer, j'ai d√©cid√© de v√©rifier s'il existe des chargeurs de d√©marrage pr√™ts √† l'emploi pour cette t√¢che.  Je n'ai pas trouv√© de module qui fournirait toutes les fonctionnalit√©s n√©cessaires dans une seule bouteille.  Mais je suis tomb√© sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bemdecl-to-fs-loader</a> , qui convertit les d√©clarations BEM en expressions <code>require()</code> .  Il est bas√© sur les niveaux de red√©finition et les technologies disponibles dans la structure du fichier projet. </p><br><blockquote>  <strong>D√©claration BEM</strong> - une liste des entit√©s BEM utilis√©es sur la page.  En savoir plus √† leur sujet dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> . </blockquote><p>  Un lien est manquant: la conversion du HTML en un tableau d'entit√©s BEM.  Cette t√¢che est r√©solue par le module <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">html2bemjson</a> . </p><br><blockquote>  <strong>bemjson</strong> - des donn√©es qui refl√®tent la structure de la future page.  Habituellement, ils sont utilis√©s par le moteur de mod√®le bem-xjst pour former des pages.  La syntaxe de bemjson est similaire √† la syntaxe des d√©clarations, mais la d√©claration ne contient qu'une liste d'entit√©s utilis√©es, tandis que bemjson refl√®te √©galement leur ordre. </blockquote><p>  bemjson n'est pas une d√©claration, nous le convertissons donc d'abord au format d√©cl pour la transmission √† bemdecl-to-fs-loader.  Pour cette t√¢che, utilisez le module du SDK: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bemjson-to-decl</a> .  Comme ce sont des modules NodeJS normaux, et non des chargeurs Webpack, vous devez cr√©er un chargeur wrapper.  Apr√®s cela, nous pouvons les utiliser pour convertir en Webpack. </p><br><p>  Nous obtenons le code du chargeur de d√©marrage suivant: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> html2bemjson = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"html2bemjson"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bemjson2decl = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"bemjson-to-decl"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> content </span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (content == <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; content == <span class="hljs-string"><span class="hljs-string">""</span></span>) callback(<span class="hljs-string"><span class="hljs-string">"html2bemdecl requires a valid HTML."</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> callback = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.async(); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bemjson = html2bemjson.convert( content ); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> decl = bemjson2decl.convert( bemjson ); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(decl); <span class="hljs-comment"><span class="hljs-comment">//     callback(null, decl); }</span></span></code> </pre> <br><p>  Pour simplifier l'installation du chargeur de d√©marrage et gagner du temps √† l'avenir, j'ai t√©l√©charg√© le module sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NPM</a> . </p><br><p>  Installons le chargeur de d√©marrage dans notre projet et apportons des modifications √† la configuration de Webpack: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> webpack = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'webpack'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> opy = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'copy-webpack-plugin'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: path.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">"pages"</span></span>, <span class="hljs-string"><span class="hljs-string">"index.js"</span></span>), <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'index.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">path</span></span>: path.join(__dirname, <span class="hljs-string"><span class="hljs-string">'dist'</span></span>) }, <span class="hljs-attr"><span class="hljs-attr">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">rules</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.html$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [ { <span class="hljs-comment"><span class="hljs-comment">//    bemdecl-to-fs-loader loader: 'bemdecl-to-fs-loader', //       options: { levels: ['desktop'], extensions: ['css', 'js'] } }, //      html2bemdecl-loader { loader: 'html2bemdecl-loader' } ] }, { test: /\.css$/, loader: 'style-loader!css-loader' } ] }, plugins: [ new opy([ { from: path.resolve(__dirname, 'pages'), test: /\.html$/, to: path.resolve(__dirname, "dist") } ]) ] }</span></span></code> </pre> <br><p>  Le param√®tre des <code>levels</code> <code>bemdecl-to-fs-loader</code> d√©marrage <code>bemdecl-to-fs-loader</code> sp√©cifie les niveaux de substitution √† utiliser et dans quel ordre.  Les <code>extensions</code> donnent les extensions de technologie de fichier utilis√©es dans notre projet. </p><br><p>  Par cons√©quent, au lieu de connecter les technologies manuellement, nous incluons uniquement un fichier HTML.  Toutes les conversions n√©cessaires seront effectu√©es automatiquement. </p><br><p>  Rempla√ßons le contenu de index.js par la ligne: </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./index.html'</span></span>);</code> </pre> <br><p>  Maintenant, lancez Webpack.  Lors de l'assemblage, la ligne s'affiche: </p><br><pre> <code class="javascript hljs">[ BemEntityName { <span class="hljs-attr"><span class="hljs-attr">block</span></span>: <span class="hljs-string"><span class="hljs-string">'block'</span></span> } ]</code> </pre> <br><p>  Cela signifie que la formation de la d√©claration a r√©ussi.  Nous regardons directement la sortie de Webpack: </p><br><pre> <code class="plaintext hljs"> Entrypoint main = index.js [0] ./pages/index.js 24 bytes {0} [built] [1] ./pages/index.html 74 bytes {0} [built] [2] ./desktop/block/block.css 1.07 KiB {0} [built] [3] ./node_modules/css-loader/dist/cjs.js!./desktop/block/block.css 217 bytes {0} [built] [7] ./desktop/block/block.js 93 bytes {0} [built] + 3 hidden modules</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Capture d'√©cran de la page</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/7d/vj/9c/7dvj9c2y_s3w28rncbsfa1yem2m.png"></p></div></div><br><p>  Nous avons obtenu un r√©sultat identique au pr√©c√©dent, √† la diff√©rence pr√®s que toutes les technologies de blocs √©taient connect√©es automatiquement.  Pour l'instant, il nous suffit d'ajouter une classe nomm√©e BEM au HTML, de connecter ce HTML avec <code>require()</code> et de cr√©er le r√©pertoire appropri√© avec les technologies de connexion. </p><br><p>  Nous avons donc une structure de fichiers qui correspond √† la m√©thodologie BEM, ainsi qu'un m√©canisme de connexion automatique des technologies de blocs. </p><br><p>  Abstraction faite des m√©canismes et des entit√©s de la m√©thodologie, nous avons cr√©√© une configuration Webpack extr√™mement simple mais efficace.  J'esp√®re que cet exemple aidera tous ceux qui commencent √† se familiariser avec BEM √† mieux comprendre les principes de base de la construction de projets BEM. </p><br><h3 id="poleznye-ssylki">  Liens utiles </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©p√¥t de projets GitHub</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide BEM complet</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Recommandations pour l'assemblage des projets BEM</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Une autre fa√ßon de construire un projet BEM avec Webpack</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr447560/">https://habr.com/ru/post/fr447560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr447548/index.html">Dans quelle mesure l‚Äôintroduction du VDI est-elle justifi√©e dans les petites et moyennes entreprises?</a></li>
<li><a href="../fr447552/index.html">Comment optimiser les sections du catalogue dans une boutique en ligne: instructions √©tape par √©tape</a></li>
<li><a href="../fr447554/index.html">Pr√©sentation des nouvelles fonctionnalit√©s de NestJS 6</a></li>
<li><a href="../fr447556/index.html">Extension Mypy avec plugins</a></li>
<li><a href="../fr447558/index.html">R√©alit√© virtuelle - jeu, traitement, vie. La technologie VR au service de la m√©decine de r√©√©ducation</a></li>
<li><a href="../fr447562/index.html">Introduction √† la r√©tro-ing√©nierie: piratage du format de donn√©es de jeu</a></li>
<li><a href="../fr447564/index.html">Modifications de l'autorisation de r√©f√©rentiel sur GitLab.com</a></li>
<li><a href="../fr447566/index.html">Les scientifiques ont d'abord montr√© une v√©ritable "photo" d'un trou noir</a></li>
<li><a href="../fr447568/index.html">Entretien avec l'astronaute Alexander Laveikin sur le cin√©ma spatial, les surcharges de 20 unit√©s et l'atterrissage en douceur</a></li>
<li><a href="../fr447570/index.html">GoLand 2019.1: analyse des performances du code, Smart Step Into, refactoring Extract Interface, Nilness Analyzer et plus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>