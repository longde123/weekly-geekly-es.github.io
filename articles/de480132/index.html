<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💗 🛅 ☢️ Übersicht über die Möglichkeiten von Qt Creator 4.11 und QBS 1.15 zur Programmierung von Mikrocontrollern 🏳️‍🌈 🎹 👨🏻‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo, Programmiererkollegen, Hardware und alle, die mit ihnen sympathisieren. Ich möchte weiterhin die Fähigkeiten der Qt Creator IDE in Verbindung m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Übersicht über die Möglichkeiten von Qt Creator 4.11 und QBS 1.15 zur Programmierung von Mikrocontrollern</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480132/">  Hallo, Programmiererkollegen, Hardware und alle, die mit ihnen sympathisieren.  Ich möchte weiterhin die Fähigkeiten der Qt Creator IDE in Verbindung mit dem QBS-Build-System in Bezug auf die Mikrocontroller-Programmierung überprüfen. <br><br>  Zuvor schrieb ich über Verbesserungen in früheren Versionen von <a href="https://habr.com/ru/post/467323/">QtC 4.10 und QBS 1.14</a> . <br><br>  Für wen dieses Thema interessant ist, herzlich willkommen bei cat. <br><a name="habracut"></a><br>  Neulich wurde leise und unmerklich das Release <a href="https://www.qt.io/blog/qt-creator-4.11.0-is-released">Qt Creator 4.11</a> veröffentlicht, das einige Verbesserungen für die Arbeit mit Mikrocontrollern (bei gewöhnlichen Leuten - "Baremetal" -Geräte) hinzufügte.  Diese Version von Qt Creator integriert das <a href="">QBS 1.15-Build-</a> System, das ebenfalls über neue Verbesserungen verfügt (es wurde noch nicht veröffentlicht). <br><br><h2>  Verbesserungen in Qt Creator </h2><br>  Alle diese Verbesserungen sind nur verfügbar, wenn das BareMetal-Plugin aktiviert ist, das über das Menü "Hilfe -&gt; Über Plugins -&gt; Geräteunterstützung -&gt; BareMetal" aktiviert wird. <br><br><ol><li>  Den GCC-, SDCC- und IAR EW-Compilern wurden neue Architekturen hinzugefügt, deren grundlegende Details in der folgenden Tabelle aufgeführt sind: <br><div class="scrollable-table"><table><tbody><tr><th>  Compiler </th><th>  Unterstützte Architekturen </th></tr><tr><td>  <a href="https://www.iar.com/iar-embedded-workbench/">IAR EW</a> </td><td>  STM8, MSP430 </td></tr><tr><td>  <a href="http://www.ti.com/tool/MSP430-GCC-OPENSOURCE">Gcc</a> </td><td>  MSP430 </td></tr><tr><td>  <a href="http://sdcc.sourceforge.net/">SDCC</a> </td><td>  STM8 </td></tr></tbody></table></div><br>  Diese neuen Compiler werden nun automatisch auf der Registerkarte "Extras -&gt; Optionen -&gt; Kits -&gt; Compiler -&gt; Automatisch erkannt" erkannt. <br><br>  Für mich sieht es zum Beispiel so aus: <br><br><img src="https://habrastorage.org/webt/d7/gh/pu/d7ghpuka9laz8a0q3czfxhmsa-a.png"><br><br>  Unter Windows ist die automatische Erkennung des GCC-Compilers für die MSP430-Architektur nicht implementiert, da  Dieses Set wird als einfaches Archiv und nicht als Installationsprogramm bereitgestellt. <br><br>  Es stört jedoch niemanden, diesen GCC-Compiler (und jeden anderen unterstützten) manuell hinzuzufügen, während Qt Creator die ABI des Compilers korrekt ermittelt: <br><br><img src="https://habrastorage.org/webt/p-/xb/vn/p-xbvnguinkwkm66g6xpxtmofl8.png"><br><br>  <i>Hinweis: Selbstverständlich verfügen alle Compiler automatisch über Verzeichnisse mit Überschriften, vordefinierten Makros usw., um den Code korrekt hervorzuheben.</i> <br><br></li><li>  Auf Wunsch der <a href="https://bugreports.qt.io/browse/QTCREATORBUG-18729">Mitarbeiter</a> wurde die Unterstützung für <a href="https://www.keil.com/pack/doc/CMSIS/SVD/html/svd_Format_pg.html">SVD-</a> Dateien zur Beschreibung der Register von Mikrocontroller-Peripheriegeräten hinzugefügt. <br><br>  <i>Hinweis: Wie ich weiß, steht diese Funktion nur für ARMs zur Verfügung (obwohl ich mich irren kann) und ist noch experimenteller Natur.</i> <br><br>  Um diese Funktion nutzen zu können, müssen Sie zunächst die gewünschte SVD-Datei im Feld „Peripheral Description File“ in den Geräteeinstellungen „Tools-&gt; Options-&gt; Devices-&gt; YourDevice“ auswählen, die dem Ziel-Mikrocontroller entsprechen: <br><br><img src="https://habrastorage.org/webt/ze/oi/1t/zeoi1trttbsicrssaf3kt-xjoru.png"><br><br>  <i>Hinweis: Diese Dateien können entweder von der ARM-Website heruntergeladen oder aus Verzeichnissen mit installierten Keil MDK- oder IAR EW-Produkten entnommen werden.</i> <br><br>  Wählen Sie nach dem Start des Debuggens im Menü „Fenster-&gt; Ansichten“ die Option „Peripherieregister“.  Danach öffnet sich das Panel „Peripheral Registers“ (ähnlich dem Panel „Registers“), in dem durch Rechtsklick ein Menü mit einer Liste der anzuzeigenden Registergruppen aufgerufen wird: <br><br><img src="https://habrastorage.org/webt/xw/ql/ei/xwqleiclsokd_oq5-ds36a48wny.png"><br><br>  Wir wählen eine beliebige Gruppe aus (zum Beispiel RCC) und erhalten eine Liste aller Register dieser Gruppe mit ihrer detaillierten Beschreibung und den Werten, die gelesen / geschrieben werden können: <br><br><img src="https://habrastorage.org/webt/-k/7m/xl/-k7mxlw4zfyjvnbgvyocaseqlmq.png"><br><br>  <i>Hinweis: Derzeit ist die Anzeige von Registern nur einer der ausgewählten Gruppen implementiert.</i> <br></li></ol><br><h2>  Verbesserungen in QBS </h2><br>  QBS wird ein wesentlicher Bestandteil dieser Überprüfung sein, daher ist es sinnvoll, über die Verbesserungen zu sprechen: <br><br><ol><li>  Unterstützung für diese neuen Compiler hinzugefügt und die Möglichkeit implementiert, installierte Compiler automatisch zu erkennen und Profile zu erstellen. <br><br>  Die <b><i>qbs.architecture-</i></b> Eigenschaft weist die folgenden Werte auf: <br><br><div class="scrollable-table"><table><tbody><tr><th>  Name der Architektur </th><th>  Eigenschaftswert </th></tr><tr><td>  STM8 </td><td>  stm8 </td></tr><tr><td>  MSP430 </td><td>  msp430 </td></tr></tbody></table></div><br></li><li>  Keil MDK- und IAR EW-Projekten wurde die Unterstützung für Generatoren für die folgenden Architekturen und Versionen hinzugefügt: <br><br><div class="scrollable-table"><table><tbody><tr><th>  IDE </th><th>  Architektur </th><th>  Generator </th></tr><tr><td>  KEIL uVision 5.23 </td><td>  ARM </td><td>  keiluv5 </td></tr><tr><td>  KEIL uVision 5.23 </td><td>  MCS51 </td><td>  keiluv5 </td></tr><tr><td>  IAR EW 8.40.1 </td><td>  ARM </td><td>  iarew8 </td></tr><tr><td>  IAR EW 3.11.1 </td><td>  STM8 </td><td>  iarew3 </td></tr><tr><td>  IAR EW 10.10.1 </td><td>  MCS51 </td><td>  iarew10 </td></tr><tr><td>  IAR EW 7.12.4 </td><td>  MSP430 </td><td>  iarew7 </td></tr><tr><td>  IAR EW 7.20.1 </td><td>  AVR </td><td>  iarew7 </td></tr></tbody></table></div><br>  <i>Hinweis: Die obige Tabelle zeigt die Versionen der Produkte, mit denen die Entwicklung von Generatoren vorangetrieben und die Funktionsfähigkeit mehr oder weniger überprüft wurde.</i> <br><br>  Somit ist es jetzt mit diesen Generatoren möglich, ein natives Projekt für die gewünschte Ziel-IDE zu erstellen.  Gleichzeitig setzt jeder Generator alle im QBS-Projekt angegebenen compilerspezifischen Flags, Pfade und Abhängigkeiten in die entsprechenden Einstellungen der Zielprojekt-IDE um. <br><br>  Wenn das QBS-Quellprojekt mehrere Produkte enthielt (z. B. Anwendungen, Bibliotheken usw.), erstellt der Generator für jede Ziel-IDE einen Ziel-Arbeitsbereich mit verschachtelten Unterprojekten. <br><br>  <i>Hinweis: Ich sage sofort, dass die KEIL- oder IAR EW-IDEs, wie ich weiß, das Nachverfolgen von Abhängigkeiten nicht unterstützen (wenn ich falsch liege, korrigieren Sie es).</i>  <i>Wenn das Projekt beispielsweise die Anwendung und die Abhängigkeit in Form einer Bibliothek enthält, muss der Benutzer zuerst die Bibliothek und dann die Anwendung selbst erstellen.</i> <br><br>  Um Projekte zu generieren, müssen Sie bereits QBS-Profile mit den entsprechenden Compilern konfiguriert haben. <br><br>  <i>Hinweis: Bisher können Sie nicht auf Profile verzichten, da</i>  <i>Der Generator aus dem Profil erhält die Architektur selbst, den Pfad zum vorinstallierten Compiler (IDE) und vieles mehr.</i>  <i>Diese Daten werden für die korrekte Suche nach Linkerskripten, Pfaden zu Laufzeitbibliotheken und anderen spezifischen Dingen benötigt (es gibt dort keine einfache Logik).</i> <br><br>  Um beispielsweise ein Zielprojekt für IAR EW und ARM-Mikrocontroller zu erstellen, reicht es aus, den folgenden Befehl auszuführen: <br><br><pre><code class="bash hljs">qbs generate -g iarew8 -d &lt;path/to/build/directory&gt; -f &lt;path/to/qbs/project/file&gt; profile:&lt;your/qbs/profile/<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>/arm&gt;</code> </pre> <br>  Profilnamen können beispielsweise mit dem GUI-Dienstprogramm <a href="https://doc.qt.io/qbs/cli-config-ui.html">qbs-config-ui</a> (oder mit der Konsolenversion) abgerufen werden. <br><br>  <i>Hinweis: Generatoren haben derzeit experimentellen Status.</i>  <i>In einigen Fällen (wenn das ursprüngliche Projekt komplex ist) werden möglicherweise falsche Zielprojektdateien generiert oder einige Flags und mehr übersprungen.</i>  <i>Schimpfe nicht, sondern erstelle Fehlerberichte im QBS-Tracker.</i> <br></li></ol><br>  Den aktuellen Status der Compiler-Unterstützung und den aktuellen Status der Generator-Integration finden Sie <a href="https://bugreports.qt.io/browse/QBS-658">hier</a> . <br><br>  Um zu sehen, wie alles funktioniert, bietet QBS eine Reihe einfacher <a href="https://github.com/qbs/qbs/tree/1.15/examples/baremetal">Beispiele</a> . <br><br><h2>  Was weiter </h2><br>  In zukünftigen Versionen ist geplant, <a href="https://www.renesas.com/us/en/">Renesas-</a> Architekturen und -Generatoren für diese Architekturen zum IAR EW hinzuzufügen (ich weiß nicht, ob dies erfolgreich sein wird).  Und wenn Sie Glück haben, wird ein Debugger von Keil uVision in Qt Creator integriert. <br><br>  In diesem Sinne beende ich meine Geschichte und bedanke mich bei allen, die dieser Rezension Aufmerksamkeit schenken werden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de480132/">https://habr.com/ru/post/de480132/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de480118/index.html">Wir schreiben einen Touch-Typing-Simulator mit reinem JavaScript. Teil 1</a></li>
<li><a href="../de480120/index.html">Eine neue Leistung in der Kryptographie - Faktorisierung eines 795-Bit-RSA</a></li>
<li><a href="../de480122/index.html">Alles über Steuern für IT-Freiberufler. STS, Patent oder Steuer für Selbstständige. Teil 2</a></li>
<li><a href="../de480124/index.html">So erhöhen Sie die Kommunikationsreichweite mit einem unbemannten Luftfahrzeug (UAV)</a></li>
<li><a href="../de480126/index.html">Freitag Umfrage: Was haben Sie im Express Panel?</a></li>
<li><a href="../de480134/index.html">Alles über Steuern für IT-Freiberufler. IP Steuerbelastung in verschiedenen Modi. Teil 3</a></li>
<li><a href="../de480136/index.html">Die offizielle Position der Highload ++ - Programmkomitees und anderer IT-Konferenzen zu Forderungen gegen Igor Sysoev ...</a></li>
<li><a href="../de480138/index.html">@Pythonetc-Zusammenstellung, November 2019</a></li>
<li><a href="../de480140/index.html">Tipps und Tricks aus meinem Telegrammkanal @pythonetc, November 2019</a></li>
<li><a href="../de480142/index.html">UX / UI-Trends im Jahr 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>