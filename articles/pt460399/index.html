<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>„ÄΩÔ∏è ü•ñ üëÉüèø Indicador de carregamento SVG no Vue.js üßëüèΩ‚Äçü§ù‚Äçüßëüèº üõµ üõë</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Oi Estudo no front-end e, paralelamente, no projeto de treinamento, desenvolvo o SPA no Vue.js para o back-end, que coleta dados do bot de pesquisa. O...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Indicador de carregamento SVG no Vue.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460399/"><p>  Oi  Estudo no front-end e, paralelamente, no projeto de treinamento, desenvolvo o SPA no Vue.js para o back-end, que coleta dados do bot de pesquisa.  O bot gera de 0 a 500 entradas, e eu tenho que: fazer upload, classificar pelos crit√©rios especificados, mostrar na tabela. </p><br><p>  Nem o back-end nem o bot podem classificar dados, ent√£o eu tenho que baixar todos os dados e process√°-los no lado do navegador.  A classifica√ß√£o √© muito r√°pida, mas a velocidade do download depende da conex√£o e os 500 registros indicados podem ser carregados de 10 a 40 segundos. </p><br><p> No in√≠cio, ao carregar, mostrei um spiner, cuja desvantagem √© que o usu√°rio n√£o sabe quando o download ser√° encerrado.  No meu caso, o n√∫mero de registros que o bot encontrado √© conhecido antecipadamente, para que voc√™ possa mostrar quantos% de registros s√£o carregados. </p><br><p>  Para alegrar a espera do usu√°rio, decidi mostrar a ele o processo de carregamento: </p><br><ol><li>  d√≠gitos - quantos% de registros j√° est√£o carregados </li><li>  agenda - tempo de carregamento de cada registro </li><li>  enchimento -% de carga.  Como o gr√°fico preenche um bloco retangular enquanto ele carrega, fica claro qual parte do bloco ainda precisa ser preenchida </li></ol><br><p>  Aqui est√° a anima√ß√£o do resultado que eu estava buscando e obtive: </p><br><img src="https://habrastorage.org/webt/-o/wr/mc/-owrmchonzxft0kpoabdeumz2tm.gif"><br><p>  ... na minha opini√£o, ficou engra√ßado. </p><br><p>  No artigo, mostrarei como avan√ßar passo a passo em dire√ß√£o ao resultado.  Como n√£o desenhei gr√°ficos de fun√ß√µes no navegador antes da vila, o desenvolvimento do indicador me trouxe conhecimento simples, mas novo, sobre o uso do SVG e do Vue. </p><br><a name="habracut"></a><br><h3>  Escolhendo um m√©todo de renderiza√ß√£o Canvas ou SVG </h3><br><p>  Usei o <em>Canvas</em> em um jogo simples de cobra em JS e SVG, em um projeto, apenas o inseri na p√°gina com a tag <em>object</em> e notei que, ao escalar, as imagens SVG sempre mantinham nitidez (√© por isso que era um vetor) e o <em>Canvas</em> observava desfocar a imagem.  Com base nessa observa√ß√£o, decidi desenhar um gr√°fico usando SVG, porque voc√™ precisa come√ßar um dia. </p><br><h3>  Plano de trabalho </h3><br><p>  Com base na estrutura selecionada do Vue e no m√©todo selecionado de forma√ß√£o de imagem usando SVG, fiz o seguinte plano de trabalho: </p><br><ol><li>  Pesquise e estude informa√ß√µes sobre o t√≥pico do uso do SVG em conjunto com o Vue </li><li>  Experimentos com a forma√ß√£o e mudan√ßa de SVG no contexto de Vue </li><li>  Indicador de carregamento do prot√≥tipo </li><li>  Aloca√ß√£o do indicador de carregamento em um componente Vue separado </li><li>  Aplica√ß√£o de componente no SPA </li></ol><br><h3>  Introdu√ß√£o </h3><br><ol><li><div class="spoiler">  <b class="spoiler_title">Criando um projeto em branco</b> <div class="spoiler_text"><p>  Eu tenho o <em>vue cli instalado</em> .  Para criar um novo projeto, no prompt de comando, <em>insiro vue create loadprogresser</em> , selecione as configura√ß√µes do projeto por <em>padr√£o</em> , um novo projeto vue √© criado com o nome loadprogresser e removo o desnecess√°rio: </p><br><div class="scrollable-table"><table><tbody><tr><td align="center">  Was </td><td align="center">  Tornou-se </td></tr><tr><td align="center"><img src="https://habrastorage.org/webt/ff/dx/gz/ffdxgzse2s6oqmujajql_cz-qjc.png" width="25%"><br><p>  Estrutura do projeto por padr√£o </p><br></td><td align="center"><img src="https://habrastorage.org/webt/ju/7o/xw/ju7oxwnd0bt6ygl47di54eyiccq.png" width="50%"><br><p>  A estrutura ap√≥s a "limpeza" </p><br></td></tr><tr><td align="center"><img src="https://habrastorage.org/webt/db/vd/cz/dbvdczqbvxc4oi1mswth75ofpo0.png" width="50%"><br><p>  Sauda√ß√µes de Vue </p><br></td><td align="left"><pre><code class="plaintext hljs">&lt;template&gt; &lt;div&gt; &lt;h1&gt;Progresser&lt;/h1&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default {name: 'app'} &lt;/script&gt;;</code> </pre> <br><p>  Meu texto √© "Progresser" no App.vue </p><br></td></tr></tbody></table></div><br></div></div><br></li><li><h4>  Pesquise e estude informa√ß√µes sobre o t√≥pico do uso do SVG em conjunto com o Vue </h4><br><p>  √ìtimo site com informa√ß√µes √∫teis sobre HTML, CSS e SVG <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">css.yoksel.ru</a> Um bom exemplo do SVG est√° dispon√≠vel na documenta√ß√£o do pr√≥prio Vue: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Exemplo do SVG-graph</a> e um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">link</a> .  Com base nesses materiais, nasceu o modelo de componente m√≠nimo com SVG a partir do qual come√ßo: </p><br><pre> <code class="plaintext hljs">&lt;template&gt; &lt;div class="wrapper"&gt; &lt;svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"&gt; //svg    //   svg- &lt;/svg&gt; &lt;/div&gt; &lt;/template&gt;</code> </pre><br></li><li><h4>  Experimentos com a forma√ß√£o e mudan√ßa de SVG no contexto de Vue </h4><br><h5>  Ret√¢ngulo SVG ret </h5><br><p>  rect - um ret√¢ngulo, a figura mais simples.  Eu crio svg com dimens√µes 100x100px e desenho um ret√¢ngulo com as coordenadas iniciais 25:25 e tamanhos 50x50 px, a cor de preenchimento padr√£o √© preta (sem estilo) </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h5>  Estilo SVG e pseudo-classe suspensa: </h5><br><p>  Vou tentar estilizar o ret√¢ngulo em svg.  Para fazer isso, adiciono a classe "sample" ao svg, na se√ß√£o style do arquivo vue adiciono os estilos .sample rect (coro o ret√¢ngulo com amarelo) e .sample rect: hover que estiliza o elemento rect quando voc√™ passa o mouse sobre ele: </p><br><div class="spoiler">  <b class="spoiler_title">C√≥digo fonte</b> <div class="spoiler_text"><pre> <code class="javascript hljs">&lt;template&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"sample"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"1.1"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"100px"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"100px"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">25</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">25</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"50px"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"50px"</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;script&gt; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'app'</span></span> } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt; &lt;style&gt; .sample rect { fill: yellow; stroke: green; stroke-width: 4; transition: all 350ms; } .sample rect:hover { fill: gray; } &lt;/</span></span>style&gt;</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Implementa√ß√£o JSfiddle</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br><p>  Conclus√£o: svg se encaixa perfeitamente no arquivo vue do modelo e √© estilizado com os estilos prescritos.  Um come√ßo foi feito! </p><br><h5>  Caminho SVG como base do indicador </h5><br><p>  Nesta se√ß√£o, substituirei rect por path, <code>&lt;path :d="D" class="path"/&gt;</code> no atributo d da tag path, passarei a string D com as coordenadas do path do vue.  A conex√£o √© feita atrav√©s do <code>v-bind:d="D"</code> , que √© abreviado como <code>:d="D"</code> </p><br><p>  A linha D = "M 0 0 0 50 50 50 50 0 Z" desenha tr√™s linhas com as coordenadas 0: 0-&gt; 0: 50-&gt; 50: 50-&gt; 0:50 e fecha o contorno com o comando Z, formando um quadrado de 50x50px a partir de coordenada 0: 0.  Usando o estilo do caminho, a forma recebe uma cor de preenchimento amarelo e uma borda cinza de 1px. </p><br><div class="spoiler">  <b class="spoiler_title">Fonte amarela do CAMINHO</b> <div class="spoiler_text"><pre> <code class="javascript hljs"> &lt;template&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"sample"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"1.1"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"100px"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"100px"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">path</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:d</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"D"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"path"</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;script&gt; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'app'</span></span>, data(){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">D</span></span>:<span class="hljs-string"><span class="hljs-string">"M 0 0 0 50 50 50 50 0 Z"</span></span> } } } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt; &lt;style&gt; .path { fill:yellow; stroke:gray; } &lt;/</span></span>style&gt;</code> </pre><br></div></div><br></li><li><h4>  Indicador de carregamento do prot√≥tipo </h4><br><p>  Na vers√£o m√≠nima, fiz um diagrama simples.  Um cont√™iner svg com uma altura de 100px, uma largura de 400px √© inserida no modelo, uma tag de caminho √© inserida no interior, ao atributo d ao qual adiciono a string de caminho gerada d a partir dos dados do vue, que por sua vez √© formado a partir da matriz timePoints, em que, a cada 10 ms, um dos 400 √© adicionado (por a largura do cont√™iner) um n√∫mero aleat√≥rio no intervalo de 0 a 100. Tudo √© simples, no gancho do ciclo de vida criado, o m√©todo de atualiza√ß√£o √© chamado no qual novos pontos (aleat√≥rios) s√£o adicionados ao diagrama por meio do m√©todo addTime e, em seguida, o m√©todo getSVGTimePoints retorna uma sequ√™ncia de caracteres para passar para PATH, por meio de setTimeout reinicia o m√©todo de atualiza√ß√£o </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h4>  Mais sobre forma√ß√£o de strings para PATH </h4><br><p>  A cadeia de caracteres para PATH √© formada no m√©todo getSVGTimePoints, a partir da matriz timePoints que eu processo com reduzir.  Como valor inicial de redu√ß√£o, eu uso "M 0 0" (comece na coordenada 0: 0).  Al√©m disso, na redu√ß√£o, novos pares de coordenadas <u>relativas</u> dX e dY ser√£o adicionados √† linha.  A letra mai√∫scula ‚Äúl‚Äù √© respons√°vel pelas coordenadas serem relativas (o ‚ÄúL‚Äù grande indica as coordenadas absolutas), depois que ‚Äúl‚Äù √© colocado dX e depois dY, separados por espa√ßos.  Neste prot√≥tipo, dY = 1 (incremento de 1px), no futuro, ao longo do eixo X, moverei-me com o incremento dX calculado a partir da largura do cont√™iner e o n√∫mero de pontos que precisam ser colocados nele.  Na √∫ltima linha da gera√ß√£o PATH <br> <code>path +=`L ${this.timePoints.length} 0`</code> <br>  For√ßo, a partir do √∫ltimo ponto, termino de construir a linha no eixo X. Se voc√™ precisar fechar o contorno, poder√° adicionar "Z" ao final da linha, primeiro pensei que sem um contorno fechado, a figura resultante n√£o seria preenchida (preenchimento), mas isso estava errado, onde n√£o estiver fechado, o golpe - o golpe n√£o ser√° desenhado. </p><br><pre> <code class="javascript hljs">getSVGTimePoints:<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> predY = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> path = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.timePoints.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str, item</span></span></span><span class="hljs-function">)=&gt;</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dY = item - predY predY = item <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str + <span class="hljs-string"><span class="hljs-string">`l 1 </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${dY}</span></span></span><span class="hljs-string"> `</span></span> },<span class="hljs-string"><span class="hljs-string">'M 0 0 '</span></span>) path +=<span class="hljs-string"><span class="hljs-string">`L </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.timePoints.length}</span></span></span><span class="hljs-string"> 0`</span></span><span class="hljs-comment"><span class="hljs-comment">// Z`     return path },</span></span></code> </pre><br><p>  Vou continuar a fazer altera√ß√µes.  Meu indicador deve ser dimensionado em largura e altura para que todos os pontos transmitidos se ajustem ao cont√™iner especificado.  Para fazer isso, v√° para o DOM e descubra as dimens√µes do cont√™iner </p><br><ol><li><h5>  ref - obtendo informa√ß√µes sobre um elemento DOM </h5><br><p>  No cont√™iner div (no qual o svg √© inserido), adiciono uma classe de wrapper para passar a largura e a altura pelos estilos.  E para que o svg ocupe todo o espa√ßo do cont√™iner, defina sua altura e largura para 100%.  O RECT, por sua vez, tamb√©m ocupar√° todo o espa√ßo do cont√™iner e ser√° o pano de fundo para o PATH </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrapper"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"loadprogresser"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sample"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">0</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">0</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"d"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"transparent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"black"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><p>  Para encontrar meu cont√™iner DIV no DOM Vue virtual, adiciono o atributo ref e <code>ref="loadprogresser"</code> nome pelo qual procurarei <code>ref="loadprogresser"</code> .  No gancho do ciclo de vida <code>mounted</code> , chamarei o m√©todo getScales (), no qual, com a sequ√™ncia <code>const {width, height} = this.$refs.loadprogresser.getBoundingClientRect()</code> a largura e a altura do elemento DIV depois que ele aparece no DOM. </p><br><p>  Al√©m disso, c√°lculos simples do incremento ao longo do eixo X, dependendo da largura do cont√™iner e do n√∫mero de pontos que queremos ajustar nele.  A escala ao longo do eixo Y √© recalculada cada vez que o m√°ximo √© encontrado no valor transmitido. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></li><li><h5>  transformar - alterar o sistema de coordenadas </h5><br><p>  Nesse ponto, percebo que precisamos alterar o sistema de coordenadas para que a coordenada 0: 0 comece no canto inferior esquerdo e o eixo Y cres√ßa para cima e n√£o para baixo.  Obviamente, √© poss√≠vel fazer c√°lculos para cada ponto, mas o SVG possui um atributo de transforma√ß√£o que permite transformar coordenadas. </p><br><p>  No meu caso, preciso aplicar uma escala de -1 √†s coordenadas Y (para que os valores Y sejam recuperados) e mudar a origem para a altura <u>negativa do</u> cont√™iner.  Como a altura do cont√™iner pode ser qualquer (especificada por meio de estilos), tivemos que formar uma linha de transforma√ß√£o de coordenadas no gancho <code>mounted</code> com o seguinte c√≥digo: <code>this.transform = `scale( 1, -1) translate(0,${-this.wrapHeight})`</code> </p><br><p>  Mas a transforma√ß√£o aplicada somente ao PATH n√£o funcionar√°, para isso, √© necess√°rio agrupar o PATH em um grupo (tag g) ao qual as transforma√ß√µes de coordenadas s√£o aplicadas: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">g</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:transform</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"transform"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"d"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"transparent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"black"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">g</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Como resultado, as coordenadas foram revertidas corretamente, o indicador de download ficou mais pr√≥ximo do design </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></li><li><h5>  Texto SVG e centraliza√ß√£o de texto </h5><br><p>  O texto √© necess√°rio para exibir% de carga.  A coloca√ß√£o do texto no centro vertical e horizontalmente no SVG √© bastante simples de organizar (em compara√ß√£o com HTML / CSS), os atributos s√£o resgatados (eu imediatamente defino os valores) dominante-linha de base = "central" e texto-√¢ncora = "meio" </p><br><p>  O texto em SVG √© exibido com a tag correspondente: </p><br> <code>&lt;text x="50%" y="50%" dominant-baseline="central" text-anchor="middle"&gt;{{TextPrc}}&lt;/text&gt;</code> <br> <p>  onde TextPrc √© a liga√ß√£o √† vari√°vel correspondente, calculada por uma simples propor√ß√£o do n√∫mero esperado de pontos em rela√ß√£o √† quantidade transferida <code>this.TextPrc = `${((this.Samples * 100)/this.maxSamples) | 0} %`</code>  <code>this.TextPrc = `${((this.Samples * 100)/this.maxSamples) | 0} %`</code> . </p><br><p>  As coordenadas do in√≠cio x = "50%" y = "50%" correspondem ao centro do cont√™iner, e os atributos de linha de base dominante e √¢ncora de texto s√£o respons√°veis ‚Äã‚Äãpor garantir que o texto esteja alinhado vertical e horizontalmente. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Coisas b√°sicas sobre o t√≥pico foram resolvidas, agora precisamos selecionar o prot√≥tipo do indicador em um componente separado. </p><br></li></ol><br><br></li><li><h4>  Aloca√ß√£o do indicador de carregamento em um componente Vue separado </h4><br><p>  Para come√ßar, determinarei os dados que transferirei para o componente: maxSamples - o n√∫mero de amostras com 100% de largura e Point - a unidade de dados (ponto) que ser√° inserida na matriz de pontos (com base na qual, ap√≥s o processamento, eles ser√£o formados hor√°rio).  Os dados transmitidos ao componente pelo pai, coloco na se√ß√£o adere√ßos </p><br><pre> <code class="javascript hljs">props:{ <span class="hljs-attr"><span class="hljs-attr">maxSamples</span></span>: {<span class="hljs-comment"><span class="hljs-comment">//-   100%-  type: Number, default: 400 }, Point:{//  value:0 } }</span></span></code> </pre><br><h5>  Problemas de reatividade </h5><br><p>  A propriedade computada getPath √© respons√°vel pelo fato de que o novo ponto passado para o componente √© processado, o que depende do Point (e, se o fizer, ser√° recalculado quando o Point mudar) </p><br><pre> <code class="javascript hljs"> <span class="hljs-comment"><span class="hljs-comment">// ... &lt;path :d="getPath"/&gt; ... //  props:{ ... Point:{ value:0 } //  computed:{ getPath(){ this.addValue({value:this.Point.value}) return this.getSVGPoints()//this.d } },</span></span></code> </pre><br><p>  No come√ßo, criei um Point do tipo Number, que √© l√≥gico, mas nem todos os pontos foram processados, mas apenas diferentes dos anteriores.  Por exemplo, se apenas o n√∫mero 10 for transferido do pai para esse ponto, apenas um ponto ser√° desenhado no gr√°fico, todos os subsequentes ser√£o ignorados, pois n√£o diferem dos anteriores. </p><br><p>  Substituir o tipo de ponto de Number pelo objeto {value: 0} levou ao resultado desejado - a propriedade calculada getPath () agora processa cada ponto transmitido, atrav√©s de Point.value, passo os valores dos pontos </p><br><div class="spoiler">  <b class="spoiler_title">Origem do componente Progresser.vue</b> <div class="spoiler_text"><pre> <code class="javascript hljs">&lt;template&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"wrapper"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"loadprogresser"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"wrapper__content"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"1.1"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:transform</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"transform"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">path</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:d</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"getPath"</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"50%"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"50%"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">dominant-baseline</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"central"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">text-anchor</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"middle"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {{TextPrc}} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;script&gt; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">props</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">maxSamples</span></span>: {<span class="hljs-comment"><span class="hljs-comment">//-   100%-  type: Number, default: 400 }, Point:{ value:0 } }, data(){ return { Samples:0,//   wrapHeight:100,//      maxY:0,//  Y  (  ) scales:{ w:1,//   (   ) h:1 //   //(   Y   ) }, Points:[],//     (  Point.value) transform:'scale( 1, -1) translate(0,0)', TextPrc: '0%' } }, mounted: function(){ this.getScales() }, methods:{ getScales(){ const {width, height} = this.$refs.loadprogresser.getBoundingClientRect() //.    this.scales.w = width / this.maxSamples //  Y    this.wrapHeight = height this.transform = `scale( 1, -1) translate(0,${-this.wrapHeight}) rotate(0)` }, getVScale(){//    this.scales.h = (this.maxY == 0)? 0 : this.wrapHeight / this.maxY }, //          getYMax({value = 0}){ this.maxY = (value &gt; this.maxY) ? value : this.maxY }, addValue({value = 0}){ if (this.Samples &lt; this.maxSamples) { this.getYMax({value}) this.getVScale() this.Points.push(value) // Int this.Samples ++; this.TextPrc = `${((this.Samples * 100)/this.maxSamples) | 0} %` } }, getSVGPoints(){ //    Path let predY = 0 let path = this.Points.reduce((str, item)=&gt;{ let dY = (item - predY) * this.scales.h predY = item return str + `l ${this.scales.w} ${dY} ` },'M 0 0 ') path +=`L ${this.Points.length * this.scales.w} 0 `// Z`     return path }, }, computed:{ getPath(){ this.addValue({value:this.Point.value})//   return this.getSVGPoints()//this.d -  SVG PATH } } } &lt;/script&gt; &lt;style scoped&gt; .wrapper { width: 400px;/*     */ height: 100px;/*  ( )   */ font-size: 4rem; font-weight: 600; border-left: 1px gray solid; border-right: 1px gray solid; overflow: hidden; } .wrapper__content path { opacity: 0.5; fill: lightgreen; stroke: green; stroke-width: 1; } .wrapper__content text { opacity: 0.5; } &lt;/style&gt;</span></span></code> </pre><br></div></div><br><h5>  Chamando a partir do componente pai e passando par√¢metros </h5><br><p>  Para trabalhar com um componente, voc√™ precisa import√°-lo para o componente pai <br> <code>import Progresser from "./components/Progresser"</code> <br>  e declarar na se√ß√£o <br> <code>components: {Progresser }</code> </p> <br><p>  No modelo do componente pai, o componente indicador progressivo √© inserido com a seguinte constru√ß√£o: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">progresser</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"progresser"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:maxSamples</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SamplesInProgresser"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:Point</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Point"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">progresser</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><p>  Atrav√©s da classe "progreser", primeiro, os tamanhos de bloco do indicador s√£o definidos.  MaxSamples (n√∫mero m√°ximo de pontos no gr√°fico) da vari√°vel pai SamplesInProgresser s√£o transferidos para os props componentes, e o pr√≥ximo ponto (na forma de um objeto) da vari√°vel Point do objeto pai √© transferido para props Point.  O ponto dos pais √© calculado na fun√ß√£o de atualiza√ß√£o e representa n√∫meros aleat√≥rios crescentes.  Eu recebo esta imagem: </p><br><img src="https://habrastorage.org/webt/um/rb/y4/umrby4sqxabfzgz_ng1lnk6xgcy.gif"><br><div class="spoiler">  <b class="spoiler_title">Origem pai App.vue</b> <div class="spoiler_text"><pre> <code class="javascript hljs">&lt;template&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">progresser</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"progresser"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:maxSamples</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"SamplesInProgresser"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:Point</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Point"</span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">progresser</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/template&gt; &lt;script&gt; import Progresser from "./</span></span>components/Progresser<span class="hljs-string"><span class="hljs-string">" export default { name: 'app', data(){ return { SamplesInProgresser:400,// -  Point:{value:0},//"</span></span><span class="hljs-string"><span class="hljs-string">" index:0, // -   TimeM:100 //     } }, created: function () { this.update() }, methods:{ update(){ if (this.index &lt; this.SamplesInProgresser) { this.index++; this.Point = {value:(this.TimeM*Math.random() | 0)} this.TimeM *= 1.01 setTimeout(this.update, 0) } } }, components: { Progresser } } &lt;/script&gt; &lt;style&gt; #app { font-family: 'Avenir', Helvetica, Arial, sans-serif; margin-top: 60px; } /*     */ .progresser { width: 300px; height: 80px; } &lt;/style&gt;</span></span></code> </pre><br></div></div><br></li><li><h4>  Aplica√ß√£o de componente no SPA </h4><br><p>  Chegando ao ponto em que tudo estava fazendo.  E, portanto, tenho opera√ß√µes ass√≠ncronas para carregar registros sobre determinadas identidades do banco de dados.  O tempo de execu√ß√£o de uma opera√ß√£o ass√≠ncrona n√£o √© conhecido antecipadamente.  Medirei o tempo de execu√ß√£o de uma maneira trivial, usando o novo Date (). GetTime () antes e ap√≥s a opera√ß√£o, e transferirei a diferen√ßa de tempo resultante para o componente.  Naturalmente, o indicador ser√° incorporado no bloco que aparecer√° no est√°gio de carregamento e ocultar√° a tabela na qual os dados est√£o sendo carregados. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> getCandidatesData(){ ... this.LoadRecords = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-comment"><span class="hljs-comment">//   ,        ... this.SamplesInProgresser = uris.length //      ... for (let item of uris) {// uris  URL    try { const start = new Date().getTime()//   candidate = await this.$store.dispatch('GET_CANDIDATE', item) const stop = new Date().getTime()//   this.Point = {value:(stop-start)}//   Point ...</span></span></code> </pre><br><p>  Nos dados do componente pai, prescrevo em rela√ß√£o √† indica√ß√£o de carga: </p><br><pre> <code class="javascript hljs">data (){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ... <span class="hljs-comment"><span class="hljs-comment">//  LoadRecords:false, SamplesInProgresser:400, Point:{value:0} }</span></span></code> </pre><br><p>  E no modelo: </p><br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wait_loading"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">v-show</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"LoadRecords"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">progresser</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"progresser"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:maxSamples</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SamplesInProgresser"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:Point</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Point"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">progresser</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></li></ol><br><h4>  Conclus√µes </h4><br><p>  Como previsto, nada complicado.  At√© algum momento, voc√™ pode tratar o SVG como tags HTML regulares, com suas pr√≥prias especificidades.  O SVG √© uma ferramenta poderosa que agora usarei com mais frequ√™ncia no meu trabalho para visualiza√ß√£o de dados </p><br><h4>  Refer√™ncias </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C√≥digo-fonte do indicador de download</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo Svg-path</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt460399/">https://habr.com/ru/post/pt460399/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt460383/index.html">As transi√ß√µes de tela em Legend of Zelda usam os recursos n√£o documentados do NES</a></li>
<li><a href="../pt460387/index.html">Guia do Iniciante do SELinux</a></li>
<li><a href="../pt460393/index.html">Hist√≥rico: o que esperar do Fedora Silverblue</a></li>
<li><a href="../pt460395/index.html">An√°lise como um recurso: o processo de trabalhar com dados no Plesk</a></li>
<li><a href="../pt460397/index.html">In√≠cio r√°pido com WebComponents</a></li>
<li><a href="../pt460403/index.html">Vantagens e desvantagens do HugePages</a></li>
<li><a href="../pt460405/index.html">Por que voc√™ precisa de mec√¢nica de jogo oculta</a></li>
<li><a href="../pt460409/index.html">Arduino e teclados (guia completo)</a></li>
<li><a href="../pt460411/index.html">Mad Converter GIF'ok para stickers animados para Telegram</a></li>
<li><a href="../pt460413/index.html">7 sites e aplicativos √∫teis para aprender ingl√™s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>