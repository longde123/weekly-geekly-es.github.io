<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêß üëÇüèΩ üë©‚Äçüëß Da solicita√ß√£o de pool √† libera√ß√£o. Relat√≥rio Yandex.Taxi üç• ü§¶üèø üë©üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="H√° um per√≠odo cr√≠tico no ciclo de lan√ßamento de um servi√ßo - desde o momento em que uma nova vers√£o √© preparada at√© o momento em que fica dispon√≠vel p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Da solicita√ß√£o de pool √† libera√ß√£o. Relat√≥rio Yandex.Taxi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/439704/">  H√° um per√≠odo cr√≠tico no ciclo de lan√ßamento de um servi√ßo - desde o momento em que uma nova vers√£o √© preparada at√© o momento em que fica dispon√≠vel para os usu√°rios.  As a√ß√µes da equipe entre esses dois pontos de controle devem ser consistentes de libera√ß√£o para libera√ß√£o e, se poss√≠vel, automatizadas.  Em seu relat√≥rio, o albergue de Sergey Pomazanov descreveu os processos que seguem cada solicita√ß√£o de pool do Yandex.Taxi. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/1_j72yHvXUw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Boa noite!  Meu nome √© Sergey, sou o chefe do grupo de automa√ß√£o da Yandex.Taxi.  Em suma, a principal tarefa do nosso grupo √© minimizar o tempo que os desenvolvedores gastam na solu√ß√£o de seus problemas.  Isso inclui tudo, desde o CI at√© os processos de desenvolvimento e teste. <br><br>  O que nosso desenvolvimento faz quando o c√≥digo √© escrito? <br><br><a name="habracut"></a>  Para testar a nova funcionalidade, primeiro verificamos tudo localmente.  Para testes locais, temos um grande conjunto de testes.  Se um novo c√≥digo aparecer, ele tamb√©m precisar√° ser coberto com testes. <br><br><img src="https://habrastorage.org/webt/cy/lr/el/cylrel5kfrii-dvrh7wvpbgh6fw.jpeg"><br><br>  Nossa cobertura de teste n√£o √© t√£o boa quanto gostar√≠amos, mas tentamos mant√™-la em um n√≠vel suficiente. <br><br>  Para o teste, usamos o Google Test e uma estrutura auto-escrita pytest, com a qual testamos n√£o apenas a parte ‚Äúpython‚Äù, mas tamb√©m a parte ‚Äúplus‚Äù.  Nossa estrutura permite que voc√™ inicie servi√ßos, fa√ßa upload de dados no banco de dados antes de cada teste, atualize caches, limpe todas as solicita√ß√µes externas etc. Uma estrutura suficientemente funcional que permite que voc√™ execute o que quiser, bloqueie qualquer coisa para que n√£o possamos obter acidentalmente pedidos fora. <br><br>  Al√©m dos testes funcionais, temos testes de integra√ß√£o.  Eles permitem que voc√™ resolva outro problema.  Se voc√™ n√£o tiver certeza de que seu servi√ßo ir√° interagir corretamente com outros servi√ßos, poder√° executar o suporte e executar um conjunto de testes.  At√© agora, temos um conjunto b√°sico de testes, mas ele est√° se expandindo lentamente. <br><br>  O suporte √© constru√≠do com a tecnologia do Docker e do Docker Compose, em que cada cont√™iner possui seus pr√≥prios servi√ßos e todos interagem entre si.  Isso acontece em um ambiente isolado.  Eles t√™m sua pr√≥pria rede isolada, seu pr√≥prio banco de dados, seu pr√≥prio conjunto de dados.  E os testes passam dessa maneira, como se algu√©m estivesse iniciando um aplicativo m√≥vel, clica em bot√µes, faz um pedido.  Nesse momento, os carros virtuais dirigem, trazem o passageiro, o dinheiro √© debitado do passageiro e assim por diante.  Basicamente, todos os testes exigem a intera√ß√£o de muitos servi√ßos e componentes ao mesmo tempo. <br><br>  Naturalmente, testamos apenas nossos servi√ßos e apenas nossos componentes, porque n√£o devemos testar servi√ßos externos e molhamos tudo externo. <br><br>  O suporte era conveniente o suficiente para operar localmente e pegar um t√°xi de bolso.  Voc√™ pode assumir essa posi√ß√£o, execut√°-la em uma m√°quina local ou virtual ou em qualquer outra m√°quina de desenvolvimento.  Ap√≥s o lan√ßamento do suporte, voc√™ pode pegar um aplicativo m√≥vel adaptado para um t√°xi de bolso, configur√°-lo no seu computador e fazer pedidos.  Tudo √© exatamente o mesmo que na produ√ß√£o ou em outro lugar.  Se voc√™ precisar testar a nova funcionalidade, basta inserir seu c√≥digo, ele ser√° ativado e executado em todo o ambiente. <br><br>  Novamente, voc√™ pode simplesmente executar e executar o servi√ßo desejado.  Para fazer isso, voc√™ precisa elevar o banco de dados, preench√™-lo com o conte√∫do necess√°rio ou obter uma base dos ambientes existentes e conect√°-lo ao servi√ßo.  E ent√£o voc√™ pode simplesmente contat√°-lo, fazer algumas perguntas, ver se funciona corretamente ou n√£o. <br><br>  Outro ponto importante √© a verifica√ß√£o de estilo.  Se tudo √© simples para as vantagens, usamos o formato clang e verificamos se o c√≥digo corresponde ou n√£o; em Python, usamos at√© quatro analisadores: Flake8, Pylint, Mypy e, ao que parece, autopep8. <br><br>  Usamos esses analisadores principalmente na entrega padr√£o.  Se houver uma oportunidade de escolher algum estilo de design, usaremos o estilo do Google.  A √∫nica coisa que corrigimos adicionando as nossas pr√≥prias √© uma verifica√ß√£o para classificar as importa√ß√µes, para que as importa√ß√µes sejam classificadas corretamente. <br><br>  Depois de criar o c√≥digo, verificado localmente, voc√™ pode fazer uma solicita√ß√£o de pool.  Solicita√ß√µes de pool s√£o criadas no GitHub. <br><br><img src="https://habrastorage.org/webt/dx/sj/ac/dxsjacymhqczij9ourzfrtnxai0.jpeg"><br><br>  Criar uma solicita√ß√£o de pool no GitHub oferece muitas oportunidades que o TeamCity nos fornece.  O TeamCity executa automaticamente todos os testes mencionados acima, os verifica automaticamente e, no pr√≥prio pedido de pool, est√° escrito sobre o status da passagem, independentemente de os testes terem sido aprovados ou n√£o.  Ou seja, sem visitar o TeamCity, voc√™ pode ver se foi aprovado ou n√£o e clicando no link para entender o que deu errado e o que precisa ser corrigido. <br><br>  Se voc√™ n√£o possui t√°xis e testes de bolso suficientes, deseja verificar a intera√ß√£o real com algum servi√ßo real, temos um ambiente de teste que repete a produ√ß√£o.  Temos dois desses ambientes de teste.  Um √© para desenvolvimento m√≥vel de testadores e o segundo √© para desenvolvedores.  O ambiente de teste √© o mais pr√≥ximo poss√≠vel da produ√ß√£o e, se forem feitas solicita√ß√µes a servi√ßos externos, elas tamb√©m ser√£o feitas nos ambientes de teste.  A √∫nica limita√ß√£o √© que o ambiente de teste vai para o teste de recursos externos sempre que poss√≠vel.  E o ambiente de produ√ß√£o entra em produ√ß√£o. <br><br>  Mais sobre o ambiente de teste, fazemos isso simplesmente atrav√©s do TeamCity.  √â necess√°rio colocar o r√≥tulo apropriado no GitHub e, depois de definido, clique no bot√£o "Coletar personalizado".  Ent√£o chamamos isso.  Todas as solicita√ß√µes de pool com esse r√≥tulo continuar√£o e o conjunto autom√°tico de pacotes com armazenamento em cluster come√ßar√°. <br><br>  Al√©m dos testes de rotina, o teste de carga √†s vezes √© necess√°rio.  Se voc√™ estiver editando c√≥digo que faz parte de um servi√ßo altamente carregado, podemos fazer testes de carregamento para isso.  No Python, existem poucos servi√ßos altamente carregados, alguns deles que reescrevemos em C ++, mas, mesmo assim, eles ainda permanecem, √†s vezes existe um lugar para estar.  O teste de carga ocorre atrav√©s do sistema Lunapark.  Ele usa o Yandex.Tank, est√° dispon√≠vel gratuitamente, voc√™ pode baixar e assistir.  O tanque permite disparar em algum servi√ßo, criar gr√°ficos, executar diferentes m√©todos de carregamento e mostrar qual carga estava atualmente no servi√ßo e quais recursos foram utilizados.  Basta clicar no bot√£o no TeamCity, o pacote ser√° coletado e, em seguida, ser√° poss√≠vel rol√°-lo quando necess√°rio.  Ou simplesmente preencha e execute manualmente. <br><br><img src="https://habrastorage.org/webt/a5/ny/uu/a5nyuuqz_opgjup2cr5mjqcweqc.jpeg"><br><br>  Enquanto voc√™ est√° testando seu c√≥digo, um dos desenvolvedores pode, neste momento, come√ßar a analisar seu c√≥digo e participar da revis√£o. <br><br>  No que prestamos aten√ß√£o no processo: <br><br><img src="https://habrastorage.org/webt/cy/ul/h3/cyulh3bd1lfyhcraxx3x6gtdccm.jpeg"><br><br>  Um dos pontos importantes - a funcionalidade deve estar desativada.  Isso significa que, n√£o importa qual seja o c√≥digo, houve bugs ou n√£o, talvez essa funcionalidade n√£o funcione da maneira como foi originalmente planejada, talvez os gerentes quisessem outra coisa ou talvez essa funcionalidade estivesse tentando colocar outro servi√ßo que n√£o estava pronto para novas cargas, e voc√™ precisa da capacidade de deslig√°-lo rapidamente e colocar tudo em um estado normal. <br><br>  Tamb√©m temos uma regra que, ao lan√ßar a nova funcionalidade, deve ser desativada e ativada somente depois que for lan√ßada em todos os clusters e todos os datacenters. <br><br>  N√£o esque√ßa que temos uma API usada por aplicativos m√≥veis que podem n√£o ser atualizados por um longo per√≠odo de tempo.  Se fizermos algumas altera√ß√µes incompat√≠veis com vers√µes anteriores em nossa API, alguns aplicativos poder√£o falhar e n√£o podemos for√ßar todos os aplicativos a baixar e atualizar.  Isso afetar√° negativamente nossa reputa√ß√£o.  Portanto, todas as novas funcionalidades devem ser compat√≠veis com vers√µes anteriores.  Isso se aplica n√£o apenas √† API externa, mas tamb√©m √† interna, porque voc√™ n√£o pode distribuir simultaneamente todo o c√≥digo em todos os datacenters, m√°quinas e todos os clusters.  De qualquer forma, o c√≥digo antigo e o novo viver√£o conosco ao mesmo tempo.  Como resultado, obtemos algumas consultas que n√£o podem ser processadas em algum lugar e teremos erros. <br><br>  Voc√™ tamb√©m deve pensar no seguinte: se, de repente, seu c√≥digo n√£o funcionar ou se voc√™ tiver escrito um novo microsservi√ßo no qual h√° problemas em potencial, precisar√° estar preparado para as conseq√º√™ncias e poder se degradar.  Meu colega falar√° sobre isso na pr√≥xima apresenta√ß√£o. <br><br>  Se voc√™ fizer uma altera√ß√£o nos servi√ßos altamente carregados e n√£o precisar esperar o final de algumas opera√ß√µes, poder√° executar algumas a√ß√µes de forma ass√≠ncrona em algum lugar do plano de fundo ou como um processo separado.  √â melhor faz√™-lo dessa maneira, porque um processo separado tem menos impacto na produ√ß√£o e o sistema funcionar√° mais est√°vel em geral. <br><br><img src="https://habrastorage.org/webt/4f/gt/l2/4fgtl2iijso_y_j8ecaekyi_aik.jpeg"><br><br>  Tamb√©m √© importante que todos os dados que recebemos de fora, n√£o confiemos neles, devemos valid√°-los, verific√°-los de alguma forma, etc. Todos os dados que temos devem ser divididos em grupos que formamos , ou dados brutos que n√£o passaram na valida√ß√£o.  Isso inclui todos os dados que poderiam ser obtidos de outros servi√ßos externos ou diretamente dos usu√°rios, porque qualquer coisa poderia vir.  Talvez algu√©m tenha enviado uma solicita√ß√£o maliciosa especialmente, e tudo deve ser verificado conosco. <br><br><img src="https://habrastorage.org/webt/zn/vn/q4/znvnq49zowpwiono0al7g6eczde.jpeg"><br><br>  Ainda existem casos em que, mediante solicita√ß√£o, o servi√ßo pode n√£o responder no momento certo.  Talvez a conex√£o quebrou ou algo deu errado, pode haver muitas situa√ß√µes.  O aplicativo m√≥vel n√£o sabe o que acabou acontecendo, apenas faz uma solicita√ß√£o novamente. <br><br>  √â muito importante que, no processo dessas solicita√ß√µes, n√£o importa quantas existam, no final tudo funcione como originalmente esperado com uma √∫nica solicita√ß√£o.  N√£o devemos ter efeitos especiais.  Tamb√©m deve-se ter em mente que temos mais de um servi√ßo, temos muitas m√°quinas, muitos data centers, temos bases distribu√≠das e corridas s√£o poss√≠veis para todos.  O c√≥digo deve ser escrito para que, se for executado em v√°rios locais ao mesmo tempo, n√£o tenhamos corridas. <br><br>  Um ponto igualmente importante √© a capacidade de diagnosticar problemas.  Os problemas sempre existem, em tudo, e voc√™ precisa entender onde eles ocorreram.  Em uma situa√ß√£o ideal, a exist√™ncia do problema n√£o foi aprendida pelo servi√ßo de suporte, mas pelo monitoramento.  E, ao analisar algumas situa√ß√µes, poder√≠amos entender o que aconteceu simplesmente lendo os logs sem ler o c√≥digo.  At√© a pessoa que nunca viu o c√≥digo, para que, pelos registros no final, pudesse obt√™-lo. <br><br>  E, no caso ideal, se a situa√ß√£o for muito complicada, voc√™ precisar√° verificar pelos logs qual o caminho que o programa levou no final e o que aconteceu para simplificar bastante o interrogat√≥rio.  Como a situa√ß√£o ocorreu como resultado no passado e agora √© improv√°vel que seja poss√≠vel reproduzir, j√° n√£o h√° dados ou outros dados ou outras situa√ß√µes. <br><br>  Se voc√™ estiver executando novas opera√ß√µes no banco de dados ou criando uma nova, precisar√° considerar que pode haver muitos dados.  Talvez voc√™ grave um n√∫mero infinito de registros nesse banco de dados e, se n√£o pensar em arquiv√°-los, pode haver problemas, o banco de dados simplesmente come√ßar√° a crescer indefinidamente e n√£o haver√° mais recursos, discos e fragmenta√ß√£o.  √â importante poder arquivar dados e armazenar apenas os dados operacionais necess√°rios no momento.  E tamb√©m √© necess√°rio fazer consultas de √≠ndice para todos os bancos de dados.  Uma consulta que n√£o seja de √≠ndice pode colocar toda a produ√ß√£o.  Uma pequena solicita√ß√£o para a cole√ß√£o central mais carregada pode colocar tudo.  Voc√™ tem que ter muito cuidado. <br><br>  N√£o aceitamos otimiza√ß√µes prematuras.  Se algu√©m est√° tentando fazer de algum tipo de f√°brica um m√©todo muito universal que potencialmente lide com casos para o futuro, talvez um dia algu√©m queira expandi-lo - esse n√£o √© nosso costume, porque √© poss√≠vel que ele se desenvolva estar√° completamente errado e, talvez, esse c√≥digo seja enterrado ou talvez n√£o seja necess√°rio, mas apenas complica a leitura e a compreens√£o do c√≥digo.  Porque ler e entender o c√≥digo √© muito importante.  √â importante que o c√≥digo seja muito simples e f√°cil. <br><br>  Se voc√™ adicionar um novo banco de dados ao seu c√≥digo ou fizer uma altera√ß√£o na API, teremos uma documenta√ß√£o parcialmente gerada a partir do c√≥digo, parcialmente realizada no Wiki.  Esta informa√ß√£o √© importante para manter-se atualizado.  Caso contr√°rio, pode enganar algu√©m ou causar problemas para outros desenvolvedores.  Porque o c√≥digo √© escrito sozinho, mas √© muito suportado. <br><br>  Uma parte importante √© a observ√¢ncia do estilo geral.  A principal coisa neste caso √© a uniformidade.  Quando todo o c√≥digo √© escrito de maneira uniforme, √© f√°cil de entender, f√°cil de ler e voc√™ n√£o precisa se aprofundar em todos os detalhes e nuances.  C√≥digo escrito de maneira uniforme pode acelerar todo o processo de desenvolvimento potencialmente no futuro. <br><br>  Outro ponto que n√£o verificamos especificamente para an√°lises √© que n√£o estamos procurando bugs.  Porque o autor deve estar envolvido na busca de bugs.  Se houver erros durante a revis√£o, √© claro, eles escrever√£o sobre isso, mas n√£o deve haver uma pesquisa proposital, isso √© de inteira responsabilidade da pessoa que escreve o c√≥digo. <br><br>  Al√©m disso, quando seu c√≥digo √© escrito, a revis√£o √© conclu√≠da, voc√™ est√° pronto para congel√°-lo, mas geralmente acontece que voc√™ precisa executar a√ß√µes adicionais, migrar para o banco de dados. <br><br><img src="https://habrastorage.org/webt/2x/-5/s7/2x-5s7zzkdpr8vdacojgjcsayzy.jpeg"><br><br>  Para migra√ß√µes, escrevemos um script Python que pode se comunicar com o back-end.  O back-end, por sua vez, tem uma conex√£o com todas as nossas bases e pode realizar todas as opera√ß√µes necess√°rias.  O script √© iniciado atrav√©s do painel de administra√ß√£o de inicializa√ß√£o do script e, em seguida, √© executado. Voc√™ pode ver o log e os resultados.  E se voc√™ precisar de opera√ß√µes de feixe de longo prazo, n√£o poder√° atualizar tudo de uma s√≥ vez, precisar√° faz√™-lo com peda√ßos de 1000 a 10000 com algumas pausas, para n√£o colocar acidentalmente a base nessas opera√ß√µes. <br><br><img src="https://habrastorage.org/webt/kc/tc/i4/kctci40g68ovk-1jywdr7is2h9u.jpeg"><br><br>  Quando o c√≥digo √© escrito, revisado, testado, todas as migra√ß√µes s√£o realizadas, voc√™ pode mescl√°-lo com seguran√ßa no GitHub e continuar a lan√ß√°-lo. <br><br>  Para alguns servi√ßos, temos uma regulamenta√ß√£o de acordo com a qual devemos implementar em um determinado momento, mas uma parte significativa dos servi√ßos que podemos implementar a qualquer momento. <br><br>  Tudo isso √© feito com o TeamCity. <br><br><img src="https://habrastorage.org/webt/uy/5q/hs/uy5qhsjjmwkjkdigex_wgykubfw.jpeg"><br><br>  Tudo come√ßa com a constru√ß√£o de pacotes.  O TeamCity git flow ou sua apar√™ncia.  Estamos lentamente nos afastando do fluxo git para nossas melhores pr√°ticas, que achamos mais convenientes.  O TeamCity produz tudo isso, coleta pacotes, os preenche.  Aguardamos ainda mais quando os testes passar√£o nesses pacotes.  √â necess√°rio passar nos testes para lan√ßar a libera√ß√£o.  Se os testes falharem, primeiro voc√™ precisa descobrir e ver o que acabou dando errado.  Os testes utilizados s√£o os mesmos, regulares e de integra√ß√£o.  Eles verificam a embalagem j√° montada, pronta, exatamente o que entra em produ√ß√£o.  Este √© apenas o caso, de repente, h√° problemas no pacote montado, de repente algo n√£o √© copiado, de repente, algo est√° faltando. <br><br>  H√° tamb√©m um requisito para criarmos um ticket de libera√ß√£o em nosso rastreador, onde cada desenvolvedor deve cancelar a inscri√ß√£o de como ele testou esse c√≥digo e deve conter todas as tarefas que devem ser conclu√≠das. <br><br>  Isso tamb√©m √© feito automaticamente no TeamCity, que percorre a lista de confirma√ß√µes.  Temos o requisito de que em cada confirma√ß√£o haja uma palavra-chave "Relacionados" seguida pelo nome da tarefa.  Um script escrito em Python passa automaticamente por tudo isso, compila uma lista de tarefas que foram resolvidas, forma uma lista de autores e cria um ticket de lan√ßamento, instando todos os autores a cancelar a inscri√ß√£o em seus testes e confirmar que est√£o prontos para "ir" no lan√ßamento. <br><br><img src="https://habrastorage.org/webt/mz/hn/7t/mzhn7t86z09-ewjvhdyr-kvqr44.jpeg"><br><br>  Quando todos est√£o prontos, as confirma√ß√µes s√£o coletadas e, em seguida, ocorre a implanta√ß√£o - no pr√©-est√°bulo.  Esta √© uma pequena parte da produ√ß√£o.  Para cada servi√ßo, v√°rios data centers s√£o usados; em cada data center, pode haver v√°rias m√°quinas.  Uma das m√°quinas √© pr√©-est√°vel e o c√≥digo √© implementado primeiro apenas em uma ou duas m√°quinas. <br><br>  Quando o c√≥digo √© esvaziado, seguimos os gr√°ficos, os logs e o que acontece no final do servi√ßo.  Se tudo estiver bem, se os gr√°ficos mostrarem que tudo est√° est√°vel, e cada um tiver verificado que sua funcionalidade funciona como deveria, ent√£o ele rola para o resto do ambiente, que chamamos de est√°vel.  Ao sair para o est√°bulo, tudo √© semelhante: olhamos para os gr√°ficos, registros e verificamos que est√° tudo bem conosco. <br><br>  O lan√ßamento j√° passou, est√° tudo bem.  E se algo desse errado, de repente problemas? <br><br><img src="https://habrastorage.org/webt/9r/pd/qk/9rpdqkpeibqn-uud5knv1age12m.jpeg"><br><br>  Coletamos hotfix.  Isso √© feito com o mesmo princ√≠pio do fluxo git, ou seja, uma ramifica√ß√£o da ramifica√ß√£o principal.  Uma solicita√ß√£o de pool separada √© criada a partir do mestre, que faz as corre√ß√µes e, em seguida, o script iniciado pelo TeamCity a congela, executa todas as opera√ß√µes necess√°rias, coleta todos os pacotes da mesma maneira e continua. <br><br><img src="https://habrastorage.org/webt/jc/tq/ep/jctqep5zyjjh3cebljvmvqjoino.jpeg"><br><br>  No final, gostaria de falar sobre a dire√ß√£o em que estamos nos movendo.  Estamos caminhando para um √∫nico reposit√≥rio, quando muitos servi√ßos vivem em um reposit√≥rio de uma s√≥ vez.  Cada um deles possui c√°lculos independentes: em testes, em lan√ßamentos.  Para solicita√ß√µes de pool, mesmo quando o TeamCity √© usado, verificamos quais arquivos foram afetados, a quais servi√ßos eles pertencem.  De acordo com o gr√°fico de depend√™ncia, determinamos quais testes precisamos executar e o que verificar.  N√≥s nos esfor√ßamos para obter o m√°ximo isolamento dos servi√ßos.  At√© o momento, isso n√£o funciona muito bem, mas nos esfor√ßamos para isso para que muitos servi√ßos possam viver em um reposit√≥rio, ter algum c√≥digo comum e que isso n√£o cause problemas e simplifique a vida do desenvolvimento.  Isso √© tudo, obrigado a todos. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt439704/">https://habr.com/ru/post/pt439704/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt439692/index.html">AT&T processada por mudar o √≠cone da rede de 4G para 5G E</a></li>
<li><a href="../pt439694/index.html">Tecido inteligente que responde a mudan√ßas de temperatura corporal</a></li>
<li><a href="../pt439696/index.html">Na crista de uma onda, ou "eu quero mainstream" - mas vale a pena?</a></li>
<li><a href="../pt439698/index.html">Introdu√ß√£o √† programa√ß√£o: um simples jogo de tiro em 3D do zero no fim de semana, parte 1</a></li>
<li><a href="../pt439700/index.html">Patente de jogo de tabuleiro na R√∫ssia</a></li>
<li><a href="../pt439706/index.html">Confer√™ncia CHAP√âU PRETO. Li√ß√µes de como sobreviver a um ataque DDOS de 300 Gb / s. Parte 1</a></li>
<li><a href="../pt439708/index.html">Confer√™ncia CHAP√âU PRETO. Li√ß√µes de como sobreviver a um ataque DDOS de 300 Gb / s. Parte 2</a></li>
<li><a href="../pt439710/index.html">Recursos de cria√ß√£o de produtos para o mercado dos EUA</a></li>
<li><a href="../pt439712/index.html">Contratos p√∫blicos: o equil√≠brio entre a greve italiana e o criminoso russo</a></li>
<li><a href="../pt439714/index.html">Russos na Apple: como o nosso conseguiu um contrato para milh√µes com os Beatles e algumas m√∫sicas de "Jerry"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>