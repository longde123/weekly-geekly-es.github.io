<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêì ü§öüèº ‚öôÔ∏è D√©tails sur la mise √† jour de Segregated Witness et les cons√©quences de son adoption dans Bitcoin üßñüèæ üë©üèæ‚Äçüîß üßòüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, nous avons essay√© d'examiner en d√©tail les modifications du protocole Bitcoin survenues √† la suite de la mise √† jour de la softfork ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©tails sur la mise √† jour de Segregated Witness et les cons√©quences de son adoption dans Bitcoin</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/distributedlab/blog/418853/">  Dans cet article, nous avons essay√© d'examiner en d√©tail les modifications du protocole Bitcoin survenues √† la suite de la mise √† jour de la softfork de Segregated Witness.  Nous avons abord√© les probl√®mes li√©s √† la mall√©abilit√© des transactions, au maintien de la compatibilit√© descendante, √† l'augmentation du d√©bit, aux nouveaux formats de s√©rialisation des transactions, aux nouvelles options de script, au format d'adresse Bech32 et √† ses avantages, aux concepts de poids, de taille et de taille virtuelle.  De plus, voici les statistiques les plus importantes sur l'adaptation de la mise √† jour et les r√©ponses aux questions fr√©quemment pos√©es sur le sujet de cette mise √† jour sont pr√©sent√©es. <br><a name="habracut"></a><br>  Avant de proc√©der √† une description d√©taill√©e de toutes les modifications de cette mise √† jour, nous vous sugg√©rons de vous familiariser avec l'id√©e principale du t√©moin distinct.  Litt√©ralement, le t√©moin s√©par√© est traduit de l'anglais par ¬´t√©moin distinct¬ª.  Le concours Bitcoin implique que la preuve de la propri√©t√© des pi√®ces sera stock√©e s√©par√©ment des donn√©es de base de transaction, comme indiqu√© dans le diagramme. <br><img src="https://habrastorage.org/getpro/habr/post_images/140/425/704/14042570432bac8ca7d1f3d3058e43ae.png" alt="image"><br>  Si nous consid√©rons la mise √† jour du protocole dans son int√©gralit√©, elle comprend de nombreuses autres am√©liorations.  SegWit vous permet d'augmenter la bande passante du r√©seau, de s√©parer les preuves de propri√©t√© des pi√®ces du reste des donn√©es de transaction, de corriger les lacunes du format de transaction associ√©es √† la possibilit√© de modifier les donn√©es dans les transactions sign√©es (mall√©abilit√© des transactions), tout en maintenant une compatibilit√© descendante avec les versions pr√©c√©dentes du protocole.  Et la plus grande valeur de cette mise √† jour est qu'elle vous permet de mettre en ≈ìuvre de nombreuses solutions hors cha√Æne tr√®s importantes en plus du protocole Bitcoin. <br><br><h2>  Probl√®me et solution de mall√©abilit√© des transactions </h2><br>  L'essentiel est que lorsque vous travaillez dans Bitcoin, il est possible de modifier la transaction afin qu'elle reste correcte pendant la v√©rification.  Ces modifications sont tr√®s mineures, elles n'affectent pas les adresses de l'exp√©diteur et du destinataire, mais elles suffisent √† modifier le r√©sultat du hachage.  En d'autres termes, la transaction transf√©rera les pi√®ces √† leurs adresses pr√©c√©dentes, mais sa valeur de hachage modifi√©e ne correspondra plus √† la transaction modifi√©e avec celle d'origine. <br><br>  De toute √©vidence, la situation d√©crite ci-dessus ne peut se produire qu'avec des transactions qui n'ont pas encore re√ßu de confirmation.  Sans sa solution, il est impossible d'obtenir un fonctionnement fiable des protocoles hors cha√Æne, qui comprennent la construction de cha√Ænes de transactions non confirm√©es.  √âtant donn√© que lors de la compilation d'une transaction, toutes les donn√©es ne sont pas sign√©es (par exemple, vous ne pouvez pas signer scriptSig), il existe la possibilit√© de plusieurs types d'attaques: <br><br><ol><li>  <i>Modifiez le format de signature</i> .  Dans le protocole Bitcoin, le format de signature n'est pas strictement approuv√© et d√©pend de la mise en ≈ìuvre de la biblioth√®que OpenSSL, dans laquelle le format strict n'est pas non plus d√©fini pour la signature.  Un tiers peut modifier la transaction intercept√©e, ce qui entra√Ænera une modification de la valeur de hachage. </li><li>  <i>Impact directement sur scriptSig</i> .  Comme indiqu√© pr√©c√©demment, scriptSig contient un ensemble d'op√©rations pour v√©rifier la preuve qu'un utilisateur particulier est le propri√©taire des pi√®ces.  Mais en plus de ces op√©rations, vous pouvez en ajouter d'autres.  Quelques op√©rations inoffensives qui n'affectent rien entra√Æneront une modification de la valeur de hachage de la transaction. <br></li></ol><br>  Ainsi, vous pouvez modifier la valeur de hachage d'une transaction sans avoir acc√®s aux cl√©s priv√©es.  Pourquoi la modification d'une valeur de hachage est-elle si ind√©sirable? <br><br>  Tout d'abord, il convient de noter qu'il est possible de cr√©er une copie de la transaction d'origine, d'y ajouter des modifications qui n'affecteront pas son exactitude lors de la v√©rification et de l'envoyer au r√©seau.  Une copie modifi√©e avec une valeur de hachage diff√©rente d√©pense les m√™mes pi√®ces que l'original, elle peut donc rivaliser avec la transaction d'origine pour confirmation. <br><br>  Les protocoles hors cha√Æne ont √©t√© mentionn√©s ci-dessus.  Pour leur mise en ≈ìuvre, une solution au probl√®me de la mall√©abilit√© des transactions est n√©cessaire.  Au c≈ìur de leur travail se trouve la construction de cha√Ænes de transactions non confirm√©es.  La modification de la valeur de hachage de la premi√®re transaction entra√Ænera la nullit√© de toute la cha√Æne des transactions non confirm√©es. <br><br>  La mise √† jour de SegWit a d√©fini des r√®gles strictes pour remplir les champs, afin que les probl√®mes associ√©s √† la mall√©abilit√© des transactions pour les transactions du nouveau format puissent √™tre consid√©r√©s comme r√©solus.  Cela nous a permis de sp√©cifier des donn√©es et de les s√©rialiser sans ambigu√Øt√©, √©liminant la dualit√©. <br><br><h2>  Compatibilit√© descendante lors de la distribution d'un bloc sur un r√©seau </h2><br>  Selon les anciennes r√®gles, la taille maximale des blocs est de 1 Mo et contient des transactions avec des preuves int√©gr√©es.  Bien que les nouvelles r√®gles supposent que la taille maximale du bloc de base est de 1 Mo, il existe en outre une structure de donn√©es avec des preuves.  Par cons√©quent, la taille totale du nouveau bloc d√©passe 1 Mo. <br><br>  Pour des raisons de compatibilit√© descendante, les r√®gles de protocole permettent aux anciens n≈ìuds de fonctionner avec de nouveaux blocs, mais ils ne recevront le bloc que dans la configuration de base avec une taille maximale de 1 Mo.  La structure des t√©moins n'est pas disponible pour eux.  Les nouveaux n≈ìuds obtiennent un bloc complet avec des transactions et des preuves.  La figure suivante vous aidera √† vous familiariser avec cette question. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d8/995/70d/5d899570dc1234ff9f57fd1dd9793171.png" alt="image"><br><br>  √Ä gauche, un sch√©ma du fonctionnement du protocole Bitcoin avant l'activation de Segregated Witness.  Le bloc avait une taille maximale de 1 Mo et il √©tait r√©parti entre diff√©rents n≈ìuds de r√©seau sous une seule forme. <br><br>  Comme la taille du bloc est limit√©e, le nombre de transactions qui peuvent y √™tre plac√©es est √©galement limit√©, et la capacit√© du syst√®me en d√©pend.  Bien s√ªr, lorsque la question s'est pos√©e d'augmenter le d√©bit, la premi√®re chose qu'ils ont commenc√© √† chercher √©tait les moyens d'augmenter la taille maximale des blocs. <br><br><h2>  Comment augmenter le d√©bit </h2><br>  Consid√©rez les deux principaux moyens de r√©soudre le probl√®me de l'augmentation du d√©bit du syst√®me.  Toute offre est soigneusement v√©rifi√©e et test√©e par l'√©quipe de d√©veloppement du protocole Bitcoin.  Si la communaut√© est parvenue √† un accord et a d√©cid√© de mettre en ≈ìuvre la proposition dans le protocole, une mise √† jour est publi√©e. <br><br>  Mise √† jour Hardfork.  La mise √† jour la plus courante consiste √† augmenter la taille du bloc.  Il est suppos√© qu'une unit√© acceptera plus de transactions, augmentant ainsi le d√©bit.  Cependant, une telle unit√© ne sera pas accept√©e par les n≈ìuds fonctionnant selon l'ancien protocole, dont les r√®gles stipulent que la taille de bloc maximale ne peut pas d√©passer 1 MV.  Un tel changement n√©cessite hardfork, qui est plus complexe sur le plan organisationnel que softfork. <br><br>  Mise √† jour SoftFork.  Le t√©moin s√©par√© nous permet de r√©soudre ce probl√®me avec la fourche souple.  Comment exactement?  Il nous permet de diviser le bloc en deux parties, dont la premi√®re stocke les transactions et la seconde contient des preuves.  Dans le m√™me temps, les nouveaux n≈ìuds de r√©seau re√ßoivent les deux parties, tandis que les anciens ne re√ßoivent qu'un bloc de transaction de 1 Mo.  Les anciens n≈ìuds ne peuvent pas recevoir de blocs avec preuves et, par cons√©quent, ne peuvent pas valider les transactions qu'ils re√ßoivent, mais cela leur permet de participer √† la recherche d'un consensus et de ne pas recourir au hardfork, mais de passer progressivement √† de nouveaux logiciels. <br><br><h2>  Innovations √† t√©moin distinct </h2><br>  Tenez compte de ce qui est inclus dans la mise √† jour des t√©moins s√©par√©s.  La premi√®re et la plus importante innovation de Segregated Witness est le nouveau format de s√©rialisation des transactions.  En plus des champs d√©j√† connus, il y a trois nouveaux champs dans la nouvelle transaction: marqueur, drapeau, qui sont utilis√©s pour le contr√¥le de version et dans ce cas ils sont strictement d√©finis, mais dans les protocoles suivants ils peuvent changer, ainsi que le champ t√©moin.  Le t√©moin (donn√©es de t√©moin) est en fait un ensemble de preuves de propri√©t√© de pi√®ces de monnaie qui est retir√© de la partie principale de la transaction.  Structurellement, cela ressemble √† un ensemble d'entr√©es, chaque √©l√©ment de donn√©es t√©moin correspondant √† une entr√©e avec un num√©ro sp√©cifique, ce qui vous permet de comparer les preuves avec des pi√®ces sp√©cifiques d√©pens√©es. <br><br><h2>  Identifiant de transaction t√©moin </h2><br>  Pour obtenir l'identifiant de transaction (identifiant de transaction, txid), vous devez apporter la transaction elle-m√™me √† une s√©quence de donn√©es dans un format de s√©rialisation sp√©cial, puis obtenir la valeur de hachage √† partir de cette s√©quence de donn√©es.  Avec l'introduction de Segregated Witness, un nouvel identifiant, un identifiant de transaction t√©moin (wtxid) et un nouveau format de s√©rialisation, respectivement, sont apparus.  Pour les transactions plus anciennes qui d√©pensent de l'argent sans utiliser Segregated Witness, wtxid sera identique √† txid car aucun nouveau champ ne sera ajout√© √† Segregated Witness. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad8/429/d20/ad8429d2070a8b7c76e2a5b84f937dba.png" alt="image"><br><br>  Wtxid est n√©cessaire pour construire un arbre Merkle alternatif pour preuve.  Il est construit de la m√™me mani√®re que pour les transactions ordinaires, seul wtxid est utilis√© √† la place du hachage de transaction.  En cons√©quence, wtxid sont hach√©s par paires et donnent la racine Merkle. <br><br>  Il est important de noter que la racine Merkle est ins√©r√©e dans une transaction coinbase, et non dans l'en-t√™te de bloc.  Si root √©tait dans l'en-t√™te du bloc, la structure du bloc changerait.  Les n≈ìuds qui prennent en charge l'ancien protocole ne pouvaient pas fonctionner avec de tels blocs.  Et tous les efforts pour maintenir la compatibilit√© ascendante reposeraient sur cette incoh√©rence.  Par cons√©quent, root est ins√©r√© dans l'une des sorties de la transaction coinbase.  Lorsque tous les n≈ìuds passent √† T√©moin s√©par√©, cette situation peut changer et de nouvelles approches seront envisag√©es. <br><br><h2>  Programmes t√©moins pour fixer les conditions de d√©penses des pi√®ces </h2><br>  Voyons comment le script de transactions de t√©moin s√©par√© est construit et comment il permet aux anciens n≈ìuds de r√©seau de comprendre que les transactions de t√©moin s√©par√© sont correctes, malgr√© le fait qu'ils ne re√ßoivent pas de preuve de propri√©t√© des pi√®ces. <br><br>  Le script d√©crivant les r√®gles pour d√©penser des pi√®ces d'une transaction de nouveau format se compose de deux parties.  La premi√®re partie est l'octet de version t√©moin (l'octet sp√©cifiant la version du programme t√©moin).  Il peut prendre des valeurs de 0 √† 16 (OP0-OP16), maintenant il utilise OP0.  √Ä l'avenir, de nouvelles versions du protocole peuvent appara√Ætre avec la prise en charge d'autres versions du programme t√©moin.  La deuxi√®me partie est le programme des t√©moins.  Cette partie peut avoir une taille de 2 √† 40 octets. <br><br>  Le programme Witness est le r√©sultat du hachage d'un script de t√©moin.  Le script t√©moin lui-m√™me contient une description compl√®te des conditions de d√©pense des pi√®ces.  Les donn√©es des t√©moins contiennent une preuve de propri√©t√© des pi√®ces qui doivent satisfaire aux conditions du script des t√©moins.  En cons√©quence, les donn√©es des t√©moins se composent toujours de deux parties: un script de t√©moin et une preuve de propri√©t√© des pi√®ces. <br><br>  Il convient de noter que le programme t√©moin ne contient aucune op√©ration (correspondance des valeurs de hachage, v√©rification des signatures √©lectroniques), et le script lui-m√™me commence par le code OP0, par cons√©quent, il est valable pour tous les anciens n≈ìuds.  De plus, les n≈ìuds qui n'ont pas √©t√© mis √† jour vers SegWit ne v√©rifient pas la preuve de la propri√©t√© des pi√®ces pour les sorties de nouveau format; ils consid√®rent que ce gaspillage est correct dans tous les cas.  Strictement parlant, les anciens n≈ìuds accepteront les transactions d'un nouveau format m√™me si leur √©metteur ne poss√®de pas r√©ellement les pi√®ces correspondantes.  C'est pourquoi SegWit exige que les propri√©taires de la plupart des puissances mini√®res Bitcoin acceptent cette mise √† jour.  Une autre caract√©ristique est que le scriptSig d'une transaction qui d√©pense des pi√®ces de la sortie du nouveau format sera vide. <br><br><h2>  Nouvelles options pour d√©finir les conditions de d√©penses des pi√®ces </h2><br>  Avec l'introduction de SegWit, deux formats standard pour scriptPubKey ont √©t√© propos√©s, qui sont devenus une alternative aux deux formats les plus courants pour d√©finir les r√®gles de d√©pense des pi√®ces avant que cette mise √† jour ne paraisse.  Consid√©rons-les dans l'ordre. <br><br>  <i>Payer pour assister au hachage de cl√© publique</i> (P2WPKH) est un analogue du hachage de cl√© publique √† payer.  Quelle est sa diff√©rence?  Comme indiqu√© pr√©c√©demment, le scriptSig n'est pas rempli et reste vide.  Toutes les preuves de propri√©t√© des pi√®ces sont transf√©r√©es √† la structure de donn√©es des t√©moins. <br><br>  Dans ce cas, le script consid√©r√© pr√©c√©demment, la version et le hachage de la cl√© publique, qui est le programme t√©moin, sont ins√©r√©s dans scriptPubKey.  Un n≈ìud sur le r√©seau distingue un tel script de d√©penses des autres en raison du fait qu'il en a une version et une taille de donn√©es de 20 octets.  Une autre version et une taille diff√©rente comportent des r√®gles de d√©penses diff√©rentes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8e6/5da/4ee/8e65da4eeac53c4333499dccc963f3b1.png" alt="image"><br><br>  Dans ce cas, scriptPubKey contient deux parties: le num√©ro de version t√©moin est z√©ro et la valeur de hachage de la cl√© publique du destinataire.  ScriptSig sera vide et les donn√©es des t√©moins contiendront une signature √©lectronique et une cl√© publique pour le v√©rifier. <br><br>  <i>Le hachage de script Pay</i> toitness (P2WSH) est un analogue du hachage de pay to script standard.  Dans ce cas, un script personnalis√© peut √™tre utilis√© pour d√©finir les r√®gles de d√©pense des pi√®ces.  Comment un h√¥te distingue-t-il un tel script du pr√©c√©dent?  Dans ce cas, la version a toujours une valeur de un, et le programme t√©moin prend 32 octets et est une valeur de hachage du script t√©moin.  Si une transaction arrive sur un h√¥te contenant un script qui aura la premi√®re version, mais que sa taille diff√®re des valeurs de 20 ou 32 octets, alors l'h√¥te rejettera cette transaction car il ne saura pas comment travailler avec. <br><br>  Les donn√©es des t√©moins ici sont divis√©es en deux parties.  Le premier contient un ensemble de preuves de la propri√©t√© des pi√®ces, c'est-√†-dire un ensemble de signatures.  Dans la deuxi√®me partie, un script t√©moin est plac√©, dont le contenu d√©finit simplement les r√®gles de d√©pense des pi√®ces, mais dans ce cas, il est indiqu√© au moment de la d√©pense, et au moment de l'envoi des pi√®ces, sa valeur de hachage a √©t√© indiqu√©e. <br><img src="https://habrastorage.org/getpro/habr/post_images/eb6/b5f/623/eb6b5f623d679822fbded33979e4c27e.png" alt="image"><br>  Dans ce cas, scriptPubKey contient deux parties: le num√©ro t√©moin de la version est z√©ro et la valeur de hachage du script t√©moin pour le cas de la signature multiple 1 sur 2.  ScriptSig sera vide et les donn√©es des t√©moins contiendront la signature √©lectronique et le script t√©moin d'origine en texte clair. <br><br><h2>  Wrapper P2SH </h2><br>  Le nouveau format de script est diff√©rent de l'ancien.  Par cons√©quent, les anciens services et portefeuilles ne sauront pas comment travailler avec ce format de script et comment le composer.  Pour des raisons de compatibilit√© descendante, les transactions de t√©moins s√©par√©s utilisant P2SH utilisent un ¬´wrapper¬ª sp√©cial, qui vous permet de cr√©er une transaction qui poss√®de des propri√©t√©s de transaction de t√©moin s√©par√©, mais qui ne diff√®re pas du P2SH habituel pour le monde ext√©rieur. <br><br>  P2SH est utilis√© pour simplifier le travail de l'exp√©diteur et ne pas lui imposer les d√©tails de la mise en ≈ìuvre du script de rachat du destinataire.  Dans ce cas, le destinataire donne √† l'exp√©diteur uniquement la valeur de hachage Redeem Script, et le script lui-m√™me passe √† scriptSig avec la preuve. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/428/b92/1f8/428b921f83b964dd9cd2c46aad79edbc.png" alt="image"><br><br>  Dans ce cas, scriptPubKey contient une op√©ration de hachage, une valeur de hachage de script de rachat et une op√©ration de comparaison (comme pour l'ancienne version de P2SH).  ScriptSig contiendra ici la valeur de hachage de la cl√© publique, et les donn√©es t√©moins contiendront la signature √©lectronique et la cl√© publique. <br><br>  Cette approche permet aux portefeuilles num√©riques non mis √† jour d'envoyer des transactions √† des adresses de t√©moins distincts, sans rien savoir des nouvelles fa√ßons de d√©finir les conditions pour d√©penser des pi√®ces. <br><br><h2>  Nouveau format d'adresse Bech32 </h2><br>  Il convient de mentionner s√©par√©ment les adresses Bech32 qui sont consid√©r√©es comme des adresses SegWit natives.  Pour la majeure partie de son histoire, Bitcoin a utilis√© le codage Base58 pour les adresses avec l'ajout d'une somme de contr√¥le, qui est un r√©sultat tronqu√© du double hachage √† l'aide de la fonction de hachage SHA-256.  Ils faisaient partie du logiciel d'origine et leur champ d'application a √©t√© √©tendu en BIP13 pour P2SH.  Mais le jeu de caract√®res et l'algorithme de somme de contr√¥le ont des limites: <br><ul><li>  l'adresse dans Base58 occupe plus de m√©moire dans les codes QR, car elle ne peut pas utiliser le mode de repr√©sentation alphanum√©rique; </li><li>  base58 est tr√®s g√™nant pour une √©criture fiable sur papier, pour taper √† partir d'un clavier mobile ou pour lire √† haute voix; </li><li>  le hachage de double somme de contr√¥le est lent; </li><li>  Le d√©codage en base58 est complexe et relativement lent. </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/500/973/f24/500973f247d11b4556255551d84c84f8.png" alt="image"><br>  La mise √† jour SegWit comprend une nouvelle classe de sorties (programmes t√©moins) et deux de ses cas: P2WPKH et P2WSH.  Leur fonctionnalit√© est indirectement disponible pour les anciens n≈ìuds gr√¢ce √† l'utilisation de P2SH, mais il sera plus optimal et plus s√ªr de l'utiliser directement, pour cela, il est n√©cessaire d'introduire un nouveau format d'adresse. <br><br><h2>  Sp√©cification d'adresse Bech32 </h2><br>  L'adresse Bech32 ne comporte pas plus de 90 caract√®res et contient: <br><br><ol><li>  Une partie lisible par l'homme.  Cela inclut les donn√©es qui peuvent avoir besoin d'√™tre transmises ou qui ont quelque chose √† voir avec le propri√©taire de l'adresse, d'au moins 1 caract√®re.  Par exemple, par d√©faut pour les adresses de r√©seau principal, les caract√®res sont ¬´bc¬ª et pour testnet, les caract√®res sont ¬´tb¬ª. </li><li>  Un d√©limiteur toujours √©gal √† 1.  Si "1" est autoris√© √† l'int√©rieur de la partie lisible par l'homme, alors le s√©parateur est le dernier des caract√®res "1". <br></li><li>  La partie de donn√©es a une longueur d'au moins 6 caract√®res et se compose uniquement de caract√®res alphanum√©riques, √† l'exclusion de "1", "b", "i" et "o".  Ici, la version du programme t√©moin et les donn√©es du programme t√©moin lui-m√™me (de 2 √† 40 octets) sont utilis√©es ici comme donn√©es principales. <br></li></ol><br><br><img src="https://habrastorage.org/getpro/habr/post_images/03e/531/472/03e531472b57bd39db41e7063a76fe04.png" alt="image"><br><br>  Pourquoi inclure un s√©parateur dans les adresses?  Cela vous permet de s√©parer clairement la partie lisible par l'homme de la partie lisible par les donn√©es, en √©vitant les collisions potentielles avec d'autres parties lisibles par l'homme qui utilisent le pr√©fixe.  Il √©vite √©galement les restrictions de jeu de caract√®res pour la partie lisible par l'homme.  Le s√©parateur est 1 car l'utilisation d'un caract√®re non alphanum√©rique rend difficile la copie des adresses (sans double-cliquer dans plusieurs applications).  Par cons√©quent, un caract√®re alphanum√©rique a √©t√© s√©lectionn√© en dehors du jeu de caract√®res principal.  En outre, l'utilisation du syst√®me num√©rique de base 32 s'accompagne d'une augmentation de la longueur d'adresse de 15% par rapport au syst√®me num√©rique de base 58, mais cela n'a pas d'importance lors de la copie d'adresses. <br><br><h2>  Adresses de contr√¥le Bech32 </h2><br>  Les 6 derniers caract√®res de l'adresse sont une somme de contr√¥le.  La somme de contr√¥le est construite sur la base du code BCH, qui garantit la d√©tection de toute erreur n'affectant pas plus de 4 caract√®res, et la probabilit√© que la somme de contr√¥le converge lorsque plus de 4 erreurs sont faites est l'une des 109. <br><br>  L'un des avantages de l'utilisation des codes BCH est qu'ils peuvent √™tre utilis√©s pour corriger des erreurs.  Si jusqu'√† 4 erreurs ont √©t√© commises dans l'adresse, elles seront corrig√©es automatiquement.  Et si plus d'erreurs sont commises, elles seront d√©tect√©es avec une forte probabilit√©, mais sans possibilit√© de correction automatique. <br><br><h2>  Majuscules et minuscules dans l'adresse </h2><br>  Les minuscules sont utilis√©es lorsqu'une valeur de caract√®re est requise pour une somme de contr√¥le. <br><br>  Le logiciel affiche toujours l'int√©gralit√© de la cha√Æne d'adresse Bech32 en minuscules.       (,       QR-),    .  ,     ,       ,    .       ,   QR-    ,    - ,    45% ,   . <br><br><h2>      </h2><br>    ,    Segregated Witness,    ,      .  Segregated Witness         .       1 MB.       . ,    . <br><br>               (weight units).         3,   witness data   1.   ,  ,    witness data   3   ,    .                 .     . <br><br> <i><b>block weight = base size * 3 + total size</b></i> <br><br> <i>block weight</i> ‚Äì   (   ) <br> <i>base size</i> ‚Äì    (  ) <br> <i>total size</i> ‚Äì    (  ) <br><br>       ,                 ,    .     . <br><br>    ,          ,      , ,     4  .   Segregated Witness     ,            . <br><br>        ,       .   (virtual size) ,          ,            ,     spb (satoshi per byte). <br><br> <i><b>virtual size = weight units / 4</b></i> <br><br>      Segregated Witness   4  ,  ,        . ,       .       ,       .  ,      ,           .  ,     witness data (base size)  1 MB,      4 MB. <br><br>     : ¬´       witness data?¬ª.      . ,         1 MB  4 MB.       .   1.8 MB.   ?           60%   .      1 MB,   40%     ,    . <br><br> <i>400000  * 4 = 1600000   </i> <br> <i>600000  * 1 = 600000   </i> <br> <i>1600000 + 600000 = 2200000   </i> <br> <i>4000000 / 2200000 = 1.81 MB</i> <br><br>  ,  ,       1.8 MB.  ,              . <br><br><h2>    </h2><br>     2018   SegWit    35%      .              Segregated Witness   (, Electrum  Bitxfy). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d57/68e/0b4/d5768e0b4c94f454d6549bb7fd74a976.png" alt="image"><br> <i>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BitMex Research</a></i> <br><br>             .             1 MB,     2 MB.  ,  ,    SegWit              . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/746/1b5/409/7461b54095358a8068217847cf16e67e.png" alt="image"><br> <i>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BitMex Research</a></i> <br><br>             ,           . <br><br>    ,  Segregated Witness    off-chain    Bitcoin.  ,  lightning network ‚Äì          SegWit,   ,            . <br><br><h2>  Foire aux questions </h2><br> <i>‚Äî   ,   Segregated Witness     RBF (replace-by-fee)?</i> <br><br> , replace by fee    Segregated Witness ,       ,     ,   ,        sequence number  .      ,    ,     ,     ,         . <br><br> <i>‚Äî      ?</i> <br><br>      -   ,    . ScriptSig,    ,    ,     .     ,         ,   - .  ,    ,  ,  -   . <br><br> <i>‚Äî     witness data?</i> <br><br>   ,  Segregated Witness     .  ,        ,    ,   . ,     .      :    ,  ,      (      ),  ,       Witness data,        .           . <br><br> <i>‚Äî       ,  RFC3548  z-base-32  Bech32 ?</i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le jeu de caract√®res est choisi de mani√®re √† minimiser l'ambigu√Øt√© associ√©e √† leur similitude visuelle. </font><font style="vertical-align: inherit;">L'ordre est s√©lectionn√© pour minimiser le nombre de paires de caract√®res qui diff√®rent en moins d'un bit de donn√©es. </font><font style="vertical-align: inherit;">La somme de contr√¥le est choisie pour maximiser la probabilit√© de d√©tecter un petit nombre d'erreurs, ce qui am√©liore son efficacit√© pour les erreurs typiques.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr418853/">https://habr.com/ru/post/fr418853/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr418843/index.html">Production Hell STALKER: Shadow of Tchernobyl</a></li>
<li><a href="../fr418845/index.html">Comment Roskomnadzor bloque HideMy.name et ce qui se passera ensuite. Un mot aux fondateurs du service VPN</a></li>
<li><a href="../fr418847/index.html">R√©seau de neurones optiques</a></li>
<li><a href="../fr418849/index.html">Le condens√© des √©v√©nements pour les professionnels des RH dans le domaine des TI pour ao√ªt 2018</a></li>
<li><a href="../fr418851/index.html">Comment acheter l'illusion de la s√©curit√© sous la forme de montres intelligentes pour enfants</a></li>
<li><a href="../fr418855/index.html">Webinaire ouvert ¬´Cr√©ation d'une application sur Webpack + React + Express¬ª</a></li>
<li><a href="../fr418857/index.html">Pr√©paration des certificats SSL pour l'installation</a></li>
<li><a href="../fr418859/index.html">Certaines fonctionnalit√©s PowerShell lors de l'utilisation de comptes d'utilisateurs</a></li>
<li><a href="../fr418861/index.html">ReactOS commence maintenant avec une partition BTRFS</a></li>
<li><a href="../fr418863/index.html">Comprendre les accessoires de rendu avec un exemple</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>