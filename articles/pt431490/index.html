<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçü§ù‚Äçüë®üèæ üëçüèæ üêì Externo - GUI para Golang üå∑ üìª ü§õüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sauda√ß√µes, colegas! 

 H√° cerca de um m√™s, publiquei um artigo sobre estruturas de GUI aqui - em um thread que oferecia a tecnologia para criar estrut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Externo - GUI para Golang</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431490/">  Sauda√ß√µes, colegas! <br><br>  H√° cerca de um m√™s, publiquei um artigo sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estruturas de GUI aqui - em um thread</a> que oferecia a tecnologia para criar estruturas de GUI para diferentes linguagens de programa√ß√£o, com base na conex√£o (tcp / ip ou alguma outra) a um processo externo que desempenha o papel de um tipo de servidor de GUI.  Aqui, quero apresentar uma implementa√ß√£o concreta dessa id√©ia - uma nova estrutura da GUI para <i>Golang</i> - <i>Externa</i> . <br><br>  Por que foi necess√°rio escrever uma nova GUI para <i>Golang</i> , se j√° existem muitas dessas ferramentas dispon√≠veis?  Primeiro de tudo, porque nenhum deles me serviu ao m√°ximo.  Algo era necess√°rio para criar aplicativos de desktop, multiplataforma, com apar√™ncia natural para cada plataforma.  Se poss√≠vel, n√£o muito volumoso, com um m√≠nimo de depend√™ncias - estou comprometido com uma abordagem minimalista. <a name="habracut"></a><br><br>  Fui guiado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">por esta lista</a> .  Duas posi√ß√µes - <i>app</i> e <i>walk</i> foram imediatamente riscadas por n√£o atenderem aos requisitos da plataforma cruzada.  Depois de pensar um pouco, ele rejeitou aqueles baseados em html / css / javascript.  Em primeiro lugar, parece-me um pouco incomum criar um aplicativo de desktop como uma p√°gina da Web e, em segundo lugar, eles usam motores bastante pesados.  Assim, por exemplo, <i>go-astilectron</i> e <i>gowd</i> s√£o baseados em <i>Electron</i> e <i>nw.js</i> , respectivamente, e estes, por sua vez, s√£o baseados em <i>node.js.</i>  Imagine quanto tudo deve ser instalado pelo usu√°rio final para executar at√© um pequeno utilit√°rio?  A menos que o <i>go-sctiter</i> pare√ßa prefer√≠vel desse ponto de vista: o <i>Sciter</i> atr√°s dele n√£o <i>√©</i> t√£o monstruoso. <br><br>  <i>Go-gtk</i> e <i>gotk3</i> s√£o baseados em GTK.  Aparentemente, esses s√£o pacotes completos, mas eu tamb√©m os recusei, porque, na minha opini√£o, usar o GTK no Windows n√£o √© a melhor solu√ß√£o.  As janelas GTK n√£o parecem nativas no Windows.  <i>A</i> liga√ß√£o com o <i>Qt</i> √© uma coisa poderosa, √© claro, mas um pouco complicada, e as dimens√µes ... Quando eu li: "Voc√™ tamb√©m precisa de 2,5 GB de RAM livre (que s√≥ era necess√°ria durante a instala√ß√£o inicial) e pelo menos 5 GB de espa√ßo livre em disco", as √∫ltimas d√∫vidas desapareceram.  O pr√≥prio Go ocupa dez vezes menos espa√ßo.  E h√° restri√ß√µes de licenciamento: ‚Äúessa liga√ß√£o com sua licen√ßa LGPL n√£o √© adequada para ser usada em aplicativos de c√≥digo fechado que se destinam a ser distribu√≠dos ao p√∫blico em geral‚Äù. <br><br>  O que resta da lista?  <i>A interface do usu√°rio</i> pode ser uma boa op√ß√£o, mas ainda est√° no est√°gio mid-alpha.  <i>Fyne</i> tamb√©m parece muito bom, mas n√£o parece estar completamente pronto.  Foi um pouco embara√ßoso que, por um lado, ‚Äúo Fyne seja constru√≠do inteiramente usando gr√°ficos vetoriais‚Äù e, por outro lado, ‚Äúos pacotes do Windows EFL atualmente sejam muito mais antigos, portanto voc√™ n√£o ver√° as partes dos gr√°ficos vetoriais dos aplicativos Fyne‚Äù - assim.  Bem, n√£o gosto disso para instalar o <i>EFL</i> (a biblioteca gr√°fica na qual <i>Fyne</i> se baseia) no Windows, voc√™ precisa do <i>MSYS</i> . <br><br>  Em suma, com todo o respeito devido aos autores dessas embalagens e aos produtos de seu trabalho, eu n√£o escolhi nada para mim e, com a consci√™ncia limpa, continuei com o que eu queria fazer - escreva uma nova estrutura de GUI - <i>Externa</i> . <br><br>  Como escrevi em um artigo anterior, o <i>External</i> n√£o implementa elementos da GUI por conta pr√≥pria, ele usa um aplicativo separado para isso, um processo separado que atua como um servidor da GUI, esse aplicativo √© chamado <i>GuiServer</i> .  <i>O externo o</i> lan√ßa, junta-se via tcp / ip, envia comandos / solicita√ß√µes para criar janelas e widgets, manipul√°-los etc., e recebe mensagens dele. <br><br>  Aqui est√° um programa simples que cria uma janela com a inscri√ß√£o tradicional Ol√°, mundo: <br><br><pre><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> egui <span class="hljs-string"><span class="hljs-string">"github.com/alkresin/external"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> egui.Init(<span class="hljs-string"><span class="hljs-string">""</span></span>) != <span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } pWindow := &amp;egui.Widget{X: <span class="hljs-number"><span class="hljs-number">100</span></span>, Y: <span class="hljs-number"><span class="hljs-number">100</span></span>, W: <span class="hljs-number"><span class="hljs-number">400</span></span>, H: <span class="hljs-number"><span class="hljs-number">140</span></span>, Title: <span class="hljs-string"><span class="hljs-string">"My GUI app"</span></span>} egui.InitMainWindow(pWindow) pWindow.AddWidget(&amp;egui.Widget{Type: <span class="hljs-string"><span class="hljs-string">"label"</span></span>, X: <span class="hljs-number"><span class="hljs-number">20</span></span>, Y: <span class="hljs-number"><span class="hljs-number">60</span></span>, W: <span class="hljs-number"><span class="hljs-number">160</span></span>, H: <span class="hljs-number"><span class="hljs-number">24</span></span>, Title: <span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span> }) pWindow.Activate() egui.Exit() }</code> </pre> <br>  A fun√ß√£o Init () inicia o <i>GuiServer</i> e junta-se a ele.  Um par√¢metro de string pode ser passado para ele, que determina, se necess√°rio, o nome do <i>GuiServer</i> e seu caminho, endere√ßo IP e porta e o n√≠vel de registro. <br><br>  InitMainWindow () cria a janela principal do aplicativo com os par√¢metros especificados.  M√©todo AddWidget () - Adiciona um widget do tipo label. <br><br>  Ativar () - exibe uma janela na tela e coloca o programa no modo de espera. <br>  As janelas e os widgets s√£o definidos na estrutura do widget - n√£o criei estruturas separadas para cada objeto, porque  N√£o encontrei uma maneira conveniente de implementar isso, uma vez que o <i>Go</i> n√£o tem heran√ßa.  Essa estrutura inclui campos comuns √† maioria dos widgets e mapear [string], que cont√©m propriedades espec√≠ficas para um objeto espec√≠fico: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Widget <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Parent *Widget Type <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> X <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> [...] Font *Font AProps <span class="hljs-keyword"><span class="hljs-keyword">map</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> aWidgets []*Widget }</code> </pre> <br>  Os m√©todos dessa estrutura incluem os familiares AddWidget (), bem como SetText (), SetImage (), SetParam (), SetColor (), SetFont (), GetText (), Move (), Enable (), etc. Gostaria de mencionar SetCallBackProc () e SetCallBackFunc () - para definir manipuladores de eventos. <br>  Seria inapropriado listar todas as fun√ß√µes, estruturas e m√©todos aqui, para isso existe, mais precisamente.  deve haver documenta√ß√£o.  Vou dizer apenas alguns para dar uma id√©ia geral: <br><br>  Menu (), MenuContext (), EndMenu (), AddMenuItem (), AddMenuSeparator () - um conjunto de fun√ß√µes para criar um menu, principal ou contexto. <br>  EvalProc (sCode string), EvalFunc (sCode string) transmitem um fragmento de c√≥digo Harbor (pode ser multilinha) para execu√ß√£o no GuiServer - um tipo de implementa√ß√£o da linguagem de script interna. <br>  OpenForm (sPath string) - cria uma janela com base na descri√ß√£o do arquivo xml criado pelo HwGui Designer. <br>  OpenReport (sPath string) - imprime um relat√≥rio com base na descri√ß√£o do arquivo xml criado pelo HwGui Designer. <br>  MsgInfo (), ..., SelectFile (), SelectColor (), SelectFont () - chama caixas de di√°logo e caixas de mensagem padr√£o. <br>  InitPrinter () e um conjunto de m√©todos de estrutura da impressora: Say (), Box (), Line () etc.) fornecem impress√£o √† impressora com a capacidade de visualizar. <br><br>  Aqui est√° a lista completa de widgets atualmente suportados: <br>  etiqueta, edi√ß√£o, bot√£o, verifica√ß√£o, r√°dio, radiogr, grupo, combina√ß√£o, bitmap, linha, painel (projetado para hospedar outros widgets), paneltop, panelbot, ownbtn (bot√£o ownerdrawn), divisor, atualiza√ß√£o, √°rvore, progresso, guia, navegue (tabela, como muitos chamam), cedit (edite com recursos avan√ßados), monthcal. <br><br>  Todos eles est√£o listados na fun√ß√£o init () do extwidg.go, al√©m de propriedades adicionais.  acess√≠vel para cada um deles - essas propriedades s√£o definidas por meio do Widget.AProps.  Muitos desses widgets t√™m outras propriedades, especialmente navegando ricamente neles;  eles podem ser definidos separadamente usando o m√©todo SetParam (). <br><br>  <i>Externo</i> acabou por ser pequeno em volume, est√° escrito em <i>Go</i> puro, n√£o puxa outros pacotes, exceto alguns padr√£o.  A plataforma cruzada √© fornecida pelo <i>GuiServer</i> , que pode ser compilado no Windows, Linux / Unix, Mac OS.  Um certo inconveniente est√° associado precisamente √† necessidade de usar este m√≥dulo externo, que voc√™ precisa compilar a partir das fontes, ou baixar o final do meu site e coloc√°-lo no diret√≥rio especificado em PATH.  Ali√°s, √© pequeno - apenas cerca de um megabyte e meio para Windows e cerca de tr√™s - para Linux. <br><br>  Como parece, mostrarei um exemplo de um pequeno aplicativo <i>ETutor</i> - o tutorial de Golang.  Este programa apresenta uma cole√ß√£o de fragmentos de c√≥digo no Go na forma de uma √°rvore.  O c√≥digo pode ser editado, executado para execu√ß√£o.  Nada de especial, mas bastante confort√°vel.  A cole√ß√£o pode ser reabastecida, adicione novas cole√ß√µes.  Agora, s√£o coletados (ainda n√£o completamente) um Tour of Go, Go by Example e v√°rios exemplos no pr√≥prio <i>External</i> .  <i>O ETutor tamb√©m</i> pode ser usado para, por exemplo, organizar um conjunto de utilit√°rios no Go.  Ent√£o, screenshots. <br><br>  Windows 10: <br><br><img src="https://habrastorage.org/webt/cv/q3/yz/cvq3yzi7n_q3qzxxr6ipdi51l9i.png"><br><br>  Debian, Gnome: <br><br><img src="https://habrastorage.org/webt/-7/7e/1q/-77e1qmycrfuqeyerqsxfplixq0.png"><br><br>  E, finalmente, os links: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Externo no Github</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GuiServer no Github</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ETutor no Github</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Uma p√°gina sobre o GuiServer no meu site, onde voc√™ pode baixar bin√°rios prontos</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://groups.google.com/d/forum/guiserver</a> - Um grupo para discutir todos os problemas relacionados ao GuiServer e External <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo sobre GuiServer no Habr√©</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt431490/">https://habr.com/ru/post/pt431490/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt431478/index.html">Confer√™ncia de Roskomnadzor "Prote√ß√£o de dados pessoais"</a></li>
<li><a href="../pt431480/index.html">Magento lan√ßou uma nova vers√£o da plataforma principal - 2.3.0 GA</a></li>
<li><a href="../pt431482/index.html">E voc√™, Yota ...</a></li>
<li><a href="../pt431486/index.html">Moscas invis√≠veis: um novo m√©todo para estudar o sistema nervoso atrav√©s da despigmenta√ß√£o dos tecidos</a></li>
<li><a href="../pt431488/index.html">Modula√ß√£o de som</a></li>
<li><a href="../pt431492/index.html">Reagir o question√°rio do concurso ao analisar o estande do HeadHunter no HolyJs 2018</a></li>
<li><a href="../pt431496/index.html">Como a tecnologia ajuda professores de turmas especiais</a></li>
<li><a href="../pt431498/index.html">O WebP assumir√° a Web em breve, mas n√£o demorar√° muito</a></li>
<li><a href="../pt431500/index.html">Bancos de dados e Kubernetes (revis√£o e reportagem em v√≠deo)</a></li>
<li><a href="../pt431502/index.html">Confer√™ncia para desenvolvedores de iOS Kolesa Mobile 3.0. Relat√≥rio de v√≠deo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>