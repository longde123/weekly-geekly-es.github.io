<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìù üìè ü¶é Que se passe-t-il lorsque vous envoyez des SMS üë∂üèº üôèüèª ü•¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il s'agit du troisi√®me article de la boucle de d√©veloppement de la pile compl√®te sur la vie secr√®te des donn√©es. Il est d√©di√© √† l'itin√©raire SMS long ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Que se passe-t-il lorsque vous envoyez des SMS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437510/">  Il s'agit du troisi√®me article de la boucle de d√©veloppement de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pile compl√®te</a> sur la vie secr√®te des donn√©es.  Il est d√©di√© √† l'itin√©raire SMS long et difficile: num√©rotation, sauvegarde, envoi, r√©ception et affichage.  J'ajouterai un peu d'histoire et de contexte pour diluer la liste des protocoles.  Bien que le texte soit assez technique, il est assez facile √† comprendre. <br><br>  Les deux premi√®res parties du cycle: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cetus</a> , sur la propagation des erreurs chez les anc√™tres des tableurs du XVIIe si√®cle </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´Down the Rabbit Hole¬ª</a> , sur la recherche incroyablement complexe de la source d'un ensemble de donn√©es </li></ul><br>  Commen√ßons donc ... <br><a name="habracut"></a><br>  Ma jambe a involontairement trembl√© √† cause des vibrations: est-ce un t√©l√©phone ou tout simplement √ßa semblait?  - et un coup d'≈ìil rapide a trouv√© une lumi√®re bleue clignotante.  ¬´Je t'aime¬ª de ma femme.  Je suis imm√©diatement descendu en bas pour lui souhaiter une bonne nuit, car je connais la diff√©rence entre un message et un <i>message</i> .  C'est un peu comme le cryptage ou la st√©ganographie: tout le monde voit le texte, mais moi seul peut d√©coder les donn√©es cach√©es. <br><br>  Ma traduction n'est qu'un maillon d'une cha√Æne d'√©v√©nements √©tonnamment longue qui sont n√©cessaires pour envoyer et d√©crypter un message (¬´allez et dites bonne nuit¬ª) en moins de cinq secondes √† une distance d'environ 10 m√®tres. <br><br>  Apparemment, le message est n√© quelque part dans le cerveau de ma femme et s'est transform√© en mouvements des doigts, mais cette transmission du signal est le sujet d'un autre article.  Notre conversation commence au moment o√π son pouce a touch√© l'√©cran translucide et se termine lorsque la lumi√®re est tomb√©e sur ma r√©tine. <br><br><h1>  √Ä travers le miroir </h1><br>  √Ä chaque toucher de l'√©cran, une petite charge √©lectrique s'√©coule dans la main.  Comme le courant circule facilement dans le corps humain, les capteurs du t√©l√©phone enregistrent le changement de tension √† l'endroit o√π le doigt a touch√© l'√©cran.  Dans ce cas, des fluctuations de tension al√©atoires se produisent dans le reste de l'√©cran, donc l'algorithme d√©termine les fluctuations de tension maximales et suppose que c'est √† cet endroit que la personne a voulu appuyer avec son doigt. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6b6/e78/a47/6b6e78a47c281c7bd6ab664b26f14644.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">0. Capteur tactile capacitif</font></i> <br><br>  Alors, elle clique sur l'√©cran, en tapant une lettre √† la fois. <br><br> <code>I--love--you.</code> <br> <br>  Elle n'utilise pas de balayage (mais pour une raison quelconque, elle imprime toujours plus vite que moi).  Le t√©l√©phone enregistre de mani√®re fiable les coordonn√©es (x, y) de chaque pression et v√©rifie les coordonn√©es de chaque touche √† l'√©cran.  C'est plus difficile que vous ne le pensez;  Parfois, le doigt glisse, mais le t√©l√©phone comprend que ce n'est pas un geste, mais simplement un clic flou. <br><br>  Au plus profond des entrailles m√©talliques de l'appareil, l'algorithme v√©rifie que chaque fois qu'un changement de tension couvre plus d'un certain nombre de pixels, ce qui est appel√© une <i>pente tactile</i> .  Si la zone est petite, le t√©l√©phone enregistre une frappe, pas un balayage. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ef3/fdf/3b4/ef3fdf3b4e547d827bef38d59a443fcc.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">1. Code Android pour d√©tecter la pente tactile.</font></i>  <i><font color="gray">Veuillez noter que les d√©veloppeurs connaissaient le sexe de ma femme</font></i> <br><br>  Elle termine le message, path√©tique 10 caract√®res sur 160 autoris√©s. <br><br>  160 caract√®res est un nombre soigneusement v√©rifi√©.  Selon la l√©gende, en 1984, un ing√©nieur t√©l√©phonique allemand Friedhelm Hillebrand s'est assis devant une machine √† √©crire et a √©crit autant de phrases al√©atoires qu'il lui √©tait venu √† l'esprit.  Ensuite, son √©quipe a examin√© les cartes postales et les messages t√©l√©scripteurs - et a constat√© que la plupart d'entre eux ne d√©passaient pas 160 caract√®res.  "Eureka!"  - Apparemment, ils ont cri√© en allemand avant de fixer la limite de caract√®res dans les messages texte pour les trois prochaines d√©cennies. <br><br><h1>  Restrictions et l√©gendes des symboles </h1><br>  Les l√©gendes racontent rarement toute l'histoire, et les SMS ne font pas exception.  Hillebrand et son √©quipe esp√©raient transmettre des messages via un canal suppl√©mentaire que les t√©l√©phones avaient d√©j√† utilis√© pour √©changer des informations avec la station de base. <br><br>  Le syst√®me de signalisation SS7 est un ensemble de protocoles utilis√©s par les t√©l√©phones portables pour rester en contact constant avec une station de base;  ils ont besoin d'une connexion constante pour recevoir un appel et transf√©rer leur position, v√©rifier la messagerie vocale, etc. Lors du d√©veloppement du protocole en 1980, ils ont introduit une limite stricte de 279 octets d'informations.  Si Hillebrand voulait recevoir des messages texte en utilisant le protocole SS7, il aurait d√ª entrer dans cette restriction. <br><br>  En r√®gle g√©n√©rale, 279 octets correspondent √† 279 caract√®res.  Il y a 8 bits dans un octet, et dans les codages g√©n√©raux, un caract√®re correspond √† un octet. <br><br>  Un <br><br> <code>0100 0001</code> <br> <br>  B <br><br> <code>0100 0010</code> <br> <br>  Avec <br><br> <code>0100 0011</code> <br> <br>  et ainsi de suite. <br><br>  Malheureusement, pour transmettre un message en utilisant le protocole SS7, vous ne pouvez pas simplement envoyer 2232 z√©ros et unit√©s (279 octets de 8 bits) avec un signal radio d'un t√©l√©phone √† un autre.  Ce message doit inclure les num√©ros de l'exp√©diteur et du destinataire, ainsi que le message de service de la station de base "H√©, ce message, pas un appel, n'envoie pas de signal d'appel!" <br><br>  Au moment o√π Hillebrand et ses coll√®gues ont r√©ussi √† rassembler tous les bits de contexte n√©cessaires dans un signal de 279 octets, il ne leur restait plus que 140 octets ou 1120 bits. <br><br>  Mais que se passe-t-il si vous encodez un caract√®re en seulement 7 bits?  Ensuite, vous pouvez ins√©rer 160 (1120/7 = 160) caract√®res dans chaque message, mais une telle r√©duction n√©cessite un sacrifice: moins de caract√®res possibles. <br><br>  L'encodage √† huit bits autorise 256 caract√®res possibles: un endroit est en minuscule 'a', un en majuscule 'A', sa place dans l'espace et le symbole '@', saut de ligne et ainsi de suite, jusqu'√† 256. Pour restreindre l'alphabet √† sept bits, vous devez supprimer certains symboles: symbole 1/2 (¬Ω), symbole de degr√© (¬∞), symbole de pi (œÄ) et ainsi de suite.  Mais en supposant que les gens n'utilisent jamais ces caract√®res dans le texte (une mauvaise hypoth√®se, bien s√ªr), Gillebrand et ses coll√®gues ont r√©ussi √† mettre 160 caract√®res en 140 octets.  √Ä son tour, ce volume tient exactement dans 279 octets du signal SS7: exactement le nombre de caract√®res qui √©taient pr√©c√©demment d√©finis comme la longueur de message id√©ale. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/347/d87/15b/347d8715b23e4e60c82d0570b4baffbb.png"><img src="https://habrastorage.org/getpro/habr/post_images/553/47d/5e4/55347d5e47cd1add4f05f01a3e08dba8.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">2. Jeu de caract√®res GSM-7</font></i> <br><br>  Et puis la femme tape ¬´Je t'aime¬ª, et le t√©l√©phone convertit les lettres en un sch√©ma de codage 7 bits appel√© GSM-7. <br><br>  ¬´I¬ª (l'intersection de la quatri√®me colonne et de la neuvi√®me ligne du tableau): <br><br> <code>49</code> <br> <br>  Espace (l'intersection de la deuxi√®me colonne et de la ligne z√©ro): <br><br> <code>20</code> <br> <br>  "L" = <br><br> <code>6C</code> <br> <br>  "O" = <br><br> <code>6F</code> <br> <br>  et ainsi de suite √† son tour. <br><br>  En g√©n√©ral, son message se transforme en la s√©quence suivante: <br><br> <code>49 20 6C 6F 76 65 20 79 6F 75</code> <br> <br>  (10 octets au total).  Chaque code √† deux caract√®res, appel√© code hexad√©cimal (hex), repr√©sente un fragment de huit bits et, ensemble, il sonne comme "Je t'aime". <br><br>  Mais en fait, le message n'est pas aussi stock√© sur le t√©l√©phone.  Il doit convertir du texte 8 bits en code 7 bits.  √Ä la suite de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=http://web.archive.org/web/20081017024616/">conversion, le</a> message commence √† changer comme suit: <br><br> <code>49 10 FB 6D 2F 83 F2 EF 3A</code> <br> <br>  (9 octets) dans son t√©l√©phone. <br><br>  Lorsque la femme a finalement termin√© son message (cela ne prend que quelques secondes), elle clique sur "Envoyer" - et de nombreux petits anges re√ßoivent le message cod√©, battent leurs ailes invisibles √† 10 m√®tres de mon bureau et le transf√®rent soigneusement sur mon t√©l√©phone.  Le processus n'est pas tr√®s simple, c'est pourquoi mon t√©l√©phone vibre un peu √† la livraison. <br><br>  Les soi-disant ¬´ing√©nieurs en communication¬ª vous raconteront une histoire diff√©rente, et par souci d'exhaustivit√©, je la raconterai, mais si j'√©tais vous, je ne ferais pas trop confiance √† ces gens. <br><br><h1>  SIM √† envoyer </h1><br>  L'ing√©nieur dira que lorsque le t√©l√©phone d√©tecte un changement de tension dans les coordonn√©es √† l'√©cran qui co√Øncide avec les coordonn√©es de l'√©l√©ment graphique avec le bouton "Envoyer", il envoie un message cod√© √† la carte SIM et ajoute diverses donn√©es contextuelles pendant le transfert.  Lorsque le message arrive sur la carte SIM de ma femme, il n'y a d√©j√† pas 140, mais 176 octets (texte + contexte). <br><br>  36 octets suppl√©mentaires sont utilis√©s pour coder d'autres informations, comme indiqu√© ci-dessous. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8ba/64d/ced/8ba64dced4f26bd4db2bd01cb10daac9.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">3. Ici, les octets sont appel√©s octets (8 bits).</font></i>  <i><font color="gray">Tout compter donne 174 octets (10 + 1 + 1 + 12 + 1 + 1 + 7 + 1 + 140).</font></i>  <i><font color="gray">Les deux octets restants sont r√©serv√©s √† la comptabilit√© des cartes SIM</font></i> <br><br>  Les dix premiers octets sont r√©serv√©s au num√©ro de t√©l√©phone (SCA) du centre SMS (SMSC), qui est responsable de la r√©ception, du stockage, du transfert et de la livraison des messages texte.  En fait, c'est un interrupteur: le t√©l√©phone de la femme envoie un signal √† la tour cellulaire locale, qui envoie un SMS √† SMSC.  Le centre SMS, qui dans notre cas est contr√¥l√© par AT&amp;T, envoie le texte √† la station de base la plus proche de mon t√©l√©phone.  Alors que je m'assois dans trois pi√®ces de ma femme, le message est renvoy√© √† la m√™me station de base, puis √† mon t√©l√©phone. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5f3/2f4/74e/5f32f474eae14a1b1d10f8f1a9baf4e0.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">4. R√©seau SMS cellulaire</font></i> <br><br>  L'octet suivant (type PDU) code les informations de base sur la fa√ßon dont le t√©l√©phone doit interpr√©ter le message: s'il a √©t√© envoy√© avec succ√®s, si un message de remise est n√©cessaire et (important) s'il s'agit d'un texte unique ou d'une partie d'une cha√Æne de messages associ√©s. <br><br>  L'octet apr√®s le type PDU est une r√©f√©rence de message (MR).  Ce num√©ro de 1 √† 255, en fait, est utilis√© comme identifiant √† court terme pour que le t√©l√©phone et l'op√©rateur reconnaissent le message.  Le message de l'√©pouse est mis √† 0, car son t√©l√©phone poss√®de son propre syst√®me d'identification des messages, ind√©pendant de ce fichier particulier. <br><br>  Les douze octets suivants sont r√©serv√©s au num√©ro de t√©l√©phone du destinataire, qui est appel√© l'adresse de destination (DA).  √Ä l'exception de l'encodage de texte 7 bits, qui permet de compresser 160 lettres en 140 caract√®res, l'encodage du num√©ro de t√©l√©phone est la chose la plus stupide et la plus d√©routante de ce SMS.  Il est appel√© notation de grignotage invers√© et convertit chaque chiffre en grignotage, c'est-√†-dire grignotage, et les √©change (Comprenez-vous tout? Un demi-octet est un grignotage, hahahahaha, mais personne ne rit, ce sont des ing√©nieurs). <br><br>  Mon num√©ro 1-352-537-8376 dans le t√©l√©phone de ma femme est enregistr√© comme: <br><br>  3125358773f6 <br><br>  1-3 se transforme en <br><br> <code>31</code> <br> <br>  52 se transforme en <br><br> <code>25</code> <br> <br>  53 se transforme en <br><br> <code>35</code> <br> <br>  7-8 se transforme en <br><br> <code>87</code> <br> <br>  37 se transforme en <br><br> <code>73</code> <br> <br>  Et les 6 derniers se transforment en ... <br><br> <code>f6</code> <br> <br>  Qu'est-ce que ces six ont pris?  Eh bien, cela signifie la fin du nombre, mais pour une raison terrible (encore une fois, la notation inverse), c'est un caract√®re avant le dernier chiffre. <br><br>  C'est comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´piggy latin¬ª,</a> uniquement pour les chiffres. <br><br> <code>   ,   .    ,   .</code> <br> <br>  Mais je ne plaisante pas. <br><br>  [UPD: Sean Gies a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">soulign√©</a> que l'√©criture de grignotage est un artefact in√©vitable de repr√©sentation des nombres de 4 bits du plus petit au plus ancien (petit-boutien) fragments de 8 bits.  Cela ne nie pas la description ci-dessus, mais ajoute un peu de contexte pour ceux qui comprennent et rend la d√©cision plus raisonnable]. <br><br>  L'octet d'identificateur de protocole (PID) est maintenant, dans l'ensemble, gaspill√©.  Il prend environ 40 valeurs possibles et indique au fournisseur comment envoyer un message.  Valeur <br><br> <code>22</code> <br> <br>  signifie que la femme envoie "Je t'aime" au fax, et la valeur <br><br> <code>24</code> <br> <br>  signifie qu'elle l'envoie en quelque sorte √† la ligne vocale.  √âtant donn√© que ce message est sous forme de SMS vers le t√©l√©phone, le PID est d√©fini sur <br><br> <code>0</code> <br> <br>  (Comme tout autre texte envoy√© dans le monde moderne). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ac7/b49/579/ac7b495795883450f653cf12cc5c2bcb.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">5. Valeurs PID possibles</font></i> <br><br>  L'octet suivant est un sch√©ma de codage de donn√©es (DCS, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voir la documentation</a> ), qui indique √† l'op√©rateur et au t√©l√©phone du destinataire quel sch√©ma de codage de caract√®res a √©t√© utilis√©.  Ma femme a envoy√© le texte au GSM-7, mais il est facile d'imaginer que le texte pourrait √™tre tap√© en cyrillique, en hi√©roglyphes ou en √©quations math√©matiques complexes (enfin, ce n'est peut-√™tre pas facile √† imaginer, mais tout le monde a le droit de r√™ver, non?). <br><br>  Dans le texte de l'√©pouse, l'octet DCS est d√©fini sur <br><br> <code>0</code> <br> <br>  ce qui correspond √† un alphabet 7 bits, mais la valeur peut √™tre modifi√©e en un alphabet 8 ou 16 bits, bien que cela laisse beaucoup moins d'espace pour les caract√®res.  Soit dit en passant, c'est pourquoi vos emojis r√©duisent le nombre de caract√®res disponibles. <br><br>  Il y a toujours un petit drapeau dans l'octet DCS qui indique au t√©l√©phone si le message doit √™tre auto-d√©truit apr√®s l'envoi, comme dans le film Mission Impossible, donc c'est tr√®s cool. <br><br>  La p√©riode de validit√© (VP) prend jusqu'√† sept octets et nous donne l'occasion de se familiariser avec un autre aspect du fonctionnement du syst√®me de transfert SMS.  Jetez un autre coup d'oeil √† la figure 4 en haut.  √áa va, j'attendrai. <br><br>  Ainsi, lorsque la femme clique enfin sur le bouton ¬´Envoyer¬ª, le texte est envoy√© au centre SMS (SMSC), qui m'envoie alors un message.  Je suis assis au deuxi√®me √©tage et mon t√©l√©phone est allum√©, donc je re√ßois un message en quelques secondes, mais que faire si le t√©l√©phone est √©teint?  Bien s√ªr, alors il ne peut pas accepter le message, donc le SMSC doit faire quelque chose avec le texte. <br><br>  Si SMSC ne trouve pas mon t√©l√©phone, le message de ma femme sautera simplement dans le syst√®me jusqu'√† ce que mon t√©l√©phone se connecte - puis le centre SMS enverra imm√©diatement le texte.  J'aime imaginer comment SMSC v√©rifie constamment chaque t√©l√©phone du r√©seau pour v√©rifier si c'est mon t√©l√©phone ou non: comment un chiot attendant le propri√©taire √† la porte renifle-t-il chaque passant: est-ce l'odeur de ma personne?  Non.  C'est peut <i>-</i> √™tre <i>l'</i> odeur de mon homme?  Non.  Est-ce l'odeur de mon homme?  DADAPRIGUATURE !!! <br><br>  Les octets de p√©riode de validit√© (VP) indiquent au syst√®me combien de temps le chiot attendra avant de s'ennuyer et de trouver une nouvelle maison.  Il s'agit soit d'un horodatage, soit d'un √©cart, et il dit essentiellement: "Si vous n'avez pas trouv√© le t√©l√©phone du destinataire dans les prochains jours, ne vous inqui√©tez pas d'envoyer un message."  Par d√©faut, la p√©riode de validit√© des SMS est de 10 080 minutes, donc si le t√©l√©phone ne se connecte pas au r√©seau dans les sept jours, il ne recevra jamais ce SMS. <br><br>  √âtant donn√© que les SMS ont souvent beaucoup d'espace vide, quelques bits sont d√©di√©s pour garantir que le t√©l√©phone et l'op√©rateur savent exactement quels octets ne sont pas utilis√©s.  La carte SIM de l'√©pouse attend un SMS de 176 octets, mais elle a √©crit un message tr√®s court, donc si la carte SIM ne re√ßoit que 45 octets, cela peut devenir confus et sugg√©rer une sorte d'√©chec.  L'octet de longueur de donn√©es utilisateur (UDL) r√©sout ce probl√®me: il indique avec pr√©cision le nombre d'octets dans le message texte. <br><br>  Dans le cas de ¬´Je t'aime¬ª, l'UDL indiquera que le message contient 9 octets.  Vous pouvez vous attendre √† ce que la valeur soit de 10 octets, un octet pour chacun des dix caract√®res: <br><br> <code>I-spacebar-love-spacebar-you</code> <br> <br>  mais comme chaque caract√®re se compose de sept bits et non de huit (octet entier), vous pouvez r√©initialiser l'octet suppl√©mentaire lors de la traduction: 7 bits * 10 caract√®res = 70 bits, diviser par 8 (le nombre de bits dans un octet) = 8,75 octets, arrondi jusqu'√† 9 octets. <br><br>  Nous arrivons √† la derni√®re partie de SMS: c'est le message lui-m√™me ou UD (donn√©es utilisateur).  Un message peut prendre jusqu'√† 140 octets, bien que, comme je viens de le mentionner, ¬´Love you¬ª en prenne un mis√©rable 9. C'est incroyable la quantit√© contenue dans ces 9 octets: pas seulement un message (l'amour pr√©sum√© de ma femme pour moi, qui est d√©j√† assez difficile √† compresser en z√©ros). et les unit√©s), mais aussi le sens lui-m√™me (vous devez descendre et lui souhaiter bonne nuit).  Ces octets sont: <br><br> <code>49 10 FB 6D 2F 83 F2 EF 3A</code> <br> <br>  En g√©n√©ral, ce message est enregistr√© sur la carte SIM de ma femme: <br><br>  SCA [1-10] -PDU [1] -MR [1] -DA [1-12] -DCS [1] -VP [0, 1 ou 7] -UDL [1] -UD [0-140] <br><br> <code>00 - 11 - 00 - 07 31 25 35 87 73 F6 - ?? 00 ?? - ?? - 09 - 49 10 FB 6D 2F 83 F2 EF 3A</code> <br> <br>  (Remarque: pour obtenir le message complet, vous devez creuser un peu plus. H√©las, seule une <i>partie du</i> message est visible ici en raison de caract√®res non affich√©s, de points d'interrogation) <br><br><h1>  Des vagues dans l'air </h1><br>  Maintenant, les SMS devraient en quelque sorte commencer leur voyage difficile de la carte SIM √† la station de base la plus proche.  Pour ce faire, le t√©l√©phone de l'√©pouse doit convertir la cha√Æne de 176 √† 279 octets pour le protocole de signalisation SS7, convertir ces octets num√©riques en un signal radio analogique, puis envoyer les signaux √† l'air avec une fr√©quence comprise entre 800 et 2000 MHz.  Cela signifie qu'entre les sommets des vagues, la distance est de 15 √† 37 cm. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b16/5d2/dcd/b165d2dcd67927e07e7a08279e62e1dc.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">6. La longueur d'onde</font></i> <br><br>  Pour une transmission et une r√©ception efficaces des signaux, l'antenne doit avoir au moins la moiti√© de la longueur d'onde.  Si les ondes de communication cellulaire sont de 15 √† 37 cm, alors les antennes devraient avoir une taille d'environ 7 √† 19 cm. Arr√™tez-vous maintenant et r√©fl√©chissez √† la hauteur moyenne du t√©l√©phone mobile, et pourquoi elle ne diminue jamais. <br><br>  Gr√¢ce √† une certaine gymnastique num√©rique, dont l'explication prendra trop de temps, le t√©l√©phone de ma femme tire soudainement un paquet d'informations de 279 octets avec le texte "Je t'aime" √† la vitesse de la lumi√®re dans toutes les directions, qui s'estompe finalement et se dissout dans le bruit de la radio apr√®s environ 50 kilom√®tres. <br><br>  Bien avant cela, le signal atteint la station de base AT&amp;T HSPA ID199694204 LAC21767.  Cette station √©mettrice-r√©ceptrice de base (BTS) se trouve √† environ cinq p√¢t√©s de maisons de ma boulangerie La Gourmandine pr√©f√©r√©e √† Hazelwood, et bien que j'aie trouv√© ses coordonn√©es √† l'aide de l'application Android OpenSignal, l'antenne est bien cach√©e des regards indiscrets. <br><br>  La chose la plus surprenante ici est que le BTS re√ßoit g√©n√©ralement ce signal, compte tenu de tout le reste.  Non seulement ma femme envoie "Love You" dans la milli√®me partie du spectre √©lectromagn√©tique, mais des dizaines de milliers d'autres personnes dans un rayon de 50 kilom√®tres en ce moment parlent au t√©l√©phone ou √©crivent des messages.  De plus, de nombreux signaux de radio et de t√©l√©vision plaident pour notre attention sur l'air, ainsi que la lumi√®re visible qui est r√©fl√©chie dans diff√©rentes directions, ce n'est qu'une petite partie des ondes √©lectromagn√©tiques, qui, semble-t-il, devraient interf√©rer avec le BTS. <br><br>  Comme le disait avec √©loquence Richard Feynman en 1983, une tour cellulaire est comme un petit scarab√©e aveugle couch√© dans l'eau au bord de la piscine: ce n'est que par la hauteur et la direction des vagues qu'il d√©termine qui et o√π nage. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/1qQQXTMih1A" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><font color="gray">Feynman parle des vagues</font></i> <br><br>  En partie √† cause de l'interf√©rence complexe des signaux, chaque station de base de l'√©metteur-r√©cepteur ne peut g√©n√©ralement pas traiter plus de 200 utilisateurs actifs (voix ou donn√©es) en m√™me temps.  Ainsi, ¬´Love You¬ª envoie un signal √† la station de base locale √† environ 800 m√®tres d'ici, puis crie dans le vide dans toutes les directions jusqu'√† ce qu'il disparaisse dans le bruit g√©n√©ral. <br><br><h1>  Commutation </h1><br>  Compte tenu de toutes les circonstances, j'ai eu beaucoup de chance.  Si ma femme et moi √©tions servis par diff√©rents op√©rateurs de t√©l√©phonie mobile ou si nous √©tions dans des villes diff√©rentes, l'itin√©raire de sa communication deviendrait beaucoup plus long. <br><br>  Un message SS7 de 277 octets arrive au BTS local √† c√¥t√© de la boulangerie.  De l√†, il entre dans le contr√¥leur de la station de base (BSC), qui est le cerveau non seulement du n√¥tre, mais aussi de plusieurs autres antennes locales.  Le BSC transf√®re le texte au Pittsburgh AT&amp;T Mobile Switching Center (MSC), qui s'appuie sur un message texte SCA (rappelez-vous l'adresse du centre de service int√©gr√©e dans chaque SMS? Est-ce l√† o√π vous en avez besoin) pour recevoir le message dans le centre SMS correspondant (SMSC). <br><br>  Ce charabia est plus facile √† comprendre en utilisant le diagramme de la figure 7;  Je viens de d√©crire les √©tapes 1 et 3. Si la femme √©tait avec un autre op√©rateur, nous passerions aux √©tapes 4 √† 7, car c'est l√† que les op√©rateurs mobiles se parlent.  Les SMS doivent provenir de SMSC vers le commutateur mondial, puis parcourir potentiellement le monde avant de trouver un moyen d'acc√©der √† mon t√©l√©phone. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8c9/13d/e41/8c913de41b9e230bbcddc4f6ddfb1435.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">7. Routage GSM</font></i> <br><br>  Mais elle si√®ge √©galement sur AT&amp;T, et nos t√©l√©phones sont connect√©s √† la m√™me cellule, donc apr√®s la troisi√®me √©tape, le paquet d'amour de 279 octets est simplement d√©ploy√© et renvoy√© via le m√™me centre SMS, via la m√™me station de base, mais maintenant sur mon t√©l√©phone √† la place elle.  Parcourant plusieurs dizaines de kilom√®tres en un rien de temps. <br><br><h1>  Sent-to-sim </h1><br>  Bzzzzz.  La poche vibra.  La notification indique clairement que le SMS est arriv√© sur la carte nano-SIM, une toute petite puce de la taille d'un petit doigt.  Comme Bilbo Baggins ou tout bon aventurier, il a un peu chang√© en cours de route. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/687/031/783/6870317839d63f2eec68a64e76574097.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">8. Le message re√ßu diff√®re de celui envoy√© (Fig. 3)</font></i> <br><br>  La figure 8 montre la structure du message re√ßu ¬´Je t'aime¬ª.  En comparant les figures 3 et 8, nous voyons plusieurs diff√©rences.  SCA (num√©ro du centre SMS), PDU (certains rangements m√©caniques), PID ("du t√©l√©phone au t√©l√©phone", pas "du t√©l√©phone au fax"), DCS (sch√©ma de codage), UDL (longueur du message) et UD (lui-m√™me message) est rest√© inchang√©, mais VP (p√©riode de validit√©), MR (num√©ro d'identification du message) et DA (mon num√©ro de t√©l√©phone) sont manquants. <br><br>  Au lieu de cela, deux nouveaux blocs d'informations sont apparus sur le t√©l√©phone: OA (le num√©ro de t√©l√©phone d'origine de l'√©pouse) et SCTS (horodatage du centre SMS. C'est-√†-dire lorsque l'√©pouse a envoy√© le message). <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le num√©ro de t√©l√©phone de ma femme est stock√© dans la m√™me notation inverse g√™nante (comme la dyslexie, uniquement sur les ordinateurs), dans laquelle mon num√©ro a √©t√© stock√© sur son t√©l√©phone, et l'horodatage est au m√™me format que la date d'expiration stock√©e sur son t√©l√©phone. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ces deux remplacements sont tout √† fait logiques. </font><font style="vertical-align: inherit;">Son t√©l√©phone √©tait cens√© me contacter √† un certain moment √† une adresse sp√©cifique, et maintenant j'ai besoin de savoir qui a envoy√© le message et quand. </font><font style="vertical-align: inherit;">Sans adresse de retour, je ne comprendrais pas exactement qui a envoy√© ce message, donc son interpr√©tation pourrait changer consid√©rablement.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √âcran lumineux </font></font></h1><br>          (x,y)    ,       <br><br> <code>49 10 FB 6D 2F 83 F2 EF 3A</code> <br> <br>       ¬´ ¬ª  -  .   ,       ,       .   ,       . <br><br>    Samsung    Super AMOLED (Active Matrix Organic Light-Emitting Diode) ‚Äî     ,  -     ,              . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sur chacun des 83 centim√®tres carr√©s de l'√©cran, environ 50 000 pixels minuscules tiennent sur mon t√©l√©phone. Pour qu'une telle quantit√© s'adapte, chaque pixel doit avoir une largeur d'environ 45 microns (microm√®tres): plus mince que les cheveux humains. Quatre millions d'√©l√©ments lumineux dans une zone de la taille d'un palmier. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais vous savez d√©j√† comment fonctionnent les √©crans. Vous savez que chaque point du monde, comme le Dieu chr√©tien ou les mousquetaires (moins d'Artagnan) est toujours ¬´trois en un¬ª. Le rouge, le vert et le bleu forment la lumi√®re blanche d'un pixel. Si vous modifiez la luminosit√© de chaque canal, vous pouvez obtenir n'importe quelle couleur RVB. Et puisque 4 √ó 3 = 12, ce sont 12 millions de minuscules sources lumineuses, somnolant innocemment derri√®re mon miroir noir, attendant que j'appuie sur le bouton d'alimentation pour lire un message de ma femme.</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f0b/9ad/9da/f0b9ad9dabfa0c5ee715be484684ac13.png"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 9. Tableau de sous-pixels de l'√©cran Samsung OLED</font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Comme indiqu√© dans l'abr√©viation, chaque pixel est une LED organique. Il s'agit d'un jargon technique incompr√©hensible pour un simple sandwich √©lectrique:</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/22d/87c/aeb/22d87caebf3da5cd94ef88482c453b6a.png"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fig. 10. Sandwich √©lectrique Il</font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'est pas n√©cessaire d'√©tudier le but de chaque couche, il est seulement important de savoir que la cathode (plaque charg√©e n√©gativement) est situ√©e sous une couche de mol√©cules organiques (juste quelques mol√©cules avec du carbone), et est recouverte d'une anode (plaque charg√©e positivement) sur le dessus.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque le t√©l√©phone veut allumer l'√©cran, il envoie des √©lectrons de la cathode √† l'anode. Les mol√©cules du milieu re√ßoivent une charge et commencent √† √©mettre de la lumi√®re visible - des photons, √† travers l'anode transparente, l'√©cran dans mes yeux ouverts.</font></font><br><br>    ‚Äî     (,   ),        .     ,    : --   ,     ---  .      ,        . <br><br> ( :      -    ¬´- ¬ª,    ,   ?) <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les quatre millions de pixels sont situ√©s sur la matrice d'index. Un index fonctionne sur un ordinateur de la m√™me mani√®re qu'une table des mati√®res dans un livre: lorsqu'un t√©l√©phone veut qu'un pixel sp√©cifique √©mette une couleur sp√©cifique, il recherche ce pixel dans l'index puis envoie un signal √† l'adresse trouv√©e. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que la lumi√®re soit et la lumi√®re devienne.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Autre fait amusant: vous savez maintenant ce que signifie ¬´matrice active sur LED organiques¬ª AMOLED, bien que vous ne l'ayez pas demand√©). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le syst√®me d'exploitation du t√©l√©phone interpr√®te un SMS de sa femme, d√©termine la forme de chaque lettre et compare ces chiffres avec une matrice d'index. Elle envoie les bonnes impulsions √©lectriques √† l'√©cran Super AMOLED pour afficher ces trois petits mots qui ont voyag√© jusqu'ici et ont vaincu tous les ennemis sur leur chemin.</font></font><br><br>   ,           :   -.       ,   ,   ,       ,    ,    .    . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fc8/3ca/577/fc83ca577a50c7267235834232f6cb51.png"><br> <i><font color="gray">. 11.  </font></i> <br><br>  , <i></i>             ,    ,      :   ‚Äî  <i></i> .       . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et ce ne sont pas seulement des interm√©diaires techniques. Un message de ma femme ne m'atteindrait pas si je n'avais pas pay√© ma facture de t√©l√©phone √† temps, si ce n'√©tait de la petite arm√©e de travailleurs qui servent les syst√®mes financiers en coulisses. Les techniciens maintiennent les tours de cellules op√©rationnelles, auxquelles ils acc√®dent via un r√©seau de routes partiellement subventionn√© par des taxes f√©d√©rales per√ßues aupr√®s de centaines de millions d'Am√©ricains dans 50 √âtats. √âtant donn√© que de nombreuses transactions se produisent toujours par courrier, si le syst√®me de courrier tombe en panne demain, le service t√©l√©phonique sera √©galement endommag√©. Les d√©tails de nos deux t√©l√©phones ont √©t√© collect√©s par des travailleurs √©puis√©s dans des usines en Am√©rique du Sud et en Asie, et les programmeurs √©puis√©s qui louent des chambres ch√®res dans la Silicon Valley ont √©crit un code qui garantit une communication constante pour nos t√©l√©phones.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tout cela est cach√© dans 10 lettres. </font><font style="vertical-align: inherit;">Le texte, qui, pour √™tre honn√™te, signifie bien plus que ce qui y est √©crit. </font><font style="vertical-align: inherit;">Mon cerveau analyse inconsciemment les ann√©es de communication avec ma femme pour d√©chiffrer le message au t√©l√©phone, mais entre elle et moi, il y a encore des fourr√©s entiers de m√©diation sociotechnique - un bouillon de personnes, d'√©v√©nements et de d√©tails qui ne peuvent jamais √™tre d√©voil√©s.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Les cons√©quences </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et me voici, dans mon bureau, un dimanche soir tard. </font><font style="vertical-align: inherit;">¬´Je t'aime¬ª, a √©crit la femme depuis la chambre en bas, et apr√®s quelques secondes, un message est venu sur mon t√©l√©phone √† dix m√®tres. </font><font style="vertical-align: inherit;">Je comprends ce que cela signifie: il est temps de lui souhaiter une bonne nuit et peut-√™tre de terminer cet article. </font><font style="vertical-align: inherit;">J'√©cris les derniers mots, maintenant un peu plus conscients de la superposition complexe de kilom√®tres, de signaux, de d√©cennies d'histoire et de sueur humaine, qui √©taient n√©cessaires pour que ma femme ne me crie pas autant qu'il √©tait temps de se reposer.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr437510/">https://habr.com/ru/post/fr437510/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr437496/index.html">√Ä propos des variables dans la programmation</a></li>
<li><a href="../fr437500/index.html">√Ä propos des choses ¬´invisibles¬ª importantes - confiance, culture et valeurs</a></li>
<li><a href="../fr437502/index.html">Je vais arr√™ter de jeter le bon √† la poubelle</a></li>
<li><a href="../fr437504/index.html">Petits composants: qu'est-ce qui pourrait mal tourner? Nous utilisons le principe de l'enti√®re responsabilit√©</a></li>
<li><a href="../fr437508/index.html">CVE-2019-6111 et autres vuln√©rabilit√©s scp</a></li>
<li><a href="../fr437512/index.html">Quelles sont les fonctions pures en JavaScript?</a></li>
<li><a href="../fr437514/index.html">Recherche d'erreurs dans le code source du SDK Amazon Web Services pour .NET</a></li>
<li><a href="../fr437516/index.html">Recherche de bogues dans le code source Amazon Web Services SDK for .NET</a></li>
<li><a href="../fr437518/index.html">Attaque des col√©opt√®res</a></li>
<li><a href="../fr437520/index.html">¬´Ma lumi√®re est un miroir! - dites-moi, montrez-moi mon double ... ": concevez un bon cadre et obtenez le second en cadeau</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>