<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóº üë©üèø‚Äçü§ù‚Äçüë®üèæ üë©üèø‚Äçüíª Ein Beitrag mit wei√üer Flagge oder Wie ich Ihren Videokurs vor dem Erscheinen auf dem Tracker gespeichert habe üë∂ üôã üÜï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Hmm, ich habe das Gef√ºhl, wir haben uns schon getroffen ... Ah, ja. In diesem Beitrag haben wir ausf√ºhrlich diskutiert, ob es akzeptabel i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ein Beitrag mit wei√üer Flagge oder Wie ich Ihren Videokurs vor dem Erscheinen auf dem Tracker gespeichert habe</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450344/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/tn/c2/w_/tnc2w_eanffeyudfj7cl9wzsil4.jpeg" alt="Captain_barbossa.jpg"></div><br>  Hallo Habr!  Hmm, ich habe das Gef√ºhl, wir haben uns schon getroffen ... Ah, ja.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">In</a> diesem Beitrag haben wir ausf√ºhrlich diskutiert, ob es akzeptabel ist, die Umgebung zu √ºberwachen, den Benutzer auf die Anzahl der anzuzeigenden Ger√§te zu beschr√§nken, ausf√ºhrbare Dateien anstelle von bezahlten Videos bereitzustellen und sich bei der Organisation des "Schutzes" von Videokursen vor Piraterie in jeder Hinsicht anders zu verhalten. <br><br>  Und alles w√§re in Ordnung, aber es ist einfach unm√∂glich zu kritisieren, ohne daf√ºr eine L√∂sung vorzuschlagen.  <i>"Kannst du es besser machen?"</i>  - Ausrufe aus den Kommentaren wurden geh√∂rt.  <i>"Es w√§re besser, einen Landsmann zu unterst√ºtzen und dabei zu helfen, sein Produkt besser zu machen!"</i>  - Ich erz√§hle kurz einige allgemeine Gedanken.  Fair.  Also kann <b>ich es wirklich besser machen</b> .  Zumindest wird mein Vorschlag nicht erfordern, dass der Endbenutzer krumme Software anstelle der erwarteten Videodateien ausf√ºhrt. <br><a name="habracut"></a><br><h3>  <font color="#4682b4">L√∂sung f√ºr alle Probleme</font> </h3><br>  Und die L√∂sung ist die trivialste, Freunde: Wasserzeichen.  Ja, nur Wasserzeichen.  Anstatt komplexe Mechanismen f√ºr die Bindung an ein bestimmtes Ger√§t zu entwickeln, ‚Äûsignieren‚Äú Sie die Videosequenz.  Das ist alles <br><br>  Welche Eigenschaften sollte ein Wasserzeichen haben, um eine Verteidigungsfunktion zu erf√ºllen: <br><br><ol><li>  Das Wasserzeichen sollte Informationen enthalten, die den Benutzer, der den Videokurs gekauft hat, eindeutig identifizieren.  Dies kann ein Aktivierungsschl√ºssel sein, der an den Benutzer ausgegeben wird, oder das Login des Benutzers, das bei der Registrierung auf der Kaufwebsite des Videokurses erhalten wurde, oder Zeitstempel, die dem Zeitpunkt des Kaufs des Kurses entsprechen (nat√ºrlich, wenn Sie sie eindeutig mit der Identit√§t des K√§ufers korrelieren k√∂nnen), oder irgendetwas aus dieser Oper. </li><li>  Das Wasserzeichen sollte den gr√∂√üten Teil des Rahmens bedecken, damit es nicht ohne gr√∂√üere Verluste f√ºr den Videokurs ausgeschnitten werden kann. </li><li>  Das Wasserzeichen-Overlay-Schema sollte f√ºr jede Kopie des Kurses zuf√§llig sein, damit der B√∂sewicht keine automatische Maschine zum Ausschneiden desselben Wasserzeichens schreibt. </li></ol><br>  Wenn Sie das Wasserzeichen sehr transparent machen, st√∂rt seine Anwesenheit den Benutzer nicht, aber es ist dennoch erw√§hnenswert, dies in der Kursbeschreibung <b>vor der Zahlung</b> zu erw√§hnen. <br><br>  Um aufschlussreiche Informationen zu extrahieren, m√ºsste ein potenzieller Pirat einem der unten beschriebenen Szenarien folgen: <br><br><ol><li>  Schneiden Sie das <b>gesamte</b> Wasserzeichen aus (denken Sie daran, dass das Wasserzeichen gem√§√ü der zweiten Eigenschaft den gesamten Bildschirm einnehmen und seine Schutzfunktionen auch dann ausf√ºhren sollte, wenn es teilweise gel√∂scht wird), wodurch der Videoclip ung√ºltig wird (meiner Meinung nach ist es logisch, dass in dem Fall, in dem es nicht die meisten gibt Video gibt es keinen Videowert). </li><li>  Bearbeiten Sie jedes Bild einzeln, um das Wasserzeichen zu entfernen, ohne das Video erheblich zu besch√§digen.  Die Komplexit√§t der manuellen Ausf√ºhrung einer solchen Aktion √ºbersteigt die Erstellung eines Videos von Grund auf neu, und gem√§√ü der dritten Eigenschaft hat der Eindringling keine M√∂glichkeit, den Prozess zu automatisieren. </li><li>  (?) Ich denke, Sie k√∂nnen ein intelligentes neuronales Netzwerk bitten, dies f√ºr Sie zu tun.  Obwohl nicht sicher, kein Spezialist, k√∂nnen Sie mich in den Kommentaren korrigieren. </li></ol><br><h3>  <font color="#4682b4">Proof of Concept</font> </h3><br>  In einer halben Stunde wurde ein triviales Skript mit 100 Zeilen erstellt, das die Einfachheit und Zug√§nglichkeit der Implementierung eines solchen Schutzes demonstriert.  <u>Ich betone</u> : <u>Um</u> nicht zu zeigen, wie schlau ich bin, sondern im Gegenteil, um festzustellen, dass eine Person, die weit von der Bildverarbeitung entfernt ist, in einer halben Stunde einen voll funktionsf√§higen Code (unter dem Spoiler) erstellen konnte, ist dies so einfach: <br><br><div class="spoiler">  <b class="spoiler_title">fckInfoprotectorV2.py</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python3 # -*- coding: utf-8 -*- # Usage: python3 fckInfoprotectorV2.py import os from shutil import rmtree import numpy as np import cv2 class VideoSigner: def __init__(self, video, watermark): os.makedirs('original') os.makedirs('watermarked') self.vidin = cv2.VideoCapture(video) self.fps = self.vidin.get(cv2.CAP_PROP_FPS) self.frame_size = ( int(self.vidin.get(cv2.CAP_PROP_FRAME_WIDTH)), int(self.vidin.get(cv2.CAP_PROP_FRAME_HEIGHT)) ) self.watermark = cv2.imread(watermark, cv2.IMREAD_UNCHANGED) self.wH, self.wW = self.watermark.shape[:2] B, G, R, A = cv2.split(self.watermark) B = cv2.bitwise_and(B, B, mask=A) G = cv2.bitwise_and(G, G, mask=A) R = cv2.bitwise_and(R, R, mask=A) self.watermark = cv2.merge([B, G, R, A]) def __del__(self): rmtree('original') rmtree('watermarked') def _split(self): print('[*] Splitting video by frames... ', end='', flush=True) (success, image), count = self.vidin.read(), 0 while success: path = os.path.join('original', f'{count}.jpg') cv2.imwrite(path, image) success, image = self.vidin.read() count += 1 print('Done') def _watermark(self): print('[*] Signing each frame... ', end='', flush=True) for image_name in sorted( os.listdir('original'), key=lambda x: int(x.split('.')[0]) ): image_path = os.path.join('original', image_name) image = cv2.imread(image_path) h, w = image.shape[:2] image = np.dstack([ image, np.ones((h, w), dtype='uint8') * 255 ]) overlay = np.zeros((h, w, 4), dtype='uint8') half_h_diff = (h - self.wH) // 2 half_w_diff = (w - self.wW) // 2 overlay[half_h_diff:half_h_diff + self.wH, half_w_diff:half_w_diff + self.wW] = self.watermark output = image.copy() cv2.addWeighted(overlay, 0.25, output, 1.0, 0, output) path = os.path.join('watermarked', image_name) cv2.imwrite(path, output) print('Done') def _merge(self): print('[*] Merging signed frames... ', end='', flush=True) self.vidout = cv2.VideoWriter( 'signed.avi', cv2.VideoWriter_fourcc(*'XVID'), fps=self.fps, frameSize=self.frame_size ) for image_name in sorted( os.listdir('watermarked'), key=lambda x: int(x.split('.')[0]) ): image_path = os.path.join('watermarked', image_name) image = cv2.imread(image_path) self.vidout.write(image) print('Done') def sign(self): self._split() self._watermark() self._merge() if __name__ == '__main__': signer = VideoSigner('SampleVideo_1280x720_1mb.mp4', 'watermark.png') signer.sign()</span></span></code> </pre> <br></div></div><br>  Das Ergebnis des Skripts in <a href="">diesem</a> Beispiel als Beispiel: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/s2/fm/yf/s2fmyf3leblxu89ohhwgfqr29-k.gif" alt="sample_original.gif"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vh/oy/qh/vhoyqhxu2-8-igsm3ihf1-yd4c4.gif" alt="sample_signed.gif"></div><br><br>  Nicht f√ºr Hype, sondern nur f√ºr das Gemeinwohl. <br><br>  Ich habe die Ehre. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de450344/">https://habr.com/ru/post/de450344/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de450330/index.html">Wahl einer Schule bei einem Umzug in die USA</a></li>
<li><a href="../de450332/index.html">Wie das Rendering von The Witcher 3 implementiert wird: Blitz, das Flair des Hexers und andere Effekte</a></li>
<li><a href="../de450334/index.html">IaaS und Managed IT: Technology Digest</a></li>
<li><a href="../de450340/index.html">So analysieren Sie die Website eines Mitbewerbers kostenlos. Schritt f√ºr Schritt Anleitung</a></li>
<li><a href="../de450342/index.html">√úber einfache Dinge, kompliziert. Wir geben das M√§dchen Gefl√ºgel oder RTFM f√ºr die Definition von Kunststoffen zu Hause zur√ºck</a></li>
<li><a href="../de450346/index.html">Newtons Cottage Cradle</a></li>
<li><a href="../de450350/index.html">Die d√ºnne rote Linie meines Projekts</a></li>
<li><a href="../de450354/index.html">Angek√ºndigte Windows Vision-F√§higkeiten (Vorschau)</a></li>
<li><a href="../de450358/index.html">Verbesserungen des Visual Studio App Center-Verteilungsdienstes</a></li>
<li><a href="../de450360/index.html">Exchange SPA-Anwendungsarchitektur im Jahr 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>