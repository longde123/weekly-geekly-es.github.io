<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃🏼 🚶🏾 ↩️ So machen Sie die Zahlung bequemer: die Erfahrung eines IaaS-Anbieters ⛔️ 👨🏽‍🎓 🚣🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eines der wichtigsten Probleme bei der Arbeit mit den Diensten eines IaaS-Anbieters ist die Bequemlichkeit der Zahlung. Vom ersten Tag des Projektbegi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So machen Sie die Zahlung bequemer: die Erfahrung eines IaaS-Anbieters</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/1cloud/blog/433948/">  Eines der wichtigsten Probleme bei der Arbeit mit den Diensten eines IaaS-Anbieters ist die Bequemlichkeit der Zahlung.  Vom ersten Tag des Projektbeginns an haben wir versucht, den Zahlungsprozess mit Bankkarten zu vereinfachen und diesen Mechanismus weiter zu verbessern.  Heute haben wir beschlossen, darüber zu sprechen, wo wir angefangen haben, und unsere Erfahrungen zu teilen. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/iy/6k/pv/iy6kpvrzewuk4mudc9nkfwiadu8.jpeg"></a> <a name="habracut"></a><br>  <font color="#A9A9A9"><i>/ Flickr / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Muhammad Ashiq</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CC BY-SA</a></i></font> <br><br><h2>  Hintergrund </h2><br>  Seit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2012</a> bieten wir IaaS-Dienste bei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">1cloud</a> an.  In dieser Zeit konnten wir mit einer Vielzahl von Zahlungsgateways arbeiten.  Einer der ersten war Money Online.  Wir haben zwei Jahre mit ihm zusammengearbeitet und dann begonnen, bei möglichen technischen Schwierigkeiten alternative Dienste anzuschließen. <br><br>  Als Alternative wurden PayPal und Robocassa in Betracht gezogen.  Infolgedessen waren beide Plattformen verbunden, obwohl dies <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einige Schwierigkeiten aufwies</a> .  Im ersten Fall mussten wir zum Importieren der Kunden-ID in das Zahlungsformular die CSS-Regeln anpassen und die Standardelemente auf der Webseite ändern.  In der Situation mit Robocassa stimmten einige Anforderungen in der API nicht mit der Beschreibung überein, aber mithilfe des technischen Supports wurde die Situation ebenfalls gelöst.  Wir haben bei diesen Entscheidungen nicht aufgehört und andere Optionen in Betracht gezogen, die uns potenzielle Partner angeboten haben. <br><br>  Also haben wir begonnen, mit dem PayMaster-Zahlungssystem zu arbeiten (es ersetzte „Money Online“), das uns günstige Provisionskonditionen und eine praktische API bot.  Dieses Zahlungsgateway war lange Zeit das wichtigste.  Vor kurzem haben wir uns jedoch entschlossen, die Benutzerfreundlichkeit unseres Dienstes neu zu gestalten und den Prozess der Bezahlung von Diensten per Bankkarte für Einzelpersonen zu vereinfachen.  Damit UX unsere Anforderungen erfüllt, haben wir ein weiteres Zahlungsgateway integriert - CloudPayments. <br><br><h2>  Wie kann ich den UX-Zahlungsprozess verbessern? </h2><br>  Wir arbeiten am Vorauszahlungsmodell.  Der Kunde füllt sein Konto auf seinem persönlichen Konto auf, und dann wird Geld von diesem Konto abgebucht, wenn IaaS-Dienste verbraucht werden (alle zehn Minuten abgebucht). <br><br>  Um das Guthaben mit einer Kreditkarte aufzufüllen, musste der Kunde im Fall von PayMaster einen vierstufigen Prozess durchlaufen: <br><br><ol><li>  Geben Sie den Zahlungsbetrag in das Formular in der Systemsteuerung ein, klicken Sie auf die Schaltfläche "Bezahlen" und wechseln Sie zur Seite "Zahlungsgateway". </li><li>  Geben Sie die Telefon- oder E-Mail-Adresse an, an der der Scheck eingehen soll, und klicken Sie auf Weiter. </li><li>  Geben Sie die Kartendetails ein und drücken Sie erneut die Taste "Bezahlen". </li><li>  Geben Sie den Transaktionsbestätigungscode an, den die Bank im Rahmen des 3D Secure-Verfahrens gesendet hat. </li></ol><blockquote>  <i><b>Haftungsausschluss:</b> Der oben beschriebene Algorithmus gilt für Bankkartenzahlungen von Einzelpersonen.</i>  <i>Juristische Personen zahlen für die Dienste des IaaS-Anbieters auf Rechnungen.</i>  <i>Während wir die Benutzerfreundlichkeit verbessert haben, haben wir die Mechanismen für die automatische Abrechnung solcher Rechnungen fertiggestellt, werden sie jedoch im Rahmen dieses Materials nicht berücksichtigen, da juristische Personen nicht mit einem Zahlungsgateway interagieren.</i> </blockquote><br>  Wir haben uns entschlossen, den Zahlungsprozess für Benutzer zu vereinfachen und das Erscheinungsbild und die Benutzerfreundlichkeit von Formularen zum Ausfüllen von Bankkartendaten allgemein zu verbessern.  Zu diesem Zweck haben wir zwei Aufgaben für uns identifiziert, die wir unten diskutieren werden. <br><br><h5>  Aufgabe 1: Schließen Sie den Übergang zur Zahlungsgateway-Seite aus </h5><br>  Wie oben erwähnt, musste ein Benutzer, als er für unsere Dienste bezahlte, um die Details der Karte auszufüllen, zum Standort des Zahlungsgateways gehen.  Daher musste eine Person viele Bestätigungsschaltflächen drücken und auf das Laden von Seiten mit Informationen zum Auffüllen des Kontos warten. <br><br>  In diesem Fall trat ein weiteres Problem auf: Nachdem der Benutzer Geld auf das Konto eingezahlt hatte, blieb er auf der Zahlungsgateway-Seite, bis er auf einen speziellen Link klickte, um zu 1cloud.ru zurückzukehren.  Dies machte es beispielsweise schwierig, mit unserem Control Panel zu arbeiten, wenn der Benutzer nach der Zahlung seine IT-Infrastruktur um Kapazitäten erweitern wollte. <br><br><blockquote>  <i>"Laut Analytics folgten nur eine Handvoll Kunden dem Link und kehrten zu unserer Website zurück", sagte <b>Sergey Belkin</b> , Entwicklungsleiter bei 1cloud.ru.</i>  <i>- Dies war teilweise darauf zurückzuführen, dass der Kunde auf den Link „Zurück zum Online-Shop“ klicken musste.</i>  <i>Dies trotz der Tatsache, dass unser Service kein Online-Shop ist. “</i> </blockquote><br>  Darüber hinaus wollten wir die Anzahl der vom Benutzer ausgefüllten Felder auf ein Minimum reduzieren und nur die Felder belassen, die für den Vorgang wirklich erforderlich sind.  Um diese Aufgabe zu erfüllen, haben wir uns für das CloudPayments-Zahlungsgateway entschieden, dessen Mitarbeiter unsere Aufmerksamkeit zunächst mit schnellen und vollständigen Antworten auf den technischen Support auf sich gezogen haben. <br><br>  Darüber hinaus hatte dieses Zahlungsportal eine Repräsentanz in Kasachstan.  Dies ermöglichte die Implementierung einer neuen Zahlungsmethode für unseren Hosting-Service <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">oblako.kz</a> .  Andernfalls würden alle unsere Überweisungen von Kasachstan nach Russland (oder umgekehrt) einer zusätzlichen Provision unterliegen. <br><br>  CloudPayments schlug vor, ein spezielles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Chekout-Skript zu verwenden</a> .  Sie können das Zahlungsformular direkt in unserem Control Panel implementieren und die ausgefüllten Daten an das Zahlungsgateway übertragen, ohne sie auf unserer Seite zu speichern. <br><br>  Um das Skript zu implementieren, mussten wir einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PCI-DSS-</a> Sicherheitsscan bei einer der akkreditierten Organisationen durchführen - das war die CloudPayments-Anforderung.  Das Scannen ist erforderlich, um die technische Einhaltung des Standards zu bestätigen und die Möglichkeit des Diebstahls von Benutzerdaten beim Ausfüllen von Formularen auf der Website auszuschließen. <br><br>  Das PCI DSS-Konformitätsaudit wurde von ARinteg durchgeführt.  Wir schickten ihnen einen Antrag, in dem wir den Wunsch nach einer Prüfung bekundeten, einen Fragebogen ausfüllten und einen Termin für die Überprüfung festlegten.  Auf der ARinteg-Seite dauert die Vorbereitung für das Scannen etwa einen halben Tag (dh Sie können fast sofort scannen), aber wir haben weitere vier bis fünf Tage gebraucht, um unsere Infrastruktur sorgfältig vorzubereiten. <br><br>  Der Scan dauerte ungefähr 15 Stunden, obwohl es vorkommt, dass der Scan mehrere Tage dauert.  ARinteg-Spezialisten haben SSL und den Schutz vor Injektionsanfragen und anderen Schwachstellen auf unserer Website überprüft. <br><br>  Wir haben den ersten Test nicht bestanden und erhielten eine Liste mit Problemen, die behoben werden mussten.  Alle waren unbedeutend, zum Beispiel gab es eine Post-Methode, die verwendet wurde, als der Benutzer unsere schrittweisen Anweisungen auf der Website auswertete.  Wir haben alle Kommentare entfernt und der zweite Prüfungsversuch war erfolgreich.  Als nächstes könnten wir mit der Implementierung des Chekout-Skripts fortfahren. <br><br>  Das Skript ist auf unserer Website registriert, sammelt Kartendaten aus dem angegebenen Formular und erstellt daraus ein Kryptogramm zur Zahlung über die CloudPayments-API.  Es sieht so aus: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.createCryptogram = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = checkout.createCryptogramPacket(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result.success) { <span class="hljs-comment"><span class="hljs-comment">//   alert(result.packet); } else { //     ,  `result.messages` : // { name: "      ", cardNumber: "  " } //  `name`, `cardNumber`    `&lt;input ... data-cp="cardNumber"&gt;` for (var msgName in result.messages) { alert(result.messages[msgName]); } } }; $(function () { /*  checkout */ checkout = new cp.Checkout( // public id    "test_api_00000000000000000000001", // ,     document.getElementById("paymentFormSample")); });</span></span></code> </pre> <br>  Das Formular zur Eingabe von Bankkartendaten sieht folgendermaßen aus: <br><br><img src="https://habrastorage.org/webt/yi/vl/yt/yivlyttyhrz8mgmikdhnr9_8mys.png"><br><br>  Während der Implementierung des Skripts und des Formulars konnten wir die Anzahl der vom Benutzer ausgefüllten Felder auf ein Minimum reduzieren.  Es blieben nur diejenigen übrig, die für die Operation wirklich notwendig sind.  Beispielsweise wurden die Felder "Vorname" und "Nachname" entfernt.  Wie uns Vertreter des Zahlungsgateways erklärten, überprüfen Banken diese Daten nicht (nur die Kartennummer, das Datum und der CVV sind wichtig), daher haben wir beschlossen, sie wegzulassen und den gesamten Prozess zu vereinfachen. <br><br>  Darüber hinaus haben wir die Informationen zu unserem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rabattprogramm</a> klarer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">formuliert</a> : Bei einer einmaligen Auffüllung des Kontos in Höhe von 5.000 Rubel werden 10% davon in Form von Boni gutgeschrieben, von 10 000 Rubel - 20%, mehr als 100 000 Rubel - 25%.  Wir haben auch die Möglichkeit hinzugefügt, Kartendaten für Benutzer zu speichern.  Alle diese Informationen werden in verschlüsselter Form auf der Seite des CloudPayments-Zahlungsgateways gespeichert. <br><br><h5>  Aufgabe 2: Automatische Zahlung realisieren </h5><br>  Dies ist eine Zahlung, die unter bestimmten Bedingungen automatisch erfolgt.  Sehr oft wird diese Funktion von Abonnementdiensten verwendet.  Die meisten Zahlungsgateways bieten jedoch nur die Option, wenn die automatische Auffüllung nach einem Zeitplan (zu einem bestimmten Datum) erfolgt.  Für uns ist es wichtig, dass die Möglichkeit, das Konto aufzufüllen, jederzeit automatisch verfügbar ist, wenn dem Kunden das Guthaben auf dem Konto ausgeht (da wir an der Vorauszahlung arbeiten).  Um die automatische Zahlung zu implementieren, haben wir daher die Methode verwendet, die beim Bezahlen mit einer "gespeicherten" Karte (unter Verwendung eines temporären Tokens) verwendet wird. <br><br>  Dies funktioniert wie folgt: Nach der ersten erfolgreichen Zahlung durch den Benutzer generiert das Gateway sein Token für das Service-Karten-Paar und sendet es in einer Postback-Antwort.  Dieser Token wird gespeichert und bei wiederholter Zahlung bereits übertragen, nicht die Kartendaten.  Es stellt sich heraus, dass wir eine Anfrage an das Gateway senden, in dem wir unseren API-Schlüssel (Kennung, dass die Anfrage von 1cloud stammt), Token und Menge angeben.  Das Gateway prüft, ob ein solches Token erstellt wurde, und verarbeitet die Zahlung für den angegebenen Betrag, wenn alles in Ordnung ist. <br><br>  Das Datum, an dem eine automatische Zahlung erforderlich ist, wird dynamisch auf der Grundlage des aktuellen Verbrauchs von Diensten durch den Benutzer und des Kontostands berechnet.  Angenommen, ein Kunde hat tausend Rubel in der Bilanz und hat in den letzten zehn Minuten zwei Rubel verbraucht.  Es ist klar, dass das ungefähre Nullungsdatum in Intervallen von fünfhundert bis zehn Minuten liegen wird - dies sind ungefähr 34 Tage.  Somit können wir einige Tage vor dem Ende der Mittel eine automatische Zahlung vornehmen.  Der Kunde wählt die Größe der automatischen Zahlung unabhängig aus. <br><br><h2>  Was weiter </h2><br>  Jetzt testen wir diese Lösungen und bewerten die Ergebnisse der Implementierung.  Laut einer Abstimmung unter den Kunden sind die meisten ziemlich veränderlich.  Wir werden das Feedback zum System eingehender untersuchen, die Daten analysieren und gegebenenfalls Anpassungen vornehmen. <br><br><h5>  PS Frische Materialien aus unserem Unternehmensblog: </h5><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DevOps in einem Cloud-Dienst am Beispiel von 1cloud.ru</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Was Sie über digitale Signatur wissen müssen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Risikominimierung: So verlieren Sie Ihre Daten nicht</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de433948/">https://habr.com/ru/post/de433948/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de433936/index.html">Auf der Suche nach einem Hightech-Geschenk für ein Kind? Denken Sie an einen Spielplatz, nicht an einen Laufstall</a></li>
<li><a href="../de433938/index.html">Wie Yandex und Google das Jahr zusammenfassen</a></li>
<li><a href="../de433940/index.html">Wie viel kostet Review im AppStore?</a></li>
<li><a href="../de433944/index.html">Verheerende Ausnahmen</a></li>
<li><a href="../de433946/index.html">Spickzettel für künstliche Intelligenz - werfen Sie den Überschuss weg, lehren Sie die Hauptsache. Trainingssequenz-Verarbeitungstechnik</a></li>
<li><a href="../de433952/index.html">10 Gründe, sich für eine Lösung für SAP HANA von HPE zu entscheiden. Teil 2</a></li>
<li><a href="../de433954/index.html">Acht Audiotechnologien und Audio-Gadgets, die 2019 in die TECnology Hall of Fame aufgenommen werden</a></li>
<li><a href="../de433956/index.html">Modder haben KI verwendet, um die Textur in Spielen zu verbessern</a></li>
<li><a href="../de433958/index.html">TDD-Anwendungen beim Spring Boot: Arbeiten mit einer Datenbank</a></li>
<li><a href="../de433964/index.html">ECMAScript-Module in Node.js: Ein neuer Plan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>