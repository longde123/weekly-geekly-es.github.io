<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÉüèº üö∂üèæ ‚Ü©Ô∏è So machen Sie die Zahlung bequemer: die Erfahrung eines IaaS-Anbieters ‚õîÔ∏è üë®üèΩ‚Äçüéì üö£üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eines der wichtigsten Probleme bei der Arbeit mit den Diensten eines IaaS-Anbieters ist die Bequemlichkeit der Zahlung. Vom ersten Tag des Projektbegi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So machen Sie die Zahlung bequemer: die Erfahrung eines IaaS-Anbieters</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/1cloud/blog/433948/">  Eines der wichtigsten Probleme bei der Arbeit mit den Diensten eines IaaS-Anbieters ist die Bequemlichkeit der Zahlung.  Vom ersten Tag des Projektbeginns an haben wir versucht, den Zahlungsprozess mit Bankkarten zu vereinfachen und diesen Mechanismus weiter zu verbessern.  Heute haben wir beschlossen, dar√ºber zu sprechen, wo wir angefangen haben, und unsere Erfahrungen zu teilen. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/iy/6k/pv/iy6kpvrzewuk4mudc9nkfwiadu8.jpeg"></a> <a name="habracut"></a><br>  <font color="#A9A9A9"><i>/ Flickr / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Muhammad Ashiq</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CC BY-SA</a></i></font> <br><br><h2>  Hintergrund </h2><br>  Seit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2012</a> bieten wir IaaS-Dienste bei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">1cloud</a> an.  In dieser Zeit konnten wir mit einer Vielzahl von Zahlungsgateways arbeiten.  Einer der ersten war Money Online.  Wir haben zwei Jahre mit ihm zusammengearbeitet und dann begonnen, bei m√∂glichen technischen Schwierigkeiten alternative Dienste anzuschlie√üen. <br><br>  Als Alternative wurden PayPal und Robocassa in Betracht gezogen.  Infolgedessen waren beide Plattformen verbunden, obwohl dies <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einige Schwierigkeiten aufwies</a> .  Im ersten Fall mussten wir zum Importieren der Kunden-ID in das Zahlungsformular die CSS-Regeln anpassen und die Standardelemente auf der Webseite √§ndern.  In der Situation mit Robocassa stimmten einige Anforderungen in der API nicht mit der Beschreibung √ºberein, aber mithilfe des technischen Supports wurde die Situation ebenfalls gel√∂st.  Wir haben bei diesen Entscheidungen nicht aufgeh√∂rt und andere Optionen in Betracht gezogen, die uns potenzielle Partner angeboten haben. <br><br>  Also haben wir begonnen, mit dem PayMaster-Zahlungssystem zu arbeiten (es ersetzte ‚ÄûMoney Online‚Äú), das uns g√ºnstige Provisionskonditionen und eine praktische API bot.  Dieses Zahlungsgateway war lange Zeit das wichtigste.  Vor kurzem haben wir uns jedoch entschlossen, die Benutzerfreundlichkeit unseres Dienstes neu zu gestalten und den Prozess der Bezahlung von Diensten per Bankkarte f√ºr Einzelpersonen zu vereinfachen.  Damit UX unsere Anforderungen erf√ºllt, haben wir ein weiteres Zahlungsgateway integriert - CloudPayments. <br><br><h2>  Wie kann ich den UX-Zahlungsprozess verbessern? </h2><br>  Wir arbeiten am Vorauszahlungsmodell.  Der Kunde f√ºllt sein Konto auf seinem pers√∂nlichen Konto auf, und dann wird Geld von diesem Konto abgebucht, wenn IaaS-Dienste verbraucht werden (alle zehn Minuten abgebucht). <br><br>  Um das Guthaben mit einer Kreditkarte aufzuf√ºllen, musste der Kunde im Fall von PayMaster einen vierstufigen Prozess durchlaufen: <br><br><ol><li>  Geben Sie den Zahlungsbetrag in das Formular in der Systemsteuerung ein, klicken Sie auf die Schaltfl√§che "Bezahlen" und wechseln Sie zur Seite "Zahlungsgateway". </li><li>  Geben Sie die Telefon- oder E-Mail-Adresse an, an der der Scheck eingehen soll, und klicken Sie auf Weiter. </li><li>  Geben Sie die Kartendetails ein und dr√ºcken Sie erneut die Taste "Bezahlen". </li><li>  Geben Sie den Transaktionsbest√§tigungscode an, den die Bank im Rahmen des 3D Secure-Verfahrens gesendet hat. </li></ol><blockquote>  <i><b>Haftungsausschluss:</b> Der oben beschriebene Algorithmus gilt f√ºr Bankkartenzahlungen von Einzelpersonen.</i>  <i>Juristische Personen zahlen f√ºr die Dienste des IaaS-Anbieters auf Rechnungen.</i>  <i>W√§hrend wir die Benutzerfreundlichkeit verbessert haben, haben wir die Mechanismen f√ºr die automatische Abrechnung solcher Rechnungen fertiggestellt, werden sie jedoch im Rahmen dieses Materials nicht ber√ºcksichtigen, da juristische Personen nicht mit einem Zahlungsgateway interagieren.</i> </blockquote><br>  Wir haben uns entschlossen, den Zahlungsprozess f√ºr Benutzer zu vereinfachen und das Erscheinungsbild und die Benutzerfreundlichkeit von Formularen zum Ausf√ºllen von Bankkartendaten allgemein zu verbessern.  Zu diesem Zweck haben wir zwei Aufgaben f√ºr uns identifiziert, die wir unten diskutieren werden. <br><br><h5>  Aufgabe 1: Schlie√üen Sie den √úbergang zur Zahlungsgateway-Seite aus </h5><br>  Wie oben erw√§hnt, musste ein Benutzer, als er f√ºr unsere Dienste bezahlte, um die Details der Karte auszuf√ºllen, zum Standort des Zahlungsgateways gehen.  Daher musste eine Person viele Best√§tigungsschaltfl√§chen dr√ºcken und auf das Laden von Seiten mit Informationen zum Auff√ºllen des Kontos warten. <br><br>  In diesem Fall trat ein weiteres Problem auf: Nachdem der Benutzer Geld auf das Konto eingezahlt hatte, blieb er auf der Zahlungsgateway-Seite, bis er auf einen speziellen Link klickte, um zu 1cloud.ru zur√ºckzukehren.  Dies machte es beispielsweise schwierig, mit unserem Control Panel zu arbeiten, wenn der Benutzer nach der Zahlung seine IT-Infrastruktur um Kapazit√§ten erweitern wollte. <br><br><blockquote>  <i>"Laut Analytics folgten nur eine Handvoll Kunden dem Link und kehrten zu unserer Website zur√ºck", sagte <b>Sergey Belkin</b> , Entwicklungsleiter bei 1cloud.ru.</i>  <i>- Dies war teilweise darauf zur√ºckzuf√ºhren, dass der Kunde auf den Link ‚ÄûZur√ºck zum Online-Shop‚Äú klicken musste.</i>  <i>Dies trotz der Tatsache, dass unser Service kein Online-Shop ist. ‚Äú</i> </blockquote><br>  Dar√ºber hinaus wollten wir die Anzahl der vom Benutzer ausgef√ºllten Felder auf ein Minimum reduzieren und nur die Felder belassen, die f√ºr den Vorgang wirklich erforderlich sind.  Um diese Aufgabe zu erf√ºllen, haben wir uns f√ºr das CloudPayments-Zahlungsgateway entschieden, dessen Mitarbeiter unsere Aufmerksamkeit zun√§chst mit schnellen und vollst√§ndigen Antworten auf den technischen Support auf sich gezogen haben. <br><br>  Dar√ºber hinaus hatte dieses Zahlungsportal eine Repr√§sentanz in Kasachstan.  Dies erm√∂glichte die Implementierung einer neuen Zahlungsmethode f√ºr unseren Hosting-Service <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">oblako.kz</a> .  Andernfalls w√ºrden alle unsere √úberweisungen von Kasachstan nach Russland (oder umgekehrt) einer zus√§tzlichen Provision unterliegen. <br><br>  CloudPayments schlug vor, ein spezielles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Chekout-Skript zu verwenden</a> .  Sie k√∂nnen das Zahlungsformular direkt in unserem Control Panel implementieren und die ausgef√ºllten Daten an das Zahlungsgateway √ºbertragen, ohne sie auf unserer Seite zu speichern. <br><br>  Um das Skript zu implementieren, mussten wir einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PCI-DSS-</a> Sicherheitsscan bei einer der akkreditierten Organisationen durchf√ºhren - das war die CloudPayments-Anforderung.  Das Scannen ist erforderlich, um die technische Einhaltung des Standards zu best√§tigen und die M√∂glichkeit des Diebstahls von Benutzerdaten beim Ausf√ºllen von Formularen auf der Website auszuschlie√üen. <br><br>  Das PCI DSS-Konformit√§tsaudit wurde von ARinteg durchgef√ºhrt.  Wir schickten ihnen einen Antrag, in dem wir den Wunsch nach einer Pr√ºfung bekundeten, einen Fragebogen ausf√ºllten und einen Termin f√ºr die √úberpr√ºfung festlegten.  Auf der ARinteg-Seite dauert die Vorbereitung f√ºr das Scannen etwa einen halben Tag (dh Sie k√∂nnen fast sofort scannen), aber wir haben weitere vier bis f√ºnf Tage gebraucht, um unsere Infrastruktur sorgf√§ltig vorzubereiten. <br><br>  Der Scan dauerte ungef√§hr 15 Stunden, obwohl es vorkommt, dass der Scan mehrere Tage dauert.  ARinteg-Spezialisten haben SSL und den Schutz vor Injektionsanfragen und anderen Schwachstellen auf unserer Website √ºberpr√ºft. <br><br>  Wir haben den ersten Test nicht bestanden und erhielten eine Liste mit Problemen, die behoben werden mussten.  Alle waren unbedeutend, zum Beispiel gab es eine Post-Methode, die verwendet wurde, als der Benutzer unsere schrittweisen Anweisungen auf der Website auswertete.  Wir haben alle Kommentare entfernt und der zweite Pr√ºfungsversuch war erfolgreich.  Als n√§chstes k√∂nnten wir mit der Implementierung des Chekout-Skripts fortfahren. <br><br>  Das Skript ist auf unserer Website registriert, sammelt Kartendaten aus dem angegebenen Formular und erstellt daraus ein Kryptogramm zur Zahlung √ºber die CloudPayments-API.  Es sieht so aus: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.createCryptogram = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = checkout.createCryptogramPacket(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result.success) { <span class="hljs-comment"><span class="hljs-comment">//   alert(result.packet); } else { //     ,  `result.messages` : // { name: "      ", cardNumber: "  " } //  `name`, `cardNumber`    `&lt;input ... data-cp="cardNumber"&gt;` for (var msgName in result.messages) { alert(result.messages[msgName]); } } }; $(function () { /*  checkout */ checkout = new cp.Checkout( // public id    "test_api_00000000000000000000001", // ,     document.getElementById("paymentFormSample")); });</span></span></code> </pre> <br>  Das Formular zur Eingabe von Bankkartendaten sieht folgenderma√üen aus: <br><br><img src="https://habrastorage.org/webt/yi/vl/yt/yivlyttyhrz8mgmikdhnr9_8mys.png"><br><br>  W√§hrend der Implementierung des Skripts und des Formulars konnten wir die Anzahl der vom Benutzer ausgef√ºllten Felder auf ein Minimum reduzieren.  Es blieben nur diejenigen √ºbrig, die f√ºr die Operation wirklich notwendig sind.  Beispielsweise wurden die Felder "Vorname" und "Nachname" entfernt.  Wie uns Vertreter des Zahlungsgateways erkl√§rten, √ºberpr√ºfen Banken diese Daten nicht (nur die Kartennummer, das Datum und der CVV sind wichtig), daher haben wir beschlossen, sie wegzulassen und den gesamten Prozess zu vereinfachen. <br><br>  Dar√ºber hinaus haben wir die Informationen zu unserem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rabattprogramm</a> klarer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">formuliert</a> : Bei einer einmaligen Auff√ºllung des Kontos in H√∂he von 5.000 Rubel werden 10% davon in Form von Boni gutgeschrieben, von 10 000 Rubel - 20%, mehr als 100 000 Rubel - 25%.  Wir haben auch die M√∂glichkeit hinzugef√ºgt, Kartendaten f√ºr Benutzer zu speichern.  Alle diese Informationen werden in verschl√ºsselter Form auf der Seite des CloudPayments-Zahlungsgateways gespeichert. <br><br><h5>  Aufgabe 2: Automatische Zahlung realisieren </h5><br>  Dies ist eine Zahlung, die unter bestimmten Bedingungen automatisch erfolgt.  Sehr oft wird diese Funktion von Abonnementdiensten verwendet.  Die meisten Zahlungsgateways bieten jedoch nur die Option, wenn die automatische Auff√ºllung nach einem Zeitplan (zu einem bestimmten Datum) erfolgt.  F√ºr uns ist es wichtig, dass die M√∂glichkeit, das Konto aufzuf√ºllen, jederzeit automatisch verf√ºgbar ist, wenn dem Kunden das Guthaben auf dem Konto ausgeht (da wir an der Vorauszahlung arbeiten).  Um die automatische Zahlung zu implementieren, haben wir daher die Methode verwendet, die beim Bezahlen mit einer "gespeicherten" Karte (unter Verwendung eines tempor√§ren Tokens) verwendet wird. <br><br>  Dies funktioniert wie folgt: Nach der ersten erfolgreichen Zahlung durch den Benutzer generiert das Gateway sein Token f√ºr das Service-Karten-Paar und sendet es in einer Postback-Antwort.  Dieser Token wird gespeichert und bei wiederholter Zahlung bereits √ºbertragen, nicht die Kartendaten.  Es stellt sich heraus, dass wir eine Anfrage an das Gateway senden, in dem wir unseren API-Schl√ºssel (Kennung, dass die Anfrage von 1cloud stammt), Token und Menge angeben.  Das Gateway pr√ºft, ob ein solches Token erstellt wurde, und verarbeitet die Zahlung f√ºr den angegebenen Betrag, wenn alles in Ordnung ist. <br><br>  Das Datum, an dem eine automatische Zahlung erforderlich ist, wird dynamisch auf der Grundlage des aktuellen Verbrauchs von Diensten durch den Benutzer und des Kontostands berechnet.  Angenommen, ein Kunde hat tausend Rubel in der Bilanz und hat in den letzten zehn Minuten zwei Rubel verbraucht.  Es ist klar, dass das ungef√§hre Nullungsdatum in Intervallen von f√ºnfhundert bis zehn Minuten liegen wird - dies sind ungef√§hr 34 Tage.  Somit k√∂nnen wir einige Tage vor dem Ende der Mittel eine automatische Zahlung vornehmen.  Der Kunde w√§hlt die Gr√∂√üe der automatischen Zahlung unabh√§ngig aus. <br><br><h2>  Was weiter </h2><br>  Jetzt testen wir diese L√∂sungen und bewerten die Ergebnisse der Implementierung.  Laut einer Abstimmung unter den Kunden sind die meisten ziemlich ver√§nderlich.  Wir werden das Feedback zum System eingehender untersuchen, die Daten analysieren und gegebenenfalls Anpassungen vornehmen. <br><br><h5>  PS Frische Materialien aus unserem Unternehmensblog: </h5><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DevOps in einem Cloud-Dienst am Beispiel von 1cloud.ru</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Was Sie √ºber digitale Signatur wissen m√ºssen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Risikominimierung: So verlieren Sie Ihre Daten nicht</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de433948/">https://habr.com/ru/post/de433948/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de433936/index.html">Auf der Suche nach einem Hightech-Geschenk f√ºr ein Kind? Denken Sie an einen Spielplatz, nicht an einen Laufstall</a></li>
<li><a href="../de433938/index.html">Wie Yandex und Google das Jahr zusammenfassen</a></li>
<li><a href="../de433940/index.html">Wie viel kostet Review im AppStore?</a></li>
<li><a href="../de433944/index.html">Verheerende Ausnahmen</a></li>
<li><a href="../de433946/index.html">Spickzettel f√ºr k√ºnstliche Intelligenz - werfen Sie den √úberschuss weg, lehren Sie die Hauptsache. Trainingssequenz-Verarbeitungstechnik</a></li>
<li><a href="../de433952/index.html">10 Gr√ºnde, sich f√ºr eine L√∂sung f√ºr SAP HANA von HPE zu entscheiden. Teil 2</a></li>
<li><a href="../de433954/index.html">Acht Audiotechnologien und Audio-Gadgets, die 2019 in die TECnology Hall of Fame aufgenommen werden</a></li>
<li><a href="../de433956/index.html">Modder haben KI verwendet, um die Textur in Spielen zu verbessern</a></li>
<li><a href="../de433958/index.html">TDD-Anwendungen beim Spring Boot: Arbeiten mit einer Datenbank</a></li>
<li><a href="../de433964/index.html">ECMAScript-Module in Node.js: Ein neuer Plan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>