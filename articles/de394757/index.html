<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧝🏾 🚁 👼 Entwicklung von IoT-Geräten mit Bluetooth LE ☠️ 📵 💨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Bluetooth- Technologie bricht energisch ihren Platz im Internet der Dinge. Ein Teil dieser Technologie, Bluetooth LE  ( Bluetooth Low Energy , auc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Entwicklung von IoT-Geräten mit Bluetooth LE</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/394757/"><a href=""><div style="text-align:center;"><img width="1010" src="https://habrastorage.org/getpro/geektimes/post_images/054/28f/426/05428f4260bd302f20e5a277359c591e.png"></div></a> <br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Bluetooth-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Technologie </font><font style="vertical-align: inherit;">bricht energisch ihren Platz im Internet der Dinge. Ein Teil dieser Technologie, </font></font><font color="#C00000"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth </font></font></b><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LE</font></font></font> </font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth Low Energy</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , auch bekannt als </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth Smart</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , auch bekannt als </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), positioniert sich direkt als ideale Wahl für </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IoT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet der Dinge</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Schwer zu widersprechen. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> weiß bereits, wie man den Internetverkehr </font><font style="vertical-align: inherit;">weiterleitet, </font><font style="vertical-align: inherit;">Koordinaten in Räumen ermittelt, industrielle speicherprogrammierbare Steuerungen anschließt, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WEB-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Server unterstützt, Waagen, Thermometer, Herzfrequenzmesser, Oximeter, Blutdruckmessgeräte und viele andere Dinge anschließt. C </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ble</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Viele Probleme, die mit </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wi-Fi-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lösungen verbunden sind, werden automatisch behoben </font><font style="vertical-align: inherit;">. Nicht lange vor dem Moment, in dem Geräte mit </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mithilfe einer </font><b><font style="vertical-align: inherit;">ZigBee-</font></b><font style="vertical-align: inherit;"> ähnlichen Technologie </font><font style="vertical-align: inherit;">im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MESH-Netzwerk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> organisiert werden können </font><font style="vertical-align: inherit;">. Dies spiegelt sich bereits in der </font><b><font style="vertical-align: inherit;">Bluetooth-</font></b><font style="vertical-align: inherit;"> Spezifikation </font><b><font style="vertical-align: inherit;">5.0</font></b><font style="vertical-align: inherit;"> wider </font><b><font style="vertical-align: inherit;">.</font></b></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher habe </font><font style="vertical-align: inherit;">ich </font><font style="vertical-align: inherit;">bei der Entwicklung meines </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IoT-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Moduls </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bedingungslos </font><font style="vertical-align: inherit;">der Verwendung von </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wi-Fi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vorgezogen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ich werde den </font><font style="vertical-align: inherit;">peripheren Teil des </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Netzwerks </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">am Beispiel des K66BLEZ-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Debugging-Moduls betrachten </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier möchte ich meinen Entwicklungsweg von der fast vollständigen Unkenntnis von </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bis zur Serienproduktion beschreiben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Vertrautheit mit dem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K66BLEZ1-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Modul </font><font style="vertical-align: inherit;">wurde in folgenden Artikeln begonnen:</font></font><br>
<blockquote><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">     .  </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">     .  FatFs</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">     .  </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K66BLEZ-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Modul </font><font style="vertical-align: inherit;">verwendet den </font><font style="vertical-align: inherit;">von </font><b><font style="vertical-align: inherit;">NXP</font></b><font style="vertical-align: inherit;"> hergestellten </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">MKW40Z160-</font></a><font style="vertical-align: inherit;"> Chip </font><font style="vertical-align: inherit;">( </font><b><i><font style="vertical-align: inherit;">48 MHz Cortex-M0 +, 160 KB Flash, 20 KB RAM</font></i></b><font style="vertical-align: inherit;"> ) </font><font style="vertical-align: inherit;">als </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transceiver </font><font style="vertical-align: inherit;">. Der Chip ist insofern interessant, als er zusammen mit BLE auch als Transceiver von Signalen des Standards </font><b><font style="vertical-align: inherit;">802.15.4 fungieren kann</font></b><font style="vertical-align: inherit;"> . Und der Standard </font><b><font style="vertical-align: inherit;">802.15.4 ist</font></b><font style="vertical-align: inherit;"> , wie Sie wissen, der Träger der </font><b><font style="vertical-align: inherit;">ZigBee-</font></b><font style="vertical-align: inherit;"> Technologie </font><font style="vertical-align: inherit;">. Der </font><b><font style="vertical-align: inherit;">ZigBee-</font></b><font style="vertical-align: inherit;"> Stack selbst </font><font style="vertical-align: inherit;">für den </font><b><font style="vertical-align: inherit;">MKW40Z wurde</font></b><font style="vertical-align: inherit;"> noch nicht veröffentlicht, es wird jedoch bereits eine Firmware angeboten, bei der </font><b><font style="vertical-align: inherit;">802.15.4</font></b><font style="vertical-align: inherit;"> gleichzeitig mit </font><b><font style="vertical-align: inherit;">BLE</font></b><font style="vertical-align: inherit;"> funktioniert </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
Ein Diagramm eines Teils eines Moduls mit einem BLE-Chip ist unten gezeigt.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><b><i><font style="vertical-align: inherit;"></font></i></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<a href=""><img align="left" width="1010" src="https://habrastorage.org/getpro/geektimes/post_images/b5d/0c0/158/b5d0c01586e8bc42182a764c0b7e8716.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Klicken zum Vergrößern)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Anstelle des Chips</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MKW40</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bereits Chip</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MKW41</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit einem Volumen von 128 KB RAM, 512 KB Flash</font><font style="vertical-align: inherit;">Kapazität und Unterstützung für alle gängigen Protokolle:</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> BLE 4.2, BLE die Mesh, die ZigBee, Thread A, die IPv6 - </font><font style="vertical-align: inherit;">6LoBLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es gibt noch keine offene Dokumentation zum neuen Chip, aber er verspricht, mit MKW40 pin-kompatibel zu sein.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der MKW40 BLE-Chip auf dem Modul wird über SPI- und I2C-Schnittstellen mit dem Hauptmikrocontroller MK66 verbunden. Die I2C-Schnittstelle verbindet den Chip auch mit dem Ladechip. Der Hauptkommunikationskanal ist auf der SPI-Schnittstelle mit einer Bitrate von 6 Mbit / s implementiert.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Debuggen des Programms im MKW40-Chip kann über die SWD-Schnittstelle mit dem JTAG-Adapter und über die Debugging-Schnittstelle UART0 erfolgen, die ebenfalls an den Debugger-Anschluss X4 ausgegeben wird.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NXP bietet mehr als zwei Dutzend Beispiele für die Implementierung verschiedener Anwendungen auf dem MKW40-Chip, darunter: Druck, Glukose, Temperatur, Näherungssensoren, Herzfrequenzmesser usw. </font><font style="vertical-align: inherit;">Es gibt Anwendungen für drahtlosen UART und drahtlosen Bootloader. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe das NXP-Framework für diese Chips gründlich überarbeitet und neue Profile mit Demoprogrammen auf Windows-PCs erstellt, für die auf der PC-Seite kein separater Adapter erforderlich ist. </font><font style="vertical-align: inherit;">Aber dazu später mehr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bluetooth LE ist schwer zu lernen. </font><font style="vertical-align: inherit;">Der Grund ist die umfangreiche Spezifikation und eine große Anzahl ihrer kurzen Paraphrasen in der Dokumentation der Hersteller, die sofort mit einer ungewöhnlichen Terminologie beginnen. </font><font style="vertical-align: inherit;">Fangen wir also damit an.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dekodierung und Übersetzung von Begriffen und Abkürzungen, Slang.</font></font></h1><br>
<ul>
<li><b><font color="#C00000">Pairing</font> </b> —  ().    BLE           .      ,     PIN .</li>
<li><b><font color="#C00000">Bonding</font> </b> — ().             BLE .</li>
<li><b><font color="#C00000">Device </font><font color="#C00000">authentication</font> </b> — ()   ,       .</li>
<li><b><font color="#C00000">Advertising</font> </b> —    BLE   ().         ,   ,  ,    .</li>
<li><b><font color="#C00000">Scanning</font> </b> —       BLE    .           ,    .</li>
<li><b><font color="#C00000">Profile</font> </b> — .   , ,         .</li>
<li><b><font color="#C00000">UUID</font> </b> — universally unique identifier. 128-    .</li>
<li><b><font color="#C00000">BLE </font><font color="#C00000">Host</font> </b> — .     BLE    ,             .   GAP, GATT,   GATT, L2CA.</li>
<li><b><font color="#C00000">BLE </font><font color="#C00000">Controller</font> </b> — .     BLE   - Bluetooth.</li>
<li><b><font color="#C00000">HCI</font> </b> — Host Controller Interface.   API        BLE   BLE .</li>
<li><b><font color="#C00000">GAP</font> </b> — Generic Access Profile,   .      layer ().       .       ,          BLE .</li>
<li><b><font color="#C00000">GATT</font> </b> — Generic Attribute Profile,   .          .  —      (, , ...)         , ,   ..   ,     UUID.</li>
<li><b><font color="#C00000">L2CA</font> </b> — Logical Link Control and Adaptation Layer.             .   ,  ,  ,  ,      .   BLE .</li>
<li><b><font color="#C00000">SMP</font> </b> — Security Manager Protocol.    .      L2CA.</li>
<li><b><font color="#C00000">LTK</font> </b> — Long-Term Key.      BLE .</li>
<li><b><font color="#C00000">IRK</font> </b> — Identity Resolving Key.         .</li>
<li><b><font color="#C00000">CSRK</font> </b> — Connection Signature Resolving Key.    .</li>
<li><b><font color="#C00000">RAND</font> </b> — 64-   ,    LTK</li>
<li><b><font color="#C00000">EDIV</font> </b> — 16-   ,    LTK</li>
<li><b><font color="#C00000">MITM</font> </b> — man-in-the-middle.                  .</li>
<li><b><font color="#C00000">Message </font><font color="#C00000">integrity </font></b> —    .</li>
<li><b><font color="#C00000"></font> </b> —         ,              .     BSP (board support package), HAL (hardware abstraction layer), OSA (OS abstraction layer),    (middleware)  :  ,  ,     .</li>
</ul><br>
<h1>  </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Auswahl eines Chips für BLE habe ich eine kleine Analyse der Angebote der bekanntesten Hersteller durchgeführt. </font><font style="vertical-align: inherit;">Am meisten interessierte mich die Komposition der vorgeschlagenen Software, Frameworks und Tools zum Debuggen von Zusammenstellungen, Zusammenstellungen und Assemblierungen für Projekte unter dem ARM-Kern. </font><font style="vertical-align: inherit;">Ein wichtiger Faktor war die Kontinuität mit der IAR-Umgebung und dem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RTOS MQX-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Framework, </font><font style="vertical-align: inherit;">die bei der Entwicklung der Anwendung auf dem Hauptprozessor des Moduls verwendet werden.</font></font><br>
<br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NORDIC SEMICONDUCTOR</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es stellt ein SDK für den Chip </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nRF51822</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit dem </font><font style="vertical-align: inherit;">Kern </font></font><font color="#C00000"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Cortex</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M0</font></font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Zusammengestellt in IAR, KEIL, GCC. Der BLE-Stapel wird durch eine monolithische Bibliothek ohne Quellcode namens </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SoftDevice dargestellt,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in der alle APIs implementiert sind: GAP, GATT, L2CA, HCI. Um diese Bibliothek herum ist ein Framework mit Treibern aufgebaut. Das Framework enthält zwei RTOS: </font><font style="vertical-align: inherit;">Keils </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RL-ARM RTX</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FreeRTOS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Das Framework verwendet die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protobuf-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Serialisierungstechnologie </font><font style="vertical-align: inherit;">und das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segger RTT-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Debugging </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusätzlich wird das </font><b><font style="vertical-align: inherit;">nrf5 IoT SDK</font></b><font style="vertical-align: inherit;"> angeboten.</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Es enthält die Quellcodes der Protokolle MQTT, COAP, TLS (aus dem MBED-Projekt), cJSON, lwip (kostenloser TCP / IPv4 / IPv6-Protokollstapel), Socket-Schnittstelle und IPv6-Adapter. </font><font style="vertical-align: inherit;">Es gibt auch </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6LoWPAN</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , jedoch ohne Quellcode.</font></font><br>
<br>
<h2><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Texas Instruments</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auf ARM werden nur 2-Kern-BLE-Chips </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CC2640</font></font></a> </b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cortex-M3 und Cortex-M0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) hergestellt. Die entsprechenden Spezifikationen sind jedoch </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth 4.2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Zum Herunterladen wird SDK </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SimpleLink Bluetooth Low Energy Software Stack 2.2.0 bereitgestellt.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Es wird von der eigenen Entwicklungsumgebung von Code Composer Studio kompiliert in der IAR-Umgebung. Es wird mit einem eigenen RTOS </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TI-RTOS 2.16</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und einem entwickelten Framework für die BLE-Stack-Bibliotheken geliefert. SDK als eines der Szenarien beinhaltet die Verwendung eines externen Anwendungsprozessors - Simple Application Processor (SAP). Der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CC2640-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Chip </font><b><font style="vertical-align: inherit;">selbst wird</font></b><font style="vertical-align: inherit;"> als Simple Network Processor (SNP) bezeichnet. Zwischen ihnen wird die Kommunikation unter einem Protokoll hergestellt, das als </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unified Network Processor Interface bezeichnet wird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(NPI). </font><font style="vertical-align: inherit;">Auf der CC2640-Seite wird unbedingt TI-RTOS verwendet, auf der SAP-Prozessorseite können Sie RTOS nach eigenem Ermessen verwenden. </font><font style="vertical-align: inherit;">Der Quellcode für das NPI-Protokoll wird mit dem SDK sowohl für die SAP-Seite als auch für die SNP-Seite geliefert. </font><font style="vertical-align: inherit;">Dies ist die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SimpleLink-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Technologie </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der BLE-Stack selbst ist in 3 vorkompilierte Bibliotheken ohne Quellen unterteilt: Host, Controller, HCI. </font><font style="vertical-align: inherit;">Alle drei Bibliotheken arbeiten nur mit dem Cortex-M3-Prozessor, der Teil des CC2640-Chips ist. </font><font style="vertical-align: inherit;">Zusätzlich zum Studium von TI-RTOS muss der Benutzer einen speziellen Softwaremechanismus oder ein spezielles Protokoll für die Interaktion mit dem BLE-Stack namens iCall studieren.</font></font><br>
<br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikrochip-Atmel</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stellt </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ATBTLC1000</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bluetooth LE-Chips </font><font style="vertical-align: inherit;">auf dem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cortex-M0-Kern her</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Der gesamte Chipstapel wird in den ROM geschrieben. </font><font style="vertical-align: inherit;">Auf der Atmel-Website wurden keine offenen Tools zum Programmieren dieser Chips gefunden. </font><font style="vertical-align: inherit;">Stattdessen schlägt Atmel vor, einen externen Mikrocontroller für die Interaktion mit dem ATBTLC1000 zu verwenden. </font><font style="vertical-align: inherit;">Software für einen externen Mikrocontroller und Beispiele finden Sie im Atmel Software Framework. </font><font style="vertical-align: inherit;">Kompiliert in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atmel Studio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Shell für GCC) oder in IAR.</font></font><br>
<br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cypress Semiconductor Corp.</font></font></a> </h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">produziert eine Familie programmierbarer BLE-Chips basierend auf dem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cortex-M0-Kern</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSoC 4: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSoC 4XX8</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PRoC CYBL1XX7X,</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth 4.2-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Spezifikation unterstützen </font><font style="vertical-align: inherit;">. Projekte für Chips werden in einem speziellen IDE </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSoC Creator erstellt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Die Chips von Cypress unterscheiden sich darin, dass es keine vorgefertigte Peripheriekonfiguration (UART, SPI, I2S, PWM usw.) gibt. Sie muss aus Bibliothekselementen in einem Schaltungseditor mit zusätzlichen Softwarebibliotheken erstellt werden. </font><font style="vertical-align: inherit;">Dies soll eine gewisse Flexibilität bieten. </font><font style="vertical-align: inherit;">Obwohl es dem Entwickler viel Arbeit hinzufügt. </font><font style="vertical-align: inherit;">Ein konfiguriertes Projekt kann mit einer der folgenden Toolchains kompiliert werden: GCC, IAR, Keil. </font><font style="vertical-align: inherit;">BLE gibt es eine der Bibliotheken. </font><font style="vertical-align: inherit;">Der BLE-Stapel wird als vorkompilierte monolithische Bibliothek ohne Quellcodes geliefert, die den BLE-Host, den BLE-Controller und die HCI kombinieren. </font><font style="vertical-align: inherit;">Das Unternehmen veröffentlichte jedoch den Quellcode für Android- und iOS-Anwendungen, die mit BLE arbeiten.</font></font><br>
<br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siliziumlabore</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stellt </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EFR32 Blue Gecko Bluetooth Smart SoCs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf der Basis des ARM </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cortex-M4-Kerns her</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , der die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth 4.2-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Spezifikation unterstützt </font><font style="vertical-align: inherit;">. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EFR32BG1P332F256GMxx-Chips</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> können </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">eine</font></a><font style="vertical-align: inherit;"> Leistung von bis zu </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19,5 dBm </font></font></b><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">liefern</font></a><font style="vertical-align: inherit;"> und einen separaten 868-MHz-Funkkanal mit einer Leistung von bis zu 20 dBm und einer Empfindlichkeit von 121,4 dBm kombinieren. Der Silicon Labs-Chip ist eine riesige Auswahl alternativer Pin-Funktionen und ein System namens </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peripheral Reflex System</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(PRS). Obwohl die Peripherie nicht wie Cypress-Chips erstellt werden kann, ihre Verbindung zu den Pins jedoch nahezu willkürlich ist, ermöglicht das Vorhandensein von PRS die Interaktion miteinander, ohne dass ein Prozessor beteiligt ist. Der BLE-Stapel von Silicon Labs kann Ergebnisse der Profilerstellung von </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Bluetooth Developer Studio</font></a><font style="vertical-align: inherit;"> akzeptieren</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">was unten diskutiert wird. </font><font style="vertical-align: inherit;">Silicon Labs bietet zwei Bluetooth-Stacks an. </font><font style="vertical-align: inherit;">Eines davon ist für Bluegiga-Module konzipiert und unterstützt neben BLE auch reguläres Bluetooth. </font><font style="vertical-align: inherit;">Der zweite Stapel entspricht der Spezifikation 4.2 und nur LE. </font><font style="vertical-align: inherit;">Der BLE-Stapel wird als monolithische vorkompilierte Bibliothek ohne Quellen geliefert. </font><font style="vertical-align: inherit;">Für die Option mit einem externen Mikrocontroller werden ein serielles Protokoll und eine API in den Quellen angeboten. </font><font style="vertical-align: inherit;">Sowohl GCC, IAR als auch Keil können kompilieren. </font><font style="vertical-align: inherit;">Alles wird in einer einzigen Entwicklungsumgebung erledigt. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simplicity Studio V4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Das zugehörige Stack-Framework wird von RTOS nicht unterstützt. </font><font style="vertical-align: inherit;">Im Quellcode von Simplicity Studio finden Sie jedoch Perlen wie Speex mit 8 kbit / s, die für die Übertragung von Sprache über BLE geeignet sind, sowie eine leistungsstarke Fenster-GUI von Segger.</font></font><br>
 <br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STMicroelectronics</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stellt </font><b><font style="vertical-align: inherit;">Cortex-M0-</font></b><font style="vertical-align: inherit;"> basierte </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlueNRG-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Netzwerkcontroller-Chips her, </font><font style="vertical-align: inherit;">die einen BLE-Stapel gemäß der </font><b><font style="vertical-align: inherit;">Bluetooth 4.1-</font></b><font style="vertical-align: inherit;"> Spezifikation enthalten </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
Die Chips selbst sind nicht programmierbar, verfügen jedoch über eine serielle Anwendungsbefehlsschnittstelle (ACI), über die ein externer Mikrocontroller mit ihnen kommunizieren muss. </font><font style="vertical-align: inherit;">Für ACI wurde ein Framework entwickelt, das als Teil der proprietären Entwicklungsumgebung STM32Cube von ST integriert werden kann.</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSR PLC</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stellt keine BLE-Chips auf ARM Cortex her, ist aber an der Implementierung des </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MESH-Netzwerks auf Bluetooth-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Modulen </font><font style="vertical-align: inherit;">interessiert </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Das Video ist </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Die Quellcodes verschiedener BLE-Anwendungen für Android und iOS sind angelegt. </font><font style="vertical-align: inherit;">Es gibt ein SDK.</font></font><br>
 <br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renesas</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">macht BLE-Chips auf seinem 16-Bit- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RL78-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kern </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Der BLE-Stack wird nur an Premium-Benutzer ausgegeben. </font><font style="vertical-align: inherit;">Alle ihre eigenen - Compiler, RTOS, Host-Mikrocontroller. </font><font style="vertical-align: inherit;">Es gibt jedoch ein Plug-In für </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth Developer Studio</font></font></a><br>
<br>
<h2><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dialog Halbleiter</font></font></a></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bieten, wie sie behaupten, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die kleinsten BLE-Chips an</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Die Chips mit Flash-Speicher </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DA14583</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (der Rest ist nur mit ROM) können jedoch nicht als die kleinsten bezeichnet werden - </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b><font style="vertical-align: inherit;">5 x 5</font></b></a><font style="vertical-align: inherit;"> mm. Der Kern </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des Cortex-M0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Maximale Leistung </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 dBm</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Unterstützung für </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth 4.1-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Spezifikation </font><b><font style="vertical-align: inherit;">.</font></b><font style="vertical-align: inherit;"> Um das SDK von der Firma zu erhalten, müssen Sie sich registrieren und den Test bestehen. Aber mit solchen Chipparametern habe ich nicht einmal versucht, ein SDK zu bekommen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also die Quellen von MQTT, COAP, TLS, SPEEX, LwIP und so weiter. Diejenigen in verschiedenen SDKs sind für uns von geringem Interesse. Sie können frei auf Github gefunden werden, ohne an bestimmte Frameworks gebunden zu sein. Die Unterstützung für die Bluetooth 4.2-Spezifikation macht wenig, da es noch nicht möglich ist, sie auf einem PC zu verwenden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nischen-RTOS wie TI-RTOS oder spezielle Scheduler machen es uns schwer, sie zu meistern. Wir versuchen, solche Entscheidungen zu vermeiden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich war erfreut, dass ich mich für die Lösung von Kinetis entschieden habe.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist interessant am NXP Bluetooth LE-Stack für die Kinetis-Familie?</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der BLE-Stack für Kinetis wird wie andere in Form von vorkompilierten Bibliotheken geliefert. Um diese Bibliotheken herum wird ein Multitasking-Framework aufgebaut, das unabhängig vom Betriebssystem Treiber und eine Ebene der Hardwareabstraktion im Quellcode enthält. Das Framework kann so konfiguriert werden, dass es ohne Betriebssystem funktioniert, oder es kann verwendet werden. Ab sofort wird das Framework für FreeRTOS angepasst. Es interagiert jedoch mit FreeRTOS über einen zusätzlichen Satz von Funktionen, die als Abstraktionsschicht des Betriebssystems bezeichnet werden (OS-Abstraktion, OSA). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dank OSA können Sie anstelle von FreeRTOS jedes andere Betriebssystem ersetzen, das Nachrichtenwarteschlangen, Präemptionen, Flags und Timer unterstützt. Zum Beispiel RTOS MQX. Stack wird seltsamerweise nur in der IAR-Umgebung kompiliert. Zum Glück ist dies in meinem Fall kein Problem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Interessanter ist, dass der Stack in zwei Bibliotheken unterteilt ist - BLE-Host und BLE-Controller. </font><font style="vertical-align: inherit;">Und die BLE-Hostbibliothek kann auf einem anderen Chip arbeiten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Bibliotheken interagieren in diesem Fall über das HCI-Protokoll miteinander. </font><font style="vertical-align: inherit;">Das heißt, </font><font style="vertical-align: inherit;">Wo andere Hersteller ein anderes Kommunikationsprotokoll für die Interaktion der Anwendung auf dem externen Mikrocontroller mit dem BLE-Stack entwickeln (denken Sie an SimpleLink), bietet NXP eine Standardlösung an. </font><font style="vertical-align: inherit;">Und vor allem können wir mit diesem Ansatz, bei dem der BLE-Host auf einen leistungsstärkeren externen Mikrocontroller umgestellt wird, die Funktionen unserer GATT-Datenbank und -Dienste erheblich verbessern.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kurz über BLE</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine offene Bluetooth-Spezifikation Version 4.2 finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Die Beschreibung der unteren BLE-Ebene ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controller-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ebene </font><font style="vertical-align: inherit;">) ist darin als </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Vol.6 Core System Package [Low Energy Controller-Volume]“</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ab Seite 2544 enthalten. Die obere Ebene ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Host-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ebene </font><font style="vertical-align: inherit;">) mit einer Beschreibung des ATT-Protokolls und des GATT-Profils befindet sich in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Vol.3 Core System Package [Host Volume] ”des</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dokuments ab Seite 1693. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwendeter Frequenzbereich </font></font><br>
<a href=""><img align="left" width="1010" src="https://habrastorage.org/getpro/geektimes/post_images/3fb/e8a/e0e/3fbe8ae0e3e35ab16e27593cef024fff.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Zum Vergrößern anklicken)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Drei Frequenzen (in der obigen Abbildung sind die Kanalnummern 37.38.39 angegeben) sind für adresslose Rundfunkpakete und der Rest für die Übertragung von Paketen beim Einrichten logischer Kommunikationskanäle zwischen Geräten vorgesehen. Ein bekanntes Merkmal von Bluetooth ist, dass bei der Übertragung von Paketen jedes nachfolgende Paket mit einer anderen Frequenz übertragen wird, die pseudozufällig aus der Liste der zulässigen ausgewählt wird. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle Daten in BLE-Paketen können verschlüsselt und authentifiziert werden. Eine dynamische zufällige Erzeugung von Geräteadressen und deren Identifizierung unter Verwendung von Hashing wird ebenfalls verwendet, d.h. Nachdem wir die Adresse des Geräts auf Sendung abgefangen haben, können wir sie nicht länger als 15 Minuten verwenden, da sich die Adresse gemäß einem uns in dieser Zeit unbekannten Algorithmus ändert.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BLE-Module können als unidirektionale Sender arbeiten, d.h. Senden Sie einfach einige Daten in Form von Werbepaketen, z. B. Temperatur, ohne eine bidirektionale Verbindung herzustellen. </font><b><font style="vertical-align: inherit;">Hierzu</font></b><font style="vertical-align: inherit;"> kann der Datentyp in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Werbepaketen verwendet</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> werden, die als herstellerspezifische </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daten gekennzeichnet</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sind </font><font style="vertical-align: inherit;">. Ein Computer oder Tablet kann Daten von Hunderten solcher Sender ohne unnötige vorbereitende Schritte zum Suchen, Herstellen einer Verbindung, Eingeben eines PIN-Codes usw. empfangen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine andere Möglichkeit, Daten ohne Installation eines Kommunikationskanals zu übertragen, ist die Übertragung im Anforderungs-Antwort-Modus (die Anforderung ist das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScanRequest-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Paket </font><font style="vertical-align: inherit;">, die Antwort des Moduls ist das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScanResponce-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Paket </font><font style="vertical-align: inherit;">). Diese </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE unterscheidet sich</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erheblich von </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wi-Fi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wo selbst für das einfachste Thermometer eine Verbindung hergestellt werden muss, die die Ressourcen des Routers beansprucht. </font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE-Protokollstapel</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die folgende Abbildung zeigt </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wie es ein Mikrocontroller-Programmierer sieht. Der BLE-Stack besteht aus zwei Softwareteilen: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Host</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controller</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Host-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Software </font><font style="vertical-align: inherit;">befasst sich mit Funktionen auf hoher Ebene zum Organisieren und Verwalten von Daten, Verbindungen, und der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controller</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verwaltet die physische Peripherie des Transceivers, arbeitet mit geheimen Schlüsseln und befasst sich mit anderen Funktionen auf niedriger Ebene. Die genannten Teile werden über die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HCI-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Softwareschnittstelle </font><font style="vertical-align: inherit;">( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Host Controller Interface</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) verbunden. In einer PC-Implementierung wird der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Host-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Teil </font><font style="vertical-align: inherit;">auf einem Computer und der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controller-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Teil </font><font style="vertical-align: inherit;">auf einem Hardware-Transceiver ausgeführt</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HCI-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Protokoll werden </font><font style="vertical-align: inherit;">meistens über </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USB übertragen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Bei der Implementierung auf dem Mikrocontroller arbeiten beide Teile auf demselben Chip, und die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HCI-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schnittstelle </font><font style="vertical-align: inherit;">wird einfach in eine direkte Datenübertragung von der Host-Task (Softwaremodul) zur Controller-Task (Softwaremodul) und umgekehrt umgewandelt. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der </font><font style="vertical-align: inherit;">Tat sieht der Programmierer mehrere Sätze von API auf Arbeits </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Host</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : bekannt als </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das GATT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die GAP, L2CA, einem SMP, der HCI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mit der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GAP-API</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wird der Betriebsmodus des Geräts eingestellt - </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zentral, Peripherie, Beobachter, Sender</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und die Verbindung wird bei Bedarf hergestellt. Und mit der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GATT-API</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das direkte Senden und Empfangen nützlicher Daten und deren Analyse werden durchgeführt. </font></font><br>
<a href=""><img align="left" width="691" src="https://habrastorage.org/getpro/geektimes/post_images/4df/ce8/06a/4dfce806ac92c29f99024ede56bba3d6.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Zum Vergrößern anklicken)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Die meisten vorhandenen Geräte unterstützen derzeit BLE 4.1, obwohl Version 4.2 vorhanden ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle Unterschiede von Version 4.2 gegenüber der vorherigen beziehen sich speziell auf Verbesserungen im BLE-Teil: erhöhte Geschwindigkeit, die Fähigkeit zur Übertragung von IP-Protokoll- und HTTP-Verkehr, erhöhter kryptografischer Schutz und Unkenntlichkeit für externe Beobachter.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein wichtiges Merkmal von BLE im Vergleich zu Wi-Fi ist die Angabe nicht nur des Kommunikationskanals, sondern auch der Anwendungen, die ihn selbst verwenden. Dies wird als Profile und Dienste bezeichnet. Profile mit Diensten beschreiben die Rollen von Geräten, den Zweck der Daten, die Zusammensetzung und das Format der Daten, den Datenschutz, die Reihenfolge, Arten und Ereignisse des Austauschs und nicht nur die Art und Weise, wie die Daten übertragen werden. Auf diese Weise können Sie das Rad nicht neu aus den Protokollen erfinden, wenn Sie beispielsweise einen Körpertemperatursensor oder einen Pulsmesser entwickeln. Spezifikationen wurden bereits angegeben, es bleibt nur auf der Geräteseite, um die notwendigen Felder zum Senden der Messergebnisse auszufüllen. Kunden solcher Geräte in Form von Smartphones, Tablets, PCs oder Küchengeräten erkennen diese Daten automatisch und zeigen sie an oder verwenden sie entsprechend. Alles dankdass alle Hersteller die gleichen BLE-Spezifikationen bezüglich der Darstellung von Temperatur- oder Herzfrequenzdaten und der Arbeit mit ihnen befolgen. Es gibt jedoch noch Raum für die Vorstellungskraft des Entwicklers, da Profile Mechanismen zur Erweiterung der Funktionalität aufweisen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Folgende ist eine grobe Hierarchie von Attributen in einem BLE-Gerät. </font></font><br>
<a href=""><img align="left" width="609" src="https://habrastorage.org/getpro/geektimes/post_images/7df/ca0/0fe/7dfca00fe6427b57e47b1ba1e10c4767.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Zum Vergrößern anklicken)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Unten finden Sie einen etwas detaillierteren typischen Attributbaum. Dies ist kein vollständiger Baum, die meisten werden weggelassen, da er zu viel Platz beanspruchen würde. Farben markieren Baumebenen, jedes Attribut hat eine eindeutige Nummer - UUID. Das Aufzeichnen von Standardnummern wird auf 16 Bit reduziert. In dieser Abbildung sind alle Zahlen Standard. GAP- und GATT-Profile werden ebenfalls als Services mit ihren Standardfunktionen dargestellt. Jeder Dienst kann über ein eigenes Sicherheitsmodell und eine eigene Berechtigung verfügen. Der gesamte Baum im Gerät wird als Datenbank namens GATT-Datenbank gespeichert, normalerweise in Form einer einfachen Tabelle mit Querverweisen. </font></font><br>
<br>
<a href=""><img align="left" width="1010" src="https://habrastorage.org/getpro/geektimes/post_images/3b1/d8c/5e7/3b1d8c5e7718f9e8e334af7de0a694b7.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Zum Vergrößern anklicken)</font></font></em></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Serviceeigenschaften haben viele Eigenschaften, wie unten gezeigt. </font><font style="vertical-align: inherit;">Hier muss man sich für die Tautologie entschuldigen, aber in BLE gibt es wirklich eine Art Terminologiekrise. </font><font style="vertical-align: inherit;">Mit einem Wort, die Merkmale des dazugehörigen Dienstes können das Lesen, Schreiben, die Notwendigkeit von Benachrichtigungen, Bestätigungen, Signaturen usw. spezifizieren. </font></font><br>
<br>
<a href=""><img align="left" width="752" src="https://habrastorage.org/getpro/geektimes/post_images/c7b/dd6/c8c/c7bdd6c8cc8b066c8390a00634a7927f.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Zum Vergrößern anklicken)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
BLE ist eine seriöse Technologie. Es wurde so viel getan, um Sicherheit und maximale Formalisierung zu gewährleisten, was wiederum das Erreichen der Kompatibilität erleichtern sollte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Datenaustausch zwischen BLE-Geräten erfolgt durch Schreiben und Lesen der Werte der Merkmale. </font><font style="vertical-align: inherit;">Streaming-Kanäle wie TCP oder UART sind nicht hier. </font><font style="vertical-align: inherit;">Und wenn die Geräte über sie verfügen, werden sie von Software-Add-Ons einer höheren Ebene organisiert.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entwicklungswerkzeuge</font></font></h1><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entwicklungstools mit der vorgeschlagenen Bluetooth Special Interest Group (Bluetooth SIG)</font></font></b> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
-Site </font></font><font color="#BA5555"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.bluetooth.com/develop-with-bluetooth/developer-resources-tools</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die </font><font style="vertical-align: inherit;">folgenden nützlichen Tools werden </font><font style="vertical-align: inherit;">auf der Site der Hauptstandardisierungsorganisation - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth SIG - angeboten</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth Developer Studio</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth Developer Studio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein Tool, mit dem Sie Profile, Dienste, Merkmale und Deskriptoren korrekt erstellen und in die Implementierung eines </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Geräts </font><font style="vertical-align: inherit;">einfügen können </font><font style="vertical-align: inherit;">, d. H. Erstellen Sie eine Datenbank. Wenn Sie einen zusätzlichen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hardware-Bluetooth-Adapter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für 99 US-Dollar </font><font style="vertical-align: inherit;">kaufen </font><font style="vertical-align: inherit;">, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">können Sie mit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dem </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Programm</font></a><font style="vertical-align: inherit;"> Bluetooth-Protokollpakete </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">abfangen</font></a><font style="vertical-align: inherit;"> , entschlüsseln und anzeigen. Das Programm kann auch die erstellten Dienste debuggen und testen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weil in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Genehmigte Profile werden ausführlich beschrieben, auch kleinere Fehler in Bezug auf Format, Nummerierung, Zugänglichkeit usw. In diesen Profilen treten Kompatibilitätsprobleme auf. Bei nicht standardmäßigen Profilen ist es jedoch sehr schwierig, auf ein Tool zu verzichten, das einen Baum von Diensten, Merkmalen und Deskriptoren in Übereinstimmung mit allen Spezifikationen genau erstellt. Es ist leicht, die Namen von Diensten, Merkmalen, Deskriptoren und deren eindeutigen Multi-Byte-Nummern ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UUID)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu verwechseln </font><font style="vertical-align: inherit;">. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis des Tools sind insbesondere die generierten </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dateien, die Profile, Dienste, Merkmale und Deskriptoren im Projekt des Benutzers beschreiben. Diese XML-Dateien werden direkt von Silicon Labs Simplicity IDE verwendet, um sie für ihre Chips in eingebettete Projekte zu integrieren. </font></font><br>
<br>
<a href=""><img align="left" width="1010" src="https://habrastorage.org/getpro/geektimes/post_images/a38/1de/850/a381de850e5724e57c5e607d78568eff.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Zum Vergrößern anklicken)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiteres Ergebnis des Tools kann der Quellcode für das Gerät sein, das mit der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Datenbank arbeitet </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dafür muss der Benutzer sein Plugin in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> schreiben </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Das Programm bietet auch Plug-in - </font><font style="vertical-align: inherit;">Benutzer Zugriff auf die Datenbank über eine spezielle </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eine Reihe vorgefertigter Plug-Ins</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die verschiedene Quelltextdateien generieren, die für die Kompilierung in Umgebungen und Software-Frameworks von Drittanbietern geeignet sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es </font><font style="vertical-align: inherit;">gibt noch keine Plugins </font><font style="vertical-align: inherit;">für Lösungen, die auf dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NXP Kinetis KW40Z Connectivity Software</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Framework basieren </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungsbeschleuniger</font></font></h2><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Application Accelerator 2.1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - eine Reihe von Demo-Projekten mit Quelltexten für verschiedene </font></font><font color="#C00000"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Android </font></font></b><font color="#C00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6-</font></font></font><font style="vertical-align: inherit;"></font><font color="#C00000"><font style="vertical-align: inherit;"></font></font><font style="vertical-align: inherit;"></font><font color="#C00000"><font style="vertical-align: inherit;"></font></font><font style="vertical-align: inherit;"></font><font color="#C00000"><font style="vertical-align: inherit;"></font></font><font color="#C00000"><font style="vertical-align: inherit;"></font></font><font style="vertical-align: inherit;"></font><font color="#C00000"><font style="vertical-align: inherit;"></font></font><font color="#C00000"><font style="vertical-align: inherit;"></font></font><font style="vertical-align: inherit;"></font><font color="#C00000"><font style="vertical-align: inherit;"></font></font><font color="#C00000"><font style="vertical-align: inherit;"></font></font><font color="#C00000"><font style="vertical-align: inherit;"></font></font><font color="#C00000"><font style="vertical-align: inherit;"></font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Betriebssysteme </font><font color="#C00000"><font style="vertical-align: inherit;">. </font></font><font color="#C00000"><font color="#C00000"><font style="vertical-align: inherit;">0</font></font></font><font color="#C00000"><font style="vertical-align: inherit;"> , </font></font><font color="#C00000"><font color="#C00000"><font style="vertical-align: inherit;">Blackberry</font></font></font><font color="#C00000"><font style="vertical-align: inherit;"> , </font></font><font color="#C00000"><font color="#C00000"><font style="vertical-align: inherit;">iOS </font></font></font><font color="#C00000"><font color="#C00000"><font style="vertical-align: inherit;">9</font></font></font><font color="#C00000"><font style="vertical-align: inherit;"> , </font></font><font color="#C00000"><font color="#C00000"><font style="vertical-align: inherit;">Tizen </font></font></font><font color="#C00000"><font color="#C00000"><font style="vertical-align: inherit;">2</font></font></font><font color="#C00000"><font style="vertical-align: inherit;"> . </font></font><font color="#C00000"><font color="#C00000"><font style="vertical-align: inherit;">4 </font></font></font><font color="#C00000"><font color="#C00000"><font style="vertical-align: inherit;">und </font></font></font><font color="#C00000"><font color="#C00000"><font style="vertical-align: inherit;">Windows </font></font></font><font color="#C00000"><font color="#C00000"><font style="vertical-align: inherit;">10</font></font></font><font style="vertical-align: inherit;"> . Unter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 10 gelten</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Projekte nur für die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visual Studio-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Entwicklungsumgebung für die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UWP-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Architektur </font><b><font style="vertical-align: inherit;">(Universal Windows Platform).</font></b><font style="vertical-align: inherit;"> Das heißt, Diese Projekte können nicht unter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Forms</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WPF</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.NET Frameworks</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kompiliert werden </font><font style="vertical-align: inherit;">. Und Brücken für die Übersetzung regulärer Windows-Anwendungen in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UWP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gerade erstellt werden. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist zu beachten, dass </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UWP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> das Platzieren von Anwendungen im </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Store ermöglicht</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , jedoch keine einfache ausführbare </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXE-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Datei erstellt, die Sie einfach kopieren und ausführen können. </font><font style="vertical-align: inherit;">Der erste Start einer </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UWP-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anwendung wird </font><font style="vertical-align: inherit;">immer von einer Installation begleitet. </font><font style="vertical-align: inherit;">All dies schafft Schwierigkeiten für den Entwickler. </font><font style="vertical-align: inherit;">Und die Funktionalität der Demonstrationsprojekte lässt zu wünschen übrig.</font></font><br>
<br>
<a href=""><div style="text-align:center;"><img width="376" src="https://habrastorage.org/getpro/geektimes/post_images/fd8/213/747/fd82137474453134c3bd6744473908a8.png"></div><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Zum Vergrößern anklicken)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Oben sehen Sie einen Screenshot der einzigen Demo-Anwendung für</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Windows - BLEServiceBrowser</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gateway Smart Satarter Kit</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Starter Kit die Smart - </font><font style="vertical-align: inherit;">Gateway </font></font></a> <font color="#BA5555"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></font><font color="#000F00"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Projekt </font></font></b><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gateway - </font></font></font><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE - </font></font></font><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geräte </font></font></font><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an den </font></font></font><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WEB - </font></font></font><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server </font></font></font><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font></font><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selbst </font></font></font><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WEB - </font></font></font><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server</font></font></font> </font><font color="#000F00"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> implementiert die </font></font></font><font style="vertical-align: inherit;"><font color="#000F00"><font style="vertical-align: inherit;">Benutzerschnittstelle</font></font><font style="vertical-align: inherit;"> für die Netzwerk - </font><b><font style="vertical-align: inherit;">BLE</font></b><font style="vertical-align: inherit;"> - Geräte. Alles ist in Node.js implementiert. Es wird vorgeschlagen, auf einem </font><b><font style="vertical-align: inherit;">Raspberry Pi 2 Modell B-</font></b><font style="vertical-align: inherit;"> Mikrocomputer </font><font style="vertical-align: inherit;">mit dem </font><b><font style="vertical-align: inherit;">Raspbian Jessie-</font></b><font style="vertical-align: inherit;"> Betriebssystem bereitzustellen </font><font style="vertical-align: inherit;">. Der direkte Anschluss des </font><b><font style="vertical-align: inherit;">Raspberry Pi</font></b><font style="vertical-align: inherit;"> an </font><b><font style="vertical-align: inherit;">BLE-</font></b><font style="vertical-align: inherit;"> Geräte erfolgt </font><font style="vertical-align: inherit;">über die </font><b><font style="vertical-align: inherit;">Bluetooth-HCI-</font></b><font style="vertical-align: inherit;"> Schnittstelle von Sockets auf </font><b><font style="vertical-align: inherit;">L2CAP-</font></b><font style="vertical-align: inherit;"> Ebene </font><font style="vertical-align: inherit;">und </font><b><font style="vertical-align: inherit;">USB-HCI</font></b></font><font color="#000F00"><font style="vertical-align: inherit;"></font></font><font color="#000F00"><font style="vertical-align: inherit;"></font></font><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adapter. </font><font style="vertical-align: inherit;">Um unter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows ausgeführt zu werden, müssen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sie einen speziellen Ersatz für den Standard- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bluetooth-HCI-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Treiber installieren </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Die Lösung funktioniert aufgrund des begrenzten HCI-Treibers mit einer sehr begrenzten Anzahl von Arten von Hardwareadaptern.</font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/156/371/75e/15637175e9313970bef4ee048bc18b56.png"> <br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peryton</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter den kommerziellen Tools </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> das Analyseprogramm </font><font style="vertical-align: inherit;">ein interessanter </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">BLE-Verkehrsanalysator von Perytons</font></a><font style="vertical-align: inherit;"> . Der Analysator läuft auf </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows-PCs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ab Version 7. </font><font style="vertical-align: inherit;">Dies ist ein wichtiger Punkt, da native BLE-Treiber für Windows erst ab Version 8 funktionieren. </font><font style="vertical-align: inherit;">Der Analysator arbeitet mit einer begrenzten </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liste von Hardware-BLE-Adaptern</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Arbeit mit Adaptern gibt es auch Einschränkungen bei der Analyse, die durch die Verkehrsverschlüsselung in BLE verursacht werden. </font></font><br>
<br>
<a href=""><img align="left" width="1010" src="https://habrastorage.org/getpro/geektimes/post_images/1e3/c09/488/1e3c094883e576474a719aff13a0b422.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Zum Vergrößern anklicken)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selbst mit der Testversion des Programms können Sie jedoch viele Vorteile erzielen. </font><font style="vertical-align: inherit;">Das Programm wird von Demonstrationsaufzeichnungen von Interceptions begleitet, die reale Geräte austauschen. </font><font style="vertical-align: inherit;">Diese Datensätze geben nach dem Laden in das Programm ein detailliertes Bild des Betriebs des gesamten BLE-Protokollstapels. </font><font style="vertical-align: inherit;">Das Anzeigen eines solchen Abfangens ersetzt das Erkunden der gesamten Bluetooth-Spezifikation.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bushund</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie nur irgendwie die Aktivität zwischen dem Computer und dem BLE-Gerät überwachen müssen und auf eine detaillierte Analyse des Protokolls verzichten können, ist der bekannte Windows-Treiber-Verkehrsabfangjäger namens </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bus Hound ausreichend</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im folgenden Screenshot sehen Sie den Stream der empfangenen Werbepakete. </font><font style="vertical-align: inherit;">Die Ungleichmäßigkeit der Paketempfangszeitintervalle ist deutlich sichtbar. </font><font style="vertical-align: inherit;">Dies weist auf einen signifikanten Paketverlust hin. </font><font style="vertical-align: inherit;">Das Timeout-Intervall für das BLE-Gerät wurde auf 20 ms eingestellt. </font></font><br>
<br>
<a href=""><img align="left" width="784" src="https://habrastorage.org/getpro/geektimes/post_images/302/242/408/30224240815c37125998cb7eabbb7184.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Zum Vergrößern anklicken) Der folgende</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Screenshot zeigt die Darstellung des BLE-Geräts im Bus Hound-Fenster nach dem Pairing mit einem PC. </font><font style="vertical-align: inherit;">Für jeden Gerätedienst wird nach dem Peering ein logischer Kommunikationskanal angezeigt. </font><font style="vertical-align: inherit;">Hier sehen Sie die UUID des Geräts und der Dienste.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/0ac/28d/99d/0ac28d99d49e38dea38c2da5caa46658.png"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE Verkehrsanalysator (Sniffer) USB-KW40Z</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist ein Tool aus dem Kinetis Development Support Kit. Deshalb werde ich näher darauf eingehen. </font><font style="vertical-align: inherit;">NXP- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sniffer-Seite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/ef1/108/1c9/ef11081c9b38097c1b2fdcd91cb01094.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Sniffer wurde von NXP (oder besser gesagt dem früheren Freescale) entwickelt und kann kostengünstig in beliebten Online-Funkkomponentengeschäften erworben werden: Mouser, Digi-Key, Farnell ... Er wird von NXP als Tool zur Überwachung von Funkpaketen angeboten, die von BLE-Geräten gesendet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit diesem Gerät können Sie die Struktur von Paketen untersuchen, sie in einem Protokoll aufzeichnen und die Verkehrsdichte analysieren. Die Sniffer-Schaltung ist offen für Studien, aber das Mikrocontroller-Programm wird als Binärdatei geliefert. Mit Sniffer können Sie Pakete nach Adresswerten filtern.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können die PC-Software für den Sniffer über die folgende Suchabfrage auf der Website </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.nxp.com herunterladen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kinetis_Protocol_Analyzer_Adapter.exe</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Da der Sniffer neben der Hauptfunktion auch eine Debugging-Plattform für verschiedene Anwendungen sein kann, werden binäre grundlegende Firmware-Dateien daran angehängt Sie können die Sniffer-Funktionalität nach dem Experimentieren wiederherstellen. Dateien werden mit dem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KW40Z Connectivity Software-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Paket </font><b><font style="vertical-align: inherit;">geliefert</font></b><font style="vertical-align: inherit;"> , das von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.nxp.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für die Suchabfrage KW40Z_Connectivity_Software heruntergeladen wird. Die Dateien heißen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sniffer_processing_core_usbkw40z_k22f.bin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (für den Mikrocontroller MK22FN512 auf der Sniffer- </font><b><font style="vertical-align: inherit;">Karte</font></b><font style="vertical-align: inherit;"> ) und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sniffer_radio_core_usbkw40z_kw40z.bin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(für den Mikrocontroller MKW40Z auf der Sniffer-Karte). Dateien werden mit SWD-Debuggern programmiert: JLink, STLink, OpenSDA ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Von der PC-Seite wird das Gerät als zusammengesetztes USB-Gerät mit einem COM-Port und einem Debug-Port gemäß der Spezifikation OpenSDA mit CMSIS-DAP-Firmware wahrgenommen. In der IAR-Umgebung können Sie den MKW40Z-Sniffer-Chip frei programmieren und debuggen, indem Sie seinen anderen MK22FN512-Chip als Träger für die Funktionalität des Debug-Adapters verwenden. Beide Chips auf der Platine verfügen jedoch über Standard-SWD-Anschlüsse für einen externen Debug-Adapter.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sniffer garantiert nicht den Empfang aller in der Luft übertragenen Pakete. Es ist leicht zu überfluten, wonach keine Pakete mehr akzeptiert werden. Daher wird empfohlen, die Filterung nach Adresse zu aktivieren, um nur Pakete vom interessierenden Knoten mit relativ seltenem Datenverkehr zu empfangen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das folgende Fenster zeigt das Paketanalysatorprogramm. Das Fenster enthält das Abfangen auf allen drei Kanälen: </font></font><br>
<br>
<a href=""><img align="left" width="746" src="https://habrastorage.org/getpro/geektimes/post_images/900/756/ae8/900756ae87aa2a06256d83774460fbd5.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Zum Vergrößern anklicken)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bei der Installation der Analysesoftware auf einem PC wird ein virtueller Ethernet-Adapter erstellt, der über den virtuellen COM-Port des Sniffers aufgenommene Pakete in Ethernet-Pakete konvertiert. In meinem Fall erhielt ein solcher virtueller Adapter automatisch einen einfachen Namen - Ethernet. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Pakete anzuzeigen, müssen Sie zusätzlich das Wireshark Ethernet Packet Sniffer-Programm installieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ansicht des Hauptfensters des Wireshark-Programms während der Überwachung des Datenverkehrs. </font><font style="vertical-align: inherit;">Wireshark beschreibt ausführlich alle Bitfelder des LE LL-Protokollpakets (Link Layer). Nach dem Herstellen einer Verbindung zwischen den Geräten und dem Starten des L2CAP-Protokolls wird der Paketinhalt jedoch nicht erkannt, da er verschlüsselt übertragen wird. </font></font><br>
<br>
<a href=""><img align="left" width="736" src="https://habrastorage.org/getpro/geektimes/post_images/762/d12/cde/762d12cdec62b23d94b1f5e254d19c4f.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Zum Vergrößern anklicken)</font></font></em></a><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wireshark-Fensteransicht mit Dekodierung des Werbepakets</font></font></b><div class="spoiler_text"><a href=""><img align="left" width="745" src="https://habrastorage.org/getpro/geektimes/post_images/37a/bbd/8ba/37abbd8ba6306e22b6c2dbd50e92f3c2.png"><br clear="left">
<em>(  )</em></a><br>
<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inhalt des Scananforderungspakets</font></font></b><div class="spoiler_text"><a href=""><img align="left" width="740" src="https://habrastorage.org/getpro/geektimes/post_images/5d7/4fb/fd5/5d74fbfd589f42c9ebaed86c0bef7f3a.png"><br clear="left">
<em>(  )</em></a><br>
<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inhalt des Scan Responce-Pakets</font></font></b><div class="spoiler_text"><a href=""><img align="left" width="741" src="https://habrastorage.org/getpro/geektimes/post_images/012/627/201/012627201de64dfc530926aa9241c20c.png"><br clear="left">
<em>(  )</em></a><br>
<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Inhalt des Verbindungsanforderungspakets mit Parametern, die die Geschwindigkeit des Kommunikationskanals bestimmen</font></font></b><div class="spoiler_text"><a href=""><img align="left" width="755" src="https://habrastorage.org/getpro/geektimes/post_images/7a8/032/eeb/7a8032eeb21f6834f6f9bfc19d6bfd8e.png"><br clear="left">
<em>(  )</em></a><br>
<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verbindungspaketsequenz</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/getpro/geektimes/post_images/7e7/baf/5c9/7e7baf5c91ecdc461aa878c8148a6d48.png"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kommentare, Ergänzungen, Korrekturen und Einwände gegen die Informationen in diesem Artikel sind willkommen.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de394757/">https://habr.com/ru/post/de394757/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de394747/index.html">AlphaGo wird mit dem chinesischen Meister Ke Jie spielen</a></li>
<li><a href="../de394749/index.html">Критическая дыра в сердце сотовых сетей</a></li>
<li><a href="../de394751/index.html">Herstellung von Säulengehäusen: Materialübersicht</a></li>
<li><a href="../de394753/index.html">Spiele für Programmierer</a></li>
<li><a href="../de394755/index.html">Kenntnisse der Physik helfen, Roulette-Casinos zu schlagen</a></li>
<li><a href="../de394759/index.html">Wie das US-Verteidigungsministerium die Ohren von Soldaten schützt</a></li>
<li><a href="../de394761/index.html">Mit dem drahtlosen Adapter „Morecard“ in Kreditkartengröße kann das iPhone gleichzeitig in den Netzwerken von zwei Betreibern verbleiben</a></li>
<li><a href="../de394767/index.html">Мессенджеры «подъедают» операторов связи, те готовят ответный удар</a></li>
<li><a href="../de394769/index.html">Das künstliche System übertraf das natürliche Blatt hinsichtlich der Effizienz der Photosynthese</a></li>
<li><a href="../de394771/index.html">ISS-Modelle auf der Erde</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>