<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ ๐ฉ๐ฝโ๐ณ ุฌุงูุน ุงูููุงูุฉ ูุญูู ุงูุตูุน ูู OpenJDK ๐๐ฝ ๐ง ๐ผ๐ฟ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฐู ุชุฑุฌูุฉ ููููุงูุฉ ุงูุชู ูุชุจูุง ุฃูููุณู ุดูุจูููู "ุงูุนููุง ุจููุณู (OpenJDK) Garbage Collector" ุ ูุงูุชู ููุดุฑุช ุจููุงููุฉ ุงููุคูู. ุงูุฅุจูุงุบ ุนู ุฃู ุฃุฎุทุงุก ูุทุจุนูุฉ ูุบูุฑูุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฌุงูุน ุงูููุงูุฉ ูุญูู ุงูุตูุน ูู OpenJDK</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/443250/" style=";text-align:right;direction:rtl"><blockquote style=";text-align:right;direction:rtl">  ูุฐู ุชุฑุฌูุฉ ููููุงูุฉ ุงูุชู ูุชุจูุง ุฃูููุณู ุดูุจูููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ุงูุนููุง ุจููุณู (OpenJDK) Garbage Collector"</a> ุ ูุงูุชู ููุดุฑุช ุจููุงููุฉ ุงููุคูู.  ุงูุฅุจูุงุบ ุนู ุฃู ุฃุฎุทุงุก ูุทุจุนูุฉ ูุบูุฑูุง ูู ุงูุฃุฎุทุงุก ูู PM - ุณูููู ุจุฅุตูุงุญูุง. </blockquote><p style=";text-align:right;direction:rtl">  ุนูููุฉ ุฅูุดุงุก ุดูุก ูุง ูู ููุช ุงูุชุดุบูู ูู ููุงุฑุณุฉ ููุชุนุฉ.  ุนูู ุงูุฃูู ุฅูุดุงุก ุงูุฅุตุฏุงุฑ ุงูุฃูู!  ุชุนุฏ ุนูููุฉ ุฅูุดุงุก ูุธุงู ูุฑุนู ููุซูู ุจู ูุนุงูู ุงูุฃุฏุงุก ูุขูู ูููุดู ุ ูุงูุฐู ูููู ููุงุญุธุชู ูุชุตุญูุญ ุณูููู ุจุณูููุฉ ุ ูููุฉ ุจุงูุบุฉ ุงูุตุนูุจุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฅู ุฅูุดุงุก ุฃุฏุงุฉ ุชุฌููุน ูุฌูุนุงุช ููุงูุงุช ุจุณูุทุฉ ุฃูุฑ ุจุณูุท ุจุดูู ุฎุงุฏุน ุ ูุงูุขู ุฃุฑูุฏ ุงูููุงู ุจุฐูู ูู ูุฐู ุงูููุงูุฉ.  ุฃุฌุฑู ุฑููุงู ูููู ูู FOSDEM 2019 ุญุฏูุซูุง ูุนุฑุถูุง ุจุนููุงู <a href="">"ุงููุชุงุจุฉ ูู GC ูู 20 ุฏูููุฉ"</a> ุจุงุณุชุฎุฏุงู ุฅุตุฏุงุฑ ุณุงุจู ูู ูุฐุง ุงูุชุตุญูุญ.  ุนูู ุงูุฑุบู ูู ุฃู ุงูููุฏ ุงููุทุจู ููุงู ููุถุญ ุงููุซูุฑ ููุชู ุงูุชุนููู ุนููู ุจูู ููุฑุฉ ุ ููุงู ุญุงุฌุฉ ููุตู ุฌูุฏ ุฑููุน ุงููุณุชูู ููุง ูุญุฏุซ - ููุฐุง ุธูุฑุช ูุฐู ุงูููุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุณูุณุงุนุฏ ุงูููู ุงูุฃุณุงุณู ูุนูู ุฌุงูุนู ุงูููุงูุฉ ุจุดูู ูุจูุฑ ูู ููู ูุง ูู ููุชูุจ ููุง.  ุณุชุณุชุฎุฏู ุงูููุงูุฉ ุชูุงุตูู ูุฃููุงุฑ ูู ุชุทุจูู ูุนูู ูู HotSpot ุ ูููู ูู ุชููู ููุงู ุฏูุฑุฉ ุชูููุฏูุฉ ุญูู ุชุตููู GC ููุง.  ุฎุฐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชูุจ GC</a> ููุฑุงุกุฉ ุงููุตูู ุงูุฃููู ุญูู ุฃุณุงุณูุงุช GC ุ ูุณูุจุฏุฃ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงู Wikipedia</a> ุจุดูู ุฃุณุฑุน. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/4v/1i/4y/4v1i4yrxpcef-vvvkknzfuhmt-w.jpeg"></p><a name="habracut"></a><br><h1 id="soderzhanie" style=";text-align:right;direction:rtl">  ุงููุญุชููุงุช </h1><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงููุต ุงููุฎูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1. ูุง ูุชููู ูู GC</a> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1.1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุจุณูููู ุฌู ุณู</a> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1.1.1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฎุตูุต ุงูุฐุงูุฑุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1.1.2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุญูุงุฌุฒ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1.1.3.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฑุงูุจุฉ ุงูุงุชุตุงู</a> </li></ul></li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1.2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุช ุงูุชุดุบูู ู GC</a> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1.2.1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนูุงุตุฑ ุงูุฌุฐุฑ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1.2.2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุฆู ุงูุฒุญู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1.2.3.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุฒูุญ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1.2.4.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจูุงูุงุช ุนูุงูุฉ</a> </li></ul></li></ul></li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">2. ุงูุฎุทุฉ ุงูุนุงูุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">3. ุชูููุฐ GC ุงูุฃุณุงุณูุฉ</a> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">3.1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุฏูุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">3.2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุถุน ุงูุนูุงูุงุช</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">3.3.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุณุงุจ ุนูุงููู ุฌุฏูุฏุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">3.4.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅุตูุงุญ ุงููุคุดุฑุงุช</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">3.5.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุญู ูุชุญุฑู ุงูุฃุดูุงุก</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">3.6.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฎุงุชูุฉ</a> </li></ul></li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">4. ูู ุจุชูุตูู GC ุฅูู VM</a> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">4.1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฌุฐุฑ ุชุฑุงููุฑุณุงู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">4.2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Safepoints ูููู ุงูุนุงูู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">4.3.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุฎุทุงุก ุชุฎุตูุต ุงูุฐุงูุฑุฉ</a> </li></ul></li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">5. ุงูุชุฌูุน</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">6. ุงุฎุชุจุงุฑ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">7. ุงูุฃุฏุงุก</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">8. ูุงุฐุง ุจุนุฏุ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">9. ุงูุงุณุชูุชุงุฌุงุช</a> </li></ul></div></div><br><a name="1"></a><br><h1 id="1-iz-chego-sostoit-gc" style=";text-align:right;direction:rtl">  1. ูุง ูุชููู ูู GC </h1><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุจุนุฏ ุฃู ุชู ูุชุงุจุฉ ุงูุนุฏูุฏ ูู GCs ุงููุฎุชููุฉ ุ ุฃุตุจุญ ูู ุงูุณูู ุฌุฏูุง ุฅูุดุงุก ุนูุงุตุฑ ุฎุงุตุฉ ุจู - ูููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู (ุฅุนุงุฏุฉ) ุงูุนุฏูุฏ ูู ุงูุนูุงุตุฑ ุงูููุชูุจุฉ ุจุงููุนู ูุชุญููู ุจุนุถ ุงููุฎุงูู ุจุดุฃู ุชูุงุตูู ุงูุชูููุฐ ุฅูู ุดูุฑุฉ ูุฌุฑุจุฉ ููุฎุชุจุฑุฉ. </p><br><a name="11"></a><br><h2 id="11-epsilon-gc" style=";text-align:right;direction:rtl">  1.1.  ุงุจุณูููู ุฌู ุณู </h2><br><p style=";text-align:right;direction:rtl"> ููุฏู OpenJDK 11 JEP 318 ุฌุฏูุฏูุง: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"Epsilon: A Gar-Collector Collector (ุงูุชุฌุฑูุจูุฉ)</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"</a>  ูุชุชูุซู ูููุชูุง ูู ุชูููุฑ ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุชูููุฐ ููุญุงูุฉ ุนูุฏ ุชุญุฑูุฑ ุงูุฐุงูุฑุฉ ููุณุช ุถุฑูุฑูุฉ ุฃู ูุญุธูุฑุฉ.  ููุงูุด JEP ุจูุฒูุฏ ูู ุงูุชูุงุตูู ููุงุฐุง ูุฏ ูููู ูููุฏูุง. </p><br><p style=";text-align:right;direction:rtl">  ูู ูุฌูุฉ ูุธุฑ ุงูุชูููุฐ ุ ูุนุฏ "ุฃุฏุงุฉ ุชุฌููุน ุงูุจูุงูุงุช ุงูููููุฉ" ุงุณููุง ุณูุฆูุง ุ ูุณูููู ูู ุงูุฃุตุญ ุงุณุชุฎุฏุงู ูุตุทูุญ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ูุฏูุฑ ุงูุฐุงูุฑุฉ ุงูุชููุงุฆู"</a> ุ ุงููุณุคูู ุนู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูุชุญุฑูุฑูุง.  ุชุทุจู ุดุฑูุฉ ุฅุจุณูููู ุฌู ุณู "ุงูุชุฎุตูุต" ููุท ุ ููุง ุชุชุนุงูู ูุน "ุงูุฅุทูุงู" ุนูู ุงูุฅุทูุงู.  ูุฐูู ุ ููููู ุงุณุชุฎุฏุงู Epsilon GC ูุงูุจุฏุก ูู ุชูููุฐ ุฎูุงุฑุฒููุงุช "ุงูุฅุทูุงู" ูู ุงูุจุฏุงูุฉ. </p><br><a name="111"></a><br><h3 id="111-vydelenie-pamyati" style=";text-align:right;direction:rtl">  1.1.1.  ุชุฎุตูุต ุงูุฐุงูุฑุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุงูุฌุฒุก ุงูุฃูุซุฑ ุชุทูุฑุงู ูู ุฅุจุณูููู ุฌู ุณู <a href="">ูู ุงููุณุคูู ุนู ุชุฎุตูุต ุงูุฐุงูุฑุฉ</a> .  ูุฎุฏู ุงูุทูุจุงุช ุงูุฎุงุฑุฌูุฉ ูุชุฎุตูุต ุฐุงูุฑุฉ ุจุญุฌู ุชุนุณูู ูุฅูุดุงุก <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุคุดุฑ ุชุฑุงุจุท ุชุฎุตูุต ูุคุดุฑ ุชุฑุงุจุท ูุญูู (TLAB)</a> ุจุงูุญุฌู ุงููุทููุจ.  ูุญุงูู ุงูุชูููุฐ ููุณู ุนุฏู ุชูุณูุน TLAB ูุซูุฑูุง ุ ุญูุซ ูู ุชููู ููุงู ุฐุงูุฑุฉ ุญุฑุฉ ููู ูููู ุฃุญุฏ ุจุฅุฑุฌุงุน ุงูุจุงูุชุงุช ุงูููููุฏุฉ. </p><br><a name="112"></a><br><h3 id="112-barery" style=";text-align:right;direction:rtl">  1.1.2.  ุงูุญูุงุฌุฒ </h3><br><p style=";text-align:right;direction:rtl">  ุชุชุทูุจ ุจุนุถ ุฃุฏูุงุช ุชุฌููุน ุงูุจูุงูุงุช ุงูููููุฉ ุงูุชูุงุนู ูุน ุงูุชุทุจูู ููุญูุงุธ ุนูู ูุชุบูุฑุงุช GC ุ ููุง ููุฑุถ ููุช ุงูุชุดุบูู ูุงูุชุทุจูู ุนูู ุฅูุดุงุก ูุง ูุณูู <em>ุจุงูุญูุงุฌุฒ</em> ุนูุฏ ูุญุงููุฉ ุงููุตูู ุฅูู ุงููููุฉ.  ูุฐุง ุตุญูุญ ุจุงููุณุจุฉ ูุฌููุน ุงููุฌูุนูู ูุชุนุฏุฏุฉ ุงูุฎููุท ุ ููุฐูู ุจุงููุณุจุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุนุฏูุฏ ูู ููุงุฉ ุงูุฌูุน ูุน ุงูุฃุฌูุงู</a> ูููู ุงูุนุงูู. </p><br><p style=";text-align:right;direction:rtl">  ูุง ูุชุทูุจ ุฅุจุณูููู ุญูุงุฌุฒ ุ ููู ููุช ุงูุชุดุบูู ูุงููุชุฑุฌู ูุง ูุฒุงู ูุฑูุฏ ุฃู <em>ูุนุฑู</em> ุฃู ุงูุญูุงุฌุฒ ูุง ุชูุนู ุดูุฆูุง.  ูููู ุงูุชุนุงูู ูุนูุง ูู ูู ูุฑุฉ ูู ูู ููุงู ุชููู ูุชุนุจุฉ.  ูุญุณู ุงูุญุธ ุ ุจุฏุกูุง ูู OpenJDK 11 ุ ููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">JEP-304</a> ุฌุฏูุฏุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">: "Garbage Collection Interface"</a> ุ ููุง ูุฌุนู ุฅุฏุฎุงู ุงูุญูุงุฌุฒ ุฃุณูู ุจูุซูุฑ.  ุนูู ูุฌู ุงูุฎุตูุต ุ ูุฅู <a href="">ุงูุญุงุฌุฒ ุงูุฐู ุชู ุชุนูููู ูู ุฅุจุณูููู ูุงุฑุบ</a> ุ ููููู ุชูููุถ ุฌููุน ุงูุฃุนูุงู ุงูุชุงููุฉ - ุญูุธ ุ ุชุญููู ุ CAS ุ ุตููู - ุฅูู ุชุทุจููุงุช ุงูุญูุงุฌุฒ ุงูุชุงููุฉ ูู ูุฆุฉ ูุงุฆูุฉ ููุฌูุฏุฉ.  ุฅุฐุง ููุช ุชููู ุจุฅูุดุงุก GC ููุง ุชุญุชุงุฌ ุฃูุถูุง ุฅูู ุญูุงุฌุฒ ุ ููููู ุจุจุณุงุทุฉ ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูุฑูุฒ ูู ุฅุจุณูููู. </p><br><a name="113"></a><br><h3 id="113-podklyuchenie-k-monitoringu" style=";text-align:right;direction:rtl">  1.1.3.  ูุฑุงูุจุฉ ุงูุงุชุตุงู </h3><br><p style=";text-align:right;direction:rtl">  ุงูุฌุฒุก ุงูุฃุฎูุฑ ุงูููู ูู ุชุทุจูู ุงูููุงุฏุฉ ุงูุนุงูุฉ ูู ุฑุจุท ูุฌููุนุฉ ูู ุขููุงุช ุงููุฑุงูุจุฉ ุฏุงุฎู JVM: ุตูุงุฏูู MX ุ ุฃูุงูุฑ ุงูุชุดุฎูุต ุ ุฅูุฎ.  <a href="">ููุฏ ูุนูุช</a> Epsilon <a href="">ุจุงููุนู</a> ูู ูุฐุง ูู ุฃุฌูู. </p><br><a name="12"></a><br><h2 id="12-rantaym-i-gc" style=";text-align:right;direction:rtl">  1.2.  ููุช ุงูุชุดุบูู ู GC </h2><br><a name="121"></a><br><h3 id="121-kornevye-elementy" style=";text-align:right;direction:rtl">  1.2.1.  ุนูุงุตุฑ ุงูุฌุฐุฑ </h3><br><p style=";text-align:right;direction:rtl">  ูุญุชุงุฌ ุฌุงูุน ุงูุจูุงูุงุช ุงูููููุฉ ุ ูู ุงูุญุงูุฉ ุงูุนุงูุฉ ุ ุฅูู ูุนุฑูุฉ ุจุงูุถุจุท ูุง ูุญุชูู ูู ููุช ุชุดุบูู Java ุนูู ูุฑุงุฌุน ุงููููุฉ.  ูููู ุฃู ุชููู ูุฐู ุงูุนูุงุตุฑ ุงูุฌุฐุฑูุฉ ุ ุงูุชู ุชุณูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌุฐูุฑ GC</a> ุ ูุชุญุงุช ุนูู ูุฌููุนุงุช ุงูุฏูู ูุงููุชุบูุฑุงุช ุงููุญููุฉ (ุจูุง ูู ุฐูู ุชูู ุงูููุฌูุฏุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุชุฑุฌูุฉ ูู JIT!) ูุงููุฆุงุช ุงูุฃุตููุฉ ููุญูู ุงููุตูู ุงูุฏุฑุงุณูุฉ ูุงููุฑุงุฌุน ูู JNI ููุง ุฅูู ุฐูู.  ูููู ุฃู ุชููู ูุญุงููุงุช ุชุญุฏูุฏ ูุฐู ุงูุนูุงุตุฑ ูุนูุฏุฉ ููููุฉ ููุบุงูุฉ.  ูููู ูู Hotspot ุ ูุชู ุชุชุจุนูู ุฌููุนูุง ุจุงุณุชุฎุฏุงู ุฃูุธูุฉ VM ุงูููุงุณุจุฉ ุ ุจุญูุซ ููููู ุจุจุณุงุทุฉ ูุนุฑูุฉ ููููุฉ ุนูู ุชุทุจููุงุช GC ุงูุญุงููุฉ ูุนูู.  ูุฐูู ูู ุงููุต ุณูู ูุฑู ุฐูู. </p><br><a name="122"></a><br><h3 id="122-obhod-obektov" style=";text-align:right;direction:rtl">  1.2.2.  ูุงุฆู ุงูุฒุญู </h3><br><p style=";text-align:right;direction:rtl"> ูุฌุจ ุนูู ุฌุงูุน ุงูุจูุงูุงุช ุงูููููุฉ ุชุฌุงูุฒ ุงูุฑูุงุจุท ุงูุตุงุฏุฑุฉ ูู ูุงุฆูุงุช Java.  ุชู ุงูุนุซูุฑ ุนูู ูุฐู ุงูุนูููุฉ ูู ูู ููุงู ุ ูุฐูู ุชููุฑ ุงูุฃุฌุฒุงุก ุงูุดุงุฆุนุฉ ูู ููุช ุงูุชุดุบูู ุญููููุง ุฌุงูุฒุฉ ุ ูุง ุชุญุชุงุฌ ุฅูู ูุชุงุจุฉ ุฃู ุดูุก ุจููุณู.  ุฃุฏูุงู ุณูููู ููุงู ูุณู ูุน ุชุทุจูู ูุนูู ุ ูููููู ุฃู ุชุฌุฏ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงูููุงููุงุช <code>objโoop_iterate</code> . </p><br><a name="123"></a><br><h3 id="123-peremescheniya" style=";text-align:right;direction:rtl">  1.2.3.  ุงููุฒูุญ </h3><br><p style=";text-align:right;direction:rtl">  ูุญุชุงุฌ ุฌุงูุน ุงูุจูุงูุงุช ุงูููููุฉ ุงููุชุญุฑูุฉ ุฅูู ูุชุงุจุฉ ุงูุนูุงููู ุงูุฌุฏูุฏุฉ ูููุงุฆูุงุช ุงููููููุฉ ูู ููุงู ูุง.  ููุงู ุงูุนุฏูุฏ ูู ุงูุฃูุงูู ุงูุชู ููููู ูู ุฎูุงููุง ูุชุงุจุฉ <em>ุจูุงูุงุช ุฅุนุงุฏุฉ ุงูุชูุฌูู</em> ูุฐู. </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู <a href="">"ุนูุงูุฉ ุงููููุฉ" ูู ุงููุงุฆู ููุณู</a> (ุงููุณูุณู ุ ุงูููุงุฒู ุ ุฅูุฎ).  ุจุนุฏ ุชููู ุงูุนุงูู ุ ูุชู ุงูุชุญูู ูู ุฌููุน ุนูููุงุช ุงููุตูู ุฅูู ุงููุงุฆู ุ ููุถูู ุฃูู ูุง ููุฌุฏ ุฃู ูุคุดุฑ Java ููููู ุฑุคูุฉ ุงูุจูุงูุงุช ุงููุคูุชุฉ ุงูุชู ูุฑุฑูุง ุฅุฏุฎุงููุง ูู ูููุฉ ุนูุงูุฉ.  ููููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงููุง ูุชุฎุฒูู ุจูุงูุงุช ุฅุนุงุฏุฉ ุงูุชูุฌูู. </li><li style=";text-align:right;direction:rtl">  ููููู ุงูุงุญุชูุงุธ ุจุฌุฏูู ุญุฑูุฉ ุฃุตููุฉ ูููุตู ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ZGC</a> ุ C4 ุ ูุบูุฑูุง).  ูุฐุง ูุนุฒู GC ุชูุงููุง ุนู ููุช ุงูุชุดุบูู ูุจููุฉ ุงูุชุทุจูู ุ ุญูุซ ุฅู GC ููุท ูุนูู ุจูุฌูุฏ ูุซู ูุฐุง ุงูุฌุฏูู.  ุนุงุฏุฉู ูุง ูุณุชุฎุฏู ุงููุฌูุนูู ุงูุชูุงูุณููู ูุซู ูุฐุง ุงููุฎุทุท - ููู ูุง ูุฑูุฏูู ุฃู ูุนุงููู ูุน ูุฌููุนุฉ ูู ุงููุดููุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ. </li><li style=";text-align:right;direction:rtl">  ููููู ุฅุถุงูุฉ ูููุฉ ุฃุฎุฑู ุฅูู ุงููุงุฆู ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Shenandoah</a> ูุบูุฑูุง).  ูุฐุง ุงููุฒูุฌ ูู ุงูููุฌูู ุงูุณุงุจููู ูุง ูุณูุญ ููุท ูููุช ุงูุชุดุบูู ูุงูุชุทุจูู ุจุงูุนูู ูุน ุงูุฑุคูุณ ุงูููุฌูุฏุฉ ุฏูู ูุดุงูู ุ ูููู ุฃูุถูุง ูุญูุธ ุจูุงูุงุช ุฅุนุงุฏุฉ ุงูุชูุฌูู. </li></ol><br><a name="124"></a><br><h3 id="124-markernye-dannye" style=";text-align:right;direction:rtl">  1.2.4.  ุจูุงูุงุช ุนูุงูุฉ </h3><br><p style=";text-align:right;direction:rtl">  ูุญุชุงุฌ ุฌุงูุน ุงูุจูุงูุงุช ุงูููููุฉ ุฅูู ูุชุงุจุฉ <em>ุจูุงูุงุช ูุถุน ุงูุนูุงูุงุช ูู</em> ููุงู ูุง.  ููุฑุฉ ุฃุฎุฑู ุ ููุงู ุนุฏุฉ ุทุฑู ูุฅููุงุฐูู: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ูููุฉ ุนูุงูุฉ ูู ุงููุงุฆู ููุณู (ุงููุณูุณู ุ Parallel ุ ุฅูุฎ).  ูุฑุฉ ุฃุฎุฑู ุ ูู ูุถุน ุฅููุงู ุงูุนุงูู ุ ููููู ุงุณุชุฎุฏุงู ุงูุจุชุงุช ูู ูููุฉ ุนูุงูุฉ ูุชุดููุฑ ุญูููุฉ ุชุณููุฉ.  ุนูุงูุฉ ุนูู ุฐูู ุ ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุงูุงูุชูุงู ุนูู ุฌููุน ุงููุงุฆูุงุช ุงูุญูุฉ ุ ูุฅููุง ูุณูุฑ ุนูู ุทูู ุงููููุฉ ุ ูุงุฆู ุจุนุฏ ูุงุฆู - ููุฐุง ูููู ูุธุฑูุง ูุญูููุฉ ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููููุฉ ูุงุจูุฉ ููุชุญููู</a> . </li><li style=";text-align:right;direction:rtl">  ููููู ุงูุงุญุชูุงุธ ุจูููู ูููุตู ูุชุฎุฒูู ุจูุงูุงุช ุงููุณู (G1 ุ Shenandoah ุ ุฅูุฎ).  ูุชู ุฐูู ุนุงุฏุฉู ุจุงุณุชุฎุฏุงู <a href="">ุตูุฑุฉ ููุทูุฉ ูููุตูุฉ</a> ุ ูุงูุชู ุชุนููู ูู ุจุงูุช N ูู ุงููููุฉ ุฅูู 1 ุจุช ูู ุงูุจุทุงูุฉ.  ุนุงุฏุฉู ุ ูุชู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุญุงุฐุงุฉ</a> ูุงุฆูุงุช Java <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจููุฏุงุฑ 8 ุจุงูุช</a> ุ ูุฐุง ุชููู ุงูุจุทุงูุฉ ุจุชุฎุทูุท ูู 64 ุจุช ูู ุงููููุฉ ุฅูู 1 ุจุช ูู ุงูุจุทุงูุฉ ุ ุจุญูุซ ุชุดุบู 1/64 ูู ุญุฌู ุงููููุฉ ูู ุงูุฐุงูุฑุฉ ุงูุฃุตููุฉ.  ูุฐู ุงููููุงุช ุงูุนุงูุฉ ุชุคุชู ุซูุงุฑูุง ุฌูุฏูุง ุนูุฏ ูุณุญ ุงููููุฉ ุจุญุซูุง ุนู ูุฌูุฏ ูุงุฆูุงุช ุญูุฉ ุ ูุฎุงุตุฉ ุงููุงุฆูุงุช ุงููุชูุฑูุฉ: ุฅู ุชุฌุงูุฒ ุงูุฎุฑูุทุฉ ุบุงูุจูุง ูุง ูููู ุฃุณุฑุน ุจูุซูุฑ ูู ุชุฌุงูุฒ ุงููููุฉ ุงูุชู ูุชู ุชูููููุง ูุงุฆููุง. </li><li style=";text-align:right;direction:rtl">  ูู ุจุชุฑููุฒ ุงูููุตูุงุช ุฅูู ุฑูุงุจุท (ZGC ุ C4 ูุบูุฑูุง).  ูุชุทูุจ ุฐูู ุงูุชูุณูู ูุน ุงูุชุทุจูู ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ูุทุน ูู ูุฐู ุงูุชุณููุงุช ุนู ุงูุฑูุงุจุท ุฃู ุงูููุงู ุจุจุนุถ ุงูุญูู ุงูุฃุฎุฑู ููุญูุงุธ ุนูู ุตุญุชูุง.  ุจูุนูู ุขุฎุฑ ุ ูุญุชุงุฌ ุฅูุง ุฅูู ุญูุงุฌุฒ ุฃู ุจุนุถ ุงูุฃุนูุงู ุงูุฅุถุงููุฉ ูู GC. </li></ol><br><a name="2"></a><br><h1 id="2-obschiy-plan" style=";text-align:right;direction:rtl">  2. ุงูุฎุทุฉ ุงูุนุงูุฉ </h1><br><p style=";text-align:right;direction:rtl">  ุนูู ุงูุฃุฑุฌุญ ุ ุฃุณูู ุชุทุจูู ุนูู ููุฉ ุฅุจุณูููู ูู Mark-Compact ุ ุจุฃุณููุจ LISP2.  ูุชู ูุตู ุงูููุฑุฉ ุงูุฃุณุงุณูุฉ ููุฐุง GC <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ููููุจูุฏูุง</a> ููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชูุจ GC</a> (ุงููุตู 3.2).  ุณูููู ููุงู ุฑุณู ุชุฎุทูุทู ููุฎูุงุฑุฒููุฉ ูู ุงููุณู ูุน ุงูุชูููุฐ ุฃุฏูุงู ุ ููููู ุฃูุตู ุจุดุฏุฉ ุจูุฑุงุกุฉ ุงููููู ูู ููููุจูุฏูุง ุฃู ูุชูุจ GC ูููู ูุง ุณููุนูู. </p><br><p style=";text-align:right;direction:rtl">  ุงูุฎูุงุฑุฒููุฉ ููุฏ ุงูุจุญุซ ูู GC ุงูููุงูุจุฉ: ุงููุงุฆูุงุช ุงููุชุญุฑูุฉ ุชุชุญุฑู ูู ุตููู ุฅูู ุจุฏุงูุฉ ุงููููุฉ.  ููุง ุฅูุฌุงุจูุงุช ูุณูุจูุงุช: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุญุงูุธ ุนูู ุชุฑุชูุจ ุชุฎุตูุตุงุช ุงูุฐุงูุฑุฉ.  ูุฐุง ูููุฏ ุฌุฏูุง ููุชุญูู ูู ุงูุชูุณูู ูู ุงูุฐุงูุฑุฉ ุ ุฅุฐุง ูุงู ุงูุฃูุฑ ูููู (ุงูุชุญูู ูู ุงููุฒูุงุช ุ ููุฐุง ูู ููุชู!).  ุงูุฌุงูุจ ุงูุณูุจู ูู ุฃูู ูู ุชุญุตู ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฑุงุจุท ูุญูู ุชููุงุฆู</a> ุจูุฐู ุงูุทุฑููุฉ. </li><li style=";text-align:right;direction:rtl">  ุชุนููุฏูุง ูู O (N) ูู ุนุฏุฏ ุงููุงุฆูุงุช.  ููุน ุฐูู ุ ูุฅู ุงูุฎุทู ูุฃุชู ุจุณุนุฑ: ูุทููุจ ูู GC ุชุฌุงูุฒ ูุฌููุนุฉ ูู 4 ูุฑุงุช ููู ุฏูุฑุฉ ุจูุงุก. </li><li style=";text-align:right;direction:rtl">  ูุง ูุชุทูุจ ุฐุงูุฑุฉ ุญุฑุฉ ุนูู ุงููููุฉ!  ููุณุช ููุงู ุญุงุฌุฉ ุฅูู ุญุฌุฒ ุงูุฐุงูุฑุฉ ุนูู ุงููููุฉ ูุฅุฎูุงุก ุงููุงุฆูุงุช ุงูุญูุฉ ุ ุญุชู ููููู ุงูุนูู ูุน ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุงูุชู ูุงุถุช ุจูุณุจุฉ 99. (9) ูช.  ุฅุฐุง ุชูุงูููุง ุฃููุงุฑูุง ุฃุฎุฑู ูููุงุฉ ุงูุฌูุน ุงูุจุณูุทุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงูุฒุจุงู ุฐู ุงููุถุงุก ุดุจู (ุฒุจุงู ุงููุถุงุก ุดุจู) ุ ูุณูุชุนูู ุนูููุง ุฅุนุงุฏุฉ ูุชุงุจุฉ ุนุฑุถ ุงููููุฉ ููููุงู ูุญุฌุฒ ูุณุงุญุฉ ุตุบูุฑุฉ ููุฅุฎูุงุก ุ ูููู ูุฐุง ุฎุงุฑุฌ ูุทุงู ูุฐุง ุงูุชูุฑูู. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุชุนูู ููููุงู ุญูู ูุฐู ุงููุดููุฉ ุ ูููููู ุชุญููู ุตูุฑ ูู ุงูุฐุงูุฑุฉ ูุงุณุชููุงู ุงูููุช ุฎูุงู ุงููุชุฑุงุช ุงูุชู ูููู ูููุง GC ุบูุฑ ูุดุท.  ูุจุฏุฃ ุนูู ุฐุงูุฑุฉ ูู ุญุงูุฉ ุนุดูุงุฆูุฉ ุ ููุชููู ุนู ุถุบุทูุง ุจุดูู ูุจูุฑ.  ูุชูุงุณุจ ูุฐุง ุจุดูู ุฌูุฏ ูุน ููููุฉ ุนูู ุฅุจุณูููู: ุฅูู ูุญุชูุธ ุจุงูุชูููุฒ ููุท ุจุนุฏ ุงููุงุฆู ุงูุฃุฎูุฑ.  ูุฐุง ุฃูุถูุง ูุงูุต: ุชุคุฏู ุจุนุถ ุงููุงุฆูุงุช ุงูููุชุฉ ูู ุจุฏุงูุฉ ุงููููุฉ ุฅูู ุนุฏุฏ ูุจูุฑ ูู ุงูุญุฑูุงุช. </li><li style=";text-align:right;direction:rtl">  ุงููุง ููุท ูุง ุชุชุทูุจ ุญูุงุฌุฒ ุฌุฏูุฏุฉ ุ ููููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู <code>EpsilonBarrierSet</code> ููุง ูู. </li></ul><br><p style=";text-align:right;direction:rtl">  ููุจุณุงุทุฉ ุ ุณูู ูุณุชุฎุฏู ุชุทุจูู GC ููุทุฉ ุชููู ูุงููุฉ ููุนุงูู (ููู ุงูุนุงูู ุ STW) ุ ููู ูููู ููุงู ุฃุฌูุงู ุฃู ูุคุดุฑุงุช ุชุฑุงุจุท ูุชุนุฏุฏุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ูู ุงูููุทูู ุงุณุชุฎุฏุงู ุตูุฑุฉ ููุทูุฉ ูุชุฎุฒูู ุงูุนูุงูุงุช ูุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ูููุฉ ุนูุงูุฉ ูุชุฎุฒูู ุจูุงูุงุช ุงูุญุฑูุฉ. </p><br><a name="3"></a><br><h1 id="3-realizaciya-yadra-gc" style=";text-align:right;direction:rtl">  3. ุชูููุฐ GC ุงูุฃุณุงุณูุฉ </h1><br><p style=";text-align:right;direction:rtl">  ูุฏ ุชููู ูุฑุงุกุฉ ูููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชูููุฐ ุงููุงูู</a> ูุนูุฏุฉ ููุบุงูุฉ ุจุงููุณุจุฉ ูุดุฎุต ุฌุงูู.  ูู ูุฐุง ุงููุณู ุ ุณูู ูููู ุฐูู ุฎุทูุฉ ุจุฎุทูุฉ. </p><br><a name="31"></a><br><h2 id="31-prolog" style=";text-align:right;direction:rtl">  3.1.  ููุฏูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ูุญุชุงุฌ ุฌุงูุน ุงูุจูุงูุงุช ุงูููููุฉ ุนุงุฏุฉู ุฅูู ุงูููุงู ุจุจุนุถ ุงูุฃุดูุงุก ููุชุญุถูุฑ ูููุฌููุนุฉ.  ูุฑุงุกุฉ ุงูุชุนูููุงุช ุ ููุจุบู ุฃู ูุชุญุฏุซูุง ุนู ุฃููุณูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">{ GCTraceTime(Info, gc) time(<span class="hljs-string"><span class="hljs-string">"Step 0: Prologue"</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      .      //   :   ,   ,  // ยซยป   ,      //   ,     . if (!os::commit_memory((char*)_bitmap_region.start(), _bitmap_region.byte_size(), false)) { log_warning(gc)("Could not commit native memory for marking bitmap, GC failed"); return; } //        ,  , //       TLAB-. ensure_parsability(true); //      ,    GC. CodeCache::gc_prologue(); BiasedLocking::preserve_marks(); //        . //       . DerivedPointerTable::clear(); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจูุง ุฃููุง ูุณุชุฎุฏู ุตูุฑุฉ ููุทูุฉ ูุชุชุจุน ูุงุจููุฉ ุงููุตูู ุฅูู ุงููุงุฆูุงุช ุ ูุญุชุงุฌ ุฅูู ูุณุญูุง ูุจู ุงูุงุณุชุฎุฏุงู.  ุฃู ูู ุญุงูุชูุง ุ ูุธุฑูุง ูุฃููุง ููุฏู ุฅูู ุนุฏู ุทูุจ ุงูููุงุฑุฏ ูุทูููุง ูุจู ุจุฏุก ุฏูุฑุฉ GC ุ ูุณูู ูุชุนูู ุนูููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุงูุชุฒุงู ุจููุท ุงูุตูุฑุฉ ุฅูู ุงูุฐุงูุฑุฉ</a> ููุฏููุง.  ูููุฑ ูุฐุง ุงูุนุฏูุฏ ูู ุงููุฒุงูุง ุงููุซูุฑุฉ ููุงูุชูุงู ุ ุนูู ุงูุฃูู ุนูู ูุธุงู Linux ุ ุญูุซ ุชุดูุฑ ูุนุธู ุงูุตูุฑุฉ ุงูููุทูุฉ ุฅูู ุงูุตูุญุฉ ุตูุฑ ุ ูุง ุณููุง ุจุงููุณุจุฉ ููููุงู ุงููุชูุฑู. </p><br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุนูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุชุญุฑูุฑ TLABs ุงูุฎุงุตุฉ ุจูู ูุงุทูุจ ูู GC ุฃู ุชููู ุฌุฏูุฏุฉ ุจุนุฏ ุงูุชูุงู ุงูุจูุงุก. </p><br><blockquote style=";text-align:right;direction:rtl">  ูุง ุชุฎูุท ุจูู TLAB ู <code>java.lang.ThreadLocal</code> .  ูู ูุฌูุฉ ูุธุฑ GC ุ ูุฅู ThreadLocal ูู ูุงุฆูุงุช ุนุงุฏูุฉ ุ ููู ูุชู ุชุฌููุนูุง ุจูุงุณุทุฉ GC ุฅูุง ุฅุฐุง ุชุทูุจ ุงูุฃูุฑ ุฎูุงู ุฐูู ูู ููุฏ Java. </blockquote><p style=";text-align:right;direction:rtl">  ุจุนุถ ุฃุฌุฒุงุก ููุช ุงูุชุดุบูู ุ ุฎุงุตุฉ ุชูู ุงูุชู ุชุญุชูู ุนูู ุงุฑุชุจุงุทุงุช ุฅูู ูููุฉ Java ุ ุณุชููุทุน ุฃุซูุงุก ุฌูุน ุงูููุงูุฉ ุ ูุฐุง ุนููู ุชุญุฐูุฑูู ุนูู ูุฌู ุงูุชุญุฏูุฏ ูู ุฃู GC ุณุชุจุฏุฃ ุงูุนูู ูุฑูุจูุง.  ุณูุณูุญ ุฐูู ููุฃูุธูุฉ ุงููุฑุนูุฉ ุฐุงุช ุงูุตูุฉ ุจุฅุนุฏุงุฏ ูุญูุธ ุฌุฒุก ูู ุญุงูุชูุง ูุจู ุฃู ููุชูู GC. </p><br><a name="32"></a><br><h2 id="32-markirovka" style=";text-align:right;direction:rtl">  3.2.  ูุถุน ุงูุนูุงูุงุช </h2><br><p style=";text-align:right;direction:rtl">  ูุตุจุญ ูุถุน ุงูุนูุงูุงุช ูู ูุถุน ุงูุชููู ูู ุงูุนุงูู ุฃูุฑูุง ุจุณูุทูุง ููุบุงูุฉ ุนูุฏูุง ูููู ูู ุดูุก ูุฏ ุชู ูุนูู ุจุงููุนู ูู ุฃุฌููุง.  ูุนุชุจุฑ ูุถุน ุงูุนูุงูุงุช ููุงุณููุง ุ ูุงูุฃุฑุฌุญ ุฃูู ูู ุงูุนุฏูุฏ ูู ุงูุชุทุจููุงุช ุ ูุนุฏ GC ูู ุงูุฎุทูุฉ ุงูุฃููู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">{ GCTraceTime(Info, gc) time(<span class="hljs-string"><span class="hljs-string">"Step 1: Mark"</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    ,     .  //   ,  ,    //      . EpsilonMarkStack stack; EpsilonScanOopClosure cl(&amp;stack, &amp;_bitmap); //      . process_roots(&amp;cl); stat_reachable_roots = stack.size(); //    ,    . //    ,   , //      . while (!stack.is_empty()) { oop obj = stack.pop(); obj-&gt;oop_iterate(&amp;cl); stat_reachable_heap++; } //       . DerivedPointerTable::set_active(false); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนูู ูุฐุง ุชูุงููุง ููุง ูู ุงูุญุงู ูุน ุฃู ุฑุณู ุจูุงูู ุขุฎุฑ: ููููู ุจุฏุก ุงูุงุฌุชูุงุฒ ูุน ุงููุฌููุนุฉ ุงูุฃูููุฉ ูู ุงูุฑุคูุณ ุงููุงุจูุฉ ูููุตูู ุ ูุงูุฐูุงุจ ุนูู ุทูู ุงูุญูุงู ุงูุตุงุฏุฑุฉ ูุชุณุฌูู ุฌููุน ุงูุฑุคูุณ ุงูุชู ุชูุช ุฒูุงุฑุชูุง.  ูุณุชูุฑ ุงูุชูุงุทุน ุญุชู ุชูุชูู ูู ุงูููู ุบูุฑ ุงููุฑุบูุจ ูููุง.  ูู GC ุ "ุงูููู" ูู ูุงุฆูุงุช ุ ู "ุงูุญูุงู" ูู ุฑูุงุจุท ุจููููุง. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงุญูุฉ ุงููููุฉ ุ ูููููุง ุฃู ูุฐูุจ ุฅูู ุงูุฑุณู ุงูุจูุงูู ูููุงุฆูุงุช ุจุดูู ูุชูุฑุฑ ุ ูููู ูุฐู ููุฑุฉ ุณูุฆุฉ ููุฑุณูู ุงูุจูุงููุฉ ุงูุชุนุณููุฉ ุงูุชู ูููู ุฃู ุชุญุชูู ุนูู ุฃูุทุงุฑ ูุจูุฑุฉ ุฌุฏูุง.  ุชุฎูู ูุงุฆูุฉ ูุฑุชุจุทุฉ ูู ูููุงุฑ ููู!  ูุฐูู ุ ููุญุฏ ูู ุนูู ุงูุนูุฏูุฉ ุ ูุณุชุฎุฏู ูููุฉ ูุณู ุชุณุฌู ุงููุงุฆูุงุช ุงูููุชุดูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงููุฌููุนุฉ ุงูุฃูููุฉ ูู ุงููุงุฆูุงุช ุงููุงุจูุฉ ูููุตูู ูู ุฌุฐูุฑ GC.  ุงูุขู ูุง ุชุชุทุฑู ุฅูู ูุงููุฉ ุงูุนูููุฉ ุ ุฃูุซุฑ ูู ูุง ุจุนุฏ.  ุงูุขู ุ ุฏุนูุง ูููู ููุท ุฃูู ูุชุฌุงูุฒ ูู ุงูุฑูุงุจุท ุงูุชู ูููู ุงููุตูู ุฅูููุง ูู ุฌุงูุจ VM. </p><br><p style=";text-align:right;direction:rtl">  ุชุนูู ุงูุตูุฑุฉ ุงูููุทูุฉ ูุน ุงูุนูุงูุงุช ุนูู ุญุฏ ุณูุงุก ูุฃุฏุงุฉ ูุชุณุฌูู <em>ูุงุฌูุฉ ุงูููุฌุฉ ุงููุณู</em> (ุงููุซูุฑ ูู ุงููุงุฆูุงุช ุงูุชู ุชูุช ุฒูุงุฑุชูุง ุจุงููุนู) ุ ููู ุงูููุงูุฉ - ููุณุชูุฏุน ูููุชูุฌุฉ ุงููุฑุบูุจุฉ ุ ูุฌููุนุฉ ูู ุฌููุน ุงููุงุฆูุงุช ุงููุงุจูุฉ ูููุตูู.  ุงูุนูู ุงูุญูููู ูุญุฏุซ ูู <code>EpsilonScanOopClosure</code> ุ ูุชู ุชุทุจููู ุนูู ุฌููุน ุงููุงุฆูุงุช ุงููุซูุฑุฉ ููุงูุชูุงู ูุชูุฑุงุฑูุง ุนูู ุฌููุน ุฑูุงุจุท ุงููุงุฆู ุงููุญุฏุฏ. </p><br><blockquote style=";text-align:right;direction:rtl">  ุงูุธุฑ ุ ุนุฑูุช Java ููููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฅุบูุงู (ุงูุฅุบูุงู)</a> ูุจู ุฃู ุชุตุจุญ ุนุตุฑูุฉ! </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EpsilonScanOopClosure</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> BasicOopIterateClosure { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: EpsilonMarkStack* <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> _stack; MarkBitMap* <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> _bitmap; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">do_oop_work</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">p</span></span></span><span class="hljs-class">) {</span></span> <span class="hljs-comment"><span class="hljs-comment">// p -     ,   oop,   //      ,  : T o = RawAccess&lt;&gt;::oop_load(p); if (!CompressedOops::is_null(o)) { oop obj = CompressedOops::decode_not_null(o); //  . ,   .  , //        . //    +, //       . if (!_bitmap-&gt;is_marked(obj)) { _bitmap-&gt;mark((HeapWord*)obj); _stack-&gt;push(obj); } } } };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุงูุงูุชูุงุก ูู ูุฐู ุงูุฎุทูุฉ ุ ุชุญุชูู <code>_bitmap</code> ุนูู ูุญุฏุงุช ุจุช ุชุดูุฑ ุฅูู ูููุน ุงููุงุฆูุงุช ุงูุญูุฉ.  ุจูุถู ูุฐุง ุ ูู ุงููููู ุชุฌุงูุฒ ุฌููุน ุงููุงุฆูุงุช ุงูุญูุฉ ุ ุนูู ุณุจูู ุงููุซุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//           . //   ,    ( )  ,  //       1/64  . void EpsilonHeap::walk_bitmap(ObjectClosure* cl) { HeapWord* limit = _space-&gt;top(); HeapWord* addr = _bitmap.get_next_marked_addr(_space-&gt;bottom(), limit); while (addr &lt; limit) { oop obj = oop(addr); assert(_bitmap.is_marked(obj), "sanity"); cl-&gt;do_object(obj); addr += 1; if (addr &lt; limit) { addr = _bitmap.get_next_marked_addr(addr, limit); } } }</span></span></code> </pre> <br><a name="33"></a><br><h2 id="33-vychislyaem-novye-adresa" style=";text-align:right;direction:rtl">  3.3.  ุญุณุงุจ ุนูุงููู ุฌุฏูุฏุฉ </h2><br><p style=";text-align:right;direction:rtl">  ูุฐู ุฃูุถูุง ุฎุทูุฉ ุจุณูุทุฉ ุฅูู ุญุฏ ูุง ุ ููู ุชููุฐ ูุง ุชูููู ุงูุฎูุงุฑุฒููุฉ ุชูุงููุง. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ab3/406/5e6/ab34065e6397d39413057358b45247a3.jpg"></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    forwarding data (,    ) //   .        . //          . PreservedMarks preserved_marks; //     GC. HeapWord* new_top; { GCTraceTime(Info, gc) time("Step 2: Calculate new locations", NULL); //    ,        //    . ,  - . EpsilonCalcNewLocationObjectClosure cl(_space-&gt;bottom(), &amp;preserved_marks); walk_bitmap(&amp;cl); //         . //       ,    //      ,      "" //  . new_top = cl.compact_point(); stat_preserved_marks = preserved_marks.size(); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุดูุก ุงููุญูุฏ ุงูุฐู ูููุช ุงูุชุจุงูู ูู ุฃููุง ูุฑุฑูุง ุชุฎุฒูู ุนูุงููู ุฌุฏูุฏุฉ ูู ูููุฉ ุชูููุฒ ูุงุฆูุงุช Java ุ ููููู ุฃู ุชุดุบู ูุฐู ุงููููุฉ ุจุงููุนู ุดูุก ููู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุนูููุงุช ุญูู ุงูุฃููุงู.  ูุญุณู ุงูุญุธ ุ ูุฅู ูุซู ูุฐู ุงููููุงุช ุบูุฑ ุงูุชูููููุฉ ูุงุฏุฑุฉ ุฌุฏูุง ุ ููููููุง ุจุจุณุงุทุฉ ุชุฎุฒูููุง ุจุดูู ูููุตู ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ ุนูู ุงูุฅุทูุงู: ูุฐุง ูุง ุชุณุชุฎุฏูู ุงูุนูุงูุงุช <code>PreservedMarks</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุชู ุนูู ุงูุฎูุงุฑุฒููุฉ ุงูุญููููุฉ ุจูุงุณุทุฉ <code>EpsilonCalcNewLocationObjectClosure</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EpsilonCalcNewLocationObjectClosure</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ObjectClosure { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: HeapWord* _compact_point; PreservedMarks* <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> _preserved_marks; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: EpsilonCalcNewLocationObjectClosure(HeapWord* start, PreservedMarks* pm) : _compact_point(start), _preserved_marks(pm) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">do_object</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(oop obj)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    :    . //        (      , //    ),      , //     . if ((HeapWord*)obj != _compact_point) { markOop mark = obj-&gt;mark_raw(); if (mark-&gt;must_be_preserved(obj)) { _preserved_marks-&gt;push(obj, mark); } obj-&gt;forward_to(oop(_compact_point)); } _compact_point += obj-&gt;size(); } HeapWord* compact_point() { return _compact_point; } };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>forward_to</code> ูู ุงูุฌุฒุก ุงูุฃูุซุฑ ุฃูููุฉ ูุฃูู ูุฎุฒู "ุนููุงู ุงูููู" ูู ูููุฉ ุนูุงูุฉ ุงููุงุฆู.  ุณุชููู ููุงู ุญุงุฌุฉ ูู ุงูุฎุทูุงุช ุงูุชุงููุฉ. </p><br><a name="34"></a><br><h2 id="34-ispravlyaem-ukazateli" style=";text-align:right;direction:rtl">  3.4.  ุฅุตูุงุญ ุงููุคุดุฑุงุช </h2><br><p style=";text-align:right;direction:rtl">  ุฃูุช ุงูุขู ุจุญุงุฌุฉ ุฅูู ุงุณุชุนุฑุงุถ ุงููููุฉ ูุฑุฉ ุฃุฎุฑู ูุฅุนุงุฏุฉ ูุชุงุจุฉ ูุงูุฉ ุงูุงุฑุชุจุงุทุงุช ูุน ุนูุงููููุง ุงูุฌุฏูุฏุฉ ููููุง ููุฎูุงุฑุฒููุฉ ุงูุชุงููุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/25f/c82/1dc/25fc821dc95d2f9d50fe40653eb845ff.jpg"></p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">{ GCTraceTime(Info, gc) time(<span class="hljs-string"><span class="hljs-string">"Step 3: Adjust pointers"</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     _   _,     // ยซ ยป.      forwarding data, //    .      . EpsilonAdjustPointersObjectClosure cl; walk_bitmap(&amp;cl); //     ,      VM,  //     :      . EpsilonAdjustPointersOopClosure cli; process_roots(&amp;cli); //   ,      , //     . preserved_marks.adjust_during_full_gc(); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงู ููุนุงู ูู ุงูุฅุดุงุฑุงุช ุฅูู ุงููุงุฆูุงุช ุงูุชู ุชู ููููุง: ุงูุตุงุฏุฑุฉ ุฅูุง ูู ุงููุงุฆูุงุช ุงูููุฌูุฏุฉ ุนูู ุงููููุฉ ููุณูุง ุฃู ูู ุฌุฐูุฑ GC.  ุชุญุชุงุฌ ุฅูู ุชุญุฏูุซ ูู ูุฆุงุช ุงูุงุฑุชุจุงุท.  ุชุฎุฒู ุจุนุถ ุงูุชุณููุงุช ุงููุญููุธุฉ ุฃูุถูุง ุงูุฅุดุงุฑุงุช ุฅูู ุงููุงุฆูุงุช ุ ูุฐูู ุชุญุชุงุฌ ุฅูู ูุทุงูุจุชูู ุจุงูุชุญุฏูุซ.  ุชุนุฑู <code>PreservedMarks</code> ููููุฉ ุงูููุงู ุจุฐูู ูุฃููุง ุชุชููุน "ุฅุนุงุฏุฉ ุชูุฌูู ุงูุจูุงูุงุช" ูู ููุณ ุงูููุงู ุงูุฐู ุญูุธูุงู ููู ุ ูู ูููุฉ ุชูููุฒ ุงููุงุฆู. </p><br><p style=";text-align:right;direction:rtl">  ูุชู ุชูุณูู ุนูููุงุช ุงูุฅุบูุงู ุฅูู ููุนูู: ุงูุจุนุถ ูุฃุฎุฐ ุงููุงุฆูุงุช ููุชุฌุงูุฒ ูุญุชููุงุชูุง ุ ูุงูุจุนุถ ุงูุขุฎุฑ ูููู ุจุชุญุฏูุซ ูุฐู ุงูุนูุงููู.  ููููู ููุง ุฅุฌุฑุงุก ุชุญุณูู ุจุณูุท ููุฃุฏุงุก: ุฅุฐุง ูู ูุชุญุฑู ุงููุงุฆู ุ ูููููู ุญูุธ ุณุฌููู ูู ูุฌููุนุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EpsilonAdjustPointersOopClosure</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> BasicOopIterateClosure { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">do_oop_work</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">p</span></span></span><span class="hljs-class">) {</span></span> <span class="hljs-comment"><span class="hljs-comment">// p -     ,   oop. //        ,  : T o = RawAccess&lt;&gt;::oop_load(p); if (!CompressedOops::is_null(o)) { oop obj = CompressedOops::decode_not_null(o); //         . //  ,    . if (obj-&gt;is_forwarded()) { oop fwd = obj-&gt;forwardee(); assert(fwd != NULL, "just checking"); RawAccess&lt;&gt;::oop_store(p, fwd); } } } }; class EpsilonAdjustPointersObjectClosure : public ObjectClosure { private: EpsilonAdjustPointersOopClosure _cl; public: void do_object(oop obj) { //    ,    : obj-&gt;oop_iterate(&amp;_cl); } };</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุงูุงูุชูุงุก ูู ูุฐู ุงูุฎุทูุฉ ุ ูุณุฑูุง ุงููููุฉ ุจุดูู ุฃุณุงุณู: ุชุดูุฑ ุงูุฑูุงุจุท ุฅูู ุงูุนูุงููู "ุงูุฎุงุทุฆุฉ" ุงูุชู ูุง ุชููู ูููุง ุงููุงุฆูุงุช ุจุนุฏ.  ุฏุนููุง ุฅุตูุงุญู! </p><br><a name="35"></a><br><h2 id="35-dvigaem-obekty" style=";text-align:right;direction:rtl">  3.5.  ูุญู ูุชุญุฑู ุงูุฃุดูุงุก </h2><br><p style=";text-align:right;direction:rtl">  ุญุงู ุงูููุช ูููู ุงููุงุฆูุงุช ุฅูู ุนูุงููู ุฌุฏูุฏุฉ ุ ููููุง ููุฎูุงุฑุฒููุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/01c/5b8/db8/01c5b8db85781c82b89bbed730c8aecc.jpg"></p><br><p style=";text-align:right;direction:rtl">  <code>EpsilonMoveObjectsObjectClosure</code> ุญูู ุฃููุงู ูุฑุฉ ุฃุฎุฑู ูุชุทุจูู ุฅุบูุงู <code>EpsilonMoveObjectsObjectClosure</code> ุนูู ูุงูุฉ ุงููุงุฆูุงุช ุงูุญูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">{ GCTraceTime(Info, gc) time(<span class="hljs-string"><span class="hljs-string">"Step 4: Move objects"</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>); <span class="hljs-comment"><span class="hljs-comment">//       . //          . EpsilonMoveObjectsObjectClosure cl; walk_bitmap(&amp;cl); stat_moved = cl.moved(); //         ,   // ยซยป      . _space-&gt;set_top(new_top); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ูุจุงุดุฑุฉ ุ ููููู ุณุญุจ ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุงูุฎุงุตุฉ ุจููุทุฉ ุงูุถุบุท ุ ููุง ูุชูุญ ุชุฎุตูุต ุฐุงูุฑุฉ ูุจุงุดุฑุฉ ูู ูุฐุง ุงูููุงู ุ ููุฑ ุงูุชูุงุก ุฏูุฑุฉ ุชุฌููุน ุงูุจูุงูุงุช ุงูููููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุงุญุธ ุฃูู ูู ูุฌููุนุฉ ุงูุชุญููู ุ ูููููุง ุงููุชุงุจุฉ ููู ูุญุชููุงุช ุงููุงุฆูุงุช ุงูููุฌูุฏุฉ ุ ูููู ูุธุฑูุง ูุฃู ุงููุณุญ ูุชู ูู ููุณ ุงูุงุชุฌุงู ุ ูุชู ูุณุฎ ุงููุงุฆูุงุช ุงูููุชูุจุฉ ุจุงููุนู ุฅูู ุงูููุงู ุงูุตุญูุญ. </p><br><blockquote style=";text-align:right;direction:rtl">  ูุฏ ุชุชูุงุทุน ุงูููุงูุน ุงููุฏููุฉ ูุงูุฌุฏูุฏุฉ ูููุณ ุงูููุดุฃุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ููุช ุจููู ูุงุฆู 100 ุจุงูุช ุจูุงุณุทุฉ 8 ุจุงูุช.  ูุฌุจ ุฃู ูุนูู ุฅุฌุฑุงุก ุงููุณุฎ ุจููุณู ุ ููุฌุจ ูุณุฎ ุงููุญุชูู ุงููุชูุงุทุน ุจุดูู ุตุญูุญ ุ <code>Copy::aligned_*conjoint*_words</code> ุฅูู <code>Copy::aligned_*conjoint*_words</code> . </blockquote><p style=";text-align:right;direction:rtl">  ุงูุฅุบูุงู ููุณู ุณูููู ุจุจุณุงุทุฉ ุงููุงุฆูุงุช ุงููููููุฉ ุฅูู ุงูุนูุงููู ุงูุฌุฏูุฏุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EpsilonMoveObjectsObjectClosure</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ObjectClosure { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">do_object</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(oop obj)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     ,  .   - , //   -  mark word, //      forwarding data. if (obj-&gt;is_forwarded()) { oop fwd = obj-&gt;forwardee(); assert(fwd != NULL, "just checking"); Copy::aligned_conjoint_words((HeapWord*)obj, (HeapWord*)fwd, obj-&gt;size()); fwd-&gt;init_mark_raw(); } } };</span></span></code> </pre> <br><a name="36"></a><br><h2 id="36-epilog" style=";text-align:right;direction:rtl">  3.6.  ุฎุงุชูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุชู ุงูุงูุชูุงุก ูู ุฌูุน ุงูููุงูุฉ ุ ุงููููุฉ ูุชูุงุณูุฉ ูุฑุฉ ุฃุฎุฑู ุชูุฑูุจุง ุ ููุณุงุช ุงูููุณุงุช ุงูุฃุฎูุฑุฉ ุงููุชุจููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">{ GCTraceTime(Info, gc) time(<span class="hljs-string"><span class="hljs-string">"Step 5: Epilogue"</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    . preserved_marks.restore(); //   ,    . DerivedPointerTable::update_pointers(); BiasedLocking::restore_marks(); CodeCache::gc_epilogue(); JvmtiExport::gc_epilogue(); //     . if (!os::uncommit_memory((char*)_bitmap_region.start(), _bitmap_region.byte_size())) { log_warning(gc)("Could not uncommit native memory for marking bitmap"); } //    ,  . //        . if (EpsilonUncommit) { _virtual_space.shrink_by((_space-&gt;end() - new_top) * HeapWordSize); _space-&gt;set_end((HeapWord*)_virtual_space.high()); } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนูู ุจููุฉ ููุช ุงูุชุดุบูู ุจุฃูู ูุฌุจ ุนูููู ุจุฏุก ุฅุฌุฑุงุกุงุช ูุง ุจุนุฏ ุงูุชุฌููุน.  ูููู ุจุงุณุชุนุงุฏุฉ ุงููููุงุช ุนูุงูุฉ ุงูุฎุงุตุฉ ุงูุชู ุญูุธูุงูุง ูู ููุช ุณุงุจู.  ูุจูุฉ ุงููุฏุงุน ุนูู ุจุทุงูุฉ ุนูุงูุฉ ูุฏููุง - ูู ุชุนุฏ ููุงู ุญุงุฌุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุฅุฐุง ููุช ุชุฑุบุจ ุญููุง ูู ุฐูู ุ ููููู ุชูููู ุงูุฐุงูุฑุฉ ุงููุฎุตุตุฉ ูุนูููุงุช ุงูุชุฎุตูุต ุฅูู ุญุฌู ุฌุฏูุฏ ุ ูุจุงูุชุงูู ุฅุนุงุฏุฉ ุงูุฐุงูุฑุฉ ุฅูู ูุธุงู ุงูุชุดุบูู! </p><br><a name="4"></a><br><h1 id="4-podklyuchaem-gc-k-vm" style=";text-align:right;direction:rtl">  4. ูู ุจุชูุตูู GC ุฅูู VM </h1><br><a name="41"></a><br><h2 id="41-obhod-kornevyh-elementov" style=";text-align:right;direction:rtl">  4.1.  ุงูุฌุฐุฑ ุชุฑุงููุฑุณุงู </h2><br><p style=";text-align:right;direction:rtl">  ุชุฐูุฑ ุฃูู ุชุญุชุงุฌ ุฅูู ุชุฌุงูุฒ ุงูุฑูุงุจุท ุงูุฎุงุตุฉ ุงูุชู ูููู ุงููุตูู ุฅูููุง ูู VMุ  ููููู ุฃู ุชุทูุจ ูู ูู ูุธุงู ูุฑุนู ุฎุงุต VM ุชุฌุงูุฒ ุงูุฑูุงุจุท ุงููุฎููุฉ ุนู ูุงุฆูุงุช Java ุงูุฃุฎุฑู.  ุชุจุฏู ูุงุฆูุฉ ุดุงููุฉ ุจุนูุงุตุฑ ุงูุฌุฐุฑ ูุฐู ูู ููุทุฉ ุงูุงุชุตุงู ุงูุญุงููุฉ ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> EpsilonHeap::do_roots(OopClosure* cl) { <span class="hljs-comment"><span class="hljs-comment">//   ,        1 . StrongRootsScope scope(1); //         . CLDToOopClosure clds(cl, ClassLoaderData::_claim_none); MarkingCodeBlobClosure blobs(cl, CodeBlobToOopClosure::FixRelocations); //      . //        . { MutexLockerEx lock(CodeCache_lock, Mutex::_no_safepoint_check_flag); CodeCache::blobs_do(&amp;blobs); } { MutexLockerEx lock(ClassLoaderDataGraph_lock); ClassLoaderDataGraph::cld_do(&amp;clds); } Universe::oops_do(cl); Management::oops_do(cl); JvmtiExport::oops_do(cl); JNIHandles::oops_do(cl); WeakProcessor::oops_do(cl); ObjectSynchronizer::oops_do(cl); SystemDictionary::oops_do(cl); Threads::possibly_parallel_oops_do(false, cl, &amp;blobs); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ,        .    GC    . </p><br><a name="42"></a><br><h2 id="42-seyfpointy-i-ostanovka-mira" style=";text-align:right;direction:rtl"> 4.2.     </h2><br><p style=";text-align:right;direction:rtl">   GC     ,   VM      .  Hotspot     <code>VM_Operation</code> ,     GC    VM-  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// VM_operation,      class VM_EpsilonCollect: public VM_Operation { private: const GCCause::Cause _cause; EpsilonHeap* const _heap; static size_t _last_used; public: VM_EpsilonCollect(GCCause::Cause cause) : VM_Operation(), _cause(cause), _heap(EpsilonHeap::heap()) {}; VM_Operation::VMOp_Type type() const { return VMOp_EpsilonCollect; } const char* name() const { return "Epsilon Collection"; } virtual bool doit_prologue() { //     ,     . //         GC, //          . //   ,         //  .     , //       1%, ,  , //     . Heap_lock-&gt;lock(); size_t used = _heap-&gt;used(); size_t capacity = _heap-&gt;capacity(); size_t allocated = used &gt; _last_used ? used - _last_used : 0; if (_cause != GCCause::_allocation_failure || allocated &gt; capacity / 100) { return true; } else { Heap_lock-&gt;unlock(); return false; } } virtual void doit() { _heap-&gt;entry_collect(_cause); } virtual void doit_epilogue() { _last_used = _heap-&gt;used(); Heap_lock-&gt;unlock(); } }; size_t VM_EpsilonCollect::_last_used = 0; void EpsilonHeap::vmentry_collect(GCCause::Cause cause) { VM_EpsilonCollect vmop(cause); VMThread::execute(&amp;vmop); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">       ,       GC โ    ,     . </p><br><a name="43"></a><br><h2 id="43-oshibki-vydeleniya-pamyati" style=";text-align:right;direction:rtl">  4.3.    </h2><br><p style=";text-align:right;direction:rtl"> ,     GC  ,   ,  GC    ,     .   ,      <code>allocate_work</code>     ,   GC     : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">HeapWord* EpsilonHeap::allocate_or_collect_work(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> size) { HeapWord* res = allocate_work(size); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (res == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> &amp;&amp; EpsilonSlidingGC) { vmentry_collect(GCCause::_allocation_failure); res = allocate_work(size); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res; }</code> </pre> <br><p style=";text-align:right;direction:rtl">   ! </p><br><a name="5"></a><br><h1 id="5-sborka" style=";text-align:right;direction:rtl"> 5.  </h1><br><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> </a>        OpenJDK. </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ hg <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://hg.openjdk.java.net/jdk/jdk/ jdk-jdk $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> jdk-jdk $ curl https://shipilev.net/jvm/diy-gc/webrev/jdk-jdk-epsilon.changeset | patch -p1</code> </pre> <br><p style=";text-align:right;direction:rtl">     OpenJDK  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ ./configure --with-debug-level=fastdebug $ make images</code> </pre> <br><p style=";text-align:right;direction:rtl">    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">$ build/linux-x86_64-server-fastdebug/images/jdk/bin/java -XX:+UnlockExperimentalVMOptions -XX:+UseEpsilonGC -XX:+EpsilonSlidingGC -version openjdk version <span class="hljs-string"><span class="hljs-string">"13-internal"</span></span> 2019-09-17 OpenJDK Runtime Environment (build 13-internal+0-adhoc.shade.jdk-jdk-epsilon) OpenJDK 64-Bit Server VM (build 13-internal+0-adhoc.shade.jdk-jdk-epsilon, mixed mode, sharing</code> </pre> <br><a name="6"></a><br><h1 id="6-testirovanie" style=";text-align:right;direction:rtl"> 6.  </h1><br><p style=";text-align:right;direction:rtl">  ,    GC  ?    : </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> .  .   Hotspot    ,   JVM   <em>fastdebug</em>        ,        GC. </li><li style=";text-align:right;direction:rtl">  .        ,          . ,        ( )   ,          . </li><li style=";text-align:right;direction:rtl">  ุงูุงุฎุชุจุงุฑุงุช.    ,  ,   ,   .     -   ,        . </li></ol><br><p style=";text-align:right;direction:rtl"> ,    ,       : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">$ CONF=linux-x86_64-server-fastdebug make images run-test TEST=gc/epsilon/ Building targets 'images run-test' in configuration 'linux-x86_64-server-fastdebug' Test selection 'gc/epsilon/', will run: * jtreg:test/hotspot/jtreg/gc/epsilon Running test 'jtreg:test/hotspot/jtreg/gc/epsilon' Passed: gc/epsilon/TestAlwaysPretouch.java Passed: gc/epsilon/TestAlignment.java Passed: gc/epsilon/TestElasticTLAB.java Passed: gc/epsilon/TestEpsilonEnabled.java Passed: gc/epsilon/TestHelloWorld.java Passed: gc/epsilon/TestLogTrace.java Passed: gc/epsilon/TestDieDefault.java Passed: gc/epsilon/TestDieWithOnError.java Passed: gc/epsilon/TestMemoryPools.java Passed: gc/epsilon/TestMaxTLAB.java Passed: gc/epsilon/TestPrintHeapSteps.java Passed: gc/epsilon/TestArraycopyCheckcast.java Passed: gc/epsilon/TestClasses.java Passed: gc/epsilon/TestUpdateCountersSteps.java Passed: gc/epsilon/TestDieWithHeapDump.java Passed: gc/epsilon/TestByteArrays.java Passed: gc/epsilon/TestManyThreads.java Passed: gc/epsilon/TestRefArrays.java Passed: gc/epsilon/TestObjects.java Passed: gc/epsilon/TestElasticTLABDecay.java Passed: gc/epsilon/TestSlidingGC.java Test results: passed: 21 TEST SUCCESS</code> </pre> <br><p style=";text-align:right;direction:rtl"> ?       <em>fastdebug</em>    .  ?    - . </p><br><a name="7"></a><br><h1 id="7-proizvoditelnost" style=";text-align:right;direction:rtl"> 7.  </h1><br><p style=";text-align:right;direction:rtl"> -  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">spring-petclinic</a> ,  Apache Bench     GC!        ,  ,     GC . </p><br><p style=";text-align:right;direction:rtl">    : <code>-Xlog:gc -XX:+UnlockExperimentalVMOptions -XX:+UseEpsilonGC -XX:+EpsilonSlidingGC</code> : </p><br><p style=";text-align:right;direction:rtl"> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Heap: 20480M reserved, 20480M (100.00%) committed, 19497M (95.20%) used GC(2) Step 0: Prologue 2.085ms GC(2) Step 1: Mark 51.005ms GC(2) Step 2: Calculate new locations 71.207ms GC(2) Step 3: Adjust pointers 49.671ms GC(2) Step 4: Move objects 22.839ms GC(2) Step 5: Epilogue 1.008ms GC(2) GC Stats: 70561 (8.63%) reachable from roots, 746676 (91.37%) reachable from heap, 91055 (11.14%) moved, 2237 (0.27%) markwords preserved GC(2) Heap: 20480M reserved, 20480M (100.00%) committed, 37056K (0.18%) used GC(2) Lisp2-style Mark-Compact (Allocation Failure) 20479M-&gt;36M(20480M) 197.940ms</code> </pre> <br><p style=";text-align:right;direction:rtl"> 200 ?        GC!   ,         .   ,          ,   :         (      โ  ,    ).       - (                ). </p><br><p style=";text-align:right;direction:rtl">  , GC          . ,   <code>-Xlog:gc -XX:+UseSerialGC</code> โ  ,  ,  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">GC(46) Pause Young (Allocation Failure) 575M-&gt;39M(1943M) 2.603ms GC(47) Pause Young (Allocation Failure) 575M-&gt;39M(1943M) 2.606ms GC(48) Pause Young (Allocation Failure) 575M-&gt;39M(1943M) 2.747ms GC(49) Pause Young (Allocation Failure) 575M-&gt;39M(1943M) 2.578ms</code> </pre> <br><p style=";text-align:right;direction:rtl"> , 2 .  ,        ,   GC   .      <code>-Xlog:gc -XX:+UseSerialGC</code> ,       ,      : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">GC(3) Pause Full (Allocation Failure) 16385M-&gt;34M(18432M) 1969.694ms GC(4) Pause Full (Allocation Failure) 16385M-&gt;34M(18432M) 2261.405ms GC(5) Pause Full (Allocation Failure) 16385M-&gt;34M(18432M) 2327.577ms GC(6) Pause Full (Allocation Failure) 16385M-&gt;34M(18432M) 2328.976ms</code> </pre> <br><p style=";text-align:right;direction:rtl">     ,    .    . </p><br><a name="8"></a><br><h1 id="8-chto-dalshe" style=";text-align:right;direction:rtl"> 8.  ? </h1><br><p style=";text-align:right;direction:rtl">     .       ,    GC  OpenJDK โ  ,    ,          . </p><br><p style=";text-align:right;direction:rtl">   : </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">    .     ,   // .      .     ,       ,    ยซ ยป       ,        ,   . <br></p><blockquote style=";text-align:right;direction:rtl">    GC, <code>java.lang.ref.Reference.referent</code> โ     Java-,  ,   ,     -  .       <code>FinalReference</code> ,    . </blockquote>         <code>ReferenceProcessor</code>     /  /     . <br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">        VM.              VM,   ,   ,       .       <em></em>  <em></em>  .  ,    <em></em>  ,  ,     -  <em></em>   ,    . </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  .      โ    ,    GC,          .  ,    ,      ,       . <br></p><blockquote style=";text-align:right;direction:rtl">    mark-compact GC   Full GC fallbacks  Shenandoah (  OpenJDK 8)  G1 (  OpenJDK 10,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">JEP 307: ยซParallel Full GC for G1ยป</a> ). </blockquote><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  </a> .  ,        ยซยป     ,     , ,  -     .           .   ,          . </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">        .     ,  ,     ,           .   ,     ยซยป โ    ยซยป        ยซยป ,      . </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  -   GC Handbook     . </p><br></li></ol><br><a name="9"></a><br><h1 id="9-vyvody" style=";text-align:right;direction:rtl"> 9.  </h1><br><p style=";text-align:right;direction:rtl">       ?   GC โ  , ,  ,        GC. </p><br><p style=";text-align:right;direction:rtl">         ,    -  GC   . ,     ,            GC (, Serial GC  Parallel GC),         . </p><br><blockquote style=";text-align:right;direction:rtl">  ุฏูููุฉ ูู ุงูุฅุนูุงูุงุช.  , 5-6  2019,  JPoint โ    Java-.           โ OpenJDK, GraalVM, Kotlin  .        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  </a> . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar443250/">https://habr.com/ru/post/ar443250/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar443240/index.html">ููู Q- ุงูุชุนูู ุ ูุดููุฉ "ุงููุดู ุนูู ุตุฎุฑุฉ"</a></li>
<li><a href="../ar443242/index.html">Quarkus ูู ุฌุงูุง ุงูุฃุณุฑุน ูู ุงูุตูุช. ููุญุฉ ููุฌุฒุฉ ุนู ุงูุฅุทุงุฑ</a></li>
<li><a href="../ar443244/index.html">ููุงู ุงุณุชุฎูุงุต ุงููุนูููุงุช. Beanpoisk_1</a></li>
<li><a href="../ar443246/index.html">ููู ูููุง ุจุฅุนุงุฏุฉ ุงุฎุชุฑุงุน Askozia IP PBX ุจุนุฏ ุจูุน ุงููุดุฑูุน ูุฅุบูุงูู ุจูุงุณุทุฉ ุงููุทูุฑ</a></li>
<li><a href="../ar443248/index.html">ุจุฑูุชููููุงุช ุงูุญุฌุฒ ุงูุณูุณ PRP ู HSR</a></li>
<li><a href="../ar443252/index.html">ุฑูุจูุช ุงูููู ูุญุฏุงุช ูุน ุงูุฐุงูุฑุฉ</a></li>
<li><a href="../ar443254/index.html">ุชุฑูุชูู ูู ุฃูุซุฑ ุงูููุฑูุณุงุช ุฏูููุฉ</a></li>
<li><a href="../ar443256/index.html">PowerShell ุ ุชูุฑูุบ ุชุฌุฑุจุชู</a></li>
<li><a href="../ar443258/index.html">Gotify - ูุดุฑูุน ููุชูุญ ุงููุตุฏุฑ ูุชูุฏูู ุงูุฅุฎุทุงุฑุงุช ูุฅุฑุณุงู ุงูุฑุณุงุฆู ุฅูู ุงูุฎุงุฏู</a></li>
<li><a href="../ar443260/index.html">ุงูุชูู ุฅูู Zimbra ุฏูู ุงููุฎุงุทุฑุฉ ุจุงูุฃุนูุงู ุงูุชุฌุงุฑูุฉ ุฐุงุช ุงููุทุงู ุงููุดุชุฑู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>