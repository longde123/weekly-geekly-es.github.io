<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👎 🍝 🕗 Revolution oder Evolution des Seitenobjektmodells? 🥠 👩🏾‍🌾 🐷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! Ich heiße Artyom Sokovets . Ich möchte die Übersetzung meines Artikels über Atlas teilen: die Reinkarnation des HTML Elements-Framew...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Revolution oder Evolution des Seitenobjektmodells?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/474408/">  Hallo allerseits!  Ich heiße <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artyom Sokovets</a> .  Ich möchte die Übersetzung meines Artikels über Atlas teilen: die Reinkarnation des HTML Elements-Frameworks, das einen völlig anderen Ansatz für die Arbeit mit Page Object darstellt. <br><br>  Bevor ich auf die Details eingehe, möchte ich fragen: Wie viele Wrapper für Page Object kennen Sie?  Seitenelement, ScreenPlay, ladbare Komponente, Aufrufkette ... <br><br>  Und was passiert, wenn wir ein Seitenobjekt mit einer Implementierung auf der Schnittstelle nehmen, das Proxy-Muster befestigen und ein bisschen Java 8-Funktionalität hinzufügen? <br><br>  Bei Interesse schlage ich vor, zu Katze zu wechseln. <br><br><img src="https://habrastorage.org/webt/sk/d9/ms/skd9msauqsfknsh8sw9sxyrj2dk.png"><br><a name="habracut"></a><br><h2>  Einleitung </h2><br>  Bei Verwendung des Standard-PageObject-Entwurfsmusters treten eine Reihe von Problemen auf: <br><br>  <b>Vervielfältigung von Elementen</b> <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">".//div[@class = 'header']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Header header; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnyOtherPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">".//div[@class = 'header']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Header header; }</code> </pre> <br>  Hier wird der Header-Block in verschiedenen PageObject-Klassen verwendet. <br><br>  <b>Fehlende Parametrierung für Elemente</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EditUserPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//div[text()='Text_1']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextBlock lastActivity; <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//div[text()='Text_2']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TextBlock blockReason; }</code> </pre><br>  In diesem Beispiel werden die Elemente der Bearbeitungsseite für Benutzereinstellungen beschrieben.  Zwei TextBlock-Elemente enthalten einen nahezu identischen Locator mit einem Unterschied nur im Textwert ("Text_1" und "Text_2"). <br><br>  <b>Dieselbe Art von Code</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//div[text()='']/input"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UfsTextInput innerPhone; <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//div[text()='Email']/input"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UfsTextInput email; <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//button[text()='']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UfsButton save; <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//button[text()='']"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UfsButton toUsersList; }</code> </pre><br>  In der täglichen Arbeit finden Sie Page Object, das aus vielen Codezeilen mit denselben Elementen besteht.  In Zukunft sind solche Klassen "unpraktisch" zu pflegen. <br><br>  <b>Große Klasse mit Stufen</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainSteps</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HtmlElement e, Matcher m)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HtmlElement e, Matcher m)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">linkContains</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HtmlElement e, String s)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;HtmlElement&gt; e, Matcher m)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;HtmlElement&gt; e, Matcher m)</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">//... }</span></span></span></span></code> </pre><br>  Mit der Zeit wächst die Klasse der Schritte zum Arbeiten mit Elementen.  Es ist mehr Aufmerksamkeit erforderlich, damit es keine doppelten Methoden gibt. <br><br><h2>  Ihr Leitfaden für die Welt von Page Object </h2><br>  Die Reinkarnation des HTML Elements-Frameworks zielt darauf ab, die oben genannten Probleme zu lösen, die Anzahl der Codezeilen für ein Testprojekt zu reduzieren, mit Listen und Erwartungen sorgfältiger zu arbeiten und das Tool dank des Erweiterungssystems selbst zu optimieren. <br><br>  <b>Atlas</b> ist ein Java-Framework der neuen Generation für die Entwicklung von UI-Autotests mit der Implementierung des Seitenobjektmusters über Schnittstellen.  Dieser Ansatz bietet die Möglichkeit einer Mehrfachvererbung bei der Erstellung des Elementbaums, wodurch letztendlich ein präziser Code für Ihre Autotests bereitgestellt wird. <br><br>  Die Hauptinnovation des Frameworks ist die Verwendung von Schnittstellen anstelle von Standardklassen. <br><br>  So sieht die Homepage-Beschreibung von github.com aus: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//a[contains(text(), 'Or start a free)]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trial</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Der obige Code beschreibt die Hauptseite der GitHub-Site mit einem Element und Mehrfachvererbung von den Ebenen WebPage und WithHeader (das Beispiel dient nur zu Bildungszwecken, sodass die meisten Webelemente weggelassen werden). <br><br><h2>  Framework-Architektur </h2><br>  Atlas besteht derzeit aus drei Modulen: <br><br><ul><li>  Atlas-Kern </li><li>  Atlas-Webdriver </li><li>  Atlas-Appium </li></ul><br>  Der <b>Atlas-Core</b> beschreibt die Grundfunktionen für die Verarbeitung von Seitenobjekten über Schnittstellen.  Die Idee, Schnittstellen zu verwenden, stammt aus dem berühmten Retrofit-Tool. <br><br><img src="https://habrastorage.org/webt/-s/mm/8w/-smm8wwthpyo0xu7lrweew0ew54.png"><br><br>  Die beiden anderen <b>Module</b> <b>atlas-webdriver</b> und <b>atlas-appium</b> werden zur Entwicklung automatisierter UI-Web- und UI-Mobile-Skripte verwendet.  Der Haupteinstiegspunkt für die Beschreibung von Webseiten ist die WebPage-Oberfläche und für mobile Bildschirme - Bildschirm.  Konzeptionell basieren atlas-webdriver und atlas-appium auf Erweiterungen (Paket * .extension). <br><br><h2>  Gegenstände </h2><br><img src="https://habrastorage.org/webt/ot/hn/ql/othnql8naaytd5_voumj6ev9uwy.png"><br><br>  Das Tool enthält <b>zwei</b> spezielle Klassen für die Arbeit mit UI-Elementen (ein Analogon zur WebElement-Klasse). <br><br><img src="https://habrastorage.org/webt/xy/n0/6v/xyn06vwigi41-bob1cxykbq-7dq.png"><br><br>  <b>AtlasWebElement</b> und <b>AtlasMobileElement werden</b> durch <b>die</b> <b>Methoden</b> <b>should</b> und <b>waitUntil</b> ergänzt.  (Überlegungen zu diesen Methoden finden Sie weiter unten im Artikel). <br><br>  Das Tool bietet die Möglichkeit, eigene Komponenten zu erstellen, indem die oben genannten Klassen erweitert werden, sodass Sie ein plattformübergreifendes Element erstellen können. <br><br><h2>  Hauptmerkmale </h2><br>  Lassen Sie uns die Funktionalität des Tools genauer betrachten: <br><br><img src="https://habrastorage.org/webt/ef/yd/-c/efyd-c1u5ywgk7ql59ablf3aw5g.png"><br><br>  <b>Schnittstellen statt Klassen</b> <br><br>  Bei der Beschreibung von Standard-PageObjects werden Schnittstellen anstelle von Klassen verwendet. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//a[contains(text(), 'Or start a free trial of Enterprise Server')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trial</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Dieses Beispiel beschreibt den Link auf der GitHub-Startseite. <br><br>  <b>Parametrierung von Elementen</b> <br><br>  Stellen Sie sich vor, wir haben ein Formular mit Feldern: <br><br><img src="https://habrastorage.org/webt/uu/mb/wj/uumbwjd2-nqpladvu1m6khwmxg0.png" width="420"><br><br>  Um dies zu beschreiben, müssen Sie 11 Variablen mit der Annotation @FindBy erstellen und ggf. den Getter deklarieren. <br><br>  Mit Atlas benötigen Sie nur <b>ein</b> parametrisiertes AtlasWebElement-Element. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//div[text()='{{ text }}']/input"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"text"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String text)</span></span>; }</code> </pre><br>  Der automatisierte Testcode lautet wie folgt: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simpleTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onMainPage().input(<span class="hljs-string"><span class="hljs-string">"First Name"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"*"</span></span>); onMainPage().input(<span class="hljs-string"><span class="hljs-string">"Postcode"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"*"</span></span>); onMainPage().input(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"*"</span></span>); }</code> </pre><br>  Wir wenden uns der gewünschten Seite zu, rufen die Methode mit dem Parameter auf und führen die erforderlichen Aktionen mit dem Element aus.  Eine Methode mit einem Parameter beschreibt ein bestimmtes Feld. <br><br>  <b>Mehrfachvererbung</b> <br><br>  Es wurde bereits erwähnt, dass ein Block (z. B. Header), der in verschiedenen Seitenobjekten verwendet wird, eine Duplizierung von Code ist. <br><br>  Es gibt einen Header-Github. <br><br><img src="https://habrastorage.org/webt/_p/ca/39/_pca39zx5r4iw6kkwy9azeqy4d4.png"><br><br>  Wir beschreiben diesen Block (die meisten Webelemente werden weggelassen): <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Header</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AtlasWebElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">".//input[contains(@class,'header-search-input')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Erstellen Sie als Nächstes eine Ebene, die mit einer beliebigen Seite verbunden werden kann: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//header[contains(@class,'Header')]"</span></span>) <span class="hljs-function"><span class="hljs-function">Header </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">header</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Wir erweitern die Hauptseite mit dem Headerblock. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//a[contains(text(), 'Or start a)]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trial</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Im Allgemeinen können Sie weitere Ebenen erstellen und diese mit der gewünschten Seite verbinden.  Verbinden Sie im folgenden Beispiel die Ebenen Kopf-, Fußzeile und Seitenleiste der Hauptseite. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithFooter</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithSidebar</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre><br>  Lass uns weitermachen.  Die Kopfzeile enthält 4 Schaltflächen, 3 Dropdown-Menüs und ein Suchfeld: <br><br><img src="https://habrastorage.org/webt/bf/pk/dg/bfpkdgqfxasiualhznwxmis_nd8.png"><br><br>  Lassen Sie uns unser eigenes <b>Button-</b> Element erstellen und vier Buttons mit einem Element beschreiben. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Button</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AtlasWebElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">".//a[contains(., '{{ value }}')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">selectButton</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"value"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; }</code> </pre><br>  Verbinden Sie die Schaltfläche mit der Kopfzeilenebene.  Somit erweitern wir die Funktionalität des GitHub-Headers. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Header</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithButton</span></span></span><span class="hljs-class"> </span></span>{ … }</code> </pre><br>  Ein separates <b>Button-</b> Element kann mit verschiedenen Ebenen der Website verbunden werden und bringt schnell das gewünschte Element auf die gewünschte Seite. <br><br>  Ein Beispiel: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simpleTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onMainPage().open(<span class="hljs-string"><span class="hljs-string">"https://github.com"</span></span>); onMainPage().header().button(<span class="hljs-string"><span class="hljs-string">"Priing"</span></span>).click(); }</code> </pre><br>  In der zweiten Zeile des Tests wird auf die Kopfzeile der Site zugegriffen, dann rufen wir die parametrisierte Schaltfläche mit dem Wert "Pricing" auf und klicken. <br><br>  Es kann einige Elemente auf der getesteten Site geben, die sich von Seite zu Seite wiederholen.  Um sie nicht alle mit dem Standardansatz für Seitenobjekte zu beschreiben, können Sie sie einmal beschreiben und bei Bedarf verbinden.  Das Sparen von Zeit und der Anzahl der Codezeilen ist offensichtlich. <br><br><img src="https://habrastorage.org/webt/jk/mb/hw/jkmbhwzovztryyxlgoxu-slikau.png"><br><br>  <b>Standardmethoden</b> <br><br>  In Java 8 wurden Standardmethoden eingeführt, mit denen die gewünschte Funktionalität vordefiniert wird. <br><br>  Angenommen, wir haben ein "schädliches" Element: Zum Beispiel ein Kontrollkästchen, das entweder aktiviert oder deaktiviert ist.  Viele Szenarien durchlaufen es.  Es ist erforderlich, das Kontrollkästchen zu aktivieren, wenn es deaktiviert ist: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(onMainPage().rentFilter().checkbox(<span class="hljs-string"><span class="hljs-string">""</span></span>).getAttribute(<span class="hljs-string"><span class="hljs-string">"class"</span></span>).contains(<span class="hljs-string"><span class="hljs-string">"disabled"</span></span>)) { onMainPage().rentFilter().checkbox(<span class="hljs-string"><span class="hljs-string">""</span></span>).click(); }</code> </pre><br>  Um diesen gesamten Code nicht in der Schrittklasse zu speichern, kann er als Standardmethode neben dem Element platziert werden. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Checkbox</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AtlasWebElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//..."</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkBox</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">((@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"value"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">selectCheckbox</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (checkBox(value).getAttribute(<span class="hljs-string"><span class="hljs-string">"class"</span></span>).contains(<span class="hljs-string"><span class="hljs-string">"disabled"</span></span>)) { checkBox(value).click(); } } }</code> </pre><br>  Nun sieht der Testschritt folgendermaßen aus: <br><br><pre> <code class="java hljs">onMainPage().rentFilter().selectCheckbox(<span class="hljs-string"><span class="hljs-string">""</span></span>);</code> </pre><br>  Ein weiteres Beispiel, in dem Sie die Bereinigung und Eingabe von Zeichen in einem Feld kombinieren möchten. <br><br><pre> <code class="java hljs">onMainPage().header().input(<span class="hljs-string"><span class="hljs-string">"GitHub"</span></span>).clear(); onMainPage().header().input(<span class="hljs-string"><span class="hljs-string">"GitHub"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"*"</span></span>);</code> </pre><br>  Definieren Sie eine Methode, die das Feld löscht und das Element selbst zurückgibt: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Input</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AtlasWebElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">"//xpath"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">input</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"value"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> AtlasWebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withClearInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String value)</span></span></span><span class="hljs-function"> </span></span>{ input(value).clear(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> input(value); } }</code> </pre><br>  Bei der Testmethode ist der Schritt wie folgt: <br><br><pre> <code class="java hljs">onMainPage().header().withClearInput(<span class="hljs-string"><span class="hljs-string">"GitHub"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">"Atlas"</span></span>);</code> </pre><br>  Auf diese Weise kann das gewünschte Verhalten im Element programmiert werden. <br><br>  <b>Wiederholungen</b> <br><br>  Atlas hat Wiederholungsversuche eingebaut.  Sie müssen sich nicht um Ausnahmen wie <i>NotFoundException</i> , <i>StaleElementReferenceException</i> und <i>WebDriverException</i> <i>kümmern</i> , und Sie können auch vergessen, die expliziten und impliziten Erwartungen der Selenium-API zu verwenden. <br><br><pre> <code class="java hljs">onSite().onSearchPage(<span class="hljs-string"><span class="hljs-string">"Junit 5"</span></span>).repositories().waitUntil(hasSize(<span class="hljs-number"><span class="hljs-number">10</span></span>));</code> </pre><br>  Wenn Sie irgendwann in der Kette eine Ausnahme festgestellt haben, wird die Phase von Anfang an wiederholt. <br><br>  Es ist möglich, das Zeitintervall, in dem Sie wiederholen können, oder die Wiederholungshäufigkeit unabhängig einzustellen. <br><br><pre> <code class="java hljs">Atlas atlas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Atlas(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebDriverConfiguration(driver)) .context(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RetryerContext(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultRetryer(<span class="hljs-number"><span class="hljs-number">3000L</span></span>, <span class="hljs-number"><span class="hljs-number">1000L</span></span>, Collections.singletonList(Throwable.class))));</code> </pre><br>  Wir erwarten drei Sekunden mit einer Abfragerate von einmal pro Sekunde. <br><br>  Wir können die Wartezeit für ein bestimmtes Element auch mithilfe der Annotation " <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Wiederholen"</a></b> anpassen.  Für alle Elemente erfolgt die Suche innerhalb von 3 Sekunden und bei einem Element sind es 20. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Retry</span></span>(timeout = <span class="hljs-number"><span class="hljs-number">20_000L</span></span>, polling = <span class="hljs-number"><span class="hljs-number">2000L</span></span>) <span class="hljs-meta"><span class="hljs-meta">@IOSFindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//XCUIElementTypeSearchField[@name='Search Wikipedia']"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@AndroidFindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//*[contains(@text, 'Search Wikipedia')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasMobileElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchWikipedia</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>;</code> </pre><br>  <b>Mit Listen arbeiten</b> <br><br>  Das Tool bietet sofort die Möglichkeit, mit Listen zu arbeiten.  Was bedeutet das?  Es gibt ein Feld mit einem Eingabe-Tag, in das wir den Text eingeben. Dann wird eine Dropdown-Liste angezeigt. Die Elemente werden nicht sofort angezeigt. <br><br><img src="https://habrastorage.org/webt/-r/y7/uy/-ry7uy6gnjyp02kyy94ikb8prde.png"><br><br>  Für solche Fälle gibt es eine Entität ElementsCollection.  Mit seiner Hilfe gibt es eine Arbeit mit Listen. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContributorsPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHeader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(<span class="hljs-string"><span class="hljs-string">".//ol[contains(@class, 'contrib-data')]//li[contains(@class, 'contrib-person')]"</span></span>) <span class="hljs-function"><span class="hljs-function">ElementsCollection&lt;RepositoryCard&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hovercards</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Verwendung: <br><br><pre> <code class="java hljs">onSite().onContributorsPage().hovercards().waitUntil(hasSize(<span class="hljs-number"><span class="hljs-number">4</span></span>));</code> </pre><br>  Es ist auch möglich, Elemente zu filtern und in eine Liste anderer Art zu konvertieren. <br><br>  <b>Kluge Behauptungen</b> <br><br>  Wie bereits erwähnt, verwenden die <b>Entitäten</b> <b>AtlasWebElement</b> und <b>AtlasMobileElement</b> die Methoden should, waitUntil, um mit Prüfungen (Anweisungen) zu arbeiten. <br><br><div class="scrollable-table"><table><tbody><tr><th>  Methode </th><th>  Beschreibung </th></tr><tr><td>  sollte (...) </td><td>  Führt verschiedene Anweisungen (Prüfungen) mit einem Element aus.  Wirft einen <b>AssertionError</b> </td></tr><tr><td>  waitUntil (...) </td><td>  Führt verschiedene Anweisungen (Prüfungen) mit einem Element aus.  <b>Löst eine RuntimeException aus</b> </td></tr></tbody></table></div><br>  Warum wird das gemacht?  So sparen Sie Zeit beim Parsen von Laufberichten für automatisierte Skripts.  Die meisten Funktionsprüfungen werden am Ende des Skripts durchgeführt: Sie sind für einen Spezialisten für Funktionstests von Interesse und Zwischenprüfungen für einen Spezialisten für automatisierte Tests.  Wenn die Funktionalität des Produkts nicht funktioniert, ist es daher logisch, eine AssumptionError-Ausnahme auszulösen, andernfalls eine RuntimeException. <br><br><img src="https://habrastorage.org/webt/fx/ry/lh/fxrylhza6j8ng2c8hawoaniixvc.png"><br><br><img src="https://habrastorage.org/webt/x3/jh/qv/x3jhqvyysqmclcpoe7recbi8tim.png"><br><br>  Allure wird sofort zeigen, womit wir es zu tun haben: Entweder haben wir einen Produktfehler (der FT-Spezialist übernimmt den Job) oder der Autotest fällt aus (der AT-Spezialist versteht). <br><br>  <b>Erweiterungsmodell</b> <br><br><img src="https://habrastorage.org/webt/nr/re/tj/nrretjnxyedry2guei6w0p1opqa.png"><br><br>  Der Benutzer hat die Möglichkeit, die Grundfunktionalität des Tools neu zu definieren oder seine eigene Funktionalität zu implementieren.  Das Atlas-Erweiterungsmodell ähnelt dem JUnit 5-Erweiterungsmodell. Die Module atlas-webdriver und atlas-appium basieren auf Erweiterungen.  Wenn Sie interessiert sind, lesen Sie den Quellcode. <br><br>  Lassen Sie uns ein abstraktes Beispiel untersuchen: Es ist erforderlich, UI-Tests für Internet Explorer 11 zu entwickeln (an einigen Stellen wird es noch verwendet).  Es gibt Zeiten, in denen der Standardklick auf die Elemente nicht funktioniert, dann können Sie den JS-Klick verwenden.  Sie beschließen, den Klick auf das gesamte Testprojekt vorübergehend zu überschreiben. <br><br><pre> <code class="java hljs">onMainPage().header().button(<span class="hljs-string"><span class="hljs-string">"en"</span></span>).click();</code> </pre><br>  Wie kann man das machen? <br><br>  Erstellen Sie eine Erweiterung, die die MethodExtension-Schnittstelle implementiert. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JSClickExt</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MethodExtension</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">invoke</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object proxy, MethodInfo methodInfo, Configuration config)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> WebDriver driver = config.getContext(WebDriverContext.class) .orElseThrow(() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AtlasException(<span class="hljs-string"><span class="hljs-string">"Context doesn't exist"</span></span>)).getValue(); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> JavascriptExecutor js = (JavascriptExecutor) driver; js.executeScript(<span class="hljs-string"><span class="hljs-string">"arguments[0].click();"</span></span>, proxy); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> proxy; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Method method)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> method.getName().equals(<span class="hljs-string"><span class="hljs-string">"click"</span></span>); } }</code> </pre><br>  Wir definieren zwei Methoden neu.  In der test () -Methode geben wir an, dass wir die click-Methode überschreiben.  Die Aufrufmethode implementiert die erforderliche Logik.  Jetzt erfolgt das Klicken auf das Element über JavaScript. <br><br>  Wir verbinden die Erweiterung wie folgt: <br><br><pre> <code class="java hljs">atlas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Atlas(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebDriverConfiguration(driver, <span class="hljs-string"><span class="hljs-string">"https://github.com"</span></span>)) .extension(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JSClickExt());</code> </pre><br>  Mit Hilfe von Erweiterungen ist es möglich, nach Locators für Elemente in der Datenbank zu suchen und andere interessante Funktionen zu implementieren - alles hängt von Ihrer Vorstellungskraft und Ihren Bedürfnissen ab. <br><br>  <b>Einzelner Einstiegspunkt für PageObjects (WebSite)</b> <br><br>  Mit dem Tool können Sie alle Ihre Seiten an einem Ort speichern und in Zukunft nur noch die Site-Entität bearbeiten. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GitHubSite</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebSite</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Page</span></span> <span class="hljs-function"><span class="hljs-function">MainPage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onMainPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">@Page</span></span>(url = <span class="hljs-string"><span class="hljs-string">"search"</span></span>) <span class="hljs-function"><span class="hljs-function">SearchPage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSearchPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Query(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"q"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Page</span></span>(url = <span class="hljs-string"><span class="hljs-string">"{profile}/{project}/tree/master/"</span></span>) <span class="hljs-function"><span class="hljs-function">ProjectPage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onProjectPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Path(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"profile"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String profile, @</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Path</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"project"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String project)</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Page</span></span> <span class="hljs-function"><span class="hljs-function">ContributorsPage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onContributorsPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Darüber hinaus können Seiten schnelle URLs, Abfrageparameter und Pfadsegmente festlegen. <br><br><pre> <code class="java hljs">onSite().onProjectPage(<span class="hljs-string"><span class="hljs-string">"qameta"</span></span>, <span class="hljs-string"><span class="hljs-string">"atlas"</span></span>).contributors().click();</code> </pre><br>  Die obige Zeile enthält zwei Pfadsegmente (Qameta und Atlas), die in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github.com/qameta/atlas/tree/master</a> übersetzt werden.  Der Hauptvorteil dieses Ansatzes besteht darin, dass die gewünschte Seite sofort geöffnet werden kann, ohne darauf zu klicken. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">usePathWebSiteTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onSite().onProjectPage(<span class="hljs-string"><span class="hljs-string">"qameta"</span></span>, <span class="hljs-string"><span class="hljs-string">"atlas"</span></span>).contributors().click(); onSite().onContributorsPage().hovercards().waitUntil(hasSize(<span class="hljs-number"><span class="hljs-number">4</span></span>)); }</code> </pre><br>  <b>Arbeiten Sie mit einem mobilen Element</b> <br><br>  Das Arbeiten mit einem mobilen Element (AtlasMobileElement) ähnelt dem Arbeiten mit dem AtlasWebElement-Webelement.  Zusätzlich wurden AtlasMobileElement drei Methoden hinzugefügt: Scrollen des Bildschirms nach oben / unten (scrollUp / scrollDown) und Klicken auf ein Element mit Hold (longPress). <br><br>  Lassen Sie mich Ihnen ein Beispiel für den Hauptbildschirm der Wikipedia-Anwendung geben.  Ein Element wird sowohl für die iOS-Plattform als auch für Android beschrieben.  Sie beschreiben auch eine parametrierte Schaltfläche. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Screen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Retry</span></span>(timeout = <span class="hljs-number"><span class="hljs-number">20_000L</span></span>, polling = <span class="hljs-number"><span class="hljs-number">2000L</span></span>) <span class="hljs-meta"><span class="hljs-meta">@IOSFindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//XCUIElementTypeSearchField[@name='Search Wikipedia']"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@AndroidFindBy</span></span>(xpath = <span class="hljs-string"><span class="hljs-string">"//*[contains(@text, 'Search Wikipedia')]"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasMobileElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">searchWikipedia</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">@IOSFindBy</span></span>(id = <span class="hljs-string"><span class="hljs-string">"{{ value }}"</span></span>) <span class="hljs-function"><span class="hljs-function">AtlasMobileElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">button</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"value"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String value)</span></span>; }</code> </pre><br>  Tests sehen genauso aus: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simpleExample</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onMainScreen().searchWikipedia().click(); onSearchScreen().search().sendKeys(<span class="hljs-string"><span class="hljs-string">"Atlas"</span></span>); onSearchScreen().item(<span class="hljs-string"><span class="hljs-string">"Atlas LV-3B"</span></span>).swipeDownOn().click(); onArticleScreen().articleTitle().should(allOf(displayed(), text(<span class="hljs-string"><span class="hljs-string">"Atlas LV-3B"</span></span>))); }</code> </pre><br>  Im obigen Beispiel öffnen wir die Wikipedia-Hauptseite, klicken auf die Suchleiste, geben den Text Atlas ein, scrollen dann zum Listenelement mit dem Wert Atlas LV-3B und gehen zu seiner Ansicht.  Die letzte Zeile prüft, ob der Titel angezeigt wird und den gewünschten Wert enthält. <br><br>  <b>Zuhörer</b> <br><br>  Die Ereignisprotokollierung kann mithilfe eines speziellen Listeners (Listener-Schnittstelle) implementiert werden.  Jede Methode hat beim Aufruf vier Ereignisse: <b>Vorher</b> , <b>Bestanden</b> , <b>Nicht bestanden</b> .  <b>Nachher</b> . <br><br><img src="https://habrastorage.org/webt/vf/to/ku/vftokukrzuynpobt2yjtulqy2g8.png"><br><br>  Über diese Schnittstelle können Sie die Berichterstellung organisieren.  Unten finden Sie ein Beispiel für den Allure Listener, den Sie unter dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link finden</a> . <br><br><img src="https://habrastorage.org/webt/x3/fo/3c/x3fo3cmcfe7beqygkorupy3ngxo.png"><br><br>  Verbinden Sie als Nächstes den Listener, wenn Sie die Atlas-Klasse initialisieren. <br><br><pre> <code class="java hljs">atlas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Atlas(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebDriverConfiguration(driver)).listener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AllureListener());</code> </pre><br><br>  Auf die oben beschriebene Weise ist es möglich, einen Listener für verschiedene Berichtssysteme (z. B. für ReportPortal) zu erstellen. <br><br><h2>  Verbindung </h2><br><br>  Um das UI-Web zu automatisieren, reicht es aus, die Atlas-Webdriver-Abhängigkeit zu registrieren und die neueste aktuelle Version anzugeben (Version 1.6.0 ist zum Zeitpunkt dieses Schreibens relevant). <br><br>  Maven: <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>io.qameta.atlas<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>atlas-webdriver<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${atlas.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Gradle: <br><pre> <code class="java hljs">dependencies { ompile <span class="hljs-string"><span class="hljs-string">'io.qameta.atlas:atlas-webdriver:1.+'</span></span> }</code> </pre><br><br>  Wir tun dasselbe, wenn Sie UI Mobile automatisieren möchten. <br><br>  Maven: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>io.qameta.atlas<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>atlas-appium<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${atlas.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Gradle: <br><pre> <code class="java hljs">dependencies { ompile <span class="hljs-string"><span class="hljs-string">'io.qameta.atlas:atlas-appium:1.+'</span></span> }</code> </pre><br><br><h2>  Verwenden Sie </h2><br><br>  Nachdem Sie die Abhängigkeit zu Ihrem Projekt hinzugefügt haben, müssen Sie die Atlas-Klasseninstanz initialisieren. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">startDriver</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ driver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ChromeDriver(); atlas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Atlas(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebDriverConfiguration(driver)); }</code> </pre><br>  Wir übergeben die Konfigurationsinstanz und den Treiber an den Atlas-Konstruktor. <br><br>  Derzeit gibt es zwei Konfigurationen: WebDriverConfiguration und AppiumDriverConfiguration.  Jede Konfiguration enthält bestimmte Standarderweiterungen. <br><br>  Als nächstes definieren wir eine Methode, die alle PageObject erstellt. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> &lt;T extends WebPage&gt; <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Class&lt;T&gt; page)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> atlas.create(driver, page); }</code> </pre><br><br>  Ein Beispiel für einen einfachen Testfall: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simpleTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ onPage(MainPage.class).open(<span class="hljs-string"><span class="hljs-string">"https://github.com"</span></span>); onPage(MainPage.class).header().searchInput().sendKeys(<span class="hljs-string"><span class="hljs-string">"Atlas"</span></span>); onPage(MainPage.class).header().searchInput().submit(); }</code> </pre><br>  Wir öffnen die Site, wenden uns der Kopfzeile zu, suchen ein Textfeld (Sucheingabe) darin, geben den Text ein und drücken die Eingabetaste. <br><br><h2>  Zusammenfassung </h2><br>  Abschließend möchte ich darauf hinweisen, dass Atlas ein flexibles Tool mit großartigen Funktionen ist.  Es kann für ein bestimmtes Testprojekt auf eine Weise angepasst werden, die für Ihr Team und Sie bequem ist.  Entwickeln Sie plattformübergreifende Tests usw. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Videoclips mit</a> Berichten von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Heisenbug</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Selenium Camp</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nexign QA Meetup sind verfügbar</a> .  Es gibt einen Telegramm-Chat @atlashelp. <br><br>  Mit diesem Tool können Sie eine erhebliche Anzahl von Codezeilen reduzieren (getestet an Projekten von Unternehmen wie Yandex, SberTech und Tinkoff). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de474408/">https://habr.com/ru/post/de474408/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de474396/index.html">Dell wird für die Ölindustrie den leistungsstärksten industriellen Supercomputer der Geschichte zusammenstellen</a></li>
<li><a href="../de474400/index.html">Mythen über die Verfügbarkeit von Farbkontrasten</a></li>
<li><a href="../de474402/index.html">API-Handbuch für Vavr-Sammlungen</a></li>
<li><a href="../de474404/index.html">Analyse der gelösten Probleme aus der Programmiermeisterschaft von Yandex (Frontend-Entwicklung) 2019</a></li>
<li><a href="../de474406/index.html">BlueKeeps erster Auftritt in freier Wildbahn wurde aufgezeichnet</a></li>
<li><a href="../de474414/index.html">Wir schreiben unseren eigenen Voxelmotor</a></li>
<li><a href="../de474418/index.html">DEFCON-Konferenz 27. Profitieren Sie von Hacker-Produkten für macOS. Teil 1</a></li>
<li><a href="../de474420/index.html">Thermostatbildung: wie es passiert ist</a></li>
<li><a href="../de474422/index.html">Spannende Open Source-Plattformen für die Entwicklung mobiler Anwendungen</a></li>
<li><a href="../de474424/index.html">Blended Training - was ist das und wie funktioniert es?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>