<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê≠ ü•å üöå JavaScript em 3D: uma introdu√ß√£o ao Three.js üíï üôå üì¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! Apresento a voc√™ a tradu√ß√£o do artigo "JavaScript in 3D: a Introduction to Three.js", de Bret Cameron. 

 1. Introdu√ß√£o  
 Three.js √© uma fe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>JavaScript em 3D: uma introdu√ß√£o ao Three.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477956/">  <i>Ol√° Habr!</i>  <i>Apresento a voc√™ a tradu√ß√£o do <a href="https://medium.com/javascript-in-plain-english/javascript-in-3d-an-introduction-to-three-js-780f1e4a2e6d">artigo</a> "JavaScript in 3D: a Introduction to Three.js", de Bret Cameron.</i> <br><br><h2>  1. Introdu√ß√£o </h2> <br>  Three.js √© uma ferramenta poderosa.  Ajuda a usar o design 3D em um navegador com desempenho aceit√°vel.  Introdu√ß√£o O Three.js pode ser complicado, especialmente se voc√™ nunca mergulhou no mundo da programa√ß√£o 3D antes. <br><br>  Eu tenho alguma experi√™ncia b√°sica com o Unity e o mecanismo de jogo em C #, mas ainda assim, muitos dos conceitos s√£o novos para mim.  Cheguei √† conclus√£o de que agora existem muito poucos recursos para desenvolvedores iniciantes, por isso decidi escrever este artigo.  Nele, consideraremos os elementos b√°sicos das cenas Three.js, desde malhas e materiais poligonais at√© geometria, carregadeiras e muito mais. <br><a name="habracut"></a><br>  No final deste artigo, voc√™ ter√° uma s√≥lida compreens√£o dos aspectos b√°sicos necess√°rios para adicionar uma dimens√£o extra ao seu futuro projeto da web. <br><br>  Exemplos de Three.js de <a href="https://threejs.org/examples/">Ben Houston</a> , <a href="https://threejs.org/examples/">Thomas Diewald</a> e <a href="https://threejs.org/examples/">StrykerDoesAnimation</a> . <br><br><h3>  Vetores e cont√™ineres - blocos de constru√ß√£o b√°sicos </h3><br>  Geralmente, existem duas classes principais no Three.js - <i>Vector3</i> e <i>Box3</i> .  Se voc√™ √© novo no 3D, isso pode parecer um pouco abstrato, mas voc√™ os encontrar√° muitas vezes. <br><br><h3>  Vector3 </h3><br>  A classe 3D mais b√°sica que cont√©m tr√™s n√∫meros: <i>x, ye z</i> .  Os n√∫meros s√£o as coordenadas de um ponto no espa√ßo 3D ou a dire√ß√£o e o comprimento.  Por exemplo: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> vect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Vector3(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br>  A maioria dos construtores no Three.js aceita objetos do tipo <i>Vector3</i> como argumentos de entrada, por exemplo, <i>Box3</i> <br><br><h3>  Box3 </h3><br>  Esta classe representa cuboide (cont√™iner 3D).  Sua principal tarefa √© criar um cont√™iner em torno de outros objetos - e isso √© tudo, o menor cub√≥ide no qual um objeto 3D se ajustar√°.  Cada <i>Box3 est√°</i> alinhado sobre os eixos <i>x, ye z.</i>  Um exemplo de como criar um cont√™iner usando <i>Vector3</i> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> vect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Vector3(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> box = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Box3(vect);</code> </pre> <br>  Um exemplo de como criar um cont√™iner em torno de um objeto 3D existente: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> box = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Box3(); box.setFromObject(object);</code> </pre> <br>  Voc√™ pode criar grades sem esse conhecimento aprofundado, mas assim que come√ßar a criar ou alterar seus modelos, essas classes definitivamente ser√£o √∫teis.  Agora vamos nos afastar das abstra√ß√µes para coisas mais vis√≠veis. <br><br><h3>  Malha de pol√≠gono </h3><br>  No Three.js, o principal elemento visual no palco √© o <i>Mesh</i> .  Este √© um objeto 3D composto por ret√¢ngulos triangulares (malha poligonal).  √â constru√≠do usando dois objetos: <br>  <i>Geometria</i> - determina sua forma, <i>Material</i> - determina a apar√™ncia. <br><br>  Suas defini√ß√µes podem parecer um pouco confusas (por exemplo, a classe <i>Geometry</i> pode conter informa√ß√µes sobre cores), mas a principal diferen√ßa √© exatamente isso. <br><br><h3>  Geometria </h3><br>  Com base na tarefa que voc√™ deseja realizar, voc√™ pode definir a geometria dentro do Three.js ou importar outra de um arquivo. <br><br>  Usando fun√ß√µes como <i>THREE.TorusKnotGeometry</i> , podemos criar objetos complexos com uma √∫nica linha de c√≥digo.  Chegaremos a isso em breve, mas primeiro considere formas mais simples. <br>  A figura 3D mais simples, cub√≥ide ou cont√™iner, pode ser especificada pelos par√¢metros de <i>largura</i> , <i>altura</i> e <i>profundidade</i> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> geometry = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.BoxGeometry( <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span> );</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://codepen.io/BretCameron/embed/preview/eYOxYZL" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Para uma esfera, o valor dos par√¢metros <i>radius</i> , <i>widthSegments</i> e <i>heightSegments</i> √© <i>m√≠nimo</i> .  As duas √∫ltimas vari√°veis ‚Äã‚Äãindicam quantos tri√¢ngulos o modelo deve usar para representar a esfera: quanto maior o n√∫mero, mais suave ele ser√°. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> geometry = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.SphereGeometry( <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">64</span></span>, <span class="hljs-number"><span class="hljs-number">64</span></span> );</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://codepen.io/BretCameron/embed/preview/KKPJKgQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Se queremos fazer formas n√≠tidas ou triangulares, podemos usar um cone.  Seus argumentos s√£o uma combina√ß√£o dos argumentos das duas figuras anteriores.  Abaixo, prescrevemos <i>radius</i> , <i>widthSegments</i> e <i>radialSegments</i> . <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> geometry = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.ConeBufferGeometry( <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span> );</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://codepen.io/BretCameron/embed/preview/MWgLWJB" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Isso √© apenas parte das figuras mais comuns.  O Three.js possui muitas formas dentro da caixa, que podem ser encontradas na documenta√ß√£o.  Neste artigo, veremos formas mais interessantes criadas com base no m√©todo <i>TorusKnotGeometry</i> . <br><br>  Por que essas formas t√™m exatamente a apar√™ncia?  Esta quest√£o est√° al√©m do escopo deste artigo, mas pe√ßo que voc√™ experimente os valores dos par√¢metros, porque voc√™ pode obter formas muito interessantes com uma linha de c√≥digo! <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> geometry = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.TorusKnotGeometry(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">1.3</span></span>, <span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>);</code> </pre> <br>  <a href="https://codepen.io/BretCameron/pen/gOYqORg">https://codepen.io/BretCameron/pen/gOYqORg</a> <br><br><h3>  Materiais </h3><br>  A geometria define a forma dos nossos objetos 3D, mas n√£o a apar√™ncia.  Para consertar isso, precisamos de materiais. <br><br>  O Three.js oferece 10 materiais prontos para uso, cada um com suas pr√≥prias vantagens e par√¢metros personaliz√°veis.  Consideraremos apenas parte dos mais √∫teis. <br><br><img src="https://habrastorage.org/webt/7o/1r/av/7o1rav-we2n9_hn6e74l-6ivo6q.png"><br><br><h4>  MalhaNormalMaterial </h4><br>  <i>√ötil para in√≠cio e in√≠cio r√°pidos.</i> <br><br>  Come√ßaremos com <i>MeshNormalMaterial</i> , o material multicolorido que usamos nos exemplos acima.  Corresponde aos vetores normais no painel RGB, ou seja, as cores s√£o usadas para determinar a posi√ß√£o do vetor no espa√ßo 3D. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> material = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.MeshNormalMaterial();</code> </pre> <br>  Observe que se voc√™ deseja alterar a cor do material, pode usar o filtro CSS e alterar a satura√ß√£o: <pre> <code class="javascript hljs"> filter: hue-rotate(<span class="hljs-number"><span class="hljs-number">90</span></span>deg) .</code> </pre> <br><br>  Na minha experi√™ncia, esse material √© mais √∫til para um estrato e lan√ßamento r√°pidos.  Para maior controle de seus objetos, √© melhor usar outra coisa. <br><br><h4>  Meshbasicmaterial </h4><br>  <i>√ötil ao exibir apenas o esqueleto.</i> <br><br>  Se voc√™ quiser dar uma cor √† figura, poder√° usar o <i>MeshBasicMaterial</i> apenas se a ilumina√ß√£o n√£o for aplicada.  Achei √∫til usar esse material para renderizar o esqueleto do modelo.  Para desenhar apenas o esqueleto, voc√™ precisa passar <i>{wireframe: true}</i> como par√¢metro. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> material = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.MeshBasicMaterial({ <span class="hljs-attr"><span class="hljs-attr">wireframe</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-number"><span class="hljs-number">0xdaa520</span></span> });</code> </pre> <br>  A principal desvantagem deste material √© que as informa√ß√µes sobre a profundidade do material s√£o completamente perdidas.  Cada material tem a op√ß√£o de exibir apenas o esqueleto, mas apenas um material resolve o problema de falta de profundidade - <i>MeshDepthMaterial</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://codepen.io/BretCameron/embed/preview/ZEzwERw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h4>  Meshhambertmaterial </h4><br>  <i>√ötil para alto desempenho, mas baixa precis√£o.</i> <br><br>  Este √© o primeiro material que leva em considera√ß√£o a luz, ent√£o voc√™ precisa adicionar um pouco de luz √† nossa cena.  No c√≥digo abaixo, adicionamos holofotes com uma tonalidade amarela para criar um efeito mais quente. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> scene = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.Scene(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> frontSpot = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.SpotLight(<span class="hljs-number"><span class="hljs-number">0xeeeece</span></span>); frontSpot.position.set(<span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>); scene.add(frontSpot); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> frontSpot2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.SpotLight(<span class="hljs-number"><span class="hljs-number">0xddddce</span></span>); frontSpot2.position.set(<span class="hljs-number"><span class="hljs-number">-500</span></span>, <span class="hljs-number"><span class="hljs-number">-500</span></span>, <span class="hljs-number"><span class="hljs-number">-500</span></span>); scene.add(frontSpot2);</code> </pre> <br>  Agora adicione material para a nossa figura.  Como nossa figura √© como uma decora√ß√£o, sugiro adicionar uma cor mais dourada.  Outro par√¢metro, <i>emissivo</i> , √© a cor do objeto proveniente do pr√≥prio objeto (sem fonte de luz).  Geralmente isso funciona melhor como uma cor escura - por exemplo, como tons escuros de cinza, como no exemplo abaixo <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> material = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.MeshLambertMaterial({ <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-number"><span class="hljs-number">0xdaa520</span></span>, <span class="hljs-attr"><span class="hljs-attr">emissive</span></span>: <span class="hljs-number"><span class="hljs-number">0x111111</span></span>, });</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://codepen.io/BretCameron/embed/preview/OJLdJGz" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Como voc√™ pode ver no exemplo abaixo, a cor √© mais ou menos correta, mas a maneira como interage com a luz n√£o adiciona realismo.  Para corrigir isso, precisamos usar o <i>MeshPhongMaterial</i> ou o <i>MeshStandardMaterial.</i> <br><br><h4>  MeshPhongMaterial </h4><br>  <i>√ötil para desempenho m√©dio e precis√£o m√©dia.</i> <br><br>  Esse material oferece uma troca entre desempenho e precis√£o de renderiza√ß√£o, portanto, este material √© uma boa op√ß√£o para um aplicativo que precisa ser produtivo junto com uma renderiza√ß√£o mais precisa do que com o <i>MeshLambertMaterial.</i> <br><br>  Agora podemos alterar a propriedade <i>especular</i> que afeta o brilho e a cor da reflex√£o da superf√≠cie.  Se a propriedade emissiva √© geralmente escura, o <i>especular</i> funciona melhor para cores claras.  Abaixo usamos cinza claro. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> material = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.MeshPhongMaterial({ <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-number"><span class="hljs-number">0xdaa520</span></span>, <span class="hljs-attr"><span class="hljs-attr">emissive</span></span>: <span class="hljs-number"><span class="hljs-number">0x000000</span></span>, <span class="hljs-attr"><span class="hljs-attr">specular</span></span>: <span class="hljs-number"><span class="hljs-number">0xbcbcbc</span></span>, });</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://codepen.io/BretCameron/embed/preview/YzKBwwQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Visualmente, a imagem de cima reflete a luz de forma mais convincente, mas ainda n√£o perfeita.  A luz branca √© muito brilhante e o material parece mais estriado do que met√°lico (e nos esfor√ßamos para isso).  Podemos obter um resultado melhor usando o <i>MeshStandardMaterial.</i> <br><br><h4>  MeshStandartMaterial </h4><br>  <i>√ötil para alta precis√£o, mas baixa produtividade.</i> <br><br>  Este √© o material mais preciso de todos, embora seu uso acarrete os custos do uso de mais energia.  <i>MeshStandartMaterial √©</i> usado com par√¢metros adicionais de <i>metalicidade</i> e <i>rugosidade</i> , cada um com valor entre 0 e 1. <br><br>  O par√¢metro <i>metalness</i> afeta como o objeto reflete, aproximando-se da natureza do metal.  Isso ocorre porque materiais condutores como metais t√™m diferentes propriedades refletivas, diferentemente dos diel√©tricos, como a cer√¢mica. <br><br>  <i>A rugosidade</i> adiciona uma camada extra para personaliza√ß√£o.  Voc√™ pode imaginar isso como o oposto do brilho: 0 - muito brilhante, 1 - muito fosco. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> material = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.MeshStandardMaterial({ <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-number"><span class="hljs-number">0xfcc742</span></span>, <span class="hljs-attr"><span class="hljs-attr">emissive</span></span>: <span class="hljs-number"><span class="hljs-number">0x111111</span></span>, <span class="hljs-attr"><span class="hljs-attr">specular</span></span>: <span class="hljs-number"><span class="hljs-number">0xffffff</span></span>, <span class="hljs-attr"><span class="hljs-attr">metalness</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">roughness</span></span>: <span class="hljs-number"><span class="hljs-number">0.55</span></span>, });</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://codepen.io/BretCameron/embed/preview/gOYqPMv" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Este √© o material mais realista de todos os apresentados em Three.js, mas tamb√©m o que consome mais recursos <br><br>  Os materiais que discutimos abaixo s√£o os que encontrei com mais frequ√™ncia e voc√™ pode ver todas as op√ß√µes no banco dos r√©us. <br><br><h3>  Carregadeiras </h3><br>  Como discutimos acima, voc√™ pode definir manualmente malhas de geometria e pol√≠gono.  Na pr√°tica, as pessoas frequentemente carregam suas geometrias a partir de arquivos.  Felizmente, o Three.js possui poucos downloads que suportam muitos formatos 3D. <br><br>  O <i>ObjectLoader</i> principal carrega o arquivo JSON usando o formato <i>JSON Object / Scene</i> .  A maioria dos gerenciadores de inicializa√ß√£o precisa ser importada manualmente.  Voc√™ pode encontrar uma lista completa dos gerenciadores de inicializa√ß√£o suportados aqui e import√°-los.  Abaixo est√° uma pequena lista do que voc√™ pode importar. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// GLTF import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js'; // OBJ import { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js'; // STL import { STLLoader } from 'three/examples/jsm/loaders/STLLoader.js'; // FBX import { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader.js'; // 3MF import { 3MFLoader } from 'three/examples/jsm/loaders/3MFLoader.js';</span></span></code> </pre> <br>  O formato recomendado para visualiza√ß√£o on-line √© GLTF, porque o formato √© "destinado a fornecer ativos em tempo de execu√ß√£o, compacto para transfer√™ncia e r√°pido para download". <br><br>  Obviamente, pode haver muitos motivos para preferir um determinado tipo de arquivo (por exemplo, se a qualidade for uma prioridade ou se for necess√°ria uma precis√£o para a impress√£o 3D).  O melhor desempenho online ser√° ao importar o GLTF. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { GLTFLoader } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'three/examples/jsm/loaders/GLTFLoader.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> model <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../models/sample.gltf'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> loader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GLTFLoader(); loader.load(model, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">geometry</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// if the model is loaded successfully, add it to your scene here }, undefined, function (err) { console.error(err); });</span></span></code> </pre> <br><h3>  Juntando tudo </h3><br>  Uma das raz√µes pelas quais o Three.js pode parecer intimidador √© que voc√™ pode criar algo do zero com apenas algumas linhas de c√≥digo.  Em cada exemplo acima, precis√°vamos criar uma cena e uma c√¢mera.  Para simplificar, mantive esse c√≥digo fora do escopo da revis√£o, mas, por enquanto, veremos como ele ficar√° juntos. <br><br>  A maneira como voc√™ organiza seu c√≥digo √© com voc√™.  Em exemplos mais simples, como neste artigo, faz sentido escrever todo o c√≥digo em um s√≥ lugar.  Mas, na pr√°tica, √© √∫til separar os elementos individuais para a possibilidade de expandir a base de c√≥digo e seu gerenciamento. <br><br>  Para simplificar, consideraremos os elementos que s√£o desenhados como um √∫nico objeto, portanto, colocaremos todo o c√≥digo em um arquivo. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Import dependencies import * as THREE from 'three'; import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'; //   const scene = new THREE.Scene(); scene.background = new THREE.Color(0x282c34); //  ,       const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 10000); camera.position.z = 5; //  ""      const renderer = new THREE.WebGLRenderer(); renderer.setSize(window.innerWidth, window.innerHeight); //   DOM   renderer.domElement   document.getElementById('threejs').appendChild(renderer.domElement); //  ,      DOM  let controls = new OrbitControls(camera, document.getElementById('threejs')); controls.target.set(0, 0, 0); controls.rotateSpeed = 0.5; controls.update(); //  ( )   const geometry = new THREE.TorusKnotGeometry(10, 1.3, 500, 6, 6, 20); //    const material = new THREE.MeshStandardMaterial({ color: 0xfcc742, emissive: 0x111111, specular: 0xffffff, metalness: 1, roughness: 0.55, }); //   ,       const mesh = new THREE.Mesh(geometry, material); mesh.scale.x = 0.1; mesh.scale.y = 0.1; mesh.scale.z = 0.1; scene.add(mesh); //  ,       const frontSpot = new THREE.SpotLight(0xeeeece); const frontSpot2 = new THREE.SpotLight(0xddddce); frontSpot.position.set(1000, 1000, 1000); frontSpot2.position.set(-500, -500, -500); scene.add(frontSpot); scene.add(frontSpot2); //   ,           const animate = function () { requestAnimationFrame(animate); mesh.rotation.x += 0.005; mesh.rotation.y += 0.005; mesh.rotation.z += 0.005; renderer.render(scene, camera); }; //    animate();</span></span></code> </pre> <br><h3>  Preciso usar uma estrutura? </h3><br>  Finalmente, √© hora de discutir se o Three.js deve ser usado com sua estrutura favorita?  No momento, h√° um bom pacote react <i>-three-fiber</i> para o React.  Para usu√°rios do React, h√° vantagens √≥bvias em usar um pacote como este - voc√™ mant√©m uma estrutura para trabalhar com componentes que permite reutilizar o c√≥digo. <br><br>  Para iniciantes, aconselho voc√™ a come√ßar com o <i>Vanila JS</i> usual, porque a maioria dos materiais on-line escritos sobre o Three.js se relacionam ao Three.js no Vanila JS.  Com base na minha experi√™ncia de aprendizado, isso pode ser confuso e dif√≠cil de aprender por meio de um pacote - por exemplo, voc√™ ter√° que converter objetos e m√©todos Three.js. em componentes e acess√≥rios.  (assim que voc√™ aprender o Three.js, poder√° usar qualquer pacote). <br><br><h3>  Como adicionar o Three.js √† estrutura </h3><br>  O Three.js fornece um objeto HTML (geralmente chamado <i>renderer.domElement</i> ) que pode ser adicionado a qualquer objeto HTML no seu aplicativo.  Por exemplo, se voc√™ tem uma <i>div</i> com <i>id = ‚Äùthreejs‚Äù,</i> pode simplesmente incluir o seguinte c√≥digo no seu c√≥digo Three.js. <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'threejs'</span></span>).appendChild(renderer.domElement);</code> </pre> <br>  Algumas estruturas t√™m caminhos preferenciais para acessar os n√≥s DOM da √°rvore.  Por exemplo, <i>ref</i> em React, <i>$ ref</i> em Vue ou <i>ngRef</i> em Angular e parece uma enorme vantagem no contexto do acesso direto aos elementos DOM.  Como exemplo, vejamos uma implementa√ß√£o r√°pida do React. <br><br><h3>  Estrat√©gia para reagir </h3><br>  Se voc√™ usa o React, existe uma maneira de incorporar os arquivos Three.js. em um de seus componentes.  No arquivo <i>ThreeEntryPoint.js</i> , escreveremos o seguinte c√≥digo: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ThreeEntryPoint</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">sceneRef</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> renderer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> THREE.WebGLRenderer(); <span class="hljs-comment"><span class="hljs-comment">// ... sceneRef.appendChild(renderer.domElement); }</span></span></code> </pre><br>  Exportamos isso como uma fun√ß√£o que recebe um argumento: uma refer√™ncia a um elemento em nosso componente.  Agora podemos criar nosso componente <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ThreeEntryPoint <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./threejs/ThreeEntryPoint'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ThreeContainer</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ componentDidMount() { ThreeEntryPoint(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scene); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;&gt; &lt;div ref={element =&gt; this.scene = element} /&gt; &lt;/&gt; ); } }</code> </pre> <br>  A fun√ß√£o <i>ThreeEntryPoint</i> importada <i>deve</i> ser chamada no m√©todo <i>componentDidMount</i> e passar a nova <i>div</i> como argumento usando refer√™ncias <br>  Como exemplo dessa abordagem em a√ß√£o, voc√™ pode clonar o reposit√≥rio e tentar voc√™ mesmo: <a href="https://github.com/BretCameron/three-js-sample">https://github.com/BretCameron/three-js-sample</a> . <br><br><h2>  Conclus√£o </h2><br>  Ainda posso falar muito sobre o Three.js, mas espero que este artigo tenha lhe dado informa√ß√µes suficientes para come√ßar a usar essa poderosa tecnologia.  Quando comecei a aprender o Three.js, n√£o consegui encontrar um √∫nico recurso como este artigo, por isso espero ter ajudado a tornar essa tecnologia mais acess√≠vel para iniciantes. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt477956/">https://habr.com/ru/post/pt477956/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt477938/index.html">O mercado de servidores usados ‚Äã‚Äãna R√∫ssia: tudo come√ßou com a Habr</a></li>
<li><a href="../pt477940/index.html">ORM de benchmarking usado ao criar aplicativos Android</a></li>
<li><a href="../pt477946/index.html">‚ÄúCubra suas trilhas e saia para o fim de semana‚Äù: como se retirar dos servi√ßos mais populares</a></li>
<li><a href="../pt477950/index.html">A primeira regra do antifraude √© n√£o contar a ningu√©m sobre antifraude</a></li>
<li><a href="../pt477954/index.html">Como as postagens de resposta tornar√£o a Internet mais inteligente</a></li>
<li><a href="../pt477958/index.html">As 10 principais tend√™ncias do novo relat√≥rio de tend√™ncias de crimes de alta tecnologia e tecnologia 2019/2020 Group-IB</a></li>
<li><a href="../pt477964/index.html">Dois meses desde a ideia at√© a primeira venda: experi√™ncia em equipe Genesis</a></li>
<li><a href="../pt477966/index.html">HolyJS 2019 Moscow atrav√©s dos olhos do participante</a></li>
<li><a href="../pt477968/index.html">Cair em uma toca de coelho: uma hist√≥ria sobre um erro de reinicializa√ß√£o de um verniz - Parte 1</a></li>
<li><a href="../pt477974/index.html">Vivado: modo Picasso</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>