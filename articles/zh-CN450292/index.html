<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💏 🕯️ 💞 节点12的新增功能 📏 ☠️ 🤾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="最近，Node 12的代号为Erbium ，其长期支持（LTS）将从2019年10月持续到2022年4月。 


 新版本具有许多优点，并改善了运行时。 此外，考虑到在V8的支持下，该节点还将获得所有引擎改进。 


 import/export支持 


 该节点在进入ECMAScript模块的过...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>节点12的新增功能</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450292/"><p>最近<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">，Node 12的</a>代号为<code>Erbium</code> ，其长期支持（LTS）将从2019年10月持续到2022年4月。 </p><br><p> 新版本具有<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">许多优点，</a>并改善了运行时。 此外，考虑到在V8的支持下，该节点还将获得所有引擎改进。 </p><br><img src="https://habrastorage.org/webt/vp/xy/rg/vpxyrgt8cudhdd1ko70titoavby.png"><br><a name="habracut"></a><br><h2>  <code>import/export</code>支持 </h2><br><p> 该节点在进入<a href="">ECMAScript模块的过程中</a>进入<a href="">阶段3</a> 。 最初，此功能仅可通过<code>--experimental-modules</code>标志使用。 计划在Node切换到LTS时，不再需要使用此标志。 </p><br><p> 自从ES6标准化以来，在使用js开发人员的模块时，使用<code>import/export</code>的语法<code>import/export</code>变得更加可取了，而Node背后的团队则在本地支持方面勤奋工作。 从阶段0开始，此功能在Node 8.0中已通过实验提供。 当前版本是朝这个方向迈出的一大步。 大多数流行的浏览器已经通过<code>&lt;script type="module"&gt;</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">支持此功能</a> 。 </p><br><p> 从第3阶段开始，将支持ES模型中的三种<code>import</code>选项： </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    import module from 'module' //   import { namedExport } from 'module' //     import * as module from 'module'</span></span></code> </pre> <br><p>  Vanilla模块只能以默认方式导出： </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">module</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'cjs-library'</span></span></code> </pre><br><p> 您可以使用<code>import()</code>在运行时加载。  <code>import()</code>返回<code>Promise</code>并与ES模型和CommonJS库一起使用。 </p><br><h2>  V8 </h2><br><p> 节点12最初将在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V8 7.4</a>上运行，并将最终升级到7.6。  V8团队同意提供ABI（应用程序二进制接口）。  V8 7.4中的显着改进是可提高性能，以更快地执行JavaScript，更好的内存管理和增强的ECMAScript语法支持。 </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">异步堆栈跟踪</a> 。 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">参数数量不匹配时可以更快地调用</a> 。 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">加速解析</a> 。 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>   await</code></a> 。 </li></ul><br><h3> 异步堆栈跟踪 </h3><br><p> 让我们看一下这段代码： </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testAsyncStacktrace</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> killme(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">killme</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve(); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'#Feelsbadman'</span></span>); } testAsyncStacktrace().catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(error.stack));</code> </pre><br><p> 在较旧的版本上，您将获得以下内容： </p><br><pre> <code class="plaintext hljs">Error: #Feelsbadman at killme (test.js:8:11) at process._tickCallback (internal/process/next_tick.js:68:7) at Function.Module.runMain (internal/modules/cjs/loader.js:721:11) at startup (internal/bootstrap/node.js:228:19) at bootstrapNodeJSCore (internal/bootstrap/node.js:576:3)</code> </pre> <br><p> 如您所见，该消息在<code>testAsyncStacktrace</code>都没有提及<code>testAsyncStacktrace</code> 。 现在默认情况下启用了<code>--async-stack-traces</code>标志，日志将如下所示： </p><br><pre> <code class="plaintext hljs">Error: #Feelsbadman at killme (test.js:8:11) at async testAsyncStacktrace (test.js:2:5)</code> </pre><br><h3> 参数数量不匹配时的加速调用 </h3><br><p> 在JavaScript中，调用带有更少/更多参数（即传递更少或更多声明的形式参数）的函数是完全可以接受的。 第一种情况是<em>申请不足</em> ，第二种情况是<em>申请过度</em> 。 在参数数量不足的情况下，参数将是<code>undefined</code> ，而在参数数量众多的情况下，它们将被忽略。 </p><br><p> 但是，JavaScript函数仍然可以使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>arguments</code></a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">rest参数</a>对象，甚至在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">草率模式的</a>函数中使用非标准化的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Function.prototype.arguments</a>来获取实际参数。 因此，JavaScript引擎应提供一种获取实际参数的方法。 在V8中，这是使用<em>参数自适应技术完成的</em> 。 不幸的是，这样的方法会影响性能。 </p><br><p> 在某些情况下，V8完全跳过了<em>参数调整</em> ，从而将调用开销减少了多达60％。 </p><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/dd9/147/93d/dd914793da2287196d03f9177e24ba1e.png" width="577" height="280"></a> <br><p> 详细信息可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文档中</a>找到。 </p><br><h3> 加速解析 </h3><br><p> 在Chrome浏览器中，加载过程中会在工作线程中解析足够大的脚本。  V8 7.4解决了UTF-8解码性能的问题，该问题导致8％的加速。 </p><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/cf0/ef2/fb3/cf0ef2fb3f971f89e41d6e83217ad7f3.jpg" width="625" height="143"></a> <br><p> 图中的每一滴代表流分析器中性能的改进之一。 </p><br><h3> 改善<code>await</code> </h3><br><p> 现在默认情况下与<code>--async-stack-traces</code>标志一起使用<code>--async-stack-traces</code> <code>--harmony-await-optimization</code>标志。 详细信息<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在这里</a> 。 </p><br><h2> 私人班级领域 </h2><br><p>  V8中使用私有字段的功能已迁移到该节点。 此类字段在课程外不可用。 要创建这些，您需要在变量前指定<code>#</code> 。 </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloThere</span></span></span><span class="hljs-class"> </span></span>{ #hidden = <span class="hljs-string"><span class="hljs-string">'Hidden'</span></span>; get hidden() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.#hidden; } set hidden(txt) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.#hidden = txt; } hi() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.#hidden}</span></span></span><span class="hljs-string">`</span></span>); } }</code> </pre><br><p> 当您尝试从外部访问<code>#hidden</code> ，会遇到语法错误。 </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> hello = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HelloThere(); hello.#hidden = <span class="hljs-string"><span class="hljs-string">'Visible'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// -&gt; SyntaxError console.log(hello.#hidden); // -&gt; SyntaxError</span></span></code> </pre><br><h2> 快速上手 </h2><br><p> 节点12将在构建并嵌入为二进制文件之前将缓存用于内置库。 由于在主线程中使用了此缓存，因此启动时间将减少30％。 </p><br><h2>  TLS和安全性 </h2><br><p>  Noda现在支持TLS 1.3，它提供了增强的安全性并减少了延迟。  TLS 1.3极大地改变了协议，并正在积极地集成到网络中。  TLS 1.3的引入将提高用户数据的机密性，并通过减少HTTPS中的握手时间来加快请求处理。 此外，默认情况下禁用TLS 1.0和1.1，并且已从<code>crypto</code>中删除了不赞成使用的方法。 </p><br><h2> 动态臀部尺寸 </h2><br><p> 以前，使用的默认V8堆大小为700MB（32位系统）或1400MB（64位系统）。 现在，该节点将根据可用内存确定堆大小，以优化计算机的已用资源。 </p><br><h2> 甩臀部的能力 </h2><br><p> 节点12提供了转储堆的功能，使检测内存问题更加容易。 详细信息可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这里</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这里</a>找到。 </p><br><h2> 实验诊断报告 </h2><br><p>  Noda提供了更强大的工具来诊断应用程序内部的问题（性能，CPU使用率，内存，崩溃等），并提供了实验性的报告功能。 </p><br><h2> 使用本机模块时的改进 </h2><br><p> 节点12延续了简化<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">N-API</a>工作的趋势。 此版本改进了支持，尤其是在使用工作线程时。 </p><br><h2> 结论 </h2><br><p> 节点12有很多改进。 完整的CHANGELOG可以在<a href="">Github</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">网站</a>上查看。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN450292/">https://habr.com/ru/post/zh-CN450292/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN450274/index.html">现在，Visual Studio中的IntelliSense for C ++可基于代码中的示例运行</a></li>
<li><a href="../zh-CN450278/index.html">最小的有线电视网络。 第5部分：同轴配电网</a></li>
<li><a href="../zh-CN450282/index.html">Web应用程序如何工作</a></li>
<li><a href="../zh-CN450288/index.html">UML＆Enterprise Architect：设计用于创建自动化系统的目标流程</a></li>
<li><a href="../zh-CN450290/index.html">好，坏，邪恶-在初学者项目中进行测试</a></li>
<li><a href="../zh-CN450294/index.html">最可怕的毒药</a></li>
<li><a href="../zh-CN450298/index.html">量子未来（续）</a></li>
<li><a href="../zh-CN450300/index.html">不再争论函数式编程和OOP</a></li>
<li><a href="../zh-CN450302/index.html">业余无线电技术：在中国工厂制造原型电路板</a></li>
<li><a href="../zh-CN450304/index.html">Carapuzik坐着一只蚂蚁：1亿年的嗜酸粒细胞增多症</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>