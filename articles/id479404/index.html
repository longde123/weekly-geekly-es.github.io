<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘¨ğŸ½ ğŸ› ğŸ‘ğŸ¿ Staf untuk Santa Claus ğŸ––ğŸ¼ ğŸ‘ğŸ¿ ğŸ‘©ğŸ¾â€âœˆï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Setiap tahun pada tanggal 31 Desember, saya, dalam kostum Santa Claus, dan istri saya, dalam peran Snow Maiden, berkeliling kota ke teman-teman saya d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Staf untuk Santa Claus</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479404/"><img src="https://habrastorage.org/webt/_m/qk/q9/_mqkq91grdlhtsaiv0-utvh-2r4.jpeg"><br><br>  Setiap tahun pada tanggal 31 Desember, saya, dalam kostum Santa Claus, dan istri saya, dalam peran Snow Maiden, berkeliling kota ke teman-teman saya dengan selamat.  Karena Tahun Baru akan segera tiba, saya memutuskan untuk memeriksa apakah saya sudah menyiapkan semuanya untuknya dan mengeluarkan staf saya yang sudah usang dari lantai dasar.  Yang mengejutkan saya, setelah berbaring di ruang bawah tanah selama setahun, dia bekerja dengan baik bahkan sekarang!  Baterai-nya entah bagaimana masih terisi!  Stafnya tidak terlalu cerah, tetapi bersinar.  Tentu saja, saya harus mengisi ulang, dan saya menyaksikan satu LED berhenti berfungsi, tetapi ini dapat diperbaiki - kami akan memperbaikinya. <br><br>  Saya membuat staf ini kembali pada tahun 2012, dan sejak itu telah melayani saya dengan setia.  Masalahnya cukup sederhana, tetapi sangat efektif, terutama anak-anak bersukacita karenanya.  Dia hampir seperti pedang Jedi - hanya tongkat, dan untuk Santa Claus yang sebenarnya - ini adalah hal yang perlu.  Saya memutuskan untuk menulis tentang dia di sini di HabrÃ© - tiba-tiba seseorang akan terinspirasi oleh ide dan membuat ini untuk dirinya sendiri pada Tahun Baru, masih ada waktu. <br><a name="habracut"></a><br>  Untuk membuat staf Anda perlu: <br><br><ul><li>  sepotong pipa air plastik 1,3 meter; </li><li>  perekat diri mengkilap kecil untuk dekorasi; </li><li>  sepotong kabel jaringan UTP-5 atau kabel lain yang cocok; </li><li>  LED biru, setidaknya 24 buah; </li><li>  baterai </li><li>  tombol daya; </li><li>  mikrokontroler kecil atau papan FPGA yang memiliki sesuatu yang dapat Anda program; </li><li>  bola-pohon Natal mainan besar yang dapat dibagi dua sehingga papan dan baterai dapat disembunyikan di dalamnya. </li></ul><br>  Bagian yang diperlukan terlihat di foto ini: <br><br><img src="https://habrastorage.org/webt/wi/8f/zd/wi8fzdau34zglx89jlc59vd7js8.jpeg"><br><br>  Perangkat staf sangat sederhana.  Tidak ada yang khusus untuk ditulis.  Kami mengambil pipa air plastik putih dan mengebor beberapa lubang pada jarak yang sama 200 mm.  Saya mendapat 6 lubang. <br><br>  Kami melarutkan kabel UTP-5 menjadi beberapa pasangan bengkok.  Dibutuhkan enam pasang kabel.  Kami meluncurkan mereka ke dalam lubang dan output melalui salah satu ujung pipa, ke tempat bola ajaib staf akan berada.  Di mana pasangan kabel masuk ke lubang-lubang pipa, kami membersihkannya dan membungkus pipa dengan erat pada jarak tertentu dari satu sama lain.  Kami menyolder.  Untuk "bus" yang dihasilkan dalam lingkaran solder staf secara paralel 4 LED biru: <br><br><img src="https://habrastorage.org/webt/l1/je/dl/l1jedl9jftto90xq6rkkl-k22pm.jpeg"><br><br>  Di bagian atas pipa, Anda perlu mengebor lubang yang lebih besar dan menempelkan tombol daya papan kontrol di sana: <br><br><img src="https://habrastorage.org/webt/3u/73/b1/3u73b1fpnh8xlup4lq1l-hrzej4.jpeg"><br><br>  Saya memiliki syal rover Mars sebagai papan kontrol.  Ini adalah FPGA dari Altera MAX II, dan karena papan itu awalnya dimaksudkan untuk menghubungkan mesin mainan berdaya rendah, output chip di papan digabungkan dalam 10 buah untuk memberikan lebih banyak arus.  Hanya ada 6 output gabungan seperti itu di papan - ini adalah "sinyal" dari papan f0, f1, f2, f3, f4, f5.  Jadi saya bisa langsung menyalakan LED dari kesimpulan ini tanpa takut membakar output FPGA.  Juga di papan itu sendiri ada 8 LED kuning - mereka juga bisa dinyalakan.  Jika bola di atas staf tembus, maka ini juga akan menambah efek visual. <br><br>  Jika Anda menggunakan Arduino, misalnya, dalam sebuah staf, Anda mungkin harus menyolder selendang kecil dengan kunci transistor untuk mengontrol banyak LED, karena lebih baik tidak mengambil lebih dari 10-15mA dari satu pin mikrokontroler, tetapi kami membutuhkan lebih banyak untuk LED. <br><br>  Papan perlu di-flash dengan program kontrol.  Idenya adalah bahwa ketika Anda menekan tombol pada staf, papan menyala dan segera mulai menyalakan lampu pada staf.  Lalu siapa yang punya fantasi apa.  Pertama-tama saya menyalakan semua LED dari baris pertama hingga keenam, dan kemudian saya mematikan belokan dari keenam ke yang pertama. <br><br>  Kode HDL Verilog mungkin akan menjelaskan lebih baik apa yang saya maksud: <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">module</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">effect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( input wire clk, input wire mclk, output wire [</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">:</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">]leds, output wire f0, output wire f1, output wire f2, output wire f3, output wire f4, output wire f5 )</span></span></span></span>; reg [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>]cnt; reg [<span class="hljs-number"><span class="hljs-number">5</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>]bits; initial begin bits= <span class="hljs-number"><span class="hljs-number">6'</span></span>h00; cnt = <span class="hljs-number"><span class="hljs-number">4'</span></span>h0; end always @(posedge clk) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cnt==<span class="hljs-number"><span class="hljs-number">11</span></span>) cnt&lt;=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> cnt &lt;= cnt + <span class="hljs-number"><span class="hljs-number">1'b</span></span>1; always @* <span class="hljs-function"><span class="hljs-function">begin </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">case</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cnt)</span></span></span><span class="hljs-function"> 4'h0: bits </span></span>= <span class="hljs-number"><span class="hljs-number">6'b</span></span>000001; <span class="hljs-number"><span class="hljs-number">4'</span></span>h1: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000011; <span class="hljs-number"><span class="hljs-number">4'</span></span>h2: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h3: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>001111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h4: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>011111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h5: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>111111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h6: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>011111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h7: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>001111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h8: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000111; <span class="hljs-number"><span class="hljs-number">4'</span></span>h9: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000011; <span class="hljs-number"><span class="hljs-number">4'</span></span>ha: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000001; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: bits = <span class="hljs-number"><span class="hljs-number">6'b</span></span>000000; endcase end assign f0 = bits[<span class="hljs-number"><span class="hljs-number">0</span></span>] &amp; mclk; assign f1 = bits[<span class="hljs-number"><span class="hljs-number">1</span></span>] &amp; mclk; assign f2 = bits[<span class="hljs-number"><span class="hljs-number">2</span></span>] &amp; mclk; assign f3 = bits[<span class="hljs-number"><span class="hljs-number">3</span></span>] &amp; mclk; assign f4 = bits[<span class="hljs-number"><span class="hljs-number">4</span></span>] &amp; mclk; assign f5 = bits[<span class="hljs-number"><span class="hljs-number">5</span></span>] &amp; mclk; assign leds = {bits[<span class="hljs-number"><span class="hljs-number">5</span></span>],bits[<span class="hljs-number"><span class="hljs-number">5</span></span>],bits[<span class="hljs-number"><span class="hljs-number">4</span></span>],bits[<span class="hljs-number"><span class="hljs-number">3</span></span>],bits[<span class="hljs-number"><span class="hljs-number">2</span></span>],bits[<span class="hljs-number"><span class="hljs-number">1</span></span>],bits[<span class="hljs-number"><span class="hljs-number">0</span></span>],bits[<span class="hljs-number"><span class="hljs-number">0</span></span>]}; endmodule</code> </pre> <br>  Ini bukan modul tingkat atas, ini adalah modul effect.v. Dari modul atas, dua frekuensi clock clk ~ 40Hz diumpankan di sini - frekuensi ini menentukan kecepatan efek dan frekuensi kedua mclk ~ 320Hz, delapan kali lebih tinggi.  Sinyal mclk juga memodulasi output lagi, sehingga tidak selalu dinyalakan, sehingga LED tidak bersinar begitu terang dan chip tidak memanas. <br><br>  Saya tidak tahu apakah saya perlu menghafal artikel ini.  Tetapi untuk berjaga-jaga, saya akan menulis bahwa kode Verilog di atas dapat sepenuhnya disimulasikan menggunakan testbench ini: <br><br><pre> <code class="cpp hljs">`timescale <span class="hljs-number"><span class="hljs-number">1</span></span>ms / <span class="hljs-number"><span class="hljs-number">1u</span></span>s <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> tb; reg clock = <span class="hljs-number"><span class="hljs-number">1'b</span></span>0; always #<span class="hljs-number"><span class="hljs-number">10</span></span> clock = ~clock; reg [<span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>]counter=<span class="hljs-number"><span class="hljs-number">0</span></span>; always @(posedge clock) counter &lt;= counter+<span class="hljs-number"><span class="hljs-number">1</span></span>; wire [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>]wleds; wire wf0,wf1,wf2,wf3,wf4,wf5; <span class="hljs-function"><span class="hljs-function">effect </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inst</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( .clk( counter[</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">] ), .mclk( clock ), .leds( wleds ), .f0( wf0 ), .f1( wf1 ), .f2( wf2 ), .f3( wf3 ), .f4( wf4 ), .f5( wf5 ) )</span></span></span></span>; initial begin $dumpfile(<span class="hljs-string"><span class="hljs-string">"out.vcd"</span></span>); $dumpvars(<span class="hljs-number"><span class="hljs-number">0</span></span>,tb); #<span class="hljs-number"><span class="hljs-number">10000</span></span>; $finish(); end endmodule</code> </pre><br>  Bagaimana tepatnya simulasi proyek dapat dibaca, misalnya di <a href="https://marsohod.org/11-blog/113-icarus" rel="nofollow">sini</a> . <br><br>  Nah, menurut hasil simulasi, Anda bisa mendapatkan diagram timing sinyal ini: <br><br><img src="https://habrastorage.org/webt/fr/y-/sz/fry-szzviv-w_nhslins4ops3be.png"><br><br>  Jika Anda berencana untuk melakukan proyek ini pada Arduin - ini juga mungkin.  Saya benar-benar bukan ahli Arduina yang besar, tetapi menurut saya kode tersebut mungkin terlihat seperti ini: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> start_pin = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> end_pin = <span class="hljs-number"><span class="hljs-number">8</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = start_pin; i&lt; end_pin; i++ ) pinMode(i, OUTPUT); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = start_pin; i&lt; end_pin; i++ ) { digitalWrite(i, HIGH); delay(<span class="hljs-number"><span class="hljs-number">250</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = start_pin; i&lt; end_pin; i++ ) { digitalWrite(i, LOW); delay(<span class="hljs-number"><span class="hljs-number">250</span></span>); } }</code> </pre><br>  Hasilnya harus seperti ini: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/UjECakae2AY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Terlepas dari kenyataan bahwa proyek secara keseluruhan sangat sederhana, para penonton dan orang yang lewat pada tanggal 31 Desember selalu senang.  Terutama ketika Anda keluar dari mobil dengan setelan Santa Claus di jalan bersalju, Anda pergi ke pejalan kaki santai dan menerangi jalan dengan staf dan menyajikan bebek mandarin. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id479404/">https://habr.com/ru/post/id479404/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id479392/index.html">Pinebook Pro: Tidak lagi Chromebook</a></li>
<li><a href="../id479394/index.html">Bagaimana saya mencari helpdesk di antara 15 solusi dan ... tidak menemukan</a></li>
<li><a href="../id479398/index.html">Kami membawa persamaan regresi linier ke dalam bentuk matriks</a></li>
<li><a href="../id479400/index.html">Cara membuat jurnalis dari jaringan saraf, atau â€œRahasia mengurangi teks di HabrÃ© tanpa sepatah kata pun</a></li>
<li><a href="../id479402/index.html">Bagaimana cara resmi membayar layanan freelancer di luar negeri, membayar pajak 0% dan tidak memberi makan sistem pembayaran</a></li>
<li><a href="../id479406/index.html">16 kiat pengembangan untuk Android di Kotlin. Bagian 1</a></li>
<li><a href="../id479414/index.html">Cara menemukan tujuannya. Peran peluang</a></li>
<li><a href="../id479416/index.html">Lihat ke mana Anda pergi (penglihatan tepi vs muatan kognitif)</a></li>
<li><a href="../id479420/index.html">Buka mikrofon: backend. Registrasi Tamu</a></li>
<li><a href="../id479422/index.html">[Video animasi] Dunia kabel: bagaimana dalam 35 tahun jaringan kabel laut menyelimuti dunia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>