<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📔 🦕 👊 La recette d'une revue de code utile du développeur de Yandex 🛀🏿 🚵🏾 🕒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salut Je m'appelle Sergey, je travaille chez Yandex depuis cinq ans. Pendant ce temps, il a participé au développement de onze projets. Il a écrit du ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La recette d'une revue de code utile du développeur de Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/422143/"><p><img width="800" src="https://habrastorage.org/webt/zs/ru/8w/zsru8wp1w5kg8fjzw9fhtyw0vi4.jpeg"><br><br>  Salut  Je m'appelle Sergey, je travaille chez Yandex depuis cinq ans.  Pendant ce temps, il a participé au développement de onze projets.  Il a écrit du code en JavaScript, Python et C ++.  Il a réalisé certains projets seul, d'autres développés en groupe de huit personnes.  Mais dans chaque équipe, sur tous les projets, quel que soit le langage de programmation, j'ai utilisé une revue de code. </p><br><p>  Avec l'aide d'une révision de code, j'apprends constamment quelque chose de nouveau.  Parfois, en regardant le code de quelqu'un d'autre, je veux m'exclamer: "Mais quoi, est-ce aussi possible?".  Dans le code de quelqu'un d'autre, je trouve des astuces intéressantes et je les mets en service.  Je tire beaucoup de nouvelles connaissances des commentaires sur mon code.  Ce fut une découverte pour moi que les gens aiment partager leurs expériences.  Même lorsque je développe le projet seul, je demande aux gars de l'autre équipe de voir mes pull-quests.  Cela motive à écrire du code beau et clair. </p><br><p>  Mais cela n'a pas toujours été le cas.  Une fois, un examen était une punition pour moi.  J'ai pu écrire du code avec inspiration pendant une semaine, en y mettant toutes mes forces.  J'ai envoyé une demande de rétractation, j'ai envoyé trois fois un signal au réviseur et, en retour, j'ai reçu un commentaire sec comme «ok» ou, pire encore, des dizaines de commentaires qui n'étaient pas sur le fond. </p><br><p>  Des pools de cinq mille lignes sont venus à mon examen.  J'ai passé des heures à essayer de comprendre le code, à faire défiler une centaine de fois de fonction en test et vice versa.  Il a écrit des dizaines de commentaires inutiles sur le point-virgule manquant.  Tout cela m'a énervé terriblement.  Souvent, je reportais l'examen pour plus tard, et j'accumulais des dizaines de pools non révisés. </p><br><p>  Si vous avez ressenti cela, l'article est pour vous.  Aujourd'hui, je vais parler des techniques et des outils que j'utilise tous les jours pendant cinq ans de révision quotidienne du code. </p><a name="habracut"></a><br><h2 id="do-revyu-sovety-avtoru">  "Avant l'examen."  Conseils pour l'auteur </h2><br><p>  Imaginez que la solution au problème soit la cuisine.  Vous travaillez en équipe, vous devez donc non seulement cuisiner, mais aussi enseigner à d'autres chefs.  Il ne suffit pas de leur montrer le résultat, il faut noter la recette. </p><br><h3 id="kommity">  S'engage </h3><br><p> Chaque étape de la recette est un engagement: ils ont cassé deux œufs - les ont faits, ont ajouté un verre de lait - les ont faits, ont versé deux cents grammes de farine - les ont faits encore. </p><br><p>  Dans chaque commit, j'exprime une pensée simple.  Il peut s'agir d'une implémentation d'une méthode de modèle ou de composants dans une présentation.  Il sera donc plus facile pour le critique de me comprendre.  Je ne blâme pas l'ensemble de la tâche, qui ne peut pas être avalée à la fois, mais parle de la solution pièce par pièce. </p><br><p>  Je supprime toute refactorisation dans un commit séparé.  Souvent, le refactoring est de nature purement technique, par exemple, renommer une méthode.  Le réviseur n'a pas besoin de lire chaque ligne d'un tel changement.  Il courra les yeux «en diagonale» et pourra consacrer plus de temps au code le plus important. </p><br><p>  Émiettez, écrasez, coupez votre code en petits commits.  Cela permettra au réviseur de mieux comprendre votre code.  Ce n'est pas grave si vous allez trop loin avec la décomposition.  Deux commits sont faciles à combiner en un seul.  Il est beaucoup plus difficile de diviser un gros commit en plusieurs petits.  Les "légumes en tranches" s'obtiennent facilement en mélangeant "tomates hachées" et "oignons hachés".  Mais pour obtenir tous les ingrédients dans des portions d'une assiette de salade, vous devez passer beaucoup plus de temps. </p><br><p>  Après la validation, j'appuie immédiatement les modifications dans le github.  Cela m'a aidé à quelques reprises lorsqu'il y avait des "problèmes de café" avec un ordinateur portable. </p><br><h3 id="opisanie-kommitov">  Description des commits </h3><br><p>  Lorsque j'écris un e-mail, je remplis l'en-tête et le contenu de la lettre.  Le titre est un nom court et volumineux, le corps de la lettre est une description détaillée et détaillée avec des images et des liens.  J'applique la même approche à la description des commits. </p><br><p>      <code>git commit -m 'fix1'</code>.     <code>git commit</code>,    .          (   ).       (  ).</p><br>
<p>  ,   "  "  "  ".    ,            .        .   ASCII-   .    ,         ,       .</p><br>
<p><a href=""><img src="https://habrastorage.org/webt/6m/w8/hd/6mw8hdrkwls5hw-cz0gcf9eqjok.png"></a></p><br>
<p><i>(     ASCII-)</i></p><br>
<p><a href=""><img src="https://habrastorage.org/webt/cl/wo/rb/clworbxir1bhyron6jogldslkfi.png"></a></p><br>
<p><i>(      .        vim)</i></p><br>
<p><a href=""><img src="https://habrastorage.org/webt/n7/fr/bz/n7frbzv1aibwuq-jpqksnnusk50.png"></a></p><br>
<p><i>(      GitHub.          )</i></p><br>
<h3 id="samoproverka"></h3><br>
<p>     ,    ,  .      :</p><br>
<pre><code class="bash">git status
git diff comments.js
git add comments.js</code></pre><br>
<p>    ,   .    <code>git add .</code>,      .     ,      .</p><br>
<h3 id="proverka-kodstayla"> </h3><br>
<p>     .  ,       .  JavaScript   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ESlint</a>.      R2-D2  " ",         . ,      ,  .</p><br>
<p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WebStorm</a>    " ".      ,    ,       .        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">husky</a>.</p><br>
<p>    .            .        .</p><br>
<p><a href=""><img src="https://habrastorage.org/webt/in/dd/gm/inddgm1eizvrepn2g7hz4r-_iee.png"></a></p><br>
<p><i>(    )</i></p><br>
<h3 id="opisanie-pulrekvesta"> </h3><br>
<p>  –   ,   –   .     ,      .      <code>git log --pretty='%h: %B' --first-parent --no-merges --reverse</code>.</p><br>
<p><a href=""><img src="https://habrastorage.org/webt/ou/i9/_q/oui9_qahmyfya-zno5rhcmgqjws.png"></a></p><br>
<p><i>(   `git log --pretty='%h: %B' --first-parent --no-merges --reverse`)</i></p><br>
<p><a href=""><img src="https://habrastorage.org/webt/qs/fu/ut/qsfuutijzhyr1bzg_r2s3l3boni.png"></a></p><br>
<p><i>(   ,      )</i></p><br>
<p>   ,     .   ,       .     .</p><br>
<p> !     ,    .</p><br>
<h2 id="vo-vremya-revyu-sovety-revyuveru">«  ».  </h2><br>
<p>            – ,     .</p><br>
<h3 id="revyu-arhitektury"> </h3><br>
<p>    ,       .   ,     ,    . ,     .    ,      " ".</p><br>
<p>     .        .         .</p><br>
<h3 id="zadacha-revyuvera--pokazat-alternativy">  –  </h3><br>
<p>        .  !     .     ,      .   ,   ,   .     ,     .</p><br>
<h3 id="edinyy-stil"> </h3><br>
<p>        .   ,     .       .</p><br>
<p>  .        :</p><br>
<pre><code>function sum(arr) {
  return arr.reduce(function (res, i) {
    return res + i;
  }, 0);
}

sum([1, 2, 3]); // 6</code></pre><br>
<p>    ,   :</p><br>
<pre><code>const sum = arr =&gt; arr.reduce((res, i) =&gt; res + i);</code></pre><br>
<p>   ,      .    ,     ,     .    ,      .  –   .</p><br>
<h3 id="offline">Offline</h3><br>
<p>,         .    ,               .    .</p><br>
<p>       offline-.     (,   :  ,    ),          .</p><br>
<p>   . -,    . -,     :          (   ). -,      ,      —       .</p><br>
<p> ,      .  offline-  .</p><br>
<h2 id="posle-revyu-sovety-avtoru">« ».  </h2><br>
<p>  ,       .   .     .</p><br>
<h3 id="dialog"></h3><br>
<p>    ,         .    ,     ,       ,   .   ,    :    ?      ?       ?    ,       .</p><br>
<p>       .          ,       .</p><br>
<p><a href=""><img src="https://habrastorage.org/webt/-h/gc/ky/-hgcky3y9sssgixjv8gagnbtvue.png"></a></p><br>
<p><i>(   :          )</i></p><br>
<p>    .      ,         .      ?           ' ,           .</p><br>
<h3 id="istoriya-kommitov"> </h3><br>
<p>     -.     .         ,      .       ,    ,       .</p><br>
<p>    <code>git rebase --interactive master</code>. ,      <code>FEATURE-1</code>,  <code>master</code> —    .      ,       ,       <code>pick</code>  <code>squash</code>.         .</p><br>
<p><a href=""><img src="https://habrastorage.org/webt/in/mc/zw/inmczwuipfsxu1fgil0i6niy_vm.png"></a></p><br>
<p><i>( ,        )</i></p><br>
<p>       <code>--force</code>.   ,           .  <code>git push origin FEATURE-1 --force</code>   ,       .    ,   .</p><br>
<p>         GitHub.       "Squash and merge".</p><br>
<p><a href=""><img src="https://habrastorage.org/webt/v4/0j/qh/v40jqhxsgpectz8cvismdwxmbpo.png"></a></p><br>
<p><i>(       GitHub)</i></p><br>
<p>       ,     .        <code>FEATURE-1</code>.    :</p><br>
<pre><code class="bash">git checkout master
git pull origin master
git branch -D FEATURE-1</code></pre><br>
<p><a href=""><img src="https://habrastorage.org/webt/_l/f0/_t/_lf0_tfrep8nf3wzb5gpjrgldgo.png"></a></p><br>
<p><i>(          .)</i></p><br>
<h2 id="zaklyuchenie"></h2><br>
<p> ,     ,   :</p><br>
<pre><code class="bash">#     
git checkout -b FEATURE-1

#  
git status
git diff src/controllers/v1/comments.js
git add src/controllers/v1/comments.js

#    
git commit
git push origin FEATURE-1

#    
git log --pretty='%h: %B' --first-parent --no-merges --reverse

#    
git rebase --interactive master
git push origin FEATURE-1 --force

#  
git checkout master
git pull origin master
git branch -D FEATURE-1</code></pre><br>
<h2 id="voprosy"></h2><br>
<div class="spoiler"><b class="spoiler_title"> ,       ,    ?</b><div class="spoiler_text"><p> :</p><br>
<pre><code class="bash">#  ,      
git add comment.js

#    
git commit --amend</code></pre><br>
<p>       ,    .   —        .   —   <code>git rebase --interactive master</code>,           <code>pick</code>  <code>squash</code>.</p><br>
<p><a href=""><img src="https://habrastorage.org/webt/0u/22/ho/0u22honb-ypvnt6c-l-ms3f4iv0.png"></a></p><br>
<p>     ,      <code>git rebase --interactive master</code>   <code>pick</code>  <code>edit</code>   ,     .</p></div></div><br>
<div class="spoiler"><b class="spoiler_title">     , ,  ,  ,     .
 ?</b><div class="spoiler_text"><p> ,       .   ,        .     .     <code>git add --patch test/comment-test.js</code></p><br>
<p><a href=""><img src="https://habrastorage.org/webt/-r/dl/cn/-rdlcn1oqd4qiq-_w_1rnofvysk.png"></a></p></div></div><br>
<div class="spoiler"><b class="spoiler_title">  ,       .    ,       .  ?</b><div class="spoiler_text"><p>   <code>git rebase --interactive master</code>      .        .     .     ,      <code>pick</code>,   <code>pick</code>  <code>squash</code>.</p></div></div><br>
<div class="spoiler"><b class="spoiler_title">    ?</b><div class="spoiler_text"><p>            .    issue,      .       .</p></div></div><br>
<div class="spoiler"><b class="spoiler_title">         ?</b><div class="spoiler_text"><p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Office Lens</a>.      , ,          .</p></div></div><br>
<div class="spoiler"><b class="spoiler_title">    ?</b><div class="spoiler_text"><p>     .  ,    .<br>
<a href=""><img src="https://habrastorage.org/webt/gi/n1/vk/gin1vky5zzewus2nxyhjam2gfr0.png"></a></p></div></div></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr422143/">https://habr.com/ru/post/fr422143/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr422131/index.html">Scoring RICE et ICE: Techniques simples de priorisation pour les chefs de produit avancés</a></li>
<li><a href="../fr422133/index.html">Installation d'une tour de commande et de contrôle automatique dans le nord du Colorado</a></li>
<li><a href="../fr422137/index.html">Foreshadow: un signe avant-coureur de problèmes?</a></li>
<li><a href="../fr422139/index.html">Version mobile de Habr. Version 3.0</a></li>
<li><a href="../fr422141/index.html">Déploiement et débogage à distance des applications de base dotnet sur * nix</a></li>
<li><a href="../fr422147/index.html">Relevez votre nœud Speedtest</a></li>
<li><a href="../fr422149/index.html">Comment est-ce - d'être un agent de bord</a></li>
<li><a href="../fr422151/index.html">Vérifications en ligne sur le réseau fédéral via RabbitMQ, 1C et magie noire</a></li>
<li><a href="../fr422155/index.html">Phrase secrète de l'auditeur</a></li>
<li><a href="../fr422157/index.html">CPE - modèle de paiement pour l'utilisateur impliqué dans le reciblage mobile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>