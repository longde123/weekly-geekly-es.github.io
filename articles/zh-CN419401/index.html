<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💞 🍤 🚂 Java命令行界面：picocli 🉑 🤽🏾 🕺🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="大家好！ 

 Java开发人员小组的下一个起点，我们所有人都将继续进行以下事实的实验：学习过程不必是连续的（“争议应该是连续的吗？”）。 也就是说，我们对程序进行了稍微的修改和改组，将其分为三个步骤，可以轻松地通过它们之间的一个中断。 总的来说，对学生和我们来说，这都是很有趣的，如果没有人潮湿，那...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Java命令行界面：picocli</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/419401/">大家好！ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Java开发人员小组</a>的下一个起点，我们所有人都将继续进行以下事实的实验：学习过程不必是连续的（“争议应该是连续的吗？”）。 也就是说，我们对程序进行了稍微的修改和改组，将其分为三个步骤，可以轻松地通过它们之间的一个中断。 总的来说，对学生和我们来说，这都是很有趣的，如果没有人潮湿，那么该程序甚至看起来会有些复杂，尽管在那之前并不容易。 好吧，一篇与我们的课程有关的传统有趣的文章。 <br><br> 走吧 <br><br><img src="https://habrastorage.org/webt/op/zt/xy/opztxye_lbi2eq1jlkb1i-yvuz4.png"><a name="habracut"></a><br><br> 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">官方网站上，</a> picocli被描述为“一个功能强大的小命令行界面”，“它是一个用于解析命令行参数并创建完美，易于定制的帮助程序消息的单文件Java框架。 有花。 这篇文章<a href="">简要概述了Picocli 0.9.7</a>及其在Java代码中解析命令行参数的用法。 <br><br> 像本系列中描述的其他Java命令行处理库一样， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">picocli是开源的</a> 。 由于所有picocli都在单个<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Java文件中实现</a> ，因此您可以根据需要轻松地直接直接使用源代码。  picocli网站强调：“ picocli的独特之处在于，它使用户可以运行使用picocli的应用程序，而无需picocli本身作为外部依赖项：所有源代码都位于一个文件中，以鼓励应用程序作者将其包含在程序源代码中”如果你喜欢使用picocli作为一个库，在Maven仓库有一个<a href="">JAR文件</a>与设置编译的.class文件（picocli代表一个Java的文件，但包含众多子类和注释  S）。 <br><br> 了解Picocli的单文件性质的最简单方法是查看文件本身。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Picocli</a>下载<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">页面</a>上提供了CommandLine.java的源代码。 以下两个屏幕快照显示了执行CommandLine类以及执行其内部注释之一和其内部类之一时<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">javap</a>的输出。 <br><br><img src="https://habrastorage.org/webt/ly/pz/rd/lypzrdilo683xyhgaldpf2iplng.png"><br><br><img src="https://habrastorage.org/webt/w8/sp/a6/w8spa6ghbqwnaxatgnmozur4ofk.png"><br><br> 无论我们是将CommandLine.java编译到我们自己的类/ JAR文件中，还是使用已经从Maven构建的JAR，使用Picocli的应用程序的源代码显然都是相同的。 使用Picocli解析参数的“确定”阶段是通过注释实例的字段来完成的，该实例的字段将存储与命令行参数关联的值。 这显示在下面的代码片段中。 <br><br>  <b>Picocli“定义”阶段</b> <br><pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/*     Java   picocli. */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Command</span></span>( name=<span class="hljs-string"><span class="hljs-string">"Main"</span></span>, description=<span class="hljs-string"><span class="hljs-string">"Demonstrating picocli"</span></span>, headerHeading=<span class="hljs-string"><span class="hljs-string">"Demonstration Usage:%n%n"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Option</span></span>(names={<span class="hljs-string"><span class="hljs-string">"-v"</span></span>, <span class="hljs-string"><span class="hljs-string">"--verbose"</span></span>}, description=<span class="hljs-string"><span class="hljs-string">"Verbose output?"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> verbose; <span class="hljs-meta"><span class="hljs-meta">@Option</span></span>(names={<span class="hljs-string"><span class="hljs-string">"-f"</span></span>, <span class="hljs-string"><span class="hljs-string">"--file"</span></span>}, description=<span class="hljs-string"><span class="hljs-string">"Path and name of file"</span></span>, required=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String fileName; <span class="hljs-meta"><span class="hljs-meta">@Option</span></span>(names={<span class="hljs-string"><span class="hljs-string">"-h"</span></span>, <span class="hljs-string"><span class="hljs-string">"--help"</span></span>}, description=<span class="hljs-string"><span class="hljs-string">"Display help/usage."</span></span>, help=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> help;</code> </pre> <br> 上面的代码示例演示了Picocli允许您指定多个标志名称（在我的示例中，单字符名称带有一个连字符，多字符名称带有两个连字符）。 此示例还显示可以为必需参数设置required = true，可以为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">辅助选项</a>指定help = true，例如打印用法详细信息和消除与缺少必需参数有关的错误。 请注意，Picocli 0.9.8为更特定的帮助程序消息类型<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">versionHelp</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">usageHelp</a>添加了附加支持。 <br><br>  Picocli中的“解析”阶段在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">CommandLine.populateCommand（T，String ...）中执行</a> ，其中T是带有Picocli注释字段的类的实例，其余行是需要分析的参数。 在下面的代码片段中显示了这一点。 <br>  <b>Picocli解析阶段</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Main main = CommandLine.populateCommand(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Main(), arguments);</code> </pre> <br>  Picocli中的“轮询”阶段包括仅访问在“解析”阶段传递给CommandLine.populateCommand（T，String ...）方法的实例的Picocli注释字段。 下面的清单中显示了这种“调查”的一个简单示例。 <br><br>  <b>Picocli调查阶段</b> <br><br><pre> <code class="java hljs">out.println( <span class="hljs-string"><span class="hljs-string">"The provided file path and name is "</span></span> + main.fileName + <span class="hljs-string"><span class="hljs-string">" and verbosity is set to "</span></span> + main.verbose);</code> </pre> <br> 在命令行上指定-h或--help时，向用户显示辅助消息或使用情况信息非常简单，就像“轮询”一个Picocli注释的字段，为该字段指定了help = true来确定是否设置了此布尔值是否安装，并调用重载的CommandLine.usage方法之一（如果已安装）。 我必须使用此方法的静态版本之一，如下面的清单所示。 <br><br>  <b>Picocli中的支持消息/使用信息</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (main.help) { CommandLine.usage(main, out, CommandLine.Help.Ansi.AUTO); }</code> </pre><br> 以下几个屏幕快照演示了一个使用picocli编写的简单应用程序。 第一个屏幕截图显示了错误消息的类型和堆栈跟踪（如果缺少所需的标志）。 第二张屏幕截图显示了如何使用注释中指定的长名和短名。 第三幅图显示了在操作中显示辅助消息的功能。 <br><br><img src="https://habrastorage.org/webt/us/sj/4d/ussj4dkuaajcytgltr_vkytopzk.png"><br><img src="https://habrastorage.org/webt/pm/qs/wd/pmqswdqvi8e9yeu3qmfdc0t7jl8.png"><br><img src="https://habrastorage.org/webt/gf/rb/uo/gfrbuozuswdqrb06-h9sth0f_b8.png"><br><br>  Picocli的其他功能之一是对<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">颜色语法</a> a的支持，这是许多其他Java命令行参数解析库中没有的功能。 这篇文章的第一个清单中的行在注释中用@ |定义。  |  @语法。 在上面的屏幕快照（演示了辅助消息的用法）中，这些字符按原样发送，而无需特殊处理。 但是，如果我在Cygwin中运行此示例代码，我将看到这些标志的作用。 <br><br><img src="https://habrastorage.org/webt/hl/d2/gm/hld2gm792xahxrehyp-g-uz8tlm.png"><br><br> 在上面的屏幕截图中，我们看到Picocli自动将颜色语法（黄色和白色）应用于辅助消息选项，还将粗体和带下划线的粗体语法应用于具有辅助消息描述的区域，其中使用了@ |语法  |  @。 <br><br> 以下是选择框架或库以帮助解析Java中的命令行参数时要考虑的其他Picocli功能。 <br><br><ul><li>  Picocli是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Apache 2.0许可的</a>开源项目<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">。</a> </li><li>  Picocli不需要下载第三方库或框架。 </li><li> 所有Picocli源代码都包含在一个.java文件中，并且可以将该代码复制并粘贴到其自己的配置管理系统中，并与其余应用程序代码一起编译，这意味着甚至Picocli JAR文件也不需要。 </li><li>  CommandLine.java源文件（Picocli 0.9.7）仅超过3,700行（包括空格和注释），重约200 KB。  picocli-0.9.7.jar文件重约83 KB。 </li><li>  Picocli及时且经常更新。 昨天发布了0.9.8版（在我撰写了这篇文章的大部分内容之后）。 </li><li>  Picocli具有<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">非常详细的文档</a> ，并且在许多方面都比其他Java命令行处理库的文档更新。 </li><li>  Picocli的颜色语法支持易于使用，并且在“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">支持的平台”</a>部分中记录了跨平台使用颜色语法的帮助。 </li><li> 对实例级字段使用Picocli注释与在其他某些命令行处理库中​​使用注释相似，并且具有相同的好处。 </li><li>  Picocli的主要功能非常方便且易于学习，但是Picocli还支持使用Picocli配置命令行处理的多个方面的功能。 </li></ul><br> 这篇文章中的清单在<a href="">GitHub上</a>完全可用。 <br><br>  Picocli是一个受支持的更新库，用于解析Java命令行参数。 它包含其他一些用Java编写的可用命令行处理库中​​的新功能和新方法，但已添加了几个不同的功能（例如颜色语法和封装在单个Java源文件中的整个库）。  Picocli易于使用且本身很吸引人，但如果该开发人员希望支持颜色语法或能够将源代码文件添加到开发人员项目中而无需其他JAR文件或已编译的文件，则它很可能会在其他库中脱颖而出。类文件。 <br><br> 结束 <br><br> 与往常一样，我们正在等待您的问题和评论。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN419401/">https://habr.com/ru/post/zh-CN419401/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN419391/index.html">力量，金钱和开源。 讲述社区如何与Apache Ignite合作</a></li>
<li><a href="../zh-CN419393/index.html">在ASP.NET Core中创建一个简单的API网关</a></li>
<li><a href="../zh-CN419395/index.html">Lambda表达式的说明</a></li>
<li><a href="../zh-CN419397/index.html">我们如何为六个国家/地区制作移动应用</a></li>
<li><a href="../zh-CN419399/index.html">OpenAI Five在一场表演赛Dota 2中击败了一群人</a></li>
<li><a href="../zh-CN419405/index.html">IPv6的情况如何，或阻碍过渡到该协议的新版本的原因-讨论情况</a></li>
<li><a href="../zh-CN419407/index.html">OpenAI和5x5格式的人之间的Dota 2匹配的详细分析。 人们迷路了</a></li>
<li><a href="../zh-CN419409/index.html">基于Coffee Lake处理器的新型英特尔NUC</a></li>
<li><a href="../zh-CN419411/index.html">关于摩天大楼中的大火。 电影与现实</a></li>
<li><a href="../zh-CN419413/index.html">凿子-（不太完全）数字逻辑开发的新方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>