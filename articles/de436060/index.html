<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóíÔ∏è üÖæÔ∏è ü§ñ Architekturl√∂sungen f√ºr ein Handyspiel. Teil 3: Blick auf den Strahlschub üëÜüèΩ ‚úçüèæ üë≤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In fr√ºheren Artikeln haben wir beschrieben, wie ein Modell bequem und mit umfangreichen Funktionen angeordnet werden sollte, welche Art von Befehlssys...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Architekturl√∂sungen f√ºr ein Handyspiel. Teil 3: Blick auf den Strahlschub</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436060/"><img src="https://habrastorage.org/webt/ix/84/lz/ix84lzlun0rnpohgx14wu7mzbp4.jpeg"><br><br>  In fr√ºheren Artikeln haben wir beschrieben, wie ein Modell bequem und mit umfangreichen Funktionen angeordnet werden sollte, welche Art von Befehlssystem als Controller geeignet w√§re. Es ist an der Zeit, √ºber den dritten Buchstaben unserer alternativen MVC-Abk√ºrzung zu sprechen. <br><br>  Tats√§chlich verf√ºgt der Assetstore √ºber eine vorgefertigte, sehr hoch entwickelte UniRX-Bibliothek, die Reaktivit√§t implementiert und die Inversion f√ºr die Einheit steuert.  Aber wir werden am Ende des Artikels dar√ºber sprechen, da dieses leistungsstarke, riesige und RX-konforme Tool f√ºr unseren Fall ziemlich √ºberfl√ºssig ist.  Alles zu tun, was wir brauchen, ist durchaus m√∂glich, ohne den RX hochzuziehen, und wenn Sie ihn besitzen, k√∂nnen Sie das auch problemlos damit tun. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Architekturl√∂sungen f√ºr ein Handyspiel.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1: Modell</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Architekturl√∂sungen f√ºr ein Handyspiel.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2: Befehl und ihre Warteschlangen</a> <br><a name="habracut"></a><br>  Wenn eine Person gerade erst anf√§ngt, das erste Spiel zu schreiben, scheint es f√ºr sie logisch, eine Funktion zu existieren, die die gesamte Form oder einen Teil davon zeichnet und jedes Mal zieht, wenn sich etwas Wichtiges √§ndert.  Mit der Zeit w√§chst die Oberfl√§che, die Form und Teile der Formen werden einhundert, dann zweihundert, und wenn die Brieftasche ihren Zustand √§ndert, muss ein Viertel von ihnen neu gezeichnet werden.  Und dann kommt der Manager und sagt, dass Sie "wie in diesem Spiel" einen kleinen roten Punkt auf der Schaltfl√§che machen m√ºssen, wenn sich innerhalb der Schaltfl√§che ein Abschnitt befindet, in dem sich ein Unterabschnitt befindet, in dem sich die Schaltfl√§che befindet, und Sie jetzt √ºber gen√ºgend Ressourcen verf√ºgen, um etwas zu tun, indem Sie darauf klicken das ist wichtig  Und das ist alles, gesegelt ... <br><br>  Die Abkehr vom Konzept des Zeichnens erfolgt in mehreren Schritten.  Zun√§chst wird das Problem einzelner Felder gel√∂st.  Sie haben beispielsweise ein Feld im Modell und ein Textfeld, in dem der gesamte Inhalt angezeigt werden soll.  Ok, wir starten ein Objekt, das Aktualisierungen dieses Felds abonniert, und bei jeder Aktualisierung werden die Ergebnisse einem Textfeld hinzugef√ºgt.  Im Code so etwas: <br><br><pre><code class="cpp hljs">var observable = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ChildControl(FCPlayerModel.ASSIGNED, Player); observable.onChange(i =&gt; Assigned.text = i.ToString())</code> </pre> <br>  Jetzt m√ºssen wir nicht mehr dem Neuzeichnen folgen, sondern nur dieses Design erstellen, und dann f√§llt alles, was im Modell passiert, in die Benutzeroberfl√§che.  Gut, aber umst√§ndlich, es enth√§lt viele offensichtlich unn√∂tige Gesten, die ein Programmierer 100.500 Mal mit den H√§nden schreiben muss und manchmal Fehler macht.  Lassen Sie uns diese Anzeigen in eine Erweiterungsfunktion einbinden, die die zus√§tzlichen Buchstaben unter der Haube verbirgt. <br><br><pre> <code class="cpp hljs">Player.Get(c, FCPlayerModel.ASSIGNED).Action(c, i =&gt; Assigned.text = i.ToString());</code> </pre> <br>  Viel besser, aber das ist noch nicht alles.  Das Verschieben des Modellfelds in das Textfeld ist eine so h√§ufige und typische Operation, dass wir eine separate Wrapper-Funktion daf√ºr erstellen.  Jetzt f√§llt es ganz kurz und gut aus, wie es mir scheint. <br><br><pre> <code class="cpp hljs">Player.Get(c, FCPlayerModel.ASSIGNED).SetText(c, Assigned);</code> </pre> <br>  Hier zeigte ich die Hauptidee, an der ich mich beim Erstellen von Schnittstellen f√ºr den Rest meines Lebens orientieren werde: ‚ÄûWenn ein Programmierer mindestens zweimal etwas tun musste, wickeln Sie es in eine spezielle praktische und kurze Funktion ein.‚Äú <br><br><h2>  M√ºllabfuhr </h2><br>  Ein Nebeneffekt des reaktiven Interface-Engineerings ist die Erstellung einer Reihe von Objekten, die etwas abonniert haben und daher den Speicher nicht ohne einen besonderen Kick verlassen.  In der Antike habe ich mir einen Weg ausgedacht, der nicht so sch√∂n, aber einfach und erschwinglich ist.  Beim Erstellen eines Formulars wird eine Liste aller Controller erstellt, die in Verbindung mit diesem Formular erstellt wurden. Der K√ºrze halber wird es einfach als "c" bezeichnet.  Alle speziellen Wrapper-Funktionen akzeptieren diese Liste als ersten erforderlichen Parameter. Wenn DisconnectModel das Formular erstellt, √ºbergibt es die Liste aller Steuerelemente und verunsichert sie gnadenlos mit dem Code des gemeinsamen Vorfahren.  Keine Sch√∂nheit und Anmut, aber billig, zuverl√§ssig und relativ praktisch.  Sie k√∂nnen etwas mehr Sicherheit haben, wenn Sie anstelle des Kontrollblatts IView ben√∂tigen, um dies einzugeben und an alle diese Stellen weiterzugeben.  Im Wesentlichen das Gleiche, das Vergessen, genau das gleiche auszuf√ºllen, wird nicht funktionieren, aber es ist schwieriger zu hacken.  Ich habe Angst zu vergessen, aber ich habe keine gro√üe Angst, dass jemand das System absichtlich kaputt macht, weil solche klugen Leute mit einem G√ºrtel und anderen Nicht-Software-Methoden bek√§mpft werden m√ºssen, also beschr√§nke ich mich einfach auf c. <br><br>  Ein alternativer Ansatz kann von UniRX abgeleitet werden.  Jeder Wrapper erstellt ein neues Objekt, das einen Link zu dem vorherigen Objekt hat, das er abh√∂rt.  Am Ende wird die AddTo-Methode (Komponentenmethode) aufgerufen, die die gesamte Kette von Steuerelementen einem zerst√∂rbaren Objekt zuordnet.  In unserem Beispiel w√ºrde ein solcher Code folgenderma√üen aussehen: <br><br><pre> <code class="cpp hljs">Player.Get(FCPlayerModel.ASSIGNED).SetText(Assigned).AddTo(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>);</code> </pre> <br>  Wenn dieser letzte Besitzer der Kette beschlie√üt, zerst√∂rt zu werden, sendet er an alle ihm zugewiesenen Kontrollen den Befehl "T√∂te dich wegen Entsorgung, wenn niemand au√üer mir auf dich h√∂rt".  Und die ganze Kette wird gehorsam aufger√§umt.  Nat√ºrlich ist es viel pr√§gnanter, aber aus meiner Sicht gibt es einen wichtigen Fehler.  AddTo kann versehentlich vergessen werden und niemand wird es jemals erfahren, bis es zu sp√§t ist. <br><br>  Tats√§chlich k√∂nnen Sie den schmutzigen Unity-Hack verwenden und auf zus√§tzlichen Code in View verzichten: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> T AddTo&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> T disposable, Component component) where T : IDisposable { var composite = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CompositeDisposable(disposable); Observable .EveryUpdate() .Where(_ =&gt; component == null) .Subscribe(_ =&gt; composite.Dispose()) .AddTo(composite); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> disposable; }</code> </pre> <br>  Wie Sie wissen, ist ein Link zu einer Unicomponent-Komponente oder einem GameObject in Unity null.  Sie m√ºssen jedoch verstehen, dass dieser Hakokostyl einen Update-Listener f√ºr jede zerst√∂rte Kontrollkette erstellt, und dies ist bereits ein wenig h√∂flich. <br><br><h2>  Modellunabh√§ngige Schnittstelle </h2><br>  Unser Ideal, das wir jedoch leicht erreichen k√∂nnen, ist die Situation, in der wir jederzeit den vollst√§ndigen GameState laden k√∂nnen, sowohl das vom Server verifizierte Modell als auch das Datenmodell f√ºr die Benutzeroberfl√§che, und die Anwendung sich bis zum Status aller Schaltfl√§chen in genau demselben Zustand befindet.  Daf√ºr gibt es zwei Gr√ºnde.  Das erste ist, dass einige Programmierer gerne im Formular-Controller oder sogar in der Ansicht selbst speichern und dabei darauf hinweisen, dass ihr Lebenszyklus genau dem des Formulars selbst entspricht.  Das zweite ist, dass selbst wenn sich alle Daten f√ºr das Formular in seinem Modell befinden, der Befehl zum Erstellen und Ausf√ºllen des Formulars selbst die Form eines expliziten Funktionsaufrufs hat, mit einigen zus√§tzlichen Parametern, zum Beispiel, auf welches Feld aus der Liste fokussiert werden soll. <br><br>  Sie m√ºssen sich nicht damit befassen, wenn Sie nicht wirklich die Bequemlichkeit des Debuggens w√ºnschen.  Aber wir sind nicht so, wir wollen die Schnittstelle so bequem wie die grundlegenden Operationen mit dem Modell debuggen.  Dazu liegt der folgende Fokus.  Im UI-Teil des Modells wird eine Variable eingerichtet, z. B. .main, und darin wird als Teil des Befehls das Modell des Formulars eingef√ºgt, das angezeigt werden soll.  Der Status dieser Variablen wird von einem speziellen Controller √ºberwacht. Wenn ein Modell in dieser Variablen angezeigt wird, instanziiert es je nach Typ das gew√ºnschte Formular, platziert es bei Bedarf und sendet einen Aufruf an ConnectModel (Modell).  Wenn die Variable aus dem Modell freigegeben wird, entfernt der Controller das Formular aus der Zeichenfl√§che und verwendet es.  Daher werden keine Aktionen zum Umgehen des Modells ausgef√ºhrt, und alles, was Sie mit der Schnittstelle ausgef√ºhrt haben, ist im ExportChanges-Modell deutlich sichtbar.  Und dann orientieren wir uns am Prinzip "Alles, was zweimal verpackt wurde" und verwenden auf allen Ebenen der Schnittstelle genau denselben Controller.  Wenn die Form einen Platz f√ºr eine andere Form hat, wird ein UI-Modell f√ºr sie erstellt und eine Variable im Modell der √ºbergeordneten Form erstellt.  Genau das gleiche mit Listen. <br><br>  Ein Nebeneffekt dieses Ansatzes besteht darin, dass jedem Formular zwei Dateien hinzugef√ºgt werden, eine mit einem Datenmodell f√ºr dieses Formular und die andere, normalerweise eine Monobah mit Links zu UI-Elementen, die, nachdem sie das Modell in ihrer ConnectModel-Funktion erhalten haben, alle reaktiven Controller f√ºr alle erstellen Modellfelder und alle UI-Elemente.  Nun, es ist noch kompakter, so dass es auch bequem ist, damit zu arbeiten, wahrscheinlich ist es unm√∂glich.  Wenn m√∂glich, schreiben Sie in die Kommentare. <br><br><h2>  Listensteuerelemente </h2><br>  Eine typische Situation ist, wenn das Modell eine Liste einiger Elemente enth√§lt.  Da ich m√∂chte, dass alles sehr bequem und vorzugsweise in einer einzigen Zeile erledigt wird, wollte ich auch etwas f√ºr Listen tun, die bequem zu handhaben sind.  Eine Zeile ist m√∂glich, aber es stellt sich heraus, dass sie unangenehm lang ist.  Empirisch stellte sich heraus, dass fast die gesamte Fallvielfalt nur von zwei Arten von Kontrollen abgedeckt wird.  Der erste √ºberwacht den Status einer Sammlung und ruft drei Lambda-Funktionen auf. Der erste wird aufgerufen, wenn ein Element zur Sammlung hinzugef√ºgt wird, der zweite, wenn das Element die Sammlung verl√§sst, und der dritte wird aufgerufen, wenn die Elemente der Sammlung die Reihenfolge √§ndern.  Die zweith√§ufigste Art der Steuerung √ºberwacht die Liste und ist die Quelle eines Abonnements - Seiten mit einer bestimmten Nummer.  Das hei√üt, es folgt beispielsweise einer Liste mit einer L√§nge von 102 Elementen und gibt selbst eine Liste von 10 Elementen vom 20. bis zum 29. zur√ºck.  Und die generierten Ereignisse sind genau die gleichen, als w√§re es eine Liste selbst. <br><br>  Nach dem Prinzip ‚ÄûErstellen eines Wrappers f√ºr alles, was zweimal ausgef√ºhrt wurde‚Äú, wurde nat√ºrlich eine gro√üe Anzahl praktischer Wrapper angezeigt, die beispielsweise Factory nur als Eingabe akzeptieren, eine Korrespondenz zwischen Modelltypen und ihren Ansichten erstellen und einen Link zu Canvas erstellen Sie m√ºssen die Elemente hinzuf√ºgen.  Und viele andere √§hnliche, nur etwa ein Dutzend Wrapper f√ºr typische F√§lle. <br><br><h2>  Komplexere Steuerungen </h2><br>  Manchmal treten Situationen auf, die √ºberfl√ºssig sind, um durch das Modell ausgedr√ºckt zu werden, soweit dies offensichtlich ist.  Hier k√∂nnen Steuerelemente, die eine Operation an einem Wert ausf√ºhren, zur Rettung kommen, sowie Steuerelemente, die andere Steuerelemente √ºberwachen.  Zum Beispiel eine typische Situation: Eine Aktion hat einen Preis, und die Schaltfl√§che ist nur aktiv, wenn sich mehr Geld auf dem Konto befindet als der Preis. <br><br><pre> <code class="cpp hljs">item.Get(c, FCUnitItem.COST).Join(c, Player.Get(c, MONEY)).Func(c, (cost, money) =&gt; cost &lt;= money).SetActive(c, BuyButton);</code> </pre> <br>  Tats√§chlich ist die Situation so typisch, dass es nach meinem Prinzip einen fertigen Wrapper daf√ºr gibt, aber dann habe ich seinen Inhalt gezeigt. <br><br>  Wir haben den zu kaufenden Artikel genommen, ein Objekt erstellt, das eines seiner Felder abonniert hat und einen Wert vom Typ long hat.  Sie f√ºgten ein weiteres Steuerelement hinzu, das ebenfalls vom Typ long ist. Die Methode gab ein Steuerelement mit zwei Werten zur√ºck. Das ge√§nderte Ereignis wird ausgel√∂st, wenn sich eines von ihnen √§ndert. Anschlie√üend erstellt Func ein Objekt f√ºr jede √Ñnderung der Eingabe, die die Funktion berechnet, und das ge√§nderte Ereignis, wenn der endg√ºltige Wert berechnet wird Funktion hat sich ge√§ndert. <br><br>  Der Compiler erstellt erfolgreich den erforderlichen Steuerelementtyp auf der Grundlage der Eingabedatentypen und des Typs des resultierenden Ausdrucks.  In seltenen F√§llen, in denen der von der Lambda-Funktion zur√ºckgegebene Typ nicht offensichtlich ist, werden Sie vom Compiler aufgefordert, ihn explizit zu pr√§zisieren.  Schlie√ülich h√∂rt der letzte Aufruf das Boolesche Steuerelement ab, je nachdem, welches es die Taste ein- oder ausschaltet. <br><br>  Tats√§chlich akzeptiert der echte Wrapper im Projekt zwei Schaltfl√§chen als Eingabe, eine f√ºr den Fall, dass Geld vorhanden ist, und die andere f√ºr den Fall, dass nicht gen√ºgend Geld vorhanden ist. Der Befehl zum √ñffnen des modalen Fensters ‚ÄûW√§hrungen kaufen‚Äú h√§ngt auch an der zweiten Schaltfl√§che.  Und das alles in einer einfachen Zeile. <br><br>  Es ist leicht zu erkennen, dass Sie mit Join und Func beliebig komplexe Strukturen erstellen k√∂nnen.  In meinem Code gab es eine Funktion, die komplexe Steuerelemente erzeugte, die berechnete, wie viel ein Spieler kaufen konnte, indem er die Anzahl der Spieler auf seiner Seite ber√ºcksichtigte, und die Regel, dass jeder das Budget um 10% √ºberschreiten konnte, wenn alle zusammen das Gesamtbudget nicht √ºberstiegen.  Und dies ist ein Beispiel daf√ºr, wie es nicht notwendig ist, dies zu tun, denn wie einfach und leicht es zu debuggen ist, was in den Modellen passiert, ist ebenso schwierig, einen Fehler in reaktiven Steuerungen zu erkennen.  Sie werden sogar die Hinrichtung abfangen und viel Zeit damit verbringen, zu verstehen, was dazu gef√ºhrt hat. <br><br>  Daher lautet das allgemeine Prinzip der Verwendung komplexer Steuerelemente wie folgt: Beim Prototyping eines Formulars k√∂nnen Sie Entw√ºrfe f√ºr reaktive Steuerelemente verwenden, insbesondere wenn Sie nicht sicher sind, ob sie in Zukunft komplizierter werden. Sobald Sie jedoch den Verdacht haben, dass sie nicht funktionieren, werden Sie nicht verstehen, was passiert ist. Sie sollten diese Manipulationen sofort auf das Modell √ºbertragen und die zuvor in den Steuerelementen durchgef√ºhrten Berechnungen in Erweiterungsmethoden in statischen Regelklassen einf√ºgen. <br><br>  Dies unterscheidet sich erheblich von dem Prinzip ‚ÄûMach es sofort gut‚Äú, das unter Perfektionisten so beliebt ist, weil wir in einer Welt der Spieleentwickler leben und wenn du anf√§ngst, ein Formular zu √ºberspringen, kannst du absolut nicht sicher sein, was es in drei Tagen tun wird.  Einer meiner Kollegen sagte: "Wenn ich jedes Mal f√ºnf Cent bekommen w√ºrde, wenn Spieledesigner ihre Meinung √§ndern, w√§re ich bereits eine sehr reiche Person."  In der Tat ist das nicht schlecht, aber auch umgekehrt ist gut.  Das Spiel sollte sich durch Ausprobieren entwickeln, denn wenn Sie keinen dummen Klon machen, k√∂nnen Sie sich nicht vorstellen, was die Spieler wirklich brauchen. <br><br><h2>  Eine Datenquelle f√ºr mehrere Ansichten </h2><br>  F√ºr so viele archetypische F√§lle, dass Sie separat dar√ºber sprechen m√ºssen.  Es kommt vor, dass dasselbe Modell eines Elements als Teil eines Schnittstellenmodells in einer anderen Ansicht gerendert wird, je nachdem, wo und in welchem ‚Äã‚ÄãKontext dies geschieht.  Und wir verwenden das Prinzip "ein Typ, eine Ansicht".  Sie haben beispielsweise eine Waffeneinkaufskarte, die dieselben unkomplizierten Informationen enth√§lt, in verschiedenen Gesch√§ftsmodi jedoch durch unterschiedliche Fertigh√§user dargestellt werden sollte.  Die L√∂sung besteht aus zwei Teilen f√ºr zwei verschiedene Situationen. <br><br>  Die erste ist, wenn diese Ansicht in zwei verschiedenen Ansichten platziert wird, z. B. einem Gesch√§ft in Form einer kurzen Liste und einem Gesch√§ft mit gro√üen Bildern.  In diesem Fall werden zwei separate Fabriken eingerichtet, um eine Typ-Fertighaus-√úbereinstimmung zu erstellen.  In der ConnectModel-Methode einer Ansicht verwenden Sie die eine und die andere in der anderen.  Ganz anders ist es, wenn Sie Karten mit absolut identischen Informationen an einem Ort etwas anders anzeigen m√ºssen.  In diesem Fall verf√ºgt das Elementmodell manchmal √ºber ein zus√§tzliches Feld, das den festlichen Hintergrund eines bestimmten Elements angibt, und manchmal hat das Elementmodell nur einen Erben, der keine Felder hat und nur mit einem anderen Fertighaus gezeichnet werden muss.  Im Prinzip widerspricht nichts. <br><br>  Es scheint eine offensichtliche L√∂sung zu sein, aber ich sah genug in einem seltsamen Code √ºber seltsame T√§nze mit einem Tamburin um diese Situation herum und hielt es f√ºr notwendig, dar√ºber zu schreiben. <br><br><h2>  Sonderfall: Steuerelemente mit verdammt vielen Abh√§ngigkeiten </h2><br>  Es gibt einen ganz besonderen Fall, √ºber den ich separat sprechen m√∂chte.  Dies sind Steuerelemente, die eine sehr gro√üe Anzahl von Elementen √ºberwachen.  Zum Beispiel ein Steuerelement, das eine Liste von Modellen √ºberwacht und den Inhalt eines Feldes zusammenfasst, das in jedem der Elemente liegt.  Bei einem gro√üen √úberrohr in der Liste, das beispielsweise mit Daten gef√ºllt wird, besteht bei einem solchen Steuerelement die Gefahr, dass so viele Ereignisse √ºber die √Ñnderung erfasst werden, wie es plus eines in der Liste der Elemente gibt.  Die Aggregatfunktion so oft neu zu berechnen, ist nat√ºrlich eine schlechte Idee.  Insbesondere in solchen F√§llen erstellen wir ein Steuerelement, das das Ereignis onTransactionFinished abonniert, das sich vom GameState abhebt. Wie wir uns erinnern, ist in jedem Modell ein Link zum GameState verf√ºgbar.  Und bei jeder √Ñnderung der Eingabe markiert dieses Steuerelement einfach selbst, dass sich die Quelldaten ge√§ndert haben, und wird nur dann nachgez√§hlt, wenn es eine Nachricht √ºber das Ende der Transaktion empf√§ngt oder wenn es feststellt, dass die Transaktion zu dem Zeitpunkt bereits abgeschlossen ist, als es eine Nachricht vom Eingabeereignisstrom empfangen hat .  Es ist klar, dass ein solches Steuerelement m√∂glicherweise nicht vor unn√∂tigen Nachrichten gesch√ºtzt ist, wenn es zwei solche Steuerelemente in der Flussverarbeitungskette gibt.  Der erste wird eine Wolke von √Ñnderungen ansammeln, auf das Ende der Transaktion warten, den √Ñnderungsstrom weiter starten, und es gibt einen anderen, der bereits eine Reihe von √Ñnderungen erfasst hat, das Ereignis √ºber das Ende der Transaktion erhalten hat (er hatte das Pech, in der Liste der Funktionen zu sein, die das Ereignis zuvor abonniert haben), alles gez√§hlt hat und dann bam und ein anderes √Ñnderungsereignis und erz√§hle alles ein zweites Mal.  Es mag sein, aber selten und noch wichtiger, wenn Ihre Steuerelemente solche monstr√∂sen Berechnungen mehr als einmal in einem Berechnungsfluss durchf√ºhren, dann machen Sie etwas falsch und m√ºssen all diese h√∂llischen Manipulationen auf das Modell und die Regeln √ºbertragen, wo sie sich befinden in der Tat der Ort. <br><br><h2>  UniRX Ready Library </h2><br>  Und es w√§re m√∂glich, uns auf all das zu beschr√§nken und ruhig mit dem Schreiben Ihres Meisterwerks zu beginnen, zumal es im Vergleich zum Modell und den Kontrollteams sehr einfach ist und in weniger als einer Woche geschrieben wird, wenn die Idee, dass Sie ein Fahrrad erfinden, nicht unklar ist Alles, was vor mir gedacht und geschrieben wurde, wird kostenlos an alle verteilt. <br><br>  Wenn wir UniRX aufdecken, finden wir ein sch√∂nes und standardkonformes Design, mit dem Threads aus allem im Allgemeinen erstellt, geschickt zusammengef√ºhrt, vom Hauptthread zum Nicht-Hauptthread gefiltert oder die Steuerung an den Hauptthread zur√ºckgegeben werden kann, der eine Reihe vorgefertigter Tools zum Senden an verschiedene Orte usw. enth√§lt. weiter.  Wir haben dort nicht genau zwei Dinge: Einfachheit und Bequemlichkeit des Debuggens.  Haben Sie jemals versucht, ein mehrst√∂ckiges Geb√§ude auf Linq schrittweise im Debugger zu debuggen?  Hier ist es also noch viel schlimmer.  Gleichzeitig fehlt uns v√∂llig, wof√ºr all diese hoch entwickelten Maschinen geschaffen wurden.  Der Einfachheit halber fehlen Debugging- und Reproduktionszust√§nde, es fehlt uns eine Vielzahl von Signalquellen, alles geschieht im Hauptstrom, da das Spielen mit Multithreading im Metaspiel v√∂llig redundant ist, die gesamte Asynchronit√§t der Befehlsverarbeitung in der Befehlssende-Engine verborgen ist und die Asynchronit√§t selbst sehr viel in Anspruch nimmt Nicht viel Platz, viel mehr Aufmerksamkeit wird allen Arten von √úberpr√ºfungen, Selbst√ºberpr√ºfungen und den M√∂glichkeiten der Protokollierung und Wiedergabe gewidmet. <br><br>  Wenn Sie bereits wissen, wie man UniRX verwendet, mache ich es im Allgemeinen speziell f√ºr IObservable-Modelle. Sie k√∂nnen die Trumpffunktionen Ihrer Lieblingsbibliothek dort verwenden, wo Sie sie ben√∂tigen. Im √úbrigen empfehle ich jedoch, keine Panzer aus Hochgeschwindigkeitsautos und Autos aus Panzern nur am Boden zu bauen dass beide R√§der haben. <br><br>  Am Ende des Artikels habe ich Ihnen, liebe Leser, traditionelle Fragen, die f√ºr mich sehr wichtig sind, meine Vorstellungen vom Sch√∂nen und die Aussichten f√ºr die Entwicklung meiner wissenschaftlichen und technischen Arbeit. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de436060/">https://habr.com/ru/post/de436060/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de436048/index.html">Arbeiten Sie an Wi-Fi-Hotspots zusammen</a></li>
<li><a href="../de436050/index.html">So verbinden Sie Raspberry PI mit Azure IoT: Schritt-f√ºr-Schritt-Anleitung</a></li>
<li><a href="../de436052/index.html">So erstellen Sie eine Data Science-Abteilung und vermasseln sie nicht</a></li>
<li><a href="../de436056/index.html">Digitale Veranstaltungen in Moskau vom 14. bis 20. Januar</a></li>
<li><a href="../de436058/index.html">√úbersicht √ºber das Snom D3- und D7-Erweiterungsmodul</a></li>
<li><a href="../de436062/index.html">Schiedsverfahren f√ºr Anf√§nger, Teil 1</a></li>
<li><a href="../de436064/index.html">K√ºnstliche Intelligenz f√ºr alle</a></li>
<li><a href="../de436066/index.html">Mathematik der Apokalypse: Spieltheorie und die karibische Atomkrise</a></li>
<li><a href="../de436068/index.html">C ++ Russland Konferenz 2019</a></li>
<li><a href="../de436070/index.html">Wie man mit flockigen Tests in der OpenSource-Community umgeht</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>