<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë´ ü¶É üöô Comment cr√©er un mod√®le plus pr√©cis√©ment que transfermarkt et ne pas pr√©dire ou ce qui affecte le co√ªt des transferts par-dessus tout üôå üë®üèø‚Äçüéì üßöüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je vais essayer de vous dire √† quel point il est facile d'obtenir des r√©sultats int√©ressants en appliquant simplement une approche compl√®tement standa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment cr√©er un mod√®le plus pr√©cis√©ment que transfermarkt et ne pas pr√©dire ou ce qui affecte le co√ªt des transferts par-dessus tout</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468107/"><p>  Je vais essayer de vous dire √† quel point il est facile d'obtenir des r√©sultats int√©ressants en appliquant simplement une approche compl√®tement standard du tutoriel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">du</a> cours <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">de machine learning aux</a> donn√©es qui ne sont pas les plus utilis√©es en Deep Learning.  L'essence de mon article est qu'il peut s'agir de chacun de nous, il vous suffit de regarder l'ensemble des informations que vous connaissez bien.  Pour cela, en effet, il est beaucoup plus important de bien comprendre vos donn√©es que d'√™tre un expert des derni√®res structures de r√©seaux de neurones.  C'est, √† mon avis, que nous sommes √† ce point d'or dans le d√©veloppement du DL, quand d'un c√¥t√© c'est d√©j√† un outil qui peut √™tre utilis√© sans avoir besoin d'√™tre un doctorant, et de l'autre il y a encore beaucoup de domaines o√π personne ne l'a vraiment utilis√©, si vous regardez Un peu plus loin que les th√®mes traditionnels. </p><br><p><img src="https://habrastorage.org/webt/id/tl/1d/idtl1dxx4ixh6ycstgzi8nsn8ks.jpeg"></p><a name="habracut"></a><br><p>  En lisant des articles et en passant en regardant comment le machine learning se d√©veloppe, vous et moi pouvons facilement avoir l'impression que ce train passe.  En effet, si vous suivez les cours les plus connus (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Andrew Ng</a> ) ou la plupart des articles sur Habr√© de la m√™me excellente communaut√© d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Open Data Science, vous vous</a> rendez tr√®s vite compte que sans creuser les profondeurs de la m√©moire du savoir universitaire en math√©matiques sup√©rieures il n'y a rien √† faire, enfin, du moins certains des r√©sultats raisonnables (m√™me dans des exemples de ¬´ <em>jouets</em> ¬ª) ne peuvent √™tre obtenus qu'apr√®s plusieurs semaines d'√©tude de la th√©orie de l'√©ponge et des diff√©rentes mani√®res de la mettre en ≈ìuvre.  Mais souvent, vous en voulez un autre, vous voulez avoir un outil qui remplit sa fonction, qui r√©sout une certaine classe de probl√®mes, de sorte que, en l'appliquant dans votre domaine, obtenez le r√©sultat.  En effet, dans d'autres domaines, tout est exactement le cas, si vous, par exemple, √©crivez un jeu et que votre t√¢che est d'assurer le transfert d'informations d'un joueur vers un serveur, alors vous n'√©tudiez pas la th√©orie des graphes, ne savez pas comment optimiser la connectivit√© pour que vos paquets atteignent plus rapidement - vous prenez un outil (biblioth√®que, framework) qui le fait pour vous et se concentre sur ce qui est unique √† une t√¢che particuli√®re (par exemple, quel type d'informations vous devez transf√©rer dans les deux sens).  Pourquoi n'en est-il pas ainsi pour l'apprentissage en profondeur? </p><br><p>  En fait, nous sommes maintenant au bord du temps o√π cela devient <em>presque comme √ßa</em> .  Et pour moi, j'ai <em>presque trouv√© cet</em> outil oh - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">fast.ai.</a>  Une excellente biblioth√®que et un cours <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">encore plus raide, dont le</a> principe entier est juste construit de haut en bas: d'abord r√©soudre des probl√®mes r√©els, souvent au niveau de la pr√©cision de la pr√©diction des mod√®les State Of The Art, jusqu'√† la structure interne de la biblioth√®que et la th√©orie qui la sous-tend. </p><br><div class="spoiler">  <b class="spoiler_title">Bien s√ªr, tout n'est pas si simple.</b> <div class="spoiler_text"><p>  Anticipant les accusations de manque de professionnalisme et la superficialit√© de mes connaissances (ce qui, bien s√ªr, est plus vrai qu'improbable), je veux faire une r√©serve tout de suite.  Faut-il √©tudier la th√©orie, regarder ces conf√©rences tr√®s fondamentales, se souvenir du calcul matriciel, etc.?  Bien s√ªr que oui.  Et plus vous approfondissez le sujet, plus vous en aurez besoin et vous devrez vous accrocher aux sources primaires.  Mais plus l'immersion sera consciente, plus il sera facile de comprendre exactement comment ces principes fondamentaux affectent le r√©sultat.  Tout l'int√©r√™t du principe descendant est pr√©cis√©ment qu'il doit √™tre fait apr√®s.  Apr√®s avoir √©crit quelque chose de tangible que vous pouvez montrer √† vos amis.  Apr√®s vous √™tre plong√© suffisamment dans le sujet et cela vous a fascin√©.  Et la th√©orie du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">savoir</a> vous d√©passera, elle est juste pr√©sent√©e au moment m√™me o√π il sera plus facile pour vous de la corr√©ler avec ce que vous avez d√©j√† fait.  Pour expliquer pourquoi et comment cela fonctionne r√©ellement. </p><br><p>  Je suis plus que s√ªr que quelqu'un est plus √† l'aise avec l'approche ascendante traditionnelle.  Et c'est bien qu'il y ait les deux fa√ßons, l'essentiel est que nous nous rencontrions au milieu </p></div></div><br><p>  Avec un tel ensemble de connaissances, j'ai d√©cid√© d'appliquer DL √† un sujet qui m'int√©resse depuis longtemps et de voir √† quoi cela peut conduire.  Et, bien s√ªr, la premi√®re chose qui m'est venue √† l'esprit √©tait le football.  Et quand j'ai trouv√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ces merveilleuses statistiques de</a> transfert sur kaggle, le choix est devenu d'autant plus √©vident. </p><br><p>  Un peu sur ces donn√©es.  Ils contiennent des informations sur qui et o√π a √©volu√© vers le football europ√©en au cours des 10 derni√®res ann√©es.  Il y a des informations sur les clubs, les statistiques des joueurs, les ligues auxquelles ils participent, les entra√Æneurs et les agents, et bien plus encore (il y a plus d'une centaine de domaines diff√©rents au total).  Les donn√©es sont tr√®s int√©ressantes, mais est-il possible de d√©terminer combien un joueur devrait en co√ªter? </p><br><p><img src="https://habrastorage.org/webt/q9/n8/bb/q9n8bbmosrfwyf0bhzu7pio3o0u.jpeg"></p><br><p>  Si vous y r√©fl√©chissez, le prix d'un joueur d√©pend d'un grand nombre de facteurs.  En m√™me temps, c'est super, <strong>et</strong> moi (sinon la plupart) leur part est tout simplement non formalisable.  Comment comprendre que le club vient de vendre le joueur √† un prix √©lev√©, a besoin d'un attaquant et est tout √† fait pr√™t √† payer trop cher pour lui;  comment comprendre qu'un nouvel entra√Æneur est venu et n√©cessite la mise √† jour de la liste;  comment comprendre que le principal d√©fenseur du club a remarqu√© le grand et qu'il a commenc√© √† jouer sans enthousiasme, exigeant un transfert?  Tout cela affecte fondamentalement le montant d'une transaction, mais n'est pas pr√©sent√© dans les donn√©es.  De l√†, mes attentes initiales quant √† l'exactitude d'une telle pr√©vision √©taient faibles. </p><br><div class="spoiler">  <b class="spoiler_title">Je suis un faux programmeur</b> <div class="spoiler_text"><p> √Ä ce stade, il est temps d'ins√©rer la clause de non-responsabilit√© standard que <code>#</code> ne <code>#</code> pas un <code>#</code> , je ne gagne pas d'argent avec cela, donc mon code est terrible, et il est tr√®s probable qu'il puisse (et devrait?) √ätre r√©√©crit beaucoup mieux, mais puisque la t√¢che consistait √† enqu√™ter sur l'id√©e et (pas ?) Confirmez la th√©orie, alors le code est ce qu'il est :) </p></div></div><br><h4 id="model">  Mod√®le </h4><br><p>  J'ai commenc√© par exclure les transferts de moins d'un million de dollars, qui sont trop chaotiques.  Il a ensuite rassembl√© toutes les donn√©es dans un grand tableau avec cent et demi champs, dans lequel, pour chaque transfert, il y avait toutes les informations disponibles √† son sujet (√† la fois sur le transfert lui-m√™me, le joueur et ses statistiques, ainsi que sur les clubs qui y participent, les ligues, etc.). ) </p><br><p>  Regardons les √©tapes de la cr√©ation du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">mod√®le</a> : </p><br><p>  Apr√®s avoir termin√© toutes les importations Python et charg√© la table de transfert d√©normalis√©e, la premi√®re chose que nous devons d√©terminer est lequel des champs nous consid√©rons comme num√©riques et lesquels sont cat√©goriques.  C'est un sujet tr√®s int√©ressant en soi, vous pouvez en parler dans les commentaires, mais pour gagner du temps, je d√©cris simplement la r√®gle que j'utilise: par d√©faut, je consid√®re tous les champs cat√©goriques, √† l'exception de ceux qui sont repr√©sent√©s par des nombres √† virgule flottante ou ceux o√π le nombre de valeurs diff√©rentes est suffisamment grand. </p><br><p>  Dans ce contexte, par exemple, je consid√®re l'ann√©e de transfert comme cat√©gorique, bien qu'il s'agisse initialement d'un nombre, car le nombre de valeurs diff√©rentes est faible ici (10 - de 2008 √† 2018).  Mais, par exemple, la performance du joueur la saison derni√®re (qui est repr√©sent√©e par le nombre moyen de ses buts par match) est un flottant et peut prendre presque n'importe quelle valeur, donc je la consid√®re comme num√©rique. </p><br><pre> <code class="python hljs">cat_vars_tpl = (<span class="hljs-string"><span class="hljs-string">'season'</span></span>,<span class="hljs-string"><span class="hljs-string">'trs_year'</span></span>,<span class="hljs-string"><span class="hljs-string">'trs_month'</span></span>,<span class="hljs-string"><span class="hljs-string">'trs_day'</span></span>,<span class="hljs-string"><span class="hljs-string">'trs_till_deadline'</span></span>, <span class="hljs-string"><span class="hljs-string">'contract_left_months'</span></span>, <span class="hljs-string"><span class="hljs-string">'contract_left_years'</span></span>,<span class="hljs-string"><span class="hljs-string">'age'</span></span>, <span class="hljs-string"><span class="hljs-string">'is_midseason'</span></span>,<span class="hljs-string"><span class="hljs-string">'is_loan'</span></span>,<span class="hljs-string"><span class="hljs-string">'is_end_of_loan'</span></span>, <span class="hljs-string"><span class="hljs-string">'nat_national_name'</span></span>,<span class="hljs-string"><span class="hljs-string">'plr_position_main'</span></span>, <span class="hljs-string"><span class="hljs-string">'plr_other_positions'</span></span>,<span class="hljs-string"><span class="hljs-string">'plr_nationality_name'</span></span>, <span class="hljs-string"><span class="hljs-string">'plr_other_nationality_name'</span></span>,<span class="hljs-string"><span class="hljs-string">'plr_place_of_birth_country_name'</span></span>, <span class="hljs-string"><span class="hljs-string">'plr_foot'</span></span>,<span class="hljs-string"><span class="hljs-string">'plr_height'</span></span>,<span class="hljs-string"><span class="hljs-string">'plr_player_agent'</span></span>,<span class="hljs-string"><span class="hljs-string">'from_club_name'</span></span>,<span class="hljs-string"><span class="hljs-string">'from_club_is_first_team'</span></span>, <span class="hljs-string"><span class="hljs-string">'from_clb_place'</span></span>,<span class="hljs-string"><span class="hljs-string">'from_clb_qualified_to'</span></span>,<span class="hljs-string"><span class="hljs-string">'from_clb_is_champion'</span></span>,<span class="hljs-string"><span class="hljs-string">'from_clb_is_cup_winner'</span></span>, <span class="hljs-string"><span class="hljs-string">'from_clb_is_promoted'</span></span>,<span class="hljs-string"><span class="hljs-string">'from_clb_lg_name'</span></span>,<span class="hljs-string"><span class="hljs-string">'from_clb_lg_country'</span></span>,<span class="hljs-string"><span class="hljs-string">'from_clb_lg_group'</span></span>, <span class="hljs-string"><span class="hljs-string">'from_coach_name'</span></span>, <span class="hljs-string"><span class="hljs-string">'from_sport_dir_name'</span></span>, <span class="hljs-string"><span class="hljs-string">'to_club_name'</span></span>,<span class="hljs-string"><span class="hljs-string">'to_club_is_first_team'</span></span>,<span class="hljs-string"><span class="hljs-string">'to_clb_place'</span></span>, <span class="hljs-string"><span class="hljs-string">'to_clb_qualified_to'</span></span>, <span class="hljs-string"><span class="hljs-string">'to_clb_is_champion'</span></span>,<span class="hljs-string"><span class="hljs-string">'to_clb_is_cup_winner'</span></span>,<span class="hljs-string"><span class="hljs-string">'to_clb_is_promoted'</span></span>, <span class="hljs-string"><span class="hljs-string">'to_clb_lg_name'</span></span>,<span class="hljs-string"><span class="hljs-string">'to_clb_lg_country'</span></span>, <span class="hljs-string"><span class="hljs-string">'to_clb_lg_group'</span></span>,<span class="hljs-string"><span class="hljs-string">'to_coach_name'</span></span>, <span class="hljs-string"><span class="hljs-string">'to_sport_dir_name'</span></span>, <span class="hljs-string"><span class="hljs-string">'plr_position_0'</span></span>,<span class="hljs-string"><span class="hljs-string">'plr_position_1'</span></span>,<span class="hljs-string"><span class="hljs-string">'plr_position_2'</span></span>, <span class="hljs-string"><span class="hljs-string">'stats_leag_name_0'</span></span>, <span class="hljs-string"><span class="hljs-string">'stats_leag_grp_0'</span></span>, <span class="hljs-string"><span class="hljs-string">'stats_leag_name_1'</span></span>, <span class="hljs-string"><span class="hljs-string">'stats_leag_grp_1'</span></span>, <span class="hljs-string"><span class="hljs-string">'stats_leag_name_2'</span></span>, <span class="hljs-string"><span class="hljs-string">'stats_leag_grp_2'</span></span>) cont_vars_tpl = (<span class="hljs-string"><span class="hljs-string">'nat_months_from_debut'</span></span>,<span class="hljs-string"><span class="hljs-string">'nat_matches_played'</span></span>,<span class="hljs-string"><span class="hljs-string">'nat_goals_scored'</span></span>,<span class="hljs-string"><span class="hljs-string">'from_clb_pts_avg'</span></span>, <span class="hljs-string"><span class="hljs-string">'from_clb_goals_diff_avg'</span></span>,<span class="hljs-string"><span class="hljs-string">'to_clb_pts_avg'</span></span>,<span class="hljs-string"><span class="hljs-string">'to_clb_goals_diff_avg'</span></span>,<span class="hljs-string"><span class="hljs-string">'plr_apps_0'</span></span>, <span class="hljs-string"><span class="hljs-string">'plr_apps_1'</span></span>,<span class="hljs-string"><span class="hljs-string">'plr_apps_2'</span></span>,<span class="hljs-string"><span class="hljs-string">'stats_made_goals_0'</span></span>,<span class="hljs-string"><span class="hljs-string">'stats_conc_gols_0'</span></span>,<span class="hljs-string"><span class="hljs-string">'stats_cards_0'</span></span>, <span class="hljs-string"><span class="hljs-string">'stats_minutes_0'</span></span>,<span class="hljs-string"><span class="hljs-string">'stats_team_points_0'</span></span>,<span class="hljs-string"><span class="hljs-string">'stats_made_goals_1'</span></span>,<span class="hljs-string"><span class="hljs-string">'stats_conc_gols_1'</span></span>, <span class="hljs-string"><span class="hljs-string">'stats_cards_1'</span></span>,<span class="hljs-string"><span class="hljs-string">'stats_minutes_1'</span></span>,<span class="hljs-string"><span class="hljs-string">'stats_team_points_1'</span></span>,<span class="hljs-string"><span class="hljs-string">'stats_made_goals_2'</span></span>, <span class="hljs-string"><span class="hljs-string">'stats_conc_gols_2'</span></span>,<span class="hljs-string"><span class="hljs-string">'stats_cards_2'</span></span>,<span class="hljs-string"><span class="hljs-string">'stats_minutes_2'</span></span>,<span class="hljs-string"><span class="hljs-string">'stats_team_points_2'</span></span>, <span class="hljs-string"><span class="hljs-string">'pop_log1p'</span></span>)</code> </pre> <br><p>  Ensuite, apr√®s avoir indiqu√© explicitement ce que nous pr√©voyons - le montant du transfert ( <code>fee</code> ), nous divisons au hasard nos donn√©es en 2 parties de 80% et 20%.  Sur le premier d'entre eux, nous enseignerons √† notre r√©seau de neurones, sur l'autre - pour v√©rifier l'exactitude de la pr√©diction. </p><br><pre> <code class="python hljs">ln = len(df) valid_idx = np.random.choice(ln, int(ln*<span class="hljs-number"><span class="hljs-number">0.2</span></span>), replace=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>)</code> </pre> <br><p>  Lors de la derni√®re √©tape pr√©paratoire, nous devons choisir comment mesurer la plausibilit√© de nos pr√©visions.  Ensuite, je n'ai pas choisi la m√©trique la plus standard dans la partie locale de l'univers - la m√©diane du pourcentage d'erreur ( <code>MdAPE</code> ).  Ou, plus simplement, combien de pour cent (le prix absolu d'un transfert peut diff√©rer par ordre de grandeur), nous ferons probablement une erreur dans le prix d'un transfert pris au hasard.  Il m'a sembl√© le plus proche de ce que signifie exactement l'expression ¬´pr√©cision du syst√®me de pr√©diction de transfert¬ª. </p><br><p>  Il est maintenant temps, en fait, de commencer √† apprendre le r√©seau. </p><br><pre> <code class="python hljs">data = (TabularList.from_df(df, path=path, cat_names=cat_vars, cont_names=cont_vars, procs=procs) .split_by_idx(valid_idx) .label_from_df(cols=dep_var, label_cls=FloatList, log=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) .databunch(bs=BS)) learn = tabular_learner(data, layers=layers, ps=layers_drop, emb_drop=emb_drop, y_range=y_range, metrics=exp_mmape, loss_func=MAELossFlat(), callback_fns=[CSVLogger]) learn.fit_one_cycle(cyc_len=cycles, max_lr=max_lr, wd=w_decay)</code> </pre> <br><h4 id="tochnost-predskazaniy">  Pr√©cision de pr√©diction </h4><br><p><img src="https://habrastorage.org/webt/-z/kl/zj/-zklzjwczjcogqhqq93hrxjcfc8.png"></p><br><p>  <code>Validation Error = 0.3492</code> signifie qu'apr√®s une formation sur un nouvel <code>validation set</code> donn√©es ( <code>validation set</code> , <code>validation set</code> ), le mod√®le en moyenne (m√©diane) se trompe de 34% par rapport au prix de transfert r√©el.  Et nous l'avons obtenu uniquement √† la suite de plusieurs lignes de code tir√©es du didacticiel. </p><br><p>  Erreur 34%, est-ce beaucoup ou un peu?  Tout est relatif.  La seule source comparable, dont les donn√©es peuvent √™tre consid√©r√©es comme une ¬´ <em>pr√©diction</em> ¬ª du montant du transfert, est bien entendu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">transfermarkt</a> .  Heureusement, il y a un champ dans les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">donn√©es de kaggle</a> qui montre comment ce site a √©valu√© un joueur au moment du transfert, et cela peut √™tre compar√©.  Il convient de noter ici que transfermarkt n'a jamais pr√©tendu que sa <code>market value</code> √©tait le prix de transfert probable.  Au contraire, ils ont soulign√© qu'il s'agit plut√¥t de la ¬´ <em>valeur honn√™te</em> ¬ª de l'un ou l'autre joueur.  Et combien d'argent un club particulier paiera pour cela dans une situation particuli√®re est une chose tr√®s individuelle et peut fluctuer dans un sens ou dans un autre dans des limites tr√®s larges.  Mais c'est le meilleur que nous ayons, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">comparons</a> . </p><br><p><img src="https://habrastorage.org/webt/an/jz/4l/anjz4lvbdxlbqy5s26q8gd5_vig.png"></p><br><p>  Erreur de Transfermarkt - <strong>35%</strong> , notre mod√®le - <strong>35%</strong> .  Tr√®s √©trange et, pour √™tre honn√™te, tr√®s m√©fiant. <br>  √Ä ce stade, je propose de r√©fl√©chir √† nouveau.  Un site avec une histoire √©norme, cr√©√© juste pour montrer la `` valeur '' des joueurs, qui repose sur la pleine puissance de l'effet de foule (il tire la valeur des √©valuations des visiteurs ordinaires et des professionnels du march√©) et la connaissance des experts d'une part, et le mod√®le, qui ne sait rien du football, ne voit rien √† part les donn√©es que nous lui avons fournies (et en dehors de ces donn√©es dans le monde r√©el, il y a encore beaucoup de choses que les gens avec transfermarkt prennent en compte), d'autre part, ils <strong>montrent la m√™me erreur</strong> .  De plus, notre mod√®le permet √©galement de pr√©voir le prix de location du joueur, ce que la <code>market value</code> , pour des raisons √©videntes, ne montre pas (compte tenu de ces transactions, le r√©sultat de transfermarkt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">√©tait encore pire</a> ). </p><br><p>  Honn√™tement, je pense toujours que j'ai une sorte d'erreur ici, tout est trop beau pour √™tre vrai.  Mais, n√©anmoins, allons plus loin. </p><br><p>  Un moyen facile de vous tester est d'essayer de faire la moyenne des pr√©dictions √† partir de 2 sources (mod√®les et transfermarkt).  Si les pr√©dictions sont vraiment ind√©pendantes les unes des autres et qu'il n'y a pas d'erreur g√™nante, alors le r√©sultat devrait s'am√©liorer. </p><br><p><img src="https://habrastorage.org/webt/uu/f0/ut/uuf0uts7ak4xrbr95efffferqvu.png"></p><br><p>  En effet, la moyenne des pr√©visions r√©duit l'erreur de pr√©diction √† 32% (!).  Cela peut sembler un peu, mais nous devons comprendre que nous filtrons un peu plus d'informations √† partir des donn√©es, qui sont si serr√©es au maximum. </p><br><p>  Mais ce que nous ferons ensuite, √† mon avis, est encore plus surprenant et int√©ressant, bien qu'il d√©passe le cadre du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">tutoriel fast.ai.</a> </p><br><h4 id="feature-importance">  Importance des fonctionnalit√©s </h4><br><p>  Les r√©seaux de neurones, pour ne pas dire qu'ils ne sont absolument pas m√©rit√©s, sont souvent consid√©r√©s comme une ¬´bo√Æte noire¬ª.  Nous savons quelles donn√©es nous pouvons y mettre, nous pouvons obtenir les pr√©dictions du mod√®le, nous pouvons m√™me √©valuer dans quelle mesure ses pr√©dictions sont vraies en moyenne.  Mais nous ne pouvons pas expliquer par quels crit√®res le mod√®le a ¬´pris¬ª telle ou telle d√©cision.  La structure interne du r√©seau lui-m√™me est si complexe, et surtout, non lin√©aire, qu'il est impossible de retracer directement toute la cha√Æne de prise de d√©cision et d'en tirer des conclusions significatives du monde r√©el.  Mais je veux vraiment.  J'aimerais comprendre ce qui influence le plus le montant du transfert. </p><br><p>  Eh bien, nous ne monterons pas √† l'int√©rieur du r√©seau.  Mais que signifie l'importance de chaque champ, appelons-le <strong>Feature Importance</strong> (FI)?  Une option pour comprendre l '¬´importance¬ª consiste √† calculer combien les choses vont empirer si nous n'avions pas ce champ.  Et c'est pr√©cis√©ment ce que nous pouvons mesurer.  Nous avons maintenant un outil qui fournit des pr√©visions sur n'importe quel ensemble de donn√©es.  Donc, si nous calculons simplement combien l'erreur de pr√©diction augmentera lorsque nous substituerons des donn√©es al√©atoires sur le terrain, alors nous pouvons simplement estimer dans quelle mesure (le champ) affecte le r√©sultat final, ce qui signifie √† quel point elle est importante.  Pour rester dans la distribution r√©elle des donn√©es, le champ sera rempli non seulement avec des nombres al√©atoires, mais avec des valeurs m√©lang√©es de mani√®re al√©atoire (c'est-√†-dire que nous m√©langerons simplement la colonne, par exemple, `` ann√©e de transfert '', dans le tableau d'origine).  Pour la fid√©lit√©, ce processus peut √™tre effectu√© plusieurs fois pour chaque champ en faisant la moyenne du r√©sultat.  Tout est assez simple.  Voyons maintenant √† quel point cela donne le r√©sultat: </p><br><p><img src="https://habrastorage.org/webt/ou/s8/4x/ous84xjkamb1mtigicrbsublki8.png"></p><br><p>  Mon instinct dit: "Oui et non!" </p><br><p>  D'un c√¥t√©, les champs que vous vous attendez √† voir √©taient en haut: les entra√Æneurs d'√©quipe d'o√π et o√π <code>from_coach_name</code> all√© <code>from_coach_name</code> joueur ( <code>from_coach_name</code> , <code>to_coach_name</code> ), les clubs eux-m√™mes qui ont particip√© au transfert ( <code>from_club_name</code> , <code>to_club_name</code> ), l'agent du joueur ( <code>plr_player_agent</code> ), sa renomm√©e dans les r√©seaux sociaux ( <code>pop_log1p</code> ) etc.  Mais d'un autre c√¥t√© ... Intuitivement, il ne semble pas que les noms des entra√Æneurs devraient avoir plus de poids dans le prix de transfert que, par exemple, les clubs eux-m√™mes (nous savons bien que le Benfica conditionnel est capable de vendre ses joueurs √† un prix √©lev√©).  La marque d'un entra√Æneur influence-t-elle plus fortement le prix que la marque du club?  L'arriv√©e du conditionnel Mancini oblige-t-elle tellement le club √† surpayer?  Qu'est-ce que c'est, le cas quand les donn√©es nous donnent de nouvelles informations, l√©g√®rement contre-intuitives, ou juste une erreur dans le mod√®le? </p><br><p>  Faisons les choses correctement.  En regardant de pr√®s le graphique, l'≈ìil s'accroche rapidement √† une chose √©trange.  Juste en dessous du centre, il y a 2 champs tr√®s <code>trs_year</code> et <code>season</code> <code>trs_year</code> , ils repr√©sentent l'ann√©e du transfert et la saison au cours de laquelle la transition sera effectu√©e (en g√©n√©ral, ils peuvent ne pas co√Øncider, bien que cela ne se produise pas si souvent).  Premi√®rement, il semble qu'ils devraient √™tre plus √©lev√©s, nous savons combien les prix pour les joueurs de football ont augment√© ces derni√®res ann√©es, et deuxi√®mement, ils signifient √©videmment la m√™me chose.  Que faire √† ce sujet?  R√©sumez simplement leur importance?  Pas le fait que cela puisse √™tre fait!  Mais ce que nous pouvons certainement faire, c'est appliquer la m√™me approche (m√©langer les valeurs) non pas s√©par√©ment √† ces deux domaines, mais en groupe.  Autrement dit, mesurez comment l'erreur va changer s'il y a des valeurs al√©atoires dans ces 2 colonnes √† la fois.  Eh bien, puisque nous l'avons fait au fil des ans, nous devons voir si nous avons d'autres domaines qui sont tout aussi ¬´connect√©s¬ª. </p><br><p>  Par exemple, pour un club, nous avons plusieurs param√®tres: le club lui-m√™me ( <code>club_name</code> ), ainsi qu'un ensemble d'informations √† ce sujet - de quelle ligue, pays, etc.  ( <code>club_is_first_team</code> , <code>clb_lg_name</code> , <code>clb_lg_country</code> , <code>clb_lg_group</code> ).  Ce n'est que dans certains cas que nous voulons savoir dans quelle mesure cela affecte le prix, par exemple, le pays dans <code>clb_lg_country</code> le joueur se rend s√©par√©ment ( <code>clb_lg_country</code> ), le plus souvent, il est important pour nous de comprendre quel est le poids total du champ `` club '', qui est d√©j√† dans un certain pays, une ligue, etc. . </p><br><p>  Ainsi, nous pouvons combiner tous les champs en groupes en fonction du contenu s√©mantique.  Cela nous aidera tout simplement √† conna√Ætre le domaine et le bon sens, ainsi que la ¬´proximit√©¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">calcul√©e</a> des fonctionnalit√©s.  Ce dernier montre simplement comment les champs sont en corr√©lation les uns avec les autres, c'est-√†-dire dans quelle mesure il est possible de les consid√©rer comme un seul groupe. </p><br><p>  En appliquant cette approche, nous obtenons un graphique encore plus intuitif de l'importance des champs: </p><br><p><img src="https://habrastorage.org/webt/gu/mc/ma/gumcmafyqlu-ognduuxghf02xww.png"></p><br><p>  Voil√†.  Exactement quel club le joueur ach√®te le plus affecte le montant du transfert, avec une tr√®s bonne marge.  Hi Man City, Barcelone, Zenit et, par exemple, le m√™me Benfica (apr√®s tout, ¬´ <em>influence fortement</em> ¬ª la m√™me chose sur le fait que certains clubs, au contraire, peuvent acheter des joueurs de qualit√© moins cher que le ¬´march√©¬ª).  Il me semble que la chose la plus int√©ressante dans le travail avec les donn√©es est que lorsqu'elles sont obtenues, les conclusions sont √©videntes d'une part (enfin, je doutais que l'acheteur du club ait eu la plus grande influence sur le montant du transfert), et d'autre part, c'est un peu surprenant (et les candidats pour le premier le lieu, intuitivement, pourrait √™tre quelque peu, et la s√©paration du second ne semblait pas si importante) </p><br><p>  Il y a encore beaucoup de choses int√©ressantes √† d√©couvrir.  Par exemple, le nom de l'entra√Æneur d'o√π le joueur est achet√©, du point de vue du mod√®le, est encore plus important que le club ... Que la diff√©rence soit consid√©rablement r√©duite.  Une explication logique √† cela peut √™tre trouv√©e en principe (bien que parfois elle puisse √™tre trouv√©e pour n'importe quoi).  Il y a des entra√Æneurs (Guardiola, Klopp, Benitez, Berdyev) qui adh√®rent √† une certaine id√©ologie du jeu dans diff√©rents clubs, ce qui r√©v√®le mieux ou vice versa rend certaines positions sur le terrain moins lumineuses, et la visibilit√© du joueur affecte consid√©rablement son prix.  √Ä propos des clubs, pour ainsi dire, presque impossible.  Et le fait que nous voyons des entra√Æneurs qui ne s'√©cartent pas radicalement de leurs principes du jeu beaucoup plus souvent que les clubs changent d'entra√Æneurs, mais en restant dans la m√™me philosophie (par exemple, d√©sinvolte, sauf que l'Ajax vient √† l'esprit, et Barcelone est tr√®s discutable), parle de que, peut-√™tre, certains managers r√©v√®lent des joueurs plus stables que les clubs.  Bien qu'ici, je ne tiendrais pas fermement √† ma d√©claration. </p><br><p>  Parmi les indicateurs purement statistiques, le montant le plus √©lev√© est simplement le temps pass√© par un joueur sur le terrain l'ann√©e derni√®re dans sa comp√©tition principale ( <code>stats_minutes_0</code> ).  C'est juste, tout √† fait logique, car combien ce joueur √©tait le ¬´principal¬ª dans son club la saison derni√®re semble √™tre un indicateur statistique plus universel de son succ√®s que d'autres - par exemple, le nombre de buts marqu√©s ou de cartes re√ßues. </p><br><p>  La popularit√© du joueur ( <code>pop_log1p</code> ) ferme ce groupe de 8 param√®tres les plus importants.  Il convient de rappeler que les donn√©es que nous avons pr√©sent√©es au cours des 10 derni√®res ann√©es.  Je pense que l'importance de ce domaine serait plus √©lev√©e si nous consid√©rions les 5 derni√®res ann√©es, et pour la valeur moyenne au cours de la derni√®re d√©cennie, c'est un r√©sultat tout √† fait compr√©hensible, surtout compte tenu de l'√©cart par rapport √† la prochaine place. </p><br><p>  Eh bien, la derni√®re chose sur laquelle je voudrais attirer l'attention est l'importance du champ agent ( <code>plr_player_agent</code> ).  Je laisserai cela sans commentaire, car si vous pouvez casser les marges de copies dans les litiges concernant le (in) besoin d'agents, alors il n'y a aucun doute sur le degr√© de leur influence sur le march√© des transferts moderne (bien que le mod√®le sugg√®re de ne pas le surestimer). </p><br><p><img src="https://habrastorage.org/webt/q2/al/i5/q2ali5al_krkgtsmdkn_mw5i6na.jpeg"></p><br><p>  Soit dit en passant, ce qui est peut-√™tre le plus int√©ressant dans cette m√©thode d'analyse est son accessibilit√©: il n'est pas n√©cessaire de cr√©er <em>un</em> mod√®le ¬´ <em>id√©al</em> ¬ª pour obtenir des informations sur l'importance des param√®tres.  Dans de nombreux cas, il suffit que cela pr√©dit tout au moins, soit statistiquement significativement diff√©rent de lancer une pi√®ce, et vous obtiendrez <em>d√©j√† des</em> r√©sultats qui contiennent souvent des informations int√©ressantes ou vous indiquent de quel c√¥t√© vous pouvez consulter les donn√©es. </p><br><p>  Ensuite, il est temps d'arrondir, afin de ne pas augmenter le texte si surcharg√©.  En quittant, je voudrais encore une fois inviter tous ceux qui sont int√©ress√©s par le sujet √† essayer (le meilleur, √† mon avis, pour les d√©butants) le cours de Deep Learning - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">fast.ai</a> et √† appliquer les connaissances acquises dans `` votre domaine d'expertise '', il est probable que vous serez le premier l√†-bas :) </p><br><p>  Et si vous l'aimez, je vais essayer de ma√Ætriser la deuxi√®me partie du texte sur mes exp√©riences dans lesquelles le mod√®le utilisant un outil tout aussi puissant - <strong>D√©pendance partielle</strong> vous dira: quel client de l'agence est le mieux pour devenir joueur de football, quels clubs ont la politique de transfert la plus efficace, quel entra√Æneur augmente le mieux le co√ªt des joueurs (en plus des candidats √©vidents, il existe de nombreuses ¬´marques¬ª peu promues qui valent clairement le d√©tour) et bien plus encore. </p><br><p>  Partie 2 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mod√®le de transferts de soccer: creuser plus profond√©ment</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr468107/">https://habr.com/ru/post/fr468107/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr468089/index.html">Red√©finition bas√©e sur l'√©dition: est-il possible en production?</a></li>
<li><a href="../fr468091/index.html">Le projet de loi sur la cr√©ation d'une base de donn√©es unique avec les donn√©es des citoyens adopt√© √† la Douma d'Etat en premi√®re lecture</a></li>
<li><a href="../fr468093/index.html">Nitrates dans les produits: magasins suisses vs magasins russes vs chalet d'√©t√©</a></li>
<li><a href="../fr468097/index.html">Microsoft Edge - XSS g√©n√©rique</a></li>
<li><a href="../fr468099/index.html">C / C ++ de Python (CFFI, pybind11)</a></li>
<li><a href="../fr468109/index.html">Ils disent que Samara est une ville de Javists, mais nous y conduisons un mitap PHP</a></li>
<li><a href="../fr468111/index.html">PSD2 - coup de pied pour les banques</a></li>
<li><a href="../fr468117/index.html">Ethernet, FTP, Telnet, HTTP, Bluetooth - les bases de l'analyse du trafic. R√©solution de probl√®mes sur un r√©seau avec r0ot-mi. partie 1</a></li>
<li><a href="../fr468121/index.html">Comment je ne suis pas devenu programmeur √† 35 ans</a></li>
<li><a href="../fr468125/index.html">Animation dans Asymptote</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>