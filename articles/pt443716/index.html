<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüíº üé± ‚ûó "Eu tenho um backup na minha fita." Hist√≥ria em primeira pessoa ‚ôçÔ∏è üòõ üëñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No artigo anterior, falamos sobre os novos recursos da vers√£o 4 da atualiza√ß√£o do Veeam Backup & Replication 9.5 (VBR), lan√ßada em janeiro, onde os ba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>"Eu tenho um backup na minha fita." Hist√≥ria em primeira pessoa</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/veeam/blog/443716/">  No <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo anterior,</a> falamos sobre os novos recursos da vers√£o 4 da atualiza√ß√£o do Veeam Backup &amp; Replication 9.5 (VBR), lan√ßada em janeiro, onde os backups na fita n√£o foram mencionados conscientemente.  A hist√≥ria sobre esta √°rea merece um artigo separado, porque havia realmente muitos recursos novos. <br><br>  <i>- QA pessoal, escrevem um artigo?</i> <i><br></i>  <i>- porque n√£o!</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/no/jg/36/nojg36lajf54g2qfjil2wmnesgm.jpeg"></div><a name="habracut"></a><br><h1>  Unidades de fita no s√©culo XXI </h1><br>  O armazenamento de dados em fitas magn√©ticas (cassetes, <b>teips</b> , como os chamamos em P&amp;D) n√£o se limita ao computador ZX-Spectrum, que era coisa do passado, um jogo para o qual poderia ser carregado na RAM de 48 kb de uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fita</a> por v√°rios minutos.  Durante um quarto de s√©culo, a velocidade e a capacidade dos cassetes aumentaram em 6-7 ordens de magnitude.  Essa compara√ß√£o n√£o est√° totalmente correta e o padr√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">LTO</a> n√£o est√° acompanhando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a lei de Moore</a> .  No entanto, as tecnologias modernas permitem gravar 12 terabytes de dados em um quil√¥metro de fita (at√© 30 terabytes no modo de compacta√ß√£o), de modo que a unidade de 160 d√≥lares deixa os concorrentes para tr√°s no custo do armazenamento de longo prazo de uma grande quantidade de dados, mesmo levando em considera√ß√£o os investimentos em equipamentos de grava√ß√£o / leia.  Os dados nessas fitas s√£o armazenados de maneira confi√°vel por 15 a 30 anos. <br><br>  Eu virei do outro lado.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Os v√≠rus de ransomware</a> atingiram um novo n√≠vel recentemente.  Eles podem esperar seu tempo na infraestrutura de uma grande empresa por semanas e meses e, com o advento de outra vulnerabilidade de dia zero, podem destruir (n√£o sem ajuda humana, porque h√° muito dinheiro em jogo) n√£o apenas todos os dados, mas tamb√©m todos os backups que podem ser alcan√ßados. .  Aqui est√° um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">novo exemplo de</a> quando uma empresa teve que pagar ransomware.  O chamado <b>gap a√©reo</b> , ou seja, backups fisicamente isolados da infraestrutura, tornou-se, de fato, a √∫nica salva√ß√£o confi√°vel de tais hist√≥rias.  A fita magn√©tica aqui √© uma das solu√ß√µes atemporais. <br><br><img src="https://habrastorage.org/webt/40/dt/bq/40dtbqtgogepivirfrdlofwocaw.jpeg"><br><br>  Mas uma especifica√ß√£o e as novidades tecnol√≥gicas de ferro e b√°rio-ferrita dos principais fabricantes (IBM, HPE, Oracle, Dell) para prote√ß√£o confi√°vel de dados n√£o s√£o suficientes, voc√™ precisa de um bom software.  Na Veeam, toda a nossa equipe est√° envolvida em backups em fita, cerca de 10 pessoas analisam, planejam, pesquisam, desenvolvem e testam diariamente.  Voc√™ pode ver os resultados deste trabalho em artigos anteriores ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dois</a> ).  O que foi feito no ano passado? <br><br><h1>  Gloss√°rio </h1><br>  H√° uma escolha entre liberdades em rela√ß√£o √† l√≠ngua nativa e complicando a legibilidade do clericalismo.  Eu prefiro o primeiro, ent√£o pe√ßo desculpas antecipadamente se algu√©m g√≠ria da lista abaixo machucar os olhos.  Aqui vou relembrar brevemente o que um termo espec√≠fico significa. <br><br><div class="spoiler">  <b class="spoiler_title">Luminares VBR esta parte pode ser pulada</b> <div class="spoiler_text">  <b>Joba</b> - trabalho - trabalho de backup.  Na verdade, todo o VBR √© constru√≠do no trabalho.  Al√©m de backup e replica√ß√£o, tamb√©m pode ser copiado para fita magn√©tica (trabalho de backup em fita, trabalho de fita).  Farei uma reserva de que a restaura√ß√£o de uma c√≥pia de backup (restaura√ß√£o) tamb√©m √© um trabalho, mas neste artigo, essa palavra significa backup. <br><br>  <b>Storaj</b> - armazenamento - nome estabelecido historicamente.  Estes s√£o arquivos no <b>reposit√≥rio</b> (reposit√≥rio - armazenamento), contendo c√≥pias de backup - <b>completas</b> e <b>incrementais</b> .  Em uma hist√≥ria, pode haver uma ou v√°rias m√°quinas virtuais. <br><br>  <b>Cadeia</b> - uma cadeia √© uma sequ√™ncia de hist√≥rias relacionadas.  Para restaurar dados do n-√©simo armazenamento incremental, s√£o necess√°rios todos os anteriores do (n-1) -st para o 1¬∫ e para o armazenamento completo, aos quais o primeiro incremental se refere. <br><br>  <b>Fonte</b> , <b>destino</b> - fonte, destino.  Origem √© a entidade original que o trabalho processa.  No caso de backups / r√©plicas, geralmente √© uma m√°quina virtual no hipervisor.  No caso de trabalho de fita, o backup √© o pr√≥prio trabalho de backup (bem, ou arquivos no caso de arquivo em trabalhos de fita).  Um destino da tarefa de backup √© um reposit√≥rio onde os backups s√£o armazenados.  Para trabalhos em fita, esse √© um pool de m√≠dias. <br><br>  <b>Pool de</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">m√≠dia</a> - <b>pool de</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">m√≠dia</a> - um pool de m√≠dia de armazenamento, no nosso caso - fitas.  Um cont√™iner l√≥gico criado pelo usu√°rio e contendo os cassetes de uma ou mais bibliotecas.  Portanto, o trabalho de fita sempre tem um pool de m√≠dias como destino, ou seja, os dados s√£o gravados n√£o em uma fita espec√≠fica ou em qualquer fita da biblioteca, mas em um conjunto espec√≠fico deles.  O pool de m√≠dias possui uma configura√ß√£o para o tempo de armazenamento de dados, ap√≥s o qual o cartucho pode ser substitu√≠do.  O usu√°rio pode criar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conjuntos</a> padr√£o e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">conjuntos GFS</a> .  Agora, cada uma dessas esp√©cies pode ser WORM e n√£o WORM, mais sobre isso abaixo. <br><br>  <b>Conjunto de</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">m√≠dias</a> - <b>conjunto de</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">m√≠dias</a> - um conjunto de fitas no pool de m√≠dias em que os backups / arquivos s√£o gravados continuamente.  Para conjuntos GFS, os conjuntos de m√≠dias tamb√©m est√£o vinculados a um intervalo (por exemplo, anual - anualmente), os cassetes giram apenas dentro do intervalo. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><b>Drive</b> , <b>changer</b></a> - elementos da biblioteca de fitas.  Uma unidade l√™ e rebobina uma fita; um trocador √© um rob√¥ que move as fitas entre os slots de armazenamento, descarrega e a unidade.  Existem <b>unidades</b> independentes (independentes - independentes), o papel do trocador aqui √© desempenhado por uma pessoa.  Para uma unidade, √© necess√°rio um driver do fabricante instalado corretamente na m√°quina Windows em que a biblioteca est√° conectada;  podemos trabalhar com um trocador sem drivers, usando SCSI nativo. <br></div></div><br><h1>  Inquilino para fita.  Provedor protegido - clientes protegidos </h1><br>  Imediatamente trunfo na mesa.  O recurso mais ambicioso de nossa atualiza√ß√£o, projetado para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">provedores de nuvem</a> que usam VBR em sua infraestrutura.  O desenvolvimento foi iniciado h√° dois anos.  Logo percebemos que n√£o ter√≠amos tempo de lidar com uma tarefa t√£o s√©ria para o pr√≥ximo lan√ßamento, fizemos uma breve pausa e finalmente lan√ßamos um recurso na 9.5 Atualiza√ß√£o 4. <br><br>  Em resumo, agora os provedores t√™m a oportunidade de copiar backups de seus clientes em cassetes usando trabalho de fita no pool GFS.  Isso oferece aos provedores - e esses s√£o caras muito grandes, queridos pelo nosso cora√ß√£o e pelo departamento comercial - duas possibilidades: <br><br><ul><li>  proteja seus clientes (inquilinos, inquilinos - inquilinos) da perda de dados como resultado de exclus√£o acidental ou problemas de infraestrutura ("inunda√ß√£o na sala do servidor"); </li><li>  forne√ßa aos inquilinos um servi√ßo adicional para restaurar dados de um backup antigo, que h√° muito tempo foi removido do reposit√≥rio na nuvem de acordo com a pol√≠tica de armazenamento de dados, mas ainda permanece em fita. </li></ul><br>  Do ponto de vista do marketing, a funcionalidade √© muito "saborosa", da nossa - n√£o menos dif√≠cil de implementar. <br><br><h2>  Desenvolvimento </h2><br>  O principal problema encontrado √© a criptografia de dados.  A maioria dos backups na nuvem √© criptografada, dizem estat√≠sticas sobre ‚Öî do total.  Para n√≥s, esse n√∫mero foi uma surpresa, assumiu-se que quase tudo est√° criptografado, mas n√£o - muitos clientes parecem estar incondicionalmente confiantes em seus fornecedores. <br><br>  O paradigma √© simples: o provedor n√£o deve ser capaz de descriptografar os dados de seus inquilinos.  Ao mesmo tempo, como parte do novo recurso, √© necess√°rio que o lado do provedor abra o armazenamento com backups.  Isso √© necess√°rio para transferir blocos de dados, por exemplo, para criar um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">backup completo virtual</a> .  O principal √© fazer isso independentemente do inquilino, quando as chaves necess√°rias n√£o s√£o transmitidas ao provedor durante a execu√ß√£o do trabalho. <br><br>  A solu√ß√£o para esse problema, usada, ali√°s, em outro recurso importante do complemento lan√ßado - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">N√≠vel de Capacidade</a> - consiste em adicionar uma chave de criptografia adicional.  A chave de arquivamento (chave de arquivamento) √© armazenada no banco de dados do provedor em formato criptografado.  De acordo com um esquema complicado do lado do provedor, ele pode ser usado para abrir a loja, mover e criptografar novamente os blocos de dados entre as lojas (cada um tem sua pr√≥pria chave), mas os dados em si n√£o podem ser descriptografados. <br><br><img src="https://habrastorage.org/webt/ly/jv/3n/lyjv3ncjo_oymwfosymomr8jqsc.jpeg"><br>  <sup>Esquema complicado (vers√£o de trabalho)</sup> <br><br>  Acrescento que todos os engenheiros de P&amp;D gostam muito de criptografia em nosso produto, no entanto, ningu√©m sabe em detalhes como ele funciona.  (Ainda havia uma piada "e por que funciona", mas os editores n√£o sentiam falta dela.) <br><br><h2>  Teste </h2><br>  Centenas de bugs foram registrados no recurso.  As √°reas mais dif√≠ceis s√£o criptografia, interface do usu√°rio, problemas com a restaura√ß√£o. <br><br>  Do ponto de vista dos testes, a grande variabilidade representava a ‚Äúcombinat√≥ria‚Äù dos tipos e tipos de trabalhos e reposit√≥rios de inquilinos - quero dizer a origem e o destino ao restaurar backups na infraestrutura.  Tudo isso est√° ligado √† l√≥gica dentro da estrutura do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">modelo GFS</a> (incluindo o novo - paralelismo e conjuntos de m√≠dia di√°rios, mais sobre isso abaixo) e, em geral, √†s especificidades da nuvem que s√£o incomuns para as dicas.  Lembre-se de temperar com bastante criptografia.  Para continuar a met√°fora, comemos muito desse prato - mas tamb√©m provamos de todos os lados. <br><br><img src="https://habrastorage.org/webt/oh/0r/td/oh0rtdrrznov74bycbusv3ehjqo.png"><br>  <sup>Fragmento do plano de teste</sup> <br><br><h2>  Como resultado </h2><br>  Uma descri√ß√£o detalhada pode ser encontrada no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">manual do usu√°rio</a> (at√© agora em ingl√™s): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">backup</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">recupera√ß√£o</a> .  Vou me debru√ßar sobre os pontos principais. <br><br><h3>  Backup </h3><br>  O provedor adiciona inquilinos ao trabalho teip com o pool GFS como destino.  Se houver uma licen√ßa na nuvem na segunda etapa do assistente, a op√ß√£o <b>Inquilinos</b> estar√° dispon√≠vel.  Voc√™ pode adicionar todos os inquilinos de uma vez ou separadamente, ou pode escolher apenas uma cota separada (mas n√£o uma subcota) de um inquilino individual.  Voc√™ n√£o pode misturar backups de inquilino e backups locais regulares no mesmo trabalho. <br><br><img src="https://habrastorage.org/webt/l-/cq/6n/l-cq6nkc0caco4speq4accpw8kw.png"><br><br>  O restante das tinturas √© quase completamente id√™ntico ao trabalho usual no pool do GFS. <br><br>  A restaura√ß√£o de dados √© poss√≠vel tanto no lado do provedor quanto no pr√≥prio inquilino. <br><br><h3>  Recupera√ß√£o do lado do provedor </h3><br>  Realizado atrav√©s de um novo assistente.  Aqui voc√™ j√° pode ir para um trabalho separado, toda a cadeia que estava no reposit√≥rio em um determinado dia √© restaurada. <br><br><img src="https://habrastorage.org/webt/hs/zb/dq/hszbdqv2oy0tnjuiquaoqsocrha.png"><br><br>  Existem tr√™s op√ß√µes de restaurantes: <br><br><ol><li>  Na localiza√ß√£o original.  Nesse caso, o backup original, se houver, √© exclu√≠do;  trabalhos de inquilino s√£o reconfigurados automaticamente para a cadeia restaurada.  Entende-se que essa restaura√ß√£o ser√° geralmente invis√≠vel para o cliente, apenas por um curto per√≠odo de tempo ser√° desconectada do reposit√≥rio na nuvem. </li><li>  Em uma nova cota / reposit√≥rio.  Um provedor pode, por exemplo, criar uma conta tempor√°ria separada para esse fim, que ser√° exclu√≠da posteriormente.  O backup aparece na infraestrutura do inquilino ap√≥s a sincroniza√ß√£o com o banco de dados do provedor. </li><li>  Apenas em uma unidade de servidor Linux ou Windows registrada na infraestrutura do provedor.  Al√©m disso, essa cadeia pode ser gravada em uma unidade flash e enviar inquilino. </li></ol><br><img src="https://habrastorage.org/webt/sl/wt/ln/slwtlntmc4rklwog0bnawpphmsw.png"><br><br><h3>  Recupera√ß√£o de inquilino </h3><br>  Essa op√ß√£o implica que o cliente tenha sua pr√≥pria infraestrutura de servi√ßos e uma grande quantidade de dados para o restaurante.  O provedor pode enviar fisicamente a fita com os backups gravados para o cliente pelo servi√ßo de entrega, ele a cataloga em seu equipamento, descriptografa as fitas e os backups e trabalha com os backups como se ele mesmo os tivesse gravado em fita.  Aqui est√° um truque para n√£o baixar terabytes na WAN. <br><br><h1>  Melhorias em larga escala no pool GFS </h1><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Os</a> pools de m√≠dias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GFS</a> apareceram no VBR h√° dois anos, na vers√£o 9.5.  Na atualiza√ß√£o mais recente, tanto em rela√ß√£o √† apar√™ncia do recurso Inquilino para fita, quanto a pedido dos usu√°rios, aprimoramos bem essa funcionalidade. <br><br><h2>  Conjuntos di√°rios de m√≠dia </h2><br>  Um novo conjunto <b>di√°rio de</b> m√≠dia apareceu.  Agora, no pool do GFS, voc√™ pode armazenar backups todos os dias e n√£o apenas concluir, mas tamb√©m incrementalmente.  Estes √∫ltimos ocupam significativamente menos espa√ßo, e isso foi feito para economizar fita.  Entende-se que esses cassetes s√£o rotacionados constantemente na biblioteca, n√£o transportados para armazenamento remoto.  Ao mesmo tempo, para um restaurante a partir de um ponto incremental, voc√™ precisar√° das fitas de um dos principais meios de comunica√ß√£o (semanal, mensal, trimestral ou anual).  √â imposs√≠vel ativar a m√≠dia di√°ria definida sem incluir a semanal, para que na maioria dos casos sejam necess√°rios cassetes semanais para restaurar a partir de uma c√≥pia incremental.  Eles est√£o sempre na biblioteca ou s√£o armazenados em um armaz√©m n√£o t√£o remoto. <br><br><img src="https://habrastorage.org/webt/hw/89/hb/hw89hbkwt8n5_labggo84mg_jds.png"><br><br>  A l√≥gica para trabalhar com trabalhos de fita no pool de m√≠dia GFS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">n√£o</a> √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a mais f√°cil</a> , os escritores t√©cnicos n√£o permitem mentir.  Se, em poucas palavras, omitir os detalhes, apenas os backups completos (incluindo backups virtuais completos) s√£o copiados para os conjuntos de m√≠dias semanais e s√™nior, um para cada data, e para o backup di√°rio todos os backups que est√£o no reposit√≥rio do dia atual, porque o backup -O trabalho pode come√ßar mais de uma vez por dia. <br><br><h2>  Simultaneidade, hora de in√≠cio e espera nos pools de GFS </h2><br>  Agora, a grava√ß√£o paralela de v√°rias cadeias ou o trabalho em v√°rias unidades de biblioteca tamb√©m √© poss√≠vel em pools de m√≠dia GFS (anteriormente - apenas em comum).  Ele est√° inclu√≠do na etapa <b>Op√ß√µes</b> do pool de m√≠dias. <br><br><img src="https://habrastorage.org/webt/50/al/mh/50almhfbumzpwdqsxy8zzfgur2w.png"><br><br>  <b>Um esclarecimento importante</b> : o mesmo arquivo √© sempre gravado no mesmo fluxo; portanto, no caso de v√°rias m√°quinas virtuais grandes, √© recomend√°vel ativar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a configura√ß√£o por VM no reposit√≥rio</a> para que o backup consista em v√°rias cadeias. <br><br>  Al√©m disso, tornou-se poss√≠vel escolher <b>o hor√°rio de in√≠cio do trabalho do GFS</b> .  Muitos usu√°rios n√£o gostaram de come√ßar √† meia-noite e esperar quase o dia inteiro at√© o t√©rmino do trabalho de fornecimento.  Agora, esse hor√°rio pode ser definido, por exemplo, no final da noite, quando j√° existe algo para copiar em fita.  Al√©m disso, a pedido dos usu√°rios, colocamos nas configura√ß√µes avan√ßadas uma op√ß√£o que anteriormente s√≥ podia ser ativada com a chave do registro.  Basta selecionar <b>Processar o ponto de restaura√ß√£o mais recente em vez de esperar</b> - e o que est√° no reposit√≥rio no momento do in√≠cio do trabalho de fita (o ponto de ontem, por exemplo) √© copiado para a fita, n√£o h√° nenhuma espera. <br><br><img src="https://habrastorage.org/webt/5c/lw/tr/5clwtrg4ea-h_cinvjj4cbcnwb8.png"><br><br><h1>  Trabalho aprimorado com v√°rias bibliotecas </h1><br>  Ser√° sobre a situa√ß√£o em que mais de uma biblioteca √© adicionada a um pool de m√≠dias.  N√≥s j√° apoiamos isso antes, mas, de tempos em tempos, os clientes vinham com queixas sobre comportamentos n√£o muito previs√≠veis. <br><br><h2>  Was </h2><br><img src="https://habrastorage.org/webt/lm/em/zb/lmemzbkxcz0vs8vjamt2u7xt9xu.png"><br><br>  Por exemplo, o trabalho de fita foi iniciado, foram necess√°rias duas unidades na primeira biblioteca, mas as configura√ß√µes de simultaneidade permitem o uso de 4 unidades ao mesmo tempo.  Esse trabalho deve mudar para a segunda biblioteca do pool de m√≠dias e us√°-lo tamb√©m, ou ser√° um desperd√≠cio de recursos? <br><br>  Outro caso.  Foi selecionada uma op√ß√£o para alternar pela condi√ß√£o ‚Äún√£o h√° cassetes dispon√≠veis‚Äù; na primeira biblioteca, h√° apenas um cassete, mas todos os dados s√£o potencialmente colocados nele.  No entanto, as configura√ß√µes permitem escrever em paralelo em duas fitas.  A segunda biblioteca deve estar envolvida neste caso? <br><br>  Decidimos colocar essa √°rea em ordem, possibilitando a personaliza√ß√£o expl√≠cita do comportamento. <br><br><h2>  Tornou-se </h2><br><img src="https://habrastorage.org/webt/jq/wc/0d/jqwc0dneyn9cpqpkwoqq6fzyno4.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">As bibliotecas no pool de m√≠dias</a> pareciam fun√ß√µes - <b>ativas</b> e <b>passivas</b> .  E o pr√≥prio pool de m√≠dias possui dois modos: √† prova de falhas ou failover e <b>paralelo</b> .  Agora, dependendo dos requisitos, voc√™ pode configurar o pool de m√≠dias de maneiras diferentes. <br><br><ul><li>  Se voc√™ possui v√°rias bibliotecas de pares e precisa paralelizar a grava√ß√£o, ative o modo de grava√ß√£o paralela, para que todas as bibliotecas precisem receber fun√ß√µes ativas.  Nesse caso, as novas fitas e unidades ser√£o ativadas imediatamente, assim que surgir a necessidade, independentemente da biblioteca em que estejam.  Ainda h√° prioridade - primeiro, tentaremos encontrar recursos na biblioteca localizada mais acima na lista. </li><li>  Se houver uma biblioteca principal e uma unidade antiga ou aut√¥noma em reserva, ative o modo feylover colocando a biblioteca principal no topo da lista e escolhendo uma fun√ß√£o passiva para dispositivos de backup.  A mudan√ßa para esse dispositivo ocorrer√° somente quando for realmente necess√°rio que o trabalho funcione pelo menos de alguma forma.  Essa situa√ß√£o ser√° considerada anormal, a qual receber√° uma notifica√ß√£o por correio. </li></ul><br>  H√° uma situa√ß√£o mais complicada que ainda n√£o suportamos - v√°rias bibliotecas ativas com passivas.  O feedback mostrar√° se h√° necessidade de tais configura√ß√µes e se √© necess√°rio "concluir" o recurso no futuro.  Pr√°tica padr√£o. <br><br><h1>  Suporte WORM </h1><br>  <b>WORM</b> - Write Once Read Many - fitas que n√£o podem ser apagadas ou sobrescritas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no n√≠vel do ferro</a> s√≥ podem acrescentar dados.  Seu uso obrigat√≥rio √© regulado pelas regras de algumas organiza√ß√µes, por exemplo, aquelas que trabalham no campo da medicina.  O principal problema com essas fitas antes era que o VBR durante o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">invent√°rio</a> ou a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cataloga√ß√£o</a> registrava um cabe√ßalho que n√£o podia mais ser apagado no futuro, e os trabalhos de fita ca√≠am com um erro durante essa tentativa. <br><br>  Na atualiza√ß√£o 9.5 9, o suporte completo para essas fitas √© implementado.  Adicionados pools de m√≠dia WORM, regulares e GFS, onde voc√™ pode colocar apenas fitas desse tipo. <br><br><img src="https://habrastorage.org/webt/jw/xn/kh/jwxnkhju_i7nadbdv3y2nnuubzg.png"><br><br>  As cassetes novas t√™m um √≠cone azul "congelado".  Do ponto de vista do usu√°rio, trabalhar com cassetes WORM n√£o √© diferente de trabalhar com cassetes comuns. <br><br>  A "alimenta√ß√£o" dos cassetes √© determinada inicialmente pelo sufixo do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">c√≥digo de barras</a> ; se o c√≥digo de barras neles for regular ou ileg√≠vel, a unidade fornecer√° informa√ß√µes quando o cartucho for inserido pela primeira vez.  Coloque as fitas WORM em um pool de m√≠dia comum e grave nelas n√£o funcionar√°.  Do engra√ßado: j√° havia usu√°rios que colavam c√≥digos de barras WORM em cassetes comuns e ficaram surpresos com as mudan√ßas em sua infraestrutura ap√≥s a atualiza√ß√£o. <br><br><h2>  Chip de cartucho </h2><br>  Juntamente com a introdu√ß√£o de cassetes n√£o regrav√°veis, eles come√ßaram a trabalhar com o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">chip</a> .  N√≥s n√£o usamos atributos padr√£o no chip antes, agora escrevemos e lemos alguns deles, mas n√£o os percebemos como a principal fonte de dados.  A principal diretriz ainda √© o t√≠tulo da fita.  Essa decis√£o ficou correta: ap√≥s um m√™s ap√≥s o lan√ßamento, vemos como o "zool√≥gico" do ferro do usu√°rio traz surpresas em termos de trabalho com o chip. <br><br><h1>  Backup em fita de volumes NDMP </h1><br>  Concluindo, sobre o recurso mais solicitado pelo n√∫mero de coment√°rios desta atualiza√ß√£o.  O backup dos volumes NDMP para fitas ficou dispon√≠vel.  √â necess√°rio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">adicionar um servidor NDMP √†</a> infraestrutura VBR, ap√≥s o qual ser√° poss√≠vel selecionar volumes desse host no trabalho de arquivo.  Eles caem no cassete na forma de arquivos com um atributo especial para distingui-los da cataloga√ß√£o usual. <br><br><img src="https://habrastorage.org/webt/de/_q/wn/de_qwns8hgdyko372yoji6jhamq.png"><br><br>  Na primeira implementa√ß√£o, existem algumas limita√ß√µes: extens√µes n√£o s√£o suportadas, al√©m de backup e restaura√ß√£o de apenas o volume completo, mas n√£o de arquivos individuais, √© poss√≠vel.  O backup funciona atrav√©s do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dump</a> (no caso da NetApp - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ufsdump</a> ), existem algumas peculiaridades: o n√∫mero m√°ximo de pontos incrementais √© 9, ap√≥s o qual um backup completo √© for√ßado. <br><br><h1>  Em conclus√£o </h1><br>               VBR 9.5 Update 4.    : <br><br><ul><li>    -    -; </li><li>   Tape Operator (   ,     ‚Äì    Restore Operator); </li><li>   include/exclude-   - ( NDMP); </li><li>     - (    ,      ,    ,     -      ‚Äì   , ); </li><li>         ; </li><li>       ,  ,      /     ,   ; </li><li>   . </li></ul><br><h1>  Links √∫teis </h1><br>         : <br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">      VBR 9.5 Update 4</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   ¬´     Veeam   ¬ª</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   ¬´7        -¬ª</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  ,    ( .)</a> </li><li>         ¬´  ¬ª (,    ) ‚Äì   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> .      95 ‚Äì 102. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt443716/">https://habr.com/ru/post/pt443716/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt443702/index.html">Como delegar relat√≥rios simples ao rob√¥. Escrevendo um bot no Python e no Google BigQuery</a></li>
<li><a href="../pt443704/index.html">De acordo com os resultados do IPO de 2019, 5 mil novos milion√°rios podem aparecer no Vale do Sil√≠cio</a></li>
<li><a href="../pt443708/index.html">A miss√£o Chang'e 4 √© o terceiro dia lunar. Rover "Yutu-2" em busca de ... pedras</a></li>
<li><a href="../pt443710/index.html">Desafiadores de Java # 4: Comparando objetos com equals () e hashCode ()</a></li>
<li><a href="../pt443714/index.html">ControlValueAccessor e contenteditable em Angular</a></li>
<li><a href="../pt443718/index.html">Jogo de fantasia com 300 mil corridas</a></li>
<li><a href="../pt443720/index.html">Detalhes</a></li>
<li><a href="../pt443722/index.html">Design e nomea√ß√£o de filas</a></li>
<li><a href="../pt443724/index.html">AMD Radeon VII: chip de √∫ltima gera√ß√£o (parte 1)</a></li>
<li><a href="../pt443726/index.html">Recursos de configura√ß√£o da Palo Alto Networks: SSL VPN</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>