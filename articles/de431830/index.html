<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎷 👈🏾 🖍️ Erweiterung für Chrom: Erstellung, Veröffentlichung, Erfahrung 👩‍👩‍👧‍👦 🏆 ↗️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Auf der Suche nach neuen Plattformen für Aktivitäten habe ich auf die "Widgets" von Chrom aufmerksam gemacht, die ich seit langer Zeit benutze, aber i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erweiterung für Chrom: Erstellung, Veröffentlichung, Erfahrung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431830/"> Auf der Suche nach neuen Plattformen für Aktivitäten habe ich auf die "Widgets" von Chrom aufmerksam gemacht, die ich seit langer Zeit benutze, aber ich habe ihnen nie eine Bedeutung beigemessen.  Ich wollte sofort versuchen, etwas umzusetzen. <br><br>  Die Idee war, einen Task-Manager für den Entwickler (und nicht nur) zu erstellen, der immer zur Hand ist.  Es sollte die aktuellen <i>Trello-</i> und <i>Jira-Tickets</i> , Anfragen an <i>Gitlab</i> usw. <i>angezeigt</i> haben.  Dies sind die Dinge, nach denen ich normalerweise gesucht habe, indem ich Schlüsselwörter in die Adressleiste des Browsers eingegeben habe, z. B. "jira PM-20". <br><br><img src="https://habrastorage.org/webt/uk/1y/qz/uk1yqzybao8vdhc0styudgtb9r0.png"><br>  <font color="gray"><i>Chrome-Erweiterung</i></font> <br><a name="habracut"></a><br>  Ich wusste mit Sicherheit, dass Browsererweiterungen normale HTML-Seiten sind, die mit JS-Skripten betrieben werden.  Aber er hatte keine Ahnung, wie er sie erschaffen sollte.  Das erste, was Google mir zu diesem Thema gab, war <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ein Artikel auf Medium</a> , keine offizielle Dokumentation.  Es war sogar noch besser, weil  Es war ein Übersichtsartikel des einfachsten Widgets von der Idee bis zur Veröffentlichung. <br><br>  Der Artikel brachte mich auf die Idee, dass die Entwicklung eines "Widgets" nicht zu schwierig ist.  Ich fing sofort an, "Hallo Welt!" Zu erschaffen. <br><br><h1>  Struktur </h1><br><img src="https://habrastorage.org/webt/qy/ur/1k/qyur1knwe_yms0xfwkfgshzy63a.png"><br><br>  Es stellte sich heraus, dass Sie <i>mainfest.json</i> im Stammverzeichnis des Projekts erstellen <i>müssen</i> .  Es beschreibt die Erweiterung: Name, Beschreibung, Autor, Symbol, Berechtigung usw.  Ich habe die erste Version gemacht, ohne die Dokumentation zu studieren. <br><br><img src="https://habrastorage.org/webt/ui/yf/q5/uiyfq5fyk9jngrs9wct5qfyf7sg.png"><br>  <font color="grey"><i>Erstes manifest.json</i></font> <br><br>  Mit Erweiterungen können Sie js-Skripte im Hintergrund ausführen, die auch dann etwas bewirken, wenn der Benutzer sie nicht verwendet.  Ich habe diese Funktionalität sehr oberflächlich empfunden, nur um zu verstehen, wie sie funktionieren kann.  Er hat einfach den Titel im &lt;h1&gt; Widget geändert. <br><br>  Von Interesse für mich war die HTML-Seite selbst, die angezeigt wird, wenn ich auf das Symbol im Browser <i>klicke.</i> In meinem Manifest heißt sie <i>popup.html</i> . <br><br>  Diese Seite kann übrigens wie jede Site im Browser geöffnet werden. Nur die Chrome-Erweiterung, zum Beispiel die <font color="blue"><i>Chrome-Erweiterung: // id-widget-in-webstore / popup.html,</i></font> wird als „Protokoll“ verwendet.  Auf diese Weise können Sie den Quellcode jeder von Ihnen installierten Erweiterung anzeigen. <br><br>  Es funktioniert genauso wie jede Website, mit Ausnahme einiger Funktionen, zum Beispiel: Klick-Links funktionieren nur mit <i>target = "_ blank"</i> .  Es gibt vom Entwickler kontrollierte technische Einschränkungen, z. B. <i>Inhaltssicherheitsrichtlinien</i> oder <i>Berechtigungen</i> für Browserfunktionen, die vom Benutzer angefordert werden. <br><br><h1>  Führen Sie die Erweiterung aus </h1><br>  Nachdem Sie einen Ordner mit <i>manifest.json</i> und <i>popup.html erstellt haben</i> , können Sie ihn bereits als Widget starten.  Auf der Service-Seite <i>chrome: // extensions chrome: // extensions</i> befindet sich die Schaltfläche zum <i>Entpacken der Erweiterung</i> .  Wählen Sie damit den Ordner aus <br><br><img src="https://habrastorage.org/webt/jg/nc/ha/jgnchavdydr1i6hp1ymjeawu3w4.png"><br><br>  und die Erweiterung wird sofort in der Liste der „Widgets“ neben der Adressleiste angezeigt. <br><br>  Ab diesem Zeitpunkt kann die Erweiterung bereits getestet werden: Ändern Sie <i>popup.html</i> und sehen Sie sich die Änderungen an, indem Sie <i>das</i> „Widget“ erneut <i>öffnen</i> , indem Sie auf das entsprechende Symbol klicken. <br><br><h1>  Im Webstore veröffentlichen </h1><br>  Die Möglichkeit, die ersten 20 Erweiterungen zu veröffentlichen, kostet zunächst <b>5 US-Dollar</b> .  Dies geschieht im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dashboard des</a> Webstores. Dazu müssen Sie das Zip-Archiv des Inhalts des Erweiterungsordners ausfüllen und an Werbetexten und Bildern arbeiten. <br><br><img src="https://habrastorage.org/webt/hi/wi/mx/hiwimxrg4wexfpgqrokedvq3qnm.png"><br>  <font color="grey"><i>Vorbereiten der Veröffentlichung einer Erweiterung</i></font> <br><br>  Der erste Teil der Erweiterungsbeschreibung wird in der <i>Beschreibungseigenschaft</i> des Erweiterungsmanifests angezeigt, der Rest wird der detaillierten Beschreibung in der Erweiterungsverwaltung im Webstore hinzugefügt. <br><br>  Die Erweiterung verfügt über flexible Veröffentlichungseinstellungen: Sie können Regionen der Welt für die Veröffentlichung sowie die Sichtbarkeit der Erweiterung auswählen. <br><br><img src="https://habrastorage.org/webt/tm/uq/ly/tmuqlyxnqnmgrpm0znpaatcubru.png"><br><br>  Es muss beachtet werden, dass in anderen Ländern die Erweiterung nicht angezeigt wird, wenn Sie nur die Russische Föderation veröffentlichen.  Ich bin in Thailand darauf gestoßen: Ich konnte nicht verstehen, warum die Erweiterung nach 2 Tagen nicht im Geschäft durchsucht wird, auch nicht unter ihrem direkten Namen. <br><br><h1>  Erweiterte Optionen </h1><br>  Ich habe die notwendigen Schritte beschrieben, um eine einfache Erweiterung zu veröffentlichen, damit der Prozess klar ist.  Jetzt möchte ich einige Details zum Schreiben eines komplexeren „Widgets“ hervorheben. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qq/gw/_j/qqgw_jneinomo-x5se1kxul67qk.png"></div><br>  Das Wesentliche meiner Erweiterung ist die Verwendung der APIs anderer Personen, um Informationen abzurufen.  Dazu benötige ich mindestens localStorage, um mich an Autorisierungstoken zu erinnern. <br><br>  Ich habe in meinem Manifest <i>"Berechtigungen": ["Speicher"] verwendet</i> . <br><br><h2>  OAuth2 </h2><br>  In den meisten Fällen bieten API-Entwickler ein OAuth2-Protokoll zur Autorisierung an. <br><br>  Wenn Sie mit diesem Protokoll nicht vertraut sind: Es bietet einen sicheren Prozess der Authentifizierung und Autorisierung der Anwendung im Namen des Benutzers ohne Zugriff auf das Login / Passwort dieser Anwendung. <br><br>  Das Protokoll beschreibt verschiedene <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Methoden zur Autorisierung</a> .  Idealerweise sollten Sie den <b>Authorization Code Flow verwenden, bei</b> dem davon <b>ausgegangen wird,</b> dass die Anwendung über ein <i>Backend verfügt</i> .  Die API leitet den Benutzer mit dem Auth-Code an die Anwendung weiter, und die Anwendung im Backend tauscht ihn gegen ein Token aus. <br><br>  Es gibt auch einen vereinfachten <i>impliziten Ablauf</i> , mit dem Sie sich ohne Backend anmelden können: Nach der Autorisierung leitet die API den Benutzer mit einem Token in der URL zur Anwendung weiter. <br><br>  Wie verwende ich diese "Weiterleitungs" -Berechtigung in der Erweiterung von Chrome?  Eine Website starten?  Es stellt sich heraus, dass dies nicht notwendig ist. <br><br><h3>  Meine Krücken </h3><br>  Anfangs habe ich angefangen, mich in Gitlalb und Trello zu integrieren.  Mit Gitlab stellte sich heraus, dass alles „einfach“ war: Sie senden den Benutzer an das Admin-Panel an sein Gitlab, damit er ein Token erstellt und an Sie weitergibt.  Ich musste mich lange nicht mit diesem Ansatz beschäftigen, sondern habe nur ein Feld für die Eingabe eines Tokens erstellt und beschrieben, wie ich es bekomme. <br><br>  Trello stellte OAuth2 zur Verfügung. Ich bemerkte sofort, dass es einen <i>impliziten Fluss hat</i> , aber ein bisschen seltsam: Das Token wird in diesem Formular auf der Seite / genehmigen angezeigt <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ob/km/s3/obkms3gmcyih9glliorcwlcyk6y.png"></div><br>  Ohne tiefer zu gehen, habe ich auch ein Token-Eingabefeld in meiner Erweiterung erstellt und dem Benutzer beschrieben, wie es geht. <br><br><h3>  Richtiger Weg </h3><br>  Wie immer kommt eine gute Entscheidung nicht sofort.  Ich bin darauf gestoßen, als ich mit der Integration mit Jira begonnen habe, das nur über einen Autorisierungscode-Fluss verfügt. <br><br>  Irgendwie bin ich auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">chrome.identity gestoßen</a> : eine Browser-Funktionalität, die bereits alle „Krücken“ für die Autorisierung implementiert hat.  Diese Funktionalität erfordert die Einbeziehung der <i>Identität</i> in Manifestberechtigungen.  Ich habe mein Manifest ergänzt: <i>"Berechtigungen": ["Speicher", "Identität"]</i> . <br><br>  Wie gesagt: Jede Erweiterung hat eine URL wie die <i>Chrome-Erweiterung: // &lt;id&gt; /</i> .  Eine solche Adresse ist für nichts geeignet, aber <i>chrome.identity</i> bietet eine echte URL <font color="blue"><i>https: // &lt;app-id&gt; .chromiumapp.org / *</i></font> , die mit OAuth2 als redirectUrl an die API übergeben werden kann.  Die API sendet den Benutzer nach der Autorisierung mit zusätzlichen Parametern an ihn, sei es authCode oder Token, und das Chrome nimmt sie auf und übergibt die Erweiterungen an Ihren js-Rückruf. <br><br>  Verwenden Sie dazu chrome.identity.launchWebAuthFlow (), wodurch die API-Autorisierungsseite in einem neuen Fenster geöffnet wird: <br><br><pre><code class="plaintext hljs">chrome.identity.launchWebAuthFlow( { 'url': JiraApi.url(), 'interactive': true }, jira.callback() );</code> </pre> <br>  Ich sage gleich: Dieses Fenster sieht nicht genau wie das Hauptbrowserfenster aus, was für mich als regulärer Benutzer Fragen aufwerfen würde, weil  Es sieht aus wie eine Art Phishing-Block, kein Fenster.  Vielleicht ist dies nur meine Wahrnehmung, vielleicht ist dies nur in meinem <abbr title="Linux Mint">Betriebssystem</abbr> . <br><br><img src="https://habrastorage.org/webt/4i/n5/ld/4in5ldmxa9aanys9f9oq2bwdo2u.png"><br>  <font color="gray"><i>Autorisierungsfenster chrome.identity.launchWebAuthFlow</i></font> <br><br><h2>  Andere Optionen </h2><br>  Wenn die Idee zur Implementierung von Funktionen aufkommt, empfehle ich die Google Chrome API, weil  Es hat bereits viele ähnliche Funktionen, die Ihre Arbeit erleichtern.  Zum Beispiel ist die vollständige <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">manifest.json</a> beeindruckend: <br><br><pre> <code class="plaintext hljs">{ // Required "app": { "background": { // Optional "scripts": ["background.js"] } }, "manifest_version": 2, "name": "My App", "version": "versionString", // Recommended "default_locale": "en", "description": "A plain text description", "icons": {...}, // Optional "action_handlers": ["new_note"], "author": ..., "automation": ..., "bluetooth": { "uuids": ["1105", "1006"] }, "commands": {...}, "current_locale": ..., "event_rules": [{...}], "externally_connectable": { "matches": ["*://*.example.com/*"] }, "file_handlers": {...}, "file_system_provider_capabilities": { "configurable": true, "multiple_mounts": true, "source": "network" }, "import": [{"id": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"}], "key": "publicKey", "kiosk": { "always_update": ..., "required_platform_version": ... }, "kiosk_enabled": true, "kiosk_only": true, "kiosk_secondary_apps": ..., "minimum_chrome_version": "versionString", "nacl_modules": [...], "oauth2": ..., "offline_enabled": true, "optional_permissions": ["tabs"], "permissions": ["tabs"], "platforms": ..., "requirements": {...}, "sandbox": [...], "short_name": "Short Name", "signature": ..., "sockets": { "tcp": { "connect": "*" }, "udp": { "send": "*" } }, "storage": { "managed_schema": "schema.json" }, "system_indicator": ..., "update_url": "http://path/to/updateInfo.xml", "url_handlers": {...}, "usb_printers": { "filters": [...] }, "version_name": "aString", "webview": {...} }</code> </pre><br>  Der vorherige Umgang mit allen Funktionen kann zu verschwenderisch sein.  ihre große Anzahl. <br><br>  Außerdem kann nur die js-Seite der Erweiterung selbst groß werden. <br><br><img src="https://habrastorage.org/webt/ei/k1/9y/eik19yftcv2f-rm1uodd98dpblo.png"><br>  <font color="gray"><i>Mein aktuelles Schema</i></font> <br><br><h1>  Förderung </h1><br>  Ein wenig erwähnenswert ist die Förderung seiner Expansion.  Ein Merkmal von „Widgets“ ist, dass sie sich an Desktop-Benutzer richten, die es in den letzten Jahren geschafft haben, eine Minderheit zu werden. <br><br>  Ich habe Kontextwerbung und Social Media-Werbung ausprobiert.  Ich habe wenig Erfahrung und keine Konvertierung. <br><br><h2>  Kontextwerbung </h2><br>  Meine Erfahrung war bisher auf eine Plattform beschränkt, ich kann nicht für den Rest sprechen, aber ich denke, das gleiche ist da. <br><br>  Es stellt sich heraus, dass Sie in Yandex-Kontextwerbung keine Geräte und Browser als Ziel festlegen können.  Wenn Ihre Erweiterung nur für Chrome bestimmt ist, müssen Personen, die in anderen Browsern sitzen, deren Übergänge nur zusätzliche Verluste verursachen, Anzeigen schalten. <br><br>  Ich wollte keine separate Site für meine Erweiterung erstellen, deshalb habe ich ihre Seite im Webstore beworben.  Der Nachteil dieses Ansatzes besteht darin, dass Sie nur den Statistiken des Werbekontos vertrauen und nicht sehen können, wie sich Benutzer auf der beworbenen Seite verhalten. <br><br><h2>  Soziale Netzwerke </h2><br>  Sie gehören nur zu der Kategorie von Websites, auf denen der Desktop eine sterbende Minderheit ist. <br><br>  Vkontakte bietet Targeting für die mobile und Vollversion seiner Website.  Dieses Häkchen ist jedoch ganz am Ende der Einstellungen versteckt. Ich persönlich habe es nicht bemerkt, bevor ich das Budget durchgesickert bin und eine traurige Berichterstattung in der Statistik gesehen habe <br><br><img src="https://habrastorage.org/webt/uv/8-/ck/uv8-ckxr9iw4i_znpploac-1cyy.png"><br><br>  Tatsächlich waren die mobilen Ansichten an diesem Tag viel größer <br><br><h1>  Gedanken am Ende </h1><br>  Ich glaube, dass Erweiterungen ein mächtiges Werkzeug für Leute sind, die im Internet arbeiten, weil  Im Browser verbringen wir viel Zeit, die wir manchmal optimieren möchten.  Ein gutes Optimierungsbeispiel ist beispielsweise ein Google Übersetzer-Widget, das beim Hervorheben Text übersetzt.  Die Lösung für das Problem einer großen Anzahl offener Tabs "später" habe ich auch mit dem Widget entschieden. <br><br>  Durch das Schreiben von Erweiterungen erhalten Sie Erfahrung im Erlernen des Unterwasserteils des Chrome-Eisbergs und beim Schreiben eines Frontends (insbesondere, wenn Sie ein Backend-Entwickler sind).  Erweiterungen können auf demselben React JS geschrieben werden, von dem aus Sie Anwendungen für mobile Geräte schreiben können.  Der Prozess des Schreibens beider ist sehr ähnlich. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de431830/">https://habr.com/ru/post/de431830/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de431820/index.html">Starten Sie zur ISS und bremsen Sie am Asteroiden</a></li>
<li><a href="../de431822/index.html">De facto Closed Source: Argumente für klare Software</a></li>
<li><a href="../de431824/index.html">Informationen auf einem Smartphone von Yandex wurden einige Tage vor der Präsentation versehentlich auf der M.Video-Website geöffnet</a></li>
<li><a href="../de431826/index.html">Beginnen Sie in 2 Tagen mit React and Bootstrap. Tag Nummer 1</a></li>
<li><a href="../de431828/index.html">Digitale Veranstaltungen in Moskau vom 3. bis 9. Dezember</a></li>
<li><a href="../de431832/index.html">Technisch interaktiv auf fantastischen Kongressen. Teil 1</a></li>
<li><a href="../de431834/index.html">Mehr Kaffee, weniger Koffein: Intel 9th ​​Gen (Teil 4)</a></li>
<li><a href="../de431836/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends für die letzte Woche Nr. 341 (26. November - 2. Dezember 2018)</a></li>
<li><a href="../de431838/index.html">3CX WebMeeting-Videokonferenzen - Eine vollständige Anleitung</a></li>
<li><a href="../de431842/index.html">0xc00007b oder Installieren von Treibern unter dem Programm</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>