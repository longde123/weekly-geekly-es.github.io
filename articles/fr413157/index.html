<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ¿â€ğŸŒ¾ ğŸ‘©â€ğŸ‘¦ ğŸ¥¨ Ã€ propos du stockage des mots de passe dans la base de donnÃ©es ğŸ“‘ ğŸ‘¨ğŸ¾â€ğŸ« ğŸš¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, nous verrons comment stocker au mieux les mots de passe dans une base de donnÃ©es et comment les plates-formes connues rÃ©solvent ce problÃ¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ã€ propos du stockage des mots de passe dans la base de donnÃ©es</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/acribia/blog/413157/"><img src="https://habrastorage.org/webt/5m/il/hx/5milhxdjp-qtujnj6mfodpirgem.jpeg"><br><br>  Aujourd'hui, nous verrons comment stocker au mieux les mots de passe dans une base de donnÃ©es et comment les plates-formes connues rÃ©solvent ce problÃ¨me. <br><a name="habracut"></a><br><h3>  Plaintext </h3><br>  Lorsque la question s'est posÃ©e de stocker les mots de passe, bien sÃ»r, la premiÃ¨re idÃ©e a Ã©tÃ© de simplement les Ã©crire ouverts dans la plaque signalÃ©tique appropriÃ©e dans la base de donnÃ©es.  Et tout irait bien si les clients ne pouvaient pas vraiment y accÃ©der directement.  Mais, malheureusement, une telle injection SQL bien connue fonctionne parfois encore dans diverses applications Web, sans parler d'autres vulnÃ©rabilitÃ©s potentielles.  En matiÃ¨re de sÃ©curitÃ©, il est gÃ©nÃ©ralement admis d'assumer le pire et de prÃ©parer un plan d'action et de protection mÃªme dans un tel cas.  Nous supposons qu'un attaquant a trouvÃ© une faille dans une application Web, d'une maniÃ¨re ou d'une autre, dÃ©charge joyeusement une table avec des noms d'utilisateur et des mots de passe, puis les supprime Ã  sa guise.  En gÃ©nÃ©ral, ses autres actions peuvent Ãªtre les suivantes: <br><br><ul><li>  effectuer des actions illÃ©gitimes au nom des utilisateurs en utilisant leurs informations d'identification sur une ressource vulnÃ©rable: par exemple, une carte bancaire est liÃ©e Ã  un compte, et maintenant un attaquant peut l'utiliser; </li><li>  une tentative d'utiliser le mot de passe reÃ§u sur d'autres ressources: loin d'Ãªtre toujours, les utilisateurs, suivant les conseils, trouvent Ã  chaque fois de nouveaux mots de passe pour diffÃ©rents services; </li><li>  une tentative d'identifier la rÃ¨gle pour gÃ©nÃ©rer un mot de passe et aller au deuxiÃ¨me point: certains forment une rÃ¨gle pour gÃ©nÃ©rer un mot de passe, en consÃ©quence, les mots de passe sur diffÃ©rentes ressources sont diffÃ©rents, mais ils obÃ©issent Ã  la mÃªme rÃ¨gle qui peut Ãªtre dÃ©tectÃ©e; </li><li>  Ã©lÃ©vation de privilÃ¨ges: le mot de passe administrateur peut Ã©galement Ãªtre stockÃ© dans la mÃªme table, avec la connaissance de laquelle vous pouvez parfois obtenir un contrÃ´le total sur le serveur. </li></ul><br><h3>  Hachage de <s>chiffrement</s> </h3><br>  L'idÃ©e s'avÃ¨re tout de suite moins bonne.  Que faire  Ce serait formidable de stocker les mots de passe sous forme cryptÃ©e.  Ensuite, mÃªme s'ils sont supprimÃ©s, ils ne pourront pas rÃ©cupÃ©rer, ou du moins ils y passeront trop de temps.  Ici, le choix se fait entre deux branches de dÃ©veloppement: chiffrer les mots de passe ou hacher.  Les dÃ©veloppeurs se sont installÃ©s sur le second, et, en principe, il est clair pourquoi.  Comparez nos candidats pour diffÃ©rentes caractÃ©ristiques: <br><br><ol><li>  Intrant travail.  Le chiffrement prend plus de temps, et quelle que soit la conversion que nous choisissons, elle devra Ãªtre effectuÃ©e Ã  chaque vÃ©rification du mot de passe.  L'une des exigences pour les fonctions de hachage est la vitesse d'exÃ©cution. </li><li>  La longueur des valeurs de sortie.  Le rÃ©sultat du chiffrement est de longueur variable, le rÃ©sultat du hachage est toujours le mÃªme et le stockage de donnÃ©es uniformes dans une base de donnÃ©es est trÃ¨s pratique.  Sans oublier le fait que la longueur du mot de passe sous forme cryptÃ©e donnera quelques informations sur la longueur du mot de passe d'origine.  La mÃªme longueur, cependant, conduit Ã  la possibilitÃ© de collisions, mais plus sur celle ci-dessous. </li><li>  Gestion des clÃ©s.  Le cryptage nÃ©cessite une clÃ©, qui devra Ã©galement Ãªtre stockÃ©e quelque part et espÃ©rons que personne ne la trouvera.  Dans tous les cas, la gÃ©nÃ©ration et la gestion des clÃ©s est une histoire distincte (elles ne doivent pas Ãªtre faibles, elles doivent Ãªtre modifiÃ©es rÃ©guliÃ¨rement, etc.). </li><li>  La possibilitÃ© d'un conflit.  Lors du cryptage, la sortie de diffÃ©rentes donnÃ©es d'entrÃ©e sera toujours Ã©galement diffÃ©rente.  Avec le hachage, ce n'est pas toujours le cas.  Une longueur de hachage constante signifie que l'ensemble des valeurs de sortie de la fonction de hachage est limitÃ©, ce qui peut entraÃ®ner une collision.  Autrement dit, supposons que l'utilisateur soit vraiment confus et ait trouvÃ© un mot de passe long vraiment cool, qui a des caractÃ¨res spÃ©ciaux, des chiffres et des lettres en minuscules et en majuscules.  L'attaquant entre le mot de passe non moins cool Â«adminÂ» dans le champ du mot de passe.  Le serveur l'a hachÃ© pour vÃ©rifier et comparer les hachages.  Hashs assortis.  C'est dommage. </li></ol><br>  Ainsi, avec un score de 3: 1, le hachage gagne.  Mais est-il possible de s'arrÃªter lÃ ? <br>  La rÃ©ponse est non. <br><br><h3>  Attaques par mot de passe hachÃ© </h3><br>  Ainsi, l'attaquant a obtenu notre table avec des noms d'utilisateur et des mots de passe.  Les mots de passe sont dÃ©sormais hachÃ©s, mais cela n'arrÃªte pas notre attaquant, et il compte sÃ©rieusement les rÃ©cupÃ©rer.  Ses actions possibles: <br><br><ul><li>  dictionnaire bruteforce: si l'attaquant n'a pas rÃ©ussi avec le mot de passe de rÃ©fÃ©rence de l'administrateur, il se tournera vers le dictionnaire des mots de passe populaires et tentera sa chance avec leurs hachages; </li><li>  tables arc-en-ciel: en gÃ©nÃ©ral aujourd'hui, il n'aura peut-Ãªtre pas besoin de calculer quoi que ce soit et de trier le dictionnaire.  Il suffira de se tourner vers les tables arc-en-ciel allongÃ©es sur le rÃ©seau.  Les tables arc-en-ciel contiennent des valeurs de hachage dÃ©jÃ  calculÃ©es par quelqu'un avant et leurs donnÃ©es d'entrÃ©e correspondantes.  Il est important de noter qu'en raison de collisions, le mot de passe que la table arc-en-ciel offrira ne sera pas nÃ©cessairement celui que l'utilisateur utilisera.  Les valeurs calculÃ©es sont dÃ©jÃ  pour MD5, SHA1, SHA256, SHA512, ainsi que pour leurs modifications et quelques autres.  Vous pouvez essayer d'inverser le hachage, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ; </li><li>  recherche exhaustive: si cela ne vous aide pas, vous devrez recourir Ã  la force brute et trier tous les mots de passe possibles d'affilÃ©e jusqu'Ã  ce que les hachages calculÃ©s correspondent finalement. </li></ul><br>  Dans le cas le plus gÃ©nÃ©ral, un attaquant devra casser des mots de passe.  Et ici, son succÃ¨s dÃ©pendra, entre autres, de la vitesse de calcul de la fonction de hachage.  Une comparaison du temps de hachage peut Ãªtre trouvÃ©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Par exemple, les fonctions de hachage implÃ©mentÃ©es Java sur Windows 10 64 bits avec 1 cÅ“ur Intel i7 2,60 GHz et 16 Go de RAM ont Ã©tÃ© exÃ©cutÃ©es un million de fois pour calculer un hachage de 36 caractÃ¨res.  Ils ont montrÃ© les rÃ©sultats suivants: <br><br>  MD5 - 627 ms <br>  SHA-1 - 604 ms <br>  SHA-256 - 739 ms <br>  SHA-512 - 1056 ms <br><br>  Mais aujourd'hui, bruteforce peut Ãªtre parallÃ©lisÃ© et exÃ©cutÃ© plusieurs fois plus rapidement sur le GPU (ainsi que sur l'APU, le DSP et le FPGA).  Cependant, en plus de choisir un algorithme plus long et une sortie plus longue, vous pouvez faire autre chose. <br><br><h3>  Hachage de hachage </h3><br>  Pour empÃªcher un attaquant d'utiliser des tables arc-en-ciel prÃªtes Ã  l'emploi, il existe une technique pour hacher plusieurs fois un mot de passe.  Autrement dit, nous calculons le hachage Ã  partir du hachage Ã  partir du hachage Ã  partir du hachage ... et donc n fois (il est cependant nÃ©cessaire de ne pas trop s'impliquer avec cela, car lors de la vÃ©rification habituelle du mot de passe de l'utilisateur, le serveur devra Ã©galement le faire).  Maintenant, c'est si simple selon la table arc-en-ciel qu'il ne trouvera pas le mot de passe, et le temps pour la force brute augmentera considÃ©rablement.  Mais rien n'empÃªchera l'attaquant de gÃ©nÃ©rer une table arc-en-ciel Ã  partir du dictionnaire de mots de passe, connaissant l'algorithme de hachage.  De plus, pour les combinaisons les plus populaires de cette mÃ©thode, de telles tables ont dÃ©jÃ  Ã©tÃ© gÃ©nÃ©rÃ©es: <br><br><img src="https://habrastorage.org/webt/wr/la/gr/wrlagrdaz9zpo8gm4lku4s7wvvc.jpeg">  " <br><br><h3>  Ajouter du sel au goÃ»t </h3><br>  Pour qu'il ne puisse pas faire cela, les mots de passe sont hachÃ©s aujourd'hui avec l'ajout de sel. <br>  Un sel est une chaÃ®ne alÃ©atoire supplÃ©mentaire qui est affectÃ©e Ã  un mot de passe et hachÃ©e avec lui.  Vous ne pouvez pas rÃ©cupÃ©rer le mot de passe du hachage ainsi obtenu de la table arc-en-ciel.  Connaissant le sel et le hachage de sortie, l'attaquant est vouÃ© Ã  la force brute et aucune table prÃ©-calculÃ©e ne l'aidera probablement. <br>  Taxonomie de salage de mot de passe: <br><br>  1. Selon le principe du salage: <br><br><ul><li>  un sel unique pour chaque utilisateur: individuel pour chaque utilisateur - de cette faÃ§on, si le sel devient connu de l'attaquant, chaque mot de passe devra Ãªtre brutÃ©.  Et d'ailleurs, mÃªme si deux utilisateurs pensent de la mÃªme faÃ§on et proposent des mots de passe identiques, les hachages seront toujours diffÃ©rents dans la sortie; </li><li>  sel global: le mÃªme pour tous, utilisÃ© pour tous les hachages; </li><li>  Ã  la fois cela et un autre. </li></ul><br>  2. Selon la mÃ©thode de stockage du sel: <br><br><ul><li>  dans la base de donnÃ©es: en rÃ¨gle gÃ©nÃ©rale, les sels individuels sont stockÃ©s dans la mÃªme base de donnÃ©es que les hachages de mot de passe;  souvent mÃªme sur la mÃªme ligne; </li><li>  dans le code (lire: dans la config): le sel global n'est gÃ©nÃ©ralement pas stockÃ© dans la base de donnÃ©es, mais, par exemple, dans la config, de sorte que le contrevenant devrait consacrer du temps Ã  sa sÃ©lection. </li></ul><br>  Nous supposons que les sels d'utilisateurs individuels sont stockÃ©s dans la base de donnÃ©es, le sel global dans la configuration.  L'attaquant a accÃ©dÃ© Ã  la base de donnÃ©es, et il connaÃ®t tous les hachages et leurs sels correspondants (le sel global n'est pas stockÃ© dans la base de donnÃ©es, et il ne le sait pas).  Au total, si toutes les mÃ©thodes sont combinÃ©es, afin d'obtenir des mots de passe sous une forme claire, comme c'Ã©tait le cas dans les premiers systÃ¨mes, lui, Ã©tant extrÃªmement dÃ©terminÃ©, rencontrera les obstacles suivants: <br><br><ol><li>  Il ne connaÃ®t pas le sel mondial, il devra donc Ãªtre brutalisÃ©. </li><li>  Il connaÃ®t les sels des utilisateurs, mais il n'a pas prÃ©parÃ© de tableaux avec ces sels, il devra donc casser les mots de passe. </li><li>  Ce processus prendra encore plus de temps car vous devez hacher n fois. </li></ol><br><h3>  Comment les mots de passe stockent-ils divers CMS </h3><br><h4>  Wordpress </h4><br>  Avant la version 3.x, les mots de passe Ã©taient simplement hachÃ©s avec MD5.  Maintenant, la bibliothÃ¨que phpass est utilisÃ©e.  Par dÃ©faut, salt est affectÃ© au mot de passe en face et la chaÃ®ne rÃ©sultante est hachÃ©e MD5 2 ^ 8 fois. <br><br><h4>  Joomla </h4><br>  Avant la version 1.0.12, seul MD5 Ã©tait utilisÃ©.  La bibliothÃ¨que phpass est utilisÃ©e, par dÃ©faut bcrypt avec salt et 2 ^ 10 rÃ©pÃ©titions. <br><br><h4>  Drupal </h4><br>  Jusqu'Ã  la version 6 md5 sans sel.  La bibliothÃ¨que phpass est utilisÃ©e.  La valeur par dÃ©faut est sha512 salÃ© avec 2 ^ 16 rÃ©pÃ©titions. <br><br><h4>  Silverstripe </h4><br>  Utilise Blowfish salÃ© avec 2 ^ 10 rÃ©pÃ©titions. <br><br><h4>  Umbraco </h4><br>  Utilise HMACSHA256 avec du sel.  Utilise le deuxiÃ¨me sel global spÃ©cifiÃ© dans la configuration. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr413157/">https://habr.com/ru/post/fr413157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr413145/index.html">Un analyste aide les entreprises Ã  gagner de l'argent</a></li>
<li><a href="../fr413147/index.html">Est-il possible d'utiliser Tibero au lieu d'Oracle. Et est-ce nÃ©cessaire</a></li>
<li><a href="../fr413149/index.html">EntrepÃ´t de donnÃ©es distribuÃ© dans le concept Data Lake: par oÃ¹ commencer</a></li>
<li><a href="../fr413151/index.html">La NSA a proposÃ© une norme de chiffrement pour les appareils IoT, mais l'ISO l'a rejetÃ©e</a></li>
<li><a href="../fr413155/index.html">Google Shell Style Guide (en russe)</a></li>
<li><a href="../fr413159/index.html">Interface sombre ou claire? Conseils pour choisir un jeu de couleurs pour votre interface</a></li>
<li><a href="../fr413161/index.html">Git poem</a></li>
<li><a href="../fr413163/index.html">Faiblesses HTTPS. 2e partie</a></li>
<li><a href="../fr413165/index.html">Explication SRTP</a></li>
<li><a href="../fr413167/index.html">Comment intÃ©grer Zimbra Ã  un systÃ¨me DLP?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>