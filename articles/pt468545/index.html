<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö£ üê© üöæ "Alice, vamos para o frontend!" üõÑ üëêüèº üçæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Os assistentes de voz n√£o s√£o um futuro distante, mas uma realidade. Alexa, Siri, Google Now e Alice est√£o integrados em alto-falantes, rel√≥gios e tel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>"Alice, vamos para o frontend!"</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/468545/">  Os assistentes de voz n√£o s√£o um futuro distante, mas uma realidade.  Alexa, Siri, Google Now e Alice est√£o integrados em alto-falantes, rel√≥gios e telefones inteligentes.  Eles est√£o gradualmente mudando nossa maneira de interagir com aplicativos e dispositivos.  Atrav√©s de um assistente, voc√™ pode descobrir a previs√£o do tempo, comprar passagens de avi√£o, pedir um t√°xi, ouvir m√∫sica e ligar a chaleira na cozinha, deitada no sof√° em outra sala. <br><br><img src="https://habrastorage.org/webt/mr/sw/35/mrsw35dh1qjeefkk8eb1f1ffvj0.jpeg"><br><br>  Siri ou Alexa falam principalmente ingl√™s para os usu√°rios; portanto, na R√∫ssia, eles n√£o s√£o t√£o populares quanto Alice, da Yandex.  Alice tamb√©m √© mais conveniente para os desenvolvedores: seus criadores t√™m um blog, publicam ferramentas convenientes no GitHub e ajudam a criar o assistente em novos dispositivos. <br><br>  <b>Nikita Dubko</b> (@dark_mefody no Twitter) √© desenvolvedora de interfaces Yandex, organizadora de reuni√µes MinskCSS e MinskJS e editora de not√≠cias em padr√µes da Web.  Nikita n√£o funciona no Yandex.Dialogs e n√£o √© afiliado ao Yandex.Alisa de nenhuma maneira.  Mas ele estava interessado em entender como Alice funciona, ent√£o ele tentou aplicar suas habilidades na Web e preparou um relat√≥rio sobre isso no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FrontendConf</a> RIT ++.  Ao decifrar o relat√≥rio de Nikita, consideramos quais assistentes de voz podem ser √∫teis e desenvolvemos uma habilidade no processo de leitura deste material. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/yjTH8-O3CMA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Bots </h2><br>  Vamos come√ßar com a hist√≥ria dos bots.  Em 1966, o bot de <b>Eliza</b> apareceu, fingindo ser um terapeuta.  Era poss√≠vel se comunicar com ele, e alguns at√© acreditavam que uma pessoa viva as respondesse.  Em 1995, o bot <b>ALICE</b> foi lan√ßado.  - para n√£o ser confundido com Alice.  O bot foi capaz de se passar por uma pessoa real.  At√© hoje, est√° em c√≥digo aberto e est√° sendo finalizado.  Infelizmente, ALICE n√£o passa no teste de Turing, mas isso n√£o o impede de enganar as pessoas. <br><br>  Em 2006, a IBM colocou uma enorme base de conhecimento e intelig√™ncia sofisticada no bot - foi assim que o <b>IBM Watson</b> surgiu.  Este √© um enorme cluster de computa√ß√£o que pode processar a fala em ingl√™s e apresentar alguns fatos. <br><br>  Em 2016, a Microsoft realizou um experimento.  Ela criou o <b>Tay</b> bot, que lan√ßou no Twitter.  L√°, o bot aprendeu a microblogar com base em como os assinantes ao vivo interagiam com ele.  Como resultado, Tay tornou-se racista e mis√≥gino.  Agora, esta √© uma conta fechada.  Moral: n√£o deixe as crian√ßas no Twitter, ele pode ensinar o mal. <br><br>  Mas esses s√£o todos os bots com os quais voc√™ n√£o pode se comunicar para seu pr√≥prio benef√≠cio.  Em 2015, "√∫til" apareceu no Telegram.  Bots existiam em outros programas, mas o Telegram causou um estrago.  Foi poss√≠vel criar um bot √∫til que fornecesse informa√ß√µes, gerasse conte√∫do, administrasse p√∫blicos - as possibilidades s√£o √≥timas e a API √© simples.  Os rob√¥s adicionaram imagens, bot√µes, dicas de ferramentas - uma interface de intera√ß√£o apareceu. <br><br>  Gradualmente, a id√©ia se espalhou para quase todos os mensageiros instant√¢neos: Facebook, Viber, VKontakte, WhatsApp e outros aplicativos.  Agora os bots s√£o uma tend√™ncia, est√£o por toda parte.  Existem servi√ßos que permitem escrever APIs imediatamente para todas as plataformas. <br><br><h2>  Assistentes de voz </h2><br>  O desenvolvimento foi paralelo aos bots, mas vamos assumir que a era dos assistentes chegou mais tarde. <br><br>  Em 9 de agosto de 2011, a <b>Siri</b> apareceu.  Inicialmente, era um projeto independente em que a Apple via algo interessante, ent√£o eu o comprei.  Este √© o assistente de voz popular mais antigo incorporado ao sistema operacional.  Um ano depois, o Google rapidamente alcan√ßou a Apple, integrando <b>o</b> assistente de voz <b>do Google Now</b> em seu sistema operacional. <br><br>  Ap√≥s 2 anos, a Microsoft lan√ßou o <b>Microsoft Cortana</b> .  Mas n√£o est√° claro por que - o mercado m√≥vel para assistentes de voz, ao que parece, eles j√° perderam.  A empresa tentou integrar um assistente de voz em sistemas de desktop, quando j√° havia uma luta pelo mercado de diferentes dispositivos.  <b>O Amazon Alexa</b> saiu um pouco mais tarde naquele ano. <br><br><img src="https://habrastorage.org/webt/un/cw/eh/uncwehkki7vgcfyeh7148omczd4.jpeg"><br><br>  Assistentes evolu√≠ram.  Al√©m dos sistemas de software que sabiam trabalhar com voz, os palestrantes apareciam com os assistentes.  Segundo as estat√≠sticas, no in√≠cio de 2019, cada terceira fam√≠lia nos Estados Unidos tem uma coluna inteligente.  Este √© um mercado enorme no qual voc√™ pode investir. <br><br>  Mas h√° um problema - os assistentes estrangeiros t√™m uma linguagem ruim com o russo.  Os assistentes s√£o presos em ingl√™s e entendem bem, mas quando se comunicam em russo, surgem dificuldades de tradu√ß√£o.  Os idiomas s√£o diferentes e requerem uma abordagem diferente para o processamento de idiomas naturais. <br><br><h2>  Alice </h2><br>  Alice foi lan√ßada na vers√£o beta aberta em 10 de outubro de 2017.  Ele est√° preso pelo idioma russo e essa √© sua enorme vantagem.  Alice entende ingl√™s, mas pior. <br><br><blockquote>  A miss√£o de Alice √© ajudar os usu√°rios que falam russo. </blockquote><br>  A Yandex √© uma grande empresa e pode dar ao luxo de incorporar Alice em todos os seus aplicativos que possam, de alguma forma, falar. <br><br><ul><li>  Yandex.Browser. <br></li><li>  Yandex.Navigator. <br></li><li>  Esta√ß√£o Yandex. <br></li><li>  Yandex.Phone. <br></li><li>  Yandex.Auto. <br></li><li>  Yandex.Drive. <br></li></ul><br>  A integra√ß√£o correu t√£o bem que fabricantes de terceiros tamb√©m decidiram construir Alice. <br><br><img src="https://habrastorage.org/webt/tc/na/aa/tcnaaauucjom0ojuvb6jpgdjzge.jpeg"><br><br>  Durante os 2 anos de desenvolvimento da assistente, ela foi integrada a muitos servi√ßos e novas habilidades foram adicionadas.  Ela sabe tocar m√∫sica, reconhecer imagens, procurar informa√ß√µes no Yandex e trabalhar com uma casa inteligente. <br><br><h3>  Por que t√£o popular? </h3><br>  <b>√â conveniente quando as m√£os est√£o ocupadas</b> .  Estou preparando o jantar e quero ligar a m√∫sica.  V√° para a torneira, lave as m√£os, seque, abra o aplicativo, encontre a faixa desejada - por um longo tempo.  Mais r√°pido e f√°cil para dar um comando de voz. <br><br>  <b>Pregui√ßa</b> .  Estou deitado em um sof√° sob um cobertor xadrez e n√£o quero me levantar para ir a algum lugar para ligar os alto-falantes.  Se voc√™ √© pregui√ßoso, ent√£o na √≠ntegra. <br><br>  <b>O grande mercado s√£o aplicativos para crian√ßas</b> .  As crian√ßas pequenas ainda n√£o sabem ler, escrever e imprimir, mas falam e compreendem a fala.  Portanto, as crian√ßas adoram Alice e gostam de se comunicar com ela.  Os pais tamb√©m est√£o satisfeitos - n√£o h√° necessidade de procurar o que fazer com a crian√ßa.  Curiosamente, Alice entende as crian√ßas gra√ßas a uma rede neural bem treinada. <br><br>  <b>Disponibilidade</b>  Pessoas com defici√™ncia visual se sentem confort√°veis ‚Äã‚Äãtrabalhando com assistentes de voz - quando a interface n√£o est√° vis√≠vel, voc√™ pode ouvi-la e dar comandos. <br><br>  <b>Voz mais r√°pida</b> .  Uma pessoa comum, n√£o um desenvolvedor, imprime uma m√©dia de 30 palavras por minuto e diz 120. Por minuto, 4 vezes mais informa√ß√µes s√£o transmitidas por voz. <br><br>  <b>O futuro</b>  Filmes fant√°sticos e previs√µes futuristas sugerem que o futuro est√° nas interfaces de voz.  Os roteiristas est√£o pensando que talvez o controle por voz seja a principal maneira de interagir com interfaces nas quais a imagem n√£o √© t√£o importante. <br><br>  Segundo as estat√≠sticas, 35 milh√µes de pessoas usam Alisa por m√™s.  A prop√≥sito, a popula√ß√£o da Bielorr√∫ssia √© 9.475.600 pessoas.  Ou seja, aproximadamente 3,5 da Bielorr√∫ssia usam Alice todos os meses. <br><br>  Assistentes de voz conquistam o mercado.  Segundo as previs√µes, em 2021 ele crescer√° cerca de 2 vezes.  A popularidade de hoje n√£o vai parar, mas continuar√° a crescer.  Cada vez mais desenvolvedores percebem que precisam investir nessa √°rea. <br><br><h3>  Habilidades do desenvolvedor </h3><br>  √â √≥timo quando as empresas investem em assistentes de voz.  Eles entendem como podem ser integrados aos seus servi√ßos.  Mas os desenvolvedores tamb√©m querem participar de alguma forma, e a pr√≥pria empresa √© lucrativa. <br><br>  Alexa tem Alexa Skills.  De acordo com os m√©todos documentados de intera√ß√£o, ela entende o que os desenvolvedores escreveram para ela.  O Google lan√ßou o Actions - a capacidade de integrar algo pr√≥prio no assistente de voz. <br><br>  Alice tamb√©m tem habilidades - a capacidade dos desenvolvedores de implementar algo de terceiros. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/682/cba/758/682cba758b31f41d75d55aca324645b1.jpg"><br><br>  Ao mesmo tempo, h√° um cat√°logo alternativo de habilidades, n√£o do Yandex, que √© suportado pela comunidade. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/445/c87/9a5/445c879a5d44b7da9f49f185826cbdbe.jpg"><br><br>  Existem bons relat√≥rios sobre como criar aplicativos de voz.  Por exemplo, <b>Pavel Guy</b> falou no AppsConf 2018 com o tema <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Criando um aplicativo de voz usando o exemplo do Google Assistance"</a> .  Os entusiastas est√£o envolvidos ativamente no desenvolvimento de aplicativos de voz.  Um exemplo √© um jogo visual ativado por voz, escrito por Ivan Golubev. <br><br>  Alice √© popular, embora essencialmente tudo o que ela faz esteja a meio caminho entre voz e texto. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/804/0fb/c3e/8040fbc3e31afcbee27651b7a77a2426.jpg"><br><br>  Alice sabe ouvir uma voz e transform√°-la em texto de acordo com seus algoritmos, criar uma resposta e dar voz a ela.  Parece que isso n√£o √© suficiente, mas √© uma tarefa extremamente dif√≠cil.  Muitas pessoas est√£o trabalhando para garantir que Alice pare√ßa natural, reconhe√ßa corretamente, entenda sotaques e fala das crian√ßas.  O Yandex fornece algo como um proxy que passa tudo por si mesmo.  Mentes impressionantes trabalham para que voc√™ possa usar os resultados do trabalho deles. <br><br>  As habilidades de Alice - Yandex.Dialogs - t√™m uma limita√ß√£o.  O tempo necess√°rio para a resposta da sua API n√£o deve exceder 1,5 segundos.  E isso √© l√≥gico, porque se a resposta travar - por que esperar? <br><br><blockquote>  Realmente importa o que perguntar se voc√™ ainda n√£o recebe uma resposta? </blockquote><br>  Quando recebemos informa√ß√µes com nossos ouvidos, as pausas s√£o percebidas pelo c√©rebro por mais tempo do que pausas semelhantes na interface visual.  Por exemplo, carregadores, giradores - tudo o que gostamos de adicionar √†s interfaces distrai o usu√°rio da espera.  Considere tudo funcionando r√°pido. <br><br><h2>  Hora de uma demonstra√ß√£o </h2><br>  Tudo √© descrito em detalhes na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> do Yandex.Dialog e est√° sempre atualizado.  Eu n√£o vou me repetir.  Vou contar o que foi interessante para mim e mostrar como criar rapidamente uma demonstra√ß√£o, na qual passei apenas uma noite. <br><br>  Vamos come√ßar com a ideia.  Existem muitas habilidades, existem cat√°logos, mas n√£o encontrei o que √© importante para mim - este √© um calend√°rio de eventos no front-end.  Imagine acordar de manh√£: ‚ÄúVou √† reuni√£o hoje.  Alice!  Existe algo interessante l√°? ‚Äù, E Alice responde voc√™, al√©m disso, corretamente e levando em considera√ß√£o sua localiza√ß√£o. <br><br>  Se voc√™ estiver envolvido na organiza√ß√£o de confer√™ncias, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">participe do GitHub</a> .  Voc√™ pode trazer eventos e reuni√µes para l√°, aprender sobre muitos eventos no front-end do mundo em um calend√°rio. <br><br>  Eu peguei as tecnologias conhecidas que estavam √† m√£o: Node.js e Express.  Ainda Heroku, porque √© gr√°tis.  O aplicativo em si √© simples: √© um servidor no Node.js, um aplicativo Express.  Basta levantar o servidor em alguma porta e ouvir solicita√ß√µes. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> express <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'express'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { router } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'routes'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = express(); app.use(<span class="hljs-string"><span class="hljs-string">'/'</span></span>, router); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> port = process.env.PORT || <span class="hljs-number"><span class="hljs-number">8000</span></span>; app.listen(port, () =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Server started on :${port}'</span></span>); });</code> </pre> <br>  Aproveitei o fato de que tudo j√° est√° configurado no calend√°rio de padr√µes da Web e, de um grande n√∫mero de arquivos pequenos, h√° um arquivo ICS que pode ser baixado.  Por que eu deveria colecionar os meus? <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// services/vendors/web-standards.js import axios from 'axios'; const axioslnstance = axios.create({ baseURL: 'https://web-standards.ru/' , }); export function getRemoteCal() { return axioslnstance.get('calendar.ics'); }</span></span></code> </pre> <br>  Verifique se tudo funciona r√°pido. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Router } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'express'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> wst <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'services/vendors/web-standards'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> router = Router(); router.get(<span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) </span></span>{ wst .getRemoteCal() .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">vendorResponse</span></span></span><span class="hljs-function"> =&gt;</span></span> parseCalendar(vendorResponse.data)) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">events</span></span></span><span class="hljs-function"> =&gt;</span></span> { res.json({ events }); }) .catch(next); });</code> </pre> <br>  Use m√©todos GET para testes.  As habilidades funcionam com os m√©todos POST, portanto, os m√©todos GET podem ser feitos exclusivamente para depura√ß√£o.  Eu implementei esse m√©todo.  Tudo o que ele faz √© baixar o mesmo ICS, analis√°-lo e emiti-lo no formato JSON. <br><br>  Criei a demonstra√ß√£o rapidamente, ent√£o peguei a biblioteca n√≥-ical pronta: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ical <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'node-ical'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseCalendar</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { ical.parseICS(str, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) { reject(err); } resolve(data); }); }); }</code> </pre> <br>  Ela sabe como analisar o formato ICS.  Na sa√≠da, produz essa folha: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"2018-10-04-f rontendconf@https://web-standards.ru/"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"VEVENT"</span></span>, <span class="hljs-string"><span class="hljs-string">"params"</span></span>: [], <span class="hljs-string"><span class="hljs-string">"uid"</span></span>: <span class="hljs-string"><span class="hljs-string">"2018-10-04-f rontendconf@https://web-standards.ru/"</span></span>, <span class="hljs-string"><span class="hljs-string">"sequence"</span></span>: <span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"dtstamp"</span></span>: <span class="hljs-string"><span class="hljs-string">"2019-05-25T21:23:50.000Z"</span></span>, <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"2018-10-04T00:00:00.000Z"</span></span>, <span class="hljs-string"><span class="hljs-string">"datetype"</span></span>: <span class="hljs-string"><span class="hljs-string">"date"</span></span>, <span class="hljs-string"><span class="hljs-string">"end"</span></span>: <span class="hljs-string"><span class="hljs-string">"2018-10-06T00:00:00.000Z"</span></span>, <span class="hljs-string"><span class="hljs-string">"MICROSOFT-CDO-ALLDAYEVENT"</span></span>: <span class="hljs-string"><span class="hljs-string">"TRUE"</span></span>, <span class="hljs-string"><span class="hljs-string">"MICROSOFT-MSNCALENDAR-ALLDAYEVENT"</span></span>: <span class="hljs-string"><span class="hljs-string">"TRUE"</span></span>, <span class="hljs-string"><span class="hljs-string">"summary"</span></span>: <span class="hljs-string"><span class="hljs-string">"FrontendConf"</span></span>, <span class="hljs-string"><span class="hljs-string">"location"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://frontendconf.ru/moscow/2018"</span></span> } }</code> </pre> <br>  Para analisar e fornecer as informa√ß√µes necess√°rias ao usu√°rio da habilidade, basta saber a hora do in√≠cio e do final do evento, seu nome, link e, principalmente, a cidade.  Quero a habilidade de procurar eventos na cidade. <br><br><h3>  Formato de entrada </h3><br>  Como Yandex.Dialogs retorna informa√ß√µes?  Uma coluna ou um assistente de voz incorporado ao aplicativo m√≥vel o escuta e os servidores Yandex processam o que ouvem e enviam um objeto em resposta: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"meta"</span></span>: { ‚Ä¶ }, <span class="hljs-string"><span class="hljs-string">"request‚Äù: { ‚Ä¶ }, "</span></span>session<span class="hljs-string"><span class="hljs-string">": { ‚Ä¶ }, "</span></span>version<span class="hljs-string"><span class="hljs-string">": "</span></span><span class="hljs-number"><span class="hljs-number">1.0</span></span><span class="hljs-string"><span class="hljs-string">" }</span></span></code> </pre> <br>  O objeto cont√©m metainforma√ß√µes, informa√ß√µes sobre a solicita√ß√£o, a sess√£o atual e a vers√£o da API, caso seja atualizada repentinamente - as habilidades n√£o devem ser interrompidas. <br><br>  H√° muitas <b>informa√ß√µes</b> √∫teis nas <b>meta informa√ß√µes</b> . <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"meta"</span></span>: { <span class="hljs-string"><span class="hljs-string">"locale"</span></span>: <span class="hljs-string"><span class="hljs-string">"ru-RU"</span></span>, <span class="hljs-string"><span class="hljs-string">"timezone"</span></span>: <span class="hljs-string"><span class="hljs-string">"Europe/Moscow"</span></span>, <span class="hljs-string"><span class="hljs-string">"client_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"ru.yandex.searchplugin/5.80‚Ä¶‚Äù, "</span></span>interfaces<span class="hljs-string"><span class="hljs-string">": { "</span></span>screen<span class="hljs-string"><span class="hljs-string">": {} } } }</span></span></code> </pre> <br>  " <b>Localidade</b> " - usado para entender a regi√£o do usu√°rio. <br><br>  O " <b>fuso hor√°rio</b> " pode ser usado para trabalhar com compet√™ncia com o tempo e determinar com mais precis√£o a localiza√ß√£o do usu√°rio. <br><br>  " <b>Interfaces</b> " - informa√ß√µes sobre a disponibilidade da tela.  Se n√£o houver tela, voc√™ deve pensar em como o usu√°rio ver√° as figuras se voc√™ der a resposta.  Se houver uma tela, extra√≠mos informa√ß√µes sobre ela. <br><br>  O formato da solicita√ß√£o √© <b>simples</b> : <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"request"</span></span>: { <span class="hljs-string"><span class="hljs-string">"command"</span></span>: <span class="hljs-string"><span class="hljs-string">"      16"</span></span>, <span class="hljs-string"><span class="hljs-string">"original_utterance"</span></span>: <span class="hljs-string"><span class="hljs-string">"     , 16"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"SimpleUtterance"</span></span>, <span class="hljs-string"><span class="hljs-string">"nlu"</span></span>: { <span class="hljs-string"><span class="hljs-string">"tokens"</span></span>: [ <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"16"</span></span>], <span class="hljs-string"><span class="hljs-string">"entities"</span></span>: [...] } } }</code> </pre> <br>  Fornece o que o usu√°rio disse, o tipo de solicita√ß√£o e <b>NLU - Unidade de linguagem natural</b> .  Essa √© exatamente a m√°gica que a plataforma Yandex.Dialog assume.  Ela divide toda a frase que reconheceu em tokens - palavras.  Existem tamb√©m entidades sobre as quais falaremos um pouco mais tarde.  Usar tokens √© suficiente para come√ßar. <br><br>  Temos essas palavras e o que fazer com elas?  O usu√°rio disse alguma coisa, mas ele pode dizer as palavras em uma ordem diferente, usar a part√≠cula "n√£o", que muda tudo drasticamente, ou at√© dizer "manh√£" em vez de "manh√£".  Se o usu√°rio tamb√©m falar bielorrusso, haver√° uma ‚Äúsacola‚Äù, n√£o de manh√£.  Um grande projeto exigir√° a ajuda de linguistas para desenvolver uma habilidade que entenda tudo.  Mas fiz uma tarefa simples e sem ajuda externa. <br><br><h2>  Um computador pode falar como uma pessoa? </h2><br>  Essa √© uma pergunta filos√≥fica que o teste de Turing est√° tentando responder.  O teste permite, com uma certa probabilidade, determinar que a intelig√™ncia artificial possa se passar por uma pessoa.  Existe um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pr√™mio Loebner</a> para receber quais programas competem na aprova√ß√£o no teste de Turing.  A decis√£o √© tomada por um painel de ju√≠zes.  Para receber o pr√™mio, voc√™ precisa enganar 33% dos ju√≠zes ou mais.  Somente em 2014, o bot <b>Zhenya Gustman</b> de S√£o Petersburgo finalmente enganou a comiss√£o. <br><br><pre> <code class="plaintext hljs">[15:46:05] Dudge: My favourite music is contemporary Dazz, what do you prefer? [15:46:14] Eugene: To be short I'll only say that I HATE Britnie [sic] Spears. All other music is OK compared to her. [15:47:06] Dudge: do you like to play any musical instruments [15:47:23] Eugene: I'm tone deaf, but my guinea pig likes to squeal Beethoven's Ode to Doy every morning. I suspect our neighbors want to cut his throat ... Could you tell me about your job, by the way? [15:48:02] Dudge: Guinea pig? Are you an animal lover [15:48:08] Eugene: Yeah. A nice little guinea pig. Not some annoying chatter bot.</code> </pre> <br>  Em 2019, nada realmente mudou - ainda √© dif√≠cil enganar uma pessoa.  Mas estamos nos movendo gradualmente para isso. <br><br><h2>  Trabalho de script </h2><br>  Uma boa habilidade requer um caso de uso interessante.  Aconselho um livro que vale a pena ler - ‚ÄúDesign de interfaces de usu√°rio de voz: princ√≠pios de experi√™ncias de conversa√ß√£o‚Äù.  √â incr√≠vel escrever scripts para interfaces de voz e manter a aten√ß√£o do usu√°rio.  N√£o vi o livro em ingl√™s, mas ele √© lido com muita facilidade. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/871/3e1/222/8713e12220b6ce7a65563775dc2b49f2.jpg"><br><br>  A primeira coisa a come√ßar a desenvolver uma habilidade √© uma sauda√ß√£o. <br><br><blockquote>  ‚ÄúEnquanto voc√™ pensa no que dizer, fa√ßa rever√™ncia!  Isso economiza tempo. ‚Äù </blockquote><br>  Quando a habilidade √© ativada, voc√™ precisa segurar o usu√°rio desde o primeiro segundo e, para isso, precisa explicar como usar a habilidade.  Imagine que o usu√°rio lan√ßou a habilidade e houve sil√™ncio.  Como voc√™ sabe se uma habilidade funciona?  D√™ ao usu√°rio instru√ß√µes, como bot√µes na tela. <br><br><h3>  Di√°logo f√°cil </h3><br>  Sinais de di√°logo f√°cil.  A lista foi inventada por Ivan Golubev, e eu realmente gosto da reda√ß√£o. <br><br><ul><li>  Pessoal. <br></li><li>  Natural. <br></li><li>  Flex√≠vel. <br></li><li>  Ontext. <br></li><li>  <b>E</b> natsiative. <br></li><li>  Breve <b>J.</b> <br></li></ul><br>  <b>Pessoal</b> significa que o bot deve ter um personagem.  Se voc√™ conversar com Alice, entender√° que ela tem um personagem - os desenvolvedores cuidam disso.  Portanto, seu bot para a organicidade deve ter uma "personalidade".  Distribua frases com pelo menos uma voz, use as mesmas constru√ß√µes verbais.  Isso ajuda a reter o usu√°rio. <br><br>  <b>Natural</b> .  Se a solicita√ß√£o do usu√°rio for simples, a resposta deve ser a mesma.  Durante a comunica√ß√£o com o bot, o usu√°rio deve entender o que fazer a seguir. <br><br>  <b>Flex√≠vel</b> .  Prepare-se para qualquer coisa.  Existem muitos sin√¥nimos em russo.  O usu√°rio pode se distrair da coluna e transferir a conversa para o interlocutor e, em seguida, retornar √† coluna.  Tudo isso √© dif√≠cil de lidar.  Mas se voc√™ quer fazer um bot bem, ent√£o voc√™ precisa.  Lembre-se de que uma porcentagem de n√£o reconhecimento ainda ser√°.  Esteja preparado para isso - sugira op√ß√µes. <br><br>  <b>Contextual</b> - o bot, idealmente, deve se lembrar do que aconteceu antes.  Ent√£o a conversa ser√° animada. <br><br>  <i>- Alice, como est√° o tempo hoje?</i> <br>  <i>- Hoje no distrito de +11 a +20, nublado, com clareiras.</i> <br>  <i>- e amanh√£?</i> <br>  <i>- Amanh√£ no distrito, de +14 a +27, nublado, com clareiras.</i> <br><br>  Imagine que seu bot n√£o sabe armazenar contexto.  O que significa ent√£o para ele o pedido "e amanh√£?"  Se voc√™ sabe manter o contexto como Alice, pode usar os resultados anteriores para melhorar as respostas na habilidade. <br><br>  <b>Proativo</b> .  Se o usu√°rio ficar entorpecido, o bot dever√° solicitar: "Clique neste bot√£o!", "Olha, eu tenho uma foto para voc√™!", "Siga o link".  O bot deve lhe dizer como trabalhar com ele. <br><br>  O bot deve ser <b>curto</b> .  Quando uma pessoa fala por um longo tempo, √© dif√≠cil manter a aten√ß√£o da plat√©ia.  √â ainda mais complicado com o bot - n√£o √© uma pena, √© inanimado.  Para prender a aten√ß√£o, voc√™ precisa iniciar uma conversa de forma interessante, breve e sucinta.  Isso ajudar√° ‚ÄúEscreva.  Corte isso.  Quando voc√™ come√ßar a desenvolver bots, leia este livro. <br><br><h3>  Bases de dados </h3><br>  Ao desenvolver um bot complexo, voc√™ n√£o pode ficar sem um banco de dados.  Minha demonstra√ß√£o n√£o usa um banco de dados, √© simples.  Mas se voc√™ estragar alguns bancos de dados, pode usar as informa√ß√µes sobre a sess√£o do usu√°rio, pelo menos para armazenar o contexto. <br><br>  H√° uma nuance: o Yandex.Dialogs n√£o fornece informa√ß√µes privadas ao usu√°rio, como nome, localiza√ß√£o.  Mas essas informa√ß√µes podem ser solicitadas ao usu√°rio, salvas e vinculadas a um ID de sess√£o espec√≠fico, que o Yandex.Dialogs envia na solicita√ß√£o. <br><br><h3>  M√°quina de estado </h3><br>  Mencionando cen√°rios complexos, n√£o se pode deixar de recordar a m√°quina de estado.  Esse mecanismo h√° muito tempo tem sido excelente para programar microcontroladores e, √†s vezes, para o front end.  A m√°quina de estados √© conveniente para o cen√°rio: h√° estados dos quais passamos para outros estados para determinadas frases. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/914/9bb/e4d/9149bbe4d192a9d9e4ee0a42dc315044.jpg"><br><br>  N√£o exagere.  Voc√™ pode se deixar levar e criar uma enorme m√°quina de estado, o que ser√° dif√≠cil de entender - manter esse c√≥digo √© dif√≠cil.  √â mais f√°cil escrever um script que consiste em pequenos sub-scripts. <br><br><h3>  N√£o est√° claro  Especifique </h3><br>  Nunca diga: "Repita, por favor".  O que uma pessoa faz quando solicitada a repetir?  Ele fala mais alto.  Se o usu√°rio gritar com sua habilidade, o reconhecimento n√£o melhorar√°.  Fa√ßa uma pergunta esclarecedora.  Se uma parte do di√°logo do usu√°rio for reconhecida e algo estiver faltando, verifique o bloco que est√° faltando. <br><br>  O reconhecimento de texto √© a tarefa mais dif√≠cil no desenvolvimento de um bot, portanto, √†s vezes, o esclarecimento n√£o ajuda.  Em qualquer situa√ß√£o incompreens√≠vel, a melhor solu√ß√£o √© coletar tudo em um s√≥ lugar, registrar e analisar e usar no futuro.  Por exemplo, se o usu√°rio disser coisas francamente estranhas e incompreens√≠veis. <br><br>  <i>‚ÄúEstava fervendo.</i>  <i>Costa cremosa</i> <i><br></i>  <i>Piquei na nav.</i> <i><br></i>  <i>E grunhidos grunhiram.</i> <i><br></i>  <i>Como uma m√∫mia em um movimento.</i> <br><br>  Os usu√°rios podem usar inesperadamente algum neologismo, o que significa alguma coisa, e ele precisa ser processado de alguma forma.  Como resultado, a porcentagem de reconhecimento cai.  N√£o se preocupe - entre, estude e melhore seu bot. <br><br><h3>  Parar palavra </h3><br>  Deve haver algo para interromper a habilidade quando voc√™ quiser sair dela.  Alice sabe como parar ap√≥s as frases: "Alice, √© o suficiente!"  ou "Alice, pare!"  Mas os usu√°rios geralmente n√£o leem instru√ß√µes.  Portanto, responda pelo menos √† palavra "Parar" e retorne o controle para Alice. <br><br>  Agora vamos ver o c√≥digo. <br><br><h2>  Hora de uma demonstra√ß√£o </h2><br>  Eu quero implementar as seguintes frases. <br><br><ul><li>  Pr√≥ximos eventos em uma cidade. <br></li><li>  Nome da cidade: ‚Äúeventos em Moscou‚Äù, ‚Äúeventos em Minsk‚Äù, ‚ÄúS√£o Petersburgo‚Äù para mostrar os eventos que foram encontrados l√°. <br></li><li>  Pare as palavras: "Pare", "Basta".  "Obrigado" se o usu√°rio terminar a conversa com esta palavra.  Mas, idealmente, √© necess√°rio um linguista aqui. <br></li></ul><br>  Para "eventos futuros", qualquer frase √© adequada.  Criei um bot pregui√ßoso e, quando ele n√£o entende o que eles est√£o dizendo, ele fornece informa√ß√µes sobre os pr√≥ximos tr√™s eventos. <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"request"</span></span>: { <span class="hljs-string"><span class="hljs-string">"nlu"</span></span>: { <span class="hljs-string"><span class="hljs-string">"entities"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"tokens"</span></span>: { <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"end"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span> }, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"YANDEX.GEO"</span></span>, <span class="hljs-string"><span class="hljs-string">"value"</span></span>: { <span class="hljs-string"><span class="hljs-string">"house_number"</span></span>: <span class="hljs-string"><span class="hljs-string">"16"</span></span>, <span class="hljs-string"><span class="hljs-string">"street"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"city"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } } ] } } }</code> </pre> <br>  O Yandex aprimora gradualmente a plataforma Yandex.Dialogs e emite entidades que ele conseguiu reconhecer.  Por exemplo, ele sabe como obter endere√ßos de um texto, classificando-o em partes: cidade, pa√≠s, rua, casa.  Ele tamb√©m sabe reconhecer n√∫meros e datas, absolutos e relativos.  Ele entender√° que a palavra "amanh√£" √© a data de hoje, √† qual uma √© adicionada. <br><br><h3>  Responder ao usu√°rio </h3><br>  Voc√™ precisa responder de alguma forma ao seu usu√°rio.  Toda a habilidade √© de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">209 linhas,</a> com a √∫ltima linha vazia.  Nada complicado - trabalho para a noite. <br><br>  Tudo o que voc√™ faz √© processar a solicita√ß√£o POST e obter uma "solicita√ß√£o". <br><br><pre> <code class="javascript hljs">router.post(<span class="hljs-string"><span class="hljs-string">'/'</span></span>, (req/ res, next) ‚áí { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> request = req.body;</code> </pre> <br>  Al√©m disso, n√£o compliquei muito a m√°quina de estado, mas fui de acordo com as prioridades.  Se o usu√°rio quiser aprender a usar o bot, este √© o primeiro lan√ßamento ou um pedido de ajuda.  Portanto, basta prepar√°-lo para um "EmptyResponse" - √© assim que eu chamo. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (needHelp(request.request)) { res.json(prepareEmptyResponse(request)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; }</code> </pre> <br>  A fun√ß√£o needHelp √© simples. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">needHelp</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (req.nlu.token.length ‚â§ <span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; req.nlu.tokens.includes(<span class="hljs-string"><span class="hljs-string">''</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (req.nlu.token.length = <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; req.type ‚â† <span class="hljs-string"><span class="hljs-string">'ButtonPressed'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br>  Quando temos zero tokens, estamos no in√≠cio da solicita√ß√£o.  O usu√°rio acabou de iniciar a habilidade ou n√£o pediu nada.  Voc√™ precisa verificar se os tokens s√£o zero e isso n√£o √© um bot√£o - quando voc√™ clica no bot√£o, o usu√°rio tamb√©m n√£o diz nada.  Quando um usu√°rio pede ajuda, examinamos os tokens e procuramos a palavra "Ajuda".  A l√≥gica √© simples. <br><br>  Se o usu√°rio quiser parar. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (needToStop(request.request)) { res.json(prepareStopResponse(request)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; }</code> </pre> <br>  Ent√£o, estamos procurando algum tipo de palavra final dentro. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">needStop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> stopWords = [<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> req.nlu.token.length ‚â§ <span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; stopWords.some(w ‚áí <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> req.nlu.token.includes(w)); }</code> </pre> <br>  Em todas as respostas, voc√™ deve retornar as informa√ß√µes que o Yandex.Dialogs enviou sobre a sess√£o.  Ele precisa corresponder de alguma forma √† sua resposta e √† solicita√ß√£o do usu√°rio. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepare</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StopResponse</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { session, version } = req; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">response</span></span>: { <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">' .  !'</span></span>, <span class="hljs-attr"><span class="hljs-attr">end_session</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }, session, version, }; }</code> </pre> <br>  Portanto, o que voc√™ obteve nas vari√°veis ‚Äã‚Äã"sess√£o" e "vers√£o", retorne e tudo ficar√° bem.  J√° na resposta, voc√™ pode dar algum texto para Alice pronunci√°-lo e passar em "end session: true".  Isso significa que encerramos a sess√£o de habilidades e transferimos o controle para Alice. <br><br>  Quando voc√™ chama uma habilidade, Alice desliga.  Tudo o que ela ouve √© suas palavras de paragem, e voc√™ controla completamente o processo de trabalhar com a habilidade.  Portanto, voc√™ precisa retornar o controle. <br><br>  Com um pedido vazio √© mais interessante. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-string"><span class="hljs-string">"response"</span></span>: { <span class="hljs-string"><span class="hljs-string">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">'!        -  .'</span></span>, <span class="hljs-string"><span class="hljs-string">"tts"</span></span>: <span class="hljs-string"><span class="hljs-string">'!        -  .'</span></span>, <span class="hljs-attr"><span class="hljs-attr">buttons</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: {} hide: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, }, { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">'  '</span></span>, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: { <span class="hljs-attr"><span class="hljs-attr">city</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, } hide: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, }, ], <span class="hljs-attr"><span class="hljs-attr">end_session</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, }, session, version, };</code> </pre> <br>  H√° um campo <b>TTS</b> ( <b>Text To Speech</b> ) - <b>controle de voz</b> .  Este √© um formato simples que permite ler o texto de diferentes maneiras.  Por exemplo, a palavra "multidisciplinar" possui duas tens√µes no idioma russo - uma prim√°ria e a segunda secund√°ria.  A tarefa √© que Alice conseguiu pronunciar esta palavra corretamente.  Voc√™ pode quebr√°-lo com um espa√ßo: <br><br><pre> <code class="plaintext hljs">+ +</code> </pre> <br>  Ela o entender√° como dois.  O acento positivo √© destacado. <br><br>  H√° pausas no discurso - voc√™ coloca um sinal de pontua√ß√£o, que √© separado por espa√ßos.  Assim, voc√™ pode criar pausas dram√°ticas: <br><br><pre> <code class="plaintext hljs"> ‚Äî - - - - - - - - + </code> </pre> <br>  Eu j√° falei sobre <b>bot√µes</b> .  Eles s√£o importantes se voc√™ n√£o estiver se comunicando com uma coluna, mas com o aplicativo m√≥vel Yandex, por exemplo. <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"response"</span></span>: { <span class="hljs-string"><span class="hljs-string">"buttons"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Frontend Conf"</span></span>, <span class="hljs-string"><span class="hljs-string">"payload"</span></span>: {}, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://frontendconf.ru/moscow-rit/2019"</span></span> , <span class="hljs-string"><span class="hljs-string">"hide"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } ] } }</code> </pre> <br>  Os bot√µes tamb√©m s√£o dicas para frases que voc√™ percebe em sua habilidade.  As habilidades funcionam em aplicativos Yandex - voc√™ se comunica com a interface.  Se voc√™ quiser fornecer algumas informa√ß√µes - forne√ßa um link, o usu√°rio clica nele.  Voc√™ tamb√©m pode adicionar bot√µes para isso. <br><br>  H√° um campo de "carga √∫til" onde voc√™ pode adicionar dados.  Eles voltar√£o com uma "solicita√ß√£o" - voc√™ saber√°, por exemplo, como marcar este bot√£o. <br><br>  Voc√™ pode escolher as <b>vozes</b> que sua habilidade ir√° falar. <br><br><ul><li>  <b>Alice</b> √© a voz padr√£o de <b>Alice</b> .  Otimizado para intera√ß√µes curtas. <br></li><li>  Oksana - a voz do Yandex.Navigator. <br></li><li>  Jane <br></li><li>  Zahar. <br></li><li>  Ermil. <br></li><li>  <b>Erkan Yavas</b> - para textos longos.  Originalmente criado para ler not√≠cias. <br></li></ul><br>  Para <b>completar a habilidade</b> , basta retornar "end_session: true". <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"response"</span></span>: { <span class="hljs-string"><span class="hljs-string">"end_session"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }</code> </pre> <br><h3>  O que aconteceu com a demo </h3><br>  Primeiro, eu filtro por data. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">filterByDate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">events</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> events.filter(event ‚áí { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> current = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().getTime(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> start = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(event.start).getTime(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (start &gt; current) || (event.end &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(event.end).getTime() &gt; current &amp;&amp; start ‚â§ current); }); }</code> </pre> <br>  A l√≥gica √© simples: em todos os eventos que analisei no calend√°rio, tomo aqueles que ocorrer√£o no futuro ou eles est√£o indo agora.  Provavelmente √© estranho perguntar sobre eventos passados ‚Äã‚Äã- a habilidade n√£o √© sobre isso. <br><br>  Em seguida, a filtragem no local √© o objetivo. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">filterByPlace</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">events, req</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cities = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> geoEntities = req.nlu.entities.filter(e ‚áí e.type = <span class="hljs-string"><span class="hljs-string">'YANDEX.GEO'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (req.payload &amp;&amp; req.payload.city) cities.add(req.payload.city); geoEntities.forEach(e ‚áí { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> city = e.value.city &amp;&amp; e.value.city.toLowerCase(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (city &amp;&amp; !cities.has(city)) { cities.add(city); } });</code> </pre> <br>  Em "entidades", voc√™ pode encontrar a entidade YANDEX.GEO, que refina a localiza√ß√£o.  Se a entidade tiver uma cidade, adicione ao nosso conjunto.  A seguir, a l√≥gica tamb√©m √© simples.  Estamos procurando esta cidade em tokens e, se ela estiver l√°, estamos procurando o que o usu√°rio deseja.  Caso contr√°rio, procuramos todos os "locais" e "eventos" que temos. <br><br>  Suponha que o Yandex n√£o reconheceu que era o YANDEX.GEO, mas o usu√°rio nomeou a cidade - ele tinha certeza de que algo estava acontecendo l√°.  Percorremos todas as cidades em ‚Äúeventos‚Äù e procuramos o mesmo em tokens.  Acontece uma compara√ß√£o cruzada de matrizes.  N√£o √© a maneira mais produtiva, √© claro, mas o que √©.  Essa √© toda a habilidade! <br><br>  Por favor, n√£o me repreenda pelo c√≥digo - escrevi rapidamente.  Tudo √© primitivo l√°, mas tente us√°-lo ou apenas brincar. <br><br><h3>  Publicar Habilidade </h3><br>  V√° para a p√°gina Yandex.Dialogs. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/38e/4d1/ca6/38e4d1ca6e2f548fea625649f85c834f.jpg"><br><br>  Escolha uma habilidade em Alice.  Pressione o bot√£o ‚ÄúCriar di√°logo‚Äù e voc√™ entrar√° no formul√°rio que precisa preencher com seus dados. <br><br><ul><li>  <b>O nome</b> √© o que estar√° no di√°logo. <br></li><li>  <b>Nome de ativa√ß√£o</b> .  Se voc√™ selecionar o nome de ativa√ß√£o "Calend√°rio de padr√µes da Web" atrav√©s de um h√≠fen, Alice n√£o o reconhecer√° - ela n√£o ouvir√° h√≠fens.  Dizemos palavras sem h√≠fens e a ativa√ß√£o n√£o funcionar√°.  Para ganhar dinheiro, defina o nome como "Calend√°rio de padr√µes da Web". <br></li><li>  <b>Frases de ativa√ß√£o</b> para iniciar a habilidade.  Se for um jogo, "Vamos jogar alguma coisa", "Pergunte a algu√©m".  O conjunto √© limitado, mas isso ocorre porque essas frases s√£o ativadas para Alice.  Ela deve entender que √© hora de come√ßar uma habilidade. <br></li><li>  <b>URL do Webhook</b> - o mesmo endere√ßo para o qual Alice enviar√° solicita√ß√µes POST. <br></li><li>  <b>A voz</b>  O padr√£o √© Oksana.  Portanto, muitos no cat√°logo sua voz, n√£o Alice. <br></li><li>  <b>√â necess√°rio um dispositivo com uma tela?</b>  Se houver fotos, voc√™ estar√° limitado ao uso da habilidade. Na coluna, o usu√°rio n√£o poder√° inici√°-la. <br></li><li>  <b>As habilidades privadas</b> s√£o um campo importante para os desenvolvedores.  Se voc√™ n√£o est√° pronto para postar a habilidade em p√∫blico, mesmo que seja apenas em bruto, n√£o a mostramos no cat√°logo, limitando a privacidade.  As habilidades particulares s√£o moderadas rapidamente - em algumas horas.  Essas habilidades n√£o precisam ser exaustivamente testadas - o suficiente para corresponder ao nome da ativa√ß√£o.  Como o usu√°rio n√£o os encontrar√° no cat√°logo, eles s√£o mais leais a eles. <br></li><li>  <b>Notas para o moderador</b> .  Pedi ao moderador para ajudar: "Eu realmente preciso da habilidade para a demonstra√ß√£o na confer√™ncia!"  - e consegui superar a modera√ß√£o rapidamente. <br></li><li>  <b>Direitos autorais</b> .  Se voc√™, que n√£o trabalha em um banco condicional, decide criar uma habilidade para isso, precisa provar que tem o direito de faz√™-lo.  De repente eles vir√£o at√© voc√™?  E eles definitivamente vir√£o, e atrav√©s do distribuidor, ou seja, Yandex, que n√£o precisa de problemas extras. </li></ul><br>  Conclu√≠do - envie a habilidade por modera√ß√£o e voc√™ poder√° testar. <br><br><h2>  Teste </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu escrevi um servidor Express banal. </font><font style="vertical-align: inherit;">Essa √© uma API simples, coberta por testes regulares. </font><font style="vertical-align: inherit;">Existem utilit√°rios especializados, por exemplo, alice-tester - ele sabe como trabalhar com o formato exato que Alice fornece.</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> assert = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'assert'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> User = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'alice-tester'</span></span>); it(<span class="hljs-string"><span class="hljs-string">'should show help'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> user = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> User(<span class="hljs-string"><span class="hljs-string">'http://localhost:3000'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> user.enter(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> user.say(<span class="hljs-string"><span class="hljs-string">'  ?'</span></span>); assert.equal(user.response.text, <span class="hljs-string"><span class="hljs-string">'    .'</span></span>); assert.equal(user.response.tts, <span class="hljs-string"><span class="hljs-string">'    +.'</span></span>); assert.deepEqual(user.response.buttons, [{<span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">hide</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}]); }]);</code> </pre><br>       .,     ¬´¬ª. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ee/4ea/71f/2ee4ea71f971a916074c47ffc3434ef0.jpg"><br><br>  ,   ,      .   ,     : , ,     .   ,   ‚Äî    ,    .    Postman ‚Äî  . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> .</a> .   Just AI.   ,   ,          . <br><br>  <b> </b> .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dialogs.home.popstas.ru</a>  URL, ,  localhost.    ,     debug.    ,      localhost. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d8a/2d0/706/d8a2d07069f511e397d6a77f8bf4fd0b.jpg"><br><br>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><b> </b></a> .  ‚Äî    .    URL  ,    -       . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/243/89a/f0b/24389af0bfe571fc85a0b937e0a64406.jpg"><br><br><blockquote>     ‚Äî     . </blockquote><br> ,    , ,  . <br><br>  ‚Äî    <b> </b> .  ,    ,    ,   ,  ,    . - -           . <br><br><h2>    </h2><br>         <b>Dialogflow</b> ,     Google Now. ,    ‚Äî  ,     ‚Äî . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/471/fe9/b76/471fe9b76fd59e898ed4dae0a455733a.jpg"><br><br>    ,      .      .   ,         .     ,    . <br><br>   Google Dialogflow  .,  <b>Dialogflower</b> .          Alexa,   Google Now,   . ‚Äî   API,      . <br><br>   ,     . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aimyloqic</a> ‚Äî    .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Zenbot</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Tortu</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Alfa.Bot</a> ‚Äî  ,   . ! <br><br><h2>     </h2><br> <b>   FAQ</b> .    ,     .    ,      ,  . <br><br> <b></b> .   ,  ,     ,     .    ‚Äî   ,    .     ,      .    ,    . <br><br>    <b>IFTTT</b> ,      ‚Äî     Trello.    ‚Äî    API.         ,  ,     .        , IFTT ‚Äî     . <br><br>    <b>  </b> .      ,  .   . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1b4/a25/418/1b4a25418eaaf223dfb8e0744404b7a0.jpg"><br><br> ,  ¬´¬ª     . <br><br>         .     Xiaomi    .  .       . ,    Arduino - --- ,  ,   : ¬´,  -  2000!¬ª       ‚Äî ! <br><br>     ,     : ¬´,  !¬ª ‚Äî   !        . ,       . <br><br><h2>      </h2><br> <b>  </b> . ,    ,   :  ,   .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> .</a> .       .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">    .</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub-</a>     .,   .     ‚Äî   . <br><br> <b>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Telegram- .</a></b> .    ‚Äî    .    ,        .        .    . <br><br> <b>  </b> .       ,      .  - ,        .          , .   .   ,     . ,    : , -,    ,        .  , ,        .   : ¬´ ,    ?¬ª ,      ,  ,       . <br><br> <b></b> ‚Äî    ,       .     . <br><br> .   ‚Äî  .     ,   ,      . ,       . <br><br><blockquote>     ,     ,   - ,      ! <br></blockquote><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> ‚Äî     ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> ‚Äî   .     .   ‚Äî   ‚Äî ! <br><br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FrontendConf 2019</a>      ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CSS ‚Äî  </a> ¬ª.      ‚Äî      .  ,     FrontendConf 2019  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> . ,     ,     ,      ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a>  . <br><br>      .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> ,       . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt468545/">https://habr.com/ru/post/pt468545/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt468533/index.html">Carona no DevOps com o Express 42</a></li>
<li><a href="../pt468535/index.html">N√£o precisa de logs?</a></li>
<li><a href="../pt468537/index.html">No√ß√µes b√°sicas de DevOps. Entrada no projeto a partir do zero</a></li>
<li><a href="../pt468541/index.html">Arraste e solte componentes para usu√°rios cegos? Voc√™ est√° brincando</a></li>
<li><a href="../pt468543/index.html">Comit√™ do programa durante a semana FrontendConf. Entrevista com Sergey Popov</a></li>
<li><a href="../pt468547/index.html">Falando Ingl√™s, CSS, Grade e Acessibilidade no FrontendConf</a></li>
<li><a href="../pt468549/index.html">Limite de GPU. Como transferir tudo para a placa de v√≠deo e um pouco mais. Anima√ß√µes</a></li>
<li><a href="../pt468553/index.html">Gerenciamento de par√¢metros em aplicativos de neg√≥cios semelhantes a um sistema de controle de vers√£o</a></li>
<li><a href="../pt468555/index.html">Introdu√ß√£o a montagens determin√≠sticas em C / C ++. Parte 2</a></li>
<li><a href="../pt468557/index.html">WEB 3.0 - a segunda abordagem para o proj√©til</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>