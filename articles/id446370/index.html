<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍺 🕵🏼 🤵🏽 "Yah, sekali lagi, stasiun cuaca"? Tidak juga 🤖 💇🏻 🕜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Stasiun cuaca yang diusulkan didasarkan pada komputer PIDP11 buatan sendiri , yang terdiri dari raspberry dengan emulator PDP-11 dan casing dengan pan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>"Yah, sekali lagi, stasiun cuaca"? Tidak juga</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446370/"><img src="https://habrastorage.org/webt/aw/wy/yu/awwyyuan47fvnwenytungq8clu8.jpeg"><br><br>  Stasiun cuaca yang diusulkan didasarkan pada komputer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PIDP11</a> buatan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sendiri</a> , yang terdiri dari raspberry dengan emulator PDP-11 dan casing dengan panel depan dengan LED dan sakelar aktif.  Tetapi meskipun demikian, "raspberry" memiliki cukup GPIO kosong untuk menghubungkan juga sensor tekanan dan suhu. <br><br>  Emulator menjalankan OS 2.11BSD, di mana perangkat lunak stasiun cuaca "berputar".  Data adalah output ke dua terminal emulator.  Salah satunya - cool-retro-term - menampilkan informasi teks dalam cetakan besar menggunakan seni ASCII.  Yang kedua - emulator terminal grafis Tektronix 4010 dengan tabung penyimpanan - menampilkan kurva tekanan dan suhu. <a name="habracut"></a><br><br>  Metode untuk menghubungkan sensor BME280 dijelaskan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> : <br><br><pre><code class="plaintext hljs"> |  | GPIO    | | Raspberry Pi  | | ------------+--------------+-------------- VCC | 3,3  | P1-01 GND |  | P1-06 SCL | SCL  I2C | P1-05 SDA | SDA  I2C | P1-03</code> </pre> <br>  Tampilan OLED yang ditunjukkan pada foto di bawah ini terhubung secara paralel dengan sensor, tetapi ditugaskan alamat yang berbeda pada bus I <sup>2</sup> C.  Jika mau, Anda tidak perlu memasang layar sama sekali.  Penulis juga mengatur tombol untuk mematikan OS dengan benar sebelum mematikan daya. <br><br><img src="https://habrastorage.org/webt/zn/uj/p6/znujp611prwu14vttig0mwsiawy.jpeg"><br><br>  Untuk membuat perangkat berfungsi, pertama-tama Anda perlu menambahkan pengguna baru ke pengguna yang berjalan di emulator 2.11BSD seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> : <br><br>  Masuk sebagai pengguna root.  Masukkan perintah vipw untuk memulai editor vi dengan file / etc / passwd <br><br>  Masukkan baris dalam file: <br><br><pre> <code class="plaintext hljs">firstname::201:20:fullname:/home/firstname:/bin/tcsh</code> </pre> <br>  di mana nama depan dan nama lengkap adalah nama pengguna pendek dan lengkap. <br><br>  Keluar dari editor, buat folder rumah pengguna: <br><br><pre> <code class="plaintext hljs">cd /home mkdir firstname chown firstname firstname</code> </pre> <br>  Salin file .login dan .cshrc ke folder ini ' <br><br><pre> <code class="plaintext hljs"> cd /home/user cp .* /home/firstname cd /home/firstname chown firstname .*</code> </pre> <br>  Ketik vi .login dan edit prompt baris perintah dengan mengubah baris yang sesuai ke: <br><br><pre> <code class="plaintext hljs">set prompt='%n@%m:%c$ '</code> </pre> <br>  Keluar dari editor.  Logout dengan perintah logout, ubah kata sandi untuk pengguna baru dengan perintah passwd di bawah root, sekarang Anda dapat login menggunakan nama pengguna dan kata sandi pengguna baru. <br><br>  Setelah ini, perlu untuk membuat tanggal dan waktu dalam sistem diatur secara otomatis saat boot, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jadi</a> (untuk informasi di bawah ini, penulis berterima kasih kepada Jason Vanick dan Johnny Billquist): <br><br>  Pertama-tama konfigurasikan jaringan dan pastikan ping berfungsi.  Kemudian, tepat sebelum baris ntpt di file /etc/rc.local, masukkan baris: <br><br><pre> <code class="plaintext hljs">ntp -sf pool.ntp.org</code> </pre> <br>  Ubah baris terakhir dalam file /etc/ntp.conf ke: <br><br><pre> <code class="plaintext hljs">server pool.ntp.org</code> </pre> <br>  Anda dapat memilih server NTP lainnya.  Untuk mengatur zona waktu, periksa daftar zona di file / usr / share / zoneinfo dan temukan nama zona Anda di sana.  Masuk sebagai pengguna root dan masukkan perintah: <br><br><pre> <code class="plaintext hljs">cd /etc mv localtime localtime.old ln -s /usr/share/zoneinfo/timezone localtime</code> </pre> <br>  Operasi selanjutnya adalah menginstal dan mengkonfigurasi program yang akan memungkinkan Anda untuk meneruskan baris perintah Raspbian yang berjalan di "malink" nyata ke baris perintah 2.11BSD yang berjalan di emulator, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">seperti ini</a> : <br><br>  Dalam Raspbian di bawah root, masukkan perintah: <br><br><pre> <code class="plaintext hljs">sudo apt-get install rsh-server</code> </pre> <br>  Buat file .rhosts di folder beranda dengan konten berikut: <br><br><pre> <code class="plaintext hljs">bsd_ip_address bsd_user_name</code> </pre> <br>  di mana bsd_ip_address adalah alamat IP mesin virtual dengan 2.11 BSD, dan bsd_user_name adalah nama pengguna di 2.11 BSD yang dapat menjalankan perintah pada "malink" nyata, misalnya: <br><br><pre> <code class="plaintext hljs">192.168.1.99 rene</code> </pre> <br>  Tetapkan izin untuk file ini, jika tidak, tidak ada yang akan berfungsi: <br><br><pre> <code class="plaintext hljs">chmod 600 .rhosts</code> </pre> <br>  Pergi ke emulator, masukkan 2.11 BSD sebagai pengguna root dan edit / etc / hosts - tambahkan baris: <br><br><pre> <code class="plaintext hljs">remote_ip_address remote_full_name remote_nick_name</code> </pre> <br>  di mana remote_ip_address adalah alamat IP dari "raspberry" yang asli, dan remote_full_name dan remote_nick_name adalah nama domain dan aliasnya, misalnya: <br><br><pre> <code class="plaintext hljs">192.168.1.103 pizerow.home.lan pizerow</code> </pre> <br>  Masuk menggunakan nama yang ditetapkan sebelumnya (bsd_user_name) dan periksa apakah semuanya bekerja: <br><br><pre> <code class="plaintext hljs">rsh remote_nick_name -l pi -n “ls”</code> </pre> <br>  Anda baru saja menjalankan perintah ls dari emulator di real malink.  Jika, sebaliknya, formulir entri kata sandi muncul di depan Anda, itu berarti ada yang salah. <br><br>  Sekarang coba sesuatu yang lebih rumit.  Masukkan perintah: <br><br><pre> <code class="plaintext hljs">rsh remote_nick_name -l pi -n “cat /sys/class/thermal/thermal_zone0/temp”</code> </pre> <br>  Di folder rtest repositori ini ada program C kecil yang menunjukkan cara menggunakan popen untuk mendapatkan informasi dari program tertentu dan memprosesnya sedemikian rupa untuk mendapatkan output yang dapat dibaca manusia di 2.11BSD: <br><br><pre> <code class="plaintext hljs">rene@pdp11:rtest$ rtest **************************************************** * The CPU temperature on the pizerow is 42.2 deg C * **************************************************** rene@pdp11:rtest$</code> </pre> <br>  Anda baru saja melihat di emulator suhu prosesor sebenarnya di mana emulator ini "berputar". <br><br>  Unduh skrip Python dari folder weather / sensor repositori ini. <br><br>  Pastikan skrip berfungsi dengan benar di pizerow jarak jauh dan letakkan di folder / home / pi / bin <br><br>  Jalankan cool-retro-term dan emulator, masukkan 2.11BSD sebagai pengguna yang baru saja Anda buat dan masukkan perintah: <br><br><pre> <code class="plaintext hljs">mkdir weather cd weather</code> </pre> <br>  Dalam satu atau lain cara (misalnya, menggunakan FileZilla) seret dan letakkan file dari folder weather / BSD dari repositori ke folder weather dari OS yang berjalan di emulator.  Masukkan perintah cuaca, dan program akan mengekstrak data dari sensor dan menampilkannya dalam formulir ini: <br><br><pre> <code class="plaintext hljs"> rene@pdp11:weather$ weather Contacting remote sensor... Data received, analyzing ... ************************************** The sensor reports the following data: Temperature 7.0 C Pressure 969.8 hPa Humidity 66.8 % ************************************** rene@pdp11:weather$</code> </pre> <br>  Jika semuanya berfungsi, buat folder dats di folder ~ / weather, di mana weather2 dapat menyimpan log: <br><br><pre> <code class="plaintext hljs">cd cd weather mkdir data weather2</code> </pre> <br>  Setiap hari, weather2 mulai membuat di folder ~ / weather / data dengan file dengan nama yang sesuai dengan tanggal, dan setiap menit menambahkan baris dengan data ke dalamnya.  Dan di terminal itu akan terus menampilkan yang berikut, memperbarui layar juga satu menit sekali: <br><br><img src="https://habrastorage.org/webt/pp/bt/zk/ppbtzkw1rmufumlfz-ciivd1ffc.jpeg"><br><br>  Nah, weather3 bekerja dengan cara yang sama, hanya menampilkan lebih banyak waktu dan tekanan.  Ini menggunakan perpustakaan kutukan untuk memindahkan kursor. <br><br><img src="https://habrastorage.org/webt/vl/tv/a8/vltva8sjlqvyuq6byh3arhdhhye.jpeg"><br><br>  Coba juga untuk menampilkan nilai suhu dan tekanan di hari-hari sebelumnya dengan cara yang sama, serta menulis skrip untuk mendapatkan ramalan cuaca berdasarkan data ini.  Semoga beruntung <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lampiran 1</a> - instal dan konfigurasikan istilah keren-retro <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lampiran 2</a> - instalasi dan konfigurasi emulator terminal grafis Tektronix 4010 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id446370/">https://habr.com/ru/post/id446370/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id446352/index.html">Perlindungan tanpa perlindungan</a></li>
<li><a href="../id446360/index.html">Pameran "Subsoil-2019. Ruang belajar. Kecerdasan Penambangan</a></li>
<li><a href="../id446362/index.html">3 Kualitas Utama untuk Manajer Produk yang Sukses: Dmitry Orlov, Manajer Produk Senior</a></li>
<li><a href="../id446364/index.html">Lelucon dan referensi dari The Simpsons dalam Bahasa Inggris ke Explain</a></li>
<li><a href="../id446366/index.html">ZX Spectrum 128k lakukan sendiri. Bagian 2</a></li>
<li><a href="../id446372/index.html">Cintai pencarian, cintai, dan temukan data pribadi Anda di depan umum</a></li>
<li><a href="../id446376/index.html">Bagaimana cara menuliskan alamat rumah?</a></li>
<li><a href="../id446378/index.html">Masalah beralih ke waktu musim dingin dan musim panas untuk sekolah Skype tunggal</a></li>
<li><a href="../id446380/index.html">Evolusi H2 - fungsi jendela, CTE, JSON / XML dalam database tertanam</a></li>
<li><a href="../id446384/index.html">Kiat untuk mengembangkan proyek yang sangat besar di Revit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>