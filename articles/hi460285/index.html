<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСб ЁЯзС тЬи рд╣рдо PHP рддреИрдпрд╛рд░ рдХрд░ рд░рд╣реЗ рд╣реИрдВред рдХреИрд╕реЗ, рдЬрдмрдХрд┐, foreach, array_walk рдФрд░ рдХреБрдЫ рдЕрдиреНрдп рдбрд░рд╛рд╡рдиреЗ рд╢рдмреНрдж рд╣реИрдВ ЁЯТЕЁЯП╜ ЁЯСЙЁЯП╜ ЁЯРА</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╢рд╛рдо рд╣реЛ рдЪреБрдХреА рдереА, рдХреБрдЫ рдХрд░рдиреЗ рдХреЛ рдирд╣реАрдВ рдерд╛ред рдпрд╣ рдПрдХ рдЫреЛрдЯреЗ рд╕реЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреА рд╡реНрдпрд╡рд╕реНрдерд╛ рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рд╣реИ рдХрд┐ рдЖрдВрддрд░рд┐рдХ рд░реВрдк рд╕реЗ PHP рдореЗрдВ рд╕рд░рдгрд┐рдпреЛрдВ рдХреЛ рдЫрд╛рдВрдЯрдиреЗ рдХреЗ рдХреБрдЫ рддрд░реАрдХреЗ рдХреИрд╕реЗ рднрд┐...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд╣рдо PHP рддреИрдпрд╛рд░ рдХрд░ рд░рд╣реЗ рд╣реИрдВред рдХреИрд╕реЗ, рдЬрдмрдХрд┐, foreach, array_walk рдФрд░ рдХреБрдЫ рдЕрдиреНрдп рдбрд░рд╛рд╡рдиреЗ рд╢рдмреНрдж рд╣реИрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/460285/"><img src="https://habrastorage.org/webt/eu/xq/ks/euxqksyqzr1n_r62nqjvxr0nzsk.png"><br><br>  рд╢рд╛рдо рд╣реЛ рдЪреБрдХреА рдереА, рдХреБрдЫ рдХрд░рдиреЗ рдХреЛ рдирд╣реАрдВ рдерд╛ред  рдпрд╣ рдПрдХ рдЫреЛрдЯреЗ рд╕реЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреА рд╡реНрдпрд╡рд╕реНрдерд╛ рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рд╣реИ рдХрд┐ рдЖрдВрддрд░рд┐рдХ рд░реВрдк рд╕реЗ PHP рдореЗрдВ рд╕рд░рдгрд┐рдпреЛрдВ рдХреЛ рдЫрд╛рдВрдЯрдиреЗ рдХреЗ рдХреБрдЫ рддрд░реАрдХреЗ рдХреИрд╕реЗ рднрд┐рдиреНрди рд╣реИрдВред <br><br>  рдорд╛рд╕реНрдЯрд░ рдмреНрд░рд╛рдВрдЪ рдХреЗ рд╕реВрддреНрд░ (рдпрд╣ рдЕрдм 8 рдХреЗ рд╕рд╛рде 7.4 рдЗрдВрдЯрд░рд╕реЗрдкреНрдЯреЗрдб рд╣реИ) <br>  Php рд╕реЗ opcode рдЬрдирд░реЗрдЯрд░ 7.3.0ред <br>  7.3.6 рдкрд░ рдорд╛рдк рдХрд┐рдП рдЧрдП рдереЗред <br><br>  рдирд░реНрдбреНрд╕ рдХреЗ рд▓рд┐рдП рдЕрд╕реНрд╡реАрдХрд░рдг: рдиреИрдиреЛрд╕реЗрдХрдВрдбреНрд╕ рдФрд░ рдкреНрд░реЛрд╕реЗрд╕рд░ рдЪрдХреНрд░реЛрдВ рдХреЗ рдПрдХ рдЬреЛрдбрд╝реЗ рдХрд╛ рдЙрд▓реНрд▓реЗрдЦ рдХрд░рдирд╛ "рдкреЙрд▓реАрдмрд┐рдХрд▓" рдирд╛рдордХ рдПрдХ рдРрд╕реА рдкреЛрд▓рд┐рдорд┐рдХрд▓ рдЯреНрд░рд┐рдХ рд╣реИред <br><br>  рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рджрд╕рд┐рдпреЛрдВ рдпрд╛ рд╕реИрдХрдбрд╝реЛрдВ рдиреИрдиреЛрд╕реЗрдХрдВрдб рдФрд░ рд╣рдЬрд╛рд░реЛрдВ рдЙрдкрд╛рдп рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрд╣ рдЕрднреА рднреА рдЗрддрдирд╛ рдЫреЛрдЯрд╛ рд╣реИ рдХрд┐ рдЙрди рдкрд░ рдмрдЪрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдмрддрд╛рддреА рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рдХреЛрдб рдореЗрдВ рдХреБрдЫ рдЧрд▓рдд рд╣реИред <br><a name="habracut"></a><br><h2>  рд╕рдВрдХрд▓рди рдордВрдЪ </h2><br>  <b>foreach</b> , <b>for</b> рдФрд░ <b>do</b> рднрд╛рд╖рд╛ рдХреЗ рдХреАрд╡рд░реНрдб рд╣реИрдВ, рдЬрдмрдХрд┐ <b>array_ *</b> рдлрд╝рдВрдХреНрд╢рди рдорд╛рдирдХ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗ рдХрд╛рд░реНрдп рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, ceteris paribus, рдкрд╣рд▓реЗ рдХреЗ рдЕрдиреБрд╕рд╛рд░, parser рдиреИрдиреЛрд╕реЗрдХрдВрдб рдХреЗ рдПрдХ рдЬреЛрдбрд╝реЗ рдХреЛ рддреЗрдЬреА рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдЧрд╛ред <br><br><h3>  рдкрд╛рд░реНрд╕рд░ </h3><br>  <b>рдмрдпрд╛рди</b> рдЯреЛрдХрди рддрдХ, рдкрде рд╕рднреА рдХреЗ рд▓рд┐рдП рд╕рдорд╛рди рд╣реЛрдЧрд╛ <br><br><pre><code class="plaintext hljs">start -&gt; top_statement_list -&gt; top_statement -&gt; statement</code> </pre> <br>  рд▓реВрдкреНрд╕ рдХреЛ <b>рдмрдпрд╛рди</b> рд╕реНрддрд░ рдкрд░ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: <br><pre> <code class="plaintext hljs">-&gt;T_FOR '(' for_exprs ';' for_exprs ';' for_exprs ')' for_statement -&gt;T_FOREACH '(' expr T_AS foreach_variable ')' foreach_statement -&gt;T_FOREACH '(' expr T_AS foreach_variable T_DOUBLE_ARROW foreach_variable ')' foreach_statement -&gt;T_DO statement T_WHILE '(' expr ')' ';' -&gt;T_WHILE '(' expr ')' while_statement</code> </pre> <br>  <b>For_exprs</b> рдФрд░ рдмрд╕ <b>expr рдХреЗ</b> рдмреАрдЪ рдХрд╛ рдЕрдВрддрд░ рдХреЗрд╡рд▓ рдЗрддрдирд╛ рд╣реИ рдХрд┐ рдкрд╣рд▓реЗ рдПрдХ рдХреЗ рд▓рд┐рдП, рдХрдИ <b>expr</b> рд▓рд┐рдЦрдиреЗ <b>рдХреА</b> рдЕрдиреБрдорддрд┐ рд╣реИ, рдЕрд▓реНрдкрд╡рд┐рд░рд╛рдо рджреНрд╡рд╛рд░рд╛ рдЕрд▓рдЧ рдХреА рдЧрдИ рд╣реИред <br><br>  <b>foreach_variable</b> рдПрдХ рдРрд╕рд╛ рдирд┐рд░реНрдорд╛рдг рд╣реИ, рдЬреЛ рдХреЗрд╡рд▓ <b>рдЪрд░ рдХреЗ</b> рдЕрд▓рд╛рд╡рд╛, <b>рд╕реВрдЪреА</b> рдпрд╛ <b>[]</b> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдШрдЯрди рдХреЛ рднреА рдЯреНрд░реИрдХ рдХрд░рддрд╛ рд╣реИред <br><br>  <b>for_statement</b> , <b>foreach_statement</b> , <b>рдЬрдмрдХрд┐_</b> <b>statement</b> рдорд╛рдирдХ <b>рдХрдерди</b> рд╕реЗ рднрд┐рдиреНрди рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рд╡реЗ рд╡реИрдХрд▓реНрдкрд┐рдХ рд╡рд╛рдХреНрдпрд╡рд┐рдиреНрдпрд╛рд╕ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($array <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $element): <span class="hljs-comment"><span class="hljs-comment">#do something endforeach;</span></span></code> </pre> <br>  рдлрд╝рдВрдХреНрд╢рди рдХреЙрд▓ рдХреЛ рдмрд╣реБрдд рдЧрд╣рд░рд╛ рджрдлрди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="plaintext hljs">-&gt; expr -&gt; variable -&gt; callable_variable -&gt; function_call -&gt; name argument_list</code> </pre> <br>  <b>callable_variable</b> , рд╣рдореНрдо ... рдЕрдЬреАрдм рдмрд╛рдд рд╣реИ, рд╣реИ рдирд╛?  :) <br><br><h2>  рдЪрд▓реЛ opcodes рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВред </h2><br>  рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ, рдЖрдЗрдП рдкреНрд░рддреНрдпреЗрдХ рдХреБрдВрдЬреА рдФрд░ рдорд╛рди рдХреЛ рдореБрджреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд╕рд╛рде рдЕрдиреБрдХреНрд░рдорд┐рдд рд╕рд░рдгреА рдХрд╛ рдПрдХ рд╕рд░рд▓ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рд▓реЗрдВред  рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рдЗрд╕ рддрд░рд╣ рдХреЗ рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ <b>рдХрд░рдирд╛</b> , <b>рдЬрдмрдХрд┐</b> <b>рдХрд░рдирд╛</b> рдЙрдЪрд┐рдд рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдорд╛рд░рд╛ рд▓рдХреНрд╖реНрдп рдХреЗрд╡рд▓ рдЖрдВрддрд░рд┐рдХ рдЙрдкрдХрд░рдг рджрд┐рдЦрд╛рдирд╛ рд╣реИред <br><br><h4>  foreach </h4><br><pre> <code class="php hljs">$arr = [<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-string"><span class="hljs-string">'b'</span></span>, <span class="hljs-string"><span class="hljs-string">'c'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//        foreach($arr as $key =&gt; $value) echo $key.$value;</span></span></code> </pre> <br><pre> <code class="plaintext hljs">line #* EIO op fetch ext return operands --------------------------------------------------------------------------- 2 0 E &gt; ASSIGN !0, &lt;array&gt; 4 1 &gt; FE_RESET_R $4 !0, -&gt;7 2 &gt; &gt; FE_FETCH_R ~5 $4, !1, -&gt;7 3 &gt; ASSIGN !2, ~5 4 CONCAT ~7 !2, !1 5 ECHO ~7 6 &gt; JMP -&gt;2 7 &gt; FE_FREE $4 5 8 &gt; RETURN 1</code> </pre><br><h4>  рдпрд╣рд╛рдБ рдХреНрдпрд╛ рд╣реЛ рд░рд╣рд╛ рд╣реИ: </h4><br>  <b>FE_RESET_R</b> : рд╕рд░рдгреА рдХреЗ рд▓рд┐рдП <b>$ 4 рдХрд╛</b> <b>рдкреБрдирд░рд╛рд╡реГрддреНрдд</b> рдмрдирд╛рддрд╛ рд╣реИ <b>! 0</b> ред  рдпрд╛, рдпрджрд┐ рд╕рд░рдгреА рдЦрд╛рд▓реА рд╣реИ, рддреЛ рдпрд╣ рддреБрд░рдВрдд рдЕрдиреБрджреЗрд╢ <b>7 рдкрд░ рдЬрд╛рддрд╛ рд╣реИ</b> ред <br>  <b>FE_FETCH_R</b> : рдПрдХ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдЪрд░рдг рдХрд░рддрд╛ рд╣реИ, <b>~ 5</b> рдкрд░ рд╡рд░реНрддрдорд╛рди рдХреБрдВрдЬреА рдФрд░ <b>1</b> рдкрд░ рдорд╛рди <b>рдирд┐рдХрд╛рд▓рддрд╛ рд╣реИ</b> ред  рдпрд╛, рдпрджрд┐ рд╕рд░рдгреА рдХрд╛ рдЕрдВрдд рдкрд╣реБрдБрдЪ рдЧрдпрд╛ рд╣реИ, рддреЛ рдпрд╣ рдирд┐рд░реНрджреЗрд╢ <b>7 рдкрд░ рдЬрд╛рддрд╛ рд╣реИ</b> ред <br>  рдирд┐рд░реНрджреЗрд╢ <b>3-6</b> рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рдирд╣реАрдВ <b>рд╣реИрдВ</b> ред  рдпрд╣рд╛рдБ рдПрдХ рдирд┐рд╖реНрдХрд░реНрд╖ рд╣реИ рдФрд░ <b>FE_FETCH_R рдкрд░</b> рд╡рд╛рдкрд╕ <b>рд▓реМрдЯреЗрдВ</b> ред <br>  <b>FE_FREE</b> : <b>рдкреБрдирд░рд╛рд╡реГрддрд┐</b> рдХреЛ рдирд╖реНрдЯ рдХрд░рддрд╛ рд╣реИред <br><br><h4>  рдЬрдмрдХрд┐, рдХреЗ рд▓рд┐рдП ... </h4><br><pre> <code class="php hljs">$length = count($arr); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($i = <span class="hljs-number"><span class="hljs-number">0</span></span>; $i &lt; $length; $i++) <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $i.$arr[$i];</code> </pre> <br>  рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ <b>рдЬрдмрдХрд┐</b> рдХрд╛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдорд╛рдорд▓рд╛ рд╣реИ <br><br><pre> <code class="php hljs">$i = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>($i &lt; $length) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $i.$arr[$i]; $i++; }</code> </pre> <br>  рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ <b>if + goto</b> рдХрд╛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдорд╛рдорд▓рд╛ рд╣реИ <br><br><pre> <code class="php hljs">$i = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> check; body: <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $i.$arr[$i]; $i++; check: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($i &lt; $length) <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> body;</code> </pre> <br>  рддреАрдиреЛрдВ рдорд╛рдорд▓реЛрдВ рдХреЗ рдСрдкрдХреЛрдб рд▓рдЧрднрдЧ рд╕рдорд╛рди рд╣реЛрдВрдЧреЗред  рдЬрдм рддрдХ <b>рдЕрдЧрд░</b> , рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ <b>JMPNZ</b> <b>JMPZ + JMP</b> рдХреА рдЬреЛрдбрд╝реА рдореЗрдВ рдмрджрд▓ рдЬрд╛рдПрдЧрд╛, <b>рдЕрдЧрд░</b> рдЙрд╕рдХреЗ рд╢рд░реАрд░ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br>  <b>рдбреЛ</b> рд▓реВрдк рдХреЗ рд▓рд┐рдП, рд╕рддреНрдпрд╛рдкрди рдХреЗ рдмрд╛рдж рдХреА рдкреНрд░рдХреГрддрд┐ рдХреЗ рдХрд╛рд░рдг рдСрдкрдХреЛрдб рдереЛрдбрд╝рд╛ рдЕрд▓рдЧ рд╣реЛрдЧрд╛ред <br><br><pre> <code class="plaintext hljs">line #* EIO op fetch ext return operands --------------------------------------------------------------------------- 3 0 E &gt; ASSIGN !0, &lt;array&gt; 5 1 COUNT ~4 !0 2 ASSIGN !1, ~4 6 3 ASSIGN !2, 0 4 &gt; JMP -&gt;10 5 &gt; FETCH_DIM_R ~7 !0, !2 6 CONCAT ~8 !2, ~7 7 ECHO ~8 8 POST_INC ~9 !2 9 FREE ~9 10 &gt; IS_SMALLER ~10 !2, !1 11 &gt; JMPNZ ~10, -&gt;5 12 &gt; &gt; RETURN 1</code> </pre> <br>  рдЬреИрд╕реА рдХрд┐ рдЙрдореНрдореАрдж рдереА, рдЕрдзрд┐рдХ рдСрдкрдХреЛрдб рд╣реИрдВред <br>  <b>0-2</b> : <b>$ рд▓рдВрдмрд╛рдИ рдХреА</b> рдЧрдгрдирд╛ред <br>  <b>3: $ i = 0</b> <br>  <b>4, 10, 11</b> : рдирд┐рдХрд╛рд╕ рд╕реНрдерд┐рддрд┐ рдХреА рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЬрд╛рдВрдЪ рдФрд░, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдпрд╛ рддреЛ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдирд╛ рдпрд╛ рдЪрдХреНрд░ рдХреЗ рд╢рд░реАрд░ рдореЗрдВ рд╕рдВрдХреНрд░рдордгред <br>  <b>5 (FETCH_DIM_R): $ рдЧрд┐рд░рдлреНрддрд╛рд░ [$ i]</b> <br>  <b>6-7</b> : рдирд┐рд╖реНрдХрд░реНрд╖ <br>  <b>8-9: $ i ++</b> (рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдХрд┐рд╕реА рднреА рдорд╛рдорд▓реЗ рдореЗрдВ рд╡реЗрддрди рд╡реГрджреНрдзрд┐ рдПрдХ рдорд╛рди рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рднрд▓реЗ рд╣реА рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рди рд╣реЛред рдЗрд╕рд▓рд┐рдП, рдЗрд╕реЗ рдЦрд╛рд▓реА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд <b>рдореБрдлрд╝реНрдд</b> рдирд┐рд░реНрджреЗрд╢ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ)ред <br>  <b>10-11</b> : рд╡реЗрддрди рд╡реГрджреНрдзрд┐ рдХреЗ рдмрд╛рдж рдирд┐рдХрд╛рд╕ рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдБрдЪ рдХрд░рдирд╛ред <br><br><h4>  рдпрд╛ рдЖрдк рдЕрднреА рднреА рдкреБрдирд░рд╛рд╡реГрддрд┐ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </h4><br><pre> <code class="php hljs">$value = reset($arr); $key = key($arr); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>($key !== <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $key.$value; $value = next($arr); $key = key($arr); }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">рдмрд┐рдЧрд╛рдбрд╝рдиреЗ рдХреЗ рдиреАрдЪреЗ рдЪрд╛рджрд░</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">line #* EIO op fetch ext return operands --------------------------------------------------------------------------- 3 0 E &gt; ASSIGN !0, &lt;array&gt; 5 1 INIT_FCALL 'reset' 2 SEND_REF !0 3 DO_ICALL $4 4 ASSIGN !1, $4 6 5 INIT_FCALL 'key' 6 SEND_VAR !0 7 DO_ICALL $6 8 ASSIGN !2, $6 7 9 &gt; JMP -&gt;20 8 10 &gt; CONCAT ~8 !2, !1 11 ECHO ~8 9 12 INIT_FCALL 'next' 13 SEND_REF !0 14 DO_ICALL $9 15 ASSIGN !1, $9 10 16 INIT_FCALL 'key' 17 SEND_VAR !0 18 DO_ICALL $11 19 ASSIGN !2, $11 7 20 &gt; IS_NOT_IDENTICAL ~13 !2, null 21 &gt; JMPNZ ~13, -&gt;10 11 22 &gt; &gt; RETURN 1</code> </pre> <br></div></div><br>  рдпрд╣ рд╡рд┐рдХрд▓реНрдк рдЕрдЪреНрдЫрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдХрд┐рд╕реА рднреА рдХреБрдВрдЬреА рдХреЗ рд╕рд╛рде рдПрдХ рд╕рд░рдгреА рдкрд░ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИ, рдФрд░ рди рдХреЗрд╡рд▓ рдореЛрдиреЛрдЯреЛрдирд┐рдХ рд░реВрдк рд╕реЗ рдмрдврд╝рддреЗ рдкреВрд░реНрдгрд╛рдВрдХ рдХреЗ рд╕рд╛рдеред <br><br>  <b>рд░реАрд╕реЗрдЯ</b> , <b>рдЕрдЧрд▓рд╛</b> рдФрд░ <b>рдореБрдЦреНрдп</b> рдХрд╛рд░реНрдп рдмрд╣реБрдд рд╣рд▓реНрдХреЗ рд╣реЛрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЙрдиреНрд╣реЗрдВ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдУрд╡рд░рд╣реЗрдб рдЕрднреА рднреА рд╣реИред  рдФрд░, рдЬреИрд╕рд╛ рдХрд┐ рд╣рдо рдмрд╛рдж рдореЗрдВ рджреЗрдЦреЗрдВрдЧреЗ, рдпреЗ рд▓рд╛рдЧрдд рдЕрдзрд┐рдХ рд╣реИрдВред <br><br>  рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг <b>рдлреЙрд░реНрдЪреНрдпреВрдирд░</b> рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЗ рд╕рдорд╛рди рд╣реИ, рдЙрдирдХреЗ рдмреАрдЪ рджреЛ рдореВрд▓рднреВрдд рдЕрдВрддрд░ рд╣реИрдВред <br><br>  1) рдЬрд╣рд╛рдВ <b>рд░реАрд╕реЗрдЯ</b> , <b>рдЕрдЧрд▓реА</b> рдФрд░ <b>рдХреБрдВрдЬреА</b> (рдФрд░ <b>рд╡рд░реНрддрдорд╛рди</b> рднреА) рдПрдХ рд╕рд░рдгреА рдХреЗ рдЖрдВрддрд░рд┐рдХ рдкреЙрдЗрдВрдЯрд░ рдХреЗ рд╕рд╛рде рд╕реАрдзреЗ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, <b>рдлрд╝реЙрд░рдЪ</b> рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдЗрдЯреНрд░реЗрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЖрдВрддрд░рд┐рдХ рдкреЙрдЗрдВрдЯрд░ рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдирд╣реАрдВ рдмрджрд▓рддрд╛ рд╣реИред <br><br>  рдпрд╛рдиреА <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($arr <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $v) <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $v.<span class="hljs-string"><span class="hljs-string">' - '</span></span>.current($arr).PHP_EOL; <span class="hljs-comment"><span class="hljs-comment">//---------------- a - a b - a c - a</span></span></code> </pre> <br>  2) рдЬрдм рдореВрд▓реНрдп рд╕реЗ рдкреБрдирд░рд╛рд╡реГрддрд┐ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <b>foreach</b> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЬреЛ рдХреБрдЫ рднреА рд▓реВрдк рдХреЗ рдЕрдВрджрд░ рд╕рд░рдгреА рдХреЗ рд╕рд╛рде рдХрд░рддреЗ рд╣реИрдВ, рдореВрд▓ рдбреЗрдЯрд╛ рд╕реЗрдЯ рдХреЛ рдкреНрд░рд╕рд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($arr <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $v) { $arr = [<span class="hljs-string"><span class="hljs-string">'X'</span></span>,<span class="hljs-string"><span class="hljs-string">'Y'</span></span>,<span class="hljs-string"><span class="hljs-string">'Z'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $v.PHP_EOL; } var_dump($arr); <span class="hljs-comment"><span class="hljs-comment">//---------------- a b c array(3) { [0]=&gt; string(1) "X" [1]=&gt; string(1) "Y" [2]=&gt; string(1) "Z" }</span></span></code> </pre> <br>  рдХреНрдпрд╛ рд╣реЛрдЧрд╛ рдЬрдм рд▓рд┐рдВрдХ рдкрд░ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЗрд╕ RFC</a> рдореЗрдВ рдкрдврд╝реА рдЬрд╛ рд╕рдХрддреА рд╣реИред  рд╡рд╣рд╛рдВ рд╕рдм рдХреБрдЫ рдмрд╣реБрдд рд╕рд░рд▓ рдирд╣реАрдВ рд╣реИред <br><br><h4>  <b>array_walk</b> рдЕрдирд╛рдо рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рд╛рде </h4><br><pre> <code class="php hljs">array_walk($arr, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($value, $key)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $key.$value;});</code> </pre> <br>  рдЪреВрдВрдХрд┐ рдПрдХ рдХрд╕реНрдЯрдо рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЕрдлреАрдо рдХрд╛ рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реЗрдЯ рд╣реЛрдЧрд╛ред <br><br><h4>  рд╕рдорд╛рд░реЛрд╣ </h4><br><pre> <code class="plaintext hljs">line #* EIO op fetch ext return operands --------------------------------------------------------------------------- 0 E &gt; RECV !0 1 RECV !1 2 CONCAT ~2 !1, !0 3 ECHO ~2 4 &gt; RETURN null</code> </pre><br><h4>  рдореБрдЦреНрдп рдХреЛрдб </h4><br><pre> <code class="plaintext hljs">line #* EIO op fetch ext return operands --------------------------------------------------------------------------- 2 0 E &gt; ASSIGN !0, &lt;array&gt; 4 1 INIT_FCALL 'array_walk' 2 SEND_REF !0 3 DECLARE_LAMBDA_FUNCTION '%00%7Bclosure%7D%2Fin%2FHuNEK0x7f9fa62d105a' 4 SEND_VAL ~2 5 DO_ICALL 6 &gt; RETURN 1</code> </pre> <br>  рдЪреВрдВрдХрд┐ <b>array_walk</b> , рдорд╛рдирдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рдмрд╛рдХреА рдХрд╛рд░реНрдпреЛрдВ рдХреА рддрд░рд╣, рдЖрдВрддрд░рд┐рдХ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╕рдВрдХрд▓рд┐рдд рдУрдкрдХреЛрдб рдореЗрдВ рдХреЛрдИ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рддрдВрддреНрд░ рдирд╣реАрдВ рд╣реИред <br><br>  <b>INIT_FCALL</b> : <b>array_walk</b> рдкрд░ рдХреЙрд▓ рдкреНрд░рд╛рд░рдВрдн рдХрд░реЗрдВ <br>  <b>SEND_REF</b> : рдХреЙрд▓ рд╕реНрдЯреИрдХ рдкрд░ рдПрдХ рд╕рд░рдгреА рд╕рдВрджрд░реНрдн рдбрд╛рд▓реЗрдВ <br>  <b>DECLARE_LAMBDA_FUNCTION</b> : рдПрдХ рдЕрдирд╛рдо рдлрд╝рдВрдХреНрд╢рди рдШреЛрд╖рд┐рдд рдХрд░реЗрдВ <br>  <b>SEND_VAL</b> : рд╣рдордиреЗ рдХреЙрд▓ рд╕реНрдЯреИрдХ рдкрд░ рдПрдХ рдЕрдирд╛рдо рдлрд╝рдВрдХреНрд╢рди рдбрд╛рд▓рд╛ <br>  <b>DO_ICALL</b> : рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <b>array_walk</b> рдЪрд▓рд╛рдПрдВ <br><br>  рдЕрдЧрд▓рд╛, рд╕рд░рдгреА рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рддрддреНрд╡ рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░реЗ рд▓реИрдореНрдмреНрдбрд╛ рдХреЗ рдХреЙрд▓ рдХреЗ рд╕рд╛рде рдЬрд╛рджреВ рд╣реЛрддрд╛ рд╣реИред <br><br><h4>  <b>array_walk</b> рдкреВрд░реНрд╡рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП </h4><br>  рдПрдХ рдЕрдирд╛рдо рдХреЗ рд╕рд╛рде рдХреЙрд▓ рдХрд░рдиреЗ рд╕реЗ рдмрд╣реБрдд рдЕрд▓рдЧ рдирд╣реАрдВ, рд╕рд┐рд╡рд╛рдп рдЗрд╕рдХреЗ рдХрд┐ рд╢рд╛рдпрдж рд░рдирдЯрд╛рдЗрдо рдореЗрдВ рд▓реИрдореНрдмрдбрд╛ рдмрдирд╛рдиреЗ рдХреЗ рдУрд╡рд░рд╣реЗрдб рд╕реЗ рдереЛрдбрд╝рд╛ рдХрдоред <br><br><pre> <code class="plaintext hljs">line #* EIO op fetch ext return operands --------------------------------------------------------------------------- 3 0 E &gt; ASSIGN !0, &lt;array&gt; 9 2 INIT_FCALL 'array_walk' 3 SEND_REF !0 4 SEND_VAL 'my_echo' 5 DO_ICALL 6 &gt; RETURN 1</code> </pre> <br>  рдирд┐рд╖реНрдХрд░реНрд╖ рд╕рд╛рдорд╛рдиреНрдп рд╣реИрдВред  <b>foreach рдХреЛ</b> рдПрд░рд░реЗрдЯрд┐рдВрдЧ рдПрд░реЗрдЬрд╝ рдХреЗ рд▓рд┐рдП рдХрд╕реНрдЯрдорд╛рдЗрдЬрд╝ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬрдмрдХрд┐ рдмрд╛рдХреА рд▓реВрдкреНрд╕ рдХреЗрд╡рд▓ <b>+ рдЧреЛрдЯреЛ рдХреЗ</b> рдКрдкрд░ рдПрдХ рдЖрд╡рд░рдг рд╣реИред <br><br>  рдорд╛рдирдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рдХрд╛рд░реНрдп рдПрдХ рдмреНрд▓реИрдХ рдмреЙрдХреНрд╕ рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрдд рдкрд░ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВред <br><br><h2>  рдереЛрдбрд╝рд╛ рдФрд░ рдЧрд╣рд░рд╛ рдЙрддрд░рдирд╛ </h2><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЗрд╕рдХреЗ рдФрд░ рдЗрд╕рдХреЗ opcode <b>FETCH_DIM_R рдХреЗ</b> рд╕рд╛рде рдорд╛рдорд▓реЗ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ, рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреБрдВрдЬреА рджреНрд╡рд╛рд░рд╛ рдорд╛рди рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЖрдЗрдЯрдо рдХреЛ рд╣реИрд╢ рддрд╛рд▓рд┐рдХрд╛ ( <b>ZEND_HASH_INDEX_FIND</b> ) рдореЗрдВ рдПрдХ рдЦреЛрдЬ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдирд┐рдХрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдирд┐рд╖реНрдХрд░реНрд╖рдг рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд░реЗ рд╣реБрдП рд╕рд░рдгреА</a> рд╕реЗ рдЖрддрд╛ рд╣реИ (рдЪрд╛рдмрд┐рдпрд╛рдБ рдПрдХ рдирд┐рд░рдВрддрд░ рд╕рдВрдЦреНрдпрд╛рддреНрдордХ рдЕрдиреБрдХреНрд░рдо рд╣реИрдВ) - рдпрд╣ рдПрдХ рдХрд╛рдлреА рдЖрд╕рд╛рди рдФрд░ рддреНрд╡рд░рд┐рдд рд╕рдВрдЪрд╛рд▓рди рд╣реИред  рдЕрдирдкреЗрдХреНрд╖рд┐рдд рд╕рд░рдгрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдереЛрдбрд╝рд╛ рдЕрдзрд┐рдХ рдорд╣рдВрдЧрд╛ рд╣реЛрдЧрд╛ред <br><br>  рдЕрдм <b>foreach</b> ( <b>FE_FETCH_R</b> )ред  рд╕рдм рдХреБрдЫ рдпрд╣рд╛рдБ рд╣реИ: <br><br><ol><li>  рдпрд╣ рджреЗрдЦрдирд╛ рдХрд┐ рдЕрдЧрд░ рдЗрдЯрд░реНрдЗрдВрдЯрд░ рдкреЙрдЗрдВрдЯрд░ рдРрд░реЗ рдХреЗ рдмрд╛рд╣рд░ рд╣реИ </li><li>  рд╡рд░реНрддрдорд╛рди рдХреБрдВрдЬреА рдФрд░ рдореВрд▓реНрдп рдХреЛ рдкреБрдирдГ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ </li><li>  рд╡реГрджреНрдзрд┐ рд╕реВрдЪрдХ </li></ol><br>  рдЦреИрд░, <b>array_walk</b> рдЬреИрд╕реЗ <b>рдлрдВрдХреНрд╢рдВрд╕ рдХрд╛</b> рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ?  рд╣рд╛рд▓рд╛рдБрдХрд┐ рд╡реЗ рд╕рднреА рдЕрд▓рдЧ-рдЕрд▓рдЧ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╡реЗ рд╕рднреА рдПрдХ рд╣реА рд╕рд┐рджреНрдзрд╛рдВрдд рд╣реИрдВред <br><br>  рдпрджрд┐ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рд░рд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ (рдЫрджреНрдо рдХреЛрдб): <br><br><pre> <code class="cpp hljs">reset_pointer() <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { value = get_current_value() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-comment"><span class="hljs-comment">//  NULL,   zval  NULL key = get_current_key() call_function(myFunction, key, value) increment_pointer() } while(true)</span></span></code> </pre> <br>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдЕрдВрджрд░ рд╕рдм рдХреБрдЫ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рд╛рд░ рд╕рдорд╛рди рд╣реИ - PHP рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди (рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рдирд╣реАрдВ рд▓реЗрддреЗ) рдХреА рднрд╛рдЧреАрджрд╛рд░реА рдХреЗ рдмрд┐рдирд╛ рд╣реИрд╢ рддрд╛рд▓рд┐рдХрд╛ рдХреА рдПрдХ рддреНрд╡рд░рд┐рдд рдЦреЛрдЬ рд╣реИред <br><br><h2>  рдЦреИрд░, рдХреБрдЫ рдорд╛рдк </h2><br>  рдФрд░ рдлрд┐рд░ рдЖрдЦрд┐рд░рдХрд╛рд░, рдорд╛рдк рдХреЗ рдмрд┐рдирд╛ рд▓реЗрдЦ рдХреНрдпрд╛ рд╣реИ (рд╕реНрдореГрддрд┐ рд╕реЗ рдпрд╣ рдЗрддрдирд╛ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рдирд┐рдХрд▓рд╛ рдХрд┐ рдЙрд╕рдиреЗ рдЕрдкрдирд╛ рдорд╛рдк рд╣рдЯрд╛ рджрд┐рдпрд╛)ред <br><br>  рдПрдХ рд╕рд░рдгреА рдХреЗ рд░реВрдк рдореЗрдВ, рдкрд░рдВрдкрд░рд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рд╣рдо 70.108 рд▓рд╛рдЗрдиреЛрдВ рдХреЗ рд▓рд┐рдП zend_vm_execute.h рд▓реЗрддреЗ рд╣реИрдВред <br><br><div class="spoiler">  <b class="spoiler_title">Spoiler рдкреИрдорд╛рдЗрд╢ рд╕реНрдХреНрд░рд┐рдкреНрдЯ</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $array = explode(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>, file_get_contents(<span class="hljs-string"><span class="hljs-string">'/Users/rjhdby/CLionProjects/php-src/Zend/zend_vm_execute.h'</span></span>)); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myEcho</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($key, $value)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $key . $value; } ob_start(); $startTime = microtime(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ($i = <span class="hljs-number"><span class="hljs-number">0</span></span>; $i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; $i++) { <span class="hljs-comment"><span class="hljs-comment">// foreach ($array as $key =&gt; $value) { // echo $key . $value; // } // foreach ($array as $key =&gt; &amp;$value) { // echo $key . $value; // } // $length = count($array); // for ($j = 0; $j &lt; $length; $j++) { // echo $j . $array[$j]; // } // array_walk($array, function($value, $key) { // echo $key . $value; // }); // array_walk($array, static function($value, $key) { // echo $key . $value; // }); // array_walk($array, 'myEcho'); // $value = reset($array); // $key = key($array); // while($key !== null) { // echo $key.$value; // $value = next($array); // $key = key($array); // } } $endTime = microtime(true); ob_clean(); echo "time: " . ($endTime - $startTime);</span></span></code> </pre> <br></div></div><br>  рдкреНрд░рддреНрдпреЗрдХ рдорд╛рдк рдХреЛ 10 рдмрд╛рд░ рдЪрд▓рд╛рдпрд╛ рдЧрдпрд╛, рдЬреЛ рдкрд╣рд▓реЗ 4 рдЕрдВрдХреЛрдВ рдореЗрдВ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░ рд╣реЛрддрд╛ рд╣реИред <br><br><pre> <code class="plaintext hljs">foreach time: 0.12159085273743 foreach(reference) time: 0.11191201210022 for, while time: 0.13130807876587 array_walk(lambda) time: 0.87953400611877 array_walk(static lambda) time: 0.87544417497211 array_walk(name) time: 0.50753092765808 next,key time: 1.06258893013</code> </pre> <br><h3>  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рджреЗрдирд╛ </h3><br>  рдкрд░рд┐рдгрд╛рдореЛрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рддреЗ рд╣реБрдП, рдпрд╣ рдзреНрдпрд╛рди рд░рдЦрдирд╛ рди рднреВрд▓реЗрдВ рдХрд┐ рдЙрдиреНрд╣реЗрдВ 70 рд╣рдЬрд╛рд░ рддрддреНрд╡реЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ 10 рдкрд╛рд╕ рджрд┐рдП рдЧрдП рдереЗред <br><br>  рдкреВрд░реНрдг рд╡рд┐рд░реЛрдзреА рдирд╛рдпрдХ <b>рдЕрдЧрд▓реА / рдХреБрдВрдЬреА рдХреЗ</b> рд╕рд╛рде <b>foreach</b> рдХрд╛ "рдЕрдиреБрдХрд░рдг" рдерд╛ред  рдЬрдм рддрдХ рдмрд┐рд▓реНрдХреБрд▓ рдЖрд╡рд╢реНрдпрдХ рди рд╣реЛ рдРрд╕рд╛ рди рдХрд░реЗрдВред <br><br>  <b>array_walk рдХреЗ</b> рд╕рд╛рде рдПрдХ рд▓реИрдореНрдмреНрдбрд╛ рдЙрд╕рдХреА рдкреАрда рдореЗрдВ рд╕рд╛рдБрд╕ рд▓реЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рдЕрддрд┐ рд╕реВрдХреНрд╖реНрдо рдЕрдВрддрд░ рд╣реИред  рдЖрдЧрд╛рдореА JIT рдирд╛рдЯрдХреАрдп рд░реВрдк рд╕реЗ рд╕реНрдерд┐рддрд┐ рдХреЛ рдмрджрд▓ рд╕рдХрддреА рд╣реИред  рдпрд╛ рд╢рд╛рдпрдж рдирд╣реАрдВ рдмрджрд▓рд╛ред  рдпрд╣ рджреЗрдЦрдирд╛ рджрд┐рд▓рдЪрд╕реНрдк рд╣реЛрдЧрд╛ред <br>  <b>array_walk</b> рдПрдХ рддреИрдпрд╛рд░ рдХрд┐рдП рдЧрдП рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдордЬрдмреВрдд рдорд┐рдбрд▓рд┐рдВрдЧ рд╣реИред <br><br>  рдЪреВрдВрдХрд┐ рдПрдХ рд▓рд┐рдВрдХ рдкрд░ рдкреБрдирд░рд╛рд╡реГрддрд┐ рд╣реЛрдиреЗ рдкрд░ <b>foreach</b> рдереЛрдбрд╝рд╛ рдЕрд▓рдЧ рддрд░реАрдХреЗ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ (рдпрд╣ <b>FE_FETCH_RW</b> opcode рдХреЗ рдмрдЬрд╛рдп <b>FE_FETCH_R</b> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ), рдЗрд╕рдиреЗ рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рдорд╛рдк рдмрдирд╛рдпрд╛ред  рд╡рд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдереЛрдбрд╝рд╛ рддреЗрдЬ рдирд┐рдХрд▓рд╛ред <br><br>  рдЬреИрд╕рд╛ рдХрд┐ рдпрд╣ рдирд┐рдХрд▓рд╛, рдордХреНрдЦреА рдкрд░ рдПрдХ рд▓реИрдореНрдмреНрдбрд╛ рдмрдирд╛рдирд╛ рд╕рдмрд╕реЗ рд╕рд╕реНрддрд╛ рдСрдкрд░реЗрд╢рди рдирд╣реАрдВ рд╣реИред  рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдХреЗрд╡рд▓ 10 рдмрд╛рд░ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЕрдзреНрдпрдпрди рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реЛрдЧрд╛ред <br><br>  рдЕрдиреНрдп рд╕рднреА рддрд░реАрдХреЛрдВ рдиреЗ рд▓рдЧрднрдЧ рд╕рдорд╛рди рдкрд░рд┐рдгрд╛рдо рджрд┐рдЦрд╛рдП, рдмрд╣реБрдд рдорд╛рдореВрд▓реА рдЕрдВрддрд░ рдХреЗ рд╕рд╛рдеред <br><br>  рдЖрдкрдХрд╛ рдзреНрдпрд╛рди рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж! <br><br>  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдХреЛрдИ рд╕реБрдЭрд╛рд╡ рд╣реИ, рддреЛ рдЖрдк "рдкрд┐рдХ" рдХреНрдпрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ - рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рд▓рд┐рдЦреЗрдВред  рдореИрдВ рдЕрднреА рднреА рд▓рдВрдмреЛрджрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪ рд░рд╣рд╛ рд╣реВрдВ - рдЗрд╕ рддрд░рд╣ рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдмрд╣реБрдд рд╡рд┐рдЪрд┐рддреНрд░ рд╣реИред <br><br>  <b>рдпреБрдкреАрдбреА</b> <br>  рд╕реНрдерд┐рд░ рд▓реИрдореНрдмреНрдбрд╛ рдХреЗ рд╕рд╛рде <b>array_walk рдХреЗ</b> рд▓рд┐рдП рдкреИрдорд╛рдЗрд╢ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ред  рдЕрдВрддрд░ рджрд┐рдЦрд╛рдИ рдирд╣реАрдВ рдкрдбрд╝рддрд╛ред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi460285/">https://habr.com/ru/post/hi460285/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi460273/index.html">рд╕рдмрд╕реЗ рдЫреЛрдЯреЗ рдХреЗ рд▓рд┐рдП рдПрдкреНрдкрд▓ рд╡реЗрддрди рдореЗрдВ рдкреНрд░рд╛рдзрд┐рдХрд░рдг</a></li>
<li><a href="../hi460275/index.html">рдЖрдкрдХреЛ рд╕рд╣реА рд╕рдорд╛рдзрд╛рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпреЛрдВ рдирд╣реАрдВ рд╣реИ</a></li>
<li><a href="../hi460279/index.html">10 рдмрд┐рд▓рд┐рдпрди рдХрд╛ рдЕрдиреБрдмрдВрдз: рдЬреЛ рдкреЗрдВрдЯрд╛рдЧрди рдХреЗ рд▓рд┐рдП рдХреНрд▓рд╛рдЙрдб рд╕реЗ рдирд┐рдкрдЯреЗрдЧрд╛</a></li>
<li><a href="../hi460281/index.html">рдХреИрд╕реЗ UX рд▓реЗрдЦрдХ рдЙрддреНрдкрд╛рдж рдХреЛ рдмреЗрд╣рддрд░ рдмрдирд╛рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi460283/index.html">рдирдИ рдХрд░рддреЗ-рдХрд░рддреЗ-рд╕реНрд╡рдпрдВ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛</a></li>
<li><a href="../hi460287/index.html">рд░рдиреЗрдЯ рдиреНрдпреВрдЬрд╝ рд╡рд┐рдЬрд╝реБрдЕрд▓рд╛рдЗрдЬрд╝реЗрд╢рди</a></li>
<li><a href="../hi460291/index.html">рдЕрдиреБрд░реЛрдзреЛрдВ рдФрд░ рдЙрдирдХреЗ рд╕рдорд╛рдзрд╛рдиреЛрдВ рдХреЗ рдмреИрдЪ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреА рд╕рдорд╕реНрдпрд╛рдПрдВ (рднрд╛рдЧ 1)</a></li>
<li><a href="../hi460295/index.html">Rust рдореЗрдВ рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рдХрд╛ рдХреНрдпрд╛ рдЕрд░реНрде рд╣реИ?</a></li>
<li><a href="../hi460297/index.html">WeakRef - ECMAScript рдорд╛рдирдХ рдореЗрдВ рдЬреЛрдбрд╝рдиреЗ рдХрд╛ рдкреНрд░рд╕реНрддрд╛рд╡</a></li>
<li><a href="../hi460301/index.html">рдирдИ рдкреАрдврд╝реА рдХреЗ рд╣рд╛рдИ-рдкрд╛рд╡рд░ рдПрд▓рдИрдбреА рд▓реИрдВрдк</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>