<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘  ğŸ™ƒ âœï¸ IntersectionObserver APIå’Œå»¶è¿Ÿå›¾åƒåŠ è½½ ğŸ‘´ğŸ¿ ğŸ™ŒğŸ½ ğŸ•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä½¿ç”¨æƒ°æ€§å›¾åƒåŠ è½½æ¥æé«˜Webé¡¹ç›®çš„æ€§èƒ½æ˜¯ä¸€ç§æµè¡Œçš„ä¼˜åŒ–æŠ€æœ¯ã€‚ å…³é”®æ˜¯å›¾åƒæ˜¯ç°ä»£ç½‘ç«™æŒ¤æ»¡çš„â€œå¤§é‡â€èµ„æºã€‚ æˆ‘ä»¬å·²ç»å‘å¸ƒäº†æœ‰å…³æ­¤çš„å†…å®¹ã€‚ åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥äº†è§£å»¶è¿ŸåŠ è½½ä¸ºWalmartç½‘ç«™å¸¦æ¥äº†ä»€ä¹ˆï¼Œå¹¶äº†è§£å¦‚ä½•åœ¨Reacté¡¹ç›®ä¸­ä½¿ç”¨IntersectionObserverã€‚ è¿™æ˜¯æœ‰å…³ä¼˜åŒ–é™æ€ç«™ç‚¹çš„æ–‡ç« ã€‚ è¿™...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>IntersectionObserver APIå’Œå»¶è¿Ÿå›¾åƒåŠ è½½</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/453586/"> ä½¿ç”¨æƒ°æ€§å›¾åƒåŠ è½½æ¥æé«˜Webé¡¹ç›®çš„æ€§èƒ½æ˜¯ä¸€ç§æµè¡Œçš„ä¼˜åŒ–æŠ€æœ¯ã€‚ å…³é”®æ˜¯å›¾åƒæ˜¯ç°ä»£ç½‘ç«™æŒ¤æ»¡çš„â€œå¤§é‡â€èµ„æºã€‚ æˆ‘ä»¬å·²ç»å‘å¸ƒäº†æœ‰å…³æ­¤çš„å†…å®¹ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨è¿™é‡Œï¼Œ</a>æ‚¨å¯ä»¥äº†è§£å»¶è¿ŸåŠ è½½ä¸ºWalmartç½‘ç«™å¸¦æ¥äº†ä»€ä¹ˆï¼Œå¹¶äº†è§£å¦‚ä½•åœ¨Reacté¡¹ç›®ä¸­ä½¿ç”¨IntersectionObserverã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™æ˜¯</a>æœ‰å…³ä¼˜åŒ–é™æ€ç«™ç‚¹çš„æ–‡ç« ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™æ˜¯</a>æœ‰å…³ä½¿ç”¨æµè§ˆå™¨å·¥å…·å®ç°å»¶è¿ŸåŠ è½½çš„æœ€æ–°èµ„æ–™ã€‚ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/ao/_d/7t/ao_d7twyxzavzolz2ascrhfk1g4.png"></a> <br><br> ä»Šå¤©ï¼Œæˆ‘ä»¬æè¯·æ‚¨æ³¨æ„ä¸€ç¯‡æ–‡ç« çš„ç¿»è¯‘ï¼Œå…¶ä¸­ä»¥ä¸€ä¸ªç®€å•çš„ç½‘é¡µä¸ºä¾‹æè¿°äº†IntersectionObserver APIçš„ä½¿ç”¨ã€‚ æœ¬ææ–™ä¾›åˆå­¦è€…ä½¿ç”¨ã€‚ <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">ä»€ä¹ˆæ˜¯å»¶è¿ŸåŠ è½½å›¾åƒï¼Ÿ</font> </h2><br> åœ¨åˆ†æåº”ç”¨ç¨‹åºæ€§èƒ½æ—¶ï¼Œæœ€é‡è¦çš„ä¸¤ä¸ªæŒ‡æ ‡æ˜¯ï¼šé¦–æ¬¡äº¤äº’æ—¶é—´ï¼ˆäº¤äº’æ—¶é—´ï¼‰å’Œèµ„æºæ¶ˆè€—ï¼ˆèµ„æºæ¶ˆè€—ï¼‰ã€‚ ä»–ä»¬å°†ä¸å¯é¿å…åœ°è¦é¢å¯¹ä»äº‹Webå¼€å‘çš„äººå‘˜ã€‚ å¦å¤–ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œè¿™ä¸ä»…æ˜¯å› ä¸ºå®ƒä»¬éœ€è¦å¾ˆé•¿æ—¶é—´æ‰èƒ½å‡†å¤‡å·¥ä½œæˆ–æ¶ˆè€—å¤ªå¤šèµ„æºã€‚ ä½†æ˜¯ï¼Œæ— è®ºå¦‚ä½•ï¼Œå°½æ—©æ‰¾åˆ°è¿™äº›é—®é¢˜çš„æ ¹æºå¹¶åŠªåŠ›ç¡®ä¿è¿™äº›é—®é¢˜ç”šè‡³ä¸ä¼šå‡ºç°æ˜¯éå¸¸é‡è¦çš„ã€‚ <br><br> åœ¨Webåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨æƒ°æ€§å›¾åƒåŠ è½½æŠ€æœ¯å¯æœ€å¤§ç¨‹åº¦åœ°é™ä½æ€§èƒ½é—®é¢˜çš„é£é™©ã€‚ å³ï¼Œå¦‚æœæˆ‘ä»¬ä»å»¶è¿ŸåŠ è½½å¯¹å…¶å¯¹ä½¿é¡µé¢å¤„äºå·¥ä½œçŠ¶æ€çš„æ—¶é—´å’Œèµ„æºæ¶ˆè€—çš„å½±å“çš„è§’åº¦è¿›è¡Œåˆ†æï¼Œæˆ‘ä»¬å°†è·å¾—ä»¥ä¸‹ä¿¡æ¯ï¼š <br><br><ol><li> é¦–æ¬¡äº’åŠ¨çš„æ—¶é—´ã€‚ è¿™æ˜¯Webåº”ç”¨ç¨‹åºéœ€è¦åŠ è½½å¹¶ä½¿ç•Œé¢è¿›å…¥é€‚åˆç”¨æˆ·ä½¿ç”¨çŠ¶æ€çš„æ—¶é—´ã€‚ å»¶è¿ŸåŠ è½½ï¼ˆä¸ä»…æ¶‰åŠå›¾åƒï¼‰è¿˜ä¼˜åŒ–äº†åº”ç”¨ç¨‹åºçš„å“åº”æ—¶é—´ï¼Œè¿™è¦å½’åŠŸäºåˆ†ç¦»ä»£ç å¹¶ä»…åŠ è½½ç‰¹å®šé¡µé¢æ‰€éœ€çš„å†…å®¹æˆ–ç‰¹å®šæ—¶é—´æ‰€éœ€çš„å†…å®¹çš„æŠ€æœ¯ã€‚ </li><li> èµ„æºæ¶ˆè€—ã€‚ äººç±»æ˜¯ä¸è€çƒ¦çš„äººã€‚ å¦‚æœç½‘ç«™éœ€è¦è¶…è¿‡3ç§’çš„åŠ è½½æ—¶é—´ï¼Œåˆ™70ï¼…çš„ç”¨æˆ·ä¼šç¦»å¼€è¯¥ç½‘ç«™ã€‚  Webåº”ç”¨ç¨‹åºä¸åº”åŠ è½½å¤ªé•¿æ—¶é—´ã€‚ å»¶è¿ŸåŠ è½½ä½¿æ‚¨å¯ä»¥å‡å°‘é¡µé¢å·¥ä½œæ‰€éœ€çš„èµ„æºé‡ã€‚ ä¾‹å¦‚ï¼Œè¿™å¯èƒ½æ„å‘³ç€æŸä¸ªé¡¹ç›®çš„ä»£ç è¢«åˆ†è§£ä¸ºç‰‡æ®µï¼Œè¿™äº›ç‰‡æ®µä»…åœ¨éœ€è¦å®ƒä»¬çš„é¡µé¢ä¸ŠåŠ è½½ã€‚ ç»“æœï¼Œç«™ç‚¹æ€§èƒ½æé«˜å¹¶ä¸”ç³»ç»Ÿèµ„æºæ¶ˆè€—å‡å°‘ã€‚ </li></ol><br> å› æ­¤ï¼Œå»¶è¿ŸåŠ è½½æŠ€æœ¯å¯åŠ é€Ÿåº”ç”¨ç¨‹åºï¼Œå‡å°‘å…¶ä¸‹è½½å’Œå¯åŠ¨æ—¶é—´ã€‚ è¿™æ˜¯ç”±äºä»…åœ¨éœ€è¦æ—¶æ‰åŠ è½½èµ„æºè¿™ä¸€äº‹å®è€Œå®ç°çš„ã€‚ <br><br> å»¶è¿ŸåŠ è½½ä¸ºWebé¡¹ç›®å¸¦æ¥äº†ä»¥ä¸‹ä¸¤ä¸ªä¼˜ç‚¹ï¼š <br><br><ul><li> é¡µé¢åŠ è½½é€Ÿåº¦æ›´å¿«å¹¶å¯ä»¥æ­£å¸¸è¿è¡Œã€‚ </li><li> æœ€åˆåŠ è½½é¡µé¢æ—¶ï¼Œæ‚¨å¿…é¡»ä¼ è¾“å’Œå¤„ç†è¾ƒå°‘çš„æ•°æ®ã€‚ </li></ul><br>
<h2>  <font color="#3AC1EF">ä½¿ç”¨IntersectionObserver APIå»¶è¿ŸåŠ è½½å›¾åƒ</font> </h2><br> å¦‚æœæ‚¨è€ƒè™‘ç½‘é¡µçš„åŠ è½½æ–¹å¼ï¼Œé‚£ä¹ˆå¾ˆæ˜æ˜¾ï¼Œæ²¡æœ‰å¿…è¦ä¸‹è½½ç”¨æˆ·ä¸å¯è§çš„å›¾åƒæˆ–å…¶ä»–èµ„æºã€‚ ä½¿ç”¨å»¶è¿ŸåŠ è½½æ—¶ï¼Œé¡µé¢å¯è§åŒºåŸŸä¸­çš„å›¾åƒå°†é¦–å…ˆåŠ è½½ã€‚ ç„¶åï¼Œéšç€ç”¨æˆ·æ»šåŠ¨é¡µé¢ï¼Œå°†åŠ è½½å…¶ä»–å›¾åƒï¼Œè¿™äº›å›¾åƒå°†è½å…¥é¡µé¢çš„å¯è§åŒºåŸŸã€‚ <br><br> è€ƒè™‘ä¸€ä¸ªä¾‹å­ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7b9/e36/782/7b9e367828e6af1dfd070461196dc7c1.png"></div><br>  <i><font color="#999999">é¡µé¢åŠå…¶å¯è§åŒºåŸŸ</font></i> <br><br> çœ‹ä¸€ä¸‹ä¸Šå›¾ã€‚ åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æµè§ˆå™¨å’ŒåŠ è½½åˆ°å…¶ä¸­çš„ç½‘é¡µã€‚ å›¾ç‰‡<code>#IMG_1</code>å’Œ<code>#IMG_2</code>åœ¨é¡µé¢èŒƒå›´å†…ã€‚ è¿™æ„å‘³ç€å®ƒä»¬å¯¹äºç”¨æˆ·æ˜¯å¯è§çš„ï¼Œå¹¶ä¸”ä½äºå±å¹•ä¸Šæ˜¾ç¤ºçš„æµè§ˆå™¨çª—å£åŒºåŸŸçš„è¾¹ç•Œä¹‹å†…ã€‚ <br><br> å½“é¡µé¢<code>#IMG_1</code> ï¼Œ <code>#IMG_2</code> ï¼Œ <code>#IMG_3</code>å’Œ<code>#IMG_4</code>è¢«åŠ è½½æ—¶ï¼Œä¸èƒ½ä»¥ç†æƒ³çš„æ–¹å¼ä½¿ç”¨è¯¥é¡µé¢ã€‚ ç”¨æˆ·åªèƒ½çœ‹åˆ°<code>#IMG_3</code>å’Œ<code>#IMG_4</code>å¹¶ä¸”å¯¹ä»–éšè—<code>#IMG_3</code>å’Œ<code>#IMG_4</code> ã€‚ å¦‚æœæ‚¨åœ¨åŠ è½½é¡µé¢æ—¶åŠ è½½äº†ç¬¬ä¸€å¼ å’Œç¬¬äºŒå¼ å›¾ç‰‡ï¼Œä½†æœªä¸‹è½½ç¬¬ä¸‰å¼ å’Œç¬¬å››å¼ å›¾ç‰‡ï¼Œåˆ™å¯èƒ½ä¼šå¯¹ç½‘ç«™çš„æ€§èƒ½äº§ç”Ÿç§¯æå½±å“ã€‚ å³ï¼Œæˆ‘ä»¬æ­£åœ¨è°ˆè®ºä»¥ä¸‹å†…å®¹ã€‚ å½“ç”¨æˆ·æ»šåŠ¨é¡µé¢ä»¥ä½¿ç¬¬ä¸‰ä¸ªå›¾åƒå¯è§æ—¶-å®ƒå°†åŠ è½½ã€‚ å¦‚æœæ»šåŠ¨ç»§ç»­å¹¶ä¸”ç¬¬å››å¼ å›¾åƒå˜ä¸ºå¯è§ï¼Œåˆ™å®ƒä¹Ÿä¼šåŠ è½½ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/783/85b/173/78385b17309c48150e2ce83554e7b857.png"></div><br>  <i><font color="#999999">æ»šåŠ¨é¡µé¢å¹¶åŠ è½½å›¾åƒ</font></i> <br><br> æ—¢ç„¶æˆ‘ä»¬å·²ç»å¼„æ¸…æ¥šäº†æˆ‘ä»¬è¦å¦‚ä½•å¤„ç†å›¾åƒï¼Œæˆ‘ä»¬å°†è‡ªé—®å¦‚ä½•æ‰¾åˆ°é¡µé¢çš„æŸä¸ªå…ƒç´ è½å…¥å…¶å¯è§åŒºåŸŸã€‚ ç°ä»£çš„æµè§ˆå™¨éƒ½æœ‰ä¸€ä¸ªAPIï¼Œå…è®¸ç¨‹åºå‘˜æ‰¾å‡ºé¡µé¢çš„ç‰¹å®šåŒºåŸŸä½•æ—¶å¯è§ã€‚ å…³äºIntersectionObserver APIã€‚ å®ƒå…è®¸ä½¿ç”¨å¼‚æ­¥æœºåˆ¶æ¥ç»„ç»‡å…ƒç´ ç›‘è§†ï¼Œå¹¶åœ¨å…ƒç´ è¶…å‡ºæ–‡æ¡£èŒƒå›´æˆ–è·¨è¶Šå¦ä¸€ä¸ªå…ƒç´ è¾¹ç•Œçš„æƒ…å†µä¸‹æ¥æ”¶é€šçŸ¥ã€‚ <br><br> ä¸ºäº†é…ç½®å›¾åƒçš„å»¶è¿ŸåŠ è½½ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ä¸ºå°†ç”¨äºæè¿°å›¾åƒçš„å…ƒç´ å‡†å¤‡æ¨¡æ¿ä»£ç ã€‚ è¿™æ˜¯ï¼š <br><br><pre> <code class="javascript hljs">&lt;img <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"lzy_img"</span></span> src=<span class="hljs-string"><span class="hljs-string">"lazy_img.jpg"</span></span> data-src=<span class="hljs-string"><span class="hljs-string">"real_img.jpg"</span></span> /&gt;</code> </pre> <br> è¯¥ç±»ä½¿æ‚¨å¯ä»¥å°†å…ƒç´ æ ‡è¯†ä¸ºå°†åº”ç”¨å»¶è¿ŸåŠ è½½çš„å›¾åƒã€‚  <code>src</code>å±æ€§å…è®¸æ‚¨åœ¨æ˜¾ç¤ºå®é™…å›¾åƒä¹‹å‰æ˜¾ç¤ºå ä½ç¬¦å›¾åƒã€‚  <code>data-src</code>å­˜å‚¨å®é™…å›¾åƒçš„åœ°å€ï¼Œå½“å…ƒç´ è¿›å…¥é¡µé¢çš„å¯è§åŒºåŸŸæ—¶å°†åŠ è½½è¯¥åœ°å€ã€‚ <br><br> ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç¼–å†™å®ç°å»¶è¿ŸåŠ è½½çš„ä»£ç ã€‚ å¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨IntersectionObserver APIæ¥æ£€æµ‹å›¾åƒè¿›å…¥é¡µé¢æŸ¥çœ‹åŒºåŸŸçš„æ—¶é—´ã€‚ <br><br> é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª<code>IntersectionObserver</code>å®ä¾‹ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(...);</code> </pre> <br>  <code>IntersectionObserver</code>æ„é€ å‡½æ•°æ¥å—å¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ã€‚ å…¶ä¸­ä¸€ä¸ªå­˜å‚¨ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„ç”±éœ€è¦ç›‘è§†çš„å…ƒç´ ç»„æˆï¼Œå¦ä¸€ä¸ªå­˜å‚¨<code>IntersectionObserver</code>å®ä¾‹ã€‚ çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span><span class="hljs-function">) =&gt;</span></span> {   entries.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entry</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-comment"><span class="hljs-comment">//...   }) });</span></span></code> </pre> <br> åŠŸèƒ½ä»£ç æ£€æŸ¥ä»¥æŸ¥çœ‹ç”±<code>entries</code>æ•°ç»„<code>entries</code>è¡¨ç¤ºçš„å›¾åƒæ˜¯å¦ä¸è§†å£ç›¸äº¤ã€‚ å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œåˆ™ç›¸åº”å›¾åƒçš„<code>src</code>å±æ€§è®°å½•å…¶<code>data-src</code>å±æ€§ä¸­çš„å†…å®¹ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span><span class="hljs-function">) =&gt;</span></span> {   entries.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entry</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(entry.isIntersecting) {           <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lazyImage = entry.target           lazyImage.src = lazyImage.dataset.src       }   }) });</code> </pre> <br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨<code>if(entry.isIntersecting) {...}</code>æ¡ä»¶æ£€æŸ¥å…ƒç´ æ˜¯å¦è·¨è¶Šæµè§ˆå™¨æŸ¥çœ‹åŒºåŸŸã€‚ å¦‚æœæ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬å°†<code>img</code>å…ƒç´ ä¿å­˜åœ¨<code>lazyImage</code>å¸¸é‡ä¸­ã€‚ ç„¶åï¼Œåœ¨å…¶<code>src</code>å±æ€§ä¸­å†™å…¥å…¶<code>data-src</code>å±æ€§ä¸­çš„å†…å®¹ã€‚ å› æ­¤ï¼Œå°†åŠ è½½å¹¶æ˜¾ç¤ºå…¶åœ°å€å­˜å‚¨åœ¨<code>data-src</code>ä¸­çš„å›¾åƒã€‚ åœ¨æµè§ˆå™¨ä¸­ï¼Œçœ‹èµ·æ¥å°±åƒç”¨å®é™…å›¾åƒæ›¿æ¢äº†å ä½ç¬¦å›¾åƒ<code>lazy_img.jpg</code> ã€‚ <br><br> ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>IntersectionObserver</code>å®ä¾‹çš„<code>.observe()</code>æ–¹æ³•æ¥å¼€å§‹ç›‘è§†æˆ‘ä»¬æ„Ÿå…´è¶£çš„å…ƒç´ ï¼š <br><br><pre> <code class="javascript hljs">imageObserver.observe(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'img.lzy_img'</span></span>));</code> </pre> <br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨<code>document.querySelectorAll('img.lzy_img')</code>å‘½ä»¤<code>document.querySelectorAll('img.lzy_img')</code> <code>lzy_img</code> <code>document.querySelectorAll('img.lzy_img')</code>é€‰æ‹©æ‰€æœ‰å¸¦æœ‰<code>lzy_img</code>ç±»çš„<code>img</code>å…ƒç´ ï¼Œå¹¶å°†å®ƒä»¬ä¼ é€’ç»™<code>.observe()</code>æ–¹æ³•ã€‚ æ”¶åˆ°å…ƒç´ åˆ—è¡¨åï¼Œä»–å¼€å§‹è§‚å¯Ÿå®ƒä»¬çš„è¿‡ç¨‹ã€‚ <br><br> ä¸ºäº†æµ‹è¯•è¯¥ç¤ºä¾‹ï¼Œæˆ‘ä»¬é¦–å…ˆåˆå§‹åŒ–Node.jsé¡¹ç›®ï¼š <br><br><pre> <code class="javascript hljs">mkdir lzy_img cd lzy_img npm init -y</code> </pre> <br> ç°åœ¨åœ¨<code>lzy_img</code>æ–‡ä»¶å¤¹ä¸­åˆ›å»º<code>lzy_img</code>æ–‡ä»¶ï¼š <br><br><pre> <code class="html hljs xml">touch index.html</code> </pre> <br> å‘å…¶æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Lazy Load Images<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_1.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_2.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_3.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_4.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_5.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript">       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"DOMContentLoaded"</span></span></span><span class="javascript">, </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> imageObserver = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> IntersectionObserver(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               entries.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entry</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {                   </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (entry.isIntersecting) {                       </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> lazyImage = entry.target                       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"lazy loading "</span></span></span><span class="javascript">, lazyImage)                       lazyImage.src = lazyImage.dataset.src                   }               })           });           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> arr = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.querySelectorAll(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'img.lzy_img'</span></span></span><span class="javascript">)           arr.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">v</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               imageObserver.observe(v);           })       })   </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°è¿™é‡Œæè¿°äº†5å¼ å›¾åƒï¼Œå…¶ä¸­åœ¨åŠ è½½æ—¶æ˜¾ç¤ºäº†<code>lazy_img.jpg</code>å ä½ç¬¦ã€‚ å®ƒä»¬æ¯ä¸ªçš„<code>data-src</code>å±æ€§éƒ½åŒ…å«æœ‰å…³çœŸå®å›¾åƒçš„ä¿¡æ¯ã€‚ è¿™æ˜¯é¡¹ç›®ä¸­ä½¿ç”¨çš„å›¾åƒåç§°çš„åˆ—è¡¨ï¼š <br><br><pre> <code class="plaintext hljs">lazy_img.jpg img_1.jpg img_2.jpg img_3.jpg img_4.jpg img_5.jpg</code> </pre> <br> æ‚¨éœ€è¦é€šè¿‡å°†é¡¹ç›®æ–‡ä»¶å¤¹ç½®äºä¸‹å›¾æ‰€ç¤ºçš„è§†å›¾ä¸­æ¥è‡ªå·±åˆ›å»ºæ‰€æœ‰è¿™äº›å›¾åƒã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb4/44e/3cb/bb444e3cbd0ad4e432901dba7a3b2710.png"></div><br>  <i><font color="#999999">é¡¹ç›®æ–‡ä»¶å¤¹</font></i> <br><br> åœ¨æˆ‘çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨Windows Paintå‡†å¤‡äº†<code>lazy_img.jpg</code>æ–‡ä»¶ï¼Œè€ŒçœŸå®å›¾åƒï¼ˆ <code>img_*.jpg</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">.jpg</a> ï¼‰åˆ™æ¥è‡ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Foto.com</a> ã€‚ <br><br> è¯·æ³¨æ„ï¼Œç”¨äºåˆ›å»º<code>IntersectionObserver</code>å®ä¾‹çš„å›è°ƒå…·æœ‰<code>console.log()</code>è°ƒç”¨ã€‚ è¿™å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿå­¦ä¹ æ‰§è¡Œæ“ä½œä»¥åŠ è½½ä¸åŒçš„å›¾åƒã€‚ <br><br> ç°åœ¨ï¼Œè¦æä¾›<code>index.html</code> ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>http-server</code>åŒ…ï¼š <br><br><pre> <code class="javascript hljs">npm i http-server</code> </pre> <br> å°†<code>start</code>å±æ€§æ·»åŠ åˆ°<code>package.json</code>æ–‡ä»¶çš„<code>scripts</code>éƒ¨åˆ†ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: {   <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"http-server ./"</span></span> }</code> </pre> <br> ä¹‹åï¼Œåœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ<code>npm run start</code>å‘½ä»¤ã€‚ <br><br> ç°åœ¨æ‰“å¼€æµè§ˆå™¨å¹¶è½¬åˆ°åœ°å€<code>127.0.0.1:8080</code> ã€‚ æˆ‘ä»¬ä¸€å¼€å§‹çš„<code>index.html</code>é¡µé¢å°†å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fd9/e0e/f53/fd9e0ef534be767b804179f38ed134a3.png"></div><br>  <i><font color="#999999">æ²¡æœ‰çœŸå®å›¾åƒçš„é¡µé¢</font></i> <br><br> æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œåœ¨åº”è¯¥æ˜¾ç¤ºçœŸå®å›¾åƒçš„ä½ç½®ï¼Œç°åœ¨ä»…æ˜¾ç¤ºå ä½ç¬¦ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä»ç¬¬ä¸€ä¸ªå›¾åƒä½äºæŸ¥çœ‹åŒºåŸŸçš„å‡è®¾å‡ºå‘ï¼Œå› æ­¤æµè§ˆå™¨å¼€å§‹ä¸‹è½½å®ƒã€‚ ç»“æœï¼Œé¡µé¢ç°åœ¨å°†å¦‚ä¸‹æ‰€ç¤ºã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ef/004/1ee/1ef0041eee5e8713415df640faed6cb8.png"></div><br>  <i><font color="#999999">æµè§ˆå™¨ä¸Šä¼ äº†ç¬¬ä¸€å¼ å›¾ç‰‡</font></i> <br><br> å°šæœªä¸Šä¼ å…¶ä»–å›¾åƒã€‚ ä»–ä»¬å°šæœªåˆ°è¾¾è§‚çœ‹åŒºåŸŸã€‚ <br><br> å¦‚æœåœ¨è§‚çœ‹æ§åˆ¶å°çš„åŒæ—¶æ»šåŠ¨æµè§ˆé¡µé¢ï¼Œæ‚¨ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ã€‚ å®ƒåŒ…å«ä»¥ä¸‹äº‹å®ï¼šåœ¨æŸ¥çœ‹çª—å£ä¸­æ»šåŠ¨æµè§ˆåŒä¸€å›¾åƒæ—¶ï¼Œæµè§ˆå™¨ä¼šå°è¯•å¤šæ¬¡ä¸‹è½½è¯¥å›¾åƒã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3c4/074/83e/3c407483e097cb7c2dd7ce3b82b37027.png"></div><br>  <i><font color="#999999">åŒä¸€å¼ å›¾ç‰‡çš„å¤šæ¬¡ä¸Šä¼ </font></i> <br><br> è¿™æ ¹æœ¬ä¸æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚ è¿™å¯¼è‡´ä¸å¿…è¦çš„ç³»ç»Ÿèµ„æºæµªè´¹ï¼Œå¹¶é™ä½é¡¹ç›®æ€§èƒ½ã€‚ <br><br> ä¸ºäº†è§£å†³æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä»<code>IntersectionObserver</code>å®ä¾‹æ­£åœ¨ç›‘è§†çš„å…ƒç´ åˆ—è¡¨ä¸­åˆ é™¤å·²ä¸ºå…¶åŠ è½½å®é™…å›¾åƒçš„<code>img</code>å…ƒç´ ã€‚ æˆ‘ä»¬è¿˜éœ€è¦ä»è¯¥å…ƒç´ ä¸­åˆ é™¤<code>lzy_img</code>ç±»ã€‚ ä¿®æ”¹åçš„å›è°ƒå‡½æ•°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="javascript hljs">&lt;script&gt;   <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">"DOMContentLoaded"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{       <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> imageObserver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntersectionObserver(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span><span class="hljs-function">) =&gt;</span></span> {           entries.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entry</span></span></span><span class="hljs-function">) =&gt;</span></span> {               <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (entry.isIntersecting) {                   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lazyImage = entry.target                   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"lazy loading "</span></span>, lazyImage)                   lazyImage.src = lazyImage.dataset.src                   lazyImage.classList.remove(<span class="hljs-string"><span class="hljs-string">"lzy_img"</span></span>);                   imgObserver.unobserve(lazyImage);               }           })       });       <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> arr = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'img.lzy_img'</span></span>)       arr.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">v</span></span></span><span class="hljs-function">) =&gt;</span></span> {           imageObserver.observe(v);       })   }) &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt;</span></span></code> </pre> <br> åŠ è½½ç›¸åº”çš„<code>img</code>å…ƒç´ çš„çœŸå®å›¾åƒåï¼Œå°†<code>lzy_img</code>å…¶<code>lzy_img</code>ç±»ï¼Œå¹¶å°†è¯¥å…ƒç´ ä»<code>IntersectionObserver</code>è§‚å¯Ÿçš„å…ƒç´ åˆ—è¡¨ä¸­æ’é™¤ã€‚ <br><br> è¿™æ˜¯ç¤ºä¾‹ä»£ç ï¼š <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Lazy Load Images<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_1.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_2.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_3.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_4.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lzy_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy_img.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img_5.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span>           <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript">       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"DOMContentLoaded"</span></span></span><span class="javascript">, </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> imageObserver = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> IntersectionObserver(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entries, imgObserver</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               entries.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">entry</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {                   </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (entry.isIntersecting) {                       </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> lazyImage = entry.target                       </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"lazy loading "</span></span></span><span class="javascript">, lazyImage)                       lazyImage.src = lazyImage.dataset.src                       lazyImage.classList.remove(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"lzy_img"</span></span></span><span class="javascript">);                       imgObserver.unobserve(lazyImage);                   }               })           });           </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> arr = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.querySelectorAll(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'img.lzy_img'</span></span></span><span class="javascript">)           arr.forEach(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">v</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> {               imageObserver.observe(v);           })       })   </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">æ€»ç»“</font> </h2><br> æˆ‘ä»¬ç ”ç©¶äº†å›¾åƒå»¶è¿ŸåŠ è½½ç³»ç»Ÿå®ç°çš„æœ€ç®€å•ç¤ºä¾‹ã€‚ ä½†æ˜¯IntersectionObserverå…è®¸æ‚¨åˆ›å»ºéå¸¸å¤æ‚å’Œæ‡’æƒ°çš„åŠ è½½æ–¹æ¡ˆã€‚ å¦‚æœæ‚¨å¯¹æ­¤ä¸»é¢˜æ„Ÿå…´è¶£ï¼Œå»ºè®®æ‚¨æŸ¥çœ‹ææ–™å¼€å¤´æåˆ°çš„å‡ºç‰ˆç‰©å¹¶é˜…è¯»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡æ¡£</a> ã€‚ <br><br>  <b>äº²çˆ±çš„è¯»è€…ä»¬ï¼</b> åœ¨å®æ–½æƒ°æ€§å›¾åƒåŠ è½½ç³»ç»Ÿåï¼Œæ‚¨æ˜¯å¦æœ‰ä»»ä½•æ”¹å–„ç½‘ç«™æ€§èƒ½çš„ç¤ºä¾‹ï¼Ÿ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN453586/">https://habr.com/ru/post/zh-CN453586/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN453576/index.html">å‰ç«¯æ¯å‘¨æ‘˜è¦ï¼ˆ2019å¹´5æœˆ20æ—¥è‡³26æ—¥ï¼‰</a></li>
<li><a href="../zh-CN453578/index.html">ä»è¯„è®ºå®¶åˆ°ç®—æ³•ï¼šå”±ç‰‡å…¬å¸ï¼Œå…¬å¸å’Œ20ä¸–çºªéŸ³ä¹æ–‡åŒ–</a></li>
<li><a href="../zh-CN453580/index.html">å‰ç«¯ä¸–ç•Œç¬¬366å‘¨ï¼ˆ2019å¹´5æœˆ20æ—¥è‡³26æ—¥ï¼‰çš„å‰ç«¯ä¸–ç•Œæ‘˜è¦</a></li>
<li><a href="../zh-CN453582/index.html">Node.jsé¡¹ç›®ä¸­æœ€å¥½ä¸è¦ä½¿ç”¨é”å®šæ–‡ä»¶</a></li>
<li><a href="../zh-CN453584/index.html">å‡†å¤‡ï¼šAngular 8å·²ç»å…³é—­</a></li>
<li><a href="../zh-CN453588/index.html">å…³äºlayä¸‹ç²˜åœŸçš„ä½œå“ã€‚ ç¬¬å››éƒ¨åˆ†-æœ‰æœºç¡…</a></li>
<li><a href="../zh-CN453590/index.html">æ‚¨è‡ªå·±çš„ä¸ªäººSaaS</a></li>
<li><a href="../zh-CN453592/index.html">èµšå–ç”Ÿæ´»å’Œåˆ¶ä½œæ¸¸æˆçš„æŠ€å·§ï¼š11ä¸ªLevelordæç¤º</a></li>
<li><a href="../zh-CN453594/index.html">åˆ¶ä½œæ¸¸æˆä¸ºç”Ÿï¼šLevelordçš„11ä¸ªæŠ€å·§</a></li>
<li><a href="../zh-CN453596/index.html">æ¬ºè¯ˆè€…å’ŒEDS-ä¸€åˆ‡éƒ½å¾ˆç³Ÿç³•</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>