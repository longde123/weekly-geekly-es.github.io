<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐จ๐ฟโ๐ญ ๐ ๐ฉ๐พโ๐คโ๐ฉ๐ป Telegram ููุณุชูุฏุน ุจูุงูุงุช ููุดุงุฑูุน ุชูููููุฌูุง ุงููุนูููุงุช ๐คณ๐พ โ๏ธ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุณุงุก ุงูุฎูุฑ ุ ุฃูุฏ ุงูููู ุฃู ุฃุดุงุทุฑูู ุงููุดุงูู ูุงูุญููู ุบูุฑ ุงูุนุงุฏูุฉ ุงูุชู ุงุฌุชูุนุช ุนูุฏ ูุชุงุจุฉ ูุดุงุฑูุน ุชูููููุฌูุง ุงููุนูููุงุช ุงูุตุบูุฑุฉ. ูุฌุจ ุฃู ุฃููู ุนูู ุงูููุฑ ุฃู ูุฐุง ุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Telegram ููุณุชูุฏุน ุจูุงูุงุช ููุดุงุฑูุน ุชูููููุฌูุง ุงููุนูููุงุช</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464865/" style=";text-align:right;direction:rtl">  ูุณุงุก ุงูุฎูุฑ ุ ุฃูุฏ ุงูููู ุฃู ุฃุดุงุทุฑูู ุงููุดุงูู ูุงูุญููู ุบูุฑ ุงูุนุงุฏูุฉ ุงูุชู ุงุฌุชูุนุช ุนูุฏ ูุชุงุจุฉ ูุดุงุฑูุน ุชูููููุฌูุง ุงููุนูููุงุช ุงูุตุบูุฑุฉ.  ูุฌุจ ุฃู ุฃููู ุนูู ุงูููุฑ ุฃู ูุฐุง ุงูููุงู ูุฎุตุต ูุฃููุฆู ุงูุฐูู ูู ุนูู ุฏุฑุงูุฉ ุจุณูุทุฉ ุจุชุทููุฑ ุงูุจุฑููุงุช ูุจุฑุงูุฌ ุงูุฑูุจูุชุงุช ูููุงุนุฏ ุงูุจูุงูุงุช ู SQL ููุบุฉ ุงูุจุฑูุฌุฉ ุจูุซูู. <br><br>  ุชู ูุดุฑ ุงููุดุฑูุน ุจุงููุงูู ุนูู ุฌูุซุจ ุ ุณูููู ุงูุฑุงุจุท ูู ููุงูุฉ ุงูููุงู. <br><br><img src="https://www.vamtlgrm.com/wp-content/uploads/2018/04/y-pDbyfXZqI.jpg" alt="ุตูุฑุฉ"><br><br><h3 style=";text-align:right;direction:rtl">  ุงููุดููุฉ ุงูุฑุฆูุณูุฉ </h3><br>  ูู ุงูุจุฏุงูุฉ ุ ุฃุฑุฏุช ุฃู ุฃูุชุจ ุจููุณู ุนุฏุงุฏูุง ุจุณูุทูุง ูู ุงูุณุนุฑุงุช ุงูุญุฑุงุฑูุฉ ูู telegram ุ ูุงูุฐู ูุชููู ุฑูููุง ูู ุงููุณุชุฎุฏู ููุนูุฏ ุนุฏุฏ ุงูุณุนุฑุงุช ุงูุญุฑุงุฑูุฉ ุงูุชู ูุชู ุชุฑููุง ุฅูู ูุถุนูุง ุงูุทุจูุนู ููุฐุง ุงูููู.  ูุฐุง ูู ุ ุชุญุชุงุฌ ุฅูู ุชุฎุฒูู ูุง ููุฑุจ ูู ุงุซููู ูู ุงููุชุบูุฑุงุช ููู ูุณุชุฎุฏู. <br><a name="habracut"></a><br>  ูู ุงูููุงูุฉ ุ ูุงู ุนููู ุงุฎุชูุงุฑ ุทุฑููุฉ ูุชุฎุฒูู ูุฐู ุงูุจูุงูุงุช. <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฎูุงุฑ - <b>ุงููุชุบูุฑุงุช ุงูุนุงูููุฉ</b> ุ ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู.  ุงูุฎูุงุฑ ุนูู ุงูููุฑ ูุดู ุ ูุฃูู ุนูุฏูุง ูุชุนุทู ุงูุจุฑูุงูุฌ ุ ูููุฏ ูู ุดูุก </li><li style=";text-align:right;direction:rtl">  ุงูุฎูุงุฑ - <b>ุงููุชุงุจุฉ ุฅูู ููู</b> ุนูู ุงููุฑุต.  ูุฏ ููุฌุญ ูุฐุง ุงููุดุฑูุน ุ ููููู ุฎุทุทุช ููุดุฑ ุฑูุจูุช ุนูู heroku ุ ูุงูุฐู ููุญู ุฌููุน ุงูุจูุงูุงุช ูู ุงููุฑุต ูู ููู.  ูุฐูู ูุฐุง ุงูุฎูุงุฑ ูุง ูุตูุญ </li><li style=";text-align:right;direction:rtl">  ุงูุฎูุงุฑ - <b>ุฌุฏุงูู ุจูุงูุงุช Google</b> .  ูู ุงูุจุฏุงูุฉ ุ ุฃุฑุฏุช ุงูุชุฑููุฒ ุนูู ูุฐุง ุงูุฎูุงุฑ ุ ููููู ุจุฏุฃุช ุฃูููู ูุฃุฏุฑูุช ุฃู ููุงู ุญุฏูุง ูุนุฏุฏ ุงูุงุณุชุนูุงูุงุช ุฅูู ุงูุฌุฏูู ุ ูููู ุฃุจุฏุฃ ูู ุงุณุชุฎุฏุงู ุงูุฌุฏูู ููุท ุ ุชุญุชุงุฌ ุฅูู ูุชุงุจุฉ ูุฌููุนุฉ ูู ุฃุณุทุฑ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ููุนุฑูุฉ ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุบูุฑ ุงูุจุณูุทุฉ </li><li style=";text-align:right;direction:rtl">  ุงูุฎูุงุฑ ูู <b>ูุงุนุฏุฉ ุจูุงูุงุช</b> .  ูุนู ุ ูุฐุง ูู ุงูุฎูุงุฑ ุงูุฃูุถู ูู ูู ุดูุก.  ููู ุจุงููุณุจุฉ ููุซู ูุฐุง ุงููุดุฑูุน ุ ูุฅูู ูู ุงููุถุญู ุงุณุชุฎุฏุงูู.  ุฃูุถุง ุ ูุฅู ูุดุฑ ูุฏุนู ูุงุนุฏุฉ ุจูุงูุงุช ุนูู ุฎุงุฏู ุทุฑู ุซุงูุซ ุณูููู ููุณุง ูุงุญุฏุง. </li></ol><br>  ูุชูุฌุฉ ูุฐูู ุ ูู ูุชู ุนุฑุถ ุฃู ูู ูุฐู ุงูุฎูุงุฑุงุช.  ุจุงูุทุจุน ุ ููุงู ุงูุนุดุฑุงุช ูู ุงูุทุฑู ุงูุฃุฎุฑู ุ ููููู ุฃุฑุบุจ ูู ุฃู ุชููู ุญุฑุฉ ูุณุฑูุนุฉ ูุฑูุฒ ุนูู ุงูุฃูู. <br><cut><br><h3 style=";text-align:right;direction:rtl">  ูุฑุงุฑ </h3><br>  ุงูููุฑุฉ ุจุณูุทุฉ ููุบุงูุฉ ุ ุจุงููุณุจุฉ ูุชุฎุฒูู ุงูุจูุงูุงุช ุ ุณูู ูุณุชุฎุฏู ูุงุนุฏุฉ ุจูุงูุงุช sqllite ูู ุงูุฐุงูุฑุฉ ุ ูุฃููุง ุจููุช ุจุงููุนู ูู ุจูุซูู 3 ูุณูููู ุจุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุทุงููุชูุง ุนูู ุฎูุงุฏู Telegram ูุน ูุงุตู ุตุบูุฑ (ูู 30 ุซุงููุฉ ุชูุฑูุจูุง) ูุงููุณุฎ ุงูุงุญุชูุงุทู ุนูุฏ ุฅุบูุงู ุนูููุฉ ุงูุจุฑูุงูุฌ. <br><br>  ุฅุฐุง ุชุนุทู ุงูุฎุงุฏู ุ ูุนูุฏ ุงูุทูุจ ุงูุฃูู ุ ุณูููู ุชููุงุฆููุง ุจุชูุฒูู ุฌุฏูููุง ูู ุฎุงุฏู Telegram ูุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช ุฅูู sqllite. <br><br>  ููููู ุงุณุชุฎุฏุงู ุฃู ุดูุก ุขุฎุฑ ูู ูุงุนุฏุฉ ุจูุงูุงุช ุงูุฐุงูุฑุฉ ููุง ุชุฑูุฏ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุฃุดูุงุก ุงูุฌูุฏุฉ </h3><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ุงูุฃุฏุงุก</b> - ูุธุฑูุง ููุนูู ูุน ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูู ุงูุฐุงูุฑุฉ ุงูุฑุฆูุณูุฉ ุ ุชููู ุณุฑุนุฉ ุชูููุฐ ุงูุจุฑูุงูุฌ ุฃุณุฑุน ูู ุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูู ุฎุงุฏู ุทุฑู ุซุงูุซ (ุณุชููู ุงูุณุฑุนุฉ ูุงุฎุชุจุงุฑ ุงูุฑุณูู ุงูุจูุงููุฉ ูู ุงูููุงูุฉ) </li><li style=";text-align:right;direction:rtl">  <b>ูุฌุงูู</b> - ูุง ุญุงุฌุฉ ูุดุฑุงุก ุฎูุงุฏู ุฎุงุฑุฌูุฉ ูููุงุนุฏ ุงูุจูุงูุงุช ููุชู ุชุฎุฒูู ุฌููุน ุงูุจูุงูุงุช ููุณุฎ ุงุญุชูุงุทู ูุฌุงููุง ุนูู ุฎูุงุฏู Telegram </li><li style=";text-align:right;direction:rtl">  <b>ูููู ุงูุงุนุชูุงุฏ ุนููู ูุณุจููุง</b> - ุฅุฐุง ุชุนุทู ุงูุฎุงุฏู ูุฃุณุจุงุจ ุบูุฑ ูุนุฑููุฉ ุ ูุณูู ูููุฏ ุงูุญุฏ ุงูุฃูุตู ููุจูุงูุงุช ููุฏุฉ 30 ุซุงููุฉ (ููุช ุงููุงุตู ุงูุฒููู ูููุณุฎ ุงูุงุญุชูุงุทู) ุ ุฃู ููููุฐุฌ ุฃููู ุนููู ุฃู ูุดุฑูุน ุตุบูุฑ. </li><li style=";text-align:right;direction:rtl">  <b>ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุชูุงููู</b> ุนูุฏ ุงูุชุจุฏูู ุฅูู ูุงุนุฏุฉ ุจูุงูุงุช ููุชุธูุฉ - ุชุญุชุงุฌ ุฅูู ุงุณุชุจุฏุงู ุจูุงูุงุช ุงูุงุชุตุงู ุ ูุฅุฒุงูุฉ ุฑูุฒ ุงููุณุฎ ุงูุงุญุชูุงุทู ูููู ุจูุงูุงุช ุงูุฌุฏูู ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ุฅูู ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ. </li></ol><br><h3 style=";text-align:right;direction:rtl">  ุณูุจูุงุช </h3><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุนุฏู ูุฌูุฏ ุงูุชุญุฌูู ุงูุฃููู </li><li style=";text-align:right;direction:rtl">  ุชุญุชุงุฌ ุฅูู ุญุณุงุจูู ูู Telegram (ุฃุญุฏููุง ูููุณุคูู ูุงูุขุฎุฑ ูุงุฎุชุจุงุฑ ุงููุณุชุฎุฏู) </li><li style=";text-align:right;direction:rtl">  ูู ูุนูู ุงูุฎุงุฏู ูู ุฑูุณูุง ุจุณุจุจ ุงูุฃููุงู </li><li style=";text-align:right;direction:rtl">  ูู ุงูุชุนูููุงุช ุ ุฃุนุชูุฏ ุฃูู ุณูู ุชุฌุฏ ุนุดุฑุงุช ุงููุฑูู ุงูุฏูููุฉ ุงูุฃุฎุฑู. </li></ol><cut><br><h3 style=";text-align:right;direction:rtl">  ููุช ุงููุฑู </h3><br>  ุฏุนูุง ููุชุจ ุงููุฑุณ ุจุณูุทุฉ ูุชุดุบูู ุงุฎุชุจุงุฑุงุช ููุณุฑุนุฉ. <br><br>  ุณูุชู ูุชุงุจุฉ ุงูุฑูุจูุช ูู ูุบุฉ ุจุฑูุฌุฉ ุงูุซุนุจุงู ุจุงุณุชุฎุฏุงู ููุชุจุฉ ุบูุฑ ูุชุฒุงููุฉ ููุชูุงุนู ูุน aiogram api telegram. <br><br>  ุฃูู ุดูุก ูุฌุจ ูุนูู ูู ููุก ุฅุนุฏุงุฏุงุช ุจุฑูุงูุฌ ุงูุฑูุจูุช ุ ููู ุฃุฎุจุฑ ุนู ููููุฉ ุงูุญุตูู ุนูู ุฑูุฒ ูููุฒ ูู BotFather ุ ูููุงู ุจุงููุนู ูุฆุงุช ุงูููุงูุงุช ุญูู ูุฐุง ุงูููุถูุน. <br><br>  ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุญุณุงุจ ุซุงูู ูู ุจุฑููุฉ ูููุดุฑู ุ ุญูุซ ุณูุชู ุญูุธ ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ ุงูุฎุงุตุฉ ุจูุง. <br><br>  ููุญุตูู ุนูู admin_id ู config_id ุ ูุญุชุงุฌ ุฅูู ุจุฏุก ุงูุฑูุจูุช ูู ุญุณุงุจ ุงููุณุคูู ูุงููุชุงุจุฉ "admin" ุฅูู ุงูุฑูุจูุช ุ ูุจุนุฏ ุฐูู ุณูููู ุจุฅูุดุงุก ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ุงูุฃููู ููุชุงุจุฉ admin_id ุ config_id.  ุงุณุชุจุฏุงู ูุจุฏุก ุงูุฑูุจูุช ูุฑุฉ ุฃุฎุฑู. <br><br><pre style=";text-align:right;direction:rtl"><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#-------------------- ------------------------- #    BotFather TOKEN = '1234567:your_token' #  logging.basicConfig(level=logging.INFO) bot = Bot(token=TOKEN) dp = Dispatcher(bot) #             admin_id=12345678 config_id=12345 conn = sqlite3.connect(":memory:") #  in memory  cursor = conn.cursor()</span></span></code> </pre> <br><h4 style=";text-align:right;direction:rtl">  ูุฐูู ุงูุขู ุฏุนููุง ูุฐูุจ ูู ุฎูุงู ุงูููุทู ุงูุฑุฆูุณู ููุจูุช </h4><br>  ุฅุฐุง ุงุณุชูุจู ุงูุฑูุจูุช ุฑุณุงูุฉ ุชุญุชูู ุนูู ูููุฉ "admin" ุ ูุณูููู ุจุฅูุดุงุก ุฌุฏูู ูุณุชุฎุฏู ุจุงุณุชุฎุฏุงู ูููุฐุฌ ุงูุจูุงูุงุช ุงูุชุงูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  chatid - ูุฑูุฏ ูุนุฑู ุงููุณุชุฎุฏู ุงูุฏุฑุฏุดุฉ </li><li style=";text-align:right;direction:rtl">  ุงุณู - ุงุณู ุงููุณุชุฎุฏู </li><li style=";text-align:right;direction:rtl">  ุงููุฑ - ุนุฏุฏ ุงูููุฑุงุช </li><li style=";text-align:right;direction:rtl">  ุงูุญุงูุฉ - ูุง ูุชู ุงุณุชุฎุฏุงู ูููุฉ ุฌูุงุฒ ุงูุญุงูุฉ ูู ูุฐุง ุงููุดุฑูุน ุ ููู ูุง ููููู ุงูุงุณุชุบูุงุก ุนููุง </li></ul><br>  ุฅุถุงูุฉ ูุณุชุฎุฏู ุงุฎุชุจุงุฑ ุ ูุฅุฑุณุงู ุงููุณุชูุฏ ุฅูู ุฎุงุฏู Telegram ูุน ุงูุฌุฏูู ูุฏููุง.  ูุฑุณู ุฃูุถูุง admin_id ู config_id ุฅูู ุงููุณุคูู ูู ุดูู ุฑุณุงุฆู.  ุจุนุฏ ุชููู ุงููุนุฑูุงุช ุ ูุฌุจ ุชุนููู ูุฐุง ุงูุฑูุฒ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    if message.text == 'admin': cursor.execute("CREATE TABLE users (chatid INTEGER , name TEXT, click INTEGER, state INTEGER)") cursor.execute("INSERT INTO users VALUES (1234, 'eee', 1,0)") conn.commit() sql = "SELECT * FROM users " cursor.execute(sql) data = cursor.fetchall() str_data = json.dumps(data) await bot.send_document(message.chat.id, io.StringIO(str_data)) await bot.send_message(message.chat.id, 'admin_id = {}'.format(message.chat.id)) await bot.send_message(message.chat.id, 'config_id = {}'.format(message.message_id+1))</span></span></code> </pre><br><h4 style=";text-align:right;direction:rtl">  ููุทู ุงููุณุชุฎุฏู </h4><br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุญุงูู ุงูุญุตูู ูู ูุงุนุฏุฉ ุจูุงูุงุช ุงูุฐุงูุฑุฉ ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุฐู ุฃุฑุณู ุงูุฑุณุงูุฉ.  ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ ุ ุซู ุชุญููู ุงูุจูุงูุงุช ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ูุฎุงุฏู Telergam ุ ุงููุฃ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจูุง ุจุงูุจูุงูุงุช ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ูุญุงูู ูุฑุฉ ุฃุฎุฑู ุงูุนุซูุฑ ุนูู ุงููุณุชุฎุฏู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    try: sql = "SELECT * FROM users where chatid={}".format(message.chat.id) cursor.execute(sql) data = cursor.fetchone() # or use fetchone() except Exception: data = await get_data() cursor.execute("CREATE TABLE users (chatid INTEGER , name TEXT, click INTEGER, state INTEGER)") cursor.executemany("INSERT INTO users VALUES (?,?,?,?)", data) conn.commit() sql = "SELECT * FROM users where chatid={}".format(message.chat.id) cursor.execute(sql) data = cursor.fetchone() # or use fetchone()</span></span></code> </pre><br>  ุฅุฐุง ูุฌุฏูุง ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุณูููู ุจูุนุงูุฌุฉ ุงูุฃุฒุฑุงุฑ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุงูููุฑ ููู "ุงูููุฑ" ุ ูููู ุจุชุญุฏูุซ ุนุฏุฏ ุงูููุฑุงุช ููุฐุง ุงููุณุชุฎุฏู </li><li style=";text-align:right;direction:rtl">  ุนูุฏ ุงูููุฑ ููู "ุชุตููู" ุ ูุนุฑุถ ูุงุฆูุฉ ุชุถู ุฎูุณุฉ ุนุดุฑ ุดุฎุตูุง ูุฏููู ุฃูุจุฑ ุนุฏุฏ ูู ุงูููุฑุงุช. </li></ul><br>  ุฅุฐุง ูู ุชุฌุฏ ุงููุณุชุฎุฏู ุ ูุงูุชุจ ูู ุฎุทุฃ. <cut><br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"> <span class="hljs-comment"><span class="hljs-comment">#      click     if data is not None: if message.text == '': sql = "UPDATE users SET click = {} WHERE chatid = {}".format(data[2]+1,message.chat.id) cursor.execute(sql) conn.commit() await bot.send_message(message.chat.id, ': {} '.format(data[2]+1)) #        10 if message.text == '': sql = "SELECT * FROM users ORDER BY click DESC LIMIT 15" cursor.execute(sql) newlist = cursor.fetchall() # or use fetchone() sql_count = "SELECT COUNT(chatid) FROM users" cursor.execute(sql_count) count=cursor.fetchone() rating=': {}\n'.format(count[0]) i=1 for user in newlist: rating=rating+str(i)+': '+user[1]+' - '+str(user[2])+'\n' i+=1 await bot.send_message(message.chat.id, rating) else: await bot.send_message(message.chat.id, '  ')</span></span></code> </pre> <br><h4 style=";text-align:right;direction:rtl">  ุฏุนูุง ููุชุจ ููุทู ุชุณุฌูู ุงููุณุชุฎุฏู </h4><br>  ูุญู ูุญุงูู ุงูุนุซูุฑ ุนูู ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ุฅุฐุง ูู ููู ููุงู ุ ุซู ุฃุถู ุตููุง ุฌุฏูุฏูุง ุฅูู ุงูุฌุฏูู ูุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ. <br><br>  ุฅุฐุง ุญุฏุซ ุฎุทุฃ ุ ูุณูุญููู ุขุฎุฑ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุ ุงููุฃ ุงูุฌุฏูู ููุฑุฑ ูุญุงููุฉ ุงูุชุณุฌูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">sql_select = <span class="hljs-string"><span class="hljs-string">"SELECT * FROM users where chatid={}"</span></span>.format(message.chat.id) sql_insert = <span class="hljs-string"><span class="hljs-string">"INSERT INTO users VALUES ({}, '{}', {},{})"</span></span>.format(message.chat.id,message.chat.first_name, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: cursor.execute(sql_select) data = cursor.fetchone() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> data <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: cursor.execute(sql_insert) conn.commit() <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> save_data() <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception: data = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> get_data() cursor.execute(<span class="hljs-string"><span class="hljs-string">"CREATE TABLE users (chatid INTEGER , name TEXT, click INTEGER, state INTEGER)"</span></span>) cursor.executemany(<span class="hljs-string"><span class="hljs-string">"INSERT INTO users VALUES (?,?,?,?)"</span></span>, data) conn.commit() cursor.execute(sql_select) data = cursor.fetchone() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> data <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: cursor.execute(sql_insert) conn.commit() <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> save_data() <span class="hljs-comment"><span class="hljs-comment">#   button = KeyboardButton('') button2 = KeyboardButton('') #  kb = ReplyKeyboardMarkup(resize_keyboard=True).add(button).add(button2) #     await bot.send_message(message.chat.id,' {}'.format(message.chat.first_name),reply_markup=kb)</span></span></code> </pre> <br>  ุญุณูุง ุ ูุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู. <br><br><h4 style=";text-align:right;direction:rtl">  ุญูุธ ูุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช ูู ุฎุงุฏู Telergam </h4><br>  ูููู ุจุฅูุบุงุก ุชุญููู ุฌููุน ุงูุจูุงูุงุช ูู ุฌุฏูู ุงููุณุชุฎุฏู ุ ูุชุฑุฌูุฉ ุงููุงููุณ ุฅูู ุณูุณูุฉ ุ ูุชุนุฏูู ููููุง ุ ุงูุฐู ูุชู ุชุฎุฒููู ุนูู ุฎูุงุฏู Telegram. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"> <span class="hljs-comment"><span class="hljs-comment">#-------------------- ------------------------- async def save_data(): sql = "SELECT * FROM users " cursor.execute(sql) data = cursor.fetchall() # or use fetchone() try: #     str_data=json.dumps(data) #      await bot.edit_message_media(InputMediaDocument(io.StringIO(str_data)), admin_id, config_id) except Exception as ex: print(ex)</span></span></code> </pre><br>  ูู ุฃุฌู ุงูุญุตูู ุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุ ูุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ุชูุฌูู ุงูุฑุณุงูุฉ ูุน ุงูููู ูู ุงููุณุคูู ุฅูู ุงููุณุคูู.  ุซู ุงูุญุตูู ุนูู ุงููุณุงุฑ ุฅูู ุงูููู ุ ููุฑุงุกุฉ ุงูุจูุงูุงุช ุนู ุทุฑูู ุฑุงุจุท ูุฅุนุงุฏุฉ ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ุจุฃููููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># #-------------------- ------------------------- async def get_data(): #         forward_data = await bot.forward_message(admin_id, admin_id, config_id) #    ,   file_data = await bot.get_file(forward_data.document.file_id) #    url file_url_data = bot.get_file_url(file_data.file_path) #     json_file= urlopen(file_url_data).read() #    json     return json.loads(json_file)</span></span></code> </pre> <br>  ุญุณููุง ุ ูุฐุง ูู ุดูุก ุชูุฑูุจูุง ุ ูุจูู ููุท ูุชุงุจุฉ ูุคูุช ูุนูู ูุณุฎ ุงุญุชูุงุทูุฉ ูุงุฎุชุจุงุฑ ุงูุฑูุจูุช. <br>  ูู ุจุฅูุดุงุก ุณูุณูุฉ ุฑุณุงุฆู ุชููุฐ ุทุฑููุฉ save_data () ุงูุฎุงุตุฉ ุจูุง ูู 30 ุซุงููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">timer_start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> threading.Timer(<span class="hljs-number"><span class="hljs-number">30.0</span></span>, timer_start).start() <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: asyncio.run_coroutine_threadsafe(save_data(),bot.loop) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> exc: <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span></code> </pre> <br>  ุญุณููุง ุ ูู ุงูุจุฑูุงูุฌ ุงูุฑุฆูุณู ุ ูุจุฏุฃ ุงููููุช ูุงูุจูุช ููุณู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#-------------------- ------------------------- if __name__ == '__main__': timer_start() executor.start_polling(dp, skip_updates=True)</span></span></code> </pre> <cut><br>  ูุฐุง ูุจุฏู ุฃูู ุชู ุญู ุงูููุฏ ุ ูููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฑุงุจุท ูุณูุฏุฉ ุงูุนูู ุฅูู ุฌูุซุจ</a> . <br><br><h3 style=";text-align:right;direction:rtl">  ููููุฉ ุงูุฌุฑู </h3><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุจุชูุฒูู ุงููุดุฑูุน ูู ุฌูุซุจ.  ูุจุฏุฃ ุงููุดุฑูุน ูู ุฃู ุจูุฆุฉ ุชุทููุฑ ูุจูุซูู (ุนูู ุณุจูู ุงููุซุงู: PyCharm). </li><li style=";text-align:right;direction:rtl">  ุณุชููู ุจูุฆุฉ ุงูุชุทููุฑ ุชููุงุฆููุง ุจุชุญููู ุงูููุชุจุงุช ุงููุงุฒูุฉ ูู ููู ุงููุชุทูุจุงุช. </li><li style=";text-align:right;direction:rtl">  ุงุณุชุจุฏุงู ุงูุฑูุฒ ูู BotFather ูู main.py <br><br><img src="https://habrastorage.org/webt/7c/jz/75/7cjz75bpkulsulwhaefjh4h_go0.png"></li><li style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุงููุดุฑูุน </li><li style=";text-align:right;direction:rtl">  ูู ุงูุญุณุงุจ ุงูุซุงูู ุ ุงููุฑ ููู / ุงุจุฏุฃ ูุงูุชุจ ูููุฉ "ุงููุณุคูู" <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/gq/jk/ru/gqjkru3lwkehvo5bwwgqkdvdxgw.jpeg" width="360"></div></li><li style=";text-align:right;direction:rtl">  ุฃููู ุชุดุบูู ุงููุดุฑูุน ูุงููุฃ admin_id ู config_id ูู ููู main.py </li><li style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุงููุดุฑูุน ููู ุญุณุงุจ ุงููุณุชุฎุฏู ูุถุบุท ุงูุจุฏุก <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/qw/f8/q6/qwf8q6x6t981g8hxbrnaxcnbabi.jpeg" width="360"></div></li><li style=";text-align:right;direction:rtl">  <b>ุฑุจุญ</b> </li></ol><br><h3 style=";text-align:right;direction:rtl">  ุงูุงุฎุชุจุงุฑ ูุงูุฑุณูู ุงูุจูุงููุฉ </h3><br>  ูุฃุฌุฑูุช ุงุฎุชุจุงุฑุงุช ุนูู ุฎูุงุฏู heroku ูุน ุงูุญุฏ ุงูุฃุฏูู ูู ุฎุตุงุฆุต ุงููุซุงู.  ูุฐูู ุ ูููููุง ุฃู ููุชุฑุถ ุฃู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุฃุฌุฑูุช ูู ุธุฑูู ูุชุณุงููุฉ ุฅูู ุญุฏ ูุง. <br><br>  ุงูุฑุณูู ุงูุจูุงููุฉ ูุตููุนุฉ ูู ุนููุงุช ูู ~ 100 ุทูุจ - ุฅุฌุงุจุงุช.  ููุชู ุชูุฏูู ูุชูุณุท โโุงูุนููุฉ. <br><br>  ุชู ุงุณุชุฎุฏุงู PostgreSQL ุนูู Amazon RDS ูุน ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุฎุตุงุฆุต ููุงุนุฏุฉ ุจูุงูุงุช ุนูู ุฎุงุฏู ุทุฑู ุซุงูุซ. <br><br><img src="https://habrastorage.org/webt/oq/os/4g/oqos4grqh9eklte_qsqw4wf7poa.png"><br><br>  ูุน ูุฌูุฏ ููููู ูุณุชุฎุฏู ุ ูุตุจุญ ููุช ุงููุณุฎ ุงูุงุญุชูุงุทู ูุดููุฉ. <br><br><img src="https://habrastorage.org/webt/a4/4r/6l/a44r6lleh7ihuqzeephau9xtj6k.png"><br><br>  ูุนุชูุฏ ุญุฌู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ุชูุงููุง ุนูู ุทุฑุงุฒ ุงูุจูุงูุงุช ุงูุฎุงุต ุจู ุ ูู ุญุงูุชู ุ ูุน ููููู ูุณุชุฎุฏู ุ ุชู ุงูุญุตูู ุนูู ููู ุจูุงูุงุช ุจู 21 ููุบุงุจุงูุช. <br><br><img src="https://habrastorage.org/webt/di/tt/s1/ditts1fk_ty-uoysteakhbvjsai.png"><br><br><h3 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h3><br>  ุทุฑููุฉ ุชุฎุฒูู ุงูุจูุงูุงุช ูุฐู ููุทููุฉ ุจุงููุณุจุฉ ูููุดุงุฑูุน ุงูุชู ูุตู ุนุฏุฏ ูุณุชุฎุฏูููุง ุฅูู ููููู ูุณุชุฎุฏู.  ููุฐุง ูู ุ ููููุฐุฌ ุฃููู ุฃู ุจุฏุก ุงูุชุดุบูู ุงูุดุฎุตู ุ ูุฐู ุงูุทุฑููุฉ ููุง ุงูุญู ูู ุงูุญูุงุฉ. <br><br>  ูุชูุฌุฉ ูุฐูู ุ ุญุตููุง ุนูู ูุณุชุฏู ูุณุชูู ุชูุงููุง ููุณุชูู ุนู ููุงุนุฏ ุงูุจูุงูุงุช ุงูุจุนูุฏุฉ. <br><br>  ููุง ูู ุงููุดุฑูุน ุงูููุถุญ ุฃุนูุงู ูุดุฑูุง ุนูู heroku:Clicker_fast_bot <br><br>  ููุฏ ููุช ุฃูุถูุง ุจุชูููุฐ ูุดุฑูุน ุฃูุซุฑ ุชุนููุฏูุง ุจุงุณุชุฎุฏุงู ูุฐู ุงูุฅูุฏููููุฌูุฉ:Random_friend_bot <br><br>  ุชุดุจู ุบุฑู ุงูุฏุฑุฏุดุฉ ูุงูุฏุฑุฏุดุฉ ูุน ุดุฎุตูู ุ ูููู ููุท ูู ุจุฑููุฉ. <br><br>  ุฅูู ูุจุญุซ ุฏุงุฎู ุฏุงุฆุฑุฉ ูุตู ูุทุฑูุง 100 ูู ูู ุดุฎุต ูู ุงูุฌูุณ ุงูุขุฎุฑ ููุชูุงุตู ููุฏุฑู ูุญุงุฏุซุฉ ูุบููุฉ ูุน ูุญุงูุฑ ุฌุฏูุฏ. <br><br>  ุฅุฐุง ูุงู ุงูุฃูุฑ ููุชุนูุง ุ ูููููู ุงูุชุฎูุต ูู ุงูููุฏ ุงููุตุฏุฑู ูููุดุฑูุน.  ูุฃูุถูุง ุ ุฅุฐุง ูุงู ูุฐุง ุงูููุถูุน ุฐุง ุตูุฉ ุ ูู ุงูููุงู ุงูุชุงูู ุ ูููููู ูุตู ุฅูุดุงุก ุชุทุจูู Rest api ุจุฏูู ููุงุนุฏ ุจูุงูุงุช ุฎุงุฑุฌูุฉ.  ูุฐุง ูู ูููุฉ django-sqllite-Telegram. <br><br>  ุณุฃููู ุณุนูุฏูุง ุจุฃู ููุฏ ุ ุดูุฑูุง ูู ุนูู ุงูุชูุงูู! </cut></cut></cut></cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar464865/">https://habr.com/ru/post/ar464865/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar464853/index.html">ูู ุฃูู ุชุณุชูุน ุฅูู ุงูุฃุฌูุฒุฉ ุงูุตูุชูุฉ: ุซูุงูุฉ ุงููุคุณุณุงุช ุงูุฃุณุงุณูุฉ ููุญุจู ุงูุตูุช - ูู ุงููุงุจุงู ุฅูู ุฑูุณูุง</a></li>
<li><a href="../ar464857/index.html">ุชุนุฏุฏ ุงูููุงู Microkernel ุชุทููุฑ ูุธุงู ุงูุชุดุบูู - ุงููุฌุฏูู</a></li>
<li><a href="../ar464859/index.html">ุงูุชุญูู ูู ูุญุฑูุงุช Nema 17 ูุชุนุฏุฏุฉ ุงูุณุงุฆุฑ ูู ููุณ ุงูููุช ุฃู NemaStepper</a></li>
<li><a href="../ar464861/index.html">ุณูุฑูู ูููู ุงููุฑุฌุนูุฉ ูุงูุฏููู</a></li>
<li><a href="../ar464863/index.html">ูุงุชุงุณ ููุจ. ูุฑูุฑ ููุตุฉ CTF ููุฏู ุฅูู ุงุณุชุบูุงู ุซุบุฑุงุช ุงูููุจ. ุงูุฌุฒุก 4</a></li>
<li><a href="../ar464867/index.html">"ููุญุงุฉ"</a></li>
<li><a href="../ar464869/index.html">ูุตุฉ ูุชุฑุงุตุฉ. ุงูุฌุฒุก 2</a></li>
<li><a href="../ar464871/index.html">15 ุขูุฉ ุชุนูู ุงููุชุจ ูููุจุชุฏุฆูู</a></li>
<li><a href="../ar464873/index.html">ููุงุฐุง ุฅุฌุฑุงุก ุนูููุงุช ูุน ุงูุนููุฉ ูู ุงูุตุฑู: 3 ุณููุงุฑูููุงุช ุนูููุฉ</a></li>
<li><a href="../ar464877/index.html">ุฃุฎุจุงุฑ ูู ุฎุฑูุทุฉ ุงูุดุงุฑุน ุงูููุชูุญ ุฑูู 473 (08/06/2019 - 12/08/2019)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>