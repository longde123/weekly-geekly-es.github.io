<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🍳 👰🏽 👃🏿 Wir veröffentlichen ein Java-Projekt mit Maven auf eine neue Art und Weise ☮️ 👦🏽 🛅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir alle sind seit langem an Maven gewöhnt, an die Versionierung und das Abhängigkeitsmanagement. Maven wurde geboren, als die tägliche Versammlung de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir veröffentlichen ein Java-Projekt mit Maven auf eine neue Art und Weise</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424425/">  Wir alle sind seit langem an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Maven</a> gewöhnt, an die Versionierung und das Abhängigkeitsmanagement.  Maven wurde geboren, als die tägliche Versammlung des Projekts das Wagemutigste war, als es als normal angesehen wurde, mindestens ein paar Mal im Jahr veröffentlicht zu werden. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Jenkins hieß</a> dann <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hudson</a> und die Bäume waren groß ... <br><br>  Die Ideen, die maven in die Entwicklungswelt brachte, waren äußerst beliebt und wurden schnell populär: Definieren eines Standard-Workflow-Projekts, eines Standard-Verzeichnismodells und vieles mehr, was seit langem als selbstverständlich angesehen wird. <br><br>  Als eine der Innovationen führte maven ein Standard-Versionsverwaltungssystem ein.  Die Version wurde in der Projektdatei gespeichert und bei jeder Veröffentlichung einer neuen Version geändert.  In einer Welt, in der es nicht jedermanns Sache war, einen Zweig und seinen Merjunt zu schaffen, war ein solcher Ansatz weit verbreitet. <br><br>  All dies vereinfachte die Entwicklung, den Start neuer Projekte, die Einführung von Entwicklern in das Projekt, die Veröffentlichung der Version und das Abhängigkeitsmanagement erheblich. <br><br>  Aber die Welt steht nicht still und trotz der Tatsache, dass viele von maven umgesetzte Ideen immer noch leben und von einem Projekt zum anderen wechseln, ist die Versionierung von maven eher ein Problem als ein Vorteil geworden. <br><br>  Als nächstes werden wir versuchen, die Welt zum Besseren zu verändern und unser Leben zu vereinfachen. <a name="habracut"></a><br><br><div class="spoiler">  <b class="spoiler_title">Haftungsausschluss</b> <div class="spoiler_text">  Ich gehe davon aus, dass der Leser mit Java, Maven, dem Entwicklungslebenszyklus und der CI / CD-Konfiguration vertraut ist und versteht, warum er all dies <s>und sogar einen Ninja benötigt</s> . <br></div></div><br>  In der modernen Realität wird die Veröffentlichung mehrerer Versionen pro Woche und sogar pro Tag als Ziel betrachtet, wenn nicht sogar als Norm.  Unter solchen Bedingungen führt das Speichern der Version in der Projektdatei zu einem sehr hohen Overhead. <br><br>  Jede Version führt zu zwei Commits für das Repository. Infolgedessen gibt es bei der aktiven Entwicklung und Freigabe des Projekts mehr solche technischen Commits als nützliche.  Die Geschichte des Projekts ist übersät und schwer zu verstehen. <br>  Dieser Ansatz führt auch zu doppelten Informationen: Es ist üblich geworden, die Version nicht nur in der Projektdatei, sondern auch in Form eines Repository-Tags zu speichern. <br><br>  Außerdem stellte sich die Sicherheitsfrage: Wenn Sie ein großes Projekt haben, benötigt die Build-Maschine nur Zugriff darauf.  Wenn es viele Projekte gibt, ist der Zugriff auf viele Projekte erforderlich, und wir erstellen entweder einen Superuser mit Zugriff auf alle Projekte mit dem Recht zu schreiben, oder wir erhalten eine zusätzliche Belastung durch die Verwaltung einer großen Anzahl von Benutzern mit einem engen Satz von Rechten, aber dennoch mit dem Recht, in das Repository zu schreiben, und häufig und das Recht, sich ohne Anforderungspool und Überprüfung an den Master zu binden. <br><br>  Bei Verwendung von maven mit dem Release-Plugin wird eine weitere interessante Funktion angezeigt: Die Neuerstellung wird nicht mit denselben Befehlen wie in der Originalversion durchgeführt. <br><br>  Vielleicht scheinen all diese Probleme für jemanden weit hergeholt zu sein, aber bei einer mehr oder weniger großen Anzahl von Projekten wird das Verwalten und Konfigurieren von CI / CD zu einem äußerst unangenehmen und verwirrenden Prozess. <br><br>  Nachdem das Problem nun sichtbar ist, versuchen wir, es zu lösen, um die Tools, Prozesse und im Allgemeinen nicht so zu ändern, dass es selbst irgendwie funktioniert. <br><br>  Was ist erforderlich: <br><br><ul><li>  Die Version wird einmal als Repository-Tag gespeichert </li><li>  Die Neuerstellung einer beliebigen Version ist möglich. Die Schritte sollten mit denen einer neuen Version identisch sein </li><li>  Ich benötige keine Schreibberechtigungen für das Repository </li><li>  Wir verwenden Maven immer noch als Projektmanager </li></ul><br>  Angenommen, CI / CD erhält ein Tag für uns und checkt ein Projekt aus. <br><br>  Angenommen, das Tag für uns ist mit CI / CD in der Umgebungsvariablen RELEASE_TAG gefüllt. Um die Version freizugeben, müssen wir die folgenden Befehle ausführen: <br><br><pre><code class="bash hljs">mvn -B versions:<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> -DnewVersion=<span class="hljs-variable"><span class="hljs-variable">$RELEASE_TAG</span></span> (1) mvn -B deploy (2)</code> </pre> <br>  1 - Aktualisiert Versionen in POM-Dateien des Projekts und seiner Module <br>  2 - Erstellt und lädt bei korrekter Konfiguration des Projekts Artefakte in das Repository hoch <br><br>  Vergessen Sie nicht, das Flag <b>-B</b> zu setzen, sonst verwandelt sich das Ausführungsprotokoll in einen Kürbis. <br><br>  Wichtig: Um Verwirrung zu vermeiden und klar zu zeigen, wie und woher die Assembly stammt, müssen Sie die Projektversion in einer abstrakten Form installieren, z. B. DEVELOPMENT-SNAPSHOT.  Sie können denselben Befehl verwenden: version: set.  Die Operation ist eine einmalige Operation, da wir die Version des Projekts nicht mehr in einer Datei speichern. <br><br>  Aufgrund der Änderungen können Sie die Konfiguration des Maven-Release-Plugins und des SCM-Blocks aus der POM-Datei entfernen. <br><br>  »Von den Minuspunkten: <br>  Wenn Sie die SNAPSHOT-Versionen irgendwo verwenden, kann es zu Verwirrung kommen. Jetzt sehen alle SNAPSHOT-Versionen gleich aus.  Und vielleicht ist diese Art, Projekte freizugeben, nichts für Sie. <br><br>  Es mag scheinen, dass das Artefakt, das aus demselben Commit, aber mit unterschiedlichen Tags gesammelt wurde, dasselbe ist, aber leider ist dies nicht der Fall.  Wir machen immer noch die Version in der Datei verfügbar und daher werden die gesammelten Pakete unterschiedlich sein. <br><br>  »Von den Profis: <br><br><ul><li>  Alle Anforderungen sind erfüllt und noch mehr! </li><li>  Die Version wird nur im Projekt-Tag gespeichert </li><li>  Die Montage der neuen und die Neuerstellung der alten Version werden mit denselben Befehlen wie in der Originalversion ausgeführt </li><li>  Es sind keine Rechte erforderlich, um sich für das Projekt zu engagieren </li><li>  Die Toolbox bleibt gleich </li><li>  Bonus: Projektkonfiguration vereinfacht </li></ul><br>  Zwei Zeilen retteten also wieder die Welt. <br>  Das ist alles, danke für Ihre Aufmerksamkeit! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de424425/">https://habr.com/ru/post/de424425/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de424415/index.html">Eine komplexe Lösung für die einfachen Probleme von HighLoad WEB-Diensten</a></li>
<li><a href="../de424417/index.html">Roskomnadzor berichtet über die Ergebnisse eines dreijährigen Kampfes gegen Piraten</a></li>
<li><a href="../de424419/index.html">Was passiert beim Erstellen eines Flexbox-Containers?</a></li>
<li><a href="../de424421/index.html">Häufige Internet-Business-Fehler, die Sie vermeiden können</a></li>
<li><a href="../de424423/index.html">Google Chrome 69 meldet sich automatisch in Ihrem Konto an und löscht beim Löschen des Verlaufs keine Google-Cookies</a></li>
<li><a href="../de424427/index.html">Roskomnadzor- und Telegramm-Bots über einen Proxy</a></li>
<li><a href="../de424429/index.html">Wissenschaft Kunst und Klang: 4 beeindruckende Projekte</a></li>
<li><a href="../de424431/index.html">Valve enthüllt Steam Game Controller-Ranglisten</a></li>
<li><a href="../de424433/index.html">Warum Hacker Mikrotik und wie ich 100.000 RouterOS vor einem Botnetz versteckt habe</a></li>
<li><a href="../de424435/index.html">Ölbohrzoo: Ordnung schaffen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>