<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº üö≤ üëåüèª Almacenamiento de AERODISK ruso: prueba de carga. Exprimir IOPS üõÄüèº üßìüèæ üèÇüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos! Seg√∫n lo prometido, publicamos los resultados de una prueba de carga de un sistema de almacenamiento de datos de fabricaci√≥n rusa: AEROD...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Almacenamiento de AERODISK ruso: prueba de carga. Exprimir IOPS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/aerodisk/blog/451456/"><p><img src="https://habrastorage.org/webt/uj/gt/g3/ujgtg3hzch1rzeuhtxa240tpdsi.jpeg"></p><br><p>  Hola a todos!  Seg√∫n lo prometido, publicamos los resultados de una prueba de carga de un sistema de almacenamiento de datos de fabricaci√≥n rusa: AERODISK ENGINE N2. </p><a name="habracut"></a><br><p>  En el √∫ltimo art√≠culo, rompimos sistemas de almacenamiento (es decir, realizamos pruebas de choque) y los resultados de la prueba de choque fueron positivos (es decir, nunca rompimos sistemas de almacenamiento).  Los resultados de la prueba de choque se pueden encontrar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AQU√ç</a> . </p><br><p>  En los comentarios al art√≠culo anterior, se expresaron deseos de pruebas adicionales de choque m√°s complicadas.  Los hemos solucionado todos y definitivamente los implementaremos en uno de los siguientes art√≠culos.  Al mismo tiempo, puede visitar nuestro laboratorio en Mosc√∫ en cualquier momento (venga con los pies o h√°galo de forma remota a trav√©s de Internet) y realice estas pruebas usted mismo (incluso puede hacer pruebas para un proyecto espec√≠fico :-)).  ¬°Escr√≠banos, considere todos los escenarios! </p><br><p>  Adem√°s, si no est√° en Mosc√∫, puede conocer mejor nuestro sistema de almacenamiento asistiendo a un evento de capacitaci√≥n gratuito en el centro de competencia de la ciudad m√°s cercana. </p><br><p>  A continuaci√≥n se muestra una lista de los pr√≥ximos eventos y fechas de trabajo de los centros de competencia. </p><br><ul><li>  Ekaterimburgo  16 de mayo de 2019.  Taller de entrenamiento.  Puede registrarse en el enlace: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://aerodisk.promo/ekb/</a> </li><li>  Ekaterimburgo  20 de mayo - 21 de junio de 2019.  Centro de Competencia.  Venga en cualquier momento de trabajo para una demostraci√≥n en vivo de los sistemas de almacenamiento AERODISK ENGINE N2.  La direcci√≥n exacta y el enlace de registro ser√°n posteriores.  Mantenga un registro de la informaci√≥n. </li><li>  Novosibirsk  SIGA LA INFORMACI√ìN EN NUESTRO SITIO o en HABRA. <br>  Octubre 2019 </li><li>  Kaz√°n  SIGA LA INFORMACI√ìN EN NUESTRO SITIO o en HABRA. <br>  Octubre 2019 </li><li>  Krasnoyarsk  SIGA LA INFORMACI√ìN EN NUESTRO SITIO o en HABRA. <br>  Noviembre 2019 </li></ul><br><p>  Tambi√©n queremos compartir otras buenas noticias: finalmente, nuestro canal de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">YouTube</a> , donde puedes ver videos de eventos pasados, se ha ganado por completo.  All√≠ cargamos regularmente nuestros videos de entrenamiento. </p><br><h2 id="testovyy-stend">  Banco de pruebas </h2><br><p>  Entonces, volvamos a las pruebas.  Actualizamos nuestro sistema de almacenamiento de laboratorio ENGINE N2 mediante la instalaci√≥n de unidades SSD SAS adicionales, as√≠ como adaptadores front-end Fibre Channel 16G.  De manera sim√©trica, actualizamos el servidor desde el cual comenzaremos la carga agregando adaptadores FC 16G all√≠. </p><br><p> Como resultado, en nuestro laboratorio hay un sistema de almacenamiento de 2 controladores con 24 SSD SAS de 800 GB, 3 discos DWPD, que se conecta a trav√©s de conmutadores SAN a un servidor Linux f√≠sico a trav√©s de FC 16G. <br>  Pruebe el dise√±o del banco en la figura a continuaci√≥n. </p><br><p><img src="https://habrastorage.org/webt/y-/dh/_s/y-dh_snmgtnavcyq4bidjlagn94.png"></p><br><h2 id="metodika-testirovaniya">  Metodolog√≠a de prueba </h2><br><p>  Para obtener el mejor rendimiento en el acceso en bloque, utilizaremos grupos DDP (Dynamic Disk Pool), que una vez creamos para los sistemas ALL-FLASH. <br>  Para las pruebas, creamos dos LUN de 1 TB cada uno con un nivel de protecci√≥n RAID-10.  "Distribuimos" cada LUN en 12 discos (24 en total) para aprovechar al m√°ximo el potencial de cada uno de los discos instalados en el sistema de almacenamiento. </p><br><p>  Presentamos los LUN al servidor a trav√©s de diferentes controladores para maximizar el uso de los recursos de almacenamiento. </p><br><p>  Cada una de las pruebas durar√° una hora, y las pruebas ser√°n realizadas por el programa Flexible IO (FIO), los datos de FIO se cargan autom√°ticamente a Excel, en el que ya se est√°n construyendo gr√°ficos, para mayor claridad. </p><br><h3 id="profili-nagruzki">  Cargar perfiles </h3><br><p>  En total, realizaremos tres pruebas durante una hora sin tener en cuenta el tiempo de calentamiento, para lo cual tomamos 15 minutos (esto es lo que se necesita para calentar una matriz de 24 discos SSD).  Estas pruebas emulan los perfiles de carga m√°s frecuentes, en particular, aquellos u otros DBMS, sistemas de videovigilancia, contenido de medios de difusi√≥n y copias de seguridad. </p><br><p>  Adem√°s, en todas las pruebas, deshabilitamos deliberadamente la capacidad de almacenar en cach√© la RAM en el sistema de almacenamiento y en el host.  Los resultados, por supuesto, empeorar√°n, pero, en nuestra opini√≥n, en tales condiciones la prueba ser√° m√°s honesta. </p><br><h2 id="rezultaty-testov">  Resultados de la prueba </h2><br><p>  <strong>Prueba n√∫mero 1.</strong>  <strong>Carga aleatoria en peque√±os bloques.</strong>  Emulaci√≥n de un DBMS transaccional altamente cargado. </p><br><ul><li>  Tama√±o de bloque = 4k </li><li>  Lectura / Escritura = 70% / 30% </li><li>  N√∫mero de trabajos = 16 </li><li>  Profundidad de cola = 32 </li><li>  La naturaleza de la carga = Aleatorio completo </li></ul><br><p><img src="https://habrastorage.org/webt/ik/3-/ae/ik3-aerqgglbsfdws6ozlnzbpmg.png"></p><br><p><img src="https://habrastorage.org/webt/ss/3-/mj/ss3-mjplbuxjimcbevjyz6fjq8c.png"></p><br><p>  Resultados de la prueba: </p><br><p><img src="https://habrastorage.org/webt/ds/pr/h-/dsprh-xsreu3furbzl90m0dc4xy.png"></p><br><p>  En total, recibimos 438k IOPS con un retraso de 2.6 milisegundos del sistema N2 de motor de rango medio junior.  Dada la clase del sistema, en nuestra opini√≥n, el resultado es bastante decente.  Para comprender si este es el l√≠mite para el sistema, analizaremos la utilizaci√≥n de los recursos de los controladores de almacenamiento. </p><br><p>  Estamos interesados ‚Äã‚Äãprincipalmente en la CPU, porque, como se indic√≥ anteriormente, deshabilitamos deliberadamente el cach√© de RAM para no distorsionar los resultados de la prueba. </p><br><p>  En ambos controladores de almacenamiento vemos aproximadamente la misma imagen. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/st/dr/r2/stdrr25vmyjtez-hc9kwlridbk0.png"></a> </p><br><p>  Es decir, la carga en la CPU es del 50%.  Esto sugiere que esto est√° lejos del l√≠mite de este sistema de almacenamiento y que a√∫n puede escalarlo f√°cilmente.  Avancemos un poco m√°s adelante: todas las siguientes pruebas tambi√©n mostraron una carga en el procesador de los controladores en la regi√≥n del 50%, por lo que no se las volveremos a dar. </p><br><p>  Seg√∫n nuestras pruebas de laboratorio, el l√≠mite c√≥modo del sistema AERODISK Engine N2, si contamos IOPS aleatorios con 4k bloques, es ~ 700,000 IOPS.  Si esto no es suficiente y necesita esforzarse por un mill√≥n, entonces tenemos un modelo m√°s antiguo ENGINE N4. </p><br><p>  Es decir, la historia sobre millones de IOPS es ENGINE N4, y si un mill√≥n es demasiado para ti, usa tranquilamente N2. </p><br><p>  Volvemos a las pruebas. </p><br><p>  <strong>Prueba n√∫mero 2.</strong>  <strong>Grabaci√≥n secuencial en grandes bloques.</strong>  Emulaci√≥n de sistemas de videovigilancia, carga de datos en un DBMS anal√≠tico o grabaci√≥n de copias de seguridad. </p><br><p>  En esta prueba, ya no estamos interesados ‚Äã‚Äãen IOPS, ya que con una carga secuencial de bloques grandes no tienen ning√∫n sentido.  Estamos principalmente interesados ‚Äã‚Äãen: el flujo de grabaci√≥n (megabytes por segundo) y los retrasos, que con bloques grandes, por supuesto, ser√°n mayores que con los peque√±os. </p><br><ul><li>  Tama√±o de bloque = 128k </li><li>  Lectura / Escritura = 0% / 100% </li><li>  N√∫mero de trabajos = 16 </li><li>  Profundidad de cola = 32 </li><li>  La naturaleza de la carga: secuencial </li></ul><br><p><img src="https://habrastorage.org/webt/jx/g8/c1/jxg8c1sqy-xrvstsnywth1wypvw.png"></p><br><p><img src="https://habrastorage.org/webt/qo/kf/_k/qokf_knndwunfvn0pdle1geycf0.png"></p><br><p><img src="https://habrastorage.org/webt/z6/vp/rw/z6vprw755rfukhjqkqtackszndq.png"></p><br><p>  Total: tenemos un registro de cinco y medio gigabytes por segundo con retrasos de once milisegundos.  En comparaci√≥n con los competidores extranjeros m√°s cercanos, el resultado, en nuestra opini√≥n, es excelente y tampoco es el l√≠mite del sistema ENGINE N2. </p><br><p>  <strong>Prueba n√∫mero 3.</strong>  <strong>Lectura secuencial en grandes bloques.</strong>  Emulaci√≥n de contenido de medios de difusi√≥n, generaci√≥n de informes desde un DBMS anal√≠tico o recuperaci√≥n de datos de copias de seguridad. </p><br><p>  Como en la prueba anterior, estamos interesados ‚Äã‚Äãen el flujo y los retrasos. </p><br><ul><li>  Tama√±o de bloque = 128k </li><li>  Lectura / Escritura = 100% / 0% </li><li>  N√∫mero de trabajos = 16 </li><li>  Profundidad de cola = 32 </li><li>  La naturaleza de la carga: secuencial </li></ul><br><p><img src="https://habrastorage.org/webt/ab/jr/ff/abjrffrngftgpvnplxuht65icgm.png"></p><br><p><img src="https://habrastorage.org/webt/1i/cy/ca/1icycakntgog_iqjvi1x7bl_o6e.png"></p><br><p><img src="https://habrastorage.org/webt/te/nw/0w/tenw0wp3cr8--e1dvqyxdm7dohw.png"></p><br><p>  Las m√©tricas de lectura de transmisi√≥n son previsiblemente un poco mejores que las m√©tricas de escritura de transmisi√≥n. </p><br><p>  Curiosamente, la tasa de retraso para toda la prueba es id√©ntica (l√≠nea recta).  Esto no es un error; en la lectura secuencial en bloques grandes, en nuestro caso, esta es una situaci√≥n com√∫n. </p><br><p>  Por supuesto, si deja el sistema de esta forma durante un par de semanas, eventualmente veremos saltos peri√≥dicos en los gr√°ficos que se asociar√°n con factores externos.  Pero, en general, no afectar√°n la imagen. </p><br><h2 id="vyvody">  Conclusiones </h2><br><p>  Desde el sistema de controlador dual AERODISK ENGINE N2, pudimos exprimir indicadores bastante serios (~ 438,000 IOPS y ~ 5-6 gigabytes por segundo).  Las pruebas de carga demostraron que para nuestro almacenamiento definitivamente no estamos avergonzados.  Por el contrario, los indicadores son muy decentes y corresponden a un buen almacenamiento. </p><br><p>  Aunque, como escribimos anteriormente, Engine N2 es un modelo m√°s joven y, adem√°s, los resultados que se muestran en este art√≠culo no son su l√≠mite.  M√°s adelante publicaremos una prueba similar de nuestro antiguo sistema ENGINE N4. </p><br><p>  Naturalmente, en el marco de un art√≠culo, no podemos cubrir todas las pruebas posibles, por lo tanto, invitando repetidamente a los lectores a compartir sus deseos para futuras pruebas en los comentarios, definitivamente los tendremos en cuenta en futuras publicaciones. </p><br><p>  Adem√°s, le recordamos que este a√±o participamos activamente en la capacitaci√≥n, por lo que lo invitamos a nuestros centros de competencia donde puede recibir capacitaci√≥n sobre los sistemas de almacenamiento AERODISK y, al mismo tiempo, es interesante y divertido. </p><br><p>  Informaci√≥n duplicada sobre los pr√≥ximos eventos de capacitaci√≥n. </p><br><ul><li>  Ekaterimburgo  16 de mayo de 2019.  Taller de entrenamiento.  Puede registrarse en el enlace: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://aerodisk.promo/ekb/</a> </li><li>  Ekaterimburgo  20 de mayo - 21 de junio de 2019.  Centro de Competencia.  Venga en cualquier momento de trabajo para una demostraci√≥n en vivo de los sistemas de almacenamiento AERODISK ENGINE N2.  La direcci√≥n exacta y el enlace de registro ser√°n posteriores.  Mantenga un registro de la informaci√≥n. </li><li>  Novosibirsk  SIGA LA INFORMACI√ìN EN NUESTRO SITIO o en HABRA. <br>  Octubre 2019 </li><li>  Kaz√°n  SIGA LA INFORMACI√ìN EN NUESTRO SITIO o en HABRA. <br>  Octubre 2019 </li><li>  Krasnoyarsk  SIGA LA INFORMACI√ìN EN NUESTRO SITIO o en HABRA. <br>  Noviembre 2019 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/451456/">https://habr.com/ru/post/451456/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../451442/index.html">Terraform it: revisi√≥n de Terragenesis</a></li>
<li><a href="../451446/index.html">Ayuda visual para el desarrollo de productos: dise√±o</a></li>
<li><a href="../451448/index.html">¬øPor qu√© puede ser necesario no hacer seguimiento?</a></li>
<li><a href="../451452/index.html">Build2019, comprendiendo lo que vimos</a></li>
<li><a href="../451454/index.html">Cambiamos el contenido de la aplicaci√≥n de notificaci√≥n iOS</a></li>
<li><a href="../451458/index.html">Elaboramos un juego de desarrollo. Parte 1</a></li>
<li><a href="../451460/index.html">Julia en el laberinto</a></li>
<li><a href="../451462/index.html">Escriba menos c√≥digo duplicado usando carpetas en Laravel</a></li>
<li><a href="../451464/index.html">Frontend Weekly Digest (6-12 de mayo de 2019)</a></li>
<li><a href="../451466/index.html">graphql - trampas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>