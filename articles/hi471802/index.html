<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯШ┐ ЁЯСйЁЯП╗тАНЁЯТ╝ ЁЯХЪ Linux рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ (рдХреНрд╖рдорддрд╛рдУрдВ) рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ ЁЯНТ ЁЯзСтАНЁЯдЭтАНЁЯзС тЪбя╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд▓реЗрдЦ рдХрд╛ рдПрдХ рдЕрдиреБрд╡рд╛рдж рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд▓рд┐рдирдХреНрд╕ рдкреНрд░рд╢рд╛рд╕рдХ рдкрд╛рдареНрдпрдХреНрд░рдо рдХреЗ рдЫрд╛рддреНрд░реЛрдВ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред 

 SystemD, Docker, рдФрд░ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрдЯрд░ рдЬреИрд╕реЗ Kuberneses рдХреЗ рдмрдб...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Linux рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ (рдХреНрд╖рдорддрд╛рдУрдВ) рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/471802/">  <i>рд▓реЗрдЦ рдХрд╛ рдПрдХ рдЕрдиреБрд╡рд╛рдж рд╡рд┐рд╢реЗрд╖ рд░реВрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реЗ рд▓рд┐рдирдХреНрд╕ рдкреНрд░рд╢рд╛рд╕рдХ</a> рдкрд╛рдареНрдпрдХреНрд░рдо рдХреЗ рдЫрд╛рддреНрд░реЛрдВ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред</i> <br><hr><br>  SystemD, Docker, рдФрд░ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрдЯрд░ рдЬреИрд╕реЗ Kuberneses рдХреЗ рдмрдбрд╝реЗ рд╣рд┐рд╕реНрд╕реЗ рдореЗрдВ рдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛ рдЕрдзрд┐рдХ рд╕реЗ рдЕрдзрд┐рдХ рдзрдиреНрдпрд╡рд╛рдж рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИред  рд▓реЗрдХрд┐рди, рдЬреИрд╕рд╛ рдХрд┐ рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ, рдкреНрд░рд▓реЗрдЦрди рдХреЛ рд╕рдордЭрдирд╛ рдереЛрдбрд╝рд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реИ рдФрд░ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рдХреБрдЫ рд╣рд┐рд╕реНрд╕реЗ рдореЗрд░реЗ рд▓рд┐рдП рдХреБрдЫ рднреНрд░рдорд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рдЗрд╕ рдЫреЛрдЯреЗ рд╕реЗ рд▓реЗрдЦ рдореЗрдВ рдЕрдкрдиреЗ рд╡рд░реНрддрдорд╛рди рдЬреНрдЮрд╛рди рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ред <br><br><img src="https://habrastorage.org/webt/mn/gs/zm/mngszmci_2-ufeepev7nfzd3fo8.png"><br><br>  рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рд▓рд┐рдВрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреНрд╖рдорддрд╛рдУрдВ (7)</a> рдореИрди рдкреЗрдЬ рд╣реИред  рд▓реЗрдХрд┐рди рд╡рд╣ рдПрдХ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдкрд░рд┐рдЪрд┐рдд рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реИред <a name="habracut"></a><br><br><h3>  рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рдХреНрд╖рдорддрд╛ </h3><br>  рдЖрдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдЕрдзрд┐рдХрд╛рд░ рдмрд╣реБрдд рд╕реАрдорд┐рдд рд╣реИрдВ, рдЬрдмрдХрд┐ "рд░реВрдЯ" рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдЕрдзрд┐рдХрд╛рд░ рдмрд╣реБрдд рд╡реНрдпрд╛рдкрдХ рд╣реИрдВред  рдпрджреНрдпрдкрд┐ "рд░реВрдЯ" рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓рдиреЗ рд╡рд╛рд▓реА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдЕрдХреНрд╕рд░ рд╕рднреА рд░реВрдЯ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИред <br><br>  рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдХрдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, POSIX (POSIX рдХреНрд╖рдорддрд╛рдПрдВ) рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рд╕рд┐рд╕реНрдЯрдо рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд╕рдореВрд╣реЛрдВ рдХреЛ рд╕реАрдорд┐рдд рдХрд░рдиреЗ рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИрдВ рдЬреЛ рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдФрд░ рдЙрд╕рдХреЗ рд╡рдВрд╢рдЬреЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рди рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИред  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рд╡реЗ рд╕рднреА "рдореВрд▓" рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рдПрдХ рд╕рдореВрд╣ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛ рд╡рд┐рдЪрд╛рд░ 1997 рдореЗрдВ POSIX 1003.1e рдХреЗ рдорд╕реМрджреЗ рдореЗрдВ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред <br><br>  рд▓рд┐рдирдХреНрд╕ рдкрд░, рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ (рдХрд╛рд░реНрдп) рдореЗрдВ <a href="">рдкрд╛рдВрдЪ 64-рдмрд┐рдЯ рд╕рдВрдЦреНрдпрд╛</a> (рд╕реЗрдЯ) рд╣реЛрддреА рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рдЕрдиреБрдорддрд┐ рдмрд┐рдЯреНрд╕ рд╣реЛрддреА рд╣реИрдВ (рд▓рд┐рдирдХреНрд╕ 2.6.25 рд╕реЗ рдкрд╣рд▓реЗ рд╡реЗ 32-рдмрд┐рдЯ рдереЗ), рдЬрд┐рд╕реЗ рдЕрдВрджрд░ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ <pre>  / proc / &lt;pid&gt; / рд╕реНрдерд┐рддрд┐ </pre>  ред <br><br><pre><code class="bash hljs">CapInh: 00000000000004c0 CapPrm: 00000000000004c0 CapEff: 00000000000004c0 CapBnd: 00000000000004c0 CapAmb: 0000000000000000</code> </pre> <br>  рдпреЗ рд╕рдВрдЦреНрдпрд╛рдПрдБ (рдпрд╣рд╛рдБ рд╣реЗрдХреНрд╕рд╛рдбреЗрд╕рд┐рдорд▓ рдиреЛрдЯреЗрд╢рди рдореЗрдВ рджрд┐рдЦрд╛рдИ рдЧрдИ рд╣реИрдВ) рдмрд┐рдЯрдореИрдк рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рдЕрдиреБрдорддрд┐ рд╕реЗрдЯ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣рд╛рдБ рдЙрдирдХреЗ рдкреВрд░реНрдг рдирд╛рдо рд╣реИрдВ: <br><br><ul><li>  <b>рдЗрдирд╣реЗрд░рд┐рдЯреЗрдмрд▓</b> - рд╡рдВрд╢рдЬ рдЬреЛ рд╡рдВрд╢рдЬ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ </li><li>  <b>рдЕрдиреБрдордд</b> - рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЬрд┐рдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд╛рд░реНрдп рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </li><li>  <b>рдкреНрд░рднрд╛рд╡реА</b> - рд╡рд░реНрддрдорд╛рди рдкреНрд░рднрд╛рд╡реА рдЕрдиреБрдорддрд┐ </li><li>  <b>рдмрд╛рдЙрдВрдбрд┐рдВрдЧ</b> - рд▓рд┐рдирдХреНрд╕ 2.6.25 рд╕реЗ рдкрд╣рд▓реЗ, рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рд╕реЗрдЯ рдПрдХ рд╕рд┐рд╕реНрдЯрдо-рд╡рд╛рдЗрдб рд╡рд┐рд╢реЗрд╖рддрд╛ рдереА рдЬреЛ рд╕рднреА рдереНрд░реЗрдбреНрд╕ рдХреЗ рд▓рд┐рдП рд╕рд╛рдорд╛рдиреНрдп рдереА, рдПрдХ рд╕реЗрдЯ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ рдЬрд┐рд╕рдХреЗ рдЖрдЧреЗ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рдерд╛ред  рдпрд╣ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реЗрдЯ рд╣реИ рдФрд░ рдХреЗрд╡рд▓ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рддрд░реНрдХ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИ, рдиреАрдЪреЗ рд╡рд┐рд╡рд░рдгред </li><li>  <b>рдкрд░рд┐рд╡реЗрд╢реА</b> (рд▓рд┐рдирдХреНрд╕ 4.3 рдХреЗ рдмрд╛рдж рд╕реЗ рдмрд╛рд╣рд░реА) - рд╕реЗрддреБ рдпрд╛ рдлрд╝рд╛рдЗрд▓ рдЕрдиреБрдорддрд┐рдпреЛрдВ (рдЙрд╕ рдкрд░ рдмрд╛рдж рдореЗрдВ рдЕрдзрд┐рдХ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдмрд┐рдирд╛, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЧреИрд░-рд░реВрдЯ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рдЖрд╕рд╛рди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ред </li></ul><br>  рдпрджрд┐ рдХрд╛рд░реНрдп рдПрдХ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдСрдкрд░реЗрд╢рди (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкреЛрд░реНрдЯ &lt;1024) рд╕реЗ <a href="">рдмрд╛рдЗрдВрдб</a> рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <a href="">рдХрд╣рддрд╛ рд╣реИ</a> , рддреЛ рдХрд░реНрдиреЗрд▓ <a href="">CAP_NET_BIND_SERVICE рдХреЗ</a> рд▓рд┐рдП рд╡рд░реНрддрдорд╛рди рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рд╕реЗрдЯ рдХреА рдЬрд╛рдБрдЪ рдХрд░рддрд╛ рд╣реИред  рдпрджрд┐ рдпрд╣ рд╕реНрдерд╛рдкрд┐рдд рд╣реИ, рддреЛ рдСрдкрд░реЗрд╢рди рдЬрд╛рд░реА рд╣реИред  рдЕрдиреНрдпрдерд╛, рдСрдкрд░реЗрд╢рди EPERM (рдСрдкрд░реЗрд╢рди рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реИ) рдХреЗ рд╕рд╛рде рдЦрд╛рд░рд┐рдЬ рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдпреЗ <code>CAP_</code> рдХрд░реНрдиреЗрд▓ рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ <code>CAP_</code> рдХрд┐рдП рдЧрдП рд╣реИрдВ рдФрд░ рдХреНрд░рдорд┐рдХ рд░реВрдк рд╕реЗ рдЧрд┐рдиреЗ рдЧрдП рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП <code>CAP_NET_BIND_SERVICE</code> , 10 рдХреЗ рдмрд░рд╛рдмрд░, рдХрд╛ рдЕрд░реНрде рд╣реИ рдмрд┐рдЯ 1 &lt;&lt; 10 = 0x400 (рдпрд╣ рдореЗрд░реЗ рдкрд┐рдЫрд▓реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рд╣реЗрдХреНрд╕рд╛рдбреЗрд╕рд┐рдорд▓ рдЕрдВрдХ "4" рд╣реИ)ред <br><br>  рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреА рдПрдХ рдкреВрд░реА рдорд╛рдирд╡-рдкрдардиреАрдп рд╕реВрдЪреА рд╡рд░реНрддрдорд╛рди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреНрд╖рдорддрд╛рдУрдВ (7)</a> рдореИрди рдкреЗрдЬ (рдХреЗрд╡рд▓ рдпрд╣рд╛рдВ рд╕рдВрджрд░реНрдн рдХреЗ рд▓рд┐рдП рд╕реВрдЪреА рд╣реИ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">)</a> рдореЗрдВ рдкрд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИред <br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдкреНрд░рдмрдВрдзрди рдФрд░ рдкреНрд░рд╛рдзрд┐рдХрд░рдг рдЬрд╛рдВрдЪ рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд▓реАрдмрдХреИрдк рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╣реИред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдПрдкреАрдЖрдИ рдХреЗ</a> рдЕрд▓рд╛рд╡рд╛, рдкреИрдХреЗрдЬ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреИрдкрд╢</a> рдЙрдкрдпреЛрдЧрд┐рддрд╛ рд╢рд╛рдорд┐рд▓ рд╣реИ, рдЬреЛ рдХрд┐ рдЕрдиреНрдп рдЪреАрдЬреЛрдВ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЖрдкрдХреЛ рдЕрдкрдиреА рд╕рд╛рдЦ рджрд┐рдЦрд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># capsh --print Current: = cap_setgid,cap_setuid,cap_net_bind_service+eip Bounding set = cap_setgid,cap_setuid,cap_net_bind_service Ambient set = Securebits: 00/0x0/1'b0 secure-noroot: no (unlocked) secure-no-suid-fixup: no (unlocked) secure-keep-caps: no (unlocked) secure-no-ambient-raise: no (unlocked) uid=0(root) gid=0(root) groups=0(root),1(bin),2(daemon),3(sys),4(adm),6(disk),10(wheel),11(floppy),20(dialout),26(tape),27(video)</span></span></code> </pre> <br>  рдпрд╣рд╛рдБ рдХреБрдЫ рднреНрд░рдорд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдмрд┐рдВрджреБ рд╣реИрдВ: <br><br><ul><li>  <b>рд╡рд░реНрддрдорд╛рди</b> - рдкреНрд░рд╛рд░реВрдк рдкреНрд░рдХреНрд░рд┐рдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">cap_to_text (3)</a> рдореЗрдВ capsh рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рдкреНрд░рднрд╛рд╡реА, рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛ рдФрд░ рдЙрдкрд▓рдмреНрдз рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ, рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЕрдиреБрдорддрд┐ рд╕рдореВрд╣реЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реВрдЪреАрдмрджреНрдз рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ <code>тАЬcapability[,capabilityтАж]+(e|i|p)тАЭ</code> , рдЬрд╣рд╛рдВ <code>тАЬeтАЭ</code> рдЕрд░реНрде рдкреНрд░рднрд╛рд╡реА рд╣реИ, <code>тАЬiтАЭ</code> рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛ рд╣реИ, рдФрд░ <code>тАЬpтАЭ</code> рдЙрдкрд▓рдмреНрдз рд╣реИред  рд╕реВрдЪреА рдХреЛ <code>тАЬ,тАЭ</code> рдкреНрд░рддреАрдХ рджреНрд╡рд╛рд░рд╛ рдЕрд▓рдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ рдЖрдкрдиреЗ рдЕрдиреБрдорд╛рди рд▓рдЧрд╛рдпрд╛ рд╣реЛрдЧрд╛ <code>(cap_setgid+eip, cap_setuid+eip)</code> ред  рдЕрд▓реНрдкрд╡рд┐рд░рд╛рдо рдПрдХ рдХреНрд░рд┐рдпрд╛ рд╕рдореВрд╣ рдореЗрдВ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рддрд╛ рд╣реИред  рдХрд╛рд░реНрд░рд╡рд╛рдИ рд╕рдореВрд╣реЛрдВ рдХреА рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕реВрдЪреА рдХреЛ рддрдм рд░рд┐рдХреНрдд рд╕реНрдерд╛рди рджреНрд╡рд╛рд░рд╛ рдЕрд▓рдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рджреЛ рдПрдХреНрд╢рди рдЧреНрд░реБрдк рдХреЗ рд╕рд╛рде рдПрдХ рдФрд░ рдЙрджрд╛рд╣рд░рдг <code>тАЬ= cap_sys_chroot+ep cap_net_bind_service+eipтАЭ</code> ред  рдФрд░ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рджреЛ рд╕рдореВрд╣ <code>тАЬ= cap_net_bind_service+e cap_net_bind_service+ipтАЭ</code> рд╕рдорд╛рди рдорд╛рди рдХреЛ рдПрдХ <code>тАЬcap_net_bind_service+eipтАЭ</code> рд░реВрдк рдореЗрдВ рдПрдиреНрдХреЛрдб рдХрд░реЗрдВрдЧреЗред </li><li>  <b>рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рд╕реЗрдЯ / рдПрдореНрдмрд┐рдПрдВрдЯ рд╕реЗрдЯ</b> ред  рдЖрдЧреЗ рднреНрд░рдорд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЗрди рджреЛ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдореЗрдВ рд░рд┐рдХреНрдд рд╕реНрдерд╛рди рджреНрд╡рд╛рд░рд╛ рдЕрд▓рдЧ рдХрд┐рдП рдЧрдП рдЗрди рд╕реЗрдЯреЛрдВ рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рд╣реИред  рдпрд╣рд╛рдВ cap_to_text рдкреНрд░рд╛рд░реВрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдореЗрдВ рдЙрдкрд▓рдмреНрдз, рдкреНрд░рднрд╛рд╡реА рдФрд░ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓реА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд╕реЗрдЯ рдирд╣реАрдВ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдПрдХ (рд╕реАрдорд╛ / рдкрд░рд┐рд╡реЗрд╢) рд╕реЗрдЯ рд╣реИред </li><li>  <a href="">рд╕рд┐рдХреНрдпреЛрд░рдмрд┐рдЯреНрд╕</a> : рдЯрд╛рд╕реНрдХ рдХреЗ <a href="">рд╕рд┐рдХреНрдпреЛрд░рд┐рдЯреА</a> рдлреНрд▓реИрдЧреНрд╕ рдХреЛ рджрд╢рдорд▓рд╡ / рд╣реЗрдХреНрд╕рд╛рдбреЗрд╕рд┐рдорд▓ / <a href="">рд╡реЗрд░рд┐рд▓реЙрдЧ рдлреЙрд░реНрдореЗрдЯ рдореЗрдВ</a> рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ (рд╣рд╛рдБ, рд╣рд░ рдХреЛрдИ рдЗрд╕реЗ рдпрд╣рд╛рдБ рдЙрдореНрдореАрдж рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдпрд╣ рдЗрд╕ <a href="">рдмрд┐рдВрджреБ</a> рд╕реЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рд╕рд┐рд╕реНрдЯрдо рдПрдбрдорд┐рдирд┐рд╕реНрдЯреНрд░реЗрдЯрд░ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ <code>FPGA</code> рдФрд░ <code>ASIC</code> рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд░рддрд╛ рд╣реИ)ред  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд░рд╛рдЬреНрдп рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИред  рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЭрдВрдбреЗ рдХреЛ <code>SECBIT_*</code> рд░реВрдк рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <code>SECBIT_*</code> рдореЗрдВ, рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреНрд╖рдорддрд╛рдУрдВ (7)</a> рдореЗрдВ рднреА рд╡рд░реНрдгрд┐рдд рд╣реИред </li><li>  рдЗрд╕ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдореЗрдВ <b>"NoNewPrivs" рдЬрд╛рдирдХрд╛рд░реА</b> рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХрд╛ рдЕрднрд╛рд╡ рд╣реИ, рдЬрд┐рд╕реЗ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ <pre>  / proc / &lt;pid&gt; / рд╕реНрдерд┐рддрд┐ </pre>  ред  рдпрд╣ рдХреЗрд╡рд▓ prctl (2) рдореЗрдВ рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рд╣реИ, рд╣рд╛рд▓рд╛рдБрдХрд┐ рдпрд╣ рдлрд╝рд╛рдЗрд▓ рдЕрдиреБрдорддрд┐рдпреЛрдВ (рдиреАрдЪреЗ рдФрд░ рдЕрдзрд┐рдХ рд╡рд┐рд╡рд░рдг рдореЗрдВ) рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рдкрд░ рд╕реАрдзреЗ рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИред  NoNewPrivs рдХреЛ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: <i><i>тАЬ <code>no_new_privs</code> рд╕рд╛рде 1 рдкрд░ <code>no_new_privs</code> рдХрд░реЗрдВ, рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВ (2) рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдЕрдиреБрджрд╛рди рдирд╣реАрдВ рджреЗрдиреЗ рдХрд╛ рд╡рд╛рджрд╛ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдХреЙрд▓ рдХрд┐рдП рдмрд┐рдирд╛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдирд╣реАрдВ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рдереЗ (2) (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>set-user-ID</code> , <code>set-group-ID</code> рдмрд┐рдЯреНрд╕ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдирд╛ <code>set-group-ID</code> рдФрд░ рдЕрдХреНрд╖рдо рдлрд╝рд╛рдЗрд▓ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг)</i> ред</i>  <i>рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рдмрд╛рдж, <code>no_new_privs</code> рд╡рд┐рд╢реЗрд╖рддрд╛ рд░реАрд╕реЗрдЯ рдирд╣реАрдВ рдХреА рдЬрд╛ рд╕рдХрддреАред</i>  <i>рдЗрд╕ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХрд╛ рдореВрд▓реНрдп рдХрд╛рдВрдЯреЗ (2) рдФрд░ рдХреНрд▓реЛрди (2) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдмрдирд╛рдП рдЧрдП рд╡рдВрд╢реЛрдВ рджреНрд╡рд╛рд░рд╛ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛ рд╣реИ рдФрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд (2) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред "</i>  Kubernetes рдЗрд╕ рдзреНрд╡рдЬ рдХреЛ 1 рдкрд░ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ рдЬрдм allowPrivilegeEscalation рдлрд▓реА рд╕реБрд░рдХреНрд╖рд╛ рдореЗрдВ рдЧрд▓рдд рд╣реИред </li></ul><br><br>  рдирд┐рд╖реНрдкрд╛рджрд┐рдд (2) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рдирдИ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╕рдордп, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреНрд╖рдорддрд╛рдУрдВ</a> рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╕реВрддреНрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрдЪреНрдЪреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">(7)</a> <br><br><pre> <code class="bash hljs">P<span class="hljs-string"><span class="hljs-string">'(ambient) = (file is privileged) ? 0 : P(ambient) P'</span></span>(permitted) = (P(inheritable) &amp; F(inheritable)) | (F(permitted) &amp; P(bounding)) | P<span class="hljs-string"><span class="hljs-string">'(ambient) P'</span></span>(effective) = F(effective) ? P<span class="hljs-string"><span class="hljs-string">'(permitted) : P'</span></span>(ambient) P<span class="hljs-string"><span class="hljs-string">'(inheritable) = P(inheritable) [ie, unchanged] P'</span></span>(bounding) = P(bounding) [ie, unchanged] <span class="hljs-built_in"><span class="hljs-built_in">where</span></span>: P() denotes the value of a thread capability <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> before the execve(2) -      execve(2) P<span class="hljs-string"><span class="hljs-string">'() denotes the value of a thread capability set after the execve(2) -      execve(2) F() denotes a file capability set -  </span></span></code> </pre> <br><br>  рдпреЗ рдирд┐рдпрдо рд╕рднреА рдЕрдиреБрдорддрд┐ рд╕реЗрдЯреЛрдВ рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдмрд┐рдЯ рдХреЗ рд▓рд┐рдП рдХрд┐рдП рдЧрдП рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреЗ рд╣реИрдВ (рдкрд░рд┐рд╡реЗрд╢ / рдЕрдиреБрдорддрд┐ / рдкреНрд░рднрд╛рд╡реА / рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд / рд╕реАрдорд╛)ред  рдорд╛рдирдХ C рд╕рд┐рдВрдЯреИрдХреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдФрд░ - рддрд╛рд░реНрдХрд┐рдХ AND; рдХреЗ рд▓рд┐рдП - рддрд╛рд░реНрдХрд┐рдХ OR рдХреЗ рд▓рд┐рдП)ред  P 'рдПрдХ рдмрд╛рд▓ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реИред  P рд╡рд░реНрддрдорд╛рди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд (2) рдХрд╣рддрд╛ рд╣реИред  рдПрдл рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд▓реЙрдиреНрдЪ рдХреА рдЧрдИ рдлрд╝рд╛рдЗрд▓ рдХреА рддрдерд╛рдХрдерд┐рдд "рдлрд╝рд╛рдЗрд▓ рдЕрдиреБрдорддрд┐" рд╣реИред <br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдХ рд░реВрдк рд╕реЗ рдЕрдкрдиреЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓реА, рд╕реБрд▓рдн рдФрд░ рдХреБрд╢рд▓ рд╕реЗрдЯреЛрдВ рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдирд┐рдпрдореЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдХрд┐рд╕реА рднреА рд╕рдордп рдореЗрдВ рдмрджрд▓ рд╕рдХрддреА рд╣реИ: <br><br><ul><li>  рдпрджрд┐ рдХреЙрд▓рд░ рдХреЗ рдкрд╛рд╕ <code>CAP_SETPCAP</code> рдирд╣реАрдВ рд╣реИ, рддреЛ рдирдП <b>рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рджрд┐рдП рдЧрдП</b> рд╕реЗрдЯ рдореЗрдВ P (рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛) рдФрд░ P (рдЙрдкрд▓рдмреНрдз) рдХрд╛ рдПрдХ рдЙрдкрд╕рдореВрд╣ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП </li><li>  (рд▓рд┐рдирдХреНрд╕ 2.6.25 рдХреЗ рд╕рд╛рде) рдирдпрд╛ <b>рд╡рд┐рд░рд╛рд╕рдд рд╡рд╛рд▓рд╛</b> рд╕реЗрдЯ рдкреА (рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛) рдФрд░ рдкреА (рд╕реАрдорд┐рдд) рдХрд╛ рд╕рдмрд╕реЗрдЯ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП </li><li>  рдирдпрд╛ <b>рдЙрдкрд▓рдмреНрдз</b> рд╕реЗрдЯ P рдХрд╛ рдЙрдкрд╕рдореВрд╣ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП (рдЙрдкрд▓рдмреНрдз) </li><li>  рдирдпрд╛ <b>рдХреБрд╢рд▓</b> рд╕реЗрдЯ рдкреА рдХрд╛ рд╕рдмрд╕реЗрдЯ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП (рдкреНрд░рднрд╛рд╡реА) </li></ul><br><br><h3>  рдлрд╝рд╛рдЗрд▓ рдХреА рдЕрдиреБрдорддрд┐ </h3><br>  рдХрднреА-рдХрднреА рд╕реАрдорд┐рдд рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдЪрд▓рд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓ рдореЗрдВ <code>chmod + s ./executable</code> рдмрд┐рдЯ ( <code>chmod + s ./executable</code> ) рд╕реЗрдЯ рдХрд░рдХреЗ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдРрд╕реА рдлрд╛рдЗрд▓, рдпрджрд┐ рдпрд╣ рд░реВрдЯ рдХреА рд╣реИ, рддреЛ рдХрд┐рд╕реА рднреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдП рдЬрд╛рдиреЗ рдкрд░ рдкреВрд░реНрдг рд░реВрдЯ рдЕрдзрд┐рдХрд╛рд░ рд╣реЛрдВрдЧреЗред <br><br>  рд▓реЗрдХрд┐рди рдпрд╣ рддрдВрддреНрд░ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдХреЛ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рджреЗрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП POSIX рдЕрдиреБрдорддрд┐рдпреЛрдВ рдиреЗ "рдлрд╝рд╛рдЗрд▓ рдЕрдиреБрдорддрд┐рдпрд╛рдБ" рдирд╛рдордХ рдПрдХ рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рд╣реИред  рдЙрдиреНрд╣реЗрдВ "Security.capability" рдирд╛рдордХ рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдлрд╝рд╛рдЗрд▓ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ</a> рд░реВрдк рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ (рдЬреИрд╕реЗ *, XFS, Raiserfs, Brtfs, overlay2, ...) рдХреЗ рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рдПрдХ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдЗрд╕ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП, <code>CAP_SETFCAP</code> рдЕрдиреБрдорддрд┐ <code>CAP_SETFCAP</code> (рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рдЙрдкрд▓рдмреНрдз рд╕реЗрдЯ рдореЗрдВ)ред <br><br><pre> <code class="bash hljs">$ getfattr -m - -d `<span class="hljs-built_in"><span class="hljs-built_in">which</span></span> ping` <span class="hljs-comment"><span class="hljs-comment"># file: usr/bin/ping security.capability=0sAQAAAgAgAAAAAAAAAAAAAAAAAAA= $ getcap `which ping` /usr/bin/ping = cap_net_raw+ep</span></span></code> </pre> <br><br><h3>  рд╡рд┐рд╢реЗрд╖ рдорд╛рдорд▓реЗ рдФрд░ рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдВ </h3><br>  рдмреЗрд╢рдХ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╕рдм рдХреБрдЫ рдЗрддрдирд╛ рд╕рд░рд▓ рдирд╣реАрдВ рд╣реИ, рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреНрд╖рдорддрд╛рдУрдВ (7)</a> рдореИрди рдкреЗрдЬ рдореЗрдВ рд╡рд░реНрдгрд┐рдд рдХрдИ рд╡рд┐рд╢реЗрд╖ рдорд╛рдорд▓реЗ рд╣реИрдВред  рд╕рдВрднрд╡рддрдГ рдЙрдирдореЗрдВ рд╕реЗ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИрдВ: <br><br><ul><li>  <b>рдпрджрд┐ NoNewPrivs рд╕реНрдерд╛рдкрд┐рдд рд╣реИ</b> рдпрд╛ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЛ nosuid рдХреЗ рд╕рд╛рде рдЖрд░реЛрд╣рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдпрд╛ рд╕реЗрдЯ-рдХреЙрд▓ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдирдЬрд░рдЕрдВрджрд╛рдЬ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ ptrace рджреНрд╡рд╛рд░рд╛ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдлрд╝рд╛рдЗрд▓ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рднреА рдирдЬрд░рдЕрдВрджрд╛рдЬ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрдм рдХрд░реНрдиреЗрд▓ <code>no_file_caps</code> рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде <code>no_file_caps</code> рд╣реЛрддрд╛ рд╣реИред </li><li>  <b>рдПрдХ "рдбрдВрдм" рдлрд╝рд╛рдЗрд▓ (рдХреНрд╖рдорддрд╛-рдбрдВрдм)</b> рдПрдХ рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓ рд╣реИ рдЬреЛ рдПрдХ рд╕реЗрддреБ рдлрд╝рд╛рдЗрд▓ рд╕реЗ рдлрд╝рд╛рдЗрд▓ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдмрджрд▓ рдЬрд╛рддреА рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рд╕реНрд░реЛрдд рдХреЛрдб рдХреЛ рдмрджрд▓реЗ рдмрд┐рдирд╛ред  рдРрд╕реА рдлрд╛рдЗрд▓реЗрдВ рдЕрдХреНрд╕рд░ рдЙрди рдкрд░ + ep рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╕реЗрдЯ рдХрд░рдХреЗ рдкреНрд░рд╛рдкреНрдд рдХреА рдЬрд╛рддреА рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>тАЬsetcap cap_net_bind_service+ep ./binaryтАЭ</code> ред  рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣рд┐рд╕реНрд╕рд╛ "рдИ" рд╣реИ - рдкреНрд░рднрд╛рд╡реАред  рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдпреЗ рдЕрдиреБрдорддрд┐рдпрд╛рдБ рдЙрдкрд▓рдмреНрдз рдФрд░ рдореМрдЬреВрджрд╛ рджреЛрдиреЛрдВ рдореЗрдВ рдЬреЛрдбрд╝реА рдЬрд╛рдПрдВрдЧреА, рдЗрд╕рд▓рд┐рдП рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдСрдкрд░реЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд, рдПрдХ <b>"рдХреНрд╖рдорддрд╛-рд╕реНрдорд╛рд░реНрдЯ" рдлрд╝рд╛рдЗрд▓</b> рдЬреЛ libcap рдпрд╛ рд╕рдорд╛рди рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд░рддреА рд╣реИ</a> , рдХрд┐рд╕реА рднреА рд╕рдордп "рдкреНрд░рднрд╛рд╡реА" рдпрд╛ "рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ" рдмрд┐рдЯреНрд╕ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">cap_set_proc (3)</a> (рдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">capset</a> ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреА рд╣реИ рдпрджрд┐ рд╡рд╣ рдЕрдиреБрдорддрд┐ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╣реИ рд╕рд╕реНрддреА тАЭрдХрд┐рдЯред  рдЗрд╕рд▓рд┐рдП, " <code>setcap cap_net_bind_service+p ./binaryтАЭ</code> рдПрдХ "рд╕реНрдорд╛рд░реНрдЯ" рдлрд╝рд╛рдЗрд▓ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реЛрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдПрдХ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдСрдкрд░реЗрд╢рди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдПрдХ рдкреНрд░рднрд╛рд╡реА рд╕реЗрдЯ рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рд╕реЗрдЯ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдЧрд╛ред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдирдореВрдирд╛ рдХреЛрдб</a> рджреЗрдЦреЗрдВред </li><li>  <b>рд╕реЗрддреБ-рд░реВрдЯ рд╡рд╛рд▓реА рдлрд╛рдЗрд▓реЗрдВ</b> рдХрд╛рдо рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦрддреА рд╣реИрдВ, рдЬрдм рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЧреИрд░-рд░реВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╕рднреА рд░реВрдЯ рд╡рд┐рд╢реЗрд╖рд╛рдзрд┐рдХрд╛рд░ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдЙрдирдХреЗ рдкрд╛рд╕ рдлрд╝рд╛рдЗрд▓ рдЕрдиреБрдорддрд┐ рд╕реЗрдЯ рд╣реИ, рддреЛ рдХреЗрд╡рд▓ рдЙрдиреНрд╣реЗрдВ рд╣реА рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рдПрдЧреАред  рдЖрдк рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рдЦрд╛рд▓реА рд╕реЗрдЯ рдХреЗ рд╕рд╛рде рдПрдХ рд╕реЗрдЯрд┐рдб рдлрд╝рд╛рдЗрд▓ рднреА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рдЗрд╕реЗ рдмрд┐рдирд╛ рдХрд┐рд╕реА рдЕрдиреБрдорддрд┐ рдХреЗ рдпреВрдЖрдИрдбреА 0 рдХреЗ рд╕рд╛рде рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓рд╛рдПрдЧрд╛ред  рд░реВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рдорд╛рдорд▓реЗ рд╣реИрдВ рдЬрдм рдХреЛрдИ рдлрд╛рдЗрд▓ рд╕реЗрдЯреБрдпрдб-рд░реВрдЯ рдХреЗ рд╕рд╛рде рдЪрд▓ рд░рд╣реА рд╣реИ рдФрд░ рд╡рд┐рднрд┐рдиреНрди рд╕реБрд░рдХреНрд╖рд╛ рдЭрдВрдбреЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд░рд╣реА рд╣реИ (рдЖрджрдореА рджреЗрдЦреЗрдВ)ред </li><li>  рдПрдХ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рд╕реЗрдЯ рдорд╛рд╕реНрдХ рдЙрдкрд▓рдмреНрдз рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдирд╣реАрдВ рдорд┐рд▓реА рд╣реИрдВред  рдкреА '(рдЙрдкрд▓рдмреНрдз) = рдПрдл (рдЙрдкрд▓рдмреНрдз) рдФрд░ рдкреА (рд╕реАрдорд┐рдд) рдпрд╛рдж рд░рдЦреЗрдВред  рдпрджрд┐ рдХрд┐рд╕реА рд╕реНрдЯреНрд░реАрдо рдХреЛ <b>рдЙрд╕рдХреЗ рд╡рд┐рд░рд╛рд╕рдд рд╡рд╛рд▓реЗ рд╕реЗрдЯ рдореЗрдВ рдЕрдиреБрдорддрд┐ рд╣реИ</b> рдЬреЛ рдЙрд╕рдХреЗ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рд╕реЗрдЯ рдореЗрдВ рдирд╣реАрдВ рд╣реИ, рддреЛ рд╡рд╣ рдЕрднреА рднреА <b>рдЕрдкрдиреЗ рдЙрдкрд▓рдмреНрдз</b> рд╕реЗрдЯ рдореЗрдВ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдЪрд▓рд╛рдХрд░ <b>рдпрд╣ рдЕрдиреБрдорддрд┐ рдкреНрд░рд╛рдкреНрдд</b> рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдЬрд┐рд╕рдХреА рдЕрдиреБрдорддрд┐ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рджрд┐рдП рдЧрдП рд╕реЗрдЯ рдореЗрдВ рд╣реИ - P '(рдЙрдкрд▓рдмреНрдз) = P ( рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓реА) рдФрд░ рдПрдл (рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓реА)ред </li><li>  рдЙрд╕ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдирд╛ рдЬреЛ рд╕реЗрдЯ-рдпреВрдЬрд╝рд░-рдЖрдИрдбреА, рд╕реЗрдЯ-рдЧреНрд░реБрдк-рдЖрдИрдбреА рдмрд┐рдЯреНрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдпреВрдЖрдИрдбреА рдпрд╛ рдЬреАрдЖрдИрдбреА тАЛтАЛрдХреЛ рдмрджрд▓рддрд╛ рд╣реИ, рдпрд╛ рдХрд┐рд╕реА рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рд╕рдХреЗ рджреНрд╡рд╛рд░рд╛ рдХреЛрдИ рдлрд╝рд╛рдЗрд▓ рдЕрдиреБрдорддрд┐рдпрд╛рдБ <b>рд╕реЗрдЯ</b> рдХреА рдЬрд╛рддреА рд╣реИрдВ <b>, рдкрд░рд┐рд╡реЗрд╢ рд╕реЗрдЯ рдХреЛ рд╕рд╛рдлрд╝ рдХрд░ рджреЗрдЧрд╛</b> ред  рдЕрдиреБрдорддрд┐рдпрд╛рдБ <b>рдЖрд╕рдкрд╛рд╕ рдХреЗ рд╕реЗрдЯ рдореЗрдВ</b> <code>PR_CAP_AMBIENT</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">prctl</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ <code>PR_CAP_AMBIENT</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЬрд╛рддреА рд╣реИрдВ</a> ред  рдЗрди рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА <b>рд╕реБрд▓рдн рдФрд░ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓реА</b> рдкреНрд░рдХреНрд░рд┐рдпрд╛ <b>рд╕реЗрдЯ</b> рдореЗрдВ рдореМрдЬреВрдж рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </li><li>  рдпрджрд┐ <b>рдпреВрдЖрдИрдбреА рдХреЗ</b> рд╕рд╛рде <b>0 рдХреЗ рдЕрд▓рд╛рд╡рд╛</b> рдХреЛрдИ рдкреНрд░рдХреНрд░рд┐рдпрд╛ <b>рдирд┐рд╖реНрдкрд╛рджрд┐рдд (2) рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрддреА рд╣реИ</b> , рддреЛ рдЗрд╕рдХреЗ рдЙрдкрд▓рдмреНрдз рдФрд░ рд╕рдХреНрд░рд┐рдп рд╕реЗрдЯ рдХреЗ рд╕рднреА рдЕрдзрд┐рдХрд╛рд░ рд╣рдЯрд╛ рджрд┐рдП рдЬрд╛рдПрдВрдЧреЗред </li><li>  рдпрджрд┐ <code>SECBIT_KEEP_CAPS</code> (рдпрд╛ рд╡реНрдпрд╛рдкрдХ <code>SECBIT_NO_SETUID_FIXUP</code> ) рд╕реЗрдЯ рдирд╣реАрдВ рд╣реИ, рдФрд░ <b>UID рдХреЛ 0 рд╕реЗ рдмрджрд▓рдХрд░</b> <code>SECBIT_NO_SETUID_FIXUP</code> <b>рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓реА, рдкрд╣реБрдБрдЪ рдпреЛрдЧреНрдп рдФрд░ рдкреНрд░рднрд╛рд╡реА рд╕реЗрдЯ рд╕реЗ рд╕рднреА рдЕрдиреБрдорддрд┐рдпрд╛рдБ рд╣рдЯрд╛ рджреА рдЬрд╛рддреА рд╣реИрдВ</b> ред </li></ul><br><br><h3>  рдЗрд╕рд▓рд┐рдП ... </h3><br>  рдпрджрд┐ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ nginx рдХрдВрдЯреЗрдирд░, ingress-nginx рдпрд╛ рдЖрдкрдХреА рд╕реНрд╡рдпрдВ рдХреА рд░реЛрдХ рдпрд╛ рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рдкреБрдирд░рд╛рд░рдВрдн рд╣реЛрддрд╛ рд╣реИ: <br><br> <code>bind() to 0.0.0.0:80 failed (13: Permission denied)</code> <br> <br>  ... рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рдкреЛрд░реНрдЯ 80 рдкрд░ рдПрдХ рдЕрдирдкреНрд░реАрд╡рд┐рд▓рд╛рдЗрдЬреНрдб (0 рдирд╣реАрдВ) рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реБрдирдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдерд╛, рдФрд░ рд╡рд░реНрддрдорд╛рди рдЕрдиреБрдорддрд┐ <code>CAP_NET_BIND_SERVICE</code> рдореЗрдВ рдХреЛрдИ <code>CAP_NET_BIND_SERVICE</code> рдирд╣реАрдВ рдереАред  рдЗрди рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдХрдо рд╕реЗ рдХрдо <code>cap_net_bind_service+ie</code> nginx рдлрд╝рд╛рдЗрд▓ рдЕрдиреБрдорддрд┐ рдХреЗ рд▓рд┐рдП xattr рдФрд░ рд╕реЗрдЯ ( <code>setcap</code> рдХрд╛ рдЙрдкрдпреЛрдЧ <code>setcap</code> ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдХреА рдЕрдиреБрдорддрд┐ рдХреЛ рд▓реАрдЧреЗрд╕реА рд╕реЗрдЯ (рдкреЙрдб рд╕рд┐рдХреНрдпреЛрд░рд┐рдЯреАрдХреЙрдиреНрдЯреЗрдХреНрд╕ / рдХреНрд╖рдорддрд╛ / рдРрдб / NET_BIND_SERVICE рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╕реАрдорд╛ рдХреЗ рд╕рд╛рде рдирд┐рд░реНрджрд┐рд╖реНрдЯ) рдХреЗ рд╕рд╛рде рдЬреЛрдбрд╝рд╛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдпрд╣ рднреА рдЙрдкрд▓рдмреНрдз рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд╕реЗрдЯ рдореЗрдВ рд░рдЦрд╛ рдЬрд╛рдПрдЧрд╛ред  рдкрд░рд┐рдгрд╛рдо <code>cap_net_bind_service+pie</code> ред <br><br>  рдпрд╣ рд╕рдм рддрдм рддрдХ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдЬрдм рддрдХ SecurityContext / allowPrivilegeEscalation рд╕рд╣реА рдкрд░ рд╕реЗрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ docker / rkt рд╕реНрдЯреЛрд░реЗрдЬ рдбреНрд░рд╛рдЗрд╡рд░ (docker рдкреНрд░рд▓реЗрдЦрди рджреЗрдЦреЗрдВ) xattrs рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред <br><br>  рдпрджрд┐ nginx рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд╕рдВрдмрдВрдз рдореЗрдВ рд╕реНрдорд╛рд░реНрдЯ рдереЗ, рддреЛ <code>cap_net_bind_service+i</code> рдкрд░реНрдпрд╛рдкреНрдд рд╣реЛрдЧрд╛ред  рддрдм рд╡рд╣ рдЙрдкрд▓рдмреНрдз рд╕реЗрдЯ рд╕реЗ рдкреНрд░рднрд╛рд╡реА рддрдХ рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреЗ рд╡рд┐рд╕реНрддрд╛рд░ рдХреЗ рд▓рд┐рдП libcap рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рдерд╛ред  рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдкреНрд░рд╛рдкреНрдд рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж <code>cap_net_bind_service+pie</code> ред <br><br>  Xattr рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ рдЧреИрд░-рд░реВрдЯ рдХрдВрдЯреЗрдирд░ рдореЗрдВ <code>cap_net_bind_service</code> рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХрд╛ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ <code>cap_net_bind_service</code> рдХреЛ рдЕрдкрдиреА рдмрд╛рд╣рд░реА рдХреНрд╖рдорддрд╛рдУрдВ (рдкрд░рд┐рд╡реЗрд╢ рдХреНрд╖рдорддрд╛рдУрдВ) рдХреЛ рд╕реЗрдЯ рдХрд░рдиреЗ рджреЗрдирд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЕрдкреНрд░реИрд▓ 2019 рддрдХ, рдпрд╣ рдЕрднреА рддрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓рд╛рдЧреВ рдирд╣реАрдВ</a> рдХрд┐рдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧрдпрд╛ рд╣реИ</a> ред <br><br><h3>  рдХреЛрдб рдЙрджрд╛рд╣рд░рдг </h3><br>  рдПрдХ рдХреБрд╢рд▓ рдЕрдиреБрдорддрд┐ рд╕реЗрдЯ рдореЗрдВ CAP_NET_BIND_SERVICE рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП <code>CAP_NET_BIND_SERVICE</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдирдореВрдирд╛ рдХреЛрдб рдпрд╣рд╛рдВ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ</a> ред  рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓ рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ <code>CAP_BIND_SERVICE+p</code> рдЕрдиреБрдорддрд┐ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br><br>  рд╕рдВрджрд░реНрдн (рд╕рдВрд▓рдЧреНрди): <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреНрд╖рдорддрд╛рдУрдВ</a> рдЖрджрдореА рдкреГрд╖реНрда <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">(7)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓ рд╕реНрд░реЛрдд рдХреЛрдб</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрд░реЛрдд рдХреЛрдб Libcap</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреБрд░рд╛рдиреА рдХреНрд╖рдорддрд╛рдПрдВ FAQ</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi471802/">https://habr.com/ru/post/hi471802/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi471776/index.html">рд▓рд╛рд░рд╡реЗрд▓: рдмреБрдирд┐рдпрд╛рджреА рдЕрд╡рдзрд╛рд░рдгрд╛рдУрдВ рдХреА рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХрд░реЗрдВред рднрд╛рдЧ рджреЛ: рдЕрднреНрдпрд╛рд╕</a></li>
<li><a href="../hi471778/index.html">рд╣реИрдХрдХреНрд╡реЗрд╕реНрдЯ 2019 рдореЗрдВ рдорд╛рдЗрдХреЛрд╕реЙрдлреНрдЯ рд▓реВрдиреАрдХреНрд╕ рдХреЛ рддреЛрдбрд╝рдирд╛</a></li>
<li><a href="../hi471792/index.html">рдЬрд╛рджреВрдЧрд░ "рд╕рд╛рдзрд╛рд░рдг рдЪрдорддреНрдХрд╛рд░" рдХрд╣рд╛рдВ рд╕реЗ рдЖрдпрд╛</a></li>
<li><a href="../hi471794/index.html">рдлреНрд▓реИрдЯ рд╕реАрд▓рд┐рдВрдЧ рдорд╛рдЗрдХреНрд░реЛрдлреЛрди рдХрд╛ рдпреБрдЧ</a></li>
<li><a href="../hi471796/index.html">рдереЛрдбрд╝рд╛ рдЕрдиреБрднрд╡ - рдмрд╣реБрдд рд╕рд╛рд░реЗ рд╕рд╛рдХреНрд╖рд╛рддреНрдХрд╛рд░: рдЯреАрдо рд╕рд╛рдХреНрд╖рд╛рддреНрдХрд╛рд░ рдХреИрд╕реЗ рдЖрдпреЛрдЬрд┐рдд рдХрд░реЗрдВ</a></li>
<li><a href="../hi471806/index.html">рд▓рд╛рдЗрдЯрд┐рдВрдЧ рдЧреЗрдо рдбрд┐рдЬрд╝рд╛рдЗрди рдФрд░ рдЧреЗрдорд┐рдВрдЧ рдЕрдиреБрднрд╡ рдХреЛ рдХреИрд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддреА рд╣реИ</a></li>
<li><a href="../hi471808/index.html">рдкреВрд░реНрд╡-рдирд┐рд░реНрдорд┐рдд рдШрдЯрдХреЛрдВ рд╕реЗ рдЗрдиреНрд╡рд░реНрдЯрд░ рдХреЗ рд╕рд╛рде рд╕реНрдЯреИрдВрдбрдЕрд▓реЛрди рдЬреАрдПрд╕рдПрдо рд░рд┐рд▓реЗ</a></li>
<li><a href="../hi471810/index.html">рд╕рдХреНрд░рд┐рдп рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рдСрдбрд┐рдЯрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдФрдЬрд╛рд░реЛрдВ рдХреА рддреБрд▓рдирд╛ рдХрд░реЗрдВ: рдХреНрд╡реЗрд╕реНрдЯ рдЪреЗрдВрдЬ рдСрдбрд┐рдЯрд░ рдФрд░ рдиреЗрдЯреНрд░рд╡рд┐рдХреНрд╕ рдСрдбрд┐рдЯрд░</a></li>
<li><a href="../hi471812/index.html">рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП рдореБрдлреНрдд рд╡реБрд▓реНрдлрд░рд╛рдо рдЗрдВрдЬрди рд▓рд╛рдЗрдмреНрд░реЗрд░реА</a></li>
<li><a href="../hi471814/index.html">рд╡реБрд▓реНрдлреНрд░рд╛рдореНрд▓рд┐рдПрдВрдЯрдлрд╝реЛрд░рдкрд╛рдЗрдерди | рдкрд╛рдпрдерди рдХреЗ рд▓рд┐рдП рдиреНрдпреВ рд╡реБрд▓реНрдлреНрд░рд╛рдо рднрд╛рд╖рд╛ рдХреНрд▓рд╛рдЗрдВрдЯ рд▓рд╛рдЗрдмреНрд░реЗрд░реА</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>