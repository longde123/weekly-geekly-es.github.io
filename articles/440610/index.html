<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüíª ‚úåüèΩ üôåüèæ Introduzca el an√°lisis est√°tico en el proceso, no solo busque errores con √©l üë∫ üë®‚Äçüë¶‚Äçüë¶ üí∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este art√≠culo es una traducci√≥n autorizada de la publicaci√≥n original . La traducci√≥n se realiz√≥ con la amable ayuda de los chicos de PVS-Studio. Grac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introduzca el an√°lisis est√°tico en el proceso, no solo busque errores con √©l</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440610/"> <i>Este art√≠culo es una traducci√≥n autorizada de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la publicaci√≥n original</a> .</i>  <i>La traducci√≥n se realiz√≥ con la amable ayuda de los chicos de PVS-Studio.</i>  <i>Gracias chicos</i> <br><br>  Lo que me anim√≥ a escribir este art√≠culo es una cantidad significativa de materiales sobre an√°lisis est√°tico, que recientemente ha estado surgiendo cada vez m√°s.  En primer lugar, este es un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">blog de PVS-Studio</a> , que se promueve activamente en la publicaci√≥n de revisiones de errores de Habr, encontradas por su herramienta en proyectos de c√≥digo abierto.  PVS-Studio ha implementado recientemente el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">soporte de Java</a> y, por supuesto, los desarrolladores de IntelliJ IDEA, cuyo analizador incorporado es probablemente el m√°s avanzado para Java en la actualidad, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">no pudieron mantenerse alejados</a> . <br><br>  Al leer estas rese√±as, tengo la sensaci√≥n de que estamos hablando de un elixir m√°gico: haga clic en el bot√≥n, y aqu√≠ est√°: la lista de defectos frente a sus ojos.  Parece que a medida que los analizadores avanzan, se encontrar√°n m√°s y m√°s errores, y los productos, escaneados por estos robots, mejorar√°n cada vez m√°s sin ning√∫n esfuerzo de nuestra parte. <br><br>  Bueno, pero no hay elixires m√°gicos.  Me gustar√≠a hablar sobre lo que generalmente no se habla en publicaciones como "aqu√≠ hay cosas que nuestro robot puede encontrar": lo que los analizadores no pueden hacer, cu√°l es su verdadera parte y lugar en el proceso de entrega de software y c√≥mo implementar El an√°lisis correctamente. <br><br><img src="https://habrastorage.org/webt/ey/2o/ta/ey2otantl8aitotp4_lojjuscn4.png" width="500"><br>  <i>Ratchet (fuente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wikipedia</a> ).</i> <br><a name="habracut"></a><br><h2>  Lo que los analizadores est√°ticos nunca podr√°n hacer </h2><br>  ¬øCu√°l es el an√°lisis del c√≥digo fuente desde el punto de vista pr√°ctico?  Tomamos los archivos de origen y obtenemos informaci√≥n sobre la calidad del sistema en poco tiempo (mucho m√°s corto que una ejecuci√≥n de pruebas).  La limitaci√≥n principal y matem√°ticamente insuperable es que de esta manera solo podemos responder un subconjunto muy limitado de preguntas sobre el sistema analizado. <br><br>  El ejemplo m√°s famoso de una tarea, que no se puede resolver mediante an√°lisis est√°tico es un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">problema detenido</a> : este es un teorema, que demuestra que uno no puede elaborar un algoritmo general, que definir√≠a si un programa con un c√≥digo fuente dado se enlaz√≥ para siempre o se complet√≥ para El tiempo final.  La extensi√≥n de este teorema es un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">teorema de Rice</a> , afirmando que para cualquier propiedad no trivial de funciones computables, la cuesti√≥n de determinar si un programa determinado calcula una funci√≥n con esta propiedad es una tarea algor√≠tmicamente insoluble.  Por ejemplo, no puede escribir un analizador, que determina, bas√°ndose en el c√≥digo fuente, si el programa analizado es una implementaci√≥n de un algoritmo espec√≠fico, por ejemplo, uno que calcula la cuadratura de un n√∫mero entero. <br><br>  Por lo tanto, la funcionalidad de los analizadores est√°ticos tiene limitaciones insuperables.  El analizador est√°tico nunca podr√° detectar todos los casos de, por ejemplo, error de "excepci√≥n de puntero nulo" en idiomas sin la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">seguridad nula</a> .  O detecte todas las apariciones de "atributo no encontrado" en lenguajes escritos din√°micamente.  Todo lo que puede hacer el analizador est√°tico m√°s perfecto es detectar casos particulares.  El n√∫mero de ellos entre todos los posibles problemas con su c√≥digo fuente, sin exagerar, es una gota en el oc√©ano. <br><br><h2>  El an√°lisis est√°tico no es una b√∫squeda de errores </h2><br>  Aqu√≠ hay una conclusi√≥n que se deduce de lo anterior: el an√°lisis est√°tico no es la forma de disminuir el n√∫mero de defectos en un programa.  Me aventurar√≠a a afirmar lo siguiente: al aplicarse por primera vez a su proyecto, encontrar√° lugares "divertidos" en el c√≥digo, pero lo m√°s probable es que no encuentre ning√∫n defecto que afecte la calidad de su programa. <br><br>  Los ejemplos de defectos encontrados autom√°ticamente por los analizadores son impresionantes, pero no debemos olvidar que estos ejemplos se encontraron al escanear un gran conjunto de bases de c√≥digo contra el conjunto de reglas relativamente simples.  Del mismo modo, los piratas inform√°ticos, que tienen la oportunidad de probar varias contrase√±as simples en una gran cantidad de cuentas, eventualmente encuentran las cuentas con una contrase√±a simple. <br><br>  ¬øSignifica esto que no es necesario aplicar el an√°lisis est√°tico?  Por supuesto que no!  Debe aplicarse por el mismo motivo por el que es posible que desee verificar cada contrase√±a nueva en la lista de detenci√≥n de contrase√±as no seguras. <br><br><h2>  El an√°lisis est√°tico es m√°s que la b√∫squeda de errores </h2><br>  De hecho, las tareas que el an√°lisis puede resolver en la pr√°ctica son mucho m√°s amplias.  Porque, en t√©rminos generales, el an√°lisis est√°tico representa cualquier verificaci√≥n del c√≥digo fuente, realizada antes de ejecutarlo.  Aqu√≠ hay algunas cosas que puede hacer: <br><br><ul><li> Una comprobaci√≥n del estilo de codificaci√≥n en el sentido m√°s amplio de esta palabra.  Incluye tanto una verificaci√≥n del formato como una b√∫squeda del uso de par√©ntesis vac√≠os / innecesarios, el establecimiento de valores de umbral para m√©tricas como una serie de l√≠neas / complejidad ciclom√°tica de un m√©todo, etc., todo lo que complica la legibilidad y la facilidad de mantenimiento del c√≥digo.  En Java, Checkstyle representa una herramienta con dicha funcionalidad, en Python - <code>flake8</code> .  Dichos programas generalmente se denominan "linters". </li><li>  No solo se puede analizar el c√≥digo ejecutable.  Los recursos como archivos JSON, YAML, XML y <code>.properties</code> pueden (y deben) verificarse autom√°ticamente para verificar su validez.  La raz√≥n de esto es que es mejor descubrir el hecho de que, por ejemplo, la estructura JSON se rompe debido a las comillas no emparejadas en la etapa inicial de la verificaci√≥n autom√°tica de una solicitud de extracci√≥n que durante la ejecuci√≥n de las pruebas o en tiempo de ejecuci√≥n, no eso?  Hay algunas herramientas relevantes, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">YAMLlint</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">JSONLint</a> y <code>xmllint</code> . </li><li>  La compilaci√≥n (o an√°lisis de lenguajes de programaci√≥n din√°mica) tambi√©n es un tipo de an√°lisis est√°tico.  Por lo general, los compiladores pueden emitir advertencias que indican problemas con la calidad del c√≥digo fuente, y no deben ignorarse. </li><li>  A veces, la compilaci√≥n se aplica no solo al c√≥digo ejecutable.  Por ejemplo, si tiene documentaci√≥n en el formato <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AsciiDoctor</a> , en el proceso de compilarlo en HTML / PDF, el AsciiDoctor ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">complemento Maven</a> ) puede emitir advertencias, por ejemplo, en enlaces internos rotos.  Esta es una raz√≥n importante para no aceptar una solicitud de extracci√≥n con cambios en la documentaci√≥n. </li><li>  La correcci√≥n ortogr√°fica tambi√©n es un tipo de an√°lisis est√°tico.  La utilidad <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aspell</a> puede verificar la ortograf√≠a no solo en la documentaci√≥n, sino tambi√©n en el c√≥digo fuente de los programas (comentarios y literales) en varios lenguajes de programaci√≥n, incluidos C / C ++, Java y Python.  ¬°El error de ortograf√≠a en la interfaz de usuario o la documentaci√≥n tambi√©n es un defecto! </li><li>  Las pruebas de configuraci√≥n en realidad representan una forma de an√°lisis est√°tico, ya que no ejecutan el c√≥digo fuente durante el proceso de ejecuci√≥n, a pesar de que las pruebas de configuraci√≥n se ejecutan como pruebas unitarias de <code>pytest</code> . </li></ul><br>  Como podemos ver, la b√∫squeda de errores tiene el papel menos significativo en esta lista y todo lo dem√°s est√° disponible cuando se utilizan herramientas gratuitas de c√≥digo abierto. <br><br>  ¬øCu√°l de estos tipos de an√°lisis est√°tico debe usarse en su proyecto?  Claro, cuanto m√°s mejor!  Lo importante aqu√≠ es una implementaci√≥n adecuada, que se discutir√° m√°s a fondo. <br><br><h2>  Una tuber√≠a de entrega como un filtro multietapa y el an√°lisis est√°tico como su primera etapa </h2><br>  Una tuber√≠a con un flujo de cambios (comenzando desde los cambios del c√≥digo fuente hasta la entrega en producci√≥n) es una met√°fora cl√°sica de integraci√≥n continua.  La secuencia est√°ndar de etapas de esta tuber√≠a se ve de la siguiente manera: <br><br><ol><li>  an√°lisis est√°tico </li><li>  compilaci√≥n </li><li>  pruebas unitarias </li><li>  pruebas de integraci√≥n </li><li>  Pruebas de IU </li><li>  verificaci√≥n manual </li></ol><br>  Los cambios rechazados en la N-√©sima etapa de la tuber√≠a no se pasan en la etapa N + 1. <br><br>  ¬øPor qu√© as√≠ y no de otra manera?  En la parte de la tuber√≠a, que se ocupa de las pruebas, los evaluadores reconocen la conocida pir√°mide de pruebas: <br><br><img src="https://habrastorage.org/webt/hr/41/ut/hr41utwuuzfwoe_3pkr6xm7rcwo.png" width="400"><br>  <i>Prueba de pir√°mide.</i>  <i>Fuente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el art√≠culo</a> de Martin Fowler.</i> <br><br>  En la parte inferior de esta pir√°mide hay pruebas que son m√°s f√°ciles de escribir, que se ejecutan m√°s r√°pido y no tienden a producir falsos positivos.  Por lo tanto, deber√≠a haber m√°s, deber√≠an cubrir la mayor parte del c√≥digo y deber√≠an ejecutarse primero.  En la parte superior de la pir√°mide, la situaci√≥n es bastante opuesta, por lo que el n√∫mero de pruebas de integraci√≥n y UI debe reducirse al m√≠nimo necesario.  Las personas en esta cadena son el recurso m√°s costoso, lento y poco confiable, por lo que se encuentran al final y hacen el trabajo solo si los pasos anteriores no han detectado ning√∫n defecto.  En las partes no relacionadas con las pruebas, la tuber√≠a se construye con los mismos principios. <br><br>  Me gustar√≠a sugerir la analog√≠a en forma de un sistema de filtraci√≥n de agua en varias etapas.  Se suministra agua sucia (cambios con defectos) en la entrada, y como salida necesitamos agua limpia, que no contendr√° todas las contaminaciones no deseadas. <br><br><img src="https://habrastorage.org/webt/nf/2n/gi/nf2ngidmm_2_aaiye4c52ol0fr0.jpeg" width="400"><br>  <i>Filtro multietapa.</i>  <i>Fuente: <a href="">Wikimedia Commons</a></i> <br><br>  Como ya sabr√°, los filtros de purificaci√≥n est√°n dise√±ados para que cada etapa posterior pueda eliminar part√≠culas contaminantes de menor tama√±o.  Las etapas de entrada de la purificaci√≥n aproximada tienen un mayor rendimiento y un menor costo.  En nuestra analog√≠a, significa que las puertas de calidad de entrada tienen un mayor rendimiento, requieren menos esfuerzo de lanzamiento y tienen menos costos operativos.  El papel del an√°lisis est√°tico, que (como ahora entendemos) es capaz de eliminar solo los defectos m√°s graves, es el papel del filtro de sumidero como la primera etapa de los purificadores de etapas m√∫ltiples. <br><br>  El an√°lisis est√°tico no mejora la calidad del producto final por s√≠ solo, al igual que el "sumidero" no hace que el agua sea potable.  Sin embargo, en conjunci√≥n con otros elementos de la tuber√≠a, su importancia es obvia.  Aunque en un filtro de varias etapas, las etapas de salida pueden eliminar todo lo que pueden hacer las entradas: somos conscientes de las consecuencias que se producir√°n al intentar pasar solo con etapas de purificaci√≥n fina, sin etapas de entrada. <br><br>  El prop√≥sito del "sumidero" es descargar las etapas posteriores de la captura de defectos muy √°speros.  Por ejemplo, una persona que realiza la revisi√≥n del c√≥digo no debe distraerse con c√≥digo incorrectamente formateado y violaci√≥n de los est√°ndares del c√≥digo (como par√©ntesis redundantes o ramificaciones demasiado anidadas).  Las pruebas unitarias deben detectar errores como el NPE, pero si antes el analizador indica que inevitablemente aparecer√° un error, esto acelerar√° significativamente su reparaci√≥n. <br><br>  Supongo que ahora est√° claro por qu√© el an√°lisis est√°tico no mejora la calidad del producto cuando se aplica ocasionalmente, y debe aplicarse continuamente para filtrar cambios con defectos graves.  La pregunta de si la aplicaci√≥n de un analizador est√°tico mejora la calidad de su producto es m√°s o menos equivalente a la pregunta "si tomamos agua de estanques sucios, ¬ømejorar√° su calidad de bebida cuando la pasemos por un colador?" <br><br><h2>  Introducci√≥n en un proyecto heredado </h2><br>  Una cuesti√≥n pr√°ctica importante: ¬øc√≥mo implementar el an√°lisis est√°tico en el proceso de integraci√≥n continua, como una "puerta de calidad"?  En el caso de las pruebas automatizadas, todo est√° claro: hay un conjunto de pruebas, una falla de cualquiera de ellas es una raz√≥n suficiente para creer que una compilaci√≥n no ha pasado una puerta de calidad.  Un intento de establecer la puerta de la misma manera por los resultados del an√°lisis est√°tico falla: hay demasiadas advertencias de an√°lisis en el c√≥digo heredado, no desea ignorarlas a todas, por otro lado, es imposible detener la entrega del producto solo porque Hay advertencias del analizador en √©l. <br><br>  Para cualquier proyecto, el analizador emite una gran cantidad de advertencias que se aplican por primera vez.  La mayor√≠a de las advertencias no tienen nada que ver con el correcto funcionamiento del producto.  Ser√° imposible arreglarlos todos y muchos de ellos no tienen que arreglarse en absoluto.  Al final, sabemos que nuestro producto realmente funciona incluso antes de la introducci√≥n del an√°lisis est√°tico. <br><br>  Como resultado, muchos desarrolladores se limitan a s√≠ mismos mediante el uso ocasional de an√°lisis est√°tico o us√°ndolo solo en el modo informativo que implica obtener un informe del analizador al construir un proyecto.  Esto es equivalente a la ausencia de cualquier an√°lisis, porque si ya tenemos muchas advertencias, la aparici√≥n de otro (por serio que sea) no se nota al cambiar el c√≥digo. <br><br>  Estas son las formas conocidas de introducci√≥n de puertas de calidad: <br><br><ul><li>  Establecer el l√≠mite del n√∫mero total de advertencias o el n√∫mero de advertencias, dividido por el n√∫mero de l√≠neas de c√≥digo.  Funciona mal, ya que tal puerta permite cambios con nuevos defectos hasta que se excede su l√≠mite. </li><li>  Marcado de todas las advertencias antiguas en el c√≥digo como ignorado en un momento determinado y falla de compilaci√≥n cuando aparecen nuevas advertencias.  PVS-Studio y algunas otras herramientas pueden proporcionar dicha funcionalidad, por ejemplo, Codacy.  No he pasado a trabajar con PVS-Studio.  En cuanto a mi experiencia con Codacy, su principal problema es que la distinci√≥n de un error antiguo y uno nuevo es un algoritmo complicado y no siempre funciona, especialmente si los archivos cambian significativamente o cambian de nombre.  Que yo sepa, Codacy podr√≠a pasar por alto nuevas advertencias en una solicitud de extracci√≥n y al mismo tiempo impedir una solicitud de extracci√≥n debido a advertencias, no relacionadas con cambios en el c√≥digo de este RP. </li><li>  En mi opini√≥n, la soluci√≥n m√°s efectiva es el m√©todo de "trinquete" descrito en el libro " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Entrega continua</a> ".  La idea b√°sica es que el n√∫mero de advertencias de an√°lisis est√°tico es una propiedad de cada versi√≥n y solo se permiten tales cambios, que no aumentan el n√∫mero total de advertencias. </li></ul><br><h2>  Trinquete </h2><br>  Funciona de la siguiente manera: <br><br><ol><li>  En la fase inicial, se agrega una entrada sobre una serie de advertencias encontradas por los analizadores de c√≥digo en los metadatos de la versi√≥n.  Por lo tanto, al compilar la rama principal, no solo la "versi√≥n 7.0.2" est√° escrita en su administrador de repositorios, sino la "versi√≥n 7.0.2, que contiene 100500 advertencias de Checkstyle".  Si est√° utilizando un administrador de repositorios avanzado (como Artifactory), es f√°cil mantener esos metadatos sobre su lanzamiento. </li><li>  Al construir, cada solicitud de extracci√≥n compara el n√∫mero de advertencias resultantes con su n√∫mero en una versi√≥n actual.  Si un RP conduce a un crecimiento de este n√∫mero, el c√≥digo no pasa la puerta de calidad en el an√°lisis est√°tico.  Si el n√∫mero de advertencias se reduce o no cambia, entonces pasa. </li><li>  Durante la pr√≥xima versi√≥n, el n√∫mero recalculado se volver√° a escribir en los metadatos. </li></ol><br>  Por lo tanto, lenta pero segura, el n√∫mero de advertencias converger√° a cero.  Por supuesto, el sistema puede ser enga√±ado introduciendo una nueva advertencia y corrigiendo la de otra persona.  Esto es normal, porque a la larga da el resultado: las advertencias se arreglan, generalmente no una por una, sino por grupos de cierto tipo, y todas las advertencias f√°ciles de resolver se resuelven con bastante rapidez. <br><br>  Este gr√°fico muestra el n√∫mero total de advertencias de Checkstyle durante seis meses de tal "trinquete" en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">uno de nuestros proyectos OpenSource</a> .  ¬°El n√∫mero de advertencias se ha reducido significativamente, y sucedi√≥ naturalmente, en paralelo con el desarrollo del producto! <br><br><img src="https://habrastorage.org/webt/ye/wa/u5/yewau5w494aa0vpkaevdydizoqm.png" width="500"><br><br>  Aplico la versi√≥n modificada de este m√©todo.  Cuento las advertencias por separado para diferentes m√≥dulos de proyecto y herramientas de an√°lisis.  El archivo YAML con metadatos sobre la compilaci√≥n, que se forma al hacerlo, tiene el siguiente aspecto: <br><br><pre> <code class="plaintext hljs">celesta-sql: checkstyle: 434 spotbugs: 45 celesta-core: checkstyle: 206 spotbugs: 13 celesta-maven-plugin: checkstyle: 19 spotbugs: 0 celesta-unit: checkstyle: 0 spotbugs: 0</code> </pre><br>  En cualquier sistema CI avanzado se puede implementar un "trinquete" para cualquier herramienta de an√°lisis est√°tico, sin depender de complementos y herramientas de terceros.  Cada uno de los analizadores emite su informe en un texto simple o formato XML, que ser√° f√°cilmente analizado.  Lo √∫nico que se debe hacer despu√©s es escribir la l√≥gica necesaria en un script de CI.  Puede echar un vistazo y ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> c√≥mo se implementa en nuestros proyectos fuente basados ‚Äã‚Äãen Jenkins y Artifactory.  Ambos ejemplos dependen de la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ratchetlib</a> : el m√©todo <code>countWarnings()</code> de la manera habitual cuenta las etiquetas xml en los archivos generados por Checkstyle y Spotbugs, y <code>compareWarningMaps()</code> implementa ese mismo trinquete, arrojando un error en el caso, si el n√∫mero de advertencias en cualquiera de Las categor√≠as est√°n aumentando. <br><br>  Una forma interesante de implementaci√≥n de "trinquete" es posible para analizar la ortograf√≠a de comentarios, textos literales y documentaci√≥n usando aspell.  Como sabr√°, al revisar la ortograf√≠a, no todas las palabras desconocidas para el diccionario est√°ndar son incorrectas, se pueden agregar al diccionario personalizado.  Si hace que un diccionario personalizado forme parte del proyecto de c√≥digo fuente, entonces la puerta de calidad para la ortograf√≠a se puede formular de la siguiente manera: ejecutar aspell con un diccionario est√°ndar y personalizado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">no deber√≠a</a> encontrar ning√∫n error ortogr√°fico. <br><br><h2>  La importancia de arreglar la versi√≥n del analizador </h2><br>  En conclusi√≥n, es necesario tener en cuenta lo siguiente: cualquiera que sea la forma en que elija introducir el an√°lisis en su canal de entrega, la versi√≥n del analizador debe ser fija.  Si deja que el analizador se actualice espont√°neamente, al generar otra solicitud de extracci√≥n pueden surgir nuevos defectos, que no se relacionan con el c√≥digo modificado, sino con el hecho de que el nuevo analizador simplemente puede detectar m√°s defectos.  Esto interrumpir√° su proceso de verificaci√≥n de solicitud de extracci√≥n.  La actualizaci√≥n del analizador debe ser una acci√≥n consciente.  De todos modos, la fijaci√≥n de la versi√≥n r√≠gida de cada componente de compilaci√≥n es un requisito general y un tema para otro tema. <br><br><h2>  Conclusiones </h2><br><ul><li>  El an√°lisis est√°tico no encontrar√° errores y no mejorar√° la calidad de su producto como resultado de una sola ejecuci√≥n.  Solo su funcionamiento continuo en el proceso de entrega producir√° un efecto positivo. </li><li>  La b√∫squeda de errores no es el objetivo principal del an√°lisis en absoluto.  La gran mayor√≠a de las funciones √∫tiles est√° disponible en herramientas de c√≥digo abierto. </li><li>  Introduzca puertas de calidad por los resultados del an√°lisis est√°tico en la primera etapa de la tuber√≠a de entrega, utilizando el "trinquete" para el c√≥digo heredado. </li></ul><br><h2>  Referencias </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Entrega continua</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Alexey Kudryavtsev: An√°lisis del programa: ¬øeres un buen desarrollador?</a>  ¬°Informe sobre diferentes m√©todos de an√°lisis de c√≥digo, no solo est√°tico! </li></ol><br><br><hr><br><h2>  Extractos de la discusi√≥n del art√≠culo original. </h2><br><br>  <b>Evgeniy Ryzhkov</b> <br><br>  Ivan, gracias por el art√≠culo y por ayudarnos a hacer nuestro trabajo, que es popularizar la tecnolog√≠a de an√°lisis de c√≥digo est√°tico.  Tiene toda la raz√≥n en que los art√≠culos del blog PVS-Studio, en caso de mentes inmaduras, pueden afectarlos y llevar a conclusiones tales como "Comprobar√© el c√≥digo solo una vez, arreglar√© los errores y eso funcionar√°".  Este es mi dolor personal, que no s√© c√≥mo superar desde hace varios a√±os.  El hecho es que los art√≠culos sobre verificaciones de proyectos: <br><br><ol><li>  Causar efecto wow en las personas.  A la gente le gusta leer c√≥mo los desarrolladores de compa√±√≠as como Google, Epic Games, Microsoft y otras compa√±√≠as a veces fallan.  A la gente le gusta pensar que cualquiera puede estar equivocado, incluso los l√≠deres de la industria cometen errores.  A la gente le gusta leer tales art√≠culos. </li><li>  Adem√°s, los autores pueden escribir art√≠culos sobre el flujo, sin tener que pensar mucho.  Por supuesto, no quiero ofender a nuestros muchachos que escriben estos art√≠culos.  Pero presentar un nuevo art√≠culo cada vez es mucho m√°s dif√≠cil que escribir un art√≠culo sobre la verificaci√≥n de un proyecto (una docena de errores, un par de bromas, mezclarlo con im√°genes de unicornios). </li></ol><br>  Escribiste un muy buen art√≠culo.  Tambi√©n tengo un par de art√≠culos sobre este tema.  Tambi√©n lo tienen otros colegas.  Adem√°s, visito varias empresas con un informe sobre el tema "Filosof√≠a del an√°lisis de c√≥digo est√°tico", en el que estoy hablando sobre el proceso en s√≠, pero no sobre errores espec√≠ficos. <br><br>  Pero no es posible escribir 10 art√≠culos sobre el proceso.  Bueno, para promocionar nuestro producto necesitamos escribir mucho regularmente.  Me gustar√≠a comentar algunos puntos m√°s del art√≠culo con un comentario por separado para que la discusi√≥n sea m√°s conveniente. <br><br>  Este breve <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo</a> trata sobre "Filosof√≠a del an√°lisis de c√≥digo est√°tico", que es mi tema cuando visito diferentes empresas. <br><br>  <b>Ivan Ponomarev</b> <br>  Evgeniy, muchas gracias por la revisi√≥n informativa del art√≠culo.  S√≠, ¬°tienes mi preocupaci√≥n en la publicaci√≥n sobre el impacto en las "mentes inmaduras" absolutamente correctamente! <br><br>  Aqu√≠ no hay nadie a quien culpar, ya que los autores de los art√≠culos / informes sobre <i>analizadores</i> no pretenden hacer art√≠culos / informes sobre el <i>an√°lisis</i> .  Pero despu√©s de un par de publicaciones recientes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Andrey2008</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">lany</a> , decid√≠ que ya no pod√≠a permanecer en silencio. <br><br>  <b>Evgeniy Ryzhkov</b> <br>  Ivan, como escribi√≥ anteriormente, comentar√© tres puntos del art√≠culo.  Significa que estoy de acuerdo con los que no comento. <br><br>  1. <i>La secuencia est√°ndar de etapas de esta tuber√≠a se ve de la siguiente manera ...</i> <br><br>  No estoy de acuerdo en que el primer paso es el an√°lisis est√°tico, y solo el segundo es la compilaci√≥n.  Creo que, en promedio, la verificaci√≥n de compilaci√≥n es m√°s r√°pida y l√≥gica que una ejecuci√≥n inmediata de an√°lisis est√°tico "m√°s pesado".  Podemos discutir si piensas lo contrario. <br><br>  2. <i>No he pasado a trabajar con PVS-Studio.</i>  <i>En cuanto a mi experiencia con Codacy, su principal problema es que la distinci√≥n de un error antiguo y uno nuevo es un algoritmo complicado y no siempre funciona, especialmente si los archivos cambian significativamente o cambian de nombre.</i> <br><br>  En PVS-Studio se hace incre√≠blemente √∫til.  Esta es una de las caracter√≠sticas principales del producto, que, desafortunadamente, es dif√≠cil de describir en los art√≠culos, por eso la gente no est√° muy familiarizada con √©l.  Recopilamos informaci√≥n sobre los errores existentes en una base.  Y no solo "el nombre del archivo y la l√≠nea", sino tambi√©n informaci√≥n adicional (marca de hash de tres l√≠neas: actual, anterior, siguiente), de modo que en caso de cambiar el fragmento de c√≥digo, a√∫n podr√≠amos encontrarlo.  Por lo tanto, cuando tenemos modificaciones menores, entendemos que es un error antiguo.  Y el analizador no se queja de eso.  Ahora alguien puede decir: "Bueno, ¬øqu√© pasa si el c√≥digo ha cambiado mucho, entonces esto no funcionar√≠a y usted se queja como si fuera el nuevo escrito?"  Si  Nos quejamos  Pero en realidad este es un c√≥digo nuevo.  Si el c√≥digo ha cambiado mucho, ahora es un c√≥digo nuevo, en lugar del antiguo. <br><br>  Gracias a esta caracter√≠stica, participamos personalmente en la implementaci√≥n del proyecto con 10 millones de l√≠neas de c√≥digo C ++, que cada d√≠a es "tocado" por un grupo de desarrolladores.  Todo sali√≥ sin problemas.  Por lo tanto, recomendamos utilizar esta funci√≥n de PVS-Studio a cualquier persona que introduzca un an√°lisis est√°tico en su proceso.  La opci√≥n de fijar el n√∫mero de advertencias seg√∫n un lanzamiento parece ser menos agradable para m√≠. <br><br>  3. <i>Cualquiera que sea la forma en que elija presentar su an√°lisis de la tuber√≠a de entrega, la versi√≥n del analizador debe ser fija</i> <br><br>  No puedo estar de acuerdo con esto.  Un adversario definitivo de tal enfoque.  Recomiendo actualizar el analizador en modo autom√°tico.  A medida que agregamos nuevos diagn√≥sticos y mejoramos los antiguos.  Por qu√©  En primer lugar, recibir√° advertencias de nuevos errores reales.  En segundo lugar, algunos viejos falsos positivos podr√≠an desaparecer si los superamos. <br><br>  No actualizar el analizador es lo mismo que no actualizar las bases de datos antivirus ("¬øy si comienzan a notificar sobre virus")?  No discutiremos aqu√≠ la verdadera utilidad del software antivirus en su conjunto. <br><br>  Si despu√©s de actualizar la versi√≥n del analizador tiene muchas advertencias nuevas, supr√≠malas, como escrib√≠ anteriormente, a trav√©s de esa funci√≥n.  Pero no para actualizar la versi√≥n ... Como regla general, tales clientes (seguro, hay algunos) no actualizan la versi√≥n del analizador durante a√±os.  No hay tiempo para eso.  PAGAN por la renovaci√≥n de la licencia, pero no usan las nuevas versiones.  Por qu√©  Porque una vez decidieron fijar una versi√≥n.  El producto hoy y hace tres a√±os es de d√≠a y de noche.  Resulta como "comprar√© el boleto, pero no vendr√©". <br><br>  <b>Ivan Ponomarev</b> <br><br>  1. Aqu√≠ tienes raz√≥n.  ¬°Estoy listo para estar de acuerdo con un compilador / analizador al principio y esto incluso deber√≠a cambiarse en el art√≠culo!  Por ejemplo, los notorios <code>spotbugs</code> no pueden actuar de una manera diferente, ya que analiza el <code>spotbugs</code> compilado.  Hay casos ex√≥ticos, por ejemplo, en la tuber√≠a para libros de jugadas Ansible, es mejor establecer el an√°lisis est√°tico antes de analizar porque es m√°s claro all√≠.  Pero esto es lo ex√≥tico en s√≠ mismo) <br><br>  2. <i>La opci√≥n de fijar el n√∫mero de advertencias seg√∫n un lanzamiento parece ser menos agradable para m√≠ ...</i> - bueno, s√≠, es menos agradable, menos t√©cnico pero muy pr√°ctico :-) Lo principal es que es un m√©todo general, mediante el cual puedo implementar efectivamente el an√°lisis est√°tico en cualquier lugar, incluso en el proyecto m√°s aterrador, tener cualquier base de c√≥digo y cualquier analizador (no necesariamente el suyo), utilizando Groovy o scripts de bash en CI.  Por cierto, ahora estamos contando las advertencias por separado para diferentes m√≥dulos y herramientas de proyecto, pero si las dividimos de una manera m√°s granuladora (para archivos), estar√° mucho m√°s cerca del m√©todo de comparaci√≥n de las nuevas / viejas.  Pero nos sentimos as√≠ y me gust√≥ ese trinquete porque estimula a los desarrolladores a monitorear el n√∫mero total de advertencias y disminuir lentamente este n√∫mero.  Si tuvi√©ramos el m√©todo de los antiguos / nuevos, ¬ømotivar√≠a a los desarrolladores a monitorear la curva del n√∫mero de advertencias?  - Probablemente, s√≠, puede ser, no. <br><br>  En cuanto al punto 3, aqu√≠ hay un ejemplo real de mi experiencia.  Mira <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este compromiso</a> .  ¬øDe donde vino?  Establecemos linters en el script TravisCI.  Trabajaron all√≠ como puertas de calidad.  Pero de repente, cuando una nueva versi√≥n de Ansible-lint que estaba encontrando m√°s advertencias, algunas compilaciones de solicitudes de extracci√≥n comenzaron a fallar debido a advertencias en el c√≥digo, que no hab√≠an cambiado.  Al final, el proceso se interrumpi√≥ y las solicitudes urgentes de extracci√≥n se fusionaron sin pasar por puertas de calidad. <br><br>  Nadie dice que no es necesario actualizar los analizadores.  Por supuesto que lo es!  Como todos los dem√°s componentes de compilaci√≥n.  Pero debe ser un proceso consciente, reflejado en el c√≥digo fuente.  Y cada vez que las acciones dependan de las circunstancias (ya sea que arreglemos las advertencias detectadas nuevamente o simplemente reiniciemos el "trinquete") <br><br>  <b>Evgeniy Ryzhkov</b> <br>  Cuando me preguntan: "¬øExiste la posibilidad de verificar cada confirmaci√≥n en PVS-Studio?", Respondo que s√≠.  Y luego agregue: "¬°Solo por el amor de Dios, no falle la construcci√≥n si PVS-Studio encuentra algo!"  Porque de lo contrario, tarde o temprano, PVS-Studio ser√° percibido como algo disruptivo.  Y hay situaciones en las que ES NECESARIO comprometerse r√°pidamente, en lugar de luchar con las herramientas, que no dejan pasar el compromiso. <br><br>  Mi opini√≥n de que es malo fallar la compilaci√≥n en este caso.  Es bueno enviar mensajes a los autores del c√≥digo del problema. <br><br>  <b>Ivan Ponomarev</b> <br>  Mi opini√≥n es que no existe tal cosa como "tenemos que comprometernos r√°pidamente".  Todo esto es solo un proceso pobre.  Un buen proceso genera velocidad no porque rompamos un proceso / puertas de calidad, cuando necesitamos "hacerlo r√°pidamente". <br><br>  Esto no contradice el hecho de que podemos hacerlo sin fallar en la construcci√≥n de algunas clases de resultados de an√°lisis est√°tico.  Simplemente significa que la puerta est√° configurada de la manera en que se ignoran ciertos tipos de hallazgos y para otros hallazgos tenemos tolerancia cero. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mi commitstrip favorito sobre el tema "r√°pidamente".</a> <br><br>  <b>Evgeniy Ryzhkov</b> <br>  Soy un adversario definitivo del enfoque para usar la versi√≥n antigua del analizador.  ¬øQu√© pasa si un usuario encuentra un error en esa versi√≥n?  Escribe a un desarrollador de herramientas y un desarrollador de herramientas incluso lo arreglar√°.  Pero en la nueva versi√≥n.  Nadie admitir√° la versi√≥n anterior para algunos clientes.  Si no estamos hablando de contratos por valor de millones de d√≥lares. <br><br>  <b>Ivan Ponomarev</b> <br>  Evgeniy, no estamos hablando de esto en absoluto.  Nadie dice que debemos mantenerlos viejos.  Se trata de arreglar versiones de dependencias de componentes de compilaci√≥n para su actualizaci√≥n controlada: es una disciplina com√∫n, se aplica a todo, incluidas las bibliotecas y las herramientas. <br><br>  <b>Evgeniy Ryzhkov</b> <br>  Entiendo c√≥mo "deber√≠a hacerse en teor√≠a".  Pero solo veo dos elecciones hechas por los clientes.  O se adhieren al nuevo o al viejo.  As√≠ que casi NO tenemos tales situaciones cuando "tenemos disciplina y nos quedamos atr√°s de la versi√≥n actual en dos lanzamientos".  No es importante para m√≠ decir en este momento si es bueno o malo.  Solo digo lo que veo. <br><br>  <b>Ivan Ponomarev</b> <br>  Lo tengo  De todos modos, todo depende en gran medida de las herramientas / procesos que tengan sus clientes y c√≥mo los usen.  Por ejemplo, no s√© nada sobre c√≥mo funciona todo en el mundo C ++. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/440610/">https://habr.com/ru/post/440610/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../440600/index.html">¬øCu√°ntos nombres de dominio .com no se usan?</a></li>
<li><a href="../440602/index.html">Dunning con Kruger, S√≥crates y los c√≠rculos del conocimiento.</a></li>
<li><a href="../440604/index.html">M√°quinas de contabilidad, IBM 1403, y por qu√© 132 columnas son el est√°ndar para impresoras</a></li>
<li><a href="../440606/index.html">El resumen de materiales interesantes para el desarrollador m√≥vil # 286 (del 11 al 17 de febrero)</a></li>
<li><a href="../440608/index.html">La tarea de clasificar a trav√©s de los ojos de un ni√±o escolar: determinar la presencia de un autom√≥vil en el estacionamiento por marcos de una c√°mara de vigilancia</a></li>
<li><a href="../440612/index.html">Entrenamiento Cisco 200-125 CCNA v3.0. D√≠a 5. Conexi√≥n de dispositivos CISCO y modos IOS</a></li>
<li><a href="../440614/index.html">Cuestiones de seguridad vial, ordenadas por puntos.</a></li>
<li><a href="../440616/index.html">La NASA compra dos asientos m√°s en Soyuz, prueba el RS-25 y no abandona la estaci√≥n cercana a la Tierra</a></li>
<li><a href="../440618/index.html">Julia y optimizaci√≥n</a></li>
<li><a href="../440620/index.html">Dotfile Madness</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>