<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃🏻 🎨 👩🏻‍🎤 Bagaimana kami membuat sistem pembayaran cryptocurrency: lima masalah utama 🅾️ 🐅 🎻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, Habr! Yang berhubungan adalah B2Broker, penyedia solusi likuiditas dan teknologi untuk industri pialang dan pertukaran. Salah satu produk kami a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana kami membuat sistem pembayaran cryptocurrency: lima masalah utama</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/b2broker/blog/441338/"> Halo, Habr!  Yang berhubungan adalah B2Broker, penyedia solusi likuiditas dan teknologi untuk industri pialang dan pertukaran.  Salah satu produk kami adalah platform perdagangan B2BX.exchange.  Ketika kami meluncurkan platform pada musim panas 2017, kami memikirkan cara menerima cryptocurrency dan pemrosesan apa yang digunakan.  Sayangnya, tidak ada seorang pun pada saat itu yang siap untuk memberikan setidaknya jaminan pada kerentanan kontrak, dan kisah serangan terhadap platform DAO masih dalam sidang.  Kami tidak ingin mengikuti jejak DAO.  Selain itu, kami memiliki beberapa pengalaman dalam menerima pembayaran melalui blockchain.  Jadi kami memutuskan untuk secara mandiri menghitung seluruh siklus pembayaran blockchain.  Dalam posting ini kita akan berbicara tentang apa yang kita lakukan, dan, yang paling menarik, tentang masalah apa yang harus kita selesaikan dalam proses. <br><br><img src="https://habrastorage.org/webt/uk/hg/wc/ukhgwczsncwbugsyinbvjlnoqg4.jpeg"><br>  <i>Sumber: ripplecoinnews.com</i> <br><a name="habracut"></a><br>  Dalam proses mengerjakan sistem pembayaran, kami menyadari bahwa kami dapat membuat layanan tidak hanya untuk platform B2BX.exchange kami, tetapi juga produk yang sepenuhnya independen.  Kami menyebutnya B2BinPay. <br><br><h2>  Terdiri dari apa B2BinPay </h2><br>  Sistem pembayaran dibagi menjadi beberapa bagian dasar.  Semuanya ditulis dalam PHP. <br><br>  <i>Bagian pertama dari sistem</i> bertanggung jawab untuk berinteraksi dengan blockchains, yaitu untuk menerima, mengirim, dan melacak pembayaran. <br><br>  <i>Bagian kedua</i> adalah API.  Ia terlibat dalam interaksi dengan konsumen layanan dan pertukaran: memberi tahu penerimaan dana, melakukan pertukaran mata uang digital.  API ditulis menggunakan kerangka Laravel. <br><br>  <i>Bagian ketiga</i> adalah kantor untuk konsumen.  Ini mencerminkan keadaan sistem secara keseluruhan, dompet yang terhubung dan saldo mereka, transaksi dan akun aktif.  Mungkin sebentar lagi kita akan menghubungkan perolehan fiat klasik.  Untuk membuat kantor, kami menggunakan Yii2. <br><br>  Blok terpisah adalah sistem untuk bekerja dengan proyek ICO.  Hal ini memungkinkan Anda untuk mendistribusikan token di semua tahap penjualan.  Selain itu, ada kemungkinan mengembangkan kontrak (ERC-20) dan akun pribadi.  Dengan menggunakan alat-alat ini, kami menyediakan layanan ICO turnkey. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a55/f8a/420/a55f8a42069d438bd4350ec1b9170d6a.png"><br><br>  Untuk alasan keamanan, semua data tentang dompet disimpan dalam basis data dalam bentuk terenkripsi, sehingga meskipun penyerang mendapatkan akses ke mereka, ia tidak akan dapat menarik dana dari dompet.  Otentikasi pengguna dua faktor terhubung.  Akhirnya, pedagang dapat membuat daftar putih alamat IP yang dapat bekerja dengan API. <br><br>  Kami menyediakan toleransi kesalahan sistem dengan sejumlah besar server, termasuk yang cadangan.  Setiap node blockchain terletak di server terpisah dengan akses terbatas dari luar. <br><br><h2>  Masalah apa yang kita temui? </h2><br>  Blockchain berbeda.  Beberapa didokumentasikan dengan buruk dan tidak memiliki komunitas aktif.  Ini adalah alasan utama masalah utama kami. <br><br>  <b>1. API Ethereum tidak memiliki kemampuan untuk mengembalikan daftar transaksi akun masuk</b> <br><br>  Saat membuat akun, sistem pembayaran kami menghasilkan alamat unik di mana pengguna harus mentransfer jumlah tertentu dalam mata uang yang dipilih.  Dengan frekuensi yang diberikan, kami mendapatkan daftar transaksi masuk dan memverifikasi alamat dompet mereka.  Kemudian kami memverifikasi alamat dompet dengan alamat tagihan yang belum dibayar.  Ternyata, siaran tidak memungkinkan menerima informasi tentang transaksi masuk. <br><br>  <i>Apa yang harus dilakukan</i>  Kami memutuskan untuk menerima transaksi menggunakan layanan pihak ketiga - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">etherscan.io</a> .  Tetapi dia mengungkapkan beberapa masalah, jadi kami beralih ke explorer, layanan yang ditulis oleh programmer kami. <br><br>  <b>2. Beberapa blockchain memiliki dokumentasi yang sangat langka</b> <br><br>  Berikut ini adalah kasus yang khas: entah bagaimana kami menggunakan node ke salah satu cryptocurrency yang kurang dikenal, dan setelah beberapa hari berhenti menerima transaksi tanpa melaporkan kesalahan.  Kami memulainya lagi, tetapi beberapa hari kemudian situasinya berulang. <br><br>  <i>Apa yang harus dilakukan</i>  Ketika mereka mulai mencari tahu, mereka menemukan bahwa masalahnya ada di salah satu parameter dalam file konfigurasi.  Tidak ada kata dalam dokumentasi tentang parameter ini, jadi saya harus mengkonfigurasi semuanya dengan coba-coba. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/278/407/ad7/278407ad73a6e58552c85444469fe6cc.png"><br><br>  <b>3. Blockchain pribadi untuk menguji fungsionalitas sulit atau tidak mungkin diterapkan</b> <br><br>  Suatu kali kami harus menggunakan blockchain untuk cryptocurrency NEO.  Kami menemukan gambar buruh pelabuhan yang siap, melakukan segalanya sesuai dengan instruksi dan mendapat kesalahan.  Analisis cepat dari skrip tidak mengarah pada apa pun, Google juga tidak meminta apa pun. <br><br>  <i>Apa yang harus dilakukan</i>  Kami membuat masalah pada github, menghabiskan sekitar satu bulan untuk membahasnya, dan akhirnya memutuskan untuk menggunakan testnet.  Tetapi tidak semua cryptocurrency memiliki testnet.  Dan jika ya, maka paling sering Anda perlu mengirim aplikasi untuk koin tes dan tunggu sebentar.  Pengembangan blockchain pribadi di situs resmi dalam banyak kasus bahkan tidak dipertimbangkan, jadi Anda harus menggunakan solusi pihak ketiga. <br><br>  Dalam keadilan, perlu dikatakan bahwa dalam kebanyakan kasus, Anda bisa mendapatkan jawaban atas pertanyaan terkait dengan infrastruktur mata uang digital tertentu.  Sumber daya yang paling berguna dalam hal ini adalah Github, maka Anda harus pergi ke forum resmi dan Reddit. <br><br>  <b>4. Penggunaan kembali kode yang tidak pantas</b> <br><br>  Bitcoin akhirnya memiliki banyak salinan dengan blokir dan blok individual - jangan bingung dengan garpu.  Dalam kebanyakan kasus, cryptocurrency seperti ini memiliki API Bitcoin yang benar-benar identik.  Agar tidak memperbanyak kode yang sama, untuk bekerja dengan salinan seperti itu kami menggunakan kelas yang sama untuk bekerja dengan mata uang Satoshi Nakamoto. <br><br>  Tetapi mungkin tidak sesederhana itu.  Ketika kami perlu mengintegrasikan Dogecoin, kami mengikuti skenario yang dijelaskan, mengonfigurasi, dan menggunakan testnet.  Akibatnya, beberapa tes jatuh dan ada masalah dengan membuat transaksi. <br><br>  <i>Apa yang harus dilakukan</i>  Pertama, kami menjalankan tes melalui debugger.  Ternyata Dogecoin dalam permintaan untuk melakukan transaksi tidak memungkinkan mentransfer jumlah dalam bentuk string, seperti halnya Bitcoin.  Karena itu, kami harus mendefinisikan kembali metode di kelas anak.  Omong-omong, ini adalah satu-satunya perbedaan yang diidentifikasi dalam Dogecoin dan Bitcoin API.  Apa artinya itu tidak bisa dimengerti. <br><br>  <b>5. Tidak semua cryptocurrency memungkinkan menghasilkan alamat unik yang jumlahnya tidak terbatas</b> <br><br>  Semuanya sederhana di sini: tanpa generasi ini, kami tidak dapat menggunakan identifikasi pembayaran di alamat. <br><br>  <i>Apa yang harus dilakukan</i>  Dalam situasi seperti itu, kami menggunakan pesan unik yang terlampir pada transaksi saat mengirim pembayaran.  Sayangnya, beberapa pelanggan lupa untuk menunjukkan pesan-pesan ini dan kemudian bertanya-tanya mengapa pembayaran tidak dikreditkan secara otomatis. <br><br><h2>  Bagaimana cara mengintegrasikan ke dalam CMS? </h2><br>  Kami membuat plugin B2BinPay untuk WordPress, Woocommerce, Magento, PrestaShop.  Di sini nafsu makan datang dengan makan - awalnya kami tidak berencana untuk mempromosikan sistem melalui plugin untuk CMS.  Untuk setiap plugin kami melakukan review di sistem.  Hal paling serius terjadi untuk plugin Magento, kami akan memberi tahu Anda lebih banyak tentang ulasan ini. <br><br>  Ulasan ini dibagi menjadi dua bagian - Teknis dan Pemasaran.  Inspeksi teknis terdiri dari empat tahap: <br><br><ul><li>  Sniffer kode <br></li><li>  Instalasi &amp; Uji Pernis <br></li><li>  Salin detektor pasta tempel <br></li><li>  QA manual <br></li></ul><br>  Tiga tahap pertama sepenuhnya otomatis, jadi lebih baik untuk mempertimbangkan beberapa hal pada tahap pengembangan.  Untuk menyederhanakan hidup Anda selama tes, pertama-tama, Anda harus mengingat aturan untuk Code Sniffer. <br><br>  Aturan Magento untuk Code Sniffer mematuhi standar PSR-1 dan PSR-2, ini adalah satu dari sedikit CMS yang pengembangnya mematuhi pendekatan modern untuk pengembangan dalam PHP.  Selain itu, orang-orang dari Magento menerbitkan seperangkat aturan terpisah yang membantu menemukan kesalahan dalam konfigurasi xml dari struktur ekstensi dan melengkapi cek yang diterima secara umum.  Sebuah skrip untuk memeriksa konten paket jadi juga diterbitkan di akun github mereka, yang juga harus digunakan sebelum mengirimkan pengembangan Anda untuk verifikasi otomatis. <br><br>  Instalasi Magento dasar berisi kelas bootstrap untuk phpunit: Anda dapat menggunakannya untuk menulis tes untuk plugin Anda.  Jujur, kami masih belum tahu apakah ketersediaan tes berkontribusi pada penyelesaian cepat Tinjauan Teknis. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b1b/cb5/134/b1bcb5134b3cd04941ba6f07096d7016.png"><br><br>  Tiga tahap pertama dari inspeksi teknis adalah otomatis.  Untuk tahap keempat dan Tinjauan Pemasaran, Anda harus bersabar: kedua proses dilakukan oleh orang-orang dan karena itu, antrian terbentuk. <br><br>  Kami menunggu hasil QA Manual selama sekitar 5 hari, yang pada dasarnya normal.  Tetapi setiap aplikasi kami untuk Tinjauan Pemasaran telah diproses selama lebih dari seminggu.  Di sini, penting bagi penguji bahwa pada paragraf pertama kami menuliskan integrasi dengan layanan yang kami sediakan dan apa model penetapan harganya, dan baru kemudian menunjukkan keunggulan plugin kami. <br><br><h2>  Rencana masa depan </h2><br>  Kami percaya bahwa B2BinPay ternyata cukup sederhana dalam hal interaksi dengan pengguna dan oleh karena itu akan nyaman bagi kedua perusahaan baru di pasar crypto dan bisnis maju - misalnya, dalam bidang penjualan online - di mana produk yang stabil dan aman diperlukan. <br><br>  Di awal peredaran awal koin, kami menerima Bitcoin, CASH Bitcoin, Litecoin, DASH, Ethereum, Monero, dan lainnya.  Sekarang kami menawarkan layanan untuk pedagang dan dompet untuk klien perusahaan di bawah perusahaan Estonia kami, di mana kami menerima dua lisensi - untuk bertukar cryptocurrency dan dompet. <br><br>  Saat menjadi klien, kami membuat KYC lengkap untuk setiap pedagang, setelah itu pedagang dapat mulai menerima cryptocurrency, yang secara otomatis dikonversi menjadi dolar, euro atau pound dan dibayarkan ke rekening bank pedagang. <br><br>  Kami akan dengan senang hati menjawab pertanyaan Anda tentang penciptaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">B2BinPay</a> dan pada produk itu sendiri pada prinsipnya.  Selain itu, kami sekarang secara aktif mencari orang-orang yang berpikiran sama yang memiliki keterampilan pemrograman Python dan siap untuk bergabung dengan tim kami.  Sekarang di St. Petersburg kami telah membuka lowongan untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pemimpin tim</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pengembang senior</a> .  Kami menantikan resume Anda! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id441338/">https://habr.com/ru/post/id441338/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id441328/index.html">Tentang komputasi kuantum dan kehendak bebas</a></li>
<li><a href="../id441330/index.html">[spoiler] Movie Wandering Earth: Matahari hancur. Cina dan satu astronot Rusia dengan termos vodka akan menyelamatkan semua orang</a></li>
<li><a href="../id441332/index.html">Koloni. Bab 26: Port Demetrio</a></li>
<li><a href="../id441334/index.html">"Staf listrik" - sekarang jelas</a></li>
<li><a href="../id441336/index.html">RTOS atau bukan RTOS adalah pertanyaannya</a></li>
<li><a href="../id441340/index.html">Warisan budaya Kazakhstan dalam model-3D</a></li>
<li><a href="../id441344/index.html">Melangkah ke langit. Kisah jujur ​​tentang hasrat serius terjun payung</a></li>
<li><a href="../id441346/index.html">Meet A Content Strategist: Wawancara dengan Dmitry Kabanov, kurator Startup Digest Techstars dan Penasihat SXSW</a></li>
<li><a href="../id441348/index.html">Routing dan balancing langsung dengan NFT vs Nginx</a></li>
<li><a href="../id441350/index.html">Apakah Haskell benar-benar bahasa para genius dan akademisi?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>