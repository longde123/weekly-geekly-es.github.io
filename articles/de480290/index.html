<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÑ üõåüèº üßõ Selbst gemachter Laptop ZedRipper auf sechzehn Z80 üå∫ üßê üéΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ein Artikel von der Seite des verr√ºckten hausgemachten Ingenieurs Chris Fenton 



 Lernen Sie den ZedRipper kennen, eine 16-Core-Bestie mit 83 MHz un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Selbst gemachter Laptop ZedRipper auf sechzehn Z80</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480290/">  <i>Ein Artikel von der Seite des verr√ºckten hausgemachten Ingenieurs <a href="http://www.chrisfenton.com/" rel="nofollow">Chris Fenton</a></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fcc/4a1/93f/fcc4a193fa546d942e21526347e24679.jpg"><br><br>  Lernen Sie den ZedRipper kennen, eine 16-Core-Bestie mit 83 MHz und Z80-Prozessoren, die so portabel wie unpraktisch ist.  Dies ist mein letzter Versuch, einen Computer zum Spa√ü zusammenzubauen und gleichzeitig mehrere W√ºnsche zu erf√ºllen: <br><ul><li>  Zum Schluss benutze den Riesen-FPGA, der bei mir unt√§tig rumlag. </li><li>  Spielen Sie eine alternative Geschichte der Computererstellung und n√§hern Sie sich dem Thema Multitasking aus der Perspektive des Eisens. </li><li>  Stellen Sie einen Computer zusammen, auf dem ich auf dem Weg zur Arbeit im Zug lustige Kurzprogramme schreiben konnte. </li><li>  Bauen Sie eine Plattform auf, auf der relativ einfache Experimente mit der Computerarchitektur durchgef√ºhrt werden k√∂nnen. </li></ul><br><a name="habracut"></a><br><h2>  Glamour√∂se Fotos </h2><br>  Wenn Sie keine Zeit haben, ein Textblatt √ºber unpraktische Computerarchitektur zu lesen ... <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fcc/4a1/93f/fcc4a193fa546d942e21526347e24679.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/2fb/c99/c87/2fbc99c870e83ac52a8557bf0f4e185b.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/7f7/ed0/a6d/7f7ed0a6dd2340c931cff32d445c38b8.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c85/cb6/a6a/c85cb6a6a717959425d524318573be52.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/617/d68/eb6/617d68eb64fba0f72521e58efa206b07.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/9c0/b09/83b/9c0b0983b0d10cc8aa7ba98fd67dee8b.jpg"><br><br><h2>  Also, was ist dieses Biest? </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/622/9b6/781/6229b6781b68722c4dccea4c2ee48181.png"><br><br>  ZedRipper ist das Ergebnis eines Versuchs, den coolsten Computer mit CP / M 2.2 zu bauen: <br><br><ul><li>  16 Z80-Prozessoren arbeiten mit einer Frequenz von 83,33 MHz. </li><li>  64 KB dedizierter Speicher f√ºr jeden Z80. </li><li>  ANSI-kompatibler Terminalbeschleuniger mit 16 Ausg√§ngen. </li><li>  Alle Prozessoren und Ger√§te sind √ºber ein vollsynchrones unidirektionales Ringnetzwerk mit 83 MHz verbunden. </li><li>  128 MB-Laufwerk auf einer SD-Karte (16 x 8 MB-Laufwerke in CP / M). </li><li>  Ein ‚ÄûServer‚Äú -Kern, der in CP / M 2.2 startet und den CP / NET-Dateiserver ausf√ºhrt (in Turbo Pascal 3 auf dem Computer selbst geschrieben!), Der den gemeinsamen Zugriff auf die SD-Karte erm√∂glicht. </li><li>  15 "Client" -Kerne, die CP / NOS aus dem ROM starten.  Jeder Client hat Zugriff auf ein gemeinsames Repository, und jeder kann beliebige CP / M 2.2-Programme ausf√ºhren, ohne mit anderen Kerneln um Ressourcen zu konkurrieren. </li></ul><br><h2>  Eine andere Stra√üe </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/7f7/ed0/a6d/7f7ed0a6dd2340c931cff32d445c38b8.jpg"><br>  <i>Lenken mich Schach und Planetfall von meinem Turbo Pascal-Editor ab?</i> <br><br>  Nach meinen Abenteuern mit dem <a href="http://www.chrisfenton.com/dd9-kaypro-edition/" rel="nofollow">Portieren von Spielen nach Kaypro</a> hatte ich vor 40 Jahren einen √ºberraschend warmen Eindruck von diesem primitiven Betriebssystem, und ich hatte eine Idee, die ich zu entwickeln entschied: Was w√§re, wenn sich die Geschichte in die entgegengesetzte Richtung drehen w√ºrde und der PC weiter machen w√ºrde Entwicklungspfade mit mehreren CPUs sofort?  Sogar in den 1980er Jahren waren die Prozessoren selbst (und bald auch der Arbeitsspeicher) relativ kosteng√ºnstig, aber PC-Multitasking basierte ausschlie√ülich auf k√ºrzeren Zeiten, wenn eine gro√üe Ressource (Arbeitsspeicher oder CPU) zwischen konkurrierenden Programmen aufgeteilt wurde.  Iron konnte dies nicht bew√§ltigen (und es war sehr schwierig, Programme auf Betriebssystemen wie DOS zum richtigen Verhalten zu bringen), bis wir in die √Ñra der 386er und Computer mit mehr als 4 MB Arbeitsspeicher eintraten. <br><br>  W√§hrend meiner historischen Hobbys mit Computern stie√ü ich auf etwas f√ºr mich sehr Interessantes: In den fr√ºhen Entwicklungsstadien unterst√ºtzte das <a href="https://ru.wikipedia.org/wiki/CP/M" rel="nofollow">CP / M-</a> Betriebssystem eine "Netzwerk" -Version namens CP / NET.  Die meisten Menschen kennen ihre Idee noch heute - ein oder zwei ‚Äûechte‚Äú Maschinen mit gro√üen Laufwerken und Druckern ins B√ºro zu stellen, deren Ressourcen zwischen Thin Clients, Terminals mit CPU und RAM geteilt w√ºrden.  Jeder Benutzer w√ºrde so arbeiten, als h√§tte er einen eigenen Computer mit CP / M und Zugriff auf gro√üe Festplatten und Drucker. <br><br>  Wie bereits erw√§hnt, waren CPU und RAM (normalerweise hatte der Z80 64 KB DRAM) nicht besonders teuer, aber alle externen Pribluds, die zum Erstellen eines n√ºtzlichen Computers (Laufwerke, Drucker, Monitore usw.) erforderlich waren, summierten sich zu den Gesamtkosten.  Zu dieser Zeit schien das Hinzuf√ºgen mehrerer CPUs / RAMs zu einem Computer ein ziemlich dekadenter Ansatz zu sein, um einem Benutzer mehrere CPUs und RAMs zur Verf√ºgung zu stellen.  Sogar CP / M hat es geschafft, die Zeitspannen f√ºr MP / M OS zu teilen. <br><br>  Ich stellte fest, dass Exidy dem am n√§chsten kam - 1981 ver√∂ffentlichten sie ihre Multi-NET 80-Maschine, die das Hinzuf√ºgen von bis zu 16 Karten mit jeweils einem Z80 und RAM erm√∂glichte.  Es wurde jedoch f√ºr bis zu 16 einzelne Benutzer entwickelt und nicht f√ºr die Arbeit eines einzelnen Benutzers, der gleichzeitig 16 Programme gestartet hat. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1d6/f11/a67/1d6f11a67df9e98a54b3d8c22dbdada7.png"><br>  <i>So nah ...</i> <br><br>  40 Jahre schneller Vorlauf - Transistoren sind tats√§chlich im Preis gefallen.  Nach der Schlie√üung des Labors habe ich mehrere monstr√∂se FPGAs (Stratix IV 530GX) geerbt, und ich dachte, es w√§re so interessant, mit einem davon zu arbeiten.  Irgendwann stie√ü ich auf ein sehr interessantes Projekt von Grant Searle <a href="http://www.searle.wales/" rel="nofollow">Multi-Comp</a> , und es war ziemlich einfach, eine Arbeitsmaschine mit CP / M und einer CPU zusammenzubauen.  Aber ich brauchte mehr.  Ich beschloss zu pr√ºfen, ob ich auf CP / M eine Multi-Core-Maschine mit echtem Multitasking erstellen kann - nichts Kniffliges, nur Brute Force. <br><br><h2>  Wir konfigurieren und starten Software </h2><br>  In diesem Projekt habe ich mich haupts√§chlich auf Hardware konzentriert und keine einzige Codezeile in Assembler geschrieben.  CPU 0 wird direkt aus dem ROM geladen, das ich Grant entnommen habe, und die verbleibenden Knoten werden aus dem 4-KB-CP / NOS-ROM geladen, das ich aus dem Atari-Simulator entnommen habe. <br><br>  Beide ROMs warten auf eine Verbindung zu einem seriellen Terminal √ºber eine Standardschnittstelle, w√§hrend CP / NOS-Clients einen weiteren seriellen Port erwarten, der mit einem Server verbunden ist.  Auf so gro√üen FPGAs k√∂nnen Sie ganz einfach Ihre eigene Logik entwerfen.  Ich habe meine Adressdecodierungslogik entwickelt, dank derer der Z-Ring f√ºr jede CPU bei Bedarf im Adresszuordnungsschema angezeigt wird. <br><br><h2>  Insides </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/c32/b62/68b/c32b6268b1bab5acd982289313128e16.jpg"><br><br>  Das Herzst√ºck des ZedRipper ist eines dieser riesigen Stratix IV 530GX-FPGAs.  Die HSMC-Karte wird zum Anzeigen, Empfangen von Daten vom Tastatur-Controller und zum Anschlie√üen an die SD-Karte verwendet.  Da die Firmware √ºber Ethernet heruntergeladen wird, befindet sich an der Seite des Geh√§uses ein solcher Anschluss sowie ein SD-Kartenadapter und ein Steckplatz f√ºr einen externen seriellen Anschluss (noch nicht verwendet). <br><br><h2>  Tastatur und Controller </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/390/d96/b74/390d96b74f1ada63b46ec54ca89014aa.jpg"><br>  <i>Tastatur und Loch im Vordergrund, wo sp√§ter ein Positionierungsger√§t installiert wird</i> <br><br>  Ich hatte eine kompakte PS / 2-Tastatur herumliegen (von einem meiner alten Projekte mit einem Laptop), und ich wollte es an die 2,5-V-E / A meines FPGA anschlie√üen.  Ich entschied mich f√ºr den einfachen Weg und f√ºgte dem Bundle einen Teensy 2.0-Mikrocontroller hinzu. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/31d/afb/25d/31dafb25dab1f3c7760b8279f69d656a.jpg"><br>  <i>Hei√ükleberregler am unteren Rand der Tastatur</i> <br><br>  Dies erm√∂glichte die √úbersetzung von PS / 2 in ASCII sowie die einfache Kennzeichnung einiger zus√§tzlicher Tasten (F1-F12) in ‚Äûmagische‚Äú Sequenzen von Terminalbefehlen, um den Vorgang zu vereinfachen.  Der Controller stellt dann Z80 Byte f√ºr UART mit 9600 Baud bereit (unter Verwendung eines einfachen Spannungsteilers, der 5 V auf 2,5 V f√ºr FPGA √§ndert).  Angesichts der Tatsache, dass dieses Projekt aus verschiedenen Abf√§llen zusammengesetzt wurde, die in meiner Werkstatt lagen, war es eine praktische L√∂sung, die sich in der Arbeit gut bew√§hrt hat. <br><br><h2>  Anzeige </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/29d/509/095/29d50909504950789ba6240785a8b5dc.jpg"><br>  <i>Der Ladebildschirm, der Server wird in der oberen linken Ecke ausgef√ºhrt, und drei verschiedene Benutzerprogramme arbeiten auf separaten Kerneln</i> <br><br>  Display-Funktionen: 1280 √ó 800 10,1 ", und es versteht VGA.  FPGA verwendet ein einfaches Netzwerk von Widerst√§nden, um bis zu 64 Farben (R2G2B2) zu liefern.  Das Display ben√∂tigt einen Zeitgeber von 83,33 MHz (1280 √ó 800 @ 60 Hz), sodass der Einfachheit halber die gesamte Schaltung bei dieser Frequenz arbeitet. <br><br>  Grants Projekt Multicomp enthielt VHDL-Code f√ºr ein einfaches ANSI-kompatibles Terminal.  Ich habe seine Logik auf Verilog umgeschrieben und dann einen Videocontroller mit Unterst√ºtzung f√ºr 16 unabh√§ngige Terminals entwickelt, die √ºber einen Z-Ring-Knoten verbunden sind.  Die 1280 √ó 800-Anzeige wird als Anzeige mit 160 x 50 Zeichen (mit 8 x 16 Zeichen) betrachtet. Jedes Terminal fungiert als 80 x 25-Sprite, das an eine beliebige Stelle auf dem Bildschirm verschoben werden kann (mit einer Priorit√§tsliste, mit der die Renderreihenfolge des Terminals angepasst wird).  Da jedes Terminal unabh√§ngig von den anderen arbeitet, verf√ºgt es √ºber eine eigene Zustandsmaschine mit 2 KB RAM f√ºr Zeichen und 2 KB Attributen (zum Speichern von Farbinformationen).  Jedes Zeichen unterst√ºtzt 4-Bit-Hintergrund- und Zeichenfarben.  Da alle Terminals dieselben Einr√ºckungszeichen haben m√ºssen und eine 8x16-Zelle nur ein Zeichen enthalten kann, k√∂nnen alle Terminals dasselbe 2-KB-ROM mit einer Schriftart verwenden.  Im Allgemeinen verwendet die Anzeigelogik etwa 66 KB Block-RAM. <br><br>  Generell bekomme ich f√ºr meine CP / M-Terminals einen sehr einfachen Fenstermanager, der hardwarem√§√üig nahezu vollst√§ndig funktioniert.  Dies ist einer der reichhaltigsten Bereiche f√ºr die Forschung - bisher kann nur die Server-CPU die Terminals neu anordnen, aber ich habe weitreichende Pl√§ne, ein Positionierungsger√§t wie eine Maus hinzuzuf√ºgen, mit dem Windows-Hardware nur zum Ziehen von Fenstern und √Ñndern der Priorit√§t von Anzeigen verwendet werden kann. <br><br>  Da der Terminal-Controller nur einer der Z-Ring-Knoten ist (und die Umleitung dieser Schnittstelle auf einen der Z80-Knoten sehr einfach ist), ist es k√ºnftig m√∂glich, ein Vollbild-Terminal 160 x 50 (m√∂glicherweise als Hintergrund) und eine echte Anzeige 1280 x 800 x 64 hinzuzuf√ºgen Farben mit schnellem externen SRAM auf der Platine. <br><br><h2>  Z-Ring </h2><br>  Wie stellt man ein paar Z80 zusammen?  Bei meiner Arbeit habe ich fest gelernt, dass es schwierig ist, Netzwerke aufzubauen.  Die √ºbergeordneten Ziele dieses Netzwerks waren: <br><br><ul><li>  Einfache Implementierung. </li><li>  Einfaches Interface </li><li>  Beliebige Erweiterbarkeit. </li><li>  Angemessene Leistung. </li></ul><br>  Wie ich bereits erw√§hnte, erwarten meine Z80s eine Verbindung zu seriellen Anschl√ºssen, so dass die Schnittstelle recht einfach zu handhaben war - sie musste als serieller Anschluss getarnt werden!  Z-Ring ist im Wesentlichen ein synchrones, unidirektionales Ringnetzwerk, das ‚ÄûCredits‚Äú zur Steuerung des Flusses verwendet.  Jeder Knoten verf√ºgt √ºber einen 1-Byte-Eingangspuffer f√ºr jeden anderen Knoten im Netzwerk.  Nach einem Reset hat jeder Knoten 1 "Guthaben" f√ºr jeden verbleibenden Netzwerkknoten.  Das Schema ist parametrisiert, daher kann es leicht auf Hunderte von Knoten mit einem sehr geringen Logikaufwand skaliert werden. Heutzutage unterst√ºtzt Z-Ring jedoch bis zu 32 Knoten (daher ben√∂tigt jeder Knoten einen 32-Byte-Puffer). <br><br>  Der "Bus" selbst besteht aus einem G√ºltigkeitsbit, einer "Quell" -ID, einer "Ziel" -ID und einer 1-Byte-Nutzlast (19 Bits).  Ich denke, es w√§re ziemlich einfach, es mit der TTL-Logik zu implementieren (wenn eine Person 1981 gescheitert w√§re und kein FPGA gefunden h√§tte).  Jeder "Knoten" hat 2 Pipelines f√ºr Bus-Trigger - 0 und 1 Stufen - und wenn Sie eine Nachricht eingeben, wartet er, bis die 0. Stufe leer ist, und geht dann in die 1. √ºber.  Nachrichten werden auf dem Quellknoten eingegeben und durchlaufen den Ring, bis sie das Ziel erreichen. Danach befinden sie sich im entsprechenden Puffer und aktualisieren das Datenbereitschaftsflag.  Wenn der empfangende Knoten den Puffer liest, gibt er die urspr√ºngliche Nachricht erneut ein, die sich weiter um den Ring bewegt, bis sie wieder die Quelle erreicht, und gibt das "Guthaben" zur√ºck.  Wenn Sie das Paket an eine nicht vorhandene Adresse senden, wird das Darlehen nach einem vollst√§ndigen Umlauf automatisch zur√ºckerstattet. <br><br>  Da jeder Stopp auf dem Ring aus zwei F√∂rderstufen besteht und kein Gegendruck vorliegt, dauert jede Nachricht nicht mehr als 2 * Zustellzyklen (Anzahl der Knoten).  Die aktuelle Implementierung verf√ºgt √ºber 17 Knoten (16 CPU + Display / Tastatur-Controller) und arbeitet mit einem Zeitgeber von 12 ns, sodass die Zustellung einer Nachricht und die R√ºckgabe eines Darlehens ca. 400 ns dauert.  Der Display-Controller kann Datenverkehr mit einer Ankunftsrate senden, sodass jede CPU eine Bandbreite von 2 bis 2,5 MBit / s zu ihrem Terminal hat (der Bus reicht aus, um alle 16 CPUs zu versorgen), was f√ºr Terminals ziemlich viel ist. <br><br>  In der aktuellen Konfiguration funktioniert alles einwandfrei, aber Sie k√∂nnen einige offensichtliche Verbesserungen vornehmen: <br><br><ul><li>  Um die Empfangspuffer zu vertiefen, die den Durchsatz der Knoten erh√∂hen, gibt es auf dem FPGA viele freie Bl√∂cke von 1 KB RAM, die 32 Knoten mit 32 Credits unterst√ºtzen, so dass theoretisch jede CPU den Bus √ºberlasten kann. </li><li>  Unterst√ºtzung f√ºr den Adressmodus hinzuf√ºgen.  Das Hinzuf√ºgen von 16-Bit-Adressen (oder mehr) erm√∂glicht den direkten Zugriff auf den Speicher (DMA) (und das Hinzuf√ºgen von DMA zu jedem Knoten ist einfach).  FPGA verf√ºgt √ºber eine enorme Menge zus√§tzlicher Hardware (einige Megabyte statischer RAM und etwa ein Gigabyte DDR3). </li><li>  F√ºgen Sie Flusskontrolle (und Pufferung) zwischen Knoten hinzu. </li></ul><br>  Aber das alles kann bis zu besseren Zeiten warten. <br><br><h2>  Ern√§hrung! </h2><br>  Ein Debug-Board mit FPGA ben√∂tigt eine Eingangsspannung von 12 bis 20 V, ein Display 12 V und eine Tastatur und ein Controller 5 V. Es ist praktisch, dass das FPGA √ºber 3,3-, 5- und 12-V-Controller verf√ºgt, an die es sich ganz einfach anschlie√üen l√§sst FPGA wird direkt von einem Lithium-Polymer-Akku mit 5000 mAh und einer Spannung von 14,4 V mit Strom versorgt und anschlie√üend an alle anderen Ger√§te verteilt.  Eine der Schwierigkeiten bestand darin, dass ich den Laptop nicht jedes Mal zum Aufladen zerlegen wollte, sondern dass der Akku einen normalen +/- Stromanschluss sowie einen ‚ÄûBalancing‚Äú -Anschluss hatte, der mit jeder einzelnen Zelle verbunden war.  Meine unvollkommene L√∂sung ist, dass der Netzschalter die Batterieverbindung zwischen der FPGA-Stromversorgung und dem Ladeanschluss in der Aussparung, die durch eine Schiebeabdeckung verschlossen ist, umschaltet.  Es ist nicht sehr praktisch, aber Sie k√∂nnen einfach den Deckel schieben und die Stecker von dort abziehen, um sie ohne Verwendung der Sechskantschl√ºssel mit dem Ladeger√§t zu verbinden. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/868/921/68d/86892168de9f84d1d7ab286b48ae5708.jpg"><br>  <i>Laden sieht komisch aus</i> <br><br>  Ich habe die Batterie nicht gr√ºndlich getestet, aber es dauert mindestens 3 Stunden (das ist mehr als genug, um meine Zugfahrten abzudecken).  H√∂chstwahrscheinlich dauert es ungef√§hr 6 Stunden, ohne den Verbrauch zu optimieren.  Die gleichzeitige Verwendung mit dem Aufladen wird nicht unterst√ºtzt. Der Laptop wird jedoch so lange mit Akkustrom betrieben, dass dies kein Problem darstellt. <br><br><h2>  Wohnen </h2><br>  Der Fall des Standard-"Hacker" -Designs ist eine Kombination aus 3-mm-Laserschnittsperrholz und Kunststoff, die auf einem 3D-Drucker gedruckt wurde.  Ich habe die Bildschirmscharniere federbelastet, so dass es sich tats√§chlich wie ein gew√∂hnlicher, wenn auch etwas langsamer Laptop anf√ºhlt.  Ich wollte es so aussehen lassen wie in den 1980er Jahren, daher √§hneln die oberen Ecken des Bildschirms Cray, und der Kunstlederst√§nder ist unter den Handgelenken angebracht.  Die Kante des lasergeschnittenen Sperrholzes ist f√ºr die H√§nde sehr unangenehm, so dass dieser St√§nder √ºberraschend funktionell war. <br><br><h2>  Geschwindigkeit </h2><br>  Ich habe keinen einzigen Benchmark speziell f√ºr CP / M ausprobiert (ich gehe davon aus, aber ich habe nicht speziell danach gesucht).  Da diese Maschine zum Schreiben von Programmen in Turbo Pascal gemacht wurde, habe ich mehrere Mikrotests f√ºr die Geschwindigkeit durchgef√ºhrt.  Es ergaben sich 15-35 K Gleitkommaoperationen pro Sekunde (unter Verwendung des 48-Bit-Real-Typs in TP) und ungef√§hr 1 Million Ganzzahloperationen pro Sekunde (mit dem 16-Bit-Ganzzahltyp).  Nicht schlecht f√ºr eine 8-Bit-CPU und eine ausreichend komfortable Programmierumgebung. <br><br>  Ein interessantes Projekt f√ºr die Zukunft k√∂nnte die Entwicklung eines Beschleunigers f√ºr Gleitkommaoperationen sein. <br><br><h2>  FPGA-Entsorgung </h2><br>  Die gesamte Logik ist, wie ich bereits sagte, ziemlich leicht und verbraucht nur etwa 7% der Chipressourcen (obwohl 40% des gesamten Block-RAM und 100% des M144k-RAM). <br><br><ul><li>  Kombinierte ALUTs 31.808 / 424.960 (7%) </li><li>  Speicher-ALUTs 0 / 212.480 (0%) </li><li>  Dedizierte Logikregister 10.231 / 424.960 (2%) </li><li>  Logikauslastung 10% </li><li>  Gesamtzahl der Register 10231 </li><li>  Gesamtblockspeicherbits 9.005.056 / 21.233.664 (42%) </li><li>  DSP-Block 18-Bit-Elemente 0 / 1.024 (0%) </li></ul><br><h2>  Zukunftspl√§ne </h2><br>  In meinen unmittelbaren Pl√§nen (dh das Eisen ist bereits in der Werkstatt, Sie m√ºssen nur die Zeit zum L√∂ten finden): <br><br><ul><li>  Alles ausmalen.  Der Laptop besteht aus Sperrholz, und ich m√∂chte ihn unbedingt mit etwas bedecken. </li><li>  Joystick-Positionierungsger√§t  Schlie√üen Sie es an den Tastaturcontroller an. </li><li>  Batterie-Tracking.  Mit ADC auf dem Tastaturcontroller ist es einfach genug, den Akku zu verfolgen, damit ich nachvollziehen kann, auf welcher H√∂he der Ladezustand liegt. </li><li>  WiFi - Ich habe ESP32 herumliegen, um Zimodem zu starten!  Zusammen mit dem Telefon im Zugangspunktmodus sollte dies mir erm√∂glichen, unterwegs online zu gehen.  Es gibt gute Terminalanwendungen f√ºr CP / M, aber es w√§re sch√∂n, etwas wie einen IRC-Client oder einen einfachen Webbrowser zu schreiben.  Es ist auch praktisch, das <a href="https://ru.wikipedia.org/wiki/Kermit_(%25D0%25BF%25D1%2580%25D0%25BE%25D1%2582%25D0%25BE%25D0%25BA%25D0%25BE%25D0%25BB)" rel="nofollow">Kermit-</a> Datei√ºbertragungsprotokoll auf einem modernen Linux-Computer zu verwenden. </li><li>  Die von au√üen zug√§ngliche serielle Schnittstelle f√ºr den Anschluss an ein anderes Ger√§t (ein Stecker wurde bereits daf√ºr aufgedruckt, er muss nur noch angel√∂tet werden). </li><li>  LED zeigt den aktuellen Status an.  F√ºr ihn gibt es schon ein Loch in der Front - jetzt habe ich vor, es mit dem Zugriffssignal auf die SD-Karte zu verbinden. </li></ul><br>  Langfristig freue ich mich auf verschiedene Eisenideen, mit denen es Spa√ü machen wird, zu experimentieren: <br><br><ul><li>  Wie viel k√∂nnen Sie das Z80 √ºbertakten?  Der erste Schritt besteht darin, die Prozessorgeschwindigkeit vom Pixel-Timer zu l√∂sen. Es wird jedoch auch interessant sein, moderne Computertechniken auf den Z80 anzuwenden (Pipelines, Registerumbenennung, Verzweigungsvorhersage usw.). </li><li>  Es kann interessant sein, spezielle Beschleuniger f√ºr Dinge wie Gleitkommaoperationen hinzuzuf√ºgen.  Es gibt 1024 unbenutzte DSP-Bl√∂cke auf dem Chip, und ich denke, dass niemand versucht hat, einen Beschleuniger f√ºr das 48-Bit-Real-Format in TP zu erstellen. </li><li>  Vorhandenes Eisen verwenden!  Ich habe immer noch eine Menge ungenutzten Speichers, n√§mlich: <br><br><ul><li>  512 MB DDR3-SDRAM mit einem 64-Bit-Datenbus </li><li>  128 MB DDR3-SDRAM mit einem 16-Bit-Datenbus </li><li>  Zwei 4 MB QDR II + SRAMs mit 18-Bit-Datenbussen </li><li>  64 MB Flash </li><li>  2 MB SSRAM </li></ul><br></li><li>  Verbessere das Video!  Der erste Schritt besteht darin, die Unterst√ºtzung f√ºr das "Vollbild" -Terminal 160x50 und die M√∂glichkeit der zweifachen Skalierung auf ein regul√§res Terminal 80x25 hinzuzuf√ºgen.  Bei Verwendung eines externen SSRAM wird einfach der 1280 √ó 800 @ 6-Bit-Modus hinzugef√ºgt. </li><li>  Erweitern Sie die Funktionen des aktuellen Terminals.  Ich denke, ich kann die Kompatibilit√§t mit einem Terminal wie ADM-3A (und die Grafikunterst√ºtzung), das in Kaypro / 84 verwendet wird, verbessern. Dann habe ich Zugriff auf eine gr√∂√üere Auswahl an Software (und ich muss nicht DD9 portieren). </li></ul><br><h2>  Zusammenfassung </h2><br>  Bisher hat das Auto nur ein paar Tage funktioniert, aber ich kann sagen, dass ich wirklich alles mag.  Der Bildschirm ist sch√∂n und klar, die Tastatur ist gro√ü und komfortabel, der K√∂rper ist sperrig, aber er wiegt wenig (und passt in einen Rucksack).<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Laptop war sogar √ºberraschend ergonomisch f√ºr die Arbeit in einem Zug. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich glaube, ich bin auf dem richtigen Weg. </font><font style="vertical-align: inherit;">Die M√∂glichkeit, einen Texteditor in einem Fenster zu √∂ffnen, um Notizen w√§hrend des Debuggens von TP-Code in einem anderen Fenster zu machen, ist √§u√üerst praktisch (oder die M√∂glichkeit, Notizen w√§hrend des Spielens von Zork zu machen!). </font><font style="vertical-align: inherit;">Es wird angenommen, dass ein solcher Ansatz f√ºr die Schaffung kosteng√ºnstiger Multitask-Computer auf der Basis von CP / M existieren k√∂nnte.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Willst du das selbe bauen? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bisher habe ich keine einfache M√∂glichkeit, Dateien vom Computer abzurufen, damit der n√ºtzlichste Teil der Software (in Turbo Pascal geschriebener CP / Net-Dateiserver) enthalten ist. </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bleiben Sie bei uns und bleiben Sie dran (oder schreiben Sie mir </font></font></font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eine E-Mail,</font></font></font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wenn Sie nicht warten k√∂nnen). </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Irgendwann werde ich wahrscheinlich dem 21. Jahrhundert beitreten und einen Account bei Github er√∂ffnen. </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leider alles auf dieser sehr "Freizeit".</font></font></font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de480290/">https://habr.com/ru/post/de480290/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de480276/index.html">Game Interview: Einstellungsstrategien. Teil I</a></li>
<li><a href="../de480280/index.html">TurboConf-Sicherheitsstudie</a></li>
<li><a href="../de480282/index.html">Die Geschichte des Fitness-Startups Peloton: von einer Bewertung von 8 Milliarden US-Dollar bis zu erfolgloser Werbung und Prognosen f√ºr einen 85-prozentigen R√ºckgang der Lagerbest√§nde</a></li>
<li><a href="../de480284/index.html">Meine (Nano-) Erfahrung mit der Yandex.Maps-API oder warum ben√∂tige ich Anweisungen?</a></li>
<li><a href="../de480288/index.html">Ist es m√∂glich, Informationen ohne Einschr√§nkung der Entfernung und Lichtgeschwindigkeit zu senden und zu empfangen?</a></li>
<li><a href="../de480294/index.html">Hochgeschwindigkeits-Bildverarbeitung im vielseitigen LEGO Teilsortierger√§t</a></li>
<li><a href="../de480296/index.html">Reaktive Entwicklung des Telegrammbots</a></li>
<li><a href="../de480300/index.html">Im Jahr 2011 war die Frage, ob Nginx Igor Sysoev oder Rambler geh√∂rt</a></li>
<li><a href="../de480306/index.html">Warum die geschlossene T√ºr schlagen?</a></li>
<li><a href="../de480310/index.html">Habra-Detektiv: Das Geheimnis der Nachrichtenredakteure</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>