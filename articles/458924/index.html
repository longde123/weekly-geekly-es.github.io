<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòÄ ü§¶üèø üåì Los accidentes te ayudan a aprender üòì üë©üèº‚Äçü§ù‚Äçüë®üèª üóø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En los √∫ltimos 3 a√±os, m√°s de mil incidentes de diversos grados de √©pica ocurrieron en Contour. Las razones son diferentes: por ejemplo, el 36% es cau...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Los accidentes te ayudan a aprender</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/458924/">  En los √∫ltimos 3 a√±os, m√°s de mil incidentes de diversos grados de √©pica ocurrieron en Contour.  Las razones son diferentes: por ejemplo, el 36% es causado por una liberaci√≥n de baja calidad y el 14%, debido al mantenimiento de hierro en el centro de datos.  ¬øDe d√≥nde vienen las estad√≠sticas?  Despu√©s de cada incidente, se escribe un informe - post mortem.  Est√°n escritos por los ingenieros de servicio que respondieron a la notificaci√≥n del accidente y fueron los primeros en comprender sus causas.  Las autopsias se analizan, identifican y eliminan las causas de los incidentes, de modo que en el futuro no se produzcan.  Pero ese no fue siempre el caso. <br><br>  <strong>Alexey Kirpichnikov</strong> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">BeeVee</a> ) ha estado programando en Yandex desde 2008.  Los embotellamientos, trabaj√© en proyectos deportivos especiales, fue el l√≠der del equipo del backend Yandex.Taxi.  Desde 2014, se ha dedicado a DevOps e infraestructura en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kontur</a> ; ha estado desarrollando herramientas que facilitan la vida de los desarrolladores de los equipos de productos.  La idea de escribir y analizar temas post-mortem apareci√≥ hace cinco a√±os, y durante este tiempo los temas post-mortem estaban cubiertos de plantillas, un glosario, notas, capturas de pantalla y an√°lisis.  Pero esto no es lo m√°s dif√≠cil: <strong>fue m√°s dif√≠cil superar la inercia, los temores y la incomprensi√≥n del significado de los informes de incidentes entre los ingenieros</strong> .  Lo que finalmente sucedi√≥ y el beneficio irreparable que puede hacer la "anal√≠tica del sof√°" es descifrar el informe de Alexey. <br><br><img src="https://habrastorage.org/webt/ur/pv/rw/urpvrwxzfruc7xv3b7vzpmn-eqc.jpeg"><br>  <i>Tenga en cuenta: debajo de las patas de la mesa de diferentes longitudes hay libros "M√©tricas", "Pruebas" y "Implementar".</i> <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/tuSZq4rW8TQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  En Kontur, despu√©s de contratar, entregan un conjunto de recuerdos: un bol√≠grafo, una taza, un cuaderno.  Llegu√© a SKB Kontur a un nuevo equipo de infraestructura hace 5 a√±os, cuando la compa√±√≠a cumpli√≥ 25 a√±os. <br><br><img src="https://habrastorage.org/webt/5l/-o/ov/5l-oovwyznszo5q4di-2zjn4cp0.jpeg"><br><br>  El contorno de aquellos tiempos, y ahora tambi√©n, es una compa√±√≠a de productos en la que varias docenas de productos desarrollaron el mismo n√∫mero de equipos, independientes entre s√≠ en cuanto a la elecci√≥n de tecnolog√≠as y herramientas. <br><br>  En ese momento, le√≠ por primera vez ‚ÄúProyecto '' Phoenix ''‚Äù y me inspir√© en las ideas novedosas de las pr√°cticas DevOps.  Comenc√© a escribir mis ideas para mejoras en un cuaderno, y ahora es un artefacto con manchas de caf√© y registros hist√≥ricos. <br><br><ul><li>  ‚Äú <strong>¬°Monitoreo!</strong>  Pongamos Grafana, recopilemos m√©tricas y creemos gr√°ficos.  Entenderemos mejor lo que est√° sucediendo en la producci√≥n ".  Para 2014, esta es una idea bastante nueva, fresca y una pr√°ctica s√≥lida de DevOps ‚Äù. </li><li>  "¬° <strong>Choque autom√°tico!"</strong>  ¬øCu√°ntos archivos zip se pueden cargar en la carpeta compartida, descomprimirlos en el servidor y ejecutar exe en el programador de tareas en Windows?  "¬°Presentemos un sistema de implementaci√≥n industrial y publiquemos versiones a trav√©s de √©l, CI!" </li><li>  ‚Äú¬° <strong>Post-mortem</strong> !  Si hay alg√∫n tipo de accidente en la producci√≥n, averig√ºemos cu√°l fue, encontremos la raz√≥n, escribamos un informe y cambiemos nuestros procesos de desarrollo, pruebas y CI para que no haya tales incidentes en el futuro ‚Äù </li></ul><br>  Durante 5 a√±os hemos dado un paso adelante en todas estas √°reas.  Tenemos nuestro propio sistema de alerta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Moira</a> , sistema de orquestaci√≥n de aplicaciones y un mont√≥n de herramientas.  Pero de todo lo anterior, <strong>escribir informes de incidentes result√≥ ser la pr√°ctica de ingenier√≠a m√°s dif√≠cil de implementar</strong> .  Los ingenieros adoran todo tipo de herramientas: fijan alg√∫n tipo de sistema de alojamiento o CI, escriben algo, automatizan y no les gusta escribir informes, aunque esta pr√°ctica es de gran utilidad. <br><br>  Le dir√© c√≥mo implementamos los sistemas post-mortem y qu√© beneficios obtenemos.  Quiz√°s nuestro rastrillo ayudar√° a avanzar m√°s r√°pido y llenar menos conos.  Antes de comenzar a hablar sobre la autopsia, entenderemos la definici√≥n. <br><br><h2>  ¬øQu√© es un incidente? </h2><br>  ¬øCu√°l de estos es el incidente? <br><br><ul><li>  Ejemplo no 1.  En una plataforma de blog con un mill√≥n de usuarios, como resultado de alg√∫n tipo de error, se pierden todas las entradas de un usuario. </li><li>  Ejemplo No. 2.  El servicio para empleados de oficina funciona de lunes a viernes de 9 a 6, y en otras ocasiones no hay usuarios.  El servicio no estuvo disponible en la noche del s√°bado al domingo durante dos horas consecutivas, nadie lo not√≥. </li><li>  Ejemplo no 3.  Grafana con m√©tricas de producci√≥n cay√≥ 15 minutos.  En producci√≥n, nada se rompi√≥, pero los gr√°ficos no estaban disponibles. </li></ul><br>  Para entender qu√© pasa con este fakapy, recurrimos a la experiencia de los gur√∫s: Google, Atlassian, PagerDuty.  Los gur√∫s saben c√≥mo preparar turnos, ingenieros de guardia y c√≥mo escribir informes para comprenderlos.  Sus gu√≠as en l√≠nea tienen definiciones de incidentes. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Definici√≥n</a> de PagerDuty. <br><blockquote>  Un incidente es cualquier interrupci√≥n o degradaci√≥n no planificada de un servicio que afecta la disponibilidad del servicio para los usuarios.  Un incidente grave es aquel que requiere una respuesta coordinada de varios equipos. </blockquote><br>  Suena l√≥gico, pero la definici√≥n es vaga.  En la pr√°ctica, ayuda poco entender qu√© es un incidente y qu√© no. <br><br>  El libro de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ingenier√≠a de confiabilidad</a> del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sitio</a> de Google tiene criterios claros: <br><br><ul><li>  Los usuarios notaron la degradaci√≥n del servicio. </li><li>  Cualquier informaci√≥n se perdi√≥. </li><li>  Tom√≥ la intervenci√≥n del ingeniero de servicio, por ejemplo, para revertir manualmente la liberaci√≥n. </li><li>  Resolver el problema tom√≥ demasiado tiempo.  Si un problema se resolvi√≥ en 2 horas, y luego se pas√≥ una semana en √©l, este es un incidente que requiere investigaci√≥n. </li><li>  El monitoreo no funcion√≥.  Por ejemplo, aprendiste sobre un problema de los usuarios. </li></ul><br>  Contour no tiene una definici√≥n publicada de fakap, pero hemos formulado nuestros propios criterios para determinar qu√© constituye un incidente. <br><br>  <strong>Los usuarios externos o internos han notado una degradaci√≥n del servicio</strong> .  Ejemplo No. 3 con Grafana, que yace, es un incidente claro.  La producci√≥n no se interrumpi√≥ y los usuarios externos no lo notaron, pero a pesar de esto, para Contour es un fakap, ya que las herramientas internas no funcionaron. <br><br>  <strong>Suerte</strong>  En el ejemplo No. 2, el servicio para los trabajadores de oficina permaneci√≥ durante 2 horas por la noche; fue una suerte que cayera por la noche.  La pr√≥xima vez, puede ser desafortunado y, por lo tanto, el incidente nocturno tambi√©n requiere juicio, como si sucediera durante el d√≠a. <br><br>  <strong>El incidente concierne a varios equipos</strong> .  Tomamos esta definici√≥n de PagerDuty.  Analizar un incidente es una buena raz√≥n para que varios equipos trabajen juntos.  La cultura "Por nuestra parte, la bala sali√≥ volando, pero algo se rompi√≥ para ti, es tu culpa" es erradicada por un an√°lisis conjunto. <br><br>  <strong>Al menos un ingeniero considera esto un incidente</strong> .  La definici√≥n m√°s vaga, pero tambi√©n la m√°s importante.  Una regla simple: si el ingeniero cree que vale la pena el informe, entonces vale la pena el informe.  Si te asusta que los ingenieros empiecen a escribir informes para alguien y llamen a cualquier peque√±a cosa un accidente, esto no es as√≠.  <strong>Los ingenieros son personas razonables, conf√≠a en ellos.</strong> <br><br>  Con la definici√≥n y los diferentes tipos de da√±os resueltos.  Pasemos a c√≥mo beneficiarnos de los incidentes. <br><br><h2>  ¬øDe qu√© sirve fakap? </h2><br>  Las sencillas instrucciones que te dar√© m√°s adelante, puedes solicitarlas por ti mismo, sin siquiera pasar por el art√≠culo hasta el final.  Pero a√∫n as√≠ leer hasta el final. <br><br><h3>  Instrucci√≥n cl√°sica </h3><br>  Encuentra a los culpables primero.  Luego haga el trabajo "educativo" con los ingenieros. <br><br><ul><li>  Pide tener m√°s cuidado la pr√≥xima vez. </li><li>  Si no ayuda, env√≠elo a cursos de reciclaje.  Quiz√°s aprendan a ser m√°s cuidadosos all√≠. </li><li>  Si esto no ayuda, elimine a los perpetradores de trabajar con partes cr√≠ticas del sistema.  Deje de permitir que los desarrolladores entren en producci√≥n si lo arruinan. </li><li>  Si nada ayuda, despide a los malos y contrata a los competentes. </li></ul><br><blockquote>  Si la instrucci√≥n te molesta, esta es una buena noticia. </blockquote><br>  Este enfoque se considera tradicional para las corporaciones cl√°sicas orientadas verticalmente con un jefe que rega√±a a todos y puede despedirlo.  Una de las bases del movimiento DevOps y la ideolog√≠a de DevOps es la salida de las organizaciones integradas verticalmente a las horizontales, con mayor confianza en los empleados. <br><br>  Ilustrar√© este cambio de paradigma con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">instrucciones de</a> John Alspaw, uno de los l√≠deres del movimiento DevOps, que anteriormente trabaj√≥ para CTO en Etsy.  La instrucci√≥n est√° tomada de su art√≠culo can√≥nico de 2013, Blameless Post Mortem and a Just Culture. <br><br>  Pregunta a los ingenieros: <br><br><ul><li>  qu√© eventos observaron; </li><li>  cu√°ndo y qu√© acciones se tomaron; </li><li>  qu√© resultado se esperaba de estas acciones; </li><li>  de qu√© supuestos provienen; </li><li>  tal como se entiende por la secuencia de eventos que ocurrieron. </li></ul><br><blockquote>  Se debe preguntar a los ingenieros sin amenaza de castigo. </blockquote><br>  Esto es lo principal en la recomendaci√≥n de John. <br><br>  La amenaza del castigo: el reciclaje, la eliminaci√≥n de la producci√≥n o el despido motivan a las personas a mentir.  Y la verdad es importante para nosotros.  Informe de incidentes: este es el v√≠nculo de retroalimentaci√≥n que falta en el proceso de desarrollo y puesta en funcionamiento de las funciones. <br><br>  En el viejo paradigma, los desarrolladores desarrollaron, arrojaron la nave por encima de la cerca a los ingenieros de operaciones, y de alguna manera intentan que funcione.  Les molesta cualquier actualizaci√≥n, porque puede romperlo todo, y los ingenieros comenzaron todo con tanta dificultad. <br><br><img src="https://habrastorage.org/webt/vu/l6/lo/vul6locumgejop93bd_wec32vgu.jpeg"><br><br><blockquote>  El proceso de retroalimentaci√≥n ayuda a cambiar el proceso, la infraestructura, las herramientas y el enfoque de desarrollo para que haya menos fallas en la producci√≥n. </blockquote><br>  Esto convencer√° a los l√≠deres de equipo y gerentes de desarrollo de la utilidad de la autopsia.  Pero el problema es que es dif√≠cil lograr que los ingenieros hagan lo que piensan que no tiene sentido e in√∫til.  Tenemos una cultura de ingenier√≠a en nuestra empresa, y no puedo ir, saludar el decreto del CEO y exigir que todos escriban post mortem.  Necesito convencer a los ingenieros de esto. <br><br><img src="https://habrastorage.org/webt/r_/bx/z6/r_bxz6wh5wxshbqejunizuaspxk.jpeg"><br><br>  ¬øC√≥mo "vender" la idea de ingenieros post mortem a ingenieros?  Para sortear las objeciones, mostrar por qu√© la autopsia es genial, demostrar el beneficio de los informes, que esto no es solo una cancelaci√≥n de suscripci√≥n, si solo el jefe est√° detr√°s. <br><br><h2>  Objeci√≥n No. 1: Una vez </h2><br>  Este es el primer problema del ingeniero que desmonta el fakap: la guerra terminar√°, ¬°entonces hablaremos!  Cuando ocurre un fakap, quiero solucionarlo r√°pidamente, pero no quiero escribir informes incomprensibles y aburridos. <br><br>  Para resolver el problema, hay un truco de vida, c√≥mo escribir algo correctamente durante un accidente.  Fue popularizado por Artemy Lebedev: <br><blockquote>  "Hay una manera simple de organizar el tiempo: el m√©todo" jeepeg progresivo ".  En cualquier momento, cualquier proyecto est√° 100% listo, aunque puede estar un 4% m√°s desarrollado.  Dependiendo del tiempo disponible, el proyecto se puede calcular hasta un p√≠xel, o se puede dejar en la etapa de dibujo conceptual ". </blockquote><br>  Ilustrar√© el m√©todo progresivo de jeepeg usando una imagen.  En una Internet lenta, una imagen no se descarga inmediatamente, sino por etapas. <br><br><img src="https://habrastorage.org/webt/ug/af/nu/ugafnukcgr0qse0ffzyd1_og898.jpeg"><br><br>  Durante un incendio, no necesita escribir un informe fresco y largo.  Es suficiente para ti en la esquina superior izquierda.  Es suficiente marcar esas cosas que ser√°n dif√≠ciles de recuperar de la memoria.  No intente escribir un texto literario coherente en un momento en que todo se rompe en la producci√≥n. <br><br><blockquote>  Realice una acci√≥n simple: escriba la cronolog√≠a de los eventos. </blockquote><br><h3>  Cronograma </h3><br>  La l√≠nea de tiempo es muy dif√≠cil de restaurar, si no se registra de inmediato.  Un ejemplo de una grabaci√≥n de una autopsia real en el circuito. <br><br><pre><code class="plaintext hljs">15.01.18 17:25 YEKT    PrefixSearch  50   . ,     .</code> </pre> <br>  Esta es una observaci√≥n corta y simple con sello de tiempo.  Seg√∫n esta cronolog√≠a, m√°s tarde es f√°cil restaurar la secuencia de eventos y encontrar la causa del colapso.  Pero si no registra nada directamente durante un incendio, ser√° dif√≠cil o imposible restaurar los eventos m√°s adelante. <br><br><h3>  Capturas de pantalla </h3><br>  Una cosa √∫til, especialmente cuando se trabaja con un sitio web o una aplicaci√≥n de escritorio.  La situaci√≥n a veces es dif√≠cil de describir con palabras, y una captura de pantalla es solo un clic de una tecla de acceso r√°pido. <br><br><img src="https://habrastorage.org/webt/a5/vw/ek/a5vwektoqktqkzwwatkfkirlbdk.jpeg"><br><br>  La primera objeci√≥n funcion√≥.  Al registrar informaci√≥n m√≠nima, un peque√±o informe durante el incidente no es dif√≠cil y no requiere tiempo valioso.  Cuando todo termina, debe completarse y ejecutarse en un documento comprensible y coherente. <br><br><h2>  Objeci√≥n No. 2: Pereza </h2><br>  No dormiste durante dos d√≠as y arreglaste un accidente grave, quedando muy rezagado en todas las tareas que ibas a realizar esta semana.  Pero resulta que hay que hacer algo m√°s, ¬°pero el fuego ya se ha extinguido!  En este momento, la pereza inimaginable se pone al d√≠a. <br><br>  Para vencer por completo el problema no funcionar√°.  Pero puede facilitar su trabajo por adelantado. <br><br><h3>  Patr√≥n </h3><br>  Este es el primero y m√°s importante.  Existe un gran temor a un documento vac√≠o que debe completarse con texto significativo.  Es mucho m√°s f√°cil si la plantilla est√° preparada.  Por lo general, consta de secciones y preguntas en ellos.  Ingresamos las respuestas a las preguntas en cada secci√≥n, y la plantilla se completa. <br><br>  Las plantillas de informes de incidentes son grandes.  Lea sobre ellos en detalle con el gur√∫.  Todos los documentos y libros a los que me refiero contienen patrones de incidentes que utilizan las empresas.  En nuestra experiencia, puedo agregar lo siguiente. <br><br><h3>  Crea una nota con ejemplos </h3><br>  Nuestra plantilla tiene una secci√≥n de "Da√±o" con subsecciones. <br><br>  <strong>Secci√≥n "Evaluaci√≥n cualitativa".</strong>  Describe lo que el ingeniero ve frente a √©l cuando llena esta parte de la plantilla: <br><br><ul><li>  qu√© funcionalidad no funcion√≥, cu√°nto tiempo y para qui√©n; </li><li>  si hubo una p√©rdida o corrupci√≥n de datos. </li></ul><br>  Al llegar a este lugar en la plantilla, el ingeniero escribe: "Hay un mill√≥n de usuarios en nuestra plataforma de blog, perdimos todas las entradas de uno de ellos".  Esto es mucho m√°s f√°cil que escribir un ensayo desde cero, como en una lecci√≥n de literatura. <br><br>  <strong>Secci√≥n "Cuantificaci√≥n":</strong> <br><br><ul><li>  cu√°ntas solicitudes han desaparecido; </li><li>  cu√°nta latencia ha crecido en las m√©tricas de aplicaciones y aplicaciones de clientes; </li><li>  cu√°ntas llamadas se pierden; </li><li>  El tama√±o de la cola para el soporte t√©cnico del usuario para el problema. </li></ul><br>  Un conjunto de tales preguntas es el patr√≥n. <br><br>  Un ejemplo de una de las plantillas completadas. <br><br><img src="https://habrastorage.org/webt/kv/4o/yq/kv4oyqs_2ukhu-o1hdrxgtc01s8.jpeg"><br><br><h3>  Agregar un glosario </h3><br>  Otro truco de vida para informes de accidentes, que no vi en el libro con el gur√∫.  Al escribir un informe, es conveniente utilizar t√©rminos que conozca bien.  Por ejemplo, si trabajo con Graphite, en el que se almacenan las m√©tricas, s√© muy bien qu√© es "retransmisi√≥n".  Pero el ingeniero que leer√° el informe en un a√±o puede no estar familiarizado con el t√©rmino.  Es poco probable que pueda leer el informe, que consiste en palabras desconocidas.  Por otro lado, si cada t√©rmino y definici√≥n se mastica constantemente dentro del informe, la pereza simplemente lo asustar√° y el informe no se completar√°. <br><br><blockquote>  Escriba un peque√±o glosario que describa todos los t√©rminos utilizados en el informe. </blockquote><br><img src="https://habrastorage.org/webt/it/fm/6z/itfm6zuhzxdahe90n6fqvaifhz0.jpeg"><br><br><h3>  Copia todos los artefactos </h3><br>  Si adjunta artefactos al informe: instant√°neas en Grafana, el historial de mensajes en el chat, en el que se analiz√≥ el incidente con otros ingenieros, haga copias.  Las m√©tricas tienen la capacidad de "pudrirse" y los chats cambian.  Hace un a√±o estabas en Slack, ahora en Telegram: el enlace de chat est√° desactualizado y no funciona, y las m√©tricas de retenci√≥n se caer√°n, se almacenan durante un a√±o. <br><br><blockquote>  Copie artefactos: este truco de vida facilita la tarea de completar informes. </blockquote><br><h2>  Objeci√≥n No. 3: Nadie leer√° </h2><br>  La pregunta m√°s grande e incomprensible que hacen los ingenieros es: "¬øQui√©n leer√° estos informes?"  Supongamos que venc√≠ la pereza y escrib√≠ una cronolog√≠a de los acontecimientos durante el accidente.  Luego reuni√≥ fuerzas y agreg√≥ un informe de varias p√°ginas sobre lo que sucedi√≥ y las causas del accidente.  Pero si no se comprende qui√©n leer√° todo esto y qui√©n se beneficiar√°, entonces no hay deseo de completar informes. <br><br><blockquote>  La autopsia es una retroalimentaci√≥n en el proceso de mejora continua de los procesos de desarrollo. </blockquote><br>  En cualquier libro de gur√∫, por ejemplo, en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Manual de incidentes de Atlassian</a> , est√° escrito que de acuerdo con los resultados de cada autopsia, se requiere: <br><br><ul><li>  formular tareas en desarrollo; </li><li>  cree tareas en el rastreador de errores desde el cual las tomar√°n sus desarrolladores; </li><li>  poner enlaces de post-mortem a estas tareas. </li></ul><br>  <strong>La retroalimentaci√≥n est√° cerrada</strong> : aqu√≠ hay una autopsia, aqu√≠ hay <strong>elementos de acci√≥n</strong> : tareas que deben completarse para que el accidente no vuelva a suceder.  Las tareas caen en el trabajo atrasado del equipo, el equipo las desarrolla, despliega, nuevamente el fakap y la autopsia.  La rueda del samsara se ha cerrado. <br><br>  En esto convergen todos los gur√∫s.  No hay nada que discutir: los beneficios son obvios. <br><br>  Un ejemplo de tareas de elementos de acci√≥n de una autopsia real. <br><br><img src="https://habrastorage.org/webt/bi/rh/-u/birh-ug-du80xmxqt3eqvdrdst8.jpeg"><br><br>  Pero nosotros en Kontur agregamos un analista a esto. <br><br><h2>  Anal√≠tica de sof√°s </h2><br>  Sol√≠amos analizar el incidente de forma aislada.  El fallo se produjo por s√≠ solo en un equipo, en un sistema de alojamiento; algo se rompi√≥, lo arreglamos. <br><br>  Pero hay muchos incidentes.  En los √∫ltimos tres a√±os, se han acumulado m√°s de 1,000 informes de incidentes en el circuito.  Me gustar√≠a saber si es posible beneficiarse de toda la masa de informes acumulados, y no solo de cada uno individualmente.  ¬øEs posible sobre la base de calcular las estad√≠sticas del sistema y ver qu√© mejorar en el sistema en su conjunto. <br><br>  Un equipo de infraestructura especial trabaja en Kontur, que se dedica al an√°lisis post-mortem y publica los resultados y conclusiones basados ‚Äã‚Äãen la masa total de informes acumulados.  Llamamos a esto "an√°lisis de sof√°".  Dar√© fragmentos de uno de los art√≠culos del equipo, que se publica en nuestra red interna para empleados. <br><br>  ¬øQu√© analizamos en el an√°lisis de sof√°s? <br><br><h3>  Duraci√≥n de Fakap </h3><br><br><img src="https://habrastorage.org/webt/2b/yq/wz/2byqwzifhia0nzxypk0eqmqrdh8.jpeg"><br><br>  <em>En el diagrama, adem√°s de la √∫ltima columna, donde se desconoce el tiempo, hay dos picos m√°s obvios.</em> <br><br>  <strong>Duraci√≥n del orden de una hora</strong> : barras anaranjadas y rojas.  La mayor parte de este tiempo se pas√≥ transmitiendo informaci√≥n sobre lo sucedido, desde el ingeniero que not√≥ el accidente hasta el ingeniero que sabe c√≥mo solucionarlo.  <strong>El problema es la comunicaci√≥n</strong> . <br><br>  Si arreglamos nuestras herramientas para que el ingeniero que soluciona el problema reciba informaci√≥n m√°s r√°pido, la duraci√≥n de los fakaps y el da√±o de ellos se reducir√° considerablemente.  Esto es algo que no reconocer√≠amos al mirar cualquier fakap individualmente. <br><br>  <strong>Duraci√≥n aproximadamente 12 horas</strong> : una columna amarilla.  La explicaci√≥n del hecho de que hay muchos fakaps que duran m√°s de 12 horas es simple: lanzaron el lanzamiento por la tarde, y por la ma√±ana llegaron los usuarios, y todo se rompi√≥.  La conclusi√≥n de qu√© hacer para reducir el n√∫mero de tales fakaps es obvia. <br><br><h3>  Da√±o de calidad </h3><br><img src="https://habrastorage.org/webt/js/l0/i9/jsl0i9hoqlos7n2uloqh0nnki_y.jpeg"><br><br>  El da√±o cualitativo se divide en varias categor√≠as.  Top 3 incluye: <br><br><ul><li>  inaccesibilidad, errores; </li><li>  frenos, mayor latencia; </li><li>  Comportamiento incorrecto visible. </li></ul><br>  Seg√∫n los an√°lisis, la gran mayor√≠a de estos errores.  Por un lado, estas son buenas noticias.  Los tres tipos de errores m√°s comunes son f√°ciles de detectar: ‚Äã‚Äãajustamos las m√©tricas a la latencia y la cantidad de errores, y notamos r√°pidamente tales cosas. <br><br>  La mala noticia es que hay la mayor√≠a de estos errores.  Estos son errores t√©cnicos simples, lo que significa que podr√≠amos mejorar algo en las pruebas de tuber√≠as, realizar m√°s pruebas de estr√©s y mejorar el sistema de monitoreo. <br><br><h3>  Disparadores </h3><br>  Esto es lo que condujo directamente al colapso, es decir, no la causa ra√≠z del accidente, sino la "gota que colm√≥ el vaso": los registros llenaron el disco y debido a esto, todo se rompi√≥, se puso en libertad, todo explot√≥. <br><br><img src="https://habrastorage.org/webt/vi/u5/iy/viu5iyoxhj_ykvpg9itnr-7qy0u.jpeg"><br><br>  En primer lugar es la "instalaci√≥n de actualizaci√≥n".  Esta raz√≥n nos permite comprender en qu√© debemos invertir, como equipo de infraestructura.  Por ejemplo, para mejorar el sistema de implementaci√≥n e introducir una implementaci√≥n canaria.  Este es el punto de esfuerzo que tendr√° el mayor impacto en la calidad de nuestros sistemas. <br><br><blockquote>  Este es el punto de todos los an√°lisis: comprender d√≥nde debe invertir un peque√±o equipo de infraestructura en este momento en condiciones de recursos limitados. </blockquote><br>  ¬øQu√© mejorar: alerta o despliegue?  ¬øQu√© hacer: hosting o la belleza de los gr√°ficos? <br><br>  Aqu√≠ hay otra buena idea.  En segundo lugar est√° "la causa es desconocida".  Este es un indicador de informes deficientes de informes de incidentes. <br><br><h3>  Posibles "pastillas" </h3><br>  Eso permite una soluci√≥n t√©cnica simple para reducir el n√∫mero de accidentes de cierto tipo.  Por ejemplo, sabemos que las cosas m√°s importantes que reducen el n√∫mero de fakaps son las notificaciones del sistema de monitoreo.  Si hubiera m√°s alertas en el monitoreo de estos eventos, ¬øcu√°ntos incidentes podr√≠amos prevenir?  El porcentaje indica cu√°nto: <br><br><ul><li>  en la cantidad de errores HTTP del cliente - 10%; </li><li>  en la aparici√≥n de nuevos tipos de errores en los registros: instalaci√≥n, configuraci√≥n de notificaciones - 8%; </li><li>  en recursos del sistema: CPU, memoria, disco, hilos, GC - 6%. </li></ul><br>  Si la alerta se configur√≥ correctamente y el ingeniero deseado recibi√≥ una notificaci√≥n a tiempo, el 24% de los incidentes no ocurrir√≠an o tendr√≠an una duraci√≥n mucho m√°s corta.  Esta conclusi√≥n puede hacerse sobre la base del an√°lisis de toda la masa de incidentes. <br><br>  Aqu√≠ anunciar√© nuevamente nuestro sistema de alerta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Moira</a> , que se encuentra en C√≥digo Abierto. <br><br><img src="https://habrastorage.org/webt/fz/yu/tb/fzyutbmpcgj2xnarmqhxwnqbrjk.jpeg"><br><br>  Si tiene Graphite, puede descargarlo y usarlo.  Espero que haya menos incidentes. <br><br><h3>  Recomendaciones </h3><br>  Recomendaciones organizacionales que el equipo puede seguir, y tambi√©n reducir la cantidad de accidentes.  Nuestro top 3. <br><br><ul><li>  <strong>La similitud de los sitios de prueba y combate</strong> .  El 5% de los incidentes ocurrieron debido al hecho de que el sitio de prueba no era lo suficientemente similar al de combate. </li><li>  <strong>Compatibilidad con versiones anteriores en versiones</strong> .  El lanzamiento se desinfl√≥, no era compatible con la versi√≥n anterior, surgieron migraciones de datos: 4% de los errores. </li><li>  <strong>Denegaci√≥n de liberaciones nocturnas</strong> .  Si deja de difundir lanzamientos que se rompen, en la noche, otro 4% de los incidentes desaparecer√°n. </li></ul><br>  Insisto en que esto no es una instrucci√≥n, sino una historia sobre c√≥mo recopilamos an√°lisis.  Su an√°lisis puede ser diferente. <br><br><h2>  Como escribir </h2><br>  Si te das cuenta de que el an√°lisis de incidentes es algo genial y necesitas escribir informes, te dir√© c√≥mo hacerlo. <br><br><h3>  Post-mortem y tareas en un rastreador de errores </h3><br>  En el rastreador de errores, a diferencia de Google Docs o Wiki, hay campos fijos para los que puede establecer un conjunto de valores.  Esto facilita el an√°lisis de estad√≠sticas gr√°ficas m√°s adelante. <br><br>  En el libro SRE, Google proporciona una plantilla en Google Docs en la que escriben informes en su documento interno.  No puedo imaginar c√≥mo podemos recopilar los an√°lisis que recopilamos de documentos de Google no estructurados. <br><br>  Escribimos informes en el mismo rastreador de errores que las tareas principales, porque podemos conectar la tarea con la autopsia.  Echemos un vistazo a la autopsia e inmediatamente veamos qu√© tareas est√°n cerradas, cu√°les no y cu√°les quedan por hacer. <br><br><h3>  Crea campos especiales </h3><br>  Ya habl√© de campos especiales.  Tenemos lo siguiente <br><br><ul><li>  El principio y el final del fakap se pueden analizar autom√°ticamente.  Si coloca marcas de tiempo legibles por m√°quina, puede trazar la duraci√≥n del fakap. </li><li>  El comienzo y el final de la investigaci√≥n. </li><li>  Disparador  Configure una lista desplegable de disparadores, es m√°s conveniente. </li><li>  Como se se√±al√≥. </li><li>  Da√±o cuantitativo y cualitativo. </li><li>  Equipos y servicios afectados. </li></ul><br>  Todos los datos de campos especiales le permiten comprender c√≥mo funciona su infraestructura. <br><br>  Un ejemplo de nuestro informe de incidentes completo. <br><br><img src="https://habrastorage.org/webt/2r/dk/c3/2rdkc3flemuokdisdblhr6ls0cg.jpeg"><br><br>  Los campos de la columna derecha se completan mediante la selecci√≥n de las listas desplegables. <br><br><h3>  Re√∫na un equipo de ingenieros que se preocupe por la calidad. </h3><br>  Para obtener informes que lo ayuden a comprender c√≥mo desarrollar su infraestructura, necesitar√° personas que se preocupen por la calidad de sus servicios.  No necesariamente ser√°n los ingenieros los que se dediquen al an√°lisis a tiempo completo de la autopsia solamente.  Es importante que estas personas est√©n muy preocupadas por lo que est√° sucediendo.  De vez en cuando se reunir√°n, analizar√°n toda la masa de incidentes, escribir√°n art√≠culos grandes y traer√°n beneficios, cierren el c√≠rculo de comentarios. <br><br>  Nuestro equipo se llama Q-team, de la palabra "Calidad".  Cuenta con 3 personas, uno de los ingenieros m√°s talentosos de la empresa que trabajan en infraestructura. <br><br><h2>  Total </h2><br>  <strong>Lea el gur√∫:</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el art√≠culo de John Allspaw</a> y los libros de gesti√≥n de incidentes: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ingenier√≠a de confiabilidad del sitio</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PagerDuty Post-Mortem Process</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Atlassian Incident Handbook</a> . <br><br>  Y cuando vengas a trabajar ma√±ana, solo da <strong>los primeros pasos</strong> : <br><br><ul><li>  inicie un proyecto para fakaps en el rastreador de errores en el que realiza tareas; </li><li>  tome cualquier plantilla: no intente escribir la suya, tomar la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nuestra</a> o de Google en SRE; </li><li>  cuando algo explota, solo escribe. </li></ul><br>  En ese momento, cuando escriba el primer, segundo y tercer informe, no tendr√° an√°lisis hermosos con columnas multicolores.  Pero despu√©s de un a√±o o dos, cuando los datos se han acumulado, miras hacia atr√°s y te agradeces por el primer paso. <br><br><blockquote>  Esperamos, entonces recordar√°s y agradecer√°s a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Alexei</a> por la historia de tal experiencia.  Y, a su vez, intentaremos recopilar nuevos informes √∫tiles en el programa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DevOpsConf</a> , recomendaciones desde las cuales puede ir y aplicar.  La conferencia se llevar√° a cabo <strong>del 30 al 1 de septiembre de 2019</strong> , hasta el 20 de agosto todav√≠a estamos esperando las solicitudes de los partidarios de DevOps, pero <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">12</a> ya han sido aprobados, es decir, la competencia ser√° m√°s cercana a la fecha l√≠mite. <br><br>  Si desea compartir su experiencia, dec√≠dase y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">env√≠e sus res√∫menes</a> .  Si desea recibir noticias del programa, suscr√≠base a nuestro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">bolet√≠n</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">canal de telegramas</a> . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/458924/">https://habr.com/ru/post/458924/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../458914/index.html">Qu√© (no) necesitas saber para crear juegos en Unity</a></li>
<li><a href="../458916/index.html">Debajo del cap√≥ de React. Escribimos nuestra implementaci√≥n desde cero</a></li>
<li><a href="../458918/index.html">Lo que puedes aprender del dise√±o de juegos hiper-casuales</a></li>
<li><a href="../458920/index.html">Conferencia para fan√°ticos de DevOps</a></li>
<li><a href="../458922/index.html">C√≥mo pasar de ESXi a KVM / LXD y no perder la cabeza</a></li>
<li><a href="../458926/index.html">La tragedia no viene sola</a></li>
<li><a href="../458928/index.html">XLNet vs BERT</a></li>
<li><a href="../458930/index.html">C√≥mo los estudiantes de Perm llegaron a la final del campeonato internacional de an√°lisis de datos de Data Mining Cup 2019</a></li>
<li><a href="../458932/index.html">Yota, o c√≥mo puedes averiguarlo todo</a></li>
<li><a href="../458934/index.html">Implementaci√≥n de aplicaciones en m√∫ltiples cl√∫steres de Kubernetes con Helm</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>