<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòª üÜò ‚öõÔ∏è DEFCON 21. La conf√©rence DNS peut √™tre dangereuse pour votre sant√©. Partie 1 üê† üçé üßóüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je m'appelle Rob Stackle, je suis consultant en s√©curit√© de Phoenix, en Arizona, et je travaille principalement comme pentester. Je participe √† des co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DEFCON 21. La conf√©rence DNS peut √™tre dangereuse pour votre sant√©. Partie 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/430724/"> Je m'appelle Rob Stackle, je suis consultant en s√©curit√© de Phoenix, en Arizona, et je travaille principalement comme pentester.  Je participe √† des conf√©rences DefCon depuis 1996, j'aime la photographie √† haute altitude et ce week-end √©tait le onzi√®me anniversaire de notre mariage.  Je tiens √† remercier ma femme √©tonnante et compr√©hensive Linda, qui ne s'attendait pas √† ce que ma participation √† DefCon signifie que chaque ann√©e, je serai oblig√©e de c√©l√©brer notre anniversaire de mariage √† Vegas, ce que je suis vraiment d√©sol√©. <br><br><img src="https://habrastorage.org/webt/gh/iu/mb/ghiumbdk-zkg1rtasuz93unhkz8.jpeg"><br><br>  Je vais vous parler de plusieurs choses li√©es √† la recherche sur laquelle j'ai travaill√© au cours des derni√®res ann√©es.  Ils sont unis par un th√®me commun - si vous ne surveillez pas votre trafic DNS et ne comprenez pas ce qui s'y passe, quand tout est en ordre, alors vous ne ferez probablement pas attention lorsque de mauvaises choses commenceront √† lui arriver.  J'ai "viol√©" le DNS pendant plusieurs ann√©es et cela a toujours √©t√© l'un de mes vecteurs d'attaque pr√©f√©r√©s.  Vous pouvez d√©penser une fortune pour renforcer le p√©rim√®tre du r√©seau, mais si je peux contr√¥ler l'un de vos appareils, croyez-moi, votre jeu est termin√©. <a name="habracut"></a><br><br>  L'absence de vuln√©rabilit√©s sur le march√© pour d√©tecter les configurations incorrectes me donne toujours la possibilit√© de ¬´mettre le pied dans la porte¬ª.  Aujourd'hui, nous discuterons de divers sujets dans lesquels je parlerai de mes aventures avec DNS et de mes astuces sur les personnes li√©es au DNS. <br><br>  Ces sujets sont consacr√©s √† l'incompr√©hension du comportement du DNS par les utilisateurs finaux du r√©seau, je vais parler un peu des personnes qui n'ont pas enregistr√© leurs domaines et du piratage de domaine lui-m√™me. <br><br>  Lors des conf√©rences Black Hat et DefCon en 2011, Artyom Daineberg a parl√© de ce qu'il a appel√© le beat squatting, ou ¬´flipping a beat¬ª.  Ceux qui ne connaissent pas cette √©tude, mais qui s'int√©ressent √† ce probl√®me dans le DNS des domaines populaires, peuvent t√©l√©charger le mat√©riel de sa pr√©sentation en utilisant les liens fournis sur cette diapositive. <br><br><img src="https://habrastorage.org/webt/k6/xn/hb/k6xnhbvdnrhqjf77lhaplvwfq0u.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Page du projet</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pr√©sentation vid√©o</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Diapositives</a> <br><br>  Lorsque j'ai lu l'annonce de son discours, publi√©e avant m√™me le rapport sur Black Hat, je me suis imm√©diatement int√©ress√© √† la fa√ßon dont cela pouvait √™tre utilis√© √† mes propres fins.  Sans entrer dans les d√©tails, je vais vous expliquer ce qu'est le battement accroupi, pourquoi cela se produit et ce qu'il affecte.  Je vais vous montrer quelques exemples du risque de retourner accidentellement un peu en m√©moire lorsque 1 passe √† 0 et vice versa.  Les diapositives suivantes montrent √† quoi cela ressemble comme un exemple de ligne en m√©moire qui affiche un nom de domaine. <br><br><img src="https://habrastorage.org/webt/2n/po/yp/2npoypk5v5tzpcgbmdsv-usjfne.jpeg"><br><br>  Au milieu d'une telle ligne, l'unit√© se transforme en z√©ro.  Artyom a enqu√™t√© sur le ph√©nom√®ne dans lequel une erreur d'un seul bit dans la bonne partie de la m√©moire au bon moment a forc√© le client √† demander un nom de domaine compl√®tement l√©gitime mais incorrect. <br><br>  Il y a eu beaucoup de discussions sur la probabilit√© et les causes d'une telle erreur, mais j'ai commenc√© √† √©tudier toutes les fa√ßons qui permettent √† cette erreur d'√™tre utilis√©e √† des fins malveillantes.  Ainsi, le squattage DNS vous permet de d√©former les noms de domaine, puis d'enregistrer ces ¬´mauvais¬ª domaines et de leur envoyer des demandes d'utilisateurs. <br><br>  La diapositive suivante montre qu'√† la suite d'un squattage du nom de domaine Google, lorsqu'un proton de haute √©nergie en m√©moire "frappe" 1, ce qui signifie la lettre g, le transforme en 0, ce qui signifie la lettre f, et par cons√©quent, l'utilisateur est redirig√© vers goofle.com . <br><br><img src="https://habrastorage.org/webt/mg/-i/dr/mg-idr_v9xmgo_s4tknxy-tnia0.jpeg"><br><br>  Ainsi, votre navigateur vous redirigera compl√®tement vers un autre site et se fera un plaisir de trouver la r√©ponse pour vous.  Dans le m√™me temps, DNS SEC ne pourra en aucun cas vous aider, et en fait il y a tr√®s peu de possibilit√©s pour emp√™cher cette erreur de mani√®re compl√®tement invisible, √† l'exception de l'utilisation de la m√©moire ECC, qui reconna√Æt et corrige automatiquement les erreurs de bit. <br><br>  Cependant, ce type de m√©moire n'est pas tr√®s courant, et m√™me si vous avez utilis√© ECC, il existe de nombreux endroits o√π le squattage de bits peut se produire et o√π la m√©moire ECC n'est jamais utilis√©e, par exemple, dans une carte r√©seau ou dans le cache DRAM d'un disque dur. <br><br>  Deineberg a d√©crit en d√©tail les causes du probl√®me, mais en g√©n√©ral, on peut dire que des erreurs de m√©moire se produisent, parfois elles endommagent la m√©moire et parfois cela a un effet sur le DNS.  Fondamentalement, le ¬´retournement¬ª d'un bit est d√ª √† des dommages physiques √† la m√©moire, √† une surchauffe, √† des probl√®mes √©lectriques, √† une exposition √† des rayonnements et m√™me √† des rayonnements cosmiques. <br><br>  La pr√©sentation est interrompue par l'apparition sur la sc√®ne des organisateurs de DefCon, qui f√©licitent l'orateur et son √©pouse Linda, qui sont pr√©sents √† la conf√©rence pour la premi√®re fois, √† l'occasion du onzi√®me anniversaire de mariage.  Robert les remercie pour les f√©licitations et continue la pr√©sentation. <br>  Le rayonnement cosmique est un facteur extr√™mement rare affectant l'accrochage des bits, mais la surchauffe est une cause tr√®s courante d'erreurs de m√©moire.  J'ai remarqu√© que les smartphones sont particuli√®rement vuln√©rables en raison des conditions de fonctionnement extr√™mes auxquelles ils sont expos√©s.  La surchauffe de la batterie du smartphone est un ph√©nom√®ne assez courant.  La plupart des autres appareils ont un refroidissement, mais m√™me ils parviennent √† cr√©er des conditions de fonctionnement difficiles. <br><br><img src="https://habrastorage.org/webt/o6/ji/aa/o6jiaavivezo-k_6racvxt9xdw0.jpeg"><br><br>  Il n'y a pas si longtemps, Google a publi√© des informations sur le travail de ses centres de donn√©es.  L'une des choses int√©ressantes que j'ai apprises √©tait le message selon lequel, pour √©conomiser de l'√©nergie, ils exploitent leurs centres de donn√©es dans des conditions que la plupart d'entre nous jugeraient d√©raisonnables.  Si les centres de donn√©es typiques fonctionnent √† une temp√©rature maximale de 60 √† 70 degr√©s Fahrenheit (15 √† 20 ¬∞ C), les experts Google recommandent aux entreprises d'exploiter les centres de donn√©es √† une temp√©rature d'au moins 80 degr√©s (27 ¬∞ C) et un centre de donn√©es belge Google. exploit√© ses serveurs √† une temp√©rature de 95 degr√©s (35 ¬∞ C). <br><br><img src="https://habrastorage.org/webt/du/rg/hn/durghn_gxdk7asow1-e0eqkgsgc.jpeg"><br><br>  L√©gende: "J'ai entendu dire que cela nous faisait √©conomiser de l'argent." <br><br>  Intel et Microsoft affirment que leurs serveurs se comportent bien √† des temp√©ratures √©lev√©es, et Dell garantit que leurs serveurs fonctionneront √† 115 degr√©s Fahrenheit (46 ¬∞ C).  Je pense que c'est une mauvaise id√©e, car la temp√©rature est le principal facteur assurant un fonctionnement stable de la m√©moire, et les centres de donn√©es de Google fonctionnent √† des temp√©ratures de "feu". <br><br>  J'ai commenc√© √† √©tudier les avantages que cela pouvait apporter et les domaines les plus vuln√©rables au squattage de bits, c'est-√†-dire que j'ai essay√© de trouver les noms les plus fr√©quemment demand√©s pour augmenter la probabilit√© de rencontrer de telles erreurs.  J'ai commenc√© √† collecter les journaux DNS des grandes entreprises pour trouver les noms de domaine les plus courants et j'ai d√©couvert que le nom le plus demand√© √©tait gstatic.com.  Il s'agit de l'un des domaines que Google sert √† fournir des informations statiques telles que les fichiers CSS, les images, JavaScript et XML. <br><br><img src="https://habrastorage.org/webt/j9/xn/vn/j9xnvn0ht-pgfpoclvyeyf9ru5a.jpeg"><br><br>  J'ai √©crit un script pour identifier d'√©ventuels ¬´bouleversements¬ª de bits dans ce nom de domaine gstatic.com, et j'ai obtenu une liste de toutes les variantes de ce nom au montant de 34 pi√®ces.  Cinq d'entre eux ont √©t√© utilis√©s √† des fins l√©gales, les 29 restants √©taient disponibles, alors je les ai tous achet√©s. <br><br><img src="https://habrastorage.org/webt/e-/eo/32/e-eo32vi5w_l_cozwqd0rfmkwt0.jpeg"><br><br>  J'ai imm√©diatement atteint la cible.  Quelqu'un recherchait des images sur Google et le contenu de la demande lui a √©t√© retourn√© d'une mani√®re ou d'une autre endommag√©, car son navigateur m'a demand√© de servir l'une des images de la demande.  Je vois leur adresse IP, le nom d√©form√© qu'ils ont demand√©, la ressource qu'ils ont essay√© de r√©cup√©rer en utilisant cette image, la page li√©e √† ce contenu et le client qui a √©t√© utilis√© comme navigateur pour envoyer cette demande. <br><br><img src="https://habrastorage.org/webt/eu/gm/oi/eugmoimv5zvkdflbtcz4ryp1o_4.jpeg"><br><br>  Sur la page, vous pouvez voir un artefact int√©ressant sous la forme d'une demande pour un nom sp√©cifique Trisha Jones. <br><br><img src="https://habrastorage.org/webt/fr/sx/ol/frsxolhwqbwawblq6lbbxjrwy3k.jpeg"><br><br>  De plus, le nombre de demandes a augment√©, plus de noms d√©form√©s sont apparus, plus de demandes d'images et plus de liens vers la demande d'origine, √† la suite de quoi j'ai collect√© plus de 50000 demandes uniques, ce qui s'est av√©r√© √™tre un ph√©nom√®ne courant. <br><br><img src="https://habrastorage.org/webt/ez/o3/gz/ezo3gzhi_-vnofpq9wspmn450bw.jpeg"><br><br>  La diapositive montre une demande d'une image "photographi√©e" de l'actrice Selena Gomez, qui fait rire dans la salle. <br><br>  Il arrive donc parfois que le battement accroupi arrive juste au bon moment pour r√©pondre √† l'une de vos demandes, et si cela ne se produit pas trop souvent, vous n'avez pas √† vous inqui√©ter.  Mais parfois, cela se produit au moment m√™me o√π il y a une sauvegarde sur le disque dur, ce qui est d√©j√† plus int√©ressant.  Il est probable que le bit squatting se produise dans des conditions normales de fonctionnement de la m√©moire, mais il est tr√®s probable que cela se produise principalement dans les centres de donn√©es avec une temp√©rature de 95 degr√©s. <br><br>  Maintenant, mes journaux sont remplis de bruit, je re√ßois chaque jour des demandes d√©form√©es en quantit√© telle que je ne peux pas les afficher manuellement. <br><br><img src="https://habrastorage.org/webt/yh/yp/4j/yhyp4j-qevsxstztuxhg71ynn0m.jpeg"><br><br>  Par cons√©quent, j'√©cris des scripts pour essayer de trouver les m√™mes mod√®les de requ√™te, et le plus grand que j'ai obtenu √©tait beaucoup de requ√™tes de la m√™me image pour le m√™me nom de domaine d√©form√©, et elles provenaient toutes de t√©l√©phones mobiles.  J'ai re√ßu ces demandes toutes les quelques secondes, car tous ces t√©l√©phones ont essay√© d'utiliser la page de recherche du site Web de Google et m'ont demand√© de leur fournir une petite image du logo de la page d'origine. <br><br>  J'ai trouv√© un serveur Web de l'ensemble du cloud Google qui diffusait du contenu et d√©formait constamment le nom de domaine, pointant vers l'un de mes serveurs, o√π le logo portant ce nom se trouvait par accident, et les clients l'ont pris. <br><br>  <i>La diapositive montre comment le logo de la page de recherche Google sur l'√©cran d'un appareil mobile est remplac√© par le logo Occupy, ce qui provoque un rire appr√©ci√© dans la salle.</i> <br><br>  Pendant deux ans, des centaines de milliers de demandes pour ce logo sont arriv√©es sur ce serveur avec un nom DNS d√©form√©, au lieu de celui que Google pr√©voyait d'utiliser.  Puis un jour, ils se sont arr√™t√©s, car Google a refus√© de modifier le contenu des sites mobiles, et cette commande a √©t√© annul√©e. <br><br>  J'ai donc continu√© √† √©tudier les mod√®les de requ√™te et essay√© de trouver d'autres mod√®les.  L'un d'eux est apparu r√©guli√®rement et a eu lieu de mani√®re naturelle en ¬´retournant un peu¬ª la m√©moire, et non pas √† la suite d'une erreur de squattage de bits enregistr√©e. <br><br><img src="https://habrastorage.org/webt/hl/at/-o/hlat-o_vzwxgvkkkvlmz3c7lnpq.jpeg"><br><br>  J'ai re√ßu les demandes indiqu√©es sur la diapositive suivante avec une fr√©quence d'une par heure.  Ils ne semblaient pas familiers, ils utilisaient tous le client Google Feedfetcher, ils provenaient tous d'appareils sur le m√™me r√©seau et toutes les demandes √©taient li√©es √† des fichiers XML.  J'ai donc fouill√© un peu et j'ai trouv√© que Feedfetcher √©tait le m√©canisme que Google utilise pour capturer le contenu mis √† jour pour iGoogle, et les adresses IP source √©taient situ√©es en Belgique. <br><br><img src="https://habrastorage.org/webt/al/ql/ar/alqlarm0ctfw4yj8hns-hnyj5zc.jpeg"><br><br>  Ces demandes concernent les propres serveurs de Google, qui sont utilis√©s pour recevoir du contenu mis √† jour pour divers widgets qui personnalisent la page d'accueil iGoogle, un portail Internet personnel. <br><br>  Chaque widget est un fichier XML qui d√©finit le contenu, et Google m'a demand√© de fournir ce contenu √† mes serveurs de pr√©sentation (applaudissements et rires du public). <br><br><img src="https://habrastorage.org/webt/wz/lg/im/wzlgim-q0pd6qyjg5fitzgcvjgm.jpeg"><br><br>  Par cons√©quent, je pensais que si Google voulait accidentellement du contenu de moi qui pourrait fournir √† ses utilisateurs, il le recevrait.  J'ai pris les fichiers XML sur lesquels Google m'a pos√© des questions et les ai divis√©s en parties.  Comme vous pouvez le voir, il y a deux sections: un en-t√™te qui d√©crit le module et un bloc C de donn√©es emball√©es dans le code HTML CSS et JavaScript qui composent le widget. <br><br><img src="https://habrastorage.org/webt/dq/me/oi/dqmeoijhs6fgla_b93rlqtpn34y.jpeg"><br><br>  J'ai donc juste chang√© le lien vers l'image d'arri√®re-plan, chang√© l'adresse de gstatic.com en grtatic.com, et laiss√© le reste inchang√©, mis les fichiers XML dans la ligne d'o√π Feedfetcher les obtient, et j'ai attendu un peu. <br><br><img src="https://habrastorage.org/webt/gh/xd/4b/ghxd4butfk2lis7we9oce-kma6m.jpeg"><br><br>  Presque imm√©diatement apr√®s cela, Feedfetcher m'a demand√© des fichiers XML, apr√®s quoi j'ai imm√©diatement commenc√© √† recevoir des demandes de nombreuses adresses IP Google pour cette image d'arri√®re-plan. <br><br><img src="https://habrastorage.org/webt/9u/7d/lf/9u7dlfnnicox9tr7dwigqoasxge.jpeg"><br><br>  Par cons√©quent, j'ai supprim√© les fichiers XML que j'ai modifi√©s et j'ai attendu que les demandes s'arr√™tent, mais pendant 35 jours cons√©cutifs, 61 appareils m'ont pos√© des questions sur cette image chaque jour.  Et plus int√©ressant encore, chacun de ces appareils √©tait un client Virgin Media au Royaume-Uni. <br><br><img src="https://habrastorage.org/webt/40/6y/hu/406yhuuqvt3uehxryvrqad34cuy.jpeg"><br><br>  Ce fichier Google XML a donc servi 61 personnes et au cours de l'ann√©e √©coul√©e, 500 adresses IP Feedfetcher uniques m'ont demand√© de fournir ces modules 15 000 fois.  Je pouvais donc offrir √† mes utilisateurs quelque chose de plus dangereux que de simplement remplacer l'image d'arri√®re-plan. <br><br>  Voici quelques astuces suppl√©mentaires que vous pouvez effectuer avec Google.  Si vous ne le savez pas, Postini est le service de messagerie √©lectronique, de s√©curit√© Web et d‚Äôarchivage des courriers √©lectroniques de Google r√©cent. <br><br><img src="https://habrastorage.org/webt/9k/k6/ee/9kk6eeugcyqa86ezoolwhjnb71e.jpeg"><br><br>  Ce service vous permet de changer votre DNS pour indiquer votre enregistrement MX dans leur domaine et faire votre domaine en changeant les 4 caract√®res MX avant psmtp.com.  La chose la plus int√©ressante ici est que le domaine est si court que vous pouvez facilement enregistrer toutes les versions possibles du nom avec les bits ¬´invers√©s¬ª.  Un autre point int√©ressant est que de nombreuses entreprises indiquent leurs enregistrements MX pour un seul domaine et personne ne pensait que c'√©tait une mauvaise id√©e. <br><br>  Par cons√©quent, je n'ai enregistr√© que trois bits accroupis possibles pour ce domaine, et l'emploi de psmtp.com s'est av√©r√© si important que les 4 diapositives suivantes montrent les demandes que j'ai re√ßues en seulement un mois. <br><br><img src="https://habrastorage.org/webt/gm/uh/85/gmuh85j-12saxsc-buln1v09ddk.jpeg"><br><br><img src="https://habrastorage.org/webt/fu/lj/dc/fuljdczh5bcckphdfsrostma2lm.jpeg"><br><br>  Donc, si vous utilisez le courrier Postini, votre demande parviendra √† un moment donn√© √† mon serveur.  Je ne pense pas que quiconque puisse dire que Google n'est pas s√©rieux au sujet de la s√©curit√© Internet.  Mais si quelqu'un se demandait √† quels probl√®mes une surchauffe causant des erreurs de m√©moire pouvait conduire, il pourrait se poser la question de consid√©rer la possibilit√© d'une compensation pour de telles choses.  Par cons√©quent, ne laissez pas vos noms de domaine √™tre si courts, car cela affecte n√©gativement votre entreprise, comme Postini, surtout si votre domaine est populaire. <br><br>  Je recommande fortement aux gens d'appliquer une politique interne de gestion des noms de domaine qui leur permet de corriger les erreurs de distorsion des noms et de comprendre clairement comment de telles choses peuvent vous affecter.  Si vous avez gstatic.com et un centre de donn√©es fonctionnant √† une temp√©rature de 95 degr√©s, vous voulez probablement vous assurer que toute erreur de squattage de bits ne permettra pas au client d'acc√©der √† un r√©seau externe malveillant. <br><br>  Soit dit en passant, parmi tous les domaines sur lesquels j'ai enqu√™t√©, la seule entreprise √† avoir enregistr√© toutes les distorsions possibles de mon nom √©tait Yahoo. <br><br>  Dans la prochaine partie de la pr√©sentation, je vais d√©montrer le comportement du DNS, que beaucoup de gens ne semblent pas comprendre compl√®tement. <br><br><img src="https://habrastorage.org/webt/5l/id/3u/5lid3udte9qlatu5vhjy7w-qnr0.jpeg"><br><br>  Honn√™tement, Microsoft a fait un tr√®s mauvais travail de documentation, d'autant plus que le comportement du DNS change souvent.  Cela conduit √† une mauvaise compr√©hension de ce qui se passe chez les utilisateurs finaux, d'autant plus qu'un tel comportement est souvent contradictoire. <br><br>  Par cons√©quent, je commencerai par le fait que tout le monde doit comprendre comment les p√©riph√©riques doivent se comporter lors de la requ√™te DNS et √† quoi s'attendre d'eux.  Ensuite, je vais expliquer comment ce comportement devient impr√©visible lors de l'utilisation des chemins de recherche de suffixe DNS, comment la documentation insuffisante affecte tout cela, et je terminerai par un bref aper√ßu des le√ßons qui peuvent √™tre tir√©es de tout cela.  Mais d'abord, je vais montrer √† quel point il peut √™tre dangereux pour un utilisateur final de mal comprendre ce qui se passe avec le DNS. <br><br>  Ainsi, apr√®s avoir tap√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.google.com</a> dans la barre d'adresse de votre navigateur, votre ordinateur envoie une demande au serveur DNS local, et la t√¢che de trouver la chose dont vous avez besoin, de renvoyer la demande et de r√©pondre lui est d√©sormais attribu√©e.  Le serveur local appelle le serveur racine pour acc√©der au serveur .com et le serveur racine l'envoie au serveur .com.  Il v√©rifie si le serveur local est autoris√© √† recevoir des demandes sur google.com et l'envoie au serveur ns.google.com.  Enfin, le serveur local re√ßoit une r√©ponse avec l'adresse IP de la ressource dont vous avez besoin et vous l'envoie. <br><br><img src="https://habrastorage.org/webt/2o/z-/1s/2oz-1ssggey-ghbnfldymzelauy.jpeg"><br><br>  C'est le comportement DNS normal que tout le monde attend de lui.  Tout le monde pense qu'il suffit d'envoyer simplement une demande de l'appareil √† votre serveur DNS local pour qu'il fasse tout le travail, puis d'obtenir une r√©ponse √† votre demande.  Mais tout le monde n'imagine pas que ce processus comporte de nombreuses √©tapes importantes. <br><br>  Par exemple, votre appareil tente de trouver la r√©ponse sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.google.com</a> , mais l'ensemble du processus, qui nous a pris jusqu'√† 8 diapositives, ne se produira que si vous saisissez exactement une telle adresse dans la barre de requ√™te du navigateur - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.google .com</a> .  Il s'agit du nom de domaine complet associ√© au DNS racine.  Beaucoup de gens pensent que le nom de domaine complet se termine par un point, ce qui n'est pas vrai.  La pr√©sence d'un point √† la fin du nom complet est toujours suppos√©e et, √† cause de cela, des probl√®mes se produisent.  Essayons d'imprimer 4 variantes du nom: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.google.com</a> <br>  google.com <br>  www <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.google.com</a> <br><br>  dont chacun se comporte diff√©remment en ce qui concerne le comportement DNS.  Tout cela est personnalisable, mais g√©n√©ralement personne ne le fait. <br><br>  Voyons ce qui se passe r√©ellement dans de telles situations.  Il existe plusieurs facteurs qui influencent la prise de d√©cision du client avant de d√©cider d'envoyer une requ√™te DNS.  Deux d'entre eux sont les chemins de recherche de suffixe et la d√©volution DNS. <br><br><img src="https://habrastorage.org/webt/qp/2_/eo/qp2_eogxid_o03m5butwxk-ahqo.jpeg"><br><br>  Les deux ont de nombreux param√®tres personnalisables qui affectent leur comportement et se comportent diff√©remment dans diff√©rentes versions de Windows et dans diff√©rents service packs. <br><br>  C'est ainsi que la plupart des gens utiliseront le suffixe du chemin de recherche.  Si votre entreprise s'appelle foo et que vous poss√©dez le domaine foo.com et que le nom de l'annuaire actif est ad.foo.com, vous pouvez utiliser le suffixe des chemins de recherche ad.foo.com ou foo.com et le "pousser" dans la partie cliente de l'assemblage syst√®me ou dans strat√©gie de groupe. <br><br>  Si l'un de vos clients essaie de r√©soudre le nom abr√©g√© www, le comportement par d√©faut de Windows XP sera le suivant.  D'abord, elle enverra une requ√™te DNS le long du chemin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.ad.foo.com</a> , puis le long du chemin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.foo.com</a> et √† la fin une requ√™te NetBIOS suivra - juste www. <br><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.phx</a> ,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.phx</a> ,      ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.phx.ad.foo.com</a> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.phx.foo.com</a> .       15 ,      NetBIOS,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.phx</a> . <br><br><img src="https://habrastorage.org/webt/no/_e/1b/no_e1b8sp9sson1bcnn_6niyxrq.jpeg"><br><br>    Windows,   XP sp.3,      DNS ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.phx</a>  NetBIOS ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.phx</a> ,    ,   . <br><br><img src="https://habrastorage.org/webt/6r/0u/zg/6r0uzg3wsvjgu8tawcy_qsxg7ju.jpeg"><br><br>       ,    ,   ,     ,          ,    .  , ,  Microsoft   DNS. <br><br>  XP   ,  Microsoft    XP,     DNS   Windows   DNS    .   ,    www, Windows    ,  ,    ,    DHCP     Active Directory.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.phx.ad.foo.com</a> ,    ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.ad.foo.com</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.foo.com</a> , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.com</a>     . <br><br><img src="https://habrastorage.org/webt/ee/2q/ps/ee2qpsol_n0puvhe-8ay2ocihzq.jpeg"><br><br> 18:30  <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> DEFCON 21. DNS      .</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2e partie</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/9Sgaq6OYLX8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> ,    .  Aimez-vous nos articles?     ?       , <b>30%        entry-level ,      :</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   VPS (KVM) E5-2650 v4 (6 Cores) 10GB DDR4 240GB SSD 1Gbps  $20     ?</a> (   RAID1  RAID10,  24    40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 c≈ìurs) 10 Go DDR4 240 Go SSD 1 Gbit / s jusqu'en d√©cembre gratuitement</b> en payant pour une p√©riode de six mois, vous pouvez commander <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  <b>Dell R730xd 2 fois moins cher?</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons seulement </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel Dodeca-Core Xeon E5-2650v4 128 Go DDR4 6x480 Go SSD 1 Gbps 100 TV √† partir de 249 $</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aux Pays-Bas et aux √âtats-Unis! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour en savoir plus sur la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cr√©ation d'un b√¢timent d'infrastructure. </font><font style="vertical-align: inherit;">classe utilisant des serveurs Dell R730xd E5-2650 v4 co√ªtant 9 000 euros pour un sou?</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430724/">https://habr.com/ru/post/fr430724/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430712/index.html">NeurIPS: Comment conqu√©rir la meilleure conf√©rence ML</a></li>
<li><a href="../fr430714/index.html">VMware ach√®te Heptio - qu'est-ce que cela signifie pour Kubernetes</a></li>
<li><a href="../fr430718/index.html">Pour quels objets vaut-il la peine d'utiliser la vid√©osurveillance dans le cloud?</a></li>
<li><a href="../fr430720/index.html">Intel RealSense D435i: petite mise √† jour et courte digression historique</a></li>
<li><a href="../fr430722/index.html">Performances PHP: planification, profilage, optimisation</a></li>
<li><a href="../fr430728/index.html">Apprenez-moi √† donner mon avis</a></li>
<li><a href="../fr430730/index.html">Que fait R&D ABBYY: NLP Advanced Research Group</a></li>
<li><a href="../fr430732/index.html">√Ä la question de la division et de TI</a></li>
<li><a href="../fr430734/index.html">Mises √† jour intelligentes vs contrats intelligents</a></li>
<li><a href="../fr430736/index.html">D√©veloppez votre navigateur √† partir de z√©ro. Premi√®re partie: HTML</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>