<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“ ğŸ‘©ğŸ¼â€âš–ï¸ ğŸš– åœ¨Unityä¸­åˆ›å»ºå¡”é˜²ï¼šå¼¹é“å­¦ ğŸ‰ ğŸ§‘ğŸ¿â€ğŸ¤â€ğŸ§‘ğŸ» ğŸ˜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="[æ•™ç¨‹çš„ç¬¬ä¸€ ï¼Œ ç¬¬äºŒå’Œç¬¬ä¸‰éƒ¨åˆ†] 



- æ”¯æŒä¸åŒç±»å‹çš„å¡”ã€‚ 
- åˆ›å»ºç ‚æµ†å¡”ã€‚ 
- æŠ›ç‰©çº¿è½¨è¿¹çš„è®¡ç®—ã€‚ 
- å‘å°„çˆ†ç‚¸å¼¹ã€‚ 
 è¿™æ˜¯æœ‰å…³åˆ›å»ºç®€å•å¡”é˜²æ¸¸æˆçš„æ•™ç¨‹çš„ç¬¬å››éƒ¨åˆ†ã€‚ åœ¨å…¶ä¸­ï¼Œæˆ‘ä»¬å°†æ·»åŠ è¿«å‡»ç‚®å¡”ï¼Œåœ¨ç¢°æ’ä¸­å‘å°„å¼•çˆ†å¼¹ã€‚ 

 è¯¥æ•™ç¨‹æ˜¯åœ¨Unity 2018.4.4f1ä¸­åˆ›å»ºçš„ã€‚ 


 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>åœ¨Unityä¸­åˆ›å»ºå¡”é˜²ï¼šå¼¹é“å­¦</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461605/">  [æ•™ç¨‹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„ç¬¬ä¸€</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬äºŒ</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸‰</a>éƒ¨åˆ†] <br><br><ul><li> æ”¯æŒä¸åŒç±»å‹çš„å¡”ã€‚ </li><li> åˆ›å»ºç ‚æµ†å¡”ã€‚ </li><li> æŠ›ç‰©çº¿è½¨è¿¹çš„è®¡ç®—ã€‚ </li><li> å‘å°„çˆ†ç‚¸å¼¹ã€‚ </li></ul><br> è¿™æ˜¯æœ‰å…³åˆ›å»ºç®€å•<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¡”é˜²</a>æ¸¸æˆçš„æ•™ç¨‹çš„ç¬¬å››éƒ¨åˆ†ã€‚ åœ¨å…¶ä¸­ï¼Œæˆ‘ä»¬å°†æ·»åŠ è¿«å‡»ç‚®å¡”ï¼Œåœ¨ç¢°æ’ä¸­å‘å°„å¼•çˆ†å¼¹ã€‚ <br><br> è¯¥æ•™ç¨‹æ˜¯åœ¨Unity 2018.4.4f1ä¸­åˆ›å»ºçš„ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cee/22b/b28/cee22bb28fd043b06a81d046b1ca6ea8.jpg" width="512" height="256"></div><br>  <i>æ•Œäººè¢«ç‚¸ã€‚</i> <br><a name="habracut"></a><br><h2> å¡”çš„ç±»å‹ </h2><br> æ¿€å…‰å¹¶ä¸æ˜¯å”¯ä¸€å¯ä»¥æ”¾ç½®åœ¨ç‚®å¡”ä¸Šçš„æ­¦å™¨ã€‚ åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ·»åŠ ç¬¬äºŒç§ç±»å‹çš„å¡”ï¼Œè¯¥å¡”å°†åœ¨æ¥è§¦æ—¶å‘å°„çˆ†ç‚¸çš„ç‚®å¼¹ï¼Œå¯¹é™„è¿‘çš„æ‰€æœ‰æ•Œäººé€ æˆä¼¤å®³ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å„ç§ç±»å‹çš„å¡”çš„æ”¯æŒã€‚ <br><br><h3> æŠ½è±¡å¡” </h3><br> ç›®æ ‡æ£€æµ‹å’Œè·Ÿè¸ªæ˜¯ä»»ä½•å¡”æ¥¼å‡å¯ä½¿ç”¨çš„åŠŸèƒ½ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶æ”¾åœ¨å¡”æ¥¼çš„æŠ½è±¡åŸºç±»ä¸­ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬åªä½¿ç”¨<code>Tower</code>ç±»ï¼Œä½†é¦–å…ˆï¼Œå¤åˆ¶å…¶å†…å®¹ä»¥ä¾›ä»¥ååœ¨ç‰¹å®šçš„<code>LaserTower</code>ç±»ä¸­ä½¿ç”¨ã€‚ ç„¶åæˆ‘ä»¬ä»<code>Tower</code>åˆ é™¤æ‰€æœ‰ä¸æ¿€å…‰ç›¸å…³çš„ä»£ç ã€‚ å¡”æ¥¼å¯èƒ½æ— æ³•è·Ÿè¸ªç‰¹å®šç›®æ ‡ï¼Œå› æ­¤è¯·åˆ é™¤<code>target</code>å­—æ®µå¹¶æ›´æ”¹<code>AcquireTarget</code>å’Œ<code>TrackTarget</code>ä»¥ä¾¿å°†è¾“å‡ºå‚æ•°ç”¨ä½œé“¾æ¥å‚æ•°ã€‚ ç„¶åï¼Œæˆ‘ä»¬å°†ä»<code>OnDrawGizmosSelected</code>åˆ é™¤<code>OnDrawGizmosSelected</code>å¯è§†åŒ–ï¼Œä½†æ˜¯æˆ‘ä»¬å°†ä¿ç•™ç„å‡†èŒƒå›´ï¼Œå› ä¸ºå®ƒç”¨äºæ‰€æœ‰å¡”æ¥¼ã€‚ <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Tower</span></span> : <span class="hljs-title"><span class="hljs-title">GameTileContent</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> enemyLayerMask = <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">9</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Collider[] targetsBuffer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Collider[<span class="hljs-number"><span class="hljs-number">100</span></span>]; [SerializeField, Range(<span class="hljs-number"><span class="hljs-number">1.5f</span></span>, <span class="hljs-number"><span class="hljs-number">10.5f</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> targetingRange = <span class="hljs-number"><span class="hljs-number">1.5f</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AcquireTarget</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> TargetPoint target</span></span></span><span class="hljs-function">)</span></span> { â€¦ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TrackTarget</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> TargetPoint target</span></span></span><span class="hljs-function">)</span></span> { â€¦ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnDrawGizmosSelected</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Gizmos.color = Color.yellow; Vector3 position = transform.localPosition; position.y += <span class="hljs-number"><span class="hljs-number">0.01f</span></span>; Gizmos.DrawWireSphere(position, targetingRange); } }</code> </pre> <br> è®©æˆ‘ä»¬æ›´æ”¹é‡å¤çš„ç±»ï¼Œä»¥ä½¿å…¶å˜ä¸º<code>LaserTower</code> ï¼Œå®ƒæ‰©å±•<code>Tower</code>å¹¶ä½¿ç”¨å…¶åŸºç±»çš„åŠŸèƒ½ï¼Œä»è€Œæ¶ˆé™¤é‡å¤çš„ä»£ç ã€‚ <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">LaserTower</span></span> : <span class="hljs-title"><span class="hljs-title">Tower</span></span> { [SerializeField, Range(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">100f</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> damagePerSecond = <span class="hljs-number"><span class="hljs-number">10f</span></span>; [SerializeField] Transform turret = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, laserBeam = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; TargetPoint target; Vector3 laserBeamScale; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { laserBeamScale = laserBeam.localScale; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameUpdate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TrackTarget(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> target) || AcquireTarget(<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> target)) { Shoot(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { laserBeam.localScale = Vector3.zero; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Shoot</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { â€¦ } }</code> </pre> <br> ç„¶åæ›´æ–°æ¿€å…‰å¡”çš„é¢„åˆ¶ä»¶ä»¥ä½¿ç”¨æ–°ç»„ä»¶ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f61/cac/322/f61cac3227e3600f455bffca7ae3427a.png" width="320" height="130"></div><br>  <i>æ¿€å…‰å¡”çš„ç»„ä»¶ã€‚</i> <br><br><h3> åˆ›å»ºç‰¹å®šç±»å‹çš„å¡” </h3><br> ä¸ºäº†èƒ½å¤Ÿé€‰æ‹©è¦æ”¾ç½®åœ¨ç°åœºçš„å¡”ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªç±»ä¼¼äº<code>GameTileContentType</code>çš„<code>TowerType</code>æšä¸¾ã€‚ æˆ‘ä»¬å°†ä¸ºç°æœ‰çš„æ¿€å…‰å¡”å’Œè¿«å‡»ç‚®å¡”æä¾›æ”¯æŒï¼Œæˆ‘ä»¬å°†åœ¨ç¨ååˆ›å»ºã€‚ <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> TowerType { Laser, Mortar }</code> </pre> <br> ç”±äºæˆ‘ä»¬å°†ä¸ºæ¯ç§ç±»å‹çš„å¡”åˆ›å»ºä¸€ä¸ªç±»ï¼Œå› æ­¤å°†å‘å¡”æ·»åŠ ä¸€ä¸ªæŠ½è±¡çš„getterå±æ€§ä»¥æŒ‡ç¤ºå…¶ç±»å‹ã€‚ è¿™ä¸â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯¹è±¡ç®¡ç†â€</a>ç³»åˆ—æ•™ç¨‹ä¸­äººç‰©çš„è¡Œä¸ºç±»å‹ç›¸ä¼¼ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> TowerType TowerTypeâ‚¬ { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; }</code> </pre> <br> åœ¨<code>LaserTower</code>é‡æ–°å®šä¹‰å®ƒï¼Œä½¿å…¶è¿”å›æ­£ç¡®çš„ç±»å‹ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> TowerType TowerTypeâ‚¬ =&gt; TowerType.Laser;</code> </pre> <br> æ¥ä¸‹æ¥ï¼Œæ›´æ”¹<code>GameTileContentFactory</code>ä»¥ä¾¿å·¥å‚å¯ä»¥ç”Ÿäº§æ‰€éœ€ç±»å‹çš„å¡”ã€‚ æˆ‘ä»¬ä½¿ç”¨<code>TowerType</code>æ•°ç»„å®ç°æ­¤ç›®æ ‡ï¼Œå¹¶ä½¿ç”¨<code>TowerType</code>å‚æ•°æ·»åŠ æ›¿ä»£çš„å…¬å…±<code>Get</code>æ–¹æ³•ã€‚ ä¸ºäº†éªŒè¯é˜µåˆ—é…ç½®æ­£ç¡®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ–­è¨€ã€‚ ç°åœ¨ï¼Œå¦ä¸€ä¸ªå…¬å…±<code>Get</code>æ–¹æ³•å°†ä»…é€‚ç”¨äºæ²¡æœ‰å¡”çš„ç£è´´å†…å®¹ã€‚ <br><br><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] Tower[] towerPrefabs = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GameTileContent </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Get</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTileContentType type</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (type) { â€¦ } Debug.Assert(<span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"Unsupported non-tower type: "</span></span> + type); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GameTileContent </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Get</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TowerType type</span></span></span><span class="hljs-function">)</span></span> { Debug.Assert((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)type &lt; towerPrefabs.Length, <span class="hljs-string"><span class="hljs-string">"Unsupported tower type!"</span></span>); Tower prefab = towerPrefabs[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)type]; Debug.Assert(type == prefab.TowerTypeâ‚¬, <span class="hljs-string"><span class="hljs-string">"Tower prefab at wrong index!"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Get(prefab); }</code> </pre> <br> è¿”å›æœ€ç‰¹å®šçš„ç±»å‹æ˜¯åˆä¹é€»è¾‘çš„ï¼Œå› æ­¤ç†æƒ³æƒ…å†µä¸‹ï¼Œæ–°<code>Get</code>æ–¹æ³•çš„è¿”å›ç±»å‹åº”ä¸º<code>Tower</code> ã€‚ ä½†æ˜¯ç”¨äºå®ä¾‹åŒ–é¢„åˆ¶ä»¶çš„ç§æœ‰<code>Get</code>æ–¹æ³•è¿”å›<code>GameTileContent</code> ã€‚ åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥æ‰§è¡Œè½¬æ¢ï¼Œä¹Ÿå¯ä»¥ä½¿ç§æœ‰çš„<code>Get</code>æ–¹æ³•é€šç”¨ã€‚ è®©æˆ‘ä»¬é€‰æ‹©ç¬¬äºŒä¸ªé€‰é¡¹ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Tower </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Get</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TowerType type</span></span></span><span class="hljs-function">)</span></span> { â€¦ } T Get&lt;T&gt; (T prefab) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : GameTileContent { T instance = CreateGameObjectInstance(prefab); instance.OriginFactory = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> instance; }</code> </pre> <br> è™½ç„¶æˆ‘ä»¬åªæœ‰æ¿€å…‰å¡”ï¼Œä½†æˆ‘ä»¬å°†ä½¿å…¶æˆä¸ºå·¥å‚å¡”æ¶é˜µåˆ—ä¸­çš„å”¯ä¸€å…ƒç´ ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/13e/b55/14f/13eb5514f027062301183f1142e99412.png" width="320" height="150"></div><br>  <i>ä¸€ç³»åˆ—é¢„åˆ¶å¡”ã€‚</i> <br><br><h3> åˆ›å»ºç‰¹å®šå¡”ç±»å‹çš„å®ä¾‹ </h3><br> è¦åˆ›å»ºç‰¹å®šç±»å‹çš„å¡”ï¼Œæˆ‘ä»¬<code>GameBoard.ToggleTower</code> ï¼Œä½¿å…¶éœ€è¦<code>TowerType</code>å‚æ•°<code>TowerType</code>å…¶<code>TowerType</code>ç»™å·¥å‚ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToggleTower</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTile tile, TowerType towerType</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile.Content.Type == GameTileContentType.Towerâ‚¬) { â€¦ } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile.Content.Type == GameTileContentType.Empty) { tile.Content = contentFactory.Get(towerType); â€¦ } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile.Content.Type == GameTileContentType.Wall) { tile.Content = contentFactory.Get(towerType); updatingContent.Add(tile.Content); } }</code> </pre> <br> è¿™åˆ›é€ äº†ä¸€ä¸ªæ–°çš„æœºä¼šï¼šå¡”çš„çŠ¶æ€åœ¨å·²å­˜åœ¨æ—¶åˆ‡æ¢ï¼Œä½†æ˜¯å¡”çš„ç±»å‹å¤šç§å¤šæ ·ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåˆ‡æ¢åªæ˜¯åˆ é™¤äº†ç°æœ‰çš„å¡”ï¼Œä½†æ˜¯å°†å…¶æ›¿æ¢ä¸ºæ–°ç±»å‹æ˜¯åˆä¹é€»è¾‘çš„ï¼Œå› æ­¤è®©æˆ‘ä»¬å®ç°å®ƒã€‚ ç”±äºç£è´´ä»ç„¶å¾ˆå¿™ï¼Œå› æ­¤æ‚¨æ— éœ€å†æ¬¡æœç´¢è·¯å¾„ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile.Content.Type == GameTileContentType.Towerâ‚¬) { updatingContent.Remove(tile.Content); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (((Tower)tile.Content).TowerTypeâ‚¬ == towerType) { tile.Content = contentFactory.Get(GameTileContentType.Empty); FindPaths(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { tile.Content = contentFactory.Get(towerType); updatingContent.Add(tile.Content); } }</code> </pre> <br>  <code>Game</code>ç°åœ¨åº”è¯¥è·Ÿè¸ªå¯åˆ‡æ¢å¡”çš„ç±»å‹ã€‚ æˆ‘ä»¬ä»…ç”¨æ•°å­—è¡¨ç¤ºæ¯ç§ç±»å‹çš„å¡”ã€‚ æ¿€å…‰å¡”æ˜¯1ï¼Œå°†æ˜¯é»˜è®¤å¡”ï¼Œç°æµ†å¡”æ˜¯2ã€‚æŒ‰æ•°å­—é”®ï¼Œæˆ‘ä»¬å°†é€‰æ‹©åˆé€‚çš„å¡”ç±»å‹ã€‚ <br><br><pre> <code class="cs hljs"> TowerType selectedTowerType; â€¦ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { â€¦ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKeyDown(KeyCode.G)) { board.ShowGrid = !board.ShowGrid; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKeyDown(KeyCode.Alpha1)) { selectedTowerType = TowerType.Laser; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKeyDown(KeyCode.Alpha2)) { selectedTowerType = TowerType.Mortar; } â€¦ } â€¦ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleTouch</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameTile tile = board.GetTile(TouchRay); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tile != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.LeftShift)) { board.ToggleTower(tile, selectedTowerType); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { board.ToggleWall(tile); } } }</code> </pre> <br><h3> ç ‚æµ†å¡” </h3><br> ç”±äºå°šæœªå®‰è£…é¢„åˆ¶ç ‚æµ†å¡”ï¼Œå› æ­¤å°šæ— æ³•æ”¾ç½®ã€‚ è®©æˆ‘ä»¬ä»åˆ›å»ºæœ€å°çš„<code>MortarTower</code>ç±»å‹å¼€å§‹ã€‚ è¿«å‡»ç‚®çš„å‘å°„é¢‘ç‡å¾ˆé«˜ï¼Œä»¥æŒ‡ç¤ºæ‚¨å¯ä»¥ä½¿ç”¨â€œæ¯ç§’å‘å°„â€é…ç½®å­—æ®µã€‚ å¦å¤–ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé“¾æ¥åˆ°è¿«å‡»ç‚®ï¼Œä»¥ä¾¿ç„å‡†ã€‚ <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MortarTower</span></span> : <span class="hljs-title"><span class="hljs-title">Tower</span></span> { [SerializeField, Range(<span class="hljs-number"><span class="hljs-number">0.5f</span></span>, <span class="hljs-number"><span class="hljs-number">2f</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> shotsPerSecond = <span class="hljs-number"><span class="hljs-number">1f</span></span>; [SerializeField] Transform mortar = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> TowerType TowerTypeâ‚¬ =&gt; TowerType.Mortar; }</code> </pre> <br> ç°åœ¨ä¸ºç ‚æµ†å¡”åˆ›å»ºä¸€ä¸ªé¢„åˆ¶ä»¶ã€‚ è¿™å¯ä»¥é€šè¿‡å¤åˆ¶æ¿€å…‰å¡”çš„é¢„åˆ¶ä»¶å¹¶æ›´æ¢å…¶å¡”ç»„ä»¶æ¥å®Œæˆã€‚ ç„¶åæˆ‘ä»¬æ‘†è„±äº†å¡”çš„ç‰©ä½“å’Œæ¿€å…‰æŸã€‚ å°†<code>turret</code>é‡å‘½åä¸º<code>mortar</code> ï¼Œå‘ä¸‹ç§»åŠ¨ï¼Œä½¿å…¶ç«‹äºåº•åº§é¡¶éƒ¨ï¼Œä½¿å…¶å‘ˆæµ…ç°è‰²å¹¶è¿æ¥ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å•ç‹¬çš„å¯¹è±¡ç¦»å¼€è¿«å‡»ç‚®å¯¹æ’æœºï¼Œè¯¥å¯¹è±¡æ˜¯å åŠ åœ¨è¿«å‡»ç‚®é»˜è®¤æ–¹å‘ä¸Šçš„ç®€å•å¯¹æ’æœºã€‚ æˆ‘åˆ†é…çš„è¿«å‡»ç‚®å°„ç¨‹ä¸º3.5ï¼Œé¢‘ç‡ä¸ºæ¯ç§’1å‘ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/16f/fdf/176/16ffdf1760e7ba7c9fe8455e51e36e7e.png" width="180" height="180" alt="åœºæ™¯"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ffd/c8b/db0/ffdc8bdb0ac0b4f3d49b3f16fe0656a5.png" width="226" height="66" alt="ç­‰çº§åˆ¶"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/590/8cf/b18/5908cfb180527766e93968d70e744b4d.png" width="320" height="112" alt="æ£€æŸ¥å‘˜"></div><br>  <i>ç ‚æµ†å¡”çš„é¢„åˆ¶ä»¶ã€‚</i> <br><br><div class="spoiler">  <b class="spoiler_title">ä»–ä»¬ä¸ºä»€ä¹ˆå«è¿«å‡»ç‚®ï¼Ÿ</b> <div class="spoiler_text"> è¿™ç§æ­¦å™¨çš„ç¬¬ä¸€ä¸ªå˜ç§åŸºæœ¬ä¸Šæ˜¯é“é’µï¼Œç±»ä¼¼äºç ”é’µï¼Œå…¶ä¸­çš„æˆåˆ†æ˜¯ä½¿ç”¨æµç ”ç£¨çš„ã€‚ </div></div><br> å°†é¢„åˆ¶ç ‚æµ†æ·»åŠ åˆ°å·¥å‚é˜µåˆ—ä¸­ï¼Œä»¥ä¾¿å¯ä»¥åœ¨ç°åœºæ”¾ç½®ç ‚æµ†å¡”ã€‚ ä½†æ˜¯ï¼Œä»–ä»¬è¿˜æ²¡æœ‰åšä»»ä½•äº‹æƒ…ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1a0/9bd/029/1a09bd029c089572ce9542aeb2eff599.png" width="320" height="74" alt="æ£€æŸ¥å‘˜"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/78b/7f1/979/78b7f19793909d4598161ac7cad87901.png" width="230" height="230" alt="åœºæ™¯"></div><br>  <i>ä¸¤ç§ç±»å‹çš„å¡”ï¼Œå…¶ä¸­ä¸€ç§ä¸æ´»åŠ¨</i> <br><br><h2> è½¨è¿¹è®¡ç®— </h2><br> è«å°”è’‚æ‹‰ä»¥ä¸€å®šè§’åº¦å°„å‡»ç‚®å¼¹ï¼Œä½¿ä»–é£è¶Šéšœç¢ç‰©å¹¶ä»ä¸Šæ–¹å‡»ä¸­ç›®æ ‡ã€‚ é€šå¸¸ï¼Œä½¿ç”¨çš„ç‚®å¼¹åœ¨ä¸ç›®æ ‡ç¢°æ’æ—¶ä¼šçˆ†ç‚¸ã€‚ ä¸ºäº†ä¸ä½¿äº‹ç‰©å¤æ‚åŒ–ï¼Œæˆ‘ä»¬å°†å§‹ç»ˆç„å‡†åœ°é¢ï¼Œä»¥ä½¿å£³ä½“çš„é«˜åº¦ä¸‹é™åˆ°é›¶æ—¶ä¼šçˆ†ç‚¸ã€‚ <br><br><h3> æ°´å¹³ç„å‡† </h3><br> ä¸ºäº†ç„å‡†è¿«å‡»ç‚®ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æ°´å¹³æŒ‡å‘ç›®æ ‡ï¼Œç„¶åæ”¹å˜å…¶å‚ç›´ä½ç½®ï¼Œä½¿å¼¹ä¸¸ä»¥æ­£ç¡®çš„è·ç¦»ç€é™†ã€‚ æˆ‘ä»¬å°†ä»ç¬¬ä¸€æ­¥å¼€å§‹ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å›ºå®šçš„ç›¸å¯¹ç‚¹ï¼Œè€Œä¸æ˜¯ç§»åŠ¨çš„ç›®æ ‡ï¼Œä»¥ç¡®ä¿æˆ‘ä»¬çš„è®¡ç®—æ­£ç¡®ã€‚ <br><br> å‘<code>GameUpdate</code>æ·»åŠ ä¸€ä¸ª<code>MortarTower</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å§‹ç»ˆè°ƒç”¨<code>Launch</code>æ–¹æ³•ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å°†å¯è§†åŒ–æ•°å­¦è®¡ç®—ï¼Œè€Œä¸æ˜¯å‘å°„çœŸå®çš„å¼¹ä¸¸ã€‚ ç€ç«ç‚¹æ˜¯ç ‚æµ†åœ¨ä¸–ç•Œä¸Šçš„ä½ç½®ï¼Œå®ƒä½äºåœ°é¢ä¸Šæ–¹ã€‚ æˆ‘ä»¬å°†ç›®æ ‡çš„ç‚¹æ²¿Xè½´æ”¾ç½®åœ¨è·å…¶ä¸‰ä¸ªå•ä½çš„ä½ç½®ï¼Œå¹¶å°†Yåˆ†é‡å½’é›¶ï¼Œå› ä¸ºæˆ‘ä»¬å§‹ç»ˆç„å‡†åœ°é¢ã€‚ ç„¶åï¼Œæˆ‘ä»¬å°†é€šè¿‡è°ƒç”¨<code>Debug.DrawLine</code>åœ¨å®ƒä»¬ä¹‹é—´<code>Debug.DrawLine</code>é»„çº¿æ¥æ˜¾ç¤ºè¿™äº›ç‚¹ã€‚ è¯¥çº¿å°†åœ¨åœºæ™¯æ¨¡å¼ä¸‹æ˜¾ç¤ºä¸€å¸§ï¼Œä½†è¿™å·²ç»è¶³å¤Ÿäº†ï¼Œå› ä¸ºåœ¨æ¯ä¸€å¸§ä¸­æˆ‘ä»¬éƒ½ç»˜åˆ¶äº†ä¸€æ¡æ–°çº¿ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameUpdate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Launch(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Launch</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Vector3 launchPoint = mortar.position; Vector3 targetPoint = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(launchPoint.x + <span class="hljs-number"><span class="hljs-number">3f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, launchPoint.z); Debug.DrawLine(launchPoint, targetPoint, Color.yellow); }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cfc/d13/419/cfcd134191102e009ca1c0702c473515.png" width="310" height="120"></div><br>  <i>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç›¸å¯¹äºå¡”å›ºå®šçš„ç‚¹ã€‚</i> <br><br> ä½¿ç”¨è¿™æ¡çº¿ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªç›´è§’ä¸‰è§’å½¢ã€‚ ä»–çš„æœ€é«˜ç‚¹åœ¨è¿«å‡»ç‚®ä½ç½®ã€‚ å…³äºç ‚æµ†ï¼Œè¿™æ˜¯ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mtext" id="MJXp-Span-2" style="color: red;">\å¼€</span><span class="MJXp-mrow" id="MJXp-Span-3"><span class="MJXp-mo" id="MJXp-Span-4" style="margin-left: 0.278em; margin-right: 0.278em;">å§‹</span></span><span class="MJXp-mrow" id="MJXp-Span-5"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-11">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12">x</span></span><span class="MJXp-mn" id="MJXp-Span-13">0</span><span class="MJXp-mspace" id="MJXp-Span-14" style="width: 0em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-15">0</span><span class="MJXp-mtext" id="MJXp-Span-16" style="color: red;">\ç»“</span><span class="MJXp-mrow" id="MJXp-Span-17"><span class="MJXp-mo" id="MJXp-Span-18" style="margin-left: 0.278em; margin-right: 0.278em;">æŸ</span></span><span class="MJXp-mrow" id="MJXp-Span-19"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-26">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-1"> \å¼€å§‹{bmatrix} 0 \\ 0 \ç»“æŸ{bmatrix} </script>  ã€‚ åœ¨å¡”åº•çš„ä¸‹é¢çš„ç‚¹æ˜¯ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-27"><span class="MJXp-mtext" id="MJXp-Span-28" style="color: red;">\å¼€</span><span class="MJXp-mrow" id="MJXp-Span-29"><span class="MJXp-mo" id="MJXp-Span-30" style="margin-left: 0.278em; margin-right: 0.278em;">å§‹</span></span><span class="MJXp-mrow" id="MJXp-Span-31"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-34">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38">x</span></span><span class="MJXp-mn" id="MJXp-Span-39">0</span><span class="MJXp-mspace" id="MJXp-Span-40" style="width: 0em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-41">y</span><span class="MJXp-mtext" id="MJXp-Span-42" style="color: red;">\ç»“</span><span class="MJXp-mrow" id="MJXp-Span-43"><span class="MJXp-mo" id="MJXp-Span-44" style="margin-left: 0.278em; margin-right: 0.278em;">æŸ</span></span><span class="MJXp-mrow" id="MJXp-Span-45"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-2"> \å¼€å§‹{bmatrix} 0 \\ y \ç»“æŸ{bmatrix} </script>  ï¼Œç›®æ ‡æ˜¯ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-53"><span class="MJXp-mtext" id="MJXp-Span-54" style="color: red;">\å¼€</span><span class="MJXp-mrow" id="MJXp-Span-55"><span class="MJXp-mo" id="MJXp-Span-56" style="margin-left: 0.278em; margin-right: 0.278em;">å§‹</span></span><span class="MJXp-mrow" id="MJXp-Span-57"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">x</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65">x</span><span class="MJXp-mspace" id="MJXp-Span-66" style="width: 0em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67">y</span><span class="MJXp-mtext" id="MJXp-Span-68" style="color: red;">\ç»“</span><span class="MJXp-mrow" id="MJXp-Span-69"><span class="MJXp-mo" id="MJXp-Span-70" style="margin-left: 0.278em; margin-right: 0.278em;">æŸ</span></span><span class="MJXp-mrow" id="MJXp-Span-71"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-75">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-76">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-3"> \å¼€å§‹{bmatrix} x \\ y \ç»“æŸ{bmatrix} </script> åœ¨å“ªé‡Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-79"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">x</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-4"> x </script> ç­‰äº3ï¼Œå¹¶ä¸” <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-81"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82">y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-5"> y </script> æ˜¯ç ‚æµ†çš„è´Ÿå‚ç›´ä½ç½®ã€‚ æˆ‘ä»¬éœ€è¦è·Ÿè¸ªè¿™ä¸¤ä¸ªå€¼ã€‚ <br><br><pre> <code class="cs hljs"> Vector3 launchPoint = mortar.position; Vector3 targetPoint = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(launchPoint.x + <span class="hljs-number"><span class="hljs-number">3f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, launchPoint.z); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x = <span class="hljs-number"><span class="hljs-number">3f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> y = -launchPoint.y;</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ced/090/37c/ced09037c908b7a17505e21674cca0b8.png" width="225" height="125"></div><br>  <i>ä¸‰è§’ç„å‡†ã€‚</i> <br><br> é€šå¸¸ï¼Œç›®æ ‡å¯ä»¥åœ¨å‘å°„å¡”èŒƒå›´å†…çš„ä»»ä½•ä½ç½®ï¼Œå› æ­¤è¿˜å¿…é¡»è€ƒè™‘Zã€‚ ä½†æ˜¯ï¼Œç„å‡†ä¸‰è§’å½¢ä»ç„¶ä¿æŒäºŒç»´ï¼Œå®ƒä»…ç»•Yè½´æ—‹è½¬ï¼Œä¸ºè¯´æ˜è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†åœ¨<code>Launch</code>æ·»åŠ ç›¸å¯¹ä½ç§»çŸ¢é‡çš„å‚æ•°ï¼Œå¹¶åœ¨XZä¸­å°†å…¶ç§°ä¸ºå››ä¸ªä½ç§»ï¼š <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-83"><span class="MJXp-mtext" id="MJXp-Span-84" style="color: red;">\å¼€</span><span class="MJXp-mrow" id="MJXp-Span-85"><span class="MJXp-mo" id="MJXp-Span-86" style="margin-left: 0.278em; margin-right: 0.278em;">å§‹</span></span><span class="MJXp-mrow" id="MJXp-Span-87"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-92">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">x</span></span><span class="MJXp-mn" id="MJXp-Span-95">3</span><span class="MJXp-mspace" id="MJXp-Span-96" style="width: 0em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-97">0</span><span class="MJXp-mtext" id="MJXp-Span-98" style="color: red;">\ç»“</span><span class="MJXp-mrow" id="MJXp-Span-99"><span class="MJXp-mo" id="MJXp-Span-100" style="margin-left: 0.278em; margin-right: 0.278em;">æŸ</span></span><span class="MJXp-mrow" id="MJXp-Span-101"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-6"> \å¼€å§‹{bmatrix} 3 \\ 0 \ç»“æŸ{bmatrix} </script>  ï¼Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-109"><span class="MJXp-mtext" id="MJXp-Span-110" style="color: red;">\å¼€</span><span class="MJXp-mrow" id="MJXp-Span-111"><span class="MJXp-mo" id="MJXp-Span-112" style="margin-left: 0.278em; margin-right: 0.278em;">å§‹</span></span><span class="MJXp-mrow" id="MJXp-Span-113"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">x</span></span><span class="MJXp-mn" id="MJXp-Span-121">0</span><span class="MJXp-mspace" id="MJXp-Span-122" style="width: 0em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-123">1</span><span class="MJXp-mtext" id="MJXp-Span-124" style="color: red;">\ç»“</span><span class="MJXp-mrow" id="MJXp-Span-125"><span class="MJXp-mo" id="MJXp-Span-126" style="margin-left: 0.278em; margin-right: 0.278em;">æŸ</span></span><span class="MJXp-mrow" id="MJXp-Span-127"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-7"> \å¼€å§‹{bmatrix} 0 \\ 1 \ç»“æŸ{bmatrix} </script>  ï¼Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-135"><span class="MJXp-mtext" id="MJXp-Span-136" style="color: red;">\å¼€</span><span class="MJXp-mrow" id="MJXp-Span-137"><span class="MJXp-mo" id="MJXp-Span-138" style="margin-left: 0.278em; margin-right: 0.278em;">å§‹</span></span><span class="MJXp-mrow" id="MJXp-Span-139"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">x</span></span><span class="MJXp-mn" id="MJXp-Span-147">1</span><span class="MJXp-mspace" id="MJXp-Span-148" style="width: 0em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-149">1</span><span class="MJXp-mtext" id="MJXp-Span-150" style="color: red;">\ç»“</span><span class="MJXp-mrow" id="MJXp-Span-151"><span class="MJXp-mo" id="MJXp-Span-152" style="margin-left: 0.278em; margin-right: 0.278em;">æŸ</span></span><span class="MJXp-mrow" id="MJXp-Span-153"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-154">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-155">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-156">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-157">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-159">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-160">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-8"> \å¼€å§‹{bmatrix} 1 \\ 1 \ç»“æŸ{bmatrix} </script> å’Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-161"><span class="MJXp-mtext" id="MJXp-Span-162" style="color: red;">\å¼€</span><span class="MJXp-mrow" id="MJXp-Span-163"><span class="MJXp-mo" id="MJXp-Span-164" style="margin-left: 0.278em; margin-right: 0.278em;">å§‹</span></span><span class="MJXp-mrow" id="MJXp-Span-165"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-166">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-169">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-171">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">x</span></span><span class="MJXp-mn" id="MJXp-Span-173">3</span><span class="MJXp-mspace" id="MJXp-Span-174" style="width: 0em; height: 0em;"></span><span class="MJXp-mn" id="MJXp-Span-175">1</span><span class="MJXp-mtext" id="MJXp-Span-176" style="color: red;">\ç»“</span><span class="MJXp-mrow" id="MJXp-Span-177"><span class="MJXp-mo" id="MJXp-Span-178" style="margin-left: 0.278em; margin-right: 0.278em;">æŸ</span></span><span class="MJXp-mrow" id="MJXp-Span-179"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-9"> \å¼€å§‹{bmatrix} 3 \\ 1 \ç»“æŸ{bmatrix} </script>  ã€‚ å½“ç„å‡†ç‚¹ç­‰äºå°„å‡»ç‚¹åŠ ä¸Šæ­¤åç§»é‡æ—¶ï¼Œå…¶Yåæ ‡å°†å˜ä¸ºé›¶ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameUpdate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Launch(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(<span class="hljs-number"><span class="hljs-number">3f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>)); Launch(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>)); Launch(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>)); Launch(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(<span class="hljs-number"><span class="hljs-number">3f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Launch</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 offset</span></span></span><span class="hljs-function">)</span></span> { Vector3 launchPoint = mortar.position; Vector3 targetPoint = launchPoint + offset; targetPoint.y = <span class="hljs-number"><span class="hljs-number">0f</span></span>; â€¦ }</code> </pre> <br> ç°åœ¨ï¼Œç„å‡†ä¸‰è§’å½¢çš„xç­‰äºä»å¡”çš„åº•éƒ¨æŒ‡å‘ç„å‡†ç‚¹çš„2DçŸ¢é‡çš„é•¿åº¦ã€‚ é€šè¿‡å¯¹è¯¥å‘é‡è¿›è¡Œå½’ä¸€åŒ–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è·å¾—XZæ–¹å‘å‘é‡ï¼Œè¯¥å‘é‡å¯ç”¨äºå¯¹é½ä¸‰è§’å½¢ã€‚ æ‚¨å¯ä»¥é€šè¿‡å°†ä¸‰è§’å½¢çš„åº•éƒ¨ç»˜åˆ¶ä¸ºä»æ–¹å‘å’Œxè·å¾—çš„ç™½çº¿æ¥æ˜¾ç¤ºå®ƒã€‚ <br><br><pre> <code class="cs hljs"> Vector2 dir; dir.x = targetPoint.x - launchPoint.x; dir.y = targetPoint.z - launchPoint.z; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x = dir.magnitude; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> y = -launchPoint.y; dir /= x; Debug.DrawLine(launchPoint, targetPoint, Color.yellow); Debug.DrawLine( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(launchPoint.x, <span class="hljs-number"><span class="hljs-number">0.01f</span></span>, launchPoint.z), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3( launchPoint.x + dir.x * x, <span class="hljs-number"><span class="hljs-number">0.01f</span></span>, launchPoint.z + dir.y * x ), Color.white );</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a82/307/6b6/a823076b66a14c4799be25436768a5b2.png" width="310" height="120"></div><br>  <i>å¯¹é½çš„ç„å‡†ä¸‰è§’å½¢ã€‚</i> <br><br><h3> å°„è§’ </h3><br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åº”è¯¥æ‰¾å‡ºå°„å¼¹çš„è§’åº¦ã€‚ æœ‰å¿…è¦ä»å¼¹ä¸¸è½¨è¿¹çš„ç‰©ç†å­¦ä¸­å¾—å‡ºå®ƒã€‚ æˆ‘ä»¬å°†ä¸è€ƒè™‘é˜»åŠ›ï¼Œé£é˜»å’Œå…¶ä»–éšœç¢ï¼Œä»…è€ƒè™‘å°„å‡»é€Ÿåº¦ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-187"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">v</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-10"> v </script> å’Œé‡åŠ› <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-189"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-190">g</span><span class="MJXp-mo" id="MJXp-Span-191" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-192">9.81</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-11"> g = 9.81 </script>  ã€‚ <br><br> åç§»é‡ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-193"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-194">d</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-12"> d </script> å°„å¼¹ä¸ç„å‡†ä¸‰è§’å½¢æˆä¸€ç›´çº¿ï¼Œå¹¶ä¸”å¯ä»¥ç”±ä¸¤ä¸ªéƒ¨åˆ†æ¥æè¿°ã€‚ ä½¿ç”¨æ°´å¹³ä½ç§»ï¼Œå¾ˆç®€å•ï¼š <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-195"><span class="MJXp-msubsup" id="MJXp-Span-196"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-197" style="margin-right: 0.05em;">d</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-198" style="vertical-align: -0.4em;">x</span></span><span class="MJXp-mo" id="MJXp-Span-199" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-200"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201" style="margin-right: 0.05em;">v</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-202" style="vertical-align: -0.4em;">x</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-13"> d_x = v_xt </script> åœ¨å“ªé‡Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-204"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-14"> t </script>  -å°„å‡»åçš„æ—¶é—´ã€‚ å¯¹äºå‚ç›´åˆ†é‡ï¼Œä¸€åˆ‡éƒ½ç›¸ä¼¼ï¼Œç„¶åç”±äºé‡åŠ›è€Œå—åˆ°è´ŸåŠ é€Ÿåº¦ï¼Œå› æ­¤å®ƒå…·æœ‰ä»¥ä¸‹å½¢å¼ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-206"><span class="MJXp-msubsup" id="MJXp-Span-207"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208" style="margin-right: 0.05em;">d</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-209" style="vertical-align: -0.4em;">y</span></span><span class="MJXp-mo" id="MJXp-Span-210" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-211"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212" style="margin-right: 0.05em;">v</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-213" style="vertical-align: -0.4em;">y</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">t</span><span class="MJXp-mo" id="MJXp-Span-215" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mrow" id="MJXp-Span-216"><span class="MJXp-mo" id="MJXp-Span-217" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218">g</span><span class="MJXp-msubsup" id="MJXp-Span-219"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220" style="margin-right: 0.05em;">t</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-221" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-222"><span class="MJXp-mo" id="MJXp-Span-223" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-224"><span class="MJXp-mo" id="MJXp-Span-225" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-226">2</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-15"> d_y = v_yt-ï¼ˆg t ^ 2ï¼‰/ 2 </script>  ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">åç§»é‡è®¡ç®—å¦‚ä½•æ‰§è¡Œï¼Ÿ</b> <div class="spoiler_text"> é€Ÿåº¦ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-227"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">v</span></span></span><script type="math/tex" id="MathJax-Element-16"> v </script> ç”±æ¯ç§’çš„è·ç¦»ç¡®å®šï¼Œå› æ­¤ï¼Œå°†é€Ÿåº¦ä¹˜ä»¥æŒç»­æ—¶é—´ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-229"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">t</span></span></span><script type="math/tex" id="MathJax-Element-17"> t </script> æˆ‘ä»¬å¾—åˆ°äº†è·ç¦» <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-231"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">d</span><span class="MJXp-mo" id="MJXp-Span-233" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-235">t</span></span></span><script type="math/tex" id="MathJax-Element-18"> d = vt </script>  ã€‚ å½“æ¶‰åŠåŠ é€Ÿæ—¶ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-236"><span class="MJXp-mrow" id="MJXp-Span-237"><span class="MJXp-mo" id="MJXp-Span-238" style="margin-left: 0.278em; margin-right: 0.278em;">ä¸€</span></span></span></span><script type="math/tex" id="MathJax-Element-19">ä¸€</script>  ï¼Œé€Ÿåº¦æ˜¯å¯å˜çš„ã€‚ åŠ é€Ÿåº¦æ˜¯æ¯ç§’é€Ÿåº¦çš„å˜åŒ–ï¼Œå³æ¯ç§’çš„è·ç¦»çš„å¹³æ–¹ã€‚ åœ¨ä»»ä½•æ—¶å€™ï¼Œé€Ÿåº¦éƒ½æ˜¯ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-239"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240">v</span><span class="MJXp-mo" id="MJXp-Span-241" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-242"><span class="MJXp-mo" id="MJXp-Span-243" style="margin-left: 0.278em; margin-right: 0.278em;">åœ¨</span></span></span></span><script type="math/tex" id="MathJax-Element-20"> v =åœ¨</script>  ã€‚ åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼ŒæŒç»­ä¸æ–­çš„åŠ é€Ÿ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-244"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-245">a</span><span class="MJXp-mo" id="MJXp-Span-246" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-247" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248">g</span></span></span><script type="math/tex" id="MathJax-Element-21"> a = -g </script>  ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†å…¶é™¤ä»¥ä¸€åŠä»¥è·å¾—å¹³å‡é€Ÿåº¦ï¼Œç„¶åä¹˜ä»¥æ—¶é—´ä»¥æ‰¾åˆ°åç§»é‡ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-249"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">d</span><span class="MJXp-mo" id="MJXp-Span-251" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-252"><span class="MJXp-mo" id="MJXp-Span-253" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-254">a</span><span class="MJXp-msubsup" id="MJXp-Span-255"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256" style="margin-right: 0.05em;">t</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-257" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-258"><span class="MJXp-mo" id="MJXp-Span-259" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-260"><span class="MJXp-mo" id="MJXp-Span-261" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-262">2</span></span></span><script type="math/tex" id="MathJax-Element-22"> d =ï¼ˆat ^ 2ï¼‰/ 2 </script> ç”±é‡åŠ›å¼•èµ·ã€‚ </div></div><br> æˆ‘ä»¬ä»¥ç›¸åŒçš„é€Ÿåº¦å°„å‡»ç‚®å¼¹ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-263"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> s </script> è¿™ä¸å–å†³äºæ‹æ‘„è§’åº¦ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-265"><span class="MJXp-mtext" id="MJXp-Span-266">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-268">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-270">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> \ theta </script>  ï¼ˆÎ¸ï¼‰ã€‚ é‚£æ˜¯ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-272"><span class="MJXp-msubsup" id="MJXp-Span-273"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274" style="margin-right: 0.05em;">v</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-275" style="vertical-align: -0.4em;">x</span></span><span class="MJXp-mo" id="MJXp-Span-276" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277">s</span><span class="MJXp-mtext" id="MJXp-Span-278">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-280">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">s</span><span class="MJXp-mtext" id="MJXp-Span-282">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-283">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-284">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-285">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-286">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-287">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> v_x = s \ cos \ theta </script> å’Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-288"><span class="MJXp-msubsup" id="MJXp-Span-289"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-290" style="margin-right: 0.05em;">v</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-291" style="vertical-align: -0.4em;">y</span></span><span class="MJXp-mo" id="MJXp-Span-292" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-293">s</span><span class="MJXp-mtext" id="MJXp-Span-294">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-296">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297">n</span><span class="MJXp-mtext" id="MJXp-Span-298">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-299">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-301">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-303">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-26"> v_y = s \ sin \ theta </script>  ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a1/ee3/7ee/4a1ee37ee06a0b9271cfc5dbab0e22aa.png" width="225" height="125"></div><br>  <i>å°„å‡»é€Ÿåº¦çš„è®¡ç®—ã€‚</i> <br><br> æ‰§è¡Œæ›¿æ¢ï¼Œæˆ‘ä»¬å¾—åˆ° <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-304"><span class="MJXp-msubsup" id="MJXp-Span-305"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-306" style="margin-right: 0.05em;">d</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-307" style="vertical-align: -0.4em;">x</span></span><span class="MJXp-mo" id="MJXp-Span-308" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-309">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-310">t</span><span class="MJXp-mtext" id="MJXp-Span-311">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-312">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-313">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-314">s</span><span class="MJXp-mtext" id="MJXp-Span-315">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-316">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> d_x = st \ cos \ theta </script> å’Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-321"><span class="MJXp-msubsup" id="MJXp-Span-322"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323" style="margin-right: 0.05em;">d</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-324" style="vertical-align: -0.4em;">y</span></span><span class="MJXp-mo" id="MJXp-Span-325" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-326">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327">t</span><span class="MJXp-mtext" id="MJXp-Span-328">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-329">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-331">n</span><span class="MJXp-mtext" id="MJXp-Span-332">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-333">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-336">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">a</span><span class="MJXp-mo" id="MJXp-Span-338" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mrow" id="MJXp-Span-339"><span class="MJXp-mo" id="MJXp-Span-340" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-341">g</span><span class="MJXp-msubsup" id="MJXp-Span-342"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343" style="margin-right: 0.05em;">t</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-344" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-345"><span class="MJXp-mo" id="MJXp-Span-346" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-347"><span class="MJXp-mo" id="MJXp-Span-348" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-349">2</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> d_y = st \ sin \ theta-ï¼ˆg t ^ 2ï¼‰/ 2 </script>  ã€‚ <br><br> å‘å°„å­å¼¹ï¼Œä½¿å…¶é£è¡Œæ—¶é—´ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-350"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> t </script> æ˜¯å®ç°ç›®æ ‡æ‰€éœ€çš„ç¡®åˆ‡ä»·å€¼ã€‚ ç”±äºä½¿ç”¨æ°´å¹³ä½ç§»æ›´å®¹æ˜“ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ—¶é—´è¡¨ç¤ºä¸º <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-352"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353">t</span><span class="MJXp-mo" id="MJXp-Span-354" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-355"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356" style="margin-right: 0.05em;">d</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-357" style="vertical-align: -0.4em;">x</span></span><span class="MJXp-mrow" id="MJXp-Span-358"><span class="MJXp-mo" id="MJXp-Span-359" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-msubsup" id="MJXp-Span-360"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-361" style="margin-right: 0.05em;">v</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-362" style="vertical-align: -0.4em;">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30"> t = d_x / v_x </script>  ã€‚ åœ¨ç»ˆç‚¹ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-363"><span class="MJXp-msubsup" id="MJXp-Span-364"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-365" style="margin-right: 0.05em;">d</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-366" style="vertical-align: -0.4em;">x</span></span><span class="MJXp-mo" id="MJXp-Span-367" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-368">x</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31"> d_x = x </script> é‚£å°±æ˜¯ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-369"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370">t</span><span class="MJXp-mo" id="MJXp-Span-371" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-372">x</span><span class="MJXp-mrow" id="MJXp-Span-373"><span class="MJXp-mo" id="MJXp-Span-374" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-375"><span class="MJXp-mo" id="MJXp-Span-376" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-377">s</span><span class="MJXp-mtext" id="MJXp-Span-378">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-380">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381">s</span><span class="MJXp-mtext" id="MJXp-Span-382">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-383">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-384">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-385">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-386">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-387">a</span><span class="MJXp-mrow" id="MJXp-Span-388"><span class="MJXp-mo" id="MJXp-Span-389" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32"> t = x /ï¼ˆs \ cos \ thetaï¼‰</script>  ã€‚ è¿™æ„å‘³ç€ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-390"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-391">y</span><span class="MJXp-mo" id="MJXp-Span-392" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393">x</span><span class="MJXp-mtext" id="MJXp-Span-394">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-395">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-397">n</span><span class="MJXp-mtext" id="MJXp-Span-398">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-399">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-400">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-401">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-402">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403">a</span><span class="MJXp-mo" id="MJXp-Span-404" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mrow" id="MJXp-Span-405"><span class="MJXp-mo" id="MJXp-Span-406" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-407">g</span><span class="MJXp-msubsup" id="MJXp-Span-408"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-410" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-411"><span class="MJXp-mo" id="MJXp-Span-412" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-413"><span class="MJXp-mo" id="MJXp-Span-414" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-415"><span class="MJXp-mo" id="MJXp-Span-416" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mn" id="MJXp-Span-417">2</span><span class="MJXp-msubsup" id="MJXp-Span-418"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-420" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-421">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-422">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-423">o</span><span class="MJXp-msubsup" id="MJXp-Span-424"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-426" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-427">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-429">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-430">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-431">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-432">a</span><span class="MJXp-mrow" id="MJXp-Span-433"><span class="MJXp-mo" id="MJXp-Span-434" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33"> y = x \ tan \ theta-ï¼ˆgx ^ 2ï¼‰/ï¼ˆ2s ^ 2 \ cos ^ 2 \ thetaï¼‰</script>  ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">å¦‚ä½•å¾—åˆ°æ–¹ç¨‹yï¼Ÿ</b> <div class="spoiler_text"><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-435"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436">y</span><span class="MJXp-mo" id="MJXp-Span-437" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-438"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-439" style="margin-right: 0.05em;">d</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-440" style="vertical-align: -0.4em;">y</span></span><span class="MJXp-mo" id="MJXp-Span-441" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-442">s</span><span class="MJXp-mrow" id="MJXp-Span-443"><span class="MJXp-mo" id="MJXp-Span-444" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445">x</span><span class="MJXp-mrow" id="MJXp-Span-446"><span class="MJXp-mo" id="MJXp-Span-447" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-448"><span class="MJXp-mo" id="MJXp-Span-449" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-450">s</span><span class="MJXp-mtext" id="MJXp-Span-451">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-452">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-453">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-454">s</span><span class="MJXp-mtext" id="MJXp-Span-455">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-456">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-457">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-459">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-460">a</span><span class="MJXp-mrow" id="MJXp-Span-461"><span class="MJXp-mo" id="MJXp-Span-462" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-463"><span class="MJXp-mo" id="MJXp-Span-464" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mtext" id="MJXp-Span-465">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-466">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-467">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-468">n</span><span class="MJXp-mtext" id="MJXp-Span-469">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-470">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-471">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-472">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-473">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-474">a</span><span class="MJXp-mo" id="MJXp-Span-475" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mrow" id="MJXp-Span-476"><span class="MJXp-mo" id="MJXp-Span-477" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-478">g</span><span class="MJXp-mrow" id="MJXp-Span-479"><span class="MJXp-mo" id="MJXp-Span-480" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-481">x</span><span class="MJXp-mrow" id="MJXp-Span-482"><span class="MJXp-mo" id="MJXp-Span-483" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-484"><span class="MJXp-mo" id="MJXp-Span-485" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-486">s</span><span class="MJXp-mtext" id="MJXp-Span-487">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-488">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-489">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-490">s</span><span class="MJXp-mtext" id="MJXp-Span-491">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-492">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-493">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-494">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-495">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-496">a</span><span class="MJXp-mrow" id="MJXp-Span-497"><span class="MJXp-mo" id="MJXp-Span-498" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-msubsup" id="MJXp-Span-499"><span class="MJXp-mrow" id="MJXp-Span-500" style="margin-right: 0.05em;"><span class="MJXp-mo" id="MJXp-Span-501" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-502" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-503"><span class="MJXp-mo" id="MJXp-Span-504" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-505"><span class="MJXp-mo" id="MJXp-Span-506" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-507">2</span><span class="MJXp-mo" id="MJXp-Span-508" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-509">x</span><span class="MJXp-mtext" id="MJXp-Span-510">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-511">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-512">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-513">n</span><span class="MJXp-mtext" id="MJXp-Span-514">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-515">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-516">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-517">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-518">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-519">a</span><span class="MJXp-mrow" id="MJXp-Span-520"><span class="MJXp-mo" id="MJXp-Span-521" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-522">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-523">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-524">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-525">s</span><span class="MJXp-mtext" id="MJXp-Span-526">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-527">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-528">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-529">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-530">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-531">a</span><span class="MJXp-mo" id="MJXp-Span-532" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mrow" id="MJXp-Span-533"><span class="MJXp-mo" id="MJXp-Span-534" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-535">g</span><span class="MJXp-msubsup" id="MJXp-Span-536"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-537" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-538" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-539"><span class="MJXp-mo" id="MJXp-Span-540" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-541"><span class="MJXp-mo" id="MJXp-Span-542" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-543"><span class="MJXp-mo" id="MJXp-Span-544" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mn" id="MJXp-Span-545">2</span><span class="MJXp-msubsup" id="MJXp-Span-546"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-547" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-548" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-549">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-550">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-551">o</span><span class="MJXp-msubsup" id="MJXp-Span-552"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-553" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-554" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-555">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-556">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-557">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-558">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-559">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-560">a</span><span class="MJXp-mrow" id="MJXp-Span-561"><span class="MJXp-mo" id="MJXp-Span-562" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span></span><script type="math/tex" id="MathJax-Element-34"> y = d_y = sï¼ˆx /ï¼ˆs \ cos \ thetaï¼‰ï¼‰\ sin \ theta-ï¼ˆgï¼ˆx /ï¼ˆs \ cos \ thetaï¼‰ï¼‰^ 2ï¼‰/ 2 = x \ sin \ theta / \ cos \ theta-ï¼ˆgx ^ 2ï¼‰/ï¼ˆ2s ^ 2 \ cos ^ 2 \ thetaï¼‰</script> å’Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-563"><span class="MJXp-mtext" id="MJXp-Span-564">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-565">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-566">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-567">n</span><span class="MJXp-mtext" id="MJXp-Span-568">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-569">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-570">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-571">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-572">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-573">a</span><span class="MJXp-mo" id="MJXp-Span-574" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-575">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-576">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-577">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-578">n</span><span class="MJXp-mtext" id="MJXp-Span-579">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-580">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-581">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-582">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-583">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-584">a</span><span class="MJXp-mrow" id="MJXp-Span-585"><span class="MJXp-mo" id="MJXp-Span-586" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-587">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-588">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-589">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-590">s</span><span class="MJXp-mtext" id="MJXp-Span-591">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-592">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-593">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-594">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-595">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-596">a</span></span></span><script type="math/tex" id="MathJax-Element-35"> \ tan \ theta = \ sin \ theta / \ cos \ theta </script>  ã€‚ </div></div><br> ä½¿ç”¨è¿™ä¸ªæ–¹ç¨‹æˆ‘ä»¬å‘ç° <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-597"><span class="MJXp-mtext" id="MJXp-Span-598">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-599">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-600">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-601">n</span><span class="MJXp-mtext" id="MJXp-Span-602">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-603">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-604">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-605">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-606">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-607">a</span><span class="MJXp-mo" id="MJXp-Span-608" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-609"><span class="MJXp-mo" id="MJXp-Span-610" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-msubsup" id="MJXp-Span-611"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-612" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-613" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-614" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-615" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mtext" id="MJXp-Span-616">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-617">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-618">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-619">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-620">t</span><span class="MJXp-mrow" id="MJXp-Span-621"><span class="MJXp-mrow" id="MJXp-Span-622"><span class="MJXp-mo" id="MJXp-Span-623" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-msubsup" id="MJXp-Span-624"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-625" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-626" style="vertical-align: 0.5em;">4</span></span><span class="MJXp-mo" id="MJXp-Span-627" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-628">g</span><span class="MJXp-mrow" id="MJXp-Span-629"><span class="MJXp-mo" id="MJXp-Span-630" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-631">g</span><span class="MJXp-msubsup" id="MJXp-Span-632"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-633" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-634" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-635" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-636">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-637">y</span><span class="MJXp-msubsup" id="MJXp-Span-638"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-639" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-640" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-641"><span class="MJXp-mo" id="MJXp-Span-642" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-643"><span class="MJXp-mo" id="MJXp-Span-644" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span><span class="MJXp-mrow" id="MJXp-Span-645"><span class="MJXp-mo" id="MJXp-Span-646" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-647"><span class="MJXp-mo" id="MJXp-Span-648" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-649"><span class="MJXp-mo" id="MJXp-Span-650" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-651">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-652">x</span><span class="MJXp-mrow" id="MJXp-Span-653"><span class="MJXp-mo" id="MJXp-Span-654" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36"> \ tan \ theta =ï¼ˆs ^ 2 +-\ sqrt {ï¼ˆs ^ 4-gï¼ˆgx ^ 2 + 2ys ^ 2ï¼‰ï¼‰}ï¼‰/ï¼ˆgxï¼‰</script>  ã€‚ <br><div class="spoiler">  <b class="spoiler_title">å¦‚ä½•å¾—åˆ°æ–¹ç¨‹tanÎ¸ï¼Ÿ</b> <div class="spoiler_text"> é¦–å…ˆï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸‰è§’æ’ç­‰å¼ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-655"><span class="MJXp-mtext" id="MJXp-Span-656" style="color: red;">\ç§’</span><span class="MJXp-mtext" id="MJXp-Span-657">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-658">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-659">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-660">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-661">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-662">a</span><span class="MJXp-mo" id="MJXp-Span-663" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-664">1</span><span class="MJXp-mrow" id="MJXp-Span-665"><span class="MJXp-mo" id="MJXp-Span-666" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-667">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-668">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-669">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-670">s</span><span class="MJXp-mtext" id="MJXp-Span-671">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-672">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-673">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-674">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-675">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-676">a</span></span></span><script type="math/tex" id="MathJax-Element-37"> \ç§’\ theta = 1 / \ cos \ theta </script> å’Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-677"><span class="MJXp-mn" id="MJXp-Span-678">1</span><span class="MJXp-mo" id="MJXp-Span-679" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-680">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-681">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-682">a</span><span class="MJXp-msubsup" id="MJXp-Span-683"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-684" style="margin-right: 0.05em;">n</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-685" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-686">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-687">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-688">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-689">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-690">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-691">a</span><span class="MJXp-mo" id="MJXp-Span-692" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-693">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-694">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-695">e</span><span class="MJXp-msubsup" id="MJXp-Span-696"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-697" style="margin-right: 0.05em;">c</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-698" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-699">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-700">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-701">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-702">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-703">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-704">a</span></span></span><script type="math/tex" id="MathJax-Element-38"> 1 + \ tan ^ 2 \ theta = \ sec ^ 2 \ theta </script> æ¥ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-705"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-706">y</span><span class="MJXp-mo" id="MJXp-Span-707" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-708">x</span><span class="MJXp-mtext" id="MJXp-Span-709">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-710">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-711">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-712">n</span><span class="MJXp-mtext" id="MJXp-Span-713">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-714">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-715">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-716">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-717">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-718">a</span><span class="MJXp-mo" id="MJXp-Span-719" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mrow" id="MJXp-Span-720"><span class="MJXp-mo" id="MJXp-Span-721" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-722">g</span><span class="MJXp-msubsup" id="MJXp-Span-723"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-724" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-725" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-726"><span class="MJXp-mo" id="MJXp-Span-727" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-728"><span class="MJXp-mo" id="MJXp-Span-729" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-730"><span class="MJXp-mo" id="MJXp-Span-731" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mn" id="MJXp-Span-732">2</span><span class="MJXp-msubsup" id="MJXp-Span-733"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-734" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-735" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-736"><span class="MJXp-mo" id="MJXp-Span-737" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-738"><span class="MJXp-mo" id="MJXp-Span-739" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mn" id="MJXp-Span-740">1</span><span class="MJXp-mo" id="MJXp-Span-741" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-742">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-743">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-744">a</span><span class="MJXp-msubsup" id="MJXp-Span-745"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-746" style="margin-right: 0.05em;">n</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-747" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-748">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-749">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-750">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-751">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-752">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-753">a</span><span class="MJXp-mrow" id="MJXp-Span-754"><span class="MJXp-mo" id="MJXp-Span-755" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mo" id="MJXp-Span-756" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-757" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mrow" id="MJXp-Span-758"><span class="MJXp-mo" id="MJXp-Span-759" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-760">g</span><span class="MJXp-msubsup" id="MJXp-Span-761"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-762" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-763" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-764"><span class="MJXp-mo" id="MJXp-Span-765" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-766"><span class="MJXp-mo" id="MJXp-Span-767" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-768"><span class="MJXp-mo" id="MJXp-Span-769" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mn" id="MJXp-Span-770">2</span><span class="MJXp-msubsup" id="MJXp-Span-771"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-772" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-773" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-774"><span class="MJXp-mo" id="MJXp-Span-775" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mtext" id="MJXp-Span-776">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-777">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-778">a</span><span class="MJXp-msubsup" id="MJXp-Span-779"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-780" style="margin-right: 0.05em;">n</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-781" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-782">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-783">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-784">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-785">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-786">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-787">a</span><span class="MJXp-mo" id="MJXp-Span-788" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-789">x</span><span class="MJXp-mtext" id="MJXp-Span-790">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-791">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-792">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-793">n</span><span class="MJXp-mtext" id="MJXp-Span-794">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-795">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-796">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-797">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-798">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-799">a</span><span class="MJXp-mo" id="MJXp-Span-800" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mrow" id="MJXp-Span-801"><span class="MJXp-mo" id="MJXp-Span-802" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-803">g</span><span class="MJXp-msubsup" id="MJXp-Span-804"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-805" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-806" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-807"><span class="MJXp-mo" id="MJXp-Span-808" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-809"><span class="MJXp-mo" id="MJXp-Span-810" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-811"><span class="MJXp-mo" id="MJXp-Span-812" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mn" id="MJXp-Span-813">2</span><span class="MJXp-msubsup" id="MJXp-Span-814"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-815" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-816" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-817"><span class="MJXp-mo" id="MJXp-Span-818" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span></span><script type="math/tex" id="MathJax-Element-39"> y = x \ tan \ theta-ï¼ˆgx ^ 2ï¼‰/ï¼ˆ2s ^ 2ï¼‰ï¼ˆ1+ \ tan ^ 2 \ thetaï¼‰=-ï¼ˆgx ^ 2ï¼‰/ï¼ˆ2s ^ 2ï¼‰\ tan ^ 2 \ theta + x \ tan \ theta-ï¼ˆgx ^ 2ï¼‰/ï¼ˆ2s ^ 2ï¼‰</script>  ã€‚ <br><br> è¿™æ˜¯å½¢å¼çš„è¡¨è¾¾ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-819"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-820">a</span><span class="MJXp-msubsup" id="MJXp-Span-821"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-822" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-823" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-824" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-825">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-826">u</span><span class="MJXp-mo" id="MJXp-Span-827" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-828">c</span><span class="MJXp-mo" id="MJXp-Span-829" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-830">0</span></span></span><script type="math/tex" id="MathJax-Element-40"> au ^ 2 + bu + c = 0 </script> åœ¨å“ªé‡Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-831"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-832">u</span><span class="MJXp-mo" id="MJXp-Span-833" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-834" style="color: red;">\æ£•</span><span class="MJXp-mrow" id="MJXp-Span-835"><span class="MJXp-mo" id="MJXp-Span-836" style="margin-left: 0.278em; margin-right: 0.278em;">è¤</span></span><span class="MJXp-mrow" id="MJXp-Span-837"><span class="MJXp-mo" id="MJXp-Span-838" style="margin-left: 0.278em; margin-right: 0.278em;">è‰²</span></span><span class="MJXp-mtext" id="MJXp-Span-839">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-840">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-841">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-842">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-843">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-844">a</span></span></span><script type="math/tex" id="MathJax-Element-41"> u = \æ£•è¤è‰²\ theta </script>  ï¼Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-845"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-846">a</span><span class="MJXp-mo" id="MJXp-Span-847" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-848" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mrow" id="MJXp-Span-849"><span class="MJXp-mo" id="MJXp-Span-850" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-851">g</span><span class="MJXp-msubsup" id="MJXp-Span-852"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-853" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-854" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-855"><span class="MJXp-mo" id="MJXp-Span-856" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-857"><span class="MJXp-mo" id="MJXp-Span-858" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-859"><span class="MJXp-mo" id="MJXp-Span-860" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mn" id="MJXp-Span-861">2</span><span class="MJXp-msubsup" id="MJXp-Span-862"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-863" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-864" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-865"><span class="MJXp-mo" id="MJXp-Span-866" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span></span><script type="math/tex" id="MathJax-Element-42"> a =-ï¼ˆgx ^ 2ï¼‰/ï¼ˆ2s ^ 2ï¼‰</script>  ï¼Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-867"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-868">b</span><span class="MJXp-mo" id="MJXp-Span-869" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-870">x</span></span></span><script type="math/tex" id="MathJax-Element-43"> b = x </script> å’Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-871"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-872">c</span><span class="MJXp-mo" id="MJXp-Span-873" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-874"><span class="MJXp-mo" id="MJXp-Span-875" style="margin-left: 0.278em; margin-right: 0.278em;">ä¸€</span></span><span class="MJXp-mrow" id="MJXp-Span-876"><span class="MJXp-mo" id="MJXp-Span-877" style="margin-left: 0.278em; margin-right: 0.278em;">å¹´</span></span></span></span><script type="math/tex" id="MathJax-Element-44"> c =ä¸€å¹´</script>  ã€‚ <br><br> æˆ‘ä»¬å¯ä»¥ä½¿ç”¨äºŒæ¬¡æ–¹ç¨‹çš„æ ¹å…¬å¼æ¥è§£å†³ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-878"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-879">u</span><span class="MJXp-mo" id="MJXp-Span-880" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-881"><span class="MJXp-mo" id="MJXp-Span-882" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mo" id="MJXp-Span-883" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-884">b</span><span class="MJXp-mo" id="MJXp-Span-885" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-886" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mtext" id="MJXp-Span-887">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-888">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-889">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-890">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-891">t</span><span class="MJXp-mrow" id="MJXp-Span-892"><span class="MJXp-mrow" id="MJXp-Span-893"><span class="MJXp-mo" id="MJXp-Span-894" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-msubsup" id="MJXp-Span-895"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-896" style="margin-right: 0.05em;">b</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-897" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-898" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mn" id="MJXp-Span-899">4</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-900">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-901">c</span><span class="MJXp-mrow" id="MJXp-Span-902"><span class="MJXp-mo" id="MJXp-Span-903" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span><span class="MJXp-mrow" id="MJXp-Span-904"><span class="MJXp-mo" id="MJXp-Span-905" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-906"><span class="MJXp-mo" id="MJXp-Span-907" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-908"><span class="MJXp-mo" id="MJXp-Span-909" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mn" id="MJXp-Span-910">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-911">a</span><span class="MJXp-mrow" id="MJXp-Span-912"><span class="MJXp-mo" id="MJXp-Span-913" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span></span><script type="math/tex" id="MathJax-Element-45"> u =ï¼ˆ-b +-\ sqrt {ï¼ˆb ^ 2-4acï¼‰}ï¼‰/ï¼ˆ2aï¼‰</script>  ã€‚ <br><br> æ›¿æ¢åï¼Œæ–¹ç¨‹å°†å˜å¾—æ··ä¹±ï¼Œä½†æ˜¯æ‚¨å¯ä»¥é€šè¿‡ä¹˜ä»¥æ¥ç®€åŒ–æ–¹ç¨‹ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-914"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-915">m</span><span class="MJXp-mo" id="MJXp-Span-916" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-917"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-918" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-919" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-920"><span class="MJXp-mo" id="MJXp-Span-921" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-922">x</span></span></span><script type="math/tex" id="MathJax-Element-46"> m = s ^ 2 / x </script> æ‰€ä»¥å¾—åˆ° <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-923"><span class="MJXp-mtext" id="MJXp-Span-924">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-925">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-926">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-927">n</span><span class="MJXp-mtext" id="MJXp-Span-928">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-929">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-930">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-931">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-932">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-933">a</span><span class="MJXp-mo" id="MJXp-Span-934" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-935"><span class="MJXp-mo" id="MJXp-Span-936" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mo" id="MJXp-Span-937" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-938">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-939">b</span><span class="MJXp-mo" id="MJXp-Span-940" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-941" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-942">m</span><span class="MJXp-mtext" id="MJXp-Span-943">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-944">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-945">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-946">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-947">t</span><span class="MJXp-mrow" id="MJXp-Span-948"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-949">r</span></span><span class="MJXp-mrow" id="MJXp-Span-950"><span class="MJXp-mo" id="MJXp-Span-951" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-952"><span class="MJXp-mo" id="MJXp-Span-953" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-954"><span class="MJXp-mo" id="MJXp-Span-955" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mn" id="MJXp-Span-956">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-957">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-958">a</span><span class="MJXp-mrow" id="MJXp-Span-959"><span class="MJXp-mo" id="MJXp-Span-960" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span></span><script type="math/tex" id="MathJax-Element-47"> \ tan \ theta =ï¼ˆ-mb + -m \ sqrt {r}ï¼‰/ï¼ˆ2maï¼‰</script> åœ¨å“ªé‡Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-961"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-962">r</span><span class="MJXp-mo" id="MJXp-Span-963" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-964"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-965" style="margin-right: 0.05em;">b</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-966" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-967" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mn" id="MJXp-Span-968">4</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-969">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-970">c</span></span></span><script type="math/tex" id="MathJax-Element-48"> r = b ^ 2-4ac </script>  ã€‚ <br><br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è·å¾— <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-971"><span class="MJXp-mtext" id="MJXp-Span-972">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-973">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-974">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-975">n</span><span class="MJXp-mtext" id="MJXp-Span-976">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-977">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-978">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-979">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-980">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-981">a</span><span class="MJXp-mo" id="MJXp-Span-982" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-983"><span class="MJXp-mo" id="MJXp-Span-984" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-msubsup" id="MJXp-Span-985"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-986" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-987" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-988" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-989" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mtext" id="MJXp-Span-990">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-991">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-992">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-993">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-994">t</span><span class="MJXp-mrow" id="MJXp-Span-995"><span class="MJXp-mrow" id="MJXp-Span-996"><span class="MJXp-mo" id="MJXp-Span-997" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-msubsup" id="MJXp-Span-998"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-999" style="margin-right: 0.05em;">m</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1000" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1001">r</span><span class="MJXp-mrow" id="MJXp-Span-1002"><span class="MJXp-mo" id="MJXp-Span-1003" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span><span class="MJXp-mrow" id="MJXp-Span-1004"><span class="MJXp-mo" id="MJXp-Span-1005" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-1006"><span class="MJXp-mo" id="MJXp-Span-1007" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-1008"><span class="MJXp-mo" id="MJXp-Span-1009" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1010">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1011">x</span><span class="MJXp-mrow" id="MJXp-Span-1012"><span class="MJXp-mo" id="MJXp-Span-1013" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span></span><script type="math/tex" id="MathJax-Element-49"> \ tan \ theta =ï¼ˆs ^ 2 +-\ sqrt {ï¼ˆm ^ 2rï¼‰}ï¼‰/ï¼ˆgxï¼‰</script>  ã€‚ <br><br> ç»“æœ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1014"><span class="MJXp-msubsup" id="MJXp-Span-1015"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1016" style="margin-right: 0.05em;">m</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1017" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1018">r</span><span class="MJXp-mo" id="MJXp-Span-1019" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-1020"><span class="MJXp-mo" id="MJXp-Span-1021" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-msubsup" id="MJXp-Span-1022"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1023" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1024" style="vertical-align: 0.5em;">4</span></span><span class="MJXp-mrow" id="MJXp-Span-1025"><span class="MJXp-mo" id="MJXp-Span-1026" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-msubsup" id="MJXp-Span-1027"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1028" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1029" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-1030"><span class="MJXp-mo" id="MJXp-Span-1031" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1032">r</span><span class="MJXp-mo" id="MJXp-Span-1033" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-1034"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1035" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1036" style="vertical-align: 0.5em;">4</span></span><span class="MJXp-mo" id="MJXp-Span-1037" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-1038">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1039">g</span><span class="MJXp-msubsup" id="MJXp-Span-1040"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1041" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1042" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1043">c</span><span class="MJXp-mo" id="MJXp-Span-1044" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-1045"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1046" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1047" style="vertical-align: 0.5em;">4</span></span><span class="MJXp-mo" id="MJXp-Span-1048" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-msubsup" id="MJXp-Span-1049"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1050" style="margin-right: 0.05em;">g</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1051" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-1052"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1053" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1054" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1055" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mn" id="MJXp-Span-1056">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1057">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1058">y</span><span class="MJXp-msubsup" id="MJXp-Span-1059"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1060" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1061" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1062" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-1063"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1064" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1065" style="vertical-align: 0.5em;">4</span></span><span class="MJXp-mo" id="MJXp-Span-1066" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1067">g</span><span class="MJXp-mrow" id="MJXp-Span-1068"><span class="MJXp-mo" id="MJXp-Span-1069" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1070">g</span><span class="MJXp-msubsup" id="MJXp-Span-1071"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1072" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1073" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1074" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-1075">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1076">y</span><span class="MJXp-msubsup" id="MJXp-Span-1077"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1078" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1079" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-1080"><span class="MJXp-mo" id="MJXp-Span-1081" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span></span><script type="math/tex" id="MathJax-Element-50"> m ^ 2r =ï¼ˆs ^ 4 / x ^ 2ï¼‰r = s ^ 4 + 2gs ^ 2c = s ^ 4-g ^ 2x ^ 2-2gys ^ 2 = s ^ 4-gï¼ˆgx ^ 2 + 2ys ^ 2ï¼‰</script>  ã€‚ </div></div><br> æœ‰ä¸¤ç§å¯èƒ½çš„è§’åº¦ï¼Œå› ä¸ºæ‚¨å¯ä»¥ç„å‡†é«˜æˆ–ä½ã€‚ ä½è·¯å¾„çš„é€Ÿåº¦æ›´å¿«ï¼Œå› ä¸ºå®ƒæ›´æ¥è¿‘ç›®æ ‡çº¿ã€‚ ä½†æ˜¯é«˜è½¨è¿¹çœ‹èµ·æ¥æ›´æœ‰è¶£ï¼Œå› æ­¤æˆ‘ä»¬å°†é€‰æ‹©å®ƒã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨æœ€å¤§çš„è§£å†³æ–¹æ¡ˆã€‚ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1082"><span class="MJXp-mtext" id="MJXp-Span-1083">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1084">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1085">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1086">n</span><span class="MJXp-mtext" id="MJXp-Span-1087">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1088">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1089">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1090">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1091">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1092">a</span><span class="MJXp-mo" id="MJXp-Span-1093" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-1094"><span class="MJXp-mo" id="MJXp-Span-1095" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-msubsup" id="MJXp-Span-1096"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1097" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1098" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1099" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-1100">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1101">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1102">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1103">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1104">t</span><span class="MJXp-mrow" id="MJXp-Span-1105"><span class="MJXp-mrow" id="MJXp-Span-1106"><span class="MJXp-mo" id="MJXp-Span-1107" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-msubsup" id="MJXp-Span-1108"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1109" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1110" style="vertical-align: 0.5em;">4</span></span><span class="MJXp-mo" id="MJXp-Span-1111" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1112">g</span><span class="MJXp-mrow" id="MJXp-Span-1113"><span class="MJXp-mo" id="MJXp-Span-1114" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1115">g</span><span class="MJXp-msubsup" id="MJXp-Span-1116"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1117" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1118" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1119" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-1120">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1121">y</span><span class="MJXp-msubsup" id="MJXp-Span-1122"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1123" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1124" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-1125"><span class="MJXp-mo" id="MJXp-Span-1126" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-1127"><span class="MJXp-mo" id="MJXp-Span-1128" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span><span class="MJXp-mrow" id="MJXp-Span-1129"><span class="MJXp-mo" id="MJXp-Span-1130" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-1131"><span class="MJXp-mo" id="MJXp-Span-1132" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-1133"><span class="MJXp-mo" id="MJXp-Span-1134" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1135">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1136">x</span><span class="MJXp-mrow" id="MJXp-Span-1137"><span class="MJXp-mo" id="MJXp-Span-1138" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-51"> \ tan \ theta =ï¼ˆs ^ 2 + \ sqrt {ï¼ˆs ^ 4-gï¼ˆgx ^ 2 + 2ys ^ 2ï¼‰ï¼‰}ï¼‰/ï¼ˆgxï¼‰</script>  ã€‚ æˆ‘ä»¬è®¡ç®—å®ƒï¼Œå¹¶ä¸” <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1139"><span class="MJXp-mtext" id="MJXp-Span-1140">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1141">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1142">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1143">s</span><span class="MJXp-mtext" id="MJXp-Span-1144">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1145">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1146">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1147">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1148">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1149">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-52"> \ cos \ theta </script> ä¸ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1150"><span class="MJXp-mtext" id="MJXp-Span-1151" style="color: red;">\ç½ª</span><span class="MJXp-mrow" id="MJXp-Span-1152"><span class="MJXp-mo" id="MJXp-Span-1153" style="margin-left: 0.278em; margin-right: 0.278em;">æ¶</span></span><span class="MJXp-mtext" id="MJXp-Span-1154">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1155">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1156">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1157">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1158">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1159">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-53"> \ç½ªæ¶\ theta </script>  ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å®ƒä»¬æ¥è·å–é•œå¤´çš„é€Ÿåº¦çŸ¢é‡ã€‚ ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦è½¬æ¢ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1160"><span class="MJXp-mtext" id="MJXp-Span-1161" style="color: red;">\æ£•</span><span class="MJXp-mrow" id="MJXp-Span-1162"><span class="MJXp-mo" id="MJXp-Span-1163" style="margin-left: 0.278em; margin-right: 0.278em;">è¤</span></span><span class="MJXp-mrow" id="MJXp-Span-1164"><span class="MJXp-mo" id="MJXp-Span-1165" style="margin-left: 0.278em; margin-right: 0.278em;">è‰²</span></span><span class="MJXp-mtext" id="MJXp-Span-1166">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1167">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1168">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1169">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1170">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1171">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-54"> \æ£•è¤è‰²\ theta </script> ä½¿ç”¨<code>Mathf.Atan</code>å°†å¼§åº¦è°ƒæ•´ä¸ºå¼§åº¦ã€‚ é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä½¿ç”¨5çš„æ’å®šæ‹æ‘„é€Ÿåº¦ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x = dir.magnitude; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> y = -launchPoint.y; dir /= x; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> g = <span class="hljs-number"><span class="hljs-number">9.81f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> s = <span class="hljs-number"><span class="hljs-number">5f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> s2 = s * s; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> r = s2 * s2 - g * (g * x * x + <span class="hljs-number"><span class="hljs-number">2f</span></span> * y * s2); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> tanTheta = (s2 + Mathf.Sqrt(r)) / (g * x); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cosTheta = Mathf.Cos(Mathf.Atan(tanTheta)); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sinTheta = cosTheta * tanTheta;</code> </pre> <br> è®©æˆ‘ä»¬é€šè¿‡ç»˜åˆ¶åä¸ªè“è‰²çš„çº¿æ®µæ¥å¯è§†åŒ–è½¨è¿¹ï¼Œè¿™äº›çº¿æ®µè¡¨ç¤ºé£è¡Œçš„ç¬¬ä¸€ç§’ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sinTheta = cosTheta * tanTheta; Vector3 prev = launchPoint, next; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= <span class="hljs-number"><span class="hljs-number">10</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = i / <span class="hljs-number"><span class="hljs-number">10f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dx = s * cosTheta * t; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dy = s * sinTheta * t - <span class="hljs-number"><span class="hljs-number">0.5f</span></span> * g * t * t; next = launchPoint + <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(dir.x * dx, dy, dir.y * dx); Debug.DrawLine(prev, next, Color.blue); prev = next; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/154/7e4/fbb/1547e4fbb9bf8e8bf81ebf18b6b3e390.png" width="310" height="160"></div><br>  <i>æŠ›ç‰©çº¿çš„é£è¡Œè·¯å¾„æŒç»­ä¸€ç§’é’Ÿã€‚</i> <br><br> å¯ä»¥åœ¨ä¸åˆ°ä¸€ç§’é’Ÿçš„æ—¶é—´å†…åˆ°è¾¾ä¸¤ä¸ªæœ€è¿œçš„ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒä»¬çš„å…¨éƒ¨è½¨è¿¹ï¼Œå¹¶ä¸”è¿™äº›çº¿æ®µç»§ç»­åœ¨åœ°ä¸‹å»¶ä¼¸ä¸€ç‚¹ã€‚ å¯¹äºå…¶ä»–ä¸¤ä¸ªç‚¹ï¼Œéœ€è¦æ›´å¤§çš„å‘å°„è§’ï¼Œå› æ­¤è½¨è¿¹å˜é•¿ï¼Œé£è¡ŒæŒç»­ä¸€ç§’ä»¥ä¸Šã€‚ <br><br><h3> å°„é€Ÿ </h3><br> å¦‚æœæ‚¨æƒ³åœ¨ä¸€ç§’é’Ÿå†…åˆ°è¾¾æœ€è¿‘çš„ä¸¤ç‚¹ï¼Œåˆ™éœ€è¦é™ä½æ‹æ‘„é€Ÿåº¦ã€‚ è®©æˆ‘ä»¬ç­‰äº4ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> s = <span class="hljs-number"><span class="hljs-number">4f</span></span>;</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ec/429/4a8/0ec4294a8a6e4de20c57146413d6e5cc.png" width="310" height="140"></div><br>  <i>å°„å‡»é€Ÿåº¦é™ä½åˆ°4ã€‚</i> <br><br> ç°åœ¨ä»–ä»¬çš„è½¨è¿¹å·²ç»å®Œæˆï¼Œä½†å…¶ä»–ä¸¤ä¸ªéƒ½æ¶ˆå¤±äº†ã€‚ ä¹‹æ‰€ä»¥å‘ç”Ÿè¿™ç§æƒ…å†µï¼Œæ˜¯å› ä¸ºå°„å‡»é€Ÿåº¦ç°åœ¨ä¸è¶³ä»¥è¾¾åˆ°è¿™äº›ç‚¹ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1172"><span class="MJXp-mtext" id="MJXp-Span-1173" style="color: red;">\æ£•</span><span class="MJXp-mrow" id="MJXp-Span-1174"><span class="MJXp-mo" id="MJXp-Span-1175" style="margin-left: 0.278em; margin-right: 0.278em;">è¤</span></span><span class="MJXp-mrow" id="MJXp-Span-1176"><span class="MJXp-mo" id="MJXp-Span-1177" style="margin-left: 0.278em; margin-right: 0.278em;">è‰²</span></span><span class="MJXp-mtext" id="MJXp-Span-1178">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1179">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1180">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1181">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1182">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1183">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-55"> \æ£•è¤è‰²\ theta </script> ä¸ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¾—åˆ°è´Ÿæ•°çš„å¹³æ–¹æ ¹ï¼Œå¯¼è‡´NaNå€¼å’Œçº¿æ¡æ¶ˆå¤±ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡æ£€æŸ¥æ¥è¯†åˆ« <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1184"></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-56-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-56"> </script> æ¶ˆæã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> r = s2 * s2 - g * (g * x * x + <span class="hljs-number"><span class="hljs-number">2f</span></span> * y * s2); Debug.Assert(r &gt;= <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-string"><span class="hljs-string">"Launch velocity insufficient for range!"</span></span>);</code> </pre> <br> é€šè¿‡è®¾ç½®è¶³å¤Ÿé«˜çš„æ³¨å°„é€Ÿåº¦å¯ä»¥é¿å…è¿™ç§æƒ…å†µã€‚ ä½†æ˜¯ï¼Œå¦‚æœå¤ªå¤§ï¼Œåˆ™è¦å‡»ä¸­å¡”é™„è¿‘çš„ç›®æ ‡å°†éœ€è¦å¾ˆé«˜çš„è½¨è¿¹å’Œè¾ƒé•¿çš„é£è¡Œæ—¶é—´ï¼Œå› æ­¤æ‚¨åº”å°†é€Ÿåº¦ä¿æŒå°½å¯èƒ½ä½çš„æ°´å¹³ã€‚ å°„å‡»é€Ÿåº¦åº”è¶³ä»¥åœ¨æœ€å¤§èŒƒå›´å†…å‡»ä¸­ç›®æ ‡ã€‚ <br><br> åœ¨æœ€å¤§èŒƒå›´ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1185"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1186">r</span><span class="MJXp-mo" id="MJXp-Span-1187" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-1188">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-57"> r = 0 </script>  ï¼Œå³ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1189"><span class="MJXp-mtext" id="MJXp-Span-1190" style="color: red;">\æ£•</span><span class="MJXp-mrow" id="MJXp-Span-1191"><span class="MJXp-mo" id="MJXp-Span-1192" style="margin-left: 0.278em; margin-right: 0.278em;">è¤</span></span><span class="MJXp-mrow" id="MJXp-Span-1193"><span class="MJXp-mo" id="MJXp-Span-1194" style="margin-left: 0.278em; margin-right: 0.278em;">è‰²</span></span><span class="MJXp-mtext" id="MJXp-Span-1195">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1196">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1197">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1198">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1199">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1200">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-58-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-58"> \æ£•è¤è‰²\ theta </script> åªæœ‰ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå¯¹åº”çš„è½¨è¿¹å¾ˆçŸ­ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬çŸ¥é“æ‰€éœ€çš„å°„å‡»é€Ÿåº¦ã€‚ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1201"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1202">s</span><span class="MJXp-mo" id="MJXp-Span-1203" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-1204">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1205">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1206">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1207">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1208">t</span><span class="MJXp-mrow" id="MJXp-Span-1209"><span class="MJXp-mrow" id="MJXp-Span-1210"><span class="MJXp-mo" id="MJXp-Span-1211" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1212">g</span><span class="MJXp-mrow" id="MJXp-Span-1213"><span class="MJXp-mo" id="MJXp-Span-1214" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1215">y</span><span class="MJXp-mo" id="MJXp-Span-1216" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-1217">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1218">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1219">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1220">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1221">t</span><span class="MJXp-mrow" id="MJXp-Span-1222"><span class="MJXp-mrow" id="MJXp-Span-1223"><span class="MJXp-mo" id="MJXp-Span-1224" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-msubsup" id="MJXp-Span-1225"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1226" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1227" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1228" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-1229"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1230" style="margin-right: 0.05em;">y</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1231" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-1232"><span class="MJXp-mo" id="MJXp-Span-1233" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span><span class="MJXp-mrow" id="MJXp-Span-1234"><span class="MJXp-mo" id="MJXp-Span-1235" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-1236"><span class="MJXp-mo" id="MJXp-Span-1237" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-59-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-59"> s = \ sqrt {ï¼ˆgï¼ˆy + \ sqrt {ï¼ˆx ^ 2 + y ^ 2ï¼‰}ï¼‰ï¼‰} </script>  ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">å¦‚ä½•å¾—å‡ºsçš„ç­‰å¼ï¼Ÿ</b> <div class="spoiler_text"> éœ€è¦å†³å®š <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1238"><span class="MJXp-msubsup" id="MJXp-Span-1239"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1240" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1241" style="vertical-align: 0.5em;">4</span></span><span class="MJXp-mo" id="MJXp-Span-1242" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1243">g</span><span class="MJXp-mrow" id="MJXp-Span-1244"><span class="MJXp-mo" id="MJXp-Span-1245" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1246">g</span><span class="MJXp-msubsup" id="MJXp-Span-1247"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1248" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1249" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1250" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-1251">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1252">y</span><span class="MJXp-msubsup" id="MJXp-Span-1253"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1254" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1255" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-1256"><span class="MJXp-mo" id="MJXp-Span-1257" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mo" id="MJXp-Span-1258" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-1259"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1260" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1261" style="vertical-align: 0.5em;">4</span></span><span class="MJXp-mo" id="MJXp-Span-1262" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mn" id="MJXp-Span-1263">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1264">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1265">y</span><span class="MJXp-msubsup" id="MJXp-Span-1266"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1267" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1268" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1269" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-msubsup" id="MJXp-Span-1270"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1271" style="margin-right: 0.05em;">g</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1272" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-1273"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1274" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1275" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1276" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-1277">0</span></span></span><script type="math/tex" id="MathJax-Element-60"> s ^ 4-gï¼ˆgx ^ 2 + 2ys ^ 2ï¼‰= s ^ 4-2gys ^ 2-g ^ 2x ^ 2 = 0 </script> ä¸º <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1278"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1279">s</span></span></span><script type="math/tex" id="MathJax-Element-61"> s </script>  ã€‚ <br><br> è¿™æ˜¯å½¢å¼çš„è¡¨è¾¾ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1280"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1281">a</span><span class="MJXp-msubsup" id="MJXp-Span-1282"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1283" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1284" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1285" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1286">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1287">u</span><span class="MJXp-mo" id="MJXp-Span-1288" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1289">c</span><span class="MJXp-mo" id="MJXp-Span-1290" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-1291">0</span></span></span><script type="math/tex" id="MathJax-Element-62"> au ^ 2 + bu + c = 0 </script> åœ¨å“ªé‡Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1292"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1293">u</span><span class="MJXp-mo" id="MJXp-Span-1294" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-1295"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1296" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1297" style="vertical-align: 0.5em;">2</span></span></span></span><script type="math/tex" id="MathJax-Element-63"> u = s ^ 2 </script>  ï¼Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1298"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1299">a</span><span class="MJXp-mo" id="MJXp-Span-1300" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-1301">1</span></span></span><script type="math/tex" id="MathJax-Element-64"> a = 1 </script>  ï¼Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1302"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1303">b</span><span class="MJXp-mo" id="MJXp-Span-1304" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-1305" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mn" id="MJXp-Span-1306">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1307">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1308">y</span></span></span><script type="math/tex" id="MathJax-Element-65"> b = -2gy </script> å’Œ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1309"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1310">c</span><span class="MJXp-mo" id="MJXp-Span-1311" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-1312" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-msubsup" id="MJXp-Span-1313"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1314" style="margin-right: 0.05em;">g</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1315" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-1316"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1317" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1318" style="vertical-align: 0.5em;">2</span></span></span></span><script type="math/tex" id="MathJax-Element-66"> c = -g ^ 2x ^ 2 </script>  ã€‚ <br><br> æ‚¨å¯ä»¥ä½¿ç”¨äºŒæ¬¡æ–¹ç¨‹æ ¹çš„ç®€åŒ–å…¬å¼æ¥æ±‚è§£ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1319"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1320">u</span><span class="MJXp-mo" id="MJXp-Span-1321" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-1322"><span class="MJXp-mo" id="MJXp-Span-1323" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mo" id="MJXp-Span-1324" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1325">b</span><span class="MJXp-mo" id="MJXp-Span-1326" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-1327" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mtext" id="MJXp-Span-1328">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1329">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1330">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1331">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1332">t</span><span class="MJXp-mrow" id="MJXp-Span-1333"><span class="MJXp-mrow" id="MJXp-Span-1334"><span class="MJXp-mo" id="MJXp-Span-1335" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-msubsup" id="MJXp-Span-1336"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1337" style="margin-right: 0.05em;">b</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1338" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1339" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mn" id="MJXp-Span-1340">4</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1341">c</span><span class="MJXp-mrow" id="MJXp-Span-1342"><span class="MJXp-mo" id="MJXp-Span-1343" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span><span class="MJXp-mrow" id="MJXp-Span-1344"><span class="MJXp-mo" id="MJXp-Span-1345" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-1346"><span class="MJXp-mo" id="MJXp-Span-1347" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-1348">2</span></span></span><script type="math/tex" id="MathJax-Element-67"> u =ï¼ˆ-b +-\ sqrt {ï¼ˆb ^ 2-4cï¼‰}ï¼‰/ 2 </script>  ã€‚ <br><br> æ›¿æ¢åæˆ‘ä»¬å¾—åˆ° <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1349"><span class="MJXp-msubsup" id="MJXp-Span-1350"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1351" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1352" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1353" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-1354"><span class="MJXp-mo" id="MJXp-Span-1355" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mn" id="MJXp-Span-1356">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1357">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1358">y</span><span class="MJXp-mo" id="MJXp-Span-1359" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-1360" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mtext" id="MJXp-Span-1361">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1362">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1363">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1364">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1365">t</span><span class="MJXp-mrow" id="MJXp-Span-1366"><span class="MJXp-mrow" id="MJXp-Span-1367"><span class="MJXp-mo" id="MJXp-Span-1368" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mn" id="MJXp-Span-1369">4</span><span class="MJXp-msubsup" id="MJXp-Span-1370"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1371" style="margin-right: 0.05em;">g</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1372" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-1373"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1374" style="margin-right: 0.05em;">y</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1375" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1376" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-1377">4</span><span class="MJXp-msubsup" id="MJXp-Span-1378"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1379" style="margin-right: 0.05em;">g</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1380" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-1381"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1382" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1383" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-1384"><span class="MJXp-mo" id="MJXp-Span-1385" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span><span class="MJXp-mrow" id="MJXp-Span-1386"><span class="MJXp-mo" id="MJXp-Span-1387" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span><span class="MJXp-mrow" id="MJXp-Span-1388"><span class="MJXp-mo" id="MJXp-Span-1389" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-1390">2</span><span class="MJXp-mo" id="MJXp-Span-1391" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1392">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1393">y</span><span class="MJXp-mo" id="MJXp-Span-1394" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-1395" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1396">g</span><span class="MJXp-mtext" id="MJXp-Span-1397">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1398">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1399">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1400">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1401">t</span><span class="MJXp-mrow" id="MJXp-Span-1402"><span class="MJXp-mrow" id="MJXp-Span-1403"><span class="MJXp-mo" id="MJXp-Span-1404" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-msubsup" id="MJXp-Span-1405"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1406" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1407" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1408" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-1409"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1410" style="margin-right: 0.05em;">y</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1411" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-1412"><span class="MJXp-mo" id="MJXp-Span-1413" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span></span></span><script type="math/tex" id="MathJax-Element-68"> s ^ 2 =ï¼ˆ2gy +-\ sqrt {ï¼ˆ4g ^ 2y ^ 2 + 4g ^ 2x ^ 2ï¼‰}ï¼‰/ 2 = gy + -g \ sqrt {ï¼ˆx ^ 2 + y ^ 2ï¼‰} </script>  ã€‚ <br><br> æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç§¯æçš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1414"><span class="MJXp-msubsup" id="MJXp-Span-1415"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1416" style="margin-right: 0.05em;">s</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1417" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1418" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1419">g</span><span class="MJXp-mrow" id="MJXp-Span-1420"><span class="MJXp-mo" id="MJXp-Span-1421" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1422">y</span><span class="MJXp-mo" id="MJXp-Span-1423" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-1424">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1425">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1426">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1427">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1428">t</span><span class="MJXp-mrow" id="MJXp-Span-1429"><span class="MJXp-mrow" id="MJXp-Span-1430"><span class="MJXp-mo" id="MJXp-Span-1431" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼ˆ</span></span><span class="MJXp-msubsup" id="MJXp-Span-1432"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1433" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1434" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1435" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-1436"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1437" style="margin-right: 0.05em;">y</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1438" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-1439"><span class="MJXp-mo" id="MJXp-Span-1440" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span><span class="MJXp-mrow" id="MJXp-Span-1441"><span class="MJXp-mo" id="MJXp-Span-1442" style="margin-left: 0.278em; margin-right: 0.278em;">ï¼‰</span></span></span></span><script type="math/tex" id="MathJax-Element-69"> s ^ 2 = gï¼ˆy + \ sqrt {ï¼ˆx ^ 2 + y ^ 2ï¼‰}ï¼‰</script>  ã€‚ </div></div><br> ä»…åœ¨è¿«å‡»ç‚®å”¤é†’ï¼ˆå”¤é†’ï¼‰æˆ–åœ¨â€œæ’­æ”¾â€æ¨¡å¼ä¸‹æ›´æ”¹å…¶èŒƒå›´æ—¶ï¼Œæ‰éœ€è¦ç¡®å®šæ‰€éœ€çš„é€Ÿåº¦ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¯¥å­—æ®µè·Ÿè¸ªå®ƒå¹¶åœ¨<code>Awake</code>å’Œ<code>OnValidate</code>å¯¹å…¶è¿›è¡Œè®¡ç®—ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> launchSpeed; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { OnValidate(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnValidate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x = targetingRange; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> y = -mortar.position.y; launchSpeed = Mathf.Sqrt(<span class="hljs-number"><span class="hljs-number">9.81f</span></span> * (y + Mathf.Sqrt(x * x + y * y))); }</code> </pre> <br> ä½†æ˜¯ï¼Œç”±äºæµ®ç‚¹è®¡ç®—ç²¾åº¦çš„é™åˆ¶ï¼Œç¡®å®šéå¸¸æ¥è¿‘æœ€å¤§èŒƒå›´çš„ç›®æ ‡å¯èƒ½æ˜¯é”™è¯¯çš„ã€‚ å› æ­¤ï¼Œåœ¨è®¡ç®—æ‰€éœ€é€Ÿåº¦æ—¶ï¼Œæˆ‘ä»¬ä¼šåœ¨èŒƒå›´å†…æ·»åŠ å°‘é‡ã€‚ å¦å¤–ï¼Œæ•Œäººçš„å¯¹æ’æœºçš„åŠå¾„å®è´¨ä¸Šæ‰©å¤§äº†å¡”æ¶å°„ç¨‹çš„æœ€å¤§åŠå¾„ã€‚ æˆ‘ä»¬å°†å…¶è®¾ç½®ä¸ºç­‰äº0.125ï¼Œä½†æ˜¯éšç€æ•Œäººè§„æ¨¡çš„å¢åŠ ï¼Œå®ƒå¯ä»¥å°½å¯èƒ½åœ°å¢åŠ ä¸€å€ï¼Œå› æ­¤æˆ‘ä»¬å°†å®é™…èŒƒå›´å¢åŠ 0.25ï¼Œä¾‹å¦‚å¢åŠ 0.25001ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x = targetingRange + <span class="hljs-number"><span class="hljs-number">0.25001f</span></span>;</code> </pre> <br> æ¥ä¸‹æ¥ï¼Œå¯¹<code>Launch</code>ä¸­çš„å°„å‡»é€Ÿåº¦åº”ç”¨å¯¼å‡ºçš„æ–¹ç¨‹å¼ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> s = launchSpeed;</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/760/37c/323/76037c32335075486f9e84e231a98ca1.png" width="310" height="170"></div><br>  <i>å°†è®¡ç®—å‡ºçš„é€Ÿåº¦åº”ç”¨äºç„å‡†èŒƒå›´3.5ã€‚</i> <br><br><h3> å°„å‡» </h3><br> æ­£ç¡®è®¡ç®—äº†è½¨è¿¹ï¼Œæ‚¨å¯ä»¥æ‘†è„±ç›¸å¯¹çš„æµ‹è¯•ç›®æ ‡ã€‚ ç°åœ¨ï¼Œæ‚¨éœ€è¦å°†<code>Launch</code>ç‚¹ä¼ é€’ç»™ç›®æ ‡ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Launch</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TargetPoint target</span></span></span><span class="hljs-function">)</span></span> { Vector3 launchPoint = mortar.position; Vector3 targetPoint = target.Position; targetPoint.y = <span class="hljs-number"><span class="hljs-number">0f</span></span>; â€¦ }</code> </pre> <br> æ­¤å¤–ï¼Œå¹¶éæ¯å¸§éƒ½æ‹æ‘„ç…§ç‰‡ã€‚ æˆ‘ä»¬éœ€è¦ä»¥ä¸åˆ›å»ºæ•Œäººçš„è¿‡ç¨‹ç›¸åŒçš„æ–¹å¼è·Ÿè¸ªå°„å‡»è¿‡ç¨‹ï¼Œå¹¶åœ¨<code>GameUpdate</code>å°„å‡»æ—¶é—´åˆ°æ¥æ—¶æ•è·éšæœºç›®æ ‡ã€‚ ä½†æ˜¯ç›®å‰ï¼Œå¯èƒ½æ²¡æœ‰ä»»ä½•ç›®æ ‡å¯ç”¨ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ç»§ç»­è¿›è¡Œå°„å‡»ï¼Œä½†ä¸ä¼šè¿›ä¸€æ­¥ç´¯ç§¯ã€‚ ä¸ºäº†é¿å…æ— é™å¾ªç¯ï¼Œæ‚¨éœ€è¦ä½¿å…¶å°äº1ã€‚ <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> launchProgress; â€¦ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameUpdate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { launchProgress += shotsPerSecond * Time.deltaTime; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (launchProgress &gt;= <span class="hljs-number"><span class="hljs-number">1f</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (AcquireTarget(<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> TargetPoint target)) { Launch(target); launchProgress -= <span class="hljs-number"><span class="hljs-number">1f</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { launchProgress = <span class="hljs-number"><span class="hljs-number">0.999f</span></span>; } } }</code> </pre> <br> æˆ‘ä»¬ä¸ä¼šåœ¨ä¸¤æ¬¡å°„å‡»ä¹‹é—´è·Ÿè¸ªç›®æ ‡ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦åœ¨å°„å‡»è¿‡ç¨‹ä¸­æ­£ç¡®æ—‹è½¬è¿«å‡»ç‚®ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨é•œå¤´çš„æ°´å¹³æ–¹å‘ä½¿ç”¨<code>Quaternion.LookRotation</code>æ°´å¹³æ—‹è½¬ç ‚æµ†ã€‚ æˆ‘ä»¬è¿˜éœ€è¦ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1443"><span class="MJXp-mtext" id="MJXp-Span-1444" style="color: red;">\æ£•</span><span class="MJXp-mrow" id="MJXp-Span-1445"><span class="MJXp-mo" id="MJXp-Span-1446" style="margin-left: 0.278em; margin-right: 0.278em;">è¤</span></span><span class="MJXp-mrow" id="MJXp-Span-1447"><span class="MJXp-mo" id="MJXp-Span-1448" style="margin-left: 0.278em; margin-right: 0.278em;">è‰²</span></span><span class="MJXp-mtext" id="MJXp-Span-1449">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1450">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1451">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1452">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1453">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1454">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-70-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-70"> \æ£•è¤è‰²\ theta </script> ä¸ºæ–¹å‘å‘é‡çš„åˆ†é‡Yåº”ç”¨å°„å‡»è§’åº¦ã€‚ è¿™å°†èµ·ä½œç”¨ï¼Œå› ä¸ºæ°´å¹³æ–¹å‘çš„é•¿åº¦ä¸º1ï¼Œå³ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1455"><span class="MJXp-mtext" id="MJXp-Span-1456">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1457">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1458">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1459">n</span><span class="MJXp-mtext" id="MJXp-Span-1460">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1461">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1462">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1463">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1464">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1465">a</span><span class="MJXp-mo" id="MJXp-Span-1466" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-1467">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1468">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1469">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1470">n</span><span class="MJXp-mtext" id="MJXp-Span-1471">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1472">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1473">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1474">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1475">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1476">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-71-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-71"> \ tan \ theta = \ sin \ theta </script>  ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad5/3ab/d92/ad53abd9267080d707d8ac4fa2b4b219.png" width="225" height="125"></div><br>  <i>å¤–è§‚çš„è½¬å¼¯å‘é‡çš„åˆ†è§£ã€‚</i> <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> tanTheta = (s2 + Mathf.Sqrt(r)) / (g * x); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cosTheta = Mathf.Cos(Mathf.Atan(tanTheta)); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sinTheta = cosTheta * tanTheta; mortar.localRotation = Quaternion.LookRotation(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(dir.x, tanTheta, dir.y));</code> </pre> <br> è¦ä»ç„¶æŸ¥çœ‹é•œå¤´çš„è½¨è¿¹ï¼Œå¯ä»¥åœ¨<code>Debug.DrawLine</code>ä¸­æ·»åŠ ä¸€ä¸ªå‚æ•°ï¼Œä½¿å®ƒä»¬å¯ä»¥é•¿æ—¶é—´ç»˜åˆ¶ã€‚ <br><br><pre> <code class="cs hljs"> Vector3 prev = launchPoint, next; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= <span class="hljs-number"><span class="hljs-number">10</span></span>; i++) { â€¦ Debug.DrawLine(prev, next, Color.blue, <span class="hljs-number"><span class="hljs-number">1f</span></span>); prev = next; } Debug.DrawLine(launchPoint, targetPoint, Color.yellow, <span class="hljs-number"><span class="hljs-number">1f</span></span>); Debug.DrawLine( â€¦ Color.white, <span class="hljs-number"><span class="hljs-number">1f</span></span> );</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bo/qv/ud/boqvuda-fwbskvuul5tuaosc7w8.gif"></div><br>  <i>ç„å‡†</i> <br><br><h2> ç‚®å¼¹ </h2><br> è®¡ç®—è½¨è¿¹çš„æ„æ€æ˜¯æˆ‘ä»¬ç°åœ¨çŸ¥é“å¦‚ä½•å°„å‡»ç‚®å¼¹ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºå®ƒä»¬å¹¶è¿›è¡Œå°„å‡»ã€‚ <br><br><h3> æˆ˜äº‰å·¥å‚ </h3><br> æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå·¥å‚æ¥å®ä¾‹åŒ–å¤–å£³å¯¹è±¡ã€‚ åœ¨ç©ºä¸­æ—¶ï¼Œç‚®å¼¹æ˜¯ç‹¬ç«‹å­˜åœ¨çš„ï¼Œä¸å†ä¾èµ–äºå‘å°„ç‚®å¼¹çš„è¿«å‡»ç‚®ã€‚ å› æ­¤ï¼Œä¸åº”ä½¿ç”¨ç ‚æµ†å¡”å¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œå¹¶ä¸”ç“·ç –å«é‡å·¥å‚ä¹Ÿä¸é€‚åˆè¿™æ ·åšã€‚<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®©æˆ‘ä»¬ä¸ºä¸æ­¦å™¨ç›¸å…³çš„æ‰€æœ‰å†…å®¹åˆ›å»ºä¸€ä¸ªæ–°å·¥å‚ï¼Œç„¶åå°†å…¶ç§°ä¸ºæˆ˜äº‰å·¥å‚ã€‚</font><font style="vertical-align: inherit;">é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª</font></font><code>WarEntity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…·æœ‰å±æ€§</font></font><code>OriginFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œæ–¹æ³•</font><font style="vertical-align: inherit;">çš„æ‘˜è¦</font></font><code>Recycle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">WarEntity</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { WarFactory originFactory; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> WarFactory OriginFactory { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> =&gt; originFactory; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { Debug.Assert(originFactory == <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"Redefined origin factory!"</span></span>); originFactory = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Recycle</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { originFactory.Reclaim(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç„¶å</font></font><code>Shell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºå¤–å£³</font><font style="vertical-align: inherit;">åˆ›å»ºä¸€ä¸ªç‰¹å®šçš„å®ä½“</font><font style="vertical-align: inherit;">ã€‚</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Shell</span></span> : <span class="hljs-title"><span class="hljs-title">WarEntity</span></span> { }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç„¶å</font></font><code>WarFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨public getterå±æ€§</font><font style="vertical-align: inherit;">åˆ›å»º</font><font style="vertical-align: inherit;">ä¸€ä¸ªå°†åˆ›å»ºå°„å¼¹çš„å°„å¼¹ã€‚</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; [CreateAssetMenu] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">WarFactory</span></span> : <span class="hljs-title"><span class="hljs-title">GameObjectFactory</span></span> { [SerializeField] Shell shellPrefab = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Shell Shellâ‚¬ =&gt; Get(shellPrefab); T Get&lt;T&gt; (T prefab) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : WarEntity { T instance = CreateGameObjectInstance(prefab); instance.OriginFactory = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> instance; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Reclaim</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">WarEntity entity</span></span></span><span class="hljs-function">)</span></span> { Debug.Assert(entity.OriginFactory == <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">"Wrong factory reclaimed!"</span></span>); Destroy(entity.gameObject); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºå¼¹ä¸¸åˆ›å»ºä¸€ä¸ªé¢„åˆ¶ä»¶ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä½¿ç”¨äº†ä¸€ä¸ªå…·æœ‰0.25çš„æ¯”ä¾‹å°ºå’Œæ·±è‰²æè´¨çš„ç®€å•å¤šç»´æ•°æ®é›†ä»¥åŠä¸€ä¸ªç»„ä»¶</font></font><code>Shell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ç„¶ååˆ›å»ºå·¥å‚èµ„äº§å¹¶ä¸ºå…¶åˆ†é…å°„å¼¹çš„é¢„åˆ¶ä»¶ã€‚</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/62a/a5e/803/62aa5e8031ffc282f8f54ea2084884bd.png" width="320" height="88"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ˜äº‰å·¥å‚ã€‚</font></font></i> <br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ¸¸æˆè¡Œä¸º </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦ç§»åŠ¨å¤–å£³ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œæ›´æ–°ã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥ä½¿ç”¨ä¸</font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ›´æ–°æ•ŒäººçŠ¶æ€</font><font style="vertical-align: inherit;">ç›¸åŒçš„æ–¹æ³•</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å®é™…ä¸Šï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥é€šè¿‡åˆ›å»º</font></font><code>GameBehavior</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰©å±•</font></font><code>MonoBehaviour</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶æ·»åŠ è™šæ‹Ÿæ–¹æ³•</font><font style="vertical-align: inherit;">çš„æŠ½è±¡ç»„ä»¶</font><font style="vertical-align: inherit;">æ¥</font><font style="vertical-align: inherit;">ä½¿è¿™ç§æ–¹æ³•é€šç”¨åŒ–</font></font><code>GameUpdate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GameBehavior</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameUpdate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç°åœ¨è¿›è¡Œé‡æ„</font></font><code>EnemyCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå°†å…¶è½¬æ¢ä¸º</font></font><code>GameBehaviorCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GameBehaviorCollection</span></span> { List&lt;GameBehavior&gt; behaviors = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;GameBehavior&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameBehavior behavior</span></span></span><span class="hljs-function">)</span></span> { behaviors.Add(behavior); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameUpdate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; behaviors.Count; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!behaviors[i].GameUpdate()) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lastIndex = behaviors.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>; behaviors[i] = behaviors[lastIndex]; behaviors.RemoveAt(lastIndex); i -= <span class="hljs-number"><span class="hljs-number">1</span></span>; } } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®©æˆ‘ä»¬</font></font><code>WarEntity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰©å±•</font><font style="vertical-align: inherit;">å®ƒ</font></font><code>GameBehavior</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè€Œä¸æ˜¯</font></font><code>MonoBehavior</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">WarEntity</span></span> : <span class="hljs-title"><span class="hljs-title">GameBehavior</span></span> { â€¦ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å°†</font></font><code>Enemy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºæ­¤</font><font style="vertical-align: inherit;">åšåŒæ ·çš„äº‹æƒ…</font><font style="vertical-align: inherit;">ï¼Œè¿™æ¬¡æ˜¯é‡å†™æ–¹æ³•</font></font><code>GameUpdate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Enemy</span></span> : <span class="hljs-title"><span class="hljs-title">GameBehavior</span></span> { â€¦ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameUpdate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { â€¦ } â€¦ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»ç°åœ¨å¼€å§‹ï¼Œ</font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ƒå°†å¿…é¡»è·Ÿè¸ªä¸¤ä¸ªé›†åˆï¼Œä¸€ä¸ªé›†åˆç”¨äºæ•Œäººï¼Œå¦ä¸€ä¸ªé›†åˆç”¨äºéæ•Œäººã€‚</font><font style="vertical-align: inherit;">å¿…é¡»åœ¨å…¶ä»–æ‰€æœ‰å†…å®¹ä¹‹åæ›´æ–°éæ•Œäººã€‚</font></font><br><br><pre> <code class="cs hljs"> GameBehaviorCollection enemies = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameBehaviorCollection(); GameBehaviorCollection nonEnemies = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GameBehaviorCollection(); â€¦ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { â€¦ enemies.GameUpdate(); Physics.SyncTransforms(); board.GameUpdate(); nonEnemies.GameUpdate(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®æ–½Shellå‡çº§çš„æœ€åä¸€æ­¥æ˜¯å°†å®ƒä»¬æ·»åŠ åˆ°éæ•Œäººçš„é›†åˆä¸­ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªåŠŸèƒ½</font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†å…¶ä½œä¸ºæˆ˜äº‰å·¥å‚çš„é™æ€ç«‹é¢æ¥</font><font style="vertical-align: inherit;">æ‰§è¡Œæ­¤æ“ä½œï¼Œ</font><font style="vertical-align: inherit;">ä»¥ä¾¿å¯ä»¥é€šè¿‡Challengeåˆ›å»ºå¼¹ä¸¸</font></font><code>Game.SpawnShell()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œæ‚¨</font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¿…é¡»å…·æœ‰æŒ‡å‘war factoryçš„é“¾æ¥å¹¶è·Ÿè¸ªæ‚¨è‡ªå·±çš„å®ä¾‹ã€‚</font></font><br><br><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] WarFactory warFactory = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; â€¦ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Game instance; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Shell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SpawnShell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Shell shell = instance.warFactory.Shellâ‚¬; instance.nonEnemies.Add(shell); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> shell; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnEnable</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { instance = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9fd/b90/878/9fdb90878989bd89121c012671db1ce3.png" width="320" height="164"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸æˆ˜äº‰å·¥å‚çš„æ¸¸æˆã€‚</font></font></i> <br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é™æ€å¤–è§‚æ˜¯ä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ</font></font></b> <div class="spoiler_text">     ,         ,     . </div></div><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æˆ‘ä»¬æ‹è´å£³ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºå°„å¼¹å®ä¾‹åï¼Œå®ƒåº”è¯¥æ²¿ç€å…¶è·¯å¾„é£è¡Œç›´åˆ°åˆ°è¾¾æœ€ç»ˆç›®æ ‡ã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œæ·»åŠ åˆ°</font></font><code>Shell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•ä¸­</font></font><code>Initialize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ä½¿ç”¨å®ƒæ¥æŒ‡å®šæ‹æ‘„ç‚¹ï¼Œç›®æ ‡ç‚¹å’Œæ‹æ‘„é€Ÿåº¦ã€‚</font></font><br><br><pre> <code class="cs hljs"> Vector3 launchPoint, targetPoint, launchVelocity; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 launchPoint, Vector3 targetPoint, Vector3 launchVelocity </span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.launchPoint = launchPoint; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.targetPoint = targetPoint; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.launchVelocity = launchVelocity; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­åˆ›å»ºå¤–å£³</font></font><code>MortarTower.Launch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶å°†å…¶å‘é€åˆ°è·¯ä¸Šã€‚</font></font><br><br><pre> <code class="cs hljs"> mortar.localRotation = Quaternion.LookRotation(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(dir.x, tanTheta, dir.y)); Game.SpawnShell().Initialize( launchPoint, targetPoint, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(s * cosTheta * dir.x, s * sinTheta, s * cosTheta * dir.y) );</code> </pre> <br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å¼¹ä¸¸è¿åŠ¨ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦</font></font><code>Shell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç§»åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦è·Ÿè¸ªå…¶å­˜åœ¨çš„æŒç»­æ—¶é—´ï¼Œå³ä»å°„å‡»å¼€å§‹ç»è¿‡çš„æ—¶é—´ã€‚</font><font style="vertical-align: inherit;">ç„¶åæˆ‘ä»¬å¯ä»¥è®¡ç®—ä»–åœ¨ä¸­çš„ä½ç½®</font></font><code>GameUpdate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å§‹ç»ˆé’ˆå¯¹å…¶å‘å°„ç‚¹æ‰§è¡Œæ­¤æ“ä½œï¼Œå› æ­¤ï¼Œæ— è®ºåˆ·æ–°ç‡å¦‚ä½•ï¼Œå°„å¼¹å‡å®Œç¾åœ°éµå¾ªè·¯å¾„ã€‚</font></font><br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> age; â€¦ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameUpdate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { age += Time.deltaTime; Vector3 p = launchPoint + launchVelocity * age; py -= <span class="hljs-number"><span class="hljs-number">0.5f</span></span> * <span class="hljs-number"><span class="hljs-number">9.81f</span></span> * age * age; transform.localPosition = p; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/la/lk/0n/lalk0nexu2vobomavqxtxomrcsa.gif"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è„±å£³ã€‚</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºäº†ä½¿å£³ä¸å®ƒä»¬çš„è½¨è¿¹å¯¹é½ï¼Œæˆ‘ä»¬éœ€è¦ä½¿å®ƒä»¬æ²¿ç€å¯¼å‡ºçš„å‘é‡çœ‹ï¼Œè¿™æ˜¯å®ƒä»¬åœ¨ç›¸åº”æ—¶é—´çš„é€Ÿåº¦ã€‚</font></font><br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameUpdate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { â€¦ Vector3 d = launchVelocity; dy -= <span class="hljs-number"><span class="hljs-number">9.81f</span></span> * age; transform.localRotation = Quaternion.LookRotation(d); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/st/w8/vh/stw8vh7pqutsy8bd8ilpigmci8e.gif"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‚®å¼¹åœ¨è½¬åŠ¨ã€‚</font></font></i> <br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æˆ‘ä»¬æ¸…ç†æ¸¸æˆ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ—¢ç„¶å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ç‚®å¼¹æ­£æŒ‰å…¶åº”æœ‰çš„é£è¡ŒçŠ¶æ€ï¼Œåˆ™å¯ä»¥ä»</font></font><code>MortarTower.Launch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯è§†åŒ–æ•ˆæœä¸­</font><font style="vertical-align: inherit;">åˆ é™¤</font><font style="vertical-align: inherit;">è½¨è¿¹ã€‚</font></font><br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Launch</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TargetPoint target</span></span></span><span class="hljs-function">)</span></span> { â€¦ Game.SpawnShell().Initialize( launchPoint, targetPoint, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(s * cosTheta * dir.x, s * sinTheta, s * cosTheta * dir.y) ); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦å¤–ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿å‡»ä¸­ç›®æ ‡åå°†ç‚®å¼¹é”€æ¯ã€‚</font><font style="vertical-align: inherit;">ç”±äºæˆ‘ä»¬å§‹ç»ˆç„å‡†åœ°é¢ï¼Œå› æ­¤å¯ä»¥é€šè¿‡æ£€æŸ¥</font></font><code>Shell.GameUpdate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‚ç›´ä½ç½®æ˜¯å¦ä½äºé›¶æ¥å®Œæˆã€‚</font><font style="vertical-align: inherit;">è®¡ç®—å®ƒä»¬ä¹‹åï¼Œæ‚¨å¯ä»¥ç«‹å³æ‰§è¡Œæ­¤æ“ä½œï¼Œç„¶åå†æ›´æ”¹ä½ç½®å¹¶æ—‹è½¬å¼¹ä¸¸ã€‚</font></font><br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameUpdate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { age += Time.deltaTime; Vector3 p = launchPoint + launchVelocity * age; py -= <span class="hljs-number"><span class="hljs-number">0.5f</span></span> * <span class="hljs-number"><span class="hljs-number">9.81f</span></span> * age * age; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (py &lt;= <span class="hljs-number"><span class="hljs-number">0f</span></span>) { OriginFactory.Reclaim(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } transform.localPosition = p; â€¦ }</code> </pre> <br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> çˆ†è½° </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å°„å‡»ç‚®å¼¹æ˜¯å› ä¸ºå®ƒä»¬å«æœ‰ç‚¸è¯ã€‚</font><font style="vertical-align: inherit;">å½“å¼¹ä¸¸åˆ°è¾¾ç›®æ ‡æ—¶ï¼Œå®ƒå¿…é¡»çˆ†ç‚¸å¹¶å¯¹çˆ†ç‚¸åŒºåŸŸå†…çš„æ‰€æœ‰æ•Œäººé€ æˆä¼¤å®³ã€‚</font><font style="vertical-align: inherit;">çˆ†ç‚¸çš„åŠå¾„å’Œé€ æˆçš„æŸå®³å–å†³äºè¿«å‡»ç‚®å‘å°„çš„ç‚®å¼¹çš„ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬å°†</font></font><code>MortarTower</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºå…¶</font><font style="vertical-align: inherit;">æ·»åŠ </font><font style="vertical-align: inherit;">é…ç½®é€‰é¡¹ã€‚</font></font><br><br><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField, Range(0.5f, 3f)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> shellBlastRadius = <span class="hljs-number"><span class="hljs-number">1f</span></span>; [SerializeField, Range(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">100f</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> shellDamage = <span class="hljs-number"><span class="hljs-number">10f</span></span>;</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ad/8e8/731/9ad8e87318ff5bd96472454663026a45.png" width="320" height="148"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çˆ†ç‚¸åŠå¾„å’Œ15æšå¼¹è¯çš„1.5ä¼¤å®³ã€‚</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­¤é…ç½®ä»…åœ¨çˆ†ç‚¸æœŸé—´æ‰é‡è¦ï¼Œå› æ­¤å¿…é¡»å°†å…¶æ·»åŠ åˆ°</font></font><code>Shell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŠå…¶æ–¹æ³•ä¸­</font></font><code>Initialize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> age, blastRadius, damage; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 launchPoint, Vector3 targetPoint, Vector3 launchVelocity, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> blastRadius, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> damage </span></span></span><span class="hljs-function">)</span></span> { â€¦ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.blastRadius = blastRadius; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.damage = damage; }</code> </pre> <br> <code>MortarTower</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åªèƒ½åœ¨åˆ›å»ºåå°†æ•°æ®ä¼ è¾“åˆ°å°„å¼¹ã€‚ </font></font><br><br><pre> <code class="cs hljs"> Game.SpawnShell().Initialize( launchPoint, targetPoint, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(s * cosTheta * dir.x, s * sinTheta, s * cosTheta * dir.y), shellBlastRadius, shellDamage );</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦å‘å°„ç¨‹å†…çš„æ•Œäººå°„å‡»ï¼Œå­å¼¹å¿…é¡»æ•è·ç›®æ ‡ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å·²ç»æœ‰ä»£ç ï¼Œä½†æ˜¯åœ¨ä¸­</font></font><code>Tower</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ç”±äºå®ƒå¯¹éœ€è¦ç›®æ ‡çš„ä¸€åˆ‡æœ‰ç”¨ï¼Œå› æ­¤è¯·å°†å…¶åŠŸèƒ½å¤åˆ¶åˆ°å…¶ä¸­</font></font><code>TargetPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ä½¿å…¶é™æ€å¯ç”¨ã€‚</font><font style="vertical-align: inherit;">æ·»åŠ ä¸€ä¸ªæ–¹æ³•æ¥å¡«å……ç¼“å†²åŒºï¼Œä¸€ä¸ªå±æ€§æ¥è·å–ç¼“å†²é‡ï¼Œä»¥åŠä¸€ä¸ªæ–¹æ³•æ¥è·å–ç¼“å†²ç›®æ ‡ã€‚</font></font><br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> enemyLayerMask = <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">9</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Collider[] buffer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Collider[<span class="hljs-number"><span class="hljs-number">100</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> BufferedCount { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FillBuffer</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> range</span></span></span><span class="hljs-function">)</span></span> { Vector3 top = position; top.y += <span class="hljs-number"><span class="hljs-number">3f</span></span>; BufferedCount = Physics.OverlapCapsuleNonAlloc( position, top, range, buffer, enemyLayerMask ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BufferedCount &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> TargetPoint </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetBuffered</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> target = buffer[index].GetComponent&lt;TargetPoint&gt;(); Debug.Assert(target != <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"Targeted non-enemy!"</span></span>, buffer[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> target; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ¥æ”¶æœ€å¤§ç¼“å†²åŒºå¤§å°èŒƒå›´å†…çš„æ‰€æœ‰ç›®æ ‡ï¼Œå¹¶åœ¨çˆ†ç‚¸æ—¶é€ æˆä¼¤å®³</font></font><code>Shell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (py &lt;= <span class="hljs-number"><span class="hljs-number">0f</span></span>) { TargetPoint.FillBuffer(targetPoint, blastRadius); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; TargetPoint.BufferedCount; i++) { TargetPoint.GetBuffered(i).Enemyâ‚¬.ApplyDamage(damage); } OriginFactory.Reclaim(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ft/w4/56/ftw456dleh2agua1n3kipiplrdq.gif"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çˆ†å¼¹ã€‚</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨è¿˜å¯ä»¥æ·»åŠ åˆ°</font></font><code>TargetPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é™æ€å±æ€§ä»¥ä»ç¼“å†²åŒºä¸­è·å–éšæœºç›®æ ‡ã€‚</font></font><br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> TargetPoint RandomBuffered =&gt; GetBuffered(Random.Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, BufferedCount));</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™å°†ä½¿æˆ‘ä»¬ç®€åŒ–</font></font><code>Tower</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå› ä¸ºç°åœ¨æ‚¨å¯ä»¥ç”¨æ¥æœç´¢éšæœºç›®æ ‡</font></font><code>TargetPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AcquireTarget</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> TargetPoint target</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TargetPoint.FillBuffer(transform.localPosition, targetingRange)) { target = TargetPoint.RandomBuffered; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } target = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> çˆ†ç‚¸ç‰© </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€åˆ‡æ­£å¸¸ï¼Œä½†çœ‹èµ·æ¥ä»ç„¶ä¸å¤ªå¯ä¿¡ã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥é€šè¿‡åœ¨çˆ†ç‚¸å£³æ—¶æ·»åŠ çˆ†ç‚¸çš„å¯è§†åŒ–æ•ˆæœæ¥æ”¹å–„å›¾ç‰‡ã€‚</font><font style="vertical-align: inherit;">è¿™ä¸ä»…çœ‹èµ·æ¥æ›´æœ‰è¶£ï¼Œè€Œä¸”è¿˜å¯ä»¥ä¸ºæ’­æ”¾å™¨æä¾›æœ‰ç”¨çš„åé¦ˆã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åƒæ¿€å…‰æŸä¸€æ ·åˆ›å»ºçˆ†ç‚¸çš„é¢„åˆ¶ä»¶ã€‚</font><font style="vertical-align: inherit;">åªæœ‰å®ƒä¼šæ˜¯ä¸€ä¸ªæ›´é€æ˜çš„æ˜äº®è‰²çƒã€‚</font><font style="vertical-align: inherit;">æ·»åŠ </font></font><code>Explosion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…·æœ‰è‡ªå®šä¹‰æŒç»­æ—¶é—´</font><font style="vertical-align: inherit;">çš„æ–°å®ä½“ç»„ä»¶</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">åŠç§’å°±è¶³å¤Ÿäº†ã€‚</font><font style="vertical-align: inherit;">å‘å¥¹æ·»åŠ ä¸€ç§</font></font><code>Initialize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¾ç½®çˆ†ç‚¸ä½ç½®å’ŒåŠå¾„çš„</font><font style="vertical-align: inherit;">æ–¹æ³•</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">è®¾ç½®æ¯”ä¾‹æ—¶ï¼Œç”±äºçƒä½“ç½‘æ ¼çš„åŠå¾„ä¸º0.5ï¼Œå› æ­¤éœ€è¦å°†åŠå¾„åŠ å€ã€‚</font><font style="vertical-align: inherit;">è¿™é‡Œä¹Ÿæ˜¯å¯¹èŒƒå›´å†…æ‰€æœ‰æ•Œäººé€ æˆä¼¤å®³çš„å¥½åœ°æ–¹ï¼Œå› æ­¤æˆ‘ä»¬è¿˜å°†æ·»åŠ ä¸€ä¸ªä¼¤å®³å‚æ•°ã€‚</font><font style="vertical-align: inherit;">æ­¤å¤–ï¼Œä»–éœ€è¦ä¸€ç§æ–¹æ³•</font></font><code>GameUpdate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥æ£€æŸ¥æ—¶é—´æ˜¯å¦ç”¨å®Œã€‚</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Explosion</span></span> : <span class="hljs-title"><span class="hljs-title">WarEntity</span></span> { [SerializeField, Range(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> duration = <span class="hljs-number"><span class="hljs-number">0.5f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> age; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> blastRadius, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> damage</span></span></span><span class="hljs-function">)</span></span> { TargetPoint.FillBuffer(position, blastRadius); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; TargetPoint.BufferedCount; i++) { TargetPoint.GetBuffered(i).Enemy.ApplyDamage(damage); } transform.localPosition = position; transform.localScale = Vector3.one * (<span class="hljs-number"><span class="hljs-number">2f</span></span> * blastRadius); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameUpdate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { age += Time.deltaTime; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (age &gt;= duration) { OriginFactory.Reclaim(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘çˆ†ç‚¸</font></font><code>WarFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] Explosion explosionPrefab = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; [SerializeField] Shell shellPrefab = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Explosion Explosionâ‚¬ =&gt; Get(explosionPrefab); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Shell Shell =&gt; Get(shellPrefab);</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d0d/6e6/e49/d0d6e6e49ff7ad3bd485705dabe02b5b.png" width="320" height="60"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çˆ†ç‚¸çš„æˆ˜äº‰å·¥å‚ã€‚</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿˜æ·»åŠ åˆ°</font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Facadeæ–¹æ³•ã€‚</font></font><br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Explosion </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SpawnExplosion</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Explosion explosion = instance.warFactory.Explosionâ‚¬; instance.nonEnemies.Add(explosion); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> explosion; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç°åœ¨ï¼Œå®ƒ</font></font><code>Shell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ä»¥åœ¨è¾¾åˆ°ç›®æ ‡æ—¶äº§ç”Ÿå¹¶å¼•å‘çˆ†ç‚¸ã€‚</font><font style="vertical-align: inherit;">çˆ†ç‚¸æœ¬èº«ä¼šé€ æˆæŸåã€‚</font></font><br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (py &lt;= <span class="hljs-number"><span class="hljs-number">0f</span></span>) { Game.SpawnExplosion().Initialize(targetPoint, blastRadius, damage); OriginFactory.Reclaim(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zk/q_/rb/zkq_rbdw8g0f3ysfxw5qw4yg47e.gif"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çˆ†ç‚¸çš„è´å£³ã€‚</font></font></i> <br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> çˆ†ç‚¸æ›´é¡ºç•… </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸å¯å˜çš„çƒä½“è€Œä¸æ˜¯çˆ†ç‚¸çœ‹èµ·æ¥å¹¶ä¸æ¼‚äº®ã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥é€šè¿‡è®¾ç½®ä¸é€æ˜åº¦å’Œç¼©æ”¾æ¯”ä¾‹æ¥æ”¹å–„å®ƒä»¬ã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥ä¸ºæ­¤ä½¿ç”¨ä¸€ä¸ªç®€å•çš„å…¬å¼ï¼Œä½†è®©æˆ‘ä»¬ä½¿ç”¨æ›´æ˜“äºè®¾ç½®çš„åŠ¨ç”»æ›²çº¿ã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤æ·»åŠ </font></font><code>Explosion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸¤ä¸ªé…ç½®å­—æ®µ</font></font><code>AnimationCurve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†ä½¿ç”¨æ›²çº¿æ¥è°ƒæ•´çˆ†ç‚¸ç”Ÿå‘½å‘¨æœŸå†…çš„å€¼ï¼Œè€Œæ—¶é—´1å°†æŒ‡ç¤ºçˆ†ç‚¸çš„ç»“æŸï¼Œæ— è®ºå…¶çœŸå®æŒç»­æ—¶é—´å¦‚ä½•ã€‚</font><font style="vertical-align: inherit;">çˆ†ç‚¸çš„è§„æ¨¡å’ŒåŠå¾„ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</font><font style="vertical-align: inherit;">è¿™å°†ç®€åŒ–å…¶é…ç½®ã€‚</font></font><br><br><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] AnimationCurve opacityCurve = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; [SerializeField] AnimationCurve scaleCurve = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸é€æ˜åº¦å°†ä»¥é›¶å¼€å§‹å’Œç»“æŸï¼Œå¹³æ»‘ç¼©æ”¾è‡³å¹³å‡å€¼0.3ã€‚</font><font style="vertical-align: inherit;">æ¯”ä¾‹å°†ä»0.7å¼€å§‹ï¼Œç„¶åè¿…é€Ÿå¢åŠ ï¼Œç„¶åæ…¢æ…¢æ¥è¿‘1ã€‚</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bca/b95/968/bcab95968f9d302b9c55954581d37920.png" width="320" height="98"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çˆ†ç‚¸æ›²çº¿ã€‚</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦è®¾ç½®ææ–™çš„é¢œè‰²ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ææ–™å±æ€§å—ã€‚</font><font style="vertical-align: inherit;">é»‘è‰²æ˜¯ä¸é€æ˜åº¦å˜é‡ã€‚</font><font style="vertical-align: inherit;">æ¯”ä¾‹å°ºç°åœ¨è®¾ç½®ä¸º</font></font><code>GameUpdate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦ä½¿ç”¨åŠå¾„å­—æ®µè¿›è¡Œè·Ÿè¸ªã€‚</font><font style="vertical-align: inherit;">åœ¨</font></font><code>Initialize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½ å¯ä»¥ç”¨åŠ å€çš„è§„æ¨¡ã€‚</font><font style="vertical-align: inherit;">é€šè¿‡</font></font><code>Evaluate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨è‡ªå˜é‡</font><font style="vertical-align: inherit;">è°ƒç”¨æ›²çº¿æ¥æ‰¾åˆ°æ›²çº¿çš„å€¼ï¼Œè¯¥è‡ª</font><font style="vertical-align: inherit;">å˜é‡è®¡ç®—ä¸ºçˆ†ç‚¸çš„å½“å‰å¯¿å‘½é™¤ä»¥çˆ†ç‚¸çš„æŒç»­æ—¶é—´ã€‚</font></font><br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> colorPropertyID = Shader.PropertyToID(<span class="hljs-string"><span class="hljs-string">"_Color"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> MaterialPropertyBlock propertyBlock; â€¦ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> scale; MeshRenderer meshRenderer; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { meshRenderer = GetComponent&lt;MeshRenderer&gt;(); Debug.Assert(meshRenderer != <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"Explosion without renderer!"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> blastRadius, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> damage</span></span></span><span class="hljs-function">)</span></span> { â€¦ transform.localPosition = position; scale = <span class="hljs-number"><span class="hljs-number">2f</span></span> * blastRadius; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameUpdate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { â€¦ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (propertyBlock == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { propertyBlock = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MaterialPropertyBlock(); } <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = age / duration; Color c = Color.clear; ca = opacityCurve.Evaluate(t); propertyBlock.SetColor(colorPropertyID, c); meshRenderer.SetPropertyBlock(propertyBlock); transform.localScale = Vector3.one * (scale * scaleCurve.Evaluate(t)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-_/bw/-h/-_bw-hma2vkddbfvicdsuoc7zoa.gif"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŠ¨ç”»çˆ†ç‚¸ã€‚</font></font></i> <br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç¤ºè¸ªå‰‚å£³ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”±äºå¤–å£³å¾ˆå°ï¼Œå¹¶ä¸”å…·æœ‰ç›¸å½“é«˜çš„é€Ÿåº¦ï¼Œå› æ­¤å¾ˆéš¾æ³¨æ„åˆ°å®ƒä»¬ã€‚è€Œä¸”ï¼Œå¦‚æœæ‚¨æŸ¥çœ‹å•ä¸ªå¸§çš„å±å¹•æˆªå›¾ï¼Œåˆ™è½¨è¿¹æ˜¯å®Œå…¨æ— æ³•ç†è§£çš„ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨å¤–å£³ä¸Šæ·»åŠ è·Ÿè¸ªæ•ˆæœä½¿å®ƒä»¬æ›´åŠ æ˜æ˜¾ã€‚å¯¹äºå¸¸è§„å¤–å£³ï¼Œè¿™ä¸æ˜¯å¾ˆç°å®ï¼Œä½†æ˜¯å¯ä»¥è¯´å®ƒä»¬æ˜¯ç¤ºè¸ªå‰‚ã€‚è¿™ç§å¼¹è¯æ˜¯ç‰¹åˆ¶çš„ï¼Œå› æ­¤å®ƒä»¬ä¼šç•™ä¸‹é²œæ˜çš„ç—•è¿¹ï¼Œä½¿å¼¹é“æ¸…æ™°å¯è§ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºè·Ÿè¸ªæœ‰å¤šç§æ–¹æ³•ï¼Œä½†æ˜¯æ‚¨å°†ä½¿ç”¨ä¸€ç§éå¸¸ç®€å•çš„æ–¹æ³•ã€‚æˆ‘ä»¬é‡æ–°åˆ¶ä½œçˆ†ç‚¸ï¼Œä»¥ä¾¿</font></font><code>Shell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨æ¯ä¸ªå¸§</font><font style="vertical-align: inherit;">ä¸­</font><font style="vertical-align: inherit;">åˆ›å»ºä¸€ä¸ªå°çš„çˆ†ç‚¸ã€‚è¿™äº›çˆ†ç‚¸ä¸ä¼šé€ æˆä»»ä½•æŸå®³ï¼Œå› æ­¤æ•è·ç›®æ ‡å°†æµªè´¹èµ„æºã€‚åŠ åˆ°</font></font><code>Explosion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœæŸåå¤§äºé›¶ï¼Œåˆ™å°†å…¶æŸåï¼Œç„¶åå°†æŸä¼¤å‚æ•°è®¾ä¸º</font></font><code>Initialize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯é€‰</font><font style="vertical-align: inherit;">ï¼Œä»¥æ”¯æŒæ­¤ç”¨é€”</font><font style="vertical-align: inherit;">ã€‚</font></font><br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 position, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> blastRadius, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> damage = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0f</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (damage &gt; <span class="hljs-number"><span class="hljs-number">0f</span></span>) { TargetPoint.FillBuffer(position, blastRadius); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; TargetPoint.BufferedCount; i++) { TargetPoint.GetBuffered(i).Enemy.ApplyDamage(damage); } } transform.localPosition = position; radius = <span class="hljs-number"><span class="hljs-number">2f</span></span> * blastRadius; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å°†åœ¨</font></font><code>Shell.GameUpdate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŠå¾„è¾ƒå°</font><font style="vertical-align: inherit;">çš„ä¸€ç«¯</font><font style="vertical-align: inherit;">ï¼ˆä¾‹å¦‚0.1ï¼‰</font><font style="vertical-align: inherit;">åˆ›å»ºçˆ†ç‚¸</font><font style="vertical-align: inherit;">ï¼Œä»¥å°†å…¶å˜æˆç¤ºè¸ªå‰‚å£³ã€‚</font><font style="vertical-align: inherit;">åº”å½“æŒ‡å‡ºï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå°†é€å¸§åˆ›å»ºçˆ†ç‚¸ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œçˆ†ç‚¸å–å†³äºå¸§é€Ÿç‡ï¼Œä½†æ˜¯å¯¹äºè¿™ç§ç®€å•çš„æ•ˆæœï¼Œè¿™æ˜¯å…è®¸çš„ã€‚</font></font><br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameUpdate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { â€¦ Game.SpawnExplosion().Initialize(p, <span class="hljs-number"><span class="hljs-number">0.1f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pb/tc/t-/pbtct-hdqtadh6oirtmjrqu-6-c.gif" alt="å›¾ç‰‡"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¼¹ä¸¸ç¤ºè¸ªå‰‚ã€‚</font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ•™ç¨‹èµ„æ–™åº“</font></font></a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PDFæ–‡ç« </font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN461605/">https://habr.com/ru/post/zh-CN461605/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN461587/index.html">10ä¸ªæ­¥éª¤æœ¬åœ°åŒ–åº”ç”¨ç¨‹åº</a></li>
<li><a href="../zh-CN461589/index.html">äº•å­—æ¸¸æˆï¼šå†…å®¹å‘¨æœŸ</a></li>
<li><a href="../zh-CN461593/index.html">Fï¼ƒä¸Šçš„APIã€‚ åŸºäºè®¿é—®è§’è‰²çš„åº”ç”¨ç¨‹åºæ¨¡å—</a></li>
<li><a href="../zh-CN461595/index.html">ä»ç†è®ºåˆ°å®è·µï¼šå…‰å­ä¸å…‰ä¿¡æ¯å­¦ç³»çš„æœ¬ç§‘ç”Ÿå¦‚ä½•å­¦ä¹ å’Œå·¥ä½œ</a></li>
<li><a href="../zh-CN461601/index.html">éæŠ€æœ¯åˆ›å§‹äººåº”äº†è§£çš„è½¯ä»¶å¼€å‘çŸ¥è¯†</a></li>
<li><a href="../zh-CN461607/index.html">Apple Lightningè§†é¢‘é€‚é…å™¨å¦‚ä½•å·¥ä½œ</a></li>
<li><a href="../zh-CN461611/index.html">Verilogç¼“å­˜å®æ–½</a></li>
<li><a href="../zh-CN461613/index.html">ç”µæ± è‡ªæ”¾ç”µçš„ç ”ç©¶</a></li>
<li><a href="../zh-CN461615/index.html">TWSè€³æœºçš„4ä¸ªè‡´å‘½ç½ªè¿‡ï¼šä¸ºä»€ä¹ˆTrue Wirelessä»ç„¶ä¸æ˜¯ä¸€å›¢ç³Ÿï¼Ÿ</a></li>
<li><a href="../zh-CN461617/index.html">æˆåŠŸåˆ›ä¸šç†è®º</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>