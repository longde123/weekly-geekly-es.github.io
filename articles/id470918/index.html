<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∞üèø ü§±üèº ü§ì F # 9: Opsi Opsi ü§≤ üò© üìº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jika C # memiliki konsep nol untuk tipe referensi dan Nullabe untuk struktur. Ini dapat mengambil salah satu dari 2 bentuk berikut (untuk demonstrasi,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>F # 9: Opsi Opsi</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470918/">  Jika C # memiliki konsep nol untuk tipe referensi dan Nullabe untuk struktur.  Ini dapat mengambil salah satu dari 2 bentuk berikut (untuk demonstrasi, saya menggunakan tipe int di sini, tetapi jenisnya dapat berupa struktur apa pun). <br><br><ul><li>  Tidak dapat dibatalkan </li><li>  int? </li></ul><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Penafian</b> <div class="spoiler_text"><pre><code class="css hljs">   <span class="hljs-selector-tag"><span class="hljs-selector-tag">Nullabe</span></span>  <span class="hljs-selector-tag"><span class="hljs-selector-tag">Nullable</span></span>&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">T</span></span>&gt; ,    <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> ,   </code> </pre> <br></div></div><br>  Keduanya setara. <br><br>  Kelas Nullable menyediakan beberapa properti pembantu dan metode yang membuatnya mudah untuk bekerja dengan tipe dan struktur nol.  Ini adalah sebagai berikut: <br><br><ul><li>  Memiliki nilai </li><li>  Nilai </li><li>  GetValueOrDefault () </li><li>  GetValueOrDefault (T) </li></ul><br>  Ada sesuatu yang sedikit berbeda dari F # dalam bentuk jenis <b>Opsi</b> , yang merupakan jenis yang lebih ramah F # yang lebih suka tidak berurusan dengan nol, tetapi lebih suka berurusan dengan hal-hal dalam hal "Dapat berisi nilai jenis" atau "Mungkin tidak memiliki nilai. "  Kedengarannya seperti Nullable, tetapi pada akhirnya tipe F #, jadi Anda dapat mengharapkannya digunakan secara normal dalam hal-hal F #. <br><br>  Hal lain yang perlu diperhatikan dengan tipe Opsi F # adalah dapat digunakan untuk jenis apa pun, bukan hanya struktur.  Ini berbeda dari .NET Nullable, yang hanya dapat digunakan dengan struktur. <br><br>  Nilai <b>Tidak ada</b> digunakan ketika tidak ada nilai;  jika tidak, ekspresi <b>Some</b> (...) memberikan nilai.  Nilai Some and None dapat digunakan saat mencocokkan dengan pola, contoh yang akan kita lihat di posting ini. <br><br>  Seperti Nullable, tipe F # Option memiliki beberapa properti / metode pembantu, yang ditunjukkan pada tabel di bawah ini. <br><br>  <b>Tidak ada</b> <br>  <i>Pilihan T</i> <br>  Properti statis yang memungkinkan Anda membuat nilai parameter dengan nilai Tidak Ada. <br>  <b>Isnone</b> <br>  <i>bool</i> <br>  Mengembalikan nilai true jika parameternya adalah Tidak ada. <br>  <b>Masalah</b> <br>  <i>bool</i> <br>  Mengembalikan nilai true jika parameter memiliki nilai selain Tidak Ada. <br>  <b>Beberapa</b> <b><br></b>  <i>Pilihan T</i> <br>  Anggota statis yang membuat parameter yang nilainya bukan Tidak ada. <br>  <b>Nilai</b> <br>  <i>'T</i> <i><br></i>  Mengembalikan nilai dasar atau melempar NullReferenceException jika nilainya Tidak Ada. <br><br><h3>  Membuat Opsi </h3><br>  Jadi, sekarang kita tahu apa jenis Opsi, bagaimana kita membuatnya.  Mari kita lihat beberapa contoh.  Perhatikan bahwa dalam contoh ini, saya menggunakan metode pembantu IsSome / IsNone.  Secara pribadi, saya percaya bahwa membandingkan dengan sampel adalah cara terbaik, karena ini akan membantu Anda membandingkan semua kasus, termasuk opsi Tidak. <br><br>  Sebenarnya, saya akan menunjukkan kepada Anda betapa mudahnya untuk mendapatkan sesuatu yang salah ketika Anda bekerja dengan jenis Opsi jika Anda memutuskan untuk menggunakan metode pembantu, tetapi pertama-tama mari kita lihat contoh case yang tepat. <br><br><pre> <code class="erlang hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> someInt = Some(<span class="hljs-number"><span class="hljs-number">43</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> someString = Some(<span class="hljs-string"><span class="hljs-string">"cat"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> printTheOption (opt :Option&lt;'a&gt;) = printfn <span class="hljs-string"><span class="hljs-string">"Actual Option=%A"</span></span> opt printfn <span class="hljs-string"><span class="hljs-string">"IsNone=%b, IsSome=%b Value=%A\r\n\r\n"</span></span> opt.IsNone opt.IsSome opt.Value printfn <span class="hljs-string"><span class="hljs-string">"let someInt = Some(43)"</span></span> printfn <span class="hljs-string"><span class="hljs-string">"let someString = Some(\"cat\")"</span></span> printfn <span class="hljs-string"><span class="hljs-string">"printTheOption (someInt)"</span></span> printTheOption someInt printfn <span class="hljs-string"><span class="hljs-string">"printTheOption (someString)"</span></span> printTheOption someString</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/ae4/af3/8ca/ae4af38ca8dd1f725292179fc98697da.png" alt="gambar"><br><br>  Tetapi bagaimana jika kita mencobanya lagi menggunakan kode ini, di mana kita tidak memiliki nilai Option, yang akan kita sampaikan ke fungsi printTheOption: <br><br><pre> <code class="erlang hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> demoNone = None <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> printTheOption (opt :Option&lt;'a&gt;) = printfn <span class="hljs-string"><span class="hljs-string">"Actual Option=%A"</span></span> opt printfn <span class="hljs-string"><span class="hljs-string">"IsNone=%b, IsSome=%b Value=%A\r\n\r\n"</span></span> opt.IsNone opt.IsSome opt.Value printfn <span class="hljs-string"><span class="hljs-string">"let demoNone = None"</span></span> printfn <span class="hljs-string"><span class="hljs-string">"printTheOption demoNone"</span></span> printTheOption demoNone</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/802/4eb/a28/8024eba2857b3bac536be8365ad69770.png" alt="gambar"><br><br>  Seperti yang Anda lihat, kami punya masalah di sini.  Masalahnya adalah bahwa kami mencoba untuk mendapatkan nilai Opsi menggunakan properti.Nilai pembantu, dalam hal ini Tidak ada, jadi kami mendapat NullReferenceException.  Terlihat pada tabel di atas bahwa ketika Anda menggunakan properti dan metode bantu, Anda bisa mendapatkan pengecualian.  Nah, Anda bisa menggunakan metode IsNone dan Anda akan selalu memeriksa nilainya menggunakan ini ketika Anda bisa menggunakan pencocokan pola bersih yang bagus. <br><br>  Jika Anda tidak dapat menerima ini, tanyakan pada diri sendiri berapa kali Anda harus memeriksa nilai nol ketika menggunakan C #.  Ini bahkan membuat orang memasukkan konstruksi fungsional, seperti Maybe Null Monad, dalam kode .NET biasa. <br><br>  Jadi, sekarang kita telah melihat bahaya menggunakan metode / properti pembantu, sekarang mari kita perhatikan bagaimana kita dapat menghindari pengecualian ini: <br><br><pre> <code class="erlang hljs">et printTheOption (opt :Option&lt;'a&gt;) = match opt with | Some a -&gt; printfn <span class="hljs-string"><span class="hljs-string">"opt is Some, and has value %A"</span></span> a | None -&gt; printfn <span class="hljs-string"><span class="hljs-string">"opt is None"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> demoNone = None <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> someInt = Some <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> someString = Some <span class="hljs-string"><span class="hljs-string">"crazy dude in the monkey house"</span></span> printTheOption demoNone printTheOption someInt printTheOption someString</code> </pre> <br>  Pendapat pribadi saya adalah bahwa itu lebih mudah dibaca daripada kode yang akan dihiasi dengan IsSome / IsNone di mana-mana.  Ini, tentu saja, adalah urusan semua orang, tetapi kenyataan bahwa kami telah membahas semua dasar-dasar di sini dalam fungsi sederhana ini tidak dapat diabaikan. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1f5/4e0/a2a/1f54e0a2a31a62cb9a7e0293298f2cbe.png" alt="gambar"><br><br><h3>  Opsi vs Null </h3><br>  Jadi, kami berbicara tentang Opsi dalam F # dibandingkan dengan Nullabe, dan kami tahu bahwa jenis Opsi dapat digunakan dengan jenis apa pun, sementara Nullable hanya dapat digunakan dengan struktur.  Tapi bagaimana dengan tipe Opsi dibandingkan dengan tipe referensi reguler di .NET.  Nah, satu kemenangan besar untuk Opsi adalah ketika Anda menggunakan jenis referensi di .NET, Anda berurusan dengan referensi penunjuk, yang karenanya dapat diatur ke nol.  Namun, jenis objek tetap sama seperti yang dideklarasikan, yang mungkin berisi referensi yang valid ke objek di heap (Heap) atau mungkin nol. <br><br>  Adalah normal untuk menulis seperti ini: <br><br><pre> <code class="erlang hljs">string s1 = <span class="hljs-string"><span class="hljs-string">"cats"</span></span>; int s1Length = s1.Length; string s2 = null; int s2Length = s2.Length;</code> </pre> <br>  Ini akan berhasil dikompilasi.  Namun, ketika kita menjalankan ini, kita akan mendapatkan NullReferenceException, untuk itu kita akan dipaksa keluar untuk melindungi semua kode dari kemungkinan adanya null.  Ini membosankan cukup cepat, bahkan jika Anda memiliki kelas perlindungan kecil yang menyenangkan yang akan memeriksa nilainya dan menanganinya / melempar pengecualian yang lebih bermakna. <br><br>  Cuplikan layar ini menggunakan LinqPad, jadi mungkin tampak sedikit tidak biasa jika Anda belum pernah melihat LinqPad sebelumnya, tapi percayalah, Anda masih mendapatkan hasil yang sama dalam IDE yang berbeda. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bc0/36c/5b0/bc036c5b0a7b7e81f74b87209d39a8ed.png" alt="gambar"><br><br>  Sekarang mari kita lihat bagaimana kode ekuivalen dalam F # akan terlihat <br><br><pre> <code class="erlang hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> s1 = <span class="hljs-string"><span class="hljs-string">"Cats"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> s1Length = s1.Length; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> s2 = None <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> s2Length = s2.Length; //excplicily string typed None <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> s3 = Option.None <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> s3Length = s3.Length;</code> </pre> <br>  Pada kode ini, Anda akan mendapatkan kesalahan kompilasi langsung, karena s3 akan dianggap tipe lain yang tidak memiliki properti "Panjang". <br><br><h3>  Perbandingan Opsi </h3><br>  Jenis opsi dianggap sama, mereka dari jenis yang sama, dan bahwa jenis yang dikandungnya sama, yang mematuhi aturan kesetaraan dari jenis yang dimiliki. <br><br>  Jadi hal semacam ini dapat menyebabkan kesalahan waktu kompilasi langsung di F # <br><br><pre> <code class="erlang hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> o1 = Some <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> o2 = Some <span class="hljs-string"><span class="hljs-string">"Cats"</span></span> printfn <span class="hljs-string"><span class="hljs-string">"o1=o2 : %b"</span></span> (o1 = o2)</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/16f/f67/263/16ff67263839f6f581343d34d79619a4.png" alt="gambar"><br><br>  Ini akan berfungsi seperti yang diharapkan karena tipenya sama <br><br><pre> <code class="erlang hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> o1 = Some <span class="hljs-string"><span class="hljs-string">"Cats"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> o2 = Some <span class="hljs-string"><span class="hljs-string">"Cats"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> o3 = Some <span class="hljs-string"><span class="hljs-string">"cats"</span></span> printfn <span class="hljs-string"><span class="hljs-string">"o1=o2 : %b"</span></span> (o1 = o2) printfn <span class="hljs-string"><span class="hljs-string">"o2=o3 : %b"</span></span> (o2 = o3)</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/113/103/5f9/1131035f97e9929bd0dd703d669e7afb.png" alt="gambar"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id470918/">https://habr.com/ru/post/id470918/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id470902/index.html">Kinerja tinggi dan partisi asli: Zabbix dengan dukungan TimescaleDB</a></li>
<li><a href="../id470904/index.html">Jalur terlembut dan paling berbulu di Machine Learning dan Deep Neural Networks</a></li>
<li><a href="../id470908/index.html">Untuk pertama kalinya di dunia dengan bantuan teknologi aditif, perakitan mesin pesawat terbang berukuran besar diperoleh</a></li>
<li><a href="../id470910/index.html">Apa yang dapat dilakukan dengan anotasi kontrak layanan mikro?</a></li>
<li><a href="../id470916/index.html">Pos pemeriksaan elektronik "termurah" di Rusia dikendalikan dari smartphone</a></li>
<li><a href="../id470920/index.html">5+ Cara Menghubungkan ke DataLine Cloud</a></li>
<li><a href="../id470922/index.html">Pengumuman mitap ThinkJava # 10 di Kharkov</a></li>
<li><a href="../id470924/index.html">Mengapa untuk proyek baru saya mengambil Robot Framework</a></li>
<li><a href="../id470926/index.html">‚ÄúKami saling percaya. Misalnya, kami tidak memiliki gaji sama sekali ‚Äù- sebuah wawancara besar dengan Tim Lister, penulis Peopleware</a></li>
<li><a href="../id470928/index.html">Praktik terbaik untuk menjalankan Buildah di dalam sebuah wadah</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>