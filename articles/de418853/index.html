<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèùÔ∏è ‚úçüèª üí• Details zur Aktualisierung von Segregated Witness und den Konsequenzen seiner Einf√ºhrung in Bitcoin üö± üéÖ üç∫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel haben wir versucht, die √Ñnderungen im Bitcoin-Protokoll, die infolge des Softfork-Updates f√ºr getrennte Zeugen aufgetreten sind, im ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Details zur Aktualisierung von Segregated Witness und den Konsequenzen seiner Einf√ºhrung in Bitcoin</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/distributedlab/blog/418853/">  In diesem Artikel haben wir versucht, die √Ñnderungen im Bitcoin-Protokoll, die infolge des Softfork-Updates f√ºr getrennte Zeugen aufgetreten sind, im Detail zu untersuchen.  Wir haben Probleme im Zusammenhang mit der Formbarkeit von Transaktionen, der Aufrechterhaltung der Abw√§rtskompatibilit√§t, der Erh√∂hung des Durchsatzes, neuen Transaktionsserialisierungsformaten, neuen Skriptoptionen, dem Bech32-Adressformat und seinen Vorteilen, Konzepten f√ºr Gewicht, Gr√∂√üe und virtuelle Gr√∂√üe angesprochen.  Dar√ºber hinaus sind im Folgenden die wichtigsten Statistiken zur Anpassung des Updates aufgef√ºhrt und Antworten auf h√§ufig gestellte Fragen zum Thema dieses Updates dargestellt. <br><a name="habracut"></a><br>  Bevor Sie mit einer detaillierten Beschreibung aller √Ñnderungen in diesem Update fortfahren, empfehlen wir Ihnen, sich mit der Hauptidee von Segregated Witness vertraut zu machen.  W√∂rtlich wird Segregated Witness aus dem Englischen als "separater Zeuge" √ºbersetzt.  Der Bitcoin-Wettbewerb impliziert, dass der Nachweis des Eigentums an M√ºnzen getrennt von den Transaktionsstammdaten gespeichert wird, wie in der Abbildung angegeben. <br><img src="https://habrastorage.org/getpro/habr/post_images/140/425/704/14042570432bac8ca7d1f3d3058e43ae.png" alt="Bild"><br>  Wenn wir das gesamte Protokollupdate ber√ºcksichtigen, enth√§lt es viele weitere Verbesserungen.  Mit SegWit k√∂nnen Sie die Netzwerkbandbreite erh√∂hen, den Besitznachweis f√ºr M√ºnzen von den √ºbrigen Transaktionsdaten trennen, die M√§ngel des Transaktionsformats beheben, die mit der M√∂glichkeit verbunden sind, Daten in signierten Transaktionen zu √§ndern (Formbarkeit von Transaktionen), und gleichzeitig die Abw√§rtskompatibilit√§t mit fr√ºheren Versionen des Protokolls beibehalten.  Der gr√∂√üte Vorteil dieses Updates besteht darin, dass Sie viele sehr wichtige Off-Chain-L√∂sungen zus√§tzlich zum Bitcoin-Protokoll implementieren k√∂nnen. <br><br><h2>  Problem und L√∂sung der Formbarkeit von Transaktionen </h2><br>  Unter dem Strich besteht bei der Arbeit in Bitcoin die M√∂glichkeit, die Transaktion so zu √§ndern, dass sie w√§hrend der √úberpr√ºfung korrekt bleibt.  Diese √Ñnderungen sind sehr geringf√ºgig und wirken sich nicht auf die Adressen des Absenders und Empf√§ngers aus. Sie reichen jedoch aus, um das Ergebnis des Hashs zu √§ndern.  Mit anderen Worten, die Transaktion √ºbertr√§gt die M√ºnzen an ihre vorherigen Adressen, aber der ge√§nderte Hashwert stimmt nicht mehr mit der ge√§nderten Transaktion mit der urspr√ºnglichen √ºberein. <br><br>  Offensichtlich kann die oben beschriebene Situation nur bei Transaktionen auftreten, die noch keine Best√§tigung erhalten haben.  Ohne seine L√∂sung ist es unm√∂glich, einen zuverl√§ssigen Betrieb von Off-Chain-Protokollen zu erreichen, einschlie√ülich des Aufbaus von Ketten unbest√§tigter Transaktionen.  Da beim Kompilieren einer Transaktion nicht alle Daten signiert werden (z. B. k√∂nnen Sie scriptSig nicht signieren), gibt es die M√∂glichkeit verschiedener Arten von Angriffen: <br><br><ol><li>  <i>√Ñndern Sie das Signaturformat</i> .  Im Bitcoin-Protokoll ist das Signaturformat nicht streng genehmigt und h√§ngt von der Implementierung der OpenSSL-Bibliothek ab, in der das strenge Format auch f√ºr die Signatur nicht definiert ist.  Ein Dritter kann die abgefangene Transaktion √§ndern, was zu einer √Ñnderung des Hashwerts f√ºhrt. </li><li>  <i>Auswirkungen direkt auf scriptSig</i> .  Wie bereits erw√§hnt, enth√§lt scriptSig eine Reihe von Vorg√§ngen, mit denen √ºberpr√ºft werden kann, ob ein bestimmter Benutzer Eigent√ºmer der M√ºnzen ist.  Zus√§tzlich zu diesen Vorg√§ngen k√∂nnen Sie weitere hinzuf√ºgen.  Einige harmlose Vorg√§nge, die nichts beeinflussen, f√ºhren zu einer √Ñnderung des Hashwerts der Transaktion. <br></li></ol><br>  Auf diese Weise k√∂nnen Sie den Hashwert einer Transaktion √§ndern, ohne Zugriff auf private Schl√ºssel zu haben.  Warum ist das √Ñndern eines Hashwerts so unerw√ºnscht? <br><br>  Zun√§chst ist zu beachten, dass es m√∂glich ist, eine Kopie der urspr√ºnglichen Transaktion zu erstellen, √Ñnderungen hinzuzuf√ºgen, die die Richtigkeit der Transaktion w√§hrend der √úberpr√ºfung nicht beeintr√§chtigen, und sie an das Netzwerk zu senden.  Eine modifizierte Kopie mit einem anderen Hashwert gibt die gleichen M√ºnzen wie das Original aus, sodass sie mit der urspr√ºnglichen Transaktion um Best√§tigung konkurrieren kann. <br><br>  Off-Chain-Protokolle wurden oben erw√§hnt.  F√ºr ihre Implementierung ist eine L√∂sung f√ºr das Problem der Formbarkeit von Transaktionen erforderlich.  Im Mittelpunkt ihrer Arbeit steht der Aufbau von Ketten unbest√§tigter Transaktionen.  Das √Ñndern des Hashwerts der ersten Transaktion f√ºhrt zur Ung√ºltigkeit der gesamten Kette unbest√§tigter Transaktionen. <br><br>  Mit dem SegWit-Update wurden strenge Regeln f√ºr das Ausf√ºllen der Felder definiert, sodass die Probleme im Zusammenhang mit der Formbarkeit von Transaktionen f√ºr Transaktionen des neuen Formats als behoben betrachtet werden k√∂nnen.  Dadurch konnten wir Daten spezifizieren und eindeutig serialisieren, wodurch die Dualit√§t beseitigt wurde. <br><br><h2>  Abw√§rtskompatibilit√§t beim Verteilen eines Blocks √ºber ein Netzwerk </h2><br>  Nach alten Regeln betr√§gt die maximale Blockgr√∂√üe 1 MB und enth√§lt Transaktionen mit integrierten Beweisen.  W√§hrend die neuen Regeln davon ausgehen, dass die maximale Basisblockgr√∂√üe 1 MB betr√§gt, gibt es zus√§tzlich eine Datenstruktur mit Beweisen.  Dementsprechend √ºberschreitet die Gesamtgr√∂√üe des neuen Blocks 1 MB. <br><br>  Aus Gr√ºnden der Abw√§rtskompatibilit√§t erm√∂glichen die Protokollregeln den alten Knoten, mit neuen Bl√∂cken zu arbeiten, sie erhalten den Block jedoch nur in der Grundkonfiguration mit einer maximalen Gr√∂√üe von 1 MB.  Die Zeugenstruktur steht ihnen nicht zur Verf√ºgung.  Neue Knoten erhalten einen vollst√§ndigen Block mit Transaktionen und Beweisen.  Die folgende Abbildung hilft Ihnen, sich mit dieser Frage vertraut zu machen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d8/995/70d/5d899570dc1234ff9f57fd1dd9793171.png" alt="Bild"><br><br>  Auf der linken Seite sehen Sie ein Diagramm der Funktionsweise des Bitcoin-Protokolls vor der Aktivierung von Segregated Witness.  Der Block hatte eine maximale Gr√∂√üe von 1 MB und wurde in einer Form auf verschiedene Netzwerkknoten verteilt. <br><br>  Da die Blockgr√∂√üe begrenzt ist, ist auch die Anzahl der Transaktionen, die darin platziert werden k√∂nnen, begrenzt, und die Systemkapazit√§t h√§ngt davon ab.  Als sich die Frage nach der Erh√∂hung des Durchsatzes stellte, suchten sie zun√§chst nach M√∂glichkeiten, die maximale Blockgr√∂√üe zu erh√∂hen. <br><br><h2>  M√∂glichkeiten zur Steigerung des Durchsatzes </h2><br>  Betrachten Sie die beiden Hauptmethoden zur L√∂sung des Problems der Erh√∂hung des Systemdurchsatzes.  Jedes Angebot wird vom Entwicklungsteam des Bitcoin-Protokolls sorgf√§ltig gepr√ºft und getestet.  Wenn die Community eine Einigung erzielt und beschlossen hat, den Vorschlag in das Protokoll umzusetzen, wird ein Update ver√∂ffentlicht. <br><br>  Hardfork Update.  Die h√§ufigste Aktualisierung besteht darin, den Block zu vergr√∂√üern.  Es wird davon ausgegangen, dass eine Einheit mehr Transaktionen aufnehmen und den Durchsatz erh√∂hen kann.  Eine solche Einheit wird jedoch von Knoten, die nach dem alten Protokoll arbeiten, nicht akzeptiert. Die Regeln besagen, dass die maximale Blockgr√∂√üe 1 MV nicht √ºberschreiten darf.  Eine solche √Ñnderung erfordert Hardfork, die organisatorisch komplexer ist als Softfork. <br><br>  SoftFork-Update.  Mit Segregated Witness k√∂nnen wir dieses Problem mit Softfork l√∂sen.  Wie genau?  Es erm√∂glicht uns, den Block in zwei Teile zu unterteilen, von denen der erste Transaktionen speichert und der zweite Beweise enth√§lt.  Gleichzeitig empfangen die neuen Netzwerkknoten beide Teile, w√§hrend die alten nur einen 1-MB-Transaktionsblock erhalten.  Alte Knoten k√∂nnen keine Bl√∂cke mit Beweisen empfangen und k√∂nnen dementsprechend die empfangenen Transaktionen nicht validieren. Dies erm√∂glicht ihnen jedoch, an der Konsensbildung teilzunehmen und nicht auf Hardfork zur√ºckzugreifen, sondern schrittweise auf neue Software umzusteigen. <br><br><h2>  Innovationen getrennt Zeugnis </h2><br>  √úberlegen Sie, was im Update f√ºr getrennte Zeugen enthalten ist.  Die erste und wichtigste Neuerung von Segregated Witness ist das neue Transaktionsserialisierungsformat.  Zus√§tzlich zu den bereits bekannten Feldern enth√§lt die neue Transaktion drei neue Felder: marker, flag, die f√ºr die Versionierung verwendet werden. In diesem Fall sind sie streng festgelegt. In den folgenden Protokollen k√∂nnen sie jedoch ge√§ndert werden, ebenso wie das Zeugenfeld.  Zeugen (Zeugenaussagen) sind tats√§chlich eine Reihe von Nachweisen f√ºr den Besitz von M√ºnzen, die aus dem Hauptteil der Transaktion entnommen werden.  Strukturell sieht es aus wie eine Reihe von Eingaben, wobei jedes Zeugen-Datenelement einer Eingabe mit einer bestimmten Nummer entspricht, mit der Sie Beweise mit bestimmten ausgegebenen M√ºnzen vergleichen k√∂nnen. <br><br><h2>  Zeugen der Transaktions-ID </h2><br>  Um die Transaktionskennung (Transaktions-ID, txid) zu erhalten, m√ºssen Sie die Transaktion selbst in einem speziellen Serialisierungsformat auf eine Datensequenz bringen und dann den Hash-Wert aus dieser Datensequenz abrufen.  Mit der Einf√ºhrung von Segregated Witness wurden eine neue Kennung, eine Zeugen-Transaktions-ID (wtxid) und ein neues Serialisierungsformat angezeigt.  Bei √§lteren Transaktionen, bei denen Geld ausgegeben wird, ohne dass Segregated Witness verwendet wird, ist wtxid mit txid identisch, da Segregated Witness keine neuen Felder hinzugef√ºgt werden. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad8/429/d20/ad8429d2070a8b7c76e2a5b84f937dba.png" alt="Bild"><br><br>  Wtxid wird ben√∂tigt, um einen alternativen Merkle-Baum f√ºr Beweise zu erstellen.  Es wird auf die gleiche Weise wie bei normalen Transaktionen erstellt, anstelle des Transaktions-Hash wird nur wtxid verwendet.  Dementsprechend werden wtxid paarweise gehasht und f√ºhren zur Merkle-Wurzel. <br><br>  Es ist wichtig zu beachten, dass Merkle root in eine Coinbase-Transaktion und nicht in den Block-Header eingef√ºgt wird.  Wenn sich root im Blockheader befindet, √§ndert sich die Struktur des Blocks.  Knoten, die das alte Protokoll unterst√ºtzen, konnten mit solchen Bl√∂cken nicht funktionieren.  Und alle Bem√ºhungen, die Abw√§rtskompatibilit√§t aufrechtzuerhalten, w√ºrden dieser Inkonsistenz entgegenstehen.  Daher wird root in einen der Ausg√§nge der Coinbase-Transaktion eingef√ºgt.  Wenn alle Knoten zu Segregated Witness wechseln, kann sich diese Situation √§ndern und neue Ans√§tze werden in Betracht gezogen. <br><br><h2>  Zeugenprogramme zur Festlegung der Bedingungen f√ºr das Ausgeben von M√ºnzen </h2><br>  Schauen wir uns an, wie das Segregated Witness-Transaktionsskript erstellt wird und wie √§ltere Netzwerkknoten verstehen, dass Segregated Witness-Transaktionen korrekt sind, obwohl sie keinen Nachweis √ºber den Besitz von M√ºnzen erhalten. <br><br>  Das Skript, das die Regeln f√ºr das Ausgeben von M√ºnzen aus einer Transaktion im neuen Format beschreibt, besteht aus zwei Teilen.  Der erste Teil ist das Zeugenversionsbyte (das Byte, das die Version des Zeugenprogramms angibt).  Es kann Werte von 0 bis 16 annehmen (OP0-OP16), jetzt wird OP0 verwendet.  In Zukunft werden m√∂glicherweise neue Versionen des Protokolls mit Unterst√ºtzung f√ºr andere Versionen des Zeugenprogramms angezeigt.  Der zweite Teil ist das Zeugenprogramm.  Dieser Teil kann eine Gr√∂√üe von 2 bis 40 Bytes haben. <br><br>  Das Zeugenprogramm ist das Ergebnis eines Hash-Skripts.  Das Zeugen-Skript selbst enth√§lt eine vollst√§ndige Beschreibung der Bedingungen f√ºr das Ausgeben von M√ºnzen.  Die Zeugenaussagen enthalten einen Eigentumsnachweis f√ºr M√ºnzen, die die Bedingungen im Zeugenschrift erf√ºllen m√ºssen.  Dementsprechend bestehen Zeugenaussagen immer aus zwei Teilen: einem Zeugenskript und einem Eigentumsnachweis f√ºr M√ºnzen. <br><br>  Es ist erw√§hnenswert, dass das Zeugenprogramm keine Operationen enth√§lt (√ºbereinstimmende Hashwerte, √úberpr√ºfung elektronischer Signaturen) und das Skript selbst mit dem OP0-Code beginnt. Daher ist es f√ºr alle alten Knoten g√ºltig.  Dar√ºber hinaus pr√ºfen Knoten, die nicht auf SegWit aktualisiert wurden, nicht den Besitznachweis f√ºr M√ºnzen auf neue Formatausgaben. Sie betrachten eine solche Verschwendung in jedem Fall als korrekt.  Streng genommen akzeptieren alte Knoten Transaktionen eines neuen Formats, auch wenn der Absender die entsprechenden M√ºnzen nicht besitzt.  Aus diesem Grund verlangt SegWit, dass die Besitzer der meisten Bitcoin-Mining-Energie dieses Update akzeptieren.  Eine weitere Funktion ist, dass das scriptSig einer Transaktion, die M√ºnzen aus der Ausgabe des neuen Formats ausgibt, leer ist. <br><br><h2>  Neue Optionen zum Festlegen der Bedingungen f√ºr das Ausgeben von M√ºnzen </h2><br>  Mit der Einf√ºhrung von SegWit wurden zwei Standardformate f√ºr scriptPubKey vorgeschlagen, die eine Alternative zu den beiden g√§ngigsten Formaten zum Festlegen von Regeln f√ºr den M√ºnzausgaben darstellten, bevor dieses Update ver√∂ffentlicht wurde.  Betrachten wir sie der Reihe nach. <br><br>  <i>Pay-to-Zeuge-Hash f√ºr √∂ffentliche Schl√ºssel</i> (P2WPKH) ist ein Analogon zum Standard-Hash f√ºr Pay-to-Public-Key.  Was ist der Unterschied?  Wie bereits erw√§hnt, ist scriptSig nicht ausgef√ºllt und bleibt leer.  Alle Eigentumsnachweise f√ºr M√ºnzen werden an die Zeugen-Datenstruktur √ºbertragen. <br><br>  In diesem Fall wird das zuvor ber√ºcksichtigte Skript, die Version und der Hash des √∂ffentlichen Schl√ºssels, bei dem es sich um das Zeugenprogramm handelt, in scriptPubKey eingef√ºgt.  Ein Knoten im Netzwerk unterscheidet ein solches Ausgabenskript von anderen, da es eine Version von eins und eine Datengr√∂√üe von 20 Byte hat.  Eine andere Version und eine andere Gr√∂√üe haben andere Ausgabenregeln. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8e6/5da/4ee/8e65da4eeac53c4333499dccc963f3b1.png" alt="Bild"><br><br>  In diesem Fall besteht scriptPubKey aus zwei Teilen: Die Zeugenversionsnummer ist Null und der Hashwert des √∂ffentlichen Schl√ºssels des Empf√§ngers.  ScriptSig ist leer und die Zeugenangaben enthalten eine elektronische Signatur und einen √∂ffentlichen Schl√ºssel zur √úberpr√ºfung. <br><br>  <i>Pay-to-Zeuge-Skript-Hash</i> (P2WSH) ist ein Analogon zum Standard-Pay-to-Script-Hash.  In diesem Fall kann ein benutzerdefiniertes Skript verwendet werden, um die Regeln f√ºr das Ausgeben von M√ºnzen festzulegen.  Wie unterscheidet ein Host ein solches Skript vom vorherigen?  In diesem Fall hat die Version immer noch den Wert Eins, und das Zeugenprogramm ben√∂tigt 32 Byte und ist ein Hashwert aus dem Zeugenskript.  Wenn eine Transaktion zu einem Host kommt, der ein Skript mit der ersten Version enth√§lt, dessen Gr√∂√üe jedoch von den Werten von 20 oder 32 Byte abweicht, lehnt der Host diese Transaktion ab, da er nicht wei√ü, wie er damit arbeiten soll. <br><br>  Die Daten der Zeugen sind hier in zwei Teile unterteilt.  Die erste enth√§lt eine Reihe von Nachweisen f√ºr den Besitz von M√ºnzen, dh eine Reihe von Unterschriften.  Im zweiten Teil wird ein Zeugen-Skript platziert, dessen Inhalt nur die Regeln f√ºr das Ausgeben von M√ºnzen festlegt. In diesem Fall wird es jedoch zum Zeitpunkt der Ausgabe und zum Zeitpunkt des Versendens der M√ºnzen angegeben. Der Hash-Wert wurde angegeben. <br><img src="https://habrastorage.org/getpro/habr/post_images/eb6/b5f/623/eb6b5f623d679822fbded33979e4c27e.png" alt="Bild"><br>  In diesem Fall besteht scriptPubKey aus zwei Teilen: Die Zeugenzahl der Version ist Null und der Hashwert des Zeugenskripts f√ºr den Fall der Mehrfachsignatur 1 von 2.  ScriptSig ist leer und die Zeugenangaben enthalten die elektronische Signatur und das urspr√ºngliche Zeugenskript im Klartext. <br><br><h2>  P2SH-Wrapper </h2><br>  Das neue Skriptformat unterscheidet sich vom alten.  Dementsprechend wissen alte Dienste und Brieftaschen nicht, wie sie mit diesem Skriptformat arbeiten und wie sie es erstellen sollen.  Aus Gr√ºnden der Abw√§rtskompatibilit√§t verwenden Segregated Witness-Transaktionen mit P2SH einen speziellen ‚ÄûWrapper‚Äú, mit dem Sie eine Transaktion erstellen k√∂nnen, die die Eigenschaften einer Segregated Witness-Transaktion aufweist, sich jedoch nicht von der f√ºr die Au√üenwelt √ºblichen P2SH-Transaktion unterscheidet. <br><br>  P2SH wird verwendet, um die Arbeit des Absenders zu vereinfachen und ihn nicht mit den Details der Implementierung des Einl√∂seskripts des Empf√§ngers zu belasten.  In diesem Fall gibt der Empf√§nger dem Absender nur den Hash-Wert "Skript einl√∂sen", und das Skript selbst wird zusammen mit den Beweisen an scriptSig √ºbergeben. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/428/b92/1f8/428b921f83b964dd9cd2c46aad79edbc.png" alt="Bild"><br><br>  In diesem Fall enth√§lt scriptPubKey eine Hash-Operation, einen Einl√∂sungs-Scrip-Hash-Wert und eine Vergleichsoperation (wie bei der alten Version von P2SH).  ScriptSig enth√§lt hier den Hash-Wert des √∂ffentlichen Schl√ºssels, und Zeugen-Daten enthalten die elektronische Signatur und den √∂ffentlichen Schl√ºssel. <br><br>  Mit diesem Ansatz k√∂nnen nicht aktualisierte digitale Geldb√∂rsen Transaktionen an Adressen getrennter Zeugen senden, ohne etwas √ºber die neuen M√∂glichkeiten zum Festlegen der Bedingungen f√ºr das Ausgeben von M√ºnzen zu wissen. <br><br><h2>  Neues Bech32-Adressformat </h2><br>  Es ist erw√§hnenswert, Bech32-Adressen, die als native SegWit-Adressen gelten, separat zu erw√§hnen.  W√§hrend des gr√∂√üten Teils seiner Geschichte hat Bitcoin die Base58-Codierung f√ºr Adressen mit einer zus√§tzlichen Pr√ºfsumme verwendet. Dies ist ein abgeschnittenes Ergebnis von doppeltem Hashing mit der SHA-256-Hash-Funktion.  Sie waren Teil der urspr√ºnglichen Software und ihr Anwendungsbereich wurde in BIP13 f√ºr P2SH erweitert.  Sowohl der Zeichensatz als auch der Pr√ºfsummenalgorithmus weisen jedoch Einschr√§nkungen auf: <br><ul><li>  Die Adresse in Base58 belegt mehr Speicher in QR-Codes, da sie den alphanumerischen Darstellungsmodus nicht verwenden kann. </li><li>  base58 ist sehr unpraktisch, um zuverl√§ssig auf Papier zu schreiben, √ºber eine mobile Tastatur zu tippen oder vorzulesen. </li><li>  doppeltes Pr√ºfsummen-Hashing ist langsam; </li><li>  Die Base58-Decodierung ist komplex und relativ langsam. </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/500/973/f24/500973f247d11b4556255551d84c84f8.png" alt="Bild"><br>  Das SegWit-Update enth√§lt eine neue Klasse von Exits (Zeugenprogrammen) und zwei seiner F√§lle: P2WPKH und P2WSH.  Ihre Funktionalit√§t ist f√ºr alte Knoten durch die Verwendung von P2SH indirekt verf√ºgbar, es ist jedoch optimaler und sicherer, sie direkt zu verwenden. Dazu muss ein neues Adressformat eingef√ºhrt werden. <br><br><h2>  Bech32-Adressspezifikation </h2><br>  Die Bech32-Adresse hat eine L√§nge von nicht mehr als 90 Zeichen und enth√§lt: <br><br><ol><li>  Ein Teil, der f√ºr Menschen lesbar ist.  Dies schlie√üt Daten ein, die m√∂glicherweise √ºbertragen werden m√ºssen oder etwas mit dem Eigent√ºmer der Adresse zu tun haben, die mindestens 1 Zeichen lang ist.  Beispielsweise sind die Zeichen f√ºr Mainnet-Adressen standardm√§√üig "bc" und f√ºr Testnet "tb". </li><li>  Ein Trennzeichen, das immer 1 ist.  Wenn "1" innerhalb des f√ºr Menschen lesbaren Teils zul√§ssig ist, ist das Trennzeichen das letzte der Zeichen "1". <br></li><li>  Der Datenteil hat eine L√§nge von mindestens 6 Zeichen und besteht nur aus alphanumerischen Zeichen, ausgenommen "1", "b", "i" und "o".  Hier werden die Version des Zeugenprogramms und die Daten des Zeugenprogramms selbst (von 2 bis 40 Bytes) als Hauptdaten verwendet. <br></li></ol><br><br><img src="https://habrastorage.org/getpro/habr/post_images/03e/531/472/03e531472b57bd39db41e7063a76fe04.png" alt="Bild"><br><br>  Warum ein Trennzeichen in Adressen einf√ºgen?  Auf diese Weise k√∂nnen Sie den vom Menschen lesbaren Teil eindeutig vom datenlesbaren Teil trennen und so m√∂gliche Kollisionen mit anderen vom Menschen lesbaren Teilen vermeiden, die das Pr√§fix verwenden.  Au√üerdem werden Zeichensatzbeschr√§nkungen f√ºr den vom Menschen lesbaren Teil vermieden.  Das Trennzeichen ist 1, da die Verwendung eines nicht alphanumerischen Zeichens das Kopieren von Adressen erschwert (ohne Doppelklick in mehreren Anwendungen).  Daher wurde ein alphanumerisches Zeichen au√üerhalb des Hauptzeichensatzes ausgew√§hlt.  Die Verwendung des Basis-32-Nummernsystems geht auch mit einer Erh√∂hung der Adressl√§nge um 15% im Vergleich zum Basis-58-Nummernsystem einher, dies spielt jedoch beim Kopieren von Adressen keine Rolle. <br><br><h2>  Pr√ºfsumme Bech32 Adressen </h2><br>  Die letzten 6 Zeichen der Adresse sind eine Pr√ºfsumme.  Die Pr√ºfsumme basiert auf dem BCH-Code, der die Erkennung von Fehlern garantiert, die nicht mehr als 4 Zeichen betreffen, und die Wahrscheinlichkeit, dass die Pr√ºfsumme konvergiert, wenn mehr als 4 Fehler gemacht werden, ist eine von 109. <br><br>  Einer der Vorteile der Verwendung von BCH-Codes besteht darin, dass sie zur Korrektur von Fehlern verwendet werden k√∂nnen.  Wenn bis zu 4 Fehler in der Adresse gemacht wurden, werden diese automatisch korrigiert.  Und wenn mehr Fehler gemacht werden, werden sie mit hoher Wahrscheinlichkeit erkannt, jedoch ohne die M√∂glichkeit ihrer automatischen Korrektur. <br><br><h2>  Gro√ü- und Kleinschreibung in der Adresse </h2><br>  Kleinbuchstaben werden verwendet, wenn f√ºr eine Pr√ºfsumme ein Zeichenwert erforderlich ist. <br><br>       Bech32   .       (,       QR-),    .  ,     ,       ,    .       ,   QR-    ,    - ,    45% ,   . <br><br><h2>      </h2><br>    ,    Segregated Witness,    ,      .  Segregated Witness         .       1 MB.       . ,    . <br><br>               (weight units).         3,   witness data   1.   ,  ,    witness data   3   ,    .                 .     . <br><br> <i><b>block weight = base size * 3 + total size</b></i> <br><br> <i>block weight</i> ‚Äì   (   ) <br> <i>base size</i> ‚Äì    (  ) <br> <i>total size</i> ‚Äì    (  ) <br><br>       ,                 ,    .     . <br><br>    ,          ,      , ,     4  .   Segregated Witness     ,            . <br><br>        ,       .   (virtual size) ,          ,            ,     spb (satoshi per byte). <br><br> <i><b>virtual size = weight units / 4</b></i> <br><br>      Segregated Witness   4  ,  ,        . ,       .       ,       .  ,      ,           .  ,     witness data (base size)  1 MB,      4 MB. <br><br>     : ¬´       witness data?¬ª.      . ,         1 MB  4 MB.       .   1.8 MB.   ?           60%   .      1 MB,   40%     ,    . <br><br> <i>400000  * 4 = 1600000   </i> <br> <i>600000  * 1 = 600000   </i> <br> <i>1600000 + 600000 = 2200000   </i> <br> <i>4000000 / 2200000 = 1.81 MB</i> <br><br>  ,  ,       1.8 MB.  ,              . <br><br><h2>    </h2><br>     2018   SegWit    35%      .              Segregated Witness   (, Electrum  Bitxfy). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d57/68e/0b4/d5768e0b4c94f454d6549bb7fd74a976.png" alt="Bild"><br> <i>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">BitMex Research</a></i> <br><br>             .             1 MB,     2 MB.  ,  ,    SegWit              . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/746/1b5/409/7461b54095358a8068217847cf16e67e.png" alt="Bild"><br> <i>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">BitMex Research</a></i> <br><br>             ,           . <br><br>    ,  Segregated Witness    off-chain    Bitcoin.  ,  lightning network ‚Äì          SegWit,   ,            . <br><br><h2>  H√§ufig gestellte Fragen </h2><br> <i>‚Äî   ,   Segregated Witness     RBF (replace-by-fee)?</i> <br><br> , replace by fee    Segregated Witness ,       ,     ,   ,        sequence number  .      ,    ,     ,     ,         . <br><br> <i>‚Äî      ?</i> <br><br>      -   ,    . ScriptSig,    ,    ,     .     ,         ,   - .  ,    ,  ,  -   . <br><br> <i>‚Äî     witness data?</i> <br><br>   ,  Segregated Witness     .  ,        ,    ,   . ,     .      :    ,  ,      (      ),  ,       Witness data,        .           . <br><br> <i>‚Äî       ,  RFC3548  z-base-32  Bech32 ?</i> <br><br>    ,   ,     .       ,       .          ,        . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de418853/">https://habr.com/ru/post/de418853/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de418843/index.html">Produktionsh√∂lle STALKER: Schatten von Tschernobyl</a></li>
<li><a href="../de418845/index.html">Wie Roskomnadzor HideMy.name blockiert und was als n√§chstes passieren wird. Ein Wort an die Gr√ºnder des VPN-Dienstes</a></li>
<li><a href="../de418847/index.html">Optisches neuronales Netzwerk</a></li>
<li><a href="../de418849/index.html">Die Zusammenfassung der Ereignisse f√ºr HR-Fachkr√§fte im Bereich IT f√ºr August 2018</a></li>
<li><a href="../de418851/index.html">Wie man die Illusion von Sicherheit in Form von intelligenten Kinderuhren kauft</a></li>
<li><a href="../de418855/index.html">√ñffnen Sie das Webinar ‚ÄûErstellen einer Anwendung in Webpack + React + Express‚Äú.</a></li>
<li><a href="../de418857/index.html">Vorbereiten von SSL-Zertifikaten f√ºr die Installation</a></li>
<li><a href="../de418859/index.html">Einige PowerShell-Funktionen bei Verwendung von Benutzerkonten</a></li>
<li><a href="../de418861/index.html">ReactOS startet jetzt mit einer BTRFS-Partition</a></li>
<li><a href="../de418863/index.html">Grundlegendes zu Render-Requisiten anhand eines Beispiels</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>