<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéöÔ∏è üßñüèΩ üì£ ¬øPor qu√© Google necesitaba un gr√°fico de conocimiento? üëàüèΩ üßî üé∑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cuando me presento y digo lo que est√° haciendo nuestra startup, el interlocutor inmediatamente plantea la pregunta: ¬øtrabaj√≥ anteriormente en Facebook...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øPor qu√© Google necesitaba un gr√°fico de conocimiento?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440938/"><img src="https://habrastorage.org/webt/_b/5j/ed/_b5jedmpncy6tkfvqbhqc_jd6zi.png" align="left" width="280">  Cuando me presento y digo lo que est√° haciendo nuestra startup, el interlocutor inmediatamente plantea la pregunta: ¬øtrabaj√≥ anteriormente en Facebook o su desarrollo fue creado bajo la influencia de Facebook?  Muchos conocen los esfuerzos de Facebook para mantener su gr√°fico social, porque la compa√±√≠a ha publicado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">varios</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culos</a> sobre la infraestructura de este gr√°fico, que ha construido cuidadosamente. <br><br>  Google habl√≥ sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">su gr√°fico de conocimiento</a> , pero nada sobre la infraestructura interna.  Sin embargo, la compa√±√≠a tambi√©n tiene subsistemas especializados para ello.  De hecho, se est√° prestando mucha atenci√≥n al gr√°fico de conocimiento.  Personalmente, puse al menos dos de mis promociones en este caballo, y comenc√© a trabajar en un nuevo gr√°fico en 2010. <br><a name="habracut"></a><br>  <b>Google necesitaba construir la infraestructura</b> no solo para servir relaciones complejas en el Gr√°fico de conocimiento, sino tambi√©n para soportar todos los bloques tem√°ticos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OneBox</a> en los resultados de b√∫squeda que tienen acceso a datos estructurados.  La infraestructura es necesaria para 1) una elusi√≥n de calidad de los hechos con 2) un ancho de banda lo suficientemente alto y 3) un retraso lo suficientemente bajo como para capturar una buena parte de las consultas de b√∫squeda en la web.  Result√≥ que ning√∫n sistema o base de datos disponible puede realizar las tres acciones. <br><br>  Ahora que he explicado por qu√© se necesita infraestructura, en el resto del art√≠culo hablar√© sobre mi experiencia en la construcci√≥n de dichos sistemas, incluso para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Knowledge Graph</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OneBox</a> . <br><br><h1>  ¬øC√≥mo lo s√©? </h1><br>  Me presentar√© brevemente.  Trabaj√© en Google de 2006 a 2013.  Primero como pasante, luego como ingeniero de software en la infraestructura de b√∫squeda web.  Google <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">adquiri√≥ Metaweb</a> en 2010, y mi equipo acaba de lanzar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Caffeine</a> .  Quer√≠a hacer algo m√°s, y comenc√© a trabajar con los chicos de Metaweb (en San Francisco), pasando tiempo viajando entre San Francisco y Mountain View.  Quer√≠a descubrir c√≥mo usar el gr√°fico de conocimiento para mejorar mi b√∫squeda en la web. <br><br>  Ha habido proyectos de este tipo en Google antes que yo.  Es de destacar que el proyecto llamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Squared fue</a> creado en una oficina de Nueva York, y se habl√≥ sobre las Tarjetas de Conocimiento.  Luego hubo esfuerzos espor√°dicos de individuos / peque√±os equipos, pero en ese momento no hab√≠a una cadena de equipos establecida, lo que finalmente me oblig√≥ a abandonar Google.  Pero volveremos a esto m√°s tarde ... <br><br><h1>  Historia de metaweb </h1><br>  Como ya se mencion√≥, Google adquiri√≥ Metaweb en 2010.  Metaweb cre√≥ un gr√°fico de conocimiento de alta calidad utilizando varios m√©todos, incluidos el rastreo y an√°lisis de Wikipedia, as√≠ como un sistema de edici√≥n de estilo wiki de crowdsourcing con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Freebase</a> .  Todo esto funcion√≥ sobre la base de la propia base de datos de gr√°ficos de Graphd: el demonio de gr√°ficos (ahora <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">publicado</a> en GitHub). <br><br>  Graphd ten√≠a algunas propiedades bastante t√≠picas.  Como demonio, funcionaba en un servidor, almacenaba todos los datos en la memoria y pod√≠a emitir un sitio completo de Freebase.  Despu√©s de la compra, Google estableci√≥ una de las tareas para continuar trabajando con Freebase. <br><br>  <b>Google construy√≥ un imperio sobre hardware est√°ndar y software distribuido.</b>  Un DBMS del lado del servidor nunca podr√≠a servir para rastrear, indexar y buscar resultados.  Primero cre√≥ SSTable, luego Bigtable, que escala horizontalmente a cientos o miles de m√°quinas que comparten petabytes de datos.  Las m√°quinas son asignadas por Borg ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">K8</a> vino de aqu√≠), se comunican a trav√©s de Stubby (gRPC vino de aqu√≠) resolviendo direcciones IP a trav√©s del servicio de nombres Borg (BNC dentro de K8) y almacenan datos en el Sistema de archivos de Google ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GFS</a> , puede decir Hadoop FS).  <i>Los procesos pueden morir, las m√°quinas pueden romperse, pero el sistema en su conjunto es indestructible y continuar√° zumbando.</i> <br><br>  Graphd se meti√≥ en ese entorno.  La idea de una base de datos que sirve a un sitio web completo en un servidor es ajena a Google (incluido yo).  En particular, Graphd necesitaba 64 GB o m√°s de memoria para ejecutarse.  Si le parece que esto es un poco, recuerde: esto es 2010.  La mayor√≠a de los servidores de Google estaban equipados con un m√°ximo de 32 GB.  De hecho, Google tuvo que comprar m√°quinas especiales con suficiente RAM para servir Graphd en su forma actual. <br><br><h3>  Reemplazo gr√°fico </h3><br>  La lluvia de ideas comenz√≥ sobre c√≥mo mover datos graficados o reescribir el sistema para que funcione de manera distribuida.  Pero, ya ves, los gr√°ficos son complicados.  Esta no es una base de datos de valores clave para usted, donde simplemente puede tomar un dato, moverlo a otro servidor y emitirlo cuando solicita una clave.  Los gr√°ficos realizan uniones eficientes y soluciones alternativas que requieren que el software funcione de una manera espec√≠fica. <br><br>  Una idea era usar un proyecto llamado MindMeld (IIRC).  Se supon√≠a que la memoria de otro servidor estar√≠a disponible mucho m√°s r√°pido a trav√©s del equipo de red.  Deber√≠a haber sido m√°s r√°pido que los RPC normales, lo suficientemente r√°pido como para seudo-replicar el acceso directo a la memoria requerido por la base de datos en memoria.  Pero la idea no fue demasiado lejos. <br><br>  Otra idea que en realidad se convirti√≥ en un proyecto fue crear un sistema de servicio gr√°fico verdaderamente distribuido.  Algo que no solo puede reemplazar Graphd para Freebase, sino que tambi√©n funciona realmente en la producci√≥n.  <b>Se llamaba Dgraph, un gr√°fico distribuido, invertido de Graphd (graph-daemon).</b> <br><br>  Si est√°s interesado, entonces s√≠.  Mi startup, Dgraph Labs, la compa√±√≠a y el proyecto de c√≥digo abierto Dgraph llevan el nombre de ese proyecto en Google (nota: Dgraph es una marca registrada de Dgraph Labs; hasta donde yo s√©, Google no lanza proyectos con nombres que coincidan con los internos). <br><br>  En casi todo el resto del texto, cuando menciono Dgraph, me refiero al proyecto interno de Google, y no al proyecto de c√≥digo abierto que creamos.  Pero m√°s sobre <i>eso</i> m√°s tarde. <br><br><h1>  La historia de Cerebro: el motor del conocimiento </h1><br>  <i>Crear inadvertidamente infraestructura para gr√°ficos</i> <br><br>  Aunque generalmente sab√≠a que Dgraph intentaba reemplazar Graphd, mi objetivo era crear algo para mejorar la b√∫squeda web.  En Metaweb, conoc√≠ a un ingeniero de investigaci√≥n de DH que cre√≥ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cubed</a> . <br><br>  Como mencion√©, un grupo heterog√©neo de ingenieros de la divisi√≥n de Nueva York desarroll√≥ Google <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Squared</a> .  Pero el sistema DH era <i>mucho</i> mejor.  Empec√© a pensar c√≥mo implementarlo en Google.  Google ten√≠a piezas de rompecabezas que pod√≠a usar f√°cilmente. <br><br>  La primera parte del rompecabezas es el motor de b√∫squeda.  Esta es una manera de determinar con precisi√≥n qu√© palabras est√°n relacionadas entre s√≠.  Por ejemplo, cuando ve una frase como [pel√≠culas de tom hanks], podr√≠a decirle que [tom] y [hanks] est√°n relacionados.  Del mismo modo, desde [san francisco weather] vemos una conexi√≥n entre [san] y [francisco].  Estas son cosas obvias para las personas, pero no tan obvias para los autom√≥viles. <br><br>  La segunda parte del rompecabezas es comprender la gram√°tica.  Cuando en la consulta [libros de autores franceses], la m√°quina puede interpretar esto como [libros] de [autores franceses], es decir, libros de esos autores que son franceses.  Pero tambi√©n puede interpretar esto como [libros en franc√©s] de [autores], es decir, libros en franc√©s de cualquier autor.  Utilic√© el etiquetador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Part-Of-Speech</a> (POS) de la Universidad de Stanford para analizar mejor la gram√°tica y construir el √°rbol. <br><br>  La tercera parte del rompecabezas es comprender las entidades.  [franc√©s] puede significar mucho.  Puede ser un pa√≠s (regi√≥n), nacionalidad (relacionada con el pueblo franc√©s), cocina (relacionada con la comida) o idioma.  Luego apliqu√© otro sistema para obtener una lista de entidades a las que puede corresponder una palabra o frase. <br><br>  La cuarta parte del rompecabezas era comprender la relaci√≥n entre entidades.  Cuando se sabe c√≥mo conectar las palabras con las frases, en qu√© orden se deben realizar las frases, es decir, su gram√°tica y a qu√© entidades pueden corresponder, debe encontrar la relaci√≥n entre estas entidades para crear interpretaciones autom√°ticas.  Por ejemplo, ejecutamos la consulta [libros de autores franceses], y POS dice que es [libros] de [autores franceses].  Tenemos varias entidades para [franc√©s] y varias para [autores]: el algoritmo debe determinar c√≥mo se relacionan.  Por ejemplo, pueden estar relacionados por lugar de nacimiento, es decir, autores que nacieron en Francia (aunque pueden escribir en ingl√©s).  O podr√≠an ser autores que son ciudadanos franceses.  O autores que pueden hablar o escribir en franc√©s (pero pueden no estar relacionados con Francia como pa√≠s), o autores que simplemente aman la cocina francesa. <br><br><h1>  Sistema de gr√°ficos de √≠ndice de b√∫squeda </h1><br>  Para determinar si hay una conexi√≥n entre los objetos y c√≥mo est√°n conectados, necesita un sistema de gr√°ficos.  Graphd nunca iba a escalar al nivel de Google, pero podr√≠a usar la b√∫squeda en s√≠.  Los datos del Gr√°fico de conocimiento se almacenan en formato <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Triples</a> triples, es decir, cada hecho est√° representado por tres partes: sujeto (entidad), predicado (relaci√≥n) y objeto (otra entidad).  Las solicitudes van como <code>[SP] ‚Üí [O]</code> o <code>[PO] ‚Üí [S]</code> , y a veces <code>[SO] ‚Üí [P]</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/29f/324/29b/29f32429b78e9fc1387deda24e3fc986.png"><br><br>  Us√© el <b>√≠ndice de b√∫squeda de Google</b> , asign√© un documento a cada triple y constru√≠ tres √≠ndices, uno para S, P y O. Adem√°s, el √≠ndice es anidable, por lo que agregu√© informaci√≥n sobre el tipo de cada entidad (es decir, actor, libro, persona y etc.) <br><br>  <i>Cre√© un sistema de este tipo, aunque vi un problema con la profundidad de las uniones (que se explica a continuaci√≥n) y no es adecuado para consultas complejas.</i>  <i>En realidad, cuando alguien del equipo de Metaweb me pidi√≥ que publicara un sistema para colegas, me negu√©.</i> <br><br>  Para determinar la relaci√≥n, puede ver cu√°ntos resultados da cada consulta.  Por ejemplo, ¬øcu√°ntos resultados dan [franc√©s] y [autor]?  Tomamos estos resultados y vemos c√≥mo se relacionan con [libros], etc. Por lo tanto, aparecieron muchas interpretaciones autom√°ticas de la consulta.  Por ejemplo, la consulta [pel√≠culas de Tom Hanks] genera una variedad de interpretaciones, como [pel√≠culas dirigidas por Tom Hanks], [pel√≠culas protagonizadas por Tom Hanks], [pel√≠culas producidas por Tom Hanks], pero rechaza autom√°ticamente interpretaciones como [pel√≠culas llamadas Tom Hanks]. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/50b/a4a/424/50ba4a424adfac5ada59b3c9ea29a82c.png"><br>  Cada interpretaci√≥n genera una lista de resultados, entidades v√°lidas en el gr√°fico, y tambi√©n devuelve sus tipos (presentes en archivos adjuntos).  Esto demostr√≥ ser una funci√≥n extremadamente poderosa porque comprender el tipo de resultados abri√≥ posibilidades como el filtrado, la clasificaci√≥n o una mayor expansi√≥n.  Puede ordenar las pel√≠culas con el a√±o de lanzamiento, la duraci√≥n de la pel√≠cula (corto, largo), idioma, premios recibidos, etc. <br><br>  El proyecto parec√≠a tan inteligente que nosotros (DH tambi√©n particip√≥ parcialmente como experto en el gr√°fico de conocimiento) lo llamamos Cerebro, en honor al dispositivo del mismo nombre de la pel√≠cula <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"X-Men"</a> . <br><br>  <b>Cerebro a menudo revelaba hechos muy interesantes</b> que originalmente no estaban en la consulta de b√∫squeda.  Por ejemplo, a petici√≥n de [los presidentes de EE. UU.], Cerebro se dar√° cuenta de que los presidentes son personas y que las personas tienen crecimiento.  Esto nos permite clasificar a los presidentes por crecimiento y demostrar que Abraham Lincoln es el presidente m√°s alto de los Estados Unidos.  Adem√°s, las personas pueden ser filtradas por nacionalidad.  En este caso, Estados Unidos y el Reino Unido aparecen en la lista, porque Estados Unidos ten√≠a un presidente brit√°nico, George Washington.  (Descargo de responsabilidad: los resultados se basan en el estado del gr√°fico de conocimiento en el momento del experimento; no puedo dar fe de su correcci√≥n). <br><br><h1>  Enlaces azules versus conocimiento </h1><br>  Cerebro fue capaz de comprender realmente las solicitudes de los usuarios.  Una vez recibidos los datos de todo el gr√°fico, podr√≠amos generar interpretaciones autom√°ticas de la consulta, generar una lista de resultados y comprender mucho de estos resultados para seguir estudiando el gr√°fico.  Se explic√≥ anteriormente: tan pronto como el sistema comprende que se trata de pel√≠culas, personas o libros, etc., se pueden activar ciertos tipos de filtros.  Incluso puede recorrer los nodos y mostrar informaci√≥n relacionada: desde [presidentes de EE. UU.] A [escuelas a las que asistieron] o [ni√±os que engendraron].  Aqu√≠ hay algunas otras consultas que el sistema mismo gener√≥: [mujeres pol√≠ticas afroamericanas], [actores de Bollywood casados ‚Äã‚Äãcon pol√≠ticos], [hijos de nosotros presidentes], [pel√≠culas protagonizadas por Tom Hanks estrenadas en los a√±os 90] <br><br>  DH demostr√≥ esta oportunidad de pasar de una lista a otra en otro proyecto llamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parallax</a> . <br><br>  Cerebro mostr√≥ un resultado muy impresionante, y la gerencia de Metaweb lo apoy√≥.  Incluso en t√©rminos de infraestructura, result√≥ ser eficiente y funcional.  Lo llam√© <b>el motor de conocimiento</b> (como un motor de b√∫squeda).  Pero en Google, nadie abord√≥ espec√≠ficamente este tema.  Era de poco inter√©s para mi gerente, me aconsejaron que hablara con una persona y luego con otra, y como resultado tuve la oportunidad de demostrar el sistema a un gerente de b√∫squeda superior muy alto. <br><br>  <b>La respuesta no era la que esperaba</b> .  Para demostrar los resultados del motor de conocimiento de [libros de autores franceses], realiz√≥ una b√∫squeda en Google, mostr√≥ diez l√≠neas con enlaces azules y dijo que Google podr√≠a hacer lo mismo.  Adem√°s, no quieren tomar tr√°fico de los sitios porque se enojan. <br><br>  <i>Si cree que tiene raz√≥n, piense en esto:</i> cuando Google realiza una b√∫squeda en Internet, realmente no comprende la solicitud.  El sistema busca las palabras correctas en la posici√≥n correcta, teniendo en cuenta el peso de la p√°gina, etc.  Este es un sistema muy complejo, pero no comprende ni la consulta ni los resultados.  El usuario mismo hace todo el trabajo: leer, analizar, extraer la informaci√≥n necesaria de los resultados y b√∫squedas adicionales, agregar una lista completa de resultados, etc. <br><br>  Por ejemplo, para [libros de autores franceses] una persona primero intentar√° encontrar una lista exhaustiva, aunque no se encuentre una p√°gina con dicha lista.  Luego, clasifique estos libros por a√±os de publicaci√≥n o filtre por editores, etc. Todo esto requiere que una persona procese una gran cantidad de informaci√≥n, numerosas b√∫squedas y procese los resultados.  Cerebro puede reducir estos esfuerzos y hacer que la interacci√≥n del usuario sea simple e impecable. <br><br>  Pero entonces no hubo una comprensi√≥n completa de la importancia del gr√°fico de conocimiento.  El manual no estaba seguro de su utilidad o de c√≥mo relacionarlo con la b√∫squeda.  <b>Este nuevo enfoque del conocimiento no es f√°cil para la organizaci√≥n que ha logrado un √©xito tan significativo al proporcionar a los usuarios enlaces a p√°ginas web.</b> <br><br>  En el transcurso del a√±o, luch√© con un malentendido de los gerentes, y finalmente me di por vencido.  Un gerente de la oficina de Shanghai se dirigi√≥ a m√≠ y le entregu√© el proyecto en junio de 2011.  Le puso un equipo de 15 ingenieros.  Pas√© una semana en Shanghai, pasando a los ingenieros todo lo que cre√© y aprend√≠.  DH tambi√©n estuvo involucrado en este negocio, y dirigi√≥ el equipo durante mucho tiempo. <br><br><h1>  Problema de profundidad de uni√≥n </h1><br>  En el sistema de gr√°ficos Cerebro, hab√≠a un problema con la profundidad de la uni√≥n.  La uni√≥n se realiza cuando se necesita el resultado de una consulta temprana para completar una posterior.  Una uni√≥n t√≠pica incluye algunos <code>SELECT</code> , es decir, un filtro en ciertos resultados de un conjunto de datos universal, y luego estos resultados se utilizan para filtrar por otra parte del conjunto de datos.  Lo explicar√© con un ejemplo. <br><br>  Digamos que quieres saber [las personas en SF que comen sushi].  A todas las personas se les asignan algunos datos, incluido qui√©n vive en qu√© ciudad y qu√© tipo de alimentos comen. <br><br>  La consulta anterior es una combinaci√≥n de un solo nivel.  Si la aplicaci√≥n accede a la base de datos, realizar√° una solicitud para el primer paso.  Luego, algunas consultas (una consulta para cada resultado) para averiguar qu√© come cada persona, eligiendo solo a quienes comen sushi. <br><br>  El segundo paso sufre el problema del despliegue.  Si el primer paso da un mill√≥n de resultados (la poblaci√≥n de San Francisco), entonces el segundo paso se debe dar a todos, previa solicitud, preguntando por sus h√°bitos alimenticios y luego aplicando un filtro. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/76a/f20/f9e/76af20f9e21b097fed9420f4174ab8ae.png"><br><br>  Los ingenieros de sistemas distribuidos generalmente resuelven este problema por <i>difusi√≥n</i> , es decir, por distribuci√≥n ubicua.  Acumulan los resultados correspondientes y realizan una solicitud a cada servidor del cl√∫ster.  Esto proporciona una uni√≥n, pero causa problemas con la latencia de la solicitud. <br><br>  La difusi√≥n no funciona bien en un sistema distribuido.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Jeff Dean</a> de Google explica mejor este problema en su discurso "Lograr una respuesta r√°pida en grandes servicios en l√≠nea" ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">videos</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">diapositivas</a> ).  El retraso total siempre es mayor que el retraso del componente m√°s lento.  <b>El deslumbramiento peque√±o en las computadoras individuales causa demoras, y la inclusi√≥n de muchas computadoras en la consulta aumenta dr√°sticamente la probabilidad de demoras.</b> <br><br><blockquote>  Considere un servidor con un retraso de m√°s de 1 ms en el 50% de los casos, y m√°s de 1 s en el 1% de los casos.  Si la solicitud va solo a uno de esos servidores, solo el 1% de las respuestas exceden un segundo.  Pero si la solicitud va a cientos de dichos servidores, el 63% de las respuestas exceden un segundo. </blockquote><br>  Por lo tanto, la transmisi√≥n de una solicitud aumenta considerablemente el retraso.  Ahora piense, y si necesita dos, tres o m√°s asociaciones?  Es demasiado lento para ejecutar en tiempo real. <br><br>  El problema de la implementaci√≥n del ventilador cuando la transmisi√≥n de solicitud es inherente a la mayor√≠a de las bases de datos de gr√°ficos de bases de datos no nativas, incluido el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gr√°fico Janus</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Twitter FlockDB</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Facebook TAO</a> . <br><br>  Las asociaciones distribuidas son un problema complejo.  Las bases de datos de gr√°ficos nativas permiten evitar este problema almacenando un conjunto de datos universal dentro de un √∫nico servidor (base de datos independiente) y realizando todas las uniones sin acceder a otros servidores.  Por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Neo4j</a> hace esto. <br><br><h1>  Dgraph: sindicatos con profundidad arbitraria </h1><br>  Despu√©s de completar el trabajo en Cerebro y tener experiencia en la construcci√≥n de un sistema de gesti√≥n de gr√°ficos, particip√© en el proyecto Dgraph, convirti√©ndome en uno de los tres gerentes t√©cnicos del proyecto.  Aplicamos conceptos innovadores que resolvieron el problema de la profundidad de la uni√≥n. <br><br>  En particular, Dgraph separa los datos del gr√°fico para que cada combinaci√≥n pueda ser realizada completamente por una m√°quina.  Volviendo al <code>subject-predicate-object</code> (SPO), cada instancia de Dgraph contiene todos los sujetos y objetos correspondientes a cada predicado en esta instancia.  Varios predicados se almacenan en una instancia, cada uno completamente almacenado. <br><br>  <b>Esto nos permiti√≥ cumplir solicitudes con una profundidad arbitraria de asociaciones</b> , eliminando el problema del despliegue del ventilador durante la transmisi√≥n.  Por ejemplo, la consulta [personas en SF que comen sushi] generar√° un <i>m√°ximo de dos llamadas de red</i> en la base de datos, independientemente del tama√±o del cl√∫ster.  El primer desaf√≠o ser√° encontrar a todas las personas que viven en San Francisco.  La segunda solicitud enviar√° esta lista para cruzarse con todas las personas que comen sushi.  Luego puede agregar restricciones o extensiones adicionales, cada paso a√∫n no permite m√°s de una llamada de red. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/428/283/668/428283668a3ede1b3a7f3b142b648888.png"><br>  Esto crea el problema de predicados muy grandes en el mismo servidor, pero se puede resolver dividiendo a√∫n m√°s los predicados entre dos o m√°s instancias a medida que crece el tama√±o.  En el peor de los casos, un predicado se dividir√° en todo el cl√∫ster.  Pero esto suceder√° solo en una situaci√≥n fant√°stica, cuando todos los datos correspondan a un solo predicado.  En otros casos, este enfoque puede reducir significativamente el retraso de las solicitudes en sistemas reales. <br><br>  Sharding no fue la √∫nica innovaci√≥n en Dgraph.  A todos los objetos se les asignaron identificadores enteros, se ordenaron y guardaron en forma de una lista (lista de publicaciones) para cruzar r√°pidamente dichas listas m√°s adelante.  Esto le permite filtrar r√°pidamente durante la fusi√≥n, encontrar enlaces comunes, etc. Las ideas de los motores de b√∫squeda de Google tambi√©n son √∫tiles aqu√≠. <br><br><h1>  Combinando todos los bloques de OneBox a trav√©s de Plasma </h1><br>  <b>El dgraph de Google no era una base de datos</b> .  Este fue uno de los subsistemas, que tambi√©n respondi√≥ a las actualizaciones.  Entonces ella necesitaba indexaci√≥n.  Tengo una amplia experiencia trabajando con sistemas de indexaci√≥n incremental en tiempo real que se ejecutan con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cafe√≠na</a> . <br><br>  Comenc√© un proyecto para unificar todos los OneBox dentro de este sistema de indexaci√≥n de gr√°ficos, incluidos el clima, los horarios de vuelos, los eventos, etc.  Es posible que no conozca el t√©rmino OneBox, pero definitivamente lo vio: esta es una ventana separada que aparece cuando se ejecutan ciertos tipos de consultas, donde Google devuelve informaci√≥n m√°s rica.  Para ver OneBox en acci√≥n, intente [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">weather in sf</a> ]. <br><br>  Anteriormente, cada OneBox trabajaba en un backend aut√≥nomo y contaba con el apoyo de diferentes grupos de desarrollo.  <b>Hab√≠a un rico conjunto de datos estructurados, pero las unidades OneBox no intercambiaban datos entre s√≠.</b>  En primer lugar, diferentes backends aumentaron los costos laborales muchas veces.  En segundo lugar, la falta de intercambio de informaci√≥n limit√≥ el rango de solicitudes a las que Google podr√≠a responder. <br><br>  Por ejemplo, [eventos en SF] podr√≠a mostrar eventos y [weather in SF] podr√≠a mostrar el clima.  Pero si [los eventos en SF] entendieron que estaba lloviendo ahora, entonces podr√≠a filtrar u ordenar los eventos por tipo "en interiores" o "al aire libre" ( <i>quiz√°s es mejor ir al cine en lugar de f√∫tbol en una lluvia intensa)</i> ) <br><br>  Con la ayuda del equipo Metaweb, comenzamos a convertir todos estos datos al formato SPO e indexarlos con un solo sistema.  Lo llam√© <b>Plasma, un motor de indexaci√≥n de gr√°ficos en tiempo real</b> para servir Dgraph. <br><br><h1>  Gesti√≥n de Leapfrog </h1><br>  Al igual que Cerebro, el proyecto Plasma recibi√≥ pocos recursos, pero continu√≥ ganando impulso.  Al final, cuando la gerencia se dio cuenta de que los bloques OneBox eran inevitablemente parte de nuestro proyecto, inmediatamente decidi√≥ poner a las <i>"personas adecuadas"</i> para administrar el sistema de gr√°ficos.  En el apogeo del juego pol√≠tico, tres l√≠deres fueron reemplazados, cada uno de los cuales ten√≠a cero experiencia trabajando con gr√°ficos. <br><br>  Durante este salto de Dgraph, los gerentes de proyecto de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Spanner</a> llamaron a Dgraph <i>un</i> sistema <i>demasiado complejo</i> .  Como referencia, Spanner es una base de datos SQL distribuida en todo el mundo que necesita su propio reloj GPS para garantizar la coherencia global.  <i>La iron√≠a de esto sigue soplando mi techo.</i> <br><br>  Dgraph fue cancelado, el plasma sobrevivi√≥.  Y al frente del proyecto, pusieron un nuevo equipo con un nuevo l√≠der, con una jerarqu√≠a clara y reportando al CEO.  El nuevo equipo, con una comprensi√≥n deficiente de los gr√°ficos y los problemas relacionados, decidi√≥ crear un subsistema de infraestructura basado en el √≠ndice de b√∫squeda de Google existente (como lo hice para Cerebro).  Suger√≠ usar el sistema que ya hice para Cerebro, pero fue rechazado.  Modifiqu√© Plasma para rastrear y expandir cada nodo de conocimiento en varios niveles para que el sistema pueda verlo como un documento web.  Llamaron a este sistema TS ( <i>abreviatura</i> ). <br><br>  <b>Esto significaba que el nuevo subsistema no podr√≠a realizar asociaciones profundas.</b>  Nuevamente, esta es una maldici√≥n que veo en muchas compa√±√≠as porque los ingenieros comienzan con la idea equivocada de que "los gr√°ficos son un problema simple que se puede resolver simplemente construyendo una capa encima de otro sistema". <br><br>  Unos meses m√°s tarde, en mayo de 2013, abandon√© Google despu√©s de trabajar en Dgraph / Plasma durante unos dos a√±os. <br><br><h1>  Ep√≠logo </h1><br><ul><li>  Unos a√±os m√°s tarde, la unidad de "Infraestructura de b√∫squeda de Internet" pas√≥ a llamarse "Infraestructura de b√∫squeda de Internet y Gr√°fico de conocimiento", y el l√≠der a quien una vez le mostr√© a Cerebro encabez√≥ la direcci√≥n de "Gr√°fico de conocimiento", hablando sobre c√≥mo pretenden reemplazar los simples enlaces de conocimiento azul para responder preguntas de los usuarios directamente con la mayor frecuencia posible. <br></li><li>  Cuando el equipo de Shanghai que trabajaba en Cerebro estaba cerca de ponerlo en producci√≥n, el proyecto les fue quitado y entregado a la divisi√≥n de Nueva York.  Al final, se lanz√≥ como Knowledge Strip.  Si est√° buscando [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pel√≠culas de tom hanks</a> ], lo ver√° en la parte superior.  Ha mejorado un poco desde el primer lanzamiento, pero a√∫n no admite el nivel de filtrado y clasificaci√≥n establecido en Cerebro. <br></li><li>  Los tres gerentes t√©cnicos que trabajaron en Dgraph (incluido yo mismo) finalmente abandonaron Google.  Hasta donde yo s√©, el resto ahora est√° trabajando en Microsoft y LinkedIn. <br></li><li>  Logr√© obtener dos promociones en Google, y se supon√≠a que obtendr√≠a una tercera cuando saliera de la compa√±√≠a como ingeniero de software senior (ingeniero de software senior). <br></li><li>  A juzgar por algunos rumores fragmentarios, la versi√≥n actual de TS est√° realmente muy cerca del dise√±o del sistema de gr√°ficos Cerebro, y cada sujeto, predicado y objeto tiene un √≠ndice.  <b>Por lo tanto, ella todav√≠a sufre el problema de la profundidad de la unificaci√≥n.</b> <br></li><li>  Desde entonces, el plasma se ha reescrito y renombrado, pero contin√∫a funcionando como un sistema de indexaci√≥n de gr√°ficos en tiempo real para TS.  Juntos, contin√∫an publicando y procesando todos los datos estructurados en Google, incluido el Gr√°fico de conocimiento. <br></li><li>  <b>La incapacidad de Google para hacer sindicatos profundos es visible en muchos lugares.</b>  Por ejemplo, todav√≠a no vemos el intercambio de datos entre los bloques de OneBox: [ciudades por la mayor cantidad de lluvia en Asia] no da una lista de ciudades, aunque todos los datos est√°n en la columna de conocimiento (en cambio, la p√°gina web se cita en los resultados de b√∫squeda);  [los eventos en SF] no se pueden filtrar por clima;  Los resultados [de los presidentes de EE. UU.] No se ordenan, filtran ni ampl√≠an por otros hechos: sus hijos o las escuelas donde estudiaron.  Creo que esta fue una de las razones de la interrupci√≥n del soporte de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Freebase</a> . </li></ul><br><h1>  Dgraph: Ave F√©nix </h1><br>  Dos a√±os despu√©s de dejar Google, decid√≠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desarrollar Dgraph</a> .  En otras compa√±√≠as, veo la misma indecisi√≥n con respecto a los gr√°ficos que en Google.  Hubo muchas soluciones inacabadas en el espacio gr√°fico, en particular, muchas soluciones personalizadas apresuradamente ensambladas sobre bases de datos relacionales o NoSQL, o como una de las muchas caracter√≠sticas de bases de datos multimodelo.  Si hab√≠a una soluci√≥n nativa, entonces sufr√≠a problemas de escalabilidad. <br><br>  Nada de lo que vi ten√≠a una historia coherente con un dise√±o productivo y escalable.  <b>Construir una base de datos de gr√°ficos escalables horizontalmente con baja latencia y uniones arbitrarias de profundidad es una tarea extremadamente dif√≠cil</b> , y quer√≠a asegurarme de que construimos el Dgraph correctamente. <br><br>  El equipo de Dgraph pas√≥ los √∫ltimos tres a√±os no solo estudiando mi propia experiencia, sino tambi√©n dedicando muchos de sus esfuerzos al dise√±o, creando una base de datos gr√°fica que no tiene an√°logos en el mercado.  Por lo tanto, las empresas tienen la oportunidad de utilizar una soluci√≥n confiable, escalable y productiva en lugar de otra soluci√≥n a medio terminar. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/440938/">https://habr.com/ru/post/440938/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../440922/index.html">C√≥mo funciona Level Flow en Uncharted 4 y The Last Of Us</a></li>
<li><a href="../440924/index.html">Segundo lugar en la historia de la Copa AI de Rusia 2018: CodeBall</a></li>
<li><a href="../440928/index.html">Determine su edad biol√≥gica en el perfil</a></li>
<li><a href="../440930/index.html">Realic√© cien entrevistas, me negu√© a cientos de personas, y solo entonces aprend√≠ a entrevistar</a></li>
<li><a href="../440932/index.html">Un poco sobre inteligencia empresarial de TI</a></li>
<li><a href="../440940/index.html">Redux: revisi√≥n de la l√≥gica y acciones del reductor</a></li>
<li><a href="../440942/index.html">BYD anuncia crecimiento de ventas para veh√≠culos el√©ctricos enchufables</a></li>
<li><a href="../440944/index.html">C√≥mo escribir r√°pidamente un sitio web o aplicaci√≥n web y no quedar atrapado en los coleccionistas</a></li>
<li><a href="../440946/index.html">Paquete acumulativo: ya puede crear aplicaciones</a></li>
<li><a href="../440948/index.html">No seas inteligente con los formularios de inicio de sesi√≥n</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>