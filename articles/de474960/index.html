<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîΩ üë∞üèæ ü§§ Entwicklungsdemo f√ºr NES - HEOHdemo üôå üéÉ üòÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Geschichte der Festivals f√ºr Computerkunst, auch Demopati genannt, ist in unserem Land seit einem Vierteljahrhundert bekannt. Menschen aus dem gan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Entwicklungsdemo f√ºr NES - HEOHdemo</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474960/">  Die Geschichte der Festivals f√ºr Computerkunst, auch Demopati genannt, ist in unserem Land seit einem Vierteljahrhundert bekannt.  Menschen aus dem ganzen Land versammeln sich, um ihre √úbungen zum Extrahieren des Unm√∂glichen aus alten oder modernen Computern und extrem kleinen Mengen an Code zu demonstrieren.  In den ersten f√ºnf Jahren wurde <i>CAFe</i> (pl√∂tzlich <i>Computer Art Festival</i> ), das von 1999 bis 2003 in Kasan stattfand, zu einer der Hauptdemopathien des Landes.  Sp√§ter verschwand er f√ºr lange Zeit vom Radar und gab den ber√ºhmteren <i>Chaos Constructions</i> und <i>DiHalt</i> die Handfl√§che, und in diesem Jahr war seine R√ºckkehr ziemlich triumphierend - wenn nicht nach dem Ausma√ü des Ereignisses, dann nach der Anzahl der verschiedenen Arbeiten, die bis sechs Uhr morgens dauerten.  Unter ihnen befand sich auch meine, deren Entstehung in diesem Artikel er√∂rtert wird. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/338r2BRYg3A" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br>  In der Demoszene bin ich sympathischer als ein aktiver Teilnehmer.  Mein Hauptinteresse gilt der Entwicklung von Retro-Spielen und Sound-Software.  Fr√ºher habe ich nur eine bedingte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Demo f√ºr ein rotes Telefon gemacht</a> , das inzwischen zu einem Szenemem geworden ist, und ungef√§hr ein Dutzend kleiner Intros f√ºr verschiedene Plattformen.  Die <i>CAFe-</i> Organisatoren, die im Voraus begonnen hatten, die Autoren pers√∂nlich zu <i>erregen</i> , zun√§chst aus der Ferne, durch gemeinsame Freunde und dann in pers√∂nlichen Besprechungen, motivierten mich schlie√ülich, meine erste wirklich vollwertige Arbeit in der Kategorie Demo in voller L√§nge zu schaffen.  Wie es geschah, auf einer anderen, nicht gerade beliebten Plattform - der <i>NES</i> / <i>Famicom</i> -Spielekonsole, die den meisten unter dem Namen Dandy bekannt ist. <br><br><h2>  Planung </h2><br>  Am Anfang wollte ich eine lang ersehnte Demo f√ºr eine andere, popul√§rere 8-Bit-Plattform machen.  F√ºr die Umsetzung war jedoch ein erheblicher Forschungsaufwand erforderlich, dh es wurde weder der Zeitpunkt noch die grunds√§tzliche Realisierbarkeit der Idee oder die Qualit√§t des m√∂glichen Ergebnisses verstanden.  Daher wurden bestimmte Ma√ünahmen nur sehr langsam ergriffen.  Die Fristen liefen deutlich aus und es wurde klar, dass es dringend erforderlich ist, ein anderes, vorhersehbareres Projekt f√ºr die Umsetzung zu w√§hlen, wenn ich das Teilnahmeversprechen einhalten m√∂chte.  Nachdem ich √ºber die zweite Idee f√ºr die Kategorie <i>Wild</i> nachgedacht hatte, die auch Experimente erforderte, entschied ich mich, zu den vor drei Jahren f√ºr <i>NES</i> und dann f√ºr den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Multimatographen hergestellten,</a> langj√§hrigen Demo-Rohlingen zur√ºckzukehren.  Infolgedessen wurden sie selbst nicht wirklich benutzt, aber die Richtung der Arbeit wurde schlie√ülich bestimmt. <br><br>  Der Plan, speziell f√ºr <i>NES zu arbeiten, wurde</i> schlie√ülich Anfang Oktober genehmigt, bis <i>CAFe</i> ungef√§hr drei Wochen entfernt war.  Der Projektordner wurde am 5. Oktober erstellt, aber einige Bewegungen fanden vorher statt. <br><br>  Die erste Frage, die gel√∂st werden musste, war, wie viele Effekte (Szenen) erforderlich waren, damit die Dauer der Demo ausreichte, um eine gro√üe Form anstatt eines einfachen Intro zu beanspruchen.  Es war auch erforderlich zu verstehen, wie lange dies ausreichte. <br>  Dazu wurden unter anderem die aktuellen Top-Arbeiten f√ºr die ausgew√§hlte Plattform auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Pouet √ºberpr√ºft</a> und die beiden besten analysiert - <i>High Hopes</i> und <i>NESPECCY</i> .  Die letzte, die eine Einladung f√ºr die gleichen Demopati darstellt, wurde im Dezember 2018 ver√∂ffentlicht und bis zu diesem Moment war ich irgendwie nicht aufgefallen.  Zun√§chst traf es sogar die Motivation etwas, da ich zun√§chst ein f√ºr meine zuk√ºnftige Arbeit leichteres Niveau annahm. <br><br>  Nach den Ergebnissen der Analyse stellte sich heraus, dass es in <i>High Hopes</i> ungef√§hr sechs Effekte und eine Dauer von 2:45 und in <i>NESPECCY</i> ungef√§hr 11 Effekte und eine Dauer von 3:45 gibt.  Das sind durchschnittlich 25 Sekunden pro Effekt.  Ich schlug vor, dass im Durchschnitt 10-15 Effekte ausreichen w√ºrden, basierend auf der Annahme, dass nur 3-5 von ihnen technisch relativ kompliziert sein w√ºrden und der Rest einfache, aber h√ºbsche F√ºllstoffe sein k√∂nnten.  Um die Anzeige einfacher Szenen nicht zu verz√∂gern, werden durchschnittlich 15 Sekunden pro Effekt angezeigt, wobei die Gesamtdauer der Demo etwa zwei oder drei Minuten betr√§gt. <br><br>  Anschlie√üend wurde berechnet, wie viel Zeit f√ºr die Erstellung der einzelnen Effekte aufgewendet werden kann.  Es stellte sich heraus, dass es anderthalb bis zwei Tage dauerte, ohne die vielen anderen notwendigen Werke wie Musik, Grafik, irgendeine Idee und nur eine technische Basis vorzubereiten, die Effekte kombiniert.  Ein solcher Zeitplan sah nicht sehr realistisch aus, aber ich beschloss, so viele Effekte wie m√∂glich zu erzielen, und versuchte, jeweils zwei Tage zu planen. <br><br>  Damit war die vorrangige Aufgabe festgelegt - rechtzeitig zumindest etwas f√ºr die Teilnahme am Wettbewerb Passendes tun zu k√∂nnen, sowie den Entwicklungsmodus im Stil ‚ÄûKeine Zeit zum Erkl√§ren‚Äú.  Dies schloss auch das Entwicklungstagebuch aus, und jetzt m√ºssen Sie Ereignisse aus dem Ged√§chtnis wiederherstellen und versuchen, nicht zu viel zu l√ºgen. <br><br>  Die Aufgabe, den ersten Platz einzunehmen, wurde nicht gestellt.  Die Hauptsache ist nicht der Sieg, sondern die Teilnahme und all das, und im Allgemeinen ist der Hauptsieg √ºber uns.  Ich habe auf der Grundlage der Ergebnisse des Wettbewerbs f√ºr die Unbeliebtheit der ausgew√§hlten Kategorie keine besonderen Vorhersagen gemacht, da ich erwartet habe, dass im schlimmsten (besten) Fall der Teilnahme an dem Wettbewerb mehrerer ziemlich starker Werke meine zu Kompositionsf√ºllern werden, die ebenfalls notwendig und wichtig sind, und wenn es keine Werke gibt, werde ich es erneut tun ein Sieger unter sich, wie es schon in anderen Disziplinen passiert ist.  Nat√ºrlich wollte ich einen anst√§ndigen Kampf gewinnen, aber ich selbst bewertete meine Arbeit niedriger als es das Publikum sch√§tzte. <br><br><h2>  Code </h2><br>  Nachdem die Fristen festgelegt worden waren, wurde klar, dass es notwendig war, sich mit unangemessenem Perfektionismus zu verbinden und nicht zu versuchen, den technologischsten oder kompaktesten Demo-Code zu erstellen, um Zeit f√ºr die Ausarbeitung eines solchen Projekts zu haben.  Je einfacher und schneller, desto besser bei ausreichender √§u√üerer Wirkung. <br><br>  Es wurde beschlossen, eine ziemlich leistungsf√§hige und sogar redundante Konfiguration zu w√§hlen - einen <i>MMC3-</i> Mapper mit 256 Kilobyte ROM-Code und 256 Kilobyte Grafik-ROM, und sich keine Sorgen dar√ºber zu machen, dass sein volles Potenzial ungenutzt bleibt.  Diese Konfiguration ist nicht die fortschrittlichste der existierenden und sogar noch m√∂glicheren, sie wurde bereits in kommerziellen Spielen verwendet, beginnend mit <i>Super Mario Bros.</i>  <i>3</i> (1988), aber zuvor beschr√§nkten sich die Autoren der Demo f√ºr <i>NES</i> auf einfachere Mapper und weniger Speicher.  Infolgedessen wurden 80% des Volumens des ROM-Codes und etwas weniger als zwei Drittel des Volumens der ROM-Grafiken verwendet.  Die √ºberm√§√üige Speicherkapazit√§t erm√∂glichte es uns, keine zus√§tzliche Zeit f√ºr die L√∂sung des Datenkomprimierungsproblems zu verschwenden, obwohl dies nicht m√∂glich war. <br><br>  Die Entwicklungsmethode war ebenfalls offensichtlich - haupts√§chlich in C mit Assembler-Einf√ºgungen nach Bedarf, haupts√§chlich Kopieren in den Videospeicher, Interrupt-Handler und einen Musik-Player.  Ich habe diesen Ansatz lange und erfolgreich auf Retro-Plattformen eingesetzt.  Dies spart viel Entwicklungszeit, da das Code-Prototyping lokal durchgef√ºhrt werden kann: Implementieren Sie es zun√§chst in C und erhalten Sie sofort ein Ergebnis, das auf <i>NES</i> funktioniert. Wenn es nicht schnell genug funktioniert, schreiben Sie es in Teile nach einer bereits vorbereiteten Vorlage in Assembler, bis Die gew√ºnschte Geschwindigkeit wurde erreicht. <br><br><img src="https://habrastorage.org/webt/tm/ii/gj/tmiigjgzmohxusl9gll2p7hqrqe.png"><br><br>  Eines der erwarteten Hauptprobleme, das jedoch in der Praxis nicht viel √Ñrger verursachte, war die Gr√∂√üe des Hauptspeichers - bei <i>NES sind</i> es nur 2 Kilobyte, und bei meiner Arbeit habe ich beschlossen, auf eine Erweiterung zu verzichten, obwohl der Mapper diesen Schritt grunds√§tzlich zugelassen hat.  Der Speicher in Systemen, die auf dem <i>6502-Prozessor</i> basieren <i>, wird</i> angesichts seiner Gesamtkapazit√§t von acht Bit h√§ufig auf 256-Byte-Seiten ber√ºcksichtigt, und in diesen ergibt sich folgende RAM-Verteilung: <br><br><ul><li>  Eine Seite f√ºr "schnelle" Variablen; </li><li>  Eine Seite f√ºr den Hardwarestapel und die Palette (ein wesentlicher Teil des Stapels wird nicht verwendet); </li><li>  Eine Seite f√ºr den Sprite-Listenpuffer (f√ºr die Funktionen der Videocontroller-Architektur ist dies erforderlich). </li><li>  Eine Seite f√ºr eine Liste der Videospeicheraktualisierungen; </li><li>  Eine Seite mit einer Liste der Parameter f√ºr Rastereffekte. </li></ul><br>  Die letzten beiden werden im Programm in Form von gew√∂hnlichen vorzeichenlosen Zeichen-Arrays von 256 Bytes deklariert und an einigen Stellen auch f√ºr andere Zwecke wiederverwendet.  Die restlichen drei Seiten befinden sich im <i>cc65-</i> Programmstapel, <i>dh</i> unter den globalen und lokalen Variablen des C-Programms. <br><br>  Es sollte beachtet werden, dass die dynamische Zuweisung von Speicher (malloc / free) auf solchen Plattformen praktisch nicht verwendet wird, eine statische L√∂sung war erforderlich.  Zuerst habe ich mich an die Methode gehalten, so viele lokale Variablen wie m√∂glich zu verwenden, sodass ich den Speicher des Software-Stacks automatisch f√ºr sie wiederverwenden konnte.  Lokale Variablen arbeiten jedoch viel langsamer, und infolgedessen fehlte das f√ºr globale Variablen verf√ºgbare Volumen. Es war nur unangenehm, auf diese Weise Code zu schreiben und wiederholt gleichnamige Variablen zu verwenden.  Dann habe ich eine zuvor nicht verwendete L√∂sung angewendet: eine Anzeige in der Linkerkonfiguration mehrerer RAM-Segmente, die sich physisch an denselben Adressen befinden.  Gruppen von Variablen, die innerhalb desselben Effekts verwendet wurden, wurden mithilfe von Compiler-Direktiven in diesen Segmenten platziert, sodass derselbe Speicher wiederverwendet werden konnte. <br><br>  Ein weiteres Problem - die Verteilung von C-Programmcode durch Codespeicherb√§nke ( <i>NES</i> verwendet die Seitenadressierung f√ºr den erweiterten Speicher) - wurde zuvor von mir in anderen Projekten gel√∂st und verursachte keine Probleme.  Der Code zum Platzieren in Seiten ist auf 16 Kilobyte (die Gr√∂√üe des umschaltbaren Speicherfensters) f√ºr einen funktional abgeschlossenen Abschnitt begrenzt und wird durch die √úberlagerungsmethode aufgerufen: Die gew√ºnschte Seite wird verbunden, der Code von ihr wird verarbeitet, die Ausf√ºhrung kehrt zur Hauptseite zur√ºck, und der Speicherzugriff zwischen Seiten ist unm√∂glich.  Die Funktionen werden den Banken manuell √ºber Compiler-Direktiven zugewiesen.  Der in allen Programmteilen erforderliche Code, wie z. B. ein Musik-Player, eine Sprite-Ausgabe und Interrupt-Handler, befindet sich im oberen nicht umschaltbaren Speicherfenster mit einer Gr√∂√üe von ebenfalls 16 Kilobyte. <br><br>  Bei der Arbeit am letzten Effekt, dem Korridor mit Mario, bin ich auf eine unterhaltsame Kompilierungsfehlermeldung gesto√üen: <i>local label overflow</i> .  Soweit ich wei√ü, hat der Compiler eine interne Begrenzung f√ºr die Anzahl der in einem Objektmodul generierten lokalen Bezeichnungen (anscheinend 65536), aber ich habe ein gemeinsames Modul verwendet, um die Verwaltung des gemeinsam genutzten Speichers zu vereinfachen.  Eine der m√∂glichen L√∂sungen bestand darin, den Code in mehrere Module aufzuteilen, und ich hatte bereits vor, ihn anzuwenden, nachdem ich ein Array von Konstanten von der Quelle in C in den Assembler-Teil ( <i>inkbin</i> mit einem externen Label) <i>verschoben hatte</i> , das Problem von selbst gel√∂st wurde, das Limit nicht mehr √ºberschritten wurde und sogar nach dem Hinzuf√ºgen Ein paar hundert Codezeilen sp√§ter trat keine Fehlermeldung mehr auf. <br><br><h2>  Entwicklung </h2><br>  Bei der Auswahl der Effekte galt es, uns auf einfache, aber stets fl√ºssige Effekte zu beschr√§nken, die bei voller Anzeigegeschwindigkeit (60 Bilder pro Sekunde) arbeiten.  Herk√∂mmliche Demo-Effekte wie Plasma- und Zoom-Rotatoren wurden anfangs nicht ber√ºcksichtigt, da sie nicht gut zur Architektur der Set-Top-Box passen, bei der der Zugriff auf den Videospeicher erheblich eingeschr√§nkt ist. Dies w√§re im Vergleich zu Plattformen, auf denen solche Effekte wiederholt in all ihrer Pracht implementiert werden, mies. <br><br>  Zun√§chst wollte ich den gr√∂√üten Teil der Effekte nach einem drei Jahre alten Plan auf der Grundlage von zeilenweisen Manipulationen mit dem angezeigten Raster erzielen. Dabei sollten die vertikale und horizontale Verschiebung jeder Zeile sowie die B√§nke der angezeigten Grafik ge√§ndert werden, w√§hrend der Strahl das Raster durchl√§uft.  Solch ein Ansatz k√∂nnte auf der Basis eines gemeinsamen Codeblocks funktionieren, was Entwicklungszeit spart, aber die Effekte w√ºrden sich als ziemlich einheitlich und auch ziemlich traditionell herausstellen, wie sie in vielen anderen Werken zu finden sind.  Dar√ºber hinaus gab es Schwierigkeiten beim Debuggen dieses allgemeinen Codeblocks, und als Ergebnis enthielt die Demo nur einen Effekt dieses Typs, eine rotierende Kassette. <br><br>  Ich spielte mit einigen Effekten, die auf alten Ideen basierten, von denen einer schlie√ülich zum Kirby-Effekt wurde, und der zweite ging nicht in die Demo. Ich begann, ein Textdokument zu schreiben, in dem ich alle Ideen aufschrieb, die mir in den Sinn kamen, sowohl f√ºr einzelne Effekte als auch f√ºr das allgemeine Konzept.  Diese Liste enthielt mehr als 40 Effekte, w√§hrend in der letzten Arbeit weniger als 15 implementiert wurden. Gleichzeitig handelt es sich bei den meisten Effekten um Animationen der einen oder anderen Art, obwohl jede ihrer Varianten ziemlich einzigartig ist und verschiedene Tricks verwendet, um einen akzeptablen Speicherverbrauch und den erforderlichen reibungslosen Betrieb sicherzustellen .  Es ist auch ungewollt passiert, dass die vorherrschende Art von Effekten die Rotation von etwas ist.  Im Prinzip ist dies ein guter Zufall, da eine Art konzeptionelle Einheit entstand. <br><br>  Ein Intro mit einem Elefanten wurde konzipiert und gemacht, als Witz zum Thema meiner vorherigen Arbeit, dann ein Effekt mit farbigen Streifen und Interferenzen.  Ohne viel Nachdenken wurde der Arbeitstitel <i>HEOHdemo</i> als Fortsetzung des Witzes aus der Einleitung (HE IS NOT HE) gew√§hlt.  Als es um die Realisierung der Szene mit dem Vorzeigen des Namens ging, wurde sie als endg√ºltig anerkannt, da es zu diesem Zeitpunkt keine erfolgreichen Ideen mehr gab und es keine Zeit gab, sie auszuarbeiten. <br><br>  Eine spontane Entscheidung mit dem Namen demo hat das endg√ºltige Konzept aller Arbeiten ausgel√∂st, das schlie√ülich zehn Tage vor dem Abgabetermin Gestalt annahm.  Es beinhaltete die Verwendung von erkennbarem Videospiel- und Popkulturmaterial wie Charakteren, Logos und Spielszenen, das jedoch so modifiziert wurde, dass sich die Originale ein wenig voneinander unterschieden (wie ‚Äûnicht sie‚Äú).  Es wurde auch beschlossen, den Humor von der ersten bis zur letzten Szene auf die gesamte Demo zu √ºbertragen, um so das nicht sehr hohe technische Niveau zu kompensieren, das im Geiste der zitierten √Ñra (Mitte der 90er Jahre) liegt und ein breiteres Publikum anspricht - schlie√ülich haben alte Spielekonsolen ihre eigenen, nicht mit der Demoszene verschr√§nkt und in der Technik nicht sehr aufgekl√§rt, sondern ein sehr gro√ües Publikum.  Etwa zur gleichen Zeit wurde beschlossen, die inh√§rente Demo der 90er-Jahre zu verwenden und in separate unabh√§ngige Szenen zu unterteilen, da dies in der verf√ºgbaren Zeit einfacher zu bewerkstelligen ist, und dies half in der Folge erheblich beim Musikteil und der Synchronisierung von Effekten mit ihm. <br><br>  Die Idee von Szenen mit Vid, einem rotierenden Logo und teilweise mit Mario im Flur entstand nat√ºrlich auch w√§hrend der Arbeit.  Sie wurden als eine Art Aufschub au√üer Kontrolle gebracht - bis die wichtigsten geplanten Effekte aufgeklebt waren. <br><br><h2>  Versammlung </h2><br>  Anfangs war klar, dass die l√§ngste Zeit im Timing mit einer Einf√ºhrung, einem Titel, Gr√º√üen und einem Abspann zu tun haben w√ºrde.  Die Arbeit an ihnen wurde an erster Stelle durchgef√ºhrt, so dass sich irgendwann herausstellte, dass die Demo bereits einen vollst√§ndigen Anfang und ein vollst√§ndiges Ende hat (das gleiche wie in der endg√ºltigen Version), aber es gibt fast keinen Mittelweg, f√ºr den nur einer mehr oder weniger bereit war Wirkung.  Die Fristen neigten sich dem Ende zu.  Die Arbeit an dem Projekt wurde zu einem stundenlangen Marathon, der alle m√∂gliche freie und nicht auch freie Zeit in Anspruch nahm.  Die in den Pl√§nen verbleibenden Effekte waren nach Komplexit√§t sortiert, alle Ideen wurden so weit wie m√∂glich vereinfacht.  Space Invaders wurden gemacht, Probleme mit einer rotierenden Patrone wurden besiegt und ein leicht zu implementierender Turm mit einem Knarren wurde fertiggestellt (mit dem Aussehen experimentiert).  Als die Effekte fertig waren, wurde die Reihenfolge ihrer Anzeige bestimmt. <br><br>  Jede Kleinigkeit dauerte dreimal so lange, wie es zun√§chst schien, und einige Tage vor Ablauf der Frist, als es noch keine H√§lfte der Effekte oder der Musik gab, gab es das starke Gef√ºhl, dass es nicht klappen w√ºrde.  Plan B wurde in Betracht gezogen, um die Arbeit bereits auf einem anderen Demopati oder au√üerhalb davon zu vervollst√§ndigen und freizulegen.  Aber dann wurde eine effektivere Entscheidung getroffen: alles, was bereits da ist, dringend zu sammeln und zu vervollst√§ndigen, um zumindest den Anschein zu erwecken, dass ein Produkt zur Ver√∂ffentlichung bereit ist, auch wenn es v√∂llig dumm ist, Musik daf√ºr zu schreiben, und wenn danach noch Zeit ist, Versuchen Sie, weitere Effekte hinzuzuf√ºgen.  Zu solchen Szenen, die im letzten Moment hinzugef√ºgt wurden, geh√∂rten Pakman und der Korridor, beide in der vereinfachten Version im Vergleich zu den urspr√ºnglichen Ideen. <br><br>  Diese Montagemethode f√ºhrte zu einer merklichen Inkoh√§renz der Effekte in der Mitte der Demo und zu einem vollst√§ndigen Wechsel der Musik zwischen vielen Szenen.  Es half jedoch, viel Zeit zu sparen, und tats√§chlich war das Werk einen Tag vor dem Abgabetermin vollst√§ndig f√ºr die Ver√∂ffentlichung bereit.  Diese zus√§tzliche Zeit wurde f√ºr das Finalisieren verschiedener Kleinigkeiten in allen Teilen und in der Musik aufgewendet.  Insbesondere zu dieser Zeit bekamen die Invasoren und die Kr√∂te ihr alternatives Aussehen. <br><br><h2>  Debuggen </h2><br>  Aus Mangel an Debugging-M√∂glichkeiten auf realer Hardware sowie auf Hardware selbst wurde die Demo ausschlie√ülich in Emulatoren debuggt.  Die Hauptarbeit lag im <i>FCEUX-</i> Emulator.  Es ist nicht sehr genau, hat aber einen guten Debugger und startet sehr schnell, was bei der Entwicklungsmethode "Ein paar Zeilen anh√§ngen, ausf√ºhren, pr√ºfen" wichtig ist.  Zeitkritische Effekte wurden auch in den viel genaueren, aber weniger praktischen <i>Mesen</i> , <i>Punes</i> und <i>Nestopia behoben</i> . <br><br>  Da das Demo-Format selbst den Wunsch impliziert, von der Plattform das zu erhalten, was zuvor niemand auf der Plattform getan hat, testet es die Genauigkeit von Emulatoren auf St√§rke, indem es auch zeigt, dass sie in verschiedenen Extremf√§llen nicht einverstanden sind.  Nachdem Sie den Effekt in einem Emulator getestet haben, k√∂nnen Sie Artefakte in anderen Emulatoren erhalten.  Aus diesem Grund und auch aufgrund der Merkmale der <i>NES-</i> Architektur mussten viele zeitgebundene Effekte mehrmals wiederholt werden.  Als Ergebnis habe ich die Demo f√ºr sauberes Arbeiten im beliebten <i>FCEUX-</i> Emulator eingerichtet, mit dem sie an den Wettbewerb gesendet wurde, und f√ºr normales Arbeiten in allen anderen Emulatoren. <br><br>  Von den interessanten Fehlern, die beim Debuggen festgestellt wurden, gab es ein Problem in der Szene mit einem rotierenden Logo, das sich ausschlie√ülich im <i>Mesen-</i> Emulator manifestierte.          inspired by,        ,        .      ,   <i>Mesen</i>          .       . <br><br>     <i>NTSC</i> - ,    <i>PAL</i>            ‚Äî      ,                     .      ,    <i>PAL</i> -,      .     ,            17% . <br><br>           ‚Äì  <i>NES</i> , <i>Famicom AV</i> ,   <i>Pegasus</i> (  <i>Dendy Classic 2</i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in Polen, Tschechien und einigen anderen L√§ndern). Es stellte sich heraus, dass die Demo auf allen Konsolen zumeist normal funktioniert, in einigen Szenen jedoch visuelle Probleme aufweist. Interessanterweise sind diese Probleme f√ºr alle unterschiedlich. Einige davon h√§ngen wahrscheinlich mit der ungen√ºgenden Genauigkeit der Implementierung des MMC3- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapper</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in g√§ngigen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flash-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cartridges zusammen, da bei einer herk√∂mmlichen Cartridge mit einer echten </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MMC3</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die geringste Anzahl von Problemen </font><i><font style="vertical-align: inherit;">auftrat</font></i><font style="vertical-align: inherit;"> . Die am wenigsten problematische Konfiguration war </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pegasus</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obwohl die Demo dort im Prinzip nicht normal h√§tte funktionieren sollen - sie zeigt nur ein kleines Artefakt auf der B√ºhne mit Mario. Zu meiner √úberraschung funktioniert der am schwierigsten zu debuggende und zeitkritische Effekt - die rotierende Patrone - bei jeder Testeisenkonfiguration stabil. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die auf der Hardware gefundenen Probleme sind nicht kritisch, und schlie√ülich wird die endg√ºltige Version ver√∂ffentlicht, in der sie behoben werden. Es bleibt jedoch abzuwarten, welches der Probleme speziell mit dem Demo-Code zusammenh√§ngt und welche Merkmale die Testkonfigurationen aufweisen. Danach k√∂nnen die erhaltenen Informationen verwendet werden, um die Qualit√§t von Emulatoren und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flash-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cartridges </font><font style="vertical-align: inherit;">zu verbessern </font><font style="vertical-align: inherit;">.</font></font><br><br><h2>  Musik </h2><br>          ¬´ ¬ª      ¬´¬ª.      .  '                 ,              .   ,    ,    ,       ,     .         ,           .         . <br><br>       <i>NES</i> ,       ,     ,       -.       ,   ,      ,       ,    ,      .               ,            . <br><br>      Reaper   MIDI-,         ,    <i>FamiTracker</i> .          MIDI-,   Reaper,  <i>FamiTracker</i>      . <br><br><img src="https://habrastorage.org/webt/_9/ey/on/_9eyonr2ehc6tms7pumjf6_suww.png"><br><br>     <i>FamiTracker</i>     <i>NES</i> ,      ,      ,              ‚Äî  ,     .     ,      .      , ¬´¬ª   <i>FamiTracker</i> ' <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NSF-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Datei und Schreiben aller Register√§nderungen in eine Bin√§rdatei. </font><font style="vertical-align: inherit;">Mit anderen Worten, die gesamte Logik des Musik-Players wird in die Kompilierungsphase √ºbernommen, und bei </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NES</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> werden nur vollst√§ndig fertige Daten an den Klangerzeuger gesendet. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zur besseren Synchronisation mit Effekten wurden dem Musikdatenstrom auch Marker hinzugef√ºgt. </font><font style="vertical-align: inherit;">In der Demo werden sie f√ºr Blitze in einer Szene mit einem Titel und Begr√º√üungen verwendet. </font><font style="vertical-align: inherit;">Markierungen werden direkt in installiert </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FamiTracker</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Team </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zxx</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die nominell zum direkten Einbau Ebene DAC Kanalproben ausgelegt ist.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Analyseeffekte </font></font></h2><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Inschrift am Anfang </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Code stammt aus einem alten Projekt. </font><font style="vertical-align: inherit;">Der angezeigte Teil der Linie wird mit Sprites mit verschiedenen Paletten angezeigt und dann im Hintergrund gedruckt. </font><font style="vertical-align: inherit;">Die Inschrift ‚Äûbased on real effects‚Äú deutet darauf hin, dass weitere Effekte nicht so sind, dies ist ein Witz zum Thema der st√§ndigen Debatte √ºber die Akzeptanz und Rolle der Animation in der Demo.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Intro mit Elefanten und Kriechschnur </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Idee des Effekts entwickelte sich von einer kurzen Einf√ºgung, die sofort mit einer laufenden Linie begann, zu einer vollwertigen Szene. </font><font style="vertical-align: inherit;">Also erschien der erste Charakter in der Demo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Technisch gesehen ist die Szene sehr einfach. Die Hauptschwierigkeit besteht darin, die in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Graphics Gale</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gezeichneten </font><i><font style="vertical-align: inherit;">Grafiken</font></i><font style="vertical-align: inherit;"> in ein mehrschichtiges Sprite umzuwandeln, um eine ungew√∂hnlich gro√üe Anzahl von Farben bereitzustellen (10). </font><font style="vertical-align: inherit;">Nur vier Ebenen, jede mit einer eigenen Palette. </font><font style="vertical-align: inherit;">Die Ebenen </font><font style="vertical-align: inherit;">werden einzeln </font><font style="vertical-align: inherit;">in das </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NES Screen Tool</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> konvertiert </font><font style="vertical-align: inherit;">und im Metasprite-Editor manuell in ein gemeinsames Sprite gestapelt.</font></font><br><img src="https://habrastorage.org/webt/17/du/6q/17du6q0j7ycr-12h2port8vl3fe.png"><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Interferenz </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gab keine Einmischung in die urspr√ºngliche Idee des Intro, aber ein √§hnlicher Effekt war prinzipiell geplant, es war nur unklar, wo dies am geeignetsten w√§re. </font><font style="vertical-align: inherit;">Es wurde eines der ersten, das als Grundlage f√ºr die Entwicklung sp√§terer, komplexerer Effekte diente. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Kachelset enth√§lt 8 Rauschs√§tze mit unterschiedlicher Dichte von 32 Kacheln, die von einem einfachen Programm auf einem PC erzeugt werden. </font><font style="vertical-align: inherit;">Sie werden in den ersten acht Zeilen der Kachelkarte angezeigt. </font><font style="vertical-align: inherit;">Mit Hilfe des MMC3-Interrupts, der alle sieben Zeilen des Rasters ausgel√∂st wird (eine Zeile geht f√ºr die Synchronisation verloren), wird f√ºr jede Kachelzeile ein zuf√§lliger Versatz der Hintergrundebene eingestellt, indem die Anzeigeadresse grob eingestellt wird. </font><font style="vertical-align: inherit;">Auf diese Weise erhalten Sie eine realistischere Interferenzanimation als einfaches Rauschen mit derselben Dichte.</font></font><br><br><img src="https://habrastorage.org/webt/bp/hf/rg/bphfrggmjg8mugiw5ftm3e4egzq.png"><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Farbige Streifen </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der erste vollwertige Effekt, der f√ºr die Demo geschrieben wurde. Tats√§chlich besteht es aus zwei Teilen: Zuerst wird ein Timer angezeigt, der das aktuelle Demo-Timing in der N√§he von Real anzeigt, dann wechselt der Effekt zu einer Animation mit ansteigenden B√§ndern.</font></font><br><br>      ,       ,         .    12x16 ,       8x8,           ‚Äî      .             ‚Äî       00  99,          ‚Äî        .       .          ,     . <br><br><img src="https://habrastorage.org/webt/ja/df/cd/jadfcdjkmvbebxayxhljf7sesye.png"><br><br>  ,    ,      MMC3,     ,                  . <br><br>          ,      32  .   238 ,      7 .        ,       ,     ,   53.    ,         PC,      ,           . <br><img src="https://habrastorage.org/webt/el/6k/0k/el6k0kaduc7xipn96mj54w39u3k.png"><br><br><h3>  Titel </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zun√§chst t√§uschten zwei weitere, komplexere Effekte mit denselben Buchstaben diese Szene vor, weshalb die dritte Option ausgew√§hlt wurde, die einfacher zu implementieren war. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Schrift ist rechteckig, um die Animation zu vereinfachen. Jeder Buchstabe hat im Wesentlichen eine H√∂he von f√ºnf herk√∂mmlichen Pixeln und eine Breite von vier. In jeder Buchstabenzeile gibt es f√ºnf verschiedene Pixelkombinationen. Blender hat eine Animation f√ºr eine gleichm√§√üige Drehung von der Kante zur Ebene aller f√ºnf Kombinationen vorbereitet. Die Rahmen werden zu einer Datei zusammengefasst, die Farbe wird auf drei Farben reduziert. Anschlie√üend wurde das Bild in das </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NES Screen Tool</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> importiert. Es wurden </font><font style="vertical-align: inherit;">82 Kacheln und eine Kachelkarte f√ºr die Animation selbst erstellt. Tats√§chlich gibt es zwei solcher S√§tze, um Buchstaben in verschiedene Richtungen zu drehen.</font></font><br><br><img src="https://habrastorage.org/webt/gq/xs/wn/gqxswnend5wkbvqw3xea0i9l8zm.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der rotierende Buchstabe wird auf der Kachelkarte angezeigt und besteht aus f√ºnf erforderlichen animierten Streifen. </font><font style="vertical-align: inherit;">Da jeweils nur eine Buchstabenanimation sichtbar ist, kann die Farbe des Gesichts ge√§ndert werden, wodurch die Illusion von Mehrfarben entsteht. </font><font style="vertical-align: inherit;">Die Buchstaben, die am Rand des Bildschirms eintreffen, werden von Sprites angezeigt. Ihre Koordinaten und Geschwindigkeiten werden sehr genau manuell ausgew√§hlt, um die erforderliche Gl√§tte und Geschwindigkeits√§nderung von Objekten zu erzielen. </font><font style="vertical-align: inherit;">Sobald das Sprite die gew√ºnschte Stelle auf dem Bildschirm erreicht hat, wird es durch eine Animation auf der Hintergrundebene ersetzt. </font></font><br><br><img src="https://habrastorage.org/webt/9c/va/e_/9cvae_5fl8mhrfj7umgt_faqmhi.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Horizontale Streifen, die mit unterschiedlichen Geschwindigkeiten fliegen, werden durch den Interrupt-Handler </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MMC3 erstellt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dieses Mal wird der horizontale horizontale </font><i><font style="vertical-align: inherit;">Pixelversatz</font></i><font style="vertical-align: inherit;"> der Hintergrundebene f√ºr jede </font><i><font style="vertical-align: inherit;">Kachelreihe festgelegt</font></i><font style="vertical-align: inherit;"> .</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Space Invaders </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Idee dieser sehr einfachen Szene mit der Drehung gro√üer Pixel, die sich in einem bestimmten Bild ansammelten, entstand n√§her am Beginn der Arbeit, und gleichzeitig </font><font style="vertical-align: inherit;">wurden </font><font style="vertical-align: inherit;">in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gale</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mehrere Optionen f√ºr die Drehung der Animation manuell gezeichnet. </font><font style="vertical-align: inherit;">Die Szene selbst wurde viel sp√§ter realisiert, als das Konzept der Demo endg√ºltig feststand und die Idee Kultcharaktere zu zeigen schien. </font></font><br><br><img src="https://habrastorage.org/webt/58/nv/ld/58nvldcfaj6upgcaap3x5fpbfsg.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kacheln werden durch Aufzeichnen im Videospeicher in der Hintergrundebene ausgegeben. </font><font style="vertical-align: inherit;">Sterne werden von Sprites angezeigt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Langlebigkeit der Szene erkl√§rt sich durch die Synchronisation mit der Musik, je nach Bild pro Schlag. </font><font style="vertical-align: inherit;">Die Zeit f√ºr das Zeigen von Effekten wurde nicht speziell ausgearbeitet, und ohne nachzudenken schien es nicht sehr langweilig zu sein.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rotierendes Logo </font></font></h3><br>  Aufgrund des Mangels an Effekten und der Zeit, diese zu entwickeln, habe ich mich entschlossen, ein kleines Intro wiederzuverwenden, das vor ein paar Jahren geschrieben wurde und in dem Buchstaben auf demselben Weg um ein statisches Logo flogen.  K√ºrzlich interessierte ich mich wieder f√ºr das <i>N64-</i> Pr√§fix, das ich in den sp√§ten 90ern ignorierte, und als ich an anderen Effekten arbeitete, kam mir eine spontane Idee mit einer Animation der Drehung des ber√ºhmten Logos, die sehr einfach zu implementieren schien - diese beiden Gedanken kamen zusammen, aber die Implementierung hat deutlich l√§nger gedauert als erwartet. <br><br>  Die haupts√§chliche technische Komplexit√§t der Szene besteht in der Reduzierung des f√ºr eine derart reibungslose und gro√üe Animation erforderlichen Speicherplatzes.  Wenn Sie die Frames ohne Komprimierung speichern, w√ºrde ein Frame einen 4-Kilobyte-Satz belegen (da zwei Frames nicht in 256 Kacheln passen w√ºrden), und es w√ºrden 256 Kilobyte Grafik-ROM ben√∂tigt, dh der gesamte im Demo-Volume verwendete Datentr√§ger.  Um dieses Problem zu l√∂sen, wurden drei Tricks gleichzeitig angewendet: Animation der Drehung nur um 90 Grad (64 Frames), wonach zwei Gesichtsfarben ausgetauscht werden;  verlustbehaftete Grafikkonvertierung zum Platzieren von Gruppen von vier Bildern in S√§tzen von 256 Kacheln;  sowie das Aktualisieren des Videospeichers im sichtbaren Teil des Rasters.  Somit nahm die Animation viermal weniger Platz ein. <br><br>  Das Buchstabenmodell und die Rotationsanimation werden in <i>Blender erstellt</i> .  W√§hrend ihres kam zu dem Demo-Konzept, das entspricht Ihre Idee spiegelt, und es war lustig - ‚Äûund-und-und-und-und-und‚Äú die Szene sagt,  Animationsrahmen werden gruppiert, die Farbtiefe auf 4 reduziert und diese Bilder durch die verlustbehaftete Importfunktion im <i>NES Screen Tool</i> konvertiert.  Diese Funktion ist vielleicht meine wichtigste Geheimwaffe - wenn das Pl√§ttchenlimit w√§hrend der Komprimierung √ºberschritten wird, sucht sie nach den √§hnlichsten visuellen Pl√§ttchen und kombiniert sie, bis die erforderliche Anzahl von Pl√§ttchen √ºbrig bleibt.  Dies f√ºhrt nat√ºrlich zu visuellen Konvertierungsartefakten und erfordert eine manuelle Nachbearbeitung, erm√∂glicht es Ihnen jedoch, komplexere Bilder mit weniger Aufwand in die Schranken zu lenken. <br><br><img src="https://habrastorage.org/webt/ar/iu/to/ariutocxeivq50tx_frpvh2zfxu.png"><br><br>  Zur Animation des Logos werden Kachels√§tze umgeschaltet und das Fenster mit 14 mal 14 Kacheln in der Hintergrundkachel√ºbersicht aktualisiert, f√ºr das der MMC3-Interrupt verwendet wird, der vor einer Textzeile ausgel√∂st wird.  Die Zeile erfordert auch das Umschalten des Grafiksatzes auf die Schriftart. Danach gibt es eine Verz√∂gerung im Code f√ºr die Zeit, in der die Zeilen der Beschriftung angezeigt werden, dann erlischt die Anzeige (die Hintergrundfarbe wird st√§ndig angezeigt) und die Daten werden in den Videospeicher √ºbertragen. <br><br>  M√ºnzen werden von Sprites angezeigt und fliegen auf einem mehr oder weniger ehrlich berechneten Weg (unter Verwendung eines festen Punkts).  Der alte Code wurde dahingehend ge√§ndert, dass die Drehung m√∂glichst ohne √úberschneidung mit dem gr√∂√üeren Logo fortgesetzt wird und die M√ºnzen im richtigen Moment nach und nach erscheinen und verschwinden.  Sie gehen √ºber die Grafiken des Logos hinaus, indem sie das Priorit√§tsflag verwenden, √ºber das jedes Sprite verf√ºgt. <br><br><h3>  Kartusche drehen </h3><br>  Die Implementierung des Effekts ist in Worten sehr einfach, erfordert jedoch ein langes Debugging.  Der Interrupt-Handler startet einen Rastereffekt in der gew√ºnschten Zeile (um Zeit f√ºr den Haupt-Thread zu lassen).  Als n√§chstes wird der Code mit sehr genau ausgew√§hlten Timings ausgef√ºhrt, um den Pixel-f√ºr-Pixel-Vertikalversatz der angezeigten Kachelkarte f√ºr jede Zeile des Bildschirms festzulegen.  Dies erfordert ein sehr kniffliges Schema zum Schreiben in <i>PPU-</i> Register, und einige von ihnen m√ºssen genau an eine bestimmte Stelle in der Zeile fallen.  In der <i>NTSC-</i> Version der Set-Top-Box sind die Prozessortaktrate und die Pixelwiederholungsrate nicht mehrfach, und die Code-Ausf√ºhrungszeit kann in Abh√§ngigkeit von mehreren Faktoren geringf√ºgig variieren, sodass die Timings der einzelnen Zeilen allm√§hlich voneinander abweichen und eine Korrektur erfordern. <br><br>  Der Hauptteil der Grafiken f√ºr diese Szene wurde vor einigen Jahren f√ºr einen fr√ºheren Versuch gezeichnet, eine Demo f√ºr <i>NES</i> zu <i>erstellen</i> . Jetzt wurde sie jedoch durch andere Cartridge-Gesichter und ein Demo-Logo erg√§nzt.  Das Originalbild wird auf einem Bildschirm in der H√∂he gestapelt.  Um den Effektcode zu vereinfachen, werden dieselben Zeilen auf der R√ºckseite der Kassette mehrmals dupliziert. <br><br><img src="https://habrastorage.org/webt/x8/in/3u/x8in3uasevydgdsbn2knytfzseq.png"><br><br>  Die Rotationsanimation wird im Voraus mit einem PC-Programm vollst√§ndig berechnet und ben√∂tigt eine erhebliche Menge an ROM-Code - drei B√§nke mit jeweils 16 Kilobyte, in denen f√ºr jedes der 256 Einzelbilder der Animation eine Tabelle in 176 Nummern der angezeigten Rasterzeilen gespeichert ist.  Es war m√∂glich, einen Effekt in Echtzeit zu erzielen. Ich habe bereits eine √§hnliche Demo f√ºr eine andere Plattform erstellt, aber in diesem Fall war gen√ºgend freier Speicher vorhanden und es gab keine zus√§tzliche Zeit. <br><br><h3>  Pacman </h3><br>  Urspr√ºnglich war eine komplexere Szene geplant, aus Zeitgr√ºnden trat sie jedoch in der minimalistischsten Version in Form einer Aufschl√ºsselung der Szenen zum Zeitpunkt des Musikwechsels in die Demo ein. <br><br>  Das Hauptproblem bestand darin, eine M√∂glichkeit zu finden, Animationen schnell zu erstellen.  Zun√§chst kam die Idee auf, wieder <i>Blender</i> oder andere Grafikprogramme zu verwenden.  Aber nach den ersten Versuchen und einigen Berechnungen wurde klar, dass nur acht Frames der Animation des √ñffnens des Mundes von einer vollst√§ndig geschlossenen zu einer vollst√§ndig ge√∂ffneten Position ausreichen w√ºrden und sie in <i>Gale</i> viel einfacher und schneller manuell zu zeichnen w√§ren. <br><br>  Als n√§chstes wurde ein Programm f√ºr den PC geschrieben, das eine Folge von Bildern eines vollst√§ndigen Animationszyklus aufnimmt und Bilder findet, die sich zwischen den Kacheln ge√§ndert haben.  Die Adressen dieser Kacheln in der Kachelkarte im Videospeicher werden als Listen mit variabler L√§nge gespeichert. Der Effekt in der Demo aktualisiert einfach die ge√§nderten Abschnitte dieser Listen.  Die Grafiken aller Frames passen in ein Kachelset und √§ndern sich w√§hrend des Effekts nicht. <br><br><img src="https://habrastorage.org/webt/vd/q6/au/vdq6au_yo_kcamlr_axpg3mki5k.png"><br><br><h3>  Kirby </h3><br>  Dieser Effekt wurde auf meinem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">alten</a> <i>Catrix-</i> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Bild</a> <i>behoben</i> .  Es gab einen Plan, das Gesicht einer Katze durch eine Art visuellen Effekt in ein alternatives Bild mit einer Cheshire-Katze zu verwandeln.  Als die Idee aufkam, der Demo Spielcharaktere hinzuzuf√ºgen, wurde nach einer kurzen Wahl - es war dringend erforderlich, zwei neue Vollbildbilder zu zeichnen - beschlossen, Kirby als "Cheshire" -Version zu verwenden.  Der Effekt des Bildwechsels wurde auf ein kurzes Flimmern reduziert. <br><br>  Bewegtbildbl√∂cke werden als Sprites angezeigt und an der richtigen Stelle auf der Kachelkarte eingepr√§gt.  In √§hnlicher Weise erfolgt das L√∂schen von Bl√∂cken. <br><br><h3>  Turm </h3><br>  Ich mochte den Effekt im letzten Level des <i>Battletoads-</i> Spiels immer und wollte ihn schon lange wiederholen.  In der Demo kam er mit Gr√º√üen zu einem Platz in der Szene. <br><br>  Der technische Teil ist sehr einfach, dies ist ein normales vertikales Scrollen einer Hintergrundebene.  Der Rotationseffekt wird durch Animation der Grafiken der Kacheln erzielt, w√§hrend die Karte der Kacheln unver√§ndert bleibt.  F√ºr die Animation wird der <i>MMC3-</i> Modus mit vier umschaltbaren <i>CHR-</i> Fenstern verwendet.  Das erste Fenster enth√§lt Kacheln des statischen Teils, w√§hrend die anderen drei mit unterschiedlicher Geschwindigkeit wechseln.  Eines der Fenster √§ndert auch reibungslos die Richtung der Animation.  Da in jedem Fenster 64 Kacheln platziert sind und das animierte Element nur 28 ben√∂tigt, werden die Grafiken der Kacheln in jedem Fenster dupliziert, um die Animation in die entgegengesetzte Richtung zu erhalten. <br><br><img src="https://habrastorage.org/webt/xf/pd/x2/xfpdx2ueqnid-jkhnpc2lr-7mke.png"><img src="https://habrastorage.org/webt/qm/dj/f_/qmdjf_ixlpbx3eiwc9_li-u5ndc.png"><img src="https://habrastorage.org/webt/y2/z2/ed/y2z2edauh83qgvyleevszwn9pic.png"><br><br>  Das Hauptproblem bei der Realisierung des Effekts war die Vorbereitung der Animation.  Es wurde von einem Programm auf einem PC ausgef√ºhrt, das eine 16x16-Textur und eine Geschwindigkeitstabelle f√ºr jede Pixelspalte am Eingang verwendet und einen Block mit 16 Animationsbildern in Form eines Satzes von 256 Kacheln (von denen einige leer sind) generiert.  Sets werden im <i>NES Screen Tool</i> in das gew√ºnschte Format konvertiert und mit den gew√ºnschten Offsets √ºber die Optionen der Direktive <i>incbin</i> assembler an B√§nke von ROM-Grafiken verteilt. <br><br>  Eine weitere wichtige Aufgabe bei der Begr√º√üung war es, nicht zu vergessen, diese an alle weiterzugeben, die dies w√ºnschen.  Da diese Zahl zur Unendlichkeit tendiert, w√ºrde eine zu lange Szene langweilig aussehen.  Ich beschloss, mich nur auf diejenigen zu beschr√§nken, mit denen ich ein Jahr lang √ºberquert hatte.  Namen, die in einer Textdatei gesammelt wurden, als sie in den Sinn kamen.  Nat√ºrlich stellte sich nach Abschluss der Arbeit heraus, dass ich immer noch vergessen hatte, viele Leute zu erw√§hnen. <br><br><h3>  Korridor </h3><br>  Es bestand der Wunsch, eine Szene mit einer Perspektive zu schaffen, beispielsweise einen klassischen Tunnel.  Klassische Tunnel oder ein echter <i>Wolfenstein-3D-</i> Rakester sind aufgrund der Komplexit√§t verschwunden.  Dar√ºber hinaus verf√ºgt <i>NES</i> bereits √ºber mehrere echte Rakaster, einschlie√ülich Texturen, die jedoch aufgrund der extrem niedrigen Geschwindigkeit nicht sehr beeindruckend aussehen. <br><br>  Ich interessiere mich sehr f√ºr pseudo-dreidimensionale Grafiken in fr√ºhen Spielen, und unter den alten Entwicklungen gab es bereits einen Sprite-Korridor mit einer reibungslosen Animation der Kurven, die vom <i>Zick-Zack-</i> Spiel f√ºr das <i>ZX Spectrum</i> inspiriert war.  Es wurde beschlossen, es zu benutzen.  Da der abstrakte Korridor selbst nicht sehr interessant ist, wurde eine interne Handlung der Szene mit Mario und WC-Humor erfunden, die ihn logisch vervollst√§ndigt, sowie die Demo als Ganzes.  Die Szene wurde zum allerletzten Mal gedreht, und trotz der Verwendung von Leerzeichen dauerte die Bearbeitung mehr als elf Stunden in Folge, wobei die vorbereitenden Arbeiten bei der Planung nicht ber√ºcksichtigt wurden. <br><br>  Alle Bewegungsrahmen werden manuell in Gale verfolgt.  Dies ist der einzige Effekt in der Demo, der eine Geschwindigkeit von unter 60 Bildern pro Sekunde aufweist, obwohl er problemlos mit dieser Geschwindigkeit funktionieren kann.  Aus Gr√ºnden der visuellen Lesbarkeit und der Synchronisation mit der Musik w√§hrend des Durchlaufs des Korridors wurde die Bildwiederholfrequenz auf 30 Bilder pro Sekunde begrenzt, als Alternative zum Hinzuf√ºgen von Bewegungszwischenphasen, f√ºr deren Vorbereitung keine Zeit mehr blieb. <br><br>  Grafikrahmen nahmen zwei S√§tze Kacheln auf.  Zu den erforderlichen Zeitpunkten der Animation wird die Hintergrundebene aktualisiert, der gew√ºnschte Grafiksatz wird verbunden und zwei Farben werden in zwei Paletten (f√ºr die obere und untere H√§lfte des Bildschirms) festgelegt, da beim Drehen um 90 Grad die Farben der W√§nde die Orte wechseln. <br><br>  Animationspl√§ttchenkarten werden zuerst durch einen Code in einer festen Bank von einer der beiden unteren Plug-in-B√§nke des ROM in den RAM kopiert.  W√§hrend der Anzeige des Rasters direkt unter dem angezeigten Fenster des Effekts wird das Rendern deaktiviert und die Daten werden vom RAM in den Videospeicher √ºbertragen.  Das Ausschalten des Renderings dient auch als untere Grenze des visuellen Ausschnitts f√ºr das Mario-Sprite. <br><br><h3>  Bildunterschriften </h3><br>  Diese Szene war eine der ersten nach den Farbbalken, die auf dem Code eines der alten Projekte basierten.  Es wurden bereits zwei Schriftarten unterst√ºtzt, verschiedene Paletten und Verlangsamungen am Ende.  F√ºr die Demo wurden neue Schriftarten gezeichnet, die √ºberall verwendet werden, und ein Effekt wurde an den R√§ndern des Bildschirms hinzugef√ºgt. <br><br>  Zuerst wollte ich die Kanten sanft abdunkeln, aber w√§hrend der vorbereitenden Experimente habe ich Optionen mit horizontalem Linienversatz ausprobiert, das Ergebnis hat mir gefallen und ich habe beschlossen, keine zus√§tzliche Zeit zu verwenden.  Leichte Schattierungen werden mithilfe der umstrittenen Funktion des <i>NES-</i> Videocontrollers hinzugef√ºgt, mit der Farbkomponenten stummgeschaltet werden.  Die Kontroverse liegt in der Tatsache, dass in verschiedenen regionalen Versionen und Klonen der Konsole diese Funktion unterschiedlich funktioniert, in dieser Anwendung jedoch keine besonderen Probleme auftreten sollten (ohne die sogenannte <i>RGB-PPU</i> , bei der die R√§nder mit Wei√ü gef√ºllt werden). <br><br><h3>  Ansehen </h3><br>  Ungef√§hr zu der Zeit, als die Untertitelszene gedreht wurde, entstand spontan die Idee zu dieser Szene.  Die urspr√ºngliche Idee war, es zu einem beliebigen Zeitpunkt einzuf√ºgen, aber am Ende passte es erfolgreich in das Ende.  Trotz der kurzen Dauer besteht die Szene aus drei Elementen: Simulation der Skalierung des Sprites, Erh√∂hung der Anzahl der Graustufen durch Abwechseln von zwei Frames und programmgesteuertes Abspielen eines <i>DPCM-</i> Samples. <br><br>  Um die Skalierung zu simulieren, wird die Tatsache verwendet, dass alle gro√üen Sprites auf <i>NES</i> aus kleinen bestehen, in diesem Fall 8 x 16 gro√ü.  Wenn Sie sie relativ zueinander verschieben, k√∂nnen Sie den Effekt der Skalierung oder Verzerrung erzielen, die bei kleinen √Ñnderungswerten recht anst√§ndig aussieht.  F√ºr diesen Effekt m√ºssen Sie den Versatz jedes Sprites von der Mitte mit einer Skala multiplizieren. Da der <i>NES-</i> Prozessor jedoch eine gro√üe Anzahl von Multiplikationen mit geraden Ganzzahlen nicht verarbeiten kann, wird der Trick angewendet. Zu Beginn des Frames wird das Koordinatengitter entlang der X- und Y-Achse ber√ºcksichtigt und die Sprite-Ausgabe verwendet diese vorberechneten Werte .  Dadurch wird die Anzahl der erforderlichen Multiplikationen erheblich reduziert - bei einem zusammengesetzten Spray aus 8 √ó 8 Elementen (64 Sprites) sind nur 16 (8 + 8) Multiplikationen anstelle von 128 (8 √ó 8 √ó 2) erforderlich. <br><br>  <i>NES</i> kann nur 4 Graustufen anzeigen, einschlie√ülich Wei√ü und Schwarz.  Der Effekt ahmt 7 Abstufungen nach: Wenn Sie ein wei√ües und wei√ües Pixel durch den Rahmen ziehen, ist es wei√ü, wenn grau und grau grau, und wenn Sie wei√ü und grau abwechseln, sieht es optisch wie eine Zwischenabstufung zwischen wei√ü und grau aus.  Die Hauptschwierigkeit ist wiederum die Erstellung von Grafiken, n√§mlich zwei Halbbilder des Bildes, die durch eine Reihe manueller Manipulationen in <i>Gale</i> und <i>GIMP ausgef√ºhrt wurden</i> .  Um das Flimmern zu verringern, wechseln sich die Zeilen der Halbbilder ab. <br><br><img src="https://habrastorage.org/webt/yc/1r/uf/yc1ruf7bi7cr6cmhz3rp5ryf_4w.png"><img src="https://habrastorage.org/webt/gr/fp/ky/grfpkygmrgieh8xy0nl75kbmh_q.png"><br><br>  Die programmgesteuerte Wiedergabe von <i>DPCM war</i> erforderlich, da in besseren Formaten kein Platz f√ºr ein Sample vorhanden war. Die Hardware-Unterst√ºtzung konnte keine Samples aus der unteren H√§lfte des Speichers wiedergeben. Im oberen nicht umschaltbaren Speicher war jedoch kein Platz f√ºr ein Sample dieser L√§nge vorhanden.  Das Klangfragment selbst ist nicht vom urspr√ºnglichen Bildschirmschoner, sondern ein ziemlich √§hnlich klingender Jingle aus dem bekannten Spiel mit grausamer Endbearbeitung, der zum Zeitpunkt der eigentlichen Endbearbeitung ert√∂nt. <br><br><h3>  Speicherkarte </h3><br>  In der Entwicklung wurde st√§ndig das Dienstprogramm NES Space Checker verwendet, das das F√ºllen von Speicherb√§nken visualisiert.  Es ist sehr interessant, ein gutes Beispiel daf√ºr zu sehen, was und wo sich im Programm befindet. <br><br><img src="https://habrastorage.org/webt/2o/wm/vi/2owmvixodm0fwzxlnofl0k83mew.png"><br><br>  <b>PRG00</b> ... <b>PRG02</b> - Musikdaten <br>  <b>PRG03</b> - Beispiel f√ºr eine Szene mit einer Ansicht <br>  <b>PRG04</b> ... <b>PRG06</b> - Cartridge-Rotationsanimationsdaten <br>  <b>PRG07</b> - <b>Kachelanimation</b> tief im Flur <br>  <b>PRG08</b> - Animation der <b>Kachelrotation</b> im Flur <br>  <b>PRG09</b> - Tower- <b>Szenencode</b> <br>  <b>PRG0A</b> - <b>Szenencode</b> mit rotierendem Logo <br>  <b>PRG0B</b> - <b>Szenencode</b> mit einem Namen und einem Korridor <br>  <b>PRG0C</b> - <b>Szenencode</b> mit rotierender Patrone, Kirby, View, Invaders, Pakman <br>  <b>PRG0D</b> - <b>Szenencode</b> mit Intros, Rauschen, Farbbalken, Untertiteln <br>  <b>PRG0E</b> - die Hauptbank des Codes, enth√§lt nur Aufrufe aller Szenen <br>  <b>PRG0F</b> - Bank mit festem Code, Musik-Player, Sprite-Ausgabe, Interrupt-Handler <br><br>  <b>CHR00</b> - Elefantenbaby und Fliesen f√ºr farbige Streifen <br>  <b>CHR01</b> - Schrift und Rauschen <br>  <b>CHR02</b> - Sprite und Kacheln von sich drehenden Buchstaben im Namen <b>anzeigen</b> <br>  <b>CHR03</b> - Normale Kirby <b>Fliesen</b> <br>  <b>CHR04</b> - Cheshire Kirby <b>Fliesen</b> <br>  <b>CHR05</b> - Grafik f√ºr eine Szene mit einer rotierenden Kassette <br>  <b>CHR06</b> ... <b>CHR0D</b> - rotierende <b>Logoanimation</b> <br>  <b>CHR0E</b> - eine Schriftart zur Begr√º√üung und Animation von Invader-Kacheln <br>  <b>CHR0F</b> - Pakman <b>Fliesen</b> <br>  <b>CHR10</b> ... <b>CHR13</b> - Turm Textur Animation <br>  <b>CHR14</b> - <b>Flurfliesen</b> <br>  <b>CHR15</b> - <b>Sprite</b> Mario <br>  <b>CHR16</b> ... <b>CHR1F</b> - wird nicht verwendet <br><br><h2>  Anstelle einer Schlussfolgerung </h2><br>  Ich werde mit einem Combo-Mem enden: Schreiben Sie in jeder unverst√§ndlichen Situation Demoszenen, meine Herren! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de474960/">https://habr.com/ru/post/de474960/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de474948/index.html">Gibt es eine Perspektive f√ºr "Orlan" oder unsere "Orlan" gegen "IBM"</a></li>
<li><a href="../de474950/index.html">Artem Svetlov: ‚ÄûIch sehe jeden Tag bei der Arbeit, wie OSM verschiedenen Unternehmen hilft.‚Äú</a></li>
<li><a href="../de474954/index.html">Algorithmus f√ºr bin√§res maschinelles Lernen mit dynamischer Struktur</a></li>
<li><a href="../de474956/index.html">Welcher amerikanische Actionfilm kommt ohne Verfolgung aus? Toby Galicki und seine 60 Sekunden</a></li>
<li><a href="../de474958/index.html">Anmerkungen des Zadroth: Allmacht-Frameworks</a></li>
<li><a href="../de474962/index.html">Plattformentwickler Conf von Miro: Live-Stream</a></li>
<li><a href="../de474964/index.html">Mock-Synchronisation mit realen Implementierungen</a></li>
<li><a href="../de474966/index.html">So erstellen Sie einen Smart Python-Vertrag im Ontology-Netzwerk. Teil 1: Blockchain & Block API</a></li>
<li><a href="../de474968/index.html">RxDart f√ºr die kleinsten ... Projekte</a></li>
<li><a href="../de474970/index.html">Wie schreibe ich einen Smart Contract mit Python on Ontology? Teil 5: Native API</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>