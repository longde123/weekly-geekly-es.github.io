<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßúüèº üë©üèø‚Äçü§ù‚Äçüë©üèª üôÜ C√≥digo aberto: humor de c√≥digo, truques de c√≥digo, c√≥digo N√ÉO üíÇ ü§£ üîó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Procurando em um software de c√≥digo aberto diverso, periodicamente encontro todo tipo de coisa interessante: √†s vezes √© apenas um coment√°rio engra√ßado...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥digo aberto: humor de c√≥digo, truques de c√≥digo, c√≥digo N√ÉO</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437832/"><p><img src="https://habrastorage.org/webt/ns/bp/do/nsbpdo-3rgtiavelrrlgrxkgluc.jpeg" alt="Old Clib vs New Clang"></p><br><p>  Procurando em um software de c√≥digo aberto diverso, periodicamente encontro todo tipo de coisa interessante: √†s vezes √© apenas um coment√°rio engra√ßado, √†s vezes √© algo espirituoso em um sentido mais amplo.  Cole√ß√µes semelhantes aparecem periodicamente na "Internet global" e no Habr√© - por exemplo, h√° uma pergunta bem conhecida no StackOverflow sobre coment√°rios no c√≥digo e uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sele√ß√£o de</a> nomes engra√ßados de entidades legais e top√¥nimos foi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">publicada</a> recentemente aqui.  Vou tentar estruturar e definir o que gradualmente acumulei.  Sob o corte, cita√ß√µes do QEMU, o kernel do Linux e muito mais est√£o esperando por voc√™. </p><a name="habracut"></a><br><h2 id="linux-kernel">  Kernel Linux </h2><br><p> Eu acho que para muitos n√£o √© segredo que as cartas da lista de discuss√£o do kernel do Linux periodicamente divergem entre aspas.  Ent√£o, vamos dar uma olhada melhor no c√≥digo.  E imediatamente, o sistema de montagem do kernel nos surpreende: como voc√™ sabe, os projetos criados pela Autoconf t√™m um Makefile com dois objetivos padr√£o de limpeza: <code>clean</code> e <code>distclean</code> .  Naturalmente, o kernel n√£o √© constru√≠do usando o Autoconf, e o que vale apenas o <code>menuconfig</code> , ent√£o existem mais objetivos aqui: <code>clean</code> , <code>distclean</code> e <code>mrproper</code> - sim, sim, Mr.Proper, <del>  um limpador de n√∫cleo duas vezes mais r√°pido </del>  . </p><br><p>  Falando no sistema de configura√ß√£o: uma vez fiquei surpreso quando o encontrei, al√©m de comandos claros como <code>allnoconfig</code> , <code>allyesconfig</code> (suspeito que algo <em>muito de depura√ß√£o</em> possa ser compilado, ent√£o agora n√£o correria o risco de fazer o download em hardware real .. .) e <code>allmodconfig</code> para o destino misterioso <code>allrandconfig</code> .  "Eles est√£o zombando", pensei, depois contei a meu amigo sobre essa observa√ß√£o, √† qual ele respondeu que provavelmente era um comando completamente significativo, mas n√£o para montagem real, mas para testar a corre√ß√£o do arranjo de depend√™ncias entre as op√ß√µes - como eu disse. agora, uma esp√©cie de par√¢metros de configura√ß√£o imprecisos. </p><br><p>  No entanto, h√° vida no √¢mago do sistema de montagem: a documenta√ß√£o √†s vezes n√£o √© apenas t√©cnica, mas tamb√©m de um tipo, valor art√≠stico.  Suponha que voc√™ queira alertar os usu√°rios do modo de suspens√£o sobre sua fragilidade e o risco de perda de dados se determinadas regras n√£o forem seguidas.  Eu escrevia tristemente, dizendo <em>ATEN√á√ÉO: &lt;substitua algumas das linhas mais chatas&gt;</em> .  Mas o desenvolvedor que escreveu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">isso fez algo</a> diferente: </p><br><pre> <code class="plaintext hljs">Some warnings, first. * BIG FAT WARNING ********************************************************* * * If you touch anything on disk between suspend and resume... * ...kiss your data goodbye. * * If you do resume from initrd after your filesystems are mounted... * ...bye bye root partition. * [this is actually same case as above] * * ...</code> </pre> <br><h3 id="malenkie-hitrosti">  Pequenos truques </h3><br><p>  N√£o √© de surpreender que nem todos os c√≥digos possam ser compilados com otimiza√ß√µes: quando tentei for√ß√°-los a serem ativados para todos os arquivos de objetos, naturalmente encontrei alguma fonte de entropia ou algo semelhante que <code>#error</code> se a otimiza√ß√£o estivesse ativada.  Bem, a criptografia √© assim.  Mas voc√™ deseja um c√≥digo que n√£o ser√° montado se voc√™ <strong>desativar</strong> todas as otimiza√ß√µes, inlining etc.?  Como isso √© poss√≠vel?  E esta √© uma afirma√ß√£o est√°tica: </p><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* SPDX-License-Identifier: GPL-2.0 */</span></span> <span class="hljs-comment"><span class="hljs-comment">// ... /* * This function doesn't exist, so you'll get a linker error if * something tries to do an invalidly-sized xchg(). */ extern void __xchg_called_with_bad_pointer(void); static inline unsigned long __xchg(unsigned long x, volatile void *ptr, int size) { unsigned long ret, flags; switch (size) { case 1: #ifdef __xchg_u8 return __xchg_u8(x, ptr); #else local_irq_save(flags); ret = *(volatile u8 *)ptr; *(volatile u8 *)ptr = x; local_irq_restore(flags); return ret; #endif /* __xchg_u8 */ // ... default: __xchg_called_with_bad_pointer(); return x; } }</span></span></code> </pre> <br><p>  Aparentemente, sup√µe-se que, para qualquer uso com argumento constante, essa fun√ß√£o se expanda em apenas um ramo do <code>switch</code> e, quando usado com um argumento <em>v√°lido</em> , esse ramo n√£o ser√° o <code>default:</code> <br>  De forma n√£o otimizada, essa fun√ß√£o causar√° um erro de link quase por design ... </p><br><h3 id="znaete-li-vy">  Voc√™ sabe </h3><br><ul><li>  ... que o kernel possui um compilador JIT de bytecode no modo de usu√°rio?  Essa tecnologia √© chamada eBPF e √© usada para roteamento, rastreamento e muito mais.  A prop√≥sito, se voc√™ n√£o tem medo de ferramentas "nucleares" experimentais, observe o pacote bpftools. </li><li>  ... que o kernel pode demorar cerca de cinco minutos em tempo de processador?  Existe uma chamada do sistema <code>sendfile</code> que copia bytes de um descritor de arquivo para outro.  Se voc√™ informar o mesmo descritor e definir o deslocamento correto no arquivo, ele retroceder√° os mesmos dados at√© copiar 2 GB. </li><li>  ... que existe uma variante do trabalho de hiberna√ß√£o realizado pelo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">processo</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">usu√°rio</a> - n√£o ficarei surpreso se voc√™ tamb√©m puder salv√°-lo no armazenamento em rede. </li></ul><br><h2 id="qemu">  QEMU </h2><br><p>  Em geral, quando li Robert Love sobre o dispositivo do kernel Linux e depois entrei nas fontes da QEMU, tive um certo senso de d√©j√† vu.  Havia listas incorporadas nas estruturas por valor (e n√£o como no curso de programa√ß√£o inicial que eles aprendem - por meio de ponteiros) e um certo subsistema RCU (o que √©, eu ainda n√£o entendi completamente, mas tamb√©m existe no kernel) e, provavelmente muito mais parecido. </p><br><p>  Qual √© a primeira coisa que uma pessoa legal deseja trabalhar em um projeto para conhecer?  Provavelmente com o estilo de codifica√ß√£o.  E j√° neste, pode-se dizer, documento cerimonial, vemos: </p><br><pre> <code class="plaintext hljs">1. Whitespace Of course, the most important aspect in any coding style is whitespace. Crusty old coders who have trouble spotting the glasses on their noses can tell the difference between a tab and eight spaces from a distance of approximately fifteen parsecs. Many a flamewar has been fought and lost on this issue.</code> </pre> <br><p>  Aqui est√° a eterna pergunta sobre o comprimento m√°ximo da linha: </p><br><pre> <code class="plaintext hljs">Lines should be 80 characters; try not to make them longer. ... Rationale: - Some people like to tile their 24" screens with a 6x4 matrix of 80x24 xterms and use vi in all of them. The best way to punish them is to let them keep doing it. ...</code> </pre> <br><p>  <em>(Hmm ... √â duas vezes maior em cada eixo do que √†s vezes uso. √â um Linux HD?)</em> </p><br><p>  Ainda h√° muito interessante - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">leia</a> . </p><br><h3 id="i-snova-hitrosti">  E novamente truques </h3><br><p>  Eles dizem que C √© uma linguagem de baixo n√≠vel.  Mas se √© bom ser pervertido, voc√™ pode mostrar as maravilhas da gera√ß√£o de c√≥digo em tempo de compila√ß√£o sem Scala ou mesmo C ++. </p><br><p>  Por exemplo, o arquivo softmmu_template.h est√° <code>softmmu_template.h</code> na base de c√≥digos QEMU.  Quando vi esse nome, pensei que ele deveria ser copiado na minha implementa√ß√£o do TCG do back-end e corrigido at√© que a implementa√ß√£o correta do TLB sa√≠sse dele.  N√£o importa como!  Veja como us√°-lo <strong>corretamente</strong> : </p><br><p>  <strong>accel / tcg / cputlb.h:</strong> </p><br><pre> <code class="cpp hljs">define DATA_SIZE <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"softmmu_template.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DATA_SIZE 2 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"softmmu_template.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DATA_SIZE 4 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"softmmu_template.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DATA_SIZE 8 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"softmmu_template.h"</span></span></span></span></code> </pre> <br><p>  Como voc√™ pode ver, prestidigita√ß√£o e n√£o C ++.  Mas este √© um exemplo bastante simples.  Que tal algo mais complicado? </p><br><p>  Existe um arquivo assim: <strong>tcg / tcg-opc.h</strong> .  Seu conte√∫do √© bastante misterioso e se parece com isso: </p><br><pre> <code class="cpp hljs">... DEF(mov_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, TCG_OPF_NOT_PRESENT) DEF(movi_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, TCG_OPF_NOT_PRESENT) DEF(setcond_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) DEF(movcond_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, IMPL(TCG_TARGET_HAS_movcond_i32)) <span class="hljs-comment"><span class="hljs-comment">/* load/store */</span></span> DEF(ld8u_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) DEF(ld8s_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) DEF(ld16u_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) DEF(ld16s_i32, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) ...</code> </pre> <br><p>  De fato, tudo √© muito simples - √© usado assim: </p><br><p>  <strong>tcg / tcg.h:</strong> </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> TCGOpcode { <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DEF(name, oargs, iargs, cargs, flags) INDEX_op_ ## name, #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"tcg-opc.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">undef</span></span></span><span class="hljs-meta"> DEF NB_OPS, } TCGOpcode;</span></span></code> </pre> <br><p>  Ou ent√£o: </p><br><p>  <strong>tcg / tcg-common.c:</strong> </p><br><pre> <code class="cpp hljs">TCGOpDef tcg_op_defs[] = { #define DEF(s, oargs, iargs, cargs, flags) \ { #s, oargs, iargs, cargs, iargs + oargs + cargs, flags }, #include <span class="hljs-string"><span class="hljs-string">"tcg-opc.h"</span></span> #undef DEF };</code> </pre> <br><p>  √â at√© estranho que, no decorrer de outros casos de uso, n√£o tenha sido encontrado.  E observe que, neste caso, n√£o h√° scripts complicados para gera√ß√£o de c√≥digo - apenas C, apenas hardcore. </p><br><h3 id="znaete-li-vy-1">  Voc√™ sabe </h3><br><ul><li>  ... que o QEMU pode funcionar n√£o apenas no modo de emula√ß√£o de um sistema completo, mas tamb√©m executar um processo separado para outra arquitetura que se comunica com o kernel do host? </li></ul><br><h2 id="java-jvm-i-vse-vse-vse">  Java, JVM e tudo-tudo-tudo </h2><br><p>  O que eu sou sobre o Linux?  Vamos falar sobre algo multiplataforma.  Sobre a JVM, por exemplo.  Bem, sobre o GraalVM, provavelmente, muitos desenvolvedores neste ecossistema j√° ouviram falar.  Se voc√™ n√£o ouviu, em poucas palavras: √© √©pico.  Ent√£o, depois de falar sobre Graal, vamos para a boa e velha JVM. </p><br><p>  √Äs vezes, a JVM precisa parar todos os encadeamentos gerenciados - o est√°gio de coleta de lixo √© t√£o complicado ou algo mais - mas aqui est√° o problema, voc√™ pode parar os encadeamentos apenas nos chamados pontos seguros.  Conforme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">descrito aqui</a> , uma verifica√ß√£o normal de uma vari√°vel global leva muito tempo, incluindo algum tipo de xamanismo com barreiras de mem√≥ria.  O que os desenvolvedores fizeram?  Eles se limitaram a uma leitura vari√°vel. </p><br><div class="spoiler">  <b class="spoiler_title">Quase como no HQ9 +</b> <div class="spoiler_text"><p>  Existe uma linguagem t√£o c√¥mica - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">HQ9 +</a> .  Foi criado como uma "linguagem de programa√ß√£o educacional muito conveniente", ou seja, √© muito simples executar as tarefas t√≠picas que os alunos solicitam: </p><br><ul><li>  o comando 'H' int√©rprete imprime Ol√°, Mundo! </li><li>  no comando 'Q' imprime o texto do pr√≥prio programa (quine) </li><li>  no '9' ele imprime a letra de <em>99 garrafas de cerveja</em> </li><li>  por 'i' incrementa a vari√°vel <strong>i</strong> em um </li><li>  <em>ele n√£o pode fazer mais nada, mas por qu√™?</em> </li></ul></div></div><br><p>  Como a JVM atinge a meta com uma instru√ß√£o?  Mas √© muito simples - se for necess√°rio parar, ele remove a exibi√ß√£o da p√°gina de mem√≥ria com essa vari√°vel - os encadeamentos caem no SIGSEGV e a JVM os estaciona e os pausa quando a "manuten√ß√£o" termina.  Lembro-me no StackOverflow quando perguntado em uma entrevista. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como voc√™ trava uma JVM?</a>  respondeu: </p><br><blockquote>  JNI.  De fato, com a JNI, travar √© o modo padr√£o de opera√ß√£o.  Voc√™ tem que trabalhar muito para n√£o travar. </blockquote><p>  Brincando como uma piada, e √†s vezes na JVM realmente √©. </p><br><p>  Bem, desde que mencionei a gera√ß√£o de c√≥digo no Scala, e agora estamos falando sobre esse ecossistema, aqui est√° um fato interessante: a gera√ß√£o de c√≥digo no Scala (aquele que possui macros) est√° estruturada da seguinte maneira: voc√™ escreve c√≥digo no Scala usando a API compilador e compil√°-lo.  Ent√£o, no pr√≥ximo in√≠cio do compilador, voc√™ simplesmente passa o gerador de c√≥digo resultante para o caminho de classe do pr√≥prio compilador, e esse, vendo uma diretiva especial, chama, passando as √°rvores de sintaxe recebidas durante a chamada.  Em resposta, ele recebe um AST, que deve ser substitu√≠do no local da chamada. </p><br><h3 id="osobennosti-ideologiy-licenzirovaniya">  Recursos de ideologias de licenciamento </h3><br><p>  Eu gosto da ideologia do software livre, mas tamb√©m possui alguns recursos divertidos. </p><br><p>  Uma vez, cerca de dez anos atr√°s, atualizei meu Debian stable e, pensando na sintaxe de um comando, digitei <code>man &lt;&gt;</code> habitualmente, que recebeu uma descri√ß√£o exaustiva como ‚Äú[nome do programa] √© um programa com documenta√ß√£o distribu√≠da sob licen√ßa GNU GFDL com se√ß√µes imut√°veis, que n√£o s√£o livres de DFSG. "  <em>Eles dizem que este programa foi escrito por alguns propriet√°rios maus de alguma FSF ...</em> (Agora a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">discuss√£o</a> √© no google.) </p><br><p>  E algumas bibliotecas pequenas, mas importantes, s√£o consideradas por algumas distribui√ß√µes como software n√£o-livre, porque o autor escreveu para a licen√ßa permissiva padr√£o que <em>esse programa deveria ser usado para o bem e n√£o para o mal</em> .  Risos, risos, e eu tamb√©m provavelmente ter√≠amos medo de levar uma coisa dessas para a produ√ß√£o - voc√™ nunca sabe o que o autor pensa sobre o bem e o mal. </p><br><h2 id="vsyakoe-raznoe">  Qualquer outro </h2><br><h3 id="osobennosti-internacionalnogo-kompilyatorostroeniya-v-period-zakona-mura">  Caracter√≠sticas da constru√ß√£o internacional de compiladores durante a Lei Moore </h3><br><p>  Os duros desenvolvedores de LLVM limitaram o alinhamento suportado: </p><br><blockquote>  O alinhamento m√°ximo √© 1 &lt;&lt; 29. </blockquote><p>  Como se costuma dizer, isso <em>faz voc√™ rir primeiro e depois pensar</em> : o primeiro pensamento - mas quem precisa de alinhamento aos 512 MiB.  Ent√£o eu li <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sobre o desenvolvimento do kernel no Rust</a> , e l√° eles prop√µem fazer uma estrutura de "tabela de p√°ginas" alinhada a 4096 bytes.  E como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">voc√™ l√™ a</a> Wikipedia, ent√£o geralmente: </p><br><blockquote>  Uma hierarquia de mapeamento completa de p√°ginas de 4 KB para todo o espa√ßo de 48 bits levaria um pouco mais de 512 GB de mem√≥ria (cerca de 0,195% do espa√ßo virtual de 256 TB). </blockquote><br><h3 id="versiya-formata-----kak-hranit">  Vers√£o em formato - como armazenar? </h3><br><p>  Uma vez eu decidi descobrir por que a exporta√ß√£o n√£o funciona em um programa, <em>mas acaba funcionando</em> ... Ou n√£o? </p><br><p>  Tendo iniciado os comandos de back-end manualmente, percebi que, em princ√≠pio, tudo est√° em ordem, apenas a vers√£o deve ser transmitida como "2.0", mas apenas "2" sai.  Antecipando uma corre√ß√£o trivial editando uma constante de string, encontro a fun√ß√£o <code>double getVersion()</code> - mas o que √© maior, menor √©, mesmo que haja um ponto!  No entanto, no final, tudo foi decidido n√£o muito mais complicado do que o esperado, eu <del>  precis√£o de sa√≠da apenas aprimorada </del>  Encaminhou o tipo de dados e as linhas. </p><br><h3 id="o-raznice-mezhdu-teoretikami-i-praktikami">  Sobre a diferen√ßa entre te√≥ricos e profissionais </h3><br><p>  Na minha opini√£o, em algum lugar do Habr√© eu j√° vi uma tradu√ß√£o de um artigo sobre o que s√£o as falhas m√≠nimas na inicializa√ß√£o, mas ainda assim um programa compilado em C? <code>int main;</code>  - existe um s√≠mbolo <code>main</code> e, <em>tecnicamente</em> , voc√™ pode transferir o controle para ele.  <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">O sirikid</a> notou corretamente que mesmo os bytes <code>int</code> s√£o sup√©rfluos aqui.</em>  <em>Em geral, mesmo falando de um programa de 9 bytes de tamanho, √© melhor n√£o espalhar as reivindica√ß√µes de que <strong>√© o</strong> menor ... √â</em> verdade que o programa cair√°, mas isso √© completamente consistente com as regras. </p><br><p>  Ent√£o, sabemos como descartar o que deve funcionar, mas e quanto ao lan√ßamento de um n√£o lan√ßador? </p><br><pre> <code class="plaintext hljs">$ ldd /bin/ls linux-vdso.so.1 (0x00007fff93ffa000) libselinux.so.1 =&gt; /lib/x86_64-linux-gnu/libselinux.so.1 (0x00007f0b27664000) libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f0b2747a000) libpcre.so.3 =&gt; /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007f0b27406000) libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f0b27400000) /lib64/ld-linux-x86-64.so.2 (0x00007f0b278e9000) libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f0b273df000) $ /lib/x86_64-linux-gnu/libc.so.6</code> </pre> <br><p>  ... e libc ele <del>  voz humana </del>  : </p><br><pre> <code class="plaintext hljs">GNU C Library (Ubuntu GLIBC 2.28-0ubuntu1) stable release version 2.28. Copyright (C) 2018 Free Software Foundation, Inc. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. Compiled by GNU CC version 8.2.0. libc ABIs: UNIQUE IFUNC ABSOLUTE For bug reporting instructions, please see: &lt;https://bugs.launchpad.net/ubuntu/+source/glibc/+bugs&gt;.</code> </pre> <br><h3 id="programmisty-igrayut-v-golf">  Programadores jogam golfe </h3><br><p>  Existe um site inteiro no StackExchange dedicado ao Code Golf - competi√ß√µes com o estilo "Resolva esse problema com uma penalidade m√≠nima, dependendo do tamanho do c√≥digo-fonte".  O formato em si envolve solu√ß√µes muito sofisticadas, mas √†s vezes elas se tornam muito sofisticadas.  Portanto, em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma das perguntas</a> , uma cole√ß√£o de brechas proibidas padr√£o foi coletada.  Eu gosto especialmente deste: </p><br><blockquote>  Usando o MetaGolfScript <br>  MetaGolfScript √© uma fam√≠lia de linguagens de programa√ß√£o.  Por exemplo, o programa vazio no MetaGolfScript-209180605381204854470575573749277224 imprime "Ol√°, mundo!". </blockquote><br><h2 id="odnoy-strokoy">  Em uma linha </h2><br><ul><li><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O bool n√£o inicializado que travou o programa</a> ou onde o comportamento indefinido leva </p><br></li><li><p>  ... que, a prop√≥sito, √© m√°gico.  Algu√©m no LLVM brincou no dia 1¬∫ de abril e outro fez um relat√≥rio a partir disso: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Meu pequeno otimizador: comportamento indefinido √© m√°gico</a> </p><br></li><li><p>  Lembra do apelo amb√≠guo de elogiar os desenvolvedores de software de c√≥digo aberto no rastreador?  Na Binaryen, foi implementado de forma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">simples e com bom gosto</a> : </p><br><blockquote>  <strong>Problema:</strong> Este projeto √© INCR√çVEL <br>  <strong>Resolu√ß√£o:</strong> wontfix, funciona como pretendido </blockquote><br></li><li><p>  em fevereiro de 2009, uma pessoa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fez uma pergunta</a> no StackOverflow: "Como fazer isso e aquele navegador cruzado? Ou, bem, <em>tr√™s navegadores funcionais s√£o √≥timos e quem usa o Chrome de qualquer maneira?</em> " </p><br></li></ul><br><p>  Finalmente, de onde vem o t√≠tulo do artigo?  Este √© um truque parafraseado da sa√≠da do compilador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">emcc</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Emscripten</a> : </p><br><pre> <code class="plaintext hljs">$ emcc --help ... emcc: supported targets: llvm bitcode, javascript, NOT elf (autoconf likes to see elf above to enable shared object support)</code> </pre> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt437832/">https://habr.com/ru/post/pt437832/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt437820/index.html">50 tons de seguran√ßa Drupal</a></li>
<li><a href="../pt437824/index.html">Extens√£o Universal 1C para o Planilhas Google e o Google Docs - use e use</a></li>
<li><a href="../pt437826/index.html">Como migramos o banco de dados do Redis e do Riak KV para o PostgreSQL. Parte 1: o processo</a></li>
<li><a href="../pt437828/index.html">Abra o webinar "SELECT ordem de execu√ß√£o da consulta e plano de consulta no MS SQL Server"</a></li>
<li><a href="../pt437830/index.html">Programa√ß√£o confi√°vel por idioma - revis√£o noob. Parte 1</a></li>
<li><a href="../pt437834/index.html">Duas hist√≥rias sobre como os eventos de programa√ß√£o ocorreram em Ecaterimburgo</a></li>
<li><a href="../pt437836/index.html">Sob o cap√¥ Screeps - virtualiza√ß√£o na caixa de areia MMO para programadores</a></li>
<li><a href="../pt437838/index.html">As tecnologias de aprendizado de m√°quina aceleram o processo de adapta√ß√£o dos pacientes √†s pr√≥teses bi√¥nicas</a></li>
<li><a href="../pt437842/index.html">A hist√≥ria secreta de Donkey Kong: das m√°quinas de arcade ao NES</a></li>
<li><a href="../pt437844/index.html">O conflito permanente de digita√ß√£o est√°tica versus din√¢mica - o TypeScript n√£o ajuda</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>