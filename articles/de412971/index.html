<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÜüèº üßñüèø üïµüèæ Erstellen einer Farbanwendung auf Unity3D ü¶é ü•Ç ‚§¥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Diese Geschichte begann an einem frostigen Fr√ºhlingsabend, als mir die Frage in den Sinn kam: Gibt es eine M√∂glichkeit, den Grad der F√ºllung einer bel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen einer Farbanwendung auf Unity3D</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412971/"><img src="https://habrastorage.org/webt/1n/wt/6k/1nwt6kpf53h7tdyd_ez0-j3f5ds.jpeg" alt="Bild"><br><br>  Diese Geschichte begann an einem frostigen Fr√ºhlingsabend, als mir die Frage in den Sinn kam: Gibt es eine M√∂glichkeit, den <b>Grad der F√ºllung einer beliebigen geometrischen Form mit Farbe</b> zu bestimmen (dh um wie viel Prozent wird sie derzeit √ºbermalt)?  Ja, damit es nicht nur langsamer wird, sondern auf den schw√§chsten Mobilger√§ten <i>mit 60 fps fliegt</i> . <br><br>  F√ºr diejenigen, die nicht sofort verstanden haben, wovon ich sprach, erkl√§re ich: Ein Rasteransatz ist f√ºr das Problem m√∂glich, sowie ... kein Rasteransatz. <br><a name="habracut"></a><br>  Im ersten Fall ist alles einfach, das Thema <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hochwasserf√ºllung</a> und verwandte Algorithmen wurde erfolgreich untersucht und im <abbr title="Programmiersprachen">YP</abbr> f√ºr jeden Geschmack implementiert.  Es gibt eine Reihe von Pixeln, die gef√ºllt werden m√ºssen, es gibt ihre R√§nder.  Wir z√§hlen die Anzahl der √ºberfluteten Punkte, dividieren durch die Gesamtzahl und voila - wir haben den gesch√§tzten Prozentsatz am Ausgang.  Aber - mit einer gro√üen Anzahl von Pixeln (und ppi auf modernen Ger√§ten wissen Sie selbst, welches) und - wenn es viele solcher Zahlen gibt, sto√üen wir in jedem Frame auf eine Reihe von Berechnungen, die das Ger√§t angenehm erw√§rmen, aber nicht die Seele. <br><br>  Wie auch immer, die Arbeit mit dem Raster schien unsportlich.  Der Blick war auf allm√§chtige Deponien gerichtet.  Mehrere aufregende Stunden entspannter, best√§ndiger Codierung haben die Hypothese bewiesen: Sie k√∂nnen so etwas wie ‚Äû <i>Scheitelpunktfarbe</i> ‚Äú - Scheitelpunktfarbe - verwenden. <br><br><div class="spoiler">  <b class="spoiler_title">Ein bisschen √ºber die Scheitelpunktfarbe</b> <div class="spoiler_text">  Der native zus√§tzliche Informationskanal, der in der Dreiecksdatenstruktur verf√ºgbar ist, ist derselbe <i>mesh.colors</i> .  Theoretisch kann es f√ºr jeden Zweck verwendet werden, je nachdem, was im Shader geschrieben ist. In diesem Fall speichert das gesch√§tzte Byte jedoch genau den aktuellen Wert der Farbf√ºllung f√ºr jeden Scheitelpunkt.  Sein Shader verwendet es beim Rendern. Mit Unity One Material k√∂nnen Sie eine unbegrenzte Anzahl mehrfarbiger Netze mit einem Material f√ºr alle erstellen.  Das Interessanteste ist, dass die Scheitelpunktfarbwerte untereinander hardwareinterpoliert werden, wodurch Sie Lichtverl√§ufe erstellen k√∂nnen. <br></div></div><br>  Ich denke, es ist erw√§hnenswert, warum der ber√ºchtigte Prozentsatz der Schattierung, mit dem der Artikel begann, ben√∂tigt wurde.  Die Hauptidee der Farbanwendung war wie folgt: Das endg√ºltige Bild besteht aus einer Reihe von Polygonen.  Die Anwendung wird <b>den Benutzer nacheinander und automatisch Element f√ºr Element abschalten</b> .  Dementsprechend werden Sie nicht zum n√§chsten √ºbergehen, bis Sie ein St√ºck bis zum Ende fertig gemalt haben.  Eine solche Entscheidung erschien mir sehr elegant, attraktiv und angesichts der globalen Dominanz der ‚ÄûPixel‚Äú -Farben in den Geschichten auch frisch. <br><br><h1>  Erste Schritte </h1><br>  Nat√ºrlich war es notwendig, viele faszinierende L√∂sungen zu entwickeln, um eine vollwertige F√§rbung zu erzielen.  Zun√§chst wollte ich, dass trotz der polygonalen Natur der Anwendung die F√§rbung als das rasterreichste wahrgenommen wurde, dh die <b>Farbe sollte sich unter dem Finger ausbreiten</b> und ein mehr oder weniger realistisches Aussehen haben.  Die anf√§ngliche Anforderung an maximale Leistung verschwand nirgendwo und lie√ü weiterhin eine beeindruckende Cumuluswolke √ºber den gesamten Prozess h√§ngen. <br><br>  Der erste Schritt bestand darin, eine menschliche <b>Tessellation durchzuf√ºhren</b> (ein gro√ües Polygon, das aus einer Reihe von Dreiecken besteht, in eine stochastische Gruppe kleiner Dreiecke zu zerlegen).  Wenn wir beim Ausf√ºllen ein Array von Scheitelpunkten erhalten und dort Scheitelpunktfarben schreiben, k√∂nnen wir durch einen normalen Durchgang durch das Array feststellen, ob die Figur vollst√§ndig gef√ºllt ist und welche anderen Teile unbemalt bleiben - <i>√§hnlich wie beim Pixelalgorithmus, jedoch mit viel mehr Freiheit</i> . <br><br><img src="https://habrastorage.org/webt/hd/ki/0c/hdki0cypjlbrmfhokpfho7y0qv4.jpeg" alt="Bild"><br><br>  Dann begann eine aufregende Reise in die Welt der Shader.  Wie Sie verstehen, kann ich nicht alle Funde und Geheimnisse vollst√§ndig entdecken, aber ich werde sagen, dass durch die Interaktion mit der Rauschkarte und den Unity-Strahlen der alten Schule, die Unity-Strahlen von meinen Fingern ausstrahlen, der Pinseleffekt erzielt wurde und sogar eine gewisse Farbverteilung entlang der Dreiecke neben dem Finger.  Die Verwendung der Scheitelpunktfarbe erm√∂glichte es, auf <b>ein Unity-Material</b> f√ºr absolut alle Bestandteile der Figur zu verzichten und daher Aufrufe im fertigen Programm nicht mehr als 5-7 zu zeichnen (abh√§ngig vom Vorhandensein von Men√ºs und Partikeln). <br><br>  Der Strich wird vom √ºblichen Unity Line Renderer ausgef√ºhrt, der bei einigen Figuren t√ºckische St√∂rungen aufweist, sich herausbewegt und Fehler an den Gelenken aufweist.  Dies konnte nicht besiegt werden, daher besteht die vorrangige Aufgabe darin, die Komponente von Grund auf neu zu schreiben.  Ein Fingerabdruck ist ebenfalls ein Standard-Trail-Renderer, sein Shader verwendet jedoch einen Z-Check, damit sich die Spurenelemente nicht √ºberlappen und h√§ssliche Artefakte entstehen.  Die ‚ÄûSchachbrett‚Äú -Textur des Hintergrunds hilft unter anderem <b>bei der Bewertung der Gr√∂√üe des √ºbermalten Elements</b> : Je gr√∂√üer es ist, desto kleiner werden die Zellen. <br><br><img src="https://habrastorage.org/webt/tq/oa/-3/tqoa-3wwdoc-fg23wqk_mcgnpqc.gif" alt="Bild"><br><br><h1>  Funktionalit√§t nicht erwartet </h1><br>  W√§hrend des Tests stellte sich heraus, dass sich oft irgendwo in den Ecken der Figur leere Spitzen befanden, die visuell schwer zu bestimmen waren.  Trotz der Tatsache, dass der Ausl√∂ser f√ºr das Umschalten auf das n√§chste Element bei einem F√ºllstand von 97% funktionierte, lautet die Situation: ‚Äû <i>Was ist als n√§chstes zu tun?</i>  ¬ª- mit einem Belegungsgrad von 90% bis 97% - traten sie ziemlich h√§ufig auf und verwirrten Benutzer (die im Grunde nicht √§lter als 12 Jahre waren).  Ich wollte keinen Ausl√∂ser von weniger als 97% setzen, da dann der Effekt " <i>Ich hatte es noch nicht beendet, aber es war bereits gesprungen</i> " erschien. <br><br>  Also traf ich <b>Madame Clusterization</b> widerwillig.  Stellen Sie sich vor: ein Polygon, eine Reihe von Punkten im Inneren, es gibt einige "spezielle", manchmal getrennt, manchmal in Gruppen.  Es ist notwendig, die gr√∂√üte ‚ÄûGruppe‚Äú zu finden und zu bestimmen.  Dies ist ein h√§ufiges mathematisches Problem.  Keiner der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">traditionellen Algorithmen, die</a> ich gefunden habe, kam aus verschiedenen Gr√ºnden auf, ich musste meinen eigenen machen.  Hack auf den Hack, aber es hat funktioniert - und die unbemalten Bereiche stachen in einem sch√∂nen dynamischen Kreis hervor.  Zur Optimierung arbeitet dieser Algorithmus alle 3 Sekunden und erst, nachdem der Benutzer verwirrt ist, seinen Finger im Stil "Was ist als n√§chstes zu tun?" Vom Bildschirm zu heben.  Es sieht ziemlich organisch aus. <br><br><img src="https://habrastorage.org/webt/h_/qc/-d/h_qc-dlrdx_2aqol8nbqioqivzq.gif" alt="Bild"><br><br>  Nach einem solchen Brainstorming war es eine Frage eines Abends, eine abwechslungsreiche <b>‚ÄûFarblinie‚Äú</b> gem√§√ü den Anforderungen der Tester zu erstellen - n√§mlich dem Benutzer die M√∂glichkeit zu geben, in welcher Reihenfolge er die Elemente f√§rben m√∂chte.  Sie m√ºssen lediglich die geometrischen Zentren jedes Netzes bestimmen und nach Bedarf erstellen: von links nach rechts, von oben nach unten usw. Zur besseren √úbersichtlichkeit wurden Partikel vor dem Hintergrund implementiert, die die Richtung der Warteschlange anzeigen. <br><br><div class="spoiler">  <b class="spoiler_title">Warteschlangenillustration</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/vg/kt/ij/vgktijp2haaqb6ij0gi6jemuqjo.gif" alt="Bild"><br><br>  Die Standardwarteschlange wird hier angezeigt (wie vom K√ºnstler beabsichtigt).  Wenn Sie den " <i>Turn-by-Turn</i> " -Modus aktivieren, indem Sie auf eine der Schaltfl√§chen unten klicken, √§ndert sich die F√§rbungswarteschlange und die Partikel bewegen sich in die angegebene Richtung. <br></div></div><br><h1>  UX &amp; UI </h1><br>  Ich mag im Allgemeinen die Idee des kontrollierten Automatismus in Anwendungen, und deshalb ist jedes Element zentriert und skaliert, so dass es mit dem Finger √ºbermalt werden kann, <b>ohne den Bildschirm scrollen zu m√ºssen</b> .  Der Nachteil dieses Ansatzes war, dass nicht immer klar ist, welcher Teil der Figur jetzt auf dem Bildschirm angezeigt wird.  Wie sich herausstellte, m√∂gen Benutzer sogar eine so kleine Herausforderung, da sie das Kurzzeitged√§chtnis und die Korrelation von Informationen trainiert - Sie m√ºssen das Gesamtbild im Auge behalten.  Nun, es gibt zwei M√∂glichkeiten, um aus der Vogelperspektive auf die Figur zu gelangen - mit einer Prise Geste oder durch Dr√ºcken der Zoomtaste. <br><br><img src="https://habrastorage.org/webt/9_/ej/ic/9_ejic4dyydfoljrxzxdqjl9xos.gif" alt="Bild"><br><br>  Gem√§√ü den Vorschriften der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Apple Interface Guidelines</a> wurde beschlossen, die Anzahl der Schaltfl√§chen auf dem Bildschirm auf ein Minimum zu reduzieren.  Neben der Schaltfl√§che zum <b>Vergr√∂√üern /</b> Verkleinern und der offensichtlichen Schaltfl√§che zum Beenden im Men√º gibt es auch einen Palettenaufruf - Sie k√∂nnen als vom K√ºnstler festgelegte ‚ÄûStandardfarbe‚Äú oder nach Ihrer Wahl malen. <br><br>  Dar√ºber hinaus k√∂nnen Sie im Modus "Vogelperspektive" den Hintergrundverlauf √§ndern (jeder Klick wird zuf√§llig generiert) oder in den Modus "Neulackieren" wechseln, in dem Sie ein bereits √ºbermaltes Element reparieren k√∂nnen.  Ja, ich musste diese Funktionalit√§t ausblenden, aber es ist gerechtfertigt - bei all den Tests hat noch niemand gefragt, wie es geht. <br><br><h4>  √úber die Palette </h4><br>  Die Palette selbst wurde zweimal erneuert.  Zuerst habe ich einfach eine bestimmte Anzahl von Quadraten mit Farben auf dem Bildschirm platziert, aber die Benutzer haben nach mehr Farben gefragt.  Ich wollte nicht in der Benutzeroberfl√§che scrollen, und so wurde das Schema <b>"</b> Farbt√∂nung <b>"</b> angezeigt. Das hei√üt, der Benutzer w√§hlt zuerst die Grundfarbe durch Dr√ºcken und dann eine seiner Schattierungen aus.  Die Palette wird mit einer Schaltfl√§che oder einem imposanten Wischen nach unten entfernt.  Wenn es auf dem Bildschirm angezeigt wird, wird der Arbeitsbereich des K√ºnstlers um 1/3 reduziert, was eine ‚ÄûNeuskalierung‚Äú der aktuellen Figur auf die ge√§nderte Gr√∂√üe des Ansichtsfensters erforderlich macht. <br><br><img src="https://habrastorage.org/webt/-b/7l/mc/-b7lmcif2fozsmqquhrifrisyqo.gif" alt="Bild"><br><br><h1>  F√ºr s√º√ü </h1><br>  Der Schl√ºssel, dem die Verbindung im gesamten Bild fehlte, war die <b>Belohnung</b> - eine Art visuelle psychologische Belohnung, die der Benutzer nach Abschluss des F√§rbevorgangs erh√§lt.  Die Idee <s>wurde</s> an der Oberfl√§che <s>ausspioniert</s> : Die Figur wurde automatisch und neu gemalt, im beschleunigten Modus und genau wie der Benutzer - mit anderen Worten, <b>Zeitraffer f√ºr 15 bis 20 Sekunden</b> .  Dies wird implementiert, indem die Reihenfolge aufgezeichnet wird, in der der Benutzer die Eckpunkte der Figuren ber√ºhrt hat, und anschlie√üend die Daten mit Verz√∂gerungen (√ºber Coroutinen) an die Zeichenmaschine wiedergegeben werden.  Jedes Netz wird mehrmals dupliziert, um die Auswirkungen von ‚ÄûManifestation‚Äú und ‚ÄûD√§mpfung‚Äú zu erzielen. <br><br><img src="https://habrastorage.org/webt/1m/q7/dg/1mq7dg-rgkjl0r5hamxlci7vq94.gif" alt="Bild"><br><br>  Nat√ºrlich wird der Zeitraffer w√§hrend der Wiedergabe <b>in der Videodatei aufgezeichnet</b> , und nach der visuellen Extravaganz wird der Benutzer aufgefordert, ein frisch erstelltes Meisterwerk zu speichern / freizugeben.  Gl√ºcklicherweise erschien erst im Fr√ºhjahr ein Plugin im Asset Store, mit dem Sie Videos (nach einigen Anpassungen) vollst√§ndig und plattform√ºbergreifend vom Bildschirm aufnehmen k√∂nnen, da das Schreiben eines solchen Tools von Grund auf weit √ºber meine Programmierkenntnisse hinausgeht, <s>aber im Allgemeinen bin ich Designer</s> . <br><br><div class="spoiler">  <b class="spoiler_title">Anstelle einer Schlussfolgerung</b> <div class="spoiler_text">  Mit diesen tausend Worten, die ich dem ersten Werk zugeteilt habe, endet.  In den folgenden Abschnitten ist geplant, √ºber die heldenhaften K√§mpfe mit Unity UI bei der Entwicklung des zweiten Teils der Anwendung zu berichten - dem Men√º zum Ausw√§hlen von Bildern sowie zum Z√§hlen der √ºberf√ºllten Unebenheiten im harten Gesch√§ft von ASO. <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de412971/">https://habr.com/ru/post/de412971/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de412959/index.html">Zur Frage von AVR und Weltrekorden</a></li>
<li><a href="../de412961/index.html">Sharing Economy in der Telekommunikation</a></li>
<li><a href="../de412963/index.html">New Fallout: Was ist √ºber Vault 76 bekannt?</a></li>
<li><a href="../de412967/index.html">Erstellen eines sch√∂nen Widgets zur Helligkeitsanpassung</a></li>
<li><a href="../de412969/index.html">Gesichtserkennungssysteme erscheinen in US-Schulen, aber ihre Wirksamkeit ist fraglich</a></li>
<li><a href="../de412975/index.html">Knopf Smartphones im Jahr 2018</a></li>
<li><a href="../de412977/index.html">Unzufriedenheit macht das Gl√ºck zunichte: Warum es unm√∂glich ist, immer gl√ºcklich zu sein</a></li>
<li><a href="../de412979/index.html">Fragen Sie Ethan: Wenn dunkle Materie √ºberall ist, warum haben wir sie nicht im Sonnensystem gefunden?</a></li>
<li><a href="../de412983/index.html">Insider Dev Tour: Live-Stream</a></li>
<li><a href="../de412985/index.html">Die Instant Messaging-Revolution? Die EU schlug vor, ein Gesetz √ºber einen einheitlichen Messaging-Standard einzuf√ºhren</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>