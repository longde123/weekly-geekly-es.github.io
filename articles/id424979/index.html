<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃🏿 🍯 👂 Elm Nyaman dan canggung. Http, Tugas 📙 🐚 🈂️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kami terus berbicara tentang Elm 0,18 . 


 Elm Nyaman dan canggung 
 Elm Nyaman dan canggung. Komposisi 
 Elm Nyaman dan canggung. Json.Encoder dan J...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Elm Nyaman dan canggung. Http, Tugas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424979/"><p>  Kami terus berbicara tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Elm 0,18</a> . </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Elm</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Nyaman dan canggung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Elm</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Nyaman dan canggung.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Komposisi</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Elm</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Nyaman dan canggung.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Json.Encoder dan Json.Decoder</a> </p><br><p>  Pada artikel ini, kami mempertimbangkan masalah interaksi dengan sisi server. </p><a name="habracut"></a><br><h2 id="vypolnenie-zaprosov">  Eksekusi query </h2><br><p>  Contoh pertanyaan sederhana dapat ditemukan dalam deskripsi paket <a href="https://package.elm-lang.org/packages/elm-lang/">Http</a> . </p><br><p>  Jenis permintaan adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://package.elm-lang.org/packages/elm-lang/">Http</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://package.elm-lang.org/packages/elm-lang/">Permintaan a</a> . <br>  Jenis hasil permintaan adalah Hasil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://package.elm-lang.org/packages/elm-lang/">Http.Error</a> a. <br>  Kedua jenis parameter oleh tipe pengguna, decoder yang harus ditentukan saat membuat permintaan. </p><br><p>  Anda dapat menjalankan permintaan menggunakan fungsi: </p><br><ol><li>  Http.send; </li><li>  Http.toTask. </li></ol><br><p>  Http.send memungkinkan Anda untuk mengeksekusi permintaan dan setelah selesai, meneruskan pesan ke fungsi pembaruan yang ditentukan dalam argumen pertama.  Pesan membawa data tentang hasil permintaan. </p><br><p> Http.toTask memungkinkan Anda membuat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tugas</a> dari permintaan yang dapat Anda jalankan.  Menggunakan fungsi Http.toTask, menurut pendapat saya, adalah yang paling nyaman, karena instance Task dapat digabungkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menggunakan berbagai fungsi</a> , misalnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Task.map2</a> . </p><br><p>  Mari kita lihat sebuah contoh.  Misalnya, untuk menyimpan data pengguna, dua kueri bergantung berurutan harus dijalankan.  Biarkan itu membuat posting dari pengguna dan menyimpan foto kepadanya (beberapa CDN digunakan). </p><br><p>  Pertama, pertimbangkan implementasi untuk kasus Http. Kirim.  Untuk ini kita membutuhkan dua fungsi: </p><br><pre><code class="hljs vbscript">save : UserData -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Request</span></span> Http.<span class="hljs-keyword"><span class="hljs-keyword">Error</span></span> UserData save userData = Http.post “/some/url” (Http.jsonBody (encodeUserData userData)) decodeUserData saveImages : <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> -&gt; Images -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Request</span></span> Http.<span class="hljs-keyword"><span class="hljs-keyword">Error</span></span> CDNData saveImages id images = Http.post (“/some/cdn/<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>/” ++ (toString id)) (imagesBody images) decodedCDNData</code> </pre> <br><p>  Tipe UserData dan CDNData tidak akan dijelaskan, misalnya, mereka tidak penting.  Fungsi encodeUserData adalah encoder.  saveImages menerima pengidentifikasi data pengguna, yang digunakan untuk membentuk alamat, dan daftar foto.  Fungsi imagesBody membentuk badan permintaan dari tipe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://package.elm-lang.org/packages/elm-lang/">multipart / formulir-data</a> .  Fungsi decodeUserData dan decodedCDNData masing-masing mendekode respons server untuk data pengguna dan hasil permintaan CDN. </p><br><p>  Selanjutnya, kita membutuhkan dua pesan, hasil permintaan: </p><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Msg</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DataSaved</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Http</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Error</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">UserData</span></span></span><span class="hljs-class">) | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ImagesSaved</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Http</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Error</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CDNData</span></span></span><span class="hljs-class">)</span></span></code> </pre> <br><p>  Misalkan, di suatu tempat dalam pelaksanaan fungsi pembaruan, ada bagian kode yang menyimpan data.  Misalnya, mungkin terlihat seperti ini: </p><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">update</span></span> : Msg -&gt; <span class="hljs-keyword"><span class="hljs-keyword">Model</span></span> -&gt; (<span class="hljs-keyword"><span class="hljs-keyword">Model</span></span>, Cmd Msg) <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> msg <span class="hljs-keyword"><span class="hljs-keyword">model</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Msg <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> ClickedSomething -&gt; (<span class="hljs-keyword"><span class="hljs-keyword">model</span></span>, Http.send DataSaved (<span class="hljs-keyword"><span class="hljs-keyword">save</span></span> model.userData))</code> </pre> <br><p>  Dalam hal ini, kueri dibuat dan ditandai dengan pesan DataSaved.  Selanjutnya, pesan ini diterima: </p><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">update</span></span> : Msg -&gt; <span class="hljs-keyword"><span class="hljs-keyword">Model</span></span> -&gt; (<span class="hljs-keyword"><span class="hljs-keyword">Model</span></span>, Cmd Msg) <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> msg <span class="hljs-keyword"><span class="hljs-keyword">model</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Msg <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> DataSaved (Ok userData) -&gt; ( {<span class="hljs-keyword"><span class="hljs-keyword">model</span></span> | userData = userData}, Http.send ImagesSaved (saveImages userData.id model.images)) DataSaved (Err reason) -&gt; (<span class="hljs-keyword"><span class="hljs-keyword">model</span></span>, Cmd.None)</code> </pre> <br><p>  Jika berhasil disimpan, kami memperbarui data dalam model dan memanggil permintaan untuk menyimpan foto tempat kami mentransfer pengidentifikasi data pengguna yang diterima.  Memproses pesan ImagesSaved akan mirip dengan DataSaved, akan diperlukan untuk menangani kasus yang berhasil dan gagal. </p><br><p>  Sekarang pertimbangkan opsi menggunakan fungsi Http.toTask.  Menggunakan fungsi yang dijelaskan, kami mendefinisikan fungsi baru: </p><br><pre> <code class="hljs erlang-repl">saveAll : UserData -&gt; Images -&gt; Task Http.Error (UserData, CDNData) saveAll : userData images = save model.userData |&gt; Http.toTask |&gt; Task.andThen (\newUserData -&gt; saveImages usersData.id images |&gt; Http.toTask |&gt; Task.map (\newImages -&gt; (userData, newImages) } )</code> </pre> <br><p>  Sekarang, menggunakan kemampuan untuk menggabungkan tugas, kita bisa mendapatkan semua data dalam satu pesan: </p><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Msg</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Saved</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Http</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Error</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">UserData</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CDNData</span></span></span><span class="hljs-class">)) update : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Msg</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Model</span></span></span><span class="hljs-class"> -&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Model</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cmd</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Msg</span></span></span><span class="hljs-class">) update msg model case </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Msg</span></span></span><span class="hljs-class"> of </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ClickedSomething</span></span></span><span class="hljs-class"> -&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">model</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Task</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attempt</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Saved</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">saveAll</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">model</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">userData</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">model</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">images</span></span></span><span class="hljs-class">)) </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DataSaved</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Ok</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">userData</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">images</span></span></span><span class="hljs-class">)) -&gt; ( {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">model</span></span></span><span class="hljs-class"> | </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">userData</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">userData</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">images</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">images</span></span></span><span class="hljs-class">}, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cmd</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">none</span></span></span><span class="hljs-class">) </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DataSaved</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Err</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">reason</span></span></span><span class="hljs-class">) -&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">model</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cmd</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">None</span></span></span><span class="hljs-class">)</span></span></code> </pre> <br><p>  Untuk menjalankan permintaan, kami menggunakan fungsi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Task.attempt</a> , yang memungkinkan Anda untuk menyelesaikan tugas.  Jangan bingung dengan fungsi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Task.perform</a> .  Task.perform - memungkinkan Anda untuk menyelesaikan tugas yang <strong>tidak dapat gagal</strong> .  Task.attempt - Melakukan tugas yang <strong>mungkin gagal</strong> . </p><br><p>  Pendekatan ini lebih kompak dalam hal jumlah pesan, kompleksitas fungsi pembaruan dan memungkinkan Anda untuk menjaga logikanya lebih lokal. </p><br><p>  Dalam proyek saya, aplikasi dan komponen saya sering membuat modul Commands.elm, di mana saya menggambarkan fungsi berinteraksi dengan bagian server dengan jenis ... -&gt; Tugas Http.Error a. </p><br><h2 id="sostoyanie-vypolneniya-zaprosov">  Meminta Status Eksekusi </h2><br><p>  Dalam proses mengeksekusi kueri, antarmuka sering harus diblokir secara keseluruhan atau sebagian, dan juga melaporkan kesalahan dalam eksekusi permintaan, jika ada.  Secara umum, status permintaan dapat digambarkan sebagai: </p><br><ol><li>  permintaan belum selesai; </li><li>  permintaan sedang berlangsung; </li><li>  Permintaan berhasil diselesaikan. </li><li>  permintaan gagal. </li></ol><br><p>  Untuk deskripsi seperti itu, ada paket <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RemoteData</a> .  Pada awalnya, saya secara aktif menggunakannya, tetapi seiring waktu, kehadiran jenis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">WebData tambahan</a> menjadi berlebihan, dan bekerja dengannya sangat membosankan.  Alih-alih paket ini, aturan berikut muncul: </p><br><ol><li>  mendeklarasikan semua data dari server sebagai Maybe.  Dalam hal ini, Tidak Ada, menunjukkan tidak adanya data; </li><li>  mendeklarasikan atribut memuat tipe Int dalam aplikasi atau model komponen.  Parameter menyimpan jumlah permintaan yang dieksekusi.  Satu-satunya ketidaknyamanan dari pendekatan ini adalah kebutuhan untuk menambah dan mengurangi atribut pada awal permintaan dan setelah selesai, masing-masing; </li><li>  mendeklarasikan atribut kesalahan tipe List String dalam aplikasi atau model komponen.  Atribut ini digunakan untuk menyimpan data kesalahan. </li></ol><br><p>  Skema yang dijelaskan tidak jauh lebih baik daripada opsi dengan paket RemoteData, seperti yang ditunjukkan oleh latihan.  Jika ada yang punya opsi lain, bagikan di komentar. </p><br><p>  Status eksekusi permintaan harus mencakup progres unduhan dari paket <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://package.elm-lang.org/packages/elm-lang/">Http.Progress</a> . </p><br><h2 id="posledovatelnost-zadach">  Urutan tugas </h2><br><p>  Pertimbangkan opsi untuk urutan tugas yang sering ditemukan dalam pengembangan: </p><br><ol><li>  tugas tergantung berurutan; </li><li>  tugas independen yang konsisten; </li><li>  tugas paralel paralel. </li></ol><br><p>  Tugas dependen yang berurutan telah dipertimbangkan di atas, saya akan memberikan gambaran umum dan pendekatan untuk implementasi di bagian ini. </p><br><p>  Urutan tugas terputus pada kegagalan pertama dan kesalahan dikembalikan.  Jika berhasil, beberapa kombinasi hasil dikembalikan: </p><br><pre> <code class="hljs erlang-repl">someTaskA |&gt; Task.andThen (\resultA -&gt; someTaskB |&gt; Task.map (\resultB -&gt; (resultA, resultB) ) )</code> </pre> <br><p>  Kode ini membuat tugas ketik Kesalahan tugas (a, b), yang dapat dilakukan nanti. </p><br><p>  Fungsi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Task.andThen</a> memungkinkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Anda</a> untuk mentransfer tugas baru yang akan dieksekusi jika berhasil menyelesaikan yang sebelumnya.  Fungsi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Task.map</a> memungkinkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Anda</a> untuk mengkonversi hasil eksekusi melon jika berhasil. </p><br><p>  Ada opsi ketika penyelesaian tugas yang berhasil tidak akan cukup dan Anda perlu memeriksa konsistensi data.  Asumsikan ID pengguna cocok: </p><br><pre> <code class="hljs pgsql">someTaskA |&gt; Task.andThen (\resultA -&gt; someTaskB |&gt; Task.andThen (\resultB -&gt; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> resultA.userId == resultB.userId <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> -&gt; Task.succeed (resultA, resultB) <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> -&gt; Task.fail “<span class="hljs-keyword"><span class="hljs-keyword">User</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> the same” ) )</code> </pre> <br><p>  Perlu dicatat bahwa alih-alih fungsi Task.map, fungsi Task.andThen digunakan dan keberhasilan tugas kedua ditentukan secara independen menggunakan fungsi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Task.succeed</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Task.fail</a> . </p><br><p>  Jika salah satu tugas dapat gagal dan ini dapat diterima, maka Anda perlu menggunakan fungsi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Task.onError</a> untuk menunjukkan nilai jika terjadi kesalahan: </p><br><pre> <code class="hljs julia">someTaskA |&gt; <span class="hljs-built_in"><span class="hljs-built_in">Task</span></span>.onError (\msg -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Task</span></span>,succeed defaultValue) |&gt; <span class="hljs-built_in"><span class="hljs-built_in">Task</span></span>.andThen (\resultA -&gt; someTaskB |&gt; <span class="hljs-built_in"><span class="hljs-built_in">Task</span></span>.map (\resultB -&gt; (resultA, resultB) ) )</code> </pre> <br><p>  Panggilan ke fungsi Task.onError harus dinyatakan segera setelah tugas dinyatakan. </p><br><p>  Kueri independen yang berurutan dapat dilakukan menggunakan fungsi Task.mapN.  Yang memungkinkan Anda untuk menggabungkan beberapa hasil tugas menjadi satu.  Tugas jatuh pertama mengganggu eksekusi seluruh rantai, jadi gunakan fungsi Task.onError untuk nilai default.  Juga periksa fungsi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Task.afterence</a> , ini memungkinkan Anda untuk melakukan serangkaian tugas serupa. </p><br><p>  Tugas paralel dalam implementasi bahasa saat ini tidak dijelaskan.  Implementasinya dimungkinkan pada tingkat aplikasi atau komponen melalui pemrosesan acara dalam fungsi pembaruan.  Semua logika tetap berada di pundak pengembang. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id424979/">https://habr.com/ru/post/id424979/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id424969/index.html">Panduan Node.js, Bagian 9: Bekerja dengan Sistem File</a></li>
<li><a href="../id424971/index.html">Habrokast "Sunset Manually" # 1. Mencoba mengatur lingkungan untuk mengembangkan mainan untuk Windows</a></li>
<li><a href="../id424973/index.html">Deteksi Wajah pada Video: Raspberry Pi dan Neural Compute Stick</a></li>
<li><a href="../id424975/index.html">Kedalaman SIEM: korelasi out-of-box. Bagian 2. Skema data sebagai refleksi dari model "dunia"</a></li>
<li><a href="../id424977/index.html">Belajar dari kesalahan: mengoptimalkan aplikasi di App Store dan Google Play</a></li>
<li><a href="../id424981/index.html">Teks Telur Paskah RPG dalam Kode Mesin Pencari Google</a></li>
<li><a href="../id424985/index.html">Dalam preseden yudisial yang penting, badan intelijen AS tidak dapat menyadap panggilan di utusan</a></li>
<li><a href="../id424987/index.html">Pulihkan gambar yang buram dan tidak fokus menggunakan filter Wiener. Implementasi dalam C ++ OpenCV</a></li>
<li><a href="../id424989/index.html">Proses desain: 7 langkah menuju proyek yang sempurna</a></li>
<li><a href="../id424991/index.html">Ketika metode lama tidak berhasil: Vasily Mazin - pada pendekatan hybrid untuk pengembangan AI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>