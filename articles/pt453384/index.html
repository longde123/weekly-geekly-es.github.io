<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö® ‚è¨ üåå Cribs de seguran√ßa: REST üë®üèæ‚Äçüè´ üë∂üèæ üë©üèæ‚Äçüé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O REST √© uma arquitetura de aplicativo da web extremamente popular. Para chamar fun√ß√µes no servidor, solicita√ß√µes HTTP comuns com par√¢metros especific...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cribs de seguran√ßa: REST</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/acribia/blog/453384/"><img src="https://habrastorage.org/webt/rf/pg/bm/rfpgbm2ukegwtc5h8tlc_3njrh0.png"><br><br>  O REST √© uma arquitetura de aplicativo da web extremamente popular.  Para chamar fun√ß√µes no servidor, solicita√ß√µes HTTP comuns com par√¢metros especificados s√£o usadas (JSON ou XML geralmente √© usado para estruturar par√¢metros), enquanto n√£o h√° um padr√£o estrito para a arquitetura REST, que adiciona flexibilidade (e, √© claro, um pouco de caos). <br><a name="habracut"></a><br>  O REST permite abordar de maneira flex√≠vel a quest√£o da seguran√ßa ou, do que muitos pecam, n√£o abordar a quest√£o.  Com base no <a href="">OWASP</a> , preparamos uma lista de dicas para ajud√°-lo a melhorar a seguran√ßa do seu aplicativo REST. <br><br>  Como ponto de partida nesses casos raros em que √© necess√°rio aqui, usamos python e Django. <br><br><h3>  Regra 0 </h3><br><h4>  Https </h4><br>  Basta configur√°-lo.  Por favor  A prote√ß√£o dos dados transmitidos n√£o prejudicou ningu√©m.  Mesmo que voc√™ ache que n√£o h√° nada a proteger no momento, isso nem sempre ser√° o caso e voc√™ ainda precisar√° configurar o HTTPS.  Portanto, configure-o melhor imediatamente e todos ficar√£o bem. <br><br><h3>  Regra 1 </h3><br><h4>  Autentica√ß√£o </h4><br>  Parece conselho √≥bvio, que, no entanto, muitos preferem negligenciar.  O aplicativo sempre deve ter autentica√ß√£o, mesmo que agora voc√™ pense que o utilizar√° apenas dentro da empresa e n√£o haja diferen√ßa de qual funcion√°rio o faz.  E se voc√™ complement√°-lo com revistas, a investiga√ß√£o de incidentes e a an√°lise de atividades se tornar√£o incomparavelmente mais simples. <br><br>  Como tokens de acesso, atualmente √© considerado uma boa pr√°tica usar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JWT</a> (tokens da web JSON).  N√£o use tokens com o valor {"alg": "none"} para controle de integridade; os tokens devem sempre conter uma assinatura ou MAC!  Uma assinatura √© prefer√≠vel devido ao fato de que as chaves de gera√ß√£o e verifica√ß√£o do MAC correspondem (ou podem ser facilmente calculadas uma da outra), ou seja, se o servidor puder verificar o valor do MAC, ele tamb√©m poder√° gerar seus valores.  A assinatura tamb√©m confirma n√£o apenas a integridade da mensagem, mas tamb√©m a identidade do remetente. <br><br><h3>  Regra 2 </h3><br><h4>  Negue m√©todos HTTP que voc√™ n√£o usa </h4><br>  Configure o servidor para colocar na lista branca os m√©todos com os quais voc√™ trabalha (GET, POST, PUT etc.) e rejeitar qualquer coisa que n√£o se encaixe nessa lista.  √â improv√°vel que seu servidor precise processar solicita√ß√µes TRACE na produ√ß√£o (esse m√©todo faz parte do ataque XST (Cross-Site Tracing), que consiste em um ataque XSS e o m√©todo TRACE ou TRACK. Esse ataque permite, por exemplo, roubar os cookies do usu√°rio, mesmo que eles est√£o marcados como HttpOnly).  Quanto menos informa√ß√µes sobre sua infraestrutura estiverem dispon√≠veis externamente, melhor. <br><br><h3>  Regra 3 </h3><br><h4>  Acesso diferenciado </h4><br>  Todos os seus usu√°rios precisam de todos os m√©todos, por exemplo, DELETE?  Se voc√™ n√£o deseja que alguns usu√°rios possam executar determinadas opera√ß√µes - configure o controle de acesso no seu aplicativo.  Por exemplo, um usu√°rio comum pode acessar apenas o m√©todo GET para algumas fun√ß√µes, o gerente pode usar GET e POST, etc. Para isso, vale a pena definir fun√ß√µes no banco de dados que possam ser atribu√≠das aos usu√°rios para um controle de acesso conveniente. <br><br>  Como resultado, cada fun√ß√£o ter√° um bloco de verifica√ß√£o desse tipo aproximadamente: <br><br><pre><code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> request.POST and user.is_manager: do_stuff()</code> </pre> <br><h3>  Regra 4 </h3><br><h4>  Pense em limitar o n√∫mero de consultas </h4><br>  Se voc√™ acha que seus usu√°rios n√£o devem enviar cem mil solicita√ß√µes por segundo, limite esse n√∫mero.  Use chaves de API ou qualquer outro mecanismo conveniente para rastrear e limitar o n√∫mero de solicita√ß√µes que ser√£o processadas em um determinado per√≠odo de tempo de um usu√°rio.  Para o Django, por exemplo, o django-ratelimit fornece essa funcionalidade, na qual voc√™ pode definir v√°rios par√¢metros como um identificador para a restri√ß√£o, n√£o necessariamente chaves da API, mas um endere√ßo IP. <br><br><h3>  Regra 5 </h3><br><h4>  Certifique-se de validar / higienizar a entrada </h4><br>  Nunca confie nos par√¢metros de entrada transmitidos, sempre realize valida√ß√£o / saneamento: <br><br><ul><li>  Se poss√≠vel (e sempre que poss√≠vel), defina um limite para o comprimento / tipo / formato da entrada e a pr√≥pria solicita√ß√£o.  Rejeite todas as solicita√ß√µes / dados transmitidos que excedam o comprimento especificado por voc√™ ou que n√£o correspondem ao tipo / formato. </li><li>  Ao processar seq√º√™ncias de caracteres, sempre escape todos os caracteres especiais. </li><li>  Se voc√™ usa a estrutura, a maioria cont√©m suas pr√≥prias ferramentas internas de valida√ß√£o e saneamento (prontamente usadas pelas populares - Django (python) e Yii2 (php)), por isso √© importante estudar suas capacidades e se algum aspecto necess√°rio n√£o for coberto - encontre uma biblioteca que feche isso ou escreva voc√™ mesmo essa funcionalidade. </li><li>  Acompanhe os erros de valida√ß√£o.  Se as solicita√ß√µes de alguns usu√°rios falharem constantemente na valida√ß√£o - pense em bloquear automaticamente esses usu√°rios. </li><li>  Verifique se o analisador de entrada (ou a vers√£o atual) n√£o √© suscet√≠vel a ataques por si s√≥. </li></ul><br><br><h3>  Regra 6 </h3><br><h4>  N√£o forne√ßa mais informa√ß√µes do que o necess√°rio </h4><br>  Se alguma solicita√ß√£o causou um erro no aplicativo ou simplesmente n√£o est√° dispon√≠vel por algum motivo, n√£o forne√ßa detalhes na resposta, retorne a mensagem de erro mais abstrata.  Alguns servidores retornam o rastreamento de pilha ap√≥s um erro por padr√£o, portanto, reconfigure essa l√≥gica. <br><br><h3>  Regra 7 </h3><br><h4>  Sempre mantenha registros </h4><br>  Permita que cada evento (autentica√ß√£o, erro, solicita√ß√£o, etc.) seja registrado o mais detalhado poss√≠vel.  Registre-os logicamente para uma pesquisa mais conveniente, se necess√°rio.  Por precau√ß√£o, antes de gravar nos logs, desinfete os dados gravados. <br><br><h3>  Regra 8 </h3><br><h4>  Indique o tipo de conte√∫do corretamente - isso √© importante! </h4><br>  Para que o navegador (ou cliente) leia corretamente os dados fornecidos, o Tipo de Conte√∫do especificado corretamente correspondente aos dados fornecidos √© importante.  No caso de navegadores, tamb√©m vale a pena definir o cabe√ßalho X-Content-Type-Options: nosniff, para impedir que o navegador tente detectar outro tipo de conte√∫do al√©m daquele que foi realmente enviado (uma medida contra ataques XSS). <br><br><h3>  Regra 9 </h3><br><h4>  Validar tipo de conte√∫do </h4><br><ol><li>  Vale a pena configurar a rejei√ß√£o de solicita√ß√µes se o tipo de conte√∫do diferir do conte√∫do.  Isso reduzir√° o risco de processamento de dados incorreto, o que pode levar √† inje√ß√£o ou execu√ß√£o de c√≥digo no servidor / cliente. </li><li>  Tamb√©m vale a pena rejeitar solicita√ß√µes cujo tipo de conte√∫do voc√™ n√£o oferece suporte ou para o qual esse cabe√ßalho geralmente est√° ausente.  Al√©m disso, evite respostas diretas sobre qual fun√ß√£o do tipo de conte√∫do aceita / problemas, se isso n√£o for necess√°rio (isso ajudar√° a evitar ataques XXE). </li><li>  Nos servi√ßos REST, √© comum oferecer suporte a v√°rios tipos de respostas (por exemplo, json e xml), e o cliente indica o tipo de resposta preferido no cabe√ßalho Accept ao solicitar.  Evite copiar o conte√∫do do cabe√ßalho Accept no tipo de conte√∫do da resposta como um mecanismo para definir esse cabe√ßalho.  Rejeite tamb√©m solicita√ß√µes para as quais o cabe√ßalho Accept n√£o contenha diretamente pelo menos um dos tipos suportados. </li></ol><br><h3>  Regra 10 </h3><br><h4>  N√£o se esque√ßa de configurar o CORS (compartilhamento de recursos entre origens) </h4><br>  O CORS √© um padr√£o que descreve o trabalho com consultas entre dom√≠nios.  Se o seu aplicativo n√£o suportar CORS, desative o trabalho com esse tipo de cabe√ßalho.  Se voc√™ precisar us√°-lo, a pol√≠tica de acesso deve ser o mais espec√≠fica e rigorosa poss√≠vel. <br><br><h3>  Regra 11 </h3><br><h4>  N√£o expanda par√¢metros no URL </h4><br>  Todos os dados cr√≠ticos (senhas, chaves, tokens e logins, de prefer√™ncia tamb√©m) devem estar dentro do corpo da solicita√ß√£o ou nos cabe√ßalhos, mas em nenhum caso devem aparecer no URL.  Se voc√™ precisar passar dados confidenciais pelo m√©todo GET, coloque-os no cabe√ßalho. <br><br>  <b>√â imposs√≠vel:</b> <br>  exemplo .com / controller / 123 / action? apiKey = a53f435643de32 <br><br>  <b>Voc√™ pode:</b> <br>  exemplo .com / controller / 123 / action <br><br>  <u>Cabe√ßalhos:</u> <br>  Anfitri√£o: example.com <br>  Agente do Usu√°rio: Mozilla ... <br>  Chave X-API: a53f435643de32 <br><br><h3>  Regra 12 </h3><br><h4>  Pense na prote√ß√£o contra ataques CSRF </h4><br>  Voc√™ pode ler mais sobre todos os tipos de prote√ß√£o <a href="">aqui</a> e, portanto, o uso de tokens de CSRF √© considerado a maneira mais popular de reduzir o risco de ataques desse tipo. <br><br><h3>  Regra 13 </h3><br><h4>  Explore sua estrutura </h4><br>  Se voc√™ usa qualquer estrutura para implementar o REST em seu aplicativo, deve estud√°-lo e n√£o us√°-lo cegamente, como costuma ser feito.  Leia a documenta√ß√£o com aten√ß√£o, especialmente a parte de seguran√ßa.  N√£o o deixe funcionando nas configura√ß√µes padr√£o!  Cada estrutura possui suas pr√≥prias nuances, especialmente quando se trata de seguran√ßa, portanto, conhec√™-las √© muito importante. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt453384/">https://habr.com/ru/post/pt453384/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt453370/index.html">Confronto 2019: Jet Security Team ficou em primeiro lugar na defesa</a></li>
<li><a href="../pt453374/index.html">Os 10 principais provedores de API e SDK de chamadas de bate-papo, √°udio e v√≠deo para neg√≥cios corporativos</a></li>
<li><a href="../pt453376/index.html">Como desperdi√ßar seu tempo e recursos SSD em v√£o? F√°cil e Simples</a></li>
<li><a href="../pt453380/index.html">Guerra mundial com carros pessoais: MaaS percorre o planeta</a></li>
<li><a href="../pt453382/index.html">Como criar um cache altamente personaliz√°vel em um projeto e evitar que colegas escrevam o mesmo tipo de c√≥digo</a></li>
<li><a href="../pt453388/index.html">Como obter o OFFZONE 2019 e uma oferta em um dia</a></li>
<li><a href="../pt453390/index.html">Sobre eixos e repolho</a></li>
<li><a href="../pt453392/index.html">Not√≠cias da semana: guerra dos EUA com a Huawei, lan√ßamento de sat√©lites da Internet em √≥rbita, carro el√©trico russo</a></li>
<li><a href="../pt453394/index.html">Gr√°fico em estrela ou como equilibrar o conhecimento em uma equipe sob a influ√™ncia de Soft Skills</a></li>
<li><a href="../pt453398/index.html">Vis√£o geral: como reduzir a probabilidade de vazamento de dados pessoais</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>