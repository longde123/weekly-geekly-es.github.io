<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🚀 ⏹️ 👼🏼 Utilisez __main__.py 🤾🏿 🛷 🕵🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pourquoi __init__.py est nécessaire, probablement tout pythoniste le sait, mais qu'en est-il de __main__.py ? J'ai vu de nombreux projets, en fonction...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utilisez __main__.py</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456214/"><p>  Pourquoi <strong>__init__.py est</strong> nécessaire, probablement tout pythoniste le sait, mais qu'en est-il de <strong>__main__.py</strong> ?  J'ai vu de nombreux projets, en fonctionnement ou sur Github, qui n'utilisent pas ce fichier magique, bien qu'ils puissent leur faciliter la vie.  À mon avis, <strong>__main__.py</strong> est le meilleur moyen d'interagir avec des modules Python composés de plusieurs fichiers. </p><br><h2>  Mais faisons les choses en premier: comment la plupart des gens exécutent-ils leurs scripts Python? </h2><br><p>  Une fois que vous avez écrit un programme que vous souhaitez utiliser à la fois comme module importé et comme outil lancé à partir de la ligne de commande.  Vous savez très probablement ce qui se fait habituellement dans ce cas: </p><br><pre><code class="plaintext hljs">if __name__ == '__main__': main(sys.argv)</code> </pre> <br><p>  Lorsque vous alimentez le script à l'interpréteur, la variable globale magique <strong>__name__</strong> obtient la valeur <strong>__main__</strong> .  Ainsi, nous apprenons que ce n'est pas une importation, mais un lancement.  Par exemple: </p><br><pre> <code class="plaintext hljs">python myapp.py</code> </pre> <br><p>  Et cela fonctionne très bien pour un seul fichier. </p><br><h2>  Le problème </h2><br><p>  Mais si vous êtes comme moi, vous ne voudrez pas que votre application entière soit entassée dans un seul fichier.  La division de la logique en différents fichiers simplifie l'édition et la prise en charge.  Par exemple: </p><br><pre> <code class="plaintext hljs">. ├── README.me ├── requirements.txt ├── setup.py └── src ├── __init__.py ├── client.py ├── logic.py ├── models.py └── run.py</code> </pre> <br><p>  Mais l'utilisateur qui a cloné le projet à partir du référentiel ne comprendra pas - lequel de ces fichiers est le principal?  <strong>Run.py</strong> est- <strong>il</strong> vraiment?  Ou peut-être <strong>client.py</strong> ?  Où chercher la chaîne familière <strong>si __name__ == '__main__'</strong> ?  C'est là que <strong>__main__.py</strong> est en mesure de faire ses preuves. </p><a name="habracut"></a><br><h2>  __main__.py </h2><br><p>  Le fichier <strong>__main__.py</strong> est appelé lorsque le projet démarre avec l'indicateur de module - <strong>-m</strong> .  Et cela est très pratique si le code est destiné à être utilisé comme module et à être lancé à partir de la console.  Considérez ce fichier comme un endroit où mettre tout ce que vous mettez habituellement à l'intérieur <strong>si __name__ ==</strong> <strong>'</strong> <strong>__main__'</strong> .  Modifions le projet de l'exemple ci-dessus en conséquence: </p><br><pre> <code class="plaintext hljs">. ├── README.me ├── requirements.txt ├── setup.py └── myapp ├── __init__.py ├── __main__.py ├── client.py ├── logic.py ├── models.py</code> </pre> <br><p>  Et le tour est joué!  Vous pouvez maintenant simplement démarrer le projet en tant que module standard. </p><br><pre> <code class="plaintext hljs">python -m myapp</code> </pre> <br><p>  <strong>__main__.py</strong> sera exécuté automatiquement.  C'est l'endroit idéal pour héberger l'interface de ligne de commande et gérer les arguments d'entrée! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr456214/">https://habr.com/ru/post/fr456214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr456202/index.html">WSL 2 est désormais disponible dans Windows Insiders</a></li>
<li><a href="../fr456204/index.html">WSL 2 est désormais disponible pour Windows Insiders</a></li>
<li><a href="../fr456206/index.html">Comment Moovit a amélioré son application pour aider les personnes handicapées à voyager en toute confiance</a></li>
<li><a href="../fr456208/index.html">90 milliards de roubles pour le développement de l'intelligence artificielle</a></li>
<li><a href="../fr456210/index.html">Comment une application mobile aide un étudiant ayant des problèmes de vision à se déplacer dans Moscou</a></li>
<li><a href="../fr456216/index.html">Faire un jeu rétro des années 80 ou comment faire des maquettes pour la découpe laser</a></li>
<li><a href="../fr456218/index.html">Sortie de .NET Core 3.0 (Preview 6)</a></li>
<li><a href="../fr456220/index.html">Généralisation du problème Brokar</a></li>
<li><a href="../fr456222/index.html">Le génie génétique des embryons humains deviendra sûr et efficace dans deux ans</a></li>
<li><a href="../fr456224/index.html">Annonce de l'aperçu 6 de .NET Core 3.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>