<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí¶ üë¨ üôéüèΩ √Ñndern Sie das JSON-Schema in Go with gob dynamisch ü§¥üèΩ ‚ûø üåá</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eine signifikante √Ñnderung der Marshallisierung der Struktur in json ist nur durch die MarshalJSON () -Methode m√∂glich, wobei dort die vollst√§ndige Im...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>√Ñndern Sie das JSON-Schema in Go with gob dynamisch</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449090/"><p> Eine signifikante √Ñnderung der Marshallisierung der Struktur in json ist nur durch die MarshalJSON () -Methode m√∂glich, wobei dort die vollst√§ndige Implementierung der Marshallisierung geschrieben wird.  Wie genau?  Die Go-Dokumentation gibt keine Antworten oder Empfehlungen darauf und bietet sozusagen v√∂llige Freiheit.  Und wie kann man diese Freiheit nutzen, um nicht ein paar Kr√ºcken zu h√§ufen, die gesamte Logik auf MarshalJSON () zu √ºbertragen und diese schlechte, st√§ndig wachsende Funktion bei den n√§chsten json-Anpassungen nicht zu √ºberschreiben? <br></p><br><p>  Die L√∂sung ist eigentlich einfach: <br></p><br><ol><li>  <b>Sei ehrlich (ehrlich).</b> </li></ol><br><p>  (Der zweite Punkt wird nicht sein, der erste ist genug.) <br></p><a name="habracut"></a><br><p>  Es ist dieser Ansatz, der eine <strike>Menge</strike> verwirrenden Codes von <strike>govnokoda</strike> , <strike>viele</strike> √Ñnderungen und eine gewisse Art von Spa√ü vor einer wichtigen Ver√∂ffentlichung <strike>erspart</strike> .  Schauen wir uns nicht das Beispiel in der Dokumentation an, in dem json f√ºr ein einfaches int angepasst ist, und die gesamte Modelllogik in mehreren Zeilen, sondern unsere urspr√ºngliche Aufgabe. <br></p><br><p>  <i>M√ºssen wir wirklich die Struktur unserer Einrichtung √§ndern und ein paar Kr√ºcken stopfen?</i>  <i>Ist es wirklich so, dass die sprachliche Strenge, die eine Eins-zu-Eins-Entsprechung zwischen den JSON-Attributen und der Struktur selbst erm√∂glicht, pl√∂tzlich anfing, uns zu st√∂ren?</i> <br></p><br><p>  Die anf√§ngliche Aufgabe besteht darin, solche JSON-Strukturen einiger genehmigter Formate zu erhalten.  Im urspr√ºnglichen Problem wird nichts √ºber Kr√ºcken gesagt.  Es wird √ºber verschiedene Datenstrukturen gesprochen.  Und wir verwenden denselben Datentyp (Struktur), um diese Daten zu speichern.  Daher muss unsere einzelne Einheit mehrere Darstellungen haben.  So haben wir die richtige Interpretation des Problems erhalten. <br></p><br><p>  <i>Wir m√ºssen mehrere Darstellungen f√ºr unseren Datentyp machen.</i>  <i>√Ñndern Sie die Konvertierung nicht in json f√ºr einen bestimmten Fall, sondern haben Sie im Prinzip mehrere Ansichten, von denen eine die Standardansicht ist.</i> <br></p><br><p>  Wir haben also eine andere Entit√§t - <b>Repr√§sentation</b> . <br></p><br><p>  Kommen wir zu den Beispielen und tats√§chlich zum Code. <br></p><br><p>  Angenommen, wir haben eine Buchhandlung, die B√ºcher verkauft.  Alles basiert auf Microservices, und einer von ihnen liefert Daten zu Anfragen im JSON-Format.  B√ºcher wurden zuerst nur in die Storefront hochgeladen.  Dann verbinden wir uns mit verschiedenen Affiliate-Netzwerken und stellen beispielsweise B√ºcher f√ºr Studenten zum Sonderpreis zur Verf√ºgung.  Und vor kurzem haben unsere Vermarkter pl√∂tzlich beschlossen, Werbema√ünahmen durchzuf√ºhren, und sie ben√∂tigen auch ihren eigenen Preis und einen anderen eigenen Text.  Lassen Sie einen anderen Microservice an der Berechnung der Preise und der Erstellung von Texten beteiligt sein, die einer Datenbank vorgefertigte Daten hinzuf√ºgen. <br></p><br><p>  Die Entwicklung unseres Buchmodells hat also eine solche Schande erreicht: <br></p><br><pre><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Book <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Id <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Description <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Partner2Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Price <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> PromoPrice <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> PromoDescription <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Partner1Price <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> Partner2Price <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> UpdatedAt time.Time CreatedAt time.Time view BookView }</code> </pre> <br><p>  Das letzte Attribut (Ansicht) ist nicht exportiert (privat), es ist kein Teil der Daten, sondern der Speicherort der <b>Ansicht</b> , die Informationen enth√§lt, in denen das Objekt minimiert wird.  Im einfachsten Fall ist dies nur die Schnittstelle {} <br></p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> BookView <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>{}</code> </pre><br><p>  Wir k√∂nnen der Schnittstelle unserer Ansicht auch eine Methode hinzuf√ºgen, z. B. Prepare (), die in MarshalJSON () aufgerufen wird, und die Ausgabestruktur irgendwie vorbereiten, validieren oder protokollieren. <br></p><br><p>  Beschreiben wir nun unsere Ansichten und die Funktion selbst <br></p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> SiteBookView <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Id <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"sku"`</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"title"`</span></span> Description <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"description"`</span></span> Price <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"price"`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Partner1BookView <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Id <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"bid"`</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"title"`</span></span> Partner1Price <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"price"`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Partner2BookView <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Id <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"id"`</span></span> Partner2Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"title"`</span></span> Description <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"description"`</span></span> Partner2Price <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"price"`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> PromoBookView <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Id <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"ref"`</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"title"`</span></span> Description <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"description"`</span></span> PromoPrice <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"price"`</span></span> PromoDescription <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"promo,omitempty"`</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b Book)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarshalJSON</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data []</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, err error)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// ,    if b.view == nil { // ,      b.SetDefaultView() } //        var buff bytes.Buffer //   ,            enc := gob.NewEncoder(&amp;buff) //  ,      ,    dec := gob.NewDecoder(&amp;buff) //     err = enc.Encode(b) if err != nil { return } //     err = dec.Decode(b.view) if err != nil { return } //    return json.Marshal(b.view) }</span></span></code> </pre><br><p>  Das Senden und Empfangen von Daten zwischen Strukturen erfolgt nach dem Prinzip der √úbereinstimmung der Namen der Attribute, w√§hrend die Typen nicht genau √ºbereinstimmen m√ºssen. Sie k√∂nnen beispielsweise von int64 aus senden, aber in int akzeptieren, aber nicht in uint. <br></p><br><p>  Der letzte Schritt besteht darin, die installierte Datenansicht mit der vollen Leistung der Standardbeschreibung √ºber json-Tags <code>(`json:"promo,omitempty"`)</code> <br></p><br><p>  Eine sehr wichtige Voraussetzung f√ºr die Anwendung dieses Ansatzes ist die obligatorische Registrierung von Modellstrukturen und Mappings.  F√ºgen Sie der Funktion init () hinzu, um sicherzustellen, dass alle Strukturen immer registriert sind. <br></p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { gob.Register(Book{}) gob.Register(SiteBookView{}) gob.Register(Partner1BookView{}) gob.Register(Partner2BookView{}) gob.Register(PromoBookView{}) }</code> </pre><br><p>  Vollst√§ndiger Modellcode: <br></p><br><div class="spoiler">  <b class="spoiler_title">Versteckter Text</b> <div class="spoiler_text"><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"bytes"</span></span> <span class="hljs-string"><span class="hljs-string">"encoding/gob"</span></span> <span class="hljs-string"><span class="hljs-string">"encoding/json"</span></span> <span class="hljs-string"><span class="hljs-string">"time"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { gob.Register(Book{}) gob.Register(SiteBookView{}) gob.Register(Partner1BookView{}) gob.Register(Partner2BookView{}) gob.Register(PromoBookView{}) } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> BookView <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>{} <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Book <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Id <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Description <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Partner2Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Price <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> PromoPrice <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> PromoDescription <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Partner1Price <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> Partner2Price <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> UpdatedAt time.Time CreatedAt time.Time view BookView } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> SiteBookView <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Id <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"sku"`</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"title"`</span></span> Description <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"description"`</span></span> Price <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"price"`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Partner1BookView <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Id <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"bid"`</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"title"`</span></span> Partner1Price <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"price"`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Partner2BookView <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Id <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"id"`</span></span> Partner2Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"title"`</span></span> Description <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"description"`</span></span> Partner2Price <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"price"`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> PromoBookView <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Id <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"ref"`</span></span> Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"title"`</span></span> Description <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"description"`</span></span> PromoPrice <span class="hljs-keyword"><span class="hljs-keyword">int64</span></span> <span class="hljs-string"><span class="hljs-string">`json:"price"`</span></span> PromoDescription <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`json:"promo,omitempty"`</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *Book)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetDefaultView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { b.SetSiteView() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *Book)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetSiteView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { b.view = &amp;SiteBookView{} } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *Book)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetPartner1View</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { b.view = &amp;Partner1BookView{} } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *Book)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetPartner2View</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { b.view = &amp;Partner2BookView{} } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b *Book)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetPromoView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { b.view = &amp;PromoBookView{} } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b Book)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarshalJSON</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data []</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, err error)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b.view == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { b.SetDefaultView() } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> buff bytes.Buffer enc := gob.NewEncoder(&amp;buff) dec := gob.NewDecoder(&amp;buff) err = enc.Encode(b) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } err = dec.Decode(b.view) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> json.Marshal(b.view) }</code> </pre><br></div></div><br><p>  Der Controller hat ungef√§hr diesen Code: <br></p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetBooksForPartner2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ctx *gin.Context)</span></span></span></span> { books := LoadBooksForPartner2() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> books { books[i].SetPartner2View() } ctx.JSON(http.StatusOK, books) }</code> </pre><br><p>  F√ºgen Sie f√ºr eine weitere √Ñnderung von json einfach eine weitere Ansicht hinzu und denken Sie daran, sie in init () zu registrieren. <br></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de449090/">https://habr.com/ru/post/de449090/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de449078/index.html">10 M√∂glichkeiten, wie Sie beim Austausch von Kryptow√§hrungen get√§uscht werden k√∂nnen</a></li>
<li><a href="../de449080/index.html">Docker-Container zur Verwaltung von HP Servern √ºber ILO</a></li>
<li><a href="../de449082/index.html">Qualit√§t liegt in der Verantwortung des Teams. Unsere QS-Erfahrung</a></li>
<li><a href="../de449086/index.html">In der Flamme: Eine neue Methode zur Untersuchung von reaktiven Hochtemperatursystemen</a></li>
<li><a href="../de449088/index.html">Es ist Zeit f√ºr Investoren und Unternehmer, das Problem der psychischen Gesundheit in Startups zu l√∂sen.</a></li>
<li><a href="../de449092/index.html">Drei Paradigmen der asynchronen Programmierung in Vertx</a></li>
<li><a href="../de449094/index.html">Startup-Psychologie: Transformationen, die nicht jeder leben wird</a></li>
<li><a href="../de449096/index.html">Kubernetes erweitern und erg√§nzen (Rezension und Videobericht)</a></li>
<li><a href="../de449098/index.html">Wie ein Spyware-Unternehmen in den Zertifikatspeicher von Mozilla gelangte und was daraus wurde</a></li>
<li><a href="../de449100/index.html">Im Gefolge von RTM. Forensische Untersuchung eines mit einem Bankentrojaner infizierten Computers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>