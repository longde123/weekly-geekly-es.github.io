<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍💻 👿 🏻 修复，修改，挖掘。 解决在线任务Droid Mission 🥢 🚂 👩🏻‍⚕️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="去年，我们对移动开发人员进行了在线搜索-Droid Mission。 一个月之内，参与者必须在三个方向上解决尽可能多的问题：修复它！ （错误搜索和代码研究），将其砍死！ （逆向工程）并加以挖掘！ （了解Android的功能）。 该任务总共有23个任务-与Android专家在实际工作中遇到的任务非常相...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>修复，修改，挖掘。 解决在线任务Droid Mission</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/484876/"><img src="https://habrastorage.org/webt/r_/ys/qs/r_ysqsq8esvuaug1phjeithvpji.png"><br><br> 去年，我们对移动开发人员进行了在线搜索-Droid Mission。 一个月之内，参与者必须在三个方向上解决尽可能多的问题：修复它！  （错误搜索和代码研究），将其砍死！  （逆向工程）并加以挖掘！  （了解Android的功能）。 该任务总共有23个任务-与Android专家在实际工作中遇到的任务非常相似。 在帖子中，我们将展示所有条件和正确的解决方案。 <br><a name="habracut"></a><a name="start"></a><br><ul><li>  <a href="https://habr.com/ru/company/yandex/blog/484876/">搜索错误和代码研究</a> </li><li>  <a href="https://habr.com/ru/company/yandex/blog/484876/">逆向工程</a> </li><li>  <a href="https://habr.com/ru/company/yandex/blog/484876/">Android系统</a> </li></ul><br><a name="fix"></a><h1> 搜索错误和代码研究 </h1><br><h3> 修复它！  ＃1 </h3>  <sup><i>作者：Anastasia Laushkina</i></sup> <br><br> 在一个安静的星期五晚上，两名特工熬夜并引发了一场无法解决的纠纷。 指示他们使用整数键将大量机密数据存储在Sqlite数据库中。 <br><br> 代理A创建具有查询形式的表：CREATE TABLE t（键INT PRIMARY KEY，secret_value_1，secret_value_2），代理B创建具有查询形式的CREATE TABLE t（键INTEGER PRIMARY KEY ASC，secret_value_1，secret_value_2）。 <br><br> 代理程序A绝对确定其请求中没有错误，但是，代理程序B对此提出了反对意见：他声称在代理程序A的处理期间可能会破坏数据的完整性。 <br><br> 用逗号列出：负责代理B完整性但不负责代理A的一列或多列； 以及俄语中的数据结构，因此代理B的请求会更快。 <br><br><div class="spoiler">  <b class="spoiler_title">注意事项</b> <div class="spoiler_text"> 答案格式：[列名称1]，[列名称N]，[结构名称]（不带括号，带有小写字母） <br><br> 响应示例：x，y，数组 </div></div><br>  <b>解决方案</b> <br><br> 它与rowId及其与主键的关系有关。 <br><br> 在“创建表t（键INTEGER PRIMARY KEY ASC，secret_value_1，secret_value_2）”的情况下，键是rowId的别名。 在“创建表t（键INT PRIMARY KEY，secret_value_1，secret_value_2）”的情况下-否。 原因可以<a href="https://www.sqlite.org/lang_createtable.html">在文档中</a>找到。 <br><br> 因此，在缺少与rowId的键关系的情况下，将成功执行“ INSERT INTO t VALUES（“ some”，“ y”，“ z”）形式的请求，这可能会破坏数据完整性。 如果存在这样的连接，将发生数据类型不匹配错误。 <br><br> 答案被分别视为一对key，rowId和key / rowId（因为存在连接，它们引用同一列）。 <br><br> 通过以搜索树的形式存储来实现速度。 <br><br><h3> 修复它！  ＃2 </h3>  <sup><i>作者：Anastasia Laushkina</i></sup> <br>  <a href="https://yadi.sk/d/CnFymdL9o6ib3A">二进制文件</a> <br><br> 为了快速发现敌人，邱特工正在开发一种应用程序，其中包含一系列已知罪犯。 他轻松地设法在应用程序中显示此列表，但是他决定将这样的重要信息显示在主屏幕上。 <br><br> 为此，他需要一个小部件。 一个问题：由于某种原因，小部件不显示列表。 一种本能告诉代理，问题只在一行上。 <br><br> 为了获得最佳的解决方案，请用逗号以及需要替换的行名称来命名。 <br><br><div class="spoiler">  <b class="spoiler_title">注意事项</b> <div class="spoiler_text"> 答案格式：[第1行]，[第2行]（不带括号） <br><br> 响应示例：FrameLayout，ScrollView </div></div><br>  <b>解决方案</b> <br><br>  1.我们正在寻找小部件的布局文件，我们在其中看到一个无效的ConstraintLayout元素（请参阅<a href="https://developer.android.com/guide/topics/appwidgets">developer.android.com/guide/topics/appwidgets#CreatingLayout</a> ）。 <br>  2.将其更改为可接受且最佳的-LinearLayout / FrameLayout。 <br><br> 尽管使用FrameLayout破坏了小部件中元素的布局，但仍被接受为答案。 <br><br><h3> 修复它！  ＃3 </h3>  <sup><i>作者：Artyom Viter</i></sup> <br>  <a href="https://yadi.sk/d/uzV_9MS2CyCXgg">二进制文件</a> <br><br> 测试人员注意到RAM消耗异常增加。 有人怀疑某处有泄漏。 <br><br> 您必须调查并定位该问题。 在响应中，指示应用程序类的方法名称及其调用位置，这将导致内存泄漏。 如果发现几个问题，请全部列出。 <br><br> 答案格式：[调用该方法的类的名称]：[此文件中的行号]：[方法名称]（不带方括号） <br><br> 按字典顺序指示几个答案，以＃分隔。 <br><br> 一个例子： <br><br> 如果您认为ExampleFileName.java文件中存在内存泄漏， <br><br><pre><code class="plaintext hljs">class ExampleFileName {   public problemMethodName(Sting arg) {}   public test(Sting arg) {     problemMethodName(arg); //  8   ExampleFileName.java   } }</code> </pre> <br> 响应示例：ExampleFileName：8：问题方法名称 <br><br>  <b>解决方案</b> <br><br> 第一种方法是代码分析。 <br><br><ol><li> 我们研究应用程序代码。 </li><li> 第一次泄漏很明显。 这是SecondActivity类中的BroadCastReceiver注册。 如果您运行该应用程序，则可以在logcat中看到有关此问题的消息。 </li><li> 如果您注意startTimer（）方法，您会注意到CountDownTimer类向主线程处理程序添加了一个闭包，并带有指向textView的链接。 并且在销毁活动之前，实例（CountDownTimer）类不会调用cancel（）方法。 这是第二次内存泄漏。 </li></ol><br> 第二种方法是工具。 您可以在应用程序中实现<a href="https://github.com/square/leakcanary">Leakcanary</a>库，通过adb或android Profiler获取堆转储，并分析收到的报告。  Eclipse Memory Analyzer（MAT）可以帮助进行分析。 为了在MAT中打开heapdump，您需要使用hprof-convd实用程序将其转换为MAT可以理解的格式。 <br><br><h3> 修复它！  ＃4 </h3>  <sup><i>发言者：瓦利·伊布拉吉莫夫</i></sup> <br>  <a href="https://yadi.sk/d/X8HgqWEhCGUAvw">二进制文件</a> <br><br> 伊万（Ivan）在网上电影院度过了第一天的生活。 由于他是一位出色的开发人员，因此他在观看电影时立即被要求修复崩溃。 他决定同时进行重构。 代码变得更加简洁明了，该错误已不再重现。 <br><br> 但是，后来发现电影的当前位置没有发送到后端。 帮助Ivan了解他混了哪一堂课。 <br><br> 响应是它应该使用的类的名称。 <br><br>  <b>解决方案</b> <br><br> 为了每五秒钟发送一次观看位置并连接到网络，使用了ExecutorService。  Ivan认为，为定期任务创建ScheduledThreadPoolExecutor-为什么不使用它来访问网络？ 毕竟，ScheduledThreadPoolExecutor是ThreadPoolExecutor的后代。  Ivan甚至都不怀疑ScheduledThreadPoolExecutor仅使用一个线程，并且在进入网络时，您将需要等待周期性任务的完成。 <br><br><pre> <code class="plaintext hljs">scheduleFuture = scheduledExecutorService.scheduleAtFixedRate(() -&gt; {                    try {                        timingsApi.sendTiming(filmId, player.getContentPosition()).get();                    } catch (Exception e) {                        e.printStackTrace();                    }                },                0, PERIOD_SECONDS, TimeUnit.SECONDS);</code> </pre> <br> 由于我们不在UI线程和新版本2.9中访问ExoPlayer，因此使该问题的解决方案变得更加复杂。 但这只是警告，而不是伊万的错误。 <br><br><h3> 修复它！  ＃5 </h3>  <sup><i>作者：亚历山大·齐宾</i></sup> <br>  <a href="https://yadi.sk/d/GCLtHa4mKTK7YQ">二进制文件</a> <br><br> 一家公司正在开发《农民模拟器》游戏。 <br><br> 在此游戏中，只有玩家可以自由移动。 所有其他物体要么静止不动，要么具有明确定义的运动轨迹。 在某个时候，他们决定将敌人添加到游戏中，这将成为玩家的障碍。 <br><br> 指示开发商Vasya意识到敌人。 在实施过程中，Vasya遇到性能问题。 由于多线程，他决定修复它。 由于Vasya对多线程不熟悉，因此他利用了stackoverflow提供的解决方案。 因此他摆脱了性能问题。 <br><br> 但是，在测试阶段，发现游戏有时会冻结。 帮助Vasya查找原因。 <br><br> 作为响应，请输入有问题的代码行的编号-以逗号分隔，以升序排列且没有空格。 像这样：1,17,42 <br><br>  <b>解决方案</b> <br><br> 装箱基本类型（例如Integer中的int）是昂贵的操作。 为了优化，Java机器有时会重用此类对象。 行也不例外。 <br><br>  ENEMY_LOCK和DECISIONS_LOCK行在代码中用于同步。 因此，如果项目中的某些位置在同一行上具有同步，则可能发生死锁。 <br><br> 通常，您不能使用String / Integer等进行同步。 <br><br> 答案：7.8 <br><br><h3> 修复它！  ＃6 </h3>  <sup><i>作者：伊万·普霍夫（Ivan Pukhov）</i></sup> <br>  <a href="https://yadi.sk/d/qR6iYnUBvB9n2w">二进制文件</a> <br><br> 图像处理团队发布了一个新的本机库，您需要对其进行尝试并指出存在的问题。 <br><br>  <b>解决方案</b> <br><br> 这是一个容易完成的任务。 资源中包含库本身及其头文件。 在标头中，唯一的函数返回一个jobject。 <br><br> 除了创建一个测试项目（通过安装NDK）并进行调用之外，别无他法！ 主线程上的函数调用将引发异常，要求不要以这种方式调用它。 我们以任何方式将执行转移到另一个线程，并且一切正常。 <br><br> 现在值得检查返回的对象-它真的是位图吗？ 最简单的方法是立即将其显示在ImageView上。 我们将看到带有文本字符串的图像，该任务还需要以字符串形式的答案。 这可能不仅仅是巧合。  :) <br><br><h3> 修复它！  ＃7 </h3>  <sup><i>作者：德米特里·扎伊采夫（Dmitry Zaitsev）</i></sup> <br>  <a href="https://yadi.sk/d/sqQgkbbjDu1UNw">二进制文件</a> <br><br> 有一个带有代码的应用程序，其中包含所需的代码。 不幸的是，布局已损坏，需要还原才能找到代码。 <br><br><div class="spoiler">  <b class="spoiler_title">注意事项</b> <div class="spoiler_text"> 更正代码后，框架将从框架的左上角开始准确通过22个需要逆时针列出的字符。 <br><br> 响应示例：ScQG1jxbazmjbcARefbRMo </div></div><br>  <b>解决方案</b> <br><br> 现在，Dagger已成为Android开发中的事实上的标准。 在配置完DI之后，将Inject写入构造函数的前面并把所有其余工作交给Dagger非常简单。 如此简单，您以后就可以停止考虑如何提供依赖项。 同样在Android中，您通常必须使用Context类及其后代：Application和Activity。 应用程序与应用程序的生命周期相关，活动与屏幕的生命周期相关。 因此，在使用这些类时，观察许多功能很重要。 该任务正是基于错误上下文的使用，而所有这些都使用DI掩盖了。 <br><br> 可以采取以下步骤来解决： <br><br><ol><li> 检查项目文件，并注意将ItemStyle应用于所有TextView。 </li><li> 看到样式没有真正应用。 这应该导致这样一个想法，即问题与主题有关，因此与活动的背景有关。 </li><li> 了解依赖关系图，并了解适配器中提供了Application上下文。 </li><li> 在ContestAdapter中，将上下文类型更改为Activity。 </li></ol><br><h3> 修复它！  ＃8 </h3>  <sup><i>发言者：瓦利·伊布拉吉莫夫</i></sup> <br>  <a href="https://yadi.sk/d/mgEetgsZNwtvRA">二进制文件</a> <br><br>  Ivan被赋予了通过使用DI通过ContentProvider重构应用程序以获取任务列表的任务。 他使用Dagger重构了应用程序，当它启动时，该应用程序开始崩溃。 <br><br> 帮助伊凡了解原因： <br><br><ol><li> 用您要转移到另一个班级的班级名称指定行号。 </li><li> 提供指向文档的链接，并带有指向某个地点的定位点，以帮助您了解应用程序崩溃的原因。 </li></ol><br><div class="spoiler">  <b class="spoiler_title">注意事项</b> <div class="spoiler_text"> 响应格式：[类别名称]：[行号]-&gt; [类别名称]：[行号]，[链接] <br><br> 答案示例： <br><br>  FirstCLass：12-&gt; SecondClass：45，https：//developer.android.com/reference/android/app/Activity#activity-lifecycle </div></div><br>  <b>解决方案</b> <br><br> 该任务包括两个部分： <br><br>  1.访问DI组件时，在ContentProvider中了解并提供崩溃解决方案。 正确的解决方案是将DI组件的初始化转移到ContentProvider。 <br><br><img src="https://habrastorage.org/webt/fu/nr/n_/funrn_gbeansq3bwonjrrsaknoc.png" width="800"><br><br>  ContentProvider上的onCreate方法比Application上的调用早。 如果您检查ActivityThread类和handleBindApplication方法中的应用程序启动代码，这很容易验证。 <br><br><img src="https://habrastorage.org/webt/r9/xk/vr/r9xkvrg0kjjiefi0xtruxlvnhwm.png" width="620"><br><br>  2.提供一个链接，该链接描述早于Application调用onContentProvider的onCreate。  Google在ContentProvider文档页面上没有提及这一点。 但这是onCreate Aplication方法的描述的摘录： <br><br><blockquote> 在应用程序启动时，创建任何活动，服务或接收者对象（不包括内容提供者）之前调用。 </blockquote><br><h3> 修复它！  ＃9 </h3>  <sup><i>作者：亚历山大·齐宾</i></sup> <br>  <a href="https://yadi.sk/d/-V1nSeMxB3K6aw">二进制文件</a> <br><br> 开发人员被赋予执行某些项目列表的视图的任务。 在TK中，有一个重要的要求-将列表滚动到第一个和最后一个元素，以便这些元素出现在屏幕中央。 开发人员实现了该功能，但是在测试时发现有时居中不起作用。 帮助开发人员在代码中找到有问题的行。 <br><br><div class="spoiler">  <b class="spoiler_title">注意事项</b> <div class="spoiler_text"> 答案格式： <br><br>  &lt;不带扩展名的文件名&gt;：&lt;用逗号分隔的行号&gt; <br><br>  &lt;不带扩展名的文件名&gt;：&lt;用逗号分隔的行号&gt; <br><br> 行必须按字典顺序排序。 行号应按升序排序。 <br><br> 答案示例： <br><br>  BarFoo：1 <br><br>  FooBar：12、13、14、99 </div></div><br>  <b>解决方案</b> <br><br> 代码中有两个问题： <br><br>  1.从代码来看，假定对onViewDetachedFromWindow的调用将始终在onBindViewHolder之后进行，但事实并非如此。  onViewDetachedFromWindow的孪生方法是onViewAttachedToWindow。 如此一来，将调用holder.view.reset（），并且如果滚动缓慢，则居中将消失。 <br><br>  2.在版本7之前的Android上，addView（rootView，params）无法正常工作。 <br><br> 添加视图时，将生成一个LayoutParam，如下所示： <br><br> 棉花糖<a href="">-github.com/aosp-mirror/platform_frameworks_base/blob/marshmallow-release/core/java/android/widget/FrameLayout.java#L403</a> <br> 牛<a href="">轧糖-github.com/aosp-mirror/platform_frameworks_base/blob/nougat-release/core/java/android/widget/FrameLayout.java#L384</a> <br><br>  FrameLayout.LayoutParams具有两个构造函数，其中一个接受ViewGroup.MarginLayoutParams并将边距复制到自身： <a href="">github.com/aosp-mirror/platform_frameworks_base/blob/nougat-release/core/java/android/view/ViewGroup.java#L14</a> <br><br> 第二个构造函数接受ViewGroup.LayoutParams并忽略空白： <a href="">github.com/aosp-mirror/platform_frameworks_base/blob/nougat-release/core/java/android/view/ViewGroup.java#L7328</a> <br><br> 因此，在版本7之前的Android上，居中功能不起作用。 <br><br> 答案是： <br> 物品检视：35 <br> 主要活动：53 <br><br><a name="hack"></a><h1> 逆向工程 </h1><br><h3> 砍死它！  ＃1 </h3>  <sup><i>作者：Valentin Baryshev</i></sup> <br>  <a href="https://yadi.sk/d/7SXNXpKzadxR9A">二进制文件</a> <br><br> 一名开发者赶紧提交竞赛，甚至没有测试最终的.apk。 <br><br> 原来，他在activity_main.xml中混合了一些视图组。 此外，他将密钥的每个字母放在单独的文本视图中。 结果，布局上的所有视图都分开了，并且屏幕上出现了完全的愤怒。 <br><br> 尝试确定哪个视图组应该代替当前的视图组。 <br><br> 问题的答案是替换正确的视图组后屏幕上显示的代码。 <br><br>  <b>解决方案</b> <br><br> 必须以任何可用的方式（例如，通过在线反编译器）反编译.apk并通过代码重新创建项目。 <br><br> 如果分析main_layout，则可以从属性中猜测根视图组应为ConstraintLayout。 <br><br> 答案：tniartsnoc <br><br><h3> 砍死它！  ＃2 </h3>  <sup><i>作者：亚历山大·齐宾</i></sup> <br>  <a href="https://yadi.sk/d/PAuLY9-7Is5iYg">二进制文件</a> <br><br> 有经验的用户使该应用程序崩溃。 他没有感到吃惊，打开日志，找到了导致错误的行：N72XbphDx5NnFl6CKMNl8w ==并将其发送给技术支持。 <br><br> 原来，他正在使用该应用程序的过时版本，该版本是在使用代码存储库之前开发的，因此解密代码丢失了。 但是，可以找到该应用程序旧版本的.apk。 <br><br> 帮助解密消息。 <br><br>  <b>解决方案</b> <br><br> 必须以任何可用的方式（例如，通过在线反编译器）反编译.apk并通过代码重新创建项目。 <br><br> 该代码本身包含加密功能和解密功能，您可以向其提供加密的字符串并获得答案。 <br><br> 答案是： <br>  TF：干得好！ <br><br><h3> 砍死它！  ＃3 </h3>  <sup><i>作者：Valentin Baryshev</i></sup> <br>  <a href="https://yadi.sk/d/hRZM_Yc8hf5FOg">二进制文件</a> <br><br> 您对Android应用程序生命周期的了解程度如何？ <br><br> 您是否知道在某些情况下系统会终止应用程序进程？ <br><br> 在应用程序上模拟这种情况。 <br><br> 还原应用程序后，您将看到答案-以代码形式。 <br><br>  <b>解决方案</b> <br><br> 只需在电话上安装.apk，运行并在系统卸载应用程序时获得保护套就足够了，但同时它仍处于幕后。 <br><br> 一种选择是安装应用程序，将其启动并最小化（或仅切换到另一个应用程序）。 然后，我们通过adb连接到计算机。 在Android Studio中，选择Logcat标签，选择该应用程序的进程，然后单击红色的停止图标。 然后从窗帘上打开以前最小化的应用程序。 屏幕将显示答案：sss2384gxcxxX。 <br><br><h3> 砍死它！  ＃4 </h3>  <sup><i>作者：伊万·普霍夫（Ivan Pukhov）</i></sup> <br>  <a href="https://yadi.sk/d/RwxPtc4Z-EwCLg">二进制文件</a> <br><br> 一位前端同事发布了新模块的演示，但忘了发送规格。 现在他睡在另一个时区，必须在几分钟内完成演示。 在与同事的对话中，您还记得他的话：“是的，在那里很容易，您只需要编写存根就可以了。” <br><br> 下载档案，并尝试在没有同事的情况下应对。 <br><br>  <b>解决方案</b> <br><br> 这是一个简单的任务，但需要一定的好奇心和毅力。 <br><br> 下载档案，将其内容上载到本地测试服务器，使用WebView创建一个项目并运行它。 短暂的超时后，我们会看到消息“校准方向”。 就是这样。 但是消息提示您也许应该用手拧一下手机？ 此后，将显示有关引发的异常的可疑消息-带有调用以检查控制台输出。 <br><br> 我们打开控制台，并看到对API对象上不存在的方法的调用。 我们向WebView添加一个对象以实现JS API，然后再次尝试测试该应用程序。 <br><br> 显然，值得添加一个返回值。 我们选择添加-它起作用。 但是，任何地方都没有答案。 再次打开电话-称为新方法。 也添加它。 经过几次迭代，我们得到finalizeCalibrating调用，然后是storeResult，我们的行将到达该行。 <br><br> 下载源代码时，您可能什么都不愿解决，但请打开它们并找出答案。 此方法有效，但是过程中有几个小型耙子在等着您。 <br><br><h3> 砍死它！  ＃5 </h3>  <sup><i>作者：伊万·普霍夫（Ivan Pukhov）</i></sup> <br><br> 新版android的开发程序集泄漏到网络上，新的应用程序签名机制直接在设备上调试。 在此程序集中，用于签名的私钥被缝入系统的源代码中，并且开发人员将UI的一部分留作了接收。 找到钥匙。 <br><br><div class="spoiler">  <b class="spoiler_title">注意事项</b> <div class="spoiler_text"> 响应格式：32个字符串 <br><br>  <a href="https://yadi.sk/d/vnDrXgDqJd8v7g">下载任务条件（Mac OS X）</a> <br><br>  <a href="https://yadi.sk/d/ZuE2fORiMbbG7A">下载任务条件（Windows）</a> <br><br>  <a href="https://yadi.sk/d/WxiBCxrVeIzIrg">下载任务条件（Linux）</a> </div></div><br>  <b>解决方案</b> <br><br>  1.运行模拟器时，您会注意到SecretActivity应用程序。 如果打开它，则会出现一个吐司，并提供查看日志的信息。 由于这是一个调试程序集，因此有很多日志-需要按应用程序名称过滤它们。 <br><br><pre> <code class="bash hljs">adb logcat | grep <span class="hljs-string"><span class="hljs-string">'SecretActivity'</span></span></code> </pre> <br> <code>1898 1898 E SecretActivity: Try broadcast ZggwxXsaQ9SapPKyHpnwnYmALHazVFWX</code> <br> <br>  2.我们尝试通过日志中的操作抛出广播： <br><br><pre> <code class="bash hljs">adb shell am broadcast -a ZggwxXsaQ9SapPKyHpnwnYmALHazVFWX</code> </pre> <br>  3.屏幕上将出现一个祝酒词，并带有一个建议，以通过SecretReceiver标签查看日志。 <br><br><pre> <code class="bash hljs">adb logcat | grep <span class="hljs-string"><span class="hljs-string">'SecretReceiver'</span></span></code> </pre> <br> <code>1898 1898 E SecretReceiver: ISecretService.aidl <br> 1898 1898 E SecretReceiver: package android.app; <br> 1898 1898 E SecretReceiver: interface ISecretService { <br> 1898 1898 E SecretReceiver: String getSecret(); <br> 1898 1898 E SecretReceiver: } <br> 1898 1898 E SecretReceiver: See global settings to bind SecretService</code> <br> <br>  4.我们查看全局设置以查找连接到SecretService的操作。 <br><br><pre> <code class="bash hljs">adb shell settings list global</code> </pre> <br> <code>... <br> bind_secret_service_action=g8mNyGQZR8aHLTXNWcjdwJJYZ85Ewx83 <br> ...</code> <br> <br>  5.我们正在使用此aidl接口编写ISecretService服务的客户端。 <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); Intent intent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(); intent.setAction(<span class="hljs-string"><span class="hljs-string">"g8mNyGQZR8aHLTXNWcjdwJJYZ85Ewx83"</span></span>); PackageManager pm = getPackageManager(); List&lt;ResolveInfo&gt; resolveInfoList = pm.queryIntentServices(intent, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (resolveInfoList == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || resolveInfoList.size() != <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } ResolveInfo serviceInfo = resolveInfoList.get(<span class="hljs-number"><span class="hljs-number">0</span></span>); ComponentName component = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ComponentName(serviceInfo.serviceInfo.packageName, serviceInfo.serviceInfo.name); Intent explicitIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(intent); explicitIntent.setComponent(component); bindService(explicitIntent, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ServiceConnection() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onServiceConnected</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ComponentName name, IBinder service)</span></span></span><span class="hljs-function"> </span></span>{ ISecretService secretService = ISecretService.Stub.asInterface(service); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Log.d(<span class="hljs-string"><span class="hljs-string">"MainActivity"</span></span>, secretService.getSecret()); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { Log.e(<span class="hljs-string"><span class="hljs-string">"MainActivity"</span></span>, <span class="hljs-string"><span class="hljs-string">"RemoteException"</span></span>, e); } } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onServiceDisconnected</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ComponentName name)</span></span></span><span class="hljs-function"> </span></span>{ } }, Context.BIND_AUTO_CREATE); } }</code> </pre> <br>  6.运行，在日志中我们得到答案： <br><br><pre> <code class="bash hljs">adb logcat | grep <span class="hljs-string"><span class="hljs-string">'MainActivity'</span></span></code> </pre> <br> <code>1898 1898 E MainActivity: VENHz=qWr7y!t3ZhP!8Skw!!kcTkt7V%</code> <br> <br><h3> 砍死它！  ＃6 </h3>  <sup><i>作者：Pavel Vorobkalov</i></sup> <br>  <a href="https://yadi.sk/d/V1ipafbw9EJjQA">二进制文件</a> <br><br> 特珀先生写了一个Android应用来发送消息。 <br><br> 解密消息并继续。 <br><br> 答案格式：字符串作为链接。 <br><br>  <b>解决方案</b> <br><br> 在设备上安装并运行该应用程序。 我们看到两个按钮：发送消息和发送公式。 当您单击它们时，什么都看不见。 您需要弄清楚应用程序如何以及在何处发送内容。 <br><br><img src="https://habrastorage.org/webt/d7/1k/ea/d71kea2oipwhydwmurf5hroelpy.png" width="300"><br><br> 我们使用一些用于逆向工程的方法打开.apk应用程序，并查看主要活动。 在这里，您可以看到onSendMessageClick和onSendFormulaClick方法。 他们使用操作“ com.yandex.tupper.action.NEW_MESSAGE”创建一个Intent，并使用键“ com.yandex.tupper.message”创建一个Intent，然后将其从列表中发送到应用程序（使用常规方法）。 他们通过调用PackageManager.queryBroadcastReceivers获得列表。 <br><br> 您可以通过从应用程序代码中提取消息来继续使用逆向工程工具来研究消息。 但是，通过附加的RSA加密有意（尽管有一点）使此路径变得复杂。 <br><br> 还有另一种方法可以更好地匹配Android编程。 您需要编写一个处理此广播Intent的应用程序。 我们在清单寄存器接收器中创建我们的应用程序： <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">receiver</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".TupperMessageReceiver"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:enabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:exported</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.yandex.tupper.action.NEW_MESSAGE"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">receiver</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> 在处理程序中，我们从额外消息中获取消息并运行我们自己的Activity，在其中我们将显示处理结果： <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TupperMessageReceiver</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BroadcastReceiver</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onReceive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, Intent intent)</span></span></span><span class="hljs-function"> </span></span>{ String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (message == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Intent activityIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(context, MainActivity.class); activityIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); activityIntent.putExtra(MainActivity.EXTRA_MESSAGE, message); context.startActivity(activityIntent); } }</code> </pre> <br> 现在让我们处理消息本身的解密。 如果您在Yandex中搜索“ Tupper的消息”，则可以找到有关Wupper公式<a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25BE%25D1%2580%25D0%25BC%25D1%2583%25D0%25BB%25D0%25B0_%25D0%25A2%25D0%25B0%25D0%25BF%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B0">的文章</a> 。 它具有数字形式的编码公式的示例： <br><br><div class="spoiler">  <b class="spoiler_title">48584 ...</b> <div class="spoiler_text"><pre><code class="plaintext hljs">4858450636189713423582095962494202044581400587983244549483093085061934704708809928450644769865524364849997247024915119110411605739177407856919754326571855442057210445735883681829823754139634338225199452191651284348332905131193199953502413758765239264874613394906870130562295813219481113685339535565290850023875092856892694555974281546386510730049106723058933586052544096664351265349363643957125565695936815184334857605266940161251266951421550539554519153785457525756590740540157929001765967965480064427829131488548259914721248506352686630476300</code></pre></div></div><br> 通过单击“发送公式”按钮，该号码将作为消息发送。 对该数字进行解码的结果也在Wikipedia文章中。 它可以用来调试其解码算法的实现。 <br><br> 我们使用Java实现解码算法，为了美观起见，将结果二进制数转换为单色Bitmap： <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TupperCodec</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TUPPER_R = <span class="hljs-number"><span class="hljs-number">17</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TupperCodec</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> BigInteger </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decodeFromDecString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String decString)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> NumberFormatException </span></span>{ BigInteger data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BigInteger(decString, <span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data.divide(BigInteger.valueOf(TUPPER_R)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNumberAsBinImage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BigInteger number)</span></span></span><span class="hljs-function"> </span></span>{ String binString = number.toString(<span class="hljs-number"><span class="hljs-number">2</span></span>); StringBuffer result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuffer(binString.length()); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; binString.length(); i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((i % TUPPER_R) == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; i &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { result.append(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>); } result.append(binString.charAt(binString.length() - <span class="hljs-number"><span class="hljs-number">1</span></span> - i)); } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numberOfRows = (binString.length() + TUPPER_R - <span class="hljs-number"><span class="hljs-number">1</span></span>) / TUPPER_R; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (; i &lt; numberOfRows * TUPPER_R; i++) { result.append(~_~quot&amp;#<span class="hljs-number"><span class="hljs-number">0</span></span>;quot~_~); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result.toString(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Bitmap </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBinImageAsBitmap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String binImage)</span></span></span><span class="hljs-function"> </span></span>{ String[] lines = binImage.split(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] colors = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[lines.length * TUPPER_R]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; lines.length; i++) { String line = lines[i]; <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> line.length() == TUPPER_R; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; line.length(); j++) { colors[i * TUPPER_R + j] = line.charAt(j) == <span class="hljs-string"><span class="hljs-string">'0'</span></span> ? Color.WHITE : Color.BLACK; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Bitmap.createBitmap(colors, TUPPER_R, lines.length, Bitmap.Config.ARGB_8888); } }</code> </pre> <br> 在“活动”中，调用解码并将结果显示为ImageView中的位图： <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCompatActivity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String EXTRA_MESSAGE = <span class="hljs-string"><span class="hljs-string">"com.yandex.tupper.message"</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(R.layout.activity_main); Intent intent = getIntent(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (intent != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; intent.hasExtra(MainActivity.EXTRA_MESSAGE)) { String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { BigInteger data = TupperCodec.decodeFromDecString(message); String binImage = TupperCodec.getNumberAsBinImage(data); Bitmap bitmap = TupperCodec.getBinImageAsBitmap(binImage); ImageView imageView = findViewById(R.id.message_image); imageView.setImageBitmap(bitmap); CharSequence toastText = TextUtils.ellipsize(message, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextPaint(), <span class="hljs-number"><span class="hljs-number">400</span></span>, TextUtils.TruncateAt.END); Toast.makeText(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, toastText, Toast.LENGTH_SHORT).show(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (NumberFormatException ex) { Toast.makeText(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, getString(R.string.invalid_message), Toast.LENGTH_LONG).show(); } } } }</code> </pre> <br><img src="https://habrastorage.org/webt/zf/ji/7b/zfji7bvxc9uz3avkrwqz65hc7lo.png" width="300"><br> <b><sup><sub>  </sub></sup></b> <br><br>  — <a href="https://clck.ru/FevR5">clck.ru/FevR5</a> . <br><br><h3> hack it! #7 </h3> <sup><i>:  </i></sup> <br> <a href="https://yadi.sk/d/YlXQWIwlo8VGmw"> </a> <br><br>       . <br><br>     .    ,           ,    . <br><br>  :      -    . <br><br> <b></b> <br><br>  .apk  zip-     classes.dex —  Java-  .         , ,  dex2jar  Android Studio. dex2jar  Java-,    Android Studio        class-.     ,   . <br><br>    ,     proguard ( android.support.*  androidx.*,    ), —  com.yandex.contest.keygenme.MainActivity, Activity  . ,       : MainActivity.a#doInBackground   bbaab   b     ,   . <br><br><img src="https://habrastorage.org/webt/6d/sa/vb/6dsavb2ct67ou-f8hknj6c7twpy.png"><br><br>   c  d.        N-    π ( --),        .     ,  π <sub>hexed</sub> [c[i] + key[i]] = d[i], i = 0..11.    ,     .            50  hex-  π.  : 537306089144.         key_2056BE33E064. <br><br>            ,    ,       —  .     doInBackground: <br><br><img src="https://habrastorage.org/webt/4o/io/62/4oio62zqs03jzqonptpka1tb_rs.png"><br><br> ,       ,       if (var12[0] == var8) {… }.  var7    —  i-   .    ,   var7      0  9           .    .    ,    .apk (      JVM)   . <br><br><h3> hack it! #8 </h3> <sup><i>:  </i></sup> <br> <a href="https://yadi.sk/d/rRQuDjMq7f6Z_A"> </a> <br><br>      N   ,        .    :   Android  4.4,    1200 × 600,        FM-.    ,       ,  FM-    .     FM-        ,      . <br><br>          ,        FM-.            . <br><br>       ,     : <br><br> 1.     106.00  <br> 2.  (seek)    <br> 3. ,    <br><br>  ,    . <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text">  :            .        . <br><br>  : ,   a(106.00)     106.00 ,  b(true)   ,   c()  ,     a(106.00);b(true);c() </div></div><br> <b></b> <br><br>  :  ,   FM-  .    .apk   dex-.       Java.  ,   ,    — jadx. <br><br>   .apk,     .      MainActivity.   : fragment_holder   RadioFullFragment   .    .      RadioFullPresenter,  ChangeRadioFrequencyUsecase,       RadioRepo.   . <br><br>     «implements RadioRepo».  : RadioRepoImpl.  ,      b. ServiceConnection —    . ,   b    lambda$new$0$RadioRepoImpl. ,   $$Lambda$RadioRepoImpl$FYTR9gAgZEGvrLjkbkpAIup7OKw,     serviceConnection  IRadioService radioService.  ,    RadioService. <br><br>  :  onServiceConnected   «b radioManager = Stub.asInterface(service)».  ,     .    «bindService».  bindService   «com.some_company.help_service».      ,      com.some_company.carradio.FmUtils.  , ,     . , : j  ,    : 8880  88.00 .        8800.      a. ,    . <br><br>   .  : k  z.         RadioRepoImpl,    enableRadio()  disableRadio()   k.    z(boolean isForwardDirection),     « (seek)   ». <br><br>      : a(10600);z(true);j(). <br><br><h3> hack it! #9 </h3> <sup><i>:  </i></sup> <br> <a href="https://yadi.sk/d/RqpIQYikuNBwcA"> </a> <br><br>    flatbuffers      .      GPX  .    .      ,  . <br><br>  FlatBuffers   : <br><br><pre> <code class="plaintext hljs">namespace ru.yandex.android.task; struct GeoPoint { latitude:double; longitude:double; } table Points { items:[GeoPoint]; } root_type Points;</code> </pre> <br>  : ,     sha256.      . <br><br> <b></b> <br><br>   ,   FlatBuffers. <br><br> 1.   fbs-         . <br> 2.    Java-.   JVM-    ,    Gradle   flatbuffers. <br> 3.        fbs-. <br> 4.      fbs-,     -     —    .    ,          FlatBuffers. <br> 5.      ,   .  structs  ,           struct  table.     . <br> 6.            Kotlin.            FlatBuffers. <br><br>      fbs     ,        .     FlatBufferBuilder      input.    input   : <br><br><pre> <code class="plaintext hljs">val pointsList = Points.getRootAsPoints(buffer) val restoredPoints = (0 until pointsList.itemsLength()) .mapNotNull(pointsList::items)</code> </pre> <br>  c    ,          (lat, long).       as-is    GPX-. <br><br>    GPX- (   )   .    GPX   XML.  ,       XML-   .  XML-   GPX-track-.  XML-   MAP-          .     «yandroid». <br><br> ,      .      CLI-: <br><br><pre> <code class="plaintext hljs">echo "yandroid" | shasum -a 256</code> </pre> <br>      . <br><br><a name="dig"></a><h1>  Android </h1><br><h3> dig it! #1 </h3> <sup><i>:  </i></sup> <br> <a href="https://yadi.sk/d/WNgNI_n2ydszrg"> </a> <br><br> QA-    . <br><br>  : <br><br> —   (  'Screen 1') <br> —   GO NEXT (  'Screen 2') <br> —   GO BACK <br> —     GO NEXT,   <br> —  5–10  <br><br>  :   'Screen 2'. <br><br>  :  ,   «  ». <br><br>     .apk . <br><br><div class="spoiler"> <b class="spoiler_title"></b> <div class="spoiler_text"> <b> </b> <br><br> C   stack trace,     . <br><br> <b></b> <br><br>  stack trace     … <br><br><pre> <code class="plaintext hljs">at android.os.MessageQueue.nativePollOnce(Native method) at android.os.MessageQueue.next(MessageQueue.java:326) at android.os.Looper.loop(Looper.java:160) at com.android.server.SystemServer.run(SystemServer.java:454) at com.android.server.SystemServer.main(SystemServer.java:294) at java.lang.reﬂect.Method.invoke(Native method) at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:838)</code> </pre> <br> …   ,     RuntimeInit.java,   493,   : <br><br><pre> <code class="plaintext hljs">com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)</code> </pre> </div></div><br> <b></b> <br><br>   , ,     «  ». <br><br>       /data/anr/traces.txt  /data/anr/anr_* (https://developer.android.com/topic/performance/vitals/anr#pull_a_traces_file).      adb-: <br><br><pre> <code class="plaintext hljs">adb root adb shell ls /data/anr adb pull /data/anr/&lt;filename&gt;</code> </pre> <br> (   adb root  ,     Google API.) <br><br>  stack trace   .  —     stack trace,     : <br><br><pre> <code class="plaintext hljs">com.droid.mission.anrapk.MainActivity$2.onClick(MainActivity.java:43)</code> </pre> <br><img src="https://habrastorage.org/webt/ww/ae/yf/wwaeyflqgvj5ahgbw0ldeui2vo0.png"><br><br><h3> dig it! #2 </h3> <sup><i>:  </i></sup> <br><br>     Android Studio,        ,     MultiDex. -,    apk-     .dex-   (65536).   /     apk   Andorid Studio    .dex-. <br><br>  —    dex-  ,    dex- ( ,    )      .    dex- . <br><br> : multidex , android gradle plugin  3.0.0 – 3.1.4 <br><br>    . <br><br>         ? <br><br> <b></b> <br><br>         ,      dex-.       Gradle —  ,     ,   .apk. <br><br>     Java-  dex-    ART/Dalvik: transformClassesWithDexBuilderForDebug.     dex-,   .       Android Gradle plugin (AGP)     Gradle  .  ,  —  , Gradle             . ,        .        AGP,   —   DSL- Gradle      build.gradle. <br><br>    3.1.*     minimal-main-dex.    ,      . <br><br><h3> dig it! #3 </h3> <sup><i>:  </i></sup> <br>  —     -           . <br><br>       ? <br><br>  :  —    . <br><br> <b></b> <br><br>    ,        .    Android   WindowManager. <a href="https://developer.android.com/reference/android/view/WindowManager.html"></a>        .  ,  <a href="https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html">WindowManager.LayoutParams</a> .    ,        ,   <a href="https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html">TYPE_APPLICATION</a> . <br><br>    ,  ,      .       ,  ,    - . <br><br> ,   Android SDK,   ,        . ,     <a href="">WindowManager</a>  AOSP.     ,    ,   ,            . <br><br> ,       ,   <a href="http://androidxref.com/9.0.0_r3/search%3Fq%3DTYPE_BOOT_PROGRESS%26defs%3D%26refs%3D%26path%3D%26hist%3D%26project%3Dframeworks">TYPE_BOOT_PROGRESS</a> .       getWindowLayerFromTypeLw  WindowManagerPolicy.  Javadoc : <br><br><blockquote> Returns the layer assignment for the window type. Allows you to control how different kinds of windows are ordered on-screen </blockquote><br> ,   ,  .    switch-case   ,   layer —  TYPE_POINTER,  2018.    . <br><br><h3> dig it! #4 </h3> <sup><i>:  </i></sup> <br><br>    ,      -        ,     . <br><br>        .   ,   ,   ,     . <br><br>    Android  ,          ? <br><br> <b></b> <br><br>       ,   ,     Android SDK,  . <br><br>     <a href="">startActivity  Context</a> .     Context  Activity — ,      <a href="">startActivity</a> .        startActivityForResult.     ,    Activity  <a href="">mInstrumentation.execStartActivity</a> . <br><br>      <a href=""></a> ?    startActivity  ActivityManagerService,    ServiceManager.getService(Context.ACTIVITY_SERVICE). <br><br>      <a href="">ActivityManagerService</a> .   startActivityAsUser,    startActivity,  ActivityStarter     execute. ,    <a href=""></a> . <br><br> C         <a href="">startActivity</a> .      ,     <a href="">abort</a> ,     true    START_ABORTED     Activity. <br><br>  ,    ,      mService.mIntentFirewall.checkStartActivity. , <a href="">   </a> .   : <br><br><blockquote> This is called from ActivityManager to check if a start activity intent should be allowed. </blockquote><br>   ,  IntentFirewall  .        <a href="">RULES_DIR</a> . : ifw. <br><br><h3> dig it! #5 </h3> <sup><i>:  </i></sup> <br><br>     . ,        (, ) — 8800.  ,  ,        (+8800). ,   8800  +8800 ,   /     ,    . <br><br>            .    .   ,   +8800  8800 . <br><br>          ,     (java/c/c++).   ,    . <br><br>      : <a href="https://source.android.com/">source.android.com</a> <br>   — : <a href="http://androidxref.com/">androidxref.com</a> <br><br> <b></b> <br><br>     Dialer ,         ,    URI  <code>authorities = "content://com.android.contacts"</code> . <br><br>  ContentProvider.        URI   ContactsPoviider.  : ,    SQL-      .    : <br><br><pre> <code class="plaintext hljs">sb.append("PHONE_NUMBERS_EQUAL(" + Tables.DATA + "." + Phone.NUMBER + ", ");</code> </pre> <br> PHONE_NUMBERS_EQUAL —   SQL-.   sqlite    . <br><br>    sqlite,  ,        .   ContactsProvider  ,      config_use_strict_phone_number_comparation,     . : <br><br><pre> <code class="plaintext hljs">&lt;bool name="config_use_strict_phone_number_comparation"&gt;true&lt;/bool&gt;</code> </pre> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN484876/">https://habr.com/ru/post/zh-CN484876/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN484862/index.html">通过混合应用程序从AngularJS迁移到Angular7</a></li>
<li><a href="../zh-CN484866/index.html">在ARM嵌入式计算机上使用Astra Linux</a></li>
<li><a href="../zh-CN484868/index.html">如何衡量团队的进步？ 第二部分</a></li>
<li><a href="../zh-CN484870/index.html">英语如何改变了伊洛娜面具20年</a></li>
<li><a href="../zh-CN484874/index.html">“您的IT专家已被打破，带来了新的人才”：如何在IT领域建立事业而不是发疯</a></li>
<li><a href="../zh-CN484878/index.html">关卡设计基础：流动效果或如何不让玩家感到无聊</a></li>
<li><a href="../zh-CN484882/index.html">Windows Terminal Preview v0.8发布</a></li>
<li><a href="../zh-CN484884/index.html">HIPEC。 腹腔恶性肿瘤的寿命数月而不是数月</a></li>
<li><a href="../zh-CN484886/index.html">RTL样式101-CSS RTL样式的详细指南</a></li>
<li><a href="../zh-CN484890/index.html">限制对SSAS表格模型中的维度属性的访问</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>