<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â›µï¸ ğŸ­ ğŸ™ˆ Surveillance environnementale dans la salle des serveurs (Bolid + Zabbix) ğŸ¡ ğŸ™ğŸ¿ ğŸ™‹ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le moyen le plus simple pour un professionnel de l'informatique de rÃ©soudre le problÃ¨me de surveillance environnementale dans la salle des serveurs es...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Surveillance environnementale dans la salle des serveurs (Bolid + Zabbix)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438788/">  Le moyen le plus simple pour un professionnel de l'informatique de rÃ©soudre le problÃ¨me de surveillance environnementale dans la salle des serveurs est probablement d'utiliser des contrÃ´leurs spÃ©cialisÃ©s avec sortie SNMP (par exemple, NetBotz ou NetPing).  Mais pour ceux qui n'ont pas peur des difficultÃ©s et veulent obtenir une solution peu coÃ»teuse au niveau industriel (avec production en sÃ©rie d'Ã©quipements) - il existe une option intÃ©ressante avec le protocole Modbus. <br><br><img src="https://habrastorage.org/webt/wu/uc/mi/wuucmi1fiyi7sglvrsekrvey0pk.png"><br><a name="habracut"></a><br>  Ci-dessous, je dÃ©crirai un systÃ¨me de surveillance basÃ© sur des composants fabriquÃ©s en Russie - NVP Bolid, et nous Â«fusionneronsÂ» les donnÃ©es dans Zabbix 4.0.  NVP "Bolid" est largement connu dans les milieux des Ã©quipements d'automatisation de lutte contre l'incendie et la solution envisagÃ©e portera cette "empreinte".  Leurs appareils, pour le moins, ne diffÃ¨rent pas par la conception et la finesse des boÃ®tiers, mais ... le prix compense largement toutes ces lacunes.  Il convient de noter une trÃ¨s bonne documentation et un support technique gratuit plus ou moins normal. <br><br><h2>  Protocoles et interfaces </h2><br>  Avant de passer au matÃ©riel, nous examinerons briÃ¨vement les protocoles et interfaces utilisÃ©s: <br><br>  <b>Modbus</b> : un protocole industriel construit sur le principe Â«MaÃ®treÂ» - Â«EsclaveÂ».  Il ne peut y avoir qu'un seul maÃ®tre sur un rÃ©seau Modbus qui interroge les esclaves et Â«ditÂ» quoi faire.  En tant que support de transmission, il peut utiliser l'interface RS-485 (Modbus RTU) ou Ethernet (Modbus TCP).  ThÃ©oriquement, le nombre maximum d'appareils est de 247. <br><br>  <b>Orion</b> : protocole propriÃ©taire de la sociÃ©tÃ© NVP "Bolid", construit sur le principe de "Master" (Master) - "Slave" (Slave).  Apparemment, l'interface RS-485 modifiÃ©e est utilisÃ©e comme support de transmission de donnÃ©es, grÃ¢ce Ã  laquelle la longueur de ligne maximale peut atteindre 3 km (!).  Le nombre maximum d'appareils est 127. <br><br>  <b>DLS</b> (ligne de communication bifilaire): protocole propriÃ©taire de la sociÃ©tÃ© NVP "Bolid", construit sur le principe "Master" - "Slave" (Master).  Il utilise un cÃ¢ble Ã  paire de cuivre comme support de transmission de donnÃ©es (un cÃ¢ble Ã  paire torsadÃ©e est recommandÃ©).  Le nombre maximum d'appareils est de 127 + 1.  Topologie - un bus (ou anneau) avec des branches, la longueur de ligne maximale peut atteindre 1,5 km (selon le type de cÃ¢ble, la section des conducteurs de cÃ¢ble et le nombre d'appareils connectÃ©s). <br><br>  <b>RS-485</b> : interface de couche physique, utilise des Â«paires torsadÃ©esÂ» (une paire Â«2 filsÂ» ou deux paires Â«4 filsÂ» pour la transmission de donnÃ©es, la seconde est moins courante).  La longueur de ligne maximale dÃ©clarÃ©e est de 1,2 km.  La topologie est un bus. <br><br>  Comme vous pouvez le voir, des lignes de communication assez Â«longue portÃ©eÂ» sont utilisÃ©es.  Dans tous les protocoles, l'adressage des pÃ©riphÃ©riques est dÃ©fini par des Â«poignÃ©esÂ» (prÃ©configuration). <br><br><h2>  Capteurs </h2><br>  Le systÃ¨me implique la connexion de capteurs d'adresse Â«spÃ©ciauxÂ» (propriÃ©taires) (pour le dire plus strictement Â«dÃ©tecteursÂ», c'est-Ã -dire des appareils avec un capteur intÃ©grÃ©), mais vous pouvez Ã©galement connecter des adresses Â«ordinairesÂ» sans adresse Ã  l'aide d'extensions d'adresse (de 1 Ã  8 entrÃ©es).  L'utilisation de dÃ©tecteurs adressables prÃ©sente deux avantages: presque tous les appareils adressables sont alimentÃ©s via la ligne de signal (c'est-Ã -dire qu'il n'est pas nÃ©cessaire de fournir une ligne d'alimentation 12V sÃ©parÃ©e) et qu'il n'est pas nÃ©cessaire de placer l'expanseur d'adresse n'importe oÃ¹.  Les capteurs sont connectÃ©s au <abbr title="ligne de communication Ã  deux fils">DPS</abbr> . <br>  La gamme d'Ã©quipements "terminaux" est assez large, mais je vais vous donner celui qui peut Ãªtre nÃ©cessaire pour rÃ©soudre notre problÃ¨me: <br><br><ul><li>  S2000-VT - capteur combinÃ© de tempÃ©rature et d'humiditÃ© pour une utilisation en intÃ©rieur (IP41).  PossÃ¨de un certificat d'instrument de mesure, l'erreur n'est que de 0,5 Â° C et le prix de vente recommandÃ© de seulement 1200 roubles! </li><li>  S2000-SMK (et ses variantes) - Capteur Â«porte ouverteÂ» (dÃ©tecteur de contact magnÃ©tique, interrupteur reed).  Prix â€‹â€‹de vente recommandÃ© - 300 roubles.; </li><li>  S2000-DZ - capteur d'inondation ponctuelle (fait en collaboration avec Realty, le boÃ®tier est donc "non formatÃ©").  Prix â€‹â€‹de vente conseillÃ© - 800 roubles.; </li><li>  2000-1, 2000-2, 2000-8 - extenseurs d'adresse pour 1, 2 et 8 connexions, peuvent Ãªtre utilisÃ©s comme Â«rÃ©cepteursÂ» de signaux de type Â«contact secÂ» (marche / arrÃªt) Ã  partir d'autres Ã©quipements (par exemple, Ã  partir d'un dispositif d'extinction d'incendie ou pompes de climatisation); </li><li>  S2000-SP2 - bloc de relais (pour 2 sorties), avec lequel vous pouvez contrÃ´ler des appareils (par exemple, une lampe d'alarme - un indicateur lumineux).  Prix â€‹â€‹de vente conseillÃ© - 1200 roubles. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Apparence des capteurs</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/wy/ff/2k/wyff2kk8bfwz0bcq5feyh-kvja4.png"><br><br></div></div><br>  Pour une liste complÃ¨te des Ã©quipements, consultez le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">site officiel du fabricant</a> . <br><br><h2>  ContrÃ´leur </h2><br>  La "ligne" de contrÃ´leurs, si je puis dire, se compose de trois modÃ¨les: <br><br><ul><li>  S2000-KDL - modÃ¨le de base (la dÃ©signation signifie "SystÃ¨me 2000 - ContrÃ´leur d'une ligne de communication Ã  deux fils"); </li><li>  S2000-KDL-2I - isolation galvanique supplÃ©mentaire pour RS-485 et DPS; </li><li>  S2000-KDL-Modbus - un convertisseur de protocole Modbus S2000-PP a Ã©tÃ© ajoutÃ© Ã  la conception S2000-KDL-2I. </li></ul><br><div class="spoiler">  <b class="spoiler_title">L'apparence des contrÃ´leurs</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/gw/wu/nb/gwwunbbgi8jsdrp4lirdesxxoyi.png"><br></div></div><br>  Il est plus optimal d'utiliser S2000-KDL-Modbus, mais il est Ã©galement possible d'utiliser S2000-KDL / C2000-KDL-2I avec le convertisseur de protocole S2000-PP installÃ© Ã  proximitÃ©, qui a une conception de boÃ®tier montÃ©e sur panneau. <br><br>  Le contrÃ´leur joue le rÃ´le de Â«leaderÂ» dans la ligne <abbr title="ligne de communication Ã  deux fils">DLS</abbr> (une seule ligne DPS peut Ãªtre connectÃ©e Ã  un contrÃ´leur), et sur la ligne RS-485 Orion, il agit dÃ©jÃ  comme Â«esclaveÂ» et il ne sera pas possible de collecter des donnÃ©es directement.  Pour collecter des donnÃ©es dans la ligne RS-485 Orion, la console dite 2000 ou 2000- (y compris la version intÃ©grÃ©e) est utilisÃ©e, qui ont dÃ©jÃ  des interfaces de transfert de donnÃ©es standardisÃ©es. <br><br>  Les contrÃ´leurs suivants peuvent Ã©galement distinguer les caractÃ©ristiques suivantes: <br><br><ul><li>  se rÃ©fÃ©rer Ã  un type configurable, pas programmable (c'est-Ã -dire qu'il vous suffit de configurer les paramÃ¨tres et non de dÃ©velopper un programme) </li><li>  prise en charge dans les <abbr title="ligne de communication Ã  deux fils">DPS</abbr> jusqu'Ã  127 appareils adressables (S2000-VT a deux adresses), et de nombreux commissaires ne recommandent pas d'utiliser plus de 100-110; </li><li>  double entrÃ©e pour alimentation DC 12-24V; </li><li>  conception pas trop pratique (tous les fils connectÃ©s ne peuvent pas Ãªtre cachÃ©s dans le boÃ®tier de l'appareil et vous devez les retirer de l'arriÃ¨re de l'appareil). </li></ul><br>  Pour la tolÃ©rance aux pannes du systÃ¨me, vous pouvez utiliser les mesures suivantes (facultatives): <br><br><ul><li>  boucle en anneau - une rupture de boucle Ã  un endroit n'affecte pas la prÃ©sence de signaux provenant de capteurs adressables; </li><li>  l'utilisation de blocs d'isolation de branche (BRIZ) - vous permet de faire des branches radiales, ainsi que d'isoler le segment de boucle, dans lequel il y avait un court-circuit "DPS +" et "DPS-". </li></ul><br>  IMPORTANT: de nouveaux micrologiciels arrivent constamment sur les contrÃ´leurs qui Ã©liminent les erreurs et ajoutent des fonctionnalitÃ©s, et les micrologiciels C2000-KDL et C2000-KDL-2I sont incompatibles. <br><br><h2>  Connexion Modbus </h2><br>  Comme dÃ©crit prÃ©cÃ©demment, un contrÃ´leur C2000-Modbus ou un convertisseur C2000-PP peut Ãªtre utilisÃ©.  Les deux schÃ©mas prÃ©voient l'Ã©mission de signaux en utilisant le protocole Modbus RTU Ã  2 fils en utilisant RS-485 comme pÃ©riphÃ©rique esclave (notre hÃ´te est Zabbix ou un systÃ¨me SCADA).  Deux mÃ©thodes peuvent Ãªtre utilisÃ©es pour se connecter au serveur: <br><br><ul><li>  PrÃ©fÃ©rÃ© - Convertisseur Modbus RTU / Modbus TCP avec connexion au mÃªme rÃ©seau local oÃ¹ se trouve notre serveur avec logiciel; </li><li>  Pas cher - Convertisseur RS-485 / USB avec connexion directe au serveur.  Je note qu'il y a beaucoup de plaintes concernant la fiabilitÃ© de ces clÃ©s USB (vous pouvez en prendre presque toutes, j'ai commandÃ© de la Chine pour 100 roubles, utilisÃ© un tas de convertisseur RS-232 / RS-485 et un adaptateur USB / RS-232 et tout a continuÃ© Ã  fonctionner!). </li></ul><br>  Deux schÃ©mas de transmission d'Ã©vÃ©nements au protocole Modbus sont possibles: <br><br><ul><li>  directement Ã  partir de 2000- / C2000--Modbus, lorsque ces appareils fonctionnent en mode "Orion-Master" (sÃ©lectionnÃ©s par un cavalier sur la carte) et agissent comme interrogateur du systÃ¨me "Orion"; </li><li>  Ã  l'aide de la tÃ©lÃ©commande Â«S2000MÂ», lorsqu'elle collecte des informations des contrÃ´leurs et les envoie ensuite Ã  Modbus via C2000- / C2000--Modbus (mode Â«Orion-SlaveÂ»).  Ce schÃ©ma est bon dans la mesure oÃ¹ la tÃ©lÃ©commande peut Ãªtre utilisÃ©e comme un Â«terminal localÂ» (voir les Ã©vÃ©nements sur l'Ã©cran LCD intÃ©grÃ©), et continue Ã©galement d'enregistrer les Ã©vÃ©nements en cas de dÃ©faillance du serveur avec le logiciel de surveillance.  Moins: la configuration est un peu plus compliquÃ©e et la tÃ©lÃ©commande a une apparence trÃ¨s spÃ©cifique. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Exemples de circuits systÃ¨me</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/u6/se/lr/u6selr6hievry0qlrqy77naclpm.png"><br><br><img src="https://habrastorage.org/webt/lr/mr/ny/lrmrnydyc3k7okcrwtfinacdvj8.png"><br><br><img src="https://habrastorage.org/webt/fz/hb/gf/fzhbgfqp5l5crnlkazfbvabmemg.png"><br></div></div><br><h2>  Puissance et installation </h2><br>  Pour l'alimentation, une alimentation 12V DC est requise, de prÃ©fÃ©rence stabilisÃ©e et montÃ©e sur un rail DIN.  Sa puissance (gÃ©nÃ©ralement indiquÃ©e en mA ou A) peut Ãªtre grossiÃ¨rement sÃ©lectionnÃ©e Ã  partir du calcul de 1 contrÃ´leur - 500 mA.  Je recommanderais d'utiliser une alimentation redondante (avec batterie intÃ©grÃ©e, RIP) uniquement si la tÃ©lÃ©commande S2000M est utilisÃ©e.  Et assurez-vous de connecter la source d'alimentation Ã  la mÃªme alimentation sans coupure (UPS) que le serveur du systÃ¨me de surveillance. <br><br>  Bien sÃ»r, vous pouvez monter tout cela sur le mur, mais laissez-le aux installateurs d'alarme incendie et de sÃ©curitÃ©, et nous utiliserons un rail DIN 3U pour une installation dans une armoire 19 "(par exemple, le PSM-3U ou Cabeus CMO avec le mÃªme article, vous devrez jeter le panneau avant Dans le cas de l'utilisation de la tÃ©lÃ©commande S2000-M, vous pouvez utiliser une prise 19 "4U (de prÃ©fÃ©rence perforÃ©e), qui servira de panneau de montage et sur laquelle un rail DIN pour les bornes et le contrÃ´leur est dÃ©jÃ  fixÃ©.  Moins de la dÃ©cision - l'Ã©quipement reprÃ©sente le plan de montage 19 ". <br><br>  Assembler et monter un systÃ¨me de composants ne devrait pas poser de questions, mais j'attire l'attention sur les points suivants: <br><br><ul><li>  la plupart des capteurs ont un petit morceau de cÃ¢ble en saillie.  Pour augmenter le cÃ¢ble, vous pouvez utiliser soit une soudure avec thermorÃ©tractable, soit un boÃ®tier oscillant Ã  deux paires KS-2 (compact, mais la fabrication est "boiteuse"), ou la connexion RJ11 (RJ45); </li><li>  Avant le montage dans les capteurs, leurs adresses doivent Ãªtre enregistrÃ©es (comme dÃ©crit ci-dessous) et marquÃ©es; </li><li>  lors de la connexion des capteurs, il est nÃ©cessaire d'observer la polaritÃ© de Â«DLS +Â» et Â«DPS-Â» (voir la documentation - quelle couleur a DPS +, gÃ©nÃ©ralement colorÃ©) - si vous le mÃ©langez, le capteur ne sera pas dÃ©tectÃ© dans le systÃ¨me. </li></ul><br>  Pour ceux qui ne veulent pas souder, mais aiment serrer les Â«pucesÂ», vous pouvez utiliser l'option dÃ©crite ci-dessous (probablement, c'est encore mieux que RJ11 - afin de ne pas connecter accidentellement la ligne DPS au serveur). <br><br>  Il faudra: <br><br><ul><li>  cÃ¢ble Ã  paire torsadÃ©e 2 paires, non blindÃ©; </li><li>  "Sac" de connecteurs RJ11 (6P4C ou 6P6C); </li><li>  RÃ©partiteurs RJ11 avec entrÃ©es de type socket (il existe une grande variÃ©tÃ© d'options Ã  des prix trÃ¨s raisonnables). </li></ul><br>  Sur une paire, nous dÃ©marrons le DPS, sur l'autre, par exemple, 12V DC.  Connexion des capteurs via des rÃ©partiteurs. <br><br><div class="spoiler">  <b class="spoiler_title">Image explicative</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/xf/v-/93/xfv-93ihmj39n_uhdyhhlqidgjg.png"><br></div></div><br><h2>  Support de montage </h2><br>  Pour la partie Â«pratiqueÂ», un stand a Ã©tÃ© assemblÃ© composÃ© de: <br><br><ul><li>  convertisseur de protocole C2000-PP fabriquÃ© par NVP Bolid; </li><li>  contrÃ´leur S2000-KDL produit par NVP "Bolid"; </li><li>  thermohygromÃ¨tre (capteur combinÃ© de tempÃ©rature et d'humiditÃ©) C2000-VT fabriquÃ© par NVP Bolid; </li><li>  dÃ©tecteur de contact magnÃ©tique S2000-SMK fabriquÃ© par NVP "Bolid"; </li><li>  capteur de fuite ponctuelle S2000-DZ fabriquÃ© par Rielta; </li><li>  extenseur d'adresse S2000-AP1 isp.  02 production de NVP "Bolid"; </li><li>  dÃ©tecteur volumÃ©trique Photon-10M fabriquÃ© par "Rielta" (un tel "tas"); </li><li>  Bloc d'alimentation 12V-AT / 12 / 1.5 DIN fabriquÃ© par AccordTec; </li><li>  Adaptateur RS-485 / USB achetÃ© sur <a rel="noreferrer noopener" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">aliexpress</a> (sur la puce CH340G commune, linux le dÃ©finit comme Â«adaptateur sÃ©rie USB QinHeng Electronics HL-340Â»).  Il est devenu intÃ©ressant de voir comment le systÃ¨me fonctionnera dans la configuration la moins chÃ¨re; </li><li>  Client lÃ©ger TONK 1811 de TONK Group of Companies (achetÃ© sur avito pour 500 roubles) sur un processeur Intel Atom N270 avec carte graphique GMA950 intÃ©grÃ©e. </li></ul><br><img src="https://habrastorage.org/webt/6b/kr/ed/6bkred606ln2axp3wlcrztumlly.png"><br><br><div class="spoiler">  <b class="spoiler_title">Affiner le client lÃ©ger et l'apparence du stand</b> <div class="spoiler_text">  Le client lÃ©ger Ã©tait un peu "fini": <br><br><ul><li>  Un module DOM de 2 Go avec Windows XP intÃ©grÃ© installÃ© a Ã©tÃ© remplacÃ© par des disques durs 2,5 ATA 60 Go provenant d'un ancien ordinateur portable (j'ai dÃ» acheter un cÃ¢ble, pour une raison quelconque, le disque dur SATA-HDD n'a pas pris - il comprenait le port SATA dans le BIOS); </li><li>  augmentation de la RAM DDR2 SO-DIMM de 1 Go Ã  2 Go; </li><li>  Linux Mint 19.1 Â«TessaÂ» Xfce Edition installÃ© et bureau Ã  distance configurÃ© Ã  l'aide de TightVNC; </li><li>  Le systÃ¨me de refroidissement a Ã©tÃ© Â«affinÃ©Â» - il a rÃ©duit le dissipateur thermique de sorte que le disque dur s'adapte presque Â«au rasÂ» du boÃ®tier, a retirÃ© le couvercle supÃ©rieur et en plus Â«a ajoutÃ©Â» un ventilateur de 120 mm connectÃ© via une rÃ©sistance.  ImmÃ©diatement tous les Â«freinsÂ» ont disparu, il est devenu tout Ã  fait raisonnable de fonctionner. </li></ul><br><br><img src="https://habrastorage.org/webt/ct/ri/5v/ctri5vgqehkummqppp22cd3k2uw.jpeg"><br></div></div><br><h2>  Configurer l'Ã©quipement Bolid </h2><br>  Tous les paramÃ¨tres sont dÃ©finis dans l'environnement Windows, donc avant de commencer Ã  travailler, vous devez installer le pilote sur l'adaptateur RS-485 / USB, ainsi que deux Â«superÂ» programmes du NVP Â«BolidÂ», qui sont fournis gratuitement: <strong>Orion-prog</strong> et <strong>Uprog</strong> .  De plus, les appareils sont connectÃ©s sÃ©parÃ©ment Ã  l'adaptateur RS-485 / USB aux ports Orion AB RS-485 (une disposition directe est utilisÃ©e, et pas comme sur les ports COM). <br><br>  IMPORTANT: avec toutes les Ã©tapes suivantes sur le S2000-PP, le cavalier XP1 sur la carte doit Ãªtre retirÃ©. <br><br>  Ã‰tape 1. InsÃ©rez l'adaptateur RS-485 / USB dans le connecteur USB et recherchez dans le gestionnaire de pÃ©riphÃ©riques le numÃ©ro de port COM attribuÃ© Ã  l'adaptateur.  Les pilotes de l'adaptateur doivent Ãªtre installÃ©s sans points d'exclamation dans le Â«Gestionnaire de pÃ©riphÃ©riquesÂ». <br><br>  Ã‰tape 2. Au nom de l'administrateur, exÃ©cutez Orion-prog, sÃ©lectionnez le port COM souhaitÃ© et effectuez une recherche et voyez la version du micrologiciel de l'appareil.  AccÃ©dez au site Web officiel du fabricant et vÃ©rifiez s'il existe un micrologiciel plus rÃ©cent et, si nÃ©cessaire (trÃ¨s probablement, il sera requis), effectuez une mise Ã  jour (au moment de la rÃ©daction: 1,32 pour C2000-PP, 2,22 pour C2000-KDL). <br><br><div class="spoiler">  <b class="spoiler_title">Micrologiciel de l'instrument en images</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/6i/lm/py/6ilmpyshwlwgygxsep6myrt-yzm.gif"><br></div></div><br>  * Firmware 1.32 en fait, j'ai Ã©tÃ© installÃ© "de travers" - dans Uprog, la configuration n'a pas Ã©tÃ© lue depuis l'appareil.  Par consÃ©quent, il a Â«reculÃ©Â» Ã  1,31. <br><br>  Ã‰tape 3. RÃ©glage de l'adresse des appareils (d'abord avec S2000-PP, par exemple, 2 puis avec S2000-KDL - 3).  Pour ce faire, exÃ©cutez Uprog - tous les appareils ont une adresse par dÃ©faut de 127, vous devez donc configurer les appareils au dÃ©but un par un.  Pour une vidÃ©o plus dÃ©taillÃ©e du fabricant, voir <a rel="noreferrer noopener" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">YouTube</a> . <br><br>  Ã‰tape 4. AprÃ¨s avoir dÃ©fini l'adresse sur S2000-KDL, il est nÃ©cessaire de dÃ©finir les adresses des capteurs dans la ligne de communication Ã  deux fils (DLS).  Ils ont Ã©galement l'adresse par dÃ©faut 127 (et le cercle avec le capteur dans Uprog n'est pas mis en surbrillance).  Nous lisons la configuration de l'appareil (Ctrl + F3) et connectons sÃ©quentiellement les capteurs aux sorties du DLS, en dÃ©finissant les adresses.  Lorsque vous pointez le capteur dans le menu contextuel Â«Demande de type AUÂ», vous pouvez spÃ©cifier le type de capteur ou Â«Demande d'ADC AUÂ» - savoir si le capteur fonctionne (par exemple, pour un dÃ©tecteur Ã  contact magnÃ©tique de l'ADC lors de la fermeture: 100 et Ã  l'ouverture: 50).  En fait, j'ai la configuration d'adresse suivante: 1 - interrupteur reed C2000-SMK, 2 - tempÃ©rature C2000-VT, 3 - humiditÃ© C2000-VT, 4 - fuite C2000-DZ, 5 - isp expander d'adresse C2000-AP1.  02 (avec le dÃ©tecteur volumÃ©trique Photon-10M connectÃ©). <br><br><div class="spoiler">  <b class="spoiler_title">Adressage des capteurs en images</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/j9/vo/dk/j9vodkzjmmydzvrsk377m3zinok.gif"><br></div></div><br>  Ensuite, accÃ©dez Ã  l'onglet Â«EntrÃ©esÂ» et procÃ©dez comme suit: <br><br><ul><li>  indiquer les types de capteurs: pour la tempÃ©rature - 10, pour mesurer l'humiditÃ© - 15, pour tous les autres - 6 (technologique); </li><li>  pour les entrÃ©es technologiques, nous dÃ©finissons Â«Recovery time, sÂ» - c'est le temps aprÃ¨s lequel la boucle reviendra Ã  l'Ã©tat Â«NormalÂ» aprÃ¨s avoir reÃ§u l'Ã©tat Â«ViolationÂ».  Il est nÃ©cessaire d'indiquer le nombre d'au moins l'intervalle d'interrogation dans Zabbix (j'ai pris 10 secondes); </li><li>  dÃ©sactiver "ContrÃ´le de l'indication AU" (0), "Surveillance des circuits ouverts et courts-circuits" et "Surveillance de l'Ã©tat de la batterie de secours" afin de simplifier la configuration. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Configuration des entrÃ©es vers S2000-KDL en images</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/90/cn/68/90cn68wqswa16_nt7pqxzy830de.gif"><br></div></div><br>  AprÃ¨s toutes les Â«manipulationsÂ» avec C2000-KDL, nous rÃ©alisons le Â«Record de configuration dans l'instrumentÂ». <br><br>  Ã‰tape 5. Configurez S2000-PP. <br>  Sur l'onglet Â«AppareilÂ», les paramÃ¨tres sont affichÃ©s dans l'image (ce sont les plus Â«en cours d'exÃ©cutionÂ» et ils vont par dÃ©faut pour la plupart des appareils).  Le port COM de l'adaptateur RS-485 / USB et de tout autre appareil connectÃ© au rÃ©seau Modbus doit avoir des paramÃ¨tres similaires.  J'ai sÃ©lectionnÃ© l'adresse 11 pour le pÃ©riphÃ©rique S2000-PP sur le rÃ©seau Modbus (l'adresse dans le systÃ¨me Orion est 2!). <br><br><img src="https://habrastorage.org/webt/ej/6y/31/ej6y31hxzfnze6nzx29rjcnsfwk.png"><br><br>  Ensuite, nous allons dans l'onglet "PÃ©riphÃ©riques" et commenÃ§ons Ã  remplir le "Tableau des zones": <br><br><ul><li>  dans la premiÃ¨re colonne, j'ai indiquÃ© Â«3Â» - il s'agit de l'adresse de l'appareil S2000-KDL dans le systÃ¨me Orion; </li><li>  numÃ©ro de boucle d'alarme ("boucle d'alarme") - ce sont les adresses des capteurs (en fait la boucle d'alarme = adresse, nous pouvons sauter plusieurs adresses si nous ne voulons pas leur prendre d'informations); </li><li>  Section Modbus No. - vous pouvez regrouper nos capteurs en groupes.  Afin de simplifier - je n'ai pas fait cela et attribuÃ© Ã  tout le monde 1 section; </li><li>  le type de zone est un paramÃ¨tre trÃ¨s important.  Nous le sÃ©lectionnons en fonction du type de capteur. </li></ul><br><img src="https://habrastorage.org/webt/8g/bo/ea/8gboea_ibzpk6nr04myidkbgtru.png"><br><br>  AprÃ¨s avoir rÃ©glÃ© S2000-PP, nous effectuons la Â«Configuration d'enregistrement dans l'appareilÂ». <br><br>  Ã‰tape 6. Combinez C2000-PP et C2000-KDL dans un rÃ©seau via RS-485 Orion, connectez les capteurs Ã  C2000-KDL (vous pouvez utiliser un tas de deux terminaux) et connectez l'adaptateur RS-485 / USB Ã  la sortie Modbus C2000-PP.  Nous mettons le cavalier XP1 en position fermÃ©e (important: aprÃ¨s avoir installÃ© le cavalier, vous devez redÃ©marrer l'appareil en rÃ©initialisant la tension d'alimentation).  Tout - le systÃ¨me est Â«prÃªt pour la batailleÂ». <br><br>  Nous vÃ©rifions Â«l'opÃ©rabilitÃ©Â» dans le programme de console gratuit <a rel="noreferrer noopener" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Modpoll Modbus Master Simulator</a> (ci-aprÃ¨s dÃ©nommÃ© Â«ModpollÂ»), par exemple, Ã  l'adresse du firmware Â«S2000-PPÂ» ou en envoyant des informations de S2000-KDL Ã  Â«40000Â» - il s'agit du premier capteur: <br><br><img src="https://habrastorage.org/webt/ij/hv/go/ijhvgoynxeyxwua5abdcgvapi3u.png"><br><br>  Le firmware "pour familiarisation" peut Ãªtre tÃ©lÃ©chargÃ© <a href="">ici</a> . <br><br><h2>  Configuration de Zabbix </h2><br>  <font color="red">Attention: Zabbix configurÃ© pour la premiÃ¨re fois, comme Linux Mint (puisqu'il n'y a pas de Zabbix sur Windows) :)</font> <br><br>  AprÃ¨s avoir installÃ© Zabbix, vous devez installer les packages <i>autoconf</i> , <i>automake</i> , <i>libtool</i> , <i>pkg-config</i> puis le module d'extension - <i>libzbxmodbus</i> .  Il y a un article sÃ©parÃ© Ã  son sujet sur <a rel="noreferrer noopener" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HabrÃ©</a> (j'y reviendrai constamment) et il a rÃ©cemment Ã©tÃ© mis Ã  jour, juste pour travailler avec Zabbix 4.0.  L'article contient Ã©galement des informations plus dÃ©taillÃ©es sur le protocole Modbus.  Le module lui-mÃªme et des instructions plus ou moins dÃ©taillÃ©es sont sur <a rel="noreferrer noopener" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> . <br><br>  Petites diffÃ©rences d'installation par rapport Ã  celle spÃ©cifiÃ©e sur GitHub: <br><br><pre><code class="plaintext hljs">... ./configure --prefix=/etc/zabbix --enable-zabbix-3.2 ... sudo make install</code> </pre> <br>  En Ã©tudiant le fonctionnement du module <i>libzbxmodbus</i> , <i>il</i> est devenu clair qu'il ne serait pas possible d'appliquer le circuit avec la tÃ©lÃ©commande S2000M, car dans ce cas, les donnÃ©es des thermohygromÃ¨tres ressemblent Ã  ceci: Ã©crire le numÃ©ro de la zone souhaitÃ©e pour enregistrer 46179 puis collecter les donnÃ©es du registre 46328 - c.-Ã -d.  trÃ¨s simple (dans les "grands" systÃ¨mes SCADA, cela peut Ãªtre implÃ©mentÃ©, par exemple, dans MasterSCADA). <br><br>  Dans le fichier de configuration <i>etc / zabbix / zabbix_server.conf, nous Ã©crivons les</i> liens d' <i>extension</i> et connectons le matÃ©riel au serveur avec Zabbix.  Je n'ai pas eu Ã  installer de pilotes pour l'adaptateur RS-485 / USB, mais je ne comprenais toujours pas comment dÃ©terminer le numÃ©ro USB Ã  utiliser, il est bon que la connexion Ã  <i>/ dev / ttyUSB0</i> fonctionne (vous pouvez voir que le pÃ©riphÃ©rique a Ã©tÃ© trouvÃ© dans le systÃ¨me Ã  l'aide de la commande <i>lsusb</i> ). <br><br>  Comme avec Windows, nous vÃ©rifions Ã  l'aide de l'utilitaire Modpoll (j'ai exÃ©cutÃ© linux i386) que le matÃ©riel est connectÃ© et que des informations sont disponibles: <br><br><img src="https://habrastorage.org/webt/wn/8_/zz/wn8_zz98bldyf7hzc5zdkc90v80.png"><br><br>  Ã‰tant donnÃ© que l'article dÃ©crit le processus de configuration en utilisant l'exemple de Zabbix 2.2 - l'interface est un peu diffÃ©rente lÃ -bas, je vais fournir des explications et des photos des paramÃ¨tres. <br><br><p>  Ã‰tape 1. Nous crÃ©ons un nÅ“ud de rÃ©seau et un groupe dans lequel nos nÅ“uds seront inclus (par exemple, un nÅ“ud - "Surveillance environnementale" et un groupe - "Infrastructure d'ingÃ©nierie"): <br>  ParamÃ¨tres&gt; HÃ´tes&gt; CrÃ©er un hÃ´te&gt; Entrez nos noms&gt; Ajouter <br><br><img src="https://habrastorage.org/webt/vj/cd/fi/vjcdfibmwzvcm7vudrfubf4nuaa.png"><br><br>  Ã‰tape 2. CrÃ©ez les Ã©lÃ©ments de donnÃ©es.  L'article recommande de crÃ©er des modÃ¨les, mais comme notre systÃ¨me ne contient pas d'Ã©lÃ©ments en double, je vais donc ignorer cette Ã©tape.  Par exemple, si nous avions plusieurs climatiseurs connectÃ©s via Modbus, nous pourrions utiliser la fonctionnalitÃ© du systÃ¨me. <br><br>  ParamÃ¨tres&gt; NÅ“uds de rÃ©seau&gt; Dans la ligne contenant le nom de notre nÅ“ud Â«Surveillance environnementaleÂ», cliquez sur Â«Ã‰lÃ©ments de donnÃ©esÂ»&gt; dans la fenÃªtre qui apparaÃ®t, cliquez sur Â«CrÃ©er un Ã©lÃ©ment de donnÃ©esÂ». <br><br>  Nous commenÃ§ons Ã  "marteler" nos capteurs: <br><br><img src="https://habrastorage.org/webt/j_/ei/9n/j_ei9nphfowd7sgjp6r8u3r9xyk.png"><br><br>  Nuances mineures: <br><br></p><ul><li>  l'article utilise la syntaxe de la fonction <em>"modbus_read_registers"</em> , et selon la description de GitHub <em>"modbus_read"</em> - la deuxiÃ¨me option est plus courte et fonctionne; </li><li>  au lieu des macros <em>{$ MODBUS_PORT}</em> et <em>{$ MODBUS_SLAVE},</em> vous pouvez spÃ©cifier le port sous la forme <em>/ dev / ttyUSB0</em> et " <em>11</em> ", mais cela ne sera pas pratique si vous devez ultÃ©rieurement modifier le port USB ou l'adresse du S2000-PP; </li><li>  la documentation indique que pour demander l'Ã©tat de la zone (colonne "N Â° de zone Modbus") sur S2000-PP, vous devez contacter: "enregistrer l'adresse 40000 + M, oÃ¹ M = (zone n Â° -1)" - c'est la progression: "zone n Â° <strong>moins</strong> 1 " </li><li>  ne pas effectuer de relevÃ© de temps trÃ¨s frÃ©quent: S2000-PP commence Ã  renvoyer une erreur "exception error 15" - l'appareil n'a pas le temps de prÃ©parer les donnÃ©es (cela s'exprime par la lueur constante de l'indicateur sur l'appareil); </li><li>  pour les donnÃ©es de tempÃ©rature et d'humiditÃ© avec les registres 3000 -... est prise </li><li>  dans la fenÃªtre Â«Ã‰lÃ©ments de donnÃ©esÂ» se trouve Ã©galement l'onglet Â«PrÃ©-traitementÂ» souhaitÃ©.  Ici, vous pouvez modifier ce qui sera affichÃ© "Ã  la fin".  La tempÃ©rature et l'humiditÃ© sont obtenues Ã  partir des valeurs de lecture, qui doivent Ãªtre divisÃ©es par 256: Â«Facteur utilisateurÂ» - 0,0039 (soit 1/256); </li><li>  Pour interrupteurs Ã  lames discrÃ¨tes, capteurs de fuite, etc.  vous devez Ã©galement utiliser le "Value Display", cela est dÃ» Ã  la faÃ§on dont les informations sont fournies. </li></ul><br><div class="spoiler">  <b class="spoiler_title">DÃ©finition de la conversion des donnÃ©es dans les images</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/pj/g1/yr/pjg1yrlg-hfu83bgzuch6rke-xg.png"><br><br><img src="https://habrastorage.org/webt/k4/7o/hu/k47ohudcuf9ycomoxbdebii6kvu.png"><br></div></div><br>  Un peu sur la faÃ§on dont les donnÃ©es sont fournies lors des sondages. <br>  Supposons que vous ayez reÃ§u une rÃ©ponse au format dÃ©cimal 9148 (D).  Nous le traduirons au format hexadÃ©cimal (HEX): obtenez 23BC - selon les instructions de l'appareil S2000-PP, ce sont deux Ã©vÃ©nements avec les codes 23 (HEX) / 35 (D) et BC (HEX) / 188 (D).  Ensuite, allez voir le tableau 5. Â«Liste des Ã©vÃ©nements (Ã©tats AL) du systÃ¨me OrionÂ».  On y trouve, 35 "Restauration de l'entrÃ©e technologique" et 188 "Restauration de la communication avec l'entrÃ©e".  Il n'est pas nÃ©cessaire de traduire D-HEX-D, le premier Ã©vÃ©nement est la partie entiÃ¨re de la division de la valeur reÃ§ue par 256 et le reste est le deuxiÃ¨me Ã©vÃ©nement ( <strong>9148</strong> = <strong>35</strong> * 256 + <strong>188</strong> ).  Lors des entretiens avec les intrants technologiques, nous ne retiendrons que le premier Ã©vÃ©nement (prioritaire), qui Â«devraitÂ» prendre les Ã©tats 35 et 36 (Â«Restaurer les intrants technologiquesÂ» et Â«Violer les intrants technologiquesÂ»).  Nous Ã©liminerons la partie fractionnaire (deuxiÃ¨me Ã©vÃ©nement) en utilisant le paramÃ¨tre d'Ã©lÃ©ment de donnÃ©es Â«Type d'information: numÃ©rique (entier positif)Â». <br><br>  Ã‰tape 3. Remplissez les macros de port et les numÃ©ros de pÃ©riphÃ©rique: <br>  ParamÃ¨tres&gt; NÅ“uds de rÃ©seau&gt; "Surveillance environnementale"&gt; sÃ©lectionnez "Macros" <br><br><img src="https://habrastorage.org/webt/h1/r-/qg/h1r-qgd4rrdym-txvbmnhsqwgre.png"><br><br>  Ã‰tape 4. Affichage des lectures sur le panneau de commande: <br>  Ã‰cran de dÃ©marrage&gt; Tous les panneaux, sÃ©lectionnez Â«CrÃ©er un panneauÂ»&gt; dans la fenÃªtre qui apparaÃ®t, dÃ©finissez Â«Nom du panneauÂ» et l'utilisateur auquel ce panneau sera disponible&gt; Cliquez sur Â«CrÃ©er un nouveau widgetÂ»&gt; Tapez Â«PrÃ©sentation des donnÃ©esÂ», Intervalle de mise Ã  jour Â«10 secondesÂ», Groupes nÅ“uds du rÃ©seau Infrastructure d'IngÃ©nierie&gt; Ajouter&gt; Ajuster la taille du panneau et cliquez sur "Enregistrer les modifications": <br><br><img src="https://habrastorage.org/webt/wl/ge/la/wlgelajwrwuuta5phssi2b5rx38.gif"><br><br><h2>  Conclusion </h2><br>  Le systÃ¨me qui en rÃ©sulte, grÃ¢ce Ã  l'utilisation de protocoles "Ã  longue portÃ©e", peut Ãªtre une excellente solution, Ã  la fois pour surveiller le serveur et une paire de zones de bureaux croisÃ©es (en termes de surveillance des conditions de tempÃ©rature et d'humiditÃ©) ou mÃªme un petit centre de donnÃ©es.  Quelqu'un peut dire Â«fu fu fu, la voiture est toujours dÃ©goÃ»tante, vous devez utiliser XXX (remplacer quelque chose de l'automatisation industrielle)Â» est Ã©galement une option, mais Ã  mon avis, ce sera trÃ¨s redondant et aussi plus cher .  Et une petite nuance: comme vous pouvez le voir, le systÃ¨me sur le Bolid est assez simple (bien qu'il y ait une logique un peu Ã©trange), mais Â«finissezÂ» la dÃ©cision sur le bal.  contrÃ´leurs - parfois, il est toujours un "smut". <br><br>  PS Cet article est une adaptation de deux articles sur mon blog: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Surveillance peu coÃ»teuse pour la salle des serveurs (partie 1 - introduction)</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Surveillance peu coÃ»teuse pour la salle des serveurs (partie 2 - pratique)</a> <br><br>  UPD  AprÃ¨s avoir travaillÃ© pendant 3 jours, l'adaptateur RS485-USB est tombÃ©.  Il est reconnu comme instable, mais adaptÃ© Ã  la mise en service.  Il a Ã©tÃ© remplacÃ© par un convertisseur Ã  port unique MGate MB3170 fabriquÃ© par MOXA (tirÃ© de ce qui Ã©tait disponible) - tout est devenu stable. <br>  Vous devez comprendre que cet article n'est qu'un exemple de la faÃ§on de Â«se faire des amisÂ» avec Zabbix et Bolid.  Pour une implÃ©mentation rÃ©elle, vous pouvez ajouter davantage d'Ã©tats DPS surveillÃ©s, ainsi que, par exemple, des tempÃ©ratures nÃ©gatives (elles sont traitÃ©es un peu diffÃ©remment). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438788/">https://habr.com/ru/post/fr438788/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438774/index.html">Tout le meilleur Ã  la fois. Les articles les plus vifs du blog LANIT sur HabrÃ© - 2018</a></li>
<li><a href="../fr438776/index.html">Trucs et astuces de ma chaÃ®ne Telegram @pythonetc, janvier 2019</a></li>
<li><a href="../fr438778/index.html">@Pythonetc janvier 2019</a></li>
<li><a href="../fr438782/index.html">Le FSB a proposÃ© la sortie de cartes SIM russes et l'utilisation de la cryptographie domestique pour la 5G</a></li>
<li><a href="../fr438784/index.html">ProblÃ¨mes d'utilisation du service Yandex.Metrica</a></li>
<li><a href="../fr438790/index.html">L'Ã©change de crypto-monnaie QuadrigaCX ne donnera pas 137 millions de dollars. Seul le directeur connaissait le mot de passe du magasin et il est dÃ©cÃ©dÃ©</a></li>
<li><a href="../fr438792/index.html">Utilisation d'AccelStor Tous les tableaux Flash dans les projets VDI</a></li>
<li><a href="../fr438794/index.html">DÃ©tails des objets JavaScript</a></li>
<li><a href="../fr438796/index.html">Apprendre Docker Partie 1: Les bases</a></li>
<li><a href="../fr438798/index.html">Comment travailler avec des donnÃ©es de cyber-intelligence: nous apprenons Ã  collecter et Ã  identifier les indicateurs de compromis du systÃ¨me</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>